function VP(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const f=Object.getOwnPropertyDescriptor(a,c);f&&Object.defineProperty(e,c,f.get?f:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const y of f.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&a(y)}).observe(document,{childList:!0,subtree:!0});function i(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(c){if(c.ep)return;c.ep=!0;const f=i(c);fetch(c.href,f)}})();var wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function m_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){if(this instanceof a){var c=[null];c.push.apply(c,arguments);var f=Function.bind.apply(t,c);return new f}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var AE={exports:{}},sg={},PE={exports:{}},Dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vd=Symbol.for("react.element"),GP=Symbol.for("react.portal"),ZP=Symbol.for("react.fragment"),WP=Symbol.for("react.strict_mode"),HP=Symbol.for("react.profiler"),XP=Symbol.for("react.provider"),qP=Symbol.for("react.context"),KP=Symbol.for("react.forward_ref"),YP=Symbol.for("react.suspense"),JP=Symbol.for("react.memo"),QP=Symbol.for("react.lazy"),zw=Symbol.iterator;function eM(e){return e===null||typeof e!="object"?null:(e=zw&&e[zw]||e["@@iterator"],typeof e=="function"?e:null)}var ME={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kE=Object.assign,zE={};function yh(e,t,i){this.props=e,this.context=t,this.refs=zE,this.updater=i||ME}yh.prototype.isReactComponent={};yh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};yh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function LE(){}LE.prototype=yh.prototype;function g_(e,t,i){this.props=e,this.context=t,this.refs=zE,this.updater=i||ME}var y_=g_.prototype=new LE;y_.constructor=g_;kE(y_,yh.prototype);y_.isPureReactComponent=!0;var Lw=Array.isArray,RE=Object.prototype.hasOwnProperty,v_={current:null},OE={key:!0,ref:!0,__self:!0,__source:!0};function FE(e,t,i){var a,c={},f=null,y=null;if(t!=null)for(a in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(f=""+t.key),t)RE.call(t,a)&&!OE.hasOwnProperty(a)&&(c[a]=t[a]);var l=arguments.length-2;if(l===1)c.children=i;else if(1<l){for(var b=Array(l),w=0;w<l;w++)b[w]=arguments[w+2];c.children=b}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)c[a]===void 0&&(c[a]=l[a]);return{$$typeof:vd,type:e,key:f,ref:y,props:c,_owner:v_.current}}function tM(e,t){return{$$typeof:vd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function __(e){return typeof e=="object"&&e!==null&&e.$$typeof===vd}function nM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Rw=/\/+/g;function Iy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?nM(""+e.key):t.toString(36)}function Op(e,t,i,a,c){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(f){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case vd:case GP:y=!0}}if(y)return y=e,c=c(y),e=a===""?"."+Iy(y,0):a,Lw(c)?(i="",e!=null&&(i=e.replace(Rw,"$&/")+"/"),Op(c,t,i,"",function(w){return w})):c!=null&&(__(c)&&(c=tM(c,i+(!c.key||y&&y.key===c.key?"":(""+c.key).replace(Rw,"$&/")+"/")+e)),t.push(c)),1;if(y=0,a=a===""?".":a+":",Lw(e))for(var l=0;l<e.length;l++){f=e[l];var b=a+Iy(f,l);y+=Op(f,t,i,b,c)}else if(b=eM(e),typeof b=="function")for(e=b.call(e),l=0;!(f=e.next()).done;)f=f.value,b=a+Iy(f,l++),y+=Op(f,t,i,b,c);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function sp(e,t,i){if(e==null)return e;var a=[],c=0;return Op(e,a,"","",function(f){return t.call(i,f,c++)}),a}function rM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var to={current:null},Fp={transition:null},iM={ReactCurrentDispatcher:to,ReactCurrentBatchConfig:Fp,ReactCurrentOwner:v_};Dn.Children={map:sp,forEach:function(e,t,i){sp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return sp(e,function(){t++}),t},toArray:function(e){return sp(e,function(t){return t})||[]},only:function(e){if(!__(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Dn.Component=yh;Dn.Fragment=ZP;Dn.Profiler=HP;Dn.PureComponent=g_;Dn.StrictMode=WP;Dn.Suspense=YP;Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iM;Dn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=kE({},e.props),c=e.key,f=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,y=v_.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)RE.call(t,b)&&!OE.hasOwnProperty(b)&&(a[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)a.children=i;else if(1<b){l=Array(b);for(var w=0;w<b;w++)l[w]=arguments[w+2];a.children=l}return{$$typeof:vd,type:e.type,key:c,ref:f,props:a,_owner:y}};Dn.createContext=function(e){return e={$$typeof:qP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:XP,_context:e},e.Consumer=e};Dn.createElement=FE;Dn.createFactory=function(e){var t=FE.bind(null,e);return t.type=e,t};Dn.createRef=function(){return{current:null}};Dn.forwardRef=function(e){return{$$typeof:KP,render:e}};Dn.isValidElement=__;Dn.lazy=function(e){return{$$typeof:QP,_payload:{_status:-1,_result:e},_init:rM}};Dn.memo=function(e,t){return{$$typeof:JP,type:e,compare:t===void 0?null:t}};Dn.startTransition=function(e){var t=Fp.transition;Fp.transition={};try{e()}finally{Fp.transition=t}};Dn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Dn.useCallback=function(e,t){return to.current.useCallback(e,t)};Dn.useContext=function(e){return to.current.useContext(e)};Dn.useDebugValue=function(){};Dn.useDeferredValue=function(e){return to.current.useDeferredValue(e)};Dn.useEffect=function(e,t){return to.current.useEffect(e,t)};Dn.useId=function(){return to.current.useId()};Dn.useImperativeHandle=function(e,t,i){return to.current.useImperativeHandle(e,t,i)};Dn.useInsertionEffect=function(e,t){return to.current.useInsertionEffect(e,t)};Dn.useLayoutEffect=function(e,t){return to.current.useLayoutEffect(e,t)};Dn.useMemo=function(e,t){return to.current.useMemo(e,t)};Dn.useReducer=function(e,t,i){return to.current.useReducer(e,t,i)};Dn.useRef=function(e){return to.current.useRef(e)};Dn.useState=function(e){return to.current.useState(e)};Dn.useSyncExternalStore=function(e,t,i){return to.current.useSyncExternalStore(e,t,i)};Dn.useTransition=function(){return to.current.useTransition()};Dn.version="18.2.0";PE.exports=Dn;var wt=PE.exports;const jE=yd(wt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oM=wt,sM=Symbol.for("react.element"),aM=Symbol.for("react.fragment"),lM=Object.prototype.hasOwnProperty,uM=oM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cM={key:!0,ref:!0,__self:!0,__source:!0};function DE(e,t,i){var a,c={},f=null,y=null;i!==void 0&&(f=""+i),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(y=t.ref);for(a in t)lM.call(t,a)&&!cM.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:sM,type:e,key:f,ref:y,props:c,_owner:uM.current}}sg.Fragment=aM;sg.jsx=DE;sg.jsxs=DE;AE.exports=sg;var gt=AE.exports,BE={exports:{}},Oo={},NE={exports:{}},UE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ne,ge){var Ee=ne.length;ne.push(ge);e:for(;0<Ee;){var we=Ee-1>>>1,Ne=ne[we];if(0<c(Ne,ge))ne[we]=ge,ne[Ee]=Ne,Ee=we;else break e}}function i(ne){return ne.length===0?null:ne[0]}function a(ne){if(ne.length===0)return null;var ge=ne[0],Ee=ne.pop();if(Ee!==ge){ne[0]=Ee;e:for(var we=0,Ne=ne.length,ze=Ne>>>1;we<ze;){var Pe=2*(we+1)-1,He=ne[Pe],Ge=Pe+1,it=ne[Ge];if(0>c(He,Ee))Ge<Ne&&0>c(it,He)?(ne[we]=it,ne[Ge]=Ee,we=Ge):(ne[we]=He,ne[Pe]=Ee,we=Pe);else if(Ge<Ne&&0>c(it,Ee))ne[we]=it,ne[Ge]=Ee,we=Ge;else break e}}return ge}function c(ne,ge){var Ee=ne.sortIndex-ge.sortIndex;return Ee!==0?Ee:ne.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var y=Date,l=y.now();e.unstable_now=function(){return y.now()-l}}var b=[],w=[],I=1,E=null,z=3,O=!1,Q=!1,Y=!1,pe=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ne){for(var ge=i(w);ge!==null;){if(ge.callback===null)a(w);else if(ge.startTime<=ne)a(w),ge.sortIndex=ge.expirationTime,t(b,ge);else break;ge=i(w)}}function oe(ne){if(Y=!1,N(ne),!Q)if(i(b)!==null)Q=!0,le(W);else{var ge=i(w);ge!==null&&re(oe,ge.startTime-ne)}}function W(ne,ge){Q=!1,Y&&(Y=!1,G(M),M=-1),O=!0;var Ee=z;try{for(N(ge),E=i(b);E!==null&&(!(E.expirationTime>ge)||ne&&!J());){var we=E.callback;if(typeof we=="function"){E.callback=null,z=E.priorityLevel;var Ne=we(E.expirationTime<=ge);ge=e.unstable_now(),typeof Ne=="function"?E.callback=Ne:E===i(b)&&a(b),N(ge)}else a(b);E=i(b)}if(E!==null)var ze=!0;else{var Pe=i(w);Pe!==null&&re(oe,Pe.startTime-ge),ze=!1}return ze}finally{E=null,z=Ee,O=!1}}var B=!1,S=null,M=-1,Z=5,X=-1;function J(){return!(e.unstable_now()-X<Z)}function ye(){if(S!==null){var ne=e.unstable_now();X=ne;var ge=!0;try{ge=S(!0,ne)}finally{ge?xe():(B=!1,S=null)}}else B=!1}var xe;if(typeof V=="function")xe=function(){V(ye)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,te=be.port2;be.port1.onmessage=ye,xe=function(){te.postMessage(null)}}else xe=function(){pe(ye,0)};function le(ne){S=ne,B||(B=!0,xe())}function re(ne,ge){M=pe(function(){ne(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){Q||O||(Q=!0,le(W))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_getFirstCallbackNode=function(){return i(b)},e.unstable_next=function(ne){switch(z){case 1:case 2:case 3:var ge=3;break;default:ge=z}var Ee=z;z=ge;try{return ne()}finally{z=Ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,ge){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var Ee=z;z=ne;try{return ge()}finally{z=Ee}},e.unstable_scheduleCallback=function(ne,ge,Ee){var we=e.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?we+Ee:we):Ee=we,ne){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=Ee+Ne,ne={id:I++,callback:ge,priorityLevel:ne,startTime:Ee,expirationTime:Ne,sortIndex:-1},Ee>we?(ne.sortIndex=Ee,t(w,ne),i(b)===null&&ne===i(w)&&(Y?(G(M),M=-1):Y=!0,re(oe,Ee-we))):(ne.sortIndex=Ne,t(b,ne),Q||O||(Q=!0,le(W))),ne},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(ne){var ge=z;return function(){var Ee=z;z=ge;try{return ne.apply(this,arguments)}finally{z=Ee}}}})(UE);NE.exports=UE;var hM=NE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E=wt,Ro=hM;function Pt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VE=new Set,qf={};function ju(e,t){oh(e,t),oh(e+"Capture",t)}function oh(e,t){for(qf[e]=t,e=0;e<t.length;e++)VE.add(t[e])}var za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),z0=Object.prototype.hasOwnProperty,fM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ow={},Fw={};function dM(e){return z0.call(Fw,e)?!0:z0.call(Ow,e)?!1:fM.test(e)?Fw[e]=!0:(Ow[e]=!0,!1)}function pM(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function mM(e,t,i,a){if(t===null||typeof t>"u"||pM(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function no(e,t,i,a,c,f,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=y}var wi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wi[e]=new no(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wi[t]=new no(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wi[e]=new no(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wi[e]=new no(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wi[e]=new no(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wi[e]=new no(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wi[e]=new no(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wi[e]=new no(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wi[e]=new no(e,5,!1,e.toLowerCase(),null,!1,!1)});var x_=/[\-:]([a-z])/g;function w_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x_,w_);wi[t]=new no(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x_,w_);wi[t]=new no(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x_,w_);wi[t]=new no(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wi[e]=new no(e,1,!1,e.toLowerCase(),null,!1,!1)});wi.xlinkHref=new no("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wi[e]=new no(e,1,!1,e.toLowerCase(),null,!0,!0)});function b_(e,t,i,a){var c=wi.hasOwnProperty(t)?wi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(mM(t,i,c,a)&&(i=null),a||c===null?dM(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var Na=$E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ap=Symbol.for("react.element"),Lc=Symbol.for("react.portal"),Rc=Symbol.for("react.fragment"),E_=Symbol.for("react.strict_mode"),L0=Symbol.for("react.profiler"),GE=Symbol.for("react.provider"),ZE=Symbol.for("react.context"),S_=Symbol.for("react.forward_ref"),R0=Symbol.for("react.suspense"),O0=Symbol.for("react.suspense_list"),T_=Symbol.for("react.memo"),vl=Symbol.for("react.lazy"),WE=Symbol.for("react.offscreen"),jw=Symbol.iterator;function ff(e){return e===null||typeof e!="object"?null:(e=jw&&e[jw]||e["@@iterator"],typeof e=="function"?e:null)}var Rr=Object.assign,Ay;function wf(e){if(Ay===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Ay=t&&t[1]||""}return`
`+Ay+e}var Py=!1;function My(e,t){if(!e||Py)return"";Py=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var a=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){a=w}e.call(t.prototype)}else{try{throw Error()}catch(w){a=w}e()}}catch(w){if(w&&a&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),f=a.stack.split(`
`),y=c.length-1,l=f.length-1;1<=y&&0<=l&&c[y]!==f[l];)l--;for(;1<=y&&0<=l;y--,l--)if(c[y]!==f[l]){if(y!==1||l!==1)do if(y--,l--,0>l||c[y]!==f[l]){var b=`
`+c[y].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=y&&0<=l);break}}}finally{Py=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?wf(e):""}function gM(e){switch(e.tag){case 5:return wf(e.type);case 16:return wf("Lazy");case 13:return wf("Suspense");case 19:return wf("SuspenseList");case 0:case 2:case 15:return e=My(e.type,!1),e;case 11:return e=My(e.type.render,!1),e;case 1:return e=My(e.type,!0),e;default:return""}}function F0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rc:return"Fragment";case Lc:return"Portal";case L0:return"Profiler";case E_:return"StrictMode";case R0:return"Suspense";case O0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ZE:return(e.displayName||"Context")+".Consumer";case GE:return(e._context.displayName||"Context")+".Provider";case S_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case T_:return t=e.displayName||null,t!==null?t:F0(e.type)||"Memo";case vl:t=e._payload,e=e._init;try{return F0(e(t))}catch{}}return null}function yM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F0(t);case 8:return t===E_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function HE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vM(e){var t=HE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,f=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){a=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function lp(e){e._valueTracker||(e._valueTracker=vM(e))}function XE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=HE(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function rm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function j0(e,t){var i=t.checked;return Rr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Dw(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=Fl(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qE(e,t){t=t.checked,t!=null&&b_(e,"checked",t,!1)}function D0(e,t){qE(e,t);var i=Fl(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?B0(e,t.type,i):t.hasOwnProperty("defaultValue")&&B0(e,t.type,Fl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bw(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function B0(e,t,i){(t!=="number"||rm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var bf=Array.isArray;function Kc(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+Fl(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function N0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pt(91));return Rr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nw(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Pt(92));if(bf(i)){if(1<i.length)throw Error(Pt(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Fl(i)}}function KE(e,t){var i=Fl(t.value),a=Fl(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function Uw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function YE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function U0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?YE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var up,JE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(up=up||document.createElement("div"),up.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=up.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Kf(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Lf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_M=["Webkit","ms","Moz","O"];Object.keys(Lf).forEach(function(e){_M.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Lf[t]=Lf[e]})});function QE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Lf.hasOwnProperty(e)&&Lf[e]?(""+t).trim():t+"px"}function eS(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=QE(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var xM=Rr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $0(e,t){if(t){if(xM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pt(62))}}function V0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var G0=null;function C_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Z0=null,Yc=null,Jc=null;function $w(e){if(e=wd(e)){if(typeof Z0!="function")throw Error(Pt(280));var t=e.stateNode;t&&(t=hg(t),Z0(e.stateNode,e.type,t))}}function tS(e){Yc?Jc?Jc.push(e):Jc=[e]:Yc=e}function nS(){if(Yc){var e=Yc,t=Jc;if(Jc=Yc=null,$w(e),t)for(e=0;e<t.length;e++)$w(t[e])}}function rS(e,t){return e(t)}function iS(){}var ky=!1;function oS(e,t,i){if(ky)return e(t,i);ky=!0;try{return rS(e,t,i)}finally{ky=!1,(Yc!==null||Jc!==null)&&(iS(),nS())}}function Yf(e,t){var i=e.stateNode;if(i===null)return null;var a=hg(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Pt(231,t,typeof i));return i}var W0=!1;if(za)try{var df={};Object.defineProperty(df,"passive",{get:function(){W0=!0}}),window.addEventListener("test",df,df),window.removeEventListener("test",df,df)}catch{W0=!1}function wM(e,t,i,a,c,f,y,l,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(i,w)}catch(I){this.onError(I)}}var Rf=!1,im=null,om=!1,H0=null,bM={onError:function(e){Rf=!0,im=e}};function EM(e,t,i,a,c,f,y,l,b){Rf=!1,im=null,wM.apply(bM,arguments)}function SM(e,t,i,a,c,f,y,l,b){if(EM.apply(this,arguments),Rf){if(Rf){var w=im;Rf=!1,im=null}else throw Error(Pt(198));om||(om=!0,H0=w)}}function Du(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function sS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vw(e){if(Du(e)!==e)throw Error(Pt(188))}function TM(e){var t=e.alternate;if(!t){if(t=Du(e),t===null)throw Error(Pt(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===i)return Vw(c),e;if(f===a)return Vw(c),t;f=f.sibling}throw Error(Pt(188))}if(i.return!==a.return)i=c,a=f;else{for(var y=!1,l=c.child;l;){if(l===i){y=!0,i=c,a=f;break}if(l===a){y=!0,a=c,i=f;break}l=l.sibling}if(!y){for(l=f.child;l;){if(l===i){y=!0,i=f,a=c;break}if(l===a){y=!0,a=f,i=c;break}l=l.sibling}if(!y)throw Error(Pt(189))}}if(i.alternate!==a)throw Error(Pt(190))}if(i.tag!==3)throw Error(Pt(188));return i.stateNode.current===i?e:t}function aS(e){return e=TM(e),e!==null?lS(e):null}function lS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lS(e);if(t!==null)return t;e=e.sibling}return null}var uS=Ro.unstable_scheduleCallback,Gw=Ro.unstable_cancelCallback,CM=Ro.unstable_shouldYield,IM=Ro.unstable_requestPaint,Gr=Ro.unstable_now,AM=Ro.unstable_getCurrentPriorityLevel,I_=Ro.unstable_ImmediatePriority,cS=Ro.unstable_UserBlockingPriority,sm=Ro.unstable_NormalPriority,PM=Ro.unstable_LowPriority,hS=Ro.unstable_IdlePriority,ag=null,na=null;function MM(e){if(na&&typeof na.onCommitFiberRoot=="function")try{na.onCommitFiberRoot(ag,e,void 0,(e.current.flags&128)===128)}catch{}}var Ts=Math.clz32?Math.clz32:LM,kM=Math.log,zM=Math.LN2;function LM(e){return e>>>=0,e===0?32:31-(kM(e)/zM|0)|0}var cp=64,hp=4194304;function Ef(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function am(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,f=e.pingedLanes,y=i&268435455;if(y!==0){var l=y&~c;l!==0?a=Ef(l):(f&=y,f!==0&&(a=Ef(f)))}else y=i&~c,y!==0?a=Ef(y):f!==0&&(a=Ef(f));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,f=t&-t,c>=f||c===16&&(f&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Ts(t),c=1<<i,a|=e[i],t&=~c;return a}function RM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OM(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var y=31-Ts(f),l=1<<y,b=c[y];b===-1?(!(l&i)||l&a)&&(c[y]=RM(l,t)):b<=t&&(e.expiredLanes|=l),f&=~l}}function X0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function fS(){var e=cp;return cp<<=1,!(cp&4194240)&&(cp=64),e}function zy(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function _d(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ts(t),e[t]=i}function FM(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Ts(i),f=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~f}}function A_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Ts(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var nr=0;function dS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var pS,P_,mS,gS,yS,q0=!1,fp=[],Al=null,Pl=null,Ml=null,Jf=new Map,Qf=new Map,bl=[],jM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zw(e,t){switch(e){case"focusin":case"focusout":Al=null;break;case"dragenter":case"dragleave":Pl=null;break;case"mouseover":case"mouseout":Ml=null;break;case"pointerover":case"pointerout":Jf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qf.delete(t.pointerId)}}function pf(e,t,i,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},t!==null&&(t=wd(t),t!==null&&P_(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function DM(e,t,i,a,c){switch(t){case"focusin":return Al=pf(Al,e,t,i,a,c),!0;case"dragenter":return Pl=pf(Pl,e,t,i,a,c),!0;case"mouseover":return Ml=pf(Ml,e,t,i,a,c),!0;case"pointerover":var f=c.pointerId;return Jf.set(f,pf(Jf.get(f)||null,e,t,i,a,c)),!0;case"gotpointercapture":return f=c.pointerId,Qf.set(f,pf(Qf.get(f)||null,e,t,i,a,c)),!0}return!1}function vS(e){var t=bu(e.target);if(t!==null){var i=Du(t);if(i!==null){if(t=i.tag,t===13){if(t=sS(i),t!==null){e.blockedOn=t,yS(e.priority,function(){mS(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=K0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);G0=a,i.target.dispatchEvent(a),G0=null}else return t=wd(i),t!==null&&P_(t),e.blockedOn=i,!1;t.shift()}return!0}function Ww(e,t,i){jp(e)&&i.delete(t)}function BM(){q0=!1,Al!==null&&jp(Al)&&(Al=null),Pl!==null&&jp(Pl)&&(Pl=null),Ml!==null&&jp(Ml)&&(Ml=null),Jf.forEach(Ww),Qf.forEach(Ww)}function mf(e,t){e.blockedOn===t&&(e.blockedOn=null,q0||(q0=!0,Ro.unstable_scheduleCallback(Ro.unstable_NormalPriority,BM)))}function ed(e){function t(c){return mf(c,e)}if(0<fp.length){mf(fp[0],e);for(var i=1;i<fp.length;i++){var a=fp[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Al!==null&&mf(Al,e),Pl!==null&&mf(Pl,e),Ml!==null&&mf(Ml,e),Jf.forEach(t),Qf.forEach(t),i=0;i<bl.length;i++)a=bl[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<bl.length&&(i=bl[0],i.blockedOn===null);)vS(i),i.blockedOn===null&&bl.shift()}var Qc=Na.ReactCurrentBatchConfig,lm=!0;function NM(e,t,i,a){var c=nr,f=Qc.transition;Qc.transition=null;try{nr=1,M_(e,t,i,a)}finally{nr=c,Qc.transition=f}}function UM(e,t,i,a){var c=nr,f=Qc.transition;Qc.transition=null;try{nr=4,M_(e,t,i,a)}finally{nr=c,Qc.transition=f}}function M_(e,t,i,a){if(lm){var c=K0(e,t,i,a);if(c===null)$y(e,t,a,um,i),Zw(e,a);else if(DM(c,e,t,i,a))a.stopPropagation();else if(Zw(e,a),t&4&&-1<jM.indexOf(e)){for(;c!==null;){var f=wd(c);if(f!==null&&pS(f),f=K0(e,t,i,a),f===null&&$y(e,t,a,um,i),f===c)break;c=f}c!==null&&a.stopPropagation()}else $y(e,t,a,null,i)}}var um=null;function K0(e,t,i,a){if(um=null,e=C_(a),e=bu(e),e!==null)if(t=Du(e),t===null)e=null;else if(i=t.tag,i===13){if(e=sS(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return um=e,null}function _S(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AM()){case I_:return 1;case cS:return 4;case sm:case PM:return 16;case hS:return 536870912;default:return 16}default:return 16}}var Tl=null,k_=null,Dp=null;function xS(){if(Dp)return Dp;var e,t=k_,i=t.length,a,c="value"in Tl?Tl.value:Tl.textContent,f=c.length;for(e=0;e<i&&t[e]===c[e];e++);var y=i-e;for(a=1;a<=y&&t[i-a]===c[f-a];a++);return Dp=c.slice(e,1<a?1-a:void 0)}function Bp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function dp(){return!0}function Hw(){return!1}function Fo(e){function t(i,a,c,f,y){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(f):f[l]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?dp:Hw,this.isPropagationStopped=Hw,this}return Rr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=dp)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=dp)},persist:function(){},isPersistent:dp}),t}var vh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},z_=Fo(vh),xd=Rr({},vh,{view:0,detail:0}),$M=Fo(xd),Ly,Ry,gf,lg=Rr({},xd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:L_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gf&&(gf&&e.type==="mousemove"?(Ly=e.screenX-gf.screenX,Ry=e.screenY-gf.screenY):Ry=Ly=0,gf=e),Ly)},movementY:function(e){return"movementY"in e?e.movementY:Ry}}),Xw=Fo(lg),VM=Rr({},lg,{dataTransfer:0}),GM=Fo(VM),ZM=Rr({},xd,{relatedTarget:0}),Oy=Fo(ZM),WM=Rr({},vh,{animationName:0,elapsedTime:0,pseudoElement:0}),HM=Fo(WM),XM=Rr({},vh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qM=Fo(XM),KM=Rr({},vh,{data:0}),qw=Fo(KM),YM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ek(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=QM[e])?!!t[e]:!1}function L_(){return ek}var tk=Rr({},xd,{key:function(e){if(e.key){var t=YM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?JM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:L_,charCode:function(e){return e.type==="keypress"?Bp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nk=Fo(tk),rk=Rr({},lg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kw=Fo(rk),ik=Rr({},xd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:L_}),ok=Fo(ik),sk=Rr({},vh,{propertyName:0,elapsedTime:0,pseudoElement:0}),ak=Fo(sk),lk=Rr({},lg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),uk=Fo(lk),ck=[9,13,27,32],R_=za&&"CompositionEvent"in window,Of=null;za&&"documentMode"in document&&(Of=document.documentMode);var hk=za&&"TextEvent"in window&&!Of,wS=za&&(!R_||Of&&8<Of&&11>=Of),Yw=String.fromCharCode(32),Jw=!1;function bS(e,t){switch(e){case"keyup":return ck.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ES(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oc=!1;function fk(e,t){switch(e){case"compositionend":return ES(t);case"keypress":return t.which!==32?null:(Jw=!0,Yw);case"textInput":return e=t.data,e===Yw&&Jw?null:e;default:return null}}function dk(e,t){if(Oc)return e==="compositionend"||!R_&&bS(e,t)?(e=xS(),Dp=k_=Tl=null,Oc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wS&&t.locale!=="ko"?null:t.data;default:return null}}var pk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pk[e.type]:t==="textarea"}function SS(e,t,i,a){tS(a),t=cm(t,"onChange"),0<t.length&&(i=new z_("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var Ff=null,td=null;function mk(e){OS(e,0)}function ug(e){var t=Dc(e);if(XE(t))return e}function gk(e,t){if(e==="change")return t}var TS=!1;if(za){var Fy;if(za){var jy="oninput"in document;if(!jy){var eb=document.createElement("div");eb.setAttribute("oninput","return;"),jy=typeof eb.oninput=="function"}Fy=jy}else Fy=!1;TS=Fy&&(!document.documentMode||9<document.documentMode)}function tb(){Ff&&(Ff.detachEvent("onpropertychange",CS),td=Ff=null)}function CS(e){if(e.propertyName==="value"&&ug(td)){var t=[];SS(t,td,e,C_(e)),oS(mk,t)}}function yk(e,t,i){e==="focusin"?(tb(),Ff=t,td=i,Ff.attachEvent("onpropertychange",CS)):e==="focusout"&&tb()}function vk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ug(td)}function _k(e,t){if(e==="click")return ug(t)}function xk(e,t){if(e==="input"||e==="change")return ug(t)}function wk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Is=typeof Object.is=="function"?Object.is:wk;function nd(e,t){if(Is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!z0.call(t,c)||!Is(e[c],t[c]))return!1}return!0}function nb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rb(e,t){var i=nb(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=nb(i)}}function IS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?IS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function AS(){for(var e=window,t=rm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=rm(e.document)}return t}function O_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bk(e){var t=AS(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&IS(i.ownerDocument.documentElement,i)){if(a!==null&&O_(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,f=Math.min(a.start,c);a=a.end===void 0?f:Math.min(a.end,c),!e.extend&&f>a&&(c=a,a=f,f=c),c=rb(i,f);var y=rb(i,a);c&&y&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ek=za&&"documentMode"in document&&11>=document.documentMode,Fc=null,Y0=null,jf=null,J0=!1;function ib(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;J0||Fc==null||Fc!==rm(a)||(a=Fc,"selectionStart"in a&&O_(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),jf&&nd(jf,a)||(jf=a,a=cm(Y0,"onSelect"),0<a.length&&(t=new z_("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Fc)))}function pp(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var jc={animationend:pp("Animation","AnimationEnd"),animationiteration:pp("Animation","AnimationIteration"),animationstart:pp("Animation","AnimationStart"),transitionend:pp("Transition","TransitionEnd")},Dy={},PS={};za&&(PS=document.createElement("div").style,"AnimationEvent"in window||(delete jc.animationend.animation,delete jc.animationiteration.animation,delete jc.animationstart.animation),"TransitionEvent"in window||delete jc.transitionend.transition);function cg(e){if(Dy[e])return Dy[e];if(!jc[e])return e;var t=jc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in PS)return Dy[e]=t[i];return e}var MS=cg("animationend"),kS=cg("animationiteration"),zS=cg("animationstart"),LS=cg("transitionend"),RS=new Map,ob="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ul(e,t){RS.set(e,t),ju(t,[e])}for(var By=0;By<ob.length;By++){var Ny=ob[By],Sk=Ny.toLowerCase(),Tk=Ny[0].toUpperCase()+Ny.slice(1);Ul(Sk,"on"+Tk)}Ul(MS,"onAnimationEnd");Ul(kS,"onAnimationIteration");Ul(zS,"onAnimationStart");Ul("dblclick","onDoubleClick");Ul("focusin","onFocus");Ul("focusout","onBlur");Ul(LS,"onTransitionEnd");oh("onMouseEnter",["mouseout","mouseover"]);oh("onMouseLeave",["mouseout","mouseover"]);oh("onPointerEnter",["pointerout","pointerover"]);oh("onPointerLeave",["pointerout","pointerover"]);ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ju("onBeforeInput",["compositionend","keypress","textInput","paste"]);ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ck=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sf));function sb(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,SM(a,t,void 0,e),e.currentTarget=null}function OS(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var y=a.length-1;0<=y;y--){var l=a[y],b=l.instance,w=l.currentTarget;if(l=l.listener,b!==f&&c.isPropagationStopped())break e;sb(c,l,w),f=b}else for(y=0;y<a.length;y++){if(l=a[y],b=l.instance,w=l.currentTarget,l=l.listener,b!==f&&c.isPropagationStopped())break e;sb(c,l,w),f=b}}}if(om)throw e=H0,om=!1,H0=null,e}function gr(e,t){var i=t[rv];i===void 0&&(i=t[rv]=new Set);var a=e+"__bubble";i.has(a)||(FS(t,e,2,!1),i.add(a))}function Uy(e,t,i){var a=0;t&&(a|=4),FS(i,e,a,t)}var mp="_reactListening"+Math.random().toString(36).slice(2);function rd(e){if(!e[mp]){e[mp]=!0,VE.forEach(function(i){i!=="selectionchange"&&(Ck.has(i)||Uy(i,!1,e),Uy(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[mp]||(t[mp]=!0,Uy("selectionchange",!1,t))}}function FS(e,t,i,a){switch(_S(t)){case 1:var c=NM;break;case 4:c=UM;break;default:c=M_}i=c.bind(null,t,i,e),c=void 0,!W0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function $y(e,t,i,a,c){var f=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var y=a.tag;if(y===3||y===4){var l=a.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(y===4)for(y=a.return;y!==null;){var b=y.tag;if((b===3||b===4)&&(b=y.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;y=y.return}for(;l!==null;){if(y=bu(l),y===null)return;if(b=y.tag,b===5||b===6){a=f=y;continue e}l=l.parentNode}}a=a.return}oS(function(){var w=f,I=C_(i),E=[];e:{var z=RS.get(e);if(z!==void 0){var O=z_,Q=e;switch(e){case"keypress":if(Bp(i)===0)break e;case"keydown":case"keyup":O=nk;break;case"focusin":Q="focus",O=Oy;break;case"focusout":Q="blur",O=Oy;break;case"beforeblur":case"afterblur":O=Oy;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Xw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=GM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=ok;break;case MS:case kS:case zS:O=HM;break;case LS:O=ak;break;case"scroll":O=$M;break;case"wheel":O=uk;break;case"copy":case"cut":case"paste":O=qM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Kw}var Y=(t&4)!==0,pe=!Y&&e==="scroll",G=Y?z!==null?z+"Capture":null:z;Y=[];for(var V=w,N;V!==null;){N=V;var oe=N.stateNode;if(N.tag===5&&oe!==null&&(N=oe,G!==null&&(oe=Yf(V,G),oe!=null&&Y.push(id(V,oe,N)))),pe)break;V=V.return}0<Y.length&&(z=new O(z,Q,null,i,I),E.push({event:z,listeners:Y}))}}if(!(t&7)){e:{if(z=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",z&&i!==G0&&(Q=i.relatedTarget||i.fromElement)&&(bu(Q)||Q[La]))break e;if((O||z)&&(z=I.window===I?I:(z=I.ownerDocument)?z.defaultView||z.parentWindow:window,O?(Q=i.relatedTarget||i.toElement,O=w,Q=Q?bu(Q):null,Q!==null&&(pe=Du(Q),Q!==pe||Q.tag!==5&&Q.tag!==6)&&(Q=null)):(O=null,Q=w),O!==Q)){if(Y=Xw,oe="onMouseLeave",G="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(Y=Kw,oe="onPointerLeave",G="onPointerEnter",V="pointer"),pe=O==null?z:Dc(O),N=Q==null?z:Dc(Q),z=new Y(oe,V+"leave",O,i,I),z.target=pe,z.relatedTarget=N,oe=null,bu(I)===w&&(Y=new Y(G,V+"enter",Q,i,I),Y.target=N,Y.relatedTarget=pe,oe=Y),pe=oe,O&&Q)t:{for(Y=O,G=Q,V=0,N=Y;N;N=Tc(N))V++;for(N=0,oe=G;oe;oe=Tc(oe))N++;for(;0<V-N;)Y=Tc(Y),V--;for(;0<N-V;)G=Tc(G),N--;for(;V--;){if(Y===G||G!==null&&Y===G.alternate)break t;Y=Tc(Y),G=Tc(G)}Y=null}else Y=null;O!==null&&ab(E,z,O,Y,!1),Q!==null&&pe!==null&&ab(E,pe,Q,Y,!0)}}e:{if(z=w?Dc(w):window,O=z.nodeName&&z.nodeName.toLowerCase(),O==="select"||O==="input"&&z.type==="file")var W=gk;else if(Qw(z))if(TS)W=xk;else{W=vk;var B=yk}else(O=z.nodeName)&&O.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(W=_k);if(W&&(W=W(e,w))){SS(E,W,i,I);break e}B&&B(e,z,w),e==="focusout"&&(B=z._wrapperState)&&B.controlled&&z.type==="number"&&B0(z,"number",z.value)}switch(B=w?Dc(w):window,e){case"focusin":(Qw(B)||B.contentEditable==="true")&&(Fc=B,Y0=w,jf=null);break;case"focusout":jf=Y0=Fc=null;break;case"mousedown":J0=!0;break;case"contextmenu":case"mouseup":case"dragend":J0=!1,ib(E,i,I);break;case"selectionchange":if(Ek)break;case"keydown":case"keyup":ib(E,i,I)}var S;if(R_)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Oc?bS(e,i)&&(M="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(M="onCompositionStart");M&&(wS&&i.locale!=="ko"&&(Oc||M!=="onCompositionStart"?M==="onCompositionEnd"&&Oc&&(S=xS()):(Tl=I,k_="value"in Tl?Tl.value:Tl.textContent,Oc=!0)),B=cm(w,M),0<B.length&&(M=new qw(M,e,null,i,I),E.push({event:M,listeners:B}),S?M.data=S:(S=ES(i),S!==null&&(M.data=S)))),(S=hk?fk(e,i):dk(e,i))&&(w=cm(w,"onBeforeInput"),0<w.length&&(I=new qw("onBeforeInput","beforeinput",null,i,I),E.push({event:I,listeners:w}),I.data=S))}OS(E,t)})}function id(e,t,i){return{instance:e,listener:t,currentTarget:i}}function cm(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Yf(e,i),f!=null&&a.unshift(id(e,f,c)),f=Yf(e,t),f!=null&&a.push(id(e,f,c))),e=e.return}return a}function Tc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ab(e,t,i,a,c){for(var f=t._reactName,y=[];i!==null&&i!==a;){var l=i,b=l.alternate,w=l.stateNode;if(b!==null&&b===a)break;l.tag===5&&w!==null&&(l=w,c?(b=Yf(i,f),b!=null&&y.unshift(id(i,b,l))):c||(b=Yf(i,f),b!=null&&y.push(id(i,b,l)))),i=i.return}y.length!==0&&e.push({event:t,listeners:y})}var Ik=/\r\n?/g,Ak=/\u0000|\uFFFD/g;function lb(e){return(typeof e=="string"?e:""+e).replace(Ik,`
`).replace(Ak,"")}function gp(e,t,i){if(t=lb(t),lb(e)!==t&&i)throw Error(Pt(425))}function hm(){}var Q0=null,ev=null;function tv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nv=typeof setTimeout=="function"?setTimeout:void 0,Pk=typeof clearTimeout=="function"?clearTimeout:void 0,ub=typeof Promise=="function"?Promise:void 0,Mk=typeof queueMicrotask=="function"?queueMicrotask:typeof ub<"u"?function(e){return ub.resolve(null).then(e).catch(kk)}:nv;function kk(e){setTimeout(function(){throw e})}function Vy(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),ed(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);ed(t)}function kl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function cb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var _h=Math.random().toString(36).slice(2),Ys="__reactFiber$"+_h,od="__reactProps$"+_h,La="__reactContainer$"+_h,rv="__reactEvents$"+_h,zk="__reactListeners$"+_h,Lk="__reactHandles$"+_h;function bu(e){var t=e[Ys];if(t)return t;for(var i=e.parentNode;i;){if(t=i[La]||i[Ys]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=cb(e);e!==null;){if(i=e[Ys])return i;e=cb(e)}return t}e=i,i=e.parentNode}return null}function wd(e){return e=e[Ys]||e[La],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Dc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pt(33))}function hg(e){return e[od]||null}var iv=[],Bc=-1;function $l(e){return{current:e}}function yr(e){0>Bc||(e.current=iv[Bc],iv[Bc]=null,Bc--)}function dr(e,t){Bc++,iv[Bc]=e.current,e.current=t}var jl={},Oi=$l(jl),go=$l(!1),Au=jl;function sh(e,t){var i=e.type.contextTypes;if(!i)return jl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in i)c[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function yo(e){return e=e.childContextTypes,e!=null}function fm(){yr(go),yr(Oi)}function hb(e,t,i){if(Oi.current!==jl)throw Error(Pt(168));dr(Oi,t),dr(go,i)}function jS(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(Pt(108,yM(e)||"Unknown",c));return Rr({},i,a)}function dm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jl,Au=Oi.current,dr(Oi,e),dr(go,go.current),!0}function fb(e,t,i){var a=e.stateNode;if(!a)throw Error(Pt(169));i?(e=jS(e,t,Au),a.__reactInternalMemoizedMergedChildContext=e,yr(go),yr(Oi),dr(Oi,e)):yr(go),dr(go,i)}var Ia=null,fg=!1,Gy=!1;function DS(e){Ia===null?Ia=[e]:Ia.push(e)}function Rk(e){fg=!0,DS(e)}function Vl(){if(!Gy&&Ia!==null){Gy=!0;var e=0,t=nr;try{var i=Ia;for(nr=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Ia=null,fg=!1}catch(c){throw Ia!==null&&(Ia=Ia.slice(e+1)),uS(I_,Vl),c}finally{nr=t,Gy=!1}}return null}var Nc=[],Uc=0,pm=null,mm=0,Ko=[],Yo=0,Pu=null,Pa=1,Ma="";function _u(e,t){Nc[Uc++]=mm,Nc[Uc++]=pm,pm=e,mm=t}function BS(e,t,i){Ko[Yo++]=Pa,Ko[Yo++]=Ma,Ko[Yo++]=Pu,Pu=e;var a=Pa;e=Ma;var c=32-Ts(a)-1;a&=~(1<<c),i+=1;var f=32-Ts(t)+c;if(30<f){var y=c-c%5;f=(a&(1<<y)-1).toString(32),a>>=y,c-=y,Pa=1<<32-Ts(t)+c|i<<c|a,Ma=f+e}else Pa=1<<f|i<<c|a,Ma=e}function F_(e){e.return!==null&&(_u(e,1),BS(e,1,0))}function j_(e){for(;e===pm;)pm=Nc[--Uc],Nc[Uc]=null,mm=Nc[--Uc],Nc[Uc]=null;for(;e===Pu;)Pu=Ko[--Yo],Ko[Yo]=null,Ma=Ko[--Yo],Ko[Yo]=null,Pa=Ko[--Yo],Ko[Yo]=null}var Lo=null,zo=null,Tr=!1,_s=null;function NS(e,t){var i=Qo(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function db(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Lo=e,zo=kl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Lo=e,zo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Pu!==null?{id:Pa,overflow:Ma}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Qo(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Lo=e,zo=null,!0):!1;default:return!1}}function ov(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sv(e){if(Tr){var t=zo;if(t){var i=t;if(!db(e,t)){if(ov(e))throw Error(Pt(418));t=kl(i.nextSibling);var a=Lo;t&&db(e,t)?NS(a,i):(e.flags=e.flags&-4097|2,Tr=!1,Lo=e)}}else{if(ov(e))throw Error(Pt(418));e.flags=e.flags&-4097|2,Tr=!1,Lo=e}}}function pb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Lo=e}function yp(e){if(e!==Lo)return!1;if(!Tr)return pb(e),Tr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tv(e.type,e.memoizedProps)),t&&(t=zo)){if(ov(e))throw US(),Error(Pt(418));for(;t;)NS(e,t),t=kl(t.nextSibling)}if(pb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){zo=kl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}zo=null}}else zo=Lo?kl(e.stateNode.nextSibling):null;return!0}function US(){for(var e=zo;e;)e=kl(e.nextSibling)}function ah(){zo=Lo=null,Tr=!1}function D_(e){_s===null?_s=[e]:_s.push(e)}var Ok=Na.ReactCurrentBatchConfig;function ys(e,t){if(e&&e.defaultProps){t=Rr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var gm=$l(null),ym=null,$c=null,B_=null;function N_(){B_=$c=ym=null}function U_(e){var t=gm.current;yr(gm),e._currentValue=t}function av(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function eh(e,t){ym=e,B_=$c=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mo=!0),e.firstContext=null)}function ns(e){var t=e._currentValue;if(B_!==e)if(e={context:e,memoizedValue:t,next:null},$c===null){if(ym===null)throw Error(Pt(308));$c=e,ym.dependencies={lanes:0,firstContext:e}}else $c=$c.next=e;return t}var Eu=null;function $_(e){Eu===null?Eu=[e]:Eu.push(e)}function $S(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,$_(t)):(i.next=c.next,c.next=i),t.interleaved=i,Ra(e,a)}function Ra(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var _l=!1;function V_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ka(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zl(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Wn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Ra(e,i)}return c=a.interleaved,c===null?(t.next=t,$_(a)):(t.next=c.next,c.next=t),a.interleaved=t,Ra(e,i)}function Np(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,A_(e,i)}}function mb(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?c=f=y:f=f.next=y,i=i.next}while(i!==null);f===null?c=f=t:f=f.next=t}else c=f=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function vm(e,t,i,a){var c=e.updateQueue;_l=!1;var f=c.firstBaseUpdate,y=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var b=l,w=b.next;b.next=null,y===null?f=w:y.next=w,y=b;var I=e.alternate;I!==null&&(I=I.updateQueue,l=I.lastBaseUpdate,l!==y&&(l===null?I.firstBaseUpdate=w:l.next=w,I.lastBaseUpdate=b))}if(f!==null){var E=c.baseState;y=0,I=w=b=null,l=f;do{var z=l.lane,O=l.eventTime;if((a&z)===z){I!==null&&(I=I.next={eventTime:O,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var Q=e,Y=l;switch(z=t,O=i,Y.tag){case 1:if(Q=Y.payload,typeof Q=="function"){E=Q.call(O,E,z);break e}E=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=Y.payload,z=typeof Q=="function"?Q.call(O,E,z):Q,z==null)break e;E=Rr({},E,z);break e;case 2:_l=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,z=c.effects,z===null?c.effects=[l]:z.push(l))}else O={eventTime:O,lane:z,tag:l.tag,payload:l.payload,callback:l.callback,next:null},I===null?(w=I=O,b=E):I=I.next=O,y|=z;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;z=l,l=z.next,z.next=null,c.lastBaseUpdate=z,c.shared.pending=null}}while(1);if(I===null&&(b=E),c.baseState=b,c.firstBaseUpdate=w,c.lastBaseUpdate=I,t=c.shared.interleaved,t!==null){c=t;do y|=c.lane,c=c.next;while(c!==t)}else f===null&&(c.shared.lanes=0);ku|=y,e.lanes=y,e.memoizedState=E}}function gb(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(Pt(191,c));c.call(a)}}}var GS=new $E.Component().refs;function lv(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Rr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var dg={isMounted:function(e){return(e=e._reactInternals)?Du(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=Yi(),c=Rl(e),f=ka(a,c);f.payload=t,i!=null&&(f.callback=i),t=zl(e,f,c),t!==null&&(Cs(t,e,c,a),Np(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=Yi(),c=Rl(e),f=ka(a,c);f.tag=1,f.payload=t,i!=null&&(f.callback=i),t=zl(e,f,c),t!==null&&(Cs(t,e,c,a),Np(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Yi(),a=Rl(e),c=ka(i,a);c.tag=2,t!=null&&(c.callback=t),t=zl(e,c,a),t!==null&&(Cs(t,e,a,i),Np(t,e,a))}};function yb(e,t,i,a,c,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,y):t.prototype&&t.prototype.isPureReactComponent?!nd(i,a)||!nd(c,f):!0}function ZS(e,t,i){var a=!1,c=jl,f=t.contextType;return typeof f=="object"&&f!==null?f=ns(f):(c=yo(t)?Au:Oi.current,a=t.contextTypes,f=(a=a!=null)?sh(e,c):jl),t=new t(i,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dg,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function vb(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&dg.enqueueReplaceState(t,t.state,null)}function uv(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=GS,V_(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=ns(f):(f=yo(t)?Au:Oi.current,c.context=sh(e,f)),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(lv(e,t,f,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&dg.enqueueReplaceState(c,c.state,null),vm(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function yf(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Pt(309));var a=i.stateNode}if(!a)throw Error(Pt(147,e));var c=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(y){var l=c.refs;l===GS&&(l=c.refs={}),y===null?delete l[f]:l[f]=y},t._stringRef=f,t)}if(typeof e!="string")throw Error(Pt(284));if(!i._owner)throw Error(Pt(290,e))}return e}function vp(e,t){throw e=Object.prototype.toString.call(t),Error(Pt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _b(e){var t=e._init;return t(e._payload)}function WS(e){function t(G,V){if(e){var N=G.deletions;N===null?(G.deletions=[V],G.flags|=16):N.push(V)}}function i(G,V){if(!e)return null;for(;V!==null;)t(G,V),V=V.sibling;return null}function a(G,V){for(G=new Map;V!==null;)V.key!==null?G.set(V.key,V):G.set(V.index,V),V=V.sibling;return G}function c(G,V){return G=Ol(G,V),G.index=0,G.sibling=null,G}function f(G,V,N){return G.index=N,e?(N=G.alternate,N!==null?(N=N.index,N<V?(G.flags|=2,V):N):(G.flags|=2,V)):(G.flags|=1048576,V)}function y(G){return e&&G.alternate===null&&(G.flags|=2),G}function l(G,V,N,oe){return V===null||V.tag!==6?(V=Yy(N,G.mode,oe),V.return=G,V):(V=c(V,N),V.return=G,V)}function b(G,V,N,oe){var W=N.type;return W===Rc?I(G,V,N.props.children,oe,N.key):V!==null&&(V.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===vl&&_b(W)===V.type)?(oe=c(V,N.props),oe.ref=yf(G,V,N),oe.return=G,oe):(oe=Wp(N.type,N.key,N.props,null,G.mode,oe),oe.ref=yf(G,V,N),oe.return=G,oe)}function w(G,V,N,oe){return V===null||V.tag!==4||V.stateNode.containerInfo!==N.containerInfo||V.stateNode.implementation!==N.implementation?(V=Jy(N,G.mode,oe),V.return=G,V):(V=c(V,N.children||[]),V.return=G,V)}function I(G,V,N,oe,W){return V===null||V.tag!==7?(V=Iu(N,G.mode,oe,W),V.return=G,V):(V=c(V,N),V.return=G,V)}function E(G,V,N){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Yy(""+V,G.mode,N),V.return=G,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ap:return N=Wp(V.type,V.key,V.props,null,G.mode,N),N.ref=yf(G,null,V),N.return=G,N;case Lc:return V=Jy(V,G.mode,N),V.return=G,V;case vl:var oe=V._init;return E(G,oe(V._payload),N)}if(bf(V)||ff(V))return V=Iu(V,G.mode,N,null),V.return=G,V;vp(G,V)}return null}function z(G,V,N,oe){var W=V!==null?V.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return W!==null?null:l(G,V,""+N,oe);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ap:return N.key===W?b(G,V,N,oe):null;case Lc:return N.key===W?w(G,V,N,oe):null;case vl:return W=N._init,z(G,V,W(N._payload),oe)}if(bf(N)||ff(N))return W!==null?null:I(G,V,N,oe,null);vp(G,N)}return null}function O(G,V,N,oe,W){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return G=G.get(N)||null,l(V,G,""+oe,W);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case ap:return G=G.get(oe.key===null?N:oe.key)||null,b(V,G,oe,W);case Lc:return G=G.get(oe.key===null?N:oe.key)||null,w(V,G,oe,W);case vl:var B=oe._init;return O(G,V,N,B(oe._payload),W)}if(bf(oe)||ff(oe))return G=G.get(N)||null,I(V,G,oe,W,null);vp(V,oe)}return null}function Q(G,V,N,oe){for(var W=null,B=null,S=V,M=V=0,Z=null;S!==null&&M<N.length;M++){S.index>M?(Z=S,S=null):Z=S.sibling;var X=z(G,S,N[M],oe);if(X===null){S===null&&(S=Z);break}e&&S&&X.alternate===null&&t(G,S),V=f(X,V,M),B===null?W=X:B.sibling=X,B=X,S=Z}if(M===N.length)return i(G,S),Tr&&_u(G,M),W;if(S===null){for(;M<N.length;M++)S=E(G,N[M],oe),S!==null&&(V=f(S,V,M),B===null?W=S:B.sibling=S,B=S);return Tr&&_u(G,M),W}for(S=a(G,S);M<N.length;M++)Z=O(S,G,M,N[M],oe),Z!==null&&(e&&Z.alternate!==null&&S.delete(Z.key===null?M:Z.key),V=f(Z,V,M),B===null?W=Z:B.sibling=Z,B=Z);return e&&S.forEach(function(J){return t(G,J)}),Tr&&_u(G,M),W}function Y(G,V,N,oe){var W=ff(N);if(typeof W!="function")throw Error(Pt(150));if(N=W.call(N),N==null)throw Error(Pt(151));for(var B=W=null,S=V,M=V=0,Z=null,X=N.next();S!==null&&!X.done;M++,X=N.next()){S.index>M?(Z=S,S=null):Z=S.sibling;var J=z(G,S,X.value,oe);if(J===null){S===null&&(S=Z);break}e&&S&&J.alternate===null&&t(G,S),V=f(J,V,M),B===null?W=J:B.sibling=J,B=J,S=Z}if(X.done)return i(G,S),Tr&&_u(G,M),W;if(S===null){for(;!X.done;M++,X=N.next())X=E(G,X.value,oe),X!==null&&(V=f(X,V,M),B===null?W=X:B.sibling=X,B=X);return Tr&&_u(G,M),W}for(S=a(G,S);!X.done;M++,X=N.next())X=O(S,G,M,X.value,oe),X!==null&&(e&&X.alternate!==null&&S.delete(X.key===null?M:X.key),V=f(X,V,M),B===null?W=X:B.sibling=X,B=X);return e&&S.forEach(function(ye){return t(G,ye)}),Tr&&_u(G,M),W}function pe(G,V,N,oe){if(typeof N=="object"&&N!==null&&N.type===Rc&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case ap:e:{for(var W=N.key,B=V;B!==null;){if(B.key===W){if(W=N.type,W===Rc){if(B.tag===7){i(G,B.sibling),V=c(B,N.props.children),V.return=G,G=V;break e}}else if(B.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===vl&&_b(W)===B.type){i(G,B.sibling),V=c(B,N.props),V.ref=yf(G,B,N),V.return=G,G=V;break e}i(G,B);break}else t(G,B);B=B.sibling}N.type===Rc?(V=Iu(N.props.children,G.mode,oe,N.key),V.return=G,G=V):(oe=Wp(N.type,N.key,N.props,null,G.mode,oe),oe.ref=yf(G,V,N),oe.return=G,G=oe)}return y(G);case Lc:e:{for(B=N.key;V!==null;){if(V.key===B)if(V.tag===4&&V.stateNode.containerInfo===N.containerInfo&&V.stateNode.implementation===N.implementation){i(G,V.sibling),V=c(V,N.children||[]),V.return=G,G=V;break e}else{i(G,V);break}else t(G,V);V=V.sibling}V=Jy(N,G.mode,oe),V.return=G,G=V}return y(G);case vl:return B=N._init,pe(G,V,B(N._payload),oe)}if(bf(N))return Q(G,V,N,oe);if(ff(N))return Y(G,V,N,oe);vp(G,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,V!==null&&V.tag===6?(i(G,V.sibling),V=c(V,N),V.return=G,G=V):(i(G,V),V=Yy(N,G.mode,oe),V.return=G,G=V),y(G)):i(G,V)}return pe}var lh=WS(!0),HS=WS(!1),bd={},ra=$l(bd),sd=$l(bd),ad=$l(bd);function Su(e){if(e===bd)throw Error(Pt(174));return e}function G_(e,t){switch(dr(ad,t),dr(sd,e),dr(ra,bd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:U0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=U0(t,e)}yr(ra),dr(ra,t)}function uh(){yr(ra),yr(sd),yr(ad)}function XS(e){Su(ad.current);var t=Su(ra.current),i=U0(t,e.type);t!==i&&(dr(sd,e),dr(ra,i))}function Z_(e){sd.current===e&&(yr(ra),yr(sd))}var kr=$l(0);function _m(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zy=[];function W_(){for(var e=0;e<Zy.length;e++)Zy[e]._workInProgressVersionPrimary=null;Zy.length=0}var Up=Na.ReactCurrentDispatcher,Wy=Na.ReactCurrentBatchConfig,Mu=0,Lr=null,ni=null,ci=null,xm=!1,Df=!1,ld=0,Fk=0;function Mi(){throw Error(Pt(321))}function H_(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Is(e[i],t[i]))return!1;return!0}function X_(e,t,i,a,c,f){if(Mu=f,Lr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Up.current=e===null||e.memoizedState===null?Nk:Uk,e=i(a,c),Df){f=0;do{if(Df=!1,ld=0,25<=f)throw Error(Pt(301));f+=1,ci=ni=null,t.updateQueue=null,Up.current=$k,e=i(a,c)}while(Df)}if(Up.current=wm,t=ni!==null&&ni.next!==null,Mu=0,ci=ni=Lr=null,xm=!1,t)throw Error(Pt(300));return e}function q_(){var e=ld!==0;return ld=0,e}function Ks(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?Lr.memoizedState=ci=e:ci=ci.next=e,ci}function rs(){if(ni===null){var e=Lr.alternate;e=e!==null?e.memoizedState:null}else e=ni.next;var t=ci===null?Lr.memoizedState:ci.next;if(t!==null)ci=t,ni=e;else{if(e===null)throw Error(Pt(310));ni=e,e={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},ci===null?Lr.memoizedState=ci=e:ci=ci.next=e}return ci}function ud(e,t){return typeof t=="function"?t(e):t}function Hy(e){var t=rs(),i=t.queue;if(i===null)throw Error(Pt(311));i.lastRenderedReducer=e;var a=ni,c=a.baseQueue,f=i.pending;if(f!==null){if(c!==null){var y=c.next;c.next=f.next,f.next=y}a.baseQueue=c=f,i.pending=null}if(c!==null){f=c.next,a=a.baseState;var l=y=null,b=null,w=f;do{var I=w.lane;if((Mu&I)===I)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),a=w.hasEagerState?w.eagerState:e(a,w.action);else{var E={lane:I,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(l=b=E,y=a):b=b.next=E,Lr.lanes|=I,ku|=I}w=w.next}while(w!==null&&w!==f);b===null?y=a:b.next=l,Is(a,t.memoizedState)||(mo=!0),t.memoizedState=a,t.baseState=y,t.baseQueue=b,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do f=c.lane,Lr.lanes|=f,ku|=f,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Xy(e){var t=rs(),i=t.queue;if(i===null)throw Error(Pt(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,f=t.memoizedState;if(c!==null){i.pending=null;var y=c=c.next;do f=e(f,y.action),y=y.next;while(y!==c);Is(f,t.memoizedState)||(mo=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,a]}function qS(){}function KS(e,t){var i=Lr,a=rs(),c=t(),f=!Is(a.memoizedState,c);if(f&&(a.memoizedState=c,mo=!0),a=a.queue,K_(QS.bind(null,i,a,e),[e]),a.getSnapshot!==t||f||ci!==null&&ci.memoizedState.tag&1){if(i.flags|=2048,cd(9,JS.bind(null,i,a,c,t),void 0,null),hi===null)throw Error(Pt(349));Mu&30||YS(i,t,c)}return c}function YS(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Lr.updateQueue,t===null?(t={lastEffect:null,stores:null},Lr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function JS(e,t,i,a){t.value=i,t.getSnapshot=a,eT(t)&&tT(e)}function QS(e,t,i){return i(function(){eT(t)&&tT(e)})}function eT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Is(e,i)}catch{return!0}}function tT(e){var t=Ra(e,1);t!==null&&Cs(t,e,1,-1)}function xb(e){var t=Ks();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ud,lastRenderedState:e},t.queue=e,e=e.dispatch=Bk.bind(null,Lr,e),[t.memoizedState,e]}function cd(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Lr.updateQueue,t===null?(t={lastEffect:null,stores:null},Lr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function nT(){return rs().memoizedState}function $p(e,t,i,a){var c=Ks();Lr.flags|=e,c.memoizedState=cd(1|t,i,void 0,a===void 0?null:a)}function pg(e,t,i,a){var c=rs();a=a===void 0?null:a;var f=void 0;if(ni!==null){var y=ni.memoizedState;if(f=y.destroy,a!==null&&H_(a,y.deps)){c.memoizedState=cd(t,i,f,a);return}}Lr.flags|=e,c.memoizedState=cd(1|t,i,f,a)}function wb(e,t){return $p(8390656,8,e,t)}function K_(e,t){return pg(2048,8,e,t)}function rT(e,t){return pg(4,2,e,t)}function iT(e,t){return pg(4,4,e,t)}function oT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sT(e,t,i){return i=i!=null?i.concat([e]):null,pg(4,4,oT.bind(null,t,e),i)}function Y_(){}function aT(e,t){var i=rs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&H_(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function lT(e,t){var i=rs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&H_(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function uT(e,t,i){return Mu&21?(Is(i,t)||(i=fS(),Lr.lanes|=i,ku|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mo=!0),e.memoizedState=i)}function jk(e,t){var i=nr;nr=i!==0&&4>i?i:4,e(!0);var a=Wy.transition;Wy.transition={};try{e(!1),t()}finally{nr=i,Wy.transition=a}}function cT(){return rs().memoizedState}function Dk(e,t,i){var a=Rl(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},hT(e))fT(t,i);else if(i=$S(e,t,i,a),i!==null){var c=Yi();Cs(i,e,a,c),dT(i,t,a)}}function Bk(e,t,i){var a=Rl(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(hT(e))fT(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,l=f(y,i);if(c.hasEagerState=!0,c.eagerState=l,Is(l,y)){var b=t.interleaved;b===null?(c.next=c,$_(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}i=$S(e,t,c,a),i!==null&&(c=Yi(),Cs(i,e,a,c),dT(i,t,a))}}function hT(e){var t=e.alternate;return e===Lr||t!==null&&t===Lr}function fT(e,t){Df=xm=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function dT(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,A_(e,i)}}var wm={readContext:ns,useCallback:Mi,useContext:Mi,useEffect:Mi,useImperativeHandle:Mi,useInsertionEffect:Mi,useLayoutEffect:Mi,useMemo:Mi,useReducer:Mi,useRef:Mi,useState:Mi,useDebugValue:Mi,useDeferredValue:Mi,useTransition:Mi,useMutableSource:Mi,useSyncExternalStore:Mi,useId:Mi,unstable_isNewReconciler:!1},Nk={readContext:ns,useCallback:function(e,t){return Ks().memoizedState=[e,t===void 0?null:t],e},useContext:ns,useEffect:wb,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,$p(4194308,4,oT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return $p(4194308,4,e,t)},useInsertionEffect:function(e,t){return $p(4,2,e,t)},useMemo:function(e,t){var i=Ks();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=Ks();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Dk.bind(null,Lr,e),[a.memoizedState,e]},useRef:function(e){var t=Ks();return e={current:e},t.memoizedState=e},useState:xb,useDebugValue:Y_,useDeferredValue:function(e){return Ks().memoizedState=e},useTransition:function(){var e=xb(!1),t=e[0];return e=jk.bind(null,e[1]),Ks().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Lr,c=Ks();if(Tr){if(i===void 0)throw Error(Pt(407));i=i()}else{if(i=t(),hi===null)throw Error(Pt(349));Mu&30||YS(a,t,i)}c.memoizedState=i;var f={value:i,getSnapshot:t};return c.queue=f,wb(QS.bind(null,a,f,e),[e]),a.flags|=2048,cd(9,JS.bind(null,a,f,i,t),void 0,null),i},useId:function(){var e=Ks(),t=hi.identifierPrefix;if(Tr){var i=Ma,a=Pa;i=(a&~(1<<32-Ts(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=ld++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Fk++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Uk={readContext:ns,useCallback:aT,useContext:ns,useEffect:K_,useImperativeHandle:sT,useInsertionEffect:rT,useLayoutEffect:iT,useMemo:lT,useReducer:Hy,useRef:nT,useState:function(){return Hy(ud)},useDebugValue:Y_,useDeferredValue:function(e){var t=rs();return uT(t,ni.memoizedState,e)},useTransition:function(){var e=Hy(ud)[0],t=rs().memoizedState;return[e,t]},useMutableSource:qS,useSyncExternalStore:KS,useId:cT,unstable_isNewReconciler:!1},$k={readContext:ns,useCallback:aT,useContext:ns,useEffect:K_,useImperativeHandle:sT,useInsertionEffect:rT,useLayoutEffect:iT,useMemo:lT,useReducer:Xy,useRef:nT,useState:function(){return Xy(ud)},useDebugValue:Y_,useDeferredValue:function(e){var t=rs();return ni===null?t.memoizedState=e:uT(t,ni.memoizedState,e)},useTransition:function(){var e=Xy(ud)[0],t=rs().memoizedState;return[e,t]},useMutableSource:qS,useSyncExternalStore:KS,useId:cT,unstable_isNewReconciler:!1};function ch(e,t){try{var i="",a=t;do i+=gM(a),a=a.return;while(a);var c=i}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c,digest:null}}function qy(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function cv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Vk=typeof WeakMap=="function"?WeakMap:Map;function pT(e,t,i){i=ka(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){Em||(Em=!0,xv=a),cv(e,t)},i}function mT(e,t,i){i=ka(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){cv(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){cv(e,t),typeof a!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),i}function bb(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new Vk;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=r3.bind(null,e,t,i),t.then(e,e))}function Eb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sb(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=ka(-1,1),t.tag=2,zl(i,t,1))),i.lanes|=1),e)}var Gk=Na.ReactCurrentOwner,mo=!1;function Hi(e,t,i,a){t.child=e===null?HS(t,null,i,a):lh(t,e.child,i,a)}function Tb(e,t,i,a,c){i=i.render;var f=t.ref;return eh(t,c),a=X_(e,t,i,a,f,c),i=q_(),e!==null&&!mo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Oa(e,t,c)):(Tr&&i&&F_(t),t.flags|=1,Hi(e,t,a,c),t.child)}function Cb(e,t,i,a,c){if(e===null){var f=i.type;return typeof f=="function"&&!o1(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=f,gT(e,t,f,a,c)):(e=Wp(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&c)){var y=f.memoizedProps;if(i=i.compare,i=i!==null?i:nd,i(y,a)&&e.ref===t.ref)return Oa(e,t,c)}return t.flags|=1,e=Ol(f,a),e.ref=t.ref,e.return=t,t.child=e}function gT(e,t,i,a,c){if(e!==null){var f=e.memoizedProps;if(nd(f,a)&&e.ref===t.ref)if(mo=!1,t.pendingProps=a=f,(e.lanes&c)!==0)e.flags&131072&&(mo=!0);else return t.lanes=e.lanes,Oa(e,t,c)}return hv(e,t,i,a,c)}function yT(e,t,i){var a=t.pendingProps,c=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},dr(Gc,Po),Po|=i;else{if(!(i&1073741824))return e=f!==null?f.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,dr(Gc,Po),Po|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:i,dr(Gc,Po),Po|=a}else f!==null?(a=f.baseLanes|i,t.memoizedState=null):a=i,dr(Gc,Po),Po|=a;return Hi(e,t,c,i),t.child}function vT(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function hv(e,t,i,a,c){var f=yo(i)?Au:Oi.current;return f=sh(t,f),eh(t,c),i=X_(e,t,i,a,f,c),a=q_(),e!==null&&!mo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Oa(e,t,c)):(Tr&&a&&F_(t),t.flags|=1,Hi(e,t,i,c),t.child)}function Ib(e,t,i,a,c){if(yo(i)){var f=!0;dm(t)}else f=!1;if(eh(t,c),t.stateNode===null)Vp(e,t),ZS(t,i,a),uv(t,i,a,c),a=!0;else if(e===null){var y=t.stateNode,l=t.memoizedProps;y.props=l;var b=y.context,w=i.contextType;typeof w=="object"&&w!==null?w=ns(w):(w=yo(i)?Au:Oi.current,w=sh(t,w));var I=i.getDerivedStateFromProps,E=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function";E||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==a||b!==w)&&vb(t,y,a,w),_l=!1;var z=t.memoizedState;y.state=z,vm(t,a,y,c),b=t.memoizedState,l!==a||z!==b||go.current||_l?(typeof I=="function"&&(lv(t,i,I,a),b=t.memoizedState),(l=_l||yb(t,i,l,a,z,b,w))?(E||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),y.props=a,y.state=b,y.context=w,a=l):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{y=t.stateNode,VS(e,t),l=t.memoizedProps,w=t.type===t.elementType?l:ys(t.type,l),y.props=w,E=t.pendingProps,z=y.context,b=i.contextType,typeof b=="object"&&b!==null?b=ns(b):(b=yo(i)?Au:Oi.current,b=sh(t,b));var O=i.getDerivedStateFromProps;(I=typeof O=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==E||z!==b)&&vb(t,y,a,b),_l=!1,z=t.memoizedState,y.state=z,vm(t,a,y,c);var Q=t.memoizedState;l!==E||z!==Q||go.current||_l?(typeof O=="function"&&(lv(t,i,O,a),Q=t.memoizedState),(w=_l||yb(t,i,w,a,z,Q,b)||!1)?(I||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(a,Q,b),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(a,Q,b)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=Q),y.props=a,y.state=Q,y.context=b,a=w):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),a=!1)}return fv(e,t,i,a,f,c)}function fv(e,t,i,a,c,f){vT(e,t);var y=(t.flags&128)!==0;if(!a&&!y)return c&&fb(t,i,!1),Oa(e,t,f);a=t.stateNode,Gk.current=t;var l=y&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&y?(t.child=lh(t,e.child,null,f),t.child=lh(t,null,l,f)):Hi(e,t,l,f),t.memoizedState=a.state,c&&fb(t,i,!0),t.child}function _T(e){var t=e.stateNode;t.pendingContext?hb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hb(e,t.context,!1),G_(e,t.containerInfo)}function Ab(e,t,i,a,c){return ah(),D_(c),t.flags|=256,Hi(e,t,i,a),t.child}var dv={dehydrated:null,treeContext:null,retryLane:0};function pv(e){return{baseLanes:e,cachePool:null,transitions:null}}function xT(e,t,i){var a=t.pendingProps,c=kr.current,f=!1,y=(t.flags&128)!==0,l;if((l=y)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),dr(kr,c&1),e===null)return sv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=a.children,e=a.fallback,f?(a=t.mode,f=t.child,y={mode:"hidden",children:y},!(a&1)&&f!==null?(f.childLanes=0,f.pendingProps=y):f=yg(y,a,0,null),e=Iu(e,a,i,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=pv(i),t.memoizedState=dv,e):J_(t,y));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return Zk(e,t,y,a,l,c,i);if(f){f=a.fallback,y=t.mode,c=e.child,l=c.sibling;var b={mode:"hidden",children:a.children};return!(y&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=Ol(c,b),a.subtreeFlags=c.subtreeFlags&14680064),l!==null?f=Ol(l,f):(f=Iu(f,y,i,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,y=e.child.memoizedState,y=y===null?pv(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},f.memoizedState=y,f.childLanes=e.childLanes&~i,t.memoizedState=dv,a}return f=e.child,e=f.sibling,a=Ol(f,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function J_(e,t){return t=yg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _p(e,t,i,a){return a!==null&&D_(a),lh(t,e.child,null,i),e=J_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zk(e,t,i,a,c,f,y){if(i)return t.flags&256?(t.flags&=-257,a=qy(Error(Pt(422))),_p(e,t,y,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,c=t.mode,a=yg({mode:"visible",children:a.children},c,0,null),f=Iu(f,c,y,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,t.mode&1&&lh(t,e.child,null,y),t.child.memoizedState=pv(y),t.memoizedState=dv,f);if(!(t.mode&1))return _p(e,t,y,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var l=a.dgst;return a=l,f=Error(Pt(419)),a=qy(f,a,void 0),_p(e,t,y,a)}if(l=(y&e.childLanes)!==0,mo||l){if(a=hi,a!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|y)?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,Ra(e,c),Cs(a,e,c,-1))}return i1(),a=qy(Error(Pt(421))),_p(e,t,y,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=i3.bind(null,e),c._reactRetry=t,null):(e=f.treeContext,zo=kl(c.nextSibling),Lo=t,Tr=!0,_s=null,e!==null&&(Ko[Yo++]=Pa,Ko[Yo++]=Ma,Ko[Yo++]=Pu,Pa=e.id,Ma=e.overflow,Pu=t),t=J_(t,a.children),t.flags|=4096,t)}function Pb(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),av(e.return,t,i)}function Ky(e,t,i,a,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=i,f.tailMode=c)}function wT(e,t,i){var a=t.pendingProps,c=a.revealOrder,f=a.tail;if(Hi(e,t,a.children,i),a=kr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pb(e,i,t);else if(e.tag===19)Pb(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(dr(kr,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&_m(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),Ky(t,!1,c,i,f);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&_m(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Ky(t,!0,i,null,f);break;case"together":Ky(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Oa(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),ku|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pt(153));if(t.child!==null){for(e=t.child,i=Ol(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ol(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Wk(e,t,i){switch(t.tag){case 3:_T(t),ah();break;case 5:XS(t);break;case 1:yo(t.type)&&dm(t);break;case 4:G_(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;dr(gm,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(dr(kr,kr.current&1),t.flags|=128,null):i&t.child.childLanes?xT(e,t,i):(dr(kr,kr.current&1),e=Oa(e,t,i),e!==null?e.sibling:null);dr(kr,kr.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return wT(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),dr(kr,kr.current),a)break;return null;case 22:case 23:return t.lanes=0,yT(e,t,i)}return Oa(e,t,i)}var bT,mv,ET,ST;bT=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};mv=function(){};ET=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Su(ra.current);var f=null;switch(i){case"input":c=j0(e,c),a=j0(e,a),f=[];break;case"select":c=Rr({},c,{value:void 0}),a=Rr({},a,{value:void 0}),f=[];break;case"textarea":c=N0(e,c),a=N0(e,a),f=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=hm)}$0(i,a);var y;i=null;for(w in c)if(!a.hasOwnProperty(w)&&c.hasOwnProperty(w)&&c[w]!=null)if(w==="style"){var l=c[w];for(y in l)l.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(qf.hasOwnProperty(w)?f||(f=[]):(f=f||[]).push(w,null));for(w in a){var b=a[w];if(l=c!=null?c[w]:void 0,a.hasOwnProperty(w)&&b!==l&&(b!=null||l!=null))if(w==="style")if(l){for(y in l)!l.hasOwnProperty(y)||b&&b.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in b)b.hasOwnProperty(y)&&l[y]!==b[y]&&(i||(i={}),i[y]=b[y])}else i||(f||(f=[]),f.push(w,i)),i=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(f=f||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(f=f||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(qf.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&gr("scroll",e),f||l===b||(f=[])):(f=f||[]).push(w,b))}i&&(f=f||[]).push("style",i);var w=f;(t.updateQueue=w)&&(t.flags|=4)}};ST=function(e,t,i,a){i!==a&&(t.flags|=4)};function vf(e,t){if(!Tr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ki(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function Hk(e,t,i){var a=t.pendingProps;switch(j_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ki(t),null;case 1:return yo(t.type)&&fm(),ki(t),null;case 3:return a=t.stateNode,uh(),yr(go),yr(Oi),W_(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(yp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_s!==null&&(Ev(_s),_s=null))),mv(e,t),ki(t),null;case 5:Z_(t);var c=Su(ad.current);if(i=t.type,e!==null&&t.stateNode!=null)ET(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Pt(166));return ki(t),null}if(e=Su(ra.current),yp(t)){a=t.stateNode,i=t.type;var f=t.memoizedProps;switch(a[Ys]=t,a[od]=f,e=(t.mode&1)!==0,i){case"dialog":gr("cancel",a),gr("close",a);break;case"iframe":case"object":case"embed":gr("load",a);break;case"video":case"audio":for(c=0;c<Sf.length;c++)gr(Sf[c],a);break;case"source":gr("error",a);break;case"img":case"image":case"link":gr("error",a),gr("load",a);break;case"details":gr("toggle",a);break;case"input":Dw(a,f),gr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},gr("invalid",a);break;case"textarea":Nw(a,f),gr("invalid",a)}$0(i,f),c=null;for(var y in f)if(f.hasOwnProperty(y)){var l=f[y];y==="children"?typeof l=="string"?a.textContent!==l&&(f.suppressHydrationWarning!==!0&&gp(a.textContent,l,e),c=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(f.suppressHydrationWarning!==!0&&gp(a.textContent,l,e),c=["children",""+l]):qf.hasOwnProperty(y)&&l!=null&&y==="onScroll"&&gr("scroll",a)}switch(i){case"input":lp(a),Bw(a,f,!0);break;case"textarea":lp(a),Uw(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=hm)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{y=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=YE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=y.createElement(i,{is:a.is}):(e=y.createElement(i),i==="select"&&(y=e,a.multiple?y.multiple=!0:a.size&&(y.size=a.size))):e=y.createElementNS(e,i),e[Ys]=t,e[od]=a,bT(e,t,!1,!1),t.stateNode=e;e:{switch(y=V0(i,a),i){case"dialog":gr("cancel",e),gr("close",e),c=a;break;case"iframe":case"object":case"embed":gr("load",e),c=a;break;case"video":case"audio":for(c=0;c<Sf.length;c++)gr(Sf[c],e);c=a;break;case"source":gr("error",e),c=a;break;case"img":case"image":case"link":gr("error",e),gr("load",e),c=a;break;case"details":gr("toggle",e),c=a;break;case"input":Dw(e,a),c=j0(e,a),gr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Rr({},a,{value:void 0}),gr("invalid",e);break;case"textarea":Nw(e,a),c=N0(e,a),gr("invalid",e);break;default:c=a}$0(i,c),l=c;for(f in l)if(l.hasOwnProperty(f)){var b=l[f];f==="style"?eS(e,b):f==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&JE(e,b)):f==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&Kf(e,b):typeof b=="number"&&Kf(e,""+b):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(qf.hasOwnProperty(f)?b!=null&&f==="onScroll"&&gr("scroll",e):b!=null&&b_(e,f,b,y))}switch(i){case"input":lp(e),Bw(e,a,!1);break;case"textarea":lp(e),Uw(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Fl(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Kc(e,!!a.multiple,f,!1):a.defaultValue!=null&&Kc(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=hm)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ki(t),null;case 6:if(e&&t.stateNode!=null)ST(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Pt(166));if(i=Su(ad.current),Su(ra.current),yp(t)){if(a=t.stateNode,i=t.memoizedProps,a[Ys]=t,(f=a.nodeValue!==i)&&(e=Lo,e!==null))switch(e.tag){case 3:gp(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gp(a.nodeValue,i,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[Ys]=t,t.stateNode=a}return ki(t),null;case 13:if(yr(kr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Tr&&zo!==null&&t.mode&1&&!(t.flags&128))US(),ah(),t.flags|=98560,f=!1;else if(f=yp(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(Pt(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(Pt(317));f[Ys]=t}else ah(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ki(t),f=!1}else _s!==null&&(Ev(_s),_s=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||kr.current&1?ri===0&&(ri=3):i1())),t.updateQueue!==null&&(t.flags|=4),ki(t),null);case 4:return uh(),mv(e,t),e===null&&rd(t.stateNode.containerInfo),ki(t),null;case 10:return U_(t.type._context),ki(t),null;case 17:return yo(t.type)&&fm(),ki(t),null;case 19:if(yr(kr),f=t.memoizedState,f===null)return ki(t),null;if(a=(t.flags&128)!==0,y=f.rendering,y===null)if(a)vf(f,!1);else{if(ri!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=_m(e),y!==null){for(t.flags|=128,vf(f,!1),a=y.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)f=i,e=a,f.flags&=14680066,y=f.alternate,y===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,e=y.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return dr(kr,kr.current&1|2),t.child}e=e.sibling}f.tail!==null&&Gr()>hh&&(t.flags|=128,a=!0,vf(f,!1),t.lanes=4194304)}else{if(!a)if(e=_m(y),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),vf(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!Tr)return ki(t),null}else 2*Gr()-f.renderingStartTime>hh&&i!==1073741824&&(t.flags|=128,a=!0,vf(f,!1),t.lanes=4194304);f.isBackwards?(y.sibling=t.child,t.child=y):(i=f.last,i!==null?i.sibling=y:t.child=y,f.last=y)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Gr(),t.sibling=null,i=kr.current,dr(kr,a?i&1|2:i&1),t):(ki(t),null);case 22:case 23:return r1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Po&1073741824&&(ki(t),t.subtreeFlags&6&&(t.flags|=8192)):ki(t),null;case 24:return null;case 25:return null}throw Error(Pt(156,t.tag))}function Xk(e,t){switch(j_(t),t.tag){case 1:return yo(t.type)&&fm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return uh(),yr(go),yr(Oi),W_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Z_(t),null;case 13:if(yr(kr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pt(340));ah()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yr(kr),null;case 4:return uh(),null;case 10:return U_(t.type._context),null;case 22:case 23:return r1(),null;case 24:return null;default:return null}}var xp=!1,Li=!1,qk=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function Vc(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Dr(e,t,a)}else i.current=null}function gv(e,t,i){try{i()}catch(a){Dr(e,t,a)}}var Mb=!1;function Kk(e,t){if(Q0=lm,e=AS(),O_(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var y=0,l=-1,b=-1,w=0,I=0,E=e,z=null;t:for(;;){for(var O;E!==i||c!==0&&E.nodeType!==3||(l=y+c),E!==f||a!==0&&E.nodeType!==3||(b=y+a),E.nodeType===3&&(y+=E.nodeValue.length),(O=E.firstChild)!==null;)z=E,E=O;for(;;){if(E===e)break t;if(z===i&&++w===c&&(l=y),z===f&&++I===a&&(b=y),(O=E.nextSibling)!==null)break;E=z,z=E.parentNode}E=O}i=l===-1||b===-1?null:{start:l,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(ev={focusedElem:e,selectionRange:i},lm=!1,Qt=t;Qt!==null;)if(t=Qt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qt=e;else for(;Qt!==null;){t=Qt;try{var Q=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Q!==null){var Y=Q.memoizedProps,pe=Q.memoizedState,G=t.stateNode,V=G.getSnapshotBeforeUpdate(t.elementType===t.type?Y:ys(t.type,Y),pe);G.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pt(163))}}catch(oe){Dr(t,t.return,oe)}if(e=t.sibling,e!==null){e.return=t.return,Qt=e;break}Qt=t.return}return Q=Mb,Mb=!1,Q}function Bf(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&gv(t,i,f)}c=c.next}while(c!==a)}}function mg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function yv(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function TT(e){var t=e.alternate;t!==null&&(e.alternate=null,TT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ys],delete t[od],delete t[rv],delete t[zk],delete t[Lk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function CT(e){return e.tag===5||e.tag===3||e.tag===4}function kb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||CT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=hm));else if(a!==4&&(e=e.child,e!==null))for(vv(e,t,i),e=e.sibling;e!==null;)vv(e,t,i),e=e.sibling}function _v(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(_v(e,t,i),e=e.sibling;e!==null;)_v(e,t,i),e=e.sibling}var vi=null,vs=!1;function gl(e,t,i){for(i=i.child;i!==null;)IT(e,t,i),i=i.sibling}function IT(e,t,i){if(na&&typeof na.onCommitFiberUnmount=="function")try{na.onCommitFiberUnmount(ag,i)}catch{}switch(i.tag){case 5:Li||Vc(i,t);case 6:var a=vi,c=vs;vi=null,gl(e,t,i),vi=a,vs=c,vi!==null&&(vs?(e=vi,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):vi.removeChild(i.stateNode));break;case 18:vi!==null&&(vs?(e=vi,i=i.stateNode,e.nodeType===8?Vy(e.parentNode,i):e.nodeType===1&&Vy(e,i),ed(e)):Vy(vi,i.stateNode));break;case 4:a=vi,c=vs,vi=i.stateNode.containerInfo,vs=!0,gl(e,t,i),vi=a,vs=c;break;case 0:case 11:case 14:case 15:if(!Li&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var f=c,y=f.destroy;f=f.tag,y!==void 0&&(f&2||f&4)&&gv(i,t,y),c=c.next}while(c!==a)}gl(e,t,i);break;case 1:if(!Li&&(Vc(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(l){Dr(i,t,l)}gl(e,t,i);break;case 21:gl(e,t,i);break;case 22:i.mode&1?(Li=(a=Li)||i.memoizedState!==null,gl(e,t,i),Li=a):gl(e,t,i);break;default:gl(e,t,i)}}function zb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new qk),t.forEach(function(a){var c=o3.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function gs(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var f=e,y=t,l=y;e:for(;l!==null;){switch(l.tag){case 5:vi=l.stateNode,vs=!1;break e;case 3:vi=l.stateNode.containerInfo,vs=!0;break e;case 4:vi=l.stateNode.containerInfo,vs=!0;break e}l=l.return}if(vi===null)throw Error(Pt(160));IT(f,y,c),vi=null,vs=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(w){Dr(c,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)AT(t,e),t=t.sibling}function AT(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gs(t,e),qs(e),a&4){try{Bf(3,e,e.return),mg(3,e)}catch(Y){Dr(e,e.return,Y)}try{Bf(5,e,e.return)}catch(Y){Dr(e,e.return,Y)}}break;case 1:gs(t,e),qs(e),a&512&&i!==null&&Vc(i,i.return);break;case 5:if(gs(t,e),qs(e),a&512&&i!==null&&Vc(i,i.return),e.flags&32){var c=e.stateNode;try{Kf(c,"")}catch(Y){Dr(e,e.return,Y)}}if(a&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,y=i!==null?i.memoizedProps:f,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&f.type==="radio"&&f.name!=null&&qE(c,f),V0(l,y);var w=V0(l,f);for(y=0;y<b.length;y+=2){var I=b[y],E=b[y+1];I==="style"?eS(c,E):I==="dangerouslySetInnerHTML"?JE(c,E):I==="children"?Kf(c,E):b_(c,I,E,w)}switch(l){case"input":D0(c,f);break;case"textarea":KE(c,f);break;case"select":var z=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var O=f.value;O!=null?Kc(c,!!f.multiple,O,!1):z!==!!f.multiple&&(f.defaultValue!=null?Kc(c,!!f.multiple,f.defaultValue,!0):Kc(c,!!f.multiple,f.multiple?[]:"",!1))}c[od]=f}catch(Y){Dr(e,e.return,Y)}}break;case 6:if(gs(t,e),qs(e),a&4){if(e.stateNode===null)throw Error(Pt(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(Y){Dr(e,e.return,Y)}}break;case 3:if(gs(t,e),qs(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{ed(t.containerInfo)}catch(Y){Dr(e,e.return,Y)}break;case 4:gs(t,e),qs(e);break;case 13:gs(t,e),qs(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(t1=Gr())),a&4&&zb(e);break;case 22:if(I=i!==null&&i.memoizedState!==null,e.mode&1?(Li=(w=Li)||I,gs(t,e),Li=w):gs(t,e),qs(e),a&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!I&&e.mode&1)for(Qt=e,I=e.child;I!==null;){for(E=Qt=I;Qt!==null;){switch(z=Qt,O=z.child,z.tag){case 0:case 11:case 14:case 15:Bf(4,z,z.return);break;case 1:Vc(z,z.return);var Q=z.stateNode;if(typeof Q.componentWillUnmount=="function"){a=z,i=z.return;try{t=a,Q.props=t.memoizedProps,Q.state=t.memoizedState,Q.componentWillUnmount()}catch(Y){Dr(a,i,Y)}}break;case 5:Vc(z,z.return);break;case 22:if(z.memoizedState!==null){Rb(E);continue}}O!==null?(O.return=z,Qt=O):Rb(E)}I=I.sibling}e:for(I=null,E=e;;){if(E.tag===5){if(I===null){I=E;try{c=E.stateNode,w?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(l=E.stateNode,b=E.memoizedProps.style,y=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=QE("display",y))}catch(Y){Dr(e,e.return,Y)}}}else if(E.tag===6){if(I===null)try{E.stateNode.nodeValue=w?"":E.memoizedProps}catch(Y){Dr(e,e.return,Y)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;I===E&&(I=null),E=E.return}I===E&&(I=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:gs(t,e),qs(e),a&4&&zb(e);break;case 21:break;default:gs(t,e),qs(e)}}function qs(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(CT(i)){var a=i;break e}i=i.return}throw Error(Pt(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(Kf(c,""),a.flags&=-33);var f=kb(e);_v(e,f,c);break;case 3:case 4:var y=a.stateNode.containerInfo,l=kb(e);vv(e,l,y);break;default:throw Error(Pt(161))}}catch(b){Dr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yk(e,t,i){Qt=e,PT(e)}function PT(e,t,i){for(var a=(e.mode&1)!==0;Qt!==null;){var c=Qt,f=c.child;if(c.tag===22&&a){var y=c.memoizedState!==null||xp;if(!y){var l=c.alternate,b=l!==null&&l.memoizedState!==null||Li;l=xp;var w=Li;if(xp=y,(Li=b)&&!w)for(Qt=c;Qt!==null;)y=Qt,b=y.child,y.tag===22&&y.memoizedState!==null?Ob(c):b!==null?(b.return=y,Qt=b):Ob(c);for(;f!==null;)Qt=f,PT(f),f=f.sibling;Qt=c,xp=l,Li=w}Lb(e)}else c.subtreeFlags&8772&&f!==null?(f.return=c,Qt=f):Lb(e)}}function Lb(e){for(;Qt!==null;){var t=Qt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Li||mg(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Li)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:ys(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&gb(t,f,a);break;case 3:var y=t.updateQueue;if(y!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}gb(t,y,i)}break;case 5:var l=t.stateNode;if(i===null&&t.flags&4){i=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var I=w.memoizedState;if(I!==null){var E=I.dehydrated;E!==null&&ed(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pt(163))}Li||t.flags&512&&yv(t)}catch(z){Dr(t,t.return,z)}}if(t===e){Qt=null;break}if(i=t.sibling,i!==null){i.return=t.return,Qt=i;break}Qt=t.return}}function Rb(e){for(;Qt!==null;){var t=Qt;if(t===e){Qt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Qt=i;break}Qt=t.return}}function Ob(e){for(;Qt!==null;){var t=Qt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{mg(4,t)}catch(b){Dr(t,i,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(b){Dr(t,c,b)}}var f=t.return;try{yv(t)}catch(b){Dr(t,f,b)}break;case 5:var y=t.return;try{yv(t)}catch(b){Dr(t,y,b)}}}catch(b){Dr(t,t.return,b)}if(t===e){Qt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Qt=l;break}Qt=t.return}}var Jk=Math.ceil,bm=Na.ReactCurrentDispatcher,Q_=Na.ReactCurrentOwner,ts=Na.ReactCurrentBatchConfig,Wn=0,hi=null,Qr=null,xi=0,Po=0,Gc=$l(0),ri=0,hd=null,ku=0,gg=0,e1=0,Nf=null,fo=null,t1=0,hh=1/0,Ca=null,Em=!1,xv=null,Ll=null,wp=!1,Cl=null,Sm=0,Uf=0,wv=null,Gp=-1,Zp=0;function Yi(){return Wn&6?Gr():Gp!==-1?Gp:Gp=Gr()}function Rl(e){return e.mode&1?Wn&2&&xi!==0?xi&-xi:Ok.transition!==null?(Zp===0&&(Zp=fS()),Zp):(e=nr,e!==0||(e=window.event,e=e===void 0?16:_S(e.type)),e):1}function Cs(e,t,i,a){if(50<Uf)throw Uf=0,wv=null,Error(Pt(185));_d(e,i,a),(!(Wn&2)||e!==hi)&&(e===hi&&(!(Wn&2)&&(gg|=i),ri===4&&El(e,xi)),vo(e,a),i===1&&Wn===0&&!(t.mode&1)&&(hh=Gr()+500,fg&&Vl()))}function vo(e,t){var i=e.callbackNode;OM(e,t);var a=am(e,e===hi?xi:0);if(a===0)i!==null&&Gw(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&Gw(i),t===1)e.tag===0?Rk(Fb.bind(null,e)):DS(Fb.bind(null,e)),Mk(function(){!(Wn&6)&&Vl()}),i=null;else{switch(dS(a)){case 1:i=I_;break;case 4:i=cS;break;case 16:i=sm;break;case 536870912:i=hS;break;default:i=sm}i=jT(i,MT.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function MT(e,t){if(Gp=-1,Zp=0,Wn&6)throw Error(Pt(327));var i=e.callbackNode;if(th()&&e.callbackNode!==i)return null;var a=am(e,e===hi?xi:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Tm(e,a);else{t=a;var c=Wn;Wn|=2;var f=zT();(hi!==e||xi!==t)&&(Ca=null,hh=Gr()+500,Cu(e,t));do try{t3();break}catch(l){kT(e,l)}while(1);N_(),bm.current=f,Wn=c,Qr!==null?t=0:(hi=null,xi=0,t=ri)}if(t!==0){if(t===2&&(c=X0(e),c!==0&&(a=c,t=bv(e,c))),t===1)throw i=hd,Cu(e,0),El(e,a),vo(e,Gr()),i;if(t===6)El(e,a);else{if(c=e.current.alternate,!(a&30)&&!Qk(c)&&(t=Tm(e,a),t===2&&(f=X0(e),f!==0&&(a=f,t=bv(e,f))),t===1))throw i=hd,Cu(e,0),El(e,a),vo(e,Gr()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(Pt(345));case 2:xu(e,fo,Ca);break;case 3:if(El(e,a),(a&130023424)===a&&(t=t1+500-Gr(),10<t)){if(am(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){Yi(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=nv(xu.bind(null,e,fo,Ca),t);break}xu(e,fo,Ca);break;case 4:if(El(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var y=31-Ts(a);f=1<<y,y=t[y],y>c&&(c=y),a&=~f}if(a=c,a=Gr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Jk(a/1960))-a,10<a){e.timeoutHandle=nv(xu.bind(null,e,fo,Ca),a);break}xu(e,fo,Ca);break;case 5:xu(e,fo,Ca);break;default:throw Error(Pt(329))}}}return vo(e,Gr()),e.callbackNode===i?MT.bind(null,e):null}function bv(e,t){var i=Nf;return e.current.memoizedState.isDehydrated&&(Cu(e,t).flags|=256),e=Tm(e,t),e!==2&&(t=fo,fo=i,t!==null&&Ev(t)),e}function Ev(e){fo===null?fo=e:fo.push.apply(fo,e)}function Qk(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],f=c.getSnapshot;c=c.value;try{if(!Is(f(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function El(e,t){for(t&=~e1,t&=~gg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ts(t),a=1<<i;e[i]=-1,t&=~a}}function Fb(e){if(Wn&6)throw Error(Pt(327));th();var t=am(e,0);if(!(t&1))return vo(e,Gr()),null;var i=Tm(e,t);if(e.tag!==0&&i===2){var a=X0(e);a!==0&&(t=a,i=bv(e,a))}if(i===1)throw i=hd,Cu(e,0),El(e,t),vo(e,Gr()),i;if(i===6)throw Error(Pt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xu(e,fo,Ca),vo(e,Gr()),null}function n1(e,t){var i=Wn;Wn|=1;try{return e(t)}finally{Wn=i,Wn===0&&(hh=Gr()+500,fg&&Vl())}}function zu(e){Cl!==null&&Cl.tag===0&&!(Wn&6)&&th();var t=Wn;Wn|=1;var i=ts.transition,a=nr;try{if(ts.transition=null,nr=1,e)return e()}finally{nr=a,ts.transition=i,Wn=t,!(Wn&6)&&Vl()}}function r1(){Po=Gc.current,yr(Gc)}function Cu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Pk(i)),Qr!==null)for(i=Qr.return;i!==null;){var a=i;switch(j_(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&fm();break;case 3:uh(),yr(go),yr(Oi),W_();break;case 5:Z_(a);break;case 4:uh();break;case 13:yr(kr);break;case 19:yr(kr);break;case 10:U_(a.type._context);break;case 22:case 23:r1()}i=i.return}if(hi=e,Qr=e=Ol(e.current,null),xi=Po=t,ri=0,hd=null,e1=gg=ku=0,fo=Nf=null,Eu!==null){for(t=0;t<Eu.length;t++)if(i=Eu[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,f=i.pending;if(f!==null){var y=f.next;f.next=c,a.next=y}i.pending=a}Eu=null}return e}function kT(e,t){do{var i=Qr;try{if(N_(),Up.current=wm,xm){for(var a=Lr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}xm=!1}if(Mu=0,ci=ni=Lr=null,Df=!1,ld=0,Q_.current=null,i===null||i.return===null){ri=1,hd=t,Qr=null;break}e:{var f=e,y=i.return,l=i,b=t;if(t=xi,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,I=l,E=I.tag;if(!(I.mode&1)&&(E===0||E===11||E===15)){var z=I.alternate;z?(I.updateQueue=z.updateQueue,I.memoizedState=z.memoizedState,I.lanes=z.lanes):(I.updateQueue=null,I.memoizedState=null)}var O=Eb(y);if(O!==null){O.flags&=-257,Sb(O,y,l,f,t),O.mode&1&&bb(f,w,t),t=O,b=w;var Q=t.updateQueue;if(Q===null){var Y=new Set;Y.add(b),t.updateQueue=Y}else Q.add(b);break e}else{if(!(t&1)){bb(f,w,t),i1();break e}b=Error(Pt(426))}}else if(Tr&&l.mode&1){var pe=Eb(y);if(pe!==null){!(pe.flags&65536)&&(pe.flags|=256),Sb(pe,y,l,f,t),D_(ch(b,l));break e}}f=b=ch(b,l),ri!==4&&(ri=2),Nf===null?Nf=[f]:Nf.push(f),f=y;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var G=pT(f,b,t);mb(f,G);break e;case 1:l=b;var V=f.type,N=f.stateNode;if(!(f.flags&128)&&(typeof V.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ll===null||!Ll.has(N)))){f.flags|=65536,t&=-t,f.lanes|=t;var oe=mT(f,l,t);mb(f,oe);break e}}f=f.return}while(f!==null)}RT(i)}catch(W){t=W,Qr===i&&i!==null&&(Qr=i=i.return);continue}break}while(1)}function zT(){var e=bm.current;return bm.current=wm,e===null?wm:e}function i1(){(ri===0||ri===3||ri===2)&&(ri=4),hi===null||!(ku&268435455)&&!(gg&268435455)||El(hi,xi)}function Tm(e,t){var i=Wn;Wn|=2;var a=zT();(hi!==e||xi!==t)&&(Ca=null,Cu(e,t));do try{e3();break}catch(c){kT(e,c)}while(1);if(N_(),Wn=i,bm.current=a,Qr!==null)throw Error(Pt(261));return hi=null,xi=0,ri}function e3(){for(;Qr!==null;)LT(Qr)}function t3(){for(;Qr!==null&&!CM();)LT(Qr)}function LT(e){var t=FT(e.alternate,e,Po);e.memoizedProps=e.pendingProps,t===null?RT(e):Qr=t,Q_.current=null}function RT(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=Xk(i,t),i!==null){i.flags&=32767,Qr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ri=6,Qr=null;return}}else if(i=Hk(i,t,Po),i!==null){Qr=i;return}if(t=t.sibling,t!==null){Qr=t;return}Qr=t=e}while(t!==null);ri===0&&(ri=5)}function xu(e,t,i){var a=nr,c=ts.transition;try{ts.transition=null,nr=1,n3(e,t,i,a)}finally{ts.transition=c,nr=a}return null}function n3(e,t,i,a){do th();while(Cl!==null);if(Wn&6)throw Error(Pt(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Pt(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(FM(e,f),e===hi&&(Qr=hi=null,xi=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||wp||(wp=!0,jT(sm,function(){return th(),null})),f=(i.flags&15990)!==0,i.subtreeFlags&15990||f){f=ts.transition,ts.transition=null;var y=nr;nr=1;var l=Wn;Wn|=4,Q_.current=null,Kk(e,i),AT(i,e),bk(ev),lm=!!Q0,ev=Q0=null,e.current=i,Yk(i),IM(),Wn=l,nr=y,ts.transition=f}else e.current=i;if(wp&&(wp=!1,Cl=e,Sm=c),f=e.pendingLanes,f===0&&(Ll=null),MM(i.stateNode),vo(e,Gr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(Em)throw Em=!1,e=xv,xv=null,e;return Sm&1&&e.tag!==0&&th(),f=e.pendingLanes,f&1?e===wv?Uf++:(Uf=0,wv=e):Uf=0,Vl(),null}function th(){if(Cl!==null){var e=dS(Sm),t=ts.transition,i=nr;try{if(ts.transition=null,nr=16>e?16:e,Cl===null)var a=!1;else{if(e=Cl,Cl=null,Sm=0,Wn&6)throw Error(Pt(331));var c=Wn;for(Wn|=4,Qt=e.current;Qt!==null;){var f=Qt,y=f.child;if(Qt.flags&16){var l=f.deletions;if(l!==null){for(var b=0;b<l.length;b++){var w=l[b];for(Qt=w;Qt!==null;){var I=Qt;switch(I.tag){case 0:case 11:case 15:Bf(8,I,f)}var E=I.child;if(E!==null)E.return=I,Qt=E;else for(;Qt!==null;){I=Qt;var z=I.sibling,O=I.return;if(TT(I),I===w){Qt=null;break}if(z!==null){z.return=O,Qt=z;break}Qt=O}}}var Q=f.alternate;if(Q!==null){var Y=Q.child;if(Y!==null){Q.child=null;do{var pe=Y.sibling;Y.sibling=null,Y=pe}while(Y!==null)}}Qt=f}}if(f.subtreeFlags&2064&&y!==null)y.return=f,Qt=y;else e:for(;Qt!==null;){if(f=Qt,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Bf(9,f,f.return)}var G=f.sibling;if(G!==null){G.return=f.return,Qt=G;break e}Qt=f.return}}var V=e.current;for(Qt=V;Qt!==null;){y=Qt;var N=y.child;if(y.subtreeFlags&2064&&N!==null)N.return=y,Qt=N;else e:for(y=V;Qt!==null;){if(l=Qt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:mg(9,l)}}catch(W){Dr(l,l.return,W)}if(l===y){Qt=null;break e}var oe=l.sibling;if(oe!==null){oe.return=l.return,Qt=oe;break e}Qt=l.return}}if(Wn=c,Vl(),na&&typeof na.onPostCommitFiberRoot=="function")try{na.onPostCommitFiberRoot(ag,e)}catch{}a=!0}return a}finally{nr=i,ts.transition=t}}return!1}function jb(e,t,i){t=ch(i,t),t=pT(e,t,1),e=zl(e,t,1),t=Yi(),e!==null&&(_d(e,1,t),vo(e,t))}function Dr(e,t,i){if(e.tag===3)jb(e,e,i);else for(;t!==null;){if(t.tag===3){jb(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ll===null||!Ll.has(a))){e=ch(i,e),e=mT(t,e,1),t=zl(t,e,1),e=Yi(),t!==null&&(_d(t,1,e),vo(t,e));break}}t=t.return}}function r3(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=Yi(),e.pingedLanes|=e.suspendedLanes&i,hi===e&&(xi&i)===i&&(ri===4||ri===3&&(xi&130023424)===xi&&500>Gr()-t1?Cu(e,0):e1|=i),vo(e,t)}function OT(e,t){t===0&&(e.mode&1?(t=hp,hp<<=1,!(hp&130023424)&&(hp=4194304)):t=1);var i=Yi();e=Ra(e,t),e!==null&&(_d(e,t,i),vo(e,i))}function i3(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),OT(e,i)}function o3(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Pt(314))}a!==null&&a.delete(t),OT(e,i)}var FT;FT=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||go.current)mo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return mo=!1,Wk(e,t,i);mo=!!(e.flags&131072)}else mo=!1,Tr&&t.flags&1048576&&BS(t,mm,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Vp(e,t),e=t.pendingProps;var c=sh(t,Oi.current);eh(t,i),c=X_(null,t,a,e,c,i);var f=q_();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yo(a)?(f=!0,dm(t)):f=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,V_(t),c.updater=dg,t.stateNode=c,c._reactInternals=t,uv(t,a,e,i),t=fv(null,t,a,!0,f,i)):(t.tag=0,Tr&&f&&F_(t),Hi(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Vp(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=a3(a),e=ys(a,e),c){case 0:t=hv(null,t,a,e,i);break e;case 1:t=Ib(null,t,a,e,i);break e;case 11:t=Tb(null,t,a,e,i);break e;case 14:t=Cb(null,t,a,ys(a.type,e),i);break e}throw Error(Pt(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ys(a,c),hv(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ys(a,c),Ib(e,t,a,c,i);case 3:e:{if(_T(t),e===null)throw Error(Pt(387));a=t.pendingProps,f=t.memoizedState,c=f.element,VS(e,t),vm(t,a,null,i);var y=t.memoizedState;if(a=y.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){c=ch(Error(Pt(423)),t),t=Ab(e,t,a,i,c);break e}else if(a!==c){c=ch(Error(Pt(424)),t),t=Ab(e,t,a,i,c);break e}else for(zo=kl(t.stateNode.containerInfo.firstChild),Lo=t,Tr=!0,_s=null,i=HS(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ah(),a===c){t=Oa(e,t,i);break e}Hi(e,t,a,i)}t=t.child}return t;case 5:return XS(t),e===null&&sv(t),a=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,y=c.children,tv(a,c)?y=null:f!==null&&tv(a,f)&&(t.flags|=32),vT(e,t),Hi(e,t,y,i),t.child;case 6:return e===null&&sv(t),null;case 13:return xT(e,t,i);case 4:return G_(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=lh(t,null,a,i):Hi(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ys(a,c),Tb(e,t,a,c,i);case 7:return Hi(e,t,t.pendingProps,i),t.child;case 8:return Hi(e,t,t.pendingProps.children,i),t.child;case 12:return Hi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,f=t.memoizedProps,y=c.value,dr(gm,a._currentValue),a._currentValue=y,f!==null)if(Is(f.value,y)){if(f.children===c.children&&!go.current){t=Oa(e,t,i);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var l=f.dependencies;if(l!==null){y=f.child;for(var b=l.firstContext;b!==null;){if(b.context===a){if(f.tag===1){b=ka(-1,i&-i),b.tag=2;var w=f.updateQueue;if(w!==null){w=w.shared;var I=w.pending;I===null?b.next=b:(b.next=I.next,I.next=b),w.pending=b}}f.lanes|=i,b=f.alternate,b!==null&&(b.lanes|=i),av(f.return,i,t),l.lanes|=i;break}b=b.next}}else if(f.tag===10)y=f.type===t.type?null:f.child;else if(f.tag===18){if(y=f.return,y===null)throw Error(Pt(341));y.lanes|=i,l=y.alternate,l!==null&&(l.lanes|=i),av(y,i,t),y=f.sibling}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}Hi(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,eh(t,i),c=ns(c),a=a(c),t.flags|=1,Hi(e,t,a,i),t.child;case 14:return a=t.type,c=ys(a,t.pendingProps),c=ys(a.type,c),Cb(e,t,a,c,i);case 15:return gT(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ys(a,c),Vp(e,t),t.tag=1,yo(a)?(e=!0,dm(t)):e=!1,eh(t,i),ZS(t,a,c),uv(t,a,c,i),fv(null,t,a,!0,e,i);case 19:return wT(e,t,i);case 22:return yT(e,t,i)}throw Error(Pt(156,t.tag))};function jT(e,t){return uS(e,t)}function s3(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qo(e,t,i,a){return new s3(e,t,i,a)}function o1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function a3(e){if(typeof e=="function")return o1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===S_)return 11;if(e===T_)return 14}return 2}function Ol(e,t){var i=e.alternate;return i===null?(i=Qo(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Wp(e,t,i,a,c,f){var y=2;if(a=e,typeof e=="function")o1(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Rc:return Iu(i.children,c,f,t);case E_:y=8,c|=8;break;case L0:return e=Qo(12,i,t,c|2),e.elementType=L0,e.lanes=f,e;case R0:return e=Qo(13,i,t,c),e.elementType=R0,e.lanes=f,e;case O0:return e=Qo(19,i,t,c),e.elementType=O0,e.lanes=f,e;case WE:return yg(i,c,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case GE:y=10;break e;case ZE:y=9;break e;case S_:y=11;break e;case T_:y=14;break e;case vl:y=16,a=null;break e}throw Error(Pt(130,e==null?e:typeof e,""))}return t=Qo(y,i,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function Iu(e,t,i,a){return e=Qo(7,e,a,t),e.lanes=i,e}function yg(e,t,i,a){return e=Qo(22,e,a,t),e.elementType=WE,e.lanes=i,e.stateNode={isHidden:!1},e}function Yy(e,t,i){return e=Qo(6,e,null,t),e.lanes=i,e}function Jy(e,t,i){return t=Qo(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function l3(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zy(0),this.expirationTimes=zy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zy(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function s1(e,t,i,a,c,f,y,l,b){return e=new l3(e,t,i,l,b),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Qo(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},V_(f),e}function u3(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function DT(e){if(!e)return jl;e=e._reactInternals;e:{if(Du(e)!==e||e.tag!==1)throw Error(Pt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pt(171))}if(e.tag===1){var i=e.type;if(yo(i))return jS(e,i,t)}return t}function BT(e,t,i,a,c,f,y,l,b){return e=s1(i,a,!0,e,c,f,y,l,b),e.context=DT(null),i=e.current,a=Yi(),c=Rl(i),f=ka(a,c),f.callback=t??null,zl(i,f,c),e.current.lanes=c,_d(e,c,a),vo(e,a),e}function vg(e,t,i,a){var c=t.current,f=Yi(),y=Rl(c);return i=DT(i),t.context===null?t.context=i:t.pendingContext=i,t=ka(f,y),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=zl(c,t,y),e!==null&&(Cs(e,c,y,f),Np(e,c,y)),y}function Cm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Db(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function a1(e,t){Db(e,t),(e=e.alternate)&&Db(e,t)}function c3(){return null}var NT=typeof reportError=="function"?reportError:function(e){console.error(e)};function l1(e){this._internalRoot=e}_g.prototype.render=l1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pt(409));vg(e,t,null,null)};_g.prototype.unmount=l1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zu(function(){vg(null,e,null,null)}),t[La]=null}};function _g(e){this._internalRoot=e}_g.prototype.unstable_scheduleHydration=function(e){if(e){var t=gS();e={blockedOn:null,target:e,priority:t};for(var i=0;i<bl.length&&t!==0&&t<bl[i].priority;i++);bl.splice(i,0,e),i===0&&vS(e)}};function u1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bb(){}function h3(e,t,i,a,c){if(c){if(typeof a=="function"){var f=a;a=function(){var w=Cm(y);f.call(w)}}var y=BT(t,a,e,0,null,!1,!1,"",Bb);return e._reactRootContainer=y,e[La]=y.current,rd(e.nodeType===8?e.parentNode:e),zu(),y}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var l=a;a=function(){var w=Cm(b);l.call(w)}}var b=s1(e,0,!1,null,null,!1,!1,"",Bb);return e._reactRootContainer=b,e[La]=b.current,rd(e.nodeType===8?e.parentNode:e),zu(function(){vg(t,b,i,a)}),b}function wg(e,t,i,a,c){var f=i._reactRootContainer;if(f){var y=f;if(typeof c=="function"){var l=c;c=function(){var b=Cm(y);l.call(b)}}vg(t,y,e,c)}else y=h3(i,t,e,c,a);return Cm(y)}pS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Ef(t.pendingLanes);i!==0&&(A_(t,i|1),vo(t,Gr()),!(Wn&6)&&(hh=Gr()+500,Vl()))}break;case 13:zu(function(){var a=Ra(e,1);if(a!==null){var c=Yi();Cs(a,e,1,c)}}),a1(e,1)}};P_=function(e){if(e.tag===13){var t=Ra(e,134217728);if(t!==null){var i=Yi();Cs(t,e,134217728,i)}a1(e,134217728)}};mS=function(e){if(e.tag===13){var t=Rl(e),i=Ra(e,t);if(i!==null){var a=Yi();Cs(i,e,t,a)}a1(e,t)}};gS=function(){return nr};yS=function(e,t){var i=nr;try{return nr=e,t()}finally{nr=i}};Z0=function(e,t,i){switch(t){case"input":if(D0(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=hg(a);if(!c)throw Error(Pt(90));XE(a),D0(a,c)}}}break;case"textarea":KE(e,i);break;case"select":t=i.value,t!=null&&Kc(e,!!i.multiple,t,!1)}};rS=n1;iS=zu;var f3={usingClientEntryPoint:!1,Events:[wd,Dc,hg,tS,nS,n1]},_f={findFiberByHostInstance:bu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},d3={bundleType:_f.bundleType,version:_f.version,rendererPackageName:_f.rendererPackageName,rendererConfig:_f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Na.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=aS(e),e===null?null:e.stateNode},findFiberByHostInstance:_f.findFiberByHostInstance||c3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bp.isDisabled&&bp.supportsFiber)try{ag=bp.inject(d3),na=bp}catch{}}Oo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f3;Oo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u1(t))throw Error(Pt(200));return u3(e,t,null,i)};Oo.createRoot=function(e,t){if(!u1(e))throw Error(Pt(299));var i=!1,a="",c=NT;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=s1(e,1,!1,null,null,i,!1,a,c),e[La]=t.current,rd(e.nodeType===8?e.parentNode:e),new l1(t)};Oo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pt(188)):(e=Object.keys(e).join(","),Error(Pt(268,e)));return e=aS(t),e=e===null?null:e.stateNode,e};Oo.flushSync=function(e){return zu(e)};Oo.hydrate=function(e,t,i){if(!xg(t))throw Error(Pt(200));return wg(null,e,t,!0,i)};Oo.hydrateRoot=function(e,t,i){if(!u1(e))throw Error(Pt(405));var a=i!=null&&i.hydratedSources||null,c=!1,f="",y=NT;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),t=BT(t,null,e,1,i??null,c,!1,f,y),e[La]=t.current,rd(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new _g(t)};Oo.render=function(e,t,i){if(!xg(t))throw Error(Pt(200));return wg(null,e,t,!1,i)};Oo.unmountComponentAtNode=function(e){if(!xg(e))throw Error(Pt(40));return e._reactRootContainer?(zu(function(){wg(null,null,e,!1,function(){e._reactRootContainer=null,e[La]=null})}),!0):!1};Oo.unstable_batchedUpdates=n1;Oo.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!xg(i))throw Error(Pt(200));if(e==null||e._reactInternals===void 0)throw Error(Pt(38));return wg(e,t,i,!1,a)};Oo.version="18.2.0-next-9e3b772b8-20220608";function UT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UT)}catch(e){console.error(e)}}UT(),BE.exports=Oo;var c1=BE.exports;const p3=yd(c1);var $T={exports:{}};(function(e,t){(function(i,a){e.exports=a()})(wl,function(){var i,a,c;function f(l,b){if(!i)i=b;else if(!a)a=b;else{var w="var sharedChunk = {}; ("+i+")(sharedChunk); ("+a+")(sharedChunk);",I={};i(I),c=b(I),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}f(["exports"],function(l){function b(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var w=I;function I(o,n){this.x=o,this.y=n}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),p=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(o){return o instanceof I?o:Array.isArray(o)?new I(o[0],o[1]):o};var E=b(w),z=O;function O(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}O.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var p=this.sampleCurveX(s)-o;if(Math.abs(p)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=p/_}var x=0,T=1;for(s=o,h=0;h<20&&(p=this.sampleCurveX(s),!(Math.abs(p-o)<n));h++)o>p?x=s:T=s,s=.5*(T-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var Q=b(z);function Y(o,n,s,h){const p=new Q(o,n,s,h);return function(_){return p.solve(_)}}const pe=Y(.25,.1,.25,1);function G(o,n,s){return Math.min(s,Math.max(n,o))}function V(o,n,s){const h=s-n,p=((o-n)%h+h)%h+n;return p===n?s:p}function N(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let oe=1;function W(o,n,s){const h={};for(const p in o)h[p]=n.call(s||this,o[p],p,o);return h}function B(o,n,s){const h={};for(const p in o)n.call(s||this,o[p],p,o)&&(h[p]=o[p]);return h}function S(o){return Array.isArray(o)?o.map(S):typeof o=="object"&&o?W(o,S):o}const M={};function Z(o){M[o]||(typeof console<"u"&&console.warn(o),M[o]=!0)}function X(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function J(o){let n=0;for(let s,h,p=0,_=o.length,x=_-1;p<_;x=p++)s=o[p],h=o[x],n+=(h.x-s.x)*(s.y+h.y);return n}function ye(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let xe=null;function be(o){if(xe==null){const n=o.navigator?o.navigator.userAgent:null;xe=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return xe}function te(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let re,ne;const ge={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){return this.getImageCanvasContext(o).getImageData(-n,-n,o.width+2*n,o.height+2*n)},getImageCanvasContext(o){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=o.width,n.height=o.height,s.drawImage(o,0,0,o.width,o.height),s},resolveURL:o=>(re||(re=document.createElement("a")),re.href=o,re.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ne==null&&(ne=matchMedia("(prefers-reduced-motion: reduce)")),ne.matches)}},Ee={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class we extends Error{constructor(n,s,h,p){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=p}}const Ne=ye()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,ze=o=>Ee.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Pe(o,n){const s=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:Ne(),signal:s.signal});let p=!1,_=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),_||fetch(h).then(x=>x.ok?(T=>{(o.type==="arrayBuffer"||o.type==="image"?T.arrayBuffer():o.type==="json"?T.json():T.text()).then(P=>{_||(p=!0,n(null,P,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(P=>{_||n(new Error(P.message))})})(x):x.blob().then(T=>n(new we(x.status,x.statusText,o.url,T)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{_=!0,p||s.abort()}}}const He=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(ye()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!ye())return(ze(o.url)||Pe)(o,n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(Ne())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Pe(o,n);if(ye()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var s;return function(h,p){const _=new XMLHttpRequest;_.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(_.responseType="arraybuffer");for(const x in h.headers)_.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(_.responseType="text",_.setRequestHeader("Accept","application/json")),_.withCredentials=h.credentials==="include",_.onerror=()=>{p(new Error(_.statusText))},_.onload=()=>{if((_.status>=200&&_.status<300||_.status===0)&&_.response!==null){let x=_.response;if(h.type==="json")try{x=JSON.parse(_.response)}catch(T){return p(T)}p(null,x,_.getResponseHeader("Cache-Control"),_.getResponseHeader("Expires"))}else{const x=new Blob([_.response],{type:_.getResponseHeader("Content-Type")});p(new we(_.status,_.statusText,h.url,x))}},_.send(h.body),{cancel:()=>_.abort()}}(o,n)},Ge=function(o,n){return He(N(o,{type:"arrayBuffer"}),n)};function it(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function ut(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function vt(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class At{constructor(n,s={}){N(this,s),this.type=n}}class ht extends At{constructor(n,s={}){super("error",N({error:n},s))}}class bt{on(n,s){return this._listeners=this._listeners||{},ut(n,s,this._listeners),this}off(n,s){return vt(n,s,this._listeners),vt(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},ut(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new At(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const T of p)T.call(this,n);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const T of _)vt(h,T,this._oneTimeListeners),T.call(this,n);const x=this._eventedParent;x&&(N(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof ht&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Ye={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Vt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function un(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return Vt.forEach(h=>{h in n&&(s[h]=n[h])}),s}function Xt(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!Xt(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!Xt(o[s],n[s]))return!1;return!0}return o===n}const Gt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function an(o,n,s){s.push({command:Gt.addSource,args:[o,n[o]]})}function vn(o,n,s){n.push({command:Gt.removeSource,args:[o]}),s[o]=!0}function Se(o,n,s,h){vn(o,s,h),an(o,n,s)}function F(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!Xt(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!Xt(o[s][h],n[s][h]))return!1;return!0}function R(o,n,s,h,p,_){let x;for(x in n=n||{},o=o||{})Object.prototype.hasOwnProperty.call(o,x)&&(Xt(o[x],n[x])||s.push({command:_,args:[h,x,n[x],p]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(Xt(o[x],n[x])||s.push({command:_,args:[h,x,n[x],p]}))}function _e(o){return o.id}function We(o,n){return o[n.id]=n,o}class De{constructor(n,s,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function lt(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class ae extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class L{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,p]of s)this.bindings[h]=p}concat(n){return new L(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const D={kind:"null"},ue={kind:"number"},Oe={kind:"string"},qe={kind:"boolean"},st={kind:"color"},en={kind:"object"},Mt={kind:"value"},_n={kind:"collator"},An={kind:"formatted"},xn={kind:"padding"},_r={kind:"resolvedImage"};function hr(o,n){return{kind:"array",itemType:o,N:n}}function On(o){if(o.kind==="array"){const n=On(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const ro=[D,ue,Oe,qe,st,An,en,hr(Mt),xn,_r];function Qn(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Qn(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of ro)if(!Qn(s,n))return null}}return`Expected ${On(o)} but found ${On(n)} instead.`}function Fi(o,n){return n.some(s=>s.kind===o.kind)}function Ae(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function ie(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const se=.96422,de=.82521,Te=4/29,Re=6/29,Xe=3*Re*Re,Ve=Re*Re*Re,$e=Math.PI/180,Je=180/Math.PI;function pt(o){return(o%=360)<0&&(o+=360),o}function _t([o,n,s,h]){let p,_;const x=tn((.2225045*(o=yt(o))+.7168786*(n=yt(n))+.0606169*(s=yt(s)))/1);o===n&&n===s?p=_=x:(p=tn((.4360747*o+.3850649*n+.1430804*s)/se),_=tn((.0139322*o+.0971045*n+.7141733*s)/de));const T=116*x-16;return[T<0?0:T,500*(p-x),200*(x-_),h]}function yt(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function tn(o){return o>Ve?Math.pow(o,1/3):o/Xe+Te}function cn([o,n,s,h]){let p=(o+16)/116,_=isNaN(n)?p:p+n/500,x=isNaN(s)?p:p-s/200;return p=1*qt(p),_=se*qt(_),x=de*qt(x),[Nt(3.1338561*_-1.6168667*p-.4906146*x),Nt(-.9787684*_+1.9161415*p+.033454*x),Nt(.0719453*_-.2289914*p+1.4052427*x),h]}function Nt(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function qt(o){return o>Re?o*o*o:Xe*(o-Te)}function ln(o){return parseInt(o.padEnd(2,o),16)/255}function En(o,n){return yn(n?o/100:o,0,1)}function yn(o,n,s){return Math.min(Math.max(n,o),s)}function Vn(o){return!o.some(Number.isNaN)}const qn={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class dn{constructor(n,s,h,p=1,_=!0){this.r=n,this.g=s,this.b=h,this.a=p,_||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[n,s,h,p]))}static parse(n){if(n instanceof dn)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase())==="transparent")return[0,0,0,0];const p=qn[h];if(p){const[x,T,P]=p;return[x/255,T/255,P/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let T=1;return[ln(h.slice(T,T+=x)),ln(h.slice(T,T+=x)),ln(h.slice(T,T+=x)),ln(h.slice(T,T+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[T,P,$,q,ee,ce,fe,ve,ke,je,Ue,Qe]=x,Ze=[q||" ",fe||" ",je].join("");if(Ze==="  "||Ze==="  /"||Ze===",,"||Ze===",,,"){const tt=[$,ce,ke].join(""),ot=tt==="%%%"?100:tt===""?255:0;if(ot){const mt=[yn(+P/ot,0,1),yn(+ee/ot,0,1),yn(+ve/ot,0,1),Ue?En(+Ue,Qe):1];if(Vn(mt))return mt}}return}}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,T,P,$,q,ee,ce,fe,ve]=_,ke=[P||" ",q||" ",ce].join("");if(ke==="  "||ke==="  /"||ke===",,"||ke===",,,"){const je=[+T,yn(+$,0,100),yn(+ee,0,100),fe?En(+fe,ve):1];if(Vn(je))return function([Ue,Qe,Ze,tt]){function ot(mt){const Dt=(mt+Ue/30)%12,Ut=Qe*Math.min(Ze,1-Ze);return Ze-Ut*Math.max(-1,Math.min(Dt-3,9-Dt,1))}return Ue=pt(Ue),Qe/=100,Ze/=100,[ot(0),ot(8),ot(4),tt]}(je)}}}(n);return s?new dn(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:p}=this,_=p||1/0;return this.overwriteGetter("rgb",[n/_,s/_,h/_,p])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,p,_]=_t(n),x=Math.sqrt(h*h+p*p);return[Math.round(1e4*x)?pt(Math.atan2(p,h)*Je):NaN,x,s,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",_t(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,p]=this.rgb;return`rgba(${[n,s,h].map(_=>Math.round(255*_)).join(",")},${p})`}}dn.black=new dn(0,0,0,1),dn.white=new dn(1,1,1,1),dn.transparent=new dn(0,0,0,0),dn.red=new dn(1,0,0,1);class er{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class sr{constructor(n,s,h,p,_){this.text=n,this.image=s,this.scale=h,this.fontStack=p,this.textColor=_}}class pr{constructor(n){this.sections=n}static fromString(n){return new pr([new sr(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof pr?n:pr.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class mr{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof mr)return n;if(typeof n=="number")return new mr([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new mr(n)}}toString(){return JSON.stringify(this.values)}}class di{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new di({name:n,available:!1}):null}}function Pn(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ii(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof dn||o instanceof er||o instanceof pr||o instanceof mr||o instanceof di)return!0;if(Array.isArray(o)){for(const n of o)if(!ii(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!ii(o[n]))return!1;return!0}return!1}function xr(o){if(o===null)return D;if(typeof o=="string")return Oe;if(typeof o=="boolean")return qe;if(typeof o=="number")return ue;if(o instanceof dn)return st;if(o instanceof er)return _n;if(o instanceof pr)return An;if(o instanceof mr)return xn;if(o instanceof di)return _r;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const p=xr(h);if(s){if(s===p)continue;s=Mt;break}s=p}return hr(s||Mt,n)}return en}function aa(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof dn||o instanceof pr||o instanceof mr||o instanceof di?o.toString():JSON.stringify(o)}class is{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!ii(n[1]))return s.error("invalid value");const h=n[1];let p=xr(h);const _=s.expectedType;return p.kind!=="array"||p.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(p=_),new is(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Cr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const os={string:Oe,number:ue,boolean:qe,object:en};class Ir{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,p=1;const _=n[0];if(_==="array"){let T,P;if(n.length>2){const $=n[1];if(typeof $!="string"||!($ in os)||$==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);T=os[$],p++}else T=Mt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);P=n[2],p++}h=hr(T,P)}else{if(!os[_])throw new Error(`Types doesn't contain name = ${_}`);h=os[_]}const x=[];for(;p<n.length;p++){const T=s.parse(n[p],p,Mt);if(!T)return null;x.push(T)}return new Ir(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!Qn(this.type,xr(h)))return h;if(s===this.args.length-1)throw new Cr(`Expected value to be of type ${On(this.type)}, but found ${On(xr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const $u={"to-boolean":qe,"to-color":st,"to-number":ue,"to-string":Oe};class Bo{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!$u[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const p=$u[h],_=[];for(let x=1;x<n.length;x++){const T=s.parse(n[x],x,Mt);if(!T)return null;_.push(T)}return new Bo(p,_)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let s,h;for(const p of this.args){if(s=p.evaluate(n),h=null,s instanceof dn)return s;if(typeof s=="string"){const _=n.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Pn(s[0],s[1],s[2],s[3]),!h))return new dn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Cr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}if(this.type.kind==="padding"){let s;for(const h of this.args){s=h.evaluate(n);const p=mr.parse(s);if(p)return p}throw new Cr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}if(this.type.kind==="number"){let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new Cr(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?pr.fromString(aa(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?di.fromString(aa(this.args[0].evaluate(n))):aa(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Ps=["Unknown","Point","LineString","Polygon"];class $a{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ps[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=dn.parse(n)),s}}class Ms{constructor(n,s,h=[],p,_=new L,x=[]){this.registry=n,this.path=h,this.key=h.map(T=>`[${T}]`).join(""),this.scope=_,this.errors=x,this.expectedType=p,this._isConstant=s}parse(n,s,h,p,_={}){return s?this.concat(s,h,p)._parse(n,_):this._parse(n,_)}_parse(n,s){function h(p,_,x){return x==="assert"?new Ir(_,[p]):x==="coerce"?new Bo(_,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[p];if(_){let x=_.parse(n,this);if(!x)return null;if(this.expectedType){const T=this.expectedType,P=x.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||P.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(T.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array"){if(this.checkSubtype(T,P))return null}else x=h(x,T,s.typeAnnotation||"coerce");else x=h(x,T,s.typeAnnotation||"coerce");else x=h(x,T,s.typeAnnotation||"assert")}if(!(x instanceof is)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const T=new $a;try{x=new is(x.type,x.evaluate(T))}catch(P){return this.error(P.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const p=typeof n=="number"?this.path.concat(n):this.path,_=h?this.scope.concat(h):this.scope;return new Ms(this.registry,this._isConstant,p,s||null,_,this.errors)}error(n,...s){const h=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new ae(h,n))}checkSubtype(n,s){const h=Qn(n,s);return h&&this.error(h),h}}class Zr{constructor(n,s,h){this.type=_n,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const p=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,qe);if(!p)return null;const _=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,qe);if(!_)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Oe),!x)?null:new Zr(p,_,x)}evaluate(n){return new er(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const kn=8192;function Gl(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function ks(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Eh(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(s*p*kn),Math.round(h*p*kn)]}function Vu(o,n,s){const h=o[0]-n[0],p=o[1]-n[1],_=o[0]-s[0],x=o[1]-s[1];return h*x-_*p==0&&h*_<=0&&p*x<=0}function ss(o,n){let s=!1;for(let x=0,T=n.length;x<T;x++){const P=n[x];for(let $=0,q=P.length;$<q-1;$++){if(Vu(o,P[$],P[$+1]))return!1;(p=P[$])[1]>(h=o)[1]!=(_=P[$+1])[1]>h[1]&&h[0]<(_[0]-p[0])*(h[1]-p[1])/(_[1]-p[1])+p[0]&&(s=!s)}}var h,p,_;return s}function Sh(o,n){for(let s=0;s<n.length;s++)if(ss(o,n[s]))return!0;return!1}function Zl(o,n,s,h){const p=h[0]-s[0],_=h[1]-s[1],x=(o[0]-s[0])*_-p*(o[1]-s[1]),T=(n[0]-s[0])*_-p*(n[1]-s[1]);return x>0&&T<0||x<0&&T>0}function bi(o,n,s){for(const $ of s)for(let q=0;q<$.length-1;++q)if((T=[(x=$[q+1])[0]-(_=$[q])[0],x[1]-_[1]])[0]*(P=[(p=n)[0]-(h=o)[0],p[1]-h[1]])[1]-T[1]*P[0]!=0&&Zl(h,p,_,x)&&Zl(_,x,h,p))return!0;var h,p,_,x,T,P;return!1}function Gu(o,n){for(let s=0;s<o.length;++s)if(!ss(o[s],n))return!1;for(let s=0;s<o.length-1;++s)if(bi(o[s],o[s+1],n))return!1;return!0}function Th(o,n){for(let s=0;s<n.length;s++)if(Gu(o,n[s]))return!0;return!1}function Wl(o,n,s){const h=[];for(let p=0;p<o.length;p++){const _=[];for(let x=0;x<o[p].length;x++){const T=Eh(o[p][x],s);Gl(n,T),_.push(T)}h.push(_)}return h}function Zu(o,n,s){const h=[];for(let p=0;p<o.length;p++){const _=Wl(o[p],n,s);h.push(_)}return h}function Hl(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const p=.5*h;let _=o[0]-s[0]>p?-h:s[0]-o[0]>p?h:0;_===0&&(_=o[0]-s[2]>p?-h:s[2]-o[0]>p?h:0),o[0]+=_}Gl(n,o)}function Va(o,n,s,h){const p=Math.pow(2,h.z)*kn,_=[h.x*kn,h.y*kn],x=[];for(const T of o)for(const P of T){const $=[P.x+_[0],P.y+_[1]];Hl($,n,s,p),x.push($)}return x}function Ga(o,n,s,h){const p=Math.pow(2,h.z)*kn,_=[h.x*kn,h.y*kn],x=[];for(const P of o){const $=[];for(const q of P){const ee=[q.x+_[0],q.y+_[1]];Gl(n,ee),$.push(ee)}x.push($)}if(n[2]-n[0]<=p/2){(T=n)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const P of x)for(const $ of P)Hl($,n,s,p)}var T;return x}class No{constructor(n,s){this.type=qe,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(ii(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const _=h.features[p].geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new No(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new No(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new No(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const T=Wl(h.coordinates,_,x),P=Va(s.geometry(),p,_,x);if(!ks(p,_))return!1;for(const $ of P)if(!ss($,T))return!1}if(h.type==="MultiPolygon"){const T=Zu(h.coordinates,_,x),P=Va(s.geometry(),p,_,x);if(!ks(p,_))return!1;for(const $ of P)if(!Sh($,T))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const T=Wl(h.coordinates,_,x),P=Ga(s.geometry(),p,_,x);if(!ks(p,_))return!1;for(const $ of P)if(!Gu($,T))return!1}if(h.type==="MultiPolygon"){const T=Zu(h.coordinates,_,x),P=Ga(s.geometry(),p,_,x);if(!ks(p,_))return!1;for(const $ of P)if(!Th($,T))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class _o{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new _o(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Ei{constructor(n,s,h,p){this.name=n,this.type=s,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],p=Ei.definitions[h];if(!p)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,T=x.filter(([$])=>!Array.isArray($)||$.length===n.length-1);let P=null;for(const[$,q]of T){P=new Ms(s.registry,xo,s.path,null,s.scope);const ee=[];let ce=!1;for(let fe=1;fe<n.length;fe++){const ve=n[fe],ke=Array.isArray($)?$[fe-1]:$.type,je=P.parse(ve,1+ee.length,ke);if(!je){ce=!0;break}ee.push(je)}if(!ce)if(Array.isArray($)&&$.length!==ee.length)P.error(`Expected ${$.length} arguments, but found ${ee.length} instead.`);else{for(let fe=0;fe<ee.length;fe++){const ve=Array.isArray($)?$[fe]:$.type,ke=ee[fe];P.concat(fe+1).checkSubtype(ve,ke.type)}if(P.errors.length===0)return new Ei(h,_,q,ee)}}if(T.length===1)s.errors.push(...P.errors);else{const $=(T.length?T:x).map(([ee])=>{return ce=ee,Array.isArray(ce)?`(${ce.map(On).join(", ")})`:`(${On(ce.type)}...)`;var ce}).join(" | "),q=[];for(let ee=1;ee<n.length;ee++){const ce=s.parse(n[ee],1+q.length);if(!ce)return null;q.push(On(ce.type))}s.error(`Expected arguments of type ${$}, but found (${q.join(", ")}) instead.`)}return null}static register(n,s){Ei.definitions=s;for(const h in s)n[h]=Ei}}function xo(o){if(o instanceof _o)return xo(o.boundExpression);if(o instanceof Ei&&o.name==="error"||o instanceof Zr||o instanceof No)return!1;const n=o instanceof Bo||o instanceof Ir;let s=!0;return o.eachChild(h=>{s=n?s&&xo(h):s&&h instanceof is}),!!s&&Za(o)&&la(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Za(o){if(o instanceof Ei&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof No)return!1;let n=!0;return o.eachChild(s=>{n&&!Za(s)&&(n=!1)}),n}function zs(o){if(o instanceof Ei&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!zs(s)&&(n=!1)}),n}function la(o,n){if(o instanceof Ei&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!la(h,n)&&(s=!1)}),s}function Wa(o,n){const s=o.length-1;let h,p,_=0,x=s,T=0;for(;_<=x;)if(T=Math.floor((_+x)/2),h=o[T],p=o[T+1],h<=n){if(T===s||n<p)return T;_=T+1}else{if(!(h>n))throw new Cr("Input is not a number.");x=T-1}return 0}class Ls{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[p,_]of h)this.labels.push(p),this.outputs.push(_)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,ue);if(!h)return null;const p=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let x=1;x<n.length;x+=2){const T=x===1?-1/0:n[x],P=n[x+1],$=x,q=x+1;if(typeof T!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(p.length&&p[p.length-1][0]>=T)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$);const ee=s.parse(P,q,_);if(!ee)return null;_=_||ee.type,p.push([T,ee])}return new Ls(_,h,p)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const _=s.length;return p>=s[_-1]?h[_-1].evaluate(n):h[Wa(s,p)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Rs(o,n,s){return o+s*(n-o)}function ua(o,n,s){return o.map((h,p)=>Rs(h,n[p],s))}const pi={number:Rs,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[p,_,x,T]=ua(o.rgb,n.rgb,s);return new dn(p,_,x,T,!1)}case"hcl":{const[p,_,x,T]=o.hcl,[P,$,q,ee]=n.hcl;let ce,fe;if(isNaN(p)||isNaN(P))isNaN(p)?isNaN(P)?ce=NaN:(ce=P,x!==1&&x!==0||(fe=$)):(ce=p,q!==1&&q!==0||(fe=_));else{let Qe=P-p;P>p&&Qe>180?Qe-=360:P<p&&p-P>180&&(Qe+=360),ce=p+s*Qe}const[ve,ke,je,Ue]=function([Qe,Ze,tt,ot]){return Qe=isNaN(Qe)?0:Qe*$e,cn([tt,Math.cos(Qe)*Ze,Math.sin(Qe)*Ze,ot])}([ce,fe??Rs(_,$,s),Rs(x,q,s),Rs(T,ee,s)]);return new dn(ve,ke,je,Ue,!1)}case"lab":{const[p,_,x,T]=cn(ua(o.lab,n.lab,s));return new dn(p,_,x,T,!1)}}},array:ua,padding:function(o,n,s){return new mr(ua(o.values,n.values,s))}};class ei{constructor(n,s,h,p,_){this.type=n,this.operator=s,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,T]of _)this.labels.push(x),this.outputs.push(T)}static interpolationFactor(n,s,h,p){let _=0;if(n.name==="exponential")_=Xl(s,n.base,h,p);else if(n.name==="linear")_=Xl(s,1,h,p);else if(n.name==="cubic-bezier"){const x=n.controlPoints;_=new Q(x[0],x[1],x[2],x[3]).solve(Xl(s,1,h,p))}return _}static parse(n,s){let[h,p,_,...x]=n;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const $=p[1];if(typeof $!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:$}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const $=p.slice(1);if($.length!==4||$.some(q=>typeof q!="number"||q<0||q>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:$}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,ue),!_)return null;const T=[];let P=null;h==="interpolate-hcl"||h==="interpolate-lab"?P=st:s.expectedType&&s.expectedType.kind!=="value"&&(P=s.expectedType);for(let $=0;$<x.length;$+=2){const q=x[$],ee=x[$+1],ce=$+3,fe=$+4;if(typeof q!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ce);if(T.length&&T[T.length-1][0]>=q)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ce);const ve=s.parse(ee,fe,P);if(!ve)return null;P=P||ve.type,T.push([q,ve])}return ie(P,ue)||ie(P,st)||ie(P,xn)||ie(P,hr(ue))?new ei(P,h,p,_,T):s.error(`Type ${On(P)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const _=s.length;if(p>=s[_-1])return h[_-1].evaluate(n);const x=Wa(s,p),T=ei.interpolationFactor(this.interpolation,p,s[x],s[x+1]),P=h[x].evaluate(n),$=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return pi[this.type.kind](P,$,T);case"interpolate-hcl":return pi.color(P,$,T,"hcl");case"interpolate-lab":return pi.color(P,$,T,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Xl(o,n,s,h){const p=h-s,_=o-s;return p===0?0:n===1?_/p:(Math.pow(n,_)-1)/(Math.pow(n,p)-1)}class Ha{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const p=s.expectedType;p&&p.kind!=="value"&&(h=p);const _=[];for(const T of n.slice(1)){const P=s.parse(T,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!P)return null;h=h||P.type,_.push(P)}if(!h)throw new Error("No output type");const x=p&&_.some(T=>Qn(p,T.type));return new Ha(x?Mt:h,_)}evaluate(n){let s,h=null,p=0;for(const _ of this.args)if(p++,h=_.evaluate(n),h&&h instanceof di&&!h.available&&(s||(s=h.name),h=null,p===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Xa{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let _=1;_<n.length-1;_+=2){const x=n[_];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);const T=s.parse(n[_+1],_+1);if(!T)return null;h.push([x,T])}const p=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return p?new Xa(h,p):null}outputDefined(){return this.result.outputDefined()}}class ql{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,ue),p=s.parse(n[2],2,hr(s.expectedType||Mt));return h&&p?new ql(p.type.itemType,h,p):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new Cr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new Cr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new Cr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class qa{constructor(n,s){this.type=qe,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Mt),p=s.parse(n[2],2,Mt);return h&&p?Fi(h.type,[qe,Oe,ue,D,Mt])?new qa(h,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${On(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Ae(s,["boolean","string","number","null"]))throw new Cr(`Expected first argument to be of type boolean, string, number or null, but found ${On(xr(s))} instead.`);if(!Ae(h,["string","array"]))throw new Cr(`Expected second argument to be of type array or string, but found ${On(xr(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Os{constructor(n,s,h){this.type=ue,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Mt),p=s.parse(n[2],2,Mt);if(!h||!p)return null;if(!Fi(h.type,[qe,Oe,ue,D,Mt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${On(h.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,ue);return _?new Os(h,p,_):null}return new Os(h,p)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Ae(s,["boolean","string","number","null"]))throw new Cr(`Expected first argument to be of type boolean, string, number or null, but found ${On(xr(s))} instead.`);if(!Ae(h,["string","array"]))throw new Cr(`Expected second argument to be of type array or string, but found ${On(xr(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return h.indexOf(s,p)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class as{constructor(n,s,h,p,_,x){this.inputType=n,this.type=s,this.input=h,this.cases=p,this.outputs=_,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const _={},x=[];for(let $=2;$<n.length-1;$+=2){let q=n[$];const ee=n[$+1];Array.isArray(q)||(q=[q]);const ce=s.concat($);if(q.length===0)return ce.error("Expected at least one branch label.");for(const ve of q){if(typeof ve!="number"&&typeof ve!="string")return ce.error("Branch labels must be numbers or strings.");if(typeof ve=="number"&&Math.abs(ve)>Number.MAX_SAFE_INTEGER)return ce.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ve=="number"&&Math.floor(ve)!==ve)return ce.error("Numeric branch labels must be integer values.");if(h){if(ce.checkSubtype(h,xr(ve)))return null}else h=xr(ve);if(_[String(ve)]!==void 0)return ce.error("Branch labels must be unique.");_[String(ve)]=x.length}const fe=s.parse(ee,$,p);if(!fe)return null;p=p||fe.type,x.push(fe)}const T=s.parse(n[1],1,Mt);if(!T)return null;const P=s.parse(n[n.length-1],n.length-1,p);return P?T.type.kind!=="value"&&s.concat(1).checkSubtype(h,T.type)?null:new as(h,p,T,_,x,P):null}evaluate(n){const s=this.input.evaluate(n);return(xr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Ln{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const p=[];for(let x=1;x<n.length-1;x+=2){const T=s.parse(n[x],x,qe);if(!T)return null;const P=s.parse(n[x+1],x+1,h);if(!P)return null;p.push([T,P]),h=h||P.type}const _=s.parse(n[n.length-1],n.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new Ln(h,p,_)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class Ka{constructor(n,s,h,p){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=p}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Mt),p=s.parse(n[2],2,ue);if(!h||!p)return null;if(!Fi(h.type,[hr(Mt),Oe,Mt]))return s.error(`Expected first argument to be of type array or string, but found ${On(h.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,ue);return _?new Ka(h.type,h,p,_):null}return new Ka(h.type,h,p)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Ae(s,["string","array"]))throw new Cr(`Expected first argument to be of type array or string, but found ${On(xr(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return s.slice(h,p)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Kl(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Wu(o,n,s,h){return h.compare(n,s)===0}function Fs(o,n,s){const h=o!=="=="&&o!=="!=";return class VT{constructor(_,x,T){this.type=qe,this.lhs=_,this.rhs=x,this.collator=T,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const T=_[0];let P=x.parse(_[1],1,Mt);if(!P)return null;if(!Kl(T,P.type))return x.concat(1).error(`"${T}" comparisons are not supported for type '${On(P.type)}'.`);let $=x.parse(_[2],2,Mt);if(!$)return null;if(!Kl(T,$.type))return x.concat(2).error(`"${T}" comparisons are not supported for type '${On($.type)}'.`);if(P.type.kind!==$.type.kind&&P.type.kind!=="value"&&$.type.kind!=="value")return x.error(`Cannot compare types '${On(P.type)}' and '${On($.type)}'.`);h&&(P.type.kind==="value"&&$.type.kind!=="value"?P=new Ir($.type,[P]):P.type.kind!=="value"&&$.type.kind==="value"&&($=new Ir(P.type,[$])));let q=null;if(_.length===4){if(P.type.kind!=="string"&&$.type.kind!=="string"&&P.type.kind!=="value"&&$.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(q=x.parse(_[3],3,_n),!q)return null}return new VT(P,$,q)}evaluate(_){const x=this.lhs.evaluate(_),T=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const P=xr(x),$=xr(T);if(P.kind!==$.kind||P.kind!=="string"&&P.kind!=="number")throw new Cr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${P.kind}, ${$.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const P=xr(x),$=xr(T);if(P.kind!=="string"||$.kind!=="string")return n(_,x,T)}return this.collator?s(_,x,T,this.collator.evaluate(_)):n(_,x,T)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const Ch=Fs("==",function(o,n,s){return n===s},Wu),Ih=Fs("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!Wu(0,n,s,h)}),Hu=Fs("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),Ah=Fs(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),Yl=Fs("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),Ph=Fs(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class Jl{constructor(n,s,h,p,_){this.type=Oe,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=_}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,ue);if(!h)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let _=null;if(p.locale&&(_=s.parse(p.locale,1,Oe),!_))return null;let x=null;if(p.currency&&(x=s.parse(p.currency,1,Oe),!x))return null;let T=null;if(p["min-fraction-digits"]&&(T=s.parse(p["min-fraction-digits"],1,ue),!T))return null;let P=null;return p["max-fraction-digits"]&&(P=s.parse(p["max-fraction-digits"],1,ue),!P)?null:new Jl(h,_,x,T,P)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Ya{constructor(n){this.type=An,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const p=[];let _=!1;for(let x=1;x<=n.length-1;++x){const T=n[x];if(_&&typeof T=="object"&&!Array.isArray(T)){_=!1;let P=null;if(T["font-scale"]&&(P=s.parse(T["font-scale"],1,ue),!P))return null;let $=null;if(T["text-font"]&&($=s.parse(T["text-font"],1,hr(Oe)),!$))return null;let q=null;if(T["text-color"]&&(q=s.parse(T["text-color"],1,st),!q))return null;const ee=p[p.length-1];ee.scale=P,ee.font=$,ee.textColor=q}else{const P=s.parse(n[x],1,Mt);if(!P)return null;const $=P.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,p.push({content:P,scale:null,font:null,textColor:null})}}return new Ya(p)}evaluate(n){return new pr(this.sections.map(s=>{const h=s.content.evaluate(n);return xr(h)===_r?new sr("",h,null,null,null):new sr(aa(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class Ql{constructor(n){this.type=_r,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Oe);return h?new Ql(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=di.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class eu{constructor(n){this.type=ue,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${On(h.type)} instead.`):new eu(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new Cr(`Expected value to be of type string or array, but found ${On(xr(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const js={"==":Ch,"!=":Ih,">":Ah,"<":Hu,">=":Ph,"<=":Yl,array:Ir,at:ql,boolean:Ir,case:Ln,coalesce:Ha,collator:Zr,format:Ya,image:Ql,in:qa,"index-of":Os,interpolate:ei,"interpolate-hcl":ei,"interpolate-lab":ei,length:eu,let:Xa,literal:is,match:as,number:Ir,"number-format":Jl,object:Ir,slice:Ka,step:Ls,string:Ir,"to-boolean":Bo,"to-color":Bo,"to-number":Bo,"to-string":Bo,var:_o,within:No};function tu(o,[n,s,h,p]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const _=p?p.evaluate(o):1,x=Pn(n,s,h,_);if(x)throw new Cr(x);return new dn(n/255,s/255,h/255,_,!1)}function Ja(o,n){return o in n}function nu(o,n){const s=n[o];return s===void 0?null:s}function ls(o){return{type:o}}function Xu(o){return{result:"success",value:o}}function Ds(o){return{result:"error",value:o}}function us(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function qu(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function ru(o){return!!o.expression&&o.expression.interpolated}function Bn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Qa(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function el(o){return o}function Ku(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),_=o.type||(ru(n)?"exponential":"interval");if(s||n.type==="padding"){const q=s?dn.parse:mr.parse;(o=lt({},o)).stops&&(o.stops=o.stops.map(ee=>[ee[0],q(ee[1])])),o.default=q(o.default?o.default:n.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let T,P,$;if(_==="exponential")T=tl;else if(_==="interval")T=oo;else if(_==="categorical"){T=Yu,P=Object.create(null);for(const q of o.stops)P[q[0]]=q[1];$=typeof o.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);T=Mh}if(h){const q={},ee=[];for(let ve=0;ve<o.stops.length;ve++){const ke=o.stops[ve],je=ke[0].zoom;q[je]===void 0&&(q[je]={zoom:je,type:o.type,property:o.property,default:o.default,stops:[]},ee.push(je)),q[je].stops.push([ke[0].value,ke[1]])}const ce=[];for(const ve of ee)ce.push([q[ve].zoom,Ku(q[ve],n)]);const fe={name:"linear"};return{kind:"composite",interpolationType:fe,interpolationFactor:ei.interpolationFactor.bind(void 0,fe),zoomStops:ce.map(ve=>ve[0]),evaluate:({zoom:ve},ke)=>tl({stops:ce,base:o.base},n,ve).evaluate(ve,ke)}}if(p){const q=_==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:q,interpolationFactor:ei.interpolationFactor.bind(void 0,q),zoomStops:o.stops.map(ee=>ee[0]),evaluate:({zoom:ee})=>T(o,n,ee,P,$)}}return{kind:"source",evaluate(q,ee){const ce=ee&&ee.properties?ee.properties[o.property]:void 0;return ce===void 0?io(o.default,n.default):T(o,n,ce,P,$)}}}function io(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function Yu(o,n,s,h,p){return io(typeof s===p?h[s]:void 0,o.default,n.default)}function oo(o,n,s){if(Bn(s)!=="number")return io(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const p=Wa(o.stops.map(_=>_[0]),s);return o.stops[p][1]}function tl(o,n,s){const h=o.base!==void 0?o.base:1;if(Bn(s)!=="number")return io(o.default,n.default);const p=o.stops.length;if(p===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[p-1][0])return o.stops[p-1][1];const _=Wa(o.stops.map(q=>q[0]),s),x=function(q,ee,ce,fe){const ve=fe-ce,ke=q-ce;return ve===0?0:ee===1?ke/ve:(Math.pow(ee,ke)-1)/(Math.pow(ee,ve)-1)}(s,h,o.stops[_][0],o.stops[_+1][0]),T=o.stops[_][1],P=o.stops[_+1][1],$=pi[n.type]||el;return typeof T.evaluate=="function"?{evaluate(...q){const ee=T.evaluate.apply(void 0,q),ce=P.evaluate.apply(void 0,q);if(ee!==void 0&&ce!==void 0)return $(ee,ce,x,o.colorSpace)}}:$(T,P,x,o.colorSpace)}function Mh(o,n,s){switch(n.type){case"color":s=dn.parse(s);break;case"formatted":s=pr.fromString(s.toString());break;case"resolvedImage":s=di.fromString(s.toString());break;case"padding":s=mr.parse(s);break;default:Bn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return io(s,o.default,n.default)}Ei.register(js,{error:[{kind:"error"},[Oe],(o,[n])=>{throw new Cr(n.evaluate(o))}],typeof:[Oe,[Mt],(o,[n])=>On(xr(n.evaluate(o)))],"to-rgba":[hr(ue,4),[st],(o,[n])=>{const[s,h,p,_]=n.evaluate(o).rgb;return[255*s,255*h,255*p,_]}],rgb:[st,[ue,ue,ue],tu],rgba:[st,[ue,ue,ue,ue],tu],has:{type:qe,overloads:[[[Oe],(o,[n])=>Ja(n.evaluate(o),o.properties())],[[Oe,en],(o,[n,s])=>Ja(n.evaluate(o),s.evaluate(o))]]},get:{type:Mt,overloads:[[[Oe],(o,[n])=>nu(n.evaluate(o),o.properties())],[[Oe,en],(o,[n,s])=>nu(n.evaluate(o),s.evaluate(o))]]},"feature-state":[Mt,[Oe],(o,[n])=>nu(n.evaluate(o),o.featureState||{})],properties:[en,[],o=>o.properties()],"geometry-type":[Oe,[],o=>o.geometryType()],id:[Mt,[],o=>o.id()],zoom:[ue,[],o=>o.globals.zoom],"heatmap-density":[ue,[],o=>o.globals.heatmapDensity||0],"line-progress":[ue,[],o=>o.globals.lineProgress||0],accumulated:[Mt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[ue,ls(ue),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[ue,ls(ue),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:ue,overloads:[[[ue,ue],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[ue],(o,[n])=>-n.evaluate(o)]]},"/":[ue,[ue,ue],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[ue,[ue,ue],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[ue,[],()=>Math.LN2],pi:[ue,[],()=>Math.PI],e:[ue,[],()=>Math.E],"^":[ue,[ue,ue],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[ue,[ue],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[ue,[ue],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[ue,[ue],(o,[n])=>Math.log(n.evaluate(o))],log2:[ue,[ue],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[ue,[ue],(o,[n])=>Math.sin(n.evaluate(o))],cos:[ue,[ue],(o,[n])=>Math.cos(n.evaluate(o))],tan:[ue,[ue],(o,[n])=>Math.tan(n.evaluate(o))],asin:[ue,[ue],(o,[n])=>Math.asin(n.evaluate(o))],acos:[ue,[ue],(o,[n])=>Math.acos(n.evaluate(o))],atan:[ue,[ue],(o,[n])=>Math.atan(n.evaluate(o))],min:[ue,ls(ue),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[ue,ls(ue),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[ue,[ue],(o,[n])=>Math.abs(n.evaluate(o))],round:[ue,[ue],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[ue,[ue],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[ue,[ue],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[qe,[Oe,Mt],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[qe,[Mt],(o,[n])=>o.id()===n.value],"filter-type-==":[qe,[Oe],(o,[n])=>o.geometryType()===n.value],"filter-<":[qe,[Oe,Mt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<p}],"filter-id-<":[qe,[Mt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[qe,[Oe,Mt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>p}],"filter-id->":[qe,[Mt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[qe,[Oe,Mt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[qe,[Mt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[qe,[Oe,Mt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[qe,[Mt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[qe,[Mt],(o,[n])=>n.value in o.properties()],"filter-has-id":[qe,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[qe,[hr(Oe)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[qe,[hr(Mt)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[qe,[Oe,hr(Mt)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[qe,[Oe,hr(Mt)],(o,[n,s])=>function(h,p,_,x){for(;_<=x;){const T=_+x>>1;if(p[T]===h)return!0;p[T]>h?x=T-1:_=T+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:qe,overloads:[[[qe,qe],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[ls(qe),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:qe,overloads:[[[qe,qe],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[ls(qe),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[qe,[qe],(o,[n])=>!n.evaluate(o)],"is-supported-script":[qe,[Oe],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Oe,[Oe],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Oe,[Oe],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Oe,ls(Mt),(o,n)=>n.map(s=>aa(s.evaluate(o))).join("")],"resolved-locale":[Oe,[_n],(o,[n])=>n.evaluate(o).resolvedLocale()]});class iu{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new $a,this._defaultValue=s?(h=s).type==="color"&&Qa(h.default)?new dn(0,0,0,0):h.type==="color"?dn.parse(h.default)||null:h.type==="padding"?mr.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,p,_,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,p,_,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new Cr(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function nl(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in js}function Bs(o,n){const s=new Ms(js,xo,[],n?function(p){const _={color:st,string:Oe,number:ue,enum:Oe,boolean:qe,formatted:An,padding:xn,resolvedImage:_r};return p.type==="array"?hr(_[p.value]||Mt,p.length):_[p.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Xu(new iu(h,n)):Ds(s.errors)}class ar{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!zs(s.expression)}evaluateWithoutErrorHandling(n,s,h,p,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,_,x)}evaluate(n,s,h,p,_,x){return this._styleExpression.evaluate(n,s,h,p,_,x)}}class Ns{constructor(n,s,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!zs(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,s,h,p,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,_,x)}evaluate(n,s,h,p,_,x){return this._styleExpression.evaluate(n,s,h,p,_,x)}interpolationFactor(n,s,h){return this.interpolationType?ei.interpolationFactor(this.interpolationType,n,s,h):0}}function Tn(o,n){const s=Bs(o,n);if(s.result==="error")return s;const h=s.value.expression,p=Za(h);if(!p&&!us(n))return Ds([new ae("","data expressions not supported")]);const _=la(h,["zoom"]);if(!_&&!qu(n))return Ds([new ae("","zoom expressions not supported")]);const x=Gn(h);return x||_?x instanceof ae?Ds([x]):x instanceof ei&&!ru(n)?Ds([new ae("",'"interpolate" expressions cannot be used with this property')]):Xu(x?new Ns(p?"camera":"composite",s.value,x.labels,x instanceof ei?x.interpolation:void 0):new ar(p?"constant":"source",s.value)):Ds([new ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Us{constructor(n,s){this._parameters=n,this._specification=s,lt(this,Ku(this._parameters,this._specification))}static deserialize(n){return new Us(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Gn(o){let n=null;if(o instanceof Xa)n=Gn(o.result);else if(o instanceof Ha){for(const s of o.args)if(n=Gn(s),n)break}else(o instanceof Ls||o instanceof ei)&&o.input instanceof Ei&&o.input.name==="zoom"&&(n=o);return n instanceof ae||o.eachChild(s=>{const h=Gn(s);h instanceof ae?n=h:!n&&h?n=new ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new ae("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Hn(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Hn(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const ca={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function rl(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Hn(o)||(o=so(o));const n=Bs(o,ca);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,p)=>n.value.evaluate(s,h,{},p),needGeometry:ha(o)}}function kh(o,n){return o<n?-1:o>n?1:0}function ha(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(ha(o[n]))return!0;return!1}function so(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?ou(o[1],o[2],"=="):n==="!="?fa(ou(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?ou(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(so))):n==="all"?["all"].concat(o.slice(1).map(so)):n==="none"?["all"].concat(o.slice(1).map(so).map(fa)):n==="in"?il(o[1],o.slice(2)):n==="!in"?fa(il(o[1],o.slice(2))):n==="has"?$s(o[1]):n==="!has"?fa($s(o[1])):n!=="within"||o;var s}function ou(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function il(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(kh)]]:["filter-in-small",o,["literal",n]]}}function $s(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function fa(o){return["!",o]}function wo(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let p="[";for(const _ of o)p+=`${wo(_)},`;return`${p}]`}const s=Object.keys(o).sort();let h="{";for(let p=0;p<s.length;p++)h+=`${JSON.stringify(s[p])}:${wo(o[s[p]])},`;return`${h}}`}function Uo(o){let n="";for(const s of Vt)n+=`/${wo(o[s])}`;return n}function Wr(o){const n=o.value;return n?[new De(o.key,n,"constants have been deprecated as of v8")]:[]}function Kn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function bo(o){if(Array.isArray(o))return o.map(bo);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=bo(o[s]);return n}return Kn(o)}function oi(o){const n=o.key,s=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},_=o.style,x=o.styleSpec,T=o.validateSpec;let P=[];const $=Bn(s);if($!=="object")return[new De(n,s,`object expected, ${$} found`)];for(const q in s){const ee=q.split(".")[0],ce=h[ee]||h["*"];let fe;if(p[ee])fe=p[ee];else if(h[ee])fe=T;else if(p["*"])fe=p["*"];else{if(!h["*"]){P.push(new De(n,s[q],`unknown property "${q}"`));continue}fe=T}P=P.concat(fe({key:(n&&`${n}.`)+q,value:s[q],valueSpec:ce,style:_,styleSpec:x,object:s,objectKey:q,validateSpec:T},s))}for(const q in h)p[q]||h[q].required&&h[q].default===void 0&&s[q]===void 0&&P.push(new De(n,s,`missing required property "${q}"`));return P}function Ju(o){const n=o.value,s=o.valueSpec,h=o.style,p=o.styleSpec,_=o.key,x=o.arrayElementValidator||o.validateSpec;if(Bn(n)!=="array")return[new De(_,n,`array expected, ${Bn(n)} found`)];if(s.length&&n.length!==s.length)return[new De(_,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new De(_,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let T={type:s.value,values:s.values};p.$version<7&&(T.function=s.function),Bn(s.value)==="object"&&(T=s.value);let P=[];for(let $=0;$<n.length;$++)P=P.concat(x({array:n,arrayIndex:$,value:n[$],valueSpec:T,validateSpec:o.validateSpec,style:h,styleSpec:p,key:`${_}[${$}]`}));return P}function Vs(o){const n=o.key,s=o.value,h=o.valueSpec;let p=Bn(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new De(n,s,`number expected, ${p} found`)]:"minimum"in h&&s<h.minimum?[new De(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new De(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function da(o){const n=o.valueSpec,s=Kn(o.value.type);let h,p,_,x={};const T=s!=="categorical"&&o.value.property===void 0,P=!T,$=Bn(o.value.stops)==="array"&&Bn(o.value.stops[0])==="array"&&Bn(o.value.stops[0][0])==="object",q=oi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(fe){if(s==="identity")return[new De(fe.key,fe.value,'identity function may not have a "stops" property')];let ve=[];const ke=fe.value;return ve=ve.concat(Ju({key:fe.key,value:ke,valueSpec:fe.valueSpec,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,arrayElementValidator:ee})),Bn(ke)==="array"&&ke.length===0&&ve.push(new De(fe.key,ke,"array must have at least one stop")),ve},default:function(fe){return fe.validateSpec({key:fe.key,value:fe.value,valueSpec:n,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec})}}});return s==="identity"&&T&&q.push(new De(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||q.push(new De(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!ru(o.valueSpec)&&q.push(new De(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(P&&!us(o.valueSpec)?q.push(new De(o.key,o.value,"property functions not supported")):T&&!qu(o.valueSpec)&&q.push(new De(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!$||o.value.property!==void 0||q.push(new De(o.key,o.value,'"property" property is required')),q;function ee(fe){let ve=[];const ke=fe.value,je=fe.key;if(Bn(ke)!=="array")return[new De(je,ke,`array expected, ${Bn(ke)} found`)];if(ke.length!==2)return[new De(je,ke,`array length 2 expected, length ${ke.length} found`)];if($){if(Bn(ke[0])!=="object")return[new De(je,ke,`object expected, ${Bn(ke[0])} found`)];if(ke[0].zoom===void 0)return[new De(je,ke,"object stop key must have zoom")];if(ke[0].value===void 0)return[new De(je,ke,"object stop key must have value")];if(_&&_>Kn(ke[0].zoom))return[new De(je,ke[0].zoom,"stop zoom values must appear in ascending order")];Kn(ke[0].zoom)!==_&&(_=Kn(ke[0].zoom),p=void 0,x={}),ve=ve.concat(oi({key:`${je}[0]`,value:ke[0],valueSpec:{zoom:{}},validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{zoom:Vs,value:ce}}))}else ve=ve.concat(ce({key:`${je}[0]`,value:ke[0],valueSpec:{},validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec},ke));return nl(bo(ke[1]))?ve.concat([new De(`${je}[1]`,ke[1],"expressions are not allowed in function stops.")]):ve.concat(fe.validateSpec({key:`${je}[1]`,value:ke[1],valueSpec:n,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec}))}function ce(fe,ve){const ke=Bn(fe.value),je=Kn(fe.value),Ue=fe.value!==null?fe.value:ve;if(h){if(ke!==h)return[new De(fe.key,Ue,`${ke} stop domain type must match previous stop domain type ${h}`)]}else h=ke;if(ke!=="number"&&ke!=="string"&&ke!=="boolean")return[new De(fe.key,Ue,"stop domain value must be a number, string, or boolean")];if(ke!=="number"&&s!=="categorical"){let Qe=`number expected, ${ke} found`;return us(n)&&s===void 0&&(Qe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new De(fe.key,Ue,Qe)]}return s!=="categorical"||ke!=="number"||isFinite(je)&&Math.floor(je)===je?s!=="categorical"&&ke==="number"&&p!==void 0&&je<p?[new De(fe.key,Ue,"stop domain values must appear in ascending order")]:(p=je,s==="categorical"&&je in x?[new De(fe.key,Ue,"stop domain values must be unique")]:(x[je]=!0,[])):[new De(fe.key,Ue,`integer expected, found ${je}`)]}}function Hr(o){const n=(o.expressionContext==="property"?Tn:Bs)(bo(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new De(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new De(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!zs(s))return[new De(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!zs(s))return[new De(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!la(s,["zoom","feature-state"]))return[new De(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Za(s))return[new De(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ao(o){const n=o.key,s=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Kn(s))===-1&&p.push(new De(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(Kn(s))===-1&&p.push(new De(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function pa(o){return Hn(bo(o.value))?Hr(lt({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):$o(o)}function $o(o){const n=o.value,s=o.key;if(Bn(n)!=="array")return[new De(s,n,`array expected, ${Bn(n)} found`)];const h=o.styleSpec;let p,_=[];if(n.length<1)return[new De(s,n,"filter array must have at least 1 element")];switch(_=_.concat(ao({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),Kn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Kn(n[1])==="$type"&&_.push(new De(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&_.push(new De(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=Bn(n[1]),p!=="string"&&_.push(new De(`${s}[1]`,n[1],`string expected, ${p} found`)));for(let x=2;x<n.length;x++)p=Bn(n[x]),Kn(n[1])==="$type"?_=_.concat(ao({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&_.push(new De(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)_=_.concat($o({key:`${s}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=Bn(n[1]),n.length!==2?_.push(new De(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&_.push(new De(`${s}[1]`,n[1],`string expected, ${p} found`));break;case"within":p=Bn(n[1]),n.length!==2?_.push(new De(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="object"&&_.push(new De(`${s}[1]`,n[1],`object expected, ${p} found`))}return _}function ma(o,n){const s=o.key,h=o.validateSpec,p=o.style,_=o.styleSpec,x=o.value,T=o.objectKey,P=_[`${n}_${o.layerType}`];if(!P)return[];const $=T.match(/^(.*)-transition$/);if(n==="paint"&&$&&P[$[1]]&&P[$[1]].transition)return h({key:s,value:x,valueSpec:_.transition,style:p,styleSpec:_});const q=o.valueSpec||P[T];if(!q)return[new De(s,x,`unknown property "${T}"`)];let ee;if(Bn(x)==="string"&&us(q)&&!q.tokens&&(ee=/^{([^}]+)}$/.exec(x)))return[new De(s,x,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ee[1])} }\`.`)];const ce=[];return o.layerType==="symbol"&&(T==="text-field"&&p&&!p.glyphs&&ce.push(new De(s,x,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&Qa(bo(x))&&Kn(x.type)==="identity"&&ce.push(new De(s,x,'"text-font" does not support identity functions'))),ce.concat(h({key:o.key,value:x,valueSpec:q,style:p,styleSpec:_,expressionContext:"property",propertyType:n,propertyKey:T}))}function ol(o){return ma(o,"paint")}function su(o){return ma(o,"layout")}function ga(o){let n=[];const s=o.value,h=o.key,p=o.style,_=o.styleSpec;s.type||s.ref||n.push(new De(h,s,'either "type" or "ref" is required'));let x=Kn(s.type);const T=Kn(s.ref);if(s.id){const P=Kn(s.id);for(let $=0;$<o.arrayIndex;$++){const q=p.layers[$];Kn(q.id)===P&&n.push(new De(h,s.id,`duplicate layer id "${s.id}", previously used at line ${q.id.__line__}`))}}if("ref"in s){let P;["type","source","source-layer","filter","layout"].forEach($=>{$ in s&&n.push(new De(h,s[$],`"${$}" is prohibited for ref layers`))}),p.layers.forEach($=>{Kn($.id)===T&&(P=$)}),P?P.ref?n.push(new De(h,s.ref,"ref cannot reference another ref layer")):x=Kn(P.type):n.push(new De(h,s.ref,`ref layer "${T}" not found`))}else if(x!=="background")if(s.source){const P=p.sources&&p.sources[s.source],$=P&&Kn(P.type);P?$==="vector"&&x==="raster"?n.push(new De(h,s.source,`layer "${s.id}" requires a raster source`)):$==="raster"&&x!=="raster"?n.push(new De(h,s.source,`layer "${s.id}" requires a vector source`)):$!=="vector"||s["source-layer"]?$==="raster-dem"&&x!=="hillshade"?n.push(new De(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||$==="geojson"&&P.lineMetrics||n.push(new De(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new De(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new De(h,s.source,`source "${s.source}" not found`))}else n.push(new De(h,s,'missing required property "source"'));return n=n.concat(oi({key:h,value:s,valueSpec:_.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:_.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:pa,layout:P=>oi({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":$=>su(lt({layerType:x},$))}}),paint:P=>oi({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":$=>ol(lt({layerType:x},$))}})}})),n}function ji(o){const n=o.value,s=o.key,h=Bn(n);return h!=="string"?[new De(s,n,`string expected, ${h} found`)]:[]}const Di={promoteId:function({key:o,value:n}){if(Bn(n)==="string")return ji({key:o,value:n});{const s=[];for(const h in n)s.push(...ji({key:`${o}.${h}`,value:n[h]}));return s}}};function ya(o){const n=o.value,s=o.key,h=o.styleSpec,p=o.style,_=o.validateSpec;if(!n.type)return[new De(s,n,'"type" is required')];const x=Kn(n.type);let T;switch(x){case"vector":case"raster":case"raster-dem":return T=oi({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Di,validateSpec:_}),T;case"geojson":if(T=oi({key:s,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:_,objectElementValidators:Di}),n.cluster)for(const P in n.clusterProperties){const[$,q]=n.clusterProperties[P],ee=typeof $=="string"?[$,["accumulated"],["get",P]]:$;T.push(...Hr({key:`${s}.${P}.map`,value:q,validateSpec:_,expressionContext:"cluster-map"})),T.push(...Hr({key:`${s}.${P}.reduce`,value:ee,validateSpec:_,expressionContext:"cluster-reduce"}))}return T;case"video":return oi({key:s,value:n,valueSpec:h.source_video,style:p,validateSpec:_,styleSpec:h});case"image":return oi({key:s,value:n,valueSpec:h.source_image,style:p,validateSpec:_,styleSpec:h});case"canvas":return[new De(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ao({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:_,styleSpec:h})}}function Qu(o){const n=o.value,s=o.styleSpec,h=s.light,p=o.style;let _=[];const x=Bn(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new De("light",n,`object expected, ${x} found`)]),_;for(const T in n){const P=T.match(/^(.*)-transition$/);_=_.concat(P&&h[P[1]]&&h[P[1]].transition?o.validateSpec({key:T,value:n[T],valueSpec:s.transition,validateSpec:o.validateSpec,style:p,styleSpec:s}):h[T]?o.validateSpec({key:T,value:n[T],valueSpec:h[T],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new De(T,n[T],`unknown property "${T}"`)])}return _}function Gs(o){const n=o.value,s=o.styleSpec,h=s.terrain,p=o.style;let _=[];const x=Bn(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new De("terrain",n,`object expected, ${x} found`)]),_;for(const T in n)_=_.concat(h[T]?o.validateSpec({key:T,value:n[T],valueSpec:h[T],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new De(T,n[T],`unknown property "${T}"`)]);return _}function sl(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const p=[],_=[];for(const x in s)s[x].id&&p.includes(s[x].id)&&n.push(new De(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),p.push(s[x].id),s[x].url&&_.includes(s[x].url)&&n.push(new De(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),_.push(s[x].url),n=n.concat(oi({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return ji({key:h,value:s})}const au={"*":()=>[],array:Ju,boolean:function(o){const n=o.value,s=o.key,h=Bn(n);return h!=="boolean"?[new De(s,n,`boolean expected, ${h} found`)]:[]},number:Vs,color:function(o){const n=o.key,s=o.value,h=Bn(s);return h!=="string"?[new De(n,s,`color expected, ${h} found`)]:dn.parse(String(s))?[]:[new De(n,s,`color expected, "${s}" found`)]},constants:Wr,enum:ao,filter:pa,function:da,layer:ga,object:oi,source:ya,light:Qu,terrain:Gs,string:ji,formatted:function(o){return ji(o).length===0?[]:Hr(o)},resolvedImage:function(o){return ji(o).length===0?[]:Hr(o)},padding:function(o){const n=o.key,s=o.value;if(Bn(s)==="array"){if(s.length<1||s.length>4)return[new De(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let p=[];for(let _=0;_<s.length;_++)p=p.concat(o.validateSpec({key:`${n}[${_}]`,value:s[_],validateSpec:o.validateSpec,valueSpec:h}));return p}return Vs({key:n,value:s,valueSpec:{}})},sprite:sl};function Zs(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=Zs,s.expression&&Qa(Kn(n))?da(o):s.expression&&nl(bo(n))?Hr(o):s.type&&au[s.type]?au[s.type](o):oi(lt({},o,{valueSpec:s.type?h[s.type]:s}))}function lu(o){const n=o.value,s=o.key,h=ji(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new De(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new De(s,n,'"glyphs" url must include a "{range}" token'))),h}function U(o,n=Ye){let s=[];return s=s.concat(Zs({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:Zs,objectElementValidators:{glyphs:lu,"*":()=>[]}})),o.constants&&(s=s.concat(Wr({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:Zs}))),Be(s)}function me(o){return function(n){return o({...n,validateSpec:Zs})}}function Be(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function rt(o){return function(...n){return Be(o.apply(this,n))}}U.source=rt(me(ya)),U.sprite=rt(me(sl)),U.glyphs=rt(me(lu)),U.light=rt(me(Qu)),U.terrain=rt(me(Gs)),U.layer=rt(me(ga)),U.filter=rt(me(pa)),U.paintProperty=rt(me(ol)),U.layoutProperty=rt(me(su));const zt=U,Tt=zt.light,Zt=zt.paintProperty,Jt=zt.layoutProperty;function mn(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new ht(new Error(h.message))),s=!0;return s}class Fn{constructor(n,s,h){const p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let P=0;P<this.d*this.d;P++){const $=x[3+P],q=x[3+P+1];p.push($===q?null:x.subarray($,q))}const T=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],T),this.bboxes=x.subarray(T),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const _=h/s*n;this.min=-_,this.max=n+_}insert(n,s,h,p,_){this._forEachCell(s,h,p,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,p,_,x){this.cells[_].push(x)}query(n,s,h,p,_){const x=this.min,T=this.max;if(n<=x&&s<=x&&T<=h&&T<=p&&!_)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(n,s,h,p,this._queryCell,P,{},_),P}}_queryCell(n,s,h,p,_,x,T,P){const $=this.cells[_];if($!==null){const q=this.keys,ee=this.bboxes;for(let ce=0;ce<$.length;ce++){const fe=$[ce];if(T[fe]===void 0){const ve=4*fe;(P?P(ee[ve+0],ee[ve+1],ee[ve+2],ee[ve+3]):n<=ee[ve+2]&&s<=ee[ve+3]&&h>=ee[ve+0]&&p>=ee[ve+1])?(T[fe]=!0,x.push(q[fe])):T[fe]=!1}}}}_forEachCell(n,s,h,p,_,x,T,P){const $=this._convertToCellCoord(n),q=this._convertToCellCoord(s),ee=this._convertToCellCoord(h),ce=this._convertToCellCoord(p);for(let fe=$;fe<=ee;fe++)for(let ve=q;ve<=ce;ve++){const ke=this.d*ve+fe;if((!P||P(this._convertFromCellCoord(fe),this._convertFromCellCoord(ve),this._convertFromCellCoord(fe+1),this._convertFromCellCoord(ve+1)))&&_.call(this,n,s,h,p,ke,x,T,P))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const p=new Int32Array(s+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let _=s;for(let x=0;x<n.length;x++){const T=n[x];p[3+x]=_,p.set(T,_),_+=T.length}return p[3+n.length]=_,p.set(this.keys,_),_+=this.keys.length,p[3+n.length+1]=_,p.set(this.bboxes,_),_+=this.bboxes.length,p.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Fn(n.buffer)}}const Sn={};function St(o,n,s={}){if(Sn[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),Sn[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}St("Object",Object),St("TransferableGridIndex",Fn),St("Color",dn),St("Error",Error),St("AJAXError",we),St("ResolvedImage",di),St("StylePropertyFunction",Us),St("StyleExpression",iu,{omit:["_evaluator"]}),St("ZoomDependentExpression",Ns),St("ZoomConstantExpression",ar),St("CompoundExpression",Ei,{omit:["_evaluate"]});for(const o in js)js[o]._classRegistryKey||St(`Expression_${o}`,js[o]);function rr(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function wr(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(rr(o)||te(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(wr(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Sn[h])throw new Error(`${h} is not registered.`);const p=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&p===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in o){if(!o.hasOwnProperty(_)||Sn[h].omit.indexOf(_)>=0)continue;const x=o[_];p[_]=Sn[h].shallow.indexOf(_)>=0?x:wr(x,n)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof o)}function tr(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||rr(o)||te(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(tr);if(typeof o=="object"){const n=o.$name||"Object";if(!Sn[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=Sn[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const _=o[p];h[p]=Sn[n].shallow.indexOf(p)>=0?_:tr(_)}return h}throw new Error("can't deserialize object of type "+typeof o)}class Eo{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Ct={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function lo(o){for(const n of o)if(cs(n.charCodeAt(0)))return!0;return!1}function al(o){for(const n of o)if(!va(n.charCodeAt(0)))return!1;return!0}function va(o){return!(Ct.Arabic(o)||Ct["Arabic Supplement"](o)||Ct["Arabic Extended-A"](o)||Ct["Arabic Presentation Forms-A"](o)||Ct["Arabic Presentation Forms-B"](o))}function cs(o){return!(o!==746&&o!==747&&(o<4352||!(Ct["Bopomofo Extended"](o)||Ct.Bopomofo(o)||Ct["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Ct["CJK Compatibility Ideographs"](o)||Ct["CJK Compatibility"](o)||Ct["CJK Radicals Supplement"](o)||Ct["CJK Strokes"](o)||!(!Ct["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Ct["CJK Unified Ideographs Extension A"](o)||Ct["CJK Unified Ideographs"](o)||Ct["Enclosed CJK Letters and Months"](o)||Ct["Hangul Compatibility Jamo"](o)||Ct["Hangul Jamo Extended-A"](o)||Ct["Hangul Jamo Extended-B"](o)||Ct["Hangul Jamo"](o)||Ct["Hangul Syllables"](o)||Ct.Hiragana(o)||Ct["Ideographic Description Characters"](o)||Ct.Kanbun(o)||Ct["Kangxi Radicals"](o)||Ct["Katakana Phonetic Extensions"](o)||Ct.Katakana(o)&&o!==12540||!(!Ct["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Ct["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Ct["Unified Canadian Aboriginal Syllabics"](o)||Ct["Unified Canadian Aboriginal Syllabics Extended"](o)||Ct["Vertical Forms"](o)||Ct["Yijing Hexagram Symbols"](o)||Ct["Yi Syllables"](o)||Ct["Yi Radicals"](o))))}function kd(o){return!(cs(o)||function(n){return!!(Ct["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Ct["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Ct["Letterlike Symbols"](n)||Ct["Number Forms"](n)||Ct["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Ct["Control Pictures"](n)&&n!==9251||Ct["Optical Character Recognition"](n)||Ct["Enclosed Alphanumerics"](n)||Ct["Geometric Shapes"](n)||Ct["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Ct["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Ct["CJK Symbols and Punctuation"](n)||Ct.Katakana(n)||Ct["Private Use Area"](n)||Ct["CJK Compatibility Forms"](n)||Ct["Small Form Variants"](n)||Ct["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function ec(o){return o>=1424&&o<=2303||Ct["Arabic Presentation Forms-A"](o)||Ct["Arabic Presentation Forms-B"](o)}function tc(o,n){return!(!n&&ec(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Ct.Khmer(o))}function zd(o){for(const n of o)if(ec(n.charCodeAt(0)))return!0;return!1}const zh="deferred",nc="loading",Lh="loaded";let uu=null,Si="unavailable",Ws=null;const Ld=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Si="error"),uu&&uu(o)};function Rh(){rc.fire(new At("pluginStateChange",{pluginStatus:Si,pluginURL:Ws}))}const rc=new bt,Oh=function(){return Si},Rd=function(){if(Si!==zh||!Ws)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Si=nc,Rh(),Ws&&Ge({url:Ws},o=>{o?Ld(o):(Si=Lh,Rh())})},uo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Si===Lh||uo.applyArabicShaping!=null,isLoading:()=>Si===nc,setState(o){if(!ye())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Si=o.pluginStatus,Ws=o.pluginURL},isParsed(){if(!ye())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return uo.applyArabicShaping!=null&&uo.processBidirectionalText!=null&&uo.processStyledBidirectionalText!=null},getPluginURL(){if(!ye())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ws}};class lr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Eo,this.transition={})}isSupportedScript(n){return function(s,h){for(const p of s)if(!tc(p.charCodeAt(0),h))return!1;return!0}(n,uo.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class ic{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,p){if(Qa(h))return new Us(h,p);if(nl(h)){const _=Tn(h,p);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=h;return p.type==="color"&&typeof h=="string"?_=dn.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)||(_=mr.parse(h)),{kind:"constant",evaluate:()=>_}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Fh{constructor(n){this.property=n,this.value=new ic(n,void 0)}transitioned(n,s){return new cu(this.property,this.value,s,N({},n.transition,this.transition),n.now)}untransitioned(){return new cu(this.property,this.value,null,{},0)}}class Od{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return S(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Fh(this._values[n].property)),this._values[n].value=new ic(this._values[n].property,s===null?void 0:S(s))}getTransition(n){return S(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Fh(this._values[n].property)),this._values[n].transition=S(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const p=this.getTransition(s);p!==void 0&&(n[`${s}-transition`]=p)}return n}transitioned(n,s){const h=new Fd(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,s._values[p]);return h}untransitioned(){const n=new Fd(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class cu{constructor(n,s,h,p,_){this.property=n,this.value=s,this.begin=_+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const p=n.now||0,_=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(p<this.begin)return x.possiblyEvaluate(n,s,h);{const T=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),_,function(P){if(P<=0)return 0;if(P>=1)return 1;const $=P*P,q=$*P;return 4*(P<.5?q:3*(P-$)+q-.75)}(T))}}return _}}class Fd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const p=new oc(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].possiblyEvaluate(n,s,h);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class jh{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return S(this._values[n].value)}setValue(n,s){this._values[n]=new ic(this._values[n].property,s===null?void 0:S(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const p=new oc(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].possiblyEvaluate(n,s,h);return p}}class Vo{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,p){return this.property.evaluate(this.value,this.parameters,n,s,h,p)}}class oc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Wt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const p=pi[this.specification.type];return p?p(n,s,h):n}}class sn{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,p){return new Vo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,p)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Vo(this,{kind:"constant",value:void 0},n.parameters);const p=pi[this.specification.type];if(p){const _=p(n.value.value,s.value.value,h);return new Vo(this,{kind:"constant",value:_},n.parameters)}return n}evaluate(n,s,h,p,_,x){return n.kind==="constant"?n.value:n.evaluate(s,h,p,_,x)}}class sc extends sn{possiblyEvaluate(n,s,h,p){if(n.value===void 0)return new Vo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},h,p),x=n.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,T=this._calculate(x,x,x,s);return new Vo(this,{kind:"constant",value:T},s)}if(n.expression.kind==="camera"){const _=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Vo(this,{kind:"constant",value:_},s)}return new Vo(this,n.expression,s)}evaluate(n,s,h,p,_,x){if(n.kind==="source"){const T=n.evaluate(s,h,p,_,x);return this._calculate(T,T,T,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,p),n.evaluate({zoom:Math.floor(s.zoom)},h,p),n.evaluate({zoom:Math.floor(s.zoom)+1},h,p),s):n.value}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Dh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},h,p);return this._calculate(_,_,_,s)}return this._calculate(n.expression.evaluate(new lr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new lr(Math.floor(s.zoom),s)),n.expression.evaluate(new lr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Bh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){return!!n.expression.evaluate(s,null,{},h,p)}interpolate(){return!1}}class Ti{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new ic(h,void 0),_=this.defaultTransitionablePropertyValues[s]=new Fh(h);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}St("DataDrivenProperty",sn),St("DataConstantProperty",Wt),St("CrossFadedDataDrivenProperty",sc),St("CrossFadedProperty",Dh),St("ColorRampProperty",Bh);const jd="-transition";class Go extends bt{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new jh(s.layout)),s.paint)){this._transitionablePaint=new Od(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new oc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(Jt,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(jd)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(Zt,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(jd))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[n],_=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),T=p.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const P=this._transitionablePaint._values[n].value;return P.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(n,T,P)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),B(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,p,_={}){return(!_||_.validate!==!1)&&mn(this,n.call(zt,{key:s,layerType:this.type,objectKey:h,value:p,styleSpec:Ye,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Vo&&us(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const ll={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ac{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class br{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Or(o,n=1){let s=0,h=0;return{members:o.map(p=>{const _=ll[p.type].BYTES_PER_ELEMENT,x=s=Nh(s,Math.max(n,_)),T=p.components||1;return h=Math.max(h,_),s+=_*T,{name:p.name,type:p.type,components:T,offset:x}}),size:Nh(s,Math.max(h,n)),alignment:n}}function Nh(o,n){return Math.ceil(o/n)*n}class hu extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.int16[p+0]=s,this.int16[p+1]=h,n}}hu.prototype.bytesPerElement=4,St("StructArrayLayout2i4",hu);class lc extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const _=3*n;return this.int16[_+0]=s,this.int16[_+1]=h,this.int16[_+2]=p,n}}lc.prototype.bytesPerElement=6,St("StructArrayLayout3i6",lc);class Zo extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,p)}emplace(n,s,h,p,_){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=_,n}}Zo.prototype.bytesPerElement=8,St("StructArrayLayout4i8",Zo);class uc extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,h,p,_,x)}emplace(n,s,h,p,_,x,T){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=_,this.int16[P+4]=x,this.int16[P+5]=T,n}}uc.prototype.bytesPerElement=12,St("StructArrayLayout2i4i12",uc);class fu extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,h,p,_,x)}emplace(n,s,h,p,_,x,T){const P=4*n,$=8*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.uint8[$+4]=p,this.uint8[$+5]=_,this.uint8[$+6]=x,this.uint8[$+7]=T,n}}fu.prototype.bytesPerElement=8,St("StructArrayLayout2i4ub8",fu);class ul extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.float32[p+0]=s,this.float32[p+1]=h,n}}ul.prototype.bytesPerElement=8,St("StructArrayLayout2f8",ul);class du extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x,T,P,$,q){const ee=this.length;return this.resize(ee+1),this.emplace(ee,n,s,h,p,_,x,T,P,$,q)}emplace(n,s,h,p,_,x,T,P,$,q,ee){const ce=10*n;return this.uint16[ce+0]=s,this.uint16[ce+1]=h,this.uint16[ce+2]=p,this.uint16[ce+3]=_,this.uint16[ce+4]=x,this.uint16[ce+5]=T,this.uint16[ce+6]=P,this.uint16[ce+7]=$,this.uint16[ce+8]=q,this.uint16[ce+9]=ee,n}}du.prototype.bytesPerElement=20,St("StructArrayLayout10ui20",du);class Uh extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x,T,P,$,q,ee,ce){const fe=this.length;return this.resize(fe+1),this.emplace(fe,n,s,h,p,_,x,T,P,$,q,ee,ce)}emplace(n,s,h,p,_,x,T,P,$,q,ee,ce,fe){const ve=12*n;return this.int16[ve+0]=s,this.int16[ve+1]=h,this.int16[ve+2]=p,this.int16[ve+3]=_,this.uint16[ve+4]=x,this.uint16[ve+5]=T,this.uint16[ve+6]=P,this.uint16[ve+7]=$,this.int16[ve+8]=q,this.int16[ve+9]=ee,this.int16[ve+10]=ce,this.int16[ve+11]=fe,n}}Uh.prototype.bytesPerElement=24,St("StructArrayLayout4i4ui4i24",Uh);class cl extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const _=3*n;return this.float32[_+0]=s,this.float32[_+1]=h,this.float32[_+2]=p,n}}cl.prototype.bytesPerElement=12,St("StructArrayLayout3f12",cl);class _a extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}_a.prototype.bytesPerElement=4,St("StructArrayLayout1ul4",_a);class $h extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x,T,P,$){const q=this.length;return this.resize(q+1),this.emplace(q,n,s,h,p,_,x,T,P,$)}emplace(n,s,h,p,_,x,T,P,$,q){const ee=10*n,ce=5*n;return this.int16[ee+0]=s,this.int16[ee+1]=h,this.int16[ee+2]=p,this.int16[ee+3]=_,this.int16[ee+4]=x,this.int16[ee+5]=T,this.uint32[ce+3]=P,this.uint16[ee+8]=$,this.uint16[ee+9]=q,n}}$h.prototype.bytesPerElement=20,St("StructArrayLayout6i1ul2ui20",$h);class cc extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,h,p,_,x)}emplace(n,s,h,p,_,x,T){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=_,this.int16[P+4]=x,this.int16[P+5]=T,n}}cc.prototype.bytesPerElement=12,St("StructArrayLayout2i2i2i12",cc);class xa extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,p,_)}emplace(n,s,h,p,_,x){const T=4*n,P=8*n;return this.float32[T+0]=s,this.float32[T+1]=h,this.float32[T+2]=p,this.int16[P+6]=_,this.int16[P+7]=x,n}}xa.prototype.bytesPerElement=16,St("StructArrayLayout2f1f2i16",xa);class Vh extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,p)}emplace(n,s,h,p,_){const x=12*n,T=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=h,this.float32[T+1]=p,this.float32[T+2]=_,n}}Vh.prototype.bytesPerElement=12,St("StructArrayLayout2ub2f12",Vh);class hc extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const _=3*n;return this.uint16[_+0]=s,this.uint16[_+1]=h,this.uint16[_+2]=p,n}}hc.prototype.bytesPerElement=6,St("StructArrayLayout3ui6",hc);class fc extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x,T,P,$,q,ee,ce,fe,ve,ke,je,Ue){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,n,s,h,p,_,x,T,P,$,q,ee,ce,fe,ve,ke,je,Ue)}emplace(n,s,h,p,_,x,T,P,$,q,ee,ce,fe,ve,ke,je,Ue,Qe){const Ze=24*n,tt=12*n,ot=48*n;return this.int16[Ze+0]=s,this.int16[Ze+1]=h,this.uint16[Ze+2]=p,this.uint16[Ze+3]=_,this.uint32[tt+2]=x,this.uint32[tt+3]=T,this.uint32[tt+4]=P,this.uint16[Ze+10]=$,this.uint16[Ze+11]=q,this.uint16[Ze+12]=ee,this.float32[tt+7]=ce,this.float32[tt+8]=fe,this.uint8[ot+36]=ve,this.uint8[ot+37]=ke,this.uint8[ot+38]=je,this.uint32[tt+10]=Ue,this.int16[Ze+22]=Qe,n}}fc.prototype.bytesPerElement=48,St("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",fc);class Gh extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x,T,P,$,q,ee,ce,fe,ve,ke,je,Ue,Qe,Ze,tt,ot,mt,Dt,Ut,jt,Rt,kt,Bt){const Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,n,s,h,p,_,x,T,P,$,q,ee,ce,fe,ve,ke,je,Ue,Qe,Ze,tt,ot,mt,Dt,Ut,jt,Rt,kt,Bt)}emplace(n,s,h,p,_,x,T,P,$,q,ee,ce,fe,ve,ke,je,Ue,Qe,Ze,tt,ot,mt,Dt,Ut,jt,Rt,kt,Bt,Ot){const Et=34*n,nn=17*n;return this.int16[Et+0]=s,this.int16[Et+1]=h,this.int16[Et+2]=p,this.int16[Et+3]=_,this.int16[Et+4]=x,this.int16[Et+5]=T,this.int16[Et+6]=P,this.int16[Et+7]=$,this.uint16[Et+8]=q,this.uint16[Et+9]=ee,this.uint16[Et+10]=ce,this.uint16[Et+11]=fe,this.uint16[Et+12]=ve,this.uint16[Et+13]=ke,this.uint16[Et+14]=je,this.uint16[Et+15]=Ue,this.uint16[Et+16]=Qe,this.uint16[Et+17]=Ze,this.uint16[Et+18]=tt,this.uint16[Et+19]=ot,this.uint16[Et+20]=mt,this.uint16[Et+21]=Dt,this.uint16[Et+22]=Ut,this.uint32[nn+12]=jt,this.float32[nn+13]=Rt,this.float32[nn+14]=kt,this.float32[nn+15]=Bt,this.float32[nn+16]=Ot,n}}Gh.prototype.bytesPerElement=68,St("StructArrayLayout8i15ui1ul4f68",Gh);class dc extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}dc.prototype.bytesPerElement=4,St("StructArrayLayout1f4",dc);class Nn extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const _=4*n;return this.uint32[2*n+0]=s,this.uint16[_+2]=h,this.uint16[_+3]=p,n}}Nn.prototype.bytesPerElement=8,St("StructArrayLayout1ul2ui8",Nn);class g extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.uint16[p+0]=s,this.uint16[p+1]=h,n}}g.prototype.bytesPerElement=4,St("StructArrayLayout2ui4",g);class r extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}r.prototype.bytesPerElement=2,St("StructArrayLayout1ui2",r);class u extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,p)}emplace(n,s,h,p,_){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=_,n}}u.prototype.bytesPerElement=16,St("StructArrayLayout4f16",u);class d extends ac{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new E(this.anchorPointX,this.anchorPointY)}}d.prototype.size=20;class m extends $h{get(n){return new d(this,n)}}St("CollisionBoxArray",m);class v extends ac{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}v.prototype.size=48;class C extends fc{get(n){return new v(this,n)}}St("PlacedSymbolArray",C);class A extends ac{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}A.prototype.size=68;class k extends Gh{get(n){return new A(this,n)}}St("SymbolInstanceArray",k);class j extends dc{getoffsetX(n){return this.float32[1*n+0]}}St("GlyphOffsetArray",j);class H extends lc{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}St("SymbolLineVertexArray",H);class K extends ac{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}K.prototype.size=8;class he extends Nn{get(n){return new K(this,n)}}St("FeatureIndexArray",he);class Ie extends hu{}class Ce extends hu{}class Le extends hu{}class Me extends uc{}class Ke extends fu{}class nt extends ul{}class Fe extends du{}class et extends Uh{}class at extends cl{}class ct extends _a{}class ft extends cc{}class xt extends Vh{}class dt extends hc{}class Lt extends g{}const $t=Or([{name:"a_pos",components:2,type:"Int16"}],4),{members:wn}=$t;class It{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,p){let _=this.segments[this.segments.length-1];return n>It.MAX_VERTEX_ARRAY_LENGTH&&Z(`Max vertices per segment is ${It.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!_||_.vertexLength+n>It.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==p)&&(_={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(_.sortKey=p),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,p){return new It([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function rn(o,n){return 256*(o=G(Math.floor(o),0,255))+G(Math.floor(n),0,255)}It.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,St("SegmentVector",It);const Ft=Or([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var jn={exports:{}},Rn={exports:{}};Rn.exports=function(o,n){var s,h,p,_,x,T,P,$;for(h=o.length-(s=3&o.length),p=n,x=3432918353,T=461845907,$=0;$<h;)P=255&o.charCodeAt($)|(255&o.charCodeAt(++$))<<8|(255&o.charCodeAt(++$))<<16|(255&o.charCodeAt(++$))<<24,++$,p=27492+(65535&(_=5*(65535&(p=(p^=P=(65535&(P=(P=(65535&P)*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*T+(((P>>>16)*T&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(P=0,s){case 3:P^=(255&o.charCodeAt($+2))<<16;case 2:P^=(255&o.charCodeAt($+1))<<8;case 1:p^=P=(65535&(P=(P=(65535&(P^=255&o.charCodeAt($)))*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*T+(((P>>>16)*T&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var Cn=Rn.exports,hn={exports:{}};hn.exports=function(o,n){for(var s,h=o.length,p=n^h,_=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(_)|(255&o.charCodeAt(++_))<<8|(255&o.charCodeAt(++_))<<16|(255&o.charCodeAt(++_))<<24))+((1540483477*(s>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++_;switch(h){case 3:p^=(255&o.charCodeAt(_+2))<<16;case 2:p^=(255&o.charCodeAt(_+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(_)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var fr=Cn,ti=hn.exports;jn.exports=fr,jn.exports.murmur3=fr,jn.exports.murmur2=ti;var Ar=b(jn.exports);class Xr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,p){this.ids.push(Bi(n)),this.positions.push(s,h,p)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Bi(n);let h=0,p=this.ids.length-1;for(;h<p;){const x=h+p>>1;this.ids[x]>=s?p=x:h=x+1}const _=[];for(;this.ids[h]===s;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(n,s){const h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return So(h,p,0,h.length-1),s&&s.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){const s=new Xr;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Bi(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Ar(String(o))}function So(o,n,s,h){for(;s<h;){const p=o[s+h>>1];let _=s-1,x=h+1;for(;;){do _++;while(o[_]<p);do x--;while(o[x]>p);if(_>=x)break;To(o,_,x),To(n,3*_,3*x),To(n,3*_+1,3*x+1),To(n,3*_+2,3*x+2)}x-s<h-x?(So(o,n,s,x),s=x+1):(So(o,n,x+1,h),h=x)}}function To(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}St("FeaturePositionMap",Xr);class mi{constructor(n,s){this.gl=n.gl,this.location=s}}class Wo extends mi{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class pu extends mi{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class si extends mi{constructor(n,s){super(n,s),this.current=dn.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const qr=new Float32Array(16);function Un(o){return[rn(255*o.r,255*o.g),rn(255*o.b,255*o.a)]}class Nr{constructor(n,s,h){this.value=n,this.uniformNames=s.map(p=>`u_${p}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new si(n,s):new Wo(n,s)}}class Kr{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,p){const _=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&n.set(_)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new pu(n,s):new Wo(n,s)}}class Zn{constructor(n,s,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,s,h,p,_){const x=this.paintVertexArray.length,T=this.expression.evaluate(new lr(0),s,{},p,[],_);this.paintVertexArray.resize(n),this._setPaintValue(x,n,T)}updatePaintArray(n,s,h,p){const _=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,s,_)}_setPaintValue(n,s,h){if(this.type==="color"){const p=Un(h);for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,p[0],p[1])}else{for(let p=n;p<s;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ur{constructor(n,s,h,p,_,x){this.expression=n,this.uniformNames=s.map(T=>`u_${T}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(T=>({name:`a_${T}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,p,_){const x=this.expression.evaluate(new lr(this.zoom),s,{},p,[],_),T=this.expression.evaluate(new lr(this.zoom+1),s,{},p,[],_),P=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(P,n,x,T)}updatePaintArray(n,s,h,p){const _=this.expression.evaluate({zoom:this.zoom},h,p),x=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,s,_,x)}_setPaintValue(n,s,h,p){if(this.type==="color"){const _=Un(h),x=Un(p);for(let T=n;T<s;T++)this.paintVertexArray.emplace(T,_[0],_[1],x[0],x[1])}else{for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=G(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,s,h){return new Wo(n,s)}}class Ni{constructor(n,s,h,p,_,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(n,s,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,p,_){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(n,s,h,p){if(!p||!h)return;const{min:_,mid:x,max:T}=h,P=p[_],$=p[x],q=p[T];if(P&&$&&q)for(let ee=n;ee<s;ee++)this.zoomInPaintVertexArray.emplace(ee,$.tl[0],$.tl[1],$.br[0],$.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],$.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(ee,$.tl[0],$.tl[1],$.br[0],$.br[1],q.tl[0],q.tl[1],q.br[0],q.br[1],$.pixelRatio,q.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Ft.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Ft.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class pc{constructor(n,s,h){this.binders={},this._buffers=[];const p=[];for(const _ in n.paint._values){if(!h(_))continue;const x=n.paint.get(_);if(!(x instanceof Vo&&us(x.property.specification)))continue;const T=Fg(_,n.type),P=x.value,$=x.property.specification.type,q=x.property.useIntegerZoom,ee=x.property.specification["property-type"],ce=ee==="cross-faded"||ee==="cross-faded-data-driven";if(P.kind==="constant")this.binders[_]=ce?new Kr(P.value,T):new Nr(P.value,T,$),p.push(`/u_${_}`);else if(P.kind==="source"||ce){const fe=Dd(_,$,"source");this.binders[_]=ce?new Ni(P,$,q,s,fe,n.id):new Zn(P,T,$,fe),p.push(`/a_${_}`)}else{const fe=Dd(_,$,"composite");this.binders[_]=new Ur(P,T,$,q,s,fe),p.push(`/z_${_}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Zn||s instanceof Ur?s.maxValue:0}populatePaintArrays(n,s,h,p,_){for(const x in this.binders){const T=this.binders[x];(T instanceof Zn||T instanceof Ur||T instanceof Ni)&&T.populatePaintArray(n,s,h,p,_)}}setConstantPatternPositions(n,s){for(const h in this.binders){const p=this.binders[h];p instanceof Kr&&p.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,p,_){let x=!1;for(const T in n){const P=s.getPositions(T);for(const $ of P){const q=h.feature($.index);for(const ee in this.binders){const ce=this.binders[ee];if((ce instanceof Zn||ce instanceof Ur||ce instanceof Ni)&&ce.expression.isStateDependent===!0){const fe=p.paint.get(ee);ce.expression=fe.value,ce.updatePaintArray($.start,$.end,q,n[T],_),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Nr||h instanceof Kr)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Zn||h instanceof Ur)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof Ni)for(let p=0;p<Ft.members.length;p++)n.push(Ft.members[p].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Nr||h instanceof Kr||h instanceof Ur)for(const p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const p in this.binders){const _=this.binders[p];if(_ instanceof Nr||_ instanceof Kr||_ instanceof Ur){for(const x of _.uniformNames)if(s[x]){const T=_.getBinding(n,s[x],x);h.push({name:x,property:p,binding:T})}}}return h}setUniforms(n,s,h,p){for(const{name:_,property:x,binding:T}of s)this.binders[x].setUniform(T,p,h.get(x),_)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof Ni){const p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof Zn||h instanceof Ur)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof Zn||h instanceof Ur||h instanceof Ni)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Zn||s instanceof Ur||s instanceof Ni)&&s.destroy()}}}class hs{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new pc(p,s,h);this.needsUpload=!1,this._featureMap=new Xr,this._bufferOffset=0}populatePaintArrays(n,s,h,p,_,x){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(n,s,p,_,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,p){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(n,this._featureMap,s,_,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Fg(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function Dd(o,n,s){const h={color:{source:ul,composite:u},number:{source:dc,composite:ul}},p=function(_){return{"line-pattern":{source:Fe,composite:Fe},"fill-pattern":{source:Fe,composite:Fe},"fill-extrusion-pattern":{source:Fe,composite:Fe}}[_]}(o);return p&&p[s]||h[n][s]}St("ConstantBinder",Nr),St("CrossFadedConstantBinder",Kr),St("SourceExpressionBinder",Zn),St("CrossFadedCompositeBinder",Ni),St("CompositeExpressionBinder",Ur),St("ProgramConfiguration",pc,{omit:["_buffers"]}),St("ProgramConfigurationSet",hs);const ir=8192,Zh=Math.pow(2,14)-1,mu=-Zh-1;function fs(o){const n=ir/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const p=s[h];for(let _=0;_<p.length;_++){const x=p[_],T=Math.round(x.x*n),P=Math.round(x.y*n);x.x=G(T,mu,Zh),x.y=G(P,mu,Zh),(T<x.x||T>x.x+1||P<x.y||P>x.y+1)&&Z("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function gu(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?fs(o):[]}}function Bd(o,n,s,h,p){o.emplaceBack(2*n+(h+1)/2,2*s+(p+1)/2)}class jg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ce,this.indexArray=new dt,this.segments=new It,this.programConfigurations=new hs(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const p=this.layers[0],_=[];let x=null,T=!1;p.type==="circle"&&(x=p.layout.get("circle-sort-key"),T=!x.isConstant());for(const{feature:P,id:$,index:q,sourceLayerIndex:ee}of n){const ce=this.layers[0]._featureFilter.needGeometry,fe=gu(P,ce);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),fe,h))continue;const ve=T?x.evaluate(fe,{},h):void 0,ke={id:$,properties:P.properties,type:P.type,sourceLayerIndex:ee,index:q,geometry:ce?fe.geometry:fs(P),patterns:{},sortKey:ve};_.push(ke)}T&&_.sort((P,$)=>P.sortKey-$.sortKey);for(const P of _){const{geometry:$,index:q,sourceLayerIndex:ee}=P,ce=n[q].feature;this.addFeature(P,$,q,h),s.featureIndex.insert(ce,$,q,ee,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,wn),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,p){for(const _ of s)for(const x of _){const T=x.x,P=x.y;if(T<0||T>=ir||P<0||P>=ir)continue;const $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),q=$.vertexLength;Bd(this.layoutVertexArray,T,P,-1,-1),Bd(this.layoutVertexArray,T,P,1,-1),Bd(this.layoutVertexArray,T,P,1,1),Bd(this.layoutVertexArray,T,P,-1,1),this.indexArray.emplaceBack(q,q+1,q+2),this.indexArray.emplaceBack(q,q+3,q+2),$.vertexLength+=4,$.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function tx(o,n){for(let s=0;s<o.length;s++)if(mc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(mc(o,n[s]))return!0;return!!Dg(o,n)}function QI(o,n,s){return!!mc(o,n)||!!Bg(n,o,s)}function nx(o,n){if(o.length===1)return ix(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let p=0;p<h.length;p++)if(mc(o,h[p]))return!0}for(let s=0;s<o.length;s++)if(ix(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Dg(o,n[s]))return!0;return!1}function eA(o,n,s){if(o.length>1){if(Dg(o,n))return!0;for(let h=0;h<n.length;h++)if(Bg(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(Bg(o[h],n,s))return!0;return!1}function Dg(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],p=o[s+1];for(let _=0;_<n.length-1;_++)if(tA(h,p,n[_],n[_+1]))return!0}return!1}function tA(o,n,s,h){return X(o,s,h)!==X(n,s,h)&&X(o,n,s)!==X(o,n,h)}function Bg(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(rx(o,n[p-1],n[p])<h)return!0;return!1}function rx(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const p=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(p<0?n:p>1?s:s.sub(n)._mult(p)._add(n))}function ix(o,n){let s,h,p,_=!1;for(let x=0;x<o.length;x++){s=o[x];for(let T=0,P=s.length-1;T<s.length;P=T++)h=s[T],p=s[P],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(_=!_)}return _}function mc(o,n){let s=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){const _=o[h],x=o[p];_.y>n.y!=x.y>n.y&&n.x<(x.x-_.x)*(n.y-_.y)/(x.y-_.y)+_.x&&(s=!s)}return s}function nA(o,n,s){const h=s[0],p=s[2];if(o.x<h.x&&n.x<h.x||o.x>p.x&&n.x>p.x||o.y<h.y&&n.y<h.y||o.y>p.y&&n.y>p.y)return!1;const _=X(o,n,s[0]);return _!==X(o,n,s[1])||_!==X(o,n,s[2])||_!==X(o,n,s[3])}function Wh(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function Nd(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Ud(o,n,s,h,p){if(!n[0]&&!n[1])return o;const _=E.convert(n)._mult(p);s==="viewport"&&_._rotate(-h);const x=[];for(let T=0;T<o.length;T++)x.push(o[T].sub(_));return x}let ox,sx;St("CircleBucket",jg,{omit:["layers"]});var rA={get paint(){return sx=sx||new Ti({"circle-radius":new sn(Ye.paint_circle["circle-radius"]),"circle-color":new sn(Ye.paint_circle["circle-color"]),"circle-blur":new sn(Ye.paint_circle["circle-blur"]),"circle-opacity":new sn(Ye.paint_circle["circle-opacity"]),"circle-translate":new Wt(Ye.paint_circle["circle-translate"]),"circle-translate-anchor":new Wt(Ye.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Wt(Ye.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Wt(Ye.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sn(Ye.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sn(Ye.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sn(Ye.paint_circle["circle-stroke-opacity"])})},get layout(){return ox=ox||new Ti({"circle-sort-key":new sn(Ye.layout_circle["circle-sort-key"])})}},Ci=1e-6,gc=typeof Float32Array<"u"?Float32Array:Array;function Ng(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function ax(o,n,s){var h=n[0],p=n[1],_=n[2],x=n[3],T=n[4],P=n[5],$=n[6],q=n[7],ee=n[8],ce=n[9],fe=n[10],ve=n[11],ke=n[12],je=n[13],Ue=n[14],Qe=n[15],Ze=s[0],tt=s[1],ot=s[2],mt=s[3];return o[0]=Ze*h+tt*T+ot*ee+mt*ke,o[1]=Ze*p+tt*P+ot*ce+mt*je,o[2]=Ze*_+tt*$+ot*fe+mt*Ue,o[3]=Ze*x+tt*q+ot*ve+mt*Qe,o[4]=(Ze=s[4])*h+(tt=s[5])*T+(ot=s[6])*ee+(mt=s[7])*ke,o[5]=Ze*p+tt*P+ot*ce+mt*je,o[6]=Ze*_+tt*$+ot*fe+mt*Ue,o[7]=Ze*x+tt*q+ot*ve+mt*Qe,o[8]=(Ze=s[8])*h+(tt=s[9])*T+(ot=s[10])*ee+(mt=s[11])*ke,o[9]=Ze*p+tt*P+ot*ce+mt*je,o[10]=Ze*_+tt*$+ot*fe+mt*Ue,o[11]=Ze*x+tt*q+ot*ve+mt*Qe,o[12]=(Ze=s[12])*h+(tt=s[13])*T+(ot=s[14])*ee+(mt=s[15])*ke,o[13]=Ze*p+tt*P+ot*ce+mt*je,o[14]=Ze*_+tt*$+ot*fe+mt*Ue,o[15]=Ze*x+tt*q+ot*ve+mt*Qe,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var Hh,iA=ax;function $d(o,n,s){var h=n[0],p=n[1],_=n[2],x=n[3];return o[0]=s[0]*h+s[4]*p+s[8]*_+s[12]*x,o[1]=s[1]*h+s[5]*p+s[9]*_+s[13]*x,o[2]=s[2]*h+s[6]*p+s[10]*_+s[14]*x,o[3]=s[3]*h+s[7]*p+s[11]*_+s[15]*x,o}Hh=new gc(4),gc!=Float32Array&&(Hh[0]=0,Hh[1]=0,Hh[2]=0,Hh[3]=0);class oA extends Go{constructor(n){super(n,rA)}createBucket(n){return new jg(n)}queryRadius(n){const s=n;return Wh("circle-radius",this,s)+Wh("circle-stroke-width",this,s)+Nd(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,p,_,x,T,P){const $=Ud(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,T),q=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),ee=this.paint.get("circle-pitch-alignment")==="map",ce=ee?$:function(ve,ke){return ve.map(je=>lx(je,ke))}($,P),fe=ee?q*T:q;for(const ve of p)for(const ke of ve){const je=ee?ke:lx(ke,P);let Ue=fe;const Qe=$d([],[ke.x,ke.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ue*=Qe[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ue*=x.cameraToCenterDistance/Qe[3]),QI(ce,je,Ue))return!0}return!1}}function lx(o,n){const s=$d([],[o.x,o.y,0,1],n);return new E(s[0]/s[3],s[1]/s[3])}class ux extends jg{}let cx;St("HeatmapBucket",ux,{omit:["layers"]});var sA={get paint(){return cx=cx||new Ti({"heatmap-radius":new sn(Ye.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sn(Ye.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Wt(Ye.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Bh(Ye.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Wt(Ye.paint_heatmap["heatmap-opacity"])})}};function Ug(o,{width:n,height:s},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*s*h}`)}else p=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=p,o}function hx(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const p=Ug({},{width:n,height:s},h);$g(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=p.data}function $g(o,n,s,h,p,_){if(p.width===0||p.height===0)return n;if(p.width>o.width||p.height>o.height||s.x>o.width-p.width||s.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,T=n.data;if(x===T)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<p.height;P++){const $=((s.y+P)*o.width+s.x)*_,q=((h.y+P)*n.width+h.x)*_;for(let ee=0;ee<p.width*_;ee++)T[q+ee]=x[$+ee]}return n}class Xh{constructor(n,s){Ug(this,n,1,s)}resize(n){hx(this,n,1)}clone(){return new Xh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,_){$g(n,s,h,p,_,1)}}class Co{constructor(n,s){Ug(this,n,4,s)}resize(n){hx(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Co({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,_){$g(n,s,h,p,_,4)}}function fx(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new Co({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const _=(x,T,P)=>{n[o.evaluationKey]=P;const $=o.expression.evaluate(n);p.data[x+T+0]=Math.floor(255*$.r/$.a),p.data[x+T+1]=Math.floor(255*$.g/$.a),p.data[x+T+2]=Math.floor(255*$.b/$.a),p.data[x+T+3]=Math.floor(255*$.a)};if(o.clips)for(let x=0,T=0;x<h;++x,T+=4*s)for(let P=0,$=0;P<s;P++,$+=4){const q=P/(s-1),{start:ee,end:ce}=o.clips[x];_(T,$,ee*(1-q)+ce*q)}else for(let x=0,T=0;x<s;x++,T+=4)_(0,T,x/(s-1));return p}St("AlphaImage",Xh),St("RGBAImage",Co);class aA extends Go{createBucket(n){return new ux(n)}constructor(n){super(n,sA),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=fx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let dx;var lA={get paint(){return dx=dx||new Ti({"hillshade-illumination-direction":new Wt(Ye.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Wt(Ye.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Wt(Ye.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Wt(Ye.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Wt(Ye.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Wt(Ye.paint_hillshade["hillshade-accent-color"])})}};class uA extends Go{constructor(n){super(n,lA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const cA=Or([{name:"a_pos",components:2,type:"Int16"}],4),{members:hA}=cA;var Vg={exports:{}};function Vd(o,n,s){s=s||2;var h,p,_,x,T,P,$,q=n&&n.length,ee=q?n[0]*s:o.length,ce=px(o,0,ee,s,!0),fe=[];if(!ce||ce.next===ce.prev)return fe;if(q&&(ce=function(ke,je,Ue,Qe){var Ze,tt,ot,mt=[];for(Ze=0,tt=je.length;Ze<tt;Ze++)(ot=px(ke,je[Ze]*Qe,Ze<tt-1?je[Ze+1]*Qe:ke.length,Qe,!1))===ot.next&&(ot.steiner=!0),mt.push(_A(ot));for(mt.sort(gA),Ze=0;Ze<mt.length;Ze++)Ue=yA(mt[Ze],Ue);return Ue}(o,n,ce,s)),o.length>80*s){h=_=o[0],p=x=o[1];for(var ve=s;ve<ee;ve+=s)(T=o[ve])<h&&(h=T),(P=o[ve+1])<p&&(p=P),T>_&&(_=T),P>x&&(x=P);$=($=Math.max(_-h,x-p))!==0?32767/$:0}return qh(ce,fe,s,h,p,$,0),fe}function px(o,n,s,h,p){var _,x;if(p===Wg(o,n,s,h)>0)for(_=n;_<s;_+=h)x=yx(_,o[_],o[_+1],x);else for(_=s-h;_>=n;_-=h)x=yx(_,o[_],o[_+1],x);return x&&Gd(x,x.next)&&(Yh(x),x=x.next),x}function yu(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!Gd(h,h.next)&&Pr(h.prev,h,h.next)!==0)h=h.next;else{if(Yh(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function qh(o,n,s,h,p,_,x){if(o){!x&&_&&function(q,ee,ce,fe){var ve=q;do ve.z===0&&(ve.z=Gg(ve.x,ve.y,ee,ce,fe)),ve.prevZ=ve.prev,ve.nextZ=ve.next,ve=ve.next;while(ve!==q);ve.prevZ.nextZ=null,ve.prevZ=null,function(ke){var je,Ue,Qe,Ze,tt,ot,mt,Dt,Ut=1;do{for(Ue=ke,ke=null,tt=null,ot=0;Ue;){for(ot++,Qe=Ue,mt=0,je=0;je<Ut&&(mt++,Qe=Qe.nextZ);je++);for(Dt=Ut;mt>0||Dt>0&&Qe;)mt!==0&&(Dt===0||!Qe||Ue.z<=Qe.z)?(Ze=Ue,Ue=Ue.nextZ,mt--):(Ze=Qe,Qe=Qe.nextZ,Dt--),tt?tt.nextZ=Ze:ke=Ze,Ze.prevZ=tt,tt=Ze;Ue=Qe}tt.nextZ=null,Ut*=2}while(ot>1)}(ve)}(o,h,p,_);for(var T,P,$=o;o.prev!==o.next;)if(T=o.prev,P=o.next,_?dA(o,h,p,_):fA(o))n.push(T.i/s|0),n.push(o.i/s|0),n.push(P.i/s|0),Yh(o),o=P.next,$=P.next;else if((o=P)===$){x?x===1?qh(o=pA(yu(o),n,s),n,s,h,p,_,2):x===2&&mA(o,n,s,h,p,_):qh(yu(o),n,s,h,p,_,1);break}}}function fA(o){var n=o.prev,s=o,h=o.next;if(Pr(n,s,h)>=0)return!1;for(var p=n.x,_=s.x,x=h.x,T=n.y,P=s.y,$=h.y,q=p<_?p<x?p:x:_<x?_:x,ee=T<P?T<$?T:$:P<$?P:$,ce=p>_?p>x?p:x:_>x?_:x,fe=T>P?T>$?T:$:P>$?P:$,ve=h.next;ve!==n;){if(ve.x>=q&&ve.x<=ce&&ve.y>=ee&&ve.y<=fe&&yc(p,T,_,P,x,$,ve.x,ve.y)&&Pr(ve.prev,ve,ve.next)>=0)return!1;ve=ve.next}return!0}function dA(o,n,s,h){var p=o.prev,_=o,x=o.next;if(Pr(p,_,x)>=0)return!1;for(var T=p.x,P=_.x,$=x.x,q=p.y,ee=_.y,ce=x.y,fe=T<P?T<$?T:$:P<$?P:$,ve=q<ee?q<ce?q:ce:ee<ce?ee:ce,ke=T>P?T>$?T:$:P>$?P:$,je=q>ee?q>ce?q:ce:ee>ce?ee:ce,Ue=Gg(fe,ve,n,s,h),Qe=Gg(ke,je,n,s,h),Ze=o.prevZ,tt=o.nextZ;Ze&&Ze.z>=Ue&&tt&&tt.z<=Qe;){if(Ze.x>=fe&&Ze.x<=ke&&Ze.y>=ve&&Ze.y<=je&&Ze!==p&&Ze!==x&&yc(T,q,P,ee,$,ce,Ze.x,Ze.y)&&Pr(Ze.prev,Ze,Ze.next)>=0||(Ze=Ze.prevZ,tt.x>=fe&&tt.x<=ke&&tt.y>=ve&&tt.y<=je&&tt!==p&&tt!==x&&yc(T,q,P,ee,$,ce,tt.x,tt.y)&&Pr(tt.prev,tt,tt.next)>=0))return!1;tt=tt.nextZ}for(;Ze&&Ze.z>=Ue;){if(Ze.x>=fe&&Ze.x<=ke&&Ze.y>=ve&&Ze.y<=je&&Ze!==p&&Ze!==x&&yc(T,q,P,ee,$,ce,Ze.x,Ze.y)&&Pr(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.prevZ}for(;tt&&tt.z<=Qe;){if(tt.x>=fe&&tt.x<=ke&&tt.y>=ve&&tt.y<=je&&tt!==p&&tt!==x&&yc(T,q,P,ee,$,ce,tt.x,tt.y)&&Pr(tt.prev,tt,tt.next)>=0)return!1;tt=tt.nextZ}return!0}function pA(o,n,s){var h=o;do{var p=h.prev,_=h.next.next;!Gd(p,_)&&mx(p,h,h.next,_)&&Kh(p,_)&&Kh(_,p)&&(n.push(p.i/s|0),n.push(h.i/s|0),n.push(_.i/s|0),Yh(h),Yh(h.next),h=o=_),h=h.next}while(h!==o);return yu(h)}function mA(o,n,s,h,p,_){var x=o;do{for(var T=x.next.next;T!==x.prev;){if(x.i!==T.i&&xA(x,T)){var P=gx(x,T);return x=yu(x,x.next),P=yu(P,P.next),qh(x,n,s,h,p,_,0),void qh(P,n,s,h,p,_,0)}T=T.next}x=x.next}while(x!==o)}function gA(o,n){return o.x-n.x}function yA(o,n){var s=function(p,_){var x,T=_,P=p.x,$=p.y,q=-1/0;do{if($<=T.y&&$>=T.next.y&&T.next.y!==T.y){var ee=T.x+($-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(ee<=P&&ee>q&&(q=ee,x=T.x<T.next.x?T:T.next,ee===P))return x}T=T.next}while(T!==_);if(!x)return null;var ce,fe=x,ve=x.x,ke=x.y,je=1/0;T=x;do P>=T.x&&T.x>=ve&&P!==T.x&&yc($<ke?P:q,$,ve,ke,$<ke?q:P,$,T.x,T.y)&&(ce=Math.abs($-T.y)/(P-T.x),Kh(T,p)&&(ce<je||ce===je&&(T.x>x.x||T.x===x.x&&vA(x,T)))&&(x=T,je=ce)),T=T.next;while(T!==fe);return x}(o,n);if(!s)return n;var h=gx(s,o);return yu(h,h.next),yu(s,s.next)}function vA(o,n){return Pr(o.prev,o,n.prev)<0&&Pr(n.next,o,o.next)<0}function Gg(o,n,s,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function _A(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function yc(o,n,s,h,p,_,x,T){return(p-x)*(n-T)>=(o-x)*(_-T)&&(o-x)*(h-T)>=(s-x)*(n-T)&&(s-x)*(_-T)>=(p-x)*(h-T)}function xA(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==h.i&&p.next.i!==h.i&&mx(p,p.next,s,h))return!0;p=p.next}while(p!==s);return!1}(o,n)&&(Kh(o,n)&&Kh(n,o)&&function(s,h){var p=s,_=!1,x=(s.x+h.x)/2,T=(s.y+h.y)/2;do p.y>T!=p.next.y>T&&p.next.y!==p.y&&x<(p.next.x-p.x)*(T-p.y)/(p.next.y-p.y)+p.x&&(_=!_),p=p.next;while(p!==s);return _}(o,n)&&(Pr(o.prev,o,n.prev)||Pr(o,n.prev,n))||Gd(o,n)&&Pr(o.prev,o,o.next)>0&&Pr(n.prev,n,n.next)>0)}function Pr(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function Gd(o,n){return o.x===n.x&&o.y===n.y}function mx(o,n,s,h){var p=Wd(Pr(o,n,s)),_=Wd(Pr(o,n,h)),x=Wd(Pr(s,h,o)),T=Wd(Pr(s,h,n));return p!==_&&x!==T||!(p!==0||!Zd(o,s,n))||!(_!==0||!Zd(o,h,n))||!(x!==0||!Zd(s,o,h))||!(T!==0||!Zd(s,n,h))}function Zd(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function Wd(o){return o>0?1:o<0?-1:0}function Kh(o,n){return Pr(o.prev,o,o.next)<0?Pr(o,n,o.next)>=0&&Pr(o,o.prev,n)>=0:Pr(o,n,o.prev)<0||Pr(o,o.next,n)<0}function gx(o,n){var s=new Zg(o.i,o.x,o.y),h=new Zg(n.i,n.x,n.y),p=o.next,_=n.prev;return o.next=n,n.prev=o,s.next=p,p.prev=s,h.next=s,s.prev=h,_.next=h,h.prev=_,h}function yx(o,n,s,h){var p=new Zg(o,n,s);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function Yh(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Zg(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wg(o,n,s,h){for(var p=0,_=n,x=s-h;_<s;_+=h)p+=(o[x]-o[_])*(o[_+1]+o[x+1]),x=_;return p}Vg.exports=Vd,Vg.exports.default=Vd,Vd.deviation=function(o,n,s,h){var p=n&&n.length,_=Math.abs(Wg(o,0,p?n[0]*s:o.length,s));if(p)for(var x=0,T=n.length;x<T;x++)_-=Math.abs(Wg(o,n[x]*s,x<T-1?n[x+1]*s:o.length,s));var P=0;for(x=0;x<h.length;x+=3){var $=h[x]*s,q=h[x+1]*s,ee=h[x+2]*s;P+=Math.abs((o[$]-o[ee])*(o[q+1]-o[$+1])-(o[$]-o[q])*(o[ee+1]-o[$+1]))}return _===0&&P===0?0:Math.abs((P-_)/_)},Vd.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,p=0;p<o.length;p++){for(var _=0;_<o[p].length;_++)for(var x=0;x<n;x++)s.vertices.push(o[p][_][x]);p>0&&s.holes.push(h+=o[p-1].length)}return s};var vx=b(Vg.exports);function wA(o,n,s,h,p){_x(o,n,s||0,h||o.length-1,p||bA)}function _x(o,n,s,h,p){for(;h>s;){if(h-s>600){var _=h-s+1,x=n-s+1,T=Math.log(_),P=.5*Math.exp(2*T/3),$=.5*Math.sqrt(T*P*(_-P)/_)*(x-_/2<0?-1:1);_x(o,n,Math.max(s,Math.floor(n-x*P/_+$)),Math.min(h,Math.floor(n+(_-x)*P/_+$)),p)}var q=o[n],ee=s,ce=h;for(Jh(o,s,n),p(o[h],q)>0&&Jh(o,s,h);ee<ce;){for(Jh(o,ee,ce),ee++,ce--;p(o[ee],q)<0;)ee++;for(;p(o[ce],q)>0;)ce--}p(o[s],q)===0?Jh(o,s,ce):Jh(o,++ce,h),ce<=n&&(s=ce+1),n<=ce&&(h=ce-1)}}function Jh(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function bA(o,n){return o<n?-1:o>n?1:0}function Hg(o,n){const s=o.length;if(s<=1)return[o];const h=[];let p,_;for(let x=0;x<s;x++){const T=J(o[x]);T!==0&&(o[x].area=Math.abs(T),_===void 0&&(_=T<0),_===T<0?(p&&h.push(p),p=[o[x]]):p.push(o[x]))}if(p&&h.push(p),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(wA(h[x],n,1,h[x].length-1,EA),h[x]=h[x].slice(0,n));return h}function EA(o,n){return n.area-o.area}function Xg(o,n,s){const h=s.patternDependencies;let p=!1;for(const _ of n){const x=_.paint.get(`${o}-pattern`);x.isConstant()||(p=!0);const T=x.constantOr(null);T&&(p=!0,h[T.to]=!0,h[T.from]=!0)}return p}function qg(o,n,s,h,p){const _=p.patternDependencies;for(const x of n){const T=x.paint.get(`${o}-pattern`).value;if(T.kind!=="constant"){let P=T.evaluate({zoom:h-1},s,{},p.availableImages),$=T.evaluate({zoom:h},s,{},p.availableImages),q=T.evaluate({zoom:h+1},s,{},p.availableImages);P=P&&P.name?P.name:P,$=$&&$.name?$.name:$,q=q&&q.name?q.name:q,_[P]=!0,_[$]=!0,_[q]=!0,s.patterns[x.id]={min:P,mid:$,max:q}}}return s}class Kg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Le,this.indexArray=new dt,this.indexArray2=new Lt,this.programConfigurations=new hs(n.layers,n.zoom),this.segments=new It,this.segments2=new It,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Xg("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),_=!p.isConstant(),x=[];for(const{feature:T,id:P,index:$,sourceLayerIndex:q}of n){const ee=this.layers[0]._featureFilter.needGeometry,ce=gu(T,ee);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),ce,h))continue;const fe=_?p.evaluate(ce,{},h,s.availableImages):void 0,ve={id:P,properties:T.properties,type:T.type,sourceLayerIndex:q,index:$,geometry:ee?ce.geometry:fs(T),patterns:{},sortKey:fe};x.push(ve)}_&&x.sort((T,P)=>T.sortKey-P.sortKey);for(const T of x){const{geometry:P,index:$,sourceLayerIndex:q}=T;if(this.hasPattern){const ee=qg("fill",this.layers,T,this.zoom,s);this.patternFeatures.push(ee)}else this.addFeature(T,P,$,h,{});s.featureIndex.insert(n[$].feature,P,$,q,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,hA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,p,_){for(const x of Hg(s,500)){let T=0;for(const fe of x)T+=fe.length;const P=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),$=P.vertexLength,q=[],ee=[];for(const fe of x){if(fe.length===0)continue;fe!==x[0]&&ee.push(q.length/2);const ve=this.segments2.prepareSegment(fe.length,this.layoutVertexArray,this.indexArray2),ke=ve.vertexLength;this.layoutVertexArray.emplaceBack(fe[0].x,fe[0].y),this.indexArray2.emplaceBack(ke+fe.length-1,ke),q.push(fe[0].x),q.push(fe[0].y);for(let je=1;je<fe.length;je++)this.layoutVertexArray.emplaceBack(fe[je].x,fe[je].y),this.indexArray2.emplaceBack(ke+je-1,ke+je),q.push(fe[je].x),q.push(fe[je].y);ve.vertexLength+=fe.length,ve.primitiveLength+=fe.length}const ce=vx(q,ee);for(let fe=0;fe<ce.length;fe+=3)this.indexArray.emplaceBack($+ce[fe],$+ce[fe+1],$+ce[fe+2]);P.vertexLength+=T,P.primitiveLength+=ce.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,p)}}let xx,wx;St("FillBucket",Kg,{omit:["layers","patternFeatures"]});var SA={get paint(){return wx=wx||new Ti({"fill-antialias":new Wt(Ye.paint_fill["fill-antialias"]),"fill-opacity":new sn(Ye.paint_fill["fill-opacity"]),"fill-color":new sn(Ye.paint_fill["fill-color"]),"fill-outline-color":new sn(Ye.paint_fill["fill-outline-color"]),"fill-translate":new Wt(Ye.paint_fill["fill-translate"]),"fill-translate-anchor":new Wt(Ye.paint_fill["fill-translate-anchor"]),"fill-pattern":new sc(Ye.paint_fill["fill-pattern"])})},get layout(){return xx=xx||new Ti({"fill-sort-key":new sn(Ye.layout_fill["fill-sort-key"])})}};class TA extends Go{constructor(n){super(n,SA)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Kg(n)}queryRadius(){return Nd(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,p,_,x,T){return nx(Ud(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,T),p)}isTileClipped(){return!0}}const CA=Or([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),IA=Or([{name:"a_centroid",components:2,type:"Int16"}],4),{members:AA}=CA;var hl={},PA=w,bx=vc;function vc(o,n,s,h,p){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields(MA,this,n)}function MA(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,p){for(var _=h.readVarint()+h.pos;h.pos<_;){var x=p._keys[h.readVarint()],T=p._values[h.readVarint()];p.properties[x]=T}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function kA(o){for(var n,s,h=0,p=0,_=o.length,x=_-1;p<_;x=p++)h+=((s=o[x]).x-(n=o[p]).x)*(n.y+s.y);return h}vc.types=["Unknown","Point","LineString","Polygon"],vc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,p=0,_=0,x=0,T=[];o.pos<s;){if(p<=0){var P=o.readVarint();h=7&P,p=P>>3}if(p--,h===1||h===2)_+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&T.push(n),n=[]),n.push(new PA(_,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&T.push(n),T},vc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,p=0,_=0,x=1/0,T=-1/0,P=1/0,$=-1/0;o.pos<n;){if(h<=0){var q=o.readVarint();s=7&q,h=q>>3}if(h--,s===1||s===2)(p+=o.readSVarint())<x&&(x=p),p>T&&(T=p),(_+=o.readSVarint())<P&&(P=_),_>$&&($=_);else if(s!==7)throw new Error("unknown command "+s)}return[x,P,T,$]},vc.prototype.toGeoJSON=function(o,n,s){var h,p,_=this.extent*Math.pow(2,s),x=this.extent*o,T=this.extent*n,P=this.loadGeometry(),$=vc.types[this.type];function q(fe){for(var ve=0;ve<fe.length;ve++){var ke=fe[ve];fe[ve]=[360*(ke.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(ke.y+T)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var ee=[];for(h=0;h<P.length;h++)ee[h]=P[h][0];q(P=ee);break;case 2:for(h=0;h<P.length;h++)q(P[h]);break;case 3:for(P=function(fe){var ve=fe.length;if(ve<=1)return[fe];for(var ke,je,Ue=[],Qe=0;Qe<ve;Qe++){var Ze=kA(fe[Qe]);Ze!==0&&(je===void 0&&(je=Ze<0),je===Ze<0?(ke&&Ue.push(ke),ke=[fe[Qe]]):ke.push(fe[Qe]))}return ke&&Ue.push(ke),Ue}(P),h=0;h<P.length;h++)for(p=0;p<P[h].length;p++)q(P[h][p])}P.length===1?P=P[0]:$="Multi"+$;var ce={type:"Feature",geometry:{type:$,coordinates:P},properties:this.properties};return"id"in this&&(ce.id=this.id),ce};var zA=bx,Ex=Sx;function Sx(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(LA,this,n),this.length=this._features.length}function LA(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var p=null,_=h.readVarint()+h.pos;h.pos<_;){var x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return p}(s))}Sx.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new zA(this._pbf,n,this.extent,this._keys,this._values)};var RA=Ex;function OA(o,n,s){if(o===3){var h=new RA(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}hl.VectorTile=function(o,n){this.layers=o.readFields(OA,{},n)},hl.VectorTileFeature=bx,hl.VectorTileLayer=Ex;const FA=hl.VectorTileFeature.types,Yg=Math.pow(2,13);function Qh(o,n,s,h,p,_,x,T){o.emplaceBack(n,s,2*Math.floor(h*Yg)+x,p*Yg*2,_*Yg*2,Math.round(T))}class Jg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Me,this.centroidVertexArray=new Ie,this.indexArray=new dt,this.programConfigurations=new hs(n.layers,n.zoom),this.segments=new It,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=Xg("fill-extrusion",this.layers,s);for(const{feature:p,id:_,index:x,sourceLayerIndex:T}of n){const P=this.layers[0]._featureFilter.needGeometry,$=gu(p,P);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),$,h))continue;const q={id:_,sourceLayerIndex:T,index:x,geometry:P?$.geometry:fs(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(qg("fill-extrusion",this.layers,q,this.zoom,s)):this.addFeature(q,q.geometry,x,h,{}),s.featureIndex.insert(p,q.geometry,x,T,this.index,!0)}}addFeatures(n,s,h){for(const p of this.features){const{geometry:_}=p;this.addFeature(p,_,p.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,AA),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,IA.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,p,_){const x={x:0,y:0,vertexCount:0};for(const T of Hg(s,500)){let P=0;for(const ve of T)P+=ve.length;let $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ve of T){if(ve.length===0||DA(ve))continue;let ke=0;for(let je=0;je<ve.length;je++){const Ue=ve[je];if(je>=1){const Qe=ve[je-1];if(!jA(Ue,Qe)){$.vertexLength+4>It.MAX_VERTEX_ARRAY_LENGTH&&($=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ze=Ue.sub(Qe)._perp()._unit(),tt=Qe.dist(Ue);ke+tt>32768&&(ke=0),Qh(this.layoutVertexArray,Ue.x,Ue.y,Ze.x,Ze.y,0,0,ke),Qh(this.layoutVertexArray,Ue.x,Ue.y,Ze.x,Ze.y,0,1,ke),x.x+=2*Ue.x,x.y+=2*Ue.y,x.vertexCount+=2,ke+=tt,Qh(this.layoutVertexArray,Qe.x,Qe.y,Ze.x,Ze.y,0,0,ke),Qh(this.layoutVertexArray,Qe.x,Qe.y,Ze.x,Ze.y,0,1,ke),x.x+=2*Qe.x,x.y+=2*Qe.y,x.vertexCount+=2;const ot=$.vertexLength;this.indexArray.emplaceBack(ot,ot+2,ot+1),this.indexArray.emplaceBack(ot+1,ot+2,ot+3),$.vertexLength+=4,$.primitiveLength+=2}}}}if($.vertexLength+P>It.MAX_VERTEX_ARRAY_LENGTH&&($=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),FA[n.type]!=="Polygon")continue;const q=[],ee=[],ce=$.vertexLength;for(const ve of T)if(ve.length!==0){ve!==T[0]&&ee.push(q.length/2);for(let ke=0;ke<ve.length;ke++){const je=ve[ke];Qh(this.layoutVertexArray,je.x,je.y,0,0,1,1,0),x.x+=je.x,x.y+=je.y,x.vertexCount+=1,q.push(je.x),q.push(je.y)}}const fe=vx(q,ee);for(let ve=0;ve<fe.length;ve+=3)this.indexArray.emplaceBack(ce+fe[ve],ce+fe[ve+2],ce+fe[ve+1]);$.primitiveLength+=fe.length/3,$.vertexLength+=P}for(let T=0;T<x.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,p)}}function jA(o,n){return o.x===n.x&&(o.x<0||o.x>ir)||o.y===n.y&&(o.y<0||o.y>ir)}function DA(o){return o.every(n=>n.x<0)||o.every(n=>n.x>ir)||o.every(n=>n.y<0)||o.every(n=>n.y>ir)}let Tx;St("FillExtrusionBucket",Jg,{omit:["layers","features"]});var BA={get paint(){return Tx=Tx||new Ti({"fill-extrusion-opacity":new Wt(Ye["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sn(Ye["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Wt(Ye["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Wt(Ye["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new sc(Ye["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sn(Ye["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sn(Ye["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Wt(Ye["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class NA extends Go{constructor(n){super(n,BA)}createBucket(n){return new Jg(n)}queryRadius(){return Nd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,p,_,x,T,P){const $=Ud(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,T),q=this.paint.get("fill-extrusion-height").evaluate(s,h),ee=this.paint.get("fill-extrusion-base").evaluate(s,h),ce=function(ve,ke,je,Ue){const Qe=[];for(const Ze of ve){const tt=[Ze.x,Ze.y,0,1];$d(tt,tt,ke),Qe.push(new E(tt[0]/tt[3],tt[1]/tt[3]))}return Qe}($,P),fe=function(ve,ke,je,Ue){const Qe=[],Ze=[],tt=Ue[8]*ke,ot=Ue[9]*ke,mt=Ue[10]*ke,Dt=Ue[11]*ke,Ut=Ue[8]*je,jt=Ue[9]*je,Rt=Ue[10]*je,kt=Ue[11]*je;for(const Bt of ve){const Ot=[],Et=[];for(const nn of Bt){const Ht=nn.x,bn=nn.y,or=Ue[0]*Ht+Ue[4]*bn+Ue[12],ur=Ue[1]*Ht+Ue[5]*bn+Ue[13],$r=Ue[2]*Ht+Ue[6]*bn+Ue[14],co=Ue[3]*Ht+Ue[7]*bn+Ue[15],Ii=$r+mt,Er=co+Dt,Jr=or+Ut,ai=ur+jt,$i=$r+Rt,Ai=co+kt,Fr=new E((or+tt)/Er,(ur+ot)/Er);Fr.z=Ii/Er,Ot.push(Fr);const Vr=new E(Jr/Ai,ai/Ai);Vr.z=$i/Ai,Et.push(Vr)}Qe.push(Ot),Ze.push(Et)}return[Qe,Ze]}(p,ee,q,P);return function(ve,ke,je){let Ue=1/0;nx(je,ke)&&(Ue=Cx(je,ke[0]));for(let Qe=0;Qe<ke.length;Qe++){const Ze=ke[Qe],tt=ve[Qe];for(let ot=0;ot<Ze.length-1;ot++){const mt=Ze[ot],Dt=[mt,Ze[ot+1],tt[ot+1],tt[ot],mt];tx(je,Dt)&&(Ue=Math.min(Ue,Cx(je,Dt)))}}return Ue!==1/0&&Ue}(fe[0],fe[1],ce)}}function ef(o,n){return o.x*n.x+o.y*n.y}function Cx(o,n){if(o.length===1){let s=0;const h=n[s++];let p;for(;!p||h.equals(p);)if(p=n[s++],!p)return 1/0;for(;s<n.length;s++){const _=n[s],x=o[0],T=p.sub(h),P=_.sub(h),$=x.sub(h),q=ef(T,T),ee=ef(T,P),ce=ef(P,P),fe=ef($,T),ve=ef($,P),ke=q*ce-ee*ee,je=(ce*fe-ee*ve)/ke,Ue=(q*ve-ee*fe)/ke,Qe=h.z*(1-je-Ue)+p.z*je+_.z*Ue;if(isFinite(Qe))return Qe}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const UA=Or([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:$A}=UA,VA=Or([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:GA}=VA,ZA=hl.VectorTileFeature.types,WA=Math.cos(Math.PI/180*37.5),Ix=Math.pow(2,14)/.5;class Qg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Ke,this.layoutVertexArray2=new nt,this.indexArray=new dt,this.programConfigurations=new hs(n.layers,n.zoom),this.segments=new It,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Xg("line",this.layers,s);const p=this.layers[0].layout.get("line-sort-key"),_=!p.isConstant(),x=[];for(const{feature:T,id:P,index:$,sourceLayerIndex:q}of n){const ee=this.layers[0]._featureFilter.needGeometry,ce=gu(T,ee);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),ce,h))continue;const fe=_?p.evaluate(ce,{},h):void 0,ve={id:P,properties:T.properties,type:T.type,sourceLayerIndex:q,index:$,geometry:ee?ce.geometry:fs(T),patterns:{},sortKey:fe};x.push(ve)}_&&x.sort((T,P)=>T.sortKey-P.sortKey);for(const T of x){const{geometry:P,index:$,sourceLayerIndex:q}=T;if(this.hasPattern){const ee=qg("line",this.layers,T,this.zoom,s);this.patternFeatures.push(ee)}else this.addFeature(T,P,$,h,{});s.featureIndex.insert(n[$].feature,P,$,q,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,GA)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,$A),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,p,_){const x=this.layers[0].layout,T=x.get("line-join").evaluate(n,{}),P=x.get("line-cap"),$=x.get("line-miter-limit"),q=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const ee of s)this.addLine(ee,n,T,P,$,q);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,p)}addLine(n,s,h,p,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ue=0;Ue<n.length-1;Ue++)this.totalDistance+=n[Ue].dist(n[Ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=ZA[s.type]==="Polygon";let P=n.length;for(;P>=2&&n[P-1].equals(n[P-2]);)P--;let $=0;for(;$<P-1&&n[$].equals(n[$+1]);)$++;if(P<(T?3:2))return;h==="bevel"&&(_=1.05);const q=this.overscaling<=16?15*ir/(512*this.overscaling):0,ee=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let ce,fe,ve,ke,je;this.e1=this.e2=-1,T&&(ce=n[P-2],je=n[$].sub(ce)._unit()._perp());for(let Ue=$;Ue<P;Ue++){if(ve=Ue===P-1?T?n[$+1]:void 0:n[Ue+1],ve&&n[Ue].equals(ve))continue;je&&(ke=je),ce&&(fe=ce),ce=n[Ue],je=ve?ve.sub(ce)._unit()._perp():ke,ke=ke||je;let Qe=ke.add(je);Qe.x===0&&Qe.y===0||Qe._unit();const Ze=ke.x*je.x+ke.y*je.y,tt=Qe.x*je.x+Qe.y*je.y,ot=tt!==0?1/tt:1/0,mt=2*Math.sqrt(2-2*tt),Dt=tt<WA&&fe&&ve,Ut=ke.x*je.y-ke.y*je.x>0;if(Dt&&Ue>$){const kt=ce.dist(fe);if(kt>2*q){const Bt=ce.sub(ce.sub(fe)._mult(q/kt)._round());this.updateDistance(fe,Bt),this.addCurrentVertex(Bt,ke,0,0,ee),fe=Bt}}const jt=fe&&ve;let Rt=jt?h:T?"butt":p;if(jt&&Rt==="round"&&(ot<x?Rt="miter":ot<=2&&(Rt="fakeround")),Rt==="miter"&&ot>_&&(Rt="bevel"),Rt==="bevel"&&(ot>2&&(Rt="flipbevel"),ot<_&&(Rt="miter")),fe&&this.updateDistance(fe,ce),Rt==="miter")Qe._mult(ot),this.addCurrentVertex(ce,Qe,0,0,ee);else if(Rt==="flipbevel"){if(ot>100)Qe=je.mult(-1);else{const kt=ot*ke.add(je).mag()/ke.sub(je).mag();Qe._perp()._mult(kt*(Ut?-1:1))}this.addCurrentVertex(ce,Qe,0,0,ee),this.addCurrentVertex(ce,Qe.mult(-1),0,0,ee)}else if(Rt==="bevel"||Rt==="fakeround"){const kt=-Math.sqrt(ot*ot-1),Bt=Ut?kt:0,Ot=Ut?0:kt;if(fe&&this.addCurrentVertex(ce,ke,Bt,Ot,ee),Rt==="fakeround"){const Et=Math.round(180*mt/Math.PI/20);for(let nn=1;nn<Et;nn++){let Ht=nn/Et;if(Ht!==.5){const or=Ht-.5;Ht+=Ht*or*(Ht-1)*((1.0904+Ze*(Ze*(3.55645-1.43519*Ze)-3.2452))*or*or+(.848013+Ze*(.215638*Ze-1.06021)))}const bn=je.sub(ke)._mult(Ht)._add(ke)._unit()._mult(Ut?-1:1);this.addHalfVertex(ce,bn.x,bn.y,!1,Ut,0,ee)}}ve&&this.addCurrentVertex(ce,je,-Bt,-Ot,ee)}else if(Rt==="butt")this.addCurrentVertex(ce,Qe,0,0,ee);else if(Rt==="square"){const kt=fe?1:-1;this.addCurrentVertex(ce,Qe,kt,kt,ee)}else Rt==="round"&&(fe&&(this.addCurrentVertex(ce,ke,0,0,ee),this.addCurrentVertex(ce,ke,1,1,ee,!0)),ve&&(this.addCurrentVertex(ce,je,-1,-1,ee,!0),this.addCurrentVertex(ce,je,0,0,ee)));if(Dt&&Ue<P-1){const kt=ce.dist(ve);if(kt>2*q){const Bt=ce.add(ve.sub(ce)._mult(q/kt)._round());this.updateDistance(ce,Bt),this.addCurrentVertex(Bt,je,0,0,ee),ce=Bt}}}}addCurrentVertex(n,s,h,p,_,x=!1){const T=s.y*p-s.x,P=-s.y-s.x*p;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,_),this.addHalfVertex(n,T,P,x,!0,-p,_),this.distance>Ix/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,p,_,x))}addHalfVertex({x:n,y:s},h,p,_,x,T,P){const $=.5*(this.lineClips?this.scaledDistance*(Ix-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(_?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(T===0?0:T<0?-1:1)|(63&$)<<2,$>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const q=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,q),P.primitiveLength++),x?this.e2=q:this.e1=q}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let Ax,Px;St("LineBucket",Qg,{omit:["layers","patternFeatures"]});var Mx={get paint(){return Px=Px||new Ti({"line-opacity":new sn(Ye.paint_line["line-opacity"]),"line-color":new sn(Ye.paint_line["line-color"]),"line-translate":new Wt(Ye.paint_line["line-translate"]),"line-translate-anchor":new Wt(Ye.paint_line["line-translate-anchor"]),"line-width":new sn(Ye.paint_line["line-width"]),"line-gap-width":new sn(Ye.paint_line["line-gap-width"]),"line-offset":new sn(Ye.paint_line["line-offset"]),"line-blur":new sn(Ye.paint_line["line-blur"]),"line-dasharray":new Dh(Ye.paint_line["line-dasharray"]),"line-pattern":new sc(Ye.paint_line["line-pattern"]),"line-gradient":new Bh(Ye.paint_line["line-gradient"])})},get layout(){return Ax=Ax||new Ti({"line-cap":new Wt(Ye.layout_line["line-cap"]),"line-join":new sn(Ye.layout_line["line-join"]),"line-miter-limit":new Wt(Ye.layout_line["line-miter-limit"]),"line-round-limit":new Wt(Ye.layout_line["line-round-limit"]),"line-sort-key":new sn(Ye.layout_line["line-sort-key"])})}};class HA extends sn{possiblyEvaluate(n,s){return s=new lr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,p){return s=N({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,p)}}let Hd;class XA extends Go{constructor(n){super(n,Mx),this.gradientVersion=0,Hd||(Hd=new HA(Mx.paint.properties["line-width"].specification),Hd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){n==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ls,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=Hd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Qg(n)}queryRadius(n){const s=n,h=kx(Wh("line-width",this,s),Wh("line-gap-width",this,s)),p=Wh("line-offset",this,s);return h/2+Math.abs(p)+Nd(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,p,_,x,T){const P=Ud(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,T),$=T/2*kx(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),q=this.paint.get("line-offset").evaluate(s,h);return q&&(p=function(ee,ce){const fe=[];for(let ve=0;ve<ee.length;ve++){const ke=ee[ve],je=[];for(let Ue=0;Ue<ke.length;Ue++){const Qe=ke[Ue-1],Ze=ke[Ue],tt=ke[Ue+1],ot=Ue===0?new E(0,0):Ze.sub(Qe)._unit()._perp(),mt=Ue===ke.length-1?new E(0,0):tt.sub(Ze)._unit()._perp(),Dt=ot._add(mt)._unit(),Ut=Dt.x*mt.x+Dt.y*mt.y;Ut!==0&&Dt._mult(1/Ut),je.push(Dt._mult(ce)._add(Ze))}fe.push(je)}return fe}(p,q*T)),function(ee,ce,fe){for(let ve=0;ve<ce.length;ve++){const ke=ce[ve];if(ee.length>=3){for(let je=0;je<ke.length;je++)if(mc(ee,ke[je]))return!0}if(eA(ee,ke,fe))return!0}return!1}(P,p,$)}isTileClipped(){return!0}}function kx(o,n){return n>0?n+2*o:o}const qA=Or([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),KA=Or([{name:"a_projected_pos",components:3,type:"Float32"}],4);Or([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const YA=Or([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Or([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const zx=Or([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),JA=Or([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function QA(o,n,s){return o.sections.forEach(h=>{h.text=function(p,_,x){const T=_.layout.get("text-transform").evaluate(x,{});return T==="uppercase"?p=p.toLocaleUpperCase():T==="lowercase"&&(p=p.toLocaleLowerCase()),uo.applyArabicShaping&&(p=uo.applyArabicShaping(p)),p}(h.text,n,s)}),o}Or([{name:"triangle",components:3,type:"Uint16"}]),Or([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Or([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Or([{type:"Float32",name:"offsetX"}]),Or([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const tf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Yr=24,Lx=Yn,Rx=function(o,n,s,h,p){var _,x,T=8*p-h-1,P=(1<<T)-1,$=P>>1,q=-7,ee=s?p-1:0,ce=s?-1:1,fe=o[n+ee];for(ee+=ce,_=fe&(1<<-q)-1,fe>>=-q,q+=T;q>0;_=256*_+o[n+ee],ee+=ce,q-=8);for(x=_&(1<<-q)-1,_>>=-q,q+=h;q>0;x=256*x+o[n+ee],ee+=ce,q-=8);if(_===0)_=1-$;else{if(_===P)return x?NaN:1/0*(fe?-1:1);x+=Math.pow(2,h),_-=$}return(fe?-1:1)*x*Math.pow(2,_-h)},Ox=function(o,n,s,h,p,_){var x,T,P,$=8*_-p-1,q=(1<<$)-1,ee=q>>1,ce=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,fe=h?0:_-1,ve=h?1:-1,ke=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(T=isNaN(n)?1:0,x=q):(x=Math.floor(Math.log(n)/Math.LN2),n*(P=Math.pow(2,-x))<1&&(x--,P*=2),(n+=x+ee>=1?ce/P:ce*Math.pow(2,1-ee))*P>=2&&(x++,P/=2),x+ee>=q?(T=0,x=q):x+ee>=1?(T=(n*P-1)*Math.pow(2,p),x+=ee):(T=n*Math.pow(2,ee-1)*Math.pow(2,p),x=0));p>=8;o[s+fe]=255&T,fe+=ve,T/=256,p-=8);for(x=x<<p|T,$+=p;$>0;o[s+fe]=255&x,fe+=ve,x/=256,$-=8);o[s+fe-ve]|=128*ke};function Yn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Yn.Varint=0,Yn.Fixed64=1,Yn.Bytes=2,Yn.Fixed32=5;var ey=4294967296,Fx=1/ey,jx=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function wa(o){return o.type===Yn.Bytes?o.readVarint()+o.pos:o.pos+1}function _c(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Dx(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var p=s.pos-1;p>=o;p--)s.buf[p+h]=s.buf[p]}function eP(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function tP(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function nP(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function rP(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function iP(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function oP(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function sP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function aP(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function lP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function Xd(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function xc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function Bx(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}Yn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),p=h>>3,_=this.pos;this.type=7&h,o(p,n,this),this.pos===_&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=Xd(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Bx(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Xd(this.buf,this.pos)+Xd(this.buf,this.pos+4)*ey;return this.pos+=8,o},readSFixed64:function(){var o=Xd(this.buf,this.pos)+Bx(this.buf,this.pos+4)*ey;return this.pos+=8,o},readFloat:function(){var o=Rx(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Rx(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(p,_,x){var T,P,$=x.buf;if(T=(112&(P=$[x.pos++]))>>4,P<128||(T|=(127&(P=$[x.pos++]))<<3,P<128)||(T|=(127&(P=$[x.pos++]))<<10,P<128)||(T|=(127&(P=$[x.pos++]))<<17,P<128)||(T|=(127&(P=$[x.pos++]))<<24,P<128)||(T|=(1&(P=$[x.pos++]))<<31,P<128))return _c(p,T,_);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&jx?function(s,h,p){return jx.decode(s.subarray(h,p))}(this.buf,n,o):function(s,h,p){for(var _="",x=h;x<p;){var T,P,$,q=s[x],ee=null,ce=q>239?4:q>223?3:q>191?2:1;if(x+ce>p)break;ce===1?q<128&&(ee=q):ce===2?(192&(T=s[x+1]))==128&&(ee=(31&q)<<6|63&T)<=127&&(ee=null):ce===3?(P=s[x+2],(192&(T=s[x+1]))==128&&(192&P)==128&&((ee=(15&q)<<12|(63&T)<<6|63&P)<=2047||ee>=55296&&ee<=57343)&&(ee=null)):ce===4&&(P=s[x+2],$=s[x+3],(192&(T=s[x+1]))==128&&(192&P)==128&&(192&$)==128&&((ee=(15&q)<<18|(63&T)<<12|(63&P)<<6|63&$)<=65535||ee>=1114112)&&(ee=null)),ee===null?(ee=65533,ce=1):ee>65535&&(ee-=65536,_+=String.fromCharCode(ee>>>10&1023|55296),ee=56320|1023&ee),_+=String.fromCharCode(ee),x+=ce}return _}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Yn.Bytes)return o.push(this.readVarint(n));var s=wa(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Yn.Bytes)return o.push(this.readSVarint());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Yn.Bytes)return o.push(this.readBoolean());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Yn.Bytes)return o.push(this.readFloat());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Yn.Bytes)return o.push(this.readDouble());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Yn.Bytes)return o.push(this.readFixed32());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Yn.Bytes)return o.push(this.readSFixed32());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Yn.Bytes)return o.push(this.readFixed64());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Yn.Bytes)return o.push(this.readSFixed64());var n=wa(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Yn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Yn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Yn.Fixed32)this.pos+=4;else{if(n!==Yn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),xc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),xc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),xc(this.buf,-1&o,this.pos),xc(this.buf,Math.floor(o*Fx),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),xc(this.buf,-1&o,this.pos),xc(this.buf,Math.floor(o*Fx),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(_,x,T){T.buf[T.pos++]=127&_|128,_>>>=7,T.buf[T.pos++]=127&_|128,_>>>=7,T.buf[T.pos++]=127&_|128,_>>>=7,T.buf[T.pos++]=127&_|128,T.buf[T.pos]=127&(_>>>=7)}(h,0,s),function(_,x){var T=(7&_)<<4;x.buf[x.pos++]|=T|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))}(p,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,p,_){for(var x,T,P=0;P<p.length;P++){if((x=p.charCodeAt(P))>55295&&x<57344){if(!T){x>56319||P+1===p.length?(h[_++]=239,h[_++]=191,h[_++]=189):T=x;continue}if(x<56320){h[_++]=239,h[_++]=191,h[_++]=189,T=x;continue}x=T-55296<<10|x-56320|65536,T=null}else T&&(h[_++]=239,h[_++]=191,h[_++]=189,T=null);x<128?h[_++]=x:(x<2048?h[_++]=x>>6|192:(x<65536?h[_++]=x>>12|224:(h[_++]=x>>18|240,h[_++]=x>>12&63|128),h[_++]=x>>6&63|128),h[_++]=63&x|128)}return _}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&Dx(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),Ox(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Ox(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&Dx(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Yn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,eP,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,tP,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,iP,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,nP,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,rP,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,oP,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,sP,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,aP,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,lP,n)},writeBytesField:function(o,n){this.writeTag(o,Yn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Yn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Yn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Yn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Yn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Yn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Yn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Yn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Yn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Yn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var ty=b(Lx);const ny=3;function uP(o,n,s){o===1&&s.readMessage(cP,n)}function cP(o,n,s){if(o===3){const{id:h,bitmap:p,width:_,height:x,left:T,top:P,advance:$}=s.readMessage(hP,{});n.push({id:h,bitmap:new Xh({width:_+2*ny,height:x+2*ny},p),metrics:{width:_,height:x,left:T,top:P,advance:$}})}}function hP(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const Nx=ny;function Ux(o){let n=0,s=0;for(const x of o)n+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,T)=>T.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let p=0,_=0;for(const x of o)for(let T=h.length-1;T>=0;T--){const P=h[T];if(!(x.w>P.w||x.h>P.h)){if(x.x=P.x,x.y=P.y,_=Math.max(_,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===P.w&&x.h===P.h){const $=h.pop();T<h.length&&(h[T]=$)}else x.h===P.h?(P.x+=x.w,P.w-=x.w):x.w===P.w?(P.y+=x.h,P.h-=x.h):(h.push({x:P.x+x.w,y:P.y,w:P.w-x.w,h:x.h}),P.y+=x.h,P.h-=x.h);break}}return{w:p,h:_,fill:n/(p*_)||0}}const Ui=1;class ry{constructor(n,{pixelRatio:s,version:h,stretchX:p,stretchY:_,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=p,this.stretchY=_,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+Ui,this.paddedRect.y+Ui]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ui,this.paddedRect.y+this.paddedRect.h-Ui]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ui)/this.pixelRatio,(this.paddedRect.h-2*Ui)/this.pixelRatio]}}class $x{constructor(n,s){const h={},p={};this.haveRenderCallbacks=[];const _=[];this.addImages(n,h,_),this.addImages(s,p,_);const{w:x,h:T}=Ux(_),P=new Co({width:x||1,height:T||1});for(const $ in n){const q=n[$],ee=h[$].paddedRect;Co.copy(q.data,P,{x:0,y:0},{x:ee.x+Ui,y:ee.y+Ui},q.data)}for(const $ in s){const q=s[$],ee=p[$].paddedRect,ce=ee.x+Ui,fe=ee.y+Ui,ve=q.data.width,ke=q.data.height;Co.copy(q.data,P,{x:0,y:0},{x:ce,y:fe},q.data),Co.copy(q.data,P,{x:0,y:ke-1},{x:ce,y:fe-1},{width:ve,height:1}),Co.copy(q.data,P,{x:0,y:0},{x:ce,y:fe+ke},{width:ve,height:1}),Co.copy(q.data,P,{x:ve-1,y:0},{x:ce-1,y:fe},{width:1,height:ke}),Co.copy(q.data,P,{x:0,y:0},{x:ce+ve,y:fe},{width:1,height:ke})}this.image=P,this.iconPositions=h,this.patternPositions=p}addImages(n,s,h){for(const p in n){const _=n[p],x={x:0,y:0,w:_.data.width+2*Ui,h:_.data.height+2*Ui};h.push(x),s[p]=new ry(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[p,_]=n.tl;h.update(s.data,void 0,{x:p,y:_})}}var fl;St("ImagePosition",ry),St("ImageAtlas",$x),l.WritingMode=void 0,(fl=l.WritingMode||(l.WritingMode={}))[fl.none=0]="none",fl[fl.horizontal=1]="horizontal",fl[fl.vertical=2]="vertical",fl[fl.horizontalOnly=3]="horizontalOnly";const nf=-17;class rf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new rf;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new rf;return s.imageName=n,s}}class wc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new wc;for(let p=0;p<n.sections.length;p++){const _=n.sections[p];_.image?h.addImageSection(_):h.addTextSection(_,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const p=n.charCodeAt(h+1)||null,_=n.charCodeAt(h-1)||null;s+=p&&kd(p)&&!tf[n[h+1]]||_&&kd(_)&&!tf[n[h-1]]||!tf[n[h]]?n[h]:tf[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Kd[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Kd[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new wc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(rf.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void Z("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(rf.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Z("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function qd(o,n,s,h,p,_,x,T,P,$,q,ee,ce,fe,ve,ke){const je=wc.fromFeature(o,p);let Ue;ee===l.WritingMode.vertical&&je.verticalizePunctuation();const{processBidirectionalText:Qe,processStyledBidirectionalText:Ze}=uo;if(Qe&&je.sections.length===1){Ue=[];const mt=Qe(je.toString(),iy(je,$,_,n,h,fe,ve));for(const Dt of mt){const Ut=new wc;Ut.text=Dt,Ut.sections=je.sections;for(let jt=0;jt<Dt.length;jt++)Ut.sectionIndex.push(0);Ue.push(Ut)}}else if(Ze){Ue=[];const mt=Ze(je.text,je.sectionIndex,iy(je,$,_,n,h,fe,ve));for(const Dt of mt){const Ut=new wc;Ut.text=Dt[0],Ut.sectionIndex=Dt[1],Ut.sections=je.sections,Ue.push(Ut)}}else Ue=function(mt,Dt){const Ut=[],jt=mt.text;let Rt=0;for(const kt of Dt)Ut.push(mt.substring(Rt,kt)),Rt=kt;return Rt<jt.length&&Ut.push(mt.substring(Rt,jt.length)),Ut}(je,iy(je,$,_,n,h,fe,ve));const tt=[],ot={positionedLines:tt,text:je.toString(),top:q[1],bottom:q[1],left:q[0],right:q[0],writingMode:ee,iconsInText:!1,verticalizable:!1};return function(mt,Dt,Ut,jt,Rt,kt,Bt,Ot,Et,nn,Ht,bn){let or=0,ur=nf,$r=0,co=0;const Ii=Ot==="right"?1:Ot==="left"?0:.5;let Er=0;for(const Fr of Rt){Fr.trim();const Vr=Fr.getMaxScale(),gi=(Vr-1)*Yr,Pi={positionedGlyphs:[],lineOffset:0};mt.positionedLines[Er]=Pi;const Vi=Pi.positionedGlyphs;let Gi=0;if(!Fr.length()){ur+=kt,++Er;continue}for(let li=0;li<Fr.length();li++){const In=Fr.getSection(li),ho=Fr.getSectionIndex(li),ui=Fr.getCharCode(li);let yi=0,Ho=null,ds=null,ps=null,ba=Yr;const Xo=!(Et===l.WritingMode.horizontal||!Ht&&!cs(ui)||Ht&&(Kd[ui]||(Jr=ui,Ct.Arabic(Jr)||Ct["Arabic Supplement"](Jr)||Ct["Arabic Extended-A"](Jr)||Ct["Arabic Presentation Forms-A"](Jr)||Ct["Arabic Presentation Forms-B"](Jr))));if(In.imageName){const Ao=jt[In.imageName];if(!Ao)continue;ps=In.imageName,mt.iconsInText=mt.iconsInText||!0,ds=Ao.paddedRect;const Zi=Ao.displaySize;In.scale=In.scale*Yr/bn,Ho={width:Zi[0],height:Zi[1],left:Ui,top:-Nx,advance:Xo?Zi[1]:Zi[0]},yi=gi+(Yr-Zi[1]*In.scale),ba=Ho.advance;const Ea=Xo?Zi[0]*In.scale-Yr*Vr:Zi[1]*In.scale-Yr*Vr;Ea>0&&Ea>Gi&&(Gi=Ea)}else{const Ao=Ut[In.fontStack],Zi=Ao&&Ao[ui];if(Zi&&Zi.rect)ds=Zi.rect,Ho=Zi.metrics;else{const Ea=Dt[In.fontStack],uf=Ea&&Ea[ui];if(!uf)continue;Ho=uf.metrics}yi=(Vr-In.scale)*Yr}Xo?(mt.verticalizable=!0,Vi.push({glyph:ui,imageName:ps,x:or,y:ur+yi,vertical:Xo,scale:In.scale,fontStack:In.fontStack,sectionIndex:ho,metrics:Ho,rect:ds}),or+=ba*In.scale+nn):(Vi.push({glyph:ui,imageName:ps,x:or,y:ur+yi,vertical:Xo,scale:In.scale,fontStack:In.fontStack,sectionIndex:ho,metrics:Ho,rect:ds}),or+=Ho.advance*In.scale+nn)}Vi.length!==0&&($r=Math.max(or-nn,$r),pP(Vi,0,Vi.length-1,Ii,Gi)),or=0;const Sr=kt*Vr+Gi;Pi.lineOffset=Math.max(Gi,gi),ur+=Sr,co=Math.max(Sr,co),++Er}var Jr;const ai=ur-nf,{horizontalAlign:$i,verticalAlign:Ai}=oy(Bt);(function(Fr,Vr,gi,Pi,Vi,Gi,Sr,li,In){const ho=(Vr-gi)*Vi;let ui=0;ui=Gi!==Sr?-li*Pi-nf:(-Pi*In+.5)*Sr;for(const yi of Fr)for(const Ho of yi.positionedGlyphs)Ho.x+=ho,Ho.y+=ui})(mt.positionedLines,Ii,$i,Ai,$r,co,kt,ai,Rt.length),mt.top+=-Ai*ai,mt.bottom=mt.top+ai,mt.left+=-$i*$r,mt.right=mt.left+$r}(ot,n,s,h,Ue,x,T,P,ee,$,ce,ke),!function(mt){for(const Dt of mt)if(Dt.positionedGlyphs.length!==0)return!1;return!0}(tt)&&ot}const Kd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},fP={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Vx(o,n,s,h,p,_){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Yr/_+p:0}{const x=s[n.fontStack],T=x&&x[o];return T?T.metrics.advance*n.scale+p:0}}function Gx(o,n,s,h){const p=Math.pow(o-n,2);return h?o<n?p/2:2*p:p+Math.abs(s)*s}function dP(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Zx(o,n,s,h,p,_){let x=null,T=Gx(n,s,p,_);for(const P of h){const $=Gx(n-P.x,s,p,_)+P.badness;$<=T&&(x=P,T=$)}return{index:o,x:n,priorBreak:x,badness:T}}function Wx(o){return o?Wx(o.priorBreak).concat(o.index):[]}function iy(o,n,s,h,p,_,x){if(_!=="point")return[];if(!o)return[];const T=[],P=function(ce,fe,ve,ke,je,Ue){let Qe=0;for(let Ze=0;Ze<ce.length();Ze++){const tt=ce.getSection(Ze);Qe+=Vx(ce.getCharCode(Ze),tt,ke,je,fe,Ue)}return Qe/Math.max(1,Math.ceil(Qe/ve))}(o,n,s,h,p,x),$=o.text.indexOf("")>=0;let q=0;for(let ce=0;ce<o.length();ce++){const fe=o.getSection(ce),ve=o.getCharCode(ce);if(Kd[ve]||(q+=Vx(ve,fe,h,p,n,x)),ce<o.length()-1){const ke=!((ee=ve)<11904||!(Ct["Bopomofo Extended"](ee)||Ct.Bopomofo(ee)||Ct["CJK Compatibility Forms"](ee)||Ct["CJK Compatibility Ideographs"](ee)||Ct["CJK Compatibility"](ee)||Ct["CJK Radicals Supplement"](ee)||Ct["CJK Strokes"](ee)||Ct["CJK Symbols and Punctuation"](ee)||Ct["CJK Unified Ideographs Extension A"](ee)||Ct["CJK Unified Ideographs"](ee)||Ct["Enclosed CJK Letters and Months"](ee)||Ct["Halfwidth and Fullwidth Forms"](ee)||Ct.Hiragana(ee)||Ct["Ideographic Description Characters"](ee)||Ct["Kangxi Radicals"](ee)||Ct["Katakana Phonetic Extensions"](ee)||Ct.Katakana(ee)||Ct["Vertical Forms"](ee)||Ct["Yi Radicals"](ee)||Ct["Yi Syllables"](ee)));(fP[ve]||ke||fe.imageName)&&T.push(Zx(ce+1,q,P,T,dP(ve,o.getCharCode(ce+1),ke&&$),!1))}}var ee;return Wx(Zx(o.length(),q,P,T,0,!0))}function oy(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function pP(o,n,s,h,p){if(!h&&!p)return;const _=o[s],x=(o[s].x+_.metrics.advance*_.scale)*h;for(let T=n;T<=s;T++)o[T].x-=x,o[T].y+=p}function mP(o,n,s){const{horizontalAlign:h,verticalAlign:p}=oy(s),_=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*p;return{image:o,top:x,bottom:x+o.displaySize[1],left:_,right:_+o.displaySize[0]}}function Hx(o,n,s,h,p,_){const x=o.image;let T;if(x.content){const je=x.content,Ue=x.pixelRatio||1;T=[je[0]/Ue,je[1]/Ue,x.displaySize[0]-je[2]/Ue,x.displaySize[1]-je[3]/Ue]}const P=n.left*_,$=n.right*_;let q,ee,ce,fe;s==="width"||s==="both"?(fe=p[0]+P-h[3],ee=p[0]+$+h[1]):(fe=p[0]+(P+$-x.displaySize[0])/2,ee=fe+x.displaySize[0]);const ve=n.top*_,ke=n.bottom*_;return s==="height"||s==="both"?(q=p[1]+ve-h[0],ce=p[1]+ke+h[2]):(q=p[1]+(ve+ke-x.displaySize[1])/2,ce=q+x.displaySize[1]),{image:x,top:q,right:ee,bottom:ce,left:fe,collisionPadding:T}}const of=255,Hs=128,dl=of*Hs;function Xx(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new lr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=s;let _=0;for(;_<h.length&&h[_]<=o;)_++;_=Math.max(0,_-1);let x=_;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const T=h[_],P=h[x];return s.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:P,interpolationType:p}:{kind:"camera",minZoom:T,maxZoom:P,minSize:s.evaluate(new lr(T)),maxSize:s.evaluate(new lr(P)),interpolationType:p}}}function sy(o,n,s){let h="never";const p=o.get(n);return p?h=p:o.get(s)&&(h="always"),h}const gP=hl.VectorTileFeature.types,yP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Yd(o,n,s,h,p,_,x,T,P,$,q,ee,ce){const fe=T?Math.min(dl,Math.round(T[0])):0,ve=T?Math.min(dl,Math.round(T[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*p),_,x,(fe<<1)+(P?1:0),ve,16*$,16*q,256*ee,256*ce)}function ay(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function vP(o){for(const n of o.sections)if(zd(n.text))return!0;return!1}class ly{constructor(n){this.layoutVertexArray=new et,this.indexArray=new dt,this.programConfigurations=n,this.segments=new It,this.dynamicLayoutVertexArray=new at,this.opacityVertexArray=new ct,this.hasVisibleVertices=!1,this.placedSymbolArray=new C}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,qA.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,KA.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,yP,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}St("SymbolBuffers",ly);class uy{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new It,this.collisionVertexArray=new xt}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,YA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}St("CollisionBuffers",uy);class bc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ng([]),this.placementViewportMatrix=Ng([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Xx(this.zoom,s["text-size"]),this.iconSizeData=Xx(this.zoom,s["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=sy(h,"text-overlap","text-allow-overlap")!=="never"||sy(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>l.WritingMode[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new ly(new hs(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new ly(new hs(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new j,this.lineVertexArray=new H,this.symbolInstances=new k}calculateGlyphDependencies(n,s,h,p,_){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||p)&&_){const T=tf[n.charAt(x)];T&&(s[T.charCodeAt(0)]=!0)}}populate(n,s,h){const p=this.layers[0],_=p.layout,x=_.get("text-font"),T=_.get("text-field"),P=_.get("icon-image"),$=(T.value.kind!=="constant"||T.value.value instanceof pr&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),q=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,ee=_.get("symbol-sort-key");if(this.features=[],!$&&!q)return;const ce=s.iconDependencies,fe=s.glyphDependencies,ve=s.availableImages,ke=new lr(this.zoom);for(const{feature:je,id:Ue,index:Qe,sourceLayerIndex:Ze}of n){const tt=p._featureFilter.needGeometry,ot=gu(je,tt);if(!p._featureFilter.filter(ke,ot,h))continue;let mt,Dt;if(tt||(ot.geometry=fs(je)),$){const jt=p.getValueAndResolveTokens("text-field",ot,h,ve),Rt=pr.factory(jt);vP(Rt)&&(this.hasRTLText=!0),(!this.hasRTLText||Oh()==="unavailable"||this.hasRTLText&&uo.isParsed())&&(mt=QA(Rt,p,ot))}if(q){const jt=p.getValueAndResolveTokens("icon-image",ot,h,ve);Dt=jt instanceof di?jt:di.fromString(jt)}if(!mt&&!Dt)continue;const Ut=this.sortFeaturesByKey?ee.evaluate(ot,{},h):void 0;if(this.features.push({id:Ue,text:mt,icon:Dt,index:Qe,sourceLayerIndex:Ze,geometry:ot.geometry,properties:je.properties,type:gP[je.type],sortKey:Ut}),Dt&&(ce[Dt.name]=!0),mt){const jt=x.evaluate(ot,{},h).join(","),Rt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const kt of mt.sections)if(kt.image)ce[kt.image.name]=!0;else{const Bt=lo(mt.toString()),Ot=kt.fontStack||jt,Et=fe[Ot]=fe[Ot]||{};this.calculateGlyphDependencies(kt.text,Et,Rt,this.allowVerticalPlacement,Bt)}}}_.get("symbol-placement")==="line"&&(this.features=function(je){const Ue={},Qe={},Ze=[];let tt=0;function ot(jt){Ze.push(je[jt]),tt++}function mt(jt,Rt,kt){const Bt=Qe[jt];return delete Qe[jt],Qe[Rt]=Bt,Ze[Bt].geometry[0].pop(),Ze[Bt].geometry[0]=Ze[Bt].geometry[0].concat(kt[0]),Bt}function Dt(jt,Rt,kt){const Bt=Ue[Rt];return delete Ue[Rt],Ue[jt]=Bt,Ze[Bt].geometry[0].shift(),Ze[Bt].geometry[0]=kt[0].concat(Ze[Bt].geometry[0]),Bt}function Ut(jt,Rt,kt){const Bt=kt?Rt[0][Rt[0].length-1]:Rt[0][0];return`${jt}:${Bt.x}:${Bt.y}`}for(let jt=0;jt<je.length;jt++){const Rt=je[jt],kt=Rt.geometry,Bt=Rt.text?Rt.text.toString():null;if(!Bt){ot(jt);continue}const Ot=Ut(Bt,kt),Et=Ut(Bt,kt,!0);if(Ot in Qe&&Et in Ue&&Qe[Ot]!==Ue[Et]){const nn=Dt(Ot,Et,kt),Ht=mt(Ot,Et,Ze[nn].geometry);delete Ue[Ot],delete Qe[Et],Qe[Ut(Bt,Ze[Ht].geometry,!0)]=Ht,Ze[nn].geometry=null}else Ot in Qe?mt(Ot,Et,kt):Et in Ue?Dt(Ot,Et,kt):(ot(jt),Ue[Ot]=tt-1,Qe[Et]=tt-1)}return Ze.filter(jt=>jt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((je,Ue)=>je.sortKey-Ue.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(s[n.segment+1]),_=n.dist(s[n.segment]);const x={};for(let T=n.segment+1;T<s.length;T++)x[T]={x:s[T].x,y:s[T].y,tileUnitDistanceFromAnchor:p},T<s.length-1&&(p+=s[T+1].dist(s[T]));for(let T=n.segment||0;T>=0;T--)x[T]={x:s[T].x,y:s[T].y,tileUnitDistanceFromAnchor:_},T>0&&(_+=s[T-1].dist(s[T]));for(let T=0;T<s.length;T++){const P=x[T];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,p,_,x,T,P,$,q,ee,ce){const fe=n.indexArray,ve=n.layoutVertexArray,ke=n.segments.prepareSegment(4*s.length,ve,fe,this.canOverlap?x.sortKey:void 0),je=this.glyphOffsetArray.length,Ue=ke.vertexLength,Qe=this.allowVerticalPlacement&&T===l.WritingMode.vertical?Math.PI/2:0,Ze=x.text&&x.text.sections;for(let tt=0;tt<s.length;tt++){const{tl:ot,tr:mt,bl:Dt,br:Ut,tex:jt,pixelOffsetTL:Rt,pixelOffsetBR:kt,minFontScaleX:Bt,minFontScaleY:Ot,glyphOffset:Et,isSDF:nn,sectionIndex:Ht}=s[tt],bn=ke.vertexLength,or=Et[1];Yd(ve,P.x,P.y,ot.x,or+ot.y,jt.x,jt.y,h,nn,Rt.x,Rt.y,Bt,Ot),Yd(ve,P.x,P.y,mt.x,or+mt.y,jt.x+jt.w,jt.y,h,nn,kt.x,Rt.y,Bt,Ot),Yd(ve,P.x,P.y,Dt.x,or+Dt.y,jt.x,jt.y+jt.h,h,nn,Rt.x,kt.y,Bt,Ot),Yd(ve,P.x,P.y,Ut.x,or+Ut.y,jt.x+jt.w,jt.y+jt.h,h,nn,kt.x,kt.y,Bt,Ot),ay(n.dynamicLayoutVertexArray,P,Qe),fe.emplaceBack(bn,bn+1,bn+2),fe.emplaceBack(bn+1,bn+2,bn+3),ke.vertexLength+=4,ke.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Et[0]),tt!==s.length-1&&Ht===s[tt+1].sectionIndex||n.programConfigurations.populatePaintArrays(ve.length,x,x.index,{},ce,Ze&&Ze[Ht])}n.placedSymbolArray.emplaceBack(P.x,P.y,je,this.glyphOffsetArray.length-je,Ue,$,q,P.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],T,0,!1,0,ee)}_addCollisionDebugVertex(n,s,h,p,_,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,p,_,x,T){const P=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),$=P.vertexLength,q=_.layoutVertexArray,ee=_.collisionVertexArray,ce=T.anchorX,fe=T.anchorY;this._addCollisionDebugVertex(q,ee,x,ce,fe,new E(n,s)),this._addCollisionDebugVertex(q,ee,x,ce,fe,new E(h,s)),this._addCollisionDebugVertex(q,ee,x,ce,fe,new E(h,p)),this._addCollisionDebugVertex(q,ee,x,ce,fe,new E(n,p)),P.vertexLength+=4;const ve=_.indexArray;ve.emplaceBack($,$+1),ve.emplaceBack($+1,$+2),ve.emplaceBack($+2,$+3),ve.emplaceBack($+3,$),P.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,p){for(let _=n;_<s;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new uy(ft,zx.members,Lt),this.iconCollisionBox=new uy(ft,zx.members,Lt);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,p,_,x,T,P,$){const q={};for(let ee=s;ee<h;ee++){const ce=n.get(ee);q.textBox={x1:ce.x1,y1:ce.y1,x2:ce.x2,y2:ce.y2,anchorPointX:ce.anchorPointX,anchorPointY:ce.anchorPointY},q.textFeatureIndex=ce.featureIndex;break}for(let ee=p;ee<_;ee++){const ce=n.get(ee);q.verticalTextBox={x1:ce.x1,y1:ce.y1,x2:ce.x2,y2:ce.y2,anchorPointX:ce.anchorPointX,anchorPointY:ce.anchorPointY},q.verticalTextFeatureIndex=ce.featureIndex;break}for(let ee=x;ee<T;ee++){const ce=n.get(ee);q.iconBox={x1:ce.x1,y1:ce.y1,x2:ce.x2,y2:ce.y2,anchorPointX:ce.anchorPointX,anchorPointY:ce.anchorPointY},q.iconFeatureIndex=ce.featureIndex;break}for(let ee=P;ee<$;ee++){const ce=n.get(ee);q.verticalIconBox={x1:ce.x1,y1:ce.y1,x2:ce.x2,y2:ce.y2,anchorPointX:ce.anchorPointX,anchorPointY:ce.anchorPointY},q.verticalIconFeatureIndex=ce.featureIndex;break}return q}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),p=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<p;_+=4)n.indexArray.emplaceBack(_,_+1,_+2),n.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),p=[],_=[],x=[];for(let T=0;T<this.symbolInstances.length;++T){x.push(T);const P=this.symbolInstances.get(T);p.push(0|Math.round(s*P.anchorX+h*P.anchorY)),_.push(P.featureIndex)}return x.sort((T,P)=>p[T]-p[P]||_[P]-_[T]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,_,x)=>{p>=0&&x.indexOf(p)===_&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let qx,Kx;St("SymbolBucket",bc,{omit:["layers","collisionBoxArray","features","compareText"]}),bc.MAX_GLYPHS=65535,bc.addDynamicAttributes=ay;var cy={get paint(){return Kx=Kx||new Ti({"icon-opacity":new sn(Ye.paint_symbol["icon-opacity"]),"icon-color":new sn(Ye.paint_symbol["icon-color"]),"icon-halo-color":new sn(Ye.paint_symbol["icon-halo-color"]),"icon-halo-width":new sn(Ye.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sn(Ye.paint_symbol["icon-halo-blur"]),"icon-translate":new Wt(Ye.paint_symbol["icon-translate"]),"icon-translate-anchor":new Wt(Ye.paint_symbol["icon-translate-anchor"]),"text-opacity":new sn(Ye.paint_symbol["text-opacity"]),"text-color":new sn(Ye.paint_symbol["text-color"],{runtimeType:st,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new sn(Ye.paint_symbol["text-halo-color"]),"text-halo-width":new sn(Ye.paint_symbol["text-halo-width"]),"text-halo-blur":new sn(Ye.paint_symbol["text-halo-blur"]),"text-translate":new Wt(Ye.paint_symbol["text-translate"]),"text-translate-anchor":new Wt(Ye.paint_symbol["text-translate-anchor"])})},get layout(){return qx=qx||new Ti({"symbol-placement":new Wt(Ye.layout_symbol["symbol-placement"]),"symbol-spacing":new Wt(Ye.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Wt(Ye.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sn(Ye.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Wt(Ye.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Wt(Ye.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Wt(Ye.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Wt(Ye.layout_symbol["icon-ignore-placement"]),"icon-optional":new Wt(Ye.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Wt(Ye.layout_symbol["icon-rotation-alignment"]),"icon-size":new sn(Ye.layout_symbol["icon-size"]),"icon-text-fit":new Wt(Ye.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Wt(Ye.layout_symbol["icon-text-fit-padding"]),"icon-image":new sn(Ye.layout_symbol["icon-image"]),"icon-rotate":new sn(Ye.layout_symbol["icon-rotate"]),"icon-padding":new sn(Ye.layout_symbol["icon-padding"]),"icon-keep-upright":new Wt(Ye.layout_symbol["icon-keep-upright"]),"icon-offset":new sn(Ye.layout_symbol["icon-offset"]),"icon-anchor":new sn(Ye.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Wt(Ye.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Wt(Ye.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Wt(Ye.layout_symbol["text-rotation-alignment"]),"text-field":new sn(Ye.layout_symbol["text-field"]),"text-font":new sn(Ye.layout_symbol["text-font"]),"text-size":new sn(Ye.layout_symbol["text-size"]),"text-max-width":new sn(Ye.layout_symbol["text-max-width"]),"text-line-height":new Wt(Ye.layout_symbol["text-line-height"]),"text-letter-spacing":new sn(Ye.layout_symbol["text-letter-spacing"]),"text-justify":new sn(Ye.layout_symbol["text-justify"]),"text-radial-offset":new sn(Ye.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Wt(Ye.layout_symbol["text-variable-anchor"]),"text-anchor":new sn(Ye.layout_symbol["text-anchor"]),"text-max-angle":new Wt(Ye.layout_symbol["text-max-angle"]),"text-writing-mode":new Wt(Ye.layout_symbol["text-writing-mode"]),"text-rotate":new sn(Ye.layout_symbol["text-rotate"]),"text-padding":new Wt(Ye.layout_symbol["text-padding"]),"text-keep-upright":new Wt(Ye.layout_symbol["text-keep-upright"]),"text-transform":new sn(Ye.layout_symbol["text-transform"]),"text-offset":new sn(Ye.layout_symbol["text-offset"]),"text-allow-overlap":new Wt(Ye.layout_symbol["text-allow-overlap"]),"text-overlap":new Wt(Ye.layout_symbol["text-overlap"]),"text-ignore-placement":new Wt(Ye.layout_symbol["text-ignore-placement"]),"text-optional":new Wt(Ye.layout_symbol["text-optional"])})}};class Yx{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:D,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}St("FormatSectionOverride",Yx,{omit:["defaultValue"]});class Jd extends Go{constructor(n){super(n,cy)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const _ of h)p.indexOf(_)<0&&p.push(_);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,p){const _=this.layout.get(n).evaluate(s,{},h,p),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||nl(x.value)||!_?_:function(T,P){return P.replace(/{([^{}]+)}/g,($,q)=>q in T?String(T[q]):"")}(s.properties,_)}createBucket(n){return new bc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of cy.paint.overridableProperties){if(!Jd.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Yx(s),p=new iu(h,s.property.specification);let _=null;_=s.value.kind==="constant"||s.value.kind==="source"?new ar("source",p):new Ns("composite",p,s.value.zoomStops),this.paint._values[n]=new Vo(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Jd.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),p=cy.paint.properties[s];let _=!1;const x=T=>{for(const P of T)if(p.overrides&&p.overrides.hasOverride(P))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof pr)x(h.value.value.sections);else if(h.value.kind==="source"){const T=$=>{_||($ instanceof is&&xr($.value)===An?x($.value.sections):$ instanceof Ya?x($.sections):$.eachChild(T))},P=h.value;P._styleExpression&&T(P._styleExpression.expression)}return _}}let Jx;var _P={get paint(){return Jx=Jx||new Ti({"background-color":new Wt(Ye.paint_background["background-color"]),"background-pattern":new Dh(Ye.paint_background["background-pattern"]),"background-opacity":new Wt(Ye.paint_background["background-opacity"])})}};class xP extends Go{constructor(n){super(n,_P)}}let Qx;var wP={get paint(){return Qx=Qx||new Ti({"raster-opacity":new Wt(Ye.paint_raster["raster-opacity"]),"raster-hue-rotate":new Wt(Ye.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Wt(Ye.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Wt(Ye.paint_raster["raster-brightness-max"]),"raster-saturation":new Wt(Ye.paint_raster["raster-saturation"]),"raster-contrast":new Wt(Ye.paint_raster["raster-contrast"]),"raster-resampling":new Wt(Ye.paint_raster["raster-resampling"]),"raster-fade-duration":new Wt(Ye.paint_raster["raster-fade-duration"])})}};class bP extends Go{constructor(n){super(n,wP)}}class EP extends Go{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class SP{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const hy=63710088e-1;class pl{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new pl(V(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,p=n.lat*s,_=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*s);return hy*Math.acos(Math.min(_,1))}static convert(n){if(n instanceof pl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new pl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new pl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const ew=2*Math.PI*hy;function tw(o){return ew*Math.cos(o*Math.PI/180)}function nw(o){return(180+o)/360}function rw(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function iw(o,n){return o/tw(n)}function fy(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Qd{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=pl.convert(n);return new Qd(nw(h.lng),rw(h.lat),iw(s,h.lat))}toLngLat(){return new pl(360*this.x-180,fy(this.y))}toAltitude(){return this.z*tw(fy(this.y))}meterInMercatorCoordinateUnits(){return 1/ew*(n=fy(this.y),1/Math.cos(n*Math.PI/180));var n}}function ow(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class dy{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=sf(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const p=(x=this.y,T=this.z,P=ow(256*(_=this.x),256*(x=Math.pow(2,T)-x-1),T),$=ow(256*(_+1),256*(x+1),T),P[0]+","+P[1]+","+$[0]+","+$[1]);var _,x,T,P,$;const q=function(ee,ce,fe){let ve,ke="";for(let je=ee;je>0;je--)ve=1<<je-1,ke+=(ce&ve?1:0)+(fe&ve?2:0);return ke}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,q).replace(/{bbox-epsg-3857}/g,p)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new E((n.x*s-this.x)*ir,(n.y*s-this.y)*ir)}toString(){return`${this.z}/${this.x}/${this.y}`}}class sw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=sf(n,s.z,s.z,s.x,s.y)}}class Io{constructor(n,s,h,p,_){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new dy(h,+p,+_),this.key=sf(s,n,h,p,_)}clone(){return new Io(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Io(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Io(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?sf(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):sf(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Io(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Io(s,this.wrap,s,h,p),new Io(s,this.wrap,s,h+1,p),new Io(s,this.wrap,s,h,p+1),new Io(s,this.wrap,s,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Io(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Io(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new sw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Qd(n.x-this.wrap,n.y))}}function sf(o,n,s,h,p){(o*=2)<0&&(o=-1*o-1);const _=1<<s;return(_*_*o+_*p+h).toString(36)+s.toString(36)+n.toString(36)}St("CanonicalTileID",dy),St("OverscaledTileID",Io,{omit:["posMatrix"]});class aw{constructor(n,s,h){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void Z(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const p=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=h||"mapbox";for(let _=0;_<p;_++)this.data[this._idx(-1,_)]=this.data[this._idx(0,_)],this.data[this._idx(p,_)]=this.data[this._idx(p-1,_)],this.data[this._idx(_,-1)]=this.data[this._idx(_,0)],this.data[this._idx(_,p)]=this.data[this._idx(_,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let _=0;_<p;_++)for(let x=0;x<p;x++){const T=this.get(_,x);T>this.max&&(this.max=T),T<this.min&&(this.min=T)}}get(n,s){const h=new Uint8Array(this.data.buffer),p=4*this._idx(n,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[p],h[p+1],h[p+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}_unpackMapbox(n,s,h){return(256*n*256+256*s+h)/10-1e4}_unpackTerrarium(n,s,h){return 256*n+s+h/256-32768}getPixels(){return new Co({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,_=s*this.dim+this.dim,x=h*this.dim,T=h*this.dim+this.dim;switch(s){case-1:p=_-1;break;case 1:_=p+1}switch(h){case-1:x=T-1;break;case 1:T=x+1}const P=-s*this.dim,$=-h*this.dim;for(let q=x;q<T;q++)for(let ee=p;ee<_;ee++)this.data[this._idx(ee,q)]=n.data[this._idx(ee+P,q+$)]}}St("DEMData",aw);class lw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class uw{constructor(n,s,h,p,_){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=p,this.properties=n.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class cw{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Fn(ir,16,0),this.grid3D=new Fn(ir,16,0),this.featureIndexArray=new he,this.promoteId=s}insert(n,s,h,p,_,x){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,_);const P=x?this.grid3D:this.grid;for(let $=0;$<s.length;$++){const q=s[$],ee=[1/0,1/0,-1/0,-1/0];for(let ce=0;ce<q.length;ce++){const fe=q[ce];ee[0]=Math.min(ee[0],fe.x),ee[1]=Math.min(ee[1],fe.y),ee[2]=Math.max(ee[2],fe.x),ee[3]=Math.max(ee[3],fe.y)}ee[0]<ir&&ee[1]<ir&&ee[2]>=0&&ee[3]>=0&&P.insert(T,ee[0],ee[1],ee[2],ee[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new hl.VectorTile(new ty(this.rawTileData)).layers,this.sourceLayerCoder=new lw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,p){this.loadVTLayers();const _=n.params||{},x=ir/n.tileSize/n.scale,T=rl(_.filter),P=n.queryGeometry,$=n.queryPadding*x,q=fw(P),ee=this.grid.query(q.minX-$,q.minY-$,q.maxX+$,q.maxY+$),ce=fw(n.cameraQueryGeometry),fe=this.grid3D.query(ce.minX-$,ce.minY-$,ce.maxX+$,ce.maxY+$,(je,Ue,Qe,Ze)=>function(tt,ot,mt,Dt,Ut){for(const Rt of tt)if(ot<=Rt.x&&mt<=Rt.y&&Dt>=Rt.x&&Ut>=Rt.y)return!0;const jt=[new E(ot,mt),new E(ot,Ut),new E(Dt,Ut),new E(Dt,mt)];if(tt.length>2){for(const Rt of jt)if(mc(tt,Rt))return!0}for(let Rt=0;Rt<tt.length-1;Rt++)if(nA(tt[Rt],tt[Rt+1],jt))return!0;return!1}(n.cameraQueryGeometry,je-$,Ue-$,Qe+$,Ze+$));for(const je of fe)ee.push(je);ee.sort(TP);const ve={};let ke;for(let je=0;je<ee.length;je++){const Ue=ee[je];if(Ue===ke)continue;ke=Ue;const Qe=this.featureIndexArray.get(Ue);let Ze=null;this.loadMatchingFeature(ve,Qe.bucketIndex,Qe.sourceLayerIndex,Qe.featureIndex,T,_.layers,_.availableImages,s,h,p,(tt,ot,mt)=>(Ze||(Ze=fs(tt)),ot.queryIntersectsFeature(P,tt,mt,Ze,this.z,n.transform,x,n.pixelPosMatrix)))}return ve}loadMatchingFeature(n,s,h,p,_,x,T,P,$,q,ee){const ce=this.bucketLayerIDs[s];if(x&&!function(je,Ue){for(let Qe=0;Qe<je.length;Qe++)if(Ue.indexOf(je[Qe])>=0)return!0;return!1}(x,ce))return;const fe=this.sourceLayerCoder.decode(h),ve=this.vtLayers[fe].feature(p);if(_.needGeometry){const je=gu(ve,!0);if(!_.filter(new lr(this.tileID.overscaledZ),je,this.tileID.canonical))return}else if(!_.filter(new lr(this.tileID.overscaledZ),ve))return;const ke=this.getId(ve,fe);for(let je=0;je<ce.length;je++){const Ue=ce[je];if(x&&x.indexOf(Ue)<0)continue;const Qe=P[Ue];if(!Qe)continue;let Ze={};ke&&q&&(Ze=q.getState(Qe.sourceLayer||"_geojsonTileLayer",ke));const tt=N({},$[Ue]);tt.paint=hw(tt.paint,Qe.paint,ve,Ze,T),tt.layout=hw(tt.layout,Qe.layout,ve,Ze,T);const ot=!ee||ee(ve,Qe,Ze);if(!ot)continue;const mt=new uw(ve,this.z,this.x,this.y,ke);mt.layer=tt;let Dt=n[Ue];Dt===void 0&&(Dt=n[Ue]=[]),Dt.push({featureIndex:p,feature:mt,intersectionZ:ot})}}lookupSymbolFeatures(n,s,h,p,_,x,T,P){const $={};this.loadVTLayers();const q=rl(_);for(const ee of n)this.loadMatchingFeature($,h,p,ee,q,x,T,P,s);return $}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function hw(o,n,s,h,p){return W(o,(_,x)=>{const T=n instanceof oc?n.get(x):null;return T&&T.evaluate?T.evaluate(s,h,p):T})}function fw(o){let n=1/0,s=1/0,h=-1/0,p=-1/0;for(const _ of o)n=Math.min(n,_.x),s=Math.min(s,_.y),h=Math.max(h,_.x),p=Math.max(p,_.y);return{minX:n,minY:s,maxX:h,maxY:p}}function TP(o,n){return n-o}function dw(o,n,s,h,p){const _=[];for(let x=0;x<o.length;x++){const T=o[x];let P;for(let $=0;$<T.length-1;$++){let q=T[$],ee=T[$+1];q.x<n&&ee.x<n||(q.x<n?q=new E(n,q.y+(n-q.x)/(ee.x-q.x)*(ee.y-q.y))._round():ee.x<n&&(ee=new E(n,q.y+(n-q.x)/(ee.x-q.x)*(ee.y-q.y))._round()),q.y<s&&ee.y<s||(q.y<s?q=new E(q.x+(s-q.y)/(ee.y-q.y)*(ee.x-q.x),s)._round():ee.y<s&&(ee=new E(q.x+(s-q.y)/(ee.y-q.y)*(ee.x-q.x),s)._round()),q.x>=h&&ee.x>=h||(q.x>=h?q=new E(h,q.y+(h-q.x)/(ee.x-q.x)*(ee.y-q.y))._round():ee.x>=h&&(ee=new E(h,q.y+(h-q.x)/(ee.x-q.x)*(ee.y-q.y))._round()),q.y>=p&&ee.y>=p||(q.y>=p?q=new E(q.x+(p-q.y)/(ee.y-q.y)*(ee.x-q.x),p)._round():ee.y>=p&&(ee=new E(q.x+(p-q.y)/(ee.y-q.y)*(ee.x-q.x),p)._round()),P&&q.equals(P[P.length-1])||(P=[q],_.push(P)),P.push(ee)))))}}return _}St("FeatureIndex",cw,{omit:["rawTileData","sourceLayerCoder"]});class ml extends E{constructor(n,s,h,p){super(n,s),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new ml(this.x,this.y,this.angle,this.segment)}}function pw(o,n,s,h,p){if(n.segment===void 0||s===0)return!0;let _=n,x=n.segment+1,T=0;for(;T>-s/2;){if(x--,x<0)return!1;T-=o[x].dist(_),_=o[x]}T+=o[x].dist(o[x+1]),x++;const P=[];let $=0;for(;T<s/2;){const q=o[x],ee=o[x+1];if(!ee)return!1;let ce=o[x-1].angleTo(q)-q.angleTo(ee);for(ce=Math.abs((ce+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:T,angleDelta:ce}),$+=ce;T-P[0].distance>h;)$-=P.shift().angleDelta;if($>p)return!1;x++,T+=q.dist(ee)}return!0}function mw(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function gw(o,n,s){return o?.6*n*s:0}function yw(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function CP(o,n,s,h,p,_){const x=gw(s,p,_),T=yw(s,h)*_;let P=0;const $=mw(o)/2;for(let q=0;q<o.length-1;q++){const ee=o[q],ce=o[q+1],fe=ee.dist(ce);if(P+fe>$){const ve=($-P)/fe,ke=pi.number(ee.x,ce.x,ve),je=pi.number(ee.y,ce.y,ve),Ue=new ml(ke,je,ce.angleTo(ee),q);return Ue._round(),!x||pw(o,Ue,T,x,n)?Ue:void 0}P+=fe}}function IP(o,n,s,h,p,_,x,T,P){const $=gw(h,_,x),q=yw(h,p),ee=q*x,ce=o[0].x===0||o[0].x===P||o[0].y===0||o[0].y===P;return n-ee<n/4&&(n=ee+n/4),vw(o,ce?n/2*T%n:(q/2+2*_)*x*T%n,n,$,s,ee,ce,!1,P)}function vw(o,n,s,h,p,_,x,T,P){const $=_/2,q=mw(o);let ee=0,ce=n-s,fe=[];for(let ve=0;ve<o.length-1;ve++){const ke=o[ve],je=o[ve+1],Ue=ke.dist(je),Qe=je.angleTo(ke);for(;ce+s<ee+Ue;){ce+=s;const Ze=(ce-ee)/Ue,tt=pi.number(ke.x,je.x,Ze),ot=pi.number(ke.y,je.y,Ze);if(tt>=0&&tt<P&&ot>=0&&ot<P&&ce-$>=0&&ce+$<=q){const mt=new ml(tt,ot,Qe,ve);mt._round(),h&&!pw(o,mt,_,h,p)||fe.push(mt)}}ee+=Ue}return T||fe.length||x||(fe=vw(o,ee/2,s,h,p,_,x,!0,P)),fe}St("Anchor",ml);const Ec=Ui;function _w(o,n,s,h){const p=[],_=o.image,x=_.pixelRatio,T=_.paddedRect.w-2*Ec,P=_.paddedRect.h-2*Ec,$=o.right-o.left,q=o.bottom-o.top,ee=_.stretchX||[[0,T]],ce=_.stretchY||[[0,P]],fe=(kt,Bt)=>kt+Bt[1]-Bt[0],ve=ee.reduce(fe,0),ke=ce.reduce(fe,0),je=T-ve,Ue=P-ke;let Qe=0,Ze=ve,tt=0,ot=ke,mt=0,Dt=je,Ut=0,jt=Ue;if(_.content&&h){const kt=_.content;Qe=ep(ee,0,kt[0]),tt=ep(ce,0,kt[1]),Ze=ep(ee,kt[0],kt[2]),ot=ep(ce,kt[1],kt[3]),mt=kt[0]-Qe,Ut=kt[1]-tt,Dt=kt[2]-kt[0]-Ze,jt=kt[3]-kt[1]-ot}const Rt=(kt,Bt,Ot,Et)=>{const nn=tp(kt.stretch-Qe,Ze,$,o.left),Ht=np(kt.fixed-mt,Dt,kt.stretch,ve),bn=tp(Bt.stretch-tt,ot,q,o.top),or=np(Bt.fixed-Ut,jt,Bt.stretch,ke),ur=tp(Ot.stretch-Qe,Ze,$,o.left),$r=np(Ot.fixed-mt,Dt,Ot.stretch,ve),co=tp(Et.stretch-tt,ot,q,o.top),Ii=np(Et.fixed-Ut,jt,Et.stretch,ke),Er=new E(nn,bn),Jr=new E(ur,bn),ai=new E(ur,co),$i=new E(nn,co),Ai=new E(Ht/x,or/x),Fr=new E($r/x,Ii/x),Vr=n*Math.PI/180;if(Vr){const Vi=Math.sin(Vr),Gi=Math.cos(Vr),Sr=[Gi,-Vi,Vi,Gi];Er._matMult(Sr),Jr._matMult(Sr),$i._matMult(Sr),ai._matMult(Sr)}const gi=kt.stretch+kt.fixed,Pi=Bt.stretch+Bt.fixed;return{tl:Er,tr:Jr,bl:$i,br:ai,tex:{x:_.paddedRect.x+Ec+gi,y:_.paddedRect.y+Ec+Pi,w:Ot.stretch+Ot.fixed-gi,h:Et.stretch+Et.fixed-Pi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ai,pixelOffsetBR:Fr,minFontScaleX:Dt/x/$,minFontScaleY:jt/x/q,isSDF:s}};if(h&&(_.stretchX||_.stretchY)){const kt=xw(ee,je,ve),Bt=xw(ce,Ue,ke);for(let Ot=0;Ot<kt.length-1;Ot++){const Et=kt[Ot],nn=kt[Ot+1];for(let Ht=0;Ht<Bt.length-1;Ht++)p.push(Rt(Et,Bt[Ht],nn,Bt[Ht+1]))}}else p.push(Rt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:P+1}));return p}function ep(o,n,s){let h=0;for(const p of o)h+=Math.max(n,Math.min(s,p[1]))-Math.max(n,Math.min(s,p[0]));return h}function xw(o,n,s){const h=[{fixed:-Ec,stretch:0}];for(const[p,_]of o){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(_-p)})}return h.push({fixed:n+Ec,stretch:s}),h}function tp(o,n,s,h){return o/n*s+h}function np(o,n,s,h){return o-n*s/h}class rp{constructor(n,s,h,p,_,x,T,P,$,q){if(this.boxStartIndex=n.length,$){let ee=x.top,ce=x.bottom;const fe=x.collisionPadding;fe&&(ee-=fe[1],ce+=fe[3]);let ve=ce-ee;ve>0&&(ve=Math.max(10,ve),this.circleDiameter=ve)}else{let ee=x.top*T-P[0],ce=x.bottom*T+P[2],fe=x.left*T-P[3],ve=x.right*T+P[1];const ke=x.collisionPadding;if(ke&&(fe-=ke[0]*T,ee-=ke[1]*T,ve+=ke[2]*T,ce+=ke[3]*T),q){const je=new E(fe,ee),Ue=new E(ve,ee),Qe=new E(fe,ce),Ze=new E(ve,ce),tt=q*Math.PI/180;je._rotate(tt),Ue._rotate(tt),Qe._rotate(tt),Ze._rotate(tt),fe=Math.min(je.x,Ue.x,Qe.x,Ze.x),ve=Math.max(je.x,Ue.x,Qe.x,Ze.x),ee=Math.min(je.y,Ue.y,Qe.y,Ze.y),ce=Math.max(je.y,Ue.y,Qe.y,Ze.y)}n.emplaceBack(s.x,s.y,fe,ee,ve,ce,h,p,_)}this.boxEndIndex=n.length}}class AP{constructor(n=[],s=PP){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,p=s[n];for(;n>0;){const _=n-1>>1,x=s[_];if(h(p,x)>=0)break;s[n]=x,n=_}s[n]=p}_down(n){const{data:s,compare:h}=this,p=this.length>>1,_=s[n];for(;n<p;){let x=1+(n<<1),T=s[x];const P=x+1;if(P<this.length&&h(s[P],T)<0&&(x=P,T=s[P]),h(T,_)>=0)break;s[n]=T,n=x}s[n]=_}}function PP(o,n){return o<n?-1:o>n?1:0}function MP(o,n=1,s=!1){let h=1/0,p=1/0,_=-1/0,x=-1/0;const T=o[0];for(let fe=0;fe<T.length;fe++){const ve=T[fe];(!fe||ve.x<h)&&(h=ve.x),(!fe||ve.y<p)&&(p=ve.y),(!fe||ve.x>_)&&(_=ve.x),(!fe||ve.y>x)&&(x=ve.y)}const P=Math.min(_-h,x-p);let $=P/2;const q=new AP([],kP);if(P===0)return new E(h,p);for(let fe=h;fe<_;fe+=P)for(let ve=p;ve<x;ve+=P)q.push(new Sc(fe+$,ve+$,$,o));let ee=function(fe){let ve=0,ke=0,je=0;const Ue=fe[0];for(let Qe=0,Ze=Ue.length,tt=Ze-1;Qe<Ze;tt=Qe++){const ot=Ue[Qe],mt=Ue[tt],Dt=ot.x*mt.y-mt.x*ot.y;ke+=(ot.x+mt.x)*Dt,je+=(ot.y+mt.y)*Dt,ve+=3*Dt}return new Sc(ke/ve,je/ve,0,fe)}(o),ce=q.length;for(;q.length;){const fe=q.pop();(fe.d>ee.d||!ee.d)&&(ee=fe,s&&console.log("found best %d after %d probes",Math.round(1e4*fe.d)/1e4,ce)),fe.max-ee.d<=n||($=fe.h/2,q.push(new Sc(fe.p.x-$,fe.p.y-$,$,o)),q.push(new Sc(fe.p.x+$,fe.p.y-$,$,o)),q.push(new Sc(fe.p.x-$,fe.p.y+$,$,o)),q.push(new Sc(fe.p.x+$,fe.p.y+$,$,o)),ce+=4)}return s&&(console.log(`num probes: ${ce}`),console.log(`best distance: ${ee.d}`)),ee.p}function kP(o,n){return n.max-o.max}function Sc(o,n,s,h){this.p=new E(o,n),this.h=s,this.d=function(p,_){let x=!1,T=1/0;for(let P=0;P<_.length;P++){const $=_[P];for(let q=0,ee=$.length,ce=ee-1;q<ee;ce=q++){const fe=$[q],ve=$[ce];fe.y>p.y!=ve.y>p.y&&p.x<(ve.x-fe.x)*(p.y-fe.y)/(ve.y-fe.y)+fe.x&&(x=!x),T=Math.min(T,rx(p,fe,ve))}}return(x?1:-1)*Math.sqrt(T)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const py=Number.POSITIVE_INFINITY;function ww(o,n){return n[1]!==py?function(s,h,p){let _=0,x=0;switch(h=Math.abs(h),p=Math.abs(p),s){case"top-right":case"top-left":case"top":x=p-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-p}switch(s){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,x]}(o,n[0],n[1]):function(s,h){let p=0,_=0;h<0&&(h=0);const x=h/Math.sqrt(2);switch(s){case"top-right":case"top-left":_=x-7;break;case"bottom-right":case"bottom-left":_=7-x;break;case"bottom":_=7-h;break;case"top":_=h-7}switch(s){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=h;break;case"right":p=-h}return[p,_]}(o,n[0])}function my(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function zP(o,n,s,h,p,_,x,T,P,$,q){let ee=_.textMaxSize.evaluate(n,{});ee===void 0&&(ee=x);const ce=o.layers[0].layout,fe=ce.get("icon-offset").evaluate(n,{},q),ve=Ew(s.horizontal),ke=x/24,je=o.tilePixelRatio*ke,Ue=o.tilePixelRatio*ee/24,Qe=o.tilePixelRatio*T,Ze=o.tilePixelRatio*ce.get("symbol-spacing"),tt=ce.get("text-padding")*o.tilePixelRatio,ot=function(Et,nn,Ht,bn=1){const or=Et.get("icon-padding").evaluate(nn,{},Ht),ur=or&&or.values;return[ur[0]*bn,ur[1]*bn,ur[2]*bn,ur[3]*bn]}(ce,n,q,o.tilePixelRatio),mt=ce.get("text-max-angle")/180*Math.PI,Dt=ce.get("text-rotation-alignment")!=="viewport"&&ce.get("symbol-placement")!=="point",Ut=ce.get("icon-rotation-alignment")==="map"&&ce.get("symbol-placement")!=="point",jt=ce.get("symbol-placement"),Rt=Ze/2,kt=ce.get("icon-text-fit");let Bt;h&&kt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Bt=Hx(h,s.vertical,kt,ce.get("icon-text-fit-padding"),fe,ke)),ve&&(h=Hx(h,ve,kt,ce.get("icon-text-fit-padding"),fe,ke)));const Ot=(Et,nn)=>{nn.x<0||nn.x>=ir||nn.y<0||nn.y>=ir||function(Ht,bn,or,ur,$r,co,Ii,Er,Jr,ai,$i,Ai,Fr,Vr,gi,Pi,Vi,Gi,Sr,li,In,ho,ui,yi,Ho){const ds=Ht.addToLineVertexArray(bn,or);let ps,ba,Xo,Ao,Zi=0,Ea=0,uf=0,Iw=0,Ey=-1,Sy=-1;const Sa={};let Aw=Ar(""),Ty=0,Cy=0;if(Er._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Ty,Cy]=Er.layout.get("text-offset").evaluate(In,{},yi).map(Wi=>Wi*Yr):(Ty=Er.layout.get("text-radial-offset").evaluate(In,{},yi)*Yr,Cy=py),Ht.allowVerticalPlacement&&ur.vertical){const Wi=Er.layout.get("text-rotate").evaluate(In,{},yi)+90;Xo=new rp(Jr,bn,ai,$i,Ai,ur.vertical,Fr,Vr,gi,Wi),Ii&&(Ao=new rp(Jr,bn,ai,$i,Ai,Ii,Vi,Gi,gi,Wi))}if($r){const Wi=Er.layout.get("icon-rotate").evaluate(In,{}),Xs=Er.layout.get("icon-text-fit")!=="none",cf=_w($r,Wi,ui,Xs),hf=Ii?_w(Ii,Wi,ui,Xs):void 0;ba=new rp(Jr,bn,ai,$i,Ai,$r,Vi,Gi,!1,Wi),Zi=4*cf.length;const kw=Ht.iconSizeData;let vu=null;kw.kind==="source"?(vu=[Hs*Er.layout.get("icon-size").evaluate(In,{})],vu[0]>dl&&Z(`${Ht.layerIds[0]}: Value for "icon-size" is >= ${of}. Reduce your "icon-size".`)):kw.kind==="composite"&&(vu=[Hs*ho.compositeIconSizes[0].evaluate(In,{},yi),Hs*ho.compositeIconSizes[1].evaluate(In,{},yi)],(vu[0]>dl||vu[1]>dl)&&Z(`${Ht.layerIds[0]}: Value for "icon-size" is >= ${of}. Reduce your "icon-size".`)),Ht.addSymbols(Ht.icon,cf,vu,li,Sr,In,l.WritingMode.none,bn,ds.lineStartIndex,ds.lineLength,-1,yi),Ey=Ht.icon.placedSymbolArray.length-1,hf&&(Ea=4*hf.length,Ht.addSymbols(Ht.icon,hf,vu,li,Sr,In,l.WritingMode.vertical,bn,ds.lineStartIndex,ds.lineLength,-1,yi),Sy=Ht.icon.placedSymbolArray.length-1)}const Pw=Object.keys(ur.horizontal);for(const Wi of Pw){const Xs=ur.horizontal[Wi];if(!ps){Aw=Ar(Xs.text);const hf=Er.layout.get("text-rotate").evaluate(In,{},yi);ps=new rp(Jr,bn,ai,$i,Ai,Xs,Fr,Vr,gi,hf)}const cf=Xs.positionedLines.length===1;if(uf+=bw(Ht,bn,Xs,co,Er,gi,In,Pi,ds,ur.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,cf?Pw:[Wi],Sa,Ey,ho,yi),cf)break}ur.vertical&&(Iw+=bw(Ht,bn,ur.vertical,co,Er,gi,In,Pi,ds,l.WritingMode.vertical,["vertical"],Sa,Sy,ho,yi));const OP=ps?ps.boxStartIndex:Ht.collisionBoxArray.length,FP=ps?ps.boxEndIndex:Ht.collisionBoxArray.length,jP=Xo?Xo.boxStartIndex:Ht.collisionBoxArray.length,DP=Xo?Xo.boxEndIndex:Ht.collisionBoxArray.length,BP=ba?ba.boxStartIndex:Ht.collisionBoxArray.length,NP=ba?ba.boxEndIndex:Ht.collisionBoxArray.length,UP=Ao?Ao.boxStartIndex:Ht.collisionBoxArray.length,$P=Ao?Ao.boxEndIndex:Ht.collisionBoxArray.length;let ms=-1;const op=(Wi,Xs)=>Wi&&Wi.circleDiameter?Math.max(Wi.circleDiameter,Xs):Xs;ms=op(ps,ms),ms=op(Xo,ms),ms=op(ba,ms),ms=op(Ao,ms);const Mw=ms>-1?1:0;Mw&&(ms*=Ho/Yr),Ht.glyphOffsetArray.length>=bc.MAX_GLYPHS&&Z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),In.sortKey!==void 0&&Ht.addToSortKeyRanges(Ht.symbolInstances.length,In.sortKey),Ht.symbolInstances.emplaceBack(bn.x,bn.y,Sa.right>=0?Sa.right:-1,Sa.center>=0?Sa.center:-1,Sa.left>=0?Sa.left:-1,Sa.vertical||-1,Ey,Sy,Aw,OP,FP,jP,DP,BP,NP,UP,$P,ai,uf,Iw,Zi,Ea,Mw,0,Fr,Ty,Cy,ms)}(o,nn,Et,s,h,p,Bt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,je,[tt,tt,tt,tt],Dt,P,Qe,ot,Ut,fe,n,_,$,q,x)};if(jt==="line")for(const Et of dw(n.geometry,0,0,ir,ir)){const nn=IP(Et,Ze,mt,s.vertical||ve,h,24,Ue,o.overscaling,ir);for(const Ht of nn)ve&&LP(o,ve.text,Rt,Ht)||Ot(Et,Ht)}else if(jt==="line-center"){for(const Et of n.geometry)if(Et.length>1){const nn=CP(Et,mt,s.vertical||ve,h,24,Ue);nn&&Ot(Et,nn)}}else if(n.type==="Polygon")for(const Et of Hg(n.geometry,0)){const nn=MP(Et,16);Ot(Et[0],new ml(nn.x,nn.y,0))}else if(n.type==="LineString")for(const Et of n.geometry)Ot(Et,new ml(Et[0].x,Et[0].y,0));else if(n.type==="Point")for(const Et of n.geometry)for(const nn of Et)Ot([nn],new ml(nn.x,nn.y,0))}function bw(o,n,s,h,p,_,x,T,P,$,q,ee,ce,fe,ve){const ke=function(Qe,Ze,tt,ot,mt,Dt,Ut,jt){const Rt=ot.layout.get("text-rotate").evaluate(Dt,{})*Math.PI/180,kt=[];for(const Bt of Ze.positionedLines)for(const Ot of Bt.positionedGlyphs){if(!Ot.rect)continue;const Et=Ot.rect||{};let nn=Nx+1,Ht=!0,bn=1,or=0;const ur=(mt||jt)&&Ot.vertical,$r=Ot.metrics.advance*Ot.scale/2;if(jt&&Ze.verticalizable&&(or=Bt.lineOffset/2-(Ot.imageName?-(Yr-Ot.metrics.width*Ot.scale)/2:(Ot.scale-1)*Yr)),Ot.imageName){const Sr=Ut[Ot.imageName];Ht=Sr.sdf,bn=Sr.pixelRatio,nn=Ui/bn}const co=mt?[Ot.x+$r,Ot.y]:[0,0];let Ii=mt?[0,0]:[Ot.x+$r+tt[0],Ot.y+tt[1]-or],Er=[0,0];ur&&(Er=Ii,Ii=[0,0]);const Jr=(Ot.metrics.left-nn)*Ot.scale-$r+Ii[0],ai=(-Ot.metrics.top-nn)*Ot.scale+Ii[1],$i=Jr+Et.w*Ot.scale/bn,Ai=ai+Et.h*Ot.scale/bn,Fr=new E(Jr,ai),Vr=new E($i,ai),gi=new E(Jr,Ai),Pi=new E($i,Ai);if(ur){const Sr=new E(-$r,$r-nf),li=-Math.PI/2,In=Yr/2-$r,ho=new E(5-nf-In,-(Ot.imageName?In:0)),ui=new E(...Er);Fr._rotateAround(li,Sr)._add(ho)._add(ui),Vr._rotateAround(li,Sr)._add(ho)._add(ui),gi._rotateAround(li,Sr)._add(ho)._add(ui),Pi._rotateAround(li,Sr)._add(ho)._add(ui)}if(Rt){const Sr=Math.sin(Rt),li=Math.cos(Rt),In=[li,-Sr,Sr,li];Fr._matMult(In),Vr._matMult(In),gi._matMult(In),Pi._matMult(In)}const Vi=new E(0,0),Gi=new E(0,0);kt.push({tl:Fr,tr:Vr,bl:gi,br:Pi,tex:Et,writingMode:Ze.writingMode,glyphOffset:co,sectionIndex:Ot.sectionIndex,isSDF:Ht,pixelOffsetTL:Vi,pixelOffsetBR:Gi,minFontScaleX:0,minFontScaleY:0})}return kt}(0,s,T,p,_,x,h,o.allowVerticalPlacement),je=o.textSizeData;let Ue=null;je.kind==="source"?(Ue=[Hs*p.layout.get("text-size").evaluate(x,{})],Ue[0]>dl&&Z(`${o.layerIds[0]}: Value for "text-size" is >= ${of}. Reduce your "text-size".`)):je.kind==="composite"&&(Ue=[Hs*fe.compositeTextSizes[0].evaluate(x,{},ve),Hs*fe.compositeTextSizes[1].evaluate(x,{},ve)],(Ue[0]>dl||Ue[1]>dl)&&Z(`${o.layerIds[0]}: Value for "text-size" is >= ${of}. Reduce your "text-size".`)),o.addSymbols(o.text,ke,Ue,T,_,x,$,n,P.lineStartIndex,P.lineLength,ce,ve);for(const Qe of q)ee[Qe]=o.text.placedSymbolArray.length-1;return 4*ke.length}function Ew(o){for(const n in o)return o[n];return null}function LP(o,n,s,h){const p=o.compareText;if(n in p){const _=p[n];for(let x=_.length-1;x>=0;x--)if(h.dist(_[x])<s)return!0}else p[n]=[];return p[n].push(h),!1}const Sw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class gy{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const _=Sw[15&h];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[T]=new Uint32Array(n,4,1);return new gy(T,x,_,n)}constructor(n,s=64,h=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const _=Sw.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,T=n*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-T%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+P,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+T+P),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+P,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return yy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:T}=this,P=[0,_.length-1,0],$=[];for(;P.length;){const q=P.pop()||0,ee=P.pop()||0,ce=P.pop()||0;if(ee-ce<=T){for(let je=ce;je<=ee;je++){const Ue=x[2*je],Qe=x[2*je+1];Ue>=n&&Ue<=h&&Qe>=s&&Qe<=p&&$.push(_[je])}continue}const fe=ce+ee>>1,ve=x[2*fe],ke=x[2*fe+1];ve>=n&&ve<=h&&ke>=s&&ke<=p&&$.push(_[fe]),(q===0?n<=ve:s<=ke)&&(P.push(ce),P.push(fe-1),P.push(1-q)),(q===0?h>=ve:p>=ke)&&(P.push(fe+1),P.push(ee),P.push(1-q))}return $}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:_,nodeSize:x}=this,T=[0,p.length-1,0],P=[],$=h*h;for(;T.length;){const q=T.pop()||0,ee=T.pop()||0,ce=T.pop()||0;if(ee-ce<=x){for(let je=ce;je<=ee;je++)Cw(_[2*je],_[2*je+1],n,s)<=$&&P.push(p[je]);continue}const fe=ce+ee>>1,ve=_[2*fe],ke=_[2*fe+1];Cw(ve,ke,n,s)<=$&&P.push(p[fe]),(q===0?n-h<=ve:s-h<=ke)&&(T.push(ce),T.push(fe-1),T.push(1-q)),(q===0?n+h>=ve:s+h>=ke)&&(T.push(fe+1),T.push(ee),T.push(1-q))}return P}}function yy(o,n,s,h,p,_){if(p-h<=s)return;const x=h+p>>1;Tw(o,n,x,h,p,_),yy(o,n,s,h,x-1,1-_),yy(o,n,s,x+1,p,1-_)}function Tw(o,n,s,h,p,_){for(;p>h;){if(p-h>600){const $=p-h+1,q=s-h+1,ee=Math.log($),ce=.5*Math.exp(2*ee/3),fe=.5*Math.sqrt(ee*ce*($-ce)/$)*(q-$/2<0?-1:1);Tw(o,n,s,Math.max(h,Math.floor(s-q*ce/$+fe)),Math.min(p,Math.floor(s+($-q)*ce/$+fe)),_)}const x=n[2*s+_];let T=h,P=p;for(af(o,n,h,s),n[2*p+_]>x&&af(o,n,h,p);T<P;){for(af(o,n,T,P),T++,P--;n[2*T+_]<x;)T++;for(;n[2*P+_]>x;)P--}n[2*h+_]===x?af(o,n,h,P):(P++,af(o,n,P,p)),P<=s&&(h=P+1),s<=P&&(p=P-1)}}function af(o,n,s,h){vy(o,s,h),vy(n,2*s,2*h),vy(n,2*s+1,2*h+1)}function vy(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function Cw(o,n,s,h){const p=o-s,_=n-h;return p*p+_*_}var _y;l.PerformanceMarkers=void 0,(_y=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",_y.load="load",_y.fullLoad="fullLoad";let ip=null,lf=[];const xy=1e3/60,wy="loadTime",by="fullLoadTime",RP={mark(o){performance.mark(o)},frame(o){const n=o;ip!=null&&lf.push(n-ip),ip=n},clearMetrics(){ip=null,lf=[],performance.clearMeasures(wy),performance.clearMeasures(by);for(const o in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure(wy,l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure(by,l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName(wy)[0].duration,n=performance.getEntriesByName(by)[0].duration,s=lf.length,h=1/(lf.reduce((_,x)=>_+x,0)/s/1e3),p=lf.filter(_=>_>xy).reduce((_,x)=>_+(x-xy)/xy,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};l.AJAXError=we,l.ARRAY_TYPE=gc,l.Actor=class{constructor(o,n,s){this.receive=h=>{const p=h.data,_=p.id;if(_&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[_];const x=this.cancelCallbacks[_];delete this.cancelCallbacks[_],x&&x()}else ye()||p.mustQueue?(this.tasks[_]=p,this.taskQueue.push(_),this.invoker.trigger()):this.processTask(_,p)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),p=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(h,p)},this.target=o,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new SP(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ye()?o:window}send(o,n,s,h,p=!1){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[_]=s);const x=be(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:o,hasCallback:!!s,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:wr(n,x)},x),{cancel:()=>{s&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(o,n){if(n.type==="<response>"){const s=this.callbacks[o];delete this.callbacks[o],s&&(n.error?s(tr(n.error)):s(null,tr(n.data)))}else{let s=!1;const h=be(this.globalScope)?void 0:[],p=n.hasCallback?(T,P)=>{s=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:T?wr(T):null,data:wr(P,h)},h)}:T=>{s=!0};let _=null;const x=tr(n.data);if(this.parent[n.type])_=this.parent[n.type](n.sourceMapId,x,p);else if(this.parent.getWorkerSource){const T=n.type.split(".");_=this.parent.getWorkerSource(n.sourceMapId,T[0],x.source)[T[1]](x,p)}else p(new Error(`Could not find function ${n.type}`));!s&&_&&_.cancel&&(this.cancelCallbacks[o]=_.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=Xh,l.CanonicalTileID=dy,l.CollisionBoxArray=m,l.CollisionCircleLayoutArray=class extends xa{},l.Color=dn,l.DEMData=aw,l.DataConstantProperty=Wt,l.DictionaryCoder=lw,l.EXTENT=ir,l.ErrorEvent=ht,l.EvaluationParameters=lr,l.Event=At,l.Evented=bt,l.FeatureIndex=cw,l.FillBucket=Kg,l.FillExtrusionBucket=Jg,l.GeoJSONFeature=uw,l.ImageAtlas=$x,l.ImagePosition=ry,l.KDBush=gy,l.LineBucket=Qg,l.LineStripIndexArray=class extends r{},l.LngLat=pl,l.MercatorCoordinate=Qd,l.ONE_EM=Yr,l.OverscaledTileID=Io,l.PerformanceUtils=RP,l.Point=E,l.Pos3dArray=class extends lc{},l.PosArray=Ie,l.Properties=Ti,l.Protobuf=ty,l.QuadTriangleArray=class extends hc{},l.RGBAImage=Co,l.RasterBoundsArray=class extends Zo{},l.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.SegmentVector=It,l.SymbolBucket=bc,l.Transitionable=Od,l.TriangleIndexArray=dt,l.Uniform1f=Wo,l.Uniform1i=class extends mi{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.Uniform2f=class extends mi{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.Uniform3f=class extends mi{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.Uniform4f=pu,l.UniformColor=si,l.UniformMatrix4f=class extends mi{constructor(o,n){super(o,n),this.current=qr}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.UnwrappedTileID=sw,l.ValidationError=De,l.ZoomHistory=Eo,l.addDynamicAttributes=ay,l.arrayBufferToImage=function(o,n){const s=new Image;s.onload=()=>{n(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=le})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(o)],{type:"image/png"});s.src=o.byteLength?URL.createObjectURL(h):le},l.arrayBufferToImageBitmap=function(o,n){const s=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(s).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.asyncAll=function(o,n,s){if(!o.length)return s(null,[]);let h=o.length;const p=new Array(o.length);let _=null;o.forEach((x,T)=>{n(x,(P,$)=>{P&&(_=P),p[T]=$,--h==0&&s(_,p)})})},l.bezier=Y,l.browser=ge,l.clamp=G,l.clipLine=dw,l.clone=function(o){var n=new gc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},l.clone$1=S,l.collisionCircleLayout=JA,l.config=Ee,l.copy=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.create=function(){var o=new gc(16);return gc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l.createExpression=Bs,l.createFilter=rl,l.createLayout=Or,l.createStyleLayer=function(o){if(o.type==="custom")return new EP(o);switch(o.type){case"background":return new xP(o);case"circle":return new oA(o);case"fill":return new TA(o);case"fill-extrusion":return new NA(o);case"heatmap":return new aA(o);case"hillshade":return new uA(o);case"line":return new XA(o);case"raster":return new bP(o);case"symbol":return new Jd(o)}},l.deepEqual=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},l.defaultEasing=pe,l.derefLayers=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=un(o[s],n[o[s].ref]));return o},l.diffStyles=function(o,n){if(!o)return[{command:Gt.setStyle,args:[n]}];let s=[];try{if(!Xt(o.version,n.version))return[{command:Gt.setStyle,args:[n]}];Xt(o.center,n.center)||s.push({command:Gt.setCenter,args:[n.center]}),Xt(o.zoom,n.zoom)||s.push({command:Gt.setZoom,args:[n.zoom]}),Xt(o.bearing,n.bearing)||s.push({command:Gt.setBearing,args:[n.bearing]}),Xt(o.pitch,n.pitch)||s.push({command:Gt.setPitch,args:[n.pitch]}),Xt(o.sprite,n.sprite)||s.push({command:Gt.setSprite,args:[n.sprite]}),Xt(o.glyphs,n.glyphs)||s.push({command:Gt.setGlyphs,args:[n.glyphs]}),Xt(o.transition,n.transition)||s.push({command:Gt.setTransition,args:[n.transition]}),Xt(o.light,n.light)||s.push({command:Gt.setLight,args:[n.light]});const h={},p=[];(function(x,T,P,$){let q;for(q in T=T||{},x=x||{})Object.prototype.hasOwnProperty.call(x,q)&&(Object.prototype.hasOwnProperty.call(T,q)||vn(q,P,$));for(q in T)Object.prototype.hasOwnProperty.call(T,q)&&(Object.prototype.hasOwnProperty.call(x,q)?Xt(x[q],T[q])||(x[q].type==="geojson"&&T[q].type==="geojson"&&F(x,T,q)?P.push({command:Gt.setGeoJSONSourceData,args:[q,T[q].data]}):Se(q,T,P,$)):an(q,T,P))})(o.sources,n.sources,p,h);const _=[];o.layers&&o.layers.forEach(x=>{h[x.source]?s.push({command:Gt.removeLayer,args:[x.id]}):_.push(x)}),s=s.concat(p),function(x,T,P){T=T||[];const $=(x=x||[]).map(_e),q=T.map(_e),ee=x.reduce(We,{}),ce=T.reduce(We,{}),fe=$.slice(),ve=Object.create(null);let ke,je,Ue,Qe,Ze,tt,ot;for(ke=0,je=0;ke<$.length;ke++)Ue=$[ke],Object.prototype.hasOwnProperty.call(ce,Ue)?je++:(P.push({command:Gt.removeLayer,args:[Ue]}),fe.splice(fe.indexOf(Ue,je),1));for(ke=0,je=0;ke<q.length;ke++)Ue=q[q.length-1-ke],fe[fe.length-1-ke]!==Ue&&(Object.prototype.hasOwnProperty.call(ee,Ue)?(P.push({command:Gt.removeLayer,args:[Ue]}),fe.splice(fe.lastIndexOf(Ue,fe.length-je),1)):je++,tt=fe[fe.length-ke],P.push({command:Gt.addLayer,args:[ce[Ue],tt]}),fe.splice(fe.length-ke,0,Ue),ve[Ue]=!0);for(ke=0;ke<q.length;ke++)if(Ue=q[ke],Qe=ee[Ue],Ze=ce[Ue],!ve[Ue]&&!Xt(Qe,Ze))if(Xt(Qe.source,Ze.source)&&Xt(Qe["source-layer"],Ze["source-layer"])&&Xt(Qe.type,Ze.type)){for(ot in R(Qe.layout,Ze.layout,P,Ue,null,Gt.setLayoutProperty),R(Qe.paint,Ze.paint,P,Ue,null,Gt.setPaintProperty),Xt(Qe.filter,Ze.filter)||P.push({command:Gt.setFilter,args:[Ue,Ze.filter]}),Xt(Qe.minzoom,Ze.minzoom)&&Xt(Qe.maxzoom,Ze.maxzoom)||P.push({command:Gt.setLayerZoomRange,args:[Ue,Ze.minzoom,Ze.maxzoom]}),Qe)Object.prototype.hasOwnProperty.call(Qe,ot)&&ot!=="layout"&&ot!=="paint"&&ot!=="filter"&&ot!=="metadata"&&ot!=="minzoom"&&ot!=="maxzoom"&&(ot.indexOf("paint.")===0?R(Qe[ot],Ze[ot],P,Ue,ot.slice(6),Gt.setPaintProperty):Xt(Qe[ot],Ze[ot])||P.push({command:Gt.setLayerProperty,args:[Ue,ot,Ze[ot]]}));for(ot in Ze)Object.prototype.hasOwnProperty.call(Ze,ot)&&!Object.prototype.hasOwnProperty.call(Qe,ot)&&ot!=="layout"&&ot!=="paint"&&ot!=="filter"&&ot!=="metadata"&&ot!=="minzoom"&&ot!=="maxzoom"&&(ot.indexOf("paint.")===0?R(Qe[ot],Ze[ot],P,Ue,ot.slice(6),Gt.setPaintProperty):Xt(Qe[ot],Ze[ot])||P.push({command:Gt.setLayerProperty,args:[Ue,ot,Ze[ot]]}))}else P.push({command:Gt.removeLayer,args:[Ue]}),tt=fe[fe.lastIndexOf(Ue)+1],P.push({command:Gt.addLayer,args:[Ze,tt]})}(_,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:Gt.setStyle,args:[n]}]}return s},l.dot=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},l.earthRadius=hy,l.emitValidationErrors=mn,l.emptyStyle=function(){const o={},n=Ye.$version;for(const s in Ye.$root){const h=Ye.$root[s];if(h.required){let p=null;p=s==="version"?n:h.type==="array"?[]:{},p!=null&&(o[s]=p)}}return o},l.equals=function(o,n){var s=o[0],h=o[1],p=o[2],_=o[3],x=o[4],T=o[5],P=o[6],$=o[7],q=o[8],ee=o[9],ce=o[10],fe=o[11],ve=o[12],ke=o[13],je=o[14],Ue=o[15],Qe=n[0],Ze=n[1],tt=n[2],ot=n[3],mt=n[4],Dt=n[5],Ut=n[6],jt=n[7],Rt=n[8],kt=n[9],Bt=n[10],Ot=n[11],Et=n[12],nn=n[13],Ht=n[14],bn=n[15];return Math.abs(s-Qe)<=Ci*Math.max(1,Math.abs(s),Math.abs(Qe))&&Math.abs(h-Ze)<=Ci*Math.max(1,Math.abs(h),Math.abs(Ze))&&Math.abs(p-tt)<=Ci*Math.max(1,Math.abs(p),Math.abs(tt))&&Math.abs(_-ot)<=Ci*Math.max(1,Math.abs(_),Math.abs(ot))&&Math.abs(x-mt)<=Ci*Math.max(1,Math.abs(x),Math.abs(mt))&&Math.abs(T-Dt)<=Ci*Math.max(1,Math.abs(T),Math.abs(Dt))&&Math.abs(P-Ut)<=Ci*Math.max(1,Math.abs(P),Math.abs(Ut))&&Math.abs($-jt)<=Ci*Math.max(1,Math.abs($),Math.abs(jt))&&Math.abs(q-Rt)<=Ci*Math.max(1,Math.abs(q),Math.abs(Rt))&&Math.abs(ee-kt)<=Ci*Math.max(1,Math.abs(ee),Math.abs(kt))&&Math.abs(ce-Bt)<=Ci*Math.max(1,Math.abs(ce),Math.abs(Bt))&&Math.abs(fe-Ot)<=Ci*Math.max(1,Math.abs(fe),Math.abs(Ot))&&Math.abs(ve-Et)<=Ci*Math.max(1,Math.abs(ve),Math.abs(Et))&&Math.abs(ke-nn)<=Ci*Math.max(1,Math.abs(ke),Math.abs(nn))&&Math.abs(je-Ht)<=Ci*Math.max(1,Math.abs(je),Math.abs(Ht))&&Math.abs(Ue-bn)<=Ci*Math.max(1,Math.abs(Ue),Math.abs(bn))},l.evaluateSizeForFeature=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/Hs:o.kind==="composite"?pi.number(h/Hs,p/Hs,s):n},l.evaluateSizeForZoom=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:_,maxZoom:x}=o,T=p?G(ei.interpolationFactor(p,n,_,x),0,1):0;o.kind==="camera"?h=pi.number(o.minSize,o.maxSize,T):s=T}return{uSizeT:s,uSize:h}},l.evaluateVariableOffset=ww,l.evented=rc,l.extend=N,l.filterObject=B,l.findLineIntersection=function(o,n,s,h){const p=n.y-o.y,_=n.x-o.x,x=h.y-s.y,T=h.x-s.x,P=x*_-T*p;if(P===0)return null;const $=(T*(o.y-s.y)-x*(o.x-s.x))/P;return new E(o.x+$*_,o.y+$*p)},l.fromScaling=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},l.getAnchorAlignment=oy,l.getAnchorJustification=my,l.getArrayBuffer=Ge,l.getDefaultExportFromCjs=b,l.getJSON=function(o,n){return He(N(o,{type:"json"}),n)},l.getOverlapMode=sy,l.getProtocolAction=ze,l.getRTLTextPluginStatus=Oh,l.getReferrer=Ne,l.getVideo=function(o,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<o.length;h++){const p=window.document.createElement("source");it(o[h])||(s.crossOrigin="Anonymous"),p.src=o[h],s.appendChild(p)}return{cancel:()=>{}}},l.groupByLayout=function(o,n){const s={};for(let p=0;p<o.length;p++){const _=n&&n[o[p].id]||Uo(o[p]);n&&(n[o[p].id]=_);let x=s[_];x||(x=s[_]=[]),x.push(o[p])}const h=[];for(const p in s)h.push(s[p]);return h},l.identity=Ng,l.interpolate=pi,l.invert=function(o,n){var s=n[0],h=n[1],p=n[2],_=n[3],x=n[4],T=n[5],P=n[6],$=n[7],q=n[8],ee=n[9],ce=n[10],fe=n[11],ve=n[12],ke=n[13],je=n[14],Ue=n[15],Qe=s*T-h*x,Ze=s*P-p*x,tt=s*$-_*x,ot=h*P-p*T,mt=h*$-_*T,Dt=p*$-_*P,Ut=q*ke-ee*ve,jt=q*je-ce*ve,Rt=q*Ue-fe*ve,kt=ee*je-ce*ke,Bt=ee*Ue-fe*ke,Ot=ce*Ue-fe*je,Et=Qe*Ot-Ze*Bt+tt*kt+ot*Rt-mt*jt+Dt*Ut;return Et?(o[0]=(T*Ot-P*Bt+$*kt)*(Et=1/Et),o[1]=(p*Bt-h*Ot-_*kt)*Et,o[2]=(ke*Dt-je*mt+Ue*ot)*Et,o[3]=(ce*mt-ee*Dt-fe*ot)*Et,o[4]=(P*Rt-x*Ot-$*jt)*Et,o[5]=(s*Ot-p*Rt+_*jt)*Et,o[6]=(je*tt-ve*Dt-Ue*Ze)*Et,o[7]=(q*Dt-ce*tt+fe*Ze)*Et,o[8]=(x*Bt-T*Rt+$*Ut)*Et,o[9]=(h*Rt-s*Bt-_*Ut)*Et,o[10]=(ve*mt-ke*tt+Ue*Qe)*Et,o[11]=(ee*tt-q*mt-fe*Qe)*Et,o[12]=(T*jt-x*kt-P*Ut)*Et,o[13]=(s*kt-h*jt+p*Ut)*Et,o[14]=(ke*Ze-ve*ot-je*Qe)*Et,o[15]=(q*ot-ee*Ze+ce*Qe)*Et,o):null},l.isImageBitmap=te,l.isSafari=be,l.isWorker=ye,l.keysDifference=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},l.lazyLoadRTLTextPlugin=function(){uo.isLoading()||uo.isLoaded()||Oh()!=="deferred"||Rd()},l.makeRequest=He,l.mapObject=W,l.mercatorXfromLng=nw,l.mercatorYfromLat=rw,l.mercatorZfromAltitude=iw,l.mul=iA,l.mul$1=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},l.multiply=ax,l.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.operations=Gt,l.ortho=function(o,n,s,h,p,_,x){var T=1/(n-s),P=1/(h-p),$=1/(_-x);return o[0]=-2*T,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*P,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*$,o[11]=0,o[12]=(n+s)*T,o[13]=(p+h)*P,o[14]=(x+_)*$,o[15]=1,o},l.parseCacheControl=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,p,_)=>{const x=p||_;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},l.parseGlyphPbf=function(o){return new ty(o).readFields(uP,[])},l.pbf=Lx,l.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=ir/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0].layout,s=o.bucket.layers[0]._unevaluatedLayout._values,h={layoutIconSize:s["icon-size"].possiblyEvaluate(new lr(o.bucket.zoom+1),o.canonical),layoutTextSize:s["text-size"].possiblyEvaluate(new lr(o.bucket.zoom+1),o.canonical),textMaxSize:s["text-size"].possiblyEvaluate(new lr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:P,maxZoom:$}=o.bucket.textSizeData;h.compositeTextSizes=[s["text-size"].possiblyEvaluate(new lr(P),o.canonical),s["text-size"].possiblyEvaluate(new lr($),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:P,maxZoom:$}=o.bucket.iconSizeData;h.compositeIconSizes=[s["icon-size"].possiblyEvaluate(new lr(P),o.canonical),s["icon-size"].possiblyEvaluate(new lr($),o.canonical)]}const p=n.get("text-line-height")*Yr,_=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",x=n.get("text-keep-upright"),T=n.get("text-size");for(const P of o.bucket.features){const $=n.get("text-font").evaluate(P,{},o.canonical).join(","),q=T.evaluate(P,{},o.canonical),ee=h.layoutTextSize.evaluate(P,{},o.canonical),ce=h.layoutIconSize.evaluate(P,{},o.canonical),fe={horizontal:{},vertical:void 0},ve=P.text;let ke,je=[0,0];if(ve){const Ze=ve.toString(),tt=n.get("text-letter-spacing").evaluate(P,{},o.canonical)*Yr,ot=al(Ze)?tt:0,mt=n.get("text-anchor").evaluate(P,{},o.canonical),Dt=n.get("text-variable-anchor");if(!Dt){const Bt=n.get("text-radial-offset").evaluate(P,{},o.canonical);je=Bt?ww(mt,[Bt*Yr,py]):n.get("text-offset").evaluate(P,{},o.canonical).map(Ot=>Ot*Yr)}let Ut=_?"center":n.get("text-justify").evaluate(P,{},o.canonical);const jt=n.get("symbol-placement"),Rt=jt==="point"?n.get("text-max-width").evaluate(P,{},o.canonical)*Yr:0,kt=()=>{o.bucket.allowVerticalPlacement&&lo(Ze)&&(fe.vertical=qd(ve,o.glyphMap,o.glyphPositions,o.imagePositions,$,Rt,p,mt,"left",ot,je,l.WritingMode.vertical,!0,jt,ee,q))};if(!_&&Dt){const Bt=Ut==="auto"?Dt.map(Et=>my(Et)):[Ut];let Ot=!1;for(let Et=0;Et<Bt.length;Et++){const nn=Bt[Et];if(!fe.horizontal[nn])if(Ot)fe.horizontal[nn]=fe.horizontal[0];else{const Ht=qd(ve,o.glyphMap,o.glyphPositions,o.imagePositions,$,Rt,p,"center",nn,ot,je,l.WritingMode.horizontal,!1,jt,ee,q);Ht&&(fe.horizontal[nn]=Ht,Ot=Ht.positionedLines.length===1)}}kt()}else{Ut==="auto"&&(Ut=my(mt));const Bt=qd(ve,o.glyphMap,o.glyphPositions,o.imagePositions,$,Rt,p,mt,Ut,ot,je,l.WritingMode.horizontal,!1,jt,ee,q);Bt&&(fe.horizontal[Ut]=Bt),kt(),lo(Ze)&&_&&x&&(fe.vertical=qd(ve,o.glyphMap,o.glyphPositions,o.imagePositions,$,Rt,p,mt,Ut,ot,je,l.WritingMode.vertical,!1,jt,ee,q))}}let Ue=!1;if(P.icon&&P.icon.name){const Ze=o.imageMap[P.icon.name];Ze&&(ke=mP(o.imagePositions[P.icon.name],n.get("icon-offset").evaluate(P,{},o.canonical),n.get("icon-anchor").evaluate(P,{},o.canonical)),Ue=!!Ze.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Ue:o.bucket.sdfIcons!==Ue&&Z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ze.pixelRatio!==o.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Qe=Ew(fe.horizontal)||fe.vertical;o.bucket.iconsInText=!!Qe&&Qe.iconsInText,(Qe||ke)&&zP(o.bucket,P,fe,ke,o.imageMap,h,ee,ce,je,Ue,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},l.perspective=function(o,n,s,h,p){var _,x=1/Math.tan(n/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(_=1/(h-p)),o[14]=2*p*h*_):(o[10]=-1,o[14]=-2*h),o},l.pick=function(o,n){const s={};for(let h=0;h<n.length;h++){const p=n[h];p in o&&(s[p]=o[p])}return s},l.plugin=uo,l.pointGeometry=w,l.polygonIntersectsPolygon=tx,l.potpack=Ux,l.register=St,l.registerForPluginStateChange=function(o){return o({pluginStatus:Si,pluginURL:Ws}),rc.on("pluginStateChange",o),o},l.renderColorRamp=fx,l.rotateX=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),_=n[4],x=n[5],T=n[6],P=n[7],$=n[8],q=n[9],ee=n[10],ce=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=_*p+$*h,o[5]=x*p+q*h,o[6]=T*p+ee*h,o[7]=P*p+ce*h,o[8]=$*p-_*h,o[9]=q*p-x*h,o[10]=ee*p-T*h,o[11]=ce*p-P*h,o},l.rotateZ=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),_=n[0],x=n[1],T=n[2],P=n[3],$=n[4],q=n[5],ee=n[6],ce=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=_*p+$*h,o[1]=x*p+q*h,o[2]=T*p+ee*h,o[3]=P*p+ce*h,o[4]=$*p-_*h,o[5]=q*p-x*h,o[6]=ee*p-T*h,o[7]=ce*p-P*h,o},l.sameOrigin=it,l.scale=function(o,n,s){var h=s[0],p=s[1],_=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*p,o[5]=n[5]*p,o[6]=n[6]*p,o[7]=n[7]*p,o[8]=n[8]*_,o[9]=n[9]*_,o[10]=n[10]*_,o[11]=n[11]*_,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.setRTLTextPlugin=function(o,n,s=!1){if(Si===zh||Si===nc||Si===Lh)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ws=ge.resolveURL(o),Si=zh,uu=n,Rh(),s||Rd()},l.sphericalToCartesian=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},l.toEvaluationFeature=gu,l.transformMat4=$d,l.translate=function(o,n,s){var h,p,_,x,T,P,$,q,ee,ce,fe,ve,ke=s[0],je=s[1],Ue=s[2];return n===o?(o[12]=n[0]*ke+n[4]*je+n[8]*Ue+n[12],o[13]=n[1]*ke+n[5]*je+n[9]*Ue+n[13],o[14]=n[2]*ke+n[6]*je+n[10]*Ue+n[14],o[15]=n[3]*ke+n[7]*je+n[11]*Ue+n[15]):(p=n[1],_=n[2],x=n[3],T=n[4],P=n[5],$=n[6],q=n[7],ee=n[8],ce=n[9],fe=n[10],ve=n[11],o[0]=h=n[0],o[1]=p,o[2]=_,o[3]=x,o[4]=T,o[5]=P,o[6]=$,o[7]=q,o[8]=ee,o[9]=ce,o[10]=fe,o[11]=ve,o[12]=h*ke+T*je+ee*Ue+n[12],o[13]=p*ke+P*je+ce*Ue+n[13],o[14]=_*ke+$*je+fe*Ue+n[14],o[15]=x*ke+q*je+ve*Ue+n[15]),o},l.triggerPluginCompletionEvent=Ld,l.unicodeBlockLookup=Ct,l.uniqueId=function(){return oe++},l.v8Spec=Ye,l.validateCustomStyleLayer=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},l.validateLight=Tt,l.validateStyle=zt,l.vectorTile=hl,l.warnOnce=Z,l.wrap=V}),f(["./shared"],function(l){class b{constructor(ie){this.keyCache={},ie&&this.replace(ie)}replace(ie){this._layerConfigs={},this._layers={},this.update(ie,[])}update(ie,se){for(const Te of ie){this._layerConfigs[Te.id]=Te;const Re=this._layers[Te.id]=l.createStyleLayer(Te);Re._featureFilter=l.createFilter(Re.filter),this.keyCache[Te.id]&&delete this.keyCache[Te.id]}for(const Te of se)delete this.keyCache[Te],delete this._layerConfigs[Te],delete this._layers[Te];this.familiesBySource={};const de=l.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const Te of de){const Re=Te.map(_t=>this._layers[_t.id]),Xe=Re[0];if(Xe.visibility==="none")continue;const Ve=Xe.source||"";let $e=this.familiesBySource[Ve];$e||($e=this.familiesBySource[Ve]={});const Je=Xe.sourceLayer||"_geojsonTileLayer";let pt=$e[Je];pt||(pt=$e[Je]=[]),pt.push(Re)}}}class w{constructor(ie){const se={},de=[];for(const Ve in ie){const $e=ie[Ve],Je=se[Ve]={};for(const pt in $e){const _t=$e[+pt];if(!_t||_t.bitmap.width===0||_t.bitmap.height===0)continue;const yt={x:0,y:0,w:_t.bitmap.width+2,h:_t.bitmap.height+2};de.push(yt),Je[pt]={rect:yt,metrics:_t.metrics}}}const{w:Te,h:Re}=l.potpack(de),Xe=new l.AlphaImage({width:Te||1,height:Re||1});for(const Ve in ie){const $e=ie[Ve];for(const Je in $e){const pt=$e[+Je];if(!pt||pt.bitmap.width===0||pt.bitmap.height===0)continue;const _t=se[Ve][Je].rect;l.AlphaImage.copy(pt.bitmap,Xe,{x:0,y:0},{x:_t.x+1,y:_t.y+1},pt.bitmap)}}this.image=Xe,this.positions=se}}l.register("GlyphAtlas",w);class I{constructor(ie){this.tileID=new l.OverscaledTileID(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId}parse(ie,se,de,Te,Re){this.status="parsing",this.data=ie,this.collisionBoxArray=new l.CollisionBoxArray;const Xe=new l.DictionaryCoder(Object.keys(ie.layers).sort()),Ve=new l.FeatureIndex(this.tileID,this.promoteId);Ve.bucketLayerIDs=[];const $e={},Je={featureIndex:Ve,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:de},pt=se.familiesBySource[this.source];for(const yn in pt){const Vn=ie.layers[yn];if(!Vn)continue;Vn.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${yn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const qn=Xe.encode(yn),dn=[];for(let er=0;er<Vn.length;er++){const sr=Vn.feature(er),pr=Ve.getId(sr,yn);dn.push({feature:sr,id:pr,index:er,sourceLayerIndex:qn})}for(const er of pt[yn]){const sr=er[0];sr.source!==this.source&&l.warnOnce(`layer.source = ${sr.source} does not equal this.source = ${this.source}`),sr.minzoom&&this.zoom<Math.floor(sr.minzoom)||sr.maxzoom&&this.zoom>=sr.maxzoom||sr.visibility!=="none"&&(E(er,this.zoom,de),($e[sr.id]=sr.createBucket({index:Ve.bucketLayerIDs.length,layers:er,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:qn,sourceID:this.source})).populate(dn,Je,this.tileID.canonical),Ve.bucketLayerIDs.push(er.map(pr=>pr.id)))}}let _t,yt,tn,cn;const Nt=l.mapObject(Je.glyphDependencies,yn=>Object.keys(yn).map(Number));Object.keys(Nt).length?Te.send("getGlyphs",{uid:this.uid,stacks:Nt,source:this.source,tileID:this.tileID,type:"glyphs"},(yn,Vn)=>{_t||(_t=yn,yt=Vn,En.call(this))}):yt={};const qt=Object.keys(Je.iconDependencies);qt.length?Te.send("getImages",{icons:qt,source:this.source,tileID:this.tileID,type:"icons"},(yn,Vn)=>{_t||(_t=yn,tn=Vn,En.call(this))}):tn={};const ln=Object.keys(Je.patternDependencies);function En(){if(_t)return Re(_t);if(yt&&tn&&cn){const yn=new w(yt),Vn=new l.ImageAtlas(tn,cn);for(const qn in $e){const dn=$e[qn];dn instanceof l.SymbolBucket?(E(dn.layers,this.zoom,de),l.performSymbolLayout({bucket:dn,glyphMap:yt,glyphPositions:yn.positions,imageMap:tn,imagePositions:Vn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):dn.hasPattern&&(dn instanceof l.LineBucket||dn instanceof l.FillBucket||dn instanceof l.FillExtrusionBucket)&&(E(dn.layers,this.zoom,de),dn.addFeatures(Je,this.tileID.canonical,Vn.patternPositions))}this.status="done",Re(null,{buckets:Object.values($e).filter(qn=>!qn.isEmpty()),featureIndex:Ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:yn.image,imageAtlas:Vn,glyphMap:this.returnDependencies?yt:null,iconMap:this.returnDependencies?tn:null,glyphPositions:this.returnDependencies?yn.positions:null})}}ln.length?Te.send("getImages",{icons:ln,source:this.source,tileID:this.tileID,type:"patterns"},(yn,Vn)=>{_t||(_t=yn,cn=Vn,En.call(this))}):cn={},En.call(this)}}function E(Ae,ie,se){const de=new l.EvaluationParameters(ie);for(const Te of Ae)Te.recalculate(de,se)}function z(Ae,ie){const se=l.getArrayBuffer(Ae.request,(de,Te,Re,Xe)=>{de?ie(de):Te&&ie(null,{vectorTile:new l.vectorTile.VectorTile(new l.Protobuf(Te)),rawData:Te,cacheControl:Re,expires:Xe})});return()=>{se.cancel(),ie()}}class O{constructor(ie,se,de,Te){this.actor=ie,this.layerIndex=se,this.availableImages=de,this.loadVectorData=Te||z,this.loading={},this.loaded={}}loadTile(ie,se){const de=ie.uid;this.loading||(this.loading={});const Te=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new l.RequestPerformance(ie.request),Re=this.loading[de]=new I(ie);Re.abort=this.loadVectorData(ie,(Xe,Ve)=>{if(delete this.loading[de],Xe||!Ve)return Re.status="done",this.loaded[de]=Re,se(Xe);const $e=Ve.rawData,Je={};Ve.expires&&(Je.expires=Ve.expires),Ve.cacheControl&&(Je.cacheControl=Ve.cacheControl);const pt={};if(Te){const _t=Te.finish();_t&&(pt.resourceTiming=JSON.parse(JSON.stringify(_t)))}Re.vectorTile=Ve.vectorTile,Re.parse(Ve.vectorTile,this.layerIndex,this.availableImages,this.actor,(_t,yt)=>{if(_t||!yt)return se(_t);se(null,l.extend({rawTileData:$e.slice(0)},yt,Je,pt))}),this.loaded=this.loaded||{},this.loaded[de]=Re})}reloadTile(ie,se){const de=this.loaded,Te=ie.uid,Re=this;if(de&&de[Te]){const Xe=de[Te];Xe.showCollisionBoxes=ie.showCollisionBoxes;const Ve=($e,Je)=>{const pt=Xe.reloadCallback;pt&&(delete Xe.reloadCallback,Xe.parse(Xe.vectorTile,Re.layerIndex,this.availableImages,Re.actor,pt)),se($e,Je)};Xe.status==="parsing"?Xe.reloadCallback=Ve:Xe.status==="done"&&(Xe.vectorTile?Xe.parse(Xe.vectorTile,this.layerIndex,this.availableImages,this.actor,Ve):Ve())}}abortTile(ie,se){const de=this.loading,Te=ie.uid;de&&de[Te]&&de[Te].abort&&(de[Te].abort(),delete de[Te]),se()}removeTile(ie,se){const de=this.loaded,Te=ie.uid;de&&de[Te]&&delete de[Te],se()}}class Q{constructor(){this.loaded={}}loadTile(ie,se){const{uid:de,encoding:Te,rawImageData:Re}=ie,Xe=l.isImageBitmap(Re)?this.getImageData(Re):Re,Ve=new l.DEMData(de,Xe,Te);this.loaded=this.loaded||{},this.loaded[de]=Ve,se(null,Ve)}getImageData(ie){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ie.width,ie.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ie.width,this.offscreenCanvas.height=ie.height,this.offscreenCanvasContext.drawImage(ie,0,0,ie.width,ie.height);const se=this.offscreenCanvasContext.getImageData(-1,-1,ie.width+2,ie.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:se.width,height:se.height},se.data)}removeTile(ie){const se=this.loaded,de=ie.uid;se&&se[de]&&delete se[de]}}function Y(Ae,ie){if(Ae.length!==0){pe(Ae[0],ie);for(var se=1;se<Ae.length;se++)pe(Ae[se],!ie)}}function pe(Ae,ie){for(var se=0,de=0,Te=0,Re=Ae.length,Xe=Re-1;Te<Re;Xe=Te++){var Ve=(Ae[Te][0]-Ae[Xe][0])*(Ae[Xe][1]+Ae[Te][1]),$e=se+Ve;de+=Math.abs(se)>=Math.abs(Ve)?se-$e+Ve:Ve-$e+se,se=$e}se+de>=0!=!!ie&&Ae.reverse()}var G=l.getDefaultExportFromCjs(function Ae(ie,se){var de,Te=ie&&ie.type;if(Te==="FeatureCollection")for(de=0;de<ie.features.length;de++)Ae(ie.features[de],se);else if(Te==="GeometryCollection")for(de=0;de<ie.geometries.length;de++)Ae(ie.geometries[de],se);else if(Te==="Feature")Ae(ie.geometry,se);else if(Te==="Polygon")Y(ie.coordinates,se);else if(Te==="MultiPolygon")for(de=0;de<ie.coordinates.length;de++)Y(ie.coordinates[de],se);return ie});const V=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;var N={exports:{}},oe=l.pointGeometry,W=l.vectorTile.VectorTileFeature,B=S;function S(Ae,ie){this.options=ie||{},this.features=Ae,this.length=Ae.length}function M(Ae,ie){this.id=typeof Ae.id=="number"?Ae.id:void 0,this.type=Ae.type,this.rawGeometry=Ae.type===1?[Ae.geometry]:Ae.geometry,this.properties=Ae.tags,this.extent=ie||4096}S.prototype.feature=function(Ae){return new M(this.features[Ae],this.options.extent)},M.prototype.loadGeometry=function(){var Ae=this.rawGeometry;this.geometry=[];for(var ie=0;ie<Ae.length;ie++){for(var se=Ae[ie],de=[],Te=0;Te<se.length;Te++)de.push(new oe(se[Te][0],se[Te][1]));this.geometry.push(de)}return this.geometry},M.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ae=this.geometry,ie=1/0,se=-1/0,de=1/0,Te=-1/0,Re=0;Re<Ae.length;Re++)for(var Xe=Ae[Re],Ve=0;Ve<Xe.length;Ve++){var $e=Xe[Ve];ie=Math.min(ie,$e.x),se=Math.max(se,$e.x),de=Math.min(de,$e.y),Te=Math.max(Te,$e.y)}return[ie,de,se,Te]},M.prototype.toGeoJSON=W.prototype.toGeoJSON;var Z=l.pbf,X=B;function J(Ae){var ie=new Z;return function(se,de){for(var Te in se.layers)de.writeMessage(3,ye,se.layers[Te])}(Ae,ie),ie.finish()}function ye(Ae,ie){var se;ie.writeVarintField(15,Ae.version||1),ie.writeStringField(1,Ae.name||""),ie.writeVarintField(5,Ae.extent||4096);var de={keys:[],values:[],keycache:{},valuecache:{}};for(se=0;se<Ae.length;se++)de.feature=Ae.feature(se),ie.writeMessage(2,xe,de);var Te=de.keys;for(se=0;se<Te.length;se++)ie.writeStringField(3,Te[se]);var Re=de.values;for(se=0;se<Re.length;se++)ie.writeMessage(4,ne,Re[se])}function xe(Ae,ie){var se=Ae.feature;se.id!==void 0&&ie.writeVarintField(1,se.id),ie.writeMessage(2,be,Ae),ie.writeVarintField(3,se.type),ie.writeMessage(4,re,se)}function be(Ae,ie){var se=Ae.feature,de=Ae.keys,Te=Ae.values,Re=Ae.keycache,Xe=Ae.valuecache;for(var Ve in se.properties){var $e=se.properties[Ve],Je=Re[Ve];if($e!==null){Je===void 0&&(de.push(Ve),Re[Ve]=Je=de.length-1),ie.writeVarint(Je);var pt=typeof $e;pt!=="string"&&pt!=="boolean"&&pt!=="number"&&($e=JSON.stringify($e));var _t=pt+":"+$e,yt=Xe[_t];yt===void 0&&(Te.push($e),Xe[_t]=yt=Te.length-1),ie.writeVarint(yt)}}}function te(Ae,ie){return(ie<<3)+(7&Ae)}function le(Ae){return Ae<<1^Ae>>31}function re(Ae,ie){for(var se=Ae.loadGeometry(),de=Ae.type,Te=0,Re=0,Xe=se.length,Ve=0;Ve<Xe;Ve++){var $e=se[Ve],Je=1;de===1&&(Je=$e.length),ie.writeVarint(te(1,Je));for(var pt=de===3?$e.length-1:$e.length,_t=0;_t<pt;_t++){_t===1&&de!==1&&ie.writeVarint(te(2,pt-1));var yt=$e[_t].x-Te,tn=$e[_t].y-Re;ie.writeVarint(le(yt)),ie.writeVarint(le(tn)),Te+=yt,Re+=tn}de===3&&ie.writeVarint(te(7,1))}}function ne(Ae,ie){var se=typeof Ae;se==="string"?ie.writeStringField(1,Ae):se==="boolean"?ie.writeBooleanField(7,Ae):se==="number"&&(Ae%1!=0?ie.writeDoubleField(3,Ae):Ae<0?ie.writeSVarintField(6,Ae):ie.writeVarintField(5,Ae))}N.exports=J,N.exports.fromVectorTileJs=J,N.exports.fromGeojsonVt=function(Ae,ie){ie=ie||{};var se={};for(var de in Ae)se[de]=new X(Ae[de].features,ie),se[de].name=de,se[de].version=ie.version,se[de].extent=ie.extent;return J({layers:se})},N.exports.GeoJSONWrapper=X;var ge=l.getDefaultExportFromCjs(N.exports);const Ee={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ae=>Ae},we=Math.fround||(Ne=new Float32Array(1),Ae=>(Ne[0]=+Ae,Ne[0]));var Ne;const ze=3,Pe=5,He=6;class Ge{constructor(ie){this.options=Object.assign(Object.create(Ee),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:se,minZoom:de,maxZoom:Te}=this.options;se&&console.time("total time");const Re=`prepare ${ie.length} points`;se&&console.time(Re),this.points=ie;const Xe=[];for(let $e=0;$e<ie.length;$e++){const Je=ie[$e];if(!Je.geometry)continue;const[pt,_t]=Je.geometry.coordinates,yt=we(vt(pt)),tn=we(At(_t));Xe.push(yt,tn,1/0,$e,-1,1),this.options.reduce&&Xe.push(0)}let Ve=this.trees[Te+1]=this._createTree(Xe);se&&console.timeEnd(Re);for(let $e=Te;$e>=de;$e--){const Je=+Date.now();Ve=this.trees[$e]=this._createTree(this._cluster(Ve,$e)),se&&console.log("z%d: %d clusters in %dms",$e,Ve.numItems,+Date.now()-Je)}return se&&console.timeEnd("total time"),this}getClusters(ie,se){let de=((ie[0]+180)%360+360)%360-180;const Te=Math.max(-90,Math.min(90,ie[1]));let Re=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const Xe=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)de=-180,Re=180;else if(de>Re){const _t=this.getClusters([de,Te,180,Xe],se),yt=this.getClusters([-180,Te,Re,Xe],se);return _t.concat(yt)}const Ve=this.trees[this._limitZoom(se)],$e=Ve.range(vt(de),At(Xe),vt(Re),At(Te)),Je=Ve.data,pt=[];for(const _t of $e){const yt=this.stride*_t;pt.push(Je[yt+Pe]>1?it(Je,yt,this.clusterProps):this.points[Je[yt+ze]])}return pt}getChildren(ie){const se=this._getOriginId(ie),de=this._getOriginZoom(ie),Te="No cluster with the specified id.",Re=this.trees[de];if(!Re)throw new Error(Te);const Xe=Re.data;if(se*this.stride>=Xe.length)throw new Error(Te);const Ve=this.options.radius/(this.options.extent*Math.pow(2,de-1)),$e=Re.within(Xe[se*this.stride],Xe[se*this.stride+1],Ve),Je=[];for(const pt of $e){const _t=pt*this.stride;Xe[_t+4]===ie&&Je.push(Xe[_t+Pe]>1?it(Xe,_t,this.clusterProps):this.points[Xe[_t+ze]])}if(Je.length===0)throw new Error(Te);return Je}getLeaves(ie,se,de){const Te=[];return this._appendLeaves(Te,ie,se=se||10,de=de||0,0),Te}getTile(ie,se,de){const Te=this.trees[this._limitZoom(ie)],Re=Math.pow(2,ie),{extent:Xe,radius:Ve}=this.options,$e=Ve/Xe,Je=(de-$e)/Re,pt=(de+1+$e)/Re,_t={features:[]};return this._addTileFeatures(Te.range((se-$e)/Re,Je,(se+1+$e)/Re,pt),Te.data,se,de,Re,_t),se===0&&this._addTileFeatures(Te.range(1-$e/Re,Je,1,pt),Te.data,Re,de,Re,_t),se===Re-1&&this._addTileFeatures(Te.range(0,Je,$e/Re,pt),Te.data,-1,de,Re,_t),_t.features.length?_t:null}getClusterExpansionZoom(ie){let se=this._getOriginZoom(ie)-1;for(;se<=this.options.maxZoom;){const de=this.getChildren(ie);if(se++,de.length!==1)break;ie=de[0].properties.cluster_id}return se}_appendLeaves(ie,se,de,Te,Re){const Xe=this.getChildren(se);for(const Ve of Xe){const $e=Ve.properties;if($e&&$e.cluster?Re+$e.point_count<=Te?Re+=$e.point_count:Re=this._appendLeaves(ie,$e.cluster_id,de,Te,Re):Re<Te?Re++:ie.push(Ve),ie.length===de)break}return Re}_createTree(ie){const se=new l.KDBush(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let de=0;de<ie.length;de+=this.stride)se.add(ie[de],ie[de+1]);return se.finish(),se.data=ie,se}_addTileFeatures(ie,se,de,Te,Re,Xe){for(const Ve of ie){const $e=Ve*this.stride,Je=se[$e+Pe]>1;let pt,_t,yt;if(Je)pt=ut(se,$e,this.clusterProps),_t=se[$e],yt=se[$e+1];else{const Nt=this.points[se[$e+ze]];pt=Nt.properties;const[qt,ln]=Nt.geometry.coordinates;_t=vt(qt),yt=At(ln)}const tn={type:1,geometry:[[Math.round(this.options.extent*(_t*Re-de)),Math.round(this.options.extent*(yt*Re-Te))]],tags:pt};let cn;cn=Je||this.options.generateId?se[$e+ze]:this.points[se[$e+ze]].id,cn!==void 0&&(tn.id=cn),Xe.features.push(tn)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,se){const{radius:de,extent:Te,reduce:Re,minPoints:Xe}=this.options,Ve=de/(Te*Math.pow(2,se)),$e=ie.data,Je=[],pt=this.stride;for(let _t=0;_t<$e.length;_t+=pt){if($e[_t+2]<=se)continue;$e[_t+2]=se;const yt=$e[_t],tn=$e[_t+1],cn=ie.within($e[_t],$e[_t+1],Ve),Nt=$e[_t+Pe];let qt=Nt;for(const ln of cn){const En=ln*pt;$e[En+2]>se&&(qt+=$e[En+Pe])}if(qt>Nt&&qt>=Xe){let ln,En=yt*Nt,yn=tn*Nt,Vn=-1;const qn=((_t/pt|0)<<5)+(se+1)+this.points.length;for(const dn of cn){const er=dn*pt;if($e[er+2]<=se)continue;$e[er+2]=se;const sr=$e[er+Pe];En+=$e[er]*sr,yn+=$e[er+1]*sr,$e[er+4]=qn,Re&&(ln||(ln=this._map($e,_t,!0),Vn=this.clusterProps.length,this.clusterProps.push(ln)),Re(ln,this._map($e,er)))}$e[_t+4]=qn,Je.push(En/qt,yn/qt,1/0,qn,-1,qt),Re&&Je.push(Vn)}else{for(let ln=0;ln<pt;ln++)Je.push($e[_t+ln]);if(qt>1)for(const ln of cn){const En=ln*pt;if(!($e[En+2]<=se)){$e[En+2]=se;for(let yn=0;yn<pt;yn++)Je.push($e[En+yn])}}}}return Je}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,se,de){if(ie[se+Pe]>1){const Xe=this.clusterProps[ie[se+He]];return de?Object.assign({},Xe):Xe}const Te=this.points[ie[se+ze]].properties,Re=this.options.map(Te);return de&&Re===Te?Object.assign({},Re):Re}}function it(Ae,ie,se){return{type:"Feature",id:Ae[ie+ze],properties:ut(Ae,ie,se),geometry:{type:"Point",coordinates:[(de=Ae[ie],360*(de-.5)),ht(Ae[ie+1])]}};var de}function ut(Ae,ie,se){const de=Ae[ie+Pe],Te=de>=1e4?`${Math.round(de/1e3)}k`:de>=1e3?Math.round(de/100)/10+"k":de,Re=Ae[ie+He],Xe=Re===-1?{}:Object.assign({},se[Re]);return Object.assign(Xe,{cluster:!0,cluster_id:Ae[ie+ze],point_count:de,point_count_abbreviated:Te})}function vt(Ae){return Ae/360+.5}function At(Ae){const ie=Math.sin(Ae*Math.PI/180),se=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return se<0?0:se>1?1:se}function ht(Ae){const ie=(180-360*Ae)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function bt(Ae,ie,se,de){for(var Te,Re=de,Xe=se-ie>>1,Ve=se-ie,$e=Ae[ie],Je=Ae[ie+1],pt=Ae[se],_t=Ae[se+1],yt=ie+3;yt<se;yt+=3){var tn=Ye(Ae[yt],Ae[yt+1],$e,Je,pt,_t);if(tn>Re)Te=yt,Re=tn;else if(tn===Re){var cn=Math.abs(yt-Xe);cn<Ve&&(Te=yt,Ve=cn)}}Re>de&&(Te-ie>3&&bt(Ae,ie,Te,de),Ae[Te+2]=Re,se-Te>3&&bt(Ae,Te,se,de))}function Ye(Ae,ie,se,de,Te,Re){var Xe=Te-se,Ve=Re-de;if(Xe!==0||Ve!==0){var $e=((Ae-se)*Xe+(ie-de)*Ve)/(Xe*Xe+Ve*Ve);$e>1?(se=Te,de=Re):$e>0&&(se+=Xe*$e,de+=Ve*$e)}return(Xe=Ae-se)*Xe+(Ve=ie-de)*Ve}function Vt(Ae,ie,se,de){var Te={id:Ae===void 0?null:Ae,type:ie,geometry:se,tags:de,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Re){var Xe=Re.geometry,Ve=Re.type;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")un(Re,Xe);else if(Ve==="Polygon"||Ve==="MultiLineString")for(var $e=0;$e<Xe.length;$e++)un(Re,Xe[$e]);else if(Ve==="MultiPolygon")for($e=0;$e<Xe.length;$e++)for(var Je=0;Je<Xe[$e].length;Je++)un(Re,Xe[$e][Je])}(Te),Te}function un(Ae,ie){for(var se=0;se<ie.length;se+=3)Ae.minX=Math.min(Ae.minX,ie[se]),Ae.minY=Math.min(Ae.minY,ie[se+1]),Ae.maxX=Math.max(Ae.maxX,ie[se]),Ae.maxY=Math.max(Ae.maxY,ie[se+1])}function Xt(Ae,ie,se,de){if(ie.geometry){var Te=ie.geometry.coordinates,Re=ie.geometry.type,Xe=Math.pow(se.tolerance/((1<<se.maxZoom)*se.extent),2),Ve=[],$e=ie.id;if(se.promoteId?$e=ie.properties[se.promoteId]:se.generateId&&($e=de||0),Re==="Point")Gt(Te,Ve);else if(Re==="MultiPoint")for(var Je=0;Je<Te.length;Je++)Gt(Te[Je],Ve);else if(Re==="LineString")an(Te,Ve,Xe,!1);else if(Re==="MultiLineString"){if(se.lineMetrics){for(Je=0;Je<Te.length;Je++)an(Te[Je],Ve=[],Xe,!1),Ae.push(Vt($e,"LineString",Ve,ie.properties));return}vn(Te,Ve,Xe,!1)}else if(Re==="Polygon")vn(Te,Ve,Xe,!0);else{if(Re!=="MultiPolygon"){if(Re==="GeometryCollection"){for(Je=0;Je<ie.geometry.geometries.length;Je++)Xt(Ae,{id:$e,geometry:ie.geometry.geometries[Je],properties:ie.properties},se,de);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Je=0;Je<Te.length;Je++){var pt=[];vn(Te[Je],pt,Xe,!0),Ve.push(pt)}}Ae.push(Vt($e,Re,Ve,ie.properties))}}function Gt(Ae,ie){ie.push(Se(Ae[0])),ie.push(F(Ae[1])),ie.push(0)}function an(Ae,ie,se,de){for(var Te,Re,Xe=0,Ve=0;Ve<Ae.length;Ve++){var $e=Se(Ae[Ve][0]),Je=F(Ae[Ve][1]);ie.push($e),ie.push(Je),ie.push(0),Ve>0&&(Xe+=de?(Te*Je-$e*Re)/2:Math.sqrt(Math.pow($e-Te,2)+Math.pow(Je-Re,2))),Te=$e,Re=Je}var pt=ie.length-3;ie[2]=1,bt(ie,0,pt,se),ie[pt+2]=1,ie.size=Math.abs(Xe),ie.start=0,ie.end=ie.size}function vn(Ae,ie,se,de){for(var Te=0;Te<Ae.length;Te++){var Re=[];an(Ae[Te],Re,se,de),ie.push(Re)}}function Se(Ae){return Ae/360+.5}function F(Ae){var ie=Math.sin(Ae*Math.PI/180),se=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return se<0?0:se>1?1:se}function R(Ae,ie,se,de,Te,Re,Xe,Ve){if(de/=ie,Re>=(se/=ie)&&Xe<de)return Ae;if(Xe<se||Re>=de)return null;for(var $e=[],Je=0;Je<Ae.length;Je++){var pt=Ae[Je],_t=pt.geometry,yt=pt.type,tn=Te===0?pt.minX:pt.minY,cn=Te===0?pt.maxX:pt.maxY;if(tn>=se&&cn<de)$e.push(pt);else if(!(cn<se||tn>=de)){var Nt=[];if(yt==="Point"||yt==="MultiPoint")_e(_t,Nt,se,de,Te);else if(yt==="LineString")We(_t,Nt,se,de,Te,!1,Ve.lineMetrics);else if(yt==="MultiLineString")lt(_t,Nt,se,de,Te,!1);else if(yt==="Polygon")lt(_t,Nt,se,de,Te,!0);else if(yt==="MultiPolygon")for(var qt=0;qt<_t.length;qt++){var ln=[];lt(_t[qt],ln,se,de,Te,!0),ln.length&&Nt.push(ln)}if(Nt.length){if(Ve.lineMetrics&&yt==="LineString"){for(qt=0;qt<Nt.length;qt++)$e.push(Vt(pt.id,yt,Nt[qt],pt.tags));continue}yt!=="LineString"&&yt!=="MultiLineString"||(Nt.length===1?(yt="LineString",Nt=Nt[0]):yt="MultiLineString"),yt!=="Point"&&yt!=="MultiPoint"||(yt=Nt.length===3?"Point":"MultiPoint"),$e.push(Vt(pt.id,yt,Nt,pt.tags))}}}return $e.length?$e:null}function _e(Ae,ie,se,de,Te){for(var Re=0;Re<Ae.length;Re+=3){var Xe=Ae[Re+Te];Xe>=se&&Xe<=de&&(ie.push(Ae[Re]),ie.push(Ae[Re+1]),ie.push(Ae[Re+2]))}}function We(Ae,ie,se,de,Te,Re,Xe){for(var Ve,$e,Je=De(Ae),pt=Te===0?L:D,_t=Ae.start,yt=0;yt<Ae.length-3;yt+=3){var tn=Ae[yt],cn=Ae[yt+1],Nt=Ae[yt+2],qt=Ae[yt+3],ln=Ae[yt+4],En=Te===0?tn:cn,yn=Te===0?qt:ln,Vn=!1;Xe&&(Ve=Math.sqrt(Math.pow(tn-qt,2)+Math.pow(cn-ln,2))),En<se?yn>se&&($e=pt(Je,tn,cn,qt,ln,se),Xe&&(Je.start=_t+Ve*$e)):En>de?yn<de&&($e=pt(Je,tn,cn,qt,ln,de),Xe&&(Je.start=_t+Ve*$e)):ae(Je,tn,cn,Nt),yn<se&&En>=se&&($e=pt(Je,tn,cn,qt,ln,se),Vn=!0),yn>de&&En<=de&&($e=pt(Je,tn,cn,qt,ln,de),Vn=!0),!Re&&Vn&&(Xe&&(Je.end=_t+Ve*$e),ie.push(Je),Je=De(Ae)),Xe&&(_t+=Ve)}var qn=Ae.length-3;tn=Ae[qn],cn=Ae[qn+1],Nt=Ae[qn+2],(En=Te===0?tn:cn)>=se&&En<=de&&ae(Je,tn,cn,Nt),qn=Je.length-3,Re&&qn>=3&&(Je[qn]!==Je[0]||Je[qn+1]!==Je[1])&&ae(Je,Je[0],Je[1],Je[2]),Je.length&&ie.push(Je)}function De(Ae){var ie=[];return ie.size=Ae.size,ie.start=Ae.start,ie.end=Ae.end,ie}function lt(Ae,ie,se,de,Te,Re){for(var Xe=0;Xe<Ae.length;Xe++)We(Ae[Xe],ie,se,de,Te,Re,!1)}function ae(Ae,ie,se,de){Ae.push(ie),Ae.push(se),Ae.push(de)}function L(Ae,ie,se,de,Te,Re){var Xe=(Re-ie)/(de-ie);return Ae.push(Re),Ae.push(se+(Te-se)*Xe),Ae.push(1),Xe}function D(Ae,ie,se,de,Te,Re){var Xe=(Re-se)/(Te-se);return Ae.push(ie+(de-ie)*Xe),Ae.push(Re),Ae.push(1),Xe}function ue(Ae,ie){for(var se=[],de=0;de<Ae.length;de++){var Te,Re=Ae[de],Xe=Re.type;if(Xe==="Point"||Xe==="MultiPoint"||Xe==="LineString")Te=Oe(Re.geometry,ie);else if(Xe==="MultiLineString"||Xe==="Polygon"){Te=[];for(var Ve=0;Ve<Re.geometry.length;Ve++)Te.push(Oe(Re.geometry[Ve],ie))}else if(Xe==="MultiPolygon")for(Te=[],Ve=0;Ve<Re.geometry.length;Ve++){for(var $e=[],Je=0;Je<Re.geometry[Ve].length;Je++)$e.push(Oe(Re.geometry[Ve][Je],ie));Te.push($e)}se.push(Vt(Re.id,Xe,Te,Re.tags))}return se}function Oe(Ae,ie){var se=[];se.size=Ae.size,Ae.start!==void 0&&(se.start=Ae.start,se.end=Ae.end);for(var de=0;de<Ae.length;de+=3)se.push(Ae[de]+ie,Ae[de+1],Ae[de+2]);return se}function qe(Ae,ie){if(Ae.transformed)return Ae;var se,de,Te,Re=1<<Ae.z,Xe=Ae.x,Ve=Ae.y;for(se=0;se<Ae.features.length;se++){var $e=Ae.features[se],Je=$e.geometry,pt=$e.type;if($e.geometry=[],pt===1)for(de=0;de<Je.length;de+=2)$e.geometry.push(st(Je[de],Je[de+1],ie,Re,Xe,Ve));else for(de=0;de<Je.length;de++){var _t=[];for(Te=0;Te<Je[de].length;Te+=2)_t.push(st(Je[de][Te],Je[de][Te+1],ie,Re,Xe,Ve));$e.geometry.push(_t)}}return Ae.transformed=!0,Ae}function st(Ae,ie,se,de,Te,Re){return[Math.round(se*(Ae*de-Te)),Math.round(se*(ie*de-Re))]}function en(Ae,ie,se,de,Te){for(var Re=ie===Te.maxZoom?0:Te.tolerance/((1<<ie)*Te.extent),Xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:se,y:de,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ve=0;Ve<Ae.length;Ve++){Xe.numFeatures++,Mt(Xe,Ae[Ve],Re,Te);var $e=Ae[Ve].minX,Je=Ae[Ve].minY,pt=Ae[Ve].maxX,_t=Ae[Ve].maxY;$e<Xe.minX&&(Xe.minX=$e),Je<Xe.minY&&(Xe.minY=Je),pt>Xe.maxX&&(Xe.maxX=pt),_t>Xe.maxY&&(Xe.maxY=_t)}return Xe}function Mt(Ae,ie,se,de){var Te=ie.geometry,Re=ie.type,Xe=[];if(Re==="Point"||Re==="MultiPoint")for(var Ve=0;Ve<Te.length;Ve+=3)Xe.push(Te[Ve]),Xe.push(Te[Ve+1]),Ae.numPoints++,Ae.numSimplified++;else if(Re==="LineString")_n(Xe,Te,Ae,se,!1,!1);else if(Re==="MultiLineString"||Re==="Polygon")for(Ve=0;Ve<Te.length;Ve++)_n(Xe,Te[Ve],Ae,se,Re==="Polygon",Ve===0);else if(Re==="MultiPolygon")for(var $e=0;$e<Te.length;$e++){var Je=Te[$e];for(Ve=0;Ve<Je.length;Ve++)_n(Xe,Je[Ve],Ae,se,!0,Ve===0)}if(Xe.length){var pt=ie.tags||null;if(Re==="LineString"&&de.lineMetrics){for(var _t in pt={},ie.tags)pt[_t]=ie.tags[_t];pt.mapbox_clip_start=Te.start/Te.size,pt.mapbox_clip_end=Te.end/Te.size}var yt={geometry:Xe,type:Re==="Polygon"||Re==="MultiPolygon"?3:Re==="LineString"||Re==="MultiLineString"?2:1,tags:pt};ie.id!==null&&(yt.id=ie.id),Ae.features.push(yt)}}function _n(Ae,ie,se,de,Te,Re){var Xe=de*de;if(de>0&&ie.size<(Te?Xe:de))se.numPoints+=ie.length/3;else{for(var Ve=[],$e=0;$e<ie.length;$e+=3)(de===0||ie[$e+2]>Xe)&&(se.numSimplified++,Ve.push(ie[$e]),Ve.push(ie[$e+1])),se.numPoints++;Te&&function(Je,pt){for(var _t=0,yt=0,tn=Je.length,cn=tn-2;yt<tn;cn=yt,yt+=2)_t+=(Je[yt]-Je[cn])*(Je[yt+1]+Je[cn+1]);if(_t>0===pt)for(yt=0,tn=Je.length;yt<tn/2;yt+=2){var Nt=Je[yt],qt=Je[yt+1];Je[yt]=Je[tn-2-yt],Je[yt+1]=Je[tn-1-yt],Je[tn-2-yt]=Nt,Je[tn-1-yt]=qt}}(Ve,Re),Ae.push(Ve)}}function An(Ae,ie){var se=(ie=this.options=function(Te,Re){for(var Xe in Re)Te[Xe]=Re[Xe];return Te}(Object.create(this.options),ie)).debug;if(se&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var de=function(Te,Re){var Xe=[];if(Te.type==="FeatureCollection")for(var Ve=0;Ve<Te.features.length;Ve++)Xt(Xe,Te.features[Ve],Re,Ve);else Xt(Xe,Te.type==="Feature"?Te:{geometry:Te},Re);return Xe}(Ae,ie);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),de=function(Te,Re){var Xe=Re.buffer/Re.extent,Ve=Te,$e=R(Te,1,-1-Xe,Xe,0,-1,2,Re),Je=R(Te,1,1-Xe,2+Xe,0,-1,2,Re);return($e||Je)&&(Ve=R(Te,1,-Xe,1+Xe,0,-1,2,Re)||[],$e&&(Ve=ue($e,1).concat(Ve)),Je&&(Ve=Ve.concat(ue(Je,-1)))),Ve}(de,ie),de.length&&this.splitTile(de,0,0,0),se&&(de.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function xn(Ae,ie,se){return 32*((1<<Ae)*se+ie)+Ae}function _r(Ae,ie){return ie?Ae.properties[ie]:Ae.id}function hr(Ae,ie){if(Ae==null)return!0;if(Ae.type==="Feature")return _r(Ae,ie)!=null;if(Ae.type==="FeatureCollection"){const se=new Set;for(const de of Ae.features){const Te=_r(de,ie);if(Te==null||se.has(Te))return!1;se.add(Te)}return!0}return!1}function On(Ae,ie){const se=new Map;if(Ae!=null)if(Ae.type==="Feature")se.set(_r(Ae,ie),Ae);else for(const de of Ae.features)se.set(_r(de,ie),de);return se}function ro(Ae,ie){const se=Ae.tileID.canonical;if(!this._geoJSONIndex)return ie(null,null);const de=this._geoJSONIndex.getTile(se.z,se.x,se.y);if(!de)return ie(null,null);const Te=new class{constructor(Xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Xe.length,this._features=Xe}feature(Xe){return new class{constructor(Ve){this._feature=Ve,this.extent=l.EXTENT,this.type=Ve.type,this.properties=Ve.tags,"id"in Ve&&!isNaN(Ve.id)&&(this.id=parseInt(Ve.id,10))}loadGeometry(){if(this._feature.type===1){const Ve=[];for(const $e of this._feature.geometry)Ve.push([new l.Point($e[0],$e[1])]);return Ve}{const Ve=[];for(const $e of this._feature.geometry){const Je=[];for(const pt of $e)Je.push(new l.Point(pt[0],pt[1]));Ve.push(Je)}return Ve}}toGeoJSON(Ve,$e,Je){return V.call(this,Ve,$e,Je)}}(this._features[Xe])}}(de.features);let Re=ge(Te);Re.byteOffset===0&&Re.byteLength===Re.buffer.byteLength||(Re=new Uint8Array(Re)),ie(null,{vectorTile:Te,rawData:Re.buffer})}An.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},An.prototype.splitTile=function(Ae,ie,se,de,Te,Re,Xe){for(var Ve=[Ae,ie,se,de],$e=this.options,Je=$e.debug;Ve.length;){de=Ve.pop(),se=Ve.pop(),ie=Ve.pop(),Ae=Ve.pop();var pt=1<<ie,_t=xn(ie,se,de),yt=this.tiles[_t];if(!yt&&(Je>1&&console.time("creation"),yt=this.tiles[_t]=en(Ae,ie,se,de,$e),this.tileCoords.push({z:ie,x:se,y:de}),Je)){Je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,se,de,yt.numFeatures,yt.numPoints,yt.numSimplified),console.timeEnd("creation"));var tn="z"+ie;this.stats[tn]=(this.stats[tn]||0)+1,this.total++}if(yt.source=Ae,Te){if(ie===$e.maxZoom||ie===Te)continue;var cn=1<<Te-ie;if(se!==Math.floor(Re/cn)||de!==Math.floor(Xe/cn))continue}else if(ie===$e.indexMaxZoom||yt.numPoints<=$e.indexMaxPoints)continue;if(yt.source=null,Ae.length!==0){Je>1&&console.time("clipping");var Nt,qt,ln,En,yn,Vn,qn=.5*$e.buffer/$e.extent,dn=.5-qn,er=.5+qn,sr=1+qn;Nt=qt=ln=En=null,yn=R(Ae,pt,se-qn,se+er,0,yt.minX,yt.maxX,$e),Vn=R(Ae,pt,se+dn,se+sr,0,yt.minX,yt.maxX,$e),Ae=null,yn&&(Nt=R(yn,pt,de-qn,de+er,1,yt.minY,yt.maxY,$e),qt=R(yn,pt,de+dn,de+sr,1,yt.minY,yt.maxY,$e),yn=null),Vn&&(ln=R(Vn,pt,de-qn,de+er,1,yt.minY,yt.maxY,$e),En=R(Vn,pt,de+dn,de+sr,1,yt.minY,yt.maxY,$e),Vn=null),Je>1&&console.timeEnd("clipping"),Ve.push(Nt||[],ie+1,2*se,2*de),Ve.push(qt||[],ie+1,2*se,2*de+1),Ve.push(ln||[],ie+1,2*se+1,2*de),Ve.push(En||[],ie+1,2*se+1,2*de+1)}}},An.prototype.getTile=function(Ae,ie,se){var de=this.options,Te=de.extent,Re=de.debug;if(Ae<0||Ae>24)return null;var Xe=1<<Ae,Ve=xn(Ae,ie=(ie%Xe+Xe)%Xe,se);if(this.tiles[Ve])return qe(this.tiles[Ve],Te);Re>1&&console.log("drilling down to z%d-%d-%d",Ae,ie,se);for(var $e,Je=Ae,pt=ie,_t=se;!$e&&Je>0;)Je--,pt=Math.floor(pt/2),_t=Math.floor(_t/2),$e=this.tiles[xn(Je,pt,_t)];return $e&&$e.source?(Re>1&&console.log("found parent tile z%d-%d-%d",Je,pt,_t),Re>1&&console.time("drilling down"),this.splitTile($e.source,Je,pt,_t,Ae,ie,se),Re>1&&console.timeEnd("drilling down"),this.tiles[Ve]?qe(this.tiles[Ve],Te):null):null};class Qn extends O{constructor(ie,se,de,Te){super(ie,se,de,ro),this._dataUpdateable=new Map,this.loadGeoJSON=(Re,Xe)=>{const{promoteId:Ve}=Re;if(Re.request)return l.getJSON(Re.request,($e,Je,pt,_t)=>{this._dataUpdateable=hr(Je,Ve)?On(Je,Ve):void 0,Xe($e,Je,pt,_t)});if(typeof Re.data=="string")try{const $e=JSON.parse(Re.data);this._dataUpdateable=hr($e,Ve)?On($e,Ve):void 0,Xe(null,$e)}catch{Xe(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`))}else Re.dataDiff?this._dataUpdateable?(function($e,Je,pt){var _t,yt,tn,cn;if(Je.removeAll&&$e.clear(),Je.remove)for(const Nt of Je.remove)$e.delete(Nt);if(Je.add)for(const Nt of Je.add){const qt=_r(Nt,pt);qt!=null&&$e.set(qt,Nt)}if(Je.update)for(const Nt of Je.update){let qt=$e.get(Nt.id);if(qt==null)continue;const ln=!Nt.removeAllProperties&&(((_t=Nt.removeProperties)===null||_t===void 0?void 0:_t.length)>0||((yt=Nt.addOrUpdateProperties)===null||yt===void 0?void 0:yt.length)>0);if((Nt.newGeometry||Nt.removeAllProperties||ln)&&(qt={...qt},$e.set(Nt.id,qt),ln&&(qt.properties={...qt.properties})),Nt.newGeometry&&(qt.geometry=Nt.newGeometry),Nt.removeAllProperties)qt.properties={};else if(((tn=Nt.removeProperties)===null||tn===void 0?void 0:tn.length)>0)for(const En of Nt.removeProperties)Object.prototype.hasOwnProperty.call(qt.properties,En)&&delete qt.properties[En];if(((cn=Nt.addOrUpdateProperties)===null||cn===void 0?void 0:cn.length)>0)for(const{key:En,value:yn}of Nt.addOrUpdateProperties)qt.properties[En]=yn}}(this._dataUpdateable,Re.dataDiff,Ve),Xe(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Xe(new Error(`Cannot update existing geojson data in ${Re.source}`)):Xe(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},Te&&(this.loadGeoJSON=Te)}loadData(ie,se){var de;(de=this._pendingRequest)===null||de===void 0||de.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Te=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new l.RequestPerformance(ie.request);this._pendingCallback=se,this._pendingRequest=this.loadGeoJSON(ie,(Re,Xe)=>{if(delete this._pendingCallback,delete this._pendingRequest,Re||!Xe)return se(Re);if(typeof Xe!="object")return se(new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`));{G(Xe,!0);try{if(ie.filter){const $e=l.createExpression(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if($e.result==="error")throw new Error($e.value.map(pt=>`${pt.key}: ${pt.message}`).join(", "));Xe={type:"FeatureCollection",features:Xe.features.filter(pt=>$e.value.evaluate({zoom:0},pt))}}this._geoJSONIndex=ie.cluster?new Ge(function({superclusterOptions:$e,clusterProperties:Je}){if(!Je||!$e)return $e;const pt={},_t={},yt={accumulated:null,zoom:0},tn={properties:null},cn=Object.keys(Je);for(const Nt of cn){const[qt,ln]=Je[Nt],En=l.createExpression(ln),yn=l.createExpression(typeof qt=="string"?[qt,["accumulated"],["get",Nt]]:qt);pt[Nt]=En.value,_t[Nt]=yn.value}return $e.map=Nt=>{tn.properties=Nt;const qt={};for(const ln of cn)qt[ln]=pt[ln].evaluate(yt,tn);return qt},$e.reduce=(Nt,qt)=>{tn.properties=qt;for(const ln of cn)yt.accumulated=Nt[ln],Nt[ln]=_t[ln].evaluate(yt,tn)},$e}(ie)).load(Xe.features):function($e,Je){return new An($e,Je)}(Xe,ie.geojsonVtOptions)}catch($e){return se($e)}this.loaded={};const Ve={};if(Te){const $e=Te.finish();$e&&(Ve.resourceTiming={},Ve.resourceTiming[ie.source]=JSON.parse(JSON.stringify($e)))}se(null,Ve)}})}reloadTile(ie,se){const de=this.loaded;return de&&de[ie.uid]?super.reloadTile(ie,se):this.loadTile(ie,se)}removeSource(ie,se){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),se()}getClusterExpansionZoom(ie,se){try{se(null,this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId))}catch(de){se(de)}}getClusterChildren(ie,se){try{se(null,this._geoJSONIndex.getChildren(ie.clusterId))}catch(de){se(de)}}getClusterLeaves(ie,se){try{se(null,this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset))}catch(de){se(de)}}}class Fi{constructor(ie){this.self=ie,this.actor=new l.Actor(ie,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:O,geojson:Qn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(se,de)=>{if(this.workerSourceTypes[se])throw new Error(`Worker source with name "${se}" already registered.`);this.workerSourceTypes[se]=de},this.self.registerRTLTextPlugin=se=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=se.applyArabicShaping,l.plugin.processBidirectionalText=se.processBidirectionalText,l.plugin.processStyledBidirectionalText=se.processStyledBidirectionalText}}setReferrer(ie,se){this.referrer=se}setImages(ie,se,de){this.availableImages[ie]=se;for(const Te in this.workerSources[ie]){const Re=this.workerSources[ie][Te];for(const Xe in Re)Re[Xe].availableImages=se}de()}setLayers(ie,se,de){this.getLayerIndex(ie).replace(se),de()}updateLayers(ie,se,de){this.getLayerIndex(ie).update(se.layers,se.removedIds),de()}loadTile(ie,se,de){this.getWorkerSource(ie,se.type,se.source).loadTile(se,de)}loadDEMTile(ie,se,de){this.getDEMWorkerSource(ie,se.source).loadTile(se,de)}reloadTile(ie,se,de){this.getWorkerSource(ie,se.type,se.source).reloadTile(se,de)}abortTile(ie,se,de){this.getWorkerSource(ie,se.type,se.source).abortTile(se,de)}removeTile(ie,se,de){this.getWorkerSource(ie,se.type,se.source).removeTile(se,de)}removeDEMTile(ie,se){this.getDEMWorkerSource(ie,se.source).removeTile(se)}removeSource(ie,se,de){if(!this.workerSources[ie]||!this.workerSources[ie][se.type]||!this.workerSources[ie][se.type][se.source])return;const Te=this.workerSources[ie][se.type][se.source];delete this.workerSources[ie][se.type][se.source],Te.removeSource!==void 0?Te.removeSource(se,de):de()}loadWorkerSource(ie,se,de){try{this.self.importScripts(se.url),de()}catch(Te){de(Te.toString())}}syncRTLPluginState(ie,se,de){try{l.plugin.setState(se);const Te=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Te!=null){this.self.importScripts(Te);const Re=l.plugin.isParsed();de(Re?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Te}`),Re)}}catch(Te){de(Te.toString())}}getAvailableImages(ie){let se=this.availableImages[ie];return se||(se=[]),se}getLayerIndex(ie){let se=this.layerIndexes[ie];return se||(se=this.layerIndexes[ie]=new b),se}getWorkerSource(ie,se,de){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][se]||(this.workerSources[ie][se]={}),!this.workerSources[ie][se][de]){const Te={send:(Re,Xe,Ve)=>{this.actor.send(Re,Xe,Ve,ie)}};this.workerSources[ie][se][de]=new this.workerSourceTypes[se](Te,this.getLayerIndex(ie),this.getAvailableImages(ie))}return this.workerSources[ie][se][de]}getDEMWorkerSource(ie,se){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][se]||(this.demWorkerSources[ie][se]=new Q),this.demWorkerSources[ie][se]}}return l.isWorker()&&(self.worker=new Fi(self)),Fi}),f(["./shared"],function(l){var b="3.2.0";class w{static testProp(r){if(!w.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in w.docStyle)return r[u];return r[0]}static create(r,u,d){const m=window.document.createElement(r);return u!==void 0&&(m.className=u),d&&d.appendChild(m),m}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(r,u){r.style[w.transformProp]=u}static addEventListener(r,u,d,m={}){r.addEventListener(u,d,"passive"in m?m:m.capture)}static removeEventListener(r,u,d,m={}){r.removeEventListener(u,d,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(r,u){const d=r.getBoundingClientRect();return new l.Point(u.clientX-d.left-r.clientLeft,u.clientY-d.top-r.clientTop)}static touchPos(r,u){const d=r.getBoundingClientRect(),m=[];for(let v=0;v<u.length;v++)m.push(new l.Point(u[v].clientX-d.left-r.clientLeft,u[v].clientY-d.top-r.clientTop));return m}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const I={supported:!1,testSupport:function(g){!O&&z&&(Q?Y(g):E=g)}};let E,z,O=!1,Q=!1;function Y(g){const r=g.createTexture();g.bindTexture(g.TEXTURE_2D,r);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,z),g.isContextLost())return;I.supported=!0}catch{}g.deleteTexture(r),O=!0}var pe,G;typeof document<"u"&&(z=document.createElement("img"),z.onload=function(){E&&Y(E),E=null,Q=!0},z.onerror=function(){O=!0,E=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let r,u,d,m;g.resetRequestQueue=()=>{r=[],u=0,d=0,m={}},g.addThrottleControl=j=>{const H=d++;return m[H]=j,H},g.removeThrottleControl=j=>{delete m[j],A()},g.getImage=(j,H,K=!0)=>{I.supported&&(j.headers||(j.headers={}),j.headers.accept="image/webp,*/*");const he={requestParameters:j,supportImageRefresh:K,callback:H,cancelled:!1,completed:!1,cancel:()=>{he.completed||he.cancelled||(he.cancelled=!0,he.innerRequest&&(he.innerRequest.cancel(),u--),A())}};return r.push(he),A(),he};const v=j=>{const{requestParameters:H,supportImageRefresh:K,callback:he}=j;return l.extend(H,{type:"image"}),(K!==!1||l.isWorker()||l.getProtocolAction(H.url)||H.headers&&!Object.keys(H.headers).reduce((Ie,Ce)=>Ie&&Ce==="accept",!0)?l.makeRequest:k)(H,(Ie,Ce,Le,Me)=>{C(j,he,Ie,Ce,Le,Me)})},C=(j,H,K,he,Ie,Ce)=>{K?H(K):he instanceof HTMLImageElement||he instanceof ImageBitmap?H(null,he):he&&((Le,Me)=>{typeof createImageBitmap=="function"?l.arrayBufferToImageBitmap(Le,Me):l.arrayBufferToImage(Le,Me)})(he,(Le,Me)=>{Le!=null?H(Le):Me!=null&&H(null,Me,{cacheControl:Ie,expires:Ce})}),j.cancelled||(j.completed=!0,u--,A())},A=()=>{const j=(()=>{const H=Object.keys(m);let K=!1;if(H.length>0){for(const he of H)if(K=m[he](),K)break}return K})()?l.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let H=u;H<j&&r.length>0;H++){const K=r.shift();if(K.cancelled){H--;continue}const he=v(K);u++,K.innerRequest=he}},k=(j,H)=>{const K=new Image,he=j.url;let Ie=!1;const Ce=j.credentials;return Ce&&Ce==="include"?K.crossOrigin="use-credentials":(Ce&&Ce==="same-origin"||!l.sameOrigin(he))&&(K.crossOrigin="anonymous"),K.fetchPriority="high",K.onload=()=>{H(null,K),K.onerror=K.onload=null},K.onerror=()=>{Ie||H(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),K.onerror=K.onload=null},K.src=he,{cancel:()=>{Ie=!0,K.src=""}}}}(pe||(pe={})),pe.resetRequestQueue(),function(g){g.Glyphs="Glyphs",g.Image="Image",g.Source="Source",g.SpriteImage="SpriteImage",g.SpriteJSON="SpriteJSON",g.Style="Style",g.Tile="Tile",g.Unknown="Unknown"}(G||(G={}));class V{constructor(r){this._transformRequestFn=r}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}normalizeSpriteURL(r,u,d){const m=function(v){const C=v.match(N);if(!C)throw new Error(`Unable to parse URL "${v}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(r);return m.path+=`${u}${d}`,function(v){const C=v.params.length?`?${v.params.join("&")}`:"";return`${v.protocol}://${v.authority}${v.path}${C}`}(m)}setTransformRequest(r){this._transformRequestFn=r}}const N=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function oe(g){var r=new l.ARRAY_TYPE(3);return r[0]=g[0],r[1]=g[1],r[2]=g[2],r}var W,B=function(g,r,u){return g[0]=r[0]-u[0],g[1]=r[1]-u[1],g[2]=r[2]-u[2],g};W=new l.ARRAY_TYPE(3),l.ARRAY_TYPE!=Float32Array&&(W[0]=0,W[1]=0,W[2]=0);var S=function(g){var r=g[0],u=g[1];return r*r+u*u};function M(g){const r=[];if(typeof g=="string")r.push({id:"default",url:g});else if(g&&g.length>0){const u=[];for(const{id:d,url:m}of g){const v=`${d}${m}`;u.indexOf(v)===-1&&(u.push(v),r.push({id:d,url:m}))}}return r}function Z(g,r,u,d,m){if(d)return void g(d);if(m!==Object.values(r).length||m!==Object.values(u).length)return;const v={};for(const C in r){v[C]={};const A=l.browser.getImageCanvasContext(u[C]),k=r[C];for(const j in k){const{width:H,height:K,x:he,y:Ie,sdf:Ce,pixelRatio:Le,stretchX:Me,stretchY:Ke,content:nt}=k[j];v[C][j]={data:null,pixelRatio:Le,sdf:Ce,stretchX:Me,stretchY:Ke,content:nt,spriteData:{width:H,height:K,x:he,y:Ie,context:A}}}}g(null,v)}(function(){var g=new l.ARRAY_TYPE(2);l.ARRAY_TYPE!=Float32Array&&(g[0]=0,g[1]=0)})();class X{constructor(r,u,d,m){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(u,m)}update(r,u,d){const{width:m,height:v}=r,C=!(this.size&&this.size[0]===m&&this.size[1]===v||d),{context:A}=this,{gl:k}=A;if(this.useMipmap=!!(u&&u.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[m,v],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.isImageBitmap(r)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,r):k.texImage2D(k.TEXTURE_2D,0,this.format,m,v,0,this.format,k.UNSIGNED_BYTE,r.data);else{const{x:j,y:H}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.isImageBitmap(r)?k.texSubImage2D(k.TEXTURE_2D,0,j,H,k.RGBA,k.UNSIGNED_BYTE,r):k.texSubImage2D(k.TEXTURE_2D,0,j,H,m,v,k.RGBA,k.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(r,u,d){const{context:m}=this,{gl:v}=m;v.bindTexture(v.TEXTURE_2D,this.texture),d!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=v.LINEAR),r!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,r),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,d||r),this.filter=r),u!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,u),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function J(g){const{userImage:r}=g;return!!(r&&r.render&&r.render())&&(g.data.replace(new Uint8Array(r.data.buffer)),!0)}class ye extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,callback:d}of this.requestors)this._notify(u,d);this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const d=u.spriteData;u.data=new l.RGBAImage({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let d=!0;const m=u.data||u.spriteData;return this._validateStretch(u.stretchX,m&&m.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(u.stretchY,m&&m.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(u.content,u)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,u){if(!r)return!0;let d=0;for(const m of r){if(m[0]<d||m[1]<m[0]||u<m[1])return!1;d=m[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const d=u.spriteData,m=d&&d.width||u.data.width,v=d&&d.height||u.data.height;return!(r[0]<0||m<r[0]||r[1]<0||v<r[1]||r[2]<0||m<r[2]||r[3]<0||v<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,d=!0){const m=this.getImage(r);if(d&&(m.data.width!==u.data.width||m.data.height!==u.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,u){let d=!0;if(!this.isLoaded())for(const m of r)this.images[m]||(d=!1);this.isLoaded()||d?this._notify(r,u):this.requestors.push({ids:r,callback:u})}_notify(r,u){const d={};for(const m of r){let v=this.getImage(m);v||(this.fire(new l.Event("styleimagemissing",{id:m})),v=this.getImage(m)),v?d[m]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:l.warnOnce(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,d)}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],d=this.getImage(r);if(!d)return null;if(u&&u.position.version===d.version)return u.position;if(u)u.position.version=d.version;else{const m={w:d.data.width+2,h:d.data.height+2,x:0,y:0},v=new l.ImagePosition(m,d);this.patterns[r]={bin:m,position:v}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new X(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const v in this.patterns)r.push(this.patterns[v].bin);const{w:u,h:d}=l.potpack(r),m=this.atlasImage;m.resize({width:u||1,height:d||1});for(const v in this.patterns){const{bin:C}=this.patterns[v],A=C.x+1,k=C.y+1,j=this.getImage(v).data,H=j.width,K=j.height;l.RGBAImage.copy(j,m,{x:0,y:0},{x:A,y:k},{width:H,height:K}),l.RGBAImage.copy(j,m,{x:0,y:K-1},{x:A,y:k-1},{width:H,height:1}),l.RGBAImage.copy(j,m,{x:0,y:0},{x:A,y:k+K},{width:H,height:1}),l.RGBAImage.copy(j,m,{x:H-1,y:0},{x:A-1,y:k},{width:1,height:K}),l.RGBAImage.copy(j,m,{x:0,y:0},{x:A+H,y:k},{width:1,height:K})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const d=this.getImage(u);d||l.warnOnce(`Image with ID: "${u}" was not found`),J(d)&&this.updateImage(u,d)}}}const xe=1e20;function be(g,r,u,d,m,v,C,A,k){for(let j=r;j<r+d;j++)te(g,u*v+j,v,m,C,A,k);for(let j=u;j<u+m;j++)te(g,j*v+r,1,d,C,A,k)}function te(g,r,u,d,m,v,C){v[0]=0,C[0]=-xe,C[1]=xe,m[0]=g[r];for(let A=1,k=0,j=0;A<d;A++){m[A]=g[r+A*u];const H=A*A;do{const K=v[k];j=(m[A]-m[K]+H-K*K)/(A-K)/2}while(j<=C[k]&&--k>-1);k++,v[k]=A,C[k]=j,C[k+1]=xe}for(let A=0,k=0;A<d;A++){for(;C[k+1]<A;)k++;const j=v[k],H=A-j;g[r+A*u]=m[j]+H*H}}class le{constructor(r,u){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={}}setURL(r){this.url=r}getGlyphs(r,u){const d=[];for(const m in r)for(const v of r[m])d.push({stack:m,id:v});l.asyncAll(d,({stack:m,id:v},C)=>{let A=this.entries[m];A||(A=this.entries[m]={glyphs:{},requests:{},ranges:{}});let k=A.glyphs[v];if(k!==void 0)return void C(null,{stack:m,id:v,glyph:k});if(k=this._tinySDF(A,m,v),k)return A.glyphs[v]=k,void C(null,{stack:m,id:v,glyph:k});const j=Math.floor(v/256);if(256*j>65535)return void C(new Error("glyphs > 65535 not supported"));if(A.ranges[j])return void C(null,{stack:m,id:v,glyph:k});if(!this.url)return void C(new Error("glyphsUrl is not set"));let H=A.requests[j];H||(H=A.requests[j]=[],le.loadGlyphRange(m,j,this.url,this.requestManager,(K,he)=>{if(he){for(const Ie in he)this._doesCharSupportLocalGlyph(+Ie)||(A.glyphs[+Ie]=he[+Ie]);A.ranges[j]=!0}for(const Ie of H)Ie(K,he);delete A.requests[j]})),H.push((K,he)=>{K?C(K):he&&C(null,{stack:m,id:v,glyph:he[v]||null})})},(m,v)=>{if(m)u(m);else if(v){const C={};for(const{stack:A,id:k,glyph:j}of v)(C[A]||(C[A]={}))[k]=j&&{id:j.id,bitmap:j.bitmap.clone(),metrics:j.metrics};u(null,C)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](r)||l.unicodeBlockLookup["Hangul Syllables"](r)||l.unicodeBlockLookup.Hiragana(r)||l.unicodeBlockLookup.Katakana(r))}_tinySDF(r,u,d){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(d))return;let v=r.tinySDF;if(!v){let A="400";/bold/i.test(u)?A="900":/medium/i.test(u)?A="500":/light/i.test(u)&&(A="200"),v=r.tinySDF=new le.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:m,fontWeight:A})}const C=v.draw(String.fromCharCode(d));return{id:d,bitmap:new l.AlphaImage({width:C.width||30,height:C.height||30},C.data),metrics:{width:C.glyphWidth||24,height:C.glyphHeight||24,left:C.glyphLeft||0,top:C.glyphTop-27||-8,advance:C.glyphAdvance||24}}}}le.loadGlyphRange=function(g,r,u,d,m){const v=256*r,C=v+255,A=d.transformRequest(u.replace("{fontstack}",g).replace("{range}",`${v}-${C}`),G.Glyphs);l.getArrayBuffer(A,(k,j)=>{if(k)m(k);else if(j){const H={};for(const K of l.parseGlyphPbf(j))H[K.id]=K;m(null,H)}})},le.TinySDF=class{constructor({fontSize:g=24,buffer:r=3,radius:u=8,cutoff:d=.25,fontFamily:m="sans-serif",fontWeight:v="normal",fontStyle:C="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=u;const A=this.size=g+4*r,k=this._createCanvas(A),j=this.ctx=k.getContext("2d",{willReadFrequently:!0});j.font=`${C} ${v} ${g}px ${m}`,j.textBaseline="alphabetic",j.textAlign="left",j.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(g){const r=document.createElement("canvas");return r.width=r.height=g,r}draw(g){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:d,actualBoundingBoxLeft:m,actualBoundingBoxRight:v}=this.ctx.measureText(g),C=Math.ceil(u),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-m))),k=Math.min(this.size-this.buffer,C+Math.ceil(d)),j=A+2*this.buffer,H=k+2*this.buffer,K=Math.max(j*H,0),he=new Uint8ClampedArray(K),Ie={data:he,width:j,height:H,glyphWidth:A,glyphHeight:k,glyphTop:C,glyphLeft:0,glyphAdvance:r};if(A===0||k===0)return Ie;const{ctx:Ce,buffer:Le,gridInner:Me,gridOuter:Ke}=this;Ce.clearRect(Le,Le,A,k),Ce.fillText(g,Le,Le+C);const nt=Ce.getImageData(Le,Le,A,k);Ke.fill(xe,0,K),Me.fill(0,0,K);for(let Fe=0;Fe<k;Fe++)for(let et=0;et<A;et++){const at=nt.data[4*(Fe*A+et)+3]/255;if(at===0)continue;const ct=(Fe+Le)*j+et+Le;if(at===1)Ke[ct]=0,Me[ct]=xe;else{const ft=.5-at;Ke[ct]=ft>0?ft*ft:0,Me[ct]=ft<0?ft*ft:0}}be(Ke,0,0,j,H,j,this.f,this.v,this.z),be(Me,Le,Le,A,k,j,this.f,this.v,this.z);for(let Fe=0;Fe<K;Fe++){const et=Math.sqrt(Ke[Fe])-Math.sqrt(Me[Fe]);he[Fe]=Math.round(255-255*(et/this.radius+this.cutoff))}return Ie}};class re{constructor(){this.specification=l.v8Spec.light.position}possiblyEvaluate(r,u){return l.sphericalToCartesian(r.expression.evaluate(u))}interpolate(r,u,d){return{x:l.interpolate.number(r.x,u.x,d),y:l.interpolate.number(r.y,u.y,d),z:l.interpolate.number(r.z,u.z,d)}}}let ne,ge;class Ee extends l.Evented{constructor(r){super(),ne=ne||new l.Properties({anchor:new l.DataConstantProperty(l.v8Spec.light.anchor),position:new re,color:new l.DataConstantProperty(l.v8Spec.light.color),intensity:new l.DataConstantProperty(l.v8Spec.light.intensity)}),this._transitionable=new l.Transitionable(ne),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(l.validateLight,r,u))for(const d in r){const m=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),m):this._transitionable.setValue(d,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,d){return(!d||d.validate!==!1)&&l.emitValidationErrors(this,r.call(l.validateStyle,l.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v8Spec})))}}class we{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const d=r.join(",")+String(u);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,u)),this.dashEntry[d]}getDashRanges(r,u,d){const m=[];let v=r.length%2==1?-r[r.length-1]*d:0,C=r[0]*d,A=!0;m.push({left:v,right:C,isDash:A,zeroLength:r[0]===0});let k=r[0];for(let j=1;j<r.length;j++){A=!A;const H=r[j];v=k*d,k+=H,C=k*d,m.push({left:v,right:C,isDash:A,zeroLength:H===0})}return m}addRoundDash(r,u,d){const m=u/2;for(let v=-d;v<=d;v++){const C=this.width*(this.nextRow+d+v);let A=0,k=r[A];for(let j=0;j<this.width;j++){j/k.right>1&&(k=r[++A]);const H=Math.abs(j-k.left),K=Math.abs(j-k.right),he=Math.min(H,K);let Ie;const Ce=v/d*(m+1);if(k.isDash){const Le=m-Math.abs(Ce);Ie=Math.sqrt(he*he+Le*Le)}else Ie=m-Math.sqrt(he*he+Ce*Ce);this.data[C+j]=Math.max(0,Math.min(255,Ie+128))}}}addRegularDash(r){for(let A=r.length-1;A>=0;--A){const k=r[A],j=r[A+1];k.zeroLength?r.splice(A,1):j&&j.isDash===k.isDash&&(j.left=k.left,r.splice(A,1))}const u=r[0],d=r[r.length-1];u.isDash===d.isDash&&(u.left=d.left-this.width,d.right=u.right+this.width);const m=this.width*this.nextRow;let v=0,C=r[v];for(let A=0;A<this.width;A++){A/C.right>1&&(C=r[++v]);const k=Math.abs(A-C.left),j=Math.abs(A-C.right),H=Math.min(k,j);this.data[m+A]=Math.max(0,Math.min(255,(C.isDash?H:-H)+128))}}addDash(r,u){const d=u?7:0,m=2*d+1;if(this.nextRow+m>this.height)return l.warnOnce("LineAtlas out of space"),null;let v=0;for(let A=0;A<r.length;A++)v+=r[A];if(v!==0){const A=this.width/v,k=this.getDashRanges(r,this.width,A);u?this.addRoundDash(k,A,d):this.addRegularDash(k)}const C={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:v};return this.nextRow+=m,this.dirty=!0,C}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Ne{constructor(r,u,d){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=d;const m=this.workerPool.acquire(d);for(let v=0;v<m.length;v++){const C=new Ne.Actor(m[v],u,d);C.name=`Worker ${v}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u,d){l.asyncAll(this.actors,(m,v)=>{m.send(r,u,v)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function ze(g,r,u){const d=function(m,v){if(m)return u(m);if(v){const C=l.pick(l.extend(v,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);v.vector_layers&&(C.vectorLayers=v.vector_layers,C.vectorLayerIds=C.vectorLayers.map(A=>A.id)),u(null,C)}};return g.url?l.getJSON(r.transformRequest(g.url,G.Source),d):l.browser.frame(()=>d(null,g))}Ne.Actor=l.Actor;class Pe{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof l.LngLat?new l.LngLat(r.lng,r.lat):l.LngLat.convert(r),this}setSouthWest(r){return this._sw=r instanceof l.LngLat?new l.LngLat(r.lng,r.lat):l.LngLat.convert(r),this}extend(r){const u=this._sw,d=this._ne;let m,v;if(r instanceof l.LngLat)m=r,v=r;else{if(!(r instanceof Pe))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Pe.convert(r)):this.extend(l.LngLat.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(l.LngLat.convert(r)):this;if(m=r._sw,v=r._ne,!m||!v)return this}return u||d?(u.lng=Math.min(m.lng,u.lng),u.lat=Math.min(m.lat,u.lat),d.lng=Math.max(v.lng,d.lng),d.lat=Math.max(v.lat,d.lat)):(this._sw=new l.LngLat(m.lng,m.lat),this._ne=new l.LngLat(v.lng,v.lat)),this}getCenter(){return new l.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new l.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:d}=l.LngLat.convert(r);let m=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&m}static convert(r){return r instanceof Pe?r:r&&new Pe(r)}static fromLngLat(r,u=0){const d=360*u/40075017,m=d/Math.cos(Math.PI/180*r.lat);return new Pe(new l.LngLat(r.lng-m,r.lat-d),new l.LngLat(r.lng+m,r.lat+d))}}class He{constructor(r,u,d){this.bounds=Pe.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),d=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*u),m=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*u),v=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*u),C=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*u);return r.x>=d&&r.x<v&&r.y>=m&&r.y<C}}class Ge extends l.Evented{constructor(r,u,d,m){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ze(this._options,this.map._requestManager,(v,C)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),v?this.fire(new l.ErrorEvent(v)):C&&(l.extend(this,C),C.bounds&&(this.tileBounds=new He(C.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.extend({},this._options),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(u,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(r,u){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(d,G.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function v(C,A){return delete r.request,r.aborted?u(null):C&&C.status!==404?u(C):(A&&A.resourceTiming&&(r.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&r.setExpiryData(A),r.loadVectorData(A,this.map.painter),u(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=u:r.request=r.actor.send("reloadTile",m,v.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",m,v.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class it extends l.Evented{constructor(r,u,d,m){super(),this.id=r,this.dispatcher=d,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},u),l.extend(this,l.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ze(this._options,this.map._requestManager,(r,u)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new l.ErrorEvent(r)):u&&(l.extend(this,u),u.bounds&&(this.tileBounds=new He(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,u){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=pe.getImage(this.map._requestManager.transformRequest(d,G.Tile),(m,v,C)=>{if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(m)r.state="errored",u(m);else if(v){this.map._refreshExpiredTiles&&C&&r.setExpiryData(C);const A=this.map.painter.context,k=A.gl;r.texture=this.map.painter.getTileTexture(v.width),r.texture?r.texture.update(v,{useMipmap:!0}):(r.texture=new X(A,v,k.RGBA,{useMipmap:!0}),r.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),A.extTextureFilterAnisotropic&&k.texParameterf(k.TEXTURE_2D,A.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,A.extTextureFilterAnisotropicMax)),r.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(r,u){r.request&&(r.request.cancel(),delete r.request),u()}unloadTile(r,u){r.texture&&this.map.painter.saveTileTexture(r.texture),u()}hasTransition(){return!1}}class ut extends it{constructor(r,u,d,m){super(r,u,d,m),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(r,u){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function m(v,C){v&&(r.state="errored",u(v)),C&&(r.dem=C,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",u(null))}r.request=pe.getImage(this.map._requestManager.transformRequest(d,G.Tile),(function(v,C){if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(v)r.state="errored",u(v);else if(C){this.map._refreshExpiredTiles&&r.setExpiryData(C),delete C.cacheControl,delete C.expires;const A=l.isImageBitmap(C)&&(ge==null&&(ge=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ge)?C:l.browser.getImageData(C,1),k={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:A,encoding:this.encoding};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",k,m.bind(this)))}}).bind(this),this.map._refreshExpiredTiles),r.neighboringTiles=this._getNeighboringTiles(r.tileID)}_getNeighboringTiles(r){const u=r.canonical,d=Math.pow(2,u.z),m=(u.x-1+d)%d,v=u.x===0?r.wrap-1:r.wrap,C=(u.x+1+d)%d,A=u.x+1===d?r.wrap+1:r.wrap,k={};return k[new l.OverscaledTileID(r.overscaledZ,v,u.z,m,u.y).key]={backfilled:!1},k[new l.OverscaledTileID(r.overscaledZ,A,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(k[new l.OverscaledTileID(r.overscaledZ,v,u.z,m,u.y-1).key]={backfilled:!1},k[new l.OverscaledTileID(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},k[new l.OverscaledTileID(r.overscaledZ,A,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<d&&(k[new l.OverscaledTileID(r.overscaledZ,v,u.z,m,u.y+1).key]={backfilled:!1},k[new l.OverscaledTileID(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},k[new l.OverscaledTileID(r.overscaledZ,A,u.z,C,u.y+1).key]={backfilled:!1}),k}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class vt extends l.Evented{constructor(r,u,d,m){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.extend({},this._options,{type:this.type,data:this._data}),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(m),this._data=u.data,this._options=l.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const v=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*v,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*v,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.EXTENT,radius:(u.clusterRadius||50)*v,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},u),this}getClusterChildren(r,u){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},u),this}getClusterLeaves(r,u,d,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:u,offset:d},m),this}_updateWorkerData(r){const u=l.extend({},this.workerOptions);r?u.dataDiff=r:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(l.browser.resolveURL(this._data),G.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(d,m)=>{if(this._pendingLoads--,this._removed||m&&m.abandoned)return void this.fire(new l.Event("dataabort",{dataType:"source"}));let v=null;if(m&&m.resourceTiming&&m.resourceTiming[this.id]&&(v=m.resourceTiming[this.id].slice(0)),d)return void this.fire(new l.ErrorEvent(d));const C={dataType:"source"};this._collectResourceTiming&&v&&v.length>0&&l.extend(C,{resourceTiming:v}),this.fire(new l.Event("data",{...C,sourceDataType:"metadata"})),this.fire(new l.Event("data",{...C,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(r,u){const d=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const m={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(d,m,(v,C)=>(delete r.request,r.unloadVectorData(),r.aborted?u(null):v?u(v):(r.loadVectorData(C,this.map.painter,d==="reloadTile"),u(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var At=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ht extends l.Evented{constructor(r,u,d,m){super(),this.load=(v,C)=>{this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=pe.getImage(this.map._requestManager.transformRequest(this.url,G.Image),(A,k)=>{this._request=null,this._loaded=!0,A?this.fire(new l.ErrorEvent(A)):k&&(this.image=k,v&&(this.coordinates=v),C&&C(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const v=this.map.painter.context,C=v.gl;this.boundsBuffer||(this.boundsBuffer=v.createVertexBuffer(this._boundsArray,At.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new X(v,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let A=!1;for(const k in this.tiles){const j=this.tiles[k];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture,A=!0)}A&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=r,this.dispatcher=d,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(m){let v=1/0,C=1/0,A=-1/0,k=-1/0;for(const he of m)v=Math.min(v,he.x),C=Math.min(C,he.y),A=Math.max(A,he.x),k=Math.max(k,he.y);const j=Math.max(A-v,k-C),H=Math.max(0,Math.floor(-Math.log(j)/Math.LN2)),K=Math.pow(2,H);return new l.CanonicalTileID(H,Math.floor((v+A)/2*K),Math.floor((C+k)/2*K))}(u),this.minzoom=this.maxzoom=this.tileID.z;const d=u.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(d[2].x,d[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(r,u){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},u(null)):(r.state="errored",u(null))}hasTransition(){return!1}}class bt extends ht{constructor(r,u,d,m){super(r,u,d,m),this.load=()=>{this._loaded=!1;const v=this.options;this.urls=[];for(const C of v.urls)this.urls.push(this.map._requestManager.transformRequest(C,G.Source).url);l.getVideo(this.urls,(C,A)=>{this._loaded=!0,C?this.fire(new l.ErrorEvent(C)):A&&(this.video=A,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const v=this.map.painter.context,C=v.gl;this.boundsBuffer||(this.boundsBuffer=v.createVertexBuffer(this._boundsArray,At.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new X(v,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let A=!1;for(const k in this.tiles){const j=this.tiles[k];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture,A=!0)}A&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Ye extends ht{constructor(r,u,d,m){super(r,u,d,m),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const C=this.map.painter.context,A=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,At.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(v||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new X(C,this.canvas,A.RGBA,{premultiply:!0});let k=!1;for(const j in this.tiles){const H=this.tiles[j];H.state!=="loaded"&&(H.state="loaded",H.texture=this.texture,k=!0)}k&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(C=>typeof C!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Vt={},un=g=>{switch(g){case"geojson":return vt;case"image":return ht;case"raster":return it;case"raster-dem":return ut;case"vector":return Ge;case"video":return bt;case"canvas":return Ye}return Vt[g]};function Xt(g,r){const u=l.create();return l.translate(u,u,[1,1,0]),l.scale(u,u,[.5*g.width,.5*g.height,1]),l.multiply(u,u,g.calculatePosMatrix(r.toUnwrapped()))}function Gt(g,r,u,d,m,v){const C=function(K,he,Ie){if(K)for(const Ce of K){const Le=he[Ce];if(Le&&Le.source===Ie&&Le.type==="fill-extrusion")return!0}else for(const Ce in he){const Le=he[Ce];if(Le.source===Ie&&Le.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,g.id),A=v.maxPitchScaleFactor(),k=g.tilesIn(d,A,C);k.sort(an);const j=[];for(const K of k)j.push({wrappedTileID:K.tileID.wrapped().key,queryResults:K.tile.queryRenderedFeatures(r,u,g._state,K.queryGeometry,K.cameraQueryGeometry,K.scale,m,v,A,Xt(g.transform,K.tileID))});const H=function(K){const he={},Ie={};for(const Ce of K){const Le=Ce.queryResults,Me=Ce.wrappedTileID,Ke=Ie[Me]=Ie[Me]||{};for(const nt in Le){const Fe=Le[nt],et=Ke[nt]=Ke[nt]||{},at=he[nt]=he[nt]||[];for(const ct of Fe)et[ct.featureIndex]||(et[ct.featureIndex]=!0,at.push(ct))}}return he}(j);for(const K in H)H[K].forEach(he=>{const Ie=he.feature,Ce=g.getFeatureState(Ie.layer["source-layer"],Ie.id);Ie.source=Ie.layer.source,Ie.layer["source-layer"]&&(Ie.sourceLayer=Ie.layer["source-layer"]),Ie.state=Ce});return H}function an(g,r){const u=g.tileID,d=r.tileID;return u.overscaledZ-d.overscaledZ||u.canonical.y-d.canonical.y||u.wrap-d.wrap||u.canonical.x-d.canonical.x}class vn{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=l.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const u=r+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,v){const C={};if(!v)return C;for(const A of m){const k=A.layerIds.map(j=>v.getLayer(j)).filter(Boolean);if(k.length!==0){A.layers=k,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(j=>k.filter(H=>H.id===j)[0]));for(const j of k)C[j.id]=A}}return C}(r.buckets,u.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const v=this.buckets[m];if(v instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!d)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const v=this.buckets[m];if(v instanceof l.SymbolBucket&&v.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const m in this.buckets){const v=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(v))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const m=this.buckets[d];m.uploadPending()&&m.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new X(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new X(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,d,m,v,C,A,k,j,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:v,scale:C,tileSize:this.tileSize,pixelPosMatrix:H,transform:k,params:A,queryPadding:this.queryPadding*j},r,u,d):{}}querySourceFeatures(r,u){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const m=d.loadVTLayers(),v=u&&u.sourceLayer?u.sourceLayer:"",C=m._geojsonTileLayer||m[v];if(!C)return;const A=l.createFilter(u&&u.filter),{z:k,x:j,y:H}=this.tileID.canonical,K={z:k,x:j,y:H};for(let he=0;he<C.length;he++){const Ie=C.feature(he);if(A.needGeometry){const Me=l.toEvaluationFeature(Ie,!0);if(!A.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Me,this.tileID.canonical))continue}else if(!A.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Ie))continue;const Ce=d.getId(Ie,v),Le=new l.GeoJSONFeature(Ie,k,j,H,Ce);Le.tile=K,r.push(Le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const d=l.parseCacheControl(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let m=!1;if(this.expirationTime>d)m=!1;else if(u)if(this.expirationTime<u)m=!0;else{const v=this.expirationTime-u;v?this.expirationTime=d+Math.max(v,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!u.style.hasLayer(m))continue;const v=this.buckets[m],C=v.layers[0].sourceLayer||"_geojsonTileLayer",A=d[C],k=r[C];if(!A||!k||Object.keys(k).length===0)continue;v.update(k,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const j=u&&u.style&&u.style.getLayer(m);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.browser.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=l.browser.now()+r}setDependencies(r,u){const d={};for(const m of u)d[m]=!0;this.dependencies[r]=d}hasDependency(r,u){for(const d of r){const m=this.dependencies[d];if(m){for(const v of u)if(m[v])return!0}}return!1}}class Se{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,d){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const v={value:u,timeout:void 0};if(d!==void 0&&(v.timeout=setTimeout(()=>{this.remove(r,v)},d)),this.data[m].push(v),this.order.push(m),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const d=r.wrapped().key,m=u===void 0?0:this.data[d].indexOf(u),v=this.data[d][m];return this.data[d].splice(m,1),v.timeout&&clearTimeout(v.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(v.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const d in this.data)for(const m of this.data[d])r(m.value)||u.push(m);for(const d of u)this.remove(d.value.tileID,d)}}class F{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,d){const m=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},l.extend(this.stateChanges[r][m],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const v in this.state[r])v!==m&&(this.deletedStates[r][v]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const v in this.state[r][m])d[v]||(this.deletedStates[r][m][v]=null)}else for(const v in d)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][v]===null&&delete this.deletedStates[r][m][v]}removeFeatureState(r,u,d){if(this.deletedStates[r]===null)return;const m=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&u!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][d]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(d in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][d]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,u){const d=String(u),m=l.extend({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const v=this.deletedStates[r][u];if(v===null)return{};for(const C in v)delete m[C]}return m}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const d={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const v={};for(const C in this.stateChanges[m])this.state[m][C]||(this.state[m][C]={}),l.extend(this.state[m][C],this.stateChanges[m][C]),v[C]=this.state[m][C];d[m]=v}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const v={};if(this.deletedStates[m]===null)for(const C in this.state[m])v[C]={},this.state[m][C]={};else for(const C in this.deletedStates[m]){if(this.deletedStates[m][C]===null)this.state[m][C]={};else for(const A of Object.keys(this.deletedStates[m][C]))delete this.state[m][C][A];v[C]=this.state[m][C]}d[m]=d[m]||{},l.extend(d[m],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const m in r)r[m].setFeatureState(d,u)}}class R extends l.Evented{constructor(r,u,d){super(),this.id=r,this.dispatcher=d,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,v,C,A)=>{const k=new(un(v.type))(m,v,C,A);if(k.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${k.id}`);return k})(r,u,d,this),this._tiles={},this._cache=new Se(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new F,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u){return this._source.loadTile(r,u)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new l.Event("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const d=this._tiles[u];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(_e).map(r=>r.key)}getRenderableIds(r){const u=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&u.push(this._tiles[d]);return r?u.sort((d,m)=>{const v=d.tileID,C=m.tileID,A=new l.Point(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),k=new l.Point(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-C.overscaledZ||k.y-A.y||k.x-A.x}).map(d=>d.tileID.key):u.map(d=>d.tileID).sort(_e).map(d=>d.key)}hasRenderableParent(r){const u=this.findLoadedParent(r,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(r,u){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(u||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,u){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=u),this._loadTile(d,this._tileLoaded.bind(this,d,r,u)))}_tileLoaded(r,u,d,m){if(m)return r.state="errored",void(m.status!==404?this._source.fire(new l.ErrorEvent(m,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=l.browser.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let m=0;m<u.length;m++){const v=u[m];if(r.neighboringTiles&&r.neighboringTiles[v]){const C=this.getTileByID(v);d(r,C),d(C,r)}}function d(m,v){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let C=v.tileID.canonical.x-m.tileID.canonical.x;const A=v.tileID.canonical.y-m.tileID.canonical.y,k=Math.pow(2,m.tileID.canonical.z),j=v.tileID.key;C===0&&A===0||Math.abs(A)>1||(Math.abs(C)>1&&(Math.abs(C+k)===1?C+=k:Math.abs(C-k)===1&&(C-=k)),v.dem&&m.dem&&(m.dem.backfillBorder(v.dem,C,A),m.neighboringTiles&&m.neighboringTiles[j]&&(m.neighboringTiles[j].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u,d,m){for(const v in this._tiles){let C=this._tiles[v];if(m[v]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>d)continue;let A=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){const j=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[j.key],C&&C.hasData()&&(A=j)}let k=A;for(;k.overscaledZ>u;)if(k=k.scaledTo(k.overscaledZ-1),r[k.key]){m[A.key]=A;break}}}findLoadedParent(r,u){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=u?d:null}for(let d=r.overscaledZ-1;d>=u;d--){const m=r.scaledTo(d),v=this._getLoadedTile(m);if(v)return v}}_getLoadedTile(r){const u=this._tiles[r.key];return u&&u.hasData()?u:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(u*d*(this._maxTileCacheZoomLevels===null?l.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(v)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const d={};for(const m in this._tiles){const v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+u),d[v.tileID.key]=v}this._tiles=d;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(r,u){if(this.transform=r,this.terrain=u,!this._sourceLoaded||this._paused)return;let d;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(H=>new l.OverscaledTileID(H.canonical.z,H.wrap,H.canonical.z,H.canonical.x,H.canonical.y)):(d=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(d=d.filter(H=>this._source.hasTile(H)))):d=[];const m=r.coveringZoomLevel(this._source),v=Math.max(m-R.maxOverzooming,this._source.minzoom),C=Math.max(m+R.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const H={};for(const K of d)if(K.canonical.z>this._source.minzoom){const he=K.scaledTo(K.canonical.z-1);H[he.key]=he;const Ie=K.scaledTo(Math.max(this._source.minzoom,Math.min(K.canonical.z,5)));H[Ie.key]=Ie}d=d.concat(Object.values(H))}const A=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new l.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=this._updateRetainedTiles(d,m);if(We(this._source.type)){const H={},K={},he=Object.keys(k),Ie=l.browser.now();for(const Ce of he){const Le=k[Ce],Me=this._tiles[Ce];if(!Me||Me.fadeEndTime!==0&&Me.fadeEndTime<=Ie)continue;const Ke=this.findLoadedParent(Le,v);Ke&&(this._addTile(Ke.tileID),H[Ke.tileID.key]=Ke.tileID),K[Ce]=Le}this._retainLoadedChildren(K,m,C,k);for(const Ce in H)k[Ce]||(this._coveredTiles[Ce]=!0,k[Ce]=H[Ce]);if(u){const Ce={},Le={};for(const Me of d)this._tiles[Me.key].hasData()?Ce[Me.key]=Me:Le[Me.key]=Me;for(const Me in Le){const Ke=Le[Me].children(this._source.maxzoom);this._tiles[Ke[0].key]&&this._tiles[Ke[1].key]&&this._tiles[Ke[2].key]&&this._tiles[Ke[3].key]&&(Ce[Ke[0].key]=k[Ke[0].key]=Ke[0],Ce[Ke[1].key]=k[Ke[1].key]=Ke[1],Ce[Ke[2].key]=k[Ke[2].key]=Ke[2],Ce[Ke[3].key]=k[Ke[3].key]=Ke[3],delete Le[Me])}for(const Me in Le){const Ke=this.findLoadedParent(Le[Me],this._source.minzoom);if(Ke){Ce[Ke.tileID.key]=k[Ke.tileID.key]=Ke.tileID;for(const nt in Ce)Ce[nt].isChildOf(Ke.tileID)&&delete Ce[nt]}}for(const Me in this._tiles)Ce[Me]||(this._coveredTiles[Me]=!0)}}for(const H in k)this._tiles[H].clearFadeHold();const j=l.keysDifference(this._tiles,k);for(const H of j){const K=this._tiles[H];K.hasSymbolBuckets&&!K.holdingForFade()?K.setHoldDuration(this.map._fadeDuration):K.hasSymbolBuckets&&!K.symbolFadeFinished()||this._removeTile(H)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){const d={},m={},v=Math.max(u-R.maxOverzooming,this._source.minzoom),C=Math.max(u+R.maxUnderzooming,this._source.minzoom),A={};for(const k of r){const j=this._addTile(k);d[k.key]=k,j.hasData()||u<this._source.maxzoom&&(A[k.key]=k)}this._retainLoadedChildren(A,u,C,d);for(const k of r){let j=this._tiles[k.key];if(j.hasData())continue;if(u+1>this._source.maxzoom){const K=k.children(this._source.maxzoom)[0],he=this.getTile(K);if(he&&he.hasData()){d[K.key]=K;continue}}else{const K=k.children(this._source.maxzoom);if(d[K[0].key]&&d[K[1].key]&&d[K[2].key]&&d[K[3].key])continue}let H=j.wasRequested();for(let K=k.overscaledZ-1;K>=v;--K){const he=k.scaledTo(K);if(m[he.key])break;if(m[he.key]=!0,j=this.getTile(he),!j&&H&&(j=this._addTile(he)),j){const Ie=j.hasData();if((H||Ie)&&(d[he.key]=he),H=j.wasRequested(),Ie)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const u=[];let d,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){d=this._loadedParentTiles[m.key];break}u.push(m.key);const v=m.scaledTo(m.overscaledZ-1);if(d=this._getLoadedTile(v),d)break;m=v}for(const v of u)this._loadedParentTiles[v]=d}}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const d=u;return u||(u=new vn(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,r.key,u.state))),u.uses++,this._tiles[r.key]=u,d||this._source.fire(new l.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=u.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,d){const m=[],v=this.transform;if(!v)return m;const C=d?v.getCameraQueryGeometry(r):r,A=r.map(Ce=>v.pointCoordinate(Ce,this.terrain)),k=C.map(Ce=>v.pointCoordinate(Ce,this.terrain)),j=this.getIds();let H=1/0,K=1/0,he=-1/0,Ie=-1/0;for(const Ce of k)H=Math.min(H,Ce.x),K=Math.min(K,Ce.y),he=Math.max(he,Ce.x),Ie=Math.max(Ie,Ce.y);for(let Ce=0;Ce<j.length;Ce++){const Le=this._tiles[j[Ce]];if(Le.holdingForFade())continue;const Me=Le.tileID,Ke=Math.pow(2,v.zoom-Le.tileID.overscaledZ),nt=u*Le.queryPadding*l.EXTENT/Le.tileSize/Ke,Fe=[Me.getTilePoint(new l.MercatorCoordinate(H,K)),Me.getTilePoint(new l.MercatorCoordinate(he,Ie))];if(Fe[0].x-nt<l.EXTENT&&Fe[0].y-nt<l.EXTENT&&Fe[1].x+nt>=0&&Fe[1].y+nt>=0){const et=A.map(ct=>Me.getTilePoint(ct)),at=k.map(ct=>Me.getTilePoint(ct));m.push({tile:Le,tileID:Me,queryGeometry:et,cameraQueryGeometry:at,scale:Ke})}}return m}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of u)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(We(this._source.type)){const r=l.browser.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setFeatureState(r,u,d){this._state.updateState(r=r||"_geojsonTileLayer",u,d)}removeFeatureState(r,u,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,d)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,d){const m=this._tiles[r];m&&m.setDependencies(u,d)}reloadTilesForDependencies(r,u){for(const d in this._tiles)this._tiles[d].hasDependency(r,u)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,u))}}function _e(g,r){const u=Math.abs(2*g.wrap)-+(g.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return g.overscaledZ-r.overscaledZ||d-u||r.canonical.y-g.canonical.y||r.canonical.x-g.canonical.x}function We(g){return g==="raster"||g==="image"||g==="video"}R.maxOverzooming=10,R.maxUnderzooming=3;const De="mapboxgl_preloaded_worker_pool";class lt{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<lt.workerCount;)this.workers.push(new Worker(l.config.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[De]}numActive(){return Object.keys(this.active).length}}const ae=Math.floor(l.browser.hardwareConcurrency/2);let L;function D(){return L||(L=new lt),L}lt.workerCount=l.isSafari(globalThis)?Math.max(Math.min(ae,3),1):1;class ue{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.clamp(r,0,1);let u=1,d=this._distances[u];const m=r*this.paddedLength+this.padding;for(;d<m&&u<this._distances.length;)d=this._distances[++u];const v=u-1,C=this._distances[v],A=d-C,k=A>0?(m-C)/A:0;return this.points[v].mult(1-k).add(this.points[u].mult(k))}}function Oe(g,r){let u=!0;return g==="always"||g!=="never"&&r!=="never"||(u=!1),u}class qe{constructor(r,u,d){const m=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(u/d);for(let C=0;C<this.xCellCount*this.yCellCount;C++)m.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,d,m,v){this._forEachCell(u,d,m,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(v)}insertCircle(r,u,d,m){this._forEachCell(u-m,d-m,u+m,d+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(d),this.circles.push(m)}_insertBoxCell(r,u,d,m,v,C){this.boxCells[v].push(C)}_insertCircleCell(r,u,d,m,v,C){this.circleCells[v].push(C)}_query(r,u,d,m,v,C,A){if(d<0||r>this.width||m<0||u>this.height)return[];const k=[];if(r<=0&&u<=0&&this.width<=d&&this.height<=m){if(v)return[{key:null,x1:r,y1:u,x2:d,y2:m}];for(let j=0;j<this.boxKeys.length;j++)k.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){const H=this.circles[3*j],K=this.circles[3*j+1],he=this.circles[3*j+2];k.push({key:this.circleKeys[j],x1:H-he,y1:K-he,x2:H+he,y2:K+he})}}else this._forEachCell(r,u,d,m,this._queryCell,k,{hitTest:v,overlapMode:C,seenUids:{box:{},circle:{}}},A);return k}query(r,u,d,m){return this._query(r,u,d,m,!1,null)}hitTest(r,u,d,m,v,C){return this._query(r,u,d,m,!0,v,C).length>0}hitTestCircle(r,u,d,m,v){const C=r-d,A=r+d,k=u-d,j=u+d;if(A<0||C>this.width||j<0||k>this.height)return!1;const H=[];return this._forEachCell(C,k,A,j,this._queryCellCircle,H,{hitTest:!0,overlapMode:m,circle:{x:r,y:u,radius:d},seenUids:{box:{},circle:{}}},v),H.length>0}_queryCell(r,u,d,m,v,C,A,k){const{seenUids:j,hitTest:H,overlapMode:K}=A,he=this.boxCells[v];if(he!==null){const Ce=this.bboxes;for(const Le of he)if(!j.box[Le]){j.box[Le]=!0;const Me=4*Le,Ke=this.boxKeys[Le];if(r<=Ce[Me+2]&&u<=Ce[Me+3]&&d>=Ce[Me+0]&&m>=Ce[Me+1]&&(!k||k(Ke))&&(!H||!Oe(K,Ke.overlapMode))&&(C.push({key:Ke,x1:Ce[Me],y1:Ce[Me+1],x2:Ce[Me+2],y2:Ce[Me+3]}),H))return!0}}const Ie=this.circleCells[v];if(Ie!==null){const Ce=this.circles;for(const Le of Ie)if(!j.circle[Le]){j.circle[Le]=!0;const Me=3*Le,Ke=this.circleKeys[Le];if(this._circleAndRectCollide(Ce[Me],Ce[Me+1],Ce[Me+2],r,u,d,m)&&(!k||k(Ke))&&(!H||!Oe(K,Ke.overlapMode))){const nt=Ce[Me],Fe=Ce[Me+1],et=Ce[Me+2];if(C.push({key:Ke,x1:nt-et,y1:Fe-et,x2:nt+et,y2:Fe+et}),H)return!0}}}return!1}_queryCellCircle(r,u,d,m,v,C,A,k){const{circle:j,seenUids:H,overlapMode:K}=A,he=this.boxCells[v];if(he!==null){const Ce=this.bboxes;for(const Le of he)if(!H.box[Le]){H.box[Le]=!0;const Me=4*Le,Ke=this.boxKeys[Le];if(this._circleAndRectCollide(j.x,j.y,j.radius,Ce[Me+0],Ce[Me+1],Ce[Me+2],Ce[Me+3])&&(!k||k(Ke))&&!Oe(K,Ke.overlapMode))return C.push(!0),!0}}const Ie=this.circleCells[v];if(Ie!==null){const Ce=this.circles;for(const Le of Ie)if(!H.circle[Le]){H.circle[Le]=!0;const Me=3*Le,Ke=this.circleKeys[Le];if(this._circlesCollide(Ce[Me],Ce[Me+1],Ce[Me+2],j.x,j.y,j.radius)&&(!k||k(Ke))&&!Oe(K,Ke.overlapMode))return C.push(!0),!0}}}_forEachCell(r,u,d,m,v,C,A,k){const j=this._convertToXCellCoord(r),H=this._convertToYCellCoord(u),K=this._convertToXCellCoord(d),he=this._convertToYCellCoord(m);for(let Ie=j;Ie<=K;Ie++)for(let Ce=H;Ce<=he;Ce++)if(v.call(this,r,u,d,m,this.xCellCount*Ce+Ie,C,A,k))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,d,m,v,C){const A=m-r,k=v-u,j=d+C;return j*j>A*A+k*k}_circleAndRectCollide(r,u,d,m,v,C,A){const k=(C-m)/2,j=Math.abs(r-(m+k));if(j>k+d)return!1;const H=(A-v)/2,K=Math.abs(u-(v+H));if(K>H+d)return!1;if(j<=k||K<=H)return!0;const he=j-k,Ie=K-H;return he*he+Ie*Ie<=d*d}}function st(g,r,u,d,m){const v=l.create();return r?(l.scale(v,v,[1/m,1/m,1]),u||l.rotateZ(v,v,d.angle)):l.multiply(v,d.labelPlaneMatrix,g),v}function en(g,r,u,d,m){if(r){const v=l.clone(g);return l.scale(v,v,[m,m,1]),u||l.rotateZ(v,v,-d.angle),v}return d.glCoordMatrix}function Mt(g,r,u){let d;u?(d=[g.x,g.y,u(g.x,g.y),1],l.transformMat4(d,d,r)):(d=[g.x,g.y,0,1],Te(d,d,r));const m=d[3];return{point:new l.Point(d[0]/m,d[1]/m),signedDistanceFromCamera:m}}function _n(g,r){return .5+g/r*.5}function An(g,r){const u=g[0]/g[3],d=g[1]/g[3];return u>=-r[0]&&u<=r[0]&&d>=-r[1]&&d<=r[1]}function xn(g,r,u,d,m,v,C,A,k,j){const H=d?g.textSizeData:g.iconSizeData,K=l.evaluateSizeForZoom(H,u.transform.zoom),he=[256/u.width*2+1,256/u.height*2+1],Ie=d?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;Ie.clear();const Ce=g.lineVertexArray,Le=d?g.text.placedSymbolArray:g.icon.placedSymbolArray,Me=u.transform.width/u.transform.height;let Ke=!1;for(let nt=0;nt<Le.length;nt++){const Fe=Le.get(nt);if(Fe.hidden||Fe.writingMode===l.WritingMode.vertical&&!Ke){de(Fe.numGlyphs,Ie);continue}let et;if(Ke=!1,j?(et=[Fe.anchorX,Fe.anchorY,j(Fe.anchorX,Fe.anchorY),1],l.transformMat4(et,et,r)):(et=[Fe.anchorX,Fe.anchorY,0,1],Te(et,et,r)),!An(et,he)){de(Fe.numGlyphs,Ie);continue}const at=_n(u.transform.cameraToCenterDistance,et[3]),ct=l.evaluateSizeForFeature(H,K,Fe),ft=C?ct/at:ct*at,xt=new l.Point(Fe.anchorX,Fe.anchorY),dt=Mt(xt,m,j).point,Lt={projections:{},offsets:{}},$t=On(Fe,ft,!1,A,r,m,v,g.glyphOffsetArray,Ce,Ie,dt,xt,Lt,Me,k,j);Ke=$t.useVertical,($t.notEnoughRoom||Ke||$t.needsFlipping&&On(Fe,ft,!0,A,r,m,v,g.glyphOffsetArray,Ce,Ie,dt,xt,Lt,Me,k,j).notEnoughRoom)&&de(Fe.numGlyphs,Ie)}d?g.text.dynamicLayoutVertexBuffer.updateData(Ie):g.icon.dynamicLayoutVertexBuffer.updateData(Ie)}function _r(g,r,u,d,m,v,C,A,k,j,H,K,he){const Ie=A.glyphStartIndex+A.numGlyphs,Ce=A.lineStartIndex,Le=A.lineStartIndex+A.lineLength,Me=r.getoffsetX(A.glyphStartIndex),Ke=r.getoffsetX(Ie-1),nt=ie(g*Me,u,d,m,v,C,A.segment,Ce,Le,k,j,H,K,he);if(!nt)return null;const Fe=ie(g*Ke,u,d,m,v,C,A.segment,Ce,Le,k,j,H,K,he);return Fe?{first:nt,last:Fe}:null}function hr(g,r,u,d){return g===l.WritingMode.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*d?{useVertical:!0}:(g===l.WritingMode.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function On(g,r,u,d,m,v,C,A,k,j,H,K,he,Ie,Ce,Le){const Me=r/24,Ke=g.lineOffsetX*Me,nt=g.lineOffsetY*Me;let Fe;if(g.numGlyphs>1){const et=g.glyphStartIndex+g.numGlyphs,at=g.lineStartIndex,ct=g.lineStartIndex+g.lineLength,ft=_r(Me,A,Ke,nt,u,H,K,g,k,v,he,Ce,Le);if(!ft)return{notEnoughRoom:!0};const xt=Mt(ft.first.point,C,Le).point,dt=Mt(ft.last.point,C,Le).point;if(d&&!u){const Lt=hr(g.writingMode,xt,dt,Ie);if(Lt)return Lt}Fe=[ft.first];for(let Lt=g.glyphStartIndex+1;Lt<et-1;Lt++)Fe.push(ie(Me*A.getoffsetX(Lt),Ke,nt,u,H,K,g.segment,at,ct,k,v,he,Ce,Le));Fe.push(ft.last)}else{if(d&&!u){const at=Mt(K,m,Le).point,ct=g.lineStartIndex+g.segment+1,ft=new l.Point(k.getx(ct),k.gety(ct)),xt=Mt(ft,m,Le),dt=xt.signedDistanceFromCamera>0?xt.point:ro(K,ft,at,1,m,Le),Lt=hr(g.writingMode,at,dt,Ie);if(Lt)return Lt}const et=ie(Me*A.getoffsetX(g.glyphStartIndex),Ke,nt,u,H,K,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,k,v,he,Ce,Le);if(!et)return{notEnoughRoom:!0};Fe=[et]}for(const et of Fe)l.addDynamicAttributes(j,et.point,et.angle);return{}}function ro(g,r,u,d,m,v){const C=Mt(g.add(g.sub(r)._unit()),m,v).point,A=u.sub(C);return u.add(A._mult(d/A.mag()))}function Qn(g,r){const{projectionCache:u,lineVertexArray:d,labelPlaneMatrix:m,tileAnchorPoint:v,distanceFromAnchor:C,getElevation:A,previousVertex:k,direction:j,absOffsetX:H}=r;if(u.projections[g])return u.projections[g];const K=new l.Point(d.getx(g),d.gety(g)),he=Mt(K,m,A);if(he.signedDistanceFromCamera>0)return u.projections[g]=he.point,he.point;const Ie=g-j;return ro(C===0?v:new l.Point(d.getx(Ie),d.gety(Ie)),K,k,H-C+1,m,A)}function Fi(g,r,u){return g._unit()._perp()._mult(r*u)}function Ae(g,r,u,d,m,v,C,A){const{projectionCache:k,direction:j}=A;if(k.offsets[g])return k.offsets[g];const H=u.add(r);if(g+j<d||g+j>=m)return k.offsets[g]=H,H;const K=Qn(g+j,A),he=Fi(K.sub(u),C,j),Ie=u.add(he),Ce=K.add(he);return k.offsets[g]=l.findLineIntersection(v,H,Ie,Ce)||H,k.offsets[g]}function ie(g,r,u,d,m,v,C,A,k,j,H,K,he,Ie){const Ce=d?g-r:g+r;let Le=Ce>0?1:-1,Me=0;d&&(Le*=-1,Me=Math.PI),Le<0&&(Me+=Math.PI);let Ke,nt,Fe=Le>0?A+C:A+C+1,et=m,at=m,ct=0,ft=0;const xt=Math.abs(Ce),dt=[];let Lt;for(;ct+ft<=xt;){if(Fe+=Le,Fe<A||Fe>=k)return null;ct+=ft,at=et,nt=Ke;const It={projectionCache:K,lineVertexArray:j,labelPlaneMatrix:H,tileAnchorPoint:v,distanceFromAnchor:ct,getElevation:Ie,previousVertex:at,direction:Le,absOffsetX:xt};if(et=Qn(Fe,It),u===0)dt.push(at),Lt=et.sub(at);else{let rn;const Ft=et.sub(at);rn=Ft.mag()===0?Fi(Qn(Fe+Le,It).sub(et),u,Le):Fi(Ft,u,Le),nt||(nt=at.add(rn)),Ke=Ae(Fe,rn,et,A,k,nt,u,It),dt.push(nt),Lt=Ke.sub(nt)}ft=Lt.mag()}const $t=Lt._mult((xt-ct)/ft)._add(nt||at),wn=Me+Math.atan2(et.y-at.y,et.x-at.x);return dt.push($t),{point:$t,angle:he?wn:0,path:dt}}const se=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function de(g,r){for(let u=0;u<g;u++){const d=r.length;r.resize(d+4),r.float32.set(se,3*d)}}function Te(g,r,u){const d=r[0],m=r[1];return g[0]=u[0]*d+u[4]*m+u[12],g[1]=u[1]*d+u[5]*m+u[13],g[3]=u[3]*d+u[7]*m+u[15],g}const Re=100;class Xe{constructor(r,u=new qe(r.width+200,r.height+200,25),d=new qe(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=d,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Re,this.screenBottomBoundary=r.height+Re,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,d,m,v,C){const A=this.projectAndGetPerspectiveRatio(m,r.anchorPointX,r.anchorPointY,C),k=d*A.perspectiveRatio,j=r.x1*k+A.point.x,H=r.y1*k+A.point.y,K=r.x2*k+A.point.x,he=r.y2*k+A.point.y;return!this.isInsideGrid(j,H,K,he)||u!=="always"&&this.grid.hitTest(j,H,K,he,u,v)||A.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[j,H,K,he],offscreen:this.isOffscreen(j,H,K,he)}}placeCollisionCircles(r,u,d,m,v,C,A,k,j,H,K,he,Ie,Ce){const Le=[],Me=new l.Point(u.anchorX,u.anchorY),Ke=Mt(Me,C,Ce),nt=_n(this.transform.cameraToCenterDistance,Ke.signedDistanceFromCamera),Fe=(H?v/nt:v*nt)/l.ONE_EM,et=Mt(Me,A,Ce).point,at=_r(Fe,m,u.lineOffsetX*Fe,u.lineOffsetY*Fe,!1,et,Me,u,d,A,{projections:{},offsets:{}},!1,Ce);let ct=!1,ft=!1,xt=!0;if(at){const dt=.5*he*nt+Ie,Lt=new l.Point(-100,-100),$t=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),wn=new ue,It=at.first,rn=at.last;let Ft=[];for(let Cn=It.path.length-1;Cn>=1;Cn--)Ft.push(It.path[Cn]);for(let Cn=1;Cn<rn.path.length;Cn++)Ft.push(rn.path[Cn]);const jn=2.5*dt;if(k){const Cn=Ft.map(hn=>Mt(hn,k,Ce));Ft=Cn.some(hn=>hn.signedDistanceFromCamera<=0)?[]:Cn.map(hn=>hn.point)}let Rn=[];if(Ft.length>0){const Cn=Ft[0].clone(),hn=Ft[0].clone();for(let fr=1;fr<Ft.length;fr++)Cn.x=Math.min(Cn.x,Ft[fr].x),Cn.y=Math.min(Cn.y,Ft[fr].y),hn.x=Math.max(hn.x,Ft[fr].x),hn.y=Math.max(hn.y,Ft[fr].y);Rn=Cn.x>=Lt.x&&hn.x<=$t.x&&Cn.y>=Lt.y&&hn.y<=$t.y?[Ft]:hn.x<Lt.x||Cn.x>$t.x||hn.y<Lt.y||Cn.y>$t.y?[]:l.clipLine([Ft],Lt.x,Lt.y,$t.x,$t.y)}for(const Cn of Rn){wn.reset(Cn,.25*dt);let hn=0;hn=wn.length<=.5*dt?1:Math.ceil(wn.paddedLength/jn)+1;for(let fr=0;fr<hn;fr++){const ti=fr/Math.max(hn-1,1),Ar=wn.lerp(ti),Xr=Ar.x+Re,Bi=Ar.y+Re;Le.push(Xr,Bi,dt,0);const So=Xr-dt,To=Bi-dt,mi=Xr+dt,Wo=Bi+dt;if(xt=xt&&this.isOffscreen(So,To,mi,Wo),ft=ft||this.isInsideGrid(So,To,mi,Wo),r!=="always"&&this.grid.hitTestCircle(Xr,Bi,dt,r,K)&&(ct=!0,!j))return{circles:[],offscreen:!1,collisionDetected:ct}}}}return{circles:!j&&ct||!ft||nt<this.perspectiveRatioCutoff?[]:Le,offscreen:xt,collisionDetected:ct}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let d=1/0,m=1/0,v=-1/0,C=-1/0;for(const H of r){const K=new l.Point(H.x+Re,H.y+Re);d=Math.min(d,K.x),m=Math.min(m,K.y),v=Math.max(v,K.x),C=Math.max(C,K.y),u.push(K)}const A=this.grid.query(d,m,v,C).concat(this.ignoredGrid.query(d,m,v,C)),k={},j={};for(const H of A){const K=H.key;if(k[K.bucketInstanceId]===void 0&&(k[K.bucketInstanceId]={}),k[K.bucketInstanceId][K.featureIndex])continue;const he=[new l.Point(H.x1,H.y1),new l.Point(H.x2,H.y1),new l.Point(H.x2,H.y2),new l.Point(H.x1,H.y2)];l.polygonIntersectsPolygon(u,he)&&(k[K.bucketInstanceId][K.featureIndex]=!0,j[K.bucketInstanceId]===void 0&&(j[K.bucketInstanceId]=[]),j[K.bucketInstanceId].push(K.featureIndex))}return j}insertCollisionBox(r,u,d,m,v,C){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:v,collisionGroupID:C,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,d,m,v,C){const A=d?this.ignoredGrid:this.grid,k={bucketInstanceId:m,featureIndex:v,collisionGroupID:C,overlapMode:u};for(let j=0;j<r.length;j+=4)A.insertCircle(k,r[j],r[j+1],r[j+2])}projectAndGetPerspectiveRatio(r,u,d,m){let v;return m?(v=[u,d,m(u,d),1],l.transformMat4(v,v,r)):(v=[u,d,0,1],Te(v,v,r)),{point:new l.Point((v[0]/v[3]+1)/2*this.transform.width+Re,(-v[1]/v[3]+1)/2*this.transform.height+Re),perspectiveRatio:.5+this.transform.cameraToCenterDistance/v[3]*.5}}isOffscreen(r,u,d,m){return d<Re||r>=this.screenRightBoundary||m<Re||u>this.screenBottomBoundary}isInsideGrid(r,u,d,m){return d>=0&&r<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=l.identity([]);return l.translate(r,r,[-100,-100,0]),r}}function Ve(g,r,u){return r*(l.EXTENT/(g.tileSize*Math.pow(2,u-g.tileID.overscaledZ)))}class $e{constructor(r,u,d,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):m&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Je{constructor(r,u,d,m,v){this.text=new $e(r?r.text:null,u,d,v),this.icon=new $e(r?r.icon:null,u,m,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class pt{constructor(r,u,d){this.text=r,this.icon=u,this.skipFade=d}}class _t{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class yt{constructor(r,u,d,m,v){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=d,this.bucketIndex=m,this.tileID=v}}class tn{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:d=>d.collisionGroupID===u}}return this.collisionGroups[r]}}function cn(g,r,u,d,m){const{horizontalAlign:v,verticalAlign:C}=l.getAnchorAlignment(g),A=-(v-.5)*r,k=-(C-.5)*u,j=l.evaluateVariableOffset(g,d);return new l.Point(A+j[0]*m,k+j[1]*m)}function Nt(g,r,u,d,m,v){const{x1:C,x2:A,y1:k,y2:j,anchorPointX:H,anchorPointY:K}=g,he=new l.Point(r,u);return d&&he._rotate(m?v:-v),{x1:C+he.x,y1:k+he.y,x2:A+he.x,y2:j+he.y,anchorPointX:H,anchorPointY:K}}class qt{constructor(r,u,d,m,v){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new Xe(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new tn(m),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,u,d,m){const v=d.getBucket(u),C=d.latestFeatureIndex;if(!v||!C||u.id!==v.layerIds[0])return;const A=d.collisionBoxArray,k=v.layers[0].layout,j=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),H=d.tileSize/l.EXTENT,K=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),he=k.get("text-pitch-alignment")==="map",Ie=k.get("text-rotation-alignment")==="map",Ce=Ve(d,1,this.transform.zoom),Le=st(K,he,Ie,this.transform,Ce);let Me=null;if(he){const nt=en(K,he,Ie,this.transform,Ce);Me=l.multiply([],this.transform.labelPlaneMatrix,nt)}this.retainedQueryData[v.bucketInstanceId]=new yt(v.bucketInstanceId,C,v.sourceLayerIndex,v.index,d.tileID);const Ke={bucket:v,layout:k,posMatrix:K,textLabelPlaneMatrix:Le,labelToScreenMatrix:Me,scale:j,textPixelRatio:H,holdingForFade:d.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(m)for(const nt of v.sortKeyRanges){const{sortKey:Fe,symbolInstanceStart:et,symbolInstanceEnd:at}=nt;r.push({sortKey:Fe,symbolInstanceStart:et,symbolInstanceEnd:at,parameters:Ke})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:Ke})}attemptAnchorPlacement(r,u,d,m,v,C,A,k,j,H,K,he,Ie,Ce,Le,Me){const Ke=[he.textOffset0,he.textOffset1],nt=cn(r,d,m,Ke,v),Fe=this.collisionIndex.placeCollisionBox(Nt(u,nt.x,nt.y,C,A,this.transform.angle),K,k,j,H.predicate,Me);if((!Le||this.collisionIndex.placeCollisionBox(Nt(Le,nt.x,nt.y,C,A,this.transform.angle),K,k,j,H.predicate,Me).box.length!==0)&&Fe.box.length>0){let et;if(this.prevPlacement&&this.prevPlacement.variableOffsets[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID].text&&(et=this.prevPlacement.variableOffsets[he.crossTileID].anchor),he.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[he.crossTileID]={textOffset:Ke,width:d,height:m,anchor:r,textBoxScale:v,prevAnchor:et},this.markUsedJustification(Ie,r,he,Ce),Ie.allowVerticalPlacement&&(this.markUsedOrientation(Ie,Ce,he),this.placedOrientations[he.crossTileID]=Ce),{shift:nt,placedGlyphBoxes:Fe}}}placeLayerBucketPart(r,u,d){const{bucket:m,layout:v,posMatrix:C,textLabelPlaneMatrix:A,labelToScreenMatrix:k,textPixelRatio:j,holdingForFade:H,collisionBoxArray:K,partiallyEvaluatedTextSize:he,collisionGroup:Ie}=r.parameters,Ce=v.get("text-optional"),Le=v.get("icon-optional"),Me=l.getOverlapMode(v,"text-overlap","text-allow-overlap"),Ke=Me==="always",nt=l.getOverlapMode(v,"icon-overlap","icon-allow-overlap"),Fe=nt==="always",et=v.get("text-rotation-alignment")==="map",at=v.get("text-pitch-alignment")==="map",ct=v.get("icon-text-fit")!=="none",ft=v.get("symbol-z-order")==="viewport-y",xt=Ke&&(Fe||!m.hasIconData()||Le),dt=Fe&&(Ke||!m.hasTextData()||Ce);!m.collisionArrays&&K&&m.deserializeCollisionBoxes(K);const Lt=this.retainedQueryData[m.bucketInstanceId].tileID,$t=this.terrain?(It,rn)=>this.terrain.getElevation(Lt,It,rn):null,wn=(It,rn)=>{if(u[It.crossTileID])return;if(H)return void(this.placements[It.crossTileID]=new pt(!1,!1,!1));let Ft=!1,jn=!1,Rn=!0,Cn=null,hn={box:null,offscreen:null},fr={box:null,offscreen:null},ti=null,Ar=null,Xr=null,Bi=0,So=0,To=0;rn.textFeatureIndex?Bi=rn.textFeatureIndex:It.useRuntimeCollisionCircles&&(Bi=It.featureIndex),rn.verticalTextFeatureIndex&&(So=rn.verticalTextFeatureIndex);const mi=rn.textBox;if(mi){const si=Un=>{let Nr=l.WritingMode.horizontal;if(m.allowVerticalPlacement&&!Un&&this.prevPlacement){const Kr=this.prevPlacement.placedOrientations[It.crossTileID];Kr&&(this.placedOrientations[It.crossTileID]=Kr,Nr=Kr,this.markUsedOrientation(m,Nr,It))}return Nr},qr=(Un,Nr)=>{if(m.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&rn.verticalTextBox){for(const Kr of m.writingModes)if(Kr===l.WritingMode.vertical?(hn=Nr(),fr=hn):hn=Un(),hn&&hn.box&&hn.box.length)break}else hn=Un()};if(v.get("text-variable-anchor")){let Un=v.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[It.crossTileID]){const Zn=this.prevPlacement.variableOffsets[It.crossTileID];Un.indexOf(Zn.anchor)>0&&(Un=Un.filter(Ur=>Ur!==Zn.anchor),Un.unshift(Zn.anchor))}const Nr=(Zn,Ur,Ni)=>{const pc=Zn.x2-Zn.x1,hs=Zn.y2-Zn.y1,Fg=It.textBoxScale,Dd=ct&&nt==="never"?Ur:null;let ir={box:[],offscreen:!1};const Zh=Me!=="never"?2*Un.length:Un.length;for(let mu=0;mu<Zh;++mu){const fs=this.attemptAnchorPlacement(Un[mu%Un.length],Zn,pc,hs,Fg,et,at,j,C,Ie,mu>=Un.length?Me:"never",It,m,Ni,Dd,$t);if(fs&&(ir=fs.placedGlyphBoxes,ir&&ir.box&&ir.box.length)){Ft=!0,Cn=fs.shift;break}}return ir};qr(()=>Nr(mi,rn.iconBox,l.WritingMode.horizontal),()=>{const Zn=rn.verticalTextBox;return m.allowVerticalPlacement&&!(hn&&hn.box&&hn.box.length)&&It.numVerticalGlyphVertices>0&&Zn?Nr(Zn,rn.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),hn&&(Ft=hn.box,Rn=hn.offscreen);const Kr=si(hn&&hn.box);if(!Ft&&this.prevPlacement){const Zn=this.prevPlacement.variableOffsets[It.crossTileID];Zn&&(this.variableOffsets[It.crossTileID]=Zn,this.markUsedJustification(m,Zn.anchor,It,Kr))}}else{const Un=(Nr,Kr)=>{const Zn=this.collisionIndex.placeCollisionBox(Nr,Me,j,C,Ie.predicate,$t);return Zn&&Zn.box&&Zn.box.length&&(this.markUsedOrientation(m,Kr,It),this.placedOrientations[It.crossTileID]=Kr),Zn};qr(()=>Un(mi,l.WritingMode.horizontal),()=>{const Nr=rn.verticalTextBox;return m.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&Nr?Un(Nr,l.WritingMode.vertical):{box:null,offscreen:null}}),si(hn&&hn.box&&hn.box.length)}}if(ti=hn,Ft=ti&&ti.box&&ti.box.length>0,Rn=ti&&ti.offscreen,It.useRuntimeCollisionCircles){const si=m.text.placedSymbolArray.get(It.centerJustifiedTextSymbolIndex),qr=l.evaluateSizeForFeature(m.textSizeData,he,si),Un=v.get("text-padding");Ar=this.collisionIndex.placeCollisionCircles(Me,si,m.lineVertexArray,m.glyphOffsetArray,qr,C,A,k,d,at,Ie.predicate,It.collisionCircleDiameter,Un,$t),Ar.circles.length&&Ar.collisionDetected&&!d&&l.warnOnce("Collisions detected, but collision boxes are not shown"),Ft=Ke||Ar.circles.length>0&&!Ar.collisionDetected,Rn=Rn&&Ar.offscreen}if(rn.iconFeatureIndex&&(To=rn.iconFeatureIndex),rn.iconBox){const si=qr=>{const Un=ct&&Cn?Nt(qr,Cn.x,Cn.y,et,at,this.transform.angle):qr;return this.collisionIndex.placeCollisionBox(Un,nt,j,C,Ie.predicate,$t)};fr&&fr.box&&fr.box.length&&rn.verticalIconBox?(Xr=si(rn.verticalIconBox),jn=Xr.box.length>0):(Xr=si(rn.iconBox),jn=Xr.box.length>0),Rn=Rn&&Xr.offscreen}const Wo=Ce||It.numHorizontalGlyphVertices===0&&It.numVerticalGlyphVertices===0,pu=Le||It.numIconVertices===0;if(Wo||pu?pu?Wo||(jn=jn&&Ft):Ft=jn&&Ft:jn=Ft=jn&&Ft,Ft&&ti&&ti.box&&this.collisionIndex.insertCollisionBox(ti.box,Me,v.get("text-ignore-placement"),m.bucketInstanceId,fr&&fr.box&&So?So:Bi,Ie.ID),jn&&Xr&&this.collisionIndex.insertCollisionBox(Xr.box,nt,v.get("icon-ignore-placement"),m.bucketInstanceId,To,Ie.ID),Ar&&(Ft&&this.collisionIndex.insertCollisionCircles(Ar.circles,Me,v.get("text-ignore-placement"),m.bucketInstanceId,Bi,Ie.ID),d)){const si=m.bucketInstanceId;let qr=this.collisionCircleArrays[si];qr===void 0&&(qr=this.collisionCircleArrays[si]=new _t);for(let Un=0;Un<Ar.circles.length;Un+=4)qr.circles.push(Ar.circles[Un+0]),qr.circles.push(Ar.circles[Un+1]),qr.circles.push(Ar.circles[Un+2]),qr.circles.push(Ar.collisionDetected?1:0)}if(It.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[It.crossTileID]=new pt(Ft||xt,jn||dt,Rn||m.justReloaded),u[It.crossTileID]=!0};if(ft){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const It=m.getSortedSymbolIndexes(this.transform.angle);for(let rn=It.length-1;rn>=0;--rn){const Ft=It[rn];wn(m.symbolInstances.get(Ft),m.collisionArrays[Ft])}}else for(let It=r.symbolInstanceStart;It<r.symbolInstanceEnd;It++)wn(m.symbolInstances.get(It),m.collisionArrays[It]);if(d&&m.bucketInstanceId in this.collisionCircleArrays){const It=this.collisionCircleArrays[m.bucketInstanceId];l.invert(It.invProjMatrix,C),It.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(r,u,d,m){let v;v=m===l.WritingMode.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(u)];const C=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const A of C)A>=0&&(r.text.placedSymbolArray.get(A).crossTileID=v>=0&&A!==v?0:d.crossTileID)}markUsedOrientation(r,u,d){const m=u===l.WritingMode.horizontal||u===l.WritingMode.horizontalOnly?u:0,v=u===l.WritingMode.vertical?u:0,C=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const A of C)r.text.placedSymbolArray.get(A).placedOrientation=m;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let d=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const m=u?u.symbolFadeChange(r):1,v=u?u.opacities:{},C=u?u.variableOffsets:{},A=u?u.placedOrientations:{};for(const k in this.placements){const j=this.placements[k],H=v[k];H?(this.opacities[k]=new Je(H,m,j.text,j.icon),d=d||j.text!==H.text.placed||j.icon!==H.icon.placed):(this.opacities[k]=new Je(null,m,j.text,j.icon,j.skipFade),d=d||j.text||j.icon)}for(const k in v){const j=v[k];if(!this.opacities[k]){const H=new Je(j,m,!1,!1);H.isHidden()||(this.opacities[k]=H,d=d||j.text.placed||j.icon.placed)}}for(const k in C)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=C[k]);for(const k in A)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=A[k]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const d={};for(const m of u){const v=m.getBucket(r);v&&m.latestFeatureIndex&&r.id===v.layerIds[0]&&this.updateBucketOpacities(v,d,m.collisionBoxArray)}}updateBucketOpacities(r,u,d){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const m=r.layers[0].layout,v=new Je(null,0,!1,!1,!0),C=m.get("text-allow-overlap"),A=m.get("icon-allow-overlap"),k=m.get("text-variable-anchor"),j=m.get("text-rotation-alignment")==="map",H=m.get("text-pitch-alignment")==="map",K=m.get("icon-text-fit")!=="none",he=new Je(null,0,C&&(A||!r.hasIconData()||m.get("icon-optional")),A&&(C||!r.hasTextData()||m.get("text-optional")),!0);!r.collisionArrays&&d&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(d);const Ie=(Ce,Le,Me)=>{for(let Ke=0;Ke<Le/4;Ke++)Ce.opacityVertexArray.emplaceBack(Me);Ce.hasVisibleVertices=Ce.hasVisibleVertices||Me!==mr};for(let Ce=0;Ce<r.symbolInstances.length;Ce++){const Le=r.symbolInstances.get(Ce),{numHorizontalGlyphVertices:Me,numVerticalGlyphVertices:Ke,crossTileID:nt}=Le;let Fe=this.opacities[nt];u[nt]?Fe=v:Fe||(Fe=he,this.opacities[nt]=Fe),u[nt]=!0;const et=Le.numIconVertices>0,at=this.placedOrientations[Le.crossTileID],ct=at===l.WritingMode.vertical,ft=at===l.WritingMode.horizontal||at===l.WritingMode.horizontalOnly;if(Me>0||Ke>0){const xt=pr(Fe.text);Ie(r.text,Me,ct?mr:xt),Ie(r.text,Ke,ft?mr:xt);const dt=Fe.text.isHidden();[Le.rightJustifiedTextSymbolIndex,Le.centerJustifiedTextSymbolIndex,Le.leftJustifiedTextSymbolIndex].forEach(wn=>{wn>=0&&(r.text.placedSymbolArray.get(wn).hidden=dt||ct?1:0)}),Le.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Le.verticalPlacedTextSymbolIndex).hidden=dt||ft?1:0);const Lt=this.variableOffsets[Le.crossTileID];Lt&&this.markUsedJustification(r,Lt.anchor,Le,at);const $t=this.placedOrientations[Le.crossTileID];$t&&(this.markUsedJustification(r,"left",Le,$t),this.markUsedOrientation(r,$t,Le))}if(et){const xt=pr(Fe.icon),dt=!(K&&Le.verticalPlacedIconSymbolIndex&&ct);Le.placedIconSymbolIndex>=0&&(Ie(r.icon,Le.numIconVertices,dt?xt:mr),r.icon.placedSymbolArray.get(Le.placedIconSymbolIndex).hidden=Fe.icon.isHidden()),Le.verticalPlacedIconSymbolIndex>=0&&(Ie(r.icon,Le.numVerticalIconVertices,dt?mr:xt),r.icon.placedSymbolArray.get(Le.verticalPlacedIconSymbolIndex).hidden=Fe.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const xt=r.collisionArrays[Ce];if(xt){let dt=new l.Point(0,0);if(xt.textBox||xt.verticalTextBox){let $t=!0;if(k){const wn=this.variableOffsets[nt];wn?(dt=cn(wn.anchor,wn.width,wn.height,wn.textOffset,wn.textBoxScale),j&&dt._rotate(H?this.transform.angle:-this.transform.angle)):$t=!1}xt.textBox&&ln(r.textCollisionBox.collisionVertexArray,Fe.text.placed,!$t||ct,dt.x,dt.y),xt.verticalTextBox&&ln(r.textCollisionBox.collisionVertexArray,Fe.text.placed,!$t||ft,dt.x,dt.y)}const Lt=!!(!ft&&xt.verticalIconBox);xt.iconBox&&ln(r.iconCollisionBox.collisionVertexArray,Fe.icon.placed,Lt,K?dt.x:0,K?dt.y:0),xt.verticalIconBox&&ln(r.iconCollisionBox.collisionVertexArray,Fe.icon.placed,!Lt,K?dt.x:0,K?dt.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Ce=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Ce.invProjMatrix,r.placementViewportMatrix=Ce.viewportMatrix,r.collisionCircleArray=Ce.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const d=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function ln(g,r,u,d,m){g.emplaceBack(r?1:0,u?1:0,d||0,m||0),g.emplaceBack(r?1:0,u?1:0,d||0,m||0),g.emplaceBack(r?1:0,u?1:0,d||0,m||0),g.emplaceBack(r?1:0,u?1:0,d||0,m||0)}const En=Math.pow(2,25),yn=Math.pow(2,24),Vn=Math.pow(2,17),qn=Math.pow(2,16),dn=Math.pow(2,9),er=Math.pow(2,8),sr=Math.pow(2,1);function pr(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const r=g.placed?1:0,u=Math.floor(127*g.opacity);return u*En+r*yn+u*Vn+r*qn+u*dn+r*er+u*sr+r}const mr=0;class di{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,d,m,v){const C=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(C,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((A,k)=>A.sortKey-k.sortKey));this._currentPartIndex<C.length;)if(u.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,v())return!0;return!1}}class Pn{constructor(r,u,d,m,v,C,A,k){this.placement=new qt(r,u,C,A,k),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(r,u,d){const m=l.browser.now(),v=()=>!this._forceFullPlacement&&l.browser.now()-m>2;for(;this._currentPlacementIndex>=0;){const C=u[r[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=A)&&(!C.maxzoom||C.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new di(C)),this._inProgressLayer.continuePlacement(d[C.source],this.placement,this._showCollisionBoxes,C,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const ii=512/l.EXTENT/2;class xr{constructor(r,u,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const m=new Map;for(let v=0;v<u.length;v++){const C=u.get(v),A=C.key,k=m.get(A);k?k.push(C):m.set(A,[C])}for(const[v,C]of m){const A={positions:C.map(k=>({x:Math.floor(k.anchorX*ii),y:Math.floor(k.anchorY*ii)})),crossTileIDs:C.map(k=>k.crossTileID)};if(A.positions.length>128){const k=new l.KDBush(A.positions.length,16,Uint16Array);for(const{x:j,y:H}of A.positions)k.add(j,H);k.finish(),delete A.positions,A.index=k}this._symbolsByKey[v]=A}}getScaledCoordinates(r,u){const{x:d,y:m,z:v}=this.tileID.canonical,{x:C,y:A,z:k}=u.canonical,j=ii/Math.pow(2,k-v),H=(A*l.EXTENT+r.anchorY)*j,K=m*l.EXTENT*ii;return{x:Math.floor((C*l.EXTENT+r.anchorX)*j-d*l.EXTENT*ii),y:Math.floor(H-K)}}findMatches(r,u,d){const m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let v=0;v<r.length;v++){const C=r.get(v);if(C.crossTileID)continue;const A=this._symbolsByKey[C.key];if(!A)continue;const k=this.getScaledCoordinates(C,u);if(A.index){const j=A.index.range(k.x-m,k.y-m,k.x+m,k.y+m).sort();for(const H of j){const K=A.crossTileIDs[H];if(!d[K]){d[K]=!0,C.crossTileID=K;break}}}else if(A.positions)for(let j=0;j<A.positions.length;j++){const H=A.positions[j],K=A.crossTileIDs[j];if(Math.abs(H.x-k.x)<=m&&Math.abs(H.y-k.y)<=m&&!d[K]){d[K]=!0,C.crossTileID=K;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class aa{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class is{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const d in this.indexes){const m=this.indexes[d],v={};for(const C in m){const A=m[C];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+u),v[A.tileID.key]=A}this.indexes[d]=v}this.lng=r}addBucket(r,u,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let v=0;v<u.symbolInstances.length;v++)u.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const v in this.indexes){const C=this.indexes[v];if(Number(v)>r.overscaledZ)for(const A in C){const k=C[A];k.tileID.isChildOf(r)&&k.findMatches(u.symbolInstances,r,m)}else{const A=C[r.scaledTo(Number(v)).key];A&&A.findMatches(u.symbolInstances,r,m)}}for(let v=0;v<u.symbolInstances.length;v++){const C=u.symbolInstances.get(v);C.crossTileID||(C.crossTileID=d.generate(),m[C.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new xr(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const d of u.getCrossTileIDsLists())for(const m of d)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let u=!1;for(const d in this.indexes){const m=this.indexes[d];for(const v in m)r[m[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,m[v]),delete m[v],u=!0)}return u}}class Cr{constructor(){this.layerIndexes={},this.crossTileIDs=new aa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,d){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new is);let v=!1;const C={};m.handleWrapJump(d);for(const A of u){const k=A.getBucket(r);k&&r.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(A.tileID,k,this.crossTileIDs)&&(v=!0),C[k.bucketInstanceId]=!0)}return m.removeStaleBuckets(C)&&(v=!0),v}pruneUnusedLayers(r){const u={};r.forEach(d=>{u[d]=!0});for(const d in this.layerIndexes)u[d]||delete this.layerIndexes[d]}}const os=(g,r)=>l.emitValidationErrors(g,r&&r.filter(u=>u.identifier!=="source.canvas")),Ir=l.pick(l.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),$u=l.pick(l.operations,["setCenter","setZoom","setBearing","setPitch"]),Bo=l.emptyStyle();class Ps extends l.Evented{constructor(r,u={}){super(),this.map=r,this.dispatcher=new Ne(D(),this,r._getMapId()),this.imageManager=new ye,this.imageManager.setEventedParent(this),this.glyphManager=new le(r._requestManager,u.localIdeographFontFamily),this.lineAtlas=new we(256,512),this.crossTileSymbolIndex=new Cr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const d=this;this._rtlTextPluginCallback=Ps.registerForPluginStateChange(m=>{d.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(v,C)=>{if(l.triggerPluginCompletionEvent(v),C&&C.every(A=>A))for(const A in d.sourceCaches){const k=d.sourceCaches[A].getSource().type;k!=="vector"&&k!=="geojson"||d.sourceCaches[A].reload()}})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const v=this.sourceCaches[m.sourceId];if(!v)return;const C=v.getSource();if(C&&C.vectorLayerIds)for(const A in this._layers){const k=this._layers[A];k.source===C.id&&this._validateLayer(k)}})}loadURL(r,u={},d){this.fire(new l.Event("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const m=this.map._requestManager.transformRequest(r,G.Style);this._request=l.getJSON(m,(v,C)=>{this._request=null,v?this.fire(new l.ErrorEvent(v)):C&&this._load(C,u,d)})}loadJSON(r,u={},d){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(r,u,d)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(Bo,{validate:!1})}_load(r,u,d){const m=u.transformStyle?u.transformStyle(d,r):r;if(!u.validate||!os(this,l.validateStyle(m))){this._loaded=!0,this.stylesheet=m;for(const v in m.sources)this.addSource(v,m.sources[v],{validate:!1});m.sprite?this._loadSprite(m.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(m.glyphs),this._createLayers(),this.light=new Ee(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}}_createLayers(){const r=l.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of r){const d=l.createStyleLayer(u);d.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=d}}_loadSprite(r,u=!1,d=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(m,v,C,A){const k=M(m),j=k.length,H=C>1?"@2x":"",K={},he={},Ie={};for(const{id:Ce,url:Le}of k){const Me=v.transformRequest(v.normalizeSpriteURL(Le,H,".json"),G.SpriteJSON),Ke=`${Ce}_${Me.url}`;K[Ke]=l.getJSON(Me,(et,at)=>{delete K[Ke],he[Ce]=at,Z(A,he,Ie,et,j)});const nt=v.transformRequest(v.normalizeSpriteURL(Le,H,".png"),G.SpriteImage),Fe=`${Ce}_${nt.url}`;K[Fe]=pe.getImage(nt,(et,at)=>{delete K[Fe],Ie[Ce]=at,Z(A,he,Ie,et,j)})}return{cancel(){for(const Ce of Object.values(K))Ce.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(m,v)=>{if(this._spriteRequest=null,m)this.fire(new l.ErrorEvent(m));else if(v)for(const C in v){this._spritesImagesIds[C]=[];const A=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(k=>!(k in v)):[];for(const k of A)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(const k in v[C]){const j=C==="default"?k:`${C}:${k}`;this._spritesImagesIds[C].push(j),j in this.imageManager.images?this.imageManager.updateImage(j,v[C][k],!1):this.imageManager.addImage(j,v[C][k]),u&&(this._changedImages[j]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"})),d&&d(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const d=r.sourceLayer;if(!d)return;const m=u.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(d)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${d}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const u=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u);const d=[];for(const m of r)u[m]&&d.push(u[m]);return d}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const d of u){const m=this._layers[d];m.type!=="custom"&&(r[d]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(m.length||v.length)&&this._updateWorkerLayers(m,v);for(const C in this._updatedSources){const A=this._updatedSources[C];if(A==="reload")this._reloadSource(C);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const d={};for(const m in this.sourceCaches){const v=this.sourceCaches[m];d[m]=v.used,v.used=!1}for(const m of this._order){const v=this._layers[m];v.recalculate(r,this._availableImages),!v.isHidden(r.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const m in d){const v=this.sourceCaches[m];d[m]!==v.used&&v.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.z=r.zoom,u&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){this._checkLoaded();const d=this.serialize();if(r=u.transformStyle?u.transformStyle(d,r):r,os(this,l.validateStyle(r)))return!1;(r=l.clone$1(r)).layers=l.derefLayers(r.layers);const m=l.diffStyles(d,r).filter(C=>!(C.command in $u));if(m.length===0)return!1;const v=m.filter(C=>!(C.command in Ir));if(v.length>0)throw new Error(`Unimplemented: ${v.map(C=>C.command).join(", ")}.`);for(const C of m)C.command!=="setTransition"&&this[C.command].apply(this,C.args);return this.stylesheet=r,!0}addImage(r,u){if(this.getImage(r))return this.fire(new l.ErrorEvent(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.ErrorEvent(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.validateStyle.source,`sources.${r}`,u,null,d))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const m=this.sourceCaches[r]=new R(r,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new l.ErrorEvent(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,d={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new l.ErrorEvent(new Error(`Layer "${m}" already exists on this map.`)));let v;if(r.type==="custom"){if(os(this,l.validateCustomStyleLayer(r)))return;v=l.createStyleLayer(r)}else{if(typeof r.source=="object"&&(this.addSource(m,r.source),r=l.clone$1(r),r=l.extend(r,{source:m})),this._validate(l.validateStyle.layer,`layers.${m}`,r,{arrayIndex:-1},d))return;v=l.createStyleLayer(r),this._validateLayer(v),v.setEventedParent(this,{layer:{id:m}})}const C=u?this._order.indexOf(u):this._order.length;if(u&&C===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(C,0,m),this._layerOrderChanged=!0,this._layers[m]=v,this._removedLayers[m]&&v.source&&v.type!=="custom"){const A=this._removedLayers[m];delete this._removedLayers[m],A.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const d=this._order.indexOf(r);this._order.splice(d,1);const m=u?this._order.indexOf(u):this._order.length;u&&m===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,d){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===u&&m.maxzoom===d||(u!=null&&(m.minzoom=u),d!=null&&(m.maxzoom=d),this._updateLayer(m)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,d={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!l.deepEqual(m.filter,u))return u==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(l.validateStyle.filter,`layers.${m.id}.filter`,u,null,d)||(m.filter=l.clone$1(u),this._updateLayer(m)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.clone$1(this.getLayer(r).filter)}setLayoutProperty(r,u,d,m={}){this._checkLoaded();const v=this.getLayer(r);v?l.deepEqual(v.getLayoutProperty(u),d)||(v.setLayoutProperty(u,d,m),this._updateLayer(v)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const d=this.getLayer(r);if(d)return d.getLayoutProperty(u);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,d,m={}){this._checkLoaded();const v=this.getLayer(r);v?l.deepEqual(v.getPaintProperty(u),d)||(v.setPaintProperty(u,d,m)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const d=r.source,m=r.sourceLayer,v=this.sourceCaches[d];if(v===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const C=v.getSource().type;C==="geojson"&&m?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||m?(r.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),v.setFeatureState(m,r.id,u)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const d=r.source,m=this.sourceCaches[d];if(m===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const v=m.getSource().type,C=v==="vector"?r.sourceLayer:void 0;v!=="vector"||C?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(C,r.id,u):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,d=r.sourceLayer,m=this.sourceCaches[u];if(m!==void 0)return m.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),m.getFeatureState(d,r.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=l.mapObject(this.sourceCaches,m=>m.serialize()),u=this._serializeByIds(this._order),d=this.stylesheet;return l.filterObject({version:d.version,name:d.name,metadata:d.metadata,light:d.light,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,sources:r,layers:u},m=>m!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=C=>this._layers[C].type==="fill-extrusion",d={},m=[];for(let C=this._order.length-1;C>=0;C--){const A=this._order[C];if(u(A)){d[A]=C;for(const k of r){const j=k[A];if(j)for(const H of j)m.push(H)}}}m.sort((C,A)=>A.intersectionZ-C.intersectionZ);const v=[];for(let C=this._order.length-1;C>=0;C--){const A=this._order[C];if(u(A))for(let k=m.length-1;k>=0;k--){const j=m[k].feature;if(d[j.layer.id]<C)break;v.push(j),m.pop()}else for(const k of r){const j=k[A];if(j)for(const H of j)v.push(H.feature)}}return v}queryRenderedFeatures(r,u,d){u&&u.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const m={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const A of u.layers){const k=this._layers[A];if(!k)return this.fire(new l.ErrorEvent(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];m[k.source]=!0}}const v=[];u.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const A in this.sourceCaches)u.layers&&!m[A]||v.push(Gt(this.sourceCaches[A],this._layers,C,r,u,d));return this.placement&&v.push(function(A,k,j,H,K,he,Ie){const Ce={},Le=he.queryRenderedSymbols(H),Me=[];for(const Ke of Object.keys(Le).map(Number))Me.push(Ie[Ke]);Me.sort(an);for(const Ke of Me){const nt=Ke.featureIndex.lookupSymbolFeatures(Le[Ke.bucketInstanceId],k,Ke.bucketIndex,Ke.sourceLayerIndex,K.filter,K.layers,K.availableImages,A);for(const Fe in nt){const et=Ce[Fe]=Ce[Fe]||[],at=nt[Fe];at.sort((ct,ft)=>{const xt=Ke.featureSortOrder;if(xt){const dt=xt.indexOf(ct.featureIndex);return xt.indexOf(ft.featureIndex)-dt}return ft.featureIndex-ct.featureIndex});for(const ct of at)et.push(ct)}}for(const Ke in Ce)Ce[Ke].forEach(nt=>{const Fe=nt.feature,et=j[A[Ke].source].getFeatureState(Fe.layer["source-layer"],Fe.id);Fe.source=Fe.layer.source,Fe.layer["source-layer"]&&(Fe.sourceLayer=Fe.layer["source-layer"]),Fe.state=et});return Ce}(this._layers,C,this.sourceCaches,r,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(r,u){u&&u.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const d=this.sourceCaches[r];return d?function(m,v){const C=m.getRenderableIds().map(j=>m.getTileByID(j)),A=[],k={};for(let j=0;j<C.length;j++){const H=C[j],K=H.tileID.canonical.key;k[K]||(k[K]=!0,H.querySourceFeatures(A,v))}return A}(d,u):[]}addSourceType(r,u,d){return un(r)?d(new Error(`A source type called "${r}" already exists.`)):(((m,v)=>{Vt[m]=v})(r,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:u.workerSourceURL},d):d(null,null))}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const d=this.light.getLight();let m=!1;for(const C in r)if(!l.deepEqual(r[C],d[C])){m=!0;break}if(!m)return;const v={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(v)}_validate(r,u,d,m,v={}){return(!v||v.validate!==!1)&&os(this,r.call(l.validateStyle,l.extend({key:u,style:this.serialize(),value:d,styleSpec:l.v8Spec},m)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const d=this.sourceCaches[u];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,d,m,v=!1){let C=!1,A=!1;const k={};for(const j of this._order){const H=this._layers[j];if(H.type!=="symbol")continue;if(!k[H.source]){const he=this.sourceCaches[H.source];k[H.source]=he.getRenderableIds(!0).map(Ie=>he.getTileByID(Ie)).sort((Ie,Ce)=>Ce.tileID.overscaledZ-Ie.tileID.overscaledZ||(Ie.tileID.isLessThan(Ce.tileID)?-1:1))}const K=this.crossTileSymbolIndex.addLayer(H,k[H.source],r.center.lng);C=C||K}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),r.zoom))&&(this.pauseablePlacement=new Pn(r,this.map.terrain,this._order,v,u,d,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),A=!0),C&&this.pauseablePlacement.placement.setStale()),A||C)for(const j of this._order){const H=this._layers[j];H.type==="symbol"&&this.placement.updateLayerOpacities(H,k[H.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u,d){this.imageManager.getImages(u.icons,d),this._updateTilesForChangedImages();const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(r,u,d){this.glyphManager.getGlyphs(u.stacks,d);const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,[""])}getResource(r,u,d){return l.makeRequest(u,d)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(l.validateStyle.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,u,d={},m){this._checkLoaded();const v=[{id:r,url:u}],C=[...M(this.stylesheet.sprite),...v];this._validate(l.validateStyle.sprite,"sprite",C,null,d)||(this.stylesheet.sprite=C,this._loadSprite(v,!0,m))}removeSprite(r){this._checkLoaded();const u=M(this.stylesheet.sprite);if(u.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;u.splice(u.findIndex(d=>d.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}else this.fire(new l.ErrorEvent(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return M(this.stylesheet.sprite)}setSprite(r,u={},d){this._checkLoaded(),r&&this._validate(l.validateStyle.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}Ps.registerForPluginStateChange=l.registerForPluginStateChange;var $a=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ms="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Zr={prelude:kn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:kn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:kn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:kn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:kn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:kn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:kn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:kn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:kn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:kn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:kn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:kn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:kn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:kn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:kn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:kn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:kn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:kn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:kn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:kn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:kn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:kn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:kn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:kn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:kn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:kn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:kn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ms),terrainDepth:kn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ms),terrainCoords:kn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ms)};function kn(g,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/attribute ([\w]+) ([\w]+)/g),m=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=v?v.concat(m):m,A={};return{fragmentSource:g=g.replace(u,(k,j,H,K,he)=>(A[he]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${he}
varying ${H} ${K} ${he};
#else
uniform ${H} ${K} u_${he};
#endif
`:`
#ifdef HAS_UNIFORM_u_${he}
    ${H} ${K} ${he} = u_${he};
#endif
`)),vertexSource:r=r.replace(u,(k,j,H,K,he)=>{const Ie=K==="float"?"vec2":"vec4",Ce=he.match(/color/)?"color":Ie;return A[he]?j==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
attribute ${H} ${Ie} a_${he};
varying ${H} ${K} ${he};
#else
uniform ${H} ${K} u_${he};
#endif
`:Ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = a_${he};
#else
    ${H} ${K} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = unpack_mix_${Ce}(a_${he}, u_${he}_t);
#else
    ${H} ${K} ${he} = u_${he};
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
attribute ${H} ${Ie} a_${he};
#else
uniform ${H} ${K} u_${he};
#endif
`:Ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${H} ${K} ${he} = a_${he};
#else
    ${H} ${K} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${H} ${K} ${he} = unpack_mix_${Ce}(a_${he}, u_${he}_t);
#else
    ${H} ${K} ${he} = u_${he};
#endif
`}),staticAttributes:d,staticUniforms:C}}class Gl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,d,m,v,C,A,k,j){this.context=r;let H=this.boundPaintVertexBuffers.length!==m.length;for(let K=0;!H&&K<m.length;K++)this.boundPaintVertexBuffers[K]!==m[K]&&(H=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==d||H||this.boundIndexBuffer!==v||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==j?this.freshBind(u,d,m,v,C,A,k,j):(r.bindVertexArray.set(this.vao),A&&A.bind(),v&&v.dynamicDraw&&v.bind(),k&&k.bind(),j&&j.bind())}freshBind(r,u,d,m,v,C,A,k){const j=r.numAttributes,H=this.context,K=H.gl;this.vao&&this.destroy(),this.vao=H.createVertexArray(),H.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=m,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=k,u.enableAttributes(K,r);for(const he of d)he.enableAttributes(K,r);C&&C.enableAttributes(K,r),A&&A.enableAttributes(K,r),k&&k.enableAttributes(K,r),u.bind(),u.setVertexAttribPointers(K,r,v);for(const he of d)he.bind(),he.setVertexAttribPointers(K,r,v);C&&(C.bind(),C.setVertexAttribPointers(K,r,v)),m&&m.bind(),A&&(A.bind(),A.setVertexAttribPointers(K,r,v)),k&&(k.bind(),k.setVertexAttribPointers(K,r,v)),H.currentNumAttributes=j}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function ks(g){const r=[];for(let u=0;u<g.length;u++){if(g[u]===null)continue;const d=g[u].split(" ");r.push(d.pop())}return r}class Eh{constructor(r,u,d,m,v,C,A){const k=r.gl;this.program=k.createProgram();const j=ks(d.staticAttributes),H=m?m.getBinderAttributes():[],K=j.concat(H),he=Zr.prelude.staticUniforms?ks(Zr.prelude.staticUniforms):[],Ie=d.staticUniforms?ks(d.staticUniforms):[],Ce=m?m.getBinderUniforms():[],Le=he.concat(Ie).concat(Ce),Me=[];for(const ft of Le)Me.indexOf(ft)<0&&Me.push(ft);const Ke=m?m.defines():[];C&&Ke.push("#define OVERDRAW_INSPECTOR;"),A&&Ke.push("#define TERRAIN3D;");const nt=Ke.concat(Zr.prelude.fragmentSource,d.fragmentSource).join(`
`),Fe=Ke.concat(Zr.prelude.vertexSource,d.vertexSource).join(`
`),et=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(et,nt),k.compileShader(et),k.attachShader(this.program,et);const at=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(at,Fe),k.compileShader(at),k.attachShader(this.program,at),this.attributes={};const ct={};this.numAttributes=K.length;for(let ft=0;ft<this.numAttributes;ft++)K[ft]&&(k.bindAttribLocation(this.program,ft,K[ft]),this.attributes[K[ft]]=ft);k.linkProgram(this.program),k.deleteShader(at),k.deleteShader(et);for(let ft=0;ft<Me.length;ft++){const xt=Me[ft];if(xt&&!ct[xt]){const dt=k.getUniformLocation(this.program,xt);dt&&(ct[xt]=dt)}}this.fixedUniforms=v(r,ct),this.terrainUniforms=((ft,xt)=>({u_depth:new l.Uniform1i(ft,xt.u_depth),u_terrain:new l.Uniform1i(ft,xt.u_terrain),u_terrain_dim:new l.Uniform1f(ft,xt.u_terrain_dim),u_terrain_matrix:new l.UniformMatrix4f(ft,xt.u_terrain_matrix),u_terrain_unpack:new l.Uniform4f(ft,xt.u_terrain_unpack),u_terrain_exaggeration:new l.Uniform1f(ft,xt.u_terrain_exaggeration)}))(r,ct),this.binderUniforms=m?m.getUniforms(r,ct):[]}draw(r,u,d,m,v,C,A,k,j,H,K,he,Ie,Ce,Le,Me,Ke,nt){const Fe=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(m),r.setColorMode(v),r.setCullFace(C),k){r.activeTexture.set(Fe.TEXTURE2),Fe.bindTexture(Fe.TEXTURE_2D,k.depthTexture),r.activeTexture.set(Fe.TEXTURE3),Fe.bindTexture(Fe.TEXTURE_2D,k.texture);for(const at in this.terrainUniforms)this.terrainUniforms[at].set(k[at])}for(const at in this.fixedUniforms)this.fixedUniforms[at].set(A[at]);Le&&Le.setUniforms(r,this.binderUniforms,Ie,{zoom:Ce});let et=0;switch(u){case Fe.LINES:et=2;break;case Fe.TRIANGLES:et=3;break;case Fe.LINE_STRIP:et=1}for(const at of he.get()){const ct=at.vaos||(at.vaos={});(ct[j]||(ct[j]=new Gl)).bind(r,this,H,Le?Le.getPaintVertexBuffers():[],K,at.vertexOffset,Me,Ke,nt),Fe.drawElements(u,at.primitiveLength*et,Fe.UNSIGNED_SHORT,at.primitiveOffset*et*2)}}}function Vu(g,r,u){const d=1/Ve(u,1,r.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),v=u.tileSize*Math.pow(2,r.transform.tileZoom)/m,C=v*(u.tileID.canonical.x+u.tileID.wrap*m),A=v*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[d,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[C>>16,A>>16],u_pixel_coord_lower:[65535&C,65535&A]}}const ss=(g,r,u,d)=>{const m=r.style.light,v=m.properties.get("position"),C=[v.x,v.y,v.z],A=function(){var j=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&(j[1]=0,j[2]=0,j[3]=0,j[5]=0,j[6]=0,j[7]=0),j[0]=1,j[4]=1,j[8]=1,j}();m.properties.get("anchor")==="viewport"&&function(j,H){var K=Math.sin(H),he=Math.cos(H);j[0]=he,j[1]=K,j[2]=0,j[3]=-K,j[4]=he,j[5]=0,j[6]=0,j[7]=0,j[8]=1}(A,-r.transform.angle),function(j,H,K){var he=H[0],Ie=H[1],Ce=H[2];j[0]=he*K[0]+Ie*K[3]+Ce*K[6],j[1]=he*K[1]+Ie*K[4]+Ce*K[7],j[2]=he*K[2]+Ie*K[5]+Ce*K[8]}(C,C,A);const k=m.properties.get("color");return{u_matrix:g,u_lightpos:C,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+u,u_opacity:d}},Sh=(g,r,u,d,m,v,C)=>l.extend(ss(g,r,u,d),Vu(v,r,C),{u_height_factor:-Math.pow(2,m.overscaledZ)/C.tileSize/8}),Zl=g=>({u_matrix:g}),bi=(g,r,u,d)=>l.extend(Zl(g),Vu(u,r,d)),Gu=(g,r)=>({u_matrix:g,u_world:r}),Th=(g,r,u,d,m)=>l.extend(bi(g,r,u,d),{u_world:m}),Wl=(g,r,u,d)=>{const m=g.transform;let v,C;if(d.paint.get("circle-pitch-alignment")==="map"){const A=Ve(u,1,m.zoom);v=!0,C=[A,A]}else v=!1,C=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(r.posMatrix,u,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:C}},Zu=(g,r,u)=>{const d=Ve(u,1,r.zoom),m=Math.pow(2,r.zoom-u.tileID.overscaledZ),v=u.tileID.overscaleFactor();return{u_matrix:g,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[r.pixelsToGLUnits[0]/(d*m),r.pixelsToGLUnits[1]/(d*m)],u_overscale_factor:v}},Hl=(g,r,u=1)=>({u_matrix:g,u_color:r,u_overlay:0,u_overlay_scale:u}),Va=g=>({u_matrix:g}),Ga=(g,r,u,d)=>({u_matrix:g,u_extrude_scale:Ve(r,1,u),u_intensity:d});function No(g,r){const u=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new l.MercatorCoordinate(0,d/u).toLngLat().lat,new l.MercatorCoordinate(0,(d+1)/u).toLngLat().lat]}const _o=(g,r,u,d)=>{const m=g.transform;return{u_matrix:la(g,r,u,d),u_ratio:1/Ve(r,1,m.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Ei=(g,r,u,d,m)=>l.extend(_o(g,r,u,m),{u_image:0,u_image_height:d}),xo=(g,r,u,d,m)=>{const v=g.transform,C=zs(r,v);return{u_matrix:la(g,r,u,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Ve(r,1,v.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[C,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Za=(g,r,u,d,m,v)=>{const C=g.lineAtlas,A=zs(r,g.transform),k=u.layout.get("line-cap")==="round",j=C.getDash(d.from,k),H=C.getDash(d.to,k),K=j.width*m.fromScale,he=H.width*m.toScale;return l.extend(_o(g,r,u,v),{u_patternscale_a:[A/K,-j.height/2],u_patternscale_b:[A/he,-H.height/2],u_sdfgamma:C.width/(256*Math.min(K,he)*g.pixelRatio)/2,u_image:0,u_tex_y_a:j.y,u_tex_y_b:H.y,u_mix:m.t})};function zs(g,r){return 1/Ve(g,1,r.tileZoom)}function la(g,r,u,d){return g.translatePosMatrix(d?d.posMatrix:r.tileID.posMatrix,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Wa=(g,r,u,d,m)=>{return{u_matrix:g,u_tl_parent:r,u_scale_parent:u,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(C=m.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(v=m.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:Ls(m.paint.get("raster-hue-rotate"))};var v,C};function Ls(g){g*=Math.PI/180;const r=Math.sin(g),u=Math.cos(g);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const Rs=(g,r,u,d,m,v,C,A,k,j)=>{const H=m.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:H.cameraToCenterDistance,u_pitch:H.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:H.width/H.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:C,u_coord_matrix:A,u_is_text:+k,u_pitch_with_map:+d,u_texsize:j,u_texture:0}},ua=(g,r,u,d,m,v,C,A,k,j,H)=>{const K=m.transform;return l.extend(Rs(g,r,u,d,m,v,C,A,k,j),{u_gamma_scale:d?Math.cos(K._pitch)*K.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+H})},pi=(g,r,u,d,m,v,C,A,k,j)=>l.extend(ua(g,r,u,d,m,v,C,A,!0,k,!0),{u_texsize_icon:j,u_texture_icon:1}),ei=(g,r,u)=>({u_matrix:g,u_opacity:r,u_color:u}),Xl=(g,r,u,d,m,v)=>l.extend(function(C,A,k,j){const H=k.imageManager.getPattern(C.from.toString()),K=k.imageManager.getPattern(C.to.toString()),{width:he,height:Ie}=k.imageManager.getPixelSize(),Ce=Math.pow(2,j.tileID.overscaledZ),Le=j.tileSize*Math.pow(2,k.transform.tileZoom)/Ce,Me=Le*(j.tileID.canonical.x+j.tileID.wrap*Ce),Ke=Le*j.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:H.tl,u_pattern_br_a:H.br,u_pattern_tl_b:K.tl,u_pattern_br_b:K.br,u_texsize:[he,Ie],u_mix:A.t,u_pattern_size_a:H.displaySize,u_pattern_size_b:K.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/Ve(j,1,k.transform.tileZoom),u_pixel_coord_upper:[Me>>16,Ke>>16],u_pixel_coord_lower:[65535&Me,65535&Ke]}}(d,v,u,m),{u_matrix:g,u_opacity:r}),Ha={fillExtrusion:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_lightpos:new l.Uniform3f(g,r.u_lightpos),u_lightintensity:new l.Uniform1f(g,r.u_lightintensity),u_lightcolor:new l.Uniform3f(g,r.u_lightcolor),u_vertical_gradient:new l.Uniform1f(g,r.u_vertical_gradient),u_opacity:new l.Uniform1f(g,r.u_opacity)}),fillExtrusionPattern:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_lightpos:new l.Uniform3f(g,r.u_lightpos),u_lightintensity:new l.Uniform1f(g,r.u_lightintensity),u_lightcolor:new l.Uniform3f(g,r.u_lightcolor),u_vertical_gradient:new l.Uniform1f(g,r.u_vertical_gradient),u_height_factor:new l.Uniform1f(g,r.u_height_factor),u_image:new l.Uniform1i(g,r.u_image),u_texsize:new l.Uniform2f(g,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(g,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(g,r.u_scale),u_fade:new l.Uniform1f(g,r.u_fade),u_opacity:new l.Uniform1f(g,r.u_opacity)}),fill:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix)}),fillPattern:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_image:new l.Uniform1i(g,r.u_image),u_texsize:new l.Uniform2f(g,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(g,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(g,r.u_scale),u_fade:new l.Uniform1f(g,r.u_fade)}),fillOutline:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_world:new l.Uniform2f(g,r.u_world)}),fillOutlinePattern:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_world:new l.Uniform2f(g,r.u_world),u_image:new l.Uniform1i(g,r.u_image),u_texsize:new l.Uniform2f(g,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(g,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(g,r.u_scale),u_fade:new l.Uniform1f(g,r.u_fade)}),circle:(g,r)=>({u_camera_to_center_distance:new l.Uniform1f(g,r.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(g,r.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(g,r.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(g,r.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(g,r.u_matrix)}),collisionBox:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_camera_to_center_distance:new l.Uniform1f(g,r.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(g,r.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(g,r.u_extrude_scale),u_overscale_factor:new l.Uniform1f(g,r.u_overscale_factor)}),collisionCircle:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_inv_matrix:new l.UniformMatrix4f(g,r.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(g,r.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(g,r.u_viewport_size)}),debug:(g,r)=>({u_color:new l.UniformColor(g,r.u_color),u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_overlay:new l.Uniform1i(g,r.u_overlay),u_overlay_scale:new l.Uniform1f(g,r.u_overlay_scale)}),clippingMask:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix)}),heatmap:(g,r)=>({u_extrude_scale:new l.Uniform1f(g,r.u_extrude_scale),u_intensity:new l.Uniform1f(g,r.u_intensity),u_matrix:new l.UniformMatrix4f(g,r.u_matrix)}),heatmapTexture:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_world:new l.Uniform2f(g,r.u_world),u_image:new l.Uniform1i(g,r.u_image),u_color_ramp:new l.Uniform1i(g,r.u_color_ramp),u_opacity:new l.Uniform1f(g,r.u_opacity)}),hillshade:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_image:new l.Uniform1i(g,r.u_image),u_latrange:new l.Uniform2f(g,r.u_latrange),u_light:new l.Uniform2f(g,r.u_light),u_shadow:new l.UniformColor(g,r.u_shadow),u_highlight:new l.UniformColor(g,r.u_highlight),u_accent:new l.UniformColor(g,r.u_accent)}),hillshadePrepare:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_image:new l.Uniform1i(g,r.u_image),u_dimension:new l.Uniform2f(g,r.u_dimension),u_zoom:new l.Uniform1f(g,r.u_zoom),u_unpack:new l.Uniform4f(g,r.u_unpack)}),line:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_ratio:new l.Uniform1f(g,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(g,r.u_units_to_pixels)}),lineGradient:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_ratio:new l.Uniform1f(g,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(g,r.u_units_to_pixels),u_image:new l.Uniform1i(g,r.u_image),u_image_height:new l.Uniform1f(g,r.u_image_height)}),linePattern:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_texsize:new l.Uniform2f(g,r.u_texsize),u_ratio:new l.Uniform1f(g,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_image:new l.Uniform1i(g,r.u_image),u_units_to_pixels:new l.Uniform2f(g,r.u_units_to_pixels),u_scale:new l.Uniform3f(g,r.u_scale),u_fade:new l.Uniform1f(g,r.u_fade)}),lineSDF:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_ratio:new l.Uniform1f(g,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(g,r.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(g,r.u_patternscale_a),u_patternscale_b:new l.Uniform2f(g,r.u_patternscale_b),u_sdfgamma:new l.Uniform1f(g,r.u_sdfgamma),u_image:new l.Uniform1i(g,r.u_image),u_tex_y_a:new l.Uniform1f(g,r.u_tex_y_a),u_tex_y_b:new l.Uniform1f(g,r.u_tex_y_b),u_mix:new l.Uniform1f(g,r.u_mix)}),raster:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_tl_parent:new l.Uniform2f(g,r.u_tl_parent),u_scale_parent:new l.Uniform1f(g,r.u_scale_parent),u_buffer_scale:new l.Uniform1f(g,r.u_buffer_scale),u_fade_t:new l.Uniform1f(g,r.u_fade_t),u_opacity:new l.Uniform1f(g,r.u_opacity),u_image0:new l.Uniform1i(g,r.u_image0),u_image1:new l.Uniform1i(g,r.u_image1),u_brightness_low:new l.Uniform1f(g,r.u_brightness_low),u_brightness_high:new l.Uniform1f(g,r.u_brightness_high),u_saturation_factor:new l.Uniform1f(g,r.u_saturation_factor),u_contrast_factor:new l.Uniform1f(g,r.u_contrast_factor),u_spin_weights:new l.Uniform3f(g,r.u_spin_weights)}),symbolIcon:(g,r)=>({u_is_size_zoom_constant:new l.Uniform1i(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(g,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(g,r.u_size_t),u_size:new l.Uniform1f(g,r.u_size),u_camera_to_center_distance:new l.Uniform1f(g,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(g,r.u_pitch),u_rotate_symbol:new l.Uniform1i(g,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(g,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(g,r.u_fade_change),u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(g,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(g,r.u_coord_matrix),u_is_text:new l.Uniform1i(g,r.u_is_text),u_pitch_with_map:new l.Uniform1i(g,r.u_pitch_with_map),u_texsize:new l.Uniform2f(g,r.u_texsize),u_texture:new l.Uniform1i(g,r.u_texture)}),symbolSDF:(g,r)=>({u_is_size_zoom_constant:new l.Uniform1i(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(g,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(g,r.u_size_t),u_size:new l.Uniform1f(g,r.u_size),u_camera_to_center_distance:new l.Uniform1f(g,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(g,r.u_pitch),u_rotate_symbol:new l.Uniform1i(g,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(g,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(g,r.u_fade_change),u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(g,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(g,r.u_coord_matrix),u_is_text:new l.Uniform1i(g,r.u_is_text),u_pitch_with_map:new l.Uniform1i(g,r.u_pitch_with_map),u_texsize:new l.Uniform2f(g,r.u_texsize),u_texture:new l.Uniform1i(g,r.u_texture),u_gamma_scale:new l.Uniform1f(g,r.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(g,r.u_is_halo)}),symbolTextAndIcon:(g,r)=>({u_is_size_zoom_constant:new l.Uniform1i(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(g,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(g,r.u_size_t),u_size:new l.Uniform1f(g,r.u_size),u_camera_to_center_distance:new l.Uniform1f(g,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(g,r.u_pitch),u_rotate_symbol:new l.Uniform1i(g,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(g,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(g,r.u_fade_change),u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(g,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(g,r.u_coord_matrix),u_is_text:new l.Uniform1i(g,r.u_is_text),u_pitch_with_map:new l.Uniform1i(g,r.u_pitch_with_map),u_texsize:new l.Uniform2f(g,r.u_texsize),u_texsize_icon:new l.Uniform2f(g,r.u_texsize_icon),u_texture:new l.Uniform1i(g,r.u_texture),u_texture_icon:new l.Uniform1i(g,r.u_texture_icon),u_gamma_scale:new l.Uniform1f(g,r.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(g,r.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(g,r.u_is_halo)}),background:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_opacity:new l.Uniform1f(g,r.u_opacity),u_color:new l.UniformColor(g,r.u_color)}),backgroundPattern:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_opacity:new l.Uniform1f(g,r.u_opacity),u_image:new l.Uniform1i(g,r.u_image),u_pattern_tl_a:new l.Uniform2f(g,r.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(g,r.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(g,r.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(g,r.u_pattern_br_b),u_texsize:new l.Uniform2f(g,r.u_texsize),u_mix:new l.Uniform1f(g,r.u_mix),u_pattern_size_a:new l.Uniform2f(g,r.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(g,r.u_pattern_size_b),u_scale_a:new l.Uniform1f(g,r.u_scale_a),u_scale_b:new l.Uniform1f(g,r.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(g,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(g,r.u_tile_units_to_pixels)}),terrain:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_texture:new l.Uniform1i(g,r.u_texture),u_ele_delta:new l.Uniform1f(g,r.u_ele_delta)}),terrainDepth:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_ele_delta:new l.Uniform1f(g,r.u_ele_delta)}),terrainCoords:(g,r)=>({u_matrix:new l.UniformMatrix4f(g,r.u_matrix),u_texture:new l.Uniform1i(g,r.u_texture),u_terrain_coords_id:new l.Uniform1f(g,r.u_terrain_coords_id),u_ele_delta:new l.Uniform1f(g,r.u_ele_delta)})};class Xa{constructor(r,u,d){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ql={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class qa{constructor(r,u,d,m){this.length=u.length,this.attributes=d,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=r;const v=r.gl;this.buffer=v.createBuffer(),r.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let d=0;d<this.attributes.length;d++){const m=u.attributes[this.attributes[d].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,u,d){for(let m=0;m<this.attributes.length;m++){const v=this.attributes[m],C=u.attributes[v.name];C!==void 0&&r.vertexAttribPointer(C,v.components,r[ql[v.type]],!1,this.itemSize,v.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Os=new WeakMap;function as(g){if(Os.has(g))return Os.get(g);{const r=g.getParameter(g.VERSION).startsWith("WebGL 2.0");return Os.set(g,r),r}}class Ln{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ka extends Ln{getDefault(){return l.Color.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Kl extends Ln{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Wu extends Ln{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Fs extends Ln{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ch extends Ln{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Ih extends Ln{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Hu extends Ln{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Ah extends Ln{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Yl extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class Ph extends Ln{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Jl extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class Ya extends Ln{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Ql extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class eu extends Ln{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class js extends Ln{getDefault(){return l.Color.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class tu extends Ln{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Ja extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class nu extends Ln{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class ls extends Ln{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Xu extends Ln{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Ds extends Ln{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class us extends Ln{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class qu extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class ru extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Bn extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Qa extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class el extends Ln{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Ku extends Ln{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;const d=this.gl;as(d)?d.bindVertexArray(r):(u=d.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class io extends Ln{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Yu extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class oo extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class tl extends Ln{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class Mh extends tl{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class iu extends tl{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class nl extends tl{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Bs{constructor(r,u,d,m,v){this.context=r,this.width=u,this.height=d;const C=r.gl,A=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new Mh(r,A),m)this.depthAttachment=v?new nl(r,A):new iu(r,A);else if(v)throw new Error("Stencil cannot be setted without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class ar{constructor(r,u,d){this.blendFunction=r,this.blendColor=u,this.mask=d}}ar.Replace=[1,0],ar.disabled=new ar(ar.Replace,l.Color.transparent,[!1,!1,!1,!1]),ar.unblended=new ar(ar.Replace,l.Color.transparent,[!0,!0,!0,!0]),ar.alphaBlended=new ar([1,771],l.Color.transparent,[!0,!0,!0,!0]);class Ns{constructor(r){var u,d;if(this.gl=r,this.clearColor=new Ka(this),this.clearDepth=new Kl(this),this.clearStencil=new Wu(this),this.colorMask=new Fs(this),this.depthMask=new Ch(this),this.stencilMask=new Ih(this),this.stencilFunc=new Hu(this),this.stencilOp=new Ah(this),this.stencilTest=new Yl(this),this.depthRange=new Ph(this),this.depthTest=new Jl(this),this.depthFunc=new Ya(this),this.blend=new Ql(this),this.blendFunc=new eu(this),this.blendColor=new js(this),this.blendEquation=new tu(this),this.cullFace=new Ja(this),this.cullFaceSide=new nu(this),this.frontFace=new ls(this),this.program=new Xu(this),this.activeTexture=new Ds(this),this.viewport=new us(this),this.bindFramebuffer=new qu(this),this.bindRenderbuffer=new ru(this),this.bindTexture=new Bn(this),this.bindVertexBuffer=new Qa(this),this.bindElementBuffer=new el(this),this.bindVertexArray=new Ku(this),this.pixelStoreUnpack=new io(this),this.pixelStoreUnpackPremultiplyAlpha=new Yu(this),this.pixelStoreUnpackFlipY=new oo(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),as(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new Xa(this,r,u)}createVertexBuffer(r,u,d){return new qa(this,r,u,d)}createRenderbuffer(r,u,d){const m=this.gl,v=m.createRenderbuffer();return this.bindRenderbuffer.set(v),m.renderbufferStorage(m.RENDERBUFFER,r,u,d),this.bindRenderbuffer.set(null),v}createFramebuffer(r,u,d,m){return new Bs(this,r,u,d,m)}clear({color:r,depth:u,stencil:d}){const m=this.gl;let v=0;r&&(v|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(v|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),d!==void 0&&(v|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),m.clear(v)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){l.deepEqual(r.blendFunction,ar.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return as(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return as(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Tn{constructor(r,u,d){this.func=r,this.mask=u,this.range=d}}Tn.ReadOnly=!1,Tn.ReadWrite=!0,Tn.disabled=new Tn(519,Tn.ReadOnly,[0,1]);const Us=7680;class Gn{constructor(r,u,d,m,v,C){this.test=r,this.ref=u,this.mask=d,this.fail=m,this.depthFail=v,this.pass=C}}Gn.disabled=new Gn({func:519,mask:0},0,0,Us,Us,Us);class Hn{constructor(r,u,d){this.enable=r,this.mode=u,this.frontFace=d}}let ca;function rl(g,r,u,d,m,v,C){const A=g.context,k=A.gl,j=g.useProgram("collisionBox"),H=[];let K=0,he=0;for(let Fe=0;Fe<d.length;Fe++){const et=d[Fe],at=r.getTile(et),ct=at.getBucket(u);if(!ct)continue;let ft=et.posMatrix;m[0]===0&&m[1]===0||(ft=g.translatePosMatrix(et.posMatrix,at,m,v));const xt=C?ct.textCollisionBox:ct.iconCollisionBox,dt=ct.collisionCircleArray;if(dt.length>0){const Lt=l.create(),$t=ft;l.mul(Lt,ct.placementInvProjMatrix,g.transform.glCoordMatrix),l.mul(Lt,Lt,ct.placementViewportMatrix),H.push({circleArray:dt,circleOffset:he,transform:$t,invTransform:Lt,coord:et}),K+=dt.length/4,he=K}xt&&j.draw(A,k.LINES,Tn.disabled,Gn.disabled,g.colorModeForRenderPass(),Hn.disabled,Zu(ft,g.transform,at),g.style.map.terrain&&g.style.map.terrain.getTerrainData(et),u.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,null,g.transform.zoom,null,null,xt.collisionVertexBuffer)}if(!C||!H.length)return;const Ie=g.useProgram("collisionCircle"),Ce=new l.CollisionCircleLayoutArray;Ce.resize(4*K),Ce._trim();let Le=0;for(const Fe of H)for(let et=0;et<Fe.circleArray.length/4;et++){const at=4*et,ct=Fe.circleArray[at+0],ft=Fe.circleArray[at+1],xt=Fe.circleArray[at+2],dt=Fe.circleArray[at+3];Ce.emplace(Le++,ct,ft,xt,dt,0),Ce.emplace(Le++,ct,ft,xt,dt,1),Ce.emplace(Le++,ct,ft,xt,dt,2),Ce.emplace(Le++,ct,ft,xt,dt,3)}(!ca||ca.length<2*K)&&(ca=function(Fe){const et=2*Fe,at=new l.QuadTriangleArray;at.resize(et),at._trim();for(let ct=0;ct<et;ct++){const ft=6*ct;at.uint16[ft+0]=4*ct+0,at.uint16[ft+1]=4*ct+1,at.uint16[ft+2]=4*ct+2,at.uint16[ft+3]=4*ct+2,at.uint16[ft+4]=4*ct+3,at.uint16[ft+5]=4*ct+0}return at}(K));const Me=A.createIndexBuffer(ca,!0),Ke=A.createVertexBuffer(Ce,l.collisionCircleLayout.members,!0);for(const Fe of H){const et={u_matrix:Fe.transform,u_inv_matrix:Fe.invTransform,u_camera_to_center_distance:(nt=g.transform).cameraToCenterDistance,u_viewport_size:[nt.width,nt.height]};Ie.draw(A,k.TRIANGLES,Tn.disabled,Gn.disabled,g.colorModeForRenderPass(),Hn.disabled,et,g.style.map.terrain&&g.style.map.terrain.getTerrainData(Fe.coord),u.id,Ke,Me,l.SegmentVector.simpleSegment(0,2*Fe.circleOffset,Fe.circleArray.length,Fe.circleArray.length/2),null,g.transform.zoom,null,null,null)}var nt;Ke.destroy(),Me.destroy()}Hn.disabled=new Hn(!1,1029,2305),Hn.backCCW=new Hn(!0,1029,2305);const kh=l.identity(new Float32Array(16));function ha(g,r,u,d,m,v){const{horizontalAlign:C,verticalAlign:A}=l.getAnchorAlignment(g),k=-(C-.5)*r,j=-(A-.5)*u,H=l.evaluateVariableOffset(g,d);return new l.Point((k/m+H[0])*v,(j/m+H[1])*v)}function so(g,r,u,d,m,v,C,A,k,j,H){const K=g.text.placedSymbolArray,he=g.text.dynamicLayoutVertexArray,Ie=g.icon.dynamicLayoutVertexArray,Ce={};he.clear();for(let Le=0;Le<K.length;Le++){const Me=K.get(Le),Ke=Me.hidden||!Me.crossTileID||g.allowVerticalPlacement&&!Me.placedOrientation?null:d[Me.crossTileID];if(Ke){const nt=new l.Point(Me.anchorX,Me.anchorY),Fe=Mt(nt,u?C:v,H),et=_n(m.cameraToCenterDistance,Fe.signedDistanceFromCamera);let at=l.evaluateSizeForFeature(g.textSizeData,k,Me)*et/l.ONE_EM;u&&(at*=g.tilePixelRatio/A);const{width:ct,height:ft,anchor:xt,textOffset:dt,textBoxScale:Lt}=Ke,$t=ha(xt,ct,ft,dt,Lt,at),wn=u?Mt(nt.add($t),v,H).point:Fe.point.add(r?$t.rotate(-m.angle):$t),It=g.allowVerticalPlacement&&Me.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let rn=0;rn<Me.numGlyphs;rn++)l.addDynamicAttributes(he,wn,It);j&&Me.associatedIconIndex>=0&&(Ce[Me.associatedIconIndex]={shiftedAnchor:wn,angle:It})}else de(Me.numGlyphs,he)}if(j){Ie.clear();const Le=g.icon.placedSymbolArray;for(let Me=0;Me<Le.length;Me++){const Ke=Le.get(Me);if(Ke.hidden)de(Ke.numGlyphs,Ie);else{const nt=Ce[Me];if(nt)for(let Fe=0;Fe<Ke.numGlyphs;Fe++)l.addDynamicAttributes(Ie,nt.shiftedAnchor,nt.angle);else de(Ke.numGlyphs,Ie)}}g.icon.dynamicLayoutVertexBuffer.updateData(Ie)}g.text.dynamicLayoutVertexBuffer.updateData(he)}function ou(g,r,u){return u.iconsInText&&r?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function il(g,r,u,d,m,v,C,A,k,j,H,K){const he=g.context,Ie=he.gl,Ce=g.transform,Le=A==="map",Me=k==="map",Ke=A!=="viewport"&&u.layout.get("symbol-placement")!=="point",nt=Le&&!Me&&!Ke,Fe=!u.layout.get("symbol-sort-key").isConstant();let et=!1;const at=g.depthModeForSublayer(0,Tn.ReadOnly),ct=u.layout.get("text-variable-anchor"),ft=[];for(const xt of d){const dt=r.getTile(xt),Lt=dt.getBucket(u);if(!Lt)continue;const $t=m?Lt.text:Lt.icon;if(!$t||!$t.segments.get().length||!$t.hasVisibleVertices)continue;const wn=$t.programConfigurations.get(u.id),It=m||Lt.sdfIcons,rn=m?Lt.textSizeData:Lt.iconSizeData,Ft=Me||Ce.pitch!==0,jn=g.useProgram(ou(It,m,Lt),wn),Rn=l.evaluateSizeForZoom(rn,Ce.zoom),Cn=g.style.map.terrain&&g.style.map.terrain.getTerrainData(xt);let hn,fr,ti,Ar,Xr=[0,0],Bi=null;if(m)fr=dt.glyphAtlasTexture,ti=Ie.LINEAR,hn=dt.glyphAtlasTexture.size,Lt.iconsInText&&(Xr=dt.imageAtlasTexture.size,Bi=dt.imageAtlasTexture,Ar=Ft||g.options.rotating||g.options.zooming||rn.kind==="composite"||rn.kind==="camera"?Ie.LINEAR:Ie.NEAREST);else{const Ur=u.layout.get("icon-size").constantOr(0)!==1||Lt.iconsNeedLinear;fr=dt.imageAtlasTexture,ti=It||g.options.rotating||g.options.zooming||Ur||Ft?Ie.LINEAR:Ie.NEAREST,hn=dt.imageAtlasTexture.size}const So=Ve(dt,1,g.transform.zoom),To=st(xt.posMatrix,Me,Le,g.transform,So),mi=en(xt.posMatrix,Me,Le,g.transform,So),Wo=ct&&Lt.hasTextData(),pu=u.layout.get("icon-text-fit")!=="none"&&Wo&&Lt.hasIconData();if(Ke){const Ur=g.style.map.terrain?(pc,hs)=>g.style.map.terrain.getElevation(xt,pc,hs):null,Ni=u.layout.get("text-rotation-alignment")==="map";xn(Lt,xt.posMatrix,g,m,To,mi,Me,j,Ni,Ur)}const si=g.translatePosMatrix(xt.posMatrix,dt,v,C),qr=Ke||m&&ct||pu?kh:To,Un=g.translatePosMatrix(mi,dt,v,C,!0),Nr=It&&u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Kr;Kr=It?Lt.iconsInText?pi(rn.kind,Rn,nt,Me,g,si,qr,Un,hn,Xr):ua(rn.kind,Rn,nt,Me,g,si,qr,Un,m,hn,!0):Rs(rn.kind,Rn,nt,Me,g,si,qr,Un,m,hn);const Zn={program:jn,buffers:$t,uniformValues:Kr,atlasTexture:fr,atlasTextureIcon:Bi,atlasInterpolation:ti,atlasInterpolationIcon:Ar,isSDF:It,hasHalo:Nr};if(Fe&&Lt.canOverlap){et=!0;const Ur=$t.segments.get();for(const Ni of Ur)ft.push({segments:new l.SegmentVector([Ni]),sortKey:Ni.sortKey,state:Zn,terrainData:Cn})}else ft.push({segments:$t.segments,sortKey:0,state:Zn,terrainData:Cn})}et&&ft.sort((xt,dt)=>xt.sortKey-dt.sortKey);for(const xt of ft){const dt=xt.state;if(he.activeTexture.set(Ie.TEXTURE0),dt.atlasTexture.bind(dt.atlasInterpolation,Ie.CLAMP_TO_EDGE),dt.atlasTextureIcon&&(he.activeTexture.set(Ie.TEXTURE1),dt.atlasTextureIcon&&dt.atlasTextureIcon.bind(dt.atlasInterpolationIcon,Ie.CLAMP_TO_EDGE)),dt.isSDF){const Lt=dt.uniformValues;dt.hasHalo&&(Lt.u_is_halo=1,$s(dt.buffers,xt.segments,u,g,dt.program,at,H,K,Lt,xt.terrainData)),Lt.u_is_halo=0}$s(dt.buffers,xt.segments,u,g,dt.program,at,H,K,dt.uniformValues,xt.terrainData)}}function $s(g,r,u,d,m,v,C,A,k,j){const H=d.context;m.draw(H,H.gl.TRIANGLES,v,C,A,Hn.disabled,k,j,u.id,g.layoutVertexBuffer,g.indexBuffer,r,u.paint,d.transform.zoom,g.programConfigurations.get(u.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function fa(g,r,u,d,m){if(!u||!d||!d.imageAtlas)return;const v=d.imageAtlas.patternPositions;let C=v[u.to.toString()],A=v[u.from.toString()];if(!C||!A){const k=m.getPaintProperty(r);C=v[k],A=v[k]}C&&A&&g.setConstantPatternPositions(C,A)}function wo(g,r,u,d,m,v,C){const A=g.context.gl,k="fill-pattern",j=u.paint.get(k),H=j&&j.constantOr(1),K=u.getCrossfadeParameters();let he,Ie,Ce,Le,Me;C?(Ie=H&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",he=A.LINES):(Ie=H?"fillPattern":"fill",he=A.TRIANGLES);const Ke=j.constantOr(null);for(const nt of d){const Fe=r.getTile(nt);if(H&&!Fe.patternsLoaded())continue;const et=Fe.getBucket(u);if(!et)continue;const at=et.programConfigurations.get(u.id),ct=g.useProgram(Ie,at),ft=g.style.map.terrain&&g.style.map.terrain.getTerrainData(nt);H&&(g.context.activeTexture.set(A.TEXTURE0),Fe.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),at.updatePaintBuffers(K)),fa(at,k,Ke,Fe,u);const xt=ft?nt:null,dt=g.translatePosMatrix(xt?xt.posMatrix:nt.posMatrix,Fe,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(C){Le=et.indexBuffer2,Me=et.segments2;const Lt=[A.drawingBufferWidth,A.drawingBufferHeight];Ce=Ie==="fillOutlinePattern"&&H?Th(dt,g,K,Fe,Lt):Gu(dt,Lt)}else Le=et.indexBuffer,Me=et.segments,Ce=H?bi(dt,g,K,Fe):Zl(dt);ct.draw(g.context,he,m,g.stencilModeForClipping(nt),v,Hn.disabled,Ce,ft,u.id,et.layoutVertexBuffer,Le,Me,u.paint,g.transform.zoom,at)}}function Uo(g,r,u,d,m,v,C){const A=g.context,k=A.gl,j="fill-extrusion-pattern",H=u.paint.get(j),K=H.constantOr(1),he=u.getCrossfadeParameters(),Ie=u.paint.get("fill-extrusion-opacity"),Ce=H.constantOr(null);for(const Le of d){const Me=r.getTile(Le),Ke=Me.getBucket(u);if(!Ke)continue;const nt=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Le),Fe=Ke.programConfigurations.get(u.id),et=g.useProgram(K?"fillExtrusionPattern":"fillExtrusion",Fe);K&&(g.context.activeTexture.set(k.TEXTURE0),Me.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Fe.updatePaintBuffers(he)),fa(Fe,j,Ce,Me,u);const at=g.translatePosMatrix(Le.posMatrix,Me,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),ct=u.paint.get("fill-extrusion-vertical-gradient"),ft=K?Sh(at,g,ct,Ie,Le,he,Me):ss(at,g,ct,Ie);et.draw(A,A.gl.TRIANGLES,m,v,C,Hn.backCCW,ft,nt,u.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,u.paint,g.transform.zoom,Fe,g.style.map.terrain&&Ke.centroidVertexBuffer)}}function Wr(g,r,u,d,m,v,C){const A=g.context,k=A.gl,j=u.fbo;if(!j)return;const H=g.useProgram("hillshade"),K=g.style.map.terrain&&g.style.map.terrain.getTerrainData(r);A.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,j.colorAttachment.get()),H.draw(A,k.TRIANGLES,m,v,C,Hn.disabled,((he,Ie,Ce,Le)=>{const Me=Ce.paint.get("hillshade-shadow-color"),Ke=Ce.paint.get("hillshade-highlight-color"),nt=Ce.paint.get("hillshade-accent-color");let Fe=Ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fe-=he.transform.angle);const et=!he.options.moving;return{u_matrix:Le?Le.posMatrix:he.transform.calculatePosMatrix(Ie.tileID.toUnwrapped(),et),u_image:0,u_latrange:No(0,Ie.tileID),u_light:[Ce.paint.get("hillshade-exaggeration"),Fe],u_shadow:Me,u_highlight:Ke,u_accent:nt}})(g,u,d,K?r:null),K,d.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function Kn(g,r,u,d,m,v){const C=g.context,A=C.gl,k=r.dem;if(k&&k.data){const j=k.dim,H=k.stride,K=k.getPixels();if(C.activeTexture.set(A.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||g.getTileTexture(H),r.demTexture){const Ie=r.demTexture;Ie.update(K,{premultiply:!1}),Ie.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else r.demTexture=new X(C,K,A.RGBA,{premultiply:!1}),r.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);C.activeTexture.set(A.TEXTURE0);let he=r.fbo;if(!he){const Ie=new X(C,{width:j,height:j,data:null},A.RGBA);Ie.bind(A.LINEAR,A.CLAMP_TO_EDGE),he=r.fbo=C.createFramebuffer(j,j,!0,!1),he.colorAttachment.set(Ie.texture)}C.bindFramebuffer.set(he.framebuffer),C.viewport.set([0,0,j,j]),g.useProgram("hillshadePrepare").draw(C,A.TRIANGLES,d,m,v,Hn.disabled,((Ie,Ce)=>{const Le=Ce.stride,Me=l.create();return l.ortho(Me,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(Me,Me,[0,-l.EXTENT,0]),{u_matrix:Me,u_image:1,u_dimension:[Le,Le],u_zoom:Ie.overscaledZ,u_unpack:Ce.getUnpackVector()}})(r.tileID,k),null,u.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function bo(g,r,u,d,m,v){const C=d.paint.get("raster-fade-duration");if(!v&&C>0){const A=l.browser.now(),k=(A-g.timeAdded)/C,j=r?(A-r.timeAdded)/C:-1,H=u.getSource(),K=m.coveringZoomLevel({tileSize:H.tileSize,roundZoom:H.roundZoom}),he=!r||Math.abs(r.tileID.overscaledZ-K)>Math.abs(g.tileID.overscaledZ-K),Ie=he&&g.refreshedUponExpiration?1:l.clamp(he?k:1-j,0,1);return g.refreshedUponExpiration&&k>=1&&(g.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Ie}:{opacity:Ie,mix:0}}return{opacity:1,mix:0}}const oi=new l.Color(1,0,0,1),Ju=new l.Color(0,1,0,1),Vs=new l.Color(0,0,1,1),da=new l.Color(1,0,1,1),Hr=new l.Color(0,1,1,1);function ao(g,r,u,d){$o(g,0,r+u/2,g.transform.width,u,d)}function pa(g,r,u,d){$o(g,r-u/2,0,u,g.transform.height,d)}function $o(g,r,u,d,m,v){const C=g.context,A=C.gl;A.enable(A.SCISSOR_TEST),A.scissor(r*g.pixelRatio,u*g.pixelRatio,d*g.pixelRatio,m*g.pixelRatio),C.clear({color:v}),A.disable(A.SCISSOR_TEST)}function ma(g,r,u){const d=g.context,m=d.gl,v=u.posMatrix,C=g.useProgram("debug"),A=Tn.disabled,k=Gn.disabled,j=g.colorModeForRenderPass(),H="$debug",K=g.style.map.terrain&&g.style.map.terrain.getTerrainData(u);d.activeTexture.set(m.TEXTURE0);const he=r.getTileByID(u.key).latestRawTileData,Ie=Math.floor((he&&he.byteLength||0)/1024),Ce=r.getTile(u).tileSize,Le=512/Math.min(Ce,512)*(u.overscaledZ/g.transform.zoom)*.5;let Me=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Me+=` => ${u.overscaledZ}`),function(Ke,nt){Ke.initDebugOverlayCanvas();const Fe=Ke.debugOverlayCanvas,et=Ke.context.gl,at=Ke.debugOverlayCanvas.getContext("2d");at.clearRect(0,0,Fe.width,Fe.height),at.shadowColor="white",at.shadowBlur=2,at.lineWidth=1.5,at.strokeStyle="white",at.textBaseline="top",at.font="bold 36px Open Sans, sans-serif",at.fillText(nt,5,5),at.strokeText(nt,5,5),Ke.debugOverlayTexture.update(Fe),Ke.debugOverlayTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE)}(g,`${Me} ${Ie}kB`),C.draw(d,m.TRIANGLES,A,k,ar.alphaBlended,Hn.disabled,Hl(v,l.Color.transparent,Le),null,H,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),C.draw(d,m.LINE_STRIP,A,k,j,Hn.disabled,Hl(v,l.Color.red),K,H,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function ol(g,r,u){const d=g.context,m=d.gl,v=g.colorModeForRenderPass(),C=new Tn(m.LEQUAL,Tn.ReadWrite,g.depthRangeFor3D),A=g.useProgram("terrain"),k=r.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,g.width,g.height]);for(const j of u){const H=g.renderToTexture.getTexture(j),K=r.getTerrainData(j.tileID);d.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,H.texture);const he={u_matrix:g.transform.calculatePosMatrix(j.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(g.transform.zoom)};A.draw(d,m.TRIANGLES,C,Gn.disabled,v,Hn.backCCW,he,K,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}}class su{constructor(r,u){this.context=new Ns(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.create(),renderTime:0},this.setup(),this.numSublayers=R.maxUnderzooming+R.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Cr}resize(r,u,d){if(this.width=Math.floor(r*d),this.height=Math.floor(u*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,u=new l.PosArray;u.emplaceBack(0,0),u.emplaceBack(l.EXTENT,0),u.emplaceBack(0,l.EXTENT),u.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(u,$a.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const d=new l.PosArray;d.emplaceBack(0,0),d.emplaceBack(l.EXTENT,0),d.emplaceBack(0,l.EXTENT),d.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=r.createVertexBuffer(d,$a.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const m=new l.RasterBoundsArray;m.emplaceBack(0,0,0,0),m.emplaceBack(l.EXTENT,0,l.EXTENT,0),m.emplaceBack(0,l.EXTENT,0,l.EXTENT),m.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(m,At.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const v=new l.PosArray;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(v,$a.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const C=new l.LineStripIndexArray;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(C);const A=new l.TriangleIndexArray;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(A);const k=this.context.gl;this.stencilClearMode=new Gn({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=l.create();l.ortho(d,0,this.width,this.height,0,0,1),l.scale(d,d,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,u.TRIANGLES,Tn.disabled,this.stencilClearMode,ar.disabled,Hn.disabled,Va(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source;const d=this.context,m=d.gl;this.nextStencilID+u.length>256&&this.clearStencil(),d.setColorMode(ar.disabled),d.setDepthMode(Tn.disabled);const v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of u){const A=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,k=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);v.draw(d,m.TRIANGLES,Tn.disabled,new Gn({func:m.ALWAYS,mask:0},A,255,m.KEEP,m.KEEP,m.REPLACE),ar.disabled,Hn.disabled,Va(C.posMatrix),k,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new Gn({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new Gn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(r){const u=this.context.gl,d=r.sort((C,A)=>A.overscaledZ-C.overscaledZ),m=d[d.length-1].overscaledZ,v=d[0].overscaledZ-m+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const C={};for(let A=0;A<v;A++)C[A+m]=new Gn({func:u.GEQUAL,mask:255},A+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=v,[C,d]}return[{[m]:Gn.disabled},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new ar([r.CONSTANT_COLOR,r.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ar.unblended:ar.alphaBlended}depthModeForSublayer(r,u,d){if(!this.opaquePassEnabledForLayer())return Tn.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Tn(d||this.context.gl.LEQUAL,u,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();const d=this.style._order,m=this.style.sourceCaches,v={},C={},A={};for(const k in m){const j=m[k];j.used&&j.prepare(this.context),v[k]=j.getVisibleCoordinates(),C[k]=v[k].slice().reverse(),A[k]=j.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let k=0;k<d.length;k++)if(this.style._layers[d[k]].is3D()){this.opaquePassCutoff=k;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const k=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||k.length)&&(l.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(j,H){const K=j.context,he=K.gl,Ie=ar.unblended,Ce=new Tn(he.LEQUAL,Tn.ReadWrite,[0,1]),Le=H.getTerrainMesh(),Me=H.sourceCache.getRenderableTiles(),Ke=j.useProgram("terrainDepth");K.bindFramebuffer.set(H.getFramebuffer("depth").framebuffer),K.viewport.set([0,0,j.width/devicePixelRatio,j.height/devicePixelRatio]),K.clear({color:l.Color.transparent,depth:1});for(const nt of Me){const Fe=H.getTerrainData(nt.tileID),et={u_matrix:j.transform.calculatePosMatrix(nt.tileID.toUnwrapped()),u_ele_delta:H.getMeshFrameDelta(j.transform.zoom)};Ke.draw(K,he.TRIANGLES,Ce,Gn.disabled,Ie,Hn.backCCW,et,Fe,"terrain",Le.vertexBuffer,Le.indexBuffer,Le.segments)}K.bindFramebuffer.set(null),K.viewport.set([0,0,j.width,j.height])}(this,this.style.map.terrain),function(j,H){const K=j.context,he=K.gl,Ie=ar.unblended,Ce=new Tn(he.LEQUAL,Tn.ReadWrite,[0,1]),Le=H.getTerrainMesh(),Me=H.getCoordsTexture(),Ke=H.sourceCache.getRenderableTiles(),nt=j.useProgram("terrainCoords");K.bindFramebuffer.set(H.getFramebuffer("coords").framebuffer),K.viewport.set([0,0,j.width/devicePixelRatio,j.height/devicePixelRatio]),K.clear({color:l.Color.transparent,depth:1}),H.coordsIndex=[];for(const Fe of Ke){const et=H.getTerrainData(Fe.tileID);K.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,Me.texture);const at={u_matrix:j.transform.calculatePosMatrix(Fe.tileID.toUnwrapped()),u_terrain_coords_id:(255-H.coordsIndex.length)/255,u_texture:0,u_ele_delta:H.getMeshFrameDelta(j.transform.zoom)};nt.draw(K,he.TRIANGLES,Ce,Gn.disabled,Ie,Hn.backCCW,at,et,"terrain",Le.vertexBuffer,Le.indexBuffer,Le.segments),H.coordsIndex.push(Fe.tileID.key)}K.bindFramebuffer.set(null),K.viewport.set([0,0,j.width,j.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const k of d){const j=this.style._layers[k];if(!j.hasOffscreenPass()||j.isHidden(this.transform.zoom))continue;const H=C[j.source];(j.type==="custom"||H.length)&&this.renderLayer(this,m[j.source],j,H)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const k=this.style._layers[d[this.currentLayer]],j=m[k.source],H=v[k.source];this._renderTileClippingMasks(k,H),this.renderLayer(this,j,k,H)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const k=this.style._layers[d[this.currentLayer]],j=m[k.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(k))continue;const H=(k.type==="symbol"?A:C)[k.source];this._renderTileClippingMasks(k,v[k.source]),this.renderLayer(this,j,k,H)}if(this.options.showTileBoundaries){const k=function(j,H){let K=null;const he=Object.values(j._layers).flatMap(Me=>Me.source&&!Me.isHidden(H)?[j.sourceCaches[Me.source]]:[]),Ie=he.filter(Me=>Me.getSource().type==="vector"),Ce=he.filter(Me=>Me.getSource().type!=="vector"),Le=Me=>{(!K||K.getSource().maxzoom<Me.getSource().maxzoom)&&(K=Me)};return Ie.forEach(Me=>Le(Me)),K||Ce.forEach(Me=>Le(Me)),K}(this.style,this.transform.zoom);k&&function(j,H,K){for(let he=0;he<K.length;he++)ma(j,H,K[he])}(this,k,k.getVisibleCoordinates())}this.options.showPadding&&function(k){const j=k.transform.padding;ao(k,k.transform.height-(j.top||0),3,oi),ao(k,j.bottom||0,3,Ju),pa(k,j.left||0,3,Vs),pa(k,k.transform.width-(j.right||0),3,da);const H=k.transform.centerPoint;(function(K,he,Ie,Ce){$o(K,he-1,Ie-10,2,20,Ce),$o(K,he-10,Ie-1,20,2,Ce)})(k,H.x,k.transform.height-H.y,Hr)}(this),this.context.setDefault()}renderLayer(r,u,d,m){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(m||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(v,C,A,k,j){if(v.renderPass!=="translucent")return;const H=Gn.disabled,K=v.colorModeForRenderPass();A.layout.get("text-variable-anchor")&&function(he,Ie,Ce,Le,Me,Ke,nt){const Fe=Ie.transform,et=Me==="map",at=Ke==="map";for(const ct of he){const ft=Le.getTile(ct),xt=ft.getBucket(Ce);if(!xt||!xt.text||!xt.text.segments.get().length)continue;const dt=l.evaluateSizeForZoom(xt.textSizeData,Fe.zoom),Lt=Ve(ft,1,Ie.transform.zoom),$t=st(ct.posMatrix,at,et,Ie.transform,Lt),wn=Ce.layout.get("icon-text-fit")!=="none"&&xt.hasIconData();if(dt){const It=Math.pow(2,Fe.zoom-ft.tileID.overscaledZ);so(xt,et,at,nt,Fe,$t,ct.posMatrix,It,dt,wn,Ie.style.map.terrain?(rn,Ft)=>Ie.style.map.terrain.getElevation(ct,rn,Ft):null)}}}(k,v,A,C,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),j),A.paint.get("icon-opacity").constantOr(1)!==0&&il(v,C,A,k,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),H,K),A.paint.get("text-opacity").constantOr(1)!==0&&il(v,C,A,k,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),H,K),C.map.showCollisionBoxes&&(rl(v,C,A,k,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),!0),rl(v,C,A,k,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),!1))})(r,u,d,m,this.style.placement.variableOffsets);break;case"circle":(function(v,C,A,k){if(v.renderPass!=="translucent")return;const j=A.paint.get("circle-opacity"),H=A.paint.get("circle-stroke-width"),K=A.paint.get("circle-stroke-opacity"),he=!A.layout.get("circle-sort-key").isConstant();if(j.constantOr(1)===0&&(H.constantOr(1)===0||K.constantOr(1)===0))return;const Ie=v.context,Ce=Ie.gl,Le=v.depthModeForSublayer(0,Tn.ReadOnly),Me=Gn.disabled,Ke=v.colorModeForRenderPass(),nt=[];for(let Fe=0;Fe<k.length;Fe++){const et=k[Fe],at=C.getTile(et),ct=at.getBucket(A);if(!ct)continue;const ft=ct.programConfigurations.get(A.id),xt=v.useProgram("circle",ft),dt=ct.layoutVertexBuffer,Lt=ct.indexBuffer,$t=v.style.map.terrain&&v.style.map.terrain.getTerrainData(et),wn={programConfiguration:ft,program:xt,layoutVertexBuffer:dt,indexBuffer:Lt,uniformValues:Wl(v,et,at,A),terrainData:$t};if(he){const It=ct.segments.get();for(const rn of It)nt.push({segments:new l.SegmentVector([rn]),sortKey:rn.sortKey,state:wn})}else nt.push({segments:ct.segments,sortKey:0,state:wn})}he&&nt.sort((Fe,et)=>Fe.sortKey-et.sortKey);for(const Fe of nt){const{programConfiguration:et,program:at,layoutVertexBuffer:ct,indexBuffer:ft,uniformValues:xt,terrainData:dt}=Fe.state;at.draw(Ie,Ce.TRIANGLES,Le,Me,Ke,Hn.disabled,xt,dt,A.id,ct,ft,Fe.segments,A.paint,v.transform.zoom,et)}})(r,u,d,m);break;case"heatmap":(function(v,C,A,k){if(A.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const j=v.context,H=j.gl,K=Gn.disabled,he=new ar([H.ONE,H.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(Ie,Ce,Le){const Me=Ie.gl;Ie.activeTexture.set(Me.TEXTURE1),Ie.viewport.set([0,0,Ce.width/4,Ce.height/4]);let Ke=Le.heatmapFbo;if(Ke)Me.bindTexture(Me.TEXTURE_2D,Ke.colorAttachment.get()),Ie.bindFramebuffer.set(Ke.framebuffer);else{const nt=Me.createTexture();Me.bindTexture(Me.TEXTURE_2D,nt),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_S,Me.CLAMP_TO_EDGE),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_T,Me.CLAMP_TO_EDGE),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MIN_FILTER,Me.LINEAR),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MAG_FILTER,Me.LINEAR),Ke=Le.heatmapFbo=Ie.createFramebuffer(Ce.width/4,Ce.height/4,!1,!1),function(Fe,et,at,ct){var ft,xt;const dt=Fe.gl,Lt=(ft=Fe.HALF_FLOAT)!==null&&ft!==void 0?ft:dt.UNSIGNED_BYTE,$t=(xt=Fe.RGBA16F)!==null&&xt!==void 0?xt:dt.RGBA;dt.texImage2D(dt.TEXTURE_2D,0,$t,et.width/4,et.height/4,0,dt.RGBA,Lt,null),ct.colorAttachment.set(at)}(Ie,Ce,nt,Ke)}})(j,v,A),j.clear({color:l.Color.transparent});for(let Ie=0;Ie<k.length;Ie++){const Ce=k[Ie];if(C.hasRenderableParent(Ce))continue;const Le=C.getTile(Ce),Me=Le.getBucket(A);if(!Me)continue;const Ke=Me.programConfigurations.get(A.id),nt=v.useProgram("heatmap",Ke),{zoom:Fe}=v.transform;nt.draw(j,H.TRIANGLES,Tn.disabled,K,he,Hn.disabled,Ga(Ce.posMatrix,Le,Fe,A.paint.get("heatmap-intensity")),null,A.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,A.paint,v.transform.zoom,Ke)}j.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),function(j,H){const K=j.context,he=K.gl,Ie=H.heatmapFbo;if(!Ie)return;K.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,Ie.colorAttachment.get()),K.activeTexture.set(he.TEXTURE1);let Ce=H.colorRampTexture;Ce||(Ce=H.colorRampTexture=new X(K,H.colorRamp,he.RGBA)),Ce.bind(he.LINEAR,he.CLAMP_TO_EDGE),j.useProgram("heatmapTexture").draw(K,he.TRIANGLES,Tn.disabled,Gn.disabled,j.colorModeForRenderPass(),Hn.disabled,((Le,Me,Ke,nt)=>{const Fe=l.create();l.ortho(Fe,0,Le.width,Le.height,0,0,1);const et=Le.context.gl;return{u_matrix:Fe,u_world:[et.drawingBufferWidth,et.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Me.paint.get("heatmap-opacity")}})(j,H),null,H.id,j.viewportBuffer,j.quadTriangleIndexBuffer,j.viewportSegments,H.paint,j.transform.zoom)}(v,A))})(r,u,d,m);break;case"line":(function(v,C,A,k){if(v.renderPass!=="translucent")return;const j=A.paint.get("line-opacity"),H=A.paint.get("line-width");if(j.constantOr(1)===0||H.constantOr(1)===0)return;const K=v.depthModeForSublayer(0,Tn.ReadOnly),he=v.colorModeForRenderPass(),Ie=A.paint.get("line-dasharray"),Ce=A.paint.get("line-pattern"),Le=Ce.constantOr(1),Me=A.paint.get("line-gradient"),Ke=A.getCrossfadeParameters(),nt=Le?"linePattern":Ie?"lineSDF":Me?"lineGradient":"line",Fe=v.context,et=Fe.gl;let at=!0;for(const ct of k){const ft=C.getTile(ct);if(Le&&!ft.patternsLoaded())continue;const xt=ft.getBucket(A);if(!xt)continue;const dt=xt.programConfigurations.get(A.id),Lt=v.context.program.get(),$t=v.useProgram(nt,dt),wn=at||$t.program!==Lt,It=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ct),rn=Ce.constantOr(null);if(rn&&ft.imageAtlas){const Rn=ft.imageAtlas,Cn=Rn.patternPositions[rn.to.toString()],hn=Rn.patternPositions[rn.from.toString()];Cn&&hn&&dt.setConstantPatternPositions(Cn,hn)}const Ft=It?ct:null,jn=Le?xo(v,ft,A,Ke,Ft):Ie?Za(v,ft,A,Ie,Ke,Ft):Me?Ei(v,ft,A,xt.lineClipsArray.length,Ft):_o(v,ft,A,Ft);if(Le)Fe.activeTexture.set(et.TEXTURE0),ft.imageAtlasTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE),dt.updatePaintBuffers(Ke);else if(Ie&&(wn||v.lineAtlas.dirty))Fe.activeTexture.set(et.TEXTURE0),v.lineAtlas.bind(Fe);else if(Me){const Rn=xt.gradients[A.id];let Cn=Rn.texture;if(A.gradientVersion!==Rn.version){let hn=256;if(A.stepInterpolant){const fr=C.getSource().maxzoom,ti=ct.canonical.z===fr?Math.ceil(1<<v.transform.maxZoom-ct.canonical.z):1;hn=l.clamp(l.nextPowerOfTwo(xt.maxLineLength/l.EXTENT*1024*ti),256,Fe.maxTextureSize)}Rn.gradient=l.renderColorRamp({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:hn,image:Rn.gradient||void 0,clips:xt.lineClipsArray}),Rn.texture?Rn.texture.update(Rn.gradient):Rn.texture=new X(Fe,Rn.gradient,et.RGBA),Rn.version=A.gradientVersion,Cn=Rn.texture}Fe.activeTexture.set(et.TEXTURE0),Cn.bind(A.stepInterpolant?et.NEAREST:et.LINEAR,et.CLAMP_TO_EDGE)}$t.draw(Fe,et.TRIANGLES,K,v.stencilModeForClipping(ct),he,Hn.disabled,jn,It,A.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,A.paint,v.transform.zoom,dt,xt.layoutVertexBuffer2),at=!1}})(r,u,d,m);break;case"fill":(function(v,C,A,k){const j=A.paint.get("fill-color"),H=A.paint.get("fill-opacity");if(H.constantOr(1)===0)return;const K=v.colorModeForRenderPass(),he=A.paint.get("fill-pattern"),Ie=v.opaquePassEnabledForLayer()&&!he.constantOr(1)&&j.constantOr(l.Color.transparent).a===1&&H.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===Ie){const Ce=v.depthModeForSublayer(1,v.renderPass==="opaque"?Tn.ReadWrite:Tn.ReadOnly);wo(v,C,A,k,Ce,K,!1)}if(v.renderPass==="translucent"&&A.paint.get("fill-antialias")){const Ce=v.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,Tn.ReadOnly);wo(v,C,A,k,Ce,K,!0)}})(r,u,d,m);break;case"fill-extrusion":(function(v,C,A,k){const j=A.paint.get("fill-extrusion-opacity");if(j!==0&&v.renderPass==="translucent"){const H=new Tn(v.context.gl.LEQUAL,Tn.ReadWrite,v.depthRangeFor3D);if(j!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))Uo(v,C,A,k,H,Gn.disabled,ar.disabled),Uo(v,C,A,k,H,v.stencilModeFor3D(),v.colorModeForRenderPass());else{const K=v.colorModeForRenderPass();Uo(v,C,A,k,H,Gn.disabled,K)}}})(r,u,d,m);break;case"hillshade":(function(v,C,A,k){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const j=v.context,H=v.depthModeForSublayer(0,Tn.ReadOnly),K=v.colorModeForRenderPass(),[he,Ie]=v.renderPass==="translucent"?v.stencilConfigForOverlap(k):[{},k];for(const Ce of Ie){const Le=C.getTile(Ce);Le.needsHillshadePrepare!==void 0&&Le.needsHillshadePrepare&&v.renderPass==="offscreen"?Kn(v,Le,A,H,Gn.disabled,K):v.renderPass==="translucent"&&Wr(v,Ce,Le,A,H,he[Ce.overscaledZ],K)}j.viewport.set([0,0,v.width,v.height])})(r,u,d,m);break;case"raster":(function(v,C,A,k){if(v.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!k.length)return;const j=v.context,H=j.gl,K=C.getSource(),he=v.useProgram("raster"),Ie=v.colorModeForRenderPass(),[Ce,Le]=K instanceof ht?[{},k]:v.stencilConfigForOverlap(k),Me=Le[Le.length-1].overscaledZ,Ke=!v.options.moving;for(const nt of Le){const Fe=v.depthModeForSublayer(nt.overscaledZ-Me,A.paint.get("raster-opacity")===1?Tn.ReadWrite:Tn.ReadOnly,H.LESS),et=C.getTile(nt);et.registerFadeDuration(A.paint.get("raster-fade-duration"));const at=C.findLoadedParent(nt,0),ct=bo(et,at,C,A,v.transform,v.style.map.terrain);let ft,xt;const dt=A.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;j.activeTexture.set(H.TEXTURE0),et.texture.bind(dt,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),j.activeTexture.set(H.TEXTURE1),at?(at.texture.bind(dt,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),ft=Math.pow(2,at.tileID.overscaledZ-et.tileID.overscaledZ),xt=[et.tileID.canonical.x*ft%1,et.tileID.canonical.y*ft%1]):et.texture.bind(dt,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST);const Lt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(nt),$t=Lt?nt:null,wn=$t?$t.posMatrix:v.transform.calculatePosMatrix(nt.toUnwrapped(),Ke),It=Wa(wn,xt||[0,0],ft||1,ct,A);K instanceof ht?he.draw(j,H.TRIANGLES,Fe,Gn.disabled,Ie,Hn.disabled,It,Lt,A.id,K.boundsBuffer,v.quadTriangleIndexBuffer,K.boundsSegments):he.draw(j,H.TRIANGLES,Fe,Ce[nt.overscaledZ],Ie,Hn.disabled,It,Lt,A.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}})(r,u,d,m);break;case"background":(function(v,C,A,k){const j=A.paint.get("background-color"),H=A.paint.get("background-opacity");if(H===0)return;const K=v.context,he=K.gl,Ie=v.transform,Ce=Ie.tileSize,Le=A.paint.get("background-pattern");if(v.isPatternMissing(Le))return;const Me=!Le&&j.a===1&&H===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==Me)return;const Ke=Gn.disabled,nt=v.depthModeForSublayer(0,Me==="opaque"?Tn.ReadWrite:Tn.ReadOnly),Fe=v.colorModeForRenderPass(),et=v.useProgram(Le?"backgroundPattern":"background"),at=k||Ie.coveringTiles({tileSize:Ce,terrain:v.style.map.terrain});Le&&(K.activeTexture.set(he.TEXTURE0),v.imageManager.bind(v.context));const ct=A.getCrossfadeParameters();for(const ft of at){const xt=k?ft.posMatrix:v.transform.calculatePosMatrix(ft.toUnwrapped()),dt=Le?Xl(xt,H,v,Le,{tileID:ft,tileSize:Ce},ct):ei(xt,H,j),Lt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ft);et.draw(K,he.TRIANGLES,nt,Ke,Fe,Hn.disabled,dt,Lt,A.id,v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}})(r,0,d,m);break;case"custom":(function(v,C,A){const k=v.context,j=A.implementation;if(v.renderPass==="offscreen"){const H=j.prerender;H&&(v.setCustomLayerDefaults(),k.setColorMode(v.colorModeForRenderPass()),H.call(j,k.gl,v.transform.customLayerMatrix()),k.setDirty(),v.setBaseState())}else if(v.renderPass==="translucent"){v.setCustomLayerDefaults(),k.setColorMode(v.colorModeForRenderPass()),k.setStencilMode(Gn.disabled);const H=j.renderingMode==="3d"?new Tn(v.context.gl.LEQUAL,Tn.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,Tn.ReadOnly);k.setDepthMode(H),j.render(k.gl,v.transform.customLayerMatrix()),k.setDirty(),v.setBaseState(),k.bindFramebuffer.set(null)}})(r,0,d)}}translatePosMatrix(r,u,d,m,v){if(!d[0]&&!d[1])return r;const C=v?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(C){const j=Math.sin(C),H=Math.cos(C);d=[d[0]*H-d[1]*j,d[0]*j+d[1]*H]}const A=[v?d[0]:Ve(u,d[0],this.transform.zoom),v?d[1]:Ve(u,d[1],this.transform.zoom),0],k=new Float32Array(16);return l.translate(k,r,A),k}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!u||!d}useProgram(r,u){this.cache=this.cache||{};const d=r+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new Eh(this.context,r,Zr[r],u,Ha[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new X(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:u}=this.context.gl;return this.width!==r||this.height!==u}}class ga{constructor(r,u){this.points=r,this.planes=u}static fromInvProjectionMatrix(r,u,d){const m=Math.pow(2,d),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const k=1/(A=l.transformMat4([],A,r))[3]/u*m;return l.mul$1(A,A,[k,k,1/A[3],k])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const k=function(he,Ie){var Ce=Ie[0],Le=Ie[1],Me=Ie[2],Ke=Ce*Ce+Le*Le+Me*Me;return Ke>0&&(Ke=1/Math.sqrt(Ke)),he[0]=Ie[0]*Ke,he[1]=Ie[1]*Ke,he[2]=Ie[2]*Ke,he}([],function(he,Ie,Ce){var Le=Ie[0],Me=Ie[1],Ke=Ie[2],nt=Ce[0],Fe=Ce[1],et=Ce[2];return he[0]=Me*et-Ke*Fe,he[1]=Ke*nt-Le*et,he[2]=Le*Fe-Me*nt,he}([],B([],v[A[0]],v[A[1]]),B([],v[A[2]],v[A[1]]))),j=-((H=k)[0]*(K=v[A[1]])[0]+H[1]*K[1]+H[2]*K[2]);var H,K;return k.concat(j)});return new ga(v,C)}}class ji{constructor(r,u){this.min=r,this.max=u,this.center=function(d,m,v){return d[0]=.5*m[0],d[1]=.5*m[1],d[2]=.5*m[2],d}([],function(d,m,v){return d[0]=m[0]+v[0],d[1]=m[1]+v[1],d[2]=m[2]+v[2],d}([],this.min,this.max))}quadrant(r){const u=[r%2==0,r<2],d=oe(this.min),m=oe(this.max);for(let v=0;v<u.length;v++)d[v]=u[v]?this.min[v]:this.center[v],m[v]=u[v]?this.center[v]:this.max[v];return m[2]=this.max[2],new ji(d,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let m=0;m<r.planes.length;m++){const v=r.planes[m];let C=0;for(let A=0;A<u.length;A++)l.dot(v,u[A])>=0&&C++;if(C===0)return 0;C!==u.length&&(d=!1)}if(d)return 2;for(let m=0;m<3;m++){let v=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let A=0;A<r.points.length;A++){const k=r.points[A][m]-this.min[m];v=Math.min(v,k),C=Math.max(C,k)}if(C<0||v>this.max[m]-this.min[m])return 0}return 1}}class Di{constructor(r=0,u=0,d=0,m=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(d)||d<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=d,this.right=m}interpolate(r,u,d){return u.top!=null&&r.top!=null&&(this.top=l.interpolate.number(r.top,u.top,d)),u.bottom!=null&&r.bottom!=null&&(this.bottom=l.interpolate.number(r.bottom,u.bottom,d)),u.left!=null&&r.left!=null&&(this.left=l.interpolate.number(r.left,u.left,d)),u.right!=null&&r.right!=null&&(this.right=l.interpolate.number(r.right,u.right,d)),this}getCenter(r,u){const d=l.clamp((this.left+r-this.right)/2,0,r),m=l.clamp((this.top+u-this.bottom)/2,0,u);return new l.Point(d,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Di(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ya{constructor(r,u,d,m,v){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=v===void 0||!!v,this._minZoom=r||0,this._maxZoom=u||22,this._minPitch=d??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Di,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const r=new ya(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const u=-l.wrap(r,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var d=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,m,v){var C=m[0],A=m[1],k=m[2],j=m[3],H=Math.sin(v),K=Math.cos(v);d[0]=C*K+k*H,d[1]=A*K+j*H,d[2]=C*-H+k*K,d[3]=A*-H+j*K}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const u=l.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const u=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,d){this._unmodified=!1,this._edgeInsets.interpolate(r,u,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const u=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(r){const u=[new l.UnwrappedTileID(0,r)];if(this._renderWorldCopies){const d=this.pointCoordinate(new l.Point(0,0)),m=this.pointCoordinate(new l.Point(this.width,0)),v=this.pointCoordinate(new l.Point(this.width,this.height)),C=this.pointCoordinate(new l.Point(0,this.height)),A=Math.floor(Math.min(d.x,m.x,v.x,C.x)),k=Math.floor(Math.max(d.x,m.x,v.x,C.x)),j=1;for(let H=A-j;H<=k+j;H++)H!==0&&u.push(new l.UnwrappedTileID(H,r))}return u}coveringTiles(r){var u,d;let m=this.coveringZoomLevel(r);const v=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),A=l.MercatorCoordinate.fromLngLat(this.center),k=Math.pow(2,m),j=[k*C.x,k*C.y,0],H=[k*A.x,k*A.y,0],K=ga.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let he=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(he=m);const Ie=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Ce=Fe=>({aabb:new ji([Fe*k,0,0],[(Fe+1)*k,k,0]),zoom:0,x:0,y:0,wrap:Fe,fullyVisible:!1}),Le=[],Me=[],Ke=m,nt=r.reparseOverscaled?v:m;if(this._renderWorldCopies)for(let Fe=1;Fe<=3;Fe++)Le.push(Ce(-Fe)),Le.push(Ce(Fe));for(Le.push(Ce(0));Le.length>0;){const Fe=Le.pop(),et=Fe.x,at=Fe.y;let ct=Fe.fullyVisible;if(!ct){const $t=Fe.aabb.intersects(K);if($t===0)continue;ct=$t===2}const ft=r.terrain?j:H,xt=Fe.aabb.distanceX(ft),dt=Fe.aabb.distanceY(ft),Lt=Math.max(Math.abs(xt),Math.abs(dt));if(Fe.zoom===Ke||Lt>Ie+(1<<Ke-Fe.zoom)-2&&Fe.zoom>=he){const $t=Ke-Fe.zoom,wn=j[0]-.5-(et<<$t),It=j[1]-.5-(at<<$t);Me.push({tileID:new l.OverscaledTileID(Fe.zoom===Ke?nt:Fe.zoom,Fe.wrap,Fe.zoom,et,at),distanceSq:S([H[0]-.5-et,H[1]-.5-at]),tileDistanceToCamera:Math.sqrt(wn*wn+It*It)})}else for(let $t=0;$t<4;$t++){const wn=(et<<1)+$t%2,It=(at<<1)+($t>>1),rn=Fe.zoom+1;let Ft=Fe.aabb.quadrant($t);if(r.terrain){const jn=new l.OverscaledTileID(rn,Fe.wrap,rn,wn,It),Rn=r.terrain.getMinMaxElevation(jn),Cn=(u=Rn.minElevation)!==null&&u!==void 0?u:this.elevation,hn=(d=Rn.maxElevation)!==null&&d!==void 0?d:this.elevation;Ft=new ji([Ft.min[0],Ft.min[1],Cn],[Ft.max[0],Ft.max[1],hn])}Le.push({aabb:Ft,zoom:rn,x:wn,y:It,wrap:Fe.wrap,fullyVisible:ct})}}return Me.sort((Fe,et)=>Fe.distanceSq-et.distanceSq).map(Fe=>Fe.tileID)}resize(r,u){this.width=r,this.height=u,this.pixelsToGLUnits=[2/r,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const u=l.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(r.lng)*this.worldSize,l.mercatorYfromLat(u)*this.worldSize)}unproject(r){return new l.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(r){this.freezeElevation||(this.elevation=r?this.getElevation(this._center,r):0)}getElevation(r,u){const d=l.MercatorCoordinate.fromLngLat(r.wrap()),m=(1<<this.tileZoom)*l.EXTENT,v=d.x*m,C=d.y*m,A=Math.floor(v/l.EXTENT),k=Math.floor(C/l.EXTENT),j=new l.OverscaledTileID(this.tileZoom,0,this.tileZoom,A,k);return u.getElevation(j,v%l.EXTENT,C%l.EXTENT,l.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const u=this.pointLocation(this.centerPoint,r),d=this.getElevation(u,r);if(!(this.elevation-d))return;const m=this.getCameraPosition(),v=l.MercatorCoordinate.fromLngLat(m.lngLat,m.altitude),C=l.MercatorCoordinate.fromLngLat(u,d),A=v.x-C.x,k=v.y-C.y,j=v.z-C.z,H=Math.sqrt(A*A+k*k+j*j),K=this.scaleZoom(this.cameraToCenterDistance/H/this.tileSize);this._elevation=d,this._center=u,this.zoom=K}setLocationAtPoint(r,u){const d=this.pointCoordinate(u),m=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(r),C=new l.MercatorCoordinate(v.x-(d.x-m.x),v.y-(d.y-m.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,u){return u?this.coordinatePoint(this.locationCoordinate(r),this.getElevation(r,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,u){return this.coordinateLocation(this.pointCoordinate(r,u))}locationCoordinate(r){return l.MercatorCoordinate.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,u){if(u){const he=u.pointCoordinate(r);if(he!=null)return he}const d=[r.x,r.y,0,1],m=[r.x,r.y,1,1];l.transformMat4(d,d,this.pixelMatrixInverse),l.transformMat4(m,m,this.pixelMatrixInverse);const v=d[3],C=m[3],A=d[1]/v,k=m[1]/C,j=d[2]/v,H=m[2]/C,K=j===H?0:(0-j)/(H-j);return new l.MercatorCoordinate(l.interpolate.number(d[0]/v,m[0]/C,K)/this.worldSize,l.interpolate.number(A,k,K)/this.worldSize)}coordinatePoint(r,u=0,d=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,u,1];return l.transformMat4(m,m,d),new l.Point(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Pe().extend(this.pointLocation(new l.Point(0,r))).extend(this.pointLocation(new l.Point(this.width,r))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Pe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,u=!1){const d=r.key,m=u?this._alignedPosMatrixCache:this._posMatrixCache;if(m[d])return m[d];const v=r.canonical,C=this.worldSize/this.zoomScale(v.z),A=v.x+Math.pow(2,v.z)*r.wrap,k=l.identity(new Float64Array(16));return l.translate(k,k,[A*C,v.y*C,0]),l.scale(k,k,[C/l.EXTENT,C/l.EXTENT,1]),l.multiply(k,u?this.alignedProjMatrix:this.projMatrix,k),m[d]=new Float32Array(k),m[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,u,d,m,v=-90,C=90,A=-180,k=180;const j=this.size,H=this._unmodified;if(this.latRange){const Ie=this.latRange;v=l.mercatorYfromLat(Ie[1])*this.worldSize,C=l.mercatorYfromLat(Ie[0])*this.worldSize,r=C-v<j.y?j.y/(C-v):0}if(this.lngRange){const Ie=this.lngRange;A=l.wrap(l.mercatorXfromLng(Ie[0])*this.worldSize,0,this.worldSize),k=l.wrap(l.mercatorXfromLng(Ie[1])*this.worldSize,0,this.worldSize),k<A&&(k+=this.worldSize),u=k-A<j.x?j.x/(k-A):0}const K=this.point,he=Math.max(u||0,r||0);if(he)return this.center=this.unproject(new l.Point(u?(k+A)/2:K.x,r?(C+v)/2:K.y)),this.zoom+=this.scaleZoom(he),this._unmodified=H,void(this._constraining=!1);if(this.latRange){const Ie=K.y,Ce=j.y/2;Ie-Ce<v&&(m=v+Ce),Ie+Ce>C&&(m=C-Ce)}if(this.lngRange){const Ie=(A+k)/2,Ce=l.wrap(K.x,Ie-this.worldSize/2,Ie+this.worldSize/2),Le=j.x/2;Ce-Le<A&&(d=A+Le),Ce+Le>k&&(d=k-Le)}d===void 0&&m===void 0||(this.center=this.unproject(new l.Point(d!==void 0?d:K.x,m!==void 0?m:K.y)).wrap()),this._unmodified=H,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,u=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let m=l.identity(new Float64Array(16));l.scale(m,m,[this.width/2,-this.height/2,1]),l.translate(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=l.identity(new Float64Array(16)),l.scale(m,m,[1,-1,1]),l.translate(m,m,[-1,-1,0]),l.scale(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const v=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,C=Math.PI/2+this._pitch,A=this._fov*(.5+r.y/this.height),k=Math.sin(A)*v/Math.sin(l.clamp(Math.PI-C-A,.01,Math.PI-.01)),j=this.getHorizon(),H=2*Math.atan(j/this.cameraToCenterDistance)*(.5+r.y/(2*j)),K=Math.sin(H)*v/Math.sin(l.clamp(Math.PI-C-H,.01,Math.PI-.01)),he=Math.min(k,K),Ie=1.01*(Math.cos(Math.PI/2-this._pitch)*he+v),Ce=this.height/50;m=new Float64Array(16),l.perspective(m,this._fov,this.width/this.height,Ce,Ie),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,l.scale(m,m,[1,-1,1]),l.translate(m,m,[0,0,-this.cameraToCenterDistance]),l.rotateX(m,m,this._pitch),l.rotateZ(m,m,this.angle),l.translate(m,m,[-u,-d,0]),this.mercatorMatrix=l.scale([],m,[this.worldSize,this.worldSize,this.worldSize]),l.scale(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,m),l.translate(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=l.invert([],m),this.pixelMatrix3D=l.multiply(new Float64Array(16),this.labelPlaneMatrix,m);const Le=this.width%2/2,Me=this.height%2/2,Ke=Math.cos(this.angle),nt=Math.sin(this.angle),Fe=u-Math.round(u)+Ke*Le+nt*Me,et=d-Math.round(d)+Ke*Me+nt*Le,at=new Float64Array(m);if(l.translate(at,at,[Fe>.5?Fe-1:Fe,et>.5?et-1:et,0]),this.alignedProjMatrix=at,m=l.invert(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new l.Point(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,r))}getCameraQueryGeometry(r){const u=this.getCameraPoint();if(r.length===1)return[r[0],u];{let d=u.x,m=u.y,v=u.x,C=u.y;for(const A of r)d=Math.min(d,A.x),m=Math.min(m,A.y),v=Math.max(v,A.x),C=Math.max(C,A.y);return[new l.Point(d,m),new l.Point(v,m),new l.Point(v,C),new l.Point(d,C),new l.Point(d,m)]}}}class Qu{constructor(r){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let d;return u.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(d=m)}),(d&&d[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:d,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=function(u,d){let m=!1,v=null;const C=()=>{v=null,m&&(u(),v=setTimeout(C,300),m=!1)};return()=>(m=!0,v||C(),v)}(this._updateHashUnthrottled),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const u=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,m=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,m),C=Math.round(u.lng*v)/v,A=Math.round(u.lat*v)/v,k=this._map.getBearing(),j=this._map.getPitch();let H="";if(H+=r?`/${C}/${A}/${d}`:`${d}/${A}/${C}`,(k||j)&&(H+="/"+Math.round(10*k)/10),j&&(H+=`/${Math.round(j)}`),this._hashName){const K=this._hashName;let he=!1;const Ie=window.location.hash.slice(1).split("&").map(Ce=>{const Le=Ce.split("=")[0];return Le===K?(he=!0,`${Le}=${H}`):Ce}).filter(Ce=>Ce);return he||Ie.push(`${K}=${H}`),`#${Ie.join("&")}`}return`#${H}`}}const Gs={linearity:.3,easing:l.bezier(0,0,.3,1)},sl=l.extend({deceleration:2500,maxSpeed:1400},Gs),au=l.extend({deceleration:20,maxSpeed:1400},Gs),Zs=l.extend({deceleration:1e3,maxSpeed:360},Gs),lu=l.extend({deceleration:1e3,maxSpeed:90},Gs);class U{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=l.browser.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)u.zoom+=v.zoomDelta||0,u.bearing+=v.bearingDelta||0,u.pitch+=v.pitchDelta||0,v.panDelta&&u.pan._add(v.panDelta),v.around&&(u.around=v.around),v.pinchAround&&(u.pinchAround=v.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){const v=Be(u.pan.mag(),d,l.extend({},sl,r||{}));m.offset=u.pan.mult(v.amount/u.pan.mag()),m.center=this._map.transform.center,me(m,v)}if(u.zoom){const v=Be(u.zoom,d,au);m.zoom=this._map.transform.zoom+v.amount,me(m,v)}if(u.bearing){const v=Be(u.bearing,d,Zs);m.bearing=this._map.transform.bearing+l.clamp(v.amount,-179,179),me(m,v)}if(u.pitch){const v=Be(u.pitch,d,lu);m.pitch=this._map.transform.pitch+v.amount,me(m,v)}if(m.zoom||m.bearing){const v=u.pinchAround===void 0?u.around:u.pinchAround;m.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),l.extend(m,{noMoveStart:!0})}}function me(g,r){(!g.duration||g.duration<r.duration)&&(g.duration=r.duration,g.easing=r.easing)}function Be(g,r,u){const{maxSpeed:d,linearity:m,deceleration:v}=u,C=l.clamp(g*m/(r/1e3),-d,d),A=Math.abs(C)/(v*m);return{easing:u.easing,duration:1e3*A,amount:C*(A/2)}}class rt extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,d,m={}){const v=w.mousePos(u.getCanvasContainer(),d),C=u.unproject(v);super(r,l.extend({point:v,lngLat:C,originalEvent:d},m)),this._defaultPrevented=!1,this.target=u}}class zt extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,d){const m=r==="touchend"?d.changedTouches:d.touches,v=w.touchPos(u.getCanvasContainer(),m),C=v.map(k=>u.unproject(k)),A=v.reduce((k,j,H,K)=>k.add(j.div(K.length)),new l.Point(0,0));super(r,{points:v,point:A,lngLats:C,lngLat:u.unproject(A),originalEvent:d}),this._defaultPrevented=!1}}class Tt extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class Zt{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Tt(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new rt(r.type,this._map,r))}mouseup(r){this._map.fire(new rt(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new rt(r.type,this._map,r))}dblclick(r){return this._firePreventable(new rt(r.type,this._map,r))}mouseover(r){this._map.fire(new rt(r.type,this._map,r))}mouseout(r){this._map.fire(new rt(r.type,this._map,r))}touchstart(r){return this._firePreventable(new zt(r.type,this._map,r))}touchmove(r){this._map.fire(new zt(r.type,this._map,r))}touchend(r){this._map.fire(new zt(r.type,this._map,r))}touchcancel(r){this._map.fire(new zt(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Jt{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new rt(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new rt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new rt(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mn{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(l.Point.convert(r),this._map.terrain)}}class Fn{constructor(r,u){this._map=r,this._tr=new mn(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const d=u;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=d,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const v=Math.min(m.x,d.x),C=Math.max(m.x,d.x),A=Math.min(m.y,d.y),k=Math.max(m.y,d.y);w.setTransform(this._box,`translate(${v}px,${A}px)`),this._box.style.width=C-v+"px",this._box.style.height=k-A+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const d=this._startPos,m=u;if(this.reset(),w.suppressClick(),d.x!==m.x||d.y!==m.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:r})),{cameraAnimation:v=>v.fitScreenCoordinates(d,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new l.Event(r,{originalEvent:u}))}}function Sn(g,r){if(g.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${r.length}`);const u={};for(let d=0;d<g.length;d++)u[g[d].identifier]=r[d];return u}class St{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(m){const v=new l.Point(0,0);for(const C of m)v._add(C);return v.div(m.length)}(u),this.touches=Sn(d,u)))}touchmove(r,u,d){if(this.aborted||!this.centroid)return;const m=Sn(d,u);for(const v in this.touches){const C=m[v];(!C||C.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(r,u,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class rr{constructor(r){this.singleTap=new St(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,d){this.singleTap.touchstart(r,u,d)}touchmove(r,u,d){this.singleTap.touchmove(r,u,d)}touchend(r,u,d){const m=this.singleTap.touchend(r,u,d);if(m){const v=r.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(m)<30;if(v&&C||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class wr{constructor(r){this._tr=new mn(r),this._zoomIn=new rr({numTouches:1,numTaps:2}),this._zoomOut=new rr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,d){this._zoomIn.touchstart(r,u,d),this._zoomOut.touchstart(r,u,d)}touchmove(r,u,d){this._zoomIn.touchmove(r,u,d),this._zoomOut.touchmove(r,u,d)}touchend(r,u,d){const m=this._zoomIn.touchend(r,u,d),v=this._zoomOut.touchend(r,u,d),C=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(m)},{originalEvent:r})}):v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(v)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tr{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=u.length?u[0]:u;return!this._moved&&m.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(d,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&w.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Eo={0:1,2:2};class Ct{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=w.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,d){const m=Eo[d];return u.buttons===void 0||(u.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return w.mouseButton(r)===this._eventButton}}class lo{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const al=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=function(r){r.preventDefault()}},va=({enable:g,clickTolerance:r,bearingDegreesPerPixelMoved:u=.8})=>{const d=new Ct({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new tr({clickTolerance:r,move:(m,v)=>({bearingDelta:(v.x-m.x)*u}),moveStateManager:d,enable:g,assignEvents:al})},cs=({enable:g,clickTolerance:r,pitchDegreesPerPixelMoved:u=-.5})=>{const d=new Ct({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new tr({clickTolerance:r,move:(m,v)=>({pitchDelta:(v.y-m.y)*u}),moveStateManager:d,enable:g,assignEvents:al})};class kd{constructor(r,u){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,u,d){return this._calculateTransform(r,u,d)}touchmove(r,u,d){if(this._map._cooperativeGestures&&(this._minTouches===2&&d.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,d.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(d.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,u,d)}touchend(r,u,d){this._calculateTransform(r,u,d),this._active&&d.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,d){d.length>0&&(this._active=!0);const m=Sn(d,u),v=new l.Point(0,0),C=new l.Point(0,0);let A=0;for(const j in m){const H=m[j],K=this._touches[j];K&&(v._add(H),C._add(H.sub(K)),A++,m[j]=H)}if(this._touches=m,A<this._minTouches||!C.mag())return;const k=C.div(A);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(A),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ec{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,u,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,d){if(!this._firstTwoTouches)return;r.preventDefault();const[m,v]=this._firstTwoTouches,C=tc(d,u,m),A=tc(d,u,v);if(!C||!A)return;const k=this._aroundCenter?null:C.add(A).div(2);return this._move([C,A],k,r)}touchend(r,u,d){if(!this._firstTwoTouches)return;const[m,v]=this._firstTwoTouches,C=tc(d,u,m),A=tc(d,u,v);C&&A||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function tc(g,r,u){for(let d=0;d<g.length;d++)if(g[d].identifier===u)return r[d]}function zd(g,r){return Math.log(g/r)/Math.LN2}class zh extends ec{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(zd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:zd(this._distance,d),pinchAround:u}}}function nc(g,r){return 180*g.angleWith(r)/Math.PI}class Lh extends ec{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u){const d=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:nc(this._vector,d),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,d=nc(r,this._startVector);return Math.abs(d)<u}}function uu(g){return Math.abs(g.y)>Math.abs(g.x)}class Si extends ec{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,d){super.touchstart(r,u,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,uu(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,d){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),v=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,v,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,d){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,v=u.mag()>=2;if(!m&&!v)return;if(!m||!v)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const C=r.y>0==u.y>0;return uu(r)&&uu(u)&&C}}const Ws={panStep:100,bearingStep:15,pitchStep:10};class Ld{constructor(r){this._tr=new mn(r);const u=Ws;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,d=0,m=0,v=0,C=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),v=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),v=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),C=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(d=0,m=0),{cameraAnimation:A=>{const k=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:Rh,zoom:u?Math.round(k.zoom)+u*(r.shiftKey?2:1):k.zoom,bearing:k.bearing+d*this._bearingStep,pitch:k.pitch+m*this._pitchStep,offset:[-v*this._panStep,-C*this._panStep],center:k.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Rh(g){return g*(2-g)}const rc=4.000244140625;class Oh{constructor(r,u){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new mn(r),this._el=r.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=l.browser.now(),m=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,u!==0&&u%rc==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,r),d=this._tr;this._around=l.LngLat.convert(this._aroundCenter?d.center:d.unproject(u)),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>rc?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&k!==0&&(k=1/k);const j=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(j*k))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,d=this._startZoom,m=this._easing;let v,C=!1;if(this._type==="wheel"&&d&&m){const A=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),k=m(A);v=l.interpolate.number(d,u,k),A<1?this._frameId||(this._frameId=!0):C=!0}else v=u,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:v-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=l.defaultEasing;if(this._prevEase){const d=this._prevEase,m=(l.browser.now()-d.start)/d.duration,v=d.easing(m+.01)-d.easing(m),C=.27/Math.sqrt(v*v+1e-4)*.01,A=Math.sqrt(.0729-C*C);u=l.bezier(C,A,.25,1)}return this._prevEase={start:l.browser.now(),duration:r,easing:u},u}reset(){this._active=!1}}class Rd{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class uo{constructor(r){this._tr=new mn(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lr{constructor(){this._tap=new rr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,u,d){if(!this._swipePoint)if(this._tapTime){const m=u[0],v=r.timeStamp-this._tapTime<500,C=this._tapPoint.dist(m)<30;v&&C?d.length>0&&(this._swipePoint=m,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,u,d)}touchmove(r,u,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const m=u[0],v=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(r,u,d)}touchend(r,u,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const m=this._tap.touchend(r,u,d);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ic{constructor(r,u,d){this._el=r,this._mousePan=u,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Fh{constructor(r,u,d){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=u,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Od{constructor(r,u,d,m){this._el=r,this._touchZoom=u,this._touchRotate=d,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const cu=g=>g.zoom||g.drag||g.pitch||g.rotate;class Fd extends l.Event{}function jh(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class Vo{constructor(r,u){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,v)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=m.type==="renderFrame"?void 0:m,A={needsRenderFrame:!1},k={},j={},H=m.touches,K=H?this._getMapTouches(H):void 0,he=K?w.touchPos(this._el,K):w.mousePos(this._el,m);for(const{handlerName:Le,handler:Me,allowed:Ke}of this._handlers){if(!Me.isEnabled())continue;let nt;this._blockedByActive(j,Ke,Le)?Me.reset():Me[v||m.type]&&(nt=Me[v||m.type](m,he,K),this.mergeHandlerResult(A,k,nt,Le,C),nt&&nt.needsRenderFrame&&this._triggerRenderFrame()),(nt||Me.isActive())&&(j[Le]=Me)}const Ie={};for(const Le in this._previousActiveHandlers)j[Le]||(Ie[Le]=C);this._previousActiveHandlers=j,(Object.keys(Ie).length||jh(A))&&(this._changes.push([A,k,Ie]),this._triggerRenderFrame()),(Object.keys(j).length||jh(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ce}=A;Ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ce(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new U(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,v,C]of this._listeners)w.addEventListener(m,v,m===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[r,u,d]of this._listeners)w.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const u=this._map,d=u.getCanvasContainer();this._add("mapEvent",new Zt(u,r));const m=u.boxZoom=new Fn(u,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const v=new wr(u),C=new uo(u);u.doubleClickZoom=new Rd(C,v),this._add("tapZoom",v),this._add("clickZoom",C),r.interactive&&r.doubleClickZoom&&u.doubleClickZoom.enable();const A=new lr;this._add("tapDragZoom",A);const k=u.touchPitch=new Si(u);this._add("touchPitch",k),r.interactive&&r.touchPitch&&u.touchPitch.enable(r.touchPitch);const j=va(r),H=cs(r);u.dragRotate=new Fh(r,j,H),this._add("mouseRotate",j,["mousePitch"]),this._add("mousePitch",H,["mouseRotate"]),r.interactive&&r.dragRotate&&u.dragRotate.enable();const K=(({enable:Ke,clickTolerance:nt})=>{const Fe=new Ct({checkCorrectEvent:et=>w.mouseButton(et)===0&&!et.ctrlKey});return new tr({clickTolerance:nt,move:(et,at)=>({around:at,panDelta:at.sub(et)}),activateOnStart:!0,moveStateManager:Fe,enable:Ke,assignEvents:al})})(r),he=new kd(r,u);u.dragPan=new ic(d,K,he),this._add("mousePan",K),this._add("touchPan",he,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&u.dragPan.enable(r.dragPan);const Ie=new Lh,Ce=new zh;u.touchZoomRotate=new Od(d,Ce,Ie,A),this._add("touchRotate",Ie,["touchPan","touchZoom"]),this._add("touchZoom",Ce,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&u.touchZoomRotate.enable(r.touchZoomRotate);const Le=u.scrollZoom=new Oh(u,()=>this._triggerRenderFrame());this._add("scrollZoom",Le,["mousePan"]),r.interactive&&r.scrollZoom&&u.scrollZoom.enable(r.scrollZoom);const Me=u.keyboard=new Ld(u);this._add("keyboard",Me),r.interactive&&r.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Jt(u))}_add(r,u,d){this._handlers.push({handlerName:r,handler:u,allowed:d}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!cu(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,d){for(const m in r)if(m!==d&&(!u||u.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const u=[];for(const d of r)this._el.contains(d.target)&&u.push(d);return u}mergeHandlerResult(r,u,d,m,v){if(!d)return;l.extend(r,d);const C={handlerName:m,originalEvent:d.originalEvent||v};d.zoomDelta!==void 0&&(u.zoom=C),d.panDelta!==void 0&&(u.drag=C),d.pitchDelta!==void 0&&(u.pitch=C),d.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){const r={},u={},d={};for(const[m,v,C]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new l.Point(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),l.extend(u,v),l.extend(d,C);this._updateMapTransform(r,u,d),this._changes=[]}_updateMapTransform(r,u,d){const m=this._map,v=m._getTransformForUpdate(),C=m.terrain;if(!(jh(r)||C&&this._terrainMovement))return this._fireEvents(u,d,!0);let{panDelta:A,zoomDelta:k,bearingDelta:j,pitchDelta:H,around:K,pinchAround:he}=r;he!==void 0&&(K=he),m._stop(!0),K=K||m.transform.centerPoint;const Ie=v.pointLocation(A?K.sub(A):K);j&&(v.bearing+=j),H&&(v.pitch+=H),k&&(v.zoom+=k),C?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?v.center=v.pointLocation(v.centerPoint.sub(A)):v.setLocationAtPoint(Ie,K):(this._terrainMovement=!0,v.freezeElevation=!0,v.setLocationAtPoint(Ie,K),this._map.once("moveend",()=>{v.freezeElevation=!1,this._terrainMovement=!1,v.recalculateZoom(m.terrain)})):v.setLocationAtPoint(Ie,K),m._applyUpdatedTransform(v),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,d,!0)}_fireEvents(r,u,d){const m=cu(this._eventsInProgress),v=cu(r),C={};for(const H in r){const{originalEvent:K}=r[H];this._eventsInProgress[H]||(C[`${H}start`]=K),this._eventsInProgress[H]=r[H]}!m&&v&&this._fireEvent("movestart",v.originalEvent);for(const H in C)this._fireEvent(H,C[H]);v&&this._fireEvent("move",v.originalEvent);for(const H in r){const{originalEvent:K}=r[H];this._fireEvent(H,K)}const A={};let k;for(const H in this._eventsInProgress){const{handlerName:K,originalEvent:he}=this._eventsInProgress[H];this._handlersById[K].isActive()||(delete this._eventsInProgress[H],k=u[K]||he,A[`${H}end`]=k)}for(const H in A)this._fireEvent(H,A[H]);const j=cu(this._eventsInProgress);if(d&&(m||v)&&!j){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),K=he=>he!==0&&-this._bearingSnap<he&&he<this._bearingSnap;H?(K(H.bearing||this._map.getBearing())&&(H.bearing=0),H.freezeElevation=!0,this._map.easeTo(H,{originalEvent:k})):(this._map.fire(new l.Event("moveend",{originalEvent:k})),K(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new l.Event(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Fd("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class oc extends l.Evented{constructor(r,u){super(),this._renderFrameCallback=()=>{const d=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}panBy(r,u,d){return r=l.Point.convert(r).mult(-1),this.panTo(this.transform.center,l.extend({offset:r},u),d)}panTo(r,u,d){return this.easeTo(l.extend({center:r},u),d)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,d){return this.easeTo(l.extend({zoom:r},u),d)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,d){return this.easeTo(l.extend({bearing:r},u),d)}resetNorth(r,u){return this.rotateTo(0,l.extend({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}cameraForBounds(r,u){r=Pe.convert(r);const d=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,u)}_cameraForBoxAndBearing(r,u,d,m){const v={top:0,bottom:0,right:0,left:0};if(typeof(m=l.extend({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const at=m.padding;m.padding={top:at,bottom:at,right:at,left:at}}m.padding=l.extend(v,m.padding);const C=this.transform,A=C.padding,k=C.project(l.LngLat.convert(r)),j=C.project(l.LngLat.convert(u)),H=k.rotate(-d*Math.PI/180),K=j.rotate(-d*Math.PI/180),he=new l.Point(Math.max(H.x,K.x),Math.max(H.y,K.y)),Ie=new l.Point(Math.min(H.x,K.x),Math.min(H.y,K.y)),Ce=he.sub(Ie),Le=(C.width-(A.left+A.right+m.padding.left+m.padding.right))/Ce.x,Me=(C.height-(A.top+A.bottom+m.padding.top+m.padding.bottom))/Ce.y;if(Me<0||Le<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ke=Math.min(C.scaleZoom(C.scale*Math.min(Le,Me)),m.maxZoom),nt=l.Point.convert(m.offset),Fe=new l.Point((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(d*Math.PI/180),et=nt.add(Fe).mult(C.scale/C.zoomScale(Ke));return{center:C.unproject(k.add(j).div(2).sub(et)),zoom:Ke,bearing:d}}fitBounds(r,u,d){return this._fitInternal(this.cameraForBounds(r,u),u,d)}fitScreenCoordinates(r,u,d,m,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(r)),this.transform.pointLocation(l.Point.convert(u)),d,m),m,v)}_fitInternal(r,u,d){return r?(delete(u=l.extend(r,u)).padding,u.linear?this.easeTo(u,d):this.flyTo(u,d)):this}jumpTo(r,u){this.stop();const d=this._getTransformForUpdate();let m=!1,v=!1,C=!1;return"zoom"in r&&d.zoom!==+r.zoom&&(m=!0,d.zoom=+r.zoom),r.center!==void 0&&(d.center=l.LngLat.convert(r.center)),"bearing"in r&&d.bearing!==+r.bearing&&(v=!0,d.bearing=+r.bearing),"pitch"in r&&d.pitch!==+r.pitch&&(C=!0,d.pitch=+r.pitch),r.padding==null||d.isPaddingEqual(r.padding)||(d.padding=r.padding),this._applyUpdatedTransform(d),this.fire(new l.Event("movestart",u)).fire(new l.Event("move",u)),m&&this.fire(new l.Event("zoomstart",u)).fire(new l.Event("zoom",u)).fire(new l.Event("zoomend",u)),v&&this.fire(new l.Event("rotatestart",u)).fire(new l.Event("rotate",u)).fire(new l.Event("rotateend",u)),C&&this.fire(new l.Event("pitchstart",u)).fire(new l.Event("pitch",u)).fire(new l.Event("pitchend",u)),this.fire(new l.Event("moveend",u))}calculateCameraOptionsFromTo(r,u,d,m=0){const v=l.MercatorCoordinate.fromLngLat(r,u),C=l.MercatorCoordinate.fromLngLat(d,m),A=C.x-v.x,k=C.y-v.y,j=C.z-v.z,H=Math.hypot(A,k,j);if(H===0)throw new Error("Can't calculate camera options with same From and To");const K=Math.hypot(A,k),he=this.transform.scaleZoom(this.transform.cameraToCenterDistance/H/this.transform.tileSize),Ie=180*Math.atan2(A,-k)/Math.PI;let Ce=180*Math.acos(K/H)/Math.PI;return Ce=j<0?90-Ce:90+Ce,{center:C.toLngLat(),zoom:he,pitch:Ce,bearing:Ie}}easeTo(r,u){this._stop(!1,r.easeId),((r=l.extend({offset:[0,0],duration:500,easing:l.defaultEasing},r)).animate===!1||!r.essential&&l.browser.prefersReducedMotion)&&(r.duration=0);const d=this._getTransformForUpdate(),m=this.getZoom(),v=this.getBearing(),C=this.getPitch(),A=this.getPadding(),k="zoom"in r?+r.zoom:m,j="bearing"in r?this._normalizeBearing(r.bearing,v):v,H="pitch"in r?+r.pitch:C,K="padding"in r?r.padding:d.padding,he=l.Point.convert(r.offset);let Ie=d.centerPoint.add(he);const Ce=d.pointLocation(Ie),Le=l.LngLat.convert(r.center||Ce);this._normalizeCenter(Le);const Me=d.project(Ce),Ke=d.project(Le).sub(Me),nt=d.zoomScale(k-m);let Fe,et;r.around&&(Fe=l.LngLat.convert(r.around),et=d.locationPoint(Fe));const at={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||k!==m,this._rotating=this._rotating||v!==j,this._pitching=this._pitching||H!==C,this._padding=!d.isPaddingEqual(K),this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,at),this.terrain&&this._prepareElevation(Le),this._ease(ct=>{if(this._zooming&&(d.zoom=l.interpolate.number(m,k,ct)),this._rotating&&(d.bearing=l.interpolate.number(v,j,ct)),this._pitching&&(d.pitch=l.interpolate.number(C,H,ct)),this._padding&&(d.interpolatePadding(A,K,ct),Ie=d.centerPoint.add(he)),this.terrain&&!r.freezeElevation&&this._updateElevation(ct),Fe)d.setLocationAtPoint(Fe,et);else{const ft=d.zoomScale(d.zoom-m),xt=k>m?Math.min(2,nt):Math.max(.5,nt),dt=Math.pow(xt,1-ct),Lt=d.unproject(Me.add(Ke.mult(ct*dt)).mult(ft));d.setLocationAtPoint(d.renderWorldCopies?Lt.wrap():Lt,Ie)}this._applyUpdatedTransform(d),this._fireMoveEvents(u)},ct=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,ct)},r),this}_prepareEase(r,u,d={}){this._moving=!0,u||d.moving||this.fire(new l.Event("movestart",r)),this._zooming&&!d.zooming&&this.fire(new l.Event("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new l.Event("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new l.Event("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(r,this.terrain),this.transform.freezeElevation=!0}_updateElevation(r){const u=this.transform.getElevation(this._elevationCenter,this.terrain);if(r<1&&u!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(u-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.elevation=l.interpolate.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const u=r.clone(),{center:d,zoom:m,pitch:v,bearing:C,elevation:A}=this.transformCameraUpdate(u);d&&(u.center=d),m!==void 0&&(u.zoom=m),v!==void 0&&(u.pitch=v),C!==void 0&&(u.bearing=C),A!==void 0&&(u.elevation=A),this.transform.apply(u)}_fireMoveEvents(r){this.fire(new l.Event("move",r)),this._zooming&&this.fire(new l.Event("zoom",r)),this._rotating&&this.fire(new l.Event("rotate",r)),this._pitching&&this.fire(new l.Event("pitch",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const d=this._zooming,m=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new l.Event("zoomend",r)),m&&this.fire(new l.Event("rotateend",r)),v&&this.fire(new l.Event("pitchend",r)),this.fire(new l.Event("moveend",r))}flyTo(r,u){if(!r.essential&&l.browser.prefersReducedMotion){const Ft=l.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ft,u)}this.stop(),r=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.defaultEasing},r);const d=this._getTransformForUpdate(),m=this.getZoom(),v=this.getBearing(),C=this.getPitch(),A=this.getPadding(),k="zoom"in r?l.clamp(+r.zoom,d.minZoom,d.maxZoom):m,j="bearing"in r?this._normalizeBearing(r.bearing,v):v,H="pitch"in r?+r.pitch:C,K="padding"in r?r.padding:d.padding,he=d.zoomScale(k-m),Ie=l.Point.convert(r.offset);let Ce=d.centerPoint.add(Ie);const Le=d.pointLocation(Ce),Me=l.LngLat.convert(r.center||Le);this._normalizeCenter(Me);const Ke=d.project(Le),nt=d.project(Me).sub(Ke);let Fe=r.curve;const et=Math.max(d.width,d.height),at=et/he,ct=nt.mag();if("minZoom"in r){const Ft=l.clamp(Math.min(r.minZoom,m,k),d.minZoom,d.maxZoom),jn=et/d.zoomScale(Ft-m);Fe=Math.sqrt(jn/ct*2)}const ft=Fe*Fe;function xt(Ft){const jn=(at*at-et*et+(Ft?-1:1)*ft*ft*ct*ct)/(2*(Ft?at:et)*ft*ct);return Math.log(Math.sqrt(jn*jn+1)-jn)}function dt(Ft){return(Math.exp(Ft)-Math.exp(-Ft))/2}function Lt(Ft){return(Math.exp(Ft)+Math.exp(-Ft))/2}const $t=xt(!1);let wn=function(Ft){return Lt($t)/Lt($t+Fe*Ft)},It=function(Ft){return et*((Lt($t)*(dt(jn=$t+Fe*Ft)/Lt(jn))-dt($t))/ft)/ct;var jn},rn=(xt(!0)-$t)/Fe;if(Math.abs(ct)<1e-6||!isFinite(rn)){if(Math.abs(et-at)<1e-6)return this.easeTo(r,u);const Ft=at<et?-1:1;rn=Math.abs(Math.log(at/et))/Fe,It=function(){return 0},wn=function(jn){return Math.exp(Ft*Fe*jn)}}return r.duration="duration"in r?+r.duration:1e3*rn/("screenSpeed"in r?+r.screenSpeed/Fe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=v!==j,this._pitching=H!==C,this._padding=!d.isPaddingEqual(K),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(Me),this._ease(Ft=>{const jn=Ft*rn,Rn=1/wn(jn);d.zoom=Ft===1?k:m+d.scaleZoom(Rn),this._rotating&&(d.bearing=l.interpolate.number(v,j,Ft)),this._pitching&&(d.pitch=l.interpolate.number(C,H,Ft)),this._padding&&(d.interpolatePadding(A,K,Ft),Ce=d.centerPoint.add(Ie)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ft);const Cn=Ft===1?Me:d.unproject(Ke.add(nt.mult(It(jn))).mult(Rn));d.setLocationAtPoint(d.renderWorldCopies?Cn.wrap():Cn,Ce),this._applyUpdatedTransform(d),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,u)}if(!r){const d=this.handlers;d&&d.stop(!1)}return this}_ease(r,u,d){d.animate===!1||d.duration===0?(r(1),u()):(this._easeStart=l.browser.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,u){r=l.wrap(r,-180,180);const d=Math.abs(r-u);return Math.abs(r-360-u)<d&&(r-=360),Math.abs(r+360-u)<d&&(r+=360),r}_normalizeCenter(r){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const d=r.lng-u.center.lng;r.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(r){return this.terrain?this.transform.getElevation(l.LngLat.convert(r),this.terrain)-this.transform.elevation:null}}class Wt{constructor(r={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const d=this._map._getUIString(`AttributionControl.${u}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const u=this._map.style.sourceCaches;for(const m in u){const v=u[m];if(v.used||v.usedForTerrain){const C=v.getSource();C.attribution&&r.indexOf(C.attribution)<0&&r.push(C.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,v)=>m.length-v.length),r=r.filter((m,v)=>{for(let C=v+1;C<r.length;C++)if(r[C].indexOf(m)>=0)return!1;return!0});const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class sn{constructor(r={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const d=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class sc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,d=u?this._queue.concat(u):this._queue;for(const m of d)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const d of u)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Dh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Bh=l.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class Ti extends l.Evented{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const d={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))d[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),l.ortho(m.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),this._tiles[m.key]=new vn(m,this.tileSize));for(const m in this._tiles)d[m]||delete this._tiles[m]}freeRtt(r){for(const u in this._tiles){const d=this._tiles[u];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const u={};for(const d of this._renderableTilesKeys){const m=this._tiles[d].tileID;if(m.canonical.equals(r.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16),l.ortho(v.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),u[d]=v}else if(m.canonical.isChildOf(r.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16);const C=m.canonical.z-r.canonical.z,A=m.canonical.x-(m.canonical.x>>C<<C),k=m.canonical.y-(m.canonical.y>>C<<C),j=l.EXTENT>>C;l.ortho(v.posMatrix,0,j,0,j,0,1),l.translate(v.posMatrix,v.posMatrix,[-A*j,-k*j,0]),u[d]=v}else if(r.canonical.isChildOf(m.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16);const C=r.canonical.z-m.canonical.z,A=r.canonical.x-(r.canonical.x>>C<<C),k=r.canonical.y-(r.canonical.y>>C<<C),j=l.EXTENT>>C;l.ortho(v.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),l.translate(v.posMatrix,v.posMatrix,[A*j,k*j,0]),l.scale(v.posMatrix,v.posMatrix,[1/2**C,1/2**C,0]),u[d]=v}}return u}getSourceTile(r,u){const d=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>d.maxzoom&&(m=d.maxzoom),m<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!v||!v.dem)&&u)for(;m>=d.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(r.scaledTo(m--).key);return v}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=r)}}class jd{constructor(r,u,d){this.painter=r,this.sourceCache=new Ti(u),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,d,m=l.EXTENT){var v;if(!(u>=0&&u<m&&d>=0&&d<m))return 0;const C=this.getTerrainData(r),A=(v=C.tile)===null||v===void 0?void 0:v.dem;if(!A)return 0;const k=function(Ce,Le,Me){var Ke=Le[0],nt=Le[1];return Ce[0]=Me[0]*Ke+Me[4]*nt+Me[12],Ce[1]=Me[1]*Ke+Me[5]*nt+Me[13],Ce}([],[u/m*l.EXTENT,d/m*l.EXTENT],C.u_terrain_matrix),j=[k[0]*A.dim,k[1]*A.dim],H=Math.floor(j[0]),K=Math.floor(j[1]),he=j[0]-H,Ie=j[1]-K;return A.get(H,K)*(1-he)*(1-Ie)+A.get(H+1,K)*he*(1-Ie)+A.get(H,K+1)*(1-he)*Ie+A.get(H+1,K+1)*he*Ie}getElevation(r,u,d,m=l.EXTENT){return this.getDEMElevation(r,u,d,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,v=new l.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new X(m,v,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new X(m,new l.RGBAImage({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.identity([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const m=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new X(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const d=u&&u+u.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const m=this.sourceCache.sourceCache._source.maxzoom;let v=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?v=r.canonical.z-m:l.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=r.canonical.x-(r.canonical.x>>v<<v),A=r.canonical.y-(r.canonical.y>>v<<v),k=l.fromScaling(new Float64Array(16),[1/(l.EXTENT<<v),1/(l.EXTENT<<v),0]);l.translate(k,k,[C*l.EXTENT,A*l.EXTENT,0]),this._demMatrixCache[r.key]={matrix:k,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,d=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new X(u.context,{width:d,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new X(u.context,{width:d,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(d,m,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,d,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,C=0;v<this._coordsTextureSize;v++)for(let A=0;A<this._coordsTextureSize;A++,C+=4)u[C+0]=255&A,u[C+1]=255&v,u[C+2]=A>>8<<4|v>>8,u[C+3]=0;const d=new l.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new X(r,d,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){const u=new Uint8Array(4),d=this.painter.context,m=d.gl;d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),d.bindFramebuffer.set(null);const v=u[0]+(u[2]>>4<<8),C=u[1]+((15&u[2])<<8),A=this.coordsIndex[255-u[3]],k=A&&this.sourceCache.getTileByID(A);if(!k)return null;const j=this._coordsTextureSize,H=(1<<k.tileID.canonical.z)*j;return new l.MercatorCoordinate((k.tileID.canonical.x*j+v)/H,(k.tileID.canonical.y*j+C)/H,this.getElevation(k.tileID,v,C,j))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,u=new l.Pos3dArray,d=new l.TriangleIndexArray,m=this.meshSize,v=l.EXTENT/m,C=m*m;for(let K=0;K<=m;K++)for(let he=0;he<=m;he++)u.emplaceBack(he*v,K*v,0);for(let K=0;K<C;K+=m+1)for(let he=0;he<m;he++)d.emplaceBack(he+K,m+he+K+1,m+he+K+2),d.emplaceBack(he+K,m+he+K+2,he+K+1);const A=u.length,k=A+2*(m+1);for(const K of[0,1])for(let he=0;he<=m;he++)for(const Ie of[0,1])u.emplaceBack(he*v,K*l.EXTENT,Ie);for(let K=0;K<2*m;K+=2)d.emplaceBack(k+K,k+K+1,k+K+3),d.emplaceBack(k+K,k+K+3,k+K+2),d.emplaceBack(A+K,A+K+3,A+K+1),d.emplaceBack(A+K,A+K+2,A+K+3);const j=u.length,H=j+2*(m+1);for(const K of[0,1])for(let he=0;he<=m;he++)for(const Ie of[0,1])u.emplaceBack(K*l.EXTENT,he*v,Ie);for(let K=0;K<2*m;K+=2)d.emplaceBack(j+K,j+K+1,j+K+3),d.emplaceBack(j+K,j+K+3,j+K+2),d.emplaceBack(H+K,H+K+3,H+K+1),d.emplaceBack(H+K,H+K+2,H+K+3);return this._mesh={indexBuffer:r.createIndexBuffer(d),vertexBuffer:r.createVertexBuffer(u,Bh.members),segments:l.SegmentVector.simpleSegment(0,0,u.length,d.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*l.earthRadius/Math.pow(2,r)/5}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return u&&u.dem&&(d.minElevation=u.dem.min*this.exaggeration,d.maxElevation=u.dem.max*this.exaggeration),d}}class Go{constructor(r,u,d){this._context=r,this._size=u,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new X(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(d.texture),{id:r,fbo:u,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const ll={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ac{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new Go(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(u)),this._coordsDescendingInv={};for(const d in r.sourceCaches){this._coordsDescendingInv[d]={};const m=r.sourceCaches[d].getVisibleCoordinates();for(const v of m){const C=this.terrain.sourceCache.getTerrainCoords(v);for(const A in C)this._coordsDescendingInv[d][A]||(this._coordsDescendingInv[d][A]=[]),this._coordsDescendingInv[d][A].push(C[A])}}this._coordsDescendingInvStr={};for(const d of r._order){const m=r._layers[d],v=m.source;if(ll[m.type]&&!this._coordsDescendingInvStr[v]){this._coordsDescendingInvStr[v]={};for(const C in this._coordsDescendingInv[v])this._coordsDescendingInvStr[v][C]=this._coordsDescendingInv[v][C].map(A=>A.key).sort().join()}}for(const d of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const v=this._coordsDescendingInvStr[m][d.tileID.key];v&&v!==d.rttCoords[m]&&(d.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const u=r.type,d=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(ll[u]&&(this._prevType&&ll[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(ll[this._prevType]||ll[u]&&m){this._prevType=u;const v=this._stacks.length-1,C=this._stacks[v]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(ol(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[v]){const j=this.pool.getObjectForId(A.rtt[v].id);if(j.stamp===A.rtt[v].stamp){this.pool.useObject(j);continue}}const k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),A.rtt[v]={id:k.id,stamp:k.stamp},d.context.bindFramebuffer.set(k.fbo.framebuffer),d.context.clear({color:l.Color.transparent,stencil:0}),d.currentStencilSource=void 0;for(let j=0;j<C.length;j++){const H=d.style._layers[C[j]],K=H.source?this._coordsDescendingInv[H.source][A.tileID.key]:[A.tileID];d.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),d._renderTileClippingMasks(H,K),d.renderLayer(d,d.style.sourceCaches[H.source],H,K),H.source&&(A.rttCoords[H.source]=this._coordsDescendingInvStr[H.source][A.tileID.key])}}return ol(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ll[u]}return!1}}const br=b,Or={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Nh=g=>{g.touchstart=g.dragStart,g.touchmoveWindow=g.dragMove,g.touchend=g.dragEnd},hu={showCompass:!0,showZoom:!0,visualizePitch:!1};class lc{constructor(r,u,d=!1){this.mousedown=C=>{this.startMouse(l.extend({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),w.mousePos(this.element,C)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,w.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),v=r.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=va({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:A,bearingDegreesPerPixelMoved:k=.8})=>{const j=new lo;return new tr({clickTolerance:A,move:(H,K)=>({bearingDelta:(K.x-H.x)*k}),moveStateManager:j,enable:C,assignEvents:Nh})})({clickTolerance:m,enable:!0}),this.map=r,d&&(this.mousePitch=cs({clickTolerance:v,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:A,pitchDegreesPerPixelMoved:k=-.5})=>{const j=new lo;return new tr({clickTolerance:A,move:(H,K)=>({pitchDelta:(K.y-H.y)*k}),moveStateManager:j,enable:C,assignEvents:Nh})})({clickTolerance:v,enable:!0})),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(r,u){this.mouseRotate.dragStart(r,u),this.mousePitch&&this.mousePitch.dragStart(r,u),w.disableDrag()}startTouch(r,u){this.touchRotate.dragStart(r,u),this.touchPitch&&this.touchPitch.dragStart(r,u),w.disableDrag()}moveMouse(r,u){const d=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,u)||{};if(m&&d.setBearing(d.getBearing()+m),this.mousePitch){const{pitchDelta:v}=this.mousePitch.dragMove(r,u)||{};v&&d.setPitch(d.getPitch()+v)}}moveTouch(r,u){const d=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,u)||{};if(m&&d.setBearing(d.getBearing()+m),this.touchPitch){const{pitchDelta:v}=this.touchPitch.dragMove(r,u)||{};v&&d.setPitch(d.getPitch()+v)}}off(){const r=this.element;w.removeEventListener(r,"mousedown",this.mousedown),w.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let Zo;function uc(g,r,u){if(g=new l.LngLat(g.lng,g.lat),r){const d=new l.LngLat(g.lng-360,g.lat),m=new l.LngLat(g.lng+360,g.lat),v=u.locationPoint(g).distSqr(r);u.locationPoint(d).distSqr(r)<v?g=d:u.locationPoint(m).distSqr(r)<v&&(g=m)}for(;Math.abs(g.lng-u.center.lng)>180;){const d=u.locationPoint(g);if(d.x>=0&&d.y>=0&&d.x<=u.width&&d.y<=u.height)break;g.lng>u.center.lng?g.lng-=360:g.lng+=360}return g}const fu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ul(g,r,u){const d=g.classList;for(const m in fu)d.remove(`maplibregl-${u}-anchor-${m}`);d.add(`maplibregl-${u}-anchor-${r}`)}class du extends l.Evented{constructor(r){if(super(),this._onKeyPress=u=>{const d=u.code,m=u.charCode||u.keyCode;d!=="Space"&&d!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=u=>{const d=u.originalEvent.target,m=this._element;this._popup&&(d===m||m.contains(d))&&this.togglePopup()},this._update=u=>{if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=uc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(d=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${fu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${m} ${d}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const v=this._map.unproject(this._pos),C=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=v.distanceTo(this._lngLat)>20*C?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=l.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const u=w.createNS("http://www.w3.org/2000/svg","svg"),d=41,m=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${d}px`),u.setAttributeNS(null,"width",`${m}px`),u.setAttributeNS(null,"viewBox",`0 0 ${m} ${d}`);const v=w.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");const C=w.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const A=w.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ke of k){const nt=w.createNS("http://www.w3.org/2000/svg","ellipse");nt.setAttributeNS(null,"opacity","0.04"),nt.setAttributeNS(null,"cx","10.5"),nt.setAttributeNS(null,"cy","5.80029008"),nt.setAttributeNS(null,"rx",Ke.rx),nt.setAttributeNS(null,"ry",Ke.ry),A.appendChild(nt)}const j=w.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill",this._color);const H=w.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),j.appendChild(H);const K=w.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const he=w.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(he);const Ie=w.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ie.setAttributeNS(null,"fill","#FFFFFF");const Ce=w.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Le=w.createNS("http://www.w3.org/2000/svg","circle");Le.setAttributeNS(null,"fill","#000000"),Le.setAttributeNS(null,"opacity","0.25"),Le.setAttributeNS(null,"cx","5.5"),Le.setAttributeNS(null,"cy","5.5"),Le.setAttributeNS(null,"r","5.4999962");const Me=w.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#FFFFFF"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962"),Ce.appendChild(Le),Ce.appendChild(Me),C.appendChild(A),C.appendChild(j),C.appendChild(K),C.appendChild(Ie),C.appendChild(Ce),u.appendChild(C),u.setAttributeNS(null,"height",d*this._scale+"px"),u.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(u),this._offset=l.Point.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),ul(this._element,this._anchor,"marker"),r&&r.className)for(const u of r.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.LngLat.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.sqrt(Math.pow(13.5,2)/2);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(r){return this._offset=l.Point.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Uh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let cl=0,_a=!1;const $h={maxWidth:100,unit:"metric"};function cc(g,r,u){const d=u&&u.maxWidth||100,m=g._container.clientHeight/2,v=g.unproject([0,m]),C=g.unproject([d,m]),A=v.distanceTo(C);if(u&&u.unit==="imperial"){const k=3.2808*A;k>5280?xa(r,d,k/5280,g._getUIString("ScaleControl.Miles")):xa(r,d,k,g._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?xa(r,d,A/1852,g._getUIString("ScaleControl.NauticalMiles")):A>=1e3?xa(r,d,A/1e3,g._getUIString("ScaleControl.Kilometers")):xa(r,d,A,g._getUIString("ScaleControl.Meters"))}function xa(g,r,u,d){const m=function(v){const C=Math.pow(10,`${Math.floor(v)}`.length-1);let A=v/C;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(k){const j=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*j)/j}(A),C*A}(u);g.style.width=r*(m/u)+"px",g.innerHTML=`${m}&nbsp;${d}`}const Vh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},hc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function fc(g){if(g){if(typeof g=="number"){const r=Math.round(Math.sqrt(.5*Math.pow(g,2)));return{center:new l.Point(0,0),top:new l.Point(0,g),"top-left":new l.Point(r,r),"top-right":new l.Point(-r,r),bottom:new l.Point(0,-g),"bottom-left":new l.Point(r,-r),"bottom-right":new l.Point(-r,-r),left:new l.Point(g,0),right:new l.Point(-g,0)}}if(g instanceof l.Point||Array.isArray(g)){const r=l.Point.convert(g);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.Point.convert(g.center||[0,0]),top:l.Point.convert(g.top||[0,0]),"top-left":l.Point.convert(g["top-left"]||[0,0]),"top-right":l.Point.convert(g["top-right"]||[0,0]),bottom:l.Point.convert(g.bottom||[0,0]),"bottom-left":l.Point.convert(g["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(g["bottom-right"]||[0,0]),left:l.Point.convert(g.left||[0,0]),right:l.Point.convert(g.right||[0,0])}}return fc(new l.Point(0,0))}const Gh={extend:(g,...r)=>l.extend(g,...r),run(g){g()},logToElement(g,r=!1,u="log"){const d=window.document.getElementById(u);d&&(r&&(d.innerHTML=""),d.innerHTML+=`<br>${g}`)}},dc=b;class Nn{static get version(){return dc}static get workerCount(){return lt.workerCount}static set workerCount(r){lt.workerCount=r}static get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(r){l.config.MAX_PARALLEL_IMAGE_REQUESTS=r}static get workerUrl(){return l.config.WORKER_URL}static set workerUrl(r){l.config.WORKER_URL=r}static addProtocol(r,u){l.config.REGISTERED_PROTOCOLS[r]=u}static removeProtocol(r){delete l.config.REGISTERED_PROTOCOLS[r]}}return Nn.Map=class extends oc{constructor(g){if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(g=l.extend({},Or,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ya(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),{bearingSnap:g.bearingSnap}),this._cooperativeGesturesOnWheel=r=>{this._onCooperativeGesture(r,r[this._metaKey],1)},this._contextLost=r=>{r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=g.interactive,this._cooperativeGestures=g.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=g.maxTileCacheSize,this._maxTileCacheZoomLevels=g.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=g.collectResourceTiming,this._renderTaskQueue=new sc,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Dh,g.locale),this._clickTolerance=g.clickTolerance,this._overridePixelRatio=g.pixelRatio,this._maxCanvasSize=g.maxCanvasSize,this.transformCameraUpdate=g.transformCameraUpdate,this._imageQueueHandle=pe.addThrottleControl(()=>this.isMoving()),this._requestManager=new V(g.transformRequest),typeof g.container=="string"){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;this._resizeObserver=new ResizeObserver(u=>{r?this._trackResize&&this.resize(u)._update():r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Vo(this,g),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=g.hash&&new Qu(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,l.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=g.localIdeographFontFamily,this._validateStyle=g.validateStyle,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new Wt({customAttribution:g.customAttribution})),g.maplibreLogo&&this.addControl(new sn,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new l.Event(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new l.Event(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new l.Event("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(g,r){if(r===void 0&&(r=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=g.onAdd(this);this._controls.push(g);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(u,d.firstChild):d.appendChild(u),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(g);return r>-1&&this._controls.splice(r,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,r,u,d){return d==null&&this.terrain&&(d=this.transform.getElevation(u,this.terrain)),super.calculateCameraOptionsFromTo(g,r,u,d)}resize(g){var r;const u=this._containerDimensions(),d=u[0],m=u[1],v=this._getClampedPixelRatio(d,m);if(this._resizeCanvas(d,m,v),this.painter.resize(d,m,v),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const k=this._getClampedPixelRatio(d,m);this._resizeCanvas(d,m,k),this.painter.resize(d,m,k)}this.transform.resize(d,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(d,m);const C=!this._moving;return C&&(this.stop(),this.fire(new l.Event("movestart",g)).fire(new l.Event("move",g))),this.fire(new l.Event("resize",g)),C&&this.fire(new l.Event("moveend",g)),this}_getClampedPixelRatio(g,r){const{0:u,1:d}=this._maxCanvasSize,m=this.getPixelRatio(),v=g*m,C=r*m;return Math.min(v>u?u/v:1,C>d?d/C:1)*m}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(Pe.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(g){return this._cooperativeGestures=g,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(g){return this.transform.locationPoint(l.LngLat.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.pointLocation(l.Point.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,r,u){if(g==="mouseenter"||g==="mouseover"){let d=!1;return{layer:r,listener:u,delegates:{mousemove:v=>{const C=this.getLayer(r)?this.queryRenderedFeatures(v.point,{layers:[r]}):[];C.length?d||(d=!0,u.call(this,new rt(g,this,v.originalEvent,{features:C}))):d=!1},mouseout:()=>{d=!1}}}}if(g==="mouseleave"||g==="mouseout"){let d=!1;return{layer:r,listener:u,delegates:{mousemove:C=>{(this.getLayer(r)?this.queryRenderedFeatures(C.point,{layers:[r]}):[]).length?d=!0:d&&(d=!1,u.call(this,new rt(g,this,C.originalEvent)))},mouseout:C=>{d&&(d=!1,u.call(this,new rt(g,this,C.originalEvent)))}}}}{const d=m=>{const v=this.getLayer(r)?this.queryRenderedFeatures(m.point,{layers:[r]}):[];v.length&&(m.features=v,u.call(this,m),delete m.features)};return{layer:r,listener:u,delegates:{[g]:d}}}}on(g,r,u){if(u===void 0)return super.on(g,r);const d=this._createDelegatedListener(g,r,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(d);for(const m in d.delegates)this.on(m,d.delegates[m]);return this}once(g,r,u){if(u===void 0)return super.once(g,r);const d=this._createDelegatedListener(g,r,u);for(const m in d.delegates)this.once(m,d.delegates[m]);return this}off(g,r,u){return u===void 0?super.off(g,r):(this._delegatedListeners&&this._delegatedListeners[g]&&(d=>{const m=this._delegatedListeners[g];for(let v=0;v<m.length;v++){const C=m[v];if(C.layer===r&&C.listener===u){for(const A in C.delegates)this.off(A,C.delegates[A]);return m.splice(v,1),this}}})(),this)}queryRenderedFeatures(g,r){if(!this.style)return[];let u;const d=g instanceof l.Point||Array.isArray(g),m=d?g:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:g)||{},m instanceof l.Point||typeof m[0]=="number")u=[l.Point.convert(m)];else{const v=l.Point.convert(m[0]),C=l.Point.convert(m[1]);u=[v,new l.Point(C.x,v.y),C,new l.Point(v.x,C.y),v]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(g,r){return this.style.querySourceFeatures(g,r)}setStyle(g,r){return(r=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(g,r))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const r=this._locale[g];if(r==null)throw new Error(`Missing UI string '${g}'`);return r}_updateStyle(g,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,r));const u=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new Ps(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,r,u):this.style.loadJSON(g,r,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ps(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,r){if(typeof g=="string"){const u=this._requestManager.transformRequest(g,G.Style);l.getJSON(u,(d,m)=>{d?this.fire(new l.ErrorEvent(d)):m&&this._updateDiff(m,r)})}else typeof g=="object"&&this._updateDiff(g,r)}_updateDiff(g,r){try{this.style.setState(g,r)&&this._update(!0)}catch(u){l.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(g,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(g,r){return this._lazyInitEmptyStyle(),this.style.addSource(g,r),this._update(!0)}isSourceLoaded(g){const r=this.style&&this.style.sourceCaches[g];if(r!==void 0)return r.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){const r=this.style.sourceCaches[g.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);for(const u in this.style._layers){const d=this.style._layers[u];d.type==="hillshade"&&d.source===g.source&&l.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new jd(this.painter,r,g),this.painter.renderToTexture=new ac(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId===g.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new l.Event("terrain",{terrain:g})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const r in g){const u=g[r]._tiles;for(const d in u){const m=u[d];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(g,r,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(g,r,u)}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,r,u={}){const{pixelRatio:d=1,sdf:m=!1,stretchX:v,stretchY:C,content:A}=u;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||l.isImageBitmap(r))){if(r.width===void 0||r.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:j,data:H}=r,K=r;return this.style.addImage(g,{data:new l.RGBAImage({width:k,height:j},new Uint8Array(H)),pixelRatio:d,stretchX:v,stretchY:C,content:A,sdf:m,version:0,userImage:K}),K.onAdd&&K.onAdd(this,g),this}}{const{width:k,height:j,data:H}=l.browser.getImageData(r);this.style.addImage(g,{data:new l.RGBAImage({width:k,height:j},H),pixelRatio:d,stretchX:v,stretchY:C,content:A,sdf:m,version:0})}}updateImage(g,r){const u=this.style.getImage(g);if(!u)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||l.isImageBitmap(r)?l.browser.getImageData(r):r,{width:m,height:v,data:C}=d;if(m===void 0||v===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||v!==u.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(r instanceof HTMLImageElement||l.isImageBitmap(r));return u.data.replace(C,A),this.style.updateImage(g,u),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,r){pe.getImage(this._requestManager.transformRequest(g,G.Image),r)}listImages(){return this.style.listImages()}addLayer(g,r){return this._lazyInitEmptyStyle(),this.style.addLayer(g,r),this._update(!0)}moveLayer(g,r){return this.style.moveLayer(g,r),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}setLayerZoomRange(g,r,u){return this.style.setLayerZoomRange(g,r,u),this._update(!0)}setFilter(g,r,u={}){return this.style.setFilter(g,r,u),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,r,u,d={}){return this.style.setPaintProperty(g,r,u,d),this._update(!0)}getPaintProperty(g,r){return this.style.getPaintProperty(g,r)}setLayoutProperty(g,r,u,d={}){return this.style.setLayoutProperty(g,r,u,d),this._update(!0)}getLayoutProperty(g,r){return this.style.getLayoutProperty(g,r)}setGlyphs(g,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,r,u,d=>{d||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,r,u=>{u||this._update(!0)}),this}setLight(g,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(g,r){return this.style.setFeatureState(g,r),this._update()}removeFeatureState(g,r){return this.style.removeFeatureState(g,r),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,r=0;return this._container&&(g=this._container.clientWidth||400,r=this._container.clientHeight||300),[g,r]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map");const r=this._canvasContainer=w.create("div","maplibregl-canvas-container",g);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),d=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],d);const m=this._controlContainer=w.create("div","maplibregl-control-container",g),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{v[C]=w.create("div",`maplibregl-ctrl-${C} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let g=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(g=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${g}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(g,r,u){this._canvas.width=Math.floor(u*g),this._canvas.height=Math.floor(u*r),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const g={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:g},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});const u=this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g);if(!u){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new su(u,this.transform),I.testSupport(u)}_onCooperativeGesture(g,r,u){return!r&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,v=l.browser.now();this.style.zoomHistory.update(m,v);const C=new l.EvaluationParameters(m,{now:v,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=C.crossFadingFactor();A===1&&A===this._crossFadingFactor||(u=!0,this._crossFadingFactor=A),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),pe.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.browser.frame(g=>{l.PerformanceUtils.frame(g),this._frame=null,this._render(g)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return br}getCameraTargetElevation(){return this.transform.elevation}},Nn.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{const r=this._map.getZoom(),u=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,u)=>{const d=this._map._getUIString(`NavigationControl.${u}`);r.title=d,r.setAttribute("aria-label",d)},this.options=l.extend({},hu,g),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new lc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,r){const u=w.create("button",g,this._container);return u.type="button",u.addEventListener("click",r),u}},Nn.GeolocateControl=class extends l.Evented{constructor(g){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.Event("geolocate",r)),this._finish()}},this._updateCamera=r=>{const u=new l.LngLat(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,m=this._map.getBearing(),v=l.extend({bearing:m},this.options.fitBoundsOptions),C=Pe.fromLngLat(u,d);this._map.fitBounds(C,v,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const u=new l.LngLat(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&_a)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.Event("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new du({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new du({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}},this.options=l.extend({},Uh,g)}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,u=!1){Zo===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(d=>{Zo=d.state!=="denied",r(Zo)}).catch(()=>{Zo=!!window.navigator.geolocation,r(Zo)}):(Zo=!!window.navigator.geolocation,r(Zo)):r(Zo)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,cl=0,_a=!1}_isOutOfMapMaxBounds(g){const r=this._map.getMaxBounds(),u=g.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const g=this._map.getBounds(),r=g.getSouthEast(),u=g.getNorthEast(),d=r.distanceTo(u),m=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":cl--,_a=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),cl++,cl>1?(g={maximumAge:6e5,timeout:0},_a=!0):(g=this.options.positionOptions,_a=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Nn.AttributionControl=Wt,Nn.LogoControl=sn,Nn.ScaleControl=class{constructor(g){this._onMove=()=>{cc(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,cc(this._map,this._container,this.options)},this.options=l.extend({},$h,g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Nn.FullscreenControl=class extends l.Evented{constructor(g={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const g=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Nn.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=g}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Nn.Popup=class extends l.Evented{constructor(g){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=uc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const u=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let d=this.options.anchor;const m=fc(this.options.offset);if(!d){const C=this._container.offsetWidth,A=this._container.offsetHeight;let k;k=u.y+m.bottom.y<A?["top"]:u.y>this._map.transform.height-A?["bottom"]:[],u.x<C/2?k.push("left"):u.x>this._map.transform.width-C/2&&k.push("right"),d=k.length===0?"bottom":k.join("-")}const v=u.add(m[d]).round();w.setTransform(this._container,`${fu[d]} translate(${v.x}px,${v.y}px)`),ul(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=l.extend(Object.create(Vh),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=l.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const r=document.createDocumentFragment(),u=document.createElement("body");let d;for(u.innerHTML=g;d=u.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){this._container&&this._container.classList.add(g)}removeClassName(g){this._container&&this._container.classList.remove(g)}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(hc);g&&g.focus()}},Nn.Marker=du,Nn.Style=Ps,Nn.LngLat=l.LngLat,Nn.LngLatBounds=Pe,Nn.Point=l.Point,Nn.MercatorCoordinate=l.MercatorCoordinate,Nn.Evented=l.Evented,Nn.AJAXError=l.AJAXError,Nn.config=l.config,Nn.CanvasSource=Ye,Nn.GeoJSONSource=vt,Nn.ImageSource=ht,Nn.RasterDEMTileSource=ut,Nn.RasterTileSource=it,Nn.VectorTileSource=Ge,Nn.VideoSource=bt,Nn.setRTLTextPlugin=l.setRTLTextPlugin,Nn.getRTLTextPluginStatus=l.getRTLTextPluginStatus,Nn.prewarm=function(){D().acquire(De)},Nn.clearPrewarmedResources=function(){const g=L;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(De),L=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Gh.extend(Nn,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),Nn});var y=c;return y})})($T);var GT=$T.exports;const ZT=yd(GT),m3=VP({__proto__:null,default:ZT},[GT]);const g3="modulepreload",y3=function(e){return"/osm-address-editor-vite/"+e},Nb={},v3=function(t,i,a){if(!i||i.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(i.map(f=>{if(f=y3(f),f in Nb)return;Nb[f]=!0;const y=f.endsWith(".css"),l=y?'[rel="stylesheet"]':"";if(!!a)for(let I=c.length-1;I>=0;I--){const E=c[I];if(E.href===f&&(!y||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${l}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":g3,y||(w.as="script",w.crossOrigin=""),w.href=f,document.head.appendChild(w),y)return new Promise((I,E)=>{w.addEventListener("load",I),w.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})})).then(()=>t()).catch(f=>{const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=f,window.dispatchEvent(y),!y.defaultPrevented)throw f})},_3=wt.createContext(null);function x3(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function Ub(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function $b(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const w3=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Vb(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{const c=t[a.ref];let f=null;if("interactive"in a&&(f={...a},delete f.interactive),c){f=f||{...a},delete f.ref;for(const y of w3)y in c&&(f[y]=c[y])}return f||a});return{...e,layers:i}}function b3(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,f=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===f}function Jo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Jo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Jo(e[c],t[c]))return!1;return!0}return!1}const Gb={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Qy={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Zb={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},E3=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],S3=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class fh{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const f=this.props[Zb[c.type]];f&&f(c)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const f=this.props[Gb[c.type]];f&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),f(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const f=this.props[Qy[c.type]];f&&f(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),f=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||f&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=fh.savedMaps.pop();if(!a)return null;const c=a.map,f=c.getContainer();for(i.className=f.className;f.childNodes.length>0;)i.appendChild(f.childNodes[0]);c._container=i;const y=c._resizeObserver;y&&(y.disconnect(),y.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:l}=t;return l&&(l.bounds?c.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):a._updateViewState(l,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,a={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||T3()||null,container:t,style:Vb(i.mapStyle)},c=a.initialViewState||a.viewState||a;if(Object.assign(a,{center:[c.longitude||0,c.latitude||0],zoom:c.zoom||0,pitch:c.pitch||0,bearing:c.bearing||0}),i.gl){const w=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=w,i.gl)}const f=new this._MapClass(a);c.padding&&f.setPadding(c.padding),i.cursor&&(f.getCanvas().style.cursor=i.cursor),this._createShadowTransform(f);const y=f._render;f._render=w=>{this._inRender=!0,y.call(f,w),this._inRender=!1};const l=f._renderTaskQueue.run;f._renderTaskQueue.run=w=>{l.call(f._renderTaskQueue,w),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const b=f.fire;f.fire=this._fireEvent.bind(this,b),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>this._updateStyleComponents(this.props,{})),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const w in Gb)f.on(w,this._onPointerEvent);for(const w in Qy)f.on(w,this._onCameraEvent);for(const w in Zb)f.on(w,this._onEvent);this._map=f}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),fh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=x3(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:f,pitch:y,bearing:l}=c,b=a.isMoving();b&&(c.cameraElevationReference="sea");const w=$b(c,{...Ub(a.transform),...t});if(b&&(c.cameraElevationReference="ground"),w&&i){const I=this._deferredEvents;I.move=!0,I.zoom||(I.zoom=f!==c.zoom),I.rotate||(I.rotate=l!==c.bearing),I.pitch||(I.pitch=y!==c.pitch)}return b||$b(a.transform,t),w}_updateSettings(t,i){const a=this._map;let c=!1;for(const f of E3)f in t&&!Jo(t[f],i[f])&&(c=!0,a[`set${f[0].toUpperCase()}${f.slice(1)}`](t[f]));return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==i.mapStyle){const a={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(a.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(Vb(t.mapStyle),a),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.style.loaded()&&("light"in t&&!Jo(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&!Jo(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&!Jo(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){const a=this._map;let c=!1;for(const f of S3){const y=t[f];Jo(y,i[f])||(c=!0,y?a[f].enable(y):a[f].disable())}return c}_queryRenderedFeatures(t){const i=this._map,{interactiveLayerIds:a=[]}=this.props;try{return i.queryRenderedFeatures(t,{layers:a.filter(i.getLayer.bind(i))})}catch{return[]}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const f=t.type,y=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,l=this._queryRenderedFeatures(t.point),b=l.length>0;!b&&y&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,b&&!y&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=f}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,f=c.transform,y=typeof i=="string"?i:i.type;return y==="move"&&this._updateViewState(this.props,!1),y in Qy&&(typeof i=="object"&&(i.viewState=Ub(f)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=f,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=i}}}fh.savedMaps=[];function T3(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const C3=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function I3(e,t){if(!e)return null;const i=e.map,a={getMap:()=>i,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:c=>e.transform.locationPoint(t.LngLat.convert(c)),unproject:c=>e.transform.pointLocation(t.Point.convert(c)),queryTerrainElevation:(c,f)=>{const y=i.transform;i.transform=e.transform;const l=i.queryTerrainElevation(c,f);return i.transform=y,l}};for(const c of A3(i))!(c in a)&&!C3.includes(c)&&(a[c]=i[c].bind(i));return a}function A3(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const P3=typeof document<"u"?wt.useLayoutEffect:wt.useEffect,M3=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function k3(e,t){for(const i of M3)i in t&&(e[i]=t[i]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,i=>{i&&console.error(i)},!1)}const xh=wt.createContext(null),z3={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},h1=wt.forwardRef((e,t)=>{const i=wt.useContext(_3),[a,c]=wt.useState(null),f=wt.useRef(),{current:y}=wt.useRef({mapLib:null,map:null});wt.useEffect(()=>{const w=e.mapLib;let I=!0,E;return Promise.resolve(w||v3(()=>Promise.resolve().then(()=>m3),void 0)).then(z=>{if(I){if(z.Map||(z=z.default),!z||!z.Map)throw new Error("Invalid mapLib");if(k3(z,e),!z.supported||z.supported(e))e.reuseMaps&&(E=fh.reuse(e,f.current)),E||(E=new fh(z.Map,e,f.current)),y.map=I3(E,z),y.mapLib=z,c(E),i==null||i.onMapMount(y.map,e.id);else throw new Error("Map is not supported by this browser")}}).catch(z=>{e.onError({type:"error",target:null,originalEvent:null,error:z})}),()=>{I=!1,E&&(i==null||i.onMapUnmount(e.id),e.reuseMaps?E.recycle():E.destroy())}},[]),P3(()=>{a&&a.setProps(e)}),wt.useImperativeHandle(t,()=>y.map,[a]);const l=wt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),b={height:"100%"};return wt.createElement("div",{id:e.id,ref:f,style:l},a&&wt.createElement(xh.Provider,{value:y},wt.createElement("div",{"mapboxgl-children":"",style:b},e.children)))});h1.displayName="Map";h1.defaultProps=z3;const L3=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Bu(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!L3.test(a)?i[a]=`${c}px`:i[a]=c}}const R3={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function WT(e){const{map:t,mapLib:i}=wt.useContext(xh),a=wt.useRef({props:e});a.current.props=e;const c=wt.useMemo(()=>{let f=!1;wt.Children.forEach(e.children,b=>{b&&(f=!0)});const y={...e,element:f?document.createElement("div"):null},l=new i.Marker(y).setLngLat([e.longitude,e.latitude]);return l.getElement().addEventListener("click",b=>{var w,I;(I=(w=a.current.props).onClick)===null||I===void 0||I.call(w,{type:"click",target:l,originalEvent:b})}),l.on("dragstart",b=>{var w,I;const E=b;E.lngLat=c.getLngLat(),(I=(w=a.current.props).onDragStart)===null||I===void 0||I.call(w,E)}),l.on("drag",b=>{var w,I;const E=b;E.lngLat=c.getLngLat(),(I=(w=a.current.props).onDrag)===null||I===void 0||I.call(w,E)}),l.on("dragend",b=>{var w,I;const E=b;E.lngLat=c.getLngLat(),(I=(w=a.current.props).onDragEnd)===null||I===void 0||I.call(w,E)}),l},[]);return wt.useEffect(()=>(c.addTo(t.getMap()),()=>{c.remove()}),[]),wt.useEffect(()=>{Bu(c.getElement(),e.style)},[e.style]),(c.getLngLat().lng!==e.longitude||c.getLngLat().lat!==e.latitude)&&c.setLngLat([e.longitude,e.latitude]),e.offset&&!b3(c.getOffset(),e.offset)&&c.setOffset(e.offset),c.isDraggable()!==e.draggable&&c.setDraggable(e.draggable),c.getRotation()!==e.rotation&&c.setRotation(e.rotation),c.getRotationAlignment()!==e.rotationAlignment&&c.setRotationAlignment(e.rotationAlignment),c.getPitchAlignment()!==e.pitchAlignment&&c.setPitchAlignment(e.pitchAlignment),c.getPopup()!==e.popup&&c.setPopup(e.popup),c1.createPortal(e.children,c.getElement())}WT.defaultProps=R3;const O3=wt.memo(WT);function Wb(e){return new Set(e?e.trim().split(/\s+/):[])}function F3(e){const{map:t,mapLib:i}=wt.useContext(xh),a=wt.useMemo(()=>document.createElement("div"),[]),c=wt.useRef({props:e});c.current.props=e;const f=wt.useMemo(()=>{const y={...e},l=new i.Popup(y).setLngLat([e.longitude,e.latitude]);return l.once("open",b=>{var w,I;(I=(w=c.current.props).onOpen)===null||I===void 0||I.call(w,b)}),l},[]);if(wt.useEffect(()=>{const y=l=>{var b,w;(w=(b=c.current.props).onClose)===null||w===void 0||w.call(b,l)};return f.on("close",y),f.setDOMContent(a).addTo(t.getMap()),()=>{f.off("close",y),f.isOpen()&&f.remove()}},[]),wt.useEffect(()=>{Bu(f.getElement(),e.style)},[e.style]),f.isOpen()&&((f.getLngLat().lng!==e.longitude||f.getLngLat().lat!==e.latitude)&&f.setLngLat([e.longitude,e.latitude]),e.offset&&!Jo(f.options.offset,e.offset)&&f.setOffset(e.offset),(f.options.anchor!==e.anchor||f.options.maxWidth!==e.maxWidth)&&(f.options.anchor=e.anchor,f.setMaxWidth(e.maxWidth)),f.options.className!==e.className)){const y=Wb(f.options.className),l=Wb(e.className);for(const b of y)l.has(b)||f.removeClassName(b);for(const b of l)y.has(b)||f.addClassName(b);f.options.className=e.className}return c1.createPortal(e.children,a)}wt.memo(F3);function Ed(e,t,i,a){const c=wt.useContext(xh),f=wt.useMemo(()=>e(c),[]);return wt.useEffect(()=>{const y=a||i||t,l=typeof t=="function"&&typeof i=="function"?t:null,b=typeof i=="function"?i:typeof t=="function"?t:null,{map:w}=c;return w.hasControl(f)||(w.addControl(f,y==null?void 0:y.position),l&&l(c)),()=>{b&&b(c),w.hasControl(f)&&w.removeControl(f)}},[]),f}function j3(e){const t=Ed(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return wt.useEffect(()=>{Bu(t._container,e.style)},[e.style]),null}wt.memo(j3);function D3(e){const t=Ed(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return wt.useEffect(()=>{Bu(t._controlContainer,e.style)},[e.style]),null}wt.memo(D3);const HT=wt.forwardRef((e,t)=>{const i=wt.useRef({props:e}),a=Ed(({mapLib:c})=>{const f=new c.GeolocateControl(e),y=f._setupUI;return f._setupUI=l=>{f._container.hasChildNodes()||y(l)},f.on("geolocate",l=>{var b,w;(w=(b=i.current.props).onGeolocate)===null||w===void 0||w.call(b,l)}),f.on("error",l=>{var b,w;(w=(b=i.current.props).onError)===null||w===void 0||w.call(b,l)}),f.on("outofmaxbounds",l=>{var b,w;(w=(b=i.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,l)}),f.on("trackuserlocationstart",l=>{var b,w;(w=(b=i.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,l)}),f.on("trackuserlocationend",l=>{var b,w;(w=(b=i.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,l)}),f},{position:e.position});return i.current.props=e,wt.useImperativeHandle(t,()=>({trigger:()=>a.trigger()}),[]),wt.useEffect(()=>{Bu(a._container,e.style)},[e.style]),null});HT.displayName="GeolocateControl";const B3=wt.memo(HT);function N3(e){const t=Ed(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return wt.useEffect(()=>{Bu(t._container,e.style)},[e.style]),null}const U3=wt.memo(N3),$3={unit:"metric",maxWidth:100};function XT(e){const t=Ed(({mapLib:i})=>new i.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),wt.useEffect(()=>{Bu(t._container,e.style)},[e.style]),null}XT.defaultProps=$3;wt.memo(XT);function Im(e,t){if(!e)throw new Error(t)}let V3=0;function G3(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function Z3(e,t,i){Im(t.id===i.id,"source id changed"),Im(t.type===i.type,"source type changed");let a="",c=0;for(const y in t)y!=="children"&&y!=="id"&&!Jo(i[y],t[y])&&(a=y,c++);if(!c)return;const f=t.type;if(f==="geojson")e.setData(t.data);else if(f==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if((f==="canvas"||f==="video")&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if(f==="vector"&&"setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function W3(e){const t=wt.useContext(xh).map.getMap(),i=wt.useRef(e),[,a]=wt.useState(0),c=wt.useMemo(()=>e.id||`jsx-source-${V3++}`,[]);wt.useEffect(()=>{if(t){const y=()=>setTimeout(()=>a(l=>l+1),0);return t.on("styledata",y),y(),()=>{var l;if(t.off("styledata",y),t.style&&t.style._loaded&&t.getSource(c)){const b=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(b)for(const w of b)w.source===c&&t.removeLayer(w.id);t.removeSource(c)}}}},[t]);let f=t&&t.style&&t.getSource(c);return f?Z3(f,e,i.current):f=G3(t,c,e),i.current=e,f&&wt.Children.map(e.children,y=>y&&wt.cloneElement(y,{source:c}))||null}function H3(e,t,i,a){if(Im(i.id===a.id,"layer id changed"),Im(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:f={},filter:y,minzoom:l,maxzoom:b,beforeId:w}=i;if(w!==a.beforeId&&e.moveLayer(t,w),c!==a.layout){const I=a.layout||{};for(const E in c)Jo(c[E],I[E])||e.setLayoutProperty(t,E,c[E]);for(const E in I)c.hasOwnProperty(E)||e.setLayoutProperty(t,E,void 0)}if(f!==a.paint){const I=a.paint||{};for(const E in f)Jo(f[E],I[E])||e.setPaintProperty(t,E,f[E]);for(const E in I)f.hasOwnProperty(E)||e.setPaintProperty(t,E,void 0)}Jo(y,a.filter)||e.setFilter(t,y),(l!==a.minzoom||b!==a.maxzoom)&&e.setLayerZoomRange(t,l,b)}function X3(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let q3=0;function K3(e){const t=wt.useContext(xh).map.getMap(),i=wt.useRef(e),[,a]=wt.useState(0),c=wt.useMemo(()=>e.id||`jsx-layer-${q3++}`,[]);if(wt.useEffect(()=>{if(t){const y=()=>a(l=>l+1);return t.on("styledata",y),y(),()=>{t.off("styledata",y),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{H3(t,c,e,i.current)}catch(y){console.warn(y)}else X3(t,c,e);return i.current=e,null}/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function Hb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Kt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Hb(Object(i),!0).forEach(function(a){Q3(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Hb(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Am(e){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(e)}function Y3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xb(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function J3(e,t,i){return t&&Xb(e.prototype,t),i&&Xb(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function Q3(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function f1(e,t){return t4(e)||r4(e,t)||qT(e,t)||o4()}function bg(e){return e4(e)||n4(e)||qT(e)||i4()}function e4(e){if(Array.isArray(e))return Sv(e)}function t4(e){if(Array.isArray(e))return e}function n4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function r4(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],c=!0,f=!1,y,l;try{for(i=i.call(e);!(c=(y=i.next()).done)&&(a.push(y.value),!(t&&a.length===t));c=!0);}catch(b){f=!0,l=b}finally{try{!c&&i.return!=null&&i.return()}finally{if(f)throw l}}return a}}function qT(e,t){if(e){if(typeof e=="string")return Sv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Sv(e,t)}}function Sv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function i4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qb=function(){},d1={},KT={},YT=null,JT={mark:qb,measure:qb};try{typeof window<"u"&&(d1=window),typeof document<"u"&&(KT=document),typeof MutationObserver<"u"&&(YT=MutationObserver),typeof performance<"u"&&(JT=performance)}catch{}var s4=d1.navigator||{},Kb=s4.userAgent,Yb=Kb===void 0?"":Kb,Dl=d1,vr=KT,Jb=YT,Ep=JT;Dl.document;var Ua=!!vr.documentElement&&!!vr.head&&typeof vr.addEventListener=="function"&&typeof vr.createElement=="function",QT=~Yb.indexOf("MSIE")||~Yb.indexOf("Trident/"),Fa="___FONT_AWESOME___",Tv=16,eC="fa",tC="svg-inline--fa",Lu="data-fa-i2svg",Cv="data-fa-pseudo-element",a4="data-fa-pseudo-element-pending",p1="data-prefix",m1="data-icon",Qb="fontawesome-i2svg",l4="async",u4=["HTML","HEAD","STYLE","SCRIPT"],nC=function(){try{return!0}catch{return!1}}(),g1={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},Pm={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},rC={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},c4={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},h4=/fa[srltdbk\-\ ]/,iC="fa-layers-text",f4=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,d4={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},oC=[1,2,3,4,5,6,7,8,9,10],p4=oC.concat([11,12,13,14,15,16,17,18,19,20]),m4=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Tu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},g4=[].concat(bg(Object.keys(Pm)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Tu.GROUP,Tu.SWAP_OPACITY,Tu.PRIMARY,Tu.SECONDARY]).concat(oC.map(function(e){return"".concat(e,"x")})).concat(p4.map(function(e){return"w-".concat(e)})),sC=Dl.FontAwesomeConfig||{};function y4(e){var t=vr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function v4(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(vr&&typeof vr.querySelector=="function"){var _4=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];_4.forEach(function(e){var t=f1(e,2),i=t[0],a=t[1],c=v4(y4(i));c!=null&&(sC[a]=c)})}var x4={familyPrefix:eC,styleDefault:"solid",replacementClass:tC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},$f=Kt(Kt({},x4),sC);$f.autoReplaceSvg||($f.observeMutations=!1);var gn={};Object.keys($f).forEach(function(e){Object.defineProperty(gn,e,{enumerable:!0,set:function(i){$f[e]=i,Hp.forEach(function(a){return a(gn)})},get:function(){return $f[e]}})});Dl.FontAwesomeConfig=gn;var Hp=[];function w4(e){return Hp.push(e),function(){Hp.splice(Hp.indexOf(e),1)}}var yl=Tv,ta={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function b4(e){if(!(!e||!Ua)){var t=vr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=vr.head.childNodes,a=null,c=i.length-1;c>-1;c--){var f=i[c],y=(f.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(y)>-1&&(a=f)}return vr.head.insertBefore(t,a),e}}var E4="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function fd(){for(var e=12,t="";e-- >0;)t+=E4[Math.random()*62|0];return t}function wh(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function y1(e){return e.classList?wh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function aC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function S4(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(aC(e[i]),'" ')},"").trim()}function Eg(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function v1(e){return e.size!==ta.size||e.x!==ta.x||e.y!==ta.y||e.rotate!==ta.rotate||e.flipX||e.flipY}function T4(e){var t=e.transform,i=e.containerWidth,a=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},f="translate(".concat(t.x*32,", ").concat(t.y*32,") "),y="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),b={transform:"".concat(f," ").concat(y," ").concat(l)},w={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:b,path:w}}function C4(e){var t=e.transform,i=e.width,a=i===void 0?Tv:i,c=e.height,f=c===void 0?Tv:c,y=e.startCentered,l=y===void 0?!1:y,b="";return l&&QT?b+="translate(".concat(t.x/yl-a/2,"em, ").concat(t.y/yl-f/2,"em) "):l?b+="translate(calc(-50% + ".concat(t.x/yl,"em), calc(-50% + ").concat(t.y/yl,"em)) "):b+="translate(".concat(t.x/yl,"em, ").concat(t.y/yl,"em) "),b+="scale(".concat(t.size/yl*(t.flipX?-1:1),", ").concat(t.size/yl*(t.flipY?-1:1),") "),b+="rotate(".concat(t.rotate,"deg) "),b}var I4=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function lC(){var e=eC,t=tC,i=gn.familyPrefix,a=gn.replacementClass,c=I4;if(i!==e||a!==t){var f=new RegExp("\\.".concat(e,"\\-"),"g"),y=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");c=c.replace(f,".".concat(i,"-")).replace(y,"--".concat(i,"-")).replace(l,".".concat(a))}return c}var e2=!1;function e0(){gn.autoAddCss&&!e2&&(b4(lC()),e2=!0)}var A4={mixout:function(){return{dom:{css:lC,insertCss:e0}}},hooks:function(){return{beforeDOMElementCreation:function(){e0()},beforeI2svg:function(){e0()}}}},ja=Dl||{};ja[Fa]||(ja[Fa]={});ja[Fa].styles||(ja[Fa].styles={});ja[Fa].hooks||(ja[Fa].hooks={});ja[Fa].shims||(ja[Fa].shims=[]);var bs=ja[Fa],uC=[],P4=function e(){vr.removeEventListener("DOMContentLoaded",e),Mm=1,uC.map(function(t){return t()})},Mm=!1;Ua&&(Mm=(vr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(vr.readyState),Mm||vr.addEventListener("DOMContentLoaded",P4));function M4(e){Ua&&(Mm?setTimeout(e,0):uC.push(e))}function Sd(e){var t=e.tag,i=e.attributes,a=i===void 0?{}:i,c=e.children,f=c===void 0?[]:c;return typeof e=="string"?aC(e):"<".concat(t," ").concat(S4(a),">").concat(f.map(Sd).join(""),"</").concat(t,">")}function t2(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var k4=function(t,i){return function(a,c,f,y){return t.call(i,a,c,f,y)}},t0=function(t,i,a,c){var f=Object.keys(t),y=f.length,l=c!==void 0?k4(i,c):i,b,w,I;for(a===void 0?(b=1,I=t[f[0]]):(b=0,I=a);b<y;b++)w=f[b],I=l(I,t[w],w,t);return I};function z4(e){for(var t=[],i=0,a=e.length;i<a;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){var f=e.charCodeAt(i++);(f&64512)==56320?t.push(((c&1023)<<10)+(f&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function Iv(e){var t=z4(e);return t.length===1?t[0].toString(16):null}function L4(e,t){var i=e.length,a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function n2(e){return Object.keys(e).reduce(function(t,i){var a=e[i],c=!!a.icon;return c?t[a.iconName]=a.icon:t[i]=a,t},{})}function Av(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,c=a===void 0?!1:a,f=n2(t);typeof bs.hooks.addPack=="function"&&!c?bs.hooks.addPack(e,n2(t)):bs.styles[e]=Kt(Kt({},bs.styles[e]||{}),f),e==="fas"&&Av("fa",t)}var Vf=bs.styles,R4=bs.shims,O4=Object.values(rC),_1=null,cC={},hC={},fC={},dC={},pC={},F4=Object.keys(g1);function j4(e){return~g4.indexOf(e)}function D4(e,t){var i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!j4(c)?c:null}var mC=function(){var t=function(f){return t0(Vf,function(y,l,b){return y[b]=t0(l,f,{}),y},{})};cC=t(function(c,f,y){if(f[3]&&(c[f[3]]=y),f[2]){var l=f[2].filter(function(b){return typeof b=="number"});l.forEach(function(b){c[b.toString(16)]=y})}return c}),hC=t(function(c,f,y){if(c[y]=y,f[2]){var l=f[2].filter(function(b){return typeof b=="string"});l.forEach(function(b){c[b]=y})}return c}),pC=t(function(c,f,y){var l=f[2];return c[y]=y,l.forEach(function(b){c[b]=y}),c});var i="far"in Vf||gn.autoFetchSvg,a=t0(R4,function(c,f){var y=f[0],l=f[1],b=f[2];return l==="far"&&!i&&(l="fas"),typeof y=="string"&&(c.names[y]={prefix:l,iconName:b}),typeof y=="number"&&(c.unicodes[y.toString(16)]={prefix:l,iconName:b}),c},{names:{},unicodes:{}});fC=a.names,dC=a.unicodes,_1=Sg(gn.styleDefault)};w4(function(e){_1=Sg(e.styleDefault)});mC();function x1(e,t){return(cC[e]||{})[t]}function B4(e,t){return(hC[e]||{})[t]}function Zc(e,t){return(pC[e]||{})[t]}function gC(e){return fC[e]||{prefix:null,iconName:null}}function N4(e){var t=dC[e],i=x1("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function Bl(){return _1}var w1=function(){return{prefix:null,iconName:null,rest:[]}};function Sg(e){var t=g1[e],i=Pm[e]||Pm[t],a=e in bs.styles?e:null;return i||a||null}function Tg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.skipLookups,a=i===void 0?!1:i,c=null,f=e.reduce(function(y,l){var b=D4(gn.familyPrefix,l);if(Vf[l]?(l=O4.includes(l)?c4[l]:l,c=l,y.prefix=l):F4.indexOf(l)>-1?(c=l,y.prefix=Sg(l)):b?y.iconName=b:l!==gn.replacementClass&&y.rest.push(l),!a&&y.prefix&&y.iconName){var w=c==="fa"?gC(y.iconName):{},I=Zc(y.prefix,y.iconName);w.prefix&&(c=null),y.iconName=w.iconName||I||y.iconName,y.prefix=w.prefix||y.prefix,y.prefix==="far"&&!Vf.far&&Vf.fas&&!gn.autoFetchSvg&&(y.prefix="fas")}return y},w1());return(f.prefix==="fa"||c==="fa")&&(f.prefix=Bl()||"fas"),f}var U4=function(){function e(){Y3(this,e),this.definitions={}}return J3(e,[{key:"add",value:function(){for(var i=this,a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];var y=c.reduce(this._pullDefinitions,{});Object.keys(y).forEach(function(l){i.definitions[l]=Kt(Kt({},i.definitions[l]||{}),y[l]),Av(l,y[l]);var b=rC[l];b&&Av(b,y[l]),mC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var c=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(c).map(function(f){var y=c[f],l=y.prefix,b=y.iconName,w=y.icon,I=w[2];i[l]||(i[l]={}),I.length>0&&I.forEach(function(E){typeof E=="string"&&(i[l][E]=w)}),i[l][b]=w}),i}}]),e}(),r2=[],Wc={},nh={},$4=Object.keys(nh);function V4(e,t){var i=t.mixoutsTo;return r2=e,Wc={},Object.keys(nh).forEach(function(a){$4.indexOf(a)===-1&&delete nh[a]}),r2.forEach(function(a){var c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(function(y){typeof c[y]=="function"&&(i[y]=c[y]),Am(c[y])==="object"&&Object.keys(c[y]).forEach(function(l){i[y]||(i[y]={}),i[y][l]=c[y][l]})}),a.hooks){var f=a.hooks();Object.keys(f).forEach(function(y){Wc[y]||(Wc[y]=[]),Wc[y].push(f[y])})}a.provides&&a.provides(nh)}),i}function Pv(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var f=Wc[e]||[];return f.forEach(function(y){t=y.apply(null,[t].concat(a))}),t}function Ru(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=Wc[e]||[];c.forEach(function(f){f.apply(null,i)})}function Da(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return nh[e]?nh[e].apply(null,t):void 0}function Mv(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||Bl();if(t)return t=Zc(i,t)||t,t2(yC.definitions,i,t)||t2(bs.styles,i,t)}var yC=new U4,G4=function(){gn.autoReplaceSvg=!1,gn.observeMutations=!1,Ru("noAuto")},Z4={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ua?(Ru("beforeI2svg",t),Da("pseudoElements2svg",t),Da("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;gn.autoReplaceSvg===!1&&(gn.autoReplaceSvg=!0),gn.observeMutations=!0,M4(function(){H4({autoReplaceSvgRoot:i}),Ru("watch",t)})}},W4={icon:function(t){if(t===null)return null;if(Am(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Zc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=Sg(t[0]);return{prefix:a,iconName:Zc(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(gn.familyPrefix,"-"))>-1||t.match(h4))){var c=Tg(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||Bl(),iconName:Zc(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var f=Bl();return{prefix:f,iconName:Zc(f,t)||t}}}},jo={noAuto:G4,config:gn,dom:Z4,parse:W4,library:yC,findIconDefinition:Mv,toHtml:Sd},H4=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?vr:i;(Object.keys(bs.styles).length>0||gn.autoFetchSvg)&&Ua&&gn.autoReplaceSvg&&jo.dom.i2svg({node:a})};function Cg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return Sd(a)})}}),Object.defineProperty(e,"node",{get:function(){if(Ua){var a=vr.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function X4(e){var t=e.children,i=e.main,a=e.mask,c=e.attributes,f=e.styles,y=e.transform;if(v1(y)&&i.found&&!a.found){var l=i.width,b=i.height,w={x:l/b/2,y:.5};c.style=Eg(Kt(Kt({},f),{},{"transform-origin":"".concat(w.x+y.x/16,"em ").concat(w.y+y.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function q4(e){var t=e.prefix,i=e.iconName,a=e.children,c=e.attributes,f=e.symbol,y=f===!0?"".concat(t,"-").concat(gn.familyPrefix,"-").concat(i):f;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Kt(Kt({},c),{},{id:y}),children:a}]}]}function b1(e){var t=e.icons,i=t.main,a=t.mask,c=e.prefix,f=e.iconName,y=e.transform,l=e.symbol,b=e.title,w=e.maskId,I=e.titleId,E=e.extra,z=e.watchable,O=z===void 0?!1:z,Q=a.found?a:i,Y=Q.width,pe=Q.height,G=c==="fak",V=[gn.replacementClass,f?"".concat(gn.familyPrefix,"-").concat(f):""].filter(function(Z){return E.classes.indexOf(Z)===-1}).filter(function(Z){return Z!==""||!!Z}).concat(E.classes).join(" "),N={children:[],attributes:Kt(Kt({},E.attributes),{},{"data-prefix":c,"data-icon":f,class:V,role:E.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Y," ").concat(pe)})},oe=G&&!~E.classes.indexOf("fa-fw")?{width:"".concat(Y/pe*16*.0625,"em")}:{};O&&(N.attributes[Lu]=""),b&&(N.children.push({tag:"title",attributes:{id:N.attributes["aria-labelledby"]||"title-".concat(I||fd())},children:[b]}),delete N.attributes.title);var W=Kt(Kt({},N),{},{prefix:c,iconName:f,main:i,mask:a,maskId:w,transform:y,symbol:l,styles:Kt(Kt({},oe),E.styles)}),B=a.found&&i.found?Da("generateAbstractMask",W)||{children:[],attributes:{}}:Da("generateAbstractIcon",W)||{children:[],attributes:{}},S=B.children,M=B.attributes;return W.children=S,W.attributes=M,l?q4(W):X4(W)}function i2(e){var t=e.content,i=e.width,a=e.height,c=e.transform,f=e.title,y=e.extra,l=e.watchable,b=l===void 0?!1:l,w=Kt(Kt(Kt({},y.attributes),f?{title:f}:{}),{},{class:y.classes.join(" ")});b&&(w[Lu]="");var I=Kt({},y.styles);v1(c)&&(I.transform=C4({transform:c,startCentered:!0,width:i,height:a}),I["-webkit-transform"]=I.transform);var E=Eg(I);E.length>0&&(w.style=E);var z=[];return z.push({tag:"span",attributes:w,children:[t]}),f&&z.push({tag:"span",attributes:{class:"sr-only"},children:[f]}),z}function K4(e){var t=e.content,i=e.title,a=e.extra,c=Kt(Kt(Kt({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),f=Eg(a.styles);f.length>0&&(c.style=f);var y=[];return y.push({tag:"span",attributes:c,children:[t]}),i&&y.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),y}var n0=bs.styles;function kv(e){var t=e[0],i=e[1],a=e.slice(4),c=f1(a,1),f=c[0],y=null;return Array.isArray(f)?y={tag:"g",attributes:{class:"".concat(gn.familyPrefix,"-").concat(Tu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(gn.familyPrefix,"-").concat(Tu.SECONDARY),fill:"currentColor",d:f[0]}},{tag:"path",attributes:{class:"".concat(gn.familyPrefix,"-").concat(Tu.PRIMARY),fill:"currentColor",d:f[1]}}]}:y={tag:"path",attributes:{fill:"currentColor",d:f}},{found:!0,width:t,height:i,icon:y}}var Y4={found:!1,width:512,height:512};function J4(e,t){!nC&&!gn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function zv(e,t){var i=t;return t==="fa"&&gn.styleDefault!==null&&(t=Bl()),new Promise(function(a,c){if(Da("missingIconAbstract"),i==="fa"){var f=gC(e)||{};e=f.iconName||e,t=f.prefix||t}if(e&&t&&n0[t]&&n0[t][e]){var y=n0[t][e];return a(kv(y))}J4(e,t),a(Kt(Kt({},Y4),{},{icon:gn.showMissingIcons&&e?Da("missingIconAbstract")||{}:{}}))})}var o2=function(){},Lv=gn.measurePerformance&&Ep&&Ep.mark&&Ep.measure?Ep:{mark:o2,measure:o2},Tf='FA "6.0.0"',Q4=function(t){return Lv.mark("".concat(Tf," ").concat(t," begins")),function(){return vC(t)}},vC=function(t){Lv.mark("".concat(Tf," ").concat(t," ends")),Lv.measure("".concat(Tf," ").concat(t),"".concat(Tf," ").concat(t," begins"),"".concat(Tf," ").concat(t," ends"))},E1={begin:Q4,end:vC},Xp=function(){};function s2(e){var t=e.getAttribute?e.getAttribute(Lu):null;return typeof t=="string"}function ez(e){var t=e.getAttribute?e.getAttribute(p1):null,i=e.getAttribute?e.getAttribute(m1):null;return t&&i}function tz(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(gn.replacementClass)}function nz(){if(gn.autoReplaceSvg===!0)return qp.replace;var e=qp[gn.autoReplaceSvg];return e||qp.replace}function rz(e){return vr.createElementNS("http://www.w3.org/2000/svg",e)}function iz(e){return vr.createElement(e)}function _C(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?e.tag==="svg"?rz:iz:i;if(typeof e=="string")return vr.createTextNode(e);var c=a(e.tag);Object.keys(e.attributes||[]).forEach(function(y){c.setAttribute(y,e.attributes[y])});var f=e.children||[];return f.forEach(function(y){c.appendChild(_C(y,{ceFn:a}))}),c}function oz(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var qp={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(_C(c),i)}),i.getAttribute(Lu)===null&&gn.keepOriginalSource){var a=vr.createComment(oz(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function(t){var i=t[0],a=t[1];if(~y1(i).indexOf(gn.replacementClass))return qp.replace(t);var c=new RegExp("".concat(gn.familyPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var f=a[0].attributes.class.split(" ").reduce(function(l,b){return b===gn.replacementClass||b.match(c)?l.toSvg.push(b):l.toNode.push(b),l},{toNode:[],toSvg:[]});a[0].attributes.class=f.toSvg.join(" "),f.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",f.toNode.join(" "))}var y=a.map(function(l){return Sd(l)}).join(`
`);i.setAttribute(Lu,""),i.innerHTML=y}};function a2(e){e()}function xC(e,t){var i=typeof t=="function"?t:Xp;if(e.length===0)i();else{var a=a2;gn.mutateApproach===l4&&(a=Dl.requestAnimationFrame||a2),a(function(){var c=nz(),f=E1.begin("mutate");e.map(c),f(),i()})}}var S1=!1;function wC(){S1=!0}function Rv(){S1=!1}var km=null;function l2(e){if(Jb&&gn.observeMutations){var t=e.treeCallback,i=t===void 0?Xp:t,a=e.nodeCallback,c=a===void 0?Xp:a,f=e.pseudoElementsCallback,y=f===void 0?Xp:f,l=e.observeMutationsRoot,b=l===void 0?vr:l;km=new Jb(function(w){if(!S1){var I=Bl();wh(w).forEach(function(E){if(E.type==="childList"&&E.addedNodes.length>0&&!s2(E.addedNodes[0])&&(gn.searchPseudoElements&&y(E.target),i(E.target)),E.type==="attributes"&&E.target.parentNode&&gn.searchPseudoElements&&y(E.target.parentNode),E.type==="attributes"&&s2(E.target)&&~m4.indexOf(E.attributeName))if(E.attributeName==="class"&&ez(E.target)){var z=Tg(y1(E.target)),O=z.prefix,Q=z.iconName;E.target.setAttribute(p1,O||I),Q&&E.target.setAttribute(m1,Q)}else tz(E.target)&&c(E.target)})}}),Ua&&km.observe(b,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function sz(){km&&km.disconnect()}function az(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,c){var f=c.split(":"),y=f[0],l=f.slice(1);return y&&l.length>0&&(a[y]=l.join(":").trim()),a},{})),i}function lz(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",c=Tg(y1(e));return c.prefix||(c.prefix=Bl()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||c.prefix&&a.length>0&&(c.iconName=B4(c.prefix,e.innerText)||x1(c.prefix,Iv(e.innerText))),c}function uz(e){var t=wh(e.attributes).reduce(function(c,f){return c.name!=="class"&&c.name!=="style"&&(c[f.name]=f.value),c},{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return gn.autoA11y&&(i?t["aria-labelledby"]="".concat(gn.replacementClass,"-title-").concat(a||fd()):(t["aria-hidden"]="true",t.focusable="false")),t}function cz(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ta,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function u2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=lz(e),a=i.iconName,c=i.prefix,f=i.rest,y=uz(e),l=Pv("parseNodeAttributes",{},e),b=t.styleParser?az(e):[];return Kt({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:ta,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:f,styles:b,attributes:y}},l)}var hz=bs.styles;function bC(e){var t=gn.autoReplaceSvg==="nest"?u2(e,{styleParser:!1}):u2(e);return~t.extra.classes.indexOf(iC)?Da("generateLayersText",e,t):Da("generateSvgReplacementMutation",e,t)}function c2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ua)return Promise.resolve();var i=vr.documentElement.classList,a=function(E){return i.add("".concat(Qb,"-").concat(E))},c=function(E){return i.remove("".concat(Qb,"-").concat(E))},f=gn.autoFetchSvg?Object.keys(g1):Object.keys(hz),y=[".".concat(iC,":not([").concat(Lu,"])")].concat(f.map(function(I){return".".concat(I,":not([").concat(Lu,"])")})).join(", ");if(y.length===0)return Promise.resolve();var l=[];try{l=wh(e.querySelectorAll(y))}catch{}if(l.length>0)a("pending"),c("complete");else return Promise.resolve();var b=E1.begin("onTree"),w=l.reduce(function(I,E){try{var z=bC(E);z&&I.push(z)}catch(O){nC||O.name==="MissingIcon"&&console.error(O)}return I},[]);return new Promise(function(I,E){Promise.all(w).then(function(z){xC(z,function(){a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),b(),I()})}).catch(function(z){b(),E(z)})})}function fz(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;bC(e).then(function(i){i&&xC([i],t)})}function dz(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:Mv(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:Mv(c||{})),e(a,Kt(Kt({},i),{},{mask:c}))}}var pz=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,c=a===void 0?ta:a,f=i.symbol,y=f===void 0?!1:f,l=i.mask,b=l===void 0?null:l,w=i.maskId,I=w===void 0?null:w,E=i.title,z=E===void 0?null:E,O=i.titleId,Q=O===void 0?null:O,Y=i.classes,pe=Y===void 0?[]:Y,G=i.attributes,V=G===void 0?{}:G,N=i.styles,oe=N===void 0?{}:N;if(t){var W=t.prefix,B=t.iconName,S=t.icon;return Cg(Kt({type:"icon"},t),function(){return Ru("beforeDOMElementCreation",{iconDefinition:t,params:i}),gn.autoA11y&&(z?V["aria-labelledby"]="".concat(gn.replacementClass,"-title-").concat(Q||fd()):(V["aria-hidden"]="true",V.focusable="false")),b1({icons:{main:kv(S),mask:b?kv(b.icon):{found:!1,width:null,height:null,icon:{}}},prefix:W,iconName:B,transform:Kt(Kt({},ta),c),symbol:y,title:z,maskId:I,titleId:Q,extra:{attributes:V,styles:oe,classes:pe}})})}},mz={mixout:function(){return{icon:dz(pz)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=c2,i.nodeCallback=fz,i}}},provides:function(t){t.i2svg=function(i){var a=i.node,c=a===void 0?vr:a,f=i.callback,y=f===void 0?function(){}:f;return c2(c,y)},t.generateSvgReplacementMutation=function(i,a){var c=a.iconName,f=a.title,y=a.titleId,l=a.prefix,b=a.transform,w=a.symbol,I=a.mask,E=a.maskId,z=a.extra;return new Promise(function(O,Q){Promise.all([zv(c,l),I.iconName?zv(I.iconName,I.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(Y){var pe=f1(Y,2),G=pe[0],V=pe[1];O([i,b1({icons:{main:G,mask:V},prefix:l,iconName:c,transform:b,symbol:w,maskId:E,title:f,titleId:y,extra:z,watchable:!0})])}).catch(Q)})},t.generateAbstractIcon=function(i){var a=i.children,c=i.attributes,f=i.main,y=i.transform,l=i.styles,b=Eg(l);b.length>0&&(c.style=b);var w;return v1(y)&&(w=Da("generateAbstractTransformGrouping",{main:f,transform:y,containerWidth:f.width,iconWidth:f.width})),a.push(w||f.icon),{children:a,attributes:c}}}},gz={mixout:function(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.classes,f=c===void 0?[]:c;return Cg({type:"layer"},function(){Ru("beforeDOMElementCreation",{assembler:i,params:a});var y=[];return i(function(l){Array.isArray(l)?l.map(function(b){y=y.concat(b.abstract)}):y=y.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(gn.familyPrefix,"-layers")].concat(bg(f)).join(" ")},children:y}]})}}}},yz={mixout:function(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.title,f=c===void 0?null:c,y=a.classes,l=y===void 0?[]:y,b=a.attributes,w=b===void 0?{}:b,I=a.styles,E=I===void 0?{}:I;return Cg({type:"counter",content:i},function(){return Ru("beforeDOMElementCreation",{content:i,params:a}),K4({content:i.toString(),title:f,extra:{attributes:w,styles:E,classes:["".concat(gn.familyPrefix,"-layers-counter")].concat(bg(l))}})})}}}},vz={mixout:function(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.transform,f=c===void 0?ta:c,y=a.title,l=y===void 0?null:y,b=a.classes,w=b===void 0?[]:b,I=a.attributes,E=I===void 0?{}:I,z=a.styles,O=z===void 0?{}:z;return Cg({type:"text",content:i},function(){return Ru("beforeDOMElementCreation",{content:i,params:a}),i2({content:i,transform:Kt(Kt({},ta),f),title:l,extra:{attributes:E,styles:O,classes:["".concat(gn.familyPrefix,"-layers-text")].concat(bg(w))}})})}}},provides:function(t){t.generateLayersText=function(i,a){var c=a.title,f=a.transform,y=a.extra,l=null,b=null;if(QT){var w=parseInt(getComputedStyle(i).fontSize,10),I=i.getBoundingClientRect();l=I.width/w,b=I.height/w}return gn.autoA11y&&!c&&(y.attributes["aria-hidden"]="true"),Promise.resolve([i,i2({content:i.innerHTML,width:l,height:b,transform:f,title:c,extra:y,watchable:!0})])}}},_z=new RegExp('"',"ug"),h2=[1105920,1112319];function xz(e){var t=e.replace(_z,""),i=L4(t,0),a=i>=h2[0]&&i<=h2[1],c=t.length===2?t[0]===t[1]:!1;return{value:Iv(c?t[0]:t),isSecondary:a||c}}function f2(e,t){var i="".concat(a4).concat(t.replace(":","-"));return new Promise(function(a,c){if(e.getAttribute(i)!==null)return a();var f=wh(e.children),y=f.filter(function(B){return B.getAttribute(Cv)===t})[0],l=Dl.getComputedStyle(e,t),b=l.getPropertyValue("font-family").match(f4),w=l.getPropertyValue("font-weight"),I=l.getPropertyValue("content");if(y&&!b)return e.removeChild(y),a();if(b&&I!=="none"&&I!==""){var E=l.getPropertyValue("content"),z=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(b[2])?Pm[b[2].toLowerCase()]:d4[w],O=xz(E),Q=O.value,Y=O.isSecondary,pe=b[0].startsWith("FontAwesome"),G=x1(z,Q),V=G;if(pe){var N=N4(Q);N.iconName&&N.prefix&&(G=N.iconName,z=N.prefix)}if(G&&!Y&&(!y||y.getAttribute(p1)!==z||y.getAttribute(m1)!==V)){e.setAttribute(i,V),y&&e.removeChild(y);var oe=cz(),W=oe.extra;W.attributes[Cv]=t,zv(G,z).then(function(B){var S=b1(Kt(Kt({},oe),{},{icons:{main:B,mask:w1()},prefix:z,iconName:V,extra:W,watchable:!0})),M=vr.createElement("svg");t==="::before"?e.insertBefore(M,e.firstChild):e.appendChild(M),M.outerHTML=S.map(function(Z){return Sd(Z)}).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function wz(e){return Promise.all([f2(e,"::before"),f2(e,"::after")])}function bz(e){return e.parentNode!==document.head&&!~u4.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Cv)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function d2(e){if(Ua)return new Promise(function(t,i){var a=wh(e.querySelectorAll("*")).filter(bz).map(wz),c=E1.begin("searchPseudoElements");wC(),Promise.all(a).then(function(){c(),Rv(),t()}).catch(function(){c(),Rv(),i()})})}var Ez={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=d2,i}}},provides:function(t){t.pseudoElements2svg=function(i){var a=i.node,c=a===void 0?vr:a;gn.searchPseudoElements&&d2(c)}}},p2=!1,Sz={mixout:function(){return{dom:{unwatch:function(){wC(),p2=!0}}}},hooks:function(){return{bootstrap:function(){l2(Pv("mutationObserverCallbacks",{}))},noAuto:function(){sz()},watch:function(i){var a=i.observeMutationsRoot;p2?Rv():l2(Pv("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},m2=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,c){var f=c.toLowerCase().split("-"),y=f[0],l=f.slice(1).join("-");if(y&&l==="h")return a.flipX=!0,a;if(y&&l==="v")return a.flipY=!0,a;if(l=parseFloat(l),isNaN(l))return a;switch(y){case"grow":a.size=a.size+l;break;case"shrink":a.size=a.size-l;break;case"left":a.x=a.x-l;break;case"right":a.x=a.x+l;break;case"up":a.y=a.y-l;break;case"down":a.y=a.y+l;break;case"rotate":a.rotate=a.rotate+l;break}return a},i)},Tz={mixout:function(){return{parse:{transform:function(i){return m2(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-transform");return c&&(i.transform=m2(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,c=i.transform,f=i.containerWidth,y=i.iconWidth,l={transform:"translate(".concat(f/2," 256)")},b="translate(".concat(c.x*32,", ").concat(c.y*32,") "),w="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),I="rotate(".concat(c.rotate," 0 0)"),E={transform:"".concat(b," ").concat(w," ").concat(I)},z={transform:"translate(".concat(y/2*-1," -256)")},O={outer:l,inner:E,path:z};return{tag:"g",attributes:Kt({},O.outer),children:[{tag:"g",attributes:Kt({},O.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:Kt(Kt({},a.icon.attributes),O.path)}]}]}}}},r0={x:0,y:0,width:"100%",height:"100%"};function g2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function Cz(e){return e.tag==="g"?e.children:[e]}var Iz={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-mask"),f=c?Tg(c.split(" ").map(function(y){return y.trim()})):w1();return f.prefix||(f.prefix=Bl()),i.mask=f,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var a=i.children,c=i.attributes,f=i.main,y=i.mask,l=i.maskId,b=i.transform,w=f.width,I=f.icon,E=y.width,z=y.icon,O=T4({transform:b,containerWidth:E,iconWidth:w}),Q={tag:"rect",attributes:Kt(Kt({},r0),{},{fill:"white"})},Y=I.children?{children:I.children.map(g2)}:{},pe={tag:"g",attributes:Kt({},O.inner),children:[g2(Kt({tag:I.tag,attributes:Kt(Kt({},I.attributes),O.path)},Y))]},G={tag:"g",attributes:Kt({},O.outer),children:[pe]},V="mask-".concat(l||fd()),N="clip-".concat(l||fd()),oe={tag:"mask",attributes:Kt(Kt({},r0),{},{id:V,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[Q,G]},W={tag:"defs",children:[{tag:"clipPath",attributes:{id:N},children:Cz(z)},oe]};return a.push(W,{tag:"rect",attributes:Kt({fill:"currentColor","clip-path":"url(#".concat(N,")"),mask:"url(#".concat(V,")")},r0)}),{children:a,attributes:c}}}},Az={provides:function(t){var i=!1;Dl.matchMedia&&(i=Dl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],c={fill:"currentColor"},f={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:Kt(Kt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var y=Kt(Kt({},f),{},{attributeName:"opacity"}),l={tag:"circle",attributes:Kt(Kt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||l.children.push({tag:"animate",attributes:Kt(Kt({},f),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Kt(Kt({},y),{},{values:"1;0;1;1;0;1;"})}),a.push(l),a.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:Kt(Kt({},y),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Kt(Kt({},y),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},Pz={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-symbol"),f=c===null?!1:c===""?!0:c;return i.symbol=f,i}}}},Mz=[A4,mz,gz,yz,vz,Ez,Sz,Tz,Iz,Az,Pz];V4(Mz,{mixoutsTo:jo});jo.noAuto;jo.config;jo.library;jo.dom;var Ov=jo.parse;jo.findIconDefinition;jo.toHtml;var kz=jo.icon;jo.layer;jo.text;jo.counter;var EC={exports:{}},zz="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Lz=zz,Rz=Lz;function SC(){}function TC(){}TC.resetWarningCache=SC;var Oz=function(){function e(a,c,f,y,l,b){if(b!==Rz){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:TC,resetWarningCache:SC};return i.PropTypes=i,i};EC.exports=Oz();var Fz=EC.exports;const Xn=yd(Fz);function y2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Il(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?y2(Object(i),!0).forEach(function(a){Hc(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}function Hc(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function jz(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,f;for(f=0;f<a.length;f++)c=a[f],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function CC(e,t){if(e==null)return{};var i=jz(e,t),a,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(c=0;c<f.length;c++)a=f[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Fv(e){return Dz(e)||Bz(e)||Nz(e)||Uz()}function Dz(e){if(Array.isArray(e))return jv(e)}function Bz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nz(e,t){if(e){if(typeof e=="string")return jv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return jv(e,t)}}function jv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Uz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $z(e){var t,i=e.beat,a=e.fade,c=e.flash,f=e.spin,y=e.spinPulse,l=e.spinReverse,b=e.pulse,w=e.fixedWidth,I=e.inverse,E=e.border,z=e.listItem,O=e.flip,Q=e.size,Y=e.rotation,pe=e.pull,G=(t={"fa-beat":i,"fa-fade":a,"fa-flash":c,"fa-spin":f,"fa-spin-reverse":l,"fa-spin-pulse":y,"fa-pulse":b,"fa-fw":w,"fa-inverse":I,"fa-border":E,"fa-li":z,"fa-flip-horizontal":O==="horizontal"||O==="both","fa-flip-vertical":O==="vertical"||O==="both"},Hc(t,"fa-".concat(Q),typeof Q<"u"&&Q!==null),Hc(t,"fa-rotate-".concat(Y),typeof Y<"u"&&Y!==null&&Y!==0),Hc(t,"fa-pull-".concat(pe),typeof pe<"u"&&pe!==null),Hc(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(G).map(function(V){return G[V]?V:null}).filter(function(V){return V})}function Vz(e){return e=e-0,e===e}function IC(e){return Vz(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var Gz=["style"];function Zz(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Wz(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=IC(i.slice(0,a)),f=i.slice(a+1).trim();return c.startsWith("webkit")?t[Zz(c)]=f:t[c]=f,t},{})}function AC(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(b){return AC(e,b)}),c=Object.keys(t.attributes||{}).reduce(function(b,w){var I=t.attributes[w];switch(w){case"class":b.attrs.className=I,delete t.attributes.class;break;case"style":b.attrs.style=Wz(I);break;default:w.indexOf("aria-")===0||w.indexOf("data-")===0?b.attrs[w.toLowerCase()]=I:b.attrs[IC(w)]=I}return b},{attrs:{}}),f=i.style,y=f===void 0?{}:f,l=CC(i,Gz);return c.attrs.style=Il(Il({},c.attrs.style),y),e.apply(void 0,[t.tag,Il(Il({},c.attrs),l)].concat(Fv(a)))}var PC=!1;try{PC=!0}catch{}function Hz(){if(!PC&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function v2(e){if(e&&zm(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(Ov.icon)return Ov.icon(e);if(e===null)return null;if(e&&zm(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function i0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Hc({},e,t):{}}var Xz=["forwardedRef"];function ia(e){var t=e.forwardedRef,i=CC(e,Xz),a=i.icon,c=i.mask,f=i.symbol,y=i.className,l=i.title,b=i.titleId,w=v2(a),I=i0("classes",[].concat(Fv($z(i)),Fv(y.split(" ")))),E=i0("transform",typeof i.transform=="string"?Ov.transform(i.transform):i.transform),z=i0("mask",v2(c)),O=kz(w,Il(Il(Il(Il({},I),E),z),{},{symbol:f,title:l,titleId:b}));if(!O)return Hz("Could not find icon",w),null;var Q=O.abstract,Y={ref:t};return Object.keys(i).forEach(function(pe){ia.defaultProps.hasOwnProperty(pe)||(Y[pe]=i[pe])}),qz(Q[0],Y)}ia.displayName="FontAwesomeIcon";ia.propTypes={beat:Xn.bool,border:Xn.bool,className:Xn.string,fade:Xn.bool,flash:Xn.bool,mask:Xn.oneOfType([Xn.object,Xn.array,Xn.string]),fixedWidth:Xn.bool,inverse:Xn.bool,flip:Xn.oneOf(["horizontal","vertical","both"]),icon:Xn.oneOfType([Xn.object,Xn.array,Xn.string]),listItem:Xn.bool,pull:Xn.oneOf(["right","left"]),pulse:Xn.bool,rotation:Xn.oneOf([0,90,180,270]),size:Xn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Xn.bool,spinPulse:Xn.bool,spinReverse:Xn.bool,symbol:Xn.oneOfType([Xn.bool,Xn.string]),title:Xn.string,transform:Xn.oneOfType([Xn.string,Xn.object]),swapOpacity:Xn.bool};ia.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var qz=AC.bind(null,jE.createElement);/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var Kz={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7c-12.23-91.55-87.28-166-178.9-177.6c-136.2-17.24-250.7 97.28-233.4 233.4c11.6 91.64 86.07 166.7 177.6 178.9c53.81 7.191 104.3-6.235 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 .0003C515.9 484.7 515.9 459.3 500.3 443.7zM288 232H231.1V288c0 13.26-10.74 24-23.1 24C194.7 312 184 301.3 184 288V232H127.1C114.7 232 104 221.3 104 208s10.74-24 23.1-24H184V128c0-13.26 10.74-24 23.1-24S231.1 114.7 231.1 128v56h56C301.3 184 312 194.7 312 208S301.3 232 288 232z"]},Yz=Kz,Dv={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48C304 74.51 282.5 96 256 96C229.5 96 208 74.51 208 48C208 21.49 229.5 0 256 0C282.5 0 304 21.49 304 48zM304 464C304 490.5 282.5 512 256 512C229.5 512 208 490.5 208 464C208 437.5 229.5 416 256 416C282.5 416 304 437.5 304 464zM0 256C0 229.5 21.49 208 48 208C74.51 208 96 229.5 96 256C96 282.5 74.51 304 48 304C21.49 304 0 282.5 0 256zM512 256C512 282.5 490.5 304 464 304C437.5 304 416 282.5 416 256C416 229.5 437.5 208 464 208C490.5 208 512 229.5 512 256zM74.98 437C56.23 418.3 56.23 387.9 74.98 369.1C93.73 350.4 124.1 350.4 142.9 369.1C161.6 387.9 161.6 418.3 142.9 437C124.1 455.8 93.73 455.8 74.98 437V437zM142.9 142.9C124.1 161.6 93.73 161.6 74.98 142.9C56.24 124.1 56.24 93.73 74.98 74.98C93.73 56.23 124.1 56.23 142.9 74.98C161.6 93.73 161.6 124.1 142.9 142.9zM369.1 369.1C387.9 350.4 418.3 350.4 437 369.1C455.8 387.9 455.8 418.3 437 437C418.3 455.8 387.9 455.8 369.1 437C350.4 418.3 350.4 387.9 369.1 369.1V369.1z"]},Jz={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]};function Sp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var MC={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,f){function y(w,I){if(!c[w]){if(!a[w]){var E=typeof Sp=="function"&&Sp;if(!I&&E)return E(w,!0);if(l)return l(w,!0);var z=new Error("Cannot find module '"+w+"'");throw z.code="MODULE_NOT_FOUND",z}var O=c[w]={exports:{}};a[w][0].call(O.exports,function(Q){var Y=a[w][1][Q];return y(Y||Q)},O,O.exports,i,a,c,f)}return c[w].exports}for(var l=typeof Sp=="function"&&Sp,b=0;b<f.length;b++)y(f[b]);return y}return i}()({1:[function(i,a,c){c.byteLength=z,c.toByteArray=Q,c.fromByteArray=G;for(var f=[],y=[],l=typeof Uint8Array<"u"?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,I=b.length;w<I;++w)f[w]=b[w],y[b.charCodeAt(w)]=w;y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63;function E(V){var N=V.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var oe=V.indexOf("=");oe===-1&&(oe=N);var W=oe===N?0:4-oe%4;return[oe,W]}function z(V){var N=E(V),oe=N[0],W=N[1];return(oe+W)*3/4-W}function O(V,N,oe){return(N+oe)*3/4-oe}function Q(V){var N,oe=E(V),W=oe[0],B=oe[1],S=new l(O(V,W,B)),M=0,Z=B>0?W-4:W,X;for(X=0;X<Z;X+=4)N=y[V.charCodeAt(X)]<<18|y[V.charCodeAt(X+1)]<<12|y[V.charCodeAt(X+2)]<<6|y[V.charCodeAt(X+3)],S[M++]=N>>16&255,S[M++]=N>>8&255,S[M++]=N&255;return B===2&&(N=y[V.charCodeAt(X)]<<2|y[V.charCodeAt(X+1)]>>4,S[M++]=N&255),B===1&&(N=y[V.charCodeAt(X)]<<10|y[V.charCodeAt(X+1)]<<4|y[V.charCodeAt(X+2)]>>2,S[M++]=N>>8&255,S[M++]=N&255),S}function Y(V){return f[V>>18&63]+f[V>>12&63]+f[V>>6&63]+f[V&63]}function pe(V,N,oe){for(var W,B=[],S=N;S<oe;S+=3)W=(V[S]<<16&16711680)+(V[S+1]<<8&65280)+(V[S+2]&255),B.push(Y(W));return B.join("")}function G(V){for(var N,oe=V.length,W=oe%3,B=[],S=16383,M=0,Z=oe-W;M<Z;M+=S)B.push(pe(V,M,M+S>Z?Z:M+S));return W===1?(N=V[oe-1],B.push(f[N>>2]+f[N<<4&63]+"==")):W===2&&(N=(V[oe-2]<<8)+V[oe-1],B.push(f[N>>10]+f[N>>4&63]+f[N<<2&63]+"=")),B.join("")}},{}],2:[function(i,a,c){(function(f){(function(){var y=i("base64-js"),l=i("ieee754");c.Buffer=E,c.SlowBuffer=W,c.INSPECT_MAX_BYTES=50;var b=2147483647;c.kMaxLength=b,E.TYPED_ARRAY_SUPPORT=w(),!E.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{var Se=new Uint8Array(1);return Se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Se.foo()===42}catch{return!1}}Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}});function I(Se){if(Se>b)throw new RangeError('The value "'+Se+'" is invalid for option "size"');var F=new Uint8Array(Se);return F.__proto__=E.prototype,F}function E(Se,F,R){if(typeof Se=="number"){if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Y(Se)}return z(Se,F,R)}typeof Symbol<"u"&&Symbol.species!=null&&E[Symbol.species]===E&&Object.defineProperty(E,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),E.poolSize=8192;function z(Se,F,R){if(typeof Se=="string")return pe(Se,F);if(ArrayBuffer.isView(Se))return G(Se);if(Se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se);if(an(Se,ArrayBuffer)||Se&&an(Se.buffer,ArrayBuffer))return V(Se,F,R);if(typeof Se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var _e=Se.valueOf&&Se.valueOf();if(_e!=null&&_e!==Se)return E.from(_e,F,R);var We=N(Se);if(We)return We;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Se[Symbol.toPrimitive]=="function")return E.from(Se[Symbol.toPrimitive]("string"),F,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se)}E.from=function(Se,F,R){return z(Se,F,R)},E.prototype.__proto__=Uint8Array.prototype,E.__proto__=Uint8Array;function O(Se){if(typeof Se!="number")throw new TypeError('"size" argument must be of type number');if(Se<0)throw new RangeError('The value "'+Se+'" is invalid for option "size"')}function Q(Se,F,R){return O(Se),Se<=0?I(Se):F!==void 0?typeof R=="string"?I(Se).fill(F,R):I(Se).fill(F):I(Se)}E.alloc=function(Se,F,R){return Q(Se,F,R)};function Y(Se){return O(Se),I(Se<0?0:oe(Se)|0)}E.allocUnsafe=function(Se){return Y(Se)},E.allocUnsafeSlow=function(Se){return Y(Se)};function pe(Se,F){if((typeof F!="string"||F==="")&&(F="utf8"),!E.isEncoding(F))throw new TypeError("Unknown encoding: "+F);var R=B(Se,F)|0,_e=I(R),We=_e.write(Se,F);return We!==R&&(_e=_e.slice(0,We)),_e}function G(Se){for(var F=Se.length<0?0:oe(Se.length)|0,R=I(F),_e=0;_e<F;_e+=1)R[_e]=Se[_e]&255;return R}function V(Se,F,R){if(F<0||Se.byteLength<F)throw new RangeError('"offset" is outside of buffer bounds');if(Se.byteLength<F+(R||0))throw new RangeError('"length" is outside of buffer bounds');var _e;return F===void 0&&R===void 0?_e=new Uint8Array(Se):R===void 0?_e=new Uint8Array(Se,F):_e=new Uint8Array(Se,F,R),_e.__proto__=E.prototype,_e}function N(Se){if(E.isBuffer(Se)){var F=oe(Se.length)|0,R=I(F);return R.length===0||Se.copy(R,0,0,F),R}if(Se.length!==void 0)return typeof Se.length!="number"||vn(Se.length)?I(0):G(Se);if(Se.type==="Buffer"&&Array.isArray(Se.data))return G(Se.data)}function oe(Se){if(Se>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return Se|0}function W(Se){return+Se!=Se&&(Se=0),E.alloc(+Se)}E.isBuffer=function(F){return F!=null&&F._isBuffer===!0&&F!==E.prototype},E.compare=function(F,R){if(an(F,Uint8Array)&&(F=E.from(F,F.offset,F.byteLength)),an(R,Uint8Array)&&(R=E.from(R,R.offset,R.byteLength)),!E.isBuffer(F)||!E.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(F===R)return 0;for(var _e=F.length,We=R.length,De=0,lt=Math.min(_e,We);De<lt;++De)if(F[De]!==R[De]){_e=F[De],We=R[De];break}return _e<We?-1:We<_e?1:0},E.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(F,R){if(!Array.isArray(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return E.alloc(0);var _e;if(R===void 0)for(R=0,_e=0;_e<F.length;++_e)R+=F[_e].length;var We=E.allocUnsafe(R),De=0;for(_e=0;_e<F.length;++_e){var lt=F[_e];if(an(lt,Uint8Array)&&(lt=E.from(lt)),!E.isBuffer(lt))throw new TypeError('"list" argument must be an Array of Buffers');lt.copy(We,De),De+=lt.length}return We};function B(Se,F){if(E.isBuffer(Se))return Se.length;if(ArrayBuffer.isView(Se)||an(Se,ArrayBuffer))return Se.byteLength;if(typeof Se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Se);var R=Se.length,_e=arguments.length>2&&arguments[2]===!0;if(!_e&&R===0)return 0;for(var We=!1;;)switch(F){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return Ye(Se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return Xt(Se).length;default:if(We)return _e?-1:Ye(Se).length;F=(""+F).toLowerCase(),We=!0}}E.byteLength=B;function S(Se,F,R){var _e=!1;if((F===void 0||F<0)&&(F=0),F>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,F>>>=0,R<=F))return"";for(Se||(Se="utf8");;)switch(Se){case"hex":return ze(this,F,R);case"utf8":case"utf-8":return ne(this,F,R);case"ascii":return we(this,F,R);case"latin1":case"binary":return Ne(this,F,R);case"base64":return re(this,F,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,F,R);default:if(_e)throw new TypeError("Unknown encoding: "+Se);Se=(Se+"").toLowerCase(),_e=!0}}E.prototype._isBuffer=!0;function M(Se,F,R){var _e=Se[F];Se[F]=Se[R],Se[R]=_e}E.prototype.swap16=function(){var F=this.length;if(F%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<F;R+=2)M(this,R,R+1);return this},E.prototype.swap32=function(){var F=this.length;if(F%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<F;R+=4)M(this,R,R+3),M(this,R+1,R+2);return this},E.prototype.swap64=function(){var F=this.length;if(F%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<F;R+=8)M(this,R,R+7),M(this,R+1,R+6),M(this,R+2,R+5),M(this,R+3,R+4);return this},E.prototype.toString=function(){var F=this.length;return F===0?"":arguments.length===0?ne(this,0,F):S.apply(this,arguments)},E.prototype.toLocaleString=E.prototype.toString,E.prototype.equals=function(F){if(!E.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F?!0:E.compare(this,F)===0},E.prototype.inspect=function(){var F="",R=c.INSPECT_MAX_BYTES;return F=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(F+=" ... "),"<Buffer "+F+">"},E.prototype.compare=function(F,R,_e,We,De){if(an(F,Uint8Array)&&(F=E.from(F,F.offset,F.byteLength)),!E.isBuffer(F))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof F);if(R===void 0&&(R=0),_e===void 0&&(_e=F?F.length:0),We===void 0&&(We=0),De===void 0&&(De=this.length),R<0||_e>F.length||We<0||De>this.length)throw new RangeError("out of range index");if(We>=De&&R>=_e)return 0;if(We>=De)return-1;if(R>=_e)return 1;if(R>>>=0,_e>>>=0,We>>>=0,De>>>=0,this===F)return 0;for(var lt=De-We,ae=_e-R,L=Math.min(lt,ae),D=this.slice(We,De),ue=F.slice(R,_e),Oe=0;Oe<L;++Oe)if(D[Oe]!==ue[Oe]){lt=D[Oe],ae=ue[Oe];break}return lt<ae?-1:ae<lt?1:0};function Z(Se,F,R,_e,We){if(Se.length===0)return-1;if(typeof R=="string"?(_e=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,vn(R)&&(R=We?0:Se.length-1),R<0&&(R=Se.length+R),R>=Se.length){if(We)return-1;R=Se.length-1}else if(R<0)if(We)R=0;else return-1;if(typeof F=="string"&&(F=E.from(F,_e)),E.isBuffer(F))return F.length===0?-1:X(Se,F,R,_e,We);if(typeof F=="number")return F=F&255,typeof Uint8Array.prototype.indexOf=="function"?We?Uint8Array.prototype.indexOf.call(Se,F,R):Uint8Array.prototype.lastIndexOf.call(Se,F,R):X(Se,[F],R,_e,We);throw new TypeError("val must be string, number or Buffer")}function X(Se,F,R,_e,We){var De=1,lt=Se.length,ae=F.length;if(_e!==void 0&&(_e=String(_e).toLowerCase(),_e==="ucs2"||_e==="ucs-2"||_e==="utf16le"||_e==="utf-16le")){if(Se.length<2||F.length<2)return-1;De=2,lt/=2,ae/=2,R/=2}function L(st,en){return De===1?st[en]:st.readUInt16BE(en*De)}var D;if(We){var ue=-1;for(D=R;D<lt;D++)if(L(Se,D)===L(F,ue===-1?0:D-ue)){if(ue===-1&&(ue=D),D-ue+1===ae)return ue*De}else ue!==-1&&(D-=D-ue),ue=-1}else for(R+ae>lt&&(R=lt-ae),D=R;D>=0;D--){for(var Oe=!0,qe=0;qe<ae;qe++)if(L(Se,D+qe)!==L(F,qe)){Oe=!1;break}if(Oe)return D}return-1}E.prototype.includes=function(F,R,_e){return this.indexOf(F,R,_e)!==-1},E.prototype.indexOf=function(F,R,_e){return Z(this,F,R,_e,!0)},E.prototype.lastIndexOf=function(F,R,_e){return Z(this,F,R,_e,!1)};function J(Se,F,R,_e){R=Number(R)||0;var We=Se.length-R;_e?(_e=Number(_e),_e>We&&(_e=We)):_e=We;var De=F.length;_e>De/2&&(_e=De/2);for(var lt=0;lt<_e;++lt){var ae=parseInt(F.substr(lt*2,2),16);if(vn(ae))return lt;Se[R+lt]=ae}return lt}function ye(Se,F,R,_e){return Gt(Ye(F,Se.length-R),Se,R,_e)}function xe(Se,F,R,_e){return Gt(Vt(F),Se,R,_e)}function be(Se,F,R,_e){return xe(Se,F,R,_e)}function te(Se,F,R,_e){return Gt(Xt(F),Se,R,_e)}function le(Se,F,R,_e){return Gt(un(F,Se.length-R),Se,R,_e)}E.prototype.write=function(F,R,_e,We){if(R===void 0)We="utf8",_e=this.length,R=0;else if(_e===void 0&&typeof R=="string")We=R,_e=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(_e)?(_e=_e>>>0,We===void 0&&(We="utf8")):(We=_e,_e=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var De=this.length-R;if((_e===void 0||_e>De)&&(_e=De),F.length>0&&(_e<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");for(var lt=!1;;)switch(We){case"hex":return J(this,F,R,_e);case"utf8":case"utf-8":return ye(this,F,R,_e);case"ascii":return xe(this,F,R,_e);case"latin1":case"binary":return be(this,F,R,_e);case"base64":return te(this,F,R,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,F,R,_e);default:if(lt)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),lt=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function re(Se,F,R){return F===0&&R===Se.length?y.fromByteArray(Se):y.fromByteArray(Se.slice(F,R))}function ne(Se,F,R){R=Math.min(Se.length,R);for(var _e=[],We=F;We<R;){var De=Se[We],lt=null,ae=De>239?4:De>223?3:De>191?2:1;if(We+ae<=R){var L,D,ue,Oe;switch(ae){case 1:De<128&&(lt=De);break;case 2:L=Se[We+1],(L&192)===128&&(Oe=(De&31)<<6|L&63,Oe>127&&(lt=Oe));break;case 3:L=Se[We+1],D=Se[We+2],(L&192)===128&&(D&192)===128&&(Oe=(De&15)<<12|(L&63)<<6|D&63,Oe>2047&&(Oe<55296||Oe>57343)&&(lt=Oe));break;case 4:L=Se[We+1],D=Se[We+2],ue=Se[We+3],(L&192)===128&&(D&192)===128&&(ue&192)===128&&(Oe=(De&15)<<18|(L&63)<<12|(D&63)<<6|ue&63,Oe>65535&&Oe<1114112&&(lt=Oe))}}lt===null?(lt=65533,ae=1):lt>65535&&(lt-=65536,_e.push(lt>>>10&1023|55296),lt=56320|lt&1023),_e.push(lt),We+=ae}return Ee(_e)}var ge=4096;function Ee(Se){var F=Se.length;if(F<=ge)return String.fromCharCode.apply(String,Se);for(var R="",_e=0;_e<F;)R+=String.fromCharCode.apply(String,Se.slice(_e,_e+=ge));return R}function we(Se,F,R){var _e="";R=Math.min(Se.length,R);for(var We=F;We<R;++We)_e+=String.fromCharCode(Se[We]&127);return _e}function Ne(Se,F,R){var _e="";R=Math.min(Se.length,R);for(var We=F;We<R;++We)_e+=String.fromCharCode(Se[We]);return _e}function ze(Se,F,R){var _e=Se.length;(!F||F<0)&&(F=0),(!R||R<0||R>_e)&&(R=_e);for(var We="",De=F;De<R;++De)We+=bt(Se[De]);return We}function Pe(Se,F,R){for(var _e=Se.slice(F,R),We="",De=0;De<_e.length;De+=2)We+=String.fromCharCode(_e[De]+_e[De+1]*256);return We}E.prototype.slice=function(F,R){var _e=this.length;F=~~F,R=R===void 0?_e:~~R,F<0?(F+=_e,F<0&&(F=0)):F>_e&&(F=_e),R<0?(R+=_e,R<0&&(R=0)):R>_e&&(R=_e),R<F&&(R=F);var We=this.subarray(F,R);return We.__proto__=E.prototype,We};function He(Se,F,R){if(Se%1!==0||Se<0)throw new RangeError("offset is not uint");if(Se+F>R)throw new RangeError("Trying to access beyond buffer length")}E.prototype.readUIntLE=function(F,R,_e){F=F>>>0,R=R>>>0,_e||He(F,R,this.length);for(var We=this[F],De=1,lt=0;++lt<R&&(De*=256);)We+=this[F+lt]*De;return We},E.prototype.readUIntBE=function(F,R,_e){F=F>>>0,R=R>>>0,_e||He(F,R,this.length);for(var We=this[F+--R],De=1;R>0&&(De*=256);)We+=this[F+--R]*De;return We},E.prototype.readUInt8=function(F,R){return F=F>>>0,R||He(F,1,this.length),this[F]},E.prototype.readUInt16LE=function(F,R){return F=F>>>0,R||He(F,2,this.length),this[F]|this[F+1]<<8},E.prototype.readUInt16BE=function(F,R){return F=F>>>0,R||He(F,2,this.length),this[F]<<8|this[F+1]},E.prototype.readUInt32LE=function(F,R){return F=F>>>0,R||He(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+this[F+3]*16777216},E.prototype.readUInt32BE=function(F,R){return F=F>>>0,R||He(F,4,this.length),this[F]*16777216+(this[F+1]<<16|this[F+2]<<8|this[F+3])},E.prototype.readIntLE=function(F,R,_e){F=F>>>0,R=R>>>0,_e||He(F,R,this.length);for(var We=this[F],De=1,lt=0;++lt<R&&(De*=256);)We+=this[F+lt]*De;return De*=128,We>=De&&(We-=Math.pow(2,8*R)),We},E.prototype.readIntBE=function(F,R,_e){F=F>>>0,R=R>>>0,_e||He(F,R,this.length);for(var We=R,De=1,lt=this[F+--We];We>0&&(De*=256);)lt+=this[F+--We]*De;return De*=128,lt>=De&&(lt-=Math.pow(2,8*R)),lt},E.prototype.readInt8=function(F,R){return F=F>>>0,R||He(F,1,this.length),this[F]&128?(255-this[F]+1)*-1:this[F]},E.prototype.readInt16LE=function(F,R){F=F>>>0,R||He(F,2,this.length);var _e=this[F]|this[F+1]<<8;return _e&32768?_e|4294901760:_e},E.prototype.readInt16BE=function(F,R){F=F>>>0,R||He(F,2,this.length);var _e=this[F+1]|this[F]<<8;return _e&32768?_e|4294901760:_e},E.prototype.readInt32LE=function(F,R){return F=F>>>0,R||He(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},E.prototype.readInt32BE=function(F,R){return F=F>>>0,R||He(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},E.prototype.readFloatLE=function(F,R){return F=F>>>0,R||He(F,4,this.length),l.read(this,F,!0,23,4)},E.prototype.readFloatBE=function(F,R){return F=F>>>0,R||He(F,4,this.length),l.read(this,F,!1,23,4)},E.prototype.readDoubleLE=function(F,R){return F=F>>>0,R||He(F,8,this.length),l.read(this,F,!0,52,8)},E.prototype.readDoubleBE=function(F,R){return F=F>>>0,R||He(F,8,this.length),l.read(this,F,!1,52,8)};function Ge(Se,F,R,_e,We,De){if(!E.isBuffer(Se))throw new TypeError('"buffer" argument must be a Buffer instance');if(F>We||F<De)throw new RangeError('"value" argument is out of bounds');if(R+_e>Se.length)throw new RangeError("Index out of range")}E.prototype.writeUIntLE=function(F,R,_e,We){if(F=+F,R=R>>>0,_e=_e>>>0,!We){var De=Math.pow(2,8*_e)-1;Ge(this,F,R,_e,De,0)}var lt=1,ae=0;for(this[R]=F&255;++ae<_e&&(lt*=256);)this[R+ae]=F/lt&255;return R+_e},E.prototype.writeUIntBE=function(F,R,_e,We){if(F=+F,R=R>>>0,_e=_e>>>0,!We){var De=Math.pow(2,8*_e)-1;Ge(this,F,R,_e,De,0)}var lt=_e-1,ae=1;for(this[R+lt]=F&255;--lt>=0&&(ae*=256);)this[R+lt]=F/ae&255;return R+_e},E.prototype.writeUInt8=function(F,R,_e){return F=+F,R=R>>>0,_e||Ge(this,F,R,1,255,0),this[R]=F&255,R+1},E.prototype.writeUInt16LE=function(F,R,_e){return F=+F,R=R>>>0,_e||Ge(this,F,R,2,65535,0),this[R]=F&255,this[R+1]=F>>>8,R+2},E.prototype.writeUInt16BE=function(F,R,_e){return F=+F,R=R>>>0,_e||Ge(this,F,R,2,65535,0),this[R]=F>>>8,this[R+1]=F&255,R+2},E.prototype.writeUInt32LE=function(F,R,_e){return F=+F,R=R>>>0,_e||Ge(this,F,R,4,4294967295,0),this[R+3]=F>>>24,this[R+2]=F>>>16,this[R+1]=F>>>8,this[R]=F&255,R+4},E.prototype.writeUInt32BE=function(F,R,_e){return F=+F,R=R>>>0,_e||Ge(this,F,R,4,4294967295,0),this[R]=F>>>24,this[R+1]=F>>>16,this[R+2]=F>>>8,this[R+3]=F&255,R+4},E.prototype.writeIntLE=function(F,R,_e,We){if(F=+F,R=R>>>0,!We){var De=Math.pow(2,8*_e-1);Ge(this,F,R,_e,De-1,-De)}var lt=0,ae=1,L=0;for(this[R]=F&255;++lt<_e&&(ae*=256);)F<0&&L===0&&this[R+lt-1]!==0&&(L=1),this[R+lt]=(F/ae>>0)-L&255;return R+_e},E.prototype.writeIntBE=function(F,R,_e,We){if(F=+F,R=R>>>0,!We){var De=Math.pow(2,8*_e-1);Ge(this,F,R,_e,De-1,-De)}var lt=_e-1,ae=1,L=0;for(this[R+lt]=F&255;--lt>=0&&(ae*=256);)F<0&&L===0&&this[R+lt+1]!==0&&(L=1),this[R+lt]=(F/ae>>0)-L&255;return R+_e},E.prototype.writeInt8=function(F,R,_e){return F=+F,R=R>>>0,_e||Ge(this,F,R,1,127,-128),F<0&&(F=255+F+1),this[R]=F&255,R+1},E.prototype.writeInt16LE=function(F,R,_e){return F=+F,R=R>>>0,_e||Ge(this,F,R,2,32767,-32768),this[R]=F&255,this[R+1]=F>>>8,R+2},E.prototype.writeInt16BE=function(F,R,_e){return F=+F,R=R>>>0,_e||Ge(this,F,R,2,32767,-32768),this[R]=F>>>8,this[R+1]=F&255,R+2},E.prototype.writeInt32LE=function(F,R,_e){return F=+F,R=R>>>0,_e||Ge(this,F,R,4,2147483647,-2147483648),this[R]=F&255,this[R+1]=F>>>8,this[R+2]=F>>>16,this[R+3]=F>>>24,R+4},E.prototype.writeInt32BE=function(F,R,_e){return F=+F,R=R>>>0,_e||Ge(this,F,R,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),this[R]=F>>>24,this[R+1]=F>>>16,this[R+2]=F>>>8,this[R+3]=F&255,R+4};function it(Se,F,R,_e,We,De){if(R+_e>Se.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function ut(Se,F,R,_e,We){return F=+F,R=R>>>0,We||it(Se,F,R,4),l.write(Se,F,R,_e,23,4),R+4}E.prototype.writeFloatLE=function(F,R,_e){return ut(this,F,R,!0,_e)},E.prototype.writeFloatBE=function(F,R,_e){return ut(this,F,R,!1,_e)};function vt(Se,F,R,_e,We){return F=+F,R=R>>>0,We||it(Se,F,R,8),l.write(Se,F,R,_e,52,8),R+8}E.prototype.writeDoubleLE=function(F,R,_e){return vt(this,F,R,!0,_e)},E.prototype.writeDoubleBE=function(F,R,_e){return vt(this,F,R,!1,_e)},E.prototype.copy=function(F,R,_e,We){if(!E.isBuffer(F))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),!We&&We!==0&&(We=this.length),R>=F.length&&(R=F.length),R||(R=0),We>0&&We<_e&&(We=_e),We===_e||F.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),F.length-R<We-_e&&(We=F.length-R+_e);var De=We-_e;if(this===F&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(R,_e,We);else if(this===F&&_e<R&&R<We)for(var lt=De-1;lt>=0;--lt)F[lt+R]=this[lt+_e];else Uint8Array.prototype.set.call(F,this.subarray(_e,We),R);return De},E.prototype.fill=function(F,R,_e,We){if(typeof F=="string"){if(typeof R=="string"?(We=R,R=0,_e=this.length):typeof _e=="string"&&(We=_e,_e=this.length),We!==void 0&&typeof We!="string")throw new TypeError("encoding must be a string");if(typeof We=="string"&&!E.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(F.length===1){var De=F.charCodeAt(0);(We==="utf8"&&De<128||We==="latin1")&&(F=De)}}else typeof F=="number"&&(F=F&255);if(R<0||this.length<R||this.length<_e)throw new RangeError("Out of range index");if(_e<=R)return this;R=R>>>0,_e=_e===void 0?this.length:_e>>>0,F||(F=0);var lt;if(typeof F=="number")for(lt=R;lt<_e;++lt)this[lt]=F;else{var ae=E.isBuffer(F)?F:E.from(F,We),L=ae.length;if(L===0)throw new TypeError('The value "'+F+'" is invalid for argument "value"');for(lt=0;lt<_e-R;++lt)this[lt+R]=ae[lt%L]}return this};var At=/[^+/0-9A-Za-z-_]/g;function ht(Se){if(Se=Se.split("=")[0],Se=Se.trim().replace(At,""),Se.length<2)return"";for(;Se.length%4!==0;)Se=Se+"=";return Se}function bt(Se){return Se<16?"0"+Se.toString(16):Se.toString(16)}function Ye(Se,F){F=F||1/0;for(var R,_e=Se.length,We=null,De=[],lt=0;lt<_e;++lt){if(R=Se.charCodeAt(lt),R>55295&&R<57344){if(!We){if(R>56319){(F-=3)>-1&&De.push(239,191,189);continue}else if(lt+1===_e){(F-=3)>-1&&De.push(239,191,189);continue}We=R;continue}if(R<56320){(F-=3)>-1&&De.push(239,191,189),We=R;continue}R=(We-55296<<10|R-56320)+65536}else We&&(F-=3)>-1&&De.push(239,191,189);if(We=null,R<128){if((F-=1)<0)break;De.push(R)}else if(R<2048){if((F-=2)<0)break;De.push(R>>6|192,R&63|128)}else if(R<65536){if((F-=3)<0)break;De.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((F-=4)<0)break;De.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return De}function Vt(Se){for(var F=[],R=0;R<Se.length;++R)F.push(Se.charCodeAt(R)&255);return F}function un(Se,F){for(var R,_e,We,De=[],lt=0;lt<Se.length&&!((F-=2)<0);++lt)R=Se.charCodeAt(lt),_e=R>>8,We=R%256,De.push(We),De.push(_e);return De}function Xt(Se){return y.toByteArray(ht(Se))}function Gt(Se,F,R,_e){for(var We=0;We<_e&&!(We+R>=F.length||We>=Se.length);++We)F[We+R]=Se[We];return We}function an(Se,F){return Se instanceof F||Se!=null&&Se.constructor!=null&&Se.constructor.name!=null&&Se.constructor.name===F.name}function vn(Se){return Se!==Se}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const f=i("./validator"),y=i("./xmlparser/XMLParser"),l=i("./xmlbuilder/json2xml");a.exports={XMLParser:y,XMLValidator:f,XMLBuilder:l}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const f=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",y=f+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+f+"]["+y+"]*",b=new RegExp("^"+l+"$"),w=function(E,z){const O=[];let Q=z.exec(E);for(;Q;){const Y=[];Y.startIndex=z.lastIndex-Q[0].length;const pe=Q.length;for(let G=0;G<pe;G++)Y.push(Q[G]);O.push(Y),Q=z.exec(E)}return O},I=function(E){const z=b.exec(E);return!(z===null||typeof z>"u")};c.isExist=function(E){return typeof E<"u"},c.isEmptyObject=function(E){return Object.keys(E).length===0},c.merge=function(E,z,O){if(z){const Q=Object.keys(z),Y=Q.length;for(let pe=0;pe<Y;pe++)O==="strict"?E[Q[pe]]=[z[Q[pe]]]:E[Q[pe]]=z[Q[pe]]}},c.getValue=function(E){return c.isExist(E)?E:""},c.isName=I,c.getAllMatches=w,c.nameRegexp=l},{}],5:[function(i,a,c){const f=i("./util"),y={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(B,S){S=Object.assign({},y,S);const M=[];let Z=!1,X=!1;B[0]==="\uFEFF"&&(B=B.substr(1));for(let J=0;J<B.length;J++)if(B[J]==="<"&&B[J+1]==="?"){if(J+=2,J=b(B,J),J.err)return J}else if(B[J]==="<"){let ye=J;if(J++,B[J]==="!"){J=w(B,J);continue}else{let xe=!1;B[J]==="/"&&(xe=!0,J++);let be="";for(;J<B.length&&B[J]!==">"&&B[J]!==" "&&B[J]!=="	"&&B[J]!==`
`&&B[J]!=="\r";J++)be+=B[J];if(be=be.trim(),be[be.length-1]==="/"&&(be=be.substring(0,be.length-1),J--),!N(be)){let re;return be.trim().length===0?re="Invalid space after '<'.":re="Tag '"+be+"' is an invalid name.",G("InvalidTag",re,oe(B,J))}const te=z(B,J);if(te===!1)return G("InvalidAttr","Attributes for '"+be+"' have open quote.",oe(B,J));let le=te.value;if(J=te.index,le[le.length-1]==="/"){const re=J-le.length;le=le.substring(0,le.length-1);const ne=Q(le,S);if(ne===!0)Z=!0;else return G(ne.err.code,ne.err.msg,oe(B,re+ne.err.line))}else if(xe)if(te.tagClosed){if(le.trim().length>0)return G("InvalidTag","Closing tag '"+be+"' can't have attributes or invalid starting.",oe(B,ye));{const re=M.pop();if(be!==re.tagName){let ne=oe(B,re.tagStartPos);return G("InvalidTag","Expected closing tag '"+re.tagName+"' (opened in line "+ne.line+", col "+ne.col+") instead of closing tag '"+be+"'.",oe(B,ye))}M.length==0&&(X=!0)}}else return G("InvalidTag","Closing tag '"+be+"' doesn't have proper closing.",oe(B,J));else{const re=Q(le,S);if(re!==!0)return G(re.err.code,re.err.msg,oe(B,J-le.length+re.err.line));if(X===!0)return G("InvalidXml","Multiple possible root nodes found.",oe(B,J));S.unpairedTags.indexOf(be)!==-1||M.push({tagName:be,tagStartPos:ye}),Z=!0}for(J++;J<B.length;J++)if(B[J]==="<")if(B[J+1]==="!"){J++,J=w(B,J);continue}else if(B[J+1]==="?"){if(J=b(B,++J),J.err)return J}else break;else if(B[J]==="&"){const re=pe(B,J);if(re==-1)return G("InvalidChar","char '&' is not expected.",oe(B,J));J=re}else if(X===!0&&!l(B[J]))return G("InvalidXml","Extra text at the end",oe(B,J));B[J]==="<"&&J--}}else{if(l(B[J]))continue;return G("InvalidChar","char '"+B[J]+"' is not expected.",oe(B,J))}if(Z){if(M.length==1)return G("InvalidTag","Unclosed tag '"+M[0].tagName+"'.",oe(B,M[0].tagStartPos));if(M.length>0)return G("InvalidXml","Invalid '"+JSON.stringify(M.map(J=>J.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return G("InvalidXml","Start tag expected.",1);return!0};function l(B){return B===" "||B==="	"||B===`
`||B==="\r"}function b(B,S){const M=S;for(;S<B.length;S++)if(B[S]=="?"||B[S]==" "){const Z=B.substr(M,S-M);if(S>5&&Z==="xml")return G("InvalidXml","XML declaration allowed only at the start of the document.",oe(B,S));if(B[S]=="?"&&B[S+1]==">"){S++;break}else continue}return S}function w(B,S){if(B.length>S+5&&B[S+1]==="-"&&B[S+2]==="-"){for(S+=3;S<B.length;S++)if(B[S]==="-"&&B[S+1]==="-"&&B[S+2]===">"){S+=2;break}}else if(B.length>S+8&&B[S+1]==="D"&&B[S+2]==="O"&&B[S+3]==="C"&&B[S+4]==="T"&&B[S+5]==="Y"&&B[S+6]==="P"&&B[S+7]==="E"){let M=1;for(S+=8;S<B.length;S++)if(B[S]==="<")M++;else if(B[S]===">"&&(M--,M===0))break}else if(B.length>S+9&&B[S+1]==="["&&B[S+2]==="C"&&B[S+3]==="D"&&B[S+4]==="A"&&B[S+5]==="T"&&B[S+6]==="A"&&B[S+7]==="["){for(S+=8;S<B.length;S++)if(B[S]==="]"&&B[S+1]==="]"&&B[S+2]===">"){S+=2;break}}return S}const I='"',E="'";function z(B,S){let M="",Z="",X=!1;for(;S<B.length;S++){if(B[S]===I||B[S]===E)Z===""?Z=B[S]:Z!==B[S]||(Z="");else if(B[S]===">"&&Z===""){X=!0;break}M+=B[S]}return Z!==""?!1:{value:M,index:S,tagClosed:X}}const O=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Q(B,S){const M=f.getAllMatches(B,O),Z={};for(let X=0;X<M.length;X++){if(M[X][1].length===0)return G("InvalidAttr","Attribute '"+M[X][2]+"' has no space in starting.",W(M[X]));if(M[X][3]!==void 0&&M[X][4]===void 0)return G("InvalidAttr","Attribute '"+M[X][2]+"' is without value.",W(M[X]));if(M[X][3]===void 0&&!S.allowBooleanAttributes)return G("InvalidAttr","boolean attribute '"+M[X][2]+"' is not allowed.",W(M[X]));const J=M[X][2];if(!V(J))return G("InvalidAttr","Attribute '"+J+"' is an invalid name.",W(M[X]));if(!Z.hasOwnProperty(J))Z[J]=1;else return G("InvalidAttr","Attribute '"+J+"' is repeated.",W(M[X]))}return!0}function Y(B,S){let M=/\d/;for(B[S]==="x"&&(S++,M=/[\da-fA-F]/);S<B.length;S++){if(B[S]===";")return S;if(!B[S].match(M))break}return-1}function pe(B,S){if(S++,B[S]===";")return-1;if(B[S]==="#")return S++,Y(B,S);let M=0;for(;S<B.length;S++,M++)if(!(B[S].match(/\w/)&&M<20)){if(B[S]===";")break;return-1}return S}function G(B,S,M){return{err:{code:B,msg:S,line:M.line||M,col:M.col}}}function V(B){return f.isName(B)}function N(B){return f.isName(B)}function oe(B,S){const M=B.substring(0,S).split(/\r?\n/);return{line:M.length,col:M[M.length-1].length+1}}function W(B){return B.startIndex+B[1].length}},{"./util":4}],6:[function(i,a,c){const f=i("./orderedJs2Xml"),y={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(G,V){return V},attributeValueProcessor:function(G,V){return V},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function l(G){this.options=Object.assign({},y,G),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=pe),this.processTextOrObjNode=w,this.options.format?(this.indentate=Y,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=Q,this.buildObjNode=E):(this.buildTextNode=z,this.buildObjNode=I),this.buildTextValNode=z,this.buildObjectNode=I,this.replaceEntitiesValue=O,this.buildAttrPairStr=b}l.prototype.build=function(G){return this.options.preserveOrder?f(G,this.options):(Array.isArray(G)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(G={[this.options.arrayNodeName]:G}),this.j2x(G,0).val)},l.prototype.j2x=function(G,V){let N="",oe="";for(let W in G)if(!(typeof G[W]>"u"))if(G[W]===null)W[0]==="?"?oe+=this.indentate(V)+"<"+W+"?"+this.tagEndChar:oe+=this.indentate(V)+"<"+W+"/"+this.tagEndChar;else if(G[W]instanceof Date)oe+=this.buildTextNode(G[W],W,"",V);else if(typeof G[W]!="object"){const B=this.isAttribute(W);if(B)N+=this.buildAttrPairStr(B,""+G[W]);else if(W===this.options.textNodeName){let S=this.options.tagValueProcessor(W,""+G[W]);oe+=this.replaceEntitiesValue(S)}else oe+=this.buildTextNode(G[W],W,"",V)}else if(Array.isArray(G[W])){const B=G[W].length;for(let S=0;S<B;S++){const M=G[W][S];typeof M>"u"||(M===null?W[0]==="?"?oe+=this.indentate(V)+"<"+W+"?"+this.tagEndChar:oe+=this.indentate(V)+"<"+W+"/"+this.tagEndChar:typeof M=="object"?oe+=this.processTextOrObjNode(M,W,V):oe+=this.buildTextNode(M,W,"",V))}}else if(this.options.attributesGroupName&&W===this.options.attributesGroupName){const B=Object.keys(G[W]),S=B.length;for(let M=0;M<S;M++)N+=this.buildAttrPairStr(B[M],""+G[W][B[M]])}else oe+=this.processTextOrObjNode(G[W],W,V);return{attrStr:N,val:oe}};function b(G,V){return V=this.options.attributeValueProcessor(G,""+V),V=this.replaceEntitiesValue(V),this.options.suppressBooleanAttributes&&V==="true"?" "+G:" "+G+'="'+V+'"'}function w(G,V,N){const oe=this.j2x(G,N+1);return G[this.options.textNodeName]!==void 0&&Object.keys(G).length===1?this.buildTextNode(G[this.options.textNodeName],V,oe.attrStr,N):this.buildObjNode(oe.val,V,oe.attrStr,N)}function I(G,V,N,oe){let W="</"+V+this.tagEndChar,B="";return V[0]==="?"&&(B="?",W=""),N&&G.indexOf("<")===-1?this.indentate(oe)+"<"+V+N+B+">"+G+W:this.options.commentPropName!==!1&&V===this.options.commentPropName&&B.length===0?this.indentate(oe)+`<!--${G}-->`+this.newLine:this.indentate(oe)+"<"+V+N+B+this.tagEndChar+G+this.indentate(oe)+W}function E(G,V,N,oe){return G!==""?this.buildObjectNode(G,V,N,oe):V[0]==="?"?this.indentate(oe)+"<"+V+N+"?"+this.tagEndChar:this.indentate(oe)+"<"+V+N+"/"+this.tagEndChar}function z(G,V,N,oe){if(this.options.cdataPropName!==!1&&V===this.options.cdataPropName)return this.indentate(oe)+`<![CDATA[${G}]]>`+this.newLine;if(this.options.commentPropName!==!1&&V===this.options.commentPropName)return this.indentate(oe)+`<!--${G}-->`+this.newLine;{let W=this.options.tagValueProcessor(V,G);return W=this.replaceEntitiesValue(W),W===""&&this.options.unpairedTags.indexOf(V)!==-1?this.options.suppressUnpairedNode?this.indentate(oe)+"<"+V+this.tagEndChar:this.indentate(oe)+"<"+V+"/"+this.tagEndChar:this.indentate(oe)+"<"+V+N+">"+W+"</"+V+this.tagEndChar}}function O(G){if(G&&G.length>0&&this.options.processEntities)for(let V=0;V<this.options.entities.length;V++){const N=this.options.entities[V];G=G.replace(N.regex,N.val)}return G}function Q(G,V,N,oe){return G===""&&this.options.unpairedTags.indexOf(V)!==-1?this.options.suppressUnpairedNode?this.indentate(oe)+"<"+V+this.tagEndChar:this.indentate(oe)+"<"+V+"/"+this.tagEndChar:G!==""?this.buildTextValNode(G,V,N,oe):V[0]==="?"?this.indentate(oe)+"<"+V+N+"?"+this.tagEndChar:this.indentate(oe)+"<"+V+N+"/"+this.tagEndChar}function Y(G){return this.options.indentBy.repeat(G)}function pe(G){return G.startsWith(this.options.attributeNamePrefix)?G.substr(this.attrPrefixLen):!1}a.exports=l},{"./orderedJs2Xml":7}],7:[function(i,a,c){const f=`
`;function y(z,O){return l(z,O,"",0)}function l(z,O,Q,Y){let pe="",G="";O.format&&O.indentBy.length>0&&(G=f+""+O.indentBy.repeat(Y));for(let V=0;V<z.length;V++){const N=z[V],oe=b(N);let W="";if(Q.length===0?W=oe:W=`${Q}.${oe}`,oe===O.textNodeName){let Z=N[oe];I(W,O)||(Z=O.tagValueProcessor(oe,Z),Z=E(Z,O)),pe+=G+Z;continue}else if(oe===O.cdataPropName){pe+=G+`<![CDATA[${N[oe][0][O.textNodeName]}]]>`;continue}else if(oe===O.commentPropName){pe+=G+`<!--${N[oe][0][O.textNodeName]}-->`;continue}else if(oe[0]==="?"){const Z=w(N[":@"],O),X=oe==="?xml"?"":G;let J=N[oe][0][O.textNodeName];J=J.length!==0?" "+J:"",pe+=X+`<${oe}${J}${Z}?>`;continue}const B=w(N[":@"],O);let S=G+`<${oe}${B}`,M=l(N[oe],O,W,Y+1);O.unpairedTags.indexOf(oe)!==-1?O.suppressUnpairedNode?pe+=S+">":pe+=S+"/>":(!M||M.length===0)&&O.suppressEmptyNode?pe+=S+"/>":pe+=S+`>${M}${G}</${oe}>`}return pe}function b(z){const O=Object.keys(z);for(let Q=0;Q<O.length;Q++){const Y=O[Q];if(Y!==":@")return Y}}function w(z,O){let Q="";if(z&&!O.ignoreAttributes)for(let Y in z){let pe=O.attributeValueProcessor(Y,z[Y]);pe=E(pe,O),pe===!0&&O.suppressBooleanAttributes?Q+=` ${Y.substr(O.attributeNamePrefix.length)}`:Q+=` ${Y.substr(O.attributeNamePrefix.length)}="${pe}"`}return Q}function I(z,O){z=z.substr(0,z.length-O.textNodeName.length-1);let Q=z.substr(z.lastIndexOf(".")+1);for(let Y in O.stopNodes)if(O.stopNodes[Y]===z||O.stopNodes[Y]==="*."+Q)return!0;return!1}function E(z,O){if(z&&z.length>0&&O.processEntities)for(let Q=0;Q<O.entities.length;Q++){const Y=O.entities[Q];z=z.replace(Y.regex,Y.val)}return z}a.exports=y},{}],8:[function(i,a,c){function f(b,w){const I={};if(b[w+3]==="O"&&b[w+4]==="C"&&b[w+5]==="T"&&b[w+6]==="Y"&&b[w+7]==="P"&&b[w+8]==="E"){w=w+9;let E=1,z=!1,O=!1,Q=!1,Y="";for(;w<b.length;w++)if(b[w]==="<"){if(z&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="N"&&b[w+4]==="T"&&b[w+5]==="I"&&b[w+6]==="T"&&b[w+7]==="Y")w+=7,O=!0;else if(z&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="L"&&b[w+4]==="E"&&b[w+5]==="M"&&b[w+6]==="E"&&b[w+7]==="N"&&b[w+8]==="T")w+=8;else if(b[w+1]==="!"&&b[w+2]==="-"&&b[w+3]==="-")Q=!0;else throw new Error("Invalid DOCTYPE");E++,Y=""}else if(b[w]===">"){if(Q)if(b[w-1]==="-"&&b[w-2]==="-")Q=!1;else throw new Error("Invalid XML comment in DOCTYPE");else O&&(l(Y,I),O=!1);if(E--,E===0)break}else b[w]==="["?z=!0:Y+=b[w];if(E!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:I,i:w}}const y=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function l(b,w){const I=y.exec(b);I&&(w[I[1]]={regx:RegExp(`&${I[1]};`,"g"),val:I[3]})}a.exports=f},{}],9:[function(i,a,c){const f={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(l,b){return b},attributeValueProcessor:function(l,b){return b},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1},y=function(l){return Object.assign({},f,l)};c.buildOptions=y,c.defaultOptions=f},{}],10:[function(i,a,c){const f=i("../util"),y=i("./xmlNode"),l=i("./DocTypeReader"),b=i("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,f.nameRegexp);class w{constructor(Z){this.options=Z,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=I,this.parseXml=Y,this.parseTextData=E,this.resolveNameSpace=z,this.buildAttributesMap=Q,this.isItStopNode=V,this.replaceEntitiesValue=pe,this.readStopNodeData=B,this.saveTextToParentTag=G}}function I(M){const Z=Object.keys(M);for(let X=0;X<Z.length;X++){const J=Z[X];this.lastEntities[J]={regex:new RegExp("&"+J+";","g"),val:M[J]}}}function E(M,Z,X,J,ye,xe,be){if(M!==void 0&&(this.options.trimValues&&!J&&(M=M.trim()),M.length>0)){be||(M=this.replaceEntitiesValue(M));const te=this.options.tagValueProcessor(Z,M,X,ye,xe);return te==null?M:typeof te!=typeof M||te!==M?te:this.options.trimValues?S(M,this.options.parseTagValue,this.options.numberParseOptions):M.trim()===M?S(M,this.options.parseTagValue,this.options.numberParseOptions):M}}function z(M){if(this.options.removeNSPrefix){const Z=M.split(":"),X=M.charAt(0)==="/"?"/":"";if(Z[0]==="xmlns")return"";Z.length===2&&(M=X+Z[1])}return M}const O=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Q(M,Z){if(!this.options.ignoreAttributes&&typeof M=="string"){const X=f.getAllMatches(M,O),J=X.length,ye={};for(let xe=0;xe<J;xe++){const be=this.resolveNameSpace(X[xe][1]);let te=X[xe][4];const le=this.options.attributeNamePrefix+be;if(be.length)if(te!==void 0){this.options.trimValues&&(te=te.trim()),te=this.replaceEntitiesValue(te);const re=this.options.attributeValueProcessor(be,te,Z);re==null?ye[le]=te:typeof re!=typeof te||re!==te?ye[le]=re:ye[le]=S(te,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(ye[le]=!0)}if(!Object.keys(ye).length)return;if(this.options.attributesGroupName){const xe={};return xe[this.options.attributesGroupName]=ye,xe}return ye}}const Y=function(M){M=M.replace(/\r\n?/g,`
`);const Z=new y("!xml");let X=Z,J="",ye="";for(let xe=0;xe<M.length;xe++)if(M[xe]==="<")if(M[xe+1]==="/"){const te=oe(M,">",xe,"Closing Tag is not closed.");let le=M.substring(xe+2,te).trim();if(this.options.removeNSPrefix){const re=le.indexOf(":");re!==-1&&(le=le.substr(re+1))}X&&(J=this.saveTextToParentTag(J,X,ye)),ye=ye.substr(0,ye.lastIndexOf(".")),X=this.tagsNodeStack.pop(),J="",xe=te}else if(M[xe+1]==="?"){let te=W(M,xe,!1,"?>");if(!te)throw new Error("Pi Tag is not closed.");if(J=this.saveTextToParentTag(J,X,ye),!(this.options.ignoreDeclaration&&te.tagName==="?xml"||this.options.ignorePiTags)){const le=new y(te.tagName);le.add(this.options.textNodeName,""),te.tagName!==te.tagExp&&te.attrExpPresent&&(le[":@"]=this.buildAttributesMap(te.tagExp,ye)),X.addChild(le)}xe=te.closeIndex+1}else if(M.substr(xe+1,3)==="!--"){const te=oe(M,"-->",xe+4,"Comment is not closed.");if(this.options.commentPropName){const le=M.substring(xe+4,te-2);J=this.saveTextToParentTag(J,X,ye),X.add(this.options.commentPropName,[{[this.options.textNodeName]:le}])}xe=te}else if(M.substr(xe+1,2)==="!D"){const te=l(M,xe);this.docTypeEntities=te.entities,xe=te.i}else if(M.substr(xe+1,2)==="!["){const te=oe(M,"]]>",xe,"CDATA is not closed.")-2,le=M.substring(xe+9,te);if(J=this.saveTextToParentTag(J,X,ye),this.options.cdataPropName)X.add(this.options.cdataPropName,[{[this.options.textNodeName]:le}]);else{let re=this.parseTextData(le,X.tagname,ye,!0,!1,!0);re||(re=""),X.add(this.options.textNodeName,re)}xe=te+2}else{let te=W(M,xe,this.options.removeNSPrefix),le=te.tagName,re=te.tagExp,ne=te.attrExpPresent,ge=te.closeIndex;X&&J&&X.tagname!=="!xml"&&(J=this.saveTextToParentTag(J,X,ye,!1)),le!==Z.tagname&&(ye+=ye?"."+le:le);const Ee=X;if(Ee&&this.options.unpairedTags.indexOf(Ee.tagname)!==-1&&(X=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,ye,le)){let we="";if(re.length>0&&re.lastIndexOf("/")===re.length-1)xe=te.closeIndex;else if(this.options.unpairedTags.indexOf(le)!==-1)xe=te.closeIndex;else{const ze=this.readStopNodeData(M,le,ge+1);if(!ze)throw new Error(`Unexpected end of ${le}`);xe=ze.i,we=ze.tagContent}const Ne=new y(le);le!==re&&ne&&(Ne[":@"]=this.buildAttributesMap(re,ye)),we&&(we=this.parseTextData(we,le,ye,!0,ne,!0,!0)),ye=ye.substr(0,ye.lastIndexOf(".")),Ne.add(this.options.textNodeName,we),X.addChild(Ne)}else{if(re.length>0&&re.lastIndexOf("/")===re.length-1){le[le.length-1]==="/"?(le=le.substr(0,le.length-1),re=le):re=re.substr(0,re.length-1);const we=new y(le);le!==re&&ne&&(we[":@"]=this.buildAttributesMap(re,ye)),ye=ye.substr(0,ye.lastIndexOf(".")),X.addChild(we)}else{const we=new y(le);this.tagsNodeStack.push(X),le!==re&&ne&&(we[":@"]=this.buildAttributesMap(re,ye)),X.addChild(we),X=we}J="",xe=ge}}else J+=M[xe];return Z.child},pe=function(M){if(this.options.processEntities){for(let Z in this.docTypeEntities){const X=this.docTypeEntities[Z];M=M.replace(X.regx,X.val)}for(let Z in this.lastEntities){const X=this.lastEntities[Z];M=M.replace(X.regex,X.val)}if(this.options.htmlEntities)for(let Z in this.htmlEntities){const X=this.htmlEntities[Z];M=M.replace(X.regex,X.val)}}return M};function G(M,Z,X,J){return M&&(J===void 0&&(J=Object.keys(Z.child).length===0),M=this.parseTextData(M,Z.tagname,X,!1,Z[":@"]?Object.keys(Z[":@"]).length!==0:!1,J),M!==void 0&&M!==""&&Z.add(this.options.textNodeName,M),M=""),M}function V(M,Z,X){const J="*."+X;for(const ye in M){const xe=M[ye];if(J===xe||Z===xe)return!0}return!1}function N(M,Z,X=">"){let J,ye="";for(let xe=Z;xe<M.length;xe++){let be=M[xe];if(J)be===J&&(J="");else if(be==='"'||be==="'")J=be;else if(be===X[0])if(X[1]){if(M[xe+1]===X[1])return{data:ye,index:xe}}else return{data:ye,index:xe};else be==="	"&&(be=" ");ye+=be}}function oe(M,Z,X,J){const ye=M.indexOf(Z,X);if(ye===-1)throw new Error(J);return ye+Z.length-1}function W(M,Z,X,J=">"){const ye=N(M,Z+1,J);if(!ye)return;let xe=ye.data;const be=ye.index,te=xe.search(/\s/);let le=xe,re=!0;if(te!==-1&&(le=xe.substr(0,te).replace(/\s\s*$/,""),xe=xe.substr(te+1)),X){const ne=le.indexOf(":");ne!==-1&&(le=le.substr(ne+1),re=le!==ye.data.substr(ne+1))}return{tagName:le,tagExp:xe,closeIndex:be,attrExpPresent:re}}function B(M,Z,X){const J=X;for(;X<M.length;X++)if(M[X]==="<"&&M[X+1]==="/"){const ye=oe(M,">",X,`${Z} is not closed`);if(M.substring(X+2,ye).trim()===Z)return{tagContent:M.substring(J,X),i:ye};X=ye}}function S(M,Z,X){if(Z&&typeof M=="string"){const J=M.trim();return J==="true"?!0:J==="false"?!1:b(M,X)}else return f.isExist(M)?M:""}a.exports=w},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:f}=i("./OptionsBuilder"),y=i("./OrderedObjParser"),{prettify:l}=i("./node2json"),b=i("../validator");class w{constructor(E){this.externalEntities={},this.options=f(E)}parse(E,z){if(typeof E!="string")if(E.toString)E=E.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(z){z===!0&&(z={});const Y=b.validate(E,z);if(Y!==!0)throw Error(`${Y.err.msg}:${Y.err.line}:${Y.err.col}`)}const O=new y(this.options);O.addExternalEntities(this.externalEntities);const Q=O.parseXml(E);return this.options.preserveOrder||Q===void 0?Q:l(Q,this.options)}addEntity(E,z){if(z.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(E.indexOf("&")!==-1||E.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[E]=z}}a.exports=w},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function f(I,E){return y(I,E)}function y(I,E,z){let O;const Q={};for(let Y=0;Y<I.length;Y++){const pe=I[Y],G=l(pe);let V="";if(z===void 0?V=G:V=z+"."+G,G===E.textNodeName)O===void 0?O=pe[G]:O+=""+pe[G];else{if(G===void 0)continue;if(pe[G]){let N=y(pe[G],E,V);const oe=w(N,E);pe[":@"]?b(N,pe[":@"],V,E):Object.keys(N).length===1&&N[E.textNodeName]!==void 0&&!E.alwaysCreateTextNode?N=N[E.textNodeName]:Object.keys(N).length===0&&(E.alwaysCreateTextNode?N[E.textNodeName]="":N=""),Q[G]!==void 0?(Array.isArray(Q[G])||(Q[G]=[Q[G]]),Q[G].push(N)):E.isArray(G,V,oe)?Q[G]=[N]:Q[G]=N}}}return typeof O=="string"?O.length>0&&(Q[E.textNodeName]=O):O!==void 0&&(Q[E.textNodeName]=O),Q}function l(I){const E=Object.keys(I);for(let z=0;z<E.length;z++){const O=E[z];if(O!==":@")return O}}function b(I,E,z,O){if(E){const Q=Object.keys(E),Y=Q.length;for(let pe=0;pe<Y;pe++){const G=Q[pe];O.isArray(G,z+"."+G,!0,!0)?I[G]=[E[G]]:I[G]=E[G]}}}function w(I,E){const z=Object.keys(I).length;return!!(z===0||z===1&&I[E.textNodeName])}c.prettify=f},{}],13:[function(i,a,c){class f{constructor(l){this.tagname=l,this.child=[],this[":@"]={}}add(l,b){this.child.push({[l]:b})}addChild(l){l[":@"]&&Object.keys(l[":@"]).length>0?this.child.push({[l.tagname]:l.child,":@":l[":@"]}):this.child.push({[l.tagname]:l.child})}}a.exports=f},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(f,y,l,b,w){var I,E,z=w*8-b-1,O=(1<<z)-1,Q=O>>1,Y=-7,pe=l?w-1:0,G=l?-1:1,V=f[y+pe];for(pe+=G,I=V&(1<<-Y)-1,V>>=-Y,Y+=z;Y>0;I=I*256+f[y+pe],pe+=G,Y-=8);for(E=I&(1<<-Y)-1,I>>=-Y,Y+=b;Y>0;E=E*256+f[y+pe],pe+=G,Y-=8);if(I===0)I=1-Q;else{if(I===O)return E?NaN:(V?-1:1)*(1/0);E=E+Math.pow(2,b),I=I-Q}return(V?-1:1)*E*Math.pow(2,I-b)},c.write=function(f,y,l,b,w,I){var E,z,O,Q=I*8-w-1,Y=(1<<Q)-1,pe=Y>>1,G=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=b?0:I-1,N=b?1:-1,oe=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(z=isNaN(y)?1:0,E=Y):(E=Math.floor(Math.log(y)/Math.LN2),y*(O=Math.pow(2,-E))<1&&(E--,O*=2),E+pe>=1?y+=G/O:y+=G*Math.pow(2,1-pe),y*O>=2&&(E++,O/=2),E+pe>=Y?(z=0,E=Y):E+pe>=1?(z=(y*O-1)*Math.pow(2,w),E=E+pe):(z=y*Math.pow(2,pe-1)*Math.pow(2,w),E=0));w>=8;f[l+V]=z&255,V+=N,z/=256,w-=8);for(E=E<<w|z,Q+=w;Q>0;f[l+V]=E&255,V+=N,E/=256,Q-=8);f[l+V-N]|=oe*128}},{}],15:[function(i,a,c){const f=/^[-+]?0x[a-fA-F0-9]+$/,y=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const l={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function b(I,E={}){if(E=Object.assign({},l,E),!I||typeof I!="string")return I;let z=I.trim();if(E.skipLike!==void 0&&E.skipLike.test(z))return I;if(E.hex&&f.test(z))return Number.parseInt(z,16);{const O=y.exec(z);if(O){const Q=O[1],Y=O[2];let pe=w(O[3]);const G=O[4]||O[6];if(!E.leadingZeros&&Y.length>0&&Q&&z[2]!==".")return I;if(!E.leadingZeros&&Y.length>0&&!Q&&z[1]!==".")return I;{const V=Number(z),N=""+V;return N.search(/[eE]/)!==-1||G?E.eNotation?V:I:z.indexOf(".")!==-1?N==="0"&&pe===""||N===pe||Q&&N==="-"+pe?V:I:Y?pe===N||Q+pe===N?V:I:z===N||z===Q+N?V:I}}else return I}}function w(I){return I&&I.indexOf(".")!==-1&&(I=I.replace(/0+$/,""),I==="."?I="0":I[0]==="."?I="0"+I:I[I.length-1]==="."&&(I=I.substr(0,I.length-1))),I}a.exports=b},{}],16:[function(i,a,c){(function(f){(function(){var y=this&&this.__awaiter||function(z,O,Q,Y){function pe(G){return G instanceof Q?G:new Q(function(V){V(G)})}return new(Q||(Q=Promise))(function(G,V){function N(B){try{W(Y.next(B))}catch(S){V(S)}}function oe(B){try{W(Y.throw(B))}catch(S){V(S)}}function W(B){B.done?G(B.value):pe(B.value).then(N,oe)}W((Y=Y.apply(z,O||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const l=i("../auth"),b=i("../config"),w=i("./_xml"),I=z=>typeof btoa>"u"?f.from(z,"binary").toString("base64"):btoa(z);function E(z,O,Q){return y(this,void 0,void 0,function*(){const{apiUrl:Y,authHeader:pe,basicAuth:G,userAgent:V}=(0,b.getConfig)(),N=G&&`Basic ${I(`${G.username}:${G.password}`)}`,oe=(0,l.getAuthToken)()&&`Bearer ${(0,l.getAuthToken)()}`;let W=new URLSearchParams(O).toString();W&&(W=`?${W}`);const B=yield fetch(`${Y}/api${z}${W}`,Object.assign(Object.assign({},Q),{headers:Object.assign({Authorization:pe||N||oe||"","User-Agent":V},Q==null?void 0:Q.headers)})),S=B.headers.get("Content-Type");if(S!=null&&S.startsWith("application/xml")){const M=yield B.text();return yield w.xmlParser.parse(M)}if(S!=null&&S.startsWith("application/json"))return B.json();if(B.ok)return yield B.text();throw new Error(`OSM API: ${yield B.text()}`)})}c.osmFetch=E}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const f=i("fast-xml-parser");c.xmlParser=new f.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:y=>y!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const f=i("fast-xml-parser"),y=new f.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function l(I){return y.build({osm:{changeset:{tag:Object.entries(I).map(([E,z])=>({$k:E,$v:z}))}}})}c.createChangesetMetaXml=l;const b=(I,E,z)=>E.reduce((O,Q)=>{const Y={$id:Q.id,$version:z?0:Q.version,$changeset:I,tag:Object.entries(Q.tags||{}).map(([pe,G])=>({$k:pe,$v:G}))};switch(Q.type){case"node":{const pe=Object.assign(Object.assign({},Y),{$lat:Q.lat,$lon:Q.lon});return Object.assign(Object.assign({},O),{node:[...O.node,pe]})}case"way":{if(!Q.nodes)throw new Error("Way has no nodes");const pe=Object.assign(Object.assign({},Y),{nd:Q.nodes.map(G=>({$ref:G}))});return Object.assign(Object.assign({},O),{way:[...O.way,pe]})}case"relation":{if(!Q.members)throw new Error("Relation has no members");const pe=Object.assign(Object.assign({},Y),{member:Q.members.map(G=>({$type:G.type,$ref:G.ref,$role:G.role}))});return Object.assign(Object.assign({},O),{relation:[...O.relation,pe]})}default:return O}},{node:[],way:[],relation:[]});function w(I,E,z){return y.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},z),{create:[b(I,E.create,!0)],modify:[b(I,E.modify)],delete:[Object.assign({"$if-unused":!0},b(I,E.delete))]})})}c.createOsmChangeXml=w},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const f=i("../_xml");function y(I){return{changeset:+I.$.changeset,id:+I.$.id,timestamp:I.$.timestamp,uid:+I.$.uid,user:I.$.user,version:+I.$.version,tags:I.tag?Object.fromEntries(I.tag.map(E=>[E.$.k,E.$.v])):void 0}}const l=I=>{const E=[];if(I.node){const z=I.node.map(O=>Object.assign(Object.assign({type:"node"},y(O)),{lat:+O.$.lat,lon:+O.$.lon}));E.push(...z)}if(I.way){const z=I.way.map(O=>{var Q;return Object.assign(Object.assign({type:"way"},y(O)),{nodes:((Q=O.nd)===null||Q===void 0?void 0:Q.map(Y=>+Y.$.ref))||[]})});E.push(...z)}if(I.relation){const z=I.relation.map(O=>{var Q;return Object.assign(Object.assign({type:"relation"},y(O)),{members:((Q=O.member)===null||Q===void 0?void 0:Q.map(Y=>({ref:+Y.$.ref,role:Y.$.role,type:Y.$.type})))||[]})});E.push(...z)}return E};function b(I){var E,z,O;return{create:((E=I.osmChange[0].create)===null||E===void 0?void 0:E.flatMap(l))||[],modify:((z=I.osmChange[0].modify)===null||z===void 0?void 0:z.flatMap(l))||[],delete:((O=I.osmChange[0].delete)===null||O===void 0?void 0:O.flatMap(l))||[]}}c.parseOsmChangeJson=b;function w(I){const E=f.xmlParser.parse(I);return b(E)}c.parseOsmChangeXml=w},{"../_xml":17}],20:[function(i,a,c){var f=this&&this.__awaiter||function(b,w,I,E){function z(O){return O instanceof I?O:new I(function(Q){Q(O)})}return new(I||(I=Promise))(function(O,Q){function Y(V){try{G(E.next(V))}catch(N){Q(N)}}function pe(V){try{G(E.throw(V))}catch(N){Q(N)}}function G(V){V.done?O(V.value):z(V.value).then(Y,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const y=i("../_osmFetch");function l(b,w){return f(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/changeset/${b}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(w)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=l},{"../_osmFetch":16}],21:[function(i,a,c){var f=this&&this.__awaiter||function(w,I,E,z){function O(Q){return Q instanceof E?Q:new E(function(Y){Y(Q)})}return new(E||(E=Promise))(function(Q,Y){function pe(N){try{V(z.next(N))}catch(oe){Y(oe)}}function G(N){try{V(z.throw(N))}catch(oe){Y(oe)}}function V(N){N.done?Q(N.value):O(N.value).then(pe,G)}V((z=z.apply(w,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const y=i("../_osmFetch"),l=i("./_parseOsmChangeXml");function b(w){return f(this,void 0,void 0,function*(){const I=yield(0,y.osmFetch)(`/0.6/changeset/${w}/download`);return(0,l.parseOsmChangeJson)(I)})}c.getChangesetDiff=b},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var f=this&&this.__awaiter||function(E,z,O,Q){function Y(pe){return pe instanceof O?pe:new O(function(G){G(pe)})}return new(O||(O=Promise))(function(pe,G){function V(W){try{oe(Q.next(W))}catch(B){G(B)}}function N(W){try{oe(Q.throw(W))}catch(B){G(B)}}function oe(W){W.done?pe(W.value):Y(W.value).then(V,N)}oe((Q=Q.apply(E,z||[])).next())})},y=this&&this.__rest||function(E,z){var O={};for(var Q in E)Object.prototype.hasOwnProperty.call(E,Q)&&z.indexOf(Q)<0&&(O[Q]=E[Q]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Y=0,Q=Object.getOwnPropertySymbols(E);Y<Q.length;Y++)z.indexOf(Q[Y])<0&&Object.prototype.propertyIsEnumerable.call(E,Q[Y])&&(O[Q[Y]]=E[Q[Y]]);return O};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const l=i("../_osmFetch"),b=E=>{var z;return{id:+E.$.id,created_at:new Date(E.$.created_at),closed_at:new Date(E.$.closed_at),open:E.$.open==="true",comments_count:+E.$.comments_count,changes_count:+E.$.changes_count,min_lat:+E.$.min_lat,min_lon:+E.$.min_lon,max_lat:+E.$.max_lat,max_lon:+E.$.max_lon,uid:+E.$.uid,user:E.$.user,tags:Object.fromEntries(E.tag.map(O=>[O.$.k,O.$.v])),discussion:(z=E.discussion)===null||z===void 0?void 0:z[0].comment.map(O=>({date:new Date(O.$.date),user:O.$.user,uid:O.$.uid,text:O.text[0]}))}};function w(E){var z;return f(this,void 0,void 0,function*(){const{only:O}=E,Q=y(E,["only"]);return((z=(yield(0,l.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},O&&{[O]:!0}),Q))).osm[0].changeset)===null||z===void 0?void 0:z.map(b))||[]})}c.listChangesets=w;function I(E,z=!0){return f(this,void 0,void 0,function*(){return(yield(0,l.osmFetch)(`/0.6/changeset/${E}`,{include_discussion:z})).osm[0].changeset.map(b)[0]})}c.getChangeset=I},{"../_osmFetch":16}],23:[function(i,a,c){var f=this&&this.__createBinding||(Object.create?function(w,I,E,z){z===void 0&&(z=E);var O=Object.getOwnPropertyDescriptor(I,E);(!O||("get"in O?!I.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return I[E]}}),Object.defineProperty(w,z,O)}:function(w,I,E,z){z===void 0&&(z=E),w[z]=I[E]}),y=this&&this.__exportStar||function(w,I){for(var E in w)E!=="default"&&!Object.prototype.hasOwnProperty.call(I,E)&&f(I,w,E)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,y(i("./createChangesetComment"),c),y(i("./getChangesetDiff"),c),y(i("./getChangesets"),c),y(i("./uploadChangeset"),c);var l=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return l.parseOsmChangeXml}});var b=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return b.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var f=this&&this.__awaiter||function(w,I,E,z){function O(Q){return Q instanceof E?Q:new E(function(Y){Y(Q)})}return new(E||(E=Promise))(function(Q,Y){function pe(N){try{V(z.next(N))}catch(oe){Y(oe)}}function G(N){try{V(z.throw(N))}catch(oe){Y(oe)}}function V(N){N.done?Q(N.value):O(N.value).then(pe,G)}V((z=z.apply(w,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const y=i("../_osmFetch"),l=i("./_createOsmChangeXml");function b(w,I){return f(this,void 0,void 0,function*(){const E=(0,l.createChangesetMetaXml)(w),z=+(yield(0,y.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:E,headers:{"content-type":"application/xml; charset=utf-8"}})),O=(0,l.createOsmChangeXml)(z,I);return yield(0,y.osmFetch)(`/0.6/changeset/${z}/upload`,void 0,{method:"POST",body:O,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,y.osmFetch)(`/0.6/changeset/${z}/close`,void 0,{method:"PUT"}),+z})}c.uploadChangeset=b},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var f=this&&this.__awaiter||function(b,w,I,E){function z(O){return O instanceof I?O:new I(function(Q){Q(O)})}return new(I||(I=Promise))(function(O,Q){function Y(V){try{G(E.next(V))}catch(N){Q(N)}}function pe(V){try{G(E.throw(V))}catch(N){Q(N)}}function G(V){V.done?O(V.value):z(V.value).then(Y,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const y=i("./_osmFetch");function l(){return f(this,void 0,void 0,function*(){const b=yield(0,y.osmFetch)("/capabilities");return{limits:{maxArea:+b.osm[0].api[0].area[0].$.maximum,maxNoteArea:+b.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+b.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+b.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+b.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+b.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:b.osm[0].policy[0].imagery[0].blacklist.map(I=>I.$.regex)}}})}c.getCapabilities=l},{"./_osmFetch":16}],26:[function(i,a,c){var f=this&&this.__awaiter||function(O,Q,Y,pe){function G(V){return V instanceof Y?V:new Y(function(N){N(V)})}return new(Y||(Y=Promise))(function(V,N){function oe(S){try{B(pe.next(S))}catch(M){N(M)}}function W(S){try{B(pe.throw(S))}catch(M){N(M)}}function B(S){S.done?V(S.value):G(S.value).then(oe,W)}B((pe=pe.apply(O,Q||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const y=i("./_osmFetch");function l(O,Q,Y){return f(this,void 0,void 0,function*(){const pe=Y&&O!=="node"?"/full":"";return(yield(0,y.osmFetch)(`/0.6/${O}/${Q}${pe}.json`)).elements})}c.getFeature=l;function b(O,Q){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${O}s.json?${O}s=${Q.join(",")}`)).elements})}c.getFeatures=b;function w(O,Q,Y){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${O}/${Q}/${Y}.json`)).elements[0]})}c.getFeatureAtVersion=w;function I(O,Q){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${O}/${Q}/history.json`)).elements})}c.getFeatureHistory=I;function E(O){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/node/${O}/ways.json`)).elements})}c.getWaysForNode=E;function z(O,Q){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${O}/${Q}/relations.json`)).elements})}c.getRelationsForElement=z},{"./_osmFetch":16}],27:[function(i,a,c){var f=this&&this.__awaiter||function(b,w,I,E){function z(O){return O instanceof I?O:new I(function(Q){Q(O)})}return new(I||(I=Promise))(function(O,Q){function Y(V){try{G(E.next(V))}catch(N){Q(N)}}function pe(V){try{G(E.throw(V))}catch(N){Q(N)}}function G(V){V.done?O(V.value):z(V.value).then(Y,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const y=i("./_osmFetch");function l(b){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/map.json",{bbox:b})).elements})}c.getMapData=l},{"./_osmFetch":16}],28:[function(i,a,c){var f=this&&this.__awaiter||function(b,w,I,E){function z(O){return O instanceof I?O:new I(function(Q){Q(O)})}return new(I||(I=Promise))(function(O,Q){function Y(V){try{G(E.next(V))}catch(N){Q(N)}}function pe(V){try{G(E.throw(V))}catch(N){Q(N)}}function G(V){V.done?O(V.value):z(V.value).then(Y,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const y=i("./changesets");function l(b){return f(this,void 0,void 0,function*(){const w=yield(0,y.listChangesets)({display_name:b});if(!w.length)throw new Error("Could not get uid because the user has never edited the map");return w[0].uid})}c.getUIdFromDisplayName=l},{"./changesets":23}],29:[function(i,a,c){var f=this&&this.__awaiter||function(w,I,E,z){function O(Q){return Q instanceof E?Q:new E(function(Y){Y(Q)})}return new(E||(E=Promise))(function(Q,Y){function pe(N){try{V(z.next(N))}catch(oe){Y(oe)}}function G(N){try{V(z.throw(N))}catch(oe){Y(oe)}}function V(N){N.done?Q(N.value):O(N.value).then(pe,G)}V((z=z.apply(w,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const y=i("./_osmFetch");function l(w){return f(this,void 0,void 0,function*(){const I=yield(0,y.osmFetch)(`/0.6/user/${w==="me"?"details":w}.json`);return Object.assign(Object.assign({},I.user),{account_created:new Date(I.user.account_created)})})}c.getUser=l;function b(w){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/users",{users:w})).users.map(E=>Object.assign(Object.assign({},E),{account_created:new Date(E.account_created)}))})}c.getUsers=b},{"./_osmFetch":16}],30:[function(i,a,c){var f=this&&this.__createBinding||(Object.create?function(l,b,w,I){I===void 0&&(I=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,I,E)}:function(l,b,w,I){I===void 0&&(I=w),l[I]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&f(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./changesets"),c),y(i("./notes"),c),y(i("./getCapabilities"),c),y(i("./getFeature"),c),y(i("./getMapData"),c),y(i("./getUIdFromDisplayName"),c),y(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var f=this&&this.__awaiter||function(z,O,Q,Y){function pe(G){return G instanceof Q?G:new Q(function(V){V(G)})}return new(Q||(Q=Promise))(function(G,V){function N(B){try{W(Y.next(B))}catch(S){V(S)}}function oe(B){try{W(Y.throw(B))}catch(S){V(S)}}function W(B){B.done?G(B.value):pe(B.value).then(N,oe)}W((Y=Y.apply(z,O||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const y=i("../_osmFetch"),l=z=>{const[O,Q]=z.geometry.coordinates;return Object.assign(Object.assign({},z.properties),{location:{lat:Q,lng:O}})};function b(z,O){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/notes${O?"/search":""}.json`,z)).features.map(l)})}function w(z){return b(z,!0)}c.getNotesForQuery=w;function I(z){return b({bbox:z},!1)}c.getNotesForArea=I;function E(z){return f(this,void 0,void 0,function*(){const O=yield(0,y.osmFetch)(`/0.6/notes/${z}.json`);return l(O)})}c.getNote=E},{"../_osmFetch":16}],32:[function(i,a,c){var f=this&&this.__createBinding||(Object.create?function(l,b,w,I){I===void 0&&(I=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,I,E)}:function(l,b,w,I){I===void 0&&(I=w),l[I]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&f(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./getNotes"),c),y(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var f=this&&this.__awaiter||function(I,E,z,O){function Q(Y){return Y instanceof z?Y:new z(function(pe){pe(Y)})}return new(z||(z=Promise))(function(Y,pe){function G(oe){try{N(O.next(oe))}catch(W){pe(W)}}function V(oe){try{N(O.throw(oe))}catch(W){pe(W)}}function N(oe){oe.done?Y(oe.value):Q(oe.value).then(G,V)}N((O=O.apply(I,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const y=i("../_osmFetch");function l(I,E,z){return f(this,void 0,void 0,function*(){yield(0,y.osmFetch)("/0.6/notes",{lat:I,lon:E,text:z})})}c.createNote=l;function b(I,E){return f(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${I}/comment`,{text:E})})}c.commentOnNote=b;function w(I,E){return f(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${I}/reopen`,{text:E})})}c.reopenNote=w},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function f(y){let l=!1;return new Promise((b,w)=>{const[I,E]=[600,550],z=Object.entries({width:I,height:E,left:window.screen.width/2-I/2,top:window.screen.height/2-E/2}).map(([Y,pe])=>`${Y}=${pe}`).join(","),O=window.open("about:blank","oauth_window",z);if(!O)throw new Error("Popup was blocked");O.location=y,window.authComplete=Y=>{b(Y),l=!0};const Q=setInterval(()=>{O.closed&&(l||w(new Error("Cancelled")),clearInterval(Q))},500)})}c.createPopup=f},{}],35:[function(i,a,c){var f=this&&this.__awaiter||function(b,w,I,E){function z(O){return O instanceof I?O:new I(function(Q){Q(O)})}return new(I||(I=Promise))(function(O,Q){function Y(V){try{G(E.next(V))}catch(N){Q(N)}}function pe(V){try{G(E.throw(V))}catch(N){Q(N)}}function G(V){V.done?O(V.value):z(V.value).then(Y,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const y=i("./helpers");function l(b,{options:w,pkceVerifier:I,state:E}){return f(this,void 0,void 0,function*(){const z=new URL(b).searchParams,O=z.get("error_description"),Q=z.get("code"),Y=z.get("state");if(O)throw new Error(O);if(!Q)throw new Error("No code in OAuth response");if(!I||!E)throw new Error("No login in progress");if(E!==Y)throw new Error("State Mismatch");const pe={grant_type:"authorization_code",code:Q,redirect_uri:w.redirectUrl,client_id:w.clientId,code_verifier:I},G=`${(0,y.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(pe).toString()}`,N=yield(yield fetch(G,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in N)throw new Error(N.error_description);const oe={issuedAt:new Date(N.created_at*1e3).toISOString(),accessToken:N.access_token,scopes:N.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(oe)),delete window.authComplete,oe})}c.exchangeCode=l},{"./helpers":36}],36:[function(i,a,c){var f=this&&this.__awaiter||function(I,E,z,O){function Q(Y){return Y instanceof z?Y:new z(function(pe){pe(Y)})}return new(z||(z=Promise))(function(Y,pe){function G(oe){try{N(O.next(oe))}catch(W){pe(W)}}function V(oe){try{N(O.throw(oe))}catch(W){pe(W)}}function N(oe){oe.done?Y(oe.value):Q(oe.value).then(G,V)}N((O=O.apply(I,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const y=i("../config");function l(I){return f(this,void 0,void 0,function*(){const E=new TextEncoder().encode(I),z=yield window.crypto.subtle.digest("SHA-256",E);return btoa(String.fromCharCode(...new Uint8Array(z))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})}c.sha256=l;function b(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(I=>`0${I.toString(16)}`.slice(-2)).join("")}c.getRandomString=b;function w(){let I=(0,y.getConfig)().apiUrl;return I==="https://api.openstreetmap.org"&&(I="https://www.openstreetmap.org"),I}c.getOAuthBaseUrl=w},{"../config":39}],37:[function(i,a,c){var f=this&&this.__createBinding||(Object.create?function(l,b,w,I){I===void 0&&(I=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,I,E)}:function(l,b,w,I){I===void 0&&(I=w),l[I]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&f(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var f=this&&this.__awaiter||function(O,Q,Y,pe){function G(V){return V instanceof Y?V:new Y(function(N){N(V)})}return new(Y||(Y=Promise))(function(V,N){function oe(S){try{B(pe.next(S))}catch(M){N(M)}}function W(S){try{B(pe.throw(S))}catch(M){N(M)}}function B(S){S.done?V(S.value):G(S.value).then(oe,W)}B((pe=pe.apply(O,Q||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const y=i("./createPopup"),l=i("./exchangeCode"),b=i("./helpers");function w(O){return f(this,void 0,void 0,function*(){if(!O.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!O.clientId)throw new Error("You must include the 'clientId' option");if(!O.scopes)throw new Error("You must include the 'scopes' option");const Q=(0,b.getRandomString)(),Y=(0,b.getRandomString)(),pe=yield(0,b.sha256)(Y),G={scope:O.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:Q,redirect_uri:O.redirectUrl,client_id:O.clientId,code_challenge_method:"S256",code_challenge:pe},V=`${(0,b.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(G).toString()}`,N={state:Q,pkceVerifier:Y,options:O};if(O.mode==="popup"){const oe=yield(0,y.createPopup)(V);return(0,l.exchangeCode)(oe,N)}if(O.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(N)),window.location.replace(V);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=w,c.authReady=(()=>f(void 0,void 0,void 0,function*(){var O;if(typeof window>"u")return;const Q=window.location.href,Y=localStorage.getItem("__osmAuthTemp");if(new URL(Q).searchParams.get("code")){if(!((O=window.opener)===null||O===void 0)&&O.authComplete)window.opener.authComplete(Q),window.close();else if(Y)try{const pe=JSON.parse(Y);yield(0,l.exchangeCode)(Q,pe),localStorage.removeItem("__osmAuthTemp")}catch(pe){console.error("OSM Auth Error",pe)}}}))();const I=()=>{try{const O=localStorage.getItem("__osmAuth");return O?JSON.parse(O).accessToken:void 0}catch{return}};c.getAuthToken=I;const E=()=>!!(0,c.getAuthToken)();c.isLoggedIn=E;function z(){localStorage.removeItem("__osmAuth")}c.logout=z},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const f={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},y=()=>f;c.getConfig=y;function l(b){Object.assign(f,b)}c.configure=l},{}],40:[function(i,a,c){var f=this&&this.__createBinding||(Object.create?function(l,b,w,I){I===void 0&&(I=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,I,E)}:function(l,b,w,I){I===void 0&&(I=w),l[I]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&f(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),i("./polyfill"),y(i("./api"),c),y(i("./auth"),c),y(i("./config"),c),y(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./polyfill":41,"./types":45}],41:[function(i,a,c){if(typeof fetch>"u")try{i("isomorphic-fetch")}catch{console.error([`
==========
`,"(!) The `fetch` API is not available, and the polyfill (`isomorphic-fetch`) is also not available.","Run `npm install isomorphic-fetch`, or make sure that the global variable `fetch` exists",`
==========
`].join(`
`))}},{"isomorphic-fetch":"isomorphic-fetch"}],42:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],43:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],44:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],45:[function(i,a,c){var f=this&&this.__createBinding||(Object.create?function(l,b,w,I){I===void 0&&(I=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,I,E)}:function(l,b,w,I){I===void 0&&(I=w),l[I]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&f(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./changesets"),c),y(i("./features"),c),y(i("./general"),c),y(i("./notes"),c),y(i("./user"),c)},{"./changesets":42,"./features":43,"./general":44,"./notes":46,"./user":47}],46:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],47:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}]},{},[40])(40)})})(MC);var Es=MC.exports;const kC=()=>{const[e,t]=wt.useState(!1);wt.useEffect(()=>{t(Es.isLoggedIn())},[]);const i=wt.useCallback(()=>{(async()=>(await Es.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Es.isLoggedIn()),window.location.reload()))()},[]),a=wt.useCallback(()=>{(async()=>(Es.logout(),t(!1)))()},[]);return gt.jsx(gt.Fragment,{children:e?gt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):gt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},Qz=()=>{const[e,t]=wt.useState(!1),[i,a]=wt.useState(void 0);return wt.useEffect(()=>{t(Es.isLoggedIn())},[]),wt.useEffect(()=>{e&&(async()=>{const c=await Es.getUser("me");a(c)})()},[e]),gt.jsx(gt.Fragment,{children:i?gt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):gt.jsx("img",{})})},e5=()=>{const[e,t]=wt.useState(!1),[i,a]=wt.useState(void 0);return wt.useEffect(()=>{t(Es.isLoggedIn())},[]),wt.useEffect(()=>{e&&(async()=>{const c=await Es.getUser("me");a(c)})()},[e]),gt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[gt.jsxs("div",{children:[gt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?gt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):gt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),gt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[gt.jsx("div",{children:gt.jsx(Qz,{})}),gt.jsx("div",{children:gt.jsx(kC,{})})]})]})},zC=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return gt.jsxs(gt.Fragment,{children:[gt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",gt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},t5=({feature:e})=>gt.jsx(gt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return gt.jsxs("div",{className:t,children:[gt.jsx("span",{className:"underline",children:t})," = ",gt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function Cf(e,t,i){return parseInt(e.substr(t,i),16)}function LC(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function o0(e,t,i){return i=i<0?i+6:i>6?i-6:i,LC(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function n5(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],f=e[3],y=e[4]||"";t="#"+a+a+c+c+f+f+y+y}return(i==7||i>8)&&(t=e),t}}function r5(e,t,i){let a;if(t==0){const c=LC(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,f=i*2-c;a=o0(f,c,e*6+2)+o0(f,c,e*6)+o0(f,c,e*6-2)}return"#"+a}function xf(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,r5(e,t,i)}const i5=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},_2={V:"jdenticon_config",n:"config"};var o5={};function s5(e,t){const i=typeof e=="object"&&e||o5[_2.n]||i5[_2.V]||{},a=i.lightness||{},c=i.saturation||{},f="color"in c?c.color:c,y=c.grayscale,l=i.backColor,b=i.padding;function w(E,z){let O=a[E];return O&&O.length>1||(O=z),function(Q){return Q=O[0]+Q*(O[1]-O[0]),Q<0?0:Q>1?1:Q}}function I(E){const z=i.hues;let O;return z&&z.length>0&&(O=z[0|.999*E*z.length]),typeof O=="number"?(O/360%1+1)%1:E}return{W:I,o:typeof f=="number"?f:.5,D:typeof y=="number"?y:0,p:w("color",[.4,.8]),F:w("grayscale",[.3,.9]),G:n5(l),X:typeof e=="number"?e:typeof b=="number"?b:t}}let Tp=class{constructor(t,i){this.x=t,this.y=i}};class RC{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const f=this.q+this.H,y=this.t+this.H,l=this.Y;return l===1?new Tp(f-i-(c||0),this.t+t):l===2?new Tp(f-t-(a||0),y-i-(c||0)):l===3?new Tp(this.q+i,y-t-(a||0)):new Tp(this.q+t,this.t+i)}}const a5=new RC(0,0,0,0);class l5{constructor(t){this.J=t,this.u=a5}g(t,i){const a=i?-2:2,c=[];for(let f=i?t.length-2:0;f<t.length&&f>=0;f+=a)c.push(this.u.I(t[f],t[f+1]));this.J.g(c)}h(t,i,a,c){const f=this.u.I(t,i,a,a);this.J.h(f,a,c)}i(t,i,a,c,f){this.g([t,i,t+a,i,t+a,i+c,t,i+c],f)}j(t,i,a,c,f,y){const l=[t+a,i,t+a,i+c,t,i+c,t,i];l.splice((f||0)%4*2,2),this.g(l,y)}K(t,i,a,c,f){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],f)}}function u5(e,t,i,a){e=e%14;let c,f,y,l,b,w;e?e==1?(y=0|i*.5,l=0|i*.8,t.j(i-y,0,y,l,2)):e==2?(y=0|i/3,t.i(y,y,i-y,i-y)):e==3?(b=i*.1,w=i<6?1:i<8?2:0|i*.25,b=b>1?0|b:b>.5?1:b,t.i(w,w,i-b-w,i-b-w)):e==4?(f=0|i*.15,y=0|i*.5,t.h(i-y-f,i-y-f,y)):e==5?(b=i*.1,w=b*4,w>3&&(w=0|w),t.i(0,0,i,i),t.g([w,w,i-b,w,w+(i-w-b)/2,i-b],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(b=i*.14,w=i<4?1:i<6?2:0|i*.35,b=i<8?b:0|b,t.i(0,0,i,i),t.i(w,w,i-w-b,i-w-b,!0)):e==10?(b=i*.12,w=b*3,t.i(0,0,i,i),t.h(w,w,i-b-w,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(f=i*.25,t.i(0,0,i,i),t.K(f,f,i-f,i-f,!0)):!a&&(f=i*.4,y=i*1.2,t.h(f,f,y)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function x2(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function c5(e,t){return e=t.W(e),[xf(e,t.D,t.F(0)),xf(e,t.o,t.p(.5)),xf(e,t.D,t.F(1)),xf(e,t.o,t.p(1)),xf(e,t.o,t.p(0))]}function h5(e,t,i){const a=s5(i,.08);a.G&&e.m(a.G);let c=e.k;const f=.5+c*a.X|0;c-=f*2;const y=new l5(e),l=0|c/4,b=0|f+c/2-l*2,w=0|f+c/2-l*2;function I(pe,G,V,N,oe){const W=Cf(t,V,1);let B=N?Cf(t,N,1):0;e.L(z[O[pe]]);for(let S=0;S<oe.length;S++)y.u=new RC(b+oe[S][0]*l,w+oe[S][1]*l,l,B++%4),G(W,y,l,S);e.M()}const E=Cf(t,-7)/268435455,z=c5(E,a),O=[];let Q;function Y(pe){if(pe.indexOf(Q)>=0){for(let G=0;G<pe.length;G++)if(O.indexOf(pe[G])>=0)return!0}}for(let pe=0;pe<3;pe++)Q=Cf(t,8+pe,1)%z.length,(Y([0,4])||Y([2,3]))&&(Q=1),O.push(Q);I(0,x2,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),I(1,x2,4,5,[[0,0],[3,0],[3,3],[0,3]]),I(2,u5,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function f5(e){var a=0,c=0,f=encodeURI(e)+"%80",y=[],l,b=[],w=1732584193,I=4023233417,E=~w,z=~I,O=3285377520,Q=[w,I,E,z,O],Y=0,pe="";function G(V,N){return V<<N|V>>>32-N}for(;a<f.length;c++)y[c>>2]=y[c>>2]|(f[a]=="%"?parseInt(f.substring(a+1,a+=3),16):f.charCodeAt(a++))<<(3-(c&3))*8;for(l=((c+7>>6)+1)*16,y[l-1]=c*8-8;Y<l;Y+=16){for(a=0;a<80;a++)c=G(w,5)+O+(a<20?(I&E^~I&z)+1518500249:a<40?(I^E^z)+1859775393:a<60?(I&E^I&z^E&z)+2400959708:(I^E^z)+3395469782)+(b[a]=a<16?y[Y+a]|0:G(b[a-3]^b[a-8]^b[a-14]^b[a-16],1)),O=z,z=E,E=G(I,30),I=w,w=c;Q[0]=w=Q[0]+w|0,Q[1]=I=Q[1]+I|0,Q[2]=E=Q[2]+E|0,Q[3]=z=Q[3]+z|0,Q[4]=O=Q[4]+O|0}for(a=0;a<40;a++)pe+=(Q[a>>3]>>>(7-(a&7))*4&15).toString(16);return pe}function d5(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function p5(e){return f5(e==null?"":""+e)}function Cc(e){return(e*10+.5|0)/10}class m5{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+Cc(t[a].x)+" "+Cc(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,f=Cc(i/2),y=Cc(i),l="a"+f+","+f+" 0 1,"+c+" ";this.v+="M"+Cc(t.x)+" "+Cc(t.y+i/2)+l+y+",0"+l+-y+",0"}}class g5{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?Cf(i[2],0)/255:1;this.N.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new m5)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.N.O(i,t[i].v)}}const y5={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class v5{constructor(t){this.k=t,this.C='<svg xmlns="'+y5.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}O(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function _5(e,t,i){const a=new v5(t);return h5(new g5(a),d5(e)||p5(e),i),a.toString()}typeof document<"u"&&document.querySelectorAll.bind(document);const x5=({feature:e,size:t})=>e.properties===null?null:gt.jsx(gt.Fragment,{children:e.properties.userIconHref.length>0?gt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):gt.jsx("span",{dangerouslySetInnerHTML:{__html:_5(e.properties.user||"noname",t)}})}),w5=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?gt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};/*!
 * Font Awesome Free 6.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var b5={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"]};const E5=({viewState:e})=>{const[t,i]=wt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return wt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),gt.jsx(gt.Fragment,{children:e&&t&&gt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[gt.jsx(ia,{icon:b5,style:{padding:"0px 3px"}}),gt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var OC={};class Ri{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const f=i[c],y=t+f,l=Math.abs(t)<Math.abs(f)?t-(y-f):f-(y-t);l&&(i[a++]=l),t=y}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,f,y=0;if(i>0){for(y=t[--i];i>0&&(a=y,c=t[--i],y=a+c,f=c-(y-a),!f););i>0&&(f<0&&t[i-1]<0||f>0&&t[i-1]>0)&&(c=f*2,a=y+c,c==a-y&&(y=a))}return y}}function*S5(e){for(const t of e)yield*t}function FC(e){return Array.from(S5(e))}function Xc(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,f=new Array(c);++a<c;)f[a]=e+a*i;return f}var fn=1e-6,dd=1e-12,zn=Math.PI,Br=zn/2,Lm=zn/4,Ji=zn*2,cr=180/zn,pn=zn/180,$n=Math.abs,bh=Math.atan,Qi=Math.atan2,on=Math.cos,Cp=Math.ceil,jC=Math.exp,Bv=Math.hypot,Rm=Math.log,s0=Math.pow,Yt=Math.sin,es=Math.sign||function(e){return e>0?1:e<0?-1:0},fi=Math.sqrt,T1=Math.tan;function DC(e){return e>1?0:e<-1?zn:Math.acos(e)}function eo(e){return e>1?Br:e<-1?-Br:Math.asin(e)}function w2(e){return(e=Yt(e/2))*e}function zr(){}function Om(e,t){e&&E2.hasOwnProperty(e.type)&&E2[e.type](e,t)}var b2={Feature:function(e,t){Om(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)Om(i[a].geometry,t)}},E2={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){Nv(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)Nv(i[a],t,0)},Polygon:function(e,t){S2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)S2(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)Om(i[a],t)}};function Nv(e,t,i){var a=-1,c=e.length-i,f;for(t.lineStart();++a<c;)f=e[a],t.point(f[0],f[1],f[2]);t.lineEnd()}function S2(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)Nv(e[i],t,1);t.polygonEnd()}function xs(e,t){e&&b2.hasOwnProperty(e.type)?b2[e.type](e,t):Om(e,t)}var Fm=new Ri,jm=new Ri,BC,NC,Uv,$v,Vv,oa={point:zr,lineStart:zr,lineEnd:zr,polygonStart:function(){Fm=new Ri,oa.lineStart=T5,oa.lineEnd=C5},polygonEnd:function(){var e=+Fm;jm.add(e<0?Ji+e:e),this.lineStart=this.lineEnd=this.point=zr},sphere:function(){jm.add(Ji)}};function T5(){oa.point=I5}function C5(){UC(BC,NC)}function I5(e,t){oa.point=UC,BC=e,NC=t,e*=pn,t*=pn,Uv=e,$v=on(t=t/2+Lm),Vv=Yt(t)}function UC(e,t){e*=pn,t*=pn,t=t/2+Lm;var i=e-Uv,a=i>=0?1:-1,c=a*i,f=on(t),y=Yt(t),l=Vv*y,b=$v*f+l*on(c),w=l*a*Yt(c);Fm.add(Qi(w,b)),Uv=e,$v=f,Vv=y}function A5(e){return jm=new Ri,xs(e,oa),jm*2}function Dm(e){return[Qi(e[1],e[0]),eo(e[2])]}function Ou(e){var t=e[0],i=e[1],a=on(i);return[a*on(t),a*Yt(t),Yt(i)]}function Ip(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function dh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function a0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ap(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Bm(e){var t=fi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Mr,po,jr,ko,wu,$C,VC,rh,Gf,xl,Ba,Aa={point:Gv,lineStart:T2,lineEnd:C2,polygonStart:function(){Aa.point=ZC,Aa.lineStart=P5,Aa.lineEnd=M5,Gf=new Ri,oa.polygonStart()},polygonEnd:function(){oa.polygonEnd(),Aa.point=Gv,Aa.lineStart=T2,Aa.lineEnd=C2,Fm<0?(Mr=-(jr=180),po=-(ko=90)):Gf>fn?ko=90:Gf<-fn&&(po=-90),Ba[0]=Mr,Ba[1]=jr},sphere:function(){Mr=-(jr=180),po=-(ko=90)}};function Gv(e,t){xl.push(Ba=[Mr=e,jr=e]),t<po&&(po=t),t>ko&&(ko=t)}function GC(e,t){var i=Ou([e*pn,t*pn]);if(rh){var a=dh(rh,i),c=[a[1],-a[0],0],f=dh(c,a);Bm(f),f=Dm(f);var y=e-wu,l=y>0?1:-1,b=f[0]*cr*l,w,I=$n(y)>180;I^(l*wu<b&&b<l*e)?(w=f[1]*cr,w>ko&&(ko=w)):(b=(b+360)%360-180,I^(l*wu<b&&b<l*e)?(w=-f[1]*cr,w<po&&(po=w)):(t<po&&(po=t),t>ko&&(ko=t))),I?e<wu?Mo(Mr,e)>Mo(Mr,jr)&&(jr=e):Mo(e,jr)>Mo(Mr,jr)&&(Mr=e):jr>=Mr?(e<Mr&&(Mr=e),e>jr&&(jr=e)):e>wu?Mo(Mr,e)>Mo(Mr,jr)&&(jr=e):Mo(e,jr)>Mo(Mr,jr)&&(Mr=e)}else xl.push(Ba=[Mr=e,jr=e]);t<po&&(po=t),t>ko&&(ko=t),rh=i,wu=e}function T2(){Aa.point=GC}function C2(){Ba[0]=Mr,Ba[1]=jr,Aa.point=Gv,rh=null}function ZC(e,t){if(rh){var i=e-wu;Gf.add($n(i)>180?i+(i>0?360:-360):i)}else $C=e,VC=t;oa.point(e,t),GC(e,t)}function P5(){oa.lineStart()}function M5(){ZC($C,VC),oa.lineEnd(),$n(Gf)>fn&&(Mr=-(jr=180)),Ba[0]=Mr,Ba[1]=jr,rh=null}function Mo(e,t){return(t-=e)<0?t+360:t}function k5(e,t){return e[0]-t[0]}function I2(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function z5(e){var t,i,a,c,f,y,l;if(ko=jr=-(Mr=po=1/0),xl=[],xs(e,Aa),i=xl.length){for(xl.sort(k5),t=1,a=xl[0],f=[a];t<i;++t)c=xl[t],I2(a,c[0])||I2(a,c[1])?(Mo(a[0],c[1])>Mo(a[0],a[1])&&(a[1]=c[1]),Mo(c[0],a[1])>Mo(a[0],a[1])&&(a[0]=c[0])):f.push(a=c);for(y=-1/0,i=f.length-1,t=0,a=f[i];t<=i;a=c,++t)c=f[t],(l=Mo(a[1],c[0]))>y&&(y=l,Mr=c[0],jr=a[1])}return xl=Ba=null,Mr===1/0||po===1/0?[[NaN,NaN],[NaN,NaN]]:[[Mr,po],[jr,ko]]}var If,Nm,Um,$m,Vm,Gm,Zm,Wm,Zv,Wv,Hv,WC,HC,Xi,qi,Ki,Ss={sphere:zr,point:C1,lineStart:A2,lineEnd:P2,polygonStart:function(){Ss.lineStart=O5,Ss.lineEnd=F5},polygonEnd:function(){Ss.lineStart=A2,Ss.lineEnd=P2}};function C1(e,t){e*=pn,t*=pn;var i=on(t);Td(i*on(e),i*Yt(e),Yt(t))}function Td(e,t,i){++If,Um+=(e-Um)/If,$m+=(t-$m)/If,Vm+=(i-Vm)/If}function A2(){Ss.point=L5}function L5(e,t){e*=pn,t*=pn;var i=on(t);Xi=i*on(e),qi=i*Yt(e),Ki=Yt(t),Ss.point=R5,Td(Xi,qi,Ki)}function R5(e,t){e*=pn,t*=pn;var i=on(t),a=i*on(e),c=i*Yt(e),f=Yt(t),y=Qi(fi((y=qi*f-Ki*c)*y+(y=Ki*a-Xi*f)*y+(y=Xi*c-qi*a)*y),Xi*a+qi*c+Ki*f);Nm+=y,Gm+=y*(Xi+(Xi=a)),Zm+=y*(qi+(qi=c)),Wm+=y*(Ki+(Ki=f)),Td(Xi,qi,Ki)}function P2(){Ss.point=C1}function O5(){Ss.point=j5}function F5(){XC(WC,HC),Ss.point=C1}function j5(e,t){WC=e,HC=t,e*=pn,t*=pn,Ss.point=XC;var i=on(t);Xi=i*on(e),qi=i*Yt(e),Ki=Yt(t),Td(Xi,qi,Ki)}function XC(e,t){e*=pn,t*=pn;var i=on(t),a=i*on(e),c=i*Yt(e),f=Yt(t),y=qi*f-Ki*c,l=Ki*a-Xi*f,b=Xi*c-qi*a,w=Bv(y,l,b),I=eo(w),E=w&&-I/w;Zv.add(E*y),Wv.add(E*l),Hv.add(E*b),Nm+=I,Gm+=I*(Xi+(Xi=a)),Zm+=I*(qi+(qi=c)),Wm+=I*(Ki+(Ki=f)),Td(Xi,qi,Ki)}function D5(e){If=Nm=Um=$m=Vm=Gm=Zm=Wm=0,Zv=new Ri,Wv=new Ri,Hv=new Ri,xs(e,Ss);var t=+Zv,i=+Wv,a=+Hv,c=Bv(t,i,a);return c<dd&&(t=Gm,i=Zm,a=Wm,Nm<fn&&(t=Um,i=$m,a=Vm),c=Bv(t,i,a),c<dd)?[NaN,NaN]:[Qi(i,t)*cr,eo(a/c)*cr]}function Ic(e){return function(){return e}}function Xv(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function qv(e,t){return[$n(e)>zn?e+Math.round(-e/Ji)*Ji:e,t]}qv.invert=qv;function I1(e,t,i){return(e%=Ji)?t||i?Xv(k2(e),z2(t,i)):k2(e):t||i?z2(t,i):qv}function M2(e){return function(t,i){return t+=e,[t>zn?t-Ji:t<-zn?t+Ji:t,i]}}function k2(e){var t=M2(e);return t.invert=M2(-e),t}function z2(e,t){var i=on(e),a=Yt(e),c=on(t),f=Yt(t);function y(l,b){var w=on(b),I=on(l)*w,E=Yt(l)*w,z=Yt(b),O=z*i+I*a;return[Qi(E*c-O*f,I*i-z*a),eo(O*c+E*f)]}return y.invert=function(l,b){var w=on(b),I=on(l)*w,E=Yt(l)*w,z=Yt(b),O=z*c-E*f;return[Qi(E*c+z*f,I*i+O*a),eo(O*i-I*a)]},y}function qC(e){e=I1(e[0]*pn,e[1]*pn,e.length>2?e[2]*pn:0);function t(i){return i=e(i[0]*pn,i[1]*pn),i[0]*=cr,i[1]*=cr,i}return t.invert=function(i){return i=e.invert(i[0]*pn,i[1]*pn),i[0]*=cr,i[1]*=cr,i},t}function KC(e,t,i,a,c,f){if(i){var y=on(t),l=Yt(t),b=a*i;c==null?(c=t+a*Ji,f=t-b/2):(c=L2(y,c),f=L2(y,f),(a>0?c<f:c>f)&&(c+=a*Ji));for(var w,I=c;a>0?I>f:I<f;I-=b)w=Dm([y,-l*on(I),-l*Yt(I)]),e.point(w[0],w[1])}}function L2(e,t){t=Ou(t),t[0]-=e,Bm(t);var i=DC(-t[1]);return((-t[2]<0?-i:i)+Ji-fn)%Ji}function B5(){var e=Ic([0,0]),t=Ic(90),i=Ic(6),a,c,f={point:y};function y(b,w){a.push(b=c(b,w)),b[0]*=cr,b[1]*=cr}function l(){var b=e.apply(this,arguments),w=t.apply(this,arguments)*pn,I=i.apply(this,arguments)*pn;return a=[],c=I1(-b[0]*pn,-b[1]*pn,0).invert,KC(f,w,I,1),b={type:"Polygon",coordinates:[a]},a=c=null,b}return l.center=function(b){return arguments.length?(e=typeof b=="function"?b:Ic([+b[0],+b[1]]),l):e},l.radius=function(b){return arguments.length?(t=typeof b=="function"?b:Ic(+b),l):t},l.precision=function(b){return arguments.length?(i=typeof b=="function"?b:Ic(+b),l):i},l}function YC(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:zr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function Kp(e,t){return $n(e[0]-t[0])<fn&&$n(e[1]-t[1])<fn}function Pp(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function JC(e,t,i,a,c){var f=[],y=[],l,b;if(e.forEach(function(Q){if(!((Y=Q.length-1)<=0)){var Y,pe=Q[0],G=Q[Y],V;if(Kp(pe,G)){if(!pe[2]&&!G[2]){for(c.lineStart(),l=0;l<Y;++l)c.point((pe=Q[l])[0],pe[1]);c.lineEnd();return}G[0]+=2*fn}f.push(V=new Pp(pe,Q,null,!0)),y.push(V.o=new Pp(pe,null,V,!1)),f.push(V=new Pp(G,Q,null,!1)),y.push(V.o=new Pp(G,null,V,!0))}}),!!f.length){for(y.sort(t),R2(f),R2(y),l=0,b=y.length;l<b;++l)y[l].e=i=!i;for(var w=f[0],I,E;;){for(var z=w,O=!0;z.v;)if((z=z.n)===w)return;I=z.z,c.lineStart();do{if(z.v=z.o.v=!0,z.e){if(O)for(l=0,b=I.length;l<b;++l)c.point((E=I[l])[0],E[1]);else a(z.x,z.n.x,1,c);z=z.n}else{if(O)for(I=z.p.z,l=I.length-1;l>=0;--l)c.point((E=I[l])[0],E[1]);else a(z.x,z.p.x,-1,c);z=z.p}z=z.o,I=z.z,O=!O}while(!z.v);c.lineEnd()}}}function R2(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function l0(e){return $n(e[0])<=zn?e[0]:es(e[0])*(($n(e[0])+zn)%Ji-zn)}function QC(e,t){var i=l0(t),a=t[1],c=Yt(a),f=[Yt(i),-on(i),0],y=0,l=0,b=new Ri;c===1?a=Br+fn:c===-1&&(a=-Br-fn);for(var w=0,I=e.length;w<I;++w)if(z=(E=e[w]).length)for(var E,z,O=E[z-1],Q=l0(O),Y=O[1]/2+Lm,pe=Yt(Y),G=on(Y),V=0;V<z;++V,Q=oe,pe=B,G=S,O=N){var N=E[V],oe=l0(N),W=N[1]/2+Lm,B=Yt(W),S=on(W),M=oe-Q,Z=M>=0?1:-1,X=Z*M,J=X>zn,ye=pe*B;if(b.add(Qi(ye*Z*Yt(X),G*S+ye*on(X))),y+=J?M+Z*Ji:M,J^Q>=i^oe>=i){var xe=dh(Ou(O),Ou(N));Bm(xe);var be=dh(f,xe);Bm(be);var te=(J^M>=0?-1:1)*eo(be[2]);(a>te||a===te&&(xe[0]||xe[1]))&&(l+=J^M>=0?1:-1)}}return(y<-fn||y<fn&&b<-dd)^l&1}function eI(e,t,i,a){return function(c){var f=t(c),y=YC(),l=t(y),b=!1,w,I,E,z={point:O,lineStart:Y,lineEnd:pe,polygonStart:function(){z.point=G,z.lineStart=V,z.lineEnd=N,I=[],w=[]},polygonEnd:function(){z.point=O,z.lineStart=Y,z.lineEnd=pe,I=FC(I);var oe=QC(w,a);I.length?(b||(c.polygonStart(),b=!0),JC(I,U5,oe,i,c)):oe&&(b||(c.polygonStart(),b=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),b&&(c.polygonEnd(),b=!1),I=w=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function O(oe,W){e(oe,W)&&c.point(oe,W)}function Q(oe,W){f.point(oe,W)}function Y(){z.point=Q,f.lineStart()}function pe(){z.point=O,f.lineEnd()}function G(oe,W){E.push([oe,W]),l.point(oe,W)}function V(){l.lineStart(),E=[]}function N(){G(E[0][0],E[0][1]),l.lineEnd();var oe=l.clean(),W=y.result(),B,S=W.length,M,Z,X;if(E.pop(),w.push(E),E=null,!!S){if(oe&1){if(Z=W[0],(M=Z.length-1)>0){for(b||(c.polygonStart(),b=!0),c.lineStart(),B=0;B<M;++B)c.point((X=Z[B])[0],X[1]);c.lineEnd()}return}S>1&&oe&2&&W.push(W.pop().concat(W.shift())),I.push(W.filter(N5))}}return z}}function N5(e){return e.length>1}function U5(e,t){return((e=e.x)[0]<0?e[1]-Br-fn:Br-e[1])-((t=t.x)[0]<0?t[1]-Br-fn:Br-t[1])}const Kv=eI(function(){return!0},$5,G5,[-zn,-Br]);function $5(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(f,y){var l=f>0?zn:-zn,b=$n(f-t);$n(b-zn)<fn?(e.point(t,i=(i+y)/2>0?Br:-Br),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),e.point(f,i),c=0):a!==l&&b>=zn&&($n(t-a)<fn&&(t-=a*fn),$n(f-l)<fn&&(f-=l*fn),i=V5(t,i,f,y),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),c=0),e.point(t=f,i=y),a=l},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function V5(e,t,i,a){var c,f,y=Yt(e-i);return $n(y)>fn?bh((Yt(t)*(f=on(a))*Yt(i)-Yt(a)*(c=on(t))*Yt(e))/(c*f*y)):(t+a)/2}function G5(e,t,i,a){var c;if(e==null)c=i*Br,a.point(-zn,c),a.point(0,c),a.point(zn,c),a.point(zn,0),a.point(zn,-c),a.point(0,-c),a.point(-zn,-c),a.point(-zn,0),a.point(-zn,c);else if($n(e[0]-t[0])>fn){var f=e[0]<t[0]?zn:-zn;c=i*f/2,a.point(-f,c),a.point(0,c),a.point(f,c)}else a.point(t[0],t[1])}function tI(e){var t=on(e),i=6*pn,a=t>0,c=$n(t)>fn;function f(I,E,z,O){KC(O,e,i,z,I,E)}function y(I,E){return on(I)*on(E)>t}function l(I){var E,z,O,Q,Y;return{lineStart:function(){Q=O=!1,Y=1},point:function(pe,G){var V=[pe,G],N,oe=y(pe,G),W=a?oe?0:w(pe,G):oe?w(pe+(pe<0?zn:-zn),G):0;if(!E&&(Q=O=oe)&&I.lineStart(),oe!==O&&(N=b(E,V),(!N||Kp(E,N)||Kp(V,N))&&(V[2]=1)),oe!==O)Y=0,oe?(I.lineStart(),N=b(V,E),I.point(N[0],N[1])):(N=b(E,V),I.point(N[0],N[1],2),I.lineEnd()),E=N;else if(c&&E&&a^oe){var B;!(W&z)&&(B=b(V,E,!0))&&(Y=0,a?(I.lineStart(),I.point(B[0][0],B[0][1]),I.point(B[1][0],B[1][1]),I.lineEnd()):(I.point(B[1][0],B[1][1]),I.lineEnd(),I.lineStart(),I.point(B[0][0],B[0][1],3)))}oe&&(!E||!Kp(E,V))&&I.point(V[0],V[1]),E=V,O=oe,z=W},lineEnd:function(){O&&I.lineEnd(),E=null},clean:function(){return Y|(Q&&O)<<1}}}function b(I,E,z){var O=Ou(I),Q=Ou(E),Y=[1,0,0],pe=dh(O,Q),G=Ip(pe,pe),V=pe[0],N=G-V*V;if(!N)return!z&&I;var oe=t*G/N,W=-t*V/N,B=dh(Y,pe),S=Ap(Y,oe),M=Ap(pe,W);a0(S,M);var Z=B,X=Ip(S,Z),J=Ip(Z,Z),ye=X*X-J*(Ip(S,S)-1);if(!(ye<0)){var xe=fi(ye),be=Ap(Z,(-X-xe)/J);if(a0(be,S),be=Dm(be),!z)return be;var te=I[0],le=E[0],re=I[1],ne=E[1],ge;le<te&&(ge=te,te=le,le=ge);var Ee=le-te,we=$n(Ee-zn)<fn,Ne=we||Ee<fn;if(!we&&ne<re&&(ge=re,re=ne,ne=ge),Ne?we?re+ne>0^be[1]<($n(be[0]-te)<fn?re:ne):re<=be[1]&&be[1]<=ne:Ee>zn^(te<=be[0]&&be[0]<=le)){var ze=Ap(Z,(-X+xe)/J);return a0(ze,S),[be,Dm(ze)]}}}function w(I,E){var z=a?e:zn-e,O=0;return I<-z?O|=1:I>z&&(O|=2),E<-z?O|=4:E>z&&(O|=8),O}return eI(y,l,f,a?[0,-e]:[-zn,e-zn])}function Z5(e,t,i,a,c,f){var y=e[0],l=e[1],b=t[0],w=t[1],I=0,E=1,z=b-y,O=w-l,Q;if(Q=i-y,!(!z&&Q>0)){if(Q/=z,z<0){if(Q<I)return;Q<E&&(E=Q)}else if(z>0){if(Q>E)return;Q>I&&(I=Q)}if(Q=c-y,!(!z&&Q<0)){if(Q/=z,z<0){if(Q>E)return;Q>I&&(I=Q)}else if(z>0){if(Q<I)return;Q<E&&(E=Q)}if(Q=a-l,!(!O&&Q>0)){if(Q/=O,O<0){if(Q<I)return;Q<E&&(E=Q)}else if(O>0){if(Q>E)return;Q>I&&(I=Q)}if(Q=f-l,!(!O&&Q<0)){if(Q/=O,O<0){if(Q>E)return;Q>I&&(I=Q)}else if(O>0){if(Q<I)return;Q<E&&(E=Q)}return I>0&&(e[0]=y+I*z,e[1]=l+I*O),E<1&&(t[0]=y+E*z,t[1]=l+E*O),!0}}}}}var Af=1e9,Mp=-Af;function Ig(e,t,i,a){function c(w,I){return e<=w&&w<=i&&t<=I&&I<=a}function f(w,I,E,z){var O=0,Q=0;if(w==null||(O=y(w,E))!==(Q=y(I,E))||b(w,I)<0^E>0)do z.point(O===0||O===3?e:i,O>1?a:t);while((O=(O+E+4)%4)!==Q);else z.point(I[0],I[1])}function y(w,I){return $n(w[0]-e)<fn?I>0?0:3:$n(w[0]-i)<fn?I>0?2:1:$n(w[1]-t)<fn?I>0?1:0:I>0?3:2}function l(w,I){return b(w.x,I.x)}function b(w,I){var E=y(w,1),z=y(I,1);return E!==z?E-z:E===0?I[1]-w[1]:E===1?w[0]-I[0]:E===2?w[1]-I[1]:I[0]-w[0]}return function(w){var I=w,E=YC(),z,O,Q,Y,pe,G,V,N,oe,W,B,S={point:M,lineStart:ye,lineEnd:xe,polygonStart:X,polygonEnd:J};function M(te,le){c(te,le)&&I.point(te,le)}function Z(){for(var te=0,le=0,re=O.length;le<re;++le)for(var ne=O[le],ge=1,Ee=ne.length,we=ne[0],Ne,ze,Pe=we[0],He=we[1];ge<Ee;++ge)Ne=Pe,ze=He,we=ne[ge],Pe=we[0],He=we[1],ze<=a?He>a&&(Pe-Ne)*(a-ze)>(He-ze)*(e-Ne)&&++te:He<=a&&(Pe-Ne)*(a-ze)<(He-ze)*(e-Ne)&&--te;return te}function X(){I=E,z=[],O=[],B=!0}function J(){var te=Z(),le=B&&te,re=(z=FC(z)).length;(le||re)&&(w.polygonStart(),le&&(w.lineStart(),f(null,null,1,w),w.lineEnd()),re&&JC(z,l,te,f,w),w.polygonEnd()),I=w,z=O=Q=null}function ye(){S.point=be,O&&O.push(Q=[]),W=!0,oe=!1,V=N=NaN}function xe(){z&&(be(Y,pe),G&&oe&&E.rejoin(),z.push(E.result())),S.point=M,oe&&I.lineEnd()}function be(te,le){var re=c(te,le);if(O&&Q.push([te,le]),W)Y=te,pe=le,G=re,W=!1,re&&(I.lineStart(),I.point(te,le));else if(re&&oe)I.point(te,le);else{var ne=[V=Math.max(Mp,Math.min(Af,V)),N=Math.max(Mp,Math.min(Af,N))],ge=[te=Math.max(Mp,Math.min(Af,te)),le=Math.max(Mp,Math.min(Af,le))];Z5(ne,ge,e,t,i,a)?(oe||(I.lineStart(),I.point(ne[0],ne[1])),I.point(ge[0],ge[1]),re||I.lineEnd(),B=!1):re&&(I.lineStart(),I.point(te,le),B=!1)}V=te,N=le,oe=re}return S}}function W5(){var e=0,t=0,i=960,a=500,c,f,y;return y={stream:function(l){return c&&f===l?c:c=Ig(e,t,i,a)(f=l)},extent:function(l){return arguments.length?(e=+l[0][0],t=+l[0][1],i=+l[1][0],a=+l[1][1],c=f=null,y):[[e,t],[i,a]]}}}var Yv,Jv,Yp,Jp,ph={sphere:zr,point:zr,lineStart:H5,lineEnd:zr,polygonStart:zr,polygonEnd:zr};function H5(){ph.point=q5,ph.lineEnd=X5}function X5(){ph.point=ph.lineEnd=zr}function q5(e,t){e*=pn,t*=pn,Jv=e,Yp=Yt(t),Jp=on(t),ph.point=K5}function K5(e,t){e*=pn,t*=pn;var i=Yt(t),a=on(t),c=$n(e-Jv),f=on(c),y=Yt(c),l=a*y,b=Jp*i-Yp*a*f,w=Yp*i+Jp*a*f;Yv.add(Qi(fi(l*l+b*b),w)),Jv=e,Yp=i,Jp=a}function nI(e){return Yv=new Ri,xs(e,ph),+Yv}var Qv=[null,null],Y5={type:"LineString",coordinates:Qv};function Hm(e,t){return Qv[0]=e,Qv[1]=t,nI(Y5)}var O2={Feature:function(e,t){return Xm(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if(Xm(i[a].geometry,t))return!0;return!1}},F2={Sphere:function(){return!0},Point:function(e,t){return j2(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(j2(i[a],t))return!0;return!1},LineString:function(e,t){return D2(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(D2(i[a],t))return!0;return!1},Polygon:function(e,t){return B2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(B2(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if(Xm(i[a],t))return!0;return!1}};function Xm(e,t){return e&&F2.hasOwnProperty(e.type)?F2[e.type](e,t):!1}function j2(e,t){return Hm(e,t)===0}function D2(e,t){for(var i,a,c,f=0,y=e.length;f<y;f++){if(a=Hm(e[f],t),a===0||f>0&&(c=Hm(e[f],e[f-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<dd*c))return!0;i=a}return!1}function B2(e,t){return!!QC(e.map(J5),rI(t))}function J5(e){return e=e.map(rI),e.pop(),e}function rI(e){return[e[0]*pn,e[1]*pn]}function Q5(e,t){return(e&&O2.hasOwnProperty(e.type)?O2[e.type]:Xm)(e,t)}function N2(e,t,i){var a=Xc(e,t-fn,i).concat(t);return function(c){return a.map(function(f){return[c,f]})}}function U2(e,t,i){var a=Xc(e,t-fn,i).concat(t);return function(c){return a.map(function(f){return[f,c]})}}function iI(){var e,t,i,a,c,f,y,l,b=10,w=b,I=90,E=360,z,O,Q,Y,pe=2.5;function G(){return{type:"MultiLineString",coordinates:V()}}function V(){return Xc(Cp(a/I)*I,i,I).map(Q).concat(Xc(Cp(l/E)*E,y,E).map(Y)).concat(Xc(Cp(t/b)*b,e,b).filter(function(N){return $n(N%I)>fn}).map(z)).concat(Xc(Cp(f/w)*w,c,w).filter(function(N){return $n(N%E)>fn}).map(O))}return G.lines=function(){return V().map(function(N){return{type:"LineString",coordinates:N}})},G.outline=function(){return{type:"Polygon",coordinates:[Q(a).concat(Y(y).slice(1),Q(i).reverse().slice(1),Y(l).reverse().slice(1))]}},G.extent=function(N){return arguments.length?G.extentMajor(N).extentMinor(N):G.extentMinor()},G.extentMajor=function(N){return arguments.length?(a=+N[0][0],i=+N[1][0],l=+N[0][1],y=+N[1][1],a>i&&(N=a,a=i,i=N),l>y&&(N=l,l=y,y=N),G.precision(pe)):[[a,l],[i,y]]},G.extentMinor=function(N){return arguments.length?(t=+N[0][0],e=+N[1][0],f=+N[0][1],c=+N[1][1],t>e&&(N=t,t=e,e=N),f>c&&(N=f,f=c,c=N),G.precision(pe)):[[t,f],[e,c]]},G.step=function(N){return arguments.length?G.stepMajor(N).stepMinor(N):G.stepMinor()},G.stepMajor=function(N){return arguments.length?(I=+N[0],E=+N[1],G):[I,E]},G.stepMinor=function(N){return arguments.length?(b=+N[0],w=+N[1],G):[b,w]},G.precision=function(N){return arguments.length?(pe=+N,z=N2(f,c,90),O=U2(t,e,pe),Q=N2(l,y,90),Y=U2(a,i,pe),G):pe},G.extentMajor([[-180,-90+fn],[180,90-fn]]).extentMinor([[-180,-80-fn],[180,80+fn]])}function eL(){return iI()()}function tL(e,t){var i=e[0]*pn,a=e[1]*pn,c=t[0]*pn,f=t[1]*pn,y=on(a),l=Yt(a),b=on(f),w=Yt(f),I=y*on(i),E=y*Yt(i),z=b*on(c),O=b*Yt(c),Q=2*eo(fi(w2(f-a)+y*b*w2(c-i))),Y=Yt(Q),pe=Q?function(G){var V=Yt(G*=Q)/Y,N=Yt(Q-G)/Y,oe=N*I+V*z,W=N*E+V*O,B=N*l+V*w;return[Qi(W,oe)*cr,Qi(B,fi(oe*oe+W*W))*cr]}:function(){return[i*cr,a*cr]};return pe.distance=Q,pe}const pd=e=>e;var u0=new Ri,e_=new Ri,oI,sI,t_,n_,Sl={point:zr,lineStart:zr,lineEnd:zr,polygonStart:function(){Sl.lineStart=nL,Sl.lineEnd=iL},polygonEnd:function(){Sl.lineStart=Sl.lineEnd=Sl.point=zr,u0.add($n(e_)),e_=new Ri},result:function(){var e=u0/2;return u0=new Ri,e}};function nL(){Sl.point=rL}function rL(e,t){Sl.point=aI,oI=t_=e,sI=n_=t}function aI(e,t){e_.add(n_*e-t_*t),t_=e,n_=t}function iL(){aI(oI,sI)}const $2=Sl;var mh=1/0,qm=mh,md=-mh,Km=md,oL={point:sL,lineStart:zr,lineEnd:zr,polygonStart:zr,polygonEnd:zr,result:function(){var e=[[mh,qm],[md,Km]];return md=Km=-(qm=mh=1/0),e}};function sL(e,t){e<mh&&(mh=e),e>md&&(md=e),t<qm&&(qm=t),t>Km&&(Km=t)}const Ym=oL;var r_=0,i_=0,Pf=0,Jm=0,Qm=0,qc=0,o_=0,s_=0,Mf=0,lI,uI,Js,Qs,ws={point:Fu,lineStart:V2,lineEnd:G2,polygonStart:function(){ws.lineStart=uL,ws.lineEnd=cL},polygonEnd:function(){ws.point=Fu,ws.lineStart=V2,ws.lineEnd=G2},result:function(){var e=Mf?[o_/Mf,s_/Mf]:qc?[Jm/qc,Qm/qc]:Pf?[r_/Pf,i_/Pf]:[NaN,NaN];return r_=i_=Pf=Jm=Qm=qc=o_=s_=Mf=0,e}};function Fu(e,t){r_+=e,i_+=t,++Pf}function V2(){ws.point=aL}function aL(e,t){ws.point=lL,Fu(Js=e,Qs=t)}function lL(e,t){var i=e-Js,a=t-Qs,c=fi(i*i+a*a);Jm+=c*(Js+e)/2,Qm+=c*(Qs+t)/2,qc+=c,Fu(Js=e,Qs=t)}function G2(){ws.point=Fu}function uL(){ws.point=hL}function cL(){cI(lI,uI)}function hL(e,t){ws.point=cI,Fu(lI=Js=e,uI=Qs=t)}function cI(e,t){var i=e-Js,a=t-Qs,c=fi(i*i+a*a);Jm+=c*(Js+e)/2,Qm+=c*(Qs+t)/2,qc+=c,c=Qs*e-Js*t,o_+=c*(Js+e),s_+=c*(Qs+t),Mf+=c*3,Fu(Js=e,Qs=t)}const Z2=ws;function hI(e){this._context=e}hI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ji);break}}},result:zr};var a_=new Ri,c0,fI,dI,kf,zf,eg={point:zr,lineStart:function(){eg.point=fL},lineEnd:function(){c0&&pI(fI,dI),eg.point=zr},polygonStart:function(){c0=!0},polygonEnd:function(){c0=null},result:function(){var e=+a_;return a_=new Ri,e}};function fL(e,t){eg.point=pI,fI=kf=e,dI=zf=t}function pI(e,t){kf-=e,zf-=t,a_.add(fi(kf*kf+zf*zf)),kf=e,zf=t}const W2=eg;function mI(){this._string=[]}mI.prototype={_radius:4.5,_circle:H2(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=H2(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function H2(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function dL(e,t){var i=4.5,a,c;function f(y){return y&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),xs(y,a(c))),c.result()}return f.area=function(y){return xs(y,a($2)),$2.result()},f.measure=function(y){return xs(y,a(W2)),W2.result()},f.bounds=function(y){return xs(y,a(Ym)),Ym.result()},f.centroid=function(y){return xs(y,a(Z2)),Z2.result()},f.projection=function(y){return arguments.length?(a=y==null?(e=null,pd):(e=y).stream,f):e},f.context=function(y){return arguments.length?(c=y==null?(t=null,new mI):new hI(t=y),typeof i!="function"&&c.pointRadius(i),f):t},f.pointRadius=function(y){return arguments.length?(i=typeof y=="function"?y:(c.pointRadius(+y),+y),f):i},f.projection(e).context(t)}function pL(e){return{stream:Cd(e)}}function Cd(e){return function(t){var i=new l_;for(var a in e)i[a]=e[a];return i.stream=t,i}}function l_(){}l_.prototype={constructor:l_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function A1(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),xs(i,e.stream(Ym)),t(Ym.result()),a!=null&&e.clipExtent(a),e}function Ag(e,t,i){return A1(e,function(a){var c=t[1][0]-t[0][0],f=t[1][1]-t[0][1],y=Math.min(c/(a[1][0]-a[0][0]),f/(a[1][1]-a[0][1])),l=+t[0][0]+(c-y*(a[1][0]+a[0][0]))/2,b=+t[0][1]+(f-y*(a[1][1]+a[0][1]))/2;e.scale(150*y).translate([l,b])},i)}function P1(e,t,i){return Ag(e,[[0,0],t],i)}function M1(e,t,i){return A1(e,function(a){var c=+t,f=c/(a[1][0]-a[0][0]),y=(c-f*(a[1][0]+a[0][0]))/2,l=-f*a[0][1];e.scale(150*f).translate([y,l])},i)}function k1(e,t,i){return A1(e,function(a){var c=+t,f=c/(a[1][1]-a[0][1]),y=-f*a[0][0],l=(c-f*(a[1][1]+a[0][1]))/2;e.scale(150*f).translate([y,l])},i)}var X2=16,mL=on(30*pn);function q2(e,t){return+t?yL(e,t):gL(e)}function gL(e){return Cd({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function yL(e,t){function i(a,c,f,y,l,b,w,I,E,z,O,Q,Y,pe){var G=w-a,V=I-c,N=G*G+V*V;if(N>4*t&&Y--){var oe=y+z,W=l+O,B=b+Q,S=fi(oe*oe+W*W+B*B),M=eo(B/=S),Z=$n($n(B)-1)<fn||$n(f-E)<fn?(f+E)/2:Qi(W,oe),X=e(Z,M),J=X[0],ye=X[1],xe=J-a,be=ye-c,te=V*xe-G*be;(te*te/N>t||$n((G*xe+V*be)/N-.5)>.3||y*z+l*O+b*Q<mL)&&(i(a,c,f,y,l,b,J,ye,Z,oe/=S,W/=S,B,Y,pe),pe.point(J,ye),i(J,ye,Z,oe,W,B,w,I,E,z,O,Q,Y,pe))}}return function(a){var c,f,y,l,b,w,I,E,z,O,Q,Y,pe={point:G,lineStart:V,lineEnd:oe,polygonStart:function(){a.polygonStart(),pe.lineStart=W},polygonEnd:function(){a.polygonEnd(),pe.lineStart=V}};function G(M,Z){M=e(M,Z),a.point(M[0],M[1])}function V(){E=NaN,pe.point=N,a.lineStart()}function N(M,Z){var X=Ou([M,Z]),J=e(M,Z);i(E,z,I,O,Q,Y,E=J[0],z=J[1],I=M,O=X[0],Q=X[1],Y=X[2],X2,a),a.point(E,z)}function oe(){pe.point=G,a.lineEnd()}function W(){V(),pe.point=B,pe.lineEnd=S}function B(M,Z){N(c=M,Z),f=E,y=z,l=O,b=Q,w=Y,pe.point=N}function S(){i(E,z,I,O,Q,Y,f,y,c,l,b,w,X2,a),pe.lineEnd=oe,oe()}return pe}}var vL=Cd({point:function(e,t){this.stream.point(e*pn,t*pn)}});function _L(e){return Cd({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function xL(e,t,i,a,c){function f(y,l){return y*=a,l*=c,[t+e*y,i-e*l]}return f.invert=function(y,l){return[(y-t)/e*a,(i-l)/e*c]},f}function K2(e,t,i,a,c,f){if(!f)return xL(e,t,i,a,c);var y=on(f),l=Yt(f),b=y*e,w=l*e,I=y/e,E=l/e,z=(l*i-y*t)/e,O=(l*t+y*i)/e;function Q(Y,pe){return Y*=a,pe*=c,[b*Y-w*pe+t,i-w*Y-b*pe]}return Q.invert=function(Y,pe){return[a*(I*Y-E*pe+z),c*(O-E*Y-I*pe)]},Q}function sa(e){return z1(function(){return e})()}function z1(e){var t,i=150,a=480,c=250,f=0,y=0,l=0,b=0,w=0,I,E=0,z=1,O=1,Q=null,Y=Kv,pe=null,G,V,N,oe=pd,W=.5,B,S,M,Z,X;function J(te){return M(te[0]*pn,te[1]*pn)}function ye(te){return te=M.invert(te[0],te[1]),te&&[te[0]*cr,te[1]*cr]}J.stream=function(te){return Z&&X===te?Z:Z=vL(_L(I)(Y(B(oe(X=te)))))},J.preclip=function(te){return arguments.length?(Y=te,Q=void 0,be()):Y},J.postclip=function(te){return arguments.length?(oe=te,pe=G=V=N=null,be()):oe},J.clipAngle=function(te){return arguments.length?(Y=+te?tI(Q=te*pn):(Q=null,Kv),be()):Q*cr},J.clipExtent=function(te){return arguments.length?(oe=te==null?(pe=G=V=N=null,pd):Ig(pe=+te[0][0],G=+te[0][1],V=+te[1][0],N=+te[1][1]),be()):pe==null?null:[[pe,G],[V,N]]},J.scale=function(te){return arguments.length?(i=+te,xe()):i},J.translate=function(te){return arguments.length?(a=+te[0],c=+te[1],xe()):[a,c]},J.center=function(te){return arguments.length?(f=te[0]%360*pn,y=te[1]%360*pn,xe()):[f*cr,y*cr]},J.rotate=function(te){return arguments.length?(l=te[0]%360*pn,b=te[1]%360*pn,w=te.length>2?te[2]%360*pn:0,xe()):[l*cr,b*cr,w*cr]},J.angle=function(te){return arguments.length?(E=te%360*pn,xe()):E*cr},J.reflectX=function(te){return arguments.length?(z=te?-1:1,xe()):z<0},J.reflectY=function(te){return arguments.length?(O=te?-1:1,xe()):O<0},J.precision=function(te){return arguments.length?(B=q2(S,W=te*te),be()):fi(W)},J.fitExtent=function(te,le){return Ag(J,te,le)},J.fitSize=function(te,le){return P1(J,te,le)},J.fitWidth=function(te,le){return M1(J,te,le)},J.fitHeight=function(te,le){return k1(J,te,le)};function xe(){var te=K2(i,0,0,z,O,E).apply(null,t(f,y)),le=K2(i,a-te[0],c-te[1],z,O,E);return I=I1(l,b,w),S=Xv(t,le),M=Xv(I,S),B=q2(S,W),be()}function be(){return Z=X=null,J}return function(){return t=e.apply(this,arguments),J.invert=t.invert&&ye,xe()}}function L1(e){var t=0,i=zn/3,a=z1(e),c=a(t,i);return c.parallels=function(f){return arguments.length?a(t=f[0]*pn,i=f[1]*pn):[t*cr,i*cr]},c}function wL(e){var t=on(e);function i(a,c){return[a*t,Yt(c)/t]}return i.invert=function(a,c){return[a/t,eo(c*t)]},i}function gI(e,t){var i=Yt(e),a=(i+Yt(t))/2;if($n(a)<fn)return wL(e);var c=1+i*(2*a-i),f=fi(c)/a;function y(l,b){var w=fi(c-2*a*Yt(b))/a;return[w*Yt(l*=a),f-w*on(l)]}return y.invert=function(l,b){var w=f-b,I=Qi(l,$n(w))*es(w);return w*a<0&&(I-=zn*es(l)*es(w)),[I/a,eo((c-(l*l+w*w)*a*a)/(2*a))]},y}function tg(){return L1(gI).scale(155.424).center([0,33.6442])}function yI(){return tg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function bL(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function EL(){var e,t,i=yI(),a,c=tg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f,y=tg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,b,w={point:function(z,O){b=[z,O]}};function I(z){var O=z[0],Q=z[1];return b=null,a.point(O,Q),b||(f.point(O,Q),b)||(l.point(O,Q),b)}I.invert=function(z){var O=i.scale(),Q=i.translate(),Y=(z[0]-Q[0])/O,pe=(z[1]-Q[1])/O;return(pe>=.12&&pe<.234&&Y>=-.425&&Y<-.214?c:pe>=.166&&pe<.234&&Y>=-.214&&Y<-.115?y:i).invert(z)},I.stream=function(z){return e&&t===z?e:e=bL([i.stream(t=z),c.stream(z),y.stream(z)])},I.precision=function(z){return arguments.length?(i.precision(z),c.precision(z),y.precision(z),E()):i.precision()},I.scale=function(z){return arguments.length?(i.scale(z),c.scale(z*.35),y.scale(z),I.translate(i.translate())):i.scale()},I.translate=function(z){if(!arguments.length)return i.translate();var O=i.scale(),Q=+z[0],Y=+z[1];return a=i.translate(z).clipExtent([[Q-.455*O,Y-.238*O],[Q+.455*O,Y+.238*O]]).stream(w),f=c.translate([Q-.307*O,Y+.201*O]).clipExtent([[Q-.425*O+fn,Y+.12*O+fn],[Q-.214*O-fn,Y+.234*O-fn]]).stream(w),l=y.translate([Q-.205*O,Y+.212*O]).clipExtent([[Q-.214*O+fn,Y+.166*O+fn],[Q-.115*O-fn,Y+.234*O-fn]]).stream(w),E()},I.fitExtent=function(z,O){return Ag(I,z,O)},I.fitSize=function(z,O){return P1(I,z,O)},I.fitWidth=function(z,O){return M1(I,z,O)},I.fitHeight=function(z,O){return k1(I,z,O)};function E(){return e=t=null,I}return I.scale(1070)}function vI(e){return function(t,i){var a=on(t),c=on(i),f=e(a*c);return f===1/0?[2,0]:[f*c*Yt(t),f*Yt(i)]}}function Id(e){return function(t,i){var a=fi(t*t+i*i),c=e(a),f=Yt(c),y=on(c);return[Qi(t*f,a*y),eo(a&&i*f/a)]}}var R1=vI(function(e){return fi(2/(1+e))});R1.invert=Id(function(e){return 2*eo(e/2)});function SL(){return sa(R1).scale(124.75).clipAngle(180-.001)}var O1=vI(function(e){return(e=DC(e))&&e/Yt(e)});O1.invert=Id(function(e){return e});function TL(){return sa(O1).scale(79.4188).clipAngle(180-.001)}function Ad(e,t){return[e,Rm(T1((Br+t)/2))]}Ad.invert=function(e,t){return[e,2*bh(jC(t))-Br]};function CL(){return _I(Ad).scale(961/Ji)}function _I(e){var t=sa(e),i=t.center,a=t.scale,c=t.translate,f=t.clipExtent,y=null,l,b,w;t.scale=function(E){return arguments.length?(a(E),I()):a()},t.translate=function(E){return arguments.length?(c(E),I()):c()},t.center=function(E){return arguments.length?(i(E),I()):i()},t.clipExtent=function(E){return arguments.length?(E==null?y=l=b=w=null:(y=+E[0][0],l=+E[0][1],b=+E[1][0],w=+E[1][1]),I()):y==null?null:[[y,l],[b,w]]};function I(){var E=zn*a(),z=t(qC(t.rotate()).invert([0,0]));return f(y==null?[[z[0]-E,z[1]-E],[z[0]+E,z[1]+E]]:e===Ad?[[Math.max(z[0]-E,y),l],[Math.min(z[0]+E,b),w]]:[[y,Math.max(z[1]-E,l)],[b,Math.min(z[1]+E,w)]])}return I()}function kp(e){return T1((Br+e)/2)}function xI(e,t){var i=on(e),a=e===t?Yt(e):Rm(i/on(t))/Rm(kp(t)/kp(e)),c=i*s0(kp(e),a)/a;if(!a)return Ad;function f(y,l){c>0?l<-Br+fn&&(l=-Br+fn):l>Br-fn&&(l=Br-fn);var b=c/s0(kp(l),a);return[b*Yt(a*y),c-b*on(a*y)]}return f.invert=function(y,l){var b=c-l,w=es(a)*fi(y*y+b*b),I=Qi(y,$n(b))*es(b);return b*a<0&&(I-=zn*es(y)*es(b)),[I/a,2*bh(s0(c/w,1/a))-Br]},f}function IL(){return L1(xI).scale(109.5).parallels([30,30])}function gd(e,t){return[e,t]}gd.invert=gd;function AL(){return sa(gd).scale(152.63)}function wI(e,t){var i=on(e),a=e===t?Yt(e):(i-on(t))/(t-e),c=i/a+e;if($n(a)<fn)return gd;function f(y,l){var b=c-l,w=a*y;return[b*Yt(w),c-b*on(w)]}return f.invert=function(y,l){var b=c-l,w=Qi(y,$n(b))*es(b);return b*a<0&&(w-=zn*es(y)*es(b)),[w/a,c-es(a)*fi(y*y+b*b)]},f}function PL(){return L1(wI).scale(131.154).center([0,13.9389])}var Zf=1.340264,Wf=-.081106,Hf=893e-6,Xf=.003796,ng=fi(3)/2,ML=12;function F1(e,t){var i=eo(ng*Yt(t)),a=i*i,c=a*a*a;return[e*on(i)/(ng*(Zf+3*Wf*a+c*(7*Hf+9*Xf*a))),i*(Zf+Wf*a+c*(Hf+Xf*a))]}F1.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,f=0,y,l,b;f<ML&&(l=i*(Zf+Wf*a+c*(Hf+Xf*a))-t,b=Zf+3*Wf*a+c*(7*Hf+9*Xf*a),i-=y=l/b,a=i*i,c=a*a*a,!($n(y)<dd));++f);return[ng*e*(Zf+3*Wf*a+c*(7*Hf+9*Xf*a))/on(i),eo(Yt(i)/ng)]};function kL(){return sa(F1).scale(177.158)}function j1(e,t){var i=on(t),a=on(e)*i;return[i*Yt(e)/a,Yt(t)/a]}j1.invert=Id(bh);function zL(){return sa(j1).scale(144.049).clipAngle(60)}function LL(){var e=1,t=0,i=0,a=1,c=1,f=0,y,l,b=null,w,I,E,z=1,O=1,Q=Cd({point:function(oe,W){var B=N([oe,W]);this.stream.point(B[0],B[1])}}),Y=pd,pe,G;function V(){return z=e*a,O=e*c,pe=G=null,N}function N(oe){var W=oe[0]*z,B=oe[1]*O;if(f){var S=B*y-W*l;W=W*y+B*l,B=S}return[W+t,B+i]}return N.invert=function(oe){var W=oe[0]-t,B=oe[1]-i;if(f){var S=B*y+W*l;W=W*y-B*l,B=S}return[W/z,B/O]},N.stream=function(oe){return pe&&G===oe?pe:pe=Q(Y(G=oe))},N.postclip=function(oe){return arguments.length?(Y=oe,b=w=I=E=null,V()):Y},N.clipExtent=function(oe){return arguments.length?(Y=oe==null?(b=w=I=E=null,pd):Ig(b=+oe[0][0],w=+oe[0][1],I=+oe[1][0],E=+oe[1][1]),V()):b==null?null:[[b,w],[I,E]]},N.scale=function(oe){return arguments.length?(e=+oe,V()):e},N.translate=function(oe){return arguments.length?(t=+oe[0],i=+oe[1],V()):[t,i]},N.angle=function(oe){return arguments.length?(f=oe%360*pn,l=Yt(f),y=on(f),V()):f*cr},N.reflectX=function(oe){return arguments.length?(a=oe?-1:1,V()):a<0},N.reflectY=function(oe){return arguments.length?(c=oe?-1:1,V()):c<0},N.fitExtent=function(oe,W){return Ag(N,oe,W)},N.fitSize=function(oe,W){return P1(N,oe,W)},N.fitWidth=function(oe,W){return M1(N,oe,W)},N.fitHeight=function(oe,W){return k1(N,oe,W)},N}function D1(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}D1.invert=function(e,t){var i=t,a=25,c;do{var f=i*i,y=f*f;i-=c=(i*(1.007226+f*(.015085+y*(-.044475+.028874*f-.005916*y)))-t)/(1.007226+f*(.015085*3+y*(-.044475*7+.028874*9*f-.005916*11*y)))}while($n(c)>fn&&--a>0);return[e/(.8707+(f=i*i)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),i]};function RL(){return sa(D1).scale(175.295)}function B1(e,t){return[on(t)*Yt(e),Yt(t)]}B1.invert=Id(eo);function OL(){return sa(B1).scale(249.5).clipAngle(90+fn)}function N1(e,t){var i=on(t),a=1+on(e)*i;return[i*Yt(e)/a,Yt(t)/a]}N1.invert=Id(function(e){return 2*bh(e)});function FL(){return sa(N1).scale(250).clipAngle(142)}function U1(e,t){return[Rm(T1((Br+t)/2)),-e]}U1.invert=function(e,t){return[-t,2*bh(jC(e))-Br]};function jL(){var e=_I(U1),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const DL=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:yI,geoAlbersUsa:EL,geoArea:A5,geoAzimuthalEqualArea:SL,geoAzimuthalEqualAreaRaw:R1,geoAzimuthalEquidistant:TL,geoAzimuthalEquidistantRaw:O1,geoBounds:z5,geoCentroid:D5,geoCircle:B5,geoClipAntimeridian:Kv,geoClipCircle:tI,geoClipExtent:W5,geoClipRectangle:Ig,geoConicConformal:IL,geoConicConformalRaw:xI,geoConicEqualArea:tg,geoConicEqualAreaRaw:gI,geoConicEquidistant:PL,geoConicEquidistantRaw:wI,geoContains:Q5,geoDistance:Hm,geoEqualEarth:kL,geoEqualEarthRaw:F1,geoEquirectangular:AL,geoEquirectangularRaw:gd,geoGnomonic:zL,geoGnomonicRaw:j1,geoGraticule:iI,geoGraticule10:eL,geoIdentity:LL,geoInterpolate:tL,geoLength:nI,geoMercator:CL,geoMercatorRaw:Ad,geoNaturalEarth1:RL,geoNaturalEarth1Raw:D1,geoOrthographic:OL,geoOrthographicRaw:B1,geoPath:dL,geoProjection:sa,geoProjectionMutator:z1,geoRotation:qC,geoStereographic:FL,geoStereographicRaw:N1,geoStream:xs,geoTransform:pL,geoTransverseMercator:jL,geoTransverseMercatorRaw:U1},Symbol.toStringTag,{value:"Module"})),BL=m_(DL);var Nl=2*Math.PI*6378137/2,NL=Math.PI/180;function bI(e){return e=e||256,2*Math.PI*6378137/e}function UL(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function u_(e,t,i){var a=EI(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function EI(e,t,i){var a=t,c=q1(e[0]),f=X1(e[1]),y=Math.sin(f*NL),l=Math.pow(2,a),b=l*(c/360+.5),w=l*(.5-.25*Math.log((1+y)/(1-y))/Math.PI);return Nu([b,w,a],i)}function $L(e,t=6){var i=e[0],a=e[1],c=e[2],f=e[3],y=(i-c)/2+c,l=(a-f)/2+f;return t!=null&&(y=Number(y.toFixed(t)),l=Number(l.toFixed(t))),[y,l]}function rg(e,t,i={enable:!0,decimal:1}){e=Pg(e,t);var a=e[0],c=e[1],f=a*Nl/180,y=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return y=y*Nl/180,i.enable&&(f=Number(f.toFixed(i.decimal)),y=Number(y.toFixed(i.decimal))),[f,y]}function c_(e,t=6){var i=e[0],a=e[1],c=i/Nl*180,f=a/Nl*180;return f=180/Math.PI*(2*Math.atan(Math.exp(f*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),f=Number(f.toFixed(t))),[c,f]}function $1(e,t,i){var a=e[0],c=e[1],f=W1(t,i),y=(a+Nl)/f,l=(c+Nl)/f;return[y,l,t]}function SI(e,t,i){e=Pg(e,i);var a=rg(e),c=$1(a,t);return V1(c)}function VL(e,t,i){if(e=Pg(e,i),t===0)return[0,0,0];var a=SI(e,t);return CI(a)}function GL(e,t){if(t===0)return[0,0,0];var i=$1(e,t);return V1(i)}function h_(e,t,i=1){var a=e[0],c=e[1],f=e[2],y=W1(f,t),l=a*y-Nl,b=c*y-Nl;return i!=null&&(l=Number(l.toFixed(i)),b=Number(b.toFixed(i))),[l,b]}function V1(e,t,i){t=t||256;var a=e[0],c=e[1],f=e[2];if(f===0)return[0,0,0];Z1(f);var y=Math.ceil(a/t)-1,l=Math.ceil(c/t)-1;return y<0&&(y=0),l<0&&(l=0),[y,l,f]}function G1(e,t,i){Nu(e,i),t=t||256;var a=e[0],c=e[1],f=e[2],y=h_([a*t,c*t,f]),l=h_([(a+1)*t,(c+1)*t,f]);return[y[0],y[1],l[0],l[1]]}function TI(e,t){Nu(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var f=G1([i,a,c]),y=f[0],l=f[1],b=f[2],w=f[3],I=c_([y,l,c]),E=c_([b,w,c]);return[I[0],I[1],E[0],E[1]]}function ZL(e){var t=Pd(e);return G1(t)}function WL(e){var t=Pd(e);return TI(t)}function CI(e,t){Nu(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var f=i,y=Math.pow(2,c)-1-a;return[f,y,c]}function Pd(e){var t=e[0],i=e[1],a=e[2],c=t,f=Math.pow(2,a)-i-1;return[c,f,a]}function HL(e){var t=Pd(e);return II(t)}function II(e,t){Nu(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var f="";return a=Math.pow(2,c)-1-a,H1(c,0,-1).map(function(y){var l=0,b=1<<y-1;i&b&&(l+=1),a&b&&(l+=2),f=f.concat(l)}),f}function XL(e){var t=AI(e);return Pd(t)}function AI(e){var t=0,i=0,a=e.length;return H1(a,0,-1).map(function(c){var f=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=f;break;case 2:i+=f;break;case 3:t+=f,i+=f;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function qL(e){var t=rg([e[0],e[1]]),i=rg([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function Nu(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=Z1(c),e=PI(e),e}function PI(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function Z1(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function Pg(e,t){if(t===!1)return e;var i=q1(e[0]),a=X1(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function W1(e,t){return bI(t)/Math.pow(2,e)}function H1(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),f=0;f<a;f++,e+=i)c[f]=e;return c}function KL(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(f){f[0]<t&&(t=f[0]),f[1]<i&&(i=f[1]),f[2]>a&&(a=f[2]),f[3]>c&&(c=f[3])}),[t,i,a,c]}}function YL(e){try{return Nu(e),!0}catch{return!1}}function X1(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function q1(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function JL(e){var t=u_([e[0],e[1]],32),i=u_([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=QL(a);if(c===0)return[0,0,0];var f=a[0]>>>32-c,y=a[1]>>>32-c;return[f,y,c]}function QL(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const eR=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:$L,bboxToMeters:qL,bboxToTile:JL,googleToBBox:WL,googleToBBoxMeters:ZL,googleToQuadkey:HL,googleToTile:Pd,hash:UL,initialResolution:bI,latitude:X1,lngLatToGoogle:VL,lngLatToMeters:rg,lngLatToTile:SI,longitude:q1,maxBBox:KL,metersToLngLat:c_,metersToPixels:$1,metersToTile:GL,pixelsToMeters:h_,pixelsToTile:V1,pointToTile:u_,pointToTileFraction:EI,quadkeyToGoogle:AI,quadkeyToTile:XL,range:H1,resolution:W1,tileToBBox:TI,tileToBBoxMeters:G1,tileToGoogle:CI,tileToQuadkey:II,validTile:YL,validateLngLat:Pg,validateTile:Nu,validateZoom:Z1,wrapTile:PI},Symbol.toStringTag,{value:"Module"})),tR=m_(eR);var Mg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Mg.read=function(e,t,i,a,c){var f,y,l=c*8-a-1,b=(1<<l)-1,w=b>>1,I=-7,E=i?c-1:0,z=i?-1:1,O=e[t+E];for(E+=z,f=O&(1<<-I)-1,O>>=-I,I+=l;I>0;f=f*256+e[t+E],E+=z,I-=8);for(y=f&(1<<-I)-1,f>>=-I,I+=a;I>0;y=y*256+e[t+E],E+=z,I-=8);if(f===0)f=1-w;else{if(f===b)return y?NaN:(O?-1:1)*(1/0);y=y+Math.pow(2,a),f=f-w}return(O?-1:1)*y*Math.pow(2,f-a)};Mg.write=function(e,t,i,a,c,f){var y,l,b,w=f*8-c-1,I=(1<<w)-1,E=I>>1,z=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=a?0:f-1,Q=a?1:-1,Y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,y=I):(y=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-y))<1&&(y--,b*=2),y+E>=1?t+=z/b:t+=z*Math.pow(2,1-E),t*b>=2&&(y++,b/=2),y+E>=I?(l=0,y=I):y+E>=1?(l=(t*b-1)*Math.pow(2,c),y=y+E):(l=t*Math.pow(2,E-1)*Math.pow(2,c),y=0));c>=8;e[i+O]=l&255,O+=Q,l/=256,c-=8);for(y=y<<c|l,w+=c;w>0;e[i+O]=y&255,O+=Q,y/=256,w-=8);e[i+O-Q]|=Y*128};var nR=Jn,zp=Mg;function Jn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Jn.Varint=0;Jn.Fixed64=1;Jn.Bytes=2;Jn.Fixed32=5;var f_=65536*65536,Y2=1/f_,rR=12,MI=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Jn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,f=this.pos;this.type=a&7,e(c,t,this),this.pos===f&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Lp(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Q2(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Lp(this.buf,this.pos)+Lp(this.buf,this.pos+4)*f_;return this.pos+=8,e},readSFixed64:function(){var e=Lp(this.buf,this.pos)+Q2(this.buf,this.pos+4)*f_;return this.pos+=8,e},readFloat:function(){var e=zp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=zp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,iR(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=rR&&MI?vR(this.buf,t,e):yR(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Jn.Bytes)return e.push(this.readVarint(t));var i=Ta(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Jn.Bytes)return e.push(this.readSVarint());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Jn.Bytes)return e.push(this.readBoolean());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Jn.Bytes)return e.push(this.readFloat());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Jn.Bytes)return e.push(this.readDouble());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Jn.Bytes)return e.push(this.readFixed32());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Jn.Bytes)return e.push(this.readSFixed32());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Jn.Bytes)return e.push(this.readFixed64());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Jn.Bytes)return e.push(this.readSFixed64());var t=Ta(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Jn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Jn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Jn.Fixed32)this.pos+=4;else if(t===Jn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Pc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Pc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Pc(this.buf,e&-1,this.pos),Pc(this.buf,Math.floor(e*Y2),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Pc(this.buf,e&-1,this.pos),Pc(this.buf,Math.floor(e*Y2),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){oR(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=_R(this.buf,e,this.pos);var i=this.pos-t;i>=128&&J2(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),zp.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),zp.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&J2(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,Jn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,lR,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,uR,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,fR,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,cR,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,hR,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,dR,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,pR,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,mR,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,gR,t)},writeBytesField:function(e,t){this.writeTag(e,Jn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Jn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Jn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Jn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Jn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Jn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Jn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Jn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Jn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Jn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function iR(e,t,i){var a=i.buf,c,f;if(f=a[i.pos++],c=(f&112)>>4,f<128||(f=a[i.pos++],c|=(f&127)<<3,f<128)||(f=a[i.pos++],c|=(f&127)<<10,f<128)||(f=a[i.pos++],c|=(f&127)<<17,f<128)||(f=a[i.pos++],c|=(f&127)<<24,f<128)||(f=a[i.pos++],c|=(f&1)<<31,f<128))return Ac(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Ta(e){return e.type===Jn.Bytes?e.readVarint()+e.pos:e.pos+1}function Ac(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function oR(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),sR(i,a,t),aR(a,t)}function sR(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function aR(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function J2(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function lR(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function uR(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function cR(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function hR(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function fR(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function dR(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function pR(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function mR(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function gR(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Lp(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Pc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function Q2(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function yR(e,t,i){for(var a="",c=t;c<i;){var f=e[c],y=null,l=f>239?4:f>223?3:f>191?2:1;if(c+l>i)break;var b,w,I;l===1?f<128&&(y=f):l===2?(b=e[c+1],(b&192)===128&&(y=(f&31)<<6|b&63,y<=127&&(y=null))):l===3?(b=e[c+1],w=e[c+2],(b&192)===128&&(w&192)===128&&(y=(f&15)<<12|(b&63)<<6|w&63,(y<=2047||y>=55296&&y<=57343)&&(y=null))):l===4&&(b=e[c+1],w=e[c+2],I=e[c+3],(b&192)===128&&(w&192)===128&&(I&192)===128&&(y=(f&15)<<18|(b&63)<<12|(w&63)<<6|I&63,(y<=65535||y>=1114112)&&(y=null))),y===null?(y=65533,l=1):y>65535&&(y-=65536,a+=String.fromCharCode(y>>>10&1023|55296),y=56320|y&1023),a+=String.fromCharCode(y),c+=l}return a}function vR(e,t,i){return MI.decode(e.subarray(t,i))}function _R(e,t,i){for(var a=0,c,f;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(f)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,f=c;continue}else c=f-55296<<10|c-56320|65536,f=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):f=c;continue}else f&&(e[i++]=239,e[i++]=191,e[i++]=189,f=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var K1={exports:{}},kI=function(t,i){return function(){for(var c=new Array(arguments.length),f=0;f<c.length;f++)c[f]=arguments[f];return t.apply(i,c)}},xR=kI,Uu=Object.prototype.toString;function Y1(e){return Uu.call(e)==="[object Array]"}function d_(e){return typeof e>"u"}function wR(e){return e!==null&&!d_(e)&&e.constructor!==null&&!d_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function bR(e){return Uu.call(e)==="[object ArrayBuffer]"}function ER(e){return typeof FormData<"u"&&e instanceof FormData}function SR(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function TR(e){return typeof e=="string"}function CR(e){return typeof e=="number"}function zI(e){return e!==null&&typeof e=="object"}function Qp(e){if(Uu.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function IR(e){return Uu.call(e)==="[object Date]"}function AR(e){return Uu.call(e)==="[object File]"}function PR(e){return Uu.call(e)==="[object Blob]"}function LI(e){return Uu.call(e)==="[object Function]"}function MR(e){return zI(e)&&LI(e.pipe)}function kR(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function zR(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function LR(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function J1(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Y1(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function p_(){var e={};function t(c,f){Qp(e[f])&&Qp(c)?e[f]=p_(e[f],c):Qp(c)?e[f]=p_({},c):Y1(c)?e[f]=c.slice():e[f]=c}for(var i=0,a=arguments.length;i<a;i++)J1(arguments[i],t);return e}function RR(e,t,i){return J1(t,function(c,f){i&&typeof c=="function"?e[f]=xR(c,i):e[f]=c}),e}function OR(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Do={isArray:Y1,isArrayBuffer:bR,isBuffer:wR,isFormData:ER,isArrayBufferView:SR,isString:TR,isNumber:CR,isObject:zI,isPlainObject:Qp,isUndefined:d_,isDate:IR,isFile:AR,isBlob:PR,isFunction:LI,isStream:MR,isURLSearchParams:kR,isStandardBrowserEnv:LR,forEach:J1,merge:p_,extend:RR,trim:zR,stripBOM:OR},Mc=Do;function eE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var RI=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(Mc.isURLSearchParams(i))c=i.toString();else{var f=[];Mc.forEach(i,function(b,w){b===null||typeof b>"u"||(Mc.isArray(b)?w=w+"[]":b=[b],Mc.forEach(b,function(E){Mc.isDate(E)?E=E.toISOString():Mc.isObject(E)&&(E=JSON.stringify(E)),f.push(eE(w)+"="+eE(E))}))}),c=f.join("&")}if(c){var y=t.indexOf("#");y!==-1&&(t=t.slice(0,y)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},FR=Do;function kg(){this.handlers=[]}kg.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};kg.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};kg.prototype.forEach=function(t){FR.forEach(this.handlers,function(a){a!==null&&t(a)})};var jR=kg,DR=Do,BR=function(t,i){DR.forEach(t,function(c,f){f!==i&&f.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[f])})},OI=function(t,i,a,c,f){return t.config=i,a&&(t.code=a),t.request=c,t.response=f,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},h0,tE;function FI(){if(tE)return h0;tE=1;var e=OI;return h0=function(i,a,c,f,y){var l=new Error(i);return e(l,a,c,f,y)},h0}var f0,nE;function NR(){if(nE)return f0;nE=1;var e=FI();return f0=function(i,a,c){var f=c.config.validateStatus;!c.status||!f||f(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},f0}var d0,rE;function UR(){if(rE)return d0;rE=1;var e=Do;return d0=e.isStandardBrowserEnv()?function(){return{write:function(a,c,f,y,l,b){var w=[];w.push(a+"="+encodeURIComponent(c)),e.isNumber(f)&&w.push("expires="+new Date(f).toGMTString()),e.isString(y)&&w.push("path="+y),e.isString(l)&&w.push("domain="+l),b===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),d0}var p0,iE;function $R(){return iE||(iE=1,p0=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),p0}var m0,oE;function VR(){return oE||(oE=1,m0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),m0}var g0,sE;function GR(){if(sE)return g0;sE=1;var e=$R(),t=VR();return g0=function(a,c){return a&&!e(c)?t(a,c):c},g0}var y0,aE;function ZR(){if(aE)return y0;aE=1;var e=Do,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return y0=function(a){var c={},f,y,l;return a&&e.forEach(a.split(`
`),function(w){if(l=w.indexOf(":"),f=e.trim(w.substr(0,l)).toLowerCase(),y=e.trim(w.substr(l+1)),f){if(c[f]&&t.indexOf(f)>=0)return;f==="set-cookie"?c[f]=(c[f]?c[f]:[]).concat([y]):c[f]=c[f]?c[f]+", "+y:y}}),c},y0}var v0,lE;function WR(){if(lE)return v0;lE=1;var e=Do;return v0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function f(y){var l=y;return i&&(a.setAttribute("href",l),l=a.href),a.setAttribute("href",l),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=f(window.location.href),function(l){var b=e.isString(l)?f(l):l;return b.protocol===c.protocol&&b.host===c.host}}():function(){return function(){return!0}}(),v0}var _0,uE;function cE(){if(uE)return _0;uE=1;var e=Do,t=NR(),i=UR(),a=RI,c=GR(),f=ZR(),y=WR(),l=FI();return _0=function(w){return new Promise(function(E,z){var O=w.data,Q=w.headers,Y=w.responseType;e.isFormData(O)&&delete Q["Content-Type"];var pe=new XMLHttpRequest;if(w.auth){var G=w.auth.username||"",V=w.auth.password?unescape(encodeURIComponent(w.auth.password)):"";Q.Authorization="Basic "+btoa(G+":"+V)}var N=c(w.baseURL,w.url);pe.open(w.method.toUpperCase(),a(N,w.params,w.paramsSerializer),!0),pe.timeout=w.timeout;function oe(){if(pe){var B="getAllResponseHeaders"in pe?f(pe.getAllResponseHeaders()):null,S=!Y||Y==="text"||Y==="json"?pe.responseText:pe.response,M={data:S,status:pe.status,statusText:pe.statusText,headers:B,config:w,request:pe};t(E,z,M),pe=null}}if("onloadend"in pe?pe.onloadend=oe:pe.onreadystatechange=function(){!pe||pe.readyState!==4||pe.status===0&&!(pe.responseURL&&pe.responseURL.indexOf("file:")===0)||setTimeout(oe)},pe.onabort=function(){pe&&(z(l("Request aborted",w,"ECONNABORTED",pe)),pe=null)},pe.onerror=function(){z(l("Network Error",w,null,pe)),pe=null},pe.ontimeout=function(){var S="timeout of "+w.timeout+"ms exceeded";w.timeoutErrorMessage&&(S=w.timeoutErrorMessage),z(l(S,w,w.transitional&&w.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",pe)),pe=null},e.isStandardBrowserEnv()){var W=(w.withCredentials||y(N))&&w.xsrfCookieName?i.read(w.xsrfCookieName):void 0;W&&(Q[w.xsrfHeaderName]=W)}"setRequestHeader"in pe&&e.forEach(Q,function(S,M){typeof O>"u"&&M.toLowerCase()==="content-type"?delete Q[M]:pe.setRequestHeader(M,S)}),e.isUndefined(w.withCredentials)||(pe.withCredentials=!!w.withCredentials),Y&&Y!=="json"&&(pe.responseType=w.responseType),typeof w.onDownloadProgress=="function"&&pe.addEventListener("progress",w.onDownloadProgress),typeof w.onUploadProgress=="function"&&pe.upload&&pe.upload.addEventListener("progress",w.onUploadProgress),w.cancelToken&&w.cancelToken.promise.then(function(S){pe&&(pe.abort(),z(S),pe=null)}),O||(O=null),pe.send(O)})},_0}var _i=Do,hE=BR,HR=OI,XR={"Content-Type":"application/x-www-form-urlencoded"};function fE(e,t){!_i.isUndefined(e)&&_i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function qR(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=cE()),e}function KR(e,t,i){if(_i.isString(e))try{return(t||JSON.parse)(e),_i.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var zg={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:qR(),transformRequest:[function(t,i){return hE(i,"Accept"),hE(i,"Content-Type"),_i.isFormData(t)||_i.isArrayBuffer(t)||_i.isBuffer(t)||_i.isStream(t)||_i.isFile(t)||_i.isBlob(t)?t:_i.isArrayBufferView(t)?t.buffer:_i.isURLSearchParams(t)?(fE(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):_i.isObject(t)||i&&i["Content-Type"]==="application/json"?(fE(i,"application/json"),KR(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,f=!a&&this.responseType==="json";if(f||c&&_i.isString(t)&&t.length)try{return JSON.parse(t)}catch(y){if(f)throw y.name==="SyntaxError"?HR(y,this,"E_JSON_PARSE"):y}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};zg.headers={common:{Accept:"application/json, text/plain, */*"}};_i.forEach(["delete","get","head"],function(t){zg.headers[t]={}});_i.forEach(["post","put","patch"],function(t){zg.headers[t]=_i.merge(XR)});var Q1=zg,YR=Do,JR=Q1,QR=function(t,i,a){var c=this||JR;return YR.forEach(a,function(y){t=y.call(c,t,i)}),t},x0,dE;function jI(){return dE||(dE=1,x0=function(t){return!!(t&&t.__CANCEL__)}),x0}var pE=Do,w0=QR,eO=jI(),tO=Q1;function b0(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var nO=function(t){b0(t),t.headers=t.headers||{},t.data=w0.call(t,t.data,t.headers,t.transformRequest),t.headers=pE.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),pE.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||tO.adapter;return i(t).then(function(c){return b0(t),c.data=w0.call(t,c.data,c.headers,t.transformResponse),c},function(c){return eO(c)||(b0(t),c&&c.response&&(c.response.data=w0.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},zi=Do,DI=function(t,i){i=i||{};var a={},c=["url","method","data"],f=["headers","auth","proxy","params"],y=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function b(z,O){return zi.isPlainObject(z)&&zi.isPlainObject(O)?zi.merge(z,O):zi.isPlainObject(O)?zi.merge({},O):zi.isArray(O)?O.slice():O}function w(z){zi.isUndefined(i[z])?zi.isUndefined(t[z])||(a[z]=b(void 0,t[z])):a[z]=b(t[z],i[z])}zi.forEach(c,function(O){zi.isUndefined(i[O])||(a[O]=b(void 0,i[O]))}),zi.forEach(f,w),zi.forEach(y,function(O){zi.isUndefined(i[O])?zi.isUndefined(t[O])||(a[O]=b(void 0,t[O])):a[O]=b(void 0,i[O])}),zi.forEach(l,function(O){O in i?a[O]=b(t[O],i[O]):O in t&&(a[O]=b(void 0,t[O]))});var I=c.concat(f).concat(y).concat(l),E=Object.keys(t).concat(Object.keys(i)).filter(function(O){return I.indexOf(O)===-1});return zi.forEach(E,w),a};const rO="axios",iO="0.21.4",oO="Promise based HTTP client for the browser and node.js",sO="index.js",aO={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},lO={type:"git",url:"https://github.com/axios/axios.git"},uO=["xhr","http","ajax","promise","node"],cO="Matt Zabriskie",hO="MIT",fO={url:"https://github.com/axios/axios/issues"},dO="https://axios-http.com",pO={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},mO={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},gO="dist/axios.min.js",yO="dist/axios.min.js",vO="./index.d.ts",_O={"follow-redirects":"^1.14.0"},xO=[{path:"./dist/axios.min.js",threshold:"5kB"}],wO={name:rO,version:iO,description:oO,main:sO,scripts:aO,repository:lO,keywords:uO,author:cO,license:hO,bugs:fO,homepage:dO,devDependencies:pO,browser:mO,jsdelivr:gO,unpkg:yO,typings:vO,dependencies:_O,bundlesize:xO};var BI=wO,ex={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){ex[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var mE={},bO=BI.version.split(".");function NI(e,t){for(var i=t?t.split("."):bO,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}ex.transitional=function(t,i,a){var c=i&&NI(i);function f(y,l){return"[Axios v"+BI.version+"] Transitional option '"+y+"'"+l+(a?". "+a:"")}return function(y,l,b){if(t===!1)throw new Error(f(l," has been removed in "+i));return c&&!mE[l]&&(mE[l]=!0,console.warn(f(l," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(y,l,b):!0}};function EO(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var f=a[c],y=t[f];if(y){var l=e[f],b=l===void 0||y(l,f,e);if(b!==!0)throw new TypeError("option "+f+" must be "+b);continue}if(i!==!0)throw Error("Unknown option "+f)}}var SO={isOlderVersion:NI,assertOptions:EO,validators:ex},UI=Do,TO=RI,gE=jR,yE=nO,Lg=DI,$I=SO,kc=$I.validators;function Md(e){this.defaults=e,this.interceptors={request:new gE,response:new gE}}Md.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=Lg(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&$I.assertOptions(i,{silentJSONParsing:kc.transitional(kc.boolean,"1.0.0"),forcedJSONParsing:kc.transitional(kc.boolean,"1.0.0"),clarifyTimeoutError:kc.transitional(kc.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(z){typeof z.runWhen=="function"&&z.runWhen(t)===!1||(c=c&&z.synchronous,a.unshift(z.fulfilled,z.rejected))});var f=[];this.interceptors.response.forEach(function(z){f.push(z.fulfilled,z.rejected)});var y;if(!c){var l=[yE,void 0];for(Array.prototype.unshift.apply(l,a),l=l.concat(f),y=Promise.resolve(t);l.length;)y=y.then(l.shift(),l.shift());return y}for(var b=t;a.length;){var w=a.shift(),I=a.shift();try{b=w(b)}catch(E){I(E);break}}try{y=yE(b)}catch(E){return Promise.reject(E)}for(;f.length;)y=y.then(f.shift(),f.shift());return y};Md.prototype.getUri=function(t){return t=Lg(this.defaults,t),TO(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};UI.forEach(["delete","get","head","options"],function(t){Md.prototype[t]=function(i,a){return this.request(Lg(a||{},{method:t,url:i,data:(a||{}).data}))}});UI.forEach(["post","put","patch"],function(t){Md.prototype[t]=function(i,a,c){return this.request(Lg(c||{},{method:t,url:i,data:a}))}});var CO=Md,E0,vE;function VI(){if(vE)return E0;vE=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,E0=e,E0}var S0,_E;function IO(){if(_E)return S0;_E=1;var e=VI();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(y){a=y});var c=this;i(function(y){c.reason||(c.reason=new e(y),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(y){a=y});return{token:c,cancel:a}},S0=t,S0}var T0,xE;function AO(){return xE||(xE=1,T0=function(t){return function(a){return t.apply(null,a)}}),T0}var C0,wE;function PO(){return wE||(wE=1,C0=function(t){return typeof t=="object"&&t.isAxiosError===!0}),C0}var bE=Do,MO=kI,em=CO,kO=DI,zO=Q1;function GI(e){var t=new em(e),i=MO(em.prototype.request,t);return bE.extend(i,em.prototype,t),bE.extend(i,t),i}var As=GI(zO);As.Axios=em;As.create=function(t){return GI(kO(As.defaults,t))};As.Cancel=VI();As.CancelToken=IO();As.isCancel=jI();As.all=function(t){return Promise.all(t)};As.spread=AO();As.isAxiosError=PO();K1.exports=As;K1.exports.default=As;var LO=K1.exports,RO=LO;const OO={},FO=Object.freeze(Object.defineProperty({__proto__:null,default:OO},Symbol.toStringTag,{value:"Module"})),jO=m_(FO);var Rg={},DO=ih;function ih(e,t){this.x=e,this.y=t}ih.prototype={clone:function(){return new ih(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),f=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};ih.convert=function(e){return e instanceof ih?e:Array.isArray(e)?new ih(e[0],e[1]):e};var BO=DO,ZI=gh;function gh(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(NO,this,t)}function NO(e,t,i){e==1?t.id=i.readVarint():e==2?UO(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function UO(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}gh.types=["Unknown","Point","LineString","Polygon"];gh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,f=0,y=[],l;e.pos<t;){if(a<=0){var b=e.readVarint();i=b&7,a=b>>3}if(a--,i===1||i===2)c+=e.readSVarint(),f+=e.readSVarint(),i===1&&(l&&y.push(l),l=[]),l.push(new BO(c,f));else if(i===7)l&&l.push(l[0].clone());else throw new Error("unknown command "+i)}return l&&y.push(l),y};gh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,f=0,y=1/0,l=-1/0,b=1/0,w=-1/0;e.pos<t;){if(a<=0){var I=e.readVarint();i=I&7,a=I>>3}if(a--,i===1||i===2)c+=e.readSVarint(),f+=e.readSVarint(),c<y&&(y=c),c>l&&(l=c),f<b&&(b=f),f>w&&(w=f);else if(i!==7)throw new Error("unknown command "+i)}return[y,b,l,w]};gh.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,f=this.extent*t,y=this.loadGeometry(),l=gh.types[this.type],b,w;function I(O){for(var Q=0;Q<O.length;Q++){var Y=O[Q],pe=180-(Y.y+f)*360/a;O[Q]=[(Y.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(pe*Math.PI/180))-90]}}switch(this.type){case 1:var E=[];for(b=0;b<y.length;b++)E[b]=y[b][0];y=E,I(y);break;case 2:for(b=0;b<y.length;b++)I(y[b]);break;case 3:for(y=$O(y),b=0;b<y.length;b++)for(w=0;w<y[b].length;w++)I(y[b][w]);break}y.length===1?y=y[0]:l="Multi"+l;var z={type:"Feature",geometry:{type:l,coordinates:y},properties:this.properties};return"id"in this&&(z.id=this.id),z};function $O(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,f=0;f<t;f++){var y=VO(e[f]);y!==0&&(c===void 0&&(c=y<0),c===y<0?(a&&i.push(a),a=[e[f]]):a.push(e[f]))}return a&&i.push(a),i}function VO(e){for(var t=0,i=0,a=e.length,c=a-1,f,y;i<a;c=i++)f=e[i],y=e[c],t+=(y.x-f.x)*(f.y+y.y);return t}var GO=ZI,WI=HI;function HI(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(ZO,this,t),this.length=this._features.length}function ZO(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(WO(i))}function WO(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}HI.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new GO(this._pbf,t,this.extent,this._keys,this._values)};var HO=WI,XO=qO;function qO(e,t){this.layers=e.readFields(KO,{},t)}function KO(e,t,i){if(e===3){var a=new HO(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}Rg.VectorTile=XO;Rg.VectorTileFeature=ZI;Rg.VectorTileLayer=WI;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=BL,i=tR,a=nR,c=RO,f=jO,y=Rg;function l(V){return V&&typeof V=="object"&&"default"in V?V:{default:V}}var b=l(a),w=l(c),I=l(f),E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof wl<"u"?wl:typeof self<"u"?self:{};function z(V){var N={exports:{}};return V(N,N.exports),N.exports}var O=z(function(V,N){(function(W,B){V.exports=B(w.default)})(E,function(oe){return function(W){var B={};function S(M){if(B[M])return B[M].exports;var Z=B[M]={i:M,l:!1,exports:{}};return W[M].call(Z.exports,Z,Z.exports,S),Z.l=!0,Z.exports}return S.m=W,S.c=B,S.d=function(M,Z,X){S.o(M,Z)||Object.defineProperty(M,Z,{enumerable:!0,get:X})},S.r=function(M){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})},S.t=function(M,Z){if(Z&1&&(M=S(M)),Z&8||Z&4&&typeof M=="object"&&M&&M.__esModule)return M;var X=Object.create(null);if(S.r(X),Object.defineProperty(X,"default",{enumerable:!0,value:M}),Z&2&&typeof M!="string")for(var J in M)S.d(X,J,(function(ye){return M[ye]}).bind(null,J));return X},S.n=function(M){var Z=M&&M.__esModule?function(){return M.default}:function(){return M};return S.d(Z,"a",Z),Z},S.o=function(M,Z){return Object.prototype.hasOwnProperty.call(M,Z)},S.p="",S(S.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(W,B,S){S.r(B),S.d(B,"CacheControl",function(){return we}),S.d(B,"parse",function(){return Ne}),S.d(B,"format",function(){return ze}),S("./node_modules/core-js/modules/es6.array.from.js"),S("./node_modules/core-js/modules/es6.function.name.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/core-js/modules/web.dom.iterable.js"),S("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.regexp.split.js"),S("./node_modules/core-js/modules/es6.number.is-finite.js");function M(Pe,He){return xe(Pe)||ye(Pe,He)||X(Pe,He)||Z()}function Z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X(Pe,He){if(Pe){if(typeof Pe=="string")return J(Pe,He);var Ge=Object.prototype.toString.call(Pe).slice(8,-1);if(Ge==="Object"&&Pe.constructor&&(Ge=Pe.constructor.name),Ge==="Map"||Ge==="Set")return Array.from(Pe);if(Ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ge))return J(Pe,He)}}function J(Pe,He){(He==null||He>Pe.length)&&(He=Pe.length);for(var Ge=0,it=new Array(He);Ge<He;Ge++)it[Ge]=Pe[Ge];return it}function ye(Pe,He){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Pe)))){var Ge=[],it=!0,ut=!1,vt=void 0;try{for(var At=Pe[Symbol.iterator](),ht;!(it=(ht=At.next()).done)&&(Ge.push(ht.value),!(He&&Ge.length===He));it=!0);}catch(bt){ut=!0,vt=bt}finally{try{!it&&At.return!=null&&At.return()}finally{if(ut)throw vt}}return Ge}}function xe(Pe){if(Array.isArray(Pe))return Pe}function be(Pe,He){if(!(Pe instanceof He))throw new TypeError("Cannot call a class as a function")}function te(Pe,He){for(var Ge=0;Ge<He.length;Ge++){var it=He[Ge];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(Pe,it.key,it)}}function le(Pe,He,Ge){return He&&te(Pe.prototype,He),Ge&&te(Pe,Ge),Pe}var re=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,ne={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function ge(Pe){return Pe===null}function Ee(Pe){if(!Pe)return null;var He=parseInt(Pe,10);return!Number.isFinite(He)||He<0?null:He}var we=function(){function Pe(){be(this,Pe),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return le(Pe,[{key:"parse",value:function(Ge){if(!Ge||Ge.length===0)return this;var it={},ut=Ge.match(re)||[];return Array.prototype.forEach.call(ut,function(vt){var At=vt.split("=",2),ht=M(At,1),bt=ht[0],Ye=null;At.length>1&&(Ye=At[1].trim()),it[bt.toLowerCase()]=Ye}),this.maxAge=Ee(it[ne.maxAge]),this.sharedMaxAge=Ee(it[ne.sharedMaxAge]),this.maxStale=ge(it[ne.maxStale]),this.maxStaleDuration=Ee(it[ne.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=Ee(it[ne.minFresh]),this.immutable=ge(it[ne.immutable]),this.mustRevalidate=ge(it[ne.mustRevalidate]),this.noCache=ge(it[ne.noCache]),this.noStore=ge(it[ne.noStore]),this.noTransform=ge(it[ne.noTransform]),this.onlyIfCached=ge(it[ne.onlyIfCached]),this.private=ge(it[ne.private]),this.proxyRevalidate=ge(it[ne.proxyRevalidate]),this.public=ge(it[ne.public]),this}},{key:"format",value:function(){var Ge=[];return this.maxAge&&Ge.push("".concat(ne.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ge.push("".concat(ne.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ge.push("".concat(ne.maxStale,"=").concat(this.maxStaleDuration)):Ge.push(ne.maxStale)),this.minFresh&&Ge.push("".concat(ne.minFresh,"=").concat(this.minFresh)),this.immutable&&Ge.push(ne.immutable),this.mustRevalidate&&Ge.push(ne.mustRevalidate),this.noCache&&Ge.push(ne.noCache),this.noStore&&Ge.push(ne.noStore),this.noTransform&&Ge.push(ne.noTransform),this.onlyIfCached&&Ge.push(ne.onlyIfCached),this.private&&Ge.push(ne.private),this.proxyRevalidate&&Ge.push(ne.proxyRevalidate),this.public&&Ge.push(ne.public),Ge.join(", ")}}]),Pe}();function Ne(Pe){var He=new we;return He.parse(Pe)}function ze(Pe){return Pe instanceof we?Pe.format():we.prototype.format.call(Pe)}B.default={CacheControl:we,parse:Ne,format:ze}},"./node_modules/charenc/charenc.js":function(W,B){var S={utf8:{stringToBytes:function(M){return S.bin.stringToBytes(unescape(encodeURIComponent(M)))},bytesToString:function(M){return decodeURIComponent(escape(S.bin.bytesToString(M)))}},bin:{stringToBytes:function(M){for(var Z=[],X=0;X<M.length;X++)Z.push(M.charCodeAt(X)&255);return Z},bytesToString:function(M){for(var Z=[],X=0;X<M.length;X++)Z.push(String.fromCharCode(M[X]));return Z.join("")}}};W.exports=S},"./node_modules/core-js/modules/_a-function.js":function(W,B){W.exports=function(S){if(typeof S!="function")throw TypeError(S+" is not a function!");return S}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_wks.js")("unscopables"),Z=Array.prototype;Z[M]==null&&S("./node_modules/core-js/modules/_hide.js")(Z,M,{}),W.exports=function(X){Z[M][X]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_string-at.js")(!0);W.exports=function(Z,X,J){return X+(J?M(Z,X).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_is-object.js");W.exports=function(Z){if(!M(Z))throw TypeError(Z+" is not an object!");return Z}},"./node_modules/core-js/modules/_array-includes.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_to-iobject.js"),Z=S("./node_modules/core-js/modules/_to-length.js"),X=S("./node_modules/core-js/modules/_to-absolute-index.js");W.exports=function(J){return function(ye,xe,be){var te=M(ye),le=Z(te.length),re=X(be,le),ne;if(J&&xe!=xe){for(;le>re;)if(ne=te[re++],ne!=ne)return!0}else for(;le>re;re++)if((J||re in te)&&te[re]===xe)return J||re||0;return!J&&-1}}},"./node_modules/core-js/modules/_bind.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_a-function.js"),Z=S("./node_modules/core-js/modules/_is-object.js"),X=S("./node_modules/core-js/modules/_invoke.js"),J=[].slice,ye={},xe=function(be,te,le){if(!(te in ye)){for(var re=[],ne=0;ne<te;ne++)re[ne]="a["+ne+"]";ye[te]=Function("F,a","return new F("+re.join(",")+")")}return ye[te](be,le)};W.exports=Function.bind||function(te){var le=M(this),re=J.call(arguments,1),ne=function(){var ge=re.concat(J.call(arguments));return this instanceof ne?xe(le,ge.length,ge):X(le,ge,te)};return Z(le.prototype)&&(ne.prototype=le.prototype),ne}},"./node_modules/core-js/modules/_classof.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_cof.js"),Z=S("./node_modules/core-js/modules/_wks.js")("toStringTag"),X=M(function(){return arguments}())=="Arguments",J=function(ye,xe){try{return ye[xe]}catch{}};W.exports=function(ye){var xe,be,te;return ye===void 0?"Undefined":ye===null?"Null":typeof(be=J(xe=Object(ye),Z))=="string"?be:X?M(xe):(te=M(xe))=="Object"&&typeof xe.callee=="function"?"Arguments":te}},"./node_modules/core-js/modules/_cof.js":function(W,B){var S={}.toString;W.exports=function(M){return S.call(M).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(W,B){var S=W.exports={version:"2.6.12"};typeof __e=="number"&&(__e=S)},"./node_modules/core-js/modules/_create-property.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_object-dp.js"),Z=S("./node_modules/core-js/modules/_property-desc.js");W.exports=function(X,J,ye){J in X?M.f(X,J,Z(0,ye)):X[J]=ye}},"./node_modules/core-js/modules/_ctx.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_a-function.js");W.exports=function(Z,X,J){if(M(Z),X===void 0)return Z;switch(J){case 1:return function(ye){return Z.call(X,ye)};case 2:return function(ye,xe){return Z.call(X,ye,xe)};case 3:return function(ye,xe,be){return Z.call(X,ye,xe,be)}}return function(){return Z.apply(X,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(W,B){W.exports=function(S){if(S==null)throw TypeError("Can't call method on  "+S);return S}},"./node_modules/core-js/modules/_descriptors.js":function(W,B,S){W.exports=!S("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_is-object.js"),Z=S("./node_modules/core-js/modules/_global.js").document,X=M(Z)&&M(Z.createElement);W.exports=function(J){return X?Z.createElement(J):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(W,B){W.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_object-keys.js"),Z=S("./node_modules/core-js/modules/_object-gops.js"),X=S("./node_modules/core-js/modules/_object-pie.js");W.exports=function(J){var ye=M(J),xe=Z.f;if(xe)for(var be=xe(J),te=X.f,le=0,re;be.length>le;)te.call(J,re=be[le++])&&ye.push(re);return ye}},"./node_modules/core-js/modules/_export.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_core.js"),X=S("./node_modules/core-js/modules/_hide.js"),J=S("./node_modules/core-js/modules/_redefine.js"),ye=S("./node_modules/core-js/modules/_ctx.js"),xe="prototype",be=function(te,le,re){var ne=te&be.F,ge=te&be.G,Ee=te&be.S,we=te&be.P,Ne=te&be.B,ze=ge?M:Ee?M[le]||(M[le]={}):(M[le]||{})[xe],Pe=ge?Z:Z[le]||(Z[le]={}),He=Pe[xe]||(Pe[xe]={}),Ge,it,ut,vt;ge&&(re=le);for(Ge in re)it=!ne&&ze&&ze[Ge]!==void 0,ut=(it?ze:re)[Ge],vt=Ne&&it?ye(ut,M):we&&typeof ut=="function"?ye(Function.call,ut):ut,ze&&J(ze,Ge,ut,te&be.U),Pe[Ge]!=ut&&X(Pe,Ge,vt),we&&He[Ge]!=ut&&(He[Ge]=ut)};M.core=Z,be.F=1,be.G=2,be.S=4,be.P=8,be.B=16,be.W=32,be.U=64,be.R=128,W.exports=be},"./node_modules/core-js/modules/_fails-is-regexp.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_wks.js")("match");W.exports=function(Z){var X=/./;try{"/./"[Z](X)}catch{try{return X[M]=!1,!"/./"[Z](X)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(W,B){W.exports=function(S){try{return!!S()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(W,B,S){S("./node_modules/core-js/modules/es6.regexp.exec.js");var M=S("./node_modules/core-js/modules/_redefine.js"),Z=S("./node_modules/core-js/modules/_hide.js"),X=S("./node_modules/core-js/modules/_fails.js"),J=S("./node_modules/core-js/modules/_defined.js"),ye=S("./node_modules/core-js/modules/_wks.js"),xe=S("./node_modules/core-js/modules/_regexp-exec.js"),be=ye("species"),te=!X(function(){var re=/./;return re.exec=function(){var ne=[];return ne.groups={a:"7"},ne},"".replace(re,"$<a>")!=="7"}),le=function(){var re=/(?:)/,ne=re.exec;re.exec=function(){return ne.apply(this,arguments)};var ge="ab".split(re);return ge.length===2&&ge[0]==="a"&&ge[1]==="b"}();W.exports=function(re,ne,ge){var Ee=ye(re),we=!X(function(){var it={};return it[Ee]=function(){return 7},""[re](it)!=7}),Ne=we?!X(function(){var it=!1,ut=/a/;return ut.exec=function(){return it=!0,null},re==="split"&&(ut.constructor={},ut.constructor[be]=function(){return ut}),ut[Ee](""),!it}):void 0;if(!we||!Ne||re==="replace"&&!te||re==="split"&&!le){var ze=/./[Ee],Pe=ge(J,Ee,""[re],function(ut,vt,At,ht,bt){return vt.exec===xe?we&&!bt?{done:!0,value:ze.call(vt,At,ht)}:{done:!0,value:ut.call(At,vt,ht)}:{done:!1}}),He=Pe[0],Ge=Pe[1];M(String.prototype,re,He),Z(RegExp.prototype,Ee,ne==2?function(it,ut){return Ge.call(it,this,ut)}:function(it){return Ge.call(it,this)})}}},"./node_modules/core-js/modules/_flags.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_an-object.js");W.exports=function(){var Z=M(this),X="";return Z.global&&(X+="g"),Z.ignoreCase&&(X+="i"),Z.multiline&&(X+="m"),Z.unicode&&(X+="u"),Z.sticky&&(X+="y"),X}},"./node_modules/core-js/modules/_function-to-string.js":function(W,B,S){W.exports=S("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(W,B){var S=W.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=S)},"./node_modules/core-js/modules/_has.js":function(W,B){var S={}.hasOwnProperty;W.exports=function(M,Z){return S.call(M,Z)}},"./node_modules/core-js/modules/_hide.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_object-dp.js"),Z=S("./node_modules/core-js/modules/_property-desc.js");W.exports=S("./node_modules/core-js/modules/_descriptors.js")?function(X,J,ye){return M.f(X,J,Z(1,ye))}:function(X,J,ye){return X[J]=ye,X}},"./node_modules/core-js/modules/_html.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_global.js").document;W.exports=M&&M.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(W,B,S){W.exports=!S("./node_modules/core-js/modules/_descriptors.js")&&!S("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(S("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(W,B){W.exports=function(S,M,Z){var X=Z===void 0;switch(M.length){case 0:return X?S():S.call(Z);case 1:return X?S(M[0]):S.call(Z,M[0]);case 2:return X?S(M[0],M[1]):S.call(Z,M[0],M[1]);case 3:return X?S(M[0],M[1],M[2]):S.call(Z,M[0],M[1],M[2]);case 4:return X?S(M[0],M[1],M[2],M[3]):S.call(Z,M[0],M[1],M[2],M[3])}return S.apply(Z,M)}},"./node_modules/core-js/modules/_iobject.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_cof.js");W.exports=Object("z").propertyIsEnumerable(0)?Object:function(Z){return M(Z)=="String"?Z.split(""):Object(Z)}},"./node_modules/core-js/modules/_is-array-iter.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_iterators.js"),Z=S("./node_modules/core-js/modules/_wks.js")("iterator"),X=Array.prototype;W.exports=function(J){return J!==void 0&&(M.Array===J||X[Z]===J)}},"./node_modules/core-js/modules/_is-array.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_cof.js");W.exports=Array.isArray||function(X){return M(X)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(W,B){W.exports=function(S){return typeof S=="object"?S!==null:typeof S=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_is-object.js"),Z=S("./node_modules/core-js/modules/_cof.js"),X=S("./node_modules/core-js/modules/_wks.js")("match");W.exports=function(J){var ye;return M(J)&&((ye=J[X])!==void 0?!!ye:Z(J)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_an-object.js");W.exports=function(Z,X,J,ye){try{return ye?X(M(J)[0],J[1]):X(J)}catch(be){var xe=Z.return;throw xe!==void 0&&M(xe.call(Z)),be}}},"./node_modules/core-js/modules/_iter-create.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_object-create.js"),Z=S("./node_modules/core-js/modules/_property-desc.js"),X=S("./node_modules/core-js/modules/_set-to-string-tag.js"),J={};S("./node_modules/core-js/modules/_hide.js")(J,S("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),W.exports=function(ye,xe,be){ye.prototype=M(J,{next:Z(1,be)}),X(ye,xe+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_library.js"),Z=S("./node_modules/core-js/modules/_export.js"),X=S("./node_modules/core-js/modules/_redefine.js"),J=S("./node_modules/core-js/modules/_hide.js"),ye=S("./node_modules/core-js/modules/_iterators.js"),xe=S("./node_modules/core-js/modules/_iter-create.js"),be=S("./node_modules/core-js/modules/_set-to-string-tag.js"),te=S("./node_modules/core-js/modules/_object-gpo.js"),le=S("./node_modules/core-js/modules/_wks.js")("iterator"),re=!([].keys&&"next"in[].keys()),ne="@@iterator",ge="keys",Ee="values",we=function(){return this};W.exports=function(Ne,ze,Pe,He,Ge,it,ut){xe(Pe,ze,He);var vt=function(F){if(!re&&F in Ye)return Ye[F];switch(F){case ge:return function(){return new Pe(this,F)};case Ee:return function(){return new Pe(this,F)}}return function(){return new Pe(this,F)}},At=ze+" Iterator",ht=Ge==Ee,bt=!1,Ye=Ne.prototype,Vt=Ye[le]||Ye[ne]||Ge&&Ye[Ge],un=Vt||vt(Ge),Xt=Ge?ht?vt("entries"):un:void 0,Gt=ze=="Array"&&Ye.entries||Vt,an,vn,Se;if(Gt&&(Se=te(Gt.call(new Ne)),Se!==Object.prototype&&Se.next&&(be(Se,At,!0),!M&&typeof Se[le]!="function"&&J(Se,le,we))),ht&&Vt&&Vt.name!==Ee&&(bt=!0,un=function(){return Vt.call(this)}),(!M||ut)&&(re||bt||!Ye[le])&&J(Ye,le,un),ye[ze]=un,ye[At]=we,Ge)if(an={values:ht?un:vt(Ee),keys:it?un:vt(ge),entries:Xt},ut)for(vn in an)vn in Ye||X(Ye,vn,an[vn]);else Z(Z.P+Z.F*(re||bt),ze,an);return an}},"./node_modules/core-js/modules/_iter-detect.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_wks.js")("iterator"),Z=!1;try{var X=[7][M]();X.return=function(){Z=!0},Array.from(X,function(){throw 2})}catch{}W.exports=function(J,ye){if(!ye&&!Z)return!1;var xe=!1;try{var be=[7],te=be[M]();te.next=function(){return{done:xe=!0}},be[M]=function(){return te},J(be)}catch{}return xe}},"./node_modules/core-js/modules/_iter-step.js":function(W,B){W.exports=function(S,M){return{value:M,done:!!S}}},"./node_modules/core-js/modules/_iterators.js":function(W,B){W.exports={}},"./node_modules/core-js/modules/_library.js":function(W,B){W.exports=!1},"./node_modules/core-js/modules/_meta.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_uid.js")("meta"),Z=S("./node_modules/core-js/modules/_is-object.js"),X=S("./node_modules/core-js/modules/_has.js"),J=S("./node_modules/core-js/modules/_object-dp.js").f,ye=0,xe=Object.isExtensible||function(){return!0},be=!S("./node_modules/core-js/modules/_fails.js")(function(){return xe(Object.preventExtensions({}))}),te=function(Ee){J(Ee,M,{value:{i:"O"+ ++ye,w:{}}})},le=function(Ee,we){if(!Z(Ee))return typeof Ee=="symbol"?Ee:(typeof Ee=="string"?"S":"P")+Ee;if(!X(Ee,M)){if(!xe(Ee))return"F";if(!we)return"E";te(Ee)}return Ee[M].i},re=function(Ee,we){if(!X(Ee,M)){if(!xe(Ee))return!0;if(!we)return!1;te(Ee)}return Ee[M].w},ne=function(Ee){return be&&ge.NEED&&xe(Ee)&&!X(Ee,M)&&te(Ee),Ee},ge=W.exports={KEY:M,NEED:!1,fastKey:le,getWeak:re,onFreeze:ne}},"./node_modules/core-js/modules/_object-create.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_an-object.js"),Z=S("./node_modules/core-js/modules/_object-dps.js"),X=S("./node_modules/core-js/modules/_enum-bug-keys.js"),J=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ye=function(){},xe="prototype",be=function(){var te=S("./node_modules/core-js/modules/_dom-create.js")("iframe"),le=X.length,re="<",ne=">",ge;for(te.style.display="none",S("./node_modules/core-js/modules/_html.js").appendChild(te),te.src="javascript:",ge=te.contentWindow.document,ge.open(),ge.write(re+"script"+ne+"document.F=Object"+re+"/script"+ne),ge.close(),be=ge.F;le--;)delete be[xe][X[le]];return be()};W.exports=Object.create||function(le,re){var ne;return le!==null?(ye[xe]=M(le),ne=new ye,ye[xe]=null,ne[J]=le):ne=be(),re===void 0?ne:Z(ne,re)}},"./node_modules/core-js/modules/_object-dp.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_an-object.js"),Z=S("./node_modules/core-js/modules/_ie8-dom-define.js"),X=S("./node_modules/core-js/modules/_to-primitive.js"),J=Object.defineProperty;B.f=S("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(xe,be,te){if(M(xe),be=X(be,!0),M(te),Z)try{return J(xe,be,te)}catch{}if("get"in te||"set"in te)throw TypeError("Accessors not supported!");return"value"in te&&(xe[be]=te.value),xe}},"./node_modules/core-js/modules/_object-dps.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_object-dp.js"),Z=S("./node_modules/core-js/modules/_an-object.js"),X=S("./node_modules/core-js/modules/_object-keys.js");W.exports=S("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ye,xe){Z(ye);for(var be=X(xe),te=be.length,le=0,re;te>le;)M.f(ye,re=be[le++],xe[re]);return ye}},"./node_modules/core-js/modules/_object-gopd.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_object-pie.js"),Z=S("./node_modules/core-js/modules/_property-desc.js"),X=S("./node_modules/core-js/modules/_to-iobject.js"),J=S("./node_modules/core-js/modules/_to-primitive.js"),ye=S("./node_modules/core-js/modules/_has.js"),xe=S("./node_modules/core-js/modules/_ie8-dom-define.js"),be=Object.getOwnPropertyDescriptor;B.f=S("./node_modules/core-js/modules/_descriptors.js")?be:function(le,re){if(le=X(le),re=J(re,!0),xe)try{return be(le,re)}catch{}if(ye(le,re))return Z(!M.f.call(le,re),le[re])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_to-iobject.js"),Z=S("./node_modules/core-js/modules/_object-gopn.js").f,X={}.toString,J=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ye=function(xe){try{return Z(xe)}catch{return J.slice()}};W.exports.f=function(be){return J&&X.call(be)=="[object Window]"?ye(be):Z(M(be))}},"./node_modules/core-js/modules/_object-gopn.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_object-keys-internal.js"),Z=S("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");B.f=Object.getOwnPropertyNames||function(J){return M(J,Z)}},"./node_modules/core-js/modules/_object-gops.js":function(W,B){B.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_has.js"),Z=S("./node_modules/core-js/modules/_to-object.js"),X=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),J=Object.prototype;W.exports=Object.getPrototypeOf||function(ye){return ye=Z(ye),M(ye,X)?ye[X]:typeof ye.constructor=="function"&&ye instanceof ye.constructor?ye.constructor.prototype:ye instanceof Object?J:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_has.js"),Z=S("./node_modules/core-js/modules/_to-iobject.js"),X=S("./node_modules/core-js/modules/_array-includes.js")(!1),J=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");W.exports=function(ye,xe){var be=Z(ye),te=0,le=[],re;for(re in be)re!=J&&M(be,re)&&le.push(re);for(;xe.length>te;)M(be,re=xe[te++])&&(~X(le,re)||le.push(re));return le}},"./node_modules/core-js/modules/_object-keys.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_object-keys-internal.js"),Z=S("./node_modules/core-js/modules/_enum-bug-keys.js");W.exports=Object.keys||function(J){return M(J,Z)}},"./node_modules/core-js/modules/_object-pie.js":function(W,B){B.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_object-gopn.js"),Z=S("./node_modules/core-js/modules/_object-gops.js"),X=S("./node_modules/core-js/modules/_an-object.js"),J=S("./node_modules/core-js/modules/_global.js").Reflect;W.exports=J&&J.ownKeys||function(xe){var be=M.f(X(xe)),te=Z.f;return te?be.concat(te(xe)):be}},"./node_modules/core-js/modules/_property-desc.js":function(W,B){W.exports=function(S,M){return{enumerable:!(S&1),configurable:!(S&2),writable:!(S&4),value:M}}},"./node_modules/core-js/modules/_redefine.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_hide.js"),X=S("./node_modules/core-js/modules/_has.js"),J=S("./node_modules/core-js/modules/_uid.js")("src"),ye=S("./node_modules/core-js/modules/_function-to-string.js"),xe="toString",be=(""+ye).split(xe);S("./node_modules/core-js/modules/_core.js").inspectSource=function(te){return ye.call(te)},(W.exports=function(te,le,re,ne){var ge=typeof re=="function";ge&&(X(re,"name")||Z(re,"name",le)),te[le]!==re&&(ge&&(X(re,J)||Z(re,J,te[le]?""+te[le]:be.join(String(le)))),te===M?te[le]=re:ne?te[le]?te[le]=re:Z(te,le,re):(delete te[le],Z(te,le,re)))})(Function.prototype,xe,function(){return typeof this=="function"&&this[J]||ye.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_classof.js"),Z=RegExp.prototype.exec;W.exports=function(X,J){var ye=X.exec;if(typeof ye=="function"){var xe=ye.call(X,J);if(typeof xe!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return xe}if(M(X)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return Z.call(X,J)}},"./node_modules/core-js/modules/_regexp-exec.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_flags.js"),Z=RegExp.prototype.exec,X=String.prototype.replace,J=Z,ye="lastIndex",xe=function(){var le=/a/,re=/b*/g;return Z.call(le,"a"),Z.call(re,"a"),le[ye]!==0||re[ye]!==0}(),be=/()??/.exec("")[1]!==void 0,te=xe||be;te&&(J=function(re){var ne=this,ge,Ee,we,Ne;return be&&(Ee=new RegExp("^"+ne.source+"$(?!\\s)",M.call(ne))),xe&&(ge=ne[ye]),we=Z.call(ne,re),xe&&we&&(ne[ye]=ne.global?we.index+we[0].length:ge),be&&we&&we.length>1&&X.call(we[0],Ee,function(){for(Ne=1;Ne<arguments.length-2;Ne++)arguments[Ne]===void 0&&(we[Ne]=void 0)}),we}),W.exports=J},"./node_modules/core-js/modules/_set-to-string-tag.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_object-dp.js").f,Z=S("./node_modules/core-js/modules/_has.js"),X=S("./node_modules/core-js/modules/_wks.js")("toStringTag");W.exports=function(J,ye,xe){J&&!Z(J=xe?J:J.prototype,X)&&M(J,X,{configurable:!0,value:ye})}},"./node_modules/core-js/modules/_shared-key.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_shared.js")("keys"),Z=S("./node_modules/core-js/modules/_uid.js");W.exports=function(X){return M[X]||(M[X]=Z(X))}},"./node_modules/core-js/modules/_shared.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_core.js"),Z=S("./node_modules/core-js/modules/_global.js"),X="__core-js_shared__",J=Z[X]||(Z[X]={});(W.exports=function(ye,xe){return J[ye]||(J[ye]=xe!==void 0?xe:{})})("versions",[]).push({version:M.version,mode:S("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_an-object.js"),Z=S("./node_modules/core-js/modules/_a-function.js"),X=S("./node_modules/core-js/modules/_wks.js")("species");W.exports=function(J,ye){var xe=M(J).constructor,be;return xe===void 0||(be=M(xe)[X])==null?ye:Z(be)}},"./node_modules/core-js/modules/_string-at.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_to-integer.js"),Z=S("./node_modules/core-js/modules/_defined.js");W.exports=function(X){return function(J,ye){var xe=String(Z(J)),be=M(ye),te=xe.length,le,re;return be<0||be>=te?X?"":void 0:(le=xe.charCodeAt(be),le<55296||le>56319||be+1===te||(re=xe.charCodeAt(be+1))<56320||re>57343?X?xe.charAt(be):le:X?xe.slice(be,be+2):(le-55296<<10)+(re-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_is-regexp.js"),Z=S("./node_modules/core-js/modules/_defined.js");W.exports=function(X,J,ye){if(M(J))throw TypeError("String#"+ye+" doesn't accept regex!");return String(Z(X))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_to-integer.js"),Z=Math.max,X=Math.min;W.exports=function(J,ye){return J=M(J),J<0?Z(J+ye,0):X(J,ye)}},"./node_modules/core-js/modules/_to-integer.js":function(W,B){var S=Math.ceil,M=Math.floor;W.exports=function(Z){return isNaN(Z=+Z)?0:(Z>0?M:S)(Z)}},"./node_modules/core-js/modules/_to-iobject.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_iobject.js"),Z=S("./node_modules/core-js/modules/_defined.js");W.exports=function(X){return M(Z(X))}},"./node_modules/core-js/modules/_to-length.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_to-integer.js"),Z=Math.min;W.exports=function(X){return X>0?Z(M(X),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_defined.js");W.exports=function(Z){return Object(M(Z))}},"./node_modules/core-js/modules/_to-primitive.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_is-object.js");W.exports=function(Z,X){if(!M(Z))return Z;var J,ye;if(X&&typeof(J=Z.toString)=="function"&&!M(ye=J.call(Z))||typeof(J=Z.valueOf)=="function"&&!M(ye=J.call(Z))||!X&&typeof(J=Z.toString)=="function"&&!M(ye=J.call(Z)))return ye;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(W,B){var S=0,M=Math.random();W.exports=function(Z){return"Symbol(".concat(Z===void 0?"":Z,")_",(++S+M).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_core.js"),X=S("./node_modules/core-js/modules/_library.js"),J=S("./node_modules/core-js/modules/_wks-ext.js"),ye=S("./node_modules/core-js/modules/_object-dp.js").f;W.exports=function(xe){var be=Z.Symbol||(Z.Symbol=X?{}:M.Symbol||{});xe.charAt(0)!="_"&&!(xe in be)&&ye(be,xe,{value:J.f(xe)})}},"./node_modules/core-js/modules/_wks-ext.js":function(W,B,S){B.f=S("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_shared.js")("wks"),Z=S("./node_modules/core-js/modules/_uid.js"),X=S("./node_modules/core-js/modules/_global.js").Symbol,J=typeof X=="function",ye=W.exports=function(xe){return M[xe]||(M[xe]=J&&X[xe]||(J?X:Z)("Symbol."+xe))};ye.store=M},"./node_modules/core-js/modules/core.get-iterator-method.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_classof.js"),Z=S("./node_modules/core-js/modules/_wks.js")("iterator"),X=S("./node_modules/core-js/modules/_iterators.js");W.exports=S("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(J){if(J!=null)return J[Z]||J["@@iterator"]||X[M(J)]}},"./node_modules/core-js/modules/es6.array.from.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_ctx.js"),Z=S("./node_modules/core-js/modules/_export.js"),X=S("./node_modules/core-js/modules/_to-object.js"),J=S("./node_modules/core-js/modules/_iter-call.js"),ye=S("./node_modules/core-js/modules/_is-array-iter.js"),xe=S("./node_modules/core-js/modules/_to-length.js"),be=S("./node_modules/core-js/modules/_create-property.js"),te=S("./node_modules/core-js/modules/core.get-iterator-method.js");Z(Z.S+Z.F*!S("./node_modules/core-js/modules/_iter-detect.js")(function(le){Array.from(le)}),"Array",{from:function(re){var ne=X(re),ge=typeof this=="function"?this:Array,Ee=arguments.length,we=Ee>1?arguments[1]:void 0,Ne=we!==void 0,ze=0,Pe=te(ne),He,Ge,it,ut;if(Ne&&(we=M(we,Ee>2?arguments[2]:void 0,2)),Pe!=null&&!(ge==Array&&ye(Pe)))for(ut=Pe.call(ne),Ge=new ge;!(it=ut.next()).done;ze++)be(Ge,ze,Ne?J(ut,we,[it.value,ze],!0):it.value);else for(He=xe(ne.length),Ge=new ge(He);He>ze;ze++)be(Ge,ze,Ne?we(ne[ze],ze):ne[ze]);return Ge.length=ze,Ge}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_add-to-unscopables.js"),Z=S("./node_modules/core-js/modules/_iter-step.js"),X=S("./node_modules/core-js/modules/_iterators.js"),J=S("./node_modules/core-js/modules/_to-iobject.js");W.exports=S("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ye,xe){this._t=J(ye),this._i=0,this._k=xe},function(){var ye=this._t,xe=this._k,be=this._i++;return!ye||be>=ye.length?(this._t=void 0,Z(1)):xe=="keys"?Z(0,be):xe=="values"?Z(0,ye[be]):Z(0,[be,ye[be]])},"values"),X.Arguments=X.Array,M("keys"),M("values"),M("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_export.js");M(M.P,"Function",{bind:S("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_object-dp.js").f,Z=Function.prototype,X=/^\s*function ([^ (]*)/,J="name";J in Z||S("./node_modules/core-js/modules/_descriptors.js")&&M(Z,J,{configurable:!0,get:function(){try{return(""+this).match(X)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_global.js").isFinite;M(M.S,"Number",{isFinite:function(J){return typeof J=="number"&&Z(J)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_classof.js"),Z={};Z[S("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",Z+""!="[object z]"&&S("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+M(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_regexp-exec.js");S("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:M!==/./.exec},{exec:M})},"./node_modules/core-js/modules/es6.regexp.split.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_is-regexp.js"),Z=S("./node_modules/core-js/modules/_an-object.js"),X=S("./node_modules/core-js/modules/_species-constructor.js"),J=S("./node_modules/core-js/modules/_advance-string-index.js"),ye=S("./node_modules/core-js/modules/_to-length.js"),xe=S("./node_modules/core-js/modules/_regexp-exec-abstract.js"),be=S("./node_modules/core-js/modules/_regexp-exec.js"),te=S("./node_modules/core-js/modules/_fails.js"),le=Math.min,re=[].push,ne="split",ge="length",Ee="lastIndex",we=4294967295,Ne=!te(function(){});S("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(ze,Pe,He,Ge){var it;return"abbc"[ne](/(b)*/)[1]=="c"||"test"[ne](/(?:)/,-1)[ge]!=4||"ab"[ne](/(?:ab)*/)[ge]!=2||"."[ne](/(.?)(.?)/)[ge]!=4||"."[ne](/()()/)[ge]>1||""[ne](/.?/)[ge]?it=function(ut,vt){var At=String(this);if(ut===void 0&&vt===0)return[];if(!M(ut))return He.call(At,ut,vt);for(var ht=[],bt=(ut.ignoreCase?"i":"")+(ut.multiline?"m":"")+(ut.unicode?"u":"")+(ut.sticky?"y":""),Ye=0,Vt=vt===void 0?we:vt>>>0,un=new RegExp(ut.source,bt+"g"),Xt,Gt,an;(Xt=be.call(un,At))&&(Gt=un[Ee],!(Gt>Ye&&(ht.push(At.slice(Ye,Xt.index)),Xt[ge]>1&&Xt.index<At[ge]&&re.apply(ht,Xt.slice(1)),an=Xt[0][ge],Ye=Gt,ht[ge]>=Vt)));)un[Ee]===Xt.index&&un[Ee]++;return Ye===At[ge]?(an||!un.test(""))&&ht.push(""):ht.push(At.slice(Ye)),ht[ge]>Vt?ht.slice(0,Vt):ht}:"0"[ne](void 0,0)[ge]?it=function(ut,vt){return ut===void 0&&vt===0?[]:He.call(this,ut,vt)}:it=He,[function(vt,At){var ht=ze(this),bt=vt==null?void 0:vt[Pe];return bt!==void 0?bt.call(vt,ht,At):it.call(String(ht),vt,At)},function(ut,vt){var At=Ge(it,ut,this,vt,it!==He);if(At.done)return At.value;var ht=Z(ut),bt=String(this),Ye=X(ht,RegExp),Vt=ht.unicode,un=(ht.ignoreCase?"i":"")+(ht.multiline?"m":"")+(ht.unicode?"u":"")+(Ne?"y":"g"),Xt=new Ye(Ne?ht:"^(?:"+ht.source+")",un),Gt=vt===void 0?we:vt>>>0;if(Gt===0)return[];if(bt.length===0)return xe(Xt,bt)===null?[bt]:[];for(var an=0,vn=0,Se=[];vn<bt.length;){Xt.lastIndex=Ne?vn:0;var F=xe(Xt,Ne?bt:bt.slice(vn)),R;if(F===null||(R=le(ye(Xt.lastIndex+(Ne?0:vn)),bt.length))===an)vn=J(bt,vn,Vt);else{if(Se.push(bt.slice(an,vn)),Se.length===Gt)return Se;for(var _e=1;_e<=F.length-1;_e++)if(Se.push(F[_e]),Se.length===Gt)return Se;vn=an=R}}return Se.push(bt.slice(an)),Se}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_string-context.js"),X="includes";M(M.P+M.F*S("./node_modules/core-js/modules/_fails-is-regexp.js")(X),"String",{includes:function(ye){return!!~Z(this,ye,X).indexOf(ye,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_has.js"),X=S("./node_modules/core-js/modules/_descriptors.js"),J=S("./node_modules/core-js/modules/_export.js"),ye=S("./node_modules/core-js/modules/_redefine.js"),xe=S("./node_modules/core-js/modules/_meta.js").KEY,be=S("./node_modules/core-js/modules/_fails.js"),te=S("./node_modules/core-js/modules/_shared.js"),le=S("./node_modules/core-js/modules/_set-to-string-tag.js"),re=S("./node_modules/core-js/modules/_uid.js"),ne=S("./node_modules/core-js/modules/_wks.js"),ge=S("./node_modules/core-js/modules/_wks-ext.js"),Ee=S("./node_modules/core-js/modules/_wks-define.js"),we=S("./node_modules/core-js/modules/_enum-keys.js"),Ne=S("./node_modules/core-js/modules/_is-array.js"),ze=S("./node_modules/core-js/modules/_an-object.js"),Pe=S("./node_modules/core-js/modules/_is-object.js"),He=S("./node_modules/core-js/modules/_to-object.js"),Ge=S("./node_modules/core-js/modules/_to-iobject.js"),it=S("./node_modules/core-js/modules/_to-primitive.js"),ut=S("./node_modules/core-js/modules/_property-desc.js"),vt=S("./node_modules/core-js/modules/_object-create.js"),At=S("./node_modules/core-js/modules/_object-gopn-ext.js"),ht=S("./node_modules/core-js/modules/_object-gopd.js"),bt=S("./node_modules/core-js/modules/_object-gops.js"),Ye=S("./node_modules/core-js/modules/_object-dp.js"),Vt=S("./node_modules/core-js/modules/_object-keys.js"),un=ht.f,Xt=Ye.f,Gt=At.f,an=M.Symbol,vn=M.JSON,Se=vn&&vn.stringify,F="prototype",R=ne("_hidden"),_e=ne("toPrimitive"),We={}.propertyIsEnumerable,De=te("symbol-registry"),lt=te("symbols"),ae=te("op-symbols"),L=Object[F],D=typeof an=="function"&&!!bt.f,ue=M.QObject,Oe=!ue||!ue[F]||!ue[F].findChild,qe=X&&be(function(){return vt(Xt({},"a",{get:function(){return Xt(this,"a",{value:7}).a}})).a!=7})?function(se,de,Te){var Re=un(L,de);Re&&delete L[de],Xt(se,de,Te),Re&&se!==L&&Xt(L,de,Re)}:Xt,st=function(se){var de=lt[se]=vt(an[F]);return de._k=se,de},en=D&&typeof an.iterator=="symbol"?function(se){return typeof se=="symbol"}:function(se){return se instanceof an},Mt=function(de,Te,Re){return de===L&&Mt(ae,Te,Re),ze(de),Te=it(Te,!0),ze(Re),Z(lt,Te)?(Re.enumerable?(Z(de,R)&&de[R][Te]&&(de[R][Te]=!1),Re=vt(Re,{enumerable:ut(0,!1)})):(Z(de,R)||Xt(de,R,ut(1,{})),de[R][Te]=!0),qe(de,Te,Re)):Xt(de,Te,Re)},_n=function(de,Te){ze(de);for(var Re=we(Te=Ge(Te)),Xe=0,Ve=Re.length,$e;Ve>Xe;)Mt(de,$e=Re[Xe++],Te[$e]);return de},An=function(de,Te){return Te===void 0?vt(de):_n(vt(de),Te)},xn=function(de){var Te=We.call(this,de=it(de,!0));return this===L&&Z(lt,de)&&!Z(ae,de)?!1:Te||!Z(this,de)||!Z(lt,de)||Z(this,R)&&this[R][de]?Te:!0},_r=function(de,Te){if(de=Ge(de),Te=it(Te,!0),!(de===L&&Z(lt,Te)&&!Z(ae,Te))){var Re=un(de,Te);return Re&&Z(lt,Te)&&!(Z(de,R)&&de[R][Te])&&(Re.enumerable=!0),Re}},hr=function(de){for(var Te=Gt(Ge(de)),Re=[],Xe=0,Ve;Te.length>Xe;)!Z(lt,Ve=Te[Xe++])&&Ve!=R&&Ve!=xe&&Re.push(Ve);return Re},On=function(de){for(var Te=de===L,Re=Gt(Te?ae:Ge(de)),Xe=[],Ve=0,$e;Re.length>Ve;)Z(lt,$e=Re[Ve++])&&(!Te||Z(L,$e))&&Xe.push(lt[$e]);return Xe};D||(an=function(){if(this instanceof an)throw TypeError("Symbol is not a constructor!");var de=re(arguments.length>0?arguments[0]:void 0),Te=function(Re){this===L&&Te.call(ae,Re),Z(this,R)&&Z(this[R],de)&&(this[R][de]=!1),qe(this,de,ut(1,Re))};return X&&Oe&&qe(L,de,{configurable:!0,set:Te}),st(de)},ye(an[F],"toString",function(){return this._k}),ht.f=_r,Ye.f=Mt,S("./node_modules/core-js/modules/_object-gopn.js").f=At.f=hr,S("./node_modules/core-js/modules/_object-pie.js").f=xn,bt.f=On,X&&!S("./node_modules/core-js/modules/_library.js")&&ye(L,"propertyIsEnumerable",xn,!0),ge.f=function(se){return st(ne(se))}),J(J.G+J.W+J.F*!D,{Symbol:an});for(var ro="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Qn=0;ro.length>Qn;)ne(ro[Qn++]);for(var Fi=Vt(ne.store),Ae=0;Fi.length>Ae;)Ee(Fi[Ae++]);J(J.S+J.F*!D,"Symbol",{for:function(se){return Z(De,se+="")?De[se]:De[se]=an(se)},keyFor:function(de){if(!en(de))throw TypeError(de+" is not a symbol!");for(var Te in De)if(De[Te]===de)return Te},useSetter:function(){Oe=!0},useSimple:function(){Oe=!1}}),J(J.S+J.F*!D,"Object",{create:An,defineProperty:Mt,defineProperties:_n,getOwnPropertyDescriptor:_r,getOwnPropertyNames:hr,getOwnPropertySymbols:On});var ie=be(function(){bt.f(1)});J(J.S+J.F*ie,"Object",{getOwnPropertySymbols:function(de){return bt.f(He(de))}}),vn&&J(J.S+J.F*(!D||be(function(){var se=an();return Se([se])!="[null]"||Se({a:se})!="{}"||Se(Object(se))!="{}"})),"JSON",{stringify:function(de){for(var Te=[de],Re=1,Xe,Ve;arguments.length>Re;)Te.push(arguments[Re++]);if(Ve=Xe=Te[1],!(!Pe(Xe)&&de===void 0||en(de)))return Ne(Xe)||(Xe=function($e,Je){if(typeof Ve=="function"&&(Je=Ve.call(this,$e,Je)),!en(Je))return Je}),Te[1]=Xe,Se.apply(vn,Te)}}),an[F][_e]||S("./node_modules/core-js/modules/_hide.js")(an[F],_e,an[F].valueOf),le(an,"Symbol"),le(Math,"Math",!0),le(M.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_array-includes.js")(!0);M(M.P,"Array",{includes:function(J){return Z(this,J,arguments.length>1?arguments[1]:void 0)}}),S("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(W,B,S){var M=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_own-keys.js"),X=S("./node_modules/core-js/modules/_to-iobject.js"),J=S("./node_modules/core-js/modules/_object-gopd.js"),ye=S("./node_modules/core-js/modules/_create-property.js");M(M.S,"Object",{getOwnPropertyDescriptors:function(be){for(var te=X(be),le=J.f,re=Z(te),ne={},ge=0,Ee,we;re.length>ge;)we=le(te,Ee=re[ge++]),we!==void 0&&ye(ne,Ee,we);return ne}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(W,B,S){S("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(W,B,S){for(var M=S("./node_modules/core-js/modules/es6.array.iterator.js"),Z=S("./node_modules/core-js/modules/_object-keys.js"),X=S("./node_modules/core-js/modules/_redefine.js"),J=S("./node_modules/core-js/modules/_global.js"),ye=S("./node_modules/core-js/modules/_hide.js"),xe=S("./node_modules/core-js/modules/_iterators.js"),be=S("./node_modules/core-js/modules/_wks.js"),te=be("iterator"),le=be("toStringTag"),re=xe.Array,ne={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},ge=Z(ne),Ee=0;Ee<ge.length;Ee++){var we=ge[Ee],Ne=ne[we],ze=J[we],Pe=ze&&ze.prototype,He;if(Pe&&(Pe[te]||ye(Pe,te,re),Pe[le]||ye(Pe,le,we),xe[we]=re,Ne))for(He in M)Pe[He]||X(Pe,He,M[He],!0)}},"./node_modules/crypt/crypt.js":function(W,B){(function(){var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M={rotl:function(Z,X){return Z<<X|Z>>>32-X},rotr:function(Z,X){return Z<<32-X|Z>>>X},endian:function(Z){if(Z.constructor==Number)return M.rotl(Z,8)&16711935|M.rotl(Z,24)&4278255360;for(var X=0;X<Z.length;X++)Z[X]=M.endian(Z[X]);return Z},randomBytes:function(Z){for(var X=[];Z>0;Z--)X.push(Math.floor(Math.random()*256));return X},bytesToWords:function(Z){for(var X=[],J=0,ye=0;J<Z.length;J++,ye+=8)X[ye>>>5]|=Z[J]<<24-ye%32;return X},wordsToBytes:function(Z){for(var X=[],J=0;J<Z.length*32;J+=8)X.push(Z[J>>>5]>>>24-J%32&255);return X},bytesToHex:function(Z){for(var X=[],J=0;J<Z.length;J++)X.push((Z[J]>>>4).toString(16)),X.push((Z[J]&15).toString(16));return X.join("")},hexToBytes:function(Z){for(var X=[],J=0;J<Z.length;J+=2)X.push(parseInt(Z.substr(J,2),16));return X},bytesToBase64:function(Z){for(var X=[],J=0;J<Z.length;J+=3)for(var ye=Z[J]<<16|Z[J+1]<<8|Z[J+2],xe=0;xe<4;xe++)J*8+xe*6<=Z.length*8?X.push(S.charAt(ye>>>6*(3-xe)&63)):X.push("=");return X.join("")},base64ToBytes:function(Z){Z=Z.replace(/[^A-Z0-9+\/]/ig,"");for(var X=[],J=0,ye=0;J<Z.length;ye=++J%4)ye!=0&&X.push((S.indexOf(Z.charAt(J-1))&Math.pow(2,-2*ye+8)-1)<<ye*2|S.indexOf(Z.charAt(J))>>>6-ye*2);return X}};W.exports=M})()},"./node_modules/is-buffer/index.js":function(W,B){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */W.exports=function(Z){return Z!=null&&(S(Z)||M(Z)||!!Z._isBuffer)};function S(Z){return!!Z.constructor&&typeof Z.constructor.isBuffer=="function"&&Z.constructor.isBuffer(Z)}function M(Z){return typeof Z.readFloatLE=="function"&&typeof Z.slice=="function"&&S(Z.slice(0,0))}},"./node_modules/md5/md5.js":function(W,B,S){(function(){var M=S("./node_modules/crypt/crypt.js"),Z=S("./node_modules/charenc/charenc.js").utf8,X=S("./node_modules/is-buffer/index.js"),J=S("./node_modules/charenc/charenc.js").bin,ye=function(xe,be){xe.constructor==String?be&&be.encoding==="binary"?xe=J.stringToBytes(xe):xe=Z.stringToBytes(xe):X(xe)?xe=Array.prototype.slice.call(xe,0):!Array.isArray(xe)&&xe.constructor!==Uint8Array&&(xe=xe.toString());for(var te=M.bytesToWords(xe),le=xe.length*8,re=1732584193,ne=-271733879,ge=-1732584194,Ee=271733878,we=0;we<te.length;we++)te[we]=(te[we]<<8|te[we]>>>24)&16711935|(te[we]<<24|te[we]>>>8)&4278255360;te[le>>>5]|=128<<le%32,te[(le+64>>>9<<4)+14]=le;for(var Ne=ye._ff,ze=ye._gg,Pe=ye._hh,He=ye._ii,we=0;we<te.length;we+=16){var Ge=re,it=ne,ut=ge,vt=Ee;re=Ne(re,ne,ge,Ee,te[we+0],7,-680876936),Ee=Ne(Ee,re,ne,ge,te[we+1],12,-389564586),ge=Ne(ge,Ee,re,ne,te[we+2],17,606105819),ne=Ne(ne,ge,Ee,re,te[we+3],22,-1044525330),re=Ne(re,ne,ge,Ee,te[we+4],7,-176418897),Ee=Ne(Ee,re,ne,ge,te[we+5],12,1200080426),ge=Ne(ge,Ee,re,ne,te[we+6],17,-1473231341),ne=Ne(ne,ge,Ee,re,te[we+7],22,-45705983),re=Ne(re,ne,ge,Ee,te[we+8],7,1770035416),Ee=Ne(Ee,re,ne,ge,te[we+9],12,-1958414417),ge=Ne(ge,Ee,re,ne,te[we+10],17,-42063),ne=Ne(ne,ge,Ee,re,te[we+11],22,-1990404162),re=Ne(re,ne,ge,Ee,te[we+12],7,1804603682),Ee=Ne(Ee,re,ne,ge,te[we+13],12,-40341101),ge=Ne(ge,Ee,re,ne,te[we+14],17,-1502002290),ne=Ne(ne,ge,Ee,re,te[we+15],22,1236535329),re=ze(re,ne,ge,Ee,te[we+1],5,-165796510),Ee=ze(Ee,re,ne,ge,te[we+6],9,-1069501632),ge=ze(ge,Ee,re,ne,te[we+11],14,643717713),ne=ze(ne,ge,Ee,re,te[we+0],20,-373897302),re=ze(re,ne,ge,Ee,te[we+5],5,-701558691),Ee=ze(Ee,re,ne,ge,te[we+10],9,38016083),ge=ze(ge,Ee,re,ne,te[we+15],14,-660478335),ne=ze(ne,ge,Ee,re,te[we+4],20,-405537848),re=ze(re,ne,ge,Ee,te[we+9],5,568446438),Ee=ze(Ee,re,ne,ge,te[we+14],9,-1019803690),ge=ze(ge,Ee,re,ne,te[we+3],14,-187363961),ne=ze(ne,ge,Ee,re,te[we+8],20,1163531501),re=ze(re,ne,ge,Ee,te[we+13],5,-1444681467),Ee=ze(Ee,re,ne,ge,te[we+2],9,-51403784),ge=ze(ge,Ee,re,ne,te[we+7],14,1735328473),ne=ze(ne,ge,Ee,re,te[we+12],20,-1926607734),re=Pe(re,ne,ge,Ee,te[we+5],4,-378558),Ee=Pe(Ee,re,ne,ge,te[we+8],11,-2022574463),ge=Pe(ge,Ee,re,ne,te[we+11],16,1839030562),ne=Pe(ne,ge,Ee,re,te[we+14],23,-35309556),re=Pe(re,ne,ge,Ee,te[we+1],4,-1530992060),Ee=Pe(Ee,re,ne,ge,te[we+4],11,1272893353),ge=Pe(ge,Ee,re,ne,te[we+7],16,-155497632),ne=Pe(ne,ge,Ee,re,te[we+10],23,-1094730640),re=Pe(re,ne,ge,Ee,te[we+13],4,681279174),Ee=Pe(Ee,re,ne,ge,te[we+0],11,-358537222),ge=Pe(ge,Ee,re,ne,te[we+3],16,-722521979),ne=Pe(ne,ge,Ee,re,te[we+6],23,76029189),re=Pe(re,ne,ge,Ee,te[we+9],4,-640364487),Ee=Pe(Ee,re,ne,ge,te[we+12],11,-421815835),ge=Pe(ge,Ee,re,ne,te[we+15],16,530742520),ne=Pe(ne,ge,Ee,re,te[we+2],23,-995338651),re=He(re,ne,ge,Ee,te[we+0],6,-198630844),Ee=He(Ee,re,ne,ge,te[we+7],10,1126891415),ge=He(ge,Ee,re,ne,te[we+14],15,-1416354905),ne=He(ne,ge,Ee,re,te[we+5],21,-57434055),re=He(re,ne,ge,Ee,te[we+12],6,1700485571),Ee=He(Ee,re,ne,ge,te[we+3],10,-1894986606),ge=He(ge,Ee,re,ne,te[we+10],15,-1051523),ne=He(ne,ge,Ee,re,te[we+1],21,-2054922799),re=He(re,ne,ge,Ee,te[we+8],6,1873313359),Ee=He(Ee,re,ne,ge,te[we+15],10,-30611744),ge=He(ge,Ee,re,ne,te[we+6],15,-1560198380),ne=He(ne,ge,Ee,re,te[we+13],21,1309151649),re=He(re,ne,ge,Ee,te[we+4],6,-145523070),Ee=He(Ee,re,ne,ge,te[we+11],10,-1120210379),ge=He(ge,Ee,re,ne,te[we+2],15,718787259),ne=He(ne,ge,Ee,re,te[we+9],21,-343485551),re=re+Ge>>>0,ne=ne+it>>>0,ge=ge+ut>>>0,Ee=Ee+vt>>>0}return M.endian([re,ne,ge,Ee])};ye._ff=function(xe,be,te,le,re,ne,ge){var Ee=xe+(be&te|~be&le)+(re>>>0)+ge;return(Ee<<ne|Ee>>>32-ne)+be},ye._gg=function(xe,be,te,le,re,ne,ge){var Ee=xe+(be&le|te&~le)+(re>>>0)+ge;return(Ee<<ne|Ee>>>32-ne)+be},ye._hh=function(xe,be,te,le,re,ne,ge){var Ee=xe+(be^te^le)+(re>>>0)+ge;return(Ee<<ne|Ee>>>32-ne)+be},ye._ii=function(xe,be,te,le,re,ne,ge){var Ee=xe+(te^(be|~le))+(re>>>0)+ge;return(Ee<<ne|Ee>>>32-ne)+be},ye._blocksize=16,ye._digestsize=16,W.exports=function(xe,be){if(xe==null)throw new Error("Illegal argument "+xe);var te=M.wordsToBytes(ye(xe,be));return be&&be.asBytes?te:be&&be.asString?J.bytesToString(te):M.bytesToHex(te)}})()},"./node_modules/regenerator-runtime/runtime.js":function(W,B,S){var M=function(Z){var X=Object.prototype,J=X.hasOwnProperty,ye,xe=typeof Symbol=="function"?Symbol:{},be=xe.iterator||"@@iterator",te=xe.asyncIterator||"@@asyncIterator",le=xe.toStringTag||"@@toStringTag";function re(F,R,_e){return Object.defineProperty(F,R,{value:_e,enumerable:!0,configurable:!0,writable:!0}),F[R]}try{re({},"")}catch{re=function(R,_e,We){return R[_e]=We}}function ne(F,R,_e,We){var De=R&&R.prototype instanceof He?R:He,lt=Object.create(De.prototype),ae=new an(We||[]);return lt._invoke=Vt(F,_e,ae),lt}Z.wrap=ne;function ge(F,R,_e){try{return{type:"normal",arg:F.call(R,_e)}}catch(We){return{type:"throw",arg:We}}}var Ee="suspendedStart",we="suspendedYield",Ne="executing",ze="completed",Pe={};function He(){}function Ge(){}function it(){}var ut={};ut[be]=function(){return this};var vt=Object.getPrototypeOf,At=vt&&vt(vt(vn([])));At&&At!==X&&J.call(At,be)&&(ut=At);var ht=it.prototype=He.prototype=Object.create(ut);Ge.prototype=ht.constructor=it,it.constructor=Ge,Ge.displayName=re(it,le,"GeneratorFunction");function bt(F){["next","throw","return"].forEach(function(R){re(F,R,function(_e){return this._invoke(R,_e)})})}Z.isGeneratorFunction=function(F){var R=typeof F=="function"&&F.constructor;return R?R===Ge||(R.displayName||R.name)==="GeneratorFunction":!1},Z.mark=function(F){return Object.setPrototypeOf?Object.setPrototypeOf(F,it):(F.__proto__=it,re(F,le,"GeneratorFunction")),F.prototype=Object.create(ht),F},Z.awrap=function(F){return{__await:F}};function Ye(F,R){function _e(lt,ae,L,D){var ue=ge(F[lt],F,ae);if(ue.type==="throw")D(ue.arg);else{var Oe=ue.arg,qe=Oe.value;return qe&&typeof qe=="object"&&J.call(qe,"__await")?R.resolve(qe.__await).then(function(st){_e("next",st,L,D)},function(st){_e("throw",st,L,D)}):R.resolve(qe).then(function(st){Oe.value=st,L(Oe)},function(st){return _e("throw",st,L,D)})}}var We;function De(lt,ae){function L(){return new R(function(D,ue){_e(lt,ae,D,ue)})}return We=We?We.then(L,L):L()}this._invoke=De}bt(Ye.prototype),Ye.prototype[te]=function(){return this},Z.AsyncIterator=Ye,Z.async=function(F,R,_e,We,De){De===void 0&&(De=Promise);var lt=new Ye(ne(F,R,_e,We),De);return Z.isGeneratorFunction(R)?lt:lt.next().then(function(ae){return ae.done?ae.value:lt.next()})};function Vt(F,R,_e){var We=Ee;return function(lt,ae){if(We===Ne)throw new Error("Generator is already running");if(We===ze){if(lt==="throw")throw ae;return Se()}for(_e.method=lt,_e.arg=ae;;){var L=_e.delegate;if(L){var D=un(L,_e);if(D){if(D===Pe)continue;return D}}if(_e.method==="next")_e.sent=_e._sent=_e.arg;else if(_e.method==="throw"){if(We===Ee)throw We=ze,_e.arg;_e.dispatchException(_e.arg)}else _e.method==="return"&&_e.abrupt("return",_e.arg);We=Ne;var ue=ge(F,R,_e);if(ue.type==="normal"){if(We=_e.done?ze:we,ue.arg===Pe)continue;return{value:ue.arg,done:_e.done}}else ue.type==="throw"&&(We=ze,_e.method="throw",_e.arg=ue.arg)}}}function un(F,R){var _e=F.iterator[R.method];if(_e===ye){if(R.delegate=null,R.method==="throw"){if(F.iterator.return&&(R.method="return",R.arg=ye,un(F,R),R.method==="throw"))return Pe;R.method="throw",R.arg=new TypeError("The iterator does not provide a 'throw' method")}return Pe}var We=ge(_e,F.iterator,R.arg);if(We.type==="throw")return R.method="throw",R.arg=We.arg,R.delegate=null,Pe;var De=We.arg;if(!De)return R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,Pe;if(De.done)R[F.resultName]=De.value,R.next=F.nextLoc,R.method!=="return"&&(R.method="next",R.arg=ye);else return De;return R.delegate=null,Pe}bt(ht),re(ht,le,"Generator"),ht[be]=function(){return this},ht.toString=function(){return"[object Generator]"};function Xt(F){var R={tryLoc:F[0]};1 in F&&(R.catchLoc=F[1]),2 in F&&(R.finallyLoc=F[2],R.afterLoc=F[3]),this.tryEntries.push(R)}function Gt(F){var R=F.completion||{};R.type="normal",delete R.arg,F.completion=R}function an(F){this.tryEntries=[{tryLoc:"root"}],F.forEach(Xt,this),this.reset(!0)}Z.keys=function(F){var R=[];for(var _e in F)R.push(_e);return R.reverse(),function We(){for(;R.length;){var De=R.pop();if(De in F)return We.value=De,We.done=!1,We}return We.done=!0,We}};function vn(F){if(F){var R=F[be];if(R)return R.call(F);if(typeof F.next=="function")return F;if(!isNaN(F.length)){var _e=-1,We=function De(){for(;++_e<F.length;)if(J.call(F,_e))return De.value=F[_e],De.done=!1,De;return De.value=ye,De.done=!0,De};return We.next=We}}return{next:Se}}Z.values=vn;function Se(){return{value:ye,done:!0}}return an.prototype={constructor:an,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=ye,this.done=!1,this.delegate=null,this.method="next",this.arg=ye,this.tryEntries.forEach(Gt),!F)for(var R in this)R.charAt(0)==="t"&&J.call(this,R)&&!isNaN(+R.slice(1))&&(this[R]=ye)},stop:function(){this.done=!0;var F=this.tryEntries[0],R=F.completion;if(R.type==="throw")throw R.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var R=this;function _e(D,ue){return lt.type="throw",lt.arg=F,R.next=D,ue&&(R.method="next",R.arg=ye),!!ue}for(var We=this.tryEntries.length-1;We>=0;--We){var De=this.tryEntries[We],lt=De.completion;if(De.tryLoc==="root")return _e("end");if(De.tryLoc<=this.prev){var ae=J.call(De,"catchLoc"),L=J.call(De,"finallyLoc");if(ae&&L){if(this.prev<De.catchLoc)return _e(De.catchLoc,!0);if(this.prev<De.finallyLoc)return _e(De.finallyLoc)}else if(ae){if(this.prev<De.catchLoc)return _e(De.catchLoc,!0)}else if(L){if(this.prev<De.finallyLoc)return _e(De.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(F,R){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var We=this.tryEntries[_e];if(We.tryLoc<=this.prev&&J.call(We,"finallyLoc")&&this.prev<We.finallyLoc){var De=We;break}}De&&(F==="break"||F==="continue")&&De.tryLoc<=R&&R<=De.finallyLoc&&(De=null);var lt=De?De.completion:{};return lt.type=F,lt.arg=R,De?(this.method="next",this.next=De.finallyLoc,Pe):this.complete(lt)},complete:function(F,R){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&R&&(this.next=R),Pe},finish:function(F){for(var R=this.tryEntries.length-1;R>=0;--R){var _e=this.tryEntries[R];if(_e.finallyLoc===F)return this.complete(_e.completion,_e.afterLoc),Gt(_e),Pe}},catch:function(F){for(var R=this.tryEntries.length-1;R>=0;--R){var _e=this.tryEntries[R];if(_e.tryLoc===F){var We=_e.completion;if(We.type==="throw"){var De=We.arg;Gt(_e)}return De}}throw new Error("illegal catch attempt")},delegateYield:function(F,R,_e){return this.delegate={iterator:vn(F),resultName:R,nextLoc:_e},this.method==="next"&&(this.arg=ye),Pe}},Z}(W.exports);try{regeneratorRuntime=M}catch{Function("r","regeneratorRuntime = r")(M)}},"./src/api.js":function(W,B,S){S.r(B),S.d(B,"setup",function(){return Ne}),S.d(B,"setupCache",function(){return we}),S("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js");var M=S("axios"),Z=S.n(M),X=S("./src/request.js"),J=S("./src/cache.js");S.d(B,"serializeQuery",function(){return J.serializeQuery});var ye=S("./src/config.js"),xe=S("./src/utilities.js");function be(ze,Pe){if(ze==null)return{};var He=te(ze,Pe),Ge,it;if(Object.getOwnPropertySymbols){var ut=Object.getOwnPropertySymbols(ze);for(it=0;it<ut.length;it++)Ge=ut[it],!(Pe.indexOf(Ge)>=0)&&Object.prototype.propertyIsEnumerable.call(ze,Ge)&&(He[Ge]=ze[Ge])}return He}function te(ze,Pe){if(ze==null)return{};var He={},Ge=Object.keys(ze),it,ut;for(ut=0;ut<Ge.length;ut++)it=Ge[ut],!(Pe.indexOf(it)>=0)&&(He[it]=ze[it]);return He}function le(ze,Pe){var He=Object.keys(ze);if(Object.getOwnPropertySymbols){var Ge=Object.getOwnPropertySymbols(ze);Pe&&(Ge=Ge.filter(function(it){return Object.getOwnPropertyDescriptor(ze,it).enumerable})),He.push.apply(He,Ge)}return He}function re(ze){for(var Pe=1;Pe<arguments.length;Pe++){var He=arguments[Pe]!=null?arguments[Pe]:{};Pe%2?le(Object(He),!0).forEach(function(Ge){ne(ze,Ge,He[Ge])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ze,Object.getOwnPropertyDescriptors(He)):le(Object(He)).forEach(function(Ge){Object.defineProperty(ze,Ge,Object.getOwnPropertyDescriptor(He,Ge))})}return ze}function ne(ze,Pe,He){return Pe in ze?Object.defineProperty(ze,Pe,{value:He,enumerable:!0,configurable:!0,writable:!0}):ze[Pe]=He,ze}function ge(ze,Pe,He,Ge,it,ut,vt){try{var At=ze[ut](vt),ht=At.value}catch(bt){He(bt);return}At.done?Pe(ht):Promise.resolve(ht).then(Ge,it)}function Ee(ze){return function(){var Pe=this,He=arguments;return new Promise(function(Ge,it){var ut=ze.apply(Pe,He);function vt(ht){ge(ut,Ge,it,vt,At,"next",ht)}function At(ht){ge(ut,Ge,it,vt,At,"throw",ht)}vt(void 0)})}}function we(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ze=Object(ye.makeConfig)(ze);function Pe(Ge){return He.apply(this,arguments)}function He(){return He=Ee(regeneratorRuntime.mark(function Ge(it){var ut,vt,At,ht,bt;return regeneratorRuntime.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return ut=Object(ye.mergeRequestConfig)(ze,it),Vt.next=3,Object(X.default)(ut,it);case 3:if(vt=Vt.sent,At=vt.next,Object(xe.isFunction)(At)){Vt.next=7;break}return Vt.abrupt("return",At);case 7:return Vt.prev=7,Vt.next=10,ut.adapter(it);case 10:vt=Vt.sent,Vt.next=16;break;case 13:Vt.prev=13,Vt.t0=Vt.catch(7),ht=Vt.t0;case 16:if(!ht){Vt.next=31;break}if(bt=Object(xe.isFunction)(ut.readOnError)?ut.readOnError(ht,it):ut.readOnError,!bt){Vt.next=30;break}return Vt.prev=19,ut.acceptStale=!0,Vt.next=23,Object(X.default)(ut,it);case 23:return vt=Vt.sent,vt.next.request.stale=!0,Vt.abrupt("return",vt.next);case 28:Vt.prev=28,Vt.t1=Vt.catch(19);case 30:throw ht;case 31:return Vt.abrupt("return",At(vt));case 32:case"end":return Vt.stop()}},Ge,null,[[7,13],[19,28]])})),He.apply(this,arguments)}return{adapter:Pe,config:ze,store:ze.store}}function Ne(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=re(re(re({},ye.defaults.axios),ze),{},{cache:re(re({},ye.defaults.axios.cache),ze.cache)}),He=we(Pe.cache);Pe.cache;var Ge=be(Pe,["cache"]),it=Z.a.create(re(re({},Ge),{},{adapter:He.adapter}));return it.cache=He.store,it}B.default={setup:Ne,setupCache:we,serializeQuery:J.serializeQuery}},"./src/cache.js":function(W,B,S){S.r(B),S.d(B,"read",function(){return le}),S.d(B,"write",function(){return be}),S.d(B,"key",function(){return ne}),S.d(B,"invalidate",function(){return we}),S.d(B,"serializeQuery",function(){return Ne}),S("./node_modules/core-js/modules/es7.array.includes.js"),S("./node_modules/core-js/modules/es6.string.includes.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var M=S("./src/utilities.js"),Z=S("./node_modules/md5/md5.js"),X=S.n(Z),J=S("./src/serialize.js");function ye(ze,Pe,He,Ge,it,ut,vt){try{var At=ze[ut](vt),ht=At.value}catch(bt){He(bt);return}At.done?Pe(ht):Promise.resolve(ht).then(Ge,it)}function xe(ze){return function(){var Pe=this,He=arguments;return new Promise(function(Ge,it){var ut=ze.apply(Pe,He);function vt(ht){ye(ut,Ge,it,vt,At,"next",ht)}function At(ht){ye(ut,Ge,it,vt,At,"throw",ht)}vt(void 0)})}}function be(ze,Pe,He){return te.apply(this,arguments)}function te(){return te=xe(regeneratorRuntime.mark(function ze(Pe,He,Ge){var it;return regeneratorRuntime.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.prev=0,it={expires:Pe.expires,data:Object(J.default)(Pe,He,Ge)},vt.next=4,Pe.store.setItem(Pe.uuid,it);case 4:vt.next=19;break;case 6:if(vt.prev=6,vt.t0=vt.catch(0),Pe.debug("Could not store response",vt.t0),!Pe.clearOnError){vt.next=18;break}return vt.prev=10,vt.next=13,Pe.store.clear();case 13:vt.next=18;break;case 15:vt.prev=15,vt.t1=vt.catch(10),Pe.debug("Could not clear store",vt.t1);case 18:return vt.abrupt("return",!1);case 19:return vt.abrupt("return",!0);case 20:case"end":return vt.stop()}},ze,null,[[0,6],[10,15]])})),te.apply(this,arguments)}function le(ze,Pe){return re.apply(this,arguments)}function re(){return re=xe(regeneratorRuntime.mark(function ze(Pe,He){var Ge,it,ut,vt,At,ht,bt,Ye;return regeneratorRuntime.wrap(function(un){for(;;)switch(un.prev=un.next){case 0:return Ge=Pe.uuid,it=Pe.ignoreCache,un.next=3,Pe.store.getItem(Ge);case 3:if(ut=un.sent,!(it||!ut||!ut.data)){un.next=10;break}throw Pe.debug("cache-miss",He.url),vt=new Error,vt.reason="cache-miss",vt.message="Entry not found from cache",vt;case 10:if(At=ut.expires,ht=ut.data,bt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!bt&&!Pe.acceptStale&&At!==0&&At<Date.now())){un.next=18;break}throw Pe.debug("cache-stale",He.url),Ye=new Error,Ye.reason="cache-stale",Ye.message="Entry is stale",Ye;case 18:return Pe.debug(Pe.acceptStale?"cache-hit-stale":"cache-hit",He.url),un.abrupt("return",ht);case 20:case"end":return un.stop()}},ze)})),re.apply(this,arguments)}function ne(ze){if(Object(M.isFunction)(ze.key))return ze.key;var Pe;return Object(M.isString)(ze.key)?Pe=function(Ge){var it="".concat(Ge.baseURL?Ge.baseURL:"").concat(Ge.url),ut="".concat(ze.key,"/").concat(it).concat(Ne(Ge));return Ge.data?ut+X()(Ge.data):ut}:Pe=function(Ge){var it="".concat(Ge.baseURL?Ge.baseURL:"").concat(Ge.url),ut=it+Ne(Ge);return Ge.data?ut+X()(Ge.data):ut},Pe}function ge(ze,Pe){return Ee.apply(this,arguments)}function Ee(){return Ee=xe(regeneratorRuntime.mark(function ze(Pe,He){var Ge;return regeneratorRuntime.wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:if(Ge=He.method.toLowerCase(),!Pe.exclude.methods.includes(Ge)){ut.next=4;break}return ut.next=4,Pe.store.removeItem(Pe.uuid);case 4:case"end":return ut.stop()}},ze)})),Ee.apply(this,arguments)}function we(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(M.isFunction)(ze.invalidate)?ze.invalidate:ge}function Ne(ze){if(!ze.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(ze.params);var Pe=ze.params,He=ze.params instanceof URLSearchParams;return He||(Pe=new URLSearchParams,Object.keys(ze.params).forEach(function(Ge){return Pe.append(Ge,ze.params[Ge])})),"?".concat(Pe.toString())}B.default={read:le,write:be,key:ne,invalidate:we,serializeQuery:Ne}},"./src/config.js":function(W,B,S){S.r(B),S.d(B,"defaults",function(){return re}),S.d(B,"makeConfig",function(){return ge}),S.d(B,"mergeRequestConfig",function(){return Ee}),S("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var M=S("axios"),Z=S.n(M),X=S("./src/memory.js"),J=S("./src/cache.js");function ye(we,Ne){var ze=Object.keys(we);if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(we);Ne&&(Pe=Pe.filter(function(He){return Object.getOwnPropertyDescriptor(we,He).enumerable})),ze.push.apply(ze,Pe)}return ze}function xe(we){for(var Ne=1;Ne<arguments.length;Ne++){var ze=arguments[Ne]!=null?arguments[Ne]:{};Ne%2?ye(Object(ze),!0).forEach(function(Pe){be(we,Pe,ze[Pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(we,Object.getOwnPropertyDescriptors(ze)):ye(Object(ze)).forEach(function(Pe){Object.defineProperty(we,Pe,Object.getOwnPropertyDescriptor(ze,Pe))})}return we}function be(we,Ne,ze){return Ne in we?Object.defineProperty(we,Ne,{value:ze,enumerable:!0,configurable:!0,writable:!0}):we[Ne]=ze,we}var te=function(){},le=function(){for(var Ne,ze=arguments.length,Pe=new Array(ze),He=0;He<ze;He++)Pe[He]=arguments[He];return(Ne=console).log.apply(Ne,["[axios-cache-adapter]"].concat(Pe))},re={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:Z.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},ne=["limit","store","adapter","uuid","acceptStale"],ge=function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=xe(xe(xe({},re.cache),Ne),{},{exclude:xe(xe({},re.cache.exclude),Ne.exclude)});return ze.key=Object(J.key)(ze),ze.invalidate=Object(J.invalidate)(ze),ze.debug!==!1?ze.debug=typeof ze.debug=="function"?ze.debug:le:ze.debug=te,ze.store||(ze.store=new X.default),ze.debug("Global cache config",ze),ze},Ee=function(Ne,ze){var Pe=ze.cache||{};Pe&&ne.forEach(function(Ge){return Pe[Ge]?delete Pe[Ge]:void 0});var He=xe(xe(xe({},Ne),Pe),{},{exclude:xe(xe({},Ne.exclude),Pe.exclude)});return He.debug===!0&&(He.debug=le),Pe.key&&(He.key=Object(J.key)(Pe)),He.uuid=He.key(ze),Ne.debug("Request config for ".concat(ze.url),He),He};B.default={defaults:re,makeConfig:ge,mergeRequestConfig:Ee}},"./src/exclude.js":function(W,B,S){S.r(B),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/core-js/modules/es7.array.includes.js"),S("./node_modules/core-js/modules/es6.string.includes.js");var M=S("./src/utilities.js");function Z(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=arguments.length>1?arguments[1]:void 0,ye=X.exclude,xe=ye===void 0?{}:ye,be=X.debug,te=J.method.toLowerCase();if(te==="head"||xe.methods.includes(te))return be("Excluding request by HTTP method ".concat(J.url)),!0;if(typeof xe.filter=="function"&&xe.filter(J))return be("Excluding request by filter ".concat(J.url)),!0;var le=/\?.*$/.test(J.url)||Object(M.isObject)(J.params)&&Object.keys(J.params).length!==0||typeof URLSearchParams<"u"&&J.params instanceof URLSearchParams;if(xe.query&&le)return be("Excluding request by query ".concat(J.url)),!0;var re=xe.paths||[],ne=re.some(function(ge){return J.url.match(ge)});return ne?(be("Excluding request by url match ".concat(J.url)),!0):!1}B.default=Z},"./src/index.node.js":function(W,B,S){S.r(B);var M=S("./src/api.js");S.d(B,"setup",function(){return M.setup}),S.d(B,"setupCache",function(){return M.setupCache}),S.d(B,"serializeQuery",function(){return M.serializeQuery});var Z=S("./src/redis.js");S.d(B,"RedisStore",function(){return Z.default});var X=S("./src/redis-default.js");S.d(B,"RedisDefaultStore",function(){return X.default}),B.default={setup:M.setup,setupCache:M.setupCache,serializeQuery:M.serializeQuery,RedisStore:Z.default,RedisDefaultStore:X.default}},"./src/limit.js":function(W,B,S){S.r(B),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function M(ye,xe,be,te,le,re,ne){try{var ge=ye[re](ne),Ee=ge.value}catch(we){be(we);return}ge.done?xe(Ee):Promise.resolve(Ee).then(te,le)}function Z(ye){return function(){var xe=this,be=arguments;return new Promise(function(te,le){var re=ye.apply(xe,be);function ne(Ee){M(re,te,le,ne,ge,"next",Ee)}function ge(Ee){M(re,te,le,ne,ge,"throw",Ee)}ne(void 0)})}}function X(ye){return J.apply(this,arguments)}function J(){return J=Z(regeneratorRuntime.mark(function ye(xe){var be,te;return regeneratorRuntime.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,xe.store.length();case 2:if(be=re.sent,!(be<xe.limit)){re.next=5;break}return re.abrupt("return");case 5:return xe.debug("Current store size: ".concat(be)),re.next=8,xe.store.iterate(function(ne,ge){te||(te={value:ne,key:ge}),ne.expires<te.value.expires&&(te={value:ne,key:ge})});case 8:if(!te){re.next=12;break}return xe.debug("Removing item: ".concat(te.key)),re.next=12,xe.store.removeItem(te.key);case 12:case"end":return re.stop()}},ye)})),J.apply(this,arguments)}B.default=X},"./src/memory.js":function(W,B,S){S.r(B),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js");var M=S("./src/utilities.js");function Z(te,le,re,ne,ge,Ee,we){try{var Ne=te[Ee](we),ze=Ne.value}catch(Pe){re(Pe);return}Ne.done?le(ze):Promise.resolve(ze).then(ne,ge)}function X(te){return function(){var le=this,re=arguments;return new Promise(function(ne,ge){var Ee=te.apply(le,re);function we(ze){Z(Ee,ne,ge,we,Ne,"next",ze)}function Ne(ze){Z(Ee,ne,ge,we,Ne,"throw",ze)}we(void 0)})}}function J(te,le){if(!(te instanceof le))throw new TypeError("Cannot call a class as a function")}function ye(te,le){for(var re=0;re<le.length;re++){var ne=le[re];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(te,ne.key,ne)}}function xe(te,le,re){return le&&ye(te.prototype,le),re&&ye(te,re),te}var be=function(){function te(){J(this,te),this.store={}}return xe(te,[{key:"getItem",value:function(){var le=X(regeneratorRuntime.mark(function ne(ge){var Ee;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ee=this.store[ge]||null,Ne.abrupt("return",JSON.parse(Ee));case 2:case"end":return Ne.stop()}},ne,this)}));function re(ne){return le.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var le=X(regeneratorRuntime.mark(function ne(ge,Ee){return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return this.store[ge]=JSON.stringify(Ee),Ne.abrupt("return",Ee);case 2:case"end":return Ne.stop()}},ne,this)}));function re(ne,ge){return le.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var le=X(regeneratorRuntime.mark(function ne(ge){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:delete this.store[ge];case 1:case"end":return we.stop()}},ne,this)}));function re(ne){return le.apply(this,arguments)}return re}()},{key:"clear",value:function(){var le=X(regeneratorRuntime.mark(function ne(){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:this.store={};case 1:case"end":return Ee.stop()}},ne,this)}));function re(){return le.apply(this,arguments)}return re}()},{key:"length",value:function(){var le=X(regeneratorRuntime.mark(function ne(){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.abrupt("return",Object.keys(this.store).length);case 1:case"end":return Ee.stop()}},ne,this)}));function re(){return le.apply(this,arguments)}return re}()},{key:"iterate",value:function(re){return Promise.all(Object(M.mapObject)(this.store,re))}}]),te}();B.default=be},"./src/redis-default.js":function(W,B,S){S.r(B),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.function.bind.js"),S("./node_modules/core-js/modules/es6.function.name.js");var M=S("util");function Z(te,le,re,ne,ge,Ee,we){try{var Ne=te[Ee](we),ze=Ne.value}catch(Pe){re(Pe);return}Ne.done?le(ze):Promise.resolve(ze).then(ne,ge)}function X(te){return function(){var le=this,re=arguments;return new Promise(function(ne,ge){var Ee=te.apply(le,re);function we(ze){Z(Ee,ne,ge,we,Ne,"next",ze)}function Ne(ze){Z(Ee,ne,ge,we,Ne,"throw",ze)}we(void 0)})}}function J(te,le){if(!(te instanceof le))throw new TypeError("Cannot call a class as a function")}function ye(te,le){for(var re=0;re<le.length;re++){var ne=le[re];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(te,ne.key,ne)}}function xe(te,le,re){return le&&ye(te.prototype,le),re&&ye(te,re),te}var be=function(){function te(le){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};J(this,te);var ne=new TypeError("First parameter must be a valid RedisClient instance.");try{if(le.constructor.name!=="RedisClient")throw ne}catch{throw ne}this.client=le,this.prefix=re.prefix||"axios-cache",this.maxScanCount=re.maxScanCount||1e3,this.getAsync=Object(M.promisify)(le.get).bind(le),this.psetexAsync=Object(M.promisify)(le.psetex).bind(le),this.delAsync=Object(M.promisify)(le.del).bind(le),this.scanAsync=Object(M.promisify)(le.scan).bind(le)}return xe(te,[{key:"calculateTTL",value:function(re){var ne=Date.now();return re.expires&&re.expires>ne?re.expires-ne:-1}},{key:"transformKey",value:function(re){return this.prefix+"_"+re}},{key:"getItem",value:function(){var le=X(regeneratorRuntime.mark(function ne(ge){var Ee;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.getAsync(this.transformKey(ge));case 2:if(Ne.t0=Ne.sent,Ne.t0){Ne.next=5;break}Ne.t0=null;case 5:return Ee=Ne.t0,Ne.abrupt("return",JSON.parse(Ee));case 7:case"end":return Ne.stop()}},ne,this)}));function re(ne){return le.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var le=X(regeneratorRuntime.mark(function ne(ge,Ee){var we,Ne;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(we=this.transformKey(ge),Ne=this.calculateTTL(Ee),!(Ne>0)){Pe.next=5;break}return Pe.next=5,this.psetexAsync(we,Ne,JSON.stringify(Ee));case 5:return Pe.abrupt("return",Ee);case 6:case"end":return Pe.stop()}},ne,this)}));function re(ne,ge){return le.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var le=X(regeneratorRuntime.mark(function ne(ge){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,this.delAsync(this.transformKey(ge));case 2:case"end":return we.stop()}},ne,this)}));function re(ne){return le.apply(this,arguments)}return re}()},{key:"scan",value:function(){var le=X(regeneratorRuntime.mark(function ne(ge){var Ee,we;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:Ee="0";case 1:return ze.next=3,this.scanAsync(Ee,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return we=ze.sent,Ee=we[0],ze.next=7,ge(we[1]);case 7:if(Ee!=="0"){ze.next=1;break}case 8:case"end":return ze.stop()}},ne,this)}));function re(ne){return le.apply(this,arguments)}return re}()},{key:"clear",value:function(){var le=X(regeneratorRuntime.mark(function ne(){var ge=this;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,this.scan(function(Ne){return ge.delAsync(Ne)});case 2:case"end":return we.stop()}},ne,this)}));function re(){return le.apply(this,arguments)}return re}()},{key:"length",value:function(){var le=X(regeneratorRuntime.mark(function ne(){var ge;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return ge=0,we.next=3,this.scan(function(Ne){ge+=Ne.length});case 3:return we.abrupt("return",ge);case 4:case"end":return we.stop()}},ne,this)}));function re(){return le.apply(this,arguments)}return re}()},{key:"iterate",value:function(){var le=X(regeneratorRuntime.mark(function ne(ge){var Ee=this,we,Ne;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Ne=function(){return Ne=X(regeneratorRuntime.mark(function Ge(it){var ut,vt;return regeneratorRuntime.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,this.getAsync(it);case 2:if(ht.t0=ht.sent,ht.t0){ht.next=5;break}ht.t0=null;case 5:return ut=ht.t0,vt=JSON.parse(ut),ht.next=9,ge(vt,it);case 9:return ht.abrupt("return",ht.sent);case 10:case"end":return ht.stop()}},Ge,this)})),Ne.apply(this,arguments)},we=function(Ge){return Ne.apply(this,arguments)},Pe.next=4,this.scan(function(He){return Promise.all(He.map(we.bind(Ee)))});case 4:return Pe.abrupt("return",Promise.resolve([]));case 5:case"end":return Pe.stop()}},ne,this)}));function re(ne){return le.apply(this,arguments)}return re}()}]),te}();B.default=be},"./src/redis.js":function(W,B,S){S.r(B),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.function.bind.js"),S("./node_modules/core-js/modules/es6.function.name.js");var M=S("util"),Z=S("./src/utilities.js");function X(le,re,ne,ge,Ee,we,Ne){try{var ze=le[we](Ne),Pe=ze.value}catch(He){ne(He);return}ze.done?re(Pe):Promise.resolve(Pe).then(ge,Ee)}function J(le){return function(){var re=this,ne=arguments;return new Promise(function(ge,Ee){var we=le.apply(re,ne);function Ne(Pe){X(we,ge,Ee,Ne,ze,"next",Pe)}function ze(Pe){X(we,ge,Ee,Ne,ze,"throw",Pe)}Ne(void 0)})}}function ye(le,re){if(!(le instanceof re))throw new TypeError("Cannot call a class as a function")}function xe(le,re){for(var ne=0;ne<re.length;ne++){var ge=re[ne];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(le,ge.key,ge)}}function be(le,re,ne){return re&&xe(le.prototype,re),ne&&xe(le,ne),le}var te=function(){function le(re){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ye(this,le);var ge=new TypeError("First parameter must be a valid RedisClient instance.");try{if(re.constructor.name!=="RedisClient")throw ge}catch{throw ge}this.client=re,this.HASH_KEY=ne,this.hgetAsync=Object(M.promisify)(re.hget).bind(re),this.hsetAsync=Object(M.promisify)(re.hset).bind(re),this.hdelAsync=Object(M.promisify)(re.hdel).bind(re),this.delAsync=Object(M.promisify)(re.del).bind(re),this.hlenAsync=Object(M.promisify)(re.hlen).bind(re),this.hgetallAsync=Object(M.promisify)(re.hgetall).bind(re)}return be(le,[{key:"getItem",value:function(){var re=J(regeneratorRuntime.mark(function ge(Ee){var we;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.next=2,this.hgetAsync(this.HASH_KEY,Ee);case 2:if(ze.t0=ze.sent,ze.t0){ze.next=5;break}ze.t0=null;case 5:return we=ze.t0,ze.abrupt("return",JSON.parse(we));case 7:case"end":return ze.stop()}},ge,this)}));function ne(ge){return re.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var re=J(regeneratorRuntime.mark(function ge(Ee,we){return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.next=2,this.hsetAsync(this.HASH_KEY,Ee,JSON.stringify(we));case 2:return ze.abrupt("return",we);case 3:case"end":return ze.stop()}},ge,this)}));function ne(ge,Ee){return re.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var re=J(regeneratorRuntime.mark(function ge(Ee){return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.hdelAsync(this.HASH_KEY,Ee);case 2:case"end":return Ne.stop()}},ge,this)}));function ne(ge){return re.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var re=J(regeneratorRuntime.mark(function ge(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return we.stop()}},ge,this)}));function ne(){return re.apply(this,arguments)}return ne}()},{key:"length",value:function(){var re=J(regeneratorRuntime.mark(function ge(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return we.stop()}},ge,this)}));function ne(){return re.apply(this,arguments)}return ne}()},{key:"iterate",value:function(){var re=J(regeneratorRuntime.mark(function ge(Ee){var we;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return we=ze.sent,ze.abrupt("return",Promise.all(Object(Z.mapObject)(we,Ee)));case 4:case"end":return ze.stop()}},ge,this)}));function ne(ge){return re.apply(this,arguments)}return ne}()}]),le}();B.default=te},"./src/request.js":function(W,B,S){S.r(B),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var M=S("./src/response.js"),Z=S("./src/exclude.js"),X=S("./src/cache.js");function J(te,le,re,ne,ge,Ee,we){try{var Ne=te[Ee](we),ze=Ne.value}catch(Pe){re(Pe);return}Ne.done?le(ze):Promise.resolve(ze).then(ne,ge)}function ye(te){return function(){var le=this,re=arguments;return new Promise(function(ne,ge){var Ee=te.apply(le,re);function we(ze){J(Ee,ne,ge,we,Ne,"next",ze)}function Ne(ze){J(Ee,ne,ge,we,Ne,"throw",ze)}we(void 0)})}}function xe(te,le){return be.apply(this,arguments)}function be(){return be=ye(regeneratorRuntime.mark(function te(le,re){var ne,ge,Ee;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ee=function(){return le.excludeFromCache=!0,{config:le,next:ne}},le.debug("uuid",le.uuid),ne=function(){for(var Pe=arguments.length,He=new Array(Pe),Ge=0;Ge<Pe;Ge++)He[Ge]=arguments[Ge];return M.default.apply(void 0,[le,re].concat(He))},Ne.next=5,le.invalidate(le,re);case 5:if(!Object(Z.default)(le,re)){Ne.next=7;break}return Ne.abrupt("return",Ee());case 7:return Ne.prev=7,Ne.next=10,Object(X.read)(le,re);case 10:return ge=Ne.sent,ge.config=re,ge.request={fromCache:!0},Ne.abrupt("return",{config:le,next:ge});case 16:if(Ne.prev=16,Ne.t0=Ne.catch(7),!(le.clearOnStale&&Ne.t0.reason==="cache-stale")){Ne.next=21;break}return Ne.next=21,le.store.removeItem(le.uuid);case 21:return Ne.abrupt("return",{config:le,next:ne});case 22:case"end":return Ne.stop()}},te,null,[[7,16]])})),be.apply(this,arguments)}B.default=xe},"./src/response.js":function(W,B,S){S.r(B),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var M=S("./src/limit.js"),Z=S("./src/cache.js"),X=S("./node_modules/cache-control-esm/index.js");function J(te,le,re,ne,ge,Ee,we){try{var Ne=te[Ee](we),ze=Ne.value}catch(Pe){re(Pe);return}Ne.done?le(ze):Promise.resolve(ze).then(ne,ge)}function ye(te){return function(){var le=this,re=arguments;return new Promise(function(ne,ge){var Ee=te.apply(le,re);function we(ze){J(Ee,ne,ge,we,Ne,"next",ze)}function Ne(ze){J(Ee,ne,ge,we,Ne,"throw",ze)}we(void 0)})}}function xe(te,le,re){return be.apply(this,arguments)}function be(){return be=ye(regeneratorRuntime.mark(function te(le,re,ne){var ge,Ee,we,Ne,ze;return regeneratorRuntime.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(ge=ne.request,Ee=ge===void 0?{}:ge,we=ne.headers,Ne=we===void 0?{}:we,!(["arraybuffer","blob"].indexOf(Ee.responseType)>-1)){He.next=3;break}return He.abrupt("return",ne);case 3:if(ze={},le.readHeaders&&(Ne["cache-control"]?(ze=Object(X.parse)(Ne["cache-control"]),(ze.noCache||ze.noStore)&&(le.excludeFromCache=!0)):Ne.expires?le.expires=new Date(Ne.expires).getTime():le.expires=new Date().getTime()),le.excludeFromCache){He.next=15;break}if(ze.maxAge||ze.maxAge===0?le.expires=Date.now()+ze.maxAge*1e3:le.readHeaders||(le.expires=le.maxAge===0?Date.now():Date.now()+le.maxAge),!le.limit){He.next=11;break}return le.debug("Detected limit: ".concat(le.limit)),He.next=11,Object(M.default)(le);case 11:return He.next=13,Object(Z.write)(le,re,ne);case 13:He.next=16;break;case 15:ne.request.excludedFromCache=!0;case 16:return He.abrupt("return",ne);case 17:case"end":return He.stop()}},te)})),be.apply(this,arguments)}B.default=xe},"./src/serialize.js":function(W,B,S){S.r(B),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function M(J,ye){if(J==null)return{};var xe=Z(J,ye),be,te;if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(J);for(te=0;te<le.length;te++)be=le[te],!(ye.indexOf(be)>=0)&&Object.prototype.propertyIsEnumerable.call(J,be)&&(xe[be]=J[be])}return xe}function Z(J,ye){if(J==null)return{};var xe={},be=Object.keys(J),te,le;for(le=0;le<be.length;le++)te=be[le],!(ye.indexOf(te)>=0)&&(xe[te]=J[te]);return xe}function X(J,ye,xe){if(xe.data)try{xe.data=JSON.parse(xe.data)}catch(te){J.debug("Could not parse data as JSON",te)}xe.request,xe.config;var be=M(xe,["request","config"]);return be}B.default=X},"./src/utilities.js":function(W,B,S){S.r(B),S.d(B,"isObject",function(){return Z}),S.d(B,"getTag",function(){return X}),S.d(B,"isFunction",function(){return J}),S.d(B,"isString",function(){return ye}),S.d(B,"mapObject",function(){return xe}),S("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function M(be){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(le){return typeof le}:M=function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},M(be)}function Z(be){var te=M(be);return be!=null&&(te==="object"||te==="function")}function X(be){return be===null?be===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(be)}function J(be){if(!Z(be))return!1;var te=X(be);return te==="[object Function]"||te==="[object AsyncFunction]"||te==="[object GeneratorFunction]"||te==="[object Proxy]"}function ye(be){var te=M(be);return te==="string"||te==="object"&&be!=null&&!Array.isArray(be)&&X(be)==="[object String]"}function xe(be,te){return Z(be)?Object.keys(be).map(function(le){return te(be[le],le)}):[]}},axios:function(W,B){W.exports=oe},util:function(W,B){W.exports=I.default}})})});const Q={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},Y=O.setupCache({maxAge:60*60*24*1e3}),pe=w.default.create({adapter:Y.adapter}),G=async(V,N={})=>{const oe={...Q,...N},[W,B]=i.lngLatToGoogle(V,oe.zoomBase),S=oe.tileUrl.replace("{z}",String(oe.zoomBase)).replace("{x}",String(W)).replace("{y}",String(B)),M={code:"",prefecture:"",city:""};let Z;try{const ye=await pe.get(S,{responseType:"arraybuffer"});Z=Buffer.from(ye.data,"binary")}catch(ye){throw new Error(ye)}const X=new y.VectorTile(new b.default(Z));let J=Object.keys(X.layers);return Array.isArray(J)||(J=[J]),J.forEach(ye=>{const xe=X.layers[ye];if(xe&&oe.layer===xe.name)for(let be=0;be<xe.length;be++){const te=xe.feature(be).toGeoJSON(W,B,oe.zoomBase);J.length>1&&(te.properties.vt_layer=ye);const le={type:"FeatureCollection",features:[te]};t.geoContains(le,V)&&(M.code=String(te.id).length===5?String(te.id):`0${String(te.id)}`,M.prefecture=te.properties.prefecture,M.city=te.properties.city)}}),M};e.openReverseGeocoder=G})(OC);const YO={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},JO={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},QO={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"",placeholder:"",adminLevel:4},{key:"addr:city",displayName:"23",placeholder:"",adminLevel:7},{key:"addr:suburb",displayName:"",placeholder:""},{key:"addr:quarter",displayName:"",placeholder:"",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"",placeholder:"1"},{key:"addr:block_number",displayName:"",placeholder:"17"},{key:"addr:housenumber",displayName:"",placeholder:"6",prefix:"-"}]},eF={defaultComment:" ",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},EE={JPN:QO,CHN:YO,DEU:JO,KOR:eF};function XI(e,t,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function tF(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!SE(e[0])||!SE(e[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:e};return XI(a,t,i)}function nF(e,t,i){i===void 0&&(i={});for(var a=0,c=e;a<c.length;a++){var f=c[a];if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<f[f.length-1].length;y++)if(f[f.length-1][y]!==f[0][y])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return XI(l,t,i)}function SE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function qI(e,t,i){if(e!==null)for(var a,c,f,y,l,b,w,I=0,E=0,z,O=e.type,Q=O==="FeatureCollection",Y=O==="Feature",pe=Q?e.features.length:1,G=0;G<pe;G++){w=Q?e.features[G].geometry:Y?e.geometry:e,z=w?w.type==="GeometryCollection":!1,l=z?w.geometries.length:1;for(var V=0;V<l;V++){var N=0,oe=0;if(y=z?w.geometries[V]:w,y!==null){b=y.coordinates;var W=y.type;switch(I=i&&(W==="Polygon"||W==="MultiPolygon")?1:0,W){case null:break;case"Point":if(t(b,E,G,N,oe)===!1)return!1;E++,N++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(t(b[a],E,G,N,oe)===!1)return!1;E++,W==="MultiPoint"&&N++}W==="LineString"&&N++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(c=0;c<b[a].length-I;c++){if(t(b[a][c],E,G,N,oe)===!1)return!1;E++}W==="MultiLineString"&&N++,W==="Polygon"&&oe++}W==="Polygon"&&N++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(oe=0,c=0;c<b[a].length;c++){for(f=0;f<b[a][c].length-I;f++){if(t(b[a][c][f],E,G,N,oe)===!1)return!1;E++}oe++}N++}break;case"GeometryCollection":for(a=0;a<y.geometries.length;a++)if(qI(y.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function rF(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function iF(e){return e.type==="Feature"?e.geometry:e}function oF(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var a=rF(e),c=iF(t),f=c.type,y=t.bbox,l=c.coordinates;if(y&&sF(a,y)===!1)return!1;f==="Polygon"&&(l=[l]);for(var b=!1,w=0;w<l.length&&!b;w++)if(TE(a,l[w][0],i.ignoreBoundary)){for(var I=!1,E=1;E<l[w].length&&!I;)TE(a,l[w][E],!i.ignoreBoundary)&&(I=!0),E++;I||(b=!0)}return b}function TE(e,t,i){var a=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,f=t.length-1;c<t.length;f=c++){var y=t[c][0],l=t[c][1],b=t[f][0],w=t[f][1],I=e[1]*(y-b)+l*(b-e[0])+w*(e[0]-y)===0&&(y-e[0])*(b-e[0])<=0&&(l-e[1])*(w-e[1])<=0;if(I)return!i;var E=l>e[1]!=w>e[1]&&e[0]<(b-y)*(e[1]-l)/(w-l)+y;E&&(a=!a)}return a}function sF(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function aF(e,t){t===void 0&&(t={});var i=0,a=0,c=0;return qI(e,function(f){i+=f[0],a+=f[1],c++},!0),tF([i/c,a/c],t.properties)}const lF=()=>{const[e,t]=wt.useState(!1);return{detectCountry:wt.useCallback(async(a,c)=>{t(!0);const y=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const l of y.features)if(oF([a,c],l.geometry))return console.log("country: ",l.properties),t(!1),l;t(!1)},[]),loadingCountry:e}},I0=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var l;const[c,f]=wt.useState((l=e.properties)==null?void 0:l[t.key]);wt.useEffect(()=>{var b;f((b=e.properties)==null?void 0:b[t.key])},[e]);const y=wt.useCallback(b=>{f(b.currentTarget.value),a&&a(b)},[]);return gt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[gt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),gt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:y}),gt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(b=>{if(parseInt(b.tags.admin_level)===t.adminLevel)return gt.jsx("option",{value:b.tags.name},b.id);if(b.type==="node"&&t.adminLevel===9)return gt.jsx("option",{value:b.tags.name},b.id)})})]})},uF=({feature:e,fields:t})=>e.properties?gt.jsxs(gt.Fragment,{children:[t.postcodeField&&gt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return gt.jsxs(gt.Fragment,{children:[gt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return gt.jsxs(gt.Fragment,{children:[gt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,cF=({placeholder:e,defaultValue:t})=>{const[i,a]=wt.useState(t);wt.useEffect(()=>{a(t)},[t]);const c=wt.useCallback(f=>{a(f.currentTarget.value)},[]);return gt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[gt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),gt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var ig={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ig.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,f="Expected a function",y="__lodash_hash_undefined__",l=1,b=2,w=1/0,I=9007199254740991,E="[object Arguments]",z="[object Array]",O="[object Boolean]",Q="[object Date]",Y="[object Error]",pe="[object Function]",G="[object GeneratorFunction]",V="[object Map]",N="[object Number]",oe="[object Object]",W="[object Promise]",B="[object RegExp]",S="[object Set]",M="[object String]",Z="[object Symbol]",X="[object WeakMap]",J="[object ArrayBuffer]",ye="[object DataView]",xe="[object Float32Array]",be="[object Float64Array]",te="[object Int8Array]",le="[object Int16Array]",re="[object Int32Array]",ne="[object Uint8Array]",ge="[object Uint8ClampedArray]",Ee="[object Uint16Array]",we="[object Uint32Array]",Ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ze=/^\w*$/,Pe=/^\./,He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ge=/[\\^$.*+?()[\]{}|]/g,it=/\\(\\)?/g,ut=/\w*$/,vt=/^\[object .+?Constructor\]$/,At=/^(?:0|[1-9]\d*)$/,ht={};ht[xe]=ht[be]=ht[te]=ht[le]=ht[re]=ht[ne]=ht[ge]=ht[Ee]=ht[we]=!0,ht[E]=ht[z]=ht[J]=ht[O]=ht[ye]=ht[Q]=ht[Y]=ht[pe]=ht[V]=ht[N]=ht[oe]=ht[B]=ht[S]=ht[M]=ht[X]=!1;var bt={};bt[E]=bt[z]=bt[J]=bt[ye]=bt[O]=bt[Q]=bt[xe]=bt[be]=bt[te]=bt[le]=bt[re]=bt[V]=bt[N]=bt[oe]=bt[B]=bt[S]=bt[M]=bt[Z]=bt[ne]=bt[ge]=bt[Ee]=bt[we]=!0,bt[Y]=bt[pe]=bt[X]=!1;var Ye=typeof wl=="object"&&wl&&wl.Object===Object&&wl,Vt=typeof self=="object"&&self&&self.Object===Object&&self,un=Ye||Vt||Function("return this")(),Xt=t&&!t.nodeType&&t,Gt=Xt&&!0&&e&&!e.nodeType&&e,an=Gt&&Gt.exports===Xt,vn=an&&Ye.process,Se=function(){try{return vn&&vn.binding("util")}catch{}}(),F=Se&&Se.isTypedArray;function R(U,me){return U.set(me[0],me[1]),U}function _e(U,me){return U.add(me),U}function We(U,me,Be){switch(Be.length){case 0:return U.call(me);case 1:return U.call(me,Be[0]);case 2:return U.call(me,Be[0],Be[1]);case 3:return U.call(me,Be[0],Be[1],Be[2])}return U.apply(me,Be)}function De(U,me){for(var Be=-1,rt=U?U.length:0;++Be<rt&&me(U[Be],Be,U)!==!1;);return U}function lt(U,me){for(var Be=-1,rt=me.length,zt=U.length;++Be<rt;)U[zt+Be]=me[Be];return U}function ae(U,me,Be,rt){var zt=-1,Tt=U?U.length:0;for(rt&&Tt&&(Be=U[++zt]);++zt<Tt;)Be=me(Be,U[zt],zt,U);return Be}function L(U,me){for(var Be=-1,rt=U?U.length:0;++Be<rt;)if(me(U[Be],Be,U))return!0;return!1}function D(U){return function(me){return me==null?i:me[U]}}function ue(U,me){for(var Be=-1,rt=Array(U);++Be<U;)rt[Be]=me(Be);return rt}function Oe(U){return function(me){return U(me)}}function qe(U,me){return U==null?i:U[me]}function st(U){var me=!1;if(U!=null&&typeof U.toString!="function")try{me=!!(U+"")}catch{}return me}function en(U){var me=-1,Be=Array(U.size);return U.forEach(function(rt,zt){Be[++me]=[zt,rt]}),Be}function Mt(U,me){return function(Be){return U(me(Be))}}function _n(U){var me=-1,Be=Array(U.size);return U.forEach(function(rt){Be[++me]=rt}),Be}var An=Array.prototype,xn=Function.prototype,_r=Object.prototype,hr=un["__core-js_shared__"],On=function(){var U=/[^.]+$/.exec(hr&&hr.keys&&hr.keys.IE_PROTO||"");return U?"Symbol(src)_1."+U:""}(),ro=xn.toString,Qn=_r.hasOwnProperty,Fi=ro.call(Object),Ae=_r.toString,ie=RegExp("^"+ro.call(Qn).replace(Ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=an?un.Buffer:i,de=un.Symbol,Te=un.Uint8Array,Re=Mt(Object.getPrototypeOf,Object),Xe=Object.create,Ve=_r.propertyIsEnumerable,$e=An.splice,Je=Object.getOwnPropertySymbols,pt=se?se.isBuffer:i,_t=Mt(Object.keys,Object),yt=Math.max,tn=io(un,"DataView"),cn=io(un,"Map"),Nt=io(un,"Promise"),qt=io(un,"Set"),ln=io(un,"WeakMap"),En=io(Object,"create"),yn=!Ve.call({valueOf:1},"valueOf"),Vn=so(tn),qn=so(cn),dn=so(Nt),er=so(qt),sr=so(ln),pr=de?de.prototype:i,mr=pr?pr.valueOf:i,di=pr?pr.toString:i;function Pn(){}function ii(U){var me=-1,Be=U?U.length:0;for(this.clear();++me<Be;){var rt=U[me];this.set(rt[0],rt[1])}}function xr(){this.__data__=En?En(null):{}}function aa(U){return this.has(U)&&delete this.__data__[U]}function is(U){var me=this.__data__;if(En){var Be=me[U];return Be===y?i:Be}return Qn.call(me,U)?me[U]:i}function Cr(U){var me=this.__data__;return En?me[U]!==i:Qn.call(me,U)}function os(U,me){var Be=this.__data__;return Be[U]=En&&me===i?y:me,this}ii.prototype.clear=xr,ii.prototype.delete=aa,ii.prototype.get=is,ii.prototype.has=Cr,ii.prototype.set=os;function Ir(U){var me=-1,Be=U?U.length:0;for(this.clear();++me<Be;){var rt=U[me];this.set(rt[0],rt[1])}}function $u(){this.__data__=[]}function Bo(U){var me=this.__data__,Be=_o(me,U);if(Be<0)return!1;var rt=me.length-1;return Be==rt?me.pop():$e.call(me,Be,1),!0}function Ps(U){var me=this.__data__,Be=_o(me,U);return Be<0?i:me[Be][1]}function $a(U){return _o(this.__data__,U)>-1}function Ms(U,me){var Be=this.__data__,rt=_o(Be,U);return rt<0?Be.push([U,me]):Be[rt][1]=me,this}Ir.prototype.clear=$u,Ir.prototype.delete=Bo,Ir.prototype.get=Ps,Ir.prototype.has=$a,Ir.prototype.set=Ms;function Zr(U){var me=-1,Be=U?U.length:0;for(this.clear();++me<Be;){var rt=U[me];this.set(rt[0],rt[1])}}function kn(){this.__data__={hash:new ii,map:new(cn||Ir),string:new ii}}function Gl(U){return el(this,U).delete(U)}function ks(U){return el(this,U).get(U)}function Eh(U){return el(this,U).has(U)}function Vu(U,me){return el(this,U).set(U,me),this}Zr.prototype.clear=kn,Zr.prototype.delete=Gl,Zr.prototype.get=ks,Zr.prototype.has=Eh,Zr.prototype.set=Vu;function ss(U){var me=-1,Be=U?U.length:0;for(this.__data__=new Zr;++me<Be;)this.add(U[me])}function Sh(U){return this.__data__.set(U,y),this}function Zl(U){return this.__data__.has(U)}ss.prototype.add=ss.prototype.push=Sh,ss.prototype.has=Zl;function bi(U){this.__data__=new Ir(U)}function Gu(){this.__data__=new Ir}function Th(U){return this.__data__.delete(U)}function Wl(U){return this.__data__.get(U)}function Zu(U){return this.__data__.has(U)}function Hl(U,me){var Be=this.__data__;if(Be instanceof Ir){var rt=Be.__data__;if(!cn||rt.length<c-1)return rt.push([U,me]),this;Be=this.__data__=new Zr(rt)}return Be.set(U,me),this}bi.prototype.clear=Gu,bi.prototype.delete=Th,bi.prototype.get=Wl,bi.prototype.has=Zu,bi.prototype.set=Hl;function Va(U,me){var Be=Wr(U)||Uo(U)?ue(U.length,String):[],rt=Be.length,zt=!!rt;for(var Tt in U)(me||Qn.call(U,Tt))&&!(zt&&(Tt=="length"||Bs(Tt,rt)))&&Be.push(Tt);return Be}function Ga(U,me,Be){(Be!==i&&!wo(U[me],Be)||typeof me=="number"&&Be===i&&!(me in U))&&(U[me]=Be)}function No(U,me,Be){var rt=U[me];(!(Qn.call(U,me)&&wo(rt,Be))||Be===i&&!(me in U))&&(U[me]=Be)}function _o(U,me){for(var Be=U.length;Be--;)if(wo(U[Be][0],me))return Be;return-1}function Ei(U,me){return U&&Ja(me,Di(me),U)}function xo(U,me,Be,rt,zt,Tt,Zt){var Jt;if(rt&&(Jt=Tt?rt(U,zt,Tt,Zt):rt(U)),Jt!==i)return Jt;if(!Hr(U))return U;var mn=Wr(U);if(mn){if(Jt=Mh(U),!me)return tu(U,Jt)}else{var Fn=oo(U),Sn=Fn==pe||Fn==G;if(oi(U))return Ah(U,me);if(Fn==oe||Fn==E||Sn&&!Tt){if(st(U))return Tt?U:{};if(Jt=iu(Sn?{}:U),!me)return nu(U,Ei(Jt,U))}else{if(!bt[Fn])return Tt?U:{};Jt=nl(U,Fn,xo,me)}}Zt||(Zt=new bi);var St=Zt.get(U);if(St)return St;if(Zt.set(U,Jt),!mn)var rr=Be?Bn(U):Di(U);return De(rr||U,function(wr,tr){rr&&(tr=wr,wr=U[tr]),No(Jt,tr,xo(wr,me,Be,rt,tr,U,Zt))}),Jt}function Za(U){return Hr(U)?Xe(U):{}}var zs=Xu(Wa),la=Ds();function Wa(U,me){return U&&la(U,me,Di)}function Ls(U,me){me=Ns(me,U)?[me]:Hu(me);for(var Be=0,rt=me.length;U!=null&&Be<rt;)U=U[ha(me[Be++])];return Be&&Be==rt?U:i}function Rs(U,me,Be){var rt=me(U);return Wr(U)?rt:lt(rt,Be(U))}function ua(U){return Ae.call(U)}function pi(U,me){return U!=null&&me in Object(U)}function ei(U,me,Be,rt,zt){return U===me?!0:U==null||me==null||!Hr(U)&&!ao(me)?U!==U&&me!==me:Xl(U,me,ei,Be,rt,zt)}function Xl(U,me,Be,rt,zt,Tt){var Zt=Wr(U),Jt=Wr(me),mn=z,Fn=z;Zt||(mn=oo(U),mn=mn==E?oe:mn),Jt||(Fn=oo(me),Fn=Fn==E?oe:Fn);var Sn=mn==oe&&!st(U),St=Fn==oe&&!st(me),rr=mn==Fn;if(rr&&!Sn)return Tt||(Tt=new bi),Zt||ma(U)?us(U,me,Be,rt,zt,Tt):qu(U,me,mn,Be,rt,zt,Tt);if(!(zt&b)){var wr=Sn&&Qn.call(U,"__wrapped__"),tr=St&&Qn.call(me,"__wrapped__");if(wr||tr){var Eo=wr?U.value():U,Ct=tr?me.value():me;return Tt||(Tt=new bi),Be(Eo,Ct,rt,zt,Tt)}}return rr?(Tt||(Tt=new bi),ru(U,me,Be,rt,zt,Tt)):!1}function Ha(U,me,Be,rt){var zt=Be.length,Tt=zt,Zt=!rt;if(U==null)return!Tt;for(U=Object(U);zt--;){var Jt=Be[zt];if(Zt&&Jt[2]?Jt[1]!==U[Jt[0]]:!(Jt[0]in U))return!1}for(;++zt<Tt;){Jt=Be[zt];var mn=Jt[0],Fn=U[mn],Sn=Jt[1];if(Zt&&Jt[2]){if(Fn===i&&!(mn in U))return!1}else{var St=new bi;if(rt)var rr=rt(Fn,Sn,mn,U,me,St);if(!(rr===i?ei(Sn,Fn,rt,l|b,St):rr))return!1}}return!0}function Xa(U){if(!Hr(U)||Us(U))return!1;var me=Vs(U)||st(U)?ie:vt;return me.test(so(U))}function ql(U){return ao(U)&&da(U.length)&&!!ht[Ae.call(U)]}function qa(U){return typeof U=="function"?U:U==null?Gs:typeof U=="object"?Wr(U)?Ka(U[0],U[1]):Ln(U):au(U)}function Os(U){if(!Gn(U))return _t(U);var me=[];for(var Be in Object(U))Qn.call(U,Be)&&Be!="constructor"&&me.push(Be);return me}function as(U){if(!Hr(U))return rl(U);var me=Gn(U),Be=[];for(var rt in U)rt=="constructor"&&(me||!Qn.call(U,rt))||Be.push(rt);return Be}function Ln(U){var me=Ku(U);return me.length==1&&me[0][2]?ca(me[0][0],me[0][1]):function(Be){return Be===U||Ha(Be,U,me)}}function Ka(U,me){return Ns(U)&&Hn(me)?ca(ha(U),me):function(Be){var rt=ga(Be,U);return rt===i&&rt===me?ji(Be,U):ei(me,rt,i,l|b)}}function Kl(U,me,Be,rt,zt){if(U!==me){if(!(Wr(me)||ma(me)))var Tt=as(me);De(Tt||me,function(Zt,Jt){if(Tt&&(Jt=Zt,Zt=me[Jt]),Hr(Zt))zt||(zt=new bi),Wu(U,me,Jt,Be,Kl,rt,zt);else{var mn=rt?rt(U[Jt],Zt,Jt+"",U,me,zt):i;mn===i&&(mn=Zt),Ga(U,Jt,mn)}})}}function Wu(U,me,Be,rt,zt,Tt,Zt){var Jt=U[Be],mn=me[Be],Fn=Zt.get(mn);if(Fn){Ga(U,Be,Fn);return}var Sn=Tt?Tt(Jt,mn,Be+"",U,me,Zt):i,St=Sn===i;St&&(Sn=mn,Wr(mn)||ma(mn)?Wr(Jt)?Sn=Jt:bo(Jt)?Sn=tu(Jt):(St=!1,Sn=xo(mn,!0)):pa(mn)||Uo(mn)?Uo(Jt)?Sn=ol(Jt):!Hr(Jt)||rt&&Vs(Jt)?(St=!1,Sn=xo(mn,!0)):Sn=Jt:St=!1),St&&(Zt.set(mn,Sn),zt(Sn,mn,rt,Tt,Zt),Zt.delete(mn)),Ga(U,Be,Sn)}function Fs(U){return function(me){return Ls(me,U)}}function Ch(U,me){return me=yt(me===i?U.length-1:me,0),function(){for(var Be=arguments,rt=-1,zt=yt(Be.length-me,0),Tt=Array(zt);++rt<zt;)Tt[rt]=Be[me+rt];rt=-1;for(var Zt=Array(me+1);++rt<me;)Zt[rt]=Be[rt];return Zt[me]=Tt,We(U,this,Zt)}}function Ih(U){if(typeof U=="string")return U;if($o(U))return di?di.call(U):"";var me=U+"";return me=="0"&&1/U==-w?"-0":me}function Hu(U){return Wr(U)?U:kh(U)}function Ah(U,me){if(me)return U.slice();var Be=new U.constructor(U.length);return U.copy(Be),Be}function Yl(U){var me=new U.constructor(U.byteLength);return new Te(me).set(new Te(U)),me}function Ph(U,me){var Be=me?Yl(U.buffer):U.buffer;return new U.constructor(Be,U.byteOffset,U.byteLength)}function Jl(U,me,Be){var rt=me?Be(en(U),!0):en(U);return ae(rt,R,new U.constructor)}function Ya(U){var me=new U.constructor(U.source,ut.exec(U));return me.lastIndex=U.lastIndex,me}function Ql(U,me,Be){var rt=me?Be(_n(U),!0):_n(U);return ae(rt,_e,new U.constructor)}function eu(U){return mr?Object(mr.call(U)):{}}function js(U,me){var Be=me?Yl(U.buffer):U.buffer;return new U.constructor(Be,U.byteOffset,U.length)}function tu(U,me){var Be=-1,rt=U.length;for(me||(me=Array(rt));++Be<rt;)me[Be]=U[Be];return me}function Ja(U,me,Be,rt){Be||(Be={});for(var zt=-1,Tt=me.length;++zt<Tt;){var Zt=me[zt],Jt=rt?rt(Be[Zt],U[Zt],Zt,Be,U):i;No(Be,Zt,Jt===i?U[Zt]:Jt)}return Be}function nu(U,me){return Ja(U,Yu(U),me)}function ls(U){return Ch(function(me,Be){var rt=-1,zt=Be.length,Tt=zt>1?Be[zt-1]:i,Zt=zt>2?Be[2]:i;for(Tt=U.length>3&&typeof Tt=="function"?(zt--,Tt):i,Zt&&ar(Be[0],Be[1],Zt)&&(Tt=zt<3?i:Tt,zt=1),me=Object(me);++rt<zt;){var Jt=Be[rt];Jt&&U(me,Jt,rt,Tt)}return me})}function Xu(U,me){return function(Be,rt){if(Be==null)return Be;if(!Kn(Be))return U(Be,rt);for(var zt=Be.length,Tt=me?zt:-1,Zt=Object(Be);(me?Tt--:++Tt<zt)&&rt(Zt[Tt],Tt,Zt)!==!1;);return Be}}function Ds(U){return function(me,Be,rt){for(var zt=-1,Tt=Object(me),Zt=rt(me),Jt=Zt.length;Jt--;){var mn=Zt[U?Jt:++zt];if(Be(Tt[mn],mn,Tt)===!1)break}return me}}function us(U,me,Be,rt,zt,Tt){var Zt=zt&b,Jt=U.length,mn=me.length;if(Jt!=mn&&!(Zt&&mn>Jt))return!1;var Fn=Tt.get(U);if(Fn&&Tt.get(me))return Fn==me;var Sn=-1,St=!0,rr=zt&l?new ss:i;for(Tt.set(U,me),Tt.set(me,U);++Sn<Jt;){var wr=U[Sn],tr=me[Sn];if(rt)var Eo=Zt?rt(tr,wr,Sn,me,U,Tt):rt(wr,tr,Sn,U,me,Tt);if(Eo!==i){if(Eo)continue;St=!1;break}if(rr){if(!L(me,function(Ct,lo){if(!rr.has(lo)&&(wr===Ct||Be(wr,Ct,rt,zt,Tt)))return rr.add(lo)})){St=!1;break}}else if(!(wr===tr||Be(wr,tr,rt,zt,Tt))){St=!1;break}}return Tt.delete(U),Tt.delete(me),St}function qu(U,me,Be,rt,zt,Tt,Zt){switch(Be){case ye:if(U.byteLength!=me.byteLength||U.byteOffset!=me.byteOffset)return!1;U=U.buffer,me=me.buffer;case J:return!(U.byteLength!=me.byteLength||!rt(new Te(U),new Te(me)));case O:case Q:case N:return wo(+U,+me);case Y:return U.name==me.name&&U.message==me.message;case B:case M:return U==me+"";case V:var Jt=en;case S:var mn=Tt&b;if(Jt||(Jt=_n),U.size!=me.size&&!mn)return!1;var Fn=Zt.get(U);if(Fn)return Fn==me;Tt|=l,Zt.set(U,me);var Sn=us(Jt(U),Jt(me),rt,zt,Tt,Zt);return Zt.delete(U),Sn;case Z:if(mr)return mr.call(U)==mr.call(me)}return!1}function ru(U,me,Be,rt,zt,Tt){var Zt=zt&b,Jt=Di(U),mn=Jt.length,Fn=Di(me),Sn=Fn.length;if(mn!=Sn&&!Zt)return!1;for(var St=mn;St--;){var rr=Jt[St];if(!(Zt?rr in me:Qn.call(me,rr)))return!1}var wr=Tt.get(U);if(wr&&Tt.get(me))return wr==me;var tr=!0;Tt.set(U,me),Tt.set(me,U);for(var Eo=Zt;++St<mn;){rr=Jt[St];var Ct=U[rr],lo=me[rr];if(rt)var al=Zt?rt(lo,Ct,rr,me,U,Tt):rt(Ct,lo,rr,U,me,Tt);if(!(al===i?Ct===lo||Be(Ct,lo,rt,zt,Tt):al)){tr=!1;break}Eo||(Eo=rr=="constructor")}if(tr&&!Eo){var va=U.constructor,cs=me.constructor;va!=cs&&"constructor"in U&&"constructor"in me&&!(typeof va=="function"&&va instanceof va&&typeof cs=="function"&&cs instanceof cs)&&(tr=!1)}return Tt.delete(U),Tt.delete(me),tr}function Bn(U){return Rs(U,Di,Yu)}function Qa(){var U=Pn.iteratee||sl;return U=U===sl?qa:U,arguments.length?U(arguments[0],arguments[1]):U}function el(U,me){var Be=U.__data__;return Tn(me)?Be[typeof me=="string"?"string":"hash"]:Be.map}function Ku(U){for(var me=Di(U),Be=me.length;Be--;){var rt=me[Be],zt=U[rt];me[Be]=[rt,zt,Hn(zt)]}return me}function io(U,me){var Be=qe(U,me);return Xa(Be)?Be:i}var Yu=Je?Mt(Je,Object):Zs,oo=ua;(tn&&oo(new tn(new ArrayBuffer(1)))!=ye||cn&&oo(new cn)!=V||Nt&&oo(Nt.resolve())!=W||qt&&oo(new qt)!=S||ln&&oo(new ln)!=X)&&(oo=function(U){var me=Ae.call(U),Be=me==oe?U.constructor:i,rt=Be?so(Be):i;if(rt)switch(rt){case Vn:return ye;case qn:return V;case dn:return W;case er:return S;case sr:return X}return me});function tl(U,me,Be){me=Ns(me,U)?[me]:Hu(me);for(var rt,zt=-1,Zt=me.length;++zt<Zt;){var Tt=ha(me[zt]);if(!(rt=U!=null&&Be(U,Tt)))break;U=U[Tt]}if(rt)return rt;var Zt=U?U.length:0;return!!Zt&&da(Zt)&&Bs(Tt,Zt)&&(Wr(U)||Uo(U))}function Mh(U){var me=U.length,Be=U.constructor(me);return me&&typeof U[0]=="string"&&Qn.call(U,"index")&&(Be.index=U.index,Be.input=U.input),Be}function iu(U){return typeof U.constructor=="function"&&!Gn(U)?Za(Re(U)):{}}function nl(U,me,Be,rt){var zt=U.constructor;switch(me){case J:return Yl(U);case O:case Q:return new zt(+U);case ye:return Ph(U,rt);case xe:case be:case te:case le:case re:case ne:case ge:case Ee:case we:return js(U,rt);case V:return Jl(U,rt,Be);case N:case M:return new zt(U);case B:return Ya(U);case S:return Ql(U,rt,Be);case Z:return eu(U)}}function Bs(U,me){return me=me??I,!!me&&(typeof U=="number"||At.test(U))&&U>-1&&U%1==0&&U<me}function ar(U,me,Be){if(!Hr(Be))return!1;var rt=typeof me;return(rt=="number"?Kn(Be)&&Bs(me,Be.length):rt=="string"&&me in Be)?wo(Be[me],U):!1}function Ns(U,me){if(Wr(U))return!1;var Be=typeof U;return Be=="number"||Be=="symbol"||Be=="boolean"||U==null||$o(U)?!0:ze.test(U)||!Ne.test(U)||me!=null&&U in Object(me)}function Tn(U){var me=typeof U;return me=="string"||me=="number"||me=="symbol"||me=="boolean"?U!=="__proto__":U===null}function Us(U){return!!On&&On in U}function Gn(U){var me=U&&U.constructor,Be=typeof me=="function"&&me.prototype||_r;return U===Be}function Hn(U){return U===U&&!Hr(U)}function ca(U,me){return function(Be){return Be==null?!1:Be[U]===me&&(me!==i||U in Object(Be))}}function rl(U){var me=[];if(U!=null)for(var Be in Object(U))me.push(Be);return me}var kh=$s(function(U){U=su(U);var me=[];return Pe.test(U)&&me.push(""),U.replace(He,function(Be,rt,zt,Tt){me.push(zt?Tt.replace(it,"$1"):rt||Be)}),me});function ha(U){if(typeof U=="string"||$o(U))return U;var me=U+"";return me=="0"&&1/U==-w?"-0":me}function so(U){if(U!=null){try{return ro.call(U)}catch{}try{return U+""}catch{}}return""}function ou(U){for(var me=-1,Be=U?U.length:0,rt=0,zt=[];++me<Be;){var Tt=U[me];Tt&&(zt[rt++]=Tt)}return zt}function il(U,me){var Be=Wr(U)?De:zs;return Be(U,Qa(me,3))}function $s(U,me){if(typeof U!="function"||me&&typeof me!="function")throw new TypeError(f);var Be=function(){var rt=arguments,zt=me?me.apply(this,rt):rt[0],Tt=Be.cache;if(Tt.has(zt))return Tt.get(zt);var Zt=U.apply(this,rt);return Be.cache=Tt.set(zt,Zt),Zt};return Be.cache=new($s.Cache||Zr),Be}$s.Cache=Zr;function fa(U){return xo(U,!1,!0)}function wo(U,me){return U===me||U!==U&&me!==me}function Uo(U){return bo(U)&&Qn.call(U,"callee")&&(!Ve.call(U,"callee")||Ae.call(U)==E)}var Wr=Array.isArray;function Kn(U){return U!=null&&da(U.length)&&!Vs(U)}function bo(U){return ao(U)&&Kn(U)}var oi=pt||lu;function Ju(U){if(Kn(U)&&(Wr(U)||typeof U=="string"||typeof U.splice=="function"||oi(U)||Uo(U)))return!U.length;var me=oo(U);if(me==V||me==S)return!U.size;if(yn||Gn(U))return!_t(U).length;for(var Be in U)if(Qn.call(U,Be))return!1;return!0}function Vs(U){var me=Hr(U)?Ae.call(U):"";return me==pe||me==G}function da(U){return typeof U=="number"&&U>-1&&U%1==0&&U<=I}function Hr(U){var me=typeof U;return!!U&&(me=="object"||me=="function")}function ao(U){return!!U&&typeof U=="object"}function pa(U){if(!ao(U)||Ae.call(U)!=oe||st(U))return!1;var me=Re(U);if(me===null)return!0;var Be=Qn.call(me,"constructor")&&me.constructor;return typeof Be=="function"&&Be instanceof Be&&ro.call(Be)==Fi}function $o(U){return typeof U=="symbol"||ao(U)&&Ae.call(U)==Z}var ma=F?Oe(F):ql;function ol(U){return Ja(U,ya(U))}function su(U){return U==null?"":Ih(U)}function ga(U,me,Be){var rt=U==null?i:Ls(U,me);return rt===i?Be:rt}function ji(U,me){return U!=null&&tl(U,me,pi)}function Di(U){return Kn(U)?Va(U):Os(U)}function ya(U){return Kn(U)?Va(U,!0):as(U)}var Qu=ls(function(U,me,Be){Kl(U,me,Be)});function Gs(U){return U}function sl(U){return qa(typeof U=="function"?U:xo(U,!0))}function au(U){return Ns(U)?D(ha(U)):Fs(U)}function Zs(){return[]}function lu(){return!1}Pn.compact=ou,Pn.iteratee=sl,Pn.keys=Di,Pn.keysIn=ya,Pn.memoize=$s,Pn.merge=Qu,Pn.property=au,Pn.toPlainObject=ol,Pn.clone=fa,Pn.eq=wo,Pn.forEach=il,Pn.get=ga,Pn.hasIn=ji,Pn.identity=Gs,Pn.isArguments=Uo,Pn.isArray=Wr,Pn.isArrayLike=Kn,Pn.isArrayLikeObject=bo,Pn.isBuffer=oi,Pn.isEmpty=Ju,Pn.isFunction=Vs,Pn.isLength=da,Pn.isObject=Hr,Pn.isObjectLike=ao,Pn.isPlainObject=pa,Pn.isSymbol=$o,Pn.isTypedArray=ma,Pn.stubArray=Zs,Pn.stubFalse=lu,Pn.toString=su,Pn.each=il,Pn.VERSION=a,Gt&&((Gt.exports=Pn)._=Pn,Xt._=Pn)}).call(wl)})(ig,ig.exports);var hF=ig.exports,fF=tm;function tm(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)tm(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)tm(e.geometries[a],t);else if(i==="Feature")tm(e.geometry,t);else if(i==="Polygon")CE(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)CE(e.coordinates[a],t);return e}function CE(e,t){if(e.length!==0){IE(e[0],t);for(var i=1;i<e.length;i++)IE(e[i],!t)}}function IE(e,t){for(var i=0,a=0,c=0,f=e.length,y=f-1;c<f;y=c++){var l=(e[c][0]-e[y][0])*(e[y][1]+e[c][1]),b=i+l;a+=Math.abs(i)>=Math.abs(l)?i-b+l:l-b+i,i=b}i+a>=0!=!!t&&e.reverse()}const dF=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var pF=dF,Mn=hF,Rp=fF,nm={};pF.forEach(function(e){if(e.polygon==="all")nm[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),nm[e.key]={},nm[e.key][t]=i}});function mF(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Mn.merge(e,t)}var og={};og=function(e,t,i){t=Mn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:nm,deduplicator:mF},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=f(e):a=c(e),a;function c(b){var w=new Array,I=new Array,E=new Array;function z(W){var B=Mn.clone(W);B.lat=W.center.lat,B.lon=W.center.lon,B.__is_center_placeholder=!0,w.push(B)}function O(W){var B=Mn.clone(W);B.nodes=[];function S(M,Z,X){var J={type:"node",id:"_"+B.type+"/"+B.id+"bounds"+X,lat:M,lon:Z};B.nodes.push(J.id),w.push(J)}S(B.bounds.minlat,B.bounds.minlon,1),S(B.bounds.maxlat,B.bounds.minlon,2),S(B.bounds.maxlat,B.bounds.maxlon,3),S(B.bounds.minlat,B.bounds.maxlon,4),B.nodes.push(B.nodes[0]),B.__is_bounds_placeholder=!0,I.push(B)}function Q(W){function B(S,M,Z){var X={type:"node",id:Z,lat:S,lon:M};w.push(X)}Mn.isArray(W.nodes)||(W.nodes=W.geometry.map(function(S){return S!==null?"_anonymous@"+S.lat+"/"+S.lon:"_anonymous@unknown_location"})),W.geometry.forEach(function(S,M){S&&B(S.lat,S.lon,W.nodes[M])})}function Y(W){function B(M,Z,X){var J={type:"node",id:X,lat:M,lon:Z};w.push(J)}function S(M,Z){if(I.some(function(ye){return ye.type=="way"&&ye.id==Z}))return;var X={type:"way",id:Z,nodes:[]};function J(ye,xe){var be={type:"node",id:"_anonymous@"+ye+"/"+xe,lat:ye,lon:xe};X.nodes.push(be.id),w.push(be)}M.forEach(function(ye){ye?J(ye.lat,ye.lon):X.nodes.push(void 0)}),I.push(X)}W.members.forEach(function(M,Z){M.type=="node"?M.lat&&B(M.lat,M.lon,M.ref):M.type=="way"&&M.geometry&&(M.ref="_fullGeom"+M.ref,S(M.geometry,M.ref))})}for(var pe=0;pe<b.elements.length;pe++)switch(b.elements[pe].type){case"node":var G=b.elements[pe];w.push(G);break;case"way":var V=Mn.clone(b.elements[pe]);V.nodes=Mn.clone(V.nodes),I.push(V),V.center&&z(V),V.geometry?Q(V):V.bounds&&O(V);break;case"relation":var N=Mn.clone(b.elements[pe]);N.members=Mn.clone(N.members),E.push(N);var oe=N.members&&N.members.some(function(W){return W.type=="node"&&W.lat||W.type=="way"&&W.geometry&&W.geometry.length>0});N.center&&z(N),oe?Y(N):N.bounds&&O(N);break}return y(w,I,E)}function f(b){var w=new Array,I=new Array,E=new Array;function z(N,oe,W){N.hasAttribute(W)&&(oe[W]=N.getAttribute(W))}function O(N,oe){var W=Mn.clone(N);z(oe,W,"lat"),z(oe,W,"lon"),W.__is_center_placeholder=!0,w.push(W)}function Q(N,oe){var W=Mn.clone(N);W.nodes=[];function B(S,M,Z){var X={type:"node",id:"_"+W.type+"/"+W.id+"bounds"+Z,lat:S,lon:M};W.nodes.push(X.id),w.push(X)}B(oe.getAttribute("minlat"),oe.getAttribute("minlon"),1),B(oe.getAttribute("maxlat"),oe.getAttribute("minlon"),2),B(oe.getAttribute("maxlat"),oe.getAttribute("maxlon"),3),B(oe.getAttribute("minlat"),oe.getAttribute("maxlon"),4),W.nodes.push(W.nodes[0]),W.__is_bounds_placeholder=!0,I.push(W)}function Y(N,oe){function W(B,S,M){var Z={type:"node",id:M,lat:B,lon:S};return w.push(Z),Z.id}Mn.isArray(N.nodes)||(N.nodes=[],Mn.each(oe,function(B,S){N.nodes.push("_anonymous@"+B.getAttribute("lat")+"/"+B.getAttribute("lon"))})),Mn.each(oe,function(B,S){B.getAttribute("lat")&&W(B.getAttribute("lat"),B.getAttribute("lon"),N.nodes[S])})}function pe(N,oe){function W(S,M,Z){var X={type:"node",id:Z,lat:S,lon:M};w.push(X)}function B(S,M){if(I.some(function(J){return J.type=="way"&&J.id==M}))return;var Z={type:"way",id:M,nodes:[]};function X(J,ye){var xe={type:"node",id:"_anonymous@"+J+"/"+ye,lat:J,lon:ye};Z.nodes.push(xe.id),w.push(xe)}Mn.each(S,function(J){J.getAttribute("lat")?X(J.getAttribute("lat"),J.getAttribute("lon")):Z.nodes.push(void 0)}),I.push(Z)}Mn.each(oe,function(S,M){N.members[M].type=="node"?S.getAttribute("lat")&&W(S.getAttribute("lat"),S.getAttribute("lon"),N.members[M].ref):N.members[M].type=="way"&&S.getElementsByTagName("nd").length>0&&(N.members[M].ref="_fullGeom"+N.members[M].ref,B(S.getElementsByTagName("nd"),N.members[M].ref))})}Mn.each(b.getElementsByTagName("node"),function(N,oe){var W={};Mn.each(N.getElementsByTagName("tag"),function(S){W[S.getAttribute("k")]=S.getAttribute("v")});var B={type:"node"};z(N,B,"id"),z(N,B,"lat"),z(N,B,"lon"),z(N,B,"version"),z(N,B,"timestamp"),z(N,B,"changeset"),z(N,B,"uid"),z(N,B,"user"),Mn.isEmpty(W)||(B.tags=W),w.push(B)});var G,V;return Mn.each(b.getElementsByTagName("way"),function(N,oe){var W={},B=[];Mn.each(N.getElementsByTagName("tag"),function(Z){W[Z.getAttribute("k")]=Z.getAttribute("v")});var S=!1;Mn.each(N.getElementsByTagName("nd"),function(Z,X){var J;(J=Z.getAttribute("ref"))&&(B[X]=J),!S&&Z.getAttribute("lat")&&(S=!0)});var M={type:"way"};z(N,M,"id"),z(N,M,"version"),z(N,M,"timestamp"),z(N,M,"changeset"),z(N,M,"uid"),z(N,M,"user"),B.length>0&&(M.nodes=B),Mn.isEmpty(W)||(M.tags=W),(G=N.getElementsByTagName("center")[0])&&O(M,G),S?Y(M,N.getElementsByTagName("nd")):(V=N.getElementsByTagName("bounds")[0])&&Q(M,V),I.push(M)}),Mn.each(b.getElementsByTagName("relation"),function(N,oe){var W={},B=[];Mn.each(N.getElementsByTagName("tag"),function(Z){W[Z.getAttribute("k")]=Z.getAttribute("v")});var S=!1;Mn.each(N.getElementsByTagName("member"),function(Z,X){B[X]={},z(Z,B[X],"ref"),z(Z,B[X],"role"),z(Z,B[X],"type"),(!S&&B[X].type=="node"&&Z.getAttribute("lat")||B[X].type=="way"&&Z.getElementsByTagName("nd").length>0)&&(S=!0)});var M={type:"relation"};z(N,M,"id"),z(N,M,"version"),z(N,M,"timestamp"),z(N,M,"changeset"),z(N,M,"uid"),z(N,M,"user"),B.length>0&&(M.members=B),Mn.isEmpty(W)||(M.tags=W),(G=N.getElementsByTagName("center")[0])&&O(M,G),S?pe(M,N.getElementsByTagName("member")):(V=N.getElementsByTagName("bounds")[0])&&Q(M,V),E.push(M)}),y(w,I,E)}function y(b,w,I){function E(Pe,He){if(typeof He!="object"&&(He={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Pe,He);for(var Ge in Pe)if(t.uninterestingTags[Ge]!==!0&&!(He[Ge]===!0||He[Ge]===Pe[Ge]))return!0;return!1}function z(Pe){var He={timestamp:Pe.timestamp,version:Pe.version,changeset:Pe.changeset,user:Pe.user,uid:Pe.uid};for(var Ge in He)He[Ge]===void 0&&delete He[Ge];return He}for(var O=new Object,Q=new Object,Y=0;Y<b.length;Y++){var pe=b[Y];O[pe.id]!==void 0&&(pe=t.deduplicator(pe,O[pe.id])),O[pe.id]=pe,typeof pe.tags<"u"&&E(pe.tags)&&(Q[pe.id]=!0)}for(var Y=0;Y<I.length;Y++)if(Mn.isArray(I[Y].members))for(var G=0;G<I[Y].members.length;G++)I[Y].members[G].type=="node"&&(Q[I[Y].members[G].ref]=!0);for(var V=new Object,N=new Object,Y=0;Y<w.length;Y++){var oe=w[Y];if(V[oe.id]&&(oe=t.deduplicator(oe,V[oe.id])),V[oe.id]=oe,Mn.isArray(oe.nodes))for(var G=0;G<oe.nodes.length;G++)typeof oe.nodes[G]!="object"&&(N[oe.nodes[G]]=!0,oe.nodes[G]=O[oe.nodes[G]])}var W=new Array;for(var B in O){var pe=O[B];(!N[B]||Q[B])&&W.push(pe)}for(var S=new Array,Y=0;Y<I.length;Y++){var M=I[Y];S[M.id]&&(M=t.deduplicator(M,S[M.id])),S[M.id]=M}var Z={node:{},way:{},relation:{}};for(var B in S){var M=S[B];if(!Mn.isArray(M.members)){t.verbose&&console.warn("Relation",M.type+"/"+M.id,"ignored because it has no members");continue}for(var G=0;G<M.members.length;G++){var X=M.members[G].type,J=M.members[G].ref;if(typeof J!="number"&&(J=J.replace("_fullGeom","")),!Z[X]){t.verbose&&console.warn("Relation",M.type+"/"+M.id,"member",X+"/"+J,"ignored because it has an invalid type");continue}typeof Z[X][J]>"u"&&(Z[X][J]=[]),Z[X][J].push({role:M.members[G].role,rel:M.id,reltags:M.tags})}}var ye,xe=[];for(Y=0;Y<W.length;Y++){if(typeof W[Y].lon>"u"||typeof W[Y].lat>"u"){t.verbose&&console.warn("POI",W[Y].type+"/"+W[Y].id,"ignored because it lacks coordinates");continue}var be={type:"Feature",id:W[Y].type+"/"+W[Y].id,properties:{type:W[Y].type,id:W[Y].id,tags:W[Y].tags||{},relations:Z.node[W[Y].id]||[],meta:z(W[Y])},geometry:{type:"Point",coordinates:[+W[Y].lon,+W[Y].lat]}};W[Y].__is_center_placeholder&&(be.properties.geometry="center"),i?i(be):xe.push(be)}for(var te=[],le=[],Y=0;Y<I.length;Y++)if(S[I[Y].id]===I[Y]){if(typeof I[Y].tags<"u"&&(I[Y].tags.type=="route"||I[Y].tags.type=="waterway")){let He=function(Ge){var it=!1,ut;ut=Ge.members.filter(function(bt){return bt.type==="way"}),ut=ut.map(function(bt){var Ye=V[bt.ref];if(Ye===void 0||Ye.nodes===void 0){t.verbose&&console.warn("Route "+Ge.type+"/"+Ge.id,"tainted by a missing or incomplete  way",bt.type+"/"+bt.ref),it=!0;return}return{id:bt.ref,role:bt.role,way:Ye,nodes:Ye.nodes.filter(function(Vt){return Vt!==void 0?!0:(it=!0,t.verbose&&console.warn("Route",Ge.type+"/"+Ge.id,"tainted by a way",bt.type+"/"+bt.ref,"with a missing node"),!1)})}}),ut=Mn.compact(ut);var vt;vt=A0(ut);var At=[];if(At=Mn.compact(vt.map(function(bt){return Mn.compact(bt.map(function(Ye){return[+Ye.lon,+Ye.lat]}))})),At.length==0)return t.verbose&&console.warn("Route",Ge.type+"/"+Ge.id,"contains no coordinates"),!1;var ht={type:"Feature",id:Ge.type+"/"+Ge.id,properties:{type:Ge.type,id:Ge.id,tags:Ge.tags||{},relations:Z[Ge.type][Ge.id]||[],meta:z(Ge)},geometry:{type:At.length===1?"LineString":"MultiLineString",coordinates:At.length===1?At[0]:At}};return it&&(t.verbose&&console.warn("Route",Ge.type+"/"+Ge.id,"is tainted"),ht.properties.tainted=!0),ht};var Ne=He;if(!Mn.isArray(I[Y].members)){t.verbose&&console.warn("Route",I[Y].type+"/"+I[Y].id,"ignored because it has no members");continue}if(I[Y].members.forEach(function(Ge){V[Ge.ref]&&!E(V[Ge.ref].tags)&&(V[Ge.ref].is_skippablerelationmember=!0)}),be=He(I[Y]),be===!1){t.verbose&&console.warn("Route relation",I[Y].type+"/"+I[Y].id,"ignored because it has invalid geometry");continue}i?i(Rp(be)):le.push(be)}if(typeof I[Y].tags<"u"&&(I[Y].tags.type=="multipolygon"||I[Y].tags.type=="boundary")){let Ge=function(it,ut){var vt=!1,At=ne?"way":"relation",ht=typeof it.id=="number"?it.id:+it.id.replace("_fullGeom",""),bt;bt=ut.members.filter(function(R){return R.type==="way"}),bt=bt.map(function(R){var _e=V[R.ref];if(_e===void 0||_e.nodes===void 0){t.verbose&&console.warn("Multipolygon",At+"/"+ht,"tainted by a missing or incomplete way",R.type+"/"+R.ref),vt=!0;return}return{id:R.ref,role:R.role||"outer",way:_e,nodes:_e.nodes.filter(function(We){return We!==void 0?!0:(vt=!0,t.verbose&&console.warn("Multipolygon",At+"/"+ht,"tainted by a way",R.type+"/"+R.ref,"with a missing node"),!1)})}}),bt=Mn.compact(bt);var Ye,Vt;Ye=A0(bt.filter(function(R){return R.role==="outer"})),Vt=A0(bt.filter(function(R){return R.role==="inner"}));var un;function Xt(R){var _e=function(L,D){for(var ue=0;ue<D.length;ue++)if(De(D[ue],L))return!0;return!1},We=function(L){return L.map(function(D){return[+D.lat,+D.lon]})},De=function(L,D){for(var ue=L[0],Oe=L[1],qe=!1,st=0,en=D.length-1;st<D.length;en=st++){var Mt=D[st][0],_n=D[st][1],An=D[en][0],xn=D[en][1],_r=_n>Oe!=xn>Oe&&ue<(An-Mt)*(Oe-_n)/(xn-_n)+Mt;_r&&(qe=!qe)}return qe},lt,ae;for(R=We(R),lt=0;lt<Ye.length;lt++)if(ae=We(Ye[lt]),_e(ae,R))return lt}un=Ye.map(function(R){return[R]});for(var Gt=0;Gt<Vt.length;Gt++){var an=Xt(Vt[Gt]);an!==void 0?un[an].push(Vt[Gt]):t.verbose&&console.warn("Multipolygon",At+"/"+ht,"contains an inner ring with no containing outer")}var vn=[];if(vn=Mn.compact(un.map(function(R){var _e=Mn.compact(R.map(function(We){if(We.length<4){t.verbose&&console.warn("Multipolygon",At+"/"+ht,"contains a ring with less than four nodes");return}return Mn.compact(We.map(function(De){return[+De.lon,+De.lat]}))}));if(_e.length==0){t.verbose&&console.warn("Multipolygon",At+"/"+ht,"contains an empty ring cluster");return}return _e})),vn.length==0)return t.verbose&&console.warn("Multipolygon",At+"/"+ht,"contains no coordinates"),!1;var Se="MultiPolygon";vn.length===1&&(Se="Polygon",vn=vn[0]);var F={type:"Feature",id:it.type+"/"+ht,properties:{type:it.type,id:ht,tags:it.tags||{},relations:Z[it.type][it.id]||[],meta:z(it)},geometry:{type:Se,coordinates:vn}};return vt&&(t.verbose&&console.warn("Multipolygon",At+"/"+ht,"is tainted"),F.properties.tainted=!0),F};var ze=Ge;if(!Mn.isArray(I[Y].members)){t.verbose&&console.warn("Multipolygon",I[Y].type+"/"+I[Y].id,"ignored because it has no members");continue}for(var re=0,G=0;G<I[Y].members.length;G++)I[Y].members[G].role=="outer"?re++:t.verbose&&I[Y].members[G].role!="inner"&&console.warn("Multipolygon",I[Y].type+"/"+I[Y].id,"member",I[Y].members[G].type+"/"+I[Y].members[G].ref,'ignored because it has an invalid role: "'+I[Y].members[G].role+'"');if(I[Y].members.forEach(function(it){V[it.ref]&&(it.role==="outer"&&!E(V[it.ref].tags,I[Y].tags)&&(V[it.ref].is_skippablerelationmember=!0),it.role==="inner"&&!E(V[it.ref].tags)&&(V[it.ref].is_skippablerelationmember=!0))}),re==0){t.verbose&&console.warn("Multipolygon relation",I[Y].type+"/"+I[Y].id,"ignored because it has no outer ways");continue}var ne=!1;re==1&&!E(I[Y].tags,{type:!0})&&(ne=!0);var be=null;if(!ne)be=Ge(I[Y],I[Y]);else{var ge=I[Y].members.filter(function(it){return it.role==="outer"})[0];if(ge=V[ge.ref],ge===void 0){t.verbose&&console.warn("Multipolygon relation",I[Y].type+"/"+I[Y].id,"ignored because outer way",ge.type+"/"+ge.ref,"is missing");continue}ge.is_skippablerelationmember=!0,be=Ge(ge,I[Y])}if(be===!1){t.verbose&&console.warn("Multipolygon relation",I[Y].type+"/"+I[Y].id,"ignored because it has invalid geometry");continue}i?i(Rp(be)):le.push(be)}}for(var Y=0;Y<w.length;Y++)if(V[w[Y].id]===w[Y]){if(!Mn.isArray(w[Y].nodes)){t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"ignored because it has no nodes");continue}if(!w[Y].is_skippablerelationmember){typeof w[Y].id!="number"&&(w[Y].id=+w[Y].id.replace("_fullGeom","")),w[Y].tainted=!1,w[Y].hidden=!1;var Ee=new Array;for(G=0;G<w[Y].nodes.length;G++)typeof w[Y].nodes[G]=="object"?Ee.push([+w[Y].nodes[G].lon,+w[Y].nodes[G].lat]):(t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"is tainted by an invalid node"),w[Y].tainted=!0);if(Ee.length<=1){t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"ignored because it contains too few nodes");continue}var we="LineString";typeof w[Y].nodes[0]<"u"&&typeof w[Y].nodes[w[Y].nodes.length-1]<"u"&&w[Y].nodes[0].id===w[Y].nodes[w[Y].nodes.length-1].id&&(typeof w[Y].tags<"u"&&l(w[Y].tags)||w[Y].__is_bounds_placeholder)&&(we="Polygon",Ee=[Ee]);var be={type:"Feature",id:w[Y].type+"/"+w[Y].id,properties:{type:w[Y].type,id:w[Y].id,tags:w[Y].tags||{},relations:Z.way[w[Y].id]||[],meta:z(w[Y])},geometry:{type:we,coordinates:Ee}};w[Y].tainted&&(t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"is tainted"),be.properties.tainted=!0),w[Y].__is_bounds_placeholder&&(be.properties.geometry="bounds"),i?i(Rp(be)):we=="LineString"?te.push(be):le.push(be)}}return i?!0:(ye={type:"FeatureCollection",features:[]},ye.features=ye.features.concat(le),ye.features=ye.features.concat(te),ye.features=ye.features.concat(xe),t.flatProperties&&ye.features.forEach(function(Pe){Pe.properties=Mn.merge(Pe.properties.meta,Pe.properties.tags,{id:Pe.properties.type+"/"+Pe.properties.id})}),ye=Rp(ye),ye)}function l(b){var w=t.polygonFeatures;if(typeof w=="function")return w(b);if(b.area==="no")return!1;for(var I in b){var E=b[I],z=w[I];if(!(typeof z>"u")&&E!=="no"&&(z===!0||z.included_values&&z.included_values[E]===!0||z.excluded_values&&z.excluded_values[E]!==!0))return!0}return!1}};function A0(e){for(var t=function(E){return E[0]},i=function(E){return E[E.length-1]},a=function(E,z){return E!==void 0&&z!==void 0&&E.id===z.id},c=[],f,y,l,b,w,I;e.length;)for(f=e.pop().nodes.slice(),c.push(f);e.length&&!a(t(f),i(f));){for(y=t(f),l=i(f),b=0;b<e.length;b++)if(I=e[b].nodes,a(l,t(I))){w=f.push,I=I.slice(1);break}else if(a(l,i(I))){w=f.push,I=I.slice(0,-1).reverse();break}else if(a(y,i(I))){w=f.unshift,I=I.slice(0,-1);break}else if(a(y,t(I))){w=f.unshift,I=I.slice(1).reverse();break}else I=w=null;if(!I)break;e.splice(b,1),w.apply(f,I)}return c}og.toGeojson=og;var gF=og;const yF=yd(gF),P0={type:"FeatureCollection",features:[]},KI=()=>{const[e,t]=wt.useState(!1),i=wt.useCallback(async(y,l,b)=>{var Y,pe;if(e||(console.log(b),b<16))return P0;t(!0);let w=300;b>17&&(w=200),b>18&&(w=100),b>19&&(w=50),console.log("overpass: loading...");let I="[out:json]";I+=`[timeout:25];
`,I+='nwr["building"]',I+=`(around:${w},${y},${l});
`,I+="out meta geom;",console.log(I);const E=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(I)}`,{});if(E.status!==200)return t(!1),P0;const z=await E.json();console.log("overpass json elements: ",z.elements);const O=yF(z);console.log("overpass osmtogeojson raw: ",O);for await(const G of O.features){if(!G.properties)continue;G.id=G.properties.id.split("/")[1];const V=(Y=z.elements.filter(oe=>G.id?typeof G.id=="number"?oe.id===G.id:oe.id===parseInt(G.id):!1))==null?void 0:Y[0];if(V&&(G.properties.tags=V.tags,G.properties.nodes=V.nodes),G.geometry.type==="Polygon"){const oe=nF(G.geometry.coordinates);var Q=aF(oe);G.properties.center=Q.geometry.coordinates}G.geometry.type==="Point"&&(G.properties.center=G.geometry.coordinates);const N=G.properties.uid;if(N){let oe=localStorage.getItem(N+"-icon");if(oe===null){const W=await Es.getUser(N);(pe=W.img)!=null&&pe.href?(oe=W.img.href,localStorage.setItem(N+"-icon",W.img.href)):localStorage.setItem(N+"-icon","")}G.properties.userIconHref=oe||""}}return console.log("overpass osmtogeojson converted: ",O),console.log("overpass: loaded."),t(!1),O},[]),[a,c]=wt.useState(!1),f=wt.useCallback(async y=>{console.log("overpass: loading...",y),c(!0);const l=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(l);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(l)}`,{});if(b.status!==200){c(!1);return}const w=await b.json();console.log("overpass json parent elements: ",w.elements);const I=250,E=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${I});
      out;
      `;console.log(E);const z=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(E)}`,{});if(z.status!==200){c(!1);return}const O=await z.json();console.log("overpass json child elements: ",O.elements);const Q=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${I});
      out;
      `;console.log(Q);const Y=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(Q)}`,{});if(Y.status!==200){c(!1);return}const pe=await Y.json();return console.log("overpass json neighbour elements: ",pe.elements),c(!1),[...w.elements,...O.elements,...pe.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:f,loadingOverpass:e,loadingOverpassAdmin:a}},vF=()=>gt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[gt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),gt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),gt.jsxs("datalist",{id:"source-list",children:[gt.jsx("option",{value:"survey"}),gt.jsx("option",{value:"local knowledge"}),gt.jsx("option",{value:"extrapolation"}),gt.jsx("option",{value:"estimation from existing data"})]})]}),M0={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},_F=({feature:e,onCancel:t,onSubmit:i})=>{var ye,xe,be,te;const{detectCountry:a,loadingCountry:c}=lF(),{fetchOverpassAdmin:f,loadingOverpassAdmin:y}=KI(),l=JSON.parse((ye=e.properties)==null?void 0:ye.center),[b,w]=wt.useState(void 0),[I,E]=wt.useState(),[z,O]=wt.useState(e),[Q,Y]=wt.useState(!1),[pe,G]=wt.useState(!1),[V,N]=wt.useState(!1),[oe,W]=wt.useState(),[B,S]=wt.useState();wt.useEffect(()=>{Y(Es.isLoggedIn())},[]),wt.useEffect(()=>{(async()=>{var re,ne;const le=await a(l[0],l[1]);if(w(le),(re=le==null?void 0:le.properties)!=null&&re.ISO_A3&&EE[le.properties.ISO_A3]){const ge=EE[le.properties.ISO_A3];E(ge);const Ee=ge.defaultComment+" "+((ne=e.properties)==null?void 0:ne.id);S(Ee)}})()},[e]),wt.useEffect(()=>{console.log(z.properties)},[z]);const M=wt.useCallback(async()=>{const le=await OC.openReverseGeocoder([l[0],l[1]]);O(re=>{const ne={properties:{"addr:province":le.prefecture,"addr:city":le.city,...re.properties}};return{...re,...ne}})},[]),Z=wt.useCallback(async()=>{if(!z.properties)return;z.properties.nodes;const le=await f(JSON.parse(z.properties.nodes));console.log("onOverpassReverseGeocode",le),W(le)},[z]),X=wt.useCallback(async le=>{var ze,Pe,He;N(!0),le.preventDefault();const re=new FormData(le.currentTarget),ne=JSON.parse((ze=e.properties)==null?void 0:ze.tags);re.forEach((Ge,it)=>{typeof Ge=="string"&&Ge.length>0&&it!=="comment"&&it!=="source"&&(ne[it]=Ge)});const ge={type:"way",id:e.id,version:(Pe=e.properties)==null?void 0:Pe.version,tags:ne,nodes:JSON.parse((He=e.properties)==null?void 0:He.nodes)};console.info(JSON.stringify(ge,null,2));const Ee={create:[],modify:[ge],delete:[]},we=re.get("comment");we&&(M0.comment=we.toString());const Ne=re.get("source");Ne&&(M0.source=Ne.toString()),await Es.uploadChangeset(M0,Ee),N(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),J=wt.useCallback(()=>{G(!0)},[]);return z.properties?gt.jsxs("div",{children:[gt.jsxs("div",{children:["OSM:"," ",gt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+z.properties.id,target:"_blank",children:z.properties.id})," | ",gt.jsx(zC,{feature:z}),I&&gt.jsxs("span",{children:[" | ","Address:"," ",gt.jsx(uF,{feature:z,fields:I})]})]}),c?gt.jsx(ia,{icon:Dv,spin:!0}):gt.jsx(gt.Fragment,{children:I?gt.jsxs("form",{onSubmit:X,children:[gt.jsx("div",{className:"flex flex-wrap",children:gt.jsx(I0,{feature:z,fieldOption:I.postcodeField,onChange:J})}),gt.jsx("div",{className:"flex flex-wrap",children:I.mainFields.map(le=>gt.jsx(I0,{feature:z,fieldOption:le,onChange:J,suggestList:oe},le.key))}),gt.jsx("div",{className:"flex flex-wrap",children:I.detailFields.map(le=>gt.jsx(I0,{feature:z,fieldOption:le,onChange:J},le.key))}),gt.jsxs("div",{className:"flex flex-wrap",children:[gt.jsx(vF,{}),gt.jsx(cF,{defaultValue:B})]}),gt.jsx("div",{className:"flex flex-wrap",children:gt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[gt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((xe=b==null?void 0:b.properties)==null?void 0:xe.ISO_A3)==="JPN"&&gt.jsx("button",{type:"button",onClick:M,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),gt.jsxs("button",{type:"button",disabled:y,onClick:Z,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",y&&gt.jsx(ia,{icon:Dv,spin:!0})]}),gt.jsx("button",{disabled:!Q||V||!pe,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!Q&&gt.jsxs(gt.Fragment,{children:[gt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),gt.jsx(kC,{})]})]})})]}):gt.jsx("div",{className:"flex flex-wrap",children:gt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[gt.jsxs("div",{className:"py-2",children:[gt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(be=b==null?void 0:b.properties)==null?void 0:be.NAME," (ISO code:",(te=b==null?void 0:b.properties)==null?void 0:te.ISO_A3,") does not support yet."]}),gt.jsx("p",{children:gt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),gt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function xF(e,t){const[i,a]=wt.useState(e);return wt.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const wF={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},bF={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function EF(){const e=wt.useRef(null),[t,i]=wt.useState(),a=xF(t,2500),c=wt.useRef(null),[f,y]=wt.useState({type:"FeatureCollection",features:[]}),[l,b]=wt.useState("auto"),[w,I]=wt.useState(),[E,z]=wt.useState([]),{fetchOverpassBuildings:O,loadingOverpass:Q}=KI();wt.useEffect(()=>{setTimeout(()=>{var S;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(S=c.current)==null||S.trigger())},500)},[]);const Y=wt.useCallback(S=>{const M=S.target.getCenter(),Z=S.target.getZoom();i({zoom:Z,latitude:M.lat,longitude:M.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),pe=wt.useCallback(S=>{i(S.viewState)},[]),G=wt.useCallback(S=>{i(S.viewState)},[]);wt.useEffect(()=>{(async()=>{if(!a)return;const S=a,M=await O(S.latitude,S.longitude,S.zoom);y(M)})()},[a]);const V=wt.useCallback(S=>{var ye;b("pointer");const{features:M,point:{x:Z,y:X}}=S,J=M&&M[0];J?((ye=e.current)==null||ye.setFeatureState({source:"buildings-source",id:J.id},{hover:!0}),I({feature:J,x:Z,y:X})):I(void 0)},[]),N=wt.useCallback(S=>{var M;b("auto"),(M=e.current)==null||M.querySourceFeatures("buildings-source").map(Z=>{var X;(X=e.current)==null||X.setFeatureState({source:"buildings-source",id:Z.id},{hover:!1})}),I(void 0)},[]),oe=wt.useCallback(S=>{var Z;W();const M=S.features&&S.features[0];M&&((Z=e.current)==null||Z.setFeatureState({source:"buildings-source",id:M.id},{select:!0}),z([M]))},[]),W=wt.useCallback(()=>{var S;(S=e.current)==null||S.querySourceFeatures("buildings-source").map(M=>{var Z;(Z=e.current)==null||Z.setFeatureState({source:"buildings-source",id:M.id},{select:!1})}),z([])},[]),B=wt.useMemo(()=>{let S=25;return t&&(S=t.zoom<18?20:t.zoom<19?25:35),f.features.map((M,Z)=>!M.properties||!M.properties.center?null:gt.jsx(O3,{style:{cursor:"pointer"},longitude:M.properties.center[0],latitude:M.properties.center[1],anchor:"center",children:gt.jsx(x5,{feature:M,size:S})},`marker-${Z}`))},[f,t]);return gt.jsxs("div",{children:[gt.jsx(e5,{}),gt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:gt.jsx(E5,{viewState:t})}),gt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[E.length>0&&gt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:gt.jsx("div",{style:{padding:"10px"},children:E.map(S=>gt.jsx(_F,{feature:S,onCancel:W,onSubmit:W},S.id))})}),gt.jsxs(h1,{ref:e,...t,onMove:pe,onMoveEnd:G,onLoad:Y,interactiveLayerIds:["buildings-layer-fill"],onClick:oe,onMouseEnter:V,onMouseLeave:N,dragRotate:!1,boxZoom:!1,hash:!0,cursor:l,mapLib:ZT,style:{width:"100%",height:"100%"},mapStyle:wF,children:[gt.jsx(W3,{id:"buildings-source",type:"geojson",data:f,children:gt.jsx(K3,{...bF})}),gt.jsx(U3,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),gt.jsx(B3,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),gt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?gt.jsx(ia,{size:"2x",icon:Yz}):Q?gt.jsx(ia,{size:"2x",icon:Dv,spin:!0}):gt.jsx(ia,{size:"2x",icon:Jz})}),B,w&&gt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:w.x+5,top:w.y+5},children:[gt.jsx(zC,{feature:w.feature}),gt.jsx("br",{}),gt.jsx(w5,{feature:w.feature}),gt.jsx(t5,{feature:w.feature})]})]})]})]})}var YI={},Og={};Og.byteLength=CF;Og.toByteArray=AF;Og.fromByteArray=kF;var ea=[],qo=[],SF=typeof Uint8Array<"u"?Uint8Array:Array,k0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var zc=0,TF=k0.length;zc<TF;++zc)ea[zc]=k0[zc],qo[k0.charCodeAt(zc)]=zc;qo["-".charCodeAt(0)]=62;qo["_".charCodeAt(0)]=63;function JI(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function CF(e){var t=JI(e),i=t[0],a=t[1];return(i+a)*3/4-a}function IF(e,t,i){return(t+i)*3/4-i}function AF(e){var t,i=JI(e),a=i[0],c=i[1],f=new SF(IF(e,a,c)),y=0,l=c>0?a-4:a,b;for(b=0;b<l;b+=4)t=qo[e.charCodeAt(b)]<<18|qo[e.charCodeAt(b+1)]<<12|qo[e.charCodeAt(b+2)]<<6|qo[e.charCodeAt(b+3)],f[y++]=t>>16&255,f[y++]=t>>8&255,f[y++]=t&255;return c===2&&(t=qo[e.charCodeAt(b)]<<2|qo[e.charCodeAt(b+1)]>>4,f[y++]=t&255),c===1&&(t=qo[e.charCodeAt(b)]<<10|qo[e.charCodeAt(b+1)]<<4|qo[e.charCodeAt(b+2)]>>2,f[y++]=t>>8&255,f[y++]=t&255),f}function PF(e){return ea[e>>18&63]+ea[e>>12&63]+ea[e>>6&63]+ea[e&63]}function MF(e,t,i){for(var a,c=[],f=t;f<i;f+=3)a=(e[f]<<16&16711680)+(e[f+1]<<8&65280)+(e[f+2]&255),c.push(PF(a));return c.join("")}function kF(e){for(var t,i=e.length,a=i%3,c=[],f=16383,y=0,l=i-a;y<l;y+=f)c.push(MF(e,y,y+f>l?l:y+f));return a===1?(t=e[i-1],c.push(ea[t>>2]+ea[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(ea[t>>10]+ea[t>>4&63]+ea[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Og,i=Mg,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=V,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,l.TYPED_ARRAY_SUPPORT=f(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const ae=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(ae,L),ae.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function y(ae){if(ae>c)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const L=new Uint8Array(ae);return Object.setPrototypeOf(L,l.prototype),L}function l(ae,L,D){if(typeof ae=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(ae)}return b(ae,L,D)}l.poolSize=8192;function b(ae,L,D){if(typeof ae=="string")return z(ae,L);if(ArrayBuffer.isView(ae))return Q(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(R(ae,ArrayBuffer)||ae&&R(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(R(ae,SharedArrayBuffer)||ae&&R(ae.buffer,SharedArrayBuffer)))return Y(ae,L,D);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ue=ae.valueOf&&ae.valueOf();if(ue!=null&&ue!==ae)return l.from(ue,L,D);const Oe=pe(ae);if(Oe)return Oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return l.from(ae[Symbol.toPrimitive]("string"),L,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}l.from=function(ae,L,D){return b(ae,L,D)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function w(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function I(ae,L,D){return w(ae),ae<=0?y(ae):L!==void 0?typeof D=="string"?y(ae).fill(L,D):y(ae).fill(L):y(ae)}l.alloc=function(ae,L,D){return I(ae,L,D)};function E(ae){return w(ae),y(ae<0?0:G(ae)|0)}l.allocUnsafe=function(ae){return E(ae)},l.allocUnsafeSlow=function(ae){return E(ae)};function z(ae,L){if((typeof L!="string"||L==="")&&(L="utf8"),!l.isEncoding(L))throw new TypeError("Unknown encoding: "+L);const D=N(ae,L)|0;let ue=y(D);const Oe=ue.write(ae,L);return Oe!==D&&(ue=ue.slice(0,Oe)),ue}function O(ae){const L=ae.length<0?0:G(ae.length)|0,D=y(L);for(let ue=0;ue<L;ue+=1)D[ue]=ae[ue]&255;return D}function Q(ae){if(R(ae,Uint8Array)){const L=new Uint8Array(ae);return Y(L.buffer,L.byteOffset,L.byteLength)}return O(ae)}function Y(ae,L,D){if(L<0||ae.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<L+(D||0))throw new RangeError('"length" is outside of buffer bounds');let ue;return L===void 0&&D===void 0?ue=new Uint8Array(ae):D===void 0?ue=new Uint8Array(ae,L):ue=new Uint8Array(ae,L,D),Object.setPrototypeOf(ue,l.prototype),ue}function pe(ae){if(l.isBuffer(ae)){const L=G(ae.length)|0,D=y(L);return D.length===0||ae.copy(D,0,0,L),D}if(ae.length!==void 0)return typeof ae.length!="number"||_e(ae.length)?y(0):O(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return O(ae.data)}function G(ae){if(ae>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return ae|0}function V(ae){return+ae!=ae&&(ae=0),l.alloc(+ae)}l.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==l.prototype},l.compare=function(L,D){if(R(L,Uint8Array)&&(L=l.from(L,L.offset,L.byteLength)),R(D,Uint8Array)&&(D=l.from(D,D.offset,D.byteLength)),!l.isBuffer(L)||!l.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===D)return 0;let ue=L.length,Oe=D.length;for(let qe=0,st=Math.min(ue,Oe);qe<st;++qe)if(L[qe]!==D[qe]){ue=L[qe],Oe=D[qe];break}return ue<Oe?-1:Oe<ue?1:0},l.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(L,D){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return l.alloc(0);let ue;if(D===void 0)for(D=0,ue=0;ue<L.length;++ue)D+=L[ue].length;const Oe=l.allocUnsafe(D);let qe=0;for(ue=0;ue<L.length;++ue){let st=L[ue];if(R(st,Uint8Array))qe+st.length>Oe.length?(l.isBuffer(st)||(st=l.from(st)),st.copy(Oe,qe)):Uint8Array.prototype.set.call(Oe,st,qe);else if(l.isBuffer(st))st.copy(Oe,qe);else throw new TypeError('"list" argument must be an Array of Buffers');qe+=st.length}return Oe};function N(ae,L){if(l.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||R(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const D=ae.length,ue=arguments.length>2&&arguments[2]===!0;if(!ue&&D===0)return 0;let Oe=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return Gt(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return Se(ae).length;default:if(Oe)return ue?-1:Gt(ae).length;L=(""+L).toLowerCase(),Oe=!0}}l.byteLength=N;function oe(ae,L,D){let ue=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,L>>>=0,D<=L))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return ge(this,L,D);case"utf8":case"utf-8":return be(this,L,D);case"ascii":return re(this,L,D);case"latin1":case"binary":return ne(this,L,D);case"base64":return xe(this,L,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,L,D);default:if(ue)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),ue=!0}}l.prototype._isBuffer=!0;function W(ae,L,D){const ue=ae[L];ae[L]=ae[D],ae[D]=ue}l.prototype.swap16=function(){const L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let D=0;D<L;D+=2)W(this,D,D+1);return this},l.prototype.swap32=function(){const L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let D=0;D<L;D+=4)W(this,D,D+3),W(this,D+1,D+2);return this},l.prototype.swap64=function(){const L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let D=0;D<L;D+=8)W(this,D,D+7),W(this,D+1,D+6),W(this,D+2,D+5),W(this,D+3,D+4);return this},l.prototype.toString=function(){const L=this.length;return L===0?"":arguments.length===0?be(this,0,L):oe.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(L){if(!l.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:l.compare(this,L)===0},l.prototype.inspect=function(){let L="";const D=e.INSPECT_MAX_BYTES;return L=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(L+=" ... "),"<Buffer "+L+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(L,D,ue,Oe,qe){if(R(L,Uint8Array)&&(L=l.from(L,L.offset,L.byteLength)),!l.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(D===void 0&&(D=0),ue===void 0&&(ue=L?L.length:0),Oe===void 0&&(Oe=0),qe===void 0&&(qe=this.length),D<0||ue>L.length||Oe<0||qe>this.length)throw new RangeError("out of range index");if(Oe>=qe&&D>=ue)return 0;if(Oe>=qe)return-1;if(D>=ue)return 1;if(D>>>=0,ue>>>=0,Oe>>>=0,qe>>>=0,this===L)return 0;let st=qe-Oe,en=ue-D;const Mt=Math.min(st,en),_n=this.slice(Oe,qe),An=L.slice(D,ue);for(let xn=0;xn<Mt;++xn)if(_n[xn]!==An[xn]){st=_n[xn],en=An[xn];break}return st<en?-1:en<st?1:0};function B(ae,L,D,ue,Oe){if(ae.length===0)return-1;if(typeof D=="string"?(ue=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,_e(D)&&(D=Oe?0:ae.length-1),D<0&&(D=ae.length+D),D>=ae.length){if(Oe)return-1;D=ae.length-1}else if(D<0)if(Oe)D=0;else return-1;if(typeof L=="string"&&(L=l.from(L,ue)),l.isBuffer(L))return L.length===0?-1:S(ae,L,D,ue,Oe);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?Oe?Uint8Array.prototype.indexOf.call(ae,L,D):Uint8Array.prototype.lastIndexOf.call(ae,L,D):S(ae,[L],D,ue,Oe);throw new TypeError("val must be string, number or Buffer")}function S(ae,L,D,ue,Oe){let qe=1,st=ae.length,en=L.length;if(ue!==void 0&&(ue=String(ue).toLowerCase(),ue==="ucs2"||ue==="ucs-2"||ue==="utf16le"||ue==="utf-16le")){if(ae.length<2||L.length<2)return-1;qe=2,st/=2,en/=2,D/=2}function Mt(An,xn){return qe===1?An[xn]:An.readUInt16BE(xn*qe)}let _n;if(Oe){let An=-1;for(_n=D;_n<st;_n++)if(Mt(ae,_n)===Mt(L,An===-1?0:_n-An)){if(An===-1&&(An=_n),_n-An+1===en)return An*qe}else An!==-1&&(_n-=_n-An),An=-1}else for(D+en>st&&(D=st-en),_n=D;_n>=0;_n--){let An=!0;for(let xn=0;xn<en;xn++)if(Mt(ae,_n+xn)!==Mt(L,xn)){An=!1;break}if(An)return _n}return-1}l.prototype.includes=function(L,D,ue){return this.indexOf(L,D,ue)!==-1},l.prototype.indexOf=function(L,D,ue){return B(this,L,D,ue,!0)},l.prototype.lastIndexOf=function(L,D,ue){return B(this,L,D,ue,!1)};function M(ae,L,D,ue){D=Number(D)||0;const Oe=ae.length-D;ue?(ue=Number(ue),ue>Oe&&(ue=Oe)):ue=Oe;const qe=L.length;ue>qe/2&&(ue=qe/2);let st;for(st=0;st<ue;++st){const en=parseInt(L.substr(st*2,2),16);if(_e(en))return st;ae[D+st]=en}return st}function Z(ae,L,D,ue){return F(Gt(L,ae.length-D),ae,D,ue)}function X(ae,L,D,ue){return F(an(L),ae,D,ue)}function J(ae,L,D,ue){return F(Se(L),ae,D,ue)}function ye(ae,L,D,ue){return F(vn(L,ae.length-D),ae,D,ue)}l.prototype.write=function(L,D,ue,Oe){if(D===void 0)Oe="utf8",ue=this.length,D=0;else if(ue===void 0&&typeof D=="string")Oe=D,ue=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(ue)?(ue=ue>>>0,Oe===void 0&&(Oe="utf8")):(Oe=ue,ue=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const qe=this.length-D;if((ue===void 0||ue>qe)&&(ue=qe),L.length>0&&(ue<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");let st=!1;for(;;)switch(Oe){case"hex":return M(this,L,D,ue);case"utf8":case"utf-8":return Z(this,L,D,ue);case"ascii":case"latin1":case"binary":return X(this,L,D,ue);case"base64":return J(this,L,D,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,L,D,ue);default:if(st)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),st=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function xe(ae,L,D){return L===0&&D===ae.length?t.fromByteArray(ae):t.fromByteArray(ae.slice(L,D))}function be(ae,L,D){D=Math.min(ae.length,D);const ue=[];let Oe=L;for(;Oe<D;){const qe=ae[Oe];let st=null,en=qe>239?4:qe>223?3:qe>191?2:1;if(Oe+en<=D){let Mt,_n,An,xn;switch(en){case 1:qe<128&&(st=qe);break;case 2:Mt=ae[Oe+1],(Mt&192)===128&&(xn=(qe&31)<<6|Mt&63,xn>127&&(st=xn));break;case 3:Mt=ae[Oe+1],_n=ae[Oe+2],(Mt&192)===128&&(_n&192)===128&&(xn=(qe&15)<<12|(Mt&63)<<6|_n&63,xn>2047&&(xn<55296||xn>57343)&&(st=xn));break;case 4:Mt=ae[Oe+1],_n=ae[Oe+2],An=ae[Oe+3],(Mt&192)===128&&(_n&192)===128&&(An&192)===128&&(xn=(qe&15)<<18|(Mt&63)<<12|(_n&63)<<6|An&63,xn>65535&&xn<1114112&&(st=xn))}}st===null?(st=65533,en=1):st>65535&&(st-=65536,ue.push(st>>>10&1023|55296),st=56320|st&1023),ue.push(st),Oe+=en}return le(ue)}const te=4096;function le(ae){const L=ae.length;if(L<=te)return String.fromCharCode.apply(String,ae);let D="",ue=0;for(;ue<L;)D+=String.fromCharCode.apply(String,ae.slice(ue,ue+=te));return D}function re(ae,L,D){let ue="";D=Math.min(ae.length,D);for(let Oe=L;Oe<D;++Oe)ue+=String.fromCharCode(ae[Oe]&127);return ue}function ne(ae,L,D){let ue="";D=Math.min(ae.length,D);for(let Oe=L;Oe<D;++Oe)ue+=String.fromCharCode(ae[Oe]);return ue}function ge(ae,L,D){const ue=ae.length;(!L||L<0)&&(L=0),(!D||D<0||D>ue)&&(D=ue);let Oe="";for(let qe=L;qe<D;++qe)Oe+=We[ae[qe]];return Oe}function Ee(ae,L,D){const ue=ae.slice(L,D);let Oe="";for(let qe=0;qe<ue.length-1;qe+=2)Oe+=String.fromCharCode(ue[qe]+ue[qe+1]*256);return Oe}l.prototype.slice=function(L,D){const ue=this.length;L=~~L,D=D===void 0?ue:~~D,L<0?(L+=ue,L<0&&(L=0)):L>ue&&(L=ue),D<0?(D+=ue,D<0&&(D=0)):D>ue&&(D=ue),D<L&&(D=L);const Oe=this.subarray(L,D);return Object.setPrototypeOf(Oe,l.prototype),Oe};function we(ae,L,D){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+L>D)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(L,D,ue){L=L>>>0,D=D>>>0,ue||we(L,D,this.length);let Oe=this[L],qe=1,st=0;for(;++st<D&&(qe*=256);)Oe+=this[L+st]*qe;return Oe},l.prototype.readUintBE=l.prototype.readUIntBE=function(L,D,ue){L=L>>>0,D=D>>>0,ue||we(L,D,this.length);let Oe=this[L+--D],qe=1;for(;D>0&&(qe*=256);)Oe+=this[L+--D]*qe;return Oe},l.prototype.readUint8=l.prototype.readUInt8=function(L,D){return L=L>>>0,D||we(L,1,this.length),this[L]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(L,D){return L=L>>>0,D||we(L,2,this.length),this[L]|this[L+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(L,D){return L=L>>>0,D||we(L,2,this.length),this[L]<<8|this[L+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(L,D){return L=L>>>0,D||we(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(L,D){return L=L>>>0,D||we(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},l.prototype.readBigUInt64LE=De(function(L){L=L>>>0,Ye(L,"offset");const D=this[L],ue=this[L+7];(D===void 0||ue===void 0)&&Vt(L,this.length-8);const Oe=D+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24,qe=this[++L]+this[++L]*2**8+this[++L]*2**16+ue*2**24;return BigInt(Oe)+(BigInt(qe)<<BigInt(32))}),l.prototype.readBigUInt64BE=De(function(L){L=L>>>0,Ye(L,"offset");const D=this[L],ue=this[L+7];(D===void 0||ue===void 0)&&Vt(L,this.length-8);const Oe=D*2**24+this[++L]*2**16+this[++L]*2**8+this[++L],qe=this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+ue;return(BigInt(Oe)<<BigInt(32))+BigInt(qe)}),l.prototype.readIntLE=function(L,D,ue){L=L>>>0,D=D>>>0,ue||we(L,D,this.length);let Oe=this[L],qe=1,st=0;for(;++st<D&&(qe*=256);)Oe+=this[L+st]*qe;return qe*=128,Oe>=qe&&(Oe-=Math.pow(2,8*D)),Oe},l.prototype.readIntBE=function(L,D,ue){L=L>>>0,D=D>>>0,ue||we(L,D,this.length);let Oe=D,qe=1,st=this[L+--Oe];for(;Oe>0&&(qe*=256);)st+=this[L+--Oe]*qe;return qe*=128,st>=qe&&(st-=Math.pow(2,8*D)),st},l.prototype.readInt8=function(L,D){return L=L>>>0,D||we(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},l.prototype.readInt16LE=function(L,D){L=L>>>0,D||we(L,2,this.length);const ue=this[L]|this[L+1]<<8;return ue&32768?ue|4294901760:ue},l.prototype.readInt16BE=function(L,D){L=L>>>0,D||we(L,2,this.length);const ue=this[L+1]|this[L]<<8;return ue&32768?ue|4294901760:ue},l.prototype.readInt32LE=function(L,D){return L=L>>>0,D||we(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},l.prototype.readInt32BE=function(L,D){return L=L>>>0,D||we(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},l.prototype.readBigInt64LE=De(function(L){L=L>>>0,Ye(L,"offset");const D=this[L],ue=this[L+7];(D===void 0||ue===void 0)&&Vt(L,this.length-8);const Oe=this[L+4]+this[L+5]*2**8+this[L+6]*2**16+(ue<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(D+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24)}),l.prototype.readBigInt64BE=De(function(L){L=L>>>0,Ye(L,"offset");const D=this[L],ue=this[L+7];(D===void 0||ue===void 0)&&Vt(L,this.length-8);const Oe=(D<<24)+this[++L]*2**16+this[++L]*2**8+this[++L];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+ue)}),l.prototype.readFloatLE=function(L,D){return L=L>>>0,D||we(L,4,this.length),i.read(this,L,!0,23,4)},l.prototype.readFloatBE=function(L,D){return L=L>>>0,D||we(L,4,this.length),i.read(this,L,!1,23,4)},l.prototype.readDoubleLE=function(L,D){return L=L>>>0,D||we(L,8,this.length),i.read(this,L,!0,52,8)},l.prototype.readDoubleBE=function(L,D){return L=L>>>0,D||we(L,8,this.length),i.read(this,L,!1,52,8)};function Ne(ae,L,D,ue,Oe,qe){if(!l.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>Oe||L<qe)throw new RangeError('"value" argument is out of bounds');if(D+ue>ae.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(L,D,ue,Oe){if(L=+L,D=D>>>0,ue=ue>>>0,!Oe){const en=Math.pow(2,8*ue)-1;Ne(this,L,D,ue,en,0)}let qe=1,st=0;for(this[D]=L&255;++st<ue&&(qe*=256);)this[D+st]=L/qe&255;return D+ue},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(L,D,ue,Oe){if(L=+L,D=D>>>0,ue=ue>>>0,!Oe){const en=Math.pow(2,8*ue)-1;Ne(this,L,D,ue,en,0)}let qe=ue-1,st=1;for(this[D+qe]=L&255;--qe>=0&&(st*=256);)this[D+qe]=L/st&255;return D+ue},l.prototype.writeUint8=l.prototype.writeUInt8=function(L,D,ue){return L=+L,D=D>>>0,ue||Ne(this,L,D,1,255,0),this[D]=L&255,D+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(L,D,ue){return L=+L,D=D>>>0,ue||Ne(this,L,D,2,65535,0),this[D]=L&255,this[D+1]=L>>>8,D+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(L,D,ue){return L=+L,D=D>>>0,ue||Ne(this,L,D,2,65535,0),this[D]=L>>>8,this[D+1]=L&255,D+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(L,D,ue){return L=+L,D=D>>>0,ue||Ne(this,L,D,4,4294967295,0),this[D+3]=L>>>24,this[D+2]=L>>>16,this[D+1]=L>>>8,this[D]=L&255,D+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(L,D,ue){return L=+L,D=D>>>0,ue||Ne(this,L,D,4,4294967295,0),this[D]=L>>>24,this[D+1]=L>>>16,this[D+2]=L>>>8,this[D+3]=L&255,D+4};function ze(ae,L,D,ue,Oe){bt(L,ue,Oe,ae,D,7);let qe=Number(L&BigInt(4294967295));ae[D++]=qe,qe=qe>>8,ae[D++]=qe,qe=qe>>8,ae[D++]=qe,qe=qe>>8,ae[D++]=qe;let st=Number(L>>BigInt(32)&BigInt(4294967295));return ae[D++]=st,st=st>>8,ae[D++]=st,st=st>>8,ae[D++]=st,st=st>>8,ae[D++]=st,D}function Pe(ae,L,D,ue,Oe){bt(L,ue,Oe,ae,D,7);let qe=Number(L&BigInt(4294967295));ae[D+7]=qe,qe=qe>>8,ae[D+6]=qe,qe=qe>>8,ae[D+5]=qe,qe=qe>>8,ae[D+4]=qe;let st=Number(L>>BigInt(32)&BigInt(4294967295));return ae[D+3]=st,st=st>>8,ae[D+2]=st,st=st>>8,ae[D+1]=st,st=st>>8,ae[D]=st,D+8}l.prototype.writeBigUInt64LE=De(function(L,D=0){return ze(this,L,D,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=De(function(L,D=0){return Pe(this,L,D,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(L,D,ue,Oe){if(L=+L,D=D>>>0,!Oe){const Mt=Math.pow(2,8*ue-1);Ne(this,L,D,ue,Mt-1,-Mt)}let qe=0,st=1,en=0;for(this[D]=L&255;++qe<ue&&(st*=256);)L<0&&en===0&&this[D+qe-1]!==0&&(en=1),this[D+qe]=(L/st>>0)-en&255;return D+ue},l.prototype.writeIntBE=function(L,D,ue,Oe){if(L=+L,D=D>>>0,!Oe){const Mt=Math.pow(2,8*ue-1);Ne(this,L,D,ue,Mt-1,-Mt)}let qe=ue-1,st=1,en=0;for(this[D+qe]=L&255;--qe>=0&&(st*=256);)L<0&&en===0&&this[D+qe+1]!==0&&(en=1),this[D+qe]=(L/st>>0)-en&255;return D+ue},l.prototype.writeInt8=function(L,D,ue){return L=+L,D=D>>>0,ue||Ne(this,L,D,1,127,-128),L<0&&(L=255+L+1),this[D]=L&255,D+1},l.prototype.writeInt16LE=function(L,D,ue){return L=+L,D=D>>>0,ue||Ne(this,L,D,2,32767,-32768),this[D]=L&255,this[D+1]=L>>>8,D+2},l.prototype.writeInt16BE=function(L,D,ue){return L=+L,D=D>>>0,ue||Ne(this,L,D,2,32767,-32768),this[D]=L>>>8,this[D+1]=L&255,D+2},l.prototype.writeInt32LE=function(L,D,ue){return L=+L,D=D>>>0,ue||Ne(this,L,D,4,2147483647,-2147483648),this[D]=L&255,this[D+1]=L>>>8,this[D+2]=L>>>16,this[D+3]=L>>>24,D+4},l.prototype.writeInt32BE=function(L,D,ue){return L=+L,D=D>>>0,ue||Ne(this,L,D,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[D]=L>>>24,this[D+1]=L>>>16,this[D+2]=L>>>8,this[D+3]=L&255,D+4},l.prototype.writeBigInt64LE=De(function(L,D=0){return ze(this,L,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=De(function(L,D=0){return Pe(this,L,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function He(ae,L,D,ue,Oe,qe){if(D+ue>ae.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function Ge(ae,L,D,ue,Oe){return L=+L,D=D>>>0,Oe||He(ae,L,D,4),i.write(ae,L,D,ue,23,4),D+4}l.prototype.writeFloatLE=function(L,D,ue){return Ge(this,L,D,!0,ue)},l.prototype.writeFloatBE=function(L,D,ue){return Ge(this,L,D,!1,ue)};function it(ae,L,D,ue,Oe){return L=+L,D=D>>>0,Oe||He(ae,L,D,8),i.write(ae,L,D,ue,52,8),D+8}l.prototype.writeDoubleLE=function(L,D,ue){return it(this,L,D,!0,ue)},l.prototype.writeDoubleBE=function(L,D,ue){return it(this,L,D,!1,ue)},l.prototype.copy=function(L,D,ue,Oe){if(!l.isBuffer(L))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!Oe&&Oe!==0&&(Oe=this.length),D>=L.length&&(D=L.length),D||(D=0),Oe>0&&Oe<ue&&(Oe=ue),Oe===ue||L.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),L.length-D<Oe-ue&&(Oe=L.length-D+ue);const qe=Oe-ue;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(D,ue,Oe):Uint8Array.prototype.set.call(L,this.subarray(ue,Oe),D),qe},l.prototype.fill=function(L,D,ue,Oe){if(typeof L=="string"){if(typeof D=="string"?(Oe=D,D=0,ue=this.length):typeof ue=="string"&&(Oe=ue,ue=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!l.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(L.length===1){const st=L.charCodeAt(0);(Oe==="utf8"&&st<128||Oe==="latin1")&&(L=st)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(D<0||this.length<D||this.length<ue)throw new RangeError("Out of range index");if(ue<=D)return this;D=D>>>0,ue=ue===void 0?this.length:ue>>>0,L||(L=0);let qe;if(typeof L=="number")for(qe=D;qe<ue;++qe)this[qe]=L;else{const st=l.isBuffer(L)?L:l.from(L,Oe),en=st.length;if(en===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(qe=0;qe<ue-D;++qe)this[qe+D]=st[qe%en]}return this};const ut={};function vt(ae,L,D){ut[ae]=class extends D{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(ae,L){return`The "${ae}" argument must be of type number. Received type ${typeof L}`},TypeError),vt("ERR_OUT_OF_RANGE",function(ae,L,D){let ue=`The value of "${ae}" is out of range.`,Oe=D;return Number.isInteger(D)&&Math.abs(D)>2**32?Oe=At(String(D)):typeof D=="bigint"&&(Oe=String(D),(D>BigInt(2)**BigInt(32)||D<-(BigInt(2)**BigInt(32)))&&(Oe=At(Oe)),Oe+="n"),ue+=` It must be ${L}. Received ${Oe}`,ue},RangeError);function At(ae){let L="",D=ae.length;const ue=ae[0]==="-"?1:0;for(;D>=ue+4;D-=3)L=`_${ae.slice(D-3,D)}${L}`;return`${ae.slice(0,D)}${L}`}function ht(ae,L,D){Ye(L,"offset"),(ae[L]===void 0||ae[L+D]===void 0)&&Vt(L,ae.length-(D+1))}function bt(ae,L,D,ue,Oe,qe){if(ae>D||ae<L){const st=typeof L=="bigint"?"n":"";let en;throw qe>3?L===0||L===BigInt(0)?en=`>= 0${st} and < 2${st} ** ${(qe+1)*8}${st}`:en=`>= -(2${st} ** ${(qe+1)*8-1}${st}) and < 2 ** ${(qe+1)*8-1}${st}`:en=`>= ${L}${st} and <= ${D}${st}`,new ut.ERR_OUT_OF_RANGE("value",en,ae)}ht(ue,Oe,qe)}function Ye(ae,L){if(typeof ae!="number")throw new ut.ERR_INVALID_ARG_TYPE(L,"number",ae)}function Vt(ae,L,D){throw Math.floor(ae)!==ae?(Ye(ae,D),new ut.ERR_OUT_OF_RANGE(D||"offset","an integer",ae)):L<0?new ut.ERR_BUFFER_OUT_OF_BOUNDS:new ut.ERR_OUT_OF_RANGE(D||"offset",`>= ${D?1:0} and <= ${L}`,ae)}const un=/[^+/0-9A-Za-z-_]/g;function Xt(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(un,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function Gt(ae,L){L=L||1/0;let D;const ue=ae.length;let Oe=null;const qe=[];for(let st=0;st<ue;++st){if(D=ae.charCodeAt(st),D>55295&&D<57344){if(!Oe){if(D>56319){(L-=3)>-1&&qe.push(239,191,189);continue}else if(st+1===ue){(L-=3)>-1&&qe.push(239,191,189);continue}Oe=D;continue}if(D<56320){(L-=3)>-1&&qe.push(239,191,189),Oe=D;continue}D=(Oe-55296<<10|D-56320)+65536}else Oe&&(L-=3)>-1&&qe.push(239,191,189);if(Oe=null,D<128){if((L-=1)<0)break;qe.push(D)}else if(D<2048){if((L-=2)<0)break;qe.push(D>>6|192,D&63|128)}else if(D<65536){if((L-=3)<0)break;qe.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((L-=4)<0)break;qe.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return qe}function an(ae){const L=[];for(let D=0;D<ae.length;++D)L.push(ae.charCodeAt(D)&255);return L}function vn(ae,L){let D,ue,Oe;const qe=[];for(let st=0;st<ae.length&&!((L-=2)<0);++st)D=ae.charCodeAt(st),ue=D>>8,Oe=D%256,qe.push(Oe),qe.push(ue);return qe}function Se(ae){return t.toByteArray(Xt(ae))}function F(ae,L,D,ue){let Oe;for(Oe=0;Oe<ue&&!(Oe+D>=L.length||Oe>=ae.length);++Oe)L[Oe+D]=ae[Oe];return Oe}function R(ae,L){return ae instanceof L||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===L.name}function _e(ae){return ae!==ae}const We=function(){const ae="0123456789abcdef",L=new Array(256);for(let D=0;D<16;++D){const ue=D*16;for(let Oe=0;Oe<16;++Oe)L[ue+Oe]=ae[D]+ae[Oe]}return L}();function De(ae){return typeof BigInt>"u"?lt:ae}function lt(){throw new Error("BigInt not supported")}})(YI);window.Buffer=YI.Buffer;p3.render(gt.jsx(jE.StrictMode,{children:gt.jsx(EF,{})}),document.getElementById("root"));

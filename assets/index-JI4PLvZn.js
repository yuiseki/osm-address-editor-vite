function DM(e,t){for(var i=0;i<t.length;i++){const l=t[i];if(typeof l!="string"&&!Array.isArray(l)){for(const c in l)if(c!=="default"&&!(c in e)){const g=Object.getOwnPropertyDescriptor(l,c);g&&Object.defineProperty(e,c,g.get?g:{enumerable:!0,get:()=>l[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const g of c)if(g.type==="childList")for(const p of g.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function i(c){const g={};return c.integrity&&(g.integrity=c.integrity),c.referrerPolicy&&(g.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?g.credentials="include":c.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function l(c){if(c.ep)return;c.ep=!0;const g=i(c);fetch(c.href,g)}})();var Ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ep(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function l(){return this instanceof l?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var c=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(i,l,c.get?c:{enumerable:!0,get:function(){return e[l]}})}),i}var SE={exports:{}},Vg={},EE={exports:{}},Bn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp=Symbol.for("react.element"),BM=Symbol.for("react.portal"),NM=Symbol.for("react.fragment"),UM=Symbol.for("react.strict_mode"),$M=Symbol.for("react.profiler"),VM=Symbol.for("react.provider"),GM=Symbol.for("react.context"),HM=Symbol.for("react.forward_ref"),ZM=Symbol.for("react.suspense"),WM=Symbol.for("react.memo"),XM=Symbol.for("react.lazy"),Cb=Symbol.iterator;function qM(e){return e===null||typeof e!="object"?null:(e=Cb&&e[Cb]||e["@@iterator"],typeof e=="function"?e:null)}var TE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IE=Object.assign,CE={};function Vh(e,t,i){this.props=e,this.context=t,this.refs=CE,this.updater=i||TE}Vh.prototype.isReactComponent={};Vh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function PE(){}PE.prototype=Vh.prototype;function a1(e,t,i){this.props=e,this.context=t,this.refs=CE,this.updater=i||TE}var l1=a1.prototype=new PE;l1.constructor=a1;IE(l1,Vh.prototype);l1.isPureReactComponent=!0;var Pb=Array.isArray,AE=Object.prototype.hasOwnProperty,u1={current:null},ME={key:!0,ref:!0,__self:!0,__source:!0};function kE(e,t,i){var l,c={},g=null,p=null;if(t!=null)for(l in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(g=""+t.key),t)AE.call(t,l)&&!ME.hasOwnProperty(l)&&(c[l]=t[l]);var u=arguments.length-2;if(u===1)c.children=i;else if(1<u){for(var E=Array(u),I=0;I<u;I++)E[I]=arguments[I+2];c.children=E}if(e&&e.defaultProps)for(l in u=e.defaultProps,u)c[l]===void 0&&(c[l]=u[l]);return{$$typeof:tp,type:e,key:g,ref:p,props:c,_owner:u1.current}}function KM(e,t){return{$$typeof:tp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function c1(e){return typeof e=="object"&&e!==null&&e.$$typeof===tp}function YM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Ab=/\/+/g;function p0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?YM(""+e.key):t.toString(36)}function bm(e,t,i,l,c){var g=typeof e;(g==="undefined"||g==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(g){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case tp:case BM:p=!0}}if(p)return p=e,c=c(p),e=l===""?"."+p0(p,0):l,Pb(c)?(i="",e!=null&&(i=e.replace(Ab,"$&/")+"/"),bm(c,t,i,"",function(I){return I})):c!=null&&(c1(c)&&(c=KM(c,i+(!c.key||p&&p.key===c.key?"":(""+c.key).replace(Ab,"$&/")+"/")+e)),t.push(c)),1;if(p=0,l=l===""?".":l+":",Pb(e))for(var u=0;u<e.length;u++){g=e[u];var E=l+p0(g,u);p+=bm(g,t,i,E,c)}else if(E=qM(e),typeof E=="function")for(e=E.call(e),u=0;!(g=e.next()).done;)g=g.value,E=l+p0(g,u++),p+=bm(g,t,i,E,c);else if(g==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function Wp(e,t,i){if(e==null)return e;var l=[],c=0;return bm(e,l,"","",function(g){return t.call(i,g,c++)}),l}function JM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ao={current:null},Sm={transition:null},QM={ReactCurrentDispatcher:ao,ReactCurrentBatchConfig:Sm,ReactCurrentOwner:u1};Bn.Children={map:Wp,forEach:function(e,t,i){Wp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Wp(e,function(){t++}),t},toArray:function(e){return Wp(e,function(t){return t})||[]},only:function(e){if(!c1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Bn.Component=Vh;Bn.Fragment=NM;Bn.Profiler=$M;Bn.PureComponent=a1;Bn.StrictMode=UM;Bn.Suspense=ZM;Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QM;Bn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=IE({},e.props),c=e.key,g=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(g=t.ref,p=u1.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(E in t)AE.call(t,E)&&!ME.hasOwnProperty(E)&&(l[E]=t[E]===void 0&&u!==void 0?u[E]:t[E])}var E=arguments.length-2;if(E===1)l.children=i;else if(1<E){u=Array(E);for(var I=0;I<E;I++)u[I]=arguments[I+2];l.children=u}return{$$typeof:tp,type:e.type,key:c,ref:g,props:l,_owner:p}};Bn.createContext=function(e){return e={$$typeof:GM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:VM,_context:e},e.Consumer=e};Bn.createElement=kE;Bn.createFactory=function(e){var t=kE.bind(null,e);return t.type=e,t};Bn.createRef=function(){return{current:null}};Bn.forwardRef=function(e){return{$$typeof:HM,render:e}};Bn.isValidElement=c1;Bn.lazy=function(e){return{$$typeof:XM,_payload:{_status:-1,_result:e},_init:JM}};Bn.memo=function(e,t){return{$$typeof:WM,type:e,compare:t===void 0?null:t}};Bn.startTransition=function(e){var t=Sm.transition;Sm.transition={};try{e()}finally{Sm.transition=t}};Bn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Bn.useCallback=function(e,t){return ao.current.useCallback(e,t)};Bn.useContext=function(e){return ao.current.useContext(e)};Bn.useDebugValue=function(){};Bn.useDeferredValue=function(e){return ao.current.useDeferredValue(e)};Bn.useEffect=function(e,t){return ao.current.useEffect(e,t)};Bn.useId=function(){return ao.current.useId()};Bn.useImperativeHandle=function(e,t,i){return ao.current.useImperativeHandle(e,t,i)};Bn.useInsertionEffect=function(e,t){return ao.current.useInsertionEffect(e,t)};Bn.useLayoutEffect=function(e,t){return ao.current.useLayoutEffect(e,t)};Bn.useMemo=function(e,t){return ao.current.useMemo(e,t)};Bn.useReducer=function(e,t,i){return ao.current.useReducer(e,t,i)};Bn.useRef=function(e){return ao.current.useRef(e)};Bn.useState=function(e){return ao.current.useState(e)};Bn.useSyncExternalStore=function(e,t,i){return ao.current.useSyncExternalStore(e,t,i)};Bn.useTransition=function(){return ao.current.useTransition()};Bn.version="18.2.0";EE.exports=Bn;var gt=EE.exports;const h1=ep(gt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ek=gt,tk=Symbol.for("react.element"),nk=Symbol.for("react.fragment"),rk=Object.prototype.hasOwnProperty,ik=ek.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ok={key:!0,ref:!0,__self:!0,__source:!0};function zE(e,t,i){var l,c={},g=null,p=null;i!==void 0&&(g=""+i),t.key!==void 0&&(g=""+t.key),t.ref!==void 0&&(p=t.ref);for(l in t)rk.call(t,l)&&!ok.hasOwnProperty(l)&&(c[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)c[l]===void 0&&(c[l]=t[l]);return{$$typeof:tk,type:e,key:g,ref:p,props:c,_owner:ik.current}}Vg.Fragment=nk;Vg.jsx=zE;Vg.jsxs=zE;SE.exports=Vg;var mt=SE.exports,FE={exports:{}},qo={},OE={exports:{}},RE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(re,fe){var Se=re.length;re.push(fe);e:for(;0<Se;){var Ie=Se-1>>>1,Ne=re[Ie];if(0<c(Ne,fe))re[Ie]=fe,re[Se]=Ne,Se=Ie;else break e}}function i(re){return re.length===0?null:re[0]}function l(re){if(re.length===0)return null;var fe=re[0],Se=re.pop();if(Se!==fe){re[0]=Se;e:for(var Ie=0,Ne=re.length,Ae=Ne>>>1;Ie<Ae;){var ze=2*(Ie+1)-1,He=re[ze],Ze=ze+1,it=re[Ze];if(0>c(He,Se))Ze<Ne&&0>c(it,He)?(re[Ie]=it,re[Ze]=Se,Ie=Ze):(re[Ie]=He,re[ze]=Se,Ie=ze);else if(Ze<Ne&&0>c(it,Se))re[Ie]=it,re[Ze]=Se,Ie=Ze;else break e}}return fe}function c(re,fe){var Se=re.sortIndex-fe.sortIndex;return Se!==0?Se:re.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var p=Date,u=p.now();e.unstable_now=function(){return p.now()-u}}var E=[],I=[],M=1,b=null,C=3,R=!1,N=!1,O=!1,he=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(re){for(var fe=i(I);fe!==null;){if(fe.callback===null)l(I);else if(fe.startTime<=re)l(I),fe.sortIndex=fe.expirationTime,t(E,fe);else break;fe=i(I)}}function ae(re){if(O=!1,G(re),!N)if(i(E)!==null)N=!0,ce(q);else{var fe=i(I);fe!==null&&ee(ae,fe.startTime-re)}}function q(re,fe){N=!1,O&&(O=!1,K(j),j=-1),R=!0;var Se=C;try{for(G(fe),b=i(E);b!==null&&(!(b.expirationTime>fe)||re&&!W());){var Ie=b.callback;if(typeof Ie=="function"){b.callback=null,C=b.priorityLevel;var Ne=Ie(b.expirationTime<=fe);fe=e.unstable_now(),typeof Ne=="function"?b.callback=Ne:b===i(E)&&l(E),G(fe)}else l(E);b=i(E)}if(b!==null)var Ae=!0;else{var ze=i(I);ze!==null&&ee(ae,ze.startTime-fe),Ae=!1}return Ae}finally{b=null,C=Se,R=!1}}var H=!1,T=null,j=-1,D=5,te=-1;function W(){return!(e.unstable_now()-te<D)}function ve(){if(T!==null){var re=e.unstable_now();te=re;var fe=!0;try{fe=T(!0,re)}finally{fe?_e():(H=!1,T=null)}}else H=!1}var _e;if(typeof X=="function")_e=function(){X(ve)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,oe=pe.port2;pe.port1.onmessage=ve,_e=function(){oe.postMessage(null)}}else _e=function(){he(ve,0)};function ce(re){T=re,H||(H=!0,_e())}function ee(re,fe){j=he(function(){re(e.unstable_now())},fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){N||R||(N=!0,ce(q))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return i(E)},e.unstable_next=function(re){switch(C){case 1:case 2:case 3:var fe=3;break;default:fe=C}var Se=C;C=fe;try{return re()}finally{C=Se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,fe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var Se=C;C=re;try{return fe()}finally{C=Se}},e.unstable_scheduleCallback=function(re,fe,Se){var Ie=e.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Ie+Se:Ie):Se=Ie,re){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=Se+Ne,re={id:M++,callback:fe,priorityLevel:re,startTime:Se,expirationTime:Ne,sortIndex:-1},Se>Ie?(re.sortIndex=Se,t(I,re),i(E)===null&&re===i(I)&&(O?(K(j),j=-1):O=!0,ee(ae,Se-Ie))):(re.sortIndex=Ne,t(E,re),N||R||(N=!0,ce(q))),re},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(re){var fe=C;return function(){var Se=C;C=fe;try{return re.apply(this,arguments)}finally{C=Se}}}})(RE);OE.exports=RE;var sk=OE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE=gt,Xo=sk;function Tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var LE=new Set,Mf={};function oc(e,t){Ah(e,t),Ah(e+"Capture",t)}function Ah(e,t){for(Mf[e]=t,e=0;e<t.length;e++)LE.add(t[e])}var $a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xv=Object.prototype.hasOwnProperty,ak=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mb={},kb={};function lk(e){return xv.call(kb,e)?!0:xv.call(Mb,e)?!1:ak.test(e)?kb[e]=!0:(Mb[e]=!0,!1)}function uk(e,t,i,l){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ck(e,t,i,l){if(t===null||typeof t>"u"||uk(e,t,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lo(e,t,i,l,c,g,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=g,this.removeEmptyString=p}var Ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ei[e]=new lo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ei[t]=new lo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ei[e]=new lo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ei[e]=new lo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ei[e]=new lo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ei[e]=new lo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ei[e]=new lo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ei[e]=new lo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ei[e]=new lo(e,5,!1,e.toLowerCase(),null,!1,!1)});var d1=/[\-:]([a-z])/g;function f1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(d1,f1);Ei[t]=new lo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(d1,f1);Ei[t]=new lo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(d1,f1);Ei[t]=new lo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ei[e]=new lo(e,1,!1,e.toLowerCase(),null,!1,!1)});Ei.xlinkHref=new lo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ei[e]=new lo(e,1,!1,e.toLowerCase(),null,!0,!0)});function p1(e,t,i,l){var c=Ei.hasOwnProperty(t)?Ei[t]:null;(c!==null?c.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ck(t,i,c,l)&&(i=null),l||c===null?lk(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,l=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,l?e.setAttributeNS(l,t,i):e.setAttribute(t,i))))}var qa=jE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xp=Symbol.for("react.element"),ih=Symbol.for("react.portal"),oh=Symbol.for("react.fragment"),m1=Symbol.for("react.strict_mode"),wv=Symbol.for("react.profiler"),DE=Symbol.for("react.provider"),BE=Symbol.for("react.context"),g1=Symbol.for("react.forward_ref"),bv=Symbol.for("react.suspense"),Sv=Symbol.for("react.suspense_list"),y1=Symbol.for("react.memo"),Dl=Symbol.for("react.lazy"),NE=Symbol.for("react.offscreen"),zb=Symbol.iterator;function Hd(e){return e===null||typeof e!="object"?null:(e=zb&&e[zb]||e["@@iterator"],typeof e=="function"?e:null)}var Pr=Object.assign,m0;function ef(e){if(m0===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);m0=t&&t[1]||""}return`
`+m0+e}var g0=!1;function y0(e,t){if(!e||g0)return"";g0=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(I){var l=I}Reflect.construct(e,[],t)}else{try{t.call()}catch(I){l=I}e.call(t.prototype)}else{try{throw Error()}catch(I){l=I}e()}}catch(I){if(I&&l&&typeof I.stack=="string"){for(var c=I.stack.split(`
`),g=l.stack.split(`
`),p=c.length-1,u=g.length-1;1<=p&&0<=u&&c[p]!==g[u];)u--;for(;1<=p&&0<=u;p--,u--)if(c[p]!==g[u]){if(p!==1||u!==1)do if(p--,u--,0>u||c[p]!==g[u]){var E=`
`+c[p].replace(" at new "," at ");return e.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",e.displayName)),E}while(1<=p&&0<=u);break}}}finally{g0=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?ef(e):""}function hk(e){switch(e.tag){case 5:return ef(e.type);case 16:return ef("Lazy");case 13:return ef("Suspense");case 19:return ef("SuspenseList");case 0:case 2:case 15:return e=y0(e.type,!1),e;case 11:return e=y0(e.type.render,!1),e;case 1:return e=y0(e.type,!0),e;default:return""}}function Ev(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case oh:return"Fragment";case ih:return"Portal";case wv:return"Profiler";case m1:return"StrictMode";case bv:return"Suspense";case Sv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case BE:return(e.displayName||"Context")+".Consumer";case DE:return(e._context.displayName||"Context")+".Provider";case g1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case y1:return t=e.displayName||null,t!==null?t:Ev(e.type)||"Memo";case Dl:t=e._payload,e=e._init;try{return Ev(e(t))}catch{}}return null}function dk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ev(t);case 8:return t===m1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function UE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fk(e){var t=UE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,g=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(p){l=""+p,g.call(this,p)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(p){l=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qp(e){e._valueTracker||(e._valueTracker=fk(e))}function $E(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),l="";return e&&(l=UE(e)?e.checked?"true":"false":e.value),e=l,e!==i?(t.setValue(e),!0):!1}function Vm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Tv(e,t){var i=t.checked;return Pr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Fb(e,t){var i=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;i=nu(t.value!=null?t.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function VE(e,t){t=t.checked,t!=null&&p1(e,"checked",t,!1)}function Iv(e,t){VE(e,t);var i=nu(t.value),l=t.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Cv(e,t.type,i):t.hasOwnProperty("defaultValue")&&Cv(e,t.type,nu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ob(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Cv(e,t,i){(t!=="number"||Vm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var tf=Array.isArray;function xh(e,t,i,l){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&l&&(e[i].defaultSelected=!0)}else{for(i=""+nu(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Pv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Tt(91));return Pr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Tt(92));if(tf(i)){if(1<i.length)throw Error(Tt(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:nu(i)}}function GE(e,t){var i=nu(t.value),l=nu(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function jb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function HE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Av(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?HE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kp,ZE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,l,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,l,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Kp=Kp||document.createElement("div"),Kp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function kf(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var pf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pk=["Webkit","ms","Moz","O"];Object.keys(pf).forEach(function(e){pk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pf[t]=pf[e]})});function WE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||pf.hasOwnProperty(e)&&pf[e]?(""+t).trim():t+"px"}function XE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var l=i.indexOf("--")===0,c=WE(i,t[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,c):e[i]=c}}var mk=Pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mv(e,t){if(t){if(mk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Tt(62))}}function kv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zv=null;function v1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fv=null,wh=null,bh=null;function Lb(e){if(e=ip(e)){if(typeof Fv!="function")throw Error(Tt(280));var t=e.stateNode;t&&(t=Xg(t),Fv(e.stateNode,e.type,t))}}function qE(e){wh?bh?bh.push(e):bh=[e]:wh=e}function KE(){if(wh){var e=wh,t=bh;if(bh=wh=null,Lb(e),t)for(e=0;e<t.length;e++)Lb(t[e])}}function YE(e,t){return e(t)}function JE(){}var v0=!1;function QE(e,t,i){if(v0)return e(t,i);v0=!0;try{return YE(e,t,i)}finally{v0=!1,(wh!==null||bh!==null)&&(JE(),KE())}}function zf(e,t){var i=e.stateNode;if(i===null)return null;var l=Xg(i);if(l===null)return null;i=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Tt(231,t,typeof i));return i}var Ov=!1;if($a)try{var Zd={};Object.defineProperty(Zd,"passive",{get:function(){Ov=!0}}),window.addEventListener("test",Zd,Zd),window.removeEventListener("test",Zd,Zd)}catch{Ov=!1}function gk(e,t,i,l,c,g,p,u,E){var I=Array.prototype.slice.call(arguments,3);try{t.apply(i,I)}catch(M){this.onError(M)}}var mf=!1,Gm=null,Hm=!1,Rv=null,yk={onError:function(e){mf=!0,Gm=e}};function vk(e,t,i,l,c,g,p,u,E){mf=!1,Gm=null,gk.apply(yk,arguments)}function _k(e,t,i,l,c,g,p,u,E){if(vk.apply(this,arguments),mf){if(mf){var I=Gm;mf=!1,Gm=null}else throw Error(Tt(198));Hm||(Hm=!0,Rv=I)}}function sc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function eT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Db(e){if(sc(e)!==e)throw Error(Tt(188))}function xk(e){var t=e.alternate;if(!t){if(t=sc(e),t===null)throw Error(Tt(188));return t!==e?null:e}for(var i=e,l=t;;){var c=i.return;if(c===null)break;var g=c.alternate;if(g===null){if(l=c.return,l!==null){i=l;continue}break}if(c.child===g.child){for(g=c.child;g;){if(g===i)return Db(c),e;if(g===l)return Db(c),t;g=g.sibling}throw Error(Tt(188))}if(i.return!==l.return)i=c,l=g;else{for(var p=!1,u=c.child;u;){if(u===i){p=!0,i=c,l=g;break}if(u===l){p=!0,l=c,i=g;break}u=u.sibling}if(!p){for(u=g.child;u;){if(u===i){p=!0,i=g,l=c;break}if(u===l){p=!0,l=g,i=c;break}u=u.sibling}if(!p)throw Error(Tt(189))}}if(i.alternate!==l)throw Error(Tt(190))}if(i.tag!==3)throw Error(Tt(188));return i.stateNode.current===i?e:t}function tT(e){return e=xk(e),e!==null?nT(e):null}function nT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nT(e);if(t!==null)return t;e=e.sibling}return null}var rT=Xo.unstable_scheduleCallback,Bb=Xo.unstable_cancelCallback,wk=Xo.unstable_shouldYield,bk=Xo.unstable_requestPaint,Nr=Xo.unstable_now,Sk=Xo.unstable_getCurrentPriorityLevel,_1=Xo.unstable_ImmediatePriority,iT=Xo.unstable_UserBlockingPriority,Zm=Xo.unstable_NormalPriority,Ek=Xo.unstable_LowPriority,oT=Xo.unstable_IdlePriority,Gg=null,fa=null;function Tk(e){if(fa&&typeof fa.onCommitFiberRoot=="function")try{fa.onCommitFiberRoot(Gg,e,void 0,(e.current.flags&128)===128)}catch{}}var js=Math.clz32?Math.clz32:Pk,Ik=Math.log,Ck=Math.LN2;function Pk(e){return e>>>=0,e===0?32:31-(Ik(e)/Ck|0)|0}var Yp=64,Jp=4194304;function nf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wm(e,t){var i=e.pendingLanes;if(i===0)return 0;var l=0,c=e.suspendedLanes,g=e.pingedLanes,p=i&268435455;if(p!==0){var u=p&~c;u!==0?l=nf(u):(g&=p,g!==0&&(l=nf(g)))}else p=i&~c,p!==0?l=nf(p):g!==0&&(l=nf(g));if(l===0)return 0;if(t!==0&&t!==l&&!(t&c)&&(c=l&-l,g=t&-t,c>=g||c===16&&(g&4194240)!==0))return t;if(l&4&&(l|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)i=31-js(t),c=1<<i,l|=e[i],t&=~c;return l}function Ak(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mk(e,t){for(var i=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,g=e.pendingLanes;0<g;){var p=31-js(g),u=1<<p,E=c[p];E===-1?(!(u&i)||u&l)&&(c[p]=Ak(u,t)):E<=t&&(e.expiredLanes|=u),g&=~u}}function jv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sT(){var e=Yp;return Yp<<=1,!(Yp&4194240)&&(Yp=64),e}function _0(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function np(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-js(t),e[t]=i}function kk(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-js(i),g=1<<c;t[c]=0,l[c]=-1,e[c]=-1,i&=~g}}function x1(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var l=31-js(i),c=1<<l;c&t|e[l]&t&&(e[l]|=t),i&=~c}}var Qn=0;function aT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lT,w1,uT,cT,hT,Lv=!1,Qp=[],Wl=null,Xl=null,ql=null,Ff=new Map,Of=new Map,$l=[],zk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nb(e,t){switch(e){case"focusin":case"focusout":Wl=null;break;case"dragenter":case"dragleave":Xl=null;break;case"mouseover":case"mouseout":ql=null;break;case"pointerover":case"pointerout":Ff.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Of.delete(t.pointerId)}}function Wd(e,t,i,l,c,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:i,eventSystemFlags:l,nativeEvent:g,targetContainers:[c]},t!==null&&(t=ip(t),t!==null&&w1(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Fk(e,t,i,l,c){switch(t){case"focusin":return Wl=Wd(Wl,e,t,i,l,c),!0;case"dragenter":return Xl=Wd(Xl,e,t,i,l,c),!0;case"mouseover":return ql=Wd(ql,e,t,i,l,c),!0;case"pointerover":var g=c.pointerId;return Ff.set(g,Wd(Ff.get(g)||null,e,t,i,l,c)),!0;case"gotpointercapture":return g=c.pointerId,Of.set(g,Wd(Of.get(g)||null,e,t,i,l,c)),!0}return!1}function dT(e){var t=Vu(e.target);if(t!==null){var i=sc(t);if(i!==null){if(t=i.tag,t===13){if(t=eT(i),t!==null){e.blockedOn=t,hT(e.priority,function(){uT(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Em(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Dv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);zv=l,i.target.dispatchEvent(l),zv=null}else return t=ip(i),t!==null&&w1(t),e.blockedOn=i,!1;t.shift()}return!0}function Ub(e,t,i){Em(e)&&i.delete(t)}function Ok(){Lv=!1,Wl!==null&&Em(Wl)&&(Wl=null),Xl!==null&&Em(Xl)&&(Xl=null),ql!==null&&Em(ql)&&(ql=null),Ff.forEach(Ub),Of.forEach(Ub)}function Xd(e,t){e.blockedOn===t&&(e.blockedOn=null,Lv||(Lv=!0,Xo.unstable_scheduleCallback(Xo.unstable_NormalPriority,Ok)))}function Rf(e){function t(c){return Xd(c,e)}if(0<Qp.length){Xd(Qp[0],e);for(var i=1;i<Qp.length;i++){var l=Qp[i];l.blockedOn===e&&(l.blockedOn=null)}}for(Wl!==null&&Xd(Wl,e),Xl!==null&&Xd(Xl,e),ql!==null&&Xd(ql,e),Ff.forEach(t),Of.forEach(t),i=0;i<$l.length;i++)l=$l[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<$l.length&&(i=$l[0],i.blockedOn===null);)dT(i),i.blockedOn===null&&$l.shift()}var Sh=qa.ReactCurrentBatchConfig,Xm=!0;function Rk(e,t,i,l){var c=Qn,g=Sh.transition;Sh.transition=null;try{Qn=1,b1(e,t,i,l)}finally{Qn=c,Sh.transition=g}}function jk(e,t,i,l){var c=Qn,g=Sh.transition;Sh.transition=null;try{Qn=4,b1(e,t,i,l)}finally{Qn=c,Sh.transition=g}}function b1(e,t,i,l){if(Xm){var c=Dv(e,t,i,l);if(c===null)A0(e,t,l,qm,i),Nb(e,l);else if(Fk(c,e,t,i,l))l.stopPropagation();else if(Nb(e,l),t&4&&-1<zk.indexOf(e)){for(;c!==null;){var g=ip(c);if(g!==null&&lT(g),g=Dv(e,t,i,l),g===null&&A0(e,t,l,qm,i),g===c)break;c=g}c!==null&&l.stopPropagation()}else A0(e,t,l,null,i)}}var qm=null;function Dv(e,t,i,l){if(qm=null,e=v1(l),e=Vu(e),e!==null)if(t=sc(e),t===null)e=null;else if(i=t.tag,i===13){if(e=eT(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qm=e,null}function fT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sk()){case _1:return 1;case iT:return 4;case Zm:case Ek:return 16;case oT:return 536870912;default:return 16}default:return 16}}var Gl=null,S1=null,Tm=null;function pT(){if(Tm)return Tm;var e,t=S1,i=t.length,l,c="value"in Gl?Gl.value:Gl.textContent,g=c.length;for(e=0;e<i&&t[e]===c[e];e++);var p=i-e;for(l=1;l<=p&&t[i-l]===c[g-l];l++);return Tm=c.slice(e,1<l?1-l:void 0)}function Im(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function em(){return!0}function $b(){return!1}function Ko(e){function t(i,l,c,g,p){this._reactName=i,this._targetInst=c,this.type=l,this.nativeEvent=g,this.target=p,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(i=e[u],this[u]=i?i(g):g[u]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?em:$b,this.isPropagationStopped=$b,this}return Pr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=em)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=em)},persist:function(){},isPersistent:em}),t}var Gh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},E1=Ko(Gh),rp=Pr({},Gh,{view:0,detail:0}),Lk=Ko(rp),x0,w0,qd,Hg=Pr({},rp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qd&&(qd&&e.type==="mousemove"?(x0=e.screenX-qd.screenX,w0=e.screenY-qd.screenY):w0=x0=0,qd=e),x0)},movementY:function(e){return"movementY"in e?e.movementY:w0}}),Vb=Ko(Hg),Dk=Pr({},Hg,{dataTransfer:0}),Bk=Ko(Dk),Nk=Pr({},rp,{relatedTarget:0}),b0=Ko(Nk),Uk=Pr({},Gh,{animationName:0,elapsedTime:0,pseudoElement:0}),$k=Ko(Uk),Vk=Pr({},Gh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gk=Ko(Vk),Hk=Pr({},Gh,{data:0}),Gb=Ko(Hk),Zk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xk[e])?!!t[e]:!1}function T1(){return qk}var Kk=Pr({},rp,{key:function(e){if(e.key){var t=Zk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Im(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T1,charCode:function(e){return e.type==="keypress"?Im(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Im(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yk=Ko(Kk),Jk=Pr({},Hg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hb=Ko(Jk),Qk=Pr({},rp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T1}),e3=Ko(Qk),t3=Pr({},Gh,{propertyName:0,elapsedTime:0,pseudoElement:0}),n3=Ko(t3),r3=Pr({},Hg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),i3=Ko(r3),o3=[9,13,27,32],I1=$a&&"CompositionEvent"in window,gf=null;$a&&"documentMode"in document&&(gf=document.documentMode);var s3=$a&&"TextEvent"in window&&!gf,mT=$a&&(!I1||gf&&8<gf&&11>=gf),Zb=" ",Wb=!1;function gT(e,t){switch(e){case"keyup":return o3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sh=!1;function a3(e,t){switch(e){case"compositionend":return yT(t);case"keypress":return t.which!==32?null:(Wb=!0,Zb);case"textInput":return e=t.data,e===Zb&&Wb?null:e;default:return null}}function l3(e,t){if(sh)return e==="compositionend"||!I1&&gT(e,t)?(e=pT(),Tm=S1=Gl=null,sh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mT&&t.locale!=="ko"?null:t.data;default:return null}}var u3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!u3[e.type]:t==="textarea"}function vT(e,t,i,l){qE(l),t=Km(t,"onChange"),0<t.length&&(i=new E1("onChange","change",null,i,l),e.push({event:i,listeners:t}))}var yf=null,jf=null;function c3(e){AT(e,0)}function Zg(e){var t=uh(e);if($E(t))return e}function h3(e,t){if(e==="change")return t}var _T=!1;if($a){var S0;if($a){var E0="oninput"in document;if(!E0){var qb=document.createElement("div");qb.setAttribute("oninput","return;"),E0=typeof qb.oninput=="function"}S0=E0}else S0=!1;_T=S0&&(!document.documentMode||9<document.documentMode)}function Kb(){yf&&(yf.detachEvent("onpropertychange",xT),jf=yf=null)}function xT(e){if(e.propertyName==="value"&&Zg(jf)){var t=[];vT(t,jf,e,v1(e)),QE(c3,t)}}function d3(e,t,i){e==="focusin"?(Kb(),yf=t,jf=i,yf.attachEvent("onpropertychange",xT)):e==="focusout"&&Kb()}function f3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zg(jf)}function p3(e,t){if(e==="click")return Zg(t)}function m3(e,t){if(e==="input"||e==="change")return Zg(t)}function g3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ds=typeof Object.is=="function"?Object.is:g3;function Lf(e,t){if(Ds(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var c=i[l];if(!xv.call(t,c)||!Ds(e[c],t[c]))return!1}return!0}function Yb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jb(e,t){var i=Yb(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=t&&l>=t)return{node:i,offset:t-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Yb(i)}}function wT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bT(){for(var e=window,t=Vm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Vm(e.document)}return t}function C1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function y3(e){var t=bT(),i=e.focusedElem,l=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&wT(i.ownerDocument.documentElement,i)){if(l!==null&&C1(i)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,g=Math.min(l.start,c);l=l.end===void 0?g:Math.min(l.end,c),!e.extend&&g>l&&(c=l,l=g,g=c),c=Jb(i,g);var p=Jb(i,l);c&&p&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),g>l?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var v3=$a&&"documentMode"in document&&11>=document.documentMode,ah=null,Bv=null,vf=null,Nv=!1;function Qb(e,t,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Nv||ah==null||ah!==Vm(l)||(l=ah,"selectionStart"in l&&C1(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),vf&&Lf(vf,l)||(vf=l,l=Km(Bv,"onSelect"),0<l.length&&(t=new E1("onSelect","select",null,t,i),e.push({event:t,listeners:l}),t.target=ah)))}function tm(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var lh={animationend:tm("Animation","AnimationEnd"),animationiteration:tm("Animation","AnimationIteration"),animationstart:tm("Animation","AnimationStart"),transitionend:tm("Transition","TransitionEnd")},T0={},ST={};$a&&(ST=document.createElement("div").style,"AnimationEvent"in window||(delete lh.animationend.animation,delete lh.animationiteration.animation,delete lh.animationstart.animation),"TransitionEvent"in window||delete lh.transitionend.transition);function Wg(e){if(T0[e])return T0[e];if(!lh[e])return e;var t=lh[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in ST)return T0[e]=t[i];return e}var ET=Wg("animationend"),TT=Wg("animationiteration"),IT=Wg("animationstart"),CT=Wg("transitionend"),PT=new Map,e2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lu(e,t){PT.set(e,t),oc(t,[e])}for(var I0=0;I0<e2.length;I0++){var C0=e2[I0],_3=C0.toLowerCase(),x3=C0[0].toUpperCase()+C0.slice(1);lu(_3,"on"+x3)}lu(ET,"onAnimationEnd");lu(TT,"onAnimationIteration");lu(IT,"onAnimationStart");lu("dblclick","onDoubleClick");lu("focusin","onFocus");lu("focusout","onBlur");lu(CT,"onTransitionEnd");Ah("onMouseEnter",["mouseout","mouseover"]);Ah("onMouseLeave",["mouseout","mouseover"]);Ah("onPointerEnter",["pointerout","pointerover"]);Ah("onPointerLeave",["pointerout","pointerover"]);oc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oc("onBeforeInput",["compositionend","keypress","textInput","paste"]);oc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w3=new Set("cancel close invalid load scroll toggle".split(" ").concat(rf));function t2(e,t,i){var l=e.type||"unknown-event";e.currentTarget=i,_k(l,t,void 0,e),e.currentTarget=null}function AT(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],c=l.event;l=l.listeners;e:{var g=void 0;if(t)for(var p=l.length-1;0<=p;p--){var u=l[p],E=u.instance,I=u.currentTarget;if(u=u.listener,E!==g&&c.isPropagationStopped())break e;t2(c,u,I),g=E}else for(p=0;p<l.length;p++){if(u=l[p],E=u.instance,I=u.currentTarget,u=u.listener,E!==g&&c.isPropagationStopped())break e;t2(c,u,I),g=E}}}if(Hm)throw e=Rv,Hm=!1,Rv=null,e}function hr(e,t){var i=t[Hv];i===void 0&&(i=t[Hv]=new Set);var l=e+"__bubble";i.has(l)||(MT(t,e,2,!1),i.add(l))}function P0(e,t,i){var l=0;t&&(l|=4),MT(i,e,l,t)}var nm="_reactListening"+Math.random().toString(36).slice(2);function Df(e){if(!e[nm]){e[nm]=!0,LE.forEach(function(i){i!=="selectionchange"&&(w3.has(i)||P0(i,!1,e),P0(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nm]||(t[nm]=!0,P0("selectionchange",!1,t))}}function MT(e,t,i,l){switch(fT(t)){case 1:var c=Rk;break;case 4:c=jk;break;default:c=b1}i=c.bind(null,t,i,e),c=void 0,!Ov||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function A0(e,t,i,l,c){var g=l;if(!(t&1)&&!(t&2)&&l!==null)e:for(;;){if(l===null)return;var p=l.tag;if(p===3||p===4){var u=l.stateNode.containerInfo;if(u===c||u.nodeType===8&&u.parentNode===c)break;if(p===4)for(p=l.return;p!==null;){var E=p.tag;if((E===3||E===4)&&(E=p.stateNode.containerInfo,E===c||E.nodeType===8&&E.parentNode===c))return;p=p.return}for(;u!==null;){if(p=Vu(u),p===null)return;if(E=p.tag,E===5||E===6){l=g=p;continue e}u=u.parentNode}}l=l.return}QE(function(){var I=g,M=v1(i),b=[];e:{var C=PT.get(e);if(C!==void 0){var R=E1,N=e;switch(e){case"keypress":if(Im(i)===0)break e;case"keydown":case"keyup":R=Yk;break;case"focusin":N="focus",R=b0;break;case"focusout":N="blur",R=b0;break;case"beforeblur":case"afterblur":R=b0;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Vb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=Bk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=e3;break;case ET:case TT:case IT:R=$k;break;case CT:R=n3;break;case"scroll":R=Lk;break;case"wheel":R=i3;break;case"copy":case"cut":case"paste":R=Gk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Hb}var O=(t&4)!==0,he=!O&&e==="scroll",K=O?C!==null?C+"Capture":null:C;O=[];for(var X=I,G;X!==null;){G=X;var ae=G.stateNode;if(G.tag===5&&ae!==null&&(G=ae,K!==null&&(ae=zf(X,K),ae!=null&&O.push(Bf(X,ae,G)))),he)break;X=X.return}0<O.length&&(C=new R(C,N,null,i,M),b.push({event:C,listeners:O}))}}if(!(t&7)){e:{if(C=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",C&&i!==zv&&(N=i.relatedTarget||i.fromElement)&&(Vu(N)||N[Va]))break e;if((R||C)&&(C=M.window===M?M:(C=M.ownerDocument)?C.defaultView||C.parentWindow:window,R?(N=i.relatedTarget||i.toElement,R=I,N=N?Vu(N):null,N!==null&&(he=sc(N),N!==he||N.tag!==5&&N.tag!==6)&&(N=null)):(R=null,N=I),R!==N)){if(O=Vb,ae="onMouseLeave",K="onMouseEnter",X="mouse",(e==="pointerout"||e==="pointerover")&&(O=Hb,ae="onPointerLeave",K="onPointerEnter",X="pointer"),he=R==null?C:uh(R),G=N==null?C:uh(N),C=new O(ae,X+"leave",R,i,M),C.target=he,C.relatedTarget=G,ae=null,Vu(M)===I&&(O=new O(K,X+"enter",N,i,M),O.target=G,O.relatedTarget=he,ae=O),he=ae,R&&N)t:{for(O=R,K=N,X=0,G=O;G;G=Kc(G))X++;for(G=0,ae=K;ae;ae=Kc(ae))G++;for(;0<X-G;)O=Kc(O),X--;for(;0<G-X;)K=Kc(K),G--;for(;X--;){if(O===K||K!==null&&O===K.alternate)break t;O=Kc(O),K=Kc(K)}O=null}else O=null;R!==null&&n2(b,C,R,O,!1),N!==null&&he!==null&&n2(b,he,N,O,!0)}}e:{if(C=I?uh(I):window,R=C.nodeName&&C.nodeName.toLowerCase(),R==="select"||R==="input"&&C.type==="file")var q=h3;else if(Xb(C))if(_T)q=m3;else{q=f3;var H=d3}else(R=C.nodeName)&&R.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(q=p3);if(q&&(q=q(e,I))){vT(b,q,i,M);break e}H&&H(e,C,I),e==="focusout"&&(H=C._wrapperState)&&H.controlled&&C.type==="number"&&Cv(C,"number",C.value)}switch(H=I?uh(I):window,e){case"focusin":(Xb(H)||H.contentEditable==="true")&&(ah=H,Bv=I,vf=null);break;case"focusout":vf=Bv=ah=null;break;case"mousedown":Nv=!0;break;case"contextmenu":case"mouseup":case"dragend":Nv=!1,Qb(b,i,M);break;case"selectionchange":if(v3)break;case"keydown":case"keyup":Qb(b,i,M)}var T;if(I1)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else sh?gT(e,i)&&(j="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(j="onCompositionStart");j&&(mT&&i.locale!=="ko"&&(sh||j!=="onCompositionStart"?j==="onCompositionEnd"&&sh&&(T=pT()):(Gl=M,S1="value"in Gl?Gl.value:Gl.textContent,sh=!0)),H=Km(I,j),0<H.length&&(j=new Gb(j,e,null,i,M),b.push({event:j,listeners:H}),T?j.data=T:(T=yT(i),T!==null&&(j.data=T)))),(T=s3?a3(e,i):l3(e,i))&&(I=Km(I,"onBeforeInput"),0<I.length&&(M=new Gb("onBeforeInput","beforeinput",null,i,M),b.push({event:M,listeners:I}),M.data=T))}AT(b,t)})}function Bf(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Km(e,t){for(var i=t+"Capture",l=[];e!==null;){var c=e,g=c.stateNode;c.tag===5&&g!==null&&(c=g,g=zf(e,i),g!=null&&l.unshift(Bf(e,g,c)),g=zf(e,t),g!=null&&l.push(Bf(e,g,c))),e=e.return}return l}function Kc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function n2(e,t,i,l,c){for(var g=t._reactName,p=[];i!==null&&i!==l;){var u=i,E=u.alternate,I=u.stateNode;if(E!==null&&E===l)break;u.tag===5&&I!==null&&(u=I,c?(E=zf(i,g),E!=null&&p.unshift(Bf(i,E,u))):c||(E=zf(i,g),E!=null&&p.push(Bf(i,E,u)))),i=i.return}p.length!==0&&e.push({event:t,listeners:p})}var b3=/\r\n?/g,S3=/\u0000|\uFFFD/g;function r2(e){return(typeof e=="string"?e:""+e).replace(b3,`
`).replace(S3,"")}function rm(e,t,i){if(t=r2(t),r2(e)!==t&&i)throw Error(Tt(425))}function Ym(){}var Uv=null,$v=null;function Vv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gv=typeof setTimeout=="function"?setTimeout:void 0,E3=typeof clearTimeout=="function"?clearTimeout:void 0,i2=typeof Promise=="function"?Promise:void 0,T3=typeof queueMicrotask=="function"?queueMicrotask:typeof i2<"u"?function(e){return i2.resolve(null).then(e).catch(I3)}:Gv;function I3(e){setTimeout(function(){throw e})}function M0(e,t){var i=t,l=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(l===0){e.removeChild(c),Rf(t);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=c}while(i);Rf(t)}function Kl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function o2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Hh=Math.random().toString(36).slice(2),aa="__reactFiber$"+Hh,Nf="__reactProps$"+Hh,Va="__reactContainer$"+Hh,Hv="__reactEvents$"+Hh,C3="__reactListeners$"+Hh,P3="__reactHandles$"+Hh;function Vu(e){var t=e[aa];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Va]||i[aa]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=o2(e);e!==null;){if(i=e[aa])return i;e=o2(e)}return t}e=i,i=e.parentNode}return null}function ip(e){return e=e[aa]||e[Va],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function uh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Tt(33))}function Xg(e){return e[Nf]||null}var Zv=[],ch=-1;function uu(e){return{current:e}}function dr(e){0>ch||(e.current=Zv[ch],Zv[ch]=null,ch--)}function lr(e,t){ch++,Zv[ch]=e.current,e.current=t}var ru={},Bi=uu(ru),To=uu(!1),Ku=ru;function Mh(e,t){var i=e.type.contextTypes;if(!i)return ru;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var c={},g;for(g in i)c[g]=t[g];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Io(e){return e=e.childContextTypes,e!=null}function Jm(){dr(To),dr(Bi)}function s2(e,t,i){if(Bi.current!==ru)throw Error(Tt(168));lr(Bi,t),lr(To,i)}function kT(e,t,i){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var c in l)if(!(c in t))throw Error(Tt(108,dk(e)||"Unknown",c));return Pr({},i,l)}function Qm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ru,Ku=Bi.current,lr(Bi,e),lr(To,To.current),!0}function a2(e,t,i){var l=e.stateNode;if(!l)throw Error(Tt(169));i?(e=kT(e,t,Ku),l.__reactInternalMemoizedMergedChildContext=e,dr(To),dr(Bi),lr(Bi,e)):dr(To),lr(To,i)}var ja=null,qg=!1,k0=!1;function zT(e){ja===null?ja=[e]:ja.push(e)}function A3(e){qg=!0,zT(e)}function cu(){if(!k0&&ja!==null){k0=!0;var e=0,t=Qn;try{var i=ja;for(Qn=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}ja=null,qg=!1}catch(c){throw ja!==null&&(ja=ja.slice(e+1)),rT(_1,cu),c}finally{Qn=t,k0=!1}}return null}var hh=[],dh=0,eg=null,tg=0,ls=[],us=0,Yu=null,Ba=1,Na="";function Bu(e,t){hh[dh++]=tg,hh[dh++]=eg,eg=e,tg=t}function FT(e,t,i){ls[us++]=Ba,ls[us++]=Na,ls[us++]=Yu,Yu=e;var l=Ba;e=Na;var c=32-js(l)-1;l&=~(1<<c),i+=1;var g=32-js(t)+c;if(30<g){var p=c-c%5;g=(l&(1<<p)-1).toString(32),l>>=p,c-=p,Ba=1<<32-js(t)+c|i<<c|l,Na=g+e}else Ba=1<<g|i<<c|l,Na=e}function P1(e){e.return!==null&&(Bu(e,1),FT(e,1,0))}function A1(e){for(;e===eg;)eg=hh[--dh],hh[dh]=null,tg=hh[--dh],hh[dh]=null;for(;e===Yu;)Yu=ls[--us],ls[us]=null,Na=ls[--us],ls[us]=null,Ba=ls[--us],ls[us]=null}var Ho=null,Go=null,vr=!1,zs=null;function OT(e,t){var i=hs(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function l2(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ho=e,Go=Kl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ho=e,Go=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Yu!==null?{id:Ba,overflow:Na}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=hs(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Ho=e,Go=null,!0):!1;default:return!1}}function Wv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xv(e){if(vr){var t=Go;if(t){var i=t;if(!l2(e,t)){if(Wv(e))throw Error(Tt(418));t=Kl(i.nextSibling);var l=Ho;t&&l2(e,t)?OT(l,i):(e.flags=e.flags&-4097|2,vr=!1,Ho=e)}}else{if(Wv(e))throw Error(Tt(418));e.flags=e.flags&-4097|2,vr=!1,Ho=e}}}function u2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ho=e}function im(e){if(e!==Ho)return!1;if(!vr)return u2(e),vr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Vv(e.type,e.memoizedProps)),t&&(t=Go)){if(Wv(e))throw RT(),Error(Tt(418));for(;t;)OT(e,t),t=Kl(t.nextSibling)}if(u2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Go=Kl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Go=null}}else Go=Ho?Kl(e.stateNode.nextSibling):null;return!0}function RT(){for(var e=Go;e;)e=Kl(e.nextSibling)}function kh(){Go=Ho=null,vr=!1}function M1(e){zs===null?zs=[e]:zs.push(e)}var M3=qa.ReactCurrentBatchConfig;function Ms(e,t){if(e&&e.defaultProps){t=Pr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var ng=uu(null),rg=null,fh=null,k1=null;function z1(){k1=fh=rg=null}function F1(e){var t=ng.current;dr(ng),e._currentValue=t}function qv(e,t,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===i)break;e=e.return}}function Eh(e,t){rg=e,k1=fh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Eo=!0),e.firstContext=null)}function ps(e){var t=e._currentValue;if(k1!==e)if(e={context:e,memoizedValue:t,next:null},fh===null){if(rg===null)throw Error(Tt(308));fh=e,rg.dependencies={lanes:0,firstContext:e}}else fh=fh.next=e;return t}var Gu=null;function O1(e){Gu===null?Gu=[e]:Gu.push(e)}function jT(e,t,i,l){var c=t.interleaved;return c===null?(i.next=i,O1(t)):(i.next=c.next,c.next=i),t.interleaved=i,Ga(e,l)}function Ga(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Bl=!1;function R1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ua(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yl(e,t,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,Vn&2){var c=l.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),l.pending=t,Ga(e,i)}return c=l.interleaved,c===null?(t.next=t,O1(l)):(t.next=c.next,c.next=t),l.interleaved=t,Ga(e,i)}function Cm(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,x1(e,i)}}function c2(e,t){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var c=null,g=null;if(i=i.firstBaseUpdate,i!==null){do{var p={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};g===null?c=g=p:g=g.next=p,i=i.next}while(i!==null);g===null?c=g=t:g=g.next=t}else c=g=t;i={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:g,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function ig(e,t,i,l){var c=e.updateQueue;Bl=!1;var g=c.firstBaseUpdate,p=c.lastBaseUpdate,u=c.shared.pending;if(u!==null){c.shared.pending=null;var E=u,I=E.next;E.next=null,p===null?g=I:p.next=I,p=E;var M=e.alternate;M!==null&&(M=M.updateQueue,u=M.lastBaseUpdate,u!==p&&(u===null?M.firstBaseUpdate=I:u.next=I,M.lastBaseUpdate=E))}if(g!==null){var b=c.baseState;p=0,M=I=E=null,u=g;do{var C=u.lane,R=u.eventTime;if((l&C)===C){M!==null&&(M=M.next={eventTime:R,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=e,O=u;switch(C=t,R=i,O.tag){case 1:if(N=O.payload,typeof N=="function"){b=N.call(R,b,C);break e}b=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=O.payload,C=typeof N=="function"?N.call(R,b,C):N,C==null)break e;b=Pr({},b,C);break e;case 2:Bl=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,C=c.effects,C===null?c.effects=[u]:C.push(u))}else R={eventTime:R,lane:C,tag:u.tag,payload:u.payload,callback:u.callback,next:null},M===null?(I=M=R,E=b):M=M.next=R,p|=C;if(u=u.next,u===null){if(u=c.shared.pending,u===null)break;C=u,u=C.next,C.next=null,c.lastBaseUpdate=C,c.shared.pending=null}}while(!0);if(M===null&&(E=b),c.baseState=E,c.firstBaseUpdate=I,c.lastBaseUpdate=M,t=c.shared.interleaved,t!==null){c=t;do p|=c.lane,c=c.next;while(c!==t)}else g===null&&(c.shared.lanes=0);Qu|=p,e.lanes=p,e.memoizedState=b}}function h2(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],c=l.callback;if(c!==null){if(l.callback=null,l=i,typeof c!="function")throw Error(Tt(191,c));c.call(l)}}}var DT=new jE.Component().refs;function Kv(e,t,i,l){t=e.memoizedState,i=i(l,t),i=i==null?t:Pr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Kg={isMounted:function(e){return(e=e._reactInternals)?sc(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var l=ro(),c=Ql(e),g=Ua(l,c);g.payload=t,i!=null&&(g.callback=i),t=Yl(e,g,c),t!==null&&(Ls(t,e,c,l),Cm(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var l=ro(),c=Ql(e),g=Ua(l,c);g.tag=1,g.payload=t,i!=null&&(g.callback=i),t=Yl(e,g,c),t!==null&&(Ls(t,e,c,l),Cm(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ro(),l=Ql(e),c=Ua(i,l);c.tag=2,t!=null&&(c.callback=t),t=Yl(e,c,l),t!==null&&(Ls(t,e,l,i),Cm(t,e,l))}};function d2(e,t,i,l,c,g,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,g,p):t.prototype&&t.prototype.isPureReactComponent?!Lf(i,l)||!Lf(c,g):!0}function BT(e,t,i){var l=!1,c=ru,g=t.contextType;return typeof g=="object"&&g!==null?g=ps(g):(c=Io(t)?Ku:Bi.current,l=t.contextTypes,g=(l=l!=null)?Mh(e,c):ru),t=new t(i,g),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Kg,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=g),t}function f2(e,t,i,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,l),t.state!==e&&Kg.enqueueReplaceState(t,t.state,null)}function Yv(e,t,i,l){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=DT,R1(e);var g=t.contextType;typeof g=="object"&&g!==null?c.context=ps(g):(g=Io(t)?Ku:Bi.current,c.context=Mh(e,g)),c.state=e.memoizedState,g=t.getDerivedStateFromProps,typeof g=="function"&&(Kv(e,t,g,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Kg.enqueueReplaceState(c,c.state,null),ig(e,i,c,l),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Kd(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Tt(309));var l=i.stateNode}if(!l)throw Error(Tt(147,e));var c=l,g=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===g?t.ref:(t=function(p){var u=c.refs;u===DT&&(u=c.refs={}),p===null?delete u[g]:u[g]=p},t._stringRef=g,t)}if(typeof e!="string")throw Error(Tt(284));if(!i._owner)throw Error(Tt(290,e))}return e}function om(e,t){throw e=Object.prototype.toString.call(t),Error(Tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function p2(e){var t=e._init;return t(e._payload)}function NT(e){function t(K,X){if(e){var G=K.deletions;G===null?(K.deletions=[X],K.flags|=16):G.push(X)}}function i(K,X){if(!e)return null;for(;X!==null;)t(K,X),X=X.sibling;return null}function l(K,X){for(K=new Map;X!==null;)X.key!==null?K.set(X.key,X):K.set(X.index,X),X=X.sibling;return K}function c(K,X){return K=eu(K,X),K.index=0,K.sibling=null,K}function g(K,X,G){return K.index=G,e?(G=K.alternate,G!==null?(G=G.index,G<X?(K.flags|=2,X):G):(K.flags|=2,X)):(K.flags|=1048576,X)}function p(K){return e&&K.alternate===null&&(K.flags|=2),K}function u(K,X,G,ae){return X===null||X.tag!==6?(X=D0(G,K.mode,ae),X.return=K,X):(X=c(X,G),X.return=K,X)}function E(K,X,G,ae){var q=G.type;return q===oh?M(K,X,G.props.children,ae,G.key):X!==null&&(X.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Dl&&p2(q)===X.type)?(ae=c(X,G.props),ae.ref=Kd(K,X,G),ae.return=K,ae):(ae=Fm(G.type,G.key,G.props,null,K.mode,ae),ae.ref=Kd(K,X,G),ae.return=K,ae)}function I(K,X,G,ae){return X===null||X.tag!==4||X.stateNode.containerInfo!==G.containerInfo||X.stateNode.implementation!==G.implementation?(X=B0(G,K.mode,ae),X.return=K,X):(X=c(X,G.children||[]),X.return=K,X)}function M(K,X,G,ae,q){return X===null||X.tag!==7?(X=Wu(G,K.mode,ae,q),X.return=K,X):(X=c(X,G),X.return=K,X)}function b(K,X,G){if(typeof X=="string"&&X!==""||typeof X=="number")return X=D0(""+X,K.mode,G),X.return=K,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Xp:return G=Fm(X.type,X.key,X.props,null,K.mode,G),G.ref=Kd(K,null,X),G.return=K,G;case ih:return X=B0(X,K.mode,G),X.return=K,X;case Dl:var ae=X._init;return b(K,ae(X._payload),G)}if(tf(X)||Hd(X))return X=Wu(X,K.mode,G,null),X.return=K,X;om(K,X)}return null}function C(K,X,G,ae){var q=X!==null?X.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return q!==null?null:u(K,X,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Xp:return G.key===q?E(K,X,G,ae):null;case ih:return G.key===q?I(K,X,G,ae):null;case Dl:return q=G._init,C(K,X,q(G._payload),ae)}if(tf(G)||Hd(G))return q!==null?null:M(K,X,G,ae,null);om(K,G)}return null}function R(K,X,G,ae,q){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return K=K.get(G)||null,u(X,K,""+ae,q);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Xp:return K=K.get(ae.key===null?G:ae.key)||null,E(X,K,ae,q);case ih:return K=K.get(ae.key===null?G:ae.key)||null,I(X,K,ae,q);case Dl:var H=ae._init;return R(K,X,G,H(ae._payload),q)}if(tf(ae)||Hd(ae))return K=K.get(G)||null,M(X,K,ae,q,null);om(X,ae)}return null}function N(K,X,G,ae){for(var q=null,H=null,T=X,j=X=0,D=null;T!==null&&j<G.length;j++){T.index>j?(D=T,T=null):D=T.sibling;var te=C(K,T,G[j],ae);if(te===null){T===null&&(T=D);break}e&&T&&te.alternate===null&&t(K,T),X=g(te,X,j),H===null?q=te:H.sibling=te,H=te,T=D}if(j===G.length)return i(K,T),vr&&Bu(K,j),q;if(T===null){for(;j<G.length;j++)T=b(K,G[j],ae),T!==null&&(X=g(T,X,j),H===null?q=T:H.sibling=T,H=T);return vr&&Bu(K,j),q}for(T=l(K,T);j<G.length;j++)D=R(T,K,j,G[j],ae),D!==null&&(e&&D.alternate!==null&&T.delete(D.key===null?j:D.key),X=g(D,X,j),H===null?q=D:H.sibling=D,H=D);return e&&T.forEach(function(W){return t(K,W)}),vr&&Bu(K,j),q}function O(K,X,G,ae){var q=Hd(G);if(typeof q!="function")throw Error(Tt(150));if(G=q.call(G),G==null)throw Error(Tt(151));for(var H=q=null,T=X,j=X=0,D=null,te=G.next();T!==null&&!te.done;j++,te=G.next()){T.index>j?(D=T,T=null):D=T.sibling;var W=C(K,T,te.value,ae);if(W===null){T===null&&(T=D);break}e&&T&&W.alternate===null&&t(K,T),X=g(W,X,j),H===null?q=W:H.sibling=W,H=W,T=D}if(te.done)return i(K,T),vr&&Bu(K,j),q;if(T===null){for(;!te.done;j++,te=G.next())te=b(K,te.value,ae),te!==null&&(X=g(te,X,j),H===null?q=te:H.sibling=te,H=te);return vr&&Bu(K,j),q}for(T=l(K,T);!te.done;j++,te=G.next())te=R(T,K,j,te.value,ae),te!==null&&(e&&te.alternate!==null&&T.delete(te.key===null?j:te.key),X=g(te,X,j),H===null?q=te:H.sibling=te,H=te);return e&&T.forEach(function(ve){return t(K,ve)}),vr&&Bu(K,j),q}function he(K,X,G,ae){if(typeof G=="object"&&G!==null&&G.type===oh&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Xp:e:{for(var q=G.key,H=X;H!==null;){if(H.key===q){if(q=G.type,q===oh){if(H.tag===7){i(K,H.sibling),X=c(H,G.props.children),X.return=K,K=X;break e}}else if(H.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Dl&&p2(q)===H.type){i(K,H.sibling),X=c(H,G.props),X.ref=Kd(K,H,G),X.return=K,K=X;break e}i(K,H);break}else t(K,H);H=H.sibling}G.type===oh?(X=Wu(G.props.children,K.mode,ae,G.key),X.return=K,K=X):(ae=Fm(G.type,G.key,G.props,null,K.mode,ae),ae.ref=Kd(K,X,G),ae.return=K,K=ae)}return p(K);case ih:e:{for(H=G.key;X!==null;){if(X.key===H)if(X.tag===4&&X.stateNode.containerInfo===G.containerInfo&&X.stateNode.implementation===G.implementation){i(K,X.sibling),X=c(X,G.children||[]),X.return=K,K=X;break e}else{i(K,X);break}else t(K,X);X=X.sibling}X=B0(G,K.mode,ae),X.return=K,K=X}return p(K);case Dl:return H=G._init,he(K,X,H(G._payload),ae)}if(tf(G))return N(K,X,G,ae);if(Hd(G))return O(K,X,G,ae);om(K,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,X!==null&&X.tag===6?(i(K,X.sibling),X=c(X,G),X.return=K,K=X):(i(K,X),X=D0(G,K.mode,ae),X.return=K,K=X),p(K)):i(K,X)}return he}var zh=NT(!0),UT=NT(!1),op={},pa=uu(op),Uf=uu(op),$f=uu(op);function Hu(e){if(e===op)throw Error(Tt(174));return e}function j1(e,t){switch(lr($f,t),lr(Uf,e),lr(pa,op),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Av(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Av(t,e)}dr(pa),lr(pa,t)}function Fh(){dr(pa),dr(Uf),dr($f)}function $T(e){Hu($f.current);var t=Hu(pa.current),i=Av(t,e.type);t!==i&&(lr(Uf,e),lr(pa,i))}function L1(e){Uf.current===e&&(dr(pa),dr(Uf))}var Tr=uu(0);function og(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var z0=[];function D1(){for(var e=0;e<z0.length;e++)z0[e]._workInProgressVersionPrimary=null;z0.length=0}var Pm=qa.ReactCurrentDispatcher,F0=qa.ReactCurrentBatchConfig,Ju=0,Cr=null,Yr=null,ci=null,sg=!1,_f=!1,Vf=0,k3=0;function Oi(){throw Error(Tt(321))}function B1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ds(e[i],t[i]))return!1;return!0}function N1(e,t,i,l,c,g){if(Ju=g,Cr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pm.current=e===null||e.memoizedState===null?R3:j3,e=i(l,c),_f){g=0;do{if(_f=!1,Vf=0,25<=g)throw Error(Tt(301));g+=1,ci=Yr=null,t.updateQueue=null,Pm.current=L3,e=i(l,c)}while(_f)}if(Pm.current=ag,t=Yr!==null&&Yr.next!==null,Ju=0,ci=Yr=Cr=null,sg=!1,t)throw Error(Tt(300));return e}function U1(){var e=Vf!==0;return Vf=0,e}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?Cr.memoizedState=ci=e:ci=ci.next=e,ci}function ms(){if(Yr===null){var e=Cr.alternate;e=e!==null?e.memoizedState:null}else e=Yr.next;var t=ci===null?Cr.memoizedState:ci.next;if(t!==null)ci=t,Yr=e;else{if(e===null)throw Error(Tt(310));Yr=e,e={memoizedState:Yr.memoizedState,baseState:Yr.baseState,baseQueue:Yr.baseQueue,queue:Yr.queue,next:null},ci===null?Cr.memoizedState=ci=e:ci=ci.next=e}return ci}function Gf(e,t){return typeof t=="function"?t(e):t}function O0(e){var t=ms(),i=t.queue;if(i===null)throw Error(Tt(311));i.lastRenderedReducer=e;var l=Yr,c=l.baseQueue,g=i.pending;if(g!==null){if(c!==null){var p=c.next;c.next=g.next,g.next=p}l.baseQueue=c=g,i.pending=null}if(c!==null){g=c.next,l=l.baseState;var u=p=null,E=null,I=g;do{var M=I.lane;if((Ju&M)===M)E!==null&&(E=E.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),l=I.hasEagerState?I.eagerState:e(l,I.action);else{var b={lane:M,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};E===null?(u=E=b,p=l):E=E.next=b,Cr.lanes|=M,Qu|=M}I=I.next}while(I!==null&&I!==g);E===null?p=l:E.next=u,Ds(l,t.memoizedState)||(Eo=!0),t.memoizedState=l,t.baseState=p,t.baseQueue=E,i.lastRenderedState=l}if(e=i.interleaved,e!==null){c=e;do g=c.lane,Cr.lanes|=g,Qu|=g,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function R0(e){var t=ms(),i=t.queue;if(i===null)throw Error(Tt(311));i.lastRenderedReducer=e;var l=i.dispatch,c=i.pending,g=t.memoizedState;if(c!==null){i.pending=null;var p=c=c.next;do g=e(g,p.action),p=p.next;while(p!==c);Ds(g,t.memoizedState)||(Eo=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),i.lastRenderedState=g}return[g,l]}function VT(){}function GT(e,t){var i=Cr,l=ms(),c=t(),g=!Ds(l.memoizedState,c);if(g&&(l.memoizedState=c,Eo=!0),l=l.queue,$1(WT.bind(null,i,l,e),[e]),l.getSnapshot!==t||g||ci!==null&&ci.memoizedState.tag&1){if(i.flags|=2048,Hf(9,ZT.bind(null,i,l,c,t),void 0,null),hi===null)throw Error(Tt(349));Ju&30||HT(i,t,c)}return c}function HT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Cr.updateQueue,t===null?(t={lastEffect:null,stores:null},Cr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function ZT(e,t,i,l){t.value=i,t.getSnapshot=l,XT(t)&&qT(e)}function WT(e,t,i){return i(function(){XT(t)&&qT(e)})}function XT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ds(e,i)}catch{return!0}}function qT(e){var t=Ga(e,1);t!==null&&Ls(t,e,1,-1)}function m2(e){var t=oa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gf,lastRenderedState:e},t.queue=e,e=e.dispatch=O3.bind(null,Cr,e),[t.memoizedState,e]}function Hf(e,t,i,l){return e={tag:e,create:t,destroy:i,deps:l,next:null},t=Cr.updateQueue,t===null?(t={lastEffect:null,stores:null},Cr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,t.lastEffect=e)),e}function KT(){return ms().memoizedState}function Am(e,t,i,l){var c=oa();Cr.flags|=e,c.memoizedState=Hf(1|t,i,void 0,l===void 0?null:l)}function Yg(e,t,i,l){var c=ms();l=l===void 0?null:l;var g=void 0;if(Yr!==null){var p=Yr.memoizedState;if(g=p.destroy,l!==null&&B1(l,p.deps)){c.memoizedState=Hf(t,i,g,l);return}}Cr.flags|=e,c.memoizedState=Hf(1|t,i,g,l)}function g2(e,t){return Am(8390656,8,e,t)}function $1(e,t){return Yg(2048,8,e,t)}function YT(e,t){return Yg(4,2,e,t)}function JT(e,t){return Yg(4,4,e,t)}function QT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function eI(e,t,i){return i=i!=null?i.concat([e]):null,Yg(4,4,QT.bind(null,t,e),i)}function V1(){}function tI(e,t){var i=ms();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&B1(t,l[1])?l[0]:(i.memoizedState=[e,t],e)}function nI(e,t){var i=ms();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&B1(t,l[1])?l[0]:(e=e(),i.memoizedState=[e,t],e)}function rI(e,t,i){return Ju&21?(Ds(i,t)||(i=sT(),Cr.lanes|=i,Qu|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Eo=!0),e.memoizedState=i)}function z3(e,t){var i=Qn;Qn=i!==0&&4>i?i:4,e(!0);var l=F0.transition;F0.transition={};try{e(!1),t()}finally{Qn=i,F0.transition=l}}function iI(){return ms().memoizedState}function F3(e,t,i){var l=Ql(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},oI(e))sI(t,i);else if(i=jT(e,t,i,l),i!==null){var c=ro();Ls(i,e,l,c),aI(i,t,l)}}function O3(e,t,i){var l=Ql(e),c={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(oI(e))sI(t,c);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var p=t.lastRenderedState,u=g(p,i);if(c.hasEagerState=!0,c.eagerState=u,Ds(u,p)){var E=t.interleaved;E===null?(c.next=c,O1(t)):(c.next=E.next,E.next=c),t.interleaved=c;return}}catch{}finally{}i=jT(e,t,c,l),i!==null&&(c=ro(),Ls(i,e,l,c),aI(i,t,l))}}function oI(e){var t=e.alternate;return e===Cr||t!==null&&t===Cr}function sI(e,t){_f=sg=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function aI(e,t,i){if(i&4194240){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,x1(e,i)}}var ag={readContext:ps,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useInsertionEffect:Oi,useLayoutEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useMutableSource:Oi,useSyncExternalStore:Oi,useId:Oi,unstable_isNewReconciler:!1},R3={readContext:ps,useCallback:function(e,t){return oa().memoizedState=[e,t===void 0?null:t],e},useContext:ps,useEffect:g2,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Am(4194308,4,QT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Am(4194308,4,e,t)},useInsertionEffect:function(e,t){return Am(4,2,e,t)},useMemo:function(e,t){var i=oa();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var l=oa();return t=i!==void 0?i(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=F3.bind(null,Cr,e),[l.memoizedState,e]},useRef:function(e){var t=oa();return e={current:e},t.memoizedState=e},useState:m2,useDebugValue:V1,useDeferredValue:function(e){return oa().memoizedState=e},useTransition:function(){var e=m2(!1),t=e[0];return e=z3.bind(null,e[1]),oa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var l=Cr,c=oa();if(vr){if(i===void 0)throw Error(Tt(407));i=i()}else{if(i=t(),hi===null)throw Error(Tt(349));Ju&30||HT(l,t,i)}c.memoizedState=i;var g={value:i,getSnapshot:t};return c.queue=g,g2(WT.bind(null,l,g,e),[e]),l.flags|=2048,Hf(9,ZT.bind(null,l,g,i,t),void 0,null),i},useId:function(){var e=oa(),t=hi.identifierPrefix;if(vr){var i=Na,l=Ba;i=(l&~(1<<32-js(l)-1)).toString(32)+i,t=":"+t+"R"+i,i=Vf++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=k3++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},j3={readContext:ps,useCallback:tI,useContext:ps,useEffect:$1,useImperativeHandle:eI,useInsertionEffect:YT,useLayoutEffect:JT,useMemo:nI,useReducer:O0,useRef:KT,useState:function(){return O0(Gf)},useDebugValue:V1,useDeferredValue:function(e){var t=ms();return rI(t,Yr.memoizedState,e)},useTransition:function(){var e=O0(Gf)[0],t=ms().memoizedState;return[e,t]},useMutableSource:VT,useSyncExternalStore:GT,useId:iI,unstable_isNewReconciler:!1},L3={readContext:ps,useCallback:tI,useContext:ps,useEffect:$1,useImperativeHandle:eI,useInsertionEffect:YT,useLayoutEffect:JT,useMemo:nI,useReducer:R0,useRef:KT,useState:function(){return R0(Gf)},useDebugValue:V1,useDeferredValue:function(e){var t=ms();return Yr===null?t.memoizedState=e:rI(t,Yr.memoizedState,e)},useTransition:function(){var e=R0(Gf)[0],t=ms().memoizedState;return[e,t]},useMutableSource:VT,useSyncExternalStore:GT,useId:iI,unstable_isNewReconciler:!1};function Oh(e,t){try{var i="",l=t;do i+=hk(l),l=l.return;while(l);var c=i}catch(g){c=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:t,stack:c,digest:null}}function j0(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Jv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var D3=typeof WeakMap=="function"?WeakMap:Map;function lI(e,t,i){i=Ua(-1,i),i.tag=3,i.payload={element:null};var l=t.value;return i.callback=function(){ug||(ug=!0,l_=l),Jv(e,t)},i}function uI(e,t,i){i=Ua(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var c=t.value;i.payload=function(){return l(c)},i.callback=function(){Jv(e,t)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(i.callback=function(){Jv(e,t),typeof l!="function"&&(Jl===null?Jl=new Set([this]):Jl.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),i}function y2(e,t,i){var l=e.pingCache;if(l===null){l=e.pingCache=new D3;var c=new Set;l.set(t,c)}else c=l.get(t),c===void 0&&(c=new Set,l.set(t,c));c.has(i)||(c.add(i),e=J3.bind(null,e,t,i),t.then(e,e))}function v2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _2(e,t,i,l,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Ua(-1,1),t.tag=2,Yl(i,t,1))),i.lanes|=1),e)}var B3=qa.ReactCurrentOwner,Eo=!1;function Qi(e,t,i,l){t.child=e===null?UT(t,null,i,l):zh(t,e.child,i,l)}function x2(e,t,i,l,c){i=i.render;var g=t.ref;return Eh(t,c),l=N1(e,t,i,l,g,c),i=U1(),e!==null&&!Eo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ha(e,t,c)):(vr&&i&&P1(t),t.flags|=1,Qi(e,t,l,c),t.child)}function w2(e,t,i,l,c){if(e===null){var g=i.type;return typeof g=="function"&&!Y1(g)&&g.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=g,cI(e,t,g,l,c)):(e=Fm(i.type,null,l,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!(e.lanes&c)){var p=g.memoizedProps;if(i=i.compare,i=i!==null?i:Lf,i(p,l)&&e.ref===t.ref)return Ha(e,t,c)}return t.flags|=1,e=eu(g,l),e.ref=t.ref,e.return=t,t.child=e}function cI(e,t,i,l,c){if(e!==null){var g=e.memoizedProps;if(Lf(g,l)&&e.ref===t.ref)if(Eo=!1,t.pendingProps=l=g,(e.lanes&c)!==0)e.flags&131072&&(Eo=!0);else return t.lanes=e.lanes,Ha(e,t,c)}return Qv(e,t,i,l,c)}function hI(e,t,i){var l=t.pendingProps,c=l.children,g=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},lr(mh,No),No|=i;else{if(!(i&1073741824))return e=g!==null?g.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,lr(mh,No),No|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=g!==null?g.baseLanes:i,lr(mh,No),No|=l}else g!==null?(l=g.baseLanes|i,t.memoizedState=null):l=i,lr(mh,No),No|=l;return Qi(e,t,c,i),t.child}function dI(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Qv(e,t,i,l,c){var g=Io(i)?Ku:Bi.current;return g=Mh(t,g),Eh(t,c),i=N1(e,t,i,l,g,c),l=U1(),e!==null&&!Eo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ha(e,t,c)):(vr&&l&&P1(t),t.flags|=1,Qi(e,t,i,c),t.child)}function b2(e,t,i,l,c){if(Io(i)){var g=!0;Qm(t)}else g=!1;if(Eh(t,c),t.stateNode===null)Mm(e,t),BT(t,i,l),Yv(t,i,l,c),l=!0;else if(e===null){var p=t.stateNode,u=t.memoizedProps;p.props=u;var E=p.context,I=i.contextType;typeof I=="object"&&I!==null?I=ps(I):(I=Io(i)?Ku:Bi.current,I=Mh(t,I));var M=i.getDerivedStateFromProps,b=typeof M=="function"||typeof p.getSnapshotBeforeUpdate=="function";b||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(u!==l||E!==I)&&f2(t,p,l,I),Bl=!1;var C=t.memoizedState;p.state=C,ig(t,l,p,c),E=t.memoizedState,u!==l||C!==E||To.current||Bl?(typeof M=="function"&&(Kv(t,i,M,l),E=t.memoizedState),(u=Bl||d2(t,i,u,l,C,E,I))?(b||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=E),p.props=l,p.state=E,p.context=I,l=u):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{p=t.stateNode,LT(e,t),u=t.memoizedProps,I=t.type===t.elementType?u:Ms(t.type,u),p.props=I,b=t.pendingProps,C=p.context,E=i.contextType,typeof E=="object"&&E!==null?E=ps(E):(E=Io(i)?Ku:Bi.current,E=Mh(t,E));var R=i.getDerivedStateFromProps;(M=typeof R=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(u!==b||C!==E)&&f2(t,p,l,E),Bl=!1,C=t.memoizedState,p.state=C,ig(t,l,p,c);var N=t.memoizedState;u!==b||C!==N||To.current||Bl?(typeof R=="function"&&(Kv(t,i,R,l),N=t.memoizedState),(I=Bl||d2(t,i,I,l,C,N,E)||!1)?(M||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,N,E),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,N,E)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||u===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=N),p.props=l,p.state=N,p.context=E,l=I):(typeof p.componentDidUpdate!="function"||u===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),l=!1)}return e_(e,t,i,l,g,c)}function e_(e,t,i,l,c,g){dI(e,t);var p=(t.flags&128)!==0;if(!l&&!p)return c&&a2(t,i,!1),Ha(e,t,g);l=t.stateNode,B3.current=t;var u=p&&typeof i.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&p?(t.child=zh(t,e.child,null,g),t.child=zh(t,null,u,g)):Qi(e,t,u,g),t.memoizedState=l.state,c&&a2(t,i,!0),t.child}function fI(e){var t=e.stateNode;t.pendingContext?s2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&s2(e,t.context,!1),j1(e,t.containerInfo)}function S2(e,t,i,l,c){return kh(),M1(c),t.flags|=256,Qi(e,t,i,l),t.child}var t_={dehydrated:null,treeContext:null,retryLane:0};function n_(e){return{baseLanes:e,cachePool:null,transitions:null}}function pI(e,t,i){var l=t.pendingProps,c=Tr.current,g=!1,p=(t.flags&128)!==0,u;if((u=p)||(u=e!==null&&e.memoizedState===null?!1:(c&2)!==0),u?(g=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),lr(Tr,c&1),e===null)return Xv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=l.children,e=l.fallback,g?(l=t.mode,g=t.child,p={mode:"hidden",children:p},!(l&1)&&g!==null?(g.childLanes=0,g.pendingProps=p):g=ey(p,l,0,null),e=Wu(e,l,i,null),g.return=t,e.return=t,g.sibling=e,t.child=g,t.child.memoizedState=n_(i),t.memoizedState=t_,e):G1(t,p));if(c=e.memoizedState,c!==null&&(u=c.dehydrated,u!==null))return N3(e,t,p,l,u,c,i);if(g){g=l.fallback,p=t.mode,c=e.child,u=c.sibling;var E={mode:"hidden",children:l.children};return!(p&1)&&t.child!==c?(l=t.child,l.childLanes=0,l.pendingProps=E,t.deletions=null):(l=eu(c,E),l.subtreeFlags=c.subtreeFlags&14680064),u!==null?g=eu(u,g):(g=Wu(g,p,i,null),g.flags|=2),g.return=t,l.return=t,l.sibling=g,t.child=l,l=g,g=t.child,p=e.child.memoizedState,p=p===null?n_(i):{baseLanes:p.baseLanes|i,cachePool:null,transitions:p.transitions},g.memoizedState=p,g.childLanes=e.childLanes&~i,t.memoizedState=t_,l}return g=e.child,e=g.sibling,l=eu(g,{mode:"visible",children:l.children}),!(t.mode&1)&&(l.lanes=i),l.return=t,l.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=l,t.memoizedState=null,l}function G1(e,t){return t=ey({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sm(e,t,i,l){return l!==null&&M1(l),zh(t,e.child,null,i),e=G1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function N3(e,t,i,l,c,g,p){if(i)return t.flags&256?(t.flags&=-257,l=j0(Error(Tt(422))),sm(e,t,p,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(g=l.fallback,c=t.mode,l=ey({mode:"visible",children:l.children},c,0,null),g=Wu(g,c,p,null),g.flags|=2,l.return=t,g.return=t,l.sibling=g,t.child=l,t.mode&1&&zh(t,e.child,null,p),t.child.memoizedState=n_(p),t.memoizedState=t_,g);if(!(t.mode&1))return sm(e,t,p,null);if(c.data==="$!"){if(l=c.nextSibling&&c.nextSibling.dataset,l)var u=l.dgst;return l=u,g=Error(Tt(419)),l=j0(g,l,void 0),sm(e,t,p,l)}if(u=(p&e.childLanes)!==0,Eo||u){if(l=hi,l!==null){switch(p&-p){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(l.suspendedLanes|p)?0:c,c!==0&&c!==g.retryLane&&(g.retryLane=c,Ga(e,c),Ls(l,e,c,-1))}return K1(),l=j0(Error(Tt(421))),sm(e,t,p,l)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=Q3.bind(null,e),c._reactRetry=t,null):(e=g.treeContext,Go=Kl(c.nextSibling),Ho=t,vr=!0,zs=null,e!==null&&(ls[us++]=Ba,ls[us++]=Na,ls[us++]=Yu,Ba=e.id,Na=e.overflow,Yu=t),t=G1(t,l.children),t.flags|=4096,t)}function E2(e,t,i){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),qv(e.return,t,i)}function L0(e,t,i,l,c){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:c}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=i,g.tailMode=c)}function mI(e,t,i){var l=t.pendingProps,c=l.revealOrder,g=l.tail;if(Qi(e,t,l.children,i),l=Tr.current,l&2)l=l&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&E2(e,i,t);else if(e.tag===19)E2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(lr(Tr,l),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&og(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),L0(t,!1,c,i,g);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&og(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}L0(t,!0,i,null,g);break;case"together":L0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Qu|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Tt(153));if(t.child!==null){for(e=t.child,i=eu(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=eu(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function U3(e,t,i){switch(t.tag){case 3:fI(t),kh();break;case 5:$T(t);break;case 1:Io(t.type)&&Qm(t);break;case 4:j1(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,c=t.memoizedProps.value;lr(ng,l._currentValue),l._currentValue=c;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(lr(Tr,Tr.current&1),t.flags|=128,null):i&t.child.childLanes?pI(e,t,i):(lr(Tr,Tr.current&1),e=Ha(e,t,i),e!==null?e.sibling:null);lr(Tr,Tr.current&1);break;case 19:if(l=(i&t.childLanes)!==0,e.flags&128){if(l)return mI(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),lr(Tr,Tr.current),l)break;return null;case 22:case 23:return t.lanes=0,hI(e,t,i)}return Ha(e,t,i)}var gI,r_,yI,vI;gI=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};r_=function(){};yI=function(e,t,i,l){var c=e.memoizedProps;if(c!==l){e=t.stateNode,Hu(pa.current);var g=null;switch(i){case"input":c=Tv(e,c),l=Tv(e,l),g=[];break;case"select":c=Pr({},c,{value:void 0}),l=Pr({},l,{value:void 0}),g=[];break;case"textarea":c=Pv(e,c),l=Pv(e,l),g=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Ym)}Mv(i,l);var p;i=null;for(I in c)if(!l.hasOwnProperty(I)&&c.hasOwnProperty(I)&&c[I]!=null)if(I==="style"){var u=c[I];for(p in u)u.hasOwnProperty(p)&&(i||(i={}),i[p]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(Mf.hasOwnProperty(I)?g||(g=[]):(g=g||[]).push(I,null));for(I in l){var E=l[I];if(u=c!=null?c[I]:void 0,l.hasOwnProperty(I)&&E!==u&&(E!=null||u!=null))if(I==="style")if(u){for(p in u)!u.hasOwnProperty(p)||E&&E.hasOwnProperty(p)||(i||(i={}),i[p]="");for(p in E)E.hasOwnProperty(p)&&u[p]!==E[p]&&(i||(i={}),i[p]=E[p])}else i||(g||(g=[]),g.push(I,i)),i=E;else I==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,u=u?u.__html:void 0,E!=null&&u!==E&&(g=g||[]).push(I,E)):I==="children"?typeof E!="string"&&typeof E!="number"||(g=g||[]).push(I,""+E):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(Mf.hasOwnProperty(I)?(E!=null&&I==="onScroll"&&hr("scroll",e),g||u===E||(g=[])):(g=g||[]).push(I,E))}i&&(g=g||[]).push("style",i);var I=g;(t.updateQueue=I)&&(t.flags|=4)}};vI=function(e,t,i,l){i!==l&&(t.flags|=4)};function Yd(e,t){if(!vr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ri(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags&14680064,l|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=i,t}function $3(e,t,i){var l=t.pendingProps;switch(A1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ri(t),null;case 1:return Io(t.type)&&Jm(),Ri(t),null;case 3:return l=t.stateNode,Fh(),dr(To),dr(Bi),D1(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(im(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zs!==null&&(h_(zs),zs=null))),r_(e,t),Ri(t),null;case 5:L1(t);var c=Hu($f.current);if(i=t.type,e!==null&&t.stateNode!=null)yI(e,t,i,l,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(Tt(166));return Ri(t),null}if(e=Hu(pa.current),im(t)){l=t.stateNode,i=t.type;var g=t.memoizedProps;switch(l[aa]=t,l[Nf]=g,e=(t.mode&1)!==0,i){case"dialog":hr("cancel",l),hr("close",l);break;case"iframe":case"object":case"embed":hr("load",l);break;case"video":case"audio":for(c=0;c<rf.length;c++)hr(rf[c],l);break;case"source":hr("error",l);break;case"img":case"image":case"link":hr("error",l),hr("load",l);break;case"details":hr("toggle",l);break;case"input":Fb(l,g),hr("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!g.multiple},hr("invalid",l);break;case"textarea":Rb(l,g),hr("invalid",l)}Mv(i,g),c=null;for(var p in g)if(g.hasOwnProperty(p)){var u=g[p];p==="children"?typeof u=="string"?l.textContent!==u&&(g.suppressHydrationWarning!==!0&&rm(l.textContent,u,e),c=["children",u]):typeof u=="number"&&l.textContent!==""+u&&(g.suppressHydrationWarning!==!0&&rm(l.textContent,u,e),c=["children",""+u]):Mf.hasOwnProperty(p)&&u!=null&&p==="onScroll"&&hr("scroll",l)}switch(i){case"input":qp(l),Ob(l,g,!0);break;case"textarea":qp(l),jb(l);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(l.onclick=Ym)}l=c,t.updateQueue=l,l!==null&&(t.flags|=4)}else{p=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=HE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=p.createElement(i,{is:l.is}):(e=p.createElement(i),i==="select"&&(p=e,l.multiple?p.multiple=!0:l.size&&(p.size=l.size))):e=p.createElementNS(e,i),e[aa]=t,e[Nf]=l,gI(e,t,!1,!1),t.stateNode=e;e:{switch(p=kv(i,l),i){case"dialog":hr("cancel",e),hr("close",e),c=l;break;case"iframe":case"object":case"embed":hr("load",e),c=l;break;case"video":case"audio":for(c=0;c<rf.length;c++)hr(rf[c],e);c=l;break;case"source":hr("error",e),c=l;break;case"img":case"image":case"link":hr("error",e),hr("load",e),c=l;break;case"details":hr("toggle",e),c=l;break;case"input":Fb(e,l),c=Tv(e,l),hr("invalid",e);break;case"option":c=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},c=Pr({},l,{value:void 0}),hr("invalid",e);break;case"textarea":Rb(e,l),c=Pv(e,l),hr("invalid",e);break;default:c=l}Mv(i,c),u=c;for(g in u)if(u.hasOwnProperty(g)){var E=u[g];g==="style"?XE(e,E):g==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&ZE(e,E)):g==="children"?typeof E=="string"?(i!=="textarea"||E!=="")&&kf(e,E):typeof E=="number"&&kf(e,""+E):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Mf.hasOwnProperty(g)?E!=null&&g==="onScroll"&&hr("scroll",e):E!=null&&p1(e,g,E,p))}switch(i){case"input":qp(e),Ob(e,l,!1);break;case"textarea":qp(e),jb(e);break;case"option":l.value!=null&&e.setAttribute("value",""+nu(l.value));break;case"select":e.multiple=!!l.multiple,g=l.value,g!=null?xh(e,!!l.multiple,g,!1):l.defaultValue!=null&&xh(e,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Ym)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ri(t),null;case 6:if(e&&t.stateNode!=null)vI(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(Tt(166));if(i=Hu($f.current),Hu(pa.current),im(t)){if(l=t.stateNode,i=t.memoizedProps,l[aa]=t,(g=l.nodeValue!==i)&&(e=Ho,e!==null))switch(e.tag){case 3:rm(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rm(l.nodeValue,i,(e.mode&1)!==0)}g&&(t.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[aa]=t,t.stateNode=l}return Ri(t),null;case 13:if(dr(Tr),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vr&&Go!==null&&t.mode&1&&!(t.flags&128))RT(),kh(),t.flags|=98560,g=!1;else if(g=im(t),l!==null&&l.dehydrated!==null){if(e===null){if(!g)throw Error(Tt(318));if(g=t.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(Tt(317));g[aa]=t}else kh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ri(t),g=!1}else zs!==null&&(h_(zs),zs=null),g=!0;if(!g)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,t.mode&1&&(e===null||Tr.current&1?Jr===0&&(Jr=3):K1())),t.updateQueue!==null&&(t.flags|=4),Ri(t),null);case 4:return Fh(),r_(e,t),e===null&&Df(t.stateNode.containerInfo),Ri(t),null;case 10:return F1(t.type._context),Ri(t),null;case 17:return Io(t.type)&&Jm(),Ri(t),null;case 19:if(dr(Tr),g=t.memoizedState,g===null)return Ri(t),null;if(l=(t.flags&128)!==0,p=g.rendering,p===null)if(l)Yd(g,!1);else{if(Jr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=og(e),p!==null){for(t.flags|=128,Yd(g,!1),l=p.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=i,i=t.child;i!==null;)g=i,e=l,g.flags&=14680066,p=g.alternate,p===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=p.childLanes,g.lanes=p.lanes,g.child=p.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=p.memoizedProps,g.memoizedState=p.memoizedState,g.updateQueue=p.updateQueue,g.type=p.type,e=p.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return lr(Tr,Tr.current&1|2),t.child}e=e.sibling}g.tail!==null&&Nr()>Rh&&(t.flags|=128,l=!0,Yd(g,!1),t.lanes=4194304)}else{if(!l)if(e=og(p),e!==null){if(t.flags|=128,l=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Yd(g,!0),g.tail===null&&g.tailMode==="hidden"&&!p.alternate&&!vr)return Ri(t),null}else 2*Nr()-g.renderingStartTime>Rh&&i!==1073741824&&(t.flags|=128,l=!0,Yd(g,!1),t.lanes=4194304);g.isBackwards?(p.sibling=t.child,t.child=p):(i=g.last,i!==null?i.sibling=p:t.child=p,g.last=p)}return g.tail!==null?(t=g.tail,g.rendering=t,g.tail=t.sibling,g.renderingStartTime=Nr(),t.sibling=null,i=Tr.current,lr(Tr,l?i&1|2:i&1),t):(Ri(t),null);case 22:case 23:return q1(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&t.mode&1?No&1073741824&&(Ri(t),t.subtreeFlags&6&&(t.flags|=8192)):Ri(t),null;case 24:return null;case 25:return null}throw Error(Tt(156,t.tag))}function V3(e,t){switch(A1(t),t.tag){case 1:return Io(t.type)&&Jm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fh(),dr(To),dr(Bi),D1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return L1(t),null;case 13:if(dr(Tr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Tt(340));kh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return dr(Tr),null;case 4:return Fh(),null;case 10:return F1(t.type._context),null;case 22:case 23:return q1(),null;case 24:return null;default:return null}}var am=!1,Li=!1,G3=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function ph(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){Or(e,t,l)}else i.current=null}function i_(e,t,i){try{i()}catch(l){Or(e,t,l)}}var T2=!1;function H3(e,t){if(Uv=Xm,e=bT(),C1(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var c=l.anchorOffset,g=l.focusNode;l=l.focusOffset;try{i.nodeType,g.nodeType}catch{i=null;break e}var p=0,u=-1,E=-1,I=0,M=0,b=e,C=null;t:for(;;){for(var R;b!==i||c!==0&&b.nodeType!==3||(u=p+c),b!==g||l!==0&&b.nodeType!==3||(E=p+l),b.nodeType===3&&(p+=b.nodeValue.length),(R=b.firstChild)!==null;)C=b,b=R;for(;;){if(b===e)break t;if(C===i&&++I===c&&(u=p),C===g&&++M===l&&(E=p),(R=b.nextSibling)!==null)break;b=C,C=b.parentNode}b=R}i=u===-1||E===-1?null:{start:u,end:E}}else i=null}i=i||{start:0,end:0}}else i=null;for($v={focusedElem:e,selectionRange:i},Xm=!1,Qt=t;Qt!==null;)if(t=Qt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qt=e;else for(;Qt!==null;){t=Qt;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var O=N.memoizedProps,he=N.memoizedState,K=t.stateNode,X=K.getSnapshotBeforeUpdate(t.elementType===t.type?O:Ms(t.type,O),he);K.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Tt(163))}}catch(ae){Or(t,t.return,ae)}if(e=t.sibling,e!==null){e.return=t.return,Qt=e;break}Qt=t.return}return N=T2,T2=!1,N}function xf(e,t,i){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&e)===e){var g=c.destroy;c.destroy=void 0,g!==void 0&&i_(t,i,g)}c=c.next}while(c!==l)}}function Jg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==t)}}function o_(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function _I(e){var t=e.alternate;t!==null&&(e.alternate=null,_I(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[aa],delete t[Nf],delete t[Hv],delete t[C3],delete t[P3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xI(e){return e.tag===5||e.tag===3||e.tag===4}function I2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function s_(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Ym));else if(l!==4&&(e=e.child,e!==null))for(s_(e,t,i),e=e.sibling;e!==null;)s_(e,t,i),e=e.sibling}function a_(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(a_(e,t,i),e=e.sibling;e!==null;)a_(e,t,i),e=e.sibling}var wi=null,ks=!1;function jl(e,t,i){for(i=i.child;i!==null;)wI(e,t,i),i=i.sibling}function wI(e,t,i){if(fa&&typeof fa.onCommitFiberUnmount=="function")try{fa.onCommitFiberUnmount(Gg,i)}catch{}switch(i.tag){case 5:Li||ph(i,t);case 6:var l=wi,c=ks;wi=null,jl(e,t,i),wi=l,ks=c,wi!==null&&(ks?(e=wi,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):wi.removeChild(i.stateNode));break;case 18:wi!==null&&(ks?(e=wi,i=i.stateNode,e.nodeType===8?M0(e.parentNode,i):e.nodeType===1&&M0(e,i),Rf(e)):M0(wi,i.stateNode));break;case 4:l=wi,c=ks,wi=i.stateNode.containerInfo,ks=!0,jl(e,t,i),wi=l,ks=c;break;case 0:case 11:case 14:case 15:if(!Li&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){c=l=l.next;do{var g=c,p=g.destroy;g=g.tag,p!==void 0&&(g&2||g&4)&&i_(i,t,p),c=c.next}while(c!==l)}jl(e,t,i);break;case 1:if(!Li&&(ph(i,t),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(u){Or(i,t,u)}jl(e,t,i);break;case 21:jl(e,t,i);break;case 22:i.mode&1?(Li=(l=Li)||i.memoizedState!==null,jl(e,t,i),Li=l):jl(e,t,i);break;default:jl(e,t,i)}}function C2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new G3),t.forEach(function(l){var c=e4.bind(null,e,l);i.has(l)||(i.add(l),l.then(c,c))})}}function As(e,t){var i=t.deletions;if(i!==null)for(var l=0;l<i.length;l++){var c=i[l];try{var g=e,p=t,u=p;e:for(;u!==null;){switch(u.tag){case 5:wi=u.stateNode,ks=!1;break e;case 3:wi=u.stateNode.containerInfo,ks=!0;break e;case 4:wi=u.stateNode.containerInfo,ks=!0;break e}u=u.return}if(wi===null)throw Error(Tt(160));wI(g,p,c),wi=null,ks=!1;var E=c.alternate;E!==null&&(E.return=null),c.return=null}catch(I){Or(c,t,I)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bI(t,e),t=t.sibling}function bI(e,t){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(As(t,e),ia(e),l&4){try{xf(3,e,e.return),Jg(3,e)}catch(O){Or(e,e.return,O)}try{xf(5,e,e.return)}catch(O){Or(e,e.return,O)}}break;case 1:As(t,e),ia(e),l&512&&i!==null&&ph(i,i.return);break;case 5:if(As(t,e),ia(e),l&512&&i!==null&&ph(i,i.return),e.flags&32){var c=e.stateNode;try{kf(c,"")}catch(O){Or(e,e.return,O)}}if(l&4&&(c=e.stateNode,c!=null)){var g=e.memoizedProps,p=i!==null?i.memoizedProps:g,u=e.type,E=e.updateQueue;if(e.updateQueue=null,E!==null)try{u==="input"&&g.type==="radio"&&g.name!=null&&VE(c,g),kv(u,p);var I=kv(u,g);for(p=0;p<E.length;p+=2){var M=E[p],b=E[p+1];M==="style"?XE(c,b):M==="dangerouslySetInnerHTML"?ZE(c,b):M==="children"?kf(c,b):p1(c,M,b,I)}switch(u){case"input":Iv(c,g);break;case"textarea":GE(c,g);break;case"select":var C=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!g.multiple;var R=g.value;R!=null?xh(c,!!g.multiple,R,!1):C!==!!g.multiple&&(g.defaultValue!=null?xh(c,!!g.multiple,g.defaultValue,!0):xh(c,!!g.multiple,g.multiple?[]:"",!1))}c[Nf]=g}catch(O){Or(e,e.return,O)}}break;case 6:if(As(t,e),ia(e),l&4){if(e.stateNode===null)throw Error(Tt(162));c=e.stateNode,g=e.memoizedProps;try{c.nodeValue=g}catch(O){Or(e,e.return,O)}}break;case 3:if(As(t,e),ia(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Rf(t.containerInfo)}catch(O){Or(e,e.return,O)}break;case 4:As(t,e),ia(e);break;case 13:As(t,e),ia(e),c=e.child,c.flags&8192&&(g=c.memoizedState!==null,c.stateNode.isHidden=g,!g||c.alternate!==null&&c.alternate.memoizedState!==null||(W1=Nr())),l&4&&C2(e);break;case 22:if(M=i!==null&&i.memoizedState!==null,e.mode&1?(Li=(I=Li)||M,As(t,e),Li=I):As(t,e),ia(e),l&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!M&&e.mode&1)for(Qt=e,M=e.child;M!==null;){for(b=Qt=M;Qt!==null;){switch(C=Qt,R=C.child,C.tag){case 0:case 11:case 14:case 15:xf(4,C,C.return);break;case 1:ph(C,C.return);var N=C.stateNode;if(typeof N.componentWillUnmount=="function"){l=C,i=C.return;try{t=l,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(O){Or(l,i,O)}}break;case 5:ph(C,C.return);break;case 22:if(C.memoizedState!==null){A2(b);continue}}R!==null?(R.return=C,Qt=R):A2(b)}M=M.sibling}e:for(M=null,b=e;;){if(b.tag===5){if(M===null){M=b;try{c=b.stateNode,I?(g=c.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(u=b.stateNode,E=b.memoizedProps.style,p=E!=null&&E.hasOwnProperty("display")?E.display:null,u.style.display=WE("display",p))}catch(O){Or(e,e.return,O)}}}else if(b.tag===6){if(M===null)try{b.stateNode.nodeValue=I?"":b.memoizedProps}catch(O){Or(e,e.return,O)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;M===b&&(M=null),b=b.return}M===b&&(M=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:As(t,e),ia(e),l&4&&C2(e);break;case 21:break;default:As(t,e),ia(e)}}function ia(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(xI(i)){var l=i;break e}i=i.return}throw Error(Tt(160))}switch(l.tag){case 5:var c=l.stateNode;l.flags&32&&(kf(c,""),l.flags&=-33);var g=I2(e);a_(e,g,c);break;case 3:case 4:var p=l.stateNode.containerInfo,u=I2(e);s_(e,u,p);break;default:throw Error(Tt(161))}}catch(E){Or(e,e.return,E)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Z3(e,t,i){Qt=e,SI(e)}function SI(e,t,i){for(var l=(e.mode&1)!==0;Qt!==null;){var c=Qt,g=c.child;if(c.tag===22&&l){var p=c.memoizedState!==null||am;if(!p){var u=c.alternate,E=u!==null&&u.memoizedState!==null||Li;u=am;var I=Li;if(am=p,(Li=E)&&!I)for(Qt=c;Qt!==null;)p=Qt,E=p.child,p.tag===22&&p.memoizedState!==null?M2(c):E!==null?(E.return=p,Qt=E):M2(c);for(;g!==null;)Qt=g,SI(g),g=g.sibling;Qt=c,am=u,Li=I}P2(e)}else c.subtreeFlags&8772&&g!==null?(g.return=c,Qt=g):P2(e)}}function P2(e){for(;Qt!==null;){var t=Qt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Li||Jg(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!Li)if(i===null)l.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Ms(t.type,i.memoizedProps);l.componentDidUpdate(c,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var g=t.updateQueue;g!==null&&h2(t,g,l);break;case 3:var p=t.updateQueue;if(p!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}h2(t,p,i)}break;case 5:var u=t.stateNode;if(i===null&&t.flags&4){i=u;var E=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&i.focus();break;case"img":E.src&&(i.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var I=t.alternate;if(I!==null){var M=I.memoizedState;if(M!==null){var b=M.dehydrated;b!==null&&Rf(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Tt(163))}Li||t.flags&512&&o_(t)}catch(C){Or(t,t.return,C)}}if(t===e){Qt=null;break}if(i=t.sibling,i!==null){i.return=t.return,Qt=i;break}Qt=t.return}}function A2(e){for(;Qt!==null;){var t=Qt;if(t===e){Qt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Qt=i;break}Qt=t.return}}function M2(e){for(;Qt!==null;){var t=Qt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Jg(4,t)}catch(E){Or(t,i,E)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var c=t.return;try{l.componentDidMount()}catch(E){Or(t,c,E)}}var g=t.return;try{o_(t)}catch(E){Or(t,g,E)}break;case 5:var p=t.return;try{o_(t)}catch(E){Or(t,p,E)}}}catch(E){Or(t,t.return,E)}if(t===e){Qt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Qt=u;break}Qt=t.return}}var W3=Math.ceil,lg=qa.ReactCurrentDispatcher,H1=qa.ReactCurrentOwner,fs=qa.ReactCurrentBatchConfig,Vn=0,hi=null,Zr=null,Si=0,No=0,mh=uu(0),Jr=0,Zf=null,Qu=0,Qg=0,Z1=0,wf=null,bo=null,W1=0,Rh=1/0,Ra=null,ug=!1,l_=null,Jl=null,lm=!1,Hl=null,cg=0,bf=0,u_=null,km=-1,zm=0;function ro(){return Vn&6?Nr():km!==-1?km:km=Nr()}function Ql(e){return e.mode&1?Vn&2&&Si!==0?Si&-Si:M3.transition!==null?(zm===0&&(zm=sT()),zm):(e=Qn,e!==0||(e=window.event,e=e===void 0?16:fT(e.type)),e):1}function Ls(e,t,i,l){if(50<bf)throw bf=0,u_=null,Error(Tt(185));np(e,i,l),(!(Vn&2)||e!==hi)&&(e===hi&&(!(Vn&2)&&(Qg|=i),Jr===4&&Vl(e,Si)),Co(e,l),i===1&&Vn===0&&!(t.mode&1)&&(Rh=Nr()+500,qg&&cu()))}function Co(e,t){var i=e.callbackNode;Mk(e,t);var l=Wm(e,e===hi?Si:0);if(l===0)i!==null&&Bb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(i!=null&&Bb(i),t===1)e.tag===0?A3(k2.bind(null,e)):zT(k2.bind(null,e)),T3(function(){!(Vn&6)&&cu()}),i=null;else{switch(aT(l)){case 1:i=_1;break;case 4:i=iT;break;case 16:i=Zm;break;case 536870912:i=oT;break;default:i=Zm}i=kI(i,EI.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function EI(e,t){if(km=-1,zm=0,Vn&6)throw Error(Tt(327));var i=e.callbackNode;if(Th()&&e.callbackNode!==i)return null;var l=Wm(e,e===hi?Si:0);if(l===0)return null;if(l&30||l&e.expiredLanes||t)t=hg(e,l);else{t=l;var c=Vn;Vn|=2;var g=II();(hi!==e||Si!==t)&&(Ra=null,Rh=Nr()+500,Zu(e,t));do try{K3();break}catch(u){TI(e,u)}while(!0);z1(),lg.current=g,Vn=c,Zr!==null?t=0:(hi=null,Si=0,t=Jr)}if(t!==0){if(t===2&&(c=jv(e),c!==0&&(l=c,t=c_(e,c))),t===1)throw i=Zf,Zu(e,0),Vl(e,l),Co(e,Nr()),i;if(t===6)Vl(e,l);else{if(c=e.current.alternate,!(l&30)&&!X3(c)&&(t=hg(e,l),t===2&&(g=jv(e),g!==0&&(l=g,t=c_(e,g))),t===1))throw i=Zf,Zu(e,0),Vl(e,l),Co(e,Nr()),i;switch(e.finishedWork=c,e.finishedLanes=l,t){case 0:case 1:throw Error(Tt(345));case 2:Nu(e,bo,Ra);break;case 3:if(Vl(e,l),(l&130023424)===l&&(t=W1+500-Nr(),10<t)){if(Wm(e,0)!==0)break;if(c=e.suspendedLanes,(c&l)!==l){ro(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Gv(Nu.bind(null,e,bo,Ra),t);break}Nu(e,bo,Ra);break;case 4:if(Vl(e,l),(l&4194240)===l)break;for(t=e.eventTimes,c=-1;0<l;){var p=31-js(l);g=1<<p,p=t[p],p>c&&(c=p),l&=~g}if(l=c,l=Nr()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*W3(l/1960))-l,10<l){e.timeoutHandle=Gv(Nu.bind(null,e,bo,Ra),l);break}Nu(e,bo,Ra);break;case 5:Nu(e,bo,Ra);break;default:throw Error(Tt(329))}}}return Co(e,Nr()),e.callbackNode===i?EI.bind(null,e):null}function c_(e,t){var i=wf;return e.current.memoizedState.isDehydrated&&(Zu(e,t).flags|=256),e=hg(e,t),e!==2&&(t=bo,bo=i,t!==null&&h_(t)),e}function h_(e){bo===null?bo=e:bo.push.apply(bo,e)}function X3(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var c=i[l],g=c.getSnapshot;c=c.value;try{if(!Ds(g(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vl(e,t){for(t&=~Z1,t&=~Qg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-js(t),l=1<<i;e[i]=-1,t&=~l}}function k2(e){if(Vn&6)throw Error(Tt(327));Th();var t=Wm(e,0);if(!(t&1))return Co(e,Nr()),null;var i=hg(e,t);if(e.tag!==0&&i===2){var l=jv(e);l!==0&&(t=l,i=c_(e,l))}if(i===1)throw i=Zf,Zu(e,0),Vl(e,t),Co(e,Nr()),i;if(i===6)throw Error(Tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nu(e,bo,Ra),Co(e,Nr()),null}function X1(e,t){var i=Vn;Vn|=1;try{return e(t)}finally{Vn=i,Vn===0&&(Rh=Nr()+500,qg&&cu())}}function ec(e){Hl!==null&&Hl.tag===0&&!(Vn&6)&&Th();var t=Vn;Vn|=1;var i=fs.transition,l=Qn;try{if(fs.transition=null,Qn=1,e)return e()}finally{Qn=l,fs.transition=i,Vn=t,!(Vn&6)&&cu()}}function q1(){No=mh.current,dr(mh)}function Zu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,E3(i)),Zr!==null)for(i=Zr.return;i!==null;){var l=i;switch(A1(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Jm();break;case 3:Fh(),dr(To),dr(Bi),D1();break;case 5:L1(l);break;case 4:Fh();break;case 13:dr(Tr);break;case 19:dr(Tr);break;case 10:F1(l.type._context);break;case 22:case 23:q1()}i=i.return}if(hi=e,Zr=e=eu(e.current,null),Si=No=t,Jr=0,Zf=null,Z1=Qg=Qu=0,bo=wf=null,Gu!==null){for(t=0;t<Gu.length;t++)if(i=Gu[t],l=i.interleaved,l!==null){i.interleaved=null;var c=l.next,g=i.pending;if(g!==null){var p=g.next;g.next=c,l.next=p}i.pending=l}Gu=null}return e}function TI(e,t){do{var i=Zr;try{if(z1(),Pm.current=ag,sg){for(var l=Cr.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}sg=!1}if(Ju=0,ci=Yr=Cr=null,_f=!1,Vf=0,H1.current=null,i===null||i.return===null){Jr=1,Zf=t,Zr=null;break}e:{var g=e,p=i.return,u=i,E=t;if(t=Si,u.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var I=E,M=u,b=M.tag;if(!(M.mode&1)&&(b===0||b===11||b===15)){var C=M.alternate;C?(M.updateQueue=C.updateQueue,M.memoizedState=C.memoizedState,M.lanes=C.lanes):(M.updateQueue=null,M.memoizedState=null)}var R=v2(p);if(R!==null){R.flags&=-257,_2(R,p,u,g,t),R.mode&1&&y2(g,I,t),t=R,E=I;var N=t.updateQueue;if(N===null){var O=new Set;O.add(E),t.updateQueue=O}else N.add(E);break e}else{if(!(t&1)){y2(g,I,t),K1();break e}E=Error(Tt(426))}}else if(vr&&u.mode&1){var he=v2(p);if(he!==null){!(he.flags&65536)&&(he.flags|=256),_2(he,p,u,g,t),M1(Oh(E,u));break e}}g=E=Oh(E,u),Jr!==4&&(Jr=2),wf===null?wf=[g]:wf.push(g),g=p;do{switch(g.tag){case 3:g.flags|=65536,t&=-t,g.lanes|=t;var K=lI(g,E,t);c2(g,K);break e;case 1:u=E;var X=g.type,G=g.stateNode;if(!(g.flags&128)&&(typeof X.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Jl===null||!Jl.has(G)))){g.flags|=65536,t&=-t,g.lanes|=t;var ae=uI(g,u,t);c2(g,ae);break e}}g=g.return}while(g!==null)}PI(i)}catch(q){t=q,Zr===i&&i!==null&&(Zr=i=i.return);continue}break}while(!0)}function II(){var e=lg.current;return lg.current=ag,e===null?ag:e}function K1(){(Jr===0||Jr===3||Jr===2)&&(Jr=4),hi===null||!(Qu&268435455)&&!(Qg&268435455)||Vl(hi,Si)}function hg(e,t){var i=Vn;Vn|=2;var l=II();(hi!==e||Si!==t)&&(Ra=null,Zu(e,t));do try{q3();break}catch(c){TI(e,c)}while(!0);if(z1(),Vn=i,lg.current=l,Zr!==null)throw Error(Tt(261));return hi=null,Si=0,Jr}function q3(){for(;Zr!==null;)CI(Zr)}function K3(){for(;Zr!==null&&!wk();)CI(Zr)}function CI(e){var t=MI(e.alternate,e,No);e.memoizedProps=e.pendingProps,t===null?PI(e):Zr=t,H1.current=null}function PI(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=V3(i,t),i!==null){i.flags&=32767,Zr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Jr=6,Zr=null;return}}else if(i=$3(i,t,No),i!==null){Zr=i;return}if(t=t.sibling,t!==null){Zr=t;return}Zr=t=e}while(t!==null);Jr===0&&(Jr=5)}function Nu(e,t,i){var l=Qn,c=fs.transition;try{fs.transition=null,Qn=1,Y3(e,t,i,l)}finally{fs.transition=c,Qn=l}return null}function Y3(e,t,i,l){do Th();while(Hl!==null);if(Vn&6)throw Error(Tt(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Tt(177));e.callbackNode=null,e.callbackPriority=0;var g=i.lanes|i.childLanes;if(kk(e,g),e===hi&&(Zr=hi=null,Si=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||lm||(lm=!0,kI(Zm,function(){return Th(),null})),g=(i.flags&15990)!==0,i.subtreeFlags&15990||g){g=fs.transition,fs.transition=null;var p=Qn;Qn=1;var u=Vn;Vn|=4,H1.current=null,H3(e,i),bI(i,e),y3($v),Xm=!!Uv,$v=Uv=null,e.current=i,Z3(i),bk(),Vn=u,Qn=p,fs.transition=g}else e.current=i;if(lm&&(lm=!1,Hl=e,cg=c),g=e.pendingLanes,g===0&&(Jl=null),Tk(i.stateNode),Co(e,Nr()),t!==null)for(l=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],l(c.value,{componentStack:c.stack,digest:c.digest});if(ug)throw ug=!1,e=l_,l_=null,e;return cg&1&&e.tag!==0&&Th(),g=e.pendingLanes,g&1?e===u_?bf++:(bf=0,u_=e):bf=0,cu(),null}function Th(){if(Hl!==null){var e=aT(cg),t=fs.transition,i=Qn;try{if(fs.transition=null,Qn=16>e?16:e,Hl===null)var l=!1;else{if(e=Hl,Hl=null,cg=0,Vn&6)throw Error(Tt(331));var c=Vn;for(Vn|=4,Qt=e.current;Qt!==null;){var g=Qt,p=g.child;if(Qt.flags&16){var u=g.deletions;if(u!==null){for(var E=0;E<u.length;E++){var I=u[E];for(Qt=I;Qt!==null;){var M=Qt;switch(M.tag){case 0:case 11:case 15:xf(8,M,g)}var b=M.child;if(b!==null)b.return=M,Qt=b;else for(;Qt!==null;){M=Qt;var C=M.sibling,R=M.return;if(_I(M),M===I){Qt=null;break}if(C!==null){C.return=R,Qt=C;break}Qt=R}}}var N=g.alternate;if(N!==null){var O=N.child;if(O!==null){N.child=null;do{var he=O.sibling;O.sibling=null,O=he}while(O!==null)}}Qt=g}}if(g.subtreeFlags&2064&&p!==null)p.return=g,Qt=p;else e:for(;Qt!==null;){if(g=Qt,g.flags&2048)switch(g.tag){case 0:case 11:case 15:xf(9,g,g.return)}var K=g.sibling;if(K!==null){K.return=g.return,Qt=K;break e}Qt=g.return}}var X=e.current;for(Qt=X;Qt!==null;){p=Qt;var G=p.child;if(p.subtreeFlags&2064&&G!==null)G.return=p,Qt=G;else e:for(p=X;Qt!==null;){if(u=Qt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Jg(9,u)}}catch(q){Or(u,u.return,q)}if(u===p){Qt=null;break e}var ae=u.sibling;if(ae!==null){ae.return=u.return,Qt=ae;break e}Qt=u.return}}if(Vn=c,cu(),fa&&typeof fa.onPostCommitFiberRoot=="function")try{fa.onPostCommitFiberRoot(Gg,e)}catch{}l=!0}return l}finally{Qn=i,fs.transition=t}}return!1}function z2(e,t,i){t=Oh(i,t),t=lI(e,t,1),e=Yl(e,t,1),t=ro(),e!==null&&(np(e,1,t),Co(e,t))}function Or(e,t,i){if(e.tag===3)z2(e,e,i);else for(;t!==null;){if(t.tag===3){z2(t,e,i);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Jl===null||!Jl.has(l))){e=Oh(i,e),e=uI(t,e,1),t=Yl(t,e,1),e=ro(),t!==null&&(np(t,1,e),Co(t,e));break}}t=t.return}}function J3(e,t,i){var l=e.pingCache;l!==null&&l.delete(t),t=ro(),e.pingedLanes|=e.suspendedLanes&i,hi===e&&(Si&i)===i&&(Jr===4||Jr===3&&(Si&130023424)===Si&&500>Nr()-W1?Zu(e,0):Z1|=i),Co(e,t)}function AI(e,t){t===0&&(e.mode&1?(t=Jp,Jp<<=1,!(Jp&130023424)&&(Jp=4194304)):t=1);var i=ro();e=Ga(e,t),e!==null&&(np(e,t,i),Co(e,i))}function Q3(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),AI(e,i)}function e4(e,t){var i=0;switch(e.tag){case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(Tt(314))}l!==null&&l.delete(t),AI(e,i)}var MI;MI=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||To.current)Eo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Eo=!1,U3(e,t,i);Eo=!!(e.flags&131072)}else Eo=!1,vr&&t.flags&1048576&&FT(t,tg,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Mm(e,t),e=t.pendingProps;var c=Mh(t,Bi.current);Eh(t,i),c=N1(null,t,l,e,c,i);var g=U1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Io(l)?(g=!0,Qm(t)):g=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,R1(t),c.updater=Kg,t.stateNode=c,c._reactInternals=t,Yv(t,l,e,i),t=e_(null,t,l,!0,g,i)):(t.tag=0,vr&&g&&P1(t),Qi(null,t,c,i),t=t.child),t;case 16:l=t.elementType;e:{switch(Mm(e,t),e=t.pendingProps,c=l._init,l=c(l._payload),t.type=l,c=t.tag=n4(l),e=Ms(l,e),c){case 0:t=Qv(null,t,l,e,i);break e;case 1:t=b2(null,t,l,e,i);break e;case 11:t=x2(null,t,l,e,i);break e;case 14:t=w2(null,t,l,Ms(l.type,e),i);break e}throw Error(Tt(306,l,""))}return t;case 0:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Ms(l,c),Qv(e,t,l,c,i);case 1:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Ms(l,c),b2(e,t,l,c,i);case 3:e:{if(fI(t),e===null)throw Error(Tt(387));l=t.pendingProps,g=t.memoizedState,c=g.element,LT(e,t),ig(t,l,null,i);var p=t.memoizedState;if(l=p.element,g.isDehydrated)if(g={element:l,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){c=Oh(Error(Tt(423)),t),t=S2(e,t,l,i,c);break e}else if(l!==c){c=Oh(Error(Tt(424)),t),t=S2(e,t,l,i,c);break e}else for(Go=Kl(t.stateNode.containerInfo.firstChild),Ho=t,vr=!0,zs=null,i=UT(t,null,l,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(kh(),l===c){t=Ha(e,t,i);break e}Qi(e,t,l,i)}t=t.child}return t;case 5:return $T(t),e===null&&Xv(t),l=t.type,c=t.pendingProps,g=e!==null?e.memoizedProps:null,p=c.children,Vv(l,c)?p=null:g!==null&&Vv(l,g)&&(t.flags|=32),dI(e,t),Qi(e,t,p,i),t.child;case 6:return e===null&&Xv(t),null;case 13:return pI(e,t,i);case 4:return j1(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=zh(t,null,l,i):Qi(e,t,l,i),t.child;case 11:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Ms(l,c),x2(e,t,l,c,i);case 7:return Qi(e,t,t.pendingProps,i),t.child;case 8:return Qi(e,t,t.pendingProps.children,i),t.child;case 12:return Qi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(l=t.type._context,c=t.pendingProps,g=t.memoizedProps,p=c.value,lr(ng,l._currentValue),l._currentValue=p,g!==null)if(Ds(g.value,p)){if(g.children===c.children&&!To.current){t=Ha(e,t,i);break e}}else for(g=t.child,g!==null&&(g.return=t);g!==null;){var u=g.dependencies;if(u!==null){p=g.child;for(var E=u.firstContext;E!==null;){if(E.context===l){if(g.tag===1){E=Ua(-1,i&-i),E.tag=2;var I=g.updateQueue;if(I!==null){I=I.shared;var M=I.pending;M===null?E.next=E:(E.next=M.next,M.next=E),I.pending=E}}g.lanes|=i,E=g.alternate,E!==null&&(E.lanes|=i),qv(g.return,i,t),u.lanes|=i;break}E=E.next}}else if(g.tag===10)p=g.type===t.type?null:g.child;else if(g.tag===18){if(p=g.return,p===null)throw Error(Tt(341));p.lanes|=i,u=p.alternate,u!==null&&(u.lanes|=i),qv(p,i,t),p=g.sibling}else p=g.child;if(p!==null)p.return=g;else for(p=g;p!==null;){if(p===t){p=null;break}if(g=p.sibling,g!==null){g.return=p.return,p=g;break}p=p.return}g=p}Qi(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,l=t.pendingProps.children,Eh(t,i),c=ps(c),l=l(c),t.flags|=1,Qi(e,t,l,i),t.child;case 14:return l=t.type,c=Ms(l,t.pendingProps),c=Ms(l.type,c),w2(e,t,l,c,i);case 15:return cI(e,t,t.type,t.pendingProps,i);case 17:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Ms(l,c),Mm(e,t),t.tag=1,Io(l)?(e=!0,Qm(t)):e=!1,Eh(t,i),BT(t,l,c),Yv(t,l,c,i),e_(null,t,l,!0,e,i);case 19:return mI(e,t,i);case 22:return hI(e,t,i)}throw Error(Tt(156,t.tag))};function kI(e,t){return rT(e,t)}function t4(e,t,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(e,t,i,l){return new t4(e,t,i,l)}function Y1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function n4(e){if(typeof e=="function")return Y1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===g1)return 11;if(e===y1)return 14}return 2}function eu(e,t){var i=e.alternate;return i===null?(i=hs(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Fm(e,t,i,l,c,g){var p=2;if(l=e,typeof e=="function")Y1(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case oh:return Wu(i.children,c,g,t);case m1:p=8,c|=8;break;case wv:return e=hs(12,i,t,c|2),e.elementType=wv,e.lanes=g,e;case bv:return e=hs(13,i,t,c),e.elementType=bv,e.lanes=g,e;case Sv:return e=hs(19,i,t,c),e.elementType=Sv,e.lanes=g,e;case NE:return ey(i,c,g,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case DE:p=10;break e;case BE:p=9;break e;case g1:p=11;break e;case y1:p=14;break e;case Dl:p=16,l=null;break e}throw Error(Tt(130,e==null?e:typeof e,""))}return t=hs(p,i,t,c),t.elementType=e,t.type=l,t.lanes=g,t}function Wu(e,t,i,l){return e=hs(7,e,l,t),e.lanes=i,e}function ey(e,t,i,l){return e=hs(22,e,l,t),e.elementType=NE,e.lanes=i,e.stateNode={isHidden:!1},e}function D0(e,t,i){return e=hs(6,e,null,t),e.lanes=i,e}function B0(e,t,i){return t=hs(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function r4(e,t,i,l,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_0(0),this.expirationTimes=_0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_0(0),this.identifierPrefix=l,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function J1(e,t,i,l,c,g,p,u,E){return e=new r4(e,t,i,u,E),t===1?(t=1,g===!0&&(t|=8)):t=0,g=hs(3,null,null,t),e.current=g,g.stateNode=e,g.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},R1(g),e}function i4(e,t,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ih,key:l==null?null:""+l,children:e,containerInfo:t,implementation:i}}function zI(e){if(!e)return ru;e=e._reactInternals;e:{if(sc(e)!==e||e.tag!==1)throw Error(Tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Io(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Tt(171))}if(e.tag===1){var i=e.type;if(Io(i))return kT(e,i,t)}return t}function FI(e,t,i,l,c,g,p,u,E){return e=J1(i,l,!0,e,c,g,p,u,E),e.context=zI(null),i=e.current,l=ro(),c=Ql(i),g=Ua(l,c),g.callback=t??null,Yl(i,g,c),e.current.lanes=c,np(e,c,l),Co(e,l),e}function ty(e,t,i,l){var c=t.current,g=ro(),p=Ql(c);return i=zI(i),t.context===null?t.context=i:t.pendingContext=i,t=Ua(g,p),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=Yl(c,t,p),e!==null&&(Ls(e,c,p,g),Cm(e,c,p)),p}function dg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function F2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Q1(e,t){F2(e,t),(e=e.alternate)&&F2(e,t)}function o4(){return null}var OI=typeof reportError=="function"?reportError:function(e){console.error(e)};function ex(e){this._internalRoot=e}ny.prototype.render=ex.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Tt(409));ty(e,t,null,null)};ny.prototype.unmount=ex.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ec(function(){ty(null,e,null,null)}),t[Va]=null}};function ny(e){this._internalRoot=e}ny.prototype.unstable_scheduleHydration=function(e){if(e){var t=cT();e={blockedOn:null,target:e,priority:t};for(var i=0;i<$l.length&&t!==0&&t<$l[i].priority;i++);$l.splice(i,0,e),i===0&&dT(e)}};function tx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ry(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function O2(){}function s4(e,t,i,l,c){if(c){if(typeof l=="function"){var g=l;l=function(){var I=dg(p);g.call(I)}}var p=FI(t,l,e,0,null,!1,!1,"",O2);return e._reactRootContainer=p,e[Va]=p.current,Df(e.nodeType===8?e.parentNode:e),ec(),p}for(;c=e.lastChild;)e.removeChild(c);if(typeof l=="function"){var u=l;l=function(){var I=dg(E);u.call(I)}}var E=J1(e,0,!1,null,null,!1,!1,"",O2);return e._reactRootContainer=E,e[Va]=E.current,Df(e.nodeType===8?e.parentNode:e),ec(function(){ty(t,E,i,l)}),E}function iy(e,t,i,l,c){var g=i._reactRootContainer;if(g){var p=g;if(typeof c=="function"){var u=c;c=function(){var E=dg(p);u.call(E)}}ty(t,p,e,c)}else p=s4(i,t,e,c,l);return dg(p)}lT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=nf(t.pendingLanes);i!==0&&(x1(t,i|1),Co(t,Nr()),!(Vn&6)&&(Rh=Nr()+500,cu()))}break;case 13:ec(function(){var l=Ga(e,1);if(l!==null){var c=ro();Ls(l,e,1,c)}}),Q1(e,1)}};w1=function(e){if(e.tag===13){var t=Ga(e,134217728);if(t!==null){var i=ro();Ls(t,e,134217728,i)}Q1(e,134217728)}};uT=function(e){if(e.tag===13){var t=Ql(e),i=Ga(e,t);if(i!==null){var l=ro();Ls(i,e,t,l)}Q1(e,t)}};cT=function(){return Qn};hT=function(e,t){var i=Qn;try{return Qn=e,t()}finally{Qn=i}};Fv=function(e,t,i){switch(t){case"input":if(Iv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var l=i[t];if(l!==e&&l.form===e.form){var c=Xg(l);if(!c)throw Error(Tt(90));$E(l),Iv(l,c)}}}break;case"textarea":GE(e,i);break;case"select":t=i.value,t!=null&&xh(e,!!i.multiple,t,!1)}};YE=X1;JE=ec;var a4={usingClientEntryPoint:!1,Events:[ip,uh,Xg,qE,KE,X1]},Jd={findFiberByHostInstance:Vu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},l4={bundleType:Jd.bundleType,version:Jd.version,rendererPackageName:Jd.rendererPackageName,rendererConfig:Jd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tT(e),e===null?null:e.stateNode},findFiberByHostInstance:Jd.findFiberByHostInstance||o4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var um=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!um.isDisabled&&um.supportsFiber)try{Gg=um.inject(l4),fa=um}catch{}}qo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a4;qo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tx(t))throw Error(Tt(200));return i4(e,t,null,i)};qo.createRoot=function(e,t){if(!tx(e))throw Error(Tt(299));var i=!1,l="",c=OI;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=J1(e,1,!1,null,null,i,!1,l,c),e[Va]=t.current,Df(e.nodeType===8?e.parentNode:e),new ex(t)};qo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Tt(188)):(e=Object.keys(e).join(","),Error(Tt(268,e)));return e=tT(t),e=e===null?null:e.stateNode,e};qo.flushSync=function(e){return ec(e)};qo.hydrate=function(e,t,i){if(!ry(t))throw Error(Tt(200));return iy(null,e,t,!0,i)};qo.hydrateRoot=function(e,t,i){if(!tx(e))throw Error(Tt(405));var l=i!=null&&i.hydratedSources||null,c=!1,g="",p=OI;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(g=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),t=FI(t,null,e,1,i??null,c,!1,g,p),e[Va]=t.current,Df(e),l)for(e=0;e<l.length;e++)i=l[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new ny(t)};qo.render=function(e,t,i){if(!ry(t))throw Error(Tt(200));return iy(null,e,t,!1,i)};qo.unmountComponentAtNode=function(e){if(!ry(e))throw Error(Tt(40));return e._reactRootContainer?(ec(function(){iy(null,null,e,!1,function(){e._reactRootContainer=null,e[Va]=null})}),!0):!1};qo.unstable_batchedUpdates=X1;qo.unstable_renderSubtreeIntoContainer=function(e,t,i,l){if(!ry(i))throw Error(Tt(200));if(e==null||e._reactInternals===void 0)throw Error(Tt(38));return iy(e,t,i,!1,l)};qo.version="18.2.0-next-9e3b772b8-20220608";function RI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RI)}catch(e){console.error(e)}}RI(),FE.exports=qo;var nx=FE.exports;const u4=ep(nx);var jI={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.0/LICENSE.txt
 */(function(e,t){(function(i,l){e.exports=l()})(Ul,function(){var i={},l={};function c(p,u,E){if(l[p]=E,p==="index"){var I="var sharedModule = {}; ("+l.shared+")(sharedModule); ("+l.worker+")(sharedModule);",M={};return l.shared(M),l.index(i,M),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([I],{type:"text/javascript"}))),i}}c("shared",["exports"],function(p){function u(o,r,s,h){return new(s||(s=Promise))(function(m,_){function x(F){try{P(h.next(F))}catch($){_($)}}function w(F){try{P(h.throw(F))}catch($){_($)}}function P(F){var $;F.done?m(F.value):($=F.value,$ instanceof s?$:new s(function(Y){Y($)})).then(x,w)}P((h=h.apply(o,r||[])).next())})}function E(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var I=M;function M(o,r){this.x=o,this.y=r}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,s=o.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),s=Math.sin(o),h=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,r){var s=Math.cos(o),h=Math.sin(o),m=r.y+h*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-h*(this.y-r.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},M.convert=function(o){return o instanceof M?o:Array.isArray(o)?new M(o[0],o[1]):o};var b=E(I),C=R;function R(o,r,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=s,this.p2y=h}R.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<r)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=m/_}var x=0,w=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<r));h++)o>m?x=s:w=s,s=.5*(w-x)+x;return s},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var N=E(C);let O,he;function K(){return O==null&&(O=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),O}function X(){if(he==null&&(he=!1,K())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let h=0;h<5*5;h++){const m=4*h;r.fillStyle=`rgb(${m},${m+1},${m+2})`,r.fillRect(h%5,Math.floor(h/5),1,1)}const s=r.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){he=!0;break}}}return he||!1}function G(o,r,s,h){const m=new N(o,r,s,h);return _=>m.solve(_)}const ae=G(.25,.1,.25,1);function q(o,r,s){return Math.min(s,Math.max(r,o))}function H(o,r,s){const h=s-r,m=((o-r)%h+h)%h+r;return m===r?s:m}function T(o,...r){for(const s of r)for(const h in s)o[h]=s[h];return o}let j=1;function D(o,r,s){const h={};for(const m in o)h[m]=r.call(this,o[m],m,o);return h}function te(o,r,s){const h={};for(const m in o)r.call(this,o[m],m,o)&&(h[m]=o[m]);return h}function W(o){return Array.isArray(o)?o.map(W):typeof o=="object"&&o?D(o,W):o}const ve={};function _e(o){ve[o]||(typeof console<"u"&&console.warn(o),ve[o]=!0)}function pe(o,r,s){return(s.y-o.y)*(r.x-o.x)>(r.y-o.y)*(s.x-o.x)}function oe(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let ce=null;function ee(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function fe(o,r,s,h,m){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(o,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const w=x.startsWith("BGR"),P=new Uint8ClampedArray(h*m*4);if(yield _.copyTo(P,function(F,$,Y,ne,le){const me=4*Math.max(-$,0),we=(Math.max(0,Y)-Y)*ne*4+me,Oe=4*ne,De=Math.max(0,$),nt=Math.max(0,Y);return{rect:{x:De,y:nt,width:Math.min(F.width,$+ne)-De,height:Math.min(F.height,Y+le)-nt},layout:[{offset:we,stride:Oe}]}}(o,r,s,h,m)),w)for(let F=0;F<P.length;F+=4){const $=P[F];P[F]=P[F+2],P[F+2]=$}return P}finally{_.close()}})}let Se,Ie;const Ne="AbortError";function Ae(){return new Error(Ne)}const ze={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function He(o){return ze.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const Ze="global-dispatcher";class it extends Error{constructor(r,s,h,m){super(`AJAXError: ${s} (${r}): ${h}`),this.status=r,this.statusText=s,this.url=h,this.body=m}}const ct=()=>oe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,vt=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=He(o.url);if(h)return h(o,r);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:Ze},r)}if(!(/^file:/.test(s=o.url)||/^file:/.test(ct())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,m){return u(this,void 0,void 0,function*(){const _=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:ct(),signal:m.signal});h.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");const x=yield fetch(_);if(!x.ok){const F=yield x.blob();throw new it(x.status,x.statusText,h.url,F)}let w;w=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const P=yield w;if(m.signal.aborted)throw Ae();return{data:P,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,r);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:Ze},r)}var s;return function(h,m){return new Promise((_,x)=>{var w;const P=new XMLHttpRequest;P.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(P.responseType="arraybuffer");for(const F in h.headers)P.setRequestHeader(F,h.headers[F]);h.type==="json"&&(P.responseType="text",!((w=h.headers)===null||w===void 0)&&w.Accept||P.setRequestHeader("Accept","application/json")),P.withCredentials=h.credentials==="include",P.onerror=()=>{x(new Error(P.statusText))},P.onload=()=>{if(!m.signal.aborted)if((P.status>=200&&P.status<300||P.status===0)&&P.response!==null){let F=P.response;if(h.type==="json")try{F=JSON.parse(P.response)}catch($){return void x($)}_({data:F,cacheControl:P.getResponseHeader("Cache-Control"),expires:P.getResponseHeader("Expires")})}else{const F=new Blob([P.response],{type:P.getResponseHeader("Content-Type")});x(new it(P.status,P.statusText,h.url,F))}},m.signal.addEventListener("abort",()=>{P.abort(),x(Ae())}),P.send(h.body)})}(o,r)};function Mt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),s=window.location;return r.protocol===s.protocol&&r.host===s.host}function pt(o,r,s){s[o]&&s[o].indexOf(r)!==-1||(s[o]=s[o]||[],s[o].push(r))}function xt(o,r,s){if(s&&s[o]){const h=s[o].indexOf(r);h!==-1&&s[o].splice(h,1)}}class Gt{constructor(r,s={}){T(this,s),this.type=r}}class Ht extends Gt{constructor(r,s={}){super("error",T({error:r},s))}}class an{on(r,s){return this._listeners=this._listeners||{},pt(r,s,this._listeners),this}off(r,s){return xt(r,s,this._listeners),xt(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},pt(r,s,this._oneTimeListeners),this):new Promise(h=>this.once(r,h))}fire(r,s){typeof r=="string"&&(r=new Gt(r,s||{}));const h=r.type;if(this.listens(h)){r.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const w of m)w.call(this,r);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const w of _)xt(h,w,this._oneTimeListeners),w.call(this,r);const x=this._eventedParent;x&&(T(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof Ht&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var et={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const vn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ln(o,r){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return vn.forEach(h=>{h in r&&(s[h]=r[h])}),s}function Vt(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let s=0;s<o.length;s++)if(!Vt(o[s],r[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const s in o)if(!Vt(o[s],r[s]))return!1;return!0}return o===r}function Ee(o,r){o.push(r)}function B(o,r,s){Ee(s,{command:"addSource",args:[o,r[o]]})}function L(o,r,s){Ee(r,{command:"removeSource",args:[o]}),s[o]=!0}function ge(o,r,s,h){L(o,s,h),B(o,r,s)}function Xe(o,r,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!Vt(o[s][h],r[s][h]))return!1;for(h in r[s])if(Object.prototype.hasOwnProperty.call(r[s],h)&&h!=="data"&&!Vt(o[s][h],r[s][h]))return!1;return!0}function tt(o,r,s,h,m,_){o=o||{},r=r||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(Vt(o[x],r[x])||s.push({command:_,args:[h,x,r[x],m]}));for(const x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(Vt(o[x],r[x])||s.push({command:_,args:[h,x,r[x],m]}))}function ht(o){return o.id}function ue(o,r){return o[r.id]=r,o}class k{constructor(r,s,h,m){this.message=(r?`${r}: `:"")+h,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function U(o,...r){for(const s of r)for(const h in s)o[h]=s[h];return o}class Te extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}class Ve{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[h,m]of s)this.bindings[h]=m}concat(r){return new Ve(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const rt={kind:"null"},Ge={kind:"number"},St={kind:"string"},Pt={kind:"boolean"},mn={kind:"color"},bn={kind:"object"},Ot={kind:"value"},Ar={kind:"collator"},Qr={kind:"formatted"},Ti={kind:"padding"},Ur={kind:"resolvedImage"},ke={kind:"variableAnchorOffsetCollection"};function se(o,r){return{kind:"array",itemType:o,N:r}}function ie(o){if(o.kind==="array"){const r=ie(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const xe=[rt,Ge,St,Pt,mn,Qr,bn,se(Ot),Ti,Ur,ke];function Ce(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Ce(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const s of xe)if(!Ce(s,r))return null}}return`Expected ${ie(o)} but found ${ie(r)} instead.`}function Me(o,r){return r.some(s=>s.kind===o.kind)}function je(o,r){return r.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function Ke(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const Le=.96422,at=.82521,dt=4/29,st=6/29,Et=3*st*st,qt=st*st*st,en=Math.PI/180,En=180/Math.PI;function un(o){return(o%=360)<0&&(o+=360),o}function Tn([o,r,s,h]){let m,_;const x=sr((.2225045*(o=wn(o))+.7168786*(r=wn(r))+.0606169*(s=wn(s)))/1);o===r&&r===s?m=_=x:(m=sr((.4360747*o+.3850649*r+.1430804*s)/Le),_=sr((.0139322*o+.0971045*r+.7141733*s)/at));const w=116*x-16;return[w<0?0:w,500*(m-x),200*(x-_),h]}function wn(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function sr(o){return o>qt?Math.pow(o,1/3):o/Et+dt}function Hn([o,r,s,h]){let m=(o+16)/116,_=isNaN(r)?m:m+r/500,x=isNaN(s)?m:m-s/200;return m=1*Un(m),_=Le*Un(_),x=at*Un(x),[_n(3.1338561*_-1.6168667*m-.4906146*x),_n(-.9787684*_+1.9161415*m+.033454*x),_n(.0719453*_-.2289914*m+1.4052427*x),h]}function _n(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Un(o){return o>st?o*o*o:Et*(o-dt)}function Yn(o){return parseInt(o.padEnd(2,o),16)/255}function Mr(o,r){return jr(r?o/100:o,0,1)}function jr(o,r,s){return Math.min(Math.max(r,o),s)}function Wr(o){return!o.some(Number.isNaN)}const Po={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class zn{constructor(r,s,h,m=1,_=!0){this.r=r,this.g=s,this.b=h,this.a=m,_||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,s,h,m]))}static parse(r){if(r instanceof zn)return r;if(typeof r!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Po[h];if(m){const[x,w,P]=m;return[x/255,w/255,P/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let w=1;return[Yn(h.slice(w,w+=x)),Yn(h.slice(w,w+=x)),Yn(h.slice(w,w+=x)),Yn(h.slice(w,w+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,P,F,$,Y,ne,le,me,we,Oe,De,nt]=x,qe=[$||" ",le||" ",Oe].join("");if(qe==="  "||qe==="  /"||qe===",,"||qe===",,,"){const Qe=[F,ne,we].join(""),lt=Qe==="%%%"?100:Qe===""?255:0;if(lt){const _t=[jr(+P/lt,0,1),jr(+Y/lt,0,1),jr(+me/lt,0,1),De?Mr(+De,nt):1];if(Wr(_t))return _t}}return}}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,w,P,F,$,Y,ne,le,me]=_,we=[P||" ",$||" ",ne].join("");if(we==="  "||we==="  /"||we===",,"||we===",,,"){const Oe=[+w,jr(+F,0,100),jr(+Y,0,100),le?Mr(+le,me):1];if(Wr(Oe))return function([De,nt,qe,Qe]){function lt(_t){const Lt=(_t+De/30)%12,rn=nt*Math.min(qe,1-qe);return qe-rn*Math.max(-1,Math.min(Lt-3,9-Lt,1))}return De=un(De),nt/=100,qe/=100,[lt(0),lt(8),lt(4),Qe]}(Oe)}}}(r);return s?new zn(...s,!1):void 0}get rgb(){const{r,g:s,b:h,a:m}=this,_=m||1/0;return this.overwriteGetter("rgb",[r/_,s/_,h/_,m])}get hcl(){return this.overwriteGetter("hcl",function(r){const[s,h,m,_]=Tn(r),x=Math.sqrt(h*h+m*m);return[Math.round(1e4*x)?un(Math.atan2(m,h)*En):NaN,x,s,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Tn(this.rgb))}overwriteGetter(r,s){return Object.defineProperty(this,r,{value:s}),s}toString(){const[r,s,h,m]=this.rgb;return`rgba(${[r,s,h].map(_=>Math.round(255*_)).join(",")},${m})`}}zn.black=new zn(0,0,0,1),zn.white=new zn(1,1,1,1),zn.transparent=new zn(0,0,0,0),zn.red=new zn(1,0,0,1);class Ya{constructor(r,s,h){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Sn{constructor(r,s,h,m,_){this.text=r,this.image=s,this.scale=h,this.fontStack=m,this.textColor=_}}class xr{constructor(r){this.sections=r}static fromString(r){return new xr([new Sn(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof xr?r:xr.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class fi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof fi)return r;if(typeof r=="number")return new fi([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const s of r)if(typeof s!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new fi(r)}}toString(){return JSON.stringify(this.values)}}const qh=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ii{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Ii)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let s=0;s<r.length;s+=2){const h=r[s],m=r[s+1];if(typeof h!="string"||!qh.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Ii(r)}}toString(){return JSON.stringify(this.values)}}class pi{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new pi({name:r,available:!1}):null}}function Ns(o,r,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,r,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,r,s,h]:[o,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Xr(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof zn||o instanceof Ya||o instanceof xr||o instanceof fi||o instanceof Ii||o instanceof pi)return!0;if(Array.isArray(o)){for(const r of o)if(!Xr(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!Xr(o[r]))return!1;return!0}return!1}function pr(o){if(o===null)return rt;if(typeof o=="string")return St;if(typeof o=="boolean")return Pt;if(typeof o=="number")return Ge;if(o instanceof zn)return mn;if(o instanceof Ya)return Ar;if(o instanceof xr)return Qr;if(o instanceof fi)return Ti;if(o instanceof Ii)return ke;if(o instanceof pi)return Ur;if(Array.isArray(o)){const r=o.length;let s;for(const h of o){const m=pr(h);if(s){if(s===m)continue;s=Ot;break}s=m}return se(s||Ot,r)}return bn}function va(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof zn||o instanceof xr||o instanceof fi||o instanceof Ii||o instanceof pi?o.toString():JSON.stringify(o)}class Ni{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Xr(r[1]))return s.error("invalid value");const h=r[1];let m=pr(h);const _=s.expectedType;return m.kind!=="array"||m.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(m=_),new Ni(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ur{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const Ja={string:St,number:Ge,boolean:Pt,object:bn};class wr{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let h,m=1;const _=r[0];if(_==="array"){let w,P;if(r.length>2){const F=r[1];if(typeof F!="string"||!(F in Ja)||F==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);w=Ja[F],m++}else w=Ot;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);P=r[2],m++}h=se(w,P)}else{if(!Ja[_])throw new Error(`Types doesn't contain name = ${_}`);h=Ja[_]}const x=[];for(;m<r.length;m++){const w=s.parse(r[m],m,Ot);if(!w)return null;x.push(w)}return new wr(h,x)}evaluate(r){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(r);if(!Ce(this.type,pr(h)))return h;if(s===this.args.length-1)throw new ur(`Expected value to be of type ${ie(this.type)}, but found ${ie(pr(h))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const hu={"to-boolean":Pt,"to-color":mn,"to-number":Ge,"to-string":St};class Ui{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const h=r[0];if(!hu[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&r.length!==2)return s.error("Expected one argument.");const m=hu[h],_=[];for(let x=1;x<r.length;x++){const w=s.parse(r[x],x,Ot);if(!w)return null;_.push(w)}return new Ui(m,_)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let s,h;for(const m of this.args){if(s=m.evaluate(r),h=null,s instanceof zn)return s;if(typeof s=="string"){const _=r.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Ns(s[0],s[1],s[2],s[3]),!h))return new zn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ur(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(r);const m=fi.parse(s);if(m)return m}throw new ur(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(r);const m=Ii.parse(s);if(m)return m}throw new ur(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(r),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new ur(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return xr.fromString(va(this.args[0].evaluate(r)));case"resolvedImage":return pi.fromString(va(this.args[0].evaluate(r)));default:return va(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Kh=["Unknown","Point","LineString","Polygon"];class Qa{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Kh[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let s=this._parseColorCache[r];return s||(s=this._parseColorCache[r]=zn.parse(r)),s}}class gs{constructor(r,s,h=[],m,_=new Ve,x=[]){this.registry=r,this.path=h,this.key=h.map(w=>`[${w}]`).join(""),this.scope=_,this.errors=x,this.expectedType=m,this._isConstant=s}parse(r,s,h,m,_={}){return s?this.concat(s,h,m)._parse(r,_):this._parse(r,_)}_parse(r,s){function h(m,_,x){return x==="assert"?new wr(_,[m]):x==="coerce"?new Ui(_,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[m];if(_){let x=_.parse(r,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,P=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||P.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(w.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(w,P))return null}else x=h(x,w,s.typeAnnotation||"coerce");else x=h(x,w,s.typeAnnotation||"coerce");else x=h(x,w,s.typeAnnotation||"coerce");else x=h(x,w,s.typeAnnotation||"assert")}if(!(x instanceof Ni)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const w=new Qa;try{x=new Ni(x.type,x.evaluate(w))}catch(P){return this.error(P.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,h){const m=typeof r=="number"?this.path.concat(r):this.path,_=h?this.scope.concat(h):this.scope;return new gs(this.registry,this._isConstant,m,s||null,_,this.errors)}error(r,...s){const h=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new Te(h,r))}checkSubtype(r,s){const h=Ce(r,s);return h&&this.error(h),h}}class $i{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const h=[];for(let _=1;_<r.length-1;_+=2){const x=r[_];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);const w=s.parse(r[_+1],_+1);if(!w)return null;h.push([x,w])}const m=s.parse(r[r.length-1],r.length-1,s.expectedType,h);return m?new $i(h,m):null}outputDefined(){return this.result.outputDefined()}}class Fn{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=r[1];return s.scope.has(h)?new Fn(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class du{constructor(r,s,h){this.type=r,this.index=s,this.input=h}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Ge),m=s.parse(r[2],2,se(s.expectedType||Ot));return h&&m?new du(m.type.itemType,h,m):null}evaluate(r){const s=this.index.evaluate(r),h=this.input.evaluate(r);if(s<0)throw new ur(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new ur(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new ur(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class mi{constructor(r,s){this.type=Pt,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Ot),m=s.parse(r[2],2,Ot);return h&&m?Me(h.type,[Pt,St,Ge,rt,Ot])?new mi(h,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(h.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!h)return!1;if(!je(s,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${ie(pr(s))} instead.`);if(!je(h,["string","array"]))throw new ur(`Expected second argument to be of type array or string, but found ${ie(pr(h))} instead.`);return h.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Us{constructor(r,s,h){this.type=Ge,this.needle=r,this.haystack=s,this.fromIndex=h}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Ot),m=s.parse(r[2],2,Ot);if(!h||!m)return null;if(!Me(h.type,[Pt,St,Ge,rt,Ot]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(h.type)} instead`);if(r.length===4){const _=s.parse(r[3],3,Ge);return _?new Us(h,m,_):null}return new Us(h,m)}evaluate(r){const s=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!je(s,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${ie(pr(s))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(r)),je(h,["string"])){const _=h.indexOf(s,m);return _===-1?-1:[...h.slice(0,_)].length}if(je(h,["array"]))return h.indexOf(s,m);throw new ur(`Expected second argument to be of type array or string, but found ${ie(pr(h))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class fu{constructor(r,s,h,m,_,x){this.inputType=r,this.type=s,this.input=h,this.cases=m,this.outputs=_,this.otherwise=x}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let h,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const _={},x=[];for(let F=2;F<r.length-1;F+=2){let $=r[F];const Y=r[F+1];Array.isArray($)||($=[$]);const ne=s.concat(F);if($.length===0)return ne.error("Expected at least one branch label.");for(const me of $){if(typeof me!="number"&&typeof me!="string")return ne.error("Branch labels must be numbers or strings.");if(typeof me=="number"&&Math.abs(me)>Number.MAX_SAFE_INTEGER)return ne.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof me=="number"&&Math.floor(me)!==me)return ne.error("Numeric branch labels must be integer values.");if(h){if(ne.checkSubtype(h,pr(me)))return null}else h=pr(me);if(_[String(me)]!==void 0)return ne.error("Branch labels must be unique.");_[String(me)]=x.length}const le=s.parse(Y,F,m);if(!le)return null;m=m||le.type,x.push(le)}const w=s.parse(r[1],1,Ot);if(!w)return null;const P=s.parse(r[r.length-1],r.length-1,m);return P?w.type.kind!=="value"&&s.concat(1).checkSubtype(h,w.type)?null:new fu(h,m,w,_,x,P):null}evaluate(r){const s=this.input.evaluate(r);return(pr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class el{constructor(r,s,h){this.type=r,this.branches=s,this.otherwise=h}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const m=[];for(let x=1;x<r.length-1;x+=2){const w=s.parse(r[x],x,Pt);if(!w)return null;const P=s.parse(r[x+1],x+1,h);if(!P)return null;m.push([w,P]),h=h||P.type}const _=s.parse(r[r.length-1],r.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new el(h,m,_)}evaluate(r){for(const[s,h]of this.branches)if(s.evaluate(r))return h.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,h]of this.branches)r(s),r(h);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class _a{constructor(r,s,h,m){this.type=r,this.input=s,this.beginIndex=h,this.endIndex=m}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Ot),m=s.parse(r[2],2,Ge);if(!h||!m)return null;if(!Me(h.type,[se(Ot),St,Ot]))return s.error(`Expected first argument to be of type array or string, but found ${ie(h.type)} instead`);if(r.length===4){const _=s.parse(r[3],3,Ge);return _?new _a(h.type,h,m,_):null}return new _a(h.type,h,m)}evaluate(r){const s=this.input.evaluate(r),h=this.beginIndex.evaluate(r);let m;if(this.endIndex&&(m=this.endIndex.evaluate(r)),je(s,["string"]))return[...s].slice(h,m).join("");if(je(s,["array"]))return s.slice(h,m);throw new ur(`Expected first argument to be of type array or string, but found ${ie(pr(s))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function tl(o,r){const s=o.length-1;let h,m,_=0,x=s,w=0;for(;_<=x;)if(w=Math.floor((_+x)/2),h=o[w],m=o[w+1],h<=r){if(w===s||r<m)return w;_=w+1}else{if(!(h>r))throw new ur("Input is not a number.");x=w-1}return 0}class ys{constructor(r,s,h){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[m,_]of h)this.labels.push(m),this.outputs.push(_)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(r[1],1,Ge);if(!h)return null;const m=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let x=1;x<r.length;x+=2){const w=x===1?-1/0:r[x],P=r[x+1],F=x,$=x+1;if(typeof w!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(m.length&&m[m.length-1][0]>=w)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',F);const Y=s.parse(P,$,_);if(!Y)return null;_=_||Y.type,m.push([w,Y])}return new ys(_,h,m)}evaluate(r){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return h[0].evaluate(r);const _=s.length;return m>=s[_-1]?h[_-1].evaluate(r):h[tl(s,m)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function nl(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var cc=xa;function xa(o,r,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=s,this.p2y=h}xa.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<r)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=m/_}var x=0,w=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<r));h++)o>m?x=s:w=s,s=.5*(w-x)+x;return s},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var Yh=nl(cc);function Ci(o,r,s){return o+s*(r-o)}function wa(o,r,s){return o.map((h,m)=>Ci(h,r[m],s))}const ei={number:Ci,color:function(o,r,s,h="rgb"){switch(h){case"rgb":{const[m,_,x,w]=wa(o.rgb,r.rgb,s);return new zn(m,_,x,w,!1)}case"hcl":{const[m,_,x,w]=o.hcl,[P,F,$,Y]=r.hcl;let ne,le;if(isNaN(m)||isNaN(P))isNaN(m)?isNaN(P)?ne=NaN:(ne=P,x!==1&&x!==0||(le=F)):(ne=m,$!==1&&$!==0||(le=_));else{let nt=P-m;P>m&&nt>180?nt-=360:P<m&&m-P>180&&(nt+=360),ne=m+s*nt}const[me,we,Oe,De]=function([nt,qe,Qe,lt]){return nt=isNaN(nt)?0:nt*en,Hn([Qe,Math.cos(nt)*qe,Math.sin(nt)*qe,lt])}([ne,le??Ci(_,F,s),Ci(x,$,s),Ci(w,Y,s)]);return new zn(me,we,Oe,De,!1)}case"lab":{const[m,_,x,w]=Hn(wa(o.lab,r.lab,s));return new zn(m,_,x,w,!1)}}},array:wa,padding:function(o,r,s){return new fi(wa(o.values,r.values,s))},variableAnchorOffsetCollection:function(o,r,s){const h=o.values,m=r.values;if(h.length!==m.length)throw new ur(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const _=[];for(let x=0;x<h.length;x+=2){if(h[x]!==m[x])throw new ur(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${m[x]}`);_.push(h[x]);const[w,P]=h[x+1],[F,$]=m[x+1];_.push([Ci(w,F,s),Ci(P,$,s)])}return new Ii(_)}};class ti{constructor(r,s,h,m,_){this.type=r,this.operator=s,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[x,w]of _)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(r,s,h,m){let _=0;if(r.name==="exponential")_=rl(s,r.base,h,m);else if(r.name==="linear")_=rl(s,1,h,m);else if(r.name==="cubic-bezier"){const x=r.controlPoints;_=new Yh(x[0],x[1],x[2],x[3]).solve(rl(s,1,h,m))}return _}static parse(r,s){let[h,m,_,...x]=r;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const F=m[1];if(typeof F!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:F}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const F=m.slice(1);if(F.length!==4||F.some($=>typeof $!="number"||$<0||$>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:F}}}if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,Ge),!_)return null;const w=[];let P=null;h==="interpolate-hcl"||h==="interpolate-lab"?P=mn:s.expectedType&&s.expectedType.kind!=="value"&&(P=s.expectedType);for(let F=0;F<x.length;F+=2){const $=x[F],Y=x[F+1],ne=F+3,le=F+4;if(typeof $!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(w.length&&w[w.length-1][0]>=$)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ne);const me=s.parse(Y,le,P);if(!me)return null;P=P||me.type,w.push([$,me])}return Ke(P,Ge)||Ke(P,mn)||Ke(P,Ti)||Ke(P,ke)||Ke(P,se(Ge))?new ti(P,h,m,_,w):s.error(`Type ${ie(P)} is not interpolatable.`)}evaluate(r){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return h[0].evaluate(r);const _=s.length;if(m>=s[_-1])return h[_-1].evaluate(r);const x=tl(s,m),w=ti.interpolationFactor(this.interpolation,m,s[x],s[x+1]),P=h[x].evaluate(r),F=h[x+1].evaluate(r);switch(this.operator){case"interpolate":return ei[this.type.kind](P,F,w);case"interpolate-hcl":return ei.color(P,F,w,"hcl");case"interpolate-lab":return ei.color(P,F,w,"lab")}}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function rl(o,r,s,h){const m=h-s,_=o-s;return m===0?0:r===1?_/m:(Math.pow(r,_)-1)/(Math.pow(r,m)-1)}class ba{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expectected at least one argument.");let h=null;const m=s.expectedType;m&&m.kind!=="value"&&(h=m);const _=[];for(const w of r.slice(1)){const P=s.parse(w,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!P)return null;h=h||P.type,_.push(P)}if(!h)throw new Error("No output type");const x=m&&_.some(w=>Ce(m,w.type));return new ba(x?Ot:h,_)}evaluate(r){let s,h=null,m=0;for(const _ of this.args)if(m++,h=_.evaluate(r),h&&h instanceof pi&&!h.available&&(s||(s=h.name),h=null,m===this.args.length&&(h=s)),h!==null)break;return h}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function il(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function hc(o,r,s,h){return h.compare(r,s)===0}function $s(o,r,s){const h=o!=="=="&&o!=="!=";return class LI{constructor(_,x,w){this.type=Pt,this.lhs=_,this.rhs=x,this.collator=w,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const w=_[0];let P=x.parse(_[1],1,Ot);if(!P)return null;if(!il(w,P.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${ie(P.type)}'.`);let F=x.parse(_[2],2,Ot);if(!F)return null;if(!il(w,F.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${ie(F.type)}'.`);if(P.type.kind!==F.type.kind&&P.type.kind!=="value"&&F.type.kind!=="value")return x.error(`Cannot compare types '${ie(P.type)}' and '${ie(F.type)}'.`);h&&(P.type.kind==="value"&&F.type.kind!=="value"?P=new wr(F.type,[P]):P.type.kind!=="value"&&F.type.kind==="value"&&(F=new wr(P.type,[F])));let $=null;if(_.length===4){if(P.type.kind!=="string"&&F.type.kind!=="string"&&P.type.kind!=="value"&&F.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if($=x.parse(_[3],3,Ar),!$)return null}return new LI(P,F,$)}evaluate(_){const x=this.lhs.evaluate(_),w=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const P=pr(x),F=pr(w);if(P.kind!==F.kind||P.kind!=="string"&&P.kind!=="number")throw new ur(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${P.kind}, ${F.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const P=pr(x),F=pr(w);if(P.kind!=="string"||F.kind!=="string")return r(_,x,w)}return this.collator?s(_,x,w,this.collator.evaluate(_)):r(_,x,w)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const pu=$s("==",function(o,r,s){return r===s},hc),dc=$s("!=",function(o,r,s){return r!==s},function(o,r,s,h){return!hc(0,r,s,h)}),fc=$s("<",function(o,r,s){return r<s},function(o,r,s,h){return h.compare(r,s)<0}),Jh=$s(">",function(o,r,s){return r>s},function(o,r,s,h){return h.compare(r,s)>0}),Qh=$s("<=",function(o,r,s){return r<=s},function(o,r,s,h){return h.compare(r,s)<=0}),mu=$s(">=",function(o,r,s){return r>=s},function(o,r,s,h){return h.compare(r,s)>=0});class Sa{constructor(r,s,h){this.type=Ar,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const h=r[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const m=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Pt);if(!m)return null;const _=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Pt);if(!_)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,St),!x)?null:new Sa(m,_,x)}evaluate(r){return new Ya(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class ol{constructor(r,s,h,m,_){this.type=St,this.number=r,this.locale=s,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const h=s.parse(r[1],1,Ge);if(!h)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let _=null;if(m.locale&&(_=s.parse(m.locale,1,St),!_))return null;let x=null;if(m.currency&&(x=s.parse(m.currency,1,St),!x))return null;let w=null;if(m["min-fraction-digits"]&&(w=s.parse(m["min-fraction-digits"],1,Ge),!w))return null;let P=null;return m["max-fraction-digits"]&&(P=s.parse(m["max-fraction-digits"],1,Ge),!P)?null:new ol(h,_,x,w,P)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class sl{constructor(r){this.type=Qr,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const h=r[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const m=[];let _=!1;for(let x=1;x<=r.length-1;++x){const w=r[x];if(_&&typeof w=="object"&&!Array.isArray(w)){_=!1;let P=null;if(w["font-scale"]&&(P=s.parse(w["font-scale"],1,Ge),!P))return null;let F=null;if(w["text-font"]&&(F=s.parse(w["text-font"],1,se(St)),!F))return null;let $=null;if(w["text-color"]&&($=s.parse(w["text-color"],1,mn),!$))return null;const Y=m[m.length-1];Y.scale=P,Y.font=F,Y.textColor=$}else{const P=s.parse(r[x],1,Ot);if(!P)return null;const F=P.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,m.push({content:P,scale:null,font:null,textColor:null})}}return new sl(m)}evaluate(r){return new xr(this.sections.map(s=>{const h=s.content.evaluate(r);return pr(h)===Ur?new Sn("",h,null,null,null):new Sn(va(h),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor)}outputDefined(){return!1}}class gu{constructor(r){this.type=Ur,this.input=r}static parse(r,s){if(r.length!==2)return s.error("Expected two arguments.");const h=s.parse(r[1],1,St);return h?new gu(h):s.error("No image name provided.")}evaluate(r){const s=this.input.evaluate(r),h=pi.fromString(s);return h&&r.availableImages&&(h.available=r.availableImages.indexOf(s)>-1),h}eachChild(r){r(this.input)}outputDefined(){return!1}}class al{constructor(r){this.type=Ge,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const h=s.parse(r[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${ie(h.type)} instead.`):new al(h):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new ur(`Expected value to be of type string or array, but found ${ie(pr(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const uo=8192;function ed(o,r){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(s*m*uo),Math.round(h*m*uo)]}function yu(o,r){const s=Math.pow(2,r.z);return[(m=(o[0]/uo+r.x)/s,360*m-180),(h=(o[1]/uo+r.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,m}function vs(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Ao(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Rn(o,r,s){const h=o[0]-r[0],m=o[1]-r[1],_=o[0]-s[0],x=o[1]-s[1];return h*x-_*m==0&&h*_<=0&&m*x<=0}function Vs(o,r,s,h){return(m=[h[0]-s[0],h[1]-s[1]])[0]*(_=[r[0]-o[0],r[1]-o[1]])[1]-m[1]*_[0]!=0&&!(!mc(o,r,s,h)||!mc(s,h,o,r));var m,_}function td(o,r,s){for(const h of s)for(let m=0;m<h.length-1;++m)if(Vs(o,r,h[m],h[m+1]))return!0;return!1}function Gs(o,r,s=!1){let h=!1;for(const w of r)for(let P=0;P<w.length-1;P++){if(Rn(o,w[P],w[P+1]))return s;(_=w[P])[1]>(m=o)[1]!=(x=w[P+1])[1]>m[1]&&m[0]<(x[0]-_[0])*(m[1]-_[1])/(x[1]-_[1])+_[0]&&(h=!h)}var m,_,x;return h}function nd(o,r){for(const s of r)if(Gs(o,s))return!0;return!1}function pc(o,r){for(const s of o)if(!Gs(s,r))return!1;for(let s=0;s<o.length-1;++s)if(td(o[s],o[s+1],r))return!1;return!0}function rd(o,r){for(const s of r)if(pc(o,s))return!0;return!1}function mc(o,r,s,h){const m=h[0]-s[0],_=h[1]-s[1],x=(o[0]-s[0])*_-m*(o[1]-s[1]),w=(r[0]-s[0])*_-m*(r[1]-s[1]);return x>0&&w<0||x<0&&w>0}function ll(o,r,s){const h=[];for(let m=0;m<o.length;m++){const _=[];for(let x=0;x<o[m].length;x++){const w=ed(o[m][x],s);vs(r,w),_.push(w)}h.push(_)}return h}function ul(o,r,s){const h=[];for(let m=0;m<o.length;m++){const _=ll(o[m],r,s);h.push(_)}return h}function gc(o,r,s,h){if(o[0]<s[0]||o[0]>s[2]){const m=.5*h;let _=o[0]-s[0]>m?-h:s[0]-o[0]>m?h:0;_===0&&(_=o[0]-s[2]>m?-h:s[2]-o[0]>m?h:0),o[0]+=_}vs(r,o)}function yc(o,r,s,h){const m=Math.pow(2,h.z)*uo,_=[h.x*uo,h.y*uo],x=[];for(const w of o)for(const P of w){const F=[P.x+_[0],P.y+_[1]];gc(F,r,s,m),x.push(F)}return x}function vc(o,r,s,h){const m=Math.pow(2,h.z)*uo,_=[h.x*uo,h.y*uo],x=[];for(const P of o){const F=[];for(const $ of P){const Y=[$.x+_[0],$.y+_[1]];vs(r,Y),F.push(Y)}x.push(F)}if(r[2]-r[0]<=m/2){(w=r)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const P of x)for(const F of P)gc(F,r,s,m)}var w;return x}class _s{constructor(r,s){this.type=Pt,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Xr(r[1])){const h=r[1];if(h.type==="FeatureCollection"){const m=[];for(const _ of h.features){const{type:x,coordinates:w}=_.geometry;x==="Polygon"&&m.push(w),x==="MultiPolygon"&&m.push(...w)}if(m.length)return new _s(h,{type:"MultiPolygon",coordinates:m})}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new _s(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new _s(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const w=ll(h.coordinates,_,x),P=yc(s.geometry(),m,_,x);if(!Ao(m,_))return!1;for(const F of P)if(!Gs(F,w))return!1}if(h.type==="MultiPolygon"){const w=ul(h.coordinates,_,x),P=yc(s.geometry(),m,_,x);if(!Ao(m,_))return!1;for(const F of P)if(!nd(F,w))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const w=ll(h.coordinates,_,x),P=vc(s.geometry(),m,_,x);if(!Ao(m,_))return!1;for(const F of P)if(!pc(F,w))return!1}if(h.type==="MultiPolygon"){const w=ul(h.coordinates,_,x),P=vc(s.geometry(),m,_,x);if(!Ao(m,_))return!1;for(const F of P)if(!rd(F,w))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let vu=class{constructor(o=[],r=(s,h)=>s<h?-1:s>h?1:0){if(this.data=o,this.length=this.data.length,this.compare=r,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:r,compare:s}=this,h=r[o];for(;o>0;){const m=o-1>>1,_=r[m];if(s(h,_)>=0)break;r[o]=_,o=m}r[o]=h}_down(o){const{data:r,compare:s}=this,h=this.length>>1,m=r[o];for(;o<h;){let _=1+(o<<1);const x=_+1;if(x<this.length&&s(r[x],r[_])<0&&(_=x),s(r[_],m)>=0)break;r[o]=r[_],o=_}r[o]=m}};function id(o,r,s,h,m){_c(o,r,s,h||o.length-1,m||od)}function _c(o,r,s,h,m){for(;h>s;){if(h-s>600){var _=h-s+1,x=r-s+1,w=Math.log(_),P=.5*Math.exp(2*w/3),F=.5*Math.sqrt(w*P*(_-P)/_)*(x-_/2<0?-1:1);_c(o,r,Math.max(s,Math.floor(r-x*P/_+F)),Math.min(h,Math.floor(r+(_-x)*P/_+F)),m)}var $=o[r],Y=s,ne=h;for(Ea(o,s,r),m(o[h],$)>0&&Ea(o,s,h);Y<ne;){for(Ea(o,Y,ne),Y++,ne--;m(o[Y],$)<0;)Y++;for(;m(o[ne],$)>0;)ne--}m(o[s],$)===0?Ea(o,s,ne):Ea(o,++ne,h),ne<=r&&(s=ne+1),r<=ne&&(h=ne-1)}}function Ea(o,r,s){var h=o[r];o[r]=o[s],o[s]=h}function od(o,r){return o<r?-1:o>r?1:0}function xs(o,r){if(o.length<=1)return[o];const s=[];let h,m;for(const _ of o){const x=Hs(_);x!==0&&(_.area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(h&&s.push(h),h=[_]):h.push(_))}if(h&&s.push(h),r>1)for(let _=0;_<s.length;_++)s[_].length<=r||(id(s[_],r,1,s[_].length-1,sd),s[_]=s[_].slice(0,r));return s}function sd(o,r){return r.area-o.area}function Hs(o){let r=0;for(let s,h,m=0,_=o.length,x=_-1;m<_;x=m++)s=o[m],h=o[x],r+=(h.x-s.x)*(s.y+h.y);return r}const _u=1/298.257223563,Vi=_u*(2-_u),xc=Math.PI/180;class xu{constructor(r){const s=6378.137*xc*1e3,h=Math.cos(r*xc),m=1/(1-Vi*(1-h*h)),_=Math.sqrt(m);this.kx=s*_*h,this.ky=s*_*m*(1-Vi)}distance(r,s){const h=this.wrap(r[0]-s[0])*this.kx,m=(r[1]-s[1])*this.ky;return Math.sqrt(h*h+m*m)}pointOnLine(r,s){let h,m,_,x,w=1/0;for(let P=0;P<r.length-1;P++){let F=r[P][0],$=r[P][1],Y=this.wrap(r[P+1][0]-F)*this.kx,ne=(r[P+1][1]-$)*this.ky,le=0;Y===0&&ne===0||(le=(this.wrap(s[0]-F)*this.kx*Y+(s[1]-$)*this.ky*ne)/(Y*Y+ne*ne),le>1?(F=r[P+1][0],$=r[P+1][1]):le>0&&(F+=Y/this.kx*le,$+=ne/this.ky*le)),Y=this.wrap(s[0]-F)*this.kx,ne=(s[1]-$)*this.ky;const me=Y*Y+ne*ne;me<w&&(w=me,h=F,m=$,_=P,x=le)}return{point:[h,m],index:_,t:Math.max(0,Math.min(1,x))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function wc(o,r){return r[0]-o[0]}function cl(o){return o[1]-o[0]+1}function Gi(o,r){return o[1]>=o[0]&&o[1]<r}function wu(o,r){if(o[0]>o[1])return[null,null];const s=cl(o);if(r){if(s===2)return[o,null];const m=Math.floor(s/2);return[[o[0],o[0]+m],[o[0]+m,o[1]]]}if(s===1)return[o,null];const h=Math.floor(s/2)-1;return[[o[0],o[0]+h],[o[0]+h+1,o[1]]]}function Zs(o,r){if(!Gi(r,o.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let h=r[0];h<=r[1];++h)vs(s,o[h]);return s}function bu(o){const r=[1/0,1/0,-1/0,-1/0];for(const s of o)for(const h of s)vs(r,h);return r}function hl(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function Ws(o,r,s){if(!hl(o)||!hl(r))return NaN;let h=0,m=0;return o[2]<r[0]&&(h=r[0]-o[2]),o[0]>r[2]&&(h=o[0]-r[2]),o[1]>r[3]&&(m=o[1]-r[3]),o[3]<r[1]&&(m=r[1]-o[3]),s.distance([0,0],[h,m])}function Qo(o,r,s){const h=s.pointOnLine(r,o);return s.distance(o,h.point)}function dl(o,r,s,h,m){const _=Math.min(Qo(o,[s,h],m),Qo(r,[s,h],m)),x=Math.min(Qo(s,[o,r],m),Qo(h,[o,r],m));return Math.min(_,x)}function ad(o,r,s,h,m){if(!Gi(r,o.length)||!Gi(h,s.length))return 1/0;let _=1/0;for(let x=r[0];x<r[1];++x){const w=o[x],P=o[x+1];for(let F=h[0];F<h[1];++F){const $=s[F],Y=s[F+1];if(Vs(w,P,$,Y))return 0;_=Math.min(_,dl(w,P,$,Y,m))}}return _}function ar(o,r,s,h,m){if(!Gi(r,o.length)||!Gi(h,s.length))return NaN;let _=1/0;for(let x=r[0];x<=r[1];++x)for(let w=h[0];w<=h[1];++w)if(_=Math.min(_,m.distance(o[x],s[w])),_===0)return _;return _}function fl(o,r,s){if(Gs(o,r,!0))return 0;let h=1/0;for(const m of r){const _=m[0],x=m[m.length-1];if(_!==x&&(h=Math.min(h,Qo(o,[x,_],s)),h===0))return h;const w=s.pointOnLine(m,o);if(h=Math.min(h,s.distance(o,w.point)),h===0)return h}return h}function gn(o,r,s,h){if(!Gi(r,o.length))return NaN;for(let _=r[0];_<=r[1];++_)if(Gs(o[_],s,!0))return 0;let m=1/0;for(let _=r[0];_<r[1];++_){const x=o[_],w=o[_+1];for(const P of s)for(let F=0,$=P.length,Y=$-1;F<$;Y=F++){const ne=P[Y],le=P[F];if(Vs(x,w,ne,le))return 0;m=Math.min(m,dl(x,w,ne,le,h))}}return m}function pl(o,r){for(const s of o)for(const h of s)if(Gs(h,r,!0))return!0;return!1}function Gn(o,r,s,h=1/0){const m=bu(o),_=bu(r);if(h!==1/0&&Ws(m,_,s)>=h)return h;if(Ao(m,_)){if(pl(o,r))return 0}else if(pl(r,o))return 0;let x=1/0;for(const w of o)for(let P=0,F=w.length,$=F-1;P<F;$=P++){const Y=w[$],ne=w[P];for(const le of r)for(let me=0,we=le.length,Oe=we-1;me<we;Oe=me++){const De=le[Oe],nt=le[me];if(Vs(Y,ne,De,nt))return 0;x=Math.min(x,dl(Y,ne,De,nt,s))}}return x}function jn(o,r,s,h,m,_){if(!_)return;const x=Ws(Zs(h,_),m,s);x<r&&o.push([x,_,[0,0]])}function ws(o,r,s,h,m,_,x){if(!_||!x)return;const w=Ws(Zs(h,_),Zs(m,x),s);w<r&&o.push([w,_,x])}function co(o,r,s,h,m=1/0){let _=Math.min(h.distance(o[0],s[0][0]),m);if(_===0)return _;const x=new vu([[0,[0,o.length-1],[0,0]]],wc),w=bu(s);for(;x.length>0;){const P=x.pop();if(P[0]>=_)continue;const F=P[1],$=r?50:100;if(cl(F)<=$){if(!Gi(F,o.length))return NaN;if(r){const Y=gn(o,F,s,h);if(isNaN(Y)||Y===0)return Y;_=Math.min(_,Y)}else for(let Y=F[0];Y<=F[1];++Y){const ne=fl(o[Y],s,h);if(_=Math.min(_,ne),_===0)return 0}}else{const Y=wu(F,r);jn(x,_,h,o,w,Y[0]),jn(x,_,h,o,w,Y[1])}}return _}function ho(o,r,s,h,m,_=1/0){let x=Math.min(_,m.distance(o[0],s[0]));if(x===0)return x;const w=new vu([[0,[0,o.length-1],[0,s.length-1]]],wc);for(;w.length>0;){const P=w.pop();if(P[0]>=x)continue;const F=P[1],$=P[2],Y=r?50:100,ne=h?50:100;if(cl(F)<=Y&&cl($)<=ne){if(!Gi(F,o.length)&&Gi($,s.length))return NaN;let le;if(r&&h)le=ad(o,F,s,$,m),x=Math.min(x,le);else if(r&&!h){const me=o.slice(F[0],F[1]+1);for(let we=$[0];we<=$[1];++we)if(le=Qo(s[we],me,m),x=Math.min(x,le),x===0)return x}else if(!r&&h){const me=s.slice($[0],$[1]+1);for(let we=F[0];we<=F[1];++we)if(le=Qo(o[we],me,m),x=Math.min(x,le),x===0)return x}else le=ar(o,F,s,$,m),x=Math.min(x,le)}else{const le=wu(F,r),me=wu($,h);ws(w,x,m,o,s,le[0],me[0]),ws(w,x,m,o,s,le[0],me[1]),ws(w,x,m,o,s,le[1],me[0]),ws(w,x,m,o,s,le[1],me[1])}}return x}function Lr(o){return o.type==="MultiPolygon"?o.coordinates.map(r=>({type:"Polygon",coordinates:r})):o.type==="MultiLineString"?o.coordinates.map(r=>({type:"LineString",coordinates:r})):o.type==="MultiPoint"?o.coordinates.map(r=>({type:"Point",coordinates:r})):[o]}class gi{constructor(r,s){this.type=Ge,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Xr(r[1])){const h=r[1];if(h.type==="FeatureCollection")return new gi(h,h.features.map(m=>Lr(m.geometry)).flat());if(h.type==="Feature")return new gi(h,Lr(h.geometry));if("type"in h&&"coordinates"in h)return new gi(h,Lr(h))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,h){const m=s.geometry(),_=m.flat().map(P=>yu([P.x,P.y],s.canonical));if(m.length===0)return NaN;const x=new xu(_[0][1]);let w=1/0;for(const P of h){switch(P.type){case"Point":w=Math.min(w,ho(_,!1,[P.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,ho(_,!1,P.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,co(_,!1,P.coordinates,x,w))}if(w===0)return w}return w}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,h){const m=s.geometry(),_=m.flat().map(P=>yu([P.x,P.y],s.canonical));if(m.length===0)return NaN;const x=new xu(_[0][1]);let w=1/0;for(const P of h){switch(P.type){case"Point":w=Math.min(w,ho(_,!0,[P.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,ho(_,!0,P.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,co(_,!0,P.coordinates,x,w))}if(w===0)return w}return w}(r,this.geometries);if(r.geometryType()==="Polygon")return function(s,h){const m=s.geometry();if(m.length===0||m[0].length===0)return NaN;const _=xs(m,0).map(P=>P.map(F=>F.map($=>yu([$.x,$.y],s.canonical)))),x=new xu(_[0][0][0][1]);let w=1/0;for(const P of h)for(const F of _){switch(P.type){case"Point":w=Math.min(w,co([P.coordinates],!1,F,x,w));break;case"LineString":w=Math.min(w,co(P.coordinates,!0,F,x,w));break;case"Polygon":w=Math.min(w,Gn(F,P.coordinates,x,w))}if(w===0)return w}return w}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const es={"==":pu,"!=":dc,">":Jh,"<":fc,">=":mu,"<=":Qh,array:wr,at:du,boolean:wr,case:el,coalesce:ba,collator:Sa,format:sl,image:gu,in:mi,"index-of":Us,interpolate:ti,"interpolate-hcl":ti,"interpolate-lab":ti,length:al,let:$i,literal:Ni,match:fu,number:wr,"number-format":ol,object:wr,slice:_a,step:ys,string:wr,"to-boolean":Ui,"to-color":Ui,"to-number":Ui,"to-string":Ui,var:Fn,within:_s,distance:gi};class ni{constructor(r,s,h,m){this.name=r,this.type=s,this._evaluate=h,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,s){const h=r[0],m=ni.definitions[h];if(!m)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,w=x.filter(([F])=>!Array.isArray(F)||F.length===r.length-1);let P=null;for(const[F,$]of w){P=new gs(s.registry,fo,s.path,null,s.scope);const Y=[];let ne=!1;for(let le=1;le<r.length;le++){const me=r[le],we=Array.isArray(F)?F[le-1]:F.type,Oe=P.parse(me,1+Y.length,we);if(!Oe){ne=!0;break}Y.push(Oe)}if(!ne)if(Array.isArray(F)&&F.length!==Y.length)P.error(`Expected ${F.length} arguments, but found ${Y.length} instead.`);else{for(let le=0;le<Y.length;le++){const me=Array.isArray(F)?F[le]:F.type,we=Y[le];P.concat(le+1).checkSubtype(me,we.type)}if(P.errors.length===0)return new ni(h,_,$,Y)}}if(w.length===1)s.errors.push(...P.errors);else{const F=(w.length?w:x).map(([Y])=>{return ne=Y,Array.isArray(ne)?`(${ne.map(ie).join(", ")})`:`(${ie(ne.type)}...)`;var ne}).join(" | "),$=[];for(let Y=1;Y<r.length;Y++){const ne=s.parse(r[Y],1+$.length);if(!ne)return null;$.push(ie(ne.type))}s.error(`Expected arguments of type ${F}, but found (${$.join(", ")}) instead.`)}return null}static register(r,s){ni.definitions=s;for(const h in s)r[h]=ni}}function Su(o,[r,s,h,m]){r=r.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const _=m?m.evaluate(o):1,x=Ns(r,s,h,_);if(x)throw new ur(x);return new zn(r/255,s/255,h/255,_,!1)}function Xs(o,r){return o in r}function qs(o,r){const s=r[o];return s===void 0?null:s}function Dr(o){return{type:o}}function fo(o){if(o instanceof Fn)return fo(o.boundExpression);if(o instanceof ni&&o.name==="error"||o instanceof Sa||o instanceof _s||o instanceof gi)return!1;const r=o instanceof Ui||o instanceof wr;let s=!0;return o.eachChild(h=>{s=r?s&&fo(h):s&&h instanceof Ni}),!!s&&Ks(o)&&ts(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ks(o){if(o instanceof ni&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof _s||o instanceof gi)return!1;let r=!0;return o.eachChild(s=>{r&&!Ks(s)&&(r=!1)}),r}function Mo(o){if(o instanceof ni&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(s=>{r&&!Mo(s)&&(r=!1)}),r}function ts(o,r){if(o instanceof ni&&r.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!ts(h,r)&&(s=!1)}),s}function Ta(o){return{result:"success",value:o}}function bs(o){return{result:"error",value:o}}function Ss(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Eu(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function po(o){return!!o.expression&&o.expression.interpolated}function Mn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function ml(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function bc(o){return o}function gl(o,r){const s=r.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",m=h||!(h||o.property!==void 0),_=o.type||(po(r)?"exponential":"interval");if(s||r.type==="padding"){const $=s?zn.parse:fi.parse;(o=U({},o)).stops&&(o.stops=o.stops.map(Y=>[Y[0],$(Y[1])])),o.default=$(o.default?o.default:r.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let w,P,F;if(_==="exponential")w=Z;else if(_==="interval")w=Ia;else if(_==="categorical"){w=Tu,P=Object.create(null);for(const $ of o.stops)P[$[0]]=$[1];F=typeof o.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);w=ye}if(h){const $={},Y=[];for(let me=0;me<o.stops.length;me++){const we=o.stops[me],Oe=we[0].zoom;$[Oe]===void 0&&($[Oe]={zoom:Oe,type:o.type,property:o.property,default:o.default,stops:[]},Y.push(Oe)),$[Oe].stops.push([we[0].value,we[1]])}const ne=[];for(const me of Y)ne.push([$[me].zoom,gl($[me],r)]);const le={name:"linear"};return{kind:"composite",interpolationType:le,interpolationFactor:ti.interpolationFactor.bind(void 0,le),zoomStops:ne.map(me=>me[0]),evaluate:({zoom:me},we)=>Z({stops:ne,base:o.base},r,me).evaluate(me,we)}}if(m){const $=_==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:$,interpolationFactor:ti.interpolationFactor.bind(void 0,$),zoomStops:o.stops.map(Y=>Y[0]),evaluate:({zoom:Y})=>w(o,r,Y,P,F)}}return{kind:"source",evaluate($,Y){const ne=Y&&Y.properties?Y.properties[o.property]:void 0;return ne===void 0?Es(o.default,r.default):w(o,r,ne,P,F)}}}function Es(o,r,s){return o!==void 0?o:r!==void 0?r:s!==void 0?s:void 0}function Tu(o,r,s,h,m){return Es(typeof s===m?h[s]:void 0,o.default,r.default)}function Ia(o,r,s){if(Mn(s)!=="number")return Es(o.default,r.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const m=tl(o.stops.map(_=>_[0]),s);return o.stops[m][1]}function Z(o,r,s){const h=o.base!==void 0?o.base:1;if(Mn(s)!=="number")return Es(o.default,r.default);const m=o.stops.length;if(m===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[m-1][0])return o.stops[m-1][1];const _=tl(o.stops.map($=>$[0]),s),x=function($,Y,ne,le){const me=le-ne,we=$-ne;return me===0?0:Y===1?we/me:(Math.pow(Y,we)-1)/(Math.pow(Y,me)-1)}(s,h,o.stops[_][0],o.stops[_+1][0]),w=o.stops[_][1],P=o.stops[_+1][1],F=ei[r.type]||bc;return typeof w.evaluate=="function"?{evaluate(...$){const Y=w.evaluate.apply(void 0,$),ne=P.evaluate.apply(void 0,$);if(Y!==void 0&&ne!==void 0)return F(Y,ne,x,o.colorSpace)}}:F(w,P,x,o.colorSpace)}function ye(o,r,s){switch(r.type){case"color":s=zn.parse(s);break;case"formatted":s=xr.fromString(s.toString());break;case"resolvedImage":s=pi.fromString(s.toString());break;case"padding":s=fi.parse(s);break;default:Mn(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0)}return Es(s,o.default,r.default)}ni.register(es,{error:[{kind:"error"},[St],(o,[r])=>{throw new ur(r.evaluate(o))}],typeof:[St,[Ot],(o,[r])=>ie(pr(r.evaluate(o)))],"to-rgba":[se(Ge,4),[mn],(o,[r])=>{const[s,h,m,_]=r.evaluate(o).rgb;return[255*s,255*h,255*m,_]}],rgb:[mn,[Ge,Ge,Ge],Su],rgba:[mn,[Ge,Ge,Ge,Ge],Su],has:{type:Pt,overloads:[[[St],(o,[r])=>Xs(r.evaluate(o),o.properties())],[[St,bn],(o,[r,s])=>Xs(r.evaluate(o),s.evaluate(o))]]},get:{type:Ot,overloads:[[[St],(o,[r])=>qs(r.evaluate(o),o.properties())],[[St,bn],(o,[r,s])=>qs(r.evaluate(o),s.evaluate(o))]]},"feature-state":[Ot,[St],(o,[r])=>qs(r.evaluate(o),o.featureState||{})],properties:[bn,[],o=>o.properties()],"geometry-type":[St,[],o=>o.geometryType()],id:[Ot,[],o=>o.id()],zoom:[Ge,[],o=>o.globals.zoom],"heatmap-density":[Ge,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ge,[],o=>o.globals.lineProgress||0],accumulated:[Ot,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ge,Dr(Ge),(o,r)=>{let s=0;for(const h of r)s+=h.evaluate(o);return s}],"*":[Ge,Dr(Ge),(o,r)=>{let s=1;for(const h of r)s*=h.evaluate(o);return s}],"-":{type:Ge,overloads:[[[Ge,Ge],(o,[r,s])=>r.evaluate(o)-s.evaluate(o)],[[Ge],(o,[r])=>-r.evaluate(o)]]},"/":[Ge,[Ge,Ge],(o,[r,s])=>r.evaluate(o)/s.evaluate(o)],"%":[Ge,[Ge,Ge],(o,[r,s])=>r.evaluate(o)%s.evaluate(o)],ln2:[Ge,[],()=>Math.LN2],pi:[Ge,[],()=>Math.PI],e:[Ge,[],()=>Math.E],"^":[Ge,[Ge,Ge],(o,[r,s])=>Math.pow(r.evaluate(o),s.evaluate(o))],sqrt:[Ge,[Ge],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Ge,[Ge],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Ge,[Ge],(o,[r])=>Math.log(r.evaluate(o))],log2:[Ge,[Ge],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Ge,[Ge],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Ge,[Ge],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Ge,[Ge],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Ge,[Ge],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Ge,[Ge],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Ge,[Ge],(o,[r])=>Math.atan(r.evaluate(o))],min:[Ge,Dr(Ge),(o,r)=>Math.min(...r.map(s=>s.evaluate(o)))],max:[Ge,Dr(Ge),(o,r)=>Math.max(...r.map(s=>s.evaluate(o)))],abs:[Ge,[Ge],(o,[r])=>Math.abs(r.evaluate(o))],round:[Ge,[Ge],(o,[r])=>{const s=r.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ge,[Ge],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Ge,[Ge],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[Pt,[St,Ot],(o,[r,s])=>o.properties()[r.value]===s.value],"filter-id-==":[Pt,[Ot],(o,[r])=>o.id()===r.value],"filter-type-==":[Pt,[St],(o,[r])=>o.geometryType()===r.value],"filter-<":[Pt,[St,Ot],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h<m}],"filter-id-<":[Pt,[Ot],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s<h}],"filter->":[Pt,[St,Ot],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h>m}],"filter-id->":[Pt,[Ot],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s>h}],"filter-<=":[Pt,[St,Ot],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[Pt,[Ot],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s<=h}],"filter->=":[Pt,[St,Ot],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[Pt,[Ot],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s>=h}],"filter-has":[Pt,[Ot],(o,[r])=>r.value in o.properties()],"filter-has-id":[Pt,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Pt,[se(St)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[Pt,[se(Ot)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[Pt,[St,se(Ot)],(o,[r,s])=>s.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[Pt,[St,se(Ot)],(o,[r,s])=>function(h,m,_,x){for(;_<=x;){const w=_+x>>1;if(m[w]===h)return!0;m[w]>h?x=w-1:_=w+1}return!1}(o.properties()[r.value],s.value,0,s.value.length-1)],all:{type:Pt,overloads:[[[Pt,Pt],(o,[r,s])=>r.evaluate(o)&&s.evaluate(o)],[Dr(Pt),(o,r)=>{for(const s of r)if(!s.evaluate(o))return!1;return!0}]]},any:{type:Pt,overloads:[[[Pt,Pt],(o,[r,s])=>r.evaluate(o)||s.evaluate(o)],[Dr(Pt),(o,r)=>{for(const s of r)if(s.evaluate(o))return!0;return!1}]]},"!":[Pt,[Pt],(o,[r])=>!r.evaluate(o)],"is-supported-script":[Pt,[St],(o,[r])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(r.evaluate(o))}],upcase:[St,[St],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[St,[St],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[St,Dr(Ot),(o,r)=>r.map(s=>va(s.evaluate(o))).join("")],"resolved-locale":[St,[Ar],(o,[r])=>r.evaluate(o).resolvedLocale()]});class Ue{constructor(r,s){var h;this.expression=r,this._warningHistory={},this._evaluator=new Qa,this._defaultValue=s?(h=s).type==="color"&&ml(h.default)?new zn(0,0,0,0):h.type==="color"?zn.parse(h.default)||null:h.type==="padding"?fi.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Ii.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(r,s,h,m,_,x){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,s,h,m,_,x){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new ur(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function ut(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in es}function zt(o,r){const s=new gs(es,fo,[],r?function(m){const _={color:mn,string:St,number:Ge,enum:St,boolean:Pt,formatted:Qr,padding:Ti,resolvedImage:Ur,variableAnchorOffsetCollection:ke};return m.type==="array"?se(_[m.value]||Ot,m.length):_[m.type]}(r):void 0),h=s.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Ta(new Ue(h,r)):bs(s.errors)}class bt{constructor(r,s){this.kind=r,this._styleExpression=s,this.isStateDependent=r!=="constant"&&!Mo(s.expression)}evaluateWithoutErrorHandling(r,s,h,m,_,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,h,m,_,x)}evaluate(r,s,h,m,_,x){return this._styleExpression.evaluate(r,s,h,m,_,x)}}class Nt{constructor(r,s,h,m){this.kind=r,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!Mo(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,s,h,m,_,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,h,m,_,x)}evaluate(r,s,h,m,_,x){return this._styleExpression.evaluate(r,s,h,m,_,x)}interpolationFactor(r,s,h){return this.interpolationType?ti.interpolationFactor(this.interpolationType,r,s,h):0}}function nn(o,r){const s=zt(o,r);if(s.result==="error")return s;const h=s.value.expression,m=Ks(h);if(!m&&!Ss(r))return bs([new Te("","data expressions not supported")]);const _=ts(h,["zoom"]);if(!_&&!Eu(r))return bs([new Te("","zoom expressions not supported")]);const x=$n(h);return x||_?x instanceof Te?bs([x]):x instanceof ti&&!po(r)?bs([new Te("",'"interpolate" expressions cannot be used with this property')]):Ta(x?new Nt(m?"camera":"composite",s.value,x.labels,x instanceof ti?x.interpolation:void 0):new bt(m?"constant":"source",s.value)):bs([new Te("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class yn{constructor(r,s){this._parameters=r,this._specification=s,U(this,gl(this._parameters,this._specification))}static deserialize(r){return new yn(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function $n(o){let r=null;if(o instanceof $i)r=$n(o.result);else if(o instanceof ba){for(const s of o.args)if(r=$n(s),r)break}else(o instanceof ys||o instanceof ti)&&o.input instanceof ni&&o.input.name==="zoom"&&(r=o);return r instanceof Te||o.eachChild(s=>{const h=$n(s);h instanceof Te?r=h:!r&&h?r=new Te("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&h&&r!==h&&(r=new Te("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Ln(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!Ln(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const qn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function mr(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Ln(o)||(o=Hi(o));const r=zt(o,qn);if(r.result==="error")throw new Error(r.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,m)=>r.value.evaluate(s,h,{},m),needGeometry:kr(o)}}function $r(o,r){return o<r?-1:o>r?1:0}function kr(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let r=1;r<o.length;r++)if(kr(o[r]))return!0;return!1}function Hi(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Zi(o[1],o[2],"=="):r==="!="?br(Zi(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Zi(o[1],o[2],r):r==="any"?(s=o.slice(1),["any"].concat(s.map(Hi))):r==="all"?["all"].concat(o.slice(1).map(Hi)):r==="none"?["all"].concat(o.slice(1).map(Hi).map(br)):r==="in"?Wi(o[1],o.slice(2)):r==="!in"?br(Wi(o[1],o.slice(2))):r==="has"?Ys(o[1]):r!=="!has"||br(Ys(o[1]));var s}function Zi(o,r,s){switch(o){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,o,r]}}function Wi(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",o,["literal",r.sort($r)]]:["filter-in-small",o,["literal",r]]}}function Ys(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function br(o){return["!",o]}function mo(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const _ of o)m+=`${mo(_)},`;return`${m}]`}const s=Object.keys(o).sort();let h="{";for(let m=0;m<s.length;m++)h+=`${JSON.stringify(s[m])}:${mo(o[s[m]])},`;return`${h}}`}function mp(o){let r="";for(const s of vn)r+=`/${mo(o[s])}`;return r}function gp(o){const r=o.value;return r?[new k(o.key,r,"constants have been deprecated as of v8")]:[]}function gr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function ko(o){if(Array.isArray(o))return o.map(ko);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const s in o)r[s]=ko(o[s]);return r}return gr(o)}function Xi(o){const r=o.key,s=o.value,h=o.valueSpec||{},m=o.objectElementValidators||{},_=o.style,x=o.styleSpec,w=o.validateSpec;let P=[];const F=Mn(s);if(F!=="object")return[new k(r,s,`object expected, ${F} found`)];for(const $ in s){const Y=$.split(".")[0],ne=h[Y]||h["*"];let le;if(m[Y])le=m[Y];else if(h[Y])le=w;else if(m["*"])le=m["*"];else{if(!h["*"]){P.push(new k(r,s[$],`unknown property "${$}"`));continue}le=w}P=P.concat(le({key:(r&&`${r}.`)+$,value:s[$],valueSpec:ne,style:_,styleSpec:x,object:s,objectKey:$,validateSpec:w},s))}for(const $ in h)m[$]||h[$].required&&h[$].default===void 0&&s[$]===void 0&&P.push(new k(r,s,`missing required property "${$}"`));return P}function Iu(o){const r=o.value,s=o.valueSpec,h=o.style,m=o.styleSpec,_=o.key,x=o.arrayElementValidator||o.validateSpec;if(Mn(r)!=="array")return[new k(_,r,`array expected, ${Mn(r)} found`)];if(s.length&&r.length!==s.length)return[new k(_,r,`array length ${s.length} expected, length ${r.length} found`)];if(s["min-length"]&&r.length<s["min-length"])return[new k(_,r,`array length at least ${s["min-length"]} expected, length ${r.length} found`)];let w={type:s.value,values:s.values};m.$version<7&&(w.function=s.function),Mn(s.value)==="object"&&(w=s.value);let P=[];for(let F=0;F<r.length;F++)P=P.concat(x({array:r,arrayIndex:F,value:r[F],valueSpec:w,validateSpec:o.validateSpec,style:h,styleSpec:m,key:`${_}[${F}]`}));return P}function ld(o){const r=o.key,s=o.value,h=o.valueSpec;let m=Mn(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new k(r,s,`number expected, ${m} found`)]:"minimum"in h&&s<h.minimum?[new k(r,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new k(r,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Sc(o){const r=o.valueSpec,s=gr(o.value.type);let h,m,_,x={};const w=s!=="categorical"&&o.value.property===void 0,P=!w,F=Mn(o.value.stops)==="array"&&Mn(o.value.stops[0])==="array"&&Mn(o.value.stops[0][0])==="object",$=Xi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(le){if(s==="identity")return[new k(le.key,le.value,'identity function may not have a "stops" property')];let me=[];const we=le.value;return me=me.concat(Iu({key:le.key,value:we,valueSpec:le.valueSpec,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec,arrayElementValidator:Y})),Mn(we)==="array"&&we.length===0&&me.push(new k(le.key,we,"array must have at least one stop")),me},default:function(le){return le.validateSpec({key:le.key,value:le.value,valueSpec:r,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec})}}});return s==="identity"&&w&&$.push(new k(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||$.push(new k(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!po(o.valueSpec)&&$.push(new k(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(P&&!Ss(o.valueSpec)?$.push(new k(o.key,o.value,"property functions not supported")):w&&!Eu(o.valueSpec)&&$.push(new k(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!F||o.value.property!==void 0||$.push(new k(o.key,o.value,'"property" property is required')),$;function Y(le){let me=[];const we=le.value,Oe=le.key;if(Mn(we)!=="array")return[new k(Oe,we,`array expected, ${Mn(we)} found`)];if(we.length!==2)return[new k(Oe,we,`array length 2 expected, length ${we.length} found`)];if(F){if(Mn(we[0])!=="object")return[new k(Oe,we,`object expected, ${Mn(we[0])} found`)];if(we[0].zoom===void 0)return[new k(Oe,we,"object stop key must have zoom")];if(we[0].value===void 0)return[new k(Oe,we,"object stop key must have value")];if(_&&_>gr(we[0].zoom))return[new k(Oe,we[0].zoom,"stop zoom values must appear in ascending order")];gr(we[0].zoom)!==_&&(_=gr(we[0].zoom),m=void 0,x={}),me=me.concat(Xi({key:`${Oe}[0]`,value:we[0],valueSpec:{zoom:{}},validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec,objectElementValidators:{zoom:ld,value:ne}}))}else me=me.concat(ne({key:`${Oe}[0]`,value:we[0],valueSpec:{},validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec},we));return ut(ko(we[1]))?me.concat([new k(`${Oe}[1]`,we[1],"expressions are not allowed in function stops.")]):me.concat(le.validateSpec({key:`${Oe}[1]`,value:we[1],valueSpec:r,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec}))}function ne(le,me){const we=Mn(le.value),Oe=gr(le.value),De=le.value!==null?le.value:me;if(h){if(we!==h)return[new k(le.key,De,`${we} stop domain type must match previous stop domain type ${h}`)]}else h=we;if(we!=="number"&&we!=="string"&&we!=="boolean")return[new k(le.key,De,"stop domain value must be a number, string, or boolean")];if(we!=="number"&&s!=="categorical"){let nt=`number expected, ${we} found`;return Ss(r)&&s===void 0&&(nt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new k(le.key,De,nt)]}return s!=="categorical"||we!=="number"||isFinite(Oe)&&Math.floor(Oe)===Oe?s!=="categorical"&&we==="number"&&m!==void 0&&Oe<m?[new k(le.key,De,"stop domain values must appear in ascending order")]:(m=Oe,s==="categorical"&&Oe in x?[new k(le.key,De,"stop domain values must be unique")]:(x[Oe]=!0,[])):[new k(le.key,De,`integer expected, found ${Oe}`)]}}function yl(o){const r=(o.expressionContext==="property"?nn:zt)(ko(o.value),o.valueSpec);if(r.result==="error")return r.value.map(h=>new k(`${o.key}${h.key}`,o.value,h.message));const s=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new k(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Mo(s))return[new k(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Mo(s))return[new k(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!ts(s,["zoom","feature-state"]))return[new k(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Ks(s))return[new k(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ts(o){const r=o.key,s=o.value,h=o.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(gr(s))===-1&&m.push(new k(r,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(gr(s))===-1&&m.push(new k(r,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function ud(o){return Ln(ko(o.value))?yl(U({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ec(o)}function Ec(o){const r=o.value,s=o.key;if(Mn(r)!=="array")return[new k(s,r,`array expected, ${Mn(r)} found`)];const h=o.styleSpec;let m,_=[];if(r.length<1)return[new k(s,r,"filter array must have at least 1 element")];switch(_=_.concat(Ts({key:`${s}[0]`,value:r[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),gr(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&gr(r[1])==="$type"&&_.push(new k(s,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&_.push(new k(s,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=Mn(r[1]),m!=="string"&&_.push(new k(`${s}[1]`,r[1],`string expected, ${m} found`)));for(let x=2;x<r.length;x++)m=Mn(r[x]),gr(r[1])==="$type"?_=_.concat(Ts({key:`${s}[${x}]`,value:r[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&_.push(new k(`${s}[${x}]`,r[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)_=_.concat(Ec({key:`${s}[${x}]`,value:r[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=Mn(r[1]),r.length!==2?_.push(new k(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&_.push(new k(`${s}[1]`,r[1],`string expected, ${m} found`))}return _}function cd(o,r){const s=o.key,h=o.validateSpec,m=o.style,_=o.styleSpec,x=o.value,w=o.objectKey,P=_[`${r}_${o.layerType}`];if(!P)return[];const F=w.match(/^(.*)-transition$/);if(r==="paint"&&F&&P[F[1]]&&P[F[1]].transition)return h({key:s,value:x,valueSpec:_.transition,style:m,styleSpec:_});const $=o.valueSpec||P[w];if(!$)return[new k(s,x,`unknown property "${w}"`)];let Y;if(Mn(x)==="string"&&Ss($)&&!$.tokens&&(Y=/^{([^}]+)}$/.exec(x)))return[new k(s,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Y[1])} }\`.`)];const ne=[];return o.layerType==="symbol"&&(w==="text-field"&&m&&!m.glyphs&&ne.push(new k(s,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&ml(ko(x))&&gr(x.type)==="identity"&&ne.push(new k(s,x,'"text-font" does not support identity functions'))),ne.concat(h({key:o.key,value:x,valueSpec:$,style:m,styleSpec:_,expressionContext:"property",propertyType:r,propertyKey:w}))}function Tc(o){return cd(o,"paint")}function hd(o){return cd(o,"layout")}function dd(o){let r=[];const s=o.value,h=o.key,m=o.style,_=o.styleSpec;s.type||s.ref||r.push(new k(h,s,'either "type" or "ref" is required'));let x=gr(s.type);const w=gr(s.ref);if(s.id){const P=gr(s.id);for(let F=0;F<o.arrayIndex;F++){const $=m.layers[F];gr($.id)===P&&r.push(new k(h,s.id,`duplicate layer id "${s.id}", previously used at line ${$.id.__line__}`))}}if("ref"in s){let P;["type","source","source-layer","filter","layout"].forEach(F=>{F in s&&r.push(new k(h,s[F],`"${F}" is prohibited for ref layers`))}),m.layers.forEach(F=>{gr(F.id)===w&&(P=F)}),P?P.ref?r.push(new k(h,s.ref,"ref cannot reference another ref layer")):x=gr(P.type):r.push(new k(h,s.ref,`ref layer "${w}" not found`))}else if(x!=="background")if(s.source){const P=m.sources&&m.sources[s.source],F=P&&gr(P.type);P?F==="vector"&&x==="raster"?r.push(new k(h,s.source,`layer "${s.id}" requires a raster source`)):F!=="raster-dem"&&x==="hillshade"?r.push(new k(h,s.source,`layer "${s.id}" requires a raster-dem source`)):F==="raster"&&x!=="raster"?r.push(new k(h,s.source,`layer "${s.id}" requires a vector source`)):F!=="vector"||s["source-layer"]?F==="raster-dem"&&x!=="hillshade"?r.push(new k(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||F==="geojson"&&P.lineMetrics||r.push(new k(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new k(h,s,`layer "${s.id}" must specify a "source-layer"`)):r.push(new k(h,s.source,`source "${s.source}" not found`))}else r.push(new k(h,s,'missing required property "source"'));return r=r.concat(Xi({key:h,value:s,valueSpec:_.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:_.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:ud,layout:P=>Xi({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":F=>hd(U({layerType:x},F))}}),paint:P=>Xi({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":F=>Tc(U({layerType:x},F))}})}})),r}function Ca(o){const r=o.value,s=o.key,h=Mn(r);return h!=="string"?[new k(s,r,`string expected, ${h} found`)]:[]}const Ic={promoteId:function({key:o,value:r}){if(Mn(r)==="string")return Ca({key:o,value:r});{const s=[];for(const h in r)s.push(...Ca({key:`${o}.${h}`,value:r[h]}));return s}}};function Cu(o){const r=o.value,s=o.key,h=o.styleSpec,m=o.style,_=o.validateSpec;if(!r.type)return[new k(s,r,'"type" is required')];const x=gr(r.type);let w;switch(x){case"vector":case"raster":return w=Xi({key:s,value:r,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Ic,validateSpec:_}),w;case"raster-dem":return w=function(P){var F;const $=(F=P.sourceName)!==null&&F!==void 0?F:"",Y=P.value,ne=P.styleSpec,le=ne.source_raster_dem,me=P.style;let we=[];const Oe=Mn(Y);if(Y===void 0)return we;if(Oe!=="object")return we.push(new k("source_raster_dem",Y,`object expected, ${Oe} found`)),we;const De=gr(Y.encoding)==="custom",nt=["redFactor","greenFactor","blueFactor","baseShift"],qe=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const Qe in Y)!De&&nt.includes(Qe)?we.push(new k(Qe,Y[Qe],`In "${$}": "${Qe}" is only valid when "encoding" is set to "custom". ${qe} encoding found`)):le[Qe]?we=we.concat(P.validateSpec({key:Qe,value:Y[Qe],valueSpec:le[Qe],validateSpec:P.validateSpec,style:me,styleSpec:ne})):we.push(new k(Qe,Y[Qe],`unknown property "${Qe}"`));return we}({sourceName:s,value:r,style:o.style,styleSpec:h,validateSpec:_}),w;case"geojson":if(w=Xi({key:s,value:r,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:_,objectElementValidators:Ic}),r.cluster)for(const P in r.clusterProperties){const[F,$]=r.clusterProperties[P],Y=typeof F=="string"?[F,["accumulated"],["get",P]]:F;w.push(...yl({key:`${s}.${P}.map`,value:$,validateSpec:_,expressionContext:"cluster-map"})),w.push(...yl({key:`${s}.${P}.reduce`,value:Y,validateSpec:_,expressionContext:"cluster-reduce"}))}return w;case"video":return Xi({key:s,value:r,valueSpec:h.source_video,style:m,validateSpec:_,styleSpec:h});case"image":return Xi({key:s,value:r,valueSpec:h.source_image,style:m,validateSpec:_,styleSpec:h});case"canvas":return[new k(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ts({key:`${s}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:_,styleSpec:h})}}function fd(o){const r=o.value,s=o.styleSpec,h=s.light,m=o.style;let _=[];const x=Mn(r);if(r===void 0)return _;if(x!=="object")return _=_.concat([new k("light",r,`object expected, ${x} found`)]),_;for(const w in r){const P=w.match(/^(.*)-transition$/);_=_.concat(P&&h[P[1]]&&h[P[1]].transition?o.validateSpec({key:w,value:r[w],valueSpec:s.transition,validateSpec:o.validateSpec,style:m,styleSpec:s}):h[w]?o.validateSpec({key:w,value:r[w],valueSpec:h[w],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new k(w,r[w],`unknown property "${w}"`)])}return _}function pd(o){const r=o.value,s=o.styleSpec,h=s.sky,m=o.style,_=Mn(r);if(r===void 0)return[];if(_!=="object")return[new k("sky",r,`object expected, ${_} found`)];let x=[];for(const w in r)x=x.concat(h[w]?o.validateSpec({key:w,value:r[w],valueSpec:h[w],style:m,styleSpec:s}):[new k(w,r[w],`unknown property "${w}"`)]);return x}function md(o){const r=o.value,s=o.styleSpec,h=s.terrain,m=o.style;let _=[];const x=Mn(r);if(r===void 0)return _;if(x!=="object")return _=_.concat([new k("terrain",r,`object expected, ${x} found`)]),_;for(const w in r)_=_.concat(h[w]?o.validateSpec({key:w,value:r[w],valueSpec:h[w],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new k(w,r[w],`unknown property "${w}"`)]);return _}function gd(o){let r=[];const s=o.value,h=o.key;if(Array.isArray(s)){const m=[],_=[];for(const x in s)s[x].id&&m.includes(s[x].id)&&r.push(new k(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),m.push(s[x].id),s[x].url&&_.includes(s[x].url)&&r.push(new k(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),_.push(s[x].url),r=r.concat(Xi({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return Ca({key:h,value:s})}const Cc={"*":()=>[],array:Iu,boolean:function(o){const r=o.value,s=o.key,h=Mn(r);return h!=="boolean"?[new k(s,r,`boolean expected, ${h} found`)]:[]},number:ld,color:function(o){const r=o.key,s=o.value,h=Mn(s);return h!=="string"?[new k(r,s,`color expected, ${h} found`)]:zn.parse(String(s))?[]:[new k(r,s,`color expected, "${s}" found`)]},constants:gp,enum:Ts,filter:ud,function:Sc,layer:dd,object:Xi,source:Cu,light:fd,sky:pd,terrain:md,projection:function(o){const r=o.value,s=o.styleSpec,h=s.projection,m=o.style,_=Mn(r);if(r===void 0)return[];if(_!=="object")return[new k("projection",r,`object expected, ${_} found`)];let x=[];for(const w in r)x=x.concat(h[w]?o.validateSpec({key:w,value:r[w],valueSpec:h[w],style:m,styleSpec:s}):[new k(w,r[w],`unknown property "${w}"`)]);return x},string:Ca,formatted:function(o){return Ca(o).length===0?[]:yl(o)},resolvedImage:function(o){return Ca(o).length===0?[]:yl(o)},padding:function(o){const r=o.key,s=o.value;if(Mn(s)==="array"){if(s.length<1||s.length>4)return[new k(r,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let m=[];for(let _=0;_<s.length;_++)m=m.concat(o.validateSpec({key:`${r}[${_}]`,value:s[_],validateSpec:o.validateSpec,valueSpec:h}));return m}return ld({key:r,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,s=o.value,h=Mn(s),m=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new k(r,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<s.length;x+=2)_=_.concat(Ts({key:`${r}[${x}]`,value:s[x],valueSpec:m.layout_symbol["text-anchor"]})),_=_.concat(Iu({key:`${r}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:m}));return _},sprite:gd};function vl(o){const r=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=vl,s.expression&&ml(gr(r))?Sc(o):s.expression&&ut(ko(r))?yl(o):s.type&&Cc[s.type]?Cc[s.type](o):Xi(U({},o,{valueSpec:s.type?h[s.type]:s}))}function yp(o){const r=o.value,s=o.key,h=Ca(o);return h.length||(r.indexOf("{fontstack}")===-1&&h.push(new k(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&h.push(new k(s,r,'"glyphs" url must include a "{range}" token'))),h}function go(o,r=et){let s=[];return s=s.concat(vl({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:vl,objectElementValidators:{glyphs:yp,"*":()=>[]}})),o.constants&&(s=s.concat(gp({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:vl}))),yd(s)}function ns(o){return function(r){return o({...r,validateSpec:vl})}}function yd(o){return[].concat(o).sort((r,s)=>r.line-s.line)}function zo(o){return function(...r){return yd(o.apply(this,r))}}go.source=zo(ns(Cu)),go.sprite=zo(ns(gd)),go.glyphs=zo(ns(yp)),go.light=zo(ns(fd)),go.sky=zo(ns(pd)),go.terrain=zo(ns(md)),go.layer=zo(ns(dd)),go.filter=zo(ns(ud)),go.paintProperty=zo(ns(Tc)),go.layoutProperty=zo(ns(hd));const Pa=go,vy=Pa.light,_y=Pa.sky,vp=Pa.paintProperty,_p=Pa.layoutProperty;function vd(o,r){let s=!1;if(r&&r.length)for(const h of r)o.fire(new Ht(new Error(h.message))),s=!0;return s}class _l{constructor(r,s,h){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let P=0;P<this.d*this.d;P++){const F=x[3+P],$=x[3+P+1];m.push(F===$?null:x.subarray(F,$))}const w=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],w),this.bboxes=x.subarray(w),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=r,this.padding=h,this.scale=s/r,this.uid=0;const _=h/s*r;this.min=-_,this.max=r+_}insert(r,s,h,m,_){this._forEachCell(s,h,m,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,s,h,m,_,x){this.cells[_].push(x)}query(r,s,h,m,_){const x=this.min,w=this.max;if(r<=x&&s<=x&&w<=h&&w<=m&&!_)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(r,s,h,m,this._queryCell,P,{},_),P}}_queryCell(r,s,h,m,_,x,w,P){const F=this.cells[_];if(F!==null){const $=this.keys,Y=this.bboxes;for(let ne=0;ne<F.length;ne++){const le=F[ne];if(w[le]===void 0){const me=4*le;(P?P(Y[me+0],Y[me+1],Y[me+2],Y[me+3]):r<=Y[me+2]&&s<=Y[me+3]&&h>=Y[me+0]&&m>=Y[me+1])?(w[le]=!0,x.push($[le])):w[le]=!1}}}}_forEachCell(r,s,h,m,_,x,w,P){const F=this._convertToCellCoord(r),$=this._convertToCellCoord(s),Y=this._convertToCellCoord(h),ne=this._convertToCellCoord(m);for(let le=F;le<=Y;le++)for(let me=$;me<=ne;me++){const we=this.d*me+le;if((!P||P(this._convertFromCellCoord(le),this._convertFromCellCoord(me),this._convertFromCellCoord(le+1),this._convertFromCellCoord(me+1)))&&_.call(this,r,s,h,m,we,x,w,P))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const m=new Int32Array(s+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let _=s;for(let x=0;x<r.length;x++){const w=r[x];m[3+x]=_,m.set(w,_),_+=w.length}return m[3+r.length]=_,m.set(this.keys,_),_+=this.keys.length,m[3+r.length+1]=_,m.set(this.bboxes,_),_+=this.bboxes.length,m.buffer}static serialize(r,s){const h=r.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(r){return new _l(r.buffer)}}const yo={};function Ut(o,r,s={}){if(yo[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),yo[o]={klass:r,omit:s.omit||[],shallow:s.shallow||[]}}Ut("Object",Object),Ut("TransferableGridIndex",_l),Ut("Color",zn),Ut("Error",Error),Ut("AJAXError",it),Ut("ResolvedImage",pi),Ut("StylePropertyFunction",yn),Ut("StyleExpression",Ue,{omit:["_evaluator"]}),Ut("ZoomDependentExpression",Nt),Ut("ZoomConstantExpression",bt),Ut("CompoundExpression",ni,{omit:["_evaluate"]});for(const o in es)es[o]._classRegistryKey||Ut(`Expression_${o}`,es[o]);function Pc(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function _d(o){return o.$name||o.constructor._classRegistryKey}function xp(o){return!function(r){if(r===null||typeof r!="object")return!1;const s=_d(r);return!(!s||s==="Object")}(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||Pc(o)||ee(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function xl(o,r){if(xp(o))return(Pc(o)||ee(o))&&r&&r.push(o),ArrayBuffer.isView(o)&&r&&r.push(o.buffer),o instanceof ImageData&&r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const _=[];for(const x of o)_.push(xl(x,r));return _}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);const s=_d(o);if(!s)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!yo[s])throw new Error(`${s} is not registered.`);const{klass:h}=yo[s],m=h.serialize?h.serialize(o,r):{};if(h.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in o){if(!o.hasOwnProperty(_)||yo[s].omit.indexOf(_)>=0)continue;const x=o[_];m[_]=yo[s].shallow.indexOf(_)>=0?x:xl(x,r)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(m.$name=s),m}function wl(o){if(xp(o))return o;if(Array.isArray(o))return o.map(wl);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);const r=_d(o)||"Object";if(!yo[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:s}=yo[r];if(!s)throw new Error(`can't deserialize unregistered class ${r}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const _=o[m];h[m]=yo[r].shallow.indexOf(m)>=0?_:wl(_)}return h}class xd{constructor(){this.first=!0}update(r,s){const h=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=h,!0))}}const Pn={"Latin-1 Supplement":o=>o>=128&&o<=255,"Hangul Jamo":o=>o>=4352&&o<=4607,Khmer:o=>o>=6016&&o<=6143,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Katakana:o=>o>=12448&&o<=12543,Kanbun:o=>o>=12688&&o<=12703,"CJK Strokes":o=>o>=12736&&o<=12783,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"Private Use Area":o=>o>=57344&&o<=63743,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function wd(o){for(const r of o)if(Sd(r.charCodeAt(0)))return!0;return!1}function xy(o){for(const r of o)if(!bl(r.charCodeAt(0)))return!1;return!0}function bd(o){const r=o.map(s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}}).filter(s=>s);return new RegExp(r.join("|"),"u")}const wy=bd(["Arab","Dupl","Mong","Ougr","Syrc"]);function bl(o){return!wy.test(String.fromCodePoint(o))}const wp=bd(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Sd(o){return!(o!==746&&o!==747&&(o<4352||!(Pn["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Pn["CJK Compatibility"](o)||Pn["CJK Strokes"](o)||!(!Pn["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Pn["Enclosed CJK Letters and Months"](o)||Pn["Ideographic Description Characters"](o)||Pn.Kanbun(o)||Pn.Katakana(o)&&o!==12540||!(!Pn["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Pn["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Pn["Vertical Forms"](o)||Pn["Yijing Hexagram Symbols"](o)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(o))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(o))||wp.test(String.fromCodePoint(o)))))}function bp(o){return!(Sd(o)||function(r){return!!(Pn["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Pn["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Pn["Letterlike Symbols"](r)||Pn["Number Forms"](r)||Pn["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Pn["Control Pictures"](r)&&r!==9251||Pn["Optical Character Recognition"](r)||Pn["Enclosed Alphanumerics"](r)||Pn["Geometric Shapes"](r)||Pn["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Pn["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Pn["CJK Symbols and Punctuation"](r)||Pn.Katakana(r)||Pn["Private Use Area"](r)||Pn["CJK Compatibility Forms"](r)||Pn["Small Form Variants"](r)||Pn["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}const by=bd(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ed(o){return by.test(String.fromCodePoint(o))}function Sy(o,r){return!(!r&&Ed(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Pn.Khmer(o))}function Ey(o){for(const r of o)if(Ed(r.charCodeAt(0)))return!0;return!1}const qi=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class er{constructor(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new xd,this.transition={})}isSupportedScript(r){return function(s,h){for(const m of s)if(!Sy(m.charCodeAt(0),h))return!1;return!0}(r,qi.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,s=r-Math.floor(r),h=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class Sl{constructor(r,s){this.property=r,this.value=s,this.expression=function(h,m){if(ml(h))return new yn(h,m);if(ut(h)){const _=nn(h,m);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=h;return m.type==="color"&&typeof h=="string"?_=zn.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(_=Ii.parse(h)):_=fi.parse(h),{kind:"constant",evaluate:()=>_}}}(s===void 0?r.specification.default:s,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,s,h){return this.property.possiblyEvaluate(this,r,s,h)}}class Ac{constructor(r){this.property=r,this.value=new Sl(r,void 0)}transitioned(r,s){return new Sp(this.property,this.value,s,T({},r.transition,this.transition),r.now)}untransitioned(){return new Sp(this.property,this.value,null,{},0)}}class Mc{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return W(this._values[r].value.value)}setValue(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Ac(this._values[r].property)),this._values[r].value=new Sl(this._values[r].property,s===null?void 0:W(s))}getTransition(r){return W(this._values[r].transition)}setTransition(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Ac(this._values[r].property)),this._values[r].transition=W(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(r[s]=h);const m=this.getTransition(s);m!==void 0&&(r[`${s}-transition`]=m)}return r}transitioned(r,s){const h=new Pu(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(r,s._values[m]);return h}untransitioned(){const r=new Pu(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class Sp{constructor(r,s,h,m,_){this.property=r,this.value=s,this.begin=_+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(r,s,h){const m=r.now||0,_=this.value.possiblyEvaluate(r,s,h),x=this.prior;if(x){if(m>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(m<this.begin)return x.possiblyEvaluate(r,s,h);{const w=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,s,h),_,function(P){if(P<=0)return 0;if(P>=1)return 1;const F=P*P,$=F*P;return 4*(P<.5?$:3*(P-F)+$-.75)}(w))}}return _}}class Pu{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,h){const m=new Mu(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(r,s,h);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Au{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return W(this._values[r].value)}setValue(r,s){this._values[r]=new Sl(this._values[r].property,s===null?void 0:W(s))}serialize(){const r={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(r[s]=h)}return r}possiblyEvaluate(r,s,h){const m=new Mu(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(r,s,h);return m}}class rs{constructor(r,s,h){this.property=r,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,h,m){return this.property.evaluate(this.value,this.parameters,r,s,h,m)}}class Mu{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Zt{constructor(r){this.specification=r}possiblyEvaluate(r,s){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(s)}interpolate(r,s,h){const m=ei[this.specification.type];return m?m(r,s,h):r}}class sn{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,h,m){return new rs(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},h,m)}:r.expression,s)}interpolate(r,s,h){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new rs(this,{kind:"constant",value:void 0},r.parameters);const m=ei[this.specification.type];if(m){const _=m(r.value.value,s.value.value,h);return new rs(this,{kind:"constant",value:_},r.parameters)}return r}evaluate(r,s,h,m,_,x){return r.kind==="constant"?r.value:r.evaluate(s,h,m,_,x)}}class kc extends sn{possiblyEvaluate(r,s,h,m){if(r.value===void 0)return new rs(this,{kind:"constant",value:void 0},s);if(r.expression.kind==="constant"){const _=r.expression.evaluate(s,null,{},h,m),x=r.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,w=this._calculate(x,x,x,s);return new rs(this,{kind:"constant",value:w},s)}if(r.expression.kind==="camera"){const _=this._calculate(r.expression.evaluate({zoom:s.zoom-1}),r.expression.evaluate({zoom:s.zoom}),r.expression.evaluate({zoom:s.zoom+1}),s);return new rs(this,{kind:"constant",value:_},s)}return new rs(this,r.expression,s)}evaluate(r,s,h,m,_,x){if(r.kind==="source"){const w=r.evaluate(s,h,m,_,x);return this._calculate(w,w,w,s)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(s.zoom)-1},h,m),r.evaluate({zoom:Math.floor(s.zoom)},h,m),r.evaluate({zoom:Math.floor(s.zoom)+1},h,m),s):r.value}_calculate(r,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:h,to:s}}interpolate(r){return r}}class zc{constructor(r){this.specification=r}possiblyEvaluate(r,s,h,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const _=r.expression.evaluate(s,null,{},h,m);return this._calculate(_,_,_,s)}return this._calculate(r.expression.evaluate(new er(Math.floor(s.zoom-1),s)),r.expression.evaluate(new er(Math.floor(s.zoom),s)),r.expression.evaluate(new er(Math.floor(s.zoom+1),s)),s)}}_calculate(r,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:h,to:s}}interpolate(r){return r}}class Td{constructor(r){this.specification=r}possiblyEvaluate(r,s,h,m){return!!r.expression.evaluate(s,null,{},h,m)}interpolate(){return!1}}class v{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in r){const h=r[s];h.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new Sl(h,void 0),_=this.defaultTransitionablePropertyValues[s]=new Ac(h);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate({})}}}Ut("DataDrivenProperty",sn),Ut("DataConstantProperty",Zt),Ut("CrossFadedDataDrivenProperty",kc),Ut("CrossFadedProperty",zc),Ut("ColorRampProperty",Td);const n="-transition";class a extends an{constructor(r,s){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),s.layout&&(this._unevaluatedLayout=new Au(s.layout)),s.paint)){this._transitionablePaint=new Mc(s.paint);for(const h in r.paint)this.setPaintProperty(h,r.paint[h],{validate:!1});for(const h in r.layout)this.setLayoutProperty(h,r.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Mu(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,s,h={}){s!=null&&this._validate(_p,`layers.${this.id}.layout.${r}`,r,s,h)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,s):this.visibility=s)}getPaintProperty(r){return r.endsWith(n)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s,h={}){if(s!=null&&this._validate(vp,`layers.${this.id}.paint.${r}`,r,s,h))return!1;if(r.endsWith(n))return this._transitionablePaint.setTransition(r.slice(0,-11),s||void 0),!1;{const m=this._transitionablePaint._values[r],_=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),w=m.value;this._transitionablePaint.setValue(r,s),this._handleSpecialPaintPropertyUpdate(r);const P=this._transitionablePaint._values[r].value;return P.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(r,w,P)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,s,h){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,s){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),te(r,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(r,s,h,m,_={}){return(!_||_.validate!==!1)&&vd(this,r.call(Pa,{key:s,layerType:this.type,objectKey:h,value:m,styleSpec:et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof rs&&Ss(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const d={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class f{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function S(o,r=1){let s=0,h=0;return{members:o.map(m=>{const _=d[m.type].BYTES_PER_ELEMENT,x=s=A(s,Math.max(r,_)),w=m.components||1;return h=Math.max(h,_),s+=_*w,{name:m.name,type:m.type,components:w,offset:x}}),size:A(s,Math.max(h,r)),alignment:r}}function A(o,r){return Math.ceil(o/r)*r}class z extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.int16[m+0]=s,this.int16[m+1]=h,r}}z.prototype.bytesPerElement=4,Ut("StructArrayLayout2i4",z);class V extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const _=3*r;return this.int16[_+0]=s,this.int16[_+1]=h,this.int16[_+2]=m,r}}V.prototype.bytesPerElement=6,Ut("StructArrayLayout3i6",V);class J extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m){const _=this.length;return this.resize(_+1),this.emplace(_,r,s,h,m)}emplace(r,s,h,m,_){const x=4*r;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=m,this.int16[x+3]=_,r}}J.prototype.bytesPerElement=8,Ut("StructArrayLayout4i8",J);class Q extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,r,s,h,m,_,x)}emplace(r,s,h,m,_,x,w){const P=6*r;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=m,this.int16[P+3]=_,this.int16[P+4]=x,this.int16[P+5]=w,r}}Q.prototype.bytesPerElement=12,Ut("StructArrayLayout2i4i12",Q);class de extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,r,s,h,m,_,x)}emplace(r,s,h,m,_,x,w){const P=4*r,F=8*r;return this.int16[P+0]=s,this.int16[P+1]=h,this.uint8[F+4]=m,this.uint8[F+5]=_,this.uint8[F+6]=x,this.uint8[F+7]=w,r}}de.prototype.bytesPerElement=8,Ut("StructArrayLayout2i4ub8",de);class be extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.float32[m+0]=s,this.float32[m+1]=h,r}}be.prototype.bytesPerElement=8,Ut("StructArrayLayout2f8",be);class Pe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,_,x,w,P,F,$){const Y=this.length;return this.resize(Y+1),this.emplace(Y,r,s,h,m,_,x,w,P,F,$)}emplace(r,s,h,m,_,x,w,P,F,$,Y){const ne=10*r;return this.uint16[ne+0]=s,this.uint16[ne+1]=h,this.uint16[ne+2]=m,this.uint16[ne+3]=_,this.uint16[ne+4]=x,this.uint16[ne+5]=w,this.uint16[ne+6]=P,this.uint16[ne+7]=F,this.uint16[ne+8]=$,this.uint16[ne+9]=Y,r}}Pe.prototype.bytesPerElement=20,Ut("StructArrayLayout10ui20",Pe);class Re extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,_,x,w,P,F,$,Y,ne){const le=this.length;return this.resize(le+1),this.emplace(le,r,s,h,m,_,x,w,P,F,$,Y,ne)}emplace(r,s,h,m,_,x,w,P,F,$,Y,ne,le){const me=12*r;return this.int16[me+0]=s,this.int16[me+1]=h,this.int16[me+2]=m,this.int16[me+3]=_,this.uint16[me+4]=x,this.uint16[me+5]=w,this.uint16[me+6]=P,this.uint16[me+7]=F,this.int16[me+8]=$,this.int16[me+9]=Y,this.int16[me+10]=ne,this.int16[me+11]=le,r}}Re.prototype.bytesPerElement=24,Ut("StructArrayLayout4i4ui4i24",Re);class Be extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const _=3*r;return this.float32[_+0]=s,this.float32[_+1]=h,this.float32[_+2]=m,r}}Be.prototype.bytesPerElement=12,Ut("StructArrayLayout3f12",Be);class $e extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}$e.prototype.bytesPerElement=4,Ut("StructArrayLayout1ul4",$e);class We extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,_,x,w,P,F){const $=this.length;return this.resize($+1),this.emplace($,r,s,h,m,_,x,w,P,F)}emplace(r,s,h,m,_,x,w,P,F,$){const Y=10*r,ne=5*r;return this.int16[Y+0]=s,this.int16[Y+1]=h,this.int16[Y+2]=m,this.int16[Y+3]=_,this.int16[Y+4]=x,this.int16[Y+5]=w,this.uint32[ne+3]=P,this.uint16[Y+8]=F,this.uint16[Y+9]=$,r}}We.prototype.bytesPerElement=20,Ut("StructArrayLayout6i1ul2ui20",We);class Fe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,r,s,h,m,_,x)}emplace(r,s,h,m,_,x,w){const P=6*r;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=m,this.int16[P+3]=_,this.int16[P+4]=x,this.int16[P+5]=w,r}}Fe.prototype.bytesPerElement=12,Ut("StructArrayLayout2i2i2i12",Fe);class Ye extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,_){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,h,m,_)}emplace(r,s,h,m,_,x){const w=4*r,P=8*r;return this.float32[w+0]=s,this.float32[w+1]=h,this.float32[w+2]=m,this.int16[P+6]=_,this.int16[P+7]=x,r}}Ye.prototype.bytesPerElement=16,Ut("StructArrayLayout2f1f2i16",Ye);class Je extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,r,s,h,m,_,x)}emplace(r,s,h,m,_,x,w){const P=16*r,F=4*r,$=8*r;return this.uint8[P+0]=s,this.uint8[P+1]=h,this.float32[F+1]=m,this.float32[F+2]=_,this.int16[$+6]=x,this.int16[$+7]=w,r}}Je.prototype.bytesPerElement=16,Ut("StructArrayLayout2ub2f2i16",Je);class ot extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const _=3*r;return this.uint16[_+0]=s,this.uint16[_+1]=h,this.uint16[_+2]=m,r}}ot.prototype.bytesPerElement=6,Ut("StructArrayLayout3ui6",ot);class yt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m,_,x,w,P,F,$,Y,ne,le,me,we,Oe,De){const nt=this.length;return this.resize(nt+1),this.emplace(nt,r,s,h,m,_,x,w,P,F,$,Y,ne,le,me,we,Oe,De)}emplace(r,s,h,m,_,x,w,P,F,$,Y,ne,le,me,we,Oe,De,nt){const qe=24*r,Qe=12*r,lt=48*r;return this.int16[qe+0]=s,this.int16[qe+1]=h,this.uint16[qe+2]=m,this.uint16[qe+3]=_,this.uint32[Qe+2]=x,this.uint32[Qe+3]=w,this.uint32[Qe+4]=P,this.uint16[qe+10]=F,this.uint16[qe+11]=$,this.uint16[qe+12]=Y,this.float32[Qe+7]=ne,this.float32[Qe+8]=le,this.uint8[lt+36]=me,this.uint8[lt+37]=we,this.uint8[lt+38]=Oe,this.uint32[Qe+10]=De,this.int16[qe+22]=nt,r}}yt.prototype.bytesPerElement=48,Ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",yt);class wt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m,_,x,w,P,F,$,Y,ne,le,me,we,Oe,De,nt,qe,Qe,lt,_t,Lt,rn,Rt,kt,Kt,$t){const Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,r,s,h,m,_,x,w,P,F,$,Y,ne,le,me,we,Oe,De,nt,qe,Qe,lt,_t,Lt,rn,Rt,kt,Kt,$t)}emplace(r,s,h,m,_,x,w,P,F,$,Y,ne,le,me,we,Oe,De,nt,qe,Qe,lt,_t,Lt,rn,Rt,kt,Kt,$t,Bt){const ft=32*r,Yt=16*r;return this.int16[ft+0]=s,this.int16[ft+1]=h,this.int16[ft+2]=m,this.int16[ft+3]=_,this.int16[ft+4]=x,this.int16[ft+5]=w,this.int16[ft+6]=P,this.int16[ft+7]=F,this.uint16[ft+8]=$,this.uint16[ft+9]=Y,this.uint16[ft+10]=ne,this.uint16[ft+11]=le,this.uint16[ft+12]=me,this.uint16[ft+13]=we,this.uint16[ft+14]=Oe,this.uint16[ft+15]=De,this.uint16[ft+16]=nt,this.uint16[ft+17]=qe,this.uint16[ft+18]=Qe,this.uint16[ft+19]=lt,this.uint16[ft+20]=_t,this.uint16[ft+21]=Lt,this.uint16[ft+22]=rn,this.uint32[Yt+12]=Rt,this.float32[Yt+13]=kt,this.float32[Yt+14]=Kt,this.uint16[ft+30]=$t,this.uint16[ft+31]=Bt,r}}wt.prototype.bytesPerElement=64,Ut("StructArrayLayout8i15ui1ul2f2ui64",wt);class Ft extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}Ft.prototype.bytesPerElement=4,Ut("StructArrayLayout1f4",Ft);class Dt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const _=3*r;return this.uint16[6*r+0]=s,this.float32[_+1]=h,this.float32[_+2]=m,r}}Dt.prototype.bytesPerElement=12,Ut("StructArrayLayout1ui2f12",Dt);class Ct extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const _=4*r;return this.uint32[2*r+0]=s,this.uint16[_+2]=h,this.uint16[_+3]=m,r}}Ct.prototype.bytesPerElement=8,Ut("StructArrayLayout1ul2ui8",Ct);class It extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.uint16[m+0]=s,this.uint16[m+1]=h,r}}It.prototype.bytesPerElement=4,Ut("StructArrayLayout2ui4",It);class Wt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}Wt.prototype.bytesPerElement=2,Ut("StructArrayLayout1ui2",Wt);class fn extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m){const _=this.length;return this.resize(_+1),this.emplace(_,r,s,h,m)}emplace(r,s,h,m,_){const x=4*r;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=m,this.float32[x+3]=_,r}}fn.prototype.bytesPerElement=16,Ut("StructArrayLayout4f16",fn);class At extends f{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}At.prototype.size=20;class jt extends We{get(r){return new At(this,r)}}Ut("CollisionBoxArray",jt);class cn extends f{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}cn.prototype.size=48;class tr extends yt{get(r){return new cn(this,r)}}Ut("PlacedSymbolArray",tr);class xn extends f{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}xn.prototype.size=64;class In extends wt{get(r){return new xn(this,r)}}Ut("SymbolInstanceArray",In);class nr extends Ft{getoffsetX(r){return this.float32[1*r+0]}}Ut("GlyphOffsetArray",nr);class ri extends V{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}Ut("SymbolLineVertexArray",ri);class Fo extends f{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Fo.prototype.size=12;class rr extends Dt{get(r){return new Fo(this,r)}}Ut("TextAnchorOffsetArray",rr);class Pi extends f{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Pi.prototype.size=8;class yi extends Ct{get(r){return new Pi(this,r)}}Ut("FeatureIndexArray",yi);class ii extends z{}class vi extends z{}class is extends z{}class El extends Q{}class Fc extends de{}class Tl extends be{}class vo extends Pe{}class Oc extends Re{}class Id extends Be{}class _o extends $e{}class xo extends Fe{}class Js extends Je{}class Oo extends ot{}class qr extends It{}const oi=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ki}=oi;class An{constructor(r=[]){this.segments=r}prepareSegment(r,s,h,m){let _=this.segments[this.segments.length-1];return r>An.MAX_VERTEX_ARRAY_LENGTH&&_e(`Max vertices per segment is ${An.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!_||_.vertexLength+r>An.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==m)&&(_={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(_.sortKey=m),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,h,m){return new An([{vertexOffset:r,primitiveOffset:s,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function Aa(o,r){return 256*(o=q(Math.floor(o),0,255))+q(Math.floor(r),0,255)}An.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ut("SegmentVector",An);const Il=S([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Cl={exports:{}},Ep={exports:{}};Ep.exports=function(o,r){var s,h,m,_,x,w,P,F;for(h=o.length-(s=3&o.length),m=r,x=3432918353,w=461845907,F=0;F<h;)P=255&o.charCodeAt(F)|(255&o.charCodeAt(++F))<<8|(255&o.charCodeAt(++F))<<16|(255&o.charCodeAt(++F))<<24,++F,m=27492+(65535&(_=5*(65535&(m=(m^=P=(65535&(P=(P=(65535&P)*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*w+(((P>>>16)*w&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(P=0,s){case 3:P^=(255&o.charCodeAt(F+2))<<16;case 2:P^=(255&o.charCodeAt(F+1))<<8;case 1:m^=P=(65535&(P=(P=(65535&(P^=255&o.charCodeAt(F)))*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*w+(((P>>>16)*w&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Ty=Ep.exports,Tp={exports:{}};Tp.exports=function(o,r){for(var s,h=o.length,m=r^h,_=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(_)|(255&o.charCodeAt(++_))<<8|(255&o.charCodeAt(++_))<<16|(255&o.charCodeAt(++_))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++_;switch(h){case 3:m^=(255&o.charCodeAt(_+2))<<16;case 2:m^=(255&o.charCodeAt(_+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(_)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Qs=Ty,Ip=Tp.exports;Cl.exports=Qs,Cl.exports.murmur3=Qs,Cl.exports.murmur2=Ip;var Rc=E(Cl.exports);class ku{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,s,h,m){this.ids.push(jc(r)),this.positions.push(s,h,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=jc(r);let h=0,m=this.ids.length-1;for(;h<m;){const x=h+m>>1;this.ids[x]>=s?m=x:h=x+1}const _=[];for(;this.ids[h]===s;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(r,s){const h=new Float64Array(r.ids),m=new Uint32Array(r.positions);return Lc(h,m,0,h.length-1),s&&s.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(r){const s=new ku;return s.ids=r.ids,s.positions=r.positions,s.indexed=!0,s}}function jc(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:Rc(String(o))}function Lc(o,r,s,h){for(;s<h;){const m=o[s+h>>1];let _=s-1,x=h+1;for(;;){do _++;while(o[_]<m);do x--;while(o[x]>m);if(_>=x)break;Pl(o,_,x),Pl(r,3*_,3*x),Pl(r,3*_+1,3*x+1),Pl(r,3*_+2,3*x+2)}x-s<h-x?(Lc(o,r,s,x),s=x+1):(Lc(o,r,x+1,h),h=x)}}function Pl(o,r,s){const h=o[r];o[r]=o[s],o[s]=h}Ut("FeaturePositionMap",ku);class zu{constructor(r,s){this.gl=r.gl,this.location=s}}class Cp extends zu{constructor(r,s){super(r,s),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Gx extends zu{constructor(r,s){super(r,s),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Hx extends zu{constructor(r,s){super(r,s),this.current=zn.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const ZP=new Float32Array(16);function Iy(o){return[Aa(255*o.r,255*o.g),Aa(255*o.b,255*o.a)]}class Cd{constructor(r,s,h){this.value=r,this.uniformNames=s.map(m=>`u_${m}`),this.type=h}setUniform(r,s,h){r.set(h.constantOr(this.value))}getBinding(r,s,h){return this.type==="color"?new Hx(r,s):new Cp(r,s)}}class Dc{constructor(r,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=r.tlbr}setUniform(r,s,h,m){const _=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&r.set(_)}getBinding(r,s,h){return h.substr(0,9)==="u_pattern"?new Gx(r,s):new Cp(r,s)}}class Ma{constructor(r,s,h,m){this.expression=r,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,s,h,m,_){const x=this.paintVertexArray.length,w=this.expression.evaluate(new er(0),s,{},m,[],_);this.paintVertexArray.resize(r),this._setPaintValue(x,r,w)}updatePaintArray(r,s,h,m){const _=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(r,s,_)}_setPaintValue(r,s,h){if(this.type==="color"){const m=Iy(h);for(let _=r;_<s;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=r;m<s;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Is{constructor(r,s,h,m,_,x){this.expression=r,this.uniformNames=s.map(w=>`u_${w}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(w=>({name:`a_${w}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,s,h,m,_){const x=this.expression.evaluate(new er(this.zoom),s,{},m,[],_),w=this.expression.evaluate(new er(this.zoom+1),s,{},m,[],_),P=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(P,r,x,w)}updatePaintArray(r,s,h,m){const _=this.expression.evaluate({zoom:this.zoom},h,m),x=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(r,s,_,x)}_setPaintValue(r,s,h,m){if(this.type==="color"){const _=Iy(h),x=Iy(m);for(let w=r;w<s;w++)this.paintVertexArray.emplace(w,_[0],_[1],x[0],x[1])}else{for(let _=r;_<s;_++)this.paintVertexArray.emplace(_,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,m=q(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,s,h){return new Cp(r,s)}}class Al{constructor(r,s,h,m,_,x){this.expression=r,this.type=s,this.useIntegerZoom=h,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(r,s,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(r,s,h,m,_){this._setPaintValues(r,s,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(r,s,h,m){if(!m||!h)return;const{min:_,mid:x,max:w}=h,P=m[_],F=m[x],$=m[w];if(P&&F&&$)for(let Y=r;Y<s;Y++)this.zoomInPaintVertexArray.emplace(Y,F.tl[0],F.tl[1],F.br[0],F.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],F.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(Y,F.tl[0],F.tl[1],F.br[0],F.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],F.pixelRatio,$.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Il.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Il.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Zx{constructor(r,s,h){this.binders={},this._buffers=[];const m=[];for(const _ in r.paint._values){if(!h(_))continue;const x=r.paint.get(_);if(!(x instanceof rs&&Ss(x.property.specification)))continue;const w=WP(_,r.type),P=x.value,F=x.property.specification.type,$=x.property.useIntegerZoom,Y=x.property.specification["property-type"],ne=Y==="cross-faded"||Y==="cross-faded-data-driven";if(P.kind==="constant")this.binders[_]=ne?new Dc(P.value,w):new Cd(P.value,w,F),m.push(`/u_${_}`);else if(P.kind==="source"||ne){const le=Wx(_,F,"source");this.binders[_]=ne?new Al(P,F,$,s,le,r.id):new Ma(P,w,F,le),m.push(`/a_${_}`)}else{const le=Wx(_,F,"composite");this.binders[_]=new Is(P,w,F,$,s,le),m.push(`/z_${_}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof Ma||s instanceof Is?s.maxValue:0}populatePaintArrays(r,s,h,m,_){for(const x in this.binders){const w=this.binders[x];(w instanceof Ma||w instanceof Is||w instanceof Al)&&w.populatePaintArray(r,s,h,m,_)}}setConstantPatternPositions(r,s){for(const h in this.binders){const m=this.binders[h];m instanceof Dc&&m.setConstantPatternPositions(r,s)}}updatePaintArrays(r,s,h,m,_){let x=!1;for(const w in r){const P=s.getPositions(w);for(const F of P){const $=h.feature(F.index);for(const Y in this.binders){const ne=this.binders[Y];if((ne instanceof Ma||ne instanceof Is||ne instanceof Al)&&ne.expression.isStateDependent===!0){const le=m.paint.get(Y);ne.expression=le.value,ne.updatePaintArray(F.start,F.end,$,r[w],_),x=!0}}}}return x}defines(){const r=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Cd||h instanceof Dc)&&r.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Ma||h instanceof Is)for(let m=0;m<h.paintVertexAttributes.length;m++)r.push(h.paintVertexAttributes[m].name);else if(h instanceof Al)for(let m=0;m<Il.members.length;m++)r.push(Il.members[m].name)}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Cd||h instanceof Dc||h instanceof Is)for(const m of h.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,s){const h=[];for(const m in this.binders){const _=this.binders[m];if(_ instanceof Cd||_ instanceof Dc||_ instanceof Is){for(const x of _.uniformNames)if(s[x]){const w=_.getBinding(r,s[x],x);h.push({name:x,property:m,binding:w})}}}return h}setUniforms(r,s,h,m){for(const{name:_,property:x,binding:w}of s)this.binders[x].setUniform(w,m,h.get(x),_)}updatePaintBuffers(r){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(r&&h instanceof Al){const m=r.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof Ma||h instanceof Is)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(r){for(const s in this.binders){const h=this.binders[s];(h instanceof Ma||h instanceof Is||h instanceof Al)&&h.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof Ma||s instanceof Is||s instanceof Al)&&s.destroy()}}}class Fu{constructor(r,s,h=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new Zx(m,s,h);this.needsUpload=!1,this._featureMap=new ku,this._bufferOffset=0}populatePaintArrays(r,s,h,m,_,x){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(r,s,m,_,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,h,m){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(r,this._featureMap,s,_,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function WP(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function Wx(o,r,s){const h={color:{source:be,composite:fn},number:{source:Ft,composite:be}},m=function(_){return{"line-pattern":{source:vo,composite:vo},"fill-pattern":{source:vo,composite:vo},"fill-extrusion-pattern":{source:vo,composite:vo}}[_]}(o);return m&&m[s]||h[r][s]}Ut("ConstantBinder",Cd),Ut("CrossFadedConstantBinder",Dc),Ut("SourceExpressionBinder",Ma),Ut("CrossFadedCompositeBinder",Al),Ut("CompositeExpressionBinder",Is),Ut("ProgramConfiguration",Zx,{omit:["_buffers"]}),Ut("ProgramConfigurationSet",Fu);const zr=8192,Cy=Math.pow(2,14)-1,Xx=-Cy-1;function Ou(o){const r=zr/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const m=s[h];for(let _=0;_<m.length;_++){const x=m[_],w=Math.round(x.x*r),P=Math.round(x.y*r);x.x=q(w,Xx,Cy),x.y=q(P,Xx,Cy),(w<x.x||w>x.x+1||P<x.y||P>x.y+1)&&_e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Ru(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Ou(o):[]}}function Pp(o,r,s,h,m){o.emplaceBack(2*r+(h+1)/2,2*s+(m+1)/2)}class Py{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new vi,this.indexArray=new Oo,this.segments=new An,this.programConfigurations=new Fu(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){const m=this.layers[0],_=[];let x=null,w=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),w=!x.isConstant());for(const{feature:P,id:F,index:$,sourceLayerIndex:Y}of r){const ne=this.layers[0]._featureFilter.needGeometry,le=Ru(P,ne);if(!this.layers[0]._featureFilter.filter(new er(this.zoom),le,h))continue;const me=w?x.evaluate(le,{},h):void 0,we={id:F,properties:P.properties,type:P.type,sourceLayerIndex:Y,index:$,geometry:ne?le.geometry:Ou(P),patterns:{},sortKey:me};_.push(we)}w&&_.sort((P,F)=>P.sortKey-F.sortKey);for(const P of _){const{geometry:F,index:$,sourceLayerIndex:Y}=P,ne=r[$].feature;this.addFeature(P,F,$,h),s.featureIndex.insert(ne,F,$,Y,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Ki),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,h,m){for(const _ of s)for(const x of _){const w=x.x,P=x.y;if(w<0||w>=zr||P<0||P>=zr)continue;const F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),$=F.vertexLength;Pp(this.layoutVertexArray,w,P,-1,-1),Pp(this.layoutVertexArray,w,P,1,-1),Pp(this.layoutVertexArray,w,P,1,1),Pp(this.layoutVertexArray,w,P,-1,1),this.indexArray.emplaceBack($,$+1,$+2),this.indexArray.emplaceBack($,$+3,$+2),F.vertexLength+=4,F.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{},m)}}function qx(o,r){for(let s=0;s<o.length;s++)if(Bc(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(Bc(o,r[s]))return!0;return!!Ay(o,r)}function XP(o,r,s){return!!Bc(o,r)||!!My(r,o,s)}function Kx(o,r){if(o.length===1)return Jx(r,o[0]);for(let s=0;s<r.length;s++){const h=r[s];for(let m=0;m<h.length;m++)if(Bc(o,h[m]))return!0}for(let s=0;s<o.length;s++)if(Jx(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(Ay(o,r[s]))return!0;return!1}function qP(o,r,s){if(o.length>1){if(Ay(o,r))return!0;for(let h=0;h<r.length;h++)if(My(r[h],o,s))return!0}for(let h=0;h<o.length;h++)if(My(o[h],r,s))return!0;return!1}function Ay(o,r){if(o.length===0||r.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],m=o[s+1];for(let _=0;_<r.length-1;_++)if(KP(h,m,r[_],r[_+1]))return!0}return!1}function KP(o,r,s,h){return pe(o,s,h)!==pe(r,s,h)&&pe(o,r,s)!==pe(o,r,h)}function My(o,r,s){const h=s*s;if(r.length===1)return o.distSqr(r[0])<h;for(let m=1;m<r.length;m++)if(Yx(o,r[m-1],r[m])<h)return!0;return!1}function Yx(o,r,s){const h=r.distSqr(s);if(h===0)return o.distSqr(r);const m=((o.x-r.x)*(s.x-r.x)+(o.y-r.y)*(s.y-r.y))/h;return o.distSqr(m<0?r:m>1?s:s.sub(r)._mult(m)._add(r))}function Jx(o,r){let s,h,m,_=!1;for(let x=0;x<o.length;x++){s=o[x];for(let w=0,P=s.length-1;w<s.length;P=w++)h=s[w],m=s[P],h.y>r.y!=m.y>r.y&&r.x<(m.x-h.x)*(r.y-h.y)/(m.y-h.y)+h.x&&(_=!_)}return _}function Bc(o,r){let s=!1;for(let h=0,m=o.length-1;h<o.length;m=h++){const _=o[h],x=o[m];_.y>r.y!=x.y>r.y&&r.x<(x.x-_.x)*(r.y-_.y)/(x.y-_.y)+_.x&&(s=!s)}return s}function YP(o,r,s){const h=s[0],m=s[2];if(o.x<h.x&&r.x<h.x||o.x>m.x&&r.x>m.x||o.y<h.y&&r.y<h.y||o.y>m.y&&r.y>m.y)return!1;const _=pe(o,r,s[0]);return _!==pe(o,r,s[1])||_!==pe(o,r,s[2])||_!==pe(o,r,s[3])}function Pd(o,r,s){const h=r.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(r.id).getMaxValue(o)}function Ap(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Mp(o,r,s,h,m){if(!r[0]&&!r[1])return o;const _=b.convert(r)._mult(m);s==="viewport"&&_._rotate(-h);const x=[];for(let w=0;w<o.length;w++)x.push(o[w].sub(_));return x}let Qx,ew;Ut("CircleBucket",Py,{omit:["layers"]});var JP={get paint(){return ew=ew||new v({"circle-radius":new sn(et.paint_circle["circle-radius"]),"circle-color":new sn(et.paint_circle["circle-color"]),"circle-blur":new sn(et.paint_circle["circle-blur"]),"circle-opacity":new sn(et.paint_circle["circle-opacity"]),"circle-translate":new Zt(et.paint_circle["circle-translate"]),"circle-translate-anchor":new Zt(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zt(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zt(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sn(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sn(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sn(et.paint_circle["circle-stroke-opacity"])})},get layout(){return Qx=Qx||new v({"circle-sort-key":new sn(et.layout_circle["circle-sort-key"])})}},Ai=1e-6,Nc=typeof Float32Array<"u"?Float32Array:Array;function ky(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function tw(o,r,s){var h=r[0],m=r[1],_=r[2],x=r[3],w=r[4],P=r[5],F=r[6],$=r[7],Y=r[8],ne=r[9],le=r[10],me=r[11],we=r[12],Oe=r[13],De=r[14],nt=r[15],qe=s[0],Qe=s[1],lt=s[2],_t=s[3];return o[0]=qe*h+Qe*w+lt*Y+_t*we,o[1]=qe*m+Qe*P+lt*ne+_t*Oe,o[2]=qe*_+Qe*F+lt*le+_t*De,o[3]=qe*x+Qe*$+lt*me+_t*nt,o[4]=(qe=s[4])*h+(Qe=s[5])*w+(lt=s[6])*Y+(_t=s[7])*we,o[5]=qe*m+Qe*P+lt*ne+_t*Oe,o[6]=qe*_+Qe*F+lt*le+_t*De,o[7]=qe*x+Qe*$+lt*me+_t*nt,o[8]=(qe=s[8])*h+(Qe=s[9])*w+(lt=s[10])*Y+(_t=s[11])*we,o[9]=qe*m+Qe*P+lt*ne+_t*Oe,o[10]=qe*_+Qe*F+lt*le+_t*De,o[11]=qe*x+Qe*$+lt*me+_t*nt,o[12]=(qe=s[12])*h+(Qe=s[13])*w+(lt=s[14])*Y+(_t=s[15])*we,o[13]=qe*m+Qe*P+lt*ne+_t*Oe,o[14]=qe*_+Qe*F+lt*le+_t*De,o[15]=qe*x+Qe*$+lt*me+_t*nt,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var Ad,QP=tw;function kp(o,r,s){var h=r[0],m=r[1],_=r[2],x=r[3];return o[0]=s[0]*h+s[4]*m+s[8]*_+s[12]*x,o[1]=s[1]*h+s[5]*m+s[9]*_+s[13]*x,o[2]=s[2]*h+s[6]*m+s[10]*_+s[14]*x,o[3]=s[3]*h+s[7]*m+s[11]*_+s[15]*x,o}Ad=new Nc(4),Nc!=Float32Array&&(Ad[0]=0,Ad[1]=0,Ad[2]=0,Ad[3]=0);class eA extends a{constructor(r){super(r,JP)}createBucket(r){return new Py(r)}queryRadius(r){const s=r;return Pd("circle-radius",this,s)+Pd("circle-stroke-width",this,s)+Ap(this.paint.get("circle-translate"))}queryIntersectsFeature(r,s,h,m,_,x,w,P){const F=Mp(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),$=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),Y=this.paint.get("circle-pitch-alignment")==="map",ne=Y?F:function(me,we){return me.map(Oe=>nw(Oe,we))}(F,P),le=Y?$*w:$;for(const me of m)for(const we of me){const Oe=Y?we:nw(we,P);let De=le;const nt=kp([],[we.x,we.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?De*=nt[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(De*=x.cameraToCenterDistance/nt[3]),XP(ne,Oe,De))return!0}return!1}}function nw(o,r){const s=kp([],[o.x,o.y,0,1],r);return new b(s[0]/s[3],s[1]/s[3])}class rw extends Py{}let iw;Ut("HeatmapBucket",rw,{omit:["layers"]});var tA={get paint(){return iw=iw||new v({"heatmap-radius":new sn(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sn(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zt(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Td(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zt(et.paint_heatmap["heatmap-opacity"])})}};function zy(o,{width:r,height:s},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*s*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*s*h}`)}else m=new Uint8Array(r*s*h);return o.width=r,o.height=s,o.data=m,o}function ow(o,{width:r,height:s},h){if(r===o.width&&s===o.height)return;const m=zy({},{width:r,height:s},h);Fy(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,s)},h),o.width=r,o.height=s,o.data=m.data}function Fy(o,r,s,h,m,_){if(m.width===0||m.height===0)return r;if(m.width>o.width||m.height>o.height||s.x>o.width-m.width||s.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||h.x>r.width-m.width||h.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,w=r.data;if(x===w)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<m.height;P++){const F=((s.y+P)*o.width+s.x)*_,$=((h.y+P)*r.width+h.x)*_;for(let Y=0;Y<m.width*_;Y++)w[$+Y]=x[F+Y]}return r}class Md{constructor(r,s){zy(this,r,1,s)}resize(r){ow(this,r,1)}clone(){return new Md({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,h,m,_){Fy(r,s,h,m,_,1)}}class Ro{constructor(r,s){zy(this,r,4,s)}resize(r){ow(this,r,4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Ro({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,h,m,_){Fy(r,s,h,m,_,4)}}function sw(o){const r={},s=o.resolution||256,h=o.clips?o.clips.length:1,m=o.image||new Ro({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const _=(x,w,P)=>{r[o.evaluationKey]=P;const F=o.expression.evaluate(r);m.data[x+w+0]=Math.floor(255*F.r/F.a),m.data[x+w+1]=Math.floor(255*F.g/F.a),m.data[x+w+2]=Math.floor(255*F.b/F.a),m.data[x+w+3]=Math.floor(255*F.a)};if(o.clips)for(let x=0,w=0;x<h;++x,w+=4*s)for(let P=0,F=0;P<s;P++,F+=4){const $=P/(s-1),{start:Y,end:ne}=o.clips[x];_(w,F,Y*(1-$)+ne*$)}else for(let x=0,w=0;x<s;x++,w+=4)_(0,w,x/(s-1));return m}Ut("AlphaImage",Md),Ut("RGBAImage",Ro);const Oy="big-fb";class nA extends a{createBucket(r){return new rw(r)}constructor(r){super(r,tA),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=sw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Oy)&&this.heatmapFbos.delete(Oy)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let aw;var rA={get paint(){return aw=aw||new v({"hillshade-illumination-direction":new Zt(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Zt(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zt(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zt(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zt(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zt(et.paint_hillshade["hillshade-accent-color"])})}};class iA extends a{constructor(r){super(r,rA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const oA=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:sA}=oA;function lw(o,r,s=2){const h=r&&r.length,m=h?r[0]*s:o.length;let _=uw(o,0,m,s,!0);const x=[];if(!_||_.next===_.prev)return x;let w,P,F;if(h&&(_=function($,Y,ne,le){const me=[];for(let we=0,Oe=Y.length;we<Oe;we++){const De=uw($,Y[we]*le,we<Oe-1?Y[we+1]*le:$.length,le,!1);De===De.next&&(De.steiner=!0),me.push(pA(De))}me.sort(hA);for(let we=0;we<me.length;we++)ne=dA(me[we],ne);return ne}(o,r,_,s)),o.length>80*s){w=1/0,P=1/0;let $=-1/0,Y=-1/0;for(let ne=s;ne<m;ne+=s){const le=o[ne],me=o[ne+1];le<w&&(w=le),me<P&&(P=me),le>$&&($=le),me>Y&&(Y=me)}F=Math.max($-w,Y-P),F=F!==0?32767/F:0}return kd(_,x,s,w,P,F,0),x}function uw(o,r,s,h,m){let _;if(m===function(x,w,P,F){let $=0;for(let Y=w,ne=P-F;Y<P;Y+=F)$+=(x[ne]-x[Y])*(x[Y+1]+x[ne+1]),ne=Y;return $}(o,r,s,h)>0)for(let x=r;x<s;x+=h)_=dw(x/h|0,o[x],o[x+1],_);else for(let x=s-h;x>=r;x-=h)_=dw(x/h|0,o[x],o[x+1],_);return _&&zp(_,_.next)&&(Fd(_),_=_.next),_}function ju(o,r){if(!o)return o;r||(r=o);let s,h=o;do if(s=!1,h.steiner||!zp(h,h.next)&&Sr(h.prev,h,h.next)!==0)h=h.next;else{if(Fd(h),h=r=h.prev,h===h.next)break;s=!0}while(s||h!==r);return r}function kd(o,r,s,h,m,_,x){if(!o)return;!x&&_&&function(P,F,$,Y){let ne=P;do ne.z===0&&(ne.z=Ry(ne.x,ne.y,F,$,Y)),ne.prevZ=ne.prev,ne.nextZ=ne.next,ne=ne.next;while(ne!==P);ne.prevZ.nextZ=null,ne.prevZ=null,function(le){let me,we=1;do{let Oe,De=le;le=null;let nt=null;for(me=0;De;){me++;let qe=De,Qe=0;for(let _t=0;_t<we&&(Qe++,qe=qe.nextZ,qe);_t++);let lt=we;for(;Qe>0||lt>0&&qe;)Qe!==0&&(lt===0||!qe||De.z<=qe.z)?(Oe=De,De=De.nextZ,Qe--):(Oe=qe,qe=qe.nextZ,lt--),nt?nt.nextZ=Oe:le=Oe,Oe.prevZ=nt,nt=Oe;De=qe}nt.nextZ=null,we*=2}while(me>1)}(ne)}(o,h,m,_);let w=o;for(;o.prev!==o.next;){const P=o.prev,F=o.next;if(_?lA(o,h,m,_):aA(o))r.push(P.i,o.i,F.i),Fd(o),o=F.next,w=F.next;else if((o=F)===w){x?x===1?kd(o=uA(ju(o),r),r,s,h,m,_,2):x===2&&cA(o,r,s,h,m,_):kd(ju(o),r,s,h,m,_,1);break}}}function aA(o){const r=o.prev,s=o,h=o.next;if(Sr(r,s,h)>=0)return!1;const m=r.x,_=s.x,x=h.x,w=r.y,P=s.y,F=h.y,$=m<_?m<x?m:x:_<x?_:x,Y=w<P?w<F?w:F:P<F?P:F,ne=m>_?m>x?m:x:_>x?_:x,le=w>P?w>F?w:F:P>F?P:F;let me=h.next;for(;me!==r;){if(me.x>=$&&me.x<=ne&&me.y>=Y&&me.y<=le&&Uc(m,w,_,P,x,F,me.x,me.y)&&Sr(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function lA(o,r,s,h){const m=o.prev,_=o,x=o.next;if(Sr(m,_,x)>=0)return!1;const w=m.x,P=_.x,F=x.x,$=m.y,Y=_.y,ne=x.y,le=w<P?w<F?w:F:P<F?P:F,me=$<Y?$<ne?$:ne:Y<ne?Y:ne,we=w>P?w>F?w:F:P>F?P:F,Oe=$>Y?$>ne?$:ne:Y>ne?Y:ne,De=Ry(le,me,r,s,h),nt=Ry(we,Oe,r,s,h);let qe=o.prevZ,Qe=o.nextZ;for(;qe&&qe.z>=De&&Qe&&Qe.z<=nt;){if(qe.x>=le&&qe.x<=we&&qe.y>=me&&qe.y<=Oe&&qe!==m&&qe!==x&&Uc(w,$,P,Y,F,ne,qe.x,qe.y)&&Sr(qe.prev,qe,qe.next)>=0||(qe=qe.prevZ,Qe.x>=le&&Qe.x<=we&&Qe.y>=me&&Qe.y<=Oe&&Qe!==m&&Qe!==x&&Uc(w,$,P,Y,F,ne,Qe.x,Qe.y)&&Sr(Qe.prev,Qe,Qe.next)>=0))return!1;Qe=Qe.nextZ}for(;qe&&qe.z>=De;){if(qe.x>=le&&qe.x<=we&&qe.y>=me&&qe.y<=Oe&&qe!==m&&qe!==x&&Uc(w,$,P,Y,F,ne,qe.x,qe.y)&&Sr(qe.prev,qe,qe.next)>=0)return!1;qe=qe.prevZ}for(;Qe&&Qe.z<=nt;){if(Qe.x>=le&&Qe.x<=we&&Qe.y>=me&&Qe.y<=Oe&&Qe!==m&&Qe!==x&&Uc(w,$,P,Y,F,ne,Qe.x,Qe.y)&&Sr(Qe.prev,Qe,Qe.next)>=0)return!1;Qe=Qe.nextZ}return!0}function uA(o,r){let s=o;do{const h=s.prev,m=s.next.next;!zp(h,m)&&cw(h,s,s.next,m)&&zd(h,m)&&zd(m,h)&&(r.push(h.i,s.i,m.i),Fd(s),Fd(s.next),s=o=m),s=s.next}while(s!==o);return ju(s)}function cA(o,r,s,h,m,_){let x=o;do{let w=x.next.next;for(;w!==x.prev;){if(x.i!==w.i&&mA(x,w)){let P=hw(x,w);return x=ju(x,x.next),P=ju(P,P.next),kd(x,r,s,h,m,_,0),void kd(P,r,s,h,m,_,0)}w=w.next}x=x.next}while(x!==o)}function hA(o,r){return o.x-r.x}function dA(o,r){const s=function(m,_){let x=_;const w=m.x,P=m.y;let F,$=-1/0;do{if(P<=x.y&&P>=x.next.y&&x.next.y!==x.y){const we=x.x+(P-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(we<=w&&we>$&&($=we,F=x.x<x.next.x?x:x.next,we===w))return F}x=x.next}while(x!==_);if(!F)return null;const Y=F,ne=F.x,le=F.y;let me=1/0;x=F;do{if(w>=x.x&&x.x>=ne&&w!==x.x&&Uc(P<le?w:$,P,ne,le,P<le?$:w,P,x.x,x.y)){const we=Math.abs(P-x.y)/(w-x.x);zd(x,m)&&(we<me||we===me&&(x.x>F.x||x.x===F.x&&fA(F,x)))&&(F=x,me=we)}x=x.next}while(x!==Y);return F}(o,r);if(!s)return r;const h=hw(s,o);return ju(h,h.next),ju(s,s.next)}function fA(o,r){return Sr(o.prev,o,r.prev)<0&&Sr(r.next,o,o.next)<0}function Ry(o,r,s,h,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-h)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function pA(o){let r=o,s=o;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==o);return s}function Uc(o,r,s,h,m,_,x,w){return(m-x)*(r-w)>=(o-x)*(_-w)&&(o-x)*(h-w)>=(s-x)*(r-w)&&(s-x)*(_-w)>=(m-x)*(h-w)}function mA(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(s,h){let m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==h.i&&m.next.i!==h.i&&cw(m,m.next,s,h))return!0;m=m.next}while(m!==s);return!1}(o,r)&&(zd(o,r)&&zd(r,o)&&function(s,h){let m=s,_=!1;const x=(s.x+h.x)/2,w=(s.y+h.y)/2;do m.y>w!=m.next.y>w&&m.next.y!==m.y&&x<(m.next.x-m.x)*(w-m.y)/(m.next.y-m.y)+m.x&&(_=!_),m=m.next;while(m!==s);return _}(o,r)&&(Sr(o.prev,o,r.prev)||Sr(o,r.prev,r))||zp(o,r)&&Sr(o.prev,o,o.next)>0&&Sr(r.prev,r,r.next)>0)}function Sr(o,r,s){return(r.y-o.y)*(s.x-r.x)-(r.x-o.x)*(s.y-r.y)}function zp(o,r){return o.x===r.x&&o.y===r.y}function cw(o,r,s,h){const m=Op(Sr(o,r,s)),_=Op(Sr(o,r,h)),x=Op(Sr(s,h,o)),w=Op(Sr(s,h,r));return m!==_&&x!==w||!(m!==0||!Fp(o,s,r))||!(_!==0||!Fp(o,h,r))||!(x!==0||!Fp(s,o,h))||!(w!==0||!Fp(s,r,h))}function Fp(o,r,s){return r.x<=Math.max(o.x,s.x)&&r.x>=Math.min(o.x,s.x)&&r.y<=Math.max(o.y,s.y)&&r.y>=Math.min(o.y,s.y)}function Op(o){return o>0?1:o<0?-1:0}function zd(o,r){return Sr(o.prev,o,o.next)<0?Sr(o,r,o.next)>=0&&Sr(o,o.prev,r)>=0:Sr(o,r,o.prev)<0||Sr(o,o.next,r)<0}function hw(o,r){const s=jy(o.i,o.x,o.y),h=jy(r.i,r.x,r.y),m=o.next,_=r.prev;return o.next=r,r.prev=o,s.next=m,m.prev=s,h.next=s,s.prev=h,_.next=h,h.prev=_,h}function dw(o,r,s,h){const m=jy(o,r,s);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function Fd(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function jy(o,r,s){return{i:o,x:r,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Ly(o,r,s){const h=s.patternDependencies;let m=!1;for(const _ of r){const x=_.paint.get(`${o}-pattern`);x.isConstant()||(m=!0);const w=x.constantOr(null);w&&(m=!0,h[w.to]=!0,h[w.from]=!0)}return m}function Dy(o,r,s,h,m){const _=m.patternDependencies;for(const x of r){const w=x.paint.get(`${o}-pattern`).value;if(w.kind!=="constant"){let P=w.evaluate({zoom:h-1},s,{},m.availableImages),F=w.evaluate({zoom:h},s,{},m.availableImages),$=w.evaluate({zoom:h+1},s,{},m.availableImages);P=P&&P.name?P.name:P,F=F&&F.name?F.name:F,$=$&&$.name?$.name:$,_[P]=!0,_[F]=!0,_[$]=!0,s.patterns[x.id]={min:P,mid:F,max:$}}}return s}class By{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new is,this.indexArray=new Oo,this.indexArray2=new qr,this.programConfigurations=new Fu(r.layers,r.zoom),this.segments=new An,this.segments2=new An,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.hasPattern=Ly("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),_=!m.isConstant(),x=[];for(const{feature:w,id:P,index:F,sourceLayerIndex:$}of r){const Y=this.layers[0]._featureFilter.needGeometry,ne=Ru(w,Y);if(!this.layers[0]._featureFilter.filter(new er(this.zoom),ne,h))continue;const le=_?m.evaluate(ne,{},h,s.availableImages):void 0,me={id:P,properties:w.properties,type:w.type,sourceLayerIndex:$,index:F,geometry:Y?ne.geometry:Ou(w),patterns:{},sortKey:le};x.push(me)}_&&x.sort((w,P)=>w.sortKey-P.sortKey);for(const w of x){const{geometry:P,index:F,sourceLayerIndex:$}=w;if(this.hasPattern){const Y=Dy("fill",this.layers,w,this.zoom,s);this.patternFeatures.push(Y)}else this.addFeature(w,P,F,h,{});s.featureIndex.insert(r[F].feature,P,F,$,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}addFeatures(r,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,sA),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,h,m,_){for(const x of xs(s,500)){let w=0;for(const le of x)w+=le.length;const P=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),F=P.vertexLength,$=[],Y=[];for(const le of x){if(le.length===0)continue;le!==x[0]&&Y.push($.length/2);const me=this.segments2.prepareSegment(le.length,this.layoutVertexArray,this.indexArray2),we=me.vertexLength;this.layoutVertexArray.emplaceBack(le[0].x,le[0].y),this.indexArray2.emplaceBack(we+le.length-1,we),$.push(le[0].x),$.push(le[0].y);for(let Oe=1;Oe<le.length;Oe++)this.layoutVertexArray.emplaceBack(le[Oe].x,le[Oe].y),this.indexArray2.emplaceBack(we+Oe-1,we+Oe),$.push(le[Oe].x),$.push(le[Oe].y);me.vertexLength+=le.length,me.primitiveLength+=le.length}const ne=lw($,Y);for(let le=0;le<ne.length;le+=3)this.indexArray.emplaceBack(F+ne[le],F+ne[le+1],F+ne[le+2]);P.vertexLength+=w,P.primitiveLength+=ne.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,_,m)}}let fw,pw;Ut("FillBucket",By,{omit:["layers","patternFeatures"]});var gA={get paint(){return pw=pw||new v({"fill-antialias":new Zt(et.paint_fill["fill-antialias"]),"fill-opacity":new sn(et.paint_fill["fill-opacity"]),"fill-color":new sn(et.paint_fill["fill-color"]),"fill-outline-color":new sn(et.paint_fill["fill-outline-color"]),"fill-translate":new Zt(et.paint_fill["fill-translate"]),"fill-translate-anchor":new Zt(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new kc(et.paint_fill["fill-pattern"])})},get layout(){return fw=fw||new v({"fill-sort-key":new sn(et.layout_fill["fill-sort-key"])})}};class yA extends a{constructor(r){super(r,gA)}recalculate(r,s){super.recalculate(r,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new By(r)}queryRadius(){return Ap(this.paint.get("fill-translate"))}queryIntersectsFeature(r,s,h,m,_,x,w){return Kx(Mp(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),m)}isTileClipped(){return!0}}const vA=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),_A=S([{name:"a_centroid",components:2,type:"Int16"}],4),{members:xA}=vA;var Ml={},wA=I,mw=$c;function $c(o,r,s,h,m){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=m,o.readFields(bA,this,r)}function bA(o,r,s){o==1?r.id=s.readVarint():o==2?function(h,m){for(var _=h.readVarint()+h.pos;h.pos<_;){var x=m._keys[h.readVarint()],w=m._values[h.readVarint()];m.properties[x]=w}}(s,r):o==3?r.type=s.readVarint():o==4&&(r._geometry=s.pos)}function SA(o){for(var r,s,h=0,m=0,_=o.length,x=_-1;m<_;x=m++)h+=((s=o[x]).x-(r=o[m]).x)*(r.y+s.y);return h}$c.types=["Unknown","Point","LineString","Polygon"],$c.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,s=o.readVarint()+o.pos,h=1,m=0,_=0,x=0,w=[];o.pos<s;){if(m<=0){var P=o.readVarint();h=7&P,m=P>>3}if(m--,h===1||h===2)_+=o.readSVarint(),x+=o.readSVarint(),h===1&&(r&&w.push(r),r=[]),r.push(new wA(_,x));else{if(h!==7)throw new Error("unknown command "+h);r&&r.push(r[0].clone())}}return r&&w.push(r),w},$c.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,s=1,h=0,m=0,_=0,x=1/0,w=-1/0,P=1/0,F=-1/0;o.pos<r;){if(h<=0){var $=o.readVarint();s=7&$,h=$>>3}if(h--,s===1||s===2)(m+=o.readSVarint())<x&&(x=m),m>w&&(w=m),(_+=o.readSVarint())<P&&(P=_),_>F&&(F=_);else if(s!==7)throw new Error("unknown command "+s)}return[x,P,w,F]},$c.prototype.toGeoJSON=function(o,r,s){var h,m,_=this.extent*Math.pow(2,s),x=this.extent*o,w=this.extent*r,P=this.loadGeometry(),F=$c.types[this.type];function $(le){for(var me=0;me<le.length;me++){var we=le[me];le[me]=[360*(we.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(we.y+w)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var Y=[];for(h=0;h<P.length;h++)Y[h]=P[h][0];$(P=Y);break;case 2:for(h=0;h<P.length;h++)$(P[h]);break;case 3:for(P=function(le){var me=le.length;if(me<=1)return[le];for(var we,Oe,De=[],nt=0;nt<me;nt++){var qe=SA(le[nt]);qe!==0&&(Oe===void 0&&(Oe=qe<0),Oe===qe<0?(we&&De.push(we),we=[le[nt]]):we.push(le[nt]))}return we&&De.push(we),De}(P),h=0;h<P.length;h++)for(m=0;m<P[h].length;m++)$(P[h][m])}P.length===1?P=P[0]:F="Multi"+F;var ne={type:"Feature",geometry:{type:F,coordinates:P},properties:this.properties};return"id"in this&&(ne.id=this.id),ne};var EA=mw,gw=yw;function yw(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(TA,this,r),this.length=this._features.length}function TA(o,r,s){o===15?r.version=s.readVarint():o===1?r.name=s.readString():o===5?r.extent=s.readVarint():o===2?r._features.push(s.pos):o===3?r._keys.push(s.readString()):o===4&&r._values.push(function(h){for(var m=null,_=h.readVarint()+h.pos;h.pos<_;){var x=h.readVarint()>>3;m=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return m}(s))}yw.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new EA(this._pbf,r,this.extent,this._keys,this._values)};var IA=gw;function CA(o,r,s){if(o===3){var h=new IA(s,s.readVarint()+s.pos);h.length&&(r[h.name]=h)}}Ml.VectorTile=function(o,r){this.layers=o.readFields(CA,{},r)},Ml.VectorTileFeature=mw,Ml.VectorTileLayer=gw;const PA=Ml.VectorTileFeature.types,Ny=Math.pow(2,13);function Od(o,r,s,h,m,_,x,w){o.emplaceBack(r,s,2*Math.floor(h*Ny)+x,m*Ny*2,_*Ny*2,Math.round(w))}class Uy{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new El,this.centroidVertexArray=new ii,this.indexArray=new Oo,this.programConfigurations=new Fu(r.layers,r.zoom),this.segments=new An,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.features=[],this.hasPattern=Ly("fill-extrusion",this.layers,s);for(const{feature:m,id:_,index:x,sourceLayerIndex:w}of r){const P=this.layers[0]._featureFilter.needGeometry,F=Ru(m,P);if(!this.layers[0]._featureFilter.filter(new er(this.zoom),F,h))continue;const $={id:_,sourceLayerIndex:w,index:x,geometry:P?F.geometry:Ou(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Dy("fill-extrusion",this.layers,$,this.zoom,s)):this.addFeature($,$.geometry,x,h,{}),s.featureIndex.insert(m,$.geometry,x,w,this.index,!0)}}addFeatures(r,s,h){for(const m of this.features){const{geometry:_}=m;this.addFeature(m,_,m.index,s,h)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,xA),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,_A.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,s,h,m,_){for(const x of xs(s,500)){const w={x:0,y:0,vertexCount:0};let P=0;for(const me of x)P+=me.length;let F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const me of x){if(me.length===0||MA(me))continue;let we=0;for(let Oe=0;Oe<me.length;Oe++){const De=me[Oe];if(Oe>=1){const nt=me[Oe-1];if(!AA(De,nt)){F.vertexLength+4>An.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const qe=De.sub(nt)._perp()._unit(),Qe=nt.dist(De);we+Qe>32768&&(we=0),Od(this.layoutVertexArray,De.x,De.y,qe.x,qe.y,0,0,we),Od(this.layoutVertexArray,De.x,De.y,qe.x,qe.y,0,1,we),w.x+=2*De.x,w.y+=2*De.y,w.vertexCount+=2,we+=Qe,Od(this.layoutVertexArray,nt.x,nt.y,qe.x,qe.y,0,0,we),Od(this.layoutVertexArray,nt.x,nt.y,qe.x,qe.y,0,1,we),w.x+=2*nt.x,w.y+=2*nt.y,w.vertexCount+=2;const lt=F.vertexLength;this.indexArray.emplaceBack(lt,lt+2,lt+1),this.indexArray.emplaceBack(lt+1,lt+2,lt+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+P>An.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),PA[r.type]!=="Polygon")continue;const $=[],Y=[],ne=F.vertexLength;for(const me of x)if(me.length!==0){me!==x[0]&&Y.push($.length/2);for(let we=0;we<me.length;we++){const Oe=me[we];Od(this.layoutVertexArray,Oe.x,Oe.y,0,0,1,1,0),w.x+=Oe.x,w.y+=Oe.y,w.vertexCount+=1,$.push(Oe.x),$.push(Oe.y)}}const le=lw($,Y);for(let me=0;me<le.length;me+=3)this.indexArray.emplaceBack(ne+le[me],ne+le[me+2],ne+le[me+1]);F.primitiveLength+=le.length/3,F.vertexLength+=P;for(let me=0;me<w.vertexCount;me++){const we=Math.floor(w.x/w.vertexCount),Oe=Math.floor(w.y/w.vertexCount);this.centroidVertexArray.emplaceBack(we,Oe)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,_,m)}}function AA(o,r){return o.x===r.x&&(o.x<0||o.x>zr)||o.y===r.y&&(o.y<0||o.y>zr)}function MA(o){return o.every(r=>r.x<0)||o.every(r=>r.x>zr)||o.every(r=>r.y<0)||o.every(r=>r.y>zr)}let vw;Ut("FillExtrusionBucket",Uy,{omit:["layers","features"]});var kA={get paint(){return vw=vw||new v({"fill-extrusion-opacity":new Zt(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sn(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zt(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zt(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new kc(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sn(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sn(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zt(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class zA extends a{constructor(r){super(r,kA)}createBucket(r){return new Uy(r)}queryRadius(){return Ap(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,s,h,m,_,x,w,P){const F=Mp(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),$=this.paint.get("fill-extrusion-height").evaluate(s,h),Y=this.paint.get("fill-extrusion-base").evaluate(s,h),ne=function(me,we,Oe,De){const nt=[];for(const qe of me){const Qe=[qe.x,qe.y,0,1];kp(Qe,Qe,we),nt.push(new b(Qe[0]/Qe[3],Qe[1]/Qe[3]))}return nt}(F,P),le=function(me,we,Oe,De){const nt=[],qe=[],Qe=De[8]*we,lt=De[9]*we,_t=De[10]*we,Lt=De[11]*we,rn=De[8]*Oe,Rt=De[9]*Oe,kt=De[10]*Oe,Kt=De[11]*Oe;for(const $t of me){const Bt=[],ft=[];for(const Yt of $t){const Xt=Yt.x,hn=Yt.y,Kn=De[0]*Xt+De[4]*hn+De[12],Wn=De[1]*Xt+De[5]*hn+De[13],Vr=De[2]*Xt+De[6]*hn+De[14],os=De[3]*Xt+De[7]*hn+De[15],ai=Vr+_t,Gr=os+Lt,Mi=Kn+rn,ki=Wn+Rt,zi=Vr+kt,yr=os+Kt,Hr=new b((Kn+Qe)/Gr,(Wn+lt)/Gr);Hr.z=ai/Gr,Bt.push(Hr);const _i=new b(Mi/yr,ki/yr);_i.z=zi/yr,ft.push(_i)}nt.push(Bt),qe.push(ft)}return[nt,qe]}(m,Y,$,P);return function(me,we,Oe){let De=1/0;Kx(Oe,we)&&(De=_w(Oe,we[0]));for(let nt=0;nt<we.length;nt++){const qe=we[nt],Qe=me[nt];for(let lt=0;lt<qe.length-1;lt++){const _t=qe[lt],Lt=[_t,qe[lt+1],Qe[lt+1],Qe[lt],_t];qx(Oe,Lt)&&(De=Math.min(De,_w(Oe,Lt)))}}return De!==1/0&&De}(le[0],le[1],ne)}}function Rd(o,r){return o.x*r.x+o.y*r.y}function _w(o,r){if(o.length===1){let s=0;const h=r[s++];let m;for(;!m||h.equals(m);)if(m=r[s++],!m)return 1/0;for(;s<r.length;s++){const _=r[s],x=o[0],w=m.sub(h),P=_.sub(h),F=x.sub(h),$=Rd(w,w),Y=Rd(w,P),ne=Rd(P,P),le=Rd(F,w),me=Rd(F,P),we=$*ne-Y*Y,Oe=(ne*le-Y*me)/we,De=($*me-Y*le)/we,nt=h.z*(1-Oe-De)+m.z*Oe+_.z*De;if(isFinite(nt))return nt}return 1/0}{let s=1/0;for(const h of r)s=Math.min(s,h.z);return s}}const FA=S([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:OA}=FA,RA=S([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:jA}=RA,LA=Ml.VectorTileFeature.types,DA=Math.cos(Math.PI/180*37.5),xw=Math.pow(2,14)/.5;class $y{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Fc,this.layoutVertexArray2=new Tl,this.indexArray=new Oo,this.programConfigurations=new Fu(r.layers,r.zoom),this.segments=new An,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.hasPattern=Ly("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),_=!m.isConstant(),x=[];for(const{feature:w,id:P,index:F,sourceLayerIndex:$}of r){const Y=this.layers[0]._featureFilter.needGeometry,ne=Ru(w,Y);if(!this.layers[0]._featureFilter.filter(new er(this.zoom),ne,h))continue;const le=_?m.evaluate(ne,{},h):void 0,me={id:P,properties:w.properties,type:w.type,sourceLayerIndex:$,index:F,geometry:Y?ne.geometry:Ou(w),patterns:{},sortKey:le};x.push(me)}_&&x.sort((w,P)=>w.sortKey-P.sortKey);for(const w of x){const{geometry:P,index:F,sourceLayerIndex:$}=w;if(this.hasPattern){const Y=Dy("line",this.layers,w,this.zoom,s);this.patternFeatures.push(Y)}else this.addFeature(w,P,F,h,{});s.featureIndex.insert(r[F].feature,P,F,$,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}addFeatures(r,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,jA)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,OA),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,h,m,_){const x=this.layers[0].layout,w=x.get("line-join").evaluate(r,{}),P=x.get("line-cap"),F=x.get("line-miter-limit"),$=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const Y of s)this.addLine(Y,r,w,P,F,$);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,_,m)}addLine(r,s,h,m,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let De=0;De<r.length-1;De++)this.totalDistance+=r[De].dist(r[De+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=LA[s.type]==="Polygon";let P=r.length;for(;P>=2&&r[P-1].equals(r[P-2]);)P--;let F=0;for(;F<P-1&&r[F].equals(r[F+1]);)F++;if(P<(w?3:2))return;h==="bevel"&&(_=1.05);const $=this.overscaling<=16?15*zr/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let ne,le,me,we,Oe;this.e1=this.e2=-1,w&&(ne=r[P-2],Oe=r[F].sub(ne)._unit()._perp());for(let De=F;De<P;De++){if(me=De===P-1?w?r[F+1]:void 0:r[De+1],me&&r[De].equals(me))continue;Oe&&(we=Oe),ne&&(le=ne),ne=r[De],Oe=me?me.sub(ne)._unit()._perp():we,we=we||Oe;let nt=we.add(Oe);nt.x===0&&nt.y===0||nt._unit();const qe=we.x*Oe.x+we.y*Oe.y,Qe=nt.x*Oe.x+nt.y*Oe.y,lt=Qe!==0?1/Qe:1/0,_t=2*Math.sqrt(2-2*Qe),Lt=Qe<DA&&le&&me,rn=we.x*Oe.y-we.y*Oe.x>0;if(Lt&&De>F){const Kt=ne.dist(le);if(Kt>2*$){const $t=ne.sub(ne.sub(le)._mult($/Kt)._round());this.updateDistance(le,$t),this.addCurrentVertex($t,we,0,0,Y),le=$t}}const Rt=le&&me;let kt=Rt?h:w?"butt":m;if(Rt&&kt==="round"&&(lt<x?kt="miter":lt<=2&&(kt="fakeround")),kt==="miter"&&lt>_&&(kt="bevel"),kt==="bevel"&&(lt>2&&(kt="flipbevel"),lt<_&&(kt="miter")),le&&this.updateDistance(le,ne),kt==="miter")nt._mult(lt),this.addCurrentVertex(ne,nt,0,0,Y);else if(kt==="flipbevel"){if(lt>100)nt=Oe.mult(-1);else{const Kt=lt*we.add(Oe).mag()/we.sub(Oe).mag();nt._perp()._mult(Kt*(rn?-1:1))}this.addCurrentVertex(ne,nt,0,0,Y),this.addCurrentVertex(ne,nt.mult(-1),0,0,Y)}else if(kt==="bevel"||kt==="fakeround"){const Kt=-Math.sqrt(lt*lt-1),$t=rn?Kt:0,Bt=rn?0:Kt;if(le&&this.addCurrentVertex(ne,we,$t,Bt,Y),kt==="fakeround"){const ft=Math.round(180*_t/Math.PI/20);for(let Yt=1;Yt<ft;Yt++){let Xt=Yt/ft;if(Xt!==.5){const Kn=Xt-.5;Xt+=Xt*Kn*(Xt-1)*((1.0904+qe*(qe*(3.55645-1.43519*qe)-3.2452))*Kn*Kn+(.848013+qe*(.215638*qe-1.06021)))}const hn=Oe.sub(we)._mult(Xt)._add(we)._unit()._mult(rn?-1:1);this.addHalfVertex(ne,hn.x,hn.y,!1,rn,0,Y)}}me&&this.addCurrentVertex(ne,Oe,-$t,-Bt,Y)}else if(kt==="butt")this.addCurrentVertex(ne,nt,0,0,Y);else if(kt==="square"){const Kt=le?1:-1;this.addCurrentVertex(ne,nt,Kt,Kt,Y)}else kt==="round"&&(le&&(this.addCurrentVertex(ne,we,0,0,Y),this.addCurrentVertex(ne,we,1,1,Y,!0)),me&&(this.addCurrentVertex(ne,Oe,-1,-1,Y,!0),this.addCurrentVertex(ne,Oe,0,0,Y)));if(Lt&&De<P-1){const Kt=ne.dist(me);if(Kt>2*$){const $t=ne.add(me.sub(ne)._mult($/Kt)._round());this.updateDistance(ne,$t),this.addCurrentVertex($t,Oe,0,0,Y),ne=$t}}}}addCurrentVertex(r,s,h,m,_,x=!1){const w=s.y*m-s.x,P=-s.y-s.x*m;this.addHalfVertex(r,s.x+s.y*h,s.y-s.x*h,x,!1,h,_),this.addHalfVertex(r,w,P,x,!0,-m,_),this.distance>xw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,s,h,m,_,x))}addHalfVertex({x:r,y:s},h,m,_,x,w,P){const F=.5*(this.lineClips?this.scaledDistance*(xw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(_?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(w===0?0:w<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const $=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,$),P.primitiveLength++),x?this.e2=$:this.e1=$}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,s){this.distance+=r.dist(s),this.updateScaledDistance()}}let ww,bw;Ut("LineBucket",$y,{omit:["layers","patternFeatures"]});var Sw={get paint(){return bw=bw||new v({"line-opacity":new sn(et.paint_line["line-opacity"]),"line-color":new sn(et.paint_line["line-color"]),"line-translate":new Zt(et.paint_line["line-translate"]),"line-translate-anchor":new Zt(et.paint_line["line-translate-anchor"]),"line-width":new sn(et.paint_line["line-width"]),"line-gap-width":new sn(et.paint_line["line-gap-width"]),"line-offset":new sn(et.paint_line["line-offset"]),"line-blur":new sn(et.paint_line["line-blur"]),"line-dasharray":new zc(et.paint_line["line-dasharray"]),"line-pattern":new kc(et.paint_line["line-pattern"]),"line-gradient":new Td(et.paint_line["line-gradient"])})},get layout(){return ww=ww||new v({"line-cap":new Zt(et.layout_line["line-cap"]),"line-join":new sn(et.layout_line["line-join"]),"line-miter-limit":new Zt(et.layout_line["line-miter-limit"]),"line-round-limit":new Zt(et.layout_line["line-round-limit"]),"line-sort-key":new sn(et.layout_line["line-sort-key"])})}};class BA extends sn{possiblyEvaluate(r,s){return s=new er(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(r,s)}evaluate(r,s,h,m){return s=T({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(r,s,h,m)}}let Rp;class NA extends a{constructor(r){super(r,Sw),this.gradientVersion=0,Rp||(Rp=new BA(Sw.paint.properties["line-width"].specification),Rp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof ys,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,s){super.recalculate(r,s),this.paint._values["line-floorwidth"]=Rp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new $y(r)}queryRadius(r){const s=r,h=Ew(Pd("line-width",this,s),Pd("line-gap-width",this,s)),m=Pd("line-offset",this,s);return h/2+Math.abs(m)+Ap(this.paint.get("line-translate"))}queryIntersectsFeature(r,s,h,m,_,x,w){const P=Mp(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),F=w/2*Ew(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),$=this.paint.get("line-offset").evaluate(s,h);return $&&(m=function(Y,ne){const le=[];for(let me=0;me<Y.length;me++){const we=Y[me],Oe=[];for(let De=0;De<we.length;De++){const nt=we[De-1],qe=we[De],Qe=we[De+1],lt=De===0?new b(0,0):qe.sub(nt)._unit()._perp(),_t=De===we.length-1?new b(0,0):Qe.sub(qe)._unit()._perp(),Lt=lt._add(_t)._unit(),rn=Lt.x*_t.x+Lt.y*_t.y;rn!==0&&Lt._mult(1/rn),Oe.push(Lt._mult(ne)._add(qe))}le.push(Oe)}return le}(m,$*w)),function(Y,ne,le){for(let me=0;me<ne.length;me++){const we=ne[me];if(Y.length>=3){for(let Oe=0;Oe<we.length;Oe++)if(Bc(Y,we[Oe]))return!0}if(qP(Y,we,le))return!0}return!1}(P,m,F)}isTileClipped(){return!0}}function Ew(o,r){return r>0?r+2*o:o}const UA=S([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$A=S([{name:"a_projected_pos",components:3,type:"Float32"}],4);S([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const VA=S([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);S([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Tw=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),GA=S([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function HA(o,r,s){return o.sections.forEach(h=>{h.text=function(m,_,x){const w=_.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?m=m.toLocaleUpperCase():w==="lowercase"&&(m=m.toLocaleLowerCase()),qi.applyArabicShaping&&(m=qi.applyArabicShaping(m)),m}(h.text,r,s)}),o}S([{name:"triangle",components:3,type:"Uint16"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),S([{type:"Float32",name:"offsetX"}]),S([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),S([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const jd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Br=24,Iw=Zn,Cw=function(o,r,s,h,m){var _,x,w=8*m-h-1,P=(1<<w)-1,F=P>>1,$=-7,Y=m-1,ne=-1,le=o[r+Y];for(Y+=ne,_=le&(1<<-$)-1,le>>=-$,$+=w;$>0;_=256*_+o[r+Y],Y+=ne,$-=8);for(x=_&(1<<-$)-1,_>>=-$,$+=h;$>0;x=256*x+o[r+Y],Y+=ne,$-=8);if(_===0)_=1-F;else{if(_===P)return x?NaN:1/0*(le?-1:1);x+=Math.pow(2,h),_-=F}return(le?-1:1)*x*Math.pow(2,_-h)},Pw=function(o,r,s,h,m,_){var x,w,P,F=8*_-m-1,$=(1<<F)-1,Y=$>>1,ne=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,le=0,me=1,we=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(w=isNaN(r)?1:0,x=$):(x=Math.floor(Math.log(r)/Math.LN2),r*(P=Math.pow(2,-x))<1&&(x--,P*=2),(r+=x+Y>=1?ne/P:ne*Math.pow(2,1-Y))*P>=2&&(x++,P/=2),x+Y>=$?(w=0,x=$):x+Y>=1?(w=(r*P-1)*Math.pow(2,m),x+=Y):(w=r*Math.pow(2,Y-1)*Math.pow(2,m),x=0));m>=8;o[s+le]=255&w,le+=me,w/=256,m-=8);for(x=x<<m|w,F+=m;F>0;o[s+le]=255&x,le+=me,x/=256,F-=8);o[s+le-me]|=128*we};function Zn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Zn.Varint=0,Zn.Fixed64=1,Zn.Bytes=2,Zn.Fixed32=5;var Vy=4294967296,Aw=1/Vy,Mw=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function ka(o){return o.type===Zn.Bytes?o.readVarint()+o.pos:o.pos+1}function Vc(o,r,s){return s?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function kw(o,r,s){var h=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(h);for(var m=s.pos-1;m>=o;m--)s.buf[m+h]=s.buf[m]}function ZA(o,r){for(var s=0;s<o.length;s++)r.writeVarint(o[s])}function WA(o,r){for(var s=0;s<o.length;s++)r.writeSVarint(o[s])}function XA(o,r){for(var s=0;s<o.length;s++)r.writeFloat(o[s])}function qA(o,r){for(var s=0;s<o.length;s++)r.writeDouble(o[s])}function KA(o,r){for(var s=0;s<o.length;s++)r.writeBoolean(o[s])}function YA(o,r){for(var s=0;s<o.length;s++)r.writeFixed32(o[s])}function JA(o,r){for(var s=0;s<o.length;s++)r.writeSFixed32(o[s])}function QA(o,r){for(var s=0;s<o.length;s++)r.writeFixed64(o[s])}function eM(o,r){for(var s=0;s<o.length;s++)r.writeSFixed64(o[s])}function jp(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function Gc(o,r,s){o[s]=r,o[s+1]=r>>>8,o[s+2]=r>>>16,o[s+3]=r>>>24}function zw(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}Zn.prototype={destroy:function(){this.buf=null},readFields:function(o,r,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),m=h>>3,_=this.pos;this.type=7&h,o(m,r,this),this.pos===_&&this.skip(h)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=jp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=zw(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=jp(this.buf,this.pos)+jp(this.buf,this.pos+4)*Vy;return this.pos+=8,o},readSFixed64:function(){var o=jp(this.buf,this.pos)+zw(this.buf,this.pos+4)*Vy;return this.pos+=8,o},readFloat:function(){var o=Cw(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Cw(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,s,h=this.buf;return r=127&(s=h[this.pos++]),s<128?r:(r|=(127&(s=h[this.pos++]))<<7,s<128?r:(r|=(127&(s=h[this.pos++]))<<14,s<128?r:(r|=(127&(s=h[this.pos++]))<<21,s<128?r:function(m,_,x){var w,P,F=x.buf;if(w=(112&(P=F[x.pos++]))>>4,P<128||(w|=(127&(P=F[x.pos++]))<<3,P<128)||(w|=(127&(P=F[x.pos++]))<<10,P<128)||(w|=(127&(P=F[x.pos++]))<<17,P<128)||(w|=(127&(P=F[x.pos++]))<<24,P<128)||(w|=(1&(P=F[x.pos++]))<<31,P<128))return Vc(m,w,_);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&Mw?function(s,h,m){return Mw.decode(s.subarray(h,m))}(this.buf,r,o):function(s,h,m){for(var _="",x=h;x<m;){var w,P,F,$=s[x],Y=null,ne=$>239?4:$>223?3:$>191?2:1;if(x+ne>m)break;ne===1?$<128&&(Y=$):ne===2?(192&(w=s[x+1]))==128&&(Y=(31&$)<<6|63&w)<=127&&(Y=null):ne===3?(P=s[x+2],(192&(w=s[x+1]))==128&&(192&P)==128&&((Y=(15&$)<<12|(63&w)<<6|63&P)<=2047||Y>=55296&&Y<=57343)&&(Y=null)):ne===4&&(P=s[x+2],F=s[x+3],(192&(w=s[x+1]))==128&&(192&P)==128&&(192&F)==128&&((Y=(15&$)<<18|(63&w)<<12|(63&P)<<6|63&F)<=65535||Y>=1114112)&&(Y=null)),Y===null?(Y=65533,ne=1):Y>65535&&(Y-=65536,_+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),_+=String.fromCharCode(Y),x+=ne}return _}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==Zn.Bytes)return o.push(this.readVarint(r));var s=ka(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==Zn.Bytes)return o.push(this.readSVarint());var r=ka(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Zn.Bytes)return o.push(this.readBoolean());var r=ka(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Zn.Bytes)return o.push(this.readFloat());var r=ka(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Zn.Bytes)return o.push(this.readDouble());var r=ka(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Zn.Bytes)return o.push(this.readFixed32());var r=ka(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Zn.Bytes)return o.push(this.readSFixed32());var r=ka(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Zn.Bytes)return o.push(this.readFixed64());var r=ka(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Zn.Bytes)return o.push(this.readSFixed64());var r=ka(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===Zn.Varint)for(;this.buf[this.pos++]>127;);else if(r===Zn.Bytes)this.pos=this.readVarint()+this.pos;else if(r===Zn.Fixed32)this.pos+=4;else{if(r!==Zn.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Gc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Gc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Gc(this.buf,-1&o,this.pos),Gc(this.buf,Math.floor(o*Aw),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Gc(this.buf,-1&o,this.pos),Gc(this.buf,Math.floor(o*Aw),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,s){var h,m;if(r>=0?(h=r%4294967296|0,m=r/4294967296|0):(m=~(-r/4294967296),4294967295^(h=~(-r%4294967296))?h=h+1|0:(h=0,m=m+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(_,x,w){w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,w.buf[w.pos]=127&(_>>>=7)}(h,0,s),function(_,x){var w=(7&_)<<4;x.buf[x.pos++]|=w|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))}(m,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(h,m,_){for(var x,w,P=0;P<m.length;P++){if((x=m.charCodeAt(P))>55295&&x<57344){if(!w){x>56319||P+1===m.length?(h[_++]=239,h[_++]=191,h[_++]=189):w=x;continue}if(x<56320){h[_++]=239,h[_++]=191,h[_++]=189,w=x;continue}x=w-55296<<10|x-56320|65536,w=null}else w&&(h[_++]=239,h[_++]=191,h[_++]=189,w=null);x<128?h[_++]=x:(x<2048?h[_++]=x>>6|192:(x<65536?h[_++]=x>>12|224:(h[_++]=x>>18|240,h[_++]=x>>12&63|128),h[_++]=x>>6&63|128),h[_++]=63&x|128)}return _}(this.buf,o,this.pos);var s=this.pos-r;s>=128&&kw(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),Pw(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Pw(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var s=0;s<r;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,r){this.pos++;var s=this.pos;o(r,this);var h=this.pos-s;h>=128&&kw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,r,s){this.writeTag(o,Zn.Bytes),this.writeRawMessage(r,s)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,ZA,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,WA,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,KA,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,XA,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,qA,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,YA,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,JA,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,QA,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,eM,r)},writeBytesField:function(o,r){this.writeTag(o,Zn.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,Zn.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,Zn.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,Zn.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,Zn.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,Zn.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,Zn.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,Zn.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,Zn.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,Zn.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var Gy=E(Iw);const Hy=3;function tM(o,r,s){o===1&&s.readMessage(nM,r)}function nM(o,r,s){if(o===3){const{id:h,bitmap:m,width:_,height:x,left:w,top:P,advance:F}=s.readMessage(rM,{});r.push({id:h,bitmap:new Md({width:_+2*Hy,height:x+2*Hy},m),metrics:{width:_,height:x,left:w,top:P,advance:F}})}}function rM(o,r,s){o===1?r.id=s.readVarint():o===2?r.bitmap=s.readBytes():o===3?r.width=s.readVarint():o===4?r.height=s.readVarint():o===5?r.left=s.readSVarint():o===6?r.top=s.readSVarint():o===7&&(r.advance=s.readVarint())}const Fw=Hy;function Ow(o){let r=0,s=0;for(const x of o)r+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,w)=>w.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let m=0,_=0;for(const x of o)for(let w=h.length-1;w>=0;w--){const P=h[w];if(!(x.w>P.w||x.h>P.h)){if(x.x=P.x,x.y=P.y,_=Math.max(_,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===P.w&&x.h===P.h){const F=h.pop();w<h.length&&(h[w]=F)}else x.h===P.h?(P.x+=x.w,P.w-=x.w):x.w===P.w?(P.y+=x.h,P.h-=x.h):(h.push({x:P.x+x.w,y:P.y,w:P.w-x.w,h:x.h}),P.y+=x.h,P.h-=x.h);break}}return{w:m,h:_,fill:r/(m*_)||0}}const Yi=1;class Zy{constructor(r,{pixelRatio:s,version:h,stretchX:m,stretchY:_,content:x,textFitWidth:w,textFitHeight:P}){this.paddedRect=r,this.pixelRatio=s,this.stretchX=m,this.stretchY=_,this.content=x,this.version=h,this.textFitWidth=w,this.textFitHeight=P}get tl(){return[this.paddedRect.x+Yi,this.paddedRect.y+Yi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Yi,this.paddedRect.y+this.paddedRect.h-Yi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Yi)/this.pixelRatio,(this.paddedRect.h-2*Yi)/this.pixelRatio]}}class Rw{constructor(r,s){const h={},m={};this.haveRenderCallbacks=[];const _=[];this.addImages(r,h,_),this.addImages(s,m,_);const{w:x,h:w}=Ow(_),P=new Ro({width:x||1,height:w||1});for(const F in r){const $=r[F],Y=h[F].paddedRect;Ro.copy($.data,P,{x:0,y:0},{x:Y.x+Yi,y:Y.y+Yi},$.data)}for(const F in s){const $=s[F],Y=m[F].paddedRect,ne=Y.x+Yi,le=Y.y+Yi,me=$.data.width,we=$.data.height;Ro.copy($.data,P,{x:0,y:0},{x:ne,y:le},$.data),Ro.copy($.data,P,{x:0,y:we-1},{x:ne,y:le-1},{width:me,height:1}),Ro.copy($.data,P,{x:0,y:0},{x:ne,y:le+we},{width:me,height:1}),Ro.copy($.data,P,{x:me-1,y:0},{x:ne-1,y:le},{width:1,height:we}),Ro.copy($.data,P,{x:0,y:0},{x:ne+me,y:le},{width:1,height:we})}this.image=P,this.iconPositions=h,this.patternPositions=m}addImages(r,s,h){for(const m in r){const _=r[m],x={x:0,y:0,w:_.data.width+2*Yi,h:_.data.height+2*Yi};h.push(x),s[m]=new Zy(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,s){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),s)}patchUpdatedImage(r,s,h){if(!r||!s||r.version===s.version)return;r.version=s.version;const[m,_]=r.tl;h.update(s.data,void 0,{x:m,y:_})}}var kl;Ut("ImagePosition",Zy),Ut("ImageAtlas",Rw),p.ah=void 0,(kl=p.ah||(p.ah={}))[kl.none=0]="none",kl[kl.horizontal=1]="horizontal",kl[kl.vertical=2]="vertical",kl[kl.horizontalOnly=3]="horizontalOnly";const Ld=-17;class Dd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,s){const h=new Dd;return h.scale=r||1,h.fontStack=s,h}static forImage(r){const s=new Dd;return s.imageName=r,s}}class Hc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,s){const h=new Hc;for(let m=0;m<r.sections.length;m++){const _=r.sections[m];_.image?h.addImageSection(_):h.addTextSection(_,s)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let s="";for(let h=0;h<r.length;h++){const m=r.charCodeAt(h+1)||null,_=r.charCodeAt(h-1)||null;s+=m&&bp(m)&&!jd[r[h+1]]||_&&bp(_)&&!jd[r[h-1]]||!jd[r[h]]?r[h]:jd[r[h]]}return s}(this.text)}trim(){let r=0;for(let h=0;h<this.text.length&&Dp[this.text.charCodeAt(h)];h++)r++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=r&&Dp[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)}substring(r,s){const h=new Hc;return h.text=this.text.substring(r,s),h.sectionIndex=this.sectionIndex.slice(r,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}addTextSection(r,s){this.text+=r.text,this.sections.push(Dd.forText(r.scale,r.fontStack||s));const h=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(h)}addImageSection(r){const s=r.image?r.image.name:"";if(s.length===0)return void _e("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Dd.forImage(s)),this.sectionIndex.push(this.sections.length-1)):_e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Lp(o,r,s,h,m,_,x,w,P,F,$,Y,ne,le,me){const we=Hc.fromFeature(o,m);let Oe;Y===p.ah.vertical&&we.verticalizePunctuation();const{processBidirectionalText:De,processStyledBidirectionalText:nt}=qi;if(De&&we.sections.length===1){Oe=[];const lt=De(we.toString(),Wy(we,F,_,r,h,le));for(const _t of lt){const Lt=new Hc;Lt.text=_t,Lt.sections=we.sections;for(let rn=0;rn<_t.length;rn++)Lt.sectionIndex.push(0);Oe.push(Lt)}}else if(nt){Oe=[];const lt=nt(we.text,we.sectionIndex,Wy(we,F,_,r,h,le));for(const _t of lt){const Lt=new Hc;Lt.text=_t[0],Lt.sectionIndex=_t[1],Lt.sections=we.sections,Oe.push(Lt)}}else Oe=function(lt,_t){const Lt=[],rn=lt.text;let Rt=0;for(const kt of _t)Lt.push(lt.substring(Rt,kt)),Rt=kt;return Rt<rn.length&&Lt.push(lt.substring(Rt,rn.length)),Lt}(we,Wy(we,F,_,r,h,le));const qe=[],Qe={positionedLines:qe,text:we.toString(),top:$[1],bottom:$[1],left:$[0],right:$[0],writingMode:Y,iconsInText:!1,verticalizable:!1};return function(lt,_t,Lt,rn,Rt,kt,Kt,$t,Bt,ft,Yt,Xt){let hn=0,Kn=Ld,Wn=0,Vr=0;const os=$t==="right"?1:$t==="left"?0:.5;let ai=0;for(const yr of Rt){yr.trim();const Hr=yr.getMaxScale(),_i=(Hr-1)*Br,li={positionedGlyphs:[],lineOffset:0};lt.positionedLines[ai]=li;const Fi=li.positionedGlyphs;let ui=0;if(!yr.length()){Kn+=kt,++ai;continue}for(let Ji=0;Ji<yr.length();Ji++){const Dn=yr.getSection(Ji),Jn=yr.getSectionIndex(Ji),ir=yr.getCharCode(Ji);let wo=0,cr=null,qc=null,ta=null,na=Br;const ss=!(Bt===p.ah.horizontal||!Yt&&!Sd(ir)||Yt&&(Dp[ir]||(Gr=ir,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Gr)))));if(Dn.imageName){const Do=rn[Dn.imageName];if(!Do)continue;ta=Dn.imageName,lt.iconsInText=lt.iconsInText||!0,qc=Do.paddedRect;const Kr=Do.displaySize;Dn.scale=Dn.scale*Br/Xt,cr={width:Kr[0],height:Kr[1],left:Yi,top:-Fw,advance:ss?Kr[1]:Kr[0]},wo=_i+(Br-Kr[1]*Dn.scale),na=cr.advance;const za=ss?Kr[0]*Dn.scale-Br*Hr:Kr[1]*Dn.scale-Br*Hr;za>0&&za>ui&&(ui=za)}else{const Do=Lt[Dn.fontStack],Kr=Do&&Do[ir];if(Kr&&Kr.rect)qc=Kr.rect,cr=Kr.metrics;else{const za=_t[Dn.fontStack],Gd=za&&za[ir];if(!Gd)continue;cr=Gd.metrics}wo=(Hr-Dn.scale)*Br}ss?(lt.verticalizable=!0,Fi.push({glyph:ir,imageName:ta,x:hn,y:Kn+wo,vertical:ss,scale:Dn.scale,fontStack:Dn.fontStack,sectionIndex:Jn,metrics:cr,rect:qc}),hn+=na*Dn.scale+ft):(Fi.push({glyph:ir,imageName:ta,x:hn,y:Kn+wo,vertical:ss,scale:Dn.scale,fontStack:Dn.fontStack,sectionIndex:Jn,metrics:cr,rect:qc}),hn+=cr.advance*Dn.scale+ft)}Fi.length!==0&&(Wn=Math.max(hn-ft,Wn),aM(Fi,0,Fi.length-1,os,ui)),hn=0;const Lo=kt*Hr+ui;li.lineOffset=Math.max(ui,_i),Kn+=Lo,Vr=Math.max(Lo,Vr),++ai}var Gr;const Mi=Kn-Ld,{horizontalAlign:ki,verticalAlign:zi}=Xy(Kt);(function(yr,Hr,_i,li,Fi,ui,Lo,Ji,Dn){const Jn=(Hr-_i)*Fi;let ir=0;ir=ui!==Lo?-Ji*li-Ld:(-li*Dn+.5)*Lo;for(const wo of yr)for(const cr of wo.positionedGlyphs)cr.x+=Jn,cr.y+=ir})(lt.positionedLines,os,ki,zi,Wn,Vr,kt,Mi,Rt.length),lt.top+=-zi*Mi,lt.bottom=lt.top+Mi,lt.left+=-ki*Wn,lt.right=lt.left+Wn}(Qe,r,s,h,Oe,x,w,P,Y,F,ne,me),!function(lt){for(const _t of lt)if(_t.positionedGlyphs.length!==0)return!1;return!0}(qe)&&Qe}const Dp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},iM={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},oM={40:!0};function jw(o,r,s,h,m,_){if(r.imageName){const x=h[r.imageName];return x?x.displaySize[0]*r.scale*Br/_+m:0}{const x=s[r.fontStack],w=x&&x[o];return w?w.metrics.advance*r.scale+m:0}}function Lw(o,r,s,h){const m=Math.pow(o-r,2);return h?o<r?m/2:2*m:m+Math.abs(s)*s}function sM(o,r,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),r!==41&&r!==65289||(h+=50),h}function Dw(o,r,s,h,m,_){let x=null,w=Lw(r,s,m,_);for(const P of h){const F=Lw(r-P.x,s,m,_)+P.badness;F<=w&&(x=P,w=F)}return{index:o,x:r,priorBreak:x,badness:w}}function Bw(o){return o?Bw(o.priorBreak).concat(o.index):[]}function Wy(o,r,s,h,m,_){if(!o)return[];const x=[],w=function(Y,ne,le,me,we,Oe){let De=0;for(let nt=0;nt<Y.length();nt++){const qe=Y.getSection(nt);De+=jw(Y.getCharCode(nt),qe,me,we,ne,Oe)}return De/Math.max(1,Math.ceil(De/le))}(o,r,s,h,m,_),P=o.text.indexOf("​")>=0;let F=0;for(let Y=0;Y<o.length();Y++){const ne=o.getSection(Y),le=o.getCharCode(Y);if(Dp[le]||(F+=jw(le,ne,h,m,r,_)),Y<o.length()-1){const me=!(($=le)<11904)&&(!!Pn["CJK Compatibility Forms"]($)||!!Pn["CJK Compatibility"]($)||!!Pn["CJK Strokes"]($)||!!Pn["CJK Symbols and Punctuation"]($)||!!Pn["Enclosed CJK Letters and Months"]($)||!!Pn["Halfwidth and Fullwidth Forms"]($)||!!Pn["Ideographic Description Characters"]($)||!!Pn["Vertical Forms"]($)||wp.test(String.fromCodePoint($)));(iM[le]||me||ne.imageName||Y!==o.length()-2&&oM[o.getCharCode(Y+1)])&&x.push(Dw(Y+1,F,w,x,sM(le,o.getCharCode(Y+1),me&&P),!1))}}var $;return Bw(Dw(o.length(),F,w,x,0,!0))}function Xy(o){let r=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function aM(o,r,s,h,m){if(!h&&!m)return;const _=o[s],x=(o[s].x+_.metrics.advance*_.scale)*h;for(let w=r;w<=s;w++)o[w].x-=x,o[w].y+=m}function lM(o,r,s){const{horizontalAlign:h,verticalAlign:m}=Xy(s),_=r[0]-o.displaySize[0]*h,x=r[1]-o.displaySize[1]*m;return{image:o,top:x,bottom:x+o.displaySize[1],left:_,right:_+o.displaySize[0]}}function Nw(o){var r,s;let h=o.left,m=o.top,_=o.right-h,x=o.bottom-m;const w=(r=o.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",P=(s=o.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",F=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(P==="proportional"){if(w==="stretchOnly"&&_/x<F||w==="proportional"){const $=Math.ceil(x*F);h*=$/_,_=$}}else if(w==="proportional"&&P==="stretchOnly"&&F!==0&&_/x>F){const $=Math.ceil(_/F);m*=$/x,x=$}return{x1:h,y1:m,x2:h+_,y2:m+x}}function Uw(o,r,s,h,m,_){const x=o.image;let w;if(x.content){const Oe=x.content,De=x.pixelRatio||1;w=[Oe[0]/De,Oe[1]/De,x.displaySize[0]-Oe[2]/De,x.displaySize[1]-Oe[3]/De]}const P=r.left*_,F=r.right*_;let $,Y,ne,le;s==="width"||s==="both"?(le=m[0]+P-h[3],Y=m[0]+F+h[1]):(le=m[0]+(P+F-x.displaySize[0])/2,Y=le+x.displaySize[0]);const me=r.top*_,we=r.bottom*_;return s==="height"||s==="both"?($=m[1]+me-h[0],ne=m[1]+we+h[2]):($=m[1]+(me+we-x.displaySize[1])/2,ne=$+x.displaySize[1]),{image:x,top:$,right:Y,bottom:ne,left:le,collisionPadding:w}}const Bd=255,ea=128,zl=Bd*ea;function $w(o,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new er(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=s;let _=0;for(;_<h.length&&h[_]<=o;)_++;_=Math.max(0,_-1);let x=_;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const w=h[_],P=h[x];return s.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:P,interpolationType:m}:{kind:"camera",minZoom:w,maxZoom:P,minSize:s.evaluate(new er(w)),maxSize:s.evaluate(new er(P)),interpolationType:m}}}function qy(o,r,s){let h="never";const m=o.get(r);return m?h=m:o.get(s)&&(h="always"),h}const uM=Ml.VectorTileFeature.types,cM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Bp(o,r,s,h,m,_,x,w,P,F,$,Y,ne){const le=w?Math.min(zl,Math.round(w[0])):0,me=w?Math.min(zl,Math.round(w[1])):0;o.emplaceBack(r,s,Math.round(32*h),Math.round(32*m),_,x,(le<<1)+(P?1:0),me,16*F,16*$,256*Y,256*ne)}function Ky(o,r,s){o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s)}function hM(o){for(const r of o.sections)if(Ey(r.text))return!0;return!1}class Yy{constructor(r){this.layoutVertexArray=new Oc,this.indexArray=new Oo,this.programConfigurations=r,this.segments=new An,this.dynamicLayoutVertexArray=new Id,this.opacityVertexArray=new _o,this.hasVisibleVertices=!1,this.placedSymbolArray=new tr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,s,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,UA.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,$A.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,cM,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ut("SymbolBuffers",Yy);class Jy{constructor(r,s,h){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new h,this.segments=new An,this.collisionVertexArray=new Js}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,VA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ut("CollisionBuffers",Jy);class Zc{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ky([]),this.placementViewportMatrix=ky([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$w(this.zoom,s["text-size"]),this.iconSizeData=$w(this.zoom,s["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=qy(h,"text-overlap","text-allow-overlap")!=="never"||qy(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>p.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new Yy(new Fu(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Yy(new Fu(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new nr,this.lineVertexArray=new ri,this.symbolInstances=new In,this.textAnchorOffsets=new rr}calculateGlyphDependencies(r,s,h,m,_){for(let x=0;x<r.length;x++)if(s[r.charCodeAt(x)]=!0,(h||m)&&_){const w=jd[r.charAt(x)];w&&(s[w.charCodeAt(0)]=!0)}}populate(r,s,h){const m=this.layers[0],_=m.layout,x=_.get("text-font"),w=_.get("text-field"),P=_.get("icon-image"),F=(w.value.kind!=="constant"||w.value.value instanceof xr&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),$=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,Y=_.get("symbol-sort-key");if(this.features=[],!F&&!$)return;const ne=s.iconDependencies,le=s.glyphDependencies,me=s.availableImages,we=new er(this.zoom);for(const{feature:Oe,id:De,index:nt,sourceLayerIndex:qe}of r){const Qe=m._featureFilter.needGeometry,lt=Ru(Oe,Qe);if(!m._featureFilter.filter(we,lt,h))continue;let _t,Lt;if(Qe||(lt.geometry=Ou(Oe)),F){const Rt=m.getValueAndResolveTokens("text-field",lt,h,me),kt=xr.factory(Rt),Kt=this.hasRTLText=this.hasRTLText||hM(kt);(!Kt||qi.getRTLTextPluginStatus()==="unavailable"||Kt&&qi.isParsed())&&(_t=HA(kt,m,lt))}if($){const Rt=m.getValueAndResolveTokens("icon-image",lt,h,me);Lt=Rt instanceof pi?Rt:pi.fromString(Rt)}if(!_t&&!Lt)continue;const rn=this.sortFeaturesByKey?Y.evaluate(lt,{},h):void 0;if(this.features.push({id:De,text:_t,icon:Lt,index:nt,sourceLayerIndex:qe,geometry:lt.geometry,properties:Oe.properties,type:uM[Oe.type],sortKey:rn}),Lt&&(ne[Lt.name]=!0),_t){const Rt=x.evaluate(lt,{},h).join(","),kt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(p.ah.vertical)>=0;for(const Kt of _t.sections)if(Kt.image)ne[Kt.image.name]=!0;else{const $t=wd(_t.toString()),Bt=Kt.fontStack||Rt,ft=le[Bt]=le[Bt]||{};this.calculateGlyphDependencies(Kt.text,ft,kt,this.allowVerticalPlacement,$t)}}}_.get("symbol-placement")==="line"&&(this.features=function(Oe){const De={},nt={},qe=[];let Qe=0;function lt(Rt){qe.push(Oe[Rt]),Qe++}function _t(Rt,kt,Kt){const $t=nt[Rt];return delete nt[Rt],nt[kt]=$t,qe[$t].geometry[0].pop(),qe[$t].geometry[0]=qe[$t].geometry[0].concat(Kt[0]),$t}function Lt(Rt,kt,Kt){const $t=De[kt];return delete De[kt],De[Rt]=$t,qe[$t].geometry[0].shift(),qe[$t].geometry[0]=Kt[0].concat(qe[$t].geometry[0]),$t}function rn(Rt,kt,Kt){const $t=Kt?kt[0][kt[0].length-1]:kt[0][0];return`${Rt}:${$t.x}:${$t.y}`}for(let Rt=0;Rt<Oe.length;Rt++){const kt=Oe[Rt],Kt=kt.geometry,$t=kt.text?kt.text.toString():null;if(!$t){lt(Rt);continue}const Bt=rn($t,Kt),ft=rn($t,Kt,!0);if(Bt in nt&&ft in De&&nt[Bt]!==De[ft]){const Yt=Lt(Bt,ft,Kt),Xt=_t(Bt,ft,qe[Yt].geometry);delete De[Bt],delete nt[ft],nt[rn($t,qe[Xt].geometry,!0)]=Xt,qe[Yt].geometry=null}else Bt in nt?_t(Bt,ft,Kt):ft in De?Lt(Bt,ft,Kt):(lt(Rt),De[Bt]=Qe-1,nt[ft]=Qe-1)}return qe.filter(Rt=>Rt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Oe,De)=>Oe.sortKey-De.sortKey)}update(r,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(r,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const h=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(s[r.segment+1]),_=r.dist(s[r.segment]);const x={};for(let w=r.segment+1;w<s.length;w++)x[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:m},w<s.length-1&&(m+=s[w+1].dist(s[w]));for(let w=r.segment||0;w>=0;w--)x[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:_},w>0&&(_+=s[w-1].dist(s[w]));for(let w=0;w<s.length;w++){const P=x[w];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(r,s,h,m,_,x,w,P,F,$,Y,ne){const le=r.indexArray,me=r.layoutVertexArray,we=r.segments.prepareSegment(4*s.length,me,le,this.canOverlap?x.sortKey:void 0),Oe=this.glyphOffsetArray.length,De=we.vertexLength,nt=this.allowVerticalPlacement&&w===p.ah.vertical?Math.PI/2:0,qe=x.text&&x.text.sections;for(let Qe=0;Qe<s.length;Qe++){const{tl:lt,tr:_t,bl:Lt,br:rn,tex:Rt,pixelOffsetTL:kt,pixelOffsetBR:Kt,minFontScaleX:$t,minFontScaleY:Bt,glyphOffset:ft,isSDF:Yt,sectionIndex:Xt}=s[Qe],hn=we.vertexLength,Kn=ft[1];Bp(me,P.x,P.y,lt.x,Kn+lt.y,Rt.x,Rt.y,h,Yt,kt.x,kt.y,$t,Bt),Bp(me,P.x,P.y,_t.x,Kn+_t.y,Rt.x+Rt.w,Rt.y,h,Yt,Kt.x,kt.y,$t,Bt),Bp(me,P.x,P.y,Lt.x,Kn+Lt.y,Rt.x,Rt.y+Rt.h,h,Yt,kt.x,Kt.y,$t,Bt),Bp(me,P.x,P.y,rn.x,Kn+rn.y,Rt.x+Rt.w,Rt.y+Rt.h,h,Yt,Kt.x,Kt.y,$t,Bt),Ky(r.dynamicLayoutVertexArray,P,nt),le.emplaceBack(hn,hn+1,hn+2),le.emplaceBack(hn+1,hn+2,hn+3),we.vertexLength+=4,we.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ft[0]),Qe!==s.length-1&&Xt===s[Qe+1].sectionIndex||r.programConfigurations.populatePaintArrays(me.length,x,x.index,{},ne,qe&&qe[Xt])}r.placedSymbolArray.emplaceBack(P.x,P.y,Oe,this.glyphOffsetArray.length-Oe,De,F,$,P.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],w,0,!1,0,Y)}_addCollisionDebugVertex(r,s,h,m,_,x){return s.emplaceBack(0,0),r.emplaceBack(h.x,h.y,m,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,s,h,m,_,x,w){const P=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),F=P.vertexLength,$=_.layoutVertexArray,Y=_.collisionVertexArray,ne=w.anchorX,le=w.anchorY;this._addCollisionDebugVertex($,Y,x,ne,le,new b(r,s)),this._addCollisionDebugVertex($,Y,x,ne,le,new b(h,s)),this._addCollisionDebugVertex($,Y,x,ne,le,new b(h,m)),this._addCollisionDebugVertex($,Y,x,ne,le,new b(r,m)),P.vertexLength+=4;const me=_.indexArray;me.emplaceBack(F,F+1),me.emplaceBack(F+1,F+2),me.emplaceBack(F+2,F+3),me.emplaceBack(F+3,F),P.primitiveLength+=4}addDebugCollisionBoxes(r,s,h,m){for(let _=r;_<s;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Jy(xo,Tw.members,qr),this.iconCollisionBox=new Jy(xo,Tw.members,qr);for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(r,s,h,m,_,x,w,P,F){const $={};for(let Y=s;Y<h;Y++){const ne=r.get(Y);$.textBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},$.textFeatureIndex=ne.featureIndex;break}for(let Y=m;Y<_;Y++){const ne=r.get(Y);$.verticalTextBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},$.verticalTextFeatureIndex=ne.featureIndex;break}for(let Y=x;Y<w;Y++){const ne=r.get(Y);$.iconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},$.iconFeatureIndex=ne.featureIndex;break}for(let Y=P;Y<F;Y++){const ne=r.get(Y);$.verticalIconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},$.verticalIconFeatureIndex=ne.featureIndex;break}return $}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,s){const h=r.placedSymbolArray.get(s),m=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<m;_+=4)r.indexArray.emplaceBack(_,_+1,_+2),r.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),h=Math.cos(r),m=[],_=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const P=this.symbolInstances.get(w);m.push(0|Math.round(s*P.anchorX+h*P.anchorY)),_.push(P.featureIndex)}return x.sort((w,P)=>m[w]-m[P]||_[P]-_[w]),x}addToSortKeyRanges(r,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,_,x)=>{m>=0&&x.indexOf(m)===_&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Vw,Gw;Ut("SymbolBucket",Zc,{omit:["layers","collisionBoxArray","features","compareText"]}),Zc.MAX_GLYPHS=65535,Zc.addDynamicAttributes=Ky;var Qy={get paint(){return Gw=Gw||new v({"icon-opacity":new sn(et.paint_symbol["icon-opacity"]),"icon-color":new sn(et.paint_symbol["icon-color"]),"icon-halo-color":new sn(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new sn(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sn(et.paint_symbol["icon-halo-blur"]),"icon-translate":new Zt(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zt(et.paint_symbol["icon-translate-anchor"]),"text-opacity":new sn(et.paint_symbol["text-opacity"]),"text-color":new sn(et.paint_symbol["text-color"],{runtimeType:mn,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new sn(et.paint_symbol["text-halo-color"]),"text-halo-width":new sn(et.paint_symbol["text-halo-width"]),"text-halo-blur":new sn(et.paint_symbol["text-halo-blur"]),"text-translate":new Zt(et.paint_symbol["text-translate"]),"text-translate-anchor":new Zt(et.paint_symbol["text-translate-anchor"])})},get layout(){return Vw=Vw||new v({"symbol-placement":new Zt(et.layout_symbol["symbol-placement"]),"symbol-spacing":new Zt(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zt(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sn(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zt(et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zt(et.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Zt(et.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Zt(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zt(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zt(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new sn(et.layout_symbol["icon-size"]),"icon-text-fit":new Zt(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zt(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new sn(et.layout_symbol["icon-image"]),"icon-rotate":new sn(et.layout_symbol["icon-rotate"]),"icon-padding":new sn(et.layout_symbol["icon-padding"]),"icon-keep-upright":new Zt(et.layout_symbol["icon-keep-upright"]),"icon-offset":new sn(et.layout_symbol["icon-offset"]),"icon-anchor":new sn(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zt(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zt(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zt(et.layout_symbol["text-rotation-alignment"]),"text-field":new sn(et.layout_symbol["text-field"]),"text-font":new sn(et.layout_symbol["text-font"]),"text-size":new sn(et.layout_symbol["text-size"]),"text-max-width":new sn(et.layout_symbol["text-max-width"]),"text-line-height":new Zt(et.layout_symbol["text-line-height"]),"text-letter-spacing":new sn(et.layout_symbol["text-letter-spacing"]),"text-justify":new sn(et.layout_symbol["text-justify"]),"text-radial-offset":new sn(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zt(et.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new sn(et.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new sn(et.layout_symbol["text-anchor"]),"text-max-angle":new Zt(et.layout_symbol["text-max-angle"]),"text-writing-mode":new Zt(et.layout_symbol["text-writing-mode"]),"text-rotate":new sn(et.layout_symbol["text-rotate"]),"text-padding":new Zt(et.layout_symbol["text-padding"]),"text-keep-upright":new Zt(et.layout_symbol["text-keep-upright"]),"text-transform":new sn(et.layout_symbol["text-transform"]),"text-offset":new sn(et.layout_symbol["text-offset"]),"text-allow-overlap":new Zt(et.layout_symbol["text-allow-overlap"]),"text-overlap":new Zt(et.layout_symbol["text-overlap"]),"text-ignore-placement":new Zt(et.layout_symbol["text-ignore-placement"]),"text-optional":new Zt(et.layout_symbol["text-optional"])})}};class Hw{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:rt,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ut("FormatSectionOverride",Hw,{omit:["defaultValue"]});class Np extends a{constructor(r){super(r,Qy)}recalculate(r,s){if(super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const _ of h)m.indexOf(_)<0&&m.push(_);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,s,h,m){const _=this.layout.get(r).evaluate(s,{},h,m),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||ut(x.value)||!_?_:function(w,P){return P.replace(/{([^{}]+)}/g,(F,$)=>w&&$ in w?String(w[$]):"")}(s.properties,_)}createBucket(r){return new Zc(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Qy.paint.overridableProperties){if(!Np.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),h=new Hw(s),m=new Ue(h,s.property.specification);let _=null;_=s.value.kind==="constant"||s.value.kind==="source"?new bt("source",m):new Nt("composite",m,s.value.zoomStops),this.paint._values[r]=new rs(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Np.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const h=r.get("text-field"),m=Qy.paint.properties[s];let _=!1;const x=w=>{for(const P of w)if(m.overrides&&m.overrides.hasOverride(P))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof xr)x(h.value.value.sections);else if(h.value.kind==="source"){const w=F=>{_||(F instanceof Ni&&pr(F.value)===Qr?x(F.value.sections):F instanceof sl?x(F.sections):F.eachChild(w))},P=h.value;P._styleExpression&&w(P._styleExpression.expression)}return _}}let Zw;var dM={get paint(){return Zw=Zw||new v({"background-color":new Zt(et.paint_background["background-color"]),"background-pattern":new zc(et.paint_background["background-pattern"]),"background-opacity":new Zt(et.paint_background["background-opacity"])})}};class fM extends a{constructor(r){super(r,dM)}}let Ww;var pM={get paint(){return Ww=Ww||new v({"raster-opacity":new Zt(et.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zt(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zt(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zt(et.paint_raster["raster-brightness-max"]),"raster-saturation":new Zt(et.paint_raster["raster-saturation"]),"raster-contrast":new Zt(et.paint_raster["raster-contrast"]),"raster-resampling":new Zt(et.paint_raster["raster-resampling"]),"raster-fade-duration":new Zt(et.paint_raster["raster-fade-duration"])})}};class mM extends a{constructor(r){super(r,pM)}}class gM extends a{constructor(r){super(r,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class yM{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const e0=63710088e-1;class Fl{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Fl(H(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,h=this.lat*s,m=r.lat*s,_=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((r.lng-this.lng)*s);return e0*Math.acos(Math.min(_,1))}static convert(r){if(r instanceof Fl)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Fl(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Fl(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Xw=2*Math.PI*e0;function qw(o){return Xw*Math.cos(o*Math.PI/180)}function Kw(o){return(180+o)/360}function Yw(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Jw(o,r){return o/qw(r)}function t0(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Nd{constructor(r,s,h=0){this.x=+r,this.y=+s,this.z=+h}static fromLngLat(r,s=0){const h=Fl.convert(r);return new Nd(Kw(h.lng),Yw(h.lat),Jw(s,h.lat))}toLngLat(){return new Fl(360*this.x-180,t0(this.y))}toAltitude(){return this.z*qw(t0(this.y))}meterInMercatorCoordinateUnits(){return 1/Xw*(r=t0(this.y),1/Math.cos(r*Math.PI/180));var r}}function Qw(o,r,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,r*h-2*Math.PI*6378137/2]}class n0{constructor(r,s,h){if(!function(m,_,x){return!(m<0||m>25||x<0||x>=Math.pow(2,m)||_<0||_>=Math.pow(2,m))}(r,s,h))throw new Error(`x=${s}, y=${h}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=s,this.y=h,this.key=Ud(0,r,r,s,h)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s,h){const m=(x=this.y,w=this.z,P=Qw(256*(_=this.x),256*(x=Math.pow(2,w)-x-1),w),F=Qw(256*(_+1),256*(x+1),w),P[0]+","+P[1]+","+F[0]+","+F[1]);var _,x,w,P,F;const $=function(Y,ne,le){let me,we="";for(let Oe=Y;Oe>0;Oe--)me=1<<Oe-1,we+=(ne&me?1:0)+(le&me?2:0);return we}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,$).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const s=this.z-r.z;return s>0&&r.x===this.x>>s&&r.y===this.y>>s}getTilePoint(r){const s=Math.pow(2,this.z);return new b((r.x*s-this.x)*zr,(r.y*s-this.y)*zr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class eb{constructor(r,s){this.wrap=r,this.canonical=s,this.key=Ud(r,s.z,s.z,s.x,s.y)}}class jo{constructor(r,s,h,m,_){if(r<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${h}`);this.overscaledZ=r,this.wrap=s,this.canonical=new n0(h,+m,+_),this.key=Ud(s,r,h,m,_)}clone(){return new jo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-r;return r>this.canonical.z?new jo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new jo(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(r,s){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-r;return r>this.canonical.z?Ud(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y):Ud(this.wrap*+s,r,r,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new jo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new jo(s,this.wrap,s,h,m),new jo(s,this.wrap,s,h+1,m),new jo(s,this.wrap,s,h,m+1),new jo(s,this.wrap,s,h+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new jo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new jo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new eb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Nd(r.x-this.wrap,r.y))}}function Ud(o,r,s,h,m){(o*=2)<0&&(o=-1*o-1);const _=1<<s;return(_*_*o+_*m+h).toString(36)+s.toString(36)+r.toString(36)}Ut("CanonicalTileID",n0),Ut("OverscaledTileID",jo,{omit:["posMatrix"]});class tb{constructor(r,s,h,m=1,_=1,x=1,w=0){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void _e(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const P=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=_,this.blueFactor=x,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let F=0;F<P;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(P,F)]=this.data[this._idx(P-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,P)]=this.data[this._idx(F,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let F=0;F<P;F++)for(let $=0;$<P;$++){const Y=this.get(F,$);Y>this.max&&(this.max=Y),Y<this.min&&(this.min=Y)}}get(r,s){const h=new Uint8Array(this.data.buffer),m=4*this._idx(r,s);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)}unpack(r,s,h){return r*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Ro({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,s,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,_=s*this.dim+this.dim,x=h*this.dim,w=h*this.dim+this.dim;switch(s){case-1:m=_-1;break;case 1:_=m+1}switch(h){case-1:x=w-1;break;case 1:w=x+1}const P=-s*this.dim,F=-h*this.dim;for(let $=x;$<w;$++)for(let Y=m;Y<_;Y++)this.data[this._idx(Y,$)]=r.data[this._idx(Y+P,$+F)]}}Ut("DEMData",tb);class nb{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const h=r[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class rb{constructor(r,s,h,m,_){this.type="Feature",this._vectorTileFeature=r,r._z=s,r._x=h,r._y=m,this.properties=r.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(r[s]=this[s]);return r}}class ib{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new _l(zr,16,0),this.grid3D=new _l(zr,16,0),this.featureIndexArray=new yi,this.promoteId=s}insert(r,s,h,m,_,x){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,_);const P=x?this.grid3D:this.grid;for(let F=0;F<s.length;F++){const $=s[F],Y=[1/0,1/0,-1/0,-1/0];for(let ne=0;ne<$.length;ne++){const le=$[ne];Y[0]=Math.min(Y[0],le.x),Y[1]=Math.min(Y[1],le.y),Y[2]=Math.max(Y[2],le.x),Y[3]=Math.max(Y[3],le.y)}Y[0]<zr&&Y[1]<zr&&Y[2]>=0&&Y[3]>=0&&P.insert(w,Y[0],Y[1],Y[2],Y[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ml.VectorTile(new Gy(this.rawTileData)).layers,this.sourceLayerCoder=new nb(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,s,h,m){this.loadVTLayers();const _=r.params||{},x=zr/r.tileSize/r.scale,w=mr(_.filter),P=r.queryGeometry,F=r.queryPadding*x,$=sb(P),Y=this.grid.query($.minX-F,$.minY-F,$.maxX+F,$.maxY+F),ne=sb(r.cameraQueryGeometry),le=this.grid3D.query(ne.minX-F,ne.minY-F,ne.maxX+F,ne.maxY+F,(Oe,De,nt,qe)=>function(Qe,lt,_t,Lt,rn){for(const kt of Qe)if(lt<=kt.x&&_t<=kt.y&&Lt>=kt.x&&rn>=kt.y)return!0;const Rt=[new b(lt,_t),new b(lt,rn),new b(Lt,rn),new b(Lt,_t)];if(Qe.length>2){for(const kt of Rt)if(Bc(Qe,kt))return!0}for(let kt=0;kt<Qe.length-1;kt++)if(YP(Qe[kt],Qe[kt+1],Rt))return!0;return!1}(r.cameraQueryGeometry,Oe-F,De-F,nt+F,qe+F));for(const Oe of le)Y.push(Oe);Y.sort(vM);const me={};let we;for(let Oe=0;Oe<Y.length;Oe++){const De=Y[Oe];if(De===we)continue;we=De;const nt=this.featureIndexArray.get(De);let qe=null;this.loadMatchingFeature(me,nt.bucketIndex,nt.sourceLayerIndex,nt.featureIndex,w,_.layers,_.availableImages,s,h,m,(Qe,lt,_t)=>(qe||(qe=Ou(Qe)),lt.queryIntersectsFeature(P,Qe,_t,qe,this.z,r.transform,x,r.pixelPosMatrix)))}return me}loadMatchingFeature(r,s,h,m,_,x,w,P,F,$,Y){const ne=this.bucketLayerIDs[s];if(x&&!function(Oe,De){for(let nt=0;nt<Oe.length;nt++)if(De.indexOf(Oe[nt])>=0)return!0;return!1}(x,ne))return;const le=this.sourceLayerCoder.decode(h),me=this.vtLayers[le].feature(m);if(_.needGeometry){const Oe=Ru(me,!0);if(!_.filter(new er(this.tileID.overscaledZ),Oe,this.tileID.canonical))return}else if(!_.filter(new er(this.tileID.overscaledZ),me))return;const we=this.getId(me,le);for(let Oe=0;Oe<ne.length;Oe++){const De=ne[Oe];if(x&&x.indexOf(De)<0)continue;const nt=P[De];if(!nt)continue;let qe={};we&&$&&(qe=$.getState(nt.sourceLayer||"_geojsonTileLayer",we));const Qe=T({},F[De]);Qe.paint=ob(Qe.paint,nt.paint,me,qe,w),Qe.layout=ob(Qe.layout,nt.layout,me,qe,w);const lt=!Y||Y(me,nt,qe);if(!lt)continue;const _t=new rb(me,this.z,this.x,this.y,we);_t.layer=Qe;let Lt=r[De];Lt===void 0&&(Lt=r[De]=[]),Lt.push({featureIndex:m,feature:_t,intersectionZ:lt})}}lookupSymbolFeatures(r,s,h,m,_,x,w,P){const F={};this.loadVTLayers();const $=mr(_);for(const Y of r)this.loadMatchingFeature(F,h,m,Y,$,x,w,P,s);return F}hasLayer(r){for(const s of this.bucketLayerIDs)for(const h of s)if(r===h)return!0;return!1}getId(r,s){let h=r.id;return this.promoteId&&(h=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function ob(o,r,s,h,m){return D(o,(_,x)=>{const w=r instanceof Mu?r.get(x):null;return w&&w.evaluate?w.evaluate(s,h,m):w})}function sb(o){let r=1/0,s=1/0,h=-1/0,m=-1/0;for(const _ of o)r=Math.min(r,_.x),s=Math.min(s,_.y),h=Math.max(h,_.x),m=Math.max(m,_.y);return{minX:r,minY:s,maxX:h,maxY:m}}function vM(o,r){return r-o}function ab(o,r,s,h,m){const _=[];for(let x=0;x<o.length;x++){const w=o[x];let P;for(let F=0;F<w.length-1;F++){let $=w[F],Y=w[F+1];$.x<r&&Y.x<r||($.x<r?$=new b(r,$.y+(r-$.x)/(Y.x-$.x)*(Y.y-$.y))._round():Y.x<r&&(Y=new b(r,$.y+(r-$.x)/(Y.x-$.x)*(Y.y-$.y))._round()),$.y<s&&Y.y<s||($.y<s?$=new b($.x+(s-$.y)/(Y.y-$.y)*(Y.x-$.x),s)._round():Y.y<s&&(Y=new b($.x+(s-$.y)/(Y.y-$.y)*(Y.x-$.x),s)._round()),$.x>=h&&Y.x>=h||($.x>=h?$=new b(h,$.y+(h-$.x)/(Y.x-$.x)*(Y.y-$.y))._round():Y.x>=h&&(Y=new b(h,$.y+(h-$.x)/(Y.x-$.x)*(Y.y-$.y))._round()),$.y>=m&&Y.y>=m||($.y>=m?$=new b($.x+(m-$.y)/(Y.y-$.y)*(Y.x-$.x),m)._round():Y.y>=m&&(Y=new b($.x+(m-$.y)/(Y.y-$.y)*(Y.x-$.x),m)._round()),P&&$.equals(P[P.length-1])||(P=[$],_.push(P)),P.push(Y)))))}}return _}Ut("FeatureIndex",ib,{omit:["rawTileData","sourceLayerCoder"]});class Ol extends b{constructor(r,s,h,m){super(r,s),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new Ol(this.x,this.y,this.angle,this.segment)}}function lb(o,r,s,h,m){if(r.segment===void 0||s===0)return!0;let _=r,x=r.segment+1,w=0;for(;w>-s/2;){if(x--,x<0)return!1;w-=o[x].dist(_),_=o[x]}w+=o[x].dist(o[x+1]),x++;const P=[];let F=0;for(;w<s/2;){const $=o[x],Y=o[x+1];if(!Y)return!1;let ne=o[x-1].angleTo($)-$.angleTo(Y);for(ne=Math.abs((ne+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:w,angleDelta:ne}),F+=ne;w-P[0].distance>h;)F-=P.shift().angleDelta;if(F>m)return!1;x++,w+=$.dist(Y)}return!0}function ub(o){let r=0;for(let s=0;s<o.length-1;s++)r+=o[s].dist(o[s+1]);return r}function cb(o,r,s){return o?.6*r*s:0}function hb(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function _M(o,r,s,h,m,_){const x=cb(s,m,_),w=hb(s,h)*_;let P=0;const F=ub(o)/2;for(let $=0;$<o.length-1;$++){const Y=o[$],ne=o[$+1],le=Y.dist(ne);if(P+le>F){const me=(F-P)/le,we=ei.number(Y.x,ne.x,me),Oe=ei.number(Y.y,ne.y,me),De=new Ol(we,Oe,ne.angleTo(Y),$);return De._round(),!x||lb(o,De,w,x,r)?De:void 0}P+=le}}function xM(o,r,s,h,m,_,x,w,P){const F=cb(h,_,x),$=hb(h,m),Y=$*x,ne=o[0].x===0||o[0].x===P||o[0].y===0||o[0].y===P;return r-Y<r/4&&(r=Y+r/4),db(o,ne?r/2*w%r:($/2+2*_)*x*w%r,r,F,s,Y,ne,!1,P)}function db(o,r,s,h,m,_,x,w,P){const F=_/2,$=ub(o);let Y=0,ne=r-s,le=[];for(let me=0;me<o.length-1;me++){const we=o[me],Oe=o[me+1],De=we.dist(Oe),nt=Oe.angleTo(we);for(;ne+s<Y+De;){ne+=s;const qe=(ne-Y)/De,Qe=ei.number(we.x,Oe.x,qe),lt=ei.number(we.y,Oe.y,qe);if(Qe>=0&&Qe<P&&lt>=0&&lt<P&&ne-F>=0&&ne+F<=$){const _t=new Ol(Qe,lt,nt,me);_t._round(),h&&!lb(o,_t,_,h,m)||le.push(_t)}}Y+=De}return w||le.length||x||(le=db(o,Y/2,s,h,m,_,x,!0,P)),le}Ut("Anchor",Ol);const Wc=Yi;function fb(o,r,s,h){const m=[],_=o.image,x=_.pixelRatio,w=_.paddedRect.w-2*Wc,P=_.paddedRect.h-2*Wc;let F={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const $=_.stretchX||[[0,w]],Y=_.stretchY||[[0,P]],ne=(ft,Yt)=>ft+Yt[1]-Yt[0],le=$.reduce(ne,0),me=Y.reduce(ne,0),we=w-le,Oe=P-me;let De=0,nt=le,qe=0,Qe=me,lt=0,_t=we,Lt=0,rn=Oe;if(_.content&&h){const ft=_.content,Yt=ft[2]-ft[0],Xt=ft[3]-ft[1];(_.textFitWidth||_.textFitHeight)&&(F=Nw(o)),De=Up($,0,ft[0]),qe=Up(Y,0,ft[1]),nt=Up($,ft[0],ft[2]),Qe=Up(Y,ft[1],ft[3]),lt=ft[0]-De,Lt=ft[1]-qe,_t=Yt-nt,rn=Xt-Qe}const Rt=F.x1,kt=F.y1,Kt=F.x2-Rt,$t=F.y2-kt,Bt=(ft,Yt,Xt,hn)=>{const Kn=$p(ft.stretch-De,nt,Kt,Rt),Wn=Vp(ft.fixed-lt,_t,ft.stretch,le),Vr=$p(Yt.stretch-qe,Qe,$t,kt),os=Vp(Yt.fixed-Lt,rn,Yt.stretch,me),ai=$p(Xt.stretch-De,nt,Kt,Rt),Gr=Vp(Xt.fixed-lt,_t,Xt.stretch,le),Mi=$p(hn.stretch-qe,Qe,$t,kt),ki=Vp(hn.fixed-Lt,rn,hn.stretch,me),zi=new b(Kn,Vr),yr=new b(ai,Vr),Hr=new b(ai,Mi),_i=new b(Kn,Mi),li=new b(Wn/x,os/x),Fi=new b(Gr/x,ki/x),ui=r*Math.PI/180;if(ui){const Dn=Math.sin(ui),Jn=Math.cos(ui),ir=[Jn,-Dn,Dn,Jn];zi._matMult(ir),yr._matMult(ir),_i._matMult(ir),Hr._matMult(ir)}const Lo=ft.stretch+ft.fixed,Ji=Yt.stretch+Yt.fixed;return{tl:zi,tr:yr,bl:_i,br:Hr,tex:{x:_.paddedRect.x+Wc+Lo,y:_.paddedRect.y+Wc+Ji,w:Xt.stretch+Xt.fixed-Lo,h:hn.stretch+hn.fixed-Ji},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:li,pixelOffsetBR:Fi,minFontScaleX:_t/x/Kt,minFontScaleY:rn/x/$t,isSDF:s}};if(h&&(_.stretchX||_.stretchY)){const ft=pb($,we,le),Yt=pb(Y,Oe,me);for(let Xt=0;Xt<ft.length-1;Xt++){const hn=ft[Xt],Kn=ft[Xt+1];for(let Wn=0;Wn<Yt.length-1;Wn++)m.push(Bt(hn,Yt[Wn],Kn,Yt[Wn+1]))}}else m.push(Bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:P+1}));return m}function Up(o,r,s){let h=0;for(const m of o)h+=Math.max(r,Math.min(s,m[1]))-Math.max(r,Math.min(s,m[0]));return h}function pb(o,r,s){const h=[{fixed:-Wc,stretch:0}];for(const[m,_]of o){const x=h[h.length-1];h.push({fixed:m-x.stretch,stretch:x.stretch}),h.push({fixed:m-x.stretch,stretch:x.stretch+(_-m)})}return h.push({fixed:r+Wc,stretch:s}),h}function $p(o,r,s,h){return o/r*s+h}function Vp(o,r,s,h){return o-r*s/h}class Gp{constructor(r,s,h,m,_,x,w,P,F,$){var Y;if(this.boxStartIndex=r.length,F){let ne=x.top,le=x.bottom;const me=x.collisionPadding;me&&(ne-=me[1],le+=me[3]);let we=le-ne;we>0&&(we=Math.max(10,we),this.circleDiameter=we)}else{const ne=!((Y=x.image)===null||Y===void 0)&&Y.content&&(x.image.textFitWidth||x.image.textFitHeight)?Nw(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};ne.y1=ne.y1*w-P[0],ne.y2=ne.y2*w+P[2],ne.x1=ne.x1*w-P[3],ne.x2=ne.x2*w+P[1];const le=x.collisionPadding;if(le&&(ne.x1-=le[0]*w,ne.y1-=le[1]*w,ne.x2+=le[2]*w,ne.y2+=le[3]*w),$){const me=new b(ne.x1,ne.y1),we=new b(ne.x2,ne.y1),Oe=new b(ne.x1,ne.y2),De=new b(ne.x2,ne.y2),nt=$*Math.PI/180;me._rotate(nt),we._rotate(nt),Oe._rotate(nt),De._rotate(nt),ne.x1=Math.min(me.x,we.x,Oe.x,De.x),ne.x2=Math.max(me.x,we.x,Oe.x,De.x),ne.y1=Math.min(me.y,we.y,Oe.y,De.y),ne.y2=Math.max(me.y,we.y,Oe.y,De.y)}r.emplaceBack(s.x,s.y,ne.x1,ne.y1,ne.x2,ne.y2,h,m,_)}this.boxEndIndex=r.length}}class wM{constructor(r=[],s=(h,m)=>h<m?-1:h>m?1:0){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:h}=this,m=s[r];for(;r>0;){const _=r-1>>1,x=s[_];if(h(m,x)>=0)break;s[r]=x,r=_}s[r]=m}_down(r){const{data:s,compare:h}=this,m=this.length>>1,_=s[r];for(;r<m;){let x=1+(r<<1);const w=x+1;if(w<this.length&&h(s[w],s[x])<0&&(x=w),h(s[x],_)>=0)break;s[r]=s[x],r=x}s[r]=_}}function bM(o,r=1,s=!1){let h=1/0,m=1/0,_=-1/0,x=-1/0;const w=o[0];for(let le=0;le<w.length;le++){const me=w[le];(!le||me.x<h)&&(h=me.x),(!le||me.y<m)&&(m=me.y),(!le||me.x>_)&&(_=me.x),(!le||me.y>x)&&(x=me.y)}const P=Math.min(_-h,x-m);let F=P/2;const $=new wM([],SM);if(P===0)return new b(h,m);for(let le=h;le<_;le+=P)for(let me=m;me<x;me+=P)$.push(new Xc(le+F,me+F,F,o));let Y=function(le){let me=0,we=0,Oe=0;const De=le[0];for(let nt=0,qe=De.length,Qe=qe-1;nt<qe;Qe=nt++){const lt=De[nt],_t=De[Qe],Lt=lt.x*_t.y-_t.x*lt.y;we+=(lt.x+_t.x)*Lt,Oe+=(lt.y+_t.y)*Lt,me+=3*Lt}return new Xc(we/me,Oe/me,0,le)}(o),ne=$.length;for(;$.length;){const le=$.pop();(le.d>Y.d||!Y.d)&&(Y=le,s&&console.log("found best %d after %d probes",Math.round(1e4*le.d)/1e4,ne)),le.max-Y.d<=r||(F=le.h/2,$.push(new Xc(le.p.x-F,le.p.y-F,F,o)),$.push(new Xc(le.p.x+F,le.p.y-F,F,o)),$.push(new Xc(le.p.x-F,le.p.y+F,F,o)),$.push(new Xc(le.p.x+F,le.p.y+F,F,o)),ne+=4)}return s&&(console.log(`num probes: ${ne}`),console.log(`best distance: ${Y.d}`)),Y.p}function SM(o,r){return r.max-o.max}function Xc(o,r,s,h){this.p=new b(o,r),this.h=s,this.d=function(m,_){let x=!1,w=1/0;for(let P=0;P<_.length;P++){const F=_[P];for(let $=0,Y=F.length,ne=Y-1;$<Y;ne=$++){const le=F[$],me=F[ne];le.y>m.y!=me.y>m.y&&m.x<(me.x-le.x)*(m.y-le.y)/(me.y-le.y)+le.x&&(x=!x),w=Math.min(w,Yx(m,le,me))}}return(x?1:-1)*Math.sqrt(w)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var si;p.aq=void 0,(si=p.aq||(p.aq={}))[si.center=1]="center",si[si.left=2]="left",si[si.right=3]="right",si[si.top=4]="top",si[si.bottom=5]="bottom",si[si["top-left"]=6]="top-left",si[si["top-right"]=7]="top-right",si[si["bottom-left"]=8]="bottom-left",si[si["bottom-right"]=9]="bottom-right";const Rl=7,r0=Number.POSITIVE_INFINITY;function mb(o,r){return r[1]!==r0?function(s,h,m){let _=0,x=0;switch(h=Math.abs(h),m=Math.abs(m),s){case"top-right":case"top-left":case"top":x=m-Rl;break;case"bottom-right":case"bottom-left":case"bottom":x=-m+Rl}switch(s){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,x]}(o,r[0],r[1]):function(s,h){let m=0,_=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":_=x-Rl;break;case"bottom-right":case"bottom-left":_=-x+Rl;break;case"bottom":_=-h+Rl;break;case"top":_=h-Rl}switch(s){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=h;break;case"right":m=-h}return[m,_]}(o,r[0])}function gb(o,r,s){var h;const m=o.layout,_=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(r,{},s);if(_){const w=_.values,P=[];for(let F=0;F<w.length;F+=2){const $=P[F]=w[F],Y=w[F+1].map(ne=>ne*Br);$.startsWith("top")?Y[1]-=Rl:$.startsWith("bottom")&&(Y[1]+=Rl),P[F+1]=Y}return new Ii(P)}const x=m.get("text-variable-anchor");if(x){let w;w=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(r,{},s)*Br,r0]:m.get("text-offset").evaluate(r,{},s).map(F=>F*Br);const P=[];for(const F of x)P.push(F,mb(F,w));return new Ii(P)}return null}function i0(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function EM(o,r,s,h,m,_,x,w,P,F,$){let Y=_.textMaxSize.evaluate(r,{});Y===void 0&&(Y=x);const ne=o.layers[0].layout,le=ne.get("icon-offset").evaluate(r,{},$),me=vb(s.horizontal),we=x/24,Oe=o.tilePixelRatio*we,De=o.tilePixelRatio*Y/24,nt=o.tilePixelRatio*w,qe=o.tilePixelRatio*ne.get("symbol-spacing"),Qe=ne.get("text-padding")*o.tilePixelRatio,lt=function(ft,Yt,Xt,hn=1){const Kn=ft.get("icon-padding").evaluate(Yt,{},Xt),Wn=Kn&&Kn.values;return[Wn[0]*hn,Wn[1]*hn,Wn[2]*hn,Wn[3]*hn]}(ne,r,$,o.tilePixelRatio),_t=ne.get("text-max-angle")/180*Math.PI,Lt=ne.get("text-rotation-alignment")!=="viewport"&&ne.get("symbol-placement")!=="point",rn=ne.get("icon-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",Rt=ne.get("symbol-placement"),kt=qe/2,Kt=ne.get("icon-text-fit");let $t;h&&Kt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&($t=Uw(h,s.vertical,Kt,ne.get("icon-text-fit-padding"),le,we)),me&&(h=Uw(h,me,Kt,ne.get("icon-text-fit-padding"),le,we)));const Bt=(ft,Yt)=>{Yt.x<0||Yt.x>=zr||Yt.y<0||Yt.y>=zr||function(Xt,hn,Kn,Wn,Vr,os,ai,Gr,Mi,ki,zi,yr,Hr,_i,li,Fi,ui,Lo,Ji,Dn,Jn,ir,wo,cr,qc){const ta=Xt.addToLineVertexArray(hn,Kn);let na,ss,Do,Kr,za=0,Gd=0,bb=0,Sb=0,d0=-1,f0=-1;const Fa={};let Eb=Rc("");if(Xt.allowVerticalPlacement&&Wn.vertical){const xi=Gr.layout.get("text-rotate").evaluate(Jn,{},cr)+90;Do=new Gp(Mi,hn,ki,zi,yr,Wn.vertical,Hr,_i,li,xi),ai&&(Kr=new Gp(Mi,hn,ki,zi,yr,ai,ui,Lo,li,xi))}if(Vr){const xi=Gr.layout.get("icon-rotate").evaluate(Jn,{}),Bo=Gr.layout.get("icon-text-fit")!=="none",Lu=fb(Vr,xi,wo,Bo),Ps=ai?fb(ai,xi,wo,Bo):void 0;ss=new Gp(Mi,hn,ki,zi,yr,Vr,ui,Lo,!1,xi),za=4*Lu.length;const Du=Xt.iconSizeData;let ra=null;Du.kind==="source"?(ra=[ea*Gr.layout.get("icon-size").evaluate(Jn,{})],ra[0]>zl&&_e(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${Bd}. Reduce your "icon-size".`)):Du.kind==="composite"&&(ra=[ea*ir.compositeIconSizes[0].evaluate(Jn,{},cr),ea*ir.compositeIconSizes[1].evaluate(Jn,{},cr)],(ra[0]>zl||ra[1]>zl)&&_e(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${Bd}. Reduce your "icon-size".`)),Xt.addSymbols(Xt.icon,Lu,ra,Dn,Ji,Jn,p.ah.none,hn,ta.lineStartIndex,ta.lineLength,-1,cr),d0=Xt.icon.placedSymbolArray.length-1,Ps&&(Gd=4*Ps.length,Xt.addSymbols(Xt.icon,Ps,ra,Dn,Ji,Jn,p.ah.vertical,hn,ta.lineStartIndex,ta.lineLength,-1,cr),f0=Xt.icon.placedSymbolArray.length-1)}const Tb=Object.keys(Wn.horizontal);for(const xi of Tb){const Bo=Wn.horizontal[xi];if(!na){Eb=Rc(Bo.text);const Ps=Gr.layout.get("text-rotate").evaluate(Jn,{},cr);na=new Gp(Mi,hn,ki,zi,yr,Bo,Hr,_i,li,Ps)}const Lu=Bo.positionedLines.length===1;if(bb+=yb(Xt,hn,Bo,os,Gr,li,Jn,Fi,ta,Wn.vertical?p.ah.horizontal:p.ah.horizontalOnly,Lu?Tb:[xi],Fa,d0,ir,cr),Lu)break}Wn.vertical&&(Sb+=yb(Xt,hn,Wn.vertical,os,Gr,li,Jn,Fi,ta,p.ah.vertical,["vertical"],Fa,f0,ir,cr));const CM=na?na.boxStartIndex:Xt.collisionBoxArray.length,PM=na?na.boxEndIndex:Xt.collisionBoxArray.length,AM=Do?Do.boxStartIndex:Xt.collisionBoxArray.length,MM=Do?Do.boxEndIndex:Xt.collisionBoxArray.length,kM=ss?ss.boxStartIndex:Xt.collisionBoxArray.length,zM=ss?ss.boxEndIndex:Xt.collisionBoxArray.length,FM=Kr?Kr.boxStartIndex:Xt.collisionBoxArray.length,OM=Kr?Kr.boxEndIndex:Xt.collisionBoxArray.length;let Cs=-1;const Zp=(xi,Bo)=>xi&&xi.circleDiameter?Math.max(xi.circleDiameter,Bo):Bo;Cs=Zp(na,Cs),Cs=Zp(Do,Cs),Cs=Zp(ss,Cs),Cs=Zp(Kr,Cs);const Ib=Cs>-1?1:0;Ib&&(Cs*=qc/Br),Xt.glyphOffsetArray.length>=Zc.MAX_GLYPHS&&_e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Jn.sortKey!==void 0&&Xt.addToSortKeyRanges(Xt.symbolInstances.length,Jn.sortKey);const RM=gb(Gr,Jn,cr),[jM,LM]=function(xi,Bo){const Lu=xi.length,Ps=Bo==null?void 0:Bo.values;if((Ps==null?void 0:Ps.length)>0)for(let Du=0;Du<Ps.length;Du+=2){const ra=Ps[Du+1];xi.emplaceBack(p.aq[Ps[Du]],ra[0],ra[1])}return[Lu,xi.length]}(Xt.textAnchorOffsets,RM);Xt.symbolInstances.emplaceBack(hn.x,hn.y,Fa.right>=0?Fa.right:-1,Fa.center>=0?Fa.center:-1,Fa.left>=0?Fa.left:-1,Fa.vertical||-1,d0,f0,Eb,CM,PM,AM,MM,kM,zM,FM,OM,ki,bb,Sb,za,Gd,Ib,0,Hr,Cs,jM,LM)}(o,Yt,ft,s,h,m,$t,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Oe,[Qe,Qe,Qe,Qe],Lt,P,nt,lt,rn,le,r,_,F,$,x)};if(Rt==="line")for(const ft of ab(r.geometry,0,0,zr,zr)){const Yt=xM(ft,qe,_t,s.vertical||me,h,24,De,o.overscaling,zr);for(const Xt of Yt)me&&TM(o,me.text,kt,Xt)||Bt(ft,Xt)}else if(Rt==="line-center"){for(const ft of r.geometry)if(ft.length>1){const Yt=_M(ft,_t,s.vertical||me,h,24,De);Yt&&Bt(ft,Yt)}}else if(r.type==="Polygon")for(const ft of xs(r.geometry,0)){const Yt=bM(ft,16);Bt(ft[0],new Ol(Yt.x,Yt.y,0))}else if(r.type==="LineString")for(const ft of r.geometry)Bt(ft,new Ol(ft[0].x,ft[0].y,0));else if(r.type==="Point")for(const ft of r.geometry)for(const Yt of ft)Bt([Yt],new Ol(Yt.x,Yt.y,0))}function yb(o,r,s,h,m,_,x,w,P,F,$,Y,ne,le,me){const we=function(nt,qe,Qe,lt,_t,Lt,rn,Rt){const kt=lt.layout.get("text-rotate").evaluate(Lt,{})*Math.PI/180,Kt=[];for(const $t of qe.positionedLines)for(const Bt of $t.positionedGlyphs){if(!Bt.rect)continue;const ft=Bt.rect||{};let Yt=Fw+1,Xt=!0,hn=1,Kn=0;const Wn=(_t||Rt)&&Bt.vertical,Vr=Bt.metrics.advance*Bt.scale/2;if(Rt&&qe.verticalizable&&(Kn=$t.lineOffset/2-(Bt.imageName?-(Br-Bt.metrics.width*Bt.scale)/2:(Bt.scale-1)*Br)),Bt.imageName){const Dn=rn[Bt.imageName];Xt=Dn.sdf,hn=Dn.pixelRatio,Yt=Yi/hn}const os=_t?[Bt.x+Vr,Bt.y]:[0,0];let ai=_t?[0,0]:[Bt.x+Vr+Qe[0],Bt.y+Qe[1]-Kn],Gr=[0,0];Wn&&(Gr=ai,ai=[0,0]);const Mi=Bt.metrics.isDoubleResolution?2:1,ki=(Bt.metrics.left-Yt)*Bt.scale-Vr+ai[0],zi=(-Bt.metrics.top-Yt)*Bt.scale+ai[1],yr=ki+ft.w/Mi*Bt.scale/hn,Hr=zi+ft.h/Mi*Bt.scale/hn,_i=new b(ki,zi),li=new b(yr,zi),Fi=new b(ki,Hr),ui=new b(yr,Hr);if(Wn){const Dn=new b(-Vr,Vr-Ld),Jn=-Math.PI/2,ir=Br/2-Vr,wo=new b(5-Ld-ir,-(Bt.imageName?ir:0)),cr=new b(...Gr);_i._rotateAround(Jn,Dn)._add(wo)._add(cr),li._rotateAround(Jn,Dn)._add(wo)._add(cr),Fi._rotateAround(Jn,Dn)._add(wo)._add(cr),ui._rotateAround(Jn,Dn)._add(wo)._add(cr)}if(kt){const Dn=Math.sin(kt),Jn=Math.cos(kt),ir=[Jn,-Dn,Dn,Jn];_i._matMult(ir),li._matMult(ir),Fi._matMult(ir),ui._matMult(ir)}const Lo=new b(0,0),Ji=new b(0,0);Kt.push({tl:_i,tr:li,bl:Fi,br:ui,tex:ft,writingMode:qe.writingMode,glyphOffset:os,sectionIndex:Bt.sectionIndex,isSDF:Xt,pixelOffsetTL:Lo,pixelOffsetBR:Ji,minFontScaleX:0,minFontScaleY:0})}return Kt}(0,s,w,m,_,x,h,o.allowVerticalPlacement),Oe=o.textSizeData;let De=null;Oe.kind==="source"?(De=[ea*m.layout.get("text-size").evaluate(x,{})],De[0]>zl&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Bd}. Reduce your "text-size".`)):Oe.kind==="composite"&&(De=[ea*le.compositeTextSizes[0].evaluate(x,{},me),ea*le.compositeTextSizes[1].evaluate(x,{},me)],(De[0]>zl||De[1]>zl)&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Bd}. Reduce your "text-size".`)),o.addSymbols(o.text,we,De,w,_,x,F,r,P.lineStartIndex,P.lineLength,ne,me);for(const nt of $)Y[nt]=o.text.placedSymbolArray.length-1;return 4*we.length}function vb(o){for(const r in o)return o[r];return null}function TM(o,r,s,h){const m=o.compareText;if(r in m){const _=m[r];for(let x=_.length-1;x>=0;x--)if(h.dist(_[x])<s)return!0}else m[r]=[];return m[r].push(h),!1}const _b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class o0{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const _=_b[15&h];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[w]=new Uint32Array(r,4,1);return new o0(w,x,_,r)}constructor(r,s=64,h=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const _=_b.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,w=r*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-w%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+w+P,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+P),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+w+P,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=r,this.coords[this._pos++]=s,h}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return s0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:w}=this,P=[0,_.length-1,0],F=[];for(;P.length;){const $=P.pop()||0,Y=P.pop()||0,ne=P.pop()||0;if(Y-ne<=w){for(let Oe=ne;Oe<=Y;Oe++){const De=x[2*Oe],nt=x[2*Oe+1];De>=r&&De<=h&&nt>=s&&nt<=m&&F.push(_[Oe])}continue}const le=ne+Y>>1,me=x[2*le],we=x[2*le+1];me>=r&&me<=h&&we>=s&&we<=m&&F.push(_[le]),($===0?r<=me:s<=we)&&(P.push(ne),P.push(le-1),P.push(1-$)),($===0?h>=me:m>=we)&&(P.push(le+1),P.push(Y),P.push(1-$))}return F}within(r,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:x}=this,w=[0,m.length-1,0],P=[],F=h*h;for(;w.length;){const $=w.pop()||0,Y=w.pop()||0,ne=w.pop()||0;if(Y-ne<=x){for(let Oe=ne;Oe<=Y;Oe++)wb(_[2*Oe],_[2*Oe+1],r,s)<=F&&P.push(m[Oe]);continue}const le=ne+Y>>1,me=_[2*le],we=_[2*le+1];wb(me,we,r,s)<=F&&P.push(m[le]),($===0?r-h<=me:s-h<=we)&&(w.push(ne),w.push(le-1),w.push(1-$)),($===0?r+h>=me:s+h>=we)&&(w.push(le+1),w.push(Y),w.push(1-$))}return P}}function s0(o,r,s,h,m,_){if(m-h<=s)return;const x=h+m>>1;xb(o,r,x,h,m,_),s0(o,r,s,h,x-1,1-_),s0(o,r,s,x+1,m,1-_)}function xb(o,r,s,h,m,_){for(;m>h;){if(m-h>600){const F=m-h+1,$=s-h+1,Y=Math.log(F),ne=.5*Math.exp(2*Y/3),le=.5*Math.sqrt(Y*ne*(F-ne)/F)*($-F/2<0?-1:1);xb(o,r,s,Math.max(h,Math.floor(s-$*ne/F+le)),Math.min(m,Math.floor(s+(F-$)*ne/F+le)),_)}const x=r[2*s+_];let w=h,P=m;for($d(o,r,h,s),r[2*m+_]>x&&$d(o,r,h,m);w<P;){for($d(o,r,w,P),w++,P--;r[2*w+_]<x;)w++;for(;r[2*P+_]>x;)P--}r[2*h+_]===x?$d(o,r,h,P):(P++,$d(o,r,P,m)),P<=s&&(h=P+1),s<=P&&(m=P-1)}}function $d(o,r,s,h){a0(o,s,h),a0(r,2*s,2*h),a0(r,2*s+1,2*h+1)}function a0(o,r,s){const h=o[r];o[r]=o[s],o[s]=h}function wb(o,r,s,h){const m=o-s,_=r-h;return m*m+_*_}var l0;p.bg=void 0,(l0=p.bg||(p.bg={})).create="create",l0.load="load",l0.fullLoad="fullLoad";let Hp=null,Vd=[];const u0=1e3/60,c0="loadTime",h0="fullLoadTime",IM={mark(o){performance.mark(o)},frame(o){const r=o;Hp!=null&&Vd.push(r-Hp),Hp=r},clearMetrics(){Hp=null,Vd=[],performance.clearMeasures(c0),performance.clearMeasures(h0);for(const o in p.bg)performance.clearMarks(p.bg[o])},getPerformanceMetrics(){performance.measure(c0,p.bg.create,p.bg.load),performance.measure(h0,p.bg.create,p.bg.fullLoad);const o=performance.getEntriesByName(c0)[0].duration,r=performance.getEntriesByName(h0)[0].duration,s=Vd.length,h=1/(Vd.reduce((_,x)=>_+x,0)/s/1e3),m=Vd.filter(_=>_>u0).reduce((_,x)=>_+(x-u0)/u0,0);return{loadTime:o,fullLoadTime:r,fps:h,percentDroppedFrames:m/(s+m)*100,totalFrames:s}}};p.$=class extends J{},p.A=Nc,p.B=_y,p.C=function(o){if(ce==null){const r=o.navigator?o.navigator.userAgent:null;ce=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return ce},p.D=Zt,p.E=an,p.F=class{constructor(o,r){this.target=o,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new yM(()=>this.process()),this.subscription=function(s,h,m,_){return s.addEventListener(h,m,!1),{unsubscribe:()=>{s.removeEventListener(h,m,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=oe(self)?o:window}registerMessageHandler(o,r){this.messageHandlers[o]=r}sendAsync(o,r){return new Promise((s,h)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:s,reject:h},r&&r.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];const w={id:m,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)},{once:!0});const _=[],x=Object.assign(Object.assign({},o),{id:m,sourceMapId:this.mapId,origin:location.origin,data:xl(o.data,_)});this.target.postMessage(x,{transfer:_})})}receive(o){const r=o.data,s=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[s];const h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(oe(self)||r.mustQueue)return this.tasks[s]=r,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,r)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),r=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(o,r)}processTask(o,r){return u(this,void 0,void 0,function*(){if(r.type==="<response>"){const m=this.resolveRejects[o];return delete this.resolveRejects[o],m?void(r.error?m.reject(wl(r.error)):m.resolve(wl(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=wl(r.data),h=new AbortController;this.abortControllers[o]=h;try{const m=yield this.messageHandlers[r.type](r.sourceMapId,s,h);this.completeTask(o,null,m)}catch(m){this.completeTask(o,m)}})}completeTask(o,r,s){const h=[];delete this.abortControllers[o];const m={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?xl(r):null,data:xl(s,h)};this.target.postMessage(m,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},p.G=Ze,p.H=function(){var o=new Nc(16);return Nc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},p.I=Zy,p.J=function(o,r,s){var h,m,_,x,w,P,F,$,Y,ne,le,me,we=s[0],Oe=s[1],De=s[2];return r===o?(o[12]=r[0]*we+r[4]*Oe+r[8]*De+r[12],o[13]=r[1]*we+r[5]*Oe+r[9]*De+r[13],o[14]=r[2]*we+r[6]*Oe+r[10]*De+r[14],o[15]=r[3]*we+r[7]*Oe+r[11]*De+r[15]):(m=r[1],_=r[2],x=r[3],w=r[4],P=r[5],F=r[6],$=r[7],Y=r[8],ne=r[9],le=r[10],me=r[11],o[0]=h=r[0],o[1]=m,o[2]=_,o[3]=x,o[4]=w,o[5]=P,o[6]=F,o[7]=$,o[8]=Y,o[9]=ne,o[10]=le,o[11]=me,o[12]=h*we+w*Oe+Y*De+r[12],o[13]=m*we+P*Oe+ne*De+r[13],o[14]=_*we+F*Oe+le*De+r[14],o[15]=x*we+$*Oe+me*De+r[15]),o},p.K=function(o,r,s){var h=s[0],m=s[1],_=s[2];return o[0]=r[0]*h,o[1]=r[1]*h,o[2]=r[2]*h,o[3]=r[3]*h,o[4]=r[4]*m,o[5]=r[5]*m,o[6]=r[6]*m,o[7]=r[7]*m,o[8]=r[8]*_,o[9]=r[9]*_,o[10]=r[10]*_,o[11]=r[11]*_,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},p.L=tw,p.M=function(o,r){const s={};for(let h=0;h<r.length;h++){const m=r[h];m in o&&(s[m]=o[m])}return s},p.N=Fl,p.O=Kw,p.P=b,p.Q=Yw,p.R=Ro,p.S=jo,p.T=Mc,p.U=K,p.V=X,p.W=fe,p.X=zr,p.Y=S,p.Z=Nd,p._=u,p.a=ze,p.a$=function(o,r){var s=o[0],h=o[1],m=o[2],_=o[3],x=o[4],w=o[5],P=o[6],F=o[7],$=o[8],Y=o[9],ne=o[10],le=o[11],me=o[12],we=o[13],Oe=o[14],De=o[15],nt=r[0],qe=r[1],Qe=r[2],lt=r[3],_t=r[4],Lt=r[5],rn=r[6],Rt=r[7],kt=r[8],Kt=r[9],$t=r[10],Bt=r[11],ft=r[12],Yt=r[13],Xt=r[14],hn=r[15];return Math.abs(s-nt)<=Ai*Math.max(1,Math.abs(s),Math.abs(nt))&&Math.abs(h-qe)<=Ai*Math.max(1,Math.abs(h),Math.abs(qe))&&Math.abs(m-Qe)<=Ai*Math.max(1,Math.abs(m),Math.abs(Qe))&&Math.abs(_-lt)<=Ai*Math.max(1,Math.abs(_),Math.abs(lt))&&Math.abs(x-_t)<=Ai*Math.max(1,Math.abs(x),Math.abs(_t))&&Math.abs(w-Lt)<=Ai*Math.max(1,Math.abs(w),Math.abs(Lt))&&Math.abs(P-rn)<=Ai*Math.max(1,Math.abs(P),Math.abs(rn))&&Math.abs(F-Rt)<=Ai*Math.max(1,Math.abs(F),Math.abs(Rt))&&Math.abs($-kt)<=Ai*Math.max(1,Math.abs($),Math.abs(kt))&&Math.abs(Y-Kt)<=Ai*Math.max(1,Math.abs(Y),Math.abs(Kt))&&Math.abs(ne-$t)<=Ai*Math.max(1,Math.abs(ne),Math.abs($t))&&Math.abs(le-Bt)<=Ai*Math.max(1,Math.abs(le),Math.abs(Bt))&&Math.abs(me-ft)<=Ai*Math.max(1,Math.abs(me),Math.abs(ft))&&Math.abs(we-Yt)<=Ai*Math.max(1,Math.abs(we),Math.abs(Yt))&&Math.abs(Oe-Xt)<=Ai*Math.max(1,Math.abs(Oe),Math.abs(Xt))&&Math.abs(De-hn)<=Ai*Math.max(1,Math.abs(De),Math.abs(hn))},p.a0=An,p.a1=n0,p.a2=k,p.a3=o=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(s=>{r.onloadstart=()=>{s(r)};for(const h of o){const m=window.document.createElement("source");Mt(h)||(r.crossOrigin="Anonymous"),m.src=h,r.appendChild(m)}})},p.a4=function(){return j++},p.a5=jt,p.a6=Zc,p.a7=mr,p.a8=Ru,p.a9=rb,p.aA=function(o){if(o.type==="custom")return new gM(o);switch(o.type){case"background":return new fM(o);case"circle":return new eA(o);case"fill":return new yA(o);case"fill-extrusion":return new zA(o);case"heatmap":return new nA(o);case"hillshade":return new iA(o);case"line":return new NA(o);case"raster":return new mM(o);case"symbol":return new Np(o)}},p.aB=W,p.aC=function(o,r){if(!o)return[{command:"setStyle",args:[r]}];let s=[];try{if(!Vt(o.version,r.version))return[{command:"setStyle",args:[r]}];Vt(o.center,r.center)||s.push({command:"setCenter",args:[r.center]}),Vt(o.zoom,r.zoom)||s.push({command:"setZoom",args:[r.zoom]}),Vt(o.bearing,r.bearing)||s.push({command:"setBearing",args:[r.bearing]}),Vt(o.pitch,r.pitch)||s.push({command:"setPitch",args:[r.pitch]}),Vt(o.sprite,r.sprite)||s.push({command:"setSprite",args:[r.sprite]}),Vt(o.glyphs,r.glyphs)||s.push({command:"setGlyphs",args:[r.glyphs]}),Vt(o.transition,r.transition)||s.push({command:"setTransition",args:[r.transition]}),Vt(o.light,r.light)||s.push({command:"setLight",args:[r.light]}),Vt(o.terrain,r.terrain)||s.push({command:"setTerrain",args:[r.terrain]}),Vt(o.sky,r.sky)||s.push({command:"setSky",args:[r.sky]}),Vt(o.projection,r.projection)||s.push({command:"setProjection",args:[r.projection]});const h={},m=[];(function(x,w,P,F){let $;for($ in w=w||{},x=x||{})Object.prototype.hasOwnProperty.call(x,$)&&(Object.prototype.hasOwnProperty.call(w,$)||L($,P,F));for($ in w)Object.prototype.hasOwnProperty.call(w,$)&&(Object.prototype.hasOwnProperty.call(x,$)?Vt(x[$],w[$])||(x[$].type==="geojson"&&w[$].type==="geojson"&&Xe(x,w,$)?Ee(P,{command:"setGeoJSONSourceData",args:[$,w[$].data]}):ge($,w,P,F)):B($,w,P))})(o.sources,r.sources,m,h);const _=[];o.layers&&o.layers.forEach(x=>{"source"in x&&h[x.source]?s.push({command:"removeLayer",args:[x.id]}):_.push(x)}),s=s.concat(m),function(x,w,P){w=w||[];const F=(x=x||[]).map(ht),$=w.map(ht),Y=x.reduce(ue,{}),ne=w.reduce(ue,{}),le=F.slice(),me=Object.create(null);let we,Oe,De,nt,qe;for(let Qe=0,lt=0;Qe<F.length;Qe++)we=F[Qe],Object.prototype.hasOwnProperty.call(ne,we)?lt++:(Ee(P,{command:"removeLayer",args:[we]}),le.splice(le.indexOf(we,lt),1));for(let Qe=0,lt=0;Qe<$.length;Qe++)we=$[$.length-1-Qe],le[le.length-1-Qe]!==we&&(Object.prototype.hasOwnProperty.call(Y,we)?(Ee(P,{command:"removeLayer",args:[we]}),le.splice(le.lastIndexOf(we,le.length-lt),1)):lt++,nt=le[le.length-Qe],Ee(P,{command:"addLayer",args:[ne[we],nt]}),le.splice(le.length-Qe,0,we),me[we]=!0);for(let Qe=0;Qe<$.length;Qe++)if(we=$[Qe],Oe=Y[we],De=ne[we],!me[we]&&!Vt(Oe,De))if(Vt(Oe.source,De.source)&&Vt(Oe["source-layer"],De["source-layer"])&&Vt(Oe.type,De.type)){for(qe in tt(Oe.layout,De.layout,P,we,null,"setLayoutProperty"),tt(Oe.paint,De.paint,P,we,null,"setPaintProperty"),Vt(Oe.filter,De.filter)||Ee(P,{command:"setFilter",args:[we,De.filter]}),Vt(Oe.minzoom,De.minzoom)&&Vt(Oe.maxzoom,De.maxzoom)||Ee(P,{command:"setLayerZoomRange",args:[we,De.minzoom,De.maxzoom]}),Oe)Object.prototype.hasOwnProperty.call(Oe,qe)&&qe!=="layout"&&qe!=="paint"&&qe!=="filter"&&qe!=="metadata"&&qe!=="minzoom"&&qe!=="maxzoom"&&(qe.indexOf("paint.")===0?tt(Oe[qe],De[qe],P,we,qe.slice(6),"setPaintProperty"):Vt(Oe[qe],De[qe])||Ee(P,{command:"setLayerProperty",args:[we,qe,De[qe]]}));for(qe in De)Object.prototype.hasOwnProperty.call(De,qe)&&!Object.prototype.hasOwnProperty.call(Oe,qe)&&qe!=="layout"&&qe!=="paint"&&qe!=="filter"&&qe!=="metadata"&&qe!=="minzoom"&&qe!=="maxzoom"&&(qe.indexOf("paint.")===0?tt(Oe[qe],De[qe],P,we,qe.slice(6),"setPaintProperty"):Vt(Oe[qe],De[qe])||Ee(P,{command:"setLayerProperty",args:[we,qe,De[qe]]}))}else Ee(P,{command:"removeLayer",args:[we]}),nt=le[le.lastIndexOf(we)+1],Ee(P,{command:"addLayer",args:[De,nt]})}(_,r.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[r]}]}return s},p.aD=function(o){const r=[],s=o.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},p.aE=function o(r,s){if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(let h=0;h<r.length;h++)if(!o(r[h],s[h]))return!1;return!0}if(typeof r=="object"&&r!==null&&s!==null){if(typeof s!="object"||Object.keys(r).length!==Object.keys(s).length)return!1;for(const h in r)if(!o(r[h],s[h]))return!1;return!0}return r===s},p.aF=D,p.aG=te,p.aH=class extends zu{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},p.aI=Cp,p.aJ=class extends zu{constructor(o,r){super(o,r),this.current=ZP}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},p.aK=Gx,p.aL=Hx,p.aM=zn,p.aN=class extends zu{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},p.aO=class extends zu{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},p.aP=function(o,r,s,h,m,_,x){var w=1/(r-s),P=1/(h-m),F=1/(_-x);return o[0]=-2*w,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*P,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*F,o[11]=0,o[12]=(r+s)*w,o[13]=(m+h)*P,o[14]=(x+_)*F,o[15]=1,o},p.aQ=QP,p.aR=class extends Ye{},p.aS=GA,p.aT=class extends ot{},p.aU=Oy,p.aV=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},p.aW=sw,p.aX=ii,p.aY=Oo,p.aZ=class extends Wt{},p.a_=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]&&o[3]===r[3]&&o[4]===r[4]&&o[5]===r[5]&&o[6]===r[6]&&o[7]===r[7]&&o[8]===r[8]&&o[9]===r[9]&&o[10]===r[10]&&o[11]===r[11]&&o[12]===r[12]&&o[13]===r[13]&&o[14]===r[14]&&o[15]===r[15]},p.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,m,_)=>{const x=m||_;return r[h]=!x||x.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r},p.ab=function(o,r){const s=[];for(const h in o)h in r||s.push(h);return s},p.ac=q,p.ad=function(o,r,s){var h=Math.sin(s),m=Math.cos(s),_=r[0],x=r[1],w=r[2],P=r[3],F=r[4],$=r[5],Y=r[6],ne=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=_*m+F*h,o[1]=x*m+$*h,o[2]=w*m+Y*h,o[3]=P*m+ne*h,o[4]=F*m-_*h,o[5]=$*m-x*h,o[6]=Y*m-w*h,o[7]=ne*m-P*h,o},p.ae=function(o){var r=new Nc(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},p.af=kp,p.ag=function(o,r){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:_,maxZoom:x}=o,w=m?q(ti.interpolationFactor(m,r,_,x),0,1):0;o.kind==="camera"?h=ei.number(o.minSize,o.maxSize,w):s=w}return{uSizeT:s,uSize:h}},p.ai=function(o,{uSize:r,uSizeT:s},{lowerSize:h,upperSize:m}){return o.kind==="source"?h/ea:o.kind==="composite"?ei.number(h/ea,m/ea,s):r},p.aj=Ky,p.ak=function(o,r,s,h){const m=r.y-o.y,_=r.x-o.x,x=h.y-s.y,w=h.x-s.x,P=x*_-w*m;if(P===0)return null;const F=(w*(o.y-s.y)-x*(o.x-s.x))/P;return new b(o.x+F*_,o.y+F*m)},p.al=ab,p.am=qx,p.an=ky,p.ao=function(o){let r=1/0,s=1/0,h=-1/0,m=-1/0;for(const _ of o)r=Math.min(r,_.x),s=Math.min(s,_.y),h=Math.max(h,_.x),m=Math.max(m,_.y);return[r,s,h,m]},p.ap=Br,p.ar=qy,p.as=function(o,r){var s=r[0],h=r[1],m=r[2],_=r[3],x=r[4],w=r[5],P=r[6],F=r[7],$=r[8],Y=r[9],ne=r[10],le=r[11],me=r[12],we=r[13],Oe=r[14],De=r[15],nt=s*w-h*x,qe=s*P-m*x,Qe=s*F-_*x,lt=h*P-m*w,_t=h*F-_*w,Lt=m*F-_*P,rn=$*we-Y*me,Rt=$*Oe-ne*me,kt=$*De-le*me,Kt=Y*Oe-ne*we,$t=Y*De-le*we,Bt=ne*De-le*Oe,ft=nt*Bt-qe*$t+Qe*Kt+lt*kt-_t*Rt+Lt*rn;return ft?(o[0]=(w*Bt-P*$t+F*Kt)*(ft=1/ft),o[1]=(m*$t-h*Bt-_*Kt)*ft,o[2]=(we*Lt-Oe*_t+De*lt)*ft,o[3]=(ne*_t-Y*Lt-le*lt)*ft,o[4]=(P*kt-x*Bt-F*Rt)*ft,o[5]=(s*Bt-m*kt+_*Rt)*ft,o[6]=(Oe*Qe-me*Lt-De*qe)*ft,o[7]=($*Lt-ne*Qe+le*qe)*ft,o[8]=(x*$t-w*kt+F*rn)*ft,o[9]=(h*kt-s*$t-_*rn)*ft,o[10]=(me*_t-we*Qe+De*nt)*ft,o[11]=(Y*Qe-$*_t-le*nt)*ft,o[12]=(w*Rt-x*Kt-P*rn)*ft,o[13]=(s*Kt-h*Rt+m*rn)*ft,o[14]=(we*qe-me*lt-Oe*nt)*ft,o[15]=($*lt-Y*qe+ne*nt)*ft,o):null},p.at=i0,p.au=Xy,p.av=o0,p.aw=function(){const o={},r=et.$version;for(const s in et.$root){const h=et.$root[s];if(h.required){let m=null;m=s==="version"?r:h.type==="array"?[]:{},m!=null&&(o[s]=m)}}return o},p.ax=xd,p.ay=ct,p.az=function(o){o=o.slice();const r=Object.create(null);for(let s=0;s<o.length;s++)r[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=ln(o[s],r[o[s].ref]));return o},p.b=ee,p.b0=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},p.b1=function(o,r,s){return o[0]=r[0]*s[0],o[1]=r[1]*s[1],o[2]=r[2]*s[2],o[3]=r[3]*s[3],o},p.b2=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},p.b3=H,p.b4=eb,p.b5=Jw,p.b6=function(o,r,s,h,m){var _,x=1/Math.tan(r/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+h)*(_=1/(h-m)),o[14]=2*m*h*_):(o[10]=-1,o[14]=-2*h),o},p.b7=function(o,r,s){var h=Math.sin(s),m=Math.cos(s),_=r[4],x=r[5],w=r[6],P=r[7],F=r[8],$=r[9],Y=r[10],ne=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=_*m+F*h,o[5]=x*m+$*h,o[6]=w*m+Y*h,o[7]=P*m+ne*h,o[8]=F*m-_*h,o[9]=$*m-x*h,o[10]=Y*m-w*h,o[11]=ne*m-P*h,o},p.b8=G,p.b9=ae,p.bA=Iw,p.bB=function(o){return o.message===Ne},p.bC=zt,p.bD=qi,p.ba=function(o){return o*Math.PI/180},p.bb=function(o,r){const{x:s,y:h}=Nd.fromLngLat(r);return!(o<0||o>25||h<0||h>=1||s<0||s>=1)},p.bc=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},p.bd=class extends V{},p.be=e0,p.bf=IM,p.bh=it,p.bi=function(o,r){ze.REGISTERED_PROTOCOLS[o]=r},p.bj=function(o){delete ze.REGISTERED_PROTOCOLS[o]},p.bk=function(o,r){const s={};for(let m=0;m<o.length;m++){const _=r&&r[o[m].id]||mp(o[m]);r&&(r[o[m].id]=_);let x=s[_];x||(x=s[_]=[]),x.push(o[m])}const h=[];for(const m in s)h.push(s[m]);return h},p.bl=Ut,p.bm=nb,p.bn=ib,p.bo=Rw,p.bp=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=zr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],s=r.layout,h=r._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new er(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new er(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new er(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:F,maxZoom:$}=o.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new er(F),o.canonical),h["text-size"].possiblyEvaluate(new er($),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:F,maxZoom:$}=o.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new er(F),o.canonical),h["icon-size"].possiblyEvaluate(new er($),o.canonical)]}const _=s.get("text-line-height")*Br,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",w=s.get("text-keep-upright"),P=s.get("text-size");for(const F of o.bucket.features){const $=s.get("text-font").evaluate(F,{},o.canonical).join(","),Y=P.evaluate(F,{},o.canonical),ne=m.layoutTextSize.evaluate(F,{},o.canonical),le=m.layoutIconSize.evaluate(F,{},o.canonical),me={horizontal:{},vertical:void 0},we=F.text;let Oe,De=[0,0];if(we){const Qe=we.toString(),lt=s.get("text-letter-spacing").evaluate(F,{},o.canonical)*Br,_t=xy(Qe)?lt:0,Lt=s.get("text-anchor").evaluate(F,{},o.canonical),rn=gb(r,F,o.canonical);if(!rn){const $t=s.get("text-radial-offset").evaluate(F,{},o.canonical);De=$t?mb(Lt,[$t*Br,r0]):s.get("text-offset").evaluate(F,{},o.canonical).map(Bt=>Bt*Br)}let Rt=x?"center":s.get("text-justify").evaluate(F,{},o.canonical);const kt=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(F,{},o.canonical)*Br:1/0,Kt=()=>{o.bucket.allowVerticalPlacement&&wd(Qe)&&(me.vertical=Lp(we,o.glyphMap,o.glyphPositions,o.imagePositions,$,kt,_,Lt,"left",_t,De,p.ah.vertical,!0,ne,Y))};if(!x&&rn){const $t=new Set;if(Rt==="auto")for(let ft=0;ft<rn.values.length;ft+=2)$t.add(i0(rn.values[ft]));else $t.add(Rt);let Bt=!1;for(const ft of $t)if(!me.horizontal[ft])if(Bt)me.horizontal[ft]=me.horizontal[0];else{const Yt=Lp(we,o.glyphMap,o.glyphPositions,o.imagePositions,$,kt,_,"center",ft,_t,De,p.ah.horizontal,!1,ne,Y);Yt&&(me.horizontal[ft]=Yt,Bt=Yt.positionedLines.length===1)}Kt()}else{Rt==="auto"&&(Rt=i0(Lt));const $t=Lp(we,o.glyphMap,o.glyphPositions,o.imagePositions,$,kt,_,Lt,Rt,_t,De,p.ah.horizontal,!1,ne,Y);$t&&(me.horizontal[Rt]=$t),Kt(),wd(Qe)&&x&&w&&(me.vertical=Lp(we,o.glyphMap,o.glyphPositions,o.imagePositions,$,kt,_,Lt,Rt,_t,De,p.ah.vertical,!1,ne,Y))}}let nt=!1;if(F.icon&&F.icon.name){const Qe=o.imageMap[F.icon.name];Qe&&(Oe=lM(o.imagePositions[F.icon.name],s.get("icon-offset").evaluate(F,{},o.canonical),s.get("icon-anchor").evaluate(F,{},o.canonical)),nt=!!Qe.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=nt:o.bucket.sdfIcons!==nt&&_e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Qe.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const qe=vb(me.horizontal)||me.vertical;o.bucket.iconsInText=!!qe&&qe.iconsInText,(qe||Oe)&&EM(o.bucket,F,me,Oe,o.imageMap,m,ne,le,De,nt,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},p.bq=$y,p.br=By,p.bs=Uy,p.bt=Ml,p.bu=Gy,p.bv=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},p.bw=function(o,r,s,h,m){return u(this,void 0,void 0,function*(){if(X())try{return yield fe(o,r,s,h,m)}catch{}return function(_,x,w,P,F){const $=_.width,Y=_.height;Se&&Ie||(Se=new OffscreenCanvas($,Y),Ie=Se.getContext("2d",{willReadFrequently:!0})),Se.width=$,Se.height=Y,Ie.drawImage(_,0,0,$,Y);const ne=Ie.getImageData(x,w,P,F);return Ie.clearRect(0,0,$,Y),ne.data}(o,r,s,h,m)})},p.bx=tb,p.by=E,p.bz=I,p.c=Ae,p.d=o=>u(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(r)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),p.e=T,p.f=o=>new Promise((r,s)=>{const h=new Image;h.onload=()=>{r(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=re})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(m):re}),p.g=He,p.h=(o,r)=>vt(T(o,{type:"json"}),r),p.i=oe,p.j=Ht,p.k=Gt,p.l=(o,r)=>vt(T(o,{type:"arrayBuffer"}),r),p.m=vt,p.n=function(o){return new Gy(o).readFields(tM,[])},p.o=Md,p.p=Ow,p.q=v,p.r=vy,p.s=Mt,p.t=vd,p.u=Pa,p.v=et,p.w=_e,p.x=function([o,r,s]){return r+=90,r*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(s),y:o*Math.sin(r)*Math.sin(s),z:o*Math.cos(s)}},p.y=ei,p.z=er}),c("worker",["./shared"],function(p){class u{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,ie){for(const Ce of se){this._layerConfigs[Ce.id]=Ce;const Me=this._layers[Ce.id]=p.aA(Ce);Me._featureFilter=p.a7(Me.filter),this.keyCache[Ce.id]&&delete this.keyCache[Ce.id]}for(const Ce of ie)delete this.keyCache[Ce],delete this._layerConfigs[Ce],delete this._layers[Ce];this.familiesBySource={};const xe=p.bk(Object.values(this._layerConfigs),this.keyCache);for(const Ce of xe){const Me=Ce.map(st=>this._layers[st.id]),je=Me[0];if(je.visibility==="none")continue;const Ke=je.source||"";let Le=this.familiesBySource[Ke];Le||(Le=this.familiesBySource[Ke]={});const at=je.sourceLayer||"_geojsonTileLayer";let dt=Le[at];dt||(dt=Le[at]=[]),dt.push(Me)}}}class E{constructor(se){const ie={},xe=[];for(const Ke in se){const Le=se[Ke],at=ie[Ke]={};for(const dt in Le){const st=Le[+dt];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const Et={x:0,y:0,w:st.bitmap.width+2,h:st.bitmap.height+2};xe.push(Et),at[dt]={rect:Et,metrics:st.metrics}}}const{w:Ce,h:Me}=p.p(xe),je=new p.o({width:Ce||1,height:Me||1});for(const Ke in se){const Le=se[Ke];for(const at in Le){const dt=Le[+at];if(!dt||dt.bitmap.width===0||dt.bitmap.height===0)continue;const st=ie[Ke][at].rect;p.o.copy(dt.bitmap,je,{x:0,y:0},{x:st.x+1,y:st.y+1},dt.bitmap)}}this.image=je,this.positions=ie}}p.bl("GlyphAtlas",E);class I{constructor(se){this.tileID=new p.S(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,ie,xe,Ce){return p._(this,void 0,void 0,function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new p.a5;const Me=new p.bm(Object.keys(se.layers).sort()),je=new p.bn(this.tileID,this.promoteId);je.bucketLayerIDs=[];const Ke={},Le={featureIndex:je,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:xe},at=ie.familiesBySource[this.source];for(const _n in at){const Un=se.layers[_n];if(!Un)continue;Un.version===1&&p.w(`Vector tile source "${this.source}" layer "${_n}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Yn=Me.encode(_n),Mr=[];for(let jr=0;jr<Un.length;jr++){const Wr=Un.feature(jr),Po=je.getId(Wr,_n);Mr.push({feature:Wr,id:Po,index:jr,sourceLayerIndex:Yn})}for(const jr of at[_n]){const Wr=jr[0];Wr.source!==this.source&&p.w(`layer.source = ${Wr.source} does not equal this.source = ${this.source}`),Wr.minzoom&&this.zoom<Math.floor(Wr.minzoom)||Wr.maxzoom&&this.zoom>=Wr.maxzoom||Wr.visibility!=="none"&&(M(jr,this.zoom,xe),(Ke[Wr.id]=Wr.createBucket({index:je.bucketLayerIDs.length,layers:jr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Yn,sourceID:this.source})).populate(Mr,Le,this.tileID.canonical),je.bucketLayerIDs.push(jr.map(Po=>Po.id)))}}const dt=p.aF(Le.glyphDependencies,_n=>Object.keys(_n).map(Number));this.inFlightDependencies.forEach(_n=>_n==null?void 0:_n.abort()),this.inFlightDependencies=[];let st=Promise.resolve({});if(Object.keys(dt).length){const _n=new AbortController;this.inFlightDependencies.push(_n),st=Ce.sendAsync({type:"GG",data:{stacks:dt,source:this.source,tileID:this.tileID,type:"glyphs"}},_n)}const Et=Object.keys(Le.iconDependencies);let qt=Promise.resolve({});if(Et.length){const _n=new AbortController;this.inFlightDependencies.push(_n),qt=Ce.sendAsync({type:"GI",data:{icons:Et,source:this.source,tileID:this.tileID,type:"icons"}},_n)}const en=Object.keys(Le.patternDependencies);let En=Promise.resolve({});if(en.length){const _n=new AbortController;this.inFlightDependencies.push(_n),En=Ce.sendAsync({type:"GI",data:{icons:en,source:this.source,tileID:this.tileID,type:"patterns"}},_n)}const[un,Tn,wn]=yield Promise.all([st,qt,En]),sr=new E(un),Hn=new p.bo(Tn,wn);for(const _n in Ke){const Un=Ke[_n];Un instanceof p.a6?(M(Un.layers,this.zoom,xe),p.bp({bucket:Un,glyphMap:un,glyphPositions:sr.positions,imageMap:Tn,imagePositions:Hn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Un.hasPattern&&(Un instanceof p.bq||Un instanceof p.br||Un instanceof p.bs)&&(M(Un.layers,this.zoom,xe),Un.addFeatures(Le,this.tileID.canonical,Hn.patternPositions))}return this.status="done",{buckets:Object.values(Ke).filter(_n=>!_n.isEmpty()),featureIndex:je,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:sr.image,imageAtlas:Hn,glyphMap:this.returnDependencies?un:null,iconMap:this.returnDependencies?Tn:null,glyphPositions:this.returnDependencies?sr.positions:null}})}}function M(ke,se,ie){const xe=new p.z(se);for(const Ce of ke)Ce.recalculate(xe,ie)}class b{constructor(se,ie,xe){this.actor=se,this.layerIndex=ie,this.availableImages=xe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,ie){return p._(this,void 0,void 0,function*(){const xe=yield p.l(se.request,ie);try{return{vectorTile:new p.bt.VectorTile(new p.bu(xe.data)),rawData:xe.data,cacheControl:xe.cacheControl,expires:xe.expires}}catch(Ce){const Me=new Uint8Array(xe.data);let je=`Unable to parse the tile at ${se.request.url}, `;throw je+=Me[0]===31&&Me[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ce.message}`,new Error(je)}})}loadTile(se){return p._(this,void 0,void 0,function*(){const ie=se.uid,xe=!!(se&&se.request&&se.request.collectResourceTiming)&&new p.bv(se.request),Ce=new I(se);this.loading[ie]=Ce;const Me=new AbortController;Ce.abort=Me;try{const je=yield this.loadVectorTile(se,Me);if(delete this.loading[ie],!je)return null;const Ke=je.rawData,Le={};je.expires&&(Le.expires=je.expires),je.cacheControl&&(Le.cacheControl=je.cacheControl);const at={};if(xe){const st=xe.finish();st&&(at.resourceTiming=JSON.parse(JSON.stringify(st)))}Ce.vectorTile=je.vectorTile;const dt=Ce.parse(je.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ie]=Ce,this.fetching[ie]={rawTileData:Ke,cacheControl:Le,resourceTiming:at};try{const st=yield dt;return p.e({rawTileData:Ke.slice(0)},st,Le,at)}finally{delete this.fetching[ie]}}catch(je){throw delete this.loading[ie],Ce.status="done",this.loaded[ie]=Ce,je}})}reloadTile(se){return p._(this,void 0,void 0,function*(){const ie=se.uid;if(!this.loaded||!this.loaded[ie])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const xe=this.loaded[ie];if(xe.showCollisionBoxes=se.showCollisionBoxes,xe.status==="parsing"){const Ce=yield xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor);let Me;if(this.fetching[ie]){const{rawTileData:je,cacheControl:Ke,resourceTiming:Le}=this.fetching[ie];delete this.fetching[ie],Me=p.e({rawTileData:je.slice(0)},Ce,Ke,Le)}else Me=Ce;return Me}if(xe.status==="done"&&xe.vectorTile)return xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(se){return p._(this,void 0,void 0,function*(){const ie=this.loading,xe=se.uid;ie&&ie[xe]&&ie[xe].abort&&(ie[xe].abort.abort(),delete ie[xe])})}removeTile(se){return p._(this,void 0,void 0,function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]})}}class C{constructor(){this.loaded={}}loadTile(se){return p._(this,void 0,void 0,function*(){const{uid:ie,encoding:xe,rawImageData:Ce,redFactor:Me,greenFactor:je,blueFactor:Ke,baseShift:Le}=se,at=Ce.width+2,dt=Ce.height+2,st=p.b(Ce)?new p.R({width:at,height:dt},yield p.bw(Ce,-1,-1,at,dt)):Ce,Et=new p.bx(ie,st,xe,Me,je,Ke,Le);return this.loaded=this.loaded||{},this.loaded[ie]=Et,Et})}removeTile(se){const ie=this.loaded,xe=se.uid;ie&&ie[xe]&&delete ie[xe]}}function R(ke,se){if(ke.length!==0){N(ke[0],se);for(var ie=1;ie<ke.length;ie++)N(ke[ie],!se)}}function N(ke,se){for(var ie=0,xe=0,Ce=0,Me=ke.length,je=Me-1;Ce<Me;je=Ce++){var Ke=(ke[Ce][0]-ke[je][0])*(ke[je][1]+ke[Ce][1]),Le=ie+Ke;xe+=Math.abs(ie)>=Math.abs(Ke)?ie-Le+Ke:Ke-Le+ie,ie=Le}ie+xe>=0!=!!se&&ke.reverse()}var O=p.by(function ke(se,ie){var xe,Ce=se&&se.type;if(Ce==="FeatureCollection")for(xe=0;xe<se.features.length;xe++)ke(se.features[xe],ie);else if(Ce==="GeometryCollection")for(xe=0;xe<se.geometries.length;xe++)ke(se.geometries[xe],ie);else if(Ce==="Feature")ke(se.geometry,ie);else if(Ce==="Polygon")R(se.coordinates,ie);else if(Ce==="MultiPolygon")for(xe=0;xe<se.coordinates.length;xe++)R(se.coordinates[xe],ie);return se});const he=p.bt.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},X=p.bz,G=p.bt.VectorTileFeature,ae=q;function q(ke,se){this.options=se||{},this.features=ke,this.length=ke.length}function H(ke,se){this.id=typeof ke.id=="number"?ke.id:void 0,this.type=ke.type,this.rawGeometry=ke.type===1?[ke.geometry]:ke.geometry,this.properties=ke.tags,this.extent=se||4096}q.prototype.feature=function(ke){return new H(this.features[ke],this.options.extent)},H.prototype.loadGeometry=function(){var ke=this.rawGeometry;this.geometry=[];for(var se=0;se<ke.length;se++){for(var ie=ke[se],xe=[],Ce=0;Ce<ie.length;Ce++)xe.push(new X(ie[Ce][0],ie[Ce][1]));this.geometry.push(xe)}return this.geometry},H.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ke=this.geometry,se=1/0,ie=-1/0,xe=1/0,Ce=-1/0,Me=0;Me<ke.length;Me++)for(var je=ke[Me],Ke=0;Ke<je.length;Ke++){var Le=je[Ke];se=Math.min(se,Le.x),ie=Math.max(ie,Le.x),xe=Math.min(xe,Le.y),Ce=Math.max(Ce,Le.y)}return[se,xe,ie,Ce]},H.prototype.toGeoJSON=G.prototype.toGeoJSON;var T=p.bA,j=ae;function D(ke){var se=new T;return function(ie,xe){for(var Ce in ie.layers)xe.writeMessage(3,te,ie.layers[Ce])}(ke,se),se.finish()}function te(ke,se){var ie;se.writeVarintField(15,ke.version||1),se.writeStringField(1,ke.name||""),se.writeVarintField(5,ke.extent||4096);var xe={keys:[],values:[],keycache:{},valuecache:{}};for(ie=0;ie<ke.length;ie++)xe.feature=ke.feature(ie),se.writeMessage(2,W,xe);var Ce=xe.keys;for(ie=0;ie<Ce.length;ie++)se.writeStringField(3,Ce[ie]);var Me=xe.values;for(ie=0;ie<Me.length;ie++)se.writeMessage(4,ce,Me[ie])}function W(ke,se){var ie=ke.feature;ie.id!==void 0&&se.writeVarintField(1,ie.id),se.writeMessage(2,ve,ke),se.writeVarintField(3,ie.type),se.writeMessage(4,oe,ie)}function ve(ke,se){var ie=ke.feature,xe=ke.keys,Ce=ke.values,Me=ke.keycache,je=ke.valuecache;for(var Ke in ie.properties){var Le=ie.properties[Ke],at=Me[Ke];if(Le!==null){at===void 0&&(xe.push(Ke),Me[Ke]=at=xe.length-1),se.writeVarint(at);var dt=typeof Le;dt!=="string"&&dt!=="boolean"&&dt!=="number"&&(Le=JSON.stringify(Le));var st=dt+":"+Le,Et=je[st];Et===void 0&&(Ce.push(Le),je[st]=Et=Ce.length-1),se.writeVarint(Et)}}}function _e(ke,se){return(se<<3)+(7&ke)}function pe(ke){return ke<<1^ke>>31}function oe(ke,se){for(var ie=ke.loadGeometry(),xe=ke.type,Ce=0,Me=0,je=ie.length,Ke=0;Ke<je;Ke++){var Le=ie[Ke],at=1;xe===1&&(at=Le.length),se.writeVarint(_e(1,at));for(var dt=xe===3?Le.length-1:Le.length,st=0;st<dt;st++){st===1&&xe!==1&&se.writeVarint(_e(2,dt-1));var Et=Le[st].x-Ce,qt=Le[st].y-Me;se.writeVarint(pe(Et)),se.writeVarint(pe(qt)),Ce+=Et,Me+=qt}xe===3&&se.writeVarint(_e(7,1))}}function ce(ke,se){var ie=typeof ke;ie==="string"?se.writeStringField(1,ke):ie==="boolean"?se.writeBooleanField(7,ke):ie==="number"&&(ke%1!=0?se.writeDoubleField(3,ke):ke<0?se.writeSVarintField(6,ke):se.writeVarintField(5,ke))}K.exports=D,K.exports.fromVectorTileJs=D,K.exports.fromGeojsonVt=function(ke,se){se=se||{};var ie={};for(var xe in ke)ie[xe]=new j(ke[xe].features,se),ie[xe].name=xe,ie[xe].version=se.version,ie[xe].extent=se.extent;return D({layers:ie})},K.exports.GeoJSONWrapper=j;var ee=p.by(K.exports);const re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},fe=Math.fround||(Se=new Float32Array(1),ke=>(Se[0]=+ke,Se[0]));var Se;const Ie=3,Ne=5,Ae=6;class ze{constructor(se){this.options=Object.assign(Object.create(re),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:ie,minZoom:xe,maxZoom:Ce}=this.options;ie&&console.time("total time");const Me=`prepare ${se.length} points`;ie&&console.time(Me),this.points=se;const je=[];for(let Le=0;Le<se.length;Le++){const at=se[Le];if(!at.geometry)continue;const[dt,st]=at.geometry.coordinates,Et=fe(it(dt)),qt=fe(ct(st));je.push(Et,qt,1/0,Le,-1,1),this.options.reduce&&je.push(0)}let Ke=this.trees[Ce+1]=this._createTree(je);ie&&console.timeEnd(Me);for(let Le=Ce;Le>=xe;Le--){const at=+Date.now();Ke=this.trees[Le]=this._createTree(this._cluster(Ke,Le)),ie&&console.log("z%d: %d clusters in %dms",Le,Ke.numItems,+Date.now()-at)}return ie&&console.timeEnd("total time"),this}getClusters(se,ie){let xe=((se[0]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,se[1]));let Me=se[2]===180?180:((se[2]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)xe=-180,Me=180;else if(xe>Me){const st=this.getClusters([xe,Ce,180,je],ie),Et=this.getClusters([-180,Ce,Me,je],ie);return st.concat(Et)}const Ke=this.trees[this._limitZoom(ie)],Le=Ke.range(it(xe),ct(je),it(Me),ct(Ce)),at=Ke.data,dt=[];for(const st of Le){const Et=this.stride*st;dt.push(at[Et+Ne]>1?He(at,Et,this.clusterProps):this.points[at[Et+Ie]])}return dt}getChildren(se){const ie=this._getOriginId(se),xe=this._getOriginZoom(se),Ce="No cluster with the specified id.",Me=this.trees[xe];if(!Me)throw new Error(Ce);const je=Me.data;if(ie*this.stride>=je.length)throw new Error(Ce);const Ke=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),Le=Me.within(je[ie*this.stride],je[ie*this.stride+1],Ke),at=[];for(const dt of Le){const st=dt*this.stride;je[st+4]===se&&at.push(je[st+Ne]>1?He(je,st,this.clusterProps):this.points[je[st+Ie]])}if(at.length===0)throw new Error(Ce);return at}getLeaves(se,ie,xe){const Ce=[];return this._appendLeaves(Ce,se,ie=ie||10,xe=xe||0,0),Ce}getTile(se,ie,xe){const Ce=this.trees[this._limitZoom(se)],Me=Math.pow(2,se),{extent:je,radius:Ke}=this.options,Le=Ke/je,at=(xe-Le)/Me,dt=(xe+1+Le)/Me,st={features:[]};return this._addTileFeatures(Ce.range((ie-Le)/Me,at,(ie+1+Le)/Me,dt),Ce.data,ie,xe,Me,st),ie===0&&this._addTileFeatures(Ce.range(1-Le/Me,at,1,dt),Ce.data,Me,xe,Me,st),ie===Me-1&&this._addTileFeatures(Ce.range(0,at,Le/Me,dt),Ce.data,-1,xe,Me,st),st.features.length?st:null}getClusterExpansionZoom(se){let ie=this._getOriginZoom(se)-1;for(;ie<=this.options.maxZoom;){const xe=this.getChildren(se);if(ie++,xe.length!==1)break;se=xe[0].properties.cluster_id}return ie}_appendLeaves(se,ie,xe,Ce,Me){const je=this.getChildren(ie);for(const Ke of je){const Le=Ke.properties;if(Le&&Le.cluster?Me+Le.point_count<=Ce?Me+=Le.point_count:Me=this._appendLeaves(se,Le.cluster_id,xe,Ce,Me):Me<Ce?Me++:se.push(Ke),se.length===xe)break}return Me}_createTree(se){const ie=new p.av(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let xe=0;xe<se.length;xe+=this.stride)ie.add(se[xe],se[xe+1]);return ie.finish(),ie.data=se,ie}_addTileFeatures(se,ie,xe,Ce,Me,je){for(const Ke of se){const Le=Ke*this.stride,at=ie[Le+Ne]>1;let dt,st,Et;if(at)dt=Ze(ie,Le,this.clusterProps),st=ie[Le],Et=ie[Le+1];else{const En=this.points[ie[Le+Ie]];dt=En.properties;const[un,Tn]=En.geometry.coordinates;st=it(un),Et=ct(Tn)}const qt={type:1,geometry:[[Math.round(this.options.extent*(st*Me-xe)),Math.round(this.options.extent*(Et*Me-Ce))]],tags:dt};let en;en=at||this.options.generateId?ie[Le+Ie]:this.points[ie[Le+Ie]].id,en!==void 0&&(qt.id=en),je.features.push(qt)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,ie){const{radius:xe,extent:Ce,reduce:Me,minPoints:je}=this.options,Ke=xe/(Ce*Math.pow(2,ie)),Le=se.data,at=[],dt=this.stride;for(let st=0;st<Le.length;st+=dt){if(Le[st+2]<=ie)continue;Le[st+2]=ie;const Et=Le[st],qt=Le[st+1],en=se.within(Le[st],Le[st+1],Ke),En=Le[st+Ne];let un=En;for(const Tn of en){const wn=Tn*dt;Le[wn+2]>ie&&(un+=Le[wn+Ne])}if(un>En&&un>=je){let Tn,wn=Et*En,sr=qt*En,Hn=-1;const _n=((st/dt|0)<<5)+(ie+1)+this.points.length;for(const Un of en){const Yn=Un*dt;if(Le[Yn+2]<=ie)continue;Le[Yn+2]=ie;const Mr=Le[Yn+Ne];wn+=Le[Yn]*Mr,sr+=Le[Yn+1]*Mr,Le[Yn+4]=_n,Me&&(Tn||(Tn=this._map(Le,st,!0),Hn=this.clusterProps.length,this.clusterProps.push(Tn)),Me(Tn,this._map(Le,Yn)))}Le[st+4]=_n,at.push(wn/un,sr/un,1/0,_n,-1,un),Me&&at.push(Hn)}else{for(let Tn=0;Tn<dt;Tn++)at.push(Le[st+Tn]);if(un>1)for(const Tn of en){const wn=Tn*dt;if(!(Le[wn+2]<=ie)){Le[wn+2]=ie;for(let sr=0;sr<dt;sr++)at.push(Le[wn+sr])}}}}return at}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,ie,xe){if(se[ie+Ne]>1){const je=this.clusterProps[se[ie+Ae]];return xe?Object.assign({},je):je}const Ce=this.points[se[ie+Ie]].properties,Me=this.options.map(Ce);return xe&&Me===Ce?Object.assign({},Me):Me}}function He(ke,se,ie){return{type:"Feature",id:ke[se+Ie],properties:Ze(ke,se,ie),geometry:{type:"Point",coordinates:[(xe=ke[se],360*(xe-.5)),vt(ke[se+1])]}};var xe}function Ze(ke,se,ie){const xe=ke[se+Ne],Ce=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe,Me=ke[se+Ae],je=Me===-1?{}:Object.assign({},ie[Me]);return Object.assign(je,{cluster:!0,cluster_id:ke[se+Ie],point_count:xe,point_count_abbreviated:Ce})}function it(ke){return ke/360+.5}function ct(ke){const se=Math.sin(ke*Math.PI/180),ie=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ie<0?0:ie>1?1:ie}function vt(ke){const se=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function Mt(ke,se,ie,xe){let Ce=xe;const Me=se+(ie-se>>1);let je,Ke=ie-se;const Le=ke[se],at=ke[se+1],dt=ke[ie],st=ke[ie+1];for(let Et=se+3;Et<ie;Et+=3){const qt=pt(ke[Et],ke[Et+1],Le,at,dt,st);if(qt>Ce)je=Et,Ce=qt;else if(qt===Ce){const en=Math.abs(Et-Me);en<Ke&&(je=Et,Ke=en)}}Ce>xe&&(je-se>3&&Mt(ke,se,je,xe),ke[je+2]=Ce,ie-je>3&&Mt(ke,je,ie,xe))}function pt(ke,se,ie,xe,Ce,Me){let je=Ce-ie,Ke=Me-xe;if(je!==0||Ke!==0){const Le=((ke-ie)*je+(se-xe)*Ke)/(je*je+Ke*Ke);Le>1?(ie=Ce,xe=Me):Le>0&&(ie+=je*Le,xe+=Ke*Le)}return je=ke-ie,Ke=se-xe,je*je+Ke*Ke}function xt(ke,se,ie,xe){const Ce={id:ke??null,type:se,geometry:ie,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")Gt(Ce,ie);else if(se==="Polygon")Gt(Ce,ie[0]);else if(se==="MultiLineString")for(const Me of ie)Gt(Ce,Me);else if(se==="MultiPolygon")for(const Me of ie)Gt(Ce,Me[0]);return Ce}function Gt(ke,se){for(let ie=0;ie<se.length;ie+=3)ke.minX=Math.min(ke.minX,se[ie]),ke.minY=Math.min(ke.minY,se[ie+1]),ke.maxX=Math.max(ke.maxX,se[ie]),ke.maxY=Math.max(ke.maxY,se[ie+1])}function Ht(ke,se,ie,xe){if(!se.geometry)return;const Ce=se.geometry.coordinates;if(Ce&&Ce.length===0)return;const Me=se.geometry.type,je=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2);let Ke=[],Le=se.id;if(ie.promoteId?Le=se.properties[ie.promoteId]:ie.generateId&&(Le=xe||0),Me==="Point")an(Ce,Ke);else if(Me==="MultiPoint")for(const at of Ce)an(at,Ke);else if(Me==="LineString")et(Ce,Ke,je,!1);else if(Me==="MultiLineString"){if(ie.lineMetrics){for(const at of Ce)Ke=[],et(at,Ke,je,!1),ke.push(xt(Le,"LineString",Ke,se.properties));return}vn(Ce,Ke,je,!1)}else if(Me==="Polygon")vn(Ce,Ke,je,!0);else{if(Me!=="MultiPolygon"){if(Me==="GeometryCollection"){for(const at of se.geometry.geometries)Ht(ke,{id:Le,geometry:at,properties:se.properties},ie,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const at of Ce){const dt=[];vn(at,dt,je,!0),Ke.push(dt)}}ke.push(xt(Le,Me,Ke,se.properties))}function an(ke,se){se.push(ln(ke[0]),Vt(ke[1]),0)}function et(ke,se,ie,xe){let Ce,Me,je=0;for(let Le=0;Le<ke.length;Le++){const at=ln(ke[Le][0]),dt=Vt(ke[Le][1]);se.push(at,dt,0),Le>0&&(je+=xe?(Ce*dt-at*Me)/2:Math.sqrt(Math.pow(at-Ce,2)+Math.pow(dt-Me,2))),Ce=at,Me=dt}const Ke=se.length-3;se[2]=1,Mt(se,0,Ke,ie),se[Ke+2]=1,se.size=Math.abs(je),se.start=0,se.end=se.size}function vn(ke,se,ie,xe){for(let Ce=0;Ce<ke.length;Ce++){const Me=[];et(ke[Ce],Me,ie,xe),se.push(Me)}}function ln(ke){return ke/360+.5}function Vt(ke){const se=Math.sin(ke*Math.PI/180),ie=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ie<0?0:ie>1?1:ie}function Ee(ke,se,ie,xe,Ce,Me,je,Ke){if(xe/=se,Me>=(ie/=se)&&je<xe)return ke;if(je<ie||Me>=xe)return null;const Le=[];for(const at of ke){const dt=at.geometry;let st=at.type;const Et=Ce===0?at.minX:at.minY,qt=Ce===0?at.maxX:at.maxY;if(Et>=ie&&qt<xe){Le.push(at);continue}if(qt<ie||Et>=xe)continue;let en=[];if(st==="Point"||st==="MultiPoint")B(dt,en,ie,xe,Ce);else if(st==="LineString")L(dt,en,ie,xe,Ce,!1,Ke.lineMetrics);else if(st==="MultiLineString")Xe(dt,en,ie,xe,Ce,!1);else if(st==="Polygon")Xe(dt,en,ie,xe,Ce,!0);else if(st==="MultiPolygon")for(const En of dt){const un=[];Xe(En,un,ie,xe,Ce,!0),un.length&&en.push(un)}if(en.length){if(Ke.lineMetrics&&st==="LineString"){for(const En of en)Le.push(xt(at.id,st,En,at.tags));continue}st!=="LineString"&&st!=="MultiLineString"||(en.length===1?(st="LineString",en=en[0]):st="MultiLineString"),st!=="Point"&&st!=="MultiPoint"||(st=en.length===3?"Point":"MultiPoint"),Le.push(xt(at.id,st,en,at.tags))}}return Le.length?Le:null}function B(ke,se,ie,xe,Ce){for(let Me=0;Me<ke.length;Me+=3){const je=ke[Me+Ce];je>=ie&&je<=xe&&tt(se,ke[Me],ke[Me+1],ke[Me+2])}}function L(ke,se,ie,xe,Ce,Me,je){let Ke=ge(ke);const Le=Ce===0?ht:ue;let at,dt,st=ke.start;for(let un=0;un<ke.length-3;un+=3){const Tn=ke[un],wn=ke[un+1],sr=ke[un+2],Hn=ke[un+3],_n=ke[un+4],Un=Ce===0?Tn:wn,Yn=Ce===0?Hn:_n;let Mr=!1;je&&(at=Math.sqrt(Math.pow(Tn-Hn,2)+Math.pow(wn-_n,2))),Un<ie?Yn>ie&&(dt=Le(Ke,Tn,wn,Hn,_n,ie),je&&(Ke.start=st+at*dt)):Un>xe?Yn<xe&&(dt=Le(Ke,Tn,wn,Hn,_n,xe),je&&(Ke.start=st+at*dt)):tt(Ke,Tn,wn,sr),Yn<ie&&Un>=ie&&(dt=Le(Ke,Tn,wn,Hn,_n,ie),Mr=!0),Yn>xe&&Un<=xe&&(dt=Le(Ke,Tn,wn,Hn,_n,xe),Mr=!0),!Me&&Mr&&(je&&(Ke.end=st+at*dt),se.push(Ke),Ke=ge(ke)),je&&(st+=at)}let Et=ke.length-3;const qt=ke[Et],en=ke[Et+1],En=Ce===0?qt:en;En>=ie&&En<=xe&&tt(Ke,qt,en,ke[Et+2]),Et=Ke.length-3,Me&&Et>=3&&(Ke[Et]!==Ke[0]||Ke[Et+1]!==Ke[1])&&tt(Ke,Ke[0],Ke[1],Ke[2]),Ke.length&&se.push(Ke)}function ge(ke){const se=[];return se.size=ke.size,se.start=ke.start,se.end=ke.end,se}function Xe(ke,se,ie,xe,Ce,Me){for(const je of ke)L(je,se,ie,xe,Ce,Me,!1)}function tt(ke,se,ie,xe){ke.push(se,ie,xe)}function ht(ke,se,ie,xe,Ce,Me){const je=(Me-se)/(xe-se);return tt(ke,Me,ie+(Ce-ie)*je,1),je}function ue(ke,se,ie,xe,Ce,Me){const je=(Me-ie)/(Ce-ie);return tt(ke,se+(xe-se)*je,Me,1),je}function k(ke,se){const ie=[];for(let xe=0;xe<ke.length;xe++){const Ce=ke[xe],Me=Ce.type;let je;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")je=U(Ce.geometry,se);else if(Me==="MultiLineString"||Me==="Polygon"){je=[];for(const Ke of Ce.geometry)je.push(U(Ke,se))}else if(Me==="MultiPolygon"){je=[];for(const Ke of Ce.geometry){const Le=[];for(const at of Ke)Le.push(U(at,se));je.push(Le)}}ie.push(xt(Ce.id,Me,je,Ce.tags))}return ie}function U(ke,se){const ie=[];ie.size=ke.size,ke.start!==void 0&&(ie.start=ke.start,ie.end=ke.end);for(let xe=0;xe<ke.length;xe+=3)ie.push(ke[xe]+se,ke[xe+1],ke[xe+2]);return ie}function Te(ke,se){if(ke.transformed)return ke;const ie=1<<ke.z,xe=ke.x,Ce=ke.y;for(const Me of ke.features){const je=Me.geometry,Ke=Me.type;if(Me.geometry=[],Ke===1)for(let Le=0;Le<je.length;Le+=2)Me.geometry.push(Ve(je[Le],je[Le+1],se,ie,xe,Ce));else for(let Le=0;Le<je.length;Le++){const at=[];for(let dt=0;dt<je[Le].length;dt+=2)at.push(Ve(je[Le][dt],je[Le][dt+1],se,ie,xe,Ce));Me.geometry.push(at)}}return ke.transformed=!0,ke}function Ve(ke,se,ie,xe,Ce,Me){return[Math.round(ie*(ke*xe-Ce)),Math.round(ie*(se*xe-Me))]}function rt(ke,se,ie,xe,Ce){const Me=se===Ce.maxZoom?0:Ce.tolerance/((1<<se)*Ce.extent),je={features:[],numPoints:0,numSimplified:0,numFeatures:ke.length,source:null,x:ie,y:xe,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ke of ke)Ge(je,Ke,Me,Ce);return je}function Ge(ke,se,ie,xe){const Ce=se.geometry,Me=se.type,je=[];if(ke.minX=Math.min(ke.minX,se.minX),ke.minY=Math.min(ke.minY,se.minY),ke.maxX=Math.max(ke.maxX,se.maxX),ke.maxY=Math.max(ke.maxY,se.maxY),Me==="Point"||Me==="MultiPoint")for(let Ke=0;Ke<Ce.length;Ke+=3)je.push(Ce[Ke],Ce[Ke+1]),ke.numPoints++,ke.numSimplified++;else if(Me==="LineString")St(je,Ce,ke,ie,!1,!1);else if(Me==="MultiLineString"||Me==="Polygon")for(let Ke=0;Ke<Ce.length;Ke++)St(je,Ce[Ke],ke,ie,Me==="Polygon",Ke===0);else if(Me==="MultiPolygon")for(let Ke=0;Ke<Ce.length;Ke++){const Le=Ce[Ke];for(let at=0;at<Le.length;at++)St(je,Le[at],ke,ie,!0,at===0)}if(je.length){let Ke=se.tags||null;if(Me==="LineString"&&xe.lineMetrics){Ke={};for(const at in se.tags)Ke[at]=se.tags[at];Ke.mapbox_clip_start=Ce.start/Ce.size,Ke.mapbox_clip_end=Ce.end/Ce.size}const Le={geometry:je,type:Me==="Polygon"||Me==="MultiPolygon"?3:Me==="LineString"||Me==="MultiLineString"?2:1,tags:Ke};se.id!==null&&(Le.id=se.id),ke.features.push(Le)}}function St(ke,se,ie,xe,Ce,Me){const je=xe*xe;if(xe>0&&se.size<(Ce?je:xe))return void(ie.numPoints+=se.length/3);const Ke=[];for(let Le=0;Le<se.length;Le+=3)(xe===0||se[Le+2]>je)&&(ie.numSimplified++,Ke.push(se[Le],se[Le+1])),ie.numPoints++;Ce&&function(Le,at){let dt=0;for(let st=0,Et=Le.length,qt=Et-2;st<Et;qt=st,st+=2)dt+=(Le[st]-Le[qt])*(Le[st+1]+Le[qt+1]);if(dt>0===at)for(let st=0,Et=Le.length;st<Et/2;st+=2){const qt=Le[st],en=Le[st+1];Le[st]=Le[Et-2-st],Le[st+1]=Le[Et-1-st],Le[Et-2-st]=qt,Le[Et-1-st]=en}}(Ke,Me),ke.push(Ke)}const Pt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class mn{constructor(se,ie){const xe=(ie=this.options=function(Me,je){for(const Ke in je)Me[Ke]=je[Ke];return Me}(Object.create(Pt),ie)).debug;if(xe&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ce=function(Me,je){const Ke=[];if(Me.type==="FeatureCollection")for(let Le=0;Le<Me.features.length;Le++)Ht(Ke,Me.features[Le],je,Le);else Ht(Ke,Me.type==="Feature"?Me:{geometry:Me},je);return Ke}(se,ie);this.tiles={},this.tileCoords=[],xe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ce=function(Me,je){const Ke=je.buffer/je.extent;let Le=Me;const at=Ee(Me,1,-1-Ke,Ke,0,-1,2,je),dt=Ee(Me,1,1-Ke,2+Ke,0,-1,2,je);return(at||dt)&&(Le=Ee(Me,1,-Ke,1+Ke,0,-1,2,je)||[],at&&(Le=k(at,1).concat(Le)),dt&&(Le=Le.concat(k(dt,-1)))),Le}(Ce,ie),Ce.length&&this.splitTile(Ce,0,0,0),xe&&(Ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,ie,xe,Ce,Me,je,Ke){const Le=[se,ie,xe,Ce],at=this.options,dt=at.debug;for(;Le.length;){Ce=Le.pop(),xe=Le.pop(),ie=Le.pop(),se=Le.pop();const st=1<<ie,Et=bn(ie,xe,Ce);let qt=this.tiles[Et];if(!qt&&(dt>1&&console.time("creation"),qt=this.tiles[Et]=rt(se,ie,xe,Ce,at),this.tileCoords.push({z:ie,x:xe,y:Ce}),dt)){dt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,xe,Ce,qt.numFeatures,qt.numPoints,qt.numSimplified),console.timeEnd("creation"));const Mr=`z${ie}`;this.stats[Mr]=(this.stats[Mr]||0)+1,this.total++}if(qt.source=se,Me==null){if(ie===at.indexMaxZoom||qt.numPoints<=at.indexMaxPoints)continue}else{if(ie===at.maxZoom||ie===Me)continue;if(Me!=null){const Mr=Me-ie;if(xe!==je>>Mr||Ce!==Ke>>Mr)continue}}if(qt.source=null,se.length===0)continue;dt>1&&console.time("clipping");const en=.5*at.buffer/at.extent,En=.5-en,un=.5+en,Tn=1+en;let wn=null,sr=null,Hn=null,_n=null,Un=Ee(se,st,xe-en,xe+un,0,qt.minX,qt.maxX,at),Yn=Ee(se,st,xe+En,xe+Tn,0,qt.minX,qt.maxX,at);se=null,Un&&(wn=Ee(Un,st,Ce-en,Ce+un,1,qt.minY,qt.maxY,at),sr=Ee(Un,st,Ce+En,Ce+Tn,1,qt.minY,qt.maxY,at),Un=null),Yn&&(Hn=Ee(Yn,st,Ce-en,Ce+un,1,qt.minY,qt.maxY,at),_n=Ee(Yn,st,Ce+En,Ce+Tn,1,qt.minY,qt.maxY,at),Yn=null),dt>1&&console.timeEnd("clipping"),Le.push(wn||[],ie+1,2*xe,2*Ce),Le.push(sr||[],ie+1,2*xe,2*Ce+1),Le.push(Hn||[],ie+1,2*xe+1,2*Ce),Le.push(_n||[],ie+1,2*xe+1,2*Ce+1)}}getTile(se,ie,xe){se=+se,ie=+ie,xe=+xe;const Ce=this.options,{extent:Me,debug:je}=Ce;if(se<0||se>24)return null;const Ke=1<<se,Le=bn(se,ie=ie+Ke&Ke-1,xe);if(this.tiles[Le])return Te(this.tiles[Le],Me);je>1&&console.log("drilling down to z%d-%d-%d",se,ie,xe);let at,dt=se,st=ie,Et=xe;for(;!at&&dt>0;)dt--,st>>=1,Et>>=1,at=this.tiles[bn(dt,st,Et)];return at&&at.source?(je>1&&(console.log("found parent tile z%d-%d-%d",dt,st,Et),console.time("drilling down")),this.splitTile(at.source,dt,st,Et,se,ie,xe),je>1&&console.timeEnd("drilling down"),this.tiles[Le]?Te(this.tiles[Le],Me):null):null}}function bn(ke,se,ie){return 32*((1<<ke)*ie+se)+ke}function Ot(ke,se){return se?ke.properties[se]:ke.id}function Ar(ke,se){if(ke==null)return!0;if(ke.type==="Feature")return Ot(ke,se)!=null;if(ke.type==="FeatureCollection"){const ie=new Set;for(const xe of ke.features){const Ce=Ot(xe,se);if(Ce==null||ie.has(Ce))return!1;ie.add(Ce)}return!0}return!1}function Qr(ke,se){const ie=new Map;if(ke!=null)if(ke.type==="Feature")ie.set(Ot(ke,se),ke);else for(const xe of ke.features)ie.set(Ot(xe,se),xe);return ie}class Ti extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,ie){return p._(this,void 0,void 0,function*(){const xe=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ce=this._geoJSONIndex.getTile(xe.z,xe.x,xe.y);if(!Ce)return null;const Me=new class{constructor(Ke){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=p.X,this.length=Ke.length,this._features=Ke}feature(Ke){return new class{constructor(Le){this._feature=Le,this.extent=p.X,this.type=Le.type,this.properties=Le.tags,"id"in Le&&!isNaN(Le.id)&&(this.id=parseInt(Le.id,10))}loadGeometry(){if(this._feature.type===1){const Le=[];for(const at of this._feature.geometry)Le.push([new p.P(at[0],at[1])]);return Le}{const Le=[];for(const at of this._feature.geometry){const dt=[];for(const st of at)dt.push(new p.P(st[0],st[1]));Le.push(dt)}return Le}}toGeoJSON(Le,at,dt){return he.call(this,Le,at,dt)}}(this._features[Ke])}}(Ce.features);let je=ee(Me);return je.byteOffset===0&&je.byteLength===je.buffer.byteLength||(je=new Uint8Array(je)),{vectorTile:Me,rawData:je.buffer}})}loadData(se){return p._(this,void 0,void 0,function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort();const xe=!!(se&&se.request&&se.request.collectResourceTiming)&&new p.bv(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest),this._geoJSONIndex=se.cluster?new ze(function({superclusterOptions:je,clusterProperties:Ke}){if(!Ke||!je)return je;const Le={},at={},dt={accumulated:null,zoom:0},st={properties:null},Et=Object.keys(Ke);for(const qt of Et){const[en,En]=Ke[qt],un=p.bC(En),Tn=p.bC(typeof en=="string"?[en,["accumulated"],["get",qt]]:en);Le[qt]=un.value,at[qt]=Tn.value}return je.map=qt=>{st.properties=qt;const en={};for(const En of Et)en[En]=Le[En].evaluate(dt,st);return en},je.reduce=(qt,en)=>{st.properties=en;for(const En of Et)dt.accumulated=qt[En],qt[En]=at[En].evaluate(dt,st)},je}(se)).load((yield this._pendingData).features):(Ce=yield this._pendingData,new mn(Ce,se.geojsonVtOptions)),this.loaded={};const Me={};if(xe){const je=xe.finish();je&&(Me.resourceTiming={},Me.resourceTiming[se.source]=JSON.parse(JSON.stringify(je)))}return Me}catch(Me){if(delete this._pendingRequest,p.bB(Me))return{abandoned:!0};throw Me}var Ce})}getData(){return p._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(se){const ie=this.loaded;return ie&&ie[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,ie){return p._(this,void 0,void 0,function*(){let xe=yield this.loadGeoJSON(se,ie);if(delete this._pendingRequest,typeof xe!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(O(xe,!0),se.filter){const Ce=p.bC(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ce.result==="error")throw new Error(Ce.value.map(je=>`${je.key}: ${je.message}`).join(", "));xe={type:"FeatureCollection",features:xe.features.filter(je=>Ce.value.evaluate({zoom:0},je))}}return xe})}loadGeoJSON(se,ie){return p._(this,void 0,void 0,function*(){const{promoteId:xe}=se;if(se.request){const Ce=yield p.h(se.request,ie);return this._dataUpdateable=Ar(Ce.data,xe)?Qr(Ce.data,xe):void 0,Ce.data}if(typeof se.data=="string")try{const Ce=JSON.parse(se.data);return this._dataUpdateable=Ar(Ce,xe)?Qr(Ce,xe):void 0,Ce}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return function(Ce,Me,je){var Ke,Le,at,dt;if(Me.removeAll&&Ce.clear(),Me.remove)for(const st of Me.remove)Ce.delete(st);if(Me.add)for(const st of Me.add){const Et=Ot(st,je);Et!=null&&Ce.set(Et,st)}if(Me.update)for(const st of Me.update){let Et=Ce.get(st.id);if(Et==null)continue;const qt=!st.removeAllProperties&&(((Ke=st.removeProperties)===null||Ke===void 0?void 0:Ke.length)>0||((Le=st.addOrUpdateProperties)===null||Le===void 0?void 0:Le.length)>0);if((st.newGeometry||st.removeAllProperties||qt)&&(Et=Object.assign({},Et),Ce.set(st.id,Et),qt&&(Et.properties=Object.assign({},Et.properties))),st.newGeometry&&(Et.geometry=st.newGeometry),st.removeAllProperties)Et.properties={};else if(((at=st.removeProperties)===null||at===void 0?void 0:at.length)>0)for(const en of st.removeProperties)Object.prototype.hasOwnProperty.call(Et.properties,en)&&delete Et.properties[en];if(((dt=st.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0)for(const{key:en,value:En}of st.addOrUpdateProperties)Et.properties[en]=En}}(this._dataUpdateable,se.dataDiff,xe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(se){return p._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class Ur{constructor(se){this.self=se,this.actor=new p.F(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ie,xe)=>{if(this.externalWorkerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.externalWorkerSourceTypes[ie]=xe},this.self.addProtocol=p.bi,this.self.removeProtocol=p.bj,this.self.registerRTLTextPlugin=ie=>{if(p.bD.isParsed())throw new Error("RTL text plugin already registered.");p.bD.setMethods(ie)},this.actor.registerMessageHandler("LDT",(ie,xe)=>this._getDEMWorkerSource(ie,xe.source).loadTile(xe)),this.actor.registerMessageHandler("RDT",(ie,xe)=>p._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ie,xe.source).removeTile(xe)})),this.actor.registerMessageHandler("GCEZ",(ie,xe)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,xe.type,xe.source).getClusterExpansionZoom(xe)})),this.actor.registerMessageHandler("GCC",(ie,xe)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,xe.type,xe.source).getClusterChildren(xe)})),this.actor.registerMessageHandler("GCL",(ie,xe)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,xe.type,xe.source).getClusterLeaves(xe)})),this.actor.registerMessageHandler("LD",(ie,xe)=>this._getWorkerSource(ie,xe.type,xe.source).loadData(xe)),this.actor.registerMessageHandler("GD",(ie,xe)=>this._getWorkerSource(ie,xe.type,xe.source).getData()),this.actor.registerMessageHandler("LT",(ie,xe)=>this._getWorkerSource(ie,xe.type,xe.source).loadTile(xe)),this.actor.registerMessageHandler("RT",(ie,xe)=>this._getWorkerSource(ie,xe.type,xe.source).reloadTile(xe)),this.actor.registerMessageHandler("AT",(ie,xe)=>this._getWorkerSource(ie,xe.type,xe.source).abortTile(xe)),this.actor.registerMessageHandler("RMT",(ie,xe)=>this._getWorkerSource(ie,xe.type,xe.source).removeTile(xe)),this.actor.registerMessageHandler("RS",(ie,xe)=>p._(this,void 0,void 0,function*(){if(!this.workerSources[ie]||!this.workerSources[ie][xe.type]||!this.workerSources[ie][xe.type][xe.source])return;const Ce=this.workerSources[ie][xe.type][xe.source];delete this.workerSources[ie][xe.type][xe.source],Ce.removeSource!==void 0&&Ce.removeSource(xe)})),this.actor.registerMessageHandler("RM",ie=>p._(this,void 0,void 0,function*(){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.workerSources[ie],delete this.demWorkerSources[ie]})),this.actor.registerMessageHandler("SR",(ie,xe)=>p._(this,void 0,void 0,function*(){this.referrer=xe})),this.actor.registerMessageHandler("SRPS",(ie,xe)=>this._syncRTLPluginState(ie,xe)),this.actor.registerMessageHandler("IS",(ie,xe)=>p._(this,void 0,void 0,function*(){this.self.importScripts(xe)})),this.actor.registerMessageHandler("SI",(ie,xe)=>this._setImages(ie,xe)),this.actor.registerMessageHandler("UL",(ie,xe)=>p._(this,void 0,void 0,function*(){this._getLayerIndex(ie).update(xe.layers,xe.removedIds)})),this.actor.registerMessageHandler("SL",(ie,xe)=>p._(this,void 0,void 0,function*(){this._getLayerIndex(ie).replace(xe)}))}_setImages(se,ie){return p._(this,void 0,void 0,function*(){this.availableImages[se]=ie;for(const xe in this.workerSources[se]){const Ce=this.workerSources[se][xe];for(const Me in Ce)Ce[Me].availableImages=ie}})}_syncRTLPluginState(se,ie){return p._(this,void 0,void 0,function*(){if(p.bD.isParsed())return p.bD.getState();if(ie.pluginStatus!=="loading")return p.bD.setState(ie),ie;const xe=ie.pluginURL;if(this.self.importScripts(xe),p.bD.isParsed()){const Ce={pluginStatus:"loaded",pluginURL:xe};return p.bD.setState(Ce),Ce}throw p.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${xe}`)})}_getAvailableImages(se){let ie=this.availableImages[se];return ie||(ie=[]),ie}_getLayerIndex(se){let ie=this.layerIndexes[se];return ie||(ie=this.layerIndexes[se]=new u),ie}_getWorkerSource(se,ie,xe){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][ie]||(this.workerSources[se][ie]={}),!this.workerSources[se][ie][xe]){const Ce={sendAsync:(Me,je)=>(Me.targetMapId=se,this.actor.sendAsync(Me,je))};switch(ie){case"vector":this.workerSources[se][ie][xe]=new b(Ce,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][ie][xe]=new Ti(Ce,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][ie][xe]=new this.externalWorkerSourceTypes[ie](Ce,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][ie][xe]}_getDEMWorkerSource(se,ie){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][ie]||(this.demWorkerSources[se][ie]=new C),this.demWorkerSources[se][ie]}}return p.i(self)&&(self.worker=new Ur(self)),Ur}),c("index",["exports","./shared"],function(p,u){var E="4.7.0";let I,M;const b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((n,a)=>{const d=requestAnimationFrame(n);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),a(u.c())})}),getImageData(v,n=0){return this.getImageCanvasContext(v).getImageData(-n,-n,v.width+2*n,v.height+2*n)},getImageCanvasContext(v){const n=window.document.createElement("canvas"),a=n.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return n.width=v.width,n.height=v.height,a.drawImage(v,0,0,v.width,v.height),a},resolveURL:v=>(I||(I=document.createElement("a")),I.href=v,I.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(M==null&&(M=matchMedia("(prefers-reduced-motion: reduce)")),M.matches)}};class C{static testProp(n){if(!C.docStyle)return n[0];for(let a=0;a<n.length;a++)if(n[a]in C.docStyle)return n[a];return n[0]}static create(n,a,d){const f=window.document.createElement(n);return a!==void 0&&(f.className=a),d&&d.appendChild(f),f}static createNS(n,a){return window.document.createElementNS(n,a)}static disableDrag(){C.docStyle&&C.selectProp&&(C.userSelect=C.docStyle[C.selectProp],C.docStyle[C.selectProp]="none")}static enableDrag(){C.docStyle&&C.selectProp&&(C.docStyle[C.selectProp]=C.userSelect)}static setTransform(n,a){n.style[C.transformProp]=a}static addEventListener(n,a,d,f={}){n.addEventListener(a,d,"passive"in f?f:f.capture)}static removeEventListener(n,a,d,f={}){n.removeEventListener(a,d,"passive"in f?f:f.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",C.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",C.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",C.suppressClickInternal,!0)},0)}static getScale(n){const a=n.getBoundingClientRect();return{x:a.width/n.offsetWidth||1,y:a.height/n.offsetHeight||1,boundingClientRect:a}}static getPoint(n,a,d){const f=a.boundingClientRect;return new u.P((d.clientX-f.left)/a.x-n.clientLeft,(d.clientY-f.top)/a.y-n.clientTop)}static mousePos(n,a){const d=C.getScale(n);return C.getPoint(n,d,a)}static touchPos(n,a){const d=[],f=C.getScale(n);for(let y=0;y<a.length;y++)d.push(C.getPoint(n,f,a[y]));return d}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}C.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,C.selectProp=C.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),C.transformProp=C.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(v){!he&&O&&(K?X(v):N=v)}};let N,O,he=!1,K=!1;function X(v){const n=v.createTexture();v.bindTexture(v.TEXTURE_2D,n);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,O),v.isContextLost())return;R.supported=!0}catch{}v.deleteTexture(n),he=!0}var G;typeof document<"u"&&(O=document.createElement("img"),O.onload=()=>{N&&X(N),N=null,K=!0},O.onerror=()=>{he=!0,N=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let n,a,d,f;v.resetRequestQueue=()=>{n=[],a=0,d=0,f={}},v.addThrottleControl=z=>{const V=d++;return f[V]=z,V},v.removeThrottleControl=z=>{delete f[z],S()},v.getImage=(z,V,J=!0)=>new Promise((Q,de)=>{R.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*"),u.e(z,{type:"image"}),n.push({abortController:V,requestParameters:z,supportImageRefresh:J,state:"queued",onError:be=>{de(be)},onSuccess:be=>{Q(be)}}),S()});const y=z=>u._(this,void 0,void 0,function*(){z.state="running";const{requestParameters:V,supportImageRefresh:J,onError:Q,onSuccess:de,abortController:be}=z,Pe=J===!1&&!u.i(self)&&!u.g(V.url)&&(!V.headers||Object.keys(V.headers).reduce(($e,We)=>$e&&We==="accept",!0));a++;const Re=Pe?A(V,be):u.m(V,be);try{const $e=yield Re;delete z.abortController,z.state="completed",$e.data instanceof HTMLImageElement||u.b($e.data)?de($e):$e.data&&de({data:yield(Be=$e.data,typeof createImageBitmap=="function"?u.d(Be):u.f(Be)),cacheControl:$e.cacheControl,expires:$e.expires})}catch($e){delete z.abortController,Q($e)}finally{a--,S()}var Be}),S=()=>{const z=(()=>{for(const V of Object.keys(f))if(f[V]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let V=a;V<z&&n.length>0;V++){const J=n.shift();J.abortController.signal.aborted?V--:y(J)}},A=(z,V)=>new Promise((J,Q)=>{const de=new Image,be=z.url,Pe=z.credentials;Pe&&Pe==="include"?de.crossOrigin="use-credentials":(Pe&&Pe==="same-origin"||!u.s(be))&&(de.crossOrigin="anonymous"),V.signal.addEventListener("abort",()=>{de.src="",Q(u.c())}),de.fetchPriority="high",de.onload=()=>{de.onerror=de.onload=null,J({data:de})},de.onerror=()=>{de.onerror=de.onload=null,V.signal.aborted||Q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},de.src=be})}(G||(G={})),G.resetRequestQueue();class ae{constructor(n){this._transformRequestFn=n}transformRequest(n,a){return this._transformRequestFn&&this._transformRequestFn(n,a)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function q(v){var n=new u.A(3);return n[0]=v[0],n[1]=v[1],n[2]=v[2],n}var H,T=function(v,n,a){return v[0]=n[0]-a[0],v[1]=n[1]-a[1],v[2]=n[2]-a[2],v};H=new u.A(3),u.A!=Float32Array&&(H[0]=0,H[1]=0,H[2]=0);var j=function(v){var n=v[0],a=v[1];return n*n+a*a};function D(v){const n=[];if(typeof v=="string")n.push({id:"default",url:v});else if(v&&v.length>0){const a=[];for(const{id:d,url:f}of v){const y=`${d}${f}`;a.indexOf(y)===-1&&(a.push(y),n.push({id:d,url:f}))}}return n}function te(v,n,a){const d=v.split("?");return d[0]+=`${n}${a}`,d.join("?")}(function(){var v=new u.A(2);u.A!=Float32Array&&(v[0]=0,v[1]=0)})();class W{constructor(n,a,d,f){this.context=n,this.format=d,this.texture=n.gl.createTexture(),this.update(a,f)}update(n,a,d){const{width:f,height:y}=n,S=!(this.size&&this.size[0]===f&&this.size[1]===y||d),{context:A}=this,{gl:z}=A;if(this.useMipmap=!!(a&&a.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!a||a.premultiply!==!1)),S)this.size=[f,y],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||u.b(n)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,n):z.texImage2D(z.TEXTURE_2D,0,this.format,f,y,0,this.format,z.UNSIGNED_BYTE,n.data);else{const{x:V,y:J}=d||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||u.b(n)?z.texSubImage2D(z.TEXTURE_2D,0,V,J,z.RGBA,z.UNSIGNED_BYTE,n):z.texSubImage2D(z.TEXTURE_2D,0,V,J,f,y,z.RGBA,z.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D)}bind(n,a,d){const{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),d!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=y.LINEAR),n!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,n),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,d||n),this.filter=n),a!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,a),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function ve(v){const{userImage:n}=v;return!!(n&&n.render&&n.render())&&(v.data.replace(new Uint8Array(n.data.buffer)),!0)}class _e extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:a,promiseResolve:d}of this.requestors)d(this._getImagesForIds(a));this.requestors=[]}}getImage(n){const a=this.images[n];if(a&&!a.data&&a.spriteData){const d=a.spriteData;a.data=new u.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),a.spriteData=null}return a}addImage(n,a){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,a)&&(this.images[n]=a)}_validate(n,a){let d=!0;const f=a.data||a.spriteData;return this._validateStretch(a.stretchX,f&&f.width)||(this.fire(new u.j(new Error(`Image "${n}" has invalid "stretchX" value`))),d=!1),this._validateStretch(a.stretchY,f&&f.height)||(this.fire(new u.j(new Error(`Image "${n}" has invalid "stretchY" value`))),d=!1),this._validateContent(a.content,a)||(this.fire(new u.j(new Error(`Image "${n}" has invalid "content" value`))),d=!1),d}_validateStretch(n,a){if(!n)return!0;let d=0;for(const f of n){if(f[0]<d||f[1]<f[0]||a<f[1])return!1;d=f[1]}return!0}_validateContent(n,a){if(!n)return!0;if(n.length!==4)return!1;const d=a.spriteData,f=d&&d.width||a.data.width,y=d&&d.height||a.data.height;return!(n[0]<0||f<n[0]||n[1]<0||y<n[1]||n[2]<0||f<n[2]||n[3]<0||y<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,a,d=!0){const f=this.getImage(n);if(d&&(f.data.width!==a.data.width||f.data.height!==a.data.height))throw new Error(`size mismatch between old image (${f.data.width}x${f.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=f.version+1,this.images[n]=a,this.updatedImages[n]=!0}removeImage(n){const a=this.images[n];delete this.images[n],delete this.patterns[n],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((a,d)=>{let f=!0;if(!this.isLoaded())for(const y of n)this.images[y]||(f=!1);this.isLoaded()||f?a(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:a})})}_getImagesForIds(n){const a={};for(const d of n){let f=this.getImage(d);f||(this.fire(new u.k("styleimagemissing",{id:d})),f=this.getImage(d)),f?a[d]={data:f.data.clone(),pixelRatio:f.pixelRatio,sdf:f.sdf,version:f.version,stretchX:f.stretchX,stretchY:f.stretchY,content:f.content,textFitWidth:f.textFitWidth,textFitHeight:f.textFitHeight,hasRenderCallback:!!(f.userImage&&f.userImage.render)}:u.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){const{width:n,height:a}=this.atlasImage;return{width:n,height:a}}getPattern(n){const a=this.patterns[n],d=this.getImage(n);if(!d)return null;if(a&&a.position.version===d.version)return a.position;if(a)a.position.version=d.version;else{const f={w:d.data.width+2,h:d.data.height+2,x:0,y:0},y=new u.I(f,d);this.patterns[n]={bin:f,position:y}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const a=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new W(n,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const y in this.patterns)n.push(this.patterns[y].bin);const{w:a,h:d}=u.p(n),f=this.atlasImage;f.resize({width:a||1,height:d||1});for(const y in this.patterns){const{bin:S}=this.patterns[y],A=S.x+1,z=S.y+1,V=this.getImage(y).data,J=V.width,Q=V.height;u.R.copy(V,f,{x:0,y:0},{x:A,y:z},{width:J,height:Q}),u.R.copy(V,f,{x:0,y:Q-1},{x:A,y:z-1},{width:J,height:1}),u.R.copy(V,f,{x:0,y:0},{x:A,y:z+Q},{width:J,height:1}),u.R.copy(V,f,{x:J-1,y:0},{x:A-1,y:z},{width:1,height:Q}),u.R.copy(V,f,{x:0,y:0},{x:A+J,y:z},{width:1,height:Q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const a of n){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const d=this.getImage(a);d||u.w(`Image with ID: "${a}" was not found`),ve(d)&&this.updateImage(a,d)}}}const pe=1e20;function oe(v,n,a,d,f,y,S,A,z){for(let V=n;V<n+d;V++)ce(v,a*y+V,y,f,S,A,z);for(let V=a;V<a+f;V++)ce(v,V*y+n,1,d,S,A,z)}function ce(v,n,a,d,f,y,S){y[0]=0,S[0]=-pe,S[1]=pe,f[0]=v[n];for(let A=1,z=0,V=0;A<d;A++){f[A]=v[n+A*a];const J=A*A;do{const Q=y[z];V=(f[A]-f[Q]+J-Q*Q)/(A-Q)/2}while(V<=S[z]&&--z>-1);z++,y[z]=A,S[z]=V,S[z+1]=pe}for(let A=0,z=0;A<d;A++){for(;S[z+1]<A;)z++;const V=y[z],J=A-V;v[n+A*a]=f[V]+J*J}}class ee{constructor(n,a){this.requestManager=n,this.localIdeographFontFamily=a,this.entries={}}setURL(n){this.url=n}getGlyphs(n){return u._(this,void 0,void 0,function*(){const a=[];for(const y in n)for(const S of n[y])a.push(this._getAndCacheGlyphsPromise(y,S));const d=yield Promise.all(a),f={};for(const{stack:y,id:S,glyph:A}of d)f[y]||(f[y]={}),f[y][S]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};return f})}_getAndCacheGlyphsPromise(n,a){return u._(this,void 0,void 0,function*(){let d=this.entries[n];d||(d=this.entries[n]={glyphs:{},requests:{},ranges:{}});let f=d.glyphs[a];if(f!==void 0)return{stack:n,id:a,glyph:f};if(f=this._tinySDF(d,n,a),f)return d.glyphs[a]=f,{stack:n,id:a,glyph:f};const y=Math.floor(a/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[y])return{stack:n,id:a,glyph:f};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[y]){const A=ee.loadGlyphRange(n,y,this.url,this.requestManager);d.requests[y]=A}const S=yield d.requests[y];for(const A in S)this._doesCharSupportLocalGlyph(+A)||(d.glyphs[+A]=S[+A]);return d.ranges[y]=!0,{stack:n,id:a,glyph:S[a]||null}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(n))}_tinySDF(n,a,d){const f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(d))return;let y=n.tinySDF;if(!y){let A="400";/bold/i.test(a)?A="900":/medium/i.test(a)?A="500":/light/i.test(a)&&(A="200"),y=n.tinySDF=new ee.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:f,fontWeight:A})}const S=y.draw(String.fromCharCode(d));return{id:d,bitmap:new u.o({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}ee.loadGlyphRange=function(v,n,a,d){return u._(this,void 0,void 0,function*(){const f=256*n,y=f+255,S=d.transformRequest(a.replace("{fontstack}",v).replace("{range}",`${f}-${y}`),"Glyphs"),A=yield u.l(S,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${n}, ${f}-${y}`);const z={};for(const V of u.n(A.data))z[V.id]=V;return z})},ee.TinySDF=class{constructor({fontSize:v=24,buffer:n=3,radius:a=8,cutoff:d=.25,fontFamily:f="sans-serif",fontWeight:y="normal",fontStyle:S="normal"}={}){this.buffer=n,this.cutoff=d,this.radius=a;const A=this.size=v+4*n,z=this._createCanvas(A),V=this.ctx=z.getContext("2d",{willReadFrequently:!0});V.font=`${S} ${y} ${v}px ${f}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(v){const n=document.createElement("canvas");return n.width=n.height=v,n}draw(v){const{width:n,actualBoundingBoxAscent:a,actualBoundingBoxDescent:d,actualBoundingBoxLeft:f,actualBoundingBoxRight:y}=this.ctx.measureText(v),S=Math.ceil(a),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-f))),z=Math.min(this.size-this.buffer,S+Math.ceil(d)),V=A+2*this.buffer,J=z+2*this.buffer,Q=Math.max(V*J,0),de=new Uint8ClampedArray(Q),be={data:de,width:V,height:J,glyphWidth:A,glyphHeight:z,glyphTop:S,glyphLeft:0,glyphAdvance:n};if(A===0||z===0)return be;const{ctx:Pe,buffer:Re,gridInner:Be,gridOuter:$e}=this;Pe.clearRect(Re,Re,A,z),Pe.fillText(v,Re,Re+S);const We=Pe.getImageData(Re,Re,A,z);$e.fill(pe,0,Q),Be.fill(0,0,Q);for(let Fe=0;Fe<z;Fe++)for(let Ye=0;Ye<A;Ye++){const Je=We.data[4*(Fe*A+Ye)+3]/255;if(Je===0)continue;const ot=(Fe+Re)*V+Ye+Re;if(Je===1)$e[ot]=0,Be[ot]=pe;else{const yt=.5-Je;$e[ot]=yt>0?yt*yt:0,Be[ot]=yt<0?yt*yt:0}}oe($e,0,0,V,J,V,this.f,this.v,this.z),oe(Be,Re,Re,A,z,V,this.f,this.v,this.z);for(let Fe=0;Fe<Q;Fe++){const Ye=Math.sqrt($e[Fe])-Math.sqrt(Be[Fe]);de[Fe]=Math.round(255-255*(Ye/this.radius+this.cutoff))}return be}};class re{constructor(){this.specification=u.v.light.position}possiblyEvaluate(n,a){return u.x(n.expression.evaluate(a))}interpolate(n,a,d){return{x:u.y.number(n.x,a.x,d),y:u.y.number(n.y,a.y,d),z:u.y.number(n.z,a.z,d)}}}let fe;class Se extends u.E{constructor(n){super(),fe=fe||new u.q({anchor:new u.D(u.v.light.anchor),position:new re,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(fe),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,a={}){if(!this._validate(u.r,n,a))for(const d in n){const f=n[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),f):this._transitionable.setValue(d,f)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,a,d){return(!d||d.validate!==!1)&&u.t(this,n.call(u.u,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const Ie=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Ne extends u.E{constructor(n){super(),this._transitionable=new u.T(Ie),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.z(0))}setSky(n,a={}){if(!this._validate(u.B,n,a)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const d in n){const f=n[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),f):this._transitionable.setValue(d,f)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,a,d={}){return(d==null?void 0:d.validate)!==!1&&u.t(this,n.call(u.u,u.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class Ae{constructor(n,a){this.width=n,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,a){const d=n.join(",")+String(a);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(n,a)),this.dashEntry[d]}getDashRanges(n,a,d){const f=[];let y=n.length%2==1?-n[n.length-1]*d:0,S=n[0]*d,A=!0;f.push({left:y,right:S,isDash:A,zeroLength:n[0]===0});let z=n[0];for(let V=1;V<n.length;V++){A=!A;const J=n[V];y=z*d,z+=J,S=z*d,f.push({left:y,right:S,isDash:A,zeroLength:J===0})}return f}addRoundDash(n,a,d){const f=a/2;for(let y=-d;y<=d;y++){const S=this.width*(this.nextRow+d+y);let A=0,z=n[A];for(let V=0;V<this.width;V++){V/z.right>1&&(z=n[++A]);const J=Math.abs(V-z.left),Q=Math.abs(V-z.right),de=Math.min(J,Q);let be;const Pe=y/d*(f+1);if(z.isDash){const Re=f-Math.abs(Pe);be=Math.sqrt(de*de+Re*Re)}else be=f-Math.sqrt(de*de+Pe*Pe);this.data[S+V]=Math.max(0,Math.min(255,be+128))}}}addRegularDash(n){for(let A=n.length-1;A>=0;--A){const z=n[A],V=n[A+1];z.zeroLength?n.splice(A,1):V&&V.isDash===z.isDash&&(V.left=z.left,n.splice(A,1))}const a=n[0],d=n[n.length-1];a.isDash===d.isDash&&(a.left=d.left-this.width,d.right=a.right+this.width);const f=this.width*this.nextRow;let y=0,S=n[y];for(let A=0;A<this.width;A++){A/S.right>1&&(S=n[++y]);const z=Math.abs(A-S.left),V=Math.abs(A-S.right),J=Math.min(z,V);this.data[f+A]=Math.max(0,Math.min(255,(S.isDash?J:-J)+128))}}addDash(n,a){const d=a?7:0,f=2*d+1;if(this.nextRow+f>this.height)return u.w("LineAtlas out of space"),null;let y=0;for(let A=0;A<n.length;A++)y+=n[A];if(y!==0){const A=this.width/y,z=this.getDashRanges(n,this.width,A);a?this.addRoundDash(z,A,d):this.addRegularDash(z)}const S={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:y};return this.nextRow+=f,this.dirty=!0,S}bind(n){const a=n.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}const ze="maplibre_preloaded_worker_pool";class He{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<He.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ze]}numActive(){return Object.keys(this.active).length}}const Ze=Math.floor(b.hardwareConcurrency/2);let it,ct;function vt(){return it||(it=new He),it}He.workerCount=u.C(globalThis)?Math.max(Math.min(Ze,3),1):1;class Mt{constructor(n,a){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=a;const d=this.workerPool.acquire(a);for(let f=0;f<d.length;f++){const y=new u.F(d[f],a);y.name=`Worker ${f}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,a){const d=[];for(const f of this.actors)d.push(f.sendAsync({type:n,data:a}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,a){for(const d of this.actors)d.registerMessageHandler(n,a)}}function pt(){return ct||(ct=new Mt(vt(),u.G),ct.registerMessageHandler("GR",(v,n,a)=>u.m(n,a))),ct}function xt(v,n){const a=u.H();return u.J(a,a,[1,1,0]),u.K(a,a,[.5*v.width,.5*v.height,1]),u.L(a,a,v.calculatePosMatrix(n.toUnwrapped()))}function Gt(v,n,a,d,f,y){const S=function(Q,de,be){if(Q)for(const Pe of Q){const Re=de[Pe];if(Re&&Re.source===be&&Re.type==="fill-extrusion")return!0}else for(const Pe in de){const Re=de[Pe];if(Re.source===be&&Re.type==="fill-extrusion")return!0}return!1}(f&&f.layers,n,v.id),A=y.maxPitchScaleFactor(),z=v.tilesIn(d,A,S);z.sort(Ht);const V=[];for(const Q of z)V.push({wrappedTileID:Q.tileID.wrapped().key,queryResults:Q.tile.queryRenderedFeatures(n,a,v._state,Q.queryGeometry,Q.cameraQueryGeometry,Q.scale,f,y,A,xt(v.transform,Q.tileID))});const J=function(Q){const de={},be={};for(const Pe of Q){const Re=Pe.queryResults,Be=Pe.wrappedTileID,$e=be[Be]=be[Be]||{};for(const We in Re){const Fe=Re[We],Ye=$e[We]=$e[We]||{},Je=de[We]=de[We]||[];for(const ot of Fe)Ye[ot.featureIndex]||(Ye[ot.featureIndex]=!0,Je.push(ot))}}return de}(V);for(const Q in J)J[Q].forEach(de=>{const be=de.feature,Pe=v.getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=Pe});return J}function Ht(v,n){const a=v.tileID,d=n.tileID;return a.overscaledZ-d.overscaledZ||a.canonical.y-d.canonical.y||a.wrap-d.wrap||a.canonical.x-d.canonical.x}function an(v,n,a){return u._(this,void 0,void 0,function*(){let d=v;if(v.url?d=(yield u.h(n.transformRequest(v.url,"Source"),a)).data:yield b.frameAsync(a),!d)return null;const f=u.M(u.e(d,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(f.vectorLayerIds=d.vector_layers.map(y=>y.id)),f})}class et{constructor(n,a){n&&(a?this.setSouthWest(n).setNorthEast(a):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof u.N?new u.N(n.lng,n.lat):u.N.convert(n),this}setSouthWest(n){return this._sw=n instanceof u.N?new u.N(n.lng,n.lat):u.N.convert(n),this}extend(n){const a=this._sw,d=this._ne;let f,y;if(n instanceof u.N)f=n,y=n;else{if(!(n instanceof et))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(et.convert(n)):this.extend(u.N.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(u.N.convert(n)):this;if(f=n._sw,y=n._ne,!f||!y)return this}return a||d?(a.lng=Math.min(f.lng,a.lng),a.lat=Math.min(f.lat,a.lat),d.lng=Math.max(y.lng,d.lng),d.lat=Math.max(y.lat,d.lat)):(this._sw=new u.N(f.lng,f.lat),this._ne=new u.N(y.lng,y.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:a,lat:d}=u.N.convert(n);let f=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&f}static convert(n){return n instanceof et?n:n&&new et(n)}static fromLngLat(n,a=0){const d=360*a/40075017,f=d/Math.cos(Math.PI/180*n.lat);return new et(new u.N(n.lng-f,n.lat-d),new u.N(n.lng+f,n.lat+d))}adjustAntiMeridian(){const n=new u.N(this._sw.lng,this._sw.lat),a=new u.N(this._ne.lng,this._ne.lat);return new et(n,n.lng>a.lng?new u.N(a.lng+360,a.lat):a)}}class vn{constructor(n,a,d){this.bounds=et.convert(this.validateBounds(n)),this.minzoom=a||0,this.maxzoom=d||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const a=Math.pow(2,n.z),d=Math.floor(u.O(this.bounds.getWest())*a),f=Math.floor(u.Q(this.bounds.getNorth())*a),y=Math.ceil(u.O(this.bounds.getEast())*a),S=Math.ceil(u.Q(this.bounds.getSouth())*a);return n.x>=d&&n.x<y&&n.y>=f&&n.y<S}}class ln extends u.E{constructor(n,a,d,f){if(super(),this.id=n,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(a,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield an(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(u.e(this,n),n.bounds&&(this.tileBounds=new vn(n.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new u.j(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(n){return u._(this,void 0,void 0,function*(){const a=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(a,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let f="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((y,S)=>{n.reloadPromise={resolve:y,reject:S}})}else n.actor=this.dispatcher.getActor(),f="LT";n.abortController=new AbortController;try{const y=yield n.actor.sendAsync({type:f,data:d},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,y)}catch(y){if(delete n.abortController,n.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(n,null)}})}_afterTileLoadWorkerResponse(n,a){if(a&&a.resourceTiming&&(n.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&n.setExpiryData(a),n.loadVectorData(a,this.map.painter),n.reloadPromise){const d=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(d.resolve).catch(d.reject)}}abortTile(n){return u._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return u._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Vt extends u.E{constructor(n,a,d,f){super(),this.id=n,this.dispatcher=d,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},a),u.e(this,u.M(a,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield an(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(u.e(this,n),n.bounds&&(this.tileBounds=new vn(n.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new u.j(n))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return u.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return u._(this,void 0,void 0,function*(){const a=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const d=yield G.getImage(this.map._requestManager.transformRequest(a,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&n.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const f=this.map.painter.context,y=f.gl,S=d.data;n.texture=this.map.painter.getTileTexture(S.width),n.texture?n.texture.update(S,{useMipmap:!0}):(n.texture=new W(f,S,y.RGBA,{useMipmap:!0}),n.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(d){if(delete n.abortController,n.aborted)n.state="unloaded";else if(d)throw n.state="errored",d}})}abortTile(n){return u._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return u._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class Ee extends Vt{constructor(n,a,d,f){super(n,a,d,f),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(n){return u._(this,void 0,void 0,function*(){const a=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(a,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const f=yield G.getImage(d,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(f&&f.data){const y=f.data;this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&n.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const S=u.b(y)&&u.U()?y:yield this.readImageNow(y),A={type:this.type,uid:n.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const z=yield n.actor.sendAsync({type:"LDT",data:A});n.dem=z,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(f){if(delete n.abortController,n.aborted)n.state="unloaded";else if(f)throw n.state="errored",f}})}readImageNow(n){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.V()){const a=n.width+2,d=n.height+2;try{return new u.R({width:a,height:d},yield u.W(n,-1,-1,a,d))}catch{}}return b.getImageData(n,1)})}_getNeighboringTiles(n){const a=n.canonical,d=Math.pow(2,a.z),f=(a.x-1+d)%d,y=a.x===0?n.wrap-1:n.wrap,S=(a.x+1+d)%d,A=a.x+1===d?n.wrap+1:n.wrap,z={};return z[new u.S(n.overscaledZ,y,a.z,f,a.y).key]={backfilled:!1},z[new u.S(n.overscaledZ,A,a.z,S,a.y).key]={backfilled:!1},a.y>0&&(z[new u.S(n.overscaledZ,y,a.z,f,a.y-1).key]={backfilled:!1},z[new u.S(n.overscaledZ,n.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},z[new u.S(n.overscaledZ,A,a.z,S,a.y-1).key]={backfilled:!1}),a.y+1<d&&(z[new u.S(n.overscaledZ,y,a.z,f,a.y+1).key]={backfilled:!1},z[new u.S(n.overscaledZ,n.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},z[new u.S(n.overscaledZ,A,a.z,S,a.y+1).key]={backfilled:!1}),z}unloadTile(n){return u._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}class B extends u.E{constructor(n,a,d,f){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(f),this._data=a.data,this._options=u.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const y=u.X/this.tileSize;a.clusterMaxZoom!==void 0&&this.maxzoom<=a.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${a.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*y,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*y,extent:u.X,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:u.X,radius:(a.clusterRadius||50)*y,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}getData(){return u._(this,void 0,void 0,function*(){const n=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=n.clusterRadius),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,a,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:a,offset:d}})}_updateWorkerData(n){return u._(this,void 0,void 0,function*(){const a=u.e({type:this.type},this.workerOptions);n?a.dataDiff=n:typeof this._data=="string"?(a.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:a});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let f=null;d.resourceTiming&&d.resourceTiming[this.id]&&(f=d.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&f&&f.length>0&&u.e(y,{resourceTiming:f}),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(n){return u._(this,void 0,void 0,function*(){const a=n.actor?"RT":"LT";n.actor=this.actor;const d={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.abortController=new AbortController;const f=yield this.actor.sendAsync({type:a,data:d},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(f,this.map.painter,a==="RT")})}abortTile(n){return u._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return u._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var L=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ge extends u.E{constructor(n,a,d,f){super(),this.id=n,this.dispatcher=d,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=a}load(n){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const a=yield G.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,n&&(this.coordinates=n),this._finishLoading())}catch(a){this._request=null,this._loaded=!0,this.fire(new u.j(a))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const a=n.map(u.Z.fromLngLat);this.tileID=function(f){let y=1/0,S=1/0,A=-1/0,z=-1/0;for(const de of f)y=Math.min(y,de.x),S=Math.min(S,de.y),A=Math.max(A,de.x),z=Math.max(z,de.y);const V=Math.max(A-y,z-S),J=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),Q=Math.pow(2,J);return new u.a1(J,Math.floor((y+A)/2*Q),Math.floor((S+z)/2*Q))}(a),this.minzoom=this.maxzoom=this.tileID.z;const d=a.map(f=>this.tileID.getTilePoint(f)._round());return this._boundsArray=new u.$,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,u.X,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,u.X),this._boundsArray.emplaceBack(d[2].x,d[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,a=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new W(n,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let d=!1;for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Xe extends ge{constructor(n,a,d,f){super(n,a,d,f),this.roundZoom=!0,this.type="video",this.options=a}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const a of n.urls)this.urls.push(this.map._requestManager.transformRequest(a,"Source").url);try{const a=yield u.a3(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new u.j(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const a=this.video.seekable;n<a.start(0)||n>a.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,a=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new W(n,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let d=!1;for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class tt extends ge{constructor(n,a,d,f){super(n,a,d,f),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(S=>typeof S!="number"))||this.fire(new u.j(new u.a2(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${n}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${n}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new W(a,this.canvas,d.RGBA,{premultiply:!0});let f=!1;for(const y in this.tiles){const S=this.tiles[y];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,f=!0)}f&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const ht={},ue=v=>{switch(v){case"geojson":return B;case"image":return ge;case"raster":return Vt;case"raster-dem":return Ee;case"vector":return ln;case"video":return Xe;case"canvas":return tt}return ht[v]},k="RTLPluginLoaded";class U extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=pt()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return u._(this,arguments,void 0,function*(a,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(k))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Te=null;function Ve(){return Te||(Te=new U),Te}class rt{constructor(n,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=u.a4(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const a=n+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,a,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(f,y){const S={};if(!y)return S;for(const A of f){const z=A.layerIds.map(V=>y.getLayer(V)).filter(Boolean);if(z.length!==0){A.layers=z,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(V=>z.filter(J=>J.id===V)[0]));for(const V of z)S[V.id]=A}}return S}(n.buckets,a.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const y=this.buckets[f];if(y instanceof u.a6){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const y=this.buckets[f];if(y instanceof u.a6&&y.hasRTLText){this.hasRTLText=!0,Ve().lazyLoad();break}}this.queryPadding=0;for(const f in this.buckets){const y=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(f).queryRadius(y))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const d in this.buckets){const f=this.buckets[d];f.uploadPending()&&f.upload(n)}const a=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new W(n,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new W(n,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,a,d,f,y,S,A,z,V,J){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:y,scale:S,tileSize:this.tileSize,pixelPosMatrix:J,transform:z,params:A,queryPadding:this.queryPadding*V},n,a,d):{}}querySourceFeatures(n,a){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const f=d.loadVTLayers(),y=a&&a.sourceLayer?a.sourceLayer:"",S=f._geojsonTileLayer||f[y];if(!S)return;const A=u.a7(a&&a.filter),{z,x:V,y:J}=this.tileID.canonical,Q={z,x:V,y:J};for(let de=0;de<S.length;de++){const be=S.feature(de);if(A.needGeometry){const Be=u.a8(be,!0);if(!A.filter(new u.z(this.tileID.overscaledZ),Be,this.tileID.canonical))continue}else if(!A.filter(new u.z(this.tileID.overscaledZ),be))continue;const Pe=d.getId(be,y),Re=new u.a9(be,z,V,J,Pe);Re.tile=Q,n.push(Re)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const a=this.expirationTime;if(n.cacheControl){const d=u.aa(n.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const d=Date.now();let f=!1;if(this.expirationTime>d)f=!1;else if(a)if(this.expirationTime<a)f=!0;else{const y=this.expirationTime-a;y?this.expirationTime=d+Math.max(y,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const f in this.buckets){if(!a.style.hasLayer(f))continue;const y=this.buckets[f],S=y.layers[0].sourceLayer||"_geojsonTileLayer",A=d[S],z=n[S];if(!A||!z||Object.keys(z).length===0)continue;y.update(z,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const V=a&&a.style&&a.style.getLayer(f);V&&(this.queryPadding=Math.max(this.queryPadding,V.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=b.now()+n}setDependencies(n,a){const d={};for(const f of a)d[f]=!0;this.dependencies[n]=d}hasDependency(n,a){for(const d of n){const f=this.dependencies[d];if(f){for(const y of a)if(f[y])return!0}}return!1}}class Ge{constructor(n,a){this.max=n,this.onRemove=a,this.reset()}reset(){for(const n in this.data)for(const a of this.data[n])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(n,a,d){const f=n.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const y={value:a,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(n,y)},d)),this.data[f].push(y),this.order.push(f),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const a=this.data[n].shift();return a.timeout&&clearTimeout(a.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),a.value}getByKey(n){const a=this.data[n];return a?a[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,a){if(!this.has(n))return this;const d=n.wrapped().key,f=a===void 0?0:this.data[d].indexOf(a),y=this.data[d][f];return this.data[d].splice(f,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(n){const a=[];for(const d in this.data)for(const f of this.data[d])n(f.value)||a.push(f);for(const d of a)this.remove(d.value.tileID,d)}}class St{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,a,d){const f=String(a);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][f]=this.stateChanges[n][f]||{},u.e(this.stateChanges[n][f],d),this.deletedStates[n]===null){this.deletedStates[n]={};for(const y in this.state[n])y!==f&&(this.deletedStates[n][y]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][f]===null){this.deletedStates[n][f]={};for(const y in this.state[n][f])d[y]||(this.deletedStates[n][f][y]=null)}else for(const y in d)this.deletedStates[n]&&this.deletedStates[n][f]&&this.deletedStates[n][f][y]===null&&delete this.deletedStates[n][f][y]}removeFeatureState(n,a,d){if(this.deletedStates[n]===null)return;const f=String(a);if(this.deletedStates[n]=this.deletedStates[n]||{},d&&a!==void 0)this.deletedStates[n][f]!==null&&(this.deletedStates[n][f]=this.deletedStates[n][f]||{},this.deletedStates[n][f][d]=null);else if(a!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][f])for(d in this.deletedStates[n][f]={},this.stateChanges[n][f])this.deletedStates[n][f][d]=null;else this.deletedStates[n][f]=null;else this.deletedStates[n]=null}getState(n,a){const d=String(a),f=u.e({},(this.state[n]||{})[d],(this.stateChanges[n]||{})[d]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const y=this.deletedStates[n][a];if(y===null)return{};for(const S in y)delete f[S]}return f}initializeTileState(n,a){n.setFeatureState(this.state,a)}coalesceChanges(n,a){const d={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const y={};for(const S in this.stateChanges[f])this.state[f][S]||(this.state[f][S]={}),u.e(this.state[f][S],this.stateChanges[f][S]),y[S]=this.state[f][S];d[f]=y}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const y={};if(this.deletedStates[f]===null)for(const S in this.state[f])y[S]={},this.state[f][S]={};else for(const S in this.deletedStates[f]){if(this.deletedStates[f][S]===null)this.state[f][S]={};else for(const A of Object.keys(this.deletedStates[f][S]))delete this.state[f][S][A];y[S]=this.state[f][S]}d[f]=d[f]||{},u.e(d[f],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const f in n)n[f].setFeatureState(d,a)}}class Pt extends u.E{constructor(n,a,d){super(),this.id=n,this.dispatcher=d,this.on("data",f=>this._dataHandler(f)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((f,y,S,A)=>{const z=new(ue(y.type))(f,y,S,A);if(z.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${z.id}`);return z})(n,a,d,this),this._tiles={},this._cache=new Ge(0,f=>this._unloadTile(f)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new St,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const a=this._tiles[n];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,a,d){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,a,d)}catch(f){n.state="errored",f.status!==404?this._source.fire(new u.j(f,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new u.k("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const d=this._tiles[a];d.upload(n),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(mn).map(n=>n.key)}getRenderableIds(n){const a=[];for(const d in this._tiles)this._isIdRenderable(d,n)&&a.push(this._tiles[d]);return n?a.sort((d,f)=>{const y=d.tileID,S=f.tileID,A=new u.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),z=new u.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-S.overscaledZ||z.y-A.y||z.x-A.x}).map(d=>d.tileID.key):a.map(d=>d.tileID).sort(mn).map(d=>d.key)}hasRenderableParent(n){const a=this.findLoadedParent(n,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(n,a){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(a||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,a){return u._(this,void 0,void 0,function*(){const d=this._tiles[n];d&&(d.state!=="loading"&&(d.state=a),yield this._loadTile(d,n,a))})}_tileLoaded(n,a,d){n.timeAdded=b.now(),d==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(a,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const a=this.getRenderableIds();for(let f=0;f<a.length;f++){const y=a[f];if(n.neighboringTiles&&n.neighboringTiles[y]){const S=this.getTileByID(y);d(n,S),d(S,n)}}function d(f,y){f.needsHillshadePrepare=!0,f.needsTerrainPrepare=!0;let S=y.tileID.canonical.x-f.tileID.canonical.x;const A=y.tileID.canonical.y-f.tileID.canonical.y,z=Math.pow(2,f.tileID.canonical.z),V=y.tileID.key;S===0&&A===0||Math.abs(A)>1||(Math.abs(S)>1&&(Math.abs(S+z)===1?S+=z:Math.abs(S-z)===1&&(S-=z)),y.dem&&f.dem&&(f.dem.backfillBorder(y.dem,S,A),f.neighboringTiles&&f.neighboringTiles[V]&&(f.neighboringTiles[V].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,a,d,f){for(const y in this._tiles){let S=this._tiles[y];if(f[y]||!S.hasData()||S.tileID.overscaledZ<=a||S.tileID.overscaledZ>d)continue;let A=S.tileID;for(;S&&S.tileID.overscaledZ>a+1;){const V=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[V.key],S&&S.hasData()&&(A=V)}let z=A;for(;z.overscaledZ>a;)if(z=z.scaledTo(z.overscaledZ-1),n[z.key]){f[A.key]=A;break}}}findLoadedParent(n,a){if(n.key in this._loadedParentTiles){const d=this._loadedParentTiles[n.key];return d&&d.tileID.overscaledZ>=a?d:null}for(let d=n.overscaledZ-1;d>=a;d--){const f=n.scaledTo(d),y=this._getLoadedTile(f);if(y)return y}}findLoadedSibling(n){return this._getLoadedTile(n)}_getLoadedTile(n){const a=this._tiles[n.key];return a&&a.hasData()?a:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const a=Math.ceil(n.width/this._source.tileSize)+1,d=Math.ceil(n.height/this._source.tileSize)+1,f=Math.floor(a*d*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(y)}handleWrapJump(n){const a=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,a){const d={};for(const f in this._tiles){const y=this._tiles[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+a),d[y.tileID.key]=y}this._tiles=d;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}_updateCoveredAndRetainedTiles(n,a,d,f,y,S){const A={},z={},V=Object.keys(n),J=b.now();for(const Q of V){const de=n[Q],be=this._tiles[Q];if(!be||be.fadeEndTime!==0&&be.fadeEndTime<=J)continue;const Pe=this.findLoadedParent(de,a),Re=this.findLoadedSibling(de),Be=Pe||Re||null;Be&&(this._addTile(Be.tileID),A[Be.tileID.key]=Be.tileID),z[Q]=de}this._retainLoadedChildren(z,f,d,n);for(const Q in A)n[Q]||(this._coveredTiles[Q]=!0,n[Q]=A[Q]);if(S){const Q={},de={};for(const be of y)this._tiles[be.key].hasData()?Q[be.key]=be:de[be.key]=be;for(const be in de){const Pe=de[be].children(this._source.maxzoom);this._tiles[Pe[0].key]&&this._tiles[Pe[1].key]&&this._tiles[Pe[2].key]&&this._tiles[Pe[3].key]&&(Q[Pe[0].key]=n[Pe[0].key]=Pe[0],Q[Pe[1].key]=n[Pe[1].key]=Pe[1],Q[Pe[2].key]=n[Pe[2].key]=Pe[2],Q[Pe[3].key]=n[Pe[3].key]=Pe[3],delete de[be])}for(const be in de){const Pe=de[be],Re=this.findLoadedParent(Pe,this._source.minzoom),Be=this.findLoadedSibling(Pe),$e=Re||Be||null;if($e){Q[$e.tileID.key]=n[$e.tileID.key]=$e.tileID;for(const We in Q)Q[We].isChildOf($e.tileID)&&delete Q[We]}}for(const be in this._tiles)Q[be]||(this._coveredTiles[be]=!0)}}update(n,a){if(!this._sourceLoaded||this._paused)return;let d;this.transform=n,this.terrain=a,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(J=>new u.S(J.canonical.z,J.wrap,J.canonical.z,J.canonical.x,J.canonical.y)):(d=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a}),this._source.hasTile&&(d=d.filter(J=>this._source.hasTile(J)))):d=[];const f=n.coveringZoomLevel(this._source),y=Math.max(f-Pt.maxOverzooming,this._source.minzoom),S=Math.max(f+Pt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const J={};for(const Q of d)if(Q.canonical.z>this._source.minzoom){const de=Q.scaledTo(Q.canonical.z-1);J[de.key]=de;const be=Q.scaledTo(Math.max(this._source.minzoom,Math.min(Q.canonical.z,5)));J[be.key]=be}d=d.concat(Object.values(J))}const A=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const z=this._updateRetainedTiles(d,f);bn(this._source.type)&&this._updateCoveredAndRetainedTiles(z,y,S,f,d,a);for(const J in z)this._tiles[J].clearFadeHold();const V=u.ab(this._tiles,z);for(const J of V){const Q=this._tiles[J];Q.hasSymbolBuckets&&!Q.holdingForFade()?Q.setHoldDuration(this.map._fadeDuration):Q.hasSymbolBuckets&&!Q.symbolFadeFinished()||this._removeTile(J)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,a){var d;const f={},y={},S=Math.max(a-Pt.maxOverzooming,this._source.minzoom),A=Math.max(a+Pt.maxUnderzooming,this._source.minzoom),z={};for(const V of n){const J=this._addTile(V);f[V.key]=V,J.hasData()||a<this._source.maxzoom&&(z[V.key]=V)}this._retainLoadedChildren(z,a,A,f);for(const V of n){let J=this._tiles[V.key];if(J.hasData())continue;if(a+1>this._source.maxzoom){const de=V.children(this._source.maxzoom)[0],be=this.getTile(de);if(be&&be.hasData()){f[de.key]=de;continue}}else{const de=V.children(this._source.maxzoom);if(f[de[0].key]&&f[de[1].key]&&f[de[2].key]&&f[de[3].key])continue}let Q=J.wasRequested();for(let de=V.overscaledZ-1;de>=S;--de){const be=V.scaledTo(de);if(y[be.key])break;if(y[be.key]=!0,J=this.getTile(be),!J&&Q&&(J=this._addTile(be)),J){const Pe=J.hasData();if((Pe||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||Q)&&(f[be.key]=be),Q=J.wasRequested(),Pe)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const a=[];let d,f=this._tiles[n].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){d=this._loadedParentTiles[f.key];break}a.push(f.key);const y=f.scaledTo(f.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;f=y}for(const y of a)this._loadedParentTiles[y]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const n in this._tiles){const a=this._tiles[n].tileID,d=this._getLoadedTile(a);this._loadedSiblingTiles[a.key]=d}}_addTile(n){let a=this._tiles[n.key];if(a)return a;a=this._cache.getAndRemove(n),a&&(this._setTileReloadTimer(n.key,a),a.tileID=n,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,a)));const d=a;return a||(a=new rt(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(a,n.key,a.state)),a.uses++,this._tiles[n.key]=a,d||this._source.fire(new u.k("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(n,a){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const d=a.getExpiryTimeout();d&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},d))}_removeTile(n){const a=this._tiles[n];a&&(a.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}_dataHandler(n){const a=n.sourceDataType;n.dataType==="source"&&a==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&n.dataType==="source"&&a==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,a,d){const f=[],y=this.transform;if(!y)return f;const S=d?y.getCameraQueryGeometry(n):n,A=n.map(Pe=>y.pointCoordinate(Pe,this.terrain)),z=S.map(Pe=>y.pointCoordinate(Pe,this.terrain)),V=this.getIds();let J=1/0,Q=1/0,de=-1/0,be=-1/0;for(const Pe of z)J=Math.min(J,Pe.x),Q=Math.min(Q,Pe.y),de=Math.max(de,Pe.x),be=Math.max(be,Pe.y);for(let Pe=0;Pe<V.length;Pe++){const Re=this._tiles[V[Pe]];if(Re.holdingForFade())continue;const Be=Re.tileID,$e=Math.pow(2,y.zoom-Re.tileID.overscaledZ),We=a*Re.queryPadding*u.X/Re.tileSize/$e,Fe=[Be.getTilePoint(new u.Z(J,Q)),Be.getTilePoint(new u.Z(de,be))];if(Fe[0].x-We<u.X&&Fe[0].y-We<u.X&&Fe[1].x+We>=0&&Fe[1].y+We>=0){const Ye=A.map(ot=>Be.getTilePoint(ot)),Je=z.map(ot=>Be.getTilePoint(ot));f.push({tile:Re,tileID:Be,queryGeometry:Ye,cameraQueryGeometry:Je,scale:$e})}}return f}getVisibleCoordinates(n){const a=this.getRenderableIds(n).map(d=>this._tiles[d].tileID);for(const d of a)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(bn(this._source.type)){const n=b.now();for(const a in this._tiles)if(this._tiles[a].fadeEndTime>=n)return!0}return!1}setFeatureState(n,a,d){this._state.updateState(n=n||"_geojsonTileLayer",a,d)}removeFeatureState(n,a,d){this._state.removeFeatureState(n=n||"_geojsonTileLayer",a,d)}getFeatureState(n,a){return this._state.getState(n=n||"_geojsonTileLayer",a)}setDependencies(n,a,d){const f=this._tiles[n];f&&f.setDependencies(a,d)}reloadTilesForDependencies(n,a){for(const d in this._tiles)this._tiles[d].hasDependency(n,a)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(n,a))}}function mn(v,n){const a=Math.abs(2*v.wrap)-+(v.wrap<0),d=Math.abs(2*n.wrap)-+(n.wrap<0);return v.overscaledZ-n.overscaledZ||d-a||n.canonical.y-v.canonical.y||n.canonical.x-v.canonical.x}function bn(v){return v==="raster"||v==="image"||v==="video"}Pt.maxOverzooming=10,Pt.maxUnderzooming=3;class Ot{constructor(n,a){this.reset(n,a)}reset(n,a){this.points=n||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=u.ac(n,0,1);let a=1,d=this._distances[a];const f=n*this.paddedLength+this.padding;for(;d<f&&a<this._distances.length;)d=this._distances[++a];const y=a-1,S=this._distances[y],A=d-S,z=A>0?(f-S)/A:0;return this.points[y].mult(1-z).add(this.points[a].mult(z))}}function Ar(v,n){let a=!0;return v==="always"||v!=="never"&&n!=="never"||(a=!1),a}class Qr{constructor(n,a,d){const f=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(n/d),this.yCellCount=Math.ceil(a/d);for(let S=0;S<this.xCellCount*this.yCellCount;S++)f.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=a,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,a,d,f,y){this._forEachCell(a,d,f,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(y)}insertCircle(n,a,d,f){this._forEachCell(a-f,d-f,a+f,d+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(a),this.circles.push(d),this.circles.push(f)}_insertBoxCell(n,a,d,f,y,S){this.boxCells[y].push(S)}_insertCircleCell(n,a,d,f,y,S){this.circleCells[y].push(S)}_query(n,a,d,f,y,S,A){if(d<0||n>this.width||f<0||a>this.height)return[];const z=[];if(n<=0&&a<=0&&this.width<=d&&this.height<=f){if(y)return[{key:null,x1:n,y1:a,x2:d,y2:f}];for(let V=0;V<this.boxKeys.length;V++)z.push({key:this.boxKeys[V],x1:this.bboxes[4*V],y1:this.bboxes[4*V+1],x2:this.bboxes[4*V+2],y2:this.bboxes[4*V+3]});for(let V=0;V<this.circleKeys.length;V++){const J=this.circles[3*V],Q=this.circles[3*V+1],de=this.circles[3*V+2];z.push({key:this.circleKeys[V],x1:J-de,y1:Q-de,x2:J+de,y2:Q+de})}}else this._forEachCell(n,a,d,f,this._queryCell,z,{hitTest:y,overlapMode:S,seenUids:{box:{},circle:{}}},A);return z}query(n,a,d,f){return this._query(n,a,d,f,!1,null)}hitTest(n,a,d,f,y,S){return this._query(n,a,d,f,!0,y,S).length>0}hitTestCircle(n,a,d,f,y){const S=n-d,A=n+d,z=a-d,V=a+d;if(A<0||S>this.width||V<0||z>this.height)return!1;const J=[];return this._forEachCell(S,z,A,V,this._queryCellCircle,J,{hitTest:!0,overlapMode:f,circle:{x:n,y:a,radius:d},seenUids:{box:{},circle:{}}},y),J.length>0}_queryCell(n,a,d,f,y,S,A,z){const{seenUids:V,hitTest:J,overlapMode:Q}=A,de=this.boxCells[y];if(de!==null){const Pe=this.bboxes;for(const Re of de)if(!V.box[Re]){V.box[Re]=!0;const Be=4*Re,$e=this.boxKeys[Re];if(n<=Pe[Be+2]&&a<=Pe[Be+3]&&d>=Pe[Be+0]&&f>=Pe[Be+1]&&(!z||z($e))&&(!J||!Ar(Q,$e.overlapMode))&&(S.push({key:$e,x1:Pe[Be],y1:Pe[Be+1],x2:Pe[Be+2],y2:Pe[Be+3]}),J))return!0}}const be=this.circleCells[y];if(be!==null){const Pe=this.circles;for(const Re of be)if(!V.circle[Re]){V.circle[Re]=!0;const Be=3*Re,$e=this.circleKeys[Re];if(this._circleAndRectCollide(Pe[Be],Pe[Be+1],Pe[Be+2],n,a,d,f)&&(!z||z($e))&&(!J||!Ar(Q,$e.overlapMode))){const We=Pe[Be],Fe=Pe[Be+1],Ye=Pe[Be+2];if(S.push({key:$e,x1:We-Ye,y1:Fe-Ye,x2:We+Ye,y2:Fe+Ye}),J)return!0}}}return!1}_queryCellCircle(n,a,d,f,y,S,A,z){const{circle:V,seenUids:J,overlapMode:Q}=A,de=this.boxCells[y];if(de!==null){const Pe=this.bboxes;for(const Re of de)if(!J.box[Re]){J.box[Re]=!0;const Be=4*Re,$e=this.boxKeys[Re];if(this._circleAndRectCollide(V.x,V.y,V.radius,Pe[Be+0],Pe[Be+1],Pe[Be+2],Pe[Be+3])&&(!z||z($e))&&!Ar(Q,$e.overlapMode))return S.push(!0),!0}}const be=this.circleCells[y];if(be!==null){const Pe=this.circles;for(const Re of be)if(!J.circle[Re]){J.circle[Re]=!0;const Be=3*Re,$e=this.circleKeys[Re];if(this._circlesCollide(Pe[Be],Pe[Be+1],Pe[Be+2],V.x,V.y,V.radius)&&(!z||z($e))&&!Ar(Q,$e.overlapMode))return S.push(!0),!0}}}_forEachCell(n,a,d,f,y,S,A,z){const V=this._convertToXCellCoord(n),J=this._convertToYCellCoord(a),Q=this._convertToXCellCoord(d),de=this._convertToYCellCoord(f);for(let be=V;be<=Q;be++)for(let Pe=J;Pe<=de;Pe++)if(y.call(this,n,a,d,f,this.xCellCount*Pe+be,S,A,z))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,a,d,f,y,S){const A=f-n,z=y-a,V=d+S;return V*V>A*A+z*z}_circleAndRectCollide(n,a,d,f,y,S,A){const z=(S-f)/2,V=Math.abs(n-(f+z));if(V>z+d)return!1;const J=(A-y)/2,Q=Math.abs(a-(y+J));if(Q>J+d)return!1;if(V<=z||Q<=J)return!0;const de=V-z,be=Q-J;return de*de+be*be<=d*d}}function Ti(v,n,a,d,f){const y=u.H();return n?(u.K(y,y,[1/f,1/f,1]),a||u.ad(y,y,d.angle)):u.L(y,d.labelPlaneMatrix,v),y}function Ur(v,n,a,d,f){if(n){const y=u.ae(v);return u.K(y,y,[f,f,1]),a||u.ad(y,y,-d.angle),y}return d.glCoordMatrix}function ke(v,n,a,d){let f;d?(f=[v,n,d(v,n),1],u.af(f,f,a)):(f=[v,n,0,1],En(f,f,a));const y=f[3];return{point:new u.P(f[0]/y,f[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function se(v,n){return .5+v/n*.5}function ie(v,n){return v.x>=-n[0]&&v.x<=n[0]&&v.y>=-n[1]&&v.y<=n[1]}function xe(v,n,a,d,f,y,S,A,z,V,J,Q,de,be,Pe){const Re=d?v.textSizeData:v.iconSizeData,Be=u.ag(Re,a.transform.zoom),$e=[256/a.width*2+1,256/a.height*2+1],We=d?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;We.clear();const Fe=v.lineVertexArray,Ye=d?v.text.placedSymbolArray:v.icon.placedSymbolArray,Je=a.transform.width/a.transform.height;let ot=!1;for(let yt=0;yt<Ye.length;yt++){const wt=Ye.get(yt);if(wt.hidden||wt.writingMode===u.ah.vertical&&!ot){en(wt.numGlyphs,We);continue}ot=!1;const Ft=ke(wt.anchorX,wt.anchorY,n,Pe);if(!ie(Ft.point,$e)){en(wt.numGlyphs,We);continue}const Dt=se(a.transform.cameraToCenterDistance,Ft.signedDistanceFromCamera),Ct=u.ai(Re,Be,wt),It=S?Ct/Dt:Ct*Dt,Wt={getElevation:Pe,labelPlaneMatrix:f,lineVertexArray:Fe,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:V,tileAnchorPoint:new u.P(wt.anchorX,wt.anchorY),unwrappedTileID:J,width:Q,height:de,translation:be},fn=je(Wt,wt,It,!1,A,n,y,v.glyphOffsetArray,We,Je,z);ot=fn.useVertical,(fn.notEnoughRoom||ot||fn.needsFlipping&&je(Wt,wt,It,!0,A,n,y,v.glyphOffsetArray,We,Je,z).notEnoughRoom)&&en(wt.numGlyphs,We)}d?v.text.dynamicLayoutVertexBuffer.updateData(We):v.icon.dynamicLayoutVertexBuffer.updateData(We)}function Ce(v,n,a,d,f,y,S,A){const z=y.glyphStartIndex+y.numGlyphs,V=y.lineStartIndex,J=y.lineStartIndex+y.lineLength,Q=n.getoffsetX(y.glyphStartIndex),de=n.getoffsetX(z-1),be=Et(v*Q,a,d,f,y.segment,V,J,A,S);if(!be)return null;const Pe=Et(v*de,a,d,f,y.segment,V,J,A,S);return Pe?A.projectionCache.anyProjectionOccluded?null:{first:be,last:Pe}:null}function Me(v,n,a,d){return v===u.ah.horizontal&&Math.abs(a.y-n.y)>Math.abs(a.x-n.x)*d?{useVertical:!0}:(v===u.ah.vertical?n.y<a.y:n.x>a.x)?{needsFlipping:!0}:null}function je(v,n,a,d,f,y,S,A,z,V,J){const Q=a/24,de=n.lineOffsetX*Q,be=n.lineOffsetY*Q;let Pe;if(n.numGlyphs>1){const Re=n.glyphStartIndex+n.numGlyphs,Be=n.lineStartIndex,$e=n.lineStartIndex+n.lineLength,We=Ce(Q,A,de,be,d,n,J,v);if(!We)return{notEnoughRoom:!0};const Fe=ke(We.first.point.x,We.first.point.y,S,v.getElevation).point,Ye=ke(We.last.point.x,We.last.point.y,S,v.getElevation).point;if(f&&!d){const Je=Me(n.writingMode,Fe,Ye,V);if(Je)return Je}Pe=[We.first];for(let Je=n.glyphStartIndex+1;Je<Re-1;Je++)Pe.push(Et(Q*A.getoffsetX(Je),de,be,d,n.segment,Be,$e,v,J));Pe.push(We.last)}else{if(f&&!d){const Be=ke(v.tileAnchorPoint.x,v.tileAnchorPoint.y,y,v.getElevation).point,$e=n.lineStartIndex+n.segment+1,We=new u.P(v.lineVertexArray.getx($e),v.lineVertexArray.gety($e)),Fe=ke(We.x,We.y,y,v.getElevation),Ye=Fe.signedDistanceFromCamera>0?Fe.point:function(ot,yt,wt,Ft,Dt,Ct){return Ke(ot,yt,wt,1,Dt,Ct)}(v.tileAnchorPoint,We,Be,0,y,v),Je=Me(n.writingMode,Be,Ye,V);if(Je)return Je}const Re=Et(Q*A.getoffsetX(n.glyphStartIndex),de,be,d,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,v,J);if(!Re||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Pe=[Re]}for(const Re of Pe)u.aj(z,Re.point,Re.angle);return{}}function Ke(v,n,a,d,f,y){const S=v.add(v.sub(n)._unit()),A=f!==void 0?ke(S.x,S.y,f,y.getElevation).point:at(S.x,S.y,y).point,z=a.sub(A);return a.add(z._mult(d/z.mag()))}function Le(v,n,a){const d=n.projectionCache;if(d.projections[v])return d.projections[v];const f=new u.P(n.lineVertexArray.getx(v),n.lineVertexArray.gety(v)),y=at(f.x,f.y,n);if(y.signedDistanceFromCamera>0)return d.projections[v]=y.point,d.anyProjectionOccluded=d.anyProjectionOccluded||y.isOccluded,y.point;const S=v-a.direction;return function(A,z,V,J,Q){return Ke(A,z,V,J,void 0,Q)}(a.distanceFromAnchor===0?n.tileAnchorPoint:new u.P(n.lineVertexArray.getx(S),n.lineVertexArray.gety(S)),f,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,n)}function at(v,n,a){const d=v+a.translation[0],f=n+a.translation[1];let y;return!a.pitchWithMap&&a.projection.useSpecialProjectionForSymbols?(y=a.projection.projectTileCoordinates(d,f,a.unwrappedTileID,a.getElevation),y.point.x=(.5*y.point.x+.5)*a.width,y.point.y=(.5*-y.point.y+.5)*a.height):(y=ke(d,f,a.labelPlaneMatrix,a.getElevation),y.isOccluded=!1),y}function dt(v,n,a){return v._unit()._perp()._mult(n*a)}function st(v,n,a,d,f,y,S,A,z){if(A.projectionCache.offsets[v])return A.projectionCache.offsets[v];const V=a.add(n);if(v+z.direction<d||v+z.direction>=f)return A.projectionCache.offsets[v]=V,V;const J=Le(v+z.direction,A,z),Q=dt(J.sub(a),S,z.direction),de=a.add(Q),be=J.add(Q);return A.projectionCache.offsets[v]=u.ak(y,V,de,be)||V,A.projectionCache.offsets[v]}function Et(v,n,a,d,f,y,S,A,z){const V=d?v-n:v+n;let J=V>0?1:-1,Q=0;d&&(J*=-1,Q=Math.PI),J<0&&(Q+=Math.PI);let de,be=J>0?y+f:y+f+1;A.projectionCache.cachedAnchorPoint?de=A.projectionCache.cachedAnchorPoint:(de=at(A.tileAnchorPoint.x,A.tileAnchorPoint.y,A).point,A.projectionCache.cachedAnchorPoint=de);let Pe,Re,Be=de,$e=de,We=0,Fe=0;const Ye=Math.abs(V),Je=[];let ot;for(;We+Fe<=Ye;){if(be+=J,be<y||be>=S)return null;We+=Fe,$e=Be,Re=Pe;const Ft={absOffsetX:Ye,direction:J,distanceFromAnchor:We,previousVertex:$e};if(Be=Le(be,A,Ft),a===0)Je.push($e),ot=Be.sub($e);else{let Dt;const Ct=Be.sub($e);Dt=Ct.mag()===0?dt(Le(be+J,A,Ft).sub(Be),a,J):dt(Ct,a,J),Re||(Re=$e.add(Dt)),Pe=st(be,Dt,Be,y,S,Re,a,A,Ft),Je.push(Re),ot=Pe.sub(Re)}Fe=ot.mag()}const yt=ot._mult((Ye-We)/Fe)._add(Re||$e),wt=Q+Math.atan2(Be.y-$e.y,Be.x-$e.x);return Je.push(yt),{point:yt,angle:z?wt:0,path:Je}}const qt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function en(v,n){for(let a=0;a<v;a++){const d=n.length;n.resize(d+4),n.float32.set(qt,3*d)}}function En(v,n,a){const d=n[0],f=n[1];return v[0]=a[0]*d+a[4]*f+a[12],v[1]=a[1]*d+a[5]*f+a[13],v[3]=a[3]*d+a[7]*f+a[15],v}const un=100;class Tn{constructor(n,a,d=new Qr(n.width+200,n.height+200,25),f=new Qr(n.width+200,n.height+200,25)){this.transform=n,this.mapProjection=a,this.grid=d,this.ignoredGrid=f,this.pitchFactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+un,this.screenBottomBoundary=n.height+un,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,a,d,f,y,S,A,z,V,J,Q){const de=n.anchorPointX+z[0],be=n.anchorPointY+z[1],Pe=this.projectAndGetPerspectiveRatio(f,de,be,y,J),Re=d*Pe.perspectiveRatio;let Be;if(S||A)Be=this._projectCollisionBox(n,Re,f,y,S,A,z,Pe,J,Q);else{const Je=Pe.point.x+(Q?Q.x*Re:0),ot=Pe.point.y+(Q?Q.y*Re:0);Be={allPointsOccluded:!1,box:[Je+n.x1*Re,ot+n.y1*Re,Je+n.x2*Re,ot+n.y2*Re]}}const[$e,We,Fe,Ye]=Be.box;return this.mapProjection.useSpecialProjectionForSymbols&&(S?Be.allPointsOccluded:this.mapProjection.isOccluded(de,be,y))||Pe.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid($e,We,Fe,Ye)||a!=="always"&&this.grid.hitTest($e,We,Fe,Ye,a,V)?{box:[$e,We,Fe,Ye],placeable:!1,offscreen:!1}:{box:[$e,We,Fe,Ye],placeable:!0,offscreen:this.isOffscreen($e,We,Fe,Ye)}}placeCollisionCircles(n,a,d,f,y,S,A,z,V,J,Q,de,be,Pe,Re,Be){const $e=[],We=new u.P(a.anchorX,a.anchorY),Fe=this.getPerspectiveRatio(S,We.x,We.y,A,Be),Ye=(Q?y/Fe:y*Fe)/u.ap,Je={getElevation:Be,labelPlaneMatrix:z,lineVertexArray:d,pitchWithMap:Q,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:We,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:Re},ot=Ce(Ye,f,a.lineOffsetX*Ye,a.lineOffsetY*Ye,!1,a,!1,Je);let yt=!1,wt=!1,Ft=!0;if(ot){const Dt=.5*be*Fe+Pe,Ct=new u.P(-100,-100),It=new u.P(this.screenRightBoundary,this.screenBottomBoundary),Wt=new Ot,fn=ot.first,At=ot.last;let jt=[];for(let xn=fn.path.length-1;xn>=1;xn--)jt.push(fn.path[xn]);for(let xn=1;xn<At.path.length;xn++)jt.push(At.path[xn]);const cn=2.5*Dt;if(V){const xn=this.projectPathToScreenSpace(jt,Je,V);jt=xn.some(In=>In.signedDistanceFromCamera<=0)?[]:xn.map(In=>In.point)}let tr=[];if(jt.length>0){const xn=jt[0].clone(),In=jt[0].clone();for(let nr=1;nr<jt.length;nr++)xn.x=Math.min(xn.x,jt[nr].x),xn.y=Math.min(xn.y,jt[nr].y),In.x=Math.max(In.x,jt[nr].x),In.y=Math.max(In.y,jt[nr].y);tr=xn.x>=Ct.x&&In.x<=It.x&&xn.y>=Ct.y&&In.y<=It.y?[jt]:In.x<Ct.x||xn.x>It.x||In.y<Ct.y||xn.y>It.y?[]:u.al([jt],Ct.x,Ct.y,It.x,It.y)}for(const xn of tr){Wt.reset(xn,.25*Dt);let In=0;In=Wt.length<=.5*Dt?1:Math.ceil(Wt.paddedLength/cn)+1;for(let nr=0;nr<In;nr++){const ri=nr/Math.max(In-1,1),Fo=Wt.lerp(ri),rr=Fo.x+un,Pi=Fo.y+un;$e.push(rr,Pi,Dt,0);const yi=rr-Dt,ii=Pi-Dt,vi=rr+Dt,is=Pi+Dt;if(Ft=Ft&&this.isOffscreen(yi,ii,vi,is),wt=wt||this.isInsideGrid(yi,ii,vi,is),n!=="always"&&this.grid.hitTestCircle(rr,Pi,Dt,n,de)&&(yt=!0,!J))return{circles:[],offscreen:!1,collisionDetected:yt}}}}return{circles:!J&&yt||!wt||Fe<this.perspectiveRatioCutoff?[]:$e,offscreen:Ft,collisionDetected:yt}}projectPathToScreenSpace(n,a,d){return n.map(f=>ke(f.x,f.y,d,a.getElevation))}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[];let d=1/0,f=1/0,y=-1/0,S=-1/0;for(const J of n){const Q=new u.P(J.x+un,J.y+un);d=Math.min(d,Q.x),f=Math.min(f,Q.y),y=Math.max(y,Q.x),S=Math.max(S,Q.y),a.push(Q)}const A=this.grid.query(d,f,y,S).concat(this.ignoredGrid.query(d,f,y,S)),z={},V={};for(const J of A){const Q=J.key;if(z[Q.bucketInstanceId]===void 0&&(z[Q.bucketInstanceId]={}),z[Q.bucketInstanceId][Q.featureIndex])continue;const de=[new u.P(J.x1,J.y1),new u.P(J.x2,J.y1),new u.P(J.x2,J.y2),new u.P(J.x1,J.y2)];u.am(a,de)&&(z[Q.bucketInstanceId][Q.featureIndex]=!0,V[Q.bucketInstanceId]===void 0&&(V[Q.bucketInstanceId]=[]),V[Q.bucketInstanceId].push(Q.featureIndex))}return V}insertCollisionBox(n,a,d,f,y,S){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:y,collisionGroupID:S,overlapMode:a},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,a,d,f,y,S){const A=d?this.ignoredGrid:this.grid,z={bucketInstanceId:f,featureIndex:y,collisionGroupID:S,overlapMode:a};for(let V=0;V<n.length;V+=4)A.insertCircle(z,n[V],n[V+1],n[V+2])}projectAndGetPerspectiveRatio(n,a,d,f,y){let S;y?(S=[a,d,y(a,d),1],u.af(S,S,n)):(S=[a,d,0,1],En(S,S,n));const A=S[3];return{point:new u.P((S[0]/A+1)/2*this.transform.width+un,(-S[1]/A+1)/2*this.transform.height+un),perspectiveRatio:.5+this.transform.cameraToCenterDistance/A*.5,isOccluded:!1,signedDistanceFromCamera:A}}getPerspectiveRatio(n,a,d,f,y){const S=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(a,d,f,y):ke(a,d,n,y);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(n,a,d,f){return d<un||n>=this.screenRightBoundary||f<un||a>this.screenBottomBoundary}isInsideGrid(n,a,d,f){return d>=0&&n<this.gridRightBoundary&&f>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const n=u.an([]);return u.J(n,n,[-100,-100,0]),n}_projectCollisionBox(n,a,d,f,y,S,A,z,V,J){let Q=new u.P(1,0),de=new u.P(0,1);const be=new u.P(n.anchorPointX+A[0],n.anchorPointY+A[1]);if(S&&!y){const Ft=this.projectAndGetPerspectiveRatio(d,be.x+1,be.y,f,V).point.sub(z.point).unit(),Dt=Math.atan(Ft.y/Ft.x)+(Ft.x<0?Math.PI:0),Ct=Math.sin(Dt),It=Math.cos(Dt);Q=new u.P(It,Ct),de=new u.P(-Ct,It)}else if(!S&&y){const Ft=-this.transform.angle,Dt=Math.sin(Ft),Ct=Math.cos(Ft);Q=new u.P(Ct,Dt),de=new u.P(-Dt,Ct)}let Pe=z.point,Re=a;if(y){Pe=be;const Ft=this.transform.zoom-Math.floor(this.transform.zoom);Re=Math.pow(2,-Ft),Re*=this.mapProjection.getPitchedTextCorrection(this.transform,be,f),J||(Re*=u.ac(.5+z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}J&&(Pe=Pe.add(Q.mult(J.x*Re)).add(de.mult(J.y*Re)));const Be=n.x1*Re,$e=n.x2*Re,We=(Be+$e)/2,Fe=n.y1*Re,Ye=n.y2*Re,Je=(Fe+Ye)/2,ot=[{offsetX:Be,offsetY:Fe},{offsetX:We,offsetY:Fe},{offsetX:$e,offsetY:Fe},{offsetX:$e,offsetY:Je},{offsetX:$e,offsetY:Ye},{offsetX:We,offsetY:Ye},{offsetX:Be,offsetY:Ye},{offsetX:Be,offsetY:Je}];let yt=[];for(const{offsetX:Ft,offsetY:Dt}of ot)yt.push(new u.P(Pe.x+Q.x*Ft+de.x*Dt,Pe.y+Q.y*Ft+de.y*Dt));let wt=!1;if(y){const Ft=yt.map(Dt=>this.projectAndGetPerspectiveRatio(d,Dt.x,Dt.y,f,V));wt=Ft.some(Dt=>!Dt.isOccluded),yt=Ft.map(Dt=>Dt.point)}else wt=!0;return{box:u.ao(yt),allPointsOccluded:!wt}}}function wn(v,n,a){return n*(u.X/(v.tileSize*Math.pow(2,a-v.tileID.overscaledZ)))}class sr{constructor(n,a,d,f){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?a:-a))):f&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Hn{constructor(n,a,d,f,y){this.text=new sr(n?n.text:null,a,d,y),this.icon=new sr(n?n.icon:null,a,f,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class _n{constructor(n,a,d){this.text=n,this.icon=a,this.skipFade=d}}class Un{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class Yn{constructor(n,a,d,f,y){this.bucketInstanceId=n,this.featureIndex=a,this.sourceLayerIndex=d,this.bucketIndex=f,this.tileID=y}}class Mr{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const a=++this.maxGroupID;this.collisionGroups[n]={ID:a,predicate:d=>d.collisionGroupID===a}}return this.collisionGroups[n]}}function jr(v,n,a,d,f){const{horizontalAlign:y,verticalAlign:S}=u.au(v);return new u.P(-(y-.5)*n+d[0]*f,-(S-.5)*a+d[1]*f)}class Wr{constructor(n,a,d,f,y,S){this.transform=n.clone(),this.terrain=d,this.collisionIndex=new Tn(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Mr(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const a=this.terrain;return a?(d,f)=>a.getElevation(n,d,f):null}getBucketParts(n,a,d,f){const y=d.getBucket(a),S=d.latestFeatureIndex;if(!y||!S||a.id!==y.layerIds[0])return;const A=d.collisionBoxArray,z=y.layers[0].layout,V=y.layers[0].paint,J=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),Q=d.tileSize/u.X,de=d.tileID.toUnwrapped(),be=this.transform.calculatePosMatrix(de),Pe=z.get("text-pitch-alignment")==="map",Re=z.get("text-rotation-alignment")==="map",Be=wn(d,1,this.transform.zoom),$e=this.collisionIndex.mapProjection.translatePosition(this.transform,d,V.get("text-translate"),V.get("text-translate-anchor")),We=this.collisionIndex.mapProjection.translatePosition(this.transform,d,V.get("icon-translate"),V.get("icon-translate-anchor")),Fe=Ti(be,Pe,Re,this.transform,Be);let Ye=null;if(Pe){const ot=Ur(be,Pe,Re,this.transform,Be);Ye=u.L([],this.transform.labelPlaneMatrix,ot)}this.retainedQueryData[y.bucketInstanceId]=new Yn(y.bucketInstanceId,S,y.sourceLayerIndex,y.index,d.tileID);const Je={bucket:y,layout:z,translationText:$e,translationIcon:We,posMatrix:be,unwrappedTileID:de,textLabelPlaneMatrix:Fe,labelToScreenMatrix:Ye,scale:J,textPixelRatio:Q,holdingForFade:d.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:u.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(f)for(const ot of y.sortKeyRanges){const{sortKey:yt,symbolInstanceStart:wt,symbolInstanceEnd:Ft}=ot;n.push({sortKey:yt,symbolInstanceStart:wt,symbolInstanceEnd:Ft,parameters:Je})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Je})}attemptAnchorPlacement(n,a,d,f,y,S,A,z,V,J,Q,de,be,Pe,Re,Be,$e,We,Fe){const Ye=u.aq[n.textAnchor],Je=[n.textOffset0,n.textOffset1],ot=jr(Ye,d,f,Je,y),yt=this.collisionIndex.placeCollisionBox(a,de,z,V,J,A,S,Be,Q.predicate,Fe,ot);if((!We||this.collisionIndex.placeCollisionBox(We,de,z,V,J,A,S,$e,Q.predicate,Fe,ot).placeable)&&yt.placeable){let wt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID].text&&(wt=this.prevPlacement.variableOffsets[be.crossTileID].anchor),be.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[be.crossTileID]={textOffset:Je,width:d,height:f,anchor:Ye,textBoxScale:y,prevAnchor:wt},this.markUsedJustification(Pe,Ye,be,Re),Pe.allowVerticalPlacement&&(this.markUsedOrientation(Pe,Re,be),this.placedOrientations[be.crossTileID]=Re),{shift:ot,placedGlyphBoxes:yt}}}placeLayerBucketPart(n,a,d){const{bucket:f,layout:y,translationText:S,translationIcon:A,posMatrix:z,unwrappedTileID:V,textLabelPlaneMatrix:J,labelToScreenMatrix:Q,textPixelRatio:de,holdingForFade:be,collisionBoxArray:Pe,partiallyEvaluatedTextSize:Re,collisionGroup:Be}=n.parameters,$e=y.get("text-optional"),We=y.get("icon-optional"),Fe=u.ar(y,"text-overlap","text-allow-overlap"),Ye=Fe==="always",Je=u.ar(y,"icon-overlap","icon-allow-overlap"),ot=Je==="always",yt=y.get("text-rotation-alignment")==="map",wt=y.get("text-pitch-alignment")==="map",Ft=y.get("icon-text-fit")!=="none",Dt=y.get("symbol-z-order")==="viewport-y",Ct=Ye&&(ot||!f.hasIconData()||We),It=ot&&(Ye||!f.hasTextData()||$e);!f.collisionArrays&&Pe&&f.deserializeCollisionBoxes(Pe);const Wt=this._getTerrainElevationFunc(this.retainedQueryData[f.bucketInstanceId].tileID),fn=(At,jt,cn)=>{var tr,xn;if(a[At.crossTileID])return;if(be)return void(this.placements[At.crossTileID]=new _n(!1,!1,!1));let In=!1,nr=!1,ri=!0,Fo=null,rr={box:null,placeable:!1,offscreen:null},Pi={box:null,placeable:!1,offscreen:null},yi=null,ii=null,vi=null,is=0,El=0,Fc=0;jt.textFeatureIndex?is=jt.textFeatureIndex:At.useRuntimeCollisionCircles&&(is=At.featureIndex),jt.verticalTextFeatureIndex&&(El=jt.verticalTextFeatureIndex);const Tl=jt.textBox;if(Tl){const _o=qr=>{let oi=u.ah.horizontal;if(f.allowVerticalPlacement&&!qr&&this.prevPlacement){const Ki=this.prevPlacement.placedOrientations[At.crossTileID];Ki&&(this.placedOrientations[At.crossTileID]=Ki,oi=Ki,this.markUsedOrientation(f,oi,At))}return oi},xo=(qr,oi)=>{if(f.allowVerticalPlacement&&At.numVerticalGlyphVertices>0&&jt.verticalTextBox){for(const Ki of f.writingModes)if(Ki===u.ah.vertical?(rr=oi(),Pi=rr):rr=qr(),rr&&rr.placeable)break}else rr=qr()},Js=At.textAnchorOffsetStartIndex,Oo=At.textAnchorOffsetEndIndex;if(Oo===Js){const qr=(oi,Ki)=>{const An=this.collisionIndex.placeCollisionBox(oi,Fe,de,z,V,wt,yt,S,Be.predicate,Wt);return An&&An.placeable&&(this.markUsedOrientation(f,Ki,At),this.placedOrientations[At.crossTileID]=Ki),An};xo(()=>qr(Tl,u.ah.horizontal),()=>{const oi=jt.verticalTextBox;return f.allowVerticalPlacement&&At.numVerticalGlyphVertices>0&&oi?qr(oi,u.ah.vertical):{box:null,offscreen:null}}),_o(rr&&rr.placeable)}else{let qr=u.aq[(xn=(tr=this.prevPlacement)===null||tr===void 0?void 0:tr.variableOffsets[At.crossTileID])===null||xn===void 0?void 0:xn.anchor];const oi=(An,Aa,Il)=>{const Cl=An.x2-An.x1,Ep=An.y2-An.y1,Ty=At.textBoxScale,Tp=Ft&&Je==="never"?Aa:null;let Qs=null,Ip=Fe==="never"?1:2,Rc="never";qr&&Ip++;for(let ku=0;ku<Ip;ku++){for(let jc=Js;jc<Oo;jc++){const Lc=f.textAnchorOffsets.get(jc);if(qr&&Lc.textAnchor!==qr)continue;const Pl=this.attemptAnchorPlacement(Lc,An,Cl,Ep,Ty,yt,wt,de,z,V,Be,Rc,At,f,Il,S,A,Tp,Wt);if(Pl&&(Qs=Pl.placedGlyphBoxes,Qs&&Qs.placeable))return In=!0,Fo=Pl.shift,Qs}qr?qr=null:Rc=Fe}return d&&!Qs&&(Qs={box:this.collisionIndex.placeCollisionBox(Tl,"always",de,z,V,wt,yt,S,Be.predicate,Wt,new u.P(0,0)).box,offscreen:!1,placeable:!1}),Qs};xo(()=>oi(Tl,jt.iconBox,u.ah.horizontal),()=>{const An=jt.verticalTextBox;return f.allowVerticalPlacement&&(!rr||!rr.placeable)&&At.numVerticalGlyphVertices>0&&An?oi(An,jt.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}}),rr&&(In=rr.placeable,ri=rr.offscreen);const Ki=_o(rr&&rr.placeable);if(!In&&this.prevPlacement){const An=this.prevPlacement.variableOffsets[At.crossTileID];An&&(this.variableOffsets[At.crossTileID]=An,this.markUsedJustification(f,An.anchor,At,Ki))}}}if(yi=rr,In=yi&&yi.placeable,ri=yi&&yi.offscreen,At.useRuntimeCollisionCircles){const _o=f.text.placedSymbolArray.get(At.centerJustifiedTextSymbolIndex),xo=u.ai(f.textSizeData,Re,_o),Js=y.get("text-padding");ii=this.collisionIndex.placeCollisionCircles(Fe,_o,f.lineVertexArray,f.glyphOffsetArray,xo,z,V,J,Q,d,wt,Be.predicate,At.collisionCircleDiameter,Js,S,Wt),ii.circles.length&&ii.collisionDetected&&!d&&u.w("Collisions detected, but collision boxes are not shown"),In=Ye||ii.circles.length>0&&!ii.collisionDetected,ri=ri&&ii.offscreen}if(jt.iconFeatureIndex&&(Fc=jt.iconFeatureIndex),jt.iconBox){const _o=xo=>this.collisionIndex.placeCollisionBox(xo,Je,de,z,V,wt,yt,A,Be.predicate,Wt,Ft&&Fo?Fo:void 0);Pi&&Pi.placeable&&jt.verticalIconBox?(vi=_o(jt.verticalIconBox),nr=vi.placeable):(vi=_o(jt.iconBox),nr=vi.placeable),ri=ri&&vi.offscreen}const vo=$e||At.numHorizontalGlyphVertices===0&&At.numVerticalGlyphVertices===0,Oc=We||At.numIconVertices===0;vo||Oc?Oc?vo||(nr=nr&&In):In=nr&&In:nr=In=nr&&In;const Id=nr&&vi.placeable;if(In&&yi.placeable&&this.collisionIndex.insertCollisionBox(yi.box,Fe,y.get("text-ignore-placement"),f.bucketInstanceId,Pi&&Pi.placeable&&El?El:is,Be.ID),Id&&this.collisionIndex.insertCollisionBox(vi.box,Je,y.get("icon-ignore-placement"),f.bucketInstanceId,Fc,Be.ID),ii&&In&&this.collisionIndex.insertCollisionCircles(ii.circles,Fe,y.get("text-ignore-placement"),f.bucketInstanceId,is,Be.ID),d&&this.storeCollisionData(f.bucketInstanceId,cn,jt,yi,vi,ii),At.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(f.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[At.crossTileID]=new _n(In||Ct,nr||It,ri||f.justReloaded),a[At.crossTileID]=!0};if(Dt){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const At=f.getSortedSymbolIndexes(this.transform.angle);for(let jt=At.length-1;jt>=0;--jt){const cn=At[jt];fn(f.symbolInstances.get(cn),f.collisionArrays[cn],cn)}}else for(let At=n.symbolInstanceStart;At<n.symbolInstanceEnd;At++)fn(f.symbolInstances.get(At),f.collisionArrays[At],At);if(d&&f.bucketInstanceId in this.collisionCircleArrays){const At=this.collisionCircleArrays[f.bucketInstanceId];u.as(At.invProjMatrix,z),At.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}storeCollisionData(n,a,d,f,y,S){if(d.textBox||d.iconBox){let A,z;this.collisionBoxArrays.has(n)?A=this.collisionBoxArrays.get(n):(A=new Map,this.collisionBoxArrays.set(n,A)),A.has(a)?z=A.get(a):(z={text:null,icon:null},A.set(a,z)),d.textBox&&(z.text=f.box),d.iconBox&&(z.icon=y.box)}if(S){let A=this.collisionCircleArrays[n];A===void 0&&(A=this.collisionCircleArrays[n]=new Un);for(let z=0;z<S.circles.length;z+=4)A.circles.push(S.circles[z+0]),A.circles.push(S.circles[z+1]),A.circles.push(S.circles[z+2]),A.circles.push(S.collisionDetected?1:0)}}markUsedJustification(n,a,d,f){let y;y=f===u.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[u.at(a)];const S=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const A of S)A>=0&&(n.text.placedSymbolArray.get(A).crossTileID=y>=0&&A!==y?0:d.crossTileID)}markUsedOrientation(n,a,d){const f=a===u.ah.horizontal||a===u.ah.horizontalOnly?a:0,y=a===u.ah.vertical?a:0,S=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const A of S)n.text.placedSymbolArray.get(A).placedOrientation=f;d.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let d=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const f=a?a.symbolFadeChange(n):1,y=a?a.opacities:{},S=a?a.variableOffsets:{},A=a?a.placedOrientations:{};for(const z in this.placements){const V=this.placements[z],J=y[z];J?(this.opacities[z]=new Hn(J,f,V.text,V.icon),d=d||V.text!==J.text.placed||V.icon!==J.icon.placed):(this.opacities[z]=new Hn(null,f,V.text,V.icon,V.skipFade),d=d||V.text||V.icon)}for(const z in y){const V=y[z];if(!this.opacities[z]){const J=new Hn(V,f,!1,!1);J.isHidden()||(this.opacities[z]=J,d=d||V.text.placed||V.icon.placed)}}for(const z in S)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=S[z]);for(const z in A)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=A[z]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:n)}updateLayerOpacities(n,a){const d={};for(const f of a){const y=f.getBucket(n);y&&f.latestFeatureIndex&&n.id===y.layerIds[0]&&this.updateBucketOpacities(y,f.tileID,d,f.collisionBoxArray)}}updateBucketOpacities(n,a,d,f){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const y=n.layers[0],S=y.layout,A=new Hn(null,0,!1,!1,!0),z=S.get("text-allow-overlap"),V=S.get("icon-allow-overlap"),J=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Q=S.get("text-rotation-alignment")==="map",de=S.get("text-pitch-alignment")==="map",be=S.get("icon-text-fit")!=="none",Pe=new Hn(null,0,z&&(V||!n.hasIconData()||S.get("icon-optional")),V&&(z||!n.hasTextData()||S.get("text-optional")),!0);!n.collisionArrays&&f&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(f);const Re=($e,We,Fe)=>{for(let Ye=0;Ye<We/4;Ye++)$e.opacityVertexArray.emplaceBack(Fe);$e.hasVisibleVertices=$e.hasVisibleVertices||Fe!==Ns},Be=this.collisionBoxArrays.get(n.bucketInstanceId);for(let $e=0;$e<n.symbolInstances.length;$e++){const We=n.symbolInstances.get($e),{numHorizontalGlyphVertices:Fe,numVerticalGlyphVertices:Ye,crossTileID:Je}=We;let ot=this.opacities[Je];d[Je]?ot=A:ot||(ot=Pe,this.opacities[Je]=ot),d[Je]=!0;const yt=We.numIconVertices>0,wt=this.placedOrientations[We.crossTileID],Ft=wt===u.ah.vertical,Dt=wt===u.ah.horizontal||wt===u.ah.horizontalOnly;if(Fe>0||Ye>0){const It=pi(ot.text);Re(n.text,Fe,Ft?Ns:It),Re(n.text,Ye,Dt?Ns:It);const Wt=ot.text.isHidden();[We.rightJustifiedTextSymbolIndex,We.centerJustifiedTextSymbolIndex,We.leftJustifiedTextSymbolIndex].forEach(jt=>{jt>=0&&(n.text.placedSymbolArray.get(jt).hidden=Wt||Ft?1:0)}),We.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(We.verticalPlacedTextSymbolIndex).hidden=Wt||Dt?1:0);const fn=this.variableOffsets[We.crossTileID];fn&&this.markUsedJustification(n,fn.anchor,We,wt);const At=this.placedOrientations[We.crossTileID];At&&(this.markUsedJustification(n,"left",We,At),this.markUsedOrientation(n,At,We))}if(yt){const It=pi(ot.icon),Wt=!(be&&We.verticalPlacedIconSymbolIndex&&Ft);We.placedIconSymbolIndex>=0&&(Re(n.icon,We.numIconVertices,Wt?It:Ns),n.icon.placedSymbolArray.get(We.placedIconSymbolIndex).hidden=ot.icon.isHidden()),We.verticalPlacedIconSymbolIndex>=0&&(Re(n.icon,We.numVerticalIconVertices,Wt?Ns:It),n.icon.placedSymbolArray.get(We.verticalPlacedIconSymbolIndex).hidden=ot.icon.isHidden())}const Ct=Be&&Be.has($e)?Be.get($e):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const It=n.collisionArrays[$e];if(It){let Wt=new u.P(0,0);if(It.textBox||It.verticalTextBox){let fn=!0;if(J){const At=this.variableOffsets[Je];At?(Wt=jr(At.anchor,At.width,At.height,At.textOffset,At.textBoxScale),Q&&Wt._rotate(de?this.transform.angle:-this.transform.angle)):fn=!1}if(It.textBox||It.verticalTextBox){let At;It.textBox&&(At=Ft),It.verticalTextBox&&(At=Dt),Po(n.textCollisionBox.collisionVertexArray,ot.text.placed,!fn||At,Ct.text,Wt.x,Wt.y)}}if(It.iconBox||It.verticalIconBox){const fn=!!(!Dt&&It.verticalIconBox);let At;It.iconBox&&(At=fn),It.verticalIconBox&&(At=!fn),Po(n.iconCollisionBox.collisionVertexArray,ot.icon.placed,At,Ct.icon,be?Wt.x:0,be?Wt.y:0)}}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const $e=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=$e.invProjMatrix,n.placementViewportMatrix=$e.viewportMatrix,n.collisionCircleArray=$e.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,a){const d=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*d>n}setStale(){this.stale=!0}}function Po(v,n,a,d,f,y){d&&d.length!==0||(d=[0,0,0,0]);const S=d[0]-un,A=d[1]-un,z=d[2]-un,V=d[3]-un;v.emplaceBack(n?1:0,a?1:0,f||0,y||0,S,A),v.emplaceBack(n?1:0,a?1:0,f||0,y||0,z,A),v.emplaceBack(n?1:0,a?1:0,f||0,y||0,z,V),v.emplaceBack(n?1:0,a?1:0,f||0,y||0,S,V)}const zn=Math.pow(2,25),Ya=Math.pow(2,24),Sn=Math.pow(2,17),xr=Math.pow(2,16),fi=Math.pow(2,9),qh=Math.pow(2,8),Ii=Math.pow(2,1);function pi(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const n=v.placed?1:0,a=Math.floor(127*v.opacity);return a*zn+n*Ya+a*Sn+n*xr+a*fi+n*qh+a*Ii+n}const Ns=0;function Xr(){return{isOccluded:(v,n,a)=>!1,getPitchedTextCorrection:(v,n,a)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,n,a,d){throw new Error("Not implemented.")},translatePosition:(v,n,a,d)=>function(f,y,S,A,z=!1){if(!S[0]&&!S[1])return[0,0];const V=z?A==="map"?f.angle:0:A==="viewport"?-f.angle:0;if(V){const J=Math.sin(V),Q=Math.cos(V);S=[S[0]*Q-S[1]*J,S[0]*J+S[1]*Q]}return[z?S[0]:wn(y,S[0],f.zoom),z?S[1]:wn(y,S[1],f.zoom)]}(v,n,a,d),getCircleRadiusCorrection:v=>1}}class pr{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,a,d,f,y){const S=this._bucketParts;for(;this._currentTileIndex<n.length;)if(a.getBucketParts(S,f,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((A,z)=>A.sortKey-z.sortKey));this._currentPartIndex<S.length;)if(a.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,y())return!0;return!1}}class va{constructor(n,a,d,f,y,S,A,z){this.placement=new Wr(n,Xr(),a,S,A,z),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(n,a,d){const f=b.now(),y=()=>!this._forceFullPlacement&&b.now()-f>2;for(;this._currentPlacementIndex>=0;){const S=a[n[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=A)&&(!S.maxzoom||S.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new pr(S)),this._inProgressLayer.continuePlacement(d[S.source],this.placement,this._showCollisionBoxes,S,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const Ni=512/u.X/2;class ur{constructor(n,a,d){this.tileID=n,this.bucketInstanceId=d,this._symbolsByKey={};const f=new Map;for(let y=0;y<a.length;y++){const S=a.get(y),A=S.key,z=f.get(A);z?z.push(S):f.set(A,[S])}for(const[y,S]of f){const A={positions:S.map(z=>({x:Math.floor(z.anchorX*Ni),y:Math.floor(z.anchorY*Ni)})),crossTileIDs:S.map(z=>z.crossTileID)};if(A.positions.length>128){const z=new u.av(A.positions.length,16,Uint16Array);for(const{x:V,y:J}of A.positions)z.add(V,J);z.finish(),delete A.positions,A.index=z}this._symbolsByKey[y]=A}}getScaledCoordinates(n,a){const{x:d,y:f,z:y}=this.tileID.canonical,{x:S,y:A,z}=a.canonical,V=Ni/Math.pow(2,z-y),J=(A*u.X+n.anchorY)*V,Q=f*u.X*Ni;return{x:Math.floor((S*u.X+n.anchorX)*V-d*u.X*Ni),y:Math.floor(J-Q)}}findMatches(n,a,d){const f=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let y=0;y<n.length;y++){const S=n.get(y);if(S.crossTileID)continue;const A=this._symbolsByKey[S.key];if(!A)continue;const z=this.getScaledCoordinates(S,a);if(A.index){const V=A.index.range(z.x-f,z.y-f,z.x+f,z.y+f).sort();for(const J of V){const Q=A.crossTileIDs[J];if(!d[Q]){d[Q]=!0,S.crossTileID=Q;break}}}else if(A.positions)for(let V=0;V<A.positions.length;V++){const J=A.positions[V],Q=A.crossTileIDs[V];if(Math.abs(J.x-z.x)<=f&&Math.abs(J.y-z.y)<=f&&!d[Q]){d[Q]=!0,S.crossTileID=Q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class Ja{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class wr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const a=Math.round((n-this.lng)/360);if(a!==0)for(const d in this.indexes){const f=this.indexes[d],y={};for(const S in f){const A=f[S];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+a),y[A.tileID.key]=A}this.indexes[d]=y}this.lng=n}addBucket(n,a,d){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let y=0;y<a.symbolInstances.length;y++)a.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const f=this.usedCrossTileIDs[n.overscaledZ];for(const y in this.indexes){const S=this.indexes[y];if(Number(y)>n.overscaledZ)for(const A in S){const z=S[A];z.tileID.isChildOf(n)&&z.findMatches(a.symbolInstances,n,f)}else{const A=S[n.scaledTo(Number(y)).key];A&&A.findMatches(a.symbolInstances,n,f)}}for(let y=0;y<a.symbolInstances.length;y++){const S=a.symbolInstances.get(y);S.crossTileID||(S.crossTileID=d.generate(),f[S.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new ur(n,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(n,a){for(const d of a.getCrossTileIDsLists())for(const f of d)delete this.usedCrossTileIDs[n][f]}removeStaleBuckets(n){let a=!1;for(const d in this.indexes){const f=this.indexes[d];for(const y in f)n[f[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,f[y]),delete f[y],a=!0)}return a}}class hu{constructor(){this.layerIndexes={},this.crossTileIDs=new Ja,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,a,d){let f=this.layerIndexes[n.id];f===void 0&&(f=this.layerIndexes[n.id]=new wr);let y=!1;const S={};f.handleWrapJump(d);for(const A of a){const z=A.getBucket(n);z&&n.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(A.tileID,z,this.crossTileIDs)&&(y=!0),S[z.bucketInstanceId]=!0)}return f.removeStaleBuckets(S)&&(y=!0),y}pruneUnusedLayers(n){const a={};n.forEach(d=>{a[d]=!0});for(const d in this.layerIndexes)a[d]||delete this.layerIndexes[d]}}const Ui=(v,n)=>u.t(v,n&&n.filter(a=>a.identifier!=="source.canvas")),Kh=u.aw();class Qa extends u.E{constructor(n,a={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const f=this.sourceCaches[d].getSource().type;f!=="vector"&&f!=="geojson"||this.sourceCaches[d].reload()}},this.map=n,this.dispatcher=new Mt(vt(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,f)=>this.getGlyphs(d,f)),this.dispatcher.registerMessageHandler("GI",(d,f)=>this.getImages(d,f)),this.imageManager=new _e,this.imageManager.setEventedParent(this),this.glyphManager=new ee(n._requestManager,a.localIdeographFontFamily),this.lineAtlas=new Ae(256,512),this.crossTileSymbolIndex=new hu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),Ve().on(k,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const f=this.sourceCaches[d.sourceId];if(!f)return;const y=f.getSource();if(y&&y.vectorLayerIds)for(const S in this._layers){const A=this._layers[S];A.source===y.id&&this._validateLayer(A)}})}loadURL(n,a={},d){this.fire(new u.k("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;const f=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;u.h(f,this._loadStyleRequest).then(S=>{this._loadStyleRequest=null,this._load(S.data,a,d)}).catch(S=>{this._loadStyleRequest=null,S&&!y.signal.aborted&&this.fire(new u.j(S))})}loadJSON(n,a={},d){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(n,a,d)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Kh,{validate:!1})}_load(n,a,d){var f;const y=a.transformStyle?a.transformStyle(d,n):n;if(!a.validate||!Ui(this,u.u(y))){this._loaded=!0,this.stylesheet=y;for(const S in y.sources)this.addSource(S,y.sources[S],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new Se(this.stylesheet.light),this.sky=new Ne(this.stylesheet.sky),this.map.setTerrain((f=this.stylesheet.terrain)!==null&&f!==void 0?f:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const n=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",n),this._order=n.map(a=>a.id),this._layers={},this._serializedLayers=null;for(const a of n){const d=u.aA(a);d.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=d}}_loadSprite(n,a=!1,d=void 0){let f;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,S,A,z){return u._(this,void 0,void 0,function*(){const V=D(y),J=A>1?"@2x":"",Q={},de={};for(const{id:be,url:Pe}of V){const Re=S.transformRequest(te(Pe,J,".json"),"SpriteJSON");Q[be]=u.h(Re,z);const Be=S.transformRequest(te(Pe,J,".png"),"SpriteImage");de[be]=G.getImage(Be,z)}return yield Promise.all([...Object.values(Q),...Object.values(de)]),function(be,Pe){return u._(this,void 0,void 0,function*(){const Re={};for(const Be in be){Re[Be]={};const $e=b.getImageCanvasContext((yield Pe[Be]).data),We=(yield be[Be]).data;for(const Fe in We){const{width:Ye,height:Je,x:ot,y:yt,sdf:wt,pixelRatio:Ft,stretchX:Dt,stretchY:Ct,content:It,textFitWidth:Wt,textFitHeight:fn}=We[Fe];Re[Be][Fe]={data:null,pixelRatio:Ft,sdf:wt,stretchX:Dt,stretchY:Ct,content:It,textFitWidth:Wt,textFitHeight:fn,spriteData:{width:Ye,height:Je,x:ot,y:yt,context:$e}}}}return Re})}(Q,de)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const S in y){this._spritesImagesIds[S]=[];const A=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(z=>!(z in y)):[];for(const z of A)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in y[S]){const V=S==="default"?z:`${S}:${z}`;this._spritesImagesIds[S].push(V),V in this.imageManager.images?this.imageManager.updateImage(V,y[S][z],!1):this.imageManager.addImage(V,y[S][z]),a&&(this._changedImages[V]=!0)}}}).catch(y=>{this._spriteRequest=null,f=y,this.fire(new u.j(f))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),d&&d(f)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(n){const a=this.sourceCaches[n.source];if(!a)return;const d=n.sourceLayer;if(!d)return;const f=a.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(d)===-1)&&this.fire(new u.j(new Error(`Source layer "${d}" does not exist on source "${f.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,a=!1){const d=this._serializedAllLayers();if(!n||n.length===0)return Object.values(a?u.aB(d):d);const f=[];for(const y of n)if(d[y]){const S=a?u.aB(d[y]):d[y];f.push(S)}return f}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const a=Object.keys(this._layers);for(const d of a){const f=this._layers[d];f.type!=="custom"&&(n[d]=f.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const a=this._changed;if(a){const f=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(f.length||y.length)&&this._updateWorkerLayers(f,y);for(const S in this._updatedSources){const A=this._updatedSources[S];if(A==="reload")this._reloadSource(S);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const d={};for(const f in this.sourceCaches){const y=this.sourceCaches[f];d[f]=y.used,y.used=!1}for(const f of this._order){const y=this._layers[f];y.recalculate(n,this._availableImages),!y.isHidden(n.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const f in d){const y=this.sourceCaches[f];!!d[f]!=!!y.used&&y.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(n),this.sky.recalculate(n),this.z=n.zoom,a&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,a){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,a={}){var d;this._checkLoaded();const f=this.serialize();if(n=a.transformStyle?a.transformStyle(f,n):n,((d=a.validate)===null||d===void 0||d)&&Ui(this,u.u(n)))return!1;(n=u.aB(n)).layers=u.az(n.layers);const y=u.aC(f,n),S=this._getOperationsToPerform(y);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(const A of S.operations)A();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const a=[],d=[];for(const f of n)switch(f.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,f.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,f.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,f.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,f.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,f.args));break;case"addSource":a.push(()=>this.addSource.apply(this,f.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,f.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,f.args));break;case"setLight":a.push(()=>this.setLight.apply(this,f.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,f.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,f.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,f.args));break;case"setSky":a.push(()=>this.setSky.apply(this,f.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,f.args));break;case"setTransition":a.push(()=>{});break;default:d.push(f.command)}return{operations:a,unimplemented:d}}addImage(n,a){if(this.getImage(n))return this.fire(new u.j(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,a),this._afterImageUpdated(n)}updateImage(n,a){this.imageManager.updateImage(n,a)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new u.j(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,a,d={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(u.u.source,`sources.${n}`,a,null,d))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const f=this.sourceCaches[n]=new Pt(n,a,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:f.loaded(),source:f.serialize(),sourceId:n})),f.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===n)return this.fire(new u.j(new Error(`Source "${n}" cannot be removed while layer "${d}" is using it.`)));const a=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],a.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,a){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const d=this.sourceCaches[n].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(a),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,a,d={}){this._checkLoaded();const f=n.id;if(this.getLayer(f))return void this.fire(new u.j(new Error(`Layer "${f}" already exists on this map.`)));let y;if(n.type==="custom"){if(Ui(this,u.aD(n)))return;y=u.aA(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(f,n.source),n=u.aB(n),n=u.e(n,{source:f})),this._validate(u.u.layer,`layers.${f}`,n,{arrayIndex:-1},d))return;y=u.aA(n),this._validateLayer(y),y.setEventedParent(this,{layer:{id:f}})}const S=a?this._order.indexOf(a):this._order.length;if(a&&S===-1)this.fire(new u.j(new Error(`Cannot add layer "${f}" before non-existing layer "${a}".`)));else{if(this._order.splice(S,0,f),this._layerOrderChanged=!0,this._layers[f]=y,this._removedLayers[f]&&y.source&&y.type!=="custom"){const A=this._removedLayers[f];delete this._removedLayers[f],A.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(n,a){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new u.j(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===a)return;const d=this._order.indexOf(n);this._order.splice(d,1);const f=a?this._order.indexOf(a):this._order.length;a&&f===-1?this.fire(new u.j(new Error(`Cannot move layer "${n}" before non-existing layer "${a}".`))):(this._order.splice(f,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const a=this._layers[n];if(!a)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${n}".`)));a.setEventedParent(null);const d=this._order.indexOf(n);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=a,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],a.onRemove&&a.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,a,d){this._checkLoaded();const f=this.getLayer(n);f?f.minzoom===a&&f.maxzoom===d||(a!=null&&(f.minzoom=a),d!=null&&(f.maxzoom=d),this._updateLayer(f)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,a,d={}){this._checkLoaded();const f=this.getLayer(n);if(f){if(!u.aE(f.filter,a))return a==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(u.u.filter,`layers.${f.id}.filter`,a,null,d)||(f.filter=u.aB(a),this._updateLayer(f)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return u.aB(this.getLayer(n).filter)}setLayoutProperty(n,a,d,f={}){this._checkLoaded();const y=this.getLayer(n);y?u.aE(y.getLayoutProperty(a),d)||(y.setLayoutProperty(a,d,f),this._updateLayer(y)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,a){const d=this.getLayer(n);if(d)return d.getLayoutProperty(a);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,a,d,f={}){this._checkLoaded();const y=this.getLayer(n);y?u.aE(y.getPaintProperty(a),d)||(y.setPaintProperty(a,d,f)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[n]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,a){return this.getLayer(n).getPaintProperty(a)}setFeatureState(n,a){this._checkLoaded();const d=n.source,f=n.sourceLayer,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const S=y.getSource().type;S==="geojson"&&f?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||f?(n.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(f,n.id,a)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,a){this._checkLoaded();const d=n.source,f=this.sourceCaches[d];if(f===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const y=f.getSource().type,S=y==="vector"?n.sourceLayer:void 0;y!=="vector"||S?a&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(S,n.id,a):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const a=n.source,d=n.sourceLayer,f=this.sourceCaches[a];if(f!==void 0)return f.getSource().type!=="vector"||d?(n.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),f.getFeatureState(d,n.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=u.aF(this.sourceCaches,y=>y.serialize()),a=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,f=this.stylesheet;return u.aG({version:f.version,name:f.name,metadata:f.metadata,light:f.light,sky:f.sky,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:n,layers:a,terrain:d},y=>y!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const a=S=>this._layers[S].type==="fill-extrusion",d={},f=[];for(let S=this._order.length-1;S>=0;S--){const A=this._order[S];if(a(A)){d[A]=S;for(const z of n){const V=z[A];if(V)for(const J of V)f.push(J)}}}f.sort((S,A)=>A.intersectionZ-S.intersectionZ);const y=[];for(let S=this._order.length-1;S>=0;S--){const A=this._order[S];if(a(A))for(let z=f.length-1;z>=0;z--){const V=f[z].feature;if(d[V.layer.id]<S)break;y.push(V),f.pop()}else for(const z of n){const V=z[A];if(V)for(const J of V)y.push(J.feature)}}return y}queryRenderedFeatures(n,a,d){a&&a.filter&&this._validate(u.u.filter,"queryRenderedFeatures.filter",a.filter,null,a);const f={};if(a&&a.layers){if(!Array.isArray(a.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const A of a.layers){const z=this._layers[A];if(!z)return this.fire(new u.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];f[z.source]=!0}}const y=[];a.availableImages=this._availableImages;const S=this._serializedAllLayers();for(const A in this.sourceCaches)a.layers&&!f[A]||y.push(Gt(this.sourceCaches[A],this._layers,S,n,a,d));return this.placement&&y.push(function(A,z,V,J,Q,de,be){const Pe={},Re=de.queryRenderedSymbols(J),Be=[];for(const $e of Object.keys(Re).map(Number))Be.push(be[$e]);Be.sort(Ht);for(const $e of Be){const We=$e.featureIndex.lookupSymbolFeatures(Re[$e.bucketInstanceId],z,$e.bucketIndex,$e.sourceLayerIndex,Q.filter,Q.layers,Q.availableImages,A);for(const Fe in We){const Ye=Pe[Fe]=Pe[Fe]||[],Je=We[Fe];Je.sort((ot,yt)=>{const wt=$e.featureSortOrder;if(wt){const Ft=wt.indexOf(ot.featureIndex);return wt.indexOf(yt.featureIndex)-Ft}return yt.featureIndex-ot.featureIndex});for(const ot of Je)Ye.push(ot)}}for(const $e in Pe)Pe[$e].forEach(We=>{const Fe=We.feature,Ye=V[A[$e].source].getFeatureState(Fe.layer["source-layer"],Fe.id);Fe.source=Fe.layer.source,Fe.layer["source-layer"]&&(Fe.sourceLayer=Fe.layer["source-layer"]),Fe.state=Ye});return Pe}(this._layers,S,this.sourceCaches,n,a,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(n,a){a&&a.filter&&this._validate(u.u.filter,"querySourceFeatures.filter",a.filter,null,a);const d=this.sourceCaches[n];return d?function(f,y){const S=f.getRenderableIds().map(V=>f.getTileByID(V)),A=[],z={};for(let V=0;V<S.length;V++){const J=S[V],Q=J.tileID.canonical.key;z[Q]||(z[Q]=!0,J.querySourceFeatures(A,y))}return A}(d,a):[]}getLight(){return this.light.getLight()}setLight(n,a={}){this._checkLoaded();const d=this.light.getLight();let f=!1;for(const S in n)if(!u.aE(n[S],d[S])){f=!0;break}if(!f)return;const y={now:b.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,a),this.light.updateTransitions(y)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,a={}){const d=this.getSky();let f=!1;if(!n&&!d)return;if(n&&!d)f=!0;else if(!n&&d)f=!0;else for(const S in n)if(!u.aE(n[S],d[S])){f=!0;break}if(!f)return;const y={now:b.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,a),this.sky.updateTransitions(y)}_validate(n,a,d,f,y={}){return(!y||y.validate!==!1)&&Ui(this,n.call(u.u,u.e({key:a,style:this.serialize(),value:d,styleSpec:u.v},f)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ve().off(k,this._rtlPluginLoaded);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const d=this.sourceCaches[a];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const a in this.sourceCaches)this.sourceCaches[a].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,a,d,f,y=!1){let S=!1,A=!1;const z={};for(const V of this._order){const J=this._layers[V];if(J.type!=="symbol")continue;if(!z[J.source]){const de=this.sourceCaches[J.source];z[J.source]=de.getRenderableIds(!0).map(be=>de.getTileByID(be)).sort((be,Pe)=>Pe.tileID.overscaledZ-be.tileID.overscaledZ||(be.tileID.isLessThan(Pe.tileID)?-1:1))}const Q=this.crossTileSymbolIndex.addLayer(J,z[J.source],n.center.lng);S=S||Q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),n.zoom))&&(this.pauseablePlacement=new va(n,this.map.terrain,this._order,y,a,d,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),A=!0),S&&this.pauseablePlacement.placement.setStale()),A||S)for(const V of this._order){const J=this._layers[V];J.type==="symbol"&&this.placement.updateLayerOpacities(J,z[J.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,a){return u._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();const f=this.sourceCaches[a.source];return f&&f.setDependencies(a.tileID.key,a.type,a.icons),d})}getGlyphs(n,a){return u._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(a.stacks),f=this.sourceCaches[a.source];return f&&f.setDependencies(a.tileID.key,a.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,a={}){this._checkLoaded(),n&&this._validate(u.u.glyphs,"glyphs",n,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,a,d={},f){this._checkLoaded();const y=[{id:n,url:a}],S=[...D(this.stylesheet.sprite),...y];this._validate(u.u.sprite,"sprite",S,null,d)||(this.stylesheet.sprite=S,this._loadSprite(y,!0,f))}removeSprite(n){this._checkLoaded();const a=D(this.stylesheet.sprite);if(a.find(d=>d.id===n)){if(this._spritesImagesIds[n])for(const d of this._spritesImagesIds[n])this.imageManager.removeImage(d),this._changedImages[d]=!0;a.splice(a.findIndex(d=>d.id===n),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return D(this.stylesheet.sprite)}setSprite(n,a={},d){this._checkLoaded(),n&&this._validate(u.u.sprite,"sprite",n,null,a)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,d):(this._unloadSprite(),d&&d(null)))}}var gs=u.Y([{name:"a_pos",type:"Int16",components:2}]);const $i={prelude:Fn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Fn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Fn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Fn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Fn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Fn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Fn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Fn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Fn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Fn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Fn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Fn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Fn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Fn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Fn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Fn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Fn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Fn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Fn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Fn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Fn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Fn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Fn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Fn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Fn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Fn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Fn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Fn(v,n){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=n.match(/attribute ([\w]+) ([\w]+)/g),f=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=y?y.concat(f):f,A={};return{fragmentSource:v=v.replace(a,(z,V,J,Q,de)=>(A[de]=!0,V==="define"?`
#ifndef HAS_UNIFORM_u_${de}
varying ${J} ${Q} ${de};
#else
uniform ${J} ${Q} u_${de};
#endif
`:`
#ifdef HAS_UNIFORM_u_${de}
    ${J} ${Q} ${de} = u_${de};
#endif
`)),vertexSource:n=n.replace(a,(z,V,J,Q,de)=>{const be=Q==="float"?"vec2":"vec4",Pe=de.match(/color/)?"color":be;return A[de]?V==="define"?`
#ifndef HAS_UNIFORM_u_${de}
uniform lowp float u_${de}_t;
attribute ${J} ${be} a_${de};
varying ${J} ${Q} ${de};
#else
uniform ${J} ${Q} u_${de};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${de}
    ${de} = a_${de};
#else
    ${J} ${Q} ${de} = u_${de};
#endif
`:`
#ifndef HAS_UNIFORM_u_${de}
    ${de} = unpack_mix_${Pe}(a_${de}, u_${de}_t);
#else
    ${J} ${Q} ${de} = u_${de};
#endif
`:V==="define"?`
#ifndef HAS_UNIFORM_u_${de}
uniform lowp float u_${de}_t;
attribute ${J} ${be} a_${de};
#else
uniform ${J} ${Q} u_${de};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${de}
    ${J} ${Q} ${de} = a_${de};
#else
    ${J} ${Q} ${de} = u_${de};
#endif
`:`
#ifndef HAS_UNIFORM_u_${de}
    ${J} ${Q} ${de} = unpack_mix_${Pe}(a_${de}, u_${de}_t);
#else
    ${J} ${Q} ${de} = u_${de};
#endif
`}),staticAttributes:d,staticUniforms:S}}class du{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,a,d,f,y,S,A,z,V){this.context=n;let J=this.boundPaintVertexBuffers.length!==f.length;for(let Q=0;!J&&Q<f.length;Q++)this.boundPaintVertexBuffers[Q]!==f[Q]&&(J=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==d||J||this.boundIndexBuffer!==y||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==V?this.freshBind(a,d,f,y,S,A,z,V):(n.bindVertexArray.set(this.vao),A&&A.bind(),y&&y.dynamicDraw&&y.bind(),z&&z.bind(),V&&V.bind())}freshBind(n,a,d,f,y,S,A,z){const V=n.numAttributes,J=this.context,Q=J.gl;this.vao&&this.destroy(),this.vao=J.createVertexArray(),J.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=f,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=z,a.enableAttributes(Q,n);for(const de of d)de.enableAttributes(Q,n);S&&S.enableAttributes(Q,n),A&&A.enableAttributes(Q,n),z&&z.enableAttributes(Q,n),a.bind(),a.setVertexAttribPointers(Q,n,y);for(const de of d)de.bind(),de.setVertexAttribPointers(Q,n,y);S&&(S.bind(),S.setVertexAttribPointers(Q,n,y)),f&&f.bind(),A&&(A.bind(),A.setVertexAttribPointers(Q,n,y)),z&&(z.bind(),z.setVertexAttribPointers(Q,n,y)),J.currentNumAttributes=V}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const mi=(v,n,a,d,f)=>({u_matrix:v,u_texture:0,u_ele_delta:n,u_fog_matrix:a,u_fog_color:d?d.properties.get("fog-color"):u.aM.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:d?d.calculateFogBlendOpacity(f):0,u_horizon_color:d?d.properties.get("horizon-color"):u.aM.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1});function Us(v){const n=[];for(let a=0;a<v.length;a++){if(v[a]===null)continue;const d=v[a].split(" ");n.push(d.pop())}return n}class fu{constructor(n,a,d,f,y,S){const A=n.gl;this.program=A.createProgram();const z=Us(a.staticAttributes),V=d?d.getBinderAttributes():[],J=z.concat(V),Q=$i.prelude.staticUniforms?Us($i.prelude.staticUniforms):[],de=a.staticUniforms?Us(a.staticUniforms):[],be=d?d.getBinderUniforms():[],Pe=Q.concat(de).concat(be),Re=[];for(const ot of Pe)Re.indexOf(ot)<0&&Re.push(ot);const Be=d?d.defines():[];y&&Be.push("#define OVERDRAW_INSPECTOR;"),S&&Be.push("#define TERRAIN3D;");const $e=Be.concat($i.prelude.fragmentSource,a.fragmentSource).join(`
`),We=Be.concat($i.prelude.vertexSource,a.vertexSource).join(`
`),Fe=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Fe,$e),A.compileShader(Fe),!A.getShaderParameter(Fe,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(Fe)}`);A.attachShader(this.program,Fe);const Ye=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Ye,We),A.compileShader(Ye),!A.getShaderParameter(Ye,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(Ye)}`);A.attachShader(this.program,Ye),this.attributes={};const Je={};this.numAttributes=J.length;for(let ot=0;ot<this.numAttributes;ot++)J[ot]&&(A.bindAttribLocation(this.program,ot,J[ot]),this.attributes[J[ot]]=ot);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(Ye),A.deleteShader(Fe);for(let ot=0;ot<Re.length;ot++){const yt=Re[ot];if(yt&&!Je[yt]){const wt=A.getUniformLocation(this.program,yt);wt&&(Je[yt]=wt)}}this.fixedUniforms=f(n,Je),this.terrainUniforms=((ot,yt)=>({u_depth:new u.aH(ot,yt.u_depth),u_terrain:new u.aH(ot,yt.u_terrain),u_terrain_dim:new u.aI(ot,yt.u_terrain_dim),u_terrain_matrix:new u.aJ(ot,yt.u_terrain_matrix),u_terrain_unpack:new u.aK(ot,yt.u_terrain_unpack),u_terrain_exaggeration:new u.aI(ot,yt.u_terrain_exaggeration)}))(n,Je),this.binderUniforms=d?d.getUniforms(n,Je):[]}draw(n,a,d,f,y,S,A,z,V,J,Q,de,be,Pe,Re,Be,$e,We){const Fe=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(d),n.setStencilMode(f),n.setColorMode(y),n.setCullFace(S),z){n.activeTexture.set(Fe.TEXTURE2),Fe.bindTexture(Fe.TEXTURE_2D,z.depthTexture),n.activeTexture.set(Fe.TEXTURE3),Fe.bindTexture(Fe.TEXTURE_2D,z.texture);for(const Je in this.terrainUniforms)this.terrainUniforms[Je].set(z[Je])}for(const Je in this.fixedUniforms)this.fixedUniforms[Je].set(A[Je]);Re&&Re.setUniforms(n,this.binderUniforms,be,{zoom:Pe});let Ye=0;switch(a){case Fe.LINES:Ye=2;break;case Fe.TRIANGLES:Ye=3;break;case Fe.LINE_STRIP:Ye=1}for(const Je of de.get()){const ot=Je.vaos||(Je.vaos={});(ot[V]||(ot[V]=new du)).bind(n,this,J,Re?Re.getPaintVertexBuffers():[],Q,Je.vertexOffset,Be,$e,We),Fe.drawElements(a,Je.primitiveLength*Ye,Fe.UNSIGNED_SHORT,Je.primitiveOffset*Ye*2)}}}function el(v,n,a){const d=1/wn(a,1,n.transform.tileZoom),f=Math.pow(2,a.tileID.overscaledZ),y=a.tileSize*Math.pow(2,n.transform.tileZoom)/f,S=y*(a.tileID.canonical.x+a.tileID.wrap*f),A=y*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[d,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[S>>16,A>>16],u_pixel_coord_lower:[65535&S,65535&A]}}const _a=(v,n,a,d)=>{const f=n.style.light,y=f.properties.get("position"),S=[y.x,y.y,y.z],A=function(){var V=new u.A(9);return u.A!=Float32Array&&(V[1]=0,V[2]=0,V[3]=0,V[5]=0,V[6]=0,V[7]=0),V[0]=1,V[4]=1,V[8]=1,V}();f.properties.get("anchor")==="viewport"&&function(V,J){var Q=Math.sin(J),de=Math.cos(J);V[0]=de,V[1]=Q,V[2]=0,V[3]=-Q,V[4]=de,V[5]=0,V[6]=0,V[7]=0,V[8]=1}(A,-n.transform.angle),function(V,J,Q){var de=J[0],be=J[1],Pe=J[2];V[0]=de*Q[0]+be*Q[3]+Pe*Q[6],V[1]=de*Q[1]+be*Q[4]+Pe*Q[7],V[2]=de*Q[2]+be*Q[5]+Pe*Q[8]}(S,S,A);const z=f.properties.get("color");return{u_matrix:v,u_lightpos:S,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+a,u_opacity:d}},tl=(v,n,a,d,f,y,S)=>u.e(_a(v,n,a,d),el(y,n,S),{u_height_factor:-Math.pow(2,f.overscaledZ)/S.tileSize/8}),ys=v=>({u_matrix:v}),nl=(v,n,a,d)=>u.e(ys(v),el(a,n,d)),cc=(v,n)=>({u_matrix:v,u_world:n}),xa=(v,n,a,d,f)=>u.e(nl(v,n,a,d),{u_world:f}),Yh=(v,n,a,d)=>{const f=v.transform;let y,S;if(d.paint.get("circle-pitch-alignment")==="map"){const A=wn(a,1,f.zoom);y=!0,S=[A,A]}else y=!1,S=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(n.posMatrix,a,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:S}},Ci=(v,n,a)=>({u_matrix:v,u_inv_matrix:n,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}),wa=(v,n,a=1)=>({u_matrix:v,u_color:n,u_overlay:0,u_overlay_scale:a}),ei=v=>({u_matrix:v}),ti=(v,n,a,d)=>({u_matrix:v,u_extrude_scale:wn(n,1,a),u_intensity:d}),rl=(v,n,a,d)=>{const f=u.H();u.aP(f,0,v.width,v.height,0,0,1);const y=v.context.gl;return{u_matrix:f,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:a,u_color_ramp:d,u_opacity:n.paint.get("heatmap-opacity")}};function ba(v,n){const a=Math.pow(2,n.canonical.z),d=n.canonical.y;return[new u.Z(0,d/a).toLngLat().lat,new u.Z(0,(d+1)/a).toLngLat().lat]}const il=(v,n,a,d)=>{const f=v.transform;return{u_matrix:fc(v,n,a,d),u_ratio:1/wn(n,1,f.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},hc=(v,n,a,d,f)=>u.e(il(v,n,a,f),{u_image:0,u_image_height:d}),$s=(v,n,a,d,f)=>{const y=v.transform,S=dc(n,y);return{u_matrix:fc(v,n,a,f),u_texsize:n.imageAtlasTexture.size,u_ratio:1/wn(n,1,y.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[S,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},pu=(v,n,a,d,f,y)=>{const S=v.lineAtlas,A=dc(n,v.transform),z=a.layout.get("line-cap")==="round",V=S.getDash(d.from,z),J=S.getDash(d.to,z),Q=V.width*f.fromScale,de=J.width*f.toScale;return u.e(il(v,n,a,y),{u_patternscale_a:[A/Q,-V.height/2],u_patternscale_b:[A/de,-J.height/2],u_sdfgamma:S.width/(256*Math.min(Q,de)*v.pixelRatio)/2,u_image:0,u_tex_y_a:V.y,u_tex_y_b:J.y,u_mix:f.t})};function dc(v,n){return 1/wn(v,1,n.tileZoom)}function fc(v,n,a,d){return v.translatePosMatrix(d?d.posMatrix:n.tileID.posMatrix,n,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const Jh=(v,n,a,d,f)=>{return{u_matrix:v,u_tl_parent:n,u_scale_parent:a,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(S=f.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(y=f.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:Qh(f.paint.get("raster-hue-rotate"))};var y,S};function Qh(v){v*=Math.PI/180;const n=Math.sin(v),a=Math.cos(v);return[(2*a+1)/3,(-Math.sqrt(3)*n-a+1)/3,(Math.sqrt(3)*n-a+1)/3]}const mu=(v,n,a,d,f,y,S,A,z,V,J,Q,de,be)=>{const Pe=S.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:Pe.cameraToCenterDistance,u_pitch:Pe.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:Pe.width/Pe.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:A,u_label_plane_matrix:z,u_coord_matrix:V,u_is_text:+Q,u_pitch_with_map:+d,u_is_along_line:f,u_is_variable_anchor:y,u_texsize:de,u_texture:0,u_translation:J,u_pitched_scale:be}},Sa=(v,n,a,d,f,y,S,A,z,V,J,Q,de,be,Pe)=>{const Re=S.transform;return u.e(mu(v,n,a,d,f,y,S,A,z,V,J,Q,de,Pe),{u_gamma_scale:d?Math.cos(Re._pitch)*Re.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:+be})},ol=(v,n,a,d,f,y,S,A,z,V,J,Q,de,be)=>u.e(Sa(v,n,a,d,f,y,S,A,z,V,J,!0,Q,!0,be),{u_texsize_icon:de,u_texture_icon:1}),sl=(v,n,a)=>({u_matrix:v,u_opacity:n,u_color:a}),gu=(v,n,a,d,f,y)=>u.e(function(S,A,z,V){const J=z.imageManager.getPattern(S.from.toString()),Q=z.imageManager.getPattern(S.to.toString()),{width:de,height:be}=z.imageManager.getPixelSize(),Pe=Math.pow(2,V.tileID.overscaledZ),Re=V.tileSize*Math.pow(2,z.transform.tileZoom)/Pe,Be=Re*(V.tileID.canonical.x+V.tileID.wrap*Pe),$e=Re*V.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:J.tl,u_pattern_br_a:J.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[de,be],u_mix:A.t,u_pattern_size_a:J.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/wn(V,1,z.transform.tileZoom),u_pixel_coord_upper:[Be>>16,$e>>16],u_pixel_coord_lower:[65535&Be,65535&$e]}}(d,y,a,f),{u_matrix:v,u_opacity:n}),al={fillExtrusion:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_lightpos:new u.aN(v,n.u_lightpos),u_lightintensity:new u.aI(v,n.u_lightintensity),u_lightcolor:new u.aN(v,n.u_lightcolor),u_vertical_gradient:new u.aI(v,n.u_vertical_gradient),u_opacity:new u.aI(v,n.u_opacity)}),fillExtrusionPattern:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_lightpos:new u.aN(v,n.u_lightpos),u_lightintensity:new u.aI(v,n.u_lightintensity),u_lightcolor:new u.aN(v,n.u_lightcolor),u_vertical_gradient:new u.aI(v,n.u_vertical_gradient),u_height_factor:new u.aI(v,n.u_height_factor),u_image:new u.aH(v,n.u_image),u_texsize:new u.aO(v,n.u_texsize),u_pixel_coord_upper:new u.aO(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(v,n.u_pixel_coord_lower),u_scale:new u.aN(v,n.u_scale),u_fade:new u.aI(v,n.u_fade),u_opacity:new u.aI(v,n.u_opacity)}),fill:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix)}),fillPattern:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_image:new u.aH(v,n.u_image),u_texsize:new u.aO(v,n.u_texsize),u_pixel_coord_upper:new u.aO(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(v,n.u_pixel_coord_lower),u_scale:new u.aN(v,n.u_scale),u_fade:new u.aI(v,n.u_fade)}),fillOutline:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_world:new u.aO(v,n.u_world)}),fillOutlinePattern:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_world:new u.aO(v,n.u_world),u_image:new u.aH(v,n.u_image),u_texsize:new u.aO(v,n.u_texsize),u_pixel_coord_upper:new u.aO(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(v,n.u_pixel_coord_lower),u_scale:new u.aN(v,n.u_scale),u_fade:new u.aI(v,n.u_fade)}),circle:(v,n)=>({u_camera_to_center_distance:new u.aI(v,n.u_camera_to_center_distance),u_scale_with_map:new u.aH(v,n.u_scale_with_map),u_pitch_with_map:new u.aH(v,n.u_pitch_with_map),u_extrude_scale:new u.aO(v,n.u_extrude_scale),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_matrix:new u.aJ(v,n.u_matrix)}),collisionBox:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_pixel_extrude_scale:new u.aO(v,n.u_pixel_extrude_scale)}),collisionCircle:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_inv_matrix:new u.aJ(v,n.u_inv_matrix),u_camera_to_center_distance:new u.aI(v,n.u_camera_to_center_distance),u_viewport_size:new u.aO(v,n.u_viewport_size)}),debug:(v,n)=>({u_color:new u.aL(v,n.u_color),u_matrix:new u.aJ(v,n.u_matrix),u_overlay:new u.aH(v,n.u_overlay),u_overlay_scale:new u.aI(v,n.u_overlay_scale)}),clippingMask:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix)}),heatmap:(v,n)=>({u_extrude_scale:new u.aI(v,n.u_extrude_scale),u_intensity:new u.aI(v,n.u_intensity),u_matrix:new u.aJ(v,n.u_matrix)}),heatmapTexture:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_world:new u.aO(v,n.u_world),u_image:new u.aH(v,n.u_image),u_color_ramp:new u.aH(v,n.u_color_ramp),u_opacity:new u.aI(v,n.u_opacity)}),hillshade:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_image:new u.aH(v,n.u_image),u_latrange:new u.aO(v,n.u_latrange),u_light:new u.aO(v,n.u_light),u_shadow:new u.aL(v,n.u_shadow),u_highlight:new u.aL(v,n.u_highlight),u_accent:new u.aL(v,n.u_accent)}),hillshadePrepare:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_image:new u.aH(v,n.u_image),u_dimension:new u.aO(v,n.u_dimension),u_zoom:new u.aI(v,n.u_zoom),u_unpack:new u.aK(v,n.u_unpack)}),line:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_ratio:new u.aI(v,n.u_ratio),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_units_to_pixels:new u.aO(v,n.u_units_to_pixels)}),lineGradient:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_ratio:new u.aI(v,n.u_ratio),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_units_to_pixels:new u.aO(v,n.u_units_to_pixels),u_image:new u.aH(v,n.u_image),u_image_height:new u.aI(v,n.u_image_height)}),linePattern:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_texsize:new u.aO(v,n.u_texsize),u_ratio:new u.aI(v,n.u_ratio),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_image:new u.aH(v,n.u_image),u_units_to_pixels:new u.aO(v,n.u_units_to_pixels),u_scale:new u.aN(v,n.u_scale),u_fade:new u.aI(v,n.u_fade)}),lineSDF:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_ratio:new u.aI(v,n.u_ratio),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_units_to_pixels:new u.aO(v,n.u_units_to_pixels),u_patternscale_a:new u.aO(v,n.u_patternscale_a),u_patternscale_b:new u.aO(v,n.u_patternscale_b),u_sdfgamma:new u.aI(v,n.u_sdfgamma),u_image:new u.aH(v,n.u_image),u_tex_y_a:new u.aI(v,n.u_tex_y_a),u_tex_y_b:new u.aI(v,n.u_tex_y_b),u_mix:new u.aI(v,n.u_mix)}),raster:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_tl_parent:new u.aO(v,n.u_tl_parent),u_scale_parent:new u.aI(v,n.u_scale_parent),u_buffer_scale:new u.aI(v,n.u_buffer_scale),u_fade_t:new u.aI(v,n.u_fade_t),u_opacity:new u.aI(v,n.u_opacity),u_image0:new u.aH(v,n.u_image0),u_image1:new u.aH(v,n.u_image1),u_brightness_low:new u.aI(v,n.u_brightness_low),u_brightness_high:new u.aI(v,n.u_brightness_high),u_saturation_factor:new u.aI(v,n.u_saturation_factor),u_contrast_factor:new u.aI(v,n.u_contrast_factor),u_spin_weights:new u.aN(v,n.u_spin_weights)}),symbolIcon:(v,n)=>({u_is_size_zoom_constant:new u.aH(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(v,n.u_is_size_feature_constant),u_size_t:new u.aI(v,n.u_size_t),u_size:new u.aI(v,n.u_size),u_camera_to_center_distance:new u.aI(v,n.u_camera_to_center_distance),u_pitch:new u.aI(v,n.u_pitch),u_rotate_symbol:new u.aH(v,n.u_rotate_symbol),u_aspect_ratio:new u.aI(v,n.u_aspect_ratio),u_fade_change:new u.aI(v,n.u_fade_change),u_matrix:new u.aJ(v,n.u_matrix),u_label_plane_matrix:new u.aJ(v,n.u_label_plane_matrix),u_coord_matrix:new u.aJ(v,n.u_coord_matrix),u_is_text:new u.aH(v,n.u_is_text),u_pitch_with_map:new u.aH(v,n.u_pitch_with_map),u_is_along_line:new u.aH(v,n.u_is_along_line),u_is_variable_anchor:new u.aH(v,n.u_is_variable_anchor),u_texsize:new u.aO(v,n.u_texsize),u_texture:new u.aH(v,n.u_texture),u_translation:new u.aO(v,n.u_translation),u_pitched_scale:new u.aI(v,n.u_pitched_scale)}),symbolSDF:(v,n)=>({u_is_size_zoom_constant:new u.aH(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(v,n.u_is_size_feature_constant),u_size_t:new u.aI(v,n.u_size_t),u_size:new u.aI(v,n.u_size),u_camera_to_center_distance:new u.aI(v,n.u_camera_to_center_distance),u_pitch:new u.aI(v,n.u_pitch),u_rotate_symbol:new u.aH(v,n.u_rotate_symbol),u_aspect_ratio:new u.aI(v,n.u_aspect_ratio),u_fade_change:new u.aI(v,n.u_fade_change),u_matrix:new u.aJ(v,n.u_matrix),u_label_plane_matrix:new u.aJ(v,n.u_label_plane_matrix),u_coord_matrix:new u.aJ(v,n.u_coord_matrix),u_is_text:new u.aH(v,n.u_is_text),u_pitch_with_map:new u.aH(v,n.u_pitch_with_map),u_is_along_line:new u.aH(v,n.u_is_along_line),u_is_variable_anchor:new u.aH(v,n.u_is_variable_anchor),u_texsize:new u.aO(v,n.u_texsize),u_texture:new u.aH(v,n.u_texture),u_gamma_scale:new u.aI(v,n.u_gamma_scale),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_is_halo:new u.aH(v,n.u_is_halo),u_translation:new u.aO(v,n.u_translation),u_pitched_scale:new u.aI(v,n.u_pitched_scale)}),symbolTextAndIcon:(v,n)=>({u_is_size_zoom_constant:new u.aH(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(v,n.u_is_size_feature_constant),u_size_t:new u.aI(v,n.u_size_t),u_size:new u.aI(v,n.u_size),u_camera_to_center_distance:new u.aI(v,n.u_camera_to_center_distance),u_pitch:new u.aI(v,n.u_pitch),u_rotate_symbol:new u.aH(v,n.u_rotate_symbol),u_aspect_ratio:new u.aI(v,n.u_aspect_ratio),u_fade_change:new u.aI(v,n.u_fade_change),u_matrix:new u.aJ(v,n.u_matrix),u_label_plane_matrix:new u.aJ(v,n.u_label_plane_matrix),u_coord_matrix:new u.aJ(v,n.u_coord_matrix),u_is_text:new u.aH(v,n.u_is_text),u_pitch_with_map:new u.aH(v,n.u_pitch_with_map),u_is_along_line:new u.aH(v,n.u_is_along_line),u_is_variable_anchor:new u.aH(v,n.u_is_variable_anchor),u_texsize:new u.aO(v,n.u_texsize),u_texsize_icon:new u.aO(v,n.u_texsize_icon),u_texture:new u.aH(v,n.u_texture),u_texture_icon:new u.aH(v,n.u_texture_icon),u_gamma_scale:new u.aI(v,n.u_gamma_scale),u_device_pixel_ratio:new u.aI(v,n.u_device_pixel_ratio),u_is_halo:new u.aH(v,n.u_is_halo),u_translation:new u.aO(v,n.u_translation),u_pitched_scale:new u.aI(v,n.u_pitched_scale)}),background:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_opacity:new u.aI(v,n.u_opacity),u_color:new u.aL(v,n.u_color)}),backgroundPattern:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_opacity:new u.aI(v,n.u_opacity),u_image:new u.aH(v,n.u_image),u_pattern_tl_a:new u.aO(v,n.u_pattern_tl_a),u_pattern_br_a:new u.aO(v,n.u_pattern_br_a),u_pattern_tl_b:new u.aO(v,n.u_pattern_tl_b),u_pattern_br_b:new u.aO(v,n.u_pattern_br_b),u_texsize:new u.aO(v,n.u_texsize),u_mix:new u.aI(v,n.u_mix),u_pattern_size_a:new u.aO(v,n.u_pattern_size_a),u_pattern_size_b:new u.aO(v,n.u_pattern_size_b),u_scale_a:new u.aI(v,n.u_scale_a),u_scale_b:new u.aI(v,n.u_scale_b),u_pixel_coord_upper:new u.aO(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(v,n.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(v,n.u_tile_units_to_pixels)}),terrain:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_texture:new u.aH(v,n.u_texture),u_ele_delta:new u.aI(v,n.u_ele_delta),u_fog_matrix:new u.aJ(v,n.u_fog_matrix),u_fog_color:new u.aL(v,n.u_fog_color),u_fog_ground_blend:new u.aI(v,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aI(v,n.u_fog_ground_blend_opacity),u_horizon_color:new u.aL(v,n.u_horizon_color),u_horizon_fog_blend:new u.aI(v,n.u_horizon_fog_blend)}),terrainDepth:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_ele_delta:new u.aI(v,n.u_ele_delta)}),terrainCoords:(v,n)=>({u_matrix:new u.aJ(v,n.u_matrix),u_texture:new u.aH(v,n.u_texture),u_terrain_coords_id:new u.aI(v,n.u_terrain_coords_id),u_ele_delta:new u.aI(v,n.u_ele_delta)}),sky:(v,n)=>({u_sky_color:new u.aL(v,n.u_sky_color),u_horizon_color:new u.aL(v,n.u_horizon_color),u_horizon:new u.aI(v,n.u_horizon),u_sky_horizon_blend:new u.aI(v,n.u_sky_horizon_blend)})};class uo{constructor(n,a,d){this.context=n;const f=n.gl;this.buffer=f.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ed={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class yu{constructor(n,a,d,f){this.length=a.length,this.attributes=d,this.itemSize=a.bytesPerElement,this.dynamicDraw=f,this.context=n;const y=n.gl;this.buffer=y.createBuffer(),n.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,a){for(let d=0;d<this.attributes.length;d++){const f=a.attributes[this.attributes[d].name];f!==void 0&&n.enableVertexAttribArray(f)}}setVertexAttribPointers(n,a,d){for(let f=0;f<this.attributes.length;f++){const y=this.attributes[f],S=a.attributes[y.name];S!==void 0&&n.vertexAttribPointer(S,y.components,n[ed[y.type]],!1,this.itemSize,y.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const vs=new WeakMap;function Ao(v){var n;if(vs.has(v))return vs.get(v);{const a=(n=v.getParameter(v.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return vs.set(v,a),a}}class Rn{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Vs extends Rn{getDefault(){return u.aM.transparent}set(n){const a=this.current;(n.r!==a.r||n.g!==a.g||n.b!==a.b||n.a!==a.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class td extends Rn{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Gs extends Rn{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class nd extends Rn{getDefault(){return[!0,!0,!0,!0]}set(n){const a=this.current;(n[0]!==a[0]||n[1]!==a[1]||n[2]!==a[2]||n[3]!==a[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class pc extends Rn{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class rd extends Rn{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class mc extends Rn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const a=this.current;(n.func!==a.func||n.ref!==a.ref||n.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class ll extends Rn{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const a=this.current;(n[0]!==a[0]||n[1]!==a[1]||n[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class ul extends Rn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;n?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=n,this.dirty=!1}}class gc extends Rn{getDefault(){return[0,1]}set(n){const a=this.current;(n[0]!==a[0]||n[1]!==a[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class yc extends Rn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;n?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=n,this.dirty=!1}}class vc extends Rn{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class _s extends Rn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;n?a.enable(a.BLEND):a.disable(a.BLEND),this.current=n,this.dirty=!1}}class vu extends Rn{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const a=this.current;(n[0]!==a[0]||n[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class id extends Rn{getDefault(){return u.aM.transparent}set(n){const a=this.current;(n.r!==a.r||n.g!==a.g||n.b!==a.b||n.a!==a.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class _c extends Rn{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Ea extends Rn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;n?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=n,this.dirty=!1}}class od extends Rn{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class xs extends Rn{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class sd extends Rn{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Hs extends Rn{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class _u extends Rn{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const a=this.current;(n[0]!==a[0]||n[1]!==a[1]||n[2]!==a[2]||n[3]!==a[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Vi extends Rn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class xc extends Rn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class xu extends Rn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class wc extends Rn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class cl extends Rn{getDefault(){return null}set(n){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Gi extends Rn{getDefault(){return null}set(n){var a;if(n===this.current&&!this.dirty)return;const d=this.gl;Ao(d)?d.bindVertexArray(n):(a=d.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class wu extends Rn{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Zs extends Rn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class bu extends Rn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class hl extends Rn{constructor(n,a){super(n),this.context=n,this.parent=a}getDefault(){return null}}class Ws extends hl{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Qo extends hl{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class dl extends hl{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class ad{constructor(n,a,d,f,y){this.context=n,this.width=a,this.height=d;const S=n.gl,A=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Ws(n,A),f)this.depthAttachment=y?new dl(n,A):new Qo(n,A);else if(y)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,a=this.colorAttachment.get();if(a&&n.deleteTexture(a),this.depthAttachment){const d=this.depthAttachment.get();d&&n.deleteRenderbuffer(d)}n.deleteFramebuffer(this.framebuffer)}}class ar{constructor(n,a,d){this.blendFunction=n,this.blendColor=a,this.mask=d}}ar.Replace=[1,0],ar.disabled=new ar(ar.Replace,u.aM.transparent,[!1,!1,!1,!1]),ar.unblended=new ar(ar.Replace,u.aM.transparent,[!0,!0,!0,!0]),ar.alphaBlended=new ar([1,771],u.aM.transparent,[!0,!0,!0,!0]);class fl{constructor(n){var a,d;if(this.gl=n,this.clearColor=new Vs(this),this.clearDepth=new td(this),this.clearStencil=new Gs(this),this.colorMask=new nd(this),this.depthMask=new pc(this),this.stencilMask=new rd(this),this.stencilFunc=new mc(this),this.stencilOp=new ll(this),this.stencilTest=new ul(this),this.depthRange=new gc(this),this.depthTest=new yc(this),this.depthFunc=new vc(this),this.blend=new _s(this),this.blendFunc=new vu(this),this.blendColor=new id(this),this.blendEquation=new _c(this),this.cullFace=new Ea(this),this.cullFaceSide=new od(this),this.frontFace=new xs(this),this.program=new sd(this),this.activeTexture=new Hs(this),this.viewport=new _u(this),this.bindFramebuffer=new Vi(this),this.bindRenderbuffer=new xc(this),this.bindTexture=new xu(this),this.bindVertexBuffer=new wc(this),this.bindElementBuffer=new cl(this),this.bindVertexArray=new Gi(this),this.pixelStoreUnpack=new wu(this),this.pixelStoreUnpackPremultiplyAlpha=new Zs(this),this.pixelStoreUnpackFlipY=new bu(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Ao(n)){this.HALF_FLOAT=n.HALF_FLOAT;const f=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=n.RGBA16F)!==null&&a!==void 0?a:f==null?void 0:f.RGBA16F_EXT,this.RGB16F=(d=n.RGB16F)!==null&&d!==void 0?d:f==null?void 0:f.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const f=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=f==null?void 0:f.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,a){return new uo(this,n,a)}createVertexBuffer(n,a,d){return new yu(this,n,a,d)}createRenderbuffer(n,a,d){const f=this.gl,y=f.createRenderbuffer();return this.bindRenderbuffer.set(y),f.renderbufferStorage(f.RENDERBUFFER,n,a,d),this.bindRenderbuffer.set(null),y}createFramebuffer(n,a,d,f){return new ad(this,n,a,d,f)}clear({color:n,depth:a,stencil:d}){const f=this.gl;let y=0;n&&(y|=f.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(y|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),d!==void 0&&(y|=f.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),f.clear(y)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){u.aE(n.blendFunction,ar.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Ao(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var a;return Ao(this.gl)?this.gl.deleteVertexArray(n):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}class gn{constructor(n,a,d){this.func=n,this.mask=a,this.range=d}}gn.ReadOnly=!1,gn.ReadWrite=!0,gn.disabled=new gn(519,gn.ReadOnly,[0,1]);const pl=7680;class Gn{constructor(n,a,d,f,y,S){this.test=n,this.ref=a,this.mask=d,this.fail=f,this.depthFail=y,this.pass=S}}Gn.disabled=new Gn({func:519,mask:0},0,0,pl,pl,pl);class jn{constructor(n,a,d){this.enable=n,this.mode=a,this.frontFace=d}}let ws;function co(v,n,a,d,f){const y=v.context,S=y.gl,A=v.useProgram("collisionBox"),z=[];let V=0,J=0;for(let $e=0;$e<d.length;$e++){const We=d[$e],Fe=n.getTile(We).getBucket(a);if(!Fe)continue;const Ye=f?Fe.textCollisionBox:Fe.iconCollisionBox,Je=Fe.collisionCircleArray;if(Je.length>0){const ot=u.H();u.aQ(ot,Fe.placementInvProjMatrix,v.transform.glCoordMatrix),u.aQ(ot,ot,Fe.placementViewportMatrix),z.push({circleArray:Je,circleOffset:J,transform:We.posMatrix,invTransform:ot,coord:We}),V+=Je.length/4,J=V}Ye&&A.draw(y,S.LINES,gn.disabled,Gn.disabled,v.colorModeForRenderPass(),jn.disabled,{u_matrix:We.posMatrix,u_pixel_extrude_scale:[1/(Q=v.transform).width,1/Q.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(We),a.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,null,v.transform.zoom,null,null,Ye.collisionVertexBuffer)}var Q;if(!f||!z.length)return;const de=v.useProgram("collisionCircle"),be=new u.aR;be.resize(4*V),be._trim();let Pe=0;for(const $e of z)for(let We=0;We<$e.circleArray.length/4;We++){const Fe=4*We,Ye=$e.circleArray[Fe+0],Je=$e.circleArray[Fe+1],ot=$e.circleArray[Fe+2],yt=$e.circleArray[Fe+3];be.emplace(Pe++,Ye,Je,ot,yt,0),be.emplace(Pe++,Ye,Je,ot,yt,1),be.emplace(Pe++,Ye,Je,ot,yt,2),be.emplace(Pe++,Ye,Je,ot,yt,3)}(!ws||ws.length<2*V)&&(ws=function($e){const We=2*$e,Fe=new u.aT;Fe.resize(We),Fe._trim();for(let Ye=0;Ye<We;Ye++){const Je=6*Ye;Fe.uint16[Je+0]=4*Ye+0,Fe.uint16[Je+1]=4*Ye+1,Fe.uint16[Je+2]=4*Ye+2,Fe.uint16[Je+3]=4*Ye+2,Fe.uint16[Je+4]=4*Ye+3,Fe.uint16[Je+5]=4*Ye+0}return Fe}(V));const Re=y.createIndexBuffer(ws,!0),Be=y.createVertexBuffer(be,u.aS.members,!0);for(const $e of z){const We=Ci($e.transform,$e.invTransform,v.transform);de.draw(y,S.TRIANGLES,gn.disabled,Gn.disabled,v.colorModeForRenderPass(),jn.disabled,We,v.style.map.terrain&&v.style.map.terrain.getTerrainData($e.coord),a.id,Be,Re,u.a0.simpleSegment(0,2*$e.circleOffset,$e.circleArray.length,$e.circleArray.length/2),null,v.transform.zoom,null,null,null)}Be.destroy(),Re.destroy()}jn.disabled=new jn(!1,1029,2305),jn.backCCW=new jn(!0,1029,2305);const ho=u.an(new Float32Array(16));function Lr(v,n,a,d,f,y){const{horizontalAlign:S,verticalAlign:A}=u.au(v);return new u.P((-(S-.5)*n/f+d[0])*y,(-(A-.5)*a/f+d[1])*y)}function gi(v,n,a,d,f,y){const S=n.tileAnchorPoint.add(new u.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let A=d.mult(y);a||(A=A.rotate(-f));const z=S.add(A);return ke(z.x,z.y,n.labelPlaneMatrix,n.getElevation).point}if(a){const A=at(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(v),z=Math.atan(A.y/A.x)+(A.x<0?Math.PI:0);return v.add(d.rotate(z))}return v.add(d)}function es(v,n,a,d,f,y,S,A,z,V,J,Q,de,be){const Pe=v.text.placedSymbolArray,Re=v.text.dynamicLayoutVertexArray,Be=v.icon.dynamicLayoutVertexArray,$e={};Re.clear();for(let We=0;We<Pe.length;We++){const Fe=Pe.get(We),Ye=Fe.hidden||!Fe.crossTileID||v.allowVerticalPlacement&&!Fe.placedOrientation?null:d[Fe.crossTileID];if(Ye){const Je=new u.P(Fe.anchorX,Fe.anchorY),ot={getElevation:be,width:f.width,height:f.height,labelPlaneMatrix:y,lineVertexArray:null,pitchWithMap:a,projection:J,projectionCache:null,tileAnchorPoint:Je,translation:Q,unwrappedTileID:de},yt=a?ke(Je.x,Je.y,S,be):at(Je.x,Je.y,ot),wt=se(f.cameraToCenterDistance,yt.signedDistanceFromCamera);let Ft=u.ai(v.textSizeData,z,Fe)*wt/u.ap;a&&(Ft*=v.tilePixelRatio/A);const{width:Dt,height:Ct,anchor:It,textOffset:Wt,textBoxScale:fn}=Ye,At=Lr(It,Dt,Ct,Wt,fn,Ft),jt=J.getPitchedTextCorrection(f,Je.add(new u.P(Q[0],Q[1])),de),cn=gi(yt.point,ot,n,At,f.angle,jt),tr=v.allowVerticalPlacement&&Fe.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let xn=0;xn<Fe.numGlyphs;xn++)u.aj(Re,cn,tr);V&&Fe.associatedIconIndex>=0&&($e[Fe.associatedIconIndex]={shiftedAnchor:cn,angle:tr})}else en(Fe.numGlyphs,Re)}if(V){Be.clear();const We=v.icon.placedSymbolArray;for(let Fe=0;Fe<We.length;Fe++){const Ye=We.get(Fe);if(Ye.hidden)en(Ye.numGlyphs,Be);else{const Je=$e[Fe];if(Je)for(let ot=0;ot<Ye.numGlyphs;ot++)u.aj(Be,Je.shiftedAnchor,Je.angle);else en(Ye.numGlyphs,Be)}}v.icon.dynamicLayoutVertexBuffer.updateData(Be)}v.text.dynamicLayoutVertexBuffer.updateData(Re)}function ni(v,n,a){return a.iconsInText&&n?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function Su(v,n,a,d,f,y,S,A,z,V,J,Q){const de=v.context,be=de.gl,Pe=v.transform,Re=Xr(),Be=A==="map",$e=z==="map",We=A!=="viewport"&&a.layout.get("symbol-placement")!=="point",Fe=Be&&!$e&&!We,Ye=!$e&&We,Je=!a.layout.get("symbol-sort-key").isConstant();let ot=!1;const yt=v.depthModeForSublayer(0,gn.ReadOnly),wt=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ft=[],Dt=Re.getCircleRadiusCorrection(Pe);for(const Ct of d){const It=n.getTile(Ct),Wt=It.getBucket(a);if(!Wt)continue;const fn=f?Wt.text:Wt.icon;if(!fn||!fn.segments.get().length||!fn.hasVisibleVertices)continue;const At=fn.programConfigurations.get(a.id),jt=f||Wt.sdfIcons,cn=f?Wt.textSizeData:Wt.iconSizeData,tr=$e||Pe.pitch!==0,xn=v.useProgram(ni(jt,f,Wt),At),In=u.ag(cn,Pe.zoom),nr=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ct);let ri,Fo,rr,Pi,yi=[0,0],ii=null;if(f)Fo=It.glyphAtlasTexture,rr=be.LINEAR,ri=It.glyphAtlasTexture.size,Wt.iconsInText&&(yi=It.imageAtlasTexture.size,ii=It.imageAtlasTexture,Pi=tr||v.options.rotating||v.options.zooming||cn.kind==="composite"||cn.kind==="camera"?be.LINEAR:be.NEAREST);else{const An=a.layout.get("icon-size").constantOr(0)!==1||Wt.iconsNeedLinear;Fo=It.imageAtlasTexture,rr=jt||v.options.rotating||v.options.zooming||An||tr?be.LINEAR:be.NEAREST,ri=It.imageAtlasTexture.size}const vi=wn(It,1,v.transform.zoom),is=Ye?Ct.posMatrix:ho,El=Ti(is,$e,Be,v.transform,vi),Fc=Ur(is,$e,Be,v.transform,vi),Tl=Ur(Ct.posMatrix,$e,Be,v.transform,vi),vo=Re.translatePosition(v.transform,It,y,S),Oc=wt&&Wt.hasTextData(),Id=a.layout.get("icon-text-fit")!=="none"&&Oc&&Wt.hasIconData();if(We){const An=v.style.map.terrain?(Il,Cl)=>v.style.map.terrain.getElevation(Ct,Il,Cl):null,Aa=a.layout.get("text-rotation-alignment")==="map";xe(Wt,Ct.posMatrix,v,f,El,Tl,$e,V,Aa,Re,Ct.toUnwrapped(),Pe.width,Pe.height,vo,An)}const _o=Ct.posMatrix,xo=f&&wt||Id,Js=We||xo?ho:El,Oo=Fc,qr=jt&&a.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let oi;oi=jt?Wt.iconsInText?ol(cn.kind,In,Fe,$e,We,xo,v,_o,Js,Oo,vo,ri,yi,Dt):Sa(cn.kind,In,Fe,$e,We,xo,v,_o,Js,Oo,vo,f,ri,!0,Dt):mu(cn.kind,In,Fe,$e,We,xo,v,_o,Js,Oo,vo,f,ri,Dt);const Ki={program:xn,buffers:fn,uniformValues:oi,atlasTexture:Fo,atlasTextureIcon:ii,atlasInterpolation:rr,atlasInterpolationIcon:Pi,isSDF:jt,hasHalo:qr};if(Je&&Wt.canOverlap){ot=!0;const An=fn.segments.get();for(const Aa of An)Ft.push({segments:new u.a0([Aa]),sortKey:Aa.sortKey,state:Ki,terrainData:nr})}else Ft.push({segments:fn.segments,sortKey:0,state:Ki,terrainData:nr})}ot&&Ft.sort((Ct,It)=>Ct.sortKey-It.sortKey);for(const Ct of Ft){const It=Ct.state;if(de.activeTexture.set(be.TEXTURE0),It.atlasTexture.bind(It.atlasInterpolation,be.CLAMP_TO_EDGE),It.atlasTextureIcon&&(de.activeTexture.set(be.TEXTURE1),It.atlasTextureIcon&&It.atlasTextureIcon.bind(It.atlasInterpolationIcon,be.CLAMP_TO_EDGE)),It.isSDF){const Wt=It.uniformValues;It.hasHalo&&(Wt.u_is_halo=1,Xs(It.buffers,Ct.segments,a,v,It.program,yt,J,Q,Wt,Ct.terrainData)),Wt.u_is_halo=0}Xs(It.buffers,Ct.segments,a,v,It.program,yt,J,Q,It.uniformValues,Ct.terrainData)}}function Xs(v,n,a,d,f,y,S,A,z,V){const J=d.context;f.draw(J,J.gl.TRIANGLES,y,S,A,jn.disabled,z,V,a.id,v.layoutVertexBuffer,v.indexBuffer,n,a.paint,d.transform.zoom,v.programConfigurations.get(a.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function qs(v,n,a,d){const f=v.context,y=f.gl,S=Gn.disabled,A=new ar([y.ONE,y.ONE],u.aM.transparent,[!0,!0,!0,!0]),z=n.getBucket(a);if(!z)return;const V=d.key;let J=a.heatmapFbos.get(V);J||(J=fo(f,n.tileSize,n.tileSize),a.heatmapFbos.set(V,J)),f.bindFramebuffer.set(J.framebuffer),f.viewport.set([0,0,n.tileSize,n.tileSize]),f.clear({color:u.aM.transparent});const Q=z.programConfigurations.get(a.id),de=v.useProgram("heatmap",Q),be=v.style.map.terrain.getTerrainData(d);de.draw(f,y.TRIANGLES,gn.disabled,S,A,jn.disabled,ti(d.posMatrix,n,v.transform.zoom,a.paint.get("heatmap-intensity")),be,a.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,a.paint,v.transform.zoom,Q)}function Dr(v,n,a){const d=v.context,f=d.gl;d.setColorMode(v.colorModeForRenderPass());const y=Ks(d,n),S=a.key,A=n.heatmapFbos.get(S);A&&(d.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,A.colorAttachment.get()),d.activeTexture.set(f.TEXTURE1),y.bind(f.LINEAR,f.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(d,f.TRIANGLES,gn.disabled,Gn.disabled,v.colorModeForRenderPass(),jn.disabled,rl(v,n,0,1),null,n.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,n.paint,v.transform.zoom),A.destroy(),n.heatmapFbos.delete(S))}function fo(v,n,a){var d,f;const y=v.gl,S=y.createTexture();y.bindTexture(y.TEXTURE_2D,S),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const A=(d=v.HALF_FLOAT)!==null&&d!==void 0?d:y.UNSIGNED_BYTE,z=(f=v.RGBA16F)!==null&&f!==void 0?f:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,z,n,a,0,y.RGBA,A,null);const V=v.createFramebuffer(n,a,!1,!1);return V.colorAttachment.set(S),V}function Ks(v,n){return n.colorRampTexture||(n.colorRampTexture=new W(v,n.colorRamp,v.gl.RGBA)),n.colorRampTexture}function Mo(v,n,a,d,f){if(!a||!d||!d.imageAtlas)return;const y=d.imageAtlas.patternPositions;let S=y[a.to.toString()],A=y[a.from.toString()];if(!S&&A&&(S=A),!A&&S&&(A=S),!S||!A){const z=f.getPaintProperty(n);S=y[z],A=y[z]}S&&A&&v.setConstantPatternPositions(S,A)}function ts(v,n,a,d,f,y,S){const A=v.context.gl,z="fill-pattern",V=a.paint.get(z),J=V&&V.constantOr(1),Q=a.getCrossfadeParameters();let de,be,Pe,Re,Be;S?(be=J&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",de=A.LINES):(be=J?"fillPattern":"fill",de=A.TRIANGLES);const $e=V.constantOr(null);for(const We of d){const Fe=n.getTile(We);if(J&&!Fe.patternsLoaded())continue;const Ye=Fe.getBucket(a);if(!Ye)continue;const Je=Ye.programConfigurations.get(a.id),ot=v.useProgram(be,Je),yt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(We);J&&(v.context.activeTexture.set(A.TEXTURE0),Fe.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),Je.updatePaintBuffers(Q)),Mo(Je,z,$e,Fe,a);const wt=yt?We:null,Ft=v.translatePosMatrix(wt?wt.posMatrix:We.posMatrix,Fe,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(S){Re=Ye.indexBuffer2,Be=Ye.segments2;const Dt=[A.drawingBufferWidth,A.drawingBufferHeight];Pe=be==="fillOutlinePattern"&&J?xa(Ft,v,Q,Fe,Dt):cc(Ft,Dt)}else Re=Ye.indexBuffer,Be=Ye.segments,Pe=J?nl(Ft,v,Q,Fe):ys(Ft);ot.draw(v.context,de,f,v.stencilModeForClipping(We),y,jn.disabled,Pe,yt,a.id,Ye.layoutVertexBuffer,Re,Be,a.paint,v.transform.zoom,Je)}}function Ta(v,n,a,d,f,y,S){const A=v.context,z=A.gl,V="fill-extrusion-pattern",J=a.paint.get(V),Q=J.constantOr(1),de=a.getCrossfadeParameters(),be=a.paint.get("fill-extrusion-opacity"),Pe=J.constantOr(null);for(const Re of d){const Be=n.getTile(Re),$e=Be.getBucket(a);if(!$e)continue;const We=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Re),Fe=$e.programConfigurations.get(a.id),Ye=v.useProgram(Q?"fillExtrusionPattern":"fillExtrusion",Fe);Q&&(v.context.activeTexture.set(z.TEXTURE0),Be.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Fe.updatePaintBuffers(de)),Mo(Fe,V,Pe,Be,a);const Je=v.translatePosMatrix(Re.posMatrix,Be,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),ot=a.paint.get("fill-extrusion-vertical-gradient"),yt=Q?tl(Je,v,ot,be,Re,de,Be):_a(Je,v,ot,be);Ye.draw(A,A.gl.TRIANGLES,f,y,S,jn.backCCW,yt,We,a.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,a.paint,v.transform.zoom,Fe,v.style.map.terrain&&$e.centroidVertexBuffer)}}function bs(v,n,a,d,f,y,S){const A=v.context,z=A.gl,V=a.fbo;if(!V)return;const J=v.useProgram("hillshade"),Q=v.style.map.terrain&&v.style.map.terrain.getTerrainData(n);A.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,V.colorAttachment.get()),J.draw(A,z.TRIANGLES,f,y,S,jn.disabled,((de,be,Pe,Re)=>{const Be=Pe.paint.get("hillshade-shadow-color"),$e=Pe.paint.get("hillshade-highlight-color"),We=Pe.paint.get("hillshade-accent-color");let Fe=Pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Pe.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fe-=de.transform.angle);const Ye=!de.options.moving;return{u_matrix:Re?Re.posMatrix:de.transform.calculatePosMatrix(be.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:ba(0,be.tileID),u_light:[Pe.paint.get("hillshade-exaggeration"),Fe],u_shadow:Be,u_highlight:$e,u_accent:We}})(v,a,d,Q?n:null),Q,d.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function Ss(v,n,a,d,f,y){const S=v.context,A=S.gl,z=n.dem;if(z&&z.data){const V=z.dim,J=z.stride,Q=z.getPixels();if(S.activeTexture.set(A.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||v.getTileTexture(J),n.demTexture){const be=n.demTexture;be.update(Q,{premultiply:!1}),be.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else n.demTexture=new W(S,Q,A.RGBA,{premultiply:!1}),n.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);S.activeTexture.set(A.TEXTURE0);let de=n.fbo;if(!de){const be=new W(S,{width:V,height:V,data:null},A.RGBA);be.bind(A.LINEAR,A.CLAMP_TO_EDGE),de=n.fbo=S.createFramebuffer(V,V,!0,!1),de.colorAttachment.set(be.texture)}S.bindFramebuffer.set(de.framebuffer),S.viewport.set([0,0,V,V]),v.useProgram("hillshadePrepare").draw(S,A.TRIANGLES,d,f,y,jn.disabled,((be,Pe)=>{const Re=Pe.stride,Be=u.H();return u.aP(Be,0,u.X,-u.X,0,0,1),u.J(Be,Be,[0,-u.X,0]),{u_matrix:Be,u_image:1,u_dimension:[Re,Re],u_zoom:be.overscaledZ,u_unpack:Pe.getUnpackVector()}})(n.tileID,z),null,a.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Eu(v,n,a,d,f,y){const S=d.paint.get("raster-fade-duration");if(!y&&S>0){const A=b.now(),z=(A-v.timeAdded)/S,V=n?(A-n.timeAdded)/S:-1,J=a.getSource(),Q=f.coveringZoomLevel({tileSize:J.tileSize,roundZoom:J.roundZoom}),de=!n||Math.abs(n.tileID.overscaledZ-Q)>Math.abs(v.tileID.overscaledZ-Q),be=de&&v.refreshedUponExpiration?1:u.ac(de?z:1-V,0,1);return v.refreshedUponExpiration&&z>=1&&(v.refreshedUponExpiration=!1),n?{opacity:1,mix:1-be}:{opacity:be,mix:0}}return{opacity:1,mix:0}}const po=new u.aM(1,0,0,1),Mn=new u.aM(0,1,0,1),ml=new u.aM(0,0,1,1),bc=new u.aM(1,0,1,1),gl=new u.aM(0,1,1,1);function Es(v,n,a,d){Ia(v,0,n+a/2,v.transform.width,a,d)}function Tu(v,n,a,d){Ia(v,n-a/2,0,a,v.transform.height,d)}function Ia(v,n,a,d,f,y){const S=v.context,A=S.gl;A.enable(A.SCISSOR_TEST),A.scissor(n*v.pixelRatio,a*v.pixelRatio,d*v.pixelRatio,f*v.pixelRatio),S.clear({color:y}),A.disable(A.SCISSOR_TEST)}function Z(v,n,a){const d=v.context,f=d.gl,y=a.posMatrix,S=v.useProgram("debug"),A=gn.disabled,z=Gn.disabled,V=v.colorModeForRenderPass(),J="$debug",Q=v.style.map.terrain&&v.style.map.terrain.getTerrainData(a);d.activeTexture.set(f.TEXTURE0);const de=n.getTileByID(a.key).latestRawTileData,be=Math.floor((de&&de.byteLength||0)/1024),Pe=n.getTile(a).tileSize,Re=512/Math.min(Pe,512)*(a.overscaledZ/v.transform.zoom)*.5;let Be=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(Be+=` => ${a.overscaledZ}`),function($e,We){$e.initDebugOverlayCanvas();const Fe=$e.debugOverlayCanvas,Ye=$e.context.gl,Je=$e.debugOverlayCanvas.getContext("2d");Je.clearRect(0,0,Fe.width,Fe.height),Je.shadowColor="white",Je.shadowBlur=2,Je.lineWidth=1.5,Je.strokeStyle="white",Je.textBaseline="top",Je.font="bold 36px Open Sans, sans-serif",Je.fillText(We,5,5),Je.strokeText(We,5,5),$e.debugOverlayTexture.update(Fe),$e.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(v,`${Be} ${be}kB`),S.draw(d,f.TRIANGLES,A,z,ar.alphaBlended,jn.disabled,wa(y,u.aM.transparent,Re),null,J,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),S.draw(d,f.LINE_STRIP,A,z,V,jn.disabled,wa(y,u.aM.red),Q,J,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function ye(v,n,a){const d=v.context,f=d.gl,y=v.colorModeForRenderPass(),S=new gn(f.LEQUAL,gn.ReadWrite,v.depthRangeFor3D),A=v.useProgram("terrain"),z=n.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,v.width,v.height]);for(const V of a){const J=v.renderToTexture.getTexture(V),Q=n.getTerrainData(V.tileID);d.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,J.texture);const de=v.transform.calculatePosMatrix(V.tileID.toUnwrapped()),be=n.getMeshFrameDelta(v.transform.zoom),Pe=v.transform.calculateFogMatrix(V.tileID.toUnwrapped()),Re=mi(de,be,Pe,v.style.sky,v.transform.pitch);A.draw(d,f.TRIANGLES,S,Gn.disabled,y,jn.backCCW,Re,Q,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}class Ue{constructor(n,a,d){this.vertexBuffer=n,this.indexBuffer=a,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class ut{constructor(n,a){this.context=new fl(n),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Pt.maxUnderzooming+Pt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new hu}resize(n,a,d){if(this.width=Math.floor(n*d),this.height=Math.floor(a*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style._order)this.style._layers[f].resize()}setup(){const n=this.context,a=new u.aX;a.emplaceBack(0,0),a.emplaceBack(u.X,0),a.emplaceBack(0,u.X),a.emplaceBack(u.X,u.X),this.tileExtentBuffer=n.createVertexBuffer(a,gs.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const d=new u.aX;d.emplaceBack(0,0),d.emplaceBack(u.X,0),d.emplaceBack(0,u.X),d.emplaceBack(u.X,u.X),this.debugBuffer=n.createVertexBuffer(d,gs.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const f=new u.$;f.emplaceBack(0,0,0,0),f.emplaceBack(u.X,0,u.X,0),f.emplaceBack(0,u.X,0,u.X),f.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=n.createVertexBuffer(f,L.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const y=new u.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(y,gs.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const S=new u.aZ;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(S);const A=new u.aY;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(A);const z=this.context.gl;this.stencilClearMode=new Gn({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)}clearStencil(){const n=this.context,a=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=u.H();u.aP(d,0,this.width,this.height,0,0,1),u.K(d,d,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,a.TRIANGLES,gn.disabled,this.stencilClearMode,ar.disabled,jn.disabled,ei(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,a){if(this.currentStencilSource===n.source||!n.isTileClipped()||!a||!a.length)return;this.currentStencilSource=n.source;const d=this.context,f=d.gl;this.nextStencilID+a.length>256&&this.clearStencil(),d.setColorMode(ar.disabled),d.setDepthMode(gn.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of a){const A=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(S);y.draw(d,f.TRIANGLES,gn.disabled,new Gn({func:f.ALWAYS,mask:0},A,255,f.KEEP,f.KEEP,f.REPLACE),ar.disabled,jn.disabled,ei(S.posMatrix),z,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,a=this.context.gl;return new Gn({func:a.NOTEQUAL,mask:255},n,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(n){const a=this.context.gl;return new Gn({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,a.KEEP,a.KEEP,a.REPLACE)}stencilConfigForOverlap(n){const a=this.context.gl,d=n.sort((S,A)=>A.overscaledZ-S.overscaledZ),f=d[d.length-1].overscaledZ,y=d[0].overscaledZ-f+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const S={};for(let A=0;A<y;A++)S[A+f]=new Gn({func:a.GEQUAL,mask:255},A+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=y,[S,d]}return[{[f]:Gn.disabled},d]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new ar([n.CONSTANT_COLOR,n.ONE],new u.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ar.unblended:ar.alphaBlended}depthModeForSublayer(n,a,d){if(!this.opaquePassEnabledForLayer())return gn.disabled;const f=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new gn(d||this.context.gl.LEQUAL,a,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,a){this.style=n,this.options=a,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();const d=this.style._order,f=this.style.sourceCaches,y={},S={},A={};for(const z in f){const V=f[z];V.used&&V.prepare(this.context),y[z]=V.getVisibleCoordinates(),S[z]=y[z].slice().reverse(),A[z]=V.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<d.length;z++)if(this.style._layers[d[z]].is3D()){this.opaquePassCutoff=z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const z of d){const V=this.style._layers[z];if(!V.hasOffscreenPass()||V.isHidden(this.transform.zoom))continue;const J=S[V.source];(V.type==="custom"||J.length)&&this.renderLayer(this,f[V.source],V,J)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?u.aM.black:u.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(z,V){const J=z.context,Q=J.gl,de=(($e,We,Fe)=>({u_sky_color:$e.properties.get("sky-color"),u_horizon_color:$e.properties.get("horizon-color"),u_horizon:(We.height/2+We.getHorizon())*Fe,u_sky_horizon_blend:$e.properties.get("sky-horizon-blend")*We.height/2*Fe}))(V,z.style.map.transform,z.pixelRatio),be=new gn(Q.LEQUAL,gn.ReadWrite,[0,1]),Pe=Gn.disabled,Re=z.colorModeForRenderPass(),Be=z.useProgram("sky");if(!V.mesh){const $e=new u.aX;$e.emplaceBack(-1,-1),$e.emplaceBack(1,-1),$e.emplaceBack(1,1),$e.emplaceBack(-1,1);const We=new u.aY;We.emplaceBack(0,1,2),We.emplaceBack(0,2,3),V.mesh=new Ue(J.createVertexBuffer($e,gs.members),J.createIndexBuffer(We),u.a0.simpleSegment(0,0,$e.length,We.length))}Be.draw(J,Q.TRIANGLES,be,Pe,Re,jn.disabled,de,void 0,"sky",V.mesh.vertexBuffer,V.mesh.indexBuffer,V.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[d[this.currentLayer]],V=f[z.source],J=y[z.source];this._renderTileClippingMasks(z,J),this.renderLayer(this,V,z,J)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const z=this.style._layers[d[this.currentLayer]],V=f[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z))continue;const J=(z.type==="symbol"?A:S)[z.source];this._renderTileClippingMasks(z,y[z.source]),this.renderLayer(this,V,z,J)}if(this.options.showTileBoundaries){const z=function(V,J){let Q=null;const de=Object.values(V._layers).flatMap(Be=>Be.source&&!Be.isHidden(J)?[V.sourceCaches[Be.source]]:[]),be=de.filter(Be=>Be.getSource().type==="vector"),Pe=de.filter(Be=>Be.getSource().type!=="vector"),Re=Be=>{(!Q||Q.getSource().maxzoom<Be.getSource().maxzoom)&&(Q=Be)};return be.forEach(Be=>Re(Be)),Q||Pe.forEach(Be=>Re(Be)),Q}(this.style,this.transform.zoom);z&&function(V,J,Q){for(let de=0;de<Q.length;de++)Z(V,J,Q[de])}(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const V=z.transform.padding;Es(z,z.transform.height-(V.top||0),3,po),Es(z,V.bottom||0,3,Mn),Tu(z,V.left||0,3,ml),Tu(z,z.transform.width-(V.right||0),3,bc);const J=z.transform.centerPoint;(function(Q,de,be,Pe){Ia(Q,de-1,be-10,2,20,Pe),Ia(Q,de-10,be-1,20,2,Pe)})(z,J.x,z.transform.height-J.y,gl)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const a=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let f=this.terrainFacilitator.dirty;f||(f=n?!u.a_(a,d):!u.a$(a,d)),f||(f=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),f&&(u.b0(a,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,S){const A=y.context,z=A.gl,V=ar.unblended,J=new gn(z.LEQUAL,gn.ReadWrite,[0,1]),Q=S.getTerrainMesh(),de=S.sourceCache.getRenderableTiles(),be=y.useProgram("terrainDepth");A.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),A.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),A.clear({color:u.aM.transparent,depth:1});for(const Pe of de){const Re=S.getTerrainData(Pe.tileID),Be={u_matrix:y.transform.calculatePosMatrix(Pe.tileID.toUnwrapped()),u_ele_delta:S.getMeshFrameDelta(y.transform.zoom)};be.draw(A,z.TRIANGLES,J,Gn.disabled,V,jn.backCCW,Be,Re,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments)}A.bindFramebuffer.set(null),A.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,S){const A=y.context,z=A.gl,V=ar.unblended,J=new gn(z.LEQUAL,gn.ReadWrite,[0,1]),Q=S.getTerrainMesh(),de=S.getCoordsTexture(),be=S.sourceCache.getRenderableTiles(),Pe=y.useProgram("terrainCoords");A.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),A.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),A.clear({color:u.aM.transparent,depth:1}),S.coordsIndex=[];for(const Re of be){const Be=S.getTerrainData(Re.tileID);A.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,de.texture);const $e={u_matrix:y.transform.calculatePosMatrix(Re.tileID.toUnwrapped()),u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(y.transform.zoom)};Pe.draw(A,z.TRIANGLES,J,Gn.disabled,V,jn.backCCW,$e,Be,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),S.coordsIndex.push(Re.tileID.key)}A.bindFramebuffer.set(null),A.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(n,a,d,f){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(f||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(y,S,A,z,V){if(y.renderPass!=="translucent")return;const J=Gn.disabled,Q=y.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(de,be,Pe,Re,Be,$e,We,Fe,Ye){const Je=be.transform,ot=Xr(),yt=Be==="map",wt=$e==="map";for(const Ft of de){const Dt=Re.getTile(Ft),Ct=Dt.getBucket(Pe);if(!Ct||!Ct.text||!Ct.text.segments.get().length)continue;const It=u.ag(Ct.textSizeData,Je.zoom),Wt=wn(Dt,1,be.transform.zoom),fn=Ti(Ft.posMatrix,wt,yt,be.transform,Wt),At=Pe.layout.get("icon-text-fit")!=="none"&&Ct.hasIconData();if(It){const jt=Math.pow(2,Je.zoom-Dt.tileID.overscaledZ),cn=be.style.map.terrain?(xn,In)=>be.style.map.terrain.getElevation(Ft,xn,In):null,tr=ot.translatePosition(Je,Dt,We,Fe);es(Ct,yt,wt,Ye,Je,fn,Ft.posMatrix,jt,It,At,ot,tr,Ft.toUnwrapped(),cn)}}}(z,y,A,S,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),V),A.paint.get("icon-opacity").constantOr(1)!==0&&Su(y,S,A,z,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),J,Q),A.paint.get("text-opacity").constantOr(1)!==0&&Su(y,S,A,z,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),J,Q),S.map.showCollisionBoxes&&(co(y,S,A,z,!0),co(y,S,A,z,!1))})(n,a,d,f,this.style.placement.variableOffsets);break;case"circle":(function(y,S,A,z){if(y.renderPass!=="translucent")return;const V=A.paint.get("circle-opacity"),J=A.paint.get("circle-stroke-width"),Q=A.paint.get("circle-stroke-opacity"),de=!A.layout.get("circle-sort-key").isConstant();if(V.constantOr(1)===0&&(J.constantOr(1)===0||Q.constantOr(1)===0))return;const be=y.context,Pe=be.gl,Re=y.depthModeForSublayer(0,gn.ReadOnly),Be=Gn.disabled,$e=y.colorModeForRenderPass(),We=[];for(let Fe=0;Fe<z.length;Fe++){const Ye=z[Fe],Je=S.getTile(Ye),ot=Je.getBucket(A);if(!ot)continue;const yt=ot.programConfigurations.get(A.id),wt=y.useProgram("circle",yt),Ft=ot.layoutVertexBuffer,Dt=ot.indexBuffer,Ct=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ye),It={programConfiguration:yt,program:wt,layoutVertexBuffer:Ft,indexBuffer:Dt,uniformValues:Yh(y,Ye,Je,A),terrainData:Ct};if(de){const Wt=ot.segments.get();for(const fn of Wt)We.push({segments:new u.a0([fn]),sortKey:fn.sortKey,state:It})}else We.push({segments:ot.segments,sortKey:0,state:It})}de&&We.sort((Fe,Ye)=>Fe.sortKey-Ye.sortKey);for(const Fe of We){const{programConfiguration:Ye,program:Je,layoutVertexBuffer:ot,indexBuffer:yt,uniformValues:wt,terrainData:Ft}=Fe.state;Je.draw(be,Pe.TRIANGLES,Re,Be,$e,jn.disabled,wt,Ft,A.id,ot,yt,Fe.segments,A.paint,y.transform.zoom,Ye)}})(n,a,d,f);break;case"heatmap":(function(y,S,A,z){if(A.paint.get("heatmap-opacity")===0)return;const V=y.context;if(y.style.map.terrain){for(const J of z){const Q=S.getTile(J);S.hasRenderableParent(J)||(y.renderPass==="offscreen"?qs(y,Q,A,J):y.renderPass==="translucent"&&Dr(y,A,J))}V.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(J,Q,de,be){const Pe=J.context,Re=Pe.gl,Be=Gn.disabled,$e=new ar([Re.ONE,Re.ONE],u.aM.transparent,[!0,!0,!0,!0]);(function(We,Fe,Ye){const Je=We.gl;We.activeTexture.set(Je.TEXTURE1),We.viewport.set([0,0,Fe.width/4,Fe.height/4]);let ot=Ye.heatmapFbos.get(u.aU);ot?(Je.bindTexture(Je.TEXTURE_2D,ot.colorAttachment.get()),We.bindFramebuffer.set(ot.framebuffer)):(ot=fo(We,Fe.width/4,Fe.height/4),Ye.heatmapFbos.set(u.aU,ot))})(Pe,J,de),Pe.clear({color:u.aM.transparent});for(let We=0;We<be.length;We++){const Fe=be[We];if(Q.hasRenderableParent(Fe))continue;const Ye=Q.getTile(Fe),Je=Ye.getBucket(de);if(!Je)continue;const ot=Je.programConfigurations.get(de.id),yt=J.useProgram("heatmap",ot),{zoom:wt}=J.transform;yt.draw(Pe,Re.TRIANGLES,gn.disabled,Be,$e,jn.disabled,ti(Fe.posMatrix,Ye,wt,de.paint.get("heatmap-intensity")),null,de.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,de.paint,J.transform.zoom,ot)}Pe.viewport.set([0,0,J.width,J.height])}(y,S,A,z):y.renderPass==="translucent"&&function(J,Q){const de=J.context,be=de.gl;de.setColorMode(J.colorModeForRenderPass());const Pe=Q.heatmapFbos.get(u.aU);Pe&&(de.activeTexture.set(be.TEXTURE0),be.bindTexture(be.TEXTURE_2D,Pe.colorAttachment.get()),de.activeTexture.set(be.TEXTURE1),Ks(de,Q).bind(be.LINEAR,be.CLAMP_TO_EDGE),J.useProgram("heatmapTexture").draw(de,be.TRIANGLES,gn.disabled,Gn.disabled,J.colorModeForRenderPass(),jn.disabled,rl(J,Q,0,1),null,Q.id,J.viewportBuffer,J.quadTriangleIndexBuffer,J.viewportSegments,Q.paint,J.transform.zoom))}(y,A)})(n,a,d,f);break;case"line":(function(y,S,A,z){if(y.renderPass!=="translucent")return;const V=A.paint.get("line-opacity"),J=A.paint.get("line-width");if(V.constantOr(1)===0||J.constantOr(1)===0)return;const Q=y.depthModeForSublayer(0,gn.ReadOnly),de=y.colorModeForRenderPass(),be=A.paint.get("line-dasharray"),Pe=A.paint.get("line-pattern"),Re=Pe.constantOr(1),Be=A.paint.get("line-gradient"),$e=A.getCrossfadeParameters(),We=Re?"linePattern":be?"lineSDF":Be?"lineGradient":"line",Fe=y.context,Ye=Fe.gl;let Je=!0;for(const ot of z){const yt=S.getTile(ot);if(Re&&!yt.patternsLoaded())continue;const wt=yt.getBucket(A);if(!wt)continue;const Ft=wt.programConfigurations.get(A.id),Dt=y.context.program.get(),Ct=y.useProgram(We,Ft),It=Je||Ct.program!==Dt,Wt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ot),fn=Pe.constantOr(null);if(fn&&yt.imageAtlas){const cn=yt.imageAtlas,tr=cn.patternPositions[fn.to.toString()],xn=cn.patternPositions[fn.from.toString()];tr&&xn&&Ft.setConstantPatternPositions(tr,xn)}const At=Wt?ot:null,jt=Re?$s(y,yt,A,$e,At):be?pu(y,yt,A,be,$e,At):Be?hc(y,yt,A,wt.lineClipsArray.length,At):il(y,yt,A,At);if(Re)Fe.activeTexture.set(Ye.TEXTURE0),yt.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),Ft.updatePaintBuffers($e);else if(be&&(It||y.lineAtlas.dirty))Fe.activeTexture.set(Ye.TEXTURE0),y.lineAtlas.bind(Fe);else if(Be){const cn=wt.gradients[A.id];let tr=cn.texture;if(A.gradientVersion!==cn.version){let xn=256;if(A.stepInterpolant){const In=S.getSource().maxzoom,nr=ot.canonical.z===In?Math.ceil(1<<y.transform.maxZoom-ot.canonical.z):1;xn=u.ac(u.aV(wt.maxLineLength/u.X*1024*nr),256,Fe.maxTextureSize)}cn.gradient=u.aW({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:xn,image:cn.gradient||void 0,clips:wt.lineClipsArray}),cn.texture?cn.texture.update(cn.gradient):cn.texture=new W(Fe,cn.gradient,Ye.RGBA),cn.version=A.gradientVersion,tr=cn.texture}Fe.activeTexture.set(Ye.TEXTURE0),tr.bind(A.stepInterpolant?Ye.NEAREST:Ye.LINEAR,Ye.CLAMP_TO_EDGE)}Ct.draw(Fe,Ye.TRIANGLES,Q,y.stencilModeForClipping(ot),de,jn.disabled,jt,Wt,A.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,A.paint,y.transform.zoom,Ft,wt.layoutVertexBuffer2),Je=!1}})(n,a,d,f);break;case"fill":(function(y,S,A,z){const V=A.paint.get("fill-color"),J=A.paint.get("fill-opacity");if(J.constantOr(1)===0)return;const Q=y.colorModeForRenderPass(),de=A.paint.get("fill-pattern"),be=y.opaquePassEnabledForLayer()&&!de.constantOr(1)&&V.constantOr(u.aM.transparent).a===1&&J.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===be){const Pe=y.depthModeForSublayer(1,y.renderPass==="opaque"?gn.ReadWrite:gn.ReadOnly);ts(y,S,A,z,Pe,Q,!1)}if(y.renderPass==="translucent"&&A.paint.get("fill-antialias")){const Pe=y.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,gn.ReadOnly);ts(y,S,A,z,Pe,Q,!0)}})(n,a,d,f);break;case"fill-extrusion":(function(y,S,A,z){const V=A.paint.get("fill-extrusion-opacity");if(V!==0&&y.renderPass==="translucent"){const J=new gn(y.context.gl.LEQUAL,gn.ReadWrite,y.depthRangeFor3D);if(V!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))Ta(y,S,A,z,J,Gn.disabled,ar.disabled),Ta(y,S,A,z,J,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const Q=y.colorModeForRenderPass();Ta(y,S,A,z,J,Gn.disabled,Q)}}})(n,a,d,f);break;case"hillshade":(function(y,S,A,z){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const V=y.context,J=y.depthModeForSublayer(0,gn.ReadOnly),Q=y.colorModeForRenderPass(),[de,be]=y.renderPass==="translucent"?y.stencilConfigForOverlap(z):[{},z];for(const Pe of be){const Re=S.getTile(Pe);Re.needsHillshadePrepare!==void 0&&Re.needsHillshadePrepare&&y.renderPass==="offscreen"?Ss(y,Re,A,J,Gn.disabled,Q):y.renderPass==="translucent"&&bs(y,Pe,Re,A,J,de[Pe.overscaledZ],Q)}V.viewport.set([0,0,y.width,y.height])})(n,a,d,f);break;case"raster":(function(y,S,A,z){if(y.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!z.length)return;const V=y.context,J=V.gl,Q=S.getSource(),de=y.useProgram("raster"),be=y.colorModeForRenderPass(),[Pe,Re]=Q instanceof ge?[{},z]:y.stencilConfigForOverlap(z),Be=Re[Re.length-1].overscaledZ,$e=!y.options.moving;for(const We of Re){const Fe=y.depthModeForSublayer(We.overscaledZ-Be,A.paint.get("raster-opacity")===1?gn.ReadWrite:gn.ReadOnly,J.LESS),Ye=S.getTile(We);Ye.registerFadeDuration(A.paint.get("raster-fade-duration"));const Je=S.findLoadedParent(We,0),ot=S.findLoadedSibling(We),yt=Eu(Ye,Je||ot||null,S,A,y.transform,y.style.map.terrain);let wt,Ft;const Dt=A.paint.get("raster-resampling")==="nearest"?J.NEAREST:J.LINEAR;V.activeTexture.set(J.TEXTURE0),Ye.texture.bind(Dt,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),V.activeTexture.set(J.TEXTURE1),Je?(Je.texture.bind(Dt,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),wt=Math.pow(2,Je.tileID.overscaledZ-Ye.tileID.overscaledZ),Ft=[Ye.tileID.canonical.x*wt%1,Ye.tileID.canonical.y*wt%1]):Ye.texture.bind(Dt,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),Ye.texture.useMipmap&&V.extTextureFilterAnisotropic&&y.transform.pitch>20&&J.texParameterf(J.TEXTURE_2D,V.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,V.extTextureFilterAnisotropicMax);const Ct=y.style.map.terrain&&y.style.map.terrain.getTerrainData(We),It=Ct?We:null,Wt=It?It.posMatrix:y.transform.calculatePosMatrix(We.toUnwrapped(),$e),fn=Jh(Wt,Ft||[0,0],wt||1,yt,A);Q instanceof ge?de.draw(V,J.TRIANGLES,Fe,Gn.disabled,be,jn.disabled,fn,Ct,A.id,Q.boundsBuffer,y.quadTriangleIndexBuffer,Q.boundsSegments):de.draw(V,J.TRIANGLES,Fe,Pe[We.overscaledZ],be,jn.disabled,fn,Ct,A.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(n,a,d,f);break;case"background":(function(y,S,A,z){const V=A.paint.get("background-color"),J=A.paint.get("background-opacity");if(J===0)return;const Q=y.context,de=Q.gl,be=y.transform,Pe=be.tileSize,Re=A.paint.get("background-pattern");if(y.isPatternMissing(Re))return;const Be=!Re&&V.a===1&&J===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==Be)return;const $e=Gn.disabled,We=y.depthModeForSublayer(0,Be==="opaque"?gn.ReadWrite:gn.ReadOnly),Fe=y.colorModeForRenderPass(),Ye=y.useProgram(Re?"backgroundPattern":"background"),Je=z||be.coveringTiles({tileSize:Pe,terrain:y.style.map.terrain});Re&&(Q.activeTexture.set(de.TEXTURE0),y.imageManager.bind(y.context));const ot=A.getCrossfadeParameters();for(const yt of Je){const wt=z?yt.posMatrix:y.transform.calculatePosMatrix(yt.toUnwrapped()),Ft=Re?gu(wt,J,y,Re,{tileID:yt,tileSize:Pe},ot):sl(wt,J,V),Dt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(yt);Ye.draw(Q,de.TRIANGLES,We,$e,Fe,jn.disabled,Ft,Dt,A.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(n,0,d,f);break;case"custom":(function(y,S,A){const z=y.context,V=A.implementation;if(y.renderPass==="offscreen"){const J=V.prerender;J&&(y.setCustomLayerDefaults(),z.setColorMode(y.colorModeForRenderPass()),J.call(V,z.gl,y.transform.customLayerMatrix()),z.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),z.setColorMode(y.colorModeForRenderPass()),z.setStencilMode(Gn.disabled);const J=V.renderingMode==="3d"?new gn(y.context.gl.LEQUAL,gn.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,gn.ReadOnly);z.setDepthMode(J),V.render(z.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),z.setDirty(),y.setBaseState(),z.bindFramebuffer.set(null)}})(n,0,d)}}translatePosMatrix(n,a,d,f,y){if(!d[0]&&!d[1])return n;const S=y?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(S){const V=Math.sin(S),J=Math.cos(S);d=[d[0]*J-d[1]*V,d[0]*V+d[1]*J]}const A=[y?d[0]:wn(a,d[0],this.transform.zoom),y?d[1]:wn(a,d[1],this.transform.zoom),0],z=new Float32Array(16);return u.J(z,n,A),z}saveTileTexture(n){const a=this._tileTextures[n.size[0]];a?a.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const a=this._tileTextures[n];return a&&a.length>0?a.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const a=this.imageManager.getPattern(n.from.toString()),d=this.imageManager.getPattern(n.to.toString());return!a||!d}useProgram(n,a){this.cache=this.cache||{};const d=n+(a?a.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new fu(this.context,$i[n],a,al[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new W(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:a}=this.context.gl;return this.width!==n||this.height!==a}}class zt{constructor(n,a){this.points=n,this.planes=a}static fromInvProjectionMatrix(n,a,d){const f=Math.pow(2,d),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const z=1/(A=u.af([],A,n))[3]/a*f;return u.b1(A,A,[z,z,1/A[3],z])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const z=function(de,be){var Pe=be[0],Re=be[1],Be=be[2],$e=Pe*Pe+Re*Re+Be*Be;return $e>0&&($e=1/Math.sqrt($e)),de[0]=be[0]*$e,de[1]=be[1]*$e,de[2]=be[2]*$e,de}([],function(de,be,Pe){var Re=be[0],Be=be[1],$e=be[2],We=Pe[0],Fe=Pe[1],Ye=Pe[2];return de[0]=Be*Ye-$e*Fe,de[1]=$e*We-Re*Ye,de[2]=Re*Fe-Be*We,de}([],T([],y[A[0]],y[A[1]]),T([],y[A[2]],y[A[1]]))),V=-((J=z)[0]*(Q=y[A[1]])[0]+J[1]*Q[1]+J[2]*Q[2]);var J,Q;return z.concat(V)});return new zt(y,S)}}class bt{constructor(n,a){this.min=n,this.max=a,this.center=function(d,f,y){return d[0]=.5*f[0],d[1]=.5*f[1],d[2]=.5*f[2],d}([],function(d,f,y){return d[0]=f[0]+y[0],d[1]=f[1]+y[1],d[2]=f[2]+y[2],d}([],this.min,this.max))}quadrant(n){const a=[n%2==0,n<2],d=q(this.min),f=q(this.max);for(let y=0;y<a.length;y++)d[y]=a[y]?this.min[y]:this.center[y],f[y]=a[y]?this.center[y]:this.max[y];return f[2]=this.max[2],new bt(d,f)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const a=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let f=0;f<n.planes.length;f++){const y=n.planes[f];let S=0;for(let A=0;A<a.length;A++)u.b2(y,a[A])>=0&&S++;if(S===0)return 0;S!==a.length&&(d=!1)}if(d)return 2;for(let f=0;f<3;f++){let y=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let A=0;A<n.points.length;A++){const z=n.points[A][f]-this.min[f];y=Math.min(y,z),S=Math.max(S,z)}if(S<0||y>this.max[f]-this.min[f])return 0}return 1}}class Nt{constructor(n=0,a=0,d=0,f=0){if(isNaN(n)||n<0||isNaN(a)||a<0||isNaN(d)||d<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=a,this.left=d,this.right=f}interpolate(n,a,d){return a.top!=null&&n.top!=null&&(this.top=u.y.number(n.top,a.top,d)),a.bottom!=null&&n.bottom!=null&&(this.bottom=u.y.number(n.bottom,a.bottom,d)),a.left!=null&&n.left!=null&&(this.left=u.y.number(n.left,a.left,d)),a.right!=null&&n.right!=null&&(this.right=u.y.number(n.right,a.right,d)),this}getCenter(n,a){const d=u.ac((this.left+n-this.right)/2,0,n),f=u.ac((this.top+a-this.bottom)/2,0,a);return new u.P(d,f)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Nt(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const nn=85.051129;class yn{constructor(n,a,d,f,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=n||0,this._maxZoom=a||22,this._minPitch=d??0,this._maxPitch=f??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Nt,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const n=new yn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.lngRange=n.lngRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this.minElevationForCurrentTile=n.minElevationForCurrentTile,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const a=-u.b3(n,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=function(){var d=new u.A(4);return u.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,f,y){var S=f[0],A=f[1],z=f[2],V=f[3],J=Math.sin(y),Q=Math.cos(y);d[0]=S*Q+z*J,d[1]=A*Q+V*J,d[2]=S*-J+z*Q,d[3]=A*-J+V*Q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const a=u.ac(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const a=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.tileZoom=Math.max(0,Math.floor(a)),this.scale=this.zoomScale(a),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,a,d){this._unmodified=!1,this._edgeInsets.interpolate(n,a,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const a=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,a)}getVisibleUnwrappedCoordinates(n){const a=[new u.b4(0,n)];if(this._renderWorldCopies){const d=this.pointCoordinate(new u.P(0,0)),f=this.pointCoordinate(new u.P(this.width,0)),y=this.pointCoordinate(new u.P(this.width,this.height)),S=this.pointCoordinate(new u.P(0,this.height)),A=Math.floor(Math.min(d.x,f.x,y.x,S.x)),z=Math.floor(Math.max(d.x,f.x,y.x,S.x)),V=1;for(let J=A-V;J<=z+V;J++)J!==0&&a.push(new u.b4(J,n))}return a}coveringTiles(n){var a,d;let f=this.coveringZoomLevel(n);const y=f;if(n.minzoom!==void 0&&f<n.minzoom)return[];n.maxzoom!==void 0&&f>n.maxzoom&&(f=n.maxzoom);const S=this.pointCoordinate(this.getCameraPoint()),A=u.Z.fromLngLat(this.center),z=Math.pow(2,f),V=[z*S.x,z*S.y,0],J=[z*A.x,z*A.y,0],Q=zt.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,f);let de=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(de=f);const be=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,Pe=Fe=>({aabb:new bt([Fe*z,0,0],[(Fe+1)*z,z,0]),zoom:0,x:0,y:0,wrap:Fe,fullyVisible:!1}),Re=[],Be=[],$e=f,We=n.reparseOverscaled?y:f;if(this._renderWorldCopies)for(let Fe=1;Fe<=3;Fe++)Re.push(Pe(-Fe)),Re.push(Pe(Fe));for(Re.push(Pe(0));Re.length>0;){const Fe=Re.pop(),Ye=Fe.x,Je=Fe.y;let ot=Fe.fullyVisible;if(!ot){const Ct=Fe.aabb.intersects(Q);if(Ct===0)continue;ot=Ct===2}const yt=n.terrain?V:J,wt=Fe.aabb.distanceX(yt),Ft=Fe.aabb.distanceY(yt),Dt=Math.max(Math.abs(wt),Math.abs(Ft));if(Fe.zoom===$e||Dt>be+(1<<$e-Fe.zoom)-2&&Fe.zoom>=de){const Ct=$e-Fe.zoom,It=V[0]-.5-(Ye<<Ct),Wt=V[1]-.5-(Je<<Ct);Be.push({tileID:new u.S(Fe.zoom===$e?We:Fe.zoom,Fe.wrap,Fe.zoom,Ye,Je),distanceSq:j([J[0]-.5-Ye,J[1]-.5-Je]),tileDistanceToCamera:Math.sqrt(It*It+Wt*Wt)})}else for(let Ct=0;Ct<4;Ct++){const It=(Ye<<1)+Ct%2,Wt=(Je<<1)+(Ct>>1),fn=Fe.zoom+1;let At=Fe.aabb.quadrant(Ct);if(n.terrain){const jt=new u.S(fn,Fe.wrap,fn,It,Wt),cn=n.terrain.getMinMaxElevation(jt),tr=(a=cn.minElevation)!==null&&a!==void 0?a:this.elevation,xn=(d=cn.maxElevation)!==null&&d!==void 0?d:this.elevation;At=new bt([At.min[0],At.min[1],tr],[At.max[0],At.max[1],xn])}Re.push({aabb:At,zoom:fn,x:It,y:Wt,wrap:Fe.wrap,fullyVisible:ot})}}return Be.sort((Fe,Ye)=>Fe.distanceSq-Ye.distanceSq).map(Fe=>Fe.tileID)}resize(n,a){this.width=n,this.height=a,this.pixelsToGLUnits=[2/n,-2/a],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const a=u.ac(n.lat,-85.051129,nn);return new u.P(u.O(n.lng)*this.worldSize,u.Q(a)*this.worldSize)}unproject(n){return new u.Z(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const a=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,f=this.pointLocation(this.centerPoint,n),y=n.getElevationForLngLatZoom(f,this.tileZoom);if(!(this.elevation-y))return;const S=d+a-y,A=Math.cos(this._pitch)*this.cameraToCenterDistance/S/u.b5(1,f.lat),z=this.scaleZoom(A/this.tileSize);this._elevation=y,this._center=f,this.zoom=z}setLocationAtPoint(n,a){const d=this.pointCoordinate(a),f=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(n),S=new u.Z(y.x-(d.x-f.x),y.y-(d.y-f.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,a){return a?this.coordinatePoint(this.locationCoordinate(n),a.getElevationForLngLatZoom(n,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,a){return this.coordinateLocation(this.pointCoordinate(n,a))}locationCoordinate(n){return u.Z.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,a){if(a){const de=a.pointCoordinate(n);if(de!=null)return de}const d=[n.x,n.y,0,1],f=[n.x,n.y,1,1];u.af(d,d,this.pixelMatrixInverse),u.af(f,f,this.pixelMatrixInverse);const y=d[3],S=f[3],A=d[1]/y,z=f[1]/S,V=d[2]/y,J=f[2]/S,Q=V===J?0:(0-V)/(J-V);return new u.Z(u.y.number(d[0]/y,f[0]/S,Q)/this.worldSize,u.y.number(A,z,Q)/this.worldSize)}coordinatePoint(n,a=0,d=this.pixelMatrix){const f=[n.x*this.worldSize,n.y*this.worldSize,a,1];return u.af(f,f,d),new u.P(f[0]/f[3],f[1]/f[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new et().extend(this.pointLocation(new u.P(0,n))).extend(this.pointLocation(new u.P(this.width,n))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new et([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,nn])}calculateTileMatrix(n){const a=n.canonical,d=this.worldSize/this.zoomScale(a.z),f=a.x+Math.pow(2,a.z)*n.wrap,y=u.an(new Float64Array(16));return u.J(y,y,[f*d,a.y*d,0]),u.K(y,y,[d/u.X,d/u.X,1]),y}calculatePosMatrix(n,a=!1){const d=n.key,f=a?this._alignedPosMatrixCache:this._posMatrixCache;if(f[d])return f[d];const y=this.calculateTileMatrix(n);return u.L(y,a?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),f[d]=new Float32Array(y),f[d]}calculateFogMatrix(n){const a=n.key,d=this._fogMatrixCache;if(d[a])return d[a];const f=this.calculateTileMatrix(n);return u.L(f,this.fogMatrix,f),d[a]=new Float32Array(f),d[a]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(n,a){a=u.ac(+a,this.minZoom,this.maxZoom);const d={center:new u.N(n.lng,n.lat),zoom:a};let f=this.lngRange;if(!this._renderWorldCopies&&f===null){const Fe=179.9999999999;f=[-Fe,Fe]}const y=this.tileSize*this.zoomScale(d.zoom);let S=0,A=y,z=0,V=y,J=0,Q=0;const{x:de,y:be}=this.size;if(this.latRange){const Fe=this.latRange;S=u.Q(Fe[1])*y,A=u.Q(Fe[0])*y,A-S<be&&(J=be/(A-S))}f&&(z=u.b3(u.O(f[0])*y,0,y),V=u.b3(u.O(f[1])*y,0,y),V<z&&(V+=y),V-z<de&&(Q=de/(V-z)));const{x:Pe,y:Re}=this.project.call({worldSize:y},n);let Be,$e;const We=Math.max(Q||0,J||0);if(We){const Fe=new u.P(Q?(V+z)/2:Pe,J?(A+S)/2:Re);return d.center=this.unproject.call({worldSize:y},Fe).wrap(),d.zoom+=this.scaleZoom(We),d}if(this.latRange){const Fe=be/2;Re-Fe<S&&($e=S+Fe),Re+Fe>A&&($e=A-Fe)}if(f){const Fe=(z+V)/2;let Ye=Pe;this._renderWorldCopies&&(Ye=u.b3(Pe,Fe-y/2,Fe+y/2));const Je=de/2;Ye-Je<z&&(Be=z+Je),Ye+Je>V&&(Be=V-Je)}if(Be!==void 0||$e!==void 0){const Fe=new u.P(Be??Pe,$e??Re);d.center=this.unproject.call({worldSize:y},Fe).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:a,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=a,this.zoom=d,this._unmodified=n,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,a=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b5(1,this.center.lat)*this.worldSize;let f=u.an(new Float64Array(16));u.K(f,f,[this.width/2,-this.height/2,1]),u.J(f,f,[1,-1,0]),this.labelPlaneMatrix=f,f=u.an(new Float64Array(16)),u.K(f,f,[1,-1,1]),u.J(f,f,[-1,-1,0]),u.K(f,f,[2/this.width,2/this.height,1]),this.glCoordMatrix=f;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),S=Math.min(this.elevation,this.minElevationForCurrentTile),A=y-S*this._pixelPerMeter/Math.cos(this._pitch),z=S<0?A:y,V=Math.PI/2+this._pitch,J=this._fov*(.5+n.y/this.height),Q=Math.sin(J)*z/Math.sin(u.ac(Math.PI-V-J,.01,Math.PI-.01)),de=this.getHorizon(),be=2*Math.atan(de/this.cameraToCenterDistance)*(.5+n.y/(2*de)),Pe=Math.sin(be)*z/Math.sin(u.ac(Math.PI-V-be,.01,Math.PI-.01)),Re=Math.min(Q,Pe);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*Re+z),this.nearZ=this.height/50,f=new Float64Array(16),u.b6(f,this._fov,this.width/this.height,this.nearZ,this.farZ),f[8]=2*-n.x/this.width,f[9]=2*n.y/this.height,this.projectionMatrix=u.ae(f),u.K(f,f,[1,-1,1]),u.J(f,f,[0,0,-this.cameraToCenterDistance]),u.b7(f,f,this._pitch),u.ad(f,f,this.angle),u.J(f,f,[-a,-d,0]),this.mercatorMatrix=u.K([],f,[this.worldSize,this.worldSize,this.worldSize]),u.K(f,f,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,f),u.J(f,f,[0,0,-this.elevation]),this.modelViewProjectionMatrix=f,this.invModelViewProjectionMatrix=u.as([],f),this.fogMatrix=new Float64Array(16),u.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-n.x/this.width,this.fogMatrix[9]=2*n.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b7(this.fogMatrix,this.fogMatrix,this._pitch),u.ad(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-a,-d,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,f);const Be=this.width%2/2,$e=this.height%2/2,We=Math.cos(this.angle),Fe=Math.sin(this.angle),Ye=a-Math.round(a)+We*Be+Fe*$e,Je=d-Math.round(d)+We*$e+Fe*Be,ot=new Float64Array(f);if(u.J(ot,ot,[Ye>.5?Ye-1:Ye,Je>.5?Je-1:Je,0]),this.alignedModelViewProjectionMatrix=ot,f=u.as(new Float64Array(16),this.pixelMatrix),!f)throw new Error("failed to invert matrix");this.pixelMatrixInverse=f,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new u.P(0,0)),a=[n.x*this.worldSize,n.y*this.worldSize,0,1];return u.af(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,n))}getCameraQueryGeometry(n){const a=this.getCameraPoint();if(n.length===1)return[n[0],a];{let d=a.x,f=a.y,y=a.x,S=a.y;for(const A of n)d=Math.min(d,A.x),f=Math.min(f,A.y),y=Math.max(y,A.x),S=Math.max(S,A.y);return[new u.P(d,f),new u.P(y,f),new u.P(y,S),new u.P(d,S),new u.P(d,f)]}}lngLatToCameraDepth(n,a){const d=this.locationCoordinate(n),f=[d.x*this.worldSize,d.y*this.worldSize,a,1];return u.af(f,f,this.modelViewProjectionMatrix),f[2]/f[3]}}function $n(v,n){let a,d=!1,f=null,y=null;const S=()=>{f=null,d&&(v.apply(y,a),f=setTimeout(S,n),d=!1)};return(...A)=>(d=!0,y=this,a=A,f||S(),f)}class Ln{constructor(n){this._getCurrentHash=()=>{const a=window.location.hash.replace("#","");if(this._hashName){let d;return a.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(d=f)}),(d&&d[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{const a=this._getCurrentHash();if(a.length>=3&&!a.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:d,pitch:+(a[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const a=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,a)},this._removeHash=()=>{const a=this._getCurrentHash();if(a.length===0)return;const d=a.join("/");let f=d;f.split("&").length>0&&(f=f.split("&")[0]),this._hashName&&(f=`${this._hashName}=${d}`);let y=window.location.hash.replace(f,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let S=window.location.href.replace(/(#.+)?$/,y);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=$n(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const a=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,f=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,f),S=Math.round(a.lng*y)/y,A=Math.round(a.lat*y)/y,z=this._map.getBearing(),V=this._map.getPitch();let J="";if(J+=n?`/${S}/${A}/${d}`:`${d}/${A}/${S}`,(z||V)&&(J+="/"+Math.round(10*z)/10),V&&(J+=`/${Math.round(V)}`),this._hashName){const Q=this._hashName;let de=!1;const be=window.location.hash.slice(1).split("&").map(Pe=>{const Re=Pe.split("=")[0];return Re===Q?(de=!0,`${Re}=${J}`):Pe}).filter(Pe=>Pe);return de||be.push(`${Q}=${J}`),`#${be.join("&")}`}return`#${J}`}}const qn={linearity:.3,easing:u.b8(0,0,.3,1)},mr=u.e({deceleration:2500,maxSpeed:1400},qn),$r=u.e({deceleration:20,maxSpeed:1400},qn),kr=u.e({deceleration:1e3,maxSpeed:360},qn),Hi=u.e({deceleration:1e3,maxSpeed:90},qn);class Zi{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,a=b.now();for(;n.length>0&&a-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)a.zoom+=y.zoomDelta||0,a.bearing+=y.bearingDelta||0,a.pitch+=y.pitchDelta||0,y.panDelta&&a.pan._add(y.panDelta),y.around&&(a.around=y.around),y.pinchAround&&(a.pinchAround=y.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(a.pan.mag()){const y=Ys(a.pan.mag(),d,u.e({},mr,n||{}));f.offset=a.pan.mult(y.amount/a.pan.mag()),f.center=this._map.transform.center,Wi(f,y)}if(a.zoom){const y=Ys(a.zoom,d,$r);f.zoom=this._map.transform.zoom+y.amount,Wi(f,y)}if(a.bearing){const y=Ys(a.bearing,d,kr);f.bearing=this._map.transform.bearing+u.ac(y.amount,-179,179),Wi(f,y)}if(a.pitch){const y=Ys(a.pitch,d,Hi);f.pitch=this._map.transform.pitch+y.amount,Wi(f,y)}if(f.zoom||f.bearing){const y=a.pinchAround===void 0?a.around:a.pinchAround;f.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),u.e(f,{noMoveStart:!0})}}function Wi(v,n){(!v.duration||v.duration<n.duration)&&(v.duration=n.duration,v.easing=n.easing)}function Ys(v,n,a){const{maxSpeed:d,linearity:f,deceleration:y}=a,S=u.ac(v*f/(n/1e3),-d,d),A=Math.abs(S)/(y*f);return{easing:a.easing,duration:1e3*A,amount:S*(A/2)}}class br extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,a,d,f={}){const y=C.mousePos(a.getCanvas(),d),S=a.unproject(y);super(n,u.e({point:y,lngLat:S,originalEvent:d},f)),this._defaultPrevented=!1,this.target=a}}class mo extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,a,d){const f=n==="touchend"?d.changedTouches:d.touches,y=C.touchPos(a.getCanvasContainer(),f),S=y.map(z=>a.unproject(z)),A=y.reduce((z,V,J,Q)=>z.add(V.div(Q.length)),new u.P(0,0));super(n,{points:y,point:A,lngLats:S,lngLat:a.unproject(A),originalEvent:d}),this._defaultPrevented=!1}}class mp extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,a,d){super(n,{originalEvent:d}),this._defaultPrevented=!1}}class gp{constructor(n,a){this._map=n,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new mp(n.type,this._map,n))}mousedown(n,a){return this._mousedownPos=a,this._firePreventable(new br(n.type,this._map,n))}mouseup(n){this._map.fire(new br(n.type,this._map,n))}click(n,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new br(n.type,this._map,n))}dblclick(n){return this._firePreventable(new br(n.type,this._map,n))}mouseover(n){this._map.fire(new br(n.type,this._map,n))}mouseout(n){this._map.fire(new br(n.type,this._map,n))}touchstart(n){return this._firePreventable(new mo(n.type,this._map,n))}touchmove(n){this._map.fire(new mo(n.type,this._map,n))}touchend(n){this._map.fire(new mo(n.type,this._map,n))}touchcancel(n){this._map.fire(new mo(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gr{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new br(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new br("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new br(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ko{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.pointLocation(u.P.convert(n),this._map.terrain)}}class Xi{constructor(n,a){this._map=n,this._tr=new ko(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,a){this.isEnabled()&&n.shiftKey&&n.button===0&&(C.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(n,a){if(!this._active)return;const d=a;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const f=this._startPos;this._lastPos=d,this._box||(this._box=C.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const y=Math.min(f.x,d.x),S=Math.max(f.x,d.x),A=Math.min(f.y,d.y),z=Math.max(f.y,d.y);C.setTransform(this._box,`translate(${y}px,${A}px)`),this._box.style.width=S-y+"px",this._box.style.height=z-A+"px"}mouseupWindow(n,a){if(!this._active||n.button!==0)return;const d=this._startPos,f=a;if(this.reset(),C.suppressClick(),d.x!==f.x||d.y!==f.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:n})),{cameraAnimation:y=>y.fitScreenCoordinates(d,f,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(C.remove(this._box),this._box=null),C.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,a){return this._map.fire(new u.k(n,{originalEvent:a}))}}function Iu(v,n){if(v.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${n.length}`);const a={};for(let d=0;d<v.length;d++)a[v[d].identifier]=n[d];return a}class ld{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,a,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),d.length===this.numTouches&&(this.centroid=function(f){const y=new u.P(0,0);for(const S of f)y._add(S);return y.div(f.length)}(a),this.touches=Iu(d,a)))}touchmove(n,a,d){if(this.aborted||!this.centroid)return;const f=Iu(d,a);for(const y in this.touches){const S=f[y];(!S||S.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(n,a,d){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class Sc{constructor(n){this.singleTap=new ld(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,a,d){this.singleTap.touchstart(n,a,d)}touchmove(n,a,d){this.singleTap.touchmove(n,a,d)}touchend(n,a,d){const f=this.singleTap.touchend(n,a,d);if(f){const y=n.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(f)<30;if(y&&S||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class yl{constructor(n){this._tr=new ko(n),this._zoomIn=new Sc({numTouches:1,numTaps:2}),this._zoomOut=new Sc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,a,d){this._zoomIn.touchstart(n,a,d),this._zoomOut.touchstart(n,a,d)}touchmove(n,a,d){this._zoomIn.touchmove(n,a,d),this._zoomOut.touchmove(n,a,d)}touchend(n,a,d){const f=this._zoomIn.touchend(n,a,d),y=this._zoomOut.touchend(n,a,d),S=this._tr;return f?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(f)},{originalEvent:n})}):y?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(y)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ts{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const a=this._moveFunction(...n);if(a.bearingDelta||a.pitchDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(n,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=a.length?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,a){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const f=a.length?a[0]:a;return!this._moved&&f.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=f,this._move(d,f))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&C.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ud={0:1,2:2};class Ec{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const a=C.mouseButton(n);this._eventButton=a}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(a,d){const f=ud[d];return a.buttons===void 0||(a.buttons&f)!==f}(n,this._eventButton)}isValidEndEvent(n){return C.mouseButton(n)===this._eventButton}}class cd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}const Tc=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=n=>{n.preventDefault()}},hd=({enable:v,clickTolerance:n,bearingDegreesPerPixelMoved:a=.8})=>{const d=new Ec({checkCorrectEvent:f=>C.mouseButton(f)===0&&f.ctrlKey||C.mouseButton(f)===2});return new Ts({clickTolerance:n,move:(f,y)=>({bearingDelta:(y.x-f.x)*a}),moveStateManager:d,enable:v,assignEvents:Tc})},dd=({enable:v,clickTolerance:n,pitchDegreesPerPixelMoved:a=-.5})=>{const d=new Ec({checkCorrectEvent:f=>C.mouseButton(f)===0&&f.ctrlKey||C.mouseButton(f)===2});return new Ts({clickTolerance:n,move:(f,y)=>({pitchDelta:(y.y-f.y)*a}),moveStateManager:d,enable:v,assignEvents:Tc})};class Ca{constructor(n,a){this._clickTolerance=n.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,a,d){return this._calculateTransform(n,a,d)}touchmove(n,a,d){if(this._active){if(!this._shouldBePrevented(d.length))return n.preventDefault(),this._calculateTransform(n,a,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,a,d){this._calculateTransform(n,a,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,a,d){d.length>0&&(this._active=!0);const f=Iu(d,a),y=new u.P(0,0),S=new u.P(0,0);let A=0;for(const V in f){const J=f[V],Q=this._touches[V];Q&&(y._add(J),S._add(J.sub(Q)),A++,f[V]=J)}if(this._touches=f,this._shouldBePrevented(A)||!S.mag())return;const z=S.div(A);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(A),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ic{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,a,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([a[0],a[1]]))}touchmove(n,a,d){if(!this._firstTwoTouches)return;n.preventDefault();const[f,y]=this._firstTwoTouches,S=Cu(d,a,f),A=Cu(d,a,y);if(!S||!A)return;const z=this._aroundCenter?null:S.add(A).div(2);return this._move([S,A],z,n)}touchend(n,a,d){if(!this._firstTwoTouches)return;const[f,y]=this._firstTwoTouches,S=Cu(d,a,f),A=Cu(d,a,y);S&&A||(this._active&&C.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Cu(v,n,a){for(let d=0;d<v.length;d++)if(v[d].identifier===a)return n[d]}function fd(v,n){return Math.log(v/n)/Math.LN2}class pd extends Ic{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,a){const d=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(fd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:fd(this._distance,d),pinchAround:a}}}function md(v,n){return 180*v.angleWith(n)/Math.PI}class gd extends Ic{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,a,d){const f=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:md(this._vector,f),pinchAround:a}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const a=25/(Math.PI*this._minDiameter)*360,d=md(n,this._startVector);return Math.abs(d)<a}}function Cc(v){return Math.abs(v.y)>Math.abs(v.x)}class vl extends Ic{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,a,d){super.touchstart(n,a,d),this._currentTouchCount=d.length}_start(n){this._lastPoints=n,Cc(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,a,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const f=n[0].sub(this._lastPoints[0]),y=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(f,y,d.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(f.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(n,a,d){if(this._valid!==void 0)return this._valid;const f=n.mag()>=2,y=a.mag()>=2;if(!f&&!y)return;if(!f||!y)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const S=n.y>0==a.y>0;return Cc(n)&&Cc(a)&&S}}const yp={panStep:100,bearingStep:15,pitchStep:10};class go{constructor(n){this._tr=new ko(n);const a=yp;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let a=0,d=0,f=0,y=0,S=0;switch(n.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:n.shiftKey?d=-1:(n.preventDefault(),y=-1);break;case 39:n.shiftKey?d=1:(n.preventDefault(),y=1);break;case 38:n.shiftKey?f=1:(n.preventDefault(),S=-1);break;case 40:n.shiftKey?f=-1:(n.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(d=0,f=0),{cameraAnimation:A=>{const z=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:ns,zoom:a?Math.round(z.zoom)+a*(n.shiftKey?2:1):z.zoom,bearing:z.bearing+d*this._bearingStep,pitch:z.pitch+f*this._pitchStep,offset:[-y*this._panStep,-S*this._panStep],center:z.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ns(v){return v*(2-v)}const yd=4.000244140625;class zo{constructor(n,a){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=n,this._tr=new ko(n),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let a=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const d=b.now(),f=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,a!==0&&a%yd==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(f*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),n.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=n,this._delta-=a,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=C.mousePos(this._map.getCanvas(),n),d=this._tr;this._around=a.y>d.transform.height/2-d.transform.getHorizon()?u.N.convert(this._aroundCenter?d.center:d.unproject(a)):u.N.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>yd?this._wheelZoomRate:this._defaultZoomRate;let V=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&V!==0&&(V=1/V);const J=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(J*V))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,d=this._startZoom,f=this._easing;let y,S=!1;const A=b.now()-this._lastWheelEventTime;if(this._type==="wheel"&&d&&f&&A){const z=Math.min(A/200,1),V=f(z);y=u.y.number(d,a,V),z<1?this._frameId||(this._frameId=!0):S=!0}else y=a,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:y-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let a=u.b9;if(this._prevEase){const d=this._prevEase,f=(b.now()-d.start)/d.duration,y=d.easing(f+.01)-d.easing(f),S=.27/Math.sqrt(y*y+1e-4)*.01,A=Math.sqrt(.0729-S*S);a=u.b8(S,A,.25,1)}return this._prevEase={start:b.now(),duration:n,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Pa{constructor(n,a){this._clickZoom=n,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class vy{constructor(n){this._tr=new ko(n),this.reset()}reset(){this._active=!1}dblclick(n,a){return n.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _y{constructor(){this._tap=new Sc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,a,d){if(!this._swipePoint)if(this._tapTime){const f=a[0],y=n.timeStamp-this._tapTime<500,S=this._tapPoint.dist(f)<30;y&&S?d.length>0&&(this._swipePoint=f,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(n,a,d)}touchmove(n,a,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const f=a[0],y=f.y-this._swipePoint.y;return this._swipePoint=f,n.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(n,a,d)}touchend(n,a,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const f=this._tap.touchend(n,a,d);f&&(this._tapTime=n.timeStamp,this._tapPoint=f)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vp{constructor(n,a,d){this._el=n,this._mousePan=a,this._touchPan=d}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class _p{constructor(n,a,d){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=a,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class vd{constructor(n,a,d,f){this._el=n,this._touchZoom=a,this._touchRotate=d,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class _l{constructor(n,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=C.create("div","maplibregl-cooperative-gesture-screen",n);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),f=document.createElement("div");f.className="maplibregl-desktop-message",f.textContent=a,this._container.appendChild(f);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=d,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(C.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,a){this._enabled&&(this._map.fire(new u.k("cooperativegestureprevented",{gestureType:n,originalEvent:a})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const yo=v=>v.zoom||v.drag||v.pitch||v.rotate;class Ut extends u.k{}function Pc(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class _d{constructor(n,a){this.handleWindowEvent=f=>{this.handleEvent(f,`${f.type}Window`)},this.handleEvent=(f,y)=>{if(f.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=f.type==="renderFrame"?void 0:f,A={needsRenderFrame:!1},z={},V={},J=f.touches,Q=J?this._getMapTouches(J):void 0,de=Q?C.touchPos(this._map.getCanvas(),Q):C.mousePos(this._map.getCanvas(),f);for(const{handlerName:Re,handler:Be,allowed:$e}of this._handlers){if(!Be.isEnabled())continue;let We;this._blockedByActive(V,$e,Re)?Be.reset():Be[y||f.type]&&(We=Be[y||f.type](f,de,Q),this.mergeHandlerResult(A,z,We,Re,S),We&&We.needsRenderFrame&&this._triggerRenderFrame()),(We||Be.isActive())&&(V[Re]=Be)}const be={};for(const Re in this._previousActiveHandlers)V[Re]||(be[Re]=S);this._previousActiveHandlers=V,(Object.keys(be).length||Pc(A))&&(this._changes.push([A,z,be]),this._triggerRenderFrame()),(Object.keys(V).length||Pc(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Pe}=A;Pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pe(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Zi(n),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[f,y,S]of this._listeners)C.addEventListener(f,y,f===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[n,a,d]of this._listeners)C.removeEventListener(n,a,n===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(n){const a=this._map,d=a.getCanvasContainer();this._add("mapEvent",new gp(a,n));const f=a.boxZoom=new Xi(a,n);this._add("boxZoom",f),n.interactive&&n.boxZoom&&f.enable();const y=a.cooperativeGestures=new _l(a,n.cooperativeGestures);this._add("cooperativeGestures",y),n.cooperativeGestures&&y.enable();const S=new yl(a),A=new vy(a);a.doubleClickZoom=new Pa(A,S),this._add("tapZoom",S),this._add("clickZoom",A),n.interactive&&n.doubleClickZoom&&a.doubleClickZoom.enable();const z=new _y;this._add("tapDragZoom",z);const V=a.touchPitch=new vl(a);this._add("touchPitch",V),n.interactive&&n.touchPitch&&a.touchPitch.enable(n.touchPitch);const J=hd(n),Q=dd(n);a.dragRotate=new _p(n,J,Q),this._add("mouseRotate",J,["mousePitch"]),this._add("mousePitch",Q,["mouseRotate"]),n.interactive&&n.dragRotate&&a.dragRotate.enable();const de=(({enable:We,clickTolerance:Fe})=>{const Ye=new Ec({checkCorrectEvent:Je=>C.mouseButton(Je)===0&&!Je.ctrlKey});return new Ts({clickTolerance:Fe,move:(Je,ot)=>({around:ot,panDelta:ot.sub(Je)}),activateOnStart:!0,moveStateManager:Ye,enable:We,assignEvents:Tc})})(n),be=new Ca(n,a);a.dragPan=new vp(d,de,be),this._add("mousePan",de),this._add("touchPan",be,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&a.dragPan.enable(n.dragPan);const Pe=new gd,Re=new pd;a.touchZoomRotate=new vd(d,Re,Pe,z),this._add("touchRotate",Pe,["touchPan","touchZoom"]),this._add("touchZoom",Re,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&a.touchZoomRotate.enable(n.touchZoomRotate);const Be=a.scrollZoom=new zo(a,()=>this._triggerRenderFrame());this._add("scrollZoom",Be,["mousePan"]),n.interactive&&n.scrollZoom&&a.scrollZoom.enable(n.scrollZoom);const $e=a.keyboard=new go(a);this._add("keyboard",$e),n.interactive&&n.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new gr(a))}_add(n,a,d){this._handlers.push({handlerName:n,handler:a,allowed:d}),this._handlersById[n]=a}stop(n){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!yo(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,a,d){for(const f in n)if(f!==d&&(!a||a.indexOf(f)<0))return!0;return!1}_getMapTouches(n){const a=[];for(const d of n)this._el.contains(d.target)&&a.push(d);return a}mergeHandlerResult(n,a,d,f,y){if(!d)return;u.e(n,d);const S={handlerName:f,originalEvent:d.originalEvent||y};d.zoomDelta!==void 0&&(a.zoom=S),d.panDelta!==void 0&&(a.drag=S),d.pitchDelta!==void 0&&(a.pitch=S),d.bearingDelta!==void 0&&(a.rotate=S)}_applyChanges(){const n={},a={},d={};for(const[f,y,S]of this._changes)f.panDelta&&(n.panDelta=(n.panDelta||new u.P(0,0))._add(f.panDelta)),f.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+f.pitchDelta),f.around!==void 0&&(n.around=f.around),f.pinchAround!==void 0&&(n.pinchAround=f.pinchAround),f.noInertia&&(n.noInertia=f.noInertia),u.e(a,y),u.e(d,S);this._updateMapTransform(n,a,d),this._changes=[]}_updateMapTransform(n,a,d){const f=this._map,y=f._getTransformForUpdate(),S=f.terrain;if(!(Pc(n)||S&&this._terrainMovement))return this._fireEvents(a,d,!0);let{panDelta:A,zoomDelta:z,bearingDelta:V,pitchDelta:J,around:Q,pinchAround:de}=n;de!==void 0&&(Q=de),f._stop(!0),Q=Q||f.transform.centerPoint;const be=y.pointLocation(A?Q.sub(A):Q);V&&(y.bearing+=V),J&&(y.pitch+=J),z&&(y.zoom+=z),S?this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(A)):y.setLocationAtPoint(be,Q):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(be,Q)):y.setLocationAtPoint(be,Q),f._applyUpdatedTransform(y),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(a,d,!0)}_fireEvents(n,a,d){const f=yo(this._eventsInProgress),y=yo(n),S={};for(const Q in n){const{originalEvent:de}=n[Q];this._eventsInProgress[Q]||(S[`${Q}start`]=de),this._eventsInProgress[Q]=n[Q]}!f&&y&&this._fireEvent("movestart",y.originalEvent);for(const Q in S)this._fireEvent(Q,S[Q]);y&&this._fireEvent("move",y.originalEvent);for(const Q in n){const{originalEvent:de}=n[Q];this._fireEvent(Q,de)}const A={};let z;for(const Q in this._eventsInProgress){const{handlerName:de,originalEvent:be}=this._eventsInProgress[Q];this._handlersById[de].isActive()||(delete this._eventsInProgress[Q],z=a[de]||be,A[`${Q}end`]=z)}for(const Q in A)this._fireEvent(Q,A[Q]);const V=yo(this._eventsInProgress),J=(f||y)&&!V;if(J&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Q=this._map._getTransformForUpdate();Q.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(Q)}if(d&&J){this._updatingCamera=!0;const Q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),de=be=>be!==0&&-this._bearingSnap<be&&be<this._bearingSnap;!Q||!Q.essential&&b.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:z})),de(this._map.getBearing())&&this._map.resetNorth()):(de(Q.bearing||this._map.getBearing())&&(Q.bearing=0),Q.freezeElevation=!0,this._map.easeTo(Q,{originalEvent:z})),this._updatingCamera=!1}}_fireEvent(n,a){this._map.fire(new u.k(n,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new Ut("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class xp extends u.E{constructor(n,a){super(),this._renderFrameCallback=()=>{const d=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=a.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(n,a){return this.jumpTo({center:n},a)}panBy(n,a,d){return n=u.P.convert(n).mult(-1),this.panTo(this.transform.center,u.e({offset:n},a),d)}panTo(n,a,d){return this.easeTo(u.e({center:n},a),d)}getZoom(){return this.transform.zoom}setZoom(n,a){return this.jumpTo({zoom:n},a),this}zoomTo(n,a,d){return this.easeTo(u.e({zoom:n},a),d)}zoomIn(n,a){return this.zoomTo(this.getZoom()+1,n,a),this}zoomOut(n,a){return this.zoomTo(this.getZoom()-1,n,a),this}getBearing(){return this.transform.bearing}setBearing(n,a){return this.jumpTo({bearing:n},a),this}getPadding(){return this.transform.padding}setPadding(n,a){return this.jumpTo({padding:n},a),this}rotateTo(n,a,d){return this.easeTo(u.e({bearing:n},a),d)}resetNorth(n,a){return this.rotateTo(0,u.e({duration:1e3},n),a),this}resetNorthPitch(n,a){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},n),a),this}snapToNorth(n,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,a):this}getPitch(){return this.transform.pitch}setPitch(n,a){return this.jumpTo({pitch:n},a),this}cameraForBounds(n,a){n=et.convert(n).adjustAntiMeridian();const d=a&&a.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),d,a)}_cameraForBoxAndBearing(n,a,d,f){const y={top:0,bottom:0,right:0,left:0};if(typeof(f=u.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){const Ct=f.padding;f.padding={top:Ct,bottom:Ct,right:Ct,left:Ct}}f.padding=u.e(y,f.padding);const S=this.transform,A=S.padding,z=new et(n,a),V=S.project(z.getNorthWest()),J=S.project(z.getNorthEast()),Q=S.project(z.getSouthEast()),de=S.project(z.getSouthWest()),be=u.ba(-d),Pe=V.rotate(be),Re=J.rotate(be),Be=Q.rotate(be),$e=de.rotate(be),We=new u.P(Math.max(Pe.x,Re.x,$e.x,Be.x),Math.max(Pe.y,Re.y,$e.y,Be.y)),Fe=new u.P(Math.min(Pe.x,Re.x,$e.x,Be.x),Math.min(Pe.y,Re.y,$e.y,Be.y)),Ye=We.sub(Fe),Je=(S.width-(A.left+A.right+f.padding.left+f.padding.right))/Ye.x,ot=(S.height-(A.top+A.bottom+f.padding.top+f.padding.bottom))/Ye.y;if(ot<0||Je<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const yt=Math.min(S.scaleZoom(S.scale*Math.min(Je,ot)),f.maxZoom),wt=u.P.convert(f.offset),Ft=new u.P((f.padding.left-f.padding.right)/2,(f.padding.top-f.padding.bottom)/2).rotate(u.ba(d)),Dt=wt.add(Ft).mult(S.scale/S.zoomScale(yt));return{center:S.unproject(V.add(Q).div(2).sub(Dt)),zoom:yt,bearing:d}}fitBounds(n,a,d){return this._fitInternal(this.cameraForBounds(n,a),a,d)}fitScreenCoordinates(n,a,d,f,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(n)),this.transform.pointLocation(u.P.convert(a)),d,f),f,y)}_fitInternal(n,a,d){return n?(delete(a=u.e(n,a)).padding,a.linear?this.easeTo(a,d):this.flyTo(a,d)):this}jumpTo(n,a){this.stop();const d=this._getTransformForUpdate();let f=!1,y=!1,S=!1;return"zoom"in n&&d.zoom!==+n.zoom&&(f=!0,d.zoom=+n.zoom),n.center!==void 0&&(d.center=u.N.convert(n.center)),"bearing"in n&&d.bearing!==+n.bearing&&(y=!0,d.bearing=+n.bearing),"pitch"in n&&d.pitch!==+n.pitch&&(S=!0,d.pitch=+n.pitch),n.padding==null||d.isPaddingEqual(n.padding)||(d.padding=n.padding),this._applyUpdatedTransform(d),this.fire(new u.k("movestart",a)).fire(new u.k("move",a)),f&&this.fire(new u.k("zoomstart",a)).fire(new u.k("zoom",a)).fire(new u.k("zoomend",a)),y&&this.fire(new u.k("rotatestart",a)).fire(new u.k("rotate",a)).fire(new u.k("rotateend",a)),S&&this.fire(new u.k("pitchstart",a)).fire(new u.k("pitch",a)).fire(new u.k("pitchend",a)),this.fire(new u.k("moveend",a))}calculateCameraOptionsFromTo(n,a,d,f=0){const y=u.Z.fromLngLat(n,a),S=u.Z.fromLngLat(d,f),A=S.x-y.x,z=S.y-y.y,V=S.z-y.z,J=Math.hypot(A,z,V);if(J===0)throw new Error("Can't calculate camera options with same From and To");const Q=Math.hypot(A,z),de=this.transform.scaleZoom(this.transform.cameraToCenterDistance/J/this.transform.tileSize),be=180*Math.atan2(A,-z)/Math.PI;let Pe=180*Math.acos(Q/J)/Math.PI;return Pe=V<0?90-Pe:90+Pe,{center:S.toLngLat(),zoom:de,pitch:Pe,bearing:be}}easeTo(n,a){var d;this._stop(!1,n.easeId),((n=u.e({offset:[0,0],duration:500,easing:u.b9},n)).animate===!1||!n.essential&&b.prefersReducedMotion)&&(n.duration=0);const f=this._getTransformForUpdate(),y=f.zoom,S=f.bearing,A=f.pitch,z=f.padding,V="bearing"in n?this._normalizeBearing(n.bearing,S):S,J="pitch"in n?+n.pitch:A,Q="padding"in n?n.padding:f.padding,de=u.P.convert(n.offset);let be=f.centerPoint.add(de);const Pe=f.pointLocation(be),{center:Re,zoom:Be}=f.getConstrained(u.N.convert(n.center||Pe),(d=n.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(Re,f);const $e=f.project(Pe),We=f.project(Re).sub($e),Fe=f.zoomScale(Be-y);let Ye,Je;n.around&&(Ye=u.N.convert(n.around),Je=f.locationPoint(Ye));const ot={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Be!==y,this._rotating=this._rotating||S!==V,this._pitching=this._pitching||J!==A,this._padding=!f.isPaddingEqual(Q),this._easeId=n.easeId,this._prepareEase(a,n.noMoveStart,ot),this.terrain&&this._prepareElevation(Re),this._ease(yt=>{if(this._zooming&&(f.zoom=u.y.number(y,Be,yt)),this._rotating&&(f.bearing=u.y.number(S,V,yt)),this._pitching&&(f.pitch=u.y.number(A,J,yt)),this._padding&&(f.interpolatePadding(z,Q,yt),be=f.centerPoint.add(de)),this.terrain&&!n.freezeElevation&&this._updateElevation(yt),Ye)f.setLocationAtPoint(Ye,Je);else{const wt=f.zoomScale(f.zoom-y),Ft=Be>y?Math.min(2,Fe):Math.max(.5,Fe),Dt=Math.pow(Ft,1-yt),Ct=f.unproject($e.add(We.mult(yt*Dt)).mult(wt));f.setLocationAtPoint(f.renderWorldCopies?Ct.wrap():Ct,be)}this._applyUpdatedTransform(f),this._fireMoveEvents(a)},yt=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(a,yt)},n),this}_prepareEase(n,a,d={}){this._moving=!0,a||d.moving||this.fire(new u.k("movestart",n)),this._zooming&&!d.zooming&&this.fire(new u.k("zoomstart",n)),this._rotating&&!d.rotating&&this.fire(new u.k("rotatestart",n)),this._pitching&&!d.pitching&&this.fire(new u.k("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&a!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(d-(a-(d*n+this._elevationStart))/(1-n)),this._elevationTarget=a}this.transform.elevation=u.y.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){const a=n.getCameraPosition(),d=this.terrain.getElevationForLngLatZoom(a.lngLat,n.zoom);if(a.altitude<d){const f=this.calculateCameraOptionsFromTo(a.lngLat,d,n.center,n.elevation);return{pitch:f.pitch,zoom:f.zoom}}return{}}_applyUpdatedTransform(n){const a=[];if(this.terrain&&a.push(f=>this._elevateCameraIfInsideTerrain(f)),this.transformCameraUpdate&&a.push(f=>this.transformCameraUpdate(f)),!a.length)return;const d=n.clone();for(const f of a){const y=d.clone(),{center:S,zoom:A,pitch:z,bearing:V,elevation:J}=f(y);S&&(y.center=S),A!==void 0&&(y.zoom=A),z!==void 0&&(y.pitch=z),V!==void 0&&(y.bearing=V),J!==void 0&&(y.elevation=J),d.apply(y)}this.transform.apply(d)}_fireMoveEvents(n){this.fire(new u.k("move",n)),this._zooming&&this.fire(new u.k("zoom",n)),this._rotating&&this.fire(new u.k("rotate",n)),this._pitching&&this.fire(new u.k("pitch",n))}_afterEase(n,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const d=this._zooming,f=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new u.k("zoomend",n)),f&&this.fire(new u.k("rotateend",n)),y&&this.fire(new u.k("pitchend",n)),this.fire(new u.k("moveend",n))}flyTo(n,a){var d;if(!n.essential&&b.prefersReducedMotion){const jt=u.M(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(jt,a)}this.stop(),n=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b9},n);const f=this._getTransformForUpdate(),y=f.zoom,S=f.bearing,A=f.pitch,z=f.padding,V="bearing"in n?this._normalizeBearing(n.bearing,S):S,J="pitch"in n?+n.pitch:A,Q="padding"in n?n.padding:f.padding,de=u.P.convert(n.offset);let be=f.centerPoint.add(de);const Pe=f.pointLocation(be),{center:Re,zoom:Be}=f.getConstrained(u.N.convert(n.center||Pe),(d=n.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(Re,f);const $e=f.zoomScale(Be-y),We=f.project(Pe),Fe=f.project(Re).sub(We);let Ye=n.curve;const Je=Math.max(f.width,f.height),ot=Je/$e,yt=Fe.mag();if("minZoom"in n){const jt=u.ac(Math.min(n.minZoom,y,Be),f.minZoom,f.maxZoom),cn=Je/f.zoomScale(jt-y);Ye=Math.sqrt(cn/yt*2)}const wt=Ye*Ye;function Ft(jt){const cn=(ot*ot-Je*Je+(jt?-1:1)*wt*wt*yt*yt)/(2*(jt?ot:Je)*wt*yt);return Math.log(Math.sqrt(cn*cn+1)-cn)}function Dt(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function Ct(jt){return(Math.exp(jt)+Math.exp(-jt))/2}const It=Ft(!1);let Wt=function(jt){return Ct(It)/Ct(It+Ye*jt)},fn=function(jt){return Je*((Ct(It)*(Dt(cn=It+Ye*jt)/Ct(cn))-Dt(It))/wt)/yt;var cn},At=(Ft(!0)-It)/Ye;if(Math.abs(yt)<1e-6||!isFinite(At)){if(Math.abs(Je-ot)<1e-6)return this.easeTo(n,a);const jt=ot<Je?-1:1;At=Math.abs(Math.log(ot/Je))/Ye,fn=()=>0,Wt=cn=>Math.exp(jt*Ye*cn)}return n.duration="duration"in n?+n.duration:1e3*At/("screenSpeed"in n?+n.screenSpeed/Ye:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=S!==V,this._pitching=J!==A,this._padding=!f.isPaddingEqual(Q),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(Re),this._ease(jt=>{const cn=jt*At,tr=1/Wt(cn);f.zoom=jt===1?Be:y+f.scaleZoom(tr),this._rotating&&(f.bearing=u.y.number(S,V,jt)),this._pitching&&(f.pitch=u.y.number(A,J,jt)),this._padding&&(f.interpolatePadding(z,Q,jt),be=f.centerPoint.add(de)),this.terrain&&!n.freezeElevation&&this._updateElevation(jt);const xn=jt===1?Re:f.unproject(We.add(Fe.mult(fn(cn))).mult(tr));f.setLocationAtPoint(f.renderWorldCopies?xn.wrap():xn,be),this._applyUpdatedTransform(f),this._fireMoveEvents(a)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(a)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,a){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,a)}return n||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(n,a,d){d.animate===!1||d.duration===0?(n(1),a()):(this._easeStart=b.now(),this._easeOptions=d,this._onEaseFrame=n,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,a){n=u.b3(n,-180,180);const d=Math.abs(n-a);return Math.abs(n-360-a)<d&&(n-=360),Math.abs(n+360-a)<d&&(n+=360),n}_normalizeCenter(n,a){if(!a.renderWorldCopies||a.lngRange)return;const d=n.lng-a.center.lng;n.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(n),this.transform.tileZoom)-this.transform.elevation:null}}const xl={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class wl{constructor(n=xl){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=C.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=C.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=C.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){C.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,a){const d=this._map._getUIString(`AttributionControl.${a}`);n.title=d,n.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}const a=this._map.style.sourceCaches;for(const f in a){const y=a[f];if(y.used||y.usedForTerrain){const S=y.getSource();S.attribution&&n.indexOf(S.attribution)<0&&n.push(S.attribution)}}n=n.filter(f=>String(f).trim()),n.sort((f,y)=>f.length-y.length),n=n.filter((f,y)=>{for(let S=y+1;S<n.length;S++)if(n[S].indexOf(f)>=0)return!1;return!0});const d=n.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,n.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class xd{constructor(n={}){this._updateCompact=()=>{const a=this._container.children;if(a.length){const d=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=C.create("div","maplibregl-ctrl");const a=C.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){C.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Pn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const a=++this._id;return this._queue.push({callback:n,id:a,cancelled:!1}),a}remove(n){const a=this._currentlyRunning,d=a?this._queue.concat(a):this._queue;for(const f of d)if(f.id===n)return void(f.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const a=this._currentlyRunning=this._queue;this._queue=[];for(const d of a)if(!d.cancelled&&(d.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var wd=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class xy extends u.E{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,a){this.sourceCache.update(n,a),this._renderableTilesKeys=[];const d={};for(const f of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a}))d[f.key]=!0,this._renderableTilesKeys.push(f.key),this._tiles[f.key]||(f.posMatrix=new Float64Array(16),u.aP(f.posMatrix,0,u.X,0,u.X,0,1),this._tiles[f.key]=new rt(f,this.tileSize));for(const f in this._tiles)d[f]||delete this._tiles[f]}freeRtt(n){for(const a in this._tiles){const d=this._tiles[a];(!n||d.tileID.equals(n)||d.tileID.isChildOf(n)||n.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const a={};for(const d of this._renderableTilesKeys){const f=this._tiles[d].tileID;if(f.canonical.equals(n.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16),u.aP(y.posMatrix,0,u.X,0,u.X,0,1),a[d]=y}else if(f.canonical.isChildOf(n.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16);const S=f.canonical.z-n.canonical.z,A=f.canonical.x-(f.canonical.x>>S<<S),z=f.canonical.y-(f.canonical.y>>S<<S),V=u.X>>S;u.aP(y.posMatrix,0,V,0,V,0,1),u.J(y.posMatrix,y.posMatrix,[-A*V,-z*V,0]),a[d]=y}else if(n.canonical.isChildOf(f.canonical)){const y=n.clone();y.posMatrix=new Float64Array(16);const S=n.canonical.z-f.canonical.z,A=n.canonical.x-(n.canonical.x>>S<<S),z=n.canonical.y-(n.canonical.y>>S<<S),V=u.X>>S;u.aP(y.posMatrix,0,u.X,0,u.X,0,1),u.J(y.posMatrix,y.posMatrix,[A*V,z*V,0]),u.K(y.posMatrix,y.posMatrix,[1/2**S,1/2**S,0]),a[d]=y}}return a}getSourceTile(n,a){const d=this.sourceCache._source;let f=n.overscaledZ-this.deltaZoom;if(f>d.maxzoom&&(f=d.maxzoom),f<d.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(f).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!y||!y.dem)&&a)for(;f>=d.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(n.scaledTo(f--).key);return y}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(a=>a.timeAdded>=n)}}class bd{constructor(n,a,d){this.painter=n,this.sourceCache=new xy(a),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,a,d,f=u.X){var y;if(!(a>=0&&a<f&&d>=0&&d<f))return 0;const S=this.getTerrainData(n),A=(y=S.tile)===null||y===void 0?void 0:y.dem;if(!A)return 0;const z=function(Pe,Re,Be){var $e=Re[0],We=Re[1];return Pe[0]=Be[0]*$e+Be[4]*We+Be[12],Pe[1]=Be[1]*$e+Be[5]*We+Be[13],Pe}([],[a/f*u.X,d/f*u.X],S.u_terrain_matrix),V=[z[0]*A.dim,z[1]*A.dim],J=Math.floor(V[0]),Q=Math.floor(V[1]),de=V[0]-J,be=V[1]-Q;return A.get(J,Q)*(1-de)*(1-be)+A.get(J+1,Q)*de*(1-be)+A.get(J,Q+1)*(1-de)*be+A.get(J+1,Q+1)*de*be}getElevationForLngLatZoom(n,a){if(!u.bb(a,n.wrap()))return 0;const{tileID:d,mercatorX:f,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(n,a);return this.getElevation(d,f%u.X,y%u.X,u.X)}getElevation(n,a,d,f=u.X){return this.getDEMElevation(n,a,d,f)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const f=this.painter.context,y=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new W(f,y,f.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new W(f,new u.R({width:1,height:1}),f.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const a=this.sourceCache.getSourceTile(n,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){const f=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new W(f,a.dem.getPixels(),f.gl.RGBA,{premultiply:!1}),a.demTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}const d=a&&a+a.tileID.key+n.key;if(d&&!this._demMatrixCache[d]){const f=this.sourceCache.sourceCache._source.maxzoom;let y=n.canonical.z-a.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=f?y=n.canonical.z-f:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=n.canonical.x-(n.canonical.x>>y<<y),A=n.canonical.y-(n.canonical.y>>y<<y),z=u.bc(new Float64Array(16),[1/(u.X<<y),1/(u.X<<y),0]);u.J(z,z,[S*u.X,A*u.X,0]),this._demMatrixCache[n.key]={matrix:z,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(n){const a=this.painter,d=a.width/devicePixelRatio,f=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===f||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new W(a.context,{width:d,height:f,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new W(a.context,{width:d,height:f,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(d,f,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,d,f))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,S=0;y<this._coordsTextureSize;y++)for(let A=0;A<this._coordsTextureSize;A++,S+=4)a[S+0]=255&A,a[S+1]=255&y,a[S+2]=A>>8<<4|y>>8,a[S+3]=0;const d=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),f=new W(n,d,n.gl.RGBA,{premultiply:!1});return f.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=f,f}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const a=new Uint8Array(4),d=this.painter.context,f=d.gl,y=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),A=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),f.readPixels(y,A-S-1,1,1,f.RGBA,f.UNSIGNED_BYTE,a),d.bindFramebuffer.set(null);const z=a[0]+(a[2]>>4<<8),V=a[1]+((15&a[2])<<8),J=this.coordsIndex[255-a[3]],Q=J&&this.sourceCache.getTileByID(J);if(!Q)return null;const de=this._coordsTextureSize,be=(1<<Q.tileID.canonical.z)*de;return new u.Z((Q.tileID.canonical.x*de+z)/be+Q.tileID.wrap,(Q.tileID.canonical.y*de+V)/be,this.getElevation(Q.tileID,z,V,de))}depthAtPoint(n){const a=new Uint8Array(4),d=this.painter.context,f=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),f.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,f.RGBA,f.UNSIGNED_BYTE,a),d.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,a=new u.bd,d=new u.aY,f=this.meshSize,y=u.X/f,S=f*f;for(let Q=0;Q<=f;Q++)for(let de=0;de<=f;de++)a.emplaceBack(de*y,Q*y,0);for(let Q=0;Q<S;Q+=f+1)for(let de=0;de<f;de++)d.emplaceBack(de+Q,f+de+Q+1,f+de+Q+2),d.emplaceBack(de+Q,f+de+Q+2,de+Q+1);const A=a.length,z=A+2*(f+1);for(const Q of[0,1])for(let de=0;de<=f;de++)for(const be of[0,1])a.emplaceBack(de*y,Q*u.X,be);for(let Q=0;Q<2*f;Q+=2)d.emplaceBack(z+Q,z+Q+1,z+Q+3),d.emplaceBack(z+Q,z+Q+3,z+Q+2),d.emplaceBack(A+Q,A+Q+3,A+Q+1),d.emplaceBack(A+Q,A+Q+2,A+Q+3);const V=a.length,J=V+2*(f+1);for(const Q of[0,1])for(let de=0;de<=f;de++)for(const be of[0,1])a.emplaceBack(Q*u.X,de*y,be);for(let Q=0;Q<2*f;Q+=2)d.emplaceBack(V+Q,V+Q+1,V+Q+3),d.emplaceBack(V+Q,V+Q+3,V+Q+2),d.emplaceBack(J+Q,J+Q+3,J+Q+1),d.emplaceBack(J+Q,J+Q+2,J+Q+3);return this._mesh=new Ue(n.createVertexBuffer(a,wd.members),n.createIndexBuffer(d),u.a0.simpleSegment(0,0,a.length,d.length)),this._mesh}getMeshFrameDelta(n){return 2*Math.PI*u.be/Math.pow(2,n)/5}getMinTileElevationForLngLatZoom(n,a){var d;const{tileID:f}=this._getOverscaledTileIDFromLngLatZoom(n,a);return(d=this.getMinMaxElevation(f).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(n){const a=this.getTerrainData(n).tile,d={minElevation:null,maxElevation:null};return a&&a.dem&&(d.minElevation=a.dem.min*this.exaggeration,d.maxElevation=a.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(n,a){const d=u.Z.fromLngLat(n.wrap()),f=(1<<a)*u.X,y=d.x*f,S=d.y*f,A=Math.floor(y/u.X),z=Math.floor(S/u.X);return{tileID:new u.S(a,0,a,A,z),mercatorX:y,mercatorY:S}}}class wy{constructor(n,a,d){this._context=n,this._size=a,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new W(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(d.texture),{id:n,fbo:a,texture:d,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>n.id!==a),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const bl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class wp{constructor(n,a){this.painter=n,this.terrain=a,this.pool=new wy(n.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(d=>!n._layers[d].isHidden(a)),this._coordsDescendingInv={};for(const d in n.sourceCaches){this._coordsDescendingInv[d]={};const f=n.sourceCaches[d].getVisibleCoordinates();for(const y of f){const S=this.terrain.sourceCache.getTerrainCoords(y);for(const A in S)this._coordsDescendingInv[d][A]||(this._coordsDescendingInv[d][A]=[]),this._coordsDescendingInv[d][A].push(S[A])}}this._coordsDescendingInvStr={};for(const d of n._order){const f=n._layers[d],y=f.source;if(bl[f.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const S in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][S]=this._coordsDescendingInv[y][S].map(A=>A.key).sort().join()}}for(const d of this._renderableTiles)for(const f in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[f][d.tileID.key];y&&y!==d.rttCoords[f]&&(d.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const a=n.type,d=this.painter,f=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(bl[a]&&(this._prevType&&bl[this._prevType]||this._stacks.push([]),this._prevType=a,this._stacks[this._stacks.length-1].push(n.id),!f))return!0;if(bl[this._prevType]||bl[a]&&f){this._prevType=a;const y=this._stacks.length-1,S=this._stacks[y]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(ye(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[y]){const V=this.pool.getObjectForId(A.rtt[y].id);if(V.stamp===A.rtt[y].stamp){this.pool.useObject(V);continue}}const z=this.pool.getOrCreateFreeObject();this.pool.useObject(z),this.pool.stampObject(z),A.rtt[y]={id:z.id,stamp:z.stamp},d.context.bindFramebuffer.set(z.fbo.framebuffer),d.context.clear({color:u.aM.transparent,stencil:0}),d.currentStencilSource=void 0;for(let V=0;V<S.length;V++){const J=d.style._layers[S[V]],Q=J.source?this._coordsDescendingInv[J.source][A.tileID.key]:[A.tileID];d.context.viewport.set([0,0,z.fbo.width,z.fbo.height]),d._renderTileClippingMasks(J,Q),d.renderLayer(d,d.style.sourceCaches[J.source],J,Q),J.source&&(A.rttCoords[J.source]=this._coordsDescendingInvStr[J.source][A.tileID.key])}}return ye(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),bl[a]}return!1}}const Sd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},bp=E,by={hash:!1,interactive:!0,bearingSnap:7,attributionControl:xl,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Ed=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},Sy={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ey{constructor(n,a,d=!1){this.mousedown=S=>{this.startMouse(u.e({},S,{ctrlKey:!0,preventDefault:()=>S.preventDefault()}),C.mousePos(this.element,S)),C.addEventListener(window,"mousemove",this.mousemove),C.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.moveMouse(S,C.mousePos(this.element,S))},this.mouseup=S=>{this.mouseRotate.dragEnd(S),this.mousePitch&&this.mousePitch.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=C.touchPos(this.element,S.targetTouches)[0],this.startTouch(S,this._startPos),C.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=C.touchPos(this.element,S.targetTouches)[0],this.moveTouch(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const f=n.dragRotate._mouseRotate.getClickTolerance(),y=n.dragRotate._mousePitch.getClickTolerance();this.element=a,this.mouseRotate=hd({clickTolerance:f,enable:!0}),this.touchRotate=(({enable:S,clickTolerance:A,bearingDegreesPerPixelMoved:z=.8})=>{const V=new cd;return new Ts({clickTolerance:A,move:(J,Q)=>({bearingDelta:(Q.x-J.x)*z}),moveStateManager:V,enable:S,assignEvents:Ed})})({clickTolerance:f,enable:!0}),this.map=n,d&&(this.mousePitch=dd({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:S,clickTolerance:A,pitchDegreesPerPixelMoved:z=-.5})=>{const V=new cd;return new Ts({clickTolerance:A,move:(J,Q)=>({pitchDelta:(Q.y-J.y)*z}),moveStateManager:V,enable:S,assignEvents:Ed})})({clickTolerance:y,enable:!0})),C.addEventListener(a,"mousedown",this.mousedown),C.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),C.addEventListener(a,"touchcancel",this.reset)}startMouse(n,a){this.mouseRotate.dragStart(n,a),this.mousePitch&&this.mousePitch.dragStart(n,a),C.disableDrag()}startTouch(n,a){this.touchRotate.dragStart(n,a),this.touchPitch&&this.touchPitch.dragStart(n,a),C.disableDrag()}moveMouse(n,a){const d=this.map,{bearingDelta:f}=this.mouseRotate.dragMove(n,a)||{};if(f&&d.setBearing(d.getBearing()+f),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(n,a)||{};y&&d.setPitch(d.getPitch()+y)}}moveTouch(n,a){const d=this.map,{bearingDelta:f}=this.touchRotate.dragMove(n,a)||{};if(f&&d.setBearing(d.getBearing()+f),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(n,a)||{};y&&d.setPitch(d.getPitch()+y)}}off(){const n=this.element;C.removeEventListener(n,"mousedown",this.mousedown),C.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend),C.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){C.enableDrag(),C.removeEventListener(window,"mousemove",this.mousemove),C.removeEventListener(window,"mouseup",this.mouseup),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend)}}let qi;function er(v,n,a){const d=new u.N(v.lng,v.lat);if(v=new u.N(v.lng,v.lat),n){const f=new u.N(v.lng-360,v.lat),y=new u.N(v.lng+360,v.lat),S=a.locationPoint(v).distSqr(n);a.locationPoint(f).distSqr(n)<S?v=f:a.locationPoint(y).distSqr(n)<S&&(v=y)}for(;Math.abs(v.lng-a.center.lng)>180;){const f=a.locationPoint(v);if(f.x>=0&&f.y>=0&&f.x<=a.width&&f.y<=a.height)break;v.lng>a.center.lng?v.lng-=360:v.lng+=360}return v.lng!==d.lng&&a.locationPoint(v).y>a.height/2-a.getHorizon()?v:d}const Sl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ac(v,n,a){const d=v.classList;for(const f in Sl)d.remove(`maplibregl-${a}-anchor-${f}`);d.add(`maplibregl-${a}-anchor-${n}`)}class Mc extends u.E{constructor(n){if(super(),this._onKeyPress=a=>{const d=a.code,f=a.charCode||a.keyCode;d!=="Space"&&d!=="Enter"&&f!==32&&f!==13||this.togglePopup()},this._onMapClick=a=>{const d=a.originalEvent.target,f=this._element;this._popup&&(d===f||f.contains(d))&&this.togglePopup()},this._update=a=>{var d;if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((a==null?void 0:a.type)==="terrain"||(a==null?void 0:a.type)==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?er(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||a&&a.type!=="moveend"||(this._pos=this._pos.round()),C.setTransform(this._element,`${Sl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${y}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(n==null?void 0:n.opacity,n==null?void 0:n.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=u.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=C.create("div");const a=C.createNS("http://www.w3.org/2000/svg","svg"),d=41,f=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${d}px`),a.setAttributeNS(null,"width",`${f}px`),a.setAttributeNS(null,"viewBox",`0 0 ${f} ${d}`);const y=C.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const S=C.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const A=C.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const $e of z){const We=C.createNS("http://www.w3.org/2000/svg","ellipse");We.setAttributeNS(null,"opacity","0.04"),We.setAttributeNS(null,"cx","10.5"),We.setAttributeNS(null,"cy","5.80029008"),We.setAttributeNS(null,"rx",$e.rx),We.setAttributeNS(null,"ry",$e.ry),A.appendChild(We)}const V=C.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"fill",this._color);const J=C.createNS("http://www.w3.org/2000/svg","path");J.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),V.appendChild(J);const Q=C.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"fill","#000000");const de=C.createNS("http://www.w3.org/2000/svg","path");de.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Q.appendChild(de);const be=C.createNS("http://www.w3.org/2000/svg","g");be.setAttributeNS(null,"transform","translate(6.0, 7.0)"),be.setAttributeNS(null,"fill","#FFFFFF");const Pe=C.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Re=C.createNS("http://www.w3.org/2000/svg","circle");Re.setAttributeNS(null,"fill","#000000"),Re.setAttributeNS(null,"opacity","0.25"),Re.setAttributeNS(null,"cx","5.5"),Re.setAttributeNS(null,"cy","5.5"),Re.setAttributeNS(null,"r","5.4999962");const Be=C.createNS("http://www.w3.org/2000/svg","circle");Be.setAttributeNS(null,"fill","#FFFFFF"),Be.setAttributeNS(null,"cx","5.5"),Be.setAttributeNS(null,"cy","5.5"),Be.setAttributeNS(null,"r","5.4999962"),Pe.appendChild(Re),Pe.appendChild(Be),S.appendChild(A),S.appendChild(V),S.appendChild(Q),S.appendChild(be),S.appendChild(Pe),a.appendChild(S),a.setAttributeNS(null,"height",d*this._scale+"px"),a.setAttributeNS(null,"width",f*this._scale+"px"),this._element.appendChild(a),this._offset=u.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),Ac(this._element,this._anchor,"marker"),n&&n.className)for(const a of n.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),C.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=u.N.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const f=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var a,d;if(!(!((a=this._map)===null||a===void 0)&&a.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const f=this._map,y=f.terrain.depthAtPoint(this._pos),S=f.terrain.getElevationForLngLatZoom(this._lngLat,f.transform.tileZoom);if(f.transform.lngLatToCameraDepth(this._lngLat,S)-y<.006)return void(this._element.style.opacity=this._opacity);const A=-this._offset.y/f.transform._pixelPerMeter,z=Math.sin(f.getPitch()*Math.PI/180)*A,V=f.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),J=f.transform.lngLatToCameraDepth(this._lngLat,S+z)-V>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&J&&this._popup.remove(),this._element.style.opacity=J?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=u.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,a){return n===void 0&&a===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}const Sp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Pu=0,Au=!1;const rs={maxWidth:100,unit:"metric"};function Mu(v,n,a){const d=a&&a.maxWidth||100,f=v._container.clientHeight/2,y=v.unproject([0,f]),S=v.unproject([d,f]),A=y.distanceTo(S);if(a&&a.unit==="imperial"){const z=3.2808*A;z>5280?Zt(n,d,z/5280,v._getUIString("ScaleControl.Miles")):Zt(n,d,z,v._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?Zt(n,d,A/1852,v._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Zt(n,d,A/1e3,v._getUIString("ScaleControl.Kilometers")):Zt(n,d,A,v._getUIString("ScaleControl.Meters"))}function Zt(v,n,a,d){const f=function(y){const S=Math.pow(10,`${Math.floor(y)}`.length-1);let A=y/S;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(z){const V=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*V)/V}(A),S*A}(a);v.style.width=n*(f/a)+"px",v.innerHTML=`${f}&nbsp;${d}`}const sn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},kc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function zc(v){if(v){if(typeof v=="number"){const n=Math.round(Math.abs(v)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,v),"top-left":new u.P(n,n),"top-right":new u.P(-n,n),bottom:new u.P(0,-v),"bottom-left":new u.P(n,-n),"bottom-right":new u.P(-n,-n),left:new u.P(v,0),right:new u.P(-v,0)}}if(v instanceof u.P||Array.isArray(v)){const n=u.P.convert(v);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:u.P.convert(v.center||[0,0]),top:u.P.convert(v.top||[0,0]),"top-left":u.P.convert(v["top-left"]||[0,0]),"top-right":u.P.convert(v["top-right"]||[0,0]),bottom:u.P.convert(v.bottom||[0,0]),"bottom-left":u.P.convert(v["bottom-left"]||[0,0]),"bottom-right":u.P.convert(v["bottom-right"]||[0,0]),left:u.P.convert(v.left||[0,0]),right:u.P.convert(v.right||[0,0])}}return zc(new u.P(0,0))}const Td=E;p.AJAXError=u.bh,p.Evented=u.E,p.LngLat=u.N,p.MercatorCoordinate=u.Z,p.Point=u.P,p.addProtocol=u.bi,p.config=u.a,p.removeProtocol=u.bj,p.AttributionControl=wl,p.BoxZoomHandler=Xi,p.CanvasSource=tt,p.CooperativeGesturesHandler=_l,p.DoubleClickZoomHandler=Pa,p.DragPanHandler=vp,p.DragRotateHandler=_p,p.EdgeInsets=Nt,p.FullscreenControl=class extends u.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var n;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=a==null?void 0:a.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){C.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=C.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);C.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},p.GeoJSONSource=B,p.GeolocateControl=class extends u.E{constructor(v){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",n)),this._finish()}},this._updateCamera=n=>{const a=new u.N(n.coords.longitude,n.coords.latitude),d=n.coords.accuracy,f=this._map.getBearing(),y=u.e({bearing:f},this.options.fitBoundsOptions),S=et.fromLngLat(a,d);this._map.fitBounds(S,y,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const a=new u.N(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(this.options.trackUserLocation)if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Au)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=C.create("button","maplibregl-ctrl-geolocate",this._container),C.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=C.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Mc({element:this._dotElement}),this._circleElement=C.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Mc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},Sp,v)}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(n=!1){if(qi!==void 0&&!n)return qi;if(window.navigator.permissions===void 0)return qi=!!window.navigator.geolocation,qi;try{qi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{qi=!!window.navigator.geolocation}return qi})}().then(n=>this._finishSetupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),C.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Pu=0,Au=!1}_isOutOfMapMaxBounds(v){const n=this._map.getMaxBounds(),a=v.coords;return n&&(a.longitude<n.getWest()||a.longitude>n.getEast()||a.latitude<n.getSouth()||a.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),n=v.getSouthEast(),a=v.getNorthEast(),d=n.distanceTo(a),f=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Pu--,Au=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Pu++,Pu>1?(v={maximumAge:6e5,timeout:0},Au=!0):(v=this.options.positionOptions,Au=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},p.Hash=Ln,p.ImageSource=ge,p.KeyboardHandler=go,p.LngLatBounds=et,p.LogoControl=xd,p.Map=class extends xp{constructor(v){u.bf.mark(u.bg.create);const n=Object.assign(Object.assign({},by),v);if(n.minZoom!=null&&n.maxZoom!=null&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(n.minPitch!=null&&n.maxPitch!=null&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(n.minPitch!=null&&n.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(n.maxPitch!=null&&n.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new yn(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies),{bearingSnap:n.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Pn,this._controls=[],this._mapId=u.a4(),this._contextLost=a=>{a.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._maxTileCacheZoomLevels=n.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=n.preserveDrawingBuffer===!0,this._antialias=n.antialias===!0,this._trackResize=n.trackResize===!0,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles===!0,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions===!0,this._collectResourceTiming=n.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Sd),n.locale),this._clickTolerance=n.clickTolerance,this._overridePixelRatio=n.pixelRatio,this._maxCanvasSize=n.maxCanvasSize,this.transformCameraUpdate=n.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=n.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=G.addThrottleControl(()=>this.isMoving()),this._requestManager=new ae(n.transformRequest),typeof n.container=="string"){if(this._container=document.getElementById(n.container),!this._container)throw new Error(`Container '${n.container}' not found.`)}else{if(!(n.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1;const d=$n(f=>{this._trackResize&&!this._removed&&(this.resize(f),this.redraw())},50);this._resizeObserver=new ResizeObserver(f=>{a?d(f):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new _d(this,n),this._hash=n.hash&&new Ln(typeof n.hash=="string"&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,u.e({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,this._validateStyle=n.validateStyle,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new wl(typeof n.attributionControl=="boolean"?void 0:n.attributionControl)),n.maplibreLogo&&this.addControl(new xd,n.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new u.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new u.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new u.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(v,n){if(n===void 0&&(n=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=v.onAdd(this);this._controls.push(v);const d=this._controlPositions[n];return n.indexOf("bottom")!==-1?d.insertBefore(a,d.firstChild):d.appendChild(a),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(v);return n>-1&&this._controls.splice(n,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,n,a,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,n,a,d)}resize(v){var n;const a=this._containerDimensions(),d=a[0],f=a[1],y=this._getClampedPixelRatio(d,f);if(this._resizeCanvas(d,f,y),this.painter.resize(d,f,y),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const z=this._getClampedPixelRatio(d,f);this._resizeCanvas(d,f,z),this.painter.resize(d,f,z)}this.transform.resize(d,f),(n=this._requestedCameraState)===null||n===void 0||n.resize(d,f);const S=!this._moving;return S&&(this.stop(),this.fire(new u.k("movestart",v)).fire(new u.k("move",v))),this.fire(new u.k("resize",v)),S&&this.fire(new u.k("moveend",v)),this}_getClampedPixelRatio(v,n){const{0:a,1:d}=this._maxCanvasSize,f=this.getPixelRatio(),y=v*f,S=n*f;return Math.min(y>a?a/y:1,S>d?d/S:1)*f}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(et.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(u.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(u.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,n,a){if(v==="mouseenter"||v==="mouseover"){let d=!1;return{layers:n,listener:a,delegates:{mousemove:y=>{const S=n.filter(z=>this.getLayer(z)),A=S.length!==0?this.queryRenderedFeatures(y.point,{layers:S}):[];A.length?d||(d=!0,a.call(this,new br(v,this,y.originalEvent,{features:A}))):d=!1},mouseout:()=>{d=!1}}}}if(v==="mouseleave"||v==="mouseout"){let d=!1;return{layers:n,listener:a,delegates:{mousemove:S=>{const A=n.filter(z=>this.getLayer(z));(A.length!==0?this.queryRenderedFeatures(S.point,{layers:A}):[]).length?d=!0:d&&(d=!1,a.call(this,new br(v,this,S.originalEvent)))},mouseout:S=>{d&&(d=!1,a.call(this,new br(v,this,S.originalEvent)))}}}}{const d=f=>{const y=n.filter(A=>this.getLayer(A)),S=y.length!==0?this.queryRenderedFeatures(f.point,{layers:y}):[];S.length&&(f.features=S,a.call(this,f),delete f.features)};return{layers:n,listener:a,delegates:{[v]:d}}}}_saveDelegatedListener(v,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(n)}_removeDelegatedListener(v,n,a){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const d=this._delegatedListeners[v];for(let f=0;f<d.length;f++){const y=d[f];if(y.listener===a&&y.layers.length===n.length&&y.layers.every(S=>n.includes(S))){for(const S in y.delegates)this.off(S,y.delegates[S]);return void d.splice(f,1)}}}on(v,n,a){if(a===void 0)return super.on(v,n);const d=this._createDelegatedListener(v,typeof n=="string"?[n]:n,a);this._saveDelegatedListener(v,d);for(const f in d.delegates)this.on(f,d.delegates[f]);return this}once(v,n,a){if(a===void 0)return super.once(v,n);const d=typeof n=="string"?[n]:n,f=this._createDelegatedListener(v,d,a);for(const y in f.delegates){const S=f.delegates[y];f.delegates[y]=(...A)=>{this._removeDelegatedListener(v,d,a),S(...A)}}this._saveDelegatedListener(v,f);for(const y in f.delegates)this.once(y,f.delegates[y]);return this}off(v,n,a){return a===void 0?super.off(v,n):(this._removeDelegatedListener(v,typeof n=="string"?[n]:n,a),this)}queryRenderedFeatures(v,n){if(!this.style)return[];let a;const d=v instanceof u.P||Array.isArray(v),f=d?v:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(d?{}:v)||{},f instanceof u.P||typeof f[0]=="number")a=[u.P.convert(f)];else{const y=u.P.convert(f[0]),S=u.P.convert(f[1]);a=[y,new u.P(S.x,y.y),S,new u.P(y.x,S.y),y]}return this.style.queryRenderedFeatures(a,n,this.transform)}querySourceFeatures(v,n){return this.style.querySourceFeatures(v,n)}setStyle(v,n){return(n=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(v,n))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const n=this._locale[v];if(n==null)throw new Error(`Missing UI string '${v}'`);return n}_updateStyle(v,n){if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,n));const a=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Qa(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,n,a):this.style.loadJSON(v,n,a),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Qa(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,n){if(typeof v=="string"){const a=this._requestManager.transformRequest(v,"Style");u.h(a,new AbortController).then(d=>{this._updateDiff(d.data,n)}).catch(d=>{d&&this.fire(new u.j(d))})}else typeof v=="object"&&this._updateDiff(v,n)}_updateDiff(v,n){try{this.style.setState(v,n)&&this._update(!0)}catch(a){u.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(v,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(v,n){return this._lazyInitEmptyStyle(),this.style.addSource(v,n),this._update(!0)}isSourceLoaded(v){const n=this.style&&this.style.sourceCaches[v];if(n!==void 0)return n.loaded();this.fire(new u.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const n=this.style.sourceCaches[v.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&n.reload();for(const a in this.style._layers){const d=this.style._layers[a];d.type==="hillshade"&&d.source===v.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new bd(this.painter,n,v),this.painter.renderToTexture=new wp(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=a=>{a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:v})),this}getTerrain(){var v,n;return(n=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const n in v){const a=v[n]._tiles;for(const d in a){const f=a[d];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,n,a={}){const{pixelRatio:d=1,sdf:f=!1,stretchX:y,stretchY:S,content:A,textFitWidth:z,textFitHeight:V}=a;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||u.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:J,height:Q,data:de}=n,be=n;return this.style.addImage(v,{data:new u.R({width:J,height:Q},new Uint8Array(de)),pixelRatio:d,stretchX:y,stretchY:S,content:A,textFitWidth:z,textFitHeight:V,sdf:f,version:0,userImage:be}),be.onAdd&&be.onAdd(this,v),this}}{const{width:J,height:Q,data:de}=b.getImageData(n);this.style.addImage(v,{data:new u.R({width:J,height:Q},de),pixelRatio:d,stretchX:y,stretchY:S,content:A,textFitWidth:z,textFitHeight:V,sdf:f,version:0})}}updateImage(v,n){const a=this.style.getImage(v);if(!a)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=n instanceof HTMLImageElement||u.b(n)?b.getImageData(n):n,{width:f,height:y,data:S}=d;if(f===void 0||y===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==a.data.width||y!==a.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(n instanceof HTMLImageElement||u.b(n));return a.data.replace(S,A),this.style.updateImage(v,a),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return G.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,n){return this._lazyInitEmptyStyle(),this.style.addLayer(v,n),this._update(!0)}moveLayer(v,n){return this.style.moveLayer(v,n),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,n,a){return this.style.setLayerZoomRange(v,n,a),this._update(!0)}setFilter(v,n,a={}){return this.style.setFilter(v,n,a),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,n,a,d={}){return this.style.setPaintProperty(v,n,a,d),this._update(!0)}getPaintProperty(v,n){return this.style.getPaintProperty(v,n)}setLayoutProperty(v,n,a,d={}){return this.style.setLayoutProperty(v,n,a,d),this._update(!0)}getLayoutProperty(v,n){return this.style.getLayoutProperty(v,n)}setGlyphs(v,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,n,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,n,a,d=>{d||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,n,a=>{a||this._update(!0)}),this}setLight(v,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,n){return this.style.setFeatureState(v,n),this._update()}removeFeatureState(v,n){return this.style.removeFeatureState(v,n),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,n=0;return this._container&&(v=this._container.clientWidth||400,n=this._container.clientHeight||300),[v,n]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const n=this._canvasContainer=C.create("div","maplibregl-canvas-container",v);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=C.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const a=this._containerDimensions(),d=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],d);const f=this._controlContainer=C.create("div","maplibregl-control-container",v),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{y[S]=C.create("div",`maplibregl-ctrl-${S} `,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,n,a){this._canvas.width=Math.floor(a*v),this._canvas.height=Math.floor(a*n),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let n=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{n={requestedAttributes:v},d&&(n.statusMessage=d.statusMessage,n.type=d.type)},{once:!0});const a=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!a){const d="Failed to initialize WebGL";throw n?(n.message=d,new Error(JSON.stringify(n))):new Error(d)}this.painter=new ut(a,this.transform),R.testSupport(a)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const f=this.transform.zoom,y=b.now();this.style.zoomHistory.update(f,y);const S=new u.z(f,{now:y,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=S.crossFadingFactor();A===1&&A===this._crossFadingFactor||(a=!0,this._crossFadingFactor=A),this.style.update(S)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bf.mark(u.bg.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,u.bf.mark(u.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),G.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n!=null&&n.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),C.remove(this._canvasContainer),C.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bf.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(v=>{u.bf.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return bp}getCameraTargetElevation(){return this.transform.elevation}},p.MapMouseEvent=br,p.MapTouchEvent=mo,p.MapWheelEvent=mp,p.Marker=Mc,p.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const n=this._map.getZoom(),a=n===this._map.getMaxZoom(),d=n===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n},this._setButtonTitle=(n,a)=>{const d=this._map._getUIString(`NavigationControl.${a}`);n.title=d,n.setAttribute("aria-label",d)},this.options=u.e({},Sy,v),this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),C.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),C.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=C.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ey(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){C.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,n){const a=C.create("button",v,this._container);return a.type="button",a.addEventListener("click",n),a}},p.Popup=class extends u.E{constructor(v){super(),this.remove=()=>(this._content&&C.remove(this._content),this._container&&(C.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{var a;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=C.create("div","maplibregl-popup",this._map.getContainer()),this._tip=C.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?er(this._lngLat,this._flatPos,this._map.transform):(a=this._lngLat)===null||a===void 0?void 0:a.wrap(),this._trackPointer&&!n)return;const d=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationPoint(this._lngLat));let f=this.options.anchor;const y=zc(this.options.offset);if(!f){const A=this._container.offsetWidth,z=this._container.offsetHeight;let V;V=d.y+y.bottom.y<z?["top"]:d.y>this._map.transform.height-z?["bottom"]:[],d.x<A/2?V.push("left"):d.x>this._map.transform.width-A/2&&V.push("right"),f=V.length===0?"bottom":V.join("-")}let S=d.add(y[f]);this.options.subpixelPositioning||(S=S.round()),C.setTransform(this._container,`${Sl[f]} translate(${S.x}px,${S.y}px)`),Ac(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(sn),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=u.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const n=document.createDocumentFragment(),a=document.createElement("body");let d;for(a.innerHTML=v;d=a.firstChild,d;)n.appendChild(d);return this.setDOMContent(n)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=C.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=C.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(kc);v&&v.focus()}},p.RasterDEMTileSource=Ee,p.RasterTileSource=Vt,p.ScaleControl=class{constructor(v){this._onMove=()=>{Mu(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,Mu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},rs),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){C.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},p.ScrollZoomHandler=zo,p.Style=Qa,p.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=C.create("button","maplibregl-ctrl-terrain",this._container),C.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){C.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},p.TwoFingersTouchPitchHandler=vl,p.TwoFingersTouchRotateHandler=gd,p.TwoFingersTouchZoomHandler=pd,p.TwoFingersTouchZoomRotateHandler=vd,p.VectorTileSource=ln,p.VideoSource=Xe,p.addSourceType=(v,n)=>u._(void 0,void 0,void 0,function*(){if(ue(v))throw new Error(`A source type called "${v}" already exists.`);((a,d)=>{ht[a]=d})(v,n)}),p.clearPrewarmedResources=function(){const v=it;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(ze),it=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},p.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},p.getRTLTextPluginStatus=function(){return Ve().getRTLTextPluginStatus()},p.getVersion=function(){return Td},p.getWorkerCount=function(){return He.workerCount},p.getWorkerUrl=function(){return u.a.WORKER_URL},p.importScriptInWorkers=function(v){return pt().broadcast("IS",v)},p.prewarm=function(){vt().acquire(ze)},p.setMaxParallelImageRequests=function(v){u.a.MAX_PARALLEL_IMAGE_REQUESTS=v},p.setRTLTextPlugin=function(v,n){return Ve().setRTLTextPlugin(v,n)},p.setWorkerCount=function(v){He.workerCount=v},p.setWorkerUrl=function(v){u.a.WORKER_URL=v}});var g=i;return g})})(jI);var DI=jI.exports;const BI=ep(DI),c4=DM({__proto__:null,default:BI},[DI]),h4="modulepreload",d4=function(e){return"/osm-address-editor-vite/"+e},R2={},f4=function(t,i,l){let c=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),u=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));c=Promise.allSettled(i.map(E=>{if(E=d4(E),E in R2)return;R2[E]=!0;const I=E.endsWith(".css"),M=I?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${E}"]${M}`))return;const b=document.createElement("link");if(b.rel=I?"stylesheet":h4,I||(b.as="script"),b.crossOrigin="",b.href=E,u&&b.setAttribute("nonce",u),document.head.appendChild(b),I)return new Promise((C,R)=>{b.addEventListener("load",C),b.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${E}`)))})}))}function g(p){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=p,window.dispatchEvent(u),!u.defaultPrevented)throw p}return c.then(p=>{for(const u of p||[])u.status==="rejected"&&g(u.reason);return t().catch(g)})},p4=gt.createContext(null);function m4(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,l=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,g=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&l===g}function Vo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Vo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Vo(e[c],t[c]))return!1;return!0}return!1}function g4(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function j2(e,t){if(!e.getProjection)return;const i=e.getProjection(),l=t.getProjection();Vo(i,l)||t.setProjection(i)}function L2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function D2(e,t){const i=t.viewState||t;let l=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),l=l||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,l=l||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,l=l||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,l=l||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(l=!0,e.padding=i.padding),l}const y4=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function B2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const l of e.layers)t[l.id]=l;const i=e.layers.map(l=>{let c=null;"interactive"in l&&(c=Object.assign({},l),delete c.interactive);const g=t[l.ref];if(g){c=c||Object.assign({},l),delete c.ref;for(const p of y4)p in g&&(c[p]=g[p])}return c||l});return{...e,layers:i}}var N2={};const U2={version:8,sources:{},layers:[]},$2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},N0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},V2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},v4=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],_4=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class jh{constructor(t,i,l){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const g=this.props[V2[c.type]];g?g(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const g=this.props[$2[c.type]];g&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),g(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const g=this.props[N0[c.type]];g&&g(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(l)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const l=this._updateSettings(t,i);l&&this._createShadowTransform(this._map);const c=this._updateSize(t),g=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(l||c||g&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const l=jh.savedMaps.pop();if(!l)return null;const c=l.map,g=c.getContainer();for(i.className=g.className;g.childNodes.length>0;)i.appendChild(g.childNodes[0]);c._container=i;const p=c._resizeObserver;p&&(p.disconnect(),p.observe(i)),l.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:u}=t;return u&&(u.bounds?c.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):l._updateViewState(u,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),l}_initialize(t){const{props:i}=this,{mapStyle:l=U2}=i,c={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||x4()||null,container:t,style:B2(l)},g=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[g.longitude||0,g.latitude||0],zoom:g.zoom||0,pitch:g.pitch||0,bearing:g.bearing||0}),i.gl){const M=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=M,i.gl)}const p=new this._MapClass(c);g.padding&&p.setPadding(g.padding),i.cursor&&(p.getCanvas().style.cursor=i.cursor),this._createShadowTransform(p);const u=p._render;p._render=M=>{this._inRender=!0,u.call(p,M),this._inRender=!1};const E=p._renderTaskQueue.run;p._renderTaskQueue.run=M=>{E.call(p._renderTaskQueue,M),this._onBeforeRepaint()},p.on("render",()=>this._onAfterRepaint());const I=p.fire;p.fire=this._fireEvent.bind(this,I),p.on("resize",()=>{this._renderTransform.resize(p.transform.width,p.transform.height)}),p.on("styledata",()=>{this._updateStyleComponents(this.props,{}),j2(p.transform,this._renderTransform)}),p.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const M in $2)p.on(M,this._onPointerEvent);for(const M in N0)p.on(M,this._onCameraEvent);for(const M in V2)p.on(M,this._onEvent);this._map=p}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),jh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=g4(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const l=this._map;if(i.width!==l.transform.width||i.height!==l.transform.height)return l.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const l=this._map,c=this._renderTransform,{zoom:g,pitch:p,bearing:u}=c,E=l.isMoving();E&&(c.cameraElevationReference="sea");const I=D2(c,{...L2(l.transform),...t});if(E&&(c.cameraElevationReference="ground"),I&&i){const M=this._deferredEvents;M.move=!0,M.zoom||(M.zoom=g!==c.zoom),M.rotate||(M.rotate=u!==c.bearing),M.pitch||(M.pitch=p!==c.pitch)}return E||D2(l.transform,t),I}_updateSettings(t,i){const l=this._map;let c=!1;for(const g of v4)if(g in t&&!Vo(t[g],i[g])){c=!0;const p=l[`set${g[0].toUpperCase()}${g.slice(1)}`];p==null||p.call(l,t[g])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:l=U2,styleDiffing:c=!0}=t,g={diff:c};return"localIdeographFontFamily"in t&&(g.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(B2(l),g),!0}return!1}_updateStyleComponents(t,i){const l=this._map;let c=!1;return l.isStyleLoaded()&&("light"in t&&l.setLight&&!Vo(t.light,i.light)&&(c=!0,l.setLight(t.light)),"fog"in t&&l.setFog&&!Vo(t.fog,i.fog)&&(c=!0,l.setFog(t.fog)),"terrain"in t&&l.setTerrain&&!Vo(t.terrain,i.terrain)&&(!t.terrain||l.getSource(t.terrain.source))&&(c=!0,l.setTerrain(t.terrain))),c}_updateHandlers(t,i){var l,c;const g=this._map;let p=!1;for(const u of _4){const E=(l=t[u])!==null&&l!==void 0?l:!0,I=(c=i[u])!==null&&c!==void 0?c:!0;Vo(E,I)||(p=!0,E?g[u].enable(E):g[u].disable())}return p}_queryRenderedFeatures(t){const i=this._map,l=i.transform,{interactiveLayerIds:c=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:c.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=l}}_updateHover(t){var i;const{props:l}=this;if(l.interactiveLayerIds&&(l.onMouseMove||l.onMouseEnter||l.onMouseLeave)){const g=t.type,p=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,u=this._queryRenderedFeatures(t.point),E=u.length>0;!E&&p&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=u,E&&!p&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=g}else this._hoveredFeatures=null}_fireEvent(t,i,l){const c=this._map,g=c.transform,p=typeof i=="string"?i:i.type;return p==="move"&&this._updateViewState(this.props,!1),p in N0&&(typeof i=="object"&&(i.viewState=L2(g)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,l),c.transform=g,c):(t.call(c,i,l),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const l in this._deferredEvents)this._deferredEvents[l]&&t.fire(l);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{j2(this._renderTransform,i),t.transform=i}}}jh.savedMaps=[];function x4(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||N2.MapboxAccessToken}catch{}try{e=e||N2.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const w4=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function b4(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:l=>{const c=t.transform;t.transform=e.transform;const g=t.project(l);return t.transform=c,g},unproject:l=>{const c=t.transform;t.transform=e.transform;const g=t.unproject(l);return t.transform=c,g},queryTerrainElevation:(l,c)=>{const g=t.transform;t.transform=e.transform;const p=t.queryTerrainElevation(l,c);return t.transform=g,p},queryRenderedFeatures:(l,c)=>{const g=t.transform;t.transform=e.transform;const p=t.queryRenderedFeatures(l,c);return t.transform=g,p}};for(const l of S4(t))!(l in i)&&!w4.includes(l)&&(i[l]=t[l].bind(t));return i}function S4(e){const t=new Set;let i=e;for(;i;){for(const l of Object.getOwnPropertyNames(i))l[0]!=="_"&&typeof e[l]=="function"&&l!=="fire"&&l!=="setEventedParent"&&t.add(l);i=Object.getPrototypeOf(i)}return Array.from(t)}const E4=typeof document<"u"?gt.useLayoutEffect:gt.useEffect,T4=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function I4(e,t){for(const l of T4)l in t&&(e[l]=t[l]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,l=>{l&&console.error(l)},!0)}const Zh=gt.createContext(null);function C4(e,t,i){const l=gt.useContext(p4),[c,g]=gt.useState(null),p=gt.useRef(),{current:u}=gt.useRef({mapLib:null,map:null});gt.useEffect(()=>{const M=e.mapLib;let b=!0,C;return Promise.resolve(M||i).then(R=>{if(!b)return;if(!R)throw new Error("Invalid mapLib");const N="Map"in R?R:R.default;if(!N.Map)throw new Error("Invalid mapLib");if(I4(N,e),!N.supported||N.supported(e))e.reuseMaps&&(C=jh.reuse(e,p.current)),C||(C=new jh(N.Map,e,p.current)),u.map=b4(C),u.mapLib=N,g(C),l==null||l.onMapMount(u.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(R=>{const{onError:N}=e;N?N({type:"error",target:null,originalEvent:null,error:R}):console.error(R)}),()=>{b=!1,C&&(l==null||l.onMapUnmount(e.id),e.reuseMaps?C.recycle():C.destroy())}},[]),E4(()=>{c&&c.setProps(e)}),gt.useImperativeHandle(t,()=>u.map,[c]);const E=gt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),I={height:"100%"};return gt.createElement("div",{id:e.id,ref:p,style:E},c&&gt.createElement(Zh.Provider,{value:u},gt.createElement("div",{"mapboxgl-children":"",style:I},e.children)))}const P4=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ac(e,t){if(!e||!t)return;const i=e.style;for(const l in t){const c=t[l];Number.isFinite(c)&&!P4.test(l)?i[l]=`${c}px`:i[l]=c}}function A4(e,t){const{map:i,mapLib:l}=gt.useContext(Zh),c=gt.useRef({props:e});c.current.props=e;const g=gt.useMemo(()=>{let O=!1;gt.Children.forEach(e.children,X=>{X&&(O=!0)});const he={...e,element:O?document.createElement("div"):null},K=new l.Marker(he);return K.setLngLat([e.longitude,e.latitude]),K.getElement().addEventListener("click",X=>{var G,ae;(ae=(G=c.current.props).onClick)===null||ae===void 0||ae.call(G,{type:"click",target:K,originalEvent:X})}),K.on("dragstart",X=>{var G,ae;const q=X;q.lngLat=g.getLngLat(),(ae=(G=c.current.props).onDragStart)===null||ae===void 0||ae.call(G,q)}),K.on("drag",X=>{var G,ae;const q=X;q.lngLat=g.getLngLat(),(ae=(G=c.current.props).onDrag)===null||ae===void 0||ae.call(G,q)}),K.on("dragend",X=>{var G,ae;const q=X;q.lngLat=g.getLngLat(),(ae=(G=c.current.props).onDragEnd)===null||ae===void 0||ae.call(G,q)}),K},[]);gt.useEffect(()=>(g.addTo(i.getMap()),()=>{g.remove()}),[]);const{longitude:p,latitude:u,offset:E,style:I,draggable:M=!1,popup:b=null,rotation:C=0,rotationAlignment:R="auto",pitchAlignment:N="auto"}=e;return gt.useEffect(()=>{ac(g.getElement(),I)},[I]),gt.useImperativeHandle(t,()=>g,[]),(g.getLngLat().lng!==p||g.getLngLat().lat!==u)&&g.setLngLat([p,u]),E&&!m4(g.getOffset(),E)&&g.setOffset(E),g.isDraggable()!==M&&g.setDraggable(M),g.getRotation()!==C&&g.setRotation(C),g.getRotationAlignment()!==R&&g.setRotationAlignment(R),g.getPitchAlignment()!==N&&g.setPitchAlignment(N),g.getPopup()!==b&&g.setPopup(b),nx.createPortal(e.children,g.getElement())}const M4=gt.memo(gt.forwardRef(A4));function G2(e){return new Set(e?e.trim().split(/\s+/):[])}function k4(e,t){const{map:i,mapLib:l}=gt.useContext(Zh),c=gt.useMemo(()=>document.createElement("div"),[]),g=gt.useRef({props:e});g.current.props=e;const p=gt.useMemo(()=>{const u={...e},E=new l.Popup(u);return E.setLngLat([e.longitude,e.latitude]),E.once("open",I=>{var M,b;(b=(M=g.current.props).onOpen)===null||b===void 0||b.call(M,I)}),E},[]);if(gt.useEffect(()=>{const u=E=>{var I,M;(M=(I=g.current.props).onClose)===null||M===void 0||M.call(I,E)};return p.on("close",u),p.setDOMContent(c).addTo(i.getMap()),()=>{p.off("close",u),p.isOpen()&&p.remove()}},[]),gt.useEffect(()=>{ac(p.getElement(),e.style)},[e.style]),gt.useImperativeHandle(t,()=>p,[]),p.isOpen()&&((p.getLngLat().lng!==e.longitude||p.getLngLat().lat!==e.latitude)&&p.setLngLat([e.longitude,e.latitude]),e.offset&&!Vo(p.options.offset,e.offset)&&p.setOffset(e.offset),(p.options.anchor!==e.anchor||p.options.maxWidth!==e.maxWidth)&&(p.options.anchor=e.anchor,p.setMaxWidth(e.maxWidth)),p.options.className!==e.className)){const u=G2(p.options.className),E=G2(e.className);for(const I of u)E.has(I)||p.removeClassName(I);for(const I of E)u.has(I)||p.addClassName(I);p.options.className=e.className}return nx.createPortal(e.children,c)}gt.memo(gt.forwardRef(k4));function sp(e,t,i,l){const c=gt.useContext(Zh),g=gt.useMemo(()=>e(c),[]);return gt.useEffect(()=>{const p=t,u=typeof t=="function"&&typeof i=="function"?t:null,E=typeof t=="function"?t:null,{map:I}=c;return I.hasControl(g)||(I.addControl(g,p==null?void 0:p.position),u&&u(c)),()=>{E&&E(c),I.hasControl(g)&&I.removeControl(g)}},[]),g}function z4(e){const t=sp(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return gt.useEffect(()=>{ac(t._container,e.style)},[e.style]),null}gt.memo(z4);function F4(e){const t=sp(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return gt.useEffect(()=>{ac(t._controlContainer,e.style)},[e.style]),null}gt.memo(F4);function O4(e,t){const i=gt.useRef({props:e}),l=sp(({mapLib:c})=>{const g=new c.GeolocateControl(e),p=g._setupUI;return g._setupUI=u=>{g._container.hasChildNodes()||p(u)},g.on("geolocate",u=>{var E,I;(I=(E=i.current.props).onGeolocate)===null||I===void 0||I.call(E,u)}),g.on("error",u=>{var E,I;(I=(E=i.current.props).onError)===null||I===void 0||I.call(E,u)}),g.on("outofmaxbounds",u=>{var E,I;(I=(E=i.current.props).onOutOfMaxBounds)===null||I===void 0||I.call(E,u)}),g.on("trackuserlocationstart",u=>{var E,I;(I=(E=i.current.props).onTrackUserLocationStart)===null||I===void 0||I.call(E,u)}),g.on("trackuserlocationend",u=>{var E,I;(I=(E=i.current.props).onTrackUserLocationEnd)===null||I===void 0||I.call(E,u)}),g},{position:e.position});return i.current.props=e,gt.useImperativeHandle(t,()=>l,[]),gt.useEffect(()=>{ac(l._container,e.style)},[e.style]),null}const R4=gt.memo(gt.forwardRef(O4));function j4(e){const t=sp(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return gt.useEffect(()=>{ac(t._container,e.style)},[e.style]),null}const L4=gt.memo(j4);function D4(e){const t=sp(({mapLib:g})=>new g.ScaleControl(e),{position:e.position}),i=gt.useRef(e),l=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==l.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==l.unit&&t.setUnit(e.unit),gt.useEffect(()=>{ac(t._container,c)},[c]),null}gt.memo(D4);function fg(e,t){if(!e)throw new Error(t)}function B4(e,t,i,l){if(fg(i.id===l.id,"layer id changed"),fg(i.type===l.type,"layer type changed"),i.type==="custom"||l.type==="custom")return;const{layout:c={},paint:g={},filter:p,minzoom:u,maxzoom:E,beforeId:I}=i;if(I!==l.beforeId&&e.moveLayer(t,I),c!==l.layout){const M=l.layout||{};for(const b in c)Vo(c[b],M[b])||e.setLayoutProperty(t,b,c[b]);for(const b in M)c.hasOwnProperty(b)||e.setLayoutProperty(t,b,void 0)}if(g!==l.paint){const M=l.paint||{};for(const b in g)Vo(g[b],M[b])||e.setPaintProperty(t,b,g[b]);for(const b in M)g.hasOwnProperty(b)||e.setPaintProperty(t,b,void 0)}Vo(p,l.filter)||e.setFilter(t,p),(u!==l.minzoom||E!==l.maxzoom)&&e.setLayerZoomRange(t,u,E)}function N4(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const l={...i,id:t};delete l.beforeId,e.addLayer(l,i.beforeId)}}let U4=0;function $4(e){const t=gt.useContext(Zh).map.getMap(),i=gt.useRef(e),[,l]=gt.useState(0),c=gt.useMemo(()=>e.id||`jsx-layer-${U4++}`,[]);if(gt.useEffect(()=>{if(t){const p=()=>l(u=>u+1);return t.on("styledata",p),p(),()=>{t.off("styledata",p),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{B4(t,c,e,i.current)}catch(p){console.warn(p)}else N4(t,c,e);return i.current=e,null}let V4=0;function G4(e,t,i){if(e.style&&e.style._loaded){const l={...i};return delete l.id,delete l.children,e.addSource(t,l),e.getSource(t)}return null}function H4(e,t,i){fg(t.id===i.id,"source id changed"),fg(t.type===i.type,"source type changed");let l="",c=0;for(const p in t)p!=="children"&&p!=="id"&&!Vo(i[p],t[p])&&(l=p,c++);if(!c)return;const g=t.type;if(g==="geojson")e.setData(t.data);else if(g==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&l==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(l){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${l}`)}function Z4(e){const t=gt.useContext(Zh).map.getMap(),i=gt.useRef(e),[,l]=gt.useState(0),c=gt.useMemo(()=>e.id||`jsx-source-${V4++}`,[]);gt.useEffect(()=>{if(t){const p=()=>setTimeout(()=>l(u=>u+1),0);return t.on("styledata",p),p(),()=>{var u;if(t.off("styledata",p),t.style&&t.style._loaded&&t.getSource(c)){const E=(u=t.getStyle())===null||u===void 0?void 0:u.layers;if(E)for(const I of E)I.source===c&&t.removeLayer(I.id);t.removeSource(c)}}}},[t]);let g=t&&t.style&&t.getSource(c);return g?H4(g,e,i.current):g=G4(t,c,e),i.current=e,g&&gt.Children.map(e.children,p=>p&&gt.cloneElement(p,{source:c}))||null}const W4=f4(()=>Promise.resolve().then(()=>c4),void 0),X4=gt.forwardRef(function(t,i){return C4(t,i,W4)}),q4=M4,K4=L4,Y4=R4,J4=$4,Q4=Z4,H2=()=>{};let rx={},NI={},UI=null,$I={mark:H2,measure:H2};try{typeof window<"u"&&(rx=window),typeof document<"u"&&(NI=document),typeof MutationObserver<"u"&&(UI=MutationObserver),typeof performance<"u"&&($I=performance)}catch{}const{userAgent:Z2=""}=rx.navigator||{},iu=rx,fr=NI,W2=UI,cm=$I;iu.document;const Ka=!!fr.documentElement&&!!fr.head&&typeof fr.addEventListener=="function"&&typeof fr.createElement=="function",VI=~Z2.indexOf("MSIE")||~Z2.indexOf("Trident/");var _r="classic",GI="duotone",Zo="sharp",Wo="sharp-duotone",ez=[_r,GI,Zo,Wo],tz={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds"}},X2={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},nz=["kit"],rz=/fa(s|r|l|t|d|b|k|kd|ss|sr|sl|st|sds)?[\-\ ]/,iz=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,oz={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},sz={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds"}},az={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds"}},lz={classic:["fas","far","fal","fat"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds"]},uz={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid"}},cz={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds"}},HI={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid"}},hz=["solid","regular","light","thin","duotone","brands"],ZI=[1,2,3,4,5,6,7,8,9,10],dz=ZI.concat([11,12,13,14,15,16,17,18,19,20]),of={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},fz=[...Object.keys(lz),...hz,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",of.GROUP,of.SWAP_OPACITY,of.PRIMARY,of.SECONDARY].concat(ZI.map(e=>"".concat(e,"x"))).concat(dz.map(e=>"w-".concat(e))),pz={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},mz={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},gz={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},q2={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}};const Za="___FONT_AWESOME___",d_=16,WI="fa",XI="svg-inline--fa",tc="data-fa-i2svg",f_="data-fa-pseudo-element",yz="data-fa-pseudo-element-pending",ix="data-prefix",ox="data-icon",K2="fontawesome-i2svg",vz="async",_z=["HTML","HEAD","STYLE","SCRIPT"],qI=(()=>{try{return!0}catch{return!1}})(),KI=[_r,Zo,Wo];function ap(e){return new Proxy(e,{get(t,i){return i in t?t[i]:t[_r]}})}const YI={...HI};YI[_r]={...HI[_r],...X2.kit,...X2["kit-duotone"]};const Xu=ap(YI),p_={...cz};p_[_r]={...p_[_r],...q2.kit,...q2["kit-duotone"]};const Wf=ap(p_),m_={...uz};m_[_r]={...m_[_r],...gz.kit};const qu=ap(m_),g_={...az};g_[_r]={...g_[_r],...mz.kit};const xz=ap(g_),wz=rz,JI="fa-layers-text",bz=iz,Sz={...tz};ap(Sz);const Ez=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],U0=of,Lh=new Set;Object.keys(Wf[_r]).map(Lh.add.bind(Lh));Object.keys(Wf[Zo]).map(Lh.add.bind(Lh));Object.keys(Wf[Wo]).map(Lh.add.bind(Lh));const Tz=[...nz,...fz],Sf=iu.FontAwesomeConfig||{};function Iz(e){var t=fr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function Cz(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}fr&&typeof fr.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(t=>{let[i,l]=t;const c=Cz(Iz(i));c!=null&&(Sf[l]=c)});const QI={styleDefault:"solid",familyDefault:"classic",cssPrefix:WI,replacementClass:XI,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Sf.familyPrefix&&(Sf.cssPrefix=Sf.familyPrefix);const Dh={...QI,...Sf};Dh.autoReplaceSvg||(Dh.observeMutations=!1);const tn={};Object.keys(QI).forEach(e=>{Object.defineProperty(tn,e,{enumerable:!0,set:function(t){Dh[e]=t,Ef.forEach(i=>i(tn))},get:function(){return Dh[e]}})});Object.defineProperty(tn,"familyPrefix",{enumerable:!0,set:function(e){Dh.cssPrefix=e,Ef.forEach(t=>t(tn))},get:function(){return Dh.cssPrefix}});iu.FontAwesomeConfig=tn;const Ef=[];function Pz(e){return Ef.push(e),()=>{Ef.splice(Ef.indexOf(e),1)}}const Ll=d_,ha={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Az(e){if(!e||!Ka)return;const t=fr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const i=fr.head.childNodes;let l=null;for(let c=i.length-1;c>-1;c--){const g=i[c],p=(g.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(p)>-1&&(l=g)}return fr.head.insertBefore(t,l),e}const Mz="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Xf(){let e=12,t="";for(;e-- >0;)t+=Mz[Math.random()*62|0];return t}function Wh(e){const t=[];for(let i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function sx(e){return e.classList?Wh(e.classList):(e.getAttribute("class")||"").split(" ").filter(t=>t)}function eC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function kz(e){return Object.keys(e||{}).reduce((t,i)=>t+"".concat(i,'="').concat(eC(e[i]),'" '),"").trim()}function oy(e){return Object.keys(e||{}).reduce((t,i)=>t+"".concat(i,": ").concat(e[i].trim(),";"),"")}function ax(e){return e.size!==ha.size||e.x!==ha.x||e.y!==ha.y||e.rotate!==ha.rotate||e.flipX||e.flipY}function zz(e){let{transform:t,containerWidth:i,iconWidth:l}=e;const c={transform:"translate(".concat(i/2," 256)")},g="translate(".concat(t.x*32,", ").concat(t.y*32,") "),p="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)"),E={transform:"".concat(g," ").concat(p," ").concat(u)},I={transform:"translate(".concat(l/2*-1," -256)")};return{outer:c,inner:E,path:I}}function Fz(e){let{transform:t,width:i=d_,height:l=d_,startCentered:c=!1}=e,g="";return c&&VI?g+="translate(".concat(t.x/Ll-i/2,"em, ").concat(t.y/Ll-l/2,"em) "):c?g+="translate(calc(-50% + ".concat(t.x/Ll,"em), calc(-50% + ").concat(t.y/Ll,"em)) "):g+="translate(".concat(t.x/Ll,"em, ").concat(t.y/Ll,"em) "),g+="scale(".concat(t.size/Ll*(t.flipX?-1:1),", ").concat(t.size/Ll*(t.flipY?-1:1),") "),g+="rotate(".concat(t.rotate,"deg) "),g}var Oz=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function tC(){const e=WI,t=XI,i=tn.cssPrefix,l=tn.replacementClass;let c=Oz;if(i!==e||l!==t){const g=new RegExp("\\.".concat(e,"\\-"),"g"),p=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");c=c.replace(g,".".concat(i,"-")).replace(p,"--".concat(i,"-")).replace(u,".".concat(l))}return c}let Y2=!1;function $0(){tn.autoAddCss&&!Y2&&(Az(tC()),Y2=!0)}var Rz={mixout(){return{dom:{css:tC,insertCss:$0}}},hooks(){return{beforeDOMElementCreation(){$0()},beforeI2svg(){$0()}}}};const Wa=iu||{};Wa[Za]||(Wa[Za]={});Wa[Za].styles||(Wa[Za].styles={});Wa[Za].hooks||(Wa[Za].hooks={});Wa[Za].shims||(Wa[Za].shims=[]);var da=Wa[Za];const nC=[],rC=function(){fr.removeEventListener("DOMContentLoaded",rC),pg=1,nC.map(e=>e())};let pg=!1;Ka&&(pg=(fr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(fr.readyState),pg||fr.addEventListener("DOMContentLoaded",rC));function jz(e){Ka&&(pg?setTimeout(e,0):nC.push(e))}function lp(e){const{tag:t,attributes:i={},children:l=[]}=e;return typeof e=="string"?eC(e):"<".concat(t," ").concat(kz(i),">").concat(l.map(lp).join(""),"</").concat(t,">")}function J2(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var V0=function(t,i,l,c){var g=Object.keys(t),p=g.length,u=i,E,I,M;for(l===void 0?(E=1,M=t[g[0]]):(E=0,M=l);E<p;E++)I=g[E],M=u(M,t[I],I,t);return M};function Lz(e){const t=[];let i=0;const l=e.length;for(;i<l;){const c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<l){const g=e.charCodeAt(i++);(g&64512)==56320?t.push(((c&1023)<<10)+(g&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function y_(e){const t=Lz(e);return t.length===1?t[0].toString(16):null}function Dz(e,t){const i=e.length;let l=e.charCodeAt(t),c;return l>=55296&&l<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(l-55296)*1024+c-56320+65536:l}function Q2(e){return Object.keys(e).reduce((t,i)=>{const l=e[i];return!!l.icon?t[l.iconName]=l.icon:t[i]=l,t},{})}function v_(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:l=!1}=i,c=Q2(t);typeof da.hooks.addPack=="function"&&!l?da.hooks.addPack(e,Q2(t)):da.styles[e]={...da.styles[e]||{},...c},e==="fas"&&v_("fa",t)}const{styles:$u,shims:Bz}=da,Nz={[_r]:Object.values(qu[_r]),[Zo]:Object.values(qu[Zo]),[Wo]:Object.values(qu[Wo])};let lx=null,iC={},oC={},sC={},aC={},lC={};const Uz={[_r]:Object.keys(Xu[_r]),[Zo]:Object.keys(Xu[Zo]),[Wo]:Object.keys(Xu[Wo])};function $z(e){return~Tz.indexOf(e)}function Vz(e,t){const i=t.split("-"),l=i[0],c=i.slice(1).join("-");return l===e&&c!==""&&!$z(c)?c:null}const uC=()=>{const e=l=>V0($u,(c,g,p)=>(c[p]=V0(g,l,{}),c),{});iC=e((l,c,g)=>(c[3]&&(l[c[3]]=g),c[2]&&c[2].filter(u=>typeof u=="number").forEach(u=>{l[u.toString(16)]=g}),l)),oC=e((l,c,g)=>(l[g]=g,c[2]&&c[2].filter(u=>typeof u=="string").forEach(u=>{l[u]=g}),l)),lC=e((l,c,g)=>{const p=c[2];return l[g]=g,p.forEach(u=>{l[u]=g}),l});const t="far"in $u||tn.autoFetchSvg,i=V0(Bz,(l,c)=>{const g=c[0];let p=c[1];const u=c[2];return p==="far"&&!t&&(p="fas"),typeof g=="string"&&(l.names[g]={prefix:p,iconName:u}),typeof g=="number"&&(l.unicodes[g.toString(16)]={prefix:p,iconName:u}),l},{names:{},unicodes:{}});sC=i.names,aC=i.unicodes,lx=sy(tn.styleDefault,{family:tn.familyDefault})};Pz(e=>{lx=sy(e.styleDefault,{family:tn.familyDefault})});uC();function ux(e,t){return(iC[e]||{})[t]}function Gz(e,t){return(oC[e]||{})[t]}function Zl(e,t){return(lC[e]||{})[t]}function cC(e){return sC[e]||{prefix:null,iconName:null}}function Hz(e){const t=aC[e],i=ux("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function ou(){return lx}const cx=()=>({prefix:null,iconName:null,rest:[]});function sy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:i=_r}=t,l=Xu[i][e],c=Wf[i][e]||Wf[i][l],g=e in da.styles?e:null;return c||g||null}const Zz={[_r]:Object.keys(qu[_r]),[Zo]:Object.keys(qu[Zo]),[Wo]:Object.keys(qu[Wo])};function ay(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:i=!1}=t,l={[_r]:"".concat(tn.cssPrefix,"-").concat(_r),[Zo]:"".concat(tn.cssPrefix,"-").concat(Zo),[Wo]:"".concat(tn.cssPrefix,"-").concat(Wo)};let c=null,g=_r;const p=ez.filter(E=>E!==GI);p.forEach(E=>{(e.includes(l[E])||e.some(I=>Zz[E].includes(I)))&&(g=E)});const u=e.reduce((E,I)=>{const M=Vz(tn.cssPrefix,I);if($u[I]?(I=Nz[g].includes(I)?xz[g][I]:I,c=I,E.prefix=I):Uz[g].indexOf(I)>-1?(c=I,E.prefix=sy(I,{family:g})):M?E.iconName=M:I!==tn.replacementClass&&!p.some(b=>I===l[b])&&E.rest.push(I),!i&&E.prefix&&E.iconName){const b=c==="fa"?cC(E.iconName):{},C=Zl(E.prefix,E.iconName);b.prefix&&(c=null),E.iconName=b.iconName||C||E.iconName,E.prefix=b.prefix||E.prefix,E.prefix==="far"&&!$u.far&&$u.fas&&!tn.autoFetchSvg&&(E.prefix="fas")}return E},cx());return(e.includes("fa-brands")||e.includes("fab"))&&(u.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(u.prefix="fad"),!u.prefix&&g===Zo&&($u.fass||tn.autoFetchSvg)&&(u.prefix="fass",u.iconName=Zl(u.prefix,u.iconName)||u.iconName),!u.prefix&&g===Wo&&($u.fasds||tn.autoFetchSvg)&&(u.prefix="fasds",u.iconName=Zl(u.prefix,u.iconName)||u.iconName),(u.prefix==="fa"||c==="fa")&&(u.prefix=ou()||"fas"),u}class Wz{constructor(){this.definitions={}}add(){for(var t=arguments.length,i=new Array(t),l=0;l<t;l++)i[l]=arguments[l];const c=i.reduce(this._pullDefinitions,{});Object.keys(c).forEach(g=>{this.definitions[g]={...this.definitions[g]||{},...c[g]},v_(g,c[g]);const p=qu[_r][g];p&&v_(p,c[g]),uC()})}reset(){this.definitions={}}_pullDefinitions(t,i){const l=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(l).map(c=>{const{prefix:g,iconName:p,icon:u}=l[c],E=u[2];t[g]||(t[g]={}),E.length>0&&E.forEach(I=>{typeof I=="string"&&(t[g][I]=u)}),t[g][p]=u}),t}}let eS=[],gh={};const Ih={},Xz=Object.keys(Ih);function qz(e,t){let{mixoutsTo:i}=t;return eS=e,gh={},Object.keys(Ih).forEach(l=>{Xz.indexOf(l)===-1&&delete Ih[l]}),eS.forEach(l=>{const c=l.mixout?l.mixout():{};if(Object.keys(c).forEach(g=>{typeof c[g]=="function"&&(i[g]=c[g]),typeof c[g]=="object"&&Object.keys(c[g]).forEach(p=>{i[g]||(i[g]={}),i[g][p]=c[g][p]})}),l.hooks){const g=l.hooks();Object.keys(g).forEach(p=>{gh[p]||(gh[p]=[]),gh[p].push(g[p])})}l.provides&&l.provides(Ih)}),i}function __(e,t){for(var i=arguments.length,l=new Array(i>2?i-2:0),c=2;c<i;c++)l[c-2]=arguments[c];return(gh[e]||[]).forEach(p=>{t=p.apply(null,[t,...l])}),t}function nc(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),l=1;l<t;l++)i[l-1]=arguments[l];(gh[e]||[]).forEach(g=>{g.apply(null,i)})}function su(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Ih[e]?Ih[e].apply(null,t):void 0}function x_(e){e.prefix==="fa"&&(e.prefix="fas");let{iconName:t}=e;const i=e.prefix||ou();if(t)return t=Zl(i,t)||t,J2(hC.definitions,i,t)||J2(da.styles,i,t)}const hC=new Wz,Kz=()=>{tn.autoReplaceSvg=!1,tn.observeMutations=!1,nc("noAuto")},Yz={i2svg:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ka?(nc("beforeI2svg",e),su("pseudoElements2svg",e),su("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;tn.autoReplaceSvg===!1&&(tn.autoReplaceSvg=!0),tn.observeMutations=!0,jz(()=>{Qz({autoReplaceSvgRoot:t}),nc("watch",e)})}},Jz={icon:e=>{if(e===null)return null;if(typeof e=="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Zl(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){const t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],i=sy(e[0]);return{prefix:i,iconName:Zl(i,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(tn.cssPrefix,"-"))>-1||e.match(wz))){const t=ay(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||ou(),iconName:Zl(t.prefix,t.iconName)||t.iconName}}if(typeof e=="string"){const t=ou();return{prefix:t,iconName:Zl(t,e)||e}}}},Yo={noAuto:Kz,config:tn,dom:Yz,parse:Jz,library:hC,findIconDefinition:x_,toHtml:lp},Qz=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t=fr}=e;(Object.keys(da.styles).length>0||tn.autoFetchSvg)&&Ka&&tn.autoReplaceSvg&&Yo.dom.i2svg({node:t})};function ly(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(i=>lp(i))}}),Object.defineProperty(e,"node",{get:function(){if(!Ka)return;const i=fr.createElement("div");return i.innerHTML=e.html,i.children}}),e}function eF(e){let{children:t,main:i,mask:l,attributes:c,styles:g,transform:p}=e;if(ax(p)&&i.found&&!l.found){const{width:u,height:E}=i,I={x:u/E/2,y:.5};c.style=oy({...g,"transform-origin":"".concat(I.x+p.x/16,"em ").concat(I.y+p.y/16,"em")})}return[{tag:"svg",attributes:c,children:t}]}function tF(e){let{prefix:t,iconName:i,children:l,attributes:c,symbol:g}=e;const p=g===!0?"".concat(t,"-").concat(tn.cssPrefix,"-").concat(i):g;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:{...c,id:p},children:l}]}]}function hx(e){const{icons:{main:t,mask:i},prefix:l,iconName:c,transform:g,symbol:p,title:u,maskId:E,titleId:I,extra:M,watchable:b=!1}=e,{width:C,height:R}=i.found?i:t,N=l==="fak",O=[tn.replacementClass,c?"".concat(tn.cssPrefix,"-").concat(c):""].filter(q=>M.classes.indexOf(q)===-1).filter(q=>q!==""||!!q).concat(M.classes).join(" ");let he={children:[],attributes:{...M.attributes,"data-prefix":l,"data-icon":c,class:O,role:M.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(C," ").concat(R)}};const K=N&&!~M.classes.indexOf("fa-fw")?{width:"".concat(C/R*16*.0625,"em")}:{};b&&(he.attributes[tc]=""),u&&(he.children.push({tag:"title",attributes:{id:he.attributes["aria-labelledby"]||"title-".concat(I||Xf())},children:[u]}),delete he.attributes.title);const X={...he,prefix:l,iconName:c,main:t,mask:i,maskId:E,transform:g,symbol:p,styles:{...K,...M.styles}},{children:G,attributes:ae}=i.found&&t.found?su("generateAbstractMask",X)||{children:[],attributes:{}}:su("generateAbstractIcon",X)||{children:[],attributes:{}};return X.children=G,X.attributes=ae,p?tF(X):eF(X)}function tS(e){const{content:t,width:i,height:l,transform:c,title:g,extra:p,watchable:u=!1}=e,E={...p.attributes,...g?{title:g}:{},class:p.classes.join(" ")};u&&(E[tc]="");const I={...p.styles};ax(c)&&(I.transform=Fz({transform:c,startCentered:!0,width:i,height:l}),I["-webkit-transform"]=I.transform);const M=oy(I);M.length>0&&(E.style=M);const b=[];return b.push({tag:"span",attributes:E,children:[t]}),g&&b.push({tag:"span",attributes:{class:"sr-only"},children:[g]}),b}function nF(e){const{content:t,title:i,extra:l}=e,c={...l.attributes,...i?{title:i}:{},class:l.classes.join(" ")},g=oy(l.styles);g.length>0&&(c.style=g);const p=[];return p.push({tag:"span",attributes:c,children:[t]}),i&&p.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),p}const{styles:G0}=da;function w_(e){const t=e[0],i=e[1],[l]=e.slice(4);let c=null;return Array.isArray(l)?c={tag:"g",attributes:{class:"".concat(tn.cssPrefix,"-").concat(U0.GROUP)},children:[{tag:"path",attributes:{class:"".concat(tn.cssPrefix,"-").concat(U0.SECONDARY),fill:"currentColor",d:l[0]}},{tag:"path",attributes:{class:"".concat(tn.cssPrefix,"-").concat(U0.PRIMARY),fill:"currentColor",d:l[1]}}]}:c={tag:"path",attributes:{fill:"currentColor",d:l}},{found:!0,width:t,height:i,icon:c}}const rF={found:!1,width:512,height:512};function iF(e,t){!qI&&!tn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function b_(e,t){let i=t;return t==="fa"&&tn.styleDefault!==null&&(t=ou()),new Promise((l,c)=>{if(i==="fa"){const g=cC(e)||{};e=g.iconName||e,t=g.prefix||t}if(e&&t&&G0[t]&&G0[t][e]){const g=G0[t][e];return l(w_(g))}iF(e,t),l({...rF,icon:tn.showMissingIcons&&e?su("missingIconAbstract")||{}:{}})})}const nS=()=>{},S_=tn.measurePerformance&&cm&&cm.mark&&cm.measure?cm:{mark:nS,measure:nS},sf='FA "6.6.0"',oF=e=>(S_.mark("".concat(sf," ").concat(e," begins")),()=>dC(e)),dC=e=>{S_.mark("".concat(sf," ").concat(e," ends")),S_.measure("".concat(sf," ").concat(e),"".concat(sf," ").concat(e," begins"),"".concat(sf," ").concat(e," ends"))};var dx={begin:oF,end:dC};const Om=()=>{};function rS(e){return typeof(e.getAttribute?e.getAttribute(tc):null)=="string"}function sF(e){const t=e.getAttribute?e.getAttribute(ix):null,i=e.getAttribute?e.getAttribute(ox):null;return t&&i}function aF(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(tn.replacementClass)}function lF(){return tn.autoReplaceSvg===!0?Rm.replace:Rm[tn.autoReplaceSvg]||Rm.replace}function uF(e){return fr.createElementNS("http://www.w3.org/2000/svg",e)}function cF(e){return fr.createElement(e)}function fC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:i=e.tag==="svg"?uF:cF}=t;if(typeof e=="string")return fr.createTextNode(e);const l=i(e.tag);return Object.keys(e.attributes||[]).forEach(function(g){l.setAttribute(g,e.attributes[g])}),(e.children||[]).forEach(function(g){l.appendChild(fC(g,{ceFn:i}))}),l}function hF(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}const Rm={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach(i=>{t.parentNode.insertBefore(fC(i),t)}),t.getAttribute(tc)===null&&tn.keepOriginalSource){let i=fr.createComment(hF(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){const t=e[0],i=e[1];if(~sx(t).indexOf(tn.replacementClass))return Rm.replace(e);const l=new RegExp("".concat(tn.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){const g=i[0].attributes.class.split(" ").reduce((p,u)=>(u===tn.replacementClass||u.match(l)?p.toSvg.push(u):p.toNode.push(u),p),{toNode:[],toSvg:[]});i[0].attributes.class=g.toSvg.join(" "),g.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",g.toNode.join(" "))}const c=i.map(g=>lp(g)).join(`
`);t.setAttribute(tc,""),t.innerHTML=c}};function iS(e){e()}function pC(e,t){const i=typeof t=="function"?t:Om;if(e.length===0)i();else{let l=iS;tn.mutateApproach===vz&&(l=iu.requestAnimationFrame||iS),l(()=>{const c=lF(),g=dx.begin("mutate");e.map(c),g(),i()})}}let fx=!1;function mC(){fx=!0}function E_(){fx=!1}let mg=null;function oS(e){if(!W2||!tn.observeMutations)return;const{treeCallback:t=Om,nodeCallback:i=Om,pseudoElementsCallback:l=Om,observeMutationsRoot:c=fr}=e;mg=new W2(g=>{if(fx)return;const p=ou();Wh(g).forEach(u=>{if(u.type==="childList"&&u.addedNodes.length>0&&!rS(u.addedNodes[0])&&(tn.searchPseudoElements&&l(u.target),t(u.target)),u.type==="attributes"&&u.target.parentNode&&tn.searchPseudoElements&&l(u.target.parentNode),u.type==="attributes"&&rS(u.target)&&~Ez.indexOf(u.attributeName))if(u.attributeName==="class"&&sF(u.target)){const{prefix:E,iconName:I}=ay(sx(u.target));u.target.setAttribute(ix,E||p),I&&u.target.setAttribute(ox,I)}else aF(u.target)&&i(u.target)})}),Ka&&mg.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function dF(){mg&&mg.disconnect()}function fF(e){const t=e.getAttribute("style");let i=[];return t&&(i=t.split(";").reduce((l,c)=>{const g=c.split(":"),p=g[0],u=g.slice(1);return p&&u.length>0&&(l[p]=u.join(":").trim()),l},{})),i}function pF(e){const t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),l=e.innerText!==void 0?e.innerText.trim():"";let c=ay(sx(e));return c.prefix||(c.prefix=ou()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||(c.prefix&&l.length>0&&(c.iconName=Gz(c.prefix,e.innerText)||ux(c.prefix,y_(e.innerText))),!c.iconName&&tn.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(c.iconName=e.firstChild.data)),c}function mF(e){const t=Wh(e.attributes).reduce((c,g)=>(c.name!=="class"&&c.name!=="style"&&(c[g.name]=g.value),c),{}),i=e.getAttribute("title"),l=e.getAttribute("data-fa-title-id");return tn.autoA11y&&(i?t["aria-labelledby"]="".concat(tn.replacementClass,"-title-").concat(l||Xf()):(t["aria-hidden"]="true",t.focusable="false")),t}function gF(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ha,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function sS(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:i,prefix:l,rest:c}=pF(e),g=mF(e),p=__("parseNodeAttributes",{},e);let u=t.styleParser?fF(e):[];return{iconName:i,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:l,transform:ha,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:c,styles:u,attributes:g},...p}}const{styles:yF}=da;function gC(e){const t=tn.autoReplaceSvg==="nest"?sS(e,{styleParser:!1}):sS(e);return~t.extra.classes.indexOf(JI)?su("generateLayersText",e,t):su("generateSvgReplacementMutation",e,t)}let ma=new Set;KI.map(e=>{ma.add("fa-".concat(e))});Object.keys(Xu[_r]).map(ma.add.bind(ma));Object.keys(Xu[Zo]).map(ma.add.bind(ma));Object.keys(Xu[Wo]).map(ma.add.bind(ma));ma=[...ma];function aS(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ka)return Promise.resolve();const i=fr.documentElement.classList,l=M=>i.add("".concat(K2,"-").concat(M)),c=M=>i.remove("".concat(K2,"-").concat(M)),g=tn.autoFetchSvg?ma:KI.map(M=>"fa-".concat(M)).concat(Object.keys(yF));g.includes("fa")||g.push("fa");const p=[".".concat(JI,":not([").concat(tc,"])")].concat(g.map(M=>".".concat(M,":not([").concat(tc,"])"))).join(", ");if(p.length===0)return Promise.resolve();let u=[];try{u=Wh(e.querySelectorAll(p))}catch{}if(u.length>0)l("pending"),c("complete");else return Promise.resolve();const E=dx.begin("onTree"),I=u.reduce((M,b)=>{try{const C=gC(b);C&&M.push(C)}catch(C){qI||C.name==="MissingIcon"&&console.error(C)}return M},[]);return new Promise((M,b)=>{Promise.all(I).then(C=>{pC(C,()=>{l("active"),l("complete"),c("pending"),typeof t=="function"&&t(),E(),M()})}).catch(C=>{E(),b(C)})})}function vF(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;gC(e).then(i=>{i&&pC([i],t)})}function _F(e){return function(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=(t||{}).icon?t:x_(t||{});let{mask:c}=i;return c&&(c=(c||{}).icon?c:x_(c||{})),e(l,{...i,mask:c})}}const xF=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:i=ha,symbol:l=!1,mask:c=null,maskId:g=null,title:p=null,titleId:u=null,classes:E=[],attributes:I={},styles:M={}}=t;if(!e)return;const{prefix:b,iconName:C,icon:R}=e;return ly({type:"icon",...e},()=>(nc("beforeDOMElementCreation",{iconDefinition:e,params:t}),tn.autoA11y&&(p?I["aria-labelledby"]="".concat(tn.replacementClass,"-title-").concat(u||Xf()):(I["aria-hidden"]="true",I.focusable="false")),hx({icons:{main:w_(R),mask:c?w_(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:C,transform:{...ha,...i},symbol:l,title:p,maskId:g,titleId:u,extra:{attributes:I,styles:M,classes:E}})))};var wF={mixout(){return{icon:_F(xF)}},hooks(){return{mutationObserverCallbacks(e){return e.treeCallback=aS,e.nodeCallback=vF,e}}},provides(e){e.i2svg=function(t){const{node:i=fr,callback:l=()=>{}}=t;return aS(i,l)},e.generateSvgReplacementMutation=function(t,i){const{iconName:l,title:c,titleId:g,prefix:p,transform:u,symbol:E,mask:I,maskId:M,extra:b}=i;return new Promise((C,R)=>{Promise.all([b_(l,p),I.iconName?b_(I.iconName,I.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(N=>{let[O,he]=N;C([t,hx({icons:{main:O,mask:he},prefix:p,iconName:l,transform:u,symbol:E,maskId:M,title:c,titleId:g,extra:b,watchable:!0})])}).catch(R)})},e.generateAbstractIcon=function(t){let{children:i,attributes:l,main:c,transform:g,styles:p}=t;const u=oy(p);u.length>0&&(l.style=u);let E;return ax(g)&&(E=su("generateAbstractTransformGrouping",{main:c,transform:g,containerWidth:c.width,iconWidth:c.width})),i.push(E||c.icon),{children:i,attributes:l}}}},bF={mixout(){return{layer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:i=[]}=t;return ly({type:"layer"},()=>{nc("beforeDOMElementCreation",{assembler:e,params:t});let l=[];return e(c=>{Array.isArray(c)?c.map(g=>{l=l.concat(g.abstract)}):l=l.concat(c.abstract)}),[{tag:"span",attributes:{class:["".concat(tn.cssPrefix,"-layers"),...i].join(" ")},children:l}]})}}}},SF={mixout(){return{counter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:i=null,classes:l=[],attributes:c={},styles:g={}}=t;return ly({type:"counter",content:e},()=>(nc("beforeDOMElementCreation",{content:e,params:t}),nF({content:e.toString(),title:i,extra:{attributes:c,styles:g,classes:["".concat(tn.cssPrefix,"-layers-counter"),...l]}})))}}}},EF={mixout(){return{text(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:i=ha,title:l=null,classes:c=[],attributes:g={},styles:p={}}=t;return ly({type:"text",content:e},()=>(nc("beforeDOMElementCreation",{content:e,params:t}),tS({content:e,transform:{...ha,...i},title:l,extra:{attributes:g,styles:p,classes:["".concat(tn.cssPrefix,"-layers-text"),...c]}})))}}},provides(e){e.generateLayersText=function(t,i){const{title:l,transform:c,extra:g}=i;let p=null,u=null;if(VI){const E=parseInt(getComputedStyle(t).fontSize,10),I=t.getBoundingClientRect();p=I.width/E,u=I.height/E}return tn.autoA11y&&!l&&(g.attributes["aria-hidden"]="true"),Promise.resolve([t,tS({content:t.innerHTML,width:p,height:u,transform:c,title:l,extra:g,watchable:!0})])}}};const TF=new RegExp('"',"ug"),lS=[1105920,1112319],uS={FontAwesome:{normal:"fas",400:"fas"},...sz,...oz,...pz},T_=Object.keys(uS).reduce((e,t)=>(e[t.toLowerCase()]=uS[t],e),{}),IF=Object.keys(T_).reduce((e,t)=>{const i=T_[t];return e[t]=i[900]||[...Object.entries(i)][0][1],e},{});function CF(e){const t=e.replace(TF,""),i=Dz(t,0),l=i>=lS[0]&&i<=lS[1],c=t.length===2?t[0]===t[1]:!1;return{value:y_(c?t[0]:t),isSecondary:l||c}}function PF(e,t){const i=e.replace(/^['"]|['"]$/g,"").toLowerCase(),l=parseInt(t),c=isNaN(l)?"normal":l;return(T_[i]||{})[c]||IF[i]}function cS(e,t){const i="".concat(yz).concat(t.replace(":","-"));return new Promise((l,c)=>{if(e.getAttribute(i)!==null)return l();const p=Wh(e.children).filter(C=>C.getAttribute(f_)===t)[0],u=iu.getComputedStyle(e,t),E=u.getPropertyValue("font-family"),I=E.match(bz),M=u.getPropertyValue("font-weight"),b=u.getPropertyValue("content");if(p&&!I)return e.removeChild(p),l();if(I&&b!=="none"&&b!==""){const C=u.getPropertyValue("content");let R=PF(E,M);const{value:N,isSecondary:O}=CF(C),he=I[0].startsWith("FontAwesome");let K=ux(R,N),X=K;if(he){const G=Hz(N);G.iconName&&G.prefix&&(K=G.iconName,R=G.prefix)}if(K&&!O&&(!p||p.getAttribute(ix)!==R||p.getAttribute(ox)!==X)){e.setAttribute(i,X),p&&e.removeChild(p);const G=gF(),{extra:ae}=G;ae.attributes[f_]=t,b_(K,R).then(q=>{const H=hx({...G,icons:{main:q,mask:cx()},prefix:R,iconName:X,extra:ae,watchable:!0}),T=fr.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(T,e.firstChild):e.appendChild(T),T.outerHTML=H.map(j=>lp(j)).join(`
`),e.removeAttribute(i),l()}).catch(c)}else l()}else l()})}function AF(e){return Promise.all([cS(e,"::before"),cS(e,"::after")])}function MF(e){return e.parentNode!==document.head&&!~_z.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(f_)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function hS(e){if(Ka)return new Promise((t,i)=>{const l=Wh(e.querySelectorAll("*")).filter(MF).map(AF),c=dx.begin("searchPseudoElements");mC(),Promise.all(l).then(()=>{c(),E_(),t()}).catch(()=>{c(),E_(),i()})})}var kF={hooks(){return{mutationObserverCallbacks(e){return e.pseudoElementsCallback=hS,e}}},provides(e){e.pseudoElements2svg=function(t){const{node:i=fr}=t;tn.searchPseudoElements&&hS(i)}}};let dS=!1;var zF={mixout(){return{dom:{unwatch(){mC(),dS=!0}}}},hooks(){return{bootstrap(){oS(__("mutationObserverCallbacks",{}))},noAuto(){dF()},watch(e){const{observeMutationsRoot:t}=e;dS?E_():oS(__("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}};const fS=e=>{let t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce((i,l)=>{const c=l.toLowerCase().split("-"),g=c[0];let p=c.slice(1).join("-");if(g&&p==="h")return i.flipX=!0,i;if(g&&p==="v")return i.flipY=!0,i;if(p=parseFloat(p),isNaN(p))return i;switch(g){case"grow":i.size=i.size+p;break;case"shrink":i.size=i.size-p;break;case"left":i.x=i.x-p;break;case"right":i.x=i.x+p;break;case"up":i.y=i.y-p;break;case"down":i.y=i.y+p;break;case"rotate":i.rotate=i.rotate+p;break}return i},t)};var FF={mixout(){return{parse:{transform:e=>fS(e)}}},hooks(){return{parseNodeAttributes(e,t){const i=t.getAttribute("data-fa-transform");return i&&(e.transform=fS(i)),e}}},provides(e){e.generateAbstractTransformGrouping=function(t){let{main:i,transform:l,containerWidth:c,iconWidth:g}=t;const p={transform:"translate(".concat(c/2," 256)")},u="translate(".concat(l.x*32,", ").concat(l.y*32,") "),E="scale(".concat(l.size/16*(l.flipX?-1:1),", ").concat(l.size/16*(l.flipY?-1:1),") "),I="rotate(".concat(l.rotate," 0 0)"),M={transform:"".concat(u," ").concat(E," ").concat(I)},b={transform:"translate(".concat(g/2*-1," -256)")},C={outer:p,inner:M,path:b};return{tag:"g",attributes:{...C.outer},children:[{tag:"g",attributes:{...C.inner},children:[{tag:i.icon.tag,children:i.icon.children,attributes:{...i.icon.attributes,...C.path}}]}]}}}};const H0={x:0,y:0,width:"100%",height:"100%"};function pS(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function OF(e){return e.tag==="g"?e.children:[e]}var RF={hooks(){return{parseNodeAttributes(e,t){const i=t.getAttribute("data-fa-mask"),l=i?ay(i.split(" ").map(c=>c.trim())):cx();return l.prefix||(l.prefix=ou()),e.mask=l,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides(e){e.generateAbstractMask=function(t){let{children:i,attributes:l,main:c,mask:g,maskId:p,transform:u}=t;const{width:E,icon:I}=c,{width:M,icon:b}=g,C=zz({transform:u,containerWidth:M,iconWidth:E}),R={tag:"rect",attributes:{...H0,fill:"white"}},N=I.children?{children:I.children.map(pS)}:{},O={tag:"g",attributes:{...C.inner},children:[pS({tag:I.tag,attributes:{...I.attributes,...C.path},...N})]},he={tag:"g",attributes:{...C.outer},children:[O]},K="mask-".concat(p||Xf()),X="clip-".concat(p||Xf()),G={tag:"mask",attributes:{...H0,id:K,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"},children:[R,he]},ae={tag:"defs",children:[{tag:"clipPath",attributes:{id:X},children:OF(b)},G]};return i.push(ae,{tag:"rect",attributes:{fill:"currentColor","clip-path":"url(#".concat(X,")"),mask:"url(#".concat(K,")"),...H0}}),{children:i,attributes:l}}}},jF={provides(e){let t=!1;iu.matchMedia&&(t=iu.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const i=[],l={fill:"currentColor"},c={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:{...l,d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}});const g={...c,attributeName:"opacity"},p={tag:"circle",attributes:{...l,cx:"256",cy:"364",r:"28"},children:[]};return t||p.children.push({tag:"animate",attributes:{...c,attributeName:"r",values:"28;14;28;28;14;28;"}},{tag:"animate",attributes:{...g,values:"1;0;1;1;0;1;"}}),i.push(p),i.push({tag:"path",attributes:{...l,opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"},children:t?[]:[{tag:"animate",attributes:{...g,values:"1;0;0;0;0;1;"}}]}),t||i.push({tag:"path",attributes:{...l,opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"},children:[{tag:"animate",attributes:{...g,values:"0;0;1;1;0;0;"}}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},LF={hooks(){return{parseNodeAttributes(e,t){const i=t.getAttribute("data-fa-symbol"),l=i===null?!1:i===""?!0:i;return e.symbol=l,e}}}},DF=[Rz,wF,bF,SF,EF,kF,zF,FF,RF,jF,LF];qz(DF,{mixoutsTo:Yo});Yo.noAuto;Yo.config;Yo.library;Yo.dom;const I_=Yo.parse;Yo.findIconDefinition;Yo.toHtml;const BF=Yo.icon;Yo.layer;Yo.text;Yo.counter;var yC={exports:{}},NF="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",UF=NF,$F=UF;function vC(){}function _C(){}_C.resetWarningCache=vC;var VF=function(){function e(l,c,g,p,u,E){if(E!==$F){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_C,resetWarningCache:vC};return i.PropTypes=i,i};yC.exports=VF();var GF=yC.exports;const On=ep(GF);function mS(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,l)}return i}function sa(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?mS(Object(i),!0).forEach(function(l){yh(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mS(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function gg(e){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gg(e)}function yh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function HF(e,t){if(e==null)return{};var i={},l=Object.keys(e),c,g;for(g=0;g<l.length;g++)c=l[g],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function ZF(e,t){if(e==null)return{};var i=HF(e,t),l,c;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(c=0;c<g.length;c++)l=g[c],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(i[l]=e[l])}return i}function C_(e){return WF(e)||XF(e)||qF(e)||KF()}function WF(e){if(Array.isArray(e))return P_(e)}function XF(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qF(e,t){if(e){if(typeof e=="string")return P_(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return P_(e,t)}}function P_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,l=new Array(t);i<t;i++)l[i]=e[i];return l}function KF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YF(e){var t,i=e.beat,l=e.fade,c=e.beatFade,g=e.bounce,p=e.shake,u=e.flash,E=e.spin,I=e.spinPulse,M=e.spinReverse,b=e.pulse,C=e.fixedWidth,R=e.inverse,N=e.border,O=e.listItem,he=e.flip,K=e.size,X=e.rotation,G=e.pull,ae=(t={"fa-beat":i,"fa-fade":l,"fa-beat-fade":c,"fa-bounce":g,"fa-shake":p,"fa-flash":u,"fa-spin":E,"fa-spin-reverse":M,"fa-spin-pulse":I,"fa-pulse":b,"fa-fw":C,"fa-inverse":R,"fa-border":N,"fa-li":O,"fa-flip":he===!0,"fa-flip-horizontal":he==="horizontal"||he==="both","fa-flip-vertical":he==="vertical"||he==="both"},yh(t,"fa-".concat(K),typeof K<"u"&&K!==null),yh(t,"fa-rotate-".concat(X),typeof X<"u"&&X!==null&&X!==0),yh(t,"fa-pull-".concat(G),typeof G<"u"&&G!==null),yh(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(ae).map(function(q){return ae[q]?q:null}).filter(function(q){return q})}function JF(e){return e=e-0,e===e}function xC(e){return JF(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var QF=["style"];function eO(e){return e.charAt(0).toUpperCase()+e.slice(1)}function tO(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var l=i.indexOf(":"),c=xC(i.slice(0,l)),g=i.slice(l+1).trim();return c.startsWith("webkit")?t[eO(c)]=g:t[c]=g,t},{})}function wC(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var l=(t.children||[]).map(function(E){return wC(e,E)}),c=Object.keys(t.attributes||{}).reduce(function(E,I){var M=t.attributes[I];switch(I){case"class":E.attrs.className=M,delete t.attributes.class;break;case"style":E.attrs.style=tO(M);break;default:I.indexOf("aria-")===0||I.indexOf("data-")===0?E.attrs[I.toLowerCase()]=M:E.attrs[xC(I)]=M}return E},{attrs:{}}),g=i.style,p=g===void 0?{}:g,u=ZF(i,QF);return c.attrs.style=sa(sa({},c.attrs.style),p),e.apply(void 0,[t.tag,sa(sa({},c.attrs),u)].concat(C_(l)))}var bC=!1;try{bC=!0}catch{}function nO(){if(!bC&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function gS(e){if(e&&gg(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(I_.icon)return I_.icon(e);if(e===null)return null;if(e&&gg(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function Z0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?yh({},e,t):{}}var yS={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},tu=h1.forwardRef(function(e,t){var i=sa(sa({},yS),e),l=i.icon,c=i.mask,g=i.symbol,p=i.className,u=i.title,E=i.titleId,I=i.maskId,M=gS(l),b=Z0("classes",[].concat(C_(YF(i)),C_((p||"").split(" ")))),C=Z0("transform",typeof i.transform=="string"?I_.transform(i.transform):i.transform),R=Z0("mask",gS(c)),N=BF(M,sa(sa(sa(sa({},b),C),R),{},{symbol:g,title:u,titleId:E,maskId:I}));if(!N)return nO("Could not find icon",M),null;var O=N.abstract,he={ref:t};return Object.keys(i).forEach(function(K){yS.hasOwnProperty(K)||(he[K]=i[K])}),rO(O[0],he)});tu.displayName="FontAwesomeIcon";tu.propTypes={beat:On.bool,border:On.bool,beatFade:On.bool,bounce:On.bool,className:On.string,fade:On.bool,flash:On.bool,mask:On.oneOfType([On.object,On.array,On.string]),maskId:On.string,fixedWidth:On.bool,inverse:On.bool,flip:On.oneOf([!0,!1,"horizontal","vertical","both"]),icon:On.oneOfType([On.object,On.array,On.string]),listItem:On.bool,pull:On.oneOf(["right","left"]),pulse:On.bool,rotation:On.oneOf([0,90,180,270]),shake:On.bool,size:On.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:On.bool,spinPulse:On.bool,spinReverse:On.bool,symbol:On.oneOfType([On.bool,On.string]),title:On.string,titleId:On.string,transform:On.oneOfType([On.string,On.object]),swapOpacity:On.bool};var rO=wC.bind(null,h1.createElement);const iO={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},A_={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},oO={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-64 64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0 0-64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 64-64 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0 0 64z"]},sO=oO;function hm(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var SC={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(l,c,g){function p(I,M){if(!c[I]){if(!l[I]){var b=typeof hm=="function"&&hm;if(!M&&b)return b(I,!0);if(u)return u(I,!0);var C=new Error("Cannot find module '"+I+"'");throw C.code="MODULE_NOT_FOUND",C}var R=c[I]={exports:{}};l[I][0].call(R.exports,function(N){var O=l[I][1][N];return p(O||N)},R,R.exports,i,l,c,g)}return c[I].exports}for(var u=typeof hm=="function"&&hm,E=0;E<g.length;E++)p(g[E]);return p}return i}()({1:[function(i,l,c){c.byteLength=C,c.toByteArray=N,c.fromByteArray=K;for(var g=[],p=[],u=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=0,M=E.length;I<M;++I)g[I]=E[I],p[E.charCodeAt(I)]=I;p[45]=62,p[95]=63;function b(X){var G=X.length;if(G%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=X.indexOf("=");ae===-1&&(ae=G);var q=ae===G?0:4-ae%4;return[ae,q]}function C(X){var G=b(X),ae=G[0],q=G[1];return(ae+q)*3/4-q}function R(X,G,ae){return(G+ae)*3/4-ae}function N(X){var G,ae=b(X),q=ae[0],H=ae[1],T=new u(R(X,q,H)),j=0,D=H>0?q-4:q,te;for(te=0;te<D;te+=4)G=p[X.charCodeAt(te)]<<18|p[X.charCodeAt(te+1)]<<12|p[X.charCodeAt(te+2)]<<6|p[X.charCodeAt(te+3)],T[j++]=G>>16&255,T[j++]=G>>8&255,T[j++]=G&255;return H===2&&(G=p[X.charCodeAt(te)]<<2|p[X.charCodeAt(te+1)]>>4,T[j++]=G&255),H===1&&(G=p[X.charCodeAt(te)]<<10|p[X.charCodeAt(te+1)]<<4|p[X.charCodeAt(te+2)]>>2,T[j++]=G>>8&255,T[j++]=G&255),T}function O(X){return g[X>>18&63]+g[X>>12&63]+g[X>>6&63]+g[X&63]}function he(X,G,ae){for(var q,H=[],T=G;T<ae;T+=3)q=(X[T]<<16&16711680)+(X[T+1]<<8&65280)+(X[T+2]&255),H.push(O(q));return H.join("")}function K(X){for(var G,ae=X.length,q=ae%3,H=[],T=16383,j=0,D=ae-q;j<D;j+=T)H.push(he(X,j,j+T>D?D:j+T));return q===1?(G=X[ae-1],H.push(g[G>>2]+g[G<<4&63]+"==")):q===2&&(G=(X[ae-2]<<8)+X[ae-1],H.push(g[G>>10]+g[G>>4&63]+g[G<<2&63]+"=")),H.join("")}},{}],2:[function(i,l,c){(function(g){(function(){var p=i("base64-js"),u=i("ieee754");c.Buffer=b,c.SlowBuffer=q,c.INSPECT_MAX_BYTES=50;var E=2147483647;c.kMaxLength=E,b.TYPED_ARRAY_SUPPORT=I(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function I(){try{var Ee=new Uint8Array(1);return Ee.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Ee.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function M(Ee){if(Ee>E)throw new RangeError('The value "'+Ee+'" is invalid for option "size"');var B=new Uint8Array(Ee);return B.__proto__=b.prototype,B}function b(Ee,B,L){if(typeof Ee=="number"){if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(Ee)}return C(Ee,B,L)}typeof Symbol<"u"&&Symbol.species!=null&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),b.poolSize=8192;function C(Ee,B,L){if(typeof Ee=="string")return he(Ee,B);if(ArrayBuffer.isView(Ee))return K(Ee);if(Ee==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ee);if(ln(Ee,ArrayBuffer)||Ee&&ln(Ee.buffer,ArrayBuffer))return X(Ee,B,L);if(typeof Ee=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ge=Ee.valueOf&&Ee.valueOf();if(ge!=null&&ge!==Ee)return b.from(ge,B,L);var Xe=G(Ee);if(Xe)return Xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ee[Symbol.toPrimitive]=="function")return b.from(Ee[Symbol.toPrimitive]("string"),B,L);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ee)}b.from=function(Ee,B,L){return C(Ee,B,L)},b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array;function R(Ee){if(typeof Ee!="number")throw new TypeError('"size" argument must be of type number');if(Ee<0)throw new RangeError('The value "'+Ee+'" is invalid for option "size"')}function N(Ee,B,L){return R(Ee),Ee<=0?M(Ee):B!==void 0?typeof L=="string"?M(Ee).fill(B,L):M(Ee).fill(B):M(Ee)}b.alloc=function(Ee,B,L){return N(Ee,B,L)};function O(Ee){return R(Ee),M(Ee<0?0:ae(Ee)|0)}b.allocUnsafe=function(Ee){return O(Ee)},b.allocUnsafeSlow=function(Ee){return O(Ee)};function he(Ee,B){if((typeof B!="string"||B==="")&&(B="utf8"),!b.isEncoding(B))throw new TypeError("Unknown encoding: "+B);var L=H(Ee,B)|0,ge=M(L),Xe=ge.write(Ee,B);return Xe!==L&&(ge=ge.slice(0,Xe)),ge}function K(Ee){for(var B=Ee.length<0?0:ae(Ee.length)|0,L=M(B),ge=0;ge<B;ge+=1)L[ge]=Ee[ge]&255;return L}function X(Ee,B,L){if(B<0||Ee.byteLength<B)throw new RangeError('"offset" is outside of buffer bounds');if(Ee.byteLength<B+(L||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return B===void 0&&L===void 0?ge=new Uint8Array(Ee):L===void 0?ge=new Uint8Array(Ee,B):ge=new Uint8Array(Ee,B,L),ge.__proto__=b.prototype,ge}function G(Ee){if(b.isBuffer(Ee)){var B=ae(Ee.length)|0,L=M(B);return L.length===0||Ee.copy(L,0,0,B),L}if(Ee.length!==void 0)return typeof Ee.length!="number"||Vt(Ee.length)?M(0):K(Ee);if(Ee.type==="Buffer"&&Array.isArray(Ee.data))return K(Ee.data)}function ae(Ee){if(Ee>=E)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+E.toString(16)+" bytes");return Ee|0}function q(Ee){return+Ee!=Ee&&(Ee=0),b.alloc(+Ee)}b.isBuffer=function(B){return B!=null&&B._isBuffer===!0&&B!==b.prototype},b.compare=function(B,L){if(ln(B,Uint8Array)&&(B=b.from(B,B.offset,B.byteLength)),ln(L,Uint8Array)&&(L=b.from(L,L.offset,L.byteLength)),!b.isBuffer(B)||!b.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===L)return 0;for(var ge=B.length,Xe=L.length,tt=0,ht=Math.min(ge,Xe);tt<ht;++tt)if(B[tt]!==L[tt]){ge=B[tt],Xe=L[tt];break}return ge<Xe?-1:Xe<ge?1:0},b.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(B,L){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return b.alloc(0);var ge;if(L===void 0)for(L=0,ge=0;ge<B.length;++ge)L+=B[ge].length;var Xe=b.allocUnsafe(L),tt=0;for(ge=0;ge<B.length;++ge){var ht=B[ge];if(ln(ht,Uint8Array)&&(ht=b.from(ht)),!b.isBuffer(ht))throw new TypeError('"list" argument must be an Array of Buffers');ht.copy(Xe,tt),tt+=ht.length}return Xe};function H(Ee,B){if(b.isBuffer(Ee))return Ee.length;if(ArrayBuffer.isView(Ee)||ln(Ee,ArrayBuffer))return Ee.byteLength;if(typeof Ee!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ee);var L=Ee.length,ge=arguments.length>2&&arguments[2]===!0;if(!ge&&L===0)return 0;for(var Xe=!1;;)switch(B){case"ascii":case"latin1":case"binary":return L;case"utf8":case"utf-8":return Gt(Ee).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L*2;case"hex":return L>>>1;case"base64":return et(Ee).length;default:if(Xe)return ge?-1:Gt(Ee).length;B=(""+B).toLowerCase(),Xe=!0}}b.byteLength=H;function T(Ee,B,L){var ge=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((L===void 0||L>this.length)&&(L=this.length),L<=0)||(L>>>=0,B>>>=0,L<=B))return"";for(Ee||(Ee="utf8");;)switch(Ee){case"hex":return Ae(this,B,L);case"utf8":case"utf-8":return re(this,B,L);case"ascii":return Ie(this,B,L);case"latin1":case"binary":return Ne(this,B,L);case"base64":return ee(this,B,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,B,L);default:if(ge)throw new TypeError("Unknown encoding: "+Ee);Ee=(Ee+"").toLowerCase(),ge=!0}}b.prototype._isBuffer=!0;function j(Ee,B,L){var ge=Ee[B];Ee[B]=Ee[L],Ee[L]=ge}b.prototype.swap16=function(){var B=this.length;if(B%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<B;L+=2)j(this,L,L+1);return this},b.prototype.swap32=function(){var B=this.length;if(B%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<B;L+=4)j(this,L,L+3),j(this,L+1,L+2);return this},b.prototype.swap64=function(){var B=this.length;if(B%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<B;L+=8)j(this,L,L+7),j(this,L+1,L+6),j(this,L+2,L+5),j(this,L+3,L+4);return this},b.prototype.toString=function(){var B=this.length;return B===0?"":arguments.length===0?re(this,0,B):T.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(B){if(!b.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B?!0:b.compare(this,B)===0},b.prototype.inspect=function(){var B="",L=c.INSPECT_MAX_BYTES;return B=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(B+=" ... "),"<Buffer "+B+">"},b.prototype.compare=function(B,L,ge,Xe,tt){if(ln(B,Uint8Array)&&(B=b.from(B,B.offset,B.byteLength)),!b.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(L===void 0&&(L=0),ge===void 0&&(ge=B?B.length:0),Xe===void 0&&(Xe=0),tt===void 0&&(tt=this.length),L<0||ge>B.length||Xe<0||tt>this.length)throw new RangeError("out of range index");if(Xe>=tt&&L>=ge)return 0;if(Xe>=tt)return-1;if(L>=ge)return 1;if(L>>>=0,ge>>>=0,Xe>>>=0,tt>>>=0,this===B)return 0;for(var ht=tt-Xe,ue=ge-L,k=Math.min(ht,ue),U=this.slice(Xe,tt),Te=B.slice(L,ge),Ve=0;Ve<k;++Ve)if(U[Ve]!==Te[Ve]){ht=U[Ve],ue=Te[Ve];break}return ht<ue?-1:ue<ht?1:0};function D(Ee,B,L,ge,Xe){if(Ee.length===0)return-1;if(typeof L=="string"?(ge=L,L=0):L>2147483647?L=2147483647:L<-2147483648&&(L=-2147483648),L=+L,Vt(L)&&(L=Xe?0:Ee.length-1),L<0&&(L=Ee.length+L),L>=Ee.length){if(Xe)return-1;L=Ee.length-1}else if(L<0)if(Xe)L=0;else return-1;if(typeof B=="string"&&(B=b.from(B,ge)),b.isBuffer(B))return B.length===0?-1:te(Ee,B,L,ge,Xe);if(typeof B=="number")return B=B&255,typeof Uint8Array.prototype.indexOf=="function"?Xe?Uint8Array.prototype.indexOf.call(Ee,B,L):Uint8Array.prototype.lastIndexOf.call(Ee,B,L):te(Ee,[B],L,ge,Xe);throw new TypeError("val must be string, number or Buffer")}function te(Ee,B,L,ge,Xe){var tt=1,ht=Ee.length,ue=B.length;if(ge!==void 0&&(ge=String(ge).toLowerCase(),ge==="ucs2"||ge==="ucs-2"||ge==="utf16le"||ge==="utf-16le")){if(Ee.length<2||B.length<2)return-1;tt=2,ht/=2,ue/=2,L/=2}function k(Ge,St){return tt===1?Ge[St]:Ge.readUInt16BE(St*tt)}var U;if(Xe){var Te=-1;for(U=L;U<ht;U++)if(k(Ee,U)===k(B,Te===-1?0:U-Te)){if(Te===-1&&(Te=U),U-Te+1===ue)return Te*tt}else Te!==-1&&(U-=U-Te),Te=-1}else for(L+ue>ht&&(L=ht-ue),U=L;U>=0;U--){for(var Ve=!0,rt=0;rt<ue;rt++)if(k(Ee,U+rt)!==k(B,rt)){Ve=!1;break}if(Ve)return U}return-1}b.prototype.includes=function(B,L,ge){return this.indexOf(B,L,ge)!==-1},b.prototype.indexOf=function(B,L,ge){return D(this,B,L,ge,!0)},b.prototype.lastIndexOf=function(B,L,ge){return D(this,B,L,ge,!1)};function W(Ee,B,L,ge){L=Number(L)||0;var Xe=Ee.length-L;ge?(ge=Number(ge),ge>Xe&&(ge=Xe)):ge=Xe;var tt=B.length;ge>tt/2&&(ge=tt/2);for(var ht=0;ht<ge;++ht){var ue=parseInt(B.substr(ht*2,2),16);if(Vt(ue))return ht;Ee[L+ht]=ue}return ht}function ve(Ee,B,L,ge){return vn(Gt(B,Ee.length-L),Ee,L,ge)}function _e(Ee,B,L,ge){return vn(Ht(B),Ee,L,ge)}function pe(Ee,B,L,ge){return _e(Ee,B,L,ge)}function oe(Ee,B,L,ge){return vn(et(B),Ee,L,ge)}function ce(Ee,B,L,ge){return vn(an(B,Ee.length-L),Ee,L,ge)}b.prototype.write=function(B,L,ge,Xe){if(L===void 0)Xe="utf8",ge=this.length,L=0;else if(ge===void 0&&typeof L=="string")Xe=L,ge=this.length,L=0;else if(isFinite(L))L=L>>>0,isFinite(ge)?(ge=ge>>>0,Xe===void 0&&(Xe="utf8")):(Xe=ge,ge=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var tt=this.length-L;if((ge===void 0||ge>tt)&&(ge=tt),B.length>0&&(ge<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xe||(Xe="utf8");for(var ht=!1;;)switch(Xe){case"hex":return W(this,B,L,ge);case"utf8":case"utf-8":return ve(this,B,L,ge);case"ascii":return _e(this,B,L,ge);case"latin1":case"binary":return pe(this,B,L,ge);case"base64":return oe(this,B,L,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,B,L,ge);default:if(ht)throw new TypeError("Unknown encoding: "+Xe);Xe=(""+Xe).toLowerCase(),ht=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(Ee,B,L){return B===0&&L===Ee.length?p.fromByteArray(Ee):p.fromByteArray(Ee.slice(B,L))}function re(Ee,B,L){L=Math.min(Ee.length,L);for(var ge=[],Xe=B;Xe<L;){var tt=Ee[Xe],ht=null,ue=tt>239?4:tt>223?3:tt>191?2:1;if(Xe+ue<=L){var k,U,Te,Ve;switch(ue){case 1:tt<128&&(ht=tt);break;case 2:k=Ee[Xe+1],(k&192)===128&&(Ve=(tt&31)<<6|k&63,Ve>127&&(ht=Ve));break;case 3:k=Ee[Xe+1],U=Ee[Xe+2],(k&192)===128&&(U&192)===128&&(Ve=(tt&15)<<12|(k&63)<<6|U&63,Ve>2047&&(Ve<55296||Ve>57343)&&(ht=Ve));break;case 4:k=Ee[Xe+1],U=Ee[Xe+2],Te=Ee[Xe+3],(k&192)===128&&(U&192)===128&&(Te&192)===128&&(Ve=(tt&15)<<18|(k&63)<<12|(U&63)<<6|Te&63,Ve>65535&&Ve<1114112&&(ht=Ve))}}ht===null?(ht=65533,ue=1):ht>65535&&(ht-=65536,ge.push(ht>>>10&1023|55296),ht=56320|ht&1023),ge.push(ht),Xe+=ue}return Se(ge)}var fe=4096;function Se(Ee){var B=Ee.length;if(B<=fe)return String.fromCharCode.apply(String,Ee);for(var L="",ge=0;ge<B;)L+=String.fromCharCode.apply(String,Ee.slice(ge,ge+=fe));return L}function Ie(Ee,B,L){var ge="";L=Math.min(Ee.length,L);for(var Xe=B;Xe<L;++Xe)ge+=String.fromCharCode(Ee[Xe]&127);return ge}function Ne(Ee,B,L){var ge="";L=Math.min(Ee.length,L);for(var Xe=B;Xe<L;++Xe)ge+=String.fromCharCode(Ee[Xe]);return ge}function Ae(Ee,B,L){var ge=Ee.length;(!B||B<0)&&(B=0),(!L||L<0||L>ge)&&(L=ge);for(var Xe="",tt=B;tt<L;++tt)Xe+=xt(Ee[tt]);return Xe}function ze(Ee,B,L){for(var ge=Ee.slice(B,L),Xe="",tt=0;tt<ge.length;tt+=2)Xe+=String.fromCharCode(ge[tt]+ge[tt+1]*256);return Xe}b.prototype.slice=function(B,L){var ge=this.length;B=~~B,L=L===void 0?ge:~~L,B<0?(B+=ge,B<0&&(B=0)):B>ge&&(B=ge),L<0?(L+=ge,L<0&&(L=0)):L>ge&&(L=ge),L<B&&(L=B);var Xe=this.subarray(B,L);return Xe.__proto__=b.prototype,Xe};function He(Ee,B,L){if(Ee%1!==0||Ee<0)throw new RangeError("offset is not uint");if(Ee+B>L)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUIntLE=function(B,L,ge){B=B>>>0,L=L>>>0,ge||He(B,L,this.length);for(var Xe=this[B],tt=1,ht=0;++ht<L&&(tt*=256);)Xe+=this[B+ht]*tt;return Xe},b.prototype.readUIntBE=function(B,L,ge){B=B>>>0,L=L>>>0,ge||He(B,L,this.length);for(var Xe=this[B+--L],tt=1;L>0&&(tt*=256);)Xe+=this[B+--L]*tt;return Xe},b.prototype.readUInt8=function(B,L){return B=B>>>0,L||He(B,1,this.length),this[B]},b.prototype.readUInt16LE=function(B,L){return B=B>>>0,L||He(B,2,this.length),this[B]|this[B+1]<<8},b.prototype.readUInt16BE=function(B,L){return B=B>>>0,L||He(B,2,this.length),this[B]<<8|this[B+1]},b.prototype.readUInt32LE=function(B,L){return B=B>>>0,L||He(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+this[B+3]*16777216},b.prototype.readUInt32BE=function(B,L){return B=B>>>0,L||He(B,4,this.length),this[B]*16777216+(this[B+1]<<16|this[B+2]<<8|this[B+3])},b.prototype.readIntLE=function(B,L,ge){B=B>>>0,L=L>>>0,ge||He(B,L,this.length);for(var Xe=this[B],tt=1,ht=0;++ht<L&&(tt*=256);)Xe+=this[B+ht]*tt;return tt*=128,Xe>=tt&&(Xe-=Math.pow(2,8*L)),Xe},b.prototype.readIntBE=function(B,L,ge){B=B>>>0,L=L>>>0,ge||He(B,L,this.length);for(var Xe=L,tt=1,ht=this[B+--Xe];Xe>0&&(tt*=256);)ht+=this[B+--Xe]*tt;return tt*=128,ht>=tt&&(ht-=Math.pow(2,8*L)),ht},b.prototype.readInt8=function(B,L){return B=B>>>0,L||He(B,1,this.length),this[B]&128?(255-this[B]+1)*-1:this[B]},b.prototype.readInt16LE=function(B,L){B=B>>>0,L||He(B,2,this.length);var ge=this[B]|this[B+1]<<8;return ge&32768?ge|4294901760:ge},b.prototype.readInt16BE=function(B,L){B=B>>>0,L||He(B,2,this.length);var ge=this[B+1]|this[B]<<8;return ge&32768?ge|4294901760:ge},b.prototype.readInt32LE=function(B,L){return B=B>>>0,L||He(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},b.prototype.readInt32BE=function(B,L){return B=B>>>0,L||He(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},b.prototype.readFloatLE=function(B,L){return B=B>>>0,L||He(B,4,this.length),u.read(this,B,!0,23,4)},b.prototype.readFloatBE=function(B,L){return B=B>>>0,L||He(B,4,this.length),u.read(this,B,!1,23,4)},b.prototype.readDoubleLE=function(B,L){return B=B>>>0,L||He(B,8,this.length),u.read(this,B,!0,52,8)},b.prototype.readDoubleBE=function(B,L){return B=B>>>0,L||He(B,8,this.length),u.read(this,B,!1,52,8)};function Ze(Ee,B,L,ge,Xe,tt){if(!b.isBuffer(Ee))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>Xe||B<tt)throw new RangeError('"value" argument is out of bounds');if(L+ge>Ee.length)throw new RangeError("Index out of range")}b.prototype.writeUIntLE=function(B,L,ge,Xe){if(B=+B,L=L>>>0,ge=ge>>>0,!Xe){var tt=Math.pow(2,8*ge)-1;Ze(this,B,L,ge,tt,0)}var ht=1,ue=0;for(this[L]=B&255;++ue<ge&&(ht*=256);)this[L+ue]=B/ht&255;return L+ge},b.prototype.writeUIntBE=function(B,L,ge,Xe){if(B=+B,L=L>>>0,ge=ge>>>0,!Xe){var tt=Math.pow(2,8*ge)-1;Ze(this,B,L,ge,tt,0)}var ht=ge-1,ue=1;for(this[L+ht]=B&255;--ht>=0&&(ue*=256);)this[L+ht]=B/ue&255;return L+ge},b.prototype.writeUInt8=function(B,L,ge){return B=+B,L=L>>>0,ge||Ze(this,B,L,1,255,0),this[L]=B&255,L+1},b.prototype.writeUInt16LE=function(B,L,ge){return B=+B,L=L>>>0,ge||Ze(this,B,L,2,65535,0),this[L]=B&255,this[L+1]=B>>>8,L+2},b.prototype.writeUInt16BE=function(B,L,ge){return B=+B,L=L>>>0,ge||Ze(this,B,L,2,65535,0),this[L]=B>>>8,this[L+1]=B&255,L+2},b.prototype.writeUInt32LE=function(B,L,ge){return B=+B,L=L>>>0,ge||Ze(this,B,L,4,4294967295,0),this[L+3]=B>>>24,this[L+2]=B>>>16,this[L+1]=B>>>8,this[L]=B&255,L+4},b.prototype.writeUInt32BE=function(B,L,ge){return B=+B,L=L>>>0,ge||Ze(this,B,L,4,4294967295,0),this[L]=B>>>24,this[L+1]=B>>>16,this[L+2]=B>>>8,this[L+3]=B&255,L+4},b.prototype.writeIntLE=function(B,L,ge,Xe){if(B=+B,L=L>>>0,!Xe){var tt=Math.pow(2,8*ge-1);Ze(this,B,L,ge,tt-1,-tt)}var ht=0,ue=1,k=0;for(this[L]=B&255;++ht<ge&&(ue*=256);)B<0&&k===0&&this[L+ht-1]!==0&&(k=1),this[L+ht]=(B/ue>>0)-k&255;return L+ge},b.prototype.writeIntBE=function(B,L,ge,Xe){if(B=+B,L=L>>>0,!Xe){var tt=Math.pow(2,8*ge-1);Ze(this,B,L,ge,tt-1,-tt)}var ht=ge-1,ue=1,k=0;for(this[L+ht]=B&255;--ht>=0&&(ue*=256);)B<0&&k===0&&this[L+ht+1]!==0&&(k=1),this[L+ht]=(B/ue>>0)-k&255;return L+ge},b.prototype.writeInt8=function(B,L,ge){return B=+B,L=L>>>0,ge||Ze(this,B,L,1,127,-128),B<0&&(B=255+B+1),this[L]=B&255,L+1},b.prototype.writeInt16LE=function(B,L,ge){return B=+B,L=L>>>0,ge||Ze(this,B,L,2,32767,-32768),this[L]=B&255,this[L+1]=B>>>8,L+2},b.prototype.writeInt16BE=function(B,L,ge){return B=+B,L=L>>>0,ge||Ze(this,B,L,2,32767,-32768),this[L]=B>>>8,this[L+1]=B&255,L+2},b.prototype.writeInt32LE=function(B,L,ge){return B=+B,L=L>>>0,ge||Ze(this,B,L,4,2147483647,-2147483648),this[L]=B&255,this[L+1]=B>>>8,this[L+2]=B>>>16,this[L+3]=B>>>24,L+4},b.prototype.writeInt32BE=function(B,L,ge){return B=+B,L=L>>>0,ge||Ze(this,B,L,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),this[L]=B>>>24,this[L+1]=B>>>16,this[L+2]=B>>>8,this[L+3]=B&255,L+4};function it(Ee,B,L,ge,Xe,tt){if(L+ge>Ee.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("Index out of range")}function ct(Ee,B,L,ge,Xe){return B=+B,L=L>>>0,Xe||it(Ee,B,L,4),u.write(Ee,B,L,ge,23,4),L+4}b.prototype.writeFloatLE=function(B,L,ge){return ct(this,B,L,!0,ge)},b.prototype.writeFloatBE=function(B,L,ge){return ct(this,B,L,!1,ge)};function vt(Ee,B,L,ge,Xe){return B=+B,L=L>>>0,Xe||it(Ee,B,L,8),u.write(Ee,B,L,ge,52,8),L+8}b.prototype.writeDoubleLE=function(B,L,ge){return vt(this,B,L,!0,ge)},b.prototype.writeDoubleBE=function(B,L,ge){return vt(this,B,L,!1,ge)},b.prototype.copy=function(B,L,ge,Xe){if(!b.isBuffer(B))throw new TypeError("argument should be a Buffer");if(ge||(ge=0),!Xe&&Xe!==0&&(Xe=this.length),L>=B.length&&(L=B.length),L||(L=0),Xe>0&&Xe<ge&&(Xe=ge),Xe===ge||B.length===0||this.length===0)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(Xe<0)throw new RangeError("sourceEnd out of bounds");Xe>this.length&&(Xe=this.length),B.length-L<Xe-ge&&(Xe=B.length-L+ge);var tt=Xe-ge;if(this===B&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(L,ge,Xe);else if(this===B&&ge<L&&L<Xe)for(var ht=tt-1;ht>=0;--ht)B[ht+L]=this[ht+ge];else Uint8Array.prototype.set.call(B,this.subarray(ge,Xe),L);return tt},b.prototype.fill=function(B,L,ge,Xe){if(typeof B=="string"){if(typeof L=="string"?(Xe=L,L=0,ge=this.length):typeof ge=="string"&&(Xe=ge,ge=this.length),Xe!==void 0&&typeof Xe!="string")throw new TypeError("encoding must be a string");if(typeof Xe=="string"&&!b.isEncoding(Xe))throw new TypeError("Unknown encoding: "+Xe);if(B.length===1){var tt=B.charCodeAt(0);(Xe==="utf8"&&tt<128||Xe==="latin1")&&(B=tt)}}else typeof B=="number"&&(B=B&255);if(L<0||this.length<L||this.length<ge)throw new RangeError("Out of range index");if(ge<=L)return this;L=L>>>0,ge=ge===void 0?this.length:ge>>>0,B||(B=0);var ht;if(typeof B=="number")for(ht=L;ht<ge;++ht)this[ht]=B;else{var ue=b.isBuffer(B)?B:b.from(B,Xe),k=ue.length;if(k===0)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(ht=0;ht<ge-L;++ht)this[ht+L]=ue[ht%k]}return this};var Mt=/[^+/0-9A-Za-z-_]/g;function pt(Ee){if(Ee=Ee.split("=")[0],Ee=Ee.trim().replace(Mt,""),Ee.length<2)return"";for(;Ee.length%4!==0;)Ee=Ee+"=";return Ee}function xt(Ee){return Ee<16?"0"+Ee.toString(16):Ee.toString(16)}function Gt(Ee,B){B=B||1/0;for(var L,ge=Ee.length,Xe=null,tt=[],ht=0;ht<ge;++ht){if(L=Ee.charCodeAt(ht),L>55295&&L<57344){if(!Xe){if(L>56319){(B-=3)>-1&&tt.push(239,191,189);continue}else if(ht+1===ge){(B-=3)>-1&&tt.push(239,191,189);continue}Xe=L;continue}if(L<56320){(B-=3)>-1&&tt.push(239,191,189),Xe=L;continue}L=(Xe-55296<<10|L-56320)+65536}else Xe&&(B-=3)>-1&&tt.push(239,191,189);if(Xe=null,L<128){if((B-=1)<0)break;tt.push(L)}else if(L<2048){if((B-=2)<0)break;tt.push(L>>6|192,L&63|128)}else if(L<65536){if((B-=3)<0)break;tt.push(L>>12|224,L>>6&63|128,L&63|128)}else if(L<1114112){if((B-=4)<0)break;tt.push(L>>18|240,L>>12&63|128,L>>6&63|128,L&63|128)}else throw new Error("Invalid code point")}return tt}function Ht(Ee){for(var B=[],L=0;L<Ee.length;++L)B.push(Ee.charCodeAt(L)&255);return B}function an(Ee,B){for(var L,ge,Xe,tt=[],ht=0;ht<Ee.length&&!((B-=2)<0);++ht)L=Ee.charCodeAt(ht),ge=L>>8,Xe=L%256,tt.push(Xe),tt.push(ge);return tt}function et(Ee){return p.toByteArray(pt(Ee))}function vn(Ee,B,L,ge){for(var Xe=0;Xe<ge&&!(Xe+L>=B.length||Xe>=Ee.length);++Xe)B[Xe+L]=Ee[Xe];return Xe}function ln(Ee,B){return Ee instanceof B||Ee!=null&&Ee.constructor!=null&&Ee.constructor.name!=null&&Ee.constructor.name===B.name}function Vt(Ee){return Ee!==Ee}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,l,c){const g=i("./validator"),p=i("./xmlparser/XMLParser"),u=i("./xmlbuilder/json2xml");l.exports={XMLParser:p,XMLValidator:g,XMLBuilder:u}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,l,c){const g=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",p=g+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",u="["+g+"]["+p+"]*",E=new RegExp("^"+u+"$"),I=function(b,C){const R=[];let N=C.exec(b);for(;N;){const O=[];O.startIndex=C.lastIndex-N[0].length;const he=N.length;for(let K=0;K<he;K++)O.push(N[K]);R.push(O),N=C.exec(b)}return R},M=function(b){const C=E.exec(b);return!(C===null||typeof C>"u")};c.isExist=function(b){return typeof b<"u"},c.isEmptyObject=function(b){return Object.keys(b).length===0},c.merge=function(b,C,R){if(C){const N=Object.keys(C),O=N.length;for(let he=0;he<O;he++)R==="strict"?b[N[he]]=[C[N[he]]]:b[N[he]]=C[N[he]]}},c.getValue=function(b){return c.isExist(b)?b:""},c.isName=M,c.getAllMatches=I,c.nameRegexp=u},{}],5:[function(i,l,c){const g=i("./util"),p={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(H,T){T=Object.assign({},p,T);const j=[];let D=!1,te=!1;H[0]==="\uFEFF"&&(H=H.substr(1));for(let W=0;W<H.length;W++)if(H[W]==="<"&&H[W+1]==="?"){if(W+=2,W=E(H,W),W.err)return W}else if(H[W]==="<"){let ve=W;if(W++,H[W]==="!"){W=I(H,W);continue}else{let _e=!1;H[W]==="/"&&(_e=!0,W++);let pe="";for(;W<H.length&&H[W]!==">"&&H[W]!==" "&&H[W]!=="	"&&H[W]!==`
`&&H[W]!=="\r";W++)pe+=H[W];if(pe=pe.trim(),pe[pe.length-1]==="/"&&(pe=pe.substring(0,pe.length-1),W--),!G(pe)){let ee;return pe.trim().length===0?ee="Invalid space after '<'.":ee="Tag '"+pe+"' is an invalid name.",K("InvalidTag",ee,ae(H,W))}const oe=C(H,W);if(oe===!1)return K("InvalidAttr","Attributes for '"+pe+"' have open quote.",ae(H,W));let ce=oe.value;if(W=oe.index,ce[ce.length-1]==="/"){const ee=W-ce.length;ce=ce.substring(0,ce.length-1);const re=N(ce,T);if(re===!0)D=!0;else return K(re.err.code,re.err.msg,ae(H,ee+re.err.line))}else if(_e)if(oe.tagClosed){if(ce.trim().length>0)return K("InvalidTag","Closing tag '"+pe+"' can't have attributes or invalid starting.",ae(H,ve));{const ee=j.pop();if(pe!==ee.tagName){let re=ae(H,ee.tagStartPos);return K("InvalidTag","Expected closing tag '"+ee.tagName+"' (opened in line "+re.line+", col "+re.col+") instead of closing tag '"+pe+"'.",ae(H,ve))}j.length==0&&(te=!0)}}else return K("InvalidTag","Closing tag '"+pe+"' doesn't have proper closing.",ae(H,W));else{const ee=N(ce,T);if(ee!==!0)return K(ee.err.code,ee.err.msg,ae(H,W-ce.length+ee.err.line));if(te===!0)return K("InvalidXml","Multiple possible root nodes found.",ae(H,W));T.unpairedTags.indexOf(pe)!==-1||j.push({tagName:pe,tagStartPos:ve}),D=!0}for(W++;W<H.length;W++)if(H[W]==="<")if(H[W+1]==="!"){W++,W=I(H,W);continue}else if(H[W+1]==="?"){if(W=E(H,++W),W.err)return W}else break;else if(H[W]==="&"){const ee=he(H,W);if(ee==-1)return K("InvalidChar","char '&' is not expected.",ae(H,W));W=ee}else if(te===!0&&!u(H[W]))return K("InvalidXml","Extra text at the end",ae(H,W));H[W]==="<"&&W--}}else{if(u(H[W]))continue;return K("InvalidChar","char '"+H[W]+"' is not expected.",ae(H,W))}if(D){if(j.length==1)return K("InvalidTag","Unclosed tag '"+j[0].tagName+"'.",ae(H,j[0].tagStartPos));if(j.length>0)return K("InvalidXml","Invalid '"+JSON.stringify(j.map(W=>W.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return K("InvalidXml","Start tag expected.",1);return!0};function u(H){return H===" "||H==="	"||H===`
`||H==="\r"}function E(H,T){const j=T;for(;T<H.length;T++)if(H[T]=="?"||H[T]==" "){const D=H.substr(j,T-j);if(T>5&&D==="xml")return K("InvalidXml","XML declaration allowed only at the start of the document.",ae(H,T));if(H[T]=="?"&&H[T+1]==">"){T++;break}else continue}return T}function I(H,T){if(H.length>T+5&&H[T+1]==="-"&&H[T+2]==="-"){for(T+=3;T<H.length;T++)if(H[T]==="-"&&H[T+1]==="-"&&H[T+2]===">"){T+=2;break}}else if(H.length>T+8&&H[T+1]==="D"&&H[T+2]==="O"&&H[T+3]==="C"&&H[T+4]==="T"&&H[T+5]==="Y"&&H[T+6]==="P"&&H[T+7]==="E"){let j=1;for(T+=8;T<H.length;T++)if(H[T]==="<")j++;else if(H[T]===">"&&(j--,j===0))break}else if(H.length>T+9&&H[T+1]==="["&&H[T+2]==="C"&&H[T+3]==="D"&&H[T+4]==="A"&&H[T+5]==="T"&&H[T+6]==="A"&&H[T+7]==="["){for(T+=8;T<H.length;T++)if(H[T]==="]"&&H[T+1]==="]"&&H[T+2]===">"){T+=2;break}}return T}const M='"',b="'";function C(H,T){let j="",D="",te=!1;for(;T<H.length;T++){if(H[T]===M||H[T]===b)D===""?D=H[T]:D!==H[T]||(D="");else if(H[T]===">"&&D===""){te=!0;break}j+=H[T]}return D!==""?!1:{value:j,index:T,tagClosed:te}}const R=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function N(H,T){const j=g.getAllMatches(H,R),D={};for(let te=0;te<j.length;te++){if(j[te][1].length===0)return K("InvalidAttr","Attribute '"+j[te][2]+"' has no space in starting.",q(j[te]));if(j[te][3]!==void 0&&j[te][4]===void 0)return K("InvalidAttr","Attribute '"+j[te][2]+"' is without value.",q(j[te]));if(j[te][3]===void 0&&!T.allowBooleanAttributes)return K("InvalidAttr","boolean attribute '"+j[te][2]+"' is not allowed.",q(j[te]));const W=j[te][2];if(!X(W))return K("InvalidAttr","Attribute '"+W+"' is an invalid name.",q(j[te]));if(!D.hasOwnProperty(W))D[W]=1;else return K("InvalidAttr","Attribute '"+W+"' is repeated.",q(j[te]))}return!0}function O(H,T){let j=/\d/;for(H[T]==="x"&&(T++,j=/[\da-fA-F]/);T<H.length;T++){if(H[T]===";")return T;if(!H[T].match(j))break}return-1}function he(H,T){if(T++,H[T]===";")return-1;if(H[T]==="#")return T++,O(H,T);let j=0;for(;T<H.length;T++,j++)if(!(H[T].match(/\w/)&&j<20)){if(H[T]===";")break;return-1}return T}function K(H,T,j){return{err:{code:H,msg:T,line:j.line||j,col:j.col}}}function X(H){return g.isName(H)}function G(H){return g.isName(H)}function ae(H,T){const j=H.substring(0,T).split(/\r?\n/);return{line:j.length,col:j[j.length-1].length+1}}function q(H){return H.startIndex+H[1].length}},{"./util":4}],6:[function(i,l,c){const g=i("./orderedJs2Xml"),p={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(b,C){return C},attributeValueProcessor:function(b,C){return C},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function u(b){this.options=Object.assign({},p,b),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=M),this.processTextOrObjNode=E,this.options.format?(this.indentate=I,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}u.prototype.build=function(b){return this.options.preserveOrder?g(b,this.options):(Array.isArray(b)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(b={[this.options.arrayNodeName]:b}),this.j2x(b,0).val)},u.prototype.j2x=function(b,C){let R="",N="";for(let O in b)if(Object.prototype.hasOwnProperty.call(b,O))if(typeof b[O]>"u")this.isAttribute(O)&&(N+="");else if(b[O]===null)this.isAttribute(O)?N+="":O[0]==="?"?N+=this.indentate(C)+"<"+O+"?"+this.tagEndChar:N+=this.indentate(C)+"<"+O+"/"+this.tagEndChar;else if(b[O]instanceof Date)N+=this.buildTextValNode(b[O],O,"",C);else if(typeof b[O]!="object"){const he=this.isAttribute(O);if(he)R+=this.buildAttrPairStr(he,""+b[O]);else if(O===this.options.textNodeName){let K=this.options.tagValueProcessor(O,""+b[O]);N+=this.replaceEntitiesValue(K)}else N+=this.buildTextValNode(b[O],O,"",C)}else if(Array.isArray(b[O])){const he=b[O].length;let K="";for(let X=0;X<he;X++){const G=b[O][X];typeof G>"u"||(G===null?O[0]==="?"?N+=this.indentate(C)+"<"+O+"?"+this.tagEndChar:N+=this.indentate(C)+"<"+O+"/"+this.tagEndChar:typeof G=="object"?this.options.oneListGroup?K+=this.j2x(G,C+1).val:K+=this.processTextOrObjNode(G,O,C):K+=this.buildTextValNode(G,O,"",C))}this.options.oneListGroup&&(K=this.buildObjectNode(K,O,"",C)),N+=K}else if(this.options.attributesGroupName&&O===this.options.attributesGroupName){const he=Object.keys(b[O]),K=he.length;for(let X=0;X<K;X++)R+=this.buildAttrPairStr(he[X],""+b[O][he[X]])}else N+=this.processTextOrObjNode(b[O],O,C);return{attrStr:R,val:N}},u.prototype.buildAttrPairStr=function(b,C){return C=this.options.attributeValueProcessor(b,""+C),C=this.replaceEntitiesValue(C),this.options.suppressBooleanAttributes&&C==="true"?" "+b:" "+b+'="'+C+'"'};function E(b,C,R){const N=this.j2x(b,R+1);return b[this.options.textNodeName]!==void 0&&Object.keys(b).length===1?this.buildTextValNode(b[this.options.textNodeName],C,N.attrStr,R):this.buildObjectNode(N.val,C,N.attrStr,R)}u.prototype.buildObjectNode=function(b,C,R,N){if(b==="")return C[0]==="?"?this.indentate(N)+"<"+C+R+"?"+this.tagEndChar:this.indentate(N)+"<"+C+R+this.closeTag(C)+this.tagEndChar;{let O="</"+C+this.tagEndChar,he="";return C[0]==="?"&&(he="?",O=""),(R||R==="")&&b.indexOf("<")===-1?this.indentate(N)+"<"+C+R+he+">"+b+O:this.options.commentPropName!==!1&&C===this.options.commentPropName&&he.length===0?this.indentate(N)+`<!--${b}-->`+this.newLine:this.indentate(N)+"<"+C+R+he+this.tagEndChar+b+this.indentate(N)+O}},u.prototype.closeTag=function(b){let C="";return this.options.unpairedTags.indexOf(b)!==-1?this.options.suppressUnpairedNode||(C="/"):this.options.suppressEmptyNode?C="/":C=`></${b}`,C},u.prototype.buildTextValNode=function(b,C,R,N){if(this.options.cdataPropName!==!1&&C===this.options.cdataPropName)return this.indentate(N)+`<![CDATA[${b}]]>`+this.newLine;if(this.options.commentPropName!==!1&&C===this.options.commentPropName)return this.indentate(N)+`<!--${b}-->`+this.newLine;if(C[0]==="?")return this.indentate(N)+"<"+C+R+"?"+this.tagEndChar;{let O=this.options.tagValueProcessor(C,b);return O=this.replaceEntitiesValue(O),O===""?this.indentate(N)+"<"+C+R+this.closeTag(C)+this.tagEndChar:this.indentate(N)+"<"+C+R+">"+O+"</"+C+this.tagEndChar}},u.prototype.replaceEntitiesValue=function(b){if(b&&b.length>0&&this.options.processEntities)for(let C=0;C<this.options.entities.length;C++){const R=this.options.entities[C];b=b.replace(R.regex,R.val)}return b};function I(b){return this.options.indentBy.repeat(b)}function M(b){return b.startsWith(this.options.attributeNamePrefix)&&b!==this.options.textNodeName?b.substr(this.attrPrefixLen):!1}l.exports=u},{"./orderedJs2Xml":7}],7:[function(i,l,c){const g=`
`;function p(C,R){let N="";return R.format&&R.indentBy.length>0&&(N=g),u(C,R,"",N)}function u(C,R,N,O){let he="",K=!1;for(let X=0;X<C.length;X++){const G=C[X],ae=E(G);if(ae===void 0)continue;let q="";if(N.length===0?q=ae:q=`${N}.${ae}`,ae===R.textNodeName){let te=G[ae];M(q,R)||(te=R.tagValueProcessor(ae,te),te=b(te,R)),K&&(he+=O),he+=te,K=!1;continue}else if(ae===R.cdataPropName){K&&(he+=O),he+=`<![CDATA[${G[ae][0][R.textNodeName]}]]>`,K=!1;continue}else if(ae===R.commentPropName){he+=O+`<!--${G[ae][0][R.textNodeName]}-->`,K=!0;continue}else if(ae[0]==="?"){const te=I(G[":@"],R),W=ae==="?xml"?"":O;let ve=G[ae][0][R.textNodeName];ve=ve.length!==0?" "+ve:"",he+=W+`<${ae}${ve}${te}?>`,K=!0;continue}let H=O;H!==""&&(H+=R.indentBy);const T=I(G[":@"],R),j=O+`<${ae}${T}`,D=u(G[ae],R,q,H);R.unpairedTags.indexOf(ae)!==-1?R.suppressUnpairedNode?he+=j+">":he+=j+"/>":(!D||D.length===0)&&R.suppressEmptyNode?he+=j+"/>":D&&D.endsWith(">")?he+=j+`>${D}${O}</${ae}>`:(he+=j+">",D&&O!==""&&(D.includes("/>")||D.includes("</"))?he+=O+R.indentBy+D+O:he+=D,he+=`</${ae}>`),K=!0}return he}function E(C){const R=Object.keys(C);for(let N=0;N<R.length;N++){const O=R[N];if(C.hasOwnProperty(O)&&O!==":@")return O}}function I(C,R){let N="";if(C&&!R.ignoreAttributes)for(let O in C){if(!C.hasOwnProperty(O))continue;let he=R.attributeValueProcessor(O,C[O]);he=b(he,R),he===!0&&R.suppressBooleanAttributes?N+=` ${O.substr(R.attributeNamePrefix.length)}`:N+=` ${O.substr(R.attributeNamePrefix.length)}="${he}"`}return N}function M(C,R){C=C.substr(0,C.length-R.textNodeName.length-1);let N=C.substr(C.lastIndexOf(".")+1);for(let O in R.stopNodes)if(R.stopNodes[O]===C||R.stopNodes[O]==="*."+N)return!0;return!1}function b(C,R){if(C&&C.length>0&&R.processEntities)for(let N=0;N<R.entities.length;N++){const O=R.entities[N];C=C.replace(O.regex,O.val)}return C}l.exports=p},{}],8:[function(i,l,c){const g=i("../util");function p(N,O){const he={};if(N[O+3]==="O"&&N[O+4]==="C"&&N[O+5]==="T"&&N[O+6]==="Y"&&N[O+7]==="P"&&N[O+8]==="E"){O=O+9;let K=1,X=!1,G=!1,ae="";for(;O<N.length;O++)if(N[O]==="<"&&!G){if(X&&I(N,O))O+=7,[entityName,val,O]=u(N,O+1),val.indexOf("&")===-1&&(he[R(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(X&&M(N,O))O+=8;else if(X&&b(N,O))O+=8;else if(X&&C(N,O))O+=9;else if(E)G=!0;else throw new Error("Invalid DOCTYPE");K++,ae=""}else if(N[O]===">"){if(G?N[O-1]==="-"&&N[O-2]==="-"&&(G=!1,K--):K--,K===0)break}else N[O]==="["?X=!0:ae+=N[O];if(K!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:he,i:O}}function u(N,O){let he="";for(;O<N.length&&N[O]!=="'"&&N[O]!=='"';O++)he+=N[O];if(he=he.trim(),he.indexOf(" ")!==-1)throw new Error("External entites are not supported");const K=N[O++];let X="";for(;O<N.length&&N[O]!==K;O++)X+=N[O];return[he,X,O]}function E(N,O){return N[O+1]==="!"&&N[O+2]==="-"&&N[O+3]==="-"}function I(N,O){return N[O+1]==="!"&&N[O+2]==="E"&&N[O+3]==="N"&&N[O+4]==="T"&&N[O+5]==="I"&&N[O+6]==="T"&&N[O+7]==="Y"}function M(N,O){return N[O+1]==="!"&&N[O+2]==="E"&&N[O+3]==="L"&&N[O+4]==="E"&&N[O+5]==="M"&&N[O+6]==="E"&&N[O+7]==="N"&&N[O+8]==="T"}function b(N,O){return N[O+1]==="!"&&N[O+2]==="A"&&N[O+3]==="T"&&N[O+4]==="T"&&N[O+5]==="L"&&N[O+6]==="I"&&N[O+7]==="S"&&N[O+8]==="T"}function C(N,O){return N[O+1]==="!"&&N[O+2]==="N"&&N[O+3]==="O"&&N[O+4]==="T"&&N[O+5]==="A"&&N[O+6]==="T"&&N[O+7]==="I"&&N[O+8]==="O"&&N[O+9]==="N"}function R(N){if(g.isName(N))return N;throw new Error(`Invalid entity name ${N}`)}l.exports=p},{"../util":4}],9:[function(i,l,c){const g={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(u,E){return E},attributeValueProcessor:function(u,E){return E},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(u,E,I){return u}},p=function(u){return Object.assign({},g,u)};c.buildOptions=p,c.defaultOptions=g},{}],10:[function(i,l,c){const g=i("../util"),p=i("./xmlNode"),u=i("./DocTypeReader"),E=i("strnum");class I{constructor(te){this.options=te,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=M,this.parseXml=O,this.parseTextData=b,this.resolveNameSpace=C,this.buildAttributesMap=N,this.isItStopNode=G,this.replaceEntitiesValue=K,this.readStopNodeData=T,this.saveTextToParentTag=X,this.addChild=he}}function M(D){const te=Object.keys(D);for(let W=0;W<te.length;W++){const ve=te[W];this.lastEntities[ve]={regex:new RegExp("&"+ve+";","g"),val:D[ve]}}}function b(D,te,W,ve,_e,pe,oe){if(D!==void 0&&(this.options.trimValues&&!ve&&(D=D.trim()),D.length>0)){oe||(D=this.replaceEntitiesValue(D));const ce=this.options.tagValueProcessor(te,D,W,_e,pe);return ce==null?D:typeof ce!=typeof D||ce!==D?ce:this.options.trimValues?j(D,this.options.parseTagValue,this.options.numberParseOptions):D.trim()===D?j(D,this.options.parseTagValue,this.options.numberParseOptions):D}}function C(D){if(this.options.removeNSPrefix){const te=D.split(":"),W=D.charAt(0)==="/"?"/":"";if(te[0]==="xmlns")return"";te.length===2&&(D=W+te[1])}return D}const R=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function N(D,te,W){if(!this.options.ignoreAttributes&&typeof D=="string"){const ve=g.getAllMatches(D,R),_e=ve.length,pe={};for(let oe=0;oe<_e;oe++){const ce=this.resolveNameSpace(ve[oe][1]);let ee=ve[oe][4],re=this.options.attributeNamePrefix+ce;if(ce.length)if(this.options.transformAttributeName&&(re=this.options.transformAttributeName(re)),re==="__proto__"&&(re="#__proto__"),ee!==void 0){this.options.trimValues&&(ee=ee.trim()),ee=this.replaceEntitiesValue(ee);const fe=this.options.attributeValueProcessor(ce,ee,te);fe==null?pe[re]=ee:typeof fe!=typeof ee||fe!==ee?pe[re]=fe:pe[re]=j(ee,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(pe[re]=!0)}if(!Object.keys(pe).length)return;if(this.options.attributesGroupName){const oe={};return oe[this.options.attributesGroupName]=pe,oe}return pe}}const O=function(D){D=D.replace(/\r\n?/g,`
`);const te=new p("!xml");let W=te,ve="",_e="";for(let pe=0;pe<D.length;pe++)if(D[pe]==="<")if(D[pe+1]==="/"){const ce=q(D,">",pe,"Closing Tag is not closed.");let ee=D.substring(pe+2,ce).trim();if(this.options.removeNSPrefix){const Se=ee.indexOf(":");Se!==-1&&(ee=ee.substr(Se+1))}this.options.transformTagName&&(ee=this.options.transformTagName(ee)),W&&(ve=this.saveTextToParentTag(ve,W,_e));const re=_e.substring(_e.lastIndexOf(".")+1);if(ee&&this.options.unpairedTags.indexOf(ee)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${ee}>`);let fe=0;re&&this.options.unpairedTags.indexOf(re)!==-1?(fe=_e.lastIndexOf(".",_e.lastIndexOf(".")-1),this.tagsNodeStack.pop()):fe=_e.lastIndexOf("."),_e=_e.substring(0,fe),W=this.tagsNodeStack.pop(),ve="",pe=ce}else if(D[pe+1]==="?"){let ce=H(D,pe,!1,"?>");if(!ce)throw new Error("Pi Tag is not closed.");if(ve=this.saveTextToParentTag(ve,W,_e),!(this.options.ignoreDeclaration&&ce.tagName==="?xml"||this.options.ignorePiTags)){const ee=new p(ce.tagName);ee.add(this.options.textNodeName,""),ce.tagName!==ce.tagExp&&ce.attrExpPresent&&(ee[":@"]=this.buildAttributesMap(ce.tagExp,_e,ce.tagName)),this.addChild(W,ee,_e)}pe=ce.closeIndex+1}else if(D.substr(pe+1,3)==="!--"){const ce=q(D,"-->",pe+4,"Comment is not closed.");if(this.options.commentPropName){const ee=D.substring(pe+4,ce-2);ve=this.saveTextToParentTag(ve,W,_e),W.add(this.options.commentPropName,[{[this.options.textNodeName]:ee}])}pe=ce}else if(D.substr(pe+1,2)==="!D"){const ce=u(D,pe);this.docTypeEntities=ce.entities,pe=ce.i}else if(D.substr(pe+1,2)==="!["){const ce=q(D,"]]>",pe,"CDATA is not closed.")-2,ee=D.substring(pe+9,ce);if(ve=this.saveTextToParentTag(ve,W,_e),this.options.cdataPropName)W.add(this.options.cdataPropName,[{[this.options.textNodeName]:ee}]);else{let re=this.parseTextData(ee,W.tagname,_e,!0,!1,!0);re==null&&(re=""),W.add(this.options.textNodeName,re)}pe=ce+2}else{let ce=H(D,pe,this.options.removeNSPrefix),ee=ce.tagName;const re=ce.rawTagName;let fe=ce.tagExp,Se=ce.attrExpPresent,Ie=ce.closeIndex;this.options.transformTagName&&(ee=this.options.transformTagName(ee)),W&&ve&&W.tagname!=="!xml"&&(ve=this.saveTextToParentTag(ve,W,_e,!1));const Ne=W;if(Ne&&this.options.unpairedTags.indexOf(Ne.tagname)!==-1&&(W=this.tagsNodeStack.pop(),_e=_e.substring(0,_e.lastIndexOf("."))),ee!==te.tagname&&(_e+=_e?"."+ee:ee),this.isItStopNode(this.options.stopNodes,_e,ee)){let Ae="";if(fe.length>0&&fe.lastIndexOf("/")===fe.length-1)pe=ce.closeIndex;else if(this.options.unpairedTags.indexOf(ee)!==-1)pe=ce.closeIndex;else{const He=this.readStopNodeData(D,re,Ie+1);if(!He)throw new Error(`Unexpected end of ${re}`);pe=He.i,Ae=He.tagContent}const ze=new p(ee);ee!==fe&&Se&&(ze[":@"]=this.buildAttributesMap(fe,_e,ee)),Ae&&(Ae=this.parseTextData(Ae,ee,_e,!0,Se,!0,!0)),_e=_e.substr(0,_e.lastIndexOf(".")),ze.add(this.options.textNodeName,Ae),this.addChild(W,ze,_e)}else{if(fe.length>0&&fe.lastIndexOf("/")===fe.length-1){ee[ee.length-1]==="/"?(ee=ee.substr(0,ee.length-1),_e=_e.substr(0,_e.length-1),fe=ee):fe=fe.substr(0,fe.length-1),this.options.transformTagName&&(ee=this.options.transformTagName(ee));const Ae=new p(ee);ee!==fe&&Se&&(Ae[":@"]=this.buildAttributesMap(fe,_e,ee)),this.addChild(W,Ae,_e),_e=_e.substr(0,_e.lastIndexOf("."))}else{const Ae=new p(ee);this.tagsNodeStack.push(W),ee!==fe&&Se&&(Ae[":@"]=this.buildAttributesMap(fe,_e,ee)),this.addChild(W,Ae,_e),W=Ae}ve="",pe=Ie}}else ve+=D[pe];return te.child};function he(D,te,W){const ve=this.options.updateTag(te.tagname,W,te[":@"]);ve===!1||(typeof ve=="string"&&(te.tagname=ve),D.addChild(te))}const K=function(D){if(this.options.processEntities){for(let te in this.docTypeEntities){const W=this.docTypeEntities[te];D=D.replace(W.regx,W.val)}for(let te in this.lastEntities){const W=this.lastEntities[te];D=D.replace(W.regex,W.val)}if(this.options.htmlEntities)for(let te in this.htmlEntities){const W=this.htmlEntities[te];D=D.replace(W.regex,W.val)}D=D.replace(this.ampEntity.regex,this.ampEntity.val)}return D};function X(D,te,W,ve){return D&&(ve===void 0&&(ve=Object.keys(te.child).length===0),D=this.parseTextData(D,te.tagname,W,!1,te[":@"]?Object.keys(te[":@"]).length!==0:!1,ve),D!==void 0&&D!==""&&te.add(this.options.textNodeName,D),D=""),D}function G(D,te,W){const ve="*."+W;for(const _e in D){const pe=D[_e];if(ve===pe||te===pe)return!0}return!1}function ae(D,te,W=">"){let ve,_e="";for(let pe=te;pe<D.length;pe++){let oe=D[pe];if(ve)oe===ve&&(ve="");else if(oe==='"'||oe==="'")ve=oe;else if(oe===W[0])if(W[1]){if(D[pe+1]===W[1])return{data:_e,index:pe}}else return{data:_e,index:pe};else oe==="	"&&(oe=" ");_e+=oe}}function q(D,te,W,ve){const _e=D.indexOf(te,W);if(_e===-1)throw new Error(ve);return _e+te.length-1}function H(D,te,W,ve=">"){const _e=ae(D,te+1,ve);if(!_e)return;let pe=_e.data;const oe=_e.index,ce=pe.search(/\s/);let ee=pe,re=!0;ce!==-1&&(ee=pe.substring(0,ce),pe=pe.substring(ce+1).trimStart());const fe=ee;if(W){const Se=ee.indexOf(":");Se!==-1&&(ee=ee.substr(Se+1),re=ee!==_e.data.substr(Se+1))}return{tagName:ee,tagExp:pe,closeIndex:oe,attrExpPresent:re,rawTagName:fe}}function T(D,te,W){const ve=W;let _e=1;for(;W<D.length;W++)if(D[W]==="<")if(D[W+1]==="/"){const pe=q(D,">",W,`${te} is not closed`);if(D.substring(W+2,pe).trim()===te&&(_e--,_e===0))return{tagContent:D.substring(ve,W),i:pe};W=pe}else if(D[W+1]==="?")W=q(D,"?>",W+1,"StopNode is not closed.");else if(D.substr(W+1,3)==="!--")W=q(D,"-->",W+3,"StopNode is not closed.");else if(D.substr(W+1,2)==="![")W=q(D,"]]>",W,"StopNode is not closed.")-2;else{const pe=H(D,W,">");pe&&((pe&&pe.tagName)===te&&pe.tagExp[pe.tagExp.length-1]!=="/"&&_e++,W=pe.closeIndex)}}function j(D,te,W){if(te&&typeof D=="string"){const ve=D.trim();return ve==="true"?!0:ve==="false"?!1:E(D,W)}else return g.isExist(D)?D:""}l.exports=I},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,l,c){const{buildOptions:g}=i("./OptionsBuilder"),p=i("./OrderedObjParser"),{prettify:u}=i("./node2json"),E=i("../validator");class I{constructor(b){this.externalEntities={},this.options=g(b)}parse(b,C){if(typeof b!="string")if(b.toString)b=b.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(C){C===!0&&(C={});const O=E.validate(b,C);if(O!==!0)throw Error(`${O.err.msg}:${O.err.line}:${O.err.col}`)}const R=new p(this.options);R.addExternalEntities(this.externalEntities);const N=R.parseXml(b);return this.options.preserveOrder||N===void 0?N:u(N,this.options)}addEntity(b,C){if(C.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(b.indexOf("&")!==-1||b.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(C==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[b]=C}}l.exports=I},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,l,c){function g(M,b){return p(M,b)}function p(M,b,C){let R;const N={};for(let O=0;O<M.length;O++){const he=M[O],K=u(he);let X="";if(C===void 0?X=K:X=C+"."+K,K===b.textNodeName)R===void 0?R=he[K]:R+=""+he[K];else{if(K===void 0)continue;if(he[K]){let G=p(he[K],b,X);const ae=I(G,b);he[":@"]?E(G,he[":@"],X,b):Object.keys(G).length===1&&G[b.textNodeName]!==void 0&&!b.alwaysCreateTextNode?G=G[b.textNodeName]:Object.keys(G).length===0&&(b.alwaysCreateTextNode?G[b.textNodeName]="":G=""),N[K]!==void 0&&N.hasOwnProperty(K)?(Array.isArray(N[K])||(N[K]=[N[K]]),N[K].push(G)):b.isArray(K,X,ae)?N[K]=[G]:N[K]=G}}}return typeof R=="string"?R.length>0&&(N[b.textNodeName]=R):R!==void 0&&(N[b.textNodeName]=R),N}function u(M){const b=Object.keys(M);for(let C=0;C<b.length;C++){const R=b[C];if(R!==":@")return R}}function E(M,b,C,R){if(b){const N=Object.keys(b),O=N.length;for(let he=0;he<O;he++){const K=N[he];R.isArray(K,C+"."+K,!0,!0)?M[K]=[b[K]]:M[K]=b[K]}}}function I(M,b){const{textNodeName:C}=b,R=Object.keys(M).length;return!!(R===0||R===1&&(M[C]||typeof M[C]=="boolean"||M[C]===0))}c.prettify=g},{}],13:[function(i,l,c){class g{constructor(u){this.tagname=u,this.child=[],this[":@"]={}}add(u,E){u==="__proto__"&&(u="#__proto__"),this.child.push({[u]:E})}addChild(u){u.tagname==="__proto__"&&(u.tagname="#__proto__"),u[":@"]&&Object.keys(u[":@"]).length>0?this.child.push({[u.tagname]:u.child,":@":u[":@"]}):this.child.push({[u.tagname]:u.child})}}l.exports=g},{}],14:[function(i,l,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(g,p,u,E,I){var M,b,C=I*8-E-1,R=(1<<C)-1,N=R>>1,O=-7,he=u?I-1:0,K=u?-1:1,X=g[p+he];for(he+=K,M=X&(1<<-O)-1,X>>=-O,O+=C;O>0;M=M*256+g[p+he],he+=K,O-=8);for(b=M&(1<<-O)-1,M>>=-O,O+=E;O>0;b=b*256+g[p+he],he+=K,O-=8);if(M===0)M=1-N;else{if(M===R)return b?NaN:(X?-1:1)*(1/0);b=b+Math.pow(2,E),M=M-N}return(X?-1:1)*b*Math.pow(2,M-E)},c.write=function(g,p,u,E,I,M){var b,C,R,N=M*8-I-1,O=(1<<N)-1,he=O>>1,K=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=E?0:M-1,G=E?1:-1,ae=p<0||p===0&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(C=isNaN(p)?1:0,b=O):(b=Math.floor(Math.log(p)/Math.LN2),p*(R=Math.pow(2,-b))<1&&(b--,R*=2),b+he>=1?p+=K/R:p+=K*Math.pow(2,1-he),p*R>=2&&(b++,R/=2),b+he>=O?(C=0,b=O):b+he>=1?(C=(p*R-1)*Math.pow(2,I),b=b+he):(C=p*Math.pow(2,he-1)*Math.pow(2,I),b=0));I>=8;g[u+X]=C&255,X+=G,C/=256,I-=8);for(b=b<<I|C,N+=I;N>0;g[u+X]=b&255,X+=G,b/=256,N-=8);g[u+X-G]|=ae*128}},{}],15:[function(i,l,c){const g=/^[-+]?0x[a-fA-F0-9]+$/,p=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const u={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function E(M,b={}){if(b=Object.assign({},u,b),!M||typeof M!="string")return M;let C=M.trim();if(b.skipLike!==void 0&&b.skipLike.test(C))return M;if(b.hex&&g.test(C))return Number.parseInt(C,16);{const R=p.exec(C);if(R){const N=R[1],O=R[2];let he=I(R[3]);const K=R[4]||R[6];if(!b.leadingZeros&&O.length>0&&N&&C[2]!==".")return M;if(!b.leadingZeros&&O.length>0&&!N&&C[1]!==".")return M;{const X=Number(C),G=""+X;return G.search(/[eE]/)!==-1||K?b.eNotation?X:M:C.indexOf(".")!==-1?G==="0"&&he===""||G===he||N&&G==="-"+he?X:M:O?he===G||N+he===G?X:M:C===G||C===N+G?X:M}}else return M}}function I(M){return M&&M.indexOf(".")!==-1&&(M=M.replace(/0+$/,""),M==="."?M="0":M[0]==="."?M="0"+M:M[M.length-1]==="."&&(M=M.substr(0,M.length-1))),M}l.exports=E},{}],16:[function(i,l,c){(function(g){(function(){var p=this&&this.__awaiter||function(C,R,N,O){function he(K){return K instanceof N?K:new N(function(X){X(K)})}return new(N||(N=Promise))(function(K,X){function G(H){try{q(O.next(H))}catch(T){X(T)}}function ae(H){try{q(O.throw(H))}catch(T){X(T)}}function q(H){H.done?K(H.value):he(H.value).then(G,ae)}q((O=O.apply(C,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const u=i("../auth"),E=i("../config"),I=i("./_xml"),M=C=>typeof btoa>"u"?g.from(C,"binary").toString("base64"):btoa(C);function b(C,R,N){return p(this,void 0,void 0,function*(){const{apiUrl:O,authHeader:he,basicAuth:K,userAgent:X}=(0,E.getConfig)(),G=K&&`Basic ${M(`${K.username}:${K.password}`)}`,ae=(0,u.getAuthToken)()&&`Bearer ${(0,u.getAuthToken)()}`;let q=new URLSearchParams(R).toString();q&&(q=`?${q}`);const H=yield fetch(`${O}/api${C}${q}`,Object.assign(Object.assign({},N),{headers:Object.assign({Authorization:he||G||ae||"","User-Agent":X},N==null?void 0:N.headers)})),T=H.headers.get("Content-Type");if(T!=null&&T.startsWith("application/xml")){const j=yield H.text();return yield I.xmlParser.parse(j)}if(T!=null&&T.startsWith("application/json"))return H.json();if(H.ok)return yield H.text();throw new Error(`OSM API: ${yield H.text()}`)})}c.osmFetch=b}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const g=i("fast-xml-parser");c.xmlParser=new g.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:p=>p!=="$"})},{"fast-xml-parser":3}],18:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const g=i("fast-xml-parser"),p=new g.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function u(M){return p.build({osm:{changeset:{tag:Object.entries(M).map(([b,C])=>({$k:b,$v:C}))}}})}c.createChangesetMetaXml=u;const E=(M,b,C)=>b.reduce((R,N)=>{const O={$id:N.id,$version:C?0:N.version,$changeset:M,tag:Object.entries(N.tags||{}).map(([he,K])=>({$k:he,$v:K}))};switch(N.type){case"node":{const he=Object.assign(Object.assign({},O),{$lat:N.lat,$lon:N.lon});return Object.assign(Object.assign({},R),{node:[...R.node,he]})}case"way":{if(!N.nodes)throw new Error("Way has no nodes");const he=Object.assign(Object.assign({},O),{nd:N.nodes.map(K=>({$ref:K}))});return Object.assign(Object.assign({},R),{way:[...R.way,he]})}case"relation":{if(!N.members)throw new Error("Relation has no members");const he=Object.assign(Object.assign({},O),{member:N.members.map(K=>({$type:K.type,$ref:K.ref,$role:K.role}))});return Object.assign(Object.assign({},R),{relation:[...R.relation,he]})}default:return R}},{node:[],way:[],relation:[]});function I(M,b,C){return p.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},C),{create:[E(M,b.create,!0)],modify:[E(M,b.modify)],delete:[Object.assign({"$if-unused":!0},E(M,b.delete))]})})}c.createOsmChangeXml=I},{"fast-xml-parser":3}],19:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const g=i("../_xml");function p(M){return{changeset:+M.$.changeset,id:+M.$.id,timestamp:M.$.timestamp,uid:+M.$.uid,user:M.$.user,version:+M.$.version,tags:M.tag?Object.fromEntries(M.tag.map(b=>[b.$.k,b.$.v])):void 0}}const u=M=>{const b=[];if(M.node){const C=M.node.map(R=>Object.assign(Object.assign({type:"node"},p(R)),{lat:+R.$.lat,lon:+R.$.lon}));b.push(...C)}if(M.way){const C=M.way.map(R=>{var N;return Object.assign(Object.assign({type:"way"},p(R)),{nodes:((N=R.nd)===null||N===void 0?void 0:N.map(O=>+O.$.ref))||[]})});b.push(...C)}if(M.relation){const C=M.relation.map(R=>{var N;return Object.assign(Object.assign({type:"relation"},p(R)),{members:((N=R.member)===null||N===void 0?void 0:N.map(O=>({ref:+O.$.ref,role:O.$.role,type:O.$.type})))||[]})});b.push(...C)}return b};function E(M){var b,C,R;return{create:((b=M.osmChange[0].create)===null||b===void 0?void 0:b.flatMap(u))||[],modify:((C=M.osmChange[0].modify)===null||C===void 0?void 0:C.flatMap(u))||[],delete:((R=M.osmChange[0].delete)===null||R===void 0?void 0:R.flatMap(u))||[]}}c.parseOsmChangeJson=E;function I(M){const b=g.xmlParser.parse(M);return E(b)}c.parseOsmChangeXml=I},{"../_xml":17}],20:[function(i,l,c){var g=this&&this.__awaiter||function(E,I,M,b){function C(R){return R instanceof M?R:new M(function(N){N(R)})}return new(M||(M=Promise))(function(R,N){function O(X){try{K(b.next(X))}catch(G){N(G)}}function he(X){try{K(b.throw(X))}catch(G){N(G)}}function K(X){X.done?R(X.value):C(X.value).then(O,he)}K((b=b.apply(E,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const p=i("../_osmFetch");function u(E,I){return g(this,void 0,void 0,function*(){yield(0,p.osmFetch)(`/0.6/changeset/${E}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(I)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=u},{"../_osmFetch":16}],21:[function(i,l,c){var g=this&&this.__awaiter||function(I,M,b,C){function R(N){return N instanceof b?N:new b(function(O){O(N)})}return new(b||(b=Promise))(function(N,O){function he(G){try{X(C.next(G))}catch(ae){O(ae)}}function K(G){try{X(C.throw(G))}catch(ae){O(ae)}}function X(G){G.done?N(G.value):R(G.value).then(he,K)}X((C=C.apply(I,M||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const p=i("../_osmFetch"),u=i("./_parseOsmChangeXml");function E(I){return g(this,void 0,void 0,function*(){const M=yield(0,p.osmFetch)(`/0.6/changeset/${I}/download`);return(0,u.parseOsmChangeJson)(M)})}c.getChangesetDiff=E},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,l,c){var g=this&&this.__awaiter||function(b,C,R,N){function O(he){return he instanceof R?he:new R(function(K){K(he)})}return new(R||(R=Promise))(function(he,K){function X(q){try{ae(N.next(q))}catch(H){K(H)}}function G(q){try{ae(N.throw(q))}catch(H){K(H)}}function ae(q){q.done?he(q.value):O(q.value).then(X,G)}ae((N=N.apply(b,C||[])).next())})},p=this&&this.__rest||function(b,C){var R={};for(var N in b)Object.prototype.hasOwnProperty.call(b,N)&&C.indexOf(N)<0&&(R[N]=b[N]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,N=Object.getOwnPropertySymbols(b);O<N.length;O++)C.indexOf(N[O])<0&&Object.prototype.propertyIsEnumerable.call(b,N[O])&&(R[N[O]]=b[N[O]]);return R};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const u=i("../_osmFetch"),E=b=>{var C;return{id:+b.$.id,created_at:new Date(b.$.created_at),closed_at:new Date(b.$.closed_at),open:b.$.open==="true",comments_count:+b.$.comments_count,changes_count:+b.$.changes_count,min_lat:+b.$.min_lat,min_lon:+b.$.min_lon,max_lat:+b.$.max_lat,max_lon:+b.$.max_lon,uid:+b.$.uid,user:b.$.user,tags:Object.fromEntries(b.tag.map(R=>[R.$.k,R.$.v])),discussion:(C=b.discussion)===null||C===void 0?void 0:C[0].comment.map(R=>({date:new Date(R.$.date),user:R.$.user,uid:R.$.uid,text:R.text[0]}))}};function I(b){var C;return g(this,void 0,void 0,function*(){const{only:R}=b,N=p(b,["only"]);return((C=(yield(0,u.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},R&&{[R]:!0}),N))).osm[0].changeset)===null||C===void 0?void 0:C.map(E))||[]})}c.listChangesets=I;function M(b,C=!0){return g(this,void 0,void 0,function*(){return(yield(0,u.osmFetch)(`/0.6/changeset/${b}`,{include_discussion:C})).osm[0].changeset.map(E)[0]})}c.getChangeset=M},{"../_osmFetch":16}],23:[function(i,l,c){var g=this&&this.__createBinding||(Object.create?function(I,M,b,C){C===void 0&&(C=b);var R=Object.getOwnPropertyDescriptor(M,b);(!R||("get"in R?!M.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return M[b]}}),Object.defineProperty(I,C,R)}:function(I,M,b,C){C===void 0&&(C=b),I[C]=M[b]}),p=this&&this.__exportStar||function(I,M){for(var b in I)b!=="default"&&!Object.prototype.hasOwnProperty.call(M,b)&&g(M,I,b)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,p(i("./createChangesetComment"),c),p(i("./getChangesetDiff"),c),p(i("./getChangesets"),c),p(i("./uploadChangeset"),c);var u=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return u.parseOsmChangeXml}});var E=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return E.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,l,c){var g=this&&this.__awaiter||function(I,M,b,C){function R(N){return N instanceof b?N:new b(function(O){O(N)})}return new(b||(b=Promise))(function(N,O){function he(G){try{X(C.next(G))}catch(ae){O(ae)}}function K(G){try{X(C.throw(G))}catch(ae){O(ae)}}function X(G){G.done?N(G.value):R(G.value).then(he,K)}X((C=C.apply(I,M||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const p=i("../_osmFetch"),u=i("./_createOsmChangeXml");function E(I,M){return g(this,void 0,void 0,function*(){const b=(0,u.createChangesetMetaXml)(I),C=+(yield(0,p.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:b,headers:{"content-type":"application/xml; charset=utf-8"}})),R=(0,u.createOsmChangeXml)(C,M);return yield(0,p.osmFetch)(`/0.6/changeset/${C}/upload`,void 0,{method:"POST",body:R,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,p.osmFetch)(`/0.6/changeset/${C}/close`,void 0,{method:"PUT"}),+C})}c.uploadChangeset=E},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,l,c){var g=this&&this.__awaiter||function(E,I,M,b){function C(R){return R instanceof M?R:new M(function(N){N(R)})}return new(M||(M=Promise))(function(R,N){function O(X){try{K(b.next(X))}catch(G){N(G)}}function he(X){try{K(b.throw(X))}catch(G){N(G)}}function K(X){X.done?R(X.value):C(X.value).then(O,he)}K((b=b.apply(E,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const p=i("./_osmFetch");function u(){var E;return g(this,void 0,void 0,function*(){const I=yield(0,p.osmFetch)("/capabilities");return{limits:{maxArea:+I.osm[0].api[0].area[0].$.maximum,maxNoteArea:+I.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+I.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+I.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+I.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+I.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((E=I.osm[0].policy[0].imagery[0].blacklist)===null||E===void 0?void 0:E.map(b=>b.$.regex))||[]}}})}c.getCapabilities=u},{"./_osmFetch":16}],26:[function(i,l,c){var g=this&&this.__awaiter||function(R,N,O,he){function K(X){return X instanceof O?X:new O(function(G){G(X)})}return new(O||(O=Promise))(function(X,G){function ae(T){try{H(he.next(T))}catch(j){G(j)}}function q(T){try{H(he.throw(T))}catch(j){G(j)}}function H(T){T.done?X(T.value):K(T.value).then(ae,q)}H((he=he.apply(R,N||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const p=i("./_osmFetch");function u(R,N,O){return g(this,void 0,void 0,function*(){const he=O&&R!=="node"?"/full":"";return(yield(0,p.osmFetch)(`/0.6/${R}/${N}${he}.json`)).elements})}c.getFeature=u;function E(R,N){return g(this,void 0,void 0,function*(){return(yield(0,p.osmFetch)(`/0.6/${R}s.json?${R}s=${N.join(",")}`)).elements})}c.getFeatures=E;function I(R,N,O){return g(this,void 0,void 0,function*(){return(yield(0,p.osmFetch)(`/0.6/${R}/${N}/${O}.json`)).elements[0]})}c.getFeatureAtVersion=I;function M(R,N){return g(this,void 0,void 0,function*(){return(yield(0,p.osmFetch)(`/0.6/${R}/${N}/history.json`)).elements})}c.getFeatureHistory=M;function b(R){return g(this,void 0,void 0,function*(){return(yield(0,p.osmFetch)(`/0.6/node/${R}/ways.json`)).elements})}c.getWaysForNode=b;function C(R,N){return g(this,void 0,void 0,function*(){return(yield(0,p.osmFetch)(`/0.6/${R}/${N}/relations.json`)).elements})}c.getRelationsForElement=C},{"./_osmFetch":16}],27:[function(i,l,c){var g=this&&this.__awaiter||function(E,I,M,b){function C(R){return R instanceof M?R:new M(function(N){N(R)})}return new(M||(M=Promise))(function(R,N){function O(X){try{K(b.next(X))}catch(G){N(G)}}function he(X){try{K(b.throw(X))}catch(G){N(G)}}function K(X){X.done?R(X.value):C(X.value).then(O,he)}K((b=b.apply(E,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const p=i("./_osmFetch");function u(E){return g(this,void 0,void 0,function*(){return(yield(0,p.osmFetch)("/0.6/map.json",{bbox:E})).elements})}c.getMapData=u},{"./_osmFetch":16}],28:[function(i,l,c){var g=this&&this.__awaiter||function(E,I,M,b){function C(R){return R instanceof M?R:new M(function(N){N(R)})}return new(M||(M=Promise))(function(R,N){function O(X){try{K(b.next(X))}catch(G){N(G)}}function he(X){try{K(b.throw(X))}catch(G){N(G)}}function K(X){X.done?R(X.value):C(X.value).then(O,he)}K((b=b.apply(E,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const p=i("./changesets");function u(E){return g(this,void 0,void 0,function*(){const I=yield(0,p.listChangesets)({display_name:E});if(!I.length)throw new Error("Could not get uid because the user has never edited the map");return I[0].uid})}c.getUIdFromDisplayName=u},{"./changesets":23}],29:[function(i,l,c){var g=this&&this.__awaiter||function(I,M,b,C){function R(N){return N instanceof b?N:new b(function(O){O(N)})}return new(b||(b=Promise))(function(N,O){function he(G){try{X(C.next(G))}catch(ae){O(ae)}}function K(G){try{X(C.throw(G))}catch(ae){O(ae)}}function X(G){G.done?N(G.value):R(G.value).then(he,K)}X((C=C.apply(I,M||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const p=i("./_osmFetch");function u(I){return g(this,void 0,void 0,function*(){const M=yield(0,p.osmFetch)(`/0.6/user/${I==="me"?"details":I}.json`);return Object.assign(Object.assign({},M.user),{account_created:new Date(M.user.account_created)})})}c.getUser=u;function E(I){return g(this,void 0,void 0,function*(){return(yield(0,p.osmFetch)("/0.6/users",{users:I})).users.map(b=>Object.assign(Object.assign({},b),{account_created:new Date(b.account_created)}))})}c.getUsers=E},{"./_osmFetch":16}],30:[function(i,l,c){var g=this&&this.__createBinding||(Object.create?function(u,E,I,M){M===void 0&&(M=I);var b=Object.getOwnPropertyDescriptor(E,I);(!b||("get"in b?!E.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return E[I]}}),Object.defineProperty(u,M,b)}:function(u,E,I,M){M===void 0&&(M=I),u[M]=E[I]}),p=this&&this.__exportStar||function(u,E){for(var I in u)I!=="default"&&!Object.prototype.hasOwnProperty.call(E,I)&&g(E,u,I)};Object.defineProperty(c,"__esModule",{value:!0}),p(i("./changesets"),c),p(i("./notes"),c),p(i("./getCapabilities"),c),p(i("./getFeature"),c),p(i("./getMapData"),c),p(i("./getUIdFromDisplayName"),c),p(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,l,c){var g=this&&this.__awaiter||function(C,R,N,O){function he(K){return K instanceof N?K:new N(function(X){X(K)})}return new(N||(N=Promise))(function(K,X){function G(H){try{q(O.next(H))}catch(T){X(T)}}function ae(H){try{q(O.throw(H))}catch(T){X(T)}}function q(H){H.done?K(H.value):he(H.value).then(G,ae)}q((O=O.apply(C,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const p=i("../_osmFetch"),u=C=>{const[R,N]=C.geometry.coordinates;return Object.assign(Object.assign({},C.properties),{location:{lat:N,lng:R}})};function E(C,R){return g(this,void 0,void 0,function*(){return(yield(0,p.osmFetch)(`/0.6/notes${R?"/search":""}.json`,C)).features.map(u)})}function I(C){return E(C,!0)}c.getNotesForQuery=I;function M(C){return E({bbox:C},!1)}c.getNotesForArea=M;function b(C){return g(this,void 0,void 0,function*(){const R=yield(0,p.osmFetch)(`/0.6/notes/${C}.json`);return u(R)})}c.getNote=b},{"../_osmFetch":16}],32:[function(i,l,c){var g=this&&this.__createBinding||(Object.create?function(u,E,I,M){M===void 0&&(M=I);var b=Object.getOwnPropertyDescriptor(E,I);(!b||("get"in b?!E.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return E[I]}}),Object.defineProperty(u,M,b)}:function(u,E,I,M){M===void 0&&(M=I),u[M]=E[I]}),p=this&&this.__exportStar||function(u,E){for(var I in u)I!=="default"&&!Object.prototype.hasOwnProperty.call(E,I)&&g(E,u,I)};Object.defineProperty(c,"__esModule",{value:!0}),p(i("./getNotes"),c),p(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,l,c){var g=this&&this.__awaiter||function(M,b,C,R){function N(O){return O instanceof C?O:new C(function(he){he(O)})}return new(C||(C=Promise))(function(O,he){function K(ae){try{G(R.next(ae))}catch(q){he(q)}}function X(ae){try{G(R.throw(ae))}catch(q){he(q)}}function G(ae){ae.done?O(ae.value):N(ae.value).then(K,X)}G((R=R.apply(M,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const p=i("../_osmFetch");function u(M,b,C){return g(this,void 0,void 0,function*(){yield(0,p.osmFetch)("/0.6/notes",{lat:M,lon:b,text:C})})}c.createNote=u;function E(M,b){return g(this,void 0,void 0,function*(){yield(0,p.osmFetch)(`/0.6/notes/${M}/comment`,{text:b})})}c.commentOnNote=E;function I(M,b){return g(this,void 0,void 0,function*(){yield(0,p.osmFetch)(`/0.6/notes/${M}/reopen`,{text:b})})}c.reopenNote=I},{"../_osmFetch":16}],34:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function g(p){let u=!1;return new Promise((E,I)=>{const[M,b]=[600,550],C=Object.entries({width:M,height:b,left:window.screen.width/2-M/2,top:window.screen.height/2-b/2}).map(([O,he])=>`${O}=${he}`).join(","),R=window.open("about:blank","oauth_window",C);if(!R)throw new Error("Popup was blocked");R.location=p,window.authComplete=O=>{E(O),u=!0};const N=setInterval(()=>{R.closed&&(u||I(new Error("Cancelled")),clearInterval(N))},500)})}c.createPopup=g},{}],35:[function(i,l,c){var g=this&&this.__awaiter||function(E,I,M,b){function C(R){return R instanceof M?R:new M(function(N){N(R)})}return new(M||(M=Promise))(function(R,N){function O(X){try{K(b.next(X))}catch(G){N(G)}}function he(X){try{K(b.throw(X))}catch(G){N(G)}}function K(X){X.done?R(X.value):C(X.value).then(O,he)}K((b=b.apply(E,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const p=i("./helpers");function u(E,{options:I,pkceVerifier:M,state:b}){return g(this,void 0,void 0,function*(){const C=new URL(E).searchParams,R=C.get("error_description"),N=C.get("code"),O=C.get("state");if(R)throw new Error(R);if(!N)throw new Error("No code in OAuth response");if(!M||!b)throw new Error("No login in progress");if(b!==O)throw new Error("State Mismatch");const he={grant_type:"authorization_code",code:N,redirect_uri:I.redirectUrl,client_id:I.clientId,code_verifier:M},K=`${(0,p.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(he).toString()}`,G=yield(yield fetch(K,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in G)throw new Error(G.error_description);const ae={issuedAt:new Date(G.created_at*1e3).toISOString(),accessToken:G.access_token,scopes:G.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(ae)),delete window.authComplete,ae})}c.exchangeCode=u},{"./helpers":36}],36:[function(i,l,c){var g=this&&this.__awaiter||function(M,b,C,R){function N(O){return O instanceof C?O:new C(function(he){he(O)})}return new(C||(C=Promise))(function(O,he){function K(ae){try{G(R.next(ae))}catch(q){he(q)}}function X(ae){try{G(R.throw(ae))}catch(q){he(q)}}function G(ae){ae.done?O(ae.value):N(ae.value).then(K,X)}G((R=R.apply(M,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const p=i("../config");function u(M){return g(this,void 0,void 0,function*(){const b=new TextEncoder().encode(M),C=yield window.crypto.subtle.digest("SHA-256",b);return btoa(String.fromCharCode(...new Uint8Array(C))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}c.sha256=u;function E(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(M=>`0${M.toString(16)}`.slice(-2)).join("")}c.getRandomString=E;function I(){let M=(0,p.getConfig)().apiUrl;return M==="https://api.openstreetmap.org"&&(M="https://www.openstreetmap.org"),M}c.getOAuthBaseUrl=I},{"../config":39}],37:[function(i,l,c){var g=this&&this.__createBinding||(Object.create?function(u,E,I,M){M===void 0&&(M=I);var b=Object.getOwnPropertyDescriptor(E,I);(!b||("get"in b?!E.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return E[I]}}),Object.defineProperty(u,M,b)}:function(u,E,I,M){M===void 0&&(M=I),u[M]=E[I]}),p=this&&this.__exportStar||function(u,E){for(var I in u)I!=="default"&&!Object.prototype.hasOwnProperty.call(E,I)&&g(E,u,I)};Object.defineProperty(c,"__esModule",{value:!0}),p(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,l,c){var g=this&&this.__awaiter||function(R,N,O,he){function K(X){return X instanceof O?X:new O(function(G){G(X)})}return new(O||(O=Promise))(function(X,G){function ae(T){try{H(he.next(T))}catch(j){G(j)}}function q(T){try{H(he.throw(T))}catch(j){G(j)}}function H(T){T.done?X(T.value):K(T.value).then(ae,q)}H((he=he.apply(R,N||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const p=i("./createPopup"),u=i("./exchangeCode"),E=i("./helpers");function I(R){return g(this,void 0,void 0,function*(){if(!R.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!R.clientId)throw new Error("You must include the 'clientId' option");if(!R.scopes)throw new Error("You must include the 'scopes' option");const N=(0,E.getRandomString)(),O=(0,E.getRandomString)(),he=yield(0,E.sha256)(O),K={scope:R.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:N,redirect_uri:R.redirectUrl,client_id:R.clientId,code_challenge_method:"S256",code_challenge:he},X=`${(0,E.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(K).toString()}`,G={state:N,pkceVerifier:O,options:R};if(R.mode==="popup"){const ae=yield(0,p.createPopup)(X);return(0,u.exchangeCode)(ae,G)}if(R.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(G)),window.location.replace(X);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=I,c.authReady=g(void 0,void 0,void 0,function*(){var R;if(typeof window>"u")return;const N=window.location.href,O=localStorage.getItem("__osmAuthTemp");if(new URL(N).searchParams.get("code")){if(!((R=window.opener)===null||R===void 0)&&R.authComplete)window.opener.authComplete(N),window.close();else if(O)try{const he=JSON.parse(O);yield(0,u.exchangeCode)(N,he),localStorage.removeItem("__osmAuthTemp")}catch(he){console.error("OSM Auth Error",he)}}});const M=()=>{try{const R=localStorage.getItem("__osmAuth");return R?JSON.parse(R).accessToken:void 0}catch{return}};c.getAuthToken=M;const b=()=>!!(0,c.getAuthToken)();c.isLoggedIn=b;function C(){localStorage.removeItem("__osmAuth")}c.logout=C},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const g={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},p=()=>g;c.getConfig=p;function u(E){Object.assign(g,E)}c.configure=u},{}],40:[function(i,l,c){var g=this&&this.__createBinding||(Object.create?function(u,E,I,M){M===void 0&&(M=I);var b=Object.getOwnPropertyDescriptor(E,I);(!b||("get"in b?!E.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return E[I]}}),Object.defineProperty(u,M,b)}:function(u,E,I,M){M===void 0&&(M=I),u[M]=E[I]}),p=this&&this.__exportStar||function(u,E){for(var I in u)I!=="default"&&!Object.prototype.hasOwnProperty.call(E,I)&&g(E,u,I)};Object.defineProperty(c,"__esModule",{value:!0}),p(i("./api"),c),p(i("./auth"),c),p(i("./config"),c),p(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],42:[function(i,l,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],43:[function(i,l,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],44:[function(i,l,c){var g=this&&this.__createBinding||(Object.create?function(u,E,I,M){M===void 0&&(M=I);var b=Object.getOwnPropertyDescriptor(E,I);(!b||("get"in b?!E.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return E[I]}}),Object.defineProperty(u,M,b)}:function(u,E,I,M){M===void 0&&(M=I),u[M]=E[I]}),p=this&&this.__exportStar||function(u,E){for(var I in u)I!=="default"&&!Object.prototype.hasOwnProperty.call(E,I)&&g(E,u,I)};Object.defineProperty(c,"__esModule",{value:!0}),p(i("./changesets"),c),p(i("./features"),c),p(i("./general"),c),p(i("./notes"),c),p(i("./osmPatch"),c),p(i("./user"),c)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(i,l,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],46:[function(i,l,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],47:[function(i,l,c){arguments[4][41][0].apply(c,arguments)},{dup:41}]},{},[40])(40)})})(SC);var Os=SC.exports;const EC=()=>{const[e,t]=gt.useState(!1);gt.useEffect(()=>{t(Os.isLoggedIn())},[]);const i=gt.useCallback(()=>{(async()=>(await Os.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Os.isLoggedIn()),window.location.reload()))()},[]),l=gt.useCallback(()=>{(async()=>(Os.logout(),t(!1)))()},[]);return mt.jsx(mt.Fragment,{children:e?mt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:l,children:"logout"}):mt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},aO=()=>{const[e,t]=gt.useState(!1),[i,l]=gt.useState(void 0);return gt.useEffect(()=>{t(Os.isLoggedIn())},[]),gt.useEffect(()=>{e&&(async()=>{const c=await Os.getUser("me");l(c)})()},[e]),mt.jsx(mt.Fragment,{children:i?mt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):mt.jsx("img",{})})},lO=()=>{const[e,t]=gt.useState(!1),[i,l]=gt.useState(void 0);return gt.useEffect(()=>{t(Os.isLoggedIn())},[]),gt.useEffect(()=>{e&&(async()=>{const c=await Os.getUser("me");l(c)})()},[e]),mt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[mt.jsxs("div",{children:[mt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?mt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):mt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),mt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[mt.jsx("div",{children:mt.jsx(aO,{})}),mt.jsx("div",{children:mt.jsx(EC,{})})]})]})},TC=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return mt.jsxs(mt.Fragment,{children:[mt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",mt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},uO=({feature:e})=>mt.jsx(mt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return mt.jsxs("div",{className:t,children:[mt.jsx("span",{className:"underline",children:t})," = ",mt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function af(e,t,i){return parseInt(e.substr(t,i),16)}function IC(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function W0(e,t,i){return i=i<0?i+6:i>6?i-6:i,IC(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function cO(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const l=e[1],c=e[2],g=e[3],p=e[4]||"";t="#"+l+l+c+c+g+g+p+p}return(i==7||i>8)&&(t=e),t}}function hO(e,t,i){let l;if(t==0){const c=IC(i*255);l=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,g=i*2-c;l=W0(g,c,e*6+2)+W0(g,c,e*6)+W0(g,c,e*6-2)}return"#"+l}function Qd(e,t,i){const l=[.55,.5,.5,.46,.6,.55,.55],c=l[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,hO(e,t,i)}const dO=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},vS={V:"jdenticon_config",n:"config"};var fO={};function pO(e,t){const i=fO[vS.n]||dO[vS.V]||{},l=i.lightness||{},c=i.saturation||{},g="color"in c?c.color:c,p=c.grayscale,u=i.backColor,E=i.padding;function I(b,C){let R=l[b];return R&&R.length>1||(R=C),function(N){return N=R[0]+N*(R[1]-R[0]),N<0?0:N>1?1:N}}function M(b){const C=i.hues;let R;return C&&C.length>0&&(R=C[0|.999*b*C.length]),typeof R=="number"?(R/360%1+1)%1:b}return{W:M,o:typeof g=="number"?g:.5,D:typeof p=="number"?p:0,p:I("color",[.4,.8]),F:I("grayscale",[.3,.9]),G:cO(u),X:typeof E=="number"?E:t}}let dm=class{constructor(t,i){this.x=t,this.y=i}};class CC{constructor(t,i,l,c){this.q=t,this.t=i,this.H=l,this.Y=c}I(t,i,l,c){const g=this.q+this.H,p=this.t+this.H,u=this.Y;return u===1?new dm(g-i-(c||0),this.t+t):u===2?new dm(g-t-(l||0),p-i-(c||0)):u===3?new dm(this.q+i,p-t-(l||0)):new dm(this.q+t,this.t+i)}}const mO=new CC(0,0,0,0);class gO{constructor(t){this.J=t,this.u=mO}g(t,i){const l=i?-2:2,c=[];for(let g=i?t.length-2:0;g<t.length&&g>=0;g+=l)c.push(this.u.I(t[g],t[g+1]));this.J.g(c)}h(t,i,l,c){const g=this.u.I(t,i,l,l);this.J.h(g,l,c)}i(t,i,l,c,g){this.g([t,i,t+l,i,t+l,i+c,t,i+c],g)}j(t,i,l,c,g,p){const u=[t+l,i,t+l,i+c,t,i+c,t,i];u.splice((g||0)%4*2,2),this.g(u,p)}K(t,i,l,c,g){this.g([t+l/2,i,t+l,i+c/2,t+l/2,i+c,t,i+c/2],g)}}function yO(e,t,i,l){e=e%14;let c,g,p,u,E,I;e?e==1?(p=0|i*.5,u=0|i*.8,t.j(i-p,0,p,u,2)):e==2?(p=0|i/3,t.i(p,p,i-p,i-p)):e==3?(E=i*.1,I=i<6?1:i<8?2:0|i*.25,E=E>1?0|E:E>.5?1:E,t.i(I,I,i-E-I,i-E-I)):e==4?(g=0|i*.15,p=0|i*.5,t.h(i-p-g,i-p-g,p)):e==5?(E=i*.1,I=E*4,I>3&&(I=0|I),t.i(0,0,i,i),t.g([I,I,i-E,I,I+(i-I-E)/2,i-E],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(E=i*.14,I=i<4?1:i<6?2:0|i*.35,E=i<8?E:0|E,t.i(0,0,i,i),t.i(I,I,i-I-E,i-I-E,!0)):e==10?(E=i*.12,I=E*3,t.i(0,0,i,i),t.h(I,I,i-E-I,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(g=i*.25,t.i(0,0,i,i),t.K(g,g,i-g,i-g,!0)):!l&&(g=i*.4,p=i*1.2,t.h(g,g,p)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function _S(e,t,i){e=e%4;let l;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(l=i/6,t.h(l,l,i-2*l)):t.j(0,0,i,i,0)}function vO(e,t){return e=t.W(e),[Qd(e,t.D,t.F(0)),Qd(e,t.o,t.p(.5)),Qd(e,t.D,t.F(1)),Qd(e,t.o,t.p(1)),Qd(e,t.o,t.p(0))]}function _O(e,t,i){const l=pO(i,.08);l.G&&e.m(l.G);let c=e.k;const g=.5+c*l.X|0;c-=g*2;const p=new gO(e),u=0|c/4,E=0|g+c/2-u*2,I=0|g+c/2-u*2;function M(he,K,X,G,ae){const q=af(t,X,1);let H=G?af(t,G,1):0;e.L(C[R[he]]);for(let T=0;T<ae.length;T++)p.u=new CC(E+ae[T][0]*u,I+ae[T][1]*u,u,H++%4),K(q,p,u,T);e.M()}const b=af(t,-7)/268435455,C=vO(b,l),R=[];let N;function O(he){if(he.indexOf(N)>=0){for(let K=0;K<he.length;K++)if(R.indexOf(he[K])>=0)return!0}}for(let he=0;he<3;he++)N=af(t,8+he,1)%C.length,(O([0,4])||O([2,3]))&&(N=1),R.push(N);M(0,_S,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),M(1,_S,4,5,[[0,0],[3,0],[3,3],[0,3]]),M(2,yO,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function xO(e){var l=0,c=0,g=encodeURI(e)+"%80",p=[],u,E=[],I=1732584193,M=4023233417,b=~I,C=~M,R=3285377520,N=[I,M,b,C,R],O=0,he="";function K(X,G){return X<<G|X>>>32-G}for(;l<g.length;c++)p[c>>2]=p[c>>2]|(g[l]=="%"?parseInt(g.substring(l+1,l+=3),16):g.charCodeAt(l++))<<(3-(c&3))*8;for(u=((c+7>>6)+1)*16,p[u-1]=c*8-8;O<u;O+=16){for(l=0;l<80;l++)c=K(I,5)+R+(l<20?(M&b^~M&C)+1518500249:l<40?(M^b^C)+1859775393:l<60?(M&b^M&C^b&C)+2400959708:(M^b^C)+3395469782)+(E[l]=l<16?p[O+l]|0:K(E[l-3]^E[l-8]^E[l-14]^E[l-16],1)),R=C,C=b,b=K(M,30),M=I,I=c;N[0]=I=N[0]+I|0,N[1]=M=N[1]+M|0,N[2]=b=N[2]+b|0,N[3]=C=N[3]+C|0,N[4]=R=N[4]+R|0}for(l=0;l<40;l++)he+=(N[l>>3]>>>(7-(l&7))*4&15).toString(16);return he}function wO(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function bO(e){return xO(e==null?"":""+e)}typeof document<"u"&&document.querySelectorAll.bind(document);function Yc(e){return(e*10+.5|0)/10}class SO{constructor(){this.v=""}g(t){let i="";for(let l=0;l<t.length;l++)i+=(l?"L":"M")+Yc(t[l].x)+" "+Yc(t[l].y);this.v+=i+"Z"}h(t,i,l){const c=l?0:1,g=Yc(i/2),p=Yc(i),u="a"+g+","+g+" 0 1,"+c+" ";this.v+="M"+Yc(t.x)+" "+Yc(t.y+i/2)+u+p+",0"+u+-p+",0"}}class EO{constructor(t){this.A,this.B={},this.O=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),l=i[2]?af(i[2],0)/255:1;this.O.m(i[1],l)}L(t){this.A=this.B[t]||(this.B[t]=new SO)}M(){}g(t){this.A.g(t)}h(t,i,l){this.A.h(t,i,l)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.O.P(i,t[i].v)}}const TO={R:"http://www.w3.org/2000/svg",S:"width",T:"height"};class IO{constructor(t){this.k=t,this.C='<svg xmlns="'+TO.R+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}P(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function CO(e,t,i){const l=new IO(t);return _O(new EO(l),wO(e)||bO(e),i),l.toString()}const PO=({feature:e,size:t})=>e.properties===null?null:mt.jsx(mt.Fragment,{children:e.properties.userIconHref.length>0?mt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):mt.jsx("span",{dangerouslySetInnerHTML:{__html:CO(e.properties.user||"noname",t)}})}),AO=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?mt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null},MO={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]},kO=({viewState:e})=>{const[t,i]=gt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return gt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),mt.jsx(mt.Fragment,{children:e&&t&&mt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[mt.jsx(tu,{icon:MO,style:{padding:"0px 3px"}}),mt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var PC={};class Di{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let l=0;for(let c=0;c<this._n&&c<32;c++){const g=i[c],p=t+g,u=Math.abs(t)<Math.abs(g)?t-(p-g):g-(p-t);u&&(i[l++]=u),t=p}return i[l]=t,this._n=l+1,this}valueOf(){const t=this._partials;let i=this._n,l,c,g,p=0;if(i>0){for(p=t[--i];i>0&&(l=p,c=t[--i],p=l+c,g=c-(p-l),!g););i>0&&(g<0&&t[i-1]<0||g>0&&t[i-1]>0)&&(c=g*2,l=p+c,c==l-p&&(p=l))}return p}}function*zO(e){for(const t of e)yield*t}function AC(e){return Array.from(zO(e))}function vh(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var l=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,g=new Array(c);++l<c;)g[l]=e+l*i;return g}var dn=1e-6,qf=1e-12,kn=Math.PI,Rr=kn/2,yg=kn/4,io=kn*2,or=180/kn,pn=kn/180,Nn=Math.abs,Xh=Math.atan,oo=Math.atan2,on=Math.cos,fm=Math.ceil,MC=Math.exp,M_=Math.hypot,vg=Math.log,X0=Math.pow,Jt=Math.sin,ds=Math.sign||function(e){return e>0?1:e<0?-1:0},di=Math.sqrt,px=Math.tan;function kC(e){return e>1?0:e<-1?kn:Math.acos(e)}function so(e){return e>1?Rr:e<-1?-Rr:Math.asin(e)}function xS(e){return(e=Jt(e/2))*e}function Ir(){}function _g(e,t){e&&bS.hasOwnProperty(e.type)&&bS[e.type](e,t)}var wS={Feature:function(e,t){_g(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,l=-1,c=i.length;++l<c;)_g(i[l].geometry,t)}},bS={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)e=i[l],t.point(e[0],e[1],e[2])},LineString:function(e,t){k_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)k_(i[l],t,0)},Polygon:function(e,t){SS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)SS(i[l],t)},GeometryCollection:function(e,t){for(var i=e.geometries,l=-1,c=i.length;++l<c;)_g(i[l],t)}};function k_(e,t,i){var l=-1,c=e.length-i,g;for(t.lineStart();++l<c;)g=e[l],t.point(g[0],g[1],g[2]);t.lineEnd()}function SS(e,t){var i=-1,l=e.length;for(t.polygonStart();++i<l;)k_(e[i],t,1);t.polygonEnd()}function Fs(e,t){e&&wS.hasOwnProperty(e.type)?wS[e.type](e,t):_g(e,t)}var xg=new Di,wg=new Di,zC,FC,z_,F_,O_,ga={point:Ir,lineStart:Ir,lineEnd:Ir,polygonStart:function(){xg=new Di,ga.lineStart=FO,ga.lineEnd=OO},polygonEnd:function(){var e=+xg;wg.add(e<0?io+e:e),this.lineStart=this.lineEnd=this.point=Ir},sphere:function(){wg.add(io)}};function FO(){ga.point=RO}function OO(){OC(zC,FC)}function RO(e,t){ga.point=OC,zC=e,FC=t,e*=pn,t*=pn,z_=e,F_=on(t=t/2+yg),O_=Jt(t)}function OC(e,t){e*=pn,t*=pn,t=t/2+yg;var i=e-z_,l=i>=0?1:-1,c=l*i,g=on(t),p=Jt(t),u=O_*p,E=F_*g+u*on(c),I=u*l*Jt(c);xg.add(oo(I,E)),z_=e,F_=g,O_=p}function jO(e){return wg=new Di,Fs(e,ga),wg*2}function bg(e){return[oo(e[1],e[0]),so(e[2])]}function rc(e){var t=e[0],i=e[1],l=on(i);return[l*on(t),l*Jt(t),Jt(i)]}function pm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Bh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function q0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function mm(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Sg(e){var t=di(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Er,So,Fr,$o,Uu,RC,jC,Ch,Tf,Nl,Xa,La={point:R_,lineStart:ES,lineEnd:TS,polygonStart:function(){La.point=DC,La.lineStart=LO,La.lineEnd=DO,Tf=new Di,ga.polygonStart()},polygonEnd:function(){ga.polygonEnd(),La.point=R_,La.lineStart=ES,La.lineEnd=TS,xg<0?(Er=-(Fr=180),So=-($o=90)):Tf>dn?$o=90:Tf<-dn&&(So=-90),Xa[0]=Er,Xa[1]=Fr},sphere:function(){Er=-(Fr=180),So=-($o=90)}};function R_(e,t){Nl.push(Xa=[Er=e,Fr=e]),t<So&&(So=t),t>$o&&($o=t)}function LC(e,t){var i=rc([e*pn,t*pn]);if(Ch){var l=Bh(Ch,i),c=[l[1],-l[0],0],g=Bh(c,l);Sg(g),g=bg(g);var p=e-Uu,u=p>0?1:-1,E=g[0]*or*u,I,M=Nn(p)>180;M^(u*Uu<E&&E<u*e)?(I=g[1]*or,I>$o&&($o=I)):(E=(E+360)%360-180,M^(u*Uu<E&&E<u*e)?(I=-g[1]*or,I<So&&(So=I)):(t<So&&(So=t),t>$o&&($o=t))),M?e<Uu?Uo(Er,e)>Uo(Er,Fr)&&(Fr=e):Uo(e,Fr)>Uo(Er,Fr)&&(Er=e):Fr>=Er?(e<Er&&(Er=e),e>Fr&&(Fr=e)):e>Uu?Uo(Er,e)>Uo(Er,Fr)&&(Fr=e):Uo(e,Fr)>Uo(Er,Fr)&&(Er=e)}else Nl.push(Xa=[Er=e,Fr=e]);t<So&&(So=t),t>$o&&($o=t),Ch=i,Uu=e}function ES(){La.point=LC}function TS(){Xa[0]=Er,Xa[1]=Fr,La.point=R_,Ch=null}function DC(e,t){if(Ch){var i=e-Uu;Tf.add(Nn(i)>180?i+(i>0?360:-360):i)}else RC=e,jC=t;ga.point(e,t),LC(e,t)}function LO(){ga.lineStart()}function DO(){DC(RC,jC),ga.lineEnd(),Nn(Tf)>dn&&(Er=-(Fr=180)),Xa[0]=Er,Xa[1]=Fr,Ch=null}function Uo(e,t){return(t-=e)<0?t+360:t}function BO(e,t){return e[0]-t[0]}function IS(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function NO(e){var t,i,l,c,g,p,u;if($o=Fr=-(Er=So=1/0),Nl=[],Fs(e,La),i=Nl.length){for(Nl.sort(BO),t=1,l=Nl[0],g=[l];t<i;++t)c=Nl[t],IS(l,c[0])||IS(l,c[1])?(Uo(l[0],c[1])>Uo(l[0],l[1])&&(l[1]=c[1]),Uo(c[0],l[1])>Uo(l[0],l[1])&&(l[0]=c[0])):g.push(l=c);for(p=-1/0,i=g.length-1,t=0,l=g[i];t<=i;l=c,++t)c=g[t],(u=Uo(l[1],c[0]))>p&&(p=u,Er=c[0],Fr=l[1])}return Nl=Xa=null,Er===1/0||So===1/0?[[NaN,NaN],[NaN,NaN]]:[[Er,So],[Fr,$o]]}var lf,Eg,Tg,Ig,Cg,Pg,Ag,Mg,j_,L_,D_,BC,NC,eo,to,no,Rs={sphere:Ir,point:mx,lineStart:CS,lineEnd:PS,polygonStart:function(){Rs.lineStart=VO,Rs.lineEnd=GO},polygonEnd:function(){Rs.lineStart=CS,Rs.lineEnd=PS}};function mx(e,t){e*=pn,t*=pn;var i=on(t);up(i*on(e),i*Jt(e),Jt(t))}function up(e,t,i){++lf,Tg+=(e-Tg)/lf,Ig+=(t-Ig)/lf,Cg+=(i-Cg)/lf}function CS(){Rs.point=UO}function UO(e,t){e*=pn,t*=pn;var i=on(t);eo=i*on(e),to=i*Jt(e),no=Jt(t),Rs.point=$O,up(eo,to,no)}function $O(e,t){e*=pn,t*=pn;var i=on(t),l=i*on(e),c=i*Jt(e),g=Jt(t),p=oo(di((p=to*g-no*c)*p+(p=no*l-eo*g)*p+(p=eo*c-to*l)*p),eo*l+to*c+no*g);Eg+=p,Pg+=p*(eo+(eo=l)),Ag+=p*(to+(to=c)),Mg+=p*(no+(no=g)),up(eo,to,no)}function PS(){Rs.point=mx}function VO(){Rs.point=HO}function GO(){UC(BC,NC),Rs.point=mx}function HO(e,t){BC=e,NC=t,e*=pn,t*=pn,Rs.point=UC;var i=on(t);eo=i*on(e),to=i*Jt(e),no=Jt(t),up(eo,to,no)}function UC(e,t){e*=pn,t*=pn;var i=on(t),l=i*on(e),c=i*Jt(e),g=Jt(t),p=to*g-no*c,u=no*l-eo*g,E=eo*c-to*l,I=M_(p,u,E),M=so(I),b=I&&-M/I;j_.add(b*p),L_.add(b*u),D_.add(b*E),Eg+=M,Pg+=M*(eo+(eo=l)),Ag+=M*(to+(to=c)),Mg+=M*(no+(no=g)),up(eo,to,no)}function ZO(e){lf=Eg=Tg=Ig=Cg=Pg=Ag=Mg=0,j_=new Di,L_=new Di,D_=new Di,Fs(e,Rs);var t=+j_,i=+L_,l=+D_,c=M_(t,i,l);return c<qf&&(t=Pg,i=Ag,l=Mg,Eg<dn&&(t=Tg,i=Ig,l=Cg),c=M_(t,i,l),c<qf)?[NaN,NaN]:[oo(i,t)*or,so(l/c)*or]}function Jc(e){return function(){return e}}function B_(e,t){function i(l,c){return l=e(l,c),t(l[0],l[1])}return e.invert&&t.invert&&(i.invert=function(l,c){return l=t.invert(l,c),l&&e.invert(l[0],l[1])}),i}function N_(e,t){return[Nn(e)>kn?e+Math.round(-e/io)*io:e,t]}N_.invert=N_;function gx(e,t,i){return(e%=io)?t||i?B_(MS(e),kS(t,i)):MS(e):t||i?kS(t,i):N_}function AS(e){return function(t,i){return t+=e,[t>kn?t-io:t<-kn?t+io:t,i]}}function MS(e){var t=AS(e);return t.invert=AS(-e),t}function kS(e,t){var i=on(e),l=Jt(e),c=on(t),g=Jt(t);function p(u,E){var I=on(E),M=on(u)*I,b=Jt(u)*I,C=Jt(E),R=C*i+M*l;return[oo(b*c-R*g,M*i-C*l),so(R*c+b*g)]}return p.invert=function(u,E){var I=on(E),M=on(u)*I,b=Jt(u)*I,C=Jt(E),R=C*c-b*g;return[oo(b*c+C*g,M*i+R*l),so(R*i-M*l)]},p}function $C(e){e=gx(e[0]*pn,e[1]*pn,e.length>2?e[2]*pn:0);function t(i){return i=e(i[0]*pn,i[1]*pn),i[0]*=or,i[1]*=or,i}return t.invert=function(i){return i=e.invert(i[0]*pn,i[1]*pn),i[0]*=or,i[1]*=or,i},t}function VC(e,t,i,l,c,g){if(i){var p=on(t),u=Jt(t),E=l*i;c==null?(c=t+l*io,g=t-E/2):(c=zS(p,c),g=zS(p,g),(l>0?c<g:c>g)&&(c+=l*io));for(var I,M=c;l>0?M>g:M<g;M-=E)I=bg([p,-u*on(M),-u*Jt(M)]),e.point(I[0],I[1])}}function zS(e,t){t=rc(t),t[0]-=e,Sg(t);var i=kC(-t[1]);return((-t[2]<0?-i:i)+io-dn)%io}function WO(){var e=Jc([0,0]),t=Jc(90),i=Jc(6),l,c,g={point:p};function p(E,I){l.push(E=c(E,I)),E[0]*=or,E[1]*=or}function u(){var E=e.apply(this,arguments),I=t.apply(this,arguments)*pn,M=i.apply(this,arguments)*pn;return l=[],c=gx(-E[0]*pn,-E[1]*pn,0).invert,VC(g,I,M,1),E={type:"Polygon",coordinates:[l]},l=c=null,E}return u.center=function(E){return arguments.length?(e=typeof E=="function"?E:Jc([+E[0],+E[1]]),u):e},u.radius=function(E){return arguments.length?(t=typeof E=="function"?E:Jc(+E),u):t},u.precision=function(E){return arguments.length?(i=typeof E=="function"?E:Jc(+E),u):i},u}function GC(){var e=[],t;return{point:function(i,l,c){t.push([i,l,c])},lineStart:function(){e.push(t=[])},lineEnd:Ir,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function jm(e,t){return Nn(e[0]-t[0])<dn&&Nn(e[1]-t[1])<dn}function gm(e,t,i,l){this.x=e,this.z=t,this.o=i,this.e=l,this.v=!1,this.n=this.p=null}function HC(e,t,i,l,c){var g=[],p=[],u,E;if(e.forEach(function(N){if(!((O=N.length-1)<=0)){var O,he=N[0],K=N[O],X;if(jm(he,K)){if(!he[2]&&!K[2]){for(c.lineStart(),u=0;u<O;++u)c.point((he=N[u])[0],he[1]);c.lineEnd();return}K[0]+=2*dn}g.push(X=new gm(he,N,null,!0)),p.push(X.o=new gm(he,null,X,!1)),g.push(X=new gm(K,N,null,!1)),p.push(X.o=new gm(K,null,X,!0))}}),!!g.length){for(p.sort(t),FS(g),FS(p),u=0,E=p.length;u<E;++u)p[u].e=i=!i;for(var I=g[0],M,b;;){for(var C=I,R=!0;C.v;)if((C=C.n)===I)return;M=C.z,c.lineStart();do{if(C.v=C.o.v=!0,C.e){if(R)for(u=0,E=M.length;u<E;++u)c.point((b=M[u])[0],b[1]);else l(C.x,C.n.x,1,c);C=C.n}else{if(R)for(M=C.p.z,u=M.length-1;u>=0;--u)c.point((b=M[u])[0],b[1]);else l(C.x,C.p.x,-1,c);C=C.p}C=C.o,M=C.z,R=!R}while(!C.v);c.lineEnd()}}}function FS(e){if(t=e.length){for(var t,i=0,l=e[0],c;++i<t;)l.n=c=e[i],c.p=l,l=c;l.n=c=e[0],c.p=l}}function K0(e){return Nn(e[0])<=kn?e[0]:ds(e[0])*((Nn(e[0])+kn)%io-kn)}function ZC(e,t){var i=K0(t),l=t[1],c=Jt(l),g=[Jt(i),-on(i),0],p=0,u=0,E=new Di;c===1?l=Rr+dn:c===-1&&(l=-Rr-dn);for(var I=0,M=e.length;I<M;++I)if(C=(b=e[I]).length)for(var b,C,R=b[C-1],N=K0(R),O=R[1]/2+yg,he=Jt(O),K=on(O),X=0;X<C;++X,N=ae,he=H,K=T,R=G){var G=b[X],ae=K0(G),q=G[1]/2+yg,H=Jt(q),T=on(q),j=ae-N,D=j>=0?1:-1,te=D*j,W=te>kn,ve=he*H;if(E.add(oo(ve*D*Jt(te),K*T+ve*on(te))),p+=W?j+D*io:j,W^N>=i^ae>=i){var _e=Bh(rc(R),rc(G));Sg(_e);var pe=Bh(g,_e);Sg(pe);var oe=(W^j>=0?-1:1)*so(pe[2]);(l>oe||l===oe&&(_e[0]||_e[1]))&&(u+=W^j>=0?1:-1)}}return(p<-dn||p<dn&&E<-qf)^u&1}function WC(e,t,i,l){return function(c){var g=t(c),p=GC(),u=t(p),E=!1,I,M,b,C={point:R,lineStart:O,lineEnd:he,polygonStart:function(){C.point=K,C.lineStart=X,C.lineEnd=G,M=[],I=[]},polygonEnd:function(){C.point=R,C.lineStart=O,C.lineEnd=he,M=AC(M);var ae=ZC(I,l);M.length?(E||(c.polygonStart(),E=!0),HC(M,qO,ae,i,c)):ae&&(E||(c.polygonStart(),E=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),E&&(c.polygonEnd(),E=!1),M=I=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function R(ae,q){e(ae,q)&&c.point(ae,q)}function N(ae,q){g.point(ae,q)}function O(){C.point=N,g.lineStart()}function he(){C.point=R,g.lineEnd()}function K(ae,q){b.push([ae,q]),u.point(ae,q)}function X(){u.lineStart(),b=[]}function G(){K(b[0][0],b[0][1]),u.lineEnd();var ae=u.clean(),q=p.result(),H,T=q.length,j,D,te;if(b.pop(),I.push(b),b=null,!!T){if(ae&1){if(D=q[0],(j=D.length-1)>0){for(E||(c.polygonStart(),E=!0),c.lineStart(),H=0;H<j;++H)c.point((te=D[H])[0],te[1]);c.lineEnd()}return}T>1&&ae&2&&q.push(q.pop().concat(q.shift())),M.push(q.filter(XO))}}return C}}function XO(e){return e.length>1}function qO(e,t){return((e=e.x)[0]<0?e[1]-Rr-dn:Rr-e[1])-((t=t.x)[0]<0?t[1]-Rr-dn:Rr-t[1])}const U_=WC(function(){return!0},KO,JO,[-kn,-Rr]);function KO(e){var t=NaN,i=NaN,l=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(g,p){var u=g>0?kn:-kn,E=Nn(g-t);Nn(E-kn)<dn?(e.point(t,i=(i+p)/2>0?Rr:-Rr),e.point(l,i),e.lineEnd(),e.lineStart(),e.point(u,i),e.point(g,i),c=0):l!==u&&E>=kn&&(Nn(t-l)<dn&&(t-=l*dn),Nn(g-u)<dn&&(g-=u*dn),i=YO(t,i,g,p),e.point(l,i),e.lineEnd(),e.lineStart(),e.point(u,i),c=0),e.point(t=g,i=p),l=u},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function YO(e,t,i,l){var c,g,p=Jt(e-i);return Nn(p)>dn?Xh((Jt(t)*(g=on(l))*Jt(i)-Jt(l)*(c=on(t))*Jt(e))/(c*g*p)):(t+l)/2}function JO(e,t,i,l){var c;if(e==null)c=i*Rr,l.point(-kn,c),l.point(0,c),l.point(kn,c),l.point(kn,0),l.point(kn,-c),l.point(0,-c),l.point(-kn,-c),l.point(-kn,0),l.point(-kn,c);else if(Nn(e[0]-t[0])>dn){var g=e[0]<t[0]?kn:-kn;c=i*g/2,l.point(-g,c),l.point(0,c),l.point(g,c)}else l.point(t[0],t[1])}function XC(e){var t=on(e),i=6*pn,l=t>0,c=Nn(t)>dn;function g(M,b,C,R){VC(R,e,i,C,M,b)}function p(M,b){return on(M)*on(b)>t}function u(M){var b,C,R,N,O;return{lineStart:function(){N=R=!1,O=1},point:function(he,K){var X=[he,K],G,ae=p(he,K),q=l?ae?0:I(he,K):ae?I(he+(he<0?kn:-kn),K):0;if(!b&&(N=R=ae)&&M.lineStart(),ae!==R&&(G=E(b,X),(!G||jm(b,G)||jm(X,G))&&(X[2]=1)),ae!==R)O=0,ae?(M.lineStart(),G=E(X,b),M.point(G[0],G[1])):(G=E(b,X),M.point(G[0],G[1],2),M.lineEnd()),b=G;else if(c&&b&&l^ae){var H;!(q&C)&&(H=E(X,b,!0))&&(O=0,l?(M.lineStart(),M.point(H[0][0],H[0][1]),M.point(H[1][0],H[1][1]),M.lineEnd()):(M.point(H[1][0],H[1][1]),M.lineEnd(),M.lineStart(),M.point(H[0][0],H[0][1],3)))}ae&&(!b||!jm(b,X))&&M.point(X[0],X[1]),b=X,R=ae,C=q},lineEnd:function(){R&&M.lineEnd(),b=null},clean:function(){return O|(N&&R)<<1}}}function E(M,b,C){var R=rc(M),N=rc(b),O=[1,0,0],he=Bh(R,N),K=pm(he,he),X=he[0],G=K-X*X;if(!G)return!C&&M;var ae=t*K/G,q=-t*X/G,H=Bh(O,he),T=mm(O,ae),j=mm(he,q);q0(T,j);var D=H,te=pm(T,D),W=pm(D,D),ve=te*te-W*(pm(T,T)-1);if(!(ve<0)){var _e=di(ve),pe=mm(D,(-te-_e)/W);if(q0(pe,T),pe=bg(pe),!C)return pe;var oe=M[0],ce=b[0],ee=M[1],re=b[1],fe;ce<oe&&(fe=oe,oe=ce,ce=fe);var Se=ce-oe,Ie=Nn(Se-kn)<dn,Ne=Ie||Se<dn;if(!Ie&&re<ee&&(fe=ee,ee=re,re=fe),Ne?Ie?ee+re>0^pe[1]<(Nn(pe[0]-oe)<dn?ee:re):ee<=pe[1]&&pe[1]<=re:Se>kn^(oe<=pe[0]&&pe[0]<=ce)){var Ae=mm(D,(-te+_e)/W);return q0(Ae,T),[pe,bg(Ae)]}}}function I(M,b){var C=l?e:kn-e,R=0;return M<-C?R|=1:M>C&&(R|=2),b<-C?R|=4:b>C&&(R|=8),R}return WC(p,u,g,l?[0,-e]:[-kn,e-kn])}function QO(e,t,i,l,c,g){var p=e[0],u=e[1],E=t[0],I=t[1],M=0,b=1,C=E-p,R=I-u,N;if(N=i-p,!(!C&&N>0)){if(N/=C,C<0){if(N<M)return;N<b&&(b=N)}else if(C>0){if(N>b)return;N>M&&(M=N)}if(N=c-p,!(!C&&N<0)){if(N/=C,C<0){if(N>b)return;N>M&&(M=N)}else if(C>0){if(N<M)return;N<b&&(b=N)}if(N=l-u,!(!R&&N>0)){if(N/=R,R<0){if(N<M)return;N<b&&(b=N)}else if(R>0){if(N>b)return;N>M&&(M=N)}if(N=g-u,!(!R&&N<0)){if(N/=R,R<0){if(N>b)return;N>M&&(M=N)}else if(R>0){if(N<M)return;N<b&&(b=N)}return M>0&&(e[0]=p+M*C,e[1]=u+M*R),b<1&&(t[0]=p+b*C,t[1]=u+b*R),!0}}}}}var uf=1e9,ym=-uf;function uy(e,t,i,l){function c(I,M){return e<=I&&I<=i&&t<=M&&M<=l}function g(I,M,b,C){var R=0,N=0;if(I==null||(R=p(I,b))!==(N=p(M,b))||E(I,M)<0^b>0)do C.point(R===0||R===3?e:i,R>1?l:t);while((R=(R+b+4)%4)!==N);else C.point(M[0],M[1])}function p(I,M){return Nn(I[0]-e)<dn?M>0?0:3:Nn(I[0]-i)<dn?M>0?2:1:Nn(I[1]-t)<dn?M>0?1:0:M>0?3:2}function u(I,M){return E(I.x,M.x)}function E(I,M){var b=p(I,1),C=p(M,1);return b!==C?b-C:b===0?M[1]-I[1]:b===1?I[0]-M[0]:b===2?I[1]-M[1]:M[0]-I[0]}return function(I){var M=I,b=GC(),C,R,N,O,he,K,X,G,ae,q,H,T={point:j,lineStart:ve,lineEnd:_e,polygonStart:te,polygonEnd:W};function j(oe,ce){c(oe,ce)&&M.point(oe,ce)}function D(){for(var oe=0,ce=0,ee=R.length;ce<ee;++ce)for(var re=R[ce],fe=1,Se=re.length,Ie=re[0],Ne,Ae,ze=Ie[0],He=Ie[1];fe<Se;++fe)Ne=ze,Ae=He,Ie=re[fe],ze=Ie[0],He=Ie[1],Ae<=l?He>l&&(ze-Ne)*(l-Ae)>(He-Ae)*(e-Ne)&&++oe:He<=l&&(ze-Ne)*(l-Ae)<(He-Ae)*(e-Ne)&&--oe;return oe}function te(){M=b,C=[],R=[],H=!0}function W(){var oe=D(),ce=H&&oe,ee=(C=AC(C)).length;(ce||ee)&&(I.polygonStart(),ce&&(I.lineStart(),g(null,null,1,I),I.lineEnd()),ee&&HC(C,u,oe,g,I),I.polygonEnd()),M=I,C=R=N=null}function ve(){T.point=pe,R&&R.push(N=[]),q=!0,ae=!1,X=G=NaN}function _e(){C&&(pe(O,he),K&&ae&&b.rejoin(),C.push(b.result())),T.point=j,ae&&M.lineEnd()}function pe(oe,ce){var ee=c(oe,ce);if(R&&N.push([oe,ce]),q)O=oe,he=ce,K=ee,q=!1,ee&&(M.lineStart(),M.point(oe,ce));else if(ee&&ae)M.point(oe,ce);else{var re=[X=Math.max(ym,Math.min(uf,X)),G=Math.max(ym,Math.min(uf,G))],fe=[oe=Math.max(ym,Math.min(uf,oe)),ce=Math.max(ym,Math.min(uf,ce))];QO(re,fe,e,t,i,l)?(ae||(M.lineStart(),M.point(re[0],re[1])),M.point(fe[0],fe[1]),ee||M.lineEnd(),H=!1):ee&&(M.lineStart(),M.point(oe,ce),H=!1)}X=oe,G=ce,ae=ee}return T}}function eR(){var e=0,t=0,i=960,l=500,c,g,p;return p={stream:function(u){return c&&g===u?c:c=uy(e,t,i,l)(g=u)},extent:function(u){return arguments.length?(e=+u[0][0],t=+u[0][1],i=+u[1][0],l=+u[1][1],c=g=null,p):[[e,t],[i,l]]}}}var $_,V_,Lm,Dm,Nh={sphere:Ir,point:Ir,lineStart:tR,lineEnd:Ir,polygonStart:Ir,polygonEnd:Ir};function tR(){Nh.point=rR,Nh.lineEnd=nR}function nR(){Nh.point=Nh.lineEnd=Ir}function rR(e,t){e*=pn,t*=pn,V_=e,Lm=Jt(t),Dm=on(t),Nh.point=iR}function iR(e,t){e*=pn,t*=pn;var i=Jt(t),l=on(t),c=Nn(e-V_),g=on(c),p=Jt(c),u=l*p,E=Dm*i-Lm*l*g,I=Lm*i+Dm*l*g;$_.add(oo(di(u*u+E*E),I)),V_=e,Lm=i,Dm=l}function qC(e){return $_=new Di,Fs(e,Nh),+$_}var G_=[null,null],oR={type:"LineString",coordinates:G_};function kg(e,t){return G_[0]=e,G_[1]=t,qC(oR)}var OS={Feature:function(e,t){return zg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,l=-1,c=i.length;++l<c;)if(zg(i[l].geometry,t))return!0;return!1}},RS={Sphere:function(){return!0},Point:function(e,t){return jS(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)if(jS(i[l],t))return!0;return!1},LineString:function(e,t){return LS(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)if(LS(i[l],t))return!0;return!1},Polygon:function(e,t){return DS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)if(DS(i[l],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,l=-1,c=i.length;++l<c;)if(zg(i[l],t))return!0;return!1}};function zg(e,t){return e&&RS.hasOwnProperty(e.type)?RS[e.type](e,t):!1}function jS(e,t){return kg(e,t)===0}function LS(e,t){for(var i,l,c,g=0,p=e.length;g<p;g++){if(l=kg(e[g],t),l===0||g>0&&(c=kg(e[g],e[g-1]),c>0&&i<=c&&l<=c&&(i+l-c)*(1-Math.pow((i-l)/c,2))<qf*c))return!0;i=l}return!1}function DS(e,t){return!!ZC(e.map(sR),KC(t))}function sR(e){return e=e.map(KC),e.pop(),e}function KC(e){return[e[0]*pn,e[1]*pn]}function aR(e,t){return(e&&OS.hasOwnProperty(e.type)?OS[e.type]:zg)(e,t)}function BS(e,t,i){var l=vh(e,t-dn,i).concat(t);return function(c){return l.map(function(g){return[c,g]})}}function NS(e,t,i){var l=vh(e,t-dn,i).concat(t);return function(c){return l.map(function(g){return[g,c]})}}function YC(){var e,t,i,l,c,g,p,u,E=10,I=E,M=90,b=360,C,R,N,O,he=2.5;function K(){return{type:"MultiLineString",coordinates:X()}}function X(){return vh(fm(l/M)*M,i,M).map(N).concat(vh(fm(u/b)*b,p,b).map(O)).concat(vh(fm(t/E)*E,e,E).filter(function(G){return Nn(G%M)>dn}).map(C)).concat(vh(fm(g/I)*I,c,I).filter(function(G){return Nn(G%b)>dn}).map(R))}return K.lines=function(){return X().map(function(G){return{type:"LineString",coordinates:G}})},K.outline=function(){return{type:"Polygon",coordinates:[N(l).concat(O(p).slice(1),N(i).reverse().slice(1),O(u).reverse().slice(1))]}},K.extent=function(G){return arguments.length?K.extentMajor(G).extentMinor(G):K.extentMinor()},K.extentMajor=function(G){return arguments.length?(l=+G[0][0],i=+G[1][0],u=+G[0][1],p=+G[1][1],l>i&&(G=l,l=i,i=G),u>p&&(G=u,u=p,p=G),K.precision(he)):[[l,u],[i,p]]},K.extentMinor=function(G){return arguments.length?(t=+G[0][0],e=+G[1][0],g=+G[0][1],c=+G[1][1],t>e&&(G=t,t=e,e=G),g>c&&(G=g,g=c,c=G),K.precision(he)):[[t,g],[e,c]]},K.step=function(G){return arguments.length?K.stepMajor(G).stepMinor(G):K.stepMinor()},K.stepMajor=function(G){return arguments.length?(M=+G[0],b=+G[1],K):[M,b]},K.stepMinor=function(G){return arguments.length?(E=+G[0],I=+G[1],K):[E,I]},K.precision=function(G){return arguments.length?(he=+G,C=BS(g,c,90),R=NS(t,e,he),N=BS(u,p,90),O=NS(l,i,he),K):he},K.extentMajor([[-180,-90+dn],[180,90-dn]]).extentMinor([[-180,-80-dn],[180,80+dn]])}function lR(){return YC()()}function uR(e,t){var i=e[0]*pn,l=e[1]*pn,c=t[0]*pn,g=t[1]*pn,p=on(l),u=Jt(l),E=on(g),I=Jt(g),M=p*on(i),b=p*Jt(i),C=E*on(c),R=E*Jt(c),N=2*so(di(xS(g-l)+p*E*xS(c-i))),O=Jt(N),he=N?function(K){var X=Jt(K*=N)/O,G=Jt(N-K)/O,ae=G*M+X*C,q=G*b+X*R,H=G*u+X*I;return[oo(q,ae)*or,oo(H,di(ae*ae+q*q))*or]}:function(){return[i*or,l*or]};return he.distance=N,he}const Kf=e=>e;var Y0=new Di,H_=new Di,JC,QC,Z_,W_,Da={point:Ir,lineStart:Ir,lineEnd:Ir,polygonStart:function(){Da.lineStart=cR,Da.lineEnd=dR},polygonEnd:function(){Da.lineStart=Da.lineEnd=Da.point=Ir,Y0.add(Nn(H_)),H_=new Di},result:function(){var e=Y0/2;return Y0=new Di,e}};function cR(){Da.point=hR}function hR(e,t){Da.point=eP,JC=Z_=e,QC=W_=t}function eP(e,t){H_.add(W_*e-Z_*t),Z_=e,W_=t}function dR(){eP(JC,QC)}var Uh=1/0,Fg=Uh,Yf=-Uh,Og=Yf,Rg={point:fR,lineStart:Ir,lineEnd:Ir,polygonStart:Ir,polygonEnd:Ir,result:function(){var e=[[Uh,Fg],[Yf,Og]];return Yf=Og=-(Fg=Uh=1/0),e}};function fR(e,t){e<Uh&&(Uh=e),e>Yf&&(Yf=e),t<Fg&&(Fg=t),t>Og&&(Og=t)}var X_=0,q_=0,cf=0,jg=0,Lg=0,_h=0,K_=0,Y_=0,hf=0,tP,nP,la,ua,cs={point:ic,lineStart:US,lineEnd:$S,polygonStart:function(){cs.lineStart=gR,cs.lineEnd=yR},polygonEnd:function(){cs.point=ic,cs.lineStart=US,cs.lineEnd=$S},result:function(){var e=hf?[K_/hf,Y_/hf]:_h?[jg/_h,Lg/_h]:cf?[X_/cf,q_/cf]:[NaN,NaN];return X_=q_=cf=jg=Lg=_h=K_=Y_=hf=0,e}};function ic(e,t){X_+=e,q_+=t,++cf}function US(){cs.point=pR}function pR(e,t){cs.point=mR,ic(la=e,ua=t)}function mR(e,t){var i=e-la,l=t-ua,c=di(i*i+l*l);jg+=c*(la+e)/2,Lg+=c*(ua+t)/2,_h+=c,ic(la=e,ua=t)}function $S(){cs.point=ic}function gR(){cs.point=vR}function yR(){rP(tP,nP)}function vR(e,t){cs.point=rP,ic(tP=la=e,nP=ua=t)}function rP(e,t){var i=e-la,l=t-ua,c=di(i*i+l*l);jg+=c*(la+e)/2,Lg+=c*(ua+t)/2,_h+=c,c=ua*e-la*t,K_+=c*(la+e),Y_+=c*(ua+t),hf+=c*3,ic(la=e,ua=t)}function iP(e){this._context=e}iP.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,io);break}}},result:Ir};var J_=new Di,J0,oP,sP,df,ff,Jf={point:Ir,lineStart:function(){Jf.point=_R},lineEnd:function(){J0&&aP(oP,sP),Jf.point=Ir},polygonStart:function(){J0=!0},polygonEnd:function(){J0=null},result:function(){var e=+J_;return J_=new Di,e}};function _R(e,t){Jf.point=aP,oP=df=e,sP=ff=t}function aP(e,t){df-=e,ff-=t,J_.add(di(df*df+ff*ff)),df=e,ff=t}function lP(){this._string=[]}lP.prototype={_radius:4.5,_circle:VS(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=VS(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function VS(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function xR(e,t){var i=4.5,l,c;function g(p){return p&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),Fs(p,l(c))),c.result()}return g.area=function(p){return Fs(p,l(Da)),Da.result()},g.measure=function(p){return Fs(p,l(Jf)),Jf.result()},g.bounds=function(p){return Fs(p,l(Rg)),Rg.result()},g.centroid=function(p){return Fs(p,l(cs)),cs.result()},g.projection=function(p){return arguments.length?(l=p==null?(e=null,Kf):(e=p).stream,g):e},g.context=function(p){return arguments.length?(c=p==null?(t=null,new lP):new iP(t=p),typeof i!="function"&&c.pointRadius(i),g):t},g.pointRadius=function(p){return arguments.length?(i=typeof p=="function"?p:(c.pointRadius(+p),+p),g):i},g.projection(e).context(t)}function wR(e){return{stream:cp(e)}}function cp(e){return function(t){var i=new Q_;for(var l in e)i[l]=e[l];return i.stream=t,i}}function Q_(){}Q_.prototype={constructor:Q_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function yx(e,t,i){var l=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),l!=null&&e.clipExtent(null),Fs(i,e.stream(Rg)),t(Rg.result()),l!=null&&e.clipExtent(l),e}function cy(e,t,i){return yx(e,function(l){var c=t[1][0]-t[0][0],g=t[1][1]-t[0][1],p=Math.min(c/(l[1][0]-l[0][0]),g/(l[1][1]-l[0][1])),u=+t[0][0]+(c-p*(l[1][0]+l[0][0]))/2,E=+t[0][1]+(g-p*(l[1][1]+l[0][1]))/2;e.scale(150*p).translate([u,E])},i)}function vx(e,t,i){return cy(e,[[0,0],t],i)}function _x(e,t,i){return yx(e,function(l){var c=+t,g=c/(l[1][0]-l[0][0]),p=(c-g*(l[1][0]+l[0][0]))/2,u=-g*l[0][1];e.scale(150*g).translate([p,u])},i)}function xx(e,t,i){return yx(e,function(l){var c=+t,g=c/(l[1][1]-l[0][1]),p=-g*l[0][0],u=(c-g*(l[1][1]+l[0][1]))/2;e.scale(150*g).translate([p,u])},i)}var GS=16,bR=on(30*pn);function HS(e,t){return+t?ER(e,t):SR(e)}function SR(e){return cp({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function ER(e,t){function i(l,c,g,p,u,E,I,M,b,C,R,N,O,he){var K=I-l,X=M-c,G=K*K+X*X;if(G>4*t&&O--){var ae=p+C,q=u+R,H=E+N,T=di(ae*ae+q*q+H*H),j=so(H/=T),D=Nn(Nn(H)-1)<dn||Nn(g-b)<dn?(g+b)/2:oo(q,ae),te=e(D,j),W=te[0],ve=te[1],_e=W-l,pe=ve-c,oe=X*_e-K*pe;(oe*oe/G>t||Nn((K*_e+X*pe)/G-.5)>.3||p*C+u*R+E*N<bR)&&(i(l,c,g,p,u,E,W,ve,D,ae/=T,q/=T,H,O,he),he.point(W,ve),i(W,ve,D,ae,q,H,I,M,b,C,R,N,O,he))}}return function(l){var c,g,p,u,E,I,M,b,C,R,N,O,he={point:K,lineStart:X,lineEnd:ae,polygonStart:function(){l.polygonStart(),he.lineStart=q},polygonEnd:function(){l.polygonEnd(),he.lineStart=X}};function K(j,D){j=e(j,D),l.point(j[0],j[1])}function X(){b=NaN,he.point=G,l.lineStart()}function G(j,D){var te=rc([j,D]),W=e(j,D);i(b,C,M,R,N,O,b=W[0],C=W[1],M=j,R=te[0],N=te[1],O=te[2],GS,l),l.point(b,C)}function ae(){he.point=K,l.lineEnd()}function q(){X(),he.point=H,he.lineEnd=T}function H(j,D){G(c=j,D),g=b,p=C,u=R,E=N,I=O,he.point=G}function T(){i(b,C,M,R,N,O,g,p,c,u,E,I,GS,l),he.lineEnd=ae,ae()}return he}}var TR=cp({point:function(e,t){this.stream.point(e*pn,t*pn)}});function IR(e){return cp({point:function(t,i){var l=e(t,i);return this.stream.point(l[0],l[1])}})}function CR(e,t,i,l,c){function g(p,u){return p*=l,u*=c,[t+e*p,i-e*u]}return g.invert=function(p,u){return[(p-t)/e*l,(i-u)/e*c]},g}function ZS(e,t,i,l,c,g){if(!g)return CR(e,t,i,l,c);var p=on(g),u=Jt(g),E=p*e,I=u*e,M=p/e,b=u/e,C=(u*i-p*t)/e,R=(u*t+p*i)/e;function N(O,he){return O*=l,he*=c,[E*O-I*he+t,i-I*O-E*he]}return N.invert=function(O,he){return[l*(M*O-b*he+C),c*(R-b*O-M*he)]},N}function ya(e){return wx(function(){return e})()}function wx(e){var t,i=150,l=480,c=250,g=0,p=0,u=0,E=0,I=0,M,b=0,C=1,R=1,N=null,O=U_,he=null,K,X,G,ae=Kf,q=.5,H,T,j,D,te;function W(oe){return j(oe[0]*pn,oe[1]*pn)}function ve(oe){return oe=j.invert(oe[0],oe[1]),oe&&[oe[0]*or,oe[1]*or]}W.stream=function(oe){return D&&te===oe?D:D=TR(IR(M)(O(H(ae(te=oe)))))},W.preclip=function(oe){return arguments.length?(O=oe,N=void 0,pe()):O},W.postclip=function(oe){return arguments.length?(ae=oe,he=K=X=G=null,pe()):ae},W.clipAngle=function(oe){return arguments.length?(O=+oe?XC(N=oe*pn):(N=null,U_),pe()):N*or},W.clipExtent=function(oe){return arguments.length?(ae=oe==null?(he=K=X=G=null,Kf):uy(he=+oe[0][0],K=+oe[0][1],X=+oe[1][0],G=+oe[1][1]),pe()):he==null?null:[[he,K],[X,G]]},W.scale=function(oe){return arguments.length?(i=+oe,_e()):i},W.translate=function(oe){return arguments.length?(l=+oe[0],c=+oe[1],_e()):[l,c]},W.center=function(oe){return arguments.length?(g=oe[0]%360*pn,p=oe[1]%360*pn,_e()):[g*or,p*or]},W.rotate=function(oe){return arguments.length?(u=oe[0]%360*pn,E=oe[1]%360*pn,I=oe.length>2?oe[2]%360*pn:0,_e()):[u*or,E*or,I*or]},W.angle=function(oe){return arguments.length?(b=oe%360*pn,_e()):b*or},W.reflectX=function(oe){return arguments.length?(C=oe?-1:1,_e()):C<0},W.reflectY=function(oe){return arguments.length?(R=oe?-1:1,_e()):R<0},W.precision=function(oe){return arguments.length?(H=HS(T,q=oe*oe),pe()):di(q)},W.fitExtent=function(oe,ce){return cy(W,oe,ce)},W.fitSize=function(oe,ce){return vx(W,oe,ce)},W.fitWidth=function(oe,ce){return _x(W,oe,ce)},W.fitHeight=function(oe,ce){return xx(W,oe,ce)};function _e(){var oe=ZS(i,0,0,C,R,b).apply(null,t(g,p)),ce=ZS(i,l-oe[0],c-oe[1],C,R,b);return M=gx(u,E,I),T=B_(t,ce),j=B_(M,T),H=HS(T,q),pe()}function pe(){return D=te=null,W}return function(){return t=e.apply(this,arguments),W.invert=t.invert&&ve,_e()}}function bx(e){var t=0,i=kn/3,l=wx(e),c=l(t,i);return c.parallels=function(g){return arguments.length?l(t=g[0]*pn,i=g[1]*pn):[t*or,i*or]},c}function PR(e){var t=on(e);function i(l,c){return[l*t,Jt(c)/t]}return i.invert=function(l,c){return[l/t,so(c*t)]},i}function uP(e,t){var i=Jt(e),l=(i+Jt(t))/2;if(Nn(l)<dn)return PR(e);var c=1+i*(2*l-i),g=di(c)/l;function p(u,E){var I=di(c-2*l*Jt(E))/l;return[I*Jt(u*=l),g-I*on(u)]}return p.invert=function(u,E){var I=g-E,M=oo(u,Nn(I))*ds(I);return I*l<0&&(M-=kn*ds(u)*ds(I)),[M/l,so((c-(u*u+I*I)*l*l)/(2*l))]},p}function Dg(){return bx(uP).scale(155.424).center([0,33.6442])}function cP(){return Dg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function AR(e){var t=e.length;return{point:function(i,l){for(var c=-1;++c<t;)e[c].point(i,l)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function MR(){var e,t,i=cP(),l,c=Dg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),g,p=Dg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,E,I={point:function(C,R){E=[C,R]}};function M(C){var R=C[0],N=C[1];return E=null,l.point(R,N),E||(g.point(R,N),E)||(u.point(R,N),E)}M.invert=function(C){var R=i.scale(),N=i.translate(),O=(C[0]-N[0])/R,he=(C[1]-N[1])/R;return(he>=.12&&he<.234&&O>=-.425&&O<-.214?c:he>=.166&&he<.234&&O>=-.214&&O<-.115?p:i).invert(C)},M.stream=function(C){return e&&t===C?e:e=AR([i.stream(t=C),c.stream(C),p.stream(C)])},M.precision=function(C){return arguments.length?(i.precision(C),c.precision(C),p.precision(C),b()):i.precision()},M.scale=function(C){return arguments.length?(i.scale(C),c.scale(C*.35),p.scale(C),M.translate(i.translate())):i.scale()},M.translate=function(C){if(!arguments.length)return i.translate();var R=i.scale(),N=+C[0],O=+C[1];return l=i.translate(C).clipExtent([[N-.455*R,O-.238*R],[N+.455*R,O+.238*R]]).stream(I),g=c.translate([N-.307*R,O+.201*R]).clipExtent([[N-.425*R+dn,O+.12*R+dn],[N-.214*R-dn,O+.234*R-dn]]).stream(I),u=p.translate([N-.205*R,O+.212*R]).clipExtent([[N-.214*R+dn,O+.166*R+dn],[N-.115*R-dn,O+.234*R-dn]]).stream(I),b()},M.fitExtent=function(C,R){return cy(M,C,R)},M.fitSize=function(C,R){return vx(M,C,R)},M.fitWidth=function(C,R){return _x(M,C,R)},M.fitHeight=function(C,R){return xx(M,C,R)};function b(){return e=t=null,M}return M.scale(1070)}function hP(e){return function(t,i){var l=on(t),c=on(i),g=e(l*c);return g===1/0?[2,0]:[g*c*Jt(t),g*Jt(i)]}}function hp(e){return function(t,i){var l=di(t*t+i*i),c=e(l),g=Jt(c),p=on(c);return[oo(t*g,l*p),so(l&&i*g/l)]}}var Sx=hP(function(e){return di(2/(1+e))});Sx.invert=hp(function(e){return 2*so(e/2)});function kR(){return ya(Sx).scale(124.75).clipAngle(180-.001)}var Ex=hP(function(e){return(e=kC(e))&&e/Jt(e)});Ex.invert=hp(function(e){return e});function zR(){return ya(Ex).scale(79.4188).clipAngle(180-.001)}function dp(e,t){return[e,vg(px((Rr+t)/2))]}dp.invert=function(e,t){return[e,2*Xh(MC(t))-Rr]};function FR(){return dP(dp).scale(961/io)}function dP(e){var t=ya(e),i=t.center,l=t.scale,c=t.translate,g=t.clipExtent,p=null,u,E,I;t.scale=function(b){return arguments.length?(l(b),M()):l()},t.translate=function(b){return arguments.length?(c(b),M()):c()},t.center=function(b){return arguments.length?(i(b),M()):i()},t.clipExtent=function(b){return arguments.length?(b==null?p=u=E=I=null:(p=+b[0][0],u=+b[0][1],E=+b[1][0],I=+b[1][1]),M()):p==null?null:[[p,u],[E,I]]};function M(){var b=kn*l(),C=t($C(t.rotate()).invert([0,0]));return g(p==null?[[C[0]-b,C[1]-b],[C[0]+b,C[1]+b]]:e===dp?[[Math.max(C[0]-b,p),u],[Math.min(C[0]+b,E),I]]:[[p,Math.max(C[1]-b,u)],[E,Math.min(C[1]+b,I)]])}return M()}function vm(e){return px((Rr+e)/2)}function fP(e,t){var i=on(e),l=e===t?Jt(e):vg(i/on(t))/vg(vm(t)/vm(e)),c=i*X0(vm(e),l)/l;if(!l)return dp;function g(p,u){c>0?u<-Rr+dn&&(u=-Rr+dn):u>Rr-dn&&(u=Rr-dn);var E=c/X0(vm(u),l);return[E*Jt(l*p),c-E*on(l*p)]}return g.invert=function(p,u){var E=c-u,I=ds(l)*di(p*p+E*E),M=oo(p,Nn(E))*ds(E);return E*l<0&&(M-=kn*ds(p)*ds(E)),[M/l,2*Xh(X0(c/I,1/l))-Rr]},g}function OR(){return bx(fP).scale(109.5).parallels([30,30])}function Qf(e,t){return[e,t]}Qf.invert=Qf;function RR(){return ya(Qf).scale(152.63)}function pP(e,t){var i=on(e),l=e===t?Jt(e):(i-on(t))/(t-e),c=i/l+e;if(Nn(l)<dn)return Qf;function g(p,u){var E=c-u,I=l*p;return[E*Jt(I),c-E*on(I)]}return g.invert=function(p,u){var E=c-u,I=oo(p,Nn(E))*ds(E);return E*l<0&&(I-=kn*ds(p)*ds(E)),[I/l,c-ds(l)*di(p*p+E*E)]},g}function jR(){return bx(pP).scale(131.154).center([0,13.9389])}var If=1.340264,Cf=-.081106,Pf=893e-6,Af=.003796,Bg=di(3)/2,LR=12;function Tx(e,t){var i=so(Bg*Jt(t)),l=i*i,c=l*l*l;return[e*on(i)/(Bg*(If+3*Cf*l+c*(7*Pf+9*Af*l))),i*(If+Cf*l+c*(Pf+Af*l))]}Tx.invert=function(e,t){for(var i=t,l=i*i,c=l*l*l,g=0,p,u,E;g<LR&&(u=i*(If+Cf*l+c*(Pf+Af*l))-t,E=If+3*Cf*l+c*(7*Pf+9*Af*l),i-=p=u/E,l=i*i,c=l*l*l,!(Nn(p)<qf));++g);return[Bg*e*(If+3*Cf*l+c*(7*Pf+9*Af*l))/on(i),so(Jt(i)/Bg)]};function DR(){return ya(Tx).scale(177.158)}function Ix(e,t){var i=on(t),l=on(e)*i;return[i*Jt(e)/l,Jt(t)/l]}Ix.invert=hp(Xh);function BR(){return ya(Ix).scale(144.049).clipAngle(60)}function NR(){var e=1,t=0,i=0,l=1,c=1,g=0,p,u,E=null,I,M,b,C=1,R=1,N=cp({point:function(ae,q){var H=G([ae,q]);this.stream.point(H[0],H[1])}}),O=Kf,he,K;function X(){return C=e*l,R=e*c,he=K=null,G}function G(ae){var q=ae[0]*C,H=ae[1]*R;if(g){var T=H*p-q*u;q=q*p+H*u,H=T}return[q+t,H+i]}return G.invert=function(ae){var q=ae[0]-t,H=ae[1]-i;if(g){var T=H*p+q*u;q=q*p-H*u,H=T}return[q/C,H/R]},G.stream=function(ae){return he&&K===ae?he:he=N(O(K=ae))},G.postclip=function(ae){return arguments.length?(O=ae,E=I=M=b=null,X()):O},G.clipExtent=function(ae){return arguments.length?(O=ae==null?(E=I=M=b=null,Kf):uy(E=+ae[0][0],I=+ae[0][1],M=+ae[1][0],b=+ae[1][1]),X()):E==null?null:[[E,I],[M,b]]},G.scale=function(ae){return arguments.length?(e=+ae,X()):e},G.translate=function(ae){return arguments.length?(t=+ae[0],i=+ae[1],X()):[t,i]},G.angle=function(ae){return arguments.length?(g=ae%360*pn,u=Jt(g),p=on(g),X()):g*or},G.reflectX=function(ae){return arguments.length?(l=ae?-1:1,X()):l<0},G.reflectY=function(ae){return arguments.length?(c=ae?-1:1,X()):c<0},G.fitExtent=function(ae,q){return cy(G,ae,q)},G.fitSize=function(ae,q){return vx(G,ae,q)},G.fitWidth=function(ae,q){return _x(G,ae,q)},G.fitHeight=function(ae,q){return xx(G,ae,q)},G}function Cx(e,t){var i=t*t,l=i*i;return[e*(.8707-.131979*i+l*(-.013791+l*(.003971*i-.001529*l))),t*(1.007226+i*(.015085+l*(-.044475+.028874*i-.005916*l)))]}Cx.invert=function(e,t){var i=t,l=25,c;do{var g=i*i,p=g*g;i-=c=(i*(1.007226+g*(.015085+p*(-.044475+.028874*g-.005916*p)))-t)/(1.007226+g*(.015085*3+p*(-.044475*7+.028874*9*g-.005916*11*p)))}while(Nn(c)>dn&&--l>0);return[e/(.8707+(g=i*i)*(-.131979+g*(-.013791+g*g*g*(.003971-.001529*g)))),i]};function UR(){return ya(Cx).scale(175.295)}function Px(e,t){return[on(t)*Jt(e),Jt(t)]}Px.invert=hp(so);function $R(){return ya(Px).scale(249.5).clipAngle(90+dn)}function Ax(e,t){var i=on(t),l=1+on(e)*i;return[i*Jt(e)/l,Jt(t)/l]}Ax.invert=hp(function(e){return 2*Xh(e)});function VR(){return ya(Ax).scale(250).clipAngle(142)}function Mx(e,t){return[vg(px((Rr+t)/2)),-e]}Mx.invert=function(e,t){return[-t,2*Xh(MC(e))-Rr]};function GR(){var e=dP(Mx),t=e.center,i=e.rotate;return e.center=function(l){return arguments.length?t([-l[1],l[0]]):(l=t(),[l[1],-l[0]])},e.rotate=function(l){return arguments.length?i([l[0],l[1],l.length>2?l[2]+90:90]):(l=i(),[l[0],l[1],l[2]-90])},i([0,0,90]).scale(159.155)}const HR=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:cP,geoAlbersUsa:MR,geoArea:jO,geoAzimuthalEqualArea:kR,geoAzimuthalEqualAreaRaw:Sx,geoAzimuthalEquidistant:zR,geoAzimuthalEquidistantRaw:Ex,geoBounds:NO,geoCentroid:ZO,geoCircle:WO,geoClipAntimeridian:U_,geoClipCircle:XC,geoClipExtent:eR,geoClipRectangle:uy,geoConicConformal:OR,geoConicConformalRaw:fP,geoConicEqualArea:Dg,geoConicEqualAreaRaw:uP,geoConicEquidistant:jR,geoConicEquidistantRaw:pP,geoContains:aR,geoDistance:kg,geoEqualEarth:DR,geoEqualEarthRaw:Tx,geoEquirectangular:RR,geoEquirectangularRaw:Qf,geoGnomonic:BR,geoGnomonicRaw:Ix,geoGraticule:YC,geoGraticule10:lR,geoIdentity:NR,geoInterpolate:uR,geoLength:qC,geoMercator:FR,geoMercatorRaw:dp,geoNaturalEarth1:UR,geoNaturalEarth1Raw:Cx,geoOrthographic:$R,geoOrthographicRaw:Px,geoPath:xR,geoProjection:ya,geoProjectionMutator:wx,geoRotation:$C,geoStereographic:VR,geoStereographicRaw:Ax,geoStream:Fs,geoTransform:wR,geoTransverseMercator:GR,geoTransverseMercatorRaw:Mx},Symbol.toStringTag,{value:"Module"})),ZR=s1(HR);var au=2*Math.PI*6378137/2,WR=Math.PI/180;function mP(e){return e=e||256,2*Math.PI*6378137/e}function XR(e){var t=e[0],i=e[1],l=e[2];return(1<<l)*((1<<l)+t)+i}function e1(e,t,i){var l=gP(e,t,i);return l[0]=Math.floor(l[0]),l[1]=Math.floor(l[1]),l}function gP(e,t,i){var l=t,c=Dx(e[0]),g=Lx(e[1]),p=Math.sin(g*WR),u=Math.pow(2,l),E=u*(c/360+.5),I=u*(.5-.25*Math.log((1+p)/(1-p))/Math.PI);return lc([E,I,l],i)}function qR(e,t=6){var i=e[0],l=e[1],c=e[2],g=e[3],p=(i-c)/2+c,u=(l-g)/2+g;return t!=null&&(p=Number(p.toFixed(t)),u=Number(u.toFixed(t))),[p,u]}function Ng(e,t,i={enable:!0,decimal:1}){e=hy(e,t);var l=e[0],c=e[1],g=l*au/180,p=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return p=p*au/180,i.enable&&(g=Number(g.toFixed(i.decimal)),p=Number(p.toFixed(i.decimal))),[g,p]}function t1(e,t=6){var i=e[0],l=e[1],c=i/au*180,g=l/au*180;return g=180/Math.PI*(2*Math.atan(Math.exp(g*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),g=Number(g.toFixed(t))),[c,g]}function kx(e,t,i){var l=e[0],c=e[1],g=Rx(t,i),p=(l+au)/g,u=(c+au)/g;return[p,u,t]}function yP(e,t,i){e=hy(e,i);var l=Ng(e),c=kx(l,t);return zx(c)}function KR(e,t,i){if(e=hy(e,i),t===0)return[0,0,0];var l=yP(e,t);return _P(l)}function YR(e,t){if(t===0)return[0,0,0];var i=kx(e,t);return zx(i)}function n1(e,t,i=1){var l=e[0],c=e[1],g=e[2],p=Rx(g,t),u=l*p-au,E=c*p-au;return i!=null&&(u=Number(u.toFixed(i)),E=Number(E.toFixed(i))),[u,E]}function zx(e,t,i){t=t||256;var l=e[0],c=e[1],g=e[2];if(g===0)return[0,0,0];Ox(g);var p=Math.ceil(l/t)-1,u=Math.ceil(c/t)-1;return p<0&&(p=0),u<0&&(u=0),[p,u,g]}function Fx(e,t,i){lc(e,i),t=t||256;var l=e[0],c=e[1],g=e[2],p=n1([l*t,c*t,g]),u=n1([(l+1)*t,(c+1)*t,g]);return[p[0],p[1],u[0],u[1]]}function vP(e,t){lc(e,t);var i=e[0],l=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var g=Fx([i,l,c]),p=g[0],u=g[1],E=g[2],I=g[3],M=t1([p,u,c]),b=t1([E,I,c]);return[M[0],M[1],b[0],b[1]]}function JR(e){var t=fp(e);return Fx(t)}function QR(e){var t=fp(e);return vP(t)}function _P(e,t){lc(e,t);var i=e[0],l=e[1],c=e[2];if(c===0)return[0,0,0];var g=i,p=Math.pow(2,c)-1-l;return[g,p,c]}function fp(e){var t=e[0],i=e[1],l=e[2],c=t,g=Math.pow(2,l)-i-1;return[c,g,l]}function ej(e){var t=fp(e);return xP(t)}function xP(e,t){lc(e,t);var i=e[0],l=e[1],c=e[2];if(c===0)return"";var g="";return l=Math.pow(2,c)-1-l,jx(c,0,-1).map(function(p){var u=0,E=1<<p-1;i&E&&(u+=1),l&E&&(u+=2),g=g.concat(u)}),g}function tj(e){var t=wP(e);return fp(t)}function wP(e){var t=0,i=0,l=e.length;return jx(l,0,-1).map(function(c){var g=1<<c-1;switch(parseInt(e[l-c],0)){case 0:break;case 1:t+=g;break;case 2:i+=g;break;case 3:t+=g,i+=g;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,l]}function nj(e){var t=Ng([e[0],e[1]]),i=Ng([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function lc(e,t){var i=e[0],l=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(l==null)throw new Error("<y> is required");return c=Ox(c),e=bP(e),e}function bP(e){var t=e[0],i=e[1],l=e[2],c=Math.pow(2,l);return t=t%c,t<0&&(t=t+c),[t,i,l]}function Ox(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function hy(e,t){if(t===!1)return e;var i=Dx(e[0]),l=Lx(e[1]);return l>85&&(l=85),l<-85&&(l=-85),[i,l]}function Rx(e,t){return mP(t)/Math.pow(2,e)}function jx(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var l=Math.max(Math.ceil((t-e)/i),0),c=Array(l),g=0;g<l;g++,e+=i)c[g]=e;return c}function rj(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],l=e[0][2],c=e[0][3];return e.map(function(g){g[0]<t&&(t=g[0]),g[1]<i&&(i=g[1]),g[2]>l&&(l=g[2]),g[3]>c&&(c=g[3])}),[t,i,l,c]}}function ij(e){try{return lc(e),!0}catch{return!1}}function Lx(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Dx(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function oj(e){var t=e1([e[0],e[1]],32),i=e1([e[2],e[3]],32),l=[t[0],t[1],i[0],i[1]],c=sj(l);if(c===0)return[0,0,0];var g=l[0]>>>32-c,p=l[1]>>>32-c;return[g,p,c]}function sj(e){for(var t=28,i=0;i<t;i++){var l=1<<32-(i+1);if((e[0]&l)!==(e[2]&l)||(e[1]&l)!==(e[3]&l))return i}return t}const aj=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:qR,bboxToMeters:nj,bboxToTile:oj,googleToBBox:QR,googleToBBoxMeters:JR,googleToQuadkey:ej,googleToTile:fp,hash:XR,initialResolution:mP,latitude:Lx,lngLatToGoogle:KR,lngLatToMeters:Ng,lngLatToTile:yP,longitude:Dx,maxBBox:rj,metersToLngLat:t1,metersToPixels:kx,metersToTile:YR,pixelsToMeters:n1,pixelsToTile:zx,pointToTile:e1,pointToTileFraction:gP,quadkeyToGoogle:wP,quadkeyToTile:tj,range:jx,resolution:Rx,tileToBBox:vP,tileToBBoxMeters:Fx,tileToGoogle:_P,tileToQuadkey:xP,validTile:ij,validateLngLat:hy,validateTile:lc,validateZoom:Ox,wrapTile:bP},Symbol.toStringTag,{value:"Module"})),lj=s1(aj);var dy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */dy.read=function(e,t,i,l,c){var g,p,u=c*8-l-1,E=(1<<u)-1,I=E>>1,M=-7,b=i?c-1:0,C=i?-1:1,R=e[t+b];for(b+=C,g=R&(1<<-M)-1,R>>=-M,M+=u;M>0;g=g*256+e[t+b],b+=C,M-=8);for(p=g&(1<<-M)-1,g>>=-M,M+=l;M>0;p=p*256+e[t+b],b+=C,M-=8);if(g===0)g=1-I;else{if(g===E)return p?NaN:(R?-1:1)*(1/0);p=p+Math.pow(2,l),g=g-I}return(R?-1:1)*p*Math.pow(2,g-l)};dy.write=function(e,t,i,l,c,g){var p,u,E,I=g*8-c-1,M=(1<<I)-1,b=M>>1,C=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=l?0:g-1,N=l?1:-1,O=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,p=M):(p=Math.floor(Math.log(t)/Math.LN2),t*(E=Math.pow(2,-p))<1&&(p--,E*=2),p+b>=1?t+=C/E:t+=C*Math.pow(2,1-b),t*E>=2&&(p++,E/=2),p+b>=M?(u=0,p=M):p+b>=1?(u=(t*E-1)*Math.pow(2,c),p=p+b):(u=t*Math.pow(2,b-1)*Math.pow(2,c),p=0));c>=8;e[i+R]=u&255,R+=N,u/=256,c-=8);for(p=p<<c|u,I+=c;I>0;e[i+R]=p&255,R+=N,p/=256,I-=8);e[i+R-N]|=O*128};var uj=Xn,_m=dy;function Xn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Xn.Varint=0;Xn.Fixed64=1;Xn.Bytes=2;Xn.Fixed32=5;var r1=65536*65536,WS=1/r1,cj=12,SP=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");Xn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var l=this.readVarint(),c=l>>3,g=this.pos;this.type=l&7,e(c,t,this),this.pos===g&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=xm(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=qS(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=xm(this.buf,this.pos)+xm(this.buf,this.pos+4)*r1;return this.pos+=8,e},readSFixed64:function(){var e=xm(this.buf,this.pos)+qS(this.buf,this.pos+4)*r1;return this.pos+=8,e},readFloat:function(){var e=_m.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=_m.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,l;return l=t[this.pos++],i=l&127,l<128||(l=t[this.pos++],i|=(l&127)<<7,l<128)||(l=t[this.pos++],i|=(l&127)<<14,l<128)||(l=t[this.pos++],i|=(l&127)<<21,l<128)?i:(l=t[this.pos],i|=(l&15)<<28,hj(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=cj&&SP?Tj(this.buf,t,e):Ej(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Xn.Bytes)return e.push(this.readVarint(t));var i=Oa(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSVarint());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Xn.Bytes)return e.push(this.readBoolean());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFloat());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Xn.Bytes)return e.push(this.readDouble());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFixed32());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSFixed32());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFixed64());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSFixed64());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Xn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Xn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Xn.Fixed32)this.pos+=4;else if(t===Xn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),eh(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),eh(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),eh(this.buf,e&-1,this.pos),eh(this.buf,Math.floor(e*WS),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),eh(this.buf,e&-1,this.pos),eh(this.buf,Math.floor(e*WS),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){dj(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=Ij(this.buf,e,this.pos);var i=this.pos-t;i>=128&&XS(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),_m.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),_m.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var l=this.pos-i;l>=128&&XS(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,i){this.writeTag(e,Xn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,mj,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,gj,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,_j,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,yj,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,vj,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,xj,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,wj,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,bj,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Sj,t)},writeBytesField:function(e,t){this.writeTag(e,Xn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Xn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Xn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Xn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function hj(e,t,i){var l=i.buf,c,g;if(g=l[i.pos++],c=(g&112)>>4,g<128||(g=l[i.pos++],c|=(g&127)<<3,g<128)||(g=l[i.pos++],c|=(g&127)<<10,g<128)||(g=l[i.pos++],c|=(g&127)<<17,g<128)||(g=l[i.pos++],c|=(g&127)<<24,g<128)||(g=l[i.pos++],c|=(g&1)<<31,g<128))return Qc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Oa(e){return e.type===Xn.Bytes?e.readVarint()+e.pos:e.pos+1}function Qc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function dj(e,t){var i,l;if(e>=0?(i=e%4294967296|0,l=e/4294967296|0):(i=~(-e%4294967296),l=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,l=l+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),fj(i,l,t),pj(l,t)}function fj(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function pj(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function XS(e,t,i){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(l);for(var c=i.pos-1;c>=e;c--)i.buf[c+l]=i.buf[c]}function mj(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function gj(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function yj(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function vj(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function _j(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function xj(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function wj(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function bj(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function Sj(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function xm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function eh(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function qS(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Ej(e,t,i){for(var l="",c=t;c<i;){var g=e[c],p=null,u=g>239?4:g>223?3:g>191?2:1;if(c+u>i)break;var E,I,M;u===1?g<128&&(p=g):u===2?(E=e[c+1],(E&192)===128&&(p=(g&31)<<6|E&63,p<=127&&(p=null))):u===3?(E=e[c+1],I=e[c+2],(E&192)===128&&(I&192)===128&&(p=(g&15)<<12|(E&63)<<6|I&63,(p<=2047||p>=55296&&p<=57343)&&(p=null))):u===4&&(E=e[c+1],I=e[c+2],M=e[c+3],(E&192)===128&&(I&192)===128&&(M&192)===128&&(p=(g&15)<<18|(E&63)<<12|(I&63)<<6|M&63,(p<=65535||p>=1114112)&&(p=null))),p===null?(p=65533,u=1):p>65535&&(p-=65536,l+=String.fromCharCode(p>>>10&1023|55296),p=56320|p&1023),l+=String.fromCharCode(p),c+=u}return l}function Tj(e,t,i){return SP.decode(e.subarray(t,i))}function Ij(e,t,i){for(var l=0,c,g;l<t.length;l++){if(c=t.charCodeAt(l),c>55295&&c<57344)if(g)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,g=c;continue}else c=g-55296<<10|c-56320|65536,g=null;else{c>56319||l+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):g=c;continue}else g&&(e[i++]=239,e[i++]=191,e[i++]=189,g=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var Bx={exports:{}},EP=function(t,i){return function(){for(var c=new Array(arguments.length),g=0;g<c.length;g++)c[g]=arguments[g];return t.apply(i,c)}},Cj=EP,uc=Object.prototype.toString;function Nx(e){return uc.call(e)==="[object Array]"}function i1(e){return typeof e>"u"}function Pj(e){return e!==null&&!i1(e)&&e.constructor!==null&&!i1(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Aj(e){return uc.call(e)==="[object ArrayBuffer]"}function Mj(e){return typeof FormData<"u"&&e instanceof FormData}function kj(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function zj(e){return typeof e=="string"}function Fj(e){return typeof e=="number"}function TP(e){return e!==null&&typeof e=="object"}function Bm(e){if(uc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Oj(e){return uc.call(e)==="[object Date]"}function Rj(e){return uc.call(e)==="[object File]"}function jj(e){return uc.call(e)==="[object Blob]"}function IP(e){return uc.call(e)==="[object Function]"}function Lj(e){return TP(e)&&IP(e.pipe)}function Dj(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function Bj(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Nj(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Ux(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Nx(e))for(var i=0,l=e.length;i<l;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function o1(){var e={};function t(c,g){Bm(e[g])&&Bm(c)?e[g]=o1(e[g],c):Bm(c)?e[g]=o1({},c):Nx(c)?e[g]=c.slice():e[g]=c}for(var i=0,l=arguments.length;i<l;i++)Ux(arguments[i],t);return e}function Uj(e,t,i){return Ux(t,function(c,g){i&&typeof c=="function"?e[g]=Cj(c,i):e[g]=c}),e}function $j(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Jo={isArray:Nx,isArrayBuffer:Aj,isBuffer:Pj,isFormData:Mj,isArrayBufferView:kj,isString:zj,isNumber:Fj,isObject:TP,isPlainObject:Bm,isUndefined:i1,isDate:Oj,isFile:Rj,isBlob:jj,isFunction:IP,isStream:Lj,isURLSearchParams:Dj,isStandardBrowserEnv:Nj,forEach:Ux,merge:o1,extend:Uj,trim:Bj,stripBOM:$j},th=Jo;function KS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var CP=function(t,i,l){if(!i)return t;var c;if(l)c=l(i);else if(th.isURLSearchParams(i))c=i.toString();else{var g=[];th.forEach(i,function(E,I){E===null||typeof E>"u"||(th.isArray(E)?I=I+"[]":E=[E],th.forEach(E,function(b){th.isDate(b)?b=b.toISOString():th.isObject(b)&&(b=JSON.stringify(b)),g.push(KS(I)+"="+KS(b))}))}),c=g.join("&")}if(c){var p=t.indexOf("#");p!==-1&&(t=t.slice(0,p)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},Vj=Jo;function fy(){this.handlers=[]}fy.prototype.use=function(t,i,l){return this.handlers.push({fulfilled:t,rejected:i,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1};fy.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};fy.prototype.forEach=function(t){Vj.forEach(this.handlers,function(l){l!==null&&t(l)})};var Gj=fy,Hj=Jo,Zj=function(t,i){Hj.forEach(t,function(c,g){g!==i&&g.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[g])})},PP=function(t,i,l,c,g){return t.config=i,l&&(t.code=l),t.request=c,t.response=g,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},Q0,YS;function AP(){if(YS)return Q0;YS=1;var e=PP;return Q0=function(i,l,c,g,p){var u=new Error(i);return e(u,l,c,g,p)},Q0}var ev,JS;function Wj(){if(JS)return ev;JS=1;var e=AP();return ev=function(i,l,c){var g=c.config.validateStatus;!c.status||!g||g(c.status)?i(c):l(e("Request failed with status code "+c.status,c.config,null,c.request,c))},ev}var tv,QS;function Xj(){if(QS)return tv;QS=1;var e=Jo;return tv=e.isStandardBrowserEnv()?function(){return{write:function(l,c,g,p,u,E){var I=[];I.push(l+"="+encodeURIComponent(c)),e.isNumber(g)&&I.push("expires="+new Date(g).toGMTString()),e.isString(p)&&I.push("path="+p),e.isString(u)&&I.push("domain="+u),E===!0&&I.push("secure"),document.cookie=I.join("; ")},read:function(l){var c=document.cookie.match(new RegExp("(^|;\\s*)("+l+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(l){this.write(l,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),tv}var nv,eE;function qj(){return eE||(eE=1,nv=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),nv}var rv,tE;function Kj(){return tE||(tE=1,rv=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),rv}var iv,nE;function Yj(){if(nE)return iv;nE=1;var e=qj(),t=Kj();return iv=function(l,c){return l&&!e(c)?t(l,c):c},iv}var ov,rE;function Jj(){if(rE)return ov;rE=1;var e=Jo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return ov=function(l){var c={},g,p,u;return l&&e.forEach(l.split(`
`),function(I){if(u=I.indexOf(":"),g=e.trim(I.substr(0,u)).toLowerCase(),p=e.trim(I.substr(u+1)),g){if(c[g]&&t.indexOf(g)>=0)return;g==="set-cookie"?c[g]=(c[g]?c[g]:[]).concat([p]):c[g]=c[g]?c[g]+", "+p:p}}),c},ov}var sv,iE;function Qj(){if(iE)return sv;iE=1;var e=Jo;return sv=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),l=document.createElement("a"),c;function g(p){var u=p;return i&&(l.setAttribute("href",u),u=l.href),l.setAttribute("href",u),{href:l.href,protocol:l.protocol?l.protocol.replace(/:$/,""):"",host:l.host,search:l.search?l.search.replace(/^\?/,""):"",hash:l.hash?l.hash.replace(/^#/,""):"",hostname:l.hostname,port:l.port,pathname:l.pathname.charAt(0)==="/"?l.pathname:"/"+l.pathname}}return c=g(window.location.href),function(u){var E=e.isString(u)?g(u):u;return E.protocol===c.protocol&&E.host===c.host}}():function(){return function(){return!0}}(),sv}var av,oE;function sE(){if(oE)return av;oE=1;var e=Jo,t=Wj(),i=Xj(),l=CP,c=Yj(),g=Jj(),p=Qj(),u=AP();return av=function(I){return new Promise(function(b,C){var R=I.data,N=I.headers,O=I.responseType;e.isFormData(R)&&delete N["Content-Type"];var he=new XMLHttpRequest;if(I.auth){var K=I.auth.username||"",X=I.auth.password?unescape(encodeURIComponent(I.auth.password)):"";N.Authorization="Basic "+btoa(K+":"+X)}var G=c(I.baseURL,I.url);he.open(I.method.toUpperCase(),l(G,I.params,I.paramsSerializer),!0),he.timeout=I.timeout;function ae(){if(he){var H="getAllResponseHeaders"in he?g(he.getAllResponseHeaders()):null,T=!O||O==="text"||O==="json"?he.responseText:he.response,j={data:T,status:he.status,statusText:he.statusText,headers:H,config:I,request:he};t(b,C,j),he=null}}if("onloadend"in he?he.onloadend=ae:he.onreadystatechange=function(){!he||he.readyState!==4||he.status===0&&!(he.responseURL&&he.responseURL.indexOf("file:")===0)||setTimeout(ae)},he.onabort=function(){he&&(C(u("Request aborted",I,"ECONNABORTED",he)),he=null)},he.onerror=function(){C(u("Network Error",I,null,he)),he=null},he.ontimeout=function(){var T="timeout of "+I.timeout+"ms exceeded";I.timeoutErrorMessage&&(T=I.timeoutErrorMessage),C(u(T,I,I.transitional&&I.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",he)),he=null},e.isStandardBrowserEnv()){var q=(I.withCredentials||p(G))&&I.xsrfCookieName?i.read(I.xsrfCookieName):void 0;q&&(N[I.xsrfHeaderName]=q)}"setRequestHeader"in he&&e.forEach(N,function(T,j){typeof R>"u"&&j.toLowerCase()==="content-type"?delete N[j]:he.setRequestHeader(j,T)}),e.isUndefined(I.withCredentials)||(he.withCredentials=!!I.withCredentials),O&&O!=="json"&&(he.responseType=I.responseType),typeof I.onDownloadProgress=="function"&&he.addEventListener("progress",I.onDownloadProgress),typeof I.onUploadProgress=="function"&&he.upload&&he.upload.addEventListener("progress",I.onUploadProgress),I.cancelToken&&I.cancelToken.promise.then(function(T){he&&(he.abort(),C(T),he=null)}),R||(R=null),he.send(R)})},av}var bi=Jo,aE=Zj,eL=PP,tL={"Content-Type":"application/x-www-form-urlencoded"};function lE(e,t){!bi.isUndefined(e)&&bi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function nL(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=sE()),e}function rL(e,t,i){if(bi.isString(e))try{return(t||JSON.parse)(e),bi.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(0,JSON.stringify)(e)}var py={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:nL(),transformRequest:[function(t,i){return aE(i,"Accept"),aE(i,"Content-Type"),bi.isFormData(t)||bi.isArrayBuffer(t)||bi.isBuffer(t)||bi.isStream(t)||bi.isFile(t)||bi.isBlob(t)?t:bi.isArrayBufferView(t)?t.buffer:bi.isURLSearchParams(t)?(lE(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):bi.isObject(t)||i&&i["Content-Type"]==="application/json"?(lE(i,"application/json"),rL(t)):t}],transformResponse:[function(t){var i=this.transitional,l=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,g=!l&&this.responseType==="json";if(g||c&&bi.isString(t)&&t.length)try{return JSON.parse(t)}catch(p){if(g)throw p.name==="SyntaxError"?eL(p,this,"E_JSON_PARSE"):p}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};py.headers={common:{Accept:"application/json, text/plain, */*"}};bi.forEach(["delete","get","head"],function(t){py.headers[t]={}});bi.forEach(["post","put","patch"],function(t){py.headers[t]=bi.merge(tL)});var $x=py,iL=Jo,oL=$x,sL=function(t,i,l){var c=this||oL;return iL.forEach(l,function(p){t=p.call(c,t,i)}),t},lv,uE;function MP(){return uE||(uE=1,lv=function(t){return!!(t&&t.__CANCEL__)}),lv}var cE=Jo,uv=sL,aL=MP(),lL=$x;function cv(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var uL=function(t){cv(t),t.headers=t.headers||{},t.data=uv.call(t,t.data,t.headers,t.transformRequest),t.headers=cE.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),cE.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||lL.adapter;return i(t).then(function(c){return cv(t),c.data=uv.call(t,c.data,c.headers,t.transformResponse),c},function(c){return aL(c)||(cv(t),c&&c.response&&(c.response.data=uv.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},ji=Jo,kP=function(t,i){i=i||{};var l={},c=["url","method","data"],g=["headers","auth","proxy","params"],p=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function E(C,R){return ji.isPlainObject(C)&&ji.isPlainObject(R)?ji.merge(C,R):ji.isPlainObject(R)?ji.merge({},R):ji.isArray(R)?R.slice():R}function I(C){ji.isUndefined(i[C])?ji.isUndefined(t[C])||(l[C]=E(void 0,t[C])):l[C]=E(t[C],i[C])}ji.forEach(c,function(R){ji.isUndefined(i[R])||(l[R]=E(void 0,i[R]))}),ji.forEach(g,I),ji.forEach(p,function(R){ji.isUndefined(i[R])?ji.isUndefined(t[R])||(l[R]=E(void 0,t[R])):l[R]=E(void 0,i[R])}),ji.forEach(u,function(R){R in i?l[R]=E(t[R],i[R]):R in t&&(l[R]=E(void 0,t[R]))});var M=c.concat(g).concat(p).concat(u),b=Object.keys(t).concat(Object.keys(i)).filter(function(R){return M.indexOf(R)===-1});return ji.forEach(b,I),l};const cL="axios",hL="0.21.4",dL="Promise based HTTP client for the browser and node.js",fL="index.js",pL={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},mL={type:"git",url:"https://github.com/axios/axios.git"},gL=["xhr","http","ajax","promise","node"],yL="Matt Zabriskie",vL="MIT",_L={url:"https://github.com/axios/axios/issues"},xL="https://axios-http.com",wL={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},bL={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},SL="dist/axios.min.js",EL="dist/axios.min.js",TL="./index.d.ts",IL={"follow-redirects":"^1.14.0"},CL=[{path:"./dist/axios.min.js",threshold:"5kB"}],PL={name:cL,version:hL,description:dL,main:fL,scripts:pL,repository:mL,keywords:gL,author:yL,license:vL,bugs:_L,homepage:xL,devDependencies:wL,browser:bL,jsdelivr:SL,unpkg:EL,typings:TL,dependencies:IL,bundlesize:CL};var zP=PL,Vx={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Vx[e]=function(l){return typeof l===e||"a"+(t<1?"n ":" ")+e}});var hE={},AL=zP.version.split(".");function FP(e,t){for(var i=t?t.split("."):AL,l=e.split("."),c=0;c<3;c++){if(i[c]>l[c])return!0;if(i[c]<l[c])return!1}return!1}Vx.transitional=function(t,i,l){var c=i&&FP(i);function g(p,u){return"[Axios v"+zP.version+"] Transitional option '"+p+"'"+u+(l?". "+l:"")}return function(p,u,E){if(t===!1)throw new Error(g(u," has been removed in "+i));return c&&!hE[u]&&(hE[u]=!0,console.warn(g(u," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(p,u,E):!0}};function ML(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var l=Object.keys(e),c=l.length;c-- >0;){var g=l[c],p=t[g];if(p){var u=e[g],E=u===void 0||p(u,g,e);if(E!==!0)throw new TypeError("option "+g+" must be "+E);continue}if(i!==!0)throw Error("Unknown option "+g)}}var kL={isOlderVersion:FP,assertOptions:ML,validators:Vx},OP=Jo,zL=CP,dE=Gj,fE=uL,my=kP,RP=kL,nh=RP.validators;function pp(e){this.defaults=e,this.interceptors={request:new dE,response:new dE}}pp.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=my(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&RP.assertOptions(i,{silentJSONParsing:nh.transitional(nh.boolean,"1.0.0"),forcedJSONParsing:nh.transitional(nh.boolean,"1.0.0"),clarifyTimeoutError:nh.transitional(nh.boolean,"1.0.0")},!1);var l=[],c=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(t)===!1||(c=c&&C.synchronous,l.unshift(C.fulfilled,C.rejected))});var g=[];this.interceptors.response.forEach(function(C){g.push(C.fulfilled,C.rejected)});var p;if(!c){var u=[fE,void 0];for(Array.prototype.unshift.apply(u,l),u=u.concat(g),p=Promise.resolve(t);u.length;)p=p.then(u.shift(),u.shift());return p}for(var E=t;l.length;){var I=l.shift(),M=l.shift();try{E=I(E)}catch(b){M(b);break}}try{p=fE(E)}catch(b){return Promise.reject(b)}for(;g.length;)p=p.then(g.shift(),g.shift());return p};pp.prototype.getUri=function(t){return t=my(this.defaults,t),zL(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};OP.forEach(["delete","get","head","options"],function(t){pp.prototype[t]=function(i,l){return this.request(my(l||{},{method:t,url:i,data:(l||{}).data}))}});OP.forEach(["post","put","patch"],function(t){pp.prototype[t]=function(i,l,c){return this.request(my(c||{},{method:t,url:i,data:l}))}});var FL=pp,hv,pE;function jP(){if(pE)return hv;pE=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,hv=e,hv}var dv,mE;function OL(){if(mE)return dv;mE=1;var e=jP();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var l;this.promise=new Promise(function(p){l=p});var c=this;i(function(p){c.reason||(c.reason=new e(p),l(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var l,c=new t(function(p){l=p});return{token:c,cancel:l}},dv=t,dv}var fv,gE;function RL(){return gE||(gE=1,fv=function(t){return function(l){return t.apply(null,l)}}),fv}var pv,yE;function jL(){return yE||(yE=1,pv=function(t){return typeof t=="object"&&t.isAxiosError===!0}),pv}var vE=Jo,LL=EP,Nm=FL,DL=kP,BL=$x;function LP(e){var t=new Nm(e),i=LL(Nm.prototype.request,t);return vE.extend(i,Nm.prototype,t),vE.extend(i,t),i}var Bs=LP(BL);Bs.Axios=Nm;Bs.create=function(t){return LP(DL(Bs.defaults,t))};Bs.Cancel=jP();Bs.CancelToken=OL();Bs.isCancel=MP();Bs.all=function(t){return Promise.all(t)};Bs.spread=RL();Bs.isAxiosError=jL();Bx.exports=Bs;Bx.exports.default=Bs;var NL=Bx.exports,UL=NL;const $L={},VL=Object.freeze(Object.defineProperty({__proto__:null,default:$L},Symbol.toStringTag,{value:"Module"})),GL=s1(VL);var gy={},HL=Ph;function Ph(e,t){this.x=e,this.y=t}Ph.prototype={clone:function(){return new Ph(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),l=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=l,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),l=Math.sin(e),c=t.x+i*(this.x-t.x)-l*(this.y-t.y),g=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};Ph.convert=function(e){return e instanceof Ph?e:Array.isArray(e)?new Ph(e[0],e[1]):e};var ZL=HL,DP=$h;function $h(e,t,i,l,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=c,e.readFields(WL,this,t)}function WL(e,t,i){e==1?t.id=i.readVarint():e==2?XL(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function XL(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var l=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[l]=c}}$h.types=["Unknown","Point","LineString","Polygon"];$h.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,c=0,g=0,p=[],u;e.pos<t;){if(l<=0){var E=e.readVarint();i=E&7,l=E>>3}if(l--,i===1||i===2)c+=e.readSVarint(),g+=e.readSVarint(),i===1&&(u&&p.push(u),u=[]),u.push(new ZL(c,g));else if(i===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+i)}return u&&p.push(u),p};$h.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,c=0,g=0,p=1/0,u=-1/0,E=1/0,I=-1/0;e.pos<t;){if(l<=0){var M=e.readVarint();i=M&7,l=M>>3}if(l--,i===1||i===2)c+=e.readSVarint(),g+=e.readSVarint(),c<p&&(p=c),c>u&&(u=c),g<E&&(E=g),g>I&&(I=g);else if(i!==7)throw new Error("unknown command "+i)}return[p,E,u,I]};$h.prototype.toGeoJSON=function(e,t,i){var l=this.extent*Math.pow(2,i),c=this.extent*e,g=this.extent*t,p=this.loadGeometry(),u=$h.types[this.type],E,I;function M(R){for(var N=0;N<R.length;N++){var O=R[N],he=180-(O.y+g)*360/l;R[N]=[(O.x+c)*360/l-180,360/Math.PI*Math.atan(Math.exp(he*Math.PI/180))-90]}}switch(this.type){case 1:var b=[];for(E=0;E<p.length;E++)b[E]=p[E][0];p=b,M(p);break;case 2:for(E=0;E<p.length;E++)M(p[E]);break;case 3:for(p=qL(p),E=0;E<p.length;E++)for(I=0;I<p[E].length;I++)M(p[E][I]);break}p.length===1?p=p[0]:u="Multi"+u;var C={type:"Feature",geometry:{type:u,coordinates:p},properties:this.properties};return"id"in this&&(C.id=this.id),C};function qL(e){var t=e.length;if(t<=1)return[e];for(var i=[],l,c,g=0;g<t;g++){var p=KL(e[g]);p!==0&&(c===void 0&&(c=p<0),c===p<0?(l&&i.push(l),l=[e[g]]):l.push(e[g]))}return l&&i.push(l),i}function KL(e){for(var t=0,i=0,l=e.length,c=l-1,g,p;i<l;c=i++)g=e[i],p=e[c],t+=(p.x-g.x)*(g.y+p.y);return t}var YL=DP,BP=NP;function NP(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(JL,this,t),this.length=this._features.length}function JL(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(QL(i))}function QL(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var l=e.readVarint()>>3;t=l===1?e.readString():l===2?e.readFloat():l===3?e.readDouble():l===4?e.readVarint64():l===5?e.readVarint():l===6?e.readSVarint():l===7?e.readBoolean():null}return t}NP.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new YL(this._pbf,t,this.extent,this._keys,this._values)};var e5=BP,t5=n5;function n5(e,t){this.layers=e.readFields(r5,{},t)}function r5(e,t,i){if(e===3){var l=new e5(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}gy.VectorTile=t5;gy.VectorTileFeature=DP;gy.VectorTileLayer=BP;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ZR,i=lj,l=uj,c=UL,g=GL,p=gy;function u(X){return X&&typeof X=="object"&&"default"in X?X:{default:X}}var E=u(l),I=u(c),M=u(g),b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ul<"u"?Ul:typeof self<"u"?self:{};function C(X){var G={exports:{}};return X(G,G.exports),G.exports}var R=C(function(X,G){(function(q,H){X.exports=H(I.default)})(b,function(ae){return function(q){var H={};function T(j){if(H[j])return H[j].exports;var D=H[j]={i:j,l:!1,exports:{}};return q[j].call(D.exports,D,D.exports,T),D.l=!0,D.exports}return T.m=q,T.c=H,T.d=function(j,D,te){T.o(j,D)||Object.defineProperty(j,D,{enumerable:!0,get:te})},T.r=function(j){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})},T.t=function(j,D){if(D&1&&(j=T(j)),D&8||D&4&&typeof j=="object"&&j&&j.__esModule)return j;var te=Object.create(null);if(T.r(te),Object.defineProperty(te,"default",{enumerable:!0,value:j}),D&2&&typeof j!="string")for(var W in j)T.d(te,W,(function(ve){return j[ve]}).bind(null,W));return te},T.n=function(j){var D=j&&j.__esModule?function(){return j.default}:function(){return j};return T.d(D,"a",D),D},T.o=function(j,D){return Object.prototype.hasOwnProperty.call(j,D)},T.p="",T(T.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(q,H,T){T.r(H),T.d(H,"CacheControl",function(){return Ie}),T.d(H,"parse",function(){return Ne}),T.d(H,"format",function(){return Ae}),T("./node_modules/core-js/modules/es6.array.from.js"),T("./node_modules/core-js/modules/es6.function.name.js"),T("./node_modules/core-js/modules/es6.object.to-string.js"),T("./node_modules/core-js/modules/web.dom.iterable.js"),T("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),T("./node_modules/core-js/modules/es6.symbol.js"),T("./node_modules/core-js/modules/es6.regexp.split.js"),T("./node_modules/core-js/modules/es6.number.is-finite.js");function j(ze,He){return _e(ze)||ve(ze,He)||te(ze,He)||D()}function D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function te(ze,He){if(ze){if(typeof ze=="string")return W(ze,He);var Ze=Object.prototype.toString.call(ze).slice(8,-1);if(Ze==="Object"&&ze.constructor&&(Ze=ze.constructor.name),Ze==="Map"||Ze==="Set")return Array.from(ze);if(Ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ze))return W(ze,He)}}function W(ze,He){(He==null||He>ze.length)&&(He=ze.length);for(var Ze=0,it=new Array(He);Ze<He;Ze++)it[Ze]=ze[Ze];return it}function ve(ze,He){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(ze)))){var Ze=[],it=!0,ct=!1,vt=void 0;try{for(var Mt=ze[Symbol.iterator](),pt;!(it=(pt=Mt.next()).done)&&(Ze.push(pt.value),!(He&&Ze.length===He));it=!0);}catch(xt){ct=!0,vt=xt}finally{try{!it&&Mt.return!=null&&Mt.return()}finally{if(ct)throw vt}}return Ze}}function _e(ze){if(Array.isArray(ze))return ze}function pe(ze,He){if(!(ze instanceof He))throw new TypeError("Cannot call a class as a function")}function oe(ze,He){for(var Ze=0;Ze<He.length;Ze++){var it=He[Ze];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(ze,it.key,it)}}function ce(ze,He,Ze){return He&&oe(ze.prototype,He),ze}var ee=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,re={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function fe(ze){return ze===null}function Se(ze){if(!ze)return null;var He=parseInt(ze,10);return!Number.isFinite(He)||He<0?null:He}var Ie=function(){function ze(){pe(this,ze),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ce(ze,[{key:"parse",value:function(Ze){if(!Ze||Ze.length===0)return this;var it={},ct=Ze.match(ee)||[];return Array.prototype.forEach.call(ct,function(vt){var Mt=vt.split("=",2),pt=j(Mt,1),xt=pt[0],Gt=null;Mt.length>1&&(Gt=Mt[1].trim()),it[xt.toLowerCase()]=Gt}),this.maxAge=Se(it[re.maxAge]),this.sharedMaxAge=Se(it[re.sharedMaxAge]),this.maxStale=fe(it[re.maxStale]),this.maxStaleDuration=Se(it[re.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=Se(it[re.minFresh]),this.immutable=fe(it[re.immutable]),this.mustRevalidate=fe(it[re.mustRevalidate]),this.noCache=fe(it[re.noCache]),this.noStore=fe(it[re.noStore]),this.noTransform=fe(it[re.noTransform]),this.onlyIfCached=fe(it[re.onlyIfCached]),this.private=fe(it[re.private]),this.proxyRevalidate=fe(it[re.proxyRevalidate]),this.public=fe(it[re.public]),this}},{key:"format",value:function(){var Ze=[];return this.maxAge&&Ze.push("".concat(re.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ze.push("".concat(re.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ze.push("".concat(re.maxStale,"=").concat(this.maxStaleDuration)):Ze.push(re.maxStale)),this.minFresh&&Ze.push("".concat(re.minFresh,"=").concat(this.minFresh)),this.immutable&&Ze.push(re.immutable),this.mustRevalidate&&Ze.push(re.mustRevalidate),this.noCache&&Ze.push(re.noCache),this.noStore&&Ze.push(re.noStore),this.noTransform&&Ze.push(re.noTransform),this.onlyIfCached&&Ze.push(re.onlyIfCached),this.private&&Ze.push(re.private),this.proxyRevalidate&&Ze.push(re.proxyRevalidate),this.public&&Ze.push(re.public),Ze.join(", ")}}]),ze}();function Ne(ze){var He=new Ie;return He.parse(ze)}function Ae(ze){return ze instanceof Ie?ze.format():Ie.prototype.format.call(ze)}H.default={CacheControl:Ie,parse:Ne,format:Ae}},"./node_modules/charenc/charenc.js":function(q,H){var T={utf8:{stringToBytes:function(j){return T.bin.stringToBytes(unescape(encodeURIComponent(j)))},bytesToString:function(j){return decodeURIComponent(escape(T.bin.bytesToString(j)))}},bin:{stringToBytes:function(j){for(var D=[],te=0;te<j.length;te++)D.push(j.charCodeAt(te)&255);return D},bytesToString:function(j){for(var D=[],te=0;te<j.length;te++)D.push(String.fromCharCode(j[te]));return D.join("")}}};q.exports=T},"./node_modules/core-js/modules/_a-function.js":function(q,H){q.exports=function(T){if(typeof T!="function")throw TypeError(T+" is not a function!");return T}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_wks.js")("unscopables"),D=Array.prototype;D[j]==null&&T("./node_modules/core-js/modules/_hide.js")(D,j,{}),q.exports=function(te){D[j][te]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_string-at.js")(!0);q.exports=function(D,te,W){return te+(W?j(D,te).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_is-object.js");q.exports=function(D){if(!j(D))throw TypeError(D+" is not an object!");return D}},"./node_modules/core-js/modules/_array-includes.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_to-iobject.js"),D=T("./node_modules/core-js/modules/_to-length.js"),te=T("./node_modules/core-js/modules/_to-absolute-index.js");q.exports=function(W){return function(ve,_e,pe){var oe=j(ve),ce=D(oe.length),ee=te(pe,ce),re;if(W&&_e!=_e){for(;ce>ee;)if(re=oe[ee++],re!=re)return!0}else for(;ce>ee;ee++)if((W||ee in oe)&&oe[ee]===_e)return W||ee||0;return!W&&-1}}},"./node_modules/core-js/modules/_bind.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_a-function.js"),D=T("./node_modules/core-js/modules/_is-object.js"),te=T("./node_modules/core-js/modules/_invoke.js"),W=[].slice,ve={},_e=function(pe,oe,ce){if(!(oe in ve)){for(var ee=[],re=0;re<oe;re++)ee[re]="a["+re+"]";ve[oe]=Function("F,a","return new F("+ee.join(",")+")")}return ve[oe](pe,ce)};q.exports=Function.bind||function(oe){var ce=j(this),ee=W.call(arguments,1),re=function(){var fe=ee.concat(W.call(arguments));return this instanceof re?_e(ce,fe.length,fe):te(ce,fe,oe)};return D(ce.prototype)&&(re.prototype=ce.prototype),re}},"./node_modules/core-js/modules/_classof.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_cof.js"),D=T("./node_modules/core-js/modules/_wks.js")("toStringTag"),te=j(function(){return arguments}())=="Arguments",W=function(ve,_e){try{return ve[_e]}catch{}};q.exports=function(ve){var _e,pe,oe;return ve===void 0?"Undefined":ve===null?"Null":typeof(pe=W(_e=Object(ve),D))=="string"?pe:te?j(_e):(oe=j(_e))=="Object"&&typeof _e.callee=="function"?"Arguments":oe}},"./node_modules/core-js/modules/_cof.js":function(q,H){var T={}.toString;q.exports=function(j){return T.call(j).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(q,H){var T=q.exports={version:"2.6.12"};typeof __e=="number"&&(__e=T)},"./node_modules/core-js/modules/_create-property.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_object-dp.js"),D=T("./node_modules/core-js/modules/_property-desc.js");q.exports=function(te,W,ve){W in te?j.f(te,W,D(0,ve)):te[W]=ve}},"./node_modules/core-js/modules/_ctx.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_a-function.js");q.exports=function(D,te,W){if(j(D),te===void 0)return D;switch(W){case 1:return function(ve){return D.call(te,ve)};case 2:return function(ve,_e){return D.call(te,ve,_e)};case 3:return function(ve,_e,pe){return D.call(te,ve,_e,pe)}}return function(){return D.apply(te,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(q,H){q.exports=function(T){if(T==null)throw TypeError("Can't call method on  "+T);return T}},"./node_modules/core-js/modules/_descriptors.js":function(q,H,T){q.exports=!T("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_is-object.js"),D=T("./node_modules/core-js/modules/_global.js").document,te=j(D)&&j(D.createElement);q.exports=function(W){return te?D.createElement(W):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(q,H){q.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_object-keys.js"),D=T("./node_modules/core-js/modules/_object-gops.js"),te=T("./node_modules/core-js/modules/_object-pie.js");q.exports=function(W){var ve=j(W),_e=D.f;if(_e)for(var pe=_e(W),oe=te.f,ce=0,ee;pe.length>ce;)oe.call(W,ee=pe[ce++])&&ve.push(ee);return ve}},"./node_modules/core-js/modules/_export.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_global.js"),D=T("./node_modules/core-js/modules/_core.js"),te=T("./node_modules/core-js/modules/_hide.js"),W=T("./node_modules/core-js/modules/_redefine.js"),ve=T("./node_modules/core-js/modules/_ctx.js"),_e="prototype",pe=function(oe,ce,ee){var re=oe&pe.F,fe=oe&pe.G,Se=oe&pe.S,Ie=oe&pe.P,Ne=oe&pe.B,Ae=fe?j:Se?j[ce]||(j[ce]={}):(j[ce]||{})[_e],ze=fe?D:D[ce]||(D[ce]={}),He=ze[_e]||(ze[_e]={}),Ze,it,ct,vt;fe&&(ee=ce);for(Ze in ee)it=!re&&Ae&&Ae[Ze]!==void 0,ct=(it?Ae:ee)[Ze],vt=Ne&&it?ve(ct,j):Ie&&typeof ct=="function"?ve(Function.call,ct):ct,Ae&&W(Ae,Ze,ct,oe&pe.U),ze[Ze]!=ct&&te(ze,Ze,vt),Ie&&He[Ze]!=ct&&(He[Ze]=ct)};j.core=D,pe.F=1,pe.G=2,pe.S=4,pe.P=8,pe.B=16,pe.W=32,pe.U=64,pe.R=128,q.exports=pe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_wks.js")("match");q.exports=function(D){var te=/./;try{"/./"[D](te)}catch{try{return te[j]=!1,!"/./"[D](te)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(q,H){q.exports=function(T){try{return!!T()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(q,H,T){T("./node_modules/core-js/modules/es6.regexp.exec.js");var j=T("./node_modules/core-js/modules/_redefine.js"),D=T("./node_modules/core-js/modules/_hide.js"),te=T("./node_modules/core-js/modules/_fails.js"),W=T("./node_modules/core-js/modules/_defined.js"),ve=T("./node_modules/core-js/modules/_wks.js"),_e=T("./node_modules/core-js/modules/_regexp-exec.js"),pe=ve("species"),oe=!te(function(){var ee=/./;return ee.exec=function(){var re=[];return re.groups={a:"7"},re},"".replace(ee,"$<a>")!=="7"}),ce=function(){var ee=/(?:)/,re=ee.exec;ee.exec=function(){return re.apply(this,arguments)};var fe="ab".split(ee);return fe.length===2&&fe[0]==="a"&&fe[1]==="b"}();q.exports=function(ee,re,fe){var Se=ve(ee),Ie=!te(function(){var it={};return it[Se]=function(){return 7},""[ee](it)!=7}),Ne=Ie?!te(function(){var it=!1,ct=/a/;return ct.exec=function(){return it=!0,null},ee==="split"&&(ct.constructor={},ct.constructor[pe]=function(){return ct}),ct[Se](""),!it}):void 0;if(!Ie||!Ne||ee==="replace"&&!oe||ee==="split"&&!ce){var Ae=/./[Se],ze=fe(W,Se,""[ee],function(ct,vt,Mt,pt,xt){return vt.exec===_e?Ie&&!xt?{done:!0,value:Ae.call(vt,Mt,pt)}:{done:!0,value:ct.call(Mt,vt,pt)}:{done:!1}}),He=ze[0],Ze=ze[1];j(String.prototype,ee,He),D(RegExp.prototype,Se,re==2?function(it,ct){return Ze.call(it,this,ct)}:function(it){return Ze.call(it,this)})}}},"./node_modules/core-js/modules/_flags.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_an-object.js");q.exports=function(){var D=j(this),te="";return D.global&&(te+="g"),D.ignoreCase&&(te+="i"),D.multiline&&(te+="m"),D.unicode&&(te+="u"),D.sticky&&(te+="y"),te}},"./node_modules/core-js/modules/_function-to-string.js":function(q,H,T){q.exports=T("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(q,H){var T=q.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=T)},"./node_modules/core-js/modules/_has.js":function(q,H){var T={}.hasOwnProperty;q.exports=function(j,D){return T.call(j,D)}},"./node_modules/core-js/modules/_hide.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_object-dp.js"),D=T("./node_modules/core-js/modules/_property-desc.js");q.exports=T("./node_modules/core-js/modules/_descriptors.js")?function(te,W,ve){return j.f(te,W,D(1,ve))}:function(te,W,ve){return te[W]=ve,te}},"./node_modules/core-js/modules/_html.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_global.js").document;q.exports=j&&j.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(q,H,T){q.exports=!T("./node_modules/core-js/modules/_descriptors.js")&&!T("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(T("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(q,H){q.exports=function(T,j,D){var te=D===void 0;switch(j.length){case 0:return te?T():T.call(D);case 1:return te?T(j[0]):T.call(D,j[0]);case 2:return te?T(j[0],j[1]):T.call(D,j[0],j[1]);case 3:return te?T(j[0],j[1],j[2]):T.call(D,j[0],j[1],j[2]);case 4:return te?T(j[0],j[1],j[2],j[3]):T.call(D,j[0],j[1],j[2],j[3])}return T.apply(D,j)}},"./node_modules/core-js/modules/_iobject.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_cof.js");q.exports=Object("z").propertyIsEnumerable(0)?Object:function(D){return j(D)=="String"?D.split(""):Object(D)}},"./node_modules/core-js/modules/_is-array-iter.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_iterators.js"),D=T("./node_modules/core-js/modules/_wks.js")("iterator"),te=Array.prototype;q.exports=function(W){return W!==void 0&&(j.Array===W||te[D]===W)}},"./node_modules/core-js/modules/_is-array.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_cof.js");q.exports=Array.isArray||function(te){return j(te)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(q,H){q.exports=function(T){return typeof T=="object"?T!==null:typeof T=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_is-object.js"),D=T("./node_modules/core-js/modules/_cof.js"),te=T("./node_modules/core-js/modules/_wks.js")("match");q.exports=function(W){var ve;return j(W)&&((ve=W[te])!==void 0?!!ve:D(W)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_an-object.js");q.exports=function(D,te,W,ve){try{return ve?te(j(W)[0],W[1]):te(W)}catch(pe){var _e=D.return;throw _e!==void 0&&j(_e.call(D)),pe}}},"./node_modules/core-js/modules/_iter-create.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_object-create.js"),D=T("./node_modules/core-js/modules/_property-desc.js"),te=T("./node_modules/core-js/modules/_set-to-string-tag.js"),W={};T("./node_modules/core-js/modules/_hide.js")(W,T("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),q.exports=function(ve,_e,pe){ve.prototype=j(W,{next:D(1,pe)}),te(ve,_e+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_library.js"),D=T("./node_modules/core-js/modules/_export.js"),te=T("./node_modules/core-js/modules/_redefine.js"),W=T("./node_modules/core-js/modules/_hide.js"),ve=T("./node_modules/core-js/modules/_iterators.js"),_e=T("./node_modules/core-js/modules/_iter-create.js"),pe=T("./node_modules/core-js/modules/_set-to-string-tag.js"),oe=T("./node_modules/core-js/modules/_object-gpo.js"),ce=T("./node_modules/core-js/modules/_wks.js")("iterator"),ee=!([].keys&&"next"in[].keys()),re="@@iterator",fe="keys",Se="values",Ie=function(){return this};q.exports=function(Ne,Ae,ze,He,Ze,it,ct){_e(ze,Ae,He);var vt=function(B){if(!ee&&B in Gt)return Gt[B];switch(B){case fe:return function(){return new ze(this,B)};case Se:return function(){return new ze(this,B)}}return function(){return new ze(this,B)}},Mt=Ae+" Iterator",pt=Ze==Se,xt=!1,Gt=Ne.prototype,Ht=Gt[ce]||Gt[re]||Ze&&Gt[Ze],an=Ht||vt(Ze),et=Ze?pt?vt("entries"):an:void 0,vn=Ae=="Array"&&Gt.entries||Ht,ln,Vt,Ee;if(vn&&(Ee=oe(vn.call(new Ne)),Ee!==Object.prototype&&Ee.next&&(pe(Ee,Mt,!0),!j&&typeof Ee[ce]!="function"&&W(Ee,ce,Ie))),pt&&Ht&&Ht.name!==Se&&(xt=!0,an=function(){return Ht.call(this)}),(!j||ct)&&(ee||xt||!Gt[ce])&&W(Gt,ce,an),ve[Ae]=an,ve[Mt]=Ie,Ze)if(ln={values:pt?an:vt(Se),keys:it?an:vt(fe),entries:et},ct)for(Vt in ln)Vt in Gt||te(Gt,Vt,ln[Vt]);else D(D.P+D.F*(ee||xt),Ae,ln);return ln}},"./node_modules/core-js/modules/_iter-detect.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_wks.js")("iterator"),D=!1;try{var te=[7][j]();te.return=function(){D=!0},Array.from(te,function(){throw 2})}catch{}q.exports=function(W,ve){if(!ve&&!D)return!1;var _e=!1;try{var pe=[7],oe=pe[j]();oe.next=function(){return{done:_e=!0}},pe[j]=function(){return oe},W(pe)}catch{}return _e}},"./node_modules/core-js/modules/_iter-step.js":function(q,H){q.exports=function(T,j){return{value:j,done:!!T}}},"./node_modules/core-js/modules/_iterators.js":function(q,H){q.exports={}},"./node_modules/core-js/modules/_library.js":function(q,H){q.exports=!1},"./node_modules/core-js/modules/_meta.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_uid.js")("meta"),D=T("./node_modules/core-js/modules/_is-object.js"),te=T("./node_modules/core-js/modules/_has.js"),W=T("./node_modules/core-js/modules/_object-dp.js").f,ve=0,_e=Object.isExtensible||function(){return!0},pe=!T("./node_modules/core-js/modules/_fails.js")(function(){return _e(Object.preventExtensions({}))}),oe=function(Se){W(Se,j,{value:{i:"O"+ ++ve,w:{}}})},ce=function(Se,Ie){if(!D(Se))return typeof Se=="symbol"?Se:(typeof Se=="string"?"S":"P")+Se;if(!te(Se,j)){if(!_e(Se))return"F";if(!Ie)return"E";oe(Se)}return Se[j].i},ee=function(Se,Ie){if(!te(Se,j)){if(!_e(Se))return!0;if(!Ie)return!1;oe(Se)}return Se[j].w},re=function(Se){return pe&&fe.NEED&&_e(Se)&&!te(Se,j)&&oe(Se),Se},fe=q.exports={KEY:j,NEED:!1,fastKey:ce,getWeak:ee,onFreeze:re}},"./node_modules/core-js/modules/_object-create.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_an-object.js"),D=T("./node_modules/core-js/modules/_object-dps.js"),te=T("./node_modules/core-js/modules/_enum-bug-keys.js"),W=T("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ve=function(){},_e="prototype",pe=function(){var oe=T("./node_modules/core-js/modules/_dom-create.js")("iframe"),ce=te.length,ee="<",re=">",fe;for(oe.style.display="none",T("./node_modules/core-js/modules/_html.js").appendChild(oe),oe.src="javascript:",fe=oe.contentWindow.document,fe.open(),fe.write(ee+"script"+re+"document.F=Object"+ee+"/script"+re),fe.close(),pe=fe.F;ce--;)delete pe[_e][te[ce]];return pe()};q.exports=Object.create||function(ce,ee){var re;return ce!==null?(ve[_e]=j(ce),re=new ve,ve[_e]=null,re[W]=ce):re=pe(),ee===void 0?re:D(re,ee)}},"./node_modules/core-js/modules/_object-dp.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_an-object.js"),D=T("./node_modules/core-js/modules/_ie8-dom-define.js"),te=T("./node_modules/core-js/modules/_to-primitive.js"),W=Object.defineProperty;H.f=T("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(_e,pe,oe){if(j(_e),pe=te(pe,!0),j(oe),D)try{return W(_e,pe,oe)}catch{}if("get"in oe||"set"in oe)throw TypeError("Accessors not supported!");return"value"in oe&&(_e[pe]=oe.value),_e}},"./node_modules/core-js/modules/_object-dps.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_object-dp.js"),D=T("./node_modules/core-js/modules/_an-object.js"),te=T("./node_modules/core-js/modules/_object-keys.js");q.exports=T("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ve,_e){D(ve);for(var pe=te(_e),oe=pe.length,ce=0,ee;oe>ce;)j.f(ve,ee=pe[ce++],_e[ee]);return ve}},"./node_modules/core-js/modules/_object-gopd.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_object-pie.js"),D=T("./node_modules/core-js/modules/_property-desc.js"),te=T("./node_modules/core-js/modules/_to-iobject.js"),W=T("./node_modules/core-js/modules/_to-primitive.js"),ve=T("./node_modules/core-js/modules/_has.js"),_e=T("./node_modules/core-js/modules/_ie8-dom-define.js"),pe=Object.getOwnPropertyDescriptor;H.f=T("./node_modules/core-js/modules/_descriptors.js")?pe:function(ce,ee){if(ce=te(ce),ee=W(ee,!0),_e)try{return pe(ce,ee)}catch{}if(ve(ce,ee))return D(!j.f.call(ce,ee),ce[ee])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_to-iobject.js"),D=T("./node_modules/core-js/modules/_object-gopn.js").f,te={}.toString,W=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ve=function(_e){try{return D(_e)}catch{return W.slice()}};q.exports.f=function(pe){return W&&te.call(pe)=="[object Window]"?ve(pe):D(j(pe))}},"./node_modules/core-js/modules/_object-gopn.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_object-keys-internal.js"),D=T("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");H.f=Object.getOwnPropertyNames||function(W){return j(W,D)}},"./node_modules/core-js/modules/_object-gops.js":function(q,H){H.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_has.js"),D=T("./node_modules/core-js/modules/_to-object.js"),te=T("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),W=Object.prototype;q.exports=Object.getPrototypeOf||function(ve){return ve=D(ve),j(ve,te)?ve[te]:typeof ve.constructor=="function"&&ve instanceof ve.constructor?ve.constructor.prototype:ve instanceof Object?W:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_has.js"),D=T("./node_modules/core-js/modules/_to-iobject.js"),te=T("./node_modules/core-js/modules/_array-includes.js")(!1),W=T("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");q.exports=function(ve,_e){var pe=D(ve),oe=0,ce=[],ee;for(ee in pe)ee!=W&&j(pe,ee)&&ce.push(ee);for(;_e.length>oe;)j(pe,ee=_e[oe++])&&(~te(ce,ee)||ce.push(ee));return ce}},"./node_modules/core-js/modules/_object-keys.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_object-keys-internal.js"),D=T("./node_modules/core-js/modules/_enum-bug-keys.js");q.exports=Object.keys||function(W){return j(W,D)}},"./node_modules/core-js/modules/_object-pie.js":function(q,H){H.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_object-gopn.js"),D=T("./node_modules/core-js/modules/_object-gops.js"),te=T("./node_modules/core-js/modules/_an-object.js"),W=T("./node_modules/core-js/modules/_global.js").Reflect;q.exports=W&&W.ownKeys||function(_e){var pe=j.f(te(_e)),oe=D.f;return oe?pe.concat(oe(_e)):pe}},"./node_modules/core-js/modules/_property-desc.js":function(q,H){q.exports=function(T,j){return{enumerable:!(T&1),configurable:!(T&2),writable:!(T&4),value:j}}},"./node_modules/core-js/modules/_redefine.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_global.js"),D=T("./node_modules/core-js/modules/_hide.js"),te=T("./node_modules/core-js/modules/_has.js"),W=T("./node_modules/core-js/modules/_uid.js")("src"),ve=T("./node_modules/core-js/modules/_function-to-string.js"),_e="toString",pe=(""+ve).split(_e);T("./node_modules/core-js/modules/_core.js").inspectSource=function(oe){return ve.call(oe)},(q.exports=function(oe,ce,ee,re){var fe=typeof ee=="function";fe&&(te(ee,"name")||D(ee,"name",ce)),oe[ce]!==ee&&(fe&&(te(ee,W)||D(ee,W,oe[ce]?""+oe[ce]:pe.join(String(ce)))),oe===j?oe[ce]=ee:re?oe[ce]?oe[ce]=ee:D(oe,ce,ee):(delete oe[ce],D(oe,ce,ee)))})(Function.prototype,_e,function(){return typeof this=="function"&&this[W]||ve.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_classof.js"),D=RegExp.prototype.exec;q.exports=function(te,W){var ve=te.exec;if(typeof ve=="function"){var _e=ve.call(te,W);if(typeof _e!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return _e}if(j(te)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return D.call(te,W)}},"./node_modules/core-js/modules/_regexp-exec.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_flags.js"),D=RegExp.prototype.exec,te=String.prototype.replace,W=D,ve="lastIndex",_e=function(){var ce=/a/,ee=/b*/g;return D.call(ce,"a"),D.call(ee,"a"),ce[ve]!==0||ee[ve]!==0}(),pe=/()??/.exec("")[1]!==void 0,oe=_e||pe;oe&&(W=function(ee){var re=this,fe,Se,Ie,Ne;return pe&&(Se=new RegExp("^"+re.source+"$(?!\\s)",j.call(re))),_e&&(fe=re[ve]),Ie=D.call(re,ee),_e&&Ie&&(re[ve]=re.global?Ie.index+Ie[0].length:fe),pe&&Ie&&Ie.length>1&&te.call(Ie[0],Se,function(){for(Ne=1;Ne<arguments.length-2;Ne++)arguments[Ne]===void 0&&(Ie[Ne]=void 0)}),Ie}),q.exports=W},"./node_modules/core-js/modules/_set-to-string-tag.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_object-dp.js").f,D=T("./node_modules/core-js/modules/_has.js"),te=T("./node_modules/core-js/modules/_wks.js")("toStringTag");q.exports=function(W,ve,_e){W&&!D(W=_e?W:W.prototype,te)&&j(W,te,{configurable:!0,value:ve})}},"./node_modules/core-js/modules/_shared-key.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_shared.js")("keys"),D=T("./node_modules/core-js/modules/_uid.js");q.exports=function(te){return j[te]||(j[te]=D(te))}},"./node_modules/core-js/modules/_shared.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_core.js"),D=T("./node_modules/core-js/modules/_global.js"),te="__core-js_shared__",W=D[te]||(D[te]={});(q.exports=function(ve,_e){return W[ve]||(W[ve]=_e!==void 0?_e:{})})("versions",[]).push({version:j.version,mode:T("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_an-object.js"),D=T("./node_modules/core-js/modules/_a-function.js"),te=T("./node_modules/core-js/modules/_wks.js")("species");q.exports=function(W,ve){var _e=j(W).constructor,pe;return _e===void 0||(pe=j(_e)[te])==null?ve:D(pe)}},"./node_modules/core-js/modules/_string-at.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_to-integer.js"),D=T("./node_modules/core-js/modules/_defined.js");q.exports=function(te){return function(W,ve){var _e=String(D(W)),pe=j(ve),oe=_e.length,ce,ee;return pe<0||pe>=oe?te?"":void 0:(ce=_e.charCodeAt(pe),ce<55296||ce>56319||pe+1===oe||(ee=_e.charCodeAt(pe+1))<56320||ee>57343?te?_e.charAt(pe):ce:te?_e.slice(pe,pe+2):(ce-55296<<10)+(ee-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_is-regexp.js"),D=T("./node_modules/core-js/modules/_defined.js");q.exports=function(te,W,ve){if(j(W))throw TypeError("String#"+ve+" doesn't accept regex!");return String(D(te))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_to-integer.js"),D=Math.max,te=Math.min;q.exports=function(W,ve){return W=j(W),W<0?D(W+ve,0):te(W,ve)}},"./node_modules/core-js/modules/_to-integer.js":function(q,H){var T=Math.ceil,j=Math.floor;q.exports=function(D){return isNaN(D=+D)?0:(D>0?j:T)(D)}},"./node_modules/core-js/modules/_to-iobject.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_iobject.js"),D=T("./node_modules/core-js/modules/_defined.js");q.exports=function(te){return j(D(te))}},"./node_modules/core-js/modules/_to-length.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_to-integer.js"),D=Math.min;q.exports=function(te){return te>0?D(j(te),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_defined.js");q.exports=function(D){return Object(j(D))}},"./node_modules/core-js/modules/_to-primitive.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_is-object.js");q.exports=function(D,te){if(!j(D))return D;var W,ve;if(te&&typeof(W=D.toString)=="function"&&!j(ve=W.call(D))||typeof(W=D.valueOf)=="function"&&!j(ve=W.call(D))||!te&&typeof(W=D.toString)=="function"&&!j(ve=W.call(D)))return ve;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(q,H){var T=0,j=Math.random();q.exports=function(D){return"Symbol(".concat(D===void 0?"":D,")_",(++T+j).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_global.js"),D=T("./node_modules/core-js/modules/_core.js"),te=T("./node_modules/core-js/modules/_library.js"),W=T("./node_modules/core-js/modules/_wks-ext.js"),ve=T("./node_modules/core-js/modules/_object-dp.js").f;q.exports=function(_e){var pe=D.Symbol||(D.Symbol=te?{}:j.Symbol||{});_e.charAt(0)!="_"&&!(_e in pe)&&ve(pe,_e,{value:W.f(_e)})}},"./node_modules/core-js/modules/_wks-ext.js":function(q,H,T){H.f=T("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_shared.js")("wks"),D=T("./node_modules/core-js/modules/_uid.js"),te=T("./node_modules/core-js/modules/_global.js").Symbol,W=typeof te=="function",ve=q.exports=function(_e){return j[_e]||(j[_e]=W&&te[_e]||(W?te:D)("Symbol."+_e))};ve.store=j},"./node_modules/core-js/modules/core.get-iterator-method.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_classof.js"),D=T("./node_modules/core-js/modules/_wks.js")("iterator"),te=T("./node_modules/core-js/modules/_iterators.js");q.exports=T("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(W){if(W!=null)return W[D]||W["@@iterator"]||te[j(W)]}},"./node_modules/core-js/modules/es6.array.from.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_ctx.js"),D=T("./node_modules/core-js/modules/_export.js"),te=T("./node_modules/core-js/modules/_to-object.js"),W=T("./node_modules/core-js/modules/_iter-call.js"),ve=T("./node_modules/core-js/modules/_is-array-iter.js"),_e=T("./node_modules/core-js/modules/_to-length.js"),pe=T("./node_modules/core-js/modules/_create-property.js"),oe=T("./node_modules/core-js/modules/core.get-iterator-method.js");D(D.S+D.F*!T("./node_modules/core-js/modules/_iter-detect.js")(function(ce){Array.from(ce)}),"Array",{from:function(ee){var re=te(ee),fe=typeof this=="function"?this:Array,Se=arguments.length,Ie=Se>1?arguments[1]:void 0,Ne=Ie!==void 0,Ae=0,ze=oe(re),He,Ze,it,ct;if(Ne&&(Ie=j(Ie,Se>2?arguments[2]:void 0,2)),ze!=null&&!(fe==Array&&ve(ze)))for(ct=ze.call(re),Ze=new fe;!(it=ct.next()).done;Ae++)pe(Ze,Ae,Ne?W(ct,Ie,[it.value,Ae],!0):it.value);else for(He=_e(re.length),Ze=new fe(He);He>Ae;Ae++)pe(Ze,Ae,Ne?Ie(re[Ae],Ae):re[Ae]);return Ze.length=Ae,Ze}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_add-to-unscopables.js"),D=T("./node_modules/core-js/modules/_iter-step.js"),te=T("./node_modules/core-js/modules/_iterators.js"),W=T("./node_modules/core-js/modules/_to-iobject.js");q.exports=T("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ve,_e){this._t=W(ve),this._i=0,this._k=_e},function(){var ve=this._t,_e=this._k,pe=this._i++;return!ve||pe>=ve.length?(this._t=void 0,D(1)):_e=="keys"?D(0,pe):_e=="values"?D(0,ve[pe]):D(0,[pe,ve[pe]])},"values"),te.Arguments=te.Array,j("keys"),j("values"),j("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_export.js");j(j.P,"Function",{bind:T("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_object-dp.js").f,D=Function.prototype,te=/^\s*function ([^ (]*)/,W="name";W in D||T("./node_modules/core-js/modules/_descriptors.js")&&j(D,W,{configurable:!0,get:function(){try{return(""+this).match(te)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_export.js"),D=T("./node_modules/core-js/modules/_global.js").isFinite;j(j.S,"Number",{isFinite:function(W){return typeof W=="number"&&D(W)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_classof.js"),D={};D[T("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",D+""!="[object z]"&&T("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+j(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_regexp-exec.js");T("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:j!==/./.exec},{exec:j})},"./node_modules/core-js/modules/es6.regexp.split.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_is-regexp.js"),D=T("./node_modules/core-js/modules/_an-object.js"),te=T("./node_modules/core-js/modules/_species-constructor.js"),W=T("./node_modules/core-js/modules/_advance-string-index.js"),ve=T("./node_modules/core-js/modules/_to-length.js"),_e=T("./node_modules/core-js/modules/_regexp-exec-abstract.js"),pe=T("./node_modules/core-js/modules/_regexp-exec.js"),oe=T("./node_modules/core-js/modules/_fails.js"),ce=Math.min,ee=[].push,re="split",fe="length",Se="lastIndex",Ie=4294967295,Ne=!oe(function(){});T("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Ae,ze,He,Ze){var it;return"abbc"[re](/(b)*/)[1]=="c"||"test"[re](/(?:)/,-1)[fe]!=4||"ab"[re](/(?:ab)*/)[fe]!=2||"."[re](/(.?)(.?)/)[fe]!=4||"."[re](/()()/)[fe]>1||""[re](/.?/)[fe]?it=function(ct,vt){var Mt=String(this);if(ct===void 0&&vt===0)return[];if(!j(ct))return He.call(Mt,ct,vt);for(var pt=[],xt=(ct.ignoreCase?"i":"")+(ct.multiline?"m":"")+(ct.unicode?"u":"")+(ct.sticky?"y":""),Gt=0,Ht=vt===void 0?Ie:vt>>>0,an=new RegExp(ct.source,xt+"g"),et,vn,ln;(et=pe.call(an,Mt))&&(vn=an[Se],!(vn>Gt&&(pt.push(Mt.slice(Gt,et.index)),et[fe]>1&&et.index<Mt[fe]&&ee.apply(pt,et.slice(1)),ln=et[0][fe],Gt=vn,pt[fe]>=Ht)));)an[Se]===et.index&&an[Se]++;return Gt===Mt[fe]?(ln||!an.test(""))&&pt.push(""):pt.push(Mt.slice(Gt)),pt[fe]>Ht?pt.slice(0,Ht):pt}:"0"[re](void 0,0)[fe]?it=function(ct,vt){return ct===void 0&&vt===0?[]:He.call(this,ct,vt)}:it=He,[function(vt,Mt){var pt=Ae(this),xt=vt==null?void 0:vt[ze];return xt!==void 0?xt.call(vt,pt,Mt):it.call(String(pt),vt,Mt)},function(ct,vt){var Mt=Ze(it,ct,this,vt,it!==He);if(Mt.done)return Mt.value;var pt=D(ct),xt=String(this),Gt=te(pt,RegExp),Ht=pt.unicode,an=(pt.ignoreCase?"i":"")+(pt.multiline?"m":"")+(pt.unicode?"u":"")+(Ne?"y":"g"),et=new Gt(Ne?pt:"^(?:"+pt.source+")",an),vn=vt===void 0?Ie:vt>>>0;if(vn===0)return[];if(xt.length===0)return _e(et,xt)===null?[xt]:[];for(var ln=0,Vt=0,Ee=[];Vt<xt.length;){et.lastIndex=Ne?Vt:0;var B=_e(et,Ne?xt:xt.slice(Vt)),L;if(B===null||(L=ce(ve(et.lastIndex+(Ne?0:Vt)),xt.length))===ln)Vt=W(xt,Vt,Ht);else{if(Ee.push(xt.slice(ln,Vt)),Ee.length===vn)return Ee;for(var ge=1;ge<=B.length-1;ge++)if(Ee.push(B[ge]),Ee.length===vn)return Ee;Vt=ln=L}}return Ee.push(xt.slice(ln)),Ee}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_export.js"),D=T("./node_modules/core-js/modules/_string-context.js"),te="includes";j(j.P+j.F*T("./node_modules/core-js/modules/_fails-is-regexp.js")(te),"String",{includes:function(ve){return!!~D(this,ve,te).indexOf(ve,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_global.js"),D=T("./node_modules/core-js/modules/_has.js"),te=T("./node_modules/core-js/modules/_descriptors.js"),W=T("./node_modules/core-js/modules/_export.js"),ve=T("./node_modules/core-js/modules/_redefine.js"),_e=T("./node_modules/core-js/modules/_meta.js").KEY,pe=T("./node_modules/core-js/modules/_fails.js"),oe=T("./node_modules/core-js/modules/_shared.js"),ce=T("./node_modules/core-js/modules/_set-to-string-tag.js"),ee=T("./node_modules/core-js/modules/_uid.js"),re=T("./node_modules/core-js/modules/_wks.js"),fe=T("./node_modules/core-js/modules/_wks-ext.js"),Se=T("./node_modules/core-js/modules/_wks-define.js"),Ie=T("./node_modules/core-js/modules/_enum-keys.js"),Ne=T("./node_modules/core-js/modules/_is-array.js"),Ae=T("./node_modules/core-js/modules/_an-object.js"),ze=T("./node_modules/core-js/modules/_is-object.js"),He=T("./node_modules/core-js/modules/_to-object.js"),Ze=T("./node_modules/core-js/modules/_to-iobject.js"),it=T("./node_modules/core-js/modules/_to-primitive.js"),ct=T("./node_modules/core-js/modules/_property-desc.js"),vt=T("./node_modules/core-js/modules/_object-create.js"),Mt=T("./node_modules/core-js/modules/_object-gopn-ext.js"),pt=T("./node_modules/core-js/modules/_object-gopd.js"),xt=T("./node_modules/core-js/modules/_object-gops.js"),Gt=T("./node_modules/core-js/modules/_object-dp.js"),Ht=T("./node_modules/core-js/modules/_object-keys.js"),an=pt.f,et=Gt.f,vn=Mt.f,ln=j.Symbol,Vt=j.JSON,Ee=Vt&&Vt.stringify,B="prototype",L=re("_hidden"),ge=re("toPrimitive"),Xe={}.propertyIsEnumerable,tt=oe("symbol-registry"),ht=oe("symbols"),ue=oe("op-symbols"),k=Object[B],U=typeof ln=="function"&&!!xt.f,Te=j.QObject,Ve=!Te||!Te[B]||!Te[B].findChild,rt=te&&pe(function(){return vt(et({},"a",{get:function(){return et(this,"a",{value:7}).a}})).a!=7})?function(Ce,Me,je){var Ke=an(k,Me);Ke&&delete k[Me],et(Ce,Me,je),Ke&&Ce!==k&&et(k,Me,Ke)}:et,Ge=function(Ce){var Me=ht[Ce]=vt(ln[B]);return Me._k=Ce,Me},St=U&&typeof ln.iterator=="symbol"?function(Ce){return typeof Ce=="symbol"}:function(Ce){return Ce instanceof ln},Pt=function(Me,je,Ke){return Me===k&&Pt(ue,je,Ke),Ae(Me),je=it(je,!0),Ae(Ke),D(ht,je)?(Ke.enumerable?(D(Me,L)&&Me[L][je]&&(Me[L][je]=!1),Ke=vt(Ke,{enumerable:ct(0,!1)})):(D(Me,L)||et(Me,L,ct(1,{})),Me[L][je]=!0),rt(Me,je,Ke)):et(Me,je,Ke)},mn=function(Me,je){Ae(Me);for(var Ke=Ie(je=Ze(je)),Le=0,at=Ke.length,dt;at>Le;)Pt(Me,dt=Ke[Le++],je[dt]);return Me},bn=function(Me,je){return je===void 0?vt(Me):mn(vt(Me),je)},Ot=function(Me){var je=Xe.call(this,Me=it(Me,!0));return this===k&&D(ht,Me)&&!D(ue,Me)?!1:je||!D(this,Me)||!D(ht,Me)||D(this,L)&&this[L][Me]?je:!0},Ar=function(Me,je){if(Me=Ze(Me),je=it(je,!0),!(Me===k&&D(ht,je)&&!D(ue,je))){var Ke=an(Me,je);return Ke&&D(ht,je)&&!(D(Me,L)&&Me[L][je])&&(Ke.enumerable=!0),Ke}},Qr=function(Me){for(var je=vn(Ze(Me)),Ke=[],Le=0,at;je.length>Le;)!D(ht,at=je[Le++])&&at!=L&&at!=_e&&Ke.push(at);return Ke},Ti=function(Me){for(var je=Me===k,Ke=vn(je?ue:Ze(Me)),Le=[],at=0,dt;Ke.length>at;)D(ht,dt=Ke[at++])&&(!je||D(k,dt))&&Le.push(ht[dt]);return Le};U||(ln=function(){if(this instanceof ln)throw TypeError("Symbol is not a constructor!");var Me=ee(arguments.length>0?arguments[0]:void 0),je=function(Ke){this===k&&je.call(ue,Ke),D(this,L)&&D(this[L],Me)&&(this[L][Me]=!1),rt(this,Me,ct(1,Ke))};return te&&Ve&&rt(k,Me,{configurable:!0,set:je}),Ge(Me)},ve(ln[B],"toString",function(){return this._k}),pt.f=Ar,Gt.f=Pt,T("./node_modules/core-js/modules/_object-gopn.js").f=Mt.f=Qr,T("./node_modules/core-js/modules/_object-pie.js").f=Ot,xt.f=Ti,te&&!T("./node_modules/core-js/modules/_library.js")&&ve(k,"propertyIsEnumerable",Ot,!0),fe.f=function(Ce){return Ge(re(Ce))}),W(W.G+W.W+W.F*!U,{Symbol:ln});for(var Ur="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ke=0;Ur.length>ke;)re(Ur[ke++]);for(var se=Ht(re.store),ie=0;se.length>ie;)Se(se[ie++]);W(W.S+W.F*!U,"Symbol",{for:function(Ce){return D(tt,Ce+="")?tt[Ce]:tt[Ce]=ln(Ce)},keyFor:function(Me){if(!St(Me))throw TypeError(Me+" is not a symbol!");for(var je in tt)if(tt[je]===Me)return je},useSetter:function(){Ve=!0},useSimple:function(){Ve=!1}}),W(W.S+W.F*!U,"Object",{create:bn,defineProperty:Pt,defineProperties:mn,getOwnPropertyDescriptor:Ar,getOwnPropertyNames:Qr,getOwnPropertySymbols:Ti});var xe=pe(function(){xt.f(1)});W(W.S+W.F*xe,"Object",{getOwnPropertySymbols:function(Me){return xt.f(He(Me))}}),Vt&&W(W.S+W.F*(!U||pe(function(){var Ce=ln();return Ee([Ce])!="[null]"||Ee({a:Ce})!="{}"||Ee(Object(Ce))!="{}"})),"JSON",{stringify:function(Me){for(var je=[Me],Ke=1,Le,at;arguments.length>Ke;)je.push(arguments[Ke++]);if(at=Le=je[1],!(!ze(Le)&&Me===void 0||St(Me)))return Ne(Le)||(Le=function(dt,st){if(typeof at=="function"&&(st=at.call(this,dt,st)),!St(st))return st}),je[1]=Le,Ee.apply(Vt,je)}}),ln[B][ge]||T("./node_modules/core-js/modules/_hide.js")(ln[B],ge,ln[B].valueOf),ce(ln,"Symbol"),ce(Math,"Math",!0),ce(j.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_export.js"),D=T("./node_modules/core-js/modules/_array-includes.js")(!0);j(j.P,"Array",{includes:function(W){return D(this,W,arguments.length>1?arguments[1]:void 0)}}),T("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(q,H,T){var j=T("./node_modules/core-js/modules/_export.js"),D=T("./node_modules/core-js/modules/_own-keys.js"),te=T("./node_modules/core-js/modules/_to-iobject.js"),W=T("./node_modules/core-js/modules/_object-gopd.js"),ve=T("./node_modules/core-js/modules/_create-property.js");j(j.S,"Object",{getOwnPropertyDescriptors:function(pe){for(var oe=te(pe),ce=W.f,ee=D(oe),re={},fe=0,Se,Ie;ee.length>fe;)Ie=ce(oe,Se=ee[fe++]),Ie!==void 0&&ve(re,Se,Ie);return re}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(q,H,T){T("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(q,H,T){for(var j=T("./node_modules/core-js/modules/es6.array.iterator.js"),D=T("./node_modules/core-js/modules/_object-keys.js"),te=T("./node_modules/core-js/modules/_redefine.js"),W=T("./node_modules/core-js/modules/_global.js"),ve=T("./node_modules/core-js/modules/_hide.js"),_e=T("./node_modules/core-js/modules/_iterators.js"),pe=T("./node_modules/core-js/modules/_wks.js"),oe=pe("iterator"),ce=pe("toStringTag"),ee=_e.Array,re={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},fe=D(re),Se=0;Se<fe.length;Se++){var Ie=fe[Se],Ne=re[Ie],Ae=W[Ie],ze=Ae&&Ae.prototype,He;if(ze&&(ze[oe]||ve(ze,oe,ee),ze[ce]||ve(ze,ce,Ie),_e[Ie]=ee,Ne))for(He in j)ze[He]||te(ze,He,j[He],!0)}},"./node_modules/crypt/crypt.js":function(q,H){(function(){var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j={rotl:function(D,te){return D<<te|D>>>32-te},rotr:function(D,te){return D<<32-te|D>>>te},endian:function(D){if(D.constructor==Number)return j.rotl(D,8)&16711935|j.rotl(D,24)&4278255360;for(var te=0;te<D.length;te++)D[te]=j.endian(D[te]);return D},randomBytes:function(D){for(var te=[];D>0;D--)te.push(Math.floor(Math.random()*256));return te},bytesToWords:function(D){for(var te=[],W=0,ve=0;W<D.length;W++,ve+=8)te[ve>>>5]|=D[W]<<24-ve%32;return te},wordsToBytes:function(D){for(var te=[],W=0;W<D.length*32;W+=8)te.push(D[W>>>5]>>>24-W%32&255);return te},bytesToHex:function(D){for(var te=[],W=0;W<D.length;W++)te.push((D[W]>>>4).toString(16)),te.push((D[W]&15).toString(16));return te.join("")},hexToBytes:function(D){for(var te=[],W=0;W<D.length;W+=2)te.push(parseInt(D.substr(W,2),16));return te},bytesToBase64:function(D){for(var te=[],W=0;W<D.length;W+=3)for(var ve=D[W]<<16|D[W+1]<<8|D[W+2],_e=0;_e<4;_e++)W*8+_e*6<=D.length*8?te.push(T.charAt(ve>>>6*(3-_e)&63)):te.push("=");return te.join("")},base64ToBytes:function(D){D=D.replace(/[^A-Z0-9+\/]/ig,"");for(var te=[],W=0,ve=0;W<D.length;ve=++W%4)ve!=0&&te.push((T.indexOf(D.charAt(W-1))&Math.pow(2,-2*ve+8)-1)<<ve*2|T.indexOf(D.charAt(W))>>>6-ve*2);return te}};q.exports=j})()},"./node_modules/is-buffer/index.js":function(q,H){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */q.exports=function(D){return D!=null&&(T(D)||j(D)||!!D._isBuffer)};function T(D){return!!D.constructor&&typeof D.constructor.isBuffer=="function"&&D.constructor.isBuffer(D)}function j(D){return typeof D.readFloatLE=="function"&&typeof D.slice=="function"&&T(D.slice(0,0))}},"./node_modules/md5/md5.js":function(q,H,T){(function(){var j=T("./node_modules/crypt/crypt.js"),D=T("./node_modules/charenc/charenc.js").utf8,te=T("./node_modules/is-buffer/index.js"),W=T("./node_modules/charenc/charenc.js").bin,ve=function(_e,pe){_e.constructor==String?pe&&pe.encoding==="binary"?_e=W.stringToBytes(_e):_e=D.stringToBytes(_e):te(_e)?_e=Array.prototype.slice.call(_e,0):!Array.isArray(_e)&&_e.constructor!==Uint8Array&&(_e=_e.toString());for(var oe=j.bytesToWords(_e),ce=_e.length*8,ee=1732584193,re=-271733879,fe=-1732584194,Se=271733878,Ie=0;Ie<oe.length;Ie++)oe[Ie]=(oe[Ie]<<8|oe[Ie]>>>24)&16711935|(oe[Ie]<<24|oe[Ie]>>>8)&4278255360;oe[ce>>>5]|=128<<ce%32,oe[(ce+64>>>9<<4)+14]=ce;for(var Ne=ve._ff,Ae=ve._gg,ze=ve._hh,He=ve._ii,Ie=0;Ie<oe.length;Ie+=16){var Ze=ee,it=re,ct=fe,vt=Se;ee=Ne(ee,re,fe,Se,oe[Ie+0],7,-680876936),Se=Ne(Se,ee,re,fe,oe[Ie+1],12,-389564586),fe=Ne(fe,Se,ee,re,oe[Ie+2],17,606105819),re=Ne(re,fe,Se,ee,oe[Ie+3],22,-1044525330),ee=Ne(ee,re,fe,Se,oe[Ie+4],7,-176418897),Se=Ne(Se,ee,re,fe,oe[Ie+5],12,1200080426),fe=Ne(fe,Se,ee,re,oe[Ie+6],17,-1473231341),re=Ne(re,fe,Se,ee,oe[Ie+7],22,-45705983),ee=Ne(ee,re,fe,Se,oe[Ie+8],7,1770035416),Se=Ne(Se,ee,re,fe,oe[Ie+9],12,-1958414417),fe=Ne(fe,Se,ee,re,oe[Ie+10],17,-42063),re=Ne(re,fe,Se,ee,oe[Ie+11],22,-1990404162),ee=Ne(ee,re,fe,Se,oe[Ie+12],7,1804603682),Se=Ne(Se,ee,re,fe,oe[Ie+13],12,-40341101),fe=Ne(fe,Se,ee,re,oe[Ie+14],17,-1502002290),re=Ne(re,fe,Se,ee,oe[Ie+15],22,1236535329),ee=Ae(ee,re,fe,Se,oe[Ie+1],5,-165796510),Se=Ae(Se,ee,re,fe,oe[Ie+6],9,-1069501632),fe=Ae(fe,Se,ee,re,oe[Ie+11],14,643717713),re=Ae(re,fe,Se,ee,oe[Ie+0],20,-373897302),ee=Ae(ee,re,fe,Se,oe[Ie+5],5,-701558691),Se=Ae(Se,ee,re,fe,oe[Ie+10],9,38016083),fe=Ae(fe,Se,ee,re,oe[Ie+15],14,-660478335),re=Ae(re,fe,Se,ee,oe[Ie+4],20,-405537848),ee=Ae(ee,re,fe,Se,oe[Ie+9],5,568446438),Se=Ae(Se,ee,re,fe,oe[Ie+14],9,-1019803690),fe=Ae(fe,Se,ee,re,oe[Ie+3],14,-187363961),re=Ae(re,fe,Se,ee,oe[Ie+8],20,1163531501),ee=Ae(ee,re,fe,Se,oe[Ie+13],5,-1444681467),Se=Ae(Se,ee,re,fe,oe[Ie+2],9,-51403784),fe=Ae(fe,Se,ee,re,oe[Ie+7],14,1735328473),re=Ae(re,fe,Se,ee,oe[Ie+12],20,-1926607734),ee=ze(ee,re,fe,Se,oe[Ie+5],4,-378558),Se=ze(Se,ee,re,fe,oe[Ie+8],11,-2022574463),fe=ze(fe,Se,ee,re,oe[Ie+11],16,1839030562),re=ze(re,fe,Se,ee,oe[Ie+14],23,-35309556),ee=ze(ee,re,fe,Se,oe[Ie+1],4,-1530992060),Se=ze(Se,ee,re,fe,oe[Ie+4],11,1272893353),fe=ze(fe,Se,ee,re,oe[Ie+7],16,-155497632),re=ze(re,fe,Se,ee,oe[Ie+10],23,-1094730640),ee=ze(ee,re,fe,Se,oe[Ie+13],4,681279174),Se=ze(Se,ee,re,fe,oe[Ie+0],11,-358537222),fe=ze(fe,Se,ee,re,oe[Ie+3],16,-722521979),re=ze(re,fe,Se,ee,oe[Ie+6],23,76029189),ee=ze(ee,re,fe,Se,oe[Ie+9],4,-640364487),Se=ze(Se,ee,re,fe,oe[Ie+12],11,-421815835),fe=ze(fe,Se,ee,re,oe[Ie+15],16,530742520),re=ze(re,fe,Se,ee,oe[Ie+2],23,-995338651),ee=He(ee,re,fe,Se,oe[Ie+0],6,-198630844),Se=He(Se,ee,re,fe,oe[Ie+7],10,1126891415),fe=He(fe,Se,ee,re,oe[Ie+14],15,-1416354905),re=He(re,fe,Se,ee,oe[Ie+5],21,-57434055),ee=He(ee,re,fe,Se,oe[Ie+12],6,1700485571),Se=He(Se,ee,re,fe,oe[Ie+3],10,-1894986606),fe=He(fe,Se,ee,re,oe[Ie+10],15,-1051523),re=He(re,fe,Se,ee,oe[Ie+1],21,-2054922799),ee=He(ee,re,fe,Se,oe[Ie+8],6,1873313359),Se=He(Se,ee,re,fe,oe[Ie+15],10,-30611744),fe=He(fe,Se,ee,re,oe[Ie+6],15,-1560198380),re=He(re,fe,Se,ee,oe[Ie+13],21,1309151649),ee=He(ee,re,fe,Se,oe[Ie+4],6,-145523070),Se=He(Se,ee,re,fe,oe[Ie+11],10,-1120210379),fe=He(fe,Se,ee,re,oe[Ie+2],15,718787259),re=He(re,fe,Se,ee,oe[Ie+9],21,-343485551),ee=ee+Ze>>>0,re=re+it>>>0,fe=fe+ct>>>0,Se=Se+vt>>>0}return j.endian([ee,re,fe,Se])};ve._ff=function(_e,pe,oe,ce,ee,re,fe){var Se=_e+(pe&oe|~pe&ce)+(ee>>>0)+fe;return(Se<<re|Se>>>32-re)+pe},ve._gg=function(_e,pe,oe,ce,ee,re,fe){var Se=_e+(pe&ce|oe&~ce)+(ee>>>0)+fe;return(Se<<re|Se>>>32-re)+pe},ve._hh=function(_e,pe,oe,ce,ee,re,fe){var Se=_e+(pe^oe^ce)+(ee>>>0)+fe;return(Se<<re|Se>>>32-re)+pe},ve._ii=function(_e,pe,oe,ce,ee,re,fe){var Se=_e+(oe^(pe|~ce))+(ee>>>0)+fe;return(Se<<re|Se>>>32-re)+pe},ve._blocksize=16,ve._digestsize=16,q.exports=function(_e,pe){if(_e==null)throw new Error("Illegal argument "+_e);var oe=j.wordsToBytes(ve(_e,pe));return pe&&pe.asBytes?oe:pe&&pe.asString?W.bytesToString(oe):j.bytesToHex(oe)}})()},"./node_modules/regenerator-runtime/runtime.js":function(q,H,T){var j=function(D){var te=Object.prototype,W=te.hasOwnProperty,ve,_e=typeof Symbol=="function"?Symbol:{},pe=_e.iterator||"@@iterator",oe=_e.asyncIterator||"@@asyncIterator",ce=_e.toStringTag||"@@toStringTag";function ee(B,L,ge){return Object.defineProperty(B,L,{value:ge,enumerable:!0,configurable:!0,writable:!0}),B[L]}try{ee({},"")}catch{ee=function(L,ge,Xe){return L[ge]=Xe}}function re(B,L,ge,Xe){var tt=L&&L.prototype instanceof He?L:He,ht=Object.create(tt.prototype),ue=new ln(Xe||[]);return ht._invoke=Ht(B,ge,ue),ht}D.wrap=re;function fe(B,L,ge){try{return{type:"normal",arg:B.call(L,ge)}}catch(Xe){return{type:"throw",arg:Xe}}}var Se="suspendedStart",Ie="suspendedYield",Ne="executing",Ae="completed",ze={};function He(){}function Ze(){}function it(){}var ct={};ct[pe]=function(){return this};var vt=Object.getPrototypeOf,Mt=vt&&vt(vt(Vt([])));Mt&&Mt!==te&&W.call(Mt,pe)&&(ct=Mt);var pt=it.prototype=He.prototype=Object.create(ct);Ze.prototype=pt.constructor=it,it.constructor=Ze,Ze.displayName=ee(it,ce,"GeneratorFunction");function xt(B){["next","throw","return"].forEach(function(L){ee(B,L,function(ge){return this._invoke(L,ge)})})}D.isGeneratorFunction=function(B){var L=typeof B=="function"&&B.constructor;return L?L===Ze||(L.displayName||L.name)==="GeneratorFunction":!1},D.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,it):(B.__proto__=it,ee(B,ce,"GeneratorFunction")),B.prototype=Object.create(pt),B},D.awrap=function(B){return{__await:B}};function Gt(B,L){function ge(ht,ue,k,U){var Te=fe(B[ht],B,ue);if(Te.type==="throw")U(Te.arg);else{var Ve=Te.arg,rt=Ve.value;return rt&&typeof rt=="object"&&W.call(rt,"__await")?L.resolve(rt.__await).then(function(Ge){ge("next",Ge,k,U)},function(Ge){ge("throw",Ge,k,U)}):L.resolve(rt).then(function(Ge){Ve.value=Ge,k(Ve)},function(Ge){return ge("throw",Ge,k,U)})}}var Xe;function tt(ht,ue){function k(){return new L(function(U,Te){ge(ht,ue,U,Te)})}return Xe=Xe?Xe.then(k,k):k()}this._invoke=tt}xt(Gt.prototype),Gt.prototype[oe]=function(){return this},D.AsyncIterator=Gt,D.async=function(B,L,ge,Xe,tt){tt===void 0&&(tt=Promise);var ht=new Gt(re(B,L,ge,Xe),tt);return D.isGeneratorFunction(L)?ht:ht.next().then(function(ue){return ue.done?ue.value:ht.next()})};function Ht(B,L,ge){var Xe=Se;return function(ht,ue){if(Xe===Ne)throw new Error("Generator is already running");if(Xe===Ae){if(ht==="throw")throw ue;return Ee()}for(ge.method=ht,ge.arg=ue;;){var k=ge.delegate;if(k){var U=an(k,ge);if(U){if(U===ze)continue;return U}}if(ge.method==="next")ge.sent=ge._sent=ge.arg;else if(ge.method==="throw"){if(Xe===Se)throw Xe=Ae,ge.arg;ge.dispatchException(ge.arg)}else ge.method==="return"&&ge.abrupt("return",ge.arg);Xe=Ne;var Te=fe(B,L,ge);if(Te.type==="normal"){if(Xe=ge.done?Ae:Ie,Te.arg===ze)continue;return{value:Te.arg,done:ge.done}}else Te.type==="throw"&&(Xe=Ae,ge.method="throw",ge.arg=Te.arg)}}}function an(B,L){var ge=B.iterator[L.method];if(ge===ve){if(L.delegate=null,L.method==="throw"){if(B.iterator.return&&(L.method="return",L.arg=ve,an(B,L),L.method==="throw"))return ze;L.method="throw",L.arg=new TypeError("The iterator does not provide a 'throw' method")}return ze}var Xe=fe(ge,B.iterator,L.arg);if(Xe.type==="throw")return L.method="throw",L.arg=Xe.arg,L.delegate=null,ze;var tt=Xe.arg;if(!tt)return L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,ze;if(tt.done)L[B.resultName]=tt.value,L.next=B.nextLoc,L.method!=="return"&&(L.method="next",L.arg=ve);else return tt;return L.delegate=null,ze}xt(pt),ee(pt,ce,"Generator"),pt[pe]=function(){return this},pt.toString=function(){return"[object Generator]"};function et(B){var L={tryLoc:B[0]};1 in B&&(L.catchLoc=B[1]),2 in B&&(L.finallyLoc=B[2],L.afterLoc=B[3]),this.tryEntries.push(L)}function vn(B){var L=B.completion||{};L.type="normal",delete L.arg,B.completion=L}function ln(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(et,this),this.reset(!0)}D.keys=function(B){var L=[];for(var ge in B)L.push(ge);return L.reverse(),function Xe(){for(;L.length;){var tt=L.pop();if(tt in B)return Xe.value=tt,Xe.done=!1,Xe}return Xe.done=!0,Xe}};function Vt(B){if(B){var L=B[pe];if(L)return L.call(B);if(typeof B.next=="function")return B;if(!isNaN(B.length)){var ge=-1,Xe=function tt(){for(;++ge<B.length;)if(W.call(B,ge))return tt.value=B[ge],tt.done=!1,tt;return tt.value=ve,tt.done=!0,tt};return Xe.next=Xe}}return{next:Ee}}D.values=Vt;function Ee(){return{value:ve,done:!0}}return ln.prototype={constructor:ln,reset:function(B){if(this.prev=0,this.next=0,this.sent=this._sent=ve,this.done=!1,this.delegate=null,this.method="next",this.arg=ve,this.tryEntries.forEach(vn),!B)for(var L in this)L.charAt(0)==="t"&&W.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=ve)},stop:function(){this.done=!0;var B=this.tryEntries[0],L=B.completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(B){if(this.done)throw B;var L=this;function ge(U,Te){return ht.type="throw",ht.arg=B,L.next=U,Te&&(L.method="next",L.arg=ve),!!Te}for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var tt=this.tryEntries[Xe],ht=tt.completion;if(tt.tryLoc==="root")return ge("end");if(tt.tryLoc<=this.prev){var ue=W.call(tt,"catchLoc"),k=W.call(tt,"finallyLoc");if(ue&&k){if(this.prev<tt.catchLoc)return ge(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return ge(tt.finallyLoc)}else if(ue){if(this.prev<tt.catchLoc)return ge(tt.catchLoc,!0)}else if(k){if(this.prev<tt.finallyLoc)return ge(tt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(B,L){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var Xe=this.tryEntries[ge];if(Xe.tryLoc<=this.prev&&W.call(Xe,"finallyLoc")&&this.prev<Xe.finallyLoc){var tt=Xe;break}}tt&&(B==="break"||B==="continue")&&tt.tryLoc<=L&&L<=tt.finallyLoc&&(tt=null);var ht=tt?tt.completion:{};return ht.type=B,ht.arg=L,tt?(this.method="next",this.next=tt.finallyLoc,ze):this.complete(ht)},complete:function(B,L){if(B.type==="throw")throw B.arg;return B.type==="break"||B.type==="continue"?this.next=B.arg:B.type==="return"?(this.rval=this.arg=B.arg,this.method="return",this.next="end"):B.type==="normal"&&L&&(this.next=L),ze},finish:function(B){for(var L=this.tryEntries.length-1;L>=0;--L){var ge=this.tryEntries[L];if(ge.finallyLoc===B)return this.complete(ge.completion,ge.afterLoc),vn(ge),ze}},catch:function(B){for(var L=this.tryEntries.length-1;L>=0;--L){var ge=this.tryEntries[L];if(ge.tryLoc===B){var Xe=ge.completion;if(Xe.type==="throw"){var tt=Xe.arg;vn(ge)}return tt}}throw new Error("illegal catch attempt")},delegateYield:function(B,L,ge){return this.delegate={iterator:Vt(B),resultName:L,nextLoc:ge},this.method==="next"&&(this.arg=ve),ze}},D}(q.exports);try{regeneratorRuntime=j}catch{Function("r","regeneratorRuntime = r")(j)}},"./src/api.js":function(q,H,T){T.r(H),T.d(H,"setup",function(){return Ne}),T.d(H,"setupCache",function(){return Ie}),T("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),T("./node_modules/core-js/modules/es6.symbol.js"),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js"),T("./node_modules/regenerator-runtime/runtime.js");var j=T("axios"),D=T.n(j),te=T("./src/request.js"),W=T("./src/cache.js");T.d(H,"serializeQuery",function(){return W.serializeQuery});var ve=T("./src/config.js"),_e=T("./src/utilities.js");function pe(Ae,ze){if(Ae==null)return{};var He=oe(Ae,ze),Ze,it;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(Ae);for(it=0;it<ct.length;it++)Ze=ct[it],!(ze.indexOf(Ze)>=0)&&Object.prototype.propertyIsEnumerable.call(Ae,Ze)&&(He[Ze]=Ae[Ze])}return He}function oe(Ae,ze){if(Ae==null)return{};var He={},Ze=Object.keys(Ae),it,ct;for(ct=0;ct<Ze.length;ct++)it=Ze[ct],!(ze.indexOf(it)>=0)&&(He[it]=Ae[it]);return He}function ce(Ae,ze){var He=Object.keys(Ae);if(Object.getOwnPropertySymbols){var Ze=Object.getOwnPropertySymbols(Ae);ze&&(Ze=Ze.filter(function(it){return Object.getOwnPropertyDescriptor(Ae,it).enumerable})),He.push.apply(He,Ze)}return He}function ee(Ae){for(var ze=1;ze<arguments.length;ze++){var He=arguments[ze]!=null?arguments[ze]:{};ze%2?ce(Object(He),!0).forEach(function(Ze){re(Ae,Ze,He[Ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ae,Object.getOwnPropertyDescriptors(He)):ce(Object(He)).forEach(function(Ze){Object.defineProperty(Ae,Ze,Object.getOwnPropertyDescriptor(He,Ze))})}return Ae}function re(Ae,ze,He){return ze in Ae?Object.defineProperty(Ae,ze,{value:He,enumerable:!0,configurable:!0,writable:!0}):Ae[ze]=He,Ae}function fe(Ae,ze,He,Ze,it,ct,vt){try{var Mt=Ae[ct](vt),pt=Mt.value}catch(xt){He(xt);return}Mt.done?ze(pt):Promise.resolve(pt).then(Ze,it)}function Se(Ae){return function(){var ze=this,He=arguments;return new Promise(function(Ze,it){var ct=Ae.apply(ze,He);function vt(pt){fe(ct,Ze,it,vt,Mt,"next",pt)}function Mt(pt){fe(ct,Ze,it,vt,Mt,"throw",pt)}vt(void 0)})}}function Ie(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ae=Object(ve.makeConfig)(Ae);function ze(Ze){return He.apply(this,arguments)}function He(){return He=Se(regeneratorRuntime.mark(function Ze(it){var ct,vt,Mt,pt,xt;return regeneratorRuntime.wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return ct=Object(ve.mergeRequestConfig)(Ae,it),Ht.next=3,Object(te.default)(ct,it);case 3:if(vt=Ht.sent,Mt=vt.next,Object(_e.isFunction)(Mt)){Ht.next=7;break}return Ht.abrupt("return",Mt);case 7:return Ht.prev=7,Ht.next=10,ct.adapter(it);case 10:vt=Ht.sent,Ht.next=16;break;case 13:Ht.prev=13,Ht.t0=Ht.catch(7),pt=Ht.t0;case 16:if(!pt){Ht.next=31;break}if(xt=Object(_e.isFunction)(ct.readOnError)?ct.readOnError(pt,it):ct.readOnError,!xt){Ht.next=30;break}return Ht.prev=19,ct.acceptStale=!0,Ht.next=23,Object(te.default)(ct,it);case 23:return vt=Ht.sent,vt.next.request.stale=!0,Ht.abrupt("return",vt.next);case 28:Ht.prev=28,Ht.t1=Ht.catch(19);case 30:throw pt;case 31:return Ht.abrupt("return",Mt(vt));case 32:case"end":return Ht.stop()}},Ze,null,[[7,13],[19,28]])})),He.apply(this,arguments)}return{adapter:ze,config:Ae,store:Ae.store}}function Ne(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=ee(ee(ee({},ve.defaults.axios),Ae),{},{cache:ee(ee({},ve.defaults.axios.cache),Ae.cache)}),He=Ie(ze.cache);ze.cache;var Ze=pe(ze,["cache"]),it=D.a.create(ee(ee({},Ze),{},{adapter:He.adapter}));return it.cache=He.store,it}H.default={setup:Ne,setupCache:Ie,serializeQuery:W.serializeQuery}},"./src/cache.js":function(q,H,T){T.r(H),T.d(H,"read",function(){return ce}),T.d(H,"write",function(){return pe}),T.d(H,"key",function(){return re}),T.d(H,"invalidate",function(){return Ie}),T.d(H,"serializeQuery",function(){return Ne}),T("./node_modules/core-js/modules/es7.array.includes.js"),T("./node_modules/core-js/modules/es6.string.includes.js"),T("./node_modules/regenerator-runtime/runtime.js"),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");var j=T("./src/utilities.js"),D=T("./node_modules/md5/md5.js"),te=T.n(D),W=T("./src/serialize.js");function ve(Ae,ze,He,Ze,it,ct,vt){try{var Mt=Ae[ct](vt),pt=Mt.value}catch(xt){He(xt);return}Mt.done?ze(pt):Promise.resolve(pt).then(Ze,it)}function _e(Ae){return function(){var ze=this,He=arguments;return new Promise(function(Ze,it){var ct=Ae.apply(ze,He);function vt(pt){ve(ct,Ze,it,vt,Mt,"next",pt)}function Mt(pt){ve(ct,Ze,it,vt,Mt,"throw",pt)}vt(void 0)})}}function pe(Ae,ze,He){return oe.apply(this,arguments)}function oe(){return oe=_e(regeneratorRuntime.mark(function Ae(ze,He,Ze){var it;return regeneratorRuntime.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.prev=0,it={expires:ze.expires,data:Object(W.default)(ze,He,Ze)},vt.next=4,ze.store.setItem(ze.uuid,it);case 4:vt.next=19;break;case 6:if(vt.prev=6,vt.t0=vt.catch(0),ze.debug("Could not store response",vt.t0),!ze.clearOnError){vt.next=18;break}return vt.prev=10,vt.next=13,ze.store.clear();case 13:vt.next=18;break;case 15:vt.prev=15,vt.t1=vt.catch(10),ze.debug("Could not clear store",vt.t1);case 18:return vt.abrupt("return",!1);case 19:return vt.abrupt("return",!0);case 20:case"end":return vt.stop()}},Ae,null,[[0,6],[10,15]])})),oe.apply(this,arguments)}function ce(Ae,ze){return ee.apply(this,arguments)}function ee(){return ee=_e(regeneratorRuntime.mark(function Ae(ze,He){var Ze,it,ct,vt,Mt,pt,xt,Gt;return regeneratorRuntime.wrap(function(an){for(;;)switch(an.prev=an.next){case 0:return Ze=ze.uuid,it=ze.ignoreCache,an.next=3,ze.store.getItem(Ze);case 3:if(ct=an.sent,!(it||!ct||!ct.data)){an.next=10;break}throw ze.debug("cache-miss",He.url),vt=new Error,vt.reason="cache-miss",vt.message="Entry not found from cache",vt;case 10:if(Mt=ct.expires,pt=ct.data,xt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!xt&&!ze.acceptStale&&Mt!==0&&Mt<Date.now())){an.next=18;break}throw ze.debug("cache-stale",He.url),Gt=new Error,Gt.reason="cache-stale",Gt.message="Entry is stale",Gt;case 18:return ze.debug(ze.acceptStale?"cache-hit-stale":"cache-hit",He.url),an.abrupt("return",pt);case 20:case"end":return an.stop()}},Ae)})),ee.apply(this,arguments)}function re(Ae){if(Object(j.isFunction)(Ae.key))return Ae.key;var ze;return Object(j.isString)(Ae.key)?ze=function(Ze){var it="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),ct="".concat(Ae.key,"/").concat(it).concat(Ne(Ze));return Ze.data?ct+te()(Ze.data):ct}:ze=function(Ze){var it="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),ct=it+Ne(Ze);return Ze.data?ct+te()(Ze.data):ct},ze}function fe(Ae,ze){return Se.apply(this,arguments)}function Se(){return Se=_e(regeneratorRuntime.mark(function Ae(ze,He){var Ze;return regeneratorRuntime.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(Ze=He.method.toLowerCase(),!ze.exclude.methods.includes(Ze)){ct.next=4;break}return ct.next=4,ze.store.removeItem(ze.uuid);case 4:case"end":return ct.stop()}},Ae)})),Se.apply(this,arguments)}function Ie(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(j.isFunction)(Ae.invalidate)?Ae.invalidate:fe}function Ne(Ae){if(!Ae.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Ae.params);var ze=Ae.params,He=Ae.params instanceof URLSearchParams;return He||(ze=new URLSearchParams,Object.keys(Ae.params).forEach(function(Ze){return ze.append(Ze,Ae.params[Ze])})),"?".concat(ze.toString())}H.default={read:ce,write:pe,key:re,invalidate:Ie,serializeQuery:Ne}},"./src/config.js":function(q,H,T){T.r(H),T.d(H,"defaults",function(){return ee}),T.d(H,"makeConfig",function(){return fe}),T.d(H,"mergeRequestConfig",function(){return Se}),T("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),T("./node_modules/core-js/modules/es6.symbol.js"),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");var j=T("axios"),D=T.n(j),te=T("./src/memory.js"),W=T("./src/cache.js");function ve(Ie,Ne){var Ae=Object.keys(Ie);if(Object.getOwnPropertySymbols){var ze=Object.getOwnPropertySymbols(Ie);Ne&&(ze=ze.filter(function(He){return Object.getOwnPropertyDescriptor(Ie,He).enumerable})),Ae.push.apply(Ae,ze)}return Ae}function _e(Ie){for(var Ne=1;Ne<arguments.length;Ne++){var Ae=arguments[Ne]!=null?arguments[Ne]:{};Ne%2?ve(Object(Ae),!0).forEach(function(ze){pe(Ie,ze,Ae[ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ie,Object.getOwnPropertyDescriptors(Ae)):ve(Object(Ae)).forEach(function(ze){Object.defineProperty(Ie,ze,Object.getOwnPropertyDescriptor(Ae,ze))})}return Ie}function pe(Ie,Ne,Ae){return Ne in Ie?Object.defineProperty(Ie,Ne,{value:Ae,enumerable:!0,configurable:!0,writable:!0}):Ie[Ne]=Ae,Ie}var oe=function(){},ce=function(){for(var Ne,Ae=arguments.length,ze=new Array(Ae),He=0;He<Ae;He++)ze[He]=arguments[He];return(Ne=console).log.apply(Ne,["[axios-cache-adapter]"].concat(ze))},ee={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:D.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},re=["limit","store","adapter","uuid","acceptStale"],fe=function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ae=_e(_e(_e({},ee.cache),Ne),{},{exclude:_e(_e({},ee.cache.exclude),Ne.exclude)});return Ae.key=Object(W.key)(Ae),Ae.invalidate=Object(W.invalidate)(Ae),Ae.debug!==!1?Ae.debug=typeof Ae.debug=="function"?Ae.debug:ce:Ae.debug=oe,Ae.store||(Ae.store=new te.default),Ae.debug("Global cache config",Ae),Ae},Se=function(Ne,Ae){var ze=Ae.cache||{};ze&&re.forEach(function(Ze){return ze[Ze]?delete ze[Ze]:void 0});var He=_e(_e(_e({},Ne),ze),{},{exclude:_e(_e({},Ne.exclude),ze.exclude)});return He.debug===!0&&(He.debug=ce),ze.key&&(He.key=Object(W.key)(ze)),He.uuid=He.key(Ae),Ne.debug("Request config for ".concat(Ae.url),He),He};H.default={defaults:ee,makeConfig:fe,mergeRequestConfig:Se}},"./src/exclude.js":function(q,H,T){T.r(H),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js"),T("./node_modules/core-js/modules/es7.array.includes.js"),T("./node_modules/core-js/modules/es6.string.includes.js");var j=T("./src/utilities.js");function D(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=arguments.length>1?arguments[1]:void 0,ve=te.exclude,_e=ve===void 0?{}:ve,pe=te.debug,oe=W.method.toLowerCase();if(oe==="head"||_e.methods.includes(oe))return pe("Excluding request by HTTP method ".concat(W.url)),!0;if(typeof _e.filter=="function"&&_e.filter(W))return pe("Excluding request by filter ".concat(W.url)),!0;var ce=/\?.*$/.test(W.url)||Object(j.isObject)(W.params)&&Object.keys(W.params).length!==0||typeof URLSearchParams<"u"&&W.params instanceof URLSearchParams;if(_e.query&&ce)return pe("Excluding request by query ".concat(W.url)),!0;var ee=_e.paths||[],re=ee.some(function(fe){return W.url.match(fe)});return re?(pe("Excluding request by url match ".concat(W.url)),!0):!1}H.default=D},"./src/index.node.js":function(q,H,T){T.r(H);var j=T("./src/api.js");T.d(H,"setup",function(){return j.setup}),T.d(H,"setupCache",function(){return j.setupCache}),T.d(H,"serializeQuery",function(){return j.serializeQuery});var D=T("./src/redis.js");T.d(H,"RedisStore",function(){return D.default});var te=T("./src/redis-default.js");T.d(H,"RedisDefaultStore",function(){return te.default}),H.default={setup:j.setup,setupCache:j.setupCache,serializeQuery:j.serializeQuery,RedisStore:D.default,RedisDefaultStore:te.default}},"./src/limit.js":function(q,H,T){T.r(H),T("./node_modules/regenerator-runtime/runtime.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");function j(ve,_e,pe,oe,ce,ee,re){try{var fe=ve[ee](re),Se=fe.value}catch(Ie){pe(Ie);return}fe.done?_e(Se):Promise.resolve(Se).then(oe,ce)}function D(ve){return function(){var _e=this,pe=arguments;return new Promise(function(oe,ce){var ee=ve.apply(_e,pe);function re(Se){j(ee,oe,ce,re,fe,"next",Se)}function fe(Se){j(ee,oe,ce,re,fe,"throw",Se)}re(void 0)})}}function te(ve){return W.apply(this,arguments)}function W(){return W=D(regeneratorRuntime.mark(function ve(_e){var pe,oe;return regeneratorRuntime.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,_e.store.length();case 2:if(pe=ee.sent,!(pe<_e.limit)){ee.next=5;break}return ee.abrupt("return");case 5:return _e.debug("Current store size: ".concat(pe)),ee.next=8,_e.store.iterate(function(re,fe){oe||(oe={value:re,key:fe}),re.expires<oe.value.expires&&(oe={value:re,key:fe})});case 8:if(!oe){ee.next=12;break}return _e.debug("Removing item: ".concat(oe.key)),ee.next=12,_e.store.removeItem(oe.key);case 12:case"end":return ee.stop()}},ve)})),W.apply(this,arguments)}H.default=te},"./src/memory.js":function(q,H,T){T.r(H),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js"),T("./node_modules/regenerator-runtime/runtime.js");var j=T("./src/utilities.js");function D(oe,ce,ee,re,fe,Se,Ie){try{var Ne=oe[Se](Ie),Ae=Ne.value}catch(ze){ee(ze);return}Ne.done?ce(Ae):Promise.resolve(Ae).then(re,fe)}function te(oe){return function(){var ce=this,ee=arguments;return new Promise(function(re,fe){var Se=oe.apply(ce,ee);function Ie(Ae){D(Se,re,fe,Ie,Ne,"next",Ae)}function Ne(Ae){D(Se,re,fe,Ie,Ne,"throw",Ae)}Ie(void 0)})}}function W(oe,ce){if(!(oe instanceof ce))throw new TypeError("Cannot call a class as a function")}function ve(oe,ce){for(var ee=0;ee<ce.length;ee++){var re=ce[ee];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(oe,re.key,re)}}function _e(oe,ce,ee){return ce&&ve(oe.prototype,ce),oe}var pe=function(){function oe(){W(this,oe),this.store={}}return _e(oe,[{key:"getItem",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe){var Se;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Se=this.store[fe]||null,Ne.abrupt("return",JSON.parse(Se));case 2:case"end":return Ne.stop()}},re,this)}));function ee(re){return ce.apply(this,arguments)}return ee}()},{key:"setItem",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe,Se){return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return this.store[fe]=JSON.stringify(Se),Ne.abrupt("return",Se);case 2:case"end":return Ne.stop()}},re,this)}));function ee(re,fe){return ce.apply(this,arguments)}return ee}()},{key:"removeItem",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe){return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:delete this.store[fe];case 1:case"end":return Ie.stop()}},re,this)}));function ee(re){return ce.apply(this,arguments)}return ee}()},{key:"clear",value:function(){var ce=te(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:this.store={};case 1:case"end":return Se.stop()}},re,this)}));function ee(){return ce.apply(this,arguments)}return ee}()},{key:"length",value:function(){var ce=te(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.abrupt("return",Object.keys(this.store).length);case 1:case"end":return Se.stop()}},re,this)}));function ee(){return ce.apply(this,arguments)}return ee}()},{key:"iterate",value:function(ee){return Promise.all(Object(j.mapObject)(this.store,ee))}}]),oe}();H.default=pe},"./src/redis-default.js":function(q,H,T){T.r(H),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js"),T("./node_modules/regenerator-runtime/runtime.js"),T("./node_modules/core-js/modules/es6.function.bind.js"),T("./node_modules/core-js/modules/es6.function.name.js");var j=T("util");function D(oe,ce,ee,re,fe,Se,Ie){try{var Ne=oe[Se](Ie),Ae=Ne.value}catch(ze){ee(ze);return}Ne.done?ce(Ae):Promise.resolve(Ae).then(re,fe)}function te(oe){return function(){var ce=this,ee=arguments;return new Promise(function(re,fe){var Se=oe.apply(ce,ee);function Ie(Ae){D(Se,re,fe,Ie,Ne,"next",Ae)}function Ne(Ae){D(Se,re,fe,Ie,Ne,"throw",Ae)}Ie(void 0)})}}function W(oe,ce){if(!(oe instanceof ce))throw new TypeError("Cannot call a class as a function")}function ve(oe,ce){for(var ee=0;ee<ce.length;ee++){var re=ce[ee];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(oe,re.key,re)}}function _e(oe,ce,ee){return ce&&ve(oe.prototype,ce),oe}var pe=function(){function oe(ce){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};W(this,oe);var re=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ce.constructor.name!=="RedisClient")throw re}catch{throw re}this.client=ce,this.prefix=ee.prefix||"axios-cache",this.maxScanCount=ee.maxScanCount||1e3,this.getAsync=Object(j.promisify)(ce.get).bind(ce),this.psetexAsync=Object(j.promisify)(ce.psetex).bind(ce),this.delAsync=Object(j.promisify)(ce.del).bind(ce),this.scanAsync=Object(j.promisify)(ce.scan).bind(ce)}return _e(oe,[{key:"calculateTTL",value:function(ee){var re=Date.now();return ee.expires&&ee.expires>re?ee.expires-re:-1}},{key:"transformKey",value:function(ee){return this.prefix+"_"+ee}},{key:"getItem",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe){var Se;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.getAsync(this.transformKey(fe));case 2:if(Ne.t0=Ne.sent,Ne.t0){Ne.next=5;break}Ne.t0=null;case 5:return Se=Ne.t0,Ne.abrupt("return",JSON.parse(Se));case 7:case"end":return Ne.stop()}},re,this)}));function ee(re){return ce.apply(this,arguments)}return ee}()},{key:"setItem",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe,Se){var Ie,Ne;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(Ie=this.transformKey(fe),Ne=this.calculateTTL(Se),!(Ne>0)){ze.next=5;break}return ze.next=5,this.psetexAsync(Ie,Ne,JSON.stringify(Se));case 5:return ze.abrupt("return",Se);case 6:case"end":return ze.stop()}},re,this)}));function ee(re,fe){return ce.apply(this,arguments)}return ee}()},{key:"removeItem",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe){return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.delAsync(this.transformKey(fe));case 2:case"end":return Ie.stop()}},re,this)}));function ee(re){return ce.apply(this,arguments)}return ee}()},{key:"scan",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe){var Se,Ie;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:Se="0";case 1:return Ae.next=3,this.scanAsync(Se,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Ie=Ae.sent,Se=Ie[0],Ae.next=7,fe(Ie[1]);case 7:if(Se!=="0"){Ae.next=1;break}case 8:case"end":return Ae.stop()}},re,this)}));function ee(re){return ce.apply(this,arguments)}return ee}()},{key:"clear",value:function(){var ce=te(regeneratorRuntime.mark(function re(){var fe=this;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.scan(function(Ne){return fe.delAsync(Ne)});case 2:case"end":return Ie.stop()}},re,this)}));function ee(){return ce.apply(this,arguments)}return ee}()},{key:"length",value:function(){var ce=te(regeneratorRuntime.mark(function re(){var fe;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return fe=0,Ie.next=3,this.scan(function(Ne){fe+=Ne.length});case 3:return Ie.abrupt("return",fe);case 4:case"end":return Ie.stop()}},re,this)}));function ee(){return ce.apply(this,arguments)}return ee}()},{key:"iterate",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe){var Se=this,Ie,Ne;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return Ne=function(){return Ne=te(regeneratorRuntime.mark(function Ze(it){var ct,vt;return regeneratorRuntime.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,this.getAsync(it);case 2:if(pt.t0=pt.sent,pt.t0){pt.next=5;break}pt.t0=null;case 5:return ct=pt.t0,vt=JSON.parse(ct),pt.next=9,fe(vt,it);case 9:return pt.abrupt("return",pt.sent);case 10:case"end":return pt.stop()}},Ze,this)})),Ne.apply(this,arguments)},Ie=function(Ze){return Ne.apply(this,arguments)},ze.next=4,this.scan(function(He){return Promise.all(He.map(Ie.bind(Se)))});case 4:return ze.abrupt("return",Promise.resolve([]));case 5:case"end":return ze.stop()}},re,this)}));function ee(re){return ce.apply(this,arguments)}return ee}()}]),oe}();H.default=pe},"./src/redis.js":function(q,H,T){T.r(H),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js"),T("./node_modules/regenerator-runtime/runtime.js"),T("./node_modules/core-js/modules/es6.function.bind.js"),T("./node_modules/core-js/modules/es6.function.name.js");var j=T("util"),D=T("./src/utilities.js");function te(ce,ee,re,fe,Se,Ie,Ne){try{var Ae=ce[Ie](Ne),ze=Ae.value}catch(He){re(He);return}Ae.done?ee(ze):Promise.resolve(ze).then(fe,Se)}function W(ce){return function(){var ee=this,re=arguments;return new Promise(function(fe,Se){var Ie=ce.apply(ee,re);function Ne(ze){te(Ie,fe,Se,Ne,Ae,"next",ze)}function Ae(ze){te(Ie,fe,Se,Ne,Ae,"throw",ze)}Ne(void 0)})}}function ve(ce,ee){if(!(ce instanceof ee))throw new TypeError("Cannot call a class as a function")}function _e(ce,ee){for(var re=0;re<ee.length;re++){var fe=ee[re];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(ce,fe.key,fe)}}function pe(ce,ee,re){return ee&&_e(ce.prototype,ee),ce}var oe=function(){function ce(ee){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ve(this,ce);var fe=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ee.constructor.name!=="RedisClient")throw fe}catch{throw fe}this.client=ee,this.HASH_KEY=re,this.hgetAsync=Object(j.promisify)(ee.hget).bind(ee),this.hsetAsync=Object(j.promisify)(ee.hset).bind(ee),this.hdelAsync=Object(j.promisify)(ee.hdel).bind(ee),this.delAsync=Object(j.promisify)(ee.del).bind(ee),this.hlenAsync=Object(j.promisify)(ee.hlen).bind(ee),this.hgetallAsync=Object(j.promisify)(ee.hgetall).bind(ee)}return pe(ce,[{key:"getItem",value:function(){var ee=W(regeneratorRuntime.mark(function fe(Se){var Ie;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hgetAsync(this.HASH_KEY,Se);case 2:if(Ae.t0=Ae.sent,Ae.t0){Ae.next=5;break}Ae.t0=null;case 5:return Ie=Ae.t0,Ae.abrupt("return",JSON.parse(Ie));case 7:case"end":return Ae.stop()}},fe,this)}));function re(fe){return ee.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var ee=W(regeneratorRuntime.mark(function fe(Se,Ie){return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hsetAsync(this.HASH_KEY,Se,JSON.stringify(Ie));case 2:return Ae.abrupt("return",Ie);case 3:case"end":return Ae.stop()}},fe,this)}));function re(fe,Se){return ee.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var ee=W(regeneratorRuntime.mark(function fe(Se){return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.hdelAsync(this.HASH_KEY,Se);case 2:case"end":return Ne.stop()}},fe,this)}));function re(fe){return ee.apply(this,arguments)}return re}()},{key:"clear",value:function(){var ee=W(regeneratorRuntime.mark(function fe(){return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Ie.stop()}},fe,this)}));function re(){return ee.apply(this,arguments)}return re}()},{key:"length",value:function(){var ee=W(regeneratorRuntime.mark(function fe(){return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Ie.stop()}},fe,this)}));function re(){return ee.apply(this,arguments)}return re}()},{key:"iterate",value:function(){var ee=W(regeneratorRuntime.mark(function fe(Se){var Ie;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Ie=Ae.sent,Ae.abrupt("return",Promise.all(Object(D.mapObject)(Ie,Se)));case 4:case"end":return Ae.stop()}},fe,this)}));function re(fe){return ee.apply(this,arguments)}return re}()}]),ce}();H.default=oe},"./src/request.js":function(q,H,T){T.r(H),T("./node_modules/regenerator-runtime/runtime.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");var j=T("./src/response.js"),D=T("./src/exclude.js"),te=T("./src/cache.js");function W(oe,ce,ee,re,fe,Se,Ie){try{var Ne=oe[Se](Ie),Ae=Ne.value}catch(ze){ee(ze);return}Ne.done?ce(Ae):Promise.resolve(Ae).then(re,fe)}function ve(oe){return function(){var ce=this,ee=arguments;return new Promise(function(re,fe){var Se=oe.apply(ce,ee);function Ie(Ae){W(Se,re,fe,Ie,Ne,"next",Ae)}function Ne(Ae){W(Se,re,fe,Ie,Ne,"throw",Ae)}Ie(void 0)})}}function _e(oe,ce){return pe.apply(this,arguments)}function pe(){return pe=ve(regeneratorRuntime.mark(function oe(ce,ee){var re,fe,Se;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Se=function(){return ce.excludeFromCache=!0,{config:ce,next:re}},ce.debug("uuid",ce.uuid),re=function(){for(var ze=arguments.length,He=new Array(ze),Ze=0;Ze<ze;Ze++)He[Ze]=arguments[Ze];return j.default.apply(void 0,[ce,ee].concat(He))},Ne.next=5,ce.invalidate(ce,ee);case 5:if(!Object(D.default)(ce,ee)){Ne.next=7;break}return Ne.abrupt("return",Se());case 7:return Ne.prev=7,Ne.next=10,Object(te.read)(ce,ee);case 10:return fe=Ne.sent,fe.config=ee,fe.request={fromCache:!0},Ne.abrupt("return",{config:ce,next:fe});case 16:if(Ne.prev=16,Ne.t0=Ne.catch(7),!(ce.clearOnStale&&Ne.t0.reason==="cache-stale")){Ne.next=21;break}return Ne.next=21,ce.store.removeItem(ce.uuid);case 21:return Ne.abrupt("return",{config:ce,next:re});case 22:case"end":return Ne.stop()}},oe,null,[[7,16]])})),pe.apply(this,arguments)}H.default=_e},"./src/response.js":function(q,H,T){T.r(H),T("./node_modules/regenerator-runtime/runtime.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");var j=T("./src/limit.js"),D=T("./src/cache.js"),te=T("./node_modules/cache-control-esm/index.js");function W(oe,ce,ee,re,fe,Se,Ie){try{var Ne=oe[Se](Ie),Ae=Ne.value}catch(ze){ee(ze);return}Ne.done?ce(Ae):Promise.resolve(Ae).then(re,fe)}function ve(oe){return function(){var ce=this,ee=arguments;return new Promise(function(re,fe){var Se=oe.apply(ce,ee);function Ie(Ae){W(Se,re,fe,Ie,Ne,"next",Ae)}function Ne(Ae){W(Se,re,fe,Ie,Ne,"throw",Ae)}Ie(void 0)})}}function _e(oe,ce,ee){return pe.apply(this,arguments)}function pe(){return pe=ve(regeneratorRuntime.mark(function oe(ce,ee,re){var fe,Se,Ie,Ne,Ae;return regeneratorRuntime.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(fe=re.request,Se=fe===void 0?{}:fe,Ie=re.headers,Ne=Ie===void 0?{}:Ie,!(["arraybuffer","blob"].indexOf(Se.responseType)>-1)){He.next=3;break}return He.abrupt("return",re);case 3:if(Ae={},ce.readHeaders&&(Ne["cache-control"]?(Ae=Object(te.parse)(Ne["cache-control"]),(Ae.noCache||Ae.noStore)&&(ce.excludeFromCache=!0)):Ne.expires?ce.expires=new Date(Ne.expires).getTime():ce.expires=new Date().getTime()),ce.excludeFromCache){He.next=15;break}if(Ae.maxAge||Ae.maxAge===0?ce.expires=Date.now()+Ae.maxAge*1e3:ce.readHeaders||(ce.expires=ce.maxAge===0?Date.now():Date.now()+ce.maxAge),!ce.limit){He.next=11;break}return ce.debug("Detected limit: ".concat(ce.limit)),He.next=11,Object(j.default)(ce);case 11:return He.next=13,Object(D.write)(ce,ee,re);case 13:He.next=16;break;case 15:re.request.excludedFromCache=!0;case 16:return He.abrupt("return",re);case 17:case"end":return He.stop()}},oe)})),pe.apply(this,arguments)}H.default=_e},"./src/serialize.js":function(q,H,T){T.r(H),T("./node_modules/core-js/modules/es6.symbol.js"),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");function j(W,ve){if(W==null)return{};var _e=D(W,ve),pe,oe;if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(W);for(oe=0;oe<ce.length;oe++)pe=ce[oe],!(ve.indexOf(pe)>=0)&&Object.prototype.propertyIsEnumerable.call(W,pe)&&(_e[pe]=W[pe])}return _e}function D(W,ve){if(W==null)return{};var _e={},pe=Object.keys(W),oe,ce;for(ce=0;ce<pe.length;ce++)oe=pe[ce],!(ve.indexOf(oe)>=0)&&(_e[oe]=W[oe]);return _e}function te(W,ve,_e){if(_e.data)try{_e.data=JSON.parse(_e.data)}catch(oe){W.debug("Could not parse data as JSON",oe)}_e.request,_e.config;var pe=j(_e,["request","config"]);return pe}H.default=te},"./src/utilities.js":function(q,H,T){T.r(H),T.d(H,"isObject",function(){return D}),T.d(H,"getTag",function(){return te}),T.d(H,"isFunction",function(){return W}),T.d(H,"isString",function(){return ve}),T.d(H,"mapObject",function(){return _e}),T("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),T("./node_modules/core-js/modules/es6.symbol.js"),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");function j(pe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?j=function(ce){return typeof ce}:j=function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},j(pe)}function D(pe){var oe=j(pe);return pe!=null&&(oe==="object"||oe==="function")}function te(pe){return pe===null?pe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(pe)}function W(pe){if(!D(pe))return!1;var oe=te(pe);return oe==="[object Function]"||oe==="[object AsyncFunction]"||oe==="[object GeneratorFunction]"||oe==="[object Proxy]"}function ve(pe){var oe=j(pe);return oe==="string"||oe==="object"&&pe!=null&&!Array.isArray(pe)&&te(pe)==="[object String]"}function _e(pe,oe){return D(pe)?Object.keys(pe).map(function(ce){return oe(pe[ce],ce)}):[]}},axios:function(q,H){q.exports=ae},util:function(q,H){q.exports=M.default}})})});const N={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},O=R.setupCache({maxAge:60*60*24*1e3}),he=I.default.create({adapter:O.adapter}),K=async(X,G={})=>{const ae={...N,...G},[q,H]=i.lngLatToGoogle(X,ae.zoomBase),T=ae.tileUrl.replace("{z}",String(ae.zoomBase)).replace("{x}",String(q)).replace("{y}",String(H)),j={code:"",prefecture:"",city:""};let D;try{const ve=await he.get(T,{responseType:"arraybuffer"});D=Buffer.from(ve.data,"binary")}catch(ve){throw new Error(ve)}const te=new p.VectorTile(new E.default(D));let W=Object.keys(te.layers);return Array.isArray(W)||(W=[W]),W.forEach(ve=>{const _e=te.layers[ve];if(_e&&ae.layer===_e.name)for(let pe=0;pe<_e.length;pe++){const oe=_e.feature(pe).toGeoJSON(q,H,ae.zoomBase);W.length>1&&(oe.properties.vt_layer=ve);const ce={type:"FeatureCollection",features:[oe]};t.geoContains(ce,X)&&(j.code=String(oe.id).length===5?String(oe.id):`0${String(oe.id)}`,j.prefecture=oe.properties.prefecture,j.city=oe.properties.city)}}),j};e.openReverseGeocoder=K})(PC);const i5={defaultComment:"更新地址",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},o5={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},s5={defaultComment:"住所を更新",postcodeField:{key:"addr:postcode",displayName:"郵便番号",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"都道府県",placeholder:"東京都",adminLevel:4},{key:"addr:city",displayName:"市町村と東京23区",placeholder:"千代田区",adminLevel:7},{key:"addr:suburb",displayName:"政令指定都市の区",placeholder:""},{key:"addr:quarter",displayName:"地名",placeholder:"外神田",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"丁目",placeholder:"1丁目"},{key:"addr:block_number",displayName:"番地",placeholder:"17"},{key:"addr:housenumber",displayName:"号",placeholder:"6",prefix:"-"}]},a5={defaultComment:"주소 업데이트",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},_E={JPN:s5,CHN:i5,DEU:o5,KOR:a5};function UP(e,t,i={}){const l={type:"Feature"};return(i.id===0||i.id)&&(l.id=i.id),i.bbox&&(l.bbox=i.bbox),l.properties=t||{},l.geometry=e,l}function l5(e,t,i={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!xE(e[0])||!xE(e[1]))throw new Error("coordinates must contain numbers");return UP({type:"Point",coordinates:e},t,i)}function u5(e,t,i={}){for(const c of e){if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(c[c.length-1].length!==c[0].length)throw new Error("First and last Position are not equivalent.");for(let g=0;g<c[c.length-1].length;g++)if(c[c.length-1][g]!==c[0][g])throw new Error("First and last Position are not equivalent.")}return UP({type:"Polygon",coordinates:e},t,i)}function xE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function c5(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function h5(e){return e.type==="Feature"?e.geometry:e}function $P(e,t,i){if(e!==null)for(var l,c,g,p,u,E,I,M=0,b=0,C,R=e.type,N=R==="FeatureCollection",O=R==="Feature",he=N?e.features.length:1,K=0;K<he;K++){I=N?e.features[K].geometry:O?e.geometry:e,C=I?I.type==="GeometryCollection":!1,u=C?I.geometries.length:1;for(var X=0;X<u;X++){var G=0,ae=0;if(p=C?I.geometries[X]:I,p!==null){E=p.coordinates;var q=p.type;switch(M=q==="Polygon"||q==="MultiPolygon"?1:0,q){case null:break;case"Point":if(t(E,b,K,G,ae)===!1)return!1;b++,G++;break;case"LineString":case"MultiPoint":for(l=0;l<E.length;l++){if(t(E[l],b,K,G,ae)===!1)return!1;b++,q==="MultiPoint"&&G++}q==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(l=0;l<E.length;l++){for(c=0;c<E[l].length-M;c++){if(t(E[l][c],b,K,G,ae)===!1)return!1;b++}q==="MultiLineString"&&G++,q==="Polygon"&&ae++}q==="Polygon"&&G++;break;case"MultiPolygon":for(l=0;l<E.length;l++){for(ae=0,c=0;c<E[l].length;c++){for(g=0;g<E[l][c].length-M;g++){if(t(E[l][c][g],b,K,G,ae)===!1)return!1;b++}ae++}G++}break;case"GeometryCollection":for(l=0;l<p.geometries.length;l++)if($P(p.geometries[l],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function d5(e,t){var i=0,l=0,c=0,g=0,p=0,u=0,E=0,I=0,M=null,b=null,C=e[0],R=e[1],N=t.length;for(i;i<N;i++){l=0;var O=t[i].length-1,he=t[i];if(M=he[0],M[0]!==he[O][0]&&M[1]!==he[O][1])throw new Error("First and last coordinates in a ring must be the same");for(p=M[0]-C,u=M[1]-R,l;l<O;l++){if(b=he[l+1],I=b[1]-R,u<0&&I<0||u>0&&I>0){M=b,u=I,p=M[0]-C;continue}if(E=b[0]-e[0],I>0&&u<=0){if(g=p*I-E*u,g>0)c=c+1;else if(g===0)return 0}else if(u>0&&I<=0){if(g=p*I-E*u,g<0)c=c+1;else if(g===0)return 0}else if(I===0&&u<0){if(g=p*I-E*u,g===0)return 0}else if(u===0&&I<0){if(g=p*I-E*u,g===0)return 0}else if(u===0&&I===0){if(E<=0&&p>=0)return 0;if(p<=0&&E>=0)return 0}M=b,u=I,p=E}}return c%2!==0}function f5(e,t,i={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const l=c5(e),c=h5(t),g=c.type,p=t.bbox;let u=c.coordinates;if(p&&p5(l,p)===!1)return!1;g==="Polygon"&&(u=[u]);let E=!1;for(var I=0;I<u.length;++I){const M=d5(l,u[I]);if(M===0)return!i.ignoreBoundary;M&&(E=!0)}return E}function p5(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function m5(e,t={}){let i=0,l=0,c=0;return $P(e,function(g){i+=g[0],l+=g[1],c++}),l5([i/c,l/c],t.properties)}const g5=()=>{const[e,t]=gt.useState(!1);return{detectCountry:gt.useCallback(async(l,c)=>{t(!0);const p=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const u of p.features)if(f5([l,c],u.geometry))return console.log("country: ",u.properties),t(!1),u;t(!1)},[]),loadingCountry:e}},mv=({feature:e,fieldOption:t,suggestList:i,onChange:l})=>{var u;const[c,g]=gt.useState((u=e.properties)==null?void 0:u[t.key]);gt.useEffect(()=>{var E;g((E=e.properties)==null?void 0:E[t.key])},[e]);const p=gt.useCallback(E=>{g(E.currentTarget.value),l&&l(E)},[]);return mt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[mt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:p}),mt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(E=>{if(parseInt(E.tags.admin_level)===t.adminLevel)return mt.jsx("option",{value:E.tags.name},E.id);if(E.type==="node"&&t.adminLevel===9)return mt.jsx("option",{value:E.tags.name},E.id)})})]})},y5=({feature:e,fields:t})=>e.properties?mt.jsxs(mt.Fragment,{children:[t.postcodeField&&mt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var l;return mt.jsxs(mt.Fragment,{children:[mt.jsx("span",{children:(l=e.properties)==null?void 0:l[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var l;return mt.jsxs(mt.Fragment,{children:[mt.jsx("span",{children:(l=e.properties)==null?void 0:l[i.key]})," "]})})]}):null,v5=({placeholder:e,defaultValue:t})=>{const[i,l]=gt.useState(t);gt.useEffect(()=>{l(t)},[t]);const c=gt.useCallback(g=>{l(g.currentTarget.value)},[]);return mt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[mt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var Ug={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ug.exports;(function(e,t){(function(){var i,l="4.15.0",c=200,g="Expected a function",p="__lodash_hash_undefined__",u=1,E=2,I=1/0,M=9007199254740991,b="[object Arguments]",C="[object Array]",R="[object Boolean]",N="[object Date]",O="[object Error]",he="[object Function]",K="[object GeneratorFunction]",X="[object Map]",G="[object Number]",ae="[object Object]",q="[object Promise]",H="[object RegExp]",T="[object Set]",j="[object String]",D="[object Symbol]",te="[object WeakMap]",W="[object ArrayBuffer]",ve="[object DataView]",_e="[object Float32Array]",pe="[object Float64Array]",oe="[object Int8Array]",ce="[object Int16Array]",ee="[object Int32Array]",re="[object Uint8Array]",fe="[object Uint8ClampedArray]",Se="[object Uint16Array]",Ie="[object Uint32Array]",Ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,ze=/^\./,He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ze=/[\\^$.*+?()[\]{}|]/g,it=/\\(\\)?/g,ct=/\w*$/,vt=/^\[object .+?Constructor\]$/,Mt=/^(?:0|[1-9]\d*)$/,pt={};pt[_e]=pt[pe]=pt[oe]=pt[ce]=pt[ee]=pt[re]=pt[fe]=pt[Se]=pt[Ie]=!0,pt[b]=pt[C]=pt[W]=pt[R]=pt[ve]=pt[N]=pt[O]=pt[he]=pt[X]=pt[G]=pt[ae]=pt[H]=pt[T]=pt[j]=pt[te]=!1;var xt={};xt[b]=xt[C]=xt[W]=xt[ve]=xt[R]=xt[N]=xt[_e]=xt[pe]=xt[oe]=xt[ce]=xt[ee]=xt[X]=xt[G]=xt[ae]=xt[H]=xt[T]=xt[j]=xt[D]=xt[re]=xt[fe]=xt[Se]=xt[Ie]=!0,xt[O]=xt[he]=xt[te]=!1;var Gt=typeof Ul=="object"&&Ul&&Ul.Object===Object&&Ul,Ht=typeof self=="object"&&self&&self.Object===Object&&self,an=Gt||Ht||Function("return this")(),et=t&&!t.nodeType&&t,vn=et&&!0&&e&&!e.nodeType&&e,ln=vn&&vn.exports===et,Vt=ln&&Gt.process,Ee=function(){try{return Vt&&Vt.binding("util")}catch{}}(),B=Ee&&Ee.isTypedArray;function L(Z,ye){return Z.set(ye[0],ye[1]),Z}function ge(Z,ye){return Z.add(ye),Z}function Xe(Z,ye,Ue){switch(Ue.length){case 0:return Z.call(ye);case 1:return Z.call(ye,Ue[0]);case 2:return Z.call(ye,Ue[0],Ue[1]);case 3:return Z.call(ye,Ue[0],Ue[1],Ue[2])}return Z.apply(ye,Ue)}function tt(Z,ye){for(var Ue=-1,ut=Z?Z.length:0;++Ue<ut&&ye(Z[Ue],Ue,Z)!==!1;);return Z}function ht(Z,ye){for(var Ue=-1,ut=ye.length,zt=Z.length;++Ue<ut;)Z[zt+Ue]=ye[Ue];return Z}function ue(Z,ye,Ue,ut){for(var zt=-1,bt=Z?Z.length:0;++zt<bt;)Ue=ye(Ue,Z[zt],zt,Z);return Ue}function k(Z,ye){for(var Ue=-1,ut=Z?Z.length:0;++Ue<ut;)if(ye(Z[Ue],Ue,Z))return!0;return!1}function U(Z){return function(ye){return ye==null?i:ye[Z]}}function Te(Z,ye){for(var Ue=-1,ut=Array(Z);++Ue<Z;)ut[Ue]=ye(Ue);return ut}function Ve(Z){return function(ye){return Z(ye)}}function rt(Z,ye){return Z==null?i:Z[ye]}function Ge(Z){var ye=!1;if(Z!=null&&typeof Z.toString!="function")try{ye=!!(Z+"")}catch{}return ye}function St(Z){var ye=-1,Ue=Array(Z.size);return Z.forEach(function(ut,zt){Ue[++ye]=[zt,ut]}),Ue}function Pt(Z,ye){return function(Ue){return Z(ye(Ue))}}function mn(Z){var ye=-1,Ue=Array(Z.size);return Z.forEach(function(ut){Ue[++ye]=ut}),Ue}var bn=Array.prototype,Ot=Function.prototype,Ar=Object.prototype,Qr=an["__core-js_shared__"],Ti=function(){var Z=/[^.]+$/.exec(Qr&&Qr.keys&&Qr.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),Ur=Ot.toString,ke=Ar.hasOwnProperty,se=Ur.call(Object),ie=Ar.toString,xe=RegExp("^"+Ur.call(ke).replace(Ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ce=ln?an.Buffer:i,Me=an.Symbol,je=an.Uint8Array,Ke=Pt(Object.getPrototypeOf,Object),Le=Object.create,at=Ar.propertyIsEnumerable,dt=bn.splice,st=Object.getOwnPropertySymbols,Et=Ce?Ce.isBuffer:i,qt=Pt(Object.keys,Object),en=Math.max,En=Hs(an,"DataView"),un=Hs(an,"Map"),Tn=Hs(an,"Promise"),wn=Hs(an,"Set"),sr=Hs(an,"WeakMap"),Hn=Hs(Object,"create"),_n=!at.call({valueOf:1},"valueOf"),Un=gn(En),Yn=gn(un),Mr=gn(Tn),jr=gn(wn),Wr=gn(sr),Po=Me?Me.prototype:i,zn=Po?Po.valueOf:i,Ya=Po?Po.toString:i;function Sn(){}function xr(Z){var ye=-1,Ue=Z?Z.length:0;for(this.clear();++ye<Ue;){var ut=Z[ye];this.set(ut[0],ut[1])}}function fi(){this.__data__=Hn?Hn(null):{}}function qh(Z){return this.has(Z)&&delete this.__data__[Z]}function Ii(Z){var ye=this.__data__;if(Hn){var Ue=ye[Z];return Ue===p?i:Ue}return ke.call(ye,Z)?ye[Z]:i}function pi(Z){var ye=this.__data__;return Hn?ye[Z]!==i:ke.call(ye,Z)}function Ns(Z,ye){var Ue=this.__data__;return Ue[Z]=Hn&&ye===i?p:ye,this}xr.prototype.clear=fi,xr.prototype.delete=qh,xr.prototype.get=Ii,xr.prototype.has=pi,xr.prototype.set=Ns;function Xr(Z){var ye=-1,Ue=Z?Z.length:0;for(this.clear();++ye<Ue;){var ut=Z[ye];this.set(ut[0],ut[1])}}function pr(){this.__data__=[]}function va(Z){var ye=this.__data__,Ue=xa(ye,Z);if(Ue<0)return!1;var ut=ye.length-1;return Ue==ut?ye.pop():dt.call(ye,Ue,1),!0}function Ni(Z){var ye=this.__data__,Ue=xa(ye,Z);return Ue<0?i:ye[Ue][1]}function ur(Z){return xa(this.__data__,Z)>-1}function Ja(Z,ye){var Ue=this.__data__,ut=xa(Ue,Z);return ut<0?Ue.push([Z,ye]):Ue[ut][1]=ye,this}Xr.prototype.clear=pr,Xr.prototype.delete=va,Xr.prototype.get=Ni,Xr.prototype.has=ur,Xr.prototype.set=Ja;function wr(Z){var ye=-1,Ue=Z?Z.length:0;for(this.clear();++ye<Ue;){var ut=Z[ye];this.set(ut[0],ut[1])}}function hu(){this.__data__={hash:new xr,map:new(un||Xr),string:new xr}}function Ui(Z){return xs(this,Z).delete(Z)}function Kh(Z){return xs(this,Z).get(Z)}function Qa(Z){return xs(this,Z).has(Z)}function gs(Z,ye){return xs(this,Z).set(Z,ye),this}wr.prototype.clear=hu,wr.prototype.delete=Ui,wr.prototype.get=Kh,wr.prototype.has=Qa,wr.prototype.set=gs;function $i(Z){var ye=-1,Ue=Z?Z.length:0;for(this.__data__=new wr;++ye<Ue;)this.add(Z[ye])}function Fn(Z){return this.__data__.set(Z,p),this}function du(Z){return this.__data__.has(Z)}$i.prototype.add=$i.prototype.push=Fn,$i.prototype.has=du;function mi(Z){this.__data__=new Xr(Z)}function Us(){this.__data__=new Xr}function fu(Z){return this.__data__.delete(Z)}function el(Z){return this.__data__.get(Z)}function _a(Z){return this.__data__.has(Z)}function tl(Z,ye){var Ue=this.__data__;if(Ue instanceof Xr){var ut=Ue.__data__;if(!un||ut.length<c-1)return ut.push([Z,ye]),this;Ue=this.__data__=new wr(ut)}return Ue.set(Z,ye),this}mi.prototype.clear=Us,mi.prototype.delete=fu,mi.prototype.get=el,mi.prototype.has=_a,mi.prototype.set=tl;function ys(Z,ye){var Ue=Lr(Z)||ho(Z)?Te(Z.length,String):[],ut=Ue.length,zt=!!ut;for(var bt in Z)(ye||ke.call(Z,bt))&&!(zt&&(bt=="length"||Gi(bt,ut)))&&Ue.push(bt);return Ue}function nl(Z,ye,Ue){(Ue!==i&&!co(Z[ye],Ue)||typeof ye=="number"&&Ue===i&&!(ye in Z))&&(Z[ye]=Ue)}function cc(Z,ye,Ue){var ut=Z[ye];(!(ke.call(Z,ye)&&co(ut,Ue))||Ue===i&&!(ye in Z))&&(Z[ye]=Ue)}function xa(Z,ye){for(var Ue=Z.length;Ue--;)if(co(Z[Ue][0],ye))return Ue;return-1}function Yh(Z,ye){return Z&&ul(ye,po(ye),Z)}function Ci(Z,ye,Ue,ut,zt,bt,Nt){var nn;if(ut&&(nn=bt?ut(Z,zt,bt,Nt):ut(Z)),nn!==i)return nn;if(!Dr(Z))return Z;var yn=Lr(Z);if(yn){if(nn=xu(Z),!ye)return ll(Z,nn)}else{var $n=Vi(Z),Ln=$n==he||$n==K;if(ni(Z))return Rn(Z,ye);if($n==ae||$n==b||Ln&&!bt){if(Ge(Z))return bt?Z:{};if(nn=wc(Ln?{}:Z),!ye)return gc(Z,Yh(nn,Z))}else{if(!xt[$n])return bt?Z:{};nn=cl(Z,$n,Ci,ye)}}Nt||(Nt=new mi);var qn=Nt.get(Z);if(qn)return qn;if(Nt.set(Z,nn),!yn)var mr=Ue?Ea(Z):po(Z);return tt(mr||Z,function($r,kr){mr&&(kr=$r,$r=Z[kr]),cc(nn,kr,Ci($r,ye,Ue,ut,kr,Z,Nt))}),nn}function wa(Z){return Dr(Z)?Le(Z):{}}var ei=vc(rl),ti=_s();function rl(Z,ye){return Z&&ti(Z,ye,po)}function ba(Z,ye){ye=Zs(ye,Z)?[ye]:Ao(ye);for(var Ue=0,ut=ye.length;Z!=null&&Ue<ut;)Z=Z[fl(ye[Ue++])];return Ue&&Ue==ut?Z:i}function il(Z,ye,Ue){var ut=ye(Z);return Lr(Z)?ut:ht(ut,Ue(Z))}function hc(Z){return ie.call(Z)}function $s(Z,ye){return Z!=null&&ye in Object(Z)}function pu(Z,ye,Ue,ut,zt){return Z===ye?!0:Z==null||ye==null||!Dr(Z)&&!fo(ye)?Z!==Z&&ye!==ye:dc(Z,ye,pu,Ue,ut,zt)}function dc(Z,ye,Ue,ut,zt,bt){var Nt=Lr(Z),nn=Lr(ye),yn=C,$n=C;Nt||(yn=Vi(Z),yn=yn==b?ae:yn),nn||($n=Vi(ye),$n=$n==b?ae:$n);var Ln=yn==ae&&!Ge(Z),qn=$n==ae&&!Ge(ye),mr=yn==$n;if(mr&&!Ln)return bt||(bt=new mi),Nt||ts(Z)?vu(Z,ye,Ue,ut,zt,bt):id(Z,ye,yn,Ue,ut,zt,bt);if(!(zt&E)){var $r=Ln&&ke.call(Z,"__wrapped__"),kr=qn&&ke.call(ye,"__wrapped__");if($r||kr){var Hi=$r?Z.value():Z,Zi=kr?ye.value():ye;return bt||(bt=new mi),Ue(Hi,Zi,ut,zt,bt)}}return mr?(bt||(bt=new mi),_c(Z,ye,Ue,ut,zt,bt)):!1}function fc(Z,ye,Ue,ut){var zt=Ue.length,bt=zt;if(Z==null)return!bt;for(Z=Object(Z);zt--;){var Nt=Ue[zt];if(Nt[2]?Nt[1]!==Z[Nt[0]]:!(Nt[0]in Z))return!1}for(;++zt<bt;){Nt=Ue[zt];var nn=Nt[0],yn=Z[nn],$n=Nt[1];if(Nt[2]){if(yn===i&&!(nn in Z))return!1}else{var Ln=new mi,qn;if(!(qn===i?pu($n,yn,ut,u|E,Ln):qn))return!1}}return!0}function Jh(Z){if(!Dr(Z)||hl(Z))return!1;var ye=Xs(Z)||Ge(Z)?xe:vt;return ye.test(gn(Z))}function Qh(Z){return fo(Z)&&qs(Z.length)&&!!pt[ie.call(Z)]}function mu(Z){return typeof Z=="function"?Z:Z==null?bc:typeof Z=="object"?Lr(Z)?gu(Z[0],Z[1]):sl(Z):Es(Z)}function Sa(Z){if(!Ws(Z))return qt(Z);var ye=[];for(var Ue in Object(Z))ke.call(Z,Ue)&&Ue!="constructor"&&ye.push(Ue);return ye}function ol(Z){if(!Dr(Z))return ad(Z);var ye=Ws(Z),Ue=[];for(var ut in Z)ut=="constructor"&&(ye||!ke.call(Z,ut))||Ue.push(ut);return Ue}function sl(Z){var ye=sd(Z);return ye.length==1&&ye[0][2]?dl(ye[0][0],ye[0][1]):function(Ue){return Ue===Z||fc(Ue,Z,ye)}}function gu(Z,ye){return Zs(Z)&&Qo(ye)?dl(fl(Z),ye):function(Ue){var ut=Ss(Ue,Z);return ut===i&&ut===ye?Eu(Ue,Z):pu(ye,ut,i,u|E)}}function al(Z,ye,Ue,ut,zt){if(Z!==ye){if(!(Lr(ye)||ts(ye)))var bt=ol(ye);tt(bt||ye,function(Nt,nn){if(bt&&(nn=Nt,Nt=ye[nn]),Dr(Nt))zt||(zt=new mi),uo(Z,ye,nn,Ue,al,ut,zt);else{var yn=ut?ut(Z[nn],Nt,nn+"",Z,ye,zt):i;yn===i&&(yn=Nt),nl(Z,nn,yn)}})}}function uo(Z,ye,Ue,ut,zt,bt,Nt){var nn=Z[Ue],yn=ye[Ue],$n=Nt.get(yn);if($n){nl(Z,Ue,$n);return}var Ln=bt?bt(nn,yn,Ue+"",Z,ye,Nt):i,qn=Ln===i;qn&&(Ln=yn,Lr(yn)||ts(yn)?Lr(nn)?Ln=nn:es(nn)?Ln=ll(nn):(qn=!1,Ln=Ci(yn,!0)):Ks(yn)||ho(yn)?ho(nn)?Ln=Ta(nn):!Dr(nn)||ut&&Xs(nn)?(qn=!1,Ln=Ci(yn,!0)):Ln=nn:qn=!1),qn&&(Nt.set(yn,Ln),zt(Ln,yn,ut,bt,Nt),Nt.delete(yn)),nl(Z,Ue,Ln)}function ed(Z){return function(ye){return ba(ye,Z)}}function yu(Z,ye){return ye=en(ye===i?Z.length-1:ye,0),function(){for(var Ue=arguments,ut=-1,zt=en(Ue.length-ye,0),bt=Array(zt);++ut<zt;)bt[ut]=Ue[ye+ut];ut=-1;for(var Nt=Array(ye+1);++ut<ye;)Nt[ut]=Ue[ut];return Nt[ye]=bt,Xe(Z,this,Nt)}}function vs(Z){if(typeof Z=="string")return Z;if(Mo(Z))return Ya?Ya.call(Z):"";var ye=Z+"";return ye=="0"&&1/Z==-I?"-0":ye}function Ao(Z){return Lr(Z)?Z:ar(Z)}function Rn(Z,ye){if(ye)return Z.slice();var Ue=new Z.constructor(Z.length);return Z.copy(Ue),Ue}function Vs(Z){var ye=new Z.constructor(Z.byteLength);return new je(ye).set(new je(Z)),ye}function td(Z,ye){var Ue=ye?Vs(Z.buffer):Z.buffer;return new Z.constructor(Ue,Z.byteOffset,Z.byteLength)}function Gs(Z,ye,Ue){var ut=ye?Ue(St(Z),!0):St(Z);return ue(ut,L,new Z.constructor)}function nd(Z){var ye=new Z.constructor(Z.source,ct.exec(Z));return ye.lastIndex=Z.lastIndex,ye}function pc(Z,ye,Ue){var ut=ye?Ue(mn(Z),!0):mn(Z);return ue(ut,ge,new Z.constructor)}function rd(Z){return zn?Object(zn.call(Z)):{}}function mc(Z,ye){var Ue=ye?Vs(Z.buffer):Z.buffer;return new Z.constructor(Ue,Z.byteOffset,Z.length)}function ll(Z,ye){var Ue=-1,ut=Z.length;for(ye||(ye=Array(ut));++Ue<ut;)ye[Ue]=Z[Ue];return ye}function ul(Z,ye,Ue,ut){Ue||(Ue={});for(var zt=-1,bt=ye.length;++zt<bt;){var Nt=ye[zt],nn=i;cc(Ue,Nt,nn===i?Z[Nt]:nn)}return Ue}function gc(Z,ye){return ul(Z,_u(Z),ye)}function yc(Z){return yu(function(ye,Ue){var ut=-1,zt=Ue.length,bt=zt>1?Ue[zt-1]:i,Nt=zt>2?Ue[2]:i;for(bt=Z.length>3&&typeof bt=="function"?(zt--,bt):i,Nt&&wu(Ue[0],Ue[1],Nt)&&(bt=zt<3?i:bt,zt=1),ye=Object(ye);++ut<zt;){var nn=Ue[ut];nn&&Z(ye,nn,ut,bt)}return ye})}function vc(Z,ye){return function(Ue,ut){if(Ue==null)return Ue;if(!gi(Ue))return Z(Ue,ut);for(var zt=Ue.length,bt=-1,Nt=Object(Ue);++bt<zt&&ut(Nt[bt],bt,Nt)!==!1;);return Ue}}function _s(Z){return function(ye,Ue,ut){for(var zt=-1,bt=Object(ye),Nt=ut(ye),nn=Nt.length;nn--;){var yn=Nt[++zt];if(Ue(bt[yn],yn,bt)===!1)break}return ye}}function vu(Z,ye,Ue,ut,zt,bt){var Nt=zt&E,nn=Z.length,yn=ye.length;if(nn!=yn&&!(Nt&&yn>nn))return!1;var $n=bt.get(Z);if($n&&bt.get(ye))return $n==ye;var Ln=-1,qn=!0,mr=zt&u?new $i:i;for(bt.set(Z,ye),bt.set(ye,Z);++Ln<nn;){var $r=Z[Ln],kr=ye[Ln];if(ut)var Hi=Nt?ut(kr,$r,Ln,ye,Z,bt):ut($r,kr,Ln,Z,ye,bt);if(Hi!==i){if(Hi)continue;qn=!1;break}if(mr){if(!k(ye,function(Zi,Wi){if(!mr.has(Wi)&&($r===Zi||Ue($r,Zi,ut,zt,bt)))return mr.add(Wi)})){qn=!1;break}}else if(!($r===kr||Ue($r,kr,ut,zt,bt))){qn=!1;break}}return bt.delete(Z),bt.delete(ye),qn}function id(Z,ye,Ue,ut,zt,bt,Nt){switch(Ue){case ve:if(Z.byteLength!=ye.byteLength||Z.byteOffset!=ye.byteOffset)return!1;Z=Z.buffer,ye=ye.buffer;case W:return!(Z.byteLength!=ye.byteLength||!ut(new je(Z),new je(ye)));case R:case N:case G:return co(+Z,+ye);case O:return Z.name==ye.name&&Z.message==ye.message;case H:case j:return Z==ye+"";case X:var nn=St;case T:var yn=bt&E;if(nn||(nn=mn),Z.size!=ye.size&&!yn)return!1;var $n=Nt.get(Z);if($n)return $n==ye;bt|=u,Nt.set(Z,ye);var Ln=vu(nn(Z),nn(ye),ut,zt,bt,Nt);return Nt.delete(Z),Ln;case D:if(zn)return zn.call(Z)==zn.call(ye)}return!1}function _c(Z,ye,Ue,ut,zt,bt){var Nt=zt&E,nn=po(Z),yn=nn.length,$n=po(ye),Ln=$n.length;if(yn!=Ln&&!Nt)return!1;for(var qn=yn;qn--;){var mr=nn[qn];if(!(Nt?mr in ye:ke.call(ye,mr)))return!1}var $r=bt.get(Z);if($r&&bt.get(ye))return $r==ye;var kr=!0;bt.set(Z,ye),bt.set(ye,Z);for(var Hi=Nt;++qn<yn;){mr=nn[qn];var Zi=Z[mr],Wi=ye[mr];if(ut)var Ys=Nt?ut(Wi,Zi,mr,ye,Z,bt):ut(Zi,Wi,mr,Z,ye,bt);if(!(Ys===i?Zi===Wi||Ue(Zi,Wi,ut,zt,bt):Ys)){kr=!1;break}Hi||(Hi=mr=="constructor")}if(kr&&!Hi){var br=Z.constructor,mo=ye.constructor;br!=mo&&"constructor"in Z&&"constructor"in ye&&!(typeof br=="function"&&br instanceof br&&typeof mo=="function"&&mo instanceof mo)&&(kr=!1)}return bt.delete(Z),bt.delete(ye),kr}function Ea(Z){return il(Z,po,_u)}function od(){var Z=Sn.iteratee||gl;return Z=Z===gl?mu:Z,arguments.length?Z(arguments[0],arguments[1]):Z}function xs(Z,ye){var Ue=Z.__data__;return bu(ye)?Ue[typeof ye=="string"?"string":"hash"]:Ue.map}function sd(Z){for(var ye=po(Z),Ue=ye.length;Ue--;){var ut=ye[Ue],zt=Z[ut];ye[Ue]=[ut,zt,Qo(zt)]}return ye}function Hs(Z,ye){var Ue=rt(Z,ye);return Jh(Ue)?Ue:i}var _u=st?Pt(st,Object):Tu,Vi=hc;(En&&Vi(new En(new ArrayBuffer(1)))!=ve||un&&Vi(new un)!=X||Tn&&Vi(Tn.resolve())!=q||wn&&Vi(new wn)!=T||sr&&Vi(new sr)!=te)&&(Vi=function(Z){var ye=ie.call(Z),Ue=ye==ae?Z.constructor:i,ut=Ue?gn(Ue):i;if(ut)switch(ut){case Un:return ve;case Yn:return X;case Mr:return q;case jr:return T;case Wr:return te}return ye});function xc(Z,ye,Ue){ye=Zs(ye,Z)?[ye]:Ao(ye);for(var ut,zt=-1,Nt=ye.length;++zt<Nt;){var bt=fl(ye[zt]);if(!(ut=Z!=null&&Ue(Z,bt)))break;Z=Z[bt]}if(ut)return ut;var Nt=Z?Z.length:0;return!!Nt&&qs(Nt)&&Gi(bt,Nt)&&(Lr(Z)||ho(Z))}function xu(Z){var ye=Z.length,Ue=Z.constructor(ye);return ye&&typeof Z[0]=="string"&&ke.call(Z,"index")&&(Ue.index=Z.index,Ue.input=Z.input),Ue}function wc(Z){return typeof Z.constructor=="function"&&!Ws(Z)?wa(Ke(Z)):{}}function cl(Z,ye,Ue,ut){var zt=Z.constructor;switch(ye){case W:return Vs(Z);case R:case N:return new zt(+Z);case ve:return td(Z,ut);case _e:case pe:case oe:case ce:case ee:case re:case fe:case Se:case Ie:return mc(Z,ut);case X:return Gs(Z,ut,Ue);case G:case j:return new zt(Z);case H:return nd(Z);case T:return pc(Z,ut,Ue);case D:return rd(Z)}}function Gi(Z,ye){return ye=ye??M,!!ye&&(typeof Z=="number"||Mt.test(Z))&&Z>-1&&Z%1==0&&Z<ye}function wu(Z,ye,Ue){if(!Dr(Ue))return!1;var ut=typeof ye;return(ut=="number"?gi(Ue)&&Gi(ye,Ue.length):ut=="string"&&ye in Ue)?co(Ue[ye],Z):!1}function Zs(Z,ye){if(Lr(Z))return!1;var Ue=typeof Z;return Ue=="number"||Ue=="symbol"||Ue=="boolean"||Z==null||Mo(Z)?!0:Ae.test(Z)||!Ne.test(Z)||ye!=null&&Z in Object(ye)}function bu(Z){var ye=typeof Z;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?Z!=="__proto__":Z===null}function hl(Z){return!!Ti&&Ti in Z}function Ws(Z){var ye=Z&&Z.constructor,Ue=typeof ye=="function"&&ye.prototype||Ar;return Z===Ue}function Qo(Z){return Z===Z&&!Dr(Z)}function dl(Z,ye){return function(Ue){return Ue==null?!1:Ue[Z]===ye&&(ye!==i||Z in Object(Ue))}}function ad(Z){var ye=[];if(Z!=null)for(var Ue in Object(Z))ye.push(Ue);return ye}var ar=jn(function(Z){Z=bs(Z);var ye=[];return ze.test(Z)&&ye.push(""),Z.replace(He,function(Ue,ut,zt,bt){ye.push(zt?bt.replace(it,"$1"):ut||Ue)}),ye});function fl(Z){if(typeof Z=="string"||Mo(Z))return Z;var ye=Z+"";return ye=="0"&&1/Z==-I?"-0":ye}function gn(Z){if(Z!=null){try{return Ur.call(Z)}catch{}try{return Z+""}catch{}}return""}function pl(Z){for(var ye=-1,Ue=Z?Z.length:0,ut=0,zt=[];++ye<Ue;){var bt=Z[ye];bt&&(zt[ut++]=bt)}return zt}function Gn(Z,ye){var Ue=Lr(Z)?tt:ei;return Ue(Z,od(ye,3))}function jn(Z,ye){if(typeof Z!="function"||ye&&typeof ye!="function")throw new TypeError(g);var Ue=function(){var ut=arguments,zt=ye?ye.apply(this,ut):ut[0],bt=Ue.cache;if(bt.has(zt))return bt.get(zt);var Nt=Z.apply(this,ut);return Ue.cache=bt.set(zt,Nt),Nt};return Ue.cache=new(jn.Cache||wr),Ue}jn.Cache=wr;function ws(Z){return Ci(Z,!1,!0)}function co(Z,ye){return Z===ye||Z!==Z&&ye!==ye}function ho(Z){return es(Z)&&ke.call(Z,"callee")&&(!at.call(Z,"callee")||ie.call(Z)==b)}var Lr=Array.isArray;function gi(Z){return Z!=null&&qs(Z.length)&&!Xs(Z)}function es(Z){return fo(Z)&&gi(Z)}var ni=Et||Ia;function Su(Z){if(gi(Z)&&(Lr(Z)||typeof Z=="string"||typeof Z.splice=="function"||ni(Z)||ho(Z)))return!Z.length;var ye=Vi(Z);if(ye==X||ye==T)return!Z.size;if(_n||Ws(Z))return!qt(Z).length;for(var Ue in Z)if(ke.call(Z,Ue))return!1;return!0}function Xs(Z){var ye=Dr(Z)?ie.call(Z):"";return ye==he||ye==K}function qs(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=M}function Dr(Z){var ye=typeof Z;return!!Z&&(ye=="object"||ye=="function")}function fo(Z){return!!Z&&typeof Z=="object"}function Ks(Z){if(!fo(Z)||ie.call(Z)!=ae||Ge(Z))return!1;var ye=Ke(Z);if(ye===null)return!0;var Ue=ke.call(ye,"constructor")&&ye.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&Ur.call(Ue)==se}function Mo(Z){return typeof Z=="symbol"||fo(Z)&&ie.call(Z)==D}var ts=B?Ve(B):Qh;function Ta(Z){return ul(Z,Mn(Z))}function bs(Z){return Z==null?"":vs(Z)}function Ss(Z,ye,Ue){var ut=Z==null?i:ba(Z,ye);return ut===i?Ue:ut}function Eu(Z,ye){return Z!=null&&xc(Z,ye,$s)}function po(Z){return gi(Z)?ys(Z):Sa(Z)}function Mn(Z){return gi(Z)?ys(Z,!0):ol(Z)}var ml=yc(function(Z,ye,Ue){al(Z,ye,Ue)});function bc(Z){return Z}function gl(Z){return mu(typeof Z=="function"?Z:Ci(Z,!0))}function Es(Z){return Zs(Z)?U(fl(Z)):ed(Z)}function Tu(){return[]}function Ia(){return!1}Sn.compact=pl,Sn.iteratee=gl,Sn.keys=po,Sn.keysIn=Mn,Sn.memoize=jn,Sn.merge=ml,Sn.property=Es,Sn.toPlainObject=Ta,Sn.clone=ws,Sn.eq=co,Sn.forEach=Gn,Sn.get=Ss,Sn.hasIn=Eu,Sn.identity=bc,Sn.isArguments=ho,Sn.isArray=Lr,Sn.isArrayLike=gi,Sn.isArrayLikeObject=es,Sn.isBuffer=ni,Sn.isEmpty=Su,Sn.isFunction=Xs,Sn.isLength=qs,Sn.isObject=Dr,Sn.isObjectLike=fo,Sn.isPlainObject=Ks,Sn.isSymbol=Mo,Sn.isTypedArray=ts,Sn.stubArray=Tu,Sn.stubFalse=Ia,Sn.toString=bs,Sn.each=Gn,Sn.VERSION=l,vn&&((vn.exports=Sn)._=Sn,et._=Sn)}).call(Ul)})(Ug,Ug.exports);var _5=Ug.exports,x5=Um;function Um(e,t){var i=e&&e.type,l;if(i==="FeatureCollection")for(l=0;l<e.features.length;l++)Um(e.features[l],t);else if(i==="GeometryCollection")for(l=0;l<e.geometries.length;l++)Um(e.geometries[l],t);else if(i==="Feature")Um(e.geometry,t);else if(i==="Polygon")wE(e.coordinates,t);else if(i==="MultiPolygon")for(l=0;l<e.coordinates.length;l++)wE(e.coordinates[l],t);return e}function wE(e,t){if(e.length!==0){bE(e[0],t);for(var i=1;i<e.length;i++)bE(e[i],!t)}}function bE(e,t){for(var i=0,l=0,c=0,g=e.length,p=g-1;c<g;p=c++){var u=(e[c][0]-e[p][0])*(e[p][1]+e[c][1]),E=i+u;l+=Math.abs(i)>=Math.abs(u)?i-E+u:u-E+i,i=E}i+l>=0!=!!t&&e.reverse()}const w5=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var b5=w5,Cn=_5,wm=x5,$m={};b5.forEach(function(e){if(e.polygon==="all")$m[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(l){i[l]=!0}),$m[e.key]={},$m[e.key][t]=i}});function S5(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Cn.merge(e,t)}var $g={};$g=function(e,t,i){t=Cn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:$m,deduplicator:S5},t);var l;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?l=g(e):l=c(e),l;function c(E){var I=new Array,M=new Array,b=new Array;function C(q){var H=Cn.clone(q);H.lat=q.center.lat,H.lon=q.center.lon,H.__is_center_placeholder=!0,I.push(H)}function R(q){var H=Cn.clone(q);H.nodes=[];function T(j,D,te){var W={type:"node",id:"_"+H.type+"/"+H.id+"bounds"+te,lat:j,lon:D};H.nodes.push(W.id),I.push(W)}T(H.bounds.minlat,H.bounds.minlon,1),T(H.bounds.maxlat,H.bounds.minlon,2),T(H.bounds.maxlat,H.bounds.maxlon,3),T(H.bounds.minlat,H.bounds.maxlon,4),H.nodes.push(H.nodes[0]),H.__is_bounds_placeholder=!0,M.push(H)}function N(q){function H(T,j,D){var te={type:"node",id:D,lat:T,lon:j};I.push(te)}Cn.isArray(q.nodes)||(q.nodes=q.geometry.map(function(T){return T!==null?"_anonymous@"+T.lat+"/"+T.lon:"_anonymous@unknown_location"})),q.geometry.forEach(function(T,j){T&&H(T.lat,T.lon,q.nodes[j])})}function O(q){function H(j,D,te){var W={type:"node",id:te,lat:j,lon:D};I.push(W)}function T(j,D){if(M.some(function(ve){return ve.type=="way"&&ve.id==D}))return;var te={type:"way",id:D,nodes:[]};function W(ve,_e){var pe={type:"node",id:"_anonymous@"+ve+"/"+_e,lat:ve,lon:_e};te.nodes.push(pe.id),I.push(pe)}j.forEach(function(ve){ve?W(ve.lat,ve.lon):te.nodes.push(void 0)}),M.push(te)}q.members.forEach(function(j,D){j.type=="node"?j.lat&&H(j.lat,j.lon,j.ref):j.type=="way"&&j.geometry&&(j.ref="_fullGeom"+j.ref,T(j.geometry,j.ref))})}for(var he=0;he<E.elements.length;he++)switch(E.elements[he].type){case"node":var K=E.elements[he];I.push(K);break;case"way":var X=Cn.clone(E.elements[he]);X.nodes=Cn.clone(X.nodes),M.push(X),X.center&&C(X),X.geometry?N(X):X.bounds&&R(X);break;case"relation":var G=Cn.clone(E.elements[he]);G.members=Cn.clone(G.members),b.push(G);var ae=G.members&&G.members.some(function(q){return q.type=="node"&&q.lat||q.type=="way"&&q.geometry&&q.geometry.length>0});G.center&&C(G),ae?O(G):G.bounds&&R(G);break}return p(I,M,b)}function g(E){var I=new Array,M=new Array,b=new Array;function C(G,ae,q){G.hasAttribute(q)&&(ae[q]=G.getAttribute(q))}function R(G,ae){var q=Cn.clone(G);C(ae,q,"lat"),C(ae,q,"lon"),q.__is_center_placeholder=!0,I.push(q)}function N(G,ae){var q=Cn.clone(G);q.nodes=[];function H(T,j,D){var te={type:"node",id:"_"+q.type+"/"+q.id+"bounds"+D,lat:T,lon:j};q.nodes.push(te.id),I.push(te)}H(ae.getAttribute("minlat"),ae.getAttribute("minlon"),1),H(ae.getAttribute("maxlat"),ae.getAttribute("minlon"),2),H(ae.getAttribute("maxlat"),ae.getAttribute("maxlon"),3),H(ae.getAttribute("minlat"),ae.getAttribute("maxlon"),4),q.nodes.push(q.nodes[0]),q.__is_bounds_placeholder=!0,M.push(q)}function O(G,ae){function q(H,T,j){var D={type:"node",id:j,lat:H,lon:T};return I.push(D),D.id}Cn.isArray(G.nodes)||(G.nodes=[],Cn.each(ae,function(H,T){G.nodes.push("_anonymous@"+H.getAttribute("lat")+"/"+H.getAttribute("lon"))})),Cn.each(ae,function(H,T){H.getAttribute("lat")&&q(H.getAttribute("lat"),H.getAttribute("lon"),G.nodes[T])})}function he(G,ae){function q(T,j,D){var te={type:"node",id:D,lat:T,lon:j};I.push(te)}function H(T,j){if(M.some(function(W){return W.type=="way"&&W.id==j}))return;var D={type:"way",id:j,nodes:[]};function te(W,ve){var _e={type:"node",id:"_anonymous@"+W+"/"+ve,lat:W,lon:ve};D.nodes.push(_e.id),I.push(_e)}Cn.each(T,function(W){W.getAttribute("lat")?te(W.getAttribute("lat"),W.getAttribute("lon")):D.nodes.push(void 0)}),M.push(D)}Cn.each(ae,function(T,j){G.members[j].type=="node"?T.getAttribute("lat")&&q(T.getAttribute("lat"),T.getAttribute("lon"),G.members[j].ref):G.members[j].type=="way"&&T.getElementsByTagName("nd").length>0&&(G.members[j].ref="_fullGeom"+G.members[j].ref,H(T.getElementsByTagName("nd"),G.members[j].ref))})}Cn.each(E.getElementsByTagName("node"),function(G,ae){var q={};Cn.each(G.getElementsByTagName("tag"),function(T){q[T.getAttribute("k")]=T.getAttribute("v")});var H={type:"node"};C(G,H,"id"),C(G,H,"lat"),C(G,H,"lon"),C(G,H,"version"),C(G,H,"timestamp"),C(G,H,"changeset"),C(G,H,"uid"),C(G,H,"user"),Cn.isEmpty(q)||(H.tags=q),I.push(H)});var K,X;return Cn.each(E.getElementsByTagName("way"),function(G,ae){var q={},H=[];Cn.each(G.getElementsByTagName("tag"),function(D){q[D.getAttribute("k")]=D.getAttribute("v")});var T=!1;Cn.each(G.getElementsByTagName("nd"),function(D,te){var W;(W=D.getAttribute("ref"))&&(H[te]=W),!T&&D.getAttribute("lat")&&(T=!0)});var j={type:"way"};C(G,j,"id"),C(G,j,"version"),C(G,j,"timestamp"),C(G,j,"changeset"),C(G,j,"uid"),C(G,j,"user"),H.length>0&&(j.nodes=H),Cn.isEmpty(q)||(j.tags=q),(K=G.getElementsByTagName("center")[0])&&R(j,K),T?O(j,G.getElementsByTagName("nd")):(X=G.getElementsByTagName("bounds")[0])&&N(j,X),M.push(j)}),Cn.each(E.getElementsByTagName("relation"),function(G,ae){var q={},H=[];Cn.each(G.getElementsByTagName("tag"),function(D){q[D.getAttribute("k")]=D.getAttribute("v")});var T=!1;Cn.each(G.getElementsByTagName("member"),function(D,te){H[te]={},C(D,H[te],"ref"),C(D,H[te],"role"),C(D,H[te],"type"),(!T&&H[te].type=="node"&&D.getAttribute("lat")||H[te].type=="way"&&D.getElementsByTagName("nd").length>0)&&(T=!0)});var j={type:"relation"};C(G,j,"id"),C(G,j,"version"),C(G,j,"timestamp"),C(G,j,"changeset"),C(G,j,"uid"),C(G,j,"user"),H.length>0&&(j.members=H),Cn.isEmpty(q)||(j.tags=q),(K=G.getElementsByTagName("center")[0])&&R(j,K),T?he(j,G.getElementsByTagName("member")):(X=G.getElementsByTagName("bounds")[0])&&N(j,X),b.push(j)}),p(I,M,b)}function p(E,I,M){function b(ze,He){if(typeof He!="object"&&(He={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(ze,He);for(var Ze in ze)if(t.uninterestingTags[Ze]!==!0&&!(He[Ze]===!0||He[Ze]===ze[Ze]))return!0;return!1}function C(ze){var He={timestamp:ze.timestamp,version:ze.version,changeset:ze.changeset,user:ze.user,uid:ze.uid};for(var Ze in He)He[Ze]===void 0&&delete He[Ze];return He}for(var R=new Object,N=new Object,O=0;O<E.length;O++){var he=E[O];R[he.id]!==void 0&&(he=t.deduplicator(he,R[he.id])),R[he.id]=he,typeof he.tags<"u"&&b(he.tags)&&(N[he.id]=!0)}for(var O=0;O<M.length;O++)if(Cn.isArray(M[O].members))for(var K=0;K<M[O].members.length;K++)M[O].members[K].type=="node"&&(N[M[O].members[K].ref]=!0);for(var X=new Object,G=new Object,O=0;O<I.length;O++){var ae=I[O];if(X[ae.id]&&(ae=t.deduplicator(ae,X[ae.id])),X[ae.id]=ae,Cn.isArray(ae.nodes))for(var K=0;K<ae.nodes.length;K++)typeof ae.nodes[K]!="object"&&(G[ae.nodes[K]]=!0,ae.nodes[K]=R[ae.nodes[K]])}var q=new Array;for(var H in R){var he=R[H];(!G[H]||N[H])&&q.push(he)}for(var T=new Array,O=0;O<M.length;O++){var j=M[O];T[j.id]&&(j=t.deduplicator(j,T[j.id])),T[j.id]=j}var D={node:{},way:{},relation:{}};for(var H in T){var j=T[H];if(!Cn.isArray(j.members)){t.verbose&&console.warn("Relation",j.type+"/"+j.id,"ignored because it has no members");continue}for(var K=0;K<j.members.length;K++){var te=j.members[K].type,W=j.members[K].ref;if(typeof W!="number"&&(W=W.replace("_fullGeom","")),!D[te]){t.verbose&&console.warn("Relation",j.type+"/"+j.id,"member",te+"/"+W,"ignored because it has an invalid type");continue}typeof D[te][W]>"u"&&(D[te][W]=[]),D[te][W].push({role:j.members[K].role,rel:j.id,reltags:j.tags})}}var ve,_e=[];for(O=0;O<q.length;O++){if(typeof q[O].lon>"u"||typeof q[O].lat>"u"){t.verbose&&console.warn("POI",q[O].type+"/"+q[O].id,"ignored because it lacks coordinates");continue}var pe={type:"Feature",id:q[O].type+"/"+q[O].id,properties:{type:q[O].type,id:q[O].id,tags:q[O].tags||{},relations:D.node[q[O].id]||[],meta:C(q[O])},geometry:{type:"Point",coordinates:[+q[O].lon,+q[O].lat]}};q[O].__is_center_placeholder&&(pe.properties.geometry="center"),i?i(pe):_e.push(pe)}for(var oe=[],ce=[],O=0;O<M.length;O++)if(T[M[O].id]===M[O]){if(typeof M[O].tags<"u"&&(M[O].tags.type=="route"||M[O].tags.type=="waterway")){let He=function(Ze){var it=!1,ct;ct=Ze.members.filter(function(xt){return xt.type==="way"}),ct=ct.map(function(xt){var Gt=X[xt.ref];if(Gt===void 0||Gt.nodes===void 0){t.verbose&&console.warn("Route "+Ze.type+"/"+Ze.id,"tainted by a missing or incomplete  way",xt.type+"/"+xt.ref),it=!0;return}return{id:xt.ref,role:xt.role,way:Gt,nodes:Gt.nodes.filter(function(Ht){return Ht!==void 0?!0:(it=!0,t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"tainted by a way",xt.type+"/"+xt.ref,"with a missing node"),!1)})}}),ct=Cn.compact(ct);var vt;vt=gv(ct);var Mt=[];if(Mt=Cn.compact(vt.map(function(xt){return Cn.compact(xt.map(function(Gt){return[+Gt.lon,+Gt.lat]}))})),Mt.length==0)return t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"contains no coordinates"),!1;var pt={type:"Feature",id:Ze.type+"/"+Ze.id,properties:{type:Ze.type,id:Ze.id,tags:Ze.tags||{},relations:D[Ze.type][Ze.id]||[],meta:C(Ze)},geometry:{type:Mt.length===1?"LineString":"MultiLineString",coordinates:Mt.length===1?Mt[0]:Mt}};return it&&(t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"is tainted"),pt.properties.tainted=!0),pt};var Ne=He;if(!Cn.isArray(M[O].members)){t.verbose&&console.warn("Route",M[O].type+"/"+M[O].id,"ignored because it has no members");continue}if(M[O].members.forEach(function(Ze){X[Ze.ref]&&!b(X[Ze.ref].tags)&&(X[Ze.ref].is_skippablerelationmember=!0)}),pe=He(M[O]),pe===!1){t.verbose&&console.warn("Route relation",M[O].type+"/"+M[O].id,"ignored because it has invalid geometry");continue}i?i(wm(pe)):ce.push(pe)}if(typeof M[O].tags<"u"&&(M[O].tags.type=="multipolygon"||M[O].tags.type=="boundary")){let Ze=function(it,ct){var vt=!1,Mt=re?"way":"relation",pt=typeof it.id=="number"?it.id:+it.id.replace("_fullGeom",""),xt;xt=ct.members.filter(function(L){return L.type==="way"}),xt=xt.map(function(L){var ge=X[L.ref];if(ge===void 0||ge.nodes===void 0){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"tainted by a missing or incomplete way",L.type+"/"+L.ref),vt=!0;return}return{id:L.ref,role:L.role||"outer",way:ge,nodes:ge.nodes.filter(function(Xe){return Xe!==void 0?!0:(vt=!0,t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"tainted by a way",L.type+"/"+L.ref,"with a missing node"),!1)})}}),xt=Cn.compact(xt);var Gt,Ht;Gt=gv(xt.filter(function(L){return L.role==="outer"})),Ht=gv(xt.filter(function(L){return L.role==="inner"}));var an;function et(L){var ge=function(k,U){for(var Te=0;Te<U.length;Te++)if(tt(U[Te],k))return!0;return!1},Xe=function(k){return k.map(function(U){return[+U.lat,+U.lon]})},tt=function(k,U){for(var Te=k[0],Ve=k[1],rt=!1,Ge=0,St=U.length-1;Ge<U.length;St=Ge++){var Pt=U[Ge][0],mn=U[Ge][1],bn=U[St][0],Ot=U[St][1],Ar=mn>Ve!=Ot>Ve&&Te<(bn-Pt)*(Ve-mn)/(Ot-mn)+Pt;Ar&&(rt=!rt)}return rt},ht,ue;for(L=Xe(L),ht=0;ht<Gt.length;ht++)if(ue=Xe(Gt[ht]),ge(ue,L))return ht}an=Gt.map(function(L){return[L]});for(var vn=0;vn<Ht.length;vn++){var ln=et(Ht[vn]);ln!==void 0?an[ln].push(Ht[vn]):t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains an inner ring with no containing outer")}var Vt=[];if(Vt=Cn.compact(an.map(function(L){var ge=Cn.compact(L.map(function(Xe){if(Xe.length<4){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains a ring with less than four nodes");return}return Cn.compact(Xe.map(function(tt){return[+tt.lon,+tt.lat]}))}));if(ge.length==0){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains an empty ring cluster");return}return ge})),Vt.length==0)return t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains no coordinates"),!1;var Ee="MultiPolygon";Vt.length===1&&(Ee="Polygon",Vt=Vt[0]);var B={type:"Feature",id:it.type+"/"+pt,properties:{type:it.type,id:pt,tags:it.tags||{},relations:D[it.type][it.id]||[],meta:C(it)},geometry:{type:Ee,coordinates:Vt}};return vt&&(t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"is tainted"),B.properties.tainted=!0),B};var Ae=Ze;if(!Cn.isArray(M[O].members)){t.verbose&&console.warn("Multipolygon",M[O].type+"/"+M[O].id,"ignored because it has no members");continue}for(var ee=0,K=0;K<M[O].members.length;K++)M[O].members[K].role=="outer"?ee++:t.verbose&&M[O].members[K].role!="inner"&&console.warn("Multipolygon",M[O].type+"/"+M[O].id,"member",M[O].members[K].type+"/"+M[O].members[K].ref,'ignored because it has an invalid role: "'+M[O].members[K].role+'"');if(M[O].members.forEach(function(it){X[it.ref]&&(it.role==="outer"&&!b(X[it.ref].tags,M[O].tags)&&(X[it.ref].is_skippablerelationmember=!0),it.role==="inner"&&!b(X[it.ref].tags)&&(X[it.ref].is_skippablerelationmember=!0))}),ee==0){t.verbose&&console.warn("Multipolygon relation",M[O].type+"/"+M[O].id,"ignored because it has no outer ways");continue}var re=!1;ee==1&&!b(M[O].tags,{type:!0})&&(re=!0);var pe=null;if(!re)pe=Ze(M[O],M[O]);else{var fe=M[O].members.filter(function(it){return it.role==="outer"})[0];if(fe=X[fe.ref],fe===void 0){t.verbose&&console.warn("Multipolygon relation",M[O].type+"/"+M[O].id,"ignored because outer way",fe.type+"/"+fe.ref,"is missing");continue}fe.is_skippablerelationmember=!0,pe=Ze(fe,M[O])}if(pe===!1){t.verbose&&console.warn("Multipolygon relation",M[O].type+"/"+M[O].id,"ignored because it has invalid geometry");continue}i?i(wm(pe)):ce.push(pe)}}for(var O=0;O<I.length;O++)if(X[I[O].id]===I[O]){if(!Cn.isArray(I[O].nodes)){t.verbose&&console.warn("Way",I[O].type+"/"+I[O].id,"ignored because it has no nodes");continue}if(!I[O].is_skippablerelationmember){typeof I[O].id!="number"&&(I[O].id=+I[O].id.replace("_fullGeom","")),I[O].tainted=!1,I[O].hidden=!1;var Se=new Array;for(K=0;K<I[O].nodes.length;K++)typeof I[O].nodes[K]=="object"?Se.push([+I[O].nodes[K].lon,+I[O].nodes[K].lat]):(t.verbose&&console.warn("Way",I[O].type+"/"+I[O].id,"is tainted by an invalid node"),I[O].tainted=!0);if(Se.length<=1){t.verbose&&console.warn("Way",I[O].type+"/"+I[O].id,"ignored because it contains too few nodes");continue}var Ie="LineString";typeof I[O].nodes[0]<"u"&&typeof I[O].nodes[I[O].nodes.length-1]<"u"&&I[O].nodes[0].id===I[O].nodes[I[O].nodes.length-1].id&&(typeof I[O].tags<"u"&&u(I[O].tags)||I[O].__is_bounds_placeholder)&&(Ie="Polygon",Se=[Se]);var pe={type:"Feature",id:I[O].type+"/"+I[O].id,properties:{type:I[O].type,id:I[O].id,tags:I[O].tags||{},relations:D.way[I[O].id]||[],meta:C(I[O])},geometry:{type:Ie,coordinates:Se}};I[O].tainted&&(t.verbose&&console.warn("Way",I[O].type+"/"+I[O].id,"is tainted"),pe.properties.tainted=!0),I[O].__is_bounds_placeholder&&(pe.properties.geometry="bounds"),i?i(wm(pe)):Ie=="LineString"?oe.push(pe):ce.push(pe)}}return i?!0:(ve={type:"FeatureCollection",features:[]},ve.features=ve.features.concat(ce),ve.features=ve.features.concat(oe),ve.features=ve.features.concat(_e),t.flatProperties&&ve.features.forEach(function(ze){ze.properties=Cn.merge(ze.properties.meta,ze.properties.tags,{id:ze.properties.type+"/"+ze.properties.id})}),ve=wm(ve),ve)}function u(E){var I=t.polygonFeatures;if(typeof I=="function")return I(E);if(E.area==="no")return!1;for(var M in E){var b=E[M],C=I[M];if(!(typeof C>"u")&&b!=="no"&&(C===!0||C.included_values&&C.included_values[b]===!0||C.excluded_values&&C.excluded_values[b]!==!0))return!0}return!1}};function gv(e){for(var t=function(b){return b[0]},i=function(b){return b[b.length-1]},l=function(b,C){return b!==void 0&&C!==void 0&&b.id===C.id},c=[],g,p,u,E,I,M;e.length;)for(g=e.pop().nodes.slice(),c.push(g);e.length&&!l(t(g),i(g));){for(p=t(g),u=i(g),E=0;E<e.length;E++)if(M=e[E].nodes,l(u,t(M))){I=g.push,M=M.slice(1);break}else if(l(u,i(M))){I=g.push,M=M.slice(0,-1).reverse();break}else if(l(p,i(M))){I=g.unshift,M=M.slice(0,-1);break}else if(l(p,t(M))){I=g.unshift,M=M.slice(1).reverse();break}else M=I=null;if(!M)break;e.splice(E,1),I.apply(g,M)}return c}$g.toGeojson=$g;var E5=$g;const T5=ep(E5),yv={type:"FeatureCollection",features:[]},VP=()=>{const[e,t]=gt.useState(!1),i=gt.useCallback(async(p,u,E)=>{var O,he;if(e||(console.log(E),E<16))return yv;t(!0);let I=300;E>17&&(I=200),E>18&&(I=100),E>19&&(I=50),console.log("overpass: loading...");let M="[out:json]";M+=`[timeout:25];
`,M+='nwr["building"]',M+=`(around:${I},${p},${u});
`,M+="out meta geom;",console.log(M);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(M)}`,{});if(b.status!==200)return t(!1),yv;const C=await b.json();console.log("overpass json elements: ",C.elements);const R=T5(C);console.log("overpass osmtogeojson raw: ",R);for await(const K of R.features){if(!K.properties)continue;K.id=K.properties.id.split("/")[1];const X=(O=C.elements.filter(ae=>K.id?typeof K.id=="number"?ae.id===K.id:ae.id===parseInt(K.id):!1))==null?void 0:O[0];if(X&&(K.properties.tags=X.tags,K.properties.nodes=X.nodes),K.geometry.type==="Polygon"){const ae=u5(K.geometry.coordinates);var N=m5(ae);K.properties.center=N.geometry.coordinates}K.geometry.type==="Point"&&(K.properties.center=K.geometry.coordinates);const G=K.properties.uid;if(G){let ae=localStorage.getItem(G+"-icon");if(ae===null){const q=await Os.getUser(G);(he=q.img)!=null&&he.href?(ae=q.img.href,localStorage.setItem(G+"-icon",q.img.href)):localStorage.setItem(G+"-icon","")}K.properties.userIconHref=ae||""}}return console.log("overpass osmtogeojson converted: ",R),console.log("overpass: loaded."),t(!1),R},[]),[l,c]=gt.useState(!1),g=gt.useCallback(async p=>{console.log("overpass: loading...",p),c(!0);const u=`
      [out:json]
      [timeout:25];
      node(id:${p.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(u);const E=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(u)}`,{});if(E.status!==200){c(!1);return}const I=await E.json();console.log("overpass json parent elements: ",I.elements);const M=250,b=`
      [out:json]
      [timeout:25];
      node(id:${p.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${M});
      out;
      `;console.log(b);const C=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(b)}`,{});if(C.status!==200){c(!1);return}const R=await C.json();console.log("overpass json child elements: ",R.elements);const N=`
      [out:json]
      [timeout:25];
      node(id:${p.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${M});
      out;
      `;console.log(N);const O=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(N)}`,{});if(O.status!==200){c(!1);return}const he=await O.json();return console.log("overpass json neighbour elements: ",he.elements),c(!1),[...I.elements,...R.elements,...he.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:g,loadingOverpass:e,loadingOverpassAdmin:l}},I5=()=>mt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[mt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),mt.jsxs("datalist",{id:"source-list",children:[mt.jsx("option",{value:"survey"}),mt.jsx("option",{value:"local knowledge"}),mt.jsx("option",{value:"extrapolation"}),mt.jsx("option",{value:"estimation from existing data"})]})]}),vv={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},C5=({feature:e,onCancel:t,onSubmit:i})=>{var ve,_e,pe,oe;const{detectCountry:l,loadingCountry:c}=g5(),{fetchOverpassAdmin:g,loadingOverpassAdmin:p}=VP(),u=JSON.parse((ve=e.properties)==null?void 0:ve.center),[E,I]=gt.useState(void 0),[M,b]=gt.useState(),[C,R]=gt.useState(e),[N,O]=gt.useState(!1),[he,K]=gt.useState(!1),[X,G]=gt.useState(!1),[ae,q]=gt.useState(),[H,T]=gt.useState();gt.useEffect(()=>{O(Os.isLoggedIn())},[]),gt.useEffect(()=>{(async()=>{var ee,re;const ce=await l(u[0],u[1]);if(I(ce),(ee=ce==null?void 0:ce.properties)!=null&&ee.ISO_A3&&_E[ce.properties.ISO_A3]){const fe=_E[ce.properties.ISO_A3];b(fe);const Se=fe.defaultComment+" "+((re=e.properties)==null?void 0:re.id);T(Se)}})()},[e]),gt.useEffect(()=>{console.log(C.properties)},[C]);const j=gt.useCallback(async()=>{const ce=await PC.openReverseGeocoder([u[0],u[1]]);R(ee=>{const re={properties:{"addr:province":ce.prefecture,"addr:city":ce.city,...ee.properties}};return ee.properties=re.properties,ee})},[]),D=gt.useCallback(async()=>{if(!C.properties)return;C.properties.nodes;const ce=await g(JSON.parse(C.properties.nodes));console.log("onOverpassReverseGeocode",ce),q(ce)},[C]),te=gt.useCallback(async ce=>{var Ae,ze,He;G(!0),ce.preventDefault();const ee=new FormData(ce.currentTarget),re=JSON.parse((Ae=e.properties)==null?void 0:Ae.tags);ee.forEach((Ze,it)=>{typeof Ze=="string"&&Ze.length>0&&it!=="comment"&&it!=="source"&&(re[it]=Ze)});const fe={type:"way",id:e.id,version:(ze=e.properties)==null?void 0:ze.version,tags:re,nodes:JSON.parse((He=e.properties)==null?void 0:He.nodes)};console.info(JSON.stringify(fe,null,2));const Se={create:[],modify:[fe],delete:[]},Ie=ee.get("comment");Ie&&(vv.comment=Ie.toString());const Ne=ee.get("source");Ne&&(vv.source=Ne.toString()),await Os.uploadChangeset(vv,Se),G(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),W=gt.useCallback(()=>{K(!0)},[]);return C.properties?mt.jsxs("div",{children:[mt.jsxs("div",{children:["OSM:"," ",mt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+C.properties.id,target:"_blank",children:C.properties.id})," | ",mt.jsx(TC,{feature:C}),M&&mt.jsxs("span",{children:[" | ","Address:"," ",mt.jsx(y5,{feature:C,fields:M})]})]}),c?mt.jsx(tu,{icon:A_,spin:!0}):mt.jsx(mt.Fragment,{children:M?mt.jsxs("form",{onSubmit:te,children:[mt.jsx("div",{className:"flex flex-wrap",children:mt.jsx(mv,{feature:C,fieldOption:M.postcodeField,onChange:W})}),mt.jsx("div",{className:"flex flex-wrap",children:M.mainFields.map(ce=>mt.jsx(mv,{feature:C,fieldOption:ce,onChange:W,suggestList:ae},ce.key))}),mt.jsx("div",{className:"flex flex-wrap",children:M.detailFields.map(ce=>mt.jsx(mv,{feature:C,fieldOption:ce,onChange:W},ce.key))}),mt.jsxs("div",{className:"flex flex-wrap",children:[mt.jsx(I5,{}),mt.jsx(v5,{defaultValue:H})]}),mt.jsx("div",{className:"flex flex-wrap",children:mt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[mt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((_e=E==null?void 0:E.properties)==null?void 0:_e.ISO_A3)==="JPN"&&mt.jsx("button",{type:"button",onClick:j,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),mt.jsxs("button",{type:"button",disabled:p,onClick:D,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",p&&mt.jsx(tu,{icon:A_,spin:!0})]}),mt.jsx("button",{disabled:!N||X||!he,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!N&&mt.jsxs(mt.Fragment,{children:[mt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),mt.jsx(EC,{})]})]})})]}):mt.jsx("div",{className:"flex flex-wrap",children:mt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[mt.jsxs("div",{className:"py-2",children:[mt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(pe=E==null?void 0:E.properties)==null?void 0:pe.NAME," (ISO code:",(oe=E==null?void 0:E.properties)==null?void 0:oe.ISO_A3,") does not support yet."]}),mt.jsx("p",{children:mt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),mt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function P5(e,t){const[i,l]=gt.useState(e);return gt.useEffect(()=>{const c=setTimeout(()=>{l(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const A5={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},M5={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function k5(){const e=gt.useRef(null),[t,i]=gt.useState(),l=P5(t,2500),c=gt.useRef(null),[g,p]=gt.useState({type:"FeatureCollection",features:[]}),[u,E]=gt.useState("auto"),[I,M]=gt.useState(),[b,C]=gt.useState([]),{fetchOverpassBuildings:R,loadingOverpass:N}=VP();gt.useEffect(()=>{setTimeout(()=>{var T;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(T=c.current)==null||T.trigger())},500)},[]);const O=gt.useCallback(T=>{const j=T.target.getCenter(),D=T.target.getZoom();i({zoom:D,latitude:j.lat,longitude:j.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),he=gt.useCallback(T=>{i(T.viewState)},[]),K=gt.useCallback(T=>{i(T.viewState)},[]);gt.useEffect(()=>{(async()=>{if(!l)return;const T=l,j=await R(T.latitude,T.longitude,T.zoom);p(j)})()},[l]);const X=gt.useCallback(T=>{var ve;E("pointer");const{features:j,point:{x:D,y:te}}=T,W=j&&j[0];W?((ve=e.current)==null||ve.setFeatureState({source:"buildings-source",id:W.id},{hover:!0}),M({feature:W,x:D,y:te})):M(void 0)},[]),G=gt.useCallback(T=>{var j;E("auto"),(j=e.current)==null||j.querySourceFeatures("buildings-source").map(D=>{var te;(te=e.current)==null||te.setFeatureState({source:"buildings-source",id:D.id},{hover:!1})}),M(void 0)},[]),ae=gt.useCallback(T=>{var D;q();const j=T.features&&T.features[0];j&&((D=e.current)==null||D.setFeatureState({source:"buildings-source",id:j.id},{select:!0}),C([j]))},[]),q=gt.useCallback(()=>{var T;(T=e.current)==null||T.querySourceFeatures("buildings-source").map(j=>{var D;(D=e.current)==null||D.setFeatureState({source:"buildings-source",id:j.id},{select:!1})}),C([])},[]),H=gt.useMemo(()=>{let T=25;return t&&(T=t.zoom<18?20:t.zoom<19?25:35),g.features.map((j,D)=>!j.properties||!j.properties.center?null:mt.jsx(q4,{style:{cursor:"pointer"},longitude:j.properties.center[0],latitude:j.properties.center[1],anchor:"center",children:mt.jsx(PO,{feature:j,size:T})},`marker-${D}`))},[g,t]);return mt.jsxs("div",{children:[mt.jsx(lO,{}),mt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:mt.jsx(kO,{viewState:t})}),mt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[b.length>0&&mt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:mt.jsx("div",{style:{padding:"10px"},children:b.map(T=>mt.jsx(C5,{feature:T,onCancel:q,onSubmit:q},T.id))})}),mt.jsxs(X4,{ref:e,...t,onMove:he,onMoveEnd:K,onLoad:O,interactiveLayerIds:["buildings-layer-fill"],onClick:ae,onMouseEnter:X,onMouseLeave:G,dragRotate:!1,boxZoom:!1,hash:!0,cursor:u,mapLib:BI,style:{width:"100%",height:"100%"},mapStyle:A5,children:[mt.jsx(Q4,{id:"buildings-source",type:"geojson",data:g,children:mt.jsx(J4,{...M5})}),mt.jsx(K4,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),mt.jsx(Y4,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),mt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?mt.jsx(tu,{size:"2x",icon:sO}):N?mt.jsx(tu,{size:"2x",icon:A_,spin:!0}):mt.jsx(tu,{size:"2x",icon:iO})}),H,I&&mt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:I.x+5,top:I.y+5},children:[mt.jsx(TC,{feature:I.feature}),mt.jsx("br",{}),mt.jsx(AO,{feature:I.feature}),mt.jsx(uO,{feature:I.feature})]})]})]})]})}var GP={},yy={};yy.byteLength=O5;yy.toByteArray=j5;yy.fromByteArray=B5;var ca=[],as=[],z5=typeof Uint8Array<"u"?Uint8Array:Array,_v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var rh=0,F5=_v.length;rh<F5;++rh)ca[rh]=_v[rh],as[_v.charCodeAt(rh)]=rh;as[45]=62;as[95]=63;function HP(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var l=i===t?0:4-i%4;return[i,l]}function O5(e){var t=HP(e),i=t[0],l=t[1];return(i+l)*3/4-l}function R5(e,t,i){return(t+i)*3/4-i}function j5(e){var t,i=HP(e),l=i[0],c=i[1],g=new z5(R5(e,l,c)),p=0,u=c>0?l-4:l,E;for(E=0;E<u;E+=4)t=as[e.charCodeAt(E)]<<18|as[e.charCodeAt(E+1)]<<12|as[e.charCodeAt(E+2)]<<6|as[e.charCodeAt(E+3)],g[p++]=t>>16&255,g[p++]=t>>8&255,g[p++]=t&255;return c===2&&(t=as[e.charCodeAt(E)]<<2|as[e.charCodeAt(E+1)]>>4,g[p++]=t&255),c===1&&(t=as[e.charCodeAt(E)]<<10|as[e.charCodeAt(E+1)]<<4|as[e.charCodeAt(E+2)]>>2,g[p++]=t>>8&255,g[p++]=t&255),g}function L5(e){return ca[e>>18&63]+ca[e>>12&63]+ca[e>>6&63]+ca[e&63]}function D5(e,t,i){for(var l,c=[],g=t;g<i;g+=3)l=(e[g]<<16&16711680)+(e[g+1]<<8&65280)+(e[g+2]&255),c.push(L5(l));return c.join("")}function B5(e){for(var t,i=e.length,l=i%3,c=[],g=16383,p=0,u=i-l;p<u;p+=g)c.push(D5(e,p,p+g>u?u:p+g));return l===1?(t=e[i-1],c.push(ca[t>>2]+ca[t<<4&63]+"==")):l===2&&(t=(e[i-2]<<8)+e[i-1],c.push(ca[t>>10]+ca[t>>4&63]+ca[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=yy,i=dy,l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=X,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,u.TYPED_ARRAY_SUPPORT=g(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function g(){try{const ue=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(ue,k),ue.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function p(ue){if(ue>c)throw new RangeError('The value "'+ue+'" is invalid for option "size"');const k=new Uint8Array(ue);return Object.setPrototypeOf(k,u.prototype),k}function u(ue,k,U){if(typeof ue=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(ue)}return E(ue,k,U)}u.poolSize=8192;function E(ue,k,U){if(typeof ue=="string")return C(ue,k);if(ArrayBuffer.isView(ue))return N(ue);if(ue==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue);if(L(ue,ArrayBuffer)||ue&&L(ue.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(L(ue,SharedArrayBuffer)||ue&&L(ue.buffer,SharedArrayBuffer)))return O(ue,k,U);if(typeof ue=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Te=ue.valueOf&&ue.valueOf();if(Te!=null&&Te!==ue)return u.from(Te,k,U);const Ve=he(ue);if(Ve)return Ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ue[Symbol.toPrimitive]=="function")return u.from(ue[Symbol.toPrimitive]("string"),k,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue)}u.from=function(ue,k,U){return E(ue,k,U)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function I(ue){if(typeof ue!="number")throw new TypeError('"size" argument must be of type number');if(ue<0)throw new RangeError('The value "'+ue+'" is invalid for option "size"')}function M(ue,k,U){return I(ue),ue<=0?p(ue):k!==void 0?typeof U=="string"?p(ue).fill(k,U):p(ue).fill(k):p(ue)}u.alloc=function(ue,k,U){return M(ue,k,U)};function b(ue){return I(ue),p(ue<0?0:K(ue)|0)}u.allocUnsafe=function(ue){return b(ue)},u.allocUnsafeSlow=function(ue){return b(ue)};function C(ue,k){if((typeof k!="string"||k==="")&&(k="utf8"),!u.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const U=G(ue,k)|0;let Te=p(U);const Ve=Te.write(ue,k);return Ve!==U&&(Te=Te.slice(0,Ve)),Te}function R(ue){const k=ue.length<0?0:K(ue.length)|0,U=p(k);for(let Te=0;Te<k;Te+=1)U[Te]=ue[Te]&255;return U}function N(ue){if(L(ue,Uint8Array)){const k=new Uint8Array(ue);return O(k.buffer,k.byteOffset,k.byteLength)}return R(ue)}function O(ue,k,U){if(k<0||ue.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(ue.byteLength<k+(U||0))throw new RangeError('"length" is outside of buffer bounds');let Te;return k===void 0&&U===void 0?Te=new Uint8Array(ue):U===void 0?Te=new Uint8Array(ue,k):Te=new Uint8Array(ue,k,U),Object.setPrototypeOf(Te,u.prototype),Te}function he(ue){if(u.isBuffer(ue)){const k=K(ue.length)|0,U=p(k);return U.length===0||ue.copy(U,0,0,k),U}if(ue.length!==void 0)return typeof ue.length!="number"||ge(ue.length)?p(0):R(ue);if(ue.type==="Buffer"&&Array.isArray(ue.data))return R(ue.data)}function K(ue){if(ue>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return ue|0}function X(ue){return+ue!=ue&&(ue=0),u.alloc(+ue)}u.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==u.prototype},u.compare=function(k,U){if(L(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),L(U,Uint8Array)&&(U=u.from(U,U.offset,U.byteLength)),!u.isBuffer(k)||!u.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===U)return 0;let Te=k.length,Ve=U.length;for(let rt=0,Ge=Math.min(Te,Ve);rt<Ge;++rt)if(k[rt]!==U[rt]){Te=k[rt],Ve=U[rt];break}return Te<Ve?-1:Ve<Te?1:0},u.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(k,U){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return u.alloc(0);let Te;if(U===void 0)for(U=0,Te=0;Te<k.length;++Te)U+=k[Te].length;const Ve=u.allocUnsafe(U);let rt=0;for(Te=0;Te<k.length;++Te){let Ge=k[Te];if(L(Ge,Uint8Array))rt+Ge.length>Ve.length?(u.isBuffer(Ge)||(Ge=u.from(Ge)),Ge.copy(Ve,rt)):Uint8Array.prototype.set.call(Ve,Ge,rt);else if(u.isBuffer(Ge))Ge.copy(Ve,rt);else throw new TypeError('"list" argument must be an Array of Buffers');rt+=Ge.length}return Ve};function G(ue,k){if(u.isBuffer(ue))return ue.length;if(ArrayBuffer.isView(ue)||L(ue,ArrayBuffer))return ue.byteLength;if(typeof ue!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ue);const U=ue.length,Te=arguments.length>2&&arguments[2]===!0;if(!Te&&U===0)return 0;let Ve=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return vn(ue).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U*2;case"hex":return U>>>1;case"base64":return Ee(ue).length;default:if(Ve)return Te?-1:vn(ue).length;k=(""+k).toLowerCase(),Ve=!0}}u.byteLength=G;function ae(ue,k,U){let Te=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0,k>>>=0,U<=k))return"";for(ue||(ue="utf8");;)switch(ue){case"hex":return fe(this,k,U);case"utf8":case"utf-8":return pe(this,k,U);case"ascii":return ee(this,k,U);case"latin1":case"binary":return re(this,k,U);case"base64":return _e(this,k,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Se(this,k,U);default:if(Te)throw new TypeError("Unknown encoding: "+ue);ue=(ue+"").toLowerCase(),Te=!0}}u.prototype._isBuffer=!0;function q(ue,k,U){const Te=ue[k];ue[k]=ue[U],ue[U]=Te}u.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let U=0;U<k;U+=2)q(this,U,U+1);return this},u.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let U=0;U<k;U+=4)q(this,U,U+3),q(this,U+1,U+2);return this},u.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let U=0;U<k;U+=8)q(this,U,U+7),q(this,U+1,U+6),q(this,U+2,U+5),q(this,U+3,U+4);return this},u.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?pe(this,0,k):ae.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(k){if(!u.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:u.compare(this,k)===0},u.prototype.inspect=function(){let k="";const U=e.INSPECT_MAX_BYTES;return k=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(k+=" ... "),"<Buffer "+k+">"},l&&(u.prototype[l]=u.prototype.inspect),u.prototype.compare=function(k,U,Te,Ve,rt){if(L(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),!u.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(U===void 0&&(U=0),Te===void 0&&(Te=k?k.length:0),Ve===void 0&&(Ve=0),rt===void 0&&(rt=this.length),U<0||Te>k.length||Ve<0||rt>this.length)throw new RangeError("out of range index");if(Ve>=rt&&U>=Te)return 0;if(Ve>=rt)return-1;if(U>=Te)return 1;if(U>>>=0,Te>>>=0,Ve>>>=0,rt>>>=0,this===k)return 0;let Ge=rt-Ve,St=Te-U;const Pt=Math.min(Ge,St),mn=this.slice(Ve,rt),bn=k.slice(U,Te);for(let Ot=0;Ot<Pt;++Ot)if(mn[Ot]!==bn[Ot]){Ge=mn[Ot],St=bn[Ot];break}return Ge<St?-1:St<Ge?1:0};function H(ue,k,U,Te,Ve){if(ue.length===0)return-1;if(typeof U=="string"?(Te=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),U=+U,ge(U)&&(U=Ve?0:ue.length-1),U<0&&(U=ue.length+U),U>=ue.length){if(Ve)return-1;U=ue.length-1}else if(U<0)if(Ve)U=0;else return-1;if(typeof k=="string"&&(k=u.from(k,Te)),u.isBuffer(k))return k.length===0?-1:T(ue,k,U,Te,Ve);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?Ve?Uint8Array.prototype.indexOf.call(ue,k,U):Uint8Array.prototype.lastIndexOf.call(ue,k,U):T(ue,[k],U,Te,Ve);throw new TypeError("val must be string, number or Buffer")}function T(ue,k,U,Te,Ve){let rt=1,Ge=ue.length,St=k.length;if(Te!==void 0&&(Te=String(Te).toLowerCase(),Te==="ucs2"||Te==="ucs-2"||Te==="utf16le"||Te==="utf-16le")){if(ue.length<2||k.length<2)return-1;rt=2,Ge/=2,St/=2,U/=2}function Pt(bn,Ot){return rt===1?bn[Ot]:bn.readUInt16BE(Ot*rt)}let mn;if(Ve){let bn=-1;for(mn=U;mn<Ge;mn++)if(Pt(ue,mn)===Pt(k,bn===-1?0:mn-bn)){if(bn===-1&&(bn=mn),mn-bn+1===St)return bn*rt}else bn!==-1&&(mn-=mn-bn),bn=-1}else for(U+St>Ge&&(U=Ge-St),mn=U;mn>=0;mn--){let bn=!0;for(let Ot=0;Ot<St;Ot++)if(Pt(ue,mn+Ot)!==Pt(k,Ot)){bn=!1;break}if(bn)return mn}return-1}u.prototype.includes=function(k,U,Te){return this.indexOf(k,U,Te)!==-1},u.prototype.indexOf=function(k,U,Te){return H(this,k,U,Te,!0)},u.prototype.lastIndexOf=function(k,U,Te){return H(this,k,U,Te,!1)};function j(ue,k,U,Te){U=Number(U)||0;const Ve=ue.length-U;Te?(Te=Number(Te),Te>Ve&&(Te=Ve)):Te=Ve;const rt=k.length;Te>rt/2&&(Te=rt/2);let Ge;for(Ge=0;Ge<Te;++Ge){const St=parseInt(k.substr(Ge*2,2),16);if(ge(St))return Ge;ue[U+Ge]=St}return Ge}function D(ue,k,U,Te){return B(vn(k,ue.length-U),ue,U,Te)}function te(ue,k,U,Te){return B(ln(k),ue,U,Te)}function W(ue,k,U,Te){return B(Ee(k),ue,U,Te)}function ve(ue,k,U,Te){return B(Vt(k,ue.length-U),ue,U,Te)}u.prototype.write=function(k,U,Te,Ve){if(U===void 0)Ve="utf8",Te=this.length,U=0;else if(Te===void 0&&typeof U=="string")Ve=U,Te=this.length,U=0;else if(isFinite(U))U=U>>>0,isFinite(Te)?(Te=Te>>>0,Ve===void 0&&(Ve="utf8")):(Ve=Te,Te=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const rt=this.length-U;if((Te===void 0||Te>rt)&&(Te=rt),k.length>0&&(Te<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ve||(Ve="utf8");let Ge=!1;for(;;)switch(Ve){case"hex":return j(this,k,U,Te);case"utf8":case"utf-8":return D(this,k,U,Te);case"ascii":case"latin1":case"binary":return te(this,k,U,Te);case"base64":return W(this,k,U,Te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,k,U,Te);default:if(Ge)throw new TypeError("Unknown encoding: "+Ve);Ve=(""+Ve).toLowerCase(),Ge=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(ue,k,U){return k===0&&U===ue.length?t.fromByteArray(ue):t.fromByteArray(ue.slice(k,U))}function pe(ue,k,U){U=Math.min(ue.length,U);const Te=[];let Ve=k;for(;Ve<U;){const rt=ue[Ve];let Ge=null,St=rt>239?4:rt>223?3:rt>191?2:1;if(Ve+St<=U){let Pt,mn,bn,Ot;switch(St){case 1:rt<128&&(Ge=rt);break;case 2:Pt=ue[Ve+1],(Pt&192)===128&&(Ot=(rt&31)<<6|Pt&63,Ot>127&&(Ge=Ot));break;case 3:Pt=ue[Ve+1],mn=ue[Ve+2],(Pt&192)===128&&(mn&192)===128&&(Ot=(rt&15)<<12|(Pt&63)<<6|mn&63,Ot>2047&&(Ot<55296||Ot>57343)&&(Ge=Ot));break;case 4:Pt=ue[Ve+1],mn=ue[Ve+2],bn=ue[Ve+3],(Pt&192)===128&&(mn&192)===128&&(bn&192)===128&&(Ot=(rt&15)<<18|(Pt&63)<<12|(mn&63)<<6|bn&63,Ot>65535&&Ot<1114112&&(Ge=Ot))}}Ge===null?(Ge=65533,St=1):Ge>65535&&(Ge-=65536,Te.push(Ge>>>10&1023|55296),Ge=56320|Ge&1023),Te.push(Ge),Ve+=St}return ce(Te)}const oe=4096;function ce(ue){const k=ue.length;if(k<=oe)return String.fromCharCode.apply(String,ue);let U="",Te=0;for(;Te<k;)U+=String.fromCharCode.apply(String,ue.slice(Te,Te+=oe));return U}function ee(ue,k,U){let Te="";U=Math.min(ue.length,U);for(let Ve=k;Ve<U;++Ve)Te+=String.fromCharCode(ue[Ve]&127);return Te}function re(ue,k,U){let Te="";U=Math.min(ue.length,U);for(let Ve=k;Ve<U;++Ve)Te+=String.fromCharCode(ue[Ve]);return Te}function fe(ue,k,U){const Te=ue.length;(!k||k<0)&&(k=0),(!U||U<0||U>Te)&&(U=Te);let Ve="";for(let rt=k;rt<U;++rt)Ve+=Xe[ue[rt]];return Ve}function Se(ue,k,U){const Te=ue.slice(k,U);let Ve="";for(let rt=0;rt<Te.length-1;rt+=2)Ve+=String.fromCharCode(Te[rt]+Te[rt+1]*256);return Ve}u.prototype.slice=function(k,U){const Te=this.length;k=~~k,U=U===void 0?Te:~~U,k<0?(k+=Te,k<0&&(k=0)):k>Te&&(k=Te),U<0?(U+=Te,U<0&&(U=0)):U>Te&&(U=Te),U<k&&(U=k);const Ve=this.subarray(k,U);return Object.setPrototypeOf(Ve,u.prototype),Ve};function Ie(ue,k,U){if(ue%1!==0||ue<0)throw new RangeError("offset is not uint");if(ue+k>U)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(k,U,Te){k=k>>>0,U=U>>>0,Te||Ie(k,U,this.length);let Ve=this[k],rt=1,Ge=0;for(;++Ge<U&&(rt*=256);)Ve+=this[k+Ge]*rt;return Ve},u.prototype.readUintBE=u.prototype.readUIntBE=function(k,U,Te){k=k>>>0,U=U>>>0,Te||Ie(k,U,this.length);let Ve=this[k+--U],rt=1;for(;U>0&&(rt*=256);)Ve+=this[k+--U]*rt;return Ve},u.prototype.readUint8=u.prototype.readUInt8=function(k,U){return k=k>>>0,U||Ie(k,1,this.length),this[k]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(k,U){return k=k>>>0,U||Ie(k,2,this.length),this[k]|this[k+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(k,U){return k=k>>>0,U||Ie(k,2,this.length),this[k]<<8|this[k+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(k,U){return k=k>>>0,U||Ie(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(k,U){return k=k>>>0,U||Ie(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},u.prototype.readBigUInt64LE=tt(function(k){k=k>>>0,Gt(k,"offset");const U=this[k],Te=this[k+7];(U===void 0||Te===void 0)&&Ht(k,this.length-8);const Ve=U+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,rt=this[++k]+this[++k]*2**8+this[++k]*2**16+Te*2**24;return BigInt(Ve)+(BigInt(rt)<<BigInt(32))}),u.prototype.readBigUInt64BE=tt(function(k){k=k>>>0,Gt(k,"offset");const U=this[k],Te=this[k+7];(U===void 0||Te===void 0)&&Ht(k,this.length-8);const Ve=U*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],rt=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+Te;return(BigInt(Ve)<<BigInt(32))+BigInt(rt)}),u.prototype.readIntLE=function(k,U,Te){k=k>>>0,U=U>>>0,Te||Ie(k,U,this.length);let Ve=this[k],rt=1,Ge=0;for(;++Ge<U&&(rt*=256);)Ve+=this[k+Ge]*rt;return rt*=128,Ve>=rt&&(Ve-=Math.pow(2,8*U)),Ve},u.prototype.readIntBE=function(k,U,Te){k=k>>>0,U=U>>>0,Te||Ie(k,U,this.length);let Ve=U,rt=1,Ge=this[k+--Ve];for(;Ve>0&&(rt*=256);)Ge+=this[k+--Ve]*rt;return rt*=128,Ge>=rt&&(Ge-=Math.pow(2,8*U)),Ge},u.prototype.readInt8=function(k,U){return k=k>>>0,U||Ie(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},u.prototype.readInt16LE=function(k,U){k=k>>>0,U||Ie(k,2,this.length);const Te=this[k]|this[k+1]<<8;return Te&32768?Te|4294901760:Te},u.prototype.readInt16BE=function(k,U){k=k>>>0,U||Ie(k,2,this.length);const Te=this[k+1]|this[k]<<8;return Te&32768?Te|4294901760:Te},u.prototype.readInt32LE=function(k,U){return k=k>>>0,U||Ie(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},u.prototype.readInt32BE=function(k,U){return k=k>>>0,U||Ie(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},u.prototype.readBigInt64LE=tt(function(k){k=k>>>0,Gt(k,"offset");const U=this[k],Te=this[k+7];(U===void 0||Te===void 0)&&Ht(k,this.length-8);const Ve=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(Te<<24);return(BigInt(Ve)<<BigInt(32))+BigInt(U+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),u.prototype.readBigInt64BE=tt(function(k){k=k>>>0,Gt(k,"offset");const U=this[k],Te=this[k+7];(U===void 0||Te===void 0)&&Ht(k,this.length-8);const Ve=(U<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(Ve)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+Te)}),u.prototype.readFloatLE=function(k,U){return k=k>>>0,U||Ie(k,4,this.length),i.read(this,k,!0,23,4)},u.prototype.readFloatBE=function(k,U){return k=k>>>0,U||Ie(k,4,this.length),i.read(this,k,!1,23,4)},u.prototype.readDoubleLE=function(k,U){return k=k>>>0,U||Ie(k,8,this.length),i.read(this,k,!0,52,8)},u.prototype.readDoubleBE=function(k,U){return k=k>>>0,U||Ie(k,8,this.length),i.read(this,k,!1,52,8)};function Ne(ue,k,U,Te,Ve,rt){if(!u.isBuffer(ue))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>Ve||k<rt)throw new RangeError('"value" argument is out of bounds');if(U+Te>ue.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(k,U,Te,Ve){if(k=+k,U=U>>>0,Te=Te>>>0,!Ve){const St=Math.pow(2,8*Te)-1;Ne(this,k,U,Te,St,0)}let rt=1,Ge=0;for(this[U]=k&255;++Ge<Te&&(rt*=256);)this[U+Ge]=k/rt&255;return U+Te},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(k,U,Te,Ve){if(k=+k,U=U>>>0,Te=Te>>>0,!Ve){const St=Math.pow(2,8*Te)-1;Ne(this,k,U,Te,St,0)}let rt=Te-1,Ge=1;for(this[U+rt]=k&255;--rt>=0&&(Ge*=256);)this[U+rt]=k/Ge&255;return U+Te},u.prototype.writeUint8=u.prototype.writeUInt8=function(k,U,Te){return k=+k,U=U>>>0,Te||Ne(this,k,U,1,255,0),this[U]=k&255,U+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(k,U,Te){return k=+k,U=U>>>0,Te||Ne(this,k,U,2,65535,0),this[U]=k&255,this[U+1]=k>>>8,U+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(k,U,Te){return k=+k,U=U>>>0,Te||Ne(this,k,U,2,65535,0),this[U]=k>>>8,this[U+1]=k&255,U+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(k,U,Te){return k=+k,U=U>>>0,Te||Ne(this,k,U,4,4294967295,0),this[U+3]=k>>>24,this[U+2]=k>>>16,this[U+1]=k>>>8,this[U]=k&255,U+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(k,U,Te){return k=+k,U=U>>>0,Te||Ne(this,k,U,4,4294967295,0),this[U]=k>>>24,this[U+1]=k>>>16,this[U+2]=k>>>8,this[U+3]=k&255,U+4};function Ae(ue,k,U,Te,Ve){xt(k,Te,Ve,ue,U,7);let rt=Number(k&BigInt(4294967295));ue[U++]=rt,rt=rt>>8,ue[U++]=rt,rt=rt>>8,ue[U++]=rt,rt=rt>>8,ue[U++]=rt;let Ge=Number(k>>BigInt(32)&BigInt(4294967295));return ue[U++]=Ge,Ge=Ge>>8,ue[U++]=Ge,Ge=Ge>>8,ue[U++]=Ge,Ge=Ge>>8,ue[U++]=Ge,U}function ze(ue,k,U,Te,Ve){xt(k,Te,Ve,ue,U,7);let rt=Number(k&BigInt(4294967295));ue[U+7]=rt,rt=rt>>8,ue[U+6]=rt,rt=rt>>8,ue[U+5]=rt,rt=rt>>8,ue[U+4]=rt;let Ge=Number(k>>BigInt(32)&BigInt(4294967295));return ue[U+3]=Ge,Ge=Ge>>8,ue[U+2]=Ge,Ge=Ge>>8,ue[U+1]=Ge,Ge=Ge>>8,ue[U]=Ge,U+8}u.prototype.writeBigUInt64LE=tt(function(k,U=0){return Ae(this,k,U,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=tt(function(k,U=0){return ze(this,k,U,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(k,U,Te,Ve){if(k=+k,U=U>>>0,!Ve){const Pt=Math.pow(2,8*Te-1);Ne(this,k,U,Te,Pt-1,-Pt)}let rt=0,Ge=1,St=0;for(this[U]=k&255;++rt<Te&&(Ge*=256);)k<0&&St===0&&this[U+rt-1]!==0&&(St=1),this[U+rt]=(k/Ge>>0)-St&255;return U+Te},u.prototype.writeIntBE=function(k,U,Te,Ve){if(k=+k,U=U>>>0,!Ve){const Pt=Math.pow(2,8*Te-1);Ne(this,k,U,Te,Pt-1,-Pt)}let rt=Te-1,Ge=1,St=0;for(this[U+rt]=k&255;--rt>=0&&(Ge*=256);)k<0&&St===0&&this[U+rt+1]!==0&&(St=1),this[U+rt]=(k/Ge>>0)-St&255;return U+Te},u.prototype.writeInt8=function(k,U,Te){return k=+k,U=U>>>0,Te||Ne(this,k,U,1,127,-128),k<0&&(k=255+k+1),this[U]=k&255,U+1},u.prototype.writeInt16LE=function(k,U,Te){return k=+k,U=U>>>0,Te||Ne(this,k,U,2,32767,-32768),this[U]=k&255,this[U+1]=k>>>8,U+2},u.prototype.writeInt16BE=function(k,U,Te){return k=+k,U=U>>>0,Te||Ne(this,k,U,2,32767,-32768),this[U]=k>>>8,this[U+1]=k&255,U+2},u.prototype.writeInt32LE=function(k,U,Te){return k=+k,U=U>>>0,Te||Ne(this,k,U,4,2147483647,-2147483648),this[U]=k&255,this[U+1]=k>>>8,this[U+2]=k>>>16,this[U+3]=k>>>24,U+4},u.prototype.writeInt32BE=function(k,U,Te){return k=+k,U=U>>>0,Te||Ne(this,k,U,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[U]=k>>>24,this[U+1]=k>>>16,this[U+2]=k>>>8,this[U+3]=k&255,U+4},u.prototype.writeBigInt64LE=tt(function(k,U=0){return Ae(this,k,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=tt(function(k,U=0){return ze(this,k,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function He(ue,k,U,Te,Ve,rt){if(U+Te>ue.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function Ze(ue,k,U,Te,Ve){return k=+k,U=U>>>0,Ve||He(ue,k,U,4),i.write(ue,k,U,Te,23,4),U+4}u.prototype.writeFloatLE=function(k,U,Te){return Ze(this,k,U,!0,Te)},u.prototype.writeFloatBE=function(k,U,Te){return Ze(this,k,U,!1,Te)};function it(ue,k,U,Te,Ve){return k=+k,U=U>>>0,Ve||He(ue,k,U,8),i.write(ue,k,U,Te,52,8),U+8}u.prototype.writeDoubleLE=function(k,U,Te){return it(this,k,U,!0,Te)},u.prototype.writeDoubleBE=function(k,U,Te){return it(this,k,U,!1,Te)},u.prototype.copy=function(k,U,Te,Ve){if(!u.isBuffer(k))throw new TypeError("argument should be a Buffer");if(Te||(Te=0),!Ve&&Ve!==0&&(Ve=this.length),U>=k.length&&(U=k.length),U||(U=0),Ve>0&&Ve<Te&&(Ve=Te),Ve===Te||k.length===0||this.length===0)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(Te<0||Te>=this.length)throw new RangeError("Index out of range");if(Ve<0)throw new RangeError("sourceEnd out of bounds");Ve>this.length&&(Ve=this.length),k.length-U<Ve-Te&&(Ve=k.length-U+Te);const rt=Ve-Te;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(U,Te,Ve):Uint8Array.prototype.set.call(k,this.subarray(Te,Ve),U),rt},u.prototype.fill=function(k,U,Te,Ve){if(typeof k=="string"){if(typeof U=="string"?(Ve=U,U=0,Te=this.length):typeof Te=="string"&&(Ve=Te,Te=this.length),Ve!==void 0&&typeof Ve!="string")throw new TypeError("encoding must be a string");if(typeof Ve=="string"&&!u.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);if(k.length===1){const Ge=k.charCodeAt(0);(Ve==="utf8"&&Ge<128||Ve==="latin1")&&(k=Ge)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(U<0||this.length<U||this.length<Te)throw new RangeError("Out of range index");if(Te<=U)return this;U=U>>>0,Te=Te===void 0?this.length:Te>>>0,k||(k=0);let rt;if(typeof k=="number")for(rt=U;rt<Te;++rt)this[rt]=k;else{const Ge=u.isBuffer(k)?k:u.from(k,Ve),St=Ge.length;if(St===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(rt=0;rt<Te-U;++rt)this[rt+U]=Ge[rt%St]}return this};const ct={};function vt(ue,k,U){ct[ue]=class extends U{constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ue}]`,this.stack,delete this.name}get code(){return ue}set code(Ve){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ve,writable:!0})}toString(){return`${this.name} [${ue}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(ue){return ue?`${ue} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(ue,k){return`The "${ue}" argument must be of type number. Received type ${typeof k}`},TypeError),vt("ERR_OUT_OF_RANGE",function(ue,k,U){let Te=`The value of "${ue}" is out of range.`,Ve=U;return Number.isInteger(U)&&Math.abs(U)>2**32?Ve=Mt(String(U)):typeof U=="bigint"&&(Ve=String(U),(U>BigInt(2)**BigInt(32)||U<-(BigInt(2)**BigInt(32)))&&(Ve=Mt(Ve)),Ve+="n"),Te+=` It must be ${k}. Received ${Ve}`,Te},RangeError);function Mt(ue){let k="",U=ue.length;const Te=ue[0]==="-"?1:0;for(;U>=Te+4;U-=3)k=`_${ue.slice(U-3,U)}${k}`;return`${ue.slice(0,U)}${k}`}function pt(ue,k,U){Gt(k,"offset"),(ue[k]===void 0||ue[k+U]===void 0)&&Ht(k,ue.length-(U+1))}function xt(ue,k,U,Te,Ve,rt){if(ue>U||ue<k){const Ge=typeof k=="bigint"?"n":"";let St;throw k===0||k===BigInt(0)?St=`>= 0${Ge} and < 2${Ge} ** ${(rt+1)*8}${Ge}`:St=`>= -(2${Ge} ** ${(rt+1)*8-1}${Ge}) and < 2 ** ${(rt+1)*8-1}${Ge}`,new ct.ERR_OUT_OF_RANGE("value",St,ue)}pt(Te,Ve,rt)}function Gt(ue,k){if(typeof ue!="number")throw new ct.ERR_INVALID_ARG_TYPE(k,"number",ue)}function Ht(ue,k,U){throw Math.floor(ue)!==ue?(Gt(ue,U),new ct.ERR_OUT_OF_RANGE("offset","an integer",ue)):k<0?new ct.ERR_BUFFER_OUT_OF_BOUNDS:new ct.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${k}`,ue)}const an=/[^+/0-9A-Za-z-_]/g;function et(ue){if(ue=ue.split("=")[0],ue=ue.trim().replace(an,""),ue.length<2)return"";for(;ue.length%4!==0;)ue=ue+"=";return ue}function vn(ue,k){k=k||1/0;let U;const Te=ue.length;let Ve=null;const rt=[];for(let Ge=0;Ge<Te;++Ge){if(U=ue.charCodeAt(Ge),U>55295&&U<57344){if(!Ve){if(U>56319){(k-=3)>-1&&rt.push(239,191,189);continue}else if(Ge+1===Te){(k-=3)>-1&&rt.push(239,191,189);continue}Ve=U;continue}if(U<56320){(k-=3)>-1&&rt.push(239,191,189),Ve=U;continue}U=(Ve-55296<<10|U-56320)+65536}else Ve&&(k-=3)>-1&&rt.push(239,191,189);if(Ve=null,U<128){if((k-=1)<0)break;rt.push(U)}else if(U<2048){if((k-=2)<0)break;rt.push(U>>6|192,U&63|128)}else if(U<65536){if((k-=3)<0)break;rt.push(U>>12|224,U>>6&63|128,U&63|128)}else if(U<1114112){if((k-=4)<0)break;rt.push(U>>18|240,U>>12&63|128,U>>6&63|128,U&63|128)}else throw new Error("Invalid code point")}return rt}function ln(ue){const k=[];for(let U=0;U<ue.length;++U)k.push(ue.charCodeAt(U)&255);return k}function Vt(ue,k){let U,Te,Ve;const rt=[];for(let Ge=0;Ge<ue.length&&!((k-=2)<0);++Ge)U=ue.charCodeAt(Ge),Te=U>>8,Ve=U%256,rt.push(Ve),rt.push(Te);return rt}function Ee(ue){return t.toByteArray(et(ue))}function B(ue,k,U,Te){let Ve;for(Ve=0;Ve<Te&&!(Ve+U>=k.length||Ve>=ue.length);++Ve)k[Ve+U]=ue[Ve];return Ve}function L(ue,k){return ue instanceof k||ue!=null&&ue.constructor!=null&&ue.constructor.name!=null&&ue.constructor.name===k.name}function ge(ue){return ue!==ue}const Xe=function(){const ue="0123456789abcdef",k=new Array(256);for(let U=0;U<16;++U){const Te=U*16;for(let Ve=0;Ve<16;++Ve)k[Te+Ve]=ue[U]+ue[Ve]}return k}();function tt(ue){return typeof BigInt>"u"?ht:ue}function ht(){throw new Error("BigInt not supported")}})(GP);window.Buffer=GP.Buffer;u4.render(mt.jsx(h1.StrictMode,{children:mt.jsx(k5,{})}),document.getElementById("root"));

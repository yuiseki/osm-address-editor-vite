function uk(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const p=Object.getOwnPropertyDescriptor(a,c);p&&Object.defineProperty(e,c,p.get?p:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const d of p.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function a(c){if(c.ep)return;c.ep=!0;const p=i(c);fetch(c.href,p)}})();var $l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var eE={exports:{}},Dg={},tE={exports:{}},jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nf=Symbol.for("react.element"),ck=Symbol.for("react.portal"),hk=Symbol.for("react.fragment"),dk=Symbol.for("react.strict_mode"),fk=Symbol.for("react.profiler"),pk=Symbol.for("react.provider"),mk=Symbol.for("react.context"),gk=Symbol.for("react.forward_ref"),yk=Symbol.for("react.suspense"),vk=Symbol.for("react.memo"),_k=Symbol.for("react.lazy"),rb=Symbol.iterator;function xk(e){return e===null||typeof e!="object"?null:(e=rb&&e[rb]||e["@@iterator"],typeof e=="function"?e:null)}var nE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rE=Object.assign,iE={};function Fh(e,t,i){this.props=e,this.context=t,this.refs=iE,this.updater=i||nE}Fh.prototype.isReactComponent={};Fh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function oE(){}oE.prototype=Fh.prototype;function V_(e,t,i){this.props=e,this.context=t,this.refs=iE,this.updater=i||nE}var G_=V_.prototype=new oE;G_.constructor=V_;rE(G_,Fh.prototype);G_.isPureReactComponent=!0;var ib=Array.isArray,sE=Object.prototype.hasOwnProperty,H_={current:null},aE={key:!0,ref:!0,__self:!0,__source:!0};function lE(e,t,i){var a,c={},p=null,d=null;if(t!=null)for(a in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(p=""+t.key),t)sE.call(t,a)&&!aE.hasOwnProperty(a)&&(c[a]=t[a]);var u=arguments.length-2;if(u===1)c.children=i;else if(1<u){for(var b=Array(u),C=0;C<u;C++)b[C]=arguments[C+2];c.children=b}if(e&&e.defaultProps)for(a in u=e.defaultProps,u)c[a]===void 0&&(c[a]=u[a]);return{$$typeof:Nf,type:e,key:p,ref:d,props:c,_owner:H_.current}}function wk(e,t){return{$$typeof:Nf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function W_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nf}function bk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var ob=/\/+/g;function e0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bk(""+e.key):t.toString(36)}function gm(e,t,i,a,c){var p=typeof e;(p==="undefined"||p==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(p){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Nf:case ck:d=!0}}if(d)return d=e,c=c(d),e=a===""?"."+e0(d,0):a,ib(c)?(i="",e!=null&&(i=e.replace(ob,"$&/")+"/"),gm(c,t,i,"",function(C){return C})):c!=null&&(W_(c)&&(c=wk(c,i+(!c.key||d&&d.key===c.key?"":(""+c.key).replace(ob,"$&/")+"/")+e)),t.push(c)),1;if(d=0,a=a===""?".":a+":",ib(e))for(var u=0;u<e.length;u++){p=e[u];var b=a+e0(p,u);d+=gm(p,t,i,b,c)}else if(b=xk(e),typeof b=="function")for(e=b.call(e),u=0;!(p=e.next()).done;)p=p.value,b=a+e0(p,u++),d+=gm(p,t,i,b,c);else if(p==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Rp(e,t,i){if(e==null)return e;var a=[],c=0;return gm(e,a,"","",function(p){return t.call(i,p,c++)}),a}function Sk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var uo={current:null},ym={transition:null},Ek={ReactCurrentDispatcher:uo,ReactCurrentBatchConfig:ym,ReactCurrentOwner:H_};jn.Children={map:Rp,forEach:function(e,t,i){Rp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Rp(e,function(){t++}),t},toArray:function(e){return Rp(e,function(t){return t})||[]},only:function(e){if(!W_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jn.Component=Fh;jn.Fragment=hk;jn.Profiler=fk;jn.PureComponent=V_;jn.StrictMode=dk;jn.Suspense=yk;jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ek;jn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=rE({},e.props),c=e.key,p=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(p=t.ref,d=H_.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(b in t)sE.call(t,b)&&!aE.hasOwnProperty(b)&&(a[b]=t[b]===void 0&&u!==void 0?u[b]:t[b])}var b=arguments.length-2;if(b===1)a.children=i;else if(1<b){u=Array(b);for(var C=0;C<b;C++)u[C]=arguments[C+2];a.children=u}return{$$typeof:Nf,type:e.type,key:c,ref:p,props:a,_owner:d}};jn.createContext=function(e){return e={$$typeof:mk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pk,_context:e},e.Consumer=e};jn.createElement=lE;jn.createFactory=function(e){var t=lE.bind(null,e);return t.type=e,t};jn.createRef=function(){return{current:null}};jn.forwardRef=function(e){return{$$typeof:gk,render:e}};jn.isValidElement=W_;jn.lazy=function(e){return{$$typeof:_k,_payload:{_status:-1,_result:e},_init:Sk}};jn.memo=function(e,t){return{$$typeof:vk,type:e,compare:t===void 0?null:t}};jn.startTransition=function(e){var t=ym.transition;ym.transition={};try{e()}finally{ym.transition=t}};jn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};jn.useCallback=function(e,t){return uo.current.useCallback(e,t)};jn.useContext=function(e){return uo.current.useContext(e)};jn.useDebugValue=function(){};jn.useDeferredValue=function(e){return uo.current.useDeferredValue(e)};jn.useEffect=function(e,t){return uo.current.useEffect(e,t)};jn.useId=function(){return uo.current.useId()};jn.useImperativeHandle=function(e,t,i){return uo.current.useImperativeHandle(e,t,i)};jn.useInsertionEffect=function(e,t){return uo.current.useInsertionEffect(e,t)};jn.useLayoutEffect=function(e,t){return uo.current.useLayoutEffect(e,t)};jn.useMemo=function(e,t){return uo.current.useMemo(e,t)};jn.useReducer=function(e,t,i){return uo.current.useReducer(e,t,i)};jn.useRef=function(e){return uo.current.useRef(e)};jn.useState=function(e){return uo.current.useState(e)};jn.useSyncExternalStore=function(e,t,i){return uo.current.useSyncExternalStore(e,t,i)};jn.useTransition=function(){return uo.current.useTransition()};jn.version="18.2.0";tE.exports=jn;var _t=tE.exports;const Z_=Bf(_t);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk=_t,Ck=Symbol.for("react.element"),Ik=Symbol.for("react.fragment"),Ak=Object.prototype.hasOwnProperty,Pk=Tk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kk={key:!0,ref:!0,__self:!0,__source:!0};function uE(e,t,i){var a,c={},p=null,d=null;i!==void 0&&(p=""+i),t.key!==void 0&&(p=""+t.key),t.ref!==void 0&&(d=t.ref);for(a in t)Ak.call(t,a)&&!kk.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:Ck,type:e,key:p,ref:d,props:c,_owner:Pk.current}}Dg.Fragment=Ik;Dg.jsx=uE;Dg.jsxs=uE;eE.exports=Dg;var yt=eE.exports,cE={exports:{}},Go={},hE={exports:{}},dE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(te,he){var be=te.length;te.push(he);e:for(;0<be;){var Ee=be-1>>>1,De=te[Ee];if(0<c(De,he))te[Ee]=he,te[be]=De,be=Ee;else break e}}function i(te){return te.length===0?null:te[0]}function a(te){if(te.length===0)return null;var he=te[0],be=te.pop();if(be!==he){te[0]=be;e:for(var Ee=0,De=te.length,Ae=De>>>1;Ee<Ae;){var Oe=2*(Ee+1)-1,We=te[Oe],He=Oe+1,nt=te[He];if(0>c(We,be))He<De&&0>c(nt,We)?(te[Ee]=nt,te[He]=be,Ee=He):(te[Ee]=We,te[Oe]=be,Ee=Oe);else if(He<De&&0>c(nt,be))te[Ee]=nt,te[He]=be,Ee=He;else break e}}return he}function c(te,he){var be=te.sortIndex-he.sortIndex;return be!==0?be:te.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var d=Date,u=d.now();e.unstable_now=function(){return d.now()-u}}var b=[],C=[],A=1,w=null,T=3,L=!1,U=!1,F=!1,ce=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(te){for(var he=i(C);he!==null;){if(he.callback===null)a(C);else if(he.startTime<=te)a(C),he.sortIndex=he.expirationTime,t(b,he);else break;he=i(C)}}function oe(te){if(F=!1,$(te),!U)if(i(b)!==null)U=!0,le(q);else{var he=i(C);he!==null&&J(oe,he.startTime-te)}}function q(te,he){U=!1,F&&(F=!1,K(j),j=-1),L=!0;var be=T;try{for($(he),w=i(b);w!==null&&(!(w.expirationTime>he)||te&&!W());){var Ee=w.callback;if(typeof Ee=="function"){w.callback=null,T=w.priorityLevel;var De=Ee(w.expirationTime<=he);he=e.unstable_now(),typeof De=="function"?w.callback=De:w===i(b)&&a(b),$(he)}else a(b);w=i(b)}if(w!==null)var Ae=!0;else{var Oe=i(C);Oe!==null&&J(oe,Oe.startTime-he),Ae=!1}return Ae}finally{w=null,T=be,L=!1}}var V=!1,E=null,j=-1,D=5,ee=-1;function W(){return!(e.unstable_now()-ee<D)}function ve(){if(E!==null){var te=e.unstable_now();ee=te;var he=!0;try{he=E(!0,te)}finally{he?_e():(V=!1,E=null)}}else V=!1}var _e;if(typeof Z=="function")_e=function(){Z(ve)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,ie=de.port2;de.port1.onmessage=ve,_e=function(){ie.postMessage(null)}}else _e=function(){ce(ve,0)};function le(te){E=te,V||(V=!0,_e())}function J(te,he){j=ce(function(){te(e.unstable_now())},he)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){U||L||(U=!0,le(q))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return i(b)},e.unstable_next=function(te){switch(T){case 1:case 2:case 3:var he=3;break;default:he=T}var be=T;T=he;try{return te()}finally{T=be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,he){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var be=T;T=te;try{return he()}finally{T=be}},e.unstable_scheduleCallback=function(te,he,be){var Ee=e.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Ee+be:Ee):be=Ee,te){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=be+De,te={id:A++,callback:he,priorityLevel:te,startTime:be,expirationTime:De,sortIndex:-1},be>Ee?(te.sortIndex=be,t(C,te),i(b)===null&&te===i(C)&&(F?(K(j),j=-1):F=!0,J(oe,be-Ee))):(te.sortIndex=De,t(b,te),U||L||(U=!0,le(q))),te},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(te){var he=T;return function(){var be=T;T=he;try{return te.apply(this,arguments)}finally{T=be}}}})(dE);hE.exports=dE;var Mk=hE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fE=_t,Vo=Mk;function Pt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pE=new Set,df={};function tc(e,t){Sh(e,t),Sh(e+"Capture",t)}function Sh(e,t){for(df[e]=t,e=0;e<t.length;e++)pE.add(t[e])}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ov=Object.prototype.hasOwnProperty,zk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sb={},ab={};function Rk(e){return ov.call(ab,e)?!0:ov.call(sb,e)?!1:zk.test(e)?ab[e]=!0:(sb[e]=!0,!1)}function Ok(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Lk(e,t,i,a){if(t===null||typeof t>"u"||Ok(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function co(e,t,i,a,c,p,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=d}var Pi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pi[e]=new co(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pi[t]=new co(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pi[e]=new co(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pi[e]=new co(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pi[e]=new co(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pi[e]=new co(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pi[e]=new co(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pi[e]=new co(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pi[e]=new co(e,5,!1,e.toLowerCase(),null,!1,!1)});var X_=/[\-:]([a-z])/g;function q_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(X_,q_);Pi[t]=new co(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(X_,q_);Pi[t]=new co(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(X_,q_);Pi[t]=new co(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pi[e]=new co(e,1,!1,e.toLowerCase(),null,!1,!1)});Pi.xlinkHref=new co("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pi[e]=new co(e,1,!1,e.toLowerCase(),null,!0,!0)});function K_(e,t,i,a){var c=Pi.hasOwnProperty(t)?Pi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Lk(t,i,c,a)&&(i=null),a||c===null?Rk(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var Ja=fE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Op=Symbol.for("react.element"),Yc=Symbol.for("react.portal"),Jc=Symbol.for("react.fragment"),Y_=Symbol.for("react.strict_mode"),sv=Symbol.for("react.profiler"),mE=Symbol.for("react.provider"),gE=Symbol.for("react.context"),J_=Symbol.for("react.forward_ref"),av=Symbol.for("react.suspense"),lv=Symbol.for("react.suspense_list"),Q_=Symbol.for("react.memo"),Bl=Symbol.for("react.lazy"),yE=Symbol.for("react.offscreen"),lb=Symbol.iterator;function Ad(e){return e===null||typeof e!="object"?null:(e=lb&&e[lb]||e["@@iterator"],typeof e=="function"?e:null)}var Mr=Object.assign,t0;function jd(e){if(t0===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);t0=t&&t[1]||""}return`
`+t0+e}var n0=!1;function r0(e,t){if(!e||n0)return"";n0=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var a=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){a=C}e.call(t.prototype)}else{try{throw Error()}catch(C){a=C}e()}}catch(C){if(C&&a&&typeof C.stack=="string"){for(var c=C.stack.split(`
`),p=a.stack.split(`
`),d=c.length-1,u=p.length-1;1<=d&&0<=u&&c[d]!==p[u];)u--;for(;1<=d&&0<=u;d--,u--)if(c[d]!==p[u]){if(d!==1||u!==1)do if(d--,u--,0>u||c[d]!==p[u]){var b=`
`+c[d].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=d&&0<=u);break}}}finally{n0=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?jd(e):""}function Fk(e){switch(e.tag){case 5:return jd(e.type);case 16:return jd("Lazy");case 13:return jd("Suspense");case 19:return jd("SuspenseList");case 0:case 2:case 15:return e=r0(e.type,!1),e;case 11:return e=r0(e.type.render,!1),e;case 1:return e=r0(e.type,!0),e;default:return""}}function uv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Jc:return"Fragment";case Yc:return"Portal";case sv:return"Profiler";case Y_:return"StrictMode";case av:return"Suspense";case lv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gE:return(e.displayName||"Context")+".Consumer";case mE:return(e._context.displayName||"Context")+".Provider";case J_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q_:return t=e.displayName||null,t!==null?t:uv(e.type)||"Memo";case Bl:t=e._payload,e=e._init;try{return uv(e(t))}catch{}}return null}function jk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uv(t);case 8:return t===Y_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Dk(e){var t=vE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,p=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(d){a=""+d,p.call(this,d)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lp(e){e._valueTracker||(e._valueTracker=Dk(e))}function _E(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=vE(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function jm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function cv(e,t){var i=t.checked;return Mr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function ub(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=nu(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xE(e,t){t=t.checked,t!=null&&K_(e,"checked",t,!1)}function hv(e,t){xE(e,t);var i=nu(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dv(e,t.type,i):t.hasOwnProperty("defaultValue")&&dv(e,t.type,nu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cb(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function dv(e,t,i){(t!=="number"||jm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Dd=Array.isArray;function ph(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+nu(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function fv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pt(91));return Mr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Pt(92));if(Dd(i)){if(1<i.length)throw Error(Pt(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:nu(i)}}function wE(e,t){var i=nu(t.value),a=nu(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function db(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function bE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?bE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fp,SE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fp=Fp||document.createElement("div"),Fp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ff(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var qd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bk=["Webkit","ms","Moz","O"];Object.keys(qd).forEach(function(e){Bk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qd[t]=qd[e]})});function EE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||qd.hasOwnProperty(e)&&qd[e]?(""+t).trim():t+"px"}function TE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=EE(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var Nk=Mr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mv(e,t){if(t){if(Nk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pt(62))}}function gv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yv=null;function e1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vv=null,mh=null,gh=null;function fb(e){if(e=Vf(e)){if(typeof vv!="function")throw Error(Pt(280));var t=e.stateNode;t&&(t=Vg(t),vv(e.stateNode,e.type,t))}}function CE(e){mh?gh?gh.push(e):gh=[e]:mh=e}function IE(){if(mh){var e=mh,t=gh;if(gh=mh=null,fb(e),t)for(e=0;e<t.length;e++)fb(t[e])}}function AE(e,t){return e(t)}function PE(){}var i0=!1;function kE(e,t,i){if(i0)return e(t,i);i0=!0;try{return AE(e,t,i)}finally{i0=!1,(mh!==null||gh!==null)&&(PE(),IE())}}function pf(e,t){var i=e.stateNode;if(i===null)return null;var a=Vg(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Pt(231,t,typeof i));return i}var _v=!1;if(Ga)try{var Pd={};Object.defineProperty(Pd,"passive",{get:function(){_v=!0}}),window.addEventListener("test",Pd,Pd),window.removeEventListener("test",Pd,Pd)}catch{_v=!1}function Uk(e,t,i,a,c,p,d,u,b){var C=Array.prototype.slice.call(arguments,3);try{t.apply(i,C)}catch(A){this.onError(A)}}var Kd=!1,Dm=null,Bm=!1,xv=null,$k={onError:function(e){Kd=!0,Dm=e}};function Vk(e,t,i,a,c,p,d,u,b){Kd=!1,Dm=null,Uk.apply($k,arguments)}function Gk(e,t,i,a,c,p,d,u,b){if(Vk.apply(this,arguments),Kd){if(Kd){var C=Dm;Kd=!1,Dm=null}else throw Error(Pt(198));Bm||(Bm=!0,xv=C)}}function nc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function ME(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pb(e){if(nc(e)!==e)throw Error(Pt(188))}function Hk(e){var t=e.alternate;if(!t){if(t=nc(e),t===null)throw Error(Pt(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var p=c.alternate;if(p===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===p.child){for(p=c.child;p;){if(p===i)return pb(c),e;if(p===a)return pb(c),t;p=p.sibling}throw Error(Pt(188))}if(i.return!==a.return)i=c,a=p;else{for(var d=!1,u=c.child;u;){if(u===i){d=!0,i=c,a=p;break}if(u===a){d=!0,a=c,i=p;break}u=u.sibling}if(!d){for(u=p.child;u;){if(u===i){d=!0,i=p,a=c;break}if(u===a){d=!0,a=p,i=c;break}u=u.sibling}if(!d)throw Error(Pt(189))}}if(i.alternate!==a)throw Error(Pt(190))}if(i.tag!==3)throw Error(Pt(188));return i.stateNode.current===i?e:t}function zE(e){return e=Hk(e),e!==null?RE(e):null}function RE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=RE(e);if(t!==null)return t;e=e.sibling}return null}var OE=Vo.unstable_scheduleCallback,mb=Vo.unstable_cancelCallback,Wk=Vo.unstable_shouldYield,Zk=Vo.unstable_requestPaint,Kr=Vo.unstable_now,Xk=Vo.unstable_getCurrentPriorityLevel,t1=Vo.unstable_ImmediatePriority,LE=Vo.unstable_UserBlockingPriority,Nm=Vo.unstable_NormalPriority,qk=Vo.unstable_LowPriority,FE=Vo.unstable_IdlePriority,Bg=null,oa=null;function Kk(e){if(oa&&typeof oa.onCommitFiberRoot=="function")try{oa.onCommitFiberRoot(Bg,e,void 0,(e.current.flags&128)===128)}catch{}}var Os=Math.clz32?Math.clz32:Qk,Yk=Math.log,Jk=Math.LN2;function Qk(e){return e>>>=0,e===0?32:31-(Yk(e)/Jk|0)|0}var jp=64,Dp=4194304;function Bd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Um(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,p=e.pingedLanes,d=i&268435455;if(d!==0){var u=d&~c;u!==0?a=Bd(u):(p&=d,p!==0&&(a=Bd(p)))}else d=i&~c,d!==0?a=Bd(d):p!==0&&(a=Bd(p));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,p=t&-t,c>=p||c===16&&(p&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Os(t),c=1<<i,a|=e[i],t&=~c;return a}function eM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tM(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,p=e.pendingLanes;0<p;){var d=31-Os(p),u=1<<d,b=c[d];b===-1?(!(u&i)||u&a)&&(c[d]=eM(u,t)):b<=t&&(e.expiredLanes|=u),p&=~u}}function wv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jE(){var e=jp;return jp<<=1,!(jp&4194240)&&(jp=64),e}function o0(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Uf(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Os(t),e[t]=i}function nM(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Os(i),p=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~p}}function n1(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Os(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var Jn=0;function DE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var BE,r1,NE,UE,$E,bv=!1,Bp=[],Xl=null,ql=null,Kl=null,mf=new Map,gf=new Map,Vl=[],rM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gb(e,t){switch(e){case"focusin":case"focusout":Xl=null;break;case"dragenter":case"dragleave":ql=null;break;case"mouseover":case"mouseout":Kl=null;break;case"pointerover":case"pointerout":mf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gf.delete(t.pointerId)}}function kd(e,t,i,a,c,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:p,targetContainers:[c]},t!==null&&(t=Vf(t),t!==null&&r1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function iM(e,t,i,a,c){switch(t){case"focusin":return Xl=kd(Xl,e,t,i,a,c),!0;case"dragenter":return ql=kd(ql,e,t,i,a,c),!0;case"mouseover":return Kl=kd(Kl,e,t,i,a,c),!0;case"pointerover":var p=c.pointerId;return mf.set(p,kd(mf.get(p)||null,e,t,i,a,c)),!0;case"gotpointercapture":return p=c.pointerId,gf.set(p,kd(gf.get(p)||null,e,t,i,a,c)),!0}return!1}function VE(e){var t=Bu(e.target);if(t!==null){var i=nc(t);if(i!==null){if(t=i.tag,t===13){if(t=ME(i),t!==null){e.blockedOn=t,$E(e.priority,function(){NE(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Sv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);yv=a,i.target.dispatchEvent(a),yv=null}else return t=Vf(i),t!==null&&r1(t),e.blockedOn=i,!1;t.shift()}return!0}function yb(e,t,i){vm(e)&&i.delete(t)}function oM(){bv=!1,Xl!==null&&vm(Xl)&&(Xl=null),ql!==null&&vm(ql)&&(ql=null),Kl!==null&&vm(Kl)&&(Kl=null),mf.forEach(yb),gf.forEach(yb)}function Md(e,t){e.blockedOn===t&&(e.blockedOn=null,bv||(bv=!0,Vo.unstable_scheduleCallback(Vo.unstable_NormalPriority,oM)))}function yf(e){function t(c){return Md(c,e)}if(0<Bp.length){Md(Bp[0],e);for(var i=1;i<Bp.length;i++){var a=Bp[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Xl!==null&&Md(Xl,e),ql!==null&&Md(ql,e),Kl!==null&&Md(Kl,e),mf.forEach(t),gf.forEach(t),i=0;i<Vl.length;i++)a=Vl[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Vl.length&&(i=Vl[0],i.blockedOn===null);)VE(i),i.blockedOn===null&&Vl.shift()}var yh=Ja.ReactCurrentBatchConfig,$m=!0;function sM(e,t,i,a){var c=Jn,p=yh.transition;yh.transition=null;try{Jn=1,i1(e,t,i,a)}finally{Jn=c,yh.transition=p}}function aM(e,t,i,a){var c=Jn,p=yh.transition;yh.transition=null;try{Jn=4,i1(e,t,i,a)}finally{Jn=c,yh.transition=p}}function i1(e,t,i,a){if($m){var c=Sv(e,t,i,a);if(c===null)m0(e,t,a,Vm,i),gb(e,a);else if(iM(c,e,t,i,a))a.stopPropagation();else if(gb(e,a),t&4&&-1<rM.indexOf(e)){for(;c!==null;){var p=Vf(c);if(p!==null&&BE(p),p=Sv(e,t,i,a),p===null&&m0(e,t,a,Vm,i),p===c)break;c=p}c!==null&&a.stopPropagation()}else m0(e,t,a,null,i)}}var Vm=null;function Sv(e,t,i,a){if(Vm=null,e=e1(a),e=Bu(e),e!==null)if(t=nc(e),t===null)e=null;else if(i=t.tag,i===13){if(e=ME(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vm=e,null}function GE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xk()){case t1:return 1;case LE:return 4;case Nm:case qk:return 16;case FE:return 536870912;default:return 16}default:return 16}}var Hl=null,o1=null,_m=null;function HE(){if(_m)return _m;var e,t=o1,i=t.length,a,c="value"in Hl?Hl.value:Hl.textContent,p=c.length;for(e=0;e<i&&t[e]===c[e];e++);var d=i-e;for(a=1;a<=d&&t[i-a]===c[p-a];a++);return _m=c.slice(e,1<a?1-a:void 0)}function xm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Np(){return!0}function vb(){return!1}function Ho(e){function t(i,a,c,p,d){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=p,this.target=d,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(i=e[u],this[u]=i?i(p):p[u]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Np:vb,this.isPropagationStopped=vb,this}return Mr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Np)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Np)},persist:function(){},isPersistent:Np}),t}var jh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},s1=Ho(jh),$f=Mr({},jh,{view:0,detail:0}),lM=Ho($f),s0,a0,zd,Ng=Mr({},$f,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:a1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zd&&(zd&&e.type==="mousemove"?(s0=e.screenX-zd.screenX,a0=e.screenY-zd.screenY):a0=s0=0,zd=e),s0)},movementY:function(e){return"movementY"in e?e.movementY:a0}}),_b=Ho(Ng),uM=Mr({},Ng,{dataTransfer:0}),cM=Ho(uM),hM=Mr({},$f,{relatedTarget:0}),l0=Ho(hM),dM=Mr({},jh,{animationName:0,elapsedTime:0,pseudoElement:0}),fM=Ho(dM),pM=Mr({},jh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mM=Ho(pM),gM=Mr({},jh,{data:0}),xb=Ho(gM),yM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_M={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_M[e])?!!t[e]:!1}function a1(){return xM}var wM=Mr({},$f,{key:function(e){if(e.key){var t=yM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:a1,charCode:function(e){return e.type==="keypress"?xm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bM=Ho(wM),SM=Mr({},Ng,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wb=Ho(SM),EM=Mr({},$f,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:a1}),TM=Ho(EM),CM=Mr({},jh,{propertyName:0,elapsedTime:0,pseudoElement:0}),IM=Ho(CM),AM=Mr({},Ng,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),PM=Ho(AM),kM=[9,13,27,32],l1=Ga&&"CompositionEvent"in window,Yd=null;Ga&&"documentMode"in document&&(Yd=document.documentMode);var MM=Ga&&"TextEvent"in window&&!Yd,WE=Ga&&(!l1||Yd&&8<Yd&&11>=Yd),bb=" ",Sb=!1;function ZE(e,t){switch(e){case"keyup":return kM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qc=!1;function zM(e,t){switch(e){case"compositionend":return XE(t);case"keypress":return t.which!==32?null:(Sb=!0,bb);case"textInput":return e=t.data,e===bb&&Sb?null:e;default:return null}}function RM(e,t){if(Qc)return e==="compositionend"||!l1&&ZE(e,t)?(e=HE(),_m=o1=Hl=null,Qc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return WE&&t.locale!=="ko"?null:t.data;default:return null}}var OM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!OM[e.type]:t==="textarea"}function qE(e,t,i,a){CE(a),t=Gm(t,"onChange"),0<t.length&&(i=new s1("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var Jd=null,vf=null;function LM(e){sT(e,0)}function Ug(e){var t=nh(e);if(_E(t))return e}function FM(e,t){if(e==="change")return t}var KE=!1;if(Ga){var u0;if(Ga){var c0="oninput"in document;if(!c0){var Tb=document.createElement("div");Tb.setAttribute("oninput","return;"),c0=typeof Tb.oninput=="function"}u0=c0}else u0=!1;KE=u0&&(!document.documentMode||9<document.documentMode)}function Cb(){Jd&&(Jd.detachEvent("onpropertychange",YE),vf=Jd=null)}function YE(e){if(e.propertyName==="value"&&Ug(vf)){var t=[];qE(t,vf,e,e1(e)),kE(LM,t)}}function jM(e,t,i){e==="focusin"?(Cb(),Jd=t,vf=i,Jd.attachEvent("onpropertychange",YE)):e==="focusout"&&Cb()}function DM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ug(vf)}function BM(e,t){if(e==="click")return Ug(t)}function NM(e,t){if(e==="input"||e==="change")return Ug(t)}function UM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fs=typeof Object.is=="function"?Object.is:UM;function _f(e,t){if(Fs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!ov.call(t,c)||!Fs(e[c],t[c]))return!1}return!0}function Ib(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ab(e,t){var i=Ib(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ib(i)}}function JE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?JE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function QE(){for(var e=window,t=jm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=jm(e.document)}return t}function u1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $M(e){var t=QE(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&JE(i.ownerDocument.documentElement,i)){if(a!==null&&u1(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,p=Math.min(a.start,c);a=a.end===void 0?p:Math.min(a.end,c),!e.extend&&p>a&&(c=a,a=p,p=c),c=Ab(i,p);var d=Ab(i,a);c&&d&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),p>a?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var VM=Ga&&"documentMode"in document&&11>=document.documentMode,eh=null,Ev=null,Qd=null,Tv=!1;function Pb(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Tv||eh==null||eh!==jm(a)||(a=eh,"selectionStart"in a&&u1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Qd&&_f(Qd,a)||(Qd=a,a=Gm(Ev,"onSelect"),0<a.length&&(t=new s1("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=eh)))}function Up(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var th={animationend:Up("Animation","AnimationEnd"),animationiteration:Up("Animation","AnimationIteration"),animationstart:Up("Animation","AnimationStart"),transitionend:Up("Transition","TransitionEnd")},h0={},eT={};Ga&&(eT=document.createElement("div").style,"AnimationEvent"in window||(delete th.animationend.animation,delete th.animationiteration.animation,delete th.animationstart.animation),"TransitionEvent"in window||delete th.transitionend.transition);function $g(e){if(h0[e])return h0[e];if(!th[e])return e;var t=th[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in eT)return h0[e]=t[i];return e}var tT=$g("animationend"),nT=$g("animationiteration"),rT=$g("animationstart"),iT=$g("transitionend"),oT=new Map,kb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lu(e,t){oT.set(e,t),tc(t,[e])}for(var d0=0;d0<kb.length;d0++){var f0=kb[d0],GM=f0.toLowerCase(),HM=f0[0].toUpperCase()+f0.slice(1);lu(GM,"on"+HM)}lu(tT,"onAnimationEnd");lu(nT,"onAnimationIteration");lu(rT,"onAnimationStart");lu("dblclick","onDoubleClick");lu("focusin","onFocus");lu("focusout","onBlur");lu(iT,"onTransitionEnd");Sh("onMouseEnter",["mouseout","mouseover"]);Sh("onMouseLeave",["mouseout","mouseover"]);Sh("onPointerEnter",["pointerout","pointerover"]);Sh("onPointerLeave",["pointerout","pointerover"]);tc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tc("onBeforeInput",["compositionend","keypress","textInput","paste"]);tc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nd));function Mb(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,Gk(a,t,void 0,e),e.currentTarget=null}function sT(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var p=void 0;if(t)for(var d=a.length-1;0<=d;d--){var u=a[d],b=u.instance,C=u.currentTarget;if(u=u.listener,b!==p&&c.isPropagationStopped())break e;Mb(c,u,C),p=b}else for(d=0;d<a.length;d++){if(u=a[d],b=u.instance,C=u.currentTarget,u=u.listener,b!==p&&c.isPropagationStopped())break e;Mb(c,u,C),p=b}}}if(Bm)throw e=xv,Bm=!1,xv=null,e}function yr(e,t){var i=t[kv];i===void 0&&(i=t[kv]=new Set);var a=e+"__bubble";i.has(a)||(aT(t,e,2,!1),i.add(a))}function p0(e,t,i){var a=0;t&&(a|=4),aT(i,e,a,t)}var $p="_reactListening"+Math.random().toString(36).slice(2);function xf(e){if(!e[$p]){e[$p]=!0,pE.forEach(function(i){i!=="selectionchange"&&(WM.has(i)||p0(i,!1,e),p0(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$p]||(t[$p]=!0,p0("selectionchange",!1,t))}}function aT(e,t,i,a){switch(GE(t)){case 1:var c=sM;break;case 4:c=aM;break;default:c=i1}i=c.bind(null,t,i,e),c=void 0,!_v||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function m0(e,t,i,a,c){var p=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var u=a.stateNode.containerInfo;if(u===c||u.nodeType===8&&u.parentNode===c)break;if(d===4)for(d=a.return;d!==null;){var b=d.tag;if((b===3||b===4)&&(b=d.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;d=d.return}for(;u!==null;){if(d=Bu(u),d===null)return;if(b=d.tag,b===5||b===6){a=p=d;continue e}u=u.parentNode}}a=a.return}kE(function(){var C=p,A=e1(i),w=[];e:{var T=oT.get(e);if(T!==void 0){var L=s1,U=e;switch(e){case"keypress":if(xm(i)===0)break e;case"keydown":case"keyup":L=bM;break;case"focusin":U="focus",L=l0;break;case"focusout":U="blur",L=l0;break;case"beforeblur":case"afterblur":L=l0;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=_b;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=cM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=TM;break;case tT:case nT:case rT:L=fM;break;case iT:L=IM;break;case"scroll":L=lM;break;case"wheel":L=PM;break;case"copy":case"cut":case"paste":L=mM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=wb}var F=(t&4)!==0,ce=!F&&e==="scroll",K=F?T!==null?T+"Capture":null:T;F=[];for(var Z=C,$;Z!==null;){$=Z;var oe=$.stateNode;if($.tag===5&&oe!==null&&($=oe,K!==null&&(oe=pf(Z,K),oe!=null&&F.push(wf(Z,oe,$)))),ce)break;Z=Z.return}0<F.length&&(T=new L(T,U,null,i,A),w.push({event:T,listeners:F}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",T&&i!==yv&&(U=i.relatedTarget||i.fromElement)&&(Bu(U)||U[Ha]))break e;if((L||T)&&(T=A.window===A?A:(T=A.ownerDocument)?T.defaultView||T.parentWindow:window,L?(U=i.relatedTarget||i.toElement,L=C,U=U?Bu(U):null,U!==null&&(ce=nc(U),U!==ce||U.tag!==5&&U.tag!==6)&&(U=null)):(L=null,U=C),L!==U)){if(F=_b,oe="onMouseLeave",K="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(F=wb,oe="onPointerLeave",K="onPointerEnter",Z="pointer"),ce=L==null?T:nh(L),$=U==null?T:nh(U),T=new F(oe,Z+"leave",L,i,A),T.target=ce,T.relatedTarget=$,oe=null,Bu(A)===C&&(F=new F(K,Z+"enter",U,i,A),F.target=$,F.relatedTarget=ce,oe=F),ce=oe,L&&U)t:{for(F=L,K=U,Z=0,$=F;$;$=Vc($))Z++;for($=0,oe=K;oe;oe=Vc(oe))$++;for(;0<Z-$;)F=Vc(F),Z--;for(;0<$-Z;)K=Vc(K),$--;for(;Z--;){if(F===K||K!==null&&F===K.alternate)break t;F=Vc(F),K=Vc(K)}F=null}else F=null;L!==null&&zb(w,T,L,F,!1),U!==null&&ce!==null&&zb(w,ce,U,F,!0)}}e:{if(T=C?nh(C):window,L=T.nodeName&&T.nodeName.toLowerCase(),L==="select"||L==="input"&&T.type==="file")var q=FM;else if(Eb(T))if(KE)q=NM;else{q=DM;var V=jM}else(L=T.nodeName)&&L.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(q=BM);if(q&&(q=q(e,C))){qE(w,q,i,A);break e}V&&V(e,T,C),e==="focusout"&&(V=T._wrapperState)&&V.controlled&&T.type==="number"&&dv(T,"number",T.value)}switch(V=C?nh(C):window,e){case"focusin":(Eb(V)||V.contentEditable==="true")&&(eh=V,Ev=C,Qd=null);break;case"focusout":Qd=Ev=eh=null;break;case"mousedown":Tv=!0;break;case"contextmenu":case"mouseup":case"dragend":Tv=!1,Pb(w,i,A);break;case"selectionchange":if(VM)break;case"keydown":case"keyup":Pb(w,i,A)}var E;if(l1)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Qc?ZE(e,i)&&(j="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(j="onCompositionStart");j&&(WE&&i.locale!=="ko"&&(Qc||j!=="onCompositionStart"?j==="onCompositionEnd"&&Qc&&(E=HE()):(Hl=A,o1="value"in Hl?Hl.value:Hl.textContent,Qc=!0)),V=Gm(C,j),0<V.length&&(j=new xb(j,e,null,i,A),w.push({event:j,listeners:V}),E?j.data=E:(E=XE(i),E!==null&&(j.data=E)))),(E=MM?zM(e,i):RM(e,i))&&(C=Gm(C,"onBeforeInput"),0<C.length&&(A=new xb("onBeforeInput","beforeinput",null,i,A),w.push({event:A,listeners:C}),A.data=E))}sT(w,t)})}function wf(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Gm(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,p=c.stateNode;c.tag===5&&p!==null&&(c=p,p=pf(e,i),p!=null&&a.unshift(wf(e,p,c)),p=pf(e,t),p!=null&&a.push(wf(e,p,c))),e=e.return}return a}function Vc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zb(e,t,i,a,c){for(var p=t._reactName,d=[];i!==null&&i!==a;){var u=i,b=u.alternate,C=u.stateNode;if(b!==null&&b===a)break;u.tag===5&&C!==null&&(u=C,c?(b=pf(i,p),b!=null&&d.unshift(wf(i,b,u))):c||(b=pf(i,p),b!=null&&d.push(wf(i,b,u)))),i=i.return}d.length!==0&&e.push({event:t,listeners:d})}var ZM=/\r\n?/g,XM=/\u0000|\uFFFD/g;function Rb(e){return(typeof e=="string"?e:""+e).replace(ZM,`
`).replace(XM,"")}function Vp(e,t,i){if(t=Rb(t),Rb(e)!==t&&i)throw Error(Pt(425))}function Hm(){}var Cv=null,Iv=null;function Av(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pv=typeof setTimeout=="function"?setTimeout:void 0,qM=typeof clearTimeout=="function"?clearTimeout:void 0,Ob=typeof Promise=="function"?Promise:void 0,KM=typeof queueMicrotask=="function"?queueMicrotask:typeof Ob<"u"?function(e){return Ob.resolve(null).then(e).catch(YM)}:Pv;function YM(e){setTimeout(function(){throw e})}function g0(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),yf(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);yf(t)}function Yl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Lb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Dh=Math.random().toString(36).slice(2),ea="__reactFiber$"+Dh,bf="__reactProps$"+Dh,Ha="__reactContainer$"+Dh,kv="__reactEvents$"+Dh,JM="__reactListeners$"+Dh,QM="__reactHandles$"+Dh;function Bu(e){var t=e[ea];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ha]||i[ea]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Lb(e);e!==null;){if(i=e[ea])return i;e=Lb(e)}return t}e=i,i=e.parentNode}return null}function Vf(e){return e=e[ea]||e[Ha],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pt(33))}function Vg(e){return e[bf]||null}var Mv=[],rh=-1;function uu(e){return{current:e}}function _r(e){0>rh||(e.current=Mv[rh],Mv[rh]=null,rh--)}function pr(e,t){rh++,Mv[rh]=e.current,e.current=t}var ru={},Wi=uu(ru),wo=uu(!1),Wu=ru;function Eh(e,t){var i=e.type.contextTypes;if(!i)return ru;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},p;for(p in i)c[p]=t[p];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function bo(e){return e=e.childContextTypes,e!=null}function Wm(){_r(wo),_r(Wi)}function Fb(e,t,i){if(Wi.current!==ru)throw Error(Pt(168));pr(Wi,t),pr(wo,i)}function lT(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(Pt(108,jk(e)||"Unknown",c));return Mr({},i,a)}function Zm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ru,Wu=Wi.current,pr(Wi,e),pr(wo,wo.current),!0}function jb(e,t,i){var a=e.stateNode;if(!a)throw Error(Pt(169));i?(e=lT(e,t,Wu),a.__reactInternalMemoizedMergedChildContext=e,_r(wo),_r(Wi),pr(Wi,e)):_r(wo),pr(wo,i)}var Da=null,Gg=!1,y0=!1;function uT(e){Da===null?Da=[e]:Da.push(e)}function e3(e){Gg=!0,uT(e)}function cu(){if(!y0&&Da!==null){y0=!0;var e=0,t=Jn;try{var i=Da;for(Jn=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Da=null,Gg=!1}catch(c){throw Da!==null&&(Da=Da.slice(e+1)),OE(t1,cu),c}finally{Jn=t,y0=!1}}return null}var ih=[],oh=0,Xm=null,qm=0,ss=[],as=0,Zu=null,Ua=1,$a="";function Fu(e,t){ih[oh++]=qm,ih[oh++]=Xm,Xm=e,qm=t}function cT(e,t,i){ss[as++]=Ua,ss[as++]=$a,ss[as++]=Zu,Zu=e;var a=Ua;e=$a;var c=32-Os(a)-1;a&=~(1<<c),i+=1;var p=32-Os(t)+c;if(30<p){var d=c-c%5;p=(a&(1<<d)-1).toString(32),a>>=d,c-=d,Ua=1<<32-Os(t)+c|i<<c|a,$a=p+e}else Ua=1<<p|i<<c|a,$a=e}function c1(e){e.return!==null&&(Fu(e,1),cT(e,1,0))}function h1(e){for(;e===Xm;)Xm=ih[--oh],ih[oh]=null,qm=ih[--oh],ih[oh]=null;for(;e===Zu;)Zu=ss[--as],ss[as]=null,$a=ss[--as],ss[as]=null,Ua=ss[--as],ss[as]=null}var $o=null,Uo=null,Sr=!1,Ps=null;function hT(e,t){var i=us(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Db(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$o=e,Uo=Yl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$o=e,Uo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Zu!==null?{id:Ua,overflow:$a}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=us(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,$o=e,Uo=null,!0):!1;default:return!1}}function zv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rv(e){if(Sr){var t=Uo;if(t){var i=t;if(!Db(e,t)){if(zv(e))throw Error(Pt(418));t=Yl(i.nextSibling);var a=$o;t&&Db(e,t)?hT(a,i):(e.flags=e.flags&-4097|2,Sr=!1,$o=e)}}else{if(zv(e))throw Error(Pt(418));e.flags=e.flags&-4097|2,Sr=!1,$o=e}}}function Bb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$o=e}function Gp(e){if(e!==$o)return!1;if(!Sr)return Bb(e),Sr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Av(e.type,e.memoizedProps)),t&&(t=Uo)){if(zv(e))throw dT(),Error(Pt(418));for(;t;)hT(e,t),t=Yl(t.nextSibling)}if(Bb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Uo=Yl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Uo=null}}else Uo=$o?Yl(e.stateNode.nextSibling):null;return!0}function dT(){for(var e=Uo;e;)e=Yl(e.nextSibling)}function Th(){Uo=$o=null,Sr=!1}function d1(e){Ps===null?Ps=[e]:Ps.push(e)}var t3=Ja.ReactCurrentBatchConfig;function Is(e,t){if(e&&e.defaultProps){t=Mr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Km=uu(null),Ym=null,sh=null,f1=null;function p1(){f1=sh=Ym=null}function m1(e){var t=Km.current;_r(Km),e._currentValue=t}function Ov(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function vh(e,t){Ym=e,f1=sh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xo=!0),e.firstContext=null)}function ds(e){var t=e._currentValue;if(f1!==e)if(e={context:e,memoizedValue:t,next:null},sh===null){if(Ym===null)throw Error(Pt(308));sh=e,Ym.dependencies={lanes:0,firstContext:e}}else sh=sh.next=e;return t}var Nu=null;function g1(e){Nu===null?Nu=[e]:Nu.push(e)}function fT(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,g1(t)):(i.next=c.next,c.next=i),t.interleaved=i,Wa(e,a)}function Wa(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Nl=!1;function y1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Va(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Jl(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Gn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Wa(e,i)}return c=a.interleaved,c===null?(t.next=t,g1(a)):(t.next=c.next,c.next=t),a.interleaved=t,Wa(e,i)}function wm(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,n1(e,i)}}function Nb(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?c=p=d:p=p.next=d,i=i.next}while(i!==null);p===null?c=p=t:p=p.next=t}else c=p=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:p,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Jm(e,t,i,a){var c=e.updateQueue;Nl=!1;var p=c.firstBaseUpdate,d=c.lastBaseUpdate,u=c.shared.pending;if(u!==null){c.shared.pending=null;var b=u,C=b.next;b.next=null,d===null?p=C:d.next=C,d=b;var A=e.alternate;A!==null&&(A=A.updateQueue,u=A.lastBaseUpdate,u!==d&&(u===null?A.firstBaseUpdate=C:u.next=C,A.lastBaseUpdate=b))}if(p!==null){var w=c.baseState;d=0,A=C=b=null,u=p;do{var T=u.lane,L=u.eventTime;if((a&T)===T){A!==null&&(A=A.next={eventTime:L,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var U=e,F=u;switch(T=t,L=i,F.tag){case 1:if(U=F.payload,typeof U=="function"){w=U.call(L,w,T);break e}w=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=F.payload,T=typeof U=="function"?U.call(L,w,T):U,T==null)break e;w=Mr({},w,T);break e;case 2:Nl=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,T=c.effects,T===null?c.effects=[u]:T.push(u))}else L={eventTime:L,lane:T,tag:u.tag,payload:u.payload,callback:u.callback,next:null},A===null?(C=A=L,b=w):A=A.next=L,d|=T;if(u=u.next,u===null){if(u=c.shared.pending,u===null)break;T=u,u=T.next,T.next=null,c.lastBaseUpdate=T,c.shared.pending=null}}while(!0);if(A===null&&(b=w),c.baseState=b,c.firstBaseUpdate=C,c.lastBaseUpdate=A,t=c.shared.interleaved,t!==null){c=t;do d|=c.lane,c=c.next;while(c!==t)}else p===null&&(c.shared.lanes=0);qu|=d,e.lanes=d,e.memoizedState=w}}function Ub(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(Pt(191,c));c.call(a)}}}var mT=new fE.Component().refs;function Lv(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Mr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Hg={isMounted:function(e){return(e=e._reactInternals)?nc(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=oo(),c=eu(e),p=Va(a,c);p.payload=t,i!=null&&(p.callback=i),t=Jl(e,p,c),t!==null&&(Ls(t,e,c,a),wm(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=oo(),c=eu(e),p=Va(a,c);p.tag=1,p.payload=t,i!=null&&(p.callback=i),t=Jl(e,p,c),t!==null&&(Ls(t,e,c,a),wm(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=oo(),a=eu(e),c=Va(i,a);c.tag=2,t!=null&&(c.callback=t),t=Jl(e,c,a),t!==null&&(Ls(t,e,a,i),wm(t,e,a))}};function $b(e,t,i,a,c,p,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,p,d):t.prototype&&t.prototype.isPureReactComponent?!_f(i,a)||!_f(c,p):!0}function gT(e,t,i){var a=!1,c=ru,p=t.contextType;return typeof p=="object"&&p!==null?p=ds(p):(c=bo(t)?Wu:Wi.current,a=t.contextTypes,p=(a=a!=null)?Eh(e,c):ru),t=new t(i,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hg,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=p),t}function Vb(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&Hg.enqueueReplaceState(t,t.state,null)}function Fv(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=mT,y1(e);var p=t.contextType;typeof p=="object"&&p!==null?c.context=ds(p):(p=bo(t)?Wu:Wi.current,c.context=Eh(e,p)),c.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(Lv(e,t,p,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Hg.enqueueReplaceState(c,c.state,null),Jm(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Rd(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Pt(309));var a=i.stateNode}if(!a)throw Error(Pt(147,e));var c=a,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(d){var u=c.refs;u===mT&&(u=c.refs={}),d===null?delete u[p]:u[p]=d},t._stringRef=p,t)}if(typeof e!="string")throw Error(Pt(284));if(!i._owner)throw Error(Pt(290,e))}return e}function Hp(e,t){throw e=Object.prototype.toString.call(t),Error(Pt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gb(e){var t=e._init;return t(e._payload)}function yT(e){function t(K,Z){if(e){var $=K.deletions;$===null?(K.deletions=[Z],K.flags|=16):$.push(Z)}}function i(K,Z){if(!e)return null;for(;Z!==null;)t(K,Z),Z=Z.sibling;return null}function a(K,Z){for(K=new Map;Z!==null;)Z.key!==null?K.set(Z.key,Z):K.set(Z.index,Z),Z=Z.sibling;return K}function c(K,Z){return K=tu(K,Z),K.index=0,K.sibling=null,K}function p(K,Z,$){return K.index=$,e?($=K.alternate,$!==null?($=$.index,$<Z?(K.flags|=2,Z):$):(K.flags|=2,Z)):(K.flags|=1048576,Z)}function d(K){return e&&K.alternate===null&&(K.flags|=2),K}function u(K,Z,$,oe){return Z===null||Z.tag!==6?(Z=E0($,K.mode,oe),Z.return=K,Z):(Z=c(Z,$),Z.return=K,Z)}function b(K,Z,$,oe){var q=$.type;return q===Jc?A(K,Z,$.props.children,oe,$.key):Z!==null&&(Z.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Bl&&Gb(q)===Z.type)?(oe=c(Z,$.props),oe.ref=Rd(K,Z,$),oe.return=K,oe):(oe=Im($.type,$.key,$.props,null,K.mode,oe),oe.ref=Rd(K,Z,$),oe.return=K,oe)}function C(K,Z,$,oe){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==$.containerInfo||Z.stateNode.implementation!==$.implementation?(Z=T0($,K.mode,oe),Z.return=K,Z):(Z=c(Z,$.children||[]),Z.return=K,Z)}function A(K,Z,$,oe,q){return Z===null||Z.tag!==7?(Z=Hu($,K.mode,oe,q),Z.return=K,Z):(Z=c(Z,$),Z.return=K,Z)}function w(K,Z,$){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=E0(""+Z,K.mode,$),Z.return=K,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Op:return $=Im(Z.type,Z.key,Z.props,null,K.mode,$),$.ref=Rd(K,null,Z),$.return=K,$;case Yc:return Z=T0(Z,K.mode,$),Z.return=K,Z;case Bl:var oe=Z._init;return w(K,oe(Z._payload),$)}if(Dd(Z)||Ad(Z))return Z=Hu(Z,K.mode,$,null),Z.return=K,Z;Hp(K,Z)}return null}function T(K,Z,$,oe){var q=Z!==null?Z.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return q!==null?null:u(K,Z,""+$,oe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Op:return $.key===q?b(K,Z,$,oe):null;case Yc:return $.key===q?C(K,Z,$,oe):null;case Bl:return q=$._init,T(K,Z,q($._payload),oe)}if(Dd($)||Ad($))return q!==null?null:A(K,Z,$,oe,null);Hp(K,$)}return null}function L(K,Z,$,oe,q){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return K=K.get($)||null,u(Z,K,""+oe,q);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case Op:return K=K.get(oe.key===null?$:oe.key)||null,b(Z,K,oe,q);case Yc:return K=K.get(oe.key===null?$:oe.key)||null,C(Z,K,oe,q);case Bl:var V=oe._init;return L(K,Z,$,V(oe._payload),q)}if(Dd(oe)||Ad(oe))return K=K.get($)||null,A(Z,K,oe,q,null);Hp(Z,oe)}return null}function U(K,Z,$,oe){for(var q=null,V=null,E=Z,j=Z=0,D=null;E!==null&&j<$.length;j++){E.index>j?(D=E,E=null):D=E.sibling;var ee=T(K,E,$[j],oe);if(ee===null){E===null&&(E=D);break}e&&E&&ee.alternate===null&&t(K,E),Z=p(ee,Z,j),V===null?q=ee:V.sibling=ee,V=ee,E=D}if(j===$.length)return i(K,E),Sr&&Fu(K,j),q;if(E===null){for(;j<$.length;j++)E=w(K,$[j],oe),E!==null&&(Z=p(E,Z,j),V===null?q=E:V.sibling=E,V=E);return Sr&&Fu(K,j),q}for(E=a(K,E);j<$.length;j++)D=L(E,K,j,$[j],oe),D!==null&&(e&&D.alternate!==null&&E.delete(D.key===null?j:D.key),Z=p(D,Z,j),V===null?q=D:V.sibling=D,V=D);return e&&E.forEach(function(W){return t(K,W)}),Sr&&Fu(K,j),q}function F(K,Z,$,oe){var q=Ad($);if(typeof q!="function")throw Error(Pt(150));if($=q.call($),$==null)throw Error(Pt(151));for(var V=q=null,E=Z,j=Z=0,D=null,ee=$.next();E!==null&&!ee.done;j++,ee=$.next()){E.index>j?(D=E,E=null):D=E.sibling;var W=T(K,E,ee.value,oe);if(W===null){E===null&&(E=D);break}e&&E&&W.alternate===null&&t(K,E),Z=p(W,Z,j),V===null?q=W:V.sibling=W,V=W,E=D}if(ee.done)return i(K,E),Sr&&Fu(K,j),q;if(E===null){for(;!ee.done;j++,ee=$.next())ee=w(K,ee.value,oe),ee!==null&&(Z=p(ee,Z,j),V===null?q=ee:V.sibling=ee,V=ee);return Sr&&Fu(K,j),q}for(E=a(K,E);!ee.done;j++,ee=$.next())ee=L(E,K,j,ee.value,oe),ee!==null&&(e&&ee.alternate!==null&&E.delete(ee.key===null?j:ee.key),Z=p(ee,Z,j),V===null?q=ee:V.sibling=ee,V=ee);return e&&E.forEach(function(ve){return t(K,ve)}),Sr&&Fu(K,j),q}function ce(K,Z,$,oe){if(typeof $=="object"&&$!==null&&$.type===Jc&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case Op:e:{for(var q=$.key,V=Z;V!==null;){if(V.key===q){if(q=$.type,q===Jc){if(V.tag===7){i(K,V.sibling),Z=c(V,$.props.children),Z.return=K,K=Z;break e}}else if(V.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Bl&&Gb(q)===V.type){i(K,V.sibling),Z=c(V,$.props),Z.ref=Rd(K,V,$),Z.return=K,K=Z;break e}i(K,V);break}else t(K,V);V=V.sibling}$.type===Jc?(Z=Hu($.props.children,K.mode,oe,$.key),Z.return=K,K=Z):(oe=Im($.type,$.key,$.props,null,K.mode,oe),oe.ref=Rd(K,Z,$),oe.return=K,K=oe)}return d(K);case Yc:e:{for(V=$.key;Z!==null;){if(Z.key===V)if(Z.tag===4&&Z.stateNode.containerInfo===$.containerInfo&&Z.stateNode.implementation===$.implementation){i(K,Z.sibling),Z=c(Z,$.children||[]),Z.return=K,K=Z;break e}else{i(K,Z);break}else t(K,Z);Z=Z.sibling}Z=T0($,K.mode,oe),Z.return=K,K=Z}return d(K);case Bl:return V=$._init,ce(K,Z,V($._payload),oe)}if(Dd($))return U(K,Z,$,oe);if(Ad($))return F(K,Z,$,oe);Hp(K,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,Z!==null&&Z.tag===6?(i(K,Z.sibling),Z=c(Z,$),Z.return=K,K=Z):(i(K,Z),Z=E0($,K.mode,oe),Z.return=K,K=Z),d(K)):i(K,Z)}return ce}var Ch=yT(!0),vT=yT(!1),Gf={},sa=uu(Gf),Sf=uu(Gf),Ef=uu(Gf);function Uu(e){if(e===Gf)throw Error(Pt(174));return e}function v1(e,t){switch(pr(Ef,t),pr(Sf,e),pr(sa,Gf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pv(t,e)}_r(sa),pr(sa,t)}function Ih(){_r(sa),_r(Sf),_r(Ef)}function _T(e){Uu(Ef.current);var t=Uu(sa.current),i=pv(t,e.type);t!==i&&(pr(Sf,e),pr(sa,i))}function _1(e){Sf.current===e&&(_r(sa),_r(Sf))}var Ar=uu(0);function Qm(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var v0=[];function x1(){for(var e=0;e<v0.length;e++)v0[e]._workInProgressVersionPrimary=null;v0.length=0}var bm=Ja.ReactCurrentDispatcher,_0=Ja.ReactCurrentBatchConfig,Xu=0,kr=null,oi=null,mi=null,eg=!1,ef=!1,Tf=0,n3=0;function Ui(){throw Error(Pt(321))}function w1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Fs(e[i],t[i]))return!1;return!0}function b1(e,t,i,a,c,p){if(Xu=p,kr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bm.current=e===null||e.memoizedState===null?s3:a3,e=i(a,c),ef){p=0;do{if(ef=!1,Tf=0,25<=p)throw Error(Pt(301));p+=1,mi=oi=null,t.updateQueue=null,bm.current=l3,e=i(a,c)}while(ef)}if(bm.current=tg,t=oi!==null&&oi.next!==null,Xu=0,mi=oi=kr=null,eg=!1,t)throw Error(Pt(300));return e}function S1(){var e=Tf!==0;return Tf=0,e}function Qs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?kr.memoizedState=mi=e:mi=mi.next=e,mi}function fs(){if(oi===null){var e=kr.alternate;e=e!==null?e.memoizedState:null}else e=oi.next;var t=mi===null?kr.memoizedState:mi.next;if(t!==null)mi=t,oi=e;else{if(e===null)throw Error(Pt(310));oi=e,e={memoizedState:oi.memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},mi===null?kr.memoizedState=mi=e:mi=mi.next=e}return mi}function Cf(e,t){return typeof t=="function"?t(e):t}function x0(e){var t=fs(),i=t.queue;if(i===null)throw Error(Pt(311));i.lastRenderedReducer=e;var a=oi,c=a.baseQueue,p=i.pending;if(p!==null){if(c!==null){var d=c.next;c.next=p.next,p.next=d}a.baseQueue=c=p,i.pending=null}if(c!==null){p=c.next,a=a.baseState;var u=d=null,b=null,C=p;do{var A=C.lane;if((Xu&A)===A)b!==null&&(b=b.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),a=C.hasEagerState?C.eagerState:e(a,C.action);else{var w={lane:A,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};b===null?(u=b=w,d=a):b=b.next=w,kr.lanes|=A,qu|=A}C=C.next}while(C!==null&&C!==p);b===null?d=a:b.next=u,Fs(a,t.memoizedState)||(xo=!0),t.memoizedState=a,t.baseState=d,t.baseQueue=b,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do p=c.lane,kr.lanes|=p,qu|=p,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function w0(e){var t=fs(),i=t.queue;if(i===null)throw Error(Pt(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,p=t.memoizedState;if(c!==null){i.pending=null;var d=c=c.next;do p=e(p,d.action),d=d.next;while(d!==c);Fs(p,t.memoizedState)||(xo=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),i.lastRenderedState=p}return[p,a]}function xT(){}function wT(e,t){var i=kr,a=fs(),c=t(),p=!Fs(a.memoizedState,c);if(p&&(a.memoizedState=c,xo=!0),a=a.queue,E1(ET.bind(null,i,a,e),[e]),a.getSnapshot!==t||p||mi!==null&&mi.memoizedState.tag&1){if(i.flags|=2048,If(9,ST.bind(null,i,a,c,t),void 0,null),gi===null)throw Error(Pt(349));Xu&30||bT(i,t,c)}return c}function bT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=kr.updateQueue,t===null?(t={lastEffect:null,stores:null},kr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function ST(e,t,i,a){t.value=i,t.getSnapshot=a,TT(t)&&CT(e)}function ET(e,t,i){return i(function(){TT(t)&&CT(e)})}function TT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Fs(e,i)}catch{return!0}}function CT(e){var t=Wa(e,1);t!==null&&Ls(t,e,1,-1)}function Hb(e){var t=Qs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cf,lastRenderedState:e},t.queue=e,e=e.dispatch=o3.bind(null,kr,e),[t.memoizedState,e]}function If(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=kr.updateQueue,t===null?(t={lastEffect:null,stores:null},kr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function IT(){return fs().memoizedState}function Sm(e,t,i,a){var c=Qs();kr.flags|=e,c.memoizedState=If(1|t,i,void 0,a===void 0?null:a)}function Wg(e,t,i,a){var c=fs();a=a===void 0?null:a;var p=void 0;if(oi!==null){var d=oi.memoizedState;if(p=d.destroy,a!==null&&w1(a,d.deps)){c.memoizedState=If(t,i,p,a);return}}kr.flags|=e,c.memoizedState=If(1|t,i,p,a)}function Wb(e,t){return Sm(8390656,8,e,t)}function E1(e,t){return Wg(2048,8,e,t)}function AT(e,t){return Wg(4,2,e,t)}function PT(e,t){return Wg(4,4,e,t)}function kT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function MT(e,t,i){return i=i!=null?i.concat([e]):null,Wg(4,4,kT.bind(null,t,e),i)}function T1(){}function zT(e,t){var i=fs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&w1(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function RT(e,t){var i=fs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&w1(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function OT(e,t,i){return Xu&21?(Fs(i,t)||(i=jE(),kr.lanes|=i,qu|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=i)}function r3(e,t){var i=Jn;Jn=i!==0&&4>i?i:4,e(!0);var a=_0.transition;_0.transition={};try{e(!1),t()}finally{Jn=i,_0.transition=a}}function LT(){return fs().memoizedState}function i3(e,t,i){var a=eu(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},FT(e))jT(t,i);else if(i=fT(e,t,i,a),i!==null){var c=oo();Ls(i,e,a,c),DT(i,t,a)}}function o3(e,t,i){var a=eu(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(FT(e))jT(t,c);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var d=t.lastRenderedState,u=p(d,i);if(c.hasEagerState=!0,c.eagerState=u,Fs(u,d)){var b=t.interleaved;b===null?(c.next=c,g1(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}i=fT(e,t,c,a),i!==null&&(c=oo(),Ls(i,e,a,c),DT(i,t,a))}}function FT(e){var t=e.alternate;return e===kr||t!==null&&t===kr}function jT(e,t){ef=eg=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function DT(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,n1(e,i)}}var tg={readContext:ds,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useInsertionEffect:Ui,useLayoutEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useMutableSource:Ui,useSyncExternalStore:Ui,useId:Ui,unstable_isNewReconciler:!1},s3={readContext:ds,useCallback:function(e,t){return Qs().memoizedState=[e,t===void 0?null:t],e},useContext:ds,useEffect:Wb,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Sm(4194308,4,kT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Sm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Sm(4,2,e,t)},useMemo:function(e,t){var i=Qs();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=Qs();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=i3.bind(null,kr,e),[a.memoizedState,e]},useRef:function(e){var t=Qs();return e={current:e},t.memoizedState=e},useState:Hb,useDebugValue:T1,useDeferredValue:function(e){return Qs().memoizedState=e},useTransition:function(){var e=Hb(!1),t=e[0];return e=r3.bind(null,e[1]),Qs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=kr,c=Qs();if(Sr){if(i===void 0)throw Error(Pt(407));i=i()}else{if(i=t(),gi===null)throw Error(Pt(349));Xu&30||bT(a,t,i)}c.memoizedState=i;var p={value:i,getSnapshot:t};return c.queue=p,Wb(ET.bind(null,a,p,e),[e]),a.flags|=2048,If(9,ST.bind(null,a,p,i,t),void 0,null),i},useId:function(){var e=Qs(),t=gi.identifierPrefix;if(Sr){var i=$a,a=Ua;i=(a&~(1<<32-Os(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=Tf++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=n3++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},a3={readContext:ds,useCallback:zT,useContext:ds,useEffect:E1,useImperativeHandle:MT,useInsertionEffect:AT,useLayoutEffect:PT,useMemo:RT,useReducer:x0,useRef:IT,useState:function(){return x0(Cf)},useDebugValue:T1,useDeferredValue:function(e){var t=fs();return OT(t,oi.memoizedState,e)},useTransition:function(){var e=x0(Cf)[0],t=fs().memoizedState;return[e,t]},useMutableSource:xT,useSyncExternalStore:wT,useId:LT,unstable_isNewReconciler:!1},l3={readContext:ds,useCallback:zT,useContext:ds,useEffect:E1,useImperativeHandle:MT,useInsertionEffect:AT,useLayoutEffect:PT,useMemo:RT,useReducer:w0,useRef:IT,useState:function(){return w0(Cf)},useDebugValue:T1,useDeferredValue:function(e){var t=fs();return oi===null?t.memoizedState=e:OT(t,oi.memoizedState,e)},useTransition:function(){var e=w0(Cf)[0],t=fs().memoizedState;return[e,t]},useMutableSource:xT,useSyncExternalStore:wT,useId:LT,unstable_isNewReconciler:!1};function Ah(e,t){try{var i="",a=t;do i+=Fk(a),a=a.return;while(a);var c=i}catch(p){c=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:c,digest:null}}function b0(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function jv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var u3=typeof WeakMap=="function"?WeakMap:Map;function BT(e,t,i){i=Va(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){rg||(rg=!0,Zv=a),jv(e,t)},i}function NT(e,t,i){i=Va(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){jv(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){jv(e,t),typeof a!="function"&&(Ql===null?Ql=new Set([this]):Ql.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),i}function Zb(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new u3;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=S3.bind(null,e,t,i),t.then(e,e))}function Xb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qb(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Va(-1,1),t.tag=2,Jl(i,t,1))),i.lanes|=1),e)}var c3=Ja.ReactCurrentOwner,xo=!1;function to(e,t,i,a){t.child=e===null?vT(t,null,i,a):Ch(t,e.child,i,a)}function Kb(e,t,i,a,c){i=i.render;var p=t.ref;return vh(t,c),a=b1(e,t,i,a,p,c),i=S1(),e!==null&&!xo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Za(e,t,c)):(Sr&&i&&c1(t),t.flags|=1,to(e,t,a,c),t.child)}function Yb(e,t,i,a,c){if(e===null){var p=i.type;return typeof p=="function"&&!R1(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=p,UT(e,t,p,a,c)):(e=Im(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,!(e.lanes&c)){var d=p.memoizedProps;if(i=i.compare,i=i!==null?i:_f,i(d,a)&&e.ref===t.ref)return Za(e,t,c)}return t.flags|=1,e=tu(p,a),e.ref=t.ref,e.return=t,t.child=e}function UT(e,t,i,a,c){if(e!==null){var p=e.memoizedProps;if(_f(p,a)&&e.ref===t.ref)if(xo=!1,t.pendingProps=a=p,(e.lanes&c)!==0)e.flags&131072&&(xo=!0);else return t.lanes=e.lanes,Za(e,t,c)}return Dv(e,t,i,a,c)}function $T(e,t,i){var a=t.pendingProps,c=a.children,p=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pr(lh,jo),jo|=i;else{if(!(i&1073741824))return e=p!==null?p.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pr(lh,jo),jo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=p!==null?p.baseLanes:i,pr(lh,jo),jo|=a}else p!==null?(a=p.baseLanes|i,t.memoizedState=null):a=i,pr(lh,jo),jo|=a;return to(e,t,c,i),t.child}function VT(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Dv(e,t,i,a,c){var p=bo(i)?Wu:Wi.current;return p=Eh(t,p),vh(t,c),i=b1(e,t,i,a,p,c),a=S1(),e!==null&&!xo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Za(e,t,c)):(Sr&&a&&c1(t),t.flags|=1,to(e,t,i,c),t.child)}function Jb(e,t,i,a,c){if(bo(i)){var p=!0;Zm(t)}else p=!1;if(vh(t,c),t.stateNode===null)Em(e,t),gT(t,i,a),Fv(t,i,a,c),a=!0;else if(e===null){var d=t.stateNode,u=t.memoizedProps;d.props=u;var b=d.context,C=i.contextType;typeof C=="object"&&C!==null?C=ds(C):(C=bo(i)?Wu:Wi.current,C=Eh(t,C));var A=i.getDerivedStateFromProps,w=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function";w||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==a||b!==C)&&Vb(t,d,a,C),Nl=!1;var T=t.memoizedState;d.state=T,Jm(t,a,d,c),b=t.memoizedState,u!==a||T!==b||wo.current||Nl?(typeof A=="function"&&(Lv(t,i,A,a),b=t.memoizedState),(u=Nl||$b(t,i,u,a,T,b,C))?(w||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),d.props=a,d.state=b,d.context=C,a=u):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{d=t.stateNode,pT(e,t),u=t.memoizedProps,C=t.type===t.elementType?u:Is(t.type,u),d.props=C,w=t.pendingProps,T=d.context,b=i.contextType,typeof b=="object"&&b!==null?b=ds(b):(b=bo(i)?Wu:Wi.current,b=Eh(t,b));var L=i.getDerivedStateFromProps;(A=typeof L=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==w||T!==b)&&Vb(t,d,a,b),Nl=!1,T=t.memoizedState,d.state=T,Jm(t,a,d,c);var U=t.memoizedState;u!==w||T!==U||wo.current||Nl?(typeof L=="function"&&(Lv(t,i,L,a),U=t.memoizedState),(C=Nl||$b(t,i,C,a,T,U,b)||!1)?(A||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,U,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,U,b)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=U),d.props=a,d.state=U,d.context=b,a=C):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),a=!1)}return Bv(e,t,i,a,p,c)}function Bv(e,t,i,a,c,p){VT(e,t);var d=(t.flags&128)!==0;if(!a&&!d)return c&&jb(t,i,!1),Za(e,t,p);a=t.stateNode,c3.current=t;var u=d&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&d?(t.child=Ch(t,e.child,null,p),t.child=Ch(t,null,u,p)):to(e,t,u,p),t.memoizedState=a.state,c&&jb(t,i,!0),t.child}function GT(e){var t=e.stateNode;t.pendingContext?Fb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fb(e,t.context,!1),v1(e,t.containerInfo)}function Qb(e,t,i,a,c){return Th(),d1(c),t.flags|=256,to(e,t,i,a),t.child}var Nv={dehydrated:null,treeContext:null,retryLane:0};function Uv(e){return{baseLanes:e,cachePool:null,transitions:null}}function HT(e,t,i){var a=t.pendingProps,c=Ar.current,p=!1,d=(t.flags&128)!==0,u;if((u=d)||(u=e!==null&&e.memoizedState===null?!1:(c&2)!==0),u?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),pr(Ar,c&1),e===null)return Rv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=a.children,e=a.fallback,p?(a=t.mode,p=t.child,d={mode:"hidden",children:d},!(a&1)&&p!==null?(p.childLanes=0,p.pendingProps=d):p=qg(d,a,0,null),e=Hu(e,a,i,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=Uv(i),t.memoizedState=Nv,e):C1(t,d));if(c=e.memoizedState,c!==null&&(u=c.dehydrated,u!==null))return h3(e,t,d,a,u,c,i);if(p){p=a.fallback,d=t.mode,c=e.child,u=c.sibling;var b={mode:"hidden",children:a.children};return!(d&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=tu(c,b),a.subtreeFlags=c.subtreeFlags&14680064),u!==null?p=tu(u,p):(p=Hu(p,d,i,null),p.flags|=2),p.return=t,a.return=t,a.sibling=p,t.child=a,a=p,p=t.child,d=e.child.memoizedState,d=d===null?Uv(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},p.memoizedState=d,p.childLanes=e.childLanes&~i,t.memoizedState=Nv,a}return p=e.child,e=p.sibling,a=tu(p,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function C1(e,t){return t=qg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wp(e,t,i,a){return a!==null&&d1(a),Ch(t,e.child,null,i),e=C1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function h3(e,t,i,a,c,p,d){if(i)return t.flags&256?(t.flags&=-257,a=b0(Error(Pt(422))),Wp(e,t,d,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=a.fallback,c=t.mode,a=qg({mode:"visible",children:a.children},c,0,null),p=Hu(p,c,d,null),p.flags|=2,a.return=t,p.return=t,a.sibling=p,t.child=a,t.mode&1&&Ch(t,e.child,null,d),t.child.memoizedState=Uv(d),t.memoizedState=Nv,p);if(!(t.mode&1))return Wp(e,t,d,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var u=a.dgst;return a=u,p=Error(Pt(419)),a=b0(p,a,void 0),Wp(e,t,d,a)}if(u=(d&e.childLanes)!==0,xo||u){if(a=gi,a!==null){switch(d&-d){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|d)?0:c,c!==0&&c!==p.retryLane&&(p.retryLane=c,Wa(e,c),Ls(a,e,c,-1))}return z1(),a=b0(Error(Pt(421))),Wp(e,t,d,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=E3.bind(null,e),c._reactRetry=t,null):(e=p.treeContext,Uo=Yl(c.nextSibling),$o=t,Sr=!0,Ps=null,e!==null&&(ss[as++]=Ua,ss[as++]=$a,ss[as++]=Zu,Ua=e.id,$a=e.overflow,Zu=t),t=C1(t,a.children),t.flags|=4096,t)}function e2(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Ov(e.return,t,i)}function S0(e,t,i,a,c){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=a,p.tail=i,p.tailMode=c)}function WT(e,t,i){var a=t.pendingProps,c=a.revealOrder,p=a.tail;if(to(e,t,a.children,i),a=Ar.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&e2(e,i,t);else if(e.tag===19)e2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(pr(Ar,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Qm(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),S0(t,!1,c,i,p);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Qm(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}S0(t,!0,i,null,p);break;case"together":S0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Em(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Za(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),qu|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pt(153));if(t.child!==null){for(e=t.child,i=tu(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=tu(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function d3(e,t,i){switch(t.tag){case 3:GT(t),Th();break;case 5:_T(t);break;case 1:bo(t.type)&&Zm(t);break;case 4:v1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;pr(Km,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(pr(Ar,Ar.current&1),t.flags|=128,null):i&t.child.childLanes?HT(e,t,i):(pr(Ar,Ar.current&1),e=Za(e,t,i),e!==null?e.sibling:null);pr(Ar,Ar.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return WT(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),pr(Ar,Ar.current),a)break;return null;case 22:case 23:return t.lanes=0,$T(e,t,i)}return Za(e,t,i)}var ZT,$v,XT,qT;ZT=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};$v=function(){};XT=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Uu(sa.current);var p=null;switch(i){case"input":c=cv(e,c),a=cv(e,a),p=[];break;case"select":c=Mr({},c,{value:void 0}),a=Mr({},a,{value:void 0}),p=[];break;case"textarea":c=fv(e,c),a=fv(e,a),p=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Hm)}mv(i,a);var d;i=null;for(C in c)if(!a.hasOwnProperty(C)&&c.hasOwnProperty(C)&&c[C]!=null)if(C==="style"){var u=c[C];for(d in u)u.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(df.hasOwnProperty(C)?p||(p=[]):(p=p||[]).push(C,null));for(C in a){var b=a[C];if(u=c!=null?c[C]:void 0,a.hasOwnProperty(C)&&b!==u&&(b!=null||u!=null))if(C==="style")if(u){for(d in u)!u.hasOwnProperty(d)||b&&b.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in b)b.hasOwnProperty(d)&&u[d]!==b[d]&&(i||(i={}),i[d]=b[d])}else i||(p||(p=[]),p.push(C,i)),i=b;else C==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,u=u?u.__html:void 0,b!=null&&u!==b&&(p=p||[]).push(C,b)):C==="children"?typeof b!="string"&&typeof b!="number"||(p=p||[]).push(C,""+b):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(df.hasOwnProperty(C)?(b!=null&&C==="onScroll"&&yr("scroll",e),p||u===b||(p=[])):(p=p||[]).push(C,b))}i&&(p=p||[]).push("style",i);var C=p;(t.updateQueue=C)&&(t.flags|=4)}};qT=function(e,t,i,a){i!==a&&(t.flags|=4)};function Od(e,t){if(!Sr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function $i(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function f3(e,t,i){var a=t.pendingProps;switch(h1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $i(t),null;case 1:return bo(t.type)&&Wm(),$i(t),null;case 3:return a=t.stateNode,Ih(),_r(wo),_r(Wi),x1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Gp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ps!==null&&(Kv(Ps),Ps=null))),$v(e,t),$i(t),null;case 5:_1(t);var c=Uu(Ef.current);if(i=t.type,e!==null&&t.stateNode!=null)XT(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Pt(166));return $i(t),null}if(e=Uu(sa.current),Gp(t)){a=t.stateNode,i=t.type;var p=t.memoizedProps;switch(a[ea]=t,a[bf]=p,e=(t.mode&1)!==0,i){case"dialog":yr("cancel",a),yr("close",a);break;case"iframe":case"object":case"embed":yr("load",a);break;case"video":case"audio":for(c=0;c<Nd.length;c++)yr(Nd[c],a);break;case"source":yr("error",a);break;case"img":case"image":case"link":yr("error",a),yr("load",a);break;case"details":yr("toggle",a);break;case"input":ub(a,p),yr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!p.multiple},yr("invalid",a);break;case"textarea":hb(a,p),yr("invalid",a)}mv(i,p),c=null;for(var d in p)if(p.hasOwnProperty(d)){var u=p[d];d==="children"?typeof u=="string"?a.textContent!==u&&(p.suppressHydrationWarning!==!0&&Vp(a.textContent,u,e),c=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(p.suppressHydrationWarning!==!0&&Vp(a.textContent,u,e),c=["children",""+u]):df.hasOwnProperty(d)&&u!=null&&d==="onScroll"&&yr("scroll",a)}switch(i){case"input":Lp(a),cb(a,p,!0);break;case"textarea":Lp(a),db(a);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(a.onclick=Hm)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{d=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=bE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(i,{is:a.is}):(e=d.createElement(i),i==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,i),e[ea]=t,e[bf]=a,ZT(e,t,!1,!1),t.stateNode=e;e:{switch(d=gv(i,a),i){case"dialog":yr("cancel",e),yr("close",e),c=a;break;case"iframe":case"object":case"embed":yr("load",e),c=a;break;case"video":case"audio":for(c=0;c<Nd.length;c++)yr(Nd[c],e);c=a;break;case"source":yr("error",e),c=a;break;case"img":case"image":case"link":yr("error",e),yr("load",e),c=a;break;case"details":yr("toggle",e),c=a;break;case"input":ub(e,a),c=cv(e,a),yr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Mr({},a,{value:void 0}),yr("invalid",e);break;case"textarea":hb(e,a),c=fv(e,a),yr("invalid",e);break;default:c=a}mv(i,c),u=c;for(p in u)if(u.hasOwnProperty(p)){var b=u[p];p==="style"?TE(e,b):p==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&SE(e,b)):p==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&ff(e,b):typeof b=="number"&&ff(e,""+b):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(df.hasOwnProperty(p)?b!=null&&p==="onScroll"&&yr("scroll",e):b!=null&&K_(e,p,b,d))}switch(i){case"input":Lp(e),cb(e,a,!1);break;case"textarea":Lp(e),db(e);break;case"option":a.value!=null&&e.setAttribute("value",""+nu(a.value));break;case"select":e.multiple=!!a.multiple,p=a.value,p!=null?ph(e,!!a.multiple,p,!1):a.defaultValue!=null&&ph(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Hm)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $i(t),null;case 6:if(e&&t.stateNode!=null)qT(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Pt(166));if(i=Uu(Ef.current),Uu(sa.current),Gp(t)){if(a=t.stateNode,i=t.memoizedProps,a[ea]=t,(p=a.nodeValue!==i)&&(e=$o,e!==null))switch(e.tag){case 3:Vp(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Vp(a.nodeValue,i,(e.mode&1)!==0)}p&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[ea]=t,t.stateNode=a}return $i(t),null;case 13:if(_r(Ar),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sr&&Uo!==null&&t.mode&1&&!(t.flags&128))dT(),Th(),t.flags|=98560,p=!1;else if(p=Gp(t),a!==null&&a.dehydrated!==null){if(e===null){if(!p)throw Error(Pt(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(Pt(317));p[ea]=t}else Th(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$i(t),p=!1}else Ps!==null&&(Kv(Ps),Ps=null),p=!0;if(!p)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Ar.current&1?si===0&&(si=3):z1())),t.updateQueue!==null&&(t.flags|=4),$i(t),null);case 4:return Ih(),$v(e,t),e===null&&xf(t.stateNode.containerInfo),$i(t),null;case 10:return m1(t.type._context),$i(t),null;case 17:return bo(t.type)&&Wm(),$i(t),null;case 19:if(_r(Ar),p=t.memoizedState,p===null)return $i(t),null;if(a=(t.flags&128)!==0,d=p.rendering,d===null)if(a)Od(p,!1);else{if(si!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=Qm(e),d!==null){for(t.flags|=128,Od(p,!1),a=d.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)p=i,e=a,p.flags&=14680066,d=p.alternate,d===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=d.childLanes,p.lanes=d.lanes,p.child=d.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=d.memoizedProps,p.memoizedState=d.memoizedState,p.updateQueue=d.updateQueue,p.type=d.type,e=d.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return pr(Ar,Ar.current&1|2),t.child}e=e.sibling}p.tail!==null&&Kr()>Ph&&(t.flags|=128,a=!0,Od(p,!1),t.lanes=4194304)}else{if(!a)if(e=Qm(d),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Od(p,!0),p.tail===null&&p.tailMode==="hidden"&&!d.alternate&&!Sr)return $i(t),null}else 2*Kr()-p.renderingStartTime>Ph&&i!==1073741824&&(t.flags|=128,a=!0,Od(p,!1),t.lanes=4194304);p.isBackwards?(d.sibling=t.child,t.child=d):(i=p.last,i!==null?i.sibling=d:t.child=d,p.last=d)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=Kr(),t.sibling=null,i=Ar.current,pr(Ar,a?i&1|2:i&1),t):($i(t),null);case 22:case 23:return M1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?jo&1073741824&&($i(t),t.subtreeFlags&6&&(t.flags|=8192)):$i(t),null;case 24:return null;case 25:return null}throw Error(Pt(156,t.tag))}function p3(e,t){switch(h1(t),t.tag){case 1:return bo(t.type)&&Wm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ih(),_r(wo),_r(Wi),x1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _1(t),null;case 13:if(_r(Ar),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pt(340));Th()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _r(Ar),null;case 4:return Ih(),null;case 10:return m1(t.type._context),null;case 22:case 23:return M1(),null;case 24:return null;default:return null}}var Zp=!1,Gi=!1,m3=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function ah(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Br(e,t,a)}else i.current=null}function Vv(e,t,i){try{i()}catch(a){Br(e,t,a)}}var t2=!1;function g3(e,t){if(Cv=$m,e=QE(),u1(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,p=a.focusNode;a=a.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var d=0,u=-1,b=-1,C=0,A=0,w=e,T=null;t:for(;;){for(var L;w!==i||c!==0&&w.nodeType!==3||(u=d+c),w!==p||a!==0&&w.nodeType!==3||(b=d+a),w.nodeType===3&&(d+=w.nodeValue.length),(L=w.firstChild)!==null;)T=w,w=L;for(;;){if(w===e)break t;if(T===i&&++C===c&&(u=d),T===p&&++A===a&&(b=d),(L=w.nextSibling)!==null)break;w=T,T=w.parentNode}w=L}i=u===-1||b===-1?null:{start:u,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(Iv={focusedElem:e,selectionRange:i},$m=!1,Jt=t;Jt!==null;)if(t=Jt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Jt=e;else for(;Jt!==null;){t=Jt;try{var U=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var F=U.memoizedProps,ce=U.memoizedState,K=t.stateNode,Z=K.getSnapshotBeforeUpdate(t.elementType===t.type?F:Is(t.type,F),ce);K.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var $=t.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pt(163))}}catch(oe){Br(t,t.return,oe)}if(e=t.sibling,e!==null){e.return=t.return,Jt=e;break}Jt=t.return}return U=t2,t2=!1,U}function tf(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var p=c.destroy;c.destroy=void 0,p!==void 0&&Vv(t,i,p)}c=c.next}while(c!==a)}}function Zg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function Gv(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function KT(e){var t=e.alternate;t!==null&&(e.alternate=null,KT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ea],delete t[bf],delete t[kv],delete t[JM],delete t[QM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function YT(e){return e.tag===5||e.tag===3||e.tag===4}function n2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||YT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Hm));else if(a!==4&&(e=e.child,e!==null))for(Hv(e,t,i),e=e.sibling;e!==null;)Hv(e,t,i),e=e.sibling}function Wv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Wv(e,t,i),e=e.sibling;e!==null;)Wv(e,t,i),e=e.sibling}var Ci=null,As=!1;function jl(e,t,i){for(i=i.child;i!==null;)JT(e,t,i),i=i.sibling}function JT(e,t,i){if(oa&&typeof oa.onCommitFiberUnmount=="function")try{oa.onCommitFiberUnmount(Bg,i)}catch{}switch(i.tag){case 5:Gi||ah(i,t);case 6:var a=Ci,c=As;Ci=null,jl(e,t,i),Ci=a,As=c,Ci!==null&&(As?(e=Ci,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Ci.removeChild(i.stateNode));break;case 18:Ci!==null&&(As?(e=Ci,i=i.stateNode,e.nodeType===8?g0(e.parentNode,i):e.nodeType===1&&g0(e,i),yf(e)):g0(Ci,i.stateNode));break;case 4:a=Ci,c=As,Ci=i.stateNode.containerInfo,As=!0,jl(e,t,i),Ci=a,As=c;break;case 0:case 11:case 14:case 15:if(!Gi&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var p=c,d=p.destroy;p=p.tag,d!==void 0&&(p&2||p&4)&&Vv(i,t,d),c=c.next}while(c!==a)}jl(e,t,i);break;case 1:if(!Gi&&(ah(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(u){Br(i,t,u)}jl(e,t,i);break;case 21:jl(e,t,i);break;case 22:i.mode&1?(Gi=(a=Gi)||i.memoizedState!==null,jl(e,t,i),Gi=a):jl(e,t,i);break;default:jl(e,t,i)}}function r2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new m3),t.forEach(function(a){var c=T3.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function Cs(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var p=e,d=t,u=d;e:for(;u!==null;){switch(u.tag){case 5:Ci=u.stateNode,As=!1;break e;case 3:Ci=u.stateNode.containerInfo,As=!0;break e;case 4:Ci=u.stateNode.containerInfo,As=!0;break e}u=u.return}if(Ci===null)throw Error(Pt(160));JT(p,d,c),Ci=null,As=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(C){Br(c,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)QT(t,e),t=t.sibling}function QT(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Cs(t,e),Js(e),a&4){try{tf(3,e,e.return),Zg(3,e)}catch(F){Br(e,e.return,F)}try{tf(5,e,e.return)}catch(F){Br(e,e.return,F)}}break;case 1:Cs(t,e),Js(e),a&512&&i!==null&&ah(i,i.return);break;case 5:if(Cs(t,e),Js(e),a&512&&i!==null&&ah(i,i.return),e.flags&32){var c=e.stateNode;try{ff(c,"")}catch(F){Br(e,e.return,F)}}if(a&4&&(c=e.stateNode,c!=null)){var p=e.memoizedProps,d=i!==null?i.memoizedProps:p,u=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{u==="input"&&p.type==="radio"&&p.name!=null&&xE(c,p),gv(u,d);var C=gv(u,p);for(d=0;d<b.length;d+=2){var A=b[d],w=b[d+1];A==="style"?TE(c,w):A==="dangerouslySetInnerHTML"?SE(c,w):A==="children"?ff(c,w):K_(c,A,w,C)}switch(u){case"input":hv(c,p);break;case"textarea":wE(c,p);break;case"select":var T=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!p.multiple;var L=p.value;L!=null?ph(c,!!p.multiple,L,!1):T!==!!p.multiple&&(p.defaultValue!=null?ph(c,!!p.multiple,p.defaultValue,!0):ph(c,!!p.multiple,p.multiple?[]:"",!1))}c[bf]=p}catch(F){Br(e,e.return,F)}}break;case 6:if(Cs(t,e),Js(e),a&4){if(e.stateNode===null)throw Error(Pt(162));c=e.stateNode,p=e.memoizedProps;try{c.nodeValue=p}catch(F){Br(e,e.return,F)}}break;case 3:if(Cs(t,e),Js(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{yf(t.containerInfo)}catch(F){Br(e,e.return,F)}break;case 4:Cs(t,e),Js(e);break;case 13:Cs(t,e),Js(e),c=e.child,c.flags&8192&&(p=c.memoizedState!==null,c.stateNode.isHidden=p,!p||c.alternate!==null&&c.alternate.memoizedState!==null||(P1=Kr())),a&4&&r2(e);break;case 22:if(A=i!==null&&i.memoizedState!==null,e.mode&1?(Gi=(C=Gi)||A,Cs(t,e),Gi=C):Cs(t,e),Js(e),a&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!A&&e.mode&1)for(Jt=e,A=e.child;A!==null;){for(w=Jt=A;Jt!==null;){switch(T=Jt,L=T.child,T.tag){case 0:case 11:case 14:case 15:tf(4,T,T.return);break;case 1:ah(T,T.return);var U=T.stateNode;if(typeof U.componentWillUnmount=="function"){a=T,i=T.return;try{t=a,U.props=t.memoizedProps,U.state=t.memoizedState,U.componentWillUnmount()}catch(F){Br(a,i,F)}}break;case 5:ah(T,T.return);break;case 22:if(T.memoizedState!==null){o2(w);continue}}L!==null?(L.return=T,Jt=L):o2(w)}A=A.sibling}e:for(A=null,w=e;;){if(w.tag===5){if(A===null){A=w;try{c=w.stateNode,C?(p=c.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(u=w.stateNode,b=w.memoizedProps.style,d=b!=null&&b.hasOwnProperty("display")?b.display:null,u.style.display=EE("display",d))}catch(F){Br(e,e.return,F)}}}else if(w.tag===6){if(A===null)try{w.stateNode.nodeValue=C?"":w.memoizedProps}catch(F){Br(e,e.return,F)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;A===w&&(A=null),w=w.return}A===w&&(A=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Cs(t,e),Js(e),a&4&&r2(e);break;case 21:break;default:Cs(t,e),Js(e)}}function Js(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(YT(i)){var a=i;break e}i=i.return}throw Error(Pt(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(ff(c,""),a.flags&=-33);var p=n2(e);Wv(e,p,c);break;case 3:case 4:var d=a.stateNode.containerInfo,u=n2(e);Hv(e,u,d);break;default:throw Error(Pt(161))}}catch(b){Br(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function y3(e,t,i){Jt=e,eC(e)}function eC(e,t,i){for(var a=(e.mode&1)!==0;Jt!==null;){var c=Jt,p=c.child;if(c.tag===22&&a){var d=c.memoizedState!==null||Zp;if(!d){var u=c.alternate,b=u!==null&&u.memoizedState!==null||Gi;u=Zp;var C=Gi;if(Zp=d,(Gi=b)&&!C)for(Jt=c;Jt!==null;)d=Jt,b=d.child,d.tag===22&&d.memoizedState!==null?s2(c):b!==null?(b.return=d,Jt=b):s2(c);for(;p!==null;)Jt=p,eC(p),p=p.sibling;Jt=c,Zp=u,Gi=C}i2(e)}else c.subtreeFlags&8772&&p!==null?(p.return=c,Jt=p):i2(e)}}function i2(e){for(;Jt!==null;){var t=Jt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gi||Zg(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Gi)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Is(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&Ub(t,p,a);break;case 3:var d=t.updateQueue;if(d!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Ub(t,d,i)}break;case 5:var u=t.stateNode;if(i===null&&t.flags&4){i=u;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var A=C.memoizedState;if(A!==null){var w=A.dehydrated;w!==null&&yf(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pt(163))}Gi||t.flags&512&&Gv(t)}catch(T){Br(t,t.return,T)}}if(t===e){Jt=null;break}if(i=t.sibling,i!==null){i.return=t.return,Jt=i;break}Jt=t.return}}function o2(e){for(;Jt!==null;){var t=Jt;if(t===e){Jt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Jt=i;break}Jt=t.return}}function s2(e){for(;Jt!==null;){var t=Jt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Zg(4,t)}catch(b){Br(t,i,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(b){Br(t,c,b)}}var p=t.return;try{Gv(t)}catch(b){Br(t,p,b)}break;case 5:var d=t.return;try{Gv(t)}catch(b){Br(t,d,b)}}}catch(b){Br(t,t.return,b)}if(t===e){Jt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Jt=u;break}Jt=t.return}}var v3=Math.ceil,ng=Ja.ReactCurrentDispatcher,I1=Ja.ReactCurrentOwner,hs=Ja.ReactCurrentBatchConfig,Gn=0,gi=null,ti=null,Ai=0,jo=0,lh=uu(0),si=0,Af=null,qu=0,Xg=0,A1=0,nf=null,vo=null,P1=0,Ph=1/0,ja=null,rg=!1,Zv=null,Ql=null,Xp=!1,Wl=null,ig=0,rf=0,Xv=null,Tm=-1,Cm=0;function oo(){return Gn&6?Kr():Tm!==-1?Tm:Tm=Kr()}function eu(e){return e.mode&1?Gn&2&&Ai!==0?Ai&-Ai:t3.transition!==null?(Cm===0&&(Cm=jE()),Cm):(e=Jn,e!==0||(e=window.event,e=e===void 0?16:GE(e.type)),e):1}function Ls(e,t,i,a){if(50<rf)throw rf=0,Xv=null,Error(Pt(185));Uf(e,i,a),(!(Gn&2)||e!==gi)&&(e===gi&&(!(Gn&2)&&(Xg|=i),si===4&&Gl(e,Ai)),So(e,a),i===1&&Gn===0&&!(t.mode&1)&&(Ph=Kr()+500,Gg&&cu()))}function So(e,t){var i=e.callbackNode;tM(e,t);var a=Um(e,e===gi?Ai:0);if(a===0)i!==null&&mb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&mb(i),t===1)e.tag===0?e3(a2.bind(null,e)):uT(a2.bind(null,e)),KM(function(){!(Gn&6)&&cu()}),i=null;else{switch(DE(a)){case 1:i=t1;break;case 4:i=LE;break;case 16:i=Nm;break;case 536870912:i=FE;break;default:i=Nm}i=lC(i,tC.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function tC(e,t){if(Tm=-1,Cm=0,Gn&6)throw Error(Pt(327));var i=e.callbackNode;if(_h()&&e.callbackNode!==i)return null;var a=Um(e,e===gi?Ai:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=og(e,a);else{t=a;var c=Gn;Gn|=2;var p=rC();(gi!==e||Ai!==t)&&(ja=null,Ph=Kr()+500,Gu(e,t));do try{w3();break}catch(u){nC(e,u)}while(!0);p1(),ng.current=p,Gn=c,ti!==null?t=0:(gi=null,Ai=0,t=si)}if(t!==0){if(t===2&&(c=wv(e),c!==0&&(a=c,t=qv(e,c))),t===1)throw i=Af,Gu(e,0),Gl(e,a),So(e,Kr()),i;if(t===6)Gl(e,a);else{if(c=e.current.alternate,!(a&30)&&!_3(c)&&(t=og(e,a),t===2&&(p=wv(e),p!==0&&(a=p,t=qv(e,p))),t===1))throw i=Af,Gu(e,0),Gl(e,a),So(e,Kr()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(Pt(345));case 2:ju(e,vo,ja);break;case 3:if(Gl(e,a),(a&130023424)===a&&(t=P1+500-Kr(),10<t)){if(Um(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){oo(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Pv(ju.bind(null,e,vo,ja),t);break}ju(e,vo,ja);break;case 4:if(Gl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var d=31-Os(a);p=1<<d,d=t[d],d>c&&(c=d),a&=~p}if(a=c,a=Kr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*v3(a/1960))-a,10<a){e.timeoutHandle=Pv(ju.bind(null,e,vo,ja),a);break}ju(e,vo,ja);break;case 5:ju(e,vo,ja);break;default:throw Error(Pt(329))}}}return So(e,Kr()),e.callbackNode===i?tC.bind(null,e):null}function qv(e,t){var i=nf;return e.current.memoizedState.isDehydrated&&(Gu(e,t).flags|=256),e=og(e,t),e!==2&&(t=vo,vo=i,t!==null&&Kv(t)),e}function Kv(e){vo===null?vo=e:vo.push.apply(vo,e)}function _3(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],p=c.getSnapshot;c=c.value;try{if(!Fs(p(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gl(e,t){for(t&=~A1,t&=~Xg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Os(t),a=1<<i;e[i]=-1,t&=~a}}function a2(e){if(Gn&6)throw Error(Pt(327));_h();var t=Um(e,0);if(!(t&1))return So(e,Kr()),null;var i=og(e,t);if(e.tag!==0&&i===2){var a=wv(e);a!==0&&(t=a,i=qv(e,a))}if(i===1)throw i=Af,Gu(e,0),Gl(e,t),So(e,Kr()),i;if(i===6)throw Error(Pt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ju(e,vo,ja),So(e,Kr()),null}function k1(e,t){var i=Gn;Gn|=1;try{return e(t)}finally{Gn=i,Gn===0&&(Ph=Kr()+500,Gg&&cu())}}function Ku(e){Wl!==null&&Wl.tag===0&&!(Gn&6)&&_h();var t=Gn;Gn|=1;var i=hs.transition,a=Jn;try{if(hs.transition=null,Jn=1,e)return e()}finally{Jn=a,hs.transition=i,Gn=t,!(Gn&6)&&cu()}}function M1(){jo=lh.current,_r(lh)}function Gu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,qM(i)),ti!==null)for(i=ti.return;i!==null;){var a=i;switch(h1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Wm();break;case 3:Ih(),_r(wo),_r(Wi),x1();break;case 5:_1(a);break;case 4:Ih();break;case 13:_r(Ar);break;case 19:_r(Ar);break;case 10:m1(a.type._context);break;case 22:case 23:M1()}i=i.return}if(gi=e,ti=e=tu(e.current,null),Ai=jo=t,si=0,Af=null,A1=Xg=qu=0,vo=nf=null,Nu!==null){for(t=0;t<Nu.length;t++)if(i=Nu[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,p=i.pending;if(p!==null){var d=p.next;p.next=c,a.next=d}i.pending=a}Nu=null}return e}function nC(e,t){do{var i=ti;try{if(p1(),bm.current=tg,eg){for(var a=kr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}eg=!1}if(Xu=0,mi=oi=kr=null,ef=!1,Tf=0,I1.current=null,i===null||i.return===null){si=1,Af=t,ti=null;break}e:{var p=e,d=i.return,u=i,b=t;if(t=Ai,u.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var C=b,A=u,w=A.tag;if(!(A.mode&1)&&(w===0||w===11||w===15)){var T=A.alternate;T?(A.updateQueue=T.updateQueue,A.memoizedState=T.memoizedState,A.lanes=T.lanes):(A.updateQueue=null,A.memoizedState=null)}var L=Xb(d);if(L!==null){L.flags&=-257,qb(L,d,u,p,t),L.mode&1&&Zb(p,C,t),t=L,b=C;var U=t.updateQueue;if(U===null){var F=new Set;F.add(b),t.updateQueue=F}else U.add(b);break e}else{if(!(t&1)){Zb(p,C,t),z1();break e}b=Error(Pt(426))}}else if(Sr&&u.mode&1){var ce=Xb(d);if(ce!==null){!(ce.flags&65536)&&(ce.flags|=256),qb(ce,d,u,p,t),d1(Ah(b,u));break e}}p=b=Ah(b,u),si!==4&&(si=2),nf===null?nf=[p]:nf.push(p),p=d;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var K=BT(p,b,t);Nb(p,K);break e;case 1:u=b;var Z=p.type,$=p.stateNode;if(!(p.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Ql===null||!Ql.has($)))){p.flags|=65536,t&=-t,p.lanes|=t;var oe=NT(p,u,t);Nb(p,oe);break e}}p=p.return}while(p!==null)}oC(i)}catch(q){t=q,ti===i&&i!==null&&(ti=i=i.return);continue}break}while(!0)}function rC(){var e=ng.current;return ng.current=tg,e===null?tg:e}function z1(){(si===0||si===3||si===2)&&(si=4),gi===null||!(qu&268435455)&&!(Xg&268435455)||Gl(gi,Ai)}function og(e,t){var i=Gn;Gn|=2;var a=rC();(gi!==e||Ai!==t)&&(ja=null,Gu(e,t));do try{x3();break}catch(c){nC(e,c)}while(!0);if(p1(),Gn=i,ng.current=a,ti!==null)throw Error(Pt(261));return gi=null,Ai=0,si}function x3(){for(;ti!==null;)iC(ti)}function w3(){for(;ti!==null&&!Wk();)iC(ti)}function iC(e){var t=aC(e.alternate,e,jo);e.memoizedProps=e.pendingProps,t===null?oC(e):ti=t,I1.current=null}function oC(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=p3(i,t),i!==null){i.flags&=32767,ti=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{si=6,ti=null;return}}else if(i=f3(i,t,jo),i!==null){ti=i;return}if(t=t.sibling,t!==null){ti=t;return}ti=t=e}while(t!==null);si===0&&(si=5)}function ju(e,t,i){var a=Jn,c=hs.transition;try{hs.transition=null,Jn=1,b3(e,t,i,a)}finally{hs.transition=c,Jn=a}return null}function b3(e,t,i,a){do _h();while(Wl!==null);if(Gn&6)throw Error(Pt(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Pt(177));e.callbackNode=null,e.callbackPriority=0;var p=i.lanes|i.childLanes;if(nM(e,p),e===gi&&(ti=gi=null,Ai=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Xp||(Xp=!0,lC(Nm,function(){return _h(),null})),p=(i.flags&15990)!==0,i.subtreeFlags&15990||p){p=hs.transition,hs.transition=null;var d=Jn;Jn=1;var u=Gn;Gn|=4,I1.current=null,g3(e,i),QT(i,e),$M(Iv),$m=!!Cv,Iv=Cv=null,e.current=i,y3(i),Zk(),Gn=u,Jn=d,hs.transition=p}else e.current=i;if(Xp&&(Xp=!1,Wl=e,ig=c),p=e.pendingLanes,p===0&&(Ql=null),Kk(i.stateNode),So(e,Kr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(rg)throw rg=!1,e=Zv,Zv=null,e;return ig&1&&e.tag!==0&&_h(),p=e.pendingLanes,p&1?e===Xv?rf++:(rf=0,Xv=e):rf=0,cu(),null}function _h(){if(Wl!==null){var e=DE(ig),t=hs.transition,i=Jn;try{if(hs.transition=null,Jn=16>e?16:e,Wl===null)var a=!1;else{if(e=Wl,Wl=null,ig=0,Gn&6)throw Error(Pt(331));var c=Gn;for(Gn|=4,Jt=e.current;Jt!==null;){var p=Jt,d=p.child;if(Jt.flags&16){var u=p.deletions;if(u!==null){for(var b=0;b<u.length;b++){var C=u[b];for(Jt=C;Jt!==null;){var A=Jt;switch(A.tag){case 0:case 11:case 15:tf(8,A,p)}var w=A.child;if(w!==null)w.return=A,Jt=w;else for(;Jt!==null;){A=Jt;var T=A.sibling,L=A.return;if(KT(A),A===C){Jt=null;break}if(T!==null){T.return=L,Jt=T;break}Jt=L}}}var U=p.alternate;if(U!==null){var F=U.child;if(F!==null){U.child=null;do{var ce=F.sibling;F.sibling=null,F=ce}while(F!==null)}}Jt=p}}if(p.subtreeFlags&2064&&d!==null)d.return=p,Jt=d;else e:for(;Jt!==null;){if(p=Jt,p.flags&2048)switch(p.tag){case 0:case 11:case 15:tf(9,p,p.return)}var K=p.sibling;if(K!==null){K.return=p.return,Jt=K;break e}Jt=p.return}}var Z=e.current;for(Jt=Z;Jt!==null;){d=Jt;var $=d.child;if(d.subtreeFlags&2064&&$!==null)$.return=d,Jt=$;else e:for(d=Z;Jt!==null;){if(u=Jt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Zg(9,u)}}catch(q){Br(u,u.return,q)}if(u===d){Jt=null;break e}var oe=u.sibling;if(oe!==null){oe.return=u.return,Jt=oe;break e}Jt=u.return}}if(Gn=c,cu(),oa&&typeof oa.onPostCommitFiberRoot=="function")try{oa.onPostCommitFiberRoot(Bg,e)}catch{}a=!0}return a}finally{Jn=i,hs.transition=t}}return!1}function l2(e,t,i){t=Ah(i,t),t=BT(e,t,1),e=Jl(e,t,1),t=oo(),e!==null&&(Uf(e,1,t),So(e,t))}function Br(e,t,i){if(e.tag===3)l2(e,e,i);else for(;t!==null;){if(t.tag===3){l2(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ql===null||!Ql.has(a))){e=Ah(i,e),e=NT(t,e,1),t=Jl(t,e,1),e=oo(),t!==null&&(Uf(t,1,e),So(t,e));break}}t=t.return}}function S3(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=oo(),e.pingedLanes|=e.suspendedLanes&i,gi===e&&(Ai&i)===i&&(si===4||si===3&&(Ai&130023424)===Ai&&500>Kr()-P1?Gu(e,0):A1|=i),So(e,t)}function sC(e,t){t===0&&(e.mode&1?(t=Dp,Dp<<=1,!(Dp&130023424)&&(Dp=4194304)):t=1);var i=oo();e=Wa(e,t),e!==null&&(Uf(e,t,i),So(e,i))}function E3(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),sC(e,i)}function T3(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Pt(314))}a!==null&&a.delete(t),sC(e,i)}var aC;aC=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||wo.current)xo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return xo=!1,d3(e,t,i);xo=!!(e.flags&131072)}else xo=!1,Sr&&t.flags&1048576&&cT(t,qm,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Em(e,t),e=t.pendingProps;var c=Eh(t,Wi.current);vh(t,i),c=b1(null,t,a,e,c,i);var p=S1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bo(a)?(p=!0,Zm(t)):p=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,y1(t),c.updater=Hg,t.stateNode=c,c._reactInternals=t,Fv(t,a,e,i),t=Bv(null,t,a,!0,p,i)):(t.tag=0,Sr&&p&&c1(t),to(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Em(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=I3(a),e=Is(a,e),c){case 0:t=Dv(null,t,a,e,i);break e;case 1:t=Jb(null,t,a,e,i);break e;case 11:t=Kb(null,t,a,e,i);break e;case 14:t=Yb(null,t,a,Is(a.type,e),i);break e}throw Error(Pt(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Is(a,c),Dv(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Is(a,c),Jb(e,t,a,c,i);case 3:e:{if(GT(t),e===null)throw Error(Pt(387));a=t.pendingProps,p=t.memoizedState,c=p.element,pT(e,t),Jm(t,a,null,i);var d=t.memoizedState;if(a=d.element,p.isDehydrated)if(p={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){c=Ah(Error(Pt(423)),t),t=Qb(e,t,a,i,c);break e}else if(a!==c){c=Ah(Error(Pt(424)),t),t=Qb(e,t,a,i,c);break e}else for(Uo=Yl(t.stateNode.containerInfo.firstChild),$o=t,Sr=!0,Ps=null,i=vT(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Th(),a===c){t=Za(e,t,i);break e}to(e,t,a,i)}t=t.child}return t;case 5:return _T(t),e===null&&Rv(t),a=t.type,c=t.pendingProps,p=e!==null?e.memoizedProps:null,d=c.children,Av(a,c)?d=null:p!==null&&Av(a,p)&&(t.flags|=32),VT(e,t),to(e,t,d,i),t.child;case 6:return e===null&&Rv(t),null;case 13:return HT(e,t,i);case 4:return v1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Ch(t,null,a,i):to(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Is(a,c),Kb(e,t,a,c,i);case 7:return to(e,t,t.pendingProps,i),t.child;case 8:return to(e,t,t.pendingProps.children,i),t.child;case 12:return to(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,p=t.memoizedProps,d=c.value,pr(Km,a._currentValue),a._currentValue=d,p!==null)if(Fs(p.value,d)){if(p.children===c.children&&!wo.current){t=Za(e,t,i);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var u=p.dependencies;if(u!==null){d=p.child;for(var b=u.firstContext;b!==null;){if(b.context===a){if(p.tag===1){b=Va(-1,i&-i),b.tag=2;var C=p.updateQueue;if(C!==null){C=C.shared;var A=C.pending;A===null?b.next=b:(b.next=A.next,A.next=b),C.pending=b}}p.lanes|=i,b=p.alternate,b!==null&&(b.lanes|=i),Ov(p.return,i,t),u.lanes|=i;break}b=b.next}}else if(p.tag===10)d=p.type===t.type?null:p.child;else if(p.tag===18){if(d=p.return,d===null)throw Error(Pt(341));d.lanes|=i,u=d.alternate,u!==null&&(u.lanes|=i),Ov(d,i,t),d=p.sibling}else d=p.child;if(d!==null)d.return=p;else for(d=p;d!==null;){if(d===t){d=null;break}if(p=d.sibling,p!==null){p.return=d.return,d=p;break}d=d.return}p=d}to(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,vh(t,i),c=ds(c),a=a(c),t.flags|=1,to(e,t,a,i),t.child;case 14:return a=t.type,c=Is(a,t.pendingProps),c=Is(a.type,c),Yb(e,t,a,c,i);case 15:return UT(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Is(a,c),Em(e,t),t.tag=1,bo(a)?(e=!0,Zm(t)):e=!1,vh(t,i),gT(t,a,c),Fv(t,a,c,i),Bv(null,t,a,!0,e,i);case 19:return WT(e,t,i);case 22:return $T(e,t,i)}throw Error(Pt(156,t.tag))};function lC(e,t){return OE(e,t)}function C3(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(e,t,i,a){return new C3(e,t,i,a)}function R1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function I3(e){if(typeof e=="function")return R1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===J_)return 11;if(e===Q_)return 14}return 2}function tu(e,t){var i=e.alternate;return i===null?(i=us(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Im(e,t,i,a,c,p){var d=2;if(a=e,typeof e=="function")R1(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Jc:return Hu(i.children,c,p,t);case Y_:d=8,c|=8;break;case sv:return e=us(12,i,t,c|2),e.elementType=sv,e.lanes=p,e;case av:return e=us(13,i,t,c),e.elementType=av,e.lanes=p,e;case lv:return e=us(19,i,t,c),e.elementType=lv,e.lanes=p,e;case yE:return qg(i,c,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mE:d=10;break e;case gE:d=9;break e;case J_:d=11;break e;case Q_:d=14;break e;case Bl:d=16,a=null;break e}throw Error(Pt(130,e==null?e:typeof e,""))}return t=us(d,i,t,c),t.elementType=e,t.type=a,t.lanes=p,t}function Hu(e,t,i,a){return e=us(7,e,a,t),e.lanes=i,e}function qg(e,t,i,a){return e=us(22,e,a,t),e.elementType=yE,e.lanes=i,e.stateNode={isHidden:!1},e}function E0(e,t,i){return e=us(6,e,null,t),e.lanes=i,e}function T0(e,t,i){return t=us(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function A3(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=o0(0),this.expirationTimes=o0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=o0(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function O1(e,t,i,a,c,p,d,u,b){return e=new A3(e,t,i,u,b),t===1?(t=1,p===!0&&(t|=8)):t=0,p=us(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},y1(p),e}function P3(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function uC(e){if(!e)return ru;e=e._reactInternals;e:{if(nc(e)!==e||e.tag!==1)throw Error(Pt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pt(171))}if(e.tag===1){var i=e.type;if(bo(i))return lT(e,i,t)}return t}function cC(e,t,i,a,c,p,d,u,b){return e=O1(i,a,!0,e,c,p,d,u,b),e.context=uC(null),i=e.current,a=oo(),c=eu(i),p=Va(a,c),p.callback=t??null,Jl(i,p,c),e.current.lanes=c,Uf(e,c,a),So(e,a),e}function Kg(e,t,i,a){var c=t.current,p=oo(),d=eu(c);return i=uC(i),t.context===null?t.context=i:t.pendingContext=i,t=Va(p,d),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Jl(c,t,d),e!==null&&(Ls(e,c,d,p),wm(e,c,d)),d}function sg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function u2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function L1(e,t){u2(e,t),(e=e.alternate)&&u2(e,t)}function k3(){return null}var hC=typeof reportError=="function"?reportError:function(e){console.error(e)};function F1(e){this._internalRoot=e}Yg.prototype.render=F1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pt(409));Kg(e,t,null,null)};Yg.prototype.unmount=F1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ku(function(){Kg(null,e,null,null)}),t[Ha]=null}};function Yg(e){this._internalRoot=e}Yg.prototype.unstable_scheduleHydration=function(e){if(e){var t=UE();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Vl.length&&t!==0&&t<Vl[i].priority;i++);Vl.splice(i,0,e),i===0&&VE(e)}};function j1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function c2(){}function M3(e,t,i,a,c){if(c){if(typeof a=="function"){var p=a;a=function(){var C=sg(d);p.call(C)}}var d=cC(t,a,e,0,null,!1,!1,"",c2);return e._reactRootContainer=d,e[Ha]=d.current,xf(e.nodeType===8?e.parentNode:e),Ku(),d}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var u=a;a=function(){var C=sg(b);u.call(C)}}var b=O1(e,0,!1,null,null,!1,!1,"",c2);return e._reactRootContainer=b,e[Ha]=b.current,xf(e.nodeType===8?e.parentNode:e),Ku(function(){Kg(t,b,i,a)}),b}function Qg(e,t,i,a,c){var p=i._reactRootContainer;if(p){var d=p;if(typeof c=="function"){var u=c;c=function(){var b=sg(d);u.call(b)}}Kg(t,d,e,c)}else d=M3(i,t,e,c,a);return sg(d)}BE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Bd(t.pendingLanes);i!==0&&(n1(t,i|1),So(t,Kr()),!(Gn&6)&&(Ph=Kr()+500,cu()))}break;case 13:Ku(function(){var a=Wa(e,1);if(a!==null){var c=oo();Ls(a,e,1,c)}}),L1(e,1)}};r1=function(e){if(e.tag===13){var t=Wa(e,134217728);if(t!==null){var i=oo();Ls(t,e,134217728,i)}L1(e,134217728)}};NE=function(e){if(e.tag===13){var t=eu(e),i=Wa(e,t);if(i!==null){var a=oo();Ls(i,e,t,a)}L1(e,t)}};UE=function(){return Jn};$E=function(e,t){var i=Jn;try{return Jn=e,t()}finally{Jn=i}};vv=function(e,t,i){switch(t){case"input":if(hv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=Vg(a);if(!c)throw Error(Pt(90));_E(a),hv(a,c)}}}break;case"textarea":wE(e,i);break;case"select":t=i.value,t!=null&&ph(e,!!i.multiple,t,!1)}};AE=k1;PE=Ku;var z3={usingClientEntryPoint:!1,Events:[Vf,nh,Vg,CE,IE,k1]},Ld={findFiberByHostInstance:Bu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},R3={bundleType:Ld.bundleType,version:Ld.version,rendererPackageName:Ld.rendererPackageName,rendererConfig:Ld.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zE(e),e===null?null:e.stateNode},findFiberByHostInstance:Ld.findFiberByHostInstance||k3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qp.isDisabled&&qp.supportsFiber)try{Bg=qp.inject(R3),oa=qp}catch{}}Go.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z3;Go.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j1(t))throw Error(Pt(200));return P3(e,t,null,i)};Go.createRoot=function(e,t){if(!j1(e))throw Error(Pt(299));var i=!1,a="",c=hC;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=O1(e,1,!1,null,null,i,!1,a,c),e[Ha]=t.current,xf(e.nodeType===8?e.parentNode:e),new F1(t)};Go.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pt(188)):(e=Object.keys(e).join(","),Error(Pt(268,e)));return e=zE(t),e=e===null?null:e.stateNode,e};Go.flushSync=function(e){return Ku(e)};Go.hydrate=function(e,t,i){if(!Jg(t))throw Error(Pt(200));return Qg(null,e,t,!0,i)};Go.hydrateRoot=function(e,t,i){if(!j1(e))throw Error(Pt(405));var a=i!=null&&i.hydratedSources||null,c=!1,p="",d=hC;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),t=cC(t,null,e,1,i??null,c,!1,p,d),e[Ha]=t.current,xf(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new Yg(t)};Go.render=function(e,t,i){if(!Jg(t))throw Error(Pt(200));return Qg(null,e,t,!1,i)};Go.unmountComponentAtNode=function(e){if(!Jg(e))throw Error(Pt(40));return e._reactRootContainer?(Ku(function(){Qg(null,null,e,!1,function(){e._reactRootContainer=null,e[Ha]=null})}),!0):!1};Go.unstable_batchedUpdates=k1;Go.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!Jg(i))throw Error(Pt(200));if(e==null||e._reactInternals===void 0)throw Error(Pt(38));return Qg(e,t,i,!1,a)};Go.version="18.2.0-next-9e3b772b8-20220608";function dC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dC)}catch(e){console.error(e)}}dC(),cE.exports=Go;var D1=cE.exports;const O3=Bf(D1);var fC={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.1.3/LICENSE.txt
 */(function(e,t){(function(i,a){e.exports=a()})($l,function(){var i={},a={};function c(d,u,b){if(a[d]=b,d==="index"){var C="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",A={};return a.shared(A),a.index(i,A),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),i}}c("shared",["exports"],function(d){function u(o,n,s,h){return new(s||(s=Promise))(function(g,_){function x(O){try{k(h.next(O))}catch(X){_(X)}}function S(O){try{k(h.throw(O))}catch(X){_(X)}}function k(O){var X;O.done?g(O.value):(X=O.value,X instanceof s?X:new s(function(Y){Y(X)})).then(x,S)}k((h=h.apply(o,n||[])).next())})}function b(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var C=A;function A(o,n){this.x=o,this.y=n}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),g=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(o){return o instanceof A?o:Array.isArray(o)?new A(o[0],o[1]):o};var w=b(C),T=L;function L(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}L.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var g=this.sampleCurveX(s)-o;if(Math.abs(g)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=g/_}var x=0,S=1;for(s=o,h=0;h<20&&(g=this.sampleCurveX(s),!(Math.abs(g-o)<n));h++)o>g?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var U=b(T);let F,ce;function K(){return F==null&&(F=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),F}function Z(){if(ce==null&&(ce=!1,K())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const g=4*h;n.fillStyle=`rgb(${g},${g+1},${g+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){ce=!0;break}}}return ce||!1}function $(o,n,s,h){const g=new U(o,n,s,h);return function(_){return g.solve(_)}}const oe=$(.25,.1,.25,1);function q(o,n,s){return Math.min(s,Math.max(n,o))}function V(o,n,s){const h=s-n,g=((o-n)%h+h)%h+n;return g===n?s:g}function E(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let j=1;function D(o,n,s){const h={};for(const g in o)h[g]=n.call(s||this,o[g],g,o);return h}function ee(o,n,s){const h={};for(const g in o)n.call(s||this,o[g],g,o)&&(h[g]=o[g]);return h}function W(o){return Array.isArray(o)?o.map(W):typeof o=="object"&&o?D(o,W):o}const ve={};function _e(o){ve[o]||(typeof console<"u"&&console.warn(o),ve[o]=!0)}function de(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function ie(o){let n=0;for(let s,h,g=0,_=o.length,x=_-1;g<_;x=g++)s=o[g],h=o[x],n+=(h.x-s.x)*(s.y+h.y);return n}function le(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let J=null;function te(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function be(o,n,s,h,g){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(o,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),k=new Uint8ClampedArray(h*g*4);if(yield _.copyTo(k,function(O,X,Y,se,fe){const ge=4*Math.max(-X,0),Ce=(Math.max(0,Y)-Y)*se*4+ge,ze=4*se,Ue=Math.max(0,X),Je=Math.max(0,Y);return{rect:{x:Ue,y:Je,width:Math.min(O.width,X+se)-Ue,height:Math.min(O.height,Y+fe)-Je},layout:[{offset:Ce,stride:ze}]}}(o,n,s,h,g)),S)for(let O=0;O<k.length;O+=4){const X=k[O];k[O]=k[O+2],k[O+2]=X}return k}finally{_.close()}})}let Ee,De;const Ae="AbortError";function Oe(){return new Error(Ae)}const We={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function He(o){return We.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const nt="global-dispatcher";class dt extends Error{constructor(n,s,h,g){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=g}}const wt=()=>le(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Rt=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=He(o.url);if(h)return h(o,n);if(le(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:nt},n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(wt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,g){return u(this,void 0,void 0,function*(){const _=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:wt(),signal:g.signal});h.type==="json"&&_.headers.set("Accept","application/json");const x=yield fetch(_);if(!x.ok){const O=yield x.blob();throw new dt(x.status,x.statusText,h.url,O)}let S;S=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const k=yield S;if(g.signal.aborted)throw Oe();return{data:k,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,n);if(le(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:nt},n)}var s;return function(h,g){return new Promise((_,x)=>{const S=new XMLHttpRequest;S.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(S.responseType="arraybuffer");for(const k in h.headers)S.setRequestHeader(k,h.headers[k]);h.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=h.credentials==="include",S.onerror=()=>{x(new Error(S.statusText))},S.onload=()=>{if(!g.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let k=S.response;if(h.type==="json")try{k=JSON.parse(S.response)}catch(O){return void x(O)}_({data:k,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const k=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});x(new dt(S.status,S.statusText,h.url,k))}},g.signal.addEventListener("abort",()=>{S.abort(),x(Oe())}),S.send(h.body)})}(o,n)};function gt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function St(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function Vt(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class Bt{constructor(n,s={}){E(this,s),this.type=n}}class an extends Bt{constructor(n,s={}){super("error",E({error:n},s))}}class Sn{on(n,s){return this._listeners=this._listeners||{},St(n,s,this._listeners),this}off(n,s){return Vt(n,s,this._listeners),Vt(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},St(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new Bt(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of g)S.call(this,n);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of _)Vt(h,S,this._oneTimeListeners),S.call(this,n);const x=this._eventedParent;x&&(E(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof an&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var et={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ln=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function wn(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return ln.forEach(h=>{h in n&&(s[h]=n[h])}),s}function xe(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!xe(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!xe(o[s],n[s]))return!1;return!0}return o===n}function N(o,n){o.push(n)}function B(o,n,s){N(s,{command:"addSource",args:[o,n[o]]})}function we(o,n,s){N(n,{command:"removeSource",args:[o]}),s[o]=!0}function Xe(o,n,s,h){we(o,s,h),B(o,n,s)}function Qe(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!xe(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!xe(o[s][h],n[s][h]))return!1;return!0}function ct(o,n,s,h,g,_){o=o||{},n=n||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(xe(o[x],n[x])||s.push({command:_,args:[h,x,n[x],g]}));for(const x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(xe(o[x],n[x])||s.push({command:_,args:[h,x,n[x],g]}))}function ae(o){return o.id}function R(o,n){return o[n.id]=n,o}class z{constructor(n,s,h,g){this.message=(n?`${n}: `:"")+h,g&&(this.identifier=g),s!=null&&s.__line__&&(this.line=s.__line__)}}function Se(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class Ve extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class tt{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,g]of s)this.bindings[h]=g}concat(n){return new tt(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const ot={kind:"null"},ut={kind:"number"},Nt={kind:"string"},jt={kind:"boolean"},mn={kind:"color"},_n={kind:"object"},sn={kind:"value"},ki={kind:"collator"},rr={kind:"formatted"},Me={kind:"padding"},re={kind:"resolvedImage"},ue={kind:"variableAnchorOffsetCollection"};function me(o,n){return{kind:"array",itemType:o,N:n}}function Ie(o){if(o.kind==="array"){const n=Ie(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const Ne=[ot,ut,Nt,jt,mn,rr,_n,me(sn),Me,re,ue];function Re(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Re(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of Ne)if(!Re(s,n))return null}}return`Expected ${Ie(o)} but found ${Ie(n)} instead.`}function $e(o,n){return n.some(s=>s.kind===o.kind)}function Fe(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function Ye(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const ft=.96422,ht=.82521,pt=4/29,Xt=6/29,Qt=3*Xt*Xt,pn=Xt*Xt*Xt,un=Math.PI/180,bn=180/Math.PI;function Dn(o){return(o%=360)<0&&(o+=360),o}function Wn([o,n,s,h]){let g,_;const x=hn((.2225045*(o=ur(o))+.7168786*(n=ur(n))+.0606169*(s=ur(s)))/1);o===n&&n===s?g=_=x:(g=hn((.4360747*o+.3850649*n+.1430804*s)/ft),_=hn((.0139322*o+.0971045*n+.7141733*s)/ht));const S=116*x-16;return[S<0?0:S,500*(g-x),200*(x-_),h]}function ur(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function hn(o){return o>pn?Math.pow(o,1/3):o/Qt+pt}function ir([o,n,s,h]){let g=(o+16)/116,_=isNaN(n)?g:g+n/500,x=isNaN(s)?g:g-s/200;return g=1*ni(g),_=ft*ni(_),x=ht*ni(x),[Er(3.1338561*_-1.6168667*g-.4906146*x),Er(-.9787684*_+1.9161415*g+.033454*x),Er(.0719453*_-.2289914*g+1.4052427*x),h]}function Er(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function ni(o){return o>Xt?o*o*o:Qt*(o-pt)}function li(o){return parseInt(o.padEnd(2,o),16)/255}function zr(o,n){return ho(n?o/100:o,0,1)}function ho(o,n,s){return Math.min(Math.max(n,o),s)}function ca(o){return!o.some(Number.isNaN)}const ha={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Bn{constructor(n,s,h,g=1,_=!0){this.r=n,this.g=s,this.b=h,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[n,s,h,g]))}static parse(n){if(n instanceof Bn)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=ha[h];if(g){const[x,S,k]=g;return[x/255,S/255,k/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[li(h.slice(S,S+=x)),li(h.slice(S,S+=x)),li(h.slice(S,S+=x)),li(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,k,O,X,Y,se,fe,ge,Ce,ze,Ue,Je]=x,Ge=[X||" ",fe||" ",ze].join("");if(Ge==="  "||Ge==="  /"||Ge===",,"||Ge===",,,"){const qe=[O,se,Ce].join(""),mt=qe==="%%%"?100:qe===""?255:0;if(mt){const vt=[ho(+k/mt,0,1),ho(+Y/mt,0,1),ho(+ge/mt,0,1),Ue?zr(+Ue,Je):1];if(ca(vt))return vt}}return}}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,S,k,O,X,Y,se,fe,ge]=_,Ce=[k||" ",X||" ",se].join("");if(Ce==="  "||Ce==="  /"||Ce===",,"||Ce===",,,"){const ze=[+S,ho(+O,0,100),ho(+Y,0,100),fe?zr(+fe,ge):1];if(ca(ze))return function([Ue,Je,Ge,qe]){function mt(vt){const Dt=(vt+Ue/30)%12,Gt=Je*Math.min(Ge,1-Ge);return Ge-Gt*Math.max(-1,Math.min(Dt-3,9-Dt,1))}return Ue=Dn(Ue),Je/=100,Ge/=100,[mt(0),mt(8),mt(4),qe]}(ze)}}}(n);return s?new Bn(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[n/_,s/_,h/_,g])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,g,_]=Wn(n),x=Math.sqrt(h*h+g*g);return[Math.round(1e4*x)?Dn(Math.atan2(g,h)*bn):NaN,x,s,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Wn(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,g]=this.rgb;return`rgba(${[n,s,h].map(_=>Math.round(255*_)).join(",")},${g})`}}Bn.black=new Bn(0,0,0,1),Bn.white=new Bn(1,1,1,1),Bn.transparent=new Bn(0,0,0,0),Bn.red=new Bn(1,0,0,1);class Pn{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Eo{constructor(n,s,h,g,_){this.text=n,this.image=s,this.scale=h,this.fontStack=g,this.textColor=_}}class vi{constructor(n){this.sections=n}static fromString(n){return new vi([new Eo(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof vi?n:vi.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class ui{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ui)return n;if(typeof n=="number")return new ui([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new ui(n)}}toString(){return JSON.stringify(this.values)}}const da=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Mi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Mi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],g=n[s+1];if(typeof h!="string"||!da.has(h)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new Mi(n)}}toString(){return JSON.stringify(this.values)}}class zi{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new zi({name:n,available:!1}):null}}function ci(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function el(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Bn||o instanceof Pn||o instanceof vi||o instanceof ui||o instanceof Mi||o instanceof zi)return!0;if(Array.isArray(o)){for(const n of o)if(!el(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!el(o[n]))return!1;return!0}return!1}function wr(o){if(o===null)return ot;if(typeof o=="string")return Nt;if(typeof o=="boolean")return jt;if(typeof o=="number")return ut;if(o instanceof Bn)return mn;if(o instanceof Pn)return ki;if(o instanceof vi)return rr;if(o instanceof ui)return Me;if(o instanceof Mi)return ue;if(o instanceof zi)return re;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const g=wr(h);if(s){if(s===g)continue;s=sn;break}s=g}return me(s||sn,n)}return _n}function fa(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Bn||o instanceof vi||o instanceof ui||o instanceof Mi||o instanceof zi?o.toString():JSON.stringify(o)}class Xo{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!el(n[1]))return s.error("invalid value");const h=n[1];let g=wr(h);const _=s.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new Xo(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Qn{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Ri={string:Nt,number:ut,boolean:jt,object:_n};class _i{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,g=1;const _=n[0];if(_==="array"){let S,k;if(n.length>2){const O=n[1];if(typeof O!="string"||!(O in Ri)||O==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=Ri[O],g++}else S=sn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);k=n[2],g++}h=me(S,k)}else{if(!Ri[_])throw new Error(`Types doesn't contain name = ${_}`);h=Ri[_]}const x=[];for(;g<n.length;g++){const S=s.parse(n[g],g,sn);if(!S)return null;x.push(S)}return new _i(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!Re(this.type,wr(h)))return h;if(s===this.args.length-1)throw new Qn(`Expected value to be of type ${Ie(this.type)}, but found ${Ie(wr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const tl={"to-boolean":jt,"to-color":mn,"to-number":ut,"to-string":Nt};class fo{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!tl[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const g=tl[h],_=[];for(let x=1;x<n.length;x++){const S=s.parse(n[x],x,sn);if(!S)return null;_.push(S)}return new fo(g,_)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const g of this.args){if(s=g.evaluate(n),h=null,s instanceof Bn)return s;if(typeof s=="string"){const _=n.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:ci(s[0],s[1],s[2],s[3]),!h))return new Bn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Qn(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const g=ui.parse(s);if(g)return g}throw new Qn(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const g=Mi.parse(s);if(g)return g}throw new Qn(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const g=Number(s);if(!isNaN(g))return g}throw new Qn(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return vi.fromString(fa(this.args[0].evaluate(n)));case"resolvedImage":return zi.fromString(fa(this.args[0].evaluate(n)));default:return fa(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const pa=["Unknown","Point","LineString","Polygon"];class Vn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?pa[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Bn.parse(n)),s}}class ps{constructor(n,s,h=[],g,_=new tt,x=[]){this.registry=n,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=_,this.errors=x,this.expectedType=g,this._isConstant=s}parse(n,s,h,g,_={}){return s?this.concat(s,h,g)._parse(n,_):this._parse(n,_)}_parse(n,s){function h(g,_,x){return x==="assert"?new _i(_,[g]):x==="coerce"?new fo(_,[g]):g}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=n[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let x=_.parse(n,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,k=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||k.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||k.kind!=="value"&&k.kind!=="string")if(S.kind!=="padding"||k.kind!=="value"&&k.kind!=="number"&&k.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||k.kind!=="value"&&k.kind!=="array"){if(this.checkSubtype(S,k))return null}else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof Xo)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new Vn;try{x=new Xo(x.type,x.evaluate(S))}catch(k){return this.error(k.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const g=typeof n=="number"?this.path.concat(n):this.path,_=h?this.scope.concat(h):this.scope;return new ps(this.registry,this._isConstant,g,s||null,_,this.errors)}error(n,...s){const h=`${this.key}${s.map(g=>`[${g}]`).join("")}`;this.errors.push(new Ve(h,n))}checkSubtype(n,s){const h=Re(n,s);return h&&this.error(h),h}}class Ds{constructor(n,s,h){this.type=ki,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const g=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,jt);if(!g)return null;const _=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,jt);if(!_)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Nt),!x)?null:new Ds(g,_,x)}evaluate(n){return new Pn(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const qo=8192;function hi(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function ma(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function $h(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,g=Math.pow(2,n.z);return[Math.round(s*g*qo),Math.round(h*g*qo)]}function sc(o,n,s){const h=o[0]-n[0],g=o[1]-n[1],_=o[0]-s[0],x=o[1]-s[1];return h*x-_*g==0&&h*_<=0&&g*x<=0}function nl(o,n){let s=!1;for(let x=0,S=n.length;x<S;x++){const k=n[x];for(let O=0,X=k.length;O<X-1;O++){if(sc(o,k[O],k[O+1]))return!1;(g=k[O])[1]>(h=o)[1]!=(_=k[O+1])[1]>h[1]&&h[0]<(_[0]-g[0])*(h[1]-g[1])/(_[1]-g[1])+g[0]&&(s=!s)}}var h,g,_;return s}function Vh(o,n){for(let s=0;s<n.length;s++)if(nl(o,n[s]))return!0;return!1}function hu(o,n,s,h){const g=h[0]-s[0],_=h[1]-s[1],x=(o[0]-s[0])*_-g*(o[1]-s[1]),S=(n[0]-s[0])*_-g*(n[1]-s[1]);return x>0&&S<0||x<0&&S>0}function du(o,n,s){for(const O of s)for(let X=0;X<O.length-1;++X)if((S=[(x=O[X+1])[0]-(_=O[X])[0],x[1]-_[1]])[0]*(k=[(g=n)[0]-(h=o)[0],g[1]-h[1]])[1]-S[1]*k[0]!=0&&hu(h,g,_,x)&&hu(_,x,h,g))return!0;var h,g,_,x,S,k;return!1}function fu(o,n){for(let s=0;s<o.length;++s)if(!nl(o[s],n))return!1;for(let s=0;s<o.length-1;++s)if(du(o[s],o[s+1],n))return!1;return!0}function ga(o,n){for(let s=0;s<n.length;s++)if(fu(o,n[s]))return!0;return!1}function rl(o,n,s){const h=[];for(let g=0;g<o.length;g++){const _=[];for(let x=0;x<o[g].length;x++){const S=$h(o[g][x],s);hi(n,S),_.push(S)}h.push(_)}return h}function ms(o,n,s){const h=[];for(let g=0;g<o.length;g++){const _=rl(o[g],n,s);h.push(_)}return h}function ac(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const g=.5*h;let _=o[0]-s[0]>g?-h:s[0]-o[0]>g?h:0;_===0&&(_=o[0]-s[2]>g?-h:s[2]-o[0]>g?h:0),o[0]+=_}hi(n,o)}function il(o,n,s,h){const g=Math.pow(2,h.z)*qo,_=[h.x*qo,h.y*qo],x=[];for(const S of o)for(const k of S){const O=[k.x+_[0],k.y+_[1]];ac(O,n,s,g),x.push(O)}return x}function lc(o,n,s,h){const g=Math.pow(2,h.z)*qo,_=[h.x*qo,h.y*qo],x=[];for(const k of o){const O=[];for(const X of k){const Y=[X.x+_[0],X.y+_[1]];hi(n,Y),O.push(Y)}x.push(O)}if(n[2]-n[0]<=g/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const k of x)for(const O of k)ac(O,n,s,g)}var S;return x}class gs{constructor(n,s){this.type=jt,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(el(n[1])){const h=n[1];if(h.type==="FeatureCollection"){const g=[];for(const _ of h.features){const{type:x,coordinates:S}=_.geometry;x==="Polygon"&&g.push(S),x==="MultiPolygon"&&g.push(...S)}if(g.length)return new gs(h,{type:"MultiPolygon",coordinates:g})}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new gs(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new gs(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=rl(h.coordinates,_,x),k=il(s.geometry(),g,_,x);if(!ma(g,_))return!1;for(const O of k)if(!nl(O,S))return!1}if(h.type==="MultiPolygon"){const S=ms(h.coordinates,_,x),k=il(s.geometry(),g,_,x);if(!ma(g,_))return!1;for(const O of k)if(!Vh(O,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=rl(h.coordinates,_,x),k=lc(s.geometry(),g,_,x);if(!ma(g,_))return!1;for(const O of k)if(!fu(O,S))return!1}if(h.type==="MultiPolygon"){const S=ms(h.coordinates,_,x),k=lc(s.geometry(),g,_,x);if(!ma(g,_))return!1;for(const O of k)if(!ga(O,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class ya{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new ya(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class xi{constructor(n,s,h,g){this.name=n,this.type=s,this._evaluate=h,this.args=g}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],g=xi.definitions[h];if(!g)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,S=x.filter(([O])=>!Array.isArray(O)||O.length===n.length-1);let k=null;for(const[O,X]of S){k=new ps(s.registry,va,s.path,null,s.scope);const Y=[];let se=!1;for(let fe=1;fe<n.length;fe++){const ge=n[fe],Ce=Array.isArray(O)?O[fe-1]:O.type,ze=k.parse(ge,1+Y.length,Ce);if(!ze){se=!0;break}Y.push(ze)}if(!se)if(Array.isArray(O)&&O.length!==Y.length)k.error(`Expected ${O.length} arguments, but found ${Y.length} instead.`);else{for(let fe=0;fe<Y.length;fe++){const ge=Array.isArray(O)?O[fe]:O.type,Ce=Y[fe];k.concat(fe+1).checkSubtype(ge,Ce.type)}if(k.errors.length===0)return new xi(h,_,X,Y)}}if(S.length===1)s.errors.push(...k.errors);else{const O=(S.length?S:x).map(([Y])=>{return se=Y,Array.isArray(se)?`(${se.map(Ie).join(", ")})`:`(${Ie(se.type)}...)`;var se}).join(" | "),X=[];for(let Y=1;Y<n.length;Y++){const se=s.parse(n[Y],1+X.length);if(!se)return null;X.push(Ie(se.type))}s.error(`Expected arguments of type ${O}, but found (${X.join(", ")}) instead.`)}return null}static register(n,s){xi.definitions=s;for(const h in s)n[h]=xi}}function va(o){if(o instanceof ya)return va(o.boundExpression);if(o instanceof xi&&o.name==="error"||o instanceof Ds||o instanceof gs)return!1;const n=o instanceof fo||o instanceof _i;let s=!0;return o.eachChild(h=>{s=n?s&&va(h):s&&h instanceof Xo}),!!s&&ol(o)&&_a(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ol(o){if(o instanceof xi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof gs)return!1;let n=!0;return o.eachChild(s=>{n&&!ol(s)&&(n=!1)}),n}function ys(o){if(o instanceof xi&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!ys(s)&&(n=!1)}),n}function _a(o,n){if(o instanceof xi&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!_a(h,n)&&(s=!1)}),s}function xa(o,n){const s=o.length-1;let h,g,_=0,x=s,S=0;for(;_<=x;)if(S=Math.floor((_+x)/2),h=o[S],g=o[S+1],h<=n){if(S===s||n<g)return S;_=S+1}else{if(!(h>n))throw new Qn("Input is not a number.");x=S-1}return 0}class wa{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[g,_]of h)this.labels.push(g),this.outputs.push(_)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,ut);if(!h)return null;const g=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let x=1;x<n.length;x+=2){const S=x===1?-1/0:n[x],k=n[x+1],O=x,X=x+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(g.length&&g[g.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',O);const Y=s.parse(k,X,_);if(!Y)return null;_=_||Y.type,g.push([S,Y])}return new wa(_,h,g)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const g=this.input.evaluate(n);if(g<=s[0])return h[0].evaluate(n);const _=s.length;return g>=s[_-1]?h[_-1].evaluate(n):h[xa(s,g)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Gh(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var uc=cc;function cc(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}cc.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var g=this.sampleCurveX(s)-o;if(Math.abs(g)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=g/_}var x=0,S=1;for(s=o,h=0;h<20&&(g=this.sampleCurveX(s),!(Math.abs(g-o)<n));h++)o>g?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var hc=Gh(uc);function vs(o,n,s){return o+s*(n-o)}function sl(o,n,s){return o.map((h,g)=>vs(h,n[g],s))}const Yr={number:vs,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[g,_,x,S]=sl(o.rgb,n.rgb,s);return new Bn(g,_,x,S,!1)}case"hcl":{const[g,_,x,S]=o.hcl,[k,O,X,Y]=n.hcl;let se,fe;if(isNaN(g)||isNaN(k))isNaN(g)?isNaN(k)?se=NaN:(se=k,x!==1&&x!==0||(fe=O)):(se=g,X!==1&&X!==0||(fe=_));else{let Je=k-g;k>g&&Je>180?Je-=360:k<g&&g-k>180&&(Je+=360),se=g+s*Je}const[ge,Ce,ze,Ue]=function([Je,Ge,qe,mt]){return Je=isNaN(Je)?0:Je*un,ir([qe,Math.cos(Je)*Ge,Math.sin(Je)*Ge,mt])}([se,fe??vs(_,O,s),vs(x,X,s),vs(S,Y,s)]);return new Bn(ge,Ce,ze,Ue,!1)}case"lab":{const[g,_,x,S]=ir(sl(o.lab,n.lab,s));return new Bn(g,_,x,S,!1)}}},array:sl,padding:function(o,n,s){return new ui(sl(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const h=o.values,g=n.values;if(h.length!==g.length)throw new Qn(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const _=[];for(let x=0;x<h.length;x+=2){if(h[x]!==g[x])throw new Qn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${g[x]}`);_.push(h[x]);const[S,k]=h[x+1],[O,X]=g[x+1];_.push([vs(S,O,s),vs(k,X,s)])}return new Mi(_)}};class Jr{constructor(n,s,h,g,_){this.type=n,this.operator=s,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[x,S]of _)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(n,s,h,g){let _=0;if(n.name==="exponential")_=Ln(s,n.base,h,g);else if(n.name==="linear")_=Ln(s,1,h,g);else if(n.name==="cubic-bezier"){const x=n.controlPoints;_=new hc(x[0],x[1],x[2],x[3]).solve(Ln(s,1,h,g))}return _}static parse(n,s){let[h,g,_,...x]=n;if(!Array.isArray(g)||g.length===0)return s.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const O=g[1];if(typeof O!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:O}}else{if(g[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const O=g.slice(1);if(O.length!==4||O.some(X=>typeof X!="number"||X<0||X>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:O}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,ut),!_)return null;const S=[];let k=null;h==="interpolate-hcl"||h==="interpolate-lab"?k=mn:s.expectedType&&s.expectedType.kind!=="value"&&(k=s.expectedType);for(let O=0;O<x.length;O+=2){const X=x[O],Y=x[O+1],se=O+3,fe=O+4;if(typeof X!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',se);if(S.length&&S[S.length-1][0]>=X)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',se);const ge=s.parse(Y,fe,k);if(!ge)return null;k=k||ge.type,S.push([X,ge])}return Ye(k,ut)||Ye(k,mn)||Ye(k,Me)||Ye(k,ue)||Ye(k,me(ut))?new Jr(k,h,g,_,S):s.error(`Type ${Ie(k)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const g=this.input.evaluate(n);if(g<=s[0])return h[0].evaluate(n);const _=s.length;if(g>=s[_-1])return h[_-1].evaluate(n);const x=xa(s,g),S=Jr.interpolationFactor(this.interpolation,g,s[x],s[x+1]),k=h[x].evaluate(n),O=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return Yr[this.type.kind](k,O,S);case"interpolate-hcl":return Yr.color(k,O,S,"hcl");case"interpolate-lab":return Yr.color(k,O,S,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Ln(o,n,s,h){const g=h-s,_=o-s;return g===0?0:n===1?_/g:(Math.pow(n,_)-1)/(Math.pow(n,g)-1)}class al{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const g=s.expectedType;g&&g.kind!=="value"&&(h=g);const _=[];for(const S of n.slice(1)){const k=s.parse(S,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!k)return null;h=h||k.type,_.push(k)}if(!h)throw new Error("No output type");const x=g&&_.some(S=>Re(g,S.type));return new al(x?sn:h,_)}evaluate(n){let s,h=null,g=0;for(const _ of this.args)if(g++,h=_.evaluate(n),h&&h instanceof zi&&!h.available&&(s||(s=h.name),h=null,g===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class ll{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let _=1;_<n.length-1;_+=2){const x=n[_];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);const S=s.parse(n[_+1],_+1);if(!S)return null;h.push([x,S])}const g=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return g?new ll(h,g):null}outputDefined(){return this.result.outputDefined()}}class ul{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,ut),g=s.parse(n[2],2,me(s.expectedType||sn));return h&&g?new ul(g.type.itemType,h,g):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new Qn(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new Qn(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new Qn(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class pu{constructor(n,s){this.type=jt,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,sn),g=s.parse(n[2],2,sn);return h&&g?$e(h.type,[jt,Nt,ut,ot,sn])?new pu(h,g):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Fe(s,["boolean","string","number","null"]))throw new Qn(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(wr(s))} instead.`);if(!Fe(h,["string","array"]))throw new Qn(`Expected second argument to be of type array or string, but found ${Ie(wr(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Bs{constructor(n,s,h){this.type=ut,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,sn),g=s.parse(n[2],2,sn);if(!h||!g)return null;if(!$e(h.type,[jt,Nt,ut,ot,sn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(h.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,ut);return _?new Bs(h,g,_):null}return new Bs(h,g)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Fe(s,["boolean","string","number","null"]))throw new Qn(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(wr(s))} instead.`);if(!Fe(h,["string","array"]))throw new Qn(`Expected second argument to be of type array or string, but found ${Ie(wr(h))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(n);return h.indexOf(s,g)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class mu{constructor(n,s,h,g,_,x){this.inputType=n,this.type=s,this.input=h,this.cases=g,this.outputs=_,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,g;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);const _={},x=[];for(let O=2;O<n.length-1;O+=2){let X=n[O];const Y=n[O+1];Array.isArray(X)||(X=[X]);const se=s.concat(O);if(X.length===0)return se.error("Expected at least one branch label.");for(const ge of X){if(typeof ge!="number"&&typeof ge!="string")return se.error("Branch labels must be numbers or strings.");if(typeof ge=="number"&&Math.abs(ge)>Number.MAX_SAFE_INTEGER)return se.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ge=="number"&&Math.floor(ge)!==ge)return se.error("Numeric branch labels must be integer values.");if(h){if(se.checkSubtype(h,wr(ge)))return null}else h=wr(ge);if(_[String(ge)]!==void 0)return se.error("Branch labels must be unique.");_[String(ge)]=x.length}const fe=s.parse(Y,O,g);if(!fe)return null;g=g||fe.type,x.push(fe)}const S=s.parse(n[1],1,sn);if(!S)return null;const k=s.parse(n[n.length-1],n.length-1,g);return k?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new mu(h,g,S,_,x,k):null}evaluate(n){const s=this.input.evaluate(n);return(wr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class gu{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const g=[];for(let x=1;x<n.length-1;x+=2){const S=s.parse(n[x],x,jt);if(!S)return null;const k=s.parse(n[x+1],x+1,h);if(!k)return null;g.push([S,k]),h=h||k.type}const _=s.parse(n[n.length-1],n.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new gu(h,g,_)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class cl{constructor(n,s,h,g){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=g}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,sn),g=s.parse(n[2],2,ut);if(!h||!g)return null;if(!$e(h.type,[me(sn),Nt,sn]))return s.error(`Expected first argument to be of type array or string, but found ${Ie(h.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,ut);return _?new cl(h.type,h,g,_):null}return new cl(h.type,h,g)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Fe(s,["string","array"]))throw new Qn(`Expected first argument to be of type array or string, but found ${Ie(wr(s))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(n);return s.slice(h,g)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function dc(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function fc(o,n,s,h){return h.compare(n,s)===0}function Ns(o,n,s){const h=o!=="=="&&o!=="!=";return class pC{constructor(_,x,S){this.type=jt,this.lhs=_,this.rhs=x,this.collator=S,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const S=_[0];let k=x.parse(_[1],1,sn);if(!k)return null;if(!dc(S,k.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${Ie(k.type)}'.`);let O=x.parse(_[2],2,sn);if(!O)return null;if(!dc(S,O.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${Ie(O.type)}'.`);if(k.type.kind!==O.type.kind&&k.type.kind!=="value"&&O.type.kind!=="value")return x.error(`Cannot compare types '${Ie(k.type)}' and '${Ie(O.type)}'.`);h&&(k.type.kind==="value"&&O.type.kind!=="value"?k=new _i(O.type,[k]):k.type.kind!=="value"&&O.type.kind==="value"&&(O=new _i(k.type,[O])));let X=null;if(_.length===4){if(k.type.kind!=="string"&&O.type.kind!=="string"&&k.type.kind!=="value"&&O.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(X=x.parse(_[3],3,ki),!X)return null}return new pC(k,O,X)}evaluate(_){const x=this.lhs.evaluate(_),S=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const k=wr(x),O=wr(S);if(k.kind!==O.kind||k.kind!=="string"&&k.kind!=="number")throw new Qn(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${k.kind}, ${O.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const k=wr(x),O=wr(S);if(k.kind!=="string"||O.kind!=="string")return n(_,x,S)}return this.collator?s(_,x,S,this.collator.evaluate(_)):n(_,x,S)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const pc=Ns("==",function(o,n,s){return n===s},fc),yu=Ns("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!fc(0,n,s,h)}),Hh=Ns("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),Wh=Ns(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),Zh=Ns("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),Xh=Ns(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class hl{constructor(n,s,h,g,_){this.type=Nt,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,ut);if(!h)return null;const g=n[2];if(typeof g!="object"||Array.isArray(g))return s.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=s.parse(g.locale,1,Nt),!_))return null;let x=null;if(g.currency&&(x=s.parse(g.currency,1,Nt),!x))return null;let S=null;if(g["min-fraction-digits"]&&(S=s.parse(g["min-fraction-digits"],1,ut),!S))return null;let k=null;return g["max-fraction-digits"]&&(k=s.parse(g["max-fraction-digits"],1,ut),!k)?null:new hl(h,_,x,S,k)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class dl{constructor(n){this.type=rr,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const g=[];let _=!1;for(let x=1;x<=n.length-1;++x){const S=n[x];if(_&&typeof S=="object"&&!Array.isArray(S)){_=!1;let k=null;if(S["font-scale"]&&(k=s.parse(S["font-scale"],1,ut),!k))return null;let O=null;if(S["text-font"]&&(O=s.parse(S["text-font"],1,me(Nt)),!O))return null;let X=null;if(S["text-color"]&&(X=s.parse(S["text-color"],1,mn),!X))return null;const Y=g[g.length-1];Y.scale=k,Y.font=O,Y.textColor=X}else{const k=s.parse(n[x],1,sn);if(!k)return null;const O=k.type.kind;if(O!=="string"&&O!=="value"&&O!=="null"&&O!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:k,scale:null,font:null,textColor:null})}}return new dl(g)}evaluate(n){return new vi(this.sections.map(s=>{const h=s.content.evaluate(n);return wr(h)===re?new Eo("",h,null,null,null):new Eo(fa(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class vu{constructor(n){this.type=re,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Nt);return h?new vu(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=zi.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class _u{constructor(n){this.type=ut,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Ie(h.type)} instead.`):new _u(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new Qn(`Expected value to be of type string or array, but found ${Ie(wr(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Us={"==":pc,"!=":yu,">":Wh,"<":Hh,">=":Xh,"<=":Zh,array:_i,at:ul,boolean:_i,case:gu,coalesce:al,collator:Ds,format:dl,image:vu,in:pu,"index-of":Bs,interpolate:Jr,"interpolate-hcl":Jr,"interpolate-lab":Jr,length:_u,let:ll,literal:Xo,match:mu,number:_i,"number-format":hl,object:_i,slice:cl,step:wa,string:_i,"to-boolean":fo,"to-color":fo,"to-number":fo,"to-string":fo,var:ya,within:gs};function ba(o,[n,s,h,g]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const _=g?g.evaluate(o):1,x=ci(n,s,h,_);if(x)throw new Qn(x);return new Bn(n/255,s/255,h/255,_,!1)}function mc(o,n){return o in n}function Ko(o,n){const s=n[o];return s===void 0?null:s}function Yo(o){return{type:o}}function Zi(o){return{result:"success",value:o}}function $s(o){return{result:"error",value:o}}function Vs(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function gc(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function xu(o){return!!o.expression&&o.expression.interpolated}function kn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function fl(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function pl(o){return o}function yc(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",g=h||!(h||o.property!==void 0),_=o.type||(xu(n)?"exponential":"interval");if(s||n.type==="padding"){const X=s?Bn.parse:ui.parse;(o=Se({},o)).stops&&(o.stops=o.stops.map(Y=>[Y[0],X(Y[1])])),o.default=X(o.default?o.default:n.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let S,k,O;if(_==="exponential")S=In;else if(_==="interval")S=vc;else if(_==="categorical"){S=er,k=Object.create(null);for(const X of o.stops)k[X[0]]=X[1];O=typeof o.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);S=wu}if(h){const X={},Y=[];for(let ge=0;ge<o.stops.length;ge++){const Ce=o.stops[ge],ze=Ce[0].zoom;X[ze]===void 0&&(X[ze]={zoom:ze,type:o.type,property:o.property,default:o.default,stops:[]},Y.push(ze)),X[ze].stops.push([Ce[0].value,Ce[1]])}const se=[];for(const ge of Y)se.push([X[ge].zoom,yc(X[ge],n)]);const fe={name:"linear"};return{kind:"composite",interpolationType:fe,interpolationFactor:Jr.interpolationFactor.bind(void 0,fe),zoomStops:se.map(ge=>ge[0]),evaluate:({zoom:ge},Ce)=>In({stops:se,base:o.base},n,ge).evaluate(ge,Ce)}}if(g){const X=_==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:X,interpolationFactor:Jr.interpolationFactor.bind(void 0,X),zoomStops:o.stops.map(Y=>Y[0]),evaluate:({zoom:Y})=>S(o,n,Y,k,O)}}return{kind:"source",evaluate(X,Y){const se=Y&&Y.properties?Y.properties[o.property]:void 0;return se===void 0?Sa(o.default,n.default):S(o,n,se,k,O)}}}function Sa(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function er(o,n,s,h,g){return Sa(typeof s===g?h[s]:void 0,o.default,n.default)}function vc(o,n,s){if(kn(s)!=="number")return Sa(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const g=xa(o.stops.map(_=>_[0]),s);return o.stops[g][1]}function In(o,n,s){const h=o.base!==void 0?o.base:1;if(kn(s)!=="number")return Sa(o.default,n.default);const g=o.stops.length;if(g===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[g-1][0])return o.stops[g-1][1];const _=xa(o.stops.map(X=>X[0]),s),x=function(X,Y,se,fe){const ge=fe-se,Ce=X-se;return ge===0?0:Y===1?Ce/ge:(Math.pow(Y,Ce)-1)/(Math.pow(Y,ge)-1)}(s,h,o.stops[_][0],o.stops[_+1][0]),S=o.stops[_][1],k=o.stops[_+1][1],O=Yr[n.type]||pl;return typeof S.evaluate=="function"?{evaluate(...X){const Y=S.evaluate.apply(void 0,X),se=k.evaluate.apply(void 0,X);if(Y!==void 0&&se!==void 0)return O(Y,se,x,o.colorSpace)}}:O(S,k,x,o.colorSpace)}function wu(o,n,s){switch(n.type){case"color":s=Bn.parse(s);break;case"formatted":s=vi.fromString(s.toString());break;case"resolvedImage":s=zi.fromString(s.toString());break;case"padding":s=ui.parse(s);break;default:kn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return Sa(s,o.default,n.default)}xi.register(Us,{error:[{kind:"error"},[Nt],(o,[n])=>{throw new Qn(n.evaluate(o))}],typeof:[Nt,[sn],(o,[n])=>Ie(wr(n.evaluate(o)))],"to-rgba":[me(ut,4),[mn],(o,[n])=>{const[s,h,g,_]=n.evaluate(o).rgb;return[255*s,255*h,255*g,_]}],rgb:[mn,[ut,ut,ut],ba],rgba:[mn,[ut,ut,ut,ut],ba],has:{type:jt,overloads:[[[Nt],(o,[n])=>mc(n.evaluate(o),o.properties())],[[Nt,_n],(o,[n,s])=>mc(n.evaluate(o),s.evaluate(o))]]},get:{type:sn,overloads:[[[Nt],(o,[n])=>Ko(n.evaluate(o),o.properties())],[[Nt,_n],(o,[n,s])=>Ko(n.evaluate(o),s.evaluate(o))]]},"feature-state":[sn,[Nt],(o,[n])=>Ko(n.evaluate(o),o.featureState||{})],properties:[_n,[],o=>o.properties()],"geometry-type":[Nt,[],o=>o.geometryType()],id:[sn,[],o=>o.id()],zoom:[ut,[],o=>o.globals.zoom],"heatmap-density":[ut,[],o=>o.globals.heatmapDensity||0],"line-progress":[ut,[],o=>o.globals.lineProgress||0],accumulated:[sn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[ut,Yo(ut),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[ut,Yo(ut),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:ut,overloads:[[[ut,ut],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[ut],(o,[n])=>-n.evaluate(o)]]},"/":[ut,[ut,ut],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[ut,[ut,ut],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[ut,[],()=>Math.LN2],pi:[ut,[],()=>Math.PI],e:[ut,[],()=>Math.E],"^":[ut,[ut,ut],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[ut,[ut],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[ut,[ut],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[ut,[ut],(o,[n])=>Math.log(n.evaluate(o))],log2:[ut,[ut],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[ut,[ut],(o,[n])=>Math.sin(n.evaluate(o))],cos:[ut,[ut],(o,[n])=>Math.cos(n.evaluate(o))],tan:[ut,[ut],(o,[n])=>Math.tan(n.evaluate(o))],asin:[ut,[ut],(o,[n])=>Math.asin(n.evaluate(o))],acos:[ut,[ut],(o,[n])=>Math.acos(n.evaluate(o))],atan:[ut,[ut],(o,[n])=>Math.atan(n.evaluate(o))],min:[ut,Yo(ut),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[ut,Yo(ut),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[ut,[ut],(o,[n])=>Math.abs(n.evaluate(o))],round:[ut,[ut],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[ut,[ut],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[ut,[ut],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[jt,[Nt,sn],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[jt,[sn],(o,[n])=>o.id()===n.value],"filter-type-==":[jt,[Nt],(o,[n])=>o.geometryType()===n.value],"filter-<":[jt,[Nt,sn],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h<g}],"filter-id-<":[jt,[sn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[jt,[Nt,sn],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h>g}],"filter-id->":[jt,[sn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[jt,[Nt,sn],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[jt,[sn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[jt,[Nt,sn],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[jt,[sn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[jt,[sn],(o,[n])=>n.value in o.properties()],"filter-has-id":[jt,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[jt,[me(Nt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[jt,[me(sn)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[jt,[Nt,me(sn)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[jt,[Nt,me(sn)],(o,[n,s])=>function(h,g,_,x){for(;_<=x;){const S=_+x>>1;if(g[S]===h)return!0;g[S]>h?x=S-1:_=S+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:jt,overloads:[[[jt,jt],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Yo(jt),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Yo(jt),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[jt,[jt],(o,[n])=>!n.evaluate(o)],"is-supported-script":[jt,[Nt],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Nt,[Nt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Nt,[Nt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Nt,Yo(sn),(o,n)=>n.map(s=>fa(s.evaluate(o))).join("")],"resolved-locale":[Nt,[ki],(o,[n])=>n.evaluate(o).resolvedLocale()]});class qn{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new Vn,this._defaultValue=s?(h=s).type==="color"&&fl(h.default)?new Bn(0,0,0,0):h.type==="color"?Bn.parse(h.default)||null:h.type==="padding"?ui.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Mi.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,g,_,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,g,_,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Qn(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Nn(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Us}function wi(o,n){const s=new ps(Us,va,[],n?function(g){const _={color:mn,string:Nt,number:ut,enum:Nt,boolean:jt,formatted:rr,padding:Me,resolvedImage:re,variableAnchorOffsetCollection:ue};return g.type==="array"?me(_[g.value]||sn,g.length):_[g.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Zi(new qn(h,n)):$s(s.errors)}class ml{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!ys(s.expression)}evaluateWithoutErrorHandling(n,s,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,g,_,x)}evaluate(n,s,h,g,_,x){return this._styleExpression.evaluate(n,s,h,g,_,x)}}class gl{constructor(n,s,h,g){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!ys(s.expression),this.interpolationType=g}evaluateWithoutErrorHandling(n,s,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,g,_,x)}evaluate(n,s,h,g,_,x){return this._styleExpression.evaluate(n,s,h,g,_,x)}interpolationFactor(n,s,h){return this.interpolationType?Jr.interpolationFactor(this.interpolationType,n,s,h):0}}function Ea(o,n){const s=wi(o,n);if(s.result==="error")return s;const h=s.value.expression,g=ol(h);if(!g&&!Vs(n))return $s([new Ve("","data expressions not supported")]);const _=_a(h,["zoom"]);if(!_&&!gc(n))return $s([new Ve("","zoom expressions not supported")]);const x=To(h);return x||_?x instanceof Ve?$s([x]):x instanceof Jr&&!xu(n)?$s([new Ve("",'"interpolate" expressions cannot be used with this property')]):Zi(x?new gl(g?"camera":"composite",s.value,x.labels,x instanceof Jr?x.interpolation:void 0):new ml(g?"constant":"source",s.value)):$s([new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class yl{constructor(n,s){this._parameters=n,this._specification=s,Se(this,yc(this._parameters,this._specification))}static deserialize(n){return new yl(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function To(o){let n=null;if(o instanceof ll)n=To(o.result);else if(o instanceof al){for(const s of o.args)if(n=To(s),n)break}else(o instanceof wa||o instanceof Jr)&&o.input instanceof xi&&o.input.name==="zoom"&&(n=o);return n instanceof Ve||o.eachChild(s=>{const h=To(s);h instanceof Ve?n=h:!n&&h?n=new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new Ve("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Co(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Co(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Qr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function po(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Co(o)||(o=_l(o));const n=wi(o,Qr);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,g)=>n.value.evaluate(s,h,{},g),needGeometry:Gs(o)}}function vl(o,n){return o<n?-1:o>n?1:0}function Gs(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(Gs(o[n]))return!0;return!1}function _l(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Hs(o[1],o[2],"=="):n==="!="?Io(Hs(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Hs(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(_l))):n==="all"?["all"].concat(o.slice(1).map(_l)):n==="none"?["all"].concat(o.slice(1).map(_l).map(Io)):n==="in"?Ta(o[1],o.slice(2)):n==="!in"?Io(Ta(o[1],o.slice(2))):n==="has"?Oi(o[1]):n==="!has"?Io(Oi(o[1])):n!=="within"||o;var s}function Hs(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Ta(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(vl)]]:["filter-in-small",o,["literal",n]]}}function Oi(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Io(o){return["!",o]}function xl(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let g="[";for(const _ of o)g+=`${xl(_)},`;return`${g}]`}const s=Object.keys(o).sort();let h="{";for(let g=0;g<s.length;g++)h+=`${JSON.stringify(s[g])}:${xl(o[s[g]])},`;return`${h}}`}function wl(o){let n="";for(const s of ln)n+=`/${xl(o[s])}`;return n}function Ca(o){const n=o.value;return n?[new z(o.key,n,"constants have been deprecated as of v8")]:[]}function tr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Ao(o){if(Array.isArray(o))return o.map(Ao);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=Ao(o[s]);return n}return tr(o)}function ei(o){const n=o.key,s=o.value,h=o.valueSpec||{},g=o.objectElementValidators||{},_=o.style,x=o.styleSpec,S=o.validateSpec;let k=[];const O=kn(s);if(O!=="object")return[new z(n,s,`object expected, ${O} found`)];for(const X in s){const Y=X.split(".")[0],se=h[Y]||h["*"];let fe;if(g[Y])fe=g[Y];else if(h[Y])fe=S;else if(g["*"])fe=g["*"];else{if(!h["*"]){k.push(new z(n,s[X],`unknown property "${X}"`));continue}fe=S}k=k.concat(fe({key:(n&&`${n}.`)+X,value:s[X],valueSpec:se,style:_,styleSpec:x,object:s,objectKey:X,validateSpec:S},s))}for(const X in h)g[X]||h[X].required&&h[X].default===void 0&&s[X]===void 0&&k.push(new z(n,s,`missing required property "${X}"`));return k}function bl(o){const n=o.value,s=o.valueSpec,h=o.style,g=o.styleSpec,_=o.key,x=o.arrayElementValidator||o.validateSpec;if(kn(n)!=="array")return[new z(_,n,`array expected, ${kn(n)} found`)];if(s.length&&n.length!==s.length)return[new z(_,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new z(_,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let S={type:s.value,values:s.values};g.$version<7&&(S.function=s.function),kn(s.value)==="object"&&(S=s.value);let k=[];for(let O=0;O<n.length;O++)k=k.concat(x({array:n,arrayIndex:O,value:n[O],valueSpec:S,validateSpec:o.validateSpec,style:h,styleSpec:g,key:`${_}[${O}]`}));return k}function Xi(o){const n=o.key,s=o.value,h=o.valueSpec;let g=kn(s);return g==="number"&&s!=s&&(g="NaN"),g!=="number"?[new z(n,s,`number expected, ${g} found`)]:"minimum"in h&&s<h.minimum?[new z(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new z(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function bu(o){const n=o.valueSpec,s=tr(o.value.type);let h,g,_,x={};const S=s!=="categorical"&&o.value.property===void 0,k=!S,O=kn(o.value.stops)==="array"&&kn(o.value.stops[0])==="array"&&kn(o.value.stops[0][0])==="object",X=ei({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(fe){if(s==="identity")return[new z(fe.key,fe.value,'identity function may not have a "stops" property')];let ge=[];const Ce=fe.value;return ge=ge.concat(bl({key:fe.key,value:Ce,valueSpec:fe.valueSpec,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,arrayElementValidator:Y})),kn(Ce)==="array"&&Ce.length===0&&ge.push(new z(fe.key,Ce,"array must have at least one stop")),ge},default:function(fe){return fe.validateSpec({key:fe.key,value:fe.value,valueSpec:n,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec})}}});return s==="identity"&&S&&X.push(new z(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||X.push(new z(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!xu(o.valueSpec)&&X.push(new z(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(k&&!Vs(o.valueSpec)?X.push(new z(o.key,o.value,"property functions not supported")):S&&!gc(o.valueSpec)&&X.push(new z(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!O||o.value.property!==void 0||X.push(new z(o.key,o.value,'"property" property is required')),X;function Y(fe){let ge=[];const Ce=fe.value,ze=fe.key;if(kn(Ce)!=="array")return[new z(ze,Ce,`array expected, ${kn(Ce)} found`)];if(Ce.length!==2)return[new z(ze,Ce,`array length 2 expected, length ${Ce.length} found`)];if(O){if(kn(Ce[0])!=="object")return[new z(ze,Ce,`object expected, ${kn(Ce[0])} found`)];if(Ce[0].zoom===void 0)return[new z(ze,Ce,"object stop key must have zoom")];if(Ce[0].value===void 0)return[new z(ze,Ce,"object stop key must have value")];if(_&&_>tr(Ce[0].zoom))return[new z(ze,Ce[0].zoom,"stop zoom values must appear in ascending order")];tr(Ce[0].zoom)!==_&&(_=tr(Ce[0].zoom),g=void 0,x={}),ge=ge.concat(ei({key:`${ze}[0]`,value:Ce[0],valueSpec:{zoom:{}},validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{zoom:Xi,value:se}}))}else ge=ge.concat(se({key:`${ze}[0]`,value:Ce[0],valueSpec:{},validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec},Ce));return Nn(Ao(Ce[1]))?ge.concat([new z(`${ze}[1]`,Ce[1],"expressions are not allowed in function stops.")]):ge.concat(fe.validateSpec({key:`${ze}[1]`,value:Ce[1],valueSpec:n,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec}))}function se(fe,ge){const Ce=kn(fe.value),ze=tr(fe.value),Ue=fe.value!==null?fe.value:ge;if(h){if(Ce!==h)return[new z(fe.key,Ue,`${Ce} stop domain type must match previous stop domain type ${h}`)]}else h=Ce;if(Ce!=="number"&&Ce!=="string"&&Ce!=="boolean")return[new z(fe.key,Ue,"stop domain value must be a number, string, or boolean")];if(Ce!=="number"&&s!=="categorical"){let Je=`number expected, ${Ce} found`;return Vs(n)&&s===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new z(fe.key,Ue,Je)]}return s!=="categorical"||Ce!=="number"||isFinite(ze)&&Math.floor(ze)===ze?s!=="categorical"&&Ce==="number"&&g!==void 0&&ze<g?[new z(fe.key,Ue,"stop domain values must appear in ascending order")]:(g=ze,s==="categorical"&&ze in x?[new z(fe.key,Ue,"stop domain values must be unique")]:(x[ze]=!0,[])):[new z(fe.key,Ue,`integer expected, found ${ze}`)]}}function Jo(o){const n=(o.expressionContext==="property"?Ea:wi)(Ao(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new z(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new z(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!ys(s))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!ys(s))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!_a(s,["zoom","feature-state"]))return[new z(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!ol(s))return[new z(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Po(o){const n=o.key,s=o.value,h=o.valueSpec,g=[];return Array.isArray(h.values)?h.values.indexOf(tr(s))===-1&&g.push(new z(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(tr(s))===-1&&g.push(new z(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),g}function Qo(o){return Co(Ao(o.value))?Jo(Se({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Sl(o)}function Sl(o){const n=o.value,s=o.key;if(kn(n)!=="array")return[new z(s,n,`array expected, ${kn(n)} found`)];const h=o.styleSpec;let g,_=[];if(n.length<1)return[new z(s,n,"filter array must have at least 1 element")];switch(_=_.concat(Po({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),tr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&tr(n[1])==="$type"&&_.push(new z(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&_.push(new z(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(g=kn(n[1]),g!=="string"&&_.push(new z(`${s}[1]`,n[1],`string expected, ${g} found`)));for(let x=2;x<n.length;x++)g=kn(n[x]),tr(n[1])==="$type"?_=_.concat(Po({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new z(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)_=_.concat(Sl({key:`${s}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":g=kn(n[1]),n.length!==2?_.push(new z(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new z(`${s}[1]`,n[1],`string expected, ${g} found`));break;case"within":g=kn(n[1]),n.length!==2?_.push(new z(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):g!=="object"&&_.push(new z(`${s}[1]`,n[1],`object expected, ${g} found`))}return _}function Ia(o,n){const s=o.key,h=o.validateSpec,g=o.style,_=o.styleSpec,x=o.value,S=o.objectKey,k=_[`${n}_${o.layerType}`];if(!k)return[];const O=S.match(/^(.*)-transition$/);if(n==="paint"&&O&&k[O[1]]&&k[O[1]].transition)return h({key:s,value:x,valueSpec:_.transition,style:g,styleSpec:_});const X=o.valueSpec||k[S];if(!X)return[new z(s,x,`unknown property "${S}"`)];let Y;if(kn(x)==="string"&&Vs(X)&&!X.tokens&&(Y=/^{([^}]+)}$/.exec(x)))return[new z(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Y[1])} }\`.`)];const se=[];return o.layerType==="symbol"&&(S==="text-field"&&g&&!g.glyphs&&se.push(new z(s,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&fl(Ao(x))&&tr(x.type)==="identity"&&se.push(new z(s,x,'"text-font" does not support identity functions'))),se.concat(h({key:o.key,value:x,valueSpec:X,style:g,styleSpec:_,expressionContext:"property",propertyType:n,propertyKey:S}))}function El(o){return Ia(o,"paint")}function G(o){return Ia(o,"layout")}function ye(o){let n=[];const s=o.value,h=o.key,g=o.style,_=o.styleSpec;s.type||s.ref||n.push(new z(h,s,'either "type" or "ref" is required'));let x=tr(s.type);const S=tr(s.ref);if(s.id){const k=tr(s.id);for(let O=0;O<o.arrayIndex;O++){const X=g.layers[O];tr(X.id)===k&&n.push(new z(h,s.id,`duplicate layer id "${s.id}", previously used at line ${X.id.__line__}`))}}if("ref"in s){let k;["type","source","source-layer","filter","layout"].forEach(O=>{O in s&&n.push(new z(h,s[O],`"${O}" is prohibited for ref layers`))}),g.layers.forEach(O=>{tr(O.id)===S&&(k=O)}),k?k.ref?n.push(new z(h,s.ref,"ref cannot reference another ref layer")):x=tr(k.type):n.push(new z(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){const k=g.sources&&g.sources[s.source],O=k&&tr(k.type);k?O==="vector"&&x==="raster"?n.push(new z(h,s.source,`layer "${s.id}" requires a raster source`)):O!=="raster-dem"&&x==="hillshade"?n.push(new z(h,s.source,`layer "${s.id}" requires a raster-dem source`)):O==="raster"&&x!=="raster"?n.push(new z(h,s.source,`layer "${s.id}" requires a vector source`)):O!=="vector"||s["source-layer"]?O==="raster-dem"&&x!=="hillshade"?n.push(new z(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||O==="geojson"&&k.lineMetrics||n.push(new z(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new z(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new z(h,s.source,`source "${s.source}" not found`))}else n.push(new z(h,s,'missing required property "source"'));return n=n.concat(ei({key:h,value:s,valueSpec:_.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:_.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Qo,layout:k=>ei({layer:s,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":O=>G(Se({layerType:x},O))}}),paint:k=>ei({layer:s,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":O=>El(Se({layerType:x},O))}})}})),n}function Be(o){const n=o.value,s=o.key,h=kn(n);return h!=="string"?[new z(s,n,`string expected, ${h} found`)]:[]}const at={promoteId:function({key:o,value:n}){if(kn(n)==="string")return Be({key:o,value:n});{const s=[];for(const h in n)s.push(...Be({key:`${o}.${h}`,value:n[h]}));return s}}};function Ot(o){const n=o.value,s=o.key,h=o.styleSpec,g=o.style,_=o.validateSpec;if(!n.type)return[new z(s,n,'"type" is required')];const x=tr(n.type);let S;switch(x){case"vector":case"raster":return S=ei({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:at,validateSpec:_}),S;case"raster-dem":return S=function(k){var O;const X=(O=k.sourceName)!==null&&O!==void 0?O:"",Y=k.value,se=k.styleSpec,fe=se.source_raster_dem,ge=k.style;let Ce=[];const ze=kn(Y);if(Y===void 0)return Ce;if(ze!=="object")return Ce.push(new z("source_raster_dem",Y,`object expected, ${ze} found`)),Ce;const Ue=tr(Y.encoding)==="custom",Je=["redFactor","greenFactor","blueFactor","baseShift"],Ge=k.value.encoding?`"${k.value.encoding}"`:"Default";for(const qe in Y)!Ue&&Je.includes(qe)?Ce.push(new z(qe,Y[qe],`In "${X}": "${qe}" is only valid when "encoding" is set to "custom". ${Ge} encoding found`)):fe[qe]?Ce=Ce.concat(k.validateSpec({key:qe,value:Y[qe],valueSpec:fe[qe],validateSpec:k.validateSpec,style:ge,styleSpec:se})):Ce.push(new z(qe,Y[qe],`unknown property "${qe}"`));return Ce}({sourceName:s,value:n,style:o.style,styleSpec:h,validateSpec:_}),S;case"geojson":if(S=ei({key:s,value:n,valueSpec:h.source_geojson,style:g,styleSpec:h,validateSpec:_,objectElementValidators:at}),n.cluster)for(const k in n.clusterProperties){const[O,X]=n.clusterProperties[k],Y=typeof O=="string"?[O,["accumulated"],["get",k]]:O;S.push(...Jo({key:`${s}.${k}.map`,value:X,validateSpec:_,expressionContext:"cluster-map"})),S.push(...Jo({key:`${s}.${k}.reduce`,value:Y,validateSpec:_,expressionContext:"cluster-reduce"}))}return S;case"video":return ei({key:s,value:n,valueSpec:h.source_video,style:g,validateSpec:_,styleSpec:h});case"image":return ei({key:s,value:n,valueSpec:h.source_image,style:g,validateSpec:_,styleSpec:h});case"canvas":return[new z(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Po({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,validateSpec:_,styleSpec:h})}}function Ct(o){const n=o.value,s=o.styleSpec,h=s.light,g=o.style;let _=[];const x=kn(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new z("light",n,`object expected, ${x} found`)]),_;for(const S in n){const k=S.match(/^(.*)-transition$/);_=_.concat(k&&h[k[1]]&&h[k[1]].transition?o.validateSpec({key:S,value:n[S],valueSpec:s.transition,validateSpec:o.validateSpec,style:g,styleSpec:s}):h[S]?o.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:o.validateSpec,style:g,styleSpec:s}):[new z(S,n[S],`unknown property "${S}"`)])}return _}function Ht(o){const n=o.value,s=o.styleSpec,h=s.sky,g=o.style,_=kn(n);if(n===void 0)return[];if(_!=="object")return[new z("sky",n,`object expected, ${_} found`)];let x=[];for(const S in n)x=x.concat(h[S]?An({key:S,value:n[S],valueSpec:h[S],style:g,styleSpec:s}):[new z(S,n[S],`unknown property "${S}"`)]);return x}function Wt(o){const n=o.value,s=o.styleSpec,h=s.terrain,g=o.style;let _=[];const x=kn(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new z("terrain",n,`object expected, ${x} found`)]),_;for(const S in n)_=_.concat(h[S]?o.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:o.validateSpec,style:g,styleSpec:s}):[new z(S,n[S],`unknown property "${S}"`)]);return _}function gn(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const g=[],_=[];for(const x in s)s[x].id&&g.includes(s[x].id)&&n.push(new z(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),g.push(s[x].id),s[x].url&&_.includes(s[x].url)&&n.push(new z(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),_.push(s[x].url),n=n.concat(ei({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return Be({key:h,value:s})}const En={"*":()=>[],array:bl,boolean:function(o){const n=o.value,s=o.key,h=kn(n);return h!=="boolean"?[new z(s,n,`boolean expected, ${h} found`)]:[]},number:Xi,color:function(o){const n=o.key,s=o.value,h=kn(s);return h!=="string"?[new z(n,s,`color expected, ${h} found`)]:Bn.parse(String(s))?[]:[new z(n,s,`color expected, "${s}" found`)]},constants:Ca,enum:Po,filter:Qo,function:bu,layer:ye,object:ei,source:Ot,light:Ct,sky:Ht,terrain:Wt,string:Be,formatted:function(o){return Be(o).length===0?[]:Jo(o)},resolvedImage:function(o){return Be(o).length===0?[]:Jo(o)},padding:function(o){const n=o.key,s=o.value;if(kn(s)==="array"){if(s.length<1||s.length>4)return[new z(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let g=[];for(let _=0;_<s.length;_++)g=g.concat(o.validateSpec({key:`${n}[${_}]`,value:s[_],validateSpec:o.validateSpec,valueSpec:h}));return g}return Xi({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,h=kn(s),g=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new z(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<s.length;x+=2)_=_.concat(Po({key:`${n}[${x}]`,value:s[x],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(bl({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:g}));return _},sprite:gn};function An(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=An,s.expression&&fl(tr(n))?bu(o):s.expression&&Nn(Ao(n))?Jo(o):s.type&&En[s.type]?En[s.type](o):ei(Se({},o,{valueSpec:s.type?h[s.type]:s}))}function Kn(o){const n=o.value,s=o.key,h=Be(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new z(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new z(s,n,'"glyphs" url must include a "{range}" token'))),h}function Un(o,n=et){let s=[];return s=s.concat(An({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:An,objectElementValidators:{glyphs:Kn,"*":()=>[]}})),o.constants&&(s=s.concat(Ca({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:An}))),cr(s)}function Yn(o){return function(n){return o({...n,validateSpec:An})}}function cr(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function Rr(o){return function(...n){return cr(o.apply(this,n))}}Un.source=Rr(Yn(Ot)),Un.sprite=Rr(Yn(gn)),Un.glyphs=Rr(Yn(Kn)),Un.light=Rr(Yn(Ct)),Un.sky=Rr(Yn(Ht)),Un.terrain=Rr(Yn(Wt)),Un.layer=Rr(Yn(ye)),Un.filter=Rr(Yn(Qo)),Un.paintProperty=Rr(Yn(El)),Un.layoutProperty=Rr(Yn(G));const ri=Un,_s=ri.light,Tl=ri.paintProperty,Cl=ri.layoutProperty;function ko(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new an(new Error(h.message))),s=!0;return s}class Su{constructor(n,s,h){const g=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let k=0;k<this.d*this.d;k++){const O=x[3+k],X=x[3+k+1];g.push(O===X?null:x.subarray(O,X))}const S=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const _=h/s*n;this.min=-_,this.max=n+_}insert(n,s,h,g,_){this._forEachCell(s,h,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,g,_,x){this.cells[_].push(x)}query(n,s,h,g,_){const x=this.min,S=this.max;if(n<=x&&s<=x&&S<=h&&S<=g&&!_)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(n,s,h,g,this._queryCell,k,{},_),k}}_queryCell(n,s,h,g,_,x,S,k){const O=this.cells[_];if(O!==null){const X=this.keys,Y=this.bboxes;for(let se=0;se<O.length;se++){const fe=O[se];if(S[fe]===void 0){const ge=4*fe;(k?k(Y[ge+0],Y[ge+1],Y[ge+2],Y[ge+3]):n<=Y[ge+2]&&s<=Y[ge+3]&&h>=Y[ge+0]&&g>=Y[ge+1])?(S[fe]=!0,x.push(X[fe])):S[fe]=!1}}}}_forEachCell(n,s,h,g,_,x,S,k){const O=this._convertToCellCoord(n),X=this._convertToCellCoord(s),Y=this._convertToCellCoord(h),se=this._convertToCellCoord(g);for(let fe=O;fe<=Y;fe++)for(let ge=X;ge<=se;ge++){const Ce=this.d*ge+fe;if((!k||k(this._convertFromCellCoord(fe),this._convertFromCellCoord(ge),this._convertFromCellCoord(fe+1),this._convertFromCellCoord(ge+1)))&&_.call(this,n,s,h,g,Ce,x,S,k))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const g=new Int32Array(s+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=s;for(let x=0;x<n.length;x++){const S=n[x];g[3+x]=_,g.set(S,_),_+=S.length}return g[3+n.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+n.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Su(n.buffer)}}const es={};function Ut(o,n,s={}){if(es[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),es[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Ut("Object",Object),Ut("TransferableGridIndex",Su),Ut("Color",Bn),Ut("Error",Error),Ut("AJAXError",dt),Ut("ResolvedImage",zi),Ut("StylePropertyFunction",yl),Ut("StyleExpression",qn,{omit:["_evaluator"]}),Ut("ZoomDependentExpression",gl),Ut("ZoomConstantExpression",ml),Ut("CompoundExpression",xi,{omit:["_evaluate"]});for(const o in Us)Us[o]._classRegistryKey||Ut(`Expression_${o}`,Us[o]);function _c(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Il(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error)return o;if(_c(o)||te(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(Il(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${s.name}`);if(!es[h])throw new Error(`${h} is not registered.`);const g=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&g===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in o){if(!o.hasOwnProperty(_)||es[h].omit.indexOf(_)>=0)continue;const x=o[_];g[_]=es[h].shallow.indexOf(_)>=0?x:Il(x,n)}o instanceof Error&&(g.message=o.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(g.$name=h),g}throw new Error("can't serialize object of type "+typeof o)}function Al(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||_c(o)||te(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Al);if(typeof o=="object"){const n=o.$name||"Object";if(!es[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=es[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const g of Object.keys(o)){if(g==="$name")continue;const _=o[g];h[g]=es[n].shallow.indexOf(g)>=0?_:Al(_)}return h}throw new Error("can't deserialize object of type "+typeof o)}class tp{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Lt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Pl(o){for(const n of o)if(xc(n.charCodeAt(0)))return!0;return!1}function np(o){for(const n of o)if(!rp(n.charCodeAt(0)))return!1;return!0}function rp(o){return!(Lt.Arabic(o)||Lt["Arabic Supplement"](o)||Lt["Arabic Extended-A"](o)||Lt["Arabic Presentation Forms-A"](o)||Lt["Arabic Presentation Forms-B"](o))}function xc(o){return!(o!==746&&o!==747&&(o<4352||!(Lt["Bopomofo Extended"](o)||Lt.Bopomofo(o)||Lt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Lt["CJK Compatibility Ideographs"](o)||Lt["CJK Compatibility"](o)||Lt["CJK Radicals Supplement"](o)||Lt["CJK Strokes"](o)||!(!Lt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Lt["CJK Unified Ideographs Extension A"](o)||Lt["CJK Unified Ideographs"](o)||Lt["Enclosed CJK Letters and Months"](o)||Lt["Hangul Compatibility Jamo"](o)||Lt["Hangul Jamo Extended-A"](o)||Lt["Hangul Jamo Extended-B"](o)||Lt["Hangul Jamo"](o)||Lt["Hangul Syllables"](o)||Lt.Hiragana(o)||Lt["Ideographic Description Characters"](o)||Lt.Kanbun(o)||Lt["Kangxi Radicals"](o)||Lt["Katakana Phonetic Extensions"](o)||Lt.Katakana(o)&&o!==12540||!(!Lt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Lt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Lt["Unified Canadian Aboriginal Syllabics"](o)||Lt["Unified Canadian Aboriginal Syllabics Extended"](o)||Lt["Vertical Forms"](o)||Lt["Yijing Hexagram Symbols"](o)||Lt["Yi Syllables"](o)||Lt["Yi Radicals"](o))))}function qh(o){return!(xc(o)||function(n){return!!(Lt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Lt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Lt["Letterlike Symbols"](n)||Lt["Number Forms"](n)||Lt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Lt["Control Pictures"](n)&&n!==9251||Lt["Optical Character Recognition"](n)||Lt["Enclosed Alphanumerics"](n)||Lt["Geometric Shapes"](n)||Lt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Lt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Lt["CJK Symbols and Punctuation"](n)||Lt.Katakana(n)||Lt["Private Use Area"](n)||Lt["CJK Compatibility Forms"](n)||Lt["Small Form Variants"](n)||Lt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function wc(o){return o>=1424&&o<=2303||Lt["Arabic Presentation Forms-A"](o)||Lt["Arabic Presentation Forms-B"](o)}function ip(o,n){return!(!n&&wc(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Lt.Khmer(o))}function fy(o){for(const n of o)if(wc(n.charCodeAt(0)))return!0;return!1}const Ws=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class or{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new tp,this.transition={})}isSupportedScript(n){return function(s,h){for(const g of s)if(!ip(g.charCodeAt(0),h))return!1;return!0}(n,Ws.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class Eu{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,g){if(fl(h))return new yl(h,g);if(Nn(h)){const _=Ea(h,g);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=h;return g.type==="color"&&typeof h=="string"?_=Bn.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(_=Mi.parse(h)):_=ui.parse(h),{kind:"constant",evaluate:()=>_}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class bc{constructor(n){this.property=n,this.value=new Eu(n,void 0)}transitioned(n,s){return new op(this.property,this.value,s,E({},n.transition,this.transition),n.now)}untransitioned(){return new op(this.property,this.value,null,{},0)}}class Kh{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return W(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new bc(this._values[n].property)),this._values[n].value=new Eu(this._values[n].property,s===null?void 0:W(s))}getTransition(n){return W(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new bc(this._values[n].property)),this._values[n].transition=W(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const g=this.getTransition(s);g!==void 0&&(n[`${s}-transition`]=g)}return n}transitioned(n,s){const h=new sp(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(n,s._values[g]);return h}untransitioned(){const n=new sp(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class op{constructor(n,s,h,g,_){this.property=n,this.value=s,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,n.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const g=n.now||0,_=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return x.possiblyEvaluate(n,s,h);{const S=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),_,function(k){if(k<=0)return 0;if(k>=1)return 1;const O=k*k,X=O*k;return 4*(k<.5?X:3*(k-O)+X-.75)}(S))}}return _}}class sp{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const g=new Tu(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(n,s,h);return g}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class ap{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return W(this._values[n].value)}setValue(n,s){this._values[n]=new Eu(this._values[n].property,s===null?void 0:W(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const g=new Tu(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(n,s,h);return g}}class Mo{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,g){return this.property.evaluate(this.value,this.parameters,n,s,h,g)}}class Tu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class qt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const g=Yr[this.specification.type];return g?g(n,s,h):n}}class tn{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,g){return new Mo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,g)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Mo(this,{kind:"constant",value:void 0},n.parameters);const g=Yr[this.specification.type];if(g){const _=g(n.value.value,s.value.value,h);return new Mo(this,{kind:"constant",value:_},n.parameters)}return n}evaluate(n,s,h,g,_,x){return n.kind==="constant"?n.value:n.evaluate(s,h,g,_,x)}}class Sc extends tn{possiblyEvaluate(n,s,h,g){if(n.value===void 0)return new Mo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},h,g),x=n.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,S=this._calculate(x,x,x,s);return new Mo(this,{kind:"constant",value:S},s)}if(n.expression.kind==="camera"){const _=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Mo(this,{kind:"constant",value:_},s)}return new Mo(this,n.expression,s)}evaluate(n,s,h,g,_,x){if(n.kind==="source"){const S=n.evaluate(s,h,g,_,x);return this._calculate(S,S,S,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,g),n.evaluate({zoom:Math.floor(s.zoom)},h,g),n.evaluate({zoom:Math.floor(s.zoom)+1},h,g),s):n.value}_calculate(n,s,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Cu{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,g){if(n.value!==void 0){if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},h,g);return this._calculate(_,_,_,s)}return this._calculate(n.expression.evaluate(new or(Math.floor(s.zoom-1),s)),n.expression.evaluate(new or(Math.floor(s.zoom),s)),n.expression.evaluate(new or(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Yh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,g){return!!n.expression.evaluate(s,null,{},h,g)}interpolate(){return!1}}class Li{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const g=this.defaultPropertyValues[s]=new Eu(h,void 0),_=this.defaultTransitionablePropertyValues[s]=new bc(h);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=g.possiblyEvaluate({})}}}Ut("DataDrivenProperty",tn),Ut("DataConstantProperty",qt),Ut("CrossFadedDataDrivenProperty",Sc),Ut("CrossFadedProperty",Cu),Ut("ColorRampProperty",Yh);const Jh="-transition";class zo extends Sn{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new ap(s.layout)),s.paint)){this._transitionablePaint=new Kh(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Tu(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(Cl,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(Jh)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(Tl,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(Jh))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const g=this._transitionablePaint._values[n],_=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),S=g.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const k=this._transitionablePaint._values[n].value;return k.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(n,S,k)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ee(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,g,_={}){return(!_||_.validate!==!1)&&ko(this,n.call(ri,{key:s,layerType:this.type,objectKey:h,value:g,styleSpec:et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Mo&&Vs(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const lp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Iu{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class mr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Tr(o,n=1){let s=0,h=0;return{members:o.map(g=>{const _=lp[g.type].BYTES_PER_ELEMENT,x=s=up(s,Math.max(n,_)),S=g.components||1;return h=Math.max(h,_),s+=_*S,{name:g.name,type:g.type,components:S,offset:x}}),size:up(s,Math.max(h,n)),alignment:n}}function up(o,n){return Math.ceil(o/n)*n}class Au extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const g=2*n;return this.int16[g+0]=s,this.int16[g+1]=h,n}}Au.prototype.bytesPerElement=4,Ut("StructArrayLayout2i4",Au);class xs extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.int16[_+0]=s,this.int16[_+1]=h,this.int16[_+2]=g,n}}xs.prototype.bytesPerElement=6,Ut("StructArrayLayout3i6",xs);class Qh extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,g)}emplace(n,s,h,g,_){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=g,this.int16[x+3]=_,n}}Qh.prototype.bytesPerElement=8,Ut("StructArrayLayout4i8",Qh);class ed extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,S){const k=6*n;return this.int16[k+0]=s,this.int16[k+1]=h,this.int16[k+2]=g,this.int16[k+3]=_,this.int16[k+4]=x,this.int16[k+5]=S,n}}ed.prototype.bytesPerElement=12,Ut("StructArrayLayout2i4i12",ed);class td extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,S){const k=4*n,O=8*n;return this.int16[k+0]=s,this.int16[k+1]=h,this.uint8[O+4]=g,this.uint8[O+5]=_,this.uint8[O+6]=x,this.uint8[O+7]=S,n}}td.prototype.bytesPerElement=8,Ut("StructArrayLayout2i4ub8",td);class Pu extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const g=2*n;return this.float32[g+0]=s,this.float32[g+1]=h,n}}Pu.prototype.bytesPerElement=8,Ut("StructArrayLayout2f8",Pu);class Ec extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,S,k,O,X){const Y=this.length;return this.resize(Y+1),this.emplace(Y,n,s,h,g,_,x,S,k,O,X)}emplace(n,s,h,g,_,x,S,k,O,X,Y){const se=10*n;return this.uint16[se+0]=s,this.uint16[se+1]=h,this.uint16[se+2]=g,this.uint16[se+3]=_,this.uint16[se+4]=x,this.uint16[se+5]=S,this.uint16[se+6]=k,this.uint16[se+7]=O,this.uint16[se+8]=X,this.uint16[se+9]=Y,n}}Ec.prototype.bytesPerElement=20,Ut("StructArrayLayout10ui20",Ec);class nd extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,S,k,O,X,Y,se){const fe=this.length;return this.resize(fe+1),this.emplace(fe,n,s,h,g,_,x,S,k,O,X,Y,se)}emplace(n,s,h,g,_,x,S,k,O,X,Y,se,fe){const ge=12*n;return this.int16[ge+0]=s,this.int16[ge+1]=h,this.int16[ge+2]=g,this.int16[ge+3]=_,this.uint16[ge+4]=x,this.uint16[ge+5]=S,this.uint16[ge+6]=k,this.uint16[ge+7]=O,this.int16[ge+8]=X,this.int16[ge+9]=Y,this.int16[ge+10]=se,this.int16[ge+11]=fe,n}}nd.prototype.bytesPerElement=24,Ut("StructArrayLayout4i4ui4i24",nd);class rd extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.float32[_+0]=s,this.float32[_+1]=h,this.float32[_+2]=g,n}}rd.prototype.bytesPerElement=12,Ut("StructArrayLayout3f12",rd);class ws extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}ws.prototype.bytesPerElement=4,Ut("StructArrayLayout1ul4",ws);class Tc extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,S,k,O){const X=this.length;return this.resize(X+1),this.emplace(X,n,s,h,g,_,x,S,k,O)}emplace(n,s,h,g,_,x,S,k,O,X){const Y=10*n,se=5*n;return this.int16[Y+0]=s,this.int16[Y+1]=h,this.int16[Y+2]=g,this.int16[Y+3]=_,this.int16[Y+4]=x,this.int16[Y+5]=S,this.uint32[se+3]=k,this.uint16[Y+8]=O,this.uint16[Y+9]=X,n}}Tc.prototype.bytesPerElement=20,Ut("StructArrayLayout6i1ul2ui20",Tc);class ku extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,S){const k=6*n;return this.int16[k+0]=s,this.int16[k+1]=h,this.int16[k+2]=g,this.int16[k+3]=_,this.int16[k+4]=x,this.int16[k+5]=S,n}}ku.prototype.bytesPerElement=12,Ut("StructArrayLayout2i2i2i12",ku);class Cc extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,g,_)}emplace(n,s,h,g,_,x){const S=4*n,k=8*n;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=g,this.int16[k+6]=_,this.int16[k+7]=x,n}}Cc.prototype.bytesPerElement=16,Ut("StructArrayLayout2f1f2i16",Cc);class Mu extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,g)}emplace(n,s,h,g,_){const x=12*n,S=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=h,this.float32[S+1]=g,this.float32[S+2]=_,n}}Mu.prototype.bytesPerElement=12,Ut("StructArrayLayout2ub2f12",Mu);class Ic extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.uint16[_+0]=s,this.uint16[_+1]=h,this.uint16[_+2]=g,n}}Ic.prototype.bytesPerElement=6,Ut("StructArrayLayout3ui6",Ic);class kl extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,S,k,O,X,Y,se,fe,ge,Ce,ze,Ue){const Je=this.length;return this.resize(Je+1),this.emplace(Je,n,s,h,g,_,x,S,k,O,X,Y,se,fe,ge,Ce,ze,Ue)}emplace(n,s,h,g,_,x,S,k,O,X,Y,se,fe,ge,Ce,ze,Ue,Je){const Ge=24*n,qe=12*n,mt=48*n;return this.int16[Ge+0]=s,this.int16[Ge+1]=h,this.uint16[Ge+2]=g,this.uint16[Ge+3]=_,this.uint32[qe+2]=x,this.uint32[qe+3]=S,this.uint32[qe+4]=k,this.uint16[Ge+10]=O,this.uint16[Ge+11]=X,this.uint16[Ge+12]=Y,this.float32[qe+7]=se,this.float32[qe+8]=fe,this.uint8[mt+36]=ge,this.uint8[mt+37]=Ce,this.uint8[mt+38]=ze,this.uint32[qe+10]=Ue,this.int16[Ge+22]=Je,n}}kl.prototype.bytesPerElement=48,Ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",kl);class Aa extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,S,k,O,X,Y,se,fe,ge,Ce,ze,Ue,Je,Ge,qe,mt,vt,Dt,Gt,Ft,zt,It,$t){const Mt=this.length;return this.resize(Mt+1),this.emplace(Mt,n,s,h,g,_,x,S,k,O,X,Y,se,fe,ge,Ce,ze,Ue,Je,Ge,qe,mt,vt,Dt,Gt,Ft,zt,It,$t)}emplace(n,s,h,g,_,x,S,k,O,X,Y,se,fe,ge,Ce,ze,Ue,Je,Ge,qe,mt,vt,Dt,Gt,Ft,zt,It,$t,Mt){const Et=32*n,en=16*n;return this.int16[Et+0]=s,this.int16[Et+1]=h,this.int16[Et+2]=g,this.int16[Et+3]=_,this.int16[Et+4]=x,this.int16[Et+5]=S,this.int16[Et+6]=k,this.int16[Et+7]=O,this.uint16[Et+8]=X,this.uint16[Et+9]=Y,this.uint16[Et+10]=se,this.uint16[Et+11]=fe,this.uint16[Et+12]=ge,this.uint16[Et+13]=Ce,this.uint16[Et+14]=ze,this.uint16[Et+15]=Ue,this.uint16[Et+16]=Je,this.uint16[Et+17]=Ge,this.uint16[Et+18]=qe,this.uint16[Et+19]=mt,this.uint16[Et+20]=vt,this.uint16[Et+21]=Dt,this.uint16[Et+22]=Gt,this.uint32[en+12]=Ft,this.float32[en+13]=zt,this.float32[en+14]=It,this.uint16[Et+30]=$t,this.uint16[Et+31]=Mt,n}}Aa.prototype.bytesPerElement=64,Ut("StructArrayLayout8i15ui1ul2f2ui64",Aa);class Ac extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}Ac.prototype.bytesPerElement=4,Ut("StructArrayLayout1f4",Ac);class Pc extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.uint16[6*n+0]=s,this.float32[_+1]=h,this.float32[_+2]=g,n}}Pc.prototype.bytesPerElement=12,Ut("StructArrayLayout1ui2f12",Pc);class Pa extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=4*n;return this.uint32[2*n+0]=s,this.uint16[_+2]=h,this.uint16[_+3]=g,n}}Pa.prototype.bytesPerElement=8,Ut("StructArrayLayout1ul2ui8",Pa);class id extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const g=2*n;return this.uint16[g+0]=s,this.uint16[g+1]=h,n}}id.prototype.bytesPerElement=4,Ut("StructArrayLayout2ui4",id);class od extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}od.prototype.bytesPerElement=2,Ut("StructArrayLayout1ui2",od);class kc extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,g)}emplace(n,s,h,g,_){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=g,this.float32[x+3]=_,n}}kc.prototype.bytesPerElement=16,Ut("StructArrayLayout4f16",kc);class cp extends Iu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new w(this.anchorPointX,this.anchorPointY)}}cp.prototype.size=20;class y extends Tc{get(n){return new cp(this,n)}}Ut("CollisionBoxArray",y);class r extends Iu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}r.prototype.size=48;class l extends kl{get(n){return new r(this,n)}}Ut("PlacedSymbolArray",l);class f extends Iu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}f.prototype.size=64;class m extends Aa{get(n){return new f(this,n)}}Ut("SymbolInstanceArray",m);class v extends Ac{getoffsetX(n){return this.float32[1*n+0]}}Ut("GlyphOffsetArray",v);class I extends xs{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Ut("SymbolLineVertexArray",I);class P extends Iu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}P.prototype.size=12;class M extends Pc{get(n){return new P(this,n)}}Ut("TextAnchorOffsetArray",M);class H extends Iu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}H.prototype.size=8;class Q extends Pa{get(n){return new H(this,n)}}Ut("FeatureIndexArray",Q);class ne extends Au{}class pe extends Au{}class ke extends Au{}class Pe extends ed{}class Le extends td{}class Te extends Pu{}class Ze extends Ec{}class rt extends nd{}class je extends rd{}class Ke extends ws{}class it extends ku{}class st extends Mu{}class lt extends Ic{}class bt extends id{}const xt=Tr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Tt}=xt;class At{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,g){let _=this.segments[this.segments.length-1];return n>At.MAX_VERTEX_ARRAY_LENGTH&&_e(`Max vertices per segment is ${At.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!_||_.vertexLength+n>At.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g)&&(_={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},g!==void 0&&(_.sortKey=g),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,g){return new At([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function yn(o,n){return 256*(o=q(Math.floor(o),0,255))+q(Math.floor(n),0,255)}At.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ut("SegmentVector",At);const kt=Tr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var nn={exports:{}},vn={exports:{}};vn.exports=function(o,n){var s,h,g,_,x,S,k,O;for(h=o.length-(s=3&o.length),g=n,x=3432918353,S=461845907,O=0;O<h;)k=255&o.charCodeAt(O)|(255&o.charCodeAt(++O))<<8|(255&o.charCodeAt(++O))<<16|(255&o.charCodeAt(++O))<<24,++O,g=27492+(65535&(_=5*(65535&(g=(g^=k=(65535&(k=(k=(65535&k)*x+(((k>>>16)*x&65535)<<16)&4294967295)<<15|k>>>17))*S+(((k>>>16)*S&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(k=0,s){case 3:k^=(255&o.charCodeAt(O+2))<<16;case 2:k^=(255&o.charCodeAt(O+1))<<8;case 1:g^=k=(65535&(k=(k=(65535&(k^=255&o.charCodeAt(O)))*x+(((k>>>16)*x&65535)<<16)&4294967295)<<15|k>>>17))*S+(((k>>>16)*S&65535)<<16)&4294967295}return g^=o.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var Rn=vn.exports,cn={exports:{}};cn.exports=function(o,n){for(var s,h=o.length,g=n^h,_=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(_)|(255&o.charCodeAt(++_))<<8|(255&o.charCodeAt(++_))<<16|(255&o.charCodeAt(++_))<<24))+((1540483477*(s>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++_;switch(h){case 3:g^=(255&o.charCodeAt(_+2))<<16;case 2:g^=(255&o.charCodeAt(_+1))<<8;case 1:g=1540483477*(65535&(g^=255&o.charCodeAt(_)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var xn=Rn,Tn=cn.exports;nn.exports=xn,nn.exports.murmur3=xn,nn.exports.murmur2=Tn;var gr=b(nn.exports);class Hn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,g){this.ids.push(qi(n)),this.positions.push(s,h,g)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=qi(n);let h=0,g=this.ids.length-1;for(;h<g;){const x=h+g>>1;this.ids[x]>=s?g=x:h=x+1}const _=[];for(;this.ids[h]===s;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(n,s){const h=new Float64Array(n.ids),g=new Uint32Array(n.positions);return $r(h,g,0,h.length-1),s&&s.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(n){const s=new Hn;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function qi(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:gr(String(o))}function $r(o,n,s,h){for(;s<h;){const g=o[s+h>>1];let _=s-1,x=h+1;for(;;){do _++;while(o[_]<g);do x--;while(o[x]>g);if(_>=x)break;hr(o,_,x),hr(n,3*_,3*x),hr(n,3*_+1,3*x+1),hr(n,3*_+2,3*x+2)}x-s<h-x?($r(o,n,s,x),s=x+1):($r(o,n,x+1,h),h=x)}}function hr(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}Ut("FeaturePositionMap",Hn);class Vr{constructor(n,s){this.gl=n.gl,this.location=s}}class Ki extends Vr{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class ts extends Vr{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Zs extends Vr{constructor(n,s){super(n,s),this.current=Bn.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const zu=new Float32Array(16);function Xs(o){return[yn(255*o.r,255*o.g),yn(255*o.b,255*o.a)]}class ns{constructor(n,s,h){this.value=n,this.uniformNames=s.map(g=>`u_${g}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Zs(n,s):new Ki(n,s)}}class Or{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&n.set(_)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new ts(n,s):new Ki(n,s)}}class dr{constructor(n,s,h,g){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(n,s,h,g,_){const x=this.paintVertexArray.length,S=this.expression.evaluate(new or(0),s,{},g,[],_);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,s,h,g){const _=this.expression.evaluate({zoom:0},h,g);this._setPaintValue(n,s,_)}_setPaintValue(n,s,h){if(this.type==="color"){const g=Xs(h);for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=n;g<s;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class sr{constructor(n,s,h,g,_,x){this.expression=n,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,g,_){const x=this.expression.evaluate(new or(this.zoom),s,{},g,[],_),S=this.expression.evaluate(new or(this.zoom+1),s,{},g,[],_),k=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(k,n,x,S)}updatePaintArray(n,s,h,g){const _=this.expression.evaluate({zoom:this.zoom},h,g),x=this.expression.evaluate({zoom:this.zoom+1},h,g);this._setPaintValue(n,s,_,x)}_setPaintValue(n,s,h,g){if(this.type==="color"){const _=Xs(h),x=Xs(g);for(let S=n;S<s;S++)this.paintVertexArray.emplace(S,_[0],_[1],x[0],x[1])}else{for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,g=q(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(g)}getBinding(n,s,h){return new Ki(n,s)}}class mo{constructor(n,s,h,g,_,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(n,s,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(g,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,g,_){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(n,s,h,g){if(!g||!h)return;const{min:_,mid:x,max:S}=h,k=g[_],O=g[x],X=g[S];if(k&&O&&X)for(let Y=n;Y<s;Y++)this.zoomInPaintVertexArray.emplace(Y,O.tl[0],O.tl[1],O.br[0],O.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],O.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace(Y,O.tl[0],O.tl[1],O.br[0],O.br[1],X.tl[0],X.tl[1],X.br[0],X.br[1],O.pixelRatio,X.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,kt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,kt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Lr{constructor(n,s,h){this.binders={},this._buffers=[];const g=[];for(const _ in n.paint._values){if(!h(_))continue;const x=n.paint.get(_);if(!(x instanceof Mo&&Vs(x.property.specification)))continue;const S=go(_,n.type),k=x.value,O=x.property.specification.type,X=x.property.useIntegerZoom,Y=x.property.specification["property-type"],se=Y==="cross-faded"||Y==="cross-faded-data-driven";if(k.kind==="constant")this.binders[_]=se?new Or(k.value,S):new ns(k.value,S,O),g.push(`/u_${_}`);else if(k.kind==="source"||se){const fe=Fr(_,O,"source");this.binders[_]=se?new mo(k,O,X,s,fe,n.id):new dr(k,S,O,fe),g.push(`/a_${_}`)}else{const fe=Fr(_,O,"composite");this.binders[_]=new sr(k,S,O,X,s,fe),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof dr||s instanceof sr?s.maxValue:0}populatePaintArrays(n,s,h,g,_){for(const x in this.binders){const S=this.binders[x];(S instanceof dr||S instanceof sr||S instanceof mo)&&S.populatePaintArray(n,s,h,g,_)}}setConstantPatternPositions(n,s){for(const h in this.binders){const g=this.binders[h];g instanceof Or&&g.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,g,_){let x=!1;for(const S in n){const k=s.getPositions(S);for(const O of k){const X=h.feature(O.index);for(const Y in this.binders){const se=this.binders[Y];if((se instanceof dr||se instanceof sr||se instanceof mo)&&se.expression.isStateDependent===!0){const fe=g.paint.get(Y);se.expression=fe.value,se.updatePaintArray(O.start,O.end,X,n[S],_),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof ns||h instanceof Or)&&n.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof dr||h instanceof sr)for(let g=0;g<h.paintVertexAttributes.length;g++)n.push(h.paintVertexAttributes[g].name);else if(h instanceof mo)for(let g=0;g<kt.members.length;g++)n.push(kt.members[g].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof ns||h instanceof Or||h instanceof sr)for(const g of h.uniformNames)n.push(g)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof ns||_ instanceof Or||_ instanceof sr){for(const x of _.uniformNames)if(s[x]){const S=_.getBinding(n,s[x],x);h.push({name:x,property:g,binding:S})}}}return h}setUniforms(n,s,h,g){for(const{name:_,property:x,binding:S}of s)this.binders[x].setUniform(S,g,h.get(x),_)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof mo){const g=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof dr||h instanceof sr)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof dr||h instanceof sr||h instanceof mo)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof dr||s instanceof sr||s instanceof mo)&&s.destroy()}}}class fr{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const g of n)this.programConfigurations[g.id]=new Lr(g,s,h);this.needsUpload=!1,this._featureMap=new Hn,this._bufferOffset=0}populatePaintArrays(n,s,h,g,_,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,s,g,_,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,g){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(n,this._featureMap,s,_,g)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function go(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function Fr(o,n,s){const h={color:{source:Pu,composite:kc},number:{source:Ac,composite:Pu}},g=function(_){return{"line-pattern":{source:Ze,composite:Ze},"fill-pattern":{source:Ze,composite:Ze},"fill-extrusion-pattern":{source:Ze,composite:Ze}}[_]}(o);return g&&g[s]||h[n][s]}Ut("ConstantBinder",ns),Ut("CrossFadedConstantBinder",Or),Ut("SourceExpressionBinder",dr),Ut("CrossFadedCompositeBinder",mo),Ut("CompositeExpressionBinder",sr),Ut("ProgramConfiguration",Lr,{omit:["_buffers"]}),Ut("ProgramConfigurationSet",fr);const br=8192,sd=Math.pow(2,14)-1,hp=-sd-1;function ka(o){const n=br/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const g=s[h];for(let _=0;_<g.length;_++){const x=g[_],S=Math.round(x.x*n),k=Math.round(x.y*n);x.x=q(S,hp,sd),x.y=q(k,hp,sd),(S<x.x||S>x.x+1||k<x.y||k>x.y+1)&&_e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Ma(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?ka(o):[]}}function Mc(o,n,s,h,g){o.emplaceBack(2*n+(h+1)/2,2*s+(g+1)/2)}class qs{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new pe,this.indexArray=new lt,this.segments=new At,this.programConfigurations=new fr(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const g=this.layers[0],_=[];let x=null,S=!1;g.type==="circle"&&(x=g.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:k,id:O,index:X,sourceLayerIndex:Y}of n){const se=this.layers[0]._featureFilter.needGeometry,fe=Ma(k,se);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),fe,h))continue;const ge=S?x.evaluate(fe,{},h):void 0,Ce={id:O,properties:k.properties,type:k.type,sourceLayerIndex:Y,index:X,geometry:se?fe.geometry:ka(k),patterns:{},sortKey:ge};_.push(Ce)}S&&_.sort((k,O)=>k.sortKey-O.sortKey);for(const k of _){const{geometry:O,index:X,sourceLayerIndex:Y}=k,se=n[X].feature;this.addFeature(k,O,X,h),s.featureIndex.insert(se,O,X,Y,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Tt),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,g){for(const _ of s)for(const x of _){const S=x.x,k=x.y;if(S<0||S>=br||k<0||k>=br)continue;const O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),X=O.vertexLength;Mc(this.layoutVertexArray,S,k,-1,-1),Mc(this.layoutVertexArray,S,k,1,-1),Mc(this.layoutVertexArray,S,k,1,1),Mc(this.layoutVertexArray,S,k,-1,1),this.indexArray.emplaceBack(X,X+1,X+2),this.indexArray.emplaceBack(X,X+3,X+2),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},g)}}function ad(o,n){for(let s=0;s<o.length;s++)if(Rc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Rc(o,n[s]))return!0;return!!zc(o,n)}function dp(o,n,s){return!!Rc(o,n)||!!py(n,o,s)}function ld(o,n){if(o.length===1)return Px(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let g=0;g<h.length;g++)if(Rc(o,h[g]))return!0}for(let s=0;s<o.length;s++)if(Px(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(zc(o,n[s]))return!0;return!1}function ud(o,n,s){if(o.length>1){if(zc(o,n))return!0;for(let h=0;h<n.length;h++)if(py(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(py(o[h],n,s))return!0;return!1}function zc(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],g=o[s+1];for(let _=0;_<n.length-1;_++)if(cd(h,g,n[_],n[_+1]))return!0}return!1}function cd(o,n,s,h){return de(o,s,h)!==de(n,s,h)&&de(o,n,s)!==de(o,n,h)}function py(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let g=1;g<n.length;g++)if(Ax(o,n[g-1],n[g])<h)return!0;return!1}function Ax(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const g=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(g<0?n:g>1?s:s.sub(n)._mult(g)._add(n))}function Px(o,n){let s,h,g,_=!1;for(let x=0;x<o.length;x++){s=o[x];for(let S=0,k=s.length-1;S<s.length;k=S++)h=s[S],g=s[k],h.y>n.y!=g.y>n.y&&n.x<(g.x-h.x)*(n.y-h.y)/(g.y-h.y)+h.x&&(_=!_)}return _}function Rc(o,n){let s=!1;for(let h=0,g=o.length-1;h<o.length;g=h++){const _=o[h],x=o[g];_.y>n.y!=x.y>n.y&&n.x<(x.x-_.x)*(n.y-_.y)/(x.y-_.y)+_.x&&(s=!s)}return s}function _A(o,n,s){const h=s[0],g=s[2];if(o.x<h.x&&n.x<h.x||o.x>g.x&&n.x>g.x||o.y<h.y&&n.y<h.y||o.y>g.y&&n.y>g.y)return!1;const _=de(o,n,s[0]);return _!==de(o,n,s[1])||_!==de(o,n,s[2])||_!==de(o,n,s[3])}function hd(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function fp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function pp(o,n,s,h,g){if(!n[0]&&!n[1])return o;const _=w.convert(n)._mult(g);s==="viewport"&&_._rotate(-h);const x=[];for(let S=0;S<o.length;S++)x.push(o[S].sub(_));return x}let kx,Mx;Ut("CircleBucket",qs,{omit:["layers"]});var xA={get paint(){return Mx=Mx||new Li({"circle-radius":new tn(et.paint_circle["circle-radius"]),"circle-color":new tn(et.paint_circle["circle-color"]),"circle-blur":new tn(et.paint_circle["circle-blur"]),"circle-opacity":new tn(et.paint_circle["circle-opacity"]),"circle-translate":new qt(et.paint_circle["circle-translate"]),"circle-translate-anchor":new qt(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qt(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qt(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new tn(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new tn(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new tn(et.paint_circle["circle-stroke-opacity"])})},get layout(){return kx=kx||new Li({"circle-sort-key":new tn(et.layout_circle["circle-sort-key"])})}},Fi=1e-6,Oc=typeof Float32Array<"u"?Float32Array:Array;function my(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function zx(o,n,s){var h=n[0],g=n[1],_=n[2],x=n[3],S=n[4],k=n[5],O=n[6],X=n[7],Y=n[8],se=n[9],fe=n[10],ge=n[11],Ce=n[12],ze=n[13],Ue=n[14],Je=n[15],Ge=s[0],qe=s[1],mt=s[2],vt=s[3];return o[0]=Ge*h+qe*S+mt*Y+vt*Ce,o[1]=Ge*g+qe*k+mt*se+vt*ze,o[2]=Ge*_+qe*O+mt*fe+vt*Ue,o[3]=Ge*x+qe*X+mt*ge+vt*Je,o[4]=(Ge=s[4])*h+(qe=s[5])*S+(mt=s[6])*Y+(vt=s[7])*Ce,o[5]=Ge*g+qe*k+mt*se+vt*ze,o[6]=Ge*_+qe*O+mt*fe+vt*Ue,o[7]=Ge*x+qe*X+mt*ge+vt*Je,o[8]=(Ge=s[8])*h+(qe=s[9])*S+(mt=s[10])*Y+(vt=s[11])*Ce,o[9]=Ge*g+qe*k+mt*se+vt*ze,o[10]=Ge*_+qe*O+mt*fe+vt*Ue,o[11]=Ge*x+qe*X+mt*ge+vt*Je,o[12]=(Ge=s[12])*h+(qe=s[13])*S+(mt=s[14])*Y+(vt=s[15])*Ce,o[13]=Ge*g+qe*k+mt*se+vt*ze,o[14]=Ge*_+qe*O+mt*fe+vt*Ue,o[15]=Ge*x+qe*X+mt*ge+vt*Je,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var dd,wA=zx;function mp(o,n,s){var h=n[0],g=n[1],_=n[2],x=n[3];return o[0]=s[0]*h+s[4]*g+s[8]*_+s[12]*x,o[1]=s[1]*h+s[5]*g+s[9]*_+s[13]*x,o[2]=s[2]*h+s[6]*g+s[10]*_+s[14]*x,o[3]=s[3]*h+s[7]*g+s[11]*_+s[15]*x,o}dd=new Oc(4),Oc!=Float32Array&&(dd[0]=0,dd[1]=0,dd[2]=0,dd[3]=0);class bA extends zo{constructor(n){super(n,xA)}createBucket(n){return new qs(n)}queryRadius(n){const s=n;return hd("circle-radius",this,s)+hd("circle-stroke-width",this,s)+fp(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,g,_,x,S,k){const O=pp(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),X=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),Y=this.paint.get("circle-pitch-alignment")==="map",se=Y?O:function(ge,Ce){return ge.map(ze=>Rx(ze,Ce))}(O,k),fe=Y?X*S:X;for(const ge of g)for(const Ce of ge){const ze=Y?Ce:Rx(Ce,k);let Ue=fe;const Je=mp([],[Ce.x,Ce.y,0,1],k);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ue*=Je[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ue*=x.cameraToCenterDistance/Je[3]),dp(se,ze,Ue))return!0}return!1}}function Rx(o,n){const s=mp([],[o.x,o.y,0,1],n);return new w(s[0]/s[3],s[1]/s[3])}class Ox extends qs{}let Lx;Ut("HeatmapBucket",Ox,{omit:["layers"]});var SA={get paint(){return Lx=Lx||new Li({"heatmap-radius":new tn(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new tn(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qt(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Yh(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qt(et.paint_heatmap["heatmap-opacity"])})}};function gy(o,{width:n,height:s},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${n*s*h}`)}else g=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=g,o}function Fx(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const g=gy({},{width:n,height:s},h);yy(o,g,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=g.data}function yy(o,n,s,h,g,_){if(g.width===0||g.height===0)return n;if(g.width>o.width||g.height>o.height||s.x>o.width-g.width||s.y>o.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>n.width||g.height>n.height||h.x>n.width-g.width||h.y>n.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,S=n.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<g.height;k++){const O=((s.y+k)*o.width+s.x)*_,X=((h.y+k)*n.width+h.x)*_;for(let Y=0;Y<g.width*_;Y++)S[X+Y]=x[O+Y]}return n}class fd{constructor(n,s){gy(this,n,1,s)}resize(n){Fx(this,n,1)}clone(){return new fd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,g,_){yy(n,s,h,g,_,1)}}class Ro{constructor(n,s){gy(this,n,4,s)}resize(n){Fx(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ro({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,g,_){yy(n,s,h,g,_,4)}}function jx(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,g=o.image||new Ro({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const _=(x,S,k)=>{n[o.evaluationKey]=k;const O=o.expression.evaluate(n);g.data[x+S+0]=Math.floor(255*O.r/O.a),g.data[x+S+1]=Math.floor(255*O.g/O.a),g.data[x+S+2]=Math.floor(255*O.b/O.a),g.data[x+S+3]=Math.floor(255*O.a)};if(o.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let k=0,O=0;k<s;k++,O+=4){const X=k/(s-1),{start:Y,end:se}=o.clips[x];_(S,O,Y*(1-X)+se*X)}else for(let x=0,S=0;x<s;x++,S+=4)_(0,S,x/(s-1));return g}Ut("AlphaImage",fd),Ut("RGBAImage",Ro);class EA extends zo{createBucket(n){return new Ox(n)}constructor(n){super(n,SA),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=jx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Dx;var TA={get paint(){return Dx=Dx||new Li({"hillshade-illumination-direction":new qt(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qt(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qt(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qt(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qt(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qt(et.paint_hillshade["hillshade-accent-color"])})}};class CA extends zo{constructor(n){super(n,TA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const IA=Tr([{name:"a_pos",components:2,type:"Int16"}],4),{members:AA}=IA;var vy={exports:{}};function gp(o,n,s){s=s||2;var h,g,_,x,S,k,O,X=n&&n.length,Y=X?n[0]*s:o.length,se=Bx(o,0,Y,s,!0),fe=[];if(!se||se.next===se.prev)return fe;if(X&&(se=function(Ce,ze,Ue,Je){var Ge,qe,mt,vt=[];for(Ge=0,qe=ze.length;Ge<qe;Ge++)(mt=Bx(Ce,ze[Ge]*Je,Ge<qe-1?ze[Ge+1]*Je:Ce.length,Je,!1))===mt.next&&(mt.steiner=!0),vt.push(FA(mt));for(vt.sort(RA),Ge=0;Ge<vt.length;Ge++)Ue=OA(vt[Ge],Ue);return Ue}(o,n,se,s)),o.length>80*s){h=_=o[0],g=x=o[1];for(var ge=s;ge<Y;ge+=s)(S=o[ge])<h&&(h=S),(k=o[ge+1])<g&&(g=k),S>_&&(_=S),k>x&&(x=k);O=(O=Math.max(_-h,x-g))!==0?32767/O:0}return pd(se,fe,s,h,g,O,0),fe}function Bx(o,n,s,h,g){var _,x;if(g===wy(o,n,s,h)>0)for(_=n;_<s;_+=h)x=$x(_,o[_],o[_+1],x);else for(_=s-h;_>=n;_-=h)x=$x(_,o[_],o[_+1],x);return x&&yp(x,x.next)&&(gd(x),x=x.next),x}function Ru(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!yp(h,h.next)&&Cr(h.prev,h,h.next)!==0)h=h.next;else{if(gd(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function pd(o,n,s,h,g,_,x){if(o){!x&&_&&function(X,Y,se,fe){var ge=X;do ge.z===0&&(ge.z=_y(ge.x,ge.y,Y,se,fe)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==X);ge.prevZ.nextZ=null,ge.prevZ=null,function(Ce){var ze,Ue,Je,Ge,qe,mt,vt,Dt,Gt=1;do{for(Ue=Ce,Ce=null,qe=null,mt=0;Ue;){for(mt++,Je=Ue,vt=0,ze=0;ze<Gt&&(vt++,Je=Je.nextZ);ze++);for(Dt=Gt;vt>0||Dt>0&&Je;)vt!==0&&(Dt===0||!Je||Ue.z<=Je.z)?(Ge=Ue,Ue=Ue.nextZ,vt--):(Ge=Je,Je=Je.nextZ,Dt--),qe?qe.nextZ=Ge:Ce=Ge,Ge.prevZ=qe,qe=Ge;Ue=Je}qe.nextZ=null,Gt*=2}while(mt>1)}(ge)}(o,h,g,_);for(var S,k,O=o;o.prev!==o.next;)if(S=o.prev,k=o.next,_?kA(o,h,g,_):PA(o))n.push(S.i/s|0),n.push(o.i/s|0),n.push(k.i/s|0),gd(o),o=k.next,O=k.next;else if((o=k)===O){x?x===1?pd(o=MA(Ru(o),n,s),n,s,h,g,_,2):x===2&&zA(o,n,s,h,g,_):pd(Ru(o),n,s,h,g,_,1);break}}}function PA(o){var n=o.prev,s=o,h=o.next;if(Cr(n,s,h)>=0)return!1;for(var g=n.x,_=s.x,x=h.x,S=n.y,k=s.y,O=h.y,X=g<_?g<x?g:x:_<x?_:x,Y=S<k?S<O?S:O:k<O?k:O,se=g>_?g>x?g:x:_>x?_:x,fe=S>k?S>O?S:O:k>O?k:O,ge=h.next;ge!==n;){if(ge.x>=X&&ge.x<=se&&ge.y>=Y&&ge.y<=fe&&Lc(g,S,_,k,x,O,ge.x,ge.y)&&Cr(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function kA(o,n,s,h){var g=o.prev,_=o,x=o.next;if(Cr(g,_,x)>=0)return!1;for(var S=g.x,k=_.x,O=x.x,X=g.y,Y=_.y,se=x.y,fe=S<k?S<O?S:O:k<O?k:O,ge=X<Y?X<se?X:se:Y<se?Y:se,Ce=S>k?S>O?S:O:k>O?k:O,ze=X>Y?X>se?X:se:Y>se?Y:se,Ue=_y(fe,ge,n,s,h),Je=_y(Ce,ze,n,s,h),Ge=o.prevZ,qe=o.nextZ;Ge&&Ge.z>=Ue&&qe&&qe.z<=Je;){if(Ge.x>=fe&&Ge.x<=Ce&&Ge.y>=ge&&Ge.y<=ze&&Ge!==g&&Ge!==x&&Lc(S,X,k,Y,O,se,Ge.x,Ge.y)&&Cr(Ge.prev,Ge,Ge.next)>=0||(Ge=Ge.prevZ,qe.x>=fe&&qe.x<=Ce&&qe.y>=ge&&qe.y<=ze&&qe!==g&&qe!==x&&Lc(S,X,k,Y,O,se,qe.x,qe.y)&&Cr(qe.prev,qe,qe.next)>=0))return!1;qe=qe.nextZ}for(;Ge&&Ge.z>=Ue;){if(Ge.x>=fe&&Ge.x<=Ce&&Ge.y>=ge&&Ge.y<=ze&&Ge!==g&&Ge!==x&&Lc(S,X,k,Y,O,se,Ge.x,Ge.y)&&Cr(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.prevZ}for(;qe&&qe.z<=Je;){if(qe.x>=fe&&qe.x<=Ce&&qe.y>=ge&&qe.y<=ze&&qe!==g&&qe!==x&&Lc(S,X,k,Y,O,se,qe.x,qe.y)&&Cr(qe.prev,qe,qe.next)>=0)return!1;qe=qe.nextZ}return!0}function MA(o,n,s){var h=o;do{var g=h.prev,_=h.next.next;!yp(g,_)&&Nx(g,h,h.next,_)&&md(g,_)&&md(_,g)&&(n.push(g.i/s|0),n.push(h.i/s|0),n.push(_.i/s|0),gd(h),gd(h.next),h=o=_),h=h.next}while(h!==o);return Ru(h)}function zA(o,n,s,h,g,_){var x=o;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&jA(x,S)){var k=Ux(x,S);return x=Ru(x,x.next),k=Ru(k,k.next),pd(x,n,s,h,g,_,0),void pd(k,n,s,h,g,_,0)}S=S.next}x=x.next}while(x!==o)}function RA(o,n){return o.x-n.x}function OA(o,n){var s=function(g,_){var x,S=_,k=g.x,O=g.y,X=-1/0;do{if(O<=S.y&&O>=S.next.y&&S.next.y!==S.y){var Y=S.x+(O-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(Y<=k&&Y>X&&(X=Y,x=S.x<S.next.x?S:S.next,Y===k))return x}S=S.next}while(S!==_);if(!x)return null;var se,fe=x,ge=x.x,Ce=x.y,ze=1/0;S=x;do k>=S.x&&S.x>=ge&&k!==S.x&&Lc(O<Ce?k:X,O,ge,Ce,O<Ce?X:k,O,S.x,S.y)&&(se=Math.abs(O-S.y)/(k-S.x),md(S,g)&&(se<ze||se===ze&&(S.x>x.x||S.x===x.x&&LA(x,S)))&&(x=S,ze=se)),S=S.next;while(S!==fe);return x}(o,n);if(!s)return n;var h=Ux(s,o);return Ru(h,h.next),Ru(s,s.next)}function LA(o,n){return Cr(o.prev,o,n.prev)<0&&Cr(n.next,o,o.next)<0}function _y(o,n,s,h,g){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*g|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function FA(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function Lc(o,n,s,h,g,_,x,S){return(g-x)*(n-S)>=(o-x)*(_-S)&&(o-x)*(h-S)>=(s-x)*(n-S)&&(s-x)*(_-S)>=(g-x)*(h-S)}function jA(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var g=s;do{if(g.i!==s.i&&g.next.i!==s.i&&g.i!==h.i&&g.next.i!==h.i&&Nx(g,g.next,s,h))return!0;g=g.next}while(g!==s);return!1}(o,n)&&(md(o,n)&&md(n,o)&&function(s,h){var g=s,_=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do g.y>S!=g.next.y>S&&g.next.y!==g.y&&x<(g.next.x-g.x)*(S-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==s);return _}(o,n)&&(Cr(o.prev,o,n.prev)||Cr(o,n.prev,n))||yp(o,n)&&Cr(o.prev,o,o.next)>0&&Cr(n.prev,n,n.next)>0)}function Cr(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function yp(o,n){return o.x===n.x&&o.y===n.y}function Nx(o,n,s,h){var g=_p(Cr(o,n,s)),_=_p(Cr(o,n,h)),x=_p(Cr(s,h,o)),S=_p(Cr(s,h,n));return g!==_&&x!==S||!(g!==0||!vp(o,s,n))||!(_!==0||!vp(o,h,n))||!(x!==0||!vp(s,o,h))||!(S!==0||!vp(s,n,h))}function vp(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function _p(o){return o>0?1:o<0?-1:0}function md(o,n){return Cr(o.prev,o,o.next)<0?Cr(o,n,o.next)>=0&&Cr(o,o.prev,n)>=0:Cr(o,n,o.prev)<0||Cr(o,o.next,n)<0}function Ux(o,n){var s=new xy(o.i,o.x,o.y),h=new xy(n.i,n.x,n.y),g=o.next,_=n.prev;return o.next=n,n.prev=o,s.next=g,g.prev=s,h.next=s,s.prev=h,_.next=h,h.prev=_,h}function $x(o,n,s,h){var g=new xy(o,n,s);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function gd(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function xy(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wy(o,n,s,h){for(var g=0,_=n,x=s-h;_<s;_+=h)g+=(o[x]-o[_])*(o[_+1]+o[x+1]),x=_;return g}vy.exports=gp,vy.exports.default=gp,gp.deviation=function(o,n,s,h){var g=n&&n.length,_=Math.abs(wy(o,0,g?n[0]*s:o.length,s));if(g)for(var x=0,S=n.length;x<S;x++)_-=Math.abs(wy(o,n[x]*s,x<S-1?n[x+1]*s:o.length,s));var k=0;for(x=0;x<h.length;x+=3){var O=h[x]*s,X=h[x+1]*s,Y=h[x+2]*s;k+=Math.abs((o[O]-o[Y])*(o[X+1]-o[O+1])-(o[O]-o[X])*(o[Y+1]-o[O+1]))}return _===0&&k===0?0:Math.abs((k-_)/_)},gp.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,g=0;g<o.length;g++){for(var _=0;_<o[g].length;_++)for(var x=0;x<n;x++)s.vertices.push(o[g][_][x]);g>0&&s.holes.push(h+=o[g-1].length)}return s};var Vx=b(vy.exports);function DA(o,n,s,h,g){Gx(o,n,s||0,h||o.length-1,g||BA)}function Gx(o,n,s,h,g){for(;h>s;){if(h-s>600){var _=h-s+1,x=n-s+1,S=Math.log(_),k=.5*Math.exp(2*S/3),O=.5*Math.sqrt(S*k*(_-k)/_)*(x-_/2<0?-1:1);Gx(o,n,Math.max(s,Math.floor(n-x*k/_+O)),Math.min(h,Math.floor(n+(_-x)*k/_+O)),g)}var X=o[n],Y=s,se=h;for(yd(o,s,n),g(o[h],X)>0&&yd(o,s,h);Y<se;){for(yd(o,Y,se),Y++,se--;g(o[Y],X)<0;)Y++;for(;g(o[se],X)>0;)se--}g(o[s],X)===0?yd(o,s,se):yd(o,++se,h),se<=n&&(s=se+1),n<=se&&(h=se-1)}}function yd(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function BA(o,n){return o<n?-1:o>n?1:0}function by(o,n){const s=o.length;if(s<=1)return[o];const h=[];let g,_;for(let x=0;x<s;x++){const S=ie(o[x]);S!==0&&(o[x].area=Math.abs(S),_===void 0&&(_=S<0),_===S<0?(g&&h.push(g),g=[o[x]]):g.push(o[x]))}if(g&&h.push(g),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(DA(h[x],n,1,h[x].length-1,NA),h[x]=h[x].slice(0,n));return h}function NA(o,n){return n.area-o.area}function Sy(o,n,s){const h=s.patternDependencies;let g=!1;for(const _ of n){const x=_.paint.get(`${o}-pattern`);x.isConstant()||(g=!0);const S=x.constantOr(null);S&&(g=!0,h[S.to]=!0,h[S.from]=!0)}return g}function Ey(o,n,s,h,g){const _=g.patternDependencies;for(const x of n){const S=x.paint.get(`${o}-pattern`).value;if(S.kind!=="constant"){let k=S.evaluate({zoom:h-1},s,{},g.availableImages),O=S.evaluate({zoom:h},s,{},g.availableImages),X=S.evaluate({zoom:h+1},s,{},g.availableImages);k=k&&k.name?k.name:k,O=O&&O.name?O.name:O,X=X&&X.name?X.name:X,_[k]=!0,_[O]=!0,_[X]=!0,s.patterns[x.id]={min:k,mid:O,max:X}}}return s}class Ty{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ke,this.indexArray=new lt,this.indexArray2=new bt,this.programConfigurations=new fr(n.layers,n.zoom),this.segments=new At,this.segments2=new At,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Sy("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),x=[];for(const{feature:S,id:k,index:O,sourceLayerIndex:X}of n){const Y=this.layers[0]._featureFilter.needGeometry,se=Ma(S,Y);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),se,h))continue;const fe=_?g.evaluate(se,{},h,s.availableImages):void 0,ge={id:k,properties:S.properties,type:S.type,sourceLayerIndex:X,index:O,geometry:Y?se.geometry:ka(S),patterns:{},sortKey:fe};x.push(ge)}_&&x.sort((S,k)=>S.sortKey-k.sortKey);for(const S of x){const{geometry:k,index:O,sourceLayerIndex:X}=S;if(this.hasPattern){const Y=Ey("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(Y)}else this.addFeature(S,k,O,h,{});s.featureIndex.insert(n[O].feature,k,O,X,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,AA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,g,_){for(const x of by(s,500)){let S=0;for(const fe of x)S+=fe.length;const k=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),O=k.vertexLength,X=[],Y=[];for(const fe of x){if(fe.length===0)continue;fe!==x[0]&&Y.push(X.length/2);const ge=this.segments2.prepareSegment(fe.length,this.layoutVertexArray,this.indexArray2),Ce=ge.vertexLength;this.layoutVertexArray.emplaceBack(fe[0].x,fe[0].y),this.indexArray2.emplaceBack(Ce+fe.length-1,Ce),X.push(fe[0].x),X.push(fe[0].y);for(let ze=1;ze<fe.length;ze++)this.layoutVertexArray.emplaceBack(fe[ze].x,fe[ze].y),this.indexArray2.emplaceBack(Ce+ze-1,Ce+ze),X.push(fe[ze].x),X.push(fe[ze].y);ge.vertexLength+=fe.length,ge.primitiveLength+=fe.length}const se=Vx(X,Y);for(let fe=0;fe<se.length;fe+=3)this.indexArray.emplaceBack(O+se[fe],O+se[fe+1],O+se[fe+2]);k.vertexLength+=S,k.primitiveLength+=se.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,g)}}let Hx,Wx;Ut("FillBucket",Ty,{omit:["layers","patternFeatures"]});var UA={get paint(){return Wx=Wx||new Li({"fill-antialias":new qt(et.paint_fill["fill-antialias"]),"fill-opacity":new tn(et.paint_fill["fill-opacity"]),"fill-color":new tn(et.paint_fill["fill-color"]),"fill-outline-color":new tn(et.paint_fill["fill-outline-color"]),"fill-translate":new qt(et.paint_fill["fill-translate"]),"fill-translate-anchor":new qt(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new Sc(et.paint_fill["fill-pattern"])})},get layout(){return Hx=Hx||new Li({"fill-sort-key":new tn(et.layout_fill["fill-sort-key"])})}};class $A extends zo{constructor(n){super(n,UA)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Ty(n)}queryRadius(){return fp(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,g,_,x,S){return ld(pp(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),g)}isTileClipped(){return!0}}const VA=Tr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),GA=Tr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:HA}=VA;var Ml={},WA=C,Zx=Fc;function Fc(o,n,s,h,g){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=g,o.readFields(ZA,this,n)}function ZA(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,g){for(var _=h.readVarint()+h.pos;h.pos<_;){var x=g._keys[h.readVarint()],S=g._values[h.readVarint()];g.properties[x]=S}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function XA(o){for(var n,s,h=0,g=0,_=o.length,x=_-1;g<_;x=g++)h+=((s=o[x]).x-(n=o[g]).x)*(n.y+s.y);return h}Fc.types=["Unknown","Point","LineString","Polygon"],Fc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,g=0,_=0,x=0,S=[];o.pos<s;){if(g<=0){var k=o.readVarint();h=7&k,g=k>>3}if(g--,h===1||h===2)_+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&S.push(n),n=[]),n.push(new WA(_,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&S.push(n),S},Fc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,g=0,_=0,x=1/0,S=-1/0,k=1/0,O=-1/0;o.pos<n;){if(h<=0){var X=o.readVarint();s=7&X,h=X>>3}if(h--,s===1||s===2)(g+=o.readSVarint())<x&&(x=g),g>S&&(S=g),(_+=o.readSVarint())<k&&(k=_),_>O&&(O=_);else if(s!==7)throw new Error("unknown command "+s)}return[x,k,S,O]},Fc.prototype.toGeoJSON=function(o,n,s){var h,g,_=this.extent*Math.pow(2,s),x=this.extent*o,S=this.extent*n,k=this.loadGeometry(),O=Fc.types[this.type];function X(fe){for(var ge=0;ge<fe.length;ge++){var Ce=fe[ge];fe[ge]=[360*(Ce.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ce.y+S)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var Y=[];for(h=0;h<k.length;h++)Y[h]=k[h][0];X(k=Y);break;case 2:for(h=0;h<k.length;h++)X(k[h]);break;case 3:for(k=function(fe){var ge=fe.length;if(ge<=1)return[fe];for(var Ce,ze,Ue=[],Je=0;Je<ge;Je++){var Ge=XA(fe[Je]);Ge!==0&&(ze===void 0&&(ze=Ge<0),ze===Ge<0?(Ce&&Ue.push(Ce),Ce=[fe[Je]]):Ce.push(fe[Je]))}return Ce&&Ue.push(Ce),Ue}(k),h=0;h<k.length;h++)for(g=0;g<k[h].length;g++)X(k[h][g])}k.length===1?k=k[0]:O="Multi"+O;var se={type:"Feature",geometry:{type:O,coordinates:k},properties:this.properties};return"id"in this&&(se.id=this.id),se};var qA=Zx,Xx=qx;function qx(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(KA,this,n),this.length=this._features.length}function KA(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var g=null,_=h.readVarint()+h.pos;h.pos<_;){var x=h.readVarint()>>3;g=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return g}(s))}qx.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new qA(this._pbf,n,this.extent,this._keys,this._values)};var YA=Xx;function JA(o,n,s){if(o===3){var h=new YA(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Ml.VectorTile=function(o,n){this.layers=o.readFields(JA,{},n)},Ml.VectorTileFeature=Zx,Ml.VectorTileLayer=Xx;const QA=Ml.VectorTileFeature.types,Cy=Math.pow(2,13);function vd(o,n,s,h,g,_,x,S){o.emplaceBack(n,s,2*Math.floor(h*Cy)+x,g*Cy*2,_*Cy*2,Math.round(S))}class Iy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Pe,this.centroidVertexArray=new ne,this.indexArray=new lt,this.programConfigurations=new fr(n.layers,n.zoom),this.segments=new At,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=Sy("fill-extrusion",this.layers,s);for(const{feature:g,id:_,index:x,sourceLayerIndex:S}of n){const k=this.layers[0]._featureFilter.needGeometry,O=Ma(g,k);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),O,h))continue;const X={id:_,sourceLayerIndex:S,index:x,geometry:k?O.geometry:ka(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Ey("fill-extrusion",this.layers,X,this.zoom,s)):this.addFeature(X,X.geometry,x,h,{}),s.featureIndex.insert(g,X.geometry,x,S,this.index,!0)}}addFeatures(n,s,h){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,HA),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,GA.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,g,_){const x={x:0,y:0,vertexCount:0};for(const S of by(s,500)){let k=0;for(const ge of S)k+=ge.length;let O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ge of S){if(ge.length===0||tP(ge))continue;let Ce=0;for(let ze=0;ze<ge.length;ze++){const Ue=ge[ze];if(ze>=1){const Je=ge[ze-1];if(!eP(Ue,Je)){O.vertexLength+4>At.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ge=Ue.sub(Je)._perp()._unit(),qe=Je.dist(Ue);Ce+qe>32768&&(Ce=0),vd(this.layoutVertexArray,Ue.x,Ue.y,Ge.x,Ge.y,0,0,Ce),vd(this.layoutVertexArray,Ue.x,Ue.y,Ge.x,Ge.y,0,1,Ce),x.x+=2*Ue.x,x.y+=2*Ue.y,x.vertexCount+=2,Ce+=qe,vd(this.layoutVertexArray,Je.x,Je.y,Ge.x,Ge.y,0,0,Ce),vd(this.layoutVertexArray,Je.x,Je.y,Ge.x,Ge.y,0,1,Ce),x.x+=2*Je.x,x.y+=2*Je.y,x.vertexCount+=2;const mt=O.vertexLength;this.indexArray.emplaceBack(mt,mt+2,mt+1),this.indexArray.emplaceBack(mt+1,mt+2,mt+3),O.vertexLength+=4,O.primitiveLength+=2}}}}if(O.vertexLength+k>At.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray)),QA[n.type]!=="Polygon")continue;const X=[],Y=[],se=O.vertexLength;for(const ge of S)if(ge.length!==0){ge!==S[0]&&Y.push(X.length/2);for(let Ce=0;Ce<ge.length;Ce++){const ze=ge[Ce];vd(this.layoutVertexArray,ze.x,ze.y,0,0,1,1,0),x.x+=ze.x,x.y+=ze.y,x.vertexCount+=1,X.push(ze.x),X.push(ze.y)}}const fe=Vx(X,Y);for(let ge=0;ge<fe.length;ge+=3)this.indexArray.emplaceBack(se+fe[ge],se+fe[ge+2],se+fe[ge+1]);O.primitiveLength+=fe.length/3,O.vertexLength+=k}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,g)}}function eP(o,n){return o.x===n.x&&(o.x<0||o.x>br)||o.y===n.y&&(o.y<0||o.y>br)}function tP(o){return o.every(n=>n.x<0)||o.every(n=>n.x>br)||o.every(n=>n.y<0)||o.every(n=>n.y>br)}let Kx;Ut("FillExtrusionBucket",Iy,{omit:["layers","features"]});var nP={get paint(){return Kx=Kx||new Li({"fill-extrusion-opacity":new qt(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new tn(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qt(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qt(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Sc(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new tn(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new tn(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qt(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class rP extends zo{constructor(n){super(n,nP)}createBucket(n){return new Iy(n)}queryRadius(){return fp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,g,_,x,S,k){const O=pp(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),X=this.paint.get("fill-extrusion-height").evaluate(s,h),Y=this.paint.get("fill-extrusion-base").evaluate(s,h),se=function(ge,Ce,ze,Ue){const Je=[];for(const Ge of ge){const qe=[Ge.x,Ge.y,0,1];mp(qe,qe,Ce),Je.push(new w(qe[0]/qe[3],qe[1]/qe[3]))}return Je}(O,k),fe=function(ge,Ce,ze,Ue){const Je=[],Ge=[],qe=Ue[8]*Ce,mt=Ue[9]*Ce,vt=Ue[10]*Ce,Dt=Ue[11]*Ce,Gt=Ue[8]*ze,Ft=Ue[9]*ze,zt=Ue[10]*ze,It=Ue[11]*ze;for(const $t of ge){const Mt=[],Et=[];for(const en of $t){const Zt=en.x,Cn=en.y,nr=Ue[0]*Zt+Ue[4]*Cn+Ue[12],ar=Ue[1]*Zt+Ue[5]*Cn+Ue[13],Hr=Ue[2]*Zt+Ue[6]*Cn+Ue[14],yo=Ue[3]*Zt+Ue[7]*Cn+Ue[15],ji=Hr+vt,jr=yo+Dt,ii=nr+Gt,fi=ar+Ft,Di=Hr+zt,Bi=yo+It,Wr=new w((nr+qe)/jr,(ar+mt)/jr);Wr.z=ji/jr,Mt.push(Wr);const Zr=new w(ii/Bi,fi/Bi);Zr.z=Di/Bi,Et.push(Zr)}Je.push(Mt),Ge.push(Et)}return[Je,Ge]}(g,Y,X,k);return function(ge,Ce,ze){let Ue=1/0;ld(ze,Ce)&&(Ue=Yx(ze,Ce[0]));for(let Je=0;Je<Ce.length;Je++){const Ge=Ce[Je],qe=ge[Je];for(let mt=0;mt<Ge.length-1;mt++){const vt=Ge[mt],Dt=[vt,Ge[mt+1],qe[mt+1],qe[mt],vt];ad(ze,Dt)&&(Ue=Math.min(Ue,Yx(ze,Dt)))}}return Ue!==1/0&&Ue}(fe[0],fe[1],se)}}function _d(o,n){return o.x*n.x+o.y*n.y}function Yx(o,n){if(o.length===1){let s=0;const h=n[s++];let g;for(;!g||h.equals(g);)if(g=n[s++],!g)return 1/0;for(;s<n.length;s++){const _=n[s],x=o[0],S=g.sub(h),k=_.sub(h),O=x.sub(h),X=_d(S,S),Y=_d(S,k),se=_d(k,k),fe=_d(O,S),ge=_d(O,k),Ce=X*se-Y*Y,ze=(se*fe-Y*ge)/Ce,Ue=(X*ge-Y*fe)/Ce,Je=h.z*(1-ze-Ue)+g.z*ze+_.z*Ue;if(isFinite(Je))return Je}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const iP=Tr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:oP}=iP,sP=Tr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:aP}=sP,lP=Ml.VectorTileFeature.types,uP=Math.cos(Math.PI/180*37.5),Jx=Math.pow(2,14)/.5;class Ay{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Le,this.layoutVertexArray2=new Te,this.indexArray=new lt,this.programConfigurations=new fr(n.layers,n.zoom),this.segments=new At,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Sy("line",this.layers,s);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),x=[];for(const{feature:S,id:k,index:O,sourceLayerIndex:X}of n){const Y=this.layers[0]._featureFilter.needGeometry,se=Ma(S,Y);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),se,h))continue;const fe=_?g.evaluate(se,{},h):void 0,ge={id:k,properties:S.properties,type:S.type,sourceLayerIndex:X,index:O,geometry:Y?se.geometry:ka(S),patterns:{},sortKey:fe};x.push(ge)}_&&x.sort((S,k)=>S.sortKey-k.sortKey);for(const S of x){const{geometry:k,index:O,sourceLayerIndex:X}=S;if(this.hasPattern){const Y=Ey("line",this.layers,S,this.zoom,s);this.patternFeatures.push(Y)}else this.addFeature(S,k,O,h,{});s.featureIndex.insert(n[O].feature,k,O,X,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,aP)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,oP),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,g,_){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),k=x.get("line-cap"),O=x.get("line-miter-limit"),X=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const Y of s)this.addLine(Y,n,S,k,O,X);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,g)}addLine(n,s,h,g,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ue=0;Ue<n.length-1;Ue++)this.totalDistance+=n[Ue].dist(n[Ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=lP[s.type]==="Polygon";let k=n.length;for(;k>=2&&n[k-1].equals(n[k-2]);)k--;let O=0;for(;O<k-1&&n[O].equals(n[O+1]);)O++;if(k<(S?3:2))return;h==="bevel"&&(_=1.05);const X=this.overscaling<=16?15*br/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray);let se,fe,ge,Ce,ze;this.e1=this.e2=-1,S&&(se=n[k-2],ze=n[O].sub(se)._unit()._perp());for(let Ue=O;Ue<k;Ue++){if(ge=Ue===k-1?S?n[O+1]:void 0:n[Ue+1],ge&&n[Ue].equals(ge))continue;ze&&(Ce=ze),se&&(fe=se),se=n[Ue],ze=ge?ge.sub(se)._unit()._perp():Ce,Ce=Ce||ze;let Je=Ce.add(ze);Je.x===0&&Je.y===0||Je._unit();const Ge=Ce.x*ze.x+Ce.y*ze.y,qe=Je.x*ze.x+Je.y*ze.y,mt=qe!==0?1/qe:1/0,vt=2*Math.sqrt(2-2*qe),Dt=qe<uP&&fe&&ge,Gt=Ce.x*ze.y-Ce.y*ze.x>0;if(Dt&&Ue>O){const It=se.dist(fe);if(It>2*X){const $t=se.sub(se.sub(fe)._mult(X/It)._round());this.updateDistance(fe,$t),this.addCurrentVertex($t,Ce,0,0,Y),fe=$t}}const Ft=fe&&ge;let zt=Ft?h:S?"butt":g;if(Ft&&zt==="round"&&(mt<x?zt="miter":mt<=2&&(zt="fakeround")),zt==="miter"&&mt>_&&(zt="bevel"),zt==="bevel"&&(mt>2&&(zt="flipbevel"),mt<_&&(zt="miter")),fe&&this.updateDistance(fe,se),zt==="miter")Je._mult(mt),this.addCurrentVertex(se,Je,0,0,Y);else if(zt==="flipbevel"){if(mt>100)Je=ze.mult(-1);else{const It=mt*Ce.add(ze).mag()/Ce.sub(ze).mag();Je._perp()._mult(It*(Gt?-1:1))}this.addCurrentVertex(se,Je,0,0,Y),this.addCurrentVertex(se,Je.mult(-1),0,0,Y)}else if(zt==="bevel"||zt==="fakeround"){const It=-Math.sqrt(mt*mt-1),$t=Gt?It:0,Mt=Gt?0:It;if(fe&&this.addCurrentVertex(se,Ce,$t,Mt,Y),zt==="fakeround"){const Et=Math.round(180*vt/Math.PI/20);for(let en=1;en<Et;en++){let Zt=en/Et;if(Zt!==.5){const nr=Zt-.5;Zt+=Zt*nr*(Zt-1)*((1.0904+Ge*(Ge*(3.55645-1.43519*Ge)-3.2452))*nr*nr+(.848013+Ge*(.215638*Ge-1.06021)))}const Cn=ze.sub(Ce)._mult(Zt)._add(Ce)._unit()._mult(Gt?-1:1);this.addHalfVertex(se,Cn.x,Cn.y,!1,Gt,0,Y)}}ge&&this.addCurrentVertex(se,ze,-$t,-Mt,Y)}else if(zt==="butt")this.addCurrentVertex(se,Je,0,0,Y);else if(zt==="square"){const It=fe?1:-1;this.addCurrentVertex(se,Je,It,It,Y)}else zt==="round"&&(fe&&(this.addCurrentVertex(se,Ce,0,0,Y),this.addCurrentVertex(se,Ce,1,1,Y,!0)),ge&&(this.addCurrentVertex(se,ze,-1,-1,Y,!0),this.addCurrentVertex(se,ze,0,0,Y)));if(Dt&&Ue<k-1){const It=se.dist(ge);if(It>2*X){const $t=se.add(ge.sub(se)._mult(X/It)._round());this.updateDistance(se,$t),this.addCurrentVertex($t,ze,0,0,Y),se=$t}}}}addCurrentVertex(n,s,h,g,_,x=!1){const S=s.y*g-s.x,k=-s.y-s.x*g;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,_),this.addHalfVertex(n,S,k,x,!0,-g,_),this.distance>Jx/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,g,_,x))}addHalfVertex({x:n,y:s},h,g,_,x,S,k){const O=.5*(this.lineClips?this.scaledDistance*(Jx-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(_?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(S===0?0:S<0?-1:1)|(63&O)<<2,O>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const X=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,X),k.primitiveLength++),x?this.e2=X:this.e1=X}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let Qx,ew;Ut("LineBucket",Ay,{omit:["layers","patternFeatures"]});var tw={get paint(){return ew=ew||new Li({"line-opacity":new tn(et.paint_line["line-opacity"]),"line-color":new tn(et.paint_line["line-color"]),"line-translate":new qt(et.paint_line["line-translate"]),"line-translate-anchor":new qt(et.paint_line["line-translate-anchor"]),"line-width":new tn(et.paint_line["line-width"]),"line-gap-width":new tn(et.paint_line["line-gap-width"]),"line-offset":new tn(et.paint_line["line-offset"]),"line-blur":new tn(et.paint_line["line-blur"]),"line-dasharray":new Cu(et.paint_line["line-dasharray"]),"line-pattern":new Sc(et.paint_line["line-pattern"]),"line-gradient":new Yh(et.paint_line["line-gradient"])})},get layout(){return Qx=Qx||new Li({"line-cap":new qt(et.layout_line["line-cap"]),"line-join":new tn(et.layout_line["line-join"]),"line-miter-limit":new qt(et.layout_line["line-miter-limit"]),"line-round-limit":new qt(et.layout_line["line-round-limit"]),"line-sort-key":new tn(et.layout_line["line-sort-key"])})}};class cP extends tn{possiblyEvaluate(n,s){return s=new or(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,g){return s=E({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,g)}}let xp;class hP extends zo{constructor(n){super(n,tw),this.gradientVersion=0,xp||(xp=new cP(tw.paint.properties["line-width"].specification),xp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof wa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=xp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Ay(n)}queryRadius(n){const s=n,h=nw(hd("line-width",this,s),hd("line-gap-width",this,s)),g=hd("line-offset",this,s);return h/2+Math.abs(g)+fp(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,g,_,x,S){const k=pp(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),O=S/2*nw(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),X=this.paint.get("line-offset").evaluate(s,h);return X&&(g=function(Y,se){const fe=[];for(let ge=0;ge<Y.length;ge++){const Ce=Y[ge],ze=[];for(let Ue=0;Ue<Ce.length;Ue++){const Je=Ce[Ue-1],Ge=Ce[Ue],qe=Ce[Ue+1],mt=Ue===0?new w(0,0):Ge.sub(Je)._unit()._perp(),vt=Ue===Ce.length-1?new w(0,0):qe.sub(Ge)._unit()._perp(),Dt=mt._add(vt)._unit(),Gt=Dt.x*vt.x+Dt.y*vt.y;Gt!==0&&Dt._mult(1/Gt),ze.push(Dt._mult(se)._add(Ge))}fe.push(ze)}return fe}(g,X*S)),function(Y,se,fe){for(let ge=0;ge<se.length;ge++){const Ce=se[ge];if(Y.length>=3){for(let ze=0;ze<Ce.length;ze++)if(Rc(Y,Ce[ze]))return!0}if(ud(Y,Ce,fe))return!0}return!1}(k,g,O)}isTileClipped(){return!0}}function nw(o,n){return n>0?n+2*o:o}const dP=Tr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),fP=Tr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Tr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const pP=Tr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Tr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const rw=Tr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),mP=Tr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function gP(o,n,s){return o.sections.forEach(h=>{h.text=function(g,_,x){const S=_.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?g=g.toLocaleUpperCase():S==="lowercase"&&(g=g.toLocaleLowerCase()),Ws.applyArabicShaping&&(g=Ws.applyArabicShaping(g)),g}(h.text,n,s)}),o}Tr([{name:"triangle",components:3,type:"Uint16"}]),Tr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Tr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Tr([{type:"Float32",name:"offsetX"}]),Tr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Tr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const xd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Gr=24,iw=Zn,ow=function(o,n,s,h,g){var _,x,S=8*g-h-1,k=(1<<S)-1,O=k>>1,X=-7,Y=s?g-1:0,se=s?-1:1,fe=o[n+Y];for(Y+=se,_=fe&(1<<-X)-1,fe>>=-X,X+=S;X>0;_=256*_+o[n+Y],Y+=se,X-=8);for(x=_&(1<<-X)-1,_>>=-X,X+=h;X>0;x=256*x+o[n+Y],Y+=se,X-=8);if(_===0)_=1-O;else{if(_===k)return x?NaN:1/0*(fe?-1:1);x+=Math.pow(2,h),_-=O}return(fe?-1:1)*x*Math.pow(2,_-h)},sw=function(o,n,s,h,g,_){var x,S,k,O=8*_-g-1,X=(1<<O)-1,Y=X>>1,se=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,fe=h?0:_-1,ge=h?1:-1,Ce=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(S=isNaN(n)?1:0,x=X):(x=Math.floor(Math.log(n)/Math.LN2),n*(k=Math.pow(2,-x))<1&&(x--,k*=2),(n+=x+Y>=1?se/k:se*Math.pow(2,1-Y))*k>=2&&(x++,k/=2),x+Y>=X?(S=0,x=X):x+Y>=1?(S=(n*k-1)*Math.pow(2,g),x+=Y):(S=n*Math.pow(2,Y-1)*Math.pow(2,g),x=0));g>=8;o[s+fe]=255&S,fe+=ge,S/=256,g-=8);for(x=x<<g|S,O+=g;O>0;o[s+fe]=255&x,fe+=ge,x/=256,O-=8);o[s+fe-ge]|=128*Ce};function Zn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Zn.Varint=0,Zn.Fixed64=1,Zn.Bytes=2,Zn.Fixed32=5;var Py=4294967296,aw=1/Py,lw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function za(o){return o.type===Zn.Bytes?o.readVarint()+o.pos:o.pos+1}function jc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function uw(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var g=s.pos-1;g>=o;g--)s.buf[g+h]=s.buf[g]}function yP(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function vP(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function _P(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function xP(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function wP(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function bP(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function SP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function EP(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function TP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function wp(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Dc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function cw(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}Zn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),g=h>>3,_=this.pos;this.type=7&h,o(g,n,this),this.pos===_&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=wp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=cw(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=wp(this.buf,this.pos)+wp(this.buf,this.pos+4)*Py;return this.pos+=8,o},readSFixed64:function(){var o=wp(this.buf,this.pos)+cw(this.buf,this.pos+4)*Py;return this.pos+=8,o},readFloat:function(){var o=ow(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=ow(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(g,_,x){var S,k,O=x.buf;if(S=(112&(k=O[x.pos++]))>>4,k<128||(S|=(127&(k=O[x.pos++]))<<3,k<128)||(S|=(127&(k=O[x.pos++]))<<10,k<128)||(S|=(127&(k=O[x.pos++]))<<17,k<128)||(S|=(127&(k=O[x.pos++]))<<24,k<128)||(S|=(1&(k=O[x.pos++]))<<31,k<128))return jc(g,S,_);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&lw?function(s,h,g){return lw.decode(s.subarray(h,g))}(this.buf,n,o):function(s,h,g){for(var _="",x=h;x<g;){var S,k,O,X=s[x],Y=null,se=X>239?4:X>223?3:X>191?2:1;if(x+se>g)break;se===1?X<128&&(Y=X):se===2?(192&(S=s[x+1]))==128&&(Y=(31&X)<<6|63&S)<=127&&(Y=null):se===3?(k=s[x+2],(192&(S=s[x+1]))==128&&(192&k)==128&&((Y=(15&X)<<12|(63&S)<<6|63&k)<=2047||Y>=55296&&Y<=57343)&&(Y=null)):se===4&&(k=s[x+2],O=s[x+3],(192&(S=s[x+1]))==128&&(192&k)==128&&(192&O)==128&&((Y=(15&X)<<18|(63&S)<<12|(63&k)<<6|63&O)<=65535||Y>=1114112)&&(Y=null)),Y===null?(Y=65533,se=1):Y>65535&&(Y-=65536,_+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),_+=String.fromCharCode(Y),x+=se}return _}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Zn.Bytes)return o.push(this.readVarint(n));var s=za(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Zn.Bytes)return o.push(this.readSVarint());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Zn.Bytes)return o.push(this.readBoolean());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Zn.Bytes)return o.push(this.readFloat());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Zn.Bytes)return o.push(this.readDouble());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Zn.Bytes)return o.push(this.readFixed32());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Zn.Bytes)return o.push(this.readSFixed32());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Zn.Bytes)return o.push(this.readFixed64());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Zn.Bytes)return o.push(this.readSFixed64());var n=za(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Zn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Zn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Zn.Fixed32)this.pos+=4;else{if(n!==Zn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Dc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Dc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Dc(this.buf,-1&o,this.pos),Dc(this.buf,Math.floor(o*aw),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Dc(this.buf,-1&o,this.pos),Dc(this.buf,Math.floor(o*aw),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,g;if(n>=0?(h=n%4294967296|0,g=n/4294967296|0):(g=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,g=g+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(_,x,S){S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,S.buf[S.pos]=127&(_>>>=7)}(h,0,s),function(_,x){var S=(7&_)<<4;x.buf[x.pos++]|=S|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))}(g,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,g,_){for(var x,S,k=0;k<g.length;k++){if((x=g.charCodeAt(k))>55295&&x<57344){if(!S){x>56319||k+1===g.length?(h[_++]=239,h[_++]=191,h[_++]=189):S=x;continue}if(x<56320){h[_++]=239,h[_++]=191,h[_++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[_++]=239,h[_++]=191,h[_++]=189,S=null);x<128?h[_++]=x:(x<2048?h[_++]=x>>6|192:(x<65536?h[_++]=x>>12|224:(h[_++]=x>>18|240,h[_++]=x>>12&63|128),h[_++]=x>>6&63|128),h[_++]=63&x|128)}return _}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&uw(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),sw(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),sw(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&uw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Zn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,yP,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,vP,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,wP,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,_P,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,xP,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,bP,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,SP,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,EP,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,TP,n)},writeBytesField:function(o,n){this.writeTag(o,Zn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Zn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Zn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Zn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Zn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Zn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Zn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Zn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Zn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Zn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var ky=b(iw);const My=3;function CP(o,n,s){o===1&&s.readMessage(IP,n)}function IP(o,n,s){if(o===3){const{id:h,bitmap:g,width:_,height:x,left:S,top:k,advance:O}=s.readMessage(AP,{});n.push({id:h,bitmap:new fd({width:_+2*My,height:x+2*My},g),metrics:{width:_,height:x,left:S,top:k,advance:O}})}}function AP(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const hw=My;function dw(o){let n=0,s=0;for(const x of o)n+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let g=0,_=0;for(const x of o)for(let S=h.length-1;S>=0;S--){const k=h[S];if(!(x.w>k.w||x.h>k.h)){if(x.x=k.x,x.y=k.y,_=Math.max(_,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===k.w&&x.h===k.h){const O=h.pop();S<h.length&&(h[S]=O)}else x.h===k.h?(k.x+=x.w,k.w-=x.w):x.w===k.w?(k.y+=x.h,k.h-=x.h):(h.push({x:k.x+x.w,y:k.y,w:k.w-x.w,h:x.h}),k.y+=x.h,k.h-=x.h);break}}return{w:g,h:_,fill:n/(g*_)||0}}const Yi=1;class zy{constructor(n,{pixelRatio:s,version:h,stretchX:g,stretchY:_,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=g,this.stretchY=_,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+Yi,this.paddedRect.y+Yi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Yi,this.paddedRect.y+this.paddedRect.h-Yi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Yi)/this.pixelRatio,(this.paddedRect.h-2*Yi)/this.pixelRatio]}}class fw{constructor(n,s){const h={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(n,h,_),this.addImages(s,g,_);const{w:x,h:S}=dw(_),k=new Ro({width:x||1,height:S||1});for(const O in n){const X=n[O],Y=h[O].paddedRect;Ro.copy(X.data,k,{x:0,y:0},{x:Y.x+Yi,y:Y.y+Yi},X.data)}for(const O in s){const X=s[O],Y=g[O].paddedRect,se=Y.x+Yi,fe=Y.y+Yi,ge=X.data.width,Ce=X.data.height;Ro.copy(X.data,k,{x:0,y:0},{x:se,y:fe},X.data),Ro.copy(X.data,k,{x:0,y:Ce-1},{x:se,y:fe-1},{width:ge,height:1}),Ro.copy(X.data,k,{x:0,y:0},{x:se,y:fe+Ce},{width:ge,height:1}),Ro.copy(X.data,k,{x:ge-1,y:0},{x:se-1,y:fe},{width:1,height:Ce}),Ro.copy(X.data,k,{x:0,y:0},{x:se+ge,y:fe},{width:1,height:Ce})}this.image=k,this.iconPositions=h,this.patternPositions=g}addImages(n,s,h){for(const g in n){const _=n[g],x={x:0,y:0,w:_.data.width+2*Yi,h:_.data.height+2*Yi};h.push(x),s[g]=new zy(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[g,_]=n.tl;h.update(s.data,void 0,{x:g,y:_})}}var zl;Ut("ImagePosition",zy),Ut("ImageAtlas",fw),d.ah=void 0,(zl=d.ah||(d.ah={}))[zl.none=0]="none",zl[zl.horizontal=1]="horizontal",zl[zl.vertical=2]="vertical",zl[zl.horizontalOnly=3]="horizontalOnly";const wd=-17;class bd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new bd;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new bd;return s.imageName=n,s}}class Bc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new Bc;for(let g=0;g<n.sections.length;g++){const _=n.sections[g];_.image?h.addImageSection(_):h.addTextSection(_,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const g=n.charCodeAt(h+1)||null,_=n.charCodeAt(h-1)||null;s+=g&&qh(g)&&!xd[n[h+1]]||_&&qh(_)&&!xd[n[h-1]]||!xd[n[h]]?n[h]:xd[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Sp[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Sp[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new Bc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(bd.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let g=0;g<n.text.length;++g)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void _e("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(bd.forImage(s)),this.sectionIndex.push(this.sections.length-1)):_e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function bp(o,n,s,h,g,_,x,S,k,O,X,Y,se,fe,ge,Ce){const ze=Bc.fromFeature(o,g);let Ue;Y===d.ah.vertical&&ze.verticalizePunctuation();const{processBidirectionalText:Je,processStyledBidirectionalText:Ge}=Ws;if(Je&&ze.sections.length===1){Ue=[];const vt=Je(ze.toString(),Ry(ze,O,_,n,h,fe,ge));for(const Dt of vt){const Gt=new Bc;Gt.text=Dt,Gt.sections=ze.sections;for(let Ft=0;Ft<Dt.length;Ft++)Gt.sectionIndex.push(0);Ue.push(Gt)}}else if(Ge){Ue=[];const vt=Ge(ze.text,ze.sectionIndex,Ry(ze,O,_,n,h,fe,ge));for(const Dt of vt){const Gt=new Bc;Gt.text=Dt[0],Gt.sectionIndex=Dt[1],Gt.sections=ze.sections,Ue.push(Gt)}}else Ue=function(vt,Dt){const Gt=[],Ft=vt.text;let zt=0;for(const It of Dt)Gt.push(vt.substring(zt,It)),zt=It;return zt<Ft.length&&Gt.push(vt.substring(zt,Ft.length)),Gt}(ze,Ry(ze,O,_,n,h,fe,ge));const qe=[],mt={positionedLines:qe,text:ze.toString(),top:X[1],bottom:X[1],left:X[0],right:X[0],writingMode:Y,iconsInText:!1,verticalizable:!1};return function(vt,Dt,Gt,Ft,zt,It,$t,Mt,Et,en,Zt,Cn){let nr=0,ar=wd,Hr=0,yo=0;const ji=Mt==="right"?1:Mt==="left"?0:.5;let jr=0;for(const Wr of zt){Wr.trim();const Zr=Wr.getMaxScale(),bi=(Zr-1)*Gr,Ni={positionedGlyphs:[],lineOffset:0};vt.positionedLines[jr]=Ni;const Si=Ni.positionedGlyphs;let Ji=0;if(!Wr.length()){ar+=It,++jr;continue}for(let Xr=0;Xr<Wr.length();Xr++){const Mn=Wr.getSection(Xr),Ei=Wr.getSectionIndex(Xr),pi=Wr.getCharCode(Xr);let qr=0,rs=null,bs=null,Ss=null,Ra=Gr;const is=!(Et===d.ah.horizontal||!Zt&&!xc(pi)||Zt&&(Sp[pi]||(ii=pi,Lt.Arabic(ii)||Lt["Arabic Supplement"](ii)||Lt["Arabic Extended-A"](ii)||Lt["Arabic Presentation Forms-A"](ii)||Lt["Arabic Presentation Forms-B"](ii))));if(Mn.imageName){const Lo=Ft[Mn.imageName];if(!Lo)continue;Ss=Mn.imageName,vt.iconsInText=vt.iconsInText||!0,bs=Lo.paddedRect;const eo=Lo.displaySize;Mn.scale=Mn.scale*Gr/Cn,rs={width:eo[0],height:eo[1],left:Yi,top:-hw,advance:is?eo[1]:eo[0]},qr=bi+(Gr-eo[1]*Mn.scale),Ra=rs.advance;const Oa=is?eo[0]*Mn.scale-Gr*Zr:eo[1]*Mn.scale-Gr*Zr;Oa>0&&Oa>Ji&&(Ji=Oa)}else{const Lo=Gt[Mn.fontStack],eo=Lo&&Lo[pi];if(eo&&eo.rect)bs=eo.rect,rs=eo.metrics;else{const Oa=Dt[Mn.fontStack],Id=Oa&&Oa[pi];if(!Id)continue;rs=Id.metrics}qr=(Zr-Mn.scale)*Gr}is?(vt.verticalizable=!0,Si.push({glyph:pi,imageName:Ss,x:nr,y:ar+qr,vertical:is,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:Ei,metrics:rs,rect:bs}),nr+=Ra*Mn.scale+en):(Si.push({glyph:pi,imageName:Ss,x:nr,y:ar+qr,vertical:is,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:Ei,metrics:rs,rect:bs}),nr+=rs.advance*Mn.scale+en)}Si.length!==0&&(Hr=Math.max(nr-en,Hr),MP(Si,0,Si.length-1,ji,Ji)),nr=0;const Qi=It*Zr+Ji;Ni.lineOffset=Math.max(Ji,bi),ar+=Qi,yo=Math.max(Qi,yo),++jr}var ii;const fi=ar-wd,{horizontalAlign:Di,verticalAlign:Bi}=Oy($t);(function(Wr,Zr,bi,Ni,Si,Ji,Qi,Xr,Mn){const Ei=(Zr-bi)*Si;let pi=0;pi=Ji!==Qi?-Xr*Ni-wd:(-Ni*Mn+.5)*Qi;for(const qr of Wr)for(const rs of qr.positionedGlyphs)rs.x+=Ei,rs.y+=pi})(vt.positionedLines,ji,Di,Bi,Hr,yo,It,fi,zt.length),vt.top+=-Bi*fi,vt.bottom=vt.top+fi,vt.left+=-Di*Hr,vt.right=vt.left+Hr}(mt,n,s,h,Ue,x,S,k,Y,O,se,Ce),!function(vt){for(const Dt of vt)if(Dt.positionedGlyphs.length!==0)return!1;return!0}(qe)&&mt}const Sp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},PP={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function pw(o,n,s,h,g,_){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Gr/_+g:0}{const x=s[n.fontStack],S=x&&x[o];return S?S.metrics.advance*n.scale+g:0}}function mw(o,n,s,h){const g=Math.pow(o-n,2);return h?o<n?g/2:2*g:g+Math.abs(s)*s}function kP(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function gw(o,n,s,h,g,_){let x=null,S=mw(n,s,g,_);for(const k of h){const O=mw(n-k.x,s,g,_)+k.badness;O<=S&&(x=k,S=O)}return{index:o,x:n,priorBreak:x,badness:S}}function yw(o){return o?yw(o.priorBreak).concat(o.index):[]}function Ry(o,n,s,h,g,_,x){if(_!=="point")return[];if(!o)return[];const S=[],k=function(se,fe,ge,Ce,ze,Ue){let Je=0;for(let Ge=0;Ge<se.length();Ge++){const qe=se.getSection(Ge);Je+=pw(se.getCharCode(Ge),qe,Ce,ze,fe,Ue)}return Je/Math.max(1,Math.ceil(Je/ge))}(o,n,s,h,g,x),O=o.text.indexOf("​")>=0;let X=0;for(let se=0;se<o.length();se++){const fe=o.getSection(se),ge=o.getCharCode(se);if(Sp[ge]||(X+=pw(ge,fe,h,g,n,x)),se<o.length()-1){const Ce=!((Y=ge)<11904||!(Lt["Bopomofo Extended"](Y)||Lt.Bopomofo(Y)||Lt["CJK Compatibility Forms"](Y)||Lt["CJK Compatibility Ideographs"](Y)||Lt["CJK Compatibility"](Y)||Lt["CJK Radicals Supplement"](Y)||Lt["CJK Strokes"](Y)||Lt["CJK Symbols and Punctuation"](Y)||Lt["CJK Unified Ideographs Extension A"](Y)||Lt["CJK Unified Ideographs"](Y)||Lt["Enclosed CJK Letters and Months"](Y)||Lt["Halfwidth and Fullwidth Forms"](Y)||Lt.Hiragana(Y)||Lt["Ideographic Description Characters"](Y)||Lt["Kangxi Radicals"](Y)||Lt["Katakana Phonetic Extensions"](Y)||Lt.Katakana(Y)||Lt["Vertical Forms"](Y)||Lt["Yi Radicals"](Y)||Lt["Yi Syllables"](Y)));(PP[ge]||Ce||fe.imageName)&&S.push(gw(se+1,X,k,S,kP(ge,o.getCharCode(se+1),Ce&&O),!1))}}var Y;return yw(gw(o.length(),X,k,S,0,!0))}function Oy(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function MP(o,n,s,h,g){if(!h&&!g)return;const _=o[s],x=(o[s].x+_.metrics.advance*_.scale)*h;for(let S=n;S<=s;S++)o[S].x-=x,o[S].y+=g}function zP(o,n,s){const{horizontalAlign:h,verticalAlign:g}=Oy(s),_=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*g;return{image:o,top:x,bottom:x+o.displaySize[1],left:_,right:_+o.displaySize[0]}}function vw(o,n,s,h,g,_){const x=o.image;let S;if(x.content){const ze=x.content,Ue=x.pixelRatio||1;S=[ze[0]/Ue,ze[1]/Ue,x.displaySize[0]-ze[2]/Ue,x.displaySize[1]-ze[3]/Ue]}const k=n.left*_,O=n.right*_;let X,Y,se,fe;s==="width"||s==="both"?(fe=g[0]+k-h[3],Y=g[0]+O+h[1]):(fe=g[0]+(k+O-x.displaySize[0])/2,Y=fe+x.displaySize[0]);const ge=n.top*_,Ce=n.bottom*_;return s==="height"||s==="both"?(X=g[1]+ge-h[0],se=g[1]+Ce+h[2]):(X=g[1]+(ge+Ce-x.displaySize[1])/2,se=X+x.displaySize[1]),{image:x,top:X,right:Y,bottom:se,left:fe,collisionPadding:S}}const Sd=255,Ks=128,Rl=Sd*Ks;function _w(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new or(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=s;let _=0;for(;_<h.length&&h[_]<=o;)_++;_=Math.max(0,_-1);let x=_;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const S=h[_],k=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:k,interpolationType:g}:{kind:"camera",minZoom:S,maxZoom:k,minSize:s.evaluate(new or(S)),maxSize:s.evaluate(new or(k)),interpolationType:g}}}function Ly(o,n,s){let h="never";const g=o.get(n);return g?h=g:o.get(s)&&(h="always"),h}const RP=Ml.VectorTileFeature.types,OP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ep(o,n,s,h,g,_,x,S,k,O,X,Y,se){const fe=S?Math.min(Rl,Math.round(S[0])):0,ge=S?Math.min(Rl,Math.round(S[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*g),_,x,(fe<<1)+(k?1:0),ge,16*O,16*X,256*Y,256*se)}function Fy(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function LP(o){for(const n of o.sections)if(fy(n.text))return!0;return!1}class jy{constructor(n){this.layoutVertexArray=new rt,this.indexArray=new lt,this.programConfigurations=n,this.segments=new At,this.dynamicLayoutVertexArray=new je,this.opacityVertexArray=new Ke,this.hasVisibleVertices=!1,this.placedSymbolArray=new l}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,dP.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,fP.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,OP,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ut("SymbolBuffers",jy);class Dy{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new At,this.collisionVertexArray=new st}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,pP.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ut("CollisionBuffers",Dy);class Nc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=my([]),this.placementViewportMatrix=my([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_w(this.zoom,s["text-size"]),this.iconSizeData=_w(this.zoom,s["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=Ly(h,"text-overlap","text-allow-overlap")!=="never"||Ly(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>d.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new jy(new fr(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new jy(new fr(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new v,this.lineVertexArray=new I,this.symbolInstances=new m,this.textAnchorOffsets=new M}calculateGlyphDependencies(n,s,h,g,_){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||g)&&_){const S=xd[n.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(n,s,h){const g=this.layers[0],_=g.layout,x=_.get("text-font"),S=_.get("text-field"),k=_.get("icon-image"),O=(S.value.kind!=="constant"||S.value.value instanceof vi&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),X=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,Y=_.get("symbol-sort-key");if(this.features=[],!O&&!X)return;const se=s.iconDependencies,fe=s.glyphDependencies,ge=s.availableImages,Ce=new or(this.zoom);for(const{feature:ze,id:Ue,index:Je,sourceLayerIndex:Ge}of n){const qe=g._featureFilter.needGeometry,mt=Ma(ze,qe);if(!g._featureFilter.filter(Ce,mt,h))continue;let vt,Dt;if(qe||(mt.geometry=ka(ze)),O){const Ft=g.getValueAndResolveTokens("text-field",mt,h,ge),zt=vi.factory(Ft),It=this.hasRTLText=this.hasRTLText||LP(zt);(!It||Ws.getRTLTextPluginStatus()==="unavailable"||It&&Ws.isParsed())&&(vt=gP(zt,g,mt))}if(X){const Ft=g.getValueAndResolveTokens("icon-image",mt,h,ge);Dt=Ft instanceof zi?Ft:zi.fromString(Ft)}if(!vt&&!Dt)continue;const Gt=this.sortFeaturesByKey?Y.evaluate(mt,{},h):void 0;if(this.features.push({id:Ue,text:vt,icon:Dt,index:Je,sourceLayerIndex:Ge,geometry:mt.geometry,properties:ze.properties,type:RP[ze.type],sortKey:Gt}),Dt&&(se[Dt.name]=!0),vt){const Ft=x.evaluate(mt,{},h).join(","),zt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.ah.vertical)>=0;for(const It of vt.sections)if(It.image)se[It.image.name]=!0;else{const $t=Pl(vt.toString()),Mt=It.fontStack||Ft,Et=fe[Mt]=fe[Mt]||{};this.calculateGlyphDependencies(It.text,Et,zt,this.allowVerticalPlacement,$t)}}}_.get("symbol-placement")==="line"&&(this.features=function(ze){const Ue={},Je={},Ge=[];let qe=0;function mt(Ft){Ge.push(ze[Ft]),qe++}function vt(Ft,zt,It){const $t=Je[Ft];return delete Je[Ft],Je[zt]=$t,Ge[$t].geometry[0].pop(),Ge[$t].geometry[0]=Ge[$t].geometry[0].concat(It[0]),$t}function Dt(Ft,zt,It){const $t=Ue[zt];return delete Ue[zt],Ue[Ft]=$t,Ge[$t].geometry[0].shift(),Ge[$t].geometry[0]=It[0].concat(Ge[$t].geometry[0]),$t}function Gt(Ft,zt,It){const $t=It?zt[0][zt[0].length-1]:zt[0][0];return`${Ft}:${$t.x}:${$t.y}`}for(let Ft=0;Ft<ze.length;Ft++){const zt=ze[Ft],It=zt.geometry,$t=zt.text?zt.text.toString():null;if(!$t){mt(Ft);continue}const Mt=Gt($t,It),Et=Gt($t,It,!0);if(Mt in Je&&Et in Ue&&Je[Mt]!==Ue[Et]){const en=Dt(Mt,Et,It),Zt=vt(Mt,Et,Ge[en].geometry);delete Ue[Mt],delete Je[Et],Je[Gt($t,Ge[Zt].geometry,!0)]=Zt,Ge[en].geometry=null}else Mt in Je?vt(Mt,Et,It):Et in Ue?Dt(Mt,Et,It):(mt(Ft),Ue[Mt]=qe-1,Je[Et]=qe-1)}return Ge.filter(Ft=>Ft.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ze,Ue)=>ze.sortKey-Ue.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let g=n.dist(s[n.segment+1]),_=n.dist(s[n.segment]);const x={};for(let S=n.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:g},S<s.length-1&&(g+=s[S+1].dist(s[S]));for(let S=n.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:_},S>0&&(_+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const k=x[S];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,g,_,x,S,k,O,X,Y,se){const fe=n.indexArray,ge=n.layoutVertexArray,Ce=n.segments.prepareSegment(4*s.length,ge,fe,this.canOverlap?x.sortKey:void 0),ze=this.glyphOffsetArray.length,Ue=Ce.vertexLength,Je=this.allowVerticalPlacement&&S===d.ah.vertical?Math.PI/2:0,Ge=x.text&&x.text.sections;for(let qe=0;qe<s.length;qe++){const{tl:mt,tr:vt,bl:Dt,br:Gt,tex:Ft,pixelOffsetTL:zt,pixelOffsetBR:It,minFontScaleX:$t,minFontScaleY:Mt,glyphOffset:Et,isSDF:en,sectionIndex:Zt}=s[qe],Cn=Ce.vertexLength,nr=Et[1];Ep(ge,k.x,k.y,mt.x,nr+mt.y,Ft.x,Ft.y,h,en,zt.x,zt.y,$t,Mt),Ep(ge,k.x,k.y,vt.x,nr+vt.y,Ft.x+Ft.w,Ft.y,h,en,It.x,zt.y,$t,Mt),Ep(ge,k.x,k.y,Dt.x,nr+Dt.y,Ft.x,Ft.y+Ft.h,h,en,zt.x,It.y,$t,Mt),Ep(ge,k.x,k.y,Gt.x,nr+Gt.y,Ft.x+Ft.w,Ft.y+Ft.h,h,en,It.x,It.y,$t,Mt),Fy(n.dynamicLayoutVertexArray,k,Je),fe.emplaceBack(Cn,Cn+1,Cn+2),fe.emplaceBack(Cn+1,Cn+2,Cn+3),Ce.vertexLength+=4,Ce.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Et[0]),qe!==s.length-1&&Zt===s[qe+1].sectionIndex||n.programConfigurations.populatePaintArrays(ge.length,x,x.index,{},se,Ge&&Ge[Zt])}n.placedSymbolArray.emplaceBack(k.x,k.y,ze,this.glyphOffsetArray.length-ze,Ue,O,X,k.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],S,0,!1,0,Y)}_addCollisionDebugVertex(n,s,h,g,_,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,g,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,g,_,x,S){const k=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),O=k.vertexLength,X=_.layoutVertexArray,Y=_.collisionVertexArray,se=S.anchorX,fe=S.anchorY;this._addCollisionDebugVertex(X,Y,x,se,fe,new w(n,s)),this._addCollisionDebugVertex(X,Y,x,se,fe,new w(h,s)),this._addCollisionDebugVertex(X,Y,x,se,fe,new w(h,g)),this._addCollisionDebugVertex(X,Y,x,se,fe,new w(n,g)),k.vertexLength+=4;const ge=_.indexArray;ge.emplaceBack(O,O+1),ge.emplaceBack(O+1,O+2),ge.emplaceBack(O+2,O+3),ge.emplaceBack(O+3,O),k.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,g){for(let _=n;_<s;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Dy(it,rw.members,bt),this.iconCollisionBox=new Dy(it,rw.members,bt);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,g,_,x,S,k,O){const X={};for(let Y=s;Y<h;Y++){const se=n.get(Y);X.textBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},X.textFeatureIndex=se.featureIndex;break}for(let Y=g;Y<_;Y++){const se=n.get(Y);X.verticalTextBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},X.verticalTextFeatureIndex=se.featureIndex;break}for(let Y=x;Y<S;Y++){const se=n.get(Y);X.iconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},X.iconFeatureIndex=se.featureIndex;break}for(let Y=k;Y<O;Y++){const se=n.get(Y);X.verticalIconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},X.verticalIconFeatureIndex=se.featureIndex;break}return X}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),g=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<g;_+=4)n.indexArray.emplaceBack(_,_+1,_+2),n.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),g=[],_=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const k=this.symbolInstances.get(S);g.push(0|Math.round(s*k.anchorX+h*k.anchorY)),_.push(k.featureIndex)}return x.sort((S,k)=>g[S]-g[k]||_[k]-_[S]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((g,_,x)=>{g>=0&&x.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let xw,ww;Ut("SymbolBucket",Nc,{omit:["layers","collisionBoxArray","features","compareText"]}),Nc.MAX_GLYPHS=65535,Nc.addDynamicAttributes=Fy;var By={get paint(){return ww=ww||new Li({"icon-opacity":new tn(et.paint_symbol["icon-opacity"]),"icon-color":new tn(et.paint_symbol["icon-color"]),"icon-halo-color":new tn(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new tn(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new tn(et.paint_symbol["icon-halo-blur"]),"icon-translate":new qt(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new qt(et.paint_symbol["icon-translate-anchor"]),"text-opacity":new tn(et.paint_symbol["text-opacity"]),"text-color":new tn(et.paint_symbol["text-color"],{runtimeType:mn,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new tn(et.paint_symbol["text-halo-color"]),"text-halo-width":new tn(et.paint_symbol["text-halo-width"]),"text-halo-blur":new tn(et.paint_symbol["text-halo-blur"]),"text-translate":new qt(et.paint_symbol["text-translate"]),"text-translate-anchor":new qt(et.paint_symbol["text-translate-anchor"])})},get layout(){return xw=xw||new Li({"symbol-placement":new qt(et.layout_symbol["symbol-placement"]),"symbol-spacing":new qt(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qt(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new tn(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qt(et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qt(et.layout_symbol["icon-allow-overlap"]),"icon-overlap":new qt(et.layout_symbol["icon-overlap"]),"icon-ignore-placement":new qt(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new qt(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qt(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new tn(et.layout_symbol["icon-size"]),"icon-text-fit":new qt(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qt(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new tn(et.layout_symbol["icon-image"]),"icon-rotate":new tn(et.layout_symbol["icon-rotate"]),"icon-padding":new tn(et.layout_symbol["icon-padding"]),"icon-keep-upright":new qt(et.layout_symbol["icon-keep-upright"]),"icon-offset":new tn(et.layout_symbol["icon-offset"]),"icon-anchor":new tn(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qt(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qt(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qt(et.layout_symbol["text-rotation-alignment"]),"text-field":new tn(et.layout_symbol["text-field"]),"text-font":new tn(et.layout_symbol["text-font"]),"text-size":new tn(et.layout_symbol["text-size"]),"text-max-width":new tn(et.layout_symbol["text-max-width"]),"text-line-height":new qt(et.layout_symbol["text-line-height"]),"text-letter-spacing":new tn(et.layout_symbol["text-letter-spacing"]),"text-justify":new tn(et.layout_symbol["text-justify"]),"text-radial-offset":new tn(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qt(et.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new tn(et.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new tn(et.layout_symbol["text-anchor"]),"text-max-angle":new qt(et.layout_symbol["text-max-angle"]),"text-writing-mode":new qt(et.layout_symbol["text-writing-mode"]),"text-rotate":new tn(et.layout_symbol["text-rotate"]),"text-padding":new qt(et.layout_symbol["text-padding"]),"text-keep-upright":new qt(et.layout_symbol["text-keep-upright"]),"text-transform":new tn(et.layout_symbol["text-transform"]),"text-offset":new tn(et.layout_symbol["text-offset"]),"text-allow-overlap":new qt(et.layout_symbol["text-allow-overlap"]),"text-overlap":new qt(et.layout_symbol["text-overlap"]),"text-ignore-placement":new qt(et.layout_symbol["text-ignore-placement"]),"text-optional":new qt(et.layout_symbol["text-optional"])})}};class bw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:ot,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ut("FormatSectionOverride",bw,{omit:["defaultValue"]});class Tp extends zo{constructor(n){super(n,By)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const _ of h)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,g){const _=this.layout.get(n).evaluate(s,{},h,g),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Nn(x.value)||!_?_:function(S,k){return k.replace(/{([^{}]+)}/g,(O,X)=>S&&X in S?String(S[X]):"")}(s.properties,_)}createBucket(n){return new Nc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of By.paint.overridableProperties){if(!Tp.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new bw(s),g=new qn(h,s.property.specification);let _=null;_=s.value.kind==="constant"||s.value.kind==="source"?new ml("source",g):new gl("composite",g,s.value.zoomStops),this.paint._values[n]=new Mo(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Tp.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),g=By.paint.properties[s];let _=!1;const x=S=>{for(const k of S)if(g.overrides&&g.overrides.hasOverride(k))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof vi)x(h.value.value.sections);else if(h.value.kind==="source"){const S=O=>{_||(O instanceof Xo&&wr(O.value)===rr?x(O.value.sections):O instanceof dl?x(O.sections):O.eachChild(S))},k=h.value;k._styleExpression&&S(k._styleExpression.expression)}return _}}let Sw;var FP={get paint(){return Sw=Sw||new Li({"background-color":new qt(et.paint_background["background-color"]),"background-pattern":new Cu(et.paint_background["background-pattern"]),"background-opacity":new qt(et.paint_background["background-opacity"])})}};class jP extends zo{constructor(n){super(n,FP)}}let Ew;var DP={get paint(){return Ew=Ew||new Li({"raster-opacity":new qt(et.paint_raster["raster-opacity"]),"raster-hue-rotate":new qt(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qt(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qt(et.paint_raster["raster-brightness-max"]),"raster-saturation":new qt(et.paint_raster["raster-saturation"]),"raster-contrast":new qt(et.paint_raster["raster-contrast"]),"raster-resampling":new qt(et.paint_raster["raster-resampling"]),"raster-fade-duration":new qt(et.paint_raster["raster-fade-duration"])})}};class BP extends zo{constructor(n){super(n,DP)}}class NP extends zo{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class UP{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Ny=63710088e-1;class Ol{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ol(V(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,g=n.lat*s,_=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((n.lng-this.lng)*s);return Ny*Math.acos(Math.min(_,1))}static convert(n){if(n instanceof Ol)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Ol(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Ol(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Tw=2*Math.PI*Ny;function Cw(o){return Tw*Math.cos(o*Math.PI/180)}function Iw(o){return(180+o)/360}function Aw(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Pw(o,n){return o/Cw(n)}function Uy(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Cp{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Ol.convert(n);return new Cp(Iw(h.lng),Aw(h.lat),Pw(s,h.lat))}toLngLat(){return new Ol(360*this.x-180,Uy(this.y))}toAltitude(){return this.z*Cw(Uy(this.y))}meterInMercatorCoordinateUnits(){return 1/Tw*(n=Uy(this.y),1/Math.cos(n*Math.PI/180));var n}}function kw(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class $y{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=Ed(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const g=(x=this.y,S=this.z,k=kw(256*(_=this.x),256*(x=Math.pow(2,S)-x-1),S),O=kw(256*(_+1),256*(x+1),S),k[0]+","+k[1]+","+O[0]+","+O[1]);var _,x,S,k,O;const X=function(Y,se,fe){let ge,Ce="";for(let ze=Y;ze>0;ze--)ge=1<<ze-1,Ce+=(se&ge?1:0)+(fe&ge?2:0);return Ce}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,X).replace(/{bbox-epsg-3857}/g,g)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new w((n.x*s-this.x)*br,(n.y*s-this.y)*br)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Mw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Ed(n,s.z,s.z,s.x,s.y)}}class Oo{constructor(n,s,h,g,_){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new $y(h,+g,+_),this.key=Ed(s,n,h,g,_)}clone(){return new Oo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Oo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Oo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?Ed(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Ed(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Oo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new Oo(s,this.wrap,s,h,g),new Oo(s,this.wrap,s,h+1,g),new Oo(s,this.wrap,s,h,g+1),new Oo(s,this.wrap,s,h+1,g+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Oo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Oo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Mw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Cp(n.x-this.wrap,n.y))}}function Ed(o,n,s,h,g){(o*=2)<0&&(o=-1*o-1);const _=1<<s;return(_*_*o+_*g+h).toString(36)+s.toString(36)+n.toString(36)}Ut("CanonicalTileID",$y),Ut("OverscaledTileID",Oo,{omit:["posMatrix"]});class zw{constructor(n,s,h,g=1,_=1,x=1,S=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void _e(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const k=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let O=0;O<k;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(k,O)]=this.data[this._idx(k-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,k)]=this.data[this._idx(O,k-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(k,-1)]=this.data[this._idx(k-1,0)],this.data[this._idx(-1,k)]=this.data[this._idx(0,k-1)],this.data[this._idx(k,k)]=this.data[this._idx(k-1,k-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<k;O++)for(let X=0;X<k;X++){const Y=this.get(O,X);Y>this.max&&(this.max=Y),Y<this.min&&(this.min=Y)}}get(n,s){const h=new Uint8Array(this.data.buffer),g=4*this._idx(n,s);return this.unpack(h[g],h[g+1],h[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Ro({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let g=s*this.dim,_=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:g=_-1;break;case 1:_=g+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const k=-s*this.dim,O=-h*this.dim;for(let X=x;X<S;X++)for(let Y=g;Y<_;Y++)this.data[this._idx(Y,X)]=n.data[this._idx(Y+k,X+O)]}}Ut("DEMData",zw);class Rw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Ow{constructor(n,s,h,g,_){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=g,this.properties=n.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class Lw{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Su(br,16,0),this.grid3D=new Su(br,16,0),this.featureIndexArray=new Q,this.promoteId=s}insert(n,s,h,g,_,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,_);const k=x?this.grid3D:this.grid;for(let O=0;O<s.length;O++){const X=s[O],Y=[1/0,1/0,-1/0,-1/0];for(let se=0;se<X.length;se++){const fe=X[se];Y[0]=Math.min(Y[0],fe.x),Y[1]=Math.min(Y[1],fe.y),Y[2]=Math.max(Y[2],fe.x),Y[3]=Math.max(Y[3],fe.y)}Y[0]<br&&Y[1]<br&&Y[2]>=0&&Y[3]>=0&&k.insert(S,Y[0],Y[1],Y[2],Y[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ml.VectorTile(new ky(this.rawTileData)).layers,this.sourceLayerCoder=new Rw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,g){this.loadVTLayers();const _=n.params||{},x=br/n.tileSize/n.scale,S=po(_.filter),k=n.queryGeometry,O=n.queryPadding*x,X=jw(k),Y=this.grid.query(X.minX-O,X.minY-O,X.maxX+O,X.maxY+O),se=jw(n.cameraQueryGeometry),fe=this.grid3D.query(se.minX-O,se.minY-O,se.maxX+O,se.maxY+O,(ze,Ue,Je,Ge)=>function(qe,mt,vt,Dt,Gt){for(const zt of qe)if(mt<=zt.x&&vt<=zt.y&&Dt>=zt.x&&Gt>=zt.y)return!0;const Ft=[new w(mt,vt),new w(mt,Gt),new w(Dt,Gt),new w(Dt,vt)];if(qe.length>2){for(const zt of Ft)if(Rc(qe,zt))return!0}for(let zt=0;zt<qe.length-1;zt++)if(_A(qe[zt],qe[zt+1],Ft))return!0;return!1}(n.cameraQueryGeometry,ze-O,Ue-O,Je+O,Ge+O));for(const ze of fe)Y.push(ze);Y.sort($P);const ge={};let Ce;for(let ze=0;ze<Y.length;ze++){const Ue=Y[ze];if(Ue===Ce)continue;Ce=Ue;const Je=this.featureIndexArray.get(Ue);let Ge=null;this.loadMatchingFeature(ge,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,S,_.layers,_.availableImages,s,h,g,(qe,mt,vt)=>(Ge||(Ge=ka(qe)),mt.queryIntersectsFeature(k,qe,vt,Ge,this.z,n.transform,x,n.pixelPosMatrix)))}return ge}loadMatchingFeature(n,s,h,g,_,x,S,k,O,X,Y){const se=this.bucketLayerIDs[s];if(x&&!function(ze,Ue){for(let Je=0;Je<ze.length;Je++)if(Ue.indexOf(ze[Je])>=0)return!0;return!1}(x,se))return;const fe=this.sourceLayerCoder.decode(h),ge=this.vtLayers[fe].feature(g);if(_.needGeometry){const ze=Ma(ge,!0);if(!_.filter(new or(this.tileID.overscaledZ),ze,this.tileID.canonical))return}else if(!_.filter(new or(this.tileID.overscaledZ),ge))return;const Ce=this.getId(ge,fe);for(let ze=0;ze<se.length;ze++){const Ue=se[ze];if(x&&x.indexOf(Ue)<0)continue;const Je=k[Ue];if(!Je)continue;let Ge={};Ce&&X&&(Ge=X.getState(Je.sourceLayer||"_geojsonTileLayer",Ce));const qe=E({},O[Ue]);qe.paint=Fw(qe.paint,Je.paint,ge,Ge,S),qe.layout=Fw(qe.layout,Je.layout,ge,Ge,S);const mt=!Y||Y(ge,Je,Ge);if(!mt)continue;const vt=new Ow(ge,this.z,this.x,this.y,Ce);vt.layer=qe;let Dt=n[Ue];Dt===void 0&&(Dt=n[Ue]=[]),Dt.push({featureIndex:g,feature:vt,intersectionZ:mt})}}lookupSymbolFeatures(n,s,h,g,_,x,S,k){const O={};this.loadVTLayers();const X=po(_);for(const Y of n)this.loadMatchingFeature(O,h,g,Y,X,x,S,k,s);return O}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function Fw(o,n,s,h,g){return D(o,(_,x)=>{const S=n instanceof Tu?n.get(x):null;return S&&S.evaluate?S.evaluate(s,h,g):S})}function jw(o){let n=1/0,s=1/0,h=-1/0,g=-1/0;for(const _ of o)n=Math.min(n,_.x),s=Math.min(s,_.y),h=Math.max(h,_.x),g=Math.max(g,_.y);return{minX:n,minY:s,maxX:h,maxY:g}}function $P(o,n){return n-o}function Dw(o,n,s,h,g){const _=[];for(let x=0;x<o.length;x++){const S=o[x];let k;for(let O=0;O<S.length-1;O++){let X=S[O],Y=S[O+1];X.x<n&&Y.x<n||(X.x<n?X=new w(n,X.y+(n-X.x)/(Y.x-X.x)*(Y.y-X.y))._round():Y.x<n&&(Y=new w(n,X.y+(n-X.x)/(Y.x-X.x)*(Y.y-X.y))._round()),X.y<s&&Y.y<s||(X.y<s?X=new w(X.x+(s-X.y)/(Y.y-X.y)*(Y.x-X.x),s)._round():Y.y<s&&(Y=new w(X.x+(s-X.y)/(Y.y-X.y)*(Y.x-X.x),s)._round()),X.x>=h&&Y.x>=h||(X.x>=h?X=new w(h,X.y+(h-X.x)/(Y.x-X.x)*(Y.y-X.y))._round():Y.x>=h&&(Y=new w(h,X.y+(h-X.x)/(Y.x-X.x)*(Y.y-X.y))._round()),X.y>=g&&Y.y>=g||(X.y>=g?X=new w(X.x+(g-X.y)/(Y.y-X.y)*(Y.x-X.x),g)._round():Y.y>=g&&(Y=new w(X.x+(g-X.y)/(Y.y-X.y)*(Y.x-X.x),g)._round()),k&&X.equals(k[k.length-1])||(k=[X],_.push(k)),k.push(Y)))))}}return _}Ut("FeatureIndex",Lw,{omit:["rawTileData","sourceLayerCoder"]});class Ll extends w{constructor(n,s,h,g){super(n,s),this.angle=h,g!==void 0&&(this.segment=g)}clone(){return new Ll(this.x,this.y,this.angle,this.segment)}}function Bw(o,n,s,h,g){if(n.segment===void 0||s===0)return!0;let _=n,x=n.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=o[x].dist(_),_=o[x]}S+=o[x].dist(o[x+1]),x++;const k=[];let O=0;for(;S<s/2;){const X=o[x],Y=o[x+1];if(!Y)return!1;let se=o[x-1].angleTo(X)-X.angleTo(Y);for(se=Math.abs((se+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:S,angleDelta:se}),O+=se;S-k[0].distance>h;)O-=k.shift().angleDelta;if(O>g)return!1;x++,S+=X.dist(Y)}return!0}function Nw(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function Uw(o,n,s){return o?.6*n*s:0}function $w(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function VP(o,n,s,h,g,_){const x=Uw(s,g,_),S=$w(s,h)*_;let k=0;const O=Nw(o)/2;for(let X=0;X<o.length-1;X++){const Y=o[X],se=o[X+1],fe=Y.dist(se);if(k+fe>O){const ge=(O-k)/fe,Ce=Yr.number(Y.x,se.x,ge),ze=Yr.number(Y.y,se.y,ge),Ue=new Ll(Ce,ze,se.angleTo(Y),X);return Ue._round(),!x||Bw(o,Ue,S,x,n)?Ue:void 0}k+=fe}}function GP(o,n,s,h,g,_,x,S,k){const O=Uw(h,_,x),X=$w(h,g),Y=X*x,se=o[0].x===0||o[0].x===k||o[0].y===0||o[0].y===k;return n-Y<n/4&&(n=Y+n/4),Vw(o,se?n/2*S%n:(X/2+2*_)*x*S%n,n,O,s,Y,se,!1,k)}function Vw(o,n,s,h,g,_,x,S,k){const O=_/2,X=Nw(o);let Y=0,se=n-s,fe=[];for(let ge=0;ge<o.length-1;ge++){const Ce=o[ge],ze=o[ge+1],Ue=Ce.dist(ze),Je=ze.angleTo(Ce);for(;se+s<Y+Ue;){se+=s;const Ge=(se-Y)/Ue,qe=Yr.number(Ce.x,ze.x,Ge),mt=Yr.number(Ce.y,ze.y,Ge);if(qe>=0&&qe<k&&mt>=0&&mt<k&&se-O>=0&&se+O<=X){const vt=new Ll(qe,mt,Je,ge);vt._round(),h&&!Bw(o,vt,_,h,g)||fe.push(vt)}}Y+=Ue}return S||fe.length||x||(fe=Vw(o,Y/2,s,h,g,_,x,!0,k)),fe}Ut("Anchor",Ll);const Uc=Yi;function Gw(o,n,s,h){const g=[],_=o.image,x=_.pixelRatio,S=_.paddedRect.w-2*Uc,k=_.paddedRect.h-2*Uc,O=o.right-o.left,X=o.bottom-o.top,Y=_.stretchX||[[0,S]],se=_.stretchY||[[0,k]],fe=(It,$t)=>It+$t[1]-$t[0],ge=Y.reduce(fe,0),Ce=se.reduce(fe,0),ze=S-ge,Ue=k-Ce;let Je=0,Ge=ge,qe=0,mt=Ce,vt=0,Dt=ze,Gt=0,Ft=Ue;if(_.content&&h){const It=_.content;Je=Ip(Y,0,It[0]),qe=Ip(se,0,It[1]),Ge=Ip(Y,It[0],It[2]),mt=Ip(se,It[1],It[3]),vt=It[0]-Je,Gt=It[1]-qe,Dt=It[2]-It[0]-Ge,Ft=It[3]-It[1]-mt}const zt=(It,$t,Mt,Et)=>{const en=Ap(It.stretch-Je,Ge,O,o.left),Zt=Pp(It.fixed-vt,Dt,It.stretch,ge),Cn=Ap($t.stretch-qe,mt,X,o.top),nr=Pp($t.fixed-Gt,Ft,$t.stretch,Ce),ar=Ap(Mt.stretch-Je,Ge,O,o.left),Hr=Pp(Mt.fixed-vt,Dt,Mt.stretch,ge),yo=Ap(Et.stretch-qe,mt,X,o.top),ji=Pp(Et.fixed-Gt,Ft,Et.stretch,Ce),jr=new w(en,Cn),ii=new w(ar,Cn),fi=new w(ar,yo),Di=new w(en,yo),Bi=new w(Zt/x,nr/x),Wr=new w(Hr/x,ji/x),Zr=n*Math.PI/180;if(Zr){const Si=Math.sin(Zr),Ji=Math.cos(Zr),Qi=[Ji,-Si,Si,Ji];jr._matMult(Qi),ii._matMult(Qi),Di._matMult(Qi),fi._matMult(Qi)}const bi=It.stretch+It.fixed,Ni=$t.stretch+$t.fixed;return{tl:jr,tr:ii,bl:Di,br:fi,tex:{x:_.paddedRect.x+Uc+bi,y:_.paddedRect.y+Uc+Ni,w:Mt.stretch+Mt.fixed-bi,h:Et.stretch+Et.fixed-Ni},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Bi,pixelOffsetBR:Wr,minFontScaleX:Dt/x/O,minFontScaleY:Ft/x/X,isSDF:s}};if(h&&(_.stretchX||_.stretchY)){const It=Hw(Y,ze,ge),$t=Hw(se,Ue,Ce);for(let Mt=0;Mt<It.length-1;Mt++){const Et=It[Mt],en=It[Mt+1];for(let Zt=0;Zt<$t.length-1;Zt++)g.push(zt(Et,$t[Zt],en,$t[Zt+1]))}}else g.push(zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:k+1}));return g}function Ip(o,n,s){let h=0;for(const g of o)h+=Math.max(n,Math.min(s,g[1]))-Math.max(n,Math.min(s,g[0]));return h}function Hw(o,n,s){const h=[{fixed:-Uc,stretch:0}];for(const[g,_]of o){const x=h[h.length-1];h.push({fixed:g-x.stretch,stretch:x.stretch}),h.push({fixed:g-x.stretch,stretch:x.stretch+(_-g)})}return h.push({fixed:n+Uc,stretch:s}),h}function Ap(o,n,s,h){return o/n*s+h}function Pp(o,n,s,h){return o-n*s/h}class kp{constructor(n,s,h,g,_,x,S,k,O,X){if(this.boxStartIndex=n.length,O){let Y=x.top,se=x.bottom;const fe=x.collisionPadding;fe&&(Y-=fe[1],se+=fe[3]);let ge=se-Y;ge>0&&(ge=Math.max(10,ge),this.circleDiameter=ge)}else{let Y=x.top*S-k[0],se=x.bottom*S+k[2],fe=x.left*S-k[3],ge=x.right*S+k[1];const Ce=x.collisionPadding;if(Ce&&(fe-=Ce[0]*S,Y-=Ce[1]*S,ge+=Ce[2]*S,se+=Ce[3]*S),X){const ze=new w(fe,Y),Ue=new w(ge,Y),Je=new w(fe,se),Ge=new w(ge,se),qe=X*Math.PI/180;ze._rotate(qe),Ue._rotate(qe),Je._rotate(qe),Ge._rotate(qe),fe=Math.min(ze.x,Ue.x,Je.x,Ge.x),ge=Math.max(ze.x,Ue.x,Je.x,Ge.x),Y=Math.min(ze.y,Ue.y,Je.y,Ge.y),se=Math.max(ze.y,Ue.y,Je.y,Ge.y)}n.emplaceBack(s.x,s.y,fe,Y,ge,se,h,g,_)}this.boxEndIndex=n.length}}class HP{constructor(n=[],s=WP){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,g=s[n];for(;n>0;){const _=n-1>>1,x=s[_];if(h(g,x)>=0)break;s[n]=x,n=_}s[n]=g}_down(n){const{data:s,compare:h}=this,g=this.length>>1,_=s[n];for(;n<g;){let x=1+(n<<1),S=s[x];const k=x+1;if(k<this.length&&h(s[k],S)<0&&(x=k,S=s[k]),h(S,_)>=0)break;s[n]=S,n=x}s[n]=_}}function WP(o,n){return o<n?-1:o>n?1:0}function ZP(o,n=1,s=!1){let h=1/0,g=1/0,_=-1/0,x=-1/0;const S=o[0];for(let fe=0;fe<S.length;fe++){const ge=S[fe];(!fe||ge.x<h)&&(h=ge.x),(!fe||ge.y<g)&&(g=ge.y),(!fe||ge.x>_)&&(_=ge.x),(!fe||ge.y>x)&&(x=ge.y)}const k=Math.min(_-h,x-g);let O=k/2;const X=new HP([],XP);if(k===0)return new w(h,g);for(let fe=h;fe<_;fe+=k)for(let ge=g;ge<x;ge+=k)X.push(new $c(fe+O,ge+O,O,o));let Y=function(fe){let ge=0,Ce=0,ze=0;const Ue=fe[0];for(let Je=0,Ge=Ue.length,qe=Ge-1;Je<Ge;qe=Je++){const mt=Ue[Je],vt=Ue[qe],Dt=mt.x*vt.y-vt.x*mt.y;Ce+=(mt.x+vt.x)*Dt,ze+=(mt.y+vt.y)*Dt,ge+=3*Dt}return new $c(Ce/ge,ze/ge,0,fe)}(o),se=X.length;for(;X.length;){const fe=X.pop();(fe.d>Y.d||!Y.d)&&(Y=fe,s&&console.log("found best %d after %d probes",Math.round(1e4*fe.d)/1e4,se)),fe.max-Y.d<=n||(O=fe.h/2,X.push(new $c(fe.p.x-O,fe.p.y-O,O,o)),X.push(new $c(fe.p.x+O,fe.p.y-O,O,o)),X.push(new $c(fe.p.x-O,fe.p.y+O,O,o)),X.push(new $c(fe.p.x+O,fe.p.y+O,O,o)),se+=4)}return s&&(console.log(`num probes: ${se}`),console.log(`best distance: ${Y.d}`)),Y.p}function XP(o,n){return n.max-o.max}function $c(o,n,s,h){this.p=new w(o,n),this.h=s,this.d=function(g,_){let x=!1,S=1/0;for(let k=0;k<_.length;k++){const O=_[k];for(let X=0,Y=O.length,se=Y-1;X<Y;se=X++){const fe=O[X],ge=O[se];fe.y>g.y!=ge.y>g.y&&g.x<(ge.x-fe.x)*(g.y-fe.y)/(ge.y-fe.y)+fe.x&&(x=!x),S=Math.min(S,Ax(g,fe,ge))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var di;d.ap=void 0,(di=d.ap||(d.ap={}))[di.center=1]="center",di[di.left=2]="left",di[di.right=3]="right",di[di.top=4]="top",di[di.bottom=5]="bottom",di[di["top-left"]=6]="top-left",di[di["top-right"]=7]="top-right",di[di["bottom-left"]=8]="bottom-left",di[di["bottom-right"]=9]="bottom-right";const Fl=7,Vy=Number.POSITIVE_INFINITY;function Ww(o,n){return n[1]!==Vy?function(s,h,g){let _=0,x=0;switch(h=Math.abs(h),g=Math.abs(g),s){case"top-right":case"top-left":case"top":x=g-Fl;break;case"bottom-right":case"bottom-left":case"bottom":x=-g+Fl}switch(s){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,x]}(o,n[0],n[1]):function(s,h){let g=0,_=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":_=x-Fl;break;case"bottom-right":case"bottom-left":_=-x+Fl;break;case"bottom":_=-h+Fl;break;case"top":_=h-Fl}switch(s){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=h;break;case"right":g=-h}return[g,_]}(o,n[0])}function Zw(o,n,s){var h;const g=o.layout,_=(h=g.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(_){const S=_.values,k=[];for(let O=0;O<S.length;O+=2){const X=k[O]=S[O],Y=S[O+1].map(se=>se*Gr);X.startsWith("top")?Y[1]-=Fl:X.startsWith("bottom")&&(Y[1]+=Fl),k[O+1]=Y}return new Mi(k)}const x=g.get("text-variable-anchor");if(x){let S;S=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(n,{},s)*Gr,Vy]:g.get("text-offset").evaluate(n,{},s).map(O=>O*Gr);const k=[];for(const O of x)k.push(O,Ww(O,S));return new Mi(k)}return null}function Gy(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function qP(o,n,s,h,g,_,x,S,k,O,X){let Y=_.textMaxSize.evaluate(n,{});Y===void 0&&(Y=x);const se=o.layers[0].layout,fe=se.get("icon-offset").evaluate(n,{},X),ge=qw(s.horizontal),Ce=x/24,ze=o.tilePixelRatio*Ce,Ue=o.tilePixelRatio*Y/24,Je=o.tilePixelRatio*S,Ge=o.tilePixelRatio*se.get("symbol-spacing"),qe=se.get("text-padding")*o.tilePixelRatio,mt=function(Et,en,Zt,Cn=1){const nr=Et.get("icon-padding").evaluate(en,{},Zt),ar=nr&&nr.values;return[ar[0]*Cn,ar[1]*Cn,ar[2]*Cn,ar[3]*Cn]}(se,n,X,o.tilePixelRatio),vt=se.get("text-max-angle")/180*Math.PI,Dt=se.get("text-rotation-alignment")!=="viewport"&&se.get("symbol-placement")!=="point",Gt=se.get("icon-rotation-alignment")==="map"&&se.get("symbol-placement")!=="point",Ft=se.get("symbol-placement"),zt=Ge/2,It=se.get("icon-text-fit");let $t;h&&It!=="none"&&(o.allowVerticalPlacement&&s.vertical&&($t=vw(h,s.vertical,It,se.get("icon-text-fit-padding"),fe,Ce)),ge&&(h=vw(h,ge,It,se.get("icon-text-fit-padding"),fe,Ce)));const Mt=(Et,en)=>{en.x<0||en.x>=br||en.y<0||en.y>=br||function(Zt,Cn,nr,ar,Hr,yo,ji,jr,ii,fi,Di,Bi,Wr,Zr,bi,Ni,Si,Ji,Qi,Xr,Mn,Ei,pi,qr,rs){const bs=Zt.addToLineVertexArray(Cn,nr);let Ss,Ra,is,Lo,eo=0,Oa=0,Id=0,Qw=0,Jy=-1,Qy=-1;const La={};let eb=gr("");if(Zt.allowVerticalPlacement&&ar.vertical){const Ti=jr.layout.get("text-rotate").evaluate(Mn,{},qr)+90;is=new kp(ii,Cn,fi,Di,Bi,ar.vertical,Wr,Zr,bi,Ti),ji&&(Lo=new kp(ii,Cn,fi,Di,Bi,ji,Si,Ji,bi,Ti))}if(Hr){const Ti=jr.layout.get("icon-rotate").evaluate(Mn,{}),Fo=jr.layout.get("icon-text-fit")!=="none",Ou=Gw(Hr,Ti,pi,Fo),Ts=ji?Gw(ji,Ti,pi,Fo):void 0;Ra=new kp(ii,Cn,fi,Di,Bi,Hr,Si,Ji,!1,Ti),eo=4*Ou.length;const Lu=Zt.iconSizeData;let Ys=null;Lu.kind==="source"?(Ys=[Ks*jr.layout.get("icon-size").evaluate(Mn,{})],Ys[0]>Rl&&_e(`${Zt.layerIds[0]}: Value for "icon-size" is >= ${Sd}. Reduce your "icon-size".`)):Lu.kind==="composite"&&(Ys=[Ks*Ei.compositeIconSizes[0].evaluate(Mn,{},qr),Ks*Ei.compositeIconSizes[1].evaluate(Mn,{},qr)],(Ys[0]>Rl||Ys[1]>Rl)&&_e(`${Zt.layerIds[0]}: Value for "icon-size" is >= ${Sd}. Reduce your "icon-size".`)),Zt.addSymbols(Zt.icon,Ou,Ys,Xr,Qi,Mn,d.ah.none,Cn,bs.lineStartIndex,bs.lineLength,-1,qr),Jy=Zt.icon.placedSymbolArray.length-1,Ts&&(Oa=4*Ts.length,Zt.addSymbols(Zt.icon,Ts,Ys,Xr,Qi,Mn,d.ah.vertical,Cn,bs.lineStartIndex,bs.lineLength,-1,qr),Qy=Zt.icon.placedSymbolArray.length-1)}const tb=Object.keys(ar.horizontal);for(const Ti of tb){const Fo=ar.horizontal[Ti];if(!Ss){eb=gr(Fo.text);const Ts=jr.layout.get("text-rotate").evaluate(Mn,{},qr);Ss=new kp(ii,Cn,fi,Di,Bi,Fo,Wr,Zr,bi,Ts)}const Ou=Fo.positionedLines.length===1;if(Id+=Xw(Zt,Cn,Fo,yo,jr,bi,Mn,Ni,bs,ar.vertical?d.ah.horizontal:d.ah.horizontalOnly,Ou?tb:[Ti],La,Jy,Ei,qr),Ou)break}ar.vertical&&(Qw+=Xw(Zt,Cn,ar.vertical,yo,jr,bi,Mn,Ni,bs,d.ah.vertical,["vertical"],La,Qy,Ei,qr));const JP=Ss?Ss.boxStartIndex:Zt.collisionBoxArray.length,QP=Ss?Ss.boxEndIndex:Zt.collisionBoxArray.length,ek=is?is.boxStartIndex:Zt.collisionBoxArray.length,tk=is?is.boxEndIndex:Zt.collisionBoxArray.length,nk=Ra?Ra.boxStartIndex:Zt.collisionBoxArray.length,rk=Ra?Ra.boxEndIndex:Zt.collisionBoxArray.length,ik=Lo?Lo.boxStartIndex:Zt.collisionBoxArray.length,ok=Lo?Lo.boxEndIndex:Zt.collisionBoxArray.length;let Es=-1;const zp=(Ti,Fo)=>Ti&&Ti.circleDiameter?Math.max(Ti.circleDiameter,Fo):Fo;Es=zp(Ss,Es),Es=zp(is,Es),Es=zp(Ra,Es),Es=zp(Lo,Es);const nb=Es>-1?1:0;nb&&(Es*=rs/Gr),Zt.glyphOffsetArray.length>=Nc.MAX_GLYPHS&&_e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Mn.sortKey!==void 0&&Zt.addToSortKeyRanges(Zt.symbolInstances.length,Mn.sortKey);const sk=Zw(jr,Mn,qr),[ak,lk]=function(Ti,Fo){const Ou=Ti.length,Ts=Fo==null?void 0:Fo.values;if((Ts==null?void 0:Ts.length)>0)for(let Lu=0;Lu<Ts.length;Lu+=2){const Ys=Ts[Lu+1];Ti.emplaceBack(d.ap[Ts[Lu]],Ys[0],Ys[1])}return[Ou,Ti.length]}(Zt.textAnchorOffsets,sk);Zt.symbolInstances.emplaceBack(Cn.x,Cn.y,La.right>=0?La.right:-1,La.center>=0?La.center:-1,La.left>=0?La.left:-1,La.vertical||-1,Jy,Qy,eb,JP,QP,ek,tk,nk,rk,ik,ok,fi,Id,Qw,eo,Oa,nb,0,Wr,Es,ak,lk)}(o,en,Et,s,h,g,$t,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,ze,[qe,qe,qe,qe],Dt,k,Je,mt,Gt,fe,n,_,O,X,x)};if(Ft==="line")for(const Et of Dw(n.geometry,0,0,br,br)){const en=GP(Et,Ge,vt,s.vertical||ge,h,24,Ue,o.overscaling,br);for(const Zt of en)ge&&KP(o,ge.text,zt,Zt)||Mt(Et,Zt)}else if(Ft==="line-center"){for(const Et of n.geometry)if(Et.length>1){const en=VP(Et,vt,s.vertical||ge,h,24,Ue);en&&Mt(Et,en)}}else if(n.type==="Polygon")for(const Et of by(n.geometry,0)){const en=ZP(Et,16);Mt(Et[0],new Ll(en.x,en.y,0))}else if(n.type==="LineString")for(const Et of n.geometry)Mt(Et,new Ll(Et[0].x,Et[0].y,0));else if(n.type==="Point")for(const Et of n.geometry)for(const en of Et)Mt([en],new Ll(en.x,en.y,0))}function Xw(o,n,s,h,g,_,x,S,k,O,X,Y,se,fe,ge){const Ce=function(Je,Ge,qe,mt,vt,Dt,Gt,Ft){const zt=mt.layout.get("text-rotate").evaluate(Dt,{})*Math.PI/180,It=[];for(const $t of Ge.positionedLines)for(const Mt of $t.positionedGlyphs){if(!Mt.rect)continue;const Et=Mt.rect||{};let en=hw+1,Zt=!0,Cn=1,nr=0;const ar=(vt||Ft)&&Mt.vertical,Hr=Mt.metrics.advance*Mt.scale/2;if(Ft&&Ge.verticalizable&&(nr=$t.lineOffset/2-(Mt.imageName?-(Gr-Mt.metrics.width*Mt.scale)/2:(Mt.scale-1)*Gr)),Mt.imageName){const Xr=Gt[Mt.imageName];Zt=Xr.sdf,Cn=Xr.pixelRatio,en=Yi/Cn}const yo=vt?[Mt.x+Hr,Mt.y]:[0,0];let ji=vt?[0,0]:[Mt.x+Hr+qe[0],Mt.y+qe[1]-nr],jr=[0,0];ar&&(jr=ji,ji=[0,0]);const ii=Mt.metrics.isDoubleResolution?2:1,fi=(Mt.metrics.left-en)*Mt.scale-Hr+ji[0],Di=(-Mt.metrics.top-en)*Mt.scale+ji[1],Bi=fi+Et.w/ii*Mt.scale/Cn,Wr=Di+Et.h/ii*Mt.scale/Cn,Zr=new w(fi,Di),bi=new w(Bi,Di),Ni=new w(fi,Wr),Si=new w(Bi,Wr);if(ar){const Xr=new w(-Hr,Hr-wd),Mn=-Math.PI/2,Ei=Gr/2-Hr,pi=new w(5-wd-Ei,-(Mt.imageName?Ei:0)),qr=new w(...jr);Zr._rotateAround(Mn,Xr)._add(pi)._add(qr),bi._rotateAround(Mn,Xr)._add(pi)._add(qr),Ni._rotateAround(Mn,Xr)._add(pi)._add(qr),Si._rotateAround(Mn,Xr)._add(pi)._add(qr)}if(zt){const Xr=Math.sin(zt),Mn=Math.cos(zt),Ei=[Mn,-Xr,Xr,Mn];Zr._matMult(Ei),bi._matMult(Ei),Ni._matMult(Ei),Si._matMult(Ei)}const Ji=new w(0,0),Qi=new w(0,0);It.push({tl:Zr,tr:bi,bl:Ni,br:Si,tex:Et,writingMode:Ge.writingMode,glyphOffset:yo,sectionIndex:Mt.sectionIndex,isSDF:Zt,pixelOffsetTL:Ji,pixelOffsetBR:Qi,minFontScaleX:0,minFontScaleY:0})}return It}(0,s,S,g,_,x,h,o.allowVerticalPlacement),ze=o.textSizeData;let Ue=null;ze.kind==="source"?(Ue=[Ks*g.layout.get("text-size").evaluate(x,{})],Ue[0]>Rl&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Sd}. Reduce your "text-size".`)):ze.kind==="composite"&&(Ue=[Ks*fe.compositeTextSizes[0].evaluate(x,{},ge),Ks*fe.compositeTextSizes[1].evaluate(x,{},ge)],(Ue[0]>Rl||Ue[1]>Rl)&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Sd}. Reduce your "text-size".`)),o.addSymbols(o.text,Ce,Ue,S,_,x,O,n,k.lineStartIndex,k.lineLength,se,ge);for(const Je of X)Y[Je]=o.text.placedSymbolArray.length-1;return 4*Ce.length}function qw(o){for(const n in o)return o[n];return null}function KP(o,n,s,h){const g=o.compareText;if(n in g){const _=g[n];for(let x=_.length-1;x>=0;x--)if(h.dist(_[x])<s)return!0}else g[n]=[];return g[n].push(h),!1}const Kw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Hy{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=Kw[15&h];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new Hy(S,x,_,n)}constructor(n,s=64,h=Float64Array,g){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const _=Kw.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-S%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+k,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+k),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+k,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Wy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:S}=this,k=[0,_.length-1,0],O=[];for(;k.length;){const X=k.pop()||0,Y=k.pop()||0,se=k.pop()||0;if(Y-se<=S){for(let ze=se;ze<=Y;ze++){const Ue=x[2*ze],Je=x[2*ze+1];Ue>=n&&Ue<=h&&Je>=s&&Je<=g&&O.push(_[ze])}continue}const fe=se+Y>>1,ge=x[2*fe],Ce=x[2*fe+1];ge>=n&&ge<=h&&Ce>=s&&Ce<=g&&O.push(_[fe]),(X===0?n<=ge:s<=Ce)&&(k.push(se),k.push(fe-1),k.push(1-X)),(X===0?h>=ge:g>=Ce)&&(k.push(fe+1),k.push(Y),k.push(1-X))}return O}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:x}=this,S=[0,g.length-1,0],k=[],O=h*h;for(;S.length;){const X=S.pop()||0,Y=S.pop()||0,se=S.pop()||0;if(Y-se<=x){for(let ze=se;ze<=Y;ze++)Jw(_[2*ze],_[2*ze+1],n,s)<=O&&k.push(g[ze]);continue}const fe=se+Y>>1,ge=_[2*fe],Ce=_[2*fe+1];Jw(ge,Ce,n,s)<=O&&k.push(g[fe]),(X===0?n-h<=ge:s-h<=Ce)&&(S.push(se),S.push(fe-1),S.push(1-X)),(X===0?n+h>=ge:s+h>=Ce)&&(S.push(fe+1),S.push(Y),S.push(1-X))}return k}}function Wy(o,n,s,h,g,_){if(g-h<=s)return;const x=h+g>>1;Yw(o,n,x,h,g,_),Wy(o,n,s,h,x-1,1-_),Wy(o,n,s,x+1,g,1-_)}function Yw(o,n,s,h,g,_){for(;g>h;){if(g-h>600){const O=g-h+1,X=s-h+1,Y=Math.log(O),se=.5*Math.exp(2*Y/3),fe=.5*Math.sqrt(Y*se*(O-se)/O)*(X-O/2<0?-1:1);Yw(o,n,s,Math.max(h,Math.floor(s-X*se/O+fe)),Math.min(g,Math.floor(s+(O-X)*se/O+fe)),_)}const x=n[2*s+_];let S=h,k=g;for(Td(o,n,h,s),n[2*g+_]>x&&Td(o,n,h,g);S<k;){for(Td(o,n,S,k),S++,k--;n[2*S+_]<x;)S++;for(;n[2*k+_]>x;)k--}n[2*h+_]===x?Td(o,n,h,k):(k++,Td(o,n,k,g)),k<=s&&(h=k+1),s<=k&&(g=k-1)}}function Td(o,n,s,h){Zy(o,s,h),Zy(n,2*s,2*h),Zy(n,2*s+1,2*h+1)}function Zy(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function Jw(o,n,s,h){const g=o-s,_=n-h;return g*g+_*_}var Xy;d.bd=void 0,(Xy=d.bd||(d.bd={})).create="create",Xy.load="load",Xy.fullLoad="fullLoad";let Mp=null,Cd=[];const qy=1e3/60,Ky="loadTime",Yy="fullLoadTime",YP={mark(o){performance.mark(o)},frame(o){const n=o;Mp!=null&&Cd.push(n-Mp),Mp=n},clearMetrics(){Mp=null,Cd=[],performance.clearMeasures(Ky),performance.clearMeasures(Yy);for(const o in d.bd)performance.clearMarks(d.bd[o])},getPerformanceMetrics(){performance.measure(Ky,d.bd.create,d.bd.load),performance.measure(Yy,d.bd.create,d.bd.fullLoad);const o=performance.getEntriesByName(Ky)[0].duration,n=performance.getEntriesByName(Yy)[0].duration,s=Cd.length,h=1/(Cd.reduce((_,x)=>_+x,0)/s/1e3),g=Cd.filter(_=>_>qy).reduce((_,x)=>_+(x-qy)/qy,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:g/(s+g)*100,totalFrames:s}}};d.$=At,d.A=Oc,d.B=function(o){if(J==null){const n=o.navigator?o.navigator.userAgent:null;J=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return J},d.C=class{constructor(o,n){this.target=o,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new UP(()=>this.process()),this.subscription=function(s,h,g,_){return s.addEventListener(h,g,!1),{unsubscribe:()=>{s.removeEventListener(h,g,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=le(self)?o:window}registerMessageHandler(o,n){this.messageHandlers[o]=n}sendAsync(o,n){return new Promise((s,h)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[g]={resolve:s,reject:h},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[g];const S={id:g,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const _=[],x=Object.assign(Object.assign({},o),{id:g,sourceMapId:this.mapId,origin:location.origin,data:Il(o.data,_)});this.target.postMessage(x,{transfer:_})})}receive(o){const n=o.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(le(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){return u(this,void 0,void 0,function*(){if(n.type==="<response>"){const g=this.resolveRejects[o];return delete this.resolveRejects[o],g?void(n.error?g.reject(Al(n.error)):g.resolve(Al(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=Al(n.data),h=new AbortController;this.abortControllers[o]=h;try{const g=yield this.messageHandlers[n.type](n.sourceMapId,s,h);this.completeTask(o,null,g)}catch(g){this.completeTask(o,g)}})}completeTask(o,n,s){const h=[];delete this.abortControllers[o];const g={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Il(n):null,data:Il(s,h)};this.target.postMessage(g,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.D=qt,d.E=Sn,d.F=function(){var o=new Oc(16);return Oc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},d.G=nt,d.H=function(o,n,s){var h,g,_,x,S,k,O,X,Y,se,fe,ge,Ce=s[0],ze=s[1],Ue=s[2];return n===o?(o[12]=n[0]*Ce+n[4]*ze+n[8]*Ue+n[12],o[13]=n[1]*Ce+n[5]*ze+n[9]*Ue+n[13],o[14]=n[2]*Ce+n[6]*ze+n[10]*Ue+n[14],o[15]=n[3]*Ce+n[7]*ze+n[11]*Ue+n[15]):(g=n[1],_=n[2],x=n[3],S=n[4],k=n[5],O=n[6],X=n[7],Y=n[8],se=n[9],fe=n[10],ge=n[11],o[0]=h=n[0],o[1]=g,o[2]=_,o[3]=x,o[4]=S,o[5]=k,o[6]=O,o[7]=X,o[8]=Y,o[9]=se,o[10]=fe,o[11]=ge,o[12]=h*Ce+S*ze+Y*Ue+n[12],o[13]=g*Ce+k*ze+se*Ue+n[13],o[14]=_*Ce+O*ze+fe*Ue+n[14],o[15]=x*Ce+X*ze+ge*Ue+n[15]),o},d.I=zy,d.J=function(o,n,s){var h=s[0],g=s[1],_=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*g,o[5]=n[5]*g,o[6]=n[6]*g,o[7]=n[7]*g,o[8]=n[8]*_,o[9]=n[9]*_,o[10]=n[10]*_,o[11]=n[11]*_,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},d.K=zx,d.L=function(o,n){const s={};for(let h=0;h<n.length;h++){const g=n[h];g in o&&(s[g]=o[g])}return s},d.M=Ol,d.N=Iw,d.O=Aw,d.P=w,d.Q=Oo,d.R=Ro,d.S=K,d.T=Kh,d.U=Z,d.V=be,d.W=br,d.X=Tr,d.Y=Cp,d.Z=class extends Qh{},d._=u,d.a=We,d.a$=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},d.a0=$y,d.a1=z,d.a2=o=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(s=>{n.onloadstart=()=>{s(n)};for(const h of o){const g=window.document.createElement("source");gt(h)||(n.crossOrigin="Anonymous"),g.src=h,n.appendChild(g)}})},d.a3=function(){return j++},d.a4=y,d.a5=Nc,d.a6=po,d.a7=Ma,d.a8=or,d.a9=Ow,d.aA=W,d.aB=function(o,n){if(!o)return[{command:"setStyle",args:[n]}];let s=[];try{if(!xe(o.version,n.version))return[{command:"setStyle",args:[n]}];xe(o.center,n.center)||s.push({command:"setCenter",args:[n.center]}),xe(o.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),xe(o.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),xe(o.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),xe(o.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),xe(o.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),xe(o.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),xe(o.light,n.light)||s.push({command:"setLight",args:[n.light]}),xe(o.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),xe(o.sky,n.sky)||s.push({command:"setSky",args:[n.sky]});const h={},g=[];(function(x,S,k,O){let X;for(X in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,X)&&(Object.prototype.hasOwnProperty.call(S,X)||we(X,k,O));for(X in S)Object.prototype.hasOwnProperty.call(S,X)&&(Object.prototype.hasOwnProperty.call(x,X)?xe(x[X],S[X])||(x[X].type==="geojson"&&S[X].type==="geojson"&&Qe(x,S,X)?N(k,{command:"setGeoJSONSourceData",args:[X,S[X].data]}):Xe(X,S,k,O)):B(X,S,k))})(o.sources,n.sources,g,h);const _=[];o.layers&&o.layers.forEach(x=>{"source"in x&&h[x.source]?s.push({command:"removeLayer",args:[x.id]}):_.push(x)}),s=s.concat(g),function(x,S,k){S=S||[];const O=(x=x||[]).map(ae),X=S.map(ae),Y=x.reduce(R,{}),se=S.reduce(R,{}),fe=O.slice(),ge=Object.create(null);let Ce,ze,Ue,Je,Ge;for(let qe=0,mt=0;qe<O.length;qe++)Ce=O[qe],Object.prototype.hasOwnProperty.call(se,Ce)?mt++:(N(k,{command:"removeLayer",args:[Ce]}),fe.splice(fe.indexOf(Ce,mt),1));for(let qe=0,mt=0;qe<X.length;qe++)Ce=X[X.length-1-qe],fe[fe.length-1-qe]!==Ce&&(Object.prototype.hasOwnProperty.call(Y,Ce)?(N(k,{command:"removeLayer",args:[Ce]}),fe.splice(fe.lastIndexOf(Ce,fe.length-mt),1)):mt++,Je=fe[fe.length-qe],N(k,{command:"addLayer",args:[se[Ce],Je]}),fe.splice(fe.length-qe,0,Ce),ge[Ce]=!0);for(let qe=0;qe<X.length;qe++)if(Ce=X[qe],ze=Y[Ce],Ue=se[Ce],!ge[Ce]&&!xe(ze,Ue))if(xe(ze.source,Ue.source)&&xe(ze["source-layer"],Ue["source-layer"])&&xe(ze.type,Ue.type)){for(Ge in ct(ze.layout,Ue.layout,k,Ce,null,"setLayoutProperty"),ct(ze.paint,Ue.paint,k,Ce,null,"setPaintProperty"),xe(ze.filter,Ue.filter)||N(k,{command:"setFilter",args:[Ce,Ue.filter]}),xe(ze.minzoom,Ue.minzoom)&&xe(ze.maxzoom,Ue.maxzoom)||N(k,{command:"setLayerZoomRange",args:[Ce,Ue.minzoom,Ue.maxzoom]}),ze)Object.prototype.hasOwnProperty.call(ze,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?ct(ze[Ge],Ue[Ge],k,Ce,Ge.slice(6),"setPaintProperty"):xe(ze[Ge],Ue[Ge])||N(k,{command:"setLayerProperty",args:[Ce,Ge,Ue[Ge]]}));for(Ge in Ue)Object.prototype.hasOwnProperty.call(Ue,Ge)&&!Object.prototype.hasOwnProperty.call(ze,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?ct(ze[Ge],Ue[Ge],k,Ce,Ge.slice(6),"setPaintProperty"):xe(ze[Ge],Ue[Ge])||N(k,{command:"setLayerProperty",args:[Ce,Ge,Ue[Ge]]}))}else N(k,{command:"removeLayer",args:[Ce]}),Je=fe[fe.lastIndexOf(Ce)+1],N(k,{command:"addLayer",args:[Ue,Je]})}(_,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[n]}]}return s},d.aC=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},d.aD=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},d.aE=D,d.aF=ee,d.aG=class extends Vr{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},d.aH=Ki,d.aI=class extends Vr{constructor(o,n){super(o,n),this.current=zu}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},d.aJ=ts,d.aK=class extends Vr{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},d.aL=class extends Vr{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},d.aM=Zs,d.aN=function(o,n,s,h,g,_,x){var S=1/(n-s),k=1/(h-g),O=1/(_-x);return o[0]=-2*S,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*k,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*O,o[11]=0,o[12]=(n+s)*S,o[13]=(g+h)*k,o[14]=(x+_)*O,o[15]=1,o},d.aO=Bn,d.aP=wA,d.aQ=class extends Cc{},d.aR=mP,d.aS=class extends Ic{},d.aT=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},d.aU=jx,d.aV=ne,d.aW=class extends od{},d.aX=lt,d.aY=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]&&o[3]===n[3]&&o[4]===n[4]&&o[5]===n[5]&&o[6]===n[6]&&o[7]===n[7]&&o[8]===n[8]&&o[9]===n[9]&&o[10]===n[10]&&o[11]===n[11]&&o[12]===n[12]&&o[13]===n[13]&&o[14]===n[14]&&o[15]===n[15]},d.aZ=function(o,n){var s=o[0],h=o[1],g=o[2],_=o[3],x=o[4],S=o[5],k=o[6],O=o[7],X=o[8],Y=o[9],se=o[10],fe=o[11],ge=o[12],Ce=o[13],ze=o[14],Ue=o[15],Je=n[0],Ge=n[1],qe=n[2],mt=n[3],vt=n[4],Dt=n[5],Gt=n[6],Ft=n[7],zt=n[8],It=n[9],$t=n[10],Mt=n[11],Et=n[12],en=n[13],Zt=n[14],Cn=n[15];return Math.abs(s-Je)<=Fi*Math.max(1,Math.abs(s),Math.abs(Je))&&Math.abs(h-Ge)<=Fi*Math.max(1,Math.abs(h),Math.abs(Ge))&&Math.abs(g-qe)<=Fi*Math.max(1,Math.abs(g),Math.abs(qe))&&Math.abs(_-mt)<=Fi*Math.max(1,Math.abs(_),Math.abs(mt))&&Math.abs(x-vt)<=Fi*Math.max(1,Math.abs(x),Math.abs(vt))&&Math.abs(S-Dt)<=Fi*Math.max(1,Math.abs(S),Math.abs(Dt))&&Math.abs(k-Gt)<=Fi*Math.max(1,Math.abs(k),Math.abs(Gt))&&Math.abs(O-Ft)<=Fi*Math.max(1,Math.abs(O),Math.abs(Ft))&&Math.abs(X-zt)<=Fi*Math.max(1,Math.abs(X),Math.abs(zt))&&Math.abs(Y-It)<=Fi*Math.max(1,Math.abs(Y),Math.abs(It))&&Math.abs(se-$t)<=Fi*Math.max(1,Math.abs(se),Math.abs($t))&&Math.abs(fe-Mt)<=Fi*Math.max(1,Math.abs(fe),Math.abs(Mt))&&Math.abs(ge-Et)<=Fi*Math.max(1,Math.abs(ge),Math.abs(Et))&&Math.abs(Ce-en)<=Fi*Math.max(1,Math.abs(Ce),Math.abs(en))&&Math.abs(ze-Zt)<=Fi*Math.max(1,Math.abs(ze),Math.abs(Zt))&&Math.abs(Ue-Cn)<=Fi*Math.max(1,Math.abs(Ue),Math.abs(Cn))},d.a_=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},d.aa=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,g,_)=>{const x=g||_;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},d.ab=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},d.ac=q,d.ad=function(o,n,s){var h=Math.sin(s),g=Math.cos(s),_=n[0],x=n[1],S=n[2],k=n[3],O=n[4],X=n[5],Y=n[6],se=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=_*g+O*h,o[1]=x*g+X*h,o[2]=S*g+Y*h,o[3]=k*g+se*h,o[4]=O*g-_*h,o[5]=X*g-x*h,o[6]=Y*g-S*h,o[7]=se*g-k*h,o},d.ae=function(o){var n=new Oc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},d.af=mp,d.ag=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:x}=o,S=g?q(Jr.interpolationFactor(g,n,_,x),0,1):0;o.kind==="camera"?h=Yr.number(o.minSize,o.maxSize,S):s=S}return{uSizeT:s,uSize:h}},d.ai=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:g}){return o.kind==="source"?h/Ks:o.kind==="composite"?Yr.number(h/Ks,g/Ks,s):n},d.aj=Fy,d.ak=function(o,n,s,h){const g=n.y-o.y,_=n.x-o.x,x=h.y-s.y,S=h.x-s.x,k=x*_-S*g;if(k===0)return null;const O=(S*(o.y-s.y)-x*(o.x-s.x))/k;return new w(o.x+O*_,o.y+O*g)},d.al=Dw,d.am=ad,d.an=my,d.ao=Gr,d.aq=Ly,d.ar=function(o,n){var s=n[0],h=n[1],g=n[2],_=n[3],x=n[4],S=n[5],k=n[6],O=n[7],X=n[8],Y=n[9],se=n[10],fe=n[11],ge=n[12],Ce=n[13],ze=n[14],Ue=n[15],Je=s*S-h*x,Ge=s*k-g*x,qe=s*O-_*x,mt=h*k-g*S,vt=h*O-_*S,Dt=g*O-_*k,Gt=X*Ce-Y*ge,Ft=X*ze-se*ge,zt=X*Ue-fe*ge,It=Y*ze-se*Ce,$t=Y*Ue-fe*Ce,Mt=se*Ue-fe*ze,Et=Je*Mt-Ge*$t+qe*It+mt*zt-vt*Ft+Dt*Gt;return Et?(o[0]=(S*Mt-k*$t+O*It)*(Et=1/Et),o[1]=(g*$t-h*Mt-_*It)*Et,o[2]=(Ce*Dt-ze*vt+Ue*mt)*Et,o[3]=(se*vt-Y*Dt-fe*mt)*Et,o[4]=(k*zt-x*Mt-O*Ft)*Et,o[5]=(s*Mt-g*zt+_*Ft)*Et,o[6]=(ze*qe-ge*Dt-Ue*Ge)*Et,o[7]=(X*Dt-se*qe+fe*Ge)*Et,o[8]=(x*$t-S*zt+O*Gt)*Et,o[9]=(h*zt-s*$t-_*Gt)*Et,o[10]=(ge*vt-Ce*qe+Ue*Je)*Et,o[11]=(Y*qe-X*vt-fe*Je)*Et,o[12]=(S*Ft-x*It-k*Gt)*Et,o[13]=(s*It-h*Ft+g*Gt)*Et,o[14]=(Ce*Ge-ge*mt-ze*Je)*Et,o[15]=(X*mt-Y*Ge+se*Je)*Et,o):null},d.as=Gy,d.at=Oy,d.au=Hy,d.av=function(){const o={},n=et.$version;for(const s in et.$root){const h=et.$root[s];if(h.required){let g=null;g=s==="version"?n:h.type==="array"?[]:{},g!=null&&(o[s]=g)}}return o},d.aw=tp,d.ax=wt,d.ay=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=wn(o[s],n[o[s].ref]));return o},d.az=function(o){if(o.type==="custom")return new NP(o);switch(o.type){case"background":return new jP(o);case"circle":return new bA(o);case"fill":return new $A(o);case"fill-extrusion":return new rP(o);case"heatmap":return new EA(o);case"hillshade":return new CA(o);case"line":return new hP(o);case"raster":return new BP(o);case"symbol":return new Tp(o)}},d.b=te,d.b0=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},d.b1=V,d.b2=Mw,d.b3=Pw,d.b4=function(o,n,s,h,g){var _,x=1/Math.tan(n/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,g!=null&&g!==1/0?(o[10]=(g+h)*(_=1/(h-g)),o[14]=2*g*h*_):(o[10]=-1,o[14]=-2*h),o},d.b5=function(o,n,s){var h=Math.sin(s),g=Math.cos(s),_=n[4],x=n[5],S=n[6],k=n[7],O=n[8],X=n[9],Y=n[10],se=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=_*g+O*h,o[5]=x*g+X*h,o[6]=S*g+Y*h,o[7]=k*g+se*h,o[8]=O*g-_*h,o[9]=X*g-x*h,o[10]=Y*g-S*h,o[11]=se*g-k*h,o},d.b6=$,d.b7=oe,d.b8=function(o){return o*Math.PI/180},d.b9=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},d.bA=Ws,d.ba=class extends xs{},d.bb=Ny,d.bc=YP,d.be=dt,d.bf=function(o,n){We.REGISTERED_PROTOCOLS[o]=n},d.bg=function(o){delete We.REGISTERED_PROTOCOLS[o]},d.bh=function(o,n){const s={};for(let g=0;g<o.length;g++){const _=n&&n[o[g].id]||wl(o[g]);n&&(n[o[g].id]=_);let x=s[_];x||(x=s[_]=[]),x.push(o[g])}const h=[];for(const g in s)h.push(s[g]);return h},d.bi=Ut,d.bj=Rw,d.bk=Lw,d.bl=fw,d.bm=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=br/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new or(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new or(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new or(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:O,maxZoom:X}=o.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new or(O),o.canonical),h["text-size"].possiblyEvaluate(new or(X),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:O,maxZoom:X}=o.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new or(O),o.canonical),h["icon-size"].possiblyEvaluate(new or(X),o.canonical)]}const _=s.get("text-line-height")*Gr,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),k=s.get("text-size");for(const O of o.bucket.features){const X=s.get("text-font").evaluate(O,{},o.canonical).join(","),Y=k.evaluate(O,{},o.canonical),se=g.layoutTextSize.evaluate(O,{},o.canonical),fe=g.layoutIconSize.evaluate(O,{},o.canonical),ge={horizontal:{},vertical:void 0},Ce=O.text;let ze,Ue=[0,0];if(Ce){const qe=Ce.toString(),mt=s.get("text-letter-spacing").evaluate(O,{},o.canonical)*Gr,vt=np(qe)?mt:0,Dt=s.get("text-anchor").evaluate(O,{},o.canonical),Gt=Zw(n,O,o.canonical);if(!Gt){const Mt=s.get("text-radial-offset").evaluate(O,{},o.canonical);Ue=Mt?Ww(Dt,[Mt*Gr,Vy]):s.get("text-offset").evaluate(O,{},o.canonical).map(Et=>Et*Gr)}let Ft=x?"center":s.get("text-justify").evaluate(O,{},o.canonical);const zt=s.get("symbol-placement"),It=zt==="point"?s.get("text-max-width").evaluate(O,{},o.canonical)*Gr:0,$t=()=>{o.bucket.allowVerticalPlacement&&Pl(qe)&&(ge.vertical=bp(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,X,It,_,Dt,"left",vt,Ue,d.ah.vertical,!0,zt,se,Y))};if(!x&&Gt){const Mt=new Set;if(Ft==="auto")for(let en=0;en<Gt.values.length;en+=2)Mt.add(Gy(Gt.values[en]));else Mt.add(Ft);let Et=!1;for(const en of Mt)if(!ge.horizontal[en])if(Et)ge.horizontal[en]=ge.horizontal[0];else{const Zt=bp(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,X,It,_,"center",en,vt,Ue,d.ah.horizontal,!1,zt,se,Y);Zt&&(ge.horizontal[en]=Zt,Et=Zt.positionedLines.length===1)}$t()}else{Ft==="auto"&&(Ft=Gy(Dt));const Mt=bp(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,X,It,_,Dt,Ft,vt,Ue,d.ah.horizontal,!1,zt,se,Y);Mt&&(ge.horizontal[Ft]=Mt),$t(),Pl(qe)&&x&&S&&(ge.vertical=bp(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,X,It,_,Dt,Ft,vt,Ue,d.ah.vertical,!1,zt,se,Y))}}let Je=!1;if(O.icon&&O.icon.name){const qe=o.imageMap[O.icon.name];qe&&(ze=zP(o.imagePositions[O.icon.name],s.get("icon-offset").evaluate(O,{},o.canonical),s.get("icon-anchor").evaluate(O,{},o.canonical)),Je=!!qe.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Je:o.bucket.sdfIcons!==Je&&_e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(qe.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Ge=qw(ge.horizontal)||ge.vertical;o.bucket.iconsInText=!!Ge&&Ge.iconsInText,(Ge||ze)&&qP(o.bucket,O,ge,ze,o.imageMap,g,se,fe,Ue,Je,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},d.bn=Ay,d.bo=Ty,d.bp=Iy,d.bq=Ml,d.br=ky,d.bs=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},d.bt=function(o,n,s,h,g){return u(this,void 0,void 0,function*(){if(Z())try{return yield be(o,n,s,h,g)}catch{}return function(_,x,S,k,O){const X=_.width,Y=_.height;Ee&&De||(Ee=new OffscreenCanvas(X,Y),De=Ee.getContext("2d",{willReadFrequently:!0})),Ee.width=X,Ee.height=Y,De.drawImage(_,0,0,X,Y);const se=De.getImageData(x,S,k,O);return De.clearRect(0,0,X,Y),se.data}(o,n,s,h,g)})},d.bu=zw,d.bv=b,d.bw=C,d.bx=iw,d.by=wi,d.bz=function(o){return o.message===Ae},d.c=Oe,d.d=o=>u(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.e=E,d.f=o=>new Promise((n,s)=>{const h=new Image;h.onload=()=>{n(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=he})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(g):he}),d.g=He,d.h=(o,n)=>Rt(E(o,{type:"json"}),n),d.i=le,d.j=an,d.k=Bt,d.l=(o,n)=>Rt(E(o,{type:"arrayBuffer"}),n),d.m=Rt,d.n=function(o){return new ky(o).readFields(CP,[])},d.o=fd,d.p=dw,d.q=Li,d.r=_s,d.s=gt,d.t=ko,d.u=Lt,d.v=et,d.w=_e,d.x=ri,d.y=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},d.z=Yr}),c("worker",["./shared"],function(d){class u{constructor(re){this.keyCache={},re&&this.replace(re)}replace(re){this._layerConfigs={},this._layers={},this.update(re,[])}update(re,ue){for(const Ie of re){this._layerConfigs[Ie.id]=Ie;const Ne=this._layers[Ie.id]=d.az(Ie);Ne._featureFilter=d.a6(Ne.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(const Ie of ue)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const me=d.bh(Object.values(this._layerConfigs),this.keyCache);for(const Ie of me){const Ne=Ie.map(ht=>this._layers[ht.id]),Re=Ne[0];if(Re.visibility==="none")continue;const $e=Re.source||"";let Fe=this.familiesBySource[$e];Fe||(Fe=this.familiesBySource[$e]={});const Ye=Re.sourceLayer||"_geojsonTileLayer";let ft=Fe[Ye];ft||(ft=Fe[Ye]=[]),ft.push(Ne)}}}class b{constructor(re){const ue={},me=[];for(const $e in re){const Fe=re[$e],Ye=ue[$e]={};for(const ft in Fe){const ht=Fe[+ft];if(!ht||ht.bitmap.width===0||ht.bitmap.height===0)continue;const pt={x:0,y:0,w:ht.bitmap.width+2,h:ht.bitmap.height+2};me.push(pt),Ye[ft]={rect:pt,metrics:ht.metrics}}}const{w:Ie,h:Ne}=d.p(me),Re=new d.o({width:Ie||1,height:Ne||1});for(const $e in re){const Fe=re[$e];for(const Ye in Fe){const ft=Fe[+Ye];if(!ft||ft.bitmap.width===0||ft.bitmap.height===0)continue;const ht=ue[$e][Ye].rect;d.o.copy(ft.bitmap,Re,{x:0,y:0},{x:ht.x+1,y:ht.y+1},ft.bitmap)}}this.image=Re,this.positions=ue}}d.bi("GlyphAtlas",b);class C{constructor(re){this.tileID=new d.Q(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.uid=re.uid,this.zoom=re.zoom,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=re.showCollisionBoxes,this.collectResourceTiming=!!re.collectResourceTiming,this.returnDependencies=!!re.returnDependencies,this.promoteId=re.promoteId,this.inFlightDependencies=[]}parse(re,ue,me,Ie){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=re,this.collisionBoxArray=new d.a4;const Ne=new d.bj(Object.keys(re.layers).sort()),Re=new d.bk(this.tileID,this.promoteId);Re.bucketLayerIDs=[];const $e={},Fe={featureIndex:Re,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:me},Ye=ue.familiesBySource[this.source];for(const hn in Ye){const ir=re.layers[hn];if(!ir)continue;ir.version===1&&d.w(`Vector tile source "${this.source}" layer "${hn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Er=Ne.encode(hn),ni=[];for(let li=0;li<ir.length;li++){const zr=ir.feature(li),ho=Re.getId(zr,hn);ni.push({feature:zr,id:ho,index:li,sourceLayerIndex:Er})}for(const li of Ye[hn]){const zr=li[0];zr.source!==this.source&&d.w(`layer.source = ${zr.source} does not equal this.source = ${this.source}`),zr.minzoom&&this.zoom<Math.floor(zr.minzoom)||zr.maxzoom&&this.zoom>=zr.maxzoom||zr.visibility!=="none"&&(A(li,this.zoom,me),($e[zr.id]=zr.createBucket({index:Re.bucketLayerIDs.length,layers:li,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Er,sourceID:this.source})).populate(ni,Fe,this.tileID.canonical),Re.bucketLayerIDs.push(li.map(ho=>ho.id)))}}const ft=d.aE(Fe.glyphDependencies,hn=>Object.keys(hn).map(Number));this.inFlightDependencies.forEach(hn=>hn==null?void 0:hn.abort()),this.inFlightDependencies=[];let ht=Promise.resolve({});if(Object.keys(ft).length){const hn=new AbortController;this.inFlightDependencies.push(hn),ht=Ie.sendAsync({type:"GG",data:{stacks:ft,source:this.source,tileID:this.tileID,type:"glyphs"}},hn)}const pt=Object.keys(Fe.iconDependencies);let Xt=Promise.resolve({});if(pt.length){const hn=new AbortController;this.inFlightDependencies.push(hn),Xt=Ie.sendAsync({type:"GI",data:{icons:pt,source:this.source,tileID:this.tileID,type:"icons"}},hn)}const Qt=Object.keys(Fe.patternDependencies);let pn=Promise.resolve({});if(Qt.length){const hn=new AbortController;this.inFlightDependencies.push(hn),pn=Ie.sendAsync({type:"GI",data:{icons:Qt,source:this.source,tileID:this.tileID,type:"patterns"}},hn)}const[un,bn,Dn]=yield Promise.all([ht,Xt,pn]),Wn=new b(un),ur=new d.bl(bn,Dn);for(const hn in $e){const ir=$e[hn];ir instanceof d.a5?(A(ir.layers,this.zoom,me),d.bm({bucket:ir,glyphMap:un,glyphPositions:Wn.positions,imageMap:bn,imagePositions:ur.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):ir.hasPattern&&(ir instanceof d.bn||ir instanceof d.bo||ir instanceof d.bp)&&(A(ir.layers,this.zoom,me),ir.addFeatures(Fe,this.tileID.canonical,ur.patternPositions))}return this.status="done",{buckets:Object.values($e).filter(hn=>!hn.isEmpty()),featureIndex:Re,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Wn.image,imageAtlas:ur,glyphMap:this.returnDependencies?un:null,iconMap:this.returnDependencies?bn:null,glyphPositions:this.returnDependencies?Wn.positions:null}})}}function A(Me,re,ue){const me=new d.a8(re);for(const Ie of Me)Ie.recalculate(me,ue)}class w{constructor(re,ue,me){this.actor=re,this.layerIndex=ue,this.availableImages=me,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(re,ue){return d._(this,void 0,void 0,function*(){const me=yield d.l(re.request,ue);try{return{vectorTile:new d.bq.VectorTile(new d.br(me.data)),rawData:me.data,cacheControl:me.cacheControl,expires:me.expires}}catch(Ie){const Ne=new Uint8Array(me.data);let Re=`Unable to parse the tile at ${re.request.url}, `;throw Re+=Ne[0]===31&&Ne[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ie.messge}`,new Error(Re)}})}loadTile(re){return d._(this,void 0,void 0,function*(){const ue=re.uid,me=!!(re&&re.request&&re.request.collectResourceTiming)&&new d.bs(re.request),Ie=new C(re);this.loading[ue]=Ie;const Ne=new AbortController;Ie.abort=Ne;try{const Re=yield this.loadVectorTile(re,Ne);if(delete this.loading[ue],!Re)return null;const $e=Re.rawData,Fe={};Re.expires&&(Fe.expires=Re.expires),Re.cacheControl&&(Fe.cacheControl=Re.cacheControl);const Ye={};if(me){const ht=me.finish();ht&&(Ye.resourceTiming=JSON.parse(JSON.stringify(ht)))}Ie.vectorTile=Re.vectorTile;const ft=Ie.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ue]=Ie,this.fetching[ue]={rawTileData:$e,cacheControl:Fe,resourceTiming:Ye};try{const ht=yield ft;return d.e({rawTileData:$e.slice(0)},ht,Fe,Ye)}finally{delete this.fetching[ue]}}catch(Re){throw delete this.loading[ue],Ie.status="done",this.loaded[ue]=Ie,Re}})}reloadTile(re){return d._(this,void 0,void 0,function*(){const ue=re.uid;if(!this.loaded||!this.loaded[ue])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const me=this.loaded[ue];if(me.showCollisionBoxes=re.showCollisionBoxes,me.status==="parsing"){const Ie=yield me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor);let Ne;if(this.fetching[ue]){const{rawTileData:Re,cacheControl:$e,resourceTiming:Fe}=this.fetching[ue];delete this.fetching[ue],Ne=d.e({rawTileData:Re.slice(0)},Ie,$e,Fe)}else Ne=Ie;return Ne}if(me.status==="done"&&me.vectorTile)return me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(re){return d._(this,void 0,void 0,function*(){const ue=this.loading,me=re.uid;ue&&ue[me]&&ue[me].abort&&(ue[me].abort.abort(),delete ue[me])})}removeTile(re){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[re.uid]&&delete this.loaded[re.uid]})}}class T{constructor(){this.loaded={}}loadTile(re){return d._(this,void 0,void 0,function*(){const{uid:ue,encoding:me,rawImageData:Ie,redFactor:Ne,greenFactor:Re,blueFactor:$e,baseShift:Fe}=re,Ye=Ie.width+2,ft=Ie.height+2,ht=d.b(Ie)?new d.R({width:Ye,height:ft},yield d.bt(Ie,-1,-1,Ye,ft)):Ie,pt=new d.bu(ue,ht,me,Ne,Re,$e,Fe);return this.loaded=this.loaded||{},this.loaded[ue]=pt,pt})}removeTile(re){const ue=this.loaded,me=re.uid;ue&&ue[me]&&delete ue[me]}}function L(Me,re){if(Me.length!==0){U(Me[0],re);for(var ue=1;ue<Me.length;ue++)U(Me[ue],!re)}}function U(Me,re){for(var ue=0,me=0,Ie=0,Ne=Me.length,Re=Ne-1;Ie<Ne;Re=Ie++){var $e=(Me[Ie][0]-Me[Re][0])*(Me[Re][1]+Me[Ie][1]),Fe=ue+$e;me+=Math.abs(ue)>=Math.abs($e)?ue-Fe+$e:$e-Fe+ue,ue=Fe}ue+me>=0!=!!re&&Me.reverse()}var F=d.bv(function Me(re,ue){var me,Ie=re&&re.type;if(Ie==="FeatureCollection")for(me=0;me<re.features.length;me++)Me(re.features[me],ue);else if(Ie==="GeometryCollection")for(me=0;me<re.geometries.length;me++)Me(re.geometries[me],ue);else if(Ie==="Feature")Me(re.geometry,ue);else if(Ie==="Polygon")L(re.coordinates,ue);else if(Ie==="MultiPolygon")for(me=0;me<re.coordinates.length;me++)L(re.coordinates[me],ue);return re});const ce=d.bq.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},Z=d.bw,$=d.bq.VectorTileFeature,oe=q;function q(Me,re){this.options=re||{},this.features=Me,this.length=Me.length}function V(Me,re){this.id=typeof Me.id=="number"?Me.id:void 0,this.type=Me.type,this.rawGeometry=Me.type===1?[Me.geometry]:Me.geometry,this.properties=Me.tags,this.extent=re||4096}q.prototype.feature=function(Me){return new V(this.features[Me],this.options.extent)},V.prototype.loadGeometry=function(){var Me=this.rawGeometry;this.geometry=[];for(var re=0;re<Me.length;re++){for(var ue=Me[re],me=[],Ie=0;Ie<ue.length;Ie++)me.push(new Z(ue[Ie][0],ue[Ie][1]));this.geometry.push(me)}return this.geometry},V.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Me=this.geometry,re=1/0,ue=-1/0,me=1/0,Ie=-1/0,Ne=0;Ne<Me.length;Ne++)for(var Re=Me[Ne],$e=0;$e<Re.length;$e++){var Fe=Re[$e];re=Math.min(re,Fe.x),ue=Math.max(ue,Fe.x),me=Math.min(me,Fe.y),Ie=Math.max(Ie,Fe.y)}return[re,me,ue,Ie]},V.prototype.toGeoJSON=$.prototype.toGeoJSON;var E=d.bx,j=oe;function D(Me){var re=new E;return function(ue,me){for(var Ie in ue.layers)me.writeMessage(3,ee,ue.layers[Ie])}(Me,re),re.finish()}function ee(Me,re){var ue;re.writeVarintField(15,Me.version||1),re.writeStringField(1,Me.name||""),re.writeVarintField(5,Me.extent||4096);var me={keys:[],values:[],keycache:{},valuecache:{}};for(ue=0;ue<Me.length;ue++)me.feature=Me.feature(ue),re.writeMessage(2,W,me);var Ie=me.keys;for(ue=0;ue<Ie.length;ue++)re.writeStringField(3,Ie[ue]);var Ne=me.values;for(ue=0;ue<Ne.length;ue++)re.writeMessage(4,le,Ne[ue])}function W(Me,re){var ue=Me.feature;ue.id!==void 0&&re.writeVarintField(1,ue.id),re.writeMessage(2,ve,Me),re.writeVarintField(3,ue.type),re.writeMessage(4,ie,ue)}function ve(Me,re){var ue=Me.feature,me=Me.keys,Ie=Me.values,Ne=Me.keycache,Re=Me.valuecache;for(var $e in ue.properties){var Fe=ue.properties[$e],Ye=Ne[$e];if(Fe!==null){Ye===void 0&&(me.push($e),Ne[$e]=Ye=me.length-1),re.writeVarint(Ye);var ft=typeof Fe;ft!=="string"&&ft!=="boolean"&&ft!=="number"&&(Fe=JSON.stringify(Fe));var ht=ft+":"+Fe,pt=Re[ht];pt===void 0&&(Ie.push(Fe),Re[ht]=pt=Ie.length-1),re.writeVarint(pt)}}}function _e(Me,re){return(re<<3)+(7&Me)}function de(Me){return Me<<1^Me>>31}function ie(Me,re){for(var ue=Me.loadGeometry(),me=Me.type,Ie=0,Ne=0,Re=ue.length,$e=0;$e<Re;$e++){var Fe=ue[$e],Ye=1;me===1&&(Ye=Fe.length),re.writeVarint(_e(1,Ye));for(var ft=me===3?Fe.length-1:Fe.length,ht=0;ht<ft;ht++){ht===1&&me!==1&&re.writeVarint(_e(2,ft-1));var pt=Fe[ht].x-Ie,Xt=Fe[ht].y-Ne;re.writeVarint(de(pt)),re.writeVarint(de(Xt)),Ie+=pt,Ne+=Xt}me===3&&re.writeVarint(_e(7,1))}}function le(Me,re){var ue=typeof Me;ue==="string"?re.writeStringField(1,Me):ue==="boolean"?re.writeBooleanField(7,Me):ue==="number"&&(Me%1!=0?re.writeDoubleField(3,Me):Me<0?re.writeSVarintField(6,Me):re.writeVarintField(5,Me))}K.exports=D,K.exports.fromVectorTileJs=D,K.exports.fromGeojsonVt=function(Me,re){re=re||{};var ue={};for(var me in Me)ue[me]=new j(Me[me].features,re),ue[me].name=me,ue[me].version=re.version,ue[me].extent=re.extent;return D({layers:ue})},K.exports.GeoJSONWrapper=j;var J=d.bv(K.exports);const te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Me=>Me},he=Math.fround||(be=new Float32Array(1),Me=>(be[0]=+Me,be[0]));var be;const Ee=3,De=5,Ae=6;class Oe{constructor(re){this.options=Object.assign(Object.create(te),re),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(re){const{log:ue,minZoom:me,maxZoom:Ie}=this.options;ue&&console.time("total time");const Ne=`prepare ${re.length} points`;ue&&console.time(Ne),this.points=re;const Re=[];for(let Fe=0;Fe<re.length;Fe++){const Ye=re[Fe];if(!Ye.geometry)continue;const[ft,ht]=Ye.geometry.coordinates,pt=he(nt(ft)),Xt=he(dt(ht));Re.push(pt,Xt,1/0,Fe,-1,1),this.options.reduce&&Re.push(0)}let $e=this.trees[Ie+1]=this._createTree(Re);ue&&console.timeEnd(Ne);for(let Fe=Ie;Fe>=me;Fe--){const Ye=+Date.now();$e=this.trees[Fe]=this._createTree(this._cluster($e,Fe)),ue&&console.log("z%d: %d clusters in %dms",Fe,$e.numItems,+Date.now()-Ye)}return ue&&console.timeEnd("total time"),this}getClusters(re,ue){let me=((re[0]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,re[1]));let Ne=re[2]===180?180:((re[2]+180)%360+360)%360-180;const Re=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)me=-180,Ne=180;else if(me>Ne){const ht=this.getClusters([me,Ie,180,Re],ue),pt=this.getClusters([-180,Ie,Ne,Re],ue);return ht.concat(pt)}const $e=this.trees[this._limitZoom(ue)],Fe=$e.range(nt(me),dt(Re),nt(Ne),dt(Ie)),Ye=$e.data,ft=[];for(const ht of Fe){const pt=this.stride*ht;ft.push(Ye[pt+De]>1?We(Ye,pt,this.clusterProps):this.points[Ye[pt+Ee]])}return ft}getChildren(re){const ue=this._getOriginId(re),me=this._getOriginZoom(re),Ie="No cluster with the specified id.",Ne=this.trees[me];if(!Ne)throw new Error(Ie);const Re=Ne.data;if(ue*this.stride>=Re.length)throw new Error(Ie);const $e=this.options.radius/(this.options.extent*Math.pow(2,me-1)),Fe=Ne.within(Re[ue*this.stride],Re[ue*this.stride+1],$e),Ye=[];for(const ft of Fe){const ht=ft*this.stride;Re[ht+4]===re&&Ye.push(Re[ht+De]>1?We(Re,ht,this.clusterProps):this.points[Re[ht+Ee]])}if(Ye.length===0)throw new Error(Ie);return Ye}getLeaves(re,ue,me){const Ie=[];return this._appendLeaves(Ie,re,ue=ue||10,me=me||0,0),Ie}getTile(re,ue,me){const Ie=this.trees[this._limitZoom(re)],Ne=Math.pow(2,re),{extent:Re,radius:$e}=this.options,Fe=$e/Re,Ye=(me-Fe)/Ne,ft=(me+1+Fe)/Ne,ht={features:[]};return this._addTileFeatures(Ie.range((ue-Fe)/Ne,Ye,(ue+1+Fe)/Ne,ft),Ie.data,ue,me,Ne,ht),ue===0&&this._addTileFeatures(Ie.range(1-Fe/Ne,Ye,1,ft),Ie.data,Ne,me,Ne,ht),ue===Ne-1&&this._addTileFeatures(Ie.range(0,Ye,Fe/Ne,ft),Ie.data,-1,me,Ne,ht),ht.features.length?ht:null}getClusterExpansionZoom(re){let ue=this._getOriginZoom(re)-1;for(;ue<=this.options.maxZoom;){const me=this.getChildren(re);if(ue++,me.length!==1)break;re=me[0].properties.cluster_id}return ue}_appendLeaves(re,ue,me,Ie,Ne){const Re=this.getChildren(ue);for(const $e of Re){const Fe=$e.properties;if(Fe&&Fe.cluster?Ne+Fe.point_count<=Ie?Ne+=Fe.point_count:Ne=this._appendLeaves(re,Fe.cluster_id,me,Ie,Ne):Ne<Ie?Ne++:re.push($e),re.length===me)break}return Ne}_createTree(re){const ue=new d.au(re.length/this.stride|0,this.options.nodeSize,Float32Array);for(let me=0;me<re.length;me+=this.stride)ue.add(re[me],re[me+1]);return ue.finish(),ue.data=re,ue}_addTileFeatures(re,ue,me,Ie,Ne,Re){for(const $e of re){const Fe=$e*this.stride,Ye=ue[Fe+De]>1;let ft,ht,pt;if(Ye)ft=He(ue,Fe,this.clusterProps),ht=ue[Fe],pt=ue[Fe+1];else{const pn=this.points[ue[Fe+Ee]];ft=pn.properties;const[un,bn]=pn.geometry.coordinates;ht=nt(un),pt=dt(bn)}const Xt={type:1,geometry:[[Math.round(this.options.extent*(ht*Ne-me)),Math.round(this.options.extent*(pt*Ne-Ie))]],tags:ft};let Qt;Qt=Ye||this.options.generateId?ue[Fe+Ee]:this.points[ue[Fe+Ee]].id,Qt!==void 0&&(Xt.id=Qt),Re.features.push(Xt)}}_limitZoom(re){return Math.max(this.options.minZoom,Math.min(Math.floor(+re),this.options.maxZoom+1))}_cluster(re,ue){const{radius:me,extent:Ie,reduce:Ne,minPoints:Re}=this.options,$e=me/(Ie*Math.pow(2,ue)),Fe=re.data,Ye=[],ft=this.stride;for(let ht=0;ht<Fe.length;ht+=ft){if(Fe[ht+2]<=ue)continue;Fe[ht+2]=ue;const pt=Fe[ht],Xt=Fe[ht+1],Qt=re.within(Fe[ht],Fe[ht+1],$e),pn=Fe[ht+De];let un=pn;for(const bn of Qt){const Dn=bn*ft;Fe[Dn+2]>ue&&(un+=Fe[Dn+De])}if(un>pn&&un>=Re){let bn,Dn=pt*pn,Wn=Xt*pn,ur=-1;const hn=((ht/ft|0)<<5)+(ue+1)+this.points.length;for(const ir of Qt){const Er=ir*ft;if(Fe[Er+2]<=ue)continue;Fe[Er+2]=ue;const ni=Fe[Er+De];Dn+=Fe[Er]*ni,Wn+=Fe[Er+1]*ni,Fe[Er+4]=hn,Ne&&(bn||(bn=this._map(Fe,ht,!0),ur=this.clusterProps.length,this.clusterProps.push(bn)),Ne(bn,this._map(Fe,Er)))}Fe[ht+4]=hn,Ye.push(Dn/un,Wn/un,1/0,hn,-1,un),Ne&&Ye.push(ur)}else{for(let bn=0;bn<ft;bn++)Ye.push(Fe[ht+bn]);if(un>1)for(const bn of Qt){const Dn=bn*ft;if(!(Fe[Dn+2]<=ue)){Fe[Dn+2]=ue;for(let Wn=0;Wn<ft;Wn++)Ye.push(Fe[Dn+Wn])}}}}return Ye}_getOriginId(re){return re-this.points.length>>5}_getOriginZoom(re){return(re-this.points.length)%32}_map(re,ue,me){if(re[ue+De]>1){const Re=this.clusterProps[re[ue+Ae]];return me?Object.assign({},Re):Re}const Ie=this.points[re[ue+Ee]].properties,Ne=this.options.map(Ie);return me&&Ne===Ie?Object.assign({},Ne):Ne}}function We(Me,re,ue){return{type:"Feature",id:Me[re+Ee],properties:He(Me,re,ue),geometry:{type:"Point",coordinates:[(me=Me[re],360*(me-.5)),wt(Me[re+1])]}};var me}function He(Me,re,ue){const me=Me[re+De],Ie=me>=1e4?`${Math.round(me/1e3)}k`:me>=1e3?Math.round(me/100)/10+"k":me,Ne=Me[re+Ae],Re=Ne===-1?{}:Object.assign({},ue[Ne]);return Object.assign(Re,{cluster:!0,cluster_id:Me[re+Ee],point_count:me,point_count_abbreviated:Ie})}function nt(Me){return Me/360+.5}function dt(Me){const re=Math.sin(Me*Math.PI/180),ue=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ue<0?0:ue>1?1:ue}function wt(Me){const re=(180-360*Me)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function Rt(Me,re,ue,me){for(var Ie,Ne=me,Re=ue-re>>1,$e=ue-re,Fe=Me[re],Ye=Me[re+1],ft=Me[ue],ht=Me[ue+1],pt=re+3;pt<ue;pt+=3){var Xt=gt(Me[pt],Me[pt+1],Fe,Ye,ft,ht);if(Xt>Ne)Ie=pt,Ne=Xt;else if(Xt===Ne){var Qt=Math.abs(pt-Re);Qt<$e&&(Ie=pt,$e=Qt)}}Ne>me&&(Ie-re>3&&Rt(Me,re,Ie,me),Me[Ie+2]=Ne,ue-Ie>3&&Rt(Me,Ie,ue,me))}function gt(Me,re,ue,me,Ie,Ne){var Re=Ie-ue,$e=Ne-me;if(Re!==0||$e!==0){var Fe=((Me-ue)*Re+(re-me)*$e)/(Re*Re+$e*$e);Fe>1?(ue=Ie,me=Ne):Fe>0&&(ue+=Re*Fe,me+=$e*Fe)}return(Re=Me-ue)*Re+($e=re-me)*$e}function St(Me,re,ue,me){var Ie={id:Me===void 0?null:Me,type:re,geometry:ue,tags:me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ne){var Re=Ne.geometry,$e=Ne.type;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")Vt(Ne,Re);else if($e==="Polygon"||$e==="MultiLineString")for(var Fe=0;Fe<Re.length;Fe++)Vt(Ne,Re[Fe]);else if($e==="MultiPolygon")for(Fe=0;Fe<Re.length;Fe++)for(var Ye=0;Ye<Re[Fe].length;Ye++)Vt(Ne,Re[Fe][Ye])}(Ie),Ie}function Vt(Me,re){for(var ue=0;ue<re.length;ue+=3)Me.minX=Math.min(Me.minX,re[ue]),Me.minY=Math.min(Me.minY,re[ue+1]),Me.maxX=Math.max(Me.maxX,re[ue]),Me.maxY=Math.max(Me.maxY,re[ue+1])}function Bt(Me,re,ue,me){if(re.geometry){var Ie=re.geometry.coordinates,Ne=re.geometry.type,Re=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2),$e=[],Fe=re.id;if(ue.promoteId?Fe=re.properties[ue.promoteId]:ue.generateId&&(Fe=me||0),Ne==="Point")an(Ie,$e);else if(Ne==="MultiPoint")for(var Ye=0;Ye<Ie.length;Ye++)an(Ie[Ye],$e);else if(Ne==="LineString")Sn(Ie,$e,Re,!1);else if(Ne==="MultiLineString"){if(ue.lineMetrics){for(Ye=0;Ye<Ie.length;Ye++)Sn(Ie[Ye],$e=[],Re,!1),Me.push(St(Fe,"LineString",$e,re.properties));return}et(Ie,$e,Re,!1)}else if(Ne==="Polygon")et(Ie,$e,Re,!0);else{if(Ne!=="MultiPolygon"){if(Ne==="GeometryCollection"){for(Ye=0;Ye<re.geometry.geometries.length;Ye++)Bt(Me,{id:Fe,geometry:re.geometry.geometries[Ye],properties:re.properties},ue,me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ye=0;Ye<Ie.length;Ye++){var ft=[];et(Ie[Ye],ft,Re,!0),$e.push(ft)}}Me.push(St(Fe,Ne,$e,re.properties))}}function an(Me,re){re.push(ln(Me[0])),re.push(wn(Me[1])),re.push(0)}function Sn(Me,re,ue,me){for(var Ie,Ne,Re=0,$e=0;$e<Me.length;$e++){var Fe=ln(Me[$e][0]),Ye=wn(Me[$e][1]);re.push(Fe),re.push(Ye),re.push(0),$e>0&&(Re+=me?(Ie*Ye-Fe*Ne)/2:Math.sqrt(Math.pow(Fe-Ie,2)+Math.pow(Ye-Ne,2))),Ie=Fe,Ne=Ye}var ft=re.length-3;re[2]=1,Rt(re,0,ft,ue),re[ft+2]=1,re.size=Math.abs(Re),re.start=0,re.end=re.size}function et(Me,re,ue,me){for(var Ie=0;Ie<Me.length;Ie++){var Ne=[];Sn(Me[Ie],Ne,ue,me),re.push(Ne)}}function ln(Me){return Me/360+.5}function wn(Me){var re=Math.sin(Me*Math.PI/180),ue=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ue<0?0:ue>1?1:ue}function xe(Me,re,ue,me,Ie,Ne,Re,$e){if(me/=re,Ne>=(ue/=re)&&Re<me)return Me;if(Re<ue||Ne>=me)return null;for(var Fe=[],Ye=0;Ye<Me.length;Ye++){var ft=Me[Ye],ht=ft.geometry,pt=ft.type,Xt=Ie===0?ft.minX:ft.minY,Qt=Ie===0?ft.maxX:ft.maxY;if(Xt>=ue&&Qt<me)Fe.push(ft);else if(!(Qt<ue||Xt>=me)){var pn=[];if(pt==="Point"||pt==="MultiPoint")N(ht,pn,ue,me,Ie);else if(pt==="LineString")B(ht,pn,ue,me,Ie,!1,$e.lineMetrics);else if(pt==="MultiLineString")Xe(ht,pn,ue,me,Ie,!1);else if(pt==="Polygon")Xe(ht,pn,ue,me,Ie,!0);else if(pt==="MultiPolygon")for(var un=0;un<ht.length;un++){var bn=[];Xe(ht[un],bn,ue,me,Ie,!0),bn.length&&pn.push(bn)}if(pn.length){if($e.lineMetrics&&pt==="LineString"){for(un=0;un<pn.length;un++)Fe.push(St(ft.id,pt,pn[un],ft.tags));continue}pt!=="LineString"&&pt!=="MultiLineString"||(pn.length===1?(pt="LineString",pn=pn[0]):pt="MultiLineString"),pt!=="Point"&&pt!=="MultiPoint"||(pt=pn.length===3?"Point":"MultiPoint"),Fe.push(St(ft.id,pt,pn,ft.tags))}}}return Fe.length?Fe:null}function N(Me,re,ue,me,Ie){for(var Ne=0;Ne<Me.length;Ne+=3){var Re=Me[Ne+Ie];Re>=ue&&Re<=me&&(re.push(Me[Ne]),re.push(Me[Ne+1]),re.push(Me[Ne+2]))}}function B(Me,re,ue,me,Ie,Ne,Re){for(var $e,Fe,Ye=we(Me),ft=Ie===0?ct:ae,ht=Me.start,pt=0;pt<Me.length-3;pt+=3){var Xt=Me[pt],Qt=Me[pt+1],pn=Me[pt+2],un=Me[pt+3],bn=Me[pt+4],Dn=Ie===0?Xt:Qt,Wn=Ie===0?un:bn,ur=!1;Re&&($e=Math.sqrt(Math.pow(Xt-un,2)+Math.pow(Qt-bn,2))),Dn<ue?Wn>ue&&(Fe=ft(Ye,Xt,Qt,un,bn,ue),Re&&(Ye.start=ht+$e*Fe)):Dn>me?Wn<me&&(Fe=ft(Ye,Xt,Qt,un,bn,me),Re&&(Ye.start=ht+$e*Fe)):Qe(Ye,Xt,Qt,pn),Wn<ue&&Dn>=ue&&(Fe=ft(Ye,Xt,Qt,un,bn,ue),ur=!0),Wn>me&&Dn<=me&&(Fe=ft(Ye,Xt,Qt,un,bn,me),ur=!0),!Ne&&ur&&(Re&&(Ye.end=ht+$e*Fe),re.push(Ye),Ye=we(Me)),Re&&(ht+=$e)}var hn=Me.length-3;Xt=Me[hn],Qt=Me[hn+1],pn=Me[hn+2],(Dn=Ie===0?Xt:Qt)>=ue&&Dn<=me&&Qe(Ye,Xt,Qt,pn),hn=Ye.length-3,Ne&&hn>=3&&(Ye[hn]!==Ye[0]||Ye[hn+1]!==Ye[1])&&Qe(Ye,Ye[0],Ye[1],Ye[2]),Ye.length&&re.push(Ye)}function we(Me){var re=[];return re.size=Me.size,re.start=Me.start,re.end=Me.end,re}function Xe(Me,re,ue,me,Ie,Ne){for(var Re=0;Re<Me.length;Re++)B(Me[Re],re,ue,me,Ie,Ne,!1)}function Qe(Me,re,ue,me){Me.push(re),Me.push(ue),Me.push(me)}function ct(Me,re,ue,me,Ie,Ne){var Re=(Ne-re)/(me-re);return Me.push(Ne),Me.push(ue+(Ie-ue)*Re),Me.push(1),Re}function ae(Me,re,ue,me,Ie,Ne){var Re=(Ne-ue)/(Ie-ue);return Me.push(re+(me-re)*Re),Me.push(Ne),Me.push(1),Re}function R(Me,re){for(var ue=[],me=0;me<Me.length;me++){var Ie,Ne=Me[me],Re=Ne.type;if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")Ie=z(Ne.geometry,re);else if(Re==="MultiLineString"||Re==="Polygon"){Ie=[];for(var $e=0;$e<Ne.geometry.length;$e++)Ie.push(z(Ne.geometry[$e],re))}else if(Re==="MultiPolygon")for(Ie=[],$e=0;$e<Ne.geometry.length;$e++){for(var Fe=[],Ye=0;Ye<Ne.geometry[$e].length;Ye++)Fe.push(z(Ne.geometry[$e][Ye],re));Ie.push(Fe)}ue.push(St(Ne.id,Re,Ie,Ne.tags))}return ue}function z(Me,re){var ue=[];ue.size=Me.size,Me.start!==void 0&&(ue.start=Me.start,ue.end=Me.end);for(var me=0;me<Me.length;me+=3)ue.push(Me[me]+re,Me[me+1],Me[me+2]);return ue}function Se(Me,re){if(Me.transformed)return Me;var ue,me,Ie,Ne=1<<Me.z,Re=Me.x,$e=Me.y;for(ue=0;ue<Me.features.length;ue++){var Fe=Me.features[ue],Ye=Fe.geometry,ft=Fe.type;if(Fe.geometry=[],ft===1)for(me=0;me<Ye.length;me+=2)Fe.geometry.push(Ve(Ye[me],Ye[me+1],re,Ne,Re,$e));else for(me=0;me<Ye.length;me++){var ht=[];for(Ie=0;Ie<Ye[me].length;Ie+=2)ht.push(Ve(Ye[me][Ie],Ye[me][Ie+1],re,Ne,Re,$e));Fe.geometry.push(ht)}}return Me.transformed=!0,Me}function Ve(Me,re,ue,me,Ie,Ne){return[Math.round(ue*(Me*me-Ie)),Math.round(ue*(re*me-Ne))]}function tt(Me,re,ue,me,Ie){for(var Ne=re===Ie.maxZoom?0:Ie.tolerance/((1<<re)*Ie.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ue,y:me,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},$e=0;$e<Me.length;$e++){Re.numFeatures++,ot(Re,Me[$e],Ne,Ie);var Fe=Me[$e].minX,Ye=Me[$e].minY,ft=Me[$e].maxX,ht=Me[$e].maxY;Fe<Re.minX&&(Re.minX=Fe),Ye<Re.minY&&(Re.minY=Ye),ft>Re.maxX&&(Re.maxX=ft),ht>Re.maxY&&(Re.maxY=ht)}return Re}function ot(Me,re,ue,me){var Ie=re.geometry,Ne=re.type,Re=[];if(Ne==="Point"||Ne==="MultiPoint")for(var $e=0;$e<Ie.length;$e+=3)Re.push(Ie[$e]),Re.push(Ie[$e+1]),Me.numPoints++,Me.numSimplified++;else if(Ne==="LineString")ut(Re,Ie,Me,ue,!1,!1);else if(Ne==="MultiLineString"||Ne==="Polygon")for($e=0;$e<Ie.length;$e++)ut(Re,Ie[$e],Me,ue,Ne==="Polygon",$e===0);else if(Ne==="MultiPolygon")for(var Fe=0;Fe<Ie.length;Fe++){var Ye=Ie[Fe];for($e=0;$e<Ye.length;$e++)ut(Re,Ye[$e],Me,ue,!0,$e===0)}if(Re.length){var ft=re.tags||null;if(Ne==="LineString"&&me.lineMetrics){for(var ht in ft={},re.tags)ft[ht]=re.tags[ht];ft.mapbox_clip_start=Ie.start/Ie.size,ft.mapbox_clip_end=Ie.end/Ie.size}var pt={geometry:Re,type:Ne==="Polygon"||Ne==="MultiPolygon"?3:Ne==="LineString"||Ne==="MultiLineString"?2:1,tags:ft};re.id!==null&&(pt.id=re.id),Me.features.push(pt)}}function ut(Me,re,ue,me,Ie,Ne){var Re=me*me;if(me>0&&re.size<(Ie?Re:me))ue.numPoints+=re.length/3;else{for(var $e=[],Fe=0;Fe<re.length;Fe+=3)(me===0||re[Fe+2]>Re)&&(ue.numSimplified++,$e.push(re[Fe]),$e.push(re[Fe+1])),ue.numPoints++;Ie&&function(Ye,ft){for(var ht=0,pt=0,Xt=Ye.length,Qt=Xt-2;pt<Xt;Qt=pt,pt+=2)ht+=(Ye[pt]-Ye[Qt])*(Ye[pt+1]+Ye[Qt+1]);if(ht>0===ft)for(pt=0,Xt=Ye.length;pt<Xt/2;pt+=2){var pn=Ye[pt],un=Ye[pt+1];Ye[pt]=Ye[Xt-2-pt],Ye[pt+1]=Ye[Xt-1-pt],Ye[Xt-2-pt]=pn,Ye[Xt-1-pt]=un}}($e,Ne),Me.push($e)}}function Nt(Me,re){var ue=(re=this.options=function(Ie,Ne){for(var Re in Ne)Ie[Re]=Ne[Re];return Ie}(Object.create(this.options),re)).debug;if(ue&&console.time("preprocess data"),re.maxZoom<0||re.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(re.promoteId&&re.generateId)throw new Error("promoteId and generateId cannot be used together.");var me=function(Ie,Ne){var Re=[];if(Ie.type==="FeatureCollection")for(var $e=0;$e<Ie.features.length;$e++)Bt(Re,Ie.features[$e],Ne,$e);else Bt(Re,Ie.type==="Feature"?Ie:{geometry:Ie},Ne);return Re}(Me,re);this.tiles={},this.tileCoords=[],ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",re.indexMaxZoom,re.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),me=function(Ie,Ne){var Re=Ne.buffer/Ne.extent,$e=Ie,Fe=xe(Ie,1,-1-Re,Re,0,-1,2,Ne),Ye=xe(Ie,1,1-Re,2+Re,0,-1,2,Ne);return(Fe||Ye)&&($e=xe(Ie,1,-Re,1+Re,0,-1,2,Ne)||[],Fe&&($e=R(Fe,1).concat($e)),Ye&&($e=$e.concat(R(Ye,-1)))),$e}(me,re),me.length&&this.splitTile(me,0,0,0),ue&&(me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function jt(Me,re,ue){return 32*((1<<Me)*ue+re)+Me}function mn(Me,re){return re?Me.properties[re]:Me.id}function _n(Me,re){if(Me==null)return!0;if(Me.type==="Feature")return mn(Me,re)!=null;if(Me.type==="FeatureCollection"){const ue=new Set;for(const me of Me.features){const Ie=mn(me,re);if(Ie==null||ue.has(Ie))return!1;ue.add(Ie)}return!0}return!1}function sn(Me,re){const ue=new Map;if(Me!=null)if(Me.type==="Feature")ue.set(mn(Me,re),Me);else for(const me of Me.features)ue.set(mn(me,re),me);return ue}Nt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Nt.prototype.splitTile=function(Me,re,ue,me,Ie,Ne,Re){for(var $e=[Me,re,ue,me],Fe=this.options,Ye=Fe.debug;$e.length;){me=$e.pop(),ue=$e.pop(),re=$e.pop(),Me=$e.pop();var ft=1<<re,ht=jt(re,ue,me),pt=this.tiles[ht];if(!pt&&(Ye>1&&console.time("creation"),pt=this.tiles[ht]=tt(Me,re,ue,me,Fe),this.tileCoords.push({z:re,x:ue,y:me}),Ye)){Ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",re,ue,me,pt.numFeatures,pt.numPoints,pt.numSimplified),console.timeEnd("creation"));var Xt="z"+re;this.stats[Xt]=(this.stats[Xt]||0)+1,this.total++}if(pt.source=Me,Ie){if(re===Fe.maxZoom||re===Ie)continue;var Qt=1<<Ie-re;if(ue!==Math.floor(Ne/Qt)||me!==Math.floor(Re/Qt))continue}else if(re===Fe.indexMaxZoom||pt.numPoints<=Fe.indexMaxPoints)continue;if(pt.source=null,Me.length!==0){Ye>1&&console.time("clipping");var pn,un,bn,Dn,Wn,ur,hn=.5*Fe.buffer/Fe.extent,ir=.5-hn,Er=.5+hn,ni=1+hn;pn=un=bn=Dn=null,Wn=xe(Me,ft,ue-hn,ue+Er,0,pt.minX,pt.maxX,Fe),ur=xe(Me,ft,ue+ir,ue+ni,0,pt.minX,pt.maxX,Fe),Me=null,Wn&&(pn=xe(Wn,ft,me-hn,me+Er,1,pt.minY,pt.maxY,Fe),un=xe(Wn,ft,me+ir,me+ni,1,pt.minY,pt.maxY,Fe),Wn=null),ur&&(bn=xe(ur,ft,me-hn,me+Er,1,pt.minY,pt.maxY,Fe),Dn=xe(ur,ft,me+ir,me+ni,1,pt.minY,pt.maxY,Fe),ur=null),Ye>1&&console.timeEnd("clipping"),$e.push(pn||[],re+1,2*ue,2*me),$e.push(un||[],re+1,2*ue,2*me+1),$e.push(bn||[],re+1,2*ue+1,2*me),$e.push(Dn||[],re+1,2*ue+1,2*me+1)}}},Nt.prototype.getTile=function(Me,re,ue){var me=this.options,Ie=me.extent,Ne=me.debug;if(Me<0||Me>24)return null;var Re=1<<Me,$e=jt(Me,re=(re%Re+Re)%Re,ue);if(this.tiles[$e])return Se(this.tiles[$e],Ie);Ne>1&&console.log("drilling down to z%d-%d-%d",Me,re,ue);for(var Fe,Ye=Me,ft=re,ht=ue;!Fe&&Ye>0;)Ye--,ft=Math.floor(ft/2),ht=Math.floor(ht/2),Fe=this.tiles[jt(Ye,ft,ht)];return Fe&&Fe.source?(Ne>1&&console.log("found parent tile z%d-%d-%d",Ye,ft,ht),Ne>1&&console.time("drilling down"),this.splitTile(Fe.source,Ye,ft,ht,Me,re,ue),Ne>1&&console.timeEnd("drilling down"),this.tiles[$e]?Se(this.tiles[$e],Ie):null):null};class ki extends w{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(re,ue){return d._(this,void 0,void 0,function*(){const me=re.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ie=this._geoJSONIndex.getTile(me.z,me.x,me.y);if(!Ie)return null;const Ne=new class{constructor($e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.W,this.length=$e.length,this._features=$e}feature($e){return new class{constructor(Fe){this._feature=Fe,this.extent=d.W,this.type=Fe.type,this.properties=Fe.tags,"id"in Fe&&!isNaN(Fe.id)&&(this.id=parseInt(Fe.id,10))}loadGeometry(){if(this._feature.type===1){const Fe=[];for(const Ye of this._feature.geometry)Fe.push([new d.P(Ye[0],Ye[1])]);return Fe}{const Fe=[];for(const Ye of this._feature.geometry){const ft=[];for(const ht of Ye)ft.push(new d.P(ht[0],ht[1]));Fe.push(ft)}return Fe}}toGeoJSON(Fe,Ye,ft){return ce.call(this,Fe,Ye,ft)}}(this._features[$e])}}(Ie.features);let Re=J(Ne);return Re.byteOffset===0&&Re.byteLength===Re.buffer.byteLength||(Re=new Uint8Array(Re)),{vectorTile:Ne,rawData:Re.buffer}})}loadData(re){return d._(this,void 0,void 0,function*(){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.abort();const me=!!(re&&re.request&&re.request.collectResourceTiming)&&new d.bs(re.request);this._pendingRequest=new AbortController;try{let Ie=yield this.loadGeoJSON(re,this._pendingRequest);if(delete this._pendingRequest,typeof Ie!="object")throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`);if(F(Ie,!0),re.filter){const Re=d.by(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Re.result==="error")throw new Error(Re.value.map(Fe=>`${Fe.key}: ${Fe.message}`).join(", "));Ie={type:"FeatureCollection",features:Ie.features.filter(Fe=>Re.value.evaluate({zoom:0},Fe))}}this._geoJSONIndex=re.cluster?new Oe(function({superclusterOptions:Re,clusterProperties:$e}){if(!$e||!Re)return Re;const Fe={},Ye={},ft={accumulated:null,zoom:0},ht={properties:null},pt=Object.keys($e);for(const Xt of pt){const[Qt,pn]=$e[Xt],un=d.by(pn),bn=d.by(typeof Qt=="string"?[Qt,["accumulated"],["get",Xt]]:Qt);Fe[Xt]=un.value,Ye[Xt]=bn.value}return Re.map=Xt=>{ht.properties=Xt;const Qt={};for(const pn of pt)Qt[pn]=Fe[pn].evaluate(ft,ht);return Qt},Re.reduce=(Xt,Qt)=>{ht.properties=Qt;for(const pn of pt)ft.accumulated=Xt[pn],Xt[pn]=Ye[pn].evaluate(ft,ht)},Re}(re)).load(Ie.features):function(Re,$e){return new Nt(Re,$e)}(Ie,re.geojsonVtOptions),this.loaded={};const Ne={};if(me){const Re=me.finish();Re&&(Ne.resourceTiming={},Ne.resourceTiming[re.source]=JSON.parse(JSON.stringify(Re)))}return Ne}catch(Ie){if(delete this._pendingRequest,d.bz(Ie))return{abandoned:!0};throw Ie}})}reloadTile(re){const ue=this.loaded;return ue&&ue[re.uid]?super.reloadTile(re):this.loadTile(re)}loadGeoJSON(re,ue){return d._(this,void 0,void 0,function*(){const{promoteId:me}=re;if(re.request){const Ie=yield d.h(re.request,ue);return this._dataUpdateable=_n(Ie.data,me)?sn(Ie.data,me):void 0,Ie.data}if(typeof re.data=="string")try{const Ie=JSON.parse(re.data);return this._dataUpdateable=_n(Ie,me)?sn(Ie,me):void 0,Ie}catch{throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`)}if(!re.dataDiff)throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${re.source}`);return function(Ie,Ne,Re){var $e,Fe,Ye,ft;if(Ne.removeAll&&Ie.clear(),Ne.remove)for(const ht of Ne.remove)Ie.delete(ht);if(Ne.add)for(const ht of Ne.add){const pt=mn(ht,Re);pt!=null&&Ie.set(pt,ht)}if(Ne.update)for(const ht of Ne.update){let pt=Ie.get(ht.id);if(pt==null)continue;const Xt=!ht.removeAllProperties&&((($e=ht.removeProperties)===null||$e===void 0?void 0:$e.length)>0||((Fe=ht.addOrUpdateProperties)===null||Fe===void 0?void 0:Fe.length)>0);if((ht.newGeometry||ht.removeAllProperties||Xt)&&(pt=Object.assign({},pt),Ie.set(ht.id,pt),Xt&&(pt.properties=Object.assign({},pt.properties))),ht.newGeometry&&(pt.geometry=ht.newGeometry),ht.removeAllProperties)pt.properties={};else if(((Ye=ht.removeProperties)===null||Ye===void 0?void 0:Ye.length)>0)for(const Qt of ht.removeProperties)Object.prototype.hasOwnProperty.call(pt.properties,Qt)&&delete pt.properties[Qt];if(((ft=ht.addOrUpdateProperties)===null||ft===void 0?void 0:ft.length)>0)for(const{key:Qt,value:pn}of ht.addOrUpdateProperties)pt.properties[Qt]=pn}}(this._dataUpdateable,re.dataDiff,me),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(re){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(re){return this._geoJSONIndex.getClusterExpansionZoom(re.clusterId)}getClusterChildren(re){return this._geoJSONIndex.getChildren(re.clusterId)}getClusterLeaves(re){return this._geoJSONIndex.getLeaves(re.clusterId,re.limit,re.offset)}}class rr{constructor(re){this.self=re,this.actor=new d.C(re),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ue,me)=>{if(this.externalWorkerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.externalWorkerSourceTypes[ue]=me},this.self.addProtocol=d.bf,this.self.removeProtocol=d.bg,this.self.registerRTLTextPlugin=ue=>{if(d.bA.isParsed())throw new Error("RTL text plugin already registered.");d.bA.setMethods(ue)},this.actor.registerMessageHandler("LDT",(ue,me)=>this._getDEMWorkerSource(ue,me.source).loadTile(me)),this.actor.registerMessageHandler("RDT",(ue,me)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ue,me.source).removeTile(me)})),this.actor.registerMessageHandler("GCEZ",(ue,me)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,me.type,me.source).getClusterExpansionZoom(me)})),this.actor.registerMessageHandler("GCC",(ue,me)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,me.type,me.source).getClusterChildren(me)})),this.actor.registerMessageHandler("GCL",(ue,me)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,me.type,me.source).getClusterLeaves(me)})),this.actor.registerMessageHandler("LD",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).loadData(me)),this.actor.registerMessageHandler("LT",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).loadTile(me)),this.actor.registerMessageHandler("RT",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).reloadTile(me)),this.actor.registerMessageHandler("AT",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).abortTile(me)),this.actor.registerMessageHandler("RMT",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).removeTile(me)),this.actor.registerMessageHandler("RS",(ue,me)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[ue]||!this.workerSources[ue][me.type]||!this.workerSources[ue][me.type][me.source])return;const Ie=this.workerSources[ue][me.type][me.source];delete this.workerSources[ue][me.type][me.source],Ie.removeSource!==void 0&&Ie.removeSource(me)})),this.actor.registerMessageHandler("RM",ue=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue]})),this.actor.registerMessageHandler("SR",(ue,me)=>d._(this,void 0,void 0,function*(){this.referrer=me})),this.actor.registerMessageHandler("SRPS",(ue,me)=>this._syncRTLPluginState(ue,me)),this.actor.registerMessageHandler("IS",(ue,me)=>d._(this,void 0,void 0,function*(){this.self.importScripts(me)})),this.actor.registerMessageHandler("SI",(ue,me)=>this._setImages(ue,me)),this.actor.registerMessageHandler("UL",(ue,me)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(ue).update(me.layers,me.removedIds)})),this.actor.registerMessageHandler("SL",(ue,me)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(ue).replace(me)}))}_setImages(re,ue){return d._(this,void 0,void 0,function*(){this.availableImages[re]=ue;for(const me in this.workerSources[re]){const Ie=this.workerSources[re][me];for(const Ne in Ie)Ie[Ne].availableImages=ue}})}_syncRTLPluginState(re,ue){return d._(this,void 0,void 0,function*(){if(d.bA.isParsed())return d.bA.getState();if(ue.pluginStatus!=="loading")return d.bA.setState(ue),ue;const me=ue.pluginURL;if(this.self.importScripts(me),d.bA.isParsed()){const Ie={pluginStatus:"loaded",pluginURL:me};return d.bA.setState(Ie),Ie}throw d.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${me}`)})}_getAvailableImages(re){let ue=this.availableImages[re];return ue||(ue=[]),ue}_getLayerIndex(re){let ue=this.layerIndexes[re];return ue||(ue=this.layerIndexes[re]=new u),ue}_getWorkerSource(re,ue,me){if(this.workerSources[re]||(this.workerSources[re]={}),this.workerSources[re][ue]||(this.workerSources[re][ue]={}),!this.workerSources[re][ue][me]){const Ie={sendAsync:(Ne,Re)=>(Ne.targetMapId=re,this.actor.sendAsync(Ne,Re))};switch(ue){case"vector":this.workerSources[re][ue][me]=new w(Ie,this._getLayerIndex(re),this._getAvailableImages(re));break;case"geojson":this.workerSources[re][ue][me]=new ki(Ie,this._getLayerIndex(re),this._getAvailableImages(re));break;default:this.workerSources[re][ue][me]=new this.externalWorkerSourceTypes[ue](Ie,this._getLayerIndex(re),this._getAvailableImages(re))}}return this.workerSources[re][ue][me]}_getDEMWorkerSource(re,ue){return this.demWorkerSources[re]||(this.demWorkerSources[re]={}),this.demWorkerSources[re][ue]||(this.demWorkerSources[re][ue]=new T),this.demWorkerSources[re][ue]}}return d.i(self)&&(self.worker=new rr(self)),rr}),c("index",["exports","./shared"],function(d,u){var b="4.1.3";let C,A;const w={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((r,l)=>{const f=requestAnimationFrame(r);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(f),l(u.c())})}),getImageData(y,r=0){return this.getImageCanvasContext(y).getImageData(-r,-r,y.width+2*r,y.height+2*r)},getImageCanvasContext(y){const r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=y.width,r.height=y.height,l.drawImage(y,0,0,y.width,y.height),l},resolveURL:y=>(C||(C=document.createElement("a")),C.href=y,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(A==null&&(A=matchMedia("(prefers-reduced-motion: reduce)")),A.matches)}};class T{static testProp(r){if(!T.docStyle)return r[0];for(let l=0;l<r.length;l++)if(r[l]in T.docStyle)return r[l];return r[0]}static create(r,l,f){const m=window.document.createElement(r);return l!==void 0&&(m.className=l),f&&f.appendChild(m),m}static createNS(r,l){return window.document.createElementNS(r,l)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(r,l){r.style[T.transformProp]=l}static addEventListener(r,l,f,m={}){r.addEventListener(l,f,"passive"in m?m:m.capture)}static removeEventListener(r,l,f,m={}){r.removeEventListener(l,f,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static getScale(r){const l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}static getPoint(r,l,f){const m=l.boundingClientRect;return new u.P((f.clientX-m.left)/l.x-r.clientLeft,(f.clientY-m.top)/l.y-r.clientTop)}static mousePos(r,l){const f=T.getScale(r);return T.getPoint(r,f,l)}static touchPos(r,l){const f=[],m=T.getScale(r);for(let v=0;v<l.length;v++)f.push(T.getPoint(r,m,l[v]));return f}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);const L={supported:!1,testSupport:function(y){!ce&&F&&(K?Z(y):U=y)}};let U,F,ce=!1,K=!1;function Z(y){const r=y.createTexture();y.bindTexture(y.TEXTURE_2D,r);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,F),y.isContextLost())return;L.supported=!0}catch{}y.deleteTexture(r),ce=!0}var $;typeof document<"u"&&(F=document.createElement("img"),F.onload=function(){U&&Z(U),U=null,K=!0},F.onerror=function(){ce=!0,U=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let r,l,f,m;y.resetRequestQueue=()=>{r=[],l=0,f=0,m={}},y.addThrottleControl=M=>{const H=f++;return m[H]=M,H},y.removeThrottleControl=M=>{delete m[M],I()},y.getImage=(M,H,Q=!0)=>new Promise((ne,pe)=>{L.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),u.e(M,{type:"image"}),r.push({abortController:H,requestParameters:M,supportImageRefresh:Q,state:"queued",onError:ke=>{pe(ke)},onSuccess:ke=>{ne(ke)}}),I()});const v=M=>u._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:H,supportImageRefresh:Q,onError:ne,onSuccess:pe,abortController:ke}=M,Pe=Q===!1&&!u.i(self)&&!u.g(H.url)&&(!H.headers||Object.keys(H.headers).reduce((Ze,rt)=>Ze&&rt==="accept",!0));l++;const Le=Pe?P(H,ke):u.m(H,ke);try{const Ze=yield Le;delete M.abortController,M.state="completed",Ze.data instanceof HTMLImageElement||u.b(Ze.data)?pe(Ze):Ze.data&&pe({data:yield(Te=Ze.data,typeof createImageBitmap=="function"?u.d(Te):u.f(Te)),cacheControl:Ze.cacheControl,expires:Ze.expires})}catch(Ze){delete M.abortController,ne(Ze)}finally{l--,I()}var Te}),I=()=>{const M=(()=>{for(const H of Object.keys(m))if(m[H]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let H=l;H<M&&r.length>0;H++){const Q=r.shift();Q.abortController.signal.aborted?H--:v(Q)}},P=(M,H)=>new Promise((Q,ne)=>{const pe=new Image,ke=M.url,Pe=M.credentials;Pe&&Pe==="include"?pe.crossOrigin="use-credentials":(Pe&&Pe==="same-origin"||!u.s(ke))&&(pe.crossOrigin="anonymous"),H.signal.addEventListener("abort",()=>{pe.src="",ne(u.c())}),pe.fetchPriority="high",pe.onload=()=>{pe.onerror=pe.onload=null,Q({data:pe})},pe.onerror=()=>{pe.onerror=pe.onload=null,H.signal.aborted||ne(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},pe.src=ke})}($||($={})),$.resetRequestQueue();class oe{constructor(r){this._transformRequestFn=r}transformRequest(r,l){return this._transformRequestFn&&this._transformRequestFn(r,l)||{url:r}}normalizeSpriteURL(r,l,f){const m=function(v){const I=v.match(q);if(!I)throw new Error(`Unable to parse URL "${v}"`);return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}(r);return m.path+=`${l}${f}`,function(v){const I=v.params.length?`?${v.params.join("&")}`:"";return`${v.protocol}://${v.authority}${v.path}${I}`}(m)}setTransformRequest(r){this._transformRequestFn=r}}const q=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function V(y){var r=new u.A(3);return r[0]=y[0],r[1]=y[1],r[2]=y[2],r}var E,j=function(y,r,l){return y[0]=r[0]-l[0],y[1]=r[1]-l[1],y[2]=r[2]-l[2],y};E=new u.A(3),u.A!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0);var D=function(y){var r=y[0],l=y[1];return r*r+l*l};function ee(y){const r=[];if(typeof y=="string")r.push({id:"default",url:y});else if(y&&y.length>0){const l=[];for(const{id:f,url:m}of y){const v=`${f}${m}`;l.indexOf(v)===-1&&(l.push(v),r.push({id:f,url:m}))}}return r}(function(){var y=new u.A(2);u.A!=Float32Array&&(y[0]=0,y[1]=0)})();class W{constructor(r,l,f,m){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(l,m)}update(r,l,f){const{width:m,height:v}=r,I=!(this.size&&this.size[0]===m&&this.size[1]===v||f),{context:P}=this,{gl:M}=P;if(this.useMipmap=!!(l&&l.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!l||l.premultiply!==!1)),I)this.size=[m,v],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,r):M.texImage2D(M.TEXTURE_2D,0,this.format,m,v,0,this.format,M.UNSIGNED_BYTE,r.data);else{const{x:H,y:Q}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?M.texSubImage2D(M.TEXTURE_2D,0,H,Q,M.RGBA,M.UNSIGNED_BYTE,r):M.texSubImage2D(M.TEXTURE_2D,0,H,Q,m,v,M.RGBA,M.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(r,l,f){const{context:m}=this,{gl:v}=m;v.bindTexture(v.TEXTURE_2D,this.texture),f!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=v.LINEAR),r!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,r),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,f||r),this.filter=r),l!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,l),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ve(y){const{userImage:r}=y;return!!(r&&r.render&&r.render())&&(y.data.replace(new Uint8Array(r.data.buffer)),!0)}class _e extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:l,promiseResolve:f}of this.requestors)f(this._getImagesForIds(l));this.requestors=[]}}getImage(r){const l=this.images[r];if(l&&!l.data&&l.spriteData){const f=l.spriteData;l.data=new u.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),l.spriteData=null}return l}addImage(r,l){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,l)&&(this.images[r]=l)}_validate(r,l){let f=!0;const m=l.data||l.spriteData;return this._validateStretch(l.stretchX,m&&m.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(l.stretchY,m&&m.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(l.content,l)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,l){if(!r)return!0;let f=0;for(const m of r){if(m[0]<f||m[1]<m[0]||l<m[1])return!1;f=m[1]}return!0}_validateContent(r,l){if(!r)return!0;if(r.length!==4)return!1;const f=l.spriteData,m=f&&f.width||l.data.width,v=f&&f.height||l.data.height;return!(r[0]<0||m<r[0]||r[1]<0||v<r[1]||r[2]<0||m<r[2]||r[3]<0||v<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,l,f=!0){const m=this.getImage(r);if(f&&(m.data.width!==l.data.width||m.data.height!==l.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=m.version+1,this.images[r]=l,this.updatedImages[r]=!0}removeImage(r){const l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((l,f)=>{let m=!0;if(!this.isLoaded())for(const v of r)this.images[v]||(m=!1);this.isLoaded()||m?l(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:l})})}_getImagesForIds(r){const l={};for(const f of r){let m=this.getImage(f);m||(this.fire(new u.k("styleimagemissing",{id:f})),m=this.getImage(f)),m?l[f]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:u.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:r,height:l}=this.atlasImage;return{width:r,height:l}}getPattern(r){const l=this.patterns[r],f=this.getImage(r);if(!f)return null;if(l&&l.position.version===f.version)return l.position;if(l)l.position.version=f.version;else{const m={w:f.data.width+2,h:f.data.height+2,x:0,y:0},v=new u.I(m,f);this.patterns[r]={bin:m,position:v}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new W(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const v in this.patterns)r.push(this.patterns[v].bin);const{w:l,h:f}=u.p(r),m=this.atlasImage;m.resize({width:l||1,height:f||1});for(const v in this.patterns){const{bin:I}=this.patterns[v],P=I.x+1,M=I.y+1,H=this.getImage(v).data,Q=H.width,ne=H.height;u.R.copy(H,m,{x:0,y:0},{x:P,y:M},{width:Q,height:ne}),u.R.copy(H,m,{x:0,y:ne-1},{x:P,y:M-1},{width:Q,height:1}),u.R.copy(H,m,{x:0,y:0},{x:P,y:M+ne},{width:Q,height:1}),u.R.copy(H,m,{x:Q-1,y:0},{x:P-1,y:M},{width:1,height:ne}),u.R.copy(H,m,{x:0,y:0},{x:P+Q,y:M},{width:1,height:ne})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const l of r){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const f=this.getImage(l);f||u.w(`Image with ID: "${l}" was not found`),ve(f)&&this.updateImage(l,f)}}}const de=1e20;function ie(y,r,l,f,m,v,I,P,M){for(let H=r;H<r+f;H++)le(y,l*v+H,v,m,I,P,M);for(let H=l;H<l+m;H++)le(y,H*v+r,1,f,I,P,M)}function le(y,r,l,f,m,v,I){v[0]=0,I[0]=-de,I[1]=de,m[0]=y[r];for(let P=1,M=0,H=0;P<f;P++){m[P]=y[r+P*l];const Q=P*P;do{const ne=v[M];H=(m[P]-m[ne]+Q-ne*ne)/(P-ne)/2}while(H<=I[M]&&--M>-1);M++,v[M]=P,I[M]=H,I[M+1]=de}for(let P=0,M=0;P<f;P++){for(;I[M+1]<P;)M++;const H=v[M],Q=P-H;y[r+P*l]=m[H]+Q*Q}}class J{constructor(r,l){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return u._(this,void 0,void 0,function*(){const l=[];for(const v in r)for(const I of r[v])l.push(this._getAndCacheGlyphsPromise(v,I));const f=yield Promise.all(l),m={};for(const{stack:v,id:I,glyph:P}of f)m[v]||(m[v]={}),m[v][I]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};return m})}_getAndCacheGlyphsPromise(r,l){return u._(this,void 0,void 0,function*(){let f=this.entries[r];f||(f=this.entries[r]={glyphs:{},requests:{},ranges:{}});let m=f.glyphs[l];if(m!==void 0)return{stack:r,id:l,glyph:m};if(m=this._tinySDF(f,r,l),m)return f.glyphs[l]=m,{stack:r,id:l,glyph:m};const v=Math.floor(l/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[v])return{stack:r,id:l,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[v]){const P=J.loadGlyphRange(r,v,this.url,this.requestManager);f.requests[v]=P}const I=yield f.requests[v];for(const P in I)this._doesCharSupportLocalGlyph(+P)||(f.glyphs[+P]=I[+P]);return f.ranges[v]=!0,{stack:r,id:l,glyph:I[l]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](r)||u.u["Hangul Syllables"](r)||u.u.Hiragana(r)||u.u.Katakana(r))}_tinySDF(r,l,f){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let v=r.tinySDF;if(!v){let P="400";/bold/i.test(l)?P="900":/medium/i.test(l)?P="500":/light/i.test(l)&&(P="200"),v=r.tinySDF=new J.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:P})}const I=v.draw(String.fromCharCode(f));return{id:f,bitmap:new u.o({width:I.width||60,height:I.height||60},I.data),metrics:{width:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:I.glyphAdvance/2||24,isDoubleResolution:!0}}}}J.loadGlyphRange=function(y,r,l,f){return u._(this,void 0,void 0,function*(){const m=256*r,v=m+255,I=f.transformRequest(l.replace("{fontstack}",y).replace("{range}",`${m}-${v}`),"Glyphs"),P=yield u.l(I,new AbortController);if(!P||!P.data)throw new Error(`Could not load glyph range. range: ${r}, ${m}-${v}`);const M={};for(const H of u.n(P.data))M[H.id]=H;return M})},J.TinySDF=class{constructor({fontSize:y=24,buffer:r=3,radius:l=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:v="normal",fontStyle:I="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=l;const P=this.size=y+4*r,M=this._createCanvas(P),H=this.ctx=M.getContext("2d",{willReadFrequently:!0});H.font=`${I} ${v} ${y}px ${m}`,H.textBaseline="alphabetic",H.textAlign="left",H.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(y){const r=document.createElement("canvas");return r.width=r.height=y,r}draw(y){const{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:v}=this.ctx.measureText(y),I=Math.ceil(l),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-m))),M=Math.min(this.size-this.buffer,I+Math.ceil(f)),H=P+2*this.buffer,Q=M+2*this.buffer,ne=Math.max(H*Q,0),pe=new Uint8ClampedArray(ne),ke={data:pe,width:H,height:Q,glyphWidth:P,glyphHeight:M,glyphTop:I,glyphLeft:0,glyphAdvance:r};if(P===0||M===0)return ke;const{ctx:Pe,buffer:Le,gridInner:Te,gridOuter:Ze}=this;Pe.clearRect(Le,Le,P,M),Pe.fillText(y,Le,Le+I);const rt=Pe.getImageData(Le,Le,P,M);Ze.fill(de,0,ne),Te.fill(0,0,ne);for(let je=0;je<M;je++)for(let Ke=0;Ke<P;Ke++){const it=rt.data[4*(je*P+Ke)+3]/255;if(it===0)continue;const st=(je+Le)*H+Ke+Le;if(it===1)Ze[st]=0,Te[st]=de;else{const lt=.5-it;Ze[st]=lt>0?lt*lt:0,Te[st]=lt<0?lt*lt:0}}ie(Ze,0,0,H,Q,H,this.f,this.v,this.z),ie(Te,Le,Le,P,M,H,this.f,this.v,this.z);for(let je=0;je<ne;je++){const Ke=Math.sqrt(Ze[je])-Math.sqrt(Te[je]);pe[je]=Math.round(255-255*(Ke/this.radius+this.cutoff))}return ke}};class te{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,l){return u.y(r.expression.evaluate(l))}interpolate(r,l,f){return{x:u.z.number(r.x,l.x,f),y:u.z.number(r.y,l.y,f),z:u.z.number(r.z,l.z,f)}}}let he;class be extends u.E{constructor(r){super(),he=he||new u.q({anchor:new u.D(u.v.light.anchor),position:new te,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(he),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,l={}){if(!this._validate(u.r,r,l))for(const f in r){const m=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,f){return(!f||f.validate!==!1)&&u.t(this,r.call(u.x,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}class Ee{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,l){const f=r.join(",")+String(l);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,l)),this.dashEntry[f]}getDashRanges(r,l,f){const m=[];let v=r.length%2==1?-r[r.length-1]*f:0,I=r[0]*f,P=!0;m.push({left:v,right:I,isDash:P,zeroLength:r[0]===0});let M=r[0];for(let H=1;H<r.length;H++){P=!P;const Q=r[H];v=M*f,M+=Q,I=M*f,m.push({left:v,right:I,isDash:P,zeroLength:Q===0})}return m}addRoundDash(r,l,f){const m=l/2;for(let v=-f;v<=f;v++){const I=this.width*(this.nextRow+f+v);let P=0,M=r[P];for(let H=0;H<this.width;H++){H/M.right>1&&(M=r[++P]);const Q=Math.abs(H-M.left),ne=Math.abs(H-M.right),pe=Math.min(Q,ne);let ke;const Pe=v/f*(m+1);if(M.isDash){const Le=m-Math.abs(Pe);ke=Math.sqrt(pe*pe+Le*Le)}else ke=m-Math.sqrt(pe*pe+Pe*Pe);this.data[I+H]=Math.max(0,Math.min(255,ke+128))}}}addRegularDash(r){for(let P=r.length-1;P>=0;--P){const M=r[P],H=r[P+1];M.zeroLength?r.splice(P,1):H&&H.isDash===M.isDash&&(H.left=M.left,r.splice(P,1))}const l=r[0],f=r[r.length-1];l.isDash===f.isDash&&(l.left=f.left-this.width,f.right=l.right+this.width);const m=this.width*this.nextRow;let v=0,I=r[v];for(let P=0;P<this.width;P++){P/I.right>1&&(I=r[++v]);const M=Math.abs(P-I.left),H=Math.abs(P-I.right),Q=Math.min(M,H);this.data[m+P]=Math.max(0,Math.min(255,(I.isDash?Q:-Q)+128))}}addDash(r,l){const f=l?7:0,m=2*f+1;if(this.nextRow+m>this.height)return u.w("LineAtlas out of space"),null;let v=0;for(let P=0;P<r.length;P++)v+=r[P];if(v!==0){const P=this.width/v,M=this.getDashRanges(r,this.width,P);l?this.addRoundDash(M,P,f):this.addRegularDash(M)}const I={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:v};return this.nextRow+=m,this.dirty=!0,I}bind(r){const l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const De="maplibre_preloaded_worker_pool";class Ae{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Ae.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[De]}numActive(){return Object.keys(this.active).length}}const Oe=Math.floor(w.hardwareConcurrency/2);let We,He;function nt(){return We||(We=new Ae),We}Ae.workerCount=u.B(globalThis)?Math.max(Math.min(Oe,3),1):1;class dt{constructor(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l;const f=this.workerPool.acquire(l);for(let m=0;m<f.length;m++){const v=new u.C(f[m],l);v.name=`Worker ${m}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,l){const f=[];for(const m of this.actors)f.push(m.sendAsync({type:r,data:l}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,l){for(const f of this.actors)f.registerMessageHandler(r,l)}}function wt(){return He||(He=new dt(nt(),u.G),He.registerMessageHandler("GR",(y,r,l)=>u.m(r,l))),He}function Rt(y,r){const l=u.F();return u.H(l,l,[1,1,0]),u.J(l,l,[.5*y.width,.5*y.height,1]),u.K(l,l,y.calculatePosMatrix(r.toUnwrapped()))}function gt(y,r,l,f,m,v){const I=function(ne,pe,ke){if(ne)for(const Pe of ne){const Le=pe[Pe];if(Le&&Le.source===ke&&Le.type==="fill-extrusion")return!0}else for(const Pe in pe){const Le=pe[Pe];if(Le.source===ke&&Le.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,y.id),P=v.maxPitchScaleFactor(),M=y.tilesIn(f,P,I);M.sort(St);const H=[];for(const ne of M)H.push({wrappedTileID:ne.tileID.wrapped().key,queryResults:ne.tile.queryRenderedFeatures(r,l,y._state,ne.queryGeometry,ne.cameraQueryGeometry,ne.scale,m,v,P,Rt(y.transform,ne.tileID))});const Q=function(ne){const pe={},ke={};for(const Pe of ne){const Le=Pe.queryResults,Te=Pe.wrappedTileID,Ze=ke[Te]=ke[Te]||{};for(const rt in Le){const je=Le[rt],Ke=Ze[rt]=Ze[rt]||{},it=pe[rt]=pe[rt]||[];for(const st of je)Ke[st.featureIndex]||(Ke[st.featureIndex]=!0,it.push(st))}}return pe}(H);for(const ne in Q)Q[ne].forEach(pe=>{const ke=pe.feature,Pe=y.getFeatureState(ke.layer["source-layer"],ke.id);ke.source=ke.layer.source,ke.layer["source-layer"]&&(ke.sourceLayer=ke.layer["source-layer"]),ke.state=Pe});return Q}function St(y,r){const l=y.tileID,f=r.tileID;return l.overscaledZ-f.overscaledZ||l.canonical.y-f.canonical.y||l.wrap-f.wrap||l.canonical.x-f.canonical.x}function Vt(y,r,l){return u._(this,void 0,void 0,function*(){let f=y;if(y.url?f=(yield u.h(r.transformRequest(y.url,"Source"),l)).data:yield w.frameAsync(l),!f)return null;const m=u.L(u.e(f,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(m.vectorLayerIds=f.vector_layers.map(v=>v.id)),m})}class Bt{constructor(r,l){r&&(l?this.setSouthWest(r).setNorthEast(l):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.M?new u.M(r.lng,r.lat):u.M.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.M?new u.M(r.lng,r.lat):u.M.convert(r),this}extend(r){const l=this._sw,f=this._ne;let m,v;if(r instanceof u.M)m=r,v=r;else{if(!(r instanceof Bt))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Bt.convert(r)):this.extend(u.M.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.M.convert(r)):this;if(m=r._sw,v=r._ne,!m||!v)return this}return l||f?(l.lng=Math.min(m.lng,l.lng),l.lat=Math.min(m.lat,l.lat),f.lng=Math.max(v.lng,f.lng),f.lat=Math.max(v.lat,f.lat)):(this._sw=new u.M(m.lng,m.lat),this._ne=new u.M(v.lng,v.lat)),this}getCenter(){return new u.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.M(this.getWest(),this.getNorth())}getSouthEast(){return new u.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:l,lat:f}=u.M.convert(r);let m=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(r){return r instanceof Bt?r:r&&new Bt(r)}static fromLngLat(r,l=0){const f=360*l/40075017,m=f/Math.cos(Math.PI/180*r.lat);return new Bt(new u.M(r.lng-m,r.lat-f),new u.M(r.lng+m,r.lat+f))}}class an{constructor(r,l,f){this.bounds=Bt.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const l=Math.pow(2,r.z),f=Math.floor(u.N(this.bounds.getWest())*l),m=Math.floor(u.O(this.bounds.getNorth())*l),v=Math.ceil(u.N(this.bounds.getEast())*l),I=Math.ceil(u.O(this.bounds.getSouth())*l);return r.x>=f&&r.x<v&&r.y>=m&&r.y<I}}class Sn extends u.E{constructor(r,l,f,m){if(super(),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.L(l,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Vt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(u.e(this,r),r.bounds&&(this.tileBounds=new an(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(l,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((v,I)=>{r.reloadPromise={resolve:v,reject:I}})}else r.actor=this.dispatcher.getActor(),m="LT";r.abortController=new AbortController;try{const v=yield r.actor.sendAsync({type:m,data:f},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,v)}catch(v){if(delete r.abortController,r.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,l){if(l&&l.resourceTiming&&(r.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&r.setExpiryData(l),r.loadVectorData(l,this.map.painter),r.reloadPromise){const f=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(f.resolve).catch(f.reject)}}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class et extends u.E{constructor(r,l,f,m){super(),this.id=r,this.dispatcher=f,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},l),u.e(this,u.L(l,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Vt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new an(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const f=yield $.getImage(this.map._requestManager.transformRequest(l,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&r.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const m=this.map.painter.context,v=m.gl,I=f.data;r.texture=this.map.painter.getTileTexture(I.width),r.texture?r.texture.update(I,{useMipmap:!0}):(r.texture=new W(m,I,v.RGBA,{useMipmap:!0}),r.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),m.extTextureFilterAnisotropic&&v.texParameterf(v.TEXTURE_2D,m.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,m.extTextureFilterAnisotropicMax)),r.state="loaded"}}catch(f){if(delete r.abortController,r.aborted)r.state="unloaded";else if(f)throw r.state="errored",f}})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class ln extends et{constructor(r,l,f,m){super(r,l,f,m),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(l,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const m=yield $.getImage(f,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(m&&m.data){const v=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&r.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const I=u.b(v)&&u.S()?v:yield this.readImageNow(v),P={type:this.type,uid:r.uid,source:this.id,rawImageData:I,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const M=yield r.actor.sendAsync({type:"LDT",data:P});r.dem=M,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(m){if(delete r.abortController,r.aborted)r.state="unloaded";else if(m)throw r.state="errored",m}})}readImageNow(r){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.U()){const l=r.width+2,f=r.height+2;try{return new u.R({width:l,height:f},yield u.V(r,-1,-1,l,f))}catch{}}return w.getImageData(r,1)})}_getNeighboringTiles(r){const l=r.canonical,f=Math.pow(2,l.z),m=(l.x-1+f)%f,v=l.x===0?r.wrap-1:r.wrap,I=(l.x+1+f)%f,P=l.x+1===f?r.wrap+1:r.wrap,M={};return M[new u.Q(r.overscaledZ,v,l.z,m,l.y).key]={backfilled:!1},M[new u.Q(r.overscaledZ,P,l.z,I,l.y).key]={backfilled:!1},l.y>0&&(M[new u.Q(r.overscaledZ,v,l.z,m,l.y-1).key]={backfilled:!1},M[new u.Q(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},M[new u.Q(r.overscaledZ,P,l.z,I,l.y-1).key]={backfilled:!1}),l.y+1<f&&(M[new u.Q(r.overscaledZ,v,l.z,m,l.y+1).key]={backfilled:!1},M[new u.Q(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},M[new u.Q(r.overscaledZ,P,l.z,I,l.y+1).key]={backfilled:!1}),M}unloadTile(r){return u._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class wn extends u.E{constructor(r,l,f,m){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(m),this._data=l.data,this._options=u.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const v=u.W/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*v,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*v,extent:u.W,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:u.W,radius:(l.clusterRadius||50)*v,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,l,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:l,offset:f}})}_updateWorkerData(r){return u._(this,void 0,void 0,function*(){const l=u.e({type:this.type},this.workerOptions);r?l.dataDiff=r:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(w.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const f=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let m=null;f.resourceTiming&&f.resourceTiming[this.id]&&(m=f.resourceTiming[this.id].slice(0));const v={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&u.e(v,{resourceTiming:m}),this.fire(new u.k("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(f))}})}loaded(){return this._pendingLoads===0}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.actor?"RT":"LT";r.actor=this.actor;const f={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const m=yield this.actor.sendAsync({type:l,data:f},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(m,this.map.painter,l==="RT")})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var xe=u.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class N extends u.E{constructor(r,l,f,m){super(),this.id=r,this.dispatcher=f,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=l}load(r){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield $.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,r&&(this.coordinates=r),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new u.j(l))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const l=r.map(u.Y.fromLngLat);this.tileID=function(m){let v=1/0,I=1/0,P=-1/0,M=-1/0;for(const pe of m)v=Math.min(v,pe.x),I=Math.min(I,pe.y),P=Math.max(P,pe.x),M=Math.max(M,pe.y);const H=Math.max(P-v,M-I),Q=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),ne=Math.pow(2,Q);return new u.a0(Q,Math.floor((v+P)/2*ne),Math.floor((I+M)/2*ne))}(l),this.minzoom=this.maxzoom=this.tileID.z;const f=l.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new u.Z,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,u.W,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,u.W),this._boundsArray.emplaceBack(f[2].x,f[2].y,u.W,u.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,xe.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new W(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let f=!1;for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class B extends N{constructor(r,l,f,m){super(r,l,f,m),this.roundZoom=!0,this.type="video",this.options=l}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const l of r.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{const l=yield u.a2(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new u.j(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new u.j(new u.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,xe.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new W(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let f=!1;for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class we extends N{constructor(r,l,f,m){super(r,l,f,m),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(I=>typeof I!="number"))||this.fire(new u.j(new u.a1(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a1(`sources.${r}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new u.j(new u.a1(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a1(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a1(`sources.${r}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,f=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,xe.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new W(l,this.canvas,f.RGBA,{premultiply:!0});let m=!1;for(const v in this.tiles){const I=this.tiles[v];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,m=!0)}m&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Xe={},Qe=y=>{switch(y){case"geojson":return wn;case"image":return N;case"raster":return et;case"raster-dem":return ln;case"vector":return Sn;case"video":return B;case"canvas":return we}return Xe[y]},ct="RTLPluginLoaded";class ae extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=wt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return u._(this,arguments,void 0,function*(l,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=w.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(ct))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let R=null;function z(){return R||(R=new ae),R}class Se{constructor(r,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a3(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const l=r+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,l,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,v){const I={};if(!v)return I;for(const P of m){const M=P.layerIds.map(H=>v.getLayer(H)).filter(Boolean);if(M.length!==0){P.layers=M,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(H=>M.filter(Q=>Q.id===H)[0]));for(const H of M)I[H.id]=P}}return I}(r.buckets,l.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const v=this.buckets[m];if(v instanceof u.a5){if(this.hasSymbolBuckets=!0,!f)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const v=this.buckets[m];if(v instanceof u.a5&&v.hasRTLText){this.hasRTLText=!0,z().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const v=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(m).queryRadius(v))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a4}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const m=this.buckets[f];m.uploadPending()&&m.upload(r)}const l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new W(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new W(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,f,m,v,I,P,M,H,Q){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:v,scale:I,tileSize:this.tileSize,pixelPosMatrix:Q,transform:M,params:P,queryPadding:this.queryPadding*H},r,l,f):{}}querySourceFeatures(r,l){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const m=f.loadVTLayers(),v=l&&l.sourceLayer?l.sourceLayer:"",I=m._geojsonTileLayer||m[v];if(!I)return;const P=u.a6(l&&l.filter),{z:M,x:H,y:Q}=this.tileID.canonical,ne={z:M,x:H,y:Q};for(let pe=0;pe<I.length;pe++){const ke=I.feature(pe);if(P.needGeometry){const Te=u.a7(ke,!0);if(!P.filter(new u.a8(this.tileID.overscaledZ),Te,this.tileID.canonical))continue}else if(!P.filter(new u.a8(this.tileID.overscaledZ),ke))continue;const Pe=f.getId(ke,v),Le=new u.a9(ke,M,H,Q,Pe);Le.tile=ne,r.push(Le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const l=this.expirationTime;if(r.cacheControl){const f=u.aa(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let m=!1;if(this.expirationTime>f)m=!1;else if(l)if(this.expirationTime<l)m=!0;else{const v=this.expirationTime-l;v?this.expirationTime=f+Math.max(v,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!l.style.hasLayer(m))continue;const v=this.buckets[m],I=v.layers[0].sourceLayer||"_geojsonTileLayer",P=f[I],M=r[I];if(!P||!M||Object.keys(M).length===0)continue;v.update(M,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const H=l&&l.style&&l.style.getLayer(m);H&&(this.queryPadding=Math.max(this.queryPadding,H.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<w.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=w.now()+r}setDependencies(r,l){const f={};for(const m of l)f[m]=!0;this.dependencies[r]=f}hasDependency(r,l){for(const f of r){const m=this.dependencies[f];if(m){for(const v of l)if(m[v])return!0}}return!1}}class Ve{constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(const r in this.data)for(const l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,f){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const v={value:l,timeout:void 0};if(f!==void 0&&(v.timeout=setTimeout(()=>{this.remove(r,v)},f)),this.data[m].push(v),this.order.push(m),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){const l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;const f=r.wrapped().key,m=l===void 0?0:this.data[f].indexOf(l),v=this.data[f][m];return this.data[f].splice(m,1),v.timeout&&clearTimeout(v.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(v.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){const l=[];for(const f in this.data)for(const m of this.data[f])r(m.value)||l.push(m);for(const f of l)this.remove(f.value.tileID,f)}}class tt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,f){const m=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},u.e(this.stateChanges[r][m],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const v in this.state[r])v!==m&&(this.deletedStates[r][v]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const v in this.state[r][m])f[v]||(this.deletedStates[r][m][v]=null)}else for(const v in f)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][v]===null&&delete this.deletedStates[r][m][v]}removeFeatureState(r,l,f){if(this.deletedStates[r]===null)return;const m=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&l!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][f]=null);else if(l!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(f in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][f]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,l){const f=String(l),m=u.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const v=this.deletedStates[r][l];if(v===null)return{};for(const I in v)delete m[I]}return m}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){const f={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const v={};for(const I in this.stateChanges[m])this.state[m][I]||(this.state[m][I]={}),u.e(this.state[m][I],this.stateChanges[m][I]),v[I]=this.state[m][I];f[m]=v}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const v={};if(this.deletedStates[m]===null)for(const I in this.state[m])v[I]={},this.state[m][I]={};else for(const I in this.deletedStates[m]){if(this.deletedStates[m][I]===null)this.state[m][I]={};else for(const P of Object.keys(this.deletedStates[m][I]))delete this.state[m][I][P];v[I]=this.state[m][I]}f[m]=f[m]||{},u.e(f[m],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const m in r)r[m].setFeatureState(f,l)}}class ot extends u.E{constructor(r,l,f){super(),this.id=r,this.dispatcher=f,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,v,I,P)=>{const M=new(Qe(v.type))(m,v,I,P);if(M.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${M.id}`);return M})(r,l,f,this),this._tiles={},this._cache=new Ve(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new tt,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,l,f){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,l,f)}catch(m){r.state="errored",m.status!==404?this._source.fire(new u.j(m,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const f=this._tiles[l];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(ut).map(r=>r.key)}getRenderableIds(r){const l=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&l.push(this._tiles[f]);return r?l.sort((f,m)=>{const v=f.tileID,I=m.tileID,P=new u.P(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),M=new u.P(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-I.overscaledZ||M.y-P.y||M.x-P.x}).map(f=>f.tileID.key):l.map(f=>f.tileID).sort(ut).map(f=>f.key)}hasRenderableParent(r){const l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,l){return u._(this,void 0,void 0,function*(){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=l),yield this._loadTile(f,r,l))})}_tileLoaded(r,l,f){r.timeAdded=w.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const l=this.getRenderableIds();for(let m=0;m<l.length;m++){const v=l[m];if(r.neighboringTiles&&r.neighboringTiles[v]){const I=this.getTileByID(v);f(r,I),f(I,r)}}function f(m,v){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let I=v.tileID.canonical.x-m.tileID.canonical.x;const P=v.tileID.canonical.y-m.tileID.canonical.y,M=Math.pow(2,m.tileID.canonical.z),H=v.tileID.key;I===0&&P===0||Math.abs(P)>1||(Math.abs(I)>1&&(Math.abs(I+M)===1?I+=M:Math.abs(I-M)===1&&(I-=M)),v.dem&&m.dem&&(m.dem.backfillBorder(v.dem,I,P),m.neighboringTiles&&m.neighboringTiles[H]&&(m.neighboringTiles[H].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,f,m){for(const v in this._tiles){let I=this._tiles[v];if(m[v]||!I.hasData()||I.tileID.overscaledZ<=l||I.tileID.overscaledZ>f)continue;let P=I.tileID;for(;I&&I.tileID.overscaledZ>l+1;){const H=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[H.key],I&&I.hasData()&&(P=H)}let M=P;for(;M.overscaledZ>l;)if(M=M.scaledTo(M.overscaledZ-1),r[M.key]){m[P.key]=P;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=l?f:null}for(let f=r.overscaledZ-1;f>=l;f--){const m=r.scaledTo(f),v=this._getLoadedTile(m);if(v)return v}}_getLoadedTile(r){const l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const l=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(l*f*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(v)}handleWrapJump(r){const l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){const f={};for(const m in this._tiles){const v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+l),f[v.tileID.key]=v}this._tiles=f;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(r,l){if(!this._sourceLoaded||this._paused)return;let f;this.transform=r,this.terrain=l,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(Q=>new u.Q(Q.canonical.z,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l}),this._source.hasTile&&(f=f.filter(Q=>this._source.hasTile(Q)))):f=[];const m=r.coveringZoomLevel(this._source),v=Math.max(m-ot.maxOverzooming,this._source.minzoom),I=Math.max(m+ot.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Q={};for(const ne of f)if(ne.canonical.z>this._source.minzoom){const pe=ne.scaledTo(ne.canonical.z-1);Q[pe.key]=pe;const ke=ne.scaledTo(Math.max(this._source.minzoom,Math.min(ne.canonical.z,5)));Q[ke.key]=ke}f=f.concat(Object.values(Q))}const P=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(f,m);if(Nt(this._source.type)){const Q={},ne={},pe=Object.keys(M),ke=w.now();for(const Pe of pe){const Le=M[Pe],Te=this._tiles[Pe];if(!Te||Te.fadeEndTime!==0&&Te.fadeEndTime<=ke)continue;const Ze=this.findLoadedParent(Le,v);Ze&&(this._addTile(Ze.tileID),Q[Ze.tileID.key]=Ze.tileID),ne[Pe]=Le}this._retainLoadedChildren(ne,m,I,M);for(const Pe in Q)M[Pe]||(this._coveredTiles[Pe]=!0,M[Pe]=Q[Pe]);if(l){const Pe={},Le={};for(const Te of f)this._tiles[Te.key].hasData()?Pe[Te.key]=Te:Le[Te.key]=Te;for(const Te in Le){const Ze=Le[Te].children(this._source.maxzoom);this._tiles[Ze[0].key]&&this._tiles[Ze[1].key]&&this._tiles[Ze[2].key]&&this._tiles[Ze[3].key]&&(Pe[Ze[0].key]=M[Ze[0].key]=Ze[0],Pe[Ze[1].key]=M[Ze[1].key]=Ze[1],Pe[Ze[2].key]=M[Ze[2].key]=Ze[2],Pe[Ze[3].key]=M[Ze[3].key]=Ze[3],delete Le[Te])}for(const Te in Le){const Ze=this.findLoadedParent(Le[Te],this._source.minzoom);if(Ze){Pe[Ze.tileID.key]=M[Ze.tileID.key]=Ze.tileID;for(const rt in Pe)Pe[rt].isChildOf(Ze.tileID)&&delete Pe[rt]}}for(const Te in this._tiles)Pe[Te]||(this._coveredTiles[Te]=!0)}}for(const Q in M)this._tiles[Q].clearFadeHold();const H=u.ab(this._tiles,M);for(const Q of H){const ne=this._tiles[Q];ne.hasSymbolBuckets&&!ne.holdingForFade()?ne.setHoldDuration(this.map._fadeDuration):ne.hasSymbolBuckets&&!ne.symbolFadeFinished()||this._removeTile(Q)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,l){const f={},m={},v=Math.max(l-ot.maxOverzooming,this._source.minzoom),I=Math.max(l+ot.maxUnderzooming,this._source.minzoom),P={};for(const M of r){const H=this._addTile(M);f[M.key]=M,H.hasData()||l<this._source.maxzoom&&(P[M.key]=M)}this._retainLoadedChildren(P,l,I,f);for(const M of r){let H=this._tiles[M.key];if(H.hasData())continue;if(l+1>this._source.maxzoom){const ne=M.children(this._source.maxzoom)[0],pe=this.getTile(ne);if(pe&&pe.hasData()){f[ne.key]=ne;continue}}else{const ne=M.children(this._source.maxzoom);if(f[ne[0].key]&&f[ne[1].key]&&f[ne[2].key]&&f[ne[3].key])continue}let Q=H.wasRequested();for(let ne=M.overscaledZ-1;ne>=v;--ne){const pe=M.scaledTo(ne);if(m[pe.key])break;if(m[pe.key]=!0,H=this.getTile(pe),!H&&Q&&(H=this._addTile(pe)),H){const ke=H.hasData();if((Q||ke)&&(f[pe.key]=pe),Q=H.wasRequested(),ke)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const l=[];let f,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){f=this._loadedParentTiles[m.key];break}l.push(m.key);const v=m.scaledTo(m.overscaledZ-1);if(f=this._getLoadedTile(v),f)break;m=v}for(const v of l)this._loadedParentTiles[v]=f}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));const f=l;return l||(l=new Se(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,r.key,l.state)),l.uses++,this._tiles[r.key]=l,f||this._source.fire(new u.k("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=l.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){const l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(r){const l=r.sourceDataType;r.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&l==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,l,f){const m=[],v=this.transform;if(!v)return m;const I=f?v.getCameraQueryGeometry(r):r,P=r.map(Pe=>v.pointCoordinate(Pe,this.terrain)),M=I.map(Pe=>v.pointCoordinate(Pe,this.terrain)),H=this.getIds();let Q=1/0,ne=1/0,pe=-1/0,ke=-1/0;for(const Pe of M)Q=Math.min(Q,Pe.x),ne=Math.min(ne,Pe.y),pe=Math.max(pe,Pe.x),ke=Math.max(ke,Pe.y);for(let Pe=0;Pe<H.length;Pe++){const Le=this._tiles[H[Pe]];if(Le.holdingForFade())continue;const Te=Le.tileID,Ze=Math.pow(2,v.zoom-Le.tileID.overscaledZ),rt=l*Le.queryPadding*u.W/Le.tileSize/Ze,je=[Te.getTilePoint(new u.Y(Q,ne)),Te.getTilePoint(new u.Y(pe,ke))];if(je[0].x-rt<u.W&&je[0].y-rt<u.W&&je[1].x+rt>=0&&je[1].y+rt>=0){const Ke=P.map(st=>Te.getTilePoint(st)),it=M.map(st=>Te.getTilePoint(st));m.push({tile:Le,tileID:Te,queryGeometry:Ke,cameraQueryGeometry:it,scale:Ze})}}return m}getVisibleCoordinates(r){const l=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(const f of l)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(Nt(this._source.type)){const r=w.now();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=r)return!0}return!1}setFeatureState(r,l,f){this._state.updateState(r=r||"_geojsonTileLayer",l,f)}removeFeatureState(r,l,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,f)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,f){const m=this._tiles[r];m&&m.setDependencies(l,f)}reloadTilesForDependencies(r,l){for(const f in this._tiles)this._tiles[f].hasDependency(r,l)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,l))}}function ut(y,r){const l=Math.abs(2*y.wrap)-+(y.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return y.overscaledZ-r.overscaledZ||f-l||r.canonical.y-y.canonical.y||r.canonical.x-y.canonical.x}function Nt(y){return y==="raster"||y==="image"||y==="video"}ot.maxOverzooming=10,ot.maxUnderzooming=3;class jt{constructor(r,l){this.reset(r,l)}reset(r,l){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ac(r,0,1);let l=1,f=this._distances[l];const m=r*this.paddedLength+this.padding;for(;f<m&&l<this._distances.length;)f=this._distances[++l];const v=l-1,I=this._distances[v],P=f-I,M=P>0?(m-I)/P:0;return this.points[v].mult(1-M).add(this.points[l].mult(M))}}function mn(y,r){let l=!0;return y==="always"||y!=="never"&&r!=="never"||(l=!1),l}class _n{constructor(r,l,f){const m=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(l/f);for(let I=0;I<this.xCellCount*this.yCellCount;I++)m.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,l,f,m,v){this._forEachCell(l,f,m,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(v)}insertCircle(r,l,f,m){this._forEachCell(l-m,f-m,l+m,f+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(f),this.circles.push(m)}_insertBoxCell(r,l,f,m,v,I){this.boxCells[v].push(I)}_insertCircleCell(r,l,f,m,v,I){this.circleCells[v].push(I)}_query(r,l,f,m,v,I,P){if(f<0||r>this.width||m<0||l>this.height)return[];const M=[];if(r<=0&&l<=0&&this.width<=f&&this.height<=m){if(v)return[{key:null,x1:r,y1:l,x2:f,y2:m}];for(let H=0;H<this.boxKeys.length;H++)M.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(let H=0;H<this.circleKeys.length;H++){const Q=this.circles[3*H],ne=this.circles[3*H+1],pe=this.circles[3*H+2];M.push({key:this.circleKeys[H],x1:Q-pe,y1:ne-pe,x2:Q+pe,y2:ne+pe})}}else this._forEachCell(r,l,f,m,this._queryCell,M,{hitTest:v,overlapMode:I,seenUids:{box:{},circle:{}}},P);return M}query(r,l,f,m){return this._query(r,l,f,m,!1,null)}hitTest(r,l,f,m,v,I){return this._query(r,l,f,m,!0,v,I).length>0}hitTestCircle(r,l,f,m,v){const I=r-f,P=r+f,M=l-f,H=l+f;if(P<0||I>this.width||H<0||M>this.height)return!1;const Q=[];return this._forEachCell(I,M,P,H,this._queryCellCircle,Q,{hitTest:!0,overlapMode:m,circle:{x:r,y:l,radius:f},seenUids:{box:{},circle:{}}},v),Q.length>0}_queryCell(r,l,f,m,v,I,P,M){const{seenUids:H,hitTest:Q,overlapMode:ne}=P,pe=this.boxCells[v];if(pe!==null){const Pe=this.bboxes;for(const Le of pe)if(!H.box[Le]){H.box[Le]=!0;const Te=4*Le,Ze=this.boxKeys[Le];if(r<=Pe[Te+2]&&l<=Pe[Te+3]&&f>=Pe[Te+0]&&m>=Pe[Te+1]&&(!M||M(Ze))&&(!Q||!mn(ne,Ze.overlapMode))&&(I.push({key:Ze,x1:Pe[Te],y1:Pe[Te+1],x2:Pe[Te+2],y2:Pe[Te+3]}),Q))return!0}}const ke=this.circleCells[v];if(ke!==null){const Pe=this.circles;for(const Le of ke)if(!H.circle[Le]){H.circle[Le]=!0;const Te=3*Le,Ze=this.circleKeys[Le];if(this._circleAndRectCollide(Pe[Te],Pe[Te+1],Pe[Te+2],r,l,f,m)&&(!M||M(Ze))&&(!Q||!mn(ne,Ze.overlapMode))){const rt=Pe[Te],je=Pe[Te+1],Ke=Pe[Te+2];if(I.push({key:Ze,x1:rt-Ke,y1:je-Ke,x2:rt+Ke,y2:je+Ke}),Q)return!0}}}return!1}_queryCellCircle(r,l,f,m,v,I,P,M){const{circle:H,seenUids:Q,overlapMode:ne}=P,pe=this.boxCells[v];if(pe!==null){const Pe=this.bboxes;for(const Le of pe)if(!Q.box[Le]){Q.box[Le]=!0;const Te=4*Le,Ze=this.boxKeys[Le];if(this._circleAndRectCollide(H.x,H.y,H.radius,Pe[Te+0],Pe[Te+1],Pe[Te+2],Pe[Te+3])&&(!M||M(Ze))&&!mn(ne,Ze.overlapMode))return I.push(!0),!0}}const ke=this.circleCells[v];if(ke!==null){const Pe=this.circles;for(const Le of ke)if(!Q.circle[Le]){Q.circle[Le]=!0;const Te=3*Le,Ze=this.circleKeys[Le];if(this._circlesCollide(Pe[Te],Pe[Te+1],Pe[Te+2],H.x,H.y,H.radius)&&(!M||M(Ze))&&!mn(ne,Ze.overlapMode))return I.push(!0),!0}}}_forEachCell(r,l,f,m,v,I,P,M){const H=this._convertToXCellCoord(r),Q=this._convertToYCellCoord(l),ne=this._convertToXCellCoord(f),pe=this._convertToYCellCoord(m);for(let ke=H;ke<=ne;ke++)for(let Pe=Q;Pe<=pe;Pe++)if(v.call(this,r,l,f,m,this.xCellCount*Pe+ke,I,P,M))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,l,f,m,v,I){const P=m-r,M=v-l,H=f+I;return H*H>P*P+M*M}_circleAndRectCollide(r,l,f,m,v,I,P){const M=(I-m)/2,H=Math.abs(r-(m+M));if(H>M+f)return!1;const Q=(P-v)/2,ne=Math.abs(l-(v+Q));if(ne>Q+f)return!1;if(H<=M||ne<=Q)return!0;const pe=H-M,ke=ne-Q;return pe*pe+ke*ke<=f*f}}function sn(y,r,l,f,m){const v=u.F();return r?(u.J(v,v,[1/m,1/m,1]),l||u.ad(v,v,f.angle)):u.K(v,f.labelPlaneMatrix,y),v}function ki(y,r,l,f,m){if(r){const v=u.ae(y);return u.J(v,v,[m,m,1]),l||u.ad(v,v,-f.angle),v}return f.glCoordMatrix}function rr(y,r,l){let f;l?(f=[y.x,y.y,l(y.x,y.y),1],u.af(f,f,r)):(f=[y.x,y.y,0,1],Xt(f,f,r));const m=f[3];return{point:new u.P(f[0]/m,f[1]/m),signedDistanceFromCamera:m}}function Me(y,r){return .5+y/r*.5}function re(y,r){const l=y[0]/y[3],f=y[1]/y[3];return l>=-r[0]&&l<=r[0]&&f>=-r[1]&&f<=r[1]}function ue(y,r,l,f,m,v,I,P,M,H){const Q=f?y.textSizeData:y.iconSizeData,ne=u.ag(Q,l.transform.zoom),pe=[256/l.width*2+1,256/l.height*2+1],ke=f?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ke.clear();const Pe=y.lineVertexArray,Le=f?y.text.placedSymbolArray:y.icon.placedSymbolArray,Te=l.transform.width/l.transform.height;let Ze=!1;for(let rt=0;rt<Le.length;rt++){const je=Le.get(rt);if(je.hidden||je.writingMode===u.ah.vertical&&!Ze){pt(je.numGlyphs,ke);continue}let Ke;if(Ze=!1,H?(Ke=[je.anchorX,je.anchorY,H(je.anchorX,je.anchorY),1],u.af(Ke,Ke,r)):(Ke=[je.anchorX,je.anchorY,0,1],Xt(Ke,Ke,r)),!re(Ke,pe)){pt(je.numGlyphs,ke);continue}const it=Me(l.transform.cameraToCenterDistance,Ke[3]),st=u.ai(Q,ne,je),lt=I?st/it:st*it,bt=new u.P(je.anchorX,je.anchorY),xt=rr(bt,m,H).point,Tt={projections:{},offsets:{}},At=Ne(je,lt,!1,P,r,m,v,y.glyphOffsetArray,Pe,ke,xt,bt,Tt,Te,M,H);Ze=At.useVertical,(At.notEnoughRoom||Ze||At.needsFlipping&&Ne(je,lt,!0,P,r,m,v,y.glyphOffsetArray,Pe,ke,xt,bt,Tt,Te,M,H).notEnoughRoom)&&pt(je.numGlyphs,ke)}f?y.text.dynamicLayoutVertexBuffer.updateData(ke):y.icon.dynamicLayoutVertexBuffer.updateData(ke)}function me(y,r,l,f,m,v,I,P,M,H,Q,ne,pe){const ke=P.glyphStartIndex+P.numGlyphs,Pe=P.lineStartIndex,Le=P.lineStartIndex+P.lineLength,Te=r.getoffsetX(P.glyphStartIndex),Ze=r.getoffsetX(ke-1),rt=ft(y*Te,l,f,m,v,I,P.segment,Pe,Le,M,H,Q,ne,pe);if(!rt)return null;const je=ft(y*Ze,l,f,m,v,I,P.segment,Pe,Le,M,H,Q,ne,pe);return je?{first:rt,last:je}:null}function Ie(y,r,l,f){return y===u.ah.horizontal&&Math.abs(l.y-r.y)>Math.abs(l.x-r.x)*f?{useVertical:!0}:(y===u.ah.vertical?r.y<l.y:r.x>l.x)?{needsFlipping:!0}:null}function Ne(y,r,l,f,m,v,I,P,M,H,Q,ne,pe,ke,Pe,Le){const Te=r/24,Ze=y.lineOffsetX*Te,rt=y.lineOffsetY*Te;let je;if(y.numGlyphs>1){const Ke=y.glyphStartIndex+y.numGlyphs,it=y.lineStartIndex,st=y.lineStartIndex+y.lineLength,lt=me(Te,P,Ze,rt,l,Q,ne,y,M,v,pe,Pe,Le);if(!lt)return{notEnoughRoom:!0};const bt=rr(lt.first.point,I,Le).point,xt=rr(lt.last.point,I,Le).point;if(f&&!l){const Tt=Ie(y.writingMode,bt,xt,ke);if(Tt)return Tt}je=[lt.first];for(let Tt=y.glyphStartIndex+1;Tt<Ke-1;Tt++)je.push(ft(Te*P.getoffsetX(Tt),Ze,rt,l,Q,ne,y.segment,it,st,M,v,pe,Pe,Le));je.push(lt.last)}else{if(f&&!l){const it=rr(ne,m,Le).point,st=y.lineStartIndex+y.segment+1,lt=new u.P(M.getx(st),M.gety(st)),bt=rr(lt,m,Le),xt=bt.signedDistanceFromCamera>0?bt.point:Re(ne,lt,it,1,m,Le),Tt=Ie(y.writingMode,it,xt,ke);if(Tt)return Tt}const Ke=ft(Te*P.getoffsetX(y.glyphStartIndex),Ze,rt,l,Q,ne,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,M,v,pe,Pe,Le);if(!Ke)return{notEnoughRoom:!0};je=[Ke]}for(const Ke of je)u.aj(H,Ke.point,Ke.angle);return{}}function Re(y,r,l,f,m,v){const I=rr(y.add(y.sub(r)._unit()),m,v).point,P=l.sub(I);return l.add(P._mult(f/P.mag()))}function $e(y,r){const{projectionCache:l,lineVertexArray:f,labelPlaneMatrix:m,tileAnchorPoint:v,distanceFromAnchor:I,getElevation:P,previousVertex:M,direction:H,absOffsetX:Q}=r;if(l.projections[y])return l.projections[y];const ne=new u.P(f.getx(y),f.gety(y)),pe=rr(ne,m,P);if(pe.signedDistanceFromCamera>0)return l.projections[y]=pe.point,pe.point;const ke=y-H;return Re(I===0?v:new u.P(f.getx(ke),f.gety(ke)),ne,M,Q-I+1,m,P)}function Fe(y,r,l){return y._unit()._perp()._mult(r*l)}function Ye(y,r,l,f,m,v,I,P){const{projectionCache:M,direction:H}=P;if(M.offsets[y])return M.offsets[y];const Q=l.add(r);if(y+H<f||y+H>=m)return M.offsets[y]=Q,Q;const ne=$e(y+H,P),pe=Fe(ne.sub(l),I,H),ke=l.add(pe),Pe=ne.add(pe);return M.offsets[y]=u.ak(v,Q,ke,Pe)||Q,M.offsets[y]}function ft(y,r,l,f,m,v,I,P,M,H,Q,ne,pe,ke){const Pe=f?y-r:y+r;let Le=Pe>0?1:-1,Te=0;f&&(Le*=-1,Te=Math.PI),Le<0&&(Te+=Math.PI);let Ze,rt,je=Le>0?P+I:P+I+1,Ke=m,it=m,st=0,lt=0;const bt=Math.abs(Pe),xt=[];let Tt;for(;st+lt<=bt;){if(je+=Le,je<P||je>=M)return null;st+=lt,it=Ke,rt=Ze;const kt={projectionCache:ne,lineVertexArray:H,labelPlaneMatrix:Q,tileAnchorPoint:v,distanceFromAnchor:st,getElevation:ke,previousVertex:it,direction:Le,absOffsetX:bt};if(Ke=$e(je,kt),l===0)xt.push(it),Tt=Ke.sub(it);else{let nn;const vn=Ke.sub(it);nn=vn.mag()===0?Fe($e(je+Le,kt).sub(Ke),l,Le):Fe(vn,l,Le),rt||(rt=it.add(nn)),Ze=Ye(je,nn,Ke,P,M,rt,l,kt),xt.push(rt),Tt=Ze.sub(rt)}lt=Tt.mag()}const At=Tt._mult((bt-st)/lt)._add(rt||it),yn=Te+Math.atan2(Ke.y-it.y,Ke.x-it.x);return xt.push(At),{point:At,angle:pe?yn:0,path:xt}}const ht=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function pt(y,r){for(let l=0;l<y;l++){const f=r.length;r.resize(f+4),r.float32.set(ht,3*f)}}function Xt(y,r,l){const f=r[0],m=r[1];return y[0]=l[0]*f+l[4]*m+l[12],y[1]=l[1]*f+l[5]*m+l[13],y[3]=l[3]*f+l[7]*m+l[15],y}const Qt=100;class pn{constructor(r,l=new _n(r.width+200,r.height+200,25),f=new _n(r.width+200,r.height+200,25)){this.transform=r,this.grid=l,this.ignoredGrid=f,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Qt,this.screenBottomBoundary=r.height+Qt,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,l,f,m,v,I){const P=this.projectAndGetPerspectiveRatio(m,r.anchorPointX,r.anchorPointY,I),M=f*P.perspectiveRatio,H=r.x1*M+P.point.x,Q=r.y1*M+P.point.y,ne=r.x2*M+P.point.x,pe=r.y2*M+P.point.y;return!this.isInsideGrid(H,Q,ne,pe)||l!=="always"&&this.grid.hitTest(H,Q,ne,pe,l,v)||P.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[H,Q,ne,pe],offscreen:this.isOffscreen(H,Q,ne,pe)}}placeCollisionCircles(r,l,f,m,v,I,P,M,H,Q,ne,pe,ke,Pe){const Le=[],Te=new u.P(l.anchorX,l.anchorY),Ze=rr(Te,I,Pe),rt=Me(this.transform.cameraToCenterDistance,Ze.signedDistanceFromCamera),je=(Q?v/rt:v*rt)/u.ao,Ke=rr(Te,P,Pe).point,it=me(je,m,l.lineOffsetX*je,l.lineOffsetY*je,!1,Ke,Te,l,f,P,{projections:{},offsets:{}},!1,Pe);let st=!1,lt=!1,bt=!0;if(it){const xt=.5*pe*rt+ke,Tt=new u.P(-100,-100),At=new u.P(this.screenRightBoundary,this.screenBottomBoundary),yn=new jt,kt=it.first,nn=it.last;let vn=[];for(let xn=kt.path.length-1;xn>=1;xn--)vn.push(kt.path[xn]);for(let xn=1;xn<nn.path.length;xn++)vn.push(nn.path[xn]);const Rn=2.5*xt;if(M){const xn=vn.map(Tn=>rr(Tn,M,Pe));vn=xn.some(Tn=>Tn.signedDistanceFromCamera<=0)?[]:xn.map(Tn=>Tn.point)}let cn=[];if(vn.length>0){const xn=vn[0].clone(),Tn=vn[0].clone();for(let gr=1;gr<vn.length;gr++)xn.x=Math.min(xn.x,vn[gr].x),xn.y=Math.min(xn.y,vn[gr].y),Tn.x=Math.max(Tn.x,vn[gr].x),Tn.y=Math.max(Tn.y,vn[gr].y);cn=xn.x>=Tt.x&&Tn.x<=At.x&&xn.y>=Tt.y&&Tn.y<=At.y?[vn]:Tn.x<Tt.x||xn.x>At.x||Tn.y<Tt.y||xn.y>At.y?[]:u.al([vn],Tt.x,Tt.y,At.x,At.y)}for(const xn of cn){yn.reset(xn,.25*xt);let Tn=0;Tn=yn.length<=.5*xt?1:Math.ceil(yn.paddedLength/Rn)+1;for(let gr=0;gr<Tn;gr++){const Hn=gr/Math.max(Tn-1,1),qi=yn.lerp(Hn),$r=qi.x+Qt,hr=qi.y+Qt;Le.push($r,hr,xt,0);const Vr=$r-xt,Ki=hr-xt,ts=$r+xt,Zs=hr+xt;if(bt=bt&&this.isOffscreen(Vr,Ki,ts,Zs),lt=lt||this.isInsideGrid(Vr,Ki,ts,Zs),r!=="always"&&this.grid.hitTestCircle($r,hr,xt,r,ne)&&(st=!0,!H))return{circles:[],offscreen:!1,collisionDetected:st}}}}return{circles:!H&&st||!lt||rt<this.perspectiveRatioCutoff?[]:Le,offscreen:bt,collisionDetected:st}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let f=1/0,m=1/0,v=-1/0,I=-1/0;for(const Q of r){const ne=new u.P(Q.x+Qt,Q.y+Qt);f=Math.min(f,ne.x),m=Math.min(m,ne.y),v=Math.max(v,ne.x),I=Math.max(I,ne.y),l.push(ne)}const P=this.grid.query(f,m,v,I).concat(this.ignoredGrid.query(f,m,v,I)),M={},H={};for(const Q of P){const ne=Q.key;if(M[ne.bucketInstanceId]===void 0&&(M[ne.bucketInstanceId]={}),M[ne.bucketInstanceId][ne.featureIndex])continue;const pe=[new u.P(Q.x1,Q.y1),new u.P(Q.x2,Q.y1),new u.P(Q.x2,Q.y2),new u.P(Q.x1,Q.y2)];u.am(l,pe)&&(M[ne.bucketInstanceId][ne.featureIndex]=!0,H[ne.bucketInstanceId]===void 0&&(H[ne.bucketInstanceId]=[]),H[ne.bucketInstanceId].push(ne.featureIndex))}return H}insertCollisionBox(r,l,f,m,v,I){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:v,collisionGroupID:I,overlapMode:l},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,l,f,m,v,I){const P=f?this.ignoredGrid:this.grid,M={bucketInstanceId:m,featureIndex:v,collisionGroupID:I,overlapMode:l};for(let H=0;H<r.length;H+=4)P.insertCircle(M,r[H],r[H+1],r[H+2])}projectAndGetPerspectiveRatio(r,l,f,m){let v;return m?(v=[l,f,m(l,f),1],u.af(v,v,r)):(v=[l,f,0,1],Xt(v,v,r)),{point:new u.P((v[0]/v[3]+1)/2*this.transform.width+Qt,(-v[1]/v[3]+1)/2*this.transform.height+Qt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/v[3]*.5}}isOffscreen(r,l,f,m){return f<Qt||r>=this.screenRightBoundary||m<Qt||l>this.screenBottomBoundary}isInsideGrid(r,l,f,m){return f>=0&&r<this.gridRightBoundary&&m>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const r=u.an([]);return u.H(r,r,[-100,-100,0]),r}}function un(y,r,l){return r*(u.W/(y.tileSize*Math.pow(2,l-y.tileID.overscaledZ)))}class bn{constructor(r,l,f,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):m&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Dn{constructor(r,l,f,m,v){this.text=new bn(r?r.text:null,l,f,v),this.icon=new bn(r?r.icon:null,l,m,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Wn{constructor(r,l,f){this.text=r,this.icon=l,this.skipFade=f}}class ur{constructor(){this.invProjMatrix=u.F(),this.viewportMatrix=u.F(),this.circles=[]}}class hn{constructor(r,l,f,m,v){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=f,this.bucketIndex=m,this.tileID=v}}class ir{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:f=>f.collisionGroupID===l}}return this.collisionGroups[r]}}function Er(y,r,l,f,m){const{horizontalAlign:v,verticalAlign:I}=u.at(y);return new u.P(-(v-.5)*r+f[0]*m,-(I-.5)*l+f[1]*m)}function ni(y,r,l,f,m,v){const{x1:I,x2:P,y1:M,y2:H,anchorPointX:Q,anchorPointY:ne}=y,pe=new u.P(r,l);return f&&pe._rotate(m?v:-v),{x1:I+pe.x,y1:M+pe.y,x2:P+pe.x,y2:H+pe.y,anchorPointX:Q,anchorPointY:ne}}class li{constructor(r,l,f,m,v){this.transform=r.clone(),this.terrain=l,this.collisionIndex=new pn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new ir(m),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,l,f,m){const v=f.getBucket(l),I=f.latestFeatureIndex;if(!v||!I||l.id!==v.layerIds[0])return;const P=f.collisionBoxArray,M=v.layers[0].layout,H=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),Q=f.tileSize/u.W,ne=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),pe=M.get("text-pitch-alignment")==="map",ke=M.get("text-rotation-alignment")==="map",Pe=un(f,1,this.transform.zoom),Le=sn(ne,pe,ke,this.transform,Pe);let Te=null;if(pe){const rt=ki(ne,pe,ke,this.transform,Pe);Te=u.K([],this.transform.labelPlaneMatrix,rt)}this.retainedQueryData[v.bucketInstanceId]=new hn(v.bucketInstanceId,I,v.sourceLayerIndex,v.index,f.tileID);const Ze={bucket:v,layout:M,posMatrix:ne,textLabelPlaneMatrix:Le,labelToScreenMatrix:Te,scale:H,textPixelRatio:Q,holdingForFade:f.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:u.ag(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(m)for(const rt of v.sortKeyRanges){const{sortKey:je,symbolInstanceStart:Ke,symbolInstanceEnd:it}=rt;r.push({sortKey:je,symbolInstanceStart:Ke,symbolInstanceEnd:it,parameters:Ze})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:Ze})}attemptAnchorPlacement(r,l,f,m,v,I,P,M,H,Q,ne,pe,ke,Pe,Le,Te){const Ze=u.ap[r.textAnchor],rt=[r.textOffset0,r.textOffset1],je=Er(Ze,f,m,rt,v),Ke=this.collisionIndex.placeCollisionBox(ni(l,je.x,je.y,I,P,this.transform.angle),ne,M,H,Q.predicate,Te);if((!Le||this.collisionIndex.placeCollisionBox(ni(Le,je.x,je.y,I,P,this.transform.angle),ne,M,H,Q.predicate,Te).box.length!==0)&&Ke.box.length>0){let it;if(this.prevPlacement&&this.prevPlacement.variableOffsets[pe.crossTileID]&&this.prevPlacement.placements[pe.crossTileID]&&this.prevPlacement.placements[pe.crossTileID].text&&(it=this.prevPlacement.variableOffsets[pe.crossTileID].anchor),pe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[pe.crossTileID]={textOffset:rt,width:f,height:m,anchor:Ze,textBoxScale:v,prevAnchor:it},this.markUsedJustification(ke,Ze,pe,Pe),ke.allowVerticalPlacement&&(this.markUsedOrientation(ke,Pe,pe),this.placedOrientations[pe.crossTileID]=Pe),{shift:je,placedGlyphBoxes:Ke}}}placeLayerBucketPart(r,l,f){const{bucket:m,layout:v,posMatrix:I,textLabelPlaneMatrix:P,labelToScreenMatrix:M,textPixelRatio:H,holdingForFade:Q,collisionBoxArray:ne,partiallyEvaluatedTextSize:pe,collisionGroup:ke}=r.parameters,Pe=v.get("text-optional"),Le=v.get("icon-optional"),Te=u.aq(v,"text-overlap","text-allow-overlap"),Ze=Te==="always",rt=u.aq(v,"icon-overlap","icon-allow-overlap"),je=rt==="always",Ke=v.get("text-rotation-alignment")==="map",it=v.get("text-pitch-alignment")==="map",st=v.get("icon-text-fit")!=="none",lt=v.get("symbol-z-order")==="viewport-y",bt=Ze&&(je||!m.hasIconData()||Le),xt=je&&(Ze||!m.hasTextData()||Pe);!m.collisionArrays&&ne&&m.deserializeCollisionBoxes(ne);const Tt=this.retainedQueryData[m.bucketInstanceId].tileID,At=this.terrain?(kt,nn)=>this.terrain.getElevation(Tt,kt,nn):null,yn=(kt,nn)=>{var vn,Rn;if(l[kt.crossTileID])return;if(Q)return void(this.placements[kt.crossTileID]=new Wn(!1,!1,!1));let cn=!1,xn=!1,Tn=!0,gr=null,Hn={box:null,offscreen:null},qi={box:null,offscreen:null},$r=null,hr=null,Vr=null,Ki=0,ts=0,Zs=0;nn.textFeatureIndex?Ki=nn.textFeatureIndex:kt.useRuntimeCollisionCircles&&(Ki=kt.featureIndex),nn.verticalTextFeatureIndex&&(ts=nn.verticalTextFeatureIndex);const zu=nn.textBox;if(zu){const Or=Lr=>{let fr=u.ah.horizontal;if(m.allowVerticalPlacement&&!Lr&&this.prevPlacement){const go=this.prevPlacement.placedOrientations[kt.crossTileID];go&&(this.placedOrientations[kt.crossTileID]=go,fr=go,this.markUsedOrientation(m,fr,kt))}return fr},dr=(Lr,fr)=>{if(m.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&nn.verticalTextBox){for(const go of m.writingModes)if(go===u.ah.vertical?(Hn=fr(),qi=Hn):Hn=Lr(),Hn&&Hn.box&&Hn.box.length)break}else Hn=Lr()},sr=kt.textAnchorOffsetStartIndex,mo=kt.textAnchorOffsetEndIndex;if(mo===sr){const Lr=(fr,go)=>{const Fr=this.collisionIndex.placeCollisionBox(fr,Te,H,I,ke.predicate,At);return Fr&&Fr.box&&Fr.box.length&&(this.markUsedOrientation(m,go,kt),this.placedOrientations[kt.crossTileID]=go),Fr};dr(()=>Lr(zu,u.ah.horizontal),()=>{const fr=nn.verticalTextBox;return m.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&fr?Lr(fr,u.ah.vertical):{box:null,offscreen:null}}),Or(Hn&&Hn.box&&Hn.box.length)}else{let Lr=u.ap[(Rn=(vn=this.prevPlacement)===null||vn===void 0?void 0:vn.variableOffsets[kt.crossTileID])===null||Rn===void 0?void 0:Rn.anchor];const fr=(Fr,br,sd)=>{const hp=Fr.x2-Fr.x1,ka=Fr.y2-Fr.y1,Ma=kt.textBoxScale,Mc=st&&rt==="never"?br:null;let qs={box:[],offscreen:!1},ad=Te==="never"?1:2,dp="never";Lr&&ad++;for(let ld=0;ld<ad;ld++){for(let ud=sr;ud<mo;ud++){const zc=m.textAnchorOffsets.get(ud);if(Lr&&zc.textAnchor!==Lr)continue;const cd=this.attemptAnchorPlacement(zc,Fr,hp,ka,Ma,Ke,it,H,I,ke,dp,kt,m,sd,Mc,At);if(cd&&(qs=cd.placedGlyphBoxes,qs&&qs.box&&qs.box.length))return cn=!0,gr=cd.shift,qs}Lr?Lr=null:dp=Te}return qs};dr(()=>fr(zu,nn.iconBox,u.ah.horizontal),()=>{const Fr=nn.verticalTextBox;return m.allowVerticalPlacement&&!(Hn&&Hn.box&&Hn.box.length)&&kt.numVerticalGlyphVertices>0&&Fr?fr(Fr,nn.verticalIconBox,u.ah.vertical):{box:null,offscreen:null}}),Hn&&(cn=Hn.box,Tn=Hn.offscreen);const go=Or(Hn&&Hn.box);if(!cn&&this.prevPlacement){const Fr=this.prevPlacement.variableOffsets[kt.crossTileID];Fr&&(this.variableOffsets[kt.crossTileID]=Fr,this.markUsedJustification(m,Fr.anchor,kt,go))}}}if($r=Hn,cn=$r&&$r.box&&$r.box.length>0,Tn=$r&&$r.offscreen,kt.useRuntimeCollisionCircles){const Or=m.text.placedSymbolArray.get(kt.centerJustifiedTextSymbolIndex),dr=u.ai(m.textSizeData,pe,Or),sr=v.get("text-padding");hr=this.collisionIndex.placeCollisionCircles(Te,Or,m.lineVertexArray,m.glyphOffsetArray,dr,I,P,M,f,it,ke.predicate,kt.collisionCircleDiameter,sr,At),hr.circles.length&&hr.collisionDetected&&!f&&u.w("Collisions detected, but collision boxes are not shown"),cn=Ze||hr.circles.length>0&&!hr.collisionDetected,Tn=Tn&&hr.offscreen}if(nn.iconFeatureIndex&&(Zs=nn.iconFeatureIndex),nn.iconBox){const Or=dr=>{const sr=st&&gr?ni(dr,gr.x,gr.y,Ke,it,this.transform.angle):dr;return this.collisionIndex.placeCollisionBox(sr,rt,H,I,ke.predicate,At)};qi&&qi.box&&qi.box.length&&nn.verticalIconBox?(Vr=Or(nn.verticalIconBox),xn=Vr.box.length>0):(Vr=Or(nn.iconBox),xn=Vr.box.length>0),Tn=Tn&&Vr.offscreen}const Xs=Pe||kt.numHorizontalGlyphVertices===0&&kt.numVerticalGlyphVertices===0,ns=Le||kt.numIconVertices===0;if(Xs||ns?ns?Xs||(xn=xn&&cn):cn=xn&&cn:xn=cn=xn&&cn,cn&&$r&&$r.box&&this.collisionIndex.insertCollisionBox($r.box,Te,v.get("text-ignore-placement"),m.bucketInstanceId,qi&&qi.box&&ts?ts:Ki,ke.ID),xn&&Vr&&this.collisionIndex.insertCollisionBox(Vr.box,rt,v.get("icon-ignore-placement"),m.bucketInstanceId,Zs,ke.ID),hr&&(cn&&this.collisionIndex.insertCollisionCircles(hr.circles,Te,v.get("text-ignore-placement"),m.bucketInstanceId,Ki,ke.ID),f)){const Or=m.bucketInstanceId;let dr=this.collisionCircleArrays[Or];dr===void 0&&(dr=this.collisionCircleArrays[Or]=new ur);for(let sr=0;sr<hr.circles.length;sr+=4)dr.circles.push(hr.circles[sr+0]),dr.circles.push(hr.circles[sr+1]),dr.circles.push(hr.circles[sr+2]),dr.circles.push(hr.collisionDetected?1:0)}if(kt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[kt.crossTileID]=new Wn(cn||bt,xn||xt,Tn||m.justReloaded),l[kt.crossTileID]=!0};if(lt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const kt=m.getSortedSymbolIndexes(this.transform.angle);for(let nn=kt.length-1;nn>=0;--nn){const vn=kt[nn];yn(m.symbolInstances.get(vn),m.collisionArrays[vn])}}else for(let kt=r.symbolInstanceStart;kt<r.symbolInstanceEnd;kt++)yn(m.symbolInstances.get(kt),m.collisionArrays[kt]);if(f&&m.bucketInstanceId in this.collisionCircleArrays){const kt=this.collisionCircleArrays[m.bucketInstanceId];u.ar(kt.invProjMatrix,I),kt.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(r,l,f,m){let v;v=m===u.ah.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[u.as(l)];const I=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const P of I)P>=0&&(r.text.placedSymbolArray.get(P).crossTileID=v>=0&&P!==v?0:f.crossTileID)}markUsedOrientation(r,l,f){const m=l===u.ah.horizontal||l===u.ah.horizontalOnly?l:0,v=l===u.ah.vertical?l:0,I=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const P of I)r.text.placedSymbolArray.get(P).placedOrientation=m;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let f=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const m=l?l.symbolFadeChange(r):1,v=l?l.opacities:{},I=l?l.variableOffsets:{},P=l?l.placedOrientations:{};for(const M in this.placements){const H=this.placements[M],Q=v[M];Q?(this.opacities[M]=new Dn(Q,m,H.text,H.icon),f=f||H.text!==Q.text.placed||H.icon!==Q.icon.placed):(this.opacities[M]=new Dn(null,m,H.text,H.icon,H.skipFade),f=f||H.text||H.icon)}for(const M in v){const H=v[M];if(!this.opacities[M]){const Q=new Dn(H,m,!1,!1);Q.isHidden()||(this.opacities[M]=Q,f=f||H.text.placed||H.icon.placed)}}for(const M in I)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=I[M]);for(const M in P)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=P[M]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)}updateLayerOpacities(r,l){const f={};for(const m of l){const v=m.getBucket(r);v&&m.latestFeatureIndex&&r.id===v.layerIds[0]&&this.updateBucketOpacities(v,f,m.collisionBoxArray)}}updateBucketOpacities(r,l,f){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const m=r.layers[0],v=m.layout,I=new Dn(null,0,!1,!1,!0),P=v.get("text-allow-overlap"),M=v.get("icon-allow-overlap"),H=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Q=v.get("text-rotation-alignment")==="map",ne=v.get("text-pitch-alignment")==="map",pe=v.get("icon-text-fit")!=="none",ke=new Dn(null,0,P&&(M||!r.hasIconData()||v.get("icon-optional")),M&&(P||!r.hasTextData()||v.get("text-optional")),!0);!r.collisionArrays&&f&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(f);const Pe=(Le,Te,Ze)=>{for(let rt=0;rt<Te/4;rt++)Le.opacityVertexArray.emplaceBack(Ze);Le.hasVisibleVertices=Le.hasVisibleVertices||Ze!==da};for(let Le=0;Le<r.symbolInstances.length;Le++){const Te=r.symbolInstances.get(Le),{numHorizontalGlyphVertices:Ze,numVerticalGlyphVertices:rt,crossTileID:je}=Te;let Ke=this.opacities[je];l[je]?Ke=I:Ke||(Ke=ke,this.opacities[je]=Ke),l[je]=!0;const it=Te.numIconVertices>0,st=this.placedOrientations[Te.crossTileID],lt=st===u.ah.vertical,bt=st===u.ah.horizontal||st===u.ah.horizontalOnly;if(Ze>0||rt>0){const xt=ui(Ke.text);Pe(r.text,Ze,lt?da:xt),Pe(r.text,rt,bt?da:xt);const Tt=Ke.text.isHidden();[Te.rightJustifiedTextSymbolIndex,Te.centerJustifiedTextSymbolIndex,Te.leftJustifiedTextSymbolIndex].forEach(kt=>{kt>=0&&(r.text.placedSymbolArray.get(kt).hidden=Tt||lt?1:0)}),Te.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Te.verticalPlacedTextSymbolIndex).hidden=Tt||bt?1:0);const At=this.variableOffsets[Te.crossTileID];At&&this.markUsedJustification(r,At.anchor,Te,st);const yn=this.placedOrientations[Te.crossTileID];yn&&(this.markUsedJustification(r,"left",Te,yn),this.markUsedOrientation(r,yn,Te))}if(it){const xt=ui(Ke.icon),Tt=!(pe&&Te.verticalPlacedIconSymbolIndex&&lt);Te.placedIconSymbolIndex>=0&&(Pe(r.icon,Te.numIconVertices,Tt?xt:da),r.icon.placedSymbolArray.get(Te.placedIconSymbolIndex).hidden=Ke.icon.isHidden()),Te.verticalPlacedIconSymbolIndex>=0&&(Pe(r.icon,Te.numVerticalIconVertices,Tt?da:xt),r.icon.placedSymbolArray.get(Te.verticalPlacedIconSymbolIndex).hidden=Ke.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const xt=r.collisionArrays[Le];if(xt){let Tt=new u.P(0,0);if(xt.textBox||xt.verticalTextBox){let yn=!0;if(H){const kt=this.variableOffsets[je];kt?(Tt=Er(kt.anchor,kt.width,kt.height,kt.textOffset,kt.textBoxScale),Q&&Tt._rotate(ne?this.transform.angle:-this.transform.angle)):yn=!1}xt.textBox&&zr(r.textCollisionBox.collisionVertexArray,Ke.text.placed,!yn||lt,Tt.x,Tt.y),xt.verticalTextBox&&zr(r.textCollisionBox.collisionVertexArray,Ke.text.placed,!yn||bt,Tt.x,Tt.y)}const At=!!(!bt&&xt.verticalIconBox);xt.iconBox&&zr(r.iconCollisionBox.collisionVertexArray,Ke.icon.placed,At,pe?Tt.x:0,pe?Tt.y:0),xt.verticalIconBox&&zr(r.iconCollisionBox.collisionVertexArray,Ke.icon.placed,!At,pe?Tt.x:0,pe?Tt.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Le=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Le.invProjMatrix,r.placementViewportMatrix=Le.viewportMatrix,r.collisionCircleArray=Le.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,l){const f=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function zr(y,r,l,f,m){y.emplaceBack(r?1:0,l?1:0,f||0,m||0),y.emplaceBack(r?1:0,l?1:0,f||0,m||0),y.emplaceBack(r?1:0,l?1:0,f||0,m||0),y.emplaceBack(r?1:0,l?1:0,f||0,m||0)}const ho=Math.pow(2,25),ca=Math.pow(2,24),ha=Math.pow(2,17),Bn=Math.pow(2,16),Pn=Math.pow(2,9),Eo=Math.pow(2,8),vi=Math.pow(2,1);function ui(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const r=y.placed?1:0,l=Math.floor(127*y.opacity);return l*ho+r*ca+l*ha+r*Bn+l*Pn+r*Eo+l*vi+r}const da=0;class Mi{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,l,f,m,v){const I=this._bucketParts;for(;this._currentTileIndex<r.length;)if(l.getBucketParts(I,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((P,M)=>P.sortKey-M.sortKey));this._currentPartIndex<I.length;)if(l.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,v())return!0;return!1}}class zi{constructor(r,l,f,m,v,I,P,M){this.placement=new li(r,l,I,P,M),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(r,l,f){const m=w.now(),v=()=>!this._forceFullPlacement&&w.now()-m>2;for(;this._currentPlacementIndex>=0;){const I=l[r[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=P)&&(!I.maxzoom||I.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new Mi(I)),this._inProgressLayer.continuePlacement(f[I.source],this.placement,this._showCollisionBoxes,I,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const ci=512/u.W/2;class el{constructor(r,l,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const m=new Map;for(let v=0;v<l.length;v++){const I=l.get(v),P=I.key,M=m.get(P);M?M.push(I):m.set(P,[I])}for(const[v,I]of m){const P={positions:I.map(M=>({x:Math.floor(M.anchorX*ci),y:Math.floor(M.anchorY*ci)})),crossTileIDs:I.map(M=>M.crossTileID)};if(P.positions.length>128){const M=new u.au(P.positions.length,16,Uint16Array);for(const{x:H,y:Q}of P.positions)M.add(H,Q);M.finish(),delete P.positions,P.index=M}this._symbolsByKey[v]=P}}getScaledCoordinates(r,l){const{x:f,y:m,z:v}=this.tileID.canonical,{x:I,y:P,z:M}=l.canonical,H=ci/Math.pow(2,M-v),Q=(P*u.W+r.anchorY)*H,ne=m*u.W*ci;return{x:Math.floor((I*u.W+r.anchorX)*H-f*u.W*ci),y:Math.floor(Q-ne)}}findMatches(r,l,f){const m=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let v=0;v<r.length;v++){const I=r.get(v);if(I.crossTileID)continue;const P=this._symbolsByKey[I.key];if(!P)continue;const M=this.getScaledCoordinates(I,l);if(P.index){const H=P.index.range(M.x-m,M.y-m,M.x+m,M.y+m).sort();for(const Q of H){const ne=P.crossTileIDs[Q];if(!f[ne]){f[ne]=!0,I.crossTileID=ne;break}}}else if(P.positions)for(let H=0;H<P.positions.length;H++){const Q=P.positions[H],ne=P.crossTileIDs[H];if(Math.abs(Q.x-M.x)<=m&&Math.abs(Q.y-M.y)<=m&&!f[ne]){f[ne]=!0,I.crossTileID=ne;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class wr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class fa{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const l=Math.round((r-this.lng)/360);if(l!==0)for(const f in this.indexes){const m=this.indexes[f],v={};for(const I in m){const P=m[I];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+l),v[P.tileID.key]=P}this.indexes[f]=v}this.lng=r}addBucket(r,l,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let v=0;v<l.symbolInstances.length;v++)l.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const v in this.indexes){const I=this.indexes[v];if(Number(v)>r.overscaledZ)for(const P in I){const M=I[P];M.tileID.isChildOf(r)&&M.findMatches(l.symbolInstances,r,m)}else{const P=I[r.scaledTo(Number(v)).key];P&&P.findMatches(l.symbolInstances,r,m)}}for(let v=0;v<l.symbolInstances.length;v++){const I=l.symbolInstances.get(v);I.crossTileID||(I.crossTileID=f.generate(),m[I.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new el(r,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(r,l){for(const f of l.getCrossTileIDsLists())for(const m of f)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let l=!1;for(const f in this.indexes){const m=this.indexes[f];for(const v in m)r[m[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,m[v]),delete m[v],l=!0)}return l}}class Xo{constructor(){this.layerIndexes={},this.crossTileIDs=new wr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,l,f){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new fa);let v=!1;const I={};m.handleWrapJump(f);for(const P of l){const M=P.getBucket(r);M&&r.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(P.tileID,M,this.crossTileIDs)&&(v=!0),I[M.bucketInstanceId]=!0)}return m.removeStaleBuckets(I)&&(v=!0),v}pruneUnusedLayers(r){const l={};r.forEach(f=>{l[f]=!0});for(const f in this.layerIndexes)l[f]||delete this.layerIndexes[f]}}const Qn=(y,r)=>u.t(y,r&&r.filter(l=>l.identifier!=="source.canvas")),Ri=u.av();class _i extends u.E{constructor(r,l={}){super(),this._rtlPluginLoaded=()=>{for(const f in this.sourceCaches){const m=this.sourceCaches[f].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[f].reload()}},this.map=r,this.dispatcher=new dt(nt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,m)=>this.getGlyphs(f,m)),this.dispatcher.registerMessageHandler("GI",(f,m)=>this.getImages(f,m)),this.imageManager=new _e,this.imageManager.setEventedParent(this),this.glyphManager=new J(r._requestManager,l.localIdeographFontFamily),this.lineAtlas=new Ee(256,512),this.crossTileSymbolIndex=new Xo,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ax()),z().on(ct,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const m=this.sourceCaches[f.sourceId];if(!m)return;const v=m.getSource();if(v&&v.vectorLayerIds)for(const I in this._layers){const P=this._layers[I];P.source===v.id&&this._validateLayer(P)}})}loadURL(r,l={},f){this.fire(new u.k("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const m=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController,u.h(m,this._loadStyleRequest).then(v=>{this._loadStyleRequest=null,this._load(v.data,l,f)}).catch(v=>{this._loadStyleRequest=null,v&&this.fire(new u.j(v))})}loadJSON(r,l={},f){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(r,l,f)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Ri,{validate:!1})}_load(r,l,f){var m;const v=l.transformStyle?l.transformStyle(f,r):r;if(!l.validate||!Qn(this,u.x(v))){this._loaded=!0,this.stylesheet=v;for(const I in v.sources)this.addSource(I,v.sources[I],{validate:!1});v.sprite?this._loadSprite(v.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(v.glyphs),this._createLayers(),this.light=new be(this.stylesheet.light),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.ay(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(l=>l.id),this._layers={},this._serializedLayers=null;for(const l of r){const f=u.az(l);f.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=f}}_loadSprite(r,l=!1,f=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,I,P,M){return u._(this,void 0,void 0,function*(){const H=ee(v),Q=P>1?"@2x":"",ne={},pe={};for(const{id:ke,url:Pe}of H){const Le=I.transformRequest(I.normalizeSpriteURL(Pe,Q,".json"),"SpriteJSON");ne[ke]=u.h(Le,M);const Te=I.transformRequest(I.normalizeSpriteURL(Pe,Q,".png"),"SpriteImage");pe[ke]=$.getImage(Te,M)}return yield Promise.all([...Object.values(ne),...Object.values(pe)]),function(ke,Pe){return u._(this,void 0,void 0,function*(){const Le={};for(const Te in ke){Le[Te]={};const Ze=w.getImageCanvasContext((yield Pe[Te]).data),rt=(yield ke[Te]).data;for(const je in rt){const{width:Ke,height:it,x:st,y:lt,sdf:bt,pixelRatio:xt,stretchX:Tt,stretchY:At,content:yn}=rt[je];Le[Te][je]={data:null,pixelRatio:xt,sdf:bt,stretchX:Tt,stretchY:At,content:yn,spriteData:{width:Ke,height:it,x:st,y:lt,context:Ze}}}}return Le})}(ne,pe)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(const I in v){this._spritesImagesIds[I]=[];const P=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter(M=>!(M in v)):[];for(const M of P)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in v[I]){const H=I==="default"?M:`${I}:${M}`;this._spritesImagesIds[I].push(H),H in this.imageManager.images?this.imageManager.updateImage(H,v[I][M],!1):this.imageManager.addImage(H,v[I][M]),l&&(this._changedImages[H]=!0)}}}).catch(v=>{this._spriteRequest=null,m=v,this.fire(new u.j(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),f&&f(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const l=this.sourceCaches[r.source];if(!l)return;const f=r.sourceLayer;if(!f)return;const m=l.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(f)===-1)&&this.fire(new u.j(new Error(`Source layer "${f}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const l=this._serializedAllLayers();if(!r||r.length===0)return Object.values(l);const f=[];for(const m of r)l[m]&&f.push(l[m]);return f}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const l=Object.keys(this._layers);for(const f of l){const m=this._layers[f];m.type!=="custom"&&(r[f]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const l=this._changed;if(l){const m=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(m.length||v.length)&&this._updateWorkerLayers(m,v);for(const I in this._updatedSources){const P=this._updatedSources[I];if(P==="reload")this._reloadSource(I);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const f={};for(const m in this.sourceCaches){const v=this.sourceCaches[m];f[m]=v.used,v.used=!1}for(const m of this._order){const v=this._layers[m];v.recalculate(r,this._availableImages),!v.isHidden(r.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const m in f){const v=this.sourceCaches[m];!!f[m]!=!!v.used&&v.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.z=r.zoom,l&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,l={}){var f;this._checkLoaded();const m=this.serialize();if(r=l.transformStyle?l.transformStyle(m,r):r,((f=l.validate)===null||f===void 0||f)&&Qn(this,u.x(r)))return!1;(r=u.aA(r)).layers=u.ay(r.layers);const v=u.aB(m,r),I=this._getOperationsToPerform(v);if(I.unimplemented.length>0)throw new Error(`Unimplemented: ${I.unimplemented.join(", ")}.`);if(I.operations.length===0)return!1;for(const P of I.operations)P();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const l=[],f=[];for(const m of r)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":l.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":l.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,m.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setTransition":l.push(()=>{});break;default:f.push(m.command)}return{operations:l,unimplemented:f}}addImage(r,l){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,l),this._afterImageUpdated(r)}updateImage(r,l){this.imageManager.updateImage(r,l)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,l,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(u.x.source,`sources.${r}`,l,null,f))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const m=this.sourceCaches[r]=new ot(r,l,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const l=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],l.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,l){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(l),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,l,f={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new u.j(new Error(`Layer "${m}" already exists on this map.`)));let v;if(r.type==="custom"){if(Qn(this,u.aC(r)))return;v=u.az(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=u.aA(r),r=u.e(r,{source:m})),this._validate(u.x.layer,`layers.${m}`,r,{arrayIndex:-1},f))return;v=u.az(r),this._validateLayer(v),v.setEventedParent(this,{layer:{id:m}})}const I=l?this._order.indexOf(l):this._order.length;if(l&&I===-1)this.fire(new u.j(new Error(`Cannot add layer "${m}" before non-existing layer "${l}".`)));else{if(this._order.splice(I,0,m),this._layerOrderChanged=!0,this._layers[m]=v,this._removedLayers[m]&&v.source&&v.type!=="custom"){const P=this._removedLayers[m];delete this._removedLayers[m],P.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(r,l){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===l)return;const f=this._order.indexOf(r);this._order.splice(f,1);const m=l?this._order.indexOf(l):this._order.length;l&&m===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${l}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const l=this._layers[r];if(!l)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));l.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,l,f){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===l&&m.maxzoom===f||(l!=null&&(m.minzoom=l),f!=null&&(m.maxzoom=f),this._updateLayer(m)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,l,f={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!u.aD(m.filter,l))return l==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(u.x.filter,`layers.${m.id}.filter`,l,null,f)||(m.filter=u.aA(l),this._updateLayer(m)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aA(this.getLayer(r).filter)}setLayoutProperty(r,l,f,m={}){this._checkLoaded();const v=this.getLayer(r);v?u.aD(v.getLayoutProperty(l),f)||(v.setLayoutProperty(l,f,m),this._updateLayer(v)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,l){const f=this.getLayer(r);if(f)return f.getLayoutProperty(l);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,l,f,m={}){this._checkLoaded();const v=this.getLayer(r);v?u.aD(v.getPaintProperty(l),f)||(v.setPaintProperty(l,f,m)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,l){return this.getLayer(r).getPaintProperty(l)}setFeatureState(r,l){this._checkLoaded();const f=r.source,m=r.sourceLayer,v=this.sourceCaches[f];if(v===void 0)return void this.fire(new u.j(new Error(`The source '${f}' does not exist in the map's style.`)));const I=v.getSource().type;I==="geojson"&&m?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||m?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),v.setFeatureState(m,r.id,l)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,l){this._checkLoaded();const f=r.source,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new u.j(new Error(`The source '${f}' does not exist in the map's style.`)));const v=m.getSource().type,I=v==="vector"?r.sourceLayer:void 0;v!=="vector"||I?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(I,r.id,l):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const l=r.source,f=r.sourceLayer,m=this.sourceCaches[l];if(m!==void 0)return m.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(f,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aE(this.sourceCaches,v=>v.serialize()),l=this._serializeByIds(this._order),f=this.map.getTerrain()||void 0,m=this.stylesheet;return u.aF({version:m.version,name:m.name,metadata:m.metadata,light:m.light,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:r,layers:l,terrain:f},v=>v!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const l=I=>this._layers[I].type==="fill-extrusion",f={},m=[];for(let I=this._order.length-1;I>=0;I--){const P=this._order[I];if(l(P)){f[P]=I;for(const M of r){const H=M[P];if(H)for(const Q of H)m.push(Q)}}}m.sort((I,P)=>P.intersectionZ-I.intersectionZ);const v=[];for(let I=this._order.length-1;I>=0;I--){const P=this._order[I];if(l(P))for(let M=m.length-1;M>=0;M--){const H=m[M].feature;if(f[H.layer.id]<I)break;v.push(H),m.pop()}else for(const M of r){const H=M[P];if(H)for(const Q of H)v.push(Q.feature)}}return v}queryRenderedFeatures(r,l,f){l&&l.filter&&this._validate(u.x.filter,"queryRenderedFeatures.filter",l.filter,null,l);const m={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const P of l.layers){const M=this._layers[P];if(!M)return this.fire(new u.j(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];m[M.source]=!0}}const v=[];l.availableImages=this._availableImages;const I=this._serializedAllLayers();for(const P in this.sourceCaches)l.layers&&!m[P]||v.push(gt(this.sourceCaches[P],this._layers,I,r,l,f));return this.placement&&v.push(function(P,M,H,Q,ne,pe,ke){const Pe={},Le=pe.queryRenderedSymbols(Q),Te=[];for(const Ze of Object.keys(Le).map(Number))Te.push(ke[Ze]);Te.sort(St);for(const Ze of Te){const rt=Ze.featureIndex.lookupSymbolFeatures(Le[Ze.bucketInstanceId],M,Ze.bucketIndex,Ze.sourceLayerIndex,ne.filter,ne.layers,ne.availableImages,P);for(const je in rt){const Ke=Pe[je]=Pe[je]||[],it=rt[je];it.sort((st,lt)=>{const bt=Ze.featureSortOrder;if(bt){const xt=bt.indexOf(st.featureIndex);return bt.indexOf(lt.featureIndex)-xt}return lt.featureIndex-st.featureIndex});for(const st of it)Ke.push(st)}}for(const Ze in Pe)Pe[Ze].forEach(rt=>{const je=rt.feature,Ke=H[P[Ze].source].getFeatureState(je.layer["source-layer"],je.id);je.source=je.layer.source,je.layer["source-layer"]&&(je.sourceLayer=je.layer["source-layer"]),je.state=Ke});return Pe}(this._layers,I,this.sourceCaches,r,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(r,l){l&&l.filter&&this._validate(u.x.filter,"querySourceFeatures.filter",l.filter,null,l);const f=this.sourceCaches[r];return f?function(m,v){const I=m.getRenderableIds().map(H=>m.getTileByID(H)),P=[],M={};for(let H=0;H<I.length;H++){const Q=I[H],ne=Q.tileID.canonical.key;M[ne]||(M[ne]=!0,Q.querySourceFeatures(P,v))}return P}(f,l):[]}getLight(){return this.light.getLight()}setLight(r,l={}){this._checkLoaded();const f=this.light.getLight();let m=!1;for(const I in r)if(!u.aD(r[I],f[I])){m=!0;break}if(!m)return;const v={now:w.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(v)}_validate(r,l,f,m,v={}){return(!v||v.validate!==!1)&&Qn(this,r.call(u.x,u.e({key:l,style:this.serialize(),value:f,styleSpec:u.v},m)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),z().off(ct,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const f=this.sourceCaches[l];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const l in this.sourceCaches)this.sourceCaches[l].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,l,f,m,v=!1){let I=!1,P=!1;const M={};for(const H of this._order){const Q=this._layers[H];if(Q.type!=="symbol")continue;if(!M[Q.source]){const pe=this.sourceCaches[Q.source];M[Q.source]=pe.getRenderableIds(!0).map(ke=>pe.getTileByID(ke)).sort((ke,Pe)=>Pe.tileID.overscaledZ-ke.tileID.overscaledZ||(ke.tileID.isLessThan(Pe.tileID)?-1:1))}const ne=this.crossTileSymbolIndex.addLayer(Q,M[Q.source],r.center.lng);I=I||ne}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(w.now(),r.zoom))&&(this.pauseablePlacement=new zi(r,this.map.terrain,this._order,v,l,f,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(w.now()),P=!0),I&&this.pauseablePlacement.placement.setStale()),P||I)for(const H of this._order){const Q=this._layers[H];Q.type==="symbol"&&this.placement.updateLayerOpacities(Q,M[Q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(w.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,l){return u._(this,void 0,void 0,function*(){const f=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[l.source];return m&&m.setDependencies(l.tileID.key,l.type,l.icons),f})}getGlyphs(r,l){return u._(this,void 0,void 0,function*(){const f=yield this.glyphManager.getGlyphs(l.stacks),m=this.sourceCaches[l.source];return m&&m.setDependencies(l.tileID.key,l.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,l={}){this._checkLoaded(),r&&this._validate(u.x.glyphs,"glyphs",r,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,l,f={},m){this._checkLoaded();const v=[{id:r,url:l}],I=[...ee(this.stylesheet.sprite),...v];this._validate(u.x.sprite,"sprite",I,null,f)||(this.stylesheet.sprite=I,this._loadSprite(v,!0,m))}removeSprite(r){this._checkLoaded();const l=ee(this.stylesheet.sprite);if(l.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;l.splice(l.findIndex(f=>f.id===r),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return ee(this.stylesheet.sprite)}setSprite(r,l={},f){this._checkLoaded(),r&&this._validate(u.x.sprite,"sprite",r,null,l)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}var tl=u.X([{name:"a_pos",type:"Int16",components:2}]),fo="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const pa={prelude:Vn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Vn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Vn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Vn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Vn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Vn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Vn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Vn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Vn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Vn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Vn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Vn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Vn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Vn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Vn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Vn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Vn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Vn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Vn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Vn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Vn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Vn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Vn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Vn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Vn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Vn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Vn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",fo),terrainDepth:Vn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",fo),terrainCoords:Vn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",fo)};function Vn(y,r){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),m=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=v?v.concat(m):m,P={};return{fragmentSource:y=y.replace(l,(M,H,Q,ne,pe)=>(P[pe]=!0,H==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
varying ${Q} ${ne} ${pe};
#else
uniform ${Q} ${ne} u_${pe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${pe}
    ${Q} ${ne} ${pe} = u_${pe};
#endif
`)),vertexSource:r=r.replace(l,(M,H,Q,ne,pe)=>{const ke=ne==="float"?"vec2":"vec4",Pe=pe.match(/color/)?"color":ke;return P[pe]?H==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
attribute ${Q} ${ke} a_${pe};
varying ${Q} ${ne} ${pe};
#else
uniform ${Q} ${ne} u_${pe};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = a_${pe};
#else
    ${Q} ${ne} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = unpack_mix_${Pe}(a_${pe}, u_${pe}_t);
#else
    ${Q} ${ne} ${pe} = u_${pe};
#endif
`:H==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
attribute ${Q} ${ke} a_${pe};
#else
uniform ${Q} ${ne} u_${pe};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${Q} ${ne} ${pe} = a_${pe};
#else
    ${Q} ${ne} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${Q} ${ne} ${pe} = unpack_mix_${Pe}(a_${pe}, u_${pe}_t);
#else
    ${Q} ${ne} ${pe} = u_${pe};
#endif
`}),staticAttributes:f,staticUniforms:I}}class ps{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,l,f,m,v,I,P,M,H){this.context=r;let Q=this.boundPaintVertexBuffers.length!==m.length;for(let ne=0;!Q&&ne<m.length;ne++)this.boundPaintVertexBuffers[ne]!==m[ne]&&(Q=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==f||Q||this.boundIndexBuffer!==v||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==H?this.freshBind(l,f,m,v,I,P,M,H):(r.bindVertexArray.set(this.vao),P&&P.bind(),v&&v.dynamicDraw&&v.bind(),M&&M.bind(),H&&H.bind())}freshBind(r,l,f,m,v,I,P,M){const H=r.numAttributes,Q=this.context,ne=Q.gl;this.vao&&this.destroy(),this.vao=Q.createVertexArray(),Q.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=m,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=M,l.enableAttributes(ne,r);for(const pe of f)pe.enableAttributes(ne,r);I&&I.enableAttributes(ne,r),P&&P.enableAttributes(ne,r),M&&M.enableAttributes(ne,r),l.bind(),l.setVertexAttribPointers(ne,r,v);for(const pe of f)pe.bind(),pe.setVertexAttribPointers(ne,r,v);I&&(I.bind(),I.setVertexAttribPointers(ne,r,v)),m&&m.bind(),P&&(P.bind(),P.setVertexAttribPointers(ne,r,v)),M&&(M.bind(),M.setVertexAttribPointers(ne,r,v)),Q.currentNumAttributes=H}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Ds(y){const r=[];for(let l=0;l<y.length;l++){if(y[l]===null)continue;const f=y[l].split(" ");r.push(f.pop())}return r}class qo{constructor(r,l,f,m,v,I){const P=r.gl;this.program=P.createProgram();const M=Ds(l.staticAttributes),H=f?f.getBinderAttributes():[],Q=M.concat(H),ne=pa.prelude.staticUniforms?Ds(pa.prelude.staticUniforms):[],pe=l.staticUniforms?Ds(l.staticUniforms):[],ke=f?f.getBinderUniforms():[],Pe=ne.concat(pe).concat(ke),Le=[];for(const st of Pe)Le.indexOf(st)<0&&Le.push(st);const Te=f?f.defines():[];v&&Te.push("#define OVERDRAW_INSPECTOR;"),I&&Te.push("#define TERRAIN3D;");const Ze=Te.concat(pa.prelude.fragmentSource,l.fragmentSource).join(`
`),rt=Te.concat(pa.prelude.vertexSource,l.vertexSource).join(`
`),je=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);if(P.shaderSource(je,Ze),P.compileShader(je),!P.getShaderParameter(je,P.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${P.getShaderInfoLog(je)}`);P.attachShader(this.program,je);const Ke=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);if(P.shaderSource(Ke,rt),P.compileShader(Ke),!P.getShaderParameter(Ke,P.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${P.getShaderInfoLog(Ke)}`);P.attachShader(this.program,Ke),this.attributes={};const it={};this.numAttributes=Q.length;for(let st=0;st<this.numAttributes;st++)Q[st]&&(P.bindAttribLocation(this.program,st,Q[st]),this.attributes[Q[st]]=st);if(P.linkProgram(this.program),!P.getProgramParameter(this.program,P.LINK_STATUS))throw new Error(`Program failed to link: ${P.getProgramInfoLog(this.program)}`);P.deleteShader(Ke),P.deleteShader(je);for(let st=0;st<Le.length;st++){const lt=Le[st];if(lt&&!it[lt]){const bt=P.getUniformLocation(this.program,lt);bt&&(it[lt]=bt)}}this.fixedUniforms=m(r,it),this.terrainUniforms=((st,lt)=>({u_depth:new u.aG(st,lt.u_depth),u_terrain:new u.aG(st,lt.u_terrain),u_terrain_dim:new u.aH(st,lt.u_terrain_dim),u_terrain_matrix:new u.aI(st,lt.u_terrain_matrix),u_terrain_unpack:new u.aJ(st,lt.u_terrain_unpack),u_terrain_exaggeration:new u.aH(st,lt.u_terrain_exaggeration)}))(r,it),this.binderUniforms=f?f.getUniforms(r,it):[]}draw(r,l,f,m,v,I,P,M,H,Q,ne,pe,ke,Pe,Le,Te,Ze,rt){const je=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(m),r.setColorMode(v),r.setCullFace(I),M){r.activeTexture.set(je.TEXTURE2),je.bindTexture(je.TEXTURE_2D,M.depthTexture),r.activeTexture.set(je.TEXTURE3),je.bindTexture(je.TEXTURE_2D,M.texture);for(const it in this.terrainUniforms)this.terrainUniforms[it].set(M[it])}for(const it in this.fixedUniforms)this.fixedUniforms[it].set(P[it]);Le&&Le.setUniforms(r,this.binderUniforms,ke,{zoom:Pe});let Ke=0;switch(l){case je.LINES:Ke=2;break;case je.TRIANGLES:Ke=3;break;case je.LINE_STRIP:Ke=1}for(const it of pe.get()){const st=it.vaos||(it.vaos={});(st[H]||(st[H]=new ps)).bind(r,this,Q,Le?Le.getPaintVertexBuffers():[],ne,it.vertexOffset,Te,Ze,rt),je.drawElements(l,it.primitiveLength*Ke,je.UNSIGNED_SHORT,it.primitiveOffset*Ke*2)}}}function hi(y,r,l){const f=1/un(l,1,r.transform.tileZoom),m=Math.pow(2,l.tileID.overscaledZ),v=l.tileSize*Math.pow(2,r.transform.tileZoom)/m,I=v*(l.tileID.canonical.x+l.tileID.wrap*m),P=v*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[f,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[I>>16,P>>16],u_pixel_coord_lower:[65535&I,65535&P]}}const ma=(y,r,l,f)=>{const m=r.style.light,v=m.properties.get("position"),I=[v.x,v.y,v.z],P=function(){var H=new u.A(9);return u.A!=Float32Array&&(H[1]=0,H[2]=0,H[3]=0,H[5]=0,H[6]=0,H[7]=0),H[0]=1,H[4]=1,H[8]=1,H}();m.properties.get("anchor")==="viewport"&&function(H,Q){var ne=Math.sin(Q),pe=Math.cos(Q);H[0]=pe,H[1]=ne,H[2]=0,H[3]=-ne,H[4]=pe,H[5]=0,H[6]=0,H[7]=0,H[8]=1}(P,-r.transform.angle),function(H,Q,ne){var pe=Q[0],ke=Q[1],Pe=Q[2];H[0]=pe*ne[0]+ke*ne[3]+Pe*ne[6],H[1]=pe*ne[1]+ke*ne[4]+Pe*ne[7],H[2]=pe*ne[2]+ke*ne[5]+Pe*ne[8]}(I,I,P);const M=m.properties.get("color");return{u_matrix:y,u_lightpos:I,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+l,u_opacity:f}},$h=(y,r,l,f,m,v,I)=>u.e(ma(y,r,l,f),hi(v,r,I),{u_height_factor:-Math.pow(2,m.overscaledZ)/I.tileSize/8}),sc=y=>({u_matrix:y}),nl=(y,r,l,f)=>u.e(sc(y),hi(l,r,f)),Vh=(y,r)=>({u_matrix:y,u_world:r}),hu=(y,r,l,f,m)=>u.e(nl(y,r,l,f),{u_world:m}),du=(y,r,l,f)=>{const m=y.transform;let v,I;if(f.paint.get("circle-pitch-alignment")==="map"){const P=un(l,1,m.zoom);v=!0,I=[P,P]}else v=!1,I=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(r.posMatrix,l,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:I}},fu=(y,r,l)=>{const f=un(l,1,r.zoom),m=Math.pow(2,r.zoom-l.tileID.overscaledZ),v=l.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[r.pixelsToGLUnits[0]/(f*m),r.pixelsToGLUnits[1]/(f*m)],u_overscale_factor:v}},ga=(y,r,l=1)=>({u_matrix:y,u_color:r,u_overlay:0,u_overlay_scale:l}),rl=y=>({u_matrix:y}),ms=(y,r,l,f)=>({u_matrix:y,u_extrude_scale:un(r,1,l),u_intensity:f});function ac(y,r){const l=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new u.Y(0,f/l).toLngLat().lat,new u.Y(0,(f+1)/l).toLngLat().lat]}const il=(y,r,l,f)=>{const m=y.transform;return{u_matrix:va(y,r,l,f),u_ratio:1/un(r,1,m.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},lc=(y,r,l,f,m)=>u.e(il(y,r,l,m),{u_image:0,u_image_height:f}),gs=(y,r,l,f,m)=>{const v=y.transform,I=xi(r,v);return{u_matrix:va(y,r,l,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/un(r,1,v.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[I,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},ya=(y,r,l,f,m,v)=>{const I=y.lineAtlas,P=xi(r,y.transform),M=l.layout.get("line-cap")==="round",H=I.getDash(f.from,M),Q=I.getDash(f.to,M),ne=H.width*m.fromScale,pe=Q.width*m.toScale;return u.e(il(y,r,l,v),{u_patternscale_a:[P/ne,-H.height/2],u_patternscale_b:[P/pe,-Q.height/2],u_sdfgamma:I.width/(256*Math.min(ne,pe)*y.pixelRatio)/2,u_image:0,u_tex_y_a:H.y,u_tex_y_b:Q.y,u_mix:m.t})};function xi(y,r){return 1/un(y,1,r.tileZoom)}function va(y,r,l,f){return y.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const ol=(y,r,l,f,m)=>{return{u_matrix:y,u_tl_parent:r,u_scale_parent:l,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(I=m.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(v=m.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:ys(m.paint.get("raster-hue-rotate"))};var v,I};function ys(y){y*=Math.PI/180;const r=Math.sin(y),l=Math.cos(y);return[(2*l+1)/3,(-Math.sqrt(3)*r-l+1)/3,(Math.sqrt(3)*r-l+1)/3]}const _a=(y,r,l,f,m,v,I,P,M,H)=>{const Q=m.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Q.cameraToCenterDistance,u_pitch:Q.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:Q.width/Q.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:I,u_coord_matrix:P,u_is_text:+M,u_pitch_with_map:+f,u_texsize:H,u_texture:0}},xa=(y,r,l,f,m,v,I,P,M,H,Q)=>{const ne=m.transform;return u.e(_a(y,r,l,f,m,v,I,P,M,H),{u_gamma_scale:f?Math.cos(ne._pitch)*ne.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+Q})},wa=(y,r,l,f,m,v,I,P,M,H)=>u.e(xa(y,r,l,f,m,v,I,P,!0,M,!0),{u_texsize_icon:H,u_texture_icon:1}),Gh=(y,r,l)=>({u_matrix:y,u_opacity:r,u_color:l}),uc=(y,r,l,f,m,v)=>u.e(function(I,P,M,H){const Q=M.imageManager.getPattern(I.from.toString()),ne=M.imageManager.getPattern(I.to.toString()),{width:pe,height:ke}=M.imageManager.getPixelSize(),Pe=Math.pow(2,H.tileID.overscaledZ),Le=H.tileSize*Math.pow(2,M.transform.tileZoom)/Pe,Te=Le*(H.tileID.canonical.x+H.tileID.wrap*Pe),Ze=Le*H.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Q.tl,u_pattern_br_a:Q.br,u_pattern_tl_b:ne.tl,u_pattern_br_b:ne.br,u_texsize:[pe,ke],u_mix:P.t,u_pattern_size_a:Q.displaySize,u_pattern_size_b:ne.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/un(H,1,M.transform.tileZoom),u_pixel_coord_upper:[Te>>16,Ze>>16],u_pixel_coord_lower:[65535&Te,65535&Ze]}}(f,v,l,m),{u_matrix:y,u_opacity:r}),cc={fillExtrusion:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_lightpos:new u.aK(y,r.u_lightpos),u_lightintensity:new u.aH(y,r.u_lightintensity),u_lightcolor:new u.aK(y,r.u_lightcolor),u_vertical_gradient:new u.aH(y,r.u_vertical_gradient),u_opacity:new u.aH(y,r.u_opacity)}),fillExtrusionPattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_lightpos:new u.aK(y,r.u_lightpos),u_lightintensity:new u.aH(y,r.u_lightintensity),u_lightcolor:new u.aK(y,r.u_lightcolor),u_vertical_gradient:new u.aH(y,r.u_vertical_gradient),u_height_factor:new u.aH(y,r.u_height_factor),u_image:new u.aG(y,r.u_image),u_texsize:new u.aL(y,r.u_texsize),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade),u_opacity:new u.aH(y,r.u_opacity)}),fill:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix)}),fillPattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_image:new u.aG(y,r.u_image),u_texsize:new u.aL(y,r.u_texsize),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade)}),fillOutline:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_world:new u.aL(y,r.u_world)}),fillOutlinePattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_world:new u.aL(y,r.u_world),u_image:new u.aG(y,r.u_image),u_texsize:new u.aL(y,r.u_texsize),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade)}),circle:(y,r)=>({u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_scale_with_map:new u.aG(y,r.u_scale_with_map),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_extrude_scale:new u.aL(y,r.u_extrude_scale),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_matrix:new u.aI(y,r.u_matrix)}),collisionBox:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pixels_to_tile_units:new u.aH(y,r.u_pixels_to_tile_units),u_extrude_scale:new u.aL(y,r.u_extrude_scale),u_overscale_factor:new u.aH(y,r.u_overscale_factor)}),collisionCircle:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_inv_matrix:new u.aI(y,r.u_inv_matrix),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_viewport_size:new u.aL(y,r.u_viewport_size)}),debug:(y,r)=>({u_color:new u.aM(y,r.u_color),u_matrix:new u.aI(y,r.u_matrix),u_overlay:new u.aG(y,r.u_overlay),u_overlay_scale:new u.aH(y,r.u_overlay_scale)}),clippingMask:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix)}),heatmap:(y,r)=>({u_extrude_scale:new u.aH(y,r.u_extrude_scale),u_intensity:new u.aH(y,r.u_intensity),u_matrix:new u.aI(y,r.u_matrix)}),heatmapTexture:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_world:new u.aL(y,r.u_world),u_image:new u.aG(y,r.u_image),u_color_ramp:new u.aG(y,r.u_color_ramp),u_opacity:new u.aH(y,r.u_opacity)}),hillshade:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_image:new u.aG(y,r.u_image),u_latrange:new u.aL(y,r.u_latrange),u_light:new u.aL(y,r.u_light),u_shadow:new u.aM(y,r.u_shadow),u_highlight:new u.aM(y,r.u_highlight),u_accent:new u.aM(y,r.u_accent)}),hillshadePrepare:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_image:new u.aG(y,r.u_image),u_dimension:new u.aL(y,r.u_dimension),u_zoom:new u.aH(y,r.u_zoom),u_unpack:new u.aJ(y,r.u_unpack)}),line:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels)}),lineGradient:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels),u_image:new u.aG(y,r.u_image),u_image_height:new u.aH(y,r.u_image_height)}),linePattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_texsize:new u.aL(y,r.u_texsize),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_image:new u.aG(y,r.u_image),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade)}),lineSDF:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels),u_patternscale_a:new u.aL(y,r.u_patternscale_a),u_patternscale_b:new u.aL(y,r.u_patternscale_b),u_sdfgamma:new u.aH(y,r.u_sdfgamma),u_image:new u.aG(y,r.u_image),u_tex_y_a:new u.aH(y,r.u_tex_y_a),u_tex_y_b:new u.aH(y,r.u_tex_y_b),u_mix:new u.aH(y,r.u_mix)}),raster:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_tl_parent:new u.aL(y,r.u_tl_parent),u_scale_parent:new u.aH(y,r.u_scale_parent),u_buffer_scale:new u.aH(y,r.u_buffer_scale),u_fade_t:new u.aH(y,r.u_fade_t),u_opacity:new u.aH(y,r.u_opacity),u_image0:new u.aG(y,r.u_image0),u_image1:new u.aG(y,r.u_image1),u_brightness_low:new u.aH(y,r.u_brightness_low),u_brightness_high:new u.aH(y,r.u_brightness_high),u_saturation_factor:new u.aH(y,r.u_saturation_factor),u_contrast_factor:new u.aH(y,r.u_contrast_factor),u_spin_weights:new u.aK(y,r.u_spin_weights)}),symbolIcon:(y,r)=>({u_is_size_zoom_constant:new u.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,r.u_is_size_feature_constant),u_size_t:new u.aH(y,r.u_size_t),u_size:new u.aH(y,r.u_size),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pitch:new u.aH(y,r.u_pitch),u_rotate_symbol:new u.aG(y,r.u_rotate_symbol),u_aspect_ratio:new u.aH(y,r.u_aspect_ratio),u_fade_change:new u.aH(y,r.u_fade_change),u_matrix:new u.aI(y,r.u_matrix),u_label_plane_matrix:new u.aI(y,r.u_label_plane_matrix),u_coord_matrix:new u.aI(y,r.u_coord_matrix),u_is_text:new u.aG(y,r.u_is_text),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_texsize:new u.aL(y,r.u_texsize),u_texture:new u.aG(y,r.u_texture)}),symbolSDF:(y,r)=>({u_is_size_zoom_constant:new u.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,r.u_is_size_feature_constant),u_size_t:new u.aH(y,r.u_size_t),u_size:new u.aH(y,r.u_size),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pitch:new u.aH(y,r.u_pitch),u_rotate_symbol:new u.aG(y,r.u_rotate_symbol),u_aspect_ratio:new u.aH(y,r.u_aspect_ratio),u_fade_change:new u.aH(y,r.u_fade_change),u_matrix:new u.aI(y,r.u_matrix),u_label_plane_matrix:new u.aI(y,r.u_label_plane_matrix),u_coord_matrix:new u.aI(y,r.u_coord_matrix),u_is_text:new u.aG(y,r.u_is_text),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_texsize:new u.aL(y,r.u_texsize),u_texture:new u.aG(y,r.u_texture),u_gamma_scale:new u.aH(y,r.u_gamma_scale),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_is_halo:new u.aG(y,r.u_is_halo)}),symbolTextAndIcon:(y,r)=>({u_is_size_zoom_constant:new u.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,r.u_is_size_feature_constant),u_size_t:new u.aH(y,r.u_size_t),u_size:new u.aH(y,r.u_size),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pitch:new u.aH(y,r.u_pitch),u_rotate_symbol:new u.aG(y,r.u_rotate_symbol),u_aspect_ratio:new u.aH(y,r.u_aspect_ratio),u_fade_change:new u.aH(y,r.u_fade_change),u_matrix:new u.aI(y,r.u_matrix),u_label_plane_matrix:new u.aI(y,r.u_label_plane_matrix),u_coord_matrix:new u.aI(y,r.u_coord_matrix),u_is_text:new u.aG(y,r.u_is_text),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_texsize:new u.aL(y,r.u_texsize),u_texsize_icon:new u.aL(y,r.u_texsize_icon),u_texture:new u.aG(y,r.u_texture),u_texture_icon:new u.aG(y,r.u_texture_icon),u_gamma_scale:new u.aH(y,r.u_gamma_scale),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_is_halo:new u.aG(y,r.u_is_halo)}),background:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_opacity:new u.aH(y,r.u_opacity),u_color:new u.aM(y,r.u_color)}),backgroundPattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_opacity:new u.aH(y,r.u_opacity),u_image:new u.aG(y,r.u_image),u_pattern_tl_a:new u.aL(y,r.u_pattern_tl_a),u_pattern_br_a:new u.aL(y,r.u_pattern_br_a),u_pattern_tl_b:new u.aL(y,r.u_pattern_tl_b),u_pattern_br_b:new u.aL(y,r.u_pattern_br_b),u_texsize:new u.aL(y,r.u_texsize),u_mix:new u.aH(y,r.u_mix),u_pattern_size_a:new u.aL(y,r.u_pattern_size_a),u_pattern_size_b:new u.aL(y,r.u_pattern_size_b),u_scale_a:new u.aH(y,r.u_scale_a),u_scale_b:new u.aH(y,r.u_scale_b),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aH(y,r.u_tile_units_to_pixels)}),terrain:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_texture:new u.aG(y,r.u_texture),u_ele_delta:new u.aH(y,r.u_ele_delta)}),terrainDepth:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ele_delta:new u.aH(y,r.u_ele_delta)}),terrainCoords:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_texture:new u.aG(y,r.u_texture),u_terrain_coords_id:new u.aH(y,r.u_terrain_coords_id),u_ele_delta:new u.aH(y,r.u_ele_delta)})};class hc{constructor(r,l,f){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const vs={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class sl{constructor(r,l,f,m){this.length=l.length,this.attributes=f,this.itemSize=l.bytesPerElement,this.dynamicDraw=m,this.context=r;const v=r.gl;this.buffer=v.createBuffer(),r.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,l){for(let f=0;f<this.attributes.length;f++){const m=l.attributes[this.attributes[f].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,l,f){for(let m=0;m<this.attributes.length;m++){const v=this.attributes[m],I=l.attributes[v.name];I!==void 0&&r.vertexAttribPointer(I,v.components,r[vs[v.type]],!1,this.itemSize,v.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Yr=new WeakMap;function Jr(y){var r;if(Yr.has(y))return Yr.get(y);{const l=(r=y.getParameter(y.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Yr.set(y,l),l}}class Ln{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class al extends Ln{getDefault(){return u.aO.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ll extends Ln{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class ul extends Ln{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class pu extends Ln{getDefault(){return[!0,!0,!0,!0]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Bs extends Ln{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class mu extends Ln{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class gu extends Ln{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const l=this.current;(r.func!==l.func||r.ref!==l.ref||r.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class cl extends Ln{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class dc extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}}class fc extends Ln{getDefault(){return[0,1]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ns extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}}class pc extends Ln{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class yu extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}}class Hh extends Ln{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Wh extends Ln{getDefault(){return u.aO.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Zh extends Ln{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Xh extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}}class hl extends Ln{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class dl extends Ln{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class vu extends Ln{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class _u extends Ln{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Us extends Ln{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class ba extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class mc extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Ko extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Yo extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Zi extends Ln{getDefault(){return null}set(r){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class $s extends Ln{getDefault(){return null}set(r){var l;if(r===this.current&&!this.dirty)return;const f=this.gl;Jr(f)?f.bindVertexArray(r):(l=f.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Vs extends Ln{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class gc extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class xu extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class kn extends Ln{constructor(r,l){super(r),this.context=r,this.parent=l}getDefault(){return null}}class fl extends kn{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class pl extends kn{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class yc extends kn{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Sa{constructor(r,l,f,m,v){this.context=r,this.width=l,this.height=f;const I=r.gl,P=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new fl(r,P),m)this.depthAttachment=v?new yc(r,P):new pl(r,P);else if(v)throw new Error("Stencil cannot be set without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class er{constructor(r,l,f){this.blendFunction=r,this.blendColor=l,this.mask=f}}er.Replace=[1,0],er.disabled=new er(er.Replace,u.aO.transparent,[!1,!1,!1,!1]),er.unblended=new er(er.Replace,u.aO.transparent,[!0,!0,!0,!0]),er.alphaBlended=new er([1,771],u.aO.transparent,[!0,!0,!0,!0]);class vc{constructor(r){var l,f;if(this.gl=r,this.clearColor=new al(this),this.clearDepth=new ll(this),this.clearStencil=new ul(this),this.colorMask=new pu(this),this.depthMask=new Bs(this),this.stencilMask=new mu(this),this.stencilFunc=new gu(this),this.stencilOp=new cl(this),this.stencilTest=new dc(this),this.depthRange=new fc(this),this.depthTest=new Ns(this),this.depthFunc=new pc(this),this.blend=new yu(this),this.blendFunc=new Hh(this),this.blendColor=new Wh(this),this.blendEquation=new Zh(this),this.cullFace=new Xh(this),this.cullFaceSide=new hl(this),this.frontFace=new dl(this),this.program=new vu(this),this.activeTexture=new _u(this),this.viewport=new Us(this),this.bindFramebuffer=new ba(this),this.bindRenderbuffer=new mc(this),this.bindTexture=new Ko(this),this.bindVertexBuffer=new Yo(this),this.bindElementBuffer=new Zi(this),this.bindVertexArray=new $s(this),this.pixelStoreUnpack=new Vs(this),this.pixelStoreUnpackPremultiplyAlpha=new gc(this),this.pixelStoreUnpackFlipY=new xu(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Jr(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=r.RGBA16F)!==null&&l!==void 0?l:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,l){return new hc(this,r,l)}createVertexBuffer(r,l,f){return new sl(this,r,l,f)}createRenderbuffer(r,l,f){const m=this.gl,v=m.createRenderbuffer();return this.bindRenderbuffer.set(v),m.renderbufferStorage(m.RENDERBUFFER,r,l,f),this.bindRenderbuffer.set(null),v}createFramebuffer(r,l,f,m){return new Sa(this,r,l,f,m)}clear({color:r,depth:l,stencil:f}){const m=this.gl;let v=0;r&&(v|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(v|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),f!==void 0&&(v|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),m.clear(v)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aD(r.blendFunction,er.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Jr(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var l;return Jr(this.gl)?this.gl.deleteVertexArray(r):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class In{constructor(r,l,f){this.func=r,this.mask=l,this.range=f}}In.ReadOnly=!1,In.ReadWrite=!0,In.disabled=new In(519,In.ReadOnly,[0,1]);const wu=7680;class qn{constructor(r,l,f,m,v,I){this.test=r,this.ref=l,this.mask=f,this.fail=m,this.depthFail=v,this.pass=I}}qn.disabled=new qn({func:519,mask:0},0,0,wu,wu,wu);class Nn{constructor(r,l,f){this.enable=r,this.mode=l,this.frontFace=f}}let wi;function ml(y,r,l,f,m,v,I){const P=y.context,M=P.gl,H=y.useProgram("collisionBox"),Q=[];let ne=0,pe=0;for(let je=0;je<f.length;je++){const Ke=f[je],it=r.getTile(Ke),st=it.getBucket(l);if(!st)continue;let lt=Ke.posMatrix;m[0]===0&&m[1]===0||(lt=y.translatePosMatrix(Ke.posMatrix,it,m,v));const bt=I?st.textCollisionBox:st.iconCollisionBox,xt=st.collisionCircleArray;if(xt.length>0){const Tt=u.F(),At=lt;u.aP(Tt,st.placementInvProjMatrix,y.transform.glCoordMatrix),u.aP(Tt,Tt,st.placementViewportMatrix),Q.push({circleArray:xt,circleOffset:pe,transform:At,invTransform:Tt,coord:Ke}),ne+=xt.length/4,pe=ne}bt&&H.draw(P,M.LINES,In.disabled,qn.disabled,y.colorModeForRenderPass(),Nn.disabled,fu(lt,y.transform,it),y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ke),l.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,null,y.transform.zoom,null,null,bt.collisionVertexBuffer)}if(!I||!Q.length)return;const ke=y.useProgram("collisionCircle"),Pe=new u.aQ;Pe.resize(4*ne),Pe._trim();let Le=0;for(const je of Q)for(let Ke=0;Ke<je.circleArray.length/4;Ke++){const it=4*Ke,st=je.circleArray[it+0],lt=je.circleArray[it+1],bt=je.circleArray[it+2],xt=je.circleArray[it+3];Pe.emplace(Le++,st,lt,bt,xt,0),Pe.emplace(Le++,st,lt,bt,xt,1),Pe.emplace(Le++,st,lt,bt,xt,2),Pe.emplace(Le++,st,lt,bt,xt,3)}(!wi||wi.length<2*ne)&&(wi=function(je){const Ke=2*je,it=new u.aS;it.resize(Ke),it._trim();for(let st=0;st<Ke;st++){const lt=6*st;it.uint16[lt+0]=4*st+0,it.uint16[lt+1]=4*st+1,it.uint16[lt+2]=4*st+2,it.uint16[lt+3]=4*st+2,it.uint16[lt+4]=4*st+3,it.uint16[lt+5]=4*st+0}return it}(ne));const Te=P.createIndexBuffer(wi,!0),Ze=P.createVertexBuffer(Pe,u.aR.members,!0);for(const je of Q){const Ke={u_matrix:je.transform,u_inv_matrix:je.invTransform,u_camera_to_center_distance:(rt=y.transform).cameraToCenterDistance,u_viewport_size:[rt.width,rt.height]};ke.draw(P,M.TRIANGLES,In.disabled,qn.disabled,y.colorModeForRenderPass(),Nn.disabled,Ke,y.style.map.terrain&&y.style.map.terrain.getTerrainData(je.coord),l.id,Ze,Te,u.$.simpleSegment(0,2*je.circleOffset,je.circleArray.length,je.circleArray.length/2),null,y.transform.zoom,null,null,null)}var rt;Ze.destroy(),Te.destroy()}Nn.disabled=new Nn(!1,1029,2305),Nn.backCCW=new Nn(!0,1029,2305);const gl=u.an(new Float32Array(16));function Ea(y,r,l,f,m,v){const{horizontalAlign:I,verticalAlign:P}=u.at(y);return new u.P((-(I-.5)*r/m+f[0])*v,(-(P-.5)*l/m+f[1])*v)}function yl(y,r,l,f,m,v,I,P,M,H,Q){const ne=y.text.placedSymbolArray,pe=y.text.dynamicLayoutVertexArray,ke=y.icon.dynamicLayoutVertexArray,Pe={};pe.clear();for(let Le=0;Le<ne.length;Le++){const Te=ne.get(Le),Ze=Te.hidden||!Te.crossTileID||y.allowVerticalPlacement&&!Te.placedOrientation?null:f[Te.crossTileID];if(Ze){const rt=new u.P(Te.anchorX,Te.anchorY),je=rr(rt,l?I:v,Q),Ke=Me(m.cameraToCenterDistance,je.signedDistanceFromCamera);let it=u.ai(y.textSizeData,M,Te)*Ke/u.ao;l&&(it*=y.tilePixelRatio/P);const{width:st,height:lt,anchor:bt,textOffset:xt,textBoxScale:Tt}=Ze,At=Ea(bt,st,lt,xt,Tt,it),yn=l?rr(rt.add(At),v,Q).point:je.point.add(r?At.rotate(-m.angle):At),kt=y.allowVerticalPlacement&&Te.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let nn=0;nn<Te.numGlyphs;nn++)u.aj(pe,yn,kt);H&&Te.associatedIconIndex>=0&&(Pe[Te.associatedIconIndex]={shiftedAnchor:yn,angle:kt})}else pt(Te.numGlyphs,pe)}if(H){ke.clear();const Le=y.icon.placedSymbolArray;for(let Te=0;Te<Le.length;Te++){const Ze=Le.get(Te);if(Ze.hidden)pt(Ze.numGlyphs,ke);else{const rt=Pe[Te];if(rt)for(let je=0;je<Ze.numGlyphs;je++)u.aj(ke,rt.shiftedAnchor,rt.angle);else pt(Ze.numGlyphs,ke)}}y.icon.dynamicLayoutVertexBuffer.updateData(ke)}y.text.dynamicLayoutVertexBuffer.updateData(pe)}function To(y,r,l){return l.iconsInText&&r?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Co(y,r,l,f,m,v,I,P,M,H,Q,ne){const pe=y.context,ke=pe.gl,Pe=y.transform,Le=P==="map",Te=M==="map",Ze=P!=="viewport"&&l.layout.get("symbol-placement")!=="point",rt=Le&&!Te&&!Ze,je=!l.layout.get("symbol-sort-key").isConstant();let Ke=!1;const it=y.depthModeForSublayer(0,In.ReadOnly),st=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),lt=[];for(const bt of f){const xt=r.getTile(bt),Tt=xt.getBucket(l);if(!Tt)continue;const At=m?Tt.text:Tt.icon;if(!At||!At.segments.get().length||!At.hasVisibleVertices)continue;const yn=At.programConfigurations.get(l.id),kt=m||Tt.sdfIcons,nn=m?Tt.textSizeData:Tt.iconSizeData,vn=Te||Pe.pitch!==0,Rn=y.useProgram(To(kt,m,Tt),yn),cn=u.ag(nn,Pe.zoom),xn=y.style.map.terrain&&y.style.map.terrain.getTerrainData(bt);let Tn,gr,Hn,qi,$r=[0,0],hr=null;if(m)gr=xt.glyphAtlasTexture,Hn=ke.LINEAR,Tn=xt.glyphAtlasTexture.size,Tt.iconsInText&&($r=xt.imageAtlasTexture.size,hr=xt.imageAtlasTexture,qi=vn||y.options.rotating||y.options.zooming||nn.kind==="composite"||nn.kind==="camera"?ke.LINEAR:ke.NEAREST);else{const Lr=l.layout.get("icon-size").constantOr(0)!==1||Tt.iconsNeedLinear;gr=xt.imageAtlasTexture,Hn=kt||y.options.rotating||y.options.zooming||Lr||vn?ke.LINEAR:ke.NEAREST,Tn=xt.imageAtlasTexture.size}const Vr=un(xt,1,y.transform.zoom),Ki=sn(bt.posMatrix,Te,Le,y.transform,Vr),ts=ki(bt.posMatrix,Te,Le,y.transform,Vr),Zs=st&&Tt.hasTextData(),zu=l.layout.get("icon-text-fit")!=="none"&&Zs&&Tt.hasIconData();if(Ze){const Lr=y.style.map.terrain?(go,Fr)=>y.style.map.terrain.getElevation(bt,go,Fr):null,fr=l.layout.get("text-rotation-alignment")==="map";ue(Tt,bt.posMatrix,y,m,Ki,ts,Te,H,fr,Lr)}const Xs=y.translatePosMatrix(bt.posMatrix,xt,v,I),ns=Ze||m&&st||zu?gl:Ki,Or=y.translatePosMatrix(ts,xt,v,I,!0),dr=kt&&l.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let sr;sr=kt?Tt.iconsInText?wa(nn.kind,cn,rt,Te,y,Xs,ns,Or,Tn,$r):xa(nn.kind,cn,rt,Te,y,Xs,ns,Or,m,Tn,!0):_a(nn.kind,cn,rt,Te,y,Xs,ns,Or,m,Tn);const mo={program:Rn,buffers:At,uniformValues:sr,atlasTexture:gr,atlasTextureIcon:hr,atlasInterpolation:Hn,atlasInterpolationIcon:qi,isSDF:kt,hasHalo:dr};if(je&&Tt.canOverlap){Ke=!0;const Lr=At.segments.get();for(const fr of Lr)lt.push({segments:new u.$([fr]),sortKey:fr.sortKey,state:mo,terrainData:xn})}else lt.push({segments:At.segments,sortKey:0,state:mo,terrainData:xn})}Ke&&lt.sort((bt,xt)=>bt.sortKey-xt.sortKey);for(const bt of lt){const xt=bt.state;if(pe.activeTexture.set(ke.TEXTURE0),xt.atlasTexture.bind(xt.atlasInterpolation,ke.CLAMP_TO_EDGE),xt.atlasTextureIcon&&(pe.activeTexture.set(ke.TEXTURE1),xt.atlasTextureIcon&&xt.atlasTextureIcon.bind(xt.atlasInterpolationIcon,ke.CLAMP_TO_EDGE)),xt.isSDF){const Tt=xt.uniformValues;xt.hasHalo&&(Tt.u_is_halo=1,Qr(xt.buffers,bt.segments,l,y,xt.program,it,Q,ne,Tt,bt.terrainData)),Tt.u_is_halo=0}Qr(xt.buffers,bt.segments,l,y,xt.program,it,Q,ne,xt.uniformValues,bt.terrainData)}}function Qr(y,r,l,f,m,v,I,P,M,H){const Q=f.context;m.draw(Q,Q.gl.TRIANGLES,v,I,P,Nn.disabled,M,H,l.id,y.layoutVertexBuffer,y.indexBuffer,r,l.paint,f.transform.zoom,y.programConfigurations.get(l.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function po(y,r,l,f,m){if(!l||!f||!f.imageAtlas)return;const v=f.imageAtlas.patternPositions;let I=v[l.to.toString()],P=v[l.from.toString()];if(!I&&P&&(I=P),!P&&I&&(P=I),!I||!P){const M=m.getPaintProperty(r);I=v[M],P=v[M]}I&&P&&y.setConstantPatternPositions(I,P)}function vl(y,r,l,f,m,v,I){const P=y.context.gl,M="fill-pattern",H=l.paint.get(M),Q=H&&H.constantOr(1),ne=l.getCrossfadeParameters();let pe,ke,Pe,Le,Te;I?(ke=Q&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pe=P.LINES):(ke=Q?"fillPattern":"fill",pe=P.TRIANGLES);const Ze=H.constantOr(null);for(const rt of f){const je=r.getTile(rt);if(Q&&!je.patternsLoaded())continue;const Ke=je.getBucket(l);if(!Ke)continue;const it=Ke.programConfigurations.get(l.id),st=y.useProgram(ke,it),lt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(rt);Q&&(y.context.activeTexture.set(P.TEXTURE0),je.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),it.updatePaintBuffers(ne)),po(it,M,Ze,je,l);const bt=lt?rt:null,xt=y.translatePosMatrix(bt?bt.posMatrix:rt.posMatrix,je,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(I){Le=Ke.indexBuffer2,Te=Ke.segments2;const Tt=[P.drawingBufferWidth,P.drawingBufferHeight];Pe=ke==="fillOutlinePattern"&&Q?hu(xt,y,ne,je,Tt):Vh(xt,Tt)}else Le=Ke.indexBuffer,Te=Ke.segments,Pe=Q?nl(xt,y,ne,je):sc(xt);st.draw(y.context,pe,m,y.stencilModeForClipping(rt),v,Nn.disabled,Pe,lt,l.id,Ke.layoutVertexBuffer,Le,Te,l.paint,y.transform.zoom,it)}}function Gs(y,r,l,f,m,v,I){const P=y.context,M=P.gl,H="fill-extrusion-pattern",Q=l.paint.get(H),ne=Q.constantOr(1),pe=l.getCrossfadeParameters(),ke=l.paint.get("fill-extrusion-opacity"),Pe=Q.constantOr(null);for(const Le of f){const Te=r.getTile(Le),Ze=Te.getBucket(l);if(!Ze)continue;const rt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Le),je=Ze.programConfigurations.get(l.id),Ke=y.useProgram(ne?"fillExtrusionPattern":"fillExtrusion",je);ne&&(y.context.activeTexture.set(M.TEXTURE0),Te.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),je.updatePaintBuffers(pe)),po(je,H,Pe,Te,l);const it=y.translatePosMatrix(Le.posMatrix,Te,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),st=l.paint.get("fill-extrusion-vertical-gradient"),lt=ne?$h(it,y,st,ke,Le,pe,Te):ma(it,y,st,ke);Ke.draw(P,P.gl.TRIANGLES,m,v,I,Nn.backCCW,lt,rt,l.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,l.paint,y.transform.zoom,je,y.style.map.terrain&&Ze.centroidVertexBuffer)}}function _l(y,r,l,f,m,v,I){const P=y.context,M=P.gl,H=l.fbo;if(!H)return;const Q=y.useProgram("hillshade"),ne=y.style.map.terrain&&y.style.map.terrain.getTerrainData(r);P.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,H.colorAttachment.get()),Q.draw(P,M.TRIANGLES,m,v,I,Nn.disabled,((pe,ke,Pe,Le)=>{const Te=Pe.paint.get("hillshade-shadow-color"),Ze=Pe.paint.get("hillshade-highlight-color"),rt=Pe.paint.get("hillshade-accent-color");let je=Pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Pe.paint.get("hillshade-illumination-anchor")==="viewport"&&(je-=pe.transform.angle);const Ke=!pe.options.moving;return{u_matrix:Le?Le.posMatrix:pe.transform.calculatePosMatrix(ke.tileID.toUnwrapped(),Ke),u_image:0,u_latrange:ac(0,ke.tileID),u_light:[Pe.paint.get("hillshade-exaggeration"),je],u_shadow:Te,u_highlight:Ze,u_accent:rt}})(y,l,f,ne?r:null),ne,f.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Hs(y,r,l,f,m,v){const I=y.context,P=I.gl,M=r.dem;if(M&&M.data){const H=M.dim,Q=M.stride,ne=M.getPixels();if(I.activeTexture.set(P.TEXTURE1),I.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||y.getTileTexture(Q),r.demTexture){const ke=r.demTexture;ke.update(ne,{premultiply:!1}),ke.bind(P.NEAREST,P.CLAMP_TO_EDGE)}else r.demTexture=new W(I,ne,P.RGBA,{premultiply:!1}),r.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);I.activeTexture.set(P.TEXTURE0);let pe=r.fbo;if(!pe){const ke=new W(I,{width:H,height:H,data:null},P.RGBA);ke.bind(P.LINEAR,P.CLAMP_TO_EDGE),pe=r.fbo=I.createFramebuffer(H,H,!0,!1),pe.colorAttachment.set(ke.texture)}I.bindFramebuffer.set(pe.framebuffer),I.viewport.set([0,0,H,H]),y.useProgram("hillshadePrepare").draw(I,P.TRIANGLES,f,m,v,Nn.disabled,((ke,Pe)=>{const Le=Pe.stride,Te=u.F();return u.aN(Te,0,u.W,-u.W,0,0,1),u.H(Te,Te,[0,-u.W,0]),{u_matrix:Te,u_image:1,u_dimension:[Le,Le],u_zoom:ke.overscaledZ,u_unpack:Pe.getUnpackVector()}})(r.tileID,M),null,l.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Ta(y,r,l,f,m,v){const I=f.paint.get("raster-fade-duration");if(!v&&I>0){const P=w.now(),M=(P-y.timeAdded)/I,H=r?(P-r.timeAdded)/I:-1,Q=l.getSource(),ne=m.coveringZoomLevel({tileSize:Q.tileSize,roundZoom:Q.roundZoom}),pe=!r||Math.abs(r.tileID.overscaledZ-ne)>Math.abs(y.tileID.overscaledZ-ne),ke=pe&&y.refreshedUponExpiration?1:u.ac(pe?M:1-H,0,1);return y.refreshedUponExpiration&&M>=1&&(y.refreshedUponExpiration=!1),r?{opacity:1,mix:1-ke}:{opacity:ke,mix:0}}return{opacity:1,mix:0}}const Oi=new u.aO(1,0,0,1),Io=new u.aO(0,1,0,1),xl=new u.aO(0,0,1,1),wl=new u.aO(1,0,1,1),Ca=new u.aO(0,1,1,1);function tr(y,r,l,f){ei(y,0,r+l/2,y.transform.width,l,f)}function Ao(y,r,l,f){ei(y,r-l/2,0,l,y.transform.height,f)}function ei(y,r,l,f,m,v){const I=y.context,P=I.gl;P.enable(P.SCISSOR_TEST),P.scissor(r*y.pixelRatio,l*y.pixelRatio,f*y.pixelRatio,m*y.pixelRatio),I.clear({color:v}),P.disable(P.SCISSOR_TEST)}function bl(y,r,l){const f=y.context,m=f.gl,v=l.posMatrix,I=y.useProgram("debug"),P=In.disabled,M=qn.disabled,H=y.colorModeForRenderPass(),Q="$debug",ne=y.style.map.terrain&&y.style.map.terrain.getTerrainData(l);f.activeTexture.set(m.TEXTURE0);const pe=r.getTileByID(l.key).latestRawTileData,ke=Math.floor((pe&&pe.byteLength||0)/1024),Pe=r.getTile(l).tileSize,Le=512/Math.min(Pe,512)*(l.overscaledZ/y.transform.zoom)*.5;let Te=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(Te+=` => ${l.overscaledZ}`),function(Ze,rt){Ze.initDebugOverlayCanvas();const je=Ze.debugOverlayCanvas,Ke=Ze.context.gl,it=Ze.debugOverlayCanvas.getContext("2d");it.clearRect(0,0,je.width,je.height),it.shadowColor="white",it.shadowBlur=2,it.lineWidth=1.5,it.strokeStyle="white",it.textBaseline="top",it.font="bold 36px Open Sans, sans-serif",it.fillText(rt,5,5),it.strokeText(rt,5,5),Ze.debugOverlayTexture.update(je),Ze.debugOverlayTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE)}(y,`${Te} ${ke}kB`),I.draw(f,m.TRIANGLES,P,M,er.alphaBlended,Nn.disabled,ga(v,u.aO.transparent,Le),null,Q,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),I.draw(f,m.LINE_STRIP,P,M,H,Nn.disabled,ga(v,u.aO.red),ne,Q,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Xi(y,r,l){const f=y.context,m=f.gl,v=y.colorModeForRenderPass(),I=new In(m.LEQUAL,In.ReadWrite,y.depthRangeFor3D),P=y.useProgram("terrain"),M=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,y.width,y.height]);for(const H of l){const Q=y.renderToTexture.getTexture(H),ne=r.getTerrainData(H.tileID);f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,Q.texture);const pe={u_matrix:y.transform.calculatePosMatrix(H.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(y.transform.zoom)};P.draw(f,m.TRIANGLES,I,qn.disabled,v,Nn.backCCW,pe,ne,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class bu{constructor(r,l){this.context=new vc(r),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ot.maxUnderzooming+ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xo}resize(r,l,f){if(this.width=Math.floor(r*f),this.height=Math.floor(l*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,l=new u.aV;l.emplaceBack(0,0),l.emplaceBack(u.W,0),l.emplaceBack(0,u.W),l.emplaceBack(u.W,u.W),this.tileExtentBuffer=r.createVertexBuffer(l,tl.members),this.tileExtentSegments=u.$.simpleSegment(0,0,4,2);const f=new u.aV;f.emplaceBack(0,0),f.emplaceBack(u.W,0),f.emplaceBack(0,u.W),f.emplaceBack(u.W,u.W),this.debugBuffer=r.createVertexBuffer(f,tl.members),this.debugSegments=u.$.simpleSegment(0,0,4,5);const m=new u.Z;m.emplaceBack(0,0,0,0),m.emplaceBack(u.W,0,u.W,0),m.emplaceBack(0,u.W,0,u.W),m.emplaceBack(u.W,u.W,u.W,u.W),this.rasterBoundsBuffer=r.createVertexBuffer(m,xe.members),this.rasterBoundsSegments=u.$.simpleSegment(0,0,4,2);const v=new u.aV;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(v,tl.members),this.viewportSegments=u.$.simpleSegment(0,0,4,2);const I=new u.aW;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(I);const P=new u.aX;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(P);const M=this.context.gl;this.stencilClearMode=new qn({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=u.F();u.aN(f,0,this.width,this.height,0,0,1),u.J(f,f,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,l.TRIANGLES,In.disabled,this.stencilClearMode,er.disabled,Nn.disabled,rl(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,l){if(this.currentStencilSource===r.source||!r.isTileClipped()||!l||!l.length)return;this.currentStencilSource=r.source;const f=this.context,m=f.gl;this.nextStencilID+l.length>256&&this.clearStencil(),f.setColorMode(er.disabled),f.setDepthMode(In.disabled);const v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const I of l){const P=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(I);v.draw(f,m.TRIANGLES,In.disabled,new qn({func:m.ALWAYS,mask:0},P,255,m.KEEP,m.KEEP,m.REPLACE),er.disabled,Nn.disabled,rl(I.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,l=this.context.gl;return new qn({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(r){const l=this.context.gl;return new qn({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(r){const l=this.context.gl,f=r.sort((I,P)=>P.overscaledZ-I.overscaledZ),m=f[f.length-1].overscaledZ,v=f[0].overscaledZ-m+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const I={};for(let P=0;P<v;P++)I[P+m]=new qn({func:l.GEQUAL,mask:255},P+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=v,[I,f]}return[{[m]:qn.disabled},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new er([r.CONSTANT_COLOR,r.ONE],new u.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?er.unblended:er.alphaBlended}depthModeForSublayer(r,l,f){if(!this.opaquePassEnabledForLayer())return In.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new In(f||this.context.gl.LEQUAL,l,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,l){this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(w.now()),this.imageManager.beginFrame();const f=this.style._order,m=this.style.sourceCaches,v={},I={},P={};for(const M in m){const H=m[M];H.used&&H.prepare(this.context),v[M]=H.getVisibleCoordinates(),I[M]=v[M].slice().reverse(),P[M]=H.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<f.length;M++)if(this.style._layers[f[M]].is3D()){this.opaquePassCutoff=M;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const M of f){const H=this.style._layers[M];if(!H.hasOffscreenPass()||H.isHidden(this.transform.zoom))continue;const Q=I[H.source];(H.type==="custom"||Q.length)&&this.renderLayer(this,m[H.source],H,Q)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?u.aO.black:u.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[f[this.currentLayer]],H=m[M.source],Q=v[M.source];this._renderTileClippingMasks(M,Q),this.renderLayer(this,H,M,Q)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const M=this.style._layers[f[this.currentLayer]],H=m[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const Q=(M.type==="symbol"?P:I)[M.source];this._renderTileClippingMasks(M,v[M.source]),this.renderLayer(this,H,M,Q)}if(this.options.showTileBoundaries){const M=function(H,Q){let ne=null;const pe=Object.values(H._layers).flatMap(Te=>Te.source&&!Te.isHidden(Q)?[H.sourceCaches[Te.source]]:[]),ke=pe.filter(Te=>Te.getSource().type==="vector"),Pe=pe.filter(Te=>Te.getSource().type!=="vector"),Le=Te=>{(!ne||ne.getSource().maxzoom<Te.getSource().maxzoom)&&(ne=Te)};return ke.forEach(Te=>Le(Te)),ne||Pe.forEach(Te=>Le(Te)),ne}(this.style,this.transform.zoom);M&&function(H,Q,ne){for(let pe=0;pe<ne.length;pe++)bl(H,Q,ne[pe])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const H=M.transform.padding;tr(M,M.transform.height-(H.top||0),3,Oi),tr(M,H.bottom||0,3,Io),Ao(M,H.left||0,3,xl),Ao(M,M.transform.width-(H.right||0),3,wl);const Q=M.transform.centerPoint;(function(ne,pe,ke,Pe){ei(ne,pe-1,ke-10,2,20,Pe),ei(ne,pe-10,ke-1,20,2,Pe)})(M,Q.x,M.transform.height-Q.y,Ca)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,f=this.transform.projMatrix;let m=this.terrainFacilitator.dirty;m||(m=r?!u.aY(l,f):!u.aZ(l,f)),m||(m=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),m&&(u.a_(l,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(v,I){const P=v.context,M=P.gl,H=er.unblended,Q=new In(M.LEQUAL,In.ReadWrite,[0,1]),ne=I.getTerrainMesh(),pe=I.sourceCache.getRenderableTiles(),ke=v.useProgram("terrainDepth");P.bindFramebuffer.set(I.getFramebuffer("depth").framebuffer),P.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),P.clear({color:u.aO.transparent,depth:1});for(const Pe of pe){const Le=I.getTerrainData(Pe.tileID),Te={u_matrix:v.transform.calculatePosMatrix(Pe.tileID.toUnwrapped()),u_ele_delta:I.getMeshFrameDelta(v.transform.zoom)};ke.draw(P,M.TRIANGLES,Q,qn.disabled,H,Nn.backCCW,Te,Le,"terrain",ne.vertexBuffer,ne.indexBuffer,ne.segments)}P.bindFramebuffer.set(null),P.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain),function(v,I){const P=v.context,M=P.gl,H=er.unblended,Q=new In(M.LEQUAL,In.ReadWrite,[0,1]),ne=I.getTerrainMesh(),pe=I.getCoordsTexture(),ke=I.sourceCache.getRenderableTiles(),Pe=v.useProgram("terrainCoords");P.bindFramebuffer.set(I.getFramebuffer("coords").framebuffer),P.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),P.clear({color:u.aO.transparent,depth:1}),I.coordsIndex=[];for(const Le of ke){const Te=I.getTerrainData(Le.tileID);P.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,pe.texture);const Ze={u_matrix:v.transform.calculatePosMatrix(Le.tileID.toUnwrapped()),u_terrain_coords_id:(255-I.coordsIndex.length)/255,u_texture:0,u_ele_delta:I.getMeshFrameDelta(v.transform.zoom)};Pe.draw(P,M.TRIANGLES,Q,qn.disabled,H,Nn.backCCW,Ze,Te,"terrain",ne.vertexBuffer,ne.indexBuffer,ne.segments),I.coordsIndex.push(Le.tileID.key)}P.bindFramebuffer.set(null),P.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain))}renderLayer(r,l,f,m){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(m||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(v,I,P,M,H){if(v.renderPass!=="translucent")return;const Q=qn.disabled,ne=v.colorModeForRenderPass();(P._unevaluatedLayout.hasValue("text-variable-anchor")||P._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(pe,ke,Pe,Le,Te,Ze,rt){const je=ke.transform,Ke=Te==="map",it=Ze==="map";for(const st of pe){const lt=Le.getTile(st),bt=lt.getBucket(Pe);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const xt=u.ag(bt.textSizeData,je.zoom),Tt=un(lt,1,ke.transform.zoom),At=sn(st.posMatrix,it,Ke,ke.transform,Tt),yn=Pe.layout.get("icon-text-fit")!=="none"&&bt.hasIconData();if(xt){const kt=Math.pow(2,je.zoom-lt.tileID.overscaledZ);yl(bt,Ke,it,rt,je,At,st.posMatrix,kt,xt,yn,ke.style.map.terrain?(nn,vn)=>ke.style.map.terrain.getElevation(st,nn,vn):null)}}}(M,v,P,I,P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),H),P.paint.get("icon-opacity").constantOr(1)!==0&&Co(v,I,P,M,!1,P.paint.get("icon-translate"),P.paint.get("icon-translate-anchor"),P.layout.get("icon-rotation-alignment"),P.layout.get("icon-pitch-alignment"),P.layout.get("icon-keep-upright"),Q,ne),P.paint.get("text-opacity").constantOr(1)!==0&&Co(v,I,P,M,!0,P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),P.layout.get("text-keep-upright"),Q,ne),I.map.showCollisionBoxes&&(ml(v,I,P,M,P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),!0),ml(v,I,P,M,P.paint.get("icon-translate"),P.paint.get("icon-translate-anchor"),!1))})(r,l,f,m,this.style.placement.variableOffsets);break;case"circle":(function(v,I,P,M){if(v.renderPass!=="translucent")return;const H=P.paint.get("circle-opacity"),Q=P.paint.get("circle-stroke-width"),ne=P.paint.get("circle-stroke-opacity"),pe=!P.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(Q.constantOr(1)===0||ne.constantOr(1)===0))return;const ke=v.context,Pe=ke.gl,Le=v.depthModeForSublayer(0,In.ReadOnly),Te=qn.disabled,Ze=v.colorModeForRenderPass(),rt=[];for(let je=0;je<M.length;je++){const Ke=M[je],it=I.getTile(Ke),st=it.getBucket(P);if(!st)continue;const lt=st.programConfigurations.get(P.id),bt=v.useProgram("circle",lt),xt=st.layoutVertexBuffer,Tt=st.indexBuffer,At=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ke),yn={programConfiguration:lt,program:bt,layoutVertexBuffer:xt,indexBuffer:Tt,uniformValues:du(v,Ke,it,P),terrainData:At};if(pe){const kt=st.segments.get();for(const nn of kt)rt.push({segments:new u.$([nn]),sortKey:nn.sortKey,state:yn})}else rt.push({segments:st.segments,sortKey:0,state:yn})}pe&&rt.sort((je,Ke)=>je.sortKey-Ke.sortKey);for(const je of rt){const{programConfiguration:Ke,program:it,layoutVertexBuffer:st,indexBuffer:lt,uniformValues:bt,terrainData:xt}=je.state;it.draw(ke,Pe.TRIANGLES,Le,Te,Ze,Nn.disabled,bt,xt,P.id,st,lt,je.segments,P.paint,v.transform.zoom,Ke)}})(r,l,f,m);break;case"heatmap":(function(v,I,P,M){if(P.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const H=v.context,Q=H.gl,ne=qn.disabled,pe=new er([Q.ONE,Q.ONE],u.aO.transparent,[!0,!0,!0,!0]);(function(ke,Pe,Le){const Te=ke.gl;ke.activeTexture.set(Te.TEXTURE1),ke.viewport.set([0,0,Pe.width/4,Pe.height/4]);let Ze=Le.heatmapFbo;if(Ze)Te.bindTexture(Te.TEXTURE_2D,Ze.colorAttachment.get()),ke.bindFramebuffer.set(Ze.framebuffer);else{const rt=Te.createTexture();Te.bindTexture(Te.TEXTURE_2D,rt),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_S,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_T,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,Te.LINEAR),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,Te.LINEAR),Ze=Le.heatmapFbo=ke.createFramebuffer(Pe.width/4,Pe.height/4,!1,!1),function(je,Ke,it,st){var lt,bt;const xt=je.gl,Tt=(lt=je.HALF_FLOAT)!==null&&lt!==void 0?lt:xt.UNSIGNED_BYTE,At=(bt=je.RGBA16F)!==null&&bt!==void 0?bt:xt.RGBA;xt.texImage2D(xt.TEXTURE_2D,0,At,Ke.width/4,Ke.height/4,0,xt.RGBA,Tt,null),st.colorAttachment.set(it)}(ke,Pe,rt,Ze)}})(H,v,P),H.clear({color:u.aO.transparent});for(let ke=0;ke<M.length;ke++){const Pe=M[ke];if(I.hasRenderableParent(Pe))continue;const Le=I.getTile(Pe),Te=Le.getBucket(P);if(!Te)continue;const Ze=Te.programConfigurations.get(P.id),rt=v.useProgram("heatmap",Ze),{zoom:je}=v.transform;rt.draw(H,Q.TRIANGLES,In.disabled,ne,pe,Nn.disabled,ms(Pe.posMatrix,Le,je,P.paint.get("heatmap-intensity")),null,P.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,P.paint,v.transform.zoom,Ze)}H.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),function(H,Q){const ne=H.context,pe=ne.gl,ke=Q.heatmapFbo;if(!ke)return;ne.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,ke.colorAttachment.get()),ne.activeTexture.set(pe.TEXTURE1);let Pe=Q.colorRampTexture;Pe||(Pe=Q.colorRampTexture=new W(ne,Q.colorRamp,pe.RGBA)),Pe.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(ne,pe.TRIANGLES,In.disabled,qn.disabled,H.colorModeForRenderPass(),Nn.disabled,((Le,Te,Ze,rt)=>{const je=u.F();u.aN(je,0,Le.width,Le.height,0,0,1);const Ke=Le.context.gl;return{u_matrix:je,u_world:[Ke.drawingBufferWidth,Ke.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Te.paint.get("heatmap-opacity")}})(H,Q),null,Q.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,Q.paint,H.transform.zoom)}(v,P))})(r,l,f,m);break;case"line":(function(v,I,P,M){if(v.renderPass!=="translucent")return;const H=P.paint.get("line-opacity"),Q=P.paint.get("line-width");if(H.constantOr(1)===0||Q.constantOr(1)===0)return;const ne=v.depthModeForSublayer(0,In.ReadOnly),pe=v.colorModeForRenderPass(),ke=P.paint.get("line-dasharray"),Pe=P.paint.get("line-pattern"),Le=Pe.constantOr(1),Te=P.paint.get("line-gradient"),Ze=P.getCrossfadeParameters(),rt=Le?"linePattern":ke?"lineSDF":Te?"lineGradient":"line",je=v.context,Ke=je.gl;let it=!0;for(const st of M){const lt=I.getTile(st);if(Le&&!lt.patternsLoaded())continue;const bt=lt.getBucket(P);if(!bt)continue;const xt=bt.programConfigurations.get(P.id),Tt=v.context.program.get(),At=v.useProgram(rt,xt),yn=it||At.program!==Tt,kt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(st),nn=Pe.constantOr(null);if(nn&&lt.imageAtlas){const cn=lt.imageAtlas,xn=cn.patternPositions[nn.to.toString()],Tn=cn.patternPositions[nn.from.toString()];xn&&Tn&&xt.setConstantPatternPositions(xn,Tn)}const vn=kt?st:null,Rn=Le?gs(v,lt,P,Ze,vn):ke?ya(v,lt,P,ke,Ze,vn):Te?lc(v,lt,P,bt.lineClipsArray.length,vn):il(v,lt,P,vn);if(Le)je.activeTexture.set(Ke.TEXTURE0),lt.imageAtlasTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE),xt.updatePaintBuffers(Ze);else if(ke&&(yn||v.lineAtlas.dirty))je.activeTexture.set(Ke.TEXTURE0),v.lineAtlas.bind(je);else if(Te){const cn=bt.gradients[P.id];let xn=cn.texture;if(P.gradientVersion!==cn.version){let Tn=256;if(P.stepInterpolant){const gr=I.getSource().maxzoom,Hn=st.canonical.z===gr?Math.ceil(1<<v.transform.maxZoom-st.canonical.z):1;Tn=u.ac(u.aT(bt.maxLineLength/u.W*1024*Hn),256,je.maxTextureSize)}cn.gradient=u.aU({expression:P.gradientExpression(),evaluationKey:"lineProgress",resolution:Tn,image:cn.gradient||void 0,clips:bt.lineClipsArray}),cn.texture?cn.texture.update(cn.gradient):cn.texture=new W(je,cn.gradient,Ke.RGBA),cn.version=P.gradientVersion,xn=cn.texture}je.activeTexture.set(Ke.TEXTURE0),xn.bind(P.stepInterpolant?Ke.NEAREST:Ke.LINEAR,Ke.CLAMP_TO_EDGE)}At.draw(je,Ke.TRIANGLES,ne,v.stencilModeForClipping(st),pe,Nn.disabled,Rn,kt,P.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,P.paint,v.transform.zoom,xt,bt.layoutVertexBuffer2),it=!1}})(r,l,f,m);break;case"fill":(function(v,I,P,M){const H=P.paint.get("fill-color"),Q=P.paint.get("fill-opacity");if(Q.constantOr(1)===0)return;const ne=v.colorModeForRenderPass(),pe=P.paint.get("fill-pattern"),ke=v.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&H.constantOr(u.aO.transparent).a===1&&Q.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===ke){const Pe=v.depthModeForSublayer(1,v.renderPass==="opaque"?In.ReadWrite:In.ReadOnly);vl(v,I,P,M,Pe,ne,!1)}if(v.renderPass==="translucent"&&P.paint.get("fill-antialias")){const Pe=v.depthModeForSublayer(P.getPaintProperty("fill-outline-color")?2:0,In.ReadOnly);vl(v,I,P,M,Pe,ne,!0)}})(r,l,f,m);break;case"fill-extrusion":(function(v,I,P,M){const H=P.paint.get("fill-extrusion-opacity");if(H!==0&&v.renderPass==="translucent"){const Q=new In(v.context.gl.LEQUAL,In.ReadWrite,v.depthRangeFor3D);if(H!==1||P.paint.get("fill-extrusion-pattern").constantOr(1))Gs(v,I,P,M,Q,qn.disabled,er.disabled),Gs(v,I,P,M,Q,v.stencilModeFor3D(),v.colorModeForRenderPass());else{const ne=v.colorModeForRenderPass();Gs(v,I,P,M,Q,qn.disabled,ne)}}})(r,l,f,m);break;case"hillshade":(function(v,I,P,M){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const H=v.context,Q=v.depthModeForSublayer(0,In.ReadOnly),ne=v.colorModeForRenderPass(),[pe,ke]=v.renderPass==="translucent"?v.stencilConfigForOverlap(M):[{},M];for(const Pe of ke){const Le=I.getTile(Pe);Le.needsHillshadePrepare!==void 0&&Le.needsHillshadePrepare&&v.renderPass==="offscreen"?Hs(v,Le,P,Q,qn.disabled,ne):v.renderPass==="translucent"&&_l(v,Pe,Le,P,Q,pe[Pe.overscaledZ],ne)}H.viewport.set([0,0,v.width,v.height])})(r,l,f,m);break;case"raster":(function(v,I,P,M){if(v.renderPass!=="translucent"||P.paint.get("raster-opacity")===0||!M.length)return;const H=v.context,Q=H.gl,ne=I.getSource(),pe=v.useProgram("raster"),ke=v.colorModeForRenderPass(),[Pe,Le]=ne instanceof N?[{},M]:v.stencilConfigForOverlap(M),Te=Le[Le.length-1].overscaledZ,Ze=!v.options.moving;for(const rt of Le){const je=v.depthModeForSublayer(rt.overscaledZ-Te,P.paint.get("raster-opacity")===1?In.ReadWrite:In.ReadOnly,Q.LESS),Ke=I.getTile(rt);Ke.registerFadeDuration(P.paint.get("raster-fade-duration"));const it=I.findLoadedParent(rt,0),st=Ta(Ke,it,I,P,v.transform,v.style.map.terrain);let lt,bt;const xt=P.paint.get("raster-resampling")==="nearest"?Q.NEAREST:Q.LINEAR;H.activeTexture.set(Q.TEXTURE0),Ke.texture.bind(xt,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(Q.TEXTURE1),it?(it.texture.bind(xt,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),lt=Math.pow(2,it.tileID.overscaledZ-Ke.tileID.overscaledZ),bt=[Ke.tileID.canonical.x*lt%1,Ke.tileID.canonical.y*lt%1]):Ke.texture.bind(xt,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST);const Tt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(rt),At=Tt?rt:null,yn=At?At.posMatrix:v.transform.calculatePosMatrix(rt.toUnwrapped(),Ze),kt=ol(yn,bt||[0,0],lt||1,st,P);ne instanceof N?pe.draw(H,Q.TRIANGLES,je,qn.disabled,ke,Nn.disabled,kt,Tt,P.id,ne.boundsBuffer,v.quadTriangleIndexBuffer,ne.boundsSegments):pe.draw(H,Q.TRIANGLES,je,Pe[rt.overscaledZ],ke,Nn.disabled,kt,Tt,P.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}})(r,l,f,m);break;case"background":(function(v,I,P,M){const H=P.paint.get("background-color"),Q=P.paint.get("background-opacity");if(Q===0)return;const ne=v.context,pe=ne.gl,ke=v.transform,Pe=ke.tileSize,Le=P.paint.get("background-pattern");if(v.isPatternMissing(Le))return;const Te=!Le&&H.a===1&&Q===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==Te)return;const Ze=qn.disabled,rt=v.depthModeForSublayer(0,Te==="opaque"?In.ReadWrite:In.ReadOnly),je=v.colorModeForRenderPass(),Ke=v.useProgram(Le?"backgroundPattern":"background"),it=M||ke.coveringTiles({tileSize:Pe,terrain:v.style.map.terrain});Le&&(ne.activeTexture.set(pe.TEXTURE0),v.imageManager.bind(v.context));const st=P.getCrossfadeParameters();for(const lt of it){const bt=M?lt.posMatrix:v.transform.calculatePosMatrix(lt.toUnwrapped()),xt=Le?uc(bt,Q,v,Le,{tileID:lt,tileSize:Pe},st):Gh(bt,Q,H),Tt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(lt);Ke.draw(ne,pe.TRIANGLES,rt,Ze,je,Nn.disabled,xt,Tt,P.id,v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}})(r,0,f,m);break;case"custom":(function(v,I,P){const M=v.context,H=P.implementation;if(v.renderPass==="offscreen"){const Q=H.prerender;Q&&(v.setCustomLayerDefaults(),M.setColorMode(v.colorModeForRenderPass()),Q.call(H,M.gl,v.transform.customLayerMatrix()),M.setDirty(),v.setBaseState())}else if(v.renderPass==="translucent"){v.setCustomLayerDefaults(),M.setColorMode(v.colorModeForRenderPass()),M.setStencilMode(qn.disabled);const Q=H.renderingMode==="3d"?new In(v.context.gl.LEQUAL,In.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,In.ReadOnly);M.setDepthMode(Q),H.render(M.gl,v.transform.customLayerMatrix()),M.setDirty(),v.setBaseState(),M.bindFramebuffer.set(null)}})(r,0,f)}}translatePosMatrix(r,l,f,m,v){if(!f[0]&&!f[1])return r;const I=v?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(I){const H=Math.sin(I),Q=Math.cos(I);f=[f[0]*Q-f[1]*H,f[0]*H+f[1]*Q]}const P=[v?f[0]:un(l,f[0],this.transform.zoom),v?f[1]:un(l,f[1],this.transform.zoom),0],M=new Float32Array(16);return u.H(M,r,P),M}saveTileTexture(r){const l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const l=this._tileTextures[r];return l&&l.length>0?l.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const l=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!l||!f}useProgram(r,l){this.cache=this.cache||{};const f=r+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new qo(this.context,pa[r],l,cc[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new W(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:l}=this.context.gl;return this.width!==r||this.height!==l}}class Jo{constructor(r,l){this.points=r,this.planes=l}static fromInvProjectionMatrix(r,l,f){const m=Math.pow(2,f),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const M=1/(P=u.af([],P,r))[3]/l*m;return u.a$(P,P,[M,M,1/P[3],M])}),I=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const M=function(pe,ke){var Pe=ke[0],Le=ke[1],Te=ke[2],Ze=Pe*Pe+Le*Le+Te*Te;return Ze>0&&(Ze=1/Math.sqrt(Ze)),pe[0]=ke[0]*Ze,pe[1]=ke[1]*Ze,pe[2]=ke[2]*Ze,pe}([],function(pe,ke,Pe){var Le=ke[0],Te=ke[1],Ze=ke[2],rt=Pe[0],je=Pe[1],Ke=Pe[2];return pe[0]=Te*Ke-Ze*je,pe[1]=Ze*rt-Le*Ke,pe[2]=Le*je-Te*rt,pe}([],j([],v[P[0]],v[P[1]]),j([],v[P[2]],v[P[1]]))),H=-((Q=M)[0]*(ne=v[P[1]])[0]+Q[1]*ne[1]+Q[2]*ne[2]);var Q,ne;return M.concat(H)});return new Jo(v,I)}}class Po{constructor(r,l){this.min=r,this.max=l,this.center=function(f,m,v){return f[0]=.5*m[0],f[1]=.5*m[1],f[2]=.5*m[2],f}([],function(f,m,v){return f[0]=m[0]+v[0],f[1]=m[1]+v[1],f[2]=m[2]+v[2],f}([],this.min,this.max))}quadrant(r){const l=[r%2==0,r<2],f=V(this.min),m=V(this.max);for(let v=0;v<l.length;v++)f[v]=l[v]?this.min[v]:this.center[v],m[v]=l[v]?this.center[v]:this.max[v];return m[2]=this.max[2],new Po(f,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const l=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let m=0;m<r.planes.length;m++){const v=r.planes[m];let I=0;for(let P=0;P<l.length;P++)u.b0(v,l[P])>=0&&I++;if(I===0)return 0;I!==l.length&&(f=!1)}if(f)return 2;for(let m=0;m<3;m++){let v=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let P=0;P<r.points.length;P++){const M=r.points[P][m]-this.min[m];v=Math.min(v,M),I=Math.max(I,M)}if(I<0||v>this.max[m]-this.min[m])return 0}return 1}}class Qo{constructor(r=0,l=0,f=0,m=0){if(isNaN(r)||r<0||isNaN(l)||l<0||isNaN(f)||f<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=f,this.right=m}interpolate(r,l,f){return l.top!=null&&r.top!=null&&(this.top=u.z.number(r.top,l.top,f)),l.bottom!=null&&r.bottom!=null&&(this.bottom=u.z.number(r.bottom,l.bottom,f)),l.left!=null&&r.left!=null&&(this.left=u.z.number(r.left,l.left,f)),l.right!=null&&r.right!=null&&(this.right=u.z.number(r.right,l.right,f)),this}getCenter(r,l){const f=u.ac((this.left+r-this.right)/2,0,r),m=u.ac((this.top+l-this.bottom)/2,0,l);return new u.P(f,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Qo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Sl=85.051129;class Ia{constructor(r,l,f,m,v){this.tileSize=512,this._renderWorldCopies=v===void 0||!!v,this._minZoom=r||0,this._maxZoom=l||22,this._minPitch=f??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Qo,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new Ia(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const l=-u.b1(r,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var f=new u.A(4);return u.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,m,v){var I=m[0],P=m[1],M=m[2],H=m[3],Q=Math.sin(v),ne=Math.cos(v);f[0]=I*ne+M*Q,f[1]=P*ne+H*Q,f[2]=I*-Q+M*ne,f[3]=P*-Q+H*ne}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const l=u.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const l=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.tileZoom=Math.max(0,Math.floor(l)),this.scale=this.zoomScale(l),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,l,f){this._unmodified=!1,this._edgeInsets.interpolate(r,l,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const l=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(r){const l=[new u.b2(0,r)];if(this._renderWorldCopies){const f=this.pointCoordinate(new u.P(0,0)),m=this.pointCoordinate(new u.P(this.width,0)),v=this.pointCoordinate(new u.P(this.width,this.height)),I=this.pointCoordinate(new u.P(0,this.height)),P=Math.floor(Math.min(f.x,m.x,v.x,I.x)),M=Math.floor(Math.max(f.x,m.x,v.x,I.x)),H=1;for(let Q=P-H;Q<=M+H;Q++)Q!==0&&l.push(new u.b2(Q,r))}return l}coveringTiles(r){var l,f;let m=this.coveringZoomLevel(r);const v=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const I=this.pointCoordinate(this.getCameraPoint()),P=u.Y.fromLngLat(this.center),M=Math.pow(2,m),H=[M*I.x,M*I.y,0],Q=[M*P.x,M*P.y,0],ne=Jo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let pe=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(pe=m);const ke=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Pe=je=>({aabb:new Po([je*M,0,0],[(je+1)*M,M,0]),zoom:0,x:0,y:0,wrap:je,fullyVisible:!1}),Le=[],Te=[],Ze=m,rt=r.reparseOverscaled?v:m;if(this._renderWorldCopies)for(let je=1;je<=3;je++)Le.push(Pe(-je)),Le.push(Pe(je));for(Le.push(Pe(0));Le.length>0;){const je=Le.pop(),Ke=je.x,it=je.y;let st=je.fullyVisible;if(!st){const At=je.aabb.intersects(ne);if(At===0)continue;st=At===2}const lt=r.terrain?H:Q,bt=je.aabb.distanceX(lt),xt=je.aabb.distanceY(lt),Tt=Math.max(Math.abs(bt),Math.abs(xt));if(je.zoom===Ze||Tt>ke+(1<<Ze-je.zoom)-2&&je.zoom>=pe){const At=Ze-je.zoom,yn=H[0]-.5-(Ke<<At),kt=H[1]-.5-(it<<At);Te.push({tileID:new u.Q(je.zoom===Ze?rt:je.zoom,je.wrap,je.zoom,Ke,it),distanceSq:D([Q[0]-.5-Ke,Q[1]-.5-it]),tileDistanceToCamera:Math.sqrt(yn*yn+kt*kt)})}else for(let At=0;At<4;At++){const yn=(Ke<<1)+At%2,kt=(it<<1)+(At>>1),nn=je.zoom+1;let vn=je.aabb.quadrant(At);if(r.terrain){const Rn=new u.Q(nn,je.wrap,nn,yn,kt),cn=r.terrain.getMinMaxElevation(Rn),xn=(l=cn.minElevation)!==null&&l!==void 0?l:this.elevation,Tn=(f=cn.maxElevation)!==null&&f!==void 0?f:this.elevation;vn=new Po([vn.min[0],vn.min[1],xn],[vn.max[0],vn.max[1],Tn])}Le.push({aabb:vn,zoom:nn,x:yn,y:kt,wrap:je.wrap,fullyVisible:st})}}return Te.sort((je,Ke)=>je.distanceSq-Ke.distanceSq).map(je=>je.tileID)}resize(r,l){this.width=r,this.height=l,this.pixelsToGLUnits=[2/r,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const l=u.ac(r.lat,-85.051129,Sl);return new u.P(u.N(r.lng)*this.worldSize,u.O(l)*this.worldSize)}unproject(r){return new u.Y(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const l=this.elevation,f=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,m=this.pointLocation(this.centerPoint,r),v=r.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-v))return;const I=f+l-v,P=Math.cos(this._pitch)*this.cameraToCenterDistance/I/u.b3(1,m.lat),M=this.scaleZoom(P/this.tileSize);this._elevation=v,this._center=m,this.zoom=M}setLocationAtPoint(r,l){const f=this.pointCoordinate(l),m=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(r),I=new u.Y(v.x-(f.x-m.x),v.y-(f.y-m.y));this.center=this.coordinateLocation(I),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,l){return l?this.coordinatePoint(this.locationCoordinate(r),l.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,l){return this.coordinateLocation(this.pointCoordinate(r,l))}locationCoordinate(r){return u.Y.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,l){if(l){const pe=l.pointCoordinate(r);if(pe!=null)return pe}const f=[r.x,r.y,0,1],m=[r.x,r.y,1,1];u.af(f,f,this.pixelMatrixInverse),u.af(m,m,this.pixelMatrixInverse);const v=f[3],I=m[3],P=f[1]/v,M=m[1]/I,H=f[2]/v,Q=m[2]/I,ne=H===Q?0:(0-H)/(Q-H);return new u.Y(u.z.number(f[0]/v,m[0]/I,ne)/this.worldSize,u.z.number(P,M,ne)/this.worldSize)}coordinatePoint(r,l=0,f=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,l,1];return u.af(m,m,f),new u.P(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Bt().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Bt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Sl])}calculatePosMatrix(r,l=!1){const f=r.key,m=l?this._alignedPosMatrixCache:this._posMatrixCache;if(m[f])return m[f];const v=r.canonical,I=this.worldSize/this.zoomScale(v.z),P=v.x+Math.pow(2,v.z)*r.wrap,M=u.an(new Float64Array(16));return u.H(M,M,[P*I,v.y*I,0]),u.J(M,M,[I/u.W,I/u.W,1]),u.K(M,l?this.alignedProjMatrix:this.projMatrix,M),m[f]=new Float32Array(M),m[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,l){l=u.ac(+l,this.minZoom,this.maxZoom);const f={center:new u.M(r.lng,r.lat),zoom:l};let m=this.lngRange;if(!this._renderWorldCopies&&m===null){const je=179.9999999999;m=[-je,je]}const v=this.tileSize*this.zoomScale(f.zoom);let I=0,P=v,M=0,H=v,Q=0,ne=0;const{x:pe,y:ke}=this.size;if(this.latRange){const je=this.latRange;I=u.O(je[1])*v,P=u.O(je[0])*v,P-I<ke&&(Q=ke/(P-I))}m&&(M=u.b1(u.N(m[0])*v,0,v),H=u.b1(u.N(m[1])*v,0,v),H<M&&(H+=v),H-M<pe&&(ne=pe/(H-M)));const{x:Pe,y:Le}=this.project.call({worldSize:v},r);let Te,Ze;const rt=Math.max(ne||0,Q||0);if(rt){const je=new u.P(ne?(H+M)/2:Pe,Q?(P+I)/2:Le);return f.center=this.unproject.call({worldSize:v},je).wrap(),f.zoom+=this.scaleZoom(rt),f}if(this.latRange){const je=ke/2;Le-je<I&&(Ze=I+je),Le+je>P&&(Ze=P-je)}if(m){const je=(M+H)/2;let Ke=Pe;this._renderWorldCopies&&(Ke=u.b1(Pe,je-v/2,je+v/2));const it=pe/2;Ke-it<M&&(Te=M+it),Ke+it>H&&(Te=H-it)}if(Te!==void 0||Ze!==void 0){const je=new u.P(Te??Pe,Ze??Le);f.center=this.unproject.call({worldSize:v},je).wrap()}return f}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:l,zoom:f}=this.getConstrained(this.center,this.zoom);this.center=l,this.zoom=f,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,l=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b3(1,this.center.lat)*this.worldSize;let m=u.an(new Float64Array(16));u.J(m,m,[this.width/2,-this.height/2,1]),u.H(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=u.an(new Float64Array(16)),u.J(m,m,[1,-1,1]),u.H(m,m,[-1,-1,0]),u.J(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const v=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),I=Math.min(this.elevation,this.minElevationForCurrentTile),P=v-I*this._pixelPerMeter/Math.cos(this._pitch),M=I<0?P:v,H=Math.PI/2+this._pitch,Q=this._fov*(.5+r.y/this.height),ne=Math.sin(Q)*M/Math.sin(u.ac(Math.PI-H-Q,.01,Math.PI-.01)),pe=this.getHorizon(),ke=2*Math.atan(pe/this.cameraToCenterDistance)*(.5+r.y/(2*pe)),Pe=Math.sin(ke)*M/Math.sin(u.ac(Math.PI-H-ke,.01,Math.PI-.01)),Le=Math.min(ne,Pe),Te=1.01*(Math.cos(Math.PI/2-this._pitch)*Le+M),Ze=this.height/50;m=new Float64Array(16),u.b4(m,this._fov,this.width/this.height,Ze,Te),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,u.J(m,m,[1,-1,1]),u.H(m,m,[0,0,-this.cameraToCenterDistance]),u.b5(m,m,this._pitch),u.ad(m,m,this.angle),u.H(m,m,[-l,-f,0]),this.mercatorMatrix=u.J([],m,[this.worldSize,this.worldSize,this.worldSize]),u.J(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.K(new Float64Array(16),this.labelPlaneMatrix,m),u.H(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=u.ar([],m),this.pixelMatrix3D=u.K(new Float64Array(16),this.labelPlaneMatrix,m);const rt=this.width%2/2,je=this.height%2/2,Ke=Math.cos(this.angle),it=Math.sin(this.angle),st=l-Math.round(l)+Ke*rt+it*je,lt=f-Math.round(f)+Ke*je+it*rt,bt=new Float64Array(m);if(u.H(bt,bt,[st>.5?st-1:st,lt>.5?lt-1:lt,0]),this.alignedProjMatrix=bt,m=u.ar(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.af(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const l=this.getCameraPoint();if(r.length===1)return[r[0],l];{let f=l.x,m=l.y,v=l.x,I=l.y;for(const P of r)f=Math.min(f,P.x),m=Math.min(m,P.y),v=Math.max(v,P.x),I=Math.max(I,P.y);return[new u.P(f,m),new u.P(v,m),new u.P(v,I),new u.P(f,I),new u.P(f,m)]}}lngLatToCameraDepth(r,l){const f=this.locationCoordinate(r),m=[f.x*this.worldSize,f.y*this.worldSize,l,1];return u.af(m,m,this.projMatrix),m[2]/m[3]}}function El(y,r){let l,f=!1,m=null,v=null;const I=()=>{m=null,f&&(y.apply(v,l),m=setTimeout(I,r),f=!1)};return(...P)=>(f=!0,v=this,l=P,m||I(),m)}class G{constructor(r){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(f=m)}),(f&&f[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(l.length>=3&&!l.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:f,pitch:+(l[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,l)}catch{}},this._updateHash=El(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const l=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,m),I=Math.round(l.lng*v)/v,P=Math.round(l.lat*v)/v,M=this._map.getBearing(),H=this._map.getPitch();let Q="";if(Q+=r?`/${I}/${P}/${f}`:`${f}/${P}/${I}`,(M||H)&&(Q+="/"+Math.round(10*M)/10),H&&(Q+=`/${Math.round(H)}`),this._hashName){const ne=this._hashName;let pe=!1;const ke=window.location.hash.slice(1).split("&").map(Pe=>{const Le=Pe.split("=")[0];return Le===ne?(pe=!0,`${Le}=${Q}`):Pe}).filter(Pe=>Pe);return pe||ke.push(`${ne}=${Q}`),`#${ke.join("&")}`}return`#${Q}`}}const ye={linearity:.3,easing:u.b6(0,0,.3,1)},Be=u.e({deceleration:2500,maxSpeed:1400},ye),at=u.e({deceleration:20,maxSpeed:1400},ye),Ot=u.e({deceleration:1e3,maxSpeed:360},ye),Ct=u.e({deceleration:1e3,maxSpeed:90},ye);class Ht{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:w.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,l=w.now();for(;r.length>0&&l-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)l.zoom+=v.zoomDelta||0,l.bearing+=v.bearingDelta||0,l.pitch+=v.pitchDelta||0,v.panDelta&&l.pan._add(v.panDelta),v.around&&(l.around=v.around),v.pinchAround&&(l.pinchAround=v.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(l.pan.mag()){const v=gn(l.pan.mag(),f,u.e({},Be,r||{}));m.offset=l.pan.mult(v.amount/l.pan.mag()),m.center=this._map.transform.center,Wt(m,v)}if(l.zoom){const v=gn(l.zoom,f,at);m.zoom=this._map.transform.zoom+v.amount,Wt(m,v)}if(l.bearing){const v=gn(l.bearing,f,Ot);m.bearing=this._map.transform.bearing+u.ac(v.amount,-179,179),Wt(m,v)}if(l.pitch){const v=gn(l.pitch,f,Ct);m.pitch=this._map.transform.pitch+v.amount,Wt(m,v)}if(m.zoom||m.bearing){const v=l.pinchAround===void 0?l.around:l.pinchAround;m.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),u.e(m,{noMoveStart:!0})}}function Wt(y,r){(!y.duration||y.duration<r.duration)&&(y.duration=r.duration,y.easing=r.easing)}function gn(y,r,l){const{maxSpeed:f,linearity:m,deceleration:v}=l,I=u.ac(y*m/(r/1e3),-f,f),P=Math.abs(I)/(v*m);return{easing:l.easing,duration:1e3*P,amount:I*(P/2)}}class En extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,f,m={}){const v=T.mousePos(l.getCanvas(),f),I=l.unproject(v);super(r,u.e({point:v,lngLat:I,originalEvent:f},m)),this._defaultPrevented=!1,this.target=l}}class An extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,f){const m=r==="touchend"?f.changedTouches:f.touches,v=T.touchPos(l.getCanvasContainer(),m),I=v.map(M=>l.unproject(M)),P=v.reduce((M,H,Q,ne)=>M.add(H.div(ne.length)),new u.P(0,0));super(r,{points:v,point:P,lngLats:I,lngLat:l.unproject(P),originalEvent:f}),this._defaultPrevented=!1}}class Kn extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Un{constructor(r,l){this._map=r,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Kn(r.type,this._map,r))}mousedown(r,l){return this._mousedownPos=l,this._firePreventable(new En(r.type,this._map,r))}mouseup(r){this._map.fire(new En(r.type,this._map,r))}click(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new En(r.type,this._map,r))}dblclick(r){return this._firePreventable(new En(r.type,this._map,r))}mouseover(r){this._map.fire(new En(r.type,this._map,r))}mouseout(r){this._map.fire(new En(r.type,this._map,r))}touchstart(r){return this._firePreventable(new An(r.type,this._map,r))}touchmove(r){this._map.fire(new An(r.type,this._map,r))}touchend(r){this._map.fire(new An(r.type,this._map,r))}touchcancel(r){this._map.fire(new An(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Yn{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new En(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new En("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new En(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class cr{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class Rr{constructor(r,l){this._map=r,this._tr=new cr(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(T.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(r,l){if(!this._active)return;const f=l;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=f,this._box||(this._box=T.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const v=Math.min(m.x,f.x),I=Math.max(m.x,f.x),P=Math.min(m.y,f.y),M=Math.max(m.y,f.y);T.setTransform(this._box,`translate(${v}px,${P}px)`),this._box.style.width=I-v+"px",this._box.style.height=M-P+"px"}mouseupWindow(r,l){if(!this._active||r.button!==0)return;const f=this._startPos,m=l;if(this.reset(),T.suppressClick(),f.x!==m.x||f.y!==m.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:v=>v.fitScreenCoordinates(f,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,l){return this._map.fire(new u.k(r,{originalEvent:l}))}}function ri(y,r){if(y.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${r.length}`);const l={};for(let f=0;f<y.length;f++)l[y[f].identifier]=r[f];return l}class _s{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,l,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(m){const v=new u.P(0,0);for(const I of m)v._add(I);return v.div(m.length)}(l),this.touches=ri(f,l)))}touchmove(r,l,f){if(this.aborted||!this.centroid)return;const m=ri(f,l);for(const v in this.touches){const I=m[v];(!I||I.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(r,l,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Tl{constructor(r){this.singleTap=new _s(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,l,f){this.singleTap.touchstart(r,l,f)}touchmove(r,l,f){this.singleTap.touchmove(r,l,f)}touchend(r,l,f){const m=this.singleTap.touchend(r,l,f);if(m){const v=r.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(m)<30;if(v&&I||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Cl{constructor(r){this._tr=new cr(r),this._zoomIn=new Tl({numTouches:1,numTaps:2}),this._zoomOut=new Tl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,l,f){this._zoomIn.touchstart(r,l,f),this._zoomOut.touchstart(r,l,f)}touchmove(r,l,f){this._zoomIn.touchmove(r,l,f),this._zoomOut.touchmove(r,l,f)}touchend(r,l,f){const m=this._zoomIn.touchend(r,l,f),v=this._zoomOut.touchend(r,l,f),I=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(m)},{originalEvent:r})}):v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(v)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ko{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const l=this._moveFunction(...r);if(l.bearingDelta||l.pitchDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(r,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=l.length?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,l){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=l.length?l[0]:l;return!this._moved&&m.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(f,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&T.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Su={0:1,2:2};class es{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const l=T.mouseButton(r);this._eventButton=l}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(l,f){const m=Su[f];return l.buttons===void 0||(l.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return T.mouseButton(r)===this._eventButton}}class Ut{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const _c=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(r){r.preventDefault()}},Il=({enable:y,clickTolerance:r,bearingDegreesPerPixelMoved:l=.8})=>{const f=new es({checkCorrectEvent:m=>T.mouseButton(m)===0&&m.ctrlKey||T.mouseButton(m)===2});return new ko({clickTolerance:r,move:(m,v)=>({bearingDelta:(v.x-m.x)*l}),moveStateManager:f,enable:y,assignEvents:_c})},Al=({enable:y,clickTolerance:r,pitchDegreesPerPixelMoved:l=-.5})=>{const f=new es({checkCorrectEvent:m=>T.mouseButton(m)===0&&m.ctrlKey||T.mouseButton(m)===2});return new ko({clickTolerance:r,move:(m,v)=>({pitchDelta:(v.y-m.y)*l}),moveStateManager:f,enable:y,assignEvents:_c})};class tp{constructor(r,l){this._clickTolerance=r.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(r,l,f){return this._calculateTransform(r,l,f)}touchmove(r,l,f){if(this._active&&!(f.length<this.minTouchs()))return r.preventDefault(),this._calculateTransform(r,l,f)}touchend(r,l,f){this._calculateTransform(r,l,f),this._active&&f.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,l,f){f.length>0&&(this._active=!0);const m=ri(f,l),v=new u.P(0,0),I=new u.P(0,0);let P=0;for(const H in m){const Q=m[H],ne=this._touches[H];ne&&(v._add(Q),I._add(Q.sub(ne)),P++,m[H]=Q)}if(this._touches=m,P<this.minTouchs()||!I.mag())return;const M=I.div(P);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(P),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Lt{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,l,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([l[0],l[1]]))}touchmove(r,l,f){if(!this._firstTwoTouches)return;r.preventDefault();const[m,v]=this._firstTwoTouches,I=Pl(f,l,m),P=Pl(f,l,v);if(!I||!P)return;const M=this._aroundCenter?null:I.add(P).div(2);return this._move([I,P],M,r)}touchend(r,l,f){if(!this._firstTwoTouches)return;const[m,v]=this._firstTwoTouches,I=Pl(f,l,m),P=Pl(f,l,v);I&&P||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Pl(y,r,l){for(let f=0;f<y.length;f++)if(y[f].identifier===l)return r[f]}function np(y,r){return Math.log(y/r)/Math.LN2}class rp extends Lt{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,l){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(np(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:np(this._distance,f),pinchAround:l}}}function xc(y,r){return 180*y.angleWith(r)/Math.PI}class qh extends Lt{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,l,f){const m=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:xc(this._vector,m),pinchAround:l}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const l=25/(Math.PI*this._minDiameter)*360,f=xc(r,this._startVector);return Math.abs(f)<l}}function wc(y){return Math.abs(y.y)>Math.abs(y.x)}class ip extends Lt{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,l,f){super.touchstart(r,l,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,wc(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,l,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),v=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,v,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(r,l,f){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,v=l.mag()>=2;if(!m&&!v)return;if(!m||!v)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const I=r.y>0==l.y>0;return wc(r)&&wc(l)&&I}}const fy={panStep:100,bearingStep:15,pitchStep:10};class Ws{constructor(r){this._tr=new cr(r);const l=fy;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let l=0,f=0,m=0,v=0,I=0;switch(r.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),v=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),v=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),I=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(f=0,m=0),{cameraAnimation:P=>{const M=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:or,zoom:l?Math.round(M.zoom)+l*(r.shiftKey?2:1):M.zoom,bearing:M.bearing+f*this._bearingStep,pitch:M.pitch+m*this._pitchStep,offset:[-v*this._panStep,-I*this._panStep],center:M.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function or(y){return y*(2-y)}const Eu=4.000244140625;class bc{constructor(r,l){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new cr(r),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!r[this._map.cooperativeGestures._bypassKey])return;let l=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=w.now(),m=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,l!==0&&l%Eu==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=T.mousePos(this._map.getCanvas(),r),f=this._tr;this._around=l.y>f.transform.height/2-f.transform.getHorizon()?u.M.convert(this._aroundCenter?f.center:f.unproject(l)):u.M.convert(f.center),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>Eu?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&M!==0&&(M=1/M);const H=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(H*M))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,m=this._easing;let v,I=!1;if(this._type==="wheel"&&f&&m){const P=Math.min((w.now()-this._lastWheelEventTime)/200,1),M=m(P);v=u.z.number(f,l,M),P<1?this._frameId||(this._frameId=!0):I=!0}else v=l,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:v-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let l=u.b7;if(this._prevEase){const f=this._prevEase,m=(w.now()-f.start)/f.duration,v=f.easing(m+.01)-f.easing(m),I=.27/Math.sqrt(v*v+1e-4)*.01,P=Math.sqrt(.0729-I*I);l=u.b6(I,P,.25,1)}return this._prevEase={start:w.now(),duration:r,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Kh{constructor(r,l){this._clickZoom=r,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class op{constructor(r){this._tr=new cr(r),this.reset()}reset(){this._active=!1}dblclick(r,l){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sp{constructor(){this._tap=new Tl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,l,f){if(!this._swipePoint)if(this._tapTime){const m=l[0],v=r.timeStamp-this._tapTime<500,I=this._tapPoint.dist(m)<30;v&&I?f.length>0&&(this._swipePoint=m,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,l,f)}touchmove(r,l,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const m=l[0],v=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(r,l,f)}touchend(r,l,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const m=this._tap.touchend(r,l,f);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ap{constructor(r,l,f){this._el=r,this._mousePan=l,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Mo{constructor(r,l,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=l,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Tu{constructor(r,l,f,m){this._el=r,this._touchZoom=l,this._touchRotate=f,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class qt{constructor(r,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=T.create("div","maplibregl-cooperative-gesture-screen",r);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=l,this._container.appendChild(m);const v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=f,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(T.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(r){this._onCooperativeGesture(r.touches.length===1)}wheel(r){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!r[this._bypassKey])}_onCooperativeGesture(r){this._enabled&&r&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const tn=y=>y.zoom||y.drag||y.pitch||y.rotate;class Sc extends u.k{}function Cu(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Yh{constructor(r,l){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,v)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const I=m.type==="renderFrame"?void 0:m,P={needsRenderFrame:!1},M={},H={},Q=m.touches,ne=Q?this._getMapTouches(Q):void 0,pe=ne?T.touchPos(this._map.getCanvas(),ne):T.mousePos(this._map.getCanvas(),m);for(const{handlerName:Le,handler:Te,allowed:Ze}of this._handlers){if(!Te.isEnabled())continue;let rt;this._blockedByActive(H,Ze,Le)?Te.reset():Te[v||m.type]&&(rt=Te[v||m.type](m,pe,ne),this.mergeHandlerResult(P,M,rt,Le,I),rt&&rt.needsRenderFrame&&this._triggerRenderFrame()),(rt||Te.isActive())&&(H[Le]=Te)}const ke={};for(const Le in this._previousActiveHandlers)H[Le]||(ke[Le]=I);this._previousActiveHandlers=H,(Object.keys(ke).length||Cu(P))&&(this._changes.push([P,M,ke]),this._triggerRenderFrame()),(Object.keys(H).length||Cu(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Pe}=P;Pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pe(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ht(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,v,I]of this._listeners)T.addEventListener(m,v,m===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[r,l,f]of this._listeners)T.removeEventListener(r,l,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const l=this._map,f=l.getCanvasContainer();this._add("mapEvent",new Un(l,r));const m=l.boxZoom=new Rr(l,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const v=l.cooperativeGestures=new qt(l,r.cooperativeGestures);this._add("cooperativeGestures",v),r.cooperativeGestures&&v.enable();const I=new Cl(l),P=new op(l);l.doubleClickZoom=new Kh(P,I),this._add("tapZoom",I),this._add("clickZoom",P),r.interactive&&r.doubleClickZoom&&l.doubleClickZoom.enable();const M=new sp;this._add("tapDragZoom",M);const H=l.touchPitch=new ip(l);this._add("touchPitch",H),r.interactive&&r.touchPitch&&l.touchPitch.enable(r.touchPitch);const Q=Il(r),ne=Al(r);l.dragRotate=new Mo(r,Q,ne),this._add("mouseRotate",Q,["mousePitch"]),this._add("mousePitch",ne,["mouseRotate"]),r.interactive&&r.dragRotate&&l.dragRotate.enable();const pe=(({enable:rt,clickTolerance:je})=>{const Ke=new es({checkCorrectEvent:it=>T.mouseButton(it)===0&&!it.ctrlKey});return new ko({clickTolerance:je,move:(it,st)=>({around:st,panDelta:st.sub(it)}),activateOnStart:!0,moveStateManager:Ke,enable:rt,assignEvents:_c})})(r),ke=new tp(r,l);l.dragPan=new ap(f,pe,ke),this._add("mousePan",pe),this._add("touchPan",ke,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&l.dragPan.enable(r.dragPan);const Pe=new qh,Le=new rp;l.touchZoomRotate=new Tu(f,Le,Pe,M),this._add("touchRotate",Pe,["touchPan","touchZoom"]),this._add("touchZoom",Le,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&l.touchZoomRotate.enable(r.touchZoomRotate);const Te=l.scrollZoom=new bc(l,()=>this._triggerRenderFrame());this._add("scrollZoom",Te,["mousePan"]),r.interactive&&r.scrollZoom&&l.scrollZoom.enable(r.scrollZoom);const Ze=l.keyboard=new Ws(l);this._add("keyboard",Ze),r.interactive&&r.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new Yn(l))}_add(r,l,f){this._handlers.push({handlerName:r,handler:l,allowed:f}),this._handlersById[r]=l}stop(r){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!tn(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,l,f){for(const m in r)if(m!==f&&(!l||l.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const l=[];for(const f of r)this._el.contains(f.target)&&l.push(f);return l}mergeHandlerResult(r,l,f,m,v){if(!f)return;u.e(r,f);const I={handlerName:m,originalEvent:f.originalEvent||v};f.zoomDelta!==void 0&&(l.zoom=I),f.panDelta!==void 0&&(l.drag=I),f.pitchDelta!==void 0&&(l.pitch=I),f.bearingDelta!==void 0&&(l.rotate=I)}_applyChanges(){const r={},l={},f={};for(const[m,v,I]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),u.e(l,v),u.e(f,I);this._updateMapTransform(r,l,f),this._changes=[]}_updateMapTransform(r,l,f){const m=this._map,v=m._getTransformForUpdate(),I=m.terrain;if(!(Cu(r)||I&&this._terrainMovement))return this._fireEvents(l,f,!0);let{panDelta:P,zoomDelta:M,bearingDelta:H,pitchDelta:Q,around:ne,pinchAround:pe}=r;pe!==void 0&&(ne=pe),m._stop(!0),ne=ne||m.transform.centerPoint;const ke=v.pointLocation(P?ne.sub(P):ne);H&&(v.bearing+=H),Q&&(v.pitch+=Q),M&&(v.zoom+=M),I?this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?v.center=v.pointLocation(v.centerPoint.sub(P)):v.setLocationAtPoint(ke,ne):(this._terrainMovement=!0,this._map._elevationFreeze=!0,v.setLocationAtPoint(ke,ne),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,v.recalculateZoom(m.terrain)})):v.setLocationAtPoint(ke,ne),m._applyUpdatedTransform(v),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,f,!0)}_fireEvents(r,l,f){const m=tn(this._eventsInProgress),v=tn(r),I={};for(const Q in r){const{originalEvent:ne}=r[Q];this._eventsInProgress[Q]||(I[`${Q}start`]=ne),this._eventsInProgress[Q]=r[Q]}!m&&v&&this._fireEvent("movestart",v.originalEvent);for(const Q in I)this._fireEvent(Q,I[Q]);v&&this._fireEvent("move",v.originalEvent);for(const Q in r){const{originalEvent:ne}=r[Q];this._fireEvent(Q,ne)}const P={};let M;for(const Q in this._eventsInProgress){const{handlerName:ne,originalEvent:pe}=this._eventsInProgress[Q];this._handlersById[ne].isActive()||(delete this._eventsInProgress[Q],M=l[ne]||pe,P[`${Q}end`]=M)}for(const Q in P)this._fireEvent(Q,P[Q]);const H=tn(this._eventsInProgress);if(f&&(m||v)&&!H){this._updatingCamera=!0;const Q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ne=pe=>pe!==0&&-this._bearingSnap<pe&&pe<this._bearingSnap;!Q||!Q.essential&&w.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:M})),ne(this._map.getBearing())&&this._map.resetNorth()):(ne(Q.bearing||this._map.getBearing())&&(Q.bearing=0),Q.freezeElevation=!0,this._map.easeTo(Q,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(r,l){this._map.fire(new u.k(r,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Sc("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Li extends u.E{constructor(r,l){super(),this._renderFrameCallback=()=>{const f=Math.min((w.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=l.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.M(this.transform.center.lng,this.transform.center.lat)}setCenter(r,l){return this.jumpTo({center:r},l)}panBy(r,l,f){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},l),f)}panTo(r,l,f){return this.easeTo(u.e({center:r},l),f)}getZoom(){return this.transform.zoom}setZoom(r,l){return this.jumpTo({zoom:r},l),this}zoomTo(r,l,f){return this.easeTo(u.e({zoom:r},l),f)}zoomIn(r,l){return this.zoomTo(this.getZoom()+1,r,l),this}zoomOut(r,l){return this.zoomTo(this.getZoom()-1,r,l),this}getBearing(){return this.transform.bearing}setBearing(r,l){return this.jumpTo({bearing:r},l),this}getPadding(){return this.transform.padding}setPadding(r,l){return this.jumpTo({padding:r},l),this}rotateTo(r,l,f){return this.easeTo(u.e({bearing:r},l),f)}resetNorth(r,l){return this.rotateTo(0,u.e({duration:1e3},r),l),this}resetNorthPitch(r,l){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),l),this}snapToNorth(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this}getPitch(){return this.transform.pitch}setPitch(r,l){return this.jumpTo({pitch:r},l),this}cameraForBounds(r,l){r=Bt.convert(r);const f=l&&l.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,l)}_cameraForBoxAndBearing(r,l,f,m){const v={top:0,bottom:0,right:0,left:0};if(typeof(m=u.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const At=m.padding;m.padding={top:At,bottom:At,right:At,left:At}}m.padding=u.e(v,m.padding);const I=this.transform,P=I.padding,M=new Bt(r,l),H=I.project(M.getNorthWest()),Q=I.project(M.getNorthEast()),ne=I.project(M.getSouthEast()),pe=I.project(M.getSouthWest()),ke=u.b8(-f),Pe=H.rotate(ke),Le=Q.rotate(ke),Te=ne.rotate(ke),Ze=pe.rotate(ke),rt=new u.P(Math.max(Pe.x,Le.x,Ze.x,Te.x),Math.max(Pe.y,Le.y,Ze.y,Te.y)),je=new u.P(Math.min(Pe.x,Le.x,Ze.x,Te.x),Math.min(Pe.y,Le.y,Ze.y,Te.y)),Ke=rt.sub(je),it=(I.width-(P.left+P.right+m.padding.left+m.padding.right))/Ke.x,st=(I.height-(P.top+P.bottom+m.padding.top+m.padding.bottom))/Ke.y;if(st<0||it<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const lt=Math.min(I.scaleZoom(I.scale*Math.min(it,st)),m.maxZoom),bt=u.P.convert(m.offset),xt=new u.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(u.b8(f)),Tt=bt.add(xt).mult(I.scale/I.zoomScale(lt));return{center:I.unproject(H.add(ne).div(2).sub(Tt)),zoom:lt,bearing:f}}fitBounds(r,l,f){return this._fitInternal(this.cameraForBounds(r,l),l,f)}fitScreenCoordinates(r,l,f,m,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(l)),f,m),m,v)}_fitInternal(r,l,f){return r?(delete(l=u.e(r,l)).padding,l.linear?this.easeTo(l,f):this.flyTo(l,f)):this}jumpTo(r,l){this.stop();const f=this._getTransformForUpdate();let m=!1,v=!1,I=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(m=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=u.M.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(v=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(I=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new u.k("movestart",l)).fire(new u.k("move",l)),m&&this.fire(new u.k("zoomstart",l)).fire(new u.k("zoom",l)).fire(new u.k("zoomend",l)),v&&this.fire(new u.k("rotatestart",l)).fire(new u.k("rotate",l)).fire(new u.k("rotateend",l)),I&&this.fire(new u.k("pitchstart",l)).fire(new u.k("pitch",l)).fire(new u.k("pitchend",l)),this.fire(new u.k("moveend",l))}calculateCameraOptionsFromTo(r,l,f,m=0){const v=u.Y.fromLngLat(r,l),I=u.Y.fromLngLat(f,m),P=I.x-v.x,M=I.y-v.y,H=I.z-v.z,Q=Math.hypot(P,M,H);if(Q===0)throw new Error("Can't calculate camera options with same From and To");const ne=Math.hypot(P,M),pe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Q/this.transform.tileSize),ke=180*Math.atan2(P,-M)/Math.PI;let Pe=180*Math.acos(ne/Q)/Math.PI;return Pe=H<0?90-Pe:90+Pe,{center:I.toLngLat(),zoom:pe,pitch:Pe,bearing:ke}}easeTo(r,l){var f;this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.b7},r)).animate===!1||!r.essential&&w.prefersReducedMotion)&&(r.duration=0);const m=this._getTransformForUpdate(),v=this.getZoom(),I=this.getBearing(),P=this.getPitch(),M=this.getPadding(),H="bearing"in r?this._normalizeBearing(r.bearing,I):I,Q="pitch"in r?+r.pitch:P,ne="padding"in r?r.padding:m.padding,pe=u.P.convert(r.offset);let ke=m.centerPoint.add(pe);const Pe=m.pointLocation(ke),{center:Le,zoom:Te}=m.getConstrained(u.M.convert(r.center||Pe),(f=r.zoom)!==null&&f!==void 0?f:v);this._normalizeCenter(Le);const Ze=m.project(Pe),rt=m.project(Le).sub(Ze),je=m.zoomScale(Te-v);let Ke,it;r.around&&(Ke=u.M.convert(r.around),it=m.locationPoint(Ke));const st={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Te!==v,this._rotating=this._rotating||I!==H,this._pitching=this._pitching||Q!==P,this._padding=!m.isPaddingEqual(ne),this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,st),this.terrain&&this._prepareElevation(Le),this._ease(lt=>{if(this._zooming&&(m.zoom=u.z.number(v,Te,lt)),this._rotating&&(m.bearing=u.z.number(I,H,lt)),this._pitching&&(m.pitch=u.z.number(P,Q,lt)),this._padding&&(m.interpolatePadding(M,ne,lt),ke=m.centerPoint.add(pe)),this.terrain&&!r.freezeElevation&&this._updateElevation(lt),Ke)m.setLocationAtPoint(Ke,it);else{const bt=m.zoomScale(m.zoom-v),xt=Te>v?Math.min(2,je):Math.max(.5,je),Tt=Math.pow(xt,1-lt),At=m.unproject(Ze.add(rt.mult(lt*Tt)).mult(bt));m.setLocationAtPoint(m.renderWorldCopies?At.wrap():At,ke)}this._applyUpdatedTransform(m),this._fireMoveEvents(l)},lt=>{this.terrain&&this._finalizeElevation(),this._afterEase(l,lt)},r),this}_prepareEase(r,l,f={}){this._moving=!0,l||f.moving||this.fire(new u.k("movestart",r)),this._zooming&&!f.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&l!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(l-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=l}this.transform.elevation=u.z.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const l=r.clone(),{center:f,zoom:m,pitch:v,bearing:I,elevation:P}=this.transformCameraUpdate(l);f&&(l.center=f),m!==void 0&&(l.zoom=m),v!==void 0&&(l.pitch=v),I!==void 0&&(l.bearing=I),P!==void 0&&(l.elevation=P),this.transform.apply(l)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const f=this._zooming,m=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new u.k("zoomend",r)),m&&this.fire(new u.k("rotateend",r)),v&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,l){var f;if(!r.essential&&w.prefersReducedMotion){const Rn=u.L(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Rn,l)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b7},r);const m=this._getTransformForUpdate(),v=this.getZoom(),I=this.getBearing(),P=this.getPitch(),M=this.getPadding(),H="bearing"in r?this._normalizeBearing(r.bearing,I):I,Q="pitch"in r?+r.pitch:P,ne="padding"in r?r.padding:m.padding,pe=u.P.convert(r.offset);let ke=m.centerPoint.add(pe);const Pe=m.pointLocation(ke),{center:Le,zoom:Te}=m.getConstrained(u.M.convert(r.center||Pe),(f=r.zoom)!==null&&f!==void 0?f:v);this._normalizeCenter(Le);const Ze=m.zoomScale(Te-v),rt=m.project(Pe),je=m.project(Le).sub(rt);let Ke=r.curve;const it=Math.max(m.width,m.height),st=it/Ze,lt=je.mag();if("minZoom"in r){const Rn=u.ac(Math.min(r.minZoom,v,Te),m.minZoom,m.maxZoom),cn=it/m.zoomScale(Rn-v);Ke=Math.sqrt(cn/lt*2)}const bt=Ke*Ke;function xt(Rn){const cn=(st*st-it*it+(Rn?-1:1)*bt*bt*lt*lt)/(2*(Rn?st:it)*bt*lt);return Math.log(Math.sqrt(cn*cn+1)-cn)}function Tt(Rn){return(Math.exp(Rn)-Math.exp(-Rn))/2}function At(Rn){return(Math.exp(Rn)+Math.exp(-Rn))/2}const yn=xt(!1);let kt=function(Rn){return At(yn)/At(yn+Ke*Rn)},nn=function(Rn){return it*((At(yn)*(Tt(cn=yn+Ke*Rn)/At(cn))-Tt(yn))/bt)/lt;var cn},vn=(xt(!0)-yn)/Ke;if(Math.abs(lt)<1e-6||!isFinite(vn)){if(Math.abs(it-st)<1e-6)return this.easeTo(r,l);const Rn=st<it?-1:1;vn=Math.abs(Math.log(st/it))/Ke,nn=function(){return 0},kt=function(cn){return Math.exp(Rn*Ke*cn)}}return r.duration="duration"in r?+r.duration:1e3*vn/("screenSpeed"in r?+r.screenSpeed/Ke:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=I!==H,this._pitching=Q!==P,this._padding=!m.isPaddingEqual(ne),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(Le),this._ease(Rn=>{const cn=Rn*vn,xn=1/kt(cn);m.zoom=Rn===1?Te:v+m.scaleZoom(xn),this._rotating&&(m.bearing=u.z.number(I,H,Rn)),this._pitching&&(m.pitch=u.z.number(P,Q,Rn)),this._padding&&(m.interpolatePadding(M,ne,Rn),ke=m.centerPoint.add(pe)),this.terrain&&!r.freezeElevation&&this._updateElevation(Rn);const Tn=Rn===1?Le:m.unproject(rt.add(je.mult(nn(cn))).mult(xn));m.setLocationAtPoint(m.renderWorldCopies?Tn.wrap():Tn,ke),this._applyUpdatedTransform(m),this._fireMoveEvents(l)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(l)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,l)}if(!r){const f=this.handlers;f&&f.stop(!1)}return this}_ease(r,l,f){f.animate===!1||f.duration===0?(r(1),l()):(this._easeStart=w.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,l){r=u.b1(r,-180,180);const f=Math.abs(r-l);return Math.abs(r-360-l)<f&&(r-=360),Math.abs(r+360-l)<f&&(r+=360),r}_normalizeCenter(r){const l=this.transform;if(!l.renderWorldCopies||l.lngRange)return;const f=r.lng-l.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.M.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const Jh={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class zo{constructor(r=Jh){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,l){const f=this._map._getUIString(`AttributionControl.${l}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const l=this._map.style.sourceCaches;for(const m in l){const v=l[m];if(v.used||v.usedForTerrain){const I=v.getSource();I.attribution&&r.indexOf(I.attribution)<0&&r.push(I.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,v)=>m.length-v.length),r=r.filter((m,v)=>{for(let I=v+1;I<r.length;I++)if(r[I].indexOf(m)>=0)return!1;return!0});const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class lp{constructor(r={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const f=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl");const l=T.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Iu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l}remove(r){const l=this._currentlyRunning,f=l?this._queue.concat(l):this._queue;for(const m of f)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const f of l)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var mr=u.X([{name:"a_pos3d",type:"Int16",components:3}]);class Tr extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,l){this.sourceCache.update(r,l),this._renderableTilesKeys=[];const f={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l}))f[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),u.aN(m.posMatrix,0,u.W,0,u.W,0,1),this._tiles[m.key]=new Se(m,this.tileSize));for(const m in this._tiles)f[m]||delete this._tiles[m]}freeRtt(r){for(const l in this._tiles){const f=this._tiles[l];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const l={};for(const f of this._renderableTilesKeys){const m=this._tiles[f].tileID;if(m.canonical.equals(r.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16),u.aN(v.posMatrix,0,u.W,0,u.W,0,1),l[f]=v}else if(m.canonical.isChildOf(r.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16);const I=m.canonical.z-r.canonical.z,P=m.canonical.x-(m.canonical.x>>I<<I),M=m.canonical.y-(m.canonical.y>>I<<I),H=u.W>>I;u.aN(v.posMatrix,0,H,0,H,0,1),u.H(v.posMatrix,v.posMatrix,[-P*H,-M*H,0]),l[f]=v}else if(r.canonical.isChildOf(m.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16);const I=r.canonical.z-m.canonical.z,P=r.canonical.x-(r.canonical.x>>I<<I),M=r.canonical.y-(r.canonical.y>>I<<I),H=u.W>>I;u.aN(v.posMatrix,0,u.W,0,u.W,0,1),u.H(v.posMatrix,v.posMatrix,[P*H,M*H,0]),u.J(v.posMatrix,v.posMatrix,[1/2**I,1/2**I,0]),l[f]=v}}return l}getSourceTile(r,l){const f=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>f.maxzoom&&(m=f.maxzoom),m<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!v||!v.dem)&&l)for(;m>=f.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(r.scaledTo(m--).key);return v}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(l=>l.timeAdded>=r)}}class up{constructor(r,l,f){this.painter=r,this.sourceCache=new Tr(l),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,l,f,m=u.W){var v;if(!(l>=0&&l<m&&f>=0&&f<m))return 0;const I=this.getTerrainData(r),P=(v=I.tile)===null||v===void 0?void 0:v.dem;if(!P)return 0;const M=function(Pe,Le,Te){var Ze=Le[0],rt=Le[1];return Pe[0]=Te[0]*Ze+Te[4]*rt+Te[12],Pe[1]=Te[1]*Ze+Te[5]*rt+Te[13],Pe}([],[l/m*u.W,f/m*u.W],I.u_terrain_matrix),H=[M[0]*P.dim,M[1]*P.dim],Q=Math.floor(H[0]),ne=Math.floor(H[1]),pe=H[0]-Q,ke=H[1]-ne;return P.get(Q,ne)*(1-pe)*(1-ke)+P.get(Q+1,ne)*pe*(1-ke)+P.get(Q,ne+1)*(1-pe)*ke+P.get(Q+1,ne+1)*pe*ke}getElevationForLngLatZoom(r,l){const{tileID:f,mercatorX:m,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(r,l);return this.getElevation(f,m%u.W,v%u.W,u.W)}getElevation(r,l,f,m=u.W){return this.getDEMElevation(r,l,f,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,v=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new W(m,v,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new W(m,new u.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const l=this.sourceCache.getSourceTile(r,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const m=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new W(m,l.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),l.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const f=l&&l+l.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const m=this.sourceCache.sourceCache._source.maxzoom;let v=r.canonical.z-l.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?v=r.canonical.z-m:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const I=r.canonical.x-(r.canonical.x>>v<<v),P=r.canonical.y-(r.canonical.y>>v<<v),M=u.b9(new Float64Array(16),[1/(u.W<<v),1/(u.W<<v),0]);u.H(M,M,[I*u.W,P*u.W,0]),this._demMatrixCache[r.key]={matrix:M,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(r){const l=this.painter,f=l.width/devicePixelRatio,m=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new W(l.context,{width:f,height:m,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new W(l.context,{width:f,height:m,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(f,m,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,f,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,I=0;v<this._coordsTextureSize;v++)for(let P=0;P<this._coordsTextureSize;P++,I+=4)l[I+0]=255&P,l[I+1]=255&v,l[I+2]=P>>8<<4|v>>8,l[I+3]=0;const f=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),m=new W(r,f,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),f=this.painter.context,m=f.gl,v=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),I=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),P=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(v,P-I-1,1,1,m.RGBA,m.UNSIGNED_BYTE,l),f.bindFramebuffer.set(null);const M=l[0]+(l[2]>>4<<8),H=l[1]+((15&l[2])<<8),Q=this.coordsIndex[255-l[3]],ne=Q&&this.sourceCache.getTileByID(Q);if(!ne)return null;const pe=this._coordsTextureSize,ke=(1<<ne.tileID.canonical.z)*pe;return new u.Y((ne.tileID.canonical.x*pe+M)/ke+ne.tileID.wrap,(ne.tileID.canonical.y*pe+H)/ke,this.getElevation(ne.tileID,M,H,pe))}depthAtPoint(r){const l=new Uint8Array(4),f=this.painter.context,m=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,l),f.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,l=new u.ba,f=new u.aX,m=this.meshSize,v=u.W/m,I=m*m;for(let ne=0;ne<=m;ne++)for(let pe=0;pe<=m;pe++)l.emplaceBack(pe*v,ne*v,0);for(let ne=0;ne<I;ne+=m+1)for(let pe=0;pe<m;pe++)f.emplaceBack(pe+ne,m+pe+ne+1,m+pe+ne+2),f.emplaceBack(pe+ne,m+pe+ne+2,pe+ne+1);const P=l.length,M=P+2*(m+1);for(const ne of[0,1])for(let pe=0;pe<=m;pe++)for(const ke of[0,1])l.emplaceBack(pe*v,ne*u.W,ke);for(let ne=0;ne<2*m;ne+=2)f.emplaceBack(M+ne,M+ne+1,M+ne+3),f.emplaceBack(M+ne,M+ne+3,M+ne+2),f.emplaceBack(P+ne,P+ne+3,P+ne+1),f.emplaceBack(P+ne,P+ne+2,P+ne+3);const H=l.length,Q=H+2*(m+1);for(const ne of[0,1])for(let pe=0;pe<=m;pe++)for(const ke of[0,1])l.emplaceBack(ne*u.W,pe*v,ke);for(let ne=0;ne<2*m;ne+=2)f.emplaceBack(H+ne,H+ne+1,H+ne+3),f.emplaceBack(H+ne,H+ne+3,H+ne+2),f.emplaceBack(Q+ne,Q+ne+3,Q+ne+1),f.emplaceBack(Q+ne,Q+ne+2,Q+ne+3);return this._mesh={indexBuffer:r.createIndexBuffer(f),vertexBuffer:r.createVertexBuffer(l,mr.members),segments:u.$.simpleSegment(0,0,l.length,f.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.bb/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,l){var f;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,l);return(f=this.getMinMaxElevation(m).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){const l=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return l&&l.dem&&(f.minElevation=l.dem.min*this.exaggeration,f.maxElevation=l.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,l){const f=u.Y.fromLngLat(r.wrap()),m=(1<<l)*u.W,v=f.x*m,I=f.y*m,P=Math.floor(v/u.W),M=Math.floor(I/u.W);return{tileID:new u.Q(l,0,l,P,M),mercatorX:v,mercatorY:I}}}class Au{constructor(r,l,f){this._context=r,this._size=l,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new W(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(f.texture),{id:r,fbo:l,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>r.id!==l),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const xs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Qh{constructor(r,l){this.painter=r,this.terrain=l,this.pool=new Au(r.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(l)),this._coordsDescendingInv={};for(const f in r.sourceCaches){this._coordsDescendingInv[f]={};const m=r.sourceCaches[f].getVisibleCoordinates();for(const v of m){const I=this.terrain.sourceCache.getTerrainCoords(v);for(const P in I)this._coordsDescendingInv[f][P]||(this._coordsDescendingInv[f][P]=[]),this._coordsDescendingInv[f][P].push(I[P])}}this._coordsDescendingInvStr={};for(const f of r._order){const m=r._layers[f],v=m.source;if(xs[m.type]&&!this._coordsDescendingInvStr[v]){this._coordsDescendingInvStr[v]={};for(const I in this._coordsDescendingInv[v])this._coordsDescendingInvStr[v][I]=this._coordsDescendingInv[v][I].map(P=>P.key).sort().join()}}for(const f of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const v=this._coordsDescendingInvStr[m][f.tileID.key];v&&v!==f.rttCoords[m]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const l=r.type,f=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(xs[l]&&(this._prevType&&xs[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(xs[this._prevType]||xs[l]&&m){this._prevType=l;const v=this._stacks.length-1,I=this._stacks[v]||[];for(const P of this._renderableTiles){if(this.pool.isFull()&&(Xi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(P),P.rtt[v]){const H=this.pool.getObjectForId(P.rtt[v].id);if(H.stamp===P.rtt[v].stamp){this.pool.useObject(H);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),P.rtt[v]={id:M.id,stamp:M.stamp},f.context.bindFramebuffer.set(M.fbo.framebuffer),f.context.clear({color:u.aO.transparent,stencil:0}),f.currentStencilSource=void 0;for(let H=0;H<I.length;H++){const Q=f.style._layers[I[H]],ne=Q.source?this._coordsDescendingInv[Q.source][P.tileID.key]:[P.tileID];f.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),f._renderTileClippingMasks(Q,ne),f.renderLayer(f,f.style.sourceCaches[Q.source],Q,ne),Q.source&&(P.rttCoords[Q.source]=this._coordsDescendingInvStr[Q.source][P.tileID.key])}}return Xi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),xs[l]}return!1}}const ed={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},td=b,Pu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:Jh,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Ec=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},nd={showCompass:!0,showZoom:!0,visualizePitch:!1};class rd{constructor(r,l,f=!1){this.mousedown=I=>{this.startMouse(u.e({},I,{ctrlKey:!0,preventDefault:()=>I.preventDefault()}),T.mousePos(this.element,I)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.moveMouse(I,T.mousePos(this.element,I))},this.mouseup=I=>{this.mouseRotate.dragEnd(I),this.mousePitch&&this.mousePitch.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,I.targetTouches)[0],this.startTouch(I,this._startPos),T.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,I.targetTouches)[0],this.moveTouch(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),v=r.dragRotate._mousePitch.getClickTolerance();this.element=l,this.mouseRotate=Il({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:I,clickTolerance:P,bearingDegreesPerPixelMoved:M=.8})=>{const H=new Ut;return new ko({clickTolerance:P,move:(Q,ne)=>({bearingDelta:(ne.x-Q.x)*M}),moveStateManager:H,enable:I,assignEvents:Ec})})({clickTolerance:m,enable:!0}),this.map=r,f&&(this.mousePitch=Al({clickTolerance:v,enable:!0}),this.touchPitch=(({enable:I,clickTolerance:P,pitchDegreesPerPixelMoved:M=-.5})=>{const H=new Ut;return new ko({clickTolerance:P,move:(Q,ne)=>({pitchDelta:(ne.y-Q.y)*M}),moveStateManager:H,enable:I,assignEvents:Ec})})({clickTolerance:v,enable:!0})),T.addEventListener(l,"mousedown",this.mousedown),T.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(l,"touchcancel",this.reset)}startMouse(r,l){this.mouseRotate.dragStart(r,l),this.mousePitch&&this.mousePitch.dragStart(r,l),T.disableDrag()}startTouch(r,l){this.touchRotate.dragStart(r,l),this.touchPitch&&this.touchPitch.dragStart(r,l),T.disableDrag()}moveMouse(r,l){const f=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,l)||{};if(m&&f.setBearing(f.getBearing()+m),this.mousePitch){const{pitchDelta:v}=this.mousePitch.dragMove(r,l)||{};v&&f.setPitch(f.getPitch()+v)}}moveTouch(r,l){const f=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,l)||{};if(m&&f.setBearing(f.getBearing()+m),this.touchPitch){const{pitchDelta:v}=this.touchPitch.dragMove(r,l)||{};v&&f.setPitch(f.getPitch()+v)}}off(){const r=this.element;T.removeEventListener(r,"mousedown",this.mousedown),T.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend),T.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend)}}let ws;function Tc(y,r,l){const f=new u.M(y.lng,y.lat);if(y=new u.M(y.lng,y.lat),r){const m=new u.M(y.lng-360,y.lat),v=new u.M(y.lng+360,y.lat),I=l.locationPoint(y).distSqr(r);l.locationPoint(m).distSqr(r)<I?y=m:l.locationPoint(v).distSqr(r)<I&&(y=v)}for(;Math.abs(y.lng-l.center.lng)>180;){const m=l.locationPoint(y);if(m.x>=0&&m.y>=0&&m.x<=l.width&&m.y<=l.height)break;y.lng>l.center.lng?y.lng-=360:y.lng+=360}return y.lng!==f.lng&&l.locationPoint(y).y>l.height/2-l.getHorizon()?y:f}const ku={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Cc(y,r,l){const f=y.classList;for(const m in ku)f.remove(`maplibregl-${l}-anchor-${m}`);f.add(`maplibregl-${l}-anchor-${r}`)}class Mu extends u.E{constructor(r){if(super(),this._onKeyPress=l=>{const f=l.code,m=l.charCode||l.keyCode;f!=="Space"&&f!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=l=>{const f=l.originalEvent.target,m=this._element;this._popup&&(f===m||m.contains(f))&&this.togglePopup()},this._update=l=>{var f;if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Tc(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),l&&l.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${ku[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${v}`),w.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");const l=T.createNS("http://www.w3.org/2000/svg","svg"),f=41,m=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${f}px`),l.setAttributeNS(null,"width",`${m}px`),l.setAttributeNS(null,"viewBox",`0 0 ${m} ${f}`);const v=T.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");const I=T.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");const P=T.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ze of M){const rt=T.createNS("http://www.w3.org/2000/svg","ellipse");rt.setAttributeNS(null,"opacity","0.04"),rt.setAttributeNS(null,"cx","10.5"),rt.setAttributeNS(null,"cy","5.80029008"),rt.setAttributeNS(null,"rx",Ze.rx),rt.setAttributeNS(null,"ry",Ze.ry),P.appendChild(rt)}const H=T.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);const Q=T.createNS("http://www.w3.org/2000/svg","path");Q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(Q);const ne=T.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"opacity","0.25"),ne.setAttributeNS(null,"fill","#000000");const pe=T.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ne.appendChild(pe);const ke=T.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ke.setAttributeNS(null,"fill","#FFFFFF");const Pe=T.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Le=T.createNS("http://www.w3.org/2000/svg","circle");Le.setAttributeNS(null,"fill","#000000"),Le.setAttributeNS(null,"opacity","0.25"),Le.setAttributeNS(null,"cx","5.5"),Le.setAttributeNS(null,"cy","5.5"),Le.setAttributeNS(null,"r","5.4999962");const Te=T.createNS("http://www.w3.org/2000/svg","circle");Te.setAttributeNS(null,"fill","#FFFFFF"),Te.setAttributeNS(null,"cx","5.5"),Te.setAttributeNS(null,"cy","5.5"),Te.setAttributeNS(null,"r","5.4999962"),Pe.appendChild(Le),Pe.appendChild(Te),I.appendChild(P),I.appendChild(H),I.appendChild(ne),I.appendChild(ke),I.appendChild(Pe),l.appendChild(I),l.setAttributeNS(null,"height",f*this._scale+"px"),l.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(l),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),Cc(this._element,this._anchor,"marker"),r&&r.className)for(const l of r.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.M.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var l,f;if(!(!((l=this._map)===null||l===void 0)&&l.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,v=m.terrain.depthAtPoint(this._pos),I=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,I)-v<.006)return void(this._element.style.opacity=this._opacity);const P=-this._offset.y/m.transform._pixelPerMeter,M=Math.sin(m.getPitch()*Math.PI/180)*P,H=m.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),Q=m.transform.lngLatToCameraDepth(this._lngLat,I+M)-H>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&Q&&this._popup.remove(),this._element.style.opacity=Q?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,l){return r===void 0&&l===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const Ic={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let kl=0,Aa=!1;const Ac={maxWidth:100,unit:"metric"};function Pc(y,r,l){const f=l&&l.maxWidth||100,m=y._container.clientHeight/2,v=y.unproject([0,m]),I=y.unproject([f,m]),P=v.distanceTo(I);if(l&&l.unit==="imperial"){const M=3.2808*P;M>5280?Pa(r,f,M/5280,y._getUIString("ScaleControl.Miles")):Pa(r,f,M,y._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?Pa(r,f,P/1852,y._getUIString("ScaleControl.NauticalMiles")):P>=1e3?Pa(r,f,P/1e3,y._getUIString("ScaleControl.Kilometers")):Pa(r,f,P,y._getUIString("ScaleControl.Meters"))}function Pa(y,r,l,f){const m=function(v){const I=Math.pow(10,`${Math.floor(v)}`.length-1);let P=v/I;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(M){const H=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*H)/H}(P),I*P}(l);y.style.width=r*(m/l)+"px",y.innerHTML=`${m}&nbsp;${f}`}const id={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},od=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function kc(y){if(y){if(typeof y=="number"){const r=Math.round(Math.abs(y)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,y),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-y),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(y,0),right:new u.P(-y,0)}}if(y instanceof u.P||Array.isArray(y)){const r=u.P.convert(y);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(y.center||[0,0]),top:u.P.convert(y.top||[0,0]),"top-left":u.P.convert(y["top-left"]||[0,0]),"top-right":u.P.convert(y["top-right"]||[0,0]),bottom:u.P.convert(y.bottom||[0,0]),"bottom-left":u.P.convert(y["bottom-left"]||[0,0]),"bottom-right":u.P.convert(y["bottom-right"]||[0,0]),left:u.P.convert(y.left||[0,0]),right:u.P.convert(y.right||[0,0])}}return kc(new u.P(0,0))}const cp=b;d.AJAXError=u.be,d.Evented=u.E,d.LngLat=u.M,d.MercatorCoordinate=u.Y,d.Point=u.P,d.addProtocol=u.bf,d.config=u.a,d.removeProtocol=u.bg,d.AttributionControl=zo,d.BoxZoomHandler=Rr,d.CanvasSource=we,d.CooperativeGesturesHandler=qt,d.DoubleClickZoomHandler=Kh,d.DragPanHandler=ap,d.DragRotateHandler=Mo,d.EdgeInsets=Qo,d.FullscreenControl=class extends u.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var r;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=l==null?void 0:l.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=wn,d.GeolocateControl=class extends u.E{constructor(y){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const l=new u.M(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,m=this._map.getBearing(),v=u.e({bearing:m},this.options.fitBoundsOptions),I=Bt.fromLngLat(l,f);this._map.fitBounds(I,v,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const l=new u.M(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Aa)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Mu({element:this._dotElement}),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Mu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")))})}},this.options=u.e({},Ic,y)}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return u._(this,arguments,void 0,function*(r=!1){if(ws!==void 0&&!r)return ws;if(window.navigator.permissions===void 0)return ws=!!window.navigator.geolocation,ws;try{ws=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ws=!!window.navigator.geolocation}return ws})}().then(r=>this._setupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,kl=0,Aa=!1}_isOutOfMapMaxBounds(y){const r=this._map.getMaxBounds(),l=y.coords;return r&&(l.longitude<r.getWest()||l.longitude>r.getEast()||l.latitude<r.getSouth()||l.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),r=y.getSouthEast(),l=y.getNorthEast(),f=r.distanceTo(l),m=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":kl--,Aa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),kl++,kl>1?(y={maximumAge:6e5,timeout:0},Aa=!0):(y=this.options.positionOptions,Aa=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.Hash=G,d.ImageSource=N,d.KeyboardHandler=Ws,d.LngLatBounds=Bt,d.LogoControl=lp,d.Map=class extends Li{constructor(y){if(u.bc.mark(u.bd.create),(y=u.e({},Pu,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ia(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._contextLost=r=>{r.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Iu,this._controls=[],this._mapId=u.a3(),this._locale=u.e({},ed,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=$.addThrottleControl(()=>this.isMoving()),this._requestManager=new oe(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const l=El(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{r?l(f):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Yh(this,y),this._hash=y.hash&&new G(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,u.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new zo(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new lp,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new u.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new u.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new u.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(y,r){if(r===void 0&&(r=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=y.onAdd(this);this._controls.push(y);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(y);return r>-1&&this._controls.splice(r,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,r,l,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,r,l,f)}resize(y){var r;const l=this._containerDimensions(),f=l[0],m=l[1],v=this._getClampedPixelRatio(f,m);if(this._resizeCanvas(f,m,v),this.painter.resize(f,m,v),this.painter.overLimit()){const P=this.painter.context.gl;this._maxCanvasSize=[P.drawingBufferWidth,P.drawingBufferHeight];const M=this._getClampedPixelRatio(f,m);this._resizeCanvas(f,m,M),this.painter.resize(f,m,M)}this.transform.resize(f,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,m);const I=!this._moving;return I&&(this.stop(),this.fire(new u.k("movestart",y)).fire(new u.k("move",y))),this.fire(new u.k("resize",y)),I&&this.fire(new u.k("moveend",y)),this}_getClampedPixelRatio(y,r){const{0:l,1:f}=this._maxCanvasSize,m=this.getPixelRatio(),v=y*m,I=r*m;return Math.min(v>l?l/v:1,I>f?f/I:1)*m}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Bt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(u.M.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(u.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,r,l){if(y==="mouseenter"||y==="mouseover"){let f=!1;return{layer:r,listener:l,delegates:{mousemove:v=>{const I=this.getLayer(r)?this.queryRenderedFeatures(v.point,{layers:[r]}):[];I.length?f||(f=!0,l.call(this,new En(y,this,v.originalEvent,{features:I}))):f=!1},mouseout:()=>{f=!1}}}}if(y==="mouseleave"||y==="mouseout"){let f=!1;return{layer:r,listener:l,delegates:{mousemove:I=>{(this.getLayer(r)?this.queryRenderedFeatures(I.point,{layers:[r]}):[]).length?f=!0:f&&(f=!1,l.call(this,new En(y,this,I.originalEvent)))},mouseout:I=>{f&&(f=!1,l.call(this,new En(y,this,I.originalEvent)))}}}}{const f=m=>{const v=this.getLayer(r)?this.queryRenderedFeatures(m.point,{layers:[r]}):[];v.length&&(m.features=v,l.call(this,m),delete m.features)};return{layer:r,listener:l,delegates:{[y]:f}}}}on(y,r,l){if(l===void 0)return super.on(y,r);const f=this._createDelegatedListener(y,r,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(f);for(const m in f.delegates)this.on(m,f.delegates[m]);return this}once(y,r,l){if(l===void 0)return super.once(y,r);const f=this._createDelegatedListener(y,r,l);for(const m in f.delegates)this.once(m,f.delegates[m]);return this}off(y,r,l){return l===void 0?super.off(y,r):(this._delegatedListeners&&this._delegatedListeners[y]&&(f=>{const m=this._delegatedListeners[y];for(let v=0;v<m.length;v++){const I=m[v];if(I.layer===r&&I.listener===l){for(const P in I.delegates)this.off(P,I.delegates[P]);return m.splice(v,1),this}}})(),this)}queryRenderedFeatures(y,r){if(!this.style)return[];let l;const f=y instanceof u.P||Array.isArray(y),m=f?y:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:y)||{},m instanceof u.P||typeof m[0]=="number")l=[u.P.convert(m)];else{const v=u.P.convert(m[0]),I=u.P.convert(m[1]);l=[v,new u.P(I.x,v.y),I,new u.P(v.x,I.y),v]}return this.style.queryRenderedFeatures(l,r,this.transform)}querySourceFeatures(y,r){return this.style.querySourceFeatures(y,r)}setStyle(y,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(y,r))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const r=this._locale[y];if(r==null)throw new Error(`Missing UI string '${y}'`);return r}_updateStyle(y,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,r));const l=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new _i(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,r,l):this.style.loadJSON(y,r,l),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new _i(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,r){if(typeof y=="string"){const l=this._requestManager.transformRequest(y,"Style");u.h(l,new AbortController).then(f=>{this._updateDiff(f.data,r)}).catch(f=>{f&&this.fire(new u.j(f))})}else typeof y=="object"&&this._updateDiff(y,r)}_updateDiff(y,r){try{this.style.setState(y,r)&&this._update(!0)}catch(l){u.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(y,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(y,r){return this._lazyInitEmptyStyle(),this.style.addSource(y,r),this._update(!0)}isSourceLoaded(y){const r=this.style&&this.style.sourceCaches[y];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const r=this.style.sourceCaches[y.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&r.reload();for(const l in this.style._layers){const f=this.style._layers[l];f.type==="hillshade"&&f.source===y.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new up(this.painter,r,y),this.painter.renderToTexture=new Qh(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=l=>{l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:y})),this}getTerrain(){var y,r;return(r=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const r in y){const l=y[r]._tiles;for(const f in l){const m=l[f];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,r,l={}){const{pixelRatio:f=1,sdf:m=!1,stretchX:v,stretchY:I,content:P}=l;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:M,height:H,data:Q}=r,ne=r;return this.style.addImage(y,{data:new u.R({width:M,height:H},new Uint8Array(Q)),pixelRatio:f,stretchX:v,stretchY:I,content:P,sdf:m,version:0,userImage:ne}),ne.onAdd&&ne.onAdd(this,y),this}}{const{width:M,height:H,data:Q}=w.getImageData(r);this.style.addImage(y,{data:new u.R({width:M,height:H},Q),pixelRatio:f,stretchX:v,stretchY:I,content:P,sdf:m,version:0})}}updateImage(y,r){const l=this.style.getImage(y);if(!l)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||u.b(r)?w.getImageData(r):r,{width:m,height:v,data:I}=f;if(m===void 0||v===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==l.data.width||v!==l.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(r instanceof HTMLImageElement||u.b(r));return l.data.replace(I,P),this.style.updateImage(y,l),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return $.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,r){return this._lazyInitEmptyStyle(),this.style.addLayer(y,r),this._update(!0)}moveLayer(y,r){return this.style.moveLayer(y,r),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,r,l){return this.style.setLayerZoomRange(y,r,l),this._update(!0)}setFilter(y,r,l={}){return this.style.setFilter(y,r,l),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,r,l,f={}){return this.style.setPaintProperty(y,r,l,f),this._update(!0)}getPaintProperty(y,r){return this.style.getPaintProperty(y,r)}setLayoutProperty(y,r,l,f={}){return this.style.setLayoutProperty(y,r,l,f),this._update(!0)}getLayoutProperty(y,r){return this.style.getLayoutProperty(y,r)}setGlyphs(y,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,r,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,r,l,f=>{f||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,r,l=>{l||this._update(!0)}),this}setLight(y,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,r){return this.style.setFeatureState(y,r),this._update()}removeFeatureState(y,r){return this.style.removeFeatureState(y,r),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,r=0;return this._container&&(y=this._container.clientWidth||400,r=this._container.clientHeight||300),[y,r]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const r=this._canvasContainer=T.create("div","maplibregl-canvas-container",y);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),f=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],f);const m=this._controlContainer=T.create("div","maplibregl-control-container",y),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(I=>{v[I]=T.create("div",`maplibregl-ctrl-${I} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,r,l){this._canvas.width=Math.floor(l*y),this._canvas.height=Math.floor(l*r),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:y},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});const l=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!l){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new bu(l,this.transform),L.testSupport(l)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,v=w.now();this.style.zoomHistory.update(m,v);const I=new u.a8(m,{now:v,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),P=I.crossFadingFactor();P===1&&P===this._crossFadingFactor||(l=!0,this._crossFadingFactor=P),this.style.update(I)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bc.mark(u.bd.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,u.bc.mark(u.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bc.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then(y=>{u.bc.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return td}getCameraTargetElevation(){return this.transform.elevation}},d.MapMouseEvent=En,d.MapTouchEvent=An,d.MapWheelEvent=Kn,d.Marker=Mu,d.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const r=this._map.getZoom(),l=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,l)=>{const f=this._map._getUIString(`NavigationControl.${l}`);r.title=f,r.setAttribute("aria-label",f)},this.options=u.e({},nd,y),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),T.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),T.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new rd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,r){const l=T.create("button",y,this._container);return l.type="button",l.addEventListener("click",r),l}},d.Popup=class extends u.E{constructor(y){super(),this.remove=()=>(this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var l;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=T.create("div","maplibregl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Tc(this._lngLat,this._flatPos,this._map.transform):(l=this._lngLat)===null||l===void 0?void 0:l.wrap(),this._trackPointer&&!r)return;const f=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let m=this.options.anchor;const v=kc(this.options.offset);if(!m){const P=this._container.offsetWidth,M=this._container.offsetHeight;let H;H=f.y+v.bottom.y<M?["top"]:f.y>this._map.transform.height-M?["bottom"]:[],f.x<P/2?H.push("left"):f.x>this._map.transform.width-P/2&&H.push("right"),m=H.length===0?"bottom":H.join("-")}let I=f.add(v[m]);this.options.subpixelPositioning||(I=I.round()),T.setTransform(this._container,`${ku[m]} translate(${I.x}px,${I.y}px)`),Cc(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(id),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=u.M.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const r=document.createDocumentFragment(),l=document.createElement("body");let f;for(l.innerHTML=y;f=l.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(od);y&&y.focus()}},d.RasterDEMTileSource=ln,d.RasterTileSource=et,d.ScaleControl=class{constructor(y){this._onMove=()=>{Pc(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Pc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ac),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=bc,d.Style=_i,d.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=ip,d.TwoFingersTouchRotateHandler=qh,d.TwoFingersTouchZoomHandler=rp,d.TwoFingersTouchZoomRotateHandler=Tu,d.VectorTileSource=Sn,d.VideoSource=B,d.addSourceType=(y,r)=>u._(void 0,void 0,void 0,function*(){if(Qe(y))throw new Error(`A source type called "${y}" already exists.`);((l,f)=>{Xe[l]=f})(y,r)}),d.clearPrewarmedResources=function(){const y=We;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(De),We=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return z().getRTLTextPluginStatus()},d.getVersion=function(){return cp},d.getWorkerCount=function(){return Ae.workerCount},d.getWorkerUrl=function(){return u.a.WORKER_URL},d.importScriptInWorkers=function(y){return wt().broadcast("IS",y)},d.prewarm=function(){nt().acquire(De)},d.setMaxParallelImageRequests=function(y){u.a.MAX_PARALLEL_IMAGE_REQUESTS=y},d.setRTLTextPlugin=function(y,r){return z().setRTLTextPlugin(y,r)},d.setWorkerCount=function(y){Ae.workerCount=y},d.setWorkerUrl=function(y){u.a.WORKER_URL=y}});var p=i;return p})})(fC);var mC=fC.exports;const gC=Bf(mC),L3=uk({__proto__:null,default:gC},[mC]),F3="modulepreload",j3=function(e){return"/osm-address-editor-vite/"+e},h2={},D3=function(t,i,a){let c=Promise.resolve();if(i&&i.length>0){const p=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));c=Promise.all(i.map(b=>{if(b=j3(b),b in h2)return;h2[b]=!0;const C=b.endsWith(".css"),A=C?'[rel="stylesheet"]':"";if(!!a)for(let L=p.length-1;L>=0;L--){const U=p[L];if(U.href===b&&(!C||U.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${A}`))return;const T=document.createElement("link");if(T.rel=C?"stylesheet":F3,C||(T.as="script",T.crossOrigin=""),T.href=b,u&&T.setAttribute("nonce",u),document.head.appendChild(T),C)return new Promise((L,U)=>{T.addEventListener("load",L),T.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${b}`)))})}))}return c.then(()=>t()).catch(p=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=p,window.dispatchEvent(d),!d.defaultPrevented)throw p})},B3=_t.createContext(null);function N3(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,p=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===p}function No(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!No(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!No(e[c],t[c]))return!1;return!0}return!1}function U3(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function d2(e,t){if(!e.getProjection)return;const i=e.getProjection(),a=t.getProjection();No(i,a)||t.setProjection(i)}function f2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function p2(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const $3=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function m2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const p=t[a.ref];if(p){c=c||Object.assign({},a),delete c.ref;for(const d of $3)d in p&&(c[d]=p[d])}return c||a});return{...e,layers:i}}var g2={};const y2={version:8,sources:{},layers:[]},v2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},C0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},_2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},V3=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],G3=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class kh{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const p=this.props[_2[c.type]];p?p(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const p=this.props[v2[c.type]];p&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),p(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const p=this.props[C0[c.type]];p&&p(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),p=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||p&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=kh.savedMaps.pop();if(!a)return null;const c=a.map,p=c.getContainer();for(i.className=p.className;p.childNodes.length>0;)i.appendChild(p.childNodes[0]);c._container=i;const d=c._resizeObserver;d&&(d.disconnect(),d.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:u}=t;return u&&(u.bounds?c.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):a._updateViewState(u,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=y2}=i,c={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||H3()||null,container:t,style:m2(a)},p=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[p.longitude||0,p.latitude||0],zoom:p.zoom||0,pitch:p.pitch||0,bearing:p.bearing||0}),i.gl){const A=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=A,i.gl)}const d=new this._MapClass(c);p.padding&&d.setPadding(p.padding),i.cursor&&(d.getCanvas().style.cursor=i.cursor),this._createShadowTransform(d);const u=d._render;d._render=A=>{this._inRender=!0,u.call(d,A),this._inRender=!1};const b=d._renderTaskQueue.run;d._renderTaskQueue.run=A=>{b.call(d._renderTaskQueue,A),this._onBeforeRepaint()},d.on("render",()=>this._onAfterRepaint());const C=d.fire;d.fire=this._fireEvent.bind(this,C),d.on("resize",()=>{this._renderTransform.resize(d.transform.width,d.transform.height)}),d.on("styledata",()=>{this._updateStyleComponents(this.props,{}),d2(d.transform,this._renderTransform)}),d.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const A in v2)d.on(A,this._onPointerEvent);for(const A in C0)d.on(A,this._onCameraEvent);for(const A in _2)d.on(A,this._onEvent);this._map=d}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),kh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=U3(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:p,pitch:d,bearing:u}=c,b=a.isMoving();b&&(c.cameraElevationReference="sea");const C=p2(c,{...f2(a.transform),...t});if(b&&(c.cameraElevationReference="ground"),C&&i){const A=this._deferredEvents;A.move=!0,A.zoom||(A.zoom=p!==c.zoom),A.rotate||(A.rotate=u!==c.bearing),A.pitch||(A.pitch=d!==c.pitch)}return b||p2(a.transform,t),C}_updateSettings(t,i){const a=this._map;let c=!1;for(const p of V3)if(p in t&&!No(t[p],i[p])){c=!0;const d=a[`set${p[0].toUpperCase()}${p.slice(1)}`];d==null||d.call(a,t[p])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=y2,styleDiffing:c=!0}=t,p={diff:c};return"localIdeographFontFamily"in t&&(p.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(m2(a),p),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!No(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!No(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!No(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){var a,c;const p=this._map;let d=!1;for(const u of G3){const b=(a=t[u])!==null&&a!==void 0?a:!0,C=(c=i[u])!==null&&c!==void 0?c:!0;No(b,C)||(d=!0,b?p[u].enable(b):p[u].disable())}return d}_queryRenderedFeatures(t){const i=this._map,a=i.transform,{interactiveLayerIds:c=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:c.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=a}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const p=t.type,d=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,u=this._queryRenderedFeatures(t.point),b=u.length>0;!b&&d&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=u,b&&!d&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=p}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,p=c.transform,d=typeof i=="string"?i:i.type;return d==="move"&&this._updateViewState(this.props,!1),d in C0&&(typeof i=="object"&&(i.viewState=f2(p)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=p,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{d2(this._renderTransform,i),t.transform=i}}}kh.savedMaps=[];function H3(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||g2.MapboxAccessToken}catch{}try{e=e||g2.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const W3=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Z3(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const c=t.transform;t.transform=e.transform;const p=t.project(a);return t.transform=c,p},unproject:a=>{const c=t.transform;t.transform=e.transform;const p=t.unproject(a);return t.transform=c,p},queryTerrainElevation:(a,c)=>{const p=t.transform;t.transform=e.transform;const d=t.queryTerrainElevation(a,c);return t.transform=p,d},queryRenderedFeatures:(a,c)=>{const p=t.transform;t.transform=e.transform;const d=t.queryRenderedFeatures(a,c);return t.transform=p,d}};for(const a of X3(t))!(a in i)&&!W3.includes(a)&&(i[a]=t[a].bind(t));return i}function X3(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const q3=typeof document<"u"?_t.useLayoutEffect:_t.useEffect,K3=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Y3(e,t){for(const a of K3)a in t&&(e[a]=t[a]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,a=>{a&&console.error(a)},!0)}const Bh=_t.createContext(null);function J3(e,t,i){const a=_t.useContext(B3),[c,p]=_t.useState(null),d=_t.useRef(),{current:u}=_t.useRef({mapLib:null,map:null});_t.useEffect(()=>{const A=e.mapLib;let w=!0,T;return Promise.resolve(A||i).then(L=>{if(!w)return;if(!L)throw new Error("Invalid mapLib");const U="Map"in L?L:L.default;if(!U.Map)throw new Error("Invalid mapLib");if(Y3(U,e),!U.supported||U.supported(e))e.reuseMaps&&(T=kh.reuse(e,d.current)),T||(T=new kh(U.Map,e,d.current)),u.map=Z3(T),u.mapLib=U,p(T),a==null||a.onMapMount(u.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(L=>{const{onError:U}=e;U?U({type:"error",target:null,originalEvent:null,error:L}):console.error(L)}),()=>{w=!1,T&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?T.recycle():T.destroy())}},[]),q3(()=>{c&&c.setProps(e)}),_t.useImperativeHandle(t,()=>u.map,[c]);const b=_t.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),C={height:"100%"};return _t.createElement("div",{id:e.id,ref:d,style:b},c&&_t.createElement(Bh.Provider,{value:u},_t.createElement("div",{"mapboxgl-children":"",style:C},e.children)))}const Q3=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function rc(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!Q3.test(a)?i[a]=`${c}px`:i[a]=c}}function e4(e,t){const{map:i,mapLib:a}=_t.useContext(Bh),c=_t.useRef({props:e});c.current.props=e;const p=_t.useMemo(()=>{let F=!1;_t.Children.forEach(e.children,Z=>{Z&&(F=!0)});const ce={...e,element:F?document.createElement("div"):null},K=new a.Marker(ce);return K.setLngLat([e.longitude,e.latitude]),K.getElement().addEventListener("click",Z=>{var $,oe;(oe=($=c.current.props).onClick)===null||oe===void 0||oe.call($,{type:"click",target:K,originalEvent:Z})}),K.on("dragstart",Z=>{var $,oe;const q=Z;q.lngLat=p.getLngLat(),(oe=($=c.current.props).onDragStart)===null||oe===void 0||oe.call($,q)}),K.on("drag",Z=>{var $,oe;const q=Z;q.lngLat=p.getLngLat(),(oe=($=c.current.props).onDrag)===null||oe===void 0||oe.call($,q)}),K.on("dragend",Z=>{var $,oe;const q=Z;q.lngLat=p.getLngLat(),(oe=($=c.current.props).onDragEnd)===null||oe===void 0||oe.call($,q)}),K},[]);_t.useEffect(()=>(p.addTo(i.getMap()),()=>{p.remove()}),[]);const{longitude:d,latitude:u,offset:b,style:C,draggable:A=!1,popup:w=null,rotation:T=0,rotationAlignment:L="auto",pitchAlignment:U="auto"}=e;return _t.useEffect(()=>{rc(p.getElement(),C)},[C]),_t.useImperativeHandle(t,()=>p,[]),(p.getLngLat().lng!==d||p.getLngLat().lat!==u)&&p.setLngLat([d,u]),b&&!N3(p.getOffset(),b)&&p.setOffset(b),p.isDraggable()!==A&&p.setDraggable(A),p.getRotation()!==T&&p.setRotation(T),p.getRotationAlignment()!==L&&p.setRotationAlignment(L),p.getPitchAlignment()!==U&&p.setPitchAlignment(U),p.getPopup()!==w&&p.setPopup(w),D1.createPortal(e.children,p.getElement())}const t4=_t.memo(_t.forwardRef(e4));function x2(e){return new Set(e?e.trim().split(/\s+/):[])}function n4(e,t){const{map:i,mapLib:a}=_t.useContext(Bh),c=_t.useMemo(()=>document.createElement("div"),[]),p=_t.useRef({props:e});p.current.props=e;const d=_t.useMemo(()=>{const u={...e},b=new a.Popup(u);return b.setLngLat([e.longitude,e.latitude]),b.once("open",C=>{var A,w;(w=(A=p.current.props).onOpen)===null||w===void 0||w.call(A,C)}),b},[]);if(_t.useEffect(()=>{const u=b=>{var C,A;(A=(C=p.current.props).onClose)===null||A===void 0||A.call(C,b)};return d.on("close",u),d.setDOMContent(c).addTo(i.getMap()),()=>{d.off("close",u),d.isOpen()&&d.remove()}},[]),_t.useEffect(()=>{rc(d.getElement(),e.style)},[e.style]),_t.useImperativeHandle(t,()=>d,[]),d.isOpen()&&((d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!No(d.options.offset,e.offset)&&d.setOffset(e.offset),(d.options.anchor!==e.anchor||d.options.maxWidth!==e.maxWidth)&&(d.options.anchor=e.anchor,d.setMaxWidth(e.maxWidth)),d.options.className!==e.className)){const u=x2(d.options.className),b=x2(e.className);for(const C of u)b.has(C)||d.removeClassName(C);for(const C of b)u.has(C)||d.addClassName(C);d.options.className=e.className}return D1.createPortal(e.children,c)}_t.memo(_t.forwardRef(n4));function Hf(e,t,i,a){const c=_t.useContext(Bh),p=_t.useMemo(()=>e(c),[]);return _t.useEffect(()=>{const d=a||i||t,u=typeof t=="function"&&typeof i=="function"?t:null,b=typeof i=="function"?i:typeof t=="function"?t:null,{map:C}=c;return C.hasControl(p)||(C.addControl(p,d==null?void 0:d.position),u&&u(c)),()=>{b&&b(c),C.hasControl(p)&&C.removeControl(p)}},[]),p}function r4(e){const t=Hf(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return _t.useEffect(()=>{rc(t._container,e.style)},[e.style]),null}_t.memo(r4);function i4(e){const t=Hf(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return _t.useEffect(()=>{rc(t._controlContainer,e.style)},[e.style]),null}_t.memo(i4);function o4(e,t){const i=_t.useRef({props:e}),a=Hf(({mapLib:c})=>{const p=new c.GeolocateControl(e),d=p._setupUI;return p._setupUI=u=>{p._container.hasChildNodes()||d(u)},p.on("geolocate",u=>{var b,C;(C=(b=i.current.props).onGeolocate)===null||C===void 0||C.call(b,u)}),p.on("error",u=>{var b,C;(C=(b=i.current.props).onError)===null||C===void 0||C.call(b,u)}),p.on("outofmaxbounds",u=>{var b,C;(C=(b=i.current.props).onOutOfMaxBounds)===null||C===void 0||C.call(b,u)}),p.on("trackuserlocationstart",u=>{var b,C;(C=(b=i.current.props).onTrackUserLocationStart)===null||C===void 0||C.call(b,u)}),p.on("trackuserlocationend",u=>{var b,C;(C=(b=i.current.props).onTrackUserLocationEnd)===null||C===void 0||C.call(b,u)}),p},{position:e.position});return i.current.props=e,_t.useImperativeHandle(t,()=>a,[]),_t.useEffect(()=>{rc(a._container,e.style)},[e.style]),null}const s4=_t.memo(_t.forwardRef(o4));function a4(e){const t=Hf(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return _t.useEffect(()=>{rc(t._container,e.style)},[e.style]),null}const l4=_t.memo(a4);function u4(e){const t=Hf(({mapLib:p})=>new p.ScaleControl(e),{position:e.position}),i=_t.useRef(e),a=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),_t.useEffect(()=>{rc(t._container,c)},[c]),null}_t.memo(u4);function ag(e,t){if(!e)throw new Error(t)}function c4(e,t,i,a){if(ag(i.id===a.id,"layer id changed"),ag(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:p={},filter:d,minzoom:u,maxzoom:b,beforeId:C}=i;if(C!==a.beforeId&&e.moveLayer(t,C),c!==a.layout){const A=a.layout||{};for(const w in c)No(c[w],A[w])||e.setLayoutProperty(t,w,c[w]);for(const w in A)c.hasOwnProperty(w)||e.setLayoutProperty(t,w,void 0)}if(p!==a.paint){const A=a.paint||{};for(const w in p)No(p[w],A[w])||e.setPaintProperty(t,w,p[w]);for(const w in A)p.hasOwnProperty(w)||e.setPaintProperty(t,w,void 0)}No(d,a.filter)||e.setFilter(t,d),(u!==a.minzoom||b!==a.maxzoom)&&e.setLayerZoomRange(t,u,b)}function h4(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let d4=0;function f4(e){const t=_t.useContext(Bh).map.getMap(),i=_t.useRef(e),[,a]=_t.useState(0),c=_t.useMemo(()=>e.id||`jsx-layer-${d4++}`,[]);if(_t.useEffect(()=>{if(t){const d=()=>a(u=>u+1);return t.on("styledata",d),d(),()=>{t.off("styledata",d),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{c4(t,c,e,i.current)}catch(d){console.warn(d)}else h4(t,c,e);return i.current=e,null}let p4=0;function m4(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function g4(e,t,i){ag(t.id===i.id,"source id changed"),ag(t.type===i.type,"source type changed");let a="",c=0;for(const d in t)d!=="children"&&d!=="id"&&!No(i[d],t[d])&&(a=d,c++);if(!c)return;const p=t.type;if(p==="geojson")e.setData(t.data);else if(p==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function y4(e){const t=_t.useContext(Bh).map.getMap(),i=_t.useRef(e),[,a]=_t.useState(0),c=_t.useMemo(()=>e.id||`jsx-source-${p4++}`,[]);_t.useEffect(()=>{if(t){const d=()=>setTimeout(()=>a(u=>u+1),0);return t.on("styledata",d),d(),()=>{var u;if(t.off("styledata",d),t.style&&t.style._loaded&&t.getSource(c)){const b=(u=t.getStyle())===null||u===void 0?void 0:u.layers;if(b)for(const C of b)C.source===c&&t.removeLayer(C.id);t.removeSource(c)}}}},[t]);let p=t&&t.style&&t.getSource(c);return p?g4(p,e,i.current):p=m4(t,c,e),i.current=e,p&&_t.Children.map(e.children,d=>d&&_t.cloneElement(d,{source:c}))||null}const v4=D3(()=>Promise.resolve().then(()=>L3),void 0),_4=_t.forwardRef(function(t,i){return J3(t,i,v4)}),x4=t4,w4=l4,b4=s4,S4=f4,E4=y4;function w2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Kt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?w2(Object(i),!0).forEach(function(a){ai(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function lg(e){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lg(e)}function T4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b2(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function C4(e,t,i){return t&&b2(e.prototype,t),i&&b2(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function ai(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function B1(e,t){return A4(e)||k4(e,t)||yC(e,t)||z4()}function Wf(e){return I4(e)||P4(e)||yC(e)||M4()}function I4(e){if(Array.isArray(e))return Yv(e)}function A4(e){if(Array.isArray(e))return e}function P4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function k4(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],c=!0,p=!1,d,u;try{for(i=i.call(e);!(c=(d=i.next()).done)&&(a.push(d.value),!(t&&a.length===t));c=!0);}catch(b){p=!0,u=b}finally{try{!c&&i.return!=null&&i.return()}finally{if(p)throw u}}return a}}function yC(e,t){if(e){if(typeof e=="string")return Yv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Yv(e,t)}}function Yv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function M4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S2=function(){},N1={},vC={},_C=null,xC={mark:S2,measure:S2};try{typeof window<"u"&&(N1=window),typeof document<"u"&&(vC=document),typeof MutationObserver<"u"&&(_C=MutationObserver),typeof performance<"u"&&(xC=performance)}catch{}var R4=N1.navigator||{},E2=R4.userAgent,T2=E2===void 0?"":E2,iu=N1,xr=vC,C2=_C,Kp=xC;iu.document;var Qa=!!xr.documentElement&&!!xr.head&&typeof xr.addEventListener=="function"&&typeof xr.createElement=="function",wC=~T2.indexOf("MSIE")||~T2.indexOf("Trident/"),Yp,Jp,Qp,em,tm,Xa="___FONT_AWESOME___",Jv=16,bC="fa",SC="svg-inline--fa",Yu="data-fa-i2svg",Qv="data-fa-pseudo-element",O4="data-fa-pseudo-element-pending",U1="data-prefix",$1="data-icon",I2="fontawesome-i2svg",L4="async",F4=["HTML","HEAD","STYLE","SCRIPT"],EC=function(){try{return!0}catch{return!1}}(),vr="classic",Nr="sharp",V1=[vr,Nr];function Zf(e){return new Proxy(e,{get:function(i,a){return a in i?i[a]:i[vr]}})}var Pf=Zf((Yp={},ai(Yp,vr,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),ai(Yp,Nr,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),Yp)),kf=Zf((Jp={},ai(Jp,vr,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),ai(Jp,Nr,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),Jp)),Mf=Zf((Qp={},ai(Qp,vr,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),ai(Qp,Nr,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),Qp)),j4=Zf((em={},ai(em,vr,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),ai(em,Nr,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),em)),D4=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,TC="fa-layers-text",B4=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,N4=Zf((tm={},ai(tm,vr,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),ai(tm,Nr,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),tm)),CC=[1,2,3,4,5,6,7,8,9,10],U4=CC.concat([11,12,13,14,15,16,17,18,19,20]),$4=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],$u={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},zf=new Set;Object.keys(kf[vr]).map(zf.add.bind(zf));Object.keys(kf[Nr]).map(zf.add.bind(zf));var V4=[].concat(V1,Wf(zf),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",$u.GROUP,$u.SWAP_OPACITY,$u.PRIMARY,$u.SECONDARY]).concat(CC.map(function(e){return"".concat(e,"x")})).concat(U4.map(function(e){return"w-".concat(e)})),of=iu.FontAwesomeConfig||{};function G4(e){var t=xr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function H4(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(xr&&typeof xr.querySelector=="function"){var W4=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];W4.forEach(function(e){var t=B1(e,2),i=t[0],a=t[1],c=H4(G4(i));c!=null&&(of[a]=c)})}var IC={styleDefault:"solid",familyDefault:"classic",cssPrefix:bC,replacementClass:SC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};of.familyPrefix&&(of.cssPrefix=of.familyPrefix);var Mh=Kt(Kt({},IC),of);Mh.autoReplaceSvg||(Mh.observeMutations=!1);var rn={};Object.keys(IC).forEach(function(e){Object.defineProperty(rn,e,{enumerable:!0,set:function(i){Mh[e]=i,sf.forEach(function(a){return a(rn)})},get:function(){return Mh[e]}})});Object.defineProperty(rn,"familyPrefix",{enumerable:!0,set:function(t){Mh.cssPrefix=t,sf.forEach(function(i){return i(rn)})},get:function(){return Mh.cssPrefix}});iu.FontAwesomeConfig=rn;var sf=[];function Z4(e){return sf.push(e),function(){sf.splice(sf.indexOf(e),1)}}var Dl=Jv,ia={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function X4(e){if(!(!e||!Qa)){var t=xr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=xr.head.childNodes,a=null,c=i.length-1;c>-1;c--){var p=i[c],d=(p.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(d)>-1&&(a=p)}return xr.head.insertBefore(t,a),e}}var q4="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Rf(){for(var e=12,t="";e-- >0;)t+=q4[Math.random()*62|0];return t}function Nh(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function G1(e){return e.classList?Nh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function AC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function K4(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(AC(e[i]),'" ')},"").trim()}function ey(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function H1(e){return e.size!==ia.size||e.x!==ia.x||e.y!==ia.y||e.rotate!==ia.rotate||e.flipX||e.flipY}function Y4(e){var t=e.transform,i=e.containerWidth,a=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},p="translate(".concat(t.x*32,", ").concat(t.y*32,") "),d="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)"),b={transform:"".concat(p," ").concat(d," ").concat(u)},C={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:b,path:C}}function J4(e){var t=e.transform,i=e.width,a=i===void 0?Jv:i,c=e.height,p=c===void 0?Jv:c,d=e.startCentered,u=d===void 0?!1:d,b="";return u&&wC?b+="translate(".concat(t.x/Dl-a/2,"em, ").concat(t.y/Dl-p/2,"em) "):u?b+="translate(calc(-50% + ".concat(t.x/Dl,"em), calc(-50% + ").concat(t.y/Dl,"em)) "):b+="translate(".concat(t.x/Dl,"em, ").concat(t.y/Dl,"em) "),b+="scale(".concat(t.size/Dl*(t.flipX?-1:1),", ").concat(t.size/Dl*(t.flipY?-1:1),") "),b+="rotate(".concat(t.rotate,"deg) "),b}var Q4=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function PC(){var e=bC,t=SC,i=rn.cssPrefix,a=rn.replacementClass,c=Q4;if(i!==e||a!==t){var p=new RegExp("\\.".concat(e,"\\-"),"g"),d=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");c=c.replace(p,".".concat(i,"-")).replace(d,"--".concat(i,"-")).replace(u,".".concat(a))}return c}var A2=!1;function I0(){rn.autoAddCss&&!A2&&(X4(PC()),A2=!0)}var ez={mixout:function(){return{dom:{css:PC,insertCss:I0}}},hooks:function(){return{beforeDOMElementCreation:function(){I0()},beforeI2svg:function(){I0()}}}},qa=iu||{};qa[Xa]||(qa[Xa]={});qa[Xa].styles||(qa[Xa].styles={});qa[Xa].hooks||(qa[Xa].hooks={});qa[Xa].shims||(qa[Xa].shims=[]);var Ms=qa[Xa],kC=[],tz=function e(){xr.removeEventListener("DOMContentLoaded",e),ug=1,kC.map(function(t){return t()})},ug=!1;Qa&&(ug=(xr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(xr.readyState),ug||xr.addEventListener("DOMContentLoaded",tz));function nz(e){Qa&&(ug?setTimeout(e,0):kC.push(e))}function Xf(e){var t=e.tag,i=e.attributes,a=i===void 0?{}:i,c=e.children,p=c===void 0?[]:c;return typeof e=="string"?AC(e):"<".concat(t," ").concat(K4(a),">").concat(p.map(Xf).join(""),"</").concat(t,">")}function P2(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var rz=function(t,i){return function(a,c,p,d){return t.call(i,a,c,p,d)}},A0=function(t,i,a,c){var p=Object.keys(t),d=p.length,u=c!==void 0?rz(i,c):i,b,C,A;for(a===void 0?(b=1,A=t[p[0]]):(b=0,A=a);b<d;b++)C=p[b],A=u(A,t[C],C,t);return A};function iz(e){for(var t=[],i=0,a=e.length;i<a;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){var p=e.charCodeAt(i++);(p&64512)==56320?t.push(((c&1023)<<10)+(p&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function e_(e){var t=iz(e);return t.length===1?t[0].toString(16):null}function oz(e,t){var i=e.length,a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function k2(e){return Object.keys(e).reduce(function(t,i){var a=e[i],c=!!a.icon;return c?t[a.iconName]=a.icon:t[i]=a,t},{})}function t_(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,c=a===void 0?!1:a,p=k2(t);typeof Ms.hooks.addPack=="function"&&!c?Ms.hooks.addPack(e,k2(t)):Ms.styles[e]=Kt(Kt({},Ms.styles[e]||{}),p),e==="fas"&&t_("fa",t)}var nm,rm,im,uh=Ms.styles,sz=Ms.shims,az=(nm={},ai(nm,vr,Object.values(Mf[vr])),ai(nm,Nr,Object.values(Mf[Nr])),nm),W1=null,MC={},zC={},RC={},OC={},LC={},lz=(rm={},ai(rm,vr,Object.keys(Pf[vr])),ai(rm,Nr,Object.keys(Pf[Nr])),rm);function uz(e){return~V4.indexOf(e)}function cz(e,t){var i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!uz(c)?c:null}var FC=function(){var t=function(p){return A0(uh,function(d,u,b){return d[b]=A0(u,p,{}),d},{})};MC=t(function(c,p,d){if(p[3]&&(c[p[3]]=d),p[2]){var u=p[2].filter(function(b){return typeof b=="number"});u.forEach(function(b){c[b.toString(16)]=d})}return c}),zC=t(function(c,p,d){if(c[d]=d,p[2]){var u=p[2].filter(function(b){return typeof b=="string"});u.forEach(function(b){c[b]=d})}return c}),LC=t(function(c,p,d){var u=p[2];return c[d]=d,u.forEach(function(b){c[b]=d}),c});var i="far"in uh||rn.autoFetchSvg,a=A0(sz,function(c,p){var d=p[0],u=p[1],b=p[2];return u==="far"&&!i&&(u="fas"),typeof d=="string"&&(c.names[d]={prefix:u,iconName:b}),typeof d=="number"&&(c.unicodes[d.toString(16)]={prefix:u,iconName:b}),c},{names:{},unicodes:{}});RC=a.names,OC=a.unicodes,W1=ty(rn.styleDefault,{family:rn.familyDefault})};Z4(function(e){W1=ty(e.styleDefault,{family:rn.familyDefault})});FC();function Z1(e,t){return(MC[e]||{})[t]}function hz(e,t){return(zC[e]||{})[t]}function Vu(e,t){return(LC[e]||{})[t]}function jC(e){return RC[e]||{prefix:null,iconName:null}}function dz(e){var t=OC[e],i=Z1("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function ou(){return W1}var X1=function(){return{prefix:null,iconName:null,rest:[]}};function ty(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.family,a=i===void 0?vr:i,c=Pf[a][e],p=kf[a][e]||kf[a][c],d=e in Ms.styles?e:null;return p||d||null}var M2=(im={},ai(im,vr,Object.keys(Mf[vr])),ai(im,Nr,Object.keys(Mf[Nr])),im);function ny(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.skipLookups,c=a===void 0?!1:a,p=(t={},ai(t,vr,"".concat(rn.cssPrefix,"-").concat(vr)),ai(t,Nr,"".concat(rn.cssPrefix,"-").concat(Nr)),t),d=null,u=vr;(e.includes(p[vr])||e.some(function(C){return M2[vr].includes(C)}))&&(u=vr),(e.includes(p[Nr])||e.some(function(C){return M2[Nr].includes(C)}))&&(u=Nr);var b=e.reduce(function(C,A){var w=cz(rn.cssPrefix,A);if(uh[A]?(A=az[u].includes(A)?j4[u][A]:A,d=A,C.prefix=A):lz[u].indexOf(A)>-1?(d=A,C.prefix=ty(A,{family:u})):w?C.iconName=w:A!==rn.replacementClass&&A!==p[vr]&&A!==p[Nr]&&C.rest.push(A),!c&&C.prefix&&C.iconName){var T=d==="fa"?jC(C.iconName):{},L=Vu(C.prefix,C.iconName);T.prefix&&(d=null),C.iconName=T.iconName||L||C.iconName,C.prefix=T.prefix||C.prefix,C.prefix==="far"&&!uh.far&&uh.fas&&!rn.autoFetchSvg&&(C.prefix="fas")}return C},X1());return(e.includes("fa-brands")||e.includes("fab"))&&(b.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(b.prefix="fad"),!b.prefix&&u===Nr&&(uh.fass||rn.autoFetchSvg)&&(b.prefix="fass",b.iconName=Vu(b.prefix,b.iconName)||b.iconName),(b.prefix==="fa"||d==="fa")&&(b.prefix=ou()||"fas"),b}var fz=function(){function e(){T4(this,e),this.definitions={}}return C4(e,[{key:"add",value:function(){for(var i=this,a=arguments.length,c=new Array(a),p=0;p<a;p++)c[p]=arguments[p];var d=c.reduce(this._pullDefinitions,{});Object.keys(d).forEach(function(u){i.definitions[u]=Kt(Kt({},i.definitions[u]||{}),d[u]),t_(u,d[u]);var b=Mf[vr][u];b&&t_(b,d[u]),FC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var c=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(c).map(function(p){var d=c[p],u=d.prefix,b=d.iconName,C=d.icon,A=C[2];i[u]||(i[u]={}),A.length>0&&A.forEach(function(w){typeof w=="string"&&(i[u][w]=C)}),i[u][b]=C}),i}}]),e}(),z2=[],ch={},xh={},pz=Object.keys(xh);function mz(e,t){var i=t.mixoutsTo;return z2=e,ch={},Object.keys(xh).forEach(function(a){pz.indexOf(a)===-1&&delete xh[a]}),z2.forEach(function(a){var c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(function(d){typeof c[d]=="function"&&(i[d]=c[d]),lg(c[d])==="object"&&Object.keys(c[d]).forEach(function(u){i[d]||(i[d]={}),i[d][u]=c[d][u]})}),a.hooks){var p=a.hooks();Object.keys(p).forEach(function(d){ch[d]||(ch[d]=[]),ch[d].push(p[d])})}a.provides&&a.provides(xh)}),i}function n_(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var p=ch[e]||[];return p.forEach(function(d){t=d.apply(null,[t].concat(a))}),t}function Ju(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=ch[e]||[];c.forEach(function(p){p.apply(null,i)})}function Ka(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return xh[e]?xh[e].apply(null,t):void 0}function r_(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||ou();if(t)return t=Vu(i,t)||t,P2(DC.definitions,i,t)||P2(Ms.styles,i,t)}var DC=new fz,gz=function(){rn.autoReplaceSvg=!1,rn.observeMutations=!1,Ju("noAuto")},yz={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qa?(Ju("beforeI2svg",t),Ka("pseudoElements2svg",t),Ka("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;rn.autoReplaceSvg===!1&&(rn.autoReplaceSvg=!0),rn.observeMutations=!0,nz(function(){_z({autoReplaceSvgRoot:i}),Ju("watch",t)})}},vz={icon:function(t){if(t===null)return null;if(lg(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Vu(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=ty(t[0]);return{prefix:a,iconName:Vu(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(rn.cssPrefix,"-"))>-1||t.match(D4))){var c=ny(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||ou(),iconName:Vu(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var p=ou();return{prefix:p,iconName:Vu(p,t)||t}}}},Wo={noAuto:gz,config:rn,dom:yz,parse:vz,library:DC,findIconDefinition:r_,toHtml:Xf},_z=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?xr:i;(Object.keys(Ms.styles).length>0||rn.autoFetchSvg)&&Qa&&rn.autoReplaceSvg&&Wo.dom.i2svg({node:a})};function ry(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return Xf(a)})}}),Object.defineProperty(e,"node",{get:function(){if(Qa){var a=xr.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function xz(e){var t=e.children,i=e.main,a=e.mask,c=e.attributes,p=e.styles,d=e.transform;if(H1(d)&&i.found&&!a.found){var u=i.width,b=i.height,C={x:u/b/2,y:.5};c.style=ey(Kt(Kt({},p),{},{"transform-origin":"".concat(C.x+d.x/16,"em ").concat(C.y+d.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function wz(e){var t=e.prefix,i=e.iconName,a=e.children,c=e.attributes,p=e.symbol,d=p===!0?"".concat(t,"-").concat(rn.cssPrefix,"-").concat(i):p;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Kt(Kt({},c),{},{id:d}),children:a}]}]}function q1(e){var t=e.icons,i=t.main,a=t.mask,c=e.prefix,p=e.iconName,d=e.transform,u=e.symbol,b=e.title,C=e.maskId,A=e.titleId,w=e.extra,T=e.watchable,L=T===void 0?!1:T,U=a.found?a:i,F=U.width,ce=U.height,K=c==="fak",Z=[rn.replacementClass,p?"".concat(rn.cssPrefix,"-").concat(p):""].filter(function(D){return w.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(w.classes).join(" "),$={children:[],attributes:Kt(Kt({},w.attributes),{},{"data-prefix":c,"data-icon":p,class:Z,role:w.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(F," ").concat(ce)})},oe=K&&!~w.classes.indexOf("fa-fw")?{width:"".concat(F/ce*16*.0625,"em")}:{};L&&($.attributes[Yu]=""),b&&($.children.push({tag:"title",attributes:{id:$.attributes["aria-labelledby"]||"title-".concat(A||Rf())},children:[b]}),delete $.attributes.title);var q=Kt(Kt({},$),{},{prefix:c,iconName:p,main:i,mask:a,maskId:C,transform:d,symbol:u,styles:Kt(Kt({},oe),w.styles)}),V=a.found&&i.found?Ka("generateAbstractMask",q)||{children:[],attributes:{}}:Ka("generateAbstractIcon",q)||{children:[],attributes:{}},E=V.children,j=V.attributes;return q.children=E,q.attributes=j,u?wz(q):xz(q)}function R2(e){var t=e.content,i=e.width,a=e.height,c=e.transform,p=e.title,d=e.extra,u=e.watchable,b=u===void 0?!1:u,C=Kt(Kt(Kt({},d.attributes),p?{title:p}:{}),{},{class:d.classes.join(" ")});b&&(C[Yu]="");var A=Kt({},d.styles);H1(c)&&(A.transform=J4({transform:c,startCentered:!0,width:i,height:a}),A["-webkit-transform"]=A.transform);var w=ey(A);w.length>0&&(C.style=w);var T=[];return T.push({tag:"span",attributes:C,children:[t]}),p&&T.push({tag:"span",attributes:{class:"sr-only"},children:[p]}),T}function bz(e){var t=e.content,i=e.title,a=e.extra,c=Kt(Kt(Kt({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),p=ey(a.styles);p.length>0&&(c.style=p);var d=[];return d.push({tag:"span",attributes:c,children:[t]}),i&&d.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),d}var P0=Ms.styles;function i_(e){var t=e[0],i=e[1],a=e.slice(4),c=B1(a,1),p=c[0],d=null;return Array.isArray(p)?d={tag:"g",attributes:{class:"".concat(rn.cssPrefix,"-").concat($u.GROUP)},children:[{tag:"path",attributes:{class:"".concat(rn.cssPrefix,"-").concat($u.SECONDARY),fill:"currentColor",d:p[0]}},{tag:"path",attributes:{class:"".concat(rn.cssPrefix,"-").concat($u.PRIMARY),fill:"currentColor",d:p[1]}}]}:d={tag:"path",attributes:{fill:"currentColor",d:p}},{found:!0,width:t,height:i,icon:d}}var Sz={found:!1,width:512,height:512};function Ez(e,t){!EC&&!rn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function o_(e,t){var i=t;return t==="fa"&&rn.styleDefault!==null&&(t=ou()),new Promise(function(a,c){if(Ka("missingIconAbstract"),i==="fa"){var p=jC(e)||{};e=p.iconName||e,t=p.prefix||t}if(e&&t&&P0[t]&&P0[t][e]){var d=P0[t][e];return a(i_(d))}Ez(e,t),a(Kt(Kt({},Sz),{},{icon:rn.showMissingIcons&&e?Ka("missingIconAbstract")||{}:{}}))})}var O2=function(){},s_=rn.measurePerformance&&Kp&&Kp.mark&&Kp.measure?Kp:{mark:O2,measure:O2},Ud='FA "6.5.2"',Tz=function(t){return s_.mark("".concat(Ud," ").concat(t," begins")),function(){return BC(t)}},BC=function(t){s_.mark("".concat(Ud," ").concat(t," ends")),s_.measure("".concat(Ud," ").concat(t),"".concat(Ud," ").concat(t," begins"),"".concat(Ud," ").concat(t," ends"))},K1={begin:Tz,end:BC},Am=function(){};function L2(e){var t=e.getAttribute?e.getAttribute(Yu):null;return typeof t=="string"}function Cz(e){var t=e.getAttribute?e.getAttribute(U1):null,i=e.getAttribute?e.getAttribute($1):null;return t&&i}function Iz(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(rn.replacementClass)}function Az(){if(rn.autoReplaceSvg===!0)return Pm.replace;var e=Pm[rn.autoReplaceSvg];return e||Pm.replace}function Pz(e){return xr.createElementNS("http://www.w3.org/2000/svg",e)}function kz(e){return xr.createElement(e)}function NC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?e.tag==="svg"?Pz:kz:i;if(typeof e=="string")return xr.createTextNode(e);var c=a(e.tag);Object.keys(e.attributes||[]).forEach(function(d){c.setAttribute(d,e.attributes[d])});var p=e.children||[];return p.forEach(function(d){c.appendChild(NC(d,{ceFn:a}))}),c}function Mz(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Pm={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(NC(c),i)}),i.getAttribute(Yu)===null&&rn.keepOriginalSource){var a=xr.createComment(Mz(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function(t){var i=t[0],a=t[1];if(~G1(i).indexOf(rn.replacementClass))return Pm.replace(t);var c=new RegExp("".concat(rn.cssPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var p=a[0].attributes.class.split(" ").reduce(function(u,b){return b===rn.replacementClass||b.match(c)?u.toSvg.push(b):u.toNode.push(b),u},{toNode:[],toSvg:[]});a[0].attributes.class=p.toSvg.join(" "),p.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",p.toNode.join(" "))}var d=a.map(function(u){return Xf(u)}).join(`
`);i.setAttribute(Yu,""),i.innerHTML=d}};function F2(e){e()}function UC(e,t){var i=typeof t=="function"?t:Am;if(e.length===0)i();else{var a=F2;rn.mutateApproach===L4&&(a=iu.requestAnimationFrame||F2),a(function(){var c=Az(),p=K1.begin("mutate");e.map(c),p(),i()})}}var Y1=!1;function $C(){Y1=!0}function a_(){Y1=!1}var cg=null;function j2(e){if(C2&&rn.observeMutations){var t=e.treeCallback,i=t===void 0?Am:t,a=e.nodeCallback,c=a===void 0?Am:a,p=e.pseudoElementsCallback,d=p===void 0?Am:p,u=e.observeMutationsRoot,b=u===void 0?xr:u;cg=new C2(function(C){if(!Y1){var A=ou();Nh(C).forEach(function(w){if(w.type==="childList"&&w.addedNodes.length>0&&!L2(w.addedNodes[0])&&(rn.searchPseudoElements&&d(w.target),i(w.target)),w.type==="attributes"&&w.target.parentNode&&rn.searchPseudoElements&&d(w.target.parentNode),w.type==="attributes"&&L2(w.target)&&~$4.indexOf(w.attributeName))if(w.attributeName==="class"&&Cz(w.target)){var T=ny(G1(w.target)),L=T.prefix,U=T.iconName;w.target.setAttribute(U1,L||A),U&&w.target.setAttribute($1,U)}else Iz(w.target)&&c(w.target)})}}),Qa&&cg.observe(b,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function zz(){cg&&cg.disconnect()}function Rz(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,c){var p=c.split(":"),d=p[0],u=p.slice(1);return d&&u.length>0&&(a[d]=u.join(":").trim()),a},{})),i}function Oz(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",c=ny(G1(e));return c.prefix||(c.prefix=ou()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||(c.prefix&&a.length>0&&(c.iconName=hz(c.prefix,e.innerText)||Z1(c.prefix,e_(e.innerText))),!c.iconName&&rn.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(c.iconName=e.firstChild.data)),c}function Lz(e){var t=Nh(e.attributes).reduce(function(c,p){return c.name!=="class"&&c.name!=="style"&&(c[p.name]=p.value),c},{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return rn.autoA11y&&(i?t["aria-labelledby"]="".concat(rn.replacementClass,"-title-").concat(a||Rf()):(t["aria-hidden"]="true",t.focusable="false")),t}function Fz(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ia,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function D2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=Oz(e),a=i.iconName,c=i.prefix,p=i.rest,d=Lz(e),u=n_("parseNodeAttributes",{},e),b=t.styleParser?Rz(e):[];return Kt({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:ia,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:p,styles:b,attributes:d}},u)}var jz=Ms.styles;function VC(e){var t=rn.autoReplaceSvg==="nest"?D2(e,{styleParser:!1}):D2(e);return~t.extra.classes.indexOf(TC)?Ka("generateLayersText",e,t):Ka("generateSvgReplacementMutation",e,t)}var su=new Set;V1.map(function(e){su.add("fa-".concat(e))});Object.keys(Pf[vr]).map(su.add.bind(su));Object.keys(Pf[Nr]).map(su.add.bind(su));su=Wf(su);function B2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Qa)return Promise.resolve();var i=xr.documentElement.classList,a=function(w){return i.add("".concat(I2,"-").concat(w))},c=function(w){return i.remove("".concat(I2,"-").concat(w))},p=rn.autoFetchSvg?su:V1.map(function(A){return"fa-".concat(A)}).concat(Object.keys(jz));p.includes("fa")||p.push("fa");var d=[".".concat(TC,":not([").concat(Yu,"])")].concat(p.map(function(A){return".".concat(A,":not([").concat(Yu,"])")})).join(", ");if(d.length===0)return Promise.resolve();var u=[];try{u=Nh(e.querySelectorAll(d))}catch{}if(u.length>0)a("pending"),c("complete");else return Promise.resolve();var b=K1.begin("onTree"),C=u.reduce(function(A,w){try{var T=VC(w);T&&A.push(T)}catch(L){EC||L.name==="MissingIcon"&&console.error(L)}return A},[]);return new Promise(function(A,w){Promise.all(C).then(function(T){UC(T,function(){a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),b(),A()})}).catch(function(T){b(),w(T)})})}function Dz(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;VC(e).then(function(i){i&&UC([i],t)})}function Bz(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:r_(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:r_(c||{})),e(a,Kt(Kt({},i),{},{mask:c}))}}var Nz=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,c=a===void 0?ia:a,p=i.symbol,d=p===void 0?!1:p,u=i.mask,b=u===void 0?null:u,C=i.maskId,A=C===void 0?null:C,w=i.title,T=w===void 0?null:w,L=i.titleId,U=L===void 0?null:L,F=i.classes,ce=F===void 0?[]:F,K=i.attributes,Z=K===void 0?{}:K,$=i.styles,oe=$===void 0?{}:$;if(t){var q=t.prefix,V=t.iconName,E=t.icon;return ry(Kt({type:"icon"},t),function(){return Ju("beforeDOMElementCreation",{iconDefinition:t,params:i}),rn.autoA11y&&(T?Z["aria-labelledby"]="".concat(rn.replacementClass,"-title-").concat(U||Rf()):(Z["aria-hidden"]="true",Z.focusable="false")),q1({icons:{main:i_(E),mask:b?i_(b.icon):{found:!1,width:null,height:null,icon:{}}},prefix:q,iconName:V,transform:Kt(Kt({},ia),c),symbol:d,title:T,maskId:A,titleId:U,extra:{attributes:Z,styles:oe,classes:ce}})})}},Uz={mixout:function(){return{icon:Bz(Nz)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=B2,i.nodeCallback=Dz,i}}},provides:function(t){t.i2svg=function(i){var a=i.node,c=a===void 0?xr:a,p=i.callback,d=p===void 0?function(){}:p;return B2(c,d)},t.generateSvgReplacementMutation=function(i,a){var c=a.iconName,p=a.title,d=a.titleId,u=a.prefix,b=a.transform,C=a.symbol,A=a.mask,w=a.maskId,T=a.extra;return new Promise(function(L,U){Promise.all([o_(c,u),A.iconName?o_(A.iconName,A.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(F){var ce=B1(F,2),K=ce[0],Z=ce[1];L([i,q1({icons:{main:K,mask:Z},prefix:u,iconName:c,transform:b,symbol:C,maskId:w,title:p,titleId:d,extra:T,watchable:!0})])}).catch(U)})},t.generateAbstractIcon=function(i){var a=i.children,c=i.attributes,p=i.main,d=i.transform,u=i.styles,b=ey(u);b.length>0&&(c.style=b);var C;return H1(d)&&(C=Ka("generateAbstractTransformGrouping",{main:p,transform:d,containerWidth:p.width,iconWidth:p.width})),a.push(C||p.icon),{children:a,attributes:c}}}},$z={mixout:function(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.classes,p=c===void 0?[]:c;return ry({type:"layer"},function(){Ju("beforeDOMElementCreation",{assembler:i,params:a});var d=[];return i(function(u){Array.isArray(u)?u.map(function(b){d=d.concat(b.abstract)}):d=d.concat(u.abstract)}),[{tag:"span",attributes:{class:["".concat(rn.cssPrefix,"-layers")].concat(Wf(p)).join(" ")},children:d}]})}}}},Vz={mixout:function(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.title,p=c===void 0?null:c,d=a.classes,u=d===void 0?[]:d,b=a.attributes,C=b===void 0?{}:b,A=a.styles,w=A===void 0?{}:A;return ry({type:"counter",content:i},function(){return Ju("beforeDOMElementCreation",{content:i,params:a}),bz({content:i.toString(),title:p,extra:{attributes:C,styles:w,classes:["".concat(rn.cssPrefix,"-layers-counter")].concat(Wf(u))}})})}}}},Gz={mixout:function(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.transform,p=c===void 0?ia:c,d=a.title,u=d===void 0?null:d,b=a.classes,C=b===void 0?[]:b,A=a.attributes,w=A===void 0?{}:A,T=a.styles,L=T===void 0?{}:T;return ry({type:"text",content:i},function(){return Ju("beforeDOMElementCreation",{content:i,params:a}),R2({content:i,transform:Kt(Kt({},ia),p),title:u,extra:{attributes:w,styles:L,classes:["".concat(rn.cssPrefix,"-layers-text")].concat(Wf(C))}})})}}},provides:function(t){t.generateLayersText=function(i,a){var c=a.title,p=a.transform,d=a.extra,u=null,b=null;if(wC){var C=parseInt(getComputedStyle(i).fontSize,10),A=i.getBoundingClientRect();u=A.width/C,b=A.height/C}return rn.autoA11y&&!c&&(d.attributes["aria-hidden"]="true"),Promise.resolve([i,R2({content:i.innerHTML,width:u,height:b,transform:p,title:c,extra:d,watchable:!0})])}}},Hz=new RegExp('"',"ug"),N2=[1105920,1112319];function Wz(e){var t=e.replace(Hz,""),i=oz(t,0),a=i>=N2[0]&&i<=N2[1],c=t.length===2?t[0]===t[1]:!1;return{value:e_(c?t[0]:t),isSecondary:a||c}}function U2(e,t){var i="".concat(O4).concat(t.replace(":","-"));return new Promise(function(a,c){if(e.getAttribute(i)!==null)return a();var p=Nh(e.children),d=p.filter(function(E){return E.getAttribute(Qv)===t})[0],u=iu.getComputedStyle(e,t),b=u.getPropertyValue("font-family").match(B4),C=u.getPropertyValue("font-weight"),A=u.getPropertyValue("content");if(d&&!b)return e.removeChild(d),a();if(b&&A!=="none"&&A!==""){var w=u.getPropertyValue("content"),T=~["Sharp"].indexOf(b[2])?Nr:vr,L=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(b[2])?kf[T][b[2].toLowerCase()]:N4[T][C],U=Wz(w),F=U.value,ce=U.isSecondary,K=b[0].startsWith("FontAwesome"),Z=Z1(L,F),$=Z;if(K){var oe=dz(F);oe.iconName&&oe.prefix&&(Z=oe.iconName,L=oe.prefix)}if(Z&&!ce&&(!d||d.getAttribute(U1)!==L||d.getAttribute($1)!==$)){e.setAttribute(i,$),d&&e.removeChild(d);var q=Fz(),V=q.extra;V.attributes[Qv]=t,o_(Z,L).then(function(E){var j=q1(Kt(Kt({},q),{},{icons:{main:E,mask:X1()},prefix:L,iconName:$,extra:V,watchable:!0})),D=xr.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(D,e.firstChild):e.appendChild(D),D.outerHTML=j.map(function(ee){return Xf(ee)}).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function Zz(e){return Promise.all([U2(e,"::before"),U2(e,"::after")])}function Xz(e){return e.parentNode!==document.head&&!~F4.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Qv)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function $2(e){if(Qa)return new Promise(function(t,i){var a=Nh(e.querySelectorAll("*")).filter(Xz).map(Zz),c=K1.begin("searchPseudoElements");$C(),Promise.all(a).then(function(){c(),a_(),t()}).catch(function(){c(),a_(),i()})})}var qz={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=$2,i}}},provides:function(t){t.pseudoElements2svg=function(i){var a=i.node,c=a===void 0?xr:a;rn.searchPseudoElements&&$2(c)}}},V2=!1,Kz={mixout:function(){return{dom:{unwatch:function(){$C(),V2=!0}}}},hooks:function(){return{bootstrap:function(){j2(n_("mutationObserverCallbacks",{}))},noAuto:function(){zz()},watch:function(i){var a=i.observeMutationsRoot;V2?a_():j2(n_("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},G2=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,c){var p=c.toLowerCase().split("-"),d=p[0],u=p.slice(1).join("-");if(d&&u==="h")return a.flipX=!0,a;if(d&&u==="v")return a.flipY=!0,a;if(u=parseFloat(u),isNaN(u))return a;switch(d){case"grow":a.size=a.size+u;break;case"shrink":a.size=a.size-u;break;case"left":a.x=a.x-u;break;case"right":a.x=a.x+u;break;case"up":a.y=a.y-u;break;case"down":a.y=a.y+u;break;case"rotate":a.rotate=a.rotate+u;break}return a},i)},Yz={mixout:function(){return{parse:{transform:function(i){return G2(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-transform");return c&&(i.transform=G2(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,c=i.transform,p=i.containerWidth,d=i.iconWidth,u={transform:"translate(".concat(p/2," 256)")},b="translate(".concat(c.x*32,", ").concat(c.y*32,") "),C="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),A="rotate(".concat(c.rotate," 0 0)"),w={transform:"".concat(b," ").concat(C," ").concat(A)},T={transform:"translate(".concat(d/2*-1," -256)")},L={outer:u,inner:w,path:T};return{tag:"g",attributes:Kt({},L.outer),children:[{tag:"g",attributes:Kt({},L.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:Kt(Kt({},a.icon.attributes),L.path)}]}]}}}},k0={x:0,y:0,width:"100%",height:"100%"};function H2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function Jz(e){return e.tag==="g"?e.children:[e]}var Qz={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-mask"),p=c?ny(c.split(" ").map(function(d){return d.trim()})):X1();return p.prefix||(p.prefix=ou()),i.mask=p,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var a=i.children,c=i.attributes,p=i.main,d=i.mask,u=i.maskId,b=i.transform,C=p.width,A=p.icon,w=d.width,T=d.icon,L=Y4({transform:b,containerWidth:w,iconWidth:C}),U={tag:"rect",attributes:Kt(Kt({},k0),{},{fill:"white"})},F=A.children?{children:A.children.map(H2)}:{},ce={tag:"g",attributes:Kt({},L.inner),children:[H2(Kt({tag:A.tag,attributes:Kt(Kt({},A.attributes),L.path)},F))]},K={tag:"g",attributes:Kt({},L.outer),children:[ce]},Z="mask-".concat(u||Rf()),$="clip-".concat(u||Rf()),oe={tag:"mask",attributes:Kt(Kt({},k0),{},{id:Z,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[U,K]},q={tag:"defs",children:[{tag:"clipPath",attributes:{id:$},children:Jz(T)},oe]};return a.push(q,{tag:"rect",attributes:Kt({fill:"currentColor","clip-path":"url(#".concat($,")"),mask:"url(#".concat(Z,")")},k0)}),{children:a,attributes:c}}}},eR={provides:function(t){var i=!1;iu.matchMedia&&(i=iu.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],c={fill:"currentColor"},p={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:Kt(Kt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var d=Kt(Kt({},p),{},{attributeName:"opacity"}),u={tag:"circle",attributes:Kt(Kt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||u.children.push({tag:"animate",attributes:Kt(Kt({},p),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Kt(Kt({},d),{},{values:"1;0;1;1;0;1;"})}),a.push(u),a.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:Kt(Kt({},d),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Kt(Kt({},d),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},tR={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-symbol"),p=c===null?!1:c===""?!0:c;return i.symbol=p,i}}}},nR=[ez,Uz,$z,Vz,Gz,qz,Kz,Yz,Qz,eR,tR];mz(nR,{mixoutsTo:Wo});Wo.noAuto;Wo.config;Wo.library;Wo.dom;var l_=Wo.parse;Wo.findIconDefinition;Wo.toHtml;var rR=Wo.icon;Wo.layer;Wo.text;Wo.counter;var GC={exports:{}},iR="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",oR=iR,sR=oR;function HC(){}function WC(){}WC.resetWarningCache=HC;var aR=function(){function e(a,c,p,d,u,b){if(b!==sR){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:WC,resetWarningCache:HC};return i.PropTypes=i,i};GC.exports=aR();var lR=GC.exports;const Fn=Bf(lR);function W2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Zl(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?W2(Object(i),!0).forEach(function(a){hh(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):W2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function hg(e){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hg(e)}function hh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function uR(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,p;for(p=0;p<a.length;p++)c=a[p],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function cR(e,t){if(e==null)return{};var i=uR(e,t),a,c;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(c=0;c<p.length;c++)a=p[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function u_(e){return hR(e)||dR(e)||fR(e)||pR()}function hR(e){if(Array.isArray(e))return c_(e)}function dR(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fR(e,t){if(e){if(typeof e=="string")return c_(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c_(e,t)}}function c_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function pR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mR(e){var t,i=e.beat,a=e.fade,c=e.beatFade,p=e.bounce,d=e.shake,u=e.flash,b=e.spin,C=e.spinPulse,A=e.spinReverse,w=e.pulse,T=e.fixedWidth,L=e.inverse,U=e.border,F=e.listItem,ce=e.flip,K=e.size,Z=e.rotation,$=e.pull,oe=(t={"fa-beat":i,"fa-fade":a,"fa-beat-fade":c,"fa-bounce":p,"fa-shake":d,"fa-flash":u,"fa-spin":b,"fa-spin-reverse":A,"fa-spin-pulse":C,"fa-pulse":w,"fa-fw":T,"fa-inverse":L,"fa-border":U,"fa-li":F,"fa-flip":ce===!0,"fa-flip-horizontal":ce==="horizontal"||ce==="both","fa-flip-vertical":ce==="vertical"||ce==="both"},hh(t,"fa-".concat(K),typeof K<"u"&&K!==null),hh(t,"fa-rotate-".concat(Z),typeof Z<"u"&&Z!==null&&Z!==0),hh(t,"fa-pull-".concat($),typeof $<"u"&&$!==null),hh(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(oe).map(function(q){return oe[q]?q:null}).filter(function(q){return q})}function gR(e){return e=e-0,e===e}function ZC(e){return gR(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var yR=["style"];function vR(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _R(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=ZC(i.slice(0,a)),p=i.slice(a+1).trim();return c.startsWith("webkit")?t[vR(c)]=p:t[c]=p,t},{})}function XC(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(b){return XC(e,b)}),c=Object.keys(t.attributes||{}).reduce(function(b,C){var A=t.attributes[C];switch(C){case"class":b.attrs.className=A,delete t.attributes.class;break;case"style":b.attrs.style=_R(A);break;default:C.indexOf("aria-")===0||C.indexOf("data-")===0?b.attrs[C.toLowerCase()]=A:b.attrs[ZC(C)]=A}return b},{attrs:{}}),p=i.style,d=p===void 0?{}:p,u=cR(i,yR);return c.attrs.style=Zl(Zl({},c.attrs.style),d),e.apply(void 0,[t.tag,Zl(Zl({},c.attrs),u)].concat(u_(a)))}var qC=!1;try{qC=!0}catch{}function xR(){if(!qC&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function Z2(e){if(e&&hg(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(l_.icon)return l_.icon(e);if(e===null)return null;if(e&&hg(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function M0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?hh({},e,t):{}}var aa=Z_.forwardRef(function(e,t){var i=e.icon,a=e.mask,c=e.symbol,p=e.className,d=e.title,u=e.titleId,b=e.maskId,C=Z2(i),A=M0("classes",[].concat(u_(mR(e)),u_(p.split(" ")))),w=M0("transform",typeof e.transform=="string"?l_.transform(e.transform):e.transform),T=M0("mask",Z2(a)),L=rR(C,Zl(Zl(Zl(Zl({},A),w),T),{},{symbol:c,title:d,titleId:u,maskId:b}));if(!L)return xR("Could not find icon",C),null;var U=L.abstract,F={ref:t};return Object.keys(e).forEach(function(ce){aa.defaultProps.hasOwnProperty(ce)||(F[ce]=e[ce])}),wR(U[0],F)});aa.displayName="FontAwesomeIcon";aa.propTypes={beat:Fn.bool,border:Fn.bool,beatFade:Fn.bool,bounce:Fn.bool,className:Fn.string,fade:Fn.bool,flash:Fn.bool,mask:Fn.oneOfType([Fn.object,Fn.array,Fn.string]),maskId:Fn.string,fixedWidth:Fn.bool,inverse:Fn.bool,flip:Fn.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Fn.oneOfType([Fn.object,Fn.array,Fn.string]),listItem:Fn.bool,pull:Fn.oneOf(["right","left"]),pulse:Fn.bool,rotation:Fn.oneOf([0,90,180,270]),shake:Fn.bool,size:Fn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Fn.bool,spinPulse:Fn.bool,spinReverse:Fn.bool,symbol:Fn.oneOfType([Fn.bool,Fn.string]),title:Fn.string,titleId:Fn.string,transform:Fn.oneOfType([Fn.string,Fn.object]),swapOpacity:Fn.bool};aa.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var wR=XC.bind(null,Z_.createElement),bR={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},h_={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},SR={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"]},ER=SR;function om(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var KC={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,p){function d(C,A){if(!c[C]){if(!a[C]){var w=typeof om=="function"&&om;if(!A&&w)return w(C,!0);if(u)return u(C,!0);var T=new Error("Cannot find module '"+C+"'");throw T.code="MODULE_NOT_FOUND",T}var L=c[C]={exports:{}};a[C][0].call(L.exports,function(U){var F=a[C][1][U];return d(F||U)},L,L.exports,i,a,c,p)}return c[C].exports}for(var u=typeof om=="function"&&om,b=0;b<p.length;b++)d(p[b]);return d}return i}()({1:[function(i,a,c){c.byteLength=T,c.toByteArray=U,c.fromByteArray=K;for(var p=[],d=[],u=typeof Uint8Array<"u"?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,A=b.length;C<A;++C)p[C]=b[C],d[b.charCodeAt(C)]=C;d[45]=62,d[95]=63;function w(Z){var $=Z.length;if($%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var oe=Z.indexOf("=");oe===-1&&(oe=$);var q=oe===$?0:4-oe%4;return[oe,q]}function T(Z){var $=w(Z),oe=$[0],q=$[1];return(oe+q)*3/4-q}function L(Z,$,oe){return($+oe)*3/4-oe}function U(Z){var $,oe=w(Z),q=oe[0],V=oe[1],E=new u(L(Z,q,V)),j=0,D=V>0?q-4:q,ee;for(ee=0;ee<D;ee+=4)$=d[Z.charCodeAt(ee)]<<18|d[Z.charCodeAt(ee+1)]<<12|d[Z.charCodeAt(ee+2)]<<6|d[Z.charCodeAt(ee+3)],E[j++]=$>>16&255,E[j++]=$>>8&255,E[j++]=$&255;return V===2&&($=d[Z.charCodeAt(ee)]<<2|d[Z.charCodeAt(ee+1)]>>4,E[j++]=$&255),V===1&&($=d[Z.charCodeAt(ee)]<<10|d[Z.charCodeAt(ee+1)]<<4|d[Z.charCodeAt(ee+2)]>>2,E[j++]=$>>8&255,E[j++]=$&255),E}function F(Z){return p[Z>>18&63]+p[Z>>12&63]+p[Z>>6&63]+p[Z&63]}function ce(Z,$,oe){for(var q,V=[],E=$;E<oe;E+=3)q=(Z[E]<<16&16711680)+(Z[E+1]<<8&65280)+(Z[E+2]&255),V.push(F(q));return V.join("")}function K(Z){for(var $,oe=Z.length,q=oe%3,V=[],E=16383,j=0,D=oe-q;j<D;j+=E)V.push(ce(Z,j,j+E>D?D:j+E));return q===1?($=Z[oe-1],V.push(p[$>>2]+p[$<<4&63]+"==")):q===2&&($=(Z[oe-2]<<8)+Z[oe-1],V.push(p[$>>10]+p[$>>4&63]+p[$<<2&63]+"=")),V.join("")}},{}],2:[function(i,a,c){(function(p){(function(){var d=i("base64-js"),u=i("ieee754");c.Buffer=w,c.SlowBuffer=q,c.INSPECT_MAX_BYTES=50;var b=2147483647;c.kMaxLength=b,w.TYPED_ARRAY_SUPPORT=C(),!w.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function C(){try{var xe=new Uint8Array(1);return xe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},xe.foo()===42}catch{return!1}}Object.defineProperty(w.prototype,"parent",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.buffer}}),Object.defineProperty(w.prototype,"offset",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.byteOffset}});function A(xe){if(xe>b)throw new RangeError('The value "'+xe+'" is invalid for option "size"');var N=new Uint8Array(xe);return N.__proto__=w.prototype,N}function w(xe,N,B){if(typeof xe=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return F(xe)}return T(xe,N,B)}typeof Symbol<"u"&&Symbol.species!=null&&w[Symbol.species]===w&&Object.defineProperty(w,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),w.poolSize=8192;function T(xe,N,B){if(typeof xe=="string")return ce(xe,N);if(ArrayBuffer.isView(xe))return K(xe);if(xe==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof xe);if(ln(xe,ArrayBuffer)||xe&&ln(xe.buffer,ArrayBuffer))return Z(xe,N,B);if(typeof xe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var we=xe.valueOf&&xe.valueOf();if(we!=null&&we!==xe)return w.from(we,N,B);var Xe=$(xe);if(Xe)return Xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof xe[Symbol.toPrimitive]=="function")return w.from(xe[Symbol.toPrimitive]("string"),N,B);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof xe)}w.from=function(xe,N,B){return T(xe,N,B)},w.prototype.__proto__=Uint8Array.prototype,w.__proto__=Uint8Array;function L(xe){if(typeof xe!="number")throw new TypeError('"size" argument must be of type number');if(xe<0)throw new RangeError('The value "'+xe+'" is invalid for option "size"')}function U(xe,N,B){return L(xe),xe<=0?A(xe):N!==void 0?typeof B=="string"?A(xe).fill(N,B):A(xe).fill(N):A(xe)}w.alloc=function(xe,N,B){return U(xe,N,B)};function F(xe){return L(xe),A(xe<0?0:oe(xe)|0)}w.allocUnsafe=function(xe){return F(xe)},w.allocUnsafeSlow=function(xe){return F(xe)};function ce(xe,N){if((typeof N!="string"||N==="")&&(N="utf8"),!w.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var B=V(xe,N)|0,we=A(B),Xe=we.write(xe,N);return Xe!==B&&(we=we.slice(0,Xe)),we}function K(xe){for(var N=xe.length<0?0:oe(xe.length)|0,B=A(N),we=0;we<N;we+=1)B[we]=xe[we]&255;return B}function Z(xe,N,B){if(N<0||xe.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(xe.byteLength<N+(B||0))throw new RangeError('"length" is outside of buffer bounds');var we;return N===void 0&&B===void 0?we=new Uint8Array(xe):B===void 0?we=new Uint8Array(xe,N):we=new Uint8Array(xe,N,B),we.__proto__=w.prototype,we}function $(xe){if(w.isBuffer(xe)){var N=oe(xe.length)|0,B=A(N);return B.length===0||xe.copy(B,0,0,N),B}if(xe.length!==void 0)return typeof xe.length!="number"||wn(xe.length)?A(0):K(xe);if(xe.type==="Buffer"&&Array.isArray(xe.data))return K(xe.data)}function oe(xe){if(xe>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return xe|0}function q(xe){return+xe!=xe&&(xe=0),w.alloc(+xe)}w.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==w.prototype},w.compare=function(N,B){if(ln(N,Uint8Array)&&(N=w.from(N,N.offset,N.byteLength)),ln(B,Uint8Array)&&(B=w.from(B,B.offset,B.byteLength)),!w.isBuffer(N)||!w.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===B)return 0;for(var we=N.length,Xe=B.length,Qe=0,ct=Math.min(we,Xe);Qe<ct;++Qe)if(N[Qe]!==B[Qe]){we=N[Qe],Xe=B[Qe];break}return we<Xe?-1:Xe<we?1:0},w.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},w.concat=function(N,B){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return w.alloc(0);var we;if(B===void 0)for(B=0,we=0;we<N.length;++we)B+=N[we].length;var Xe=w.allocUnsafe(B),Qe=0;for(we=0;we<N.length;++we){var ct=N[we];if(ln(ct,Uint8Array)&&(ct=w.from(ct)),!w.isBuffer(ct))throw new TypeError('"list" argument must be an Array of Buffers');ct.copy(Xe,Qe),Qe+=ct.length}return Xe};function V(xe,N){if(w.isBuffer(xe))return xe.length;if(ArrayBuffer.isView(xe)||ln(xe,ArrayBuffer))return xe.byteLength;if(typeof xe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof xe);var B=xe.length,we=arguments.length>2&&arguments[2]===!0;if(!we&&B===0)return 0;for(var Xe=!1;;)switch(N){case"ascii":case"latin1":case"binary":return B;case"utf8":case"utf-8":return Vt(xe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B*2;case"hex":return B>>>1;case"base64":return Sn(xe).length;default:if(Xe)return we?-1:Vt(xe).length;N=(""+N).toLowerCase(),Xe=!0}}w.byteLength=V;function E(xe,N,B){var we=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((B===void 0||B>this.length)&&(B=this.length),B<=0)||(B>>>=0,N>>>=0,B<=N))return"";for(xe||(xe="utf8");;)switch(xe){case"hex":return Ae(this,N,B);case"utf8":case"utf-8":return te(this,N,B);case"ascii":return Ee(this,N,B);case"latin1":case"binary":return De(this,N,B);case"base64":return J(this,N,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,N,B);default:if(we)throw new TypeError("Unknown encoding: "+xe);xe=(xe+"").toLowerCase(),we=!0}}w.prototype._isBuffer=!0;function j(xe,N,B){var we=xe[N];xe[N]=xe[B],xe[B]=we}w.prototype.swap16=function(){var N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var B=0;B<N;B+=2)j(this,B,B+1);return this},w.prototype.swap32=function(){var N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var B=0;B<N;B+=4)j(this,B,B+3),j(this,B+1,B+2);return this},w.prototype.swap64=function(){var N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var B=0;B<N;B+=8)j(this,B,B+7),j(this,B+1,B+6),j(this,B+2,B+5),j(this,B+3,B+4);return this},w.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?te(this,0,N):E.apply(this,arguments)},w.prototype.toLocaleString=w.prototype.toString,w.prototype.equals=function(N){if(!w.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:w.compare(this,N)===0},w.prototype.inspect=function(){var N="",B=c.INSPECT_MAX_BYTES;return N=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(N+=" ... "),"<Buffer "+N+">"},w.prototype.compare=function(N,B,we,Xe,Qe){if(ln(N,Uint8Array)&&(N=w.from(N,N.offset,N.byteLength)),!w.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(B===void 0&&(B=0),we===void 0&&(we=N?N.length:0),Xe===void 0&&(Xe=0),Qe===void 0&&(Qe=this.length),B<0||we>N.length||Xe<0||Qe>this.length)throw new RangeError("out of range index");if(Xe>=Qe&&B>=we)return 0;if(Xe>=Qe)return-1;if(B>=we)return 1;if(B>>>=0,we>>>=0,Xe>>>=0,Qe>>>=0,this===N)return 0;for(var ct=Qe-Xe,ae=we-B,R=Math.min(ct,ae),z=this.slice(Xe,Qe),Se=N.slice(B,we),Ve=0;Ve<R;++Ve)if(z[Ve]!==Se[Ve]){ct=z[Ve],ae=Se[Ve];break}return ct<ae?-1:ae<ct?1:0};function D(xe,N,B,we,Xe){if(xe.length===0)return-1;if(typeof B=="string"?(we=B,B=0):B>2147483647?B=2147483647:B<-2147483648&&(B=-2147483648),B=+B,wn(B)&&(B=Xe?0:xe.length-1),B<0&&(B=xe.length+B),B>=xe.length){if(Xe)return-1;B=xe.length-1}else if(B<0)if(Xe)B=0;else return-1;if(typeof N=="string"&&(N=w.from(N,we)),w.isBuffer(N))return N.length===0?-1:ee(xe,N,B,we,Xe);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?Xe?Uint8Array.prototype.indexOf.call(xe,N,B):Uint8Array.prototype.lastIndexOf.call(xe,N,B):ee(xe,[N],B,we,Xe);throw new TypeError("val must be string, number or Buffer")}function ee(xe,N,B,we,Xe){var Qe=1,ct=xe.length,ae=N.length;if(we!==void 0&&(we=String(we).toLowerCase(),we==="ucs2"||we==="ucs-2"||we==="utf16le"||we==="utf-16le")){if(xe.length<2||N.length<2)return-1;Qe=2,ct/=2,ae/=2,B/=2}function R(ot,ut){return Qe===1?ot[ut]:ot.readUInt16BE(ut*Qe)}var z;if(Xe){var Se=-1;for(z=B;z<ct;z++)if(R(xe,z)===R(N,Se===-1?0:z-Se)){if(Se===-1&&(Se=z),z-Se+1===ae)return Se*Qe}else Se!==-1&&(z-=z-Se),Se=-1}else for(B+ae>ct&&(B=ct-ae),z=B;z>=0;z--){for(var Ve=!0,tt=0;tt<ae;tt++)if(R(xe,z+tt)!==R(N,tt)){Ve=!1;break}if(Ve)return z}return-1}w.prototype.includes=function(N,B,we){return this.indexOf(N,B,we)!==-1},w.prototype.indexOf=function(N,B,we){return D(this,N,B,we,!0)},w.prototype.lastIndexOf=function(N,B,we){return D(this,N,B,we,!1)};function W(xe,N,B,we){B=Number(B)||0;var Xe=xe.length-B;we?(we=Number(we),we>Xe&&(we=Xe)):we=Xe;var Qe=N.length;we>Qe/2&&(we=Qe/2);for(var ct=0;ct<we;++ct){var ae=parseInt(N.substr(ct*2,2),16);if(wn(ae))return ct;xe[B+ct]=ae}return ct}function ve(xe,N,B,we){return et(Vt(N,xe.length-B),xe,B,we)}function _e(xe,N,B,we){return et(Bt(N),xe,B,we)}function de(xe,N,B,we){return _e(xe,N,B,we)}function ie(xe,N,B,we){return et(Sn(N),xe,B,we)}function le(xe,N,B,we){return et(an(N,xe.length-B),xe,B,we)}w.prototype.write=function(N,B,we,Xe){if(B===void 0)Xe="utf8",we=this.length,B=0;else if(we===void 0&&typeof B=="string")Xe=B,we=this.length,B=0;else if(isFinite(B))B=B>>>0,isFinite(we)?(we=we>>>0,Xe===void 0&&(Xe="utf8")):(Xe=we,we=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Qe=this.length-B;if((we===void 0||we>Qe)&&(we=Qe),N.length>0&&(we<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xe||(Xe="utf8");for(var ct=!1;;)switch(Xe){case"hex":return W(this,N,B,we);case"utf8":case"utf-8":return ve(this,N,B,we);case"ascii":return _e(this,N,B,we);case"latin1":case"binary":return de(this,N,B,we);case"base64":return ie(this,N,B,we);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,N,B,we);default:if(ct)throw new TypeError("Unknown encoding: "+Xe);Xe=(""+Xe).toLowerCase(),ct=!0}},w.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function J(xe,N,B){return N===0&&B===xe.length?d.fromByteArray(xe):d.fromByteArray(xe.slice(N,B))}function te(xe,N,B){B=Math.min(xe.length,B);for(var we=[],Xe=N;Xe<B;){var Qe=xe[Xe],ct=null,ae=Qe>239?4:Qe>223?3:Qe>191?2:1;if(Xe+ae<=B){var R,z,Se,Ve;switch(ae){case 1:Qe<128&&(ct=Qe);break;case 2:R=xe[Xe+1],(R&192)===128&&(Ve=(Qe&31)<<6|R&63,Ve>127&&(ct=Ve));break;case 3:R=xe[Xe+1],z=xe[Xe+2],(R&192)===128&&(z&192)===128&&(Ve=(Qe&15)<<12|(R&63)<<6|z&63,Ve>2047&&(Ve<55296||Ve>57343)&&(ct=Ve));break;case 4:R=xe[Xe+1],z=xe[Xe+2],Se=xe[Xe+3],(R&192)===128&&(z&192)===128&&(Se&192)===128&&(Ve=(Qe&15)<<18|(R&63)<<12|(z&63)<<6|Se&63,Ve>65535&&Ve<1114112&&(ct=Ve))}}ct===null?(ct=65533,ae=1):ct>65535&&(ct-=65536,we.push(ct>>>10&1023|55296),ct=56320|ct&1023),we.push(ct),Xe+=ae}return be(we)}var he=4096;function be(xe){var N=xe.length;if(N<=he)return String.fromCharCode.apply(String,xe);for(var B="",we=0;we<N;)B+=String.fromCharCode.apply(String,xe.slice(we,we+=he));return B}function Ee(xe,N,B){var we="";B=Math.min(xe.length,B);for(var Xe=N;Xe<B;++Xe)we+=String.fromCharCode(xe[Xe]&127);return we}function De(xe,N,B){var we="";B=Math.min(xe.length,B);for(var Xe=N;Xe<B;++Xe)we+=String.fromCharCode(xe[Xe]);return we}function Ae(xe,N,B){var we=xe.length;(!N||N<0)&&(N=0),(!B||B<0||B>we)&&(B=we);for(var Xe="",Qe=N;Qe<B;++Qe)Xe+=St(xe[Qe]);return Xe}function Oe(xe,N,B){for(var we=xe.slice(N,B),Xe="",Qe=0;Qe<we.length;Qe+=2)Xe+=String.fromCharCode(we[Qe]+we[Qe+1]*256);return Xe}w.prototype.slice=function(N,B){var we=this.length;N=~~N,B=B===void 0?we:~~B,N<0?(N+=we,N<0&&(N=0)):N>we&&(N=we),B<0?(B+=we,B<0&&(B=0)):B>we&&(B=we),B<N&&(B=N);var Xe=this.subarray(N,B);return Xe.__proto__=w.prototype,Xe};function We(xe,N,B){if(xe%1!==0||xe<0)throw new RangeError("offset is not uint");if(xe+N>B)throw new RangeError("Trying to access beyond buffer length")}w.prototype.readUIntLE=function(N,B,we){N=N>>>0,B=B>>>0,we||We(N,B,this.length);for(var Xe=this[N],Qe=1,ct=0;++ct<B&&(Qe*=256);)Xe+=this[N+ct]*Qe;return Xe},w.prototype.readUIntBE=function(N,B,we){N=N>>>0,B=B>>>0,we||We(N,B,this.length);for(var Xe=this[N+--B],Qe=1;B>0&&(Qe*=256);)Xe+=this[N+--B]*Qe;return Xe},w.prototype.readUInt8=function(N,B){return N=N>>>0,B||We(N,1,this.length),this[N]},w.prototype.readUInt16LE=function(N,B){return N=N>>>0,B||We(N,2,this.length),this[N]|this[N+1]<<8},w.prototype.readUInt16BE=function(N,B){return N=N>>>0,B||We(N,2,this.length),this[N]<<8|this[N+1]},w.prototype.readUInt32LE=function(N,B){return N=N>>>0,B||We(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},w.prototype.readUInt32BE=function(N,B){return N=N>>>0,B||We(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},w.prototype.readIntLE=function(N,B,we){N=N>>>0,B=B>>>0,we||We(N,B,this.length);for(var Xe=this[N],Qe=1,ct=0;++ct<B&&(Qe*=256);)Xe+=this[N+ct]*Qe;return Qe*=128,Xe>=Qe&&(Xe-=Math.pow(2,8*B)),Xe},w.prototype.readIntBE=function(N,B,we){N=N>>>0,B=B>>>0,we||We(N,B,this.length);for(var Xe=B,Qe=1,ct=this[N+--Xe];Xe>0&&(Qe*=256);)ct+=this[N+--Xe]*Qe;return Qe*=128,ct>=Qe&&(ct-=Math.pow(2,8*B)),ct},w.prototype.readInt8=function(N,B){return N=N>>>0,B||We(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},w.prototype.readInt16LE=function(N,B){N=N>>>0,B||We(N,2,this.length);var we=this[N]|this[N+1]<<8;return we&32768?we|4294901760:we},w.prototype.readInt16BE=function(N,B){N=N>>>0,B||We(N,2,this.length);var we=this[N+1]|this[N]<<8;return we&32768?we|4294901760:we},w.prototype.readInt32LE=function(N,B){return N=N>>>0,B||We(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},w.prototype.readInt32BE=function(N,B){return N=N>>>0,B||We(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},w.prototype.readFloatLE=function(N,B){return N=N>>>0,B||We(N,4,this.length),u.read(this,N,!0,23,4)},w.prototype.readFloatBE=function(N,B){return N=N>>>0,B||We(N,4,this.length),u.read(this,N,!1,23,4)},w.prototype.readDoubleLE=function(N,B){return N=N>>>0,B||We(N,8,this.length),u.read(this,N,!0,52,8)},w.prototype.readDoubleBE=function(N,B){return N=N>>>0,B||We(N,8,this.length),u.read(this,N,!1,52,8)};function He(xe,N,B,we,Xe,Qe){if(!w.isBuffer(xe))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>Xe||N<Qe)throw new RangeError('"value" argument is out of bounds');if(B+we>xe.length)throw new RangeError("Index out of range")}w.prototype.writeUIntLE=function(N,B,we,Xe){if(N=+N,B=B>>>0,we=we>>>0,!Xe){var Qe=Math.pow(2,8*we)-1;He(this,N,B,we,Qe,0)}var ct=1,ae=0;for(this[B]=N&255;++ae<we&&(ct*=256);)this[B+ae]=N/ct&255;return B+we},w.prototype.writeUIntBE=function(N,B,we,Xe){if(N=+N,B=B>>>0,we=we>>>0,!Xe){var Qe=Math.pow(2,8*we)-1;He(this,N,B,we,Qe,0)}var ct=we-1,ae=1;for(this[B+ct]=N&255;--ct>=0&&(ae*=256);)this[B+ct]=N/ae&255;return B+we},w.prototype.writeUInt8=function(N,B,we){return N=+N,B=B>>>0,we||He(this,N,B,1,255,0),this[B]=N&255,B+1},w.prototype.writeUInt16LE=function(N,B,we){return N=+N,B=B>>>0,we||He(this,N,B,2,65535,0),this[B]=N&255,this[B+1]=N>>>8,B+2},w.prototype.writeUInt16BE=function(N,B,we){return N=+N,B=B>>>0,we||He(this,N,B,2,65535,0),this[B]=N>>>8,this[B+1]=N&255,B+2},w.prototype.writeUInt32LE=function(N,B,we){return N=+N,B=B>>>0,we||He(this,N,B,4,4294967295,0),this[B+3]=N>>>24,this[B+2]=N>>>16,this[B+1]=N>>>8,this[B]=N&255,B+4},w.prototype.writeUInt32BE=function(N,B,we){return N=+N,B=B>>>0,we||He(this,N,B,4,4294967295,0),this[B]=N>>>24,this[B+1]=N>>>16,this[B+2]=N>>>8,this[B+3]=N&255,B+4},w.prototype.writeIntLE=function(N,B,we,Xe){if(N=+N,B=B>>>0,!Xe){var Qe=Math.pow(2,8*we-1);He(this,N,B,we,Qe-1,-Qe)}var ct=0,ae=1,R=0;for(this[B]=N&255;++ct<we&&(ae*=256);)N<0&&R===0&&this[B+ct-1]!==0&&(R=1),this[B+ct]=(N/ae>>0)-R&255;return B+we},w.prototype.writeIntBE=function(N,B,we,Xe){if(N=+N,B=B>>>0,!Xe){var Qe=Math.pow(2,8*we-1);He(this,N,B,we,Qe-1,-Qe)}var ct=we-1,ae=1,R=0;for(this[B+ct]=N&255;--ct>=0&&(ae*=256);)N<0&&R===0&&this[B+ct+1]!==0&&(R=1),this[B+ct]=(N/ae>>0)-R&255;return B+we},w.prototype.writeInt8=function(N,B,we){return N=+N,B=B>>>0,we||He(this,N,B,1,127,-128),N<0&&(N=255+N+1),this[B]=N&255,B+1},w.prototype.writeInt16LE=function(N,B,we){return N=+N,B=B>>>0,we||He(this,N,B,2,32767,-32768),this[B]=N&255,this[B+1]=N>>>8,B+2},w.prototype.writeInt16BE=function(N,B,we){return N=+N,B=B>>>0,we||He(this,N,B,2,32767,-32768),this[B]=N>>>8,this[B+1]=N&255,B+2},w.prototype.writeInt32LE=function(N,B,we){return N=+N,B=B>>>0,we||He(this,N,B,4,2147483647,-2147483648),this[B]=N&255,this[B+1]=N>>>8,this[B+2]=N>>>16,this[B+3]=N>>>24,B+4},w.prototype.writeInt32BE=function(N,B,we){return N=+N,B=B>>>0,we||He(this,N,B,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[B]=N>>>24,this[B+1]=N>>>16,this[B+2]=N>>>8,this[B+3]=N&255,B+4};function nt(xe,N,B,we,Xe,Qe){if(B+we>xe.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("Index out of range")}function dt(xe,N,B,we,Xe){return N=+N,B=B>>>0,Xe||nt(xe,N,B,4),u.write(xe,N,B,we,23,4),B+4}w.prototype.writeFloatLE=function(N,B,we){return dt(this,N,B,!0,we)},w.prototype.writeFloatBE=function(N,B,we){return dt(this,N,B,!1,we)};function wt(xe,N,B,we,Xe){return N=+N,B=B>>>0,Xe||nt(xe,N,B,8),u.write(xe,N,B,we,52,8),B+8}w.prototype.writeDoubleLE=function(N,B,we){return wt(this,N,B,!0,we)},w.prototype.writeDoubleBE=function(N,B,we){return wt(this,N,B,!1,we)},w.prototype.copy=function(N,B,we,Xe){if(!w.isBuffer(N))throw new TypeError("argument should be a Buffer");if(we||(we=0),!Xe&&Xe!==0&&(Xe=this.length),B>=N.length&&(B=N.length),B||(B=0),Xe>0&&Xe<we&&(Xe=we),Xe===we||N.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(we<0||we>=this.length)throw new RangeError("Index out of range");if(Xe<0)throw new RangeError("sourceEnd out of bounds");Xe>this.length&&(Xe=this.length),N.length-B<Xe-we&&(Xe=N.length-B+we);var Qe=Xe-we;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(B,we,Xe);else if(this===N&&we<B&&B<Xe)for(var ct=Qe-1;ct>=0;--ct)N[ct+B]=this[ct+we];else Uint8Array.prototype.set.call(N,this.subarray(we,Xe),B);return Qe},w.prototype.fill=function(N,B,we,Xe){if(typeof N=="string"){if(typeof B=="string"?(Xe=B,B=0,we=this.length):typeof we=="string"&&(Xe=we,we=this.length),Xe!==void 0&&typeof Xe!="string")throw new TypeError("encoding must be a string");if(typeof Xe=="string"&&!w.isEncoding(Xe))throw new TypeError("Unknown encoding: "+Xe);if(N.length===1){var Qe=N.charCodeAt(0);(Xe==="utf8"&&Qe<128||Xe==="latin1")&&(N=Qe)}}else typeof N=="number"&&(N=N&255);if(B<0||this.length<B||this.length<we)throw new RangeError("Out of range index");if(we<=B)return this;B=B>>>0,we=we===void 0?this.length:we>>>0,N||(N=0);var ct;if(typeof N=="number")for(ct=B;ct<we;++ct)this[ct]=N;else{var ae=w.isBuffer(N)?N:w.from(N,Xe),R=ae.length;if(R===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ct=0;ct<we-B;++ct)this[ct+B]=ae[ct%R]}return this};var Rt=/[^+/0-9A-Za-z-_]/g;function gt(xe){if(xe=xe.split("=")[0],xe=xe.trim().replace(Rt,""),xe.length<2)return"";for(;xe.length%4!==0;)xe=xe+"=";return xe}function St(xe){return xe<16?"0"+xe.toString(16):xe.toString(16)}function Vt(xe,N){N=N||1/0;for(var B,we=xe.length,Xe=null,Qe=[],ct=0;ct<we;++ct){if(B=xe.charCodeAt(ct),B>55295&&B<57344){if(!Xe){if(B>56319){(N-=3)>-1&&Qe.push(239,191,189);continue}else if(ct+1===we){(N-=3)>-1&&Qe.push(239,191,189);continue}Xe=B;continue}if(B<56320){(N-=3)>-1&&Qe.push(239,191,189),Xe=B;continue}B=(Xe-55296<<10|B-56320)+65536}else Xe&&(N-=3)>-1&&Qe.push(239,191,189);if(Xe=null,B<128){if((N-=1)<0)break;Qe.push(B)}else if(B<2048){if((N-=2)<0)break;Qe.push(B>>6|192,B&63|128)}else if(B<65536){if((N-=3)<0)break;Qe.push(B>>12|224,B>>6&63|128,B&63|128)}else if(B<1114112){if((N-=4)<0)break;Qe.push(B>>18|240,B>>12&63|128,B>>6&63|128,B&63|128)}else throw new Error("Invalid code point")}return Qe}function Bt(xe){for(var N=[],B=0;B<xe.length;++B)N.push(xe.charCodeAt(B)&255);return N}function an(xe,N){for(var B,we,Xe,Qe=[],ct=0;ct<xe.length&&!((N-=2)<0);++ct)B=xe.charCodeAt(ct),we=B>>8,Xe=B%256,Qe.push(Xe),Qe.push(we);return Qe}function Sn(xe){return d.toByteArray(gt(xe))}function et(xe,N,B,we){for(var Xe=0;Xe<we&&!(Xe+B>=N.length||Xe>=xe.length);++Xe)N[Xe+B]=xe[Xe];return Xe}function ln(xe,N){return xe instanceof N||xe!=null&&xe.constructor!=null&&xe.constructor.name!=null&&xe.constructor.name===N.name}function wn(xe){return xe!==xe}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const p=i("./validator"),d=i("./xmlparser/XMLParser"),u=i("./xmlbuilder/json2xml");a.exports={XMLParser:d,XMLValidator:p,XMLBuilder:u}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const p=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",d=p+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",u="["+p+"]["+d+"]*",b=new RegExp("^"+u+"$"),C=function(w,T){const L=[];let U=T.exec(w);for(;U;){const F=[];F.startIndex=T.lastIndex-U[0].length;const ce=U.length;for(let K=0;K<ce;K++)F.push(U[K]);L.push(F),U=T.exec(w)}return L},A=function(w){const T=b.exec(w);return!(T===null||typeof T>"u")};c.isExist=function(w){return typeof w<"u"},c.isEmptyObject=function(w){return Object.keys(w).length===0},c.merge=function(w,T,L){if(T){const U=Object.keys(T),F=U.length;for(let ce=0;ce<F;ce++)L==="strict"?w[U[ce]]=[T[U[ce]]]:w[U[ce]]=T[U[ce]]}},c.getValue=function(w){return c.isExist(w)?w:""},c.isName=A,c.getAllMatches=C,c.nameRegexp=u},{}],5:[function(i,a,c){const p=i("./util"),d={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(V,E){E=Object.assign({},d,E);const j=[];let D=!1,ee=!1;V[0]==="\uFEFF"&&(V=V.substr(1));for(let W=0;W<V.length;W++)if(V[W]==="<"&&V[W+1]==="?"){if(W+=2,W=b(V,W),W.err)return W}else if(V[W]==="<"){let ve=W;if(W++,V[W]==="!"){W=C(V,W);continue}else{let _e=!1;V[W]==="/"&&(_e=!0,W++);let de="";for(;W<V.length&&V[W]!==">"&&V[W]!==" "&&V[W]!=="	"&&V[W]!==`
`&&V[W]!=="\r";W++)de+=V[W];if(de=de.trim(),de[de.length-1]==="/"&&(de=de.substring(0,de.length-1),W--),!$(de)){let J;return de.trim().length===0?J="Invalid space after '<'.":J="Tag '"+de+"' is an invalid name.",K("InvalidTag",J,oe(V,W))}const ie=T(V,W);if(ie===!1)return K("InvalidAttr","Attributes for '"+de+"' have open quote.",oe(V,W));let le=ie.value;if(W=ie.index,le[le.length-1]==="/"){const J=W-le.length;le=le.substring(0,le.length-1);const te=U(le,E);if(te===!0)D=!0;else return K(te.err.code,te.err.msg,oe(V,J+te.err.line))}else if(_e)if(ie.tagClosed){if(le.trim().length>0)return K("InvalidTag","Closing tag '"+de+"' can't have attributes or invalid starting.",oe(V,ve));{const J=j.pop();if(de!==J.tagName){let te=oe(V,J.tagStartPos);return K("InvalidTag","Expected closing tag '"+J.tagName+"' (opened in line "+te.line+", col "+te.col+") instead of closing tag '"+de+"'.",oe(V,ve))}j.length==0&&(ee=!0)}}else return K("InvalidTag","Closing tag '"+de+"' doesn't have proper closing.",oe(V,W));else{const J=U(le,E);if(J!==!0)return K(J.err.code,J.err.msg,oe(V,W-le.length+J.err.line));if(ee===!0)return K("InvalidXml","Multiple possible root nodes found.",oe(V,W));E.unpairedTags.indexOf(de)!==-1||j.push({tagName:de,tagStartPos:ve}),D=!0}for(W++;W<V.length;W++)if(V[W]==="<")if(V[W+1]==="!"){W++,W=C(V,W);continue}else if(V[W+1]==="?"){if(W=b(V,++W),W.err)return W}else break;else if(V[W]==="&"){const J=ce(V,W);if(J==-1)return K("InvalidChar","char '&' is not expected.",oe(V,W));W=J}else if(ee===!0&&!u(V[W]))return K("InvalidXml","Extra text at the end",oe(V,W));V[W]==="<"&&W--}}else{if(u(V[W]))continue;return K("InvalidChar","char '"+V[W]+"' is not expected.",oe(V,W))}if(D){if(j.length==1)return K("InvalidTag","Unclosed tag '"+j[0].tagName+"'.",oe(V,j[0].tagStartPos));if(j.length>0)return K("InvalidXml","Invalid '"+JSON.stringify(j.map(W=>W.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return K("InvalidXml","Start tag expected.",1);return!0};function u(V){return V===" "||V==="	"||V===`
`||V==="\r"}function b(V,E){const j=E;for(;E<V.length;E++)if(V[E]=="?"||V[E]==" "){const D=V.substr(j,E-j);if(E>5&&D==="xml")return K("InvalidXml","XML declaration allowed only at the start of the document.",oe(V,E));if(V[E]=="?"&&V[E+1]==">"){E++;break}else continue}return E}function C(V,E){if(V.length>E+5&&V[E+1]==="-"&&V[E+2]==="-"){for(E+=3;E<V.length;E++)if(V[E]==="-"&&V[E+1]==="-"&&V[E+2]===">"){E+=2;break}}else if(V.length>E+8&&V[E+1]==="D"&&V[E+2]==="O"&&V[E+3]==="C"&&V[E+4]==="T"&&V[E+5]==="Y"&&V[E+6]==="P"&&V[E+7]==="E"){let j=1;for(E+=8;E<V.length;E++)if(V[E]==="<")j++;else if(V[E]===">"&&(j--,j===0))break}else if(V.length>E+9&&V[E+1]==="["&&V[E+2]==="C"&&V[E+3]==="D"&&V[E+4]==="A"&&V[E+5]==="T"&&V[E+6]==="A"&&V[E+7]==="["){for(E+=8;E<V.length;E++)if(V[E]==="]"&&V[E+1]==="]"&&V[E+2]===">"){E+=2;break}}return E}const A='"',w="'";function T(V,E){let j="",D="",ee=!1;for(;E<V.length;E++){if(V[E]===A||V[E]===w)D===""?D=V[E]:D!==V[E]||(D="");else if(V[E]===">"&&D===""){ee=!0;break}j+=V[E]}return D!==""?!1:{value:j,index:E,tagClosed:ee}}const L=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function U(V,E){const j=p.getAllMatches(V,L),D={};for(let ee=0;ee<j.length;ee++){if(j[ee][1].length===0)return K("InvalidAttr","Attribute '"+j[ee][2]+"' has no space in starting.",q(j[ee]));if(j[ee][3]!==void 0&&j[ee][4]===void 0)return K("InvalidAttr","Attribute '"+j[ee][2]+"' is without value.",q(j[ee]));if(j[ee][3]===void 0&&!E.allowBooleanAttributes)return K("InvalidAttr","boolean attribute '"+j[ee][2]+"' is not allowed.",q(j[ee]));const W=j[ee][2];if(!Z(W))return K("InvalidAttr","Attribute '"+W+"' is an invalid name.",q(j[ee]));if(!D.hasOwnProperty(W))D[W]=1;else return K("InvalidAttr","Attribute '"+W+"' is repeated.",q(j[ee]))}return!0}function F(V,E){let j=/\d/;for(V[E]==="x"&&(E++,j=/[\da-fA-F]/);E<V.length;E++){if(V[E]===";")return E;if(!V[E].match(j))break}return-1}function ce(V,E){if(E++,V[E]===";")return-1;if(V[E]==="#")return E++,F(V,E);let j=0;for(;E<V.length;E++,j++)if(!(V[E].match(/\w/)&&j<20)){if(V[E]===";")break;return-1}return E}function K(V,E,j){return{err:{code:V,msg:E,line:j.line||j,col:j.col}}}function Z(V){return p.isName(V)}function $(V){return p.isName(V)}function oe(V,E){const j=V.substring(0,E).split(/\r?\n/);return{line:j.length,col:j[j.length-1].length+1}}function q(V){return V.startIndex+V[1].length}},{"./util":4}],6:[function(i,a,c){const p=i("./orderedJs2Xml"),d={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(w,T){return T},attributeValueProcessor:function(w,T){return T},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function u(w){this.options=Object.assign({},d,w),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=A),this.processTextOrObjNode=b,this.options.format?(this.indentate=C,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}u.prototype.build=function(w){return this.options.preserveOrder?p(w,this.options):(Array.isArray(w)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(w={[this.options.arrayNodeName]:w}),this.j2x(w,0).val)},u.prototype.j2x=function(w,T){let L="",U="";for(let F in w)if(Object.prototype.hasOwnProperty.call(w,F))if(typeof w[F]>"u")this.isAttribute(F)&&(U+="");else if(w[F]===null)this.isAttribute(F)?U+="":F[0]==="?"?U+=this.indentate(T)+"<"+F+"?"+this.tagEndChar:U+=this.indentate(T)+"<"+F+"/"+this.tagEndChar;else if(w[F]instanceof Date)U+=this.buildTextValNode(w[F],F,"",T);else if(typeof w[F]!="object"){const ce=this.isAttribute(F);if(ce)L+=this.buildAttrPairStr(ce,""+w[F]);else if(F===this.options.textNodeName){let K=this.options.tagValueProcessor(F,""+w[F]);U+=this.replaceEntitiesValue(K)}else U+=this.buildTextValNode(w[F],F,"",T)}else if(Array.isArray(w[F])){const ce=w[F].length;let K="";for(let Z=0;Z<ce;Z++){const $=w[F][Z];typeof $>"u"||($===null?F[0]==="?"?U+=this.indentate(T)+"<"+F+"?"+this.tagEndChar:U+=this.indentate(T)+"<"+F+"/"+this.tagEndChar:typeof $=="object"?this.options.oneListGroup?K+=this.j2x($,T+1).val:K+=this.processTextOrObjNode($,F,T):K+=this.buildTextValNode($,F,"",T))}this.options.oneListGroup&&(K=this.buildObjectNode(K,F,"",T)),U+=K}else if(this.options.attributesGroupName&&F===this.options.attributesGroupName){const ce=Object.keys(w[F]),K=ce.length;for(let Z=0;Z<K;Z++)L+=this.buildAttrPairStr(ce[Z],""+w[F][ce[Z]])}else U+=this.processTextOrObjNode(w[F],F,T);return{attrStr:L,val:U}},u.prototype.buildAttrPairStr=function(w,T){return T=this.options.attributeValueProcessor(w,""+T),T=this.replaceEntitiesValue(T),this.options.suppressBooleanAttributes&&T==="true"?" "+w:" "+w+'="'+T+'"'};function b(w,T,L){const U=this.j2x(w,L+1);return w[this.options.textNodeName]!==void 0&&Object.keys(w).length===1?this.buildTextValNode(w[this.options.textNodeName],T,U.attrStr,L):this.buildObjectNode(U.val,T,U.attrStr,L)}u.prototype.buildObjectNode=function(w,T,L,U){if(w==="")return T[0]==="?"?this.indentate(U)+"<"+T+L+"?"+this.tagEndChar:this.indentate(U)+"<"+T+L+this.closeTag(T)+this.tagEndChar;{let F="</"+T+this.tagEndChar,ce="";return T[0]==="?"&&(ce="?",F=""),(L||L==="")&&w.indexOf("<")===-1?this.indentate(U)+"<"+T+L+ce+">"+w+F:this.options.commentPropName!==!1&&T===this.options.commentPropName&&ce.length===0?this.indentate(U)+`<!--${w}-->`+this.newLine:this.indentate(U)+"<"+T+L+ce+this.tagEndChar+w+this.indentate(U)+F}},u.prototype.closeTag=function(w){let T="";return this.options.unpairedTags.indexOf(w)!==-1?this.options.suppressUnpairedNode||(T="/"):this.options.suppressEmptyNode?T="/":T=`></${w}`,T},u.prototype.buildTextValNode=function(w,T,L,U){if(this.options.cdataPropName!==!1&&T===this.options.cdataPropName)return this.indentate(U)+`<![CDATA[${w}]]>`+this.newLine;if(this.options.commentPropName!==!1&&T===this.options.commentPropName)return this.indentate(U)+`<!--${w}-->`+this.newLine;if(T[0]==="?")return this.indentate(U)+"<"+T+L+"?"+this.tagEndChar;{let F=this.options.tagValueProcessor(T,w);return F=this.replaceEntitiesValue(F),F===""?this.indentate(U)+"<"+T+L+this.closeTag(T)+this.tagEndChar:this.indentate(U)+"<"+T+L+">"+F+"</"+T+this.tagEndChar}},u.prototype.replaceEntitiesValue=function(w){if(w&&w.length>0&&this.options.processEntities)for(let T=0;T<this.options.entities.length;T++){const L=this.options.entities[T];w=w.replace(L.regex,L.val)}return w};function C(w){return this.options.indentBy.repeat(w)}function A(w){return w.startsWith(this.options.attributeNamePrefix)&&w!==this.options.textNodeName?w.substr(this.attrPrefixLen):!1}a.exports=u},{"./orderedJs2Xml":7}],7:[function(i,a,c){const p=`
`;function d(T,L){let U="";return L.format&&L.indentBy.length>0&&(U=p),u(T,L,"",U)}function u(T,L,U,F){let ce="",K=!1;for(let Z=0;Z<T.length;Z++){const $=T[Z],oe=b($);if(oe===void 0)continue;let q="";if(U.length===0?q=oe:q=`${U}.${oe}`,oe===L.textNodeName){let ee=$[oe];A(q,L)||(ee=L.tagValueProcessor(oe,ee),ee=w(ee,L)),K&&(ce+=F),ce+=ee,K=!1;continue}else if(oe===L.cdataPropName){K&&(ce+=F),ce+=`<![CDATA[${$[oe][0][L.textNodeName]}]]>`,K=!1;continue}else if(oe===L.commentPropName){ce+=F+`<!--${$[oe][0][L.textNodeName]}-->`,K=!0;continue}else if(oe[0]==="?"){const ee=C($[":@"],L),W=oe==="?xml"?"":F;let ve=$[oe][0][L.textNodeName];ve=ve.length!==0?" "+ve:"",ce+=W+`<${oe}${ve}${ee}?>`,K=!0;continue}let V=F;V!==""&&(V+=L.indentBy);const E=C($[":@"],L),j=F+`<${oe}${E}`,D=u($[oe],L,q,V);L.unpairedTags.indexOf(oe)!==-1?L.suppressUnpairedNode?ce+=j+">":ce+=j+"/>":(!D||D.length===0)&&L.suppressEmptyNode?ce+=j+"/>":D&&D.endsWith(">")?ce+=j+`>${D}${F}</${oe}>`:(ce+=j+">",D&&F!==""&&(D.includes("/>")||D.includes("</"))?ce+=F+L.indentBy+D+F:ce+=D,ce+=`</${oe}>`),K=!0}return ce}function b(T){const L=Object.keys(T);for(let U=0;U<L.length;U++){const F=L[U];if(T.hasOwnProperty(F)&&F!==":@")return F}}function C(T,L){let U="";if(T&&!L.ignoreAttributes)for(let F in T){if(!T.hasOwnProperty(F))continue;let ce=L.attributeValueProcessor(F,T[F]);ce=w(ce,L),ce===!0&&L.suppressBooleanAttributes?U+=` ${F.substr(L.attributeNamePrefix.length)}`:U+=` ${F.substr(L.attributeNamePrefix.length)}="${ce}"`}return U}function A(T,L){T=T.substr(0,T.length-L.textNodeName.length-1);let U=T.substr(T.lastIndexOf(".")+1);for(let F in L.stopNodes)if(L.stopNodes[F]===T||L.stopNodes[F]==="*."+U)return!0;return!1}function w(T,L){if(T&&T.length>0&&L.processEntities)for(let U=0;U<L.entities.length;U++){const F=L.entities[U];T=T.replace(F.regex,F.val)}return T}a.exports=d},{}],8:[function(i,a,c){const p=i("../util");function d(U,F){const ce={};if(U[F+3]==="O"&&U[F+4]==="C"&&U[F+5]==="T"&&U[F+6]==="Y"&&U[F+7]==="P"&&U[F+8]==="E"){F=F+9;let K=1,Z=!1,$=!1,oe="";for(;F<U.length;F++)if(U[F]==="<"&&!$){if(Z&&C(U,F))F+=7,[entityName,val,F]=u(U,F+1),val.indexOf("&")===-1&&(ce[L(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(Z&&A(U,F))F+=8;else if(Z&&w(U,F))F+=8;else if(Z&&T(U,F))F+=9;else if(b)$=!0;else throw new Error("Invalid DOCTYPE");K++,oe=""}else if(U[F]===">"){if($?U[F-1]==="-"&&U[F-2]==="-"&&($=!1,K--):K--,K===0)break}else U[F]==="["?Z=!0:oe+=U[F];if(K!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:ce,i:F}}function u(U,F){let ce="";for(;F<U.length&&U[F]!=="'"&&U[F]!=='"';F++)ce+=U[F];if(ce=ce.trim(),ce.indexOf(" ")!==-1)throw new Error("External entites are not supported");const K=U[F++];let Z="";for(;F<U.length&&U[F]!==K;F++)Z+=U[F];return[ce,Z,F]}function b(U,F){return U[F+1]==="!"&&U[F+2]==="-"&&U[F+3]==="-"}function C(U,F){return U[F+1]==="!"&&U[F+2]==="E"&&U[F+3]==="N"&&U[F+4]==="T"&&U[F+5]==="I"&&U[F+6]==="T"&&U[F+7]==="Y"}function A(U,F){return U[F+1]==="!"&&U[F+2]==="E"&&U[F+3]==="L"&&U[F+4]==="E"&&U[F+5]==="M"&&U[F+6]==="E"&&U[F+7]==="N"&&U[F+8]==="T"}function w(U,F){return U[F+1]==="!"&&U[F+2]==="A"&&U[F+3]==="T"&&U[F+4]==="T"&&U[F+5]==="L"&&U[F+6]==="I"&&U[F+7]==="S"&&U[F+8]==="T"}function T(U,F){return U[F+1]==="!"&&U[F+2]==="N"&&U[F+3]==="O"&&U[F+4]==="T"&&U[F+5]==="A"&&U[F+6]==="T"&&U[F+7]==="I"&&U[F+8]==="O"&&U[F+9]==="N"}function L(U){if(p.isName(U))return U;throw new Error(`Invalid entity name ${U}`)}a.exports=d},{"../util":4}],9:[function(i,a,c){const p={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(u,b){return b},attributeValueProcessor:function(u,b){return b},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(u,b,C){return u}},d=function(u){return Object.assign({},p,u)};c.buildOptions=d,c.defaultOptions=p},{}],10:[function(i,a,c){const p=i("../util"),d=i("./xmlNode"),u=i("./DocTypeReader"),b=i("strnum");class C{constructor(ee){this.options=ee,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=A,this.parseXml=F,this.parseTextData=w,this.resolveNameSpace=T,this.buildAttributesMap=U,this.isItStopNode=$,this.replaceEntitiesValue=K,this.readStopNodeData=E,this.saveTextToParentTag=Z,this.addChild=ce}}function A(D){const ee=Object.keys(D);for(let W=0;W<ee.length;W++){const ve=ee[W];this.lastEntities[ve]={regex:new RegExp("&"+ve+";","g"),val:D[ve]}}}function w(D,ee,W,ve,_e,de,ie){if(D!==void 0&&(this.options.trimValues&&!ve&&(D=D.trim()),D.length>0)){ie||(D=this.replaceEntitiesValue(D));const le=this.options.tagValueProcessor(ee,D,W,_e,de);return le==null?D:typeof le!=typeof D||le!==D?le:this.options.trimValues?j(D,this.options.parseTagValue,this.options.numberParseOptions):D.trim()===D?j(D,this.options.parseTagValue,this.options.numberParseOptions):D}}function T(D){if(this.options.removeNSPrefix){const ee=D.split(":"),W=D.charAt(0)==="/"?"/":"";if(ee[0]==="xmlns")return"";ee.length===2&&(D=W+ee[1])}return D}const L=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function U(D,ee,W){if(!this.options.ignoreAttributes&&typeof D=="string"){const ve=p.getAllMatches(D,L),_e=ve.length,de={};for(let ie=0;ie<_e;ie++){const le=this.resolveNameSpace(ve[ie][1]);let J=ve[ie][4],te=this.options.attributeNamePrefix+le;if(le.length)if(this.options.transformAttributeName&&(te=this.options.transformAttributeName(te)),te==="__proto__"&&(te="#__proto__"),J!==void 0){this.options.trimValues&&(J=J.trim()),J=this.replaceEntitiesValue(J);const he=this.options.attributeValueProcessor(le,J,ee);he==null?de[te]=J:typeof he!=typeof J||he!==J?de[te]=he:de[te]=j(J,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(de[te]=!0)}if(!Object.keys(de).length)return;if(this.options.attributesGroupName){const ie={};return ie[this.options.attributesGroupName]=de,ie}return de}}const F=function(D){D=D.replace(/\r\n?/g,`
`);const ee=new d("!xml");let W=ee,ve="",_e="";for(let de=0;de<D.length;de++)if(D[de]==="<")if(D[de+1]==="/"){const le=q(D,">",de,"Closing Tag is not closed.");let J=D.substring(de+2,le).trim();if(this.options.removeNSPrefix){const be=J.indexOf(":");be!==-1&&(J=J.substr(be+1))}this.options.transformTagName&&(J=this.options.transformTagName(J)),W&&(ve=this.saveTextToParentTag(ve,W,_e));const te=_e.substring(_e.lastIndexOf(".")+1);if(J&&this.options.unpairedTags.indexOf(J)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${J}>`);let he=0;te&&this.options.unpairedTags.indexOf(te)!==-1?(he=_e.lastIndexOf(".",_e.lastIndexOf(".")-1),this.tagsNodeStack.pop()):he=_e.lastIndexOf("."),_e=_e.substring(0,he),W=this.tagsNodeStack.pop(),ve="",de=le}else if(D[de+1]==="?"){let le=V(D,de,!1,"?>");if(!le)throw new Error("Pi Tag is not closed.");if(ve=this.saveTextToParentTag(ve,W,_e),!(this.options.ignoreDeclaration&&le.tagName==="?xml"||this.options.ignorePiTags)){const J=new d(le.tagName);J.add(this.options.textNodeName,""),le.tagName!==le.tagExp&&le.attrExpPresent&&(J[":@"]=this.buildAttributesMap(le.tagExp,_e,le.tagName)),this.addChild(W,J,_e)}de=le.closeIndex+1}else if(D.substr(de+1,3)==="!--"){const le=q(D,"-->",de+4,"Comment is not closed.");if(this.options.commentPropName){const J=D.substring(de+4,le-2);ve=this.saveTextToParentTag(ve,W,_e),W.add(this.options.commentPropName,[{[this.options.textNodeName]:J}])}de=le}else if(D.substr(de+1,2)==="!D"){const le=u(D,de);this.docTypeEntities=le.entities,de=le.i}else if(D.substr(de+1,2)==="!["){const le=q(D,"]]>",de,"CDATA is not closed.")-2,J=D.substring(de+9,le);if(ve=this.saveTextToParentTag(ve,W,_e),this.options.cdataPropName)W.add(this.options.cdataPropName,[{[this.options.textNodeName]:J}]);else{let te=this.parseTextData(J,W.tagname,_e,!0,!1,!0);te==null&&(te=""),W.add(this.options.textNodeName,te)}de=le+2}else{let le=V(D,de,this.options.removeNSPrefix),J=le.tagName;const te=le.rawTagName;let he=le.tagExp,be=le.attrExpPresent,Ee=le.closeIndex;this.options.transformTagName&&(J=this.options.transformTagName(J)),W&&ve&&W.tagname!=="!xml"&&(ve=this.saveTextToParentTag(ve,W,_e,!1));const De=W;if(De&&this.options.unpairedTags.indexOf(De.tagname)!==-1&&(W=this.tagsNodeStack.pop(),_e=_e.substring(0,_e.lastIndexOf("."))),J!==ee.tagname&&(_e+=_e?"."+J:J),this.isItStopNode(this.options.stopNodes,_e,J)){let Ae="";if(he.length>0&&he.lastIndexOf("/")===he.length-1)de=le.closeIndex;else if(this.options.unpairedTags.indexOf(J)!==-1)de=le.closeIndex;else{const We=this.readStopNodeData(D,te,Ee+1);if(!We)throw new Error(`Unexpected end of ${te}`);de=We.i,Ae=We.tagContent}const Oe=new d(J);J!==he&&be&&(Oe[":@"]=this.buildAttributesMap(he,_e,J)),Ae&&(Ae=this.parseTextData(Ae,J,_e,!0,be,!0,!0)),_e=_e.substr(0,_e.lastIndexOf(".")),Oe.add(this.options.textNodeName,Ae),this.addChild(W,Oe,_e)}else{if(he.length>0&&he.lastIndexOf("/")===he.length-1){J[J.length-1]==="/"?(J=J.substr(0,J.length-1),_e=_e.substr(0,_e.length-1),he=J):he=he.substr(0,he.length-1),this.options.transformTagName&&(J=this.options.transformTagName(J));const Ae=new d(J);J!==he&&be&&(Ae[":@"]=this.buildAttributesMap(he,_e,J)),this.addChild(W,Ae,_e),_e=_e.substr(0,_e.lastIndexOf("."))}else{const Ae=new d(J);this.tagsNodeStack.push(W),J!==he&&be&&(Ae[":@"]=this.buildAttributesMap(he,_e,J)),this.addChild(W,Ae,_e),W=Ae}ve="",de=Ee}}else ve+=D[de];return ee.child};function ce(D,ee,W){const ve=this.options.updateTag(ee.tagname,W,ee[":@"]);ve===!1||(typeof ve=="string"&&(ee.tagname=ve),D.addChild(ee))}const K=function(D){if(this.options.processEntities){for(let ee in this.docTypeEntities){const W=this.docTypeEntities[ee];D=D.replace(W.regx,W.val)}for(let ee in this.lastEntities){const W=this.lastEntities[ee];D=D.replace(W.regex,W.val)}if(this.options.htmlEntities)for(let ee in this.htmlEntities){const W=this.htmlEntities[ee];D=D.replace(W.regex,W.val)}D=D.replace(this.ampEntity.regex,this.ampEntity.val)}return D};function Z(D,ee,W,ve){return D&&(ve===void 0&&(ve=Object.keys(ee.child).length===0),D=this.parseTextData(D,ee.tagname,W,!1,ee[":@"]?Object.keys(ee[":@"]).length!==0:!1,ve),D!==void 0&&D!==""&&ee.add(this.options.textNodeName,D),D=""),D}function $(D,ee,W){const ve="*."+W;for(const _e in D){const de=D[_e];if(ve===de||ee===de)return!0}return!1}function oe(D,ee,W=">"){let ve,_e="";for(let de=ee;de<D.length;de++){let ie=D[de];if(ve)ie===ve&&(ve="");else if(ie==='"'||ie==="'")ve=ie;else if(ie===W[0])if(W[1]){if(D[de+1]===W[1])return{data:_e,index:de}}else return{data:_e,index:de};else ie==="	"&&(ie=" ");_e+=ie}}function q(D,ee,W,ve){const _e=D.indexOf(ee,W);if(_e===-1)throw new Error(ve);return _e+ee.length-1}function V(D,ee,W,ve=">"){const _e=oe(D,ee+1,ve);if(!_e)return;let de=_e.data;const ie=_e.index,le=de.search(/\s/);let J=de,te=!0;le!==-1&&(J=de.substring(0,le),de=de.substring(le+1).trimStart());const he=J;if(W){const be=J.indexOf(":");be!==-1&&(J=J.substr(be+1),te=J!==_e.data.substr(be+1))}return{tagName:J,tagExp:de,closeIndex:ie,attrExpPresent:te,rawTagName:he}}function E(D,ee,W){const ve=W;let _e=1;for(;W<D.length;W++)if(D[W]==="<")if(D[W+1]==="/"){const de=q(D,">",W,`${ee} is not closed`);if(D.substring(W+2,de).trim()===ee&&(_e--,_e===0))return{tagContent:D.substring(ve,W),i:de};W=de}else if(D[W+1]==="?")W=q(D,"?>",W+1,"StopNode is not closed.");else if(D.substr(W+1,3)==="!--")W=q(D,"-->",W+3,"StopNode is not closed.");else if(D.substr(W+1,2)==="![")W=q(D,"]]>",W,"StopNode is not closed.")-2;else{const de=V(D,W,">");de&&((de&&de.tagName)===ee&&de.tagExp[de.tagExp.length-1]!=="/"&&_e++,W=de.closeIndex)}}function j(D,ee,W){if(ee&&typeof D=="string"){const ve=D.trim();return ve==="true"?!0:ve==="false"?!1:b(D,W)}else return p.isExist(D)?D:""}a.exports=C},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:p}=i("./OptionsBuilder"),d=i("./OrderedObjParser"),{prettify:u}=i("./node2json"),b=i("../validator");class C{constructor(w){this.externalEntities={},this.options=p(w)}parse(w,T){if(typeof w!="string")if(w.toString)w=w.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(T){T===!0&&(T={});const F=b.validate(w,T);if(F!==!0)throw Error(`${F.err.msg}:${F.err.line}:${F.err.col}`)}const L=new d(this.options);L.addExternalEntities(this.externalEntities);const U=L.parseXml(w);return this.options.preserveOrder||U===void 0?U:u(U,this.options)}addEntity(w,T){if(T.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(w.indexOf("&")!==-1||w.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(T==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[w]=T}}a.exports=C},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function p(A,w){return d(A,w)}function d(A,w,T){let L;const U={};for(let F=0;F<A.length;F++){const ce=A[F],K=u(ce);let Z="";if(T===void 0?Z=K:Z=T+"."+K,K===w.textNodeName)L===void 0?L=ce[K]:L+=""+ce[K];else{if(K===void 0)continue;if(ce[K]){let $=d(ce[K],w,Z);const oe=C($,w);ce[":@"]?b($,ce[":@"],Z,w):Object.keys($).length===1&&$[w.textNodeName]!==void 0&&!w.alwaysCreateTextNode?$=$[w.textNodeName]:Object.keys($).length===0&&(w.alwaysCreateTextNode?$[w.textNodeName]="":$=""),U[K]!==void 0&&U.hasOwnProperty(K)?(Array.isArray(U[K])||(U[K]=[U[K]]),U[K].push($)):w.isArray(K,Z,oe)?U[K]=[$]:U[K]=$}}}return typeof L=="string"?L.length>0&&(U[w.textNodeName]=L):L!==void 0&&(U[w.textNodeName]=L),U}function u(A){const w=Object.keys(A);for(let T=0;T<w.length;T++){const L=w[T];if(L!==":@")return L}}function b(A,w,T,L){if(w){const U=Object.keys(w),F=U.length;for(let ce=0;ce<F;ce++){const K=U[ce];L.isArray(K,T+"."+K,!0,!0)?A[K]=[w[K]]:A[K]=w[K]}}}function C(A,w){const{textNodeName:T}=w,L=Object.keys(A).length;return!!(L===0||L===1&&(A[T]||typeof A[T]=="boolean"||A[T]===0))}c.prettify=p},{}],13:[function(i,a,c){class p{constructor(u){this.tagname=u,this.child=[],this[":@"]={}}add(u,b){u==="__proto__"&&(u="#__proto__"),this.child.push({[u]:b})}addChild(u){u.tagname==="__proto__"&&(u.tagname="#__proto__"),u[":@"]&&Object.keys(u[":@"]).length>0?this.child.push({[u.tagname]:u.child,":@":u[":@"]}):this.child.push({[u.tagname]:u.child})}}a.exports=p},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(p,d,u,b,C){var A,w,T=C*8-b-1,L=(1<<T)-1,U=L>>1,F=-7,ce=u?C-1:0,K=u?-1:1,Z=p[d+ce];for(ce+=K,A=Z&(1<<-F)-1,Z>>=-F,F+=T;F>0;A=A*256+p[d+ce],ce+=K,F-=8);for(w=A&(1<<-F)-1,A>>=-F,F+=b;F>0;w=w*256+p[d+ce],ce+=K,F-=8);if(A===0)A=1-U;else{if(A===L)return w?NaN:(Z?-1:1)*(1/0);w=w+Math.pow(2,b),A=A-U}return(Z?-1:1)*w*Math.pow(2,A-b)},c.write=function(p,d,u,b,C,A){var w,T,L,U=A*8-C-1,F=(1<<U)-1,ce=F>>1,K=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=b?0:A-1,$=b?1:-1,oe=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(T=isNaN(d)?1:0,w=F):(w=Math.floor(Math.log(d)/Math.LN2),d*(L=Math.pow(2,-w))<1&&(w--,L*=2),w+ce>=1?d+=K/L:d+=K*Math.pow(2,1-ce),d*L>=2&&(w++,L/=2),w+ce>=F?(T=0,w=F):w+ce>=1?(T=(d*L-1)*Math.pow(2,C),w=w+ce):(T=d*Math.pow(2,ce-1)*Math.pow(2,C),w=0));C>=8;p[u+Z]=T&255,Z+=$,T/=256,C-=8);for(w=w<<C|T,U+=C;U>0;p[u+Z]=w&255,Z+=$,w/=256,U-=8);p[u+Z-$]|=oe*128}},{}],15:[function(i,a,c){const p=/^[-+]?0x[a-fA-F0-9]+$/,d=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const u={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function b(A,w={}){if(w=Object.assign({},u,w),!A||typeof A!="string")return A;let T=A.trim();if(w.skipLike!==void 0&&w.skipLike.test(T))return A;if(w.hex&&p.test(T))return Number.parseInt(T,16);{const L=d.exec(T);if(L){const U=L[1],F=L[2];let ce=C(L[3]);const K=L[4]||L[6];if(!w.leadingZeros&&F.length>0&&U&&T[2]!==".")return A;if(!w.leadingZeros&&F.length>0&&!U&&T[1]!==".")return A;{const Z=Number(T),$=""+Z;return $.search(/[eE]/)!==-1||K?w.eNotation?Z:A:T.indexOf(".")!==-1?$==="0"&&ce===""||$===ce||U&&$==="-"+ce?Z:A:F?ce===$||U+ce===$?Z:A:T===$||T===U+$?Z:A}}else return A}}function C(A){return A&&A.indexOf(".")!==-1&&(A=A.replace(/0+$/,""),A==="."?A="0":A[0]==="."?A="0"+A:A[A.length-1]==="."&&(A=A.substr(0,A.length-1))),A}a.exports=b},{}],16:[function(i,a,c){(function(p){(function(){var d=this&&this.__awaiter||function(T,L,U,F){function ce(K){return K instanceof U?K:new U(function(Z){Z(K)})}return new(U||(U=Promise))(function(K,Z){function $(V){try{q(F.next(V))}catch(E){Z(E)}}function oe(V){try{q(F.throw(V))}catch(E){Z(E)}}function q(V){V.done?K(V.value):ce(V.value).then($,oe)}q((F=F.apply(T,L||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const u=i("../auth"),b=i("../config"),C=i("./_xml"),A=T=>typeof btoa>"u"?p.from(T,"binary").toString("base64"):btoa(T);function w(T,L,U){return d(this,void 0,void 0,function*(){const{apiUrl:F,authHeader:ce,basicAuth:K,userAgent:Z}=(0,b.getConfig)(),$=K&&`Basic ${A(`${K.username}:${K.password}`)}`,oe=(0,u.getAuthToken)()&&`Bearer ${(0,u.getAuthToken)()}`;let q=new URLSearchParams(L).toString();q&&(q=`?${q}`);const V=yield fetch(`${F}/api${T}${q}`,Object.assign(Object.assign({},U),{headers:Object.assign({Authorization:ce||$||oe||"","User-Agent":Z},U==null?void 0:U.headers)})),E=V.headers.get("Content-Type");if(E!=null&&E.startsWith("application/xml")){const j=yield V.text();return yield C.xmlParser.parse(j)}if(E!=null&&E.startsWith("application/json"))return V.json();if(V.ok)return yield V.text();throw new Error(`OSM API: ${yield V.text()}`)})}c.osmFetch=w}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const p=i("fast-xml-parser");c.xmlParser=new p.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:d=>d!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const p=i("fast-xml-parser"),d=new p.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function u(A){return d.build({osm:{changeset:{tag:Object.entries(A).map(([w,T])=>({$k:w,$v:T}))}}})}c.createChangesetMetaXml=u;const b=(A,w,T)=>w.reduce((L,U)=>{const F={$id:U.id,$version:T?0:U.version,$changeset:A,tag:Object.entries(U.tags||{}).map(([ce,K])=>({$k:ce,$v:K}))};switch(U.type){case"node":{const ce=Object.assign(Object.assign({},F),{$lat:U.lat,$lon:U.lon});return Object.assign(Object.assign({},L),{node:[...L.node,ce]})}case"way":{if(!U.nodes)throw new Error("Way has no nodes");const ce=Object.assign(Object.assign({},F),{nd:U.nodes.map(K=>({$ref:K}))});return Object.assign(Object.assign({},L),{way:[...L.way,ce]})}case"relation":{if(!U.members)throw new Error("Relation has no members");const ce=Object.assign(Object.assign({},F),{member:U.members.map(K=>({$type:K.type,$ref:K.ref,$role:K.role}))});return Object.assign(Object.assign({},L),{relation:[...L.relation,ce]})}default:return L}},{node:[],way:[],relation:[]});function C(A,w,T){return d.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},T),{create:[b(A,w.create,!0)],modify:[b(A,w.modify)],delete:[Object.assign({"$if-unused":!0},b(A,w.delete))]})})}c.createOsmChangeXml=C},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const p=i("../_xml");function d(A){return{changeset:+A.$.changeset,id:+A.$.id,timestamp:A.$.timestamp,uid:+A.$.uid,user:A.$.user,version:+A.$.version,tags:A.tag?Object.fromEntries(A.tag.map(w=>[w.$.k,w.$.v])):void 0}}const u=A=>{const w=[];if(A.node){const T=A.node.map(L=>Object.assign(Object.assign({type:"node"},d(L)),{lat:+L.$.lat,lon:+L.$.lon}));w.push(...T)}if(A.way){const T=A.way.map(L=>{var U;return Object.assign(Object.assign({type:"way"},d(L)),{nodes:((U=L.nd)===null||U===void 0?void 0:U.map(F=>+F.$.ref))||[]})});w.push(...T)}if(A.relation){const T=A.relation.map(L=>{var U;return Object.assign(Object.assign({type:"relation"},d(L)),{members:((U=L.member)===null||U===void 0?void 0:U.map(F=>({ref:+F.$.ref,role:F.$.role,type:F.$.type})))||[]})});w.push(...T)}return w};function b(A){var w,T,L;return{create:((w=A.osmChange[0].create)===null||w===void 0?void 0:w.flatMap(u))||[],modify:((T=A.osmChange[0].modify)===null||T===void 0?void 0:T.flatMap(u))||[],delete:((L=A.osmChange[0].delete)===null||L===void 0?void 0:L.flatMap(u))||[]}}c.parseOsmChangeJson=b;function C(A){const w=p.xmlParser.parse(A);return b(w)}c.parseOsmChangeXml=C},{"../_xml":17}],20:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,A,w){function T(L){return L instanceof A?L:new A(function(U){U(L)})}return new(A||(A=Promise))(function(L,U){function F(Z){try{K(w.next(Z))}catch($){U($)}}function ce(Z){try{K(w.throw(Z))}catch($){U($)}}function K(Z){Z.done?L(Z.value):T(Z.value).then(F,ce)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const d=i("../_osmFetch");function u(b,C){return p(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/changeset/${b}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(C)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=u},{"../_osmFetch":16}],21:[function(i,a,c){var p=this&&this.__awaiter||function(C,A,w,T){function L(U){return U instanceof w?U:new w(function(F){F(U)})}return new(w||(w=Promise))(function(U,F){function ce($){try{Z(T.next($))}catch(oe){F(oe)}}function K($){try{Z(T.throw($))}catch(oe){F(oe)}}function Z($){$.done?U($.value):L($.value).then(ce,K)}Z((T=T.apply(C,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const d=i("../_osmFetch"),u=i("./_parseOsmChangeXml");function b(C){return p(this,void 0,void 0,function*(){const A=yield(0,d.osmFetch)(`/0.6/changeset/${C}/download`);return(0,u.parseOsmChangeJson)(A)})}c.getChangesetDiff=b},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var p=this&&this.__awaiter||function(w,T,L,U){function F(ce){return ce instanceof L?ce:new L(function(K){K(ce)})}return new(L||(L=Promise))(function(ce,K){function Z(q){try{oe(U.next(q))}catch(V){K(V)}}function $(q){try{oe(U.throw(q))}catch(V){K(V)}}function oe(q){q.done?ce(q.value):F(q.value).then(Z,$)}oe((U=U.apply(w,T||[])).next())})},d=this&&this.__rest||function(w,T){var L={};for(var U in w)Object.prototype.hasOwnProperty.call(w,U)&&T.indexOf(U)<0&&(L[U]=w[U]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var F=0,U=Object.getOwnPropertySymbols(w);F<U.length;F++)T.indexOf(U[F])<0&&Object.prototype.propertyIsEnumerable.call(w,U[F])&&(L[U[F]]=w[U[F]]);return L};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const u=i("../_osmFetch"),b=w=>{var T;return{id:+w.$.id,created_at:new Date(w.$.created_at),closed_at:new Date(w.$.closed_at),open:w.$.open==="true",comments_count:+w.$.comments_count,changes_count:+w.$.changes_count,min_lat:+w.$.min_lat,min_lon:+w.$.min_lon,max_lat:+w.$.max_lat,max_lon:+w.$.max_lon,uid:+w.$.uid,user:w.$.user,tags:Object.fromEntries(w.tag.map(L=>[L.$.k,L.$.v])),discussion:(T=w.discussion)===null||T===void 0?void 0:T[0].comment.map(L=>({date:new Date(L.$.date),user:L.$.user,uid:L.$.uid,text:L.text[0]}))}};function C(w){var T;return p(this,void 0,void 0,function*(){const{only:L}=w,U=d(w,["only"]);return((T=(yield(0,u.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},L&&{[L]:!0}),U))).osm[0].changeset)===null||T===void 0?void 0:T.map(b))||[]})}c.listChangesets=C;function A(w,T=!0){return p(this,void 0,void 0,function*(){return(yield(0,u.osmFetch)(`/0.6/changeset/${w}`,{include_discussion:T})).osm[0].changeset.map(b)[0]})}c.getChangeset=A},{"../_osmFetch":16}],23:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(C,A,w,T){T===void 0&&(T=w);var L=Object.getOwnPropertyDescriptor(A,w);(!L||("get"in L?!A.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return A[w]}}),Object.defineProperty(C,T,L)}:function(C,A,w,T){T===void 0&&(T=w),C[T]=A[w]}),d=this&&this.__exportStar||function(C,A){for(var w in C)w!=="default"&&!Object.prototype.hasOwnProperty.call(A,w)&&p(A,C,w)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,d(i("./createChangesetComment"),c),d(i("./getChangesetDiff"),c),d(i("./getChangesets"),c),d(i("./uploadChangeset"),c);var u=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return u.parseOsmChangeXml}});var b=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return b.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var p=this&&this.__awaiter||function(C,A,w,T){function L(U){return U instanceof w?U:new w(function(F){F(U)})}return new(w||(w=Promise))(function(U,F){function ce($){try{Z(T.next($))}catch(oe){F(oe)}}function K($){try{Z(T.throw($))}catch(oe){F(oe)}}function Z($){$.done?U($.value):L($.value).then(ce,K)}Z((T=T.apply(C,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const d=i("../_osmFetch"),u=i("./_createOsmChangeXml");function b(C,A){return p(this,void 0,void 0,function*(){const w=(0,u.createChangesetMetaXml)(C),T=+(yield(0,d.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:w,headers:{"content-type":"application/xml; charset=utf-8"}})),L=(0,u.createOsmChangeXml)(T,A);return yield(0,d.osmFetch)(`/0.6/changeset/${T}/upload`,void 0,{method:"POST",body:L,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,d.osmFetch)(`/0.6/changeset/${T}/close`,void 0,{method:"PUT"}),+T})}c.uploadChangeset=b},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,A,w){function T(L){return L instanceof A?L:new A(function(U){U(L)})}return new(A||(A=Promise))(function(L,U){function F(Z){try{K(w.next(Z))}catch($){U($)}}function ce(Z){try{K(w.throw(Z))}catch($){U($)}}function K(Z){Z.done?L(Z.value):T(Z.value).then(F,ce)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const d=i("./_osmFetch");function u(){var b;return p(this,void 0,void 0,function*(){const C=yield(0,d.osmFetch)("/capabilities");return{limits:{maxArea:+C.osm[0].api[0].area[0].$.maximum,maxNoteArea:+C.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+C.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+C.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+C.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+C.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((b=C.osm[0].policy[0].imagery[0].blacklist)===null||b===void 0?void 0:b.map(w=>w.$.regex))||[]}}})}c.getCapabilities=u},{"./_osmFetch":16}],26:[function(i,a,c){var p=this&&this.__awaiter||function(L,U,F,ce){function K(Z){return Z instanceof F?Z:new F(function($){$(Z)})}return new(F||(F=Promise))(function(Z,$){function oe(E){try{V(ce.next(E))}catch(j){$(j)}}function q(E){try{V(ce.throw(E))}catch(j){$(j)}}function V(E){E.done?Z(E.value):K(E.value).then(oe,q)}V((ce=ce.apply(L,U||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const d=i("./_osmFetch");function u(L,U,F){return p(this,void 0,void 0,function*(){const ce=F&&L!=="node"?"/full":"";return(yield(0,d.osmFetch)(`/0.6/${L}/${U}${ce}.json`)).elements})}c.getFeature=u;function b(L,U){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${L}s.json?${L}s=${U.join(",")}`)).elements})}c.getFeatures=b;function C(L,U,F){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${L}/${U}/${F}.json`)).elements[0]})}c.getFeatureAtVersion=C;function A(L,U){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${L}/${U}/history.json`)).elements})}c.getFeatureHistory=A;function w(L){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/node/${L}/ways.json`)).elements})}c.getWaysForNode=w;function T(L,U){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${L}/${U}/relations.json`)).elements})}c.getRelationsForElement=T},{"./_osmFetch":16}],27:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,A,w){function T(L){return L instanceof A?L:new A(function(U){U(L)})}return new(A||(A=Promise))(function(L,U){function F(Z){try{K(w.next(Z))}catch($){U($)}}function ce(Z){try{K(w.throw(Z))}catch($){U($)}}function K(Z){Z.done?L(Z.value):T(Z.value).then(F,ce)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const d=i("./_osmFetch");function u(b){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)("/0.6/map.json",{bbox:b})).elements})}c.getMapData=u},{"./_osmFetch":16}],28:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,A,w){function T(L){return L instanceof A?L:new A(function(U){U(L)})}return new(A||(A=Promise))(function(L,U){function F(Z){try{K(w.next(Z))}catch($){U($)}}function ce(Z){try{K(w.throw(Z))}catch($){U($)}}function K(Z){Z.done?L(Z.value):T(Z.value).then(F,ce)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const d=i("./changesets");function u(b){return p(this,void 0,void 0,function*(){const C=yield(0,d.listChangesets)({display_name:b});if(!C.length)throw new Error("Could not get uid because the user has never edited the map");return C[0].uid})}c.getUIdFromDisplayName=u},{"./changesets":23}],29:[function(i,a,c){var p=this&&this.__awaiter||function(C,A,w,T){function L(U){return U instanceof w?U:new w(function(F){F(U)})}return new(w||(w=Promise))(function(U,F){function ce($){try{Z(T.next($))}catch(oe){F(oe)}}function K($){try{Z(T.throw($))}catch(oe){F(oe)}}function Z($){$.done?U($.value):L($.value).then(ce,K)}Z((T=T.apply(C,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const d=i("./_osmFetch");function u(C){return p(this,void 0,void 0,function*(){const A=yield(0,d.osmFetch)(`/0.6/user/${C==="me"?"details":C}.json`);return Object.assign(Object.assign({},A.user),{account_created:new Date(A.user.account_created)})})}c.getUser=u;function b(C){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)("/0.6/users",{users:C})).users.map(w=>Object.assign(Object.assign({},w),{account_created:new Date(w.account_created)}))})}c.getUsers=b},{"./_osmFetch":16}],30:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,A){A===void 0&&(A=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,A,w)}:function(u,b,C,A){A===void 0&&(A=C),u[A]=b[C]}),d=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./changesets"),c),d(i("./notes"),c),d(i("./getCapabilities"),c),d(i("./getFeature"),c),d(i("./getMapData"),c),d(i("./getUIdFromDisplayName"),c),d(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var p=this&&this.__awaiter||function(T,L,U,F){function ce(K){return K instanceof U?K:new U(function(Z){Z(K)})}return new(U||(U=Promise))(function(K,Z){function $(V){try{q(F.next(V))}catch(E){Z(E)}}function oe(V){try{q(F.throw(V))}catch(E){Z(E)}}function q(V){V.done?K(V.value):ce(V.value).then($,oe)}q((F=F.apply(T,L||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const d=i("../_osmFetch"),u=T=>{const[L,U]=T.geometry.coordinates;return Object.assign(Object.assign({},T.properties),{location:{lat:U,lng:L}})};function b(T,L){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/notes${L?"/search":""}.json`,T)).features.map(u)})}function C(T){return b(T,!0)}c.getNotesForQuery=C;function A(T){return b({bbox:T},!1)}c.getNotesForArea=A;function w(T){return p(this,void 0,void 0,function*(){const L=yield(0,d.osmFetch)(`/0.6/notes/${T}.json`);return u(L)})}c.getNote=w},{"../_osmFetch":16}],32:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,A){A===void 0&&(A=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,A,w)}:function(u,b,C,A){A===void 0&&(A=C),u[A]=b[C]}),d=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./getNotes"),c),d(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var p=this&&this.__awaiter||function(A,w,T,L){function U(F){return F instanceof T?F:new T(function(ce){ce(F)})}return new(T||(T=Promise))(function(F,ce){function K(oe){try{$(L.next(oe))}catch(q){ce(q)}}function Z(oe){try{$(L.throw(oe))}catch(q){ce(q)}}function $(oe){oe.done?F(oe.value):U(oe.value).then(K,Z)}$((L=L.apply(A,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const d=i("../_osmFetch");function u(A,w,T){return p(this,void 0,void 0,function*(){yield(0,d.osmFetch)("/0.6/notes",{lat:A,lon:w,text:T})})}c.createNote=u;function b(A,w){return p(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/notes/${A}/comment`,{text:w})})}c.commentOnNote=b;function C(A,w){return p(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/notes/${A}/reopen`,{text:w})})}c.reopenNote=C},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function p(d){let u=!1;return new Promise((b,C)=>{const[A,w]=[600,550],T=Object.entries({width:A,height:w,left:window.screen.width/2-A/2,top:window.screen.height/2-w/2}).map(([F,ce])=>`${F}=${ce}`).join(","),L=window.open("about:blank","oauth_window",T);if(!L)throw new Error("Popup was blocked");L.location=d,window.authComplete=F=>{b(F),u=!0};const U=setInterval(()=>{L.closed&&(u||C(new Error("Cancelled")),clearInterval(U))},500)})}c.createPopup=p},{}],35:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,A,w){function T(L){return L instanceof A?L:new A(function(U){U(L)})}return new(A||(A=Promise))(function(L,U){function F(Z){try{K(w.next(Z))}catch($){U($)}}function ce(Z){try{K(w.throw(Z))}catch($){U($)}}function K(Z){Z.done?L(Z.value):T(Z.value).then(F,ce)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const d=i("./helpers");function u(b,{options:C,pkceVerifier:A,state:w}){return p(this,void 0,void 0,function*(){const T=new URL(b).searchParams,L=T.get("error_description"),U=T.get("code"),F=T.get("state");if(L)throw new Error(L);if(!U)throw new Error("No code in OAuth response");if(!A||!w)throw new Error("No login in progress");if(w!==F)throw new Error("State Mismatch");const ce={grant_type:"authorization_code",code:U,redirect_uri:C.redirectUrl,client_id:C.clientId,code_verifier:A},K=`${(0,d.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(ce).toString()}`,$=yield(yield fetch(K,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in $)throw new Error($.error_description);const oe={issuedAt:new Date($.created_at*1e3).toISOString(),accessToken:$.access_token,scopes:$.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(oe)),delete window.authComplete,oe})}c.exchangeCode=u},{"./helpers":36}],36:[function(i,a,c){var p=this&&this.__awaiter||function(A,w,T,L){function U(F){return F instanceof T?F:new T(function(ce){ce(F)})}return new(T||(T=Promise))(function(F,ce){function K(oe){try{$(L.next(oe))}catch(q){ce(q)}}function Z(oe){try{$(L.throw(oe))}catch(q){ce(q)}}function $(oe){oe.done?F(oe.value):U(oe.value).then(K,Z)}$((L=L.apply(A,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const d=i("../config");function u(A){return p(this,void 0,void 0,function*(){const w=new TextEncoder().encode(A),T=yield window.crypto.subtle.digest("SHA-256",w);return btoa(String.fromCharCode(...new Uint8Array(T))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}c.sha256=u;function b(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(A=>`0${A.toString(16)}`.slice(-2)).join("")}c.getRandomString=b;function C(){let A=(0,d.getConfig)().apiUrl;return A==="https://api.openstreetmap.org"&&(A="https://www.openstreetmap.org"),A}c.getOAuthBaseUrl=C},{"../config":39}],37:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,A){A===void 0&&(A=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,A,w)}:function(u,b,C,A){A===void 0&&(A=C),u[A]=b[C]}),d=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var p=this&&this.__awaiter||function(L,U,F,ce){function K(Z){return Z instanceof F?Z:new F(function($){$(Z)})}return new(F||(F=Promise))(function(Z,$){function oe(E){try{V(ce.next(E))}catch(j){$(j)}}function q(E){try{V(ce.throw(E))}catch(j){$(j)}}function V(E){E.done?Z(E.value):K(E.value).then(oe,q)}V((ce=ce.apply(L,U||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const d=i("./createPopup"),u=i("./exchangeCode"),b=i("./helpers");function C(L){return p(this,void 0,void 0,function*(){if(!L.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!L.clientId)throw new Error("You must include the 'clientId' option");if(!L.scopes)throw new Error("You must include the 'scopes' option");const U=(0,b.getRandomString)(),F=(0,b.getRandomString)(),ce=yield(0,b.sha256)(F),K={scope:L.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:U,redirect_uri:L.redirectUrl,client_id:L.clientId,code_challenge_method:"S256",code_challenge:ce},Z=`${(0,b.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(K).toString()}`,$={state:U,pkceVerifier:F,options:L};if(L.mode==="popup"){const oe=yield(0,d.createPopup)(Z);return(0,u.exchangeCode)(oe,$)}if(L.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify($)),window.location.replace(Z);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=C,c.authReady=p(void 0,void 0,void 0,function*(){var L;if(typeof window>"u")return;const U=window.location.href,F=localStorage.getItem("__osmAuthTemp");if(new URL(U).searchParams.get("code")){if(!((L=window.opener)===null||L===void 0)&&L.authComplete)window.opener.authComplete(U),window.close();else if(F)try{const ce=JSON.parse(F);yield(0,u.exchangeCode)(U,ce),localStorage.removeItem("__osmAuthTemp")}catch(ce){console.error("OSM Auth Error",ce)}}});const A=()=>{try{const L=localStorage.getItem("__osmAuth");return L?JSON.parse(L).accessToken:void 0}catch{return}};c.getAuthToken=A;const w=()=>!!(0,c.getAuthToken)();c.isLoggedIn=w;function T(){localStorage.removeItem("__osmAuth")}c.logout=T},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const p={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},d=()=>p;c.getConfig=d;function u(b){Object.assign(p,b)}c.configure=u},{}],40:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,A){A===void 0&&(A=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,A,w)}:function(u,b,C,A){A===void 0&&(A=C),u[A]=b[C]}),d=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./api"),c),d(i("./auth"),c),d(i("./config"),c),d(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],42:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],43:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],44:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,A){A===void 0&&(A=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,A,w)}:function(u,b,C,A){A===void 0&&(A=C),u[A]=b[C]}),d=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./changesets"),c),d(i("./features"),c),d(i("./general"),c),d(i("./notes"),c),d(i("./osmPatch"),c),d(i("./user"),c)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],46:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],47:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}]},{},[40])(40)})})(KC);var zs=KC.exports;const YC=()=>{const[e,t]=_t.useState(!1);_t.useEffect(()=>{t(zs.isLoggedIn())},[]);const i=_t.useCallback(()=>{(async()=>(await zs.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(zs.isLoggedIn()),window.location.reload()))()},[]),a=_t.useCallback(()=>{(async()=>(zs.logout(),t(!1)))()},[]);return yt.jsx(yt.Fragment,{children:e?yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},TR=()=>{const[e,t]=_t.useState(!1),[i,a]=_t.useState(void 0);return _t.useEffect(()=>{t(zs.isLoggedIn())},[]),_t.useEffect(()=>{e&&(async()=>{const c=await zs.getUser("me");a(c)})()},[e]),yt.jsx(yt.Fragment,{children:i?yt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):yt.jsx("img",{})})},CR=()=>{const[e,t]=_t.useState(!1),[i,a]=_t.useState(void 0);return _t.useEffect(()=>{t(zs.isLoggedIn())},[]),_t.useEffect(()=>{e&&(async()=>{const c=await zs.getUser("me");a(c)})()},[e]),yt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[yt.jsxs("div",{children:[yt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?yt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):yt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),yt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[yt.jsx("div",{children:yt.jsx(TR,{})}),yt.jsx("div",{children:yt.jsx(YC,{})})]})]})},JC=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return yt.jsxs(yt.Fragment,{children:[yt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",yt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},IR=({feature:e})=>yt.jsx(yt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return yt.jsxs("div",{className:t,children:[yt.jsx("span",{className:"underline",children:t})," = ",yt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function $d(e,t,i){return parseInt(e.substr(t,i),16)}function QC(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function z0(e,t,i){return i=i<0?i+6:i>6?i-6:i,QC(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function AR(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],p=e[3],d=e[4]||"";t="#"+a+a+c+c+p+p+d+d}return(i==7||i>8)&&(t=e),t}}function PR(e,t,i){let a;if(t==0){const c=QC(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,p=i*2-c;a=z0(p,c,e*6+2)+z0(p,c,e*6)+z0(p,c,e*6-2)}return"#"+a}function Fd(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,PR(e,t,i)}const kR=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},X2={V:"jdenticon_config",n:"config"};var MR={};function zR(e,t){const i=typeof e=="object"&&e||MR[X2.n]||kR[X2.V]||{},a=i.lightness||{},c=i.saturation||{},p="color"in c?c.color:c,d=c.grayscale,u=i.backColor,b=i.padding;function C(w,T){let L=a[w];return L&&L.length>1||(L=T),function(U){return U=L[0]+U*(L[1]-L[0]),U<0?0:U>1?1:U}}function A(w){const T=i.hues;let L;return T&&T.length>0&&(L=T[0|.999*w*T.length]),typeof L=="number"?(L/360%1+1)%1:w}return{W:A,o:typeof p=="number"?p:.5,D:typeof d=="number"?d:0,p:C("color",[.4,.8]),F:C("grayscale",[.3,.9]),G:AR(u),X:typeof e=="number"?e:typeof b=="number"?b:t}}let sm=class{constructor(t,i){this.x=t,this.y=i}};class eI{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const p=this.q+this.H,d=this.t+this.H,u=this.Y;return u===1?new sm(p-i-(c||0),this.t+t):u===2?new sm(p-t-(a||0),d-i-(c||0)):u===3?new sm(this.q+i,d-t-(a||0)):new sm(this.q+t,this.t+i)}}const RR=new eI(0,0,0,0);class OR{constructor(t){this.J=t,this.u=RR}g(t,i){const a=i?-2:2,c=[];for(let p=i?t.length-2:0;p<t.length&&p>=0;p+=a)c.push(this.u.I(t[p],t[p+1]));this.J.g(c)}h(t,i,a,c){const p=this.u.I(t,i,a,a);this.J.h(p,a,c)}i(t,i,a,c,p){this.g([t,i,t+a,i,t+a,i+c,t,i+c],p)}j(t,i,a,c,p,d){const u=[t+a,i,t+a,i+c,t,i+c,t,i];u.splice((p||0)%4*2,2),this.g(u,d)}K(t,i,a,c,p){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],p)}}function LR(e,t,i,a){e=e%14;let c,p,d,u,b,C;e?e==1?(d=0|i*.5,u=0|i*.8,t.j(i-d,0,d,u,2)):e==2?(d=0|i/3,t.i(d,d,i-d,i-d)):e==3?(b=i*.1,C=i<6?1:i<8?2:0|i*.25,b=b>1?0|b:b>.5?1:b,t.i(C,C,i-b-C,i-b-C)):e==4?(p=0|i*.15,d=0|i*.5,t.h(i-d-p,i-d-p,d)):e==5?(b=i*.1,C=b*4,C>3&&(C=0|C),t.i(0,0,i,i),t.g([C,C,i-b,C,C+(i-C-b)/2,i-b],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(b=i*.14,C=i<4?1:i<6?2:0|i*.35,b=i<8?b:0|b,t.i(0,0,i,i),t.i(C,C,i-C-b,i-C-b,!0)):e==10?(b=i*.12,C=b*3,t.i(0,0,i,i),t.h(C,C,i-b-C,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(p=i*.25,t.i(0,0,i,i),t.K(p,p,i-p,i-p,!0)):!a&&(p=i*.4,d=i*1.2,t.h(p,p,d)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function q2(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function FR(e,t){return e=t.W(e),[Fd(e,t.D,t.F(0)),Fd(e,t.o,t.p(.5)),Fd(e,t.D,t.F(1)),Fd(e,t.o,t.p(1)),Fd(e,t.o,t.p(0))]}function jR(e,t,i){const a=zR(i,.08);a.G&&e.m(a.G);let c=e.k;const p=.5+c*a.X|0;c-=p*2;const d=new OR(e),u=0|c/4,b=0|p+c/2-u*2,C=0|p+c/2-u*2;function A(ce,K,Z,$,oe){const q=$d(t,Z,1);let V=$?$d(t,$,1):0;e.L(T[L[ce]]);for(let E=0;E<oe.length;E++)d.u=new eI(b+oe[E][0]*u,C+oe[E][1]*u,u,V++%4),K(q,d,u,E);e.M()}const w=$d(t,-7)/268435455,T=FR(w,a),L=[];let U;function F(ce){if(ce.indexOf(U)>=0){for(let K=0;K<ce.length;K++)if(L.indexOf(ce[K])>=0)return!0}}for(let ce=0;ce<3;ce++)U=$d(t,8+ce,1)%T.length,(F([0,4])||F([2,3]))&&(U=1),L.push(U);A(0,q2,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),A(1,q2,4,5,[[0,0],[3,0],[3,3],[0,3]]),A(2,LR,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function DR(e){var a=0,c=0,p=encodeURI(e)+"%80",d=[],u,b=[],C=1732584193,A=4023233417,w=~C,T=~A,L=3285377520,U=[C,A,w,T,L],F=0,ce="";function K(Z,$){return Z<<$|Z>>>32-$}for(;a<p.length;c++)d[c>>2]=d[c>>2]|(p[a]=="%"?parseInt(p.substring(a+1,a+=3),16):p.charCodeAt(a++))<<(3-(c&3))*8;for(u=((c+7>>6)+1)*16,d[u-1]=c*8-8;F<u;F+=16){for(a=0;a<80;a++)c=K(C,5)+L+(a<20?(A&w^~A&T)+1518500249:a<40?(A^w^T)+1859775393:a<60?(A&w^A&T^w&T)+2400959708:(A^w^T)+3395469782)+(b[a]=a<16?d[F+a]|0:K(b[a-3]^b[a-8]^b[a-14]^b[a-16],1)),L=T,T=w,w=K(A,30),A=C,C=c;U[0]=C=U[0]+C|0,U[1]=A=U[1]+A|0,U[2]=w=U[2]+w|0,U[3]=T=U[3]+T|0,U[4]=L=U[4]+L|0}for(a=0;a<40;a++)ce+=(U[a>>3]>>>(7-(a&7))*4&15).toString(16);return ce}function BR(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function NR(e){return DR(e==null?"":""+e)}function Gc(e){return(e*10+.5|0)/10}class UR{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+Gc(t[a].x)+" "+Gc(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,p=Gc(i/2),d=Gc(i),u="a"+p+","+p+" 0 1,"+c+" ";this.v+="M"+Gc(t.x)+" "+Gc(t.y+i/2)+u+d+",0"+u+-d+",0"}}class $R{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?$d(i[2],0)/255:1;this.N.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new UR)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.N.O(i,t[i].v)}}const VR={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class GR{constructor(t){this.k=t,this.C='<svg xmlns="'+VR.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}O(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function HR(e,t,i){const a=new GR(t);return jR(new $R(a),BR(e)||NR(e),i),a.toString()}typeof document<"u"&&document.querySelectorAll.bind(document);const WR=({feature:e,size:t})=>e.properties===null?null:yt.jsx(yt.Fragment,{children:e.properties.userIconHref.length>0?yt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):yt.jsx("span",{dangerouslySetInnerHTML:{__html:HR(e.properties.user||"noname",t)}})}),ZR=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?yt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};var XR={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};const qR=({viewState:e})=>{const[t,i]=_t.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return _t.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),yt.jsx(yt.Fragment,{children:e&&t&&yt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[yt.jsx(aa,{icon:XR,style:{padding:"0px 3px"}}),yt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var tI={};class Hi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const p=i[c],d=t+p,u=Math.abs(t)<Math.abs(p)?t-(d-p):p-(d-t);u&&(i[a++]=u),t=d}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,p,d=0;if(i>0){for(d=t[--i];i>0&&(a=d,c=t[--i],d=a+c,p=c-(d-a),!p););i>0&&(p<0&&t[i-1]<0||p>0&&t[i-1]>0)&&(c=p*2,a=d+c,c==a-d&&(d=a))}return d}}function*KR(e){for(const t of e)yield*t}function nI(e){return Array.from(KR(e))}function dh(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,p=new Array(c);++a<c;)p[a]=e+a*i;return p}var dn=1e-6,Of=1e-12,On=Math.PI,Ur=On/2,dg=On/4,so=On*2,lr=180/On,fn=On/180,$n=Math.abs,Uh=Math.atan,ao=Math.atan2,on=Math.cos,am=Math.ceil,rI=Math.exp,d_=Math.hypot,fg=Math.log,R0=Math.pow,Yt=Math.sin,cs=Math.sign||function(e){return e>0?1:e<0?-1:0},yi=Math.sqrt,J1=Math.tan;function iI(e){return e>1?0:e<-1?On:Math.acos(e)}function lo(e){return e>1?Ur:e<-1?-Ur:Math.asin(e)}function K2(e){return(e=Yt(e/2))*e}function Pr(){}function pg(e,t){e&&J2.hasOwnProperty(e.type)&&J2[e.type](e,t)}var Y2={Feature:function(e,t){pg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)pg(i[a].geometry,t)}},J2={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){f_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)f_(i[a],t,0)},Polygon:function(e,t){Q2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)Q2(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)pg(i[a],t)}};function f_(e,t,i){var a=-1,c=e.length-i,p;for(t.lineStart();++a<c;)p=e[a],t.point(p[0],p[1],p[2]);t.lineEnd()}function Q2(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)f_(e[i],t,1);t.polygonEnd()}function ks(e,t){e&&Y2.hasOwnProperty(e.type)?Y2[e.type](e,t):pg(e,t)}var mg=new Hi,gg=new Hi,oI,sI,p_,m_,g_,la={point:Pr,lineStart:Pr,lineEnd:Pr,polygonStart:function(){mg=new Hi,la.lineStart=YR,la.lineEnd=JR},polygonEnd:function(){var e=+mg;gg.add(e<0?so+e:e),this.lineStart=this.lineEnd=this.point=Pr},sphere:function(){gg.add(so)}};function YR(){la.point=QR}function JR(){aI(oI,sI)}function QR(e,t){la.point=aI,oI=e,sI=t,e*=fn,t*=fn,p_=e,m_=on(t=t/2+dg),g_=Yt(t)}function aI(e,t){e*=fn,t*=fn,t=t/2+dg;var i=e-p_,a=i>=0?1:-1,c=a*i,p=on(t),d=Yt(t),u=g_*d,b=m_*p+u*on(c),C=u*a*Yt(c);mg.add(ao(C,b)),p_=e,m_=p,g_=d}function eO(e){return gg=new Hi,ks(e,la),gg*2}function yg(e){return[ao(e[1],e[0]),lo(e[2])]}function Qu(e){var t=e[0],i=e[1],a=on(i);return[a*on(t),a*Yt(t),Yt(i)]}function lm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function zh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function O0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function um(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function vg(e){var t=yi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ir,_o,Dr,Bo,Du,lI,uI,wh,af,Ul,Ya,Ba={point:y_,lineStart:eS,lineEnd:tS,polygonStart:function(){Ba.point=hI,Ba.lineStart=tO,Ba.lineEnd=nO,af=new Hi,la.polygonStart()},polygonEnd:function(){la.polygonEnd(),Ba.point=y_,Ba.lineStart=eS,Ba.lineEnd=tS,mg<0?(Ir=-(Dr=180),_o=-(Bo=90)):af>dn?Bo=90:af<-dn&&(_o=-90),Ya[0]=Ir,Ya[1]=Dr},sphere:function(){Ir=-(Dr=180),_o=-(Bo=90)}};function y_(e,t){Ul.push(Ya=[Ir=e,Dr=e]),t<_o&&(_o=t),t>Bo&&(Bo=t)}function cI(e,t){var i=Qu([e*fn,t*fn]);if(wh){var a=zh(wh,i),c=[a[1],-a[0],0],p=zh(c,a);vg(p),p=yg(p);var d=e-Du,u=d>0?1:-1,b=p[0]*lr*u,C,A=$n(d)>180;A^(u*Du<b&&b<u*e)?(C=p[1]*lr,C>Bo&&(Bo=C)):(b=(b+360)%360-180,A^(u*Du<b&&b<u*e)?(C=-p[1]*lr,C<_o&&(_o=C)):(t<_o&&(_o=t),t>Bo&&(Bo=t))),A?e<Du?Do(Ir,e)>Do(Ir,Dr)&&(Dr=e):Do(e,Dr)>Do(Ir,Dr)&&(Ir=e):Dr>=Ir?(e<Ir&&(Ir=e),e>Dr&&(Dr=e)):e>Du?Do(Ir,e)>Do(Ir,Dr)&&(Dr=e):Do(e,Dr)>Do(Ir,Dr)&&(Ir=e)}else Ul.push(Ya=[Ir=e,Dr=e]);t<_o&&(_o=t),t>Bo&&(Bo=t),wh=i,Du=e}function eS(){Ba.point=cI}function tS(){Ya[0]=Ir,Ya[1]=Dr,Ba.point=y_,wh=null}function hI(e,t){if(wh){var i=e-Du;af.add($n(i)>180?i+(i>0?360:-360):i)}else lI=e,uI=t;la.point(e,t),cI(e,t)}function tO(){la.lineStart()}function nO(){hI(lI,uI),la.lineEnd(),$n(af)>dn&&(Ir=-(Dr=180)),Ya[0]=Ir,Ya[1]=Dr,wh=null}function Do(e,t){return(t-=e)<0?t+360:t}function rO(e,t){return e[0]-t[0]}function nS(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function iO(e){var t,i,a,c,p,d,u;if(Bo=Dr=-(Ir=_o=1/0),Ul=[],ks(e,Ba),i=Ul.length){for(Ul.sort(rO),t=1,a=Ul[0],p=[a];t<i;++t)c=Ul[t],nS(a,c[0])||nS(a,c[1])?(Do(a[0],c[1])>Do(a[0],a[1])&&(a[1]=c[1]),Do(c[0],a[1])>Do(a[0],a[1])&&(a[0]=c[0])):p.push(a=c);for(d=-1/0,i=p.length-1,t=0,a=p[i];t<=i;a=c,++t)c=p[t],(u=Do(a[1],c[0]))>d&&(d=u,Ir=c[0],Dr=a[1])}return Ul=Ya=null,Ir===1/0||_o===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ir,_o],[Dr,Bo]]}var Vd,_g,xg,wg,bg,Sg,Eg,Tg,v_,__,x_,dI,fI,no,ro,io,Rs={sphere:Pr,point:Q1,lineStart:rS,lineEnd:iS,polygonStart:function(){Rs.lineStart=aO,Rs.lineEnd=lO},polygonEnd:function(){Rs.lineStart=rS,Rs.lineEnd=iS}};function Q1(e,t){e*=fn,t*=fn;var i=on(t);qf(i*on(e),i*Yt(e),Yt(t))}function qf(e,t,i){++Vd,xg+=(e-xg)/Vd,wg+=(t-wg)/Vd,bg+=(i-bg)/Vd}function rS(){Rs.point=oO}function oO(e,t){e*=fn,t*=fn;var i=on(t);no=i*on(e),ro=i*Yt(e),io=Yt(t),Rs.point=sO,qf(no,ro,io)}function sO(e,t){e*=fn,t*=fn;var i=on(t),a=i*on(e),c=i*Yt(e),p=Yt(t),d=ao(yi((d=ro*p-io*c)*d+(d=io*a-no*p)*d+(d=no*c-ro*a)*d),no*a+ro*c+io*p);_g+=d,Sg+=d*(no+(no=a)),Eg+=d*(ro+(ro=c)),Tg+=d*(io+(io=p)),qf(no,ro,io)}function iS(){Rs.point=Q1}function aO(){Rs.point=uO}function lO(){pI(dI,fI),Rs.point=Q1}function uO(e,t){dI=e,fI=t,e*=fn,t*=fn,Rs.point=pI;var i=on(t);no=i*on(e),ro=i*Yt(e),io=Yt(t),qf(no,ro,io)}function pI(e,t){e*=fn,t*=fn;var i=on(t),a=i*on(e),c=i*Yt(e),p=Yt(t),d=ro*p-io*c,u=io*a-no*p,b=no*c-ro*a,C=d_(d,u,b),A=lo(C),w=C&&-A/C;v_.add(w*d),__.add(w*u),x_.add(w*b),_g+=A,Sg+=A*(no+(no=a)),Eg+=A*(ro+(ro=c)),Tg+=A*(io+(io=p)),qf(no,ro,io)}function cO(e){Vd=_g=xg=wg=bg=Sg=Eg=Tg=0,v_=new Hi,__=new Hi,x_=new Hi,ks(e,Rs);var t=+v_,i=+__,a=+x_,c=d_(t,i,a);return c<Of&&(t=Sg,i=Eg,a=Tg,_g<dn&&(t=xg,i=wg,a=bg),c=d_(t,i,a),c<Of)?[NaN,NaN]:[ao(i,t)*lr,lo(a/c)*lr]}function Hc(e){return function(){return e}}function w_(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function b_(e,t){return[$n(e)>On?e+Math.round(-e/so)*so:e,t]}b_.invert=b_;function ex(e,t,i){return(e%=so)?t||i?w_(sS(e),aS(t,i)):sS(e):t||i?aS(t,i):b_}function oS(e){return function(t,i){return t+=e,[t>On?t-so:t<-On?t+so:t,i]}}function sS(e){var t=oS(e);return t.invert=oS(-e),t}function aS(e,t){var i=on(e),a=Yt(e),c=on(t),p=Yt(t);function d(u,b){var C=on(b),A=on(u)*C,w=Yt(u)*C,T=Yt(b),L=T*i+A*a;return[ao(w*c-L*p,A*i-T*a),lo(L*c+w*p)]}return d.invert=function(u,b){var C=on(b),A=on(u)*C,w=Yt(u)*C,T=Yt(b),L=T*c-w*p;return[ao(w*c+T*p,A*i+L*a),lo(L*i-A*a)]},d}function mI(e){e=ex(e[0]*fn,e[1]*fn,e.length>2?e[2]*fn:0);function t(i){return i=e(i[0]*fn,i[1]*fn),i[0]*=lr,i[1]*=lr,i}return t.invert=function(i){return i=e.invert(i[0]*fn,i[1]*fn),i[0]*=lr,i[1]*=lr,i},t}function gI(e,t,i,a,c,p){if(i){var d=on(t),u=Yt(t),b=a*i;c==null?(c=t+a*so,p=t-b/2):(c=lS(d,c),p=lS(d,p),(a>0?c<p:c>p)&&(c+=a*so));for(var C,A=c;a>0?A>p:A<p;A-=b)C=yg([d,-u*on(A),-u*Yt(A)]),e.point(C[0],C[1])}}function lS(e,t){t=Qu(t),t[0]-=e,vg(t);var i=iI(-t[1]);return((-t[2]<0?-i:i)+so-dn)%so}function hO(){var e=Hc([0,0]),t=Hc(90),i=Hc(6),a,c,p={point:d};function d(b,C){a.push(b=c(b,C)),b[0]*=lr,b[1]*=lr}function u(){var b=e.apply(this,arguments),C=t.apply(this,arguments)*fn,A=i.apply(this,arguments)*fn;return a=[],c=ex(-b[0]*fn,-b[1]*fn,0).invert,gI(p,C,A,1),b={type:"Polygon",coordinates:[a]},a=c=null,b}return u.center=function(b){return arguments.length?(e=typeof b=="function"?b:Hc([+b[0],+b[1]]),u):e},u.radius=function(b){return arguments.length?(t=typeof b=="function"?b:Hc(+b),u):t},u.precision=function(b){return arguments.length?(i=typeof b=="function"?b:Hc(+b),u):i},u}function yI(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:Pr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function km(e,t){return $n(e[0]-t[0])<dn&&$n(e[1]-t[1])<dn}function cm(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function vI(e,t,i,a,c){var p=[],d=[],u,b;if(e.forEach(function(U){if(!((F=U.length-1)<=0)){var F,ce=U[0],K=U[F],Z;if(km(ce,K)){if(!ce[2]&&!K[2]){for(c.lineStart(),u=0;u<F;++u)c.point((ce=U[u])[0],ce[1]);c.lineEnd();return}K[0]+=2*dn}p.push(Z=new cm(ce,U,null,!0)),d.push(Z.o=new cm(ce,null,Z,!1)),p.push(Z=new cm(K,U,null,!1)),d.push(Z.o=new cm(K,null,Z,!0))}}),!!p.length){for(d.sort(t),uS(p),uS(d),u=0,b=d.length;u<b;++u)d[u].e=i=!i;for(var C=p[0],A,w;;){for(var T=C,L=!0;T.v;)if((T=T.n)===C)return;A=T.z,c.lineStart();do{if(T.v=T.o.v=!0,T.e){if(L)for(u=0,b=A.length;u<b;++u)c.point((w=A[u])[0],w[1]);else a(T.x,T.n.x,1,c);T=T.n}else{if(L)for(A=T.p.z,u=A.length-1;u>=0;--u)c.point((w=A[u])[0],w[1]);else a(T.x,T.p.x,-1,c);T=T.p}T=T.o,A=T.z,L=!L}while(!T.v);c.lineEnd()}}}function uS(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function L0(e){return $n(e[0])<=On?e[0]:cs(e[0])*(($n(e[0])+On)%so-On)}function _I(e,t){var i=L0(t),a=t[1],c=Yt(a),p=[Yt(i),-on(i),0],d=0,u=0,b=new Hi;c===1?a=Ur+dn:c===-1&&(a=-Ur-dn);for(var C=0,A=e.length;C<A;++C)if(T=(w=e[C]).length)for(var w,T,L=w[T-1],U=L0(L),F=L[1]/2+dg,ce=Yt(F),K=on(F),Z=0;Z<T;++Z,U=oe,ce=V,K=E,L=$){var $=w[Z],oe=L0($),q=$[1]/2+dg,V=Yt(q),E=on(q),j=oe-U,D=j>=0?1:-1,ee=D*j,W=ee>On,ve=ce*V;if(b.add(ao(ve*D*Yt(ee),K*E+ve*on(ee))),d+=W?j+D*so:j,W^U>=i^oe>=i){var _e=zh(Qu(L),Qu($));vg(_e);var de=zh(p,_e);vg(de);var ie=(W^j>=0?-1:1)*lo(de[2]);(a>ie||a===ie&&(_e[0]||_e[1]))&&(u+=W^j>=0?1:-1)}}return(d<-dn||d<dn&&b<-Of)^u&1}function xI(e,t,i,a){return function(c){var p=t(c),d=yI(),u=t(d),b=!1,C,A,w,T={point:L,lineStart:F,lineEnd:ce,polygonStart:function(){T.point=K,T.lineStart=Z,T.lineEnd=$,A=[],C=[]},polygonEnd:function(){T.point=L,T.lineStart=F,T.lineEnd=ce,A=nI(A);var oe=_I(C,a);A.length?(b||(c.polygonStart(),b=!0),vI(A,fO,oe,i,c)):oe&&(b||(c.polygonStart(),b=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),b&&(c.polygonEnd(),b=!1),A=C=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function L(oe,q){e(oe,q)&&c.point(oe,q)}function U(oe,q){p.point(oe,q)}function F(){T.point=U,p.lineStart()}function ce(){T.point=L,p.lineEnd()}function K(oe,q){w.push([oe,q]),u.point(oe,q)}function Z(){u.lineStart(),w=[]}function $(){K(w[0][0],w[0][1]),u.lineEnd();var oe=u.clean(),q=d.result(),V,E=q.length,j,D,ee;if(w.pop(),C.push(w),w=null,!!E){if(oe&1){if(D=q[0],(j=D.length-1)>0){for(b||(c.polygonStart(),b=!0),c.lineStart(),V=0;V<j;++V)c.point((ee=D[V])[0],ee[1]);c.lineEnd()}return}E>1&&oe&2&&q.push(q.pop().concat(q.shift())),A.push(q.filter(dO))}}return T}}function dO(e){return e.length>1}function fO(e,t){return((e=e.x)[0]<0?e[1]-Ur-dn:Ur-e[1])-((t=t.x)[0]<0?t[1]-Ur-dn:Ur-t[1])}const S_=xI(function(){return!0},pO,gO,[-On,-Ur]);function pO(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(p,d){var u=p>0?On:-On,b=$n(p-t);$n(b-On)<dn?(e.point(t,i=(i+d)/2>0?Ur:-Ur),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),e.point(p,i),c=0):a!==u&&b>=On&&($n(t-a)<dn&&(t-=a*dn),$n(p-u)<dn&&(p-=u*dn),i=mO(t,i,p,d),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),c=0),e.point(t=p,i=d),a=u},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function mO(e,t,i,a){var c,p,d=Yt(e-i);return $n(d)>dn?Uh((Yt(t)*(p=on(a))*Yt(i)-Yt(a)*(c=on(t))*Yt(e))/(c*p*d)):(t+a)/2}function gO(e,t,i,a){var c;if(e==null)c=i*Ur,a.point(-On,c),a.point(0,c),a.point(On,c),a.point(On,0),a.point(On,-c),a.point(0,-c),a.point(-On,-c),a.point(-On,0),a.point(-On,c);else if($n(e[0]-t[0])>dn){var p=e[0]<t[0]?On:-On;c=i*p/2,a.point(-p,c),a.point(0,c),a.point(p,c)}else a.point(t[0],t[1])}function wI(e){var t=on(e),i=6*fn,a=t>0,c=$n(t)>dn;function p(A,w,T,L){gI(L,e,i,T,A,w)}function d(A,w){return on(A)*on(w)>t}function u(A){var w,T,L,U,F;return{lineStart:function(){U=L=!1,F=1},point:function(ce,K){var Z=[ce,K],$,oe=d(ce,K),q=a?oe?0:C(ce,K):oe?C(ce+(ce<0?On:-On),K):0;if(!w&&(U=L=oe)&&A.lineStart(),oe!==L&&($=b(w,Z),(!$||km(w,$)||km(Z,$))&&(Z[2]=1)),oe!==L)F=0,oe?(A.lineStart(),$=b(Z,w),A.point($[0],$[1])):($=b(w,Z),A.point($[0],$[1],2),A.lineEnd()),w=$;else if(c&&w&&a^oe){var V;!(q&T)&&(V=b(Z,w,!0))&&(F=0,a?(A.lineStart(),A.point(V[0][0],V[0][1]),A.point(V[1][0],V[1][1]),A.lineEnd()):(A.point(V[1][0],V[1][1]),A.lineEnd(),A.lineStart(),A.point(V[0][0],V[0][1],3)))}oe&&(!w||!km(w,Z))&&A.point(Z[0],Z[1]),w=Z,L=oe,T=q},lineEnd:function(){L&&A.lineEnd(),w=null},clean:function(){return F|(U&&L)<<1}}}function b(A,w,T){var L=Qu(A),U=Qu(w),F=[1,0,0],ce=zh(L,U),K=lm(ce,ce),Z=ce[0],$=K-Z*Z;if(!$)return!T&&A;var oe=t*K/$,q=-t*Z/$,V=zh(F,ce),E=um(F,oe),j=um(ce,q);O0(E,j);var D=V,ee=lm(E,D),W=lm(D,D),ve=ee*ee-W*(lm(E,E)-1);if(!(ve<0)){var _e=yi(ve),de=um(D,(-ee-_e)/W);if(O0(de,E),de=yg(de),!T)return de;var ie=A[0],le=w[0],J=A[1],te=w[1],he;le<ie&&(he=ie,ie=le,le=he);var be=le-ie,Ee=$n(be-On)<dn,De=Ee||be<dn;if(!Ee&&te<J&&(he=J,J=te,te=he),De?Ee?J+te>0^de[1]<($n(de[0]-ie)<dn?J:te):J<=de[1]&&de[1]<=te:be>On^(ie<=de[0]&&de[0]<=le)){var Ae=um(D,(-ee+_e)/W);return O0(Ae,E),[de,yg(Ae)]}}}function C(A,w){var T=a?e:On-e,L=0;return A<-T?L|=1:A>T&&(L|=2),w<-T?L|=4:w>T&&(L|=8),L}return xI(d,u,p,a?[0,-e]:[-On,e-On])}function yO(e,t,i,a,c,p){var d=e[0],u=e[1],b=t[0],C=t[1],A=0,w=1,T=b-d,L=C-u,U;if(U=i-d,!(!T&&U>0)){if(U/=T,T<0){if(U<A)return;U<w&&(w=U)}else if(T>0){if(U>w)return;U>A&&(A=U)}if(U=c-d,!(!T&&U<0)){if(U/=T,T<0){if(U>w)return;U>A&&(A=U)}else if(T>0){if(U<A)return;U<w&&(w=U)}if(U=a-u,!(!L&&U>0)){if(U/=L,L<0){if(U<A)return;U<w&&(w=U)}else if(L>0){if(U>w)return;U>A&&(A=U)}if(U=p-u,!(!L&&U<0)){if(U/=L,L<0){if(U>w)return;U>A&&(A=U)}else if(L>0){if(U<A)return;U<w&&(w=U)}return A>0&&(e[0]=d+A*T,e[1]=u+A*L),w<1&&(t[0]=d+w*T,t[1]=u+w*L),!0}}}}}var Gd=1e9,hm=-Gd;function iy(e,t,i,a){function c(C,A){return e<=C&&C<=i&&t<=A&&A<=a}function p(C,A,w,T){var L=0,U=0;if(C==null||(L=d(C,w))!==(U=d(A,w))||b(C,A)<0^w>0)do T.point(L===0||L===3?e:i,L>1?a:t);while((L=(L+w+4)%4)!==U);else T.point(A[0],A[1])}function d(C,A){return $n(C[0]-e)<dn?A>0?0:3:$n(C[0]-i)<dn?A>0?2:1:$n(C[1]-t)<dn?A>0?1:0:A>0?3:2}function u(C,A){return b(C.x,A.x)}function b(C,A){var w=d(C,1),T=d(A,1);return w!==T?w-T:w===0?A[1]-C[1]:w===1?C[0]-A[0]:w===2?C[1]-A[1]:A[0]-C[0]}return function(C){var A=C,w=yI(),T,L,U,F,ce,K,Z,$,oe,q,V,E={point:j,lineStart:ve,lineEnd:_e,polygonStart:ee,polygonEnd:W};function j(ie,le){c(ie,le)&&A.point(ie,le)}function D(){for(var ie=0,le=0,J=L.length;le<J;++le)for(var te=L[le],he=1,be=te.length,Ee=te[0],De,Ae,Oe=Ee[0],We=Ee[1];he<be;++he)De=Oe,Ae=We,Ee=te[he],Oe=Ee[0],We=Ee[1],Ae<=a?We>a&&(Oe-De)*(a-Ae)>(We-Ae)*(e-De)&&++ie:We<=a&&(Oe-De)*(a-Ae)<(We-Ae)*(e-De)&&--ie;return ie}function ee(){A=w,T=[],L=[],V=!0}function W(){var ie=D(),le=V&&ie,J=(T=nI(T)).length;(le||J)&&(C.polygonStart(),le&&(C.lineStart(),p(null,null,1,C),C.lineEnd()),J&&vI(T,u,ie,p,C),C.polygonEnd()),A=C,T=L=U=null}function ve(){E.point=de,L&&L.push(U=[]),q=!0,oe=!1,Z=$=NaN}function _e(){T&&(de(F,ce),K&&oe&&w.rejoin(),T.push(w.result())),E.point=j,oe&&A.lineEnd()}function de(ie,le){var J=c(ie,le);if(L&&U.push([ie,le]),q)F=ie,ce=le,K=J,q=!1,J&&(A.lineStart(),A.point(ie,le));else if(J&&oe)A.point(ie,le);else{var te=[Z=Math.max(hm,Math.min(Gd,Z)),$=Math.max(hm,Math.min(Gd,$))],he=[ie=Math.max(hm,Math.min(Gd,ie)),le=Math.max(hm,Math.min(Gd,le))];yO(te,he,e,t,i,a)?(oe||(A.lineStart(),A.point(te[0],te[1])),A.point(he[0],he[1]),J||A.lineEnd(),V=!1):J&&(A.lineStart(),A.point(ie,le),V=!1)}Z=ie,$=le,oe=J}return E}}function vO(){var e=0,t=0,i=960,a=500,c,p,d;return d={stream:function(u){return c&&p===u?c:c=iy(e,t,i,a)(p=u)},extent:function(u){return arguments.length?(e=+u[0][0],t=+u[0][1],i=+u[1][0],a=+u[1][1],c=p=null,d):[[e,t],[i,a]]}}}var E_,T_,Mm,zm,Rh={sphere:Pr,point:Pr,lineStart:_O,lineEnd:Pr,polygonStart:Pr,polygonEnd:Pr};function _O(){Rh.point=wO,Rh.lineEnd=xO}function xO(){Rh.point=Rh.lineEnd=Pr}function wO(e,t){e*=fn,t*=fn,T_=e,Mm=Yt(t),zm=on(t),Rh.point=bO}function bO(e,t){e*=fn,t*=fn;var i=Yt(t),a=on(t),c=$n(e-T_),p=on(c),d=Yt(c),u=a*d,b=zm*i-Mm*a*p,C=Mm*i+zm*a*p;E_.add(ao(yi(u*u+b*b),C)),T_=e,Mm=i,zm=a}function bI(e){return E_=new Hi,ks(e,Rh),+E_}var C_=[null,null],SO={type:"LineString",coordinates:C_};function Cg(e,t){return C_[0]=e,C_[1]=t,bI(SO)}var cS={Feature:function(e,t){return Ig(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if(Ig(i[a].geometry,t))return!0;return!1}},hS={Sphere:function(){return!0},Point:function(e,t){return dS(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(dS(i[a],t))return!0;return!1},LineString:function(e,t){return fS(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(fS(i[a],t))return!0;return!1},Polygon:function(e,t){return pS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(pS(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if(Ig(i[a],t))return!0;return!1}};function Ig(e,t){return e&&hS.hasOwnProperty(e.type)?hS[e.type](e,t):!1}function dS(e,t){return Cg(e,t)===0}function fS(e,t){for(var i,a,c,p=0,d=e.length;p<d;p++){if(a=Cg(e[p],t),a===0||p>0&&(c=Cg(e[p],e[p-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<Of*c))return!0;i=a}return!1}function pS(e,t){return!!_I(e.map(EO),SI(t))}function EO(e){return e=e.map(SI),e.pop(),e}function SI(e){return[e[0]*fn,e[1]*fn]}function TO(e,t){return(e&&cS.hasOwnProperty(e.type)?cS[e.type]:Ig)(e,t)}function mS(e,t,i){var a=dh(e,t-dn,i).concat(t);return function(c){return a.map(function(p){return[c,p]})}}function gS(e,t,i){var a=dh(e,t-dn,i).concat(t);return function(c){return a.map(function(p){return[p,c]})}}function EI(){var e,t,i,a,c,p,d,u,b=10,C=b,A=90,w=360,T,L,U,F,ce=2.5;function K(){return{type:"MultiLineString",coordinates:Z()}}function Z(){return dh(am(a/A)*A,i,A).map(U).concat(dh(am(u/w)*w,d,w).map(F)).concat(dh(am(t/b)*b,e,b).filter(function($){return $n($%A)>dn}).map(T)).concat(dh(am(p/C)*C,c,C).filter(function($){return $n($%w)>dn}).map(L))}return K.lines=function(){return Z().map(function($){return{type:"LineString",coordinates:$}})},K.outline=function(){return{type:"Polygon",coordinates:[U(a).concat(F(d).slice(1),U(i).reverse().slice(1),F(u).reverse().slice(1))]}},K.extent=function($){return arguments.length?K.extentMajor($).extentMinor($):K.extentMinor()},K.extentMajor=function($){return arguments.length?(a=+$[0][0],i=+$[1][0],u=+$[0][1],d=+$[1][1],a>i&&($=a,a=i,i=$),u>d&&($=u,u=d,d=$),K.precision(ce)):[[a,u],[i,d]]},K.extentMinor=function($){return arguments.length?(t=+$[0][0],e=+$[1][0],p=+$[0][1],c=+$[1][1],t>e&&($=t,t=e,e=$),p>c&&($=p,p=c,c=$),K.precision(ce)):[[t,p],[e,c]]},K.step=function($){return arguments.length?K.stepMajor($).stepMinor($):K.stepMinor()},K.stepMajor=function($){return arguments.length?(A=+$[0],w=+$[1],K):[A,w]},K.stepMinor=function($){return arguments.length?(b=+$[0],C=+$[1],K):[b,C]},K.precision=function($){return arguments.length?(ce=+$,T=mS(p,c,90),L=gS(t,e,ce),U=mS(u,d,90),F=gS(a,i,ce),K):ce},K.extentMajor([[-180,-90+dn],[180,90-dn]]).extentMinor([[-180,-80-dn],[180,80+dn]])}function CO(){return EI()()}function IO(e,t){var i=e[0]*fn,a=e[1]*fn,c=t[0]*fn,p=t[1]*fn,d=on(a),u=Yt(a),b=on(p),C=Yt(p),A=d*on(i),w=d*Yt(i),T=b*on(c),L=b*Yt(c),U=2*lo(yi(K2(p-a)+d*b*K2(c-i))),F=Yt(U),ce=U?function(K){var Z=Yt(K*=U)/F,$=Yt(U-K)/F,oe=$*A+Z*T,q=$*w+Z*L,V=$*u+Z*C;return[ao(q,oe)*lr,ao(V,yi(oe*oe+q*q))*lr]}:function(){return[i*lr,a*lr]};return ce.distance=U,ce}const Lf=e=>e;var F0=new Hi,I_=new Hi,TI,CI,A_,P_,Na={point:Pr,lineStart:Pr,lineEnd:Pr,polygonStart:function(){Na.lineStart=AO,Na.lineEnd=kO},polygonEnd:function(){Na.lineStart=Na.lineEnd=Na.point=Pr,F0.add($n(I_)),I_=new Hi},result:function(){var e=F0/2;return F0=new Hi,e}};function AO(){Na.point=PO}function PO(e,t){Na.point=II,TI=A_=e,CI=P_=t}function II(e,t){I_.add(P_*e-A_*t),A_=e,P_=t}function kO(){II(TI,CI)}var Oh=1/0,Ag=Oh,Ff=-Oh,Pg=Ff,kg={point:MO,lineStart:Pr,lineEnd:Pr,polygonStart:Pr,polygonEnd:Pr,result:function(){var e=[[Oh,Ag],[Ff,Pg]];return Ff=Pg=-(Ag=Oh=1/0),e}};function MO(e,t){e<Oh&&(Oh=e),e>Ff&&(Ff=e),t<Ag&&(Ag=t),t>Pg&&(Pg=t)}var k_=0,M_=0,Hd=0,Mg=0,zg=0,fh=0,z_=0,R_=0,Wd=0,AI,PI,ta,na,ls={point:ec,lineStart:yS,lineEnd:vS,polygonStart:function(){ls.lineStart=OO,ls.lineEnd=LO},polygonEnd:function(){ls.point=ec,ls.lineStart=yS,ls.lineEnd=vS},result:function(){var e=Wd?[z_/Wd,R_/Wd]:fh?[Mg/fh,zg/fh]:Hd?[k_/Hd,M_/Hd]:[NaN,NaN];return k_=M_=Hd=Mg=zg=fh=z_=R_=Wd=0,e}};function ec(e,t){k_+=e,M_+=t,++Hd}function yS(){ls.point=zO}function zO(e,t){ls.point=RO,ec(ta=e,na=t)}function RO(e,t){var i=e-ta,a=t-na,c=yi(i*i+a*a);Mg+=c*(ta+e)/2,zg+=c*(na+t)/2,fh+=c,ec(ta=e,na=t)}function vS(){ls.point=ec}function OO(){ls.point=FO}function LO(){kI(AI,PI)}function FO(e,t){ls.point=kI,ec(AI=ta=e,PI=na=t)}function kI(e,t){var i=e-ta,a=t-na,c=yi(i*i+a*a);Mg+=c*(ta+e)/2,zg+=c*(na+t)/2,fh+=c,c=na*e-ta*t,z_+=c*(ta+e),R_+=c*(na+t),Wd+=c*3,ec(ta=e,na=t)}function MI(e){this._context=e}MI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,so);break}}},result:Pr};var O_=new Hi,j0,zI,RI,Zd,Xd,jf={point:Pr,lineStart:function(){jf.point=jO},lineEnd:function(){j0&&OI(zI,RI),jf.point=Pr},polygonStart:function(){j0=!0},polygonEnd:function(){j0=null},result:function(){var e=+O_;return O_=new Hi,e}};function jO(e,t){jf.point=OI,zI=Zd=e,RI=Xd=t}function OI(e,t){Zd-=e,Xd-=t,O_.add(yi(Zd*Zd+Xd*Xd)),Zd=e,Xd=t}function LI(){this._string=[]}LI.prototype={_radius:4.5,_circle:_S(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=_S(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function _S(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function DO(e,t){var i=4.5,a,c;function p(d){return d&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),ks(d,a(c))),c.result()}return p.area=function(d){return ks(d,a(Na)),Na.result()},p.measure=function(d){return ks(d,a(jf)),jf.result()},p.bounds=function(d){return ks(d,a(kg)),kg.result()},p.centroid=function(d){return ks(d,a(ls)),ls.result()},p.projection=function(d){return arguments.length?(a=d==null?(e=null,Lf):(e=d).stream,p):e},p.context=function(d){return arguments.length?(c=d==null?(t=null,new LI):new MI(t=d),typeof i!="function"&&c.pointRadius(i),p):t},p.pointRadius=function(d){return arguments.length?(i=typeof d=="function"?d:(c.pointRadius(+d),+d),p):i},p.projection(e).context(t)}function BO(e){return{stream:Kf(e)}}function Kf(e){return function(t){var i=new L_;for(var a in e)i[a]=e[a];return i.stream=t,i}}function L_(){}L_.prototype={constructor:L_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function tx(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),ks(i,e.stream(kg)),t(kg.result()),a!=null&&e.clipExtent(a),e}function oy(e,t,i){return tx(e,function(a){var c=t[1][0]-t[0][0],p=t[1][1]-t[0][1],d=Math.min(c/(a[1][0]-a[0][0]),p/(a[1][1]-a[0][1])),u=+t[0][0]+(c-d*(a[1][0]+a[0][0]))/2,b=+t[0][1]+(p-d*(a[1][1]+a[0][1]))/2;e.scale(150*d).translate([u,b])},i)}function nx(e,t,i){return oy(e,[[0,0],t],i)}function rx(e,t,i){return tx(e,function(a){var c=+t,p=c/(a[1][0]-a[0][0]),d=(c-p*(a[1][0]+a[0][0]))/2,u=-p*a[0][1];e.scale(150*p).translate([d,u])},i)}function ix(e,t,i){return tx(e,function(a){var c=+t,p=c/(a[1][1]-a[0][1]),d=-p*a[0][0],u=(c-p*(a[1][1]+a[0][1]))/2;e.scale(150*p).translate([d,u])},i)}var xS=16,NO=on(30*fn);function wS(e,t){return+t?$O(e,t):UO(e)}function UO(e){return Kf({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function $O(e,t){function i(a,c,p,d,u,b,C,A,w,T,L,U,F,ce){var K=C-a,Z=A-c,$=K*K+Z*Z;if($>4*t&&F--){var oe=d+T,q=u+L,V=b+U,E=yi(oe*oe+q*q+V*V),j=lo(V/=E),D=$n($n(V)-1)<dn||$n(p-w)<dn?(p+w)/2:ao(q,oe),ee=e(D,j),W=ee[0],ve=ee[1],_e=W-a,de=ve-c,ie=Z*_e-K*de;(ie*ie/$>t||$n((K*_e+Z*de)/$-.5)>.3||d*T+u*L+b*U<NO)&&(i(a,c,p,d,u,b,W,ve,D,oe/=E,q/=E,V,F,ce),ce.point(W,ve),i(W,ve,D,oe,q,V,C,A,w,T,L,U,F,ce))}}return function(a){var c,p,d,u,b,C,A,w,T,L,U,F,ce={point:K,lineStart:Z,lineEnd:oe,polygonStart:function(){a.polygonStart(),ce.lineStart=q},polygonEnd:function(){a.polygonEnd(),ce.lineStart=Z}};function K(j,D){j=e(j,D),a.point(j[0],j[1])}function Z(){w=NaN,ce.point=$,a.lineStart()}function $(j,D){var ee=Qu([j,D]),W=e(j,D);i(w,T,A,L,U,F,w=W[0],T=W[1],A=j,L=ee[0],U=ee[1],F=ee[2],xS,a),a.point(w,T)}function oe(){ce.point=K,a.lineEnd()}function q(){Z(),ce.point=V,ce.lineEnd=E}function V(j,D){$(c=j,D),p=w,d=T,u=L,b=U,C=F,ce.point=$}function E(){i(w,T,A,L,U,F,p,d,c,u,b,C,xS,a),ce.lineEnd=oe,oe()}return ce}}var VO=Kf({point:function(e,t){this.stream.point(e*fn,t*fn)}});function GO(e){return Kf({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function HO(e,t,i,a,c){function p(d,u){return d*=a,u*=c,[t+e*d,i-e*u]}return p.invert=function(d,u){return[(d-t)/e*a,(i-u)/e*c]},p}function bS(e,t,i,a,c,p){if(!p)return HO(e,t,i,a,c);var d=on(p),u=Yt(p),b=d*e,C=u*e,A=d/e,w=u/e,T=(u*i-d*t)/e,L=(u*t+d*i)/e;function U(F,ce){return F*=a,ce*=c,[b*F-C*ce+t,i-C*F-b*ce]}return U.invert=function(F,ce){return[a*(A*F-w*ce+T),c*(L-w*F-A*ce)]},U}function ua(e){return ox(function(){return e})()}function ox(e){var t,i=150,a=480,c=250,p=0,d=0,u=0,b=0,C=0,A,w=0,T=1,L=1,U=null,F=S_,ce=null,K,Z,$,oe=Lf,q=.5,V,E,j,D,ee;function W(ie){return j(ie[0]*fn,ie[1]*fn)}function ve(ie){return ie=j.invert(ie[0],ie[1]),ie&&[ie[0]*lr,ie[1]*lr]}W.stream=function(ie){return D&&ee===ie?D:D=VO(GO(A)(F(V(oe(ee=ie)))))},W.preclip=function(ie){return arguments.length?(F=ie,U=void 0,de()):F},W.postclip=function(ie){return arguments.length?(oe=ie,ce=K=Z=$=null,de()):oe},W.clipAngle=function(ie){return arguments.length?(F=+ie?wI(U=ie*fn):(U=null,S_),de()):U*lr},W.clipExtent=function(ie){return arguments.length?(oe=ie==null?(ce=K=Z=$=null,Lf):iy(ce=+ie[0][0],K=+ie[0][1],Z=+ie[1][0],$=+ie[1][1]),de()):ce==null?null:[[ce,K],[Z,$]]},W.scale=function(ie){return arguments.length?(i=+ie,_e()):i},W.translate=function(ie){return arguments.length?(a=+ie[0],c=+ie[1],_e()):[a,c]},W.center=function(ie){return arguments.length?(p=ie[0]%360*fn,d=ie[1]%360*fn,_e()):[p*lr,d*lr]},W.rotate=function(ie){return arguments.length?(u=ie[0]%360*fn,b=ie[1]%360*fn,C=ie.length>2?ie[2]%360*fn:0,_e()):[u*lr,b*lr,C*lr]},W.angle=function(ie){return arguments.length?(w=ie%360*fn,_e()):w*lr},W.reflectX=function(ie){return arguments.length?(T=ie?-1:1,_e()):T<0},W.reflectY=function(ie){return arguments.length?(L=ie?-1:1,_e()):L<0},W.precision=function(ie){return arguments.length?(V=wS(E,q=ie*ie),de()):yi(q)},W.fitExtent=function(ie,le){return oy(W,ie,le)},W.fitSize=function(ie,le){return nx(W,ie,le)},W.fitWidth=function(ie,le){return rx(W,ie,le)},W.fitHeight=function(ie,le){return ix(W,ie,le)};function _e(){var ie=bS(i,0,0,T,L,w).apply(null,t(p,d)),le=bS(i,a-ie[0],c-ie[1],T,L,w);return A=ex(u,b,C),E=w_(t,le),j=w_(A,E),V=wS(E,q),de()}function de(){return D=ee=null,W}return function(){return t=e.apply(this,arguments),W.invert=t.invert&&ve,_e()}}function sx(e){var t=0,i=On/3,a=ox(e),c=a(t,i);return c.parallels=function(p){return arguments.length?a(t=p[0]*fn,i=p[1]*fn):[t*lr,i*lr]},c}function WO(e){var t=on(e);function i(a,c){return[a*t,Yt(c)/t]}return i.invert=function(a,c){return[a/t,lo(c*t)]},i}function FI(e,t){var i=Yt(e),a=(i+Yt(t))/2;if($n(a)<dn)return WO(e);var c=1+i*(2*a-i),p=yi(c)/a;function d(u,b){var C=yi(c-2*a*Yt(b))/a;return[C*Yt(u*=a),p-C*on(u)]}return d.invert=function(u,b){var C=p-b,A=ao(u,$n(C))*cs(C);return C*a<0&&(A-=On*cs(u)*cs(C)),[A/a,lo((c-(u*u+C*C)*a*a)/(2*a))]},d}function Rg(){return sx(FI).scale(155.424).center([0,33.6442])}function jI(){return Rg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ZO(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function XO(){var e,t,i=jI(),a,c=Rg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),p,d=Rg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,b,C={point:function(T,L){b=[T,L]}};function A(T){var L=T[0],U=T[1];return b=null,a.point(L,U),b||(p.point(L,U),b)||(u.point(L,U),b)}A.invert=function(T){var L=i.scale(),U=i.translate(),F=(T[0]-U[0])/L,ce=(T[1]-U[1])/L;return(ce>=.12&&ce<.234&&F>=-.425&&F<-.214?c:ce>=.166&&ce<.234&&F>=-.214&&F<-.115?d:i).invert(T)},A.stream=function(T){return e&&t===T?e:e=ZO([i.stream(t=T),c.stream(T),d.stream(T)])},A.precision=function(T){return arguments.length?(i.precision(T),c.precision(T),d.precision(T),w()):i.precision()},A.scale=function(T){return arguments.length?(i.scale(T),c.scale(T*.35),d.scale(T),A.translate(i.translate())):i.scale()},A.translate=function(T){if(!arguments.length)return i.translate();var L=i.scale(),U=+T[0],F=+T[1];return a=i.translate(T).clipExtent([[U-.455*L,F-.238*L],[U+.455*L,F+.238*L]]).stream(C),p=c.translate([U-.307*L,F+.201*L]).clipExtent([[U-.425*L+dn,F+.12*L+dn],[U-.214*L-dn,F+.234*L-dn]]).stream(C),u=d.translate([U-.205*L,F+.212*L]).clipExtent([[U-.214*L+dn,F+.166*L+dn],[U-.115*L-dn,F+.234*L-dn]]).stream(C),w()},A.fitExtent=function(T,L){return oy(A,T,L)},A.fitSize=function(T,L){return nx(A,T,L)},A.fitWidth=function(T,L){return rx(A,T,L)},A.fitHeight=function(T,L){return ix(A,T,L)};function w(){return e=t=null,A}return A.scale(1070)}function DI(e){return function(t,i){var a=on(t),c=on(i),p=e(a*c);return p===1/0?[2,0]:[p*c*Yt(t),p*Yt(i)]}}function Yf(e){return function(t,i){var a=yi(t*t+i*i),c=e(a),p=Yt(c),d=on(c);return[ao(t*p,a*d),lo(a&&i*p/a)]}}var ax=DI(function(e){return yi(2/(1+e))});ax.invert=Yf(function(e){return 2*lo(e/2)});function qO(){return ua(ax).scale(124.75).clipAngle(180-.001)}var lx=DI(function(e){return(e=iI(e))&&e/Yt(e)});lx.invert=Yf(function(e){return e});function KO(){return ua(lx).scale(79.4188).clipAngle(180-.001)}function Jf(e,t){return[e,fg(J1((Ur+t)/2))]}Jf.invert=function(e,t){return[e,2*Uh(rI(t))-Ur]};function YO(){return BI(Jf).scale(961/so)}function BI(e){var t=ua(e),i=t.center,a=t.scale,c=t.translate,p=t.clipExtent,d=null,u,b,C;t.scale=function(w){return arguments.length?(a(w),A()):a()},t.translate=function(w){return arguments.length?(c(w),A()):c()},t.center=function(w){return arguments.length?(i(w),A()):i()},t.clipExtent=function(w){return arguments.length?(w==null?d=u=b=C=null:(d=+w[0][0],u=+w[0][1],b=+w[1][0],C=+w[1][1]),A()):d==null?null:[[d,u],[b,C]]};function A(){var w=On*a(),T=t(mI(t.rotate()).invert([0,0]));return p(d==null?[[T[0]-w,T[1]-w],[T[0]+w,T[1]+w]]:e===Jf?[[Math.max(T[0]-w,d),u],[Math.min(T[0]+w,b),C]]:[[d,Math.max(T[1]-w,u)],[b,Math.min(T[1]+w,C)]])}return A()}function dm(e){return J1((Ur+e)/2)}function NI(e,t){var i=on(e),a=e===t?Yt(e):fg(i/on(t))/fg(dm(t)/dm(e)),c=i*R0(dm(e),a)/a;if(!a)return Jf;function p(d,u){c>0?u<-Ur+dn&&(u=-Ur+dn):u>Ur-dn&&(u=Ur-dn);var b=c/R0(dm(u),a);return[b*Yt(a*d),c-b*on(a*d)]}return p.invert=function(d,u){var b=c-u,C=cs(a)*yi(d*d+b*b),A=ao(d,$n(b))*cs(b);return b*a<0&&(A-=On*cs(d)*cs(b)),[A/a,2*Uh(R0(c/C,1/a))-Ur]},p}function JO(){return sx(NI).scale(109.5).parallels([30,30])}function Df(e,t){return[e,t]}Df.invert=Df;function QO(){return ua(Df).scale(152.63)}function UI(e,t){var i=on(e),a=e===t?Yt(e):(i-on(t))/(t-e),c=i/a+e;if($n(a)<dn)return Df;function p(d,u){var b=c-u,C=a*d;return[b*Yt(C),c-b*on(C)]}return p.invert=function(d,u){var b=c-u,C=ao(d,$n(b))*cs(b);return b*a<0&&(C-=On*cs(d)*cs(b)),[C/a,c-cs(a)*yi(d*d+b*b)]},p}function eL(){return sx(UI).scale(131.154).center([0,13.9389])}var lf=1.340264,uf=-.081106,cf=893e-6,hf=.003796,Og=yi(3)/2,tL=12;function ux(e,t){var i=lo(Og*Yt(t)),a=i*i,c=a*a*a;return[e*on(i)/(Og*(lf+3*uf*a+c*(7*cf+9*hf*a))),i*(lf+uf*a+c*(cf+hf*a))]}ux.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,p=0,d,u,b;p<tL&&(u=i*(lf+uf*a+c*(cf+hf*a))-t,b=lf+3*uf*a+c*(7*cf+9*hf*a),i-=d=u/b,a=i*i,c=a*a*a,!($n(d)<Of));++p);return[Og*e*(lf+3*uf*a+c*(7*cf+9*hf*a))/on(i),lo(Yt(i)/Og)]};function nL(){return ua(ux).scale(177.158)}function cx(e,t){var i=on(t),a=on(e)*i;return[i*Yt(e)/a,Yt(t)/a]}cx.invert=Yf(Uh);function rL(){return ua(cx).scale(144.049).clipAngle(60)}function iL(){var e=1,t=0,i=0,a=1,c=1,p=0,d,u,b=null,C,A,w,T=1,L=1,U=Kf({point:function(oe,q){var V=$([oe,q]);this.stream.point(V[0],V[1])}}),F=Lf,ce,K;function Z(){return T=e*a,L=e*c,ce=K=null,$}function $(oe){var q=oe[0]*T,V=oe[1]*L;if(p){var E=V*d-q*u;q=q*d+V*u,V=E}return[q+t,V+i]}return $.invert=function(oe){var q=oe[0]-t,V=oe[1]-i;if(p){var E=V*d+q*u;q=q*d-V*u,V=E}return[q/T,V/L]},$.stream=function(oe){return ce&&K===oe?ce:ce=U(F(K=oe))},$.postclip=function(oe){return arguments.length?(F=oe,b=C=A=w=null,Z()):F},$.clipExtent=function(oe){return arguments.length?(F=oe==null?(b=C=A=w=null,Lf):iy(b=+oe[0][0],C=+oe[0][1],A=+oe[1][0],w=+oe[1][1]),Z()):b==null?null:[[b,C],[A,w]]},$.scale=function(oe){return arguments.length?(e=+oe,Z()):e},$.translate=function(oe){return arguments.length?(t=+oe[0],i=+oe[1],Z()):[t,i]},$.angle=function(oe){return arguments.length?(p=oe%360*fn,u=Yt(p),d=on(p),Z()):p*lr},$.reflectX=function(oe){return arguments.length?(a=oe?-1:1,Z()):a<0},$.reflectY=function(oe){return arguments.length?(c=oe?-1:1,Z()):c<0},$.fitExtent=function(oe,q){return oy($,oe,q)},$.fitSize=function(oe,q){return nx($,oe,q)},$.fitWidth=function(oe,q){return rx($,oe,q)},$.fitHeight=function(oe,q){return ix($,oe,q)},$}function hx(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}hx.invert=function(e,t){var i=t,a=25,c;do{var p=i*i,d=p*p;i-=c=(i*(1.007226+p*(.015085+d*(-.044475+.028874*p-.005916*d)))-t)/(1.007226+p*(.015085*3+d*(-.044475*7+.028874*9*p-.005916*11*d)))}while($n(c)>dn&&--a>0);return[e/(.8707+(p=i*i)*(-.131979+p*(-.013791+p*p*p*(.003971-.001529*p)))),i]};function oL(){return ua(hx).scale(175.295)}function dx(e,t){return[on(t)*Yt(e),Yt(t)]}dx.invert=Yf(lo);function sL(){return ua(dx).scale(249.5).clipAngle(90+dn)}function fx(e,t){var i=on(t),a=1+on(e)*i;return[i*Yt(e)/a,Yt(t)/a]}fx.invert=Yf(function(e){return 2*Uh(e)});function aL(){return ua(fx).scale(250).clipAngle(142)}function px(e,t){return[fg(J1((Ur+t)/2)),-e]}px.invert=function(e,t){return[-t,2*Uh(rI(e))-Ur]};function lL(){var e=BI(px),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const uL=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:jI,geoAlbersUsa:XO,geoArea:eO,geoAzimuthalEqualArea:qO,geoAzimuthalEqualAreaRaw:ax,geoAzimuthalEquidistant:KO,geoAzimuthalEquidistantRaw:lx,geoBounds:iO,geoCentroid:cO,geoCircle:hO,geoClipAntimeridian:S_,geoClipCircle:wI,geoClipExtent:vO,geoClipRectangle:iy,geoConicConformal:JO,geoConicConformalRaw:NI,geoConicEqualArea:Rg,geoConicEqualAreaRaw:FI,geoConicEquidistant:eL,geoConicEquidistantRaw:UI,geoContains:TO,geoDistance:Cg,geoEqualEarth:nL,geoEqualEarthRaw:ux,geoEquirectangular:QO,geoEquirectangularRaw:Df,geoGnomonic:rL,geoGnomonicRaw:cx,geoGraticule:EI,geoGraticule10:CO,geoIdentity:iL,geoInterpolate:IO,geoLength:bI,geoMercator:YO,geoMercatorRaw:Jf,geoNaturalEarth1:oL,geoNaturalEarth1Raw:hx,geoOrthographic:sL,geoOrthographicRaw:dx,geoPath:DO,geoProjection:ua,geoProjectionMutator:ox,geoRotation:mI,geoStereographic:aL,geoStereographicRaw:fx,geoStream:ks,geoTransform:BO,geoTransverseMercator:lL,geoTransverseMercatorRaw:px},Symbol.toStringTag,{value:"Module"})),cL=$_(uL);var au=2*Math.PI*6378137/2,hL=Math.PI/180;function $I(e){return e=e||256,2*Math.PI*6378137/e}function dL(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function F_(e,t,i){var a=VI(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function VI(e,t,i){var a=t,c=bx(e[0]),p=wx(e[1]),d=Math.sin(p*hL),u=Math.pow(2,a),b=u*(c/360+.5),C=u*(.5-.25*Math.log((1+d)/(1-d))/Math.PI);return ic([b,C,a],i)}function fL(e,t=6){var i=e[0],a=e[1],c=e[2],p=e[3],d=(i-c)/2+c,u=(a-p)/2+p;return t!=null&&(d=Number(d.toFixed(t)),u=Number(u.toFixed(t))),[d,u]}function Lg(e,t,i={enable:!0,decimal:1}){e=sy(e,t);var a=e[0],c=e[1],p=a*au/180,d=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return d=d*au/180,i.enable&&(p=Number(p.toFixed(i.decimal)),d=Number(d.toFixed(i.decimal))),[p,d]}function j_(e,t=6){var i=e[0],a=e[1],c=i/au*180,p=a/au*180;return p=180/Math.PI*(2*Math.atan(Math.exp(p*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),p=Number(p.toFixed(t))),[c,p]}function mx(e,t,i){var a=e[0],c=e[1],p=_x(t,i),d=(a+au)/p,u=(c+au)/p;return[d,u,t]}function GI(e,t,i){e=sy(e,i);var a=Lg(e),c=mx(a,t);return gx(c)}function pL(e,t,i){if(e=sy(e,i),t===0)return[0,0,0];var a=GI(e,t);return WI(a)}function mL(e,t){if(t===0)return[0,0,0];var i=mx(e,t);return gx(i)}function D_(e,t,i=1){var a=e[0],c=e[1],p=e[2],d=_x(p,t),u=a*d-au,b=c*d-au;return i!=null&&(u=Number(u.toFixed(i)),b=Number(b.toFixed(i))),[u,b]}function gx(e,t,i){t=t||256;var a=e[0],c=e[1],p=e[2];if(p===0)return[0,0,0];vx(p);var d=Math.ceil(a/t)-1,u=Math.ceil(c/t)-1;return d<0&&(d=0),u<0&&(u=0),[d,u,p]}function yx(e,t,i){ic(e,i),t=t||256;var a=e[0],c=e[1],p=e[2],d=D_([a*t,c*t,p]),u=D_([(a+1)*t,(c+1)*t,p]);return[d[0],d[1],u[0],u[1]]}function HI(e,t){ic(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var p=yx([i,a,c]),d=p[0],u=p[1],b=p[2],C=p[3],A=j_([d,u,c]),w=j_([b,C,c]);return[A[0],A[1],w[0],w[1]]}function gL(e){var t=Qf(e);return yx(t)}function yL(e){var t=Qf(e);return HI(t)}function WI(e,t){ic(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var p=i,d=Math.pow(2,c)-1-a;return[p,d,c]}function Qf(e){var t=e[0],i=e[1],a=e[2],c=t,p=Math.pow(2,a)-i-1;return[c,p,a]}function vL(e){var t=Qf(e);return ZI(t)}function ZI(e,t){ic(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var p="";return a=Math.pow(2,c)-1-a,xx(c,0,-1).map(function(d){var u=0,b=1<<d-1;i&b&&(u+=1),a&b&&(u+=2),p=p.concat(u)}),p}function _L(e){var t=XI(e);return Qf(t)}function XI(e){var t=0,i=0,a=e.length;return xx(a,0,-1).map(function(c){var p=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=p;break;case 2:i+=p;break;case 3:t+=p,i+=p;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function xL(e){var t=Lg([e[0],e[1]]),i=Lg([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function ic(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=vx(c),e=qI(e),e}function qI(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function vx(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function sy(e,t){if(t===!1)return e;var i=bx(e[0]),a=wx(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function _x(e,t){return $I(t)/Math.pow(2,e)}function xx(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),p=0;p<a;p++,e+=i)c[p]=e;return c}function wL(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(p){p[0]<t&&(t=p[0]),p[1]<i&&(i=p[1]),p[2]>a&&(a=p[2]),p[3]>c&&(c=p[3])}),[t,i,a,c]}}function bL(e){try{return ic(e),!0}catch{return!1}}function wx(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function bx(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function SL(e){var t=F_([e[0],e[1]],32),i=F_([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=EL(a);if(c===0)return[0,0,0];var p=a[0]>>>32-c,d=a[1]>>>32-c;return[p,d,c]}function EL(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const TL=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:fL,bboxToMeters:xL,bboxToTile:SL,googleToBBox:yL,googleToBBoxMeters:gL,googleToQuadkey:vL,googleToTile:Qf,hash:dL,initialResolution:$I,latitude:wx,lngLatToGoogle:pL,lngLatToMeters:Lg,lngLatToTile:GI,longitude:bx,maxBBox:wL,metersToLngLat:j_,metersToPixels:mx,metersToTile:mL,pixelsToMeters:D_,pixelsToTile:gx,pointToTile:F_,pointToTileFraction:VI,quadkeyToGoogle:XI,quadkeyToTile:_L,range:xx,resolution:_x,tileToBBox:HI,tileToBBoxMeters:yx,tileToGoogle:WI,tileToQuadkey:ZI,validTile:bL,validateLngLat:sy,validateTile:ic,validateZoom:vx,wrapTile:qI},Symbol.toStringTag,{value:"Module"})),CL=$_(TL);var ay={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ay.read=function(e,t,i,a,c){var p,d,u=c*8-a-1,b=(1<<u)-1,C=b>>1,A=-7,w=i?c-1:0,T=i?-1:1,L=e[t+w];for(w+=T,p=L&(1<<-A)-1,L>>=-A,A+=u;A>0;p=p*256+e[t+w],w+=T,A-=8);for(d=p&(1<<-A)-1,p>>=-A,A+=a;A>0;d=d*256+e[t+w],w+=T,A-=8);if(p===0)p=1-C;else{if(p===b)return d?NaN:(L?-1:1)*(1/0);d=d+Math.pow(2,a),p=p-C}return(L?-1:1)*d*Math.pow(2,p-a)};ay.write=function(e,t,i,a,c,p){var d,u,b,C=p*8-c-1,A=(1<<C)-1,w=A>>1,T=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=a?0:p-1,U=a?1:-1,F=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,d=A):(d=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-d))<1&&(d--,b*=2),d+w>=1?t+=T/b:t+=T*Math.pow(2,1-w),t*b>=2&&(d++,b/=2),d+w>=A?(u=0,d=A):d+w>=1?(u=(t*b-1)*Math.pow(2,c),d=d+w):(u=t*Math.pow(2,w-1)*Math.pow(2,c),d=0));c>=8;e[i+L]=u&255,L+=U,u/=256,c-=8);for(d=d<<c|u,C+=c;C>0;e[i+L]=d&255,L+=U,d/=256,C-=8);e[i+L-U]|=F*128};var IL=Xn,fm=ay;function Xn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Xn.Varint=0;Xn.Fixed64=1;Xn.Bytes=2;Xn.Fixed32=5;var B_=65536*65536,SS=1/B_,AL=12,KI=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Xn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,p=this.pos;this.type=a&7,e(c,t,this),this.pos===p&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=pm(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=TS(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=pm(this.buf,this.pos)+pm(this.buf,this.pos+4)*B_;return this.pos+=8,e},readSFixed64:function(){var e=pm(this.buf,this.pos)+TS(this.buf,this.pos+4)*B_;return this.pos+=8,e},readFloat:function(){var e=fm.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=fm.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,PL(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=AL&&KI?VL(this.buf,t,e):$L(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Xn.Bytes)return e.push(this.readVarint(t));var i=Fa(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSVarint());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Xn.Bytes)return e.push(this.readBoolean());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFloat());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Xn.Bytes)return e.push(this.readDouble());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFixed32());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSFixed32());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFixed64());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSFixed64());var t=Fa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Xn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Xn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Xn.Fixed32)this.pos+=4;else if(t===Xn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Zc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Zc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Zc(this.buf,e&-1,this.pos),Zc(this.buf,Math.floor(e*SS),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Zc(this.buf,e&-1,this.pos),Zc(this.buf,Math.floor(e*SS),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){kL(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=GL(this.buf,e,this.pos);var i=this.pos-t;i>=128&&ES(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),fm.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),fm.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&ES(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,Xn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,RL,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,OL,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,jL,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,LL,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,FL,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,DL,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,BL,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,NL,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,UL,t)},writeBytesField:function(e,t){this.writeTag(e,Xn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Xn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Xn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Xn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function PL(e,t,i){var a=i.buf,c,p;if(p=a[i.pos++],c=(p&112)>>4,p<128||(p=a[i.pos++],c|=(p&127)<<3,p<128)||(p=a[i.pos++],c|=(p&127)<<10,p<128)||(p=a[i.pos++],c|=(p&127)<<17,p<128)||(p=a[i.pos++],c|=(p&127)<<24,p<128)||(p=a[i.pos++],c|=(p&1)<<31,p<128))return Wc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Fa(e){return e.type===Xn.Bytes?e.readVarint()+e.pos:e.pos+1}function Wc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function kL(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),ML(i,a,t),zL(a,t)}function ML(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function zL(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function ES(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function RL(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function OL(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function LL(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function FL(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function jL(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function DL(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function BL(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function NL(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function UL(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function pm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Zc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function TS(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function $L(e,t,i){for(var a="",c=t;c<i;){var p=e[c],d=null,u=p>239?4:p>223?3:p>191?2:1;if(c+u>i)break;var b,C,A;u===1?p<128&&(d=p):u===2?(b=e[c+1],(b&192)===128&&(d=(p&31)<<6|b&63,d<=127&&(d=null))):u===3?(b=e[c+1],C=e[c+2],(b&192)===128&&(C&192)===128&&(d=(p&15)<<12|(b&63)<<6|C&63,(d<=2047||d>=55296&&d<=57343)&&(d=null))):u===4&&(b=e[c+1],C=e[c+2],A=e[c+3],(b&192)===128&&(C&192)===128&&(A&192)===128&&(d=(p&15)<<18|(b&63)<<12|(C&63)<<6|A&63,(d<=65535||d>=1114112)&&(d=null))),d===null?(d=65533,u=1):d>65535&&(d-=65536,a+=String.fromCharCode(d>>>10&1023|55296),d=56320|d&1023),a+=String.fromCharCode(d),c+=u}return a}function VL(e,t,i){return KI.decode(e.subarray(t,i))}function GL(e,t,i){for(var a=0,c,p;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(p)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,p=c;continue}else c=p-55296<<10|c-56320|65536,p=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):p=c;continue}else p&&(e[i++]=239,e[i++]=191,e[i++]=189,p=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var Sx={exports:{}},YI=function(t,i){return function(){for(var c=new Array(arguments.length),p=0;p<c.length;p++)c[p]=arguments[p];return t.apply(i,c)}},HL=YI,oc=Object.prototype.toString;function Ex(e){return oc.call(e)==="[object Array]"}function N_(e){return typeof e>"u"}function WL(e){return e!==null&&!N_(e)&&e.constructor!==null&&!N_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function ZL(e){return oc.call(e)==="[object ArrayBuffer]"}function XL(e){return typeof FormData<"u"&&e instanceof FormData}function qL(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function KL(e){return typeof e=="string"}function YL(e){return typeof e=="number"}function JI(e){return e!==null&&typeof e=="object"}function Rm(e){if(oc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function JL(e){return oc.call(e)==="[object Date]"}function QL(e){return oc.call(e)==="[object File]"}function eF(e){return oc.call(e)==="[object Blob]"}function QI(e){return oc.call(e)==="[object Function]"}function tF(e){return JI(e)&&QI(e.pipe)}function nF(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function rF(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function iF(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Tx(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Ex(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function U_(){var e={};function t(c,p){Rm(e[p])&&Rm(c)?e[p]=U_(e[p],c):Rm(c)?e[p]=U_({},c):Ex(c)?e[p]=c.slice():e[p]=c}for(var i=0,a=arguments.length;i<a;i++)Tx(arguments[i],t);return e}function oF(e,t,i){return Tx(t,function(c,p){i&&typeof c=="function"?e[p]=HL(c,i):e[p]=c}),e}function sF(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Zo={isArray:Ex,isArrayBuffer:ZL,isBuffer:WL,isFormData:XL,isArrayBufferView:qL,isString:KL,isNumber:YL,isObject:JI,isPlainObject:Rm,isUndefined:N_,isDate:JL,isFile:QL,isBlob:eF,isFunction:QI,isStream:tF,isURLSearchParams:nF,isStandardBrowserEnv:iF,forEach:Tx,merge:U_,extend:oF,trim:rF,stripBOM:sF},Xc=Zo;function CS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var eA=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(Xc.isURLSearchParams(i))c=i.toString();else{var p=[];Xc.forEach(i,function(b,C){b===null||typeof b>"u"||(Xc.isArray(b)?C=C+"[]":b=[b],Xc.forEach(b,function(w){Xc.isDate(w)?w=w.toISOString():Xc.isObject(w)&&(w=JSON.stringify(w)),p.push(CS(C)+"="+CS(w))}))}),c=p.join("&")}if(c){var d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},aF=Zo;function ly(){this.handlers=[]}ly.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};ly.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};ly.prototype.forEach=function(t){aF.forEach(this.handlers,function(a){a!==null&&t(a)})};var lF=ly,uF=Zo,cF=function(t,i){uF.forEach(t,function(c,p){p!==i&&p.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[p])})},tA=function(t,i,a,c,p){return t.config=i,a&&(t.code=a),t.request=c,t.response=p,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},D0,IS;function nA(){if(IS)return D0;IS=1;var e=tA;return D0=function(i,a,c,p,d){var u=new Error(i);return e(u,a,c,p,d)},D0}var B0,AS;function hF(){if(AS)return B0;AS=1;var e=nA();return B0=function(i,a,c){var p=c.config.validateStatus;!c.status||!p||p(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},B0}var N0,PS;function dF(){if(PS)return N0;PS=1;var e=Zo;return N0=e.isStandardBrowserEnv()?function(){return{write:function(a,c,p,d,u,b){var C=[];C.push(a+"="+encodeURIComponent(c)),e.isNumber(p)&&C.push("expires="+new Date(p).toGMTString()),e.isString(d)&&C.push("path="+d),e.isString(u)&&C.push("domain="+u),b===!0&&C.push("secure"),document.cookie=C.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),N0}var U0,kS;function fF(){return kS||(kS=1,U0=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),U0}var $0,MS;function pF(){return MS||(MS=1,$0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),$0}var V0,zS;function mF(){if(zS)return V0;zS=1;var e=fF(),t=pF();return V0=function(a,c){return a&&!e(c)?t(a,c):c},V0}var G0,RS;function gF(){if(RS)return G0;RS=1;var e=Zo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return G0=function(a){var c={},p,d,u;return a&&e.forEach(a.split(`
`),function(C){if(u=C.indexOf(":"),p=e.trim(C.substr(0,u)).toLowerCase(),d=e.trim(C.substr(u+1)),p){if(c[p]&&t.indexOf(p)>=0)return;p==="set-cookie"?c[p]=(c[p]?c[p]:[]).concat([d]):c[p]=c[p]?c[p]+", "+d:d}}),c},G0}var H0,OS;function yF(){if(OS)return H0;OS=1;var e=Zo;return H0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function p(d){var u=d;return i&&(a.setAttribute("href",u),u=a.href),a.setAttribute("href",u),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=p(window.location.href),function(u){var b=e.isString(u)?p(u):u;return b.protocol===c.protocol&&b.host===c.host}}():function(){return function(){return!0}}(),H0}var W0,LS;function FS(){if(LS)return W0;LS=1;var e=Zo,t=hF(),i=dF(),a=eA,c=mF(),p=gF(),d=yF(),u=nA();return W0=function(C){return new Promise(function(w,T){var L=C.data,U=C.headers,F=C.responseType;e.isFormData(L)&&delete U["Content-Type"];var ce=new XMLHttpRequest;if(C.auth){var K=C.auth.username||"",Z=C.auth.password?unescape(encodeURIComponent(C.auth.password)):"";U.Authorization="Basic "+btoa(K+":"+Z)}var $=c(C.baseURL,C.url);ce.open(C.method.toUpperCase(),a($,C.params,C.paramsSerializer),!0),ce.timeout=C.timeout;function oe(){if(ce){var V="getAllResponseHeaders"in ce?p(ce.getAllResponseHeaders()):null,E=!F||F==="text"||F==="json"?ce.responseText:ce.response,j={data:E,status:ce.status,statusText:ce.statusText,headers:V,config:C,request:ce};t(w,T,j),ce=null}}if("onloadend"in ce?ce.onloadend=oe:ce.onreadystatechange=function(){!ce||ce.readyState!==4||ce.status===0&&!(ce.responseURL&&ce.responseURL.indexOf("file:")===0)||setTimeout(oe)},ce.onabort=function(){ce&&(T(u("Request aborted",C,"ECONNABORTED",ce)),ce=null)},ce.onerror=function(){T(u("Network Error",C,null,ce)),ce=null},ce.ontimeout=function(){var E="timeout of "+C.timeout+"ms exceeded";C.timeoutErrorMessage&&(E=C.timeoutErrorMessage),T(u(E,C,C.transitional&&C.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ce)),ce=null},e.isStandardBrowserEnv()){var q=(C.withCredentials||d($))&&C.xsrfCookieName?i.read(C.xsrfCookieName):void 0;q&&(U[C.xsrfHeaderName]=q)}"setRequestHeader"in ce&&e.forEach(U,function(E,j){typeof L>"u"&&j.toLowerCase()==="content-type"?delete U[j]:ce.setRequestHeader(j,E)}),e.isUndefined(C.withCredentials)||(ce.withCredentials=!!C.withCredentials),F&&F!=="json"&&(ce.responseType=C.responseType),typeof C.onDownloadProgress=="function"&&ce.addEventListener("progress",C.onDownloadProgress),typeof C.onUploadProgress=="function"&&ce.upload&&ce.upload.addEventListener("progress",C.onUploadProgress),C.cancelToken&&C.cancelToken.promise.then(function(E){ce&&(ce.abort(),T(E),ce=null)}),L||(L=null),ce.send(L)})},W0}var Ii=Zo,jS=cF,vF=tA,_F={"Content-Type":"application/x-www-form-urlencoded"};function DS(e,t){!Ii.isUndefined(e)&&Ii.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function xF(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=FS()),e}function wF(e,t,i){if(Ii.isString(e))try{return(t||JSON.parse)(e),Ii.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var uy={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:xF(),transformRequest:[function(t,i){return jS(i,"Accept"),jS(i,"Content-Type"),Ii.isFormData(t)||Ii.isArrayBuffer(t)||Ii.isBuffer(t)||Ii.isStream(t)||Ii.isFile(t)||Ii.isBlob(t)?t:Ii.isArrayBufferView(t)?t.buffer:Ii.isURLSearchParams(t)?(DS(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ii.isObject(t)||i&&i["Content-Type"]==="application/json"?(DS(i,"application/json"),wF(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,p=!a&&this.responseType==="json";if(p||c&&Ii.isString(t)&&t.length)try{return JSON.parse(t)}catch(d){if(p)throw d.name==="SyntaxError"?vF(d,this,"E_JSON_PARSE"):d}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};uy.headers={common:{Accept:"application/json, text/plain, */*"}};Ii.forEach(["delete","get","head"],function(t){uy.headers[t]={}});Ii.forEach(["post","put","patch"],function(t){uy.headers[t]=Ii.merge(_F)});var Cx=uy,bF=Zo,SF=Cx,EF=function(t,i,a){var c=this||SF;return bF.forEach(a,function(d){t=d.call(c,t,i)}),t},Z0,BS;function rA(){return BS||(BS=1,Z0=function(t){return!!(t&&t.__CANCEL__)}),Z0}var NS=Zo,X0=EF,TF=rA(),CF=Cx;function q0(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var IF=function(t){q0(t),t.headers=t.headers||{},t.data=X0.call(t,t.data,t.headers,t.transformRequest),t.headers=NS.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),NS.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||CF.adapter;return i(t).then(function(c){return q0(t),c.data=X0.call(t,c.data,c.headers,t.transformResponse),c},function(c){return TF(c)||(q0(t),c&&c.response&&(c.response.data=X0.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Vi=Zo,iA=function(t,i){i=i||{};var a={},c=["url","method","data"],p=["headers","auth","proxy","params"],d=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function b(T,L){return Vi.isPlainObject(T)&&Vi.isPlainObject(L)?Vi.merge(T,L):Vi.isPlainObject(L)?Vi.merge({},L):Vi.isArray(L)?L.slice():L}function C(T){Vi.isUndefined(i[T])?Vi.isUndefined(t[T])||(a[T]=b(void 0,t[T])):a[T]=b(t[T],i[T])}Vi.forEach(c,function(L){Vi.isUndefined(i[L])||(a[L]=b(void 0,i[L]))}),Vi.forEach(p,C),Vi.forEach(d,function(L){Vi.isUndefined(i[L])?Vi.isUndefined(t[L])||(a[L]=b(void 0,t[L])):a[L]=b(void 0,i[L])}),Vi.forEach(u,function(L){L in i?a[L]=b(t[L],i[L]):L in t&&(a[L]=b(void 0,t[L]))});var A=c.concat(p).concat(d).concat(u),w=Object.keys(t).concat(Object.keys(i)).filter(function(L){return A.indexOf(L)===-1});return Vi.forEach(w,C),a};const AF="axios",PF="0.21.4",kF="Promise based HTTP client for the browser and node.js",MF="index.js",zF={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},RF={type:"git",url:"https://github.com/axios/axios.git"},OF=["xhr","http","ajax","promise","node"],LF="Matt Zabriskie",FF="MIT",jF={url:"https://github.com/axios/axios/issues"},DF="https://axios-http.com",BF={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},NF={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},UF="dist/axios.min.js",$F="dist/axios.min.js",VF="./index.d.ts",GF={"follow-redirects":"^1.14.0"},HF=[{path:"./dist/axios.min.js",threshold:"5kB"}],WF={name:AF,version:PF,description:kF,main:MF,scripts:zF,repository:RF,keywords:OF,author:LF,license:FF,bugs:jF,homepage:DF,devDependencies:BF,browser:NF,jsdelivr:UF,unpkg:$F,typings:VF,dependencies:GF,bundlesize:HF};var oA=WF,Ix={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Ix[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var US={},ZF=oA.version.split(".");function sA(e,t){for(var i=t?t.split("."):ZF,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}Ix.transitional=function(t,i,a){var c=i&&sA(i);function p(d,u){return"[Axios v"+oA.version+"] Transitional option '"+d+"'"+u+(a?". "+a:"")}return function(d,u,b){if(t===!1)throw new Error(p(u," has been removed in "+i));return c&&!US[u]&&(US[u]=!0,console.warn(p(u," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(d,u,b):!0}};function XF(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var p=a[c],d=t[p];if(d){var u=e[p],b=u===void 0||d(u,p,e);if(b!==!0)throw new TypeError("option "+p+" must be "+b);continue}if(i!==!0)throw Error("Unknown option "+p)}}var qF={isOlderVersion:sA,assertOptions:XF,validators:Ix},aA=Zo,KF=eA,$S=lF,VS=IF,cy=iA,lA=qF,qc=lA.validators;function ep(e){this.defaults=e,this.interceptors={request:new $S,response:new $S}}ep.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=cy(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&lA.assertOptions(i,{silentJSONParsing:qc.transitional(qc.boolean,"1.0.0"),forcedJSONParsing:qc.transitional(qc.boolean,"1.0.0"),clarifyTimeoutError:qc.transitional(qc.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(c=c&&T.synchronous,a.unshift(T.fulfilled,T.rejected))});var p=[];this.interceptors.response.forEach(function(T){p.push(T.fulfilled,T.rejected)});var d;if(!c){var u=[VS,void 0];for(Array.prototype.unshift.apply(u,a),u=u.concat(p),d=Promise.resolve(t);u.length;)d=d.then(u.shift(),u.shift());return d}for(var b=t;a.length;){var C=a.shift(),A=a.shift();try{b=C(b)}catch(w){A(w);break}}try{d=VS(b)}catch(w){return Promise.reject(w)}for(;p.length;)d=d.then(p.shift(),p.shift());return d};ep.prototype.getUri=function(t){return t=cy(this.defaults,t),KF(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};aA.forEach(["delete","get","head","options"],function(t){ep.prototype[t]=function(i,a){return this.request(cy(a||{},{method:t,url:i,data:(a||{}).data}))}});aA.forEach(["post","put","patch"],function(t){ep.prototype[t]=function(i,a,c){return this.request(cy(c||{},{method:t,url:i,data:a}))}});var YF=ep,K0,GS;function uA(){if(GS)return K0;GS=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,K0=e,K0}var Y0,HS;function JF(){if(HS)return Y0;HS=1;var e=uA();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(d){a=d});var c=this;i(function(d){c.reason||(c.reason=new e(d),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(d){a=d});return{token:c,cancel:a}},Y0=t,Y0}var J0,WS;function QF(){return WS||(WS=1,J0=function(t){return function(a){return t.apply(null,a)}}),J0}var Q0,ZS;function e5(){return ZS||(ZS=1,Q0=function(t){return typeof t=="object"&&t.isAxiosError===!0}),Q0}var XS=Zo,t5=YI,Om=YF,n5=iA,r5=Cx;function cA(e){var t=new Om(e),i=t5(Om.prototype.request,t);return XS.extend(i,Om.prototype,t),XS.extend(i,t),i}var js=cA(r5);js.Axios=Om;js.create=function(t){return cA(n5(js.defaults,t))};js.Cancel=uA();js.CancelToken=JF();js.isCancel=rA();js.all=function(t){return Promise.all(t)};js.spread=QF();js.isAxiosError=e5();Sx.exports=js;Sx.exports.default=js;var i5=Sx.exports,o5=i5;const s5={},a5=Object.freeze(Object.defineProperty({__proto__:null,default:s5},Symbol.toStringTag,{value:"Module"})),l5=$_(a5);var hy={},u5=bh;function bh(e,t){this.x=e,this.y=t}bh.prototype={clone:function(){return new bh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),p=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};bh.convert=function(e){return e instanceof bh?e:Array.isArray(e)?new bh(e[0],e[1]):e};var c5=u5,hA=Lh;function Lh(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(h5,this,t)}function h5(e,t,i){e==1?t.id=i.readVarint():e==2?d5(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function d5(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}Lh.types=["Unknown","Point","LineString","Polygon"];Lh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,p=0,d=[],u;e.pos<t;){if(a<=0){var b=e.readVarint();i=b&7,a=b>>3}if(a--,i===1||i===2)c+=e.readSVarint(),p+=e.readSVarint(),i===1&&(u&&d.push(u),u=[]),u.push(new c5(c,p));else if(i===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+i)}return u&&d.push(u),d};Lh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,p=0,d=1/0,u=-1/0,b=1/0,C=-1/0;e.pos<t;){if(a<=0){var A=e.readVarint();i=A&7,a=A>>3}if(a--,i===1||i===2)c+=e.readSVarint(),p+=e.readSVarint(),c<d&&(d=c),c>u&&(u=c),p<b&&(b=p),p>C&&(C=p);else if(i!==7)throw new Error("unknown command "+i)}return[d,b,u,C]};Lh.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,p=this.extent*t,d=this.loadGeometry(),u=Lh.types[this.type],b,C;function A(L){for(var U=0;U<L.length;U++){var F=L[U],ce=180-(F.y+p)*360/a;L[U]=[(F.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(ce*Math.PI/180))-90]}}switch(this.type){case 1:var w=[];for(b=0;b<d.length;b++)w[b]=d[b][0];d=w,A(d);break;case 2:for(b=0;b<d.length;b++)A(d[b]);break;case 3:for(d=f5(d),b=0;b<d.length;b++)for(C=0;C<d[b].length;C++)A(d[b][C]);break}d.length===1?d=d[0]:u="Multi"+u;var T={type:"Feature",geometry:{type:u,coordinates:d},properties:this.properties};return"id"in this&&(T.id=this.id),T};function f5(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,p=0;p<t;p++){var d=p5(e[p]);d!==0&&(c===void 0&&(c=d<0),c===d<0?(a&&i.push(a),a=[e[p]]):a.push(e[p]))}return a&&i.push(a),i}function p5(e){for(var t=0,i=0,a=e.length,c=a-1,p,d;i<a;c=i++)p=e[i],d=e[c],t+=(d.x-p.x)*(p.y+d.y);return t}var m5=hA,dA=fA;function fA(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(g5,this,t),this.length=this._features.length}function g5(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(y5(i))}function y5(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}fA.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new m5(this._pbf,t,this.extent,this._keys,this._values)};var v5=dA,_5=x5;function x5(e,t){this.layers=e.readFields(w5,{},t)}function w5(e,t,i){if(e===3){var a=new v5(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}hy.VectorTile=_5;hy.VectorTileFeature=hA;hy.VectorTileLayer=dA;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=cL,i=CL,a=IL,c=o5,p=l5,d=hy;function u(Z){return Z&&typeof Z=="object"&&"default"in Z?Z:{default:Z}}var b=u(a),C=u(c),A=u(p),w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof $l<"u"?$l:typeof self<"u"?self:{};function T(Z){var $={exports:{}};return Z($,$.exports),$.exports}var L=T(function(Z,$){(function(q,V){Z.exports=V(C.default)})(w,function(oe){return function(q){var V={};function E(j){if(V[j])return V[j].exports;var D=V[j]={i:j,l:!1,exports:{}};return q[j].call(D.exports,D,D.exports,E),D.l=!0,D.exports}return E.m=q,E.c=V,E.d=function(j,D,ee){E.o(j,D)||Object.defineProperty(j,D,{enumerable:!0,get:ee})},E.r=function(j){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})},E.t=function(j,D){if(D&1&&(j=E(j)),D&8||D&4&&typeof j=="object"&&j&&j.__esModule)return j;var ee=Object.create(null);if(E.r(ee),Object.defineProperty(ee,"default",{enumerable:!0,value:j}),D&2&&typeof j!="string")for(var W in j)E.d(ee,W,(function(ve){return j[ve]}).bind(null,W));return ee},E.n=function(j){var D=j&&j.__esModule?function(){return j.default}:function(){return j};return E.d(D,"a",D),D},E.o=function(j,D){return Object.prototype.hasOwnProperty.call(j,D)},E.p="",E(E.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(q,V,E){E.r(V),E.d(V,"CacheControl",function(){return Ee}),E.d(V,"parse",function(){return De}),E.d(V,"format",function(){return Ae}),E("./node_modules/core-js/modules/es6.array.from.js"),E("./node_modules/core-js/modules/es6.function.name.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/web.dom.iterable.js"),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.regexp.split.js"),E("./node_modules/core-js/modules/es6.number.is-finite.js");function j(Oe,We){return _e(Oe)||ve(Oe,We)||ee(Oe,We)||D()}function D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(Oe,We){if(Oe){if(typeof Oe=="string")return W(Oe,We);var He=Object.prototype.toString.call(Oe).slice(8,-1);if(He==="Object"&&Oe.constructor&&(He=Oe.constructor.name),He==="Map"||He==="Set")return Array.from(Oe);if(He==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(He))return W(Oe,We)}}function W(Oe,We){(We==null||We>Oe.length)&&(We=Oe.length);for(var He=0,nt=new Array(We);He<We;He++)nt[He]=Oe[He];return nt}function ve(Oe,We){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Oe)))){var He=[],nt=!0,dt=!1,wt=void 0;try{for(var Rt=Oe[Symbol.iterator](),gt;!(nt=(gt=Rt.next()).done)&&(He.push(gt.value),!(We&&He.length===We));nt=!0);}catch(St){dt=!0,wt=St}finally{try{!nt&&Rt.return!=null&&Rt.return()}finally{if(dt)throw wt}}return He}}function _e(Oe){if(Array.isArray(Oe))return Oe}function de(Oe,We){if(!(Oe instanceof We))throw new TypeError("Cannot call a class as a function")}function ie(Oe,We){for(var He=0;He<We.length;He++){var nt=We[He];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(Oe,nt.key,nt)}}function le(Oe,We,He){return We&&ie(Oe.prototype,We),He&&ie(Oe,He),Oe}var J=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,te={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function he(Oe){return Oe===null}function be(Oe){if(!Oe)return null;var We=parseInt(Oe,10);return!Number.isFinite(We)||We<0?null:We}var Ee=function(){function Oe(){de(this,Oe),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return le(Oe,[{key:"parse",value:function(He){if(!He||He.length===0)return this;var nt={},dt=He.match(J)||[];return Array.prototype.forEach.call(dt,function(wt){var Rt=wt.split("=",2),gt=j(Rt,1),St=gt[0],Vt=null;Rt.length>1&&(Vt=Rt[1].trim()),nt[St.toLowerCase()]=Vt}),this.maxAge=be(nt[te.maxAge]),this.sharedMaxAge=be(nt[te.sharedMaxAge]),this.maxStale=he(nt[te.maxStale]),this.maxStaleDuration=be(nt[te.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=be(nt[te.minFresh]),this.immutable=he(nt[te.immutable]),this.mustRevalidate=he(nt[te.mustRevalidate]),this.noCache=he(nt[te.noCache]),this.noStore=he(nt[te.noStore]),this.noTransform=he(nt[te.noTransform]),this.onlyIfCached=he(nt[te.onlyIfCached]),this.private=he(nt[te.private]),this.proxyRevalidate=he(nt[te.proxyRevalidate]),this.public=he(nt[te.public]),this}},{key:"format",value:function(){var He=[];return this.maxAge&&He.push("".concat(te.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&He.push("".concat(te.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?He.push("".concat(te.maxStale,"=").concat(this.maxStaleDuration)):He.push(te.maxStale)),this.minFresh&&He.push("".concat(te.minFresh,"=").concat(this.minFresh)),this.immutable&&He.push(te.immutable),this.mustRevalidate&&He.push(te.mustRevalidate),this.noCache&&He.push(te.noCache),this.noStore&&He.push(te.noStore),this.noTransform&&He.push(te.noTransform),this.onlyIfCached&&He.push(te.onlyIfCached),this.private&&He.push(te.private),this.proxyRevalidate&&He.push(te.proxyRevalidate),this.public&&He.push(te.public),He.join(", ")}}]),Oe}();function De(Oe){var We=new Ee;return We.parse(Oe)}function Ae(Oe){return Oe instanceof Ee?Oe.format():Ee.prototype.format.call(Oe)}V.default={CacheControl:Ee,parse:De,format:Ae}},"./node_modules/charenc/charenc.js":function(q,V){var E={utf8:{stringToBytes:function(j){return E.bin.stringToBytes(unescape(encodeURIComponent(j)))},bytesToString:function(j){return decodeURIComponent(escape(E.bin.bytesToString(j)))}},bin:{stringToBytes:function(j){for(var D=[],ee=0;ee<j.length;ee++)D.push(j.charCodeAt(ee)&255);return D},bytesToString:function(j){for(var D=[],ee=0;ee<j.length;ee++)D.push(String.fromCharCode(j[ee]));return D.join("")}}};q.exports=E},"./node_modules/core-js/modules/_a-function.js":function(q,V){q.exports=function(E){if(typeof E!="function")throw TypeError(E+" is not a function!");return E}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_wks.js")("unscopables"),D=Array.prototype;D[j]==null&&E("./node_modules/core-js/modules/_hide.js")(D,j,{}),q.exports=function(ee){D[j][ee]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_string-at.js")(!0);q.exports=function(D,ee,W){return ee+(W?j(D,ee).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_is-object.js");q.exports=function(D){if(!j(D))throw TypeError(D+" is not an object!");return D}},"./node_modules/core-js/modules/_array-includes.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_to-iobject.js"),D=E("./node_modules/core-js/modules/_to-length.js"),ee=E("./node_modules/core-js/modules/_to-absolute-index.js");q.exports=function(W){return function(ve,_e,de){var ie=j(ve),le=D(ie.length),J=ee(de,le),te;if(W&&_e!=_e){for(;le>J;)if(te=ie[J++],te!=te)return!0}else for(;le>J;J++)if((W||J in ie)&&ie[J]===_e)return W||J||0;return!W&&-1}}},"./node_modules/core-js/modules/_bind.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_a-function.js"),D=E("./node_modules/core-js/modules/_is-object.js"),ee=E("./node_modules/core-js/modules/_invoke.js"),W=[].slice,ve={},_e=function(de,ie,le){if(!(ie in ve)){for(var J=[],te=0;te<ie;te++)J[te]="a["+te+"]";ve[ie]=Function("F,a","return new F("+J.join(",")+")")}return ve[ie](de,le)};q.exports=Function.bind||function(ie){var le=j(this),J=W.call(arguments,1),te=function(){var he=J.concat(W.call(arguments));return this instanceof te?_e(le,he.length,he):ee(le,he,ie)};return D(le.prototype)&&(te.prototype=le.prototype),te}},"./node_modules/core-js/modules/_classof.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_cof.js"),D=E("./node_modules/core-js/modules/_wks.js")("toStringTag"),ee=j(function(){return arguments}())=="Arguments",W=function(ve,_e){try{return ve[_e]}catch{}};q.exports=function(ve){var _e,de,ie;return ve===void 0?"Undefined":ve===null?"Null":typeof(de=W(_e=Object(ve),D))=="string"?de:ee?j(_e):(ie=j(_e))=="Object"&&typeof _e.callee=="function"?"Arguments":ie}},"./node_modules/core-js/modules/_cof.js":function(q,V){var E={}.toString;q.exports=function(j){return E.call(j).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(q,V){var E=q.exports={version:"2.6.12"};typeof __e=="number"&&(__e=E)},"./node_modules/core-js/modules/_create-property.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js"),D=E("./node_modules/core-js/modules/_property-desc.js");q.exports=function(ee,W,ve){W in ee?j.f(ee,W,D(0,ve)):ee[W]=ve}},"./node_modules/core-js/modules/_ctx.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_a-function.js");q.exports=function(D,ee,W){if(j(D),ee===void 0)return D;switch(W){case 1:return function(ve){return D.call(ee,ve)};case 2:return function(ve,_e){return D.call(ee,ve,_e)};case 3:return function(ve,_e,de){return D.call(ee,ve,_e,de)}}return function(){return D.apply(ee,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(q,V){q.exports=function(E){if(E==null)throw TypeError("Can't call method on  "+E);return E}},"./node_modules/core-js/modules/_descriptors.js":function(q,V,E){q.exports=!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_is-object.js"),D=E("./node_modules/core-js/modules/_global.js").document,ee=j(D)&&j(D.createElement);q.exports=function(W){return ee?D.createElement(W):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(q,V){q.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_object-keys.js"),D=E("./node_modules/core-js/modules/_object-gops.js"),ee=E("./node_modules/core-js/modules/_object-pie.js");q.exports=function(W){var ve=j(W),_e=D.f;if(_e)for(var de=_e(W),ie=ee.f,le=0,J;de.length>le;)ie.call(W,J=de[le++])&&ve.push(J);return ve}},"./node_modules/core-js/modules/_export.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_global.js"),D=E("./node_modules/core-js/modules/_core.js"),ee=E("./node_modules/core-js/modules/_hide.js"),W=E("./node_modules/core-js/modules/_redefine.js"),ve=E("./node_modules/core-js/modules/_ctx.js"),_e="prototype",de=function(ie,le,J){var te=ie&de.F,he=ie&de.G,be=ie&de.S,Ee=ie&de.P,De=ie&de.B,Ae=he?j:be?j[le]||(j[le]={}):(j[le]||{})[_e],Oe=he?D:D[le]||(D[le]={}),We=Oe[_e]||(Oe[_e]={}),He,nt,dt,wt;he&&(J=le);for(He in J)nt=!te&&Ae&&Ae[He]!==void 0,dt=(nt?Ae:J)[He],wt=De&&nt?ve(dt,j):Ee&&typeof dt=="function"?ve(Function.call,dt):dt,Ae&&W(Ae,He,dt,ie&de.U),Oe[He]!=dt&&ee(Oe,He,wt),Ee&&We[He]!=dt&&(We[He]=dt)};j.core=D,de.F=1,de.G=2,de.S=4,de.P=8,de.B=16,de.W=32,de.U=64,de.R=128,q.exports=de},"./node_modules/core-js/modules/_fails-is-regexp.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_wks.js")("match");q.exports=function(D){var ee=/./;try{"/./"[D](ee)}catch{try{return ee[j]=!1,!"/./"[D](ee)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(q,V){q.exports=function(E){try{return!!E()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(q,V,E){E("./node_modules/core-js/modules/es6.regexp.exec.js");var j=E("./node_modules/core-js/modules/_redefine.js"),D=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_fails.js"),W=E("./node_modules/core-js/modules/_defined.js"),ve=E("./node_modules/core-js/modules/_wks.js"),_e=E("./node_modules/core-js/modules/_regexp-exec.js"),de=ve("species"),ie=!ee(function(){var J=/./;return J.exec=function(){var te=[];return te.groups={a:"7"},te},"".replace(J,"$<a>")!=="7"}),le=function(){var J=/(?:)/,te=J.exec;J.exec=function(){return te.apply(this,arguments)};var he="ab".split(J);return he.length===2&&he[0]==="a"&&he[1]==="b"}();q.exports=function(J,te,he){var be=ve(J),Ee=!ee(function(){var nt={};return nt[be]=function(){return 7},""[J](nt)!=7}),De=Ee?!ee(function(){var nt=!1,dt=/a/;return dt.exec=function(){return nt=!0,null},J==="split"&&(dt.constructor={},dt.constructor[de]=function(){return dt}),dt[be](""),!nt}):void 0;if(!Ee||!De||J==="replace"&&!ie||J==="split"&&!le){var Ae=/./[be],Oe=he(W,be,""[J],function(dt,wt,Rt,gt,St){return wt.exec===_e?Ee&&!St?{done:!0,value:Ae.call(wt,Rt,gt)}:{done:!0,value:dt.call(Rt,wt,gt)}:{done:!1}}),We=Oe[0],He=Oe[1];j(String.prototype,J,We),D(RegExp.prototype,be,te==2?function(nt,dt){return He.call(nt,this,dt)}:function(nt){return He.call(nt,this)})}}},"./node_modules/core-js/modules/_flags.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_an-object.js");q.exports=function(){var D=j(this),ee="";return D.global&&(ee+="g"),D.ignoreCase&&(ee+="i"),D.multiline&&(ee+="m"),D.unicode&&(ee+="u"),D.sticky&&(ee+="y"),ee}},"./node_modules/core-js/modules/_function-to-string.js":function(q,V,E){q.exports=E("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(q,V){var E=q.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=E)},"./node_modules/core-js/modules/_has.js":function(q,V){var E={}.hasOwnProperty;q.exports=function(j,D){return E.call(j,D)}},"./node_modules/core-js/modules/_hide.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js"),D=E("./node_modules/core-js/modules/_property-desc.js");q.exports=E("./node_modules/core-js/modules/_descriptors.js")?function(ee,W,ve){return j.f(ee,W,D(1,ve))}:function(ee,W,ve){return ee[W]=ve,ee}},"./node_modules/core-js/modules/_html.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_global.js").document;q.exports=j&&j.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(q,V,E){q.exports=!E("./node_modules/core-js/modules/_descriptors.js")&&!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(E("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(q,V){q.exports=function(E,j,D){var ee=D===void 0;switch(j.length){case 0:return ee?E():E.call(D);case 1:return ee?E(j[0]):E.call(D,j[0]);case 2:return ee?E(j[0],j[1]):E.call(D,j[0],j[1]);case 3:return ee?E(j[0],j[1],j[2]):E.call(D,j[0],j[1],j[2]);case 4:return ee?E(j[0],j[1],j[2],j[3]):E.call(D,j[0],j[1],j[2],j[3])}return E.apply(D,j)}},"./node_modules/core-js/modules/_iobject.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_cof.js");q.exports=Object("z").propertyIsEnumerable(0)?Object:function(D){return j(D)=="String"?D.split(""):Object(D)}},"./node_modules/core-js/modules/_is-array-iter.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_iterators.js"),D=E("./node_modules/core-js/modules/_wks.js")("iterator"),ee=Array.prototype;q.exports=function(W){return W!==void 0&&(j.Array===W||ee[D]===W)}},"./node_modules/core-js/modules/_is-array.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_cof.js");q.exports=Array.isArray||function(ee){return j(ee)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(q,V){q.exports=function(E){return typeof E=="object"?E!==null:typeof E=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_is-object.js"),D=E("./node_modules/core-js/modules/_cof.js"),ee=E("./node_modules/core-js/modules/_wks.js")("match");q.exports=function(W){var ve;return j(W)&&((ve=W[ee])!==void 0?!!ve:D(W)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_an-object.js");q.exports=function(D,ee,W,ve){try{return ve?ee(j(W)[0],W[1]):ee(W)}catch(de){var _e=D.return;throw _e!==void 0&&j(_e.call(D)),de}}},"./node_modules/core-js/modules/_iter-create.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_object-create.js"),D=E("./node_modules/core-js/modules/_property-desc.js"),ee=E("./node_modules/core-js/modules/_set-to-string-tag.js"),W={};E("./node_modules/core-js/modules/_hide.js")(W,E("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),q.exports=function(ve,_e,de){ve.prototype=j(W,{next:D(1,de)}),ee(ve,_e+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_library.js"),D=E("./node_modules/core-js/modules/_export.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),W=E("./node_modules/core-js/modules/_hide.js"),ve=E("./node_modules/core-js/modules/_iterators.js"),_e=E("./node_modules/core-js/modules/_iter-create.js"),de=E("./node_modules/core-js/modules/_set-to-string-tag.js"),ie=E("./node_modules/core-js/modules/_object-gpo.js"),le=E("./node_modules/core-js/modules/_wks.js")("iterator"),J=!([].keys&&"next"in[].keys()),te="@@iterator",he="keys",be="values",Ee=function(){return this};q.exports=function(De,Ae,Oe,We,He,nt,dt){_e(Oe,Ae,We);var wt=function(N){if(!J&&N in Vt)return Vt[N];switch(N){case he:return function(){return new Oe(this,N)};case be:return function(){return new Oe(this,N)}}return function(){return new Oe(this,N)}},Rt=Ae+" Iterator",gt=He==be,St=!1,Vt=De.prototype,Bt=Vt[le]||Vt[te]||He&&Vt[He],an=Bt||wt(He),Sn=He?gt?wt("entries"):an:void 0,et=Ae=="Array"&&Vt.entries||Bt,ln,wn,xe;if(et&&(xe=ie(et.call(new De)),xe!==Object.prototype&&xe.next&&(de(xe,Rt,!0),!j&&typeof xe[le]!="function"&&W(xe,le,Ee))),gt&&Bt&&Bt.name!==be&&(St=!0,an=function(){return Bt.call(this)}),(!j||dt)&&(J||St||!Vt[le])&&W(Vt,le,an),ve[Ae]=an,ve[Rt]=Ee,He)if(ln={values:gt?an:wt(be),keys:nt?an:wt(he),entries:Sn},dt)for(wn in ln)wn in Vt||ee(Vt,wn,ln[wn]);else D(D.P+D.F*(J||St),Ae,ln);return ln}},"./node_modules/core-js/modules/_iter-detect.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_wks.js")("iterator"),D=!1;try{var ee=[7][j]();ee.return=function(){D=!0},Array.from(ee,function(){throw 2})}catch{}q.exports=function(W,ve){if(!ve&&!D)return!1;var _e=!1;try{var de=[7],ie=de[j]();ie.next=function(){return{done:_e=!0}},de[j]=function(){return ie},W(de)}catch{}return _e}},"./node_modules/core-js/modules/_iter-step.js":function(q,V){q.exports=function(E,j){return{value:j,done:!!E}}},"./node_modules/core-js/modules/_iterators.js":function(q,V){q.exports={}},"./node_modules/core-js/modules/_library.js":function(q,V){q.exports=!1},"./node_modules/core-js/modules/_meta.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_uid.js")("meta"),D=E("./node_modules/core-js/modules/_is-object.js"),ee=E("./node_modules/core-js/modules/_has.js"),W=E("./node_modules/core-js/modules/_object-dp.js").f,ve=0,_e=Object.isExtensible||function(){return!0},de=!E("./node_modules/core-js/modules/_fails.js")(function(){return _e(Object.preventExtensions({}))}),ie=function(be){W(be,j,{value:{i:"O"+ ++ve,w:{}}})},le=function(be,Ee){if(!D(be))return typeof be=="symbol"?be:(typeof be=="string"?"S":"P")+be;if(!ee(be,j)){if(!_e(be))return"F";if(!Ee)return"E";ie(be)}return be[j].i},J=function(be,Ee){if(!ee(be,j)){if(!_e(be))return!0;if(!Ee)return!1;ie(be)}return be[j].w},te=function(be){return de&&he.NEED&&_e(be)&&!ee(be,j)&&ie(be),be},he=q.exports={KEY:j,NEED:!1,fastKey:le,getWeak:J,onFreeze:te}},"./node_modules/core-js/modules/_object-create.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_an-object.js"),D=E("./node_modules/core-js/modules/_object-dps.js"),ee=E("./node_modules/core-js/modules/_enum-bug-keys.js"),W=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ve=function(){},_e="prototype",de=function(){var ie=E("./node_modules/core-js/modules/_dom-create.js")("iframe"),le=ee.length,J="<",te=">",he;for(ie.style.display="none",E("./node_modules/core-js/modules/_html.js").appendChild(ie),ie.src="javascript:",he=ie.contentWindow.document,he.open(),he.write(J+"script"+te+"document.F=Object"+J+"/script"+te),he.close(),de=he.F;le--;)delete de[_e][ee[le]];return de()};q.exports=Object.create||function(le,J){var te;return le!==null?(ve[_e]=j(le),te=new ve,ve[_e]=null,te[W]=le):te=de(),J===void 0?te:D(te,J)}},"./node_modules/core-js/modules/_object-dp.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_an-object.js"),D=E("./node_modules/core-js/modules/_ie8-dom-define.js"),ee=E("./node_modules/core-js/modules/_to-primitive.js"),W=Object.defineProperty;V.f=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(_e,de,ie){if(j(_e),de=ee(de,!0),j(ie),D)try{return W(_e,de,ie)}catch{}if("get"in ie||"set"in ie)throw TypeError("Accessors not supported!");return"value"in ie&&(_e[de]=ie.value),_e}},"./node_modules/core-js/modules/_object-dps.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js"),D=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_object-keys.js");q.exports=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ve,_e){D(ve);for(var de=ee(_e),ie=de.length,le=0,J;ie>le;)j.f(ve,J=de[le++],_e[J]);return ve}},"./node_modules/core-js/modules/_object-gopd.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_object-pie.js"),D=E("./node_modules/core-js/modules/_property-desc.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js"),W=E("./node_modules/core-js/modules/_to-primitive.js"),ve=E("./node_modules/core-js/modules/_has.js"),_e=E("./node_modules/core-js/modules/_ie8-dom-define.js"),de=Object.getOwnPropertyDescriptor;V.f=E("./node_modules/core-js/modules/_descriptors.js")?de:function(le,J){if(le=ee(le),J=W(J,!0),_e)try{return de(le,J)}catch{}if(ve(le,J))return D(!j.f.call(le,J),le[J])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_to-iobject.js"),D=E("./node_modules/core-js/modules/_object-gopn.js").f,ee={}.toString,W=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ve=function(_e){try{return D(_e)}catch{return W.slice()}};q.exports.f=function(de){return W&&ee.call(de)=="[object Window]"?ve(de):D(j(de))}},"./node_modules/core-js/modules/_object-gopn.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_object-keys-internal.js"),D=E("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");V.f=Object.getOwnPropertyNames||function(W){return j(W,D)}},"./node_modules/core-js/modules/_object-gops.js":function(q,V){V.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_has.js"),D=E("./node_modules/core-js/modules/_to-object.js"),ee=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),W=Object.prototype;q.exports=Object.getPrototypeOf||function(ve){return ve=D(ve),j(ve,ee)?ve[ee]:typeof ve.constructor=="function"&&ve instanceof ve.constructor?ve.constructor.prototype:ve instanceof Object?W:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_has.js"),D=E("./node_modules/core-js/modules/_to-iobject.js"),ee=E("./node_modules/core-js/modules/_array-includes.js")(!1),W=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");q.exports=function(ve,_e){var de=D(ve),ie=0,le=[],J;for(J in de)J!=W&&j(de,J)&&le.push(J);for(;_e.length>ie;)j(de,J=_e[ie++])&&(~ee(le,J)||le.push(J));return le}},"./node_modules/core-js/modules/_object-keys.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_object-keys-internal.js"),D=E("./node_modules/core-js/modules/_enum-bug-keys.js");q.exports=Object.keys||function(W){return j(W,D)}},"./node_modules/core-js/modules/_object-pie.js":function(q,V){V.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_object-gopn.js"),D=E("./node_modules/core-js/modules/_object-gops.js"),ee=E("./node_modules/core-js/modules/_an-object.js"),W=E("./node_modules/core-js/modules/_global.js").Reflect;q.exports=W&&W.ownKeys||function(_e){var de=j.f(ee(_e)),ie=D.f;return ie?de.concat(ie(_e)):de}},"./node_modules/core-js/modules/_property-desc.js":function(q,V){q.exports=function(E,j){return{enumerable:!(E&1),configurable:!(E&2),writable:!(E&4),value:j}}},"./node_modules/core-js/modules/_redefine.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_global.js"),D=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_has.js"),W=E("./node_modules/core-js/modules/_uid.js")("src"),ve=E("./node_modules/core-js/modules/_function-to-string.js"),_e="toString",de=(""+ve).split(_e);E("./node_modules/core-js/modules/_core.js").inspectSource=function(ie){return ve.call(ie)},(q.exports=function(ie,le,J,te){var he=typeof J=="function";he&&(ee(J,"name")||D(J,"name",le)),ie[le]!==J&&(he&&(ee(J,W)||D(J,W,ie[le]?""+ie[le]:de.join(String(le)))),ie===j?ie[le]=J:te?ie[le]?ie[le]=J:D(ie,le,J):(delete ie[le],D(ie,le,J)))})(Function.prototype,_e,function(){return typeof this=="function"&&this[W]||ve.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_classof.js"),D=RegExp.prototype.exec;q.exports=function(ee,W){var ve=ee.exec;if(typeof ve=="function"){var _e=ve.call(ee,W);if(typeof _e!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return _e}if(j(ee)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return D.call(ee,W)}},"./node_modules/core-js/modules/_regexp-exec.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_flags.js"),D=RegExp.prototype.exec,ee=String.prototype.replace,W=D,ve="lastIndex",_e=function(){var le=/a/,J=/b*/g;return D.call(le,"a"),D.call(J,"a"),le[ve]!==0||J[ve]!==0}(),de=/()??/.exec("")[1]!==void 0,ie=_e||de;ie&&(W=function(J){var te=this,he,be,Ee,De;return de&&(be=new RegExp("^"+te.source+"$(?!\\s)",j.call(te))),_e&&(he=te[ve]),Ee=D.call(te,J),_e&&Ee&&(te[ve]=te.global?Ee.index+Ee[0].length:he),de&&Ee&&Ee.length>1&&ee.call(Ee[0],be,function(){for(De=1;De<arguments.length-2;De++)arguments[De]===void 0&&(Ee[De]=void 0)}),Ee}),q.exports=W},"./node_modules/core-js/modules/_set-to-string-tag.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js").f,D=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_wks.js")("toStringTag");q.exports=function(W,ve,_e){W&&!D(W=_e?W:W.prototype,ee)&&j(W,ee,{configurable:!0,value:ve})}},"./node_modules/core-js/modules/_shared-key.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_shared.js")("keys"),D=E("./node_modules/core-js/modules/_uid.js");q.exports=function(ee){return j[ee]||(j[ee]=D(ee))}},"./node_modules/core-js/modules/_shared.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_core.js"),D=E("./node_modules/core-js/modules/_global.js"),ee="__core-js_shared__",W=D[ee]||(D[ee]={});(q.exports=function(ve,_e){return W[ve]||(W[ve]=_e!==void 0?_e:{})})("versions",[]).push({version:j.version,mode:E("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_an-object.js"),D=E("./node_modules/core-js/modules/_a-function.js"),ee=E("./node_modules/core-js/modules/_wks.js")("species");q.exports=function(W,ve){var _e=j(W).constructor,de;return _e===void 0||(de=j(_e)[ee])==null?ve:D(de)}},"./node_modules/core-js/modules/_string-at.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_to-integer.js"),D=E("./node_modules/core-js/modules/_defined.js");q.exports=function(ee){return function(W,ve){var _e=String(D(W)),de=j(ve),ie=_e.length,le,J;return de<0||de>=ie?ee?"":void 0:(le=_e.charCodeAt(de),le<55296||le>56319||de+1===ie||(J=_e.charCodeAt(de+1))<56320||J>57343?ee?_e.charAt(de):le:ee?_e.slice(de,de+2):(le-55296<<10)+(J-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_is-regexp.js"),D=E("./node_modules/core-js/modules/_defined.js");q.exports=function(ee,W,ve){if(j(W))throw TypeError("String#"+ve+" doesn't accept regex!");return String(D(ee))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_to-integer.js"),D=Math.max,ee=Math.min;q.exports=function(W,ve){return W=j(W),W<0?D(W+ve,0):ee(W,ve)}},"./node_modules/core-js/modules/_to-integer.js":function(q,V){var E=Math.ceil,j=Math.floor;q.exports=function(D){return isNaN(D=+D)?0:(D>0?j:E)(D)}},"./node_modules/core-js/modules/_to-iobject.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_iobject.js"),D=E("./node_modules/core-js/modules/_defined.js");q.exports=function(ee){return j(D(ee))}},"./node_modules/core-js/modules/_to-length.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_to-integer.js"),D=Math.min;q.exports=function(ee){return ee>0?D(j(ee),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_defined.js");q.exports=function(D){return Object(j(D))}},"./node_modules/core-js/modules/_to-primitive.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_is-object.js");q.exports=function(D,ee){if(!j(D))return D;var W,ve;if(ee&&typeof(W=D.toString)=="function"&&!j(ve=W.call(D))||typeof(W=D.valueOf)=="function"&&!j(ve=W.call(D))||!ee&&typeof(W=D.toString)=="function"&&!j(ve=W.call(D)))return ve;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(q,V){var E=0,j=Math.random();q.exports=function(D){return"Symbol(".concat(D===void 0?"":D,")_",(++E+j).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_global.js"),D=E("./node_modules/core-js/modules/_core.js"),ee=E("./node_modules/core-js/modules/_library.js"),W=E("./node_modules/core-js/modules/_wks-ext.js"),ve=E("./node_modules/core-js/modules/_object-dp.js").f;q.exports=function(_e){var de=D.Symbol||(D.Symbol=ee?{}:j.Symbol||{});_e.charAt(0)!="_"&&!(_e in de)&&ve(de,_e,{value:W.f(_e)})}},"./node_modules/core-js/modules/_wks-ext.js":function(q,V,E){V.f=E("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_shared.js")("wks"),D=E("./node_modules/core-js/modules/_uid.js"),ee=E("./node_modules/core-js/modules/_global.js").Symbol,W=typeof ee=="function",ve=q.exports=function(_e){return j[_e]||(j[_e]=W&&ee[_e]||(W?ee:D)("Symbol."+_e))};ve.store=j},"./node_modules/core-js/modules/core.get-iterator-method.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_classof.js"),D=E("./node_modules/core-js/modules/_wks.js")("iterator"),ee=E("./node_modules/core-js/modules/_iterators.js");q.exports=E("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(W){if(W!=null)return W[D]||W["@@iterator"]||ee[j(W)]}},"./node_modules/core-js/modules/es6.array.from.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_ctx.js"),D=E("./node_modules/core-js/modules/_export.js"),ee=E("./node_modules/core-js/modules/_to-object.js"),W=E("./node_modules/core-js/modules/_iter-call.js"),ve=E("./node_modules/core-js/modules/_is-array-iter.js"),_e=E("./node_modules/core-js/modules/_to-length.js"),de=E("./node_modules/core-js/modules/_create-property.js"),ie=E("./node_modules/core-js/modules/core.get-iterator-method.js");D(D.S+D.F*!E("./node_modules/core-js/modules/_iter-detect.js")(function(le){Array.from(le)}),"Array",{from:function(J){var te=ee(J),he=typeof this=="function"?this:Array,be=arguments.length,Ee=be>1?arguments[1]:void 0,De=Ee!==void 0,Ae=0,Oe=ie(te),We,He,nt,dt;if(De&&(Ee=j(Ee,be>2?arguments[2]:void 0,2)),Oe!=null&&!(he==Array&&ve(Oe)))for(dt=Oe.call(te),He=new he;!(nt=dt.next()).done;Ae++)de(He,Ae,De?W(dt,Ee,[nt.value,Ae],!0):nt.value);else for(We=_e(te.length),He=new he(We);We>Ae;Ae++)de(He,Ae,De?Ee(te[Ae],Ae):te[Ae]);return He.length=Ae,He}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_add-to-unscopables.js"),D=E("./node_modules/core-js/modules/_iter-step.js"),ee=E("./node_modules/core-js/modules/_iterators.js"),W=E("./node_modules/core-js/modules/_to-iobject.js");q.exports=E("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ve,_e){this._t=W(ve),this._i=0,this._k=_e},function(){var ve=this._t,_e=this._k,de=this._i++;return!ve||de>=ve.length?(this._t=void 0,D(1)):_e=="keys"?D(0,de):_e=="values"?D(0,ve[de]):D(0,[de,ve[de]])},"values"),ee.Arguments=ee.Array,j("keys"),j("values"),j("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_export.js");j(j.P,"Function",{bind:E("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js").f,D=Function.prototype,ee=/^\s*function ([^ (]*)/,W="name";W in D||E("./node_modules/core-js/modules/_descriptors.js")&&j(D,W,{configurable:!0,get:function(){try{return(""+this).match(ee)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_export.js"),D=E("./node_modules/core-js/modules/_global.js").isFinite;j(j.S,"Number",{isFinite:function(W){return typeof W=="number"&&D(W)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_classof.js"),D={};D[E("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",D+""!="[object z]"&&E("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+j(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_regexp-exec.js");E("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:j!==/./.exec},{exec:j})},"./node_modules/core-js/modules/es6.regexp.split.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_is-regexp.js"),D=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_species-constructor.js"),W=E("./node_modules/core-js/modules/_advance-string-index.js"),ve=E("./node_modules/core-js/modules/_to-length.js"),_e=E("./node_modules/core-js/modules/_regexp-exec-abstract.js"),de=E("./node_modules/core-js/modules/_regexp-exec.js"),ie=E("./node_modules/core-js/modules/_fails.js"),le=Math.min,J=[].push,te="split",he="length",be="lastIndex",Ee=4294967295,De=!ie(function(){});E("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Ae,Oe,We,He){var nt;return"abbc"[te](/(b)*/)[1]=="c"||"test"[te](/(?:)/,-1)[he]!=4||"ab"[te](/(?:ab)*/)[he]!=2||"."[te](/(.?)(.?)/)[he]!=4||"."[te](/()()/)[he]>1||""[te](/.?/)[he]?nt=function(dt,wt){var Rt=String(this);if(dt===void 0&&wt===0)return[];if(!j(dt))return We.call(Rt,dt,wt);for(var gt=[],St=(dt.ignoreCase?"i":"")+(dt.multiline?"m":"")+(dt.unicode?"u":"")+(dt.sticky?"y":""),Vt=0,Bt=wt===void 0?Ee:wt>>>0,an=new RegExp(dt.source,St+"g"),Sn,et,ln;(Sn=de.call(an,Rt))&&(et=an[be],!(et>Vt&&(gt.push(Rt.slice(Vt,Sn.index)),Sn[he]>1&&Sn.index<Rt[he]&&J.apply(gt,Sn.slice(1)),ln=Sn[0][he],Vt=et,gt[he]>=Bt)));)an[be]===Sn.index&&an[be]++;return Vt===Rt[he]?(ln||!an.test(""))&&gt.push(""):gt.push(Rt.slice(Vt)),gt[he]>Bt?gt.slice(0,Bt):gt}:"0"[te](void 0,0)[he]?nt=function(dt,wt){return dt===void 0&&wt===0?[]:We.call(this,dt,wt)}:nt=We,[function(wt,Rt){var gt=Ae(this),St=wt==null?void 0:wt[Oe];return St!==void 0?St.call(wt,gt,Rt):nt.call(String(gt),wt,Rt)},function(dt,wt){var Rt=He(nt,dt,this,wt,nt!==We);if(Rt.done)return Rt.value;var gt=D(dt),St=String(this),Vt=ee(gt,RegExp),Bt=gt.unicode,an=(gt.ignoreCase?"i":"")+(gt.multiline?"m":"")+(gt.unicode?"u":"")+(De?"y":"g"),Sn=new Vt(De?gt:"^(?:"+gt.source+")",an),et=wt===void 0?Ee:wt>>>0;if(et===0)return[];if(St.length===0)return _e(Sn,St)===null?[St]:[];for(var ln=0,wn=0,xe=[];wn<St.length;){Sn.lastIndex=De?wn:0;var N=_e(Sn,De?St:St.slice(wn)),B;if(N===null||(B=le(ve(Sn.lastIndex+(De?0:wn)),St.length))===ln)wn=W(St,wn,Bt);else{if(xe.push(St.slice(ln,wn)),xe.length===et)return xe;for(var we=1;we<=N.length-1;we++)if(xe.push(N[we]),xe.length===et)return xe;wn=ln=B}}return xe.push(St.slice(ln)),xe}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_export.js"),D=E("./node_modules/core-js/modules/_string-context.js"),ee="includes";j(j.P+j.F*E("./node_modules/core-js/modules/_fails-is-regexp.js")(ee),"String",{includes:function(ve){return!!~D(this,ve,ee).indexOf(ve,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_global.js"),D=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_descriptors.js"),W=E("./node_modules/core-js/modules/_export.js"),ve=E("./node_modules/core-js/modules/_redefine.js"),_e=E("./node_modules/core-js/modules/_meta.js").KEY,de=E("./node_modules/core-js/modules/_fails.js"),ie=E("./node_modules/core-js/modules/_shared.js"),le=E("./node_modules/core-js/modules/_set-to-string-tag.js"),J=E("./node_modules/core-js/modules/_uid.js"),te=E("./node_modules/core-js/modules/_wks.js"),he=E("./node_modules/core-js/modules/_wks-ext.js"),be=E("./node_modules/core-js/modules/_wks-define.js"),Ee=E("./node_modules/core-js/modules/_enum-keys.js"),De=E("./node_modules/core-js/modules/_is-array.js"),Ae=E("./node_modules/core-js/modules/_an-object.js"),Oe=E("./node_modules/core-js/modules/_is-object.js"),We=E("./node_modules/core-js/modules/_to-object.js"),He=E("./node_modules/core-js/modules/_to-iobject.js"),nt=E("./node_modules/core-js/modules/_to-primitive.js"),dt=E("./node_modules/core-js/modules/_property-desc.js"),wt=E("./node_modules/core-js/modules/_object-create.js"),Rt=E("./node_modules/core-js/modules/_object-gopn-ext.js"),gt=E("./node_modules/core-js/modules/_object-gopd.js"),St=E("./node_modules/core-js/modules/_object-gops.js"),Vt=E("./node_modules/core-js/modules/_object-dp.js"),Bt=E("./node_modules/core-js/modules/_object-keys.js"),an=gt.f,Sn=Vt.f,et=Rt.f,ln=j.Symbol,wn=j.JSON,xe=wn&&wn.stringify,N="prototype",B=te("_hidden"),we=te("toPrimitive"),Xe={}.propertyIsEnumerable,Qe=ie("symbol-registry"),ct=ie("symbols"),ae=ie("op-symbols"),R=Object[N],z=typeof ln=="function"&&!!St.f,Se=j.QObject,Ve=!Se||!Se[N]||!Se[N].findChild,tt=ee&&de(function(){return wt(Sn({},"a",{get:function(){return Sn(this,"a",{value:7}).a}})).a!=7})?function(Ne,Re,$e){var Fe=an(R,Re);Fe&&delete R[Re],Sn(Ne,Re,$e),Fe&&Ne!==R&&Sn(R,Re,Fe)}:Sn,ot=function(Ne){var Re=ct[Ne]=wt(ln[N]);return Re._k=Ne,Re},ut=z&&typeof ln.iterator=="symbol"?function(Ne){return typeof Ne=="symbol"}:function(Ne){return Ne instanceof ln},Nt=function(Re,$e,Fe){return Re===R&&Nt(ae,$e,Fe),Ae(Re),$e=nt($e,!0),Ae(Fe),D(ct,$e)?(Fe.enumerable?(D(Re,B)&&Re[B][$e]&&(Re[B][$e]=!1),Fe=wt(Fe,{enumerable:dt(0,!1)})):(D(Re,B)||Sn(Re,B,dt(1,{})),Re[B][$e]=!0),tt(Re,$e,Fe)):Sn(Re,$e,Fe)},jt=function(Re,$e){Ae(Re);for(var Fe=Ee($e=He($e)),Ye=0,ft=Fe.length,ht;ft>Ye;)Nt(Re,ht=Fe[Ye++],$e[ht]);return Re},mn=function(Re,$e){return $e===void 0?wt(Re):jt(wt(Re),$e)},_n=function(Re){var $e=Xe.call(this,Re=nt(Re,!0));return this===R&&D(ct,Re)&&!D(ae,Re)?!1:$e||!D(this,Re)||!D(ct,Re)||D(this,B)&&this[B][Re]?$e:!0},sn=function(Re,$e){if(Re=He(Re),$e=nt($e,!0),!(Re===R&&D(ct,$e)&&!D(ae,$e))){var Fe=an(Re,$e);return Fe&&D(ct,$e)&&!(D(Re,B)&&Re[B][$e])&&(Fe.enumerable=!0),Fe}},ki=function(Re){for(var $e=et(He(Re)),Fe=[],Ye=0,ft;$e.length>Ye;)!D(ct,ft=$e[Ye++])&&ft!=B&&ft!=_e&&Fe.push(ft);return Fe},rr=function(Re){for(var $e=Re===R,Fe=et($e?ae:He(Re)),Ye=[],ft=0,ht;Fe.length>ft;)D(ct,ht=Fe[ft++])&&(!$e||D(R,ht))&&Ye.push(ct[ht]);return Ye};z||(ln=function(){if(this instanceof ln)throw TypeError("Symbol is not a constructor!");var Re=J(arguments.length>0?arguments[0]:void 0),$e=function(Fe){this===R&&$e.call(ae,Fe),D(this,B)&&D(this[B],Re)&&(this[B][Re]=!1),tt(this,Re,dt(1,Fe))};return ee&&Ve&&tt(R,Re,{configurable:!0,set:$e}),ot(Re)},ve(ln[N],"toString",function(){return this._k}),gt.f=sn,Vt.f=Nt,E("./node_modules/core-js/modules/_object-gopn.js").f=Rt.f=ki,E("./node_modules/core-js/modules/_object-pie.js").f=_n,St.f=rr,ee&&!E("./node_modules/core-js/modules/_library.js")&&ve(R,"propertyIsEnumerable",_n,!0),he.f=function(Ne){return ot(te(Ne))}),W(W.G+W.W+W.F*!z,{Symbol:ln});for(var Me="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;Me.length>re;)te(Me[re++]);for(var ue=Bt(te.store),me=0;ue.length>me;)be(ue[me++]);W(W.S+W.F*!z,"Symbol",{for:function(Ne){return D(Qe,Ne+="")?Qe[Ne]:Qe[Ne]=ln(Ne)},keyFor:function(Re){if(!ut(Re))throw TypeError(Re+" is not a symbol!");for(var $e in Qe)if(Qe[$e]===Re)return $e},useSetter:function(){Ve=!0},useSimple:function(){Ve=!1}}),W(W.S+W.F*!z,"Object",{create:mn,defineProperty:Nt,defineProperties:jt,getOwnPropertyDescriptor:sn,getOwnPropertyNames:ki,getOwnPropertySymbols:rr});var Ie=de(function(){St.f(1)});W(W.S+W.F*Ie,"Object",{getOwnPropertySymbols:function(Re){return St.f(We(Re))}}),wn&&W(W.S+W.F*(!z||de(function(){var Ne=ln();return xe([Ne])!="[null]"||xe({a:Ne})!="{}"||xe(Object(Ne))!="{}"})),"JSON",{stringify:function(Re){for(var $e=[Re],Fe=1,Ye,ft;arguments.length>Fe;)$e.push(arguments[Fe++]);if(ft=Ye=$e[1],!(!Oe(Ye)&&Re===void 0||ut(Re)))return De(Ye)||(Ye=function(ht,pt){if(typeof ft=="function"&&(pt=ft.call(this,ht,pt)),!ut(pt))return pt}),$e[1]=Ye,xe.apply(wn,$e)}}),ln[N][we]||E("./node_modules/core-js/modules/_hide.js")(ln[N],we,ln[N].valueOf),le(ln,"Symbol"),le(Math,"Math",!0),le(j.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_export.js"),D=E("./node_modules/core-js/modules/_array-includes.js")(!0);j(j.P,"Array",{includes:function(W){return D(this,W,arguments.length>1?arguments[1]:void 0)}}),E("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(q,V,E){var j=E("./node_modules/core-js/modules/_export.js"),D=E("./node_modules/core-js/modules/_own-keys.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js"),W=E("./node_modules/core-js/modules/_object-gopd.js"),ve=E("./node_modules/core-js/modules/_create-property.js");j(j.S,"Object",{getOwnPropertyDescriptors:function(de){for(var ie=ee(de),le=W.f,J=D(ie),te={},he=0,be,Ee;J.length>he;)Ee=le(ie,be=J[he++]),Ee!==void 0&&ve(te,be,Ee);return te}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(q,V,E){E("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(q,V,E){for(var j=E("./node_modules/core-js/modules/es6.array.iterator.js"),D=E("./node_modules/core-js/modules/_object-keys.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),W=E("./node_modules/core-js/modules/_global.js"),ve=E("./node_modules/core-js/modules/_hide.js"),_e=E("./node_modules/core-js/modules/_iterators.js"),de=E("./node_modules/core-js/modules/_wks.js"),ie=de("iterator"),le=de("toStringTag"),J=_e.Array,te={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},he=D(te),be=0;be<he.length;be++){var Ee=he[be],De=te[Ee],Ae=W[Ee],Oe=Ae&&Ae.prototype,We;if(Oe&&(Oe[ie]||ve(Oe,ie,J),Oe[le]||ve(Oe,le,Ee),_e[Ee]=J,De))for(We in j)Oe[We]||ee(Oe,We,j[We],!0)}},"./node_modules/crypt/crypt.js":function(q,V){(function(){var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j={rotl:function(D,ee){return D<<ee|D>>>32-ee},rotr:function(D,ee){return D<<32-ee|D>>>ee},endian:function(D){if(D.constructor==Number)return j.rotl(D,8)&16711935|j.rotl(D,24)&4278255360;for(var ee=0;ee<D.length;ee++)D[ee]=j.endian(D[ee]);return D},randomBytes:function(D){for(var ee=[];D>0;D--)ee.push(Math.floor(Math.random()*256));return ee},bytesToWords:function(D){for(var ee=[],W=0,ve=0;W<D.length;W++,ve+=8)ee[ve>>>5]|=D[W]<<24-ve%32;return ee},wordsToBytes:function(D){for(var ee=[],W=0;W<D.length*32;W+=8)ee.push(D[W>>>5]>>>24-W%32&255);return ee},bytesToHex:function(D){for(var ee=[],W=0;W<D.length;W++)ee.push((D[W]>>>4).toString(16)),ee.push((D[W]&15).toString(16));return ee.join("")},hexToBytes:function(D){for(var ee=[],W=0;W<D.length;W+=2)ee.push(parseInt(D.substr(W,2),16));return ee},bytesToBase64:function(D){for(var ee=[],W=0;W<D.length;W+=3)for(var ve=D[W]<<16|D[W+1]<<8|D[W+2],_e=0;_e<4;_e++)W*8+_e*6<=D.length*8?ee.push(E.charAt(ve>>>6*(3-_e)&63)):ee.push("=");return ee.join("")},base64ToBytes:function(D){D=D.replace(/[^A-Z0-9+\/]/ig,"");for(var ee=[],W=0,ve=0;W<D.length;ve=++W%4)ve!=0&&ee.push((E.indexOf(D.charAt(W-1))&Math.pow(2,-2*ve+8)-1)<<ve*2|E.indexOf(D.charAt(W))>>>6-ve*2);return ee}};q.exports=j})()},"./node_modules/is-buffer/index.js":function(q,V){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */q.exports=function(D){return D!=null&&(E(D)||j(D)||!!D._isBuffer)};function E(D){return!!D.constructor&&typeof D.constructor.isBuffer=="function"&&D.constructor.isBuffer(D)}function j(D){return typeof D.readFloatLE=="function"&&typeof D.slice=="function"&&E(D.slice(0,0))}},"./node_modules/md5/md5.js":function(q,V,E){(function(){var j=E("./node_modules/crypt/crypt.js"),D=E("./node_modules/charenc/charenc.js").utf8,ee=E("./node_modules/is-buffer/index.js"),W=E("./node_modules/charenc/charenc.js").bin,ve=function(_e,de){_e.constructor==String?de&&de.encoding==="binary"?_e=W.stringToBytes(_e):_e=D.stringToBytes(_e):ee(_e)?_e=Array.prototype.slice.call(_e,0):!Array.isArray(_e)&&_e.constructor!==Uint8Array&&(_e=_e.toString());for(var ie=j.bytesToWords(_e),le=_e.length*8,J=1732584193,te=-271733879,he=-1732584194,be=271733878,Ee=0;Ee<ie.length;Ee++)ie[Ee]=(ie[Ee]<<8|ie[Ee]>>>24)&16711935|(ie[Ee]<<24|ie[Ee]>>>8)&4278255360;ie[le>>>5]|=128<<le%32,ie[(le+64>>>9<<4)+14]=le;for(var De=ve._ff,Ae=ve._gg,Oe=ve._hh,We=ve._ii,Ee=0;Ee<ie.length;Ee+=16){var He=J,nt=te,dt=he,wt=be;J=De(J,te,he,be,ie[Ee+0],7,-680876936),be=De(be,J,te,he,ie[Ee+1],12,-389564586),he=De(he,be,J,te,ie[Ee+2],17,606105819),te=De(te,he,be,J,ie[Ee+3],22,-1044525330),J=De(J,te,he,be,ie[Ee+4],7,-176418897),be=De(be,J,te,he,ie[Ee+5],12,1200080426),he=De(he,be,J,te,ie[Ee+6],17,-1473231341),te=De(te,he,be,J,ie[Ee+7],22,-45705983),J=De(J,te,he,be,ie[Ee+8],7,1770035416),be=De(be,J,te,he,ie[Ee+9],12,-1958414417),he=De(he,be,J,te,ie[Ee+10],17,-42063),te=De(te,he,be,J,ie[Ee+11],22,-1990404162),J=De(J,te,he,be,ie[Ee+12],7,1804603682),be=De(be,J,te,he,ie[Ee+13],12,-40341101),he=De(he,be,J,te,ie[Ee+14],17,-1502002290),te=De(te,he,be,J,ie[Ee+15],22,1236535329),J=Ae(J,te,he,be,ie[Ee+1],5,-165796510),be=Ae(be,J,te,he,ie[Ee+6],9,-1069501632),he=Ae(he,be,J,te,ie[Ee+11],14,643717713),te=Ae(te,he,be,J,ie[Ee+0],20,-373897302),J=Ae(J,te,he,be,ie[Ee+5],5,-701558691),be=Ae(be,J,te,he,ie[Ee+10],9,38016083),he=Ae(he,be,J,te,ie[Ee+15],14,-660478335),te=Ae(te,he,be,J,ie[Ee+4],20,-405537848),J=Ae(J,te,he,be,ie[Ee+9],5,568446438),be=Ae(be,J,te,he,ie[Ee+14],9,-1019803690),he=Ae(he,be,J,te,ie[Ee+3],14,-187363961),te=Ae(te,he,be,J,ie[Ee+8],20,1163531501),J=Ae(J,te,he,be,ie[Ee+13],5,-1444681467),be=Ae(be,J,te,he,ie[Ee+2],9,-51403784),he=Ae(he,be,J,te,ie[Ee+7],14,1735328473),te=Ae(te,he,be,J,ie[Ee+12],20,-1926607734),J=Oe(J,te,he,be,ie[Ee+5],4,-378558),be=Oe(be,J,te,he,ie[Ee+8],11,-2022574463),he=Oe(he,be,J,te,ie[Ee+11],16,1839030562),te=Oe(te,he,be,J,ie[Ee+14],23,-35309556),J=Oe(J,te,he,be,ie[Ee+1],4,-1530992060),be=Oe(be,J,te,he,ie[Ee+4],11,1272893353),he=Oe(he,be,J,te,ie[Ee+7],16,-155497632),te=Oe(te,he,be,J,ie[Ee+10],23,-1094730640),J=Oe(J,te,he,be,ie[Ee+13],4,681279174),be=Oe(be,J,te,he,ie[Ee+0],11,-358537222),he=Oe(he,be,J,te,ie[Ee+3],16,-722521979),te=Oe(te,he,be,J,ie[Ee+6],23,76029189),J=Oe(J,te,he,be,ie[Ee+9],4,-640364487),be=Oe(be,J,te,he,ie[Ee+12],11,-421815835),he=Oe(he,be,J,te,ie[Ee+15],16,530742520),te=Oe(te,he,be,J,ie[Ee+2],23,-995338651),J=We(J,te,he,be,ie[Ee+0],6,-198630844),be=We(be,J,te,he,ie[Ee+7],10,1126891415),he=We(he,be,J,te,ie[Ee+14],15,-1416354905),te=We(te,he,be,J,ie[Ee+5],21,-57434055),J=We(J,te,he,be,ie[Ee+12],6,1700485571),be=We(be,J,te,he,ie[Ee+3],10,-1894986606),he=We(he,be,J,te,ie[Ee+10],15,-1051523),te=We(te,he,be,J,ie[Ee+1],21,-2054922799),J=We(J,te,he,be,ie[Ee+8],6,1873313359),be=We(be,J,te,he,ie[Ee+15],10,-30611744),he=We(he,be,J,te,ie[Ee+6],15,-1560198380),te=We(te,he,be,J,ie[Ee+13],21,1309151649),J=We(J,te,he,be,ie[Ee+4],6,-145523070),be=We(be,J,te,he,ie[Ee+11],10,-1120210379),he=We(he,be,J,te,ie[Ee+2],15,718787259),te=We(te,he,be,J,ie[Ee+9],21,-343485551),J=J+He>>>0,te=te+nt>>>0,he=he+dt>>>0,be=be+wt>>>0}return j.endian([J,te,he,be])};ve._ff=function(_e,de,ie,le,J,te,he){var be=_e+(de&ie|~de&le)+(J>>>0)+he;return(be<<te|be>>>32-te)+de},ve._gg=function(_e,de,ie,le,J,te,he){var be=_e+(de&le|ie&~le)+(J>>>0)+he;return(be<<te|be>>>32-te)+de},ve._hh=function(_e,de,ie,le,J,te,he){var be=_e+(de^ie^le)+(J>>>0)+he;return(be<<te|be>>>32-te)+de},ve._ii=function(_e,de,ie,le,J,te,he){var be=_e+(ie^(de|~le))+(J>>>0)+he;return(be<<te|be>>>32-te)+de},ve._blocksize=16,ve._digestsize=16,q.exports=function(_e,de){if(_e==null)throw new Error("Illegal argument "+_e);var ie=j.wordsToBytes(ve(_e,de));return de&&de.asBytes?ie:de&&de.asString?W.bytesToString(ie):j.bytesToHex(ie)}})()},"./node_modules/regenerator-runtime/runtime.js":function(q,V,E){var j=function(D){var ee=Object.prototype,W=ee.hasOwnProperty,ve,_e=typeof Symbol=="function"?Symbol:{},de=_e.iterator||"@@iterator",ie=_e.asyncIterator||"@@asyncIterator",le=_e.toStringTag||"@@toStringTag";function J(N,B,we){return Object.defineProperty(N,B,{value:we,enumerable:!0,configurable:!0,writable:!0}),N[B]}try{J({},"")}catch{J=function(B,we,Xe){return B[we]=Xe}}function te(N,B,we,Xe){var Qe=B&&B.prototype instanceof We?B:We,ct=Object.create(Qe.prototype),ae=new ln(Xe||[]);return ct._invoke=Bt(N,we,ae),ct}D.wrap=te;function he(N,B,we){try{return{type:"normal",arg:N.call(B,we)}}catch(Xe){return{type:"throw",arg:Xe}}}var be="suspendedStart",Ee="suspendedYield",De="executing",Ae="completed",Oe={};function We(){}function He(){}function nt(){}var dt={};dt[de]=function(){return this};var wt=Object.getPrototypeOf,Rt=wt&&wt(wt(wn([])));Rt&&Rt!==ee&&W.call(Rt,de)&&(dt=Rt);var gt=nt.prototype=We.prototype=Object.create(dt);He.prototype=gt.constructor=nt,nt.constructor=He,He.displayName=J(nt,le,"GeneratorFunction");function St(N){["next","throw","return"].forEach(function(B){J(N,B,function(we){return this._invoke(B,we)})})}D.isGeneratorFunction=function(N){var B=typeof N=="function"&&N.constructor;return B?B===He||(B.displayName||B.name)==="GeneratorFunction":!1},D.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,nt):(N.__proto__=nt,J(N,le,"GeneratorFunction")),N.prototype=Object.create(gt),N},D.awrap=function(N){return{__await:N}};function Vt(N,B){function we(ct,ae,R,z){var Se=he(N[ct],N,ae);if(Se.type==="throw")z(Se.arg);else{var Ve=Se.arg,tt=Ve.value;return tt&&typeof tt=="object"&&W.call(tt,"__await")?B.resolve(tt.__await).then(function(ot){we("next",ot,R,z)},function(ot){we("throw",ot,R,z)}):B.resolve(tt).then(function(ot){Ve.value=ot,R(Ve)},function(ot){return we("throw",ot,R,z)})}}var Xe;function Qe(ct,ae){function R(){return new B(function(z,Se){we(ct,ae,z,Se)})}return Xe=Xe?Xe.then(R,R):R()}this._invoke=Qe}St(Vt.prototype),Vt.prototype[ie]=function(){return this},D.AsyncIterator=Vt,D.async=function(N,B,we,Xe,Qe){Qe===void 0&&(Qe=Promise);var ct=new Vt(te(N,B,we,Xe),Qe);return D.isGeneratorFunction(B)?ct:ct.next().then(function(ae){return ae.done?ae.value:ct.next()})};function Bt(N,B,we){var Xe=be;return function(ct,ae){if(Xe===De)throw new Error("Generator is already running");if(Xe===Ae){if(ct==="throw")throw ae;return xe()}for(we.method=ct,we.arg=ae;;){var R=we.delegate;if(R){var z=an(R,we);if(z){if(z===Oe)continue;return z}}if(we.method==="next")we.sent=we._sent=we.arg;else if(we.method==="throw"){if(Xe===be)throw Xe=Ae,we.arg;we.dispatchException(we.arg)}else we.method==="return"&&we.abrupt("return",we.arg);Xe=De;var Se=he(N,B,we);if(Se.type==="normal"){if(Xe=we.done?Ae:Ee,Se.arg===Oe)continue;return{value:Se.arg,done:we.done}}else Se.type==="throw"&&(Xe=Ae,we.method="throw",we.arg=Se.arg)}}}function an(N,B){var we=N.iterator[B.method];if(we===ve){if(B.delegate=null,B.method==="throw"){if(N.iterator.return&&(B.method="return",B.arg=ve,an(N,B),B.method==="throw"))return Oe;B.method="throw",B.arg=new TypeError("The iterator does not provide a 'throw' method")}return Oe}var Xe=he(we,N.iterator,B.arg);if(Xe.type==="throw")return B.method="throw",B.arg=Xe.arg,B.delegate=null,Oe;var Qe=Xe.arg;if(!Qe)return B.method="throw",B.arg=new TypeError("iterator result is not an object"),B.delegate=null,Oe;if(Qe.done)B[N.resultName]=Qe.value,B.next=N.nextLoc,B.method!=="return"&&(B.method="next",B.arg=ve);else return Qe;return B.delegate=null,Oe}St(gt),J(gt,le,"Generator"),gt[de]=function(){return this},gt.toString=function(){return"[object Generator]"};function Sn(N){var B={tryLoc:N[0]};1 in N&&(B.catchLoc=N[1]),2 in N&&(B.finallyLoc=N[2],B.afterLoc=N[3]),this.tryEntries.push(B)}function et(N){var B=N.completion||{};B.type="normal",delete B.arg,N.completion=B}function ln(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(Sn,this),this.reset(!0)}D.keys=function(N){var B=[];for(var we in N)B.push(we);return B.reverse(),function Xe(){for(;B.length;){var Qe=B.pop();if(Qe in N)return Xe.value=Qe,Xe.done=!1,Xe}return Xe.done=!0,Xe}};function wn(N){if(N){var B=N[de];if(B)return B.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var we=-1,Xe=function Qe(){for(;++we<N.length;)if(W.call(N,we))return Qe.value=N[we],Qe.done=!1,Qe;return Qe.value=ve,Qe.done=!0,Qe};return Xe.next=Xe}}return{next:xe}}D.values=wn;function xe(){return{value:ve,done:!0}}return ln.prototype={constructor:ln,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=ve,this.done=!1,this.delegate=null,this.method="next",this.arg=ve,this.tryEntries.forEach(et),!N)for(var B in this)B.charAt(0)==="t"&&W.call(this,B)&&!isNaN(+B.slice(1))&&(this[B]=ve)},stop:function(){this.done=!0;var N=this.tryEntries[0],B=N.completion;if(B.type==="throw")throw B.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var B=this;function we(z,Se){return ct.type="throw",ct.arg=N,B.next=z,Se&&(B.method="next",B.arg=ve),!!Se}for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var Qe=this.tryEntries[Xe],ct=Qe.completion;if(Qe.tryLoc==="root")return we("end");if(Qe.tryLoc<=this.prev){var ae=W.call(Qe,"catchLoc"),R=W.call(Qe,"finallyLoc");if(ae&&R){if(this.prev<Qe.catchLoc)return we(Qe.catchLoc,!0);if(this.prev<Qe.finallyLoc)return we(Qe.finallyLoc)}else if(ae){if(this.prev<Qe.catchLoc)return we(Qe.catchLoc,!0)}else if(R){if(this.prev<Qe.finallyLoc)return we(Qe.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(N,B){for(var we=this.tryEntries.length-1;we>=0;--we){var Xe=this.tryEntries[we];if(Xe.tryLoc<=this.prev&&W.call(Xe,"finallyLoc")&&this.prev<Xe.finallyLoc){var Qe=Xe;break}}Qe&&(N==="break"||N==="continue")&&Qe.tryLoc<=B&&B<=Qe.finallyLoc&&(Qe=null);var ct=Qe?Qe.completion:{};return ct.type=N,ct.arg=B,Qe?(this.method="next",this.next=Qe.finallyLoc,Oe):this.complete(ct)},complete:function(N,B){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&B&&(this.next=B),Oe},finish:function(N){for(var B=this.tryEntries.length-1;B>=0;--B){var we=this.tryEntries[B];if(we.finallyLoc===N)return this.complete(we.completion,we.afterLoc),et(we),Oe}},catch:function(N){for(var B=this.tryEntries.length-1;B>=0;--B){var we=this.tryEntries[B];if(we.tryLoc===N){var Xe=we.completion;if(Xe.type==="throw"){var Qe=Xe.arg;et(we)}return Qe}}throw new Error("illegal catch attempt")},delegateYield:function(N,B,we){return this.delegate={iterator:wn(N),resultName:B,nextLoc:we},this.method==="next"&&(this.arg=ve),Oe}},D}(q.exports);try{regeneratorRuntime=j}catch{Function("r","regeneratorRuntime = r")(j)}},"./src/api.js":function(q,V,E){E.r(V),E.d(V,"setup",function(){return De}),E.d(V,"setupCache",function(){return Ee}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var j=E("axios"),D=E.n(j),ee=E("./src/request.js"),W=E("./src/cache.js");E.d(V,"serializeQuery",function(){return W.serializeQuery});var ve=E("./src/config.js"),_e=E("./src/utilities.js");function de(Ae,Oe){if(Ae==null)return{};var We=ie(Ae,Oe),He,nt;if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(Ae);for(nt=0;nt<dt.length;nt++)He=dt[nt],!(Oe.indexOf(He)>=0)&&Object.prototype.propertyIsEnumerable.call(Ae,He)&&(We[He]=Ae[He])}return We}function ie(Ae,Oe){if(Ae==null)return{};var We={},He=Object.keys(Ae),nt,dt;for(dt=0;dt<He.length;dt++)nt=He[dt],!(Oe.indexOf(nt)>=0)&&(We[nt]=Ae[nt]);return We}function le(Ae,Oe){var We=Object.keys(Ae);if(Object.getOwnPropertySymbols){var He=Object.getOwnPropertySymbols(Ae);Oe&&(He=He.filter(function(nt){return Object.getOwnPropertyDescriptor(Ae,nt).enumerable})),We.push.apply(We,He)}return We}function J(Ae){for(var Oe=1;Oe<arguments.length;Oe++){var We=arguments[Oe]!=null?arguments[Oe]:{};Oe%2?le(Object(We),!0).forEach(function(He){te(Ae,He,We[He])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ae,Object.getOwnPropertyDescriptors(We)):le(Object(We)).forEach(function(He){Object.defineProperty(Ae,He,Object.getOwnPropertyDescriptor(We,He))})}return Ae}function te(Ae,Oe,We){return Oe in Ae?Object.defineProperty(Ae,Oe,{value:We,enumerable:!0,configurable:!0,writable:!0}):Ae[Oe]=We,Ae}function he(Ae,Oe,We,He,nt,dt,wt){try{var Rt=Ae[dt](wt),gt=Rt.value}catch(St){We(St);return}Rt.done?Oe(gt):Promise.resolve(gt).then(He,nt)}function be(Ae){return function(){var Oe=this,We=arguments;return new Promise(function(He,nt){var dt=Ae.apply(Oe,We);function wt(gt){he(dt,He,nt,wt,Rt,"next",gt)}function Rt(gt){he(dt,He,nt,wt,Rt,"throw",gt)}wt(void 0)})}}function Ee(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ae=Object(ve.makeConfig)(Ae);function Oe(He){return We.apply(this,arguments)}function We(){return We=be(regeneratorRuntime.mark(function He(nt){var dt,wt,Rt,gt,St;return regeneratorRuntime.wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:return dt=Object(ve.mergeRequestConfig)(Ae,nt),Bt.next=3,Object(ee.default)(dt,nt);case 3:if(wt=Bt.sent,Rt=wt.next,Object(_e.isFunction)(Rt)){Bt.next=7;break}return Bt.abrupt("return",Rt);case 7:return Bt.prev=7,Bt.next=10,dt.adapter(nt);case 10:wt=Bt.sent,Bt.next=16;break;case 13:Bt.prev=13,Bt.t0=Bt.catch(7),gt=Bt.t0;case 16:if(!gt){Bt.next=31;break}if(St=Object(_e.isFunction)(dt.readOnError)?dt.readOnError(gt,nt):dt.readOnError,!St){Bt.next=30;break}return Bt.prev=19,dt.acceptStale=!0,Bt.next=23,Object(ee.default)(dt,nt);case 23:return wt=Bt.sent,wt.next.request.stale=!0,Bt.abrupt("return",wt.next);case 28:Bt.prev=28,Bt.t1=Bt.catch(19);case 30:throw gt;case 31:return Bt.abrupt("return",Rt(wt));case 32:case"end":return Bt.stop()}},He,null,[[7,13],[19,28]])})),We.apply(this,arguments)}return{adapter:Oe,config:Ae,store:Ae.store}}function De(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Oe=J(J(J({},ve.defaults.axios),Ae),{},{cache:J(J({},ve.defaults.axios.cache),Ae.cache)}),We=Ee(Oe.cache);Oe.cache;var He=de(Oe,["cache"]),nt=D.a.create(J(J({},He),{},{adapter:We.adapter}));return nt.cache=We.store,nt}V.default={setup:De,setupCache:Ee,serializeQuery:W.serializeQuery}},"./src/cache.js":function(q,V,E){E.r(V),E.d(V,"read",function(){return le}),E.d(V,"write",function(){return de}),E.d(V,"key",function(){return te}),E.d(V,"invalidate",function(){return Ee}),E.d(V,"serializeQuery",function(){return De}),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("./src/utilities.js"),D=E("./node_modules/md5/md5.js"),ee=E.n(D),W=E("./src/serialize.js");function ve(Ae,Oe,We,He,nt,dt,wt){try{var Rt=Ae[dt](wt),gt=Rt.value}catch(St){We(St);return}Rt.done?Oe(gt):Promise.resolve(gt).then(He,nt)}function _e(Ae){return function(){var Oe=this,We=arguments;return new Promise(function(He,nt){var dt=Ae.apply(Oe,We);function wt(gt){ve(dt,He,nt,wt,Rt,"next",gt)}function Rt(gt){ve(dt,He,nt,wt,Rt,"throw",gt)}wt(void 0)})}}function de(Ae,Oe,We){return ie.apply(this,arguments)}function ie(){return ie=_e(regeneratorRuntime.mark(function Ae(Oe,We,He){var nt;return regeneratorRuntime.wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:return wt.prev=0,nt={expires:Oe.expires,data:Object(W.default)(Oe,We,He)},wt.next=4,Oe.store.setItem(Oe.uuid,nt);case 4:wt.next=19;break;case 6:if(wt.prev=6,wt.t0=wt.catch(0),Oe.debug("Could not store response",wt.t0),!Oe.clearOnError){wt.next=18;break}return wt.prev=10,wt.next=13,Oe.store.clear();case 13:wt.next=18;break;case 15:wt.prev=15,wt.t1=wt.catch(10),Oe.debug("Could not clear store",wt.t1);case 18:return wt.abrupt("return",!1);case 19:return wt.abrupt("return",!0);case 20:case"end":return wt.stop()}},Ae,null,[[0,6],[10,15]])})),ie.apply(this,arguments)}function le(Ae,Oe){return J.apply(this,arguments)}function J(){return J=_e(regeneratorRuntime.mark(function Ae(Oe,We){var He,nt,dt,wt,Rt,gt,St,Vt;return regeneratorRuntime.wrap(function(an){for(;;)switch(an.prev=an.next){case 0:return He=Oe.uuid,nt=Oe.ignoreCache,an.next=3,Oe.store.getItem(He);case 3:if(dt=an.sent,!(nt||!dt||!dt.data)){an.next=10;break}throw Oe.debug("cache-miss",We.url),wt=new Error,wt.reason="cache-miss",wt.message="Entry not found from cache",wt;case 10:if(Rt=dt.expires,gt=dt.data,St=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!St&&!Oe.acceptStale&&Rt!==0&&Rt<Date.now())){an.next=18;break}throw Oe.debug("cache-stale",We.url),Vt=new Error,Vt.reason="cache-stale",Vt.message="Entry is stale",Vt;case 18:return Oe.debug(Oe.acceptStale?"cache-hit-stale":"cache-hit",We.url),an.abrupt("return",gt);case 20:case"end":return an.stop()}},Ae)})),J.apply(this,arguments)}function te(Ae){if(Object(j.isFunction)(Ae.key))return Ae.key;var Oe;return Object(j.isString)(Ae.key)?Oe=function(He){var nt="".concat(He.baseURL?He.baseURL:"").concat(He.url),dt="".concat(Ae.key,"/").concat(nt).concat(De(He));return He.data?dt+ee()(He.data):dt}:Oe=function(He){var nt="".concat(He.baseURL?He.baseURL:"").concat(He.url),dt=nt+De(He);return He.data?dt+ee()(He.data):dt},Oe}function he(Ae,Oe){return be.apply(this,arguments)}function be(){return be=_e(regeneratorRuntime.mark(function Ae(Oe,We){var He;return regeneratorRuntime.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(He=We.method.toLowerCase(),!Oe.exclude.methods.includes(He)){dt.next=4;break}return dt.next=4,Oe.store.removeItem(Oe.uuid);case 4:case"end":return dt.stop()}},Ae)})),be.apply(this,arguments)}function Ee(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(j.isFunction)(Ae.invalidate)?Ae.invalidate:he}function De(Ae){if(!Ae.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Ae.params);var Oe=Ae.params,We=Ae.params instanceof URLSearchParams;return We||(Oe=new URLSearchParams,Object.keys(Ae.params).forEach(function(He){return Oe.append(He,Ae.params[He])})),"?".concat(Oe.toString())}V.default={read:le,write:de,key:te,invalidate:Ee,serializeQuery:De}},"./src/config.js":function(q,V,E){E.r(V),E.d(V,"defaults",function(){return J}),E.d(V,"makeConfig",function(){return he}),E.d(V,"mergeRequestConfig",function(){return be}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("axios"),D=E.n(j),ee=E("./src/memory.js"),W=E("./src/cache.js");function ve(Ee,De){var Ae=Object.keys(Ee);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(Ee);De&&(Oe=Oe.filter(function(We){return Object.getOwnPropertyDescriptor(Ee,We).enumerable})),Ae.push.apply(Ae,Oe)}return Ae}function _e(Ee){for(var De=1;De<arguments.length;De++){var Ae=arguments[De]!=null?arguments[De]:{};De%2?ve(Object(Ae),!0).forEach(function(Oe){de(Ee,Oe,Ae[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(Ae)):ve(Object(Ae)).forEach(function(Oe){Object.defineProperty(Ee,Oe,Object.getOwnPropertyDescriptor(Ae,Oe))})}return Ee}function de(Ee,De,Ae){return De in Ee?Object.defineProperty(Ee,De,{value:Ae,enumerable:!0,configurable:!0,writable:!0}):Ee[De]=Ae,Ee}var ie=function(){},le=function(){for(var De,Ae=arguments.length,Oe=new Array(Ae),We=0;We<Ae;We++)Oe[We]=arguments[We];return(De=console).log.apply(De,["[axios-cache-adapter]"].concat(Oe))},J={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:D.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},te=["limit","store","adapter","uuid","acceptStale"],he=function(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ae=_e(_e(_e({},J.cache),De),{},{exclude:_e(_e({},J.cache.exclude),De.exclude)});return Ae.key=Object(W.key)(Ae),Ae.invalidate=Object(W.invalidate)(Ae),Ae.debug!==!1?Ae.debug=typeof Ae.debug=="function"?Ae.debug:le:Ae.debug=ie,Ae.store||(Ae.store=new ee.default),Ae.debug("Global cache config",Ae),Ae},be=function(De,Ae){var Oe=Ae.cache||{};Oe&&te.forEach(function(He){return Oe[He]?delete Oe[He]:void 0});var We=_e(_e(_e({},De),Oe),{},{exclude:_e(_e({},De.exclude),Oe.exclude)});return We.debug===!0&&(We.debug=le),Oe.key&&(We.key=Object(W.key)(Oe)),We.uuid=We.key(Ae),De.debug("Request config for ".concat(Ae.url),We),We};V.default={defaults:J,makeConfig:he,mergeRequestConfig:be}},"./src/exclude.js":function(q,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js");var j=E("./src/utilities.js");function D(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=arguments.length>1?arguments[1]:void 0,ve=ee.exclude,_e=ve===void 0?{}:ve,de=ee.debug,ie=W.method.toLowerCase();if(ie==="head"||_e.methods.includes(ie))return de("Excluding request by HTTP method ".concat(W.url)),!0;if(typeof _e.filter=="function"&&_e.filter(W))return de("Excluding request by filter ".concat(W.url)),!0;var le=/\?.*$/.test(W.url)||Object(j.isObject)(W.params)&&Object.keys(W.params).length!==0||typeof URLSearchParams<"u"&&W.params instanceof URLSearchParams;if(_e.query&&le)return de("Excluding request by query ".concat(W.url)),!0;var J=_e.paths||[],te=J.some(function(he){return W.url.match(he)});return te?(de("Excluding request by url match ".concat(W.url)),!0):!1}V.default=D},"./src/index.node.js":function(q,V,E){E.r(V);var j=E("./src/api.js");E.d(V,"setup",function(){return j.setup}),E.d(V,"setupCache",function(){return j.setupCache}),E.d(V,"serializeQuery",function(){return j.serializeQuery});var D=E("./src/redis.js");E.d(V,"RedisStore",function(){return D.default});var ee=E("./src/redis-default.js");E.d(V,"RedisDefaultStore",function(){return ee.default}),V.default={setup:j.setup,setupCache:j.setupCache,serializeQuery:j.serializeQuery,RedisStore:D.default,RedisDefaultStore:ee.default}},"./src/limit.js":function(q,V,E){E.r(V),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function j(ve,_e,de,ie,le,J,te){try{var he=ve[J](te),be=he.value}catch(Ee){de(Ee);return}he.done?_e(be):Promise.resolve(be).then(ie,le)}function D(ve){return function(){var _e=this,de=arguments;return new Promise(function(ie,le){var J=ve.apply(_e,de);function te(be){j(J,ie,le,te,he,"next",be)}function he(be){j(J,ie,le,te,he,"throw",be)}te(void 0)})}}function ee(ve){return W.apply(this,arguments)}function W(){return W=D(regeneratorRuntime.mark(function ve(_e){var de,ie;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,_e.store.length();case 2:if(de=J.sent,!(de<_e.limit)){J.next=5;break}return J.abrupt("return");case 5:return _e.debug("Current store size: ".concat(de)),J.next=8,_e.store.iterate(function(te,he){ie||(ie={value:te,key:he}),te.expires<ie.value.expires&&(ie={value:te,key:he})});case 8:if(!ie){J.next=12;break}return _e.debug("Removing item: ".concat(ie.key)),J.next=12,_e.store.removeItem(ie.key);case 12:case"end":return J.stop()}},ve)})),W.apply(this,arguments)}V.default=ee},"./src/memory.js":function(q,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var j=E("./src/utilities.js");function D(ie,le,J,te,he,be,Ee){try{var De=ie[be](Ee),Ae=De.value}catch(Oe){J(Oe);return}De.done?le(Ae):Promise.resolve(Ae).then(te,he)}function ee(ie){return function(){var le=this,J=arguments;return new Promise(function(te,he){var be=ie.apply(le,J);function Ee(Ae){D(be,te,he,Ee,De,"next",Ae)}function De(Ae){D(be,te,he,Ee,De,"throw",Ae)}Ee(void 0)})}}function W(ie,le){if(!(ie instanceof le))throw new TypeError("Cannot call a class as a function")}function ve(ie,le){for(var J=0;J<le.length;J++){var te=le[J];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(ie,te.key,te)}}function _e(ie,le,J){return le&&ve(ie.prototype,le),J&&ve(ie,J),ie}var de=function(){function ie(){W(this,ie),this.store={}}return _e(ie,[{key:"getItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){var be;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return be=this.store[he]||null,De.abrupt("return",JSON.parse(be));case 2:case"end":return De.stop()}},te,this)}));function J(te){return le.apply(this,arguments)}return J}()},{key:"setItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he,be){return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return this.store[he]=JSON.stringify(be),De.abrupt("return",be);case 2:case"end":return De.stop()}},te,this)}));function J(te,he){return le.apply(this,arguments)}return J}()},{key:"removeItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:delete this.store[he];case 1:case"end":return Ee.stop()}},te,this)}));function J(te){return le.apply(this,arguments)}return J}()},{key:"clear",value:function(){var le=ee(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:this.store={};case 1:case"end":return be.stop()}},te,this)}));function J(){return le.apply(this,arguments)}return J}()},{key:"length",value:function(){var le=ee(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.abrupt("return",Object.keys(this.store).length);case 1:case"end":return be.stop()}},te,this)}));function J(){return le.apply(this,arguments)}return J}()},{key:"iterate",value:function(J){return Promise.all(Object(j.mapObject)(this.store,J))}}]),ie}();V.default=de},"./src/redis-default.js":function(q,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var j=E("util");function D(ie,le,J,te,he,be,Ee){try{var De=ie[be](Ee),Ae=De.value}catch(Oe){J(Oe);return}De.done?le(Ae):Promise.resolve(Ae).then(te,he)}function ee(ie){return function(){var le=this,J=arguments;return new Promise(function(te,he){var be=ie.apply(le,J);function Ee(Ae){D(be,te,he,Ee,De,"next",Ae)}function De(Ae){D(be,te,he,Ee,De,"throw",Ae)}Ee(void 0)})}}function W(ie,le){if(!(ie instanceof le))throw new TypeError("Cannot call a class as a function")}function ve(ie,le){for(var J=0;J<le.length;J++){var te=le[J];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(ie,te.key,te)}}function _e(ie,le,J){return le&&ve(ie.prototype,le),J&&ve(ie,J),ie}var de=function(){function ie(le){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};W(this,ie);var te=new TypeError("First parameter must be a valid RedisClient instance.");try{if(le.constructor.name!=="RedisClient")throw te}catch{throw te}this.client=le,this.prefix=J.prefix||"axios-cache",this.maxScanCount=J.maxScanCount||1e3,this.getAsync=Object(j.promisify)(le.get).bind(le),this.psetexAsync=Object(j.promisify)(le.psetex).bind(le),this.delAsync=Object(j.promisify)(le.del).bind(le),this.scanAsync=Object(j.promisify)(le.scan).bind(le)}return _e(ie,[{key:"calculateTTL",value:function(J){var te=Date.now();return J.expires&&J.expires>te?J.expires-te:-1}},{key:"transformKey",value:function(J){return this.prefix+"_"+J}},{key:"getItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){var be;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,this.getAsync(this.transformKey(he));case 2:if(De.t0=De.sent,De.t0){De.next=5;break}De.t0=null;case 5:return be=De.t0,De.abrupt("return",JSON.parse(be));case 7:case"end":return De.stop()}},te,this)}));function J(te){return le.apply(this,arguments)}return J}()},{key:"setItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he,be){var Ee,De;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(Ee=this.transformKey(he),De=this.calculateTTL(be),!(De>0)){Oe.next=5;break}return Oe.next=5,this.psetexAsync(Ee,De,JSON.stringify(be));case 5:return Oe.abrupt("return",be);case 6:case"end":return Oe.stop()}},te,this)}));function J(te,he){return le.apply(this,arguments)}return J}()},{key:"removeItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.delAsync(this.transformKey(he));case 2:case"end":return Ee.stop()}},te,this)}));function J(te){return le.apply(this,arguments)}return J}()},{key:"scan",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){var be,Ee;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:be="0";case 1:return Ae.next=3,this.scanAsync(be,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Ee=Ae.sent,be=Ee[0],Ae.next=7,he(Ee[1]);case 7:if(be!=="0"){Ae.next=1;break}case 8:case"end":return Ae.stop()}},te,this)}));function J(te){return le.apply(this,arguments)}return J}()},{key:"clear",value:function(){var le=ee(regeneratorRuntime.mark(function te(){var he=this;return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.scan(function(De){return he.delAsync(De)});case 2:case"end":return Ee.stop()}},te,this)}));function J(){return le.apply(this,arguments)}return J}()},{key:"length",value:function(){var le=ee(regeneratorRuntime.mark(function te(){var he;return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return he=0,Ee.next=3,this.scan(function(De){he+=De.length});case 3:return Ee.abrupt("return",he);case 4:case"end":return Ee.stop()}},te,this)}));function J(){return le.apply(this,arguments)}return J}()},{key:"iterate",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){var be=this,Ee,De;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return De=function(){return De=ee(regeneratorRuntime.mark(function He(nt){var dt,wt;return regeneratorRuntime.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return gt.next=2,this.getAsync(nt);case 2:if(gt.t0=gt.sent,gt.t0){gt.next=5;break}gt.t0=null;case 5:return dt=gt.t0,wt=JSON.parse(dt),gt.next=9,he(wt,nt);case 9:return gt.abrupt("return",gt.sent);case 10:case"end":return gt.stop()}},He,this)})),De.apply(this,arguments)},Ee=function(He){return De.apply(this,arguments)},Oe.next=4,this.scan(function(We){return Promise.all(We.map(Ee.bind(be)))});case 4:return Oe.abrupt("return",Promise.resolve([]));case 5:case"end":return Oe.stop()}},te,this)}));function J(te){return le.apply(this,arguments)}return J}()}]),ie}();V.default=de},"./src/redis.js":function(q,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var j=E("util"),D=E("./src/utilities.js");function ee(le,J,te,he,be,Ee,De){try{var Ae=le[Ee](De),Oe=Ae.value}catch(We){te(We);return}Ae.done?J(Oe):Promise.resolve(Oe).then(he,be)}function W(le){return function(){var J=this,te=arguments;return new Promise(function(he,be){var Ee=le.apply(J,te);function De(Oe){ee(Ee,he,be,De,Ae,"next",Oe)}function Ae(Oe){ee(Ee,he,be,De,Ae,"throw",Oe)}De(void 0)})}}function ve(le,J){if(!(le instanceof J))throw new TypeError("Cannot call a class as a function")}function _e(le,J){for(var te=0;te<J.length;te++){var he=J[te];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(le,he.key,he)}}function de(le,J,te){return J&&_e(le.prototype,J),te&&_e(le,te),le}var ie=function(){function le(J){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ve(this,le);var he=new TypeError("First parameter must be a valid RedisClient instance.");try{if(J.constructor.name!=="RedisClient")throw he}catch{throw he}this.client=J,this.HASH_KEY=te,this.hgetAsync=Object(j.promisify)(J.hget).bind(J),this.hsetAsync=Object(j.promisify)(J.hset).bind(J),this.hdelAsync=Object(j.promisify)(J.hdel).bind(J),this.delAsync=Object(j.promisify)(J.del).bind(J),this.hlenAsync=Object(j.promisify)(J.hlen).bind(J),this.hgetallAsync=Object(j.promisify)(J.hgetall).bind(J)}return de(le,[{key:"getItem",value:function(){var J=W(regeneratorRuntime.mark(function he(be){var Ee;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hgetAsync(this.HASH_KEY,be);case 2:if(Ae.t0=Ae.sent,Ae.t0){Ae.next=5;break}Ae.t0=null;case 5:return Ee=Ae.t0,Ae.abrupt("return",JSON.parse(Ee));case 7:case"end":return Ae.stop()}},he,this)}));function te(he){return J.apply(this,arguments)}return te}()},{key:"setItem",value:function(){var J=W(regeneratorRuntime.mark(function he(be,Ee){return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hsetAsync(this.HASH_KEY,be,JSON.stringify(Ee));case 2:return Ae.abrupt("return",Ee);case 3:case"end":return Ae.stop()}},he,this)}));function te(he,be){return J.apply(this,arguments)}return te}()},{key:"removeItem",value:function(){var J=W(regeneratorRuntime.mark(function he(be){return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,this.hdelAsync(this.HASH_KEY,be);case 2:case"end":return De.stop()}},he,this)}));function te(he){return J.apply(this,arguments)}return te}()},{key:"clear",value:function(){var J=W(regeneratorRuntime.mark(function he(){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Ee.stop()}},he,this)}));function te(){return J.apply(this,arguments)}return te}()},{key:"length",value:function(){var J=W(regeneratorRuntime.mark(function he(){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Ee.stop()}},he,this)}));function te(){return J.apply(this,arguments)}return te}()},{key:"iterate",value:function(){var J=W(regeneratorRuntime.mark(function he(be){var Ee;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Ee=Ae.sent,Ae.abrupt("return",Promise.all(Object(D.mapObject)(Ee,be)));case 4:case"end":return Ae.stop()}},he,this)}));function te(he){return J.apply(this,arguments)}return te}()}]),le}();V.default=ie},"./src/request.js":function(q,V,E){E.r(V),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("./src/response.js"),D=E("./src/exclude.js"),ee=E("./src/cache.js");function W(ie,le,J,te,he,be,Ee){try{var De=ie[be](Ee),Ae=De.value}catch(Oe){J(Oe);return}De.done?le(Ae):Promise.resolve(Ae).then(te,he)}function ve(ie){return function(){var le=this,J=arguments;return new Promise(function(te,he){var be=ie.apply(le,J);function Ee(Ae){W(be,te,he,Ee,De,"next",Ae)}function De(Ae){W(be,te,he,Ee,De,"throw",Ae)}Ee(void 0)})}}function _e(ie,le){return de.apply(this,arguments)}function de(){return de=ve(regeneratorRuntime.mark(function ie(le,J){var te,he,be;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return be=function(){return le.excludeFromCache=!0,{config:le,next:te}},le.debug("uuid",le.uuid),te=function(){for(var Oe=arguments.length,We=new Array(Oe),He=0;He<Oe;He++)We[He]=arguments[He];return j.default.apply(void 0,[le,J].concat(We))},De.next=5,le.invalidate(le,J);case 5:if(!Object(D.default)(le,J)){De.next=7;break}return De.abrupt("return",be());case 7:return De.prev=7,De.next=10,Object(ee.read)(le,J);case 10:return he=De.sent,he.config=J,he.request={fromCache:!0},De.abrupt("return",{config:le,next:he});case 16:if(De.prev=16,De.t0=De.catch(7),!(le.clearOnStale&&De.t0.reason==="cache-stale")){De.next=21;break}return De.next=21,le.store.removeItem(le.uuid);case 21:return De.abrupt("return",{config:le,next:te});case 22:case"end":return De.stop()}},ie,null,[[7,16]])})),de.apply(this,arguments)}V.default=_e},"./src/response.js":function(q,V,E){E.r(V),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("./src/limit.js"),D=E("./src/cache.js"),ee=E("./node_modules/cache-control-esm/index.js");function W(ie,le,J,te,he,be,Ee){try{var De=ie[be](Ee),Ae=De.value}catch(Oe){J(Oe);return}De.done?le(Ae):Promise.resolve(Ae).then(te,he)}function ve(ie){return function(){var le=this,J=arguments;return new Promise(function(te,he){var be=ie.apply(le,J);function Ee(Ae){W(be,te,he,Ee,De,"next",Ae)}function De(Ae){W(be,te,he,Ee,De,"throw",Ae)}Ee(void 0)})}}function _e(ie,le,J){return de.apply(this,arguments)}function de(){return de=ve(regeneratorRuntime.mark(function ie(le,J,te){var he,be,Ee,De,Ae;return regeneratorRuntime.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(he=te.request,be=he===void 0?{}:he,Ee=te.headers,De=Ee===void 0?{}:Ee,!(["arraybuffer","blob"].indexOf(be.responseType)>-1)){We.next=3;break}return We.abrupt("return",te);case 3:if(Ae={},le.readHeaders&&(De["cache-control"]?(Ae=Object(ee.parse)(De["cache-control"]),(Ae.noCache||Ae.noStore)&&(le.excludeFromCache=!0)):De.expires?le.expires=new Date(De.expires).getTime():le.expires=new Date().getTime()),le.excludeFromCache){We.next=15;break}if(Ae.maxAge||Ae.maxAge===0?le.expires=Date.now()+Ae.maxAge*1e3:le.readHeaders||(le.expires=le.maxAge===0?Date.now():Date.now()+le.maxAge),!le.limit){We.next=11;break}return le.debug("Detected limit: ".concat(le.limit)),We.next=11,Object(j.default)(le);case 11:return We.next=13,Object(D.write)(le,J,te);case 13:We.next=16;break;case 15:te.request.excludedFromCache=!0;case 16:return We.abrupt("return",te);case 17:case"end":return We.stop()}},ie)})),de.apply(this,arguments)}V.default=_e},"./src/serialize.js":function(q,V,E){E.r(V),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function j(W,ve){if(W==null)return{};var _e=D(W,ve),de,ie;if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(W);for(ie=0;ie<le.length;ie++)de=le[ie],!(ve.indexOf(de)>=0)&&Object.prototype.propertyIsEnumerable.call(W,de)&&(_e[de]=W[de])}return _e}function D(W,ve){if(W==null)return{};var _e={},de=Object.keys(W),ie,le;for(le=0;le<de.length;le++)ie=de[le],!(ve.indexOf(ie)>=0)&&(_e[ie]=W[ie]);return _e}function ee(W,ve,_e){if(_e.data)try{_e.data=JSON.parse(_e.data)}catch(ie){W.debug("Could not parse data as JSON",ie)}_e.request,_e.config;var de=j(_e,["request","config"]);return de}V.default=ee},"./src/utilities.js":function(q,V,E){E.r(V),E.d(V,"isObject",function(){return D}),E.d(V,"getTag",function(){return ee}),E.d(V,"isFunction",function(){return W}),E.d(V,"isString",function(){return ve}),E.d(V,"mapObject",function(){return _e}),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function j(de){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?j=function(le){return typeof le}:j=function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},j(de)}function D(de){var ie=j(de);return de!=null&&(ie==="object"||ie==="function")}function ee(de){return de===null?de===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(de)}function W(de){if(!D(de))return!1;var ie=ee(de);return ie==="[object Function]"||ie==="[object AsyncFunction]"||ie==="[object GeneratorFunction]"||ie==="[object Proxy]"}function ve(de){var ie=j(de);return ie==="string"||ie==="object"&&de!=null&&!Array.isArray(de)&&ee(de)==="[object String]"}function _e(de,ie){return D(de)?Object.keys(de).map(function(le){return ie(de[le],le)}):[]}},axios:function(q,V){q.exports=oe},util:function(q,V){q.exports=A.default}})})});const U={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},F=L.setupCache({maxAge:60*60*24*1e3}),ce=C.default.create({adapter:F.adapter}),K=async(Z,$={})=>{const oe={...U,...$},[q,V]=i.lngLatToGoogle(Z,oe.zoomBase),E=oe.tileUrl.replace("{z}",String(oe.zoomBase)).replace("{x}",String(q)).replace("{y}",String(V)),j={code:"",prefecture:"",city:""};let D;try{const ve=await ce.get(E,{responseType:"arraybuffer"});D=Buffer.from(ve.data,"binary")}catch(ve){throw new Error(ve)}const ee=new d.VectorTile(new b.default(D));let W=Object.keys(ee.layers);return Array.isArray(W)||(W=[W]),W.forEach(ve=>{const _e=ee.layers[ve];if(_e&&oe.layer===_e.name)for(let de=0;de<_e.length;de++){const ie=_e.feature(de).toGeoJSON(q,V,oe.zoomBase);W.length>1&&(ie.properties.vt_layer=ve);const le={type:"FeatureCollection",features:[ie]};t.geoContains(le,Z)&&(j.code=String(ie.id).length===5?String(ie.id):`0${String(ie.id)}`,j.prefecture=ie.properties.prefecture,j.city=ie.properties.city)}}),j};e.openReverseGeocoder=K})(tI);const b5={defaultComment:"更新地址",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},S5={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},E5={defaultComment:"住所を更新",postcodeField:{key:"addr:postcode",displayName:"郵便番号",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"都道府県",placeholder:"東京都",adminLevel:4},{key:"addr:city",displayName:"市町村と東京23区",placeholder:"千代田区",adminLevel:7},{key:"addr:suburb",displayName:"政令指定都市の区",placeholder:""},{key:"addr:quarter",displayName:"地名",placeholder:"外神田",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"丁目",placeholder:"1丁目"},{key:"addr:block_number",displayName:"番地",placeholder:"17"},{key:"addr:housenumber",displayName:"号",placeholder:"6",prefix:"-"}]},T5={defaultComment:"주소 업데이트",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},qS={JPN:E5,CHN:b5,DEU:S5,KOR:T5};function pA(e,t,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function C5(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!KS(e[0])||!KS(e[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:e};return pA(a,t,i)}function I5(e,t,i){i===void 0&&(i={});for(var a=0,c=e;a<c.length;a++){var p=c[a];if(p.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<p[p.length-1].length;d++)if(p[p.length-1][d]!==p[0][d])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:e};return pA(u,t,i)}function KS(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function mA(e,t,i){if(e!==null)for(var a,c,p,d,u,b,C,A=0,w=0,T,L=e.type,U=L==="FeatureCollection",F=L==="Feature",ce=U?e.features.length:1,K=0;K<ce;K++){C=U?e.features[K].geometry:F?e.geometry:e,T=C?C.type==="GeometryCollection":!1,u=T?C.geometries.length:1;for(var Z=0;Z<u;Z++){var $=0,oe=0;if(d=T?C.geometries[Z]:C,d!==null){b=d.coordinates;var q=d.type;switch(A=i&&(q==="Polygon"||q==="MultiPolygon")?1:0,q){case null:break;case"Point":if(t(b,w,K,$,oe)===!1)return!1;w++,$++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(t(b[a],w,K,$,oe)===!1)return!1;w++,q==="MultiPoint"&&$++}q==="LineString"&&$++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(c=0;c<b[a].length-A;c++){if(t(b[a][c],w,K,$,oe)===!1)return!1;w++}q==="MultiLineString"&&$++,q==="Polygon"&&oe++}q==="Polygon"&&$++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(oe=0,c=0;c<b[a].length;c++){for(p=0;p<b[a][c].length-A;p++){if(t(b[a][c][p],w,K,$,oe)===!1)return!1;w++}oe++}$++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(mA(d.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function A5(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function P5(e){return e.type==="Feature"?e.geometry:e}function k5(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var a=A5(e),c=P5(t),p=c.type,d=t.bbox,u=c.coordinates;if(d&&M5(a,d)===!1)return!1;p==="Polygon"&&(u=[u]);for(var b=!1,C=0;C<u.length&&!b;C++)if(YS(a,u[C][0],i.ignoreBoundary)){for(var A=!1,w=1;w<u[C].length&&!A;)YS(a,u[C][w],!i.ignoreBoundary)&&(A=!0),w++;A||(b=!0)}return b}function YS(e,t,i){var a=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,p=t.length-1;c<t.length;p=c++){var d=t[c][0],u=t[c][1],b=t[p][0],C=t[p][1],A=e[1]*(d-b)+u*(b-e[0])+C*(e[0]-d)===0&&(d-e[0])*(b-e[0])<=0&&(u-e[1])*(C-e[1])<=0;if(A)return!i;var w=u>e[1]!=C>e[1]&&e[0]<(b-d)*(e[1]-u)/(C-u)+d;w&&(a=!a)}return a}function M5(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function z5(e,t){t===void 0&&(t={});var i=0,a=0,c=0;return mA(e,function(p){i+=p[0],a+=p[1],c++},!0),C5([i/c,a/c],t.properties)}const R5=()=>{const[e,t]=_t.useState(!1);return{detectCountry:_t.useCallback(async(a,c)=>{t(!0);const d=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const u of d.features)if(k5([a,c],u.geometry))return console.log("country: ",u.properties),t(!1),u;t(!1)},[]),loadingCountry:e}},ev=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var u;const[c,p]=_t.useState((u=e.properties)==null?void 0:u[t.key]);_t.useEffect(()=>{var b;p((b=e.properties)==null?void 0:b[t.key])},[e]);const d=_t.useCallback(b=>{p(b.currentTarget.value),a&&a(b)},[]);return yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:d}),yt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(b=>{if(parseInt(b.tags.admin_level)===t.adminLevel)return yt.jsx("option",{value:b.tags.name},b.id);if(b.type==="node"&&t.adminLevel===9)return yt.jsx("option",{value:b.tags.name},b.id)})})]})},O5=({feature:e,fields:t})=>e.properties?yt.jsxs(yt.Fragment,{children:[t.postcodeField&&yt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,L5=({placeholder:e,defaultValue:t})=>{const[i,a]=_t.useState(t);_t.useEffect(()=>{a(t)},[t]);const c=_t.useCallback(p=>{a(p.currentTarget.value)},[]);return yt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var Fg={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Fg.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,p="Expected a function",d="__lodash_hash_undefined__",u=1,b=2,C=1/0,A=9007199254740991,w="[object Arguments]",T="[object Array]",L="[object Boolean]",U="[object Date]",F="[object Error]",ce="[object Function]",K="[object GeneratorFunction]",Z="[object Map]",$="[object Number]",oe="[object Object]",q="[object Promise]",V="[object RegExp]",E="[object Set]",j="[object String]",D="[object Symbol]",ee="[object WeakMap]",W="[object ArrayBuffer]",ve="[object DataView]",_e="[object Float32Array]",de="[object Float64Array]",ie="[object Int8Array]",le="[object Int16Array]",J="[object Int32Array]",te="[object Uint8Array]",he="[object Uint8ClampedArray]",be="[object Uint16Array]",Ee="[object Uint32Array]",De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,Oe=/^\./,We=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,He=/[\\^$.*+?()[\]{}|]/g,nt=/\\(\\)?/g,dt=/\w*$/,wt=/^\[object .+?Constructor\]$/,Rt=/^(?:0|[1-9]\d*)$/,gt={};gt[_e]=gt[de]=gt[ie]=gt[le]=gt[J]=gt[te]=gt[he]=gt[be]=gt[Ee]=!0,gt[w]=gt[T]=gt[W]=gt[L]=gt[ve]=gt[U]=gt[F]=gt[ce]=gt[Z]=gt[$]=gt[oe]=gt[V]=gt[E]=gt[j]=gt[ee]=!1;var St={};St[w]=St[T]=St[W]=St[ve]=St[L]=St[U]=St[_e]=St[de]=St[ie]=St[le]=St[J]=St[Z]=St[$]=St[oe]=St[V]=St[E]=St[j]=St[D]=St[te]=St[he]=St[be]=St[Ee]=!0,St[F]=St[ce]=St[ee]=!1;var Vt=typeof $l=="object"&&$l&&$l.Object===Object&&$l,Bt=typeof self=="object"&&self&&self.Object===Object&&self,an=Vt||Bt||Function("return this")(),Sn=t&&!t.nodeType&&t,et=Sn&&!0&&e&&!e.nodeType&&e,ln=et&&et.exports===Sn,wn=ln&&Vt.process,xe=function(){try{return wn&&wn.binding("util")}catch{}}(),N=xe&&xe.isTypedArray;function B(G,ye){return G.set(ye[0],ye[1]),G}function we(G,ye){return G.add(ye),G}function Xe(G,ye,Be){switch(Be.length){case 0:return G.call(ye);case 1:return G.call(ye,Be[0]);case 2:return G.call(ye,Be[0],Be[1]);case 3:return G.call(ye,Be[0],Be[1],Be[2])}return G.apply(ye,Be)}function Qe(G,ye){for(var Be=-1,at=G?G.length:0;++Be<at&&ye(G[Be],Be,G)!==!1;);return G}function ct(G,ye){for(var Be=-1,at=ye.length,Ot=G.length;++Be<at;)G[Ot+Be]=ye[Be];return G}function ae(G,ye,Be,at){var Ot=-1,Ct=G?G.length:0;for(at&&Ct&&(Be=G[++Ot]);++Ot<Ct;)Be=ye(Be,G[Ot],Ot,G);return Be}function R(G,ye){for(var Be=-1,at=G?G.length:0;++Be<at;)if(ye(G[Be],Be,G))return!0;return!1}function z(G){return function(ye){return ye==null?i:ye[G]}}function Se(G,ye){for(var Be=-1,at=Array(G);++Be<G;)at[Be]=ye(Be);return at}function Ve(G){return function(ye){return G(ye)}}function tt(G,ye){return G==null?i:G[ye]}function ot(G){var ye=!1;if(G!=null&&typeof G.toString!="function")try{ye=!!(G+"")}catch{}return ye}function ut(G){var ye=-1,Be=Array(G.size);return G.forEach(function(at,Ot){Be[++ye]=[Ot,at]}),Be}function Nt(G,ye){return function(Be){return G(ye(Be))}}function jt(G){var ye=-1,Be=Array(G.size);return G.forEach(function(at){Be[++ye]=at}),Be}var mn=Array.prototype,_n=Function.prototype,sn=Object.prototype,ki=an["__core-js_shared__"],rr=function(){var G=/[^.]+$/.exec(ki&&ki.keys&&ki.keys.IE_PROTO||"");return G?"Symbol(src)_1."+G:""}(),Me=_n.toString,re=sn.hasOwnProperty,ue=Me.call(Object),me=sn.toString,Ie=RegExp("^"+Me.call(re).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=ln?an.Buffer:i,Re=an.Symbol,$e=an.Uint8Array,Fe=Nt(Object.getPrototypeOf,Object),Ye=Object.create,ft=sn.propertyIsEnumerable,ht=mn.splice,pt=Object.getOwnPropertySymbols,Xt=Ne?Ne.isBuffer:i,Qt=Nt(Object.keys,Object),pn=Math.max,un=Ko(an,"DataView"),bn=Ko(an,"Map"),Dn=Ko(an,"Promise"),Wn=Ko(an,"Set"),ur=Ko(an,"WeakMap"),hn=Ko(Object,"create"),ir=!ft.call({valueOf:1},"valueOf"),Er=wi(un),ni=wi(bn),li=wi(Dn),zr=wi(Wn),ho=wi(ur),ca=Re?Re.prototype:i,ha=ca?ca.valueOf:i,Bn=ca?ca.toString:i;function Pn(){}function Eo(G){var ye=-1,Be=G?G.length:0;for(this.clear();++ye<Be;){var at=G[ye];this.set(at[0],at[1])}}function vi(){this.__data__=hn?hn(null):{}}function ui(G){return this.has(G)&&delete this.__data__[G]}function da(G){var ye=this.__data__;if(hn){var Be=ye[G];return Be===d?i:Be}return re.call(ye,G)?ye[G]:i}function Mi(G){var ye=this.__data__;return hn?ye[G]!==i:re.call(ye,G)}function zi(G,ye){var Be=this.__data__;return Be[G]=hn&&ye===i?d:ye,this}Eo.prototype.clear=vi,Eo.prototype.delete=ui,Eo.prototype.get=da,Eo.prototype.has=Mi,Eo.prototype.set=zi;function ci(G){var ye=-1,Be=G?G.length:0;for(this.clear();++ye<Be;){var at=G[ye];this.set(at[0],at[1])}}function el(){this.__data__=[]}function wr(G){var ye=this.__data__,Be=ga(ye,G);if(Be<0)return!1;var at=ye.length-1;return Be==at?ye.pop():ht.call(ye,Be,1),!0}function fa(G){var ye=this.__data__,Be=ga(ye,G);return Be<0?i:ye[Be][1]}function Xo(G){return ga(this.__data__,G)>-1}function Qn(G,ye){var Be=this.__data__,at=ga(Be,G);return at<0?Be.push([G,ye]):Be[at][1]=ye,this}ci.prototype.clear=el,ci.prototype.delete=wr,ci.prototype.get=fa,ci.prototype.has=Xo,ci.prototype.set=Qn;function Ri(G){var ye=-1,Be=G?G.length:0;for(this.clear();++ye<Be;){var at=G[ye];this.set(at[0],at[1])}}function _i(){this.__data__={hash:new Eo,map:new(bn||ci),string:new Eo}}function tl(G){return ba(this,G).delete(G)}function fo(G){return ba(this,G).get(G)}function pa(G){return ba(this,G).has(G)}function Vn(G,ye){return ba(this,G).set(G,ye),this}Ri.prototype.clear=_i,Ri.prototype.delete=tl,Ri.prototype.get=fo,Ri.prototype.has=pa,Ri.prototype.set=Vn;function ps(G){var ye=-1,Be=G?G.length:0;for(this.__data__=new Ri;++ye<Be;)this.add(G[ye])}function Ds(G){return this.__data__.set(G,d),this}function qo(G){return this.__data__.has(G)}ps.prototype.add=ps.prototype.push=Ds,ps.prototype.has=qo;function hi(G){this.__data__=new ci(G)}function ma(){this.__data__=new ci}function $h(G){return this.__data__.delete(G)}function sc(G){return this.__data__.get(G)}function nl(G){return this.__data__.has(G)}function Vh(G,ye){var Be=this.__data__;if(Be instanceof ci){var at=Be.__data__;if(!bn||at.length<c-1)return at.push([G,ye]),this;Be=this.__data__=new Ri(at)}return Be.set(G,ye),this}hi.prototype.clear=ma,hi.prototype.delete=$h,hi.prototype.get=sc,hi.prototype.has=nl,hi.prototype.set=Vh;function hu(G,ye){var Be=Qr(G)||Co(G)?Se(G.length,String):[],at=Be.length,Ot=!!at;for(var Ct in G)(ye||re.call(G,Ct))&&!(Ot&&(Ct=="length"||kn(Ct,at)))&&Be.push(Ct);return Be}function du(G,ye,Be){(Be!==i&&!To(G[ye],Be)||typeof ye=="number"&&Be===i&&!(ye in G))&&(G[ye]=Be)}function fu(G,ye,Be){var at=G[ye];(!(re.call(G,ye)&&To(at,Be))||Be===i&&!(ye in G))&&(G[ye]=Be)}function ga(G,ye){for(var Be=G.length;Be--;)if(To(G[Be][0],ye))return Be;return-1}function rl(G,ye){return G&&yu(ye,Xi(ye),G)}function ms(G,ye,Be,at,Ot,Ct,Ht){var Wt;if(at&&(Wt=Ct?at(G,Ot,Ct,Ht):at(G)),Wt!==i)return Wt;if(!Oi(G))return G;var gn=Qr(G);if(gn){if(Wt=Vs(G),!ye)return pc(G,Wt)}else{var En=Zi(G),An=En==ce||En==K;if(Gs(G))return pu(G,ye);if(En==oe||En==w||An&&!Ct){if(ot(G))return Ct?G:{};if(Wt=gc(An?{}:G),!ye)return Hh(G,rl(Wt,G))}else{if(!St[En])return Ct?G:{};Wt=xu(G,En,ms,ye)}}Ht||(Ht=new hi);var Kn=Ht.get(G);if(Kn)return Kn;if(Ht.set(G,Wt),!gn)var Un=Be?_u(G):Xi(G);return Qe(Un||G,function(Yn,cr){Un&&(cr=Yn,Yn=G[cr]),fu(Wt,cr,ms(Yn,ye,Be,at,cr,G,Ht))}),Wt}function ac(G){return Oi(G)?Ye(G):{}}var il=Zh(gs),lc=Xh();function gs(G,ye){return G&&lc(G,ye,Xi)}function ya(G,ye){ye=pl(ye,G)?[ye]:ul(ye);for(var Be=0,at=ye.length;G!=null&&Be<at;)G=G[Nn(ye[Be++])];return Be&&Be==at?G:i}function xi(G,ye,Be){var at=ye(G);return Qr(G)?at:ct(at,Be(G))}function va(G){return me.call(G)}function ol(G,ye){return G!=null&&ye in Object(G)}function ys(G,ye,Be,at,Ot){return G===ye?!0:G==null||ye==null||!Oi(G)&&!Io(ye)?G!==G&&ye!==ye:_a(G,ye,ys,Be,at,Ot)}function _a(G,ye,Be,at,Ot,Ct){var Ht=Qr(G),Wt=Qr(ye),gn=T,En=T;Ht||(gn=Zi(G),gn=gn==w?oe:gn),Wt||(En=Zi(ye),En=En==w?oe:En);var An=gn==oe&&!ot(G),Kn=En==oe&&!ot(ye),Un=gn==En;if(Un&&!An)return Ct||(Ct=new hi),Ht||Ca(G)?hl(G,ye,Be,at,Ot,Ct):dl(G,ye,gn,Be,at,Ot,Ct);if(!(Ot&b)){var Yn=An&&re.call(G,"__wrapped__"),cr=Kn&&re.call(ye,"__wrapped__");if(Yn||cr){var Rr=Yn?G.value():G,ri=cr?ye.value():ye;return Ct||(Ct=new hi),Be(Rr,ri,at,Ot,Ct)}}return Un?(Ct||(Ct=new hi),vu(G,ye,Be,at,Ot,Ct)):!1}function xa(G,ye,Be,at){var Ot=Be.length,Ct=Ot,Ht=!at;if(G==null)return!Ct;for(G=Object(G);Ot--;){var Wt=Be[Ot];if(Ht&&Wt[2]?Wt[1]!==G[Wt[0]]:!(Wt[0]in G))return!1}for(;++Ot<Ct;){Wt=Be[Ot];var gn=Wt[0],En=G[gn],An=Wt[1];if(Ht&&Wt[2]){if(En===i&&!(gn in G))return!1}else{var Kn=new hi;if(at)var Un=at(En,An,gn,G,ye,Kn);if(!(Un===i?ys(An,En,at,u|b,Kn):Un))return!1}}return!0}function wa(G){if(!Oi(G)||Sa(G))return!1;var ye=Hs(G)||ot(G)?Ie:wt;return ye.test(wi(G))}function Gh(G){return Io(G)&&Ta(G.length)&&!!gt[me.call(G)]}function uc(G){return typeof G=="function"?G:G==null?Po:typeof G=="object"?Qr(G)?sl(G[0],G[1]):vs(G):Sl(G)}function cc(G){if(!er(G))return Qt(G);var ye=[];for(var Be in Object(G))re.call(G,Be)&&Be!="constructor"&&ye.push(Be);return ye}function hc(G){if(!Oi(G))return wu(G);var ye=er(G),Be=[];for(var at in G)at=="constructor"&&(ye||!re.call(G,at))||Be.push(at);return Be}function vs(G){var ye=mc(G);return ye.length==1&&ye[0][2]?In(ye[0][0],ye[0][1]):function(Be){return Be===G||xa(Be,G,ye)}}function sl(G,ye){return pl(G)&&vc(ye)?In(Nn(G),ye):function(Be){var at=ei(Be,G);return at===i&&at===ye?bl(Be,G):ys(ye,at,i,u|b)}}function Yr(G,ye,Be,at,Ot){if(G!==ye){if(!(Qr(ye)||Ca(ye)))var Ct=hc(ye);Qe(Ct||ye,function(Ht,Wt){if(Ct&&(Wt=Ht,Ht=ye[Wt]),Oi(Ht))Ot||(Ot=new hi),Jr(G,ye,Wt,Be,Yr,at,Ot);else{var gn=at?at(G[Wt],Ht,Wt+"",G,ye,Ot):i;gn===i&&(gn=Ht),du(G,Wt,gn)}})}}function Jr(G,ye,Be,at,Ot,Ct,Ht){var Wt=G[Be],gn=ye[Be],En=Ht.get(gn);if(En){du(G,Be,En);return}var An=Ct?Ct(Wt,gn,Be+"",G,ye,Ht):i,Kn=An===i;Kn&&(An=gn,Qr(gn)||Ca(gn)?Qr(Wt)?An=Wt:vl(Wt)?An=pc(Wt):(Kn=!1,An=ms(gn,!0)):xl(gn)||Co(gn)?Co(Wt)?An=tr(Wt):!Oi(Wt)||at&&Hs(Wt)?(Kn=!1,An=ms(gn,!0)):An=Wt:Kn=!1),Kn&&(Ht.set(gn,An),Ot(An,gn,at,Ct,Ht),Ht.delete(gn)),du(G,Be,An)}function Ln(G){return function(ye){return ya(ye,G)}}function al(G,ye){return ye=pn(ye===i?G.length-1:ye,0),function(){for(var Be=arguments,at=-1,Ot=pn(Be.length-ye,0),Ct=Array(Ot);++at<Ot;)Ct[at]=Be[ye+at];at=-1;for(var Ht=Array(ye+1);++at<ye;)Ht[at]=Be[at];return Ht[ye]=Ct,Xe(G,this,Ht)}}function ll(G){if(typeof G=="string")return G;if(wl(G))return Bn?Bn.call(G):"";var ye=G+"";return ye=="0"&&1/G==-C?"-0":ye}function ul(G){return Qr(G)?G:qn(G)}function pu(G,ye){if(ye)return G.slice();var Be=new G.constructor(G.length);return G.copy(Be),Be}function Bs(G){var ye=new G.constructor(G.byteLength);return new $e(ye).set(new $e(G)),ye}function mu(G,ye){var Be=ye?Bs(G.buffer):G.buffer;return new G.constructor(Be,G.byteOffset,G.byteLength)}function gu(G,ye,Be){var at=ye?Be(ut(G),!0):ut(G);return ae(at,B,new G.constructor)}function cl(G){var ye=new G.constructor(G.source,dt.exec(G));return ye.lastIndex=G.lastIndex,ye}function dc(G,ye,Be){var at=ye?Be(jt(G),!0):jt(G);return ae(at,we,new G.constructor)}function fc(G){return ha?Object(ha.call(G)):{}}function Ns(G,ye){var Be=ye?Bs(G.buffer):G.buffer;return new G.constructor(Be,G.byteOffset,G.length)}function pc(G,ye){var Be=-1,at=G.length;for(ye||(ye=Array(at));++Be<at;)ye[Be]=G[Be];return ye}function yu(G,ye,Be,at){Be||(Be={});for(var Ot=-1,Ct=ye.length;++Ot<Ct;){var Ht=ye[Ot],Wt=at?at(Be[Ht],G[Ht],Ht,Be,G):i;fu(Be,Ht,Wt===i?G[Ht]:Wt)}return Be}function Hh(G,ye){return yu(G,Yo(G),ye)}function Wh(G){return al(function(ye,Be){var at=-1,Ot=Be.length,Ct=Ot>1?Be[Ot-1]:i,Ht=Ot>2?Be[2]:i;for(Ct=G.length>3&&typeof Ct=="function"?(Ot--,Ct):i,Ht&&fl(Be[0],Be[1],Ht)&&(Ct=Ot<3?i:Ct,Ot=1),ye=Object(ye);++at<Ot;){var Wt=Be[at];Wt&&G(ye,Wt,at,Ct)}return ye})}function Zh(G,ye){return function(Be,at){if(Be==null)return Be;if(!po(Be))return G(Be,at);for(var Ot=Be.length,Ct=ye?Ot:-1,Ht=Object(Be);(ye?Ct--:++Ct<Ot)&&at(Ht[Ct],Ct,Ht)!==!1;);return Be}}function Xh(G){return function(ye,Be,at){for(var Ot=-1,Ct=Object(ye),Ht=at(ye),Wt=Ht.length;Wt--;){var gn=Ht[G?Wt:++Ot];if(Be(Ct[gn],gn,Ct)===!1)break}return ye}}function hl(G,ye,Be,at,Ot,Ct){var Ht=Ot&b,Wt=G.length,gn=ye.length;if(Wt!=gn&&!(Ht&&gn>Wt))return!1;var En=Ct.get(G);if(En&&Ct.get(ye))return En==ye;var An=-1,Kn=!0,Un=Ot&u?new ps:i;for(Ct.set(G,ye),Ct.set(ye,G);++An<Wt;){var Yn=G[An],cr=ye[An];if(at)var Rr=Ht?at(cr,Yn,An,ye,G,Ct):at(Yn,cr,An,G,ye,Ct);if(Rr!==i){if(Rr)continue;Kn=!1;break}if(Un){if(!R(ye,function(ri,_s){if(!Un.has(_s)&&(Yn===ri||Be(Yn,ri,at,Ot,Ct)))return Un.add(_s)})){Kn=!1;break}}else if(!(Yn===cr||Be(Yn,cr,at,Ot,Ct))){Kn=!1;break}}return Ct.delete(G),Ct.delete(ye),Kn}function dl(G,ye,Be,at,Ot,Ct,Ht){switch(Be){case ve:if(G.byteLength!=ye.byteLength||G.byteOffset!=ye.byteOffset)return!1;G=G.buffer,ye=ye.buffer;case W:return!(G.byteLength!=ye.byteLength||!at(new $e(G),new $e(ye)));case L:case U:case $:return To(+G,+ye);case F:return G.name==ye.name&&G.message==ye.message;case V:case j:return G==ye+"";case Z:var Wt=ut;case E:var gn=Ct&b;if(Wt||(Wt=jt),G.size!=ye.size&&!gn)return!1;var En=Ht.get(G);if(En)return En==ye;Ct|=u,Ht.set(G,ye);var An=hl(Wt(G),Wt(ye),at,Ot,Ct,Ht);return Ht.delete(G),An;case D:if(ha)return ha.call(G)==ha.call(ye)}return!1}function vu(G,ye,Be,at,Ot,Ct){var Ht=Ot&b,Wt=Xi(G),gn=Wt.length,En=Xi(ye),An=En.length;if(gn!=An&&!Ht)return!1;for(var Kn=gn;Kn--;){var Un=Wt[Kn];if(!(Ht?Un in ye:re.call(ye,Un)))return!1}var Yn=Ct.get(G);if(Yn&&Ct.get(ye))return Yn==ye;var cr=!0;Ct.set(G,ye),Ct.set(ye,G);for(var Rr=Ht;++Kn<gn;){Un=Wt[Kn];var ri=G[Un],_s=ye[Un];if(at)var Tl=Ht?at(_s,ri,Un,ye,G,Ct):at(ri,_s,Un,G,ye,Ct);if(!(Tl===i?ri===_s||Be(ri,_s,at,Ot,Ct):Tl)){cr=!1;break}Rr||(Rr=Un=="constructor")}if(cr&&!Rr){var Cl=G.constructor,ko=ye.constructor;Cl!=ko&&"constructor"in G&&"constructor"in ye&&!(typeof Cl=="function"&&Cl instanceof Cl&&typeof ko=="function"&&ko instanceof ko)&&(cr=!1)}return Ct.delete(G),Ct.delete(ye),cr}function _u(G){return xi(G,Xi,Yo)}function Us(){var G=Pn.iteratee||Qo;return G=G===Qo?uc:G,arguments.length?G(arguments[0],arguments[1]):G}function ba(G,ye){var Be=G.__data__;return yc(ye)?Be[typeof ye=="string"?"string":"hash"]:Be.map}function mc(G){for(var ye=Xi(G),Be=ye.length;Be--;){var at=ye[Be],Ot=G[at];ye[Be]=[at,Ot,vc(Ot)]}return ye}function Ko(G,ye){var Be=tt(G,ye);return wa(Be)?Be:i}var Yo=pt?Nt(pt,Object):Ia,Zi=va;(un&&Zi(new un(new ArrayBuffer(1)))!=ve||bn&&Zi(new bn)!=Z||Dn&&Zi(Dn.resolve())!=q||Wn&&Zi(new Wn)!=E||ur&&Zi(new ur)!=ee)&&(Zi=function(G){var ye=me.call(G),Be=ye==oe?G.constructor:i,at=Be?wi(Be):i;if(at)switch(at){case Er:return ve;case ni:return Z;case li:return q;case zr:return E;case ho:return ee}return ye});function $s(G,ye,Be){ye=pl(ye,G)?[ye]:ul(ye);for(var at,Ot=-1,Ht=ye.length;++Ot<Ht;){var Ct=Nn(ye[Ot]);if(!(at=G!=null&&Be(G,Ct)))break;G=G[Ct]}if(at)return at;var Ht=G?G.length:0;return!!Ht&&Ta(Ht)&&kn(Ct,Ht)&&(Qr(G)||Co(G))}function Vs(G){var ye=G.length,Be=G.constructor(ye);return ye&&typeof G[0]=="string"&&re.call(G,"index")&&(Be.index=G.index,Be.input=G.input),Be}function gc(G){return typeof G.constructor=="function"&&!er(G)?ac(Fe(G)):{}}function xu(G,ye,Be,at){var Ot=G.constructor;switch(ye){case W:return Bs(G);case L:case U:return new Ot(+G);case ve:return mu(G,at);case _e:case de:case ie:case le:case J:case te:case he:case be:case Ee:return Ns(G,at);case Z:return gu(G,at,Be);case $:case j:return new Ot(G);case V:return cl(G);case E:return dc(G,at,Be);case D:return fc(G)}}function kn(G,ye){return ye=ye??A,!!ye&&(typeof G=="number"||Rt.test(G))&&G>-1&&G%1==0&&G<ye}function fl(G,ye,Be){if(!Oi(Be))return!1;var at=typeof ye;return(at=="number"?po(Be)&&kn(ye,Be.length):at=="string"&&ye in Be)?To(Be[ye],G):!1}function pl(G,ye){if(Qr(G))return!1;var Be=typeof G;return Be=="number"||Be=="symbol"||Be=="boolean"||G==null||wl(G)?!0:Ae.test(G)||!De.test(G)||ye!=null&&G in Object(ye)}function yc(G){var ye=typeof G;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?G!=="__proto__":G===null}function Sa(G){return!!rr&&rr in G}function er(G){var ye=G&&G.constructor,Be=typeof ye=="function"&&ye.prototype||sn;return G===Be}function vc(G){return G===G&&!Oi(G)}function In(G,ye){return function(Be){return Be==null?!1:Be[G]===ye&&(ye!==i||G in Object(Be))}}function wu(G){var ye=[];if(G!=null)for(var Be in Object(G))ye.push(Be);return ye}var qn=Ea(function(G){G=Ao(G);var ye=[];return Oe.test(G)&&ye.push(""),G.replace(We,function(Be,at,Ot,Ct){ye.push(Ot?Ct.replace(nt,"$1"):at||Be)}),ye});function Nn(G){if(typeof G=="string"||wl(G))return G;var ye=G+"";return ye=="0"&&1/G==-C?"-0":ye}function wi(G){if(G!=null){try{return Me.call(G)}catch{}try{return G+""}catch{}}return""}function ml(G){for(var ye=-1,Be=G?G.length:0,at=0,Ot=[];++ye<Be;){var Ct=G[ye];Ct&&(Ot[at++]=Ct)}return Ot}function gl(G,ye){var Be=Qr(G)?Qe:il;return Be(G,Us(ye,3))}function Ea(G,ye){if(typeof G!="function"||ye&&typeof ye!="function")throw new TypeError(p);var Be=function(){var at=arguments,Ot=ye?ye.apply(this,at):at[0],Ct=Be.cache;if(Ct.has(Ot))return Ct.get(Ot);var Ht=G.apply(this,at);return Be.cache=Ct.set(Ot,Ht),Ht};return Be.cache=new(Ea.Cache||Ri),Be}Ea.Cache=Ri;function yl(G){return ms(G,!1,!0)}function To(G,ye){return G===ye||G!==G&&ye!==ye}function Co(G){return vl(G)&&re.call(G,"callee")&&(!ft.call(G,"callee")||me.call(G)==w)}var Qr=Array.isArray;function po(G){return G!=null&&Ta(G.length)&&!Hs(G)}function vl(G){return Io(G)&&po(G)}var Gs=Xt||El;function _l(G){if(po(G)&&(Qr(G)||typeof G=="string"||typeof G.splice=="function"||Gs(G)||Co(G)))return!G.length;var ye=Zi(G);if(ye==Z||ye==E)return!G.size;if(ir||er(G))return!Qt(G).length;for(var Be in G)if(re.call(G,Be))return!1;return!0}function Hs(G){var ye=Oi(G)?me.call(G):"";return ye==ce||ye==K}function Ta(G){return typeof G=="number"&&G>-1&&G%1==0&&G<=A}function Oi(G){var ye=typeof G;return!!G&&(ye=="object"||ye=="function")}function Io(G){return!!G&&typeof G=="object"}function xl(G){if(!Io(G)||me.call(G)!=oe||ot(G))return!1;var ye=Fe(G);if(ye===null)return!0;var Be=re.call(ye,"constructor")&&ye.constructor;return typeof Be=="function"&&Be instanceof Be&&Me.call(Be)==ue}function wl(G){return typeof G=="symbol"||Io(G)&&me.call(G)==D}var Ca=N?Ve(N):Gh;function tr(G){return yu(G,bu(G))}function Ao(G){return G==null?"":ll(G)}function ei(G,ye,Be){var at=G==null?i:ya(G,ye);return at===i?Be:at}function bl(G,ye){return G!=null&&$s(G,ye,ol)}function Xi(G){return po(G)?hu(G):cc(G)}function bu(G){return po(G)?hu(G,!0):hc(G)}var Jo=Wh(function(G,ye,Be){Yr(G,ye,Be)});function Po(G){return G}function Qo(G){return uc(typeof G=="function"?G:ms(G,!0))}function Sl(G){return pl(G)?z(Nn(G)):Ln(G)}function Ia(){return[]}function El(){return!1}Pn.compact=ml,Pn.iteratee=Qo,Pn.keys=Xi,Pn.keysIn=bu,Pn.memoize=Ea,Pn.merge=Jo,Pn.property=Sl,Pn.toPlainObject=tr,Pn.clone=yl,Pn.eq=To,Pn.forEach=gl,Pn.get=ei,Pn.hasIn=bl,Pn.identity=Po,Pn.isArguments=Co,Pn.isArray=Qr,Pn.isArrayLike=po,Pn.isArrayLikeObject=vl,Pn.isBuffer=Gs,Pn.isEmpty=_l,Pn.isFunction=Hs,Pn.isLength=Ta,Pn.isObject=Oi,Pn.isObjectLike=Io,Pn.isPlainObject=xl,Pn.isSymbol=wl,Pn.isTypedArray=Ca,Pn.stubArray=Ia,Pn.stubFalse=El,Pn.toString=Ao,Pn.each=gl,Pn.VERSION=a,et&&((et.exports=Pn)._=Pn,Sn._=Pn)}).call($l)})(Fg,Fg.exports);var F5=Fg.exports,j5=Lm;function Lm(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)Lm(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)Lm(e.geometries[a],t);else if(i==="Feature")Lm(e.geometry,t);else if(i==="Polygon")JS(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)JS(e.coordinates[a],t);return e}function JS(e,t){if(e.length!==0){QS(e[0],t);for(var i=1;i<e.length;i++)QS(e[i],!t)}}function QS(e,t){for(var i=0,a=0,c=0,p=e.length,d=p-1;c<p;d=c++){var u=(e[c][0]-e[d][0])*(e[d][1]+e[c][1]),b=i+u;a+=Math.abs(i)>=Math.abs(u)?i-b+u:u-b+i,i=b}i+a>=0!=!!t&&e.reverse()}const D5=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var B5=D5,zn=F5,mm=j5,Fm={};B5.forEach(function(e){if(e.polygon==="all")Fm[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),Fm[e.key]={},Fm[e.key][t]=i}});function N5(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:zn.merge(e,t)}var jg={};jg=function(e,t,i){t=zn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:Fm,deduplicator:N5},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=p(e):a=c(e),a;function c(b){var C=new Array,A=new Array,w=new Array;function T(q){var V=zn.clone(q);V.lat=q.center.lat,V.lon=q.center.lon,V.__is_center_placeholder=!0,C.push(V)}function L(q){var V=zn.clone(q);V.nodes=[];function E(j,D,ee){var W={type:"node",id:"_"+V.type+"/"+V.id+"bounds"+ee,lat:j,lon:D};V.nodes.push(W.id),C.push(W)}E(V.bounds.minlat,V.bounds.minlon,1),E(V.bounds.maxlat,V.bounds.minlon,2),E(V.bounds.maxlat,V.bounds.maxlon,3),E(V.bounds.minlat,V.bounds.maxlon,4),V.nodes.push(V.nodes[0]),V.__is_bounds_placeholder=!0,A.push(V)}function U(q){function V(E,j,D){var ee={type:"node",id:D,lat:E,lon:j};C.push(ee)}zn.isArray(q.nodes)||(q.nodes=q.geometry.map(function(E){return E!==null?"_anonymous@"+E.lat+"/"+E.lon:"_anonymous@unknown_location"})),q.geometry.forEach(function(E,j){E&&V(E.lat,E.lon,q.nodes[j])})}function F(q){function V(j,D,ee){var W={type:"node",id:ee,lat:j,lon:D};C.push(W)}function E(j,D){if(A.some(function(ve){return ve.type=="way"&&ve.id==D}))return;var ee={type:"way",id:D,nodes:[]};function W(ve,_e){var de={type:"node",id:"_anonymous@"+ve+"/"+_e,lat:ve,lon:_e};ee.nodes.push(de.id),C.push(de)}j.forEach(function(ve){ve?W(ve.lat,ve.lon):ee.nodes.push(void 0)}),A.push(ee)}q.members.forEach(function(j,D){j.type=="node"?j.lat&&V(j.lat,j.lon,j.ref):j.type=="way"&&j.geometry&&(j.ref="_fullGeom"+j.ref,E(j.geometry,j.ref))})}for(var ce=0;ce<b.elements.length;ce++)switch(b.elements[ce].type){case"node":var K=b.elements[ce];C.push(K);break;case"way":var Z=zn.clone(b.elements[ce]);Z.nodes=zn.clone(Z.nodes),A.push(Z),Z.center&&T(Z),Z.geometry?U(Z):Z.bounds&&L(Z);break;case"relation":var $=zn.clone(b.elements[ce]);$.members=zn.clone($.members),w.push($);var oe=$.members&&$.members.some(function(q){return q.type=="node"&&q.lat||q.type=="way"&&q.geometry&&q.geometry.length>0});$.center&&T($),oe?F($):$.bounds&&L($);break}return d(C,A,w)}function p(b){var C=new Array,A=new Array,w=new Array;function T($,oe,q){$.hasAttribute(q)&&(oe[q]=$.getAttribute(q))}function L($,oe){var q=zn.clone($);T(oe,q,"lat"),T(oe,q,"lon"),q.__is_center_placeholder=!0,C.push(q)}function U($,oe){var q=zn.clone($);q.nodes=[];function V(E,j,D){var ee={type:"node",id:"_"+q.type+"/"+q.id+"bounds"+D,lat:E,lon:j};q.nodes.push(ee.id),C.push(ee)}V(oe.getAttribute("minlat"),oe.getAttribute("minlon"),1),V(oe.getAttribute("maxlat"),oe.getAttribute("minlon"),2),V(oe.getAttribute("maxlat"),oe.getAttribute("maxlon"),3),V(oe.getAttribute("minlat"),oe.getAttribute("maxlon"),4),q.nodes.push(q.nodes[0]),q.__is_bounds_placeholder=!0,A.push(q)}function F($,oe){function q(V,E,j){var D={type:"node",id:j,lat:V,lon:E};return C.push(D),D.id}zn.isArray($.nodes)||($.nodes=[],zn.each(oe,function(V,E){$.nodes.push("_anonymous@"+V.getAttribute("lat")+"/"+V.getAttribute("lon"))})),zn.each(oe,function(V,E){V.getAttribute("lat")&&q(V.getAttribute("lat"),V.getAttribute("lon"),$.nodes[E])})}function ce($,oe){function q(E,j,D){var ee={type:"node",id:D,lat:E,lon:j};C.push(ee)}function V(E,j){if(A.some(function(W){return W.type=="way"&&W.id==j}))return;var D={type:"way",id:j,nodes:[]};function ee(W,ve){var _e={type:"node",id:"_anonymous@"+W+"/"+ve,lat:W,lon:ve};D.nodes.push(_e.id),C.push(_e)}zn.each(E,function(W){W.getAttribute("lat")?ee(W.getAttribute("lat"),W.getAttribute("lon")):D.nodes.push(void 0)}),A.push(D)}zn.each(oe,function(E,j){$.members[j].type=="node"?E.getAttribute("lat")&&q(E.getAttribute("lat"),E.getAttribute("lon"),$.members[j].ref):$.members[j].type=="way"&&E.getElementsByTagName("nd").length>0&&($.members[j].ref="_fullGeom"+$.members[j].ref,V(E.getElementsByTagName("nd"),$.members[j].ref))})}zn.each(b.getElementsByTagName("node"),function($,oe){var q={};zn.each($.getElementsByTagName("tag"),function(E){q[E.getAttribute("k")]=E.getAttribute("v")});var V={type:"node"};T($,V,"id"),T($,V,"lat"),T($,V,"lon"),T($,V,"version"),T($,V,"timestamp"),T($,V,"changeset"),T($,V,"uid"),T($,V,"user"),zn.isEmpty(q)||(V.tags=q),C.push(V)});var K,Z;return zn.each(b.getElementsByTagName("way"),function($,oe){var q={},V=[];zn.each($.getElementsByTagName("tag"),function(D){q[D.getAttribute("k")]=D.getAttribute("v")});var E=!1;zn.each($.getElementsByTagName("nd"),function(D,ee){var W;(W=D.getAttribute("ref"))&&(V[ee]=W),!E&&D.getAttribute("lat")&&(E=!0)});var j={type:"way"};T($,j,"id"),T($,j,"version"),T($,j,"timestamp"),T($,j,"changeset"),T($,j,"uid"),T($,j,"user"),V.length>0&&(j.nodes=V),zn.isEmpty(q)||(j.tags=q),(K=$.getElementsByTagName("center")[0])&&L(j,K),E?F(j,$.getElementsByTagName("nd")):(Z=$.getElementsByTagName("bounds")[0])&&U(j,Z),A.push(j)}),zn.each(b.getElementsByTagName("relation"),function($,oe){var q={},V=[];zn.each($.getElementsByTagName("tag"),function(D){q[D.getAttribute("k")]=D.getAttribute("v")});var E=!1;zn.each($.getElementsByTagName("member"),function(D,ee){V[ee]={},T(D,V[ee],"ref"),T(D,V[ee],"role"),T(D,V[ee],"type"),(!E&&V[ee].type=="node"&&D.getAttribute("lat")||V[ee].type=="way"&&D.getElementsByTagName("nd").length>0)&&(E=!0)});var j={type:"relation"};T($,j,"id"),T($,j,"version"),T($,j,"timestamp"),T($,j,"changeset"),T($,j,"uid"),T($,j,"user"),V.length>0&&(j.members=V),zn.isEmpty(q)||(j.tags=q),(K=$.getElementsByTagName("center")[0])&&L(j,K),E?ce(j,$.getElementsByTagName("member")):(Z=$.getElementsByTagName("bounds")[0])&&U(j,Z),w.push(j)}),d(C,A,w)}function d(b,C,A){function w(Oe,We){if(typeof We!="object"&&(We={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Oe,We);for(var He in Oe)if(t.uninterestingTags[He]!==!0&&!(We[He]===!0||We[He]===Oe[He]))return!0;return!1}function T(Oe){var We={timestamp:Oe.timestamp,version:Oe.version,changeset:Oe.changeset,user:Oe.user,uid:Oe.uid};for(var He in We)We[He]===void 0&&delete We[He];return We}for(var L=new Object,U=new Object,F=0;F<b.length;F++){var ce=b[F];L[ce.id]!==void 0&&(ce=t.deduplicator(ce,L[ce.id])),L[ce.id]=ce,typeof ce.tags<"u"&&w(ce.tags)&&(U[ce.id]=!0)}for(var F=0;F<A.length;F++)if(zn.isArray(A[F].members))for(var K=0;K<A[F].members.length;K++)A[F].members[K].type=="node"&&(U[A[F].members[K].ref]=!0);for(var Z=new Object,$=new Object,F=0;F<C.length;F++){var oe=C[F];if(Z[oe.id]&&(oe=t.deduplicator(oe,Z[oe.id])),Z[oe.id]=oe,zn.isArray(oe.nodes))for(var K=0;K<oe.nodes.length;K++)typeof oe.nodes[K]!="object"&&($[oe.nodes[K]]=!0,oe.nodes[K]=L[oe.nodes[K]])}var q=new Array;for(var V in L){var ce=L[V];(!$[V]||U[V])&&q.push(ce)}for(var E=new Array,F=0;F<A.length;F++){var j=A[F];E[j.id]&&(j=t.deduplicator(j,E[j.id])),E[j.id]=j}var D={node:{},way:{},relation:{}};for(var V in E){var j=E[V];if(!zn.isArray(j.members)){t.verbose&&console.warn("Relation",j.type+"/"+j.id,"ignored because it has no members");continue}for(var K=0;K<j.members.length;K++){var ee=j.members[K].type,W=j.members[K].ref;if(typeof W!="number"&&(W=W.replace("_fullGeom","")),!D[ee]){t.verbose&&console.warn("Relation",j.type+"/"+j.id,"member",ee+"/"+W,"ignored because it has an invalid type");continue}typeof D[ee][W]>"u"&&(D[ee][W]=[]),D[ee][W].push({role:j.members[K].role,rel:j.id,reltags:j.tags})}}var ve,_e=[];for(F=0;F<q.length;F++){if(typeof q[F].lon>"u"||typeof q[F].lat>"u"){t.verbose&&console.warn("POI",q[F].type+"/"+q[F].id,"ignored because it lacks coordinates");continue}var de={type:"Feature",id:q[F].type+"/"+q[F].id,properties:{type:q[F].type,id:q[F].id,tags:q[F].tags||{},relations:D.node[q[F].id]||[],meta:T(q[F])},geometry:{type:"Point",coordinates:[+q[F].lon,+q[F].lat]}};q[F].__is_center_placeholder&&(de.properties.geometry="center"),i?i(de):_e.push(de)}for(var ie=[],le=[],F=0;F<A.length;F++)if(E[A[F].id]===A[F]){if(typeof A[F].tags<"u"&&(A[F].tags.type=="route"||A[F].tags.type=="waterway")){let We=function(He){var nt=!1,dt;dt=He.members.filter(function(St){return St.type==="way"}),dt=dt.map(function(St){var Vt=Z[St.ref];if(Vt===void 0||Vt.nodes===void 0){t.verbose&&console.warn("Route "+He.type+"/"+He.id,"tainted by a missing or incomplete  way",St.type+"/"+St.ref),nt=!0;return}return{id:St.ref,role:St.role,way:Vt,nodes:Vt.nodes.filter(function(Bt){return Bt!==void 0?!0:(nt=!0,t.verbose&&console.warn("Route",He.type+"/"+He.id,"tainted by a way",St.type+"/"+St.ref,"with a missing node"),!1)})}}),dt=zn.compact(dt);var wt;wt=tv(dt);var Rt=[];if(Rt=zn.compact(wt.map(function(St){return zn.compact(St.map(function(Vt){return[+Vt.lon,+Vt.lat]}))})),Rt.length==0)return t.verbose&&console.warn("Route",He.type+"/"+He.id,"contains no coordinates"),!1;var gt={type:"Feature",id:He.type+"/"+He.id,properties:{type:He.type,id:He.id,tags:He.tags||{},relations:D[He.type][He.id]||[],meta:T(He)},geometry:{type:Rt.length===1?"LineString":"MultiLineString",coordinates:Rt.length===1?Rt[0]:Rt}};return nt&&(t.verbose&&console.warn("Route",He.type+"/"+He.id,"is tainted"),gt.properties.tainted=!0),gt};var De=We;if(!zn.isArray(A[F].members)){t.verbose&&console.warn("Route",A[F].type+"/"+A[F].id,"ignored because it has no members");continue}if(A[F].members.forEach(function(He){Z[He.ref]&&!w(Z[He.ref].tags)&&(Z[He.ref].is_skippablerelationmember=!0)}),de=We(A[F]),de===!1){t.verbose&&console.warn("Route relation",A[F].type+"/"+A[F].id,"ignored because it has invalid geometry");continue}i?i(mm(de)):le.push(de)}if(typeof A[F].tags<"u"&&(A[F].tags.type=="multipolygon"||A[F].tags.type=="boundary")){let He=function(nt,dt){var wt=!1,Rt=te?"way":"relation",gt=typeof nt.id=="number"?nt.id:+nt.id.replace("_fullGeom",""),St;St=dt.members.filter(function(B){return B.type==="way"}),St=St.map(function(B){var we=Z[B.ref];if(we===void 0||we.nodes===void 0){t.verbose&&console.warn("Multipolygon",Rt+"/"+gt,"tainted by a missing or incomplete way",B.type+"/"+B.ref),wt=!0;return}return{id:B.ref,role:B.role||"outer",way:we,nodes:we.nodes.filter(function(Xe){return Xe!==void 0?!0:(wt=!0,t.verbose&&console.warn("Multipolygon",Rt+"/"+gt,"tainted by a way",B.type+"/"+B.ref,"with a missing node"),!1)})}}),St=zn.compact(St);var Vt,Bt;Vt=tv(St.filter(function(B){return B.role==="outer"})),Bt=tv(St.filter(function(B){return B.role==="inner"}));var an;function Sn(B){var we=function(R,z){for(var Se=0;Se<z.length;Se++)if(Qe(z[Se],R))return!0;return!1},Xe=function(R){return R.map(function(z){return[+z.lat,+z.lon]})},Qe=function(R,z){for(var Se=R[0],Ve=R[1],tt=!1,ot=0,ut=z.length-1;ot<z.length;ut=ot++){var Nt=z[ot][0],jt=z[ot][1],mn=z[ut][0],_n=z[ut][1],sn=jt>Ve!=_n>Ve&&Se<(mn-Nt)*(Ve-jt)/(_n-jt)+Nt;sn&&(tt=!tt)}return tt},ct,ae;for(B=Xe(B),ct=0;ct<Vt.length;ct++)if(ae=Xe(Vt[ct]),we(ae,B))return ct}an=Vt.map(function(B){return[B]});for(var et=0;et<Bt.length;et++){var ln=Sn(Bt[et]);ln!==void 0?an[ln].push(Bt[et]):t.verbose&&console.warn("Multipolygon",Rt+"/"+gt,"contains an inner ring with no containing outer")}var wn=[];if(wn=zn.compact(an.map(function(B){var we=zn.compact(B.map(function(Xe){if(Xe.length<4){t.verbose&&console.warn("Multipolygon",Rt+"/"+gt,"contains a ring with less than four nodes");return}return zn.compact(Xe.map(function(Qe){return[+Qe.lon,+Qe.lat]}))}));if(we.length==0){t.verbose&&console.warn("Multipolygon",Rt+"/"+gt,"contains an empty ring cluster");return}return we})),wn.length==0)return t.verbose&&console.warn("Multipolygon",Rt+"/"+gt,"contains no coordinates"),!1;var xe="MultiPolygon";wn.length===1&&(xe="Polygon",wn=wn[0]);var N={type:"Feature",id:nt.type+"/"+gt,properties:{type:nt.type,id:gt,tags:nt.tags||{},relations:D[nt.type][nt.id]||[],meta:T(nt)},geometry:{type:xe,coordinates:wn}};return wt&&(t.verbose&&console.warn("Multipolygon",Rt+"/"+gt,"is tainted"),N.properties.tainted=!0),N};var Ae=He;if(!zn.isArray(A[F].members)){t.verbose&&console.warn("Multipolygon",A[F].type+"/"+A[F].id,"ignored because it has no members");continue}for(var J=0,K=0;K<A[F].members.length;K++)A[F].members[K].role=="outer"?J++:t.verbose&&A[F].members[K].role!="inner"&&console.warn("Multipolygon",A[F].type+"/"+A[F].id,"member",A[F].members[K].type+"/"+A[F].members[K].ref,'ignored because it has an invalid role: "'+A[F].members[K].role+'"');if(A[F].members.forEach(function(nt){Z[nt.ref]&&(nt.role==="outer"&&!w(Z[nt.ref].tags,A[F].tags)&&(Z[nt.ref].is_skippablerelationmember=!0),nt.role==="inner"&&!w(Z[nt.ref].tags)&&(Z[nt.ref].is_skippablerelationmember=!0))}),J==0){t.verbose&&console.warn("Multipolygon relation",A[F].type+"/"+A[F].id,"ignored because it has no outer ways");continue}var te=!1;J==1&&!w(A[F].tags,{type:!0})&&(te=!0);var de=null;if(!te)de=He(A[F],A[F]);else{var he=A[F].members.filter(function(nt){return nt.role==="outer"})[0];if(he=Z[he.ref],he===void 0){t.verbose&&console.warn("Multipolygon relation",A[F].type+"/"+A[F].id,"ignored because outer way",he.type+"/"+he.ref,"is missing");continue}he.is_skippablerelationmember=!0,de=He(he,A[F])}if(de===!1){t.verbose&&console.warn("Multipolygon relation",A[F].type+"/"+A[F].id,"ignored because it has invalid geometry");continue}i?i(mm(de)):le.push(de)}}for(var F=0;F<C.length;F++)if(Z[C[F].id]===C[F]){if(!zn.isArray(C[F].nodes)){t.verbose&&console.warn("Way",C[F].type+"/"+C[F].id,"ignored because it has no nodes");continue}if(!C[F].is_skippablerelationmember){typeof C[F].id!="number"&&(C[F].id=+C[F].id.replace("_fullGeom","")),C[F].tainted=!1,C[F].hidden=!1;var be=new Array;for(K=0;K<C[F].nodes.length;K++)typeof C[F].nodes[K]=="object"?be.push([+C[F].nodes[K].lon,+C[F].nodes[K].lat]):(t.verbose&&console.warn("Way",C[F].type+"/"+C[F].id,"is tainted by an invalid node"),C[F].tainted=!0);if(be.length<=1){t.verbose&&console.warn("Way",C[F].type+"/"+C[F].id,"ignored because it contains too few nodes");continue}var Ee="LineString";typeof C[F].nodes[0]<"u"&&typeof C[F].nodes[C[F].nodes.length-1]<"u"&&C[F].nodes[0].id===C[F].nodes[C[F].nodes.length-1].id&&(typeof C[F].tags<"u"&&u(C[F].tags)||C[F].__is_bounds_placeholder)&&(Ee="Polygon",be=[be]);var de={type:"Feature",id:C[F].type+"/"+C[F].id,properties:{type:C[F].type,id:C[F].id,tags:C[F].tags||{},relations:D.way[C[F].id]||[],meta:T(C[F])},geometry:{type:Ee,coordinates:be}};C[F].tainted&&(t.verbose&&console.warn("Way",C[F].type+"/"+C[F].id,"is tainted"),de.properties.tainted=!0),C[F].__is_bounds_placeholder&&(de.properties.geometry="bounds"),i?i(mm(de)):Ee=="LineString"?ie.push(de):le.push(de)}}return i?!0:(ve={type:"FeatureCollection",features:[]},ve.features=ve.features.concat(le),ve.features=ve.features.concat(ie),ve.features=ve.features.concat(_e),t.flatProperties&&ve.features.forEach(function(Oe){Oe.properties=zn.merge(Oe.properties.meta,Oe.properties.tags,{id:Oe.properties.type+"/"+Oe.properties.id})}),ve=mm(ve),ve)}function u(b){var C=t.polygonFeatures;if(typeof C=="function")return C(b);if(b.area==="no")return!1;for(var A in b){var w=b[A],T=C[A];if(!(typeof T>"u")&&w!=="no"&&(T===!0||T.included_values&&T.included_values[w]===!0||T.excluded_values&&T.excluded_values[w]!==!0))return!0}return!1}};function tv(e){for(var t=function(w){return w[0]},i=function(w){return w[w.length-1]},a=function(w,T){return w!==void 0&&T!==void 0&&w.id===T.id},c=[],p,d,u,b,C,A;e.length;)for(p=e.pop().nodes.slice(),c.push(p);e.length&&!a(t(p),i(p));){for(d=t(p),u=i(p),b=0;b<e.length;b++)if(A=e[b].nodes,a(u,t(A))){C=p.push,A=A.slice(1);break}else if(a(u,i(A))){C=p.push,A=A.slice(0,-1).reverse();break}else if(a(d,i(A))){C=p.unshift,A=A.slice(0,-1);break}else if(a(d,t(A))){C=p.unshift,A=A.slice(1).reverse();break}else A=C=null;if(!A)break;e.splice(b,1),C.apply(p,A)}return c}jg.toGeojson=jg;var U5=jg;const $5=Bf(U5),nv={type:"FeatureCollection",features:[]},gA=()=>{const[e,t]=_t.useState(!1),i=_t.useCallback(async(d,u,b)=>{var F,ce;if(e||(console.log(b),b<16))return nv;t(!0);let C=300;b>17&&(C=200),b>18&&(C=100),b>19&&(C=50),console.log("overpass: loading...");let A="[out:json]";A+=`[timeout:25];
`,A+='nwr["building"]',A+=`(around:${C},${d},${u});
`,A+="out meta geom;",console.log(A);const w=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(A)}`,{});if(w.status!==200)return t(!1),nv;const T=await w.json();console.log("overpass json elements: ",T.elements);const L=$5(T);console.log("overpass osmtogeojson raw: ",L);for await(const K of L.features){if(!K.properties)continue;K.id=K.properties.id.split("/")[1];const Z=(F=T.elements.filter(oe=>K.id?typeof K.id=="number"?oe.id===K.id:oe.id===parseInt(K.id):!1))==null?void 0:F[0];if(Z&&(K.properties.tags=Z.tags,K.properties.nodes=Z.nodes),K.geometry.type==="Polygon"){const oe=I5(K.geometry.coordinates);var U=z5(oe);K.properties.center=U.geometry.coordinates}K.geometry.type==="Point"&&(K.properties.center=K.geometry.coordinates);const $=K.properties.uid;if($){let oe=localStorage.getItem($+"-icon");if(oe===null){const q=await zs.getUser($);(ce=q.img)!=null&&ce.href?(oe=q.img.href,localStorage.setItem($+"-icon",q.img.href)):localStorage.setItem($+"-icon","")}K.properties.userIconHref=oe||""}}return console.log("overpass osmtogeojson converted: ",L),console.log("overpass: loaded."),t(!1),L},[]),[a,c]=_t.useState(!1),p=_t.useCallback(async d=>{console.log("overpass: loading...",d),c(!0);const u=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(u);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(u)}`,{});if(b.status!==200){c(!1);return}const C=await b.json();console.log("overpass json parent elements: ",C.elements);const A=250,w=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${A});
      out;
      `;console.log(w);const T=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(w)}`,{});if(T.status!==200){c(!1);return}const L=await T.json();console.log("overpass json child elements: ",L.elements);const U=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${A});
      out;
      `;console.log(U);const F=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(U)}`,{});if(F.status!==200){c(!1);return}const ce=await F.json();return console.log("overpass json neighbour elements: ",ce.elements),c(!1),[...C.elements,...L.elements,...ce.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:p,loadingOverpass:e,loadingOverpassAdmin:a}},V5=()=>yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),yt.jsxs("datalist",{id:"source-list",children:[yt.jsx("option",{value:"survey"}),yt.jsx("option",{value:"local knowledge"}),yt.jsx("option",{value:"extrapolation"}),yt.jsx("option",{value:"estimation from existing data"})]})]}),rv={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},G5=({feature:e,onCancel:t,onSubmit:i})=>{var ve,_e,de,ie;const{detectCountry:a,loadingCountry:c}=R5(),{fetchOverpassAdmin:p,loadingOverpassAdmin:d}=gA(),u=JSON.parse((ve=e.properties)==null?void 0:ve.center),[b,C]=_t.useState(void 0),[A,w]=_t.useState(),[T,L]=_t.useState(e),[U,F]=_t.useState(!1),[ce,K]=_t.useState(!1),[Z,$]=_t.useState(!1),[oe,q]=_t.useState(),[V,E]=_t.useState();_t.useEffect(()=>{F(zs.isLoggedIn())},[]),_t.useEffect(()=>{(async()=>{var J,te;const le=await a(u[0],u[1]);if(C(le),(J=le==null?void 0:le.properties)!=null&&J.ISO_A3&&qS[le.properties.ISO_A3]){const he=qS[le.properties.ISO_A3];w(he);const be=he.defaultComment+" "+((te=e.properties)==null?void 0:te.id);E(be)}})()},[e]),_t.useEffect(()=>{console.log(T.properties)},[T]);const j=_t.useCallback(async()=>{const le=await tI.openReverseGeocoder([u[0],u[1]]);L(J=>{const te={properties:{"addr:province":le.prefecture,"addr:city":le.city,...J.properties}};return J.properties=te.properties,J})},[]),D=_t.useCallback(async()=>{if(!T.properties)return;T.properties.nodes;const le=await p(JSON.parse(T.properties.nodes));console.log("onOverpassReverseGeocode",le),q(le)},[T]),ee=_t.useCallback(async le=>{var Ae,Oe,We;$(!0),le.preventDefault();const J=new FormData(le.currentTarget),te=JSON.parse((Ae=e.properties)==null?void 0:Ae.tags);J.forEach((He,nt)=>{typeof He=="string"&&He.length>0&&nt!=="comment"&&nt!=="source"&&(te[nt]=He)});const he={type:"way",id:e.id,version:(Oe=e.properties)==null?void 0:Oe.version,tags:te,nodes:JSON.parse((We=e.properties)==null?void 0:We.nodes)};console.info(JSON.stringify(he,null,2));const be={create:[],modify:[he],delete:[]},Ee=J.get("comment");Ee&&(rv.comment=Ee.toString());const De=J.get("source");De&&(rv.source=De.toString()),await zs.uploadChangeset(rv,be),$(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),W=_t.useCallback(()=>{K(!0)},[]);return T.properties?yt.jsxs("div",{children:[yt.jsxs("div",{children:["OSM:"," ",yt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+T.properties.id,target:"_blank",children:T.properties.id})," | ",yt.jsx(JC,{feature:T}),A&&yt.jsxs("span",{children:[" | ","Address:"," ",yt.jsx(O5,{feature:T,fields:A})]})]}),c?yt.jsx(aa,{icon:h_,spin:!0}):yt.jsx(yt.Fragment,{children:A?yt.jsxs("form",{onSubmit:ee,children:[yt.jsx("div",{className:"flex flex-wrap",children:yt.jsx(ev,{feature:T,fieldOption:A.postcodeField,onChange:W})}),yt.jsx("div",{className:"flex flex-wrap",children:A.mainFields.map(le=>yt.jsx(ev,{feature:T,fieldOption:le,onChange:W,suggestList:oe},le.key))}),yt.jsx("div",{className:"flex flex-wrap",children:A.detailFields.map(le=>yt.jsx(ev,{feature:T,fieldOption:le,onChange:W},le.key))}),yt.jsxs("div",{className:"flex flex-wrap",children:[yt.jsx(V5,{}),yt.jsx(L5,{defaultValue:V})]}),yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((_e=b==null?void 0:b.properties)==null?void 0:_e.ISO_A3)==="JPN"&&yt.jsx("button",{type:"button",onClick:j,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),yt.jsxs("button",{type:"button",disabled:d,onClick:D,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",d&&yt.jsx(aa,{icon:h_,spin:!0})]}),yt.jsx("button",{disabled:!U||Z||!ce,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!U&&yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),yt.jsx(YC,{})]})]})})]}):yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[yt.jsxs("div",{className:"py-2",children:[yt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(de=b==null?void 0:b.properties)==null?void 0:de.NAME," (ISO code:",(ie=b==null?void 0:b.properties)==null?void 0:ie.ISO_A3,") does not support yet."]}),yt.jsx("p",{children:yt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function H5(e,t){const[i,a]=_t.useState(e);return _t.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const W5={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},Z5={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function X5(){const e=_t.useRef(null),[t,i]=_t.useState(),a=H5(t,2500),c=_t.useRef(null),[p,d]=_t.useState({type:"FeatureCollection",features:[]}),[u,b]=_t.useState("auto"),[C,A]=_t.useState(),[w,T]=_t.useState([]),{fetchOverpassBuildings:L,loadingOverpass:U}=gA();_t.useEffect(()=>{setTimeout(()=>{var E;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(E=c.current)==null||E.trigger())},500)},[]);const F=_t.useCallback(E=>{const j=E.target.getCenter(),D=E.target.getZoom();i({zoom:D,latitude:j.lat,longitude:j.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),ce=_t.useCallback(E=>{i(E.viewState)},[]),K=_t.useCallback(E=>{i(E.viewState)},[]);_t.useEffect(()=>{(async()=>{if(!a)return;const E=a,j=await L(E.latitude,E.longitude,E.zoom);d(j)})()},[a]);const Z=_t.useCallback(E=>{var ve;b("pointer");const{features:j,point:{x:D,y:ee}}=E,W=j&&j[0];W?((ve=e.current)==null||ve.setFeatureState({source:"buildings-source",id:W.id},{hover:!0}),A({feature:W,x:D,y:ee})):A(void 0)},[]),$=_t.useCallback(E=>{var j;b("auto"),(j=e.current)==null||j.querySourceFeatures("buildings-source").map(D=>{var ee;(ee=e.current)==null||ee.setFeatureState({source:"buildings-source",id:D.id},{hover:!1})}),A(void 0)},[]),oe=_t.useCallback(E=>{var D;q();const j=E.features&&E.features[0];j&&((D=e.current)==null||D.setFeatureState({source:"buildings-source",id:j.id},{select:!0}),T([j]))},[]),q=_t.useCallback(()=>{var E;(E=e.current)==null||E.querySourceFeatures("buildings-source").map(j=>{var D;(D=e.current)==null||D.setFeatureState({source:"buildings-source",id:j.id},{select:!1})}),T([])},[]),V=_t.useMemo(()=>{let E=25;return t&&(E=t.zoom<18?20:t.zoom<19?25:35),p.features.map((j,D)=>!j.properties||!j.properties.center?null:yt.jsx(x4,{style:{cursor:"pointer"},longitude:j.properties.center[0],latitude:j.properties.center[1],anchor:"center",children:yt.jsx(WR,{feature:j,size:E})},`marker-${D}`))},[p,t]);return yt.jsxs("div",{children:[yt.jsx(CR,{}),yt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:yt.jsx(qR,{viewState:t})}),yt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[w.length>0&&yt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:yt.jsx("div",{style:{padding:"10px"},children:w.map(E=>yt.jsx(G5,{feature:E,onCancel:q,onSubmit:q},E.id))})}),yt.jsxs(_4,{ref:e,...t,onMove:ce,onMoveEnd:K,onLoad:F,interactiveLayerIds:["buildings-layer-fill"],onClick:oe,onMouseEnter:Z,onMouseLeave:$,dragRotate:!1,boxZoom:!1,hash:!0,cursor:u,mapLib:gC,style:{width:"100%",height:"100%"},mapStyle:W5,children:[yt.jsx(E4,{id:"buildings-source",type:"geojson",data:p,children:yt.jsx(S4,{...Z5})}),yt.jsx(w4,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),yt.jsx(b4,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),yt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?yt.jsx(aa,{size:"2x",icon:ER}):U?yt.jsx(aa,{size:"2x",icon:h_,spin:!0}):yt.jsx(aa,{size:"2x",icon:bR})}),V,C&&yt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:C.x+5,top:C.y+5},children:[yt.jsx(JC,{feature:C.feature}),yt.jsx("br",{}),yt.jsx(ZR,{feature:C.feature}),yt.jsx(IR,{feature:C.feature})]})]})]})]})}var yA={},dy={};dy.byteLength=Y5;dy.toByteArray=Q5;dy.fromByteArray=nj;var ra=[],os=[],q5=typeof Uint8Array<"u"?Uint8Array:Array,iv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Kc=0,K5=iv.length;Kc<K5;++Kc)ra[Kc]=iv[Kc],os[iv.charCodeAt(Kc)]=Kc;os[45]=62;os[95]=63;function vA(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function Y5(e){var t=vA(e),i=t[0],a=t[1];return(i+a)*3/4-a}function J5(e,t,i){return(t+i)*3/4-i}function Q5(e){var t,i=vA(e),a=i[0],c=i[1],p=new q5(J5(e,a,c)),d=0,u=c>0?a-4:a,b;for(b=0;b<u;b+=4)t=os[e.charCodeAt(b)]<<18|os[e.charCodeAt(b+1)]<<12|os[e.charCodeAt(b+2)]<<6|os[e.charCodeAt(b+3)],p[d++]=t>>16&255,p[d++]=t>>8&255,p[d++]=t&255;return c===2&&(t=os[e.charCodeAt(b)]<<2|os[e.charCodeAt(b+1)]>>4,p[d++]=t&255),c===1&&(t=os[e.charCodeAt(b)]<<10|os[e.charCodeAt(b+1)]<<4|os[e.charCodeAt(b+2)]>>2,p[d++]=t>>8&255,p[d++]=t&255),p}function ej(e){return ra[e>>18&63]+ra[e>>12&63]+ra[e>>6&63]+ra[e&63]}function tj(e,t,i){for(var a,c=[],p=t;p<i;p+=3)a=(e[p]<<16&16711680)+(e[p+1]<<8&65280)+(e[p+2]&255),c.push(ej(a));return c.join("")}function nj(e){for(var t,i=e.length,a=i%3,c=[],p=16383,d=0,u=i-a;d<u;d+=p)c.push(tj(e,d,d+p>u?u:d+p));return a===1?(t=e[i-1],c.push(ra[t>>2]+ra[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(ra[t>>10]+ra[t>>4&63]+ra[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=dy,i=ay,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=Z,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,u.TYPED_ARRAY_SUPPORT=p(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function p(){try{const ae=new Uint8Array(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,Uint8Array.prototype),Object.setPrototypeOf(ae,R),ae.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function d(ae){if(ae>c)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const R=new Uint8Array(ae);return Object.setPrototypeOf(R,u.prototype),R}function u(ae,R,z){if(typeof ae=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(ae)}return b(ae,R,z)}u.poolSize=8192;function b(ae,R,z){if(typeof ae=="string")return T(ae,R);if(ArrayBuffer.isView(ae))return U(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(B(ae,ArrayBuffer)||ae&&B(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(B(ae,SharedArrayBuffer)||ae&&B(ae.buffer,SharedArrayBuffer)))return F(ae,R,z);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Se=ae.valueOf&&ae.valueOf();if(Se!=null&&Se!==ae)return u.from(Se,R,z);const Ve=ce(ae);if(Ve)return Ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return u.from(ae[Symbol.toPrimitive]("string"),R,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}u.from=function(ae,R,z){return b(ae,R,z)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function C(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function A(ae,R,z){return C(ae),ae<=0?d(ae):R!==void 0?typeof z=="string"?d(ae).fill(R,z):d(ae).fill(R):d(ae)}u.alloc=function(ae,R,z){return A(ae,R,z)};function w(ae){return C(ae),d(ae<0?0:K(ae)|0)}u.allocUnsafe=function(ae){return w(ae)},u.allocUnsafeSlow=function(ae){return w(ae)};function T(ae,R){if((typeof R!="string"||R==="")&&(R="utf8"),!u.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const z=$(ae,R)|0;let Se=d(z);const Ve=Se.write(ae,R);return Ve!==z&&(Se=Se.slice(0,Ve)),Se}function L(ae){const R=ae.length<0?0:K(ae.length)|0,z=d(R);for(let Se=0;Se<R;Se+=1)z[Se]=ae[Se]&255;return z}function U(ae){if(B(ae,Uint8Array)){const R=new Uint8Array(ae);return F(R.buffer,R.byteOffset,R.byteLength)}return L(ae)}function F(ae,R,z){if(R<0||ae.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<R+(z||0))throw new RangeError('"length" is outside of buffer bounds');let Se;return R===void 0&&z===void 0?Se=new Uint8Array(ae):z===void 0?Se=new Uint8Array(ae,R):Se=new Uint8Array(ae,R,z),Object.setPrototypeOf(Se,u.prototype),Se}function ce(ae){if(u.isBuffer(ae)){const R=K(ae.length)|0,z=d(R);return z.length===0||ae.copy(z,0,0,R),z}if(ae.length!==void 0)return typeof ae.length!="number"||we(ae.length)?d(0):L(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return L(ae.data)}function K(ae){if(ae>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return ae|0}function Z(ae){return+ae!=ae&&(ae=0),u.alloc(+ae)}u.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==u.prototype},u.compare=function(R,z){if(B(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),B(z,Uint8Array)&&(z=u.from(z,z.offset,z.byteLength)),!u.isBuffer(R)||!u.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===z)return 0;let Se=R.length,Ve=z.length;for(let tt=0,ot=Math.min(Se,Ve);tt<ot;++tt)if(R[tt]!==z[tt]){Se=R[tt],Ve=z[tt];break}return Se<Ve?-1:Ve<Se?1:0},u.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(R,z){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return u.alloc(0);let Se;if(z===void 0)for(z=0,Se=0;Se<R.length;++Se)z+=R[Se].length;const Ve=u.allocUnsafe(z);let tt=0;for(Se=0;Se<R.length;++Se){let ot=R[Se];if(B(ot,Uint8Array))tt+ot.length>Ve.length?(u.isBuffer(ot)||(ot=u.from(ot)),ot.copy(Ve,tt)):Uint8Array.prototype.set.call(Ve,ot,tt);else if(u.isBuffer(ot))ot.copy(Ve,tt);else throw new TypeError('"list" argument must be an Array of Buffers');tt+=ot.length}return Ve};function $(ae,R){if(u.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||B(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const z=ae.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&z===0)return 0;let Ve=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return et(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return xe(ae).length;default:if(Ve)return Se?-1:et(ae).length;R=(""+R).toLowerCase(),Ve=!0}}u.byteLength=$;function oe(ae,R,z){let Se=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,R>>>=0,z<=R))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return he(this,R,z);case"utf8":case"utf-8":return de(this,R,z);case"ascii":return J(this,R,z);case"latin1":case"binary":return te(this,R,z);case"base64":return _e(this,R,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,R,z);default:if(Se)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),Se=!0}}u.prototype._isBuffer=!0;function q(ae,R,z){const Se=ae[R];ae[R]=ae[z],ae[z]=Se}u.prototype.swap16=function(){const R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let z=0;z<R;z+=2)q(this,z,z+1);return this},u.prototype.swap32=function(){const R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let z=0;z<R;z+=4)q(this,z,z+3),q(this,z+1,z+2);return this},u.prototype.swap64=function(){const R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let z=0;z<R;z+=8)q(this,z,z+7),q(this,z+1,z+6),q(this,z+2,z+5),q(this,z+3,z+4);return this},u.prototype.toString=function(){const R=this.length;return R===0?"":arguments.length===0?de(this,0,R):oe.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(R){if(!u.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:u.compare(this,R)===0},u.prototype.inspect=function(){let R="";const z=e.INSPECT_MAX_BYTES;return R=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(R+=" ... "),"<Buffer "+R+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(R,z,Se,Ve,tt){if(B(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),!u.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(z===void 0&&(z=0),Se===void 0&&(Se=R?R.length:0),Ve===void 0&&(Ve=0),tt===void 0&&(tt=this.length),z<0||Se>R.length||Ve<0||tt>this.length)throw new RangeError("out of range index");if(Ve>=tt&&z>=Se)return 0;if(Ve>=tt)return-1;if(z>=Se)return 1;if(z>>>=0,Se>>>=0,Ve>>>=0,tt>>>=0,this===R)return 0;let ot=tt-Ve,ut=Se-z;const Nt=Math.min(ot,ut),jt=this.slice(Ve,tt),mn=R.slice(z,Se);for(let _n=0;_n<Nt;++_n)if(jt[_n]!==mn[_n]){ot=jt[_n],ut=mn[_n];break}return ot<ut?-1:ut<ot?1:0};function V(ae,R,z,Se,Ve){if(ae.length===0)return-1;if(typeof z=="string"?(Se=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,we(z)&&(z=Ve?0:ae.length-1),z<0&&(z=ae.length+z),z>=ae.length){if(Ve)return-1;z=ae.length-1}else if(z<0)if(Ve)z=0;else return-1;if(typeof R=="string"&&(R=u.from(R,Se)),u.isBuffer(R))return R.length===0?-1:E(ae,R,z,Se,Ve);if(typeof R=="number")return R=R&255,typeof Uint8Array.prototype.indexOf=="function"?Ve?Uint8Array.prototype.indexOf.call(ae,R,z):Uint8Array.prototype.lastIndexOf.call(ae,R,z):E(ae,[R],z,Se,Ve);throw new TypeError("val must be string, number or Buffer")}function E(ae,R,z,Se,Ve){let tt=1,ot=ae.length,ut=R.length;if(Se!==void 0&&(Se=String(Se).toLowerCase(),Se==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(ae.length<2||R.length<2)return-1;tt=2,ot/=2,ut/=2,z/=2}function Nt(mn,_n){return tt===1?mn[_n]:mn.readUInt16BE(_n*tt)}let jt;if(Ve){let mn=-1;for(jt=z;jt<ot;jt++)if(Nt(ae,jt)===Nt(R,mn===-1?0:jt-mn)){if(mn===-1&&(mn=jt),jt-mn+1===ut)return mn*tt}else mn!==-1&&(jt-=jt-mn),mn=-1}else for(z+ut>ot&&(z=ot-ut),jt=z;jt>=0;jt--){let mn=!0;for(let _n=0;_n<ut;_n++)if(Nt(ae,jt+_n)!==Nt(R,_n)){mn=!1;break}if(mn)return jt}return-1}u.prototype.includes=function(R,z,Se){return this.indexOf(R,z,Se)!==-1},u.prototype.indexOf=function(R,z,Se){return V(this,R,z,Se,!0)},u.prototype.lastIndexOf=function(R,z,Se){return V(this,R,z,Se,!1)};function j(ae,R,z,Se){z=Number(z)||0;const Ve=ae.length-z;Se?(Se=Number(Se),Se>Ve&&(Se=Ve)):Se=Ve;const tt=R.length;Se>tt/2&&(Se=tt/2);let ot;for(ot=0;ot<Se;++ot){const ut=parseInt(R.substr(ot*2,2),16);if(we(ut))return ot;ae[z+ot]=ut}return ot}function D(ae,R,z,Se){return N(et(R,ae.length-z),ae,z,Se)}function ee(ae,R,z,Se){return N(ln(R),ae,z,Se)}function W(ae,R,z,Se){return N(xe(R),ae,z,Se)}function ve(ae,R,z,Se){return N(wn(R,ae.length-z),ae,z,Se)}u.prototype.write=function(R,z,Se,Ve){if(z===void 0)Ve="utf8",Se=this.length,z=0;else if(Se===void 0&&typeof z=="string")Ve=z,Se=this.length,z=0;else if(isFinite(z))z=z>>>0,isFinite(Se)?(Se=Se>>>0,Ve===void 0&&(Ve="utf8")):(Ve=Se,Se=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const tt=this.length-z;if((Se===void 0||Se>tt)&&(Se=tt),R.length>0&&(Se<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ve||(Ve="utf8");let ot=!1;for(;;)switch(Ve){case"hex":return j(this,R,z,Se);case"utf8":case"utf-8":return D(this,R,z,Se);case"ascii":case"latin1":case"binary":return ee(this,R,z,Se);case"base64":return W(this,R,z,Se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,R,z,Se);default:if(ot)throw new TypeError("Unknown encoding: "+Ve);Ve=(""+Ve).toLowerCase(),ot=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(ae,R,z){return R===0&&z===ae.length?t.fromByteArray(ae):t.fromByteArray(ae.slice(R,z))}function de(ae,R,z){z=Math.min(ae.length,z);const Se=[];let Ve=R;for(;Ve<z;){const tt=ae[Ve];let ot=null,ut=tt>239?4:tt>223?3:tt>191?2:1;if(Ve+ut<=z){let Nt,jt,mn,_n;switch(ut){case 1:tt<128&&(ot=tt);break;case 2:Nt=ae[Ve+1],(Nt&192)===128&&(_n=(tt&31)<<6|Nt&63,_n>127&&(ot=_n));break;case 3:Nt=ae[Ve+1],jt=ae[Ve+2],(Nt&192)===128&&(jt&192)===128&&(_n=(tt&15)<<12|(Nt&63)<<6|jt&63,_n>2047&&(_n<55296||_n>57343)&&(ot=_n));break;case 4:Nt=ae[Ve+1],jt=ae[Ve+2],mn=ae[Ve+3],(Nt&192)===128&&(jt&192)===128&&(mn&192)===128&&(_n=(tt&15)<<18|(Nt&63)<<12|(jt&63)<<6|mn&63,_n>65535&&_n<1114112&&(ot=_n))}}ot===null?(ot=65533,ut=1):ot>65535&&(ot-=65536,Se.push(ot>>>10&1023|55296),ot=56320|ot&1023),Se.push(ot),Ve+=ut}return le(Se)}const ie=4096;function le(ae){const R=ae.length;if(R<=ie)return String.fromCharCode.apply(String,ae);let z="",Se=0;for(;Se<R;)z+=String.fromCharCode.apply(String,ae.slice(Se,Se+=ie));return z}function J(ae,R,z){let Se="";z=Math.min(ae.length,z);for(let Ve=R;Ve<z;++Ve)Se+=String.fromCharCode(ae[Ve]&127);return Se}function te(ae,R,z){let Se="";z=Math.min(ae.length,z);for(let Ve=R;Ve<z;++Ve)Se+=String.fromCharCode(ae[Ve]);return Se}function he(ae,R,z){const Se=ae.length;(!R||R<0)&&(R=0),(!z||z<0||z>Se)&&(z=Se);let Ve="";for(let tt=R;tt<z;++tt)Ve+=Xe[ae[tt]];return Ve}function be(ae,R,z){const Se=ae.slice(R,z);let Ve="";for(let tt=0;tt<Se.length-1;tt+=2)Ve+=String.fromCharCode(Se[tt]+Se[tt+1]*256);return Ve}u.prototype.slice=function(R,z){const Se=this.length;R=~~R,z=z===void 0?Se:~~z,R<0?(R+=Se,R<0&&(R=0)):R>Se&&(R=Se),z<0?(z+=Se,z<0&&(z=0)):z>Se&&(z=Se),z<R&&(z=R);const Ve=this.subarray(R,z);return Object.setPrototypeOf(Ve,u.prototype),Ve};function Ee(ae,R,z){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+R>z)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(R,z,Se){R=R>>>0,z=z>>>0,Se||Ee(R,z,this.length);let Ve=this[R],tt=1,ot=0;for(;++ot<z&&(tt*=256);)Ve+=this[R+ot]*tt;return Ve},u.prototype.readUintBE=u.prototype.readUIntBE=function(R,z,Se){R=R>>>0,z=z>>>0,Se||Ee(R,z,this.length);let Ve=this[R+--z],tt=1;for(;z>0&&(tt*=256);)Ve+=this[R+--z]*tt;return Ve},u.prototype.readUint8=u.prototype.readUInt8=function(R,z){return R=R>>>0,z||Ee(R,1,this.length),this[R]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(R,z){return R=R>>>0,z||Ee(R,2,this.length),this[R]|this[R+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(R,z){return R=R>>>0,z||Ee(R,2,this.length),this[R]<<8|this[R+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},u.prototype.readBigUInt64LE=Qe(function(R){R=R>>>0,Vt(R,"offset");const z=this[R],Se=this[R+7];(z===void 0||Se===void 0)&&Bt(R,this.length-8);const Ve=z+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,tt=this[++R]+this[++R]*2**8+this[++R]*2**16+Se*2**24;return BigInt(Ve)+(BigInt(tt)<<BigInt(32))}),u.prototype.readBigUInt64BE=Qe(function(R){R=R>>>0,Vt(R,"offset");const z=this[R],Se=this[R+7];(z===void 0||Se===void 0)&&Bt(R,this.length-8);const Ve=z*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],tt=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+Se;return(BigInt(Ve)<<BigInt(32))+BigInt(tt)}),u.prototype.readIntLE=function(R,z,Se){R=R>>>0,z=z>>>0,Se||Ee(R,z,this.length);let Ve=this[R],tt=1,ot=0;for(;++ot<z&&(tt*=256);)Ve+=this[R+ot]*tt;return tt*=128,Ve>=tt&&(Ve-=Math.pow(2,8*z)),Ve},u.prototype.readIntBE=function(R,z,Se){R=R>>>0,z=z>>>0,Se||Ee(R,z,this.length);let Ve=z,tt=1,ot=this[R+--Ve];for(;Ve>0&&(tt*=256);)ot+=this[R+--Ve]*tt;return tt*=128,ot>=tt&&(ot-=Math.pow(2,8*z)),ot},u.prototype.readInt8=function(R,z){return R=R>>>0,z||Ee(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},u.prototype.readInt16LE=function(R,z){R=R>>>0,z||Ee(R,2,this.length);const Se=this[R]|this[R+1]<<8;return Se&32768?Se|4294901760:Se},u.prototype.readInt16BE=function(R,z){R=R>>>0,z||Ee(R,2,this.length);const Se=this[R+1]|this[R]<<8;return Se&32768?Se|4294901760:Se},u.prototype.readInt32LE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},u.prototype.readInt32BE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},u.prototype.readBigInt64LE=Qe(function(R){R=R>>>0,Vt(R,"offset");const z=this[R],Se=this[R+7];(z===void 0||Se===void 0)&&Bt(R,this.length-8);const Ve=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(Se<<24);return(BigInt(Ve)<<BigInt(32))+BigInt(z+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),u.prototype.readBigInt64BE=Qe(function(R){R=R>>>0,Vt(R,"offset");const z=this[R],Se=this[R+7];(z===void 0||Se===void 0)&&Bt(R,this.length-8);const Ve=(z<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(Ve)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+Se)}),u.prototype.readFloatLE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),i.read(this,R,!0,23,4)},u.prototype.readFloatBE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),i.read(this,R,!1,23,4)},u.prototype.readDoubleLE=function(R,z){return R=R>>>0,z||Ee(R,8,this.length),i.read(this,R,!0,52,8)},u.prototype.readDoubleBE=function(R,z){return R=R>>>0,z||Ee(R,8,this.length),i.read(this,R,!1,52,8)};function De(ae,R,z,Se,Ve,tt){if(!u.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>Ve||R<tt)throw new RangeError('"value" argument is out of bounds');if(z+Se>ae.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(R,z,Se,Ve){if(R=+R,z=z>>>0,Se=Se>>>0,!Ve){const ut=Math.pow(2,8*Se)-1;De(this,R,z,Se,ut,0)}let tt=1,ot=0;for(this[z]=R&255;++ot<Se&&(tt*=256);)this[z+ot]=R/tt&255;return z+Se},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(R,z,Se,Ve){if(R=+R,z=z>>>0,Se=Se>>>0,!Ve){const ut=Math.pow(2,8*Se)-1;De(this,R,z,Se,ut,0)}let tt=Se-1,ot=1;for(this[z+tt]=R&255;--tt>=0&&(ot*=256);)this[z+tt]=R/ot&255;return z+Se},u.prototype.writeUint8=u.prototype.writeUInt8=function(R,z,Se){return R=+R,z=z>>>0,Se||De(this,R,z,1,255,0),this[z]=R&255,z+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(R,z,Se){return R=+R,z=z>>>0,Se||De(this,R,z,2,65535,0),this[z]=R&255,this[z+1]=R>>>8,z+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(R,z,Se){return R=+R,z=z>>>0,Se||De(this,R,z,2,65535,0),this[z]=R>>>8,this[z+1]=R&255,z+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(R,z,Se){return R=+R,z=z>>>0,Se||De(this,R,z,4,4294967295,0),this[z+3]=R>>>24,this[z+2]=R>>>16,this[z+1]=R>>>8,this[z]=R&255,z+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(R,z,Se){return R=+R,z=z>>>0,Se||De(this,R,z,4,4294967295,0),this[z]=R>>>24,this[z+1]=R>>>16,this[z+2]=R>>>8,this[z+3]=R&255,z+4};function Ae(ae,R,z,Se,Ve){St(R,Se,Ve,ae,z,7);let tt=Number(R&BigInt(4294967295));ae[z++]=tt,tt=tt>>8,ae[z++]=tt,tt=tt>>8,ae[z++]=tt,tt=tt>>8,ae[z++]=tt;let ot=Number(R>>BigInt(32)&BigInt(4294967295));return ae[z++]=ot,ot=ot>>8,ae[z++]=ot,ot=ot>>8,ae[z++]=ot,ot=ot>>8,ae[z++]=ot,z}function Oe(ae,R,z,Se,Ve){St(R,Se,Ve,ae,z,7);let tt=Number(R&BigInt(4294967295));ae[z+7]=tt,tt=tt>>8,ae[z+6]=tt,tt=tt>>8,ae[z+5]=tt,tt=tt>>8,ae[z+4]=tt;let ot=Number(R>>BigInt(32)&BigInt(4294967295));return ae[z+3]=ot,ot=ot>>8,ae[z+2]=ot,ot=ot>>8,ae[z+1]=ot,ot=ot>>8,ae[z]=ot,z+8}u.prototype.writeBigUInt64LE=Qe(function(R,z=0){return Ae(this,R,z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Qe(function(R,z=0){return Oe(this,R,z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(R,z,Se,Ve){if(R=+R,z=z>>>0,!Ve){const Nt=Math.pow(2,8*Se-1);De(this,R,z,Se,Nt-1,-Nt)}let tt=0,ot=1,ut=0;for(this[z]=R&255;++tt<Se&&(ot*=256);)R<0&&ut===0&&this[z+tt-1]!==0&&(ut=1),this[z+tt]=(R/ot>>0)-ut&255;return z+Se},u.prototype.writeIntBE=function(R,z,Se,Ve){if(R=+R,z=z>>>0,!Ve){const Nt=Math.pow(2,8*Se-1);De(this,R,z,Se,Nt-1,-Nt)}let tt=Se-1,ot=1,ut=0;for(this[z+tt]=R&255;--tt>=0&&(ot*=256);)R<0&&ut===0&&this[z+tt+1]!==0&&(ut=1),this[z+tt]=(R/ot>>0)-ut&255;return z+Se},u.prototype.writeInt8=function(R,z,Se){return R=+R,z=z>>>0,Se||De(this,R,z,1,127,-128),R<0&&(R=255+R+1),this[z]=R&255,z+1},u.prototype.writeInt16LE=function(R,z,Se){return R=+R,z=z>>>0,Se||De(this,R,z,2,32767,-32768),this[z]=R&255,this[z+1]=R>>>8,z+2},u.prototype.writeInt16BE=function(R,z,Se){return R=+R,z=z>>>0,Se||De(this,R,z,2,32767,-32768),this[z]=R>>>8,this[z+1]=R&255,z+2},u.prototype.writeInt32LE=function(R,z,Se){return R=+R,z=z>>>0,Se||De(this,R,z,4,2147483647,-2147483648),this[z]=R&255,this[z+1]=R>>>8,this[z+2]=R>>>16,this[z+3]=R>>>24,z+4},u.prototype.writeInt32BE=function(R,z,Se){return R=+R,z=z>>>0,Se||De(this,R,z,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[z]=R>>>24,this[z+1]=R>>>16,this[z+2]=R>>>8,this[z+3]=R&255,z+4},u.prototype.writeBigInt64LE=Qe(function(R,z=0){return Ae(this,R,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Qe(function(R,z=0){return Oe(this,R,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function We(ae,R,z,Se,Ve,tt){if(z+Se>ae.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function He(ae,R,z,Se,Ve){return R=+R,z=z>>>0,Ve||We(ae,R,z,4),i.write(ae,R,z,Se,23,4),z+4}u.prototype.writeFloatLE=function(R,z,Se){return He(this,R,z,!0,Se)},u.prototype.writeFloatBE=function(R,z,Se){return He(this,R,z,!1,Se)};function nt(ae,R,z,Se,Ve){return R=+R,z=z>>>0,Ve||We(ae,R,z,8),i.write(ae,R,z,Se,52,8),z+8}u.prototype.writeDoubleLE=function(R,z,Se){return nt(this,R,z,!0,Se)},u.prototype.writeDoubleBE=function(R,z,Se){return nt(this,R,z,!1,Se)},u.prototype.copy=function(R,z,Se,Ve){if(!u.isBuffer(R))throw new TypeError("argument should be a Buffer");if(Se||(Se=0),!Ve&&Ve!==0&&(Ve=this.length),z>=R.length&&(z=R.length),z||(z=0),Ve>0&&Ve<Se&&(Ve=Se),Ve===Se||R.length===0||this.length===0)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(Se<0||Se>=this.length)throw new RangeError("Index out of range");if(Ve<0)throw new RangeError("sourceEnd out of bounds");Ve>this.length&&(Ve=this.length),R.length-z<Ve-Se&&(Ve=R.length-z+Se);const tt=Ve-Se;return this===R&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(z,Se,Ve):Uint8Array.prototype.set.call(R,this.subarray(Se,Ve),z),tt},u.prototype.fill=function(R,z,Se,Ve){if(typeof R=="string"){if(typeof z=="string"?(Ve=z,z=0,Se=this.length):typeof Se=="string"&&(Ve=Se,Se=this.length),Ve!==void 0&&typeof Ve!="string")throw new TypeError("encoding must be a string");if(typeof Ve=="string"&&!u.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);if(R.length===1){const ot=R.charCodeAt(0);(Ve==="utf8"&&ot<128||Ve==="latin1")&&(R=ot)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(z<0||this.length<z||this.length<Se)throw new RangeError("Out of range index");if(Se<=z)return this;z=z>>>0,Se=Se===void 0?this.length:Se>>>0,R||(R=0);let tt;if(typeof R=="number")for(tt=z;tt<Se;++tt)this[tt]=R;else{const ot=u.isBuffer(R)?R:u.from(R,Ve),ut=ot.length;if(ut===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(tt=0;tt<Se-z;++tt)this[tt+z]=ot[tt%ut]}return this};const dt={};function wt(ae,R,z){dt[ae]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(Ve){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ve,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}wt("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),wt("ERR_INVALID_ARG_TYPE",function(ae,R){return`The "${ae}" argument must be of type number. Received type ${typeof R}`},TypeError),wt("ERR_OUT_OF_RANGE",function(ae,R,z){let Se=`The value of "${ae}" is out of range.`,Ve=z;return Number.isInteger(z)&&Math.abs(z)>2**32?Ve=Rt(String(z)):typeof z=="bigint"&&(Ve=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(Ve=Rt(Ve)),Ve+="n"),Se+=` It must be ${R}. Received ${Ve}`,Se},RangeError);function Rt(ae){let R="",z=ae.length;const Se=ae[0]==="-"?1:0;for(;z>=Se+4;z-=3)R=`_${ae.slice(z-3,z)}${R}`;return`${ae.slice(0,z)}${R}`}function gt(ae,R,z){Vt(R,"offset"),(ae[R]===void 0||ae[R+z]===void 0)&&Bt(R,ae.length-(z+1))}function St(ae,R,z,Se,Ve,tt){if(ae>z||ae<R){const ot=typeof R=="bigint"?"n":"";let ut;throw tt>3?R===0||R===BigInt(0)?ut=`>= 0${ot} and < 2${ot} ** ${(tt+1)*8}${ot}`:ut=`>= -(2${ot} ** ${(tt+1)*8-1}${ot}) and < 2 ** ${(tt+1)*8-1}${ot}`:ut=`>= ${R}${ot} and <= ${z}${ot}`,new dt.ERR_OUT_OF_RANGE("value",ut,ae)}gt(Se,Ve,tt)}function Vt(ae,R){if(typeof ae!="number")throw new dt.ERR_INVALID_ARG_TYPE(R,"number",ae)}function Bt(ae,R,z){throw Math.floor(ae)!==ae?(Vt(ae,z),new dt.ERR_OUT_OF_RANGE(z||"offset","an integer",ae)):R<0?new dt.ERR_BUFFER_OUT_OF_BOUNDS:new dt.ERR_OUT_OF_RANGE(z||"offset",`>= ${z?1:0} and <= ${R}`,ae)}const an=/[^+/0-9A-Za-z-_]/g;function Sn(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(an,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function et(ae,R){R=R||1/0;let z;const Se=ae.length;let Ve=null;const tt=[];for(let ot=0;ot<Se;++ot){if(z=ae.charCodeAt(ot),z>55295&&z<57344){if(!Ve){if(z>56319){(R-=3)>-1&&tt.push(239,191,189);continue}else if(ot+1===Se){(R-=3)>-1&&tt.push(239,191,189);continue}Ve=z;continue}if(z<56320){(R-=3)>-1&&tt.push(239,191,189),Ve=z;continue}z=(Ve-55296<<10|z-56320)+65536}else Ve&&(R-=3)>-1&&tt.push(239,191,189);if(Ve=null,z<128){if((R-=1)<0)break;tt.push(z)}else if(z<2048){if((R-=2)<0)break;tt.push(z>>6|192,z&63|128)}else if(z<65536){if((R-=3)<0)break;tt.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((R-=4)<0)break;tt.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return tt}function ln(ae){const R=[];for(let z=0;z<ae.length;++z)R.push(ae.charCodeAt(z)&255);return R}function wn(ae,R){let z,Se,Ve;const tt=[];for(let ot=0;ot<ae.length&&!((R-=2)<0);++ot)z=ae.charCodeAt(ot),Se=z>>8,Ve=z%256,tt.push(Ve),tt.push(Se);return tt}function xe(ae){return t.toByteArray(Sn(ae))}function N(ae,R,z,Se){let Ve;for(Ve=0;Ve<Se&&!(Ve+z>=R.length||Ve>=ae.length);++Ve)R[Ve+z]=ae[Ve];return Ve}function B(ae,R){return ae instanceof R||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===R.name}function we(ae){return ae!==ae}const Xe=function(){const ae="0123456789abcdef",R=new Array(256);for(let z=0;z<16;++z){const Se=z*16;for(let Ve=0;Ve<16;++Ve)R[Se+Ve]=ae[z]+ae[Ve]}return R}();function Qe(ae){return typeof BigInt>"u"?ct:ae}function ct(){throw new Error("BigInt not supported")}})(yA);window.Buffer=yA.Buffer;O3.render(yt.jsx(Z_.StrictMode,{children:yt.jsx(X5,{})}),document.getElementById("root"));

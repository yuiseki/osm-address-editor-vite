function Ek(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(a,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const g of d.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function i(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(c){if(c.ep)return;c.ep=!0;const d=i(c);fetch(c.href,d)}})();var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function G_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var hE={exports:{}},zg={},fE={exports:{}},Nn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Od=Symbol.for("react.element"),Tk=Symbol.for("react.portal"),Ck=Symbol.for("react.fragment"),Ik=Symbol.for("react.strict_mode"),Ak=Symbol.for("react.profiler"),Pk=Symbol.for("react.provider"),kk=Symbol.for("react.context"),Mk=Symbol.for("react.forward_ref"),Lk=Symbol.for("react.suspense"),zk=Symbol.for("react.memo"),Ok=Symbol.for("react.lazy"),cb=Symbol.iterator;function Fk(e){return e===null||typeof e!="object"?null:(e=cb&&e[cb]||e["@@iterator"],typeof e=="function"?e:null)}var dE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pE=Object.assign,mE={};function Ph(e,t,i){this.props=e,this.context=t,this.refs=mE,this.updater=i||dE}Ph.prototype.isReactComponent={};Ph.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ph.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function gE(){}gE.prototype=Ph.prototype;function Z_(e,t,i){this.props=e,this.context=t,this.refs=mE,this.updater=i||dE}var H_=Z_.prototype=new gE;H_.constructor=Z_;pE(H_,Ph.prototype);H_.isPureReactComponent=!0;var hb=Array.isArray,yE=Object.prototype.hasOwnProperty,W_={current:null},vE={key:!0,ref:!0,__self:!0,__source:!0};function _E(e,t,i){var a,c={},d=null,g=null;if(t!=null)for(a in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(d=""+t.key),t)yE.call(t,a)&&!vE.hasOwnProperty(a)&&(c[a]=t[a]);var l=arguments.length-2;if(l===1)c.children=i;else if(1<l){for(var b=Array(l),w=0;w<l;w++)b[w]=arguments[w+2];c.children=b}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)c[a]===void 0&&(c[a]=l[a]);return{$$typeof:Od,type:e,key:d,ref:g,props:c,_owner:W_.current}}function Rk(e,t){return{$$typeof:Od,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function X_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Od}function jk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var fb=/\/+/g;function t0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jk(""+e.key):t.toString(36)}function cm(e,t,i,a,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(d){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case Od:case Tk:g=!0}}if(g)return g=e,c=c(g),e=a===""?"."+t0(g,0):a,hb(c)?(i="",e!=null&&(i=e.replace(fb,"$&/")+"/"),cm(c,t,i,"",function(w){return w})):c!=null&&(X_(c)&&(c=Rk(c,i+(!c.key||g&&g.key===c.key?"":(""+c.key).replace(fb,"$&/")+"/")+e)),t.push(c)),1;if(g=0,a=a===""?".":a+":",hb(e))for(var l=0;l<e.length;l++){d=e[l];var b=a+t0(d,l);g+=cm(d,t,i,b,c)}else if(b=Fk(e),typeof b=="function")for(e=b.call(e),l=0;!(d=e.next()).done;)d=d.value,b=a+t0(d,l++),g+=cm(d,t,i,b,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function Ip(e,t,i){if(e==null)return e;var a=[],c=0;return cm(e,a,"","",function(d){return t.call(i,d,c++)}),a}function Dk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var go={current:null},hm={transition:null},Bk={ReactCurrentDispatcher:go,ReactCurrentBatchConfig:hm,ReactCurrentOwner:W_};Nn.Children={map:Ip,forEach:function(e,t,i){Ip(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Ip(e,function(){t++}),t},toArray:function(e){return Ip(e,function(t){return t})||[]},only:function(e){if(!X_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nn.Component=Ph;Nn.Fragment=Ck;Nn.Profiler=Ak;Nn.PureComponent=Z_;Nn.StrictMode=Ik;Nn.Suspense=Lk;Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bk;Nn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=pE({},e.props),c=e.key,d=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,g=W_.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)yE.call(t,b)&&!vE.hasOwnProperty(b)&&(a[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)a.children=i;else if(1<b){l=Array(b);for(var w=0;w<b;w++)l[w]=arguments[w+2];a.children=l}return{$$typeof:Od,type:e.type,key:c,ref:d,props:a,_owner:g}};Nn.createContext=function(e){return e={$$typeof:kk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Pk,_context:e},e.Consumer=e};Nn.createElement=_E;Nn.createFactory=function(e){var t=_E.bind(null,e);return t.type=e,t};Nn.createRef=function(){return{current:null}};Nn.forwardRef=function(e){return{$$typeof:Mk,render:e}};Nn.isValidElement=X_;Nn.lazy=function(e){return{$$typeof:Ok,_payload:{_status:-1,_result:e},_init:Dk}};Nn.memo=function(e,t){return{$$typeof:zk,type:e,compare:t===void 0?null:t}};Nn.startTransition=function(e){var t=hm.transition;hm.transition={};try{e()}finally{hm.transition=t}};Nn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Nn.useCallback=function(e,t){return go.current.useCallback(e,t)};Nn.useContext=function(e){return go.current.useContext(e)};Nn.useDebugValue=function(){};Nn.useDeferredValue=function(e){return go.current.useDeferredValue(e)};Nn.useEffect=function(e,t){return go.current.useEffect(e,t)};Nn.useId=function(){return go.current.useId()};Nn.useImperativeHandle=function(e,t,i){return go.current.useImperativeHandle(e,t,i)};Nn.useInsertionEffect=function(e,t){return go.current.useInsertionEffect(e,t)};Nn.useLayoutEffect=function(e,t){return go.current.useLayoutEffect(e,t)};Nn.useMemo=function(e,t){return go.current.useMemo(e,t)};Nn.useReducer=function(e,t,i){return go.current.useReducer(e,t,i)};Nn.useRef=function(e){return go.current.useRef(e)};Nn.useState=function(e){return go.current.useState(e)};Nn.useSyncExternalStore=function(e,t,i){return go.current.useSyncExternalStore(e,t,i)};Nn.useTransition=function(){return go.current.useTransition()};Nn.version="18.2.0";fE.exports=Nn;var yt=fE.exports;const q_=zd(yt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nk=yt,Uk=Symbol.for("react.element"),$k=Symbol.for("react.fragment"),Vk=Object.prototype.hasOwnProperty,Gk=Nk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zk={key:!0,ref:!0,__self:!0,__source:!0};function xE(e,t,i){var a,c={},d=null,g=null;i!==void 0&&(d=""+i),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(g=t.ref);for(a in t)Vk.call(t,a)&&!Zk.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:Uk,type:e,key:d,ref:g,props:c,_owner:Gk.current}}zg.Fragment=$k;zg.jsx=xE;zg.jsxs=xE;hE.exports=zg;var pt=hE.exports,wE={exports:{}},Vo={},bE={exports:{}},SE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ne,de){var Se=ne.length;ne.push(de);e:for(;0<Se;){var Te=Se-1>>>1,$e=ne[Te];if(0<c($e,de))ne[Te]=de,ne[Se]=$e,Se=Te;else break e}}function i(ne){return ne.length===0?null:ne[0]}function a(ne){if(ne.length===0)return null;var de=ne[0],Se=ne.pop();if(Se!==de){ne[0]=Se;e:for(var Te=0,$e=ne.length,Ie=$e>>>1;Te<Ie;){var Le=2*(Te+1)-1,We=ne[Le],Ze=Le+1,nt=ne[Ze];if(0>c(We,Se))Ze<$e&&0>c(nt,We)?(ne[Te]=nt,ne[Ze]=Se,Te=Ze):(ne[Te]=We,ne[Le]=Se,Te=Le);else if(Ze<$e&&0>c(nt,Se))ne[Te]=nt,ne[Ze]=Se,Te=Ze;else break e}}return de}function c(ne,de){var Se=ne.sortIndex-de.sortIndex;return Se!==0?Se:ne.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var g=Date,l=g.now();e.unstable_now=function(){return g.now()-l}}var b=[],w=[],A=1,S=null,k=3,O=!1,N=!1,R=!1,ce=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(ne){for(var de=i(w);de!==null;){if(de.callback===null)a(w);else if(de.startTime<=ne)a(w),de.sortIndex=de.expirationTime,t(b,de);else break;de=i(w)}}function se(ne){if(R=!1,G(ne),!N)if(i(b)!==null)N=!0,ue(X);else{var de=i(w);de!==null&&te(se,de.startTime-ne)}}function X(ne,de){N=!1,R&&(R=!1,K(F),F=-1),O=!0;var Se=k;try{for(G(de),S=i(b);S!==null&&(!(S.expirationTime>de)||ne&&!Y());){var Te=S.callback;if(typeof Te=="function"){S.callback=null,k=S.priorityLevel;var $e=Te(S.expirationTime<=de);de=e.unstable_now(),typeof $e=="function"?S.callback=$e:S===i(b)&&a(b),G(de)}else a(b);S=i(b)}if(S!==null)var Ie=!0;else{var Le=i(w);Le!==null&&te(se,Le.startTime-de),Ie=!1}return Ie}finally{S=null,k=Se,O=!1}}var V=!1,C=null,F=-1,D=5,Q=-1;function Y(){return!(e.unstable_now()-Q<D)}function _e(){if(C!==null){var ne=e.unstable_now();Q=ne;var de=!0;try{de=C(!0,ne)}finally{de?we():(V=!1,C=null)}}else V=!1}var we;if(typeof H=="function")we=function(){H(_e)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,oe=pe.port2;pe.port1.onmessage=_e,we=function(){oe.postMessage(null)}}else we=function(){ce(_e,0)};function ue(ne){C=ne,V||(V=!0,we())}function te(ne,de){F=ce(function(){ne(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){N||O||(N=!0,ue(X))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return i(b)},e.unstable_next=function(ne){switch(k){case 1:case 2:case 3:var de=3;break;default:de=k}var Se=k;k=de;try{return ne()}finally{k=Se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,de){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var Se=k;k=ne;try{return de()}finally{k=Se}},e.unstable_scheduleCallback=function(ne,de,Se){var Te=e.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Te+Se:Te):Se=Te,ne){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=Se+$e,ne={id:A++,callback:de,priorityLevel:ne,startTime:Se,expirationTime:$e,sortIndex:-1},Se>Te?(ne.sortIndex=Se,t(w,ne),i(b)===null&&ne===i(w)&&(R?(K(F),F=-1):R=!0,te(se,Se-Te))):(ne.sortIndex=$e,t(b,ne),N||O||(N=!0,ue(X))),ne},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(ne){var de=k;return function(){var Se=k;k=de;try{return ne.apply(this,arguments)}finally{k=Se}}}})(SE);bE.exports=SE;var Hk=bE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE=yt,$o=Hk;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TE=new Set,ad={};function sc(e,t){gh(e,t),gh(e+"Capture",t)}function gh(e,t){for(ad[e]=t,e=0;e<t.length;e++)TE.add(t[e])}var Wa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),av=Object.prototype.hasOwnProperty,Wk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,db={},pb={};function Xk(e){return av.call(pb,e)?!0:av.call(db,e)?!1:Wk.test(e)?pb[e]=!0:(db[e]=!0,!1)}function qk(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kk(e,t,i,a){if(t===null||typeof t>"u"||qk(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yo(e,t,i,a,c,d,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=g}var Oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Oi[e]=new yo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Oi[t]=new yo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Oi[e]=new yo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Oi[e]=new yo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Oi[e]=new yo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Oi[e]=new yo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Oi[e]=new yo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Oi[e]=new yo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Oi[e]=new yo(e,5,!1,e.toLowerCase(),null,!1,!1)});var K_=/[\-:]([a-z])/g;function Y_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(K_,Y_);Oi[t]=new yo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(K_,Y_);Oi[t]=new yo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(K_,Y_);Oi[t]=new yo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Oi[e]=new yo(e,1,!1,e.toLowerCase(),null,!1,!1)});Oi.xlinkHref=new yo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Oi[e]=new yo(e,1,!1,e.toLowerCase(),null,!0,!0)});function J_(e,t,i,a){var c=Oi.hasOwnProperty(t)?Oi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kk(t,i,c,a)&&(i=null),a||c===null?Xk(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var tl=EE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ap=Symbol.for("react.element"),Gc=Symbol.for("react.portal"),Zc=Symbol.for("react.fragment"),Q_=Symbol.for("react.strict_mode"),lv=Symbol.for("react.profiler"),CE=Symbol.for("react.provider"),IE=Symbol.for("react.context"),e1=Symbol.for("react.forward_ref"),uv=Symbol.for("react.suspense"),cv=Symbol.for("react.suspense_list"),t1=Symbol.for("react.memo"),jl=Symbol.for("react.lazy"),AE=Symbol.for("react.offscreen"),mb=Symbol.iterator;function Ef(e){return e===null||typeof e!="object"?null:(e=mb&&e[mb]||e["@@iterator"],typeof e=="function"?e:null)}var Or=Object.assign,n0;function zf(e){if(n0===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);n0=t&&t[1]||""}return`
`+n0+e}var r0=!1;function i0(e,t){if(!e||r0)return"";r0=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var a=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){a=w}e.call(t.prototype)}else{try{throw Error()}catch(w){a=w}e()}}catch(w){if(w&&a&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),d=a.stack.split(`
`),g=c.length-1,l=d.length-1;1<=g&&0<=l&&c[g]!==d[l];)l--;for(;1<=g&&0<=l;g--,l--)if(c[g]!==d[l]){if(g!==1||l!==1)do if(g--,l--,0>l||c[g]!==d[l]){var b=`
`+c[g].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=g&&0<=l);break}}}finally{r0=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?zf(e):""}function Yk(e){switch(e.tag){case 5:return zf(e.type);case 16:return zf("Lazy");case 13:return zf("Suspense");case 19:return zf("SuspenseList");case 0:case 2:case 15:return e=i0(e.type,!1),e;case 11:return e=i0(e.type.render,!1),e;case 1:return e=i0(e.type,!0),e;default:return""}}function hv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zc:return"Fragment";case Gc:return"Portal";case lv:return"Profiler";case Q_:return"StrictMode";case uv:return"Suspense";case cv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case IE:return(e.displayName||"Context")+".Consumer";case CE:return(e._context.displayName||"Context")+".Provider";case e1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case t1:return t=e.displayName||null,t!==null?t:hv(e.type)||"Memo";case jl:t=e._payload,e=e._init;try{return hv(e(t))}catch{}}return null}function Jk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hv(t);case 8:return t===Q_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function tu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function PE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qk(e){var t=PE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,d=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,d.call(this,g)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pp(e){e._valueTracker||(e._valueTracker=Qk(e))}function kE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=PE(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Mm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fv(e,t){var i=t.checked;return Or({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function gb(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=tu(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ME(e,t){t=t.checked,t!=null&&J_(e,"checked",t,!1)}function dv(e,t){ME(e,t);var i=tu(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pv(e,t.type,i):t.hasOwnProperty("defaultValue")&&pv(e,t.type,tu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yb(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function pv(e,t,i){(t!=="number"||Mm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Of=Array.isArray;function ah(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+tu(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function mv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return Or({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(At(92));if(Of(i)){if(1<i.length)throw Error(At(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:tu(i)}}function LE(e,t){var i=tu(t.value),a=tu(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function _b(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function zE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var kp,OE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(kp=kp||document.createElement("div"),kp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=kp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ld(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Zf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eM=["Webkit","ms","Moz","O"];Object.keys(Zf).forEach(function(e){eM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zf[t]=Zf[e]})});function FE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Zf.hasOwnProperty(e)&&Zf[e]?(""+t).trim():t+"px"}function RE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=FE(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var tM=Or({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yv(e,t){if(t){if(tM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function vv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _v=null;function n1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xv=null,lh=null,uh=null;function xb(e){if(e=jd(e)){if(typeof xv!="function")throw Error(At(280));var t=e.stateNode;t&&(t=Dg(t),xv(e.stateNode,e.type,t))}}function jE(e){lh?uh?uh.push(e):uh=[e]:lh=e}function DE(){if(lh){var e=lh,t=uh;if(uh=lh=null,xb(e),t)for(e=0;e<t.length;e++)xb(t[e])}}function BE(e,t){return e(t)}function NE(){}var o0=!1;function UE(e,t,i){if(o0)return e(t,i);o0=!0;try{return BE(e,t,i)}finally{o0=!1,(lh!==null||uh!==null)&&(NE(),DE())}}function ud(e,t){var i=e.stateNode;if(i===null)return null;var a=Dg(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(At(231,t,typeof i));return i}var wv=!1;if(Wa)try{var Tf={};Object.defineProperty(Tf,"passive",{get:function(){wv=!0}}),window.addEventListener("test",Tf,Tf),window.removeEventListener("test",Tf,Tf)}catch{wv=!1}function nM(e,t,i,a,c,d,g,l,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(i,w)}catch(A){this.onError(A)}}var Hf=!1,Lm=null,zm=!1,bv=null,rM={onError:function(e){Hf=!0,Lm=e}};function iM(e,t,i,a,c,d,g,l,b){Hf=!1,Lm=null,nM.apply(rM,arguments)}function oM(e,t,i,a,c,d,g,l,b){if(iM.apply(this,arguments),Hf){if(Hf){var w=Lm;Hf=!1,Lm=null}else throw Error(At(198));zm||(zm=!0,bv=w)}}function ac(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function $E(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wb(e){if(ac(e)!==e)throw Error(At(188))}function sM(e){var t=e.alternate;if(!t){if(t=ac(e),t===null)throw Error(At(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return wb(c),e;if(d===a)return wb(c),t;d=d.sibling}throw Error(At(188))}if(i.return!==a.return)i=c,a=d;else{for(var g=!1,l=c.child;l;){if(l===i){g=!0,i=c,a=d;break}if(l===a){g=!0,a=c,i=d;break}l=l.sibling}if(!g){for(l=d.child;l;){if(l===i){g=!0,i=d,a=c;break}if(l===a){g=!0,a=d,i=c;break}l=l.sibling}if(!g)throw Error(At(189))}}if(i.alternate!==a)throw Error(At(190))}if(i.tag!==3)throw Error(At(188));return i.stateNode.current===i?e:t}function VE(e){return e=sM(e),e!==null?GE(e):null}function GE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=GE(e);if(t!==null)return t;e=e.sibling}return null}var ZE=$o.unstable_scheduleCallback,bb=$o.unstable_cancelCallback,aM=$o.unstable_shouldYield,lM=$o.unstable_requestPaint,Qr=$o.unstable_now,uM=$o.unstable_getCurrentPriorityLevel,r1=$o.unstable_ImmediatePriority,HE=$o.unstable_UserBlockingPriority,Om=$o.unstable_NormalPriority,cM=$o.unstable_LowPriority,WE=$o.unstable_IdlePriority,Og=null,ha=null;function hM(e){if(ha&&typeof ha.onCommitFiberRoot=="function")try{ha.onCommitFiberRoot(Og,e,void 0,(e.current.flags&128)===128)}catch{}}var Ns=Math.clz32?Math.clz32:pM,fM=Math.log,dM=Math.LN2;function pM(e){return e>>>=0,e===0?32:31-(fM(e)/dM|0)|0}var Mp=64,Lp=4194304;function Ff(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fm(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,d=e.pingedLanes,g=i&268435455;if(g!==0){var l=g&~c;l!==0?a=Ff(l):(d&=g,d!==0&&(a=Ff(d)))}else g=i&~c,g!==0?a=Ff(g):d!==0&&(a=Ff(d));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Ns(t),c=1<<i,a|=e[i],t&=~c;return a}function mM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gM(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var g=31-Ns(d),l=1<<g,b=c[g];b===-1?(!(l&i)||l&a)&&(c[g]=mM(l,t)):b<=t&&(e.expiredLanes|=l),d&=~l}}function Sv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function XE(){var e=Mp;return Mp<<=1,!(Mp&4194240)&&(Mp=64),e}function s0(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Fd(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ns(t),e[t]=i}function yM(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Ns(i),d=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~d}}function i1(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Ns(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var rr=0;function qE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var KE,o1,YE,JE,QE,Ev=!1,zp=[],Wl=null,Xl=null,ql=null,cd=new Map,hd=new Map,Ul=[],vM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sb(e,t){switch(e){case"focusin":case"focusout":Wl=null;break;case"dragenter":case"dragleave":Xl=null;break;case"mouseover":case"mouseout":ql=null;break;case"pointerover":case"pointerout":cd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hd.delete(t.pointerId)}}function Cf(e,t,i,a,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:d,targetContainers:[c]},t!==null&&(t=jd(t),t!==null&&o1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function _M(e,t,i,a,c){switch(t){case"focusin":return Wl=Cf(Wl,e,t,i,a,c),!0;case"dragenter":return Xl=Cf(Xl,e,t,i,a,c),!0;case"mouseover":return ql=Cf(ql,e,t,i,a,c),!0;case"pointerover":var d=c.pointerId;return cd.set(d,Cf(cd.get(d)||null,e,t,i,a,c)),!0;case"gotpointercapture":return d=c.pointerId,hd.set(d,Cf(hd.get(d)||null,e,t,i,a,c)),!0}return!1}function eT(e){var t=Gu(e.target);if(t!==null){var i=ac(t);if(i!==null){if(t=i.tag,t===13){if(t=$E(i),t!==null){e.blockedOn=t,QE(e.priority,function(){YE(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Tv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);_v=a,i.target.dispatchEvent(a),_v=null}else return t=jd(i),t!==null&&o1(t),e.blockedOn=i,!1;t.shift()}return!0}function Eb(e,t,i){fm(e)&&i.delete(t)}function xM(){Ev=!1,Wl!==null&&fm(Wl)&&(Wl=null),Xl!==null&&fm(Xl)&&(Xl=null),ql!==null&&fm(ql)&&(ql=null),cd.forEach(Eb),hd.forEach(Eb)}function If(e,t){e.blockedOn===t&&(e.blockedOn=null,Ev||(Ev=!0,$o.unstable_scheduleCallback($o.unstable_NormalPriority,xM)))}function fd(e){function t(c){return If(c,e)}if(0<zp.length){If(zp[0],e);for(var i=1;i<zp.length;i++){var a=zp[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Wl!==null&&If(Wl,e),Xl!==null&&If(Xl,e),ql!==null&&If(ql,e),cd.forEach(t),hd.forEach(t),i=0;i<Ul.length;i++)a=Ul[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Ul.length&&(i=Ul[0],i.blockedOn===null);)eT(i),i.blockedOn===null&&Ul.shift()}var ch=tl.ReactCurrentBatchConfig,Rm=!0;function wM(e,t,i,a){var c=rr,d=ch.transition;ch.transition=null;try{rr=1,s1(e,t,i,a)}finally{rr=c,ch.transition=d}}function bM(e,t,i,a){var c=rr,d=ch.transition;ch.transition=null;try{rr=4,s1(e,t,i,a)}finally{rr=c,ch.transition=d}}function s1(e,t,i,a){if(Rm){var c=Tv(e,t,i,a);if(c===null)g0(e,t,a,jm,i),Sb(e,a);else if(_M(c,e,t,i,a))a.stopPropagation();else if(Sb(e,a),t&4&&-1<vM.indexOf(e)){for(;c!==null;){var d=jd(c);if(d!==null&&KE(d),d=Tv(e,t,i,a),d===null&&g0(e,t,a,jm,i),d===c)break;c=d}c!==null&&a.stopPropagation()}else g0(e,t,a,null,i)}}var jm=null;function Tv(e,t,i,a){if(jm=null,e=n1(a),e=Gu(e),e!==null)if(t=ac(e),t===null)e=null;else if(i=t.tag,i===13){if(e=$E(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jm=e,null}function tT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uM()){case r1:return 1;case HE:return 4;case Om:case cM:return 16;case WE:return 536870912;default:return 16}default:return 16}}var Gl=null,a1=null,dm=null;function nT(){if(dm)return dm;var e,t=a1,i=t.length,a,c="value"in Gl?Gl.value:Gl.textContent,d=c.length;for(e=0;e<i&&t[e]===c[e];e++);var g=i-e;for(a=1;a<=g&&t[i-a]===c[d-a];a++);return dm=c.slice(e,1<a?1-a:void 0)}function pm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Op(){return!0}function Tb(){return!1}function Go(e){function t(i,a,c,d,g){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(d):d[l]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Op:Tb,this.isPropagationStopped=Tb,this}return Or(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Op)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Op)},persist:function(){},isPersistent:Op}),t}var kh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},l1=Go(kh),Rd=Or({},kh,{view:0,detail:0}),SM=Go(Rd),a0,l0,Af,Fg=Or({},Rd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Af&&(Af&&e.type==="mousemove"?(a0=e.screenX-Af.screenX,l0=e.screenY-Af.screenY):l0=a0=0,Af=e),a0)},movementY:function(e){return"movementY"in e?e.movementY:l0}}),Cb=Go(Fg),EM=Or({},Fg,{dataTransfer:0}),TM=Go(EM),CM=Or({},Rd,{relatedTarget:0}),u0=Go(CM),IM=Or({},kh,{animationName:0,elapsedTime:0,pseudoElement:0}),AM=Go(IM),PM=Or({},kh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kM=Go(PM),MM=Or({},kh,{data:0}),Ib=Go(MM),LM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=OM[e])?!!t[e]:!1}function u1(){return FM}var RM=Or({},Rd,{key:function(e){if(e.key){var t=LM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u1,charCode:function(e){return e.type==="keypress"?pm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jM=Go(RM),DM=Or({},Fg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ab=Go(DM),BM=Or({},Rd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u1}),NM=Go(BM),UM=Or({},kh,{propertyName:0,elapsedTime:0,pseudoElement:0}),$M=Go(UM),VM=Or({},Fg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GM=Go(VM),ZM=[9,13,27,32],c1=Wa&&"CompositionEvent"in window,Wf=null;Wa&&"documentMode"in document&&(Wf=document.documentMode);var HM=Wa&&"TextEvent"in window&&!Wf,rT=Wa&&(!c1||Wf&&8<Wf&&11>=Wf),Pb=" ",kb=!1;function iT(e,t){switch(e){case"keyup":return ZM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hc=!1;function WM(e,t){switch(e){case"compositionend":return oT(t);case"keypress":return t.which!==32?null:(kb=!0,Pb);case"textInput":return e=t.data,e===Pb&&kb?null:e;default:return null}}function XM(e,t){if(Hc)return e==="compositionend"||!c1&&iT(e,t)?(e=nT(),dm=a1=Gl=null,Hc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rT&&t.locale!=="ko"?null:t.data;default:return null}}var qM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qM[e.type]:t==="textarea"}function sT(e,t,i,a){jE(a),t=Dm(t,"onChange"),0<t.length&&(i=new l1("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var Xf=null,dd=null;function KM(e){yT(e,0)}function Rg(e){var t=qc(e);if(kE(t))return e}function YM(e,t){if(e==="change")return t}var aT=!1;if(Wa){var c0;if(Wa){var h0="oninput"in document;if(!h0){var Lb=document.createElement("div");Lb.setAttribute("oninput","return;"),h0=typeof Lb.oninput=="function"}c0=h0}else c0=!1;aT=c0&&(!document.documentMode||9<document.documentMode)}function zb(){Xf&&(Xf.detachEvent("onpropertychange",lT),dd=Xf=null)}function lT(e){if(e.propertyName==="value"&&Rg(dd)){var t=[];sT(t,dd,e,n1(e)),UE(KM,t)}}function JM(e,t,i){e==="focusin"?(zb(),Xf=t,dd=i,Xf.attachEvent("onpropertychange",lT)):e==="focusout"&&zb()}function QM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rg(dd)}function e3(e,t){if(e==="click")return Rg(t)}function t3(e,t){if(e==="input"||e==="change")return Rg(t)}function n3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $s=typeof Object.is=="function"?Object.is:n3;function pd(e,t){if($s(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!av.call(t,c)||!$s(e[c],t[c]))return!1}return!0}function Ob(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fb(e,t){var i=Ob(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ob(i)}}function uT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cT(){for(var e=window,t=Mm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Mm(e.document)}return t}function h1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function r3(e){var t=cT(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&uT(i.ownerDocument.documentElement,i)){if(a!==null&&h1(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,d=Math.min(a.start,c);a=a.end===void 0?d:Math.min(a.end,c),!e.extend&&d>a&&(c=a,a=d,d=c),c=Fb(i,d);var g=Fb(i,a);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>a?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var i3=Wa&&"documentMode"in document&&11>=document.documentMode,Wc=null,Cv=null,qf=null,Iv=!1;function Rb(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Iv||Wc==null||Wc!==Mm(a)||(a=Wc,"selectionStart"in a&&h1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),qf&&pd(qf,a)||(qf=a,a=Dm(Cv,"onSelect"),0<a.length&&(t=new l1("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Wc)))}function Fp(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Xc={animationend:Fp("Animation","AnimationEnd"),animationiteration:Fp("Animation","AnimationIteration"),animationstart:Fp("Animation","AnimationStart"),transitionend:Fp("Transition","TransitionEnd")},f0={},hT={};Wa&&(hT=document.createElement("div").style,"AnimationEvent"in window||(delete Xc.animationend.animation,delete Xc.animationiteration.animation,delete Xc.animationstart.animation),"TransitionEvent"in window||delete Xc.transitionend.transition);function jg(e){if(f0[e])return f0[e];if(!Xc[e])return e;var t=Xc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in hT)return f0[e]=t[i];return e}var fT=jg("animationend"),dT=jg("animationiteration"),pT=jg("animationstart"),mT=jg("transitionend"),gT=new Map,jb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function au(e,t){gT.set(e,t),sc(t,[e])}for(var d0=0;d0<jb.length;d0++){var p0=jb[d0],o3=p0.toLowerCase(),s3=p0[0].toUpperCase()+p0.slice(1);au(o3,"on"+s3)}au(fT,"onAnimationEnd");au(dT,"onAnimationIteration");au(pT,"onAnimationStart");au("dblclick","onDoubleClick");au("focusin","onFocus");au("focusout","onBlur");au(mT,"onTransitionEnd");gh("onMouseEnter",["mouseout","mouseover"]);gh("onMouseLeave",["mouseout","mouseover"]);gh("onPointerEnter",["pointerout","pointerover"]);gh("onPointerLeave",["pointerout","pointerover"]);sc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sc("onBeforeInput",["compositionend","keypress","textInput","paste"]);sc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rf));function Db(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,oM(a,t,void 0,e),e.currentTarget=null}function yT(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var g=a.length-1;0<=g;g--){var l=a[g],b=l.instance,w=l.currentTarget;if(l=l.listener,b!==d&&c.isPropagationStopped())break e;Db(c,l,w),d=b}else for(g=0;g<a.length;g++){if(l=a[g],b=l.instance,w=l.currentTarget,l=l.listener,b!==d&&c.isPropagationStopped())break e;Db(c,l,w),d=b}}}if(zm)throw e=bv,zm=!1,bv=null,e}function yr(e,t){var i=t[Lv];i===void 0&&(i=t[Lv]=new Set);var a=e+"__bubble";i.has(a)||(vT(t,e,2,!1),i.add(a))}function m0(e,t,i){var a=0;t&&(a|=4),vT(i,e,a,t)}var Rp="_reactListening"+Math.random().toString(36).slice(2);function md(e){if(!e[Rp]){e[Rp]=!0,TE.forEach(function(i){i!=="selectionchange"&&(a3.has(i)||m0(i,!1,e),m0(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rp]||(t[Rp]=!0,m0("selectionchange",!1,t))}}function vT(e,t,i,a){switch(tT(t)){case 1:var c=wM;break;case 4:c=bM;break;default:c=s1}i=c.bind(null,t,i,e),c=void 0,!wv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function g0(e,t,i,a,c){var d=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var l=a.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(g===4)for(g=a.return;g!==null;){var b=g.tag;if((b===3||b===4)&&(b=g.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;g=g.return}for(;l!==null;){if(g=Gu(l),g===null)return;if(b=g.tag,b===5||b===6){a=d=g;continue e}l=l.parentNode}}a=a.return}UE(function(){var w=d,A=n1(i),S=[];e:{var k=gT.get(e);if(k!==void 0){var O=l1,N=e;switch(e){case"keypress":if(pm(i)===0)break e;case"keydown":case"keyup":O=jM;break;case"focusin":N="focus",O=u0;break;case"focusout":N="blur",O=u0;break;case"beforeblur":case"afterblur":O=u0;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Cb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=TM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=NM;break;case fT:case dT:case pT:O=AM;break;case mT:O=$M;break;case"scroll":O=SM;break;case"wheel":O=GM;break;case"copy":case"cut":case"paste":O=kM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Ab}var R=(t&4)!==0,ce=!R&&e==="scroll",K=R?k!==null?k+"Capture":null:k;R=[];for(var H=w,G;H!==null;){G=H;var se=G.stateNode;if(G.tag===5&&se!==null&&(G=se,K!==null&&(se=ud(H,K),se!=null&&R.push(gd(H,se,G)))),ce)break;H=H.return}0<R.length&&(k=new O(k,N,null,i,A),S.push({event:k,listeners:R}))}}if(!(t&7)){e:{if(k=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",k&&i!==_v&&(N=i.relatedTarget||i.fromElement)&&(Gu(N)||N[Xa]))break e;if((O||k)&&(k=A.window===A?A:(k=A.ownerDocument)?k.defaultView||k.parentWindow:window,O?(N=i.relatedTarget||i.toElement,O=w,N=N?Gu(N):null,N!==null&&(ce=ac(N),N!==ce||N.tag!==5&&N.tag!==6)&&(N=null)):(O=null,N=w),O!==N)){if(R=Cb,se="onMouseLeave",K="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(R=Ab,se="onPointerLeave",K="onPointerEnter",H="pointer"),ce=O==null?k:qc(O),G=N==null?k:qc(N),k=new R(se,H+"leave",O,i,A),k.target=ce,k.relatedTarget=G,se=null,Gu(A)===w&&(R=new R(K,H+"enter",N,i,A),R.target=G,R.relatedTarget=ce,se=R),ce=se,O&&N)t:{for(R=O,K=N,H=0,G=R;G;G=Rc(G))H++;for(G=0,se=K;se;se=Rc(se))G++;for(;0<H-G;)R=Rc(R),H--;for(;0<G-H;)K=Rc(K),G--;for(;H--;){if(R===K||K!==null&&R===K.alternate)break t;R=Rc(R),K=Rc(K)}R=null}else R=null;O!==null&&Bb(S,k,O,R,!1),N!==null&&ce!==null&&Bb(S,ce,N,R,!0)}}e:{if(k=w?qc(w):window,O=k.nodeName&&k.nodeName.toLowerCase(),O==="select"||O==="input"&&k.type==="file")var X=YM;else if(Mb(k))if(aT)X=t3;else{X=QM;var V=JM}else(O=k.nodeName)&&O.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(X=e3);if(X&&(X=X(e,w))){sT(S,X,i,A);break e}V&&V(e,k,w),e==="focusout"&&(V=k._wrapperState)&&V.controlled&&k.type==="number"&&pv(k,"number",k.value)}switch(V=w?qc(w):window,e){case"focusin":(Mb(V)||V.contentEditable==="true")&&(Wc=V,Cv=w,qf=null);break;case"focusout":qf=Cv=Wc=null;break;case"mousedown":Iv=!0;break;case"contextmenu":case"mouseup":case"dragend":Iv=!1,Rb(S,i,A);break;case"selectionchange":if(i3)break;case"keydown":case"keyup":Rb(S,i,A)}var C;if(c1)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else Hc?iT(e,i)&&(F="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(F="onCompositionStart");F&&(rT&&i.locale!=="ko"&&(Hc||F!=="onCompositionStart"?F==="onCompositionEnd"&&Hc&&(C=nT()):(Gl=A,a1="value"in Gl?Gl.value:Gl.textContent,Hc=!0)),V=Dm(w,F),0<V.length&&(F=new Ib(F,e,null,i,A),S.push({event:F,listeners:V}),C?F.data=C:(C=oT(i),C!==null&&(F.data=C)))),(C=HM?WM(e,i):XM(e,i))&&(w=Dm(w,"onBeforeInput"),0<w.length&&(A=new Ib("onBeforeInput","beforeinput",null,i,A),S.push({event:A,listeners:w}),A.data=C))}yT(S,t)})}function gd(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Dm(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=ud(e,i),d!=null&&a.unshift(gd(e,d,c)),d=ud(e,t),d!=null&&a.push(gd(e,d,c))),e=e.return}return a}function Rc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Bb(e,t,i,a,c){for(var d=t._reactName,g=[];i!==null&&i!==a;){var l=i,b=l.alternate,w=l.stateNode;if(b!==null&&b===a)break;l.tag===5&&w!==null&&(l=w,c?(b=ud(i,d),b!=null&&g.unshift(gd(i,b,l))):c||(b=ud(i,d),b!=null&&g.push(gd(i,b,l)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var l3=/\r\n?/g,u3=/\u0000|\uFFFD/g;function Nb(e){return(typeof e=="string"?e:""+e).replace(l3,`
`).replace(u3,"")}function jp(e,t,i){if(t=Nb(t),Nb(e)!==t&&i)throw Error(At(425))}function Bm(){}var Av=null,Pv=null;function kv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mv=typeof setTimeout=="function"?setTimeout:void 0,c3=typeof clearTimeout=="function"?clearTimeout:void 0,Ub=typeof Promise=="function"?Promise:void 0,h3=typeof queueMicrotask=="function"?queueMicrotask:typeof Ub<"u"?function(e){return Ub.resolve(null).then(e).catch(f3)}:Mv;function f3(e){setTimeout(function(){throw e})}function y0(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),fd(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);fd(t)}function Kl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $b(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Mh=Math.random().toString(36).slice(2),sa="__reactFiber$"+Mh,yd="__reactProps$"+Mh,Xa="__reactContainer$"+Mh,Lv="__reactEvents$"+Mh,d3="__reactListeners$"+Mh,p3="__reactHandles$"+Mh;function Gu(e){var t=e[sa];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Xa]||i[sa]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=$b(e);e!==null;){if(i=e[sa])return i;e=$b(e)}return t}e=i,i=e.parentNode}return null}function jd(e){return e=e[sa]||e[Xa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function Dg(e){return e[yd]||null}var zv=[],Kc=-1;function lu(e){return{current:e}}function _r(e){0>Kc||(e.current=zv[Kc],zv[Kc]=null,Kc--)}function mr(e,t){Kc++,zv[Kc]=e.current,e.current=t}var nu={},Yi=lu(nu),To=lu(!1),Yu=nu;function yh(e,t){var i=e.type.contextTypes;if(!i)return nu;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in i)c[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Co(e){return e=e.childContextTypes,e!=null}function Nm(){_r(To),_r(Yi)}function Vb(e,t,i){if(Yi.current!==nu)throw Error(At(168));mr(Yi,t),mr(To,i)}function _T(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(At(108,Jk(e)||"Unknown",c));return Or({},i,a)}function Um(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nu,Yu=Yi.current,mr(Yi,e),mr(To,To.current),!0}function Gb(e,t,i){var a=e.stateNode;if(!a)throw Error(At(169));i?(e=_T(e,t,Yu),a.__reactInternalMemoizedMergedChildContext=e,_r(To),_r(Yi),mr(Yi,e)):_r(To),mr(To,i)}var $a=null,Bg=!1,v0=!1;function xT(e){$a===null?$a=[e]:$a.push(e)}function m3(e){Bg=!0,xT(e)}function uu(){if(!v0&&$a!==null){v0=!0;var e=0,t=rr;try{var i=$a;for(rr=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}$a=null,Bg=!1}catch(c){throw $a!==null&&($a=$a.slice(e+1)),ZE(r1,uu),c}finally{rr=t,v0=!1}}return null}var Yc=[],Jc=0,$m=null,Vm=0,ls=[],us=0,Ju=null,Ga=1,Za="";function Uu(e,t){Yc[Jc++]=Vm,Yc[Jc++]=$m,$m=e,Vm=t}function wT(e,t,i){ls[us++]=Ga,ls[us++]=Za,ls[us++]=Ju,Ju=e;var a=Ga;e=Za;var c=32-Ns(a)-1;a&=~(1<<c),i+=1;var d=32-Ns(t)+c;if(30<d){var g=c-c%5;d=(a&(1<<g)-1).toString(32),a>>=g,c-=g,Ga=1<<32-Ns(t)+c|i<<c|a,Za=d+e}else Ga=1<<d|i<<c|a,Za=e}function f1(e){e.return!==null&&(Uu(e,1),wT(e,1,0))}function d1(e){for(;e===$m;)$m=Yc[--Jc],Yc[Jc]=null,Vm=Yc[--Jc],Yc[Jc]=null;for(;e===Ju;)Ju=ls[--us],ls[us]=null,Za=ls[--us],ls[us]=null,Ga=ls[--us],ls[us]=null}var Uo=null,No=null,Cr=!1,Os=null;function bT(e,t){var i=cs(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Zb(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Uo=e,No=Kl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Uo=e,No=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Ju!==null?{id:Ga,overflow:Za}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=cs(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Uo=e,No=null,!0):!1;default:return!1}}function Ov(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fv(e){if(Cr){var t=No;if(t){var i=t;if(!Zb(e,t)){if(Ov(e))throw Error(At(418));t=Kl(i.nextSibling);var a=Uo;t&&Zb(e,t)?bT(a,i):(e.flags=e.flags&-4097|2,Cr=!1,Uo=e)}}else{if(Ov(e))throw Error(At(418));e.flags=e.flags&-4097|2,Cr=!1,Uo=e}}}function Hb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Uo=e}function Dp(e){if(e!==Uo)return!1;if(!Cr)return Hb(e),Cr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kv(e.type,e.memoizedProps)),t&&(t=No)){if(Ov(e))throw ST(),Error(At(418));for(;t;)bT(e,t),t=Kl(t.nextSibling)}if(Hb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){No=Kl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}No=null}}else No=Uo?Kl(e.stateNode.nextSibling):null;return!0}function ST(){for(var e=No;e;)e=Kl(e.nextSibling)}function vh(){No=Uo=null,Cr=!1}function p1(e){Os===null?Os=[e]:Os.push(e)}var g3=tl.ReactCurrentBatchConfig;function Ls(e,t){if(e&&e.defaultProps){t=Or({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Gm=lu(null),Zm=null,Qc=null,m1=null;function g1(){m1=Qc=Zm=null}function y1(e){var t=Gm.current;_r(Gm),e._currentValue=t}function Rv(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function hh(e,t){Zm=e,m1=Qc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Eo=!0),e.firstContext=null)}function ds(e){var t=e._currentValue;if(m1!==e)if(e={context:e,memoizedValue:t,next:null},Qc===null){if(Zm===null)throw Error(At(308));Qc=e,Zm.dependencies={lanes:0,firstContext:e}}else Qc=Qc.next=e;return t}var Zu=null;function v1(e){Zu===null?Zu=[e]:Zu.push(e)}function ET(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,v1(t)):(i.next=c.next,c.next=i),t.interleaved=i,qa(e,a)}function qa(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Dl=!1;function _1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ha(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yl(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Hn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,qa(e,i)}return c=a.interleaved,c===null?(t.next=t,v1(a)):(t.next=c.next,c.next=t),a.interleaved=t,qa(e,i)}function mm(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,i1(e,i)}}function Wb(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};d===null?c=d=g:d=d.next=g,i=i.next}while(i!==null);d===null?c=d=t:d=d.next=t}else c=d=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Hm(e,t,i,a){var c=e.updateQueue;Dl=!1;var d=c.firstBaseUpdate,g=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var b=l,w=b.next;b.next=null,g===null?d=w:g.next=w,g=b;var A=e.alternate;A!==null&&(A=A.updateQueue,l=A.lastBaseUpdate,l!==g&&(l===null?A.firstBaseUpdate=w:l.next=w,A.lastBaseUpdate=b))}if(d!==null){var S=c.baseState;g=0,A=w=b=null,l=d;do{var k=l.lane,O=l.eventTime;if((a&k)===k){A!==null&&(A=A.next={eventTime:O,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=e,R=l;switch(k=t,O=i,R.tag){case 1:if(N=R.payload,typeof N=="function"){S=N.call(O,S,k);break e}S=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=R.payload,k=typeof N=="function"?N.call(O,S,k):N,k==null)break e;S=Or({},S,k);break e;case 2:Dl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,k=c.effects,k===null?c.effects=[l]:k.push(l))}else O={eventTime:O,lane:k,tag:l.tag,payload:l.payload,callback:l.callback,next:null},A===null?(w=A=O,b=S):A=A.next=O,g|=k;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;k=l,l=k.next,k.next=null,c.lastBaseUpdate=k,c.shared.pending=null}}while(!0);if(A===null&&(b=S),c.baseState=b,c.firstBaseUpdate=w,c.lastBaseUpdate=A,t=c.shared.interleaved,t!==null){c=t;do g|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);ec|=g,e.lanes=g,e.memoizedState=S}}function Xb(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(At(191,c));c.call(a)}}}var CT=new EE.Component().refs;function jv(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Or({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ng={isMounted:function(e){return(e=e._reactInternals)?ac(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=ho(),c=Ql(e),d=Ha(a,c);d.payload=t,i!=null&&(d.callback=i),t=Yl(e,d,c),t!==null&&(Us(t,e,c,a),mm(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=ho(),c=Ql(e),d=Ha(a,c);d.tag=1,d.payload=t,i!=null&&(d.callback=i),t=Yl(e,d,c),t!==null&&(Us(t,e,c,a),mm(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ho(),a=Ql(e),c=Ha(i,a);c.tag=2,t!=null&&(c.callback=t),t=Yl(e,c,a),t!==null&&(Us(t,e,a,i),mm(t,e,a))}};function qb(e,t,i,a,c,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,g):t.prototype&&t.prototype.isPureReactComponent?!pd(i,a)||!pd(c,d):!0}function IT(e,t,i){var a=!1,c=nu,d=t.contextType;return typeof d=="object"&&d!==null?d=ds(d):(c=Co(t)?Yu:Yi.current,a=t.contextTypes,d=(a=a!=null)?yh(e,c):nu),t=new t(i,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ng,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function Kb(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&Ng.enqueueReplaceState(t,t.state,null)}function Dv(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=CT,_1(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=ds(d):(d=Co(t)?Yu:Yi.current,c.context=yh(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(jv(e,t,d,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Ng.enqueueReplaceState(c,c.state,null),Hm(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Pf(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(At(309));var a=i.stateNode}if(!a)throw Error(At(147,e));var c=a,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(g){var l=c.refs;l===CT&&(l=c.refs={}),g===null?delete l[d]:l[d]=g},t._stringRef=d,t)}if(typeof e!="string")throw Error(At(284));if(!i._owner)throw Error(At(290,e))}return e}function Bp(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yb(e){var t=e._init;return t(e._payload)}function AT(e){function t(K,H){if(e){var G=K.deletions;G===null?(K.deletions=[H],K.flags|=16):G.push(H)}}function i(K,H){if(!e)return null;for(;H!==null;)t(K,H),H=H.sibling;return null}function a(K,H){for(K=new Map;H!==null;)H.key!==null?K.set(H.key,H):K.set(H.index,H),H=H.sibling;return K}function c(K,H){return K=eu(K,H),K.index=0,K.sibling=null,K}function d(K,H,G){return K.index=G,e?(G=K.alternate,G!==null?(G=G.index,G<H?(K.flags|=2,H):G):(K.flags|=2,H)):(K.flags|=1048576,H)}function g(K){return e&&K.alternate===null&&(K.flags|=2),K}function l(K,H,G,se){return H===null||H.tag!==6?(H=T0(G,K.mode,se),H.return=K,H):(H=c(H,G),H.return=K,H)}function b(K,H,G,se){var X=G.type;return X===Zc?A(K,H,G.props.children,se,G.key):H!==null&&(H.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===jl&&Yb(X)===H.type)?(se=c(H,G.props),se.ref=Pf(K,H,G),se.return=K,se):(se=wm(G.type,G.key,G.props,null,K.mode,se),se.ref=Pf(K,H,G),se.return=K,se)}function w(K,H,G,se){return H===null||H.tag!==4||H.stateNode.containerInfo!==G.containerInfo||H.stateNode.implementation!==G.implementation?(H=C0(G,K.mode,se),H.return=K,H):(H=c(H,G.children||[]),H.return=K,H)}function A(K,H,G,se,X){return H===null||H.tag!==7?(H=Ku(G,K.mode,se,X),H.return=K,H):(H=c(H,G),H.return=K,H)}function S(K,H,G){if(typeof H=="string"&&H!==""||typeof H=="number")return H=T0(""+H,K.mode,G),H.return=K,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Ap:return G=wm(H.type,H.key,H.props,null,K.mode,G),G.ref=Pf(K,null,H),G.return=K,G;case Gc:return H=C0(H,K.mode,G),H.return=K,H;case jl:var se=H._init;return S(K,se(H._payload),G)}if(Of(H)||Ef(H))return H=Ku(H,K.mode,G,null),H.return=K,H;Bp(K,H)}return null}function k(K,H,G,se){var X=H!==null?H.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return X!==null?null:l(K,H,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Ap:return G.key===X?b(K,H,G,se):null;case Gc:return G.key===X?w(K,H,G,se):null;case jl:return X=G._init,k(K,H,X(G._payload),se)}if(Of(G)||Ef(G))return X!==null?null:A(K,H,G,se,null);Bp(K,G)}return null}function O(K,H,G,se,X){if(typeof se=="string"&&se!==""||typeof se=="number")return K=K.get(G)||null,l(H,K,""+se,X);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case Ap:return K=K.get(se.key===null?G:se.key)||null,b(H,K,se,X);case Gc:return K=K.get(se.key===null?G:se.key)||null,w(H,K,se,X);case jl:var V=se._init;return O(K,H,G,V(se._payload),X)}if(Of(se)||Ef(se))return K=K.get(G)||null,A(H,K,se,X,null);Bp(H,se)}return null}function N(K,H,G,se){for(var X=null,V=null,C=H,F=H=0,D=null;C!==null&&F<G.length;F++){C.index>F?(D=C,C=null):D=C.sibling;var Q=k(K,C,G[F],se);if(Q===null){C===null&&(C=D);break}e&&C&&Q.alternate===null&&t(K,C),H=d(Q,H,F),V===null?X=Q:V.sibling=Q,V=Q,C=D}if(F===G.length)return i(K,C),Cr&&Uu(K,F),X;if(C===null){for(;F<G.length;F++)C=S(K,G[F],se),C!==null&&(H=d(C,H,F),V===null?X=C:V.sibling=C,V=C);return Cr&&Uu(K,F),X}for(C=a(K,C);F<G.length;F++)D=O(C,K,F,G[F],se),D!==null&&(e&&D.alternate!==null&&C.delete(D.key===null?F:D.key),H=d(D,H,F),V===null?X=D:V.sibling=D,V=D);return e&&C.forEach(function(Y){return t(K,Y)}),Cr&&Uu(K,F),X}function R(K,H,G,se){var X=Ef(G);if(typeof X!="function")throw Error(At(150));if(G=X.call(G),G==null)throw Error(At(151));for(var V=X=null,C=H,F=H=0,D=null,Q=G.next();C!==null&&!Q.done;F++,Q=G.next()){C.index>F?(D=C,C=null):D=C.sibling;var Y=k(K,C,Q.value,se);if(Y===null){C===null&&(C=D);break}e&&C&&Y.alternate===null&&t(K,C),H=d(Y,H,F),V===null?X=Y:V.sibling=Y,V=Y,C=D}if(Q.done)return i(K,C),Cr&&Uu(K,F),X;if(C===null){for(;!Q.done;F++,Q=G.next())Q=S(K,Q.value,se),Q!==null&&(H=d(Q,H,F),V===null?X=Q:V.sibling=Q,V=Q);return Cr&&Uu(K,F),X}for(C=a(K,C);!Q.done;F++,Q=G.next())Q=O(C,K,F,Q.value,se),Q!==null&&(e&&Q.alternate!==null&&C.delete(Q.key===null?F:Q.key),H=d(Q,H,F),V===null?X=Q:V.sibling=Q,V=Q);return e&&C.forEach(function(_e){return t(K,_e)}),Cr&&Uu(K,F),X}function ce(K,H,G,se){if(typeof G=="object"&&G!==null&&G.type===Zc&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Ap:e:{for(var X=G.key,V=H;V!==null;){if(V.key===X){if(X=G.type,X===Zc){if(V.tag===7){i(K,V.sibling),H=c(V,G.props.children),H.return=K,K=H;break e}}else if(V.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===jl&&Yb(X)===V.type){i(K,V.sibling),H=c(V,G.props),H.ref=Pf(K,V,G),H.return=K,K=H;break e}i(K,V);break}else t(K,V);V=V.sibling}G.type===Zc?(H=Ku(G.props.children,K.mode,se,G.key),H.return=K,K=H):(se=wm(G.type,G.key,G.props,null,K.mode,se),se.ref=Pf(K,H,G),se.return=K,K=se)}return g(K);case Gc:e:{for(V=G.key;H!==null;){if(H.key===V)if(H.tag===4&&H.stateNode.containerInfo===G.containerInfo&&H.stateNode.implementation===G.implementation){i(K,H.sibling),H=c(H,G.children||[]),H.return=K,K=H;break e}else{i(K,H);break}else t(K,H);H=H.sibling}H=C0(G,K.mode,se),H.return=K,K=H}return g(K);case jl:return V=G._init,ce(K,H,V(G._payload),se)}if(Of(G))return N(K,H,G,se);if(Ef(G))return R(K,H,G,se);Bp(K,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,H!==null&&H.tag===6?(i(K,H.sibling),H=c(H,G),H.return=K,K=H):(i(K,H),H=T0(G,K.mode,se),H.return=K,K=H),g(K)):i(K,H)}return ce}var _h=AT(!0),PT=AT(!1),Dd={},fa=lu(Dd),vd=lu(Dd),_d=lu(Dd);function Hu(e){if(e===Dd)throw Error(At(174));return e}function x1(e,t){switch(mr(_d,t),mr(vd,e),mr(fa,Dd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:gv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=gv(t,e)}_r(fa),mr(fa,t)}function xh(){_r(fa),_r(vd),_r(_d)}function kT(e){Hu(_d.current);var t=Hu(fa.current),i=gv(t,e.type);t!==i&&(mr(vd,e),mr(fa,i))}function w1(e){vd.current===e&&(_r(fa),_r(vd))}var Mr=lu(0);function Wm(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _0=[];function b1(){for(var e=0;e<_0.length;e++)_0[e]._workInProgressVersionPrimary=null;_0.length=0}var gm=tl.ReactCurrentDispatcher,x0=tl.ReactCurrentBatchConfig,Qu=0,zr=null,ui=null,xi=null,Xm=!1,Kf=!1,xd=0,y3=0;function Hi(){throw Error(At(321))}function S1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!$s(e[i],t[i]))return!1;return!0}function E1(e,t,i,a,c,d){if(Qu=d,zr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gm.current=e===null||e.memoizedState===null?w3:b3,e=i(a,c),Kf){d=0;do{if(Kf=!1,xd=0,25<=d)throw Error(At(301));d+=1,xi=ui=null,t.updateQueue=null,gm.current=S3,e=i(a,c)}while(Kf)}if(gm.current=qm,t=ui!==null&&ui.next!==null,Qu=0,xi=ui=zr=null,Xm=!1,t)throw Error(At(300));return e}function T1(){var e=xd!==0;return xd=0,e}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xi===null?zr.memoizedState=xi=e:xi=xi.next=e,xi}function ps(){if(ui===null){var e=zr.alternate;e=e!==null?e.memoizedState:null}else e=ui.next;var t=xi===null?zr.memoizedState:xi.next;if(t!==null)xi=t,ui=e;else{if(e===null)throw Error(At(310));ui=e,e={memoizedState:ui.memoizedState,baseState:ui.baseState,baseQueue:ui.baseQueue,queue:ui.queue,next:null},xi===null?zr.memoizedState=xi=e:xi=xi.next=e}return xi}function wd(e,t){return typeof t=="function"?t(e):t}function w0(e){var t=ps(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=ui,c=a.baseQueue,d=i.pending;if(d!==null){if(c!==null){var g=c.next;c.next=d.next,d.next=g}a.baseQueue=c=d,i.pending=null}if(c!==null){d=c.next,a=a.baseState;var l=g=null,b=null,w=d;do{var A=w.lane;if((Qu&A)===A)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),a=w.hasEagerState?w.eagerState:e(a,w.action);else{var S={lane:A,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(l=b=S,g=a):b=b.next=S,zr.lanes|=A,ec|=A}w=w.next}while(w!==null&&w!==d);b===null?g=a:b.next=l,$s(a,t.memoizedState)||(Eo=!0),t.memoizedState=a,t.baseState=g,t.baseQueue=b,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do d=c.lane,zr.lanes|=d,ec|=d,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function b0(e){var t=ps(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,d=t.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do d=e(d,g.action),g=g.next;while(g!==c);$s(d,t.memoizedState)||(Eo=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),i.lastRenderedState=d}return[d,a]}function MT(){}function LT(e,t){var i=zr,a=ps(),c=t(),d=!$s(a.memoizedState,c);if(d&&(a.memoizedState=c,Eo=!0),a=a.queue,C1(FT.bind(null,i,a,e),[e]),a.getSnapshot!==t||d||xi!==null&&xi.memoizedState.tag&1){if(i.flags|=2048,bd(9,OT.bind(null,i,a,c,t),void 0,null),wi===null)throw Error(At(349));Qu&30||zT(i,t,c)}return c}function zT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function OT(e,t,i,a){t.value=i,t.getSnapshot=a,RT(t)&&jT(e)}function FT(e,t,i){return i(function(){RT(t)&&jT(e)})}function RT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!$s(e,i)}catch{return!0}}function jT(e){var t=qa(e,1);t!==null&&Us(t,e,1,-1)}function Jb(e){var t=oa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wd,lastRenderedState:e},t.queue=e,e=e.dispatch=x3.bind(null,zr,e),[t.memoizedState,e]}function bd(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function DT(){return ps().memoizedState}function ym(e,t,i,a){var c=oa();zr.flags|=e,c.memoizedState=bd(1|t,i,void 0,a===void 0?null:a)}function Ug(e,t,i,a){var c=ps();a=a===void 0?null:a;var d=void 0;if(ui!==null){var g=ui.memoizedState;if(d=g.destroy,a!==null&&S1(a,g.deps)){c.memoizedState=bd(t,i,d,a);return}}zr.flags|=e,c.memoizedState=bd(1|t,i,d,a)}function Qb(e,t){return ym(8390656,8,e,t)}function C1(e,t){return Ug(2048,8,e,t)}function BT(e,t){return Ug(4,2,e,t)}function NT(e,t){return Ug(4,4,e,t)}function UT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $T(e,t,i){return i=i!=null?i.concat([e]):null,Ug(4,4,UT.bind(null,t,e),i)}function I1(){}function VT(e,t){var i=ps();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&S1(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function GT(e,t){var i=ps();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&S1(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function ZT(e,t,i){return Qu&21?($s(i,t)||(i=XE(),zr.lanes|=i,ec|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Eo=!0),e.memoizedState=i)}function v3(e,t){var i=rr;rr=i!==0&&4>i?i:4,e(!0);var a=x0.transition;x0.transition={};try{e(!1),t()}finally{rr=i,x0.transition=a}}function HT(){return ps().memoizedState}function _3(e,t,i){var a=Ql(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},WT(e))XT(t,i);else if(i=ET(e,t,i,a),i!==null){var c=ho();Us(i,e,a,c),qT(i,t,a)}}function x3(e,t,i){var a=Ql(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(WT(e))XT(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var g=t.lastRenderedState,l=d(g,i);if(c.hasEagerState=!0,c.eagerState=l,$s(l,g)){var b=t.interleaved;b===null?(c.next=c,v1(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}i=ET(e,t,c,a),i!==null&&(c=ho(),Us(i,e,a,c),qT(i,t,a))}}function WT(e){var t=e.alternate;return e===zr||t!==null&&t===zr}function XT(e,t){Kf=Xm=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function qT(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,i1(e,i)}}var qm={readContext:ds,useCallback:Hi,useContext:Hi,useEffect:Hi,useImperativeHandle:Hi,useInsertionEffect:Hi,useLayoutEffect:Hi,useMemo:Hi,useReducer:Hi,useRef:Hi,useState:Hi,useDebugValue:Hi,useDeferredValue:Hi,useTransition:Hi,useMutableSource:Hi,useSyncExternalStore:Hi,useId:Hi,unstable_isNewReconciler:!1},w3={readContext:ds,useCallback:function(e,t){return oa().memoizedState=[e,t===void 0?null:t],e},useContext:ds,useEffect:Qb,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,ym(4194308,4,UT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return ym(4194308,4,e,t)},useInsertionEffect:function(e,t){return ym(4,2,e,t)},useMemo:function(e,t){var i=oa();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=oa();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=_3.bind(null,zr,e),[a.memoizedState,e]},useRef:function(e){var t=oa();return e={current:e},t.memoizedState=e},useState:Jb,useDebugValue:I1,useDeferredValue:function(e){return oa().memoizedState=e},useTransition:function(){var e=Jb(!1),t=e[0];return e=v3.bind(null,e[1]),oa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=zr,c=oa();if(Cr){if(i===void 0)throw Error(At(407));i=i()}else{if(i=t(),wi===null)throw Error(At(349));Qu&30||zT(a,t,i)}c.memoizedState=i;var d={value:i,getSnapshot:t};return c.queue=d,Qb(FT.bind(null,a,d,e),[e]),a.flags|=2048,bd(9,OT.bind(null,a,d,i,t),void 0,null),i},useId:function(){var e=oa(),t=wi.identifierPrefix;if(Cr){var i=Za,a=Ga;i=(a&~(1<<32-Ns(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=xd++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=y3++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},b3={readContext:ds,useCallback:VT,useContext:ds,useEffect:C1,useImperativeHandle:$T,useInsertionEffect:BT,useLayoutEffect:NT,useMemo:GT,useReducer:w0,useRef:DT,useState:function(){return w0(wd)},useDebugValue:I1,useDeferredValue:function(e){var t=ps();return ZT(t,ui.memoizedState,e)},useTransition:function(){var e=w0(wd)[0],t=ps().memoizedState;return[e,t]},useMutableSource:MT,useSyncExternalStore:LT,useId:HT,unstable_isNewReconciler:!1},S3={readContext:ds,useCallback:VT,useContext:ds,useEffect:C1,useImperativeHandle:$T,useInsertionEffect:BT,useLayoutEffect:NT,useMemo:GT,useReducer:b0,useRef:DT,useState:function(){return b0(wd)},useDebugValue:I1,useDeferredValue:function(e){var t=ps();return ui===null?t.memoizedState=e:ZT(t,ui.memoizedState,e)},useTransition:function(){var e=b0(wd)[0],t=ps().memoizedState;return[e,t]},useMutableSource:MT,useSyncExternalStore:LT,useId:HT,unstable_isNewReconciler:!1};function wh(e,t){try{var i="",a=t;do i+=Yk(a),a=a.return;while(a);var c=i}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function S0(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Bv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var E3=typeof WeakMap=="function"?WeakMap:Map;function KT(e,t,i){i=Ha(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){Ym||(Ym=!0,qv=a),Bv(e,t)},i}function YT(e,t,i){i=Ha(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){Bv(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(i.callback=function(){Bv(e,t),typeof a!="function"&&(Jl===null?Jl=new Set([this]):Jl.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),i}function e2(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new E3;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=D3.bind(null,e,t,i),t.then(e,e))}function t2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function n2(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Ha(-1,1),t.tag=2,Yl(i,t,1))),i.lanes|=1),e)}var T3=tl.ReactCurrentOwner,Eo=!1;function ao(e,t,i,a){t.child=e===null?PT(t,null,i,a):_h(t,e.child,i,a)}function r2(e,t,i,a,c){i=i.render;var d=t.ref;return hh(t,c),a=E1(e,t,i,a,d,c),i=T1(),e!==null&&!Eo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ka(e,t,c)):(Cr&&i&&f1(t),t.flags|=1,ao(e,t,a,c),t.child)}function i2(e,t,i,a,c){if(e===null){var d=i.type;return typeof d=="function"&&!F1(d)&&d.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=d,JT(e,t,d,a,c)):(e=wm(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var g=d.memoizedProps;if(i=i.compare,i=i!==null?i:pd,i(g,a)&&e.ref===t.ref)return Ka(e,t,c)}return t.flags|=1,e=eu(d,a),e.ref=t.ref,e.return=t,t.child=e}function JT(e,t,i,a,c){if(e!==null){var d=e.memoizedProps;if(pd(d,a)&&e.ref===t.ref)if(Eo=!1,t.pendingProps=a=d,(e.lanes&c)!==0)e.flags&131072&&(Eo=!0);else return t.lanes=e.lanes,Ka(e,t,c)}return Nv(e,t,i,a,c)}function QT(e,t,i){var a=t.pendingProps,c=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mr(th,Ro),Ro|=i;else{if(!(i&1073741824))return e=d!==null?d.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mr(th,Ro),Ro|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=d!==null?d.baseLanes:i,mr(th,Ro),Ro|=a}else d!==null?(a=d.baseLanes|i,t.memoizedState=null):a=i,mr(th,Ro),Ro|=a;return ao(e,t,c,i),t.child}function eC(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Nv(e,t,i,a,c){var d=Co(i)?Yu:Yi.current;return d=yh(t,d),hh(t,c),i=E1(e,t,i,a,d,c),a=T1(),e!==null&&!Eo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ka(e,t,c)):(Cr&&a&&f1(t),t.flags|=1,ao(e,t,i,c),t.child)}function o2(e,t,i,a,c){if(Co(i)){var d=!0;Um(t)}else d=!1;if(hh(t,c),t.stateNode===null)vm(e,t),IT(t,i,a),Dv(t,i,a,c),a=!0;else if(e===null){var g=t.stateNode,l=t.memoizedProps;g.props=l;var b=g.context,w=i.contextType;typeof w=="object"&&w!==null?w=ds(w):(w=Co(i)?Yu:Yi.current,w=yh(t,w));var A=i.getDerivedStateFromProps,S=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function";S||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(l!==a||b!==w)&&Kb(t,g,a,w),Dl=!1;var k=t.memoizedState;g.state=k,Hm(t,a,g,c),b=t.memoizedState,l!==a||k!==b||To.current||Dl?(typeof A=="function"&&(jv(t,i,A,a),b=t.memoizedState),(l=Dl||qb(t,i,l,a,k,b,w))?(S||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),g.props=a,g.state=b,g.context=w,a=l):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{g=t.stateNode,TT(e,t),l=t.memoizedProps,w=t.type===t.elementType?l:Ls(t.type,l),g.props=w,S=t.pendingProps,k=g.context,b=i.contextType,typeof b=="object"&&b!==null?b=ds(b):(b=Co(i)?Yu:Yi.current,b=yh(t,b));var O=i.getDerivedStateFromProps;(A=typeof O=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(l!==S||k!==b)&&Kb(t,g,a,b),Dl=!1,k=t.memoizedState,g.state=k,Hm(t,a,g,c);var N=t.memoizedState;l!==S||k!==N||To.current||Dl?(typeof O=="function"&&(jv(t,i,O,a),N=t.memoizedState),(w=Dl||qb(t,i,w,a,k,N,b)||!1)?(A||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,N,b),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,N,b)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=N),g.props=a,g.state=N,g.context=b,a=w):(typeof g.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),a=!1)}return Uv(e,t,i,a,d,c)}function Uv(e,t,i,a,c,d){eC(e,t);var g=(t.flags&128)!==0;if(!a&&!g)return c&&Gb(t,i,!1),Ka(e,t,d);a=t.stateNode,T3.current=t;var l=g&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&g?(t.child=_h(t,e.child,null,d),t.child=_h(t,null,l,d)):ao(e,t,l,d),t.memoizedState=a.state,c&&Gb(t,i,!0),t.child}function tC(e){var t=e.stateNode;t.pendingContext?Vb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vb(e,t.context,!1),x1(e,t.containerInfo)}function s2(e,t,i,a,c){return vh(),p1(c),t.flags|=256,ao(e,t,i,a),t.child}var $v={dehydrated:null,treeContext:null,retryLane:0};function Vv(e){return{baseLanes:e,cachePool:null,transitions:null}}function nC(e,t,i){var a=t.pendingProps,c=Mr.current,d=!1,g=(t.flags&128)!==0,l;if((l=g)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),mr(Mr,c&1),e===null)return Fv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=a.children,e=a.fallback,d?(a=t.mode,d=t.child,g={mode:"hidden",children:g},!(a&1)&&d!==null?(d.childLanes=0,d.pendingProps=g):d=Gg(g,a,0,null),e=Ku(e,a,i,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Vv(i),t.memoizedState=$v,e):A1(t,g));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return C3(e,t,g,a,l,c,i);if(d){d=a.fallback,g=t.mode,c=e.child,l=c.sibling;var b={mode:"hidden",children:a.children};return!(g&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=eu(c,b),a.subtreeFlags=c.subtreeFlags&14680064),l!==null?d=eu(l,d):(d=Ku(d,g,i,null),d.flags|=2),d.return=t,a.return=t,a.sibling=d,t.child=a,a=d,d=t.child,g=e.child.memoizedState,g=g===null?Vv(i):{baseLanes:g.baseLanes|i,cachePool:null,transitions:g.transitions},d.memoizedState=g,d.childLanes=e.childLanes&~i,t.memoizedState=$v,a}return d=e.child,e=d.sibling,a=eu(d,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function A1(e,t){return t=Gg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Np(e,t,i,a){return a!==null&&p1(a),_h(t,e.child,null,i),e=A1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function C3(e,t,i,a,c,d,g){if(i)return t.flags&256?(t.flags&=-257,a=S0(Error(At(422))),Np(e,t,g,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=a.fallback,c=t.mode,a=Gg({mode:"visible",children:a.children},c,0,null),d=Ku(d,c,g,null),d.flags|=2,a.return=t,d.return=t,a.sibling=d,t.child=a,t.mode&1&&_h(t,e.child,null,g),t.child.memoizedState=Vv(g),t.memoizedState=$v,d);if(!(t.mode&1))return Np(e,t,g,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var l=a.dgst;return a=l,d=Error(At(419)),a=S0(d,a,void 0),Np(e,t,g,a)}if(l=(g&e.childLanes)!==0,Eo||l){if(a=wi,a!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|g)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,qa(e,c),Us(a,e,c,-1))}return O1(),a=S0(Error(At(421))),Np(e,t,g,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=B3.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,No=Kl(c.nextSibling),Uo=t,Cr=!0,Os=null,e!==null&&(ls[us++]=Ga,ls[us++]=Za,ls[us++]=Ju,Ga=e.id,Za=e.overflow,Ju=t),t=A1(t,a.children),t.flags|=4096,t)}function a2(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Rv(e.return,t,i)}function E0(e,t,i,a,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=i,d.tailMode=c)}function rC(e,t,i){var a=t.pendingProps,c=a.revealOrder,d=a.tail;if(ao(e,t,a.children,i),a=Mr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&a2(e,i,t);else if(e.tag===19)a2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(mr(Mr,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Wm(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),E0(t,!1,c,i,d);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Wm(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}E0(t,!0,i,null,d);break;case"together":E0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),ec|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,i=eu(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=eu(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function I3(e,t,i){switch(t.tag){case 3:tC(t),vh();break;case 5:kT(t);break;case 1:Co(t.type)&&Um(t);break;case 4:x1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;mr(Gm,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(mr(Mr,Mr.current&1),t.flags|=128,null):i&t.child.childLanes?nC(e,t,i):(mr(Mr,Mr.current&1),e=Ka(e,t,i),e!==null?e.sibling:null);mr(Mr,Mr.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return rC(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),mr(Mr,Mr.current),a)break;return null;case 22:case 23:return t.lanes=0,QT(e,t,i)}return Ka(e,t,i)}var iC,Gv,oC,sC;iC=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Gv=function(){};oC=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Hu(fa.current);var d=null;switch(i){case"input":c=fv(e,c),a=fv(e,a),d=[];break;case"select":c=Or({},c,{value:void 0}),a=Or({},a,{value:void 0}),d=[];break;case"textarea":c=mv(e,c),a=mv(e,a),d=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Bm)}yv(i,a);var g;i=null;for(w in c)if(!a.hasOwnProperty(w)&&c.hasOwnProperty(w)&&c[w]!=null)if(w==="style"){var l=c[w];for(g in l)l.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(ad.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in a){var b=a[w];if(l=c!=null?c[w]:void 0,a.hasOwnProperty(w)&&b!==l&&(b!=null||l!=null))if(w==="style")if(l){for(g in l)!l.hasOwnProperty(g)||b&&b.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in b)b.hasOwnProperty(g)&&l[g]!==b[g]&&(i||(i={}),i[g]=b[g])}else i||(d||(d=[]),d.push(w,i)),i=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(d=d||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(ad.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&yr("scroll",e),d||l===b||(d=[])):(d=d||[]).push(w,b))}i&&(d=d||[]).push("style",i);var w=d;(t.updateQueue=w)&&(t.flags|=4)}};sC=function(e,t,i,a){i!==a&&(t.flags|=4)};function kf(e,t){if(!Cr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Wi(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function A3(e,t,i){var a=t.pendingProps;switch(d1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wi(t),null;case 1:return Co(t.type)&&Nm(),Wi(t),null;case 3:return a=t.stateNode,xh(),_r(To),_r(Yi),b1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Dp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Os!==null&&(Jv(Os),Os=null))),Gv(e,t),Wi(t),null;case 5:w1(t);var c=Hu(_d.current);if(i=t.type,e!==null&&t.stateNode!=null)oC(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(At(166));return Wi(t),null}if(e=Hu(fa.current),Dp(t)){a=t.stateNode,i=t.type;var d=t.memoizedProps;switch(a[sa]=t,a[yd]=d,e=(t.mode&1)!==0,i){case"dialog":yr("cancel",a),yr("close",a);break;case"iframe":case"object":case"embed":yr("load",a);break;case"video":case"audio":for(c=0;c<Rf.length;c++)yr(Rf[c],a);break;case"source":yr("error",a);break;case"img":case"image":case"link":yr("error",a),yr("load",a);break;case"details":yr("toggle",a);break;case"input":gb(a,d),yr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},yr("invalid",a);break;case"textarea":vb(a,d),yr("invalid",a)}yv(i,d),c=null;for(var g in d)if(d.hasOwnProperty(g)){var l=d[g];g==="children"?typeof l=="string"?a.textContent!==l&&(d.suppressHydrationWarning!==!0&&jp(a.textContent,l,e),c=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(d.suppressHydrationWarning!==!0&&jp(a.textContent,l,e),c=["children",""+l]):ad.hasOwnProperty(g)&&l!=null&&g==="onScroll"&&yr("scroll",a)}switch(i){case"input":Pp(a),yb(a,d,!0);break;case"textarea":Pp(a),_b(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=Bm)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(i,{is:a.is}):(e=g.createElement(i),i==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,i),e[sa]=t,e[yd]=a,iC(e,t,!1,!1),t.stateNode=e;e:{switch(g=vv(i,a),i){case"dialog":yr("cancel",e),yr("close",e),c=a;break;case"iframe":case"object":case"embed":yr("load",e),c=a;break;case"video":case"audio":for(c=0;c<Rf.length;c++)yr(Rf[c],e);c=a;break;case"source":yr("error",e),c=a;break;case"img":case"image":case"link":yr("error",e),yr("load",e),c=a;break;case"details":yr("toggle",e),c=a;break;case"input":gb(e,a),c=fv(e,a),yr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Or({},a,{value:void 0}),yr("invalid",e);break;case"textarea":vb(e,a),c=mv(e,a),yr("invalid",e);break;default:c=a}yv(i,c),l=c;for(d in l)if(l.hasOwnProperty(d)){var b=l[d];d==="style"?RE(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&OE(e,b)):d==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&ld(e,b):typeof b=="number"&&ld(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ad.hasOwnProperty(d)?b!=null&&d==="onScroll"&&yr("scroll",e):b!=null&&J_(e,d,b,g))}switch(i){case"input":Pp(e),yb(e,a,!1);break;case"textarea":Pp(e),_b(e);break;case"option":a.value!=null&&e.setAttribute("value",""+tu(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?ah(e,!!a.multiple,d,!1):a.defaultValue!=null&&ah(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Bm)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Wi(t),null;case 6:if(e&&t.stateNode!=null)sC(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(At(166));if(i=Hu(_d.current),Hu(fa.current),Dp(t)){if(a=t.stateNode,i=t.memoizedProps,a[sa]=t,(d=a.nodeValue!==i)&&(e=Uo,e!==null))switch(e.tag){case 3:jp(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&jp(a.nodeValue,i,(e.mode&1)!==0)}d&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[sa]=t,t.stateNode=a}return Wi(t),null;case 13:if(_r(Mr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Cr&&No!==null&&t.mode&1&&!(t.flags&128))ST(),vh(),t.flags|=98560,d=!1;else if(d=Dp(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(At(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(At(317));d[sa]=t}else vh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Wi(t),d=!1}else Os!==null&&(Jv(Os),Os=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Mr.current&1?ci===0&&(ci=3):O1())),t.updateQueue!==null&&(t.flags|=4),Wi(t),null);case 4:return xh(),Gv(e,t),e===null&&md(t.stateNode.containerInfo),Wi(t),null;case 10:return y1(t.type._context),Wi(t),null;case 17:return Co(t.type)&&Nm(),Wi(t),null;case 19:if(_r(Mr),d=t.memoizedState,d===null)return Wi(t),null;if(a=(t.flags&128)!==0,g=d.rendering,g===null)if(a)kf(d,!1);else{if(ci!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=Wm(e),g!==null){for(t.flags|=128,kf(d,!1),a=g.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)d=i,e=a,d.flags&=14680066,g=d.alternate,g===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=g.childLanes,d.lanes=g.lanes,d.child=g.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=g.memoizedProps,d.memoizedState=g.memoizedState,d.updateQueue=g.updateQueue,d.type=g.type,e=g.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return mr(Mr,Mr.current&1|2),t.child}e=e.sibling}d.tail!==null&&Qr()>bh&&(t.flags|=128,a=!0,kf(d,!1),t.lanes=4194304)}else{if(!a)if(e=Wm(g),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),kf(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Cr)return Wi(t),null}else 2*Qr()-d.renderingStartTime>bh&&i!==1073741824&&(t.flags|=128,a=!0,kf(d,!1),t.lanes=4194304);d.isBackwards?(g.sibling=t.child,t.child=g):(i=d.last,i!==null?i.sibling=g:t.child=g,d.last=g)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Qr(),t.sibling=null,i=Mr.current,mr(Mr,a?i&1|2:i&1),t):(Wi(t),null);case 22:case 23:return z1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Ro&1073741824&&(Wi(t),t.subtreeFlags&6&&(t.flags|=8192)):Wi(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function P3(e,t){switch(d1(t),t.tag){case 1:return Co(t.type)&&Nm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xh(),_r(To),_r(Yi),b1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return w1(t),null;case 13:if(_r(Mr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));vh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _r(Mr),null;case 4:return xh(),null;case 10:return y1(t.type._context),null;case 22:case 23:return z1(),null;case 24:return null;default:return null}}var Up=!1,qi=!1,k3=typeof WeakSet=="function"?WeakSet:Set,en=null;function eh(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Dr(e,t,a)}else i.current=null}function Zv(e,t,i){try{i()}catch(a){Dr(e,t,a)}}var l2=!1;function M3(e,t){if(Av=Rm,e=cT(),h1(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var g=0,l=-1,b=-1,w=0,A=0,S=e,k=null;t:for(;;){for(var O;S!==i||c!==0&&S.nodeType!==3||(l=g+c),S!==d||a!==0&&S.nodeType!==3||(b=g+a),S.nodeType===3&&(g+=S.nodeValue.length),(O=S.firstChild)!==null;)k=S,S=O;for(;;){if(S===e)break t;if(k===i&&++w===c&&(l=g),k===d&&++A===a&&(b=g),(O=S.nextSibling)!==null)break;S=k,k=S.parentNode}S=O}i=l===-1||b===-1?null:{start:l,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(Pv={focusedElem:e,selectionRange:i},Rm=!1,en=t;en!==null;)if(t=en,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,en=e;else for(;en!==null;){t=en;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var R=N.memoizedProps,ce=N.memoizedState,K=t.stateNode,H=K.getSnapshotBeforeUpdate(t.elementType===t.type?R:Ls(t.type,R),ce);K.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(se){Dr(t,t.return,se)}if(e=t.sibling,e!==null){e.return=t.return,en=e;break}en=t.return}return N=l2,l2=!1,N}function Yf(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&Zv(t,i,d)}c=c.next}while(c!==a)}}function $g(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function Hv(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function aC(e){var t=e.alternate;t!==null&&(e.alternate=null,aC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sa],delete t[yd],delete t[Lv],delete t[d3],delete t[p3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lC(e){return e.tag===5||e.tag===3||e.tag===4}function u2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Bm));else if(a!==4&&(e=e.child,e!==null))for(Wv(e,t,i),e=e.sibling;e!==null;)Wv(e,t,i),e=e.sibling}function Xv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Xv(e,t,i),e=e.sibling;e!==null;)Xv(e,t,i),e=e.sibling}var Mi=null,zs=!1;function Fl(e,t,i){for(i=i.child;i!==null;)uC(e,t,i),i=i.sibling}function uC(e,t,i){if(ha&&typeof ha.onCommitFiberUnmount=="function")try{ha.onCommitFiberUnmount(Og,i)}catch{}switch(i.tag){case 5:qi||eh(i,t);case 6:var a=Mi,c=zs;Mi=null,Fl(e,t,i),Mi=a,zs=c,Mi!==null&&(zs?(e=Mi,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Mi.removeChild(i.stateNode));break;case 18:Mi!==null&&(zs?(e=Mi,i=i.stateNode,e.nodeType===8?y0(e.parentNode,i):e.nodeType===1&&y0(e,i),fd(e)):y0(Mi,i.stateNode));break;case 4:a=Mi,c=zs,Mi=i.stateNode.containerInfo,zs=!0,Fl(e,t,i),Mi=a,zs=c;break;case 0:case 11:case 14:case 15:if(!qi&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var d=c,g=d.destroy;d=d.tag,g!==void 0&&(d&2||d&4)&&Zv(i,t,g),c=c.next}while(c!==a)}Fl(e,t,i);break;case 1:if(!qi&&(eh(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(l){Dr(i,t,l)}Fl(e,t,i);break;case 21:Fl(e,t,i);break;case 22:i.mode&1?(qi=(a=qi)||i.memoizedState!==null,Fl(e,t,i),qi=a):Fl(e,t,i);break;default:Fl(e,t,i)}}function c2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new k3),t.forEach(function(a){var c=N3.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function Ms(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var d=e,g=t,l=g;e:for(;l!==null;){switch(l.tag){case 5:Mi=l.stateNode,zs=!1;break e;case 3:Mi=l.stateNode.containerInfo,zs=!0;break e;case 4:Mi=l.stateNode.containerInfo,zs=!0;break e}l=l.return}if(Mi===null)throw Error(At(160));uC(d,g,c),Mi=null,zs=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(w){Dr(c,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)cC(t,e),t=t.sibling}function cC(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ms(t,e),ia(e),a&4){try{Yf(3,e,e.return),$g(3,e)}catch(R){Dr(e,e.return,R)}try{Yf(5,e,e.return)}catch(R){Dr(e,e.return,R)}}break;case 1:Ms(t,e),ia(e),a&512&&i!==null&&eh(i,i.return);break;case 5:if(Ms(t,e),ia(e),a&512&&i!==null&&eh(i,i.return),e.flags&32){var c=e.stateNode;try{ld(c,"")}catch(R){Dr(e,e.return,R)}}if(a&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,g=i!==null?i.memoizedProps:d,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&d.type==="radio"&&d.name!=null&&ME(c,d),vv(l,g);var w=vv(l,d);for(g=0;g<b.length;g+=2){var A=b[g],S=b[g+1];A==="style"?RE(c,S):A==="dangerouslySetInnerHTML"?OE(c,S):A==="children"?ld(c,S):J_(c,A,S,w)}switch(l){case"input":dv(c,d);break;case"textarea":LE(c,d);break;case"select":var k=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var O=d.value;O!=null?ah(c,!!d.multiple,O,!1):k!==!!d.multiple&&(d.defaultValue!=null?ah(c,!!d.multiple,d.defaultValue,!0):ah(c,!!d.multiple,d.multiple?[]:"",!1))}c[yd]=d}catch(R){Dr(e,e.return,R)}}break;case 6:if(Ms(t,e),ia(e),a&4){if(e.stateNode===null)throw Error(At(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(R){Dr(e,e.return,R)}}break;case 3:if(Ms(t,e),ia(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{fd(t.containerInfo)}catch(R){Dr(e,e.return,R)}break;case 4:Ms(t,e),ia(e);break;case 13:Ms(t,e),ia(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(M1=Qr())),a&4&&c2(e);break;case 22:if(A=i!==null&&i.memoizedState!==null,e.mode&1?(qi=(w=qi)||A,Ms(t,e),qi=w):Ms(t,e),ia(e),a&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!A&&e.mode&1)for(en=e,A=e.child;A!==null;){for(S=en=A;en!==null;){switch(k=en,O=k.child,k.tag){case 0:case 11:case 14:case 15:Yf(4,k,k.return);break;case 1:eh(k,k.return);var N=k.stateNode;if(typeof N.componentWillUnmount=="function"){a=k,i=k.return;try{t=a,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(R){Dr(a,i,R)}}break;case 5:eh(k,k.return);break;case 22:if(k.memoizedState!==null){f2(S);continue}}O!==null?(O.return=k,en=O):f2(S)}A=A.sibling}e:for(A=null,S=e;;){if(S.tag===5){if(A===null){A=S;try{c=S.stateNode,w?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(l=S.stateNode,b=S.memoizedProps.style,g=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=FE("display",g))}catch(R){Dr(e,e.return,R)}}}else if(S.tag===6){if(A===null)try{S.stateNode.nodeValue=w?"":S.memoizedProps}catch(R){Dr(e,e.return,R)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;A===S&&(A=null),S=S.return}A===S&&(A=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:Ms(t,e),ia(e),a&4&&c2(e);break;case 21:break;default:Ms(t,e),ia(e)}}function ia(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(lC(i)){var a=i;break e}i=i.return}throw Error(At(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(ld(c,""),a.flags&=-33);var d=u2(e);Xv(e,d,c);break;case 3:case 4:var g=a.stateNode.containerInfo,l=u2(e);Wv(e,l,g);break;default:throw Error(At(161))}}catch(b){Dr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function L3(e,t,i){en=e,hC(e)}function hC(e,t,i){for(var a=(e.mode&1)!==0;en!==null;){var c=en,d=c.child;if(c.tag===22&&a){var g=c.memoizedState!==null||Up;if(!g){var l=c.alternate,b=l!==null&&l.memoizedState!==null||qi;l=Up;var w=qi;if(Up=g,(qi=b)&&!w)for(en=c;en!==null;)g=en,b=g.child,g.tag===22&&g.memoizedState!==null?d2(c):b!==null?(b.return=g,en=b):d2(c);for(;d!==null;)en=d,hC(d),d=d.sibling;en=c,Up=l,qi=w}h2(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,en=d):h2(e)}}function h2(e){for(;en!==null;){var t=en;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qi||$g(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!qi)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Ls(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&Xb(t,d,a);break;case 3:var g=t.updateQueue;if(g!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Xb(t,g,i)}break;case 5:var l=t.stateNode;if(i===null&&t.flags&4){i=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var A=w.memoizedState;if(A!==null){var S=A.dehydrated;S!==null&&fd(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}qi||t.flags&512&&Hv(t)}catch(k){Dr(t,t.return,k)}}if(t===e){en=null;break}if(i=t.sibling,i!==null){i.return=t.return,en=i;break}en=t.return}}function f2(e){for(;en!==null;){var t=en;if(t===e){en=null;break}var i=t.sibling;if(i!==null){i.return=t.return,en=i;break}en=t.return}}function d2(e){for(;en!==null;){var t=en;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{$g(4,t)}catch(b){Dr(t,i,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(b){Dr(t,c,b)}}var d=t.return;try{Hv(t)}catch(b){Dr(t,d,b)}break;case 5:var g=t.return;try{Hv(t)}catch(b){Dr(t,g,b)}}}catch(b){Dr(t,t.return,b)}if(t===e){en=null;break}var l=t.sibling;if(l!==null){l.return=t.return,en=l;break}en=t.return}}var z3=Math.ceil,Km=tl.ReactCurrentDispatcher,P1=tl.ReactCurrentOwner,fs=tl.ReactCurrentBatchConfig,Hn=0,wi=null,ni=null,zi=0,Ro=0,th=lu(0),ci=0,Sd=null,ec=0,Vg=0,k1=0,Jf=null,bo=null,M1=0,bh=1/0,Ua=null,Ym=!1,qv=null,Jl=null,$p=!1,Zl=null,Jm=0,Qf=0,Kv=null,_m=-1,xm=0;function ho(){return Hn&6?Qr():_m!==-1?_m:_m=Qr()}function Ql(e){return e.mode&1?Hn&2&&zi!==0?zi&-zi:g3.transition!==null?(xm===0&&(xm=XE()),xm):(e=rr,e!==0||(e=window.event,e=e===void 0?16:tT(e.type)),e):1}function Us(e,t,i,a){if(50<Qf)throw Qf=0,Kv=null,Error(At(185));Fd(e,i,a),(!(Hn&2)||e!==wi)&&(e===wi&&(!(Hn&2)&&(Vg|=i),ci===4&&$l(e,zi)),Io(e,a),i===1&&Hn===0&&!(t.mode&1)&&(bh=Qr()+500,Bg&&uu()))}function Io(e,t){var i=e.callbackNode;gM(e,t);var a=Fm(e,e===wi?zi:0);if(a===0)i!==null&&bb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&bb(i),t===1)e.tag===0?m3(p2.bind(null,e)):xT(p2.bind(null,e)),h3(function(){!(Hn&6)&&uu()}),i=null;else{switch(qE(a)){case 1:i=r1;break;case 4:i=HE;break;case 16:i=Om;break;case 536870912:i=WE;break;default:i=Om}i=_C(i,fC.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function fC(e,t){if(_m=-1,xm=0,Hn&6)throw Error(At(327));var i=e.callbackNode;if(fh()&&e.callbackNode!==i)return null;var a=Fm(e,e===wi?zi:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Qm(e,a);else{t=a;var c=Hn;Hn|=2;var d=pC();(wi!==e||zi!==t)&&(Ua=null,bh=Qr()+500,qu(e,t));do try{R3();break}catch(l){dC(e,l)}while(!0);g1(),Km.current=d,Hn=c,ni!==null?t=0:(wi=null,zi=0,t=ci)}if(t!==0){if(t===2&&(c=Sv(e),c!==0&&(a=c,t=Yv(e,c))),t===1)throw i=Sd,qu(e,0),$l(e,a),Io(e,Qr()),i;if(t===6)$l(e,a);else{if(c=e.current.alternate,!(a&30)&&!O3(c)&&(t=Qm(e,a),t===2&&(d=Sv(e),d!==0&&(a=d,t=Yv(e,d))),t===1))throw i=Sd,qu(e,0),$l(e,a),Io(e,Qr()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(At(345));case 2:$u(e,bo,Ua);break;case 3:if($l(e,a),(a&130023424)===a&&(t=M1+500-Qr(),10<t)){if(Fm(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){ho(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Mv($u.bind(null,e,bo,Ua),t);break}$u(e,bo,Ua);break;case 4:if($l(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var g=31-Ns(a);d=1<<g,g=t[g],g>c&&(c=g),a&=~d}if(a=c,a=Qr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*z3(a/1960))-a,10<a){e.timeoutHandle=Mv($u.bind(null,e,bo,Ua),a);break}$u(e,bo,Ua);break;case 5:$u(e,bo,Ua);break;default:throw Error(At(329))}}}return Io(e,Qr()),e.callbackNode===i?fC.bind(null,e):null}function Yv(e,t){var i=Jf;return e.current.memoizedState.isDehydrated&&(qu(e,t).flags|=256),e=Qm(e,t),e!==2&&(t=bo,bo=i,t!==null&&Jv(t)),e}function Jv(e){bo===null?bo=e:bo.push.apply(bo,e)}function O3(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],d=c.getSnapshot;c=c.value;try{if(!$s(d(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $l(e,t){for(t&=~k1,t&=~Vg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ns(t),a=1<<i;e[i]=-1,t&=~a}}function p2(e){if(Hn&6)throw Error(At(327));fh();var t=Fm(e,0);if(!(t&1))return Io(e,Qr()),null;var i=Qm(e,t);if(e.tag!==0&&i===2){var a=Sv(e);a!==0&&(t=a,i=Yv(e,a))}if(i===1)throw i=Sd,qu(e,0),$l(e,t),Io(e,Qr()),i;if(i===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$u(e,bo,Ua),Io(e,Qr()),null}function L1(e,t){var i=Hn;Hn|=1;try{return e(t)}finally{Hn=i,Hn===0&&(bh=Qr()+500,Bg&&uu())}}function tc(e){Zl!==null&&Zl.tag===0&&!(Hn&6)&&fh();var t=Hn;Hn|=1;var i=fs.transition,a=rr;try{if(fs.transition=null,rr=1,e)return e()}finally{rr=a,fs.transition=i,Hn=t,!(Hn&6)&&uu()}}function z1(){Ro=th.current,_r(th)}function qu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,c3(i)),ni!==null)for(i=ni.return;i!==null;){var a=i;switch(d1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Nm();break;case 3:xh(),_r(To),_r(Yi),b1();break;case 5:w1(a);break;case 4:xh();break;case 13:_r(Mr);break;case 19:_r(Mr);break;case 10:y1(a.type._context);break;case 22:case 23:z1()}i=i.return}if(wi=e,ni=e=eu(e.current,null),zi=Ro=t,ci=0,Sd=null,k1=Vg=ec=0,bo=Jf=null,Zu!==null){for(t=0;t<Zu.length;t++)if(i=Zu[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,d=i.pending;if(d!==null){var g=d.next;d.next=c,a.next=g}i.pending=a}Zu=null}return e}function dC(e,t){do{var i=ni;try{if(g1(),gm.current=qm,Xm){for(var a=zr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Xm=!1}if(Qu=0,xi=ui=zr=null,Kf=!1,xd=0,P1.current=null,i===null||i.return===null){ci=1,Sd=t,ni=null;break}e:{var d=e,g=i.return,l=i,b=t;if(t=zi,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,A=l,S=A.tag;if(!(A.mode&1)&&(S===0||S===11||S===15)){var k=A.alternate;k?(A.updateQueue=k.updateQueue,A.memoizedState=k.memoizedState,A.lanes=k.lanes):(A.updateQueue=null,A.memoizedState=null)}var O=t2(g);if(O!==null){O.flags&=-257,n2(O,g,l,d,t),O.mode&1&&e2(d,w,t),t=O,b=w;var N=t.updateQueue;if(N===null){var R=new Set;R.add(b),t.updateQueue=R}else N.add(b);break e}else{if(!(t&1)){e2(d,w,t),O1();break e}b=Error(At(426))}}else if(Cr&&l.mode&1){var ce=t2(g);if(ce!==null){!(ce.flags&65536)&&(ce.flags|=256),n2(ce,g,l,d,t),p1(wh(b,l));break e}}d=b=wh(b,l),ci!==4&&(ci=2),Jf===null?Jf=[d]:Jf.push(d),d=g;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var K=KT(d,b,t);Wb(d,K);break e;case 1:l=b;var H=d.type,G=d.stateNode;if(!(d.flags&128)&&(typeof H.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Jl===null||!Jl.has(G)))){d.flags|=65536,t&=-t,d.lanes|=t;var se=YT(d,l,t);Wb(d,se);break e}}d=d.return}while(d!==null)}gC(i)}catch(X){t=X,ni===i&&i!==null&&(ni=i=i.return);continue}break}while(!0)}function pC(){var e=Km.current;return Km.current=qm,e===null?qm:e}function O1(){(ci===0||ci===3||ci===2)&&(ci=4),wi===null||!(ec&268435455)&&!(Vg&268435455)||$l(wi,zi)}function Qm(e,t){var i=Hn;Hn|=2;var a=pC();(wi!==e||zi!==t)&&(Ua=null,qu(e,t));do try{F3();break}catch(c){dC(e,c)}while(!0);if(g1(),Hn=i,Km.current=a,ni!==null)throw Error(At(261));return wi=null,zi=0,ci}function F3(){for(;ni!==null;)mC(ni)}function R3(){for(;ni!==null&&!aM();)mC(ni)}function mC(e){var t=vC(e.alternate,e,Ro);e.memoizedProps=e.pendingProps,t===null?gC(e):ni=t,P1.current=null}function gC(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=P3(i,t),i!==null){i.flags&=32767,ni=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ci=6,ni=null;return}}else if(i=A3(i,t,Ro),i!==null){ni=i;return}if(t=t.sibling,t!==null){ni=t;return}ni=t=e}while(t!==null);ci===0&&(ci=5)}function $u(e,t,i){var a=rr,c=fs.transition;try{fs.transition=null,rr=1,j3(e,t,i,a)}finally{fs.transition=c,rr=a}return null}function j3(e,t,i,a){do fh();while(Zl!==null);if(Hn&6)throw Error(At(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var d=i.lanes|i.childLanes;if(yM(e,d),e===wi&&(ni=wi=null,zi=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||$p||($p=!0,_C(Om,function(){return fh(),null})),d=(i.flags&15990)!==0,i.subtreeFlags&15990||d){d=fs.transition,fs.transition=null;var g=rr;rr=1;var l=Hn;Hn|=4,P1.current=null,M3(e,i),cC(i,e),r3(Pv),Rm=!!Av,Pv=Av=null,e.current=i,L3(i),lM(),Hn=l,rr=g,fs.transition=d}else e.current=i;if($p&&($p=!1,Zl=e,Jm=c),d=e.pendingLanes,d===0&&(Jl=null),hM(i.stateNode),Io(e,Qr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(Ym)throw Ym=!1,e=qv,qv=null,e;return Jm&1&&e.tag!==0&&fh(),d=e.pendingLanes,d&1?e===Kv?Qf++:(Qf=0,Kv=e):Qf=0,uu(),null}function fh(){if(Zl!==null){var e=qE(Jm),t=fs.transition,i=rr;try{if(fs.transition=null,rr=16>e?16:e,Zl===null)var a=!1;else{if(e=Zl,Zl=null,Jm=0,Hn&6)throw Error(At(331));var c=Hn;for(Hn|=4,en=e.current;en!==null;){var d=en,g=d.child;if(en.flags&16){var l=d.deletions;if(l!==null){for(var b=0;b<l.length;b++){var w=l[b];for(en=w;en!==null;){var A=en;switch(A.tag){case 0:case 11:case 15:Yf(8,A,d)}var S=A.child;if(S!==null)S.return=A,en=S;else for(;en!==null;){A=en;var k=A.sibling,O=A.return;if(aC(A),A===w){en=null;break}if(k!==null){k.return=O,en=k;break}en=O}}}var N=d.alternate;if(N!==null){var R=N.child;if(R!==null){N.child=null;do{var ce=R.sibling;R.sibling=null,R=ce}while(R!==null)}}en=d}}if(d.subtreeFlags&2064&&g!==null)g.return=d,en=g;else e:for(;en!==null;){if(d=en,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Yf(9,d,d.return)}var K=d.sibling;if(K!==null){K.return=d.return,en=K;break e}en=d.return}}var H=e.current;for(en=H;en!==null;){g=en;var G=g.child;if(g.subtreeFlags&2064&&G!==null)G.return=g,en=G;else e:for(g=H;en!==null;){if(l=en,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$g(9,l)}}catch(X){Dr(l,l.return,X)}if(l===g){en=null;break e}var se=l.sibling;if(se!==null){se.return=l.return,en=se;break e}en=l.return}}if(Hn=c,uu(),ha&&typeof ha.onPostCommitFiberRoot=="function")try{ha.onPostCommitFiberRoot(Og,e)}catch{}a=!0}return a}finally{rr=i,fs.transition=t}}return!1}function m2(e,t,i){t=wh(i,t),t=KT(e,t,1),e=Yl(e,t,1),t=ho(),e!==null&&(Fd(e,1,t),Io(e,t))}function Dr(e,t,i){if(e.tag===3)m2(e,e,i);else for(;t!==null;){if(t.tag===3){m2(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Jl===null||!Jl.has(a))){e=wh(i,e),e=YT(t,e,1),t=Yl(t,e,1),e=ho(),t!==null&&(Fd(t,1,e),Io(t,e));break}}t=t.return}}function D3(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=ho(),e.pingedLanes|=e.suspendedLanes&i,wi===e&&(zi&i)===i&&(ci===4||ci===3&&(zi&130023424)===zi&&500>Qr()-M1?qu(e,0):k1|=i),Io(e,t)}function yC(e,t){t===0&&(e.mode&1?(t=Lp,Lp<<=1,!(Lp&130023424)&&(Lp=4194304)):t=1);var i=ho();e=qa(e,t),e!==null&&(Fd(e,t,i),Io(e,i))}function B3(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),yC(e,i)}function N3(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(At(314))}a!==null&&a.delete(t),yC(e,i)}var vC;vC=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||To.current)Eo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Eo=!1,I3(e,t,i);Eo=!!(e.flags&131072)}else Eo=!1,Cr&&t.flags&1048576&&wT(t,Vm,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;vm(e,t),e=t.pendingProps;var c=yh(t,Yi.current);hh(t,i),c=E1(null,t,a,e,c,i);var d=T1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Co(a)?(d=!0,Um(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,_1(t),c.updater=Ng,t.stateNode=c,c._reactInternals=t,Dv(t,a,e,i),t=Uv(null,t,a,!0,d,i)):(t.tag=0,Cr&&d&&f1(t),ao(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(vm(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=$3(a),e=Ls(a,e),c){case 0:t=Nv(null,t,a,e,i);break e;case 1:t=o2(null,t,a,e,i);break e;case 11:t=r2(null,t,a,e,i);break e;case 14:t=i2(null,t,a,Ls(a.type,e),i);break e}throw Error(At(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ls(a,c),Nv(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ls(a,c),o2(e,t,a,c,i);case 3:e:{if(tC(t),e===null)throw Error(At(387));a=t.pendingProps,d=t.memoizedState,c=d.element,TT(e,t),Hm(t,a,null,i);var g=t.memoizedState;if(a=g.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=wh(Error(At(423)),t),t=s2(e,t,a,i,c);break e}else if(a!==c){c=wh(Error(At(424)),t),t=s2(e,t,a,i,c);break e}else for(No=Kl(t.stateNode.containerInfo.firstChild),Uo=t,Cr=!0,Os=null,i=PT(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(vh(),a===c){t=Ka(e,t,i);break e}ao(e,t,a,i)}t=t.child}return t;case 5:return kT(t),e===null&&Fv(t),a=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,g=c.children,kv(a,c)?g=null:d!==null&&kv(a,d)&&(t.flags|=32),eC(e,t),ao(e,t,g,i),t.child;case 6:return e===null&&Fv(t),null;case 13:return nC(e,t,i);case 4:return x1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=_h(t,null,a,i):ao(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ls(a,c),r2(e,t,a,c,i);case 7:return ao(e,t,t.pendingProps,i),t.child;case 8:return ao(e,t,t.pendingProps.children,i),t.child;case 12:return ao(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,d=t.memoizedProps,g=c.value,mr(Gm,a._currentValue),a._currentValue=g,d!==null)if($s(d.value,g)){if(d.children===c.children&&!To.current){t=Ka(e,t,i);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var l=d.dependencies;if(l!==null){g=d.child;for(var b=l.firstContext;b!==null;){if(b.context===a){if(d.tag===1){b=Ha(-1,i&-i),b.tag=2;var w=d.updateQueue;if(w!==null){w=w.shared;var A=w.pending;A===null?b.next=b:(b.next=A.next,A.next=b),w.pending=b}}d.lanes|=i,b=d.alternate,b!==null&&(b.lanes|=i),Rv(d.return,i,t),l.lanes|=i;break}b=b.next}}else if(d.tag===10)g=d.type===t.type?null:d.child;else if(d.tag===18){if(g=d.return,g===null)throw Error(At(341));g.lanes|=i,l=g.alternate,l!==null&&(l.lanes|=i),Rv(g,i,t),g=d.sibling}else g=d.child;if(g!==null)g.return=d;else for(g=d;g!==null;){if(g===t){g=null;break}if(d=g.sibling,d!==null){d.return=g.return,g=d;break}g=g.return}d=g}ao(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,hh(t,i),c=ds(c),a=a(c),t.flags|=1,ao(e,t,a,i),t.child;case 14:return a=t.type,c=Ls(a,t.pendingProps),c=Ls(a.type,c),i2(e,t,a,c,i);case 15:return JT(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ls(a,c),vm(e,t),t.tag=1,Co(a)?(e=!0,Um(t)):e=!1,hh(t,i),IT(t,a,c),Dv(t,a,c,i),Uv(null,t,a,!0,e,i);case 19:return rC(e,t,i);case 22:return QT(e,t,i)}throw Error(At(156,t.tag))};function _C(e,t){return ZE(e,t)}function U3(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(e,t,i,a){return new U3(e,t,i,a)}function F1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $3(e){if(typeof e=="function")return F1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===e1)return 11;if(e===t1)return 14}return 2}function eu(e,t){var i=e.alternate;return i===null?(i=cs(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function wm(e,t,i,a,c,d){var g=2;if(a=e,typeof e=="function")F1(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Zc:return Ku(i.children,c,d,t);case Q_:g=8,c|=8;break;case lv:return e=cs(12,i,t,c|2),e.elementType=lv,e.lanes=d,e;case uv:return e=cs(13,i,t,c),e.elementType=uv,e.lanes=d,e;case cv:return e=cs(19,i,t,c),e.elementType=cv,e.lanes=d,e;case AE:return Gg(i,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case CE:g=10;break e;case IE:g=9;break e;case e1:g=11;break e;case t1:g=14;break e;case jl:g=16,a=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=cs(g,i,t,c),t.elementType=e,t.type=a,t.lanes=d,t}function Ku(e,t,i,a){return e=cs(7,e,a,t),e.lanes=i,e}function Gg(e,t,i,a){return e=cs(22,e,a,t),e.elementType=AE,e.lanes=i,e.stateNode={isHidden:!1},e}function T0(e,t,i){return e=cs(6,e,null,t),e.lanes=i,e}function C0(e,t,i){return t=cs(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function V3(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=s0(0),this.expirationTimes=s0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=s0(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function R1(e,t,i,a,c,d,g,l,b){return e=new V3(e,t,i,l,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=cs(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},_1(d),e}function G3(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function xC(e){if(!e)return nu;e=e._reactInternals;e:{if(ac(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Co(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var i=e.type;if(Co(i))return _T(e,i,t)}return t}function wC(e,t,i,a,c,d,g,l,b){return e=R1(i,a,!0,e,c,d,g,l,b),e.context=xC(null),i=e.current,a=ho(),c=Ql(i),d=Ha(a,c),d.callback=t??null,Yl(i,d,c),e.current.lanes=c,Fd(e,c,a),Io(e,a),e}function Zg(e,t,i,a){var c=t.current,d=ho(),g=Ql(c);return i=xC(i),t.context===null?t.context=i:t.pendingContext=i,t=Ha(d,g),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Yl(c,t,g),e!==null&&(Us(e,c,g,d),mm(e,c,g)),g}function eg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function g2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function j1(e,t){g2(e,t),(e=e.alternate)&&g2(e,t)}function Z3(){return null}var bC=typeof reportError=="function"?reportError:function(e){console.error(e)};function D1(e){this._internalRoot=e}Hg.prototype.render=D1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));Zg(e,t,null,null)};Hg.prototype.unmount=D1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tc(function(){Zg(null,e,null,null)}),t[Xa]=null}};function Hg(e){this._internalRoot=e}Hg.prototype.unstable_scheduleHydration=function(e){if(e){var t=JE();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ul.length&&t!==0&&t<Ul[i].priority;i++);Ul.splice(i,0,e),i===0&&eT(e)}};function B1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function y2(){}function H3(e,t,i,a,c){if(c){if(typeof a=="function"){var d=a;a=function(){var w=eg(g);d.call(w)}}var g=wC(t,a,e,0,null,!1,!1,"",y2);return e._reactRootContainer=g,e[Xa]=g.current,md(e.nodeType===8?e.parentNode:e),tc(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var l=a;a=function(){var w=eg(b);l.call(w)}}var b=R1(e,0,!1,null,null,!1,!1,"",y2);return e._reactRootContainer=b,e[Xa]=b.current,md(e.nodeType===8?e.parentNode:e),tc(function(){Zg(t,b,i,a)}),b}function Xg(e,t,i,a,c){var d=i._reactRootContainer;if(d){var g=d;if(typeof c=="function"){var l=c;c=function(){var b=eg(g);l.call(b)}}Zg(t,g,e,c)}else g=H3(i,t,e,c,a);return eg(g)}KE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Ff(t.pendingLanes);i!==0&&(i1(t,i|1),Io(t,Qr()),!(Hn&6)&&(bh=Qr()+500,uu()))}break;case 13:tc(function(){var a=qa(e,1);if(a!==null){var c=ho();Us(a,e,1,c)}}),j1(e,1)}};o1=function(e){if(e.tag===13){var t=qa(e,134217728);if(t!==null){var i=ho();Us(t,e,134217728,i)}j1(e,134217728)}};YE=function(e){if(e.tag===13){var t=Ql(e),i=qa(e,t);if(i!==null){var a=ho();Us(i,e,t,a)}j1(e,t)}};JE=function(){return rr};QE=function(e,t){var i=rr;try{return rr=e,t()}finally{rr=i}};xv=function(e,t,i){switch(t){case"input":if(dv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=Dg(a);if(!c)throw Error(At(90));kE(a),dv(a,c)}}}break;case"textarea":LE(e,i);break;case"select":t=i.value,t!=null&&ah(e,!!i.multiple,t,!1)}};BE=L1;NE=tc;var W3={usingClientEntryPoint:!1,Events:[jd,qc,Dg,jE,DE,L1]},Mf={findFiberByHostInstance:Gu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},X3={bundleType:Mf.bundleType,version:Mf.version,rendererPackageName:Mf.rendererPackageName,rendererConfig:Mf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=VE(e),e===null?null:e.stateNode},findFiberByHostInstance:Mf.findFiberByHostInstance||Z3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vp.isDisabled&&Vp.supportsFiber)try{Og=Vp.inject(X3),ha=Vp}catch{}}Vo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W3;Vo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B1(t))throw Error(At(200));return G3(e,t,null,i)};Vo.createRoot=function(e,t){if(!B1(e))throw Error(At(299));var i=!1,a="",c=bC;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=R1(e,1,!1,null,null,i,!1,a,c),e[Xa]=t.current,md(e.nodeType===8?e.parentNode:e),new D1(t)};Vo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=VE(t),e=e===null?null:e.stateNode,e};Vo.flushSync=function(e){return tc(e)};Vo.hydrate=function(e,t,i){if(!Wg(t))throw Error(At(200));return Xg(null,e,t,!0,i)};Vo.hydrateRoot=function(e,t,i){if(!B1(e))throw Error(At(405));var a=i!=null&&i.hydratedSources||null,c=!1,d="",g=bC;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),t=wC(t,null,e,1,i??null,c,!1,d,g),e[Xa]=t.current,md(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new Hg(t)};Vo.render=function(e,t,i){if(!Wg(t))throw Error(At(200));return Xg(null,e,t,!1,i)};Vo.unmountComponentAtNode=function(e){if(!Wg(e))throw Error(At(40));return e._reactRootContainer?(tc(function(){Xg(null,null,e,!1,function(){e._reactRootContainer=null,e[Xa]=null})}),!0):!1};Vo.unstable_batchedUpdates=L1;Vo.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!Wg(i))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return Xg(e,t,i,!1,a)};Vo.version="18.2.0-next-9e3b772b8-20220608";function SC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(SC)}catch(e){console.error(e)}}SC(),wE.exports=Vo;var N1=wE.exports;const q3=zd(N1);var EC={exports:{}};(function(e,t){(function(i,a){e.exports=a()})(Nl,function(){var i,a,c;function d(l,b){if(!i)i=b;else if(!a)a=b;else{var w="var sharedChunk = {}; ("+i+")(sharedChunk); ("+a+")(sharedChunk);",A={};i(A),c=b(A),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}d(["exports"],function(l){function b(o,n,s,h){return new(s||(s=Promise))(function(p,v){function x(z){try{P(h.next(z))}catch(W){v(W)}}function E(z){try{P(h.throw(z))}catch(W){v(W)}}function P(z){var W;z.done?p(z.value):(W=z.value,W instanceof s?W:new s(function(ee){ee(W)})).then(x,E)}P((h=h.apply(o,n||[])).next())})}function w(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var A=S;function S(o,n){this.x=o,this.y=n}S.prototype={clone:function(){return new S(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),p=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},S.convert=function(o){return o instanceof S?o:Array.isArray(o)?new S(o[0],o[1]):o};var k=w(A),O=N;function N(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}N.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var p=this.sampleCurveX(s)-o;if(Math.abs(p)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=p/v}var x=0,E=1;for(s=o,h=0;h<20&&(p=this.sampleCurveX(s),!(Math.abs(p-o)<n));h++)o>p?x=s:E=s,s=.5*(E-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var R=w(O);let ce,K;function H(){return ce==null&&(ce=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ce}function G(){if(K==null&&(K=!1,H())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const p=4*h;n.fillStyle=`rgb(${p},${p+1},${p+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){K=!0;break}}}return K||!1}function se(o,n,s,h){const p=new R(o,n,s,h);return function(v){return p.solve(v)}}const X=se(.25,.1,.25,1);function V(o,n,s){return Math.min(s,Math.max(n,o))}function C(o,n,s){const h=s-n,p=((o-n)%h+h)%h+n;return p===n?s:p}function F(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let D=1;function Q(o,n,s){const h={};for(const p in o)h[p]=n.call(s||this,o[p],p,o);return h}function Y(o,n,s){const h={};for(const p in o)n.call(s||this,o[p],p,o)&&(h[p]=o[p]);return h}function _e(o){return Array.isArray(o)?o.map(_e):typeof o=="object"&&o?Q(o,_e):o}const we={};function pe(o){we[o]||(typeof console<"u"&&console.warn(o),we[o]=!0)}function oe(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function ue(o){let n=0;for(let s,h,p=0,v=o.length,x=v-1;p<v;x=p++)s=o[p],h=o[x],n+=(h.x-s.x)*(s.y+h.y);return n}function te(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let ne=null;function de(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Te(o,n,s,h,p){return b(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(o,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const E=x.startsWith("BGR"),P=new Uint8ClampedArray(h*p*4);if(yield v.copyTo(P,function(z,W,ee,ae,me){const ye=4*Math.max(-W,0),Pe=(Math.max(0,ee)-ee)*ae*4+ye,Re=4*ae,Ne=Math.max(0,W),Je=Math.max(0,ee);return{rect:{x:Ne,y:Je,width:Math.min(z.width,W+ae)-Ne,height:Math.min(z.height,ee+me)-Je},layout:[{offset:Pe,stride:Re}]}}(o,n,s,h,p)),E)for(let z=0;z<P.length;z+=4){const W=P[z];P[z]=P[z+2],P[z+2]=W}return P}finally{v.close()}})}let $e,Ie,Le,We;const Ze={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){return this.getImageCanvasContext(o).getImageData(-n,-n,o.width+2*n,o.height+2*n)},getImageCanvasContext(o){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=o.width,n.height=o.height,s.drawImage(o,0,0,o.width,o.height),s},resolveURL:o=>(Le||(Le=document.createElement("a")),Le.href=o,Le.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(We==null&&(We=matchMedia("(prefers-reduced-motion: reduce)")),We.matches)}},nt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class ct extends Error{constructor(n,s,h,p){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=p}}const vt=te()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,It=o=>nt.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function ft(o,n){const s=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:vt(),signal:s.signal});let p=!1,v=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(x=>x.ok?(E=>{(o.type==="arrayBuffer"||o.type==="image"?E.arrayBuffer():o.type==="json"?E.json():E.text()).then(P=>{v||(p=!0,n(null,P,E.headers.get("Cache-Control"),E.headers.get("Expires")))}).catch(P=>{v||n(new Error(P.message))})})(x):x.blob().then(E=>n(new ct(x.status,x.statusText,o.url,E)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{v=!0,p||s.abort()}}}const St=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(te()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!te())return(It(o.url)||ft)(o,n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(vt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ft(o,n);if(te()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var s;return function(h,p){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(E){return p(E)}p(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});p(new ct(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(o,n)},Gt=function(o,n){return St(F(o,{type:"arrayBuffer"}),n)};function Ut(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function cn(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function xn(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class yn{constructor(n,s={}){F(this,s),this.type=n}}class sn extends yn{constructor(n,s={}){super("error",F({error:n},s))}}class gn{on(n,s){return this._listeners=this._listeners||{},cn(n,s,this._listeners),this}off(n,s){return xn(n,s,this._listeners),xn(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},cn(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new yn(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const E of p)E.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const E of v)xn(h,E,this._oneTimeListeners),E.call(this,n);const x=this._eventedParent;x&&(F(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof sn&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const B=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function j(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return B.forEach(h=>{h in n&&(s[h]=n[h])}),s}function ge(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!ge(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!ge(o[s],n[s]))return!1;return!0}return o===n}const Be={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function et(o,n,s){s.push({command:Be.addSource,args:[o,n[o]]})}function lt(o,n,s){n.push({command:Be.removeSource,args:[o]}),s[o]=!0}function le(o,n,s,h){lt(o,s,h),et(o,n,s)}function L(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!ge(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!ge(o[s][h],n[s][h]))return!1;return!0}function U(o,n,s,h,p,v){let x;for(x in n=n||{},o=o||{})Object.prototype.hasOwnProperty.call(o,x)&&(ge(o[x],n[x])||s.push({command:v,args:[h,x,n[x],p]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(ge(o[x],n[x])||s.push({command:v,args:[h,x,n[x],p]}))}function Ee(o){return o.id}function Ge(o,n){return o[n.id]=n,o}class je{constructor(n,s,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function at(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class jt extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Tn{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,p]of s)this.bindings[h]=p}concat(n){return new Tn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const vn={kind:"null"},_t={kind:"number"},Rt={kind:"string"},nn={kind:"boolean"},wr={kind:"color"},fi={kind:"object"},hn={kind:"value"},er={kind:"collator"},ze={kind:"formatted"},re={kind:"padding"},he={kind:"resolvedImage"},xe={kind:"variableAnchorOffsetCollection"};function be(o,n){return{kind:"array",itemType:o,N:n}}function Ce(o){if(o.kind==="array"){const n=Ce(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const He=[vn,_t,Rt,nn,wr,ze,fi,be(hn),re,he,xe];function Ve(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Ve(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of He)if(!Ve(s,n))return null}}return`Expected ${Ce(o)} but found ${Ce(n)} instead.`}function Fe(o,n){return n.some(s=>s.kind===o.kind)}function qe(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function ut(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const ht=.96422,mt=.82521,Jt=4/29,un=6/29,Dt=3*un*un,Qt=un*un*un,fn=Math.PI/180,Rn=180/Math.PI;function jn(o){return(o%=360)<0&&(o+=360),o}function On([o,n,s,h]){let p,v;const x=ei((.2225045*(o=Mn(o))+.7168786*(n=Mn(n))+.0606169*(s=Mn(s)))/1);o===n&&n===s?p=v=x:(p=ei((.4360747*o+.3850649*n+.1430804*s)/ht),v=ei((.0139322*o+.0971045*n+.7141733*s)/mt));const E=116*x-16;return[E<0?0:E,500*(p-x),200*(x-v),h]}function Mn(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function ei(o){return o>Qt?Math.pow(o,1/3):o/Dt+Jt}function qn([o,n,s,h]){let p=(o+16)/116,v=isNaN(n)?p:p+n/500,x=isNaN(s)?p:p-s/200;return p=1*Ur(p),v=ht*Ur(v),x=mt*Ur(x),[br(3.1338561*v-1.6168667*p-.4906146*x),br(-.9787684*v+1.9161415*p+.033454*x),br(.0719453*v-.2289914*p+1.4052427*x),h]}function br(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Ur(o){return o>un?o*o*o:Dt*(o-Jt)}function ri(o){return parseInt(o.padEnd(2,o),16)/255}function Gs(o,n){return ms(n?o/100:o,0,1)}function ms(o,n,s){return Math.min(Math.max(n,o),s)}function wn(o){return!o.some(Number.isNaN)}const gs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Gn{constructor(n,s,h,p=1,v=!0){this.r=n,this.g=s,this.b=h,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[n,s,h,p]))}static parse(n){if(n instanceof Gn)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=gs[h];if(p){const[x,E,P]=p;return[x/255,E/255,P/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let E=1;return[ri(h.slice(E,E+=x)),ri(h.slice(E,E+=x)),ri(h.slice(E,E+=x)),ri(h.slice(E,E+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[E,P,z,W,ee,ae,me,ye,Pe,Re,Ne,Je]=x,Xe=[W||" ",me||" ",Re].join("");if(Xe==="  "||Xe==="  /"||Xe===",,"||Xe===",,,"){const Qe=[z,ae,Pe].join(""),rt=Qe==="%%%"?100:Qe===""?255:0;if(rt){const gt=[ms(+P/rt,0,1),ms(+ee/rt,0,1),ms(+ye/rt,0,1),Ne?Gs(+Ne,Je):1];if(wn(gt))return gt}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,E,P,z,W,ee,ae,me,ye]=v,Pe=[P||" ",W||" ",ae].join("");if(Pe==="  "||Pe==="  /"||Pe===",,"||Pe===",,,"){const Re=[+E,ms(+z,0,100),ms(+ee,0,100),me?Gs(+me,ye):1];if(wn(Re))return function([Ne,Je,Xe,Qe]){function rt(gt){const Ft=(gt+Ne/30)%12,Vt=Je*Math.min(Xe,1-Xe);return Xe-Vt*Math.max(-1,Math.min(Ft-3,9-Ft,1))}return Ne=jn(Ne),Je/=100,Xe/=100,[rt(0),rt(8),rt(4),Qe]}(Re)}}}(n);return s?new Gn(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[n/v,s/v,h/v,p])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,p,v]=On(n),x=Math.sqrt(h*h+p*p);return[Math.round(1e4*x)?jn(Math.atan2(p,h)*Rn):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",On(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,p]=this.rgb;return`rgba(${[n,s,h].map(v=>Math.round(255*v)).join(",")},${p})`}}Gn.black=new Gn(0,0,0,1),Gn.white=new Gn(1,1,1,1),Gn.transparent=new Gn(0,0,0,0),Gn.red=new Gn(1,0,0,1);class cu{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class rl{constructor(n,s,h,p,v){this.text=n,this.image=s,this.scale=h,this.fontStack=p,this.textColor=v}}class ti{constructor(n){this.sections=n}static fromString(n){return new ti([new rl(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof ti?n:ti.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Si{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Si)return n;if(typeof n=="number")return new Si([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Si(n)}}toString(){return JSON.stringify(this.values)}}const Ao=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Fi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Fi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],p=n[s+1];if(typeof h!="string"||!Ao.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Fi(n)}}toString(){return JSON.stringify(this.values)}}class $r{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new $r({name:n,available:!1}):null}}function il(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Zs(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Gn||o instanceof cu||o instanceof ti||o instanceof Si||o instanceof Fi||o instanceof $r)return!0;if(Array.isArray(o)){for(const n of o)if(!Zs(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!Zs(o[n]))return!1;return!0}return!1}function ir(o){if(o===null)return vn;if(typeof o=="string")return Rt;if(typeof o=="boolean")return nn;if(typeof o=="number")return _t;if(o instanceof Gn)return wr;if(o instanceof cu)return er;if(o instanceof ti)return ze;if(o instanceof Si)return re;if(o instanceof Fi)return xe;if(o instanceof $r)return he;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const p=ir(h);if(s){if(s===p)continue;s=hn;break}s=p}return be(s||hn,n)}return fi}function bn(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Gn||o instanceof ti||o instanceof Si||o instanceof Fi||o instanceof $r?o.toString():JSON.stringify(o)}class ys{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Zs(n[1]))return s.error("invalid value");const h=n[1];let p=ir(h);const v=s.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new ys(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class hr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const ol={string:Rt,number:_t,boolean:nn,object:fi};class Ri{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,p=1;const v=n[0];if(v==="array"){let E,P;if(n.length>2){const z=n[1];if(typeof z!="string"||!(z in ol)||z==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);E=ol[z],p++}else E=hn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);P=n[2],p++}h=be(E,P)}else{if(!ol[v])throw new Error(`Types doesn't contain name = ${v}`);h=ol[v]}const x=[];for(;p<n.length;p++){const E=s.parse(n[p],p,hn);if(!E)return null;x.push(E)}return new Ri(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!Ve(this.type,ir(h)))return h;if(s===this.args.length-1)throw new hr(`Expected value to be of type ${Ce(this.type)}, but found ${Ce(ir(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const hu={"to-boolean":nn,"to-color":wr,"to-number":_t,"to-string":Rt};class Ji{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!hu[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const p=hu[h],v=[];for(let x=1;x<n.length;x++){const E=s.parse(n[x],x,hn);if(!E)return null;v.push(E)}return new Ji(p,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const p of this.args){if(s=p.evaluate(n),h=null,s instanceof Gn)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:il(s[0],s[1],s[2],s[3]),!h))return new Gn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new hr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const p=Si.parse(s);if(p)return p}throw new hr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const p=Fi.parse(s);if(p)return p}throw new hr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new hr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return ti.fromString(bn(this.args[0].evaluate(n)));case"resolvedImage":return $r.fromString(bn(this.args[0].evaluate(n)));default:return bn(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const hc=["Unknown","Point","LineString","Polygon"];class fu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?hc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Gn.parse(n)),s}}class di{constructor(n,s,h=[],p,v=new Tn,x=[]){this.registry=n,this.path=h,this.key=h.map(E=>`[${E}]`).join(""),this.scope=v,this.errors=x,this.expectedType=p,this._isConstant=s}parse(n,s,h,p,v={}){return s?this.concat(s,h,p)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(p,v,x){return x==="assert"?new Ri(v,[p]):x==="coerce"?new Ji(v,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const E=this.expectedType,P=x.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||P.kind!=="value")if(E.kind!=="color"&&E.kind!=="formatted"&&E.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(E.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(E.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(E,P))return null}else x=h(x,E,s.typeAnnotation||"coerce");else x=h(x,E,s.typeAnnotation||"coerce");else x=h(x,E,s.typeAnnotation||"coerce");else x=h(x,E,s.typeAnnotation||"assert")}if(!(x instanceof ys)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const E=new fu;try{x=new ys(x.type,x.evaluate(E))}catch(P){return this.error(P.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const p=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new di(this.registry,this._isConstant,p,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new jt(h,n))}checkSubtype(n,s){const h=Ve(n,s);return h&&this.error(h),h}}class sl{constructor(n,s,h){this.type=er,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const p=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,nn);if(!p)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,nn);if(!v)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Rt),!x)?null:new sl(p,v,x)}evaluate(n){return new cu(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Wo=8192;function du(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function ga(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function fc(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(s*p*Wo),Math.round(h*p*Wo)]}function dc(o,n,s){const h=o[0]-n[0],p=o[1]-n[1],v=o[0]-s[0],x=o[1]-s[1];return h*x-v*p==0&&h*v<=0&&p*x<=0}function ya(o,n){let s=!1;for(let x=0,E=n.length;x<E;x++){const P=n[x];for(let z=0,W=P.length;z<W-1;z++){if(dc(o,P[z],P[z+1]))return!1;(p=P[z])[1]>(h=o)[1]!=(v=P[z+1])[1]>h[1]&&h[0]<(v[0]-p[0])*(h[1]-p[1])/(v[1]-p[1])+p[0]&&(s=!s)}}var h,p,v;return s}function al(o,n){for(let s=0;s<n.length;s++)if(ya(o,n[s]))return!0;return!1}function va(o,n,s,h){const p=h[0]-s[0],v=h[1]-s[1],x=(o[0]-s[0])*v-p*(o[1]-s[1]),E=(n[0]-s[0])*v-p*(n[1]-s[1]);return x>0&&E<0||x<0&&E>0}function Fh(o,n,s){for(const z of s)for(let W=0;W<z.length-1;++W)if((E=[(x=z[W+1])[0]-(v=z[W])[0],x[1]-v[1]])[0]*(P=[(p=n)[0]-(h=o)[0],p[1]-h[1]])[1]-E[1]*P[0]!=0&&va(h,p,v,x)&&va(v,x,h,p))return!0;var h,p,v,x,E,P;return!1}function vs(o,n){for(let s=0;s<o.length;++s)if(!ya(o[s],n))return!1;for(let s=0;s<o.length-1;++s)if(Fh(o[s],o[s+1],n))return!1;return!0}function pc(o,n){for(let s=0;s<n.length;s++)if(vs(o,n[s]))return!0;return!1}function ll(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=[];for(let x=0;x<o[p].length;x++){const E=fc(o[p][x],s);du(n,E),v.push(E)}h.push(v)}return h}function mc(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=ll(o[p],n,s);h.push(v)}return h}function gc(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const p=.5*h;let v=o[0]-s[0]>p?-h:s[0]-o[0]>p?h:0;v===0&&(v=o[0]-s[2]>p?-h:s[2]-o[0]>p?h:0),o[0]+=v}du(n,o)}function ul(o,n,s,h){const p=Math.pow(2,h.z)*Wo,v=[h.x*Wo,h.y*Wo],x=[];for(const E of o)for(const P of E){const z=[P.x+v[0],P.y+v[1]];gc(z,n,s,p),x.push(z)}return x}function pu(o,n,s,h){const p=Math.pow(2,h.z)*Wo,v=[h.x*Wo,h.y*Wo],x=[];for(const P of o){const z=[];for(const W of P){const ee=[W.x+v[0],W.y+v[1]];du(n,ee),z.push(ee)}x.push(z)}if(n[2]-n[0]<=p/2){(E=n)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const P of x)for(const z of P)gc(z,n,s,p)}var E;return x}class _s{constructor(n,s){this.type=nn,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Zs(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const v=h.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new _s(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new _s(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new _s(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const E=ll(h.coordinates,v,x),P=ul(s.geometry(),p,v,x);if(!ga(p,v))return!1;for(const z of P)if(!ya(z,E))return!1}if(h.type==="MultiPolygon"){const E=mc(h.coordinates,v,x),P=ul(s.geometry(),p,v,x);if(!ga(p,v))return!1;for(const z of P)if(!al(z,E))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const E=ll(h.coordinates,v,x),P=pu(s.geometry(),p,v,x);if(!ga(p,v))return!1;for(const z of P)if(!vs(z,E))return!1}if(h.type==="MultiPolygon"){const E=mc(h.coordinates,v,x),P=pu(s.geometry(),p,v,x);if(!ga(p,v))return!1;for(const z of P)if(!pc(z,E))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class cl{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new cl(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class pi{constructor(n,s,h,p){this.name=n,this.type=s,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],p=pi.definitions[h];if(!p)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,E=x.filter(([z])=>!Array.isArray(z)||z.length===n.length-1);let P=null;for(const[z,W]of E){P=new di(s.registry,hl,s.path,null,s.scope);const ee=[];let ae=!1;for(let me=1;me<n.length;me++){const ye=n[me],Pe=Array.isArray(z)?z[me-1]:z.type,Re=P.parse(ye,1+ee.length,Pe);if(!Re){ae=!0;break}ee.push(Re)}if(!ae)if(Array.isArray(z)&&z.length!==ee.length)P.error(`Expected ${z.length} arguments, but found ${ee.length} instead.`);else{for(let me=0;me<ee.length;me++){const ye=Array.isArray(z)?z[me]:z.type,Pe=ee[me];P.concat(me+1).checkSubtype(ye,Pe.type)}if(P.errors.length===0)return new pi(h,v,W,ee)}}if(E.length===1)s.errors.push(...P.errors);else{const z=(E.length?E:x).map(([ee])=>{return ae=ee,Array.isArray(ae)?`(${ae.map(Ce).join(", ")})`:`(${Ce(ae.type)}...)`;var ae}).join(" | "),W=[];for(let ee=1;ee<n.length;ee++){const ae=s.parse(n[ee],1+W.length);if(!ae)return null;W.push(Ce(ae.type))}s.error(`Expected arguments of type ${z}, but found (${W.join(", ")}) instead.`)}return null}static register(n,s){pi.definitions=s;for(const h in s)n[h]=pi}}function hl(o){if(o instanceof cl)return hl(o.boundExpression);if(o instanceof pi&&o.name==="error"||o instanceof sl||o instanceof _s)return!1;const n=o instanceof Ji||o instanceof Ri;let s=!0;return o.eachChild(h=>{s=n?s&&hl(h):s&&h instanceof ys}),!!s&&fl(o)&&dl(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function fl(o){if(o instanceof pi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof _s)return!1;let n=!0;return o.eachChild(s=>{n&&!fl(s)&&(n=!1)}),n}function _a(o){if(o instanceof pi&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!_a(s)&&(n=!1)}),n}function dl(o,n){if(o instanceof pi&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!dl(h,n)&&(s=!1)}),s}function xs(o,n){const s=o.length-1;let h,p,v=0,x=s,E=0;for(;v<=x;)if(E=Math.floor((v+x)/2),h=o[E],p=o[E+1],h<=n){if(E===s||n<p)return E;v=E+1}else{if(!(h>n))throw new hr("Input is not a number.");x=E-1}return 0}class Xo{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,_t);if(!h)return null;const p=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<n.length;x+=2){const E=x===1?-1/0:n[x],P=n[x+1],z=x,W=x+1;if(typeof E!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(p.length&&p[p.length-1][0]>=E)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const ee=s.parse(P,W,v);if(!ee)return null;v=v||ee.type,p.push([E,ee])}return new Xo(v,h,p)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;return p>=s[v-1]?h[v-1].evaluate(n):h[xs(s,p)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function In(o,n,s){return o+s*(n-o)}function pl(o,n,s){return o.map((h,p)=>In(h,n[p],s))}const Ei={number:In,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[p,v,x,E]=pl(o.rgb,n.rgb,s);return new Gn(p,v,x,E,!1)}case"hcl":{const[p,v,x,E]=o.hcl,[P,z,W,ee]=n.hcl;let ae,me;if(isNaN(p)||isNaN(P))isNaN(p)?isNaN(P)?ae=NaN:(ae=P,x!==1&&x!==0||(me=z)):(ae=p,W!==1&&W!==0||(me=v));else{let Je=P-p;P>p&&Je>180?Je-=360:P<p&&p-P>180&&(Je+=360),ae=p+s*Je}const[ye,Pe,Re,Ne]=function([Je,Xe,Qe,rt]){return Je=isNaN(Je)?0:Je*fn,qn([Qe,Math.cos(Je)*Xe,Math.sin(Je)*Xe,rt])}([ae,me??In(v,z,s),In(x,W,s),In(E,ee,s)]);return new Gn(ye,Pe,Re,Ne,!1)}case"lab":{const[p,v,x,E]=qn(pl(o.lab,n.lab,s));return new Gn(p,v,x,E,!1)}}},array:pl,padding:function(o,n,s){return new Si(pl(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const h=o.values,p=n.values;if(h.length!==p.length)throw new hr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==p[x])throw new hr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${p[x]}`);v.push(h[x]);const[E,P]=h[x+1],[z,W]=p[x+1];v.push([In(E,z,s),In(P,W,s)])}return new Fi(v)}};class mi{constructor(n,s,h,p,v){this.type=n,this.operator=s,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,E]of v)this.labels.push(x),this.outputs.push(E)}static interpolationFactor(n,s,h,p){let v=0;if(n.name==="exponential")v=mu(s,n.base,h,p);else if(n.name==="linear")v=mu(s,1,h,p);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new R(x[0],x[1],x[2],x[3]).solve(mu(s,1,h,p))}return v}static parse(n,s){let[h,p,v,...x]=n;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const z=p[1];if(typeof z!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:z}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const z=p.slice(1);if(z.length!==4||z.some(W=>typeof W!="number"||W<0||W>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:z}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,_t),!v)return null;const E=[];let P=null;h==="interpolate-hcl"||h==="interpolate-lab"?P=wr:s.expectedType&&s.expectedType.kind!=="value"&&(P=s.expectedType);for(let z=0;z<x.length;z+=2){const W=x[z],ee=x[z+1],ae=z+3,me=z+4;if(typeof W!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ae);if(E.length&&E[E.length-1][0]>=W)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ae);const ye=s.parse(ee,me,P);if(!ye)return null;P=P||ye.type,E.push([W,ye])}return ut(P,_t)||ut(P,wr)||ut(P,re)||ut(P,xe)||ut(P,be(_t))?new mi(P,h,p,v,E):s.error(`Type ${Ce(P)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;if(p>=s[v-1])return h[v-1].evaluate(n);const x=xs(s,p),E=mi.interpolationFactor(this.interpolation,p,s[x],s[x+1]),P=h[x].evaluate(n),z=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return Ei[this.type.kind](P,z,E);case"interpolate-hcl":return Ei.color(P,z,E,"hcl");case"interpolate-lab":return Ei.color(P,z,E,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function mu(o,n,s,h){const p=h-s,v=o-s;return p===0?0:n===1?v/p:(Math.pow(n,v)-1)/(Math.pow(n,p)-1)}class ml{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const p=s.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const E of n.slice(1)){const P=s.parse(E,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!P)return null;h=h||P.type,v.push(P)}if(!h)throw new Error("No output type");const x=p&&v.some(E=>Ve(p,E.type));return new ml(x?hn:h,v)}evaluate(n){let s,h=null,p=0;for(const v of this.args)if(p++,h=v.evaluate(n),h&&h instanceof $r&&!h.available&&(s||(s=h.name),h=null,p===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class gl{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const E=s.parse(n[v+1],v+1);if(!E)return null;h.push([x,E])}const p=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return p?new gl(h,p):null}outputDefined(){return this.result.outputDefined()}}class gu{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,_t),p=s.parse(n[2],2,be(s.expectedType||hn));return h&&p?new gu(p.type.itemType,h,p):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new hr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new hr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new hr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class yl{constructor(n,s){this.type=nn,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,hn),p=s.parse(n[2],2,hn);return h&&p?Fe(h.type,[nn,Rt,_t,vn,hn])?new yl(h,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!qe(s,["boolean","string","number","null"]))throw new hr(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(ir(s))} instead.`);if(!qe(h,["string","array"]))throw new hr(`Expected second argument to be of type array or string, but found ${Ce(ir(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class vl{constructor(n,s,h){this.type=_t,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,hn),p=s.parse(n[2],2,hn);if(!h||!p)return null;if(!Fe(h.type,[nn,Rt,_t,vn,hn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,_t);return v?new vl(h,p,v):null}return new vl(h,p)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!qe(s,["boolean","string","number","null"]))throw new hr(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(ir(s))} instead.`);if(!qe(h,["string","array"]))throw new hr(`Expected second argument to be of type array or string, but found ${Ce(ir(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return h.indexOf(s,p)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class xa{constructor(n,s,h,p,v,x){this.inputType=n,this.type=s,this.input=h,this.cases=p,this.outputs=v,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const v={},x=[];for(let z=2;z<n.length-1;z+=2){let W=n[z];const ee=n[z+1];Array.isArray(W)||(W=[W]);const ae=s.concat(z);if(W.length===0)return ae.error("Expected at least one branch label.");for(const ye of W){if(typeof ye!="number"&&typeof ye!="string")return ae.error("Branch labels must be numbers or strings.");if(typeof ye=="number"&&Math.abs(ye)>Number.MAX_SAFE_INTEGER)return ae.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ye=="number"&&Math.floor(ye)!==ye)return ae.error("Numeric branch labels must be integer values.");if(h){if(ae.checkSubtype(h,ir(ye)))return null}else h=ir(ye);if(v[String(ye)]!==void 0)return ae.error("Branch labels must be unique.");v[String(ye)]=x.length}const me=s.parse(ee,z,p);if(!me)return null;p=p||me.type,x.push(me)}const E=s.parse(n[1],1,hn);if(!E)return null;const P=s.parse(n[n.length-1],n.length-1,p);return P?E.type.kind!=="value"&&s.concat(1).checkSubtype(h,E.type)?null:new xa(h,p,E,v,x,P):null}evaluate(n){const s=this.input.evaluate(n);return(ir(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class yu{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const p=[];for(let x=1;x<n.length-1;x+=2){const E=s.parse(n[x],x,nn);if(!E)return null;const P=s.parse(n[x+1],x+1,h);if(!P)return null;p.push([E,P]),h=h||P.type}const v=s.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new yu(h,p,v)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class _l{constructor(n,s,h,p){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=p}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,hn),p=s.parse(n[2],2,_t);if(!h||!p)return null;if(!Fe(h.type,[be(hn),Rt,hn]))return s.error(`Expected first argument to be of type array or string, but found ${Ce(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,_t);return v?new _l(h.type,h,p,v):null}return new _l(h.type,h,p)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!qe(s,["string","array"]))throw new hr(`Expected first argument to be of type array or string, but found ${Ce(ir(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return s.slice(h,p)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function yc(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function vc(o,n,s,h){return h.compare(n,s)===0}function Hs(o,n,s){const h=o!=="=="&&o!=="!=";return class TC{constructor(v,x,E){this.type=nn,this.lhs=v,this.rhs=x,this.collator=E,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const E=v[0];let P=x.parse(v[1],1,hn);if(!P)return null;if(!yc(E,P.type))return x.concat(1).error(`"${E}" comparisons are not supported for type '${Ce(P.type)}'.`);let z=x.parse(v[2],2,hn);if(!z)return null;if(!yc(E,z.type))return x.concat(2).error(`"${E}" comparisons are not supported for type '${Ce(z.type)}'.`);if(P.type.kind!==z.type.kind&&P.type.kind!=="value"&&z.type.kind!=="value")return x.error(`Cannot compare types '${Ce(P.type)}' and '${Ce(z.type)}'.`);h&&(P.type.kind==="value"&&z.type.kind!=="value"?P=new Ri(z.type,[P]):P.type.kind!=="value"&&z.type.kind==="value"&&(z=new Ri(P.type,[z])));let W=null;if(v.length===4){if(P.type.kind!=="string"&&z.type.kind!=="string"&&P.type.kind!=="value"&&z.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(W=x.parse(v[3],3,er),!W)return null}return new TC(P,z,W)}evaluate(v){const x=this.lhs.evaluate(v),E=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const P=ir(x),z=ir(E);if(P.kind!==z.kind||P.kind!=="string"&&P.kind!=="number")throw new hr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${P.kind}, ${z.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const P=ir(x),z=ir(E);if(P.kind!=="string"||z.kind!=="string")return n(v,x,E)}return this.collator?s(v,x,E,this.collator.evaluate(v)):n(v,x,E)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Rh=Hs("==",function(o,n,s){return n===s},vc),_c=Hs("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!vc(0,n,s,h)}),vu=Hs("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),jh=Hs(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),Dh=Hs("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),Bh=Hs(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class _u{constructor(n,s,h,p,v){this.type=Rt,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,_t);if(!h)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=s.parse(p.locale,1,Rt),!v))return null;let x=null;if(p.currency&&(x=s.parse(p.currency,1,Rt),!x))return null;let E=null;if(p["min-fraction-digits"]&&(E=s.parse(p["min-fraction-digits"],1,_t),!E))return null;let P=null;return p["max-fraction-digits"]&&(P=s.parse(p["max-fraction-digits"],1,_t),!P)?null:new _u(h,v,x,E,P)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class wa{constructor(n){this.type=ze,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const p=[];let v=!1;for(let x=1;x<=n.length-1;++x){const E=n[x];if(v&&typeof E=="object"&&!Array.isArray(E)){v=!1;let P=null;if(E["font-scale"]&&(P=s.parse(E["font-scale"],1,_t),!P))return null;let z=null;if(E["text-font"]&&(z=s.parse(E["text-font"],1,be(Rt)),!z))return null;let W=null;if(E["text-color"]&&(W=s.parse(E["text-color"],1,wr),!W))return null;const ee=p[p.length-1];ee.scale=P,ee.font=z,ee.textColor=W}else{const P=s.parse(n[x],1,hn);if(!P)return null;const z=P.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:P,scale:null,font:null,textColor:null})}}return new wa(p)}evaluate(n){return new ti(this.sections.map(s=>{const h=s.content.evaluate(n);return ir(h)===he?new rl("",h,null,null,null):new rl(bn(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class xu{constructor(n){this.type=he,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Rt);return h?new xu(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=$r.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class wu{constructor(n){this.type=_t,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Ce(h.type)} instead.`):new wu(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new hr(`Expected value to be of type string or array, but found ${Ce(ir(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Ws={"==":Rh,"!=":_c,">":jh,"<":vu,">=":Bh,"<=":Dh,array:Ri,at:gu,boolean:Ri,case:yu,coalesce:ml,collator:sl,format:wa,image:xu,in:yl,"index-of":vl,interpolate:mi,"interpolate-hcl":mi,"interpolate-lab":mi,length:wu,let:gl,literal:ys,match:xa,number:Ri,"number-format":_u,object:Ri,slice:_l,step:Xo,string:Ri,"to-boolean":Ji,"to-color":Ji,"to-number":Ji,"to-string":Ji,var:cl,within:_s};function xc(o,[n,s,h,p]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const v=p?p.evaluate(o):1,x=il(n,s,h,v);if(x)throw new hr(x);return new Gn(n/255,s/255,h/255,v,!1)}function ba(o,n){return o in n}function bu(o,n){const s=n[o];return s===void 0?null:s}function ji(o){return{type:o}}function Su(o){return{result:"success",value:o}}function Vr(o){return{result:"error",value:o}}function Xs(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function wc(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Eu(o){return!!o.expression&&o.expression.interpolated}function Dn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Jn(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Nh(o){return o}function Sn(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),v=o.type||(Eu(n)?"exponential":"interval");if(s||n.type==="padding"){const W=s?Gn.parse:Si.parse;(o=at({},o)).stops&&(o.stops=o.stops.map(ee=>[ee[0],W(ee[1])])),o.default=W(o.default?o.default:n.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let E,P,z;if(v==="exponential")E=qs;else if(v==="interval")E=Wn;else if(v==="categorical"){E=or,P=Object.create(null);for(const W of o.stops)P[W[0]]=W[1];z=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);E=Tu}if(h){const W={},ee=[];for(let ye=0;ye<o.stops.length;ye++){const Pe=o.stops[ye],Re=Pe[0].zoom;W[Re]===void 0&&(W[Re]={zoom:Re,type:o.type,property:o.property,default:o.default,stops:[]},ee.push(Re)),W[Re].stops.push([Pe[0].value,Pe[1]])}const ae=[];for(const ye of ee)ae.push([W[ye].zoom,Sn(W[ye],n)]);const me={name:"linear"};return{kind:"composite",interpolationType:me,interpolationFactor:mi.interpolationFactor.bind(void 0,me),zoomStops:ae.map(ye=>ye[0]),evaluate:({zoom:ye},Pe)=>qs({stops:ae,base:o.base},n,ye).evaluate(ye,Pe)}}if(p){const W=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:W,interpolationFactor:mi.interpolationFactor.bind(void 0,W),zoomStops:o.stops.map(ee=>ee[0]),evaluate:({zoom:ee})=>E(o,n,ee,P,z)}}return{kind:"source",evaluate(W,ee){const ae=ee&&ee.properties?ee.properties[o.property]:void 0;return ae===void 0?ws(o.default,n.default):E(o,n,ae,P,z)}}}function ws(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function or(o,n,s,h,p){return ws(typeof s===p?h[s]:void 0,o.default,n.default)}function Wn(o,n,s){if(Dn(s)!=="number")return ws(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const p=xs(o.stops.map(v=>v[0]),s);return o.stops[p][1]}function qs(o,n,s){const h=o.base!==void 0?o.base:1;if(Dn(s)!=="number")return ws(o.default,n.default);const p=o.stops.length;if(p===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[p-1][0])return o.stops[p-1][1];const v=xs(o.stops.map(W=>W[0]),s),x=function(W,ee,ae,me){const ye=me-ae,Pe=W-ae;return ye===0?0:ee===1?Pe/ye:(Math.pow(ee,Pe)-1)/(Math.pow(ee,ye)-1)}(s,h,o.stops[v][0],o.stops[v+1][0]),E=o.stops[v][1],P=o.stops[v+1][1],z=Ei[n.type]||Nh;return typeof E.evaluate=="function"?{evaluate(...W){const ee=E.evaluate.apply(void 0,W),ae=P.evaluate.apply(void 0,W);if(ee!==void 0&&ae!==void 0)return z(ee,ae,x,o.colorSpace)}}:z(E,P,x,o.colorSpace)}function Tu(o,n,s){switch(n.type){case"color":s=Gn.parse(s);break;case"formatted":s=ti.fromString(s.toString());break;case"resolvedImage":s=$r.fromString(s.toString());break;case"padding":s=Si.parse(s);break;default:Dn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return ws(s,o.default,n.default)}pi.register(Ws,{error:[{kind:"error"},[Rt],(o,[n])=>{throw new hr(n.evaluate(o))}],typeof:[Rt,[hn],(o,[n])=>Ce(ir(n.evaluate(o)))],"to-rgba":[be(_t,4),[wr],(o,[n])=>{const[s,h,p,v]=n.evaluate(o).rgb;return[255*s,255*h,255*p,v]}],rgb:[wr,[_t,_t,_t],xc],rgba:[wr,[_t,_t,_t,_t],xc],has:{type:nn,overloads:[[[Rt],(o,[n])=>ba(n.evaluate(o),o.properties())],[[Rt,fi],(o,[n,s])=>ba(n.evaluate(o),s.evaluate(o))]]},get:{type:hn,overloads:[[[Rt],(o,[n])=>bu(n.evaluate(o),o.properties())],[[Rt,fi],(o,[n,s])=>bu(n.evaluate(o),s.evaluate(o))]]},"feature-state":[hn,[Rt],(o,[n])=>bu(n.evaluate(o),o.featureState||{})],properties:[fi,[],o=>o.properties()],"geometry-type":[Rt,[],o=>o.geometryType()],id:[hn,[],o=>o.id()],zoom:[_t,[],o=>o.globals.zoom],"heatmap-density":[_t,[],o=>o.globals.heatmapDensity||0],"line-progress":[_t,[],o=>o.globals.lineProgress||0],accumulated:[hn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[_t,ji(_t),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[_t,ji(_t),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:_t,overloads:[[[_t,_t],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[_t],(o,[n])=>-n.evaluate(o)]]},"/":[_t,[_t,_t],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[_t,[_t,_t],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[_t,[],()=>Math.LN2],pi:[_t,[],()=>Math.PI],e:[_t,[],()=>Math.E],"^":[_t,[_t,_t],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[_t,[_t],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[_t,[_t],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[_t,[_t],(o,[n])=>Math.log(n.evaluate(o))],log2:[_t,[_t],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[_t,[_t],(o,[n])=>Math.sin(n.evaluate(o))],cos:[_t,[_t],(o,[n])=>Math.cos(n.evaluate(o))],tan:[_t,[_t],(o,[n])=>Math.tan(n.evaluate(o))],asin:[_t,[_t],(o,[n])=>Math.asin(n.evaluate(o))],acos:[_t,[_t],(o,[n])=>Math.acos(n.evaluate(o))],atan:[_t,[_t],(o,[n])=>Math.atan(n.evaluate(o))],min:[_t,ji(_t),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[_t,ji(_t),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[_t,[_t],(o,[n])=>Math.abs(n.evaluate(o))],round:[_t,[_t],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[_t,[_t],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[_t,[_t],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[nn,[Rt,hn],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[nn,[hn],(o,[n])=>o.id()===n.value],"filter-type-==":[nn,[Rt],(o,[n])=>o.geometryType()===n.value],"filter-<":[nn,[Rt,hn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<p}],"filter-id-<":[nn,[hn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[nn,[Rt,hn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>p}],"filter-id->":[nn,[hn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[nn,[Rt,hn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[nn,[hn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[nn,[Rt,hn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[nn,[hn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[nn,[hn],(o,[n])=>n.value in o.properties()],"filter-has-id":[nn,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[nn,[be(Rt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[nn,[be(hn)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[nn,[Rt,be(hn)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[nn,[Rt,be(hn)],(o,[n,s])=>function(h,p,v,x){for(;v<=x;){const E=v+x>>1;if(p[E]===h)return!0;p[E]>h?x=E-1:v=E+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:nn,overloads:[[[nn,nn],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[ji(nn),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:nn,overloads:[[[nn,nn],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[ji(nn),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[nn,[nn],(o,[n])=>!n.evaluate(o)],"is-supported-script":[nn,[Rt],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Rt,[Rt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Rt,[Rt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Rt,ji(hn),(o,n)=>n.map(s=>bn(s.evaluate(o))).join("")],"resolved-locale":[Rt,[er],(o,[n])=>n.evaluate(o).resolvedLocale()]});class Cu{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new fu,this._defaultValue=s?(h=s).type==="color"&&Jn(h.default)?new Gn(0,0,0,0):h.type==="color"?Gn.parse(h.default)||null:h.type==="padding"?Si.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Fi.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,p,v,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new hr(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function xl(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Ws}function bs(o,n){const s=new di(Ws,hl,[],n?function(p){const v={color:wr,string:Rt,number:_t,enum:Rt,boolean:nn,formatted:ze,padding:re,resolvedImage:he,variableAnchorOffsetCollection:xe};return p.type==="array"?be(v[p.value]||hn,p.length):v[p.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Su(new Cu(h,n)):Vr(s.errors)}class Po{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!_a(s.expression)}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,x)}evaluate(n,s,h,p,v,x){return this._styleExpression.evaluate(n,s,h,p,v,x)}}class wl{constructor(n,s,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!_a(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,x)}evaluate(n,s,h,p,v,x){return this._styleExpression.evaluate(n,s,h,p,v,x)}interpolationFactor(n,s,h){return this.interpolationType?mi.interpolationFactor(this.interpolationType,n,s,h):0}}function bl(o,n){const s=bs(o,n);if(s.result==="error")return s;const h=s.value.expression,p=fl(h);if(!p&&!Xs(n))return Vr([new jt("","data expressions not supported")]);const v=dl(h,["zoom"]);if(!v&&!wc(n))return Vr([new jt("","zoom expressions not supported")]);const x=Sa(h);return x||v?x instanceof jt?Vr([x]):x instanceof mi&&!Eu(n)?Vr([new jt("",'"interpolate" expressions cannot be used with this property')]):Su(x?new wl(p?"camera":"composite",s.value,x.labels,x instanceof mi?x.interpolation:void 0):new Po(p?"constant":"source",s.value)):Vr([new jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class qo{constructor(n,s){this._parameters=n,this._specification=s,at(this,Sn(this._parameters,this._specification))}static deserialize(n){return new qo(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Sa(o){let n=null;if(o instanceof gl)n=Sa(o.result);else if(o instanceof ml){for(const s of o.args)if(n=Sa(s),n)break}else(o instanceof Xo||o instanceof mi)&&o.input instanceof pi&&o.input.name==="zoom"&&(n=o);return n instanceof jt||o.eachChild(s=>{const h=Sa(s);h instanceof jt?n=h:!n&&h?n=new jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new jt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function vo(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!vo(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Ks={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Gr(o){if(o==null)return{filter:()=>!0,needGeometry:!1};vo(o)||(o=Ys(o));const n=bs(o,Ks);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,p)=>n.value.evaluate(s,h,{},p),needGeometry:Sl(o)}}function Ss(o,n){return o<n?-1:o>n?1:0}function Sl(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(Sl(o[n]))return!0;return!1}function Ys(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Iu(o[1],o[2],"=="):n==="!="?ii(Iu(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Iu(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(Ys))):n==="all"?["all"].concat(o.slice(1).map(Ys)):n==="none"?["all"].concat(o.slice(1).map(Ys).map(ii)):n==="in"?Ea(o[1],o.slice(2)):n==="!in"?ii(Ea(o[1],o.slice(2))):n==="has"?Ta(o[1]):n==="!has"?ii(Ta(o[1])):n!=="within"||o;var s}function Iu(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Ea(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(Ss)]]:["filter-in-small",o,["literal",n]]}}function Ta(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function ii(o){return["!",o]}function ko(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let p="[";for(const v of o)p+=`${ko(v)},`;return`${p}]`}const s=Object.keys(o).sort();let h="{";for(let p=0;p<s.length;p++)h+=`${JSON.stringify(s[p])}:${ko(o[s[p]])},`;return`${h}}`}function Ca(o){let n="";for(const s of B)n+=`/${ko(o[s])}`;return n}function Ia(o){const n=o.value;return n?[new je(o.key,n,"constants have been deprecated as of v8")]:[]}function Qn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Ko(o){if(Array.isArray(o))return o.map(Ko);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=Ko(o[s]);return n}return Qn(o)}function oi(o){const n=o.key,s=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},v=o.style,x=o.styleSpec,E=o.validateSpec;let P=[];const z=Dn(s);if(z!=="object")return[new je(n,s,`object expected, ${z} found`)];for(const W in s){const ee=W.split(".")[0],ae=h[ee]||h["*"];let me;if(p[ee])me=p[ee];else if(h[ee])me=E;else if(p["*"])me=p["*"];else{if(!h["*"]){P.push(new je(n,s[W],`unknown property "${W}"`));continue}me=E}P=P.concat(me({key:(n&&`${n}.`)+W,value:s[W],valueSpec:ae,style:v,styleSpec:x,object:s,objectKey:W,validateSpec:E},s))}for(const W in h)p[W]||h[W].required&&h[W].default===void 0&&s[W]===void 0&&P.push(new je(n,s,`missing required property "${W}"`));return P}function Es(o){const n=o.value,s=o.valueSpec,h=o.style,p=o.styleSpec,v=o.key,x=o.arrayElementValidator||o.validateSpec;if(Dn(n)!=="array")return[new je(v,n,`array expected, ${Dn(n)} found`)];if(s.length&&n.length!==s.length)return[new je(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new je(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let E={type:s.value,values:s.values};p.$version<7&&(E.function=s.function),Dn(s.value)==="object"&&(E=s.value);let P=[];for(let z=0;z<n.length;z++)P=P.concat(x({array:n,arrayIndex:z,value:n[z],valueSpec:E,validateSpec:o.validateSpec,style:h,styleSpec:p,key:`${v}[${z}]`}));return P}function Js(o){const n=o.key,s=o.value,h=o.valueSpec;let p=Dn(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new je(n,s,`number expected, ${p} found`)]:"minimum"in h&&s<h.minimum?[new je(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new je(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Qi(o){const n=o.valueSpec,s=Qn(o.value.type);let h,p,v,x={};const E=s!=="categorical"&&o.value.property===void 0,P=!E,z=Dn(o.value.stops)==="array"&&Dn(o.value.stops[0])==="array"&&Dn(o.value.stops[0][0])==="object",W=oi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(me){if(s==="identity")return[new je(me.key,me.value,'identity function may not have a "stops" property')];let ye=[];const Pe=me.value;return ye=ye.concat(Es({key:me.key,value:Pe,valueSpec:me.valueSpec,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:ee})),Dn(Pe)==="array"&&Pe.length===0&&ye.push(new je(me.key,Pe,"array must have at least one stop")),ye},default:function(me){return me.validateSpec({key:me.key,value:me.value,valueSpec:n,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec})}}});return s==="identity"&&E&&W.push(new je(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||W.push(new je(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!Eu(o.valueSpec)&&W.push(new je(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(P&&!Xs(o.valueSpec)?W.push(new je(o.key,o.value,"property functions not supported")):E&&!wc(o.valueSpec)&&W.push(new je(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!z||o.value.property!==void 0||W.push(new je(o.key,o.value,'"property" property is required')),W;function ee(me){let ye=[];const Pe=me.value,Re=me.key;if(Dn(Pe)!=="array")return[new je(Re,Pe,`array expected, ${Dn(Pe)} found`)];if(Pe.length!==2)return[new je(Re,Pe,`array length 2 expected, length ${Pe.length} found`)];if(z){if(Dn(Pe[0])!=="object")return[new je(Re,Pe,`object expected, ${Dn(Pe[0])} found`)];if(Pe[0].zoom===void 0)return[new je(Re,Pe,"object stop key must have zoom")];if(Pe[0].value===void 0)return[new je(Re,Pe,"object stop key must have value")];if(v&&v>Qn(Pe[0].zoom))return[new je(Re,Pe[0].zoom,"stop zoom values must appear in ascending order")];Qn(Pe[0].zoom)!==v&&(v=Qn(Pe[0].zoom),p=void 0,x={}),ye=ye.concat(oi({key:`${Re}[0]`,value:Pe[0],valueSpec:{zoom:{}},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:Js,value:ae}}))}else ye=ye.concat(ae({key:`${Re}[0]`,value:Pe[0],valueSpec:{},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec},Pe));return xl(Ko(Pe[1]))?ye.concat([new je(`${Re}[1]`,Pe[1],"expressions are not allowed in function stops.")]):ye.concat(me.validateSpec({key:`${Re}[1]`,value:Pe[1],valueSpec:n,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec}))}function ae(me,ye){const Pe=Dn(me.value),Re=Qn(me.value),Ne=me.value!==null?me.value:ye;if(h){if(Pe!==h)return[new je(me.key,Ne,`${Pe} stop domain type must match previous stop domain type ${h}`)]}else h=Pe;if(Pe!=="number"&&Pe!=="string"&&Pe!=="boolean")return[new je(me.key,Ne,"stop domain value must be a number, string, or boolean")];if(Pe!=="number"&&s!=="categorical"){let Je=`number expected, ${Pe} found`;return Xs(n)&&s===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(me.key,Ne,Je)]}return s!=="categorical"||Pe!=="number"||isFinite(Re)&&Math.floor(Re)===Re?s!=="categorical"&&Pe==="number"&&p!==void 0&&Re<p?[new je(me.key,Ne,"stop domain values must appear in ascending order")]:(p=Re,s==="categorical"&&Re in x?[new je(me.key,Ne,"stop domain values must be unique")]:(x[Re]=!0,[])):[new je(me.key,Ne,`integer expected, found ${Re}`)]}}function Yo(o){const n=(o.expressionContext==="property"?bl:bs)(Ko(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new je(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new je(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!_a(s))return[new je(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!_a(s))return[new je(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!dl(s,["zoom","feature-state"]))return[new je(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!fl(s))return[new je(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Aa(o){const n=o.key,s=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Qn(s))===-1&&p.push(new je(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(Qn(s))===-1&&p.push(new je(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function Ts(o){return vo(Ko(o.value))?Yo(at({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):El(o)}function El(o){const n=o.value,s=o.key;if(Dn(n)!=="array")return[new je(s,n,`array expected, ${Dn(n)} found`)];const h=o.styleSpec;let p,v=[];if(n.length<1)return[new je(s,n,"filter array must have at least 1 element")];switch(v=v.concat(Aa({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),Qn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Qn(n[1])==="$type"&&v.push(new je(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new je(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=Dn(n[1]),p!=="string"&&v.push(new je(`${s}[1]`,n[1],`string expected, ${p} found`)));for(let x=2;x<n.length;x++)p=Dn(n[x]),Qn(n[1])==="$type"?v=v.concat(Aa({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new je(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(El({key:`${s}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=Dn(n[1]),n.length!==2?v.push(new je(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new je(`${s}[1]`,n[1],`string expected, ${p} found`));break;case"within":p=Dn(n[1]),n.length!==2?v.push(new je(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="object"&&v.push(new je(`${s}[1]`,n[1],`object expected, ${p} found`))}return v}function Au(o,n){const s=o.key,h=o.validateSpec,p=o.style,v=o.styleSpec,x=o.value,E=o.objectKey,P=v[`${n}_${o.layerType}`];if(!P)return[];const z=E.match(/^(.*)-transition$/);if(n==="paint"&&z&&P[z[1]]&&P[z[1]].transition)return h({key:s,value:x,valueSpec:v.transition,style:p,styleSpec:v});const W=o.valueSpec||P[E];if(!W)return[new je(s,x,`unknown property "${E}"`)];let ee;if(Dn(x)==="string"&&Xs(W)&&!W.tokens&&(ee=/^{([^}]+)}$/.exec(x)))return[new je(s,x,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ee[1])} }\`.`)];const ae=[];return o.layerType==="symbol"&&(E==="text-field"&&p&&!p.glyphs&&ae.push(new je(s,x,'use of "text-field" requires a style "glyphs" property')),E==="text-font"&&Jn(Ko(x))&&Qn(x.type)==="identity"&&ae.push(new je(s,x,'"text-font" does not support identity functions'))),ae.concat(h({key:o.key,value:x,valueSpec:W,style:p,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:E}))}function Pu(o){return Au(o,"paint")}function ku(o){return Au(o,"layout")}function Z(o){let n=[];const s=o.value,h=o.key,p=o.style,v=o.styleSpec;s.type||s.ref||n.push(new je(h,s,'either "type" or "ref" is required'));let x=Qn(s.type);const E=Qn(s.ref);if(s.id){const P=Qn(s.id);for(let z=0;z<o.arrayIndex;z++){const W=p.layers[z];Qn(W.id)===P&&n.push(new je(h,s.id,`duplicate layer id "${s.id}", previously used at line ${W.id.__line__}`))}}if("ref"in s){let P;["type","source","source-layer","filter","layout"].forEach(z=>{z in s&&n.push(new je(h,s[z],`"${z}" is prohibited for ref layers`))}),p.layers.forEach(z=>{Qn(z.id)===E&&(P=z)}),P?P.ref?n.push(new je(h,s.ref,"ref cannot reference another ref layer")):x=Qn(P.type):n.push(new je(h,s.ref,`ref layer "${E}" not found`))}else if(x!=="background")if(s.source){const P=p.sources&&p.sources[s.source],z=P&&Qn(P.type);P?z==="vector"&&x==="raster"?n.push(new je(h,s.source,`layer "${s.id}" requires a raster source`)):z!=="raster-dem"&&x==="hillshade"?n.push(new je(h,s.source,`layer "${s.id}" requires a raster-dem source`)):z==="raster"&&x!=="raster"?n.push(new je(h,s.source,`layer "${s.id}" requires a vector source`)):z!=="vector"||s["source-layer"]?z==="raster-dem"&&x!=="hillshade"?n.push(new je(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||z==="geojson"&&P.lineMetrics||n.push(new je(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new je(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new je(h,s.source,`source "${s.source}" not found`))}else n.push(new je(h,s,'missing required property "source"'));return n=n.concat(oi({key:h,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Ts,layout:P=>oi({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":z=>ku(at({layerType:x},z))}}),paint:P=>oi({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":z=>Pu(at({layerType:x},z))}})}})),n}function ve(o){const n=o.value,s=o.key,h=Dn(n);return h!=="string"?[new je(s,n,`string expected, ${h} found`)]:[]}const Ue={promoteId:function({key:o,value:n}){if(Dn(n)==="string")return ve({key:o,value:n});{const s=[];for(const h in n)s.push(...ve({key:`${o}.${h}`,value:n[h]}));return s}}};function it(o){const n=o.value,s=o.key,h=o.styleSpec,p=o.style,v=o.validateSpec;if(!n.type)return[new je(s,n,'"type" is required')];const x=Qn(n.type);let E;switch(x){case"vector":case"raster":return E=oi({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Ue,validateSpec:v}),E;case"raster-dem":return E=function(P){var z;const W=(z=P.sourceName)!==null&&z!==void 0?z:"",ee=P.value,ae=P.styleSpec,me=ae.source_raster_dem,ye=P.style;let Pe=[];const Re=Dn(ee);if(ee===void 0)return Pe;if(Re!=="object")return Pe.push(new je("source_raster_dem",ee,`object expected, ${Re} found`)),Pe;const Ne=Qn(ee.encoding)==="custom",Je=["redFactor","greenFactor","blueFactor","baseShift"],Xe=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const Qe in ee)!Ne&&Je.includes(Qe)?Pe.push(new je(Qe,ee[Qe],`In "${W}": "${Qe}" is only valid when "encoding" is set to "custom". ${Xe} encoding found`)):me[Qe]?Pe=Pe.concat(P.validateSpec({key:Qe,value:ee[Qe],valueSpec:me[Qe],validateSpec:P.validateSpec,style:ye,styleSpec:ae})):Pe.push(new je(Qe,ee[Qe],`unknown property "${Qe}"`));return Pe}({sourceName:s,value:n,style:o.style,styleSpec:h,validateSpec:v}),E;case"geojson":if(E=oi({key:s,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:v,objectElementValidators:Ue}),n.cluster)for(const P in n.clusterProperties){const[z,W]=n.clusterProperties[P],ee=typeof z=="string"?[z,["accumulated"],["get",P]]:z;E.push(...Yo({key:`${s}.${P}.map`,value:W,validateSpec:v,expressionContext:"cluster-map"})),E.push(...Yo({key:`${s}.${P}.reduce`,value:ee,validateSpec:v,expressionContext:"cluster-reduce"}))}return E;case"video":return oi({key:s,value:n,valueSpec:h.source_video,style:p,validateSpec:v,styleSpec:h});case"image":return oi({key:s,value:n,valueSpec:h.source_image,style:p,validateSpec:v,styleSpec:h});case"canvas":return[new je(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Aa({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:v,styleSpec:h})}}function Lt(o){const n=o.value,s=o.styleSpec,h=s.light,p=o.style;let v=[];const x=Dn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new je("light",n,`object expected, ${x} found`)]),v;for(const E in n){const P=E.match(/^(.*)-transition$/);v=v.concat(P&&h[P[1]]&&h[P[1]].transition?o.validateSpec({key:E,value:n[E],valueSpec:s.transition,validateSpec:o.validateSpec,style:p,styleSpec:s}):h[E]?o.validateSpec({key:E,value:n[E],valueSpec:h[E],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new je(E,n[E],`unknown property "${E}"`)])}return v}function Tt(o){const n=o.value,s=o.styleSpec,h=s.terrain,p=o.style;let v=[];const x=Dn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new je("terrain",n,`object expected, ${x} found`)]),v;for(const E in n)v=v.concat(h[E]?o.validateSpec({key:E,value:n[E],valueSpec:h[E],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new je(E,n[E],`unknown property "${E}"`)]);return v}function Zt(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const p=[],v=[];for(const x in s)s[x].id&&p.includes(s[x].id)&&n.push(new je(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),p.push(s[x].id),s[x].url&&v.includes(s[x].url)&&n.push(new je(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),n=n.concat(oi({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return ve({key:h,value:s})}const Xt={"*":()=>[],array:Es,boolean:function(o){const n=o.value,s=o.key,h=Dn(n);return h!=="boolean"?[new je(s,n,`boolean expected, ${h} found`)]:[]},number:Js,color:function(o){const n=o.key,s=o.value,h=Dn(s);return h!=="string"?[new je(n,s,`color expected, ${h} found`)]:Gn.parse(String(s))?[]:[new je(n,s,`color expected, "${s}" found`)]},constants:Ia,enum:Aa,filter:Ts,function:Qi,layer:Z,object:oi,source:it,light:Lt,terrain:Tt,string:ve,formatted:function(o){return ve(o).length===0?[]:Yo(o)},resolvedImage:function(o){return ve(o).length===0?[]:Yo(o)},padding:function(o){const n=o.key,s=o.value;if(Dn(s)==="array"){if(s.length<1||s.length>4)return[new je(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let p=[];for(let v=0;v<s.length;v++)p=p.concat(o.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:h}));return p}return Js({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,h=Dn(s),p=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new je(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat(Aa({key:`${n}[${x}]`,value:s[x],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(Es({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:p}));return v},sprite:Zt};function dn(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=dn,s.expression&&Jn(Qn(n))?Qi(o):s.expression&&xl(Ko(n))?Yo(o):s.type&&Xt[s.type]?Xt[s.type](o):oi(at({},o,{valueSpec:s.type?h[s.type]:s}))}function Zn(o){const n=o.value,s=o.key,h=ve(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new je(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new je(s,n,'"glyphs" url must include a "{range}" token'))),h}function En(o,n=ie){let s=[];return s=s.concat(dn({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:dn,objectElementValidators:{glyphs:Zn,"*":()=>[]}})),o.constants&&(s=s.concat(Ia({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:dn}))),sr(s)}function Un(o){return function(n){return o({...n,validateSpec:dn})}}function sr(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function ar(o){return function(...n){return sr(o.apply(this,n))}}En.source=ar(Un(it)),En.sprite=ar(Un(Zt)),En.glyphs=ar(Un(Zn)),En.light=ar(Un(Lt)),En.terrain=ar(Un(Tt)),En.layer=ar(Un(Z)),En.filter=ar(Un(Ts)),En.paintProperty=ar(Un(Pu)),En.layoutProperty=ar(Un(ku));const tr=En,Jo=tr.light,eo=tr.paintProperty,Qo=tr.layoutProperty;function Pa(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new sn(new Error(h.message))),s=!0;return s}class Mo{constructor(n,s,h){const p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let P=0;P<this.d*this.d;P++){const z=x[3+P],W=x[3+P+1];p.push(z===W?null:x.subarray(z,W))}const E=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],E),this.bboxes=x.subarray(E),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,p,v){this._forEachCell(s,h,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,p,v,x){this.cells[v].push(x)}query(n,s,h,p,v){const x=this.min,E=this.max;if(n<=x&&s<=x&&E<=h&&E<=p&&!v)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(n,s,h,p,this._queryCell,P,{},v),P}}_queryCell(n,s,h,p,v,x,E,P){const z=this.cells[v];if(z!==null){const W=this.keys,ee=this.bboxes;for(let ae=0;ae<z.length;ae++){const me=z[ae];if(E[me]===void 0){const ye=4*me;(P?P(ee[ye+0],ee[ye+1],ee[ye+2],ee[ye+3]):n<=ee[ye+2]&&s<=ee[ye+3]&&h>=ee[ye+0]&&p>=ee[ye+1])?(E[me]=!0,x.push(W[me])):E[me]=!1}}}}_forEachCell(n,s,h,p,v,x,E,P){const z=this._convertToCellCoord(n),W=this._convertToCellCoord(s),ee=this._convertToCellCoord(h),ae=this._convertToCellCoord(p);for(let me=z;me<=ee;me++)for(let ye=W;ye<=ae;ye++){const Pe=this.d*ye+me;if((!P||P(this._convertFromCellCoord(me),this._convertFromCellCoord(ye),this._convertFromCellCoord(me+1),this._convertFromCellCoord(ye+1)))&&v.call(this,n,s,h,p,Pe,x,E,P))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const p=new Int32Array(s+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=s;for(let x=0;x<n.length;x++){const E=n[x];p[3+x]=v,p.set(E,v),v+=E.length}return p[3+n.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+n.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Mo(n.buffer)}}const Di={};function Bt(o,n,s={}){if(Di[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),Di[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Bt("Object",Object),Bt("TransferableGridIndex",Mo),Bt("Color",Gn),Bt("Error",Error),Bt("AJAXError",ct),Bt("ResolvedImage",$r),Bt("StylePropertyFunction",qo),Bt("StyleExpression",Cu,{omit:["_evaluator"]}),Bt("ZoomDependentExpression",wl),Bt("ZoomConstantExpression",Po),Bt("CompoundExpression",pi,{omit:["_evaluate"]});for(const o in Ws)Ws[o]._classRegistryKey||Bt(`Expression_${o}`,Ws[o]);function bc(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Qs(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(bc(o)||de(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(Qs(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Di[h])throw new Error(`${h} is not registered.`);const p=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&p===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||Di[h].omit.indexOf(v)>=0)continue;const x=o[v];p[v]=Di[h].shallow.indexOf(v)>=0?x:Qs(x,n)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof o)}function Tl(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||bc(o)||de(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Tl);if(typeof o=="object"){const n=o.$name||"Object";if(!Di[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=Di[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const v=o[p];h[p]=Di[n].shallow.indexOf(p)>=0?v:Tl(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class qd{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Ot={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Uh(o){for(const n of o)if(Vh(n.charCodeAt(0)))return!0;return!1}function $h(o){for(const n of o)if(!ly(n.charCodeAt(0)))return!1;return!0}function ly(o){return!(Ot.Arabic(o)||Ot["Arabic Supplement"](o)||Ot["Arabic Extended-A"](o)||Ot["Arabic Presentation Forms-A"](o)||Ot["Arabic Presentation Forms-B"](o))}function Vh(o){return!(o!==746&&o!==747&&(o<4352||!(Ot["Bopomofo Extended"](o)||Ot.Bopomofo(o)||Ot["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Ot["CJK Compatibility Ideographs"](o)||Ot["CJK Compatibility"](o)||Ot["CJK Radicals Supplement"](o)||Ot["CJK Strokes"](o)||!(!Ot["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Ot["CJK Unified Ideographs Extension A"](o)||Ot["CJK Unified Ideographs"](o)||Ot["Enclosed CJK Letters and Months"](o)||Ot["Hangul Compatibility Jamo"](o)||Ot["Hangul Jamo Extended-A"](o)||Ot["Hangul Jamo Extended-B"](o)||Ot["Hangul Jamo"](o)||Ot["Hangul Syllables"](o)||Ot.Hiragana(o)||Ot["Ideographic Description Characters"](o)||Ot.Kanbun(o)||Ot["Kangxi Radicals"](o)||Ot["Katakana Phonetic Extensions"](o)||Ot.Katakana(o)&&o!==12540||!(!Ot["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Ot["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Ot["Unified Canadian Aboriginal Syllabics"](o)||Ot["Unified Canadian Aboriginal Syllabics Extended"](o)||Ot["Vertical Forms"](o)||Ot["Yijing Hexagram Symbols"](o)||Ot["Yi Syllables"](o)||Ot["Yi Radicals"](o))))}function Kd(o){return!(Vh(o)||function(n){return!!(Ot["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Ot["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Ot["Letterlike Symbols"](n)||Ot["Number Forms"](n)||Ot["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Ot["Control Pictures"](n)&&n!==9251||Ot["Optical Character Recognition"](n)||Ot["Enclosed Alphanumerics"](n)||Ot["Geometric Shapes"](n)||Ot["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Ot["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Ot["CJK Symbols and Punctuation"](n)||Ot.Katakana(n)||Ot["Private Use Area"](n)||Ot["CJK Compatibility Forms"](n)||Ot["Small Form Variants"](n)||Ot["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function Yd(o){return o>=1424&&o<=2303||Ot["Arabic Presentation Forms-A"](o)||Ot["Arabic Presentation Forms-B"](o)}function Jd(o,n){return!(!n&&Yd(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Ot.Khmer(o))}function uy(o){for(const n of o)if(Yd(n.charCodeAt(0)))return!0;return!1}const Gh="deferred",Zh="loading",Hh="loaded";let Wh=null,Bi="unavailable",ea=null;const Mu=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Bi="error"),Wh&&Wh(o)};function Xh(){Lu.fire(new yn("pluginStateChange",{pluginStatus:Bi,pluginURL:ea}))}const Lu=new gn,qh=function(){return Bi},Qd=function(){if(Bi!==Gh||!ea)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Bi=Zh,Xh(),ea&&Gt({url:ea},o=>{o?Mu(o):(Bi=Hh,Xh())})},to={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Bi===Hh||to.applyArabicShaping!=null,isLoading:()=>Bi===Zh,setState(o){if(!te())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Bi=o.pluginStatus,ea=o.pluginURL},isParsed(){if(!te())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return to.applyArabicShaping!=null&&to.processBidirectionalText!=null&&to.processStyledBidirectionalText!=null},getPluginURL(){if(!te())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ea}};class lr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qd,this.transition={})}isSupportedScript(n){return function(s,h){for(const p of s)if(!Jd(p.charCodeAt(0),h))return!1;return!0}(n,to.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class Sc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,p){if(Jn(h))return new qo(h,p);if(xl(h)){const v=bl(h,p);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return p.type==="color"&&typeof h=="string"?v=Gn.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=Fi.parse(h)):v=Si.parse(h),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Kh{constructor(n){this.property=n,this.value=new Sc(n,void 0)}transitioned(n,s){return new tp(this.property,this.value,s,F({},n.transition,this.transition),n.now)}untransitioned(){return new tp(this.property,this.value,null,{},0)}}class ep{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return _e(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Kh(this._values[n].property)),this._values[n].value=new Sc(this._values[n].property,s===null?void 0:_e(s))}getTransition(n){return _e(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Kh(this._values[n].property)),this._values[n].transition=_e(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const p=this.getTransition(s);p!==void 0&&(n[`${s}-transition`]=p)}return n}transitioned(n,s){const h=new np(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,s._values[p]);return h}untransitioned(){const n=new np(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class tp{constructor(n,s,h,p,v){this.property=n,this.value=s,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const p=n.now||0,v=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return x.possiblyEvaluate(n,s,h);{const E=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),v,function(P){if(P<=0)return 0;if(P>=1)return 1;const z=P*P,W=z*P;return 4*(P<.5?W:3*(P-z)+W-.75)}(E))}}return v}}class np{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const p=new Ec(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class cy{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return _e(this._values[n].value)}setValue(n,s){this._values[n]=new Sc(this._values[n].property,s===null?void 0:_e(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const p=new Ec(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}}class Ti{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,p){return this.property.evaluate(this.value,this.parameters,n,s,h,p)}}class Ec{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class qt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const p=Ei[this.specification.type];return p?p(n,s,h):n}}class an{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,p){return new Ti(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,p)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Ti(this,{kind:"constant",value:void 0},n.parameters);const p=Ei[this.specification.type];if(p){const v=p(n.value.value,s.value.value,h);return new Ti(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,h,p,v,x){return n.kind==="constant"?n.value:n.evaluate(s,h,p,v,x)}}class zu extends an{possiblyEvaluate(n,s,h,p){if(n.value===void 0)return new Ti(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,E=this._calculate(x,x,x,s);return new Ti(this,{kind:"constant",value:E},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Ti(this,{kind:"constant",value:v},s)}return new Ti(this,n.expression,s)}evaluate(n,s,h,p,v,x){if(n.kind==="source"){const E=n.evaluate(s,h,p,v,x);return this._calculate(E,E,E,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,p),n.evaluate({zoom:Math.floor(s.zoom)},h,p),n.evaluate({zoom:Math.floor(s.zoom)+1},h,p),s):n.value}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Yh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new lr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new lr(Math.floor(s.zoom),s)),n.expression.evaluate(new lr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Jh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){return!!n.expression.evaluate(s,null,{},h,p)}interpolate(){return!1}}class Ir{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new Sc(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new Kh(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}Bt("DataDrivenProperty",an),Bt("DataConstantProperty",qt),Bt("CrossFadedDataDrivenProperty",zu),Bt("CrossFadedProperty",Yh),Bt("ColorRampProperty",Jh);const Qh="-transition";class _o extends gn{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new cy(s.layout)),s.paint)){this._transitionablePaint=new ep(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ec(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(Qo,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(Qh)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(eo,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(Qh))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[n],v=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),E=p.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const P=this._transitionablePaint._values[n].value;return P.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,E,P)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Y(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,p,v={}){return(!v||v.validate!==!1)&&Pa(this,n.call(tr,{key:s,layerType:this.type,objectKey:h,value:p,styleSpec:ie,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Ti&&Xs(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const rp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ka{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class gr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function pr(o,n=1){let s=0,h=0;return{members:o.map(p=>{const v=rp[p.type].BYTES_PER_ELEMENT,x=s=Cl(s,Math.max(n,v)),E=p.components||1;return h=Math.max(h,v),s+=v*E,{name:p.name,type:p.type,components:E,offset:x}}),size:Cl(s,Math.max(h,n)),alignment:n}}function Cl(o,n){return Math.ceil(o/n)*n}class Ou extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.int16[p+0]=s,this.int16[p+1]=h,n}}Ou.prototype.bytesPerElement=4,Bt("StructArrayLayout2i4",Ou);class Fu extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=p,n}}Fu.prototype.bytesPerElement=6,Bt("StructArrayLayout3i6",Fu);class Ma extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=v,n}}Ma.prototype.bytesPerElement=8,Bt("StructArrayLayout4i8",Ma);class ef extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const E=this.length;return this.resize(E+1),this.emplace(E,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,E){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=E,n}}ef.prototype.bytesPerElement=12,Bt("StructArrayLayout2i4i12",ef);class tf extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const E=this.length;return this.resize(E+1),this.emplace(E,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,E){const P=4*n,z=8*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.uint8[z+4]=p,this.uint8[z+5]=v,this.uint8[z+6]=x,this.uint8[z+7]=E,n}}tf.prototype.bytesPerElement=8,Bt("StructArrayLayout2i4ub8",tf);class Il extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.float32[p+0]=s,this.float32[p+1]=h,n}}Il.prototype.bytesPerElement=8,Bt("StructArrayLayout2f8",Il);class nf extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,E,P,z,W){const ee=this.length;return this.resize(ee+1),this.emplace(ee,n,s,h,p,v,x,E,P,z,W)}emplace(n,s,h,p,v,x,E,P,z,W,ee){const ae=10*n;return this.uint16[ae+0]=s,this.uint16[ae+1]=h,this.uint16[ae+2]=p,this.uint16[ae+3]=v,this.uint16[ae+4]=x,this.uint16[ae+5]=E,this.uint16[ae+6]=P,this.uint16[ae+7]=z,this.uint16[ae+8]=W,this.uint16[ae+9]=ee,n}}nf.prototype.bytesPerElement=20,Bt("StructArrayLayout10ui20",nf);class rf extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,E,P,z,W,ee,ae){const me=this.length;return this.resize(me+1),this.emplace(me,n,s,h,p,v,x,E,P,z,W,ee,ae)}emplace(n,s,h,p,v,x,E,P,z,W,ee,ae,me){const ye=12*n;return this.int16[ye+0]=s,this.int16[ye+1]=h,this.int16[ye+2]=p,this.int16[ye+3]=v,this.uint16[ye+4]=x,this.uint16[ye+5]=E,this.uint16[ye+6]=P,this.uint16[ye+7]=z,this.int16[ye+8]=W,this.int16[ye+9]=ee,this.int16[ye+10]=ae,this.int16[ye+11]=me,n}}rf.prototype.bytesPerElement=24,Bt("StructArrayLayout4i4ui4i24",rf);class $n extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}$n.prototype.bytesPerElement=12,Bt("StructArrayLayout3f12",$n);class y extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}y.prototype.bytesPerElement=4,Bt("StructArrayLayout1ul4",y);class r extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,E,P,z){const W=this.length;return this.resize(W+1),this.emplace(W,n,s,h,p,v,x,E,P,z)}emplace(n,s,h,p,v,x,E,P,z,W){const ee=10*n,ae=5*n;return this.int16[ee+0]=s,this.int16[ee+1]=h,this.int16[ee+2]=p,this.int16[ee+3]=v,this.int16[ee+4]=x,this.int16[ee+5]=E,this.uint32[ae+3]=P,this.uint16[ee+8]=z,this.uint16[ee+9]=W,n}}r.prototype.bytesPerElement=20,Bt("StructArrayLayout6i1ul2ui20",r);class u extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const E=this.length;return this.resize(E+1),this.emplace(E,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,E){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=E,n}}u.prototype.bytesPerElement=12,Bt("StructArrayLayout2i2i2i12",u);class f extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,p,v)}emplace(n,s,h,p,v,x){const E=4*n,P=8*n;return this.float32[E+0]=s,this.float32[E+1]=h,this.float32[E+2]=p,this.int16[P+6]=v,this.int16[P+7]=x,n}}f.prototype.bytesPerElement=16,Bt("StructArrayLayout2f1f2i16",f);class m extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=12*n,E=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=h,this.float32[E+1]=p,this.float32[E+2]=v,n}}m.prototype.bytesPerElement=12,Bt("StructArrayLayout2ub2f12",m);class _ extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=p,n}}_.prototype.bytesPerElement=6,Bt("StructArrayLayout3ui6",_);class T extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,E,P,z,W,ee,ae,me,ye,Pe,Re,Ne){const Je=this.length;return this.resize(Je+1),this.emplace(Je,n,s,h,p,v,x,E,P,z,W,ee,ae,me,ye,Pe,Re,Ne)}emplace(n,s,h,p,v,x,E,P,z,W,ee,ae,me,ye,Pe,Re,Ne,Je){const Xe=24*n,Qe=12*n,rt=48*n;return this.int16[Xe+0]=s,this.int16[Xe+1]=h,this.uint16[Xe+2]=p,this.uint16[Xe+3]=v,this.uint32[Qe+2]=x,this.uint32[Qe+3]=E,this.uint32[Qe+4]=P,this.uint16[Xe+10]=z,this.uint16[Xe+11]=W,this.uint16[Xe+12]=ee,this.float32[Qe+7]=ae,this.float32[Qe+8]=me,this.uint8[rt+36]=ye,this.uint8[rt+37]=Pe,this.uint8[rt+38]=Re,this.uint32[Qe+10]=Ne,this.int16[Xe+22]=Je,n}}T.prototype.bytesPerElement=48,Bt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",T);class I extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,E,P,z,W,ee,ae,me,ye,Pe,Re,Ne,Je,Xe,Qe,rt,gt,Ft,Vt,zt,Mt,Ct,Nt){const Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,n,s,h,p,v,x,E,P,z,W,ee,ae,me,ye,Pe,Re,Ne,Je,Xe,Qe,rt,gt,Ft,Vt,zt,Mt,Ct,Nt)}emplace(n,s,h,p,v,x,E,P,z,W,ee,ae,me,ye,Pe,Re,Ne,Je,Xe,Qe,rt,gt,Ft,Vt,zt,Mt,Ct,Nt,Pt){const bt=32*n,tn=16*n;return this.int16[bt+0]=s,this.int16[bt+1]=h,this.int16[bt+2]=p,this.int16[bt+3]=v,this.int16[bt+4]=x,this.int16[bt+5]=E,this.int16[bt+6]=P,this.int16[bt+7]=z,this.uint16[bt+8]=W,this.uint16[bt+9]=ee,this.uint16[bt+10]=ae,this.uint16[bt+11]=me,this.uint16[bt+12]=ye,this.uint16[bt+13]=Pe,this.uint16[bt+14]=Re,this.uint16[bt+15]=Ne,this.uint16[bt+16]=Je,this.uint16[bt+17]=Xe,this.uint16[bt+18]=Qe,this.uint16[bt+19]=rt,this.uint16[bt+20]=gt,this.uint16[bt+21]=Ft,this.uint16[bt+22]=Vt,this.uint32[tn+12]=zt,this.float32[tn+13]=Mt,this.float32[tn+14]=Ct,this.uint16[bt+30]=Nt,this.uint16[bt+31]=Pt,n}}I.prototype.bytesPerElement=64,Bt("StructArrayLayout8i15ui1ul2f2ui64",I);class M extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}M.prototype.bytesPerElement=4,Bt("StructArrayLayout1f4",M);class $ extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}$.prototype.bytesPerElement=12,Bt("StructArrayLayout1ui2f12",$);class q extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=p,n}}q.prototype.bytesPerElement=8,Bt("StructArrayLayout1ul2ui8",q);class J extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.uint16[p+0]=s,this.uint16[p+1]=h,n}}J.prototype.bytesPerElement=4,Bt("StructArrayLayout2ui4",J);class fe extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}fe.prototype.bytesPerElement=2,Bt("StructArrayLayout1ui2",fe);class Me extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=v,n}}Me.prototype.bytesPerElement=16,Bt("StructArrayLayout4f16",Me);class ke extends ka{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}ke.prototype.size=20;class Oe extends r{get(n){return new ke(this,n)}}Bt("CollisionBoxArray",Oe);class Ae extends ka{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ae.prototype.size=48;class Ke extends T{get(n){return new Ae(this,n)}}Bt("PlacedSymbolArray",Ke);class tt extends ka{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}tt.prototype.size=64;class De extends I{get(n){return new tt(this,n)}}Bt("SymbolInstanceArray",De);class Ye extends M{getoffsetX(n){return this.float32[1*n+0]}}Bt("GlyphOffsetArray",Ye);class ot extends Fu{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Bt("SymbolLineVertexArray",ot);class st extends ka{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}st.prototype.size=12;class dt extends ${get(n){return new st(this,n)}}Bt("TextAnchorOffsetArray",dt);class wt extends ka{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}wt.prototype.size=8;class xt extends q{get(n){return new wt(this,n)}}Bt("FeatureIndexArray",xt);class Et extends Ou{}class $t extends Ou{}class Pn extends Ou{}class kt extends ef{}class ln extends tf{}class Ht extends Il{}class Xn extends nf{}class An extends rf{}class _n extends $n{}class kn extends y{}class Sr extends u{}class nr extends m{}class si extends _{}class Zr extends J{}const Ar=pr([{name:"a_pos",components:2,type:"Int16"}],4),{members:no}=Ar;class ur{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,p){let v=this.segments[this.segments.length-1];return n>ur.MAX_VERTEX_ARRAY_LENGTH&&pe(`Max vertices per segment is ${ur.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>ur.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,p){return new ur([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function es(o,n){return 256*(o=V(Math.floor(o),0,255))+V(Math.floor(n),0,255)}ur.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bt("SegmentVector",ur);const ts=pr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ta={exports:{}},La={exports:{}};La.exports=function(o,n){var s,h,p,v,x,E,P,z;for(h=o.length-(s=3&o.length),p=n,x=3432918353,E=461845907,z=0;z<h;)P=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24,++z,p=27492+(65535&(v=5*(65535&(p=(p^=P=(65535&(P=(P=(65535&P)*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*E+(((P>>>16)*E&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(P=0,s){case 3:P^=(255&o.charCodeAt(z+2))<<16;case 2:P^=(255&o.charCodeAt(z+1))<<8;case 1:p^=P=(65535&(P=(P=(65535&(P^=255&o.charCodeAt(z)))*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*E+(((P>>>16)*E&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var Al=La.exports,gi={exports:{}};gi.exports=function(o,n){for(var s,h=o.length,p=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&o.charCodeAt(v+2))<<16;case 2:p^=(255&o.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var ai=Al,Ci=gi.exports;ta.exports=ai,ta.exports.murmur3=ai,ta.exports.murmur2=Ci;var za=w(ta.exports);class Er{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,p){this.ids.push(Hr(n)),this.positions.push(s,h,p)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Hr(n);let h=0,p=this.ids.length-1;for(;h<p;){const x=h+p>>1;this.ids[x]>=s?p=x:h=x+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return Ni(h,p,0,h.length-1),s&&s.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){const s=new Er;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Hr(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:za(String(o))}function Ni(o,n,s,h){for(;s<h;){const p=o[s+h>>1];let v=s-1,x=h+1;for(;;){do v++;while(o[v]<p);do x--;while(o[x]>p);if(v>=x)break;Tr(o,v,x),Tr(n,3*v,3*x),Tr(n,3*v+1,3*x+1),Tr(n,3*v+2,3*x+2)}x-s<h-x?(Ni(o,n,s,x),s=x+1):(Ni(o,n,x+1,h),h=x)}}function Tr(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}Bt("FeaturePositionMap",Er);class Oa{constructor(n,s){this.gl=n.gl,this.location=s}}class Tc extends Oa{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class ip extends Oa{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class op extends Oa{constructor(n,s){super(n,s),this.current=Gn.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const hy=new Float32Array(16);function of(o){return[es(255*o.r,255*o.g),es(255*o.b,255*o.a)]}class ns{constructor(n,s,h){this.value=n,this.uniformNames=s.map(p=>`u_${p}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new op(n,s):new Tc(n,s)}}class Fa{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,p){const v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new ip(n,s):new Tc(n,s)}}class rs{constructor(n,s,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,s,h,p,v){const x=this.paintVertexArray.length,E=this.expression.evaluate(new lr(0),s,{},p,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,E)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const p=of(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=n;p<s;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class xo{constructor(n,s,h,p,v,x){this.expression=n,this.uniformNames=s.map(E=>`u_${E}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(E=>({name:`a_${E}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,p,v){const x=this.expression.evaluate(new lr(this.zoom),s,{},p,[],v),E=this.expression.evaluate(new lr(this.zoom+1),s,{},p,[],v),P=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(P,n,x,E)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:this.zoom},h,p),x=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,s,v,x)}_setPaintValue(n,s,h,p){if(this.type==="color"){const v=of(h),x=of(p);for(let E=n;E<s;E++)this.paintVertexArray.emplace(E,v[0],v[1],x[0],x[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=V(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,s,h){return new Tc(n,s)}}class is{constructor(n,s,h,p,v,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,p,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,p){if(!p||!h)return;const{min:v,mid:x,max:E}=h,P=p[v],z=p[x],W=p[E];if(P&&z&&W)for(let ee=n;ee<s;ee++)this.zoomInPaintVertexArray.emplace(ee,z.tl[0],z.tl[1],z.br[0],z.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],z.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(ee,z.tl[0],z.tl[1],z.br[0],z.br[1],W.tl[0],W.tl[1],W.br[0],W.br[1],z.pixelRatio,W.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,ts.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,ts.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class sf{constructor(n,s,h){this.binders={},this._buffers=[];const p=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof Ti&&Xs(x.property.specification)))continue;const E=kA(v,n.type),P=x.value,z=x.property.specification.type,W=x.property.useIntegerZoom,ee=x.property.specification["property-type"],ae=ee==="cross-faded"||ee==="cross-faded-data-driven";if(P.kind==="constant")this.binders[v]=ae?new Fa(P.value,E):new ns(P.value,E,z),p.push(`/u_${v}`);else if(P.kind==="source"||ae){const me=kx(v,z,"source");this.binders[v]=ae?new is(P,z,W,s,me,n.id):new rs(P,E,z,me),p.push(`/a_${v}`)}else{const me=kx(v,z,"composite");this.binders[v]=new xo(P,E,z,W,s,me),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof rs||s instanceof xo?s.maxValue:0}populatePaintArrays(n,s,h,p,v){for(const x in this.binders){const E=this.binders[x];(E instanceof rs||E instanceof xo||E instanceof is)&&E.populatePaintArray(n,s,h,p,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const p=this.binders[h];p instanceof Fa&&p.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,p,v){let x=!1;for(const E in n){const P=s.getPositions(E);for(const z of P){const W=h.feature(z.index);for(const ee in this.binders){const ae=this.binders[ee];if((ae instanceof rs||ae instanceof xo||ae instanceof is)&&ae.expression.isStateDependent===!0){const me=p.paint.get(ee);ae.expression=me.value,ae.updatePaintArray(z.start,z.end,W,n[E],v),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof ns||h instanceof Fa)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof rs||h instanceof xo)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof is)for(let p=0;p<ts.members.length;p++)n.push(ts.members[p].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof ns||h instanceof Fa||h instanceof xo)for(const p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof ns||v instanceof Fa||v instanceof xo){for(const x of v.uniformNames)if(s[x]){const E=v.getBinding(n,s[x],x);h.push({name:x,property:p,binding:E})}}}return h}setUniforms(n,s,h,p){for(const{name:v,property:x,binding:E}of s)this.binders[x].setUniform(E,p,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof is){const p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof rs||h instanceof xo)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof rs||h instanceof xo||h instanceof is)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof rs||s instanceof xo||s instanceof is)&&s.destroy()}}}class Cs{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new sf(p,s,h);this.needsUpload=!1,this._featureMap=new Er,this._bufferOffset=0}populatePaintArrays(n,s,h,p,v,x){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(n,s,p,v,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,p){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function kA(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function kx(o,n,s){const h={color:{source:Il,composite:Me},number:{source:M,composite:Il}},p=function(v){return{"line-pattern":{source:Xn,composite:Xn},"fill-pattern":{source:Xn,composite:Xn},"fill-extrusion-pattern":{source:Xn,composite:Xn}}[v]}(o);return p&&p[s]||h[n][s]}Bt("ConstantBinder",ns),Bt("CrossFadedConstantBinder",Fa),Bt("SourceExpressionBinder",rs),Bt("CrossFadedCompositeBinder",is),Bt("CompositeExpressionBinder",xo),Bt("ProgramConfiguration",sf,{omit:["_buffers"]}),Bt("ProgramConfigurationSet",Cs);const Fr=8192,fy=Math.pow(2,14)-1,Mx=-fy-1;function Ru(o){const n=Fr/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const p=s[h];for(let v=0;v<p.length;v++){const x=p[v],E=Math.round(x.x*n),P=Math.round(x.y*n);x.x=V(E,Mx,fy),x.y=V(P,Mx,fy),(E<x.x||E>x.x+1||P<x.y||P>x.y+1)&&pe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function ju(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?Ru(o):[]}}function sp(o,n,s,h,p){o.emplaceBack(2*n+(h+1)/2,2*s+(p+1)/2)}class dy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new $t,this.indexArray=new si,this.segments=new ur,this.programConfigurations=new Cs(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const p=this.layers[0],v=[];let x=null,E=!1;p.type==="circle"&&(x=p.layout.get("circle-sort-key"),E=!x.isConstant());for(const{feature:P,id:z,index:W,sourceLayerIndex:ee}of n){const ae=this.layers[0]._featureFilter.needGeometry,me=ju(P,ae);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),me,h))continue;const ye=E?x.evaluate(me,{},h):void 0,Pe={id:z,properties:P.properties,type:P.type,sourceLayerIndex:ee,index:W,geometry:ae?me.geometry:Ru(P),patterns:{},sortKey:ye};v.push(Pe)}E&&v.sort((P,z)=>P.sortKey-z.sortKey);for(const P of v){const{geometry:z,index:W,sourceLayerIndex:ee}=P,ae=n[W].feature;this.addFeature(P,z,W,h),s.featureIndex.insert(ae,z,W,ee,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,no),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,p){for(const v of s)for(const x of v){const E=x.x,P=x.y;if(E<0||E>=Fr||P<0||P>=Fr)continue;const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),W=z.vertexLength;sp(this.layoutVertexArray,E,P,-1,-1),sp(this.layoutVertexArray,E,P,1,-1),sp(this.layoutVertexArray,E,P,1,1),sp(this.layoutVertexArray,E,P,-1,1),this.indexArray.emplaceBack(W,W+1,W+2),this.indexArray.emplaceBack(W,W+3,W+2),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function Lx(o,n){for(let s=0;s<o.length;s++)if(Cc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Cc(o,n[s]))return!0;return!!py(o,n)}function MA(o,n,s){return!!Cc(o,n)||!!my(n,o,s)}function zx(o,n){if(o.length===1)return Fx(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let p=0;p<h.length;p++)if(Cc(o,h[p]))return!0}for(let s=0;s<o.length;s++)if(Fx(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(py(o,n[s]))return!0;return!1}function LA(o,n,s){if(o.length>1){if(py(o,n))return!0;for(let h=0;h<n.length;h++)if(my(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(my(o[h],n,s))return!0;return!1}function py(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],p=o[s+1];for(let v=0;v<n.length-1;v++)if(zA(h,p,n[v],n[v+1]))return!0}return!1}function zA(o,n,s,h){return oe(o,s,h)!==oe(n,s,h)&&oe(o,n,s)!==oe(o,n,h)}function my(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(Ox(o,n[p-1],n[p])<h)return!0;return!1}function Ox(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const p=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(p<0?n:p>1?s:s.sub(n)._mult(p)._add(n))}function Fx(o,n){let s,h,p,v=!1;for(let x=0;x<o.length;x++){s=o[x];for(let E=0,P=s.length-1;E<s.length;P=E++)h=s[E],p=s[P],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function Cc(o,n){let s=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){const v=o[h],x=o[p];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function OA(o,n,s){const h=s[0],p=s[2];if(o.x<h.x&&n.x<h.x||o.x>p.x&&n.x>p.x||o.y<h.y&&n.y<h.y||o.y>p.y&&n.y>p.y)return!1;const v=oe(o,n,s[0]);return v!==oe(o,n,s[1])||v!==oe(o,n,s[2])||v!==oe(o,n,s[3])}function af(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function ap(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function lp(o,n,s,h,p){if(!n[0]&&!n[1])return o;const v=k.convert(n)._mult(p);s==="viewport"&&v._rotate(-h);const x=[];for(let E=0;E<o.length;E++)x.push(o[E].sub(v));return x}let Rx,jx;Bt("CircleBucket",dy,{omit:["layers"]});var FA={get paint(){return jx=jx||new Ir({"circle-radius":new an(ie.paint_circle["circle-radius"]),"circle-color":new an(ie.paint_circle["circle-color"]),"circle-blur":new an(ie.paint_circle["circle-blur"]),"circle-opacity":new an(ie.paint_circle["circle-opacity"]),"circle-translate":new qt(ie.paint_circle["circle-translate"]),"circle-translate-anchor":new qt(ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qt(ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qt(ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new an(ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new an(ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new an(ie.paint_circle["circle-stroke-opacity"])})},get layout(){return Rx=Rx||new Ir({"circle-sort-key":new an(ie.layout_circle["circle-sort-key"])})}},Ui=1e-6,Ic=typeof Float32Array<"u"?Float32Array:Array;function gy(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Dx(o,n,s){var h=n[0],p=n[1],v=n[2],x=n[3],E=n[4],P=n[5],z=n[6],W=n[7],ee=n[8],ae=n[9],me=n[10],ye=n[11],Pe=n[12],Re=n[13],Ne=n[14],Je=n[15],Xe=s[0],Qe=s[1],rt=s[2],gt=s[3];return o[0]=Xe*h+Qe*E+rt*ee+gt*Pe,o[1]=Xe*p+Qe*P+rt*ae+gt*Re,o[2]=Xe*v+Qe*z+rt*me+gt*Ne,o[3]=Xe*x+Qe*W+rt*ye+gt*Je,o[4]=(Xe=s[4])*h+(Qe=s[5])*E+(rt=s[6])*ee+(gt=s[7])*Pe,o[5]=Xe*p+Qe*P+rt*ae+gt*Re,o[6]=Xe*v+Qe*z+rt*me+gt*Ne,o[7]=Xe*x+Qe*W+rt*ye+gt*Je,o[8]=(Xe=s[8])*h+(Qe=s[9])*E+(rt=s[10])*ee+(gt=s[11])*Pe,o[9]=Xe*p+Qe*P+rt*ae+gt*Re,o[10]=Xe*v+Qe*z+rt*me+gt*Ne,o[11]=Xe*x+Qe*W+rt*ye+gt*Je,o[12]=(Xe=s[12])*h+(Qe=s[13])*E+(rt=s[14])*ee+(gt=s[15])*Pe,o[13]=Xe*p+Qe*P+rt*ae+gt*Re,o[14]=Xe*v+Qe*z+rt*me+gt*Ne,o[15]=Xe*x+Qe*W+rt*ye+gt*Je,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var lf,RA=Dx;function up(o,n,s){var h=n[0],p=n[1],v=n[2],x=n[3];return o[0]=s[0]*h+s[4]*p+s[8]*v+s[12]*x,o[1]=s[1]*h+s[5]*p+s[9]*v+s[13]*x,o[2]=s[2]*h+s[6]*p+s[10]*v+s[14]*x,o[3]=s[3]*h+s[7]*p+s[11]*v+s[15]*x,o}lf=new Ic(4),Ic!=Float32Array&&(lf[0]=0,lf[1]=0,lf[2]=0,lf[3]=0);class jA extends _o{constructor(n){super(n,FA)}createBucket(n){return new dy(n)}queryRadius(n){const s=n;return af("circle-radius",this,s)+af("circle-stroke-width",this,s)+ap(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,p,v,x,E,P){const z=lp(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,E),W=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),ee=this.paint.get("circle-pitch-alignment")==="map",ae=ee?z:function(ye,Pe){return ye.map(Re=>Bx(Re,Pe))}(z,P),me=ee?W*E:W;for(const ye of p)for(const Pe of ye){const Re=ee?Pe:Bx(Pe,P);let Ne=me;const Je=up([],[Pe.x,Pe.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ne*=Je[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ne*=x.cameraToCenterDistance/Je[3]),MA(ae,Re,Ne))return!0}return!1}}function Bx(o,n){const s=up([],[o.x,o.y,0,1],n);return new k(s[0]/s[3],s[1]/s[3])}class Nx extends dy{}let Ux;Bt("HeatmapBucket",Nx,{omit:["layers"]});var DA={get paint(){return Ux=Ux||new Ir({"heatmap-radius":new an(ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new an(ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qt(ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Jh(ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qt(ie.paint_heatmap["heatmap-opacity"])})}};function yy(o,{width:n,height:s},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*s*h}`)}else p=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=p,o}function $x(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const p=yy({},{width:n,height:s},h);vy(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=p.data}function vy(o,n,s,h,p,v){if(p.width===0||p.height===0)return n;if(p.width>o.width||p.height>o.height||s.x>o.width-p.width||s.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,E=n.data;if(x===E)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<p.height;P++){const z=((s.y+P)*o.width+s.x)*v,W=((h.y+P)*n.width+h.x)*v;for(let ee=0;ee<p.width*v;ee++)E[W+ee]=x[z+ee]}return n}class uf{constructor(n,s){yy(this,n,1,s)}resize(n){$x(this,n,1)}clone(){return new uf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){vy(n,s,h,p,v,1)}}class Lo{constructor(n,s){yy(this,n,4,s)}resize(n){$x(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Lo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){vy(n,s,h,p,v,4)}}function Vx(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new Lo({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,E,P)=>{n[o.evaluationKey]=P;const z=o.expression.evaluate(n);p.data[x+E+0]=Math.floor(255*z.r/z.a),p.data[x+E+1]=Math.floor(255*z.g/z.a),p.data[x+E+2]=Math.floor(255*z.b/z.a),p.data[x+E+3]=Math.floor(255*z.a)};if(o.clips)for(let x=0,E=0;x<h;++x,E+=4*s)for(let P=0,z=0;P<s;P++,z+=4){const W=P/(s-1),{start:ee,end:ae}=o.clips[x];v(E,z,ee*(1-W)+ae*W)}else for(let x=0,E=0;x<s;x++,E+=4)v(0,E,x/(s-1));return p}Bt("AlphaImage",uf),Bt("RGBAImage",Lo);class BA extends _o{createBucket(n){return new Nx(n)}constructor(n){super(n,DA),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Vx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Gx;var NA={get paint(){return Gx=Gx||new Ir({"hillshade-illumination-direction":new qt(ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qt(ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qt(ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qt(ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qt(ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qt(ie.paint_hillshade["hillshade-accent-color"])})}};class UA extends _o{constructor(n){super(n,NA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const $A=pr([{name:"a_pos",components:2,type:"Int16"}],4),{members:VA}=$A;var _y={exports:{}};function cp(o,n,s){s=s||2;var h,p,v,x,E,P,z,W=n&&n.length,ee=W?n[0]*s:o.length,ae=Zx(o,0,ee,s,!0),me=[];if(!ae||ae.next===ae.prev)return me;if(W&&(ae=function(Pe,Re,Ne,Je){var Xe,Qe,rt,gt=[];for(Xe=0,Qe=Re.length;Xe<Qe;Xe++)(rt=Zx(Pe,Re[Xe]*Je,Xe<Qe-1?Re[Xe+1]*Je:Pe.length,Je,!1))===rt.next&&(rt.steiner=!0),gt.push(YA(rt));for(gt.sort(XA),Xe=0;Xe<gt.length;Xe++)Ne=qA(gt[Xe],Ne);return Ne}(o,n,ae,s)),o.length>80*s){h=v=o[0],p=x=o[1];for(var ye=s;ye<ee;ye+=s)(E=o[ye])<h&&(h=E),(P=o[ye+1])<p&&(p=P),E>v&&(v=E),P>x&&(x=P);z=(z=Math.max(v-h,x-p))!==0?32767/z:0}return cf(ae,me,s,h,p,z,0),me}function Zx(o,n,s,h,p){var v,x;if(p===by(o,n,s,h)>0)for(v=n;v<s;v+=h)x=Xx(v,o[v],o[v+1],x);else for(v=s-h;v>=n;v-=h)x=Xx(v,o[v],o[v+1],x);return x&&hp(x,x.next)&&(ff(x),x=x.next),x}function Du(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!hp(h,h.next)&&Pr(h.prev,h,h.next)!==0)h=h.next;else{if(ff(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function cf(o,n,s,h,p,v,x){if(o){!x&&v&&function(W,ee,ae,me){var ye=W;do ye.z===0&&(ye.z=xy(ye.x,ye.y,ee,ae,me)),ye.prevZ=ye.prev,ye.nextZ=ye.next,ye=ye.next;while(ye!==W);ye.prevZ.nextZ=null,ye.prevZ=null,function(Pe){var Re,Ne,Je,Xe,Qe,rt,gt,Ft,Vt=1;do{for(Ne=Pe,Pe=null,Qe=null,rt=0;Ne;){for(rt++,Je=Ne,gt=0,Re=0;Re<Vt&&(gt++,Je=Je.nextZ);Re++);for(Ft=Vt;gt>0||Ft>0&&Je;)gt!==0&&(Ft===0||!Je||Ne.z<=Je.z)?(Xe=Ne,Ne=Ne.nextZ,gt--):(Xe=Je,Je=Je.nextZ,Ft--),Qe?Qe.nextZ=Xe:Pe=Xe,Xe.prevZ=Qe,Qe=Xe;Ne=Je}Qe.nextZ=null,Vt*=2}while(rt>1)}(ye)}(o,h,p,v);for(var E,P,z=o;o.prev!==o.next;)if(E=o.prev,P=o.next,v?ZA(o,h,p,v):GA(o))n.push(E.i/s|0),n.push(o.i/s|0),n.push(P.i/s|0),ff(o),o=P.next,z=P.next;else if((o=P)===z){x?x===1?cf(o=HA(Du(o),n,s),n,s,h,p,v,2):x===2&&WA(o,n,s,h,p,v):cf(Du(o),n,s,h,p,v,1);break}}}function GA(o){var n=o.prev,s=o,h=o.next;if(Pr(n,s,h)>=0)return!1;for(var p=n.x,v=s.x,x=h.x,E=n.y,P=s.y,z=h.y,W=p<v?p<x?p:x:v<x?v:x,ee=E<P?E<z?E:z:P<z?P:z,ae=p>v?p>x?p:x:v>x?v:x,me=E>P?E>z?E:z:P>z?P:z,ye=h.next;ye!==n;){if(ye.x>=W&&ye.x<=ae&&ye.y>=ee&&ye.y<=me&&Ac(p,E,v,P,x,z,ye.x,ye.y)&&Pr(ye.prev,ye,ye.next)>=0)return!1;ye=ye.next}return!0}function ZA(o,n,s,h){var p=o.prev,v=o,x=o.next;if(Pr(p,v,x)>=0)return!1;for(var E=p.x,P=v.x,z=x.x,W=p.y,ee=v.y,ae=x.y,me=E<P?E<z?E:z:P<z?P:z,ye=W<ee?W<ae?W:ae:ee<ae?ee:ae,Pe=E>P?E>z?E:z:P>z?P:z,Re=W>ee?W>ae?W:ae:ee>ae?ee:ae,Ne=xy(me,ye,n,s,h),Je=xy(Pe,Re,n,s,h),Xe=o.prevZ,Qe=o.nextZ;Xe&&Xe.z>=Ne&&Qe&&Qe.z<=Je;){if(Xe.x>=me&&Xe.x<=Pe&&Xe.y>=ye&&Xe.y<=Re&&Xe!==p&&Xe!==x&&Ac(E,W,P,ee,z,ae,Xe.x,Xe.y)&&Pr(Xe.prev,Xe,Xe.next)>=0||(Xe=Xe.prevZ,Qe.x>=me&&Qe.x<=Pe&&Qe.y>=ye&&Qe.y<=Re&&Qe!==p&&Qe!==x&&Ac(E,W,P,ee,z,ae,Qe.x,Qe.y)&&Pr(Qe.prev,Qe,Qe.next)>=0))return!1;Qe=Qe.nextZ}for(;Xe&&Xe.z>=Ne;){if(Xe.x>=me&&Xe.x<=Pe&&Xe.y>=ye&&Xe.y<=Re&&Xe!==p&&Xe!==x&&Ac(E,W,P,ee,z,ae,Xe.x,Xe.y)&&Pr(Xe.prev,Xe,Xe.next)>=0)return!1;Xe=Xe.prevZ}for(;Qe&&Qe.z<=Je;){if(Qe.x>=me&&Qe.x<=Pe&&Qe.y>=ye&&Qe.y<=Re&&Qe!==p&&Qe!==x&&Ac(E,W,P,ee,z,ae,Qe.x,Qe.y)&&Pr(Qe.prev,Qe,Qe.next)>=0)return!1;Qe=Qe.nextZ}return!0}function HA(o,n,s){var h=o;do{var p=h.prev,v=h.next.next;!hp(p,v)&&Hx(p,h,h.next,v)&&hf(p,v)&&hf(v,p)&&(n.push(p.i/s|0),n.push(h.i/s|0),n.push(v.i/s|0),ff(h),ff(h.next),h=o=v),h=h.next}while(h!==o);return Du(h)}function WA(o,n,s,h,p,v){var x=o;do{for(var E=x.next.next;E!==x.prev;){if(x.i!==E.i&&JA(x,E)){var P=Wx(x,E);return x=Du(x,x.next),P=Du(P,P.next),cf(x,n,s,h,p,v,0),void cf(P,n,s,h,p,v,0)}E=E.next}x=x.next}while(x!==o)}function XA(o,n){return o.x-n.x}function qA(o,n){var s=function(p,v){var x,E=v,P=p.x,z=p.y,W=-1/0;do{if(z<=E.y&&z>=E.next.y&&E.next.y!==E.y){var ee=E.x+(z-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(ee<=P&&ee>W&&(W=ee,x=E.x<E.next.x?E:E.next,ee===P))return x}E=E.next}while(E!==v);if(!x)return null;var ae,me=x,ye=x.x,Pe=x.y,Re=1/0;E=x;do P>=E.x&&E.x>=ye&&P!==E.x&&Ac(z<Pe?P:W,z,ye,Pe,z<Pe?W:P,z,E.x,E.y)&&(ae=Math.abs(z-E.y)/(P-E.x),hf(E,p)&&(ae<Re||ae===Re&&(E.x>x.x||E.x===x.x&&KA(x,E)))&&(x=E,Re=ae)),E=E.next;while(E!==me);return x}(o,n);if(!s)return n;var h=Wx(s,o);return Du(h,h.next),Du(s,s.next)}function KA(o,n){return Pr(o.prev,o,n.prev)<0&&Pr(n.next,o,o.next)<0}function xy(o,n,s,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function YA(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function Ac(o,n,s,h,p,v,x,E){return(p-x)*(n-E)>=(o-x)*(v-E)&&(o-x)*(h-E)>=(s-x)*(n-E)&&(s-x)*(v-E)>=(p-x)*(h-E)}function JA(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==h.i&&p.next.i!==h.i&&Hx(p,p.next,s,h))return!0;p=p.next}while(p!==s);return!1}(o,n)&&(hf(o,n)&&hf(n,o)&&function(s,h){var p=s,v=!1,x=(s.x+h.x)/2,E=(s.y+h.y)/2;do p.y>E!=p.next.y>E&&p.next.y!==p.y&&x<(p.next.x-p.x)*(E-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==s);return v}(o,n)&&(Pr(o.prev,o,n.prev)||Pr(o,n.prev,n))||hp(o,n)&&Pr(o.prev,o,o.next)>0&&Pr(n.prev,n,n.next)>0)}function Pr(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function hp(o,n){return o.x===n.x&&o.y===n.y}function Hx(o,n,s,h){var p=dp(Pr(o,n,s)),v=dp(Pr(o,n,h)),x=dp(Pr(s,h,o)),E=dp(Pr(s,h,n));return p!==v&&x!==E||!(p!==0||!fp(o,s,n))||!(v!==0||!fp(o,h,n))||!(x!==0||!fp(s,o,h))||!(E!==0||!fp(s,n,h))}function fp(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function dp(o){return o>0?1:o<0?-1:0}function hf(o,n){return Pr(o.prev,o,o.next)<0?Pr(o,n,o.next)>=0&&Pr(o,o.prev,n)>=0:Pr(o,n,o.prev)<0||Pr(o,o.next,n)<0}function Wx(o,n){var s=new wy(o.i,o.x,o.y),h=new wy(n.i,n.x,n.y),p=o.next,v=n.prev;return o.next=n,n.prev=o,s.next=p,p.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function Xx(o,n,s,h){var p=new wy(o,n,s);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function ff(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function wy(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function by(o,n,s,h){for(var p=0,v=n,x=s-h;v<s;v+=h)p+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return p}_y.exports=cp,_y.exports.default=cp,cp.deviation=function(o,n,s,h){var p=n&&n.length,v=Math.abs(by(o,0,p?n[0]*s:o.length,s));if(p)for(var x=0,E=n.length;x<E;x++)v-=Math.abs(by(o,n[x]*s,x<E-1?n[x+1]*s:o.length,s));var P=0;for(x=0;x<h.length;x+=3){var z=h[x]*s,W=h[x+1]*s,ee=h[x+2]*s;P+=Math.abs((o[z]-o[ee])*(o[W+1]-o[z+1])-(o[z]-o[W])*(o[ee+1]-o[z+1]))}return v===0&&P===0?0:Math.abs((P-v)/v)},cp.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,p=0;p<o.length;p++){for(var v=0;v<o[p].length;v++)for(var x=0;x<n;x++)s.vertices.push(o[p][v][x]);p>0&&s.holes.push(h+=o[p-1].length)}return s};var qx=w(_y.exports);function QA(o,n,s,h,p){Kx(o,n,s||0,h||o.length-1,p||eP)}function Kx(o,n,s,h,p){for(;h>s;){if(h-s>600){var v=h-s+1,x=n-s+1,E=Math.log(v),P=.5*Math.exp(2*E/3),z=.5*Math.sqrt(E*P*(v-P)/v)*(x-v/2<0?-1:1);Kx(o,n,Math.max(s,Math.floor(n-x*P/v+z)),Math.min(h,Math.floor(n+(v-x)*P/v+z)),p)}var W=o[n],ee=s,ae=h;for(df(o,s,n),p(o[h],W)>0&&df(o,s,h);ee<ae;){for(df(o,ee,ae),ee++,ae--;p(o[ee],W)<0;)ee++;for(;p(o[ae],W)>0;)ae--}p(o[s],W)===0?df(o,s,ae):df(o,++ae,h),ae<=n&&(s=ae+1),n<=ae&&(h=ae-1)}}function df(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function eP(o,n){return o<n?-1:o>n?1:0}function Sy(o,n){const s=o.length;if(s<=1)return[o];const h=[];let p,v;for(let x=0;x<s;x++){const E=ue(o[x]);E!==0&&(o[x].area=Math.abs(E),v===void 0&&(v=E<0),v===E<0?(p&&h.push(p),p=[o[x]]):p.push(o[x]))}if(p&&h.push(p),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(QA(h[x],n,1,h[x].length-1,tP),h[x]=h[x].slice(0,n));return h}function tP(o,n){return n.area-o.area}function Ey(o,n,s){const h=s.patternDependencies;let p=!1;for(const v of n){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(p=!0);const E=x.constantOr(null);E&&(p=!0,h[E.to]=!0,h[E.from]=!0)}return p}function Ty(o,n,s,h,p){const v=p.patternDependencies;for(const x of n){const E=x.paint.get(`${o}-pattern`).value;if(E.kind!=="constant"){let P=E.evaluate({zoom:h-1},s,{},p.availableImages),z=E.evaluate({zoom:h},s,{},p.availableImages),W=E.evaluate({zoom:h+1},s,{},p.availableImages);P=P&&P.name?P.name:P,z=z&&z.name?z.name:z,W=W&&W.name?W.name:W,v[P]=!0,v[z]=!0,v[W]=!0,s.patterns[x.id]={min:P,mid:z,max:W}}}return s}class Cy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pn,this.indexArray=new si,this.indexArray2=new Zr,this.programConfigurations=new Cs(n.layers,n.zoom),this.segments=new ur,this.segments2=new ur,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Ey("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),x=[];for(const{feature:E,id:P,index:z,sourceLayerIndex:W}of n){const ee=this.layers[0]._featureFilter.needGeometry,ae=ju(E,ee);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),ae,h))continue;const me=v?p.evaluate(ae,{},h,s.availableImages):void 0,ye={id:P,properties:E.properties,type:E.type,sourceLayerIndex:W,index:z,geometry:ee?ae.geometry:Ru(E),patterns:{},sortKey:me};x.push(ye)}v&&x.sort((E,P)=>E.sortKey-P.sortKey);for(const E of x){const{geometry:P,index:z,sourceLayerIndex:W}=E;if(this.hasPattern){const ee=Ty("fill",this.layers,E,this.zoom,s);this.patternFeatures.push(ee)}else this.addFeature(E,P,z,h,{});s.featureIndex.insert(n[z].feature,P,z,W,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,VA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,p,v){for(const x of Sy(s,500)){let E=0;for(const me of x)E+=me.length;const P=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),z=P.vertexLength,W=[],ee=[];for(const me of x){if(me.length===0)continue;me!==x[0]&&ee.push(W.length/2);const ye=this.segments2.prepareSegment(me.length,this.layoutVertexArray,this.indexArray2),Pe=ye.vertexLength;this.layoutVertexArray.emplaceBack(me[0].x,me[0].y),this.indexArray2.emplaceBack(Pe+me.length-1,Pe),W.push(me[0].x),W.push(me[0].y);for(let Re=1;Re<me.length;Re++)this.layoutVertexArray.emplaceBack(me[Re].x,me[Re].y),this.indexArray2.emplaceBack(Pe+Re-1,Pe+Re),W.push(me[Re].x),W.push(me[Re].y);ye.vertexLength+=me.length,ye.primitiveLength+=me.length}const ae=qx(W,ee);for(let me=0;me<ae.length;me+=3)this.indexArray.emplaceBack(z+ae[me],z+ae[me+1],z+ae[me+2]);P.vertexLength+=E,P.primitiveLength+=ae.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}let Yx,Jx;Bt("FillBucket",Cy,{omit:["layers","patternFeatures"]});var nP={get paint(){return Jx=Jx||new Ir({"fill-antialias":new qt(ie.paint_fill["fill-antialias"]),"fill-opacity":new an(ie.paint_fill["fill-opacity"]),"fill-color":new an(ie.paint_fill["fill-color"]),"fill-outline-color":new an(ie.paint_fill["fill-outline-color"]),"fill-translate":new qt(ie.paint_fill["fill-translate"]),"fill-translate-anchor":new qt(ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new zu(ie.paint_fill["fill-pattern"])})},get layout(){return Yx=Yx||new Ir({"fill-sort-key":new an(ie.layout_fill["fill-sort-key"])})}};class rP extends _o{constructor(n){super(n,nP)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Cy(n)}queryRadius(){return ap(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,p,v,x,E){return zx(lp(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,E),p)}isTileClipped(){return!0}}const iP=pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),oP=pr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:sP}=iP;var Pl={},aP=A,Qx=Pc;function Pc(o,n,s,h,p){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields(lP,this,n)}function lP(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=p._keys[h.readVarint()],E=p._values[h.readVarint()];p.properties[x]=E}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function uP(o){for(var n,s,h=0,p=0,v=o.length,x=v-1;p<v;x=p++)h+=((s=o[x]).x-(n=o[p]).x)*(n.y+s.y);return h}Pc.types=["Unknown","Point","LineString","Polygon"],Pc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,p=0,v=0,x=0,E=[];o.pos<s;){if(p<=0){var P=o.readVarint();h=7&P,p=P>>3}if(p--,h===1||h===2)v+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&E.push(n),n=[]),n.push(new aP(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&E.push(n),E},Pc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,p=0,v=0,x=1/0,E=-1/0,P=1/0,z=-1/0;o.pos<n;){if(h<=0){var W=o.readVarint();s=7&W,h=W>>3}if(h--,s===1||s===2)(p+=o.readSVarint())<x&&(x=p),p>E&&(E=p),(v+=o.readSVarint())<P&&(P=v),v>z&&(z=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,P,E,z]},Pc.prototype.toGeoJSON=function(o,n,s){var h,p,v=this.extent*Math.pow(2,s),x=this.extent*o,E=this.extent*n,P=this.loadGeometry(),z=Pc.types[this.type];function W(me){for(var ye=0;ye<me.length;ye++){var Pe=me[ye];me[ye]=[360*(Pe.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pe.y+E)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var ee=[];for(h=0;h<P.length;h++)ee[h]=P[h][0];W(P=ee);break;case 2:for(h=0;h<P.length;h++)W(P[h]);break;case 3:for(P=function(me){var ye=me.length;if(ye<=1)return[me];for(var Pe,Re,Ne=[],Je=0;Je<ye;Je++){var Xe=uP(me[Je]);Xe!==0&&(Re===void 0&&(Re=Xe<0),Re===Xe<0?(Pe&&Ne.push(Pe),Pe=[me[Je]]):Pe.push(me[Je]))}return Pe&&Ne.push(Pe),Ne}(P),h=0;h<P.length;h++)for(p=0;p<P[h].length;p++)W(P[h][p])}P.length===1?P=P[0]:z="Multi"+z;var ae={type:"Feature",geometry:{type:z,coordinates:P},properties:this.properties};return"id"in this&&(ae.id=this.id),ae};var cP=Qx,ew=tw;function tw(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(hP,this,n),this.length=this._features.length}function hP(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return p}(s))}tw.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new cP(this._pbf,n,this.extent,this._keys,this._values)};var fP=ew;function dP(o,n,s){if(o===3){var h=new fP(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Pl.VectorTile=function(o,n){this.layers=o.readFields(dP,{},n)},Pl.VectorTileFeature=Qx,Pl.VectorTileLayer=ew;const pP=Pl.VectorTileFeature.types,Iy=Math.pow(2,13);function pf(o,n,s,h,p,v,x,E){o.emplaceBack(n,s,2*Math.floor(h*Iy)+x,p*Iy*2,v*Iy*2,Math.round(E))}class Ay{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new kt,this.centroidVertexArray=new Et,this.indexArray=new si,this.programConfigurations=new Cs(n.layers,n.zoom),this.segments=new ur,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=Ey("fill-extrusion",this.layers,s);for(const{feature:p,id:v,index:x,sourceLayerIndex:E}of n){const P=this.layers[0]._featureFilter.needGeometry,z=ju(p,P);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),z,h))continue;const W={id:v,sourceLayerIndex:E,index:x,geometry:P?z.geometry:Ru(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(Ty("fill-extrusion",this.layers,W,this.zoom,s)):this.addFeature(W,W.geometry,x,h,{}),s.featureIndex.insert(p,W.geometry,x,E,this.index,!0)}}addFeatures(n,s,h){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,sP),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,oP.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,p,v){const x={x:0,y:0,vertexCount:0};for(const E of Sy(s,500)){let P=0;for(const ye of E)P+=ye.length;let z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ye of E){if(ye.length===0||gP(ye))continue;let Pe=0;for(let Re=0;Re<ye.length;Re++){const Ne=ye[Re];if(Re>=1){const Je=ye[Re-1];if(!mP(Ne,Je)){z.vertexLength+4>ur.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Xe=Ne.sub(Je)._perp()._unit(),Qe=Je.dist(Ne);Pe+Qe>32768&&(Pe=0),pf(this.layoutVertexArray,Ne.x,Ne.y,Xe.x,Xe.y,0,0,Pe),pf(this.layoutVertexArray,Ne.x,Ne.y,Xe.x,Xe.y,0,1,Pe),x.x+=2*Ne.x,x.y+=2*Ne.y,x.vertexCount+=2,Pe+=Qe,pf(this.layoutVertexArray,Je.x,Je.y,Xe.x,Xe.y,0,0,Pe),pf(this.layoutVertexArray,Je.x,Je.y,Xe.x,Xe.y,0,1,Pe),x.x+=2*Je.x,x.y+=2*Je.y,x.vertexCount+=2;const rt=z.vertexLength;this.indexArray.emplaceBack(rt,rt+2,rt+1),this.indexArray.emplaceBack(rt+1,rt+2,rt+3),z.vertexLength+=4,z.primitiveLength+=2}}}}if(z.vertexLength+P>ur.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),pP[n.type]!=="Polygon")continue;const W=[],ee=[],ae=z.vertexLength;for(const ye of E)if(ye.length!==0){ye!==E[0]&&ee.push(W.length/2);for(let Pe=0;Pe<ye.length;Pe++){const Re=ye[Pe];pf(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),x.x+=Re.x,x.y+=Re.y,x.vertexCount+=1,W.push(Re.x),W.push(Re.y)}}const me=qx(W,ee);for(let ye=0;ye<me.length;ye+=3)this.indexArray.emplaceBack(ae+me[ye],ae+me[ye+2],ae+me[ye+1]);z.primitiveLength+=me.length/3,z.vertexLength+=P}for(let E=0;E<x.vertexCount;E++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}function mP(o,n){return o.x===n.x&&(o.x<0||o.x>Fr)||o.y===n.y&&(o.y<0||o.y>Fr)}function gP(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Fr)||o.every(n=>n.y<0)||o.every(n=>n.y>Fr)}let nw;Bt("FillExtrusionBucket",Ay,{omit:["layers","features"]});var yP={get paint(){return nw=nw||new Ir({"fill-extrusion-opacity":new qt(ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new an(ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qt(ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qt(ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new zu(ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new an(ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new an(ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qt(ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class vP extends _o{constructor(n){super(n,yP)}createBucket(n){return new Ay(n)}queryRadius(){return ap(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,p,v,x,E,P){const z=lp(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,E),W=this.paint.get("fill-extrusion-height").evaluate(s,h),ee=this.paint.get("fill-extrusion-base").evaluate(s,h),ae=function(ye,Pe,Re,Ne){const Je=[];for(const Xe of ye){const Qe=[Xe.x,Xe.y,0,1];up(Qe,Qe,Pe),Je.push(new k(Qe[0]/Qe[3],Qe[1]/Qe[3]))}return Je}(z,P),me=function(ye,Pe,Re,Ne){const Je=[],Xe=[],Qe=Ne[8]*Pe,rt=Ne[9]*Pe,gt=Ne[10]*Pe,Ft=Ne[11]*Pe,Vt=Ne[8]*Re,zt=Ne[9]*Re,Mt=Ne[10]*Re,Ct=Ne[11]*Re;for(const Nt of ye){const Pt=[],bt=[];for(const tn of Nt){const Wt=tn.x,Cn=tn.y,cr=Ne[0]*Wt+Ne[4]*Cn+Ne[12],fr=Ne[1]*Wt+Ne[5]*Cn+Ne[13],Xr=Ne[2]*Wt+Ne[6]*Cn+Ne[14],wo=Ne[3]*Wt+Ne[7]*Cn+Ne[15],$i=Xr+gt,Rr=wo+Ft,li=cr+Vt,vi=fr+zt,Vi=Xr+Mt,Gi=wo+Ct,qr=new k((cr+Qe)/Rr,(fr+rt)/Rr);qr.z=$i/Rr,Pt.push(qr);const Kr=new k(li/Gi,vi/Gi);Kr.z=Vi/Gi,bt.push(Kr)}Je.push(Pt),Xe.push(bt)}return[Je,Xe]}(p,ee,W,P);return function(ye,Pe,Re){let Ne=1/0;zx(Re,Pe)&&(Ne=rw(Re,Pe[0]));for(let Je=0;Je<Pe.length;Je++){const Xe=Pe[Je],Qe=ye[Je];for(let rt=0;rt<Xe.length-1;rt++){const gt=Xe[rt],Ft=[gt,Xe[rt+1],Qe[rt+1],Qe[rt],gt];Lx(Re,Ft)&&(Ne=Math.min(Ne,rw(Re,Ft)))}}return Ne!==1/0&&Ne}(me[0],me[1],ae)}}function mf(o,n){return o.x*n.x+o.y*n.y}function rw(o,n){if(o.length===1){let s=0;const h=n[s++];let p;for(;!p||h.equals(p);)if(p=n[s++],!p)return 1/0;for(;s<n.length;s++){const v=n[s],x=o[0],E=p.sub(h),P=v.sub(h),z=x.sub(h),W=mf(E,E),ee=mf(E,P),ae=mf(P,P),me=mf(z,E),ye=mf(z,P),Pe=W*ae-ee*ee,Re=(ae*me-ee*ye)/Pe,Ne=(W*ye-ee*me)/Pe,Je=h.z*(1-Re-Ne)+p.z*Re+v.z*Ne;if(isFinite(Je))return Je}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const _P=pr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:xP}=_P,wP=pr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:bP}=wP,SP=Pl.VectorTileFeature.types,EP=Math.cos(Math.PI/180*37.5),iw=Math.pow(2,14)/.5;class Py{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new ln,this.layoutVertexArray2=new Ht,this.indexArray=new si,this.programConfigurations=new Cs(n.layers,n.zoom),this.segments=new ur,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Ey("line",this.layers,s);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),x=[];for(const{feature:E,id:P,index:z,sourceLayerIndex:W}of n){const ee=this.layers[0]._featureFilter.needGeometry,ae=ju(E,ee);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),ae,h))continue;const me=v?p.evaluate(ae,{},h):void 0,ye={id:P,properties:E.properties,type:E.type,sourceLayerIndex:W,index:z,geometry:ee?ae.geometry:Ru(E),patterns:{},sortKey:me};x.push(ye)}v&&x.sort((E,P)=>E.sortKey-P.sortKey);for(const E of x){const{geometry:P,index:z,sourceLayerIndex:W}=E;if(this.hasPattern){const ee=Ty("line",this.layers,E,this.zoom,s);this.patternFeatures.push(ee)}else this.addFeature(E,P,z,h,{});s.featureIndex.insert(n[z].feature,P,z,W,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,bP)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,xP),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,p,v){const x=this.layers[0].layout,E=x.get("line-join").evaluate(n,{}),P=x.get("line-cap"),z=x.get("line-miter-limit"),W=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const ee of s)this.addLine(ee,n,E,P,z,W);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}addLine(n,s,h,p,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ne=0;Ne<n.length-1;Ne++)this.totalDistance+=n[Ne].dist(n[Ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=SP[s.type]==="Polygon";let P=n.length;for(;P>=2&&n[P-1].equals(n[P-2]);)P--;let z=0;for(;z<P-1&&n[z].equals(n[z+1]);)z++;if(P<(E?3:2))return;h==="bevel"&&(v=1.05);const W=this.overscaling<=16?15*Fr/(512*this.overscaling):0,ee=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let ae,me,ye,Pe,Re;this.e1=this.e2=-1,E&&(ae=n[P-2],Re=n[z].sub(ae)._unit()._perp());for(let Ne=z;Ne<P;Ne++){if(ye=Ne===P-1?E?n[z+1]:void 0:n[Ne+1],ye&&n[Ne].equals(ye))continue;Re&&(Pe=Re),ae&&(me=ae),ae=n[Ne],Re=ye?ye.sub(ae)._unit()._perp():Pe,Pe=Pe||Re;let Je=Pe.add(Re);Je.x===0&&Je.y===0||Je._unit();const Xe=Pe.x*Re.x+Pe.y*Re.y,Qe=Je.x*Re.x+Je.y*Re.y,rt=Qe!==0?1/Qe:1/0,gt=2*Math.sqrt(2-2*Qe),Ft=Qe<EP&&me&&ye,Vt=Pe.x*Re.y-Pe.y*Re.x>0;if(Ft&&Ne>z){const Ct=ae.dist(me);if(Ct>2*W){const Nt=ae.sub(ae.sub(me)._mult(W/Ct)._round());this.updateDistance(me,Nt),this.addCurrentVertex(Nt,Pe,0,0,ee),me=Nt}}const zt=me&&ye;let Mt=zt?h:E?"butt":p;if(zt&&Mt==="round"&&(rt<x?Mt="miter":rt<=2&&(Mt="fakeround")),Mt==="miter"&&rt>v&&(Mt="bevel"),Mt==="bevel"&&(rt>2&&(Mt="flipbevel"),rt<v&&(Mt="miter")),me&&this.updateDistance(me,ae),Mt==="miter")Je._mult(rt),this.addCurrentVertex(ae,Je,0,0,ee);else if(Mt==="flipbevel"){if(rt>100)Je=Re.mult(-1);else{const Ct=rt*Pe.add(Re).mag()/Pe.sub(Re).mag();Je._perp()._mult(Ct*(Vt?-1:1))}this.addCurrentVertex(ae,Je,0,0,ee),this.addCurrentVertex(ae,Je.mult(-1),0,0,ee)}else if(Mt==="bevel"||Mt==="fakeround"){const Ct=-Math.sqrt(rt*rt-1),Nt=Vt?Ct:0,Pt=Vt?0:Ct;if(me&&this.addCurrentVertex(ae,Pe,Nt,Pt,ee),Mt==="fakeround"){const bt=Math.round(180*gt/Math.PI/20);for(let tn=1;tn<bt;tn++){let Wt=tn/bt;if(Wt!==.5){const cr=Wt-.5;Wt+=Wt*cr*(Wt-1)*((1.0904+Xe*(Xe*(3.55645-1.43519*Xe)-3.2452))*cr*cr+(.848013+Xe*(.215638*Xe-1.06021)))}const Cn=Re.sub(Pe)._mult(Wt)._add(Pe)._unit()._mult(Vt?-1:1);this.addHalfVertex(ae,Cn.x,Cn.y,!1,Vt,0,ee)}}ye&&this.addCurrentVertex(ae,Re,-Nt,-Pt,ee)}else if(Mt==="butt")this.addCurrentVertex(ae,Je,0,0,ee);else if(Mt==="square"){const Ct=me?1:-1;this.addCurrentVertex(ae,Je,Ct,Ct,ee)}else Mt==="round"&&(me&&(this.addCurrentVertex(ae,Pe,0,0,ee),this.addCurrentVertex(ae,Pe,1,1,ee,!0)),ye&&(this.addCurrentVertex(ae,Re,-1,-1,ee,!0),this.addCurrentVertex(ae,Re,0,0,ee)));if(Ft&&Ne<P-1){const Ct=ae.dist(ye);if(Ct>2*W){const Nt=ae.add(ye.sub(ae)._mult(W/Ct)._round());this.updateDistance(ae,Nt),this.addCurrentVertex(Nt,Re,0,0,ee),ae=Nt}}}}addCurrentVertex(n,s,h,p,v,x=!1){const E=s.y*p-s.x,P=-s.y-s.x*p;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,v),this.addHalfVertex(n,E,P,x,!0,-p,v),this.distance>iw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,p,v,x))}addHalfVertex({x:n,y:s},h,p,v,x,E,P){const z=.5*(this.lineClips?this.scaledDistance*(iw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(E===0?0:E<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const W=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),P.primitiveLength++),x?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let ow,sw;Bt("LineBucket",Py,{omit:["layers","patternFeatures"]});var aw={get paint(){return sw=sw||new Ir({"line-opacity":new an(ie.paint_line["line-opacity"]),"line-color":new an(ie.paint_line["line-color"]),"line-translate":new qt(ie.paint_line["line-translate"]),"line-translate-anchor":new qt(ie.paint_line["line-translate-anchor"]),"line-width":new an(ie.paint_line["line-width"]),"line-gap-width":new an(ie.paint_line["line-gap-width"]),"line-offset":new an(ie.paint_line["line-offset"]),"line-blur":new an(ie.paint_line["line-blur"]),"line-dasharray":new Yh(ie.paint_line["line-dasharray"]),"line-pattern":new zu(ie.paint_line["line-pattern"]),"line-gradient":new Jh(ie.paint_line["line-gradient"])})},get layout(){return ow=ow||new Ir({"line-cap":new qt(ie.layout_line["line-cap"]),"line-join":new an(ie.layout_line["line-join"]),"line-miter-limit":new qt(ie.layout_line["line-miter-limit"]),"line-round-limit":new qt(ie.layout_line["line-round-limit"]),"line-sort-key":new an(ie.layout_line["line-sort-key"])})}};class TP extends an{possiblyEvaluate(n,s){return s=new lr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,p){return s=F({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,p)}}let pp;class CP extends _o{constructor(n){super(n,aw),this.gradientVersion=0,pp||(pp=new TP(aw.paint.properties["line-width"].specification),pp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Xo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=pp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Py(n)}queryRadius(n){const s=n,h=lw(af("line-width",this,s),af("line-gap-width",this,s)),p=af("line-offset",this,s);return h/2+Math.abs(p)+ap(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,p,v,x,E){const P=lp(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,E),z=E/2*lw(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),W=this.paint.get("line-offset").evaluate(s,h);return W&&(p=function(ee,ae){const me=[];for(let ye=0;ye<ee.length;ye++){const Pe=ee[ye],Re=[];for(let Ne=0;Ne<Pe.length;Ne++){const Je=Pe[Ne-1],Xe=Pe[Ne],Qe=Pe[Ne+1],rt=Ne===0?new k(0,0):Xe.sub(Je)._unit()._perp(),gt=Ne===Pe.length-1?new k(0,0):Qe.sub(Xe)._unit()._perp(),Ft=rt._add(gt)._unit(),Vt=Ft.x*gt.x+Ft.y*gt.y;Vt!==0&&Ft._mult(1/Vt),Re.push(Ft._mult(ae)._add(Xe))}me.push(Re)}return me}(p,W*E)),function(ee,ae,me){for(let ye=0;ye<ae.length;ye++){const Pe=ae[ye];if(ee.length>=3){for(let Re=0;Re<Pe.length;Re++)if(Cc(ee,Pe[Re]))return!0}if(LA(ee,Pe,me))return!0}return!1}(P,p,z)}isTileClipped(){return!0}}function lw(o,n){return n>0?n+2*o:o}const IP=pr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),AP=pr([{name:"a_projected_pos",components:3,type:"Float32"}],4);pr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const PP=pr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);pr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const uw=pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),kP=pr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function MP(o,n,s){return o.sections.forEach(h=>{h.text=function(p,v,x){const E=v.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?p=p.toLocaleUpperCase():E==="lowercase"&&(p=p.toLocaleLowerCase()),to.applyArabicShaping&&(p=to.applyArabicShaping(p)),p}(h.text,n,s)}),o}pr([{name:"triangle",components:3,type:"Uint16"}]),pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),pr([{type:"Float32",name:"offsetX"}]),pr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),pr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const gf={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Wr=24,cw=Kn,hw=function(o,n,s,h,p){var v,x,E=8*p-h-1,P=(1<<E)-1,z=P>>1,W=-7,ee=s?p-1:0,ae=s?-1:1,me=o[n+ee];for(ee+=ae,v=me&(1<<-W)-1,me>>=-W,W+=E;W>0;v=256*v+o[n+ee],ee+=ae,W-=8);for(x=v&(1<<-W)-1,v>>=-W,W+=h;W>0;x=256*x+o[n+ee],ee+=ae,W-=8);if(v===0)v=1-z;else{if(v===P)return x?NaN:1/0*(me?-1:1);x+=Math.pow(2,h),v-=z}return(me?-1:1)*x*Math.pow(2,v-h)},fw=function(o,n,s,h,p,v){var x,E,P,z=8*v-p-1,W=(1<<z)-1,ee=W>>1,ae=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=h?0:v-1,ye=h?1:-1,Pe=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(E=isNaN(n)?1:0,x=W):(x=Math.floor(Math.log(n)/Math.LN2),n*(P=Math.pow(2,-x))<1&&(x--,P*=2),(n+=x+ee>=1?ae/P:ae*Math.pow(2,1-ee))*P>=2&&(x++,P/=2),x+ee>=W?(E=0,x=W):x+ee>=1?(E=(n*P-1)*Math.pow(2,p),x+=ee):(E=n*Math.pow(2,ee-1)*Math.pow(2,p),x=0));p>=8;o[s+me]=255&E,me+=ye,E/=256,p-=8);for(x=x<<p|E,z+=p;z>0;o[s+me]=255&x,me+=ye,x/=256,z-=8);o[s+me-ye]|=128*Pe};function Kn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Kn.Varint=0,Kn.Fixed64=1,Kn.Bytes=2,Kn.Fixed32=5;var ky=4294967296,dw=1/ky,pw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ra(o){return o.type===Kn.Bytes?o.readVarint()+o.pos:o.pos+1}function kc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function mw(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var p=s.pos-1;p>=o;p--)s.buf[p+h]=s.buf[p]}function LP(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function zP(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function OP(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function FP(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function RP(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function jP(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function DP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function BP(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function NP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function mp(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Mc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function gw(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}Kn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,o(p,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=mp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=gw(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=mp(this.buf,this.pos)+mp(this.buf,this.pos+4)*ky;return this.pos+=8,o},readSFixed64:function(){var o=mp(this.buf,this.pos)+gw(this.buf,this.pos+4)*ky;return this.pos+=8,o},readFloat:function(){var o=hw(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=hw(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(p,v,x){var E,P,z=x.buf;if(E=(112&(P=z[x.pos++]))>>4,P<128||(E|=(127&(P=z[x.pos++]))<<3,P<128)||(E|=(127&(P=z[x.pos++]))<<10,P<128)||(E|=(127&(P=z[x.pos++]))<<17,P<128)||(E|=(127&(P=z[x.pos++]))<<24,P<128)||(E|=(1&(P=z[x.pos++]))<<31,P<128))return kc(p,E,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&pw?function(s,h,p){return pw.decode(s.subarray(h,p))}(this.buf,n,o):function(s,h,p){for(var v="",x=h;x<p;){var E,P,z,W=s[x],ee=null,ae=W>239?4:W>223?3:W>191?2:1;if(x+ae>p)break;ae===1?W<128&&(ee=W):ae===2?(192&(E=s[x+1]))==128&&(ee=(31&W)<<6|63&E)<=127&&(ee=null):ae===3?(P=s[x+2],(192&(E=s[x+1]))==128&&(192&P)==128&&((ee=(15&W)<<12|(63&E)<<6|63&P)<=2047||ee>=55296&&ee<=57343)&&(ee=null)):ae===4&&(P=s[x+2],z=s[x+3],(192&(E=s[x+1]))==128&&(192&P)==128&&(192&z)==128&&((ee=(15&W)<<18|(63&E)<<12|(63&P)<<6|63&z)<=65535||ee>=1114112)&&(ee=null)),ee===null?(ee=65533,ae=1):ee>65535&&(ee-=65536,v+=String.fromCharCode(ee>>>10&1023|55296),ee=56320|1023&ee),v+=String.fromCharCode(ee),x+=ae}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Kn.Bytes)return o.push(this.readVarint(n));var s=Ra(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSVarint());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Kn.Bytes)return o.push(this.readBoolean());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFloat());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Kn.Bytes)return o.push(this.readDouble());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFixed32());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSFixed32());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFixed64());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSFixed64());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Kn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Kn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Kn.Fixed32)this.pos+=4;else{if(n!==Kn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Mc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Mc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Mc(this.buf,-1&o,this.pos),Mc(this.buf,Math.floor(o*dw),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Mc(this.buf,-1&o,this.pos),Mc(this.buf,Math.floor(o*dw),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,E){E.buf[E.pos++]=127&v|128,v>>>=7,E.buf[E.pos++]=127&v|128,v>>>=7,E.buf[E.pos++]=127&v|128,v>>>=7,E.buf[E.pos++]=127&v|128,E.buf[E.pos]=127&(v>>>=7)}(h,0,s),function(v,x){var E=(7&v)<<4;x.buf[x.pos++]|=E|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(p,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,p,v){for(var x,E,P=0;P<p.length;P++){if((x=p.charCodeAt(P))>55295&&x<57344){if(!E){x>56319||P+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):E=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,E=x;continue}x=E-55296<<10|x-56320|65536,E=null}else E&&(h[v++]=239,h[v++]=191,h[v++]=189,E=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&mw(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),fw(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),fw(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&mw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Kn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,LP,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,zP,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,RP,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,OP,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,FP,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,jP,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,DP,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,BP,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,NP,n)},writeBytesField:function(o,n){this.writeTag(o,Kn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Kn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Kn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Kn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var My=w(cw);const Ly=3;function UP(o,n,s){o===1&&s.readMessage($P,n)}function $P(o,n,s){if(o===3){const{id:h,bitmap:p,width:v,height:x,left:E,top:P,advance:z}=s.readMessage(VP,{});n.push({id:h,bitmap:new uf({width:v+2*Ly,height:x+2*Ly},p),metrics:{width:v,height:x,left:E,top:P,advance:z}})}}function VP(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const yw=Ly;function vw(o){let n=0,s=0;for(const x of o)n+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,E)=>E.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let p=0,v=0;for(const x of o)for(let E=h.length-1;E>=0;E--){const P=h[E];if(!(x.w>P.w||x.h>P.h)){if(x.x=P.x,x.y=P.y,v=Math.max(v,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===P.w&&x.h===P.h){const z=h.pop();E<h.length&&(h[E]=z)}else x.h===P.h?(P.x+=x.w,P.w-=x.w):x.w===P.w?(P.y+=x.h,P.h-=x.h):(h.push({x:P.x+x.w,y:P.y,w:P.w-x.w,h:x.h}),P.y+=x.h,P.h-=x.h);break}}return{w:p,h:v,fill:n/(p*v)||0}}const ro=1;class zy{constructor(n,{pixelRatio:s,version:h,stretchX:p,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=p,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+ro,this.paddedRect.y+ro]}get br(){return[this.paddedRect.x+this.paddedRect.w-ro,this.paddedRect.y+this.paddedRect.h-ro]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ro)/this.pixelRatio,(this.paddedRect.h-2*ro)/this.pixelRatio]}}class _w{constructor(n,s){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,p,v);const{w:x,h:E}=vw(v),P=new Lo({width:x||1,height:E||1});for(const z in n){const W=n[z],ee=h[z].paddedRect;Lo.copy(W.data,P,{x:0,y:0},{x:ee.x+ro,y:ee.y+ro},W.data)}for(const z in s){const W=s[z],ee=p[z].paddedRect,ae=ee.x+ro,me=ee.y+ro,ye=W.data.width,Pe=W.data.height;Lo.copy(W.data,P,{x:0,y:0},{x:ae,y:me},W.data),Lo.copy(W.data,P,{x:0,y:Pe-1},{x:ae,y:me-1},{width:ye,height:1}),Lo.copy(W.data,P,{x:0,y:0},{x:ae,y:me+Pe},{width:ye,height:1}),Lo.copy(W.data,P,{x:ye-1,y:0},{x:ae-1,y:me},{width:1,height:Pe}),Lo.copy(W.data,P,{x:0,y:0},{x:ae+ye,y:me},{width:1,height:Pe})}this.image=P,this.iconPositions=h,this.patternPositions=p}addImages(n,s,h){for(const p in n){const v=n[p],x={x:0,y:0,w:v.data.width+2*ro,h:v.data.height+2*ro};h.push(x),s[p]=new zy(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[p,v]=n.tl;h.update(s.data,void 0,{x:p,y:v})}}var kl;Bt("ImagePosition",zy),Bt("ImageAtlas",_w),l.ai=void 0,(kl=l.ai||(l.ai={}))[kl.none=0]="none",kl[kl.horizontal=1]="horizontal",kl[kl.vertical=2]="vertical",kl[kl.horizontalOnly=3]="horizontalOnly";const yf=-17;class vf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new vf;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new vf;return s.imageName=n,s}}class Lc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new Lc;for(let p=0;p<n.sections.length;p++){const v=n.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const p=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=p&&Kd(p)&&!gf[n[h+1]]||v&&Kd(v)&&!gf[n[h-1]]||!gf[n[h]]?n[h]:gf[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&yp[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&yp[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new Lc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(vf.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void pe("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(vf.forImage(s)),this.sectionIndex.push(this.sections.length-1)):pe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function gp(o,n,s,h,p,v,x,E,P,z,W,ee,ae,me,ye,Pe){const Re=Lc.fromFeature(o,p);let Ne;ee===l.ai.vertical&&Re.verticalizePunctuation();const{processBidirectionalText:Je,processStyledBidirectionalText:Xe}=to;if(Je&&Re.sections.length===1){Ne=[];const gt=Je(Re.toString(),Oy(Re,z,v,n,h,me,ye));for(const Ft of gt){const Vt=new Lc;Vt.text=Ft,Vt.sections=Re.sections;for(let zt=0;zt<Ft.length;zt++)Vt.sectionIndex.push(0);Ne.push(Vt)}}else if(Xe){Ne=[];const gt=Xe(Re.text,Re.sectionIndex,Oy(Re,z,v,n,h,me,ye));for(const Ft of gt){const Vt=new Lc;Vt.text=Ft[0],Vt.sectionIndex=Ft[1],Vt.sections=Re.sections,Ne.push(Vt)}}else Ne=function(gt,Ft){const Vt=[],zt=gt.text;let Mt=0;for(const Ct of Ft)Vt.push(gt.substring(Mt,Ct)),Mt=Ct;return Mt<zt.length&&Vt.push(gt.substring(Mt,zt.length)),Vt}(Re,Oy(Re,z,v,n,h,me,ye));const Qe=[],rt={positionedLines:Qe,text:Re.toString(),top:W[1],bottom:W[1],left:W[0],right:W[0],writingMode:ee,iconsInText:!1,verticalizable:!1};return function(gt,Ft,Vt,zt,Mt,Ct,Nt,Pt,bt,tn,Wt,Cn){let cr=0,fr=yf,Xr=0,wo=0;const $i=Pt==="right"?1:Pt==="left"?0:.5;let Rr=0;for(const qr of Mt){qr.trim();const Kr=qr.getMaxScale(),Ii=(Kr-1)*Wr,Zi={positionedGlyphs:[],lineOffset:0};gt.positionedLines[Rr]=Zi;const Ai=Zi.positionedGlyphs;let io=0;if(!qr.length()){fr+=Ct,++Rr;continue}for(let Yr=0;Yr<qr.length();Yr++){const Ln=qr.getSection(Yr),Pi=qr.getSectionIndex(Yr),_i=qr.getCharCode(Yr);let Jr=0,os=null,Is=null,As=null,ja=Wr;const ss=!(bt===l.ai.horizontal||!Wt&&!Vh(_i)||Wt&&(yp[_i]||(li=_i,Ot.Arabic(li)||Ot["Arabic Supplement"](li)||Ot["Arabic Extended-A"](li)||Ot["Arabic Presentation Forms-A"](li)||Ot["Arabic Presentation Forms-B"](li))));if(Ln.imageName){const Oo=zt[Ln.imageName];if(!Oo)continue;As=Ln.imageName,gt.iconsInText=gt.iconsInText||!0,Is=Oo.paddedRect;const so=Oo.displaySize;Ln.scale=Ln.scale*Wr/Cn,os={width:so[0],height:so[1],left:ro,top:-yw,advance:ss?so[1]:so[0]},Jr=Ii+(Wr-so[1]*Ln.scale),ja=os.advance;const Da=ss?so[0]*Ln.scale-Wr*Kr:so[1]*Ln.scale-Wr*Kr;Da>0&&Da>io&&(io=Da)}else{const Oo=Vt[Ln.fontStack],so=Oo&&Oo[_i];if(so&&so.rect)Is=so.rect,os=so.metrics;else{const Da=Ft[Ln.fontStack],Sf=Da&&Da[_i];if(!Sf)continue;os=Sf.metrics}Jr=(Kr-Ln.scale)*Wr}ss?(gt.verticalizable=!0,Ai.push({glyph:_i,imageName:As,x:cr,y:fr+Jr,vertical:ss,scale:Ln.scale,fontStack:Ln.fontStack,sectionIndex:Pi,metrics:os,rect:Is}),cr+=ja*Ln.scale+tn):(Ai.push({glyph:_i,imageName:As,x:cr,y:fr+Jr,vertical:ss,scale:Ln.scale,fontStack:Ln.fontStack,sectionIndex:Pi,metrics:os,rect:Is}),cr+=os.advance*Ln.scale+tn)}Ai.length!==0&&(Xr=Math.max(cr-tn,Xr),HP(Ai,0,Ai.length-1,$i,io)),cr=0;const oo=Ct*Kr+io;Zi.lineOffset=Math.max(io,Ii),fr+=oo,wo=Math.max(oo,wo),++Rr}var li;const vi=fr-yf,{horizontalAlign:Vi,verticalAlign:Gi}=Fy(Nt);(function(qr,Kr,Ii,Zi,Ai,io,oo,Yr,Ln){const Pi=(Kr-Ii)*Ai;let _i=0;_i=io!==oo?-Yr*Zi-yf:(-Zi*Ln+.5)*oo;for(const Jr of qr)for(const os of Jr.positionedGlyphs)os.x+=Pi,os.y+=_i})(gt.positionedLines,$i,Vi,Gi,Xr,wo,Ct,vi,Mt.length),gt.top+=-Gi*vi,gt.bottom=gt.top+vi,gt.left+=-Vi*Xr,gt.right=gt.left+Xr}(rt,n,s,h,Ne,x,E,P,ee,z,ae,Pe),!function(gt){for(const Ft of gt)if(Ft.positionedGlyphs.length!==0)return!1;return!0}(Qe)&&rt}const yp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},GP={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function xw(o,n,s,h,p,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Wr/v+p:0}{const x=s[n.fontStack],E=x&&x[o];return E?E.metrics.advance*n.scale+p:0}}function ww(o,n,s,h){const p=Math.pow(o-n,2);return h?o<n?p/2:2*p:p+Math.abs(s)*s}function ZP(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function bw(o,n,s,h,p,v){let x=null,E=ww(n,s,p,v);for(const P of h){const z=ww(n-P.x,s,p,v)+P.badness;z<=E&&(x=P,E=z)}return{index:o,x:n,priorBreak:x,badness:E}}function Sw(o){return o?Sw(o.priorBreak).concat(o.index):[]}function Oy(o,n,s,h,p,v,x){if(v!=="point")return[];if(!o)return[];const E=[],P=function(ae,me,ye,Pe,Re,Ne){let Je=0;for(let Xe=0;Xe<ae.length();Xe++){const Qe=ae.getSection(Xe);Je+=xw(ae.getCharCode(Xe),Qe,Pe,Re,me,Ne)}return Je/Math.max(1,Math.ceil(Je/ye))}(o,n,s,h,p,x),z=o.text.indexOf("​")>=0;let W=0;for(let ae=0;ae<o.length();ae++){const me=o.getSection(ae),ye=o.getCharCode(ae);if(yp[ye]||(W+=xw(ye,me,h,p,n,x)),ae<o.length()-1){const Pe=!((ee=ye)<11904||!(Ot["Bopomofo Extended"](ee)||Ot.Bopomofo(ee)||Ot["CJK Compatibility Forms"](ee)||Ot["CJK Compatibility Ideographs"](ee)||Ot["CJK Compatibility"](ee)||Ot["CJK Radicals Supplement"](ee)||Ot["CJK Strokes"](ee)||Ot["CJK Symbols and Punctuation"](ee)||Ot["CJK Unified Ideographs Extension A"](ee)||Ot["CJK Unified Ideographs"](ee)||Ot["Enclosed CJK Letters and Months"](ee)||Ot["Halfwidth and Fullwidth Forms"](ee)||Ot.Hiragana(ee)||Ot["Ideographic Description Characters"](ee)||Ot["Kangxi Radicals"](ee)||Ot["Katakana Phonetic Extensions"](ee)||Ot.Katakana(ee)||Ot["Vertical Forms"](ee)||Ot["Yi Radicals"](ee)||Ot["Yi Syllables"](ee)));(GP[ye]||Pe||me.imageName)&&E.push(bw(ae+1,W,P,E,ZP(ye,o.getCharCode(ae+1),Pe&&z),!1))}}var ee;return Sw(bw(o.length(),W,P,E,0,!0))}function Fy(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function HP(o,n,s,h,p){if(!h&&!p)return;const v=o[s],x=(o[s].x+v.metrics.advance*v.scale)*h;for(let E=n;E<=s;E++)o[E].x-=x,o[E].y+=p}function WP(o,n,s){const{horizontalAlign:h,verticalAlign:p}=Fy(s),v=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*p;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Ew(o,n,s,h,p,v){const x=o.image;let E;if(x.content){const Re=x.content,Ne=x.pixelRatio||1;E=[Re[0]/Ne,Re[1]/Ne,x.displaySize[0]-Re[2]/Ne,x.displaySize[1]-Re[3]/Ne]}const P=n.left*v,z=n.right*v;let W,ee,ae,me;s==="width"||s==="both"?(me=p[0]+P-h[3],ee=p[0]+z+h[1]):(me=p[0]+(P+z-x.displaySize[0])/2,ee=me+x.displaySize[0]);const ye=n.top*v,Pe=n.bottom*v;return s==="height"||s==="both"?(W=p[1]+ye-h[0],ae=p[1]+Pe+h[2]):(W=p[1]+(ye+Pe-x.displaySize[1])/2,ae=W+x.displaySize[1]),{image:x,top:W,right:ee,bottom:ae,left:me,collisionPadding:E}}const _f=255,na=128,Ml=_f*na;function Tw(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new lr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=s;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const E=h[v],P=h[x];return s.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:P,interpolationType:p}:{kind:"camera",minZoom:E,maxZoom:P,minSize:s.evaluate(new lr(E)),maxSize:s.evaluate(new lr(P)),interpolationType:p}}}function Ry(o,n,s){let h="never";const p=o.get(n);return p?h=p:o.get(s)&&(h="always"),h}const XP=Pl.VectorTileFeature.types,qP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vp(o,n,s,h,p,v,x,E,P,z,W,ee,ae){const me=E?Math.min(Ml,Math.round(E[0])):0,ye=E?Math.min(Ml,Math.round(E[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*p),v,x,(me<<1)+(P?1:0),ye,16*z,16*W,256*ee,256*ae)}function jy(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function KP(o){for(const n of o.sections)if(uy(n.text))return!0;return!1}class Dy{constructor(n){this.layoutVertexArray=new An,this.indexArray=new si,this.programConfigurations=n,this.segments=new ur,this.dynamicLayoutVertexArray=new _n,this.opacityVertexArray=new kn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ke}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,IP.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,AP.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,qP,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Bt("SymbolBuffers",Dy);class By{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new ur,this.collisionVertexArray=new nr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,PP.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Bt("CollisionBuffers",By);class zc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=gy([]),this.placementViewportMatrix=gy([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Tw(this.zoom,s["text-size"]),this.iconSizeData=Tw(this.zoom,s["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=Ry(h,"text-overlap","text-allow-overlap")!=="never"||Ry(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>l.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new Dy(new Cs(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Dy(new Cs(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Ye,this.lineVertexArray=new ot,this.symbolInstances=new De,this.textAnchorOffsets=new dt}calculateGlyphDependencies(n,s,h,p,v){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||p)&&v){const E=gf[n.charAt(x)];E&&(s[E.charCodeAt(0)]=!0)}}populate(n,s,h){const p=this.layers[0],v=p.layout,x=v.get("text-font"),E=v.get("text-field"),P=v.get("icon-image"),z=(E.value.kind!=="constant"||E.value.value instanceof ti&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),W=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,ee=v.get("symbol-sort-key");if(this.features=[],!z&&!W)return;const ae=s.iconDependencies,me=s.glyphDependencies,ye=s.availableImages,Pe=new lr(this.zoom);for(const{feature:Re,id:Ne,index:Je,sourceLayerIndex:Xe}of n){const Qe=p._featureFilter.needGeometry,rt=ju(Re,Qe);if(!p._featureFilter.filter(Pe,rt,h))continue;let gt,Ft;if(Qe||(rt.geometry=Ru(Re)),z){const zt=p.getValueAndResolveTokens("text-field",rt,h,ye),Mt=ti.factory(zt);KP(Mt)&&(this.hasRTLText=!0),(!this.hasRTLText||qh()==="unavailable"||this.hasRTLText&&to.isParsed())&&(gt=MP(Mt,p,rt))}if(W){const zt=p.getValueAndResolveTokens("icon-image",rt,h,ye);Ft=zt instanceof $r?zt:$r.fromString(zt)}if(!gt&&!Ft)continue;const Vt=this.sortFeaturesByKey?ee.evaluate(rt,{},h):void 0;if(this.features.push({id:Ne,text:gt,icon:Ft,index:Je,sourceLayerIndex:Xe,geometry:rt.geometry,properties:Re.properties,type:XP[Re.type],sortKey:Vt}),Ft&&(ae[Ft.name]=!0),gt){const zt=x.evaluate(rt,{},h).join(","),Mt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ai.vertical)>=0;for(const Ct of gt.sections)if(Ct.image)ae[Ct.image.name]=!0;else{const Nt=Uh(gt.toString()),Pt=Ct.fontStack||zt,bt=me[Pt]=me[Pt]||{};this.calculateGlyphDependencies(Ct.text,bt,Mt,this.allowVerticalPlacement,Nt)}}}v.get("symbol-placement")==="line"&&(this.features=function(Re){const Ne={},Je={},Xe=[];let Qe=0;function rt(zt){Xe.push(Re[zt]),Qe++}function gt(zt,Mt,Ct){const Nt=Je[zt];return delete Je[zt],Je[Mt]=Nt,Xe[Nt].geometry[0].pop(),Xe[Nt].geometry[0]=Xe[Nt].geometry[0].concat(Ct[0]),Nt}function Ft(zt,Mt,Ct){const Nt=Ne[Mt];return delete Ne[Mt],Ne[zt]=Nt,Xe[Nt].geometry[0].shift(),Xe[Nt].geometry[0]=Ct[0].concat(Xe[Nt].geometry[0]),Nt}function Vt(zt,Mt,Ct){const Nt=Ct?Mt[0][Mt[0].length-1]:Mt[0][0];return`${zt}:${Nt.x}:${Nt.y}`}for(let zt=0;zt<Re.length;zt++){const Mt=Re[zt],Ct=Mt.geometry,Nt=Mt.text?Mt.text.toString():null;if(!Nt){rt(zt);continue}const Pt=Vt(Nt,Ct),bt=Vt(Nt,Ct,!0);if(Pt in Je&&bt in Ne&&Je[Pt]!==Ne[bt]){const tn=Ft(Pt,bt,Ct),Wt=gt(Pt,bt,Xe[tn].geometry);delete Ne[Pt],delete Je[bt],Je[Vt(Nt,Xe[Wt].geometry,!0)]=Wt,Xe[tn].geometry=null}else Pt in Je?gt(Pt,bt,Ct):bt in Ne?Ft(Pt,bt,Ct):(rt(zt),Ne[Pt]=Qe-1,Je[bt]=Qe-1)}return Xe.filter(zt=>zt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,Ne)=>Re.sortKey-Ne.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const x={};for(let E=n.segment+1;E<s.length;E++)x[E]={x:s[E].x,y:s[E].y,tileUnitDistanceFromAnchor:p},E<s.length-1&&(p+=s[E+1].dist(s[E]));for(let E=n.segment||0;E>=0;E--)x[E]={x:s[E].x,y:s[E].y,tileUnitDistanceFromAnchor:v},E>0&&(v+=s[E-1].dist(s[E]));for(let E=0;E<s.length;E++){const P=x[E];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,p,v,x,E,P,z,W,ee,ae){const me=n.indexArray,ye=n.layoutVertexArray,Pe=n.segments.prepareSegment(4*s.length,ye,me,this.canOverlap?x.sortKey:void 0),Re=this.glyphOffsetArray.length,Ne=Pe.vertexLength,Je=this.allowVerticalPlacement&&E===l.ai.vertical?Math.PI/2:0,Xe=x.text&&x.text.sections;for(let Qe=0;Qe<s.length;Qe++){const{tl:rt,tr:gt,bl:Ft,br:Vt,tex:zt,pixelOffsetTL:Mt,pixelOffsetBR:Ct,minFontScaleX:Nt,minFontScaleY:Pt,glyphOffset:bt,isSDF:tn,sectionIndex:Wt}=s[Qe],Cn=Pe.vertexLength,cr=bt[1];vp(ye,P.x,P.y,rt.x,cr+rt.y,zt.x,zt.y,h,tn,Mt.x,Mt.y,Nt,Pt),vp(ye,P.x,P.y,gt.x,cr+gt.y,zt.x+zt.w,zt.y,h,tn,Ct.x,Mt.y,Nt,Pt),vp(ye,P.x,P.y,Ft.x,cr+Ft.y,zt.x,zt.y+zt.h,h,tn,Mt.x,Ct.y,Nt,Pt),vp(ye,P.x,P.y,Vt.x,cr+Vt.y,zt.x+zt.w,zt.y+zt.h,h,tn,Ct.x,Ct.y,Nt,Pt),jy(n.dynamicLayoutVertexArray,P,Je),me.emplaceBack(Cn,Cn+1,Cn+2),me.emplaceBack(Cn+1,Cn+2,Cn+3),Pe.vertexLength+=4,Pe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bt[0]),Qe!==s.length-1&&Wt===s[Qe+1].sectionIndex||n.programConfigurations.populatePaintArrays(ye.length,x,x.index,{},ae,Xe&&Xe[Wt])}n.placedSymbolArray.emplaceBack(P.x,P.y,Re,this.glyphOffsetArray.length-Re,Ne,z,W,P.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],E,0,!1,0,ee)}_addCollisionDebugVertex(n,s,h,p,v,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,p,v,x,E){const P=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),z=P.vertexLength,W=v.layoutVertexArray,ee=v.collisionVertexArray,ae=E.anchorX,me=E.anchorY;this._addCollisionDebugVertex(W,ee,x,ae,me,new k(n,s)),this._addCollisionDebugVertex(W,ee,x,ae,me,new k(h,s)),this._addCollisionDebugVertex(W,ee,x,ae,me,new k(h,p)),this._addCollisionDebugVertex(W,ee,x,ae,me,new k(n,p)),P.vertexLength+=4;const ye=v.indexArray;ye.emplaceBack(z,z+1),ye.emplaceBack(z+1,z+2),ye.emplaceBack(z+2,z+3),ye.emplaceBack(z+3,z),P.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,p){for(let v=n;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new By(Sr,uw.members,Zr),this.iconCollisionBox=new By(Sr,uw.members,Zr);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,p,v,x,E,P,z){const W={};for(let ee=s;ee<h;ee++){const ae=n.get(ee);W.textBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.textFeatureIndex=ae.featureIndex;break}for(let ee=p;ee<v;ee++){const ae=n.get(ee);W.verticalTextBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.verticalTextFeatureIndex=ae.featureIndex;break}for(let ee=x;ee<E;ee++){const ae=n.get(ee);W.iconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.iconFeatureIndex=ae.featureIndex;break}for(let ee=P;ee<z;ee++){const ae=n.get(ee);W.verticalIconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.verticalIconFeatureIndex=ae.featureIndex;break}return W}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),p=[],v=[],x=[];for(let E=0;E<this.symbolInstances.length;++E){x.push(E);const P=this.symbolInstances.get(E);p.push(0|Math.round(s*P.anchorX+h*P.anchorY)),v.push(P.featureIndex)}return x.sort((E,P)=>p[E]-p[P]||v[P]-v[E]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,v,x)=>{p>=0&&x.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Cw,Iw;Bt("SymbolBucket",zc,{omit:["layers","collisionBoxArray","features","compareText"]}),zc.MAX_GLYPHS=65535,zc.addDynamicAttributes=jy;var Ny={get paint(){return Iw=Iw||new Ir({"icon-opacity":new an(ie.paint_symbol["icon-opacity"]),"icon-color":new an(ie.paint_symbol["icon-color"]),"icon-halo-color":new an(ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new an(ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new an(ie.paint_symbol["icon-halo-blur"]),"icon-translate":new qt(ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new qt(ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new an(ie.paint_symbol["text-opacity"]),"text-color":new an(ie.paint_symbol["text-color"],{runtimeType:wr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new an(ie.paint_symbol["text-halo-color"]),"text-halo-width":new an(ie.paint_symbol["text-halo-width"]),"text-halo-blur":new an(ie.paint_symbol["text-halo-blur"]),"text-translate":new qt(ie.paint_symbol["text-translate"]),"text-translate-anchor":new qt(ie.paint_symbol["text-translate-anchor"])})},get layout(){return Cw=Cw||new Ir({"symbol-placement":new qt(ie.layout_symbol["symbol-placement"]),"symbol-spacing":new qt(ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qt(ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new an(ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qt(ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qt(ie.layout_symbol["icon-allow-overlap"]),"icon-overlap":new qt(ie.layout_symbol["icon-overlap"]),"icon-ignore-placement":new qt(ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new qt(ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qt(ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new an(ie.layout_symbol["icon-size"]),"icon-text-fit":new qt(ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qt(ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new an(ie.layout_symbol["icon-image"]),"icon-rotate":new an(ie.layout_symbol["icon-rotate"]),"icon-padding":new an(ie.layout_symbol["icon-padding"]),"icon-keep-upright":new qt(ie.layout_symbol["icon-keep-upright"]),"icon-offset":new an(ie.layout_symbol["icon-offset"]),"icon-anchor":new an(ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qt(ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qt(ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qt(ie.layout_symbol["text-rotation-alignment"]),"text-field":new an(ie.layout_symbol["text-field"]),"text-font":new an(ie.layout_symbol["text-font"]),"text-size":new an(ie.layout_symbol["text-size"]),"text-max-width":new an(ie.layout_symbol["text-max-width"]),"text-line-height":new qt(ie.layout_symbol["text-line-height"]),"text-letter-spacing":new an(ie.layout_symbol["text-letter-spacing"]),"text-justify":new an(ie.layout_symbol["text-justify"]),"text-radial-offset":new an(ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qt(ie.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new an(ie.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new an(ie.layout_symbol["text-anchor"]),"text-max-angle":new qt(ie.layout_symbol["text-max-angle"]),"text-writing-mode":new qt(ie.layout_symbol["text-writing-mode"]),"text-rotate":new an(ie.layout_symbol["text-rotate"]),"text-padding":new qt(ie.layout_symbol["text-padding"]),"text-keep-upright":new qt(ie.layout_symbol["text-keep-upright"]),"text-transform":new an(ie.layout_symbol["text-transform"]),"text-offset":new an(ie.layout_symbol["text-offset"]),"text-allow-overlap":new qt(ie.layout_symbol["text-allow-overlap"]),"text-overlap":new qt(ie.layout_symbol["text-overlap"]),"text-ignore-placement":new qt(ie.layout_symbol["text-ignore-placement"]),"text-optional":new qt(ie.layout_symbol["text-optional"])})}};class Aw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:vn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Bt("FormatSectionOverride",Aw,{omit:["defaultValue"]});class _p extends _o{constructor(n){super(n,Ny)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,p){const v=this.layout.get(n).evaluate(s,{},h,p),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||xl(x.value)||!v?v:function(E,P){return P.replace(/{([^{}]+)}/g,(z,W)=>E&&W in E?String(E[W]):"")}(s.properties,v)}createBucket(n){return new zc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Ny.paint.overridableProperties){if(!_p.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Aw(s),p=new Cu(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Po("source",p):new wl("composite",p,s.value.zoomStops),this.paint._values[n]=new Ti(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&_p.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),p=Ny.paint.properties[s];let v=!1;const x=E=>{for(const P of E)if(p.overrides&&p.overrides.hasOverride(P))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof ti)x(h.value.value.sections);else if(h.value.kind==="source"){const E=z=>{v||(z instanceof ys&&ir(z.value)===ze?x(z.value.sections):z instanceof wa?x(z.sections):z.eachChild(E))},P=h.value;P._styleExpression&&E(P._styleExpression.expression)}return v}}let Pw;var YP={get paint(){return Pw=Pw||new Ir({"background-color":new qt(ie.paint_background["background-color"]),"background-pattern":new Yh(ie.paint_background["background-pattern"]),"background-opacity":new qt(ie.paint_background["background-opacity"])})}};class JP extends _o{constructor(n){super(n,YP)}}let kw;var QP={get paint(){return kw=kw||new Ir({"raster-opacity":new qt(ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new qt(ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qt(ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qt(ie.paint_raster["raster-brightness-max"]),"raster-saturation":new qt(ie.paint_raster["raster-saturation"]),"raster-contrast":new qt(ie.paint_raster["raster-contrast"]),"raster-resampling":new qt(ie.paint_raster["raster-resampling"]),"raster-fade-duration":new qt(ie.paint_raster["raster-fade-duration"])})}};class ek extends _o{constructor(n){super(n,QP)}}class tk extends _o{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class nk{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Uy=63710088e-1;class Ll{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ll(C(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,p=n.lat*s,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*s);return Uy*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof Ll)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Ll(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Ll(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Mw=2*Math.PI*Uy;function Lw(o){return Mw*Math.cos(o*Math.PI/180)}function zw(o){return(180+o)/360}function Ow(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Fw(o,n){return o/Lw(n)}function Rw(o){return 360*o-180}function $y(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class xp{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Ll.convert(n);return new xp(zw(h.lng),Ow(h.lat),Fw(s,h.lat))}toLngLat(){return new Ll(Rw(this.x),$y(this.y))}toAltitude(){return this.z*Lw($y(this.y))}meterInMercatorCoordinateUnits(){return 1/Mw*(n=$y(this.y),1/Math.cos(n*Math.PI/180));var n}}function jw(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class Vy{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=xf(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const p=(x=this.y,E=this.z,P=jw(256*(v=this.x),256*(x=Math.pow(2,E)-x-1),E),z=jw(256*(v+1),256*(x+1),E),P[0]+","+P[1]+","+z[0]+","+z[1]);var v,x,E,P,z;const W=function(ee,ae,me){let ye,Pe="";for(let Re=ee;Re>0;Re--)ye=1<<Re-1,Pe+=(ae&ye?1:0)+(me&ye?2:0);return Pe}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,W).replace(/{bbox-epsg-3857}/g,p)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new k((n.x*s-this.x)*Fr,(n.y*s-this.y)*Fr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Dw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=xf(n,s.z,s.z,s.x,s.y)}}class zo{constructor(n,s,h,p,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new Vy(h,+p,+v),this.key=xf(s,n,h,p,v)}clone(){return new zo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new zo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?xf(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):xf(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new zo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new zo(s,this.wrap,s,h,p),new zo(s,this.wrap,s,h+1,p),new zo(s,this.wrap,s,h,p+1),new zo(s,this.wrap,s,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new zo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new zo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Dw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new xp(n.x-this.wrap,n.y))}}function xf(o,n,s,h,p){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*p+h).toString(36)+s.toString(36)+n.toString(36)}Bt("CanonicalTileID",Vy),Bt("OverscaledTileID",zo,{omit:["posMatrix"]});class Bw{constructor(n,s,h,p=1,v=1,x=1,E=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void pe(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const P=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=v,this.blueFactor=x,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let z=0;z<P;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(P,z)]=this.data[this._idx(P-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,P)]=this.data[this._idx(z,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<P;z++)for(let W=0;W<P;W++){const ee=this.get(z,W);ee>this.max&&(this.max=ee),ee<this.min&&(this.min=ee)}}get(n,s){const h=new Uint8Array(this.data.buffer),p=4*this._idx(n,s);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Lo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,v=s*this.dim+this.dim,x=h*this.dim,E=h*this.dim+this.dim;switch(s){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:x=E-1;break;case 1:E=x+1}const P=-s*this.dim,z=-h*this.dim;for(let W=x;W<E;W++)for(let ee=p;ee<v;ee++)this.data[this._idx(ee,W)]=n.data[this._idx(ee+P,W+z)]}}Bt("DEMData",Bw);class Nw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Uw{constructor(n,s,h,p,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=p,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class $w{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Mo(Fr,16,0),this.grid3D=new Mo(Fr,16,0),this.featureIndexArray=new xt,this.promoteId=s}insert(n,s,h,p,v,x){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v);const P=x?this.grid3D:this.grid;for(let z=0;z<s.length;z++){const W=s[z],ee=[1/0,1/0,-1/0,-1/0];for(let ae=0;ae<W.length;ae++){const me=W[ae];ee[0]=Math.min(ee[0],me.x),ee[1]=Math.min(ee[1],me.y),ee[2]=Math.max(ee[2],me.x),ee[3]=Math.max(ee[3],me.y)}ee[0]<Fr&&ee[1]<Fr&&ee[2]>=0&&ee[3]>=0&&P.insert(E,ee[0],ee[1],ee[2],ee[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Pl.VectorTile(new My(this.rawTileData)).layers,this.sourceLayerCoder=new Nw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,p){this.loadVTLayers();const v=n.params||{},x=Fr/n.tileSize/n.scale,E=Gr(v.filter),P=n.queryGeometry,z=n.queryPadding*x,W=Gw(P),ee=this.grid.query(W.minX-z,W.minY-z,W.maxX+z,W.maxY+z),ae=Gw(n.cameraQueryGeometry),me=this.grid3D.query(ae.minX-z,ae.minY-z,ae.maxX+z,ae.maxY+z,(Re,Ne,Je,Xe)=>function(Qe,rt,gt,Ft,Vt){for(const Mt of Qe)if(rt<=Mt.x&&gt<=Mt.y&&Ft>=Mt.x&&Vt>=Mt.y)return!0;const zt=[new k(rt,gt),new k(rt,Vt),new k(Ft,Vt),new k(Ft,gt)];if(Qe.length>2){for(const Mt of zt)if(Cc(Qe,Mt))return!0}for(let Mt=0;Mt<Qe.length-1;Mt++)if(OA(Qe[Mt],Qe[Mt+1],zt))return!0;return!1}(n.cameraQueryGeometry,Re-z,Ne-z,Je+z,Xe+z));for(const Re of me)ee.push(Re);ee.sort(rk);const ye={};let Pe;for(let Re=0;Re<ee.length;Re++){const Ne=ee[Re];if(Ne===Pe)continue;Pe=Ne;const Je=this.featureIndexArray.get(Ne);let Xe=null;this.loadMatchingFeature(ye,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,E,v.layers,v.availableImages,s,h,p,(Qe,rt,gt)=>(Xe||(Xe=Ru(Qe)),rt.queryIntersectsFeature(P,Qe,gt,Xe,this.z,n.transform,x,n.pixelPosMatrix)))}return ye}loadMatchingFeature(n,s,h,p,v,x,E,P,z,W,ee){const ae=this.bucketLayerIDs[s];if(x&&!function(Re,Ne){for(let Je=0;Je<Re.length;Je++)if(Ne.indexOf(Re[Je])>=0)return!0;return!1}(x,ae))return;const me=this.sourceLayerCoder.decode(h),ye=this.vtLayers[me].feature(p);if(v.needGeometry){const Re=ju(ye,!0);if(!v.filter(new lr(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!v.filter(new lr(this.tileID.overscaledZ),ye))return;const Pe=this.getId(ye,me);for(let Re=0;Re<ae.length;Re++){const Ne=ae[Re];if(x&&x.indexOf(Ne)<0)continue;const Je=P[Ne];if(!Je)continue;let Xe={};Pe&&W&&(Xe=W.getState(Je.sourceLayer||"_geojsonTileLayer",Pe));const Qe=F({},z[Ne]);Qe.paint=Vw(Qe.paint,Je.paint,ye,Xe,E),Qe.layout=Vw(Qe.layout,Je.layout,ye,Xe,E);const rt=!ee||ee(ye,Je,Xe);if(!rt)continue;const gt=new Uw(ye,this.z,this.x,this.y,Pe);gt.layer=Qe;let Ft=n[Ne];Ft===void 0&&(Ft=n[Ne]=[]),Ft.push({featureIndex:p,feature:gt,intersectionZ:rt})}}lookupSymbolFeatures(n,s,h,p,v,x,E,P){const z={};this.loadVTLayers();const W=Gr(v);for(const ee of n)this.loadMatchingFeature(z,h,p,ee,W,x,E,P,s);return z}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function Vw(o,n,s,h,p){return Q(o,(v,x)=>{const E=n instanceof Ec?n.get(x):null;return E&&E.evaluate?E.evaluate(s,h,p):E})}function Gw(o){let n=1/0,s=1/0,h=-1/0,p=-1/0;for(const v of o)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{minX:n,minY:s,maxX:h,maxY:p}}function rk(o,n){return n-o}function Zw(o,n,s,h,p){const v=[];for(let x=0;x<o.length;x++){const E=o[x];let P;for(let z=0;z<E.length-1;z++){let W=E[z],ee=E[z+1];W.x<n&&ee.x<n||(W.x<n?W=new k(n,W.y+(n-W.x)/(ee.x-W.x)*(ee.y-W.y))._round():ee.x<n&&(ee=new k(n,W.y+(n-W.x)/(ee.x-W.x)*(ee.y-W.y))._round()),W.y<s&&ee.y<s||(W.y<s?W=new k(W.x+(s-W.y)/(ee.y-W.y)*(ee.x-W.x),s)._round():ee.y<s&&(ee=new k(W.x+(s-W.y)/(ee.y-W.y)*(ee.x-W.x),s)._round()),W.x>=h&&ee.x>=h||(W.x>=h?W=new k(h,W.y+(h-W.x)/(ee.x-W.x)*(ee.y-W.y))._round():ee.x>=h&&(ee=new k(h,W.y+(h-W.x)/(ee.x-W.x)*(ee.y-W.y))._round()),W.y>=p&&ee.y>=p||(W.y>=p?W=new k(W.x+(p-W.y)/(ee.y-W.y)*(ee.x-W.x),p)._round():ee.y>=p&&(ee=new k(W.x+(p-W.y)/(ee.y-W.y)*(ee.x-W.x),p)._round()),P&&W.equals(P[P.length-1])||(P=[W],v.push(P)),P.push(ee)))))}}return v}Bt("FeatureIndex",$w,{omit:["rawTileData","sourceLayerCoder"]});class zl extends k{constructor(n,s,h,p){super(n,s),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new zl(this.x,this.y,this.angle,this.segment)}}function Hw(o,n,s,h,p){if(n.segment===void 0||s===0)return!0;let v=n,x=n.segment+1,E=0;for(;E>-s/2;){if(x--,x<0)return!1;E-=o[x].dist(v),v=o[x]}E+=o[x].dist(o[x+1]),x++;const P=[];let z=0;for(;E<s/2;){const W=o[x],ee=o[x+1];if(!ee)return!1;let ae=o[x-1].angleTo(W)-W.angleTo(ee);for(ae=Math.abs((ae+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:E,angleDelta:ae}),z+=ae;E-P[0].distance>h;)z-=P.shift().angleDelta;if(z>p)return!1;x++,E+=W.dist(ee)}return!0}function Ww(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function Xw(o,n,s){return o?.6*n*s:0}function qw(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function ik(o,n,s,h,p,v){const x=Xw(s,p,v),E=qw(s,h)*v;let P=0;const z=Ww(o)/2;for(let W=0;W<o.length-1;W++){const ee=o[W],ae=o[W+1],me=ee.dist(ae);if(P+me>z){const ye=(z-P)/me,Pe=Ei.number(ee.x,ae.x,ye),Re=Ei.number(ee.y,ae.y,ye),Ne=new zl(Pe,Re,ae.angleTo(ee),W);return Ne._round(),!x||Hw(o,Ne,E,x,n)?Ne:void 0}P+=me}}function ok(o,n,s,h,p,v,x,E,P){const z=Xw(h,v,x),W=qw(h,p),ee=W*x,ae=o[0].x===0||o[0].x===P||o[0].y===0||o[0].y===P;return n-ee<n/4&&(n=ee+n/4),Kw(o,ae?n/2*E%n:(W/2+2*v)*x*E%n,n,z,s,ee,ae,!1,P)}function Kw(o,n,s,h,p,v,x,E,P){const z=v/2,W=Ww(o);let ee=0,ae=n-s,me=[];for(let ye=0;ye<o.length-1;ye++){const Pe=o[ye],Re=o[ye+1],Ne=Pe.dist(Re),Je=Re.angleTo(Pe);for(;ae+s<ee+Ne;){ae+=s;const Xe=(ae-ee)/Ne,Qe=Ei.number(Pe.x,Re.x,Xe),rt=Ei.number(Pe.y,Re.y,Xe);if(Qe>=0&&Qe<P&&rt>=0&&rt<P&&ae-z>=0&&ae+z<=W){const gt=new zl(Qe,rt,Je,ye);gt._round(),h&&!Hw(o,gt,v,h,p)||me.push(gt)}}ee+=Ne}return E||me.length||x||(me=Kw(o,ee/2,s,h,p,v,x,!0,P)),me}Bt("Anchor",zl);const Oc=ro;function Yw(o,n,s,h){const p=[],v=o.image,x=v.pixelRatio,E=v.paddedRect.w-2*Oc,P=v.paddedRect.h-2*Oc,z=o.right-o.left,W=o.bottom-o.top,ee=v.stretchX||[[0,E]],ae=v.stretchY||[[0,P]],me=(Ct,Nt)=>Ct+Nt[1]-Nt[0],ye=ee.reduce(me,0),Pe=ae.reduce(me,0),Re=E-ye,Ne=P-Pe;let Je=0,Xe=ye,Qe=0,rt=Pe,gt=0,Ft=Re,Vt=0,zt=Ne;if(v.content&&h){const Ct=v.content;Je=wp(ee,0,Ct[0]),Qe=wp(ae,0,Ct[1]),Xe=wp(ee,Ct[0],Ct[2]),rt=wp(ae,Ct[1],Ct[3]),gt=Ct[0]-Je,Vt=Ct[1]-Qe,Ft=Ct[2]-Ct[0]-Xe,zt=Ct[3]-Ct[1]-rt}const Mt=(Ct,Nt,Pt,bt)=>{const tn=bp(Ct.stretch-Je,Xe,z,o.left),Wt=Sp(Ct.fixed-gt,Ft,Ct.stretch,ye),Cn=bp(Nt.stretch-Qe,rt,W,o.top),cr=Sp(Nt.fixed-Vt,zt,Nt.stretch,Pe),fr=bp(Pt.stretch-Je,Xe,z,o.left),Xr=Sp(Pt.fixed-gt,Ft,Pt.stretch,ye),wo=bp(bt.stretch-Qe,rt,W,o.top),$i=Sp(bt.fixed-Vt,zt,bt.stretch,Pe),Rr=new k(tn,Cn),li=new k(fr,Cn),vi=new k(fr,wo),Vi=new k(tn,wo),Gi=new k(Wt/x,cr/x),qr=new k(Xr/x,$i/x),Kr=n*Math.PI/180;if(Kr){const Ai=Math.sin(Kr),io=Math.cos(Kr),oo=[io,-Ai,Ai,io];Rr._matMult(oo),li._matMult(oo),Vi._matMult(oo),vi._matMult(oo)}const Ii=Ct.stretch+Ct.fixed,Zi=Nt.stretch+Nt.fixed;return{tl:Rr,tr:li,bl:Vi,br:vi,tex:{x:v.paddedRect.x+Oc+Ii,y:v.paddedRect.y+Oc+Zi,w:Pt.stretch+Pt.fixed-Ii,h:bt.stretch+bt.fixed-Zi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gi,pixelOffsetBR:qr,minFontScaleX:Ft/x/z,minFontScaleY:zt/x/W,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const Ct=Jw(ee,Re,ye),Nt=Jw(ae,Ne,Pe);for(let Pt=0;Pt<Ct.length-1;Pt++){const bt=Ct[Pt],tn=Ct[Pt+1];for(let Wt=0;Wt<Nt.length-1;Wt++)p.push(Mt(bt,Nt[Wt],tn,Nt[Wt+1]))}}else p.push(Mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:P+1}));return p}function wp(o,n,s){let h=0;for(const p of o)h+=Math.max(n,Math.min(s,p[1]))-Math.max(n,Math.min(s,p[0]));return h}function Jw(o,n,s){const h=[{fixed:-Oc,stretch:0}];for(const[p,v]of o){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(v-p)})}return h.push({fixed:n+Oc,stretch:s}),h}function bp(o,n,s,h){return o/n*s+h}function Sp(o,n,s,h){return o-n*s/h}class Ep{constructor(n,s,h,p,v,x,E,P,z,W){if(this.boxStartIndex=n.length,z){let ee=x.top,ae=x.bottom;const me=x.collisionPadding;me&&(ee-=me[1],ae+=me[3]);let ye=ae-ee;ye>0&&(ye=Math.max(10,ye),this.circleDiameter=ye)}else{let ee=x.top*E-P[0],ae=x.bottom*E+P[2],me=x.left*E-P[3],ye=x.right*E+P[1];const Pe=x.collisionPadding;if(Pe&&(me-=Pe[0]*E,ee-=Pe[1]*E,ye+=Pe[2]*E,ae+=Pe[3]*E),W){const Re=new k(me,ee),Ne=new k(ye,ee),Je=new k(me,ae),Xe=new k(ye,ae),Qe=W*Math.PI/180;Re._rotate(Qe),Ne._rotate(Qe),Je._rotate(Qe),Xe._rotate(Qe),me=Math.min(Re.x,Ne.x,Je.x,Xe.x),ye=Math.max(Re.x,Ne.x,Je.x,Xe.x),ee=Math.min(Re.y,Ne.y,Je.y,Xe.y),ae=Math.max(Re.y,Ne.y,Je.y,Xe.y)}n.emplaceBack(s.x,s.y,me,ee,ye,ae,h,p,v)}this.boxEndIndex=n.length}}class sk{constructor(n=[],s=ak){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,p=s[n];for(;n>0;){const v=n-1>>1,x=s[v];if(h(p,x)>=0)break;s[n]=x,n=v}s[n]=p}_down(n){const{data:s,compare:h}=this,p=this.length>>1,v=s[n];for(;n<p;){let x=1+(n<<1),E=s[x];const P=x+1;if(P<this.length&&h(s[P],E)<0&&(x=P,E=s[P]),h(E,v)>=0)break;s[n]=E,n=x}s[n]=v}}function ak(o,n){return o<n?-1:o>n?1:0}function lk(o,n=1,s=!1){let h=1/0,p=1/0,v=-1/0,x=-1/0;const E=o[0];for(let me=0;me<E.length;me++){const ye=E[me];(!me||ye.x<h)&&(h=ye.x),(!me||ye.y<p)&&(p=ye.y),(!me||ye.x>v)&&(v=ye.x),(!me||ye.y>x)&&(x=ye.y)}const P=Math.min(v-h,x-p);let z=P/2;const W=new sk([],uk);if(P===0)return new k(h,p);for(let me=h;me<v;me+=P)for(let ye=p;ye<x;ye+=P)W.push(new Fc(me+z,ye+z,z,o));let ee=function(me){let ye=0,Pe=0,Re=0;const Ne=me[0];for(let Je=0,Xe=Ne.length,Qe=Xe-1;Je<Xe;Qe=Je++){const rt=Ne[Je],gt=Ne[Qe],Ft=rt.x*gt.y-gt.x*rt.y;Pe+=(rt.x+gt.x)*Ft,Re+=(rt.y+gt.y)*Ft,ye+=3*Ft}return new Fc(Pe/ye,Re/ye,0,me)}(o),ae=W.length;for(;W.length;){const me=W.pop();(me.d>ee.d||!ee.d)&&(ee=me,s&&console.log("found best %d after %d probes",Math.round(1e4*me.d)/1e4,ae)),me.max-ee.d<=n||(z=me.h/2,W.push(new Fc(me.p.x-z,me.p.y-z,z,o)),W.push(new Fc(me.p.x+z,me.p.y-z,z,o)),W.push(new Fc(me.p.x-z,me.p.y+z,z,o)),W.push(new Fc(me.p.x+z,me.p.y+z,z,o)),ae+=4)}return s&&(console.log(`num probes: ${ae}`),console.log(`best distance: ${ee.d}`)),ee.p}function uk(o,n){return n.max-o.max}function Fc(o,n,s,h){this.p=new k(o,n),this.h=s,this.d=function(p,v){let x=!1,E=1/0;for(let P=0;P<v.length;P++){const z=v[P];for(let W=0,ee=z.length,ae=ee-1;W<ee;ae=W++){const me=z[W],ye=z[ae];me.y>p.y!=ye.y>p.y&&p.x<(ye.x-me.x)*(p.y-me.y)/(ye.y-me.y)+me.x&&(x=!x),E=Math.min(E,Ox(p,me,ye))}}return(x?1:-1)*Math.sqrt(E)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var yi;l.aq=void 0,(yi=l.aq||(l.aq={}))[yi.center=1]="center",yi[yi.left=2]="left",yi[yi.right=3]="right",yi[yi.top=4]="top",yi[yi.bottom=5]="bottom",yi[yi["top-left"]=6]="top-left",yi[yi["top-right"]=7]="top-right",yi[yi["bottom-left"]=8]="bottom-left",yi[yi["bottom-right"]=9]="bottom-right";const Ol=7,Gy=Number.POSITIVE_INFINITY;function Qw(o,n){return n[1]!==Gy?function(s,h,p){let v=0,x=0;switch(h=Math.abs(h),p=Math.abs(p),s){case"top-right":case"top-left":case"top":x=p-Ol;break;case"bottom-right":case"bottom-left":case"bottom":x=-p+Ol}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(o,n[0],n[1]):function(s,h){let p=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-Ol;break;case"bottom-right":case"bottom-left":v=-x+Ol;break;case"bottom":v=-h+Ol;break;case"top":v=h-Ol}switch(s){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=h;break;case"right":p=-h}return[p,v]}(o,n[0])}function eb(o,n,s){var h;const p=o.layout,v=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(v){const E=v.values,P=[];for(let z=0;z<E.length;z+=2){const W=P[z]=E[z],ee=E[z+1].map(ae=>ae*Wr);W.startsWith("top")?ee[1]-=Ol:W.startsWith("bottom")&&(ee[1]+=Ol),P[z+1]=ee}return new Fi(P)}const x=p.get("text-variable-anchor");if(x){let E;E=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(n,{},s)*Wr,Gy]:p.get("text-offset").evaluate(n,{},s).map(z=>z*Wr);const P=[];for(const z of x)P.push(z,Qw(z,E));return new Fi(P)}return null}function Zy(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ck(o,n,s,h,p,v,x,E,P,z,W){let ee=v.textMaxSize.evaluate(n,{});ee===void 0&&(ee=x);const ae=o.layers[0].layout,me=ae.get("icon-offset").evaluate(n,{},W),ye=nb(s.horizontal),Pe=x/24,Re=o.tilePixelRatio*Pe,Ne=o.tilePixelRatio*ee/24,Je=o.tilePixelRatio*E,Xe=o.tilePixelRatio*ae.get("symbol-spacing"),Qe=ae.get("text-padding")*o.tilePixelRatio,rt=function(bt,tn,Wt,Cn=1){const cr=bt.get("icon-padding").evaluate(tn,{},Wt),fr=cr&&cr.values;return[fr[0]*Cn,fr[1]*Cn,fr[2]*Cn,fr[3]*Cn]}(ae,n,W,o.tilePixelRatio),gt=ae.get("text-max-angle")/180*Math.PI,Ft=ae.get("text-rotation-alignment")!=="viewport"&&ae.get("symbol-placement")!=="point",Vt=ae.get("icon-rotation-alignment")==="map"&&ae.get("symbol-placement")!=="point",zt=ae.get("symbol-placement"),Mt=Xe/2,Ct=ae.get("icon-text-fit");let Nt;h&&Ct!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Nt=Ew(h,s.vertical,Ct,ae.get("icon-text-fit-padding"),me,Pe)),ye&&(h=Ew(h,ye,Ct,ae.get("icon-text-fit-padding"),me,Pe)));const Pt=(bt,tn)=>{tn.x<0||tn.x>=Fr||tn.y<0||tn.y>=Fr||function(Wt,Cn,cr,fr,Xr,wo,$i,Rr,li,vi,Vi,Gi,qr,Kr,Ii,Zi,Ai,io,oo,Yr,Ln,Pi,_i,Jr,os){const Is=Wt.addToLineVertexArray(Cn,cr);let As,ja,ss,Oo,so=0,Da=0,Sf=0,sb=0,Qy=-1,e0=-1;const Ba={};let ab=za("");if(Wt.allowVerticalPlacement&&fr.vertical){const ki=Rr.layout.get("text-rotate").evaluate(Ln,{},Jr)+90;ss=new Ep(li,Cn,vi,Vi,Gi,fr.vertical,qr,Kr,Ii,ki),$i&&(Oo=new Ep(li,Cn,vi,Vi,Gi,$i,Ai,io,Ii,ki))}if(Xr){const ki=Rr.layout.get("icon-rotate").evaluate(Ln,{}),Fo=Rr.layout.get("icon-text-fit")!=="none",Bu=Yw(Xr,ki,_i,Fo),ks=$i?Yw($i,ki,_i,Fo):void 0;ja=new Ep(li,Cn,vi,Vi,Gi,Xr,Ai,io,!1,ki),so=4*Bu.length;const Nu=Wt.iconSizeData;let ra=null;Nu.kind==="source"?(ra=[na*Rr.layout.get("icon-size").evaluate(Ln,{})],ra[0]>Ml&&pe(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${_f}. Reduce your "icon-size".`)):Nu.kind==="composite"&&(ra=[na*Pi.compositeIconSizes[0].evaluate(Ln,{},Jr),na*Pi.compositeIconSizes[1].evaluate(Ln,{},Jr)],(ra[0]>Ml||ra[1]>Ml)&&pe(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${_f}. Reduce your "icon-size".`)),Wt.addSymbols(Wt.icon,Bu,ra,Yr,oo,Ln,l.ai.none,Cn,Is.lineStartIndex,Is.lineLength,-1,Jr),Qy=Wt.icon.placedSymbolArray.length-1,ks&&(Da=4*ks.length,Wt.addSymbols(Wt.icon,ks,ra,Yr,oo,Ln,l.ai.vertical,Cn,Is.lineStartIndex,Is.lineLength,-1,Jr),e0=Wt.icon.placedSymbolArray.length-1)}const lb=Object.keys(fr.horizontal);for(const ki of lb){const Fo=fr.horizontal[ki];if(!As){ab=za(Fo.text);const ks=Rr.layout.get("text-rotate").evaluate(Ln,{},Jr);As=new Ep(li,Cn,vi,Vi,Gi,Fo,qr,Kr,Ii,ks)}const Bu=Fo.positionedLines.length===1;if(Sf+=tb(Wt,Cn,Fo,wo,Rr,Ii,Ln,Zi,Is,fr.vertical?l.ai.horizontal:l.ai.horizontalOnly,Bu?lb:[ki],Ba,Qy,Pi,Jr),Bu)break}fr.vertical&&(sb+=tb(Wt,Cn,fr.vertical,wo,Rr,Ii,Ln,Zi,Is,l.ai.vertical,["vertical"],Ba,e0,Pi,Jr));const dk=As?As.boxStartIndex:Wt.collisionBoxArray.length,pk=As?As.boxEndIndex:Wt.collisionBoxArray.length,mk=ss?ss.boxStartIndex:Wt.collisionBoxArray.length,gk=ss?ss.boxEndIndex:Wt.collisionBoxArray.length,yk=ja?ja.boxStartIndex:Wt.collisionBoxArray.length,vk=ja?ja.boxEndIndex:Wt.collisionBoxArray.length,_k=Oo?Oo.boxStartIndex:Wt.collisionBoxArray.length,xk=Oo?Oo.boxEndIndex:Wt.collisionBoxArray.length;let Ps=-1;const Cp=(ki,Fo)=>ki&&ki.circleDiameter?Math.max(ki.circleDiameter,Fo):Fo;Ps=Cp(As,Ps),Ps=Cp(ss,Ps),Ps=Cp(ja,Ps),Ps=Cp(Oo,Ps);const ub=Ps>-1?1:0;ub&&(Ps*=os/Wr),Wt.glyphOffsetArray.length>=zc.MAX_GLYPHS&&pe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ln.sortKey!==void 0&&Wt.addToSortKeyRanges(Wt.symbolInstances.length,Ln.sortKey);const wk=eb(Rr,Ln,Jr),[bk,Sk]=function(ki,Fo){const Bu=ki.length,ks=Fo==null?void 0:Fo.values;if((ks==null?void 0:ks.length)>0)for(let Nu=0;Nu<ks.length;Nu+=2){const ra=ks[Nu+1];ki.emplaceBack(l.aq[ks[Nu]],ra[0],ra[1])}return[Bu,ki.length]}(Wt.textAnchorOffsets,wk);Wt.symbolInstances.emplaceBack(Cn.x,Cn.y,Ba.right>=0?Ba.right:-1,Ba.center>=0?Ba.center:-1,Ba.left>=0?Ba.left:-1,Ba.vertical||-1,Qy,e0,ab,dk,pk,mk,gk,yk,vk,_k,xk,vi,Sf,sb,so,Da,ub,0,qr,Ps,bk,Sk)}(o,tn,bt,s,h,p,Nt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Re,[Qe,Qe,Qe,Qe],Ft,P,Je,rt,Vt,me,n,v,z,W,x)};if(zt==="line")for(const bt of Zw(n.geometry,0,0,Fr,Fr)){const tn=ok(bt,Xe,gt,s.vertical||ye,h,24,Ne,o.overscaling,Fr);for(const Wt of tn)ye&&hk(o,ye.text,Mt,Wt)||Pt(bt,Wt)}else if(zt==="line-center"){for(const bt of n.geometry)if(bt.length>1){const tn=ik(bt,gt,s.vertical||ye,h,24,Ne);tn&&Pt(bt,tn)}}else if(n.type==="Polygon")for(const bt of Sy(n.geometry,0)){const tn=lk(bt,16);Pt(bt[0],new zl(tn.x,tn.y,0))}else if(n.type==="LineString")for(const bt of n.geometry)Pt(bt,new zl(bt[0].x,bt[0].y,0));else if(n.type==="Point")for(const bt of n.geometry)for(const tn of bt)Pt([tn],new zl(tn.x,tn.y,0))}function tb(o,n,s,h,p,v,x,E,P,z,W,ee,ae,me,ye){const Pe=function(Je,Xe,Qe,rt,gt,Ft,Vt,zt){const Mt=rt.layout.get("text-rotate").evaluate(Ft,{})*Math.PI/180,Ct=[];for(const Nt of Xe.positionedLines)for(const Pt of Nt.positionedGlyphs){if(!Pt.rect)continue;const bt=Pt.rect||{};let tn=yw+1,Wt=!0,Cn=1,cr=0;const fr=(gt||zt)&&Pt.vertical,Xr=Pt.metrics.advance*Pt.scale/2;if(zt&&Xe.verticalizable&&(cr=Nt.lineOffset/2-(Pt.imageName?-(Wr-Pt.metrics.width*Pt.scale)/2:(Pt.scale-1)*Wr)),Pt.imageName){const Yr=Vt[Pt.imageName];Wt=Yr.sdf,Cn=Yr.pixelRatio,tn=ro/Cn}const wo=gt?[Pt.x+Xr,Pt.y]:[0,0];let $i=gt?[0,0]:[Pt.x+Xr+Qe[0],Pt.y+Qe[1]-cr],Rr=[0,0];fr&&(Rr=$i,$i=[0,0]);const li=Pt.metrics.isDoubleResolution?2:1,vi=(Pt.metrics.left-tn)*Pt.scale-Xr+$i[0],Vi=(-Pt.metrics.top-tn)*Pt.scale+$i[1],Gi=vi+bt.w/li*Pt.scale/Cn,qr=Vi+bt.h/li*Pt.scale/Cn,Kr=new k(vi,Vi),Ii=new k(Gi,Vi),Zi=new k(vi,qr),Ai=new k(Gi,qr);if(fr){const Yr=new k(-Xr,Xr-yf),Ln=-Math.PI/2,Pi=Wr/2-Xr,_i=new k(5-yf-Pi,-(Pt.imageName?Pi:0)),Jr=new k(...Rr);Kr._rotateAround(Ln,Yr)._add(_i)._add(Jr),Ii._rotateAround(Ln,Yr)._add(_i)._add(Jr),Zi._rotateAround(Ln,Yr)._add(_i)._add(Jr),Ai._rotateAround(Ln,Yr)._add(_i)._add(Jr)}if(Mt){const Yr=Math.sin(Mt),Ln=Math.cos(Mt),Pi=[Ln,-Yr,Yr,Ln];Kr._matMult(Pi),Ii._matMult(Pi),Zi._matMult(Pi),Ai._matMult(Pi)}const io=new k(0,0),oo=new k(0,0);Ct.push({tl:Kr,tr:Ii,bl:Zi,br:Ai,tex:bt,writingMode:Xe.writingMode,glyphOffset:wo,sectionIndex:Pt.sectionIndex,isSDF:Wt,pixelOffsetTL:io,pixelOffsetBR:oo,minFontScaleX:0,minFontScaleY:0})}return Ct}(0,s,E,p,v,x,h,o.allowVerticalPlacement),Re=o.textSizeData;let Ne=null;Re.kind==="source"?(Ne=[na*p.layout.get("text-size").evaluate(x,{})],Ne[0]>Ml&&pe(`${o.layerIds[0]}: Value for "text-size" is >= ${_f}. Reduce your "text-size".`)):Re.kind==="composite"&&(Ne=[na*me.compositeTextSizes[0].evaluate(x,{},ye),na*me.compositeTextSizes[1].evaluate(x,{},ye)],(Ne[0]>Ml||Ne[1]>Ml)&&pe(`${o.layerIds[0]}: Value for "text-size" is >= ${_f}. Reduce your "text-size".`)),o.addSymbols(o.text,Pe,Ne,E,v,x,z,n,P.lineStartIndex,P.lineLength,ae,ye);for(const Je of W)ee[Je]=o.text.placedSymbolArray.length-1;return 4*Pe.length}function nb(o){for(const n in o)return o[n];return null}function hk(o,n,s,h){const p=o.compareText;if(n in p){const v=p[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<s)return!0}else p[n]=[];return p[n].push(h),!1}const rb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Hy{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=rb[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[E]=new Uint32Array(n,4,1);return new Hy(E,x,v,n)}constructor(n,s=64,h=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=rb.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,E=n*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-E%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+E+P,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+E+P),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+E+P,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Wy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:E}=this,P=[0,v.length-1,0],z=[];for(;P.length;){const W=P.pop()||0,ee=P.pop()||0,ae=P.pop()||0;if(ee-ae<=E){for(let Re=ae;Re<=ee;Re++){const Ne=x[2*Re],Je=x[2*Re+1];Ne>=n&&Ne<=h&&Je>=s&&Je<=p&&z.push(v[Re])}continue}const me=ae+ee>>1,ye=x[2*me],Pe=x[2*me+1];ye>=n&&ye<=h&&Pe>=s&&Pe<=p&&z.push(v[me]),(W===0?n<=ye:s<=Pe)&&(P.push(ae),P.push(me-1),P.push(1-W)),(W===0?h>=ye:p>=Pe)&&(P.push(me+1),P.push(ee),P.push(1-W))}return z}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:x}=this,E=[0,p.length-1,0],P=[],z=h*h;for(;E.length;){const W=E.pop()||0,ee=E.pop()||0,ae=E.pop()||0;if(ee-ae<=x){for(let Re=ae;Re<=ee;Re++)ob(v[2*Re],v[2*Re+1],n,s)<=z&&P.push(p[Re]);continue}const me=ae+ee>>1,ye=v[2*me],Pe=v[2*me+1];ob(ye,Pe,n,s)<=z&&P.push(p[me]),(W===0?n-h<=ye:s-h<=Pe)&&(E.push(ae),E.push(me-1),E.push(1-W)),(W===0?n+h>=ye:s+h>=Pe)&&(E.push(me+1),E.push(ee),E.push(1-W))}return P}}function Wy(o,n,s,h,p,v){if(p-h<=s)return;const x=h+p>>1;ib(o,n,x,h,p,v),Wy(o,n,s,h,x-1,1-v),Wy(o,n,s,x+1,p,1-v)}function ib(o,n,s,h,p,v){for(;p>h;){if(p-h>600){const z=p-h+1,W=s-h+1,ee=Math.log(z),ae=.5*Math.exp(2*ee/3),me=.5*Math.sqrt(ee*ae*(z-ae)/z)*(W-z/2<0?-1:1);ib(o,n,s,Math.max(h,Math.floor(s-W*ae/z+me)),Math.min(p,Math.floor(s+(z-W)*ae/z+me)),v)}const x=n[2*s+v];let E=h,P=p;for(wf(o,n,h,s),n[2*p+v]>x&&wf(o,n,h,p);E<P;){for(wf(o,n,E,P),E++,P--;n[2*E+v]<x;)E++;for(;n[2*P+v]>x;)P--}n[2*h+v]===x?wf(o,n,h,P):(P++,wf(o,n,P,p)),P<=s&&(h=P+1),s<=P&&(p=P-1)}}function wf(o,n,s,h){Xy(o,s,h),Xy(n,2*s,2*h),Xy(n,2*s+1,2*h+1)}function Xy(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function ob(o,n,s,h){const p=o-s,v=n-h;return p*p+v*v}var qy;l.bh=void 0,(qy=l.bh||(l.bh={})).create="create",qy.load="load",qy.fullLoad="fullLoad";let Tp=null,bf=[];const Ky=1e3/60,Yy="loadTime",Jy="fullLoadTime",fk={mark(o){performance.mark(o)},frame(o){const n=o;Tp!=null&&bf.push(n-Tp),Tp=n},clearMetrics(){Tp=null,bf=[],performance.clearMeasures(Yy),performance.clearMeasures(Jy);for(const o in l.bh)performance.clearMarks(l.bh[o])},getPerformanceMetrics(){performance.measure(Yy,l.bh.create,l.bh.load),performance.measure(Jy,l.bh.create,l.bh.fullLoad);const o=performance.getEntriesByName(Yy)[0].duration,n=performance.getEntriesByName(Jy)[0].duration,s=bf.length,h=1/(bf.reduce((v,x)=>v+x,0)/s/1e3),p=bf.filter(v=>v>Ky).reduce((v,x)=>v+(x-Ky)/Ky,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};l.$=function(o,n,s){var h,p,v,x,E,P,z,W,ee,ae,me,ye,Pe=s[0],Re=s[1],Ne=s[2];return n===o?(o[12]=n[0]*Pe+n[4]*Re+n[8]*Ne+n[12],o[13]=n[1]*Pe+n[5]*Re+n[9]*Ne+n[13],o[14]=n[2]*Pe+n[6]*Re+n[10]*Ne+n[14],o[15]=n[3]*Pe+n[7]*Re+n[11]*Ne+n[15]):(p=n[1],v=n[2],x=n[3],E=n[4],P=n[5],z=n[6],W=n[7],ee=n[8],ae=n[9],me=n[10],ye=n[11],o[0]=h=n[0],o[1]=p,o[2]=v,o[3]=x,o[4]=E,o[5]=P,o[6]=z,o[7]=W,o[8]=ee,o[9]=ae,o[10]=me,o[11]=ye,o[12]=h*Pe+E*Re+ee*Ne+n[12],o[13]=p*Pe+P*Re+ae*Ne+n[13],o[14]=v*Pe+z*Re+me*Ne+n[14],o[15]=x*Pe+W*Re+ye*Ne+n[15]),o},l.A=Ic,l.B=Ei,l.C=class{constructor(o,n,s){this.receive=h=>{const p=h.data,v=p.id;if(v&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else te()||p.mustQueue?(this.tasks[v]=p,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,p)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),p=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(h,p)},this.target=o,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new nk(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=te()?o:window}send(o,n,s,h,p=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[v]=s);const x=[],E={id:v,type:o,hasCallback:!!s,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:Qs(n,x)};return this.target.postMessage(E,{transfer:x}),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(o,n){if(n.type==="<response>"){const s=this.callbacks[o];delete this.callbacks[o],s&&(n.error?s(Tl(n.error)):s(null,Tl(n.data)))}else{let s=!1;const h=[],p=n.hasCallback?(E,P)=>{s=!0,delete this.cancelCallbacks[o];const z={id:o,type:"<response>",sourceMapId:this.mapId,error:E?Qs(E):null,data:Qs(P,h)};this.target.postMessage(z,{transfer:h})}:E=>{s=!0};let v=null;const x=Tl(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,p);else if("getWorkerSource"in this.parent){const E=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,E[0],x.source)[E[1]](x,p)}else p(new Error(`Could not find function ${n.type}`));!s&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.D=qt,l.E=gn,l.F=function(o,n){const s={};for(let h=0;h<n.length;h++){const p=n[h];p in o&&(s[p]=o[p])}return s},l.G=zw,l.H=Ow,l.I=zy,l.J=H,l.K=G,l.L=Ll,l.M=Te,l.N=Fr,l.O=zo,l.P=k,l.Q=pr,l.R=Lo,l.S=ur,l.T=ep,l.U=xp,l.V=class extends Ma{},l.W=Vy,l.X=function(o,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<o.length;h++){const p=window.document.createElement("source");Ut(o[h])||(s.crossOrigin="Anonymous"),p.src=o[h],s.appendChild(p)}return{cancel:()=>{}}},l.Y=je,l.Z=function(){var o=new Ic(16);return Ic!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l._=b,l.a=de,l.a$=class extends fe{},l.a0=function(o,n,s){var h=s[0],p=s[1],v=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*p,o[5]=n[5]*p,o[6]=n[6]*p,o[7]=n[7]*p,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.a1=Dx,l.a2=function(){return D++},l.a3=Oe,l.a4=zc,l.a5=function(){to.isLoading()||to.isLoaded()||qh()!=="deferred"||Qd()},l.a6=Gr,l.a7=ju,l.a8=lr,l.a9=Uw,l.aA=Mu,l.aB=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=j(o[s],n[o[s].ref]));return o},l.aC=function(o){if(o.type==="custom")return new tk(o);switch(o.type){case"background":return new JP(o);case"circle":return new jA(o);case"fill":return new rP(o);case"fill-extrusion":return new vP(o);case"heatmap":return new BA(o);case"hillshade":return new UA(o);case"line":return new CP(o);case"raster":return new ek(o);case"symbol":return new _p(o)}},l.aD=_e,l.aE=function(o,n){if(!o)return[{command:Be.setStyle,args:[n]}];let s=[];try{if(!ge(o.version,n.version))return[{command:Be.setStyle,args:[n]}];ge(o.center,n.center)||s.push({command:Be.setCenter,args:[n.center]}),ge(o.zoom,n.zoom)||s.push({command:Be.setZoom,args:[n.zoom]}),ge(o.bearing,n.bearing)||s.push({command:Be.setBearing,args:[n.bearing]}),ge(o.pitch,n.pitch)||s.push({command:Be.setPitch,args:[n.pitch]}),ge(o.sprite,n.sprite)||s.push({command:Be.setSprite,args:[n.sprite]}),ge(o.glyphs,n.glyphs)||s.push({command:Be.setGlyphs,args:[n.glyphs]}),ge(o.transition,n.transition)||s.push({command:Be.setTransition,args:[n.transition]}),ge(o.light,n.light)||s.push({command:Be.setLight,args:[n.light]});const h={},p=[];(function(x,E,P,z){let W;for(W in E=E||{},x=x||{})Object.prototype.hasOwnProperty.call(x,W)&&(Object.prototype.hasOwnProperty.call(E,W)||lt(W,P,z));for(W in E)Object.prototype.hasOwnProperty.call(E,W)&&(Object.prototype.hasOwnProperty.call(x,W)?ge(x[W],E[W])||(x[W].type==="geojson"&&E[W].type==="geojson"&&L(x,E,W)?P.push({command:Be.setGeoJSONSourceData,args:[W,E[W].data]}):le(W,E,P,z)):et(W,E,P))})(o.sources,n.sources,p,h);const v=[];o.layers&&o.layers.forEach(x=>{h[x.source]?s.push({command:Be.removeLayer,args:[x.id]}):v.push(x)}),s=s.concat(p),function(x,E,P){E=E||[];const z=(x=x||[]).map(Ee),W=E.map(Ee),ee=x.reduce(Ge,{}),ae=E.reduce(Ge,{}),me=z.slice(),ye=Object.create(null);let Pe,Re,Ne,Je,Xe,Qe,rt;for(Pe=0,Re=0;Pe<z.length;Pe++)Ne=z[Pe],Object.prototype.hasOwnProperty.call(ae,Ne)?Re++:(P.push({command:Be.removeLayer,args:[Ne]}),me.splice(me.indexOf(Ne,Re),1));for(Pe=0,Re=0;Pe<W.length;Pe++)Ne=W[W.length-1-Pe],me[me.length-1-Pe]!==Ne&&(Object.prototype.hasOwnProperty.call(ee,Ne)?(P.push({command:Be.removeLayer,args:[Ne]}),me.splice(me.lastIndexOf(Ne,me.length-Re),1)):Re++,Qe=me[me.length-Pe],P.push({command:Be.addLayer,args:[ae[Ne],Qe]}),me.splice(me.length-Pe,0,Ne),ye[Ne]=!0);for(Pe=0;Pe<W.length;Pe++)if(Ne=W[Pe],Je=ee[Ne],Xe=ae[Ne],!ye[Ne]&&!ge(Je,Xe))if(ge(Je.source,Xe.source)&&ge(Je["source-layer"],Xe["source-layer"])&&ge(Je.type,Xe.type)){for(rt in U(Je.layout,Xe.layout,P,Ne,null,Be.setLayoutProperty),U(Je.paint,Xe.paint,P,Ne,null,Be.setPaintProperty),ge(Je.filter,Xe.filter)||P.push({command:Be.setFilter,args:[Ne,Xe.filter]}),ge(Je.minzoom,Xe.minzoom)&&ge(Je.maxzoom,Xe.maxzoom)||P.push({command:Be.setLayerZoomRange,args:[Ne,Xe.minzoom,Xe.maxzoom]}),Je)Object.prototype.hasOwnProperty.call(Je,rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?U(Je[rt],Xe[rt],P,Ne,rt.slice(6),Be.setPaintProperty):ge(Je[rt],Xe[rt])||P.push({command:Be.setLayerProperty,args:[Ne,rt,Xe[rt]]}));for(rt in Xe)Object.prototype.hasOwnProperty.call(Xe,rt)&&!Object.prototype.hasOwnProperty.call(Je,rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?U(Je[rt],Xe[rt],P,Ne,rt.slice(6),Be.setPaintProperty):ge(Je[rt],Xe[rt])||P.push({command:Be.setLayerProperty,args:[Ne,rt,Xe[rt]]}))}else P.push({command:Be.removeLayer,args:[Ne]}),Qe=me[me.lastIndexOf(Ne)+1],P.push({command:Be.addLayer,args:[Xe,Qe]})}(v,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:Be.setStyle,args:[n]}]}return s},l.aF=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},l.aG=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},l.aH=Q,l.aI=Y,l.aJ=Lu,l.aK=function(o){return o({pluginStatus:Bi,pluginURL:ea}),Lu.on("pluginStateChange",o),o},l.aL=class extends Oa{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.aM=Tc,l.aN=class extends Oa{constructor(o,n){super(o,n),this.current=hy}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.aO=ip,l.aP=class extends Oa{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.aQ=class extends Oa{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.aR=op,l.aS=function(o,n,s,h,p,v,x){var E=1/(n-s),P=1/(h-p),z=1/(v-x);return o[0]=-2*E,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*P,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*z,o[11]=0,o[12]=(n+s)*E,o[13]=(p+h)*P,o[14]=(x+v)*z,o[15]=1,o},l.aT=Gn,l.aU=RA,l.aV=class extends f{},l.aW=kP,l.aX=class extends _{},l.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.aZ=Vx,l.a_=Et,l.aa=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,p,v)=>{const x=p||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},l.ab=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},l.ac=function(o){if(ne==null){const n=o.navigator?o.navigator.userAgent:null;ne=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return ne},l.ad=V,l.ae=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[0],x=n[1],E=n[2],P=n[3],z=n[4],W=n[5],ee=n[6],ae=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*p+z*h,o[1]=x*p+W*h,o[2]=E*p+ee*h,o[3]=P*p+ae*h,o[4]=z*p-v*h,o[5]=W*p-x*h,o[6]=ee*p-E*h,o[7]=ae*p-P*h,o},l.af=function(o){var n=new Ic(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},l.ag=up,l.ah=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:x}=o,E=p?V(mi.interpolationFactor(p,n,v,x),0,1):0;o.kind==="camera"?h=Ei.number(o.minSize,o.maxSize,E):s=E}return{uSizeT:s,uSize:h}},l.aj=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/na:o.kind==="composite"?Ei.number(h/na,p/na,s):n},l.ak=jy,l.al=function(o,n,s,h){const p=n.y-o.y,v=n.x-o.x,x=h.y-s.y,E=h.x-s.x,P=x*v-E*p;if(P===0)return null;const z=(E*(o.y-s.y)-x*(o.x-s.x))/P;return new k(o.x+z*v,o.y+z*p)},l.am=Zw,l.an=Lx,l.ao=gy,l.ap=Wr,l.ar=Ry,l.as=function(o,n){var s=n[0],h=n[1],p=n[2],v=n[3],x=n[4],E=n[5],P=n[6],z=n[7],W=n[8],ee=n[9],ae=n[10],me=n[11],ye=n[12],Pe=n[13],Re=n[14],Ne=n[15],Je=s*E-h*x,Xe=s*P-p*x,Qe=s*z-v*x,rt=h*P-p*E,gt=h*z-v*E,Ft=p*z-v*P,Vt=W*Pe-ee*ye,zt=W*Re-ae*ye,Mt=W*Ne-me*ye,Ct=ee*Re-ae*Pe,Nt=ee*Ne-me*Pe,Pt=ae*Ne-me*Re,bt=Je*Pt-Xe*Nt+Qe*Ct+rt*Mt-gt*zt+Ft*Vt;return bt?(o[0]=(E*Pt-P*Nt+z*Ct)*(bt=1/bt),o[1]=(p*Nt-h*Pt-v*Ct)*bt,o[2]=(Pe*Ft-Re*gt+Ne*rt)*bt,o[3]=(ae*gt-ee*Ft-me*rt)*bt,o[4]=(P*Mt-x*Pt-z*zt)*bt,o[5]=(s*Pt-p*Mt+v*zt)*bt,o[6]=(Re*Qe-ye*Ft-Ne*Xe)*bt,o[7]=(W*Ft-ae*Qe+me*Xe)*bt,o[8]=(x*Nt-E*Mt+z*Vt)*bt,o[9]=(h*Mt-s*Nt-v*Vt)*bt,o[10]=(ye*gt-Pe*Qe+Ne*Je)*bt,o[11]=(ee*Qe-W*gt-me*Je)*bt,o[12]=(E*zt-x*Ct-P*Vt)*bt,o[13]=(s*Ct-h*zt+p*Vt)*bt,o[14]=(Pe*Xe-ye*rt-Re*Je)*bt,o[15]=(W*rt-ee*Xe+ae*Je)*bt,o):null},l.at=Zy,l.au=Fy,l.av=Hy,l.aw=function(){const o={},n=ie.$version;for(const s in ie.$root){const h=ie.$root[s];if(h.required){let p=null;p=s==="version"?n:h.type==="array"?[]:{},p!=null&&(o[s]=p)}}return o},l.ax=Be,l.ay=qd,l.az=vt,l.b=function(o,n){const s=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(s).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.b0=si,l.b1=function(o,n){var s=o[0],h=o[1],p=o[2],v=o[3],x=o[4],E=o[5],P=o[6],z=o[7],W=o[8],ee=o[9],ae=o[10],me=o[11],ye=o[12],Pe=o[13],Re=o[14],Ne=o[15],Je=n[0],Xe=n[1],Qe=n[2],rt=n[3],gt=n[4],Ft=n[5],Vt=n[6],zt=n[7],Mt=n[8],Ct=n[9],Nt=n[10],Pt=n[11],bt=n[12],tn=n[13],Wt=n[14],Cn=n[15];return Math.abs(s-Je)<=Ui*Math.max(1,Math.abs(s),Math.abs(Je))&&Math.abs(h-Xe)<=Ui*Math.max(1,Math.abs(h),Math.abs(Xe))&&Math.abs(p-Qe)<=Ui*Math.max(1,Math.abs(p),Math.abs(Qe))&&Math.abs(v-rt)<=Ui*Math.max(1,Math.abs(v),Math.abs(rt))&&Math.abs(x-gt)<=Ui*Math.max(1,Math.abs(x),Math.abs(gt))&&Math.abs(E-Ft)<=Ui*Math.max(1,Math.abs(E),Math.abs(Ft))&&Math.abs(P-Vt)<=Ui*Math.max(1,Math.abs(P),Math.abs(Vt))&&Math.abs(z-zt)<=Ui*Math.max(1,Math.abs(z),Math.abs(zt))&&Math.abs(W-Mt)<=Ui*Math.max(1,Math.abs(W),Math.abs(Mt))&&Math.abs(ee-Ct)<=Ui*Math.max(1,Math.abs(ee),Math.abs(Ct))&&Math.abs(ae-Nt)<=Ui*Math.max(1,Math.abs(ae),Math.abs(Nt))&&Math.abs(me-Pt)<=Ui*Math.max(1,Math.abs(me),Math.abs(Pt))&&Math.abs(ye-bt)<=Ui*Math.max(1,Math.abs(ye),Math.abs(bt))&&Math.abs(Pe-tn)<=Ui*Math.max(1,Math.abs(Pe),Math.abs(tn))&&Math.abs(Re-Wt)<=Ui*Math.max(1,Math.abs(Re),Math.abs(Wt))&&Math.abs(Ne-Cn)<=Ui*Math.max(1,Math.abs(Ne),Math.abs(Cn))},l.b2=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.b3=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},l.b4=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},l.b5=C,l.b6=Dw,l.b7=Fw,l.b8=function(o,n,s,h,p){var v,x=1/Math.tan(n/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(v=1/(h-p)),o[14]=2*p*h*v):(o[10]=-1,o[14]=-2*h),o},l.b9=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[4],x=n[5],E=n[6],P=n[7],z=n[8],W=n[9],ee=n[10],ae=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*p+z*h,o[5]=x*p+W*h,o[6]=E*p+ee*h,o[7]=P*p+ae*h,o[8]=z*p-v*h,o[9]=W*p-x*h,o[10]=ee*p-E*h,o[11]=ae*p-P*h,o},l.bA=A,l.bB=cw,l.bC=bs,l.bD=to,l.ba=se,l.bb=X,l.bc=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},l.bd=class extends Fu{},l.be=Uy,l.bf=Rw,l.bg=fk,l.bi=ct,l.bj=function(o,n,s=!1){if(Bi===Gh||Bi===Zh||Bi===Hh)throw new Error("setRTLTextPlugin cannot be called multiple times.");ea=Ze.resolveURL(o),Bi=Gh,Wh=n,Xh(),s||Qd()},l.bk=qh,l.bl=function(o,n){const s={};for(let p=0;p<o.length;p++){const v=n&&n[o[p].id]||Ca(o[p]);n&&(n[o[p].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(o[p])}const h=[];for(const p in s)h.push(s[p]);return h},l.bm=Bt,l.bn=Nw,l.bo=$w,l.bp=_w,l.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Fr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new lr(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new lr(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new lr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:z,maxZoom:W}=o.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new lr(z),o.canonical),h["text-size"].possiblyEvaluate(new lr(W),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:z,maxZoom:W}=o.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new lr(z),o.canonical),h["icon-size"].possiblyEvaluate(new lr(W),o.canonical)]}const v=s.get("text-line-height")*Wr,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",E=s.get("text-keep-upright"),P=s.get("text-size");for(const z of o.bucket.features){const W=s.get("text-font").evaluate(z,{},o.canonical).join(","),ee=P.evaluate(z,{},o.canonical),ae=p.layoutTextSize.evaluate(z,{},o.canonical),me=p.layoutIconSize.evaluate(z,{},o.canonical),ye={horizontal:{},vertical:void 0},Pe=z.text;let Re,Ne=[0,0];if(Pe){const Qe=Pe.toString(),rt=s.get("text-letter-spacing").evaluate(z,{},o.canonical)*Wr,gt=$h(Qe)?rt:0,Ft=s.get("text-anchor").evaluate(z,{},o.canonical),Vt=eb(n,z,o.canonical);if(!Vt){const Pt=s.get("text-radial-offset").evaluate(z,{},o.canonical);Ne=Pt?Qw(Ft,[Pt*Wr,Gy]):s.get("text-offset").evaluate(z,{},o.canonical).map(bt=>bt*Wr)}let zt=x?"center":s.get("text-justify").evaluate(z,{},o.canonical);const Mt=s.get("symbol-placement"),Ct=Mt==="point"?s.get("text-max-width").evaluate(z,{},o.canonical)*Wr:0,Nt=()=>{o.bucket.allowVerticalPlacement&&Uh(Qe)&&(ye.vertical=gp(Pe,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ct,v,Ft,"left",gt,Ne,l.ai.vertical,!0,Mt,ae,ee))};if(!x&&Vt){const Pt=new Set;if(zt==="auto")for(let tn=0;tn<Vt.values.length;tn+=2)Pt.add(Zy(Vt.values[tn]));else Pt.add(zt);let bt=!1;for(const tn of Pt)if(!ye.horizontal[tn])if(bt)ye.horizontal[tn]=ye.horizontal[0];else{const Wt=gp(Pe,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ct,v,"center",tn,gt,Ne,l.ai.horizontal,!1,Mt,ae,ee);Wt&&(ye.horizontal[tn]=Wt,bt=Wt.positionedLines.length===1)}Nt()}else{zt==="auto"&&(zt=Zy(Ft));const Pt=gp(Pe,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ct,v,Ft,zt,gt,Ne,l.ai.horizontal,!1,Mt,ae,ee);Pt&&(ye.horizontal[zt]=Pt),Nt(),Uh(Qe)&&x&&E&&(ye.vertical=gp(Pe,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ct,v,Ft,zt,gt,Ne,l.ai.vertical,!1,Mt,ae,ee))}}let Je=!1;if(z.icon&&z.icon.name){const Qe=o.imageMap[z.icon.name];Qe&&(Re=WP(o.imagePositions[z.icon.name],s.get("icon-offset").evaluate(z,{},o.canonical),s.get("icon-anchor").evaluate(z,{},o.canonical)),Je=!!Qe.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Je:o.bucket.sdfIcons!==Je&&pe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Qe.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Xe=nb(ye.horizontal)||ye.vertical;o.bucket.iconsInText=!!Xe&&Xe.iconsInText,(Xe||Re)&&ck(o.bucket,z,ye,Re,o.imageMap,p,ae,me,Ne,Je,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},l.br=Py,l.bs=Cy,l.bt=Ay,l.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.bv=My,l.bw=Pl,l.bx=function(o,n,s,h,p){return b(this,void 0,void 0,function*(){if(G())try{return yield Te(o,n,s,h,p)}catch{}return function(v,x,E,P,z){const W=v.width,ee=v.height;$e&&Ie||($e=new OffscreenCanvas(W,ee),Ie=$e.getContext("2d",{willReadFrequently:!0})),$e.width=W,$e.height=ee,Ie.drawImage(v,0,0,W,ee);const ae=Ie.getImageData(x,E,P,z);return Ie.clearRect(0,0,W,ee),ae.data}(o,n,s,h,p)})},l.by=Bw,l.bz=w,l.c=nt,l.d=function(o,n){const s=new Image;s.onload=()=>{n(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=Se})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(o)],{type:"image/png"});s.src=o.byteLength?URL.createObjectURL(h):Se},l.e=F,l.f=function(o,n){return St(F(o,{type:"json"}),n)},l.g=It,l.h=Ze,l.i=te,l.j=sn,l.k=yn,l.l=Gt,l.m=St,l.n=function(o){return new My(o).readFields(UP,[])},l.o=function(o,n,s){if(!o.length)return s(null,[]);let h=o.length;const p=new Array(o.length);let v=null;o.forEach((x,E)=>{n(x,(P,z)=>{P&&(v=P),p[E]=z,--h==0&&s(v,p)})})},l.p=vw,l.q=uf,l.r=Ir,l.s=Ut,l.t=Jo,l.u=Ot,l.v=ie,l.w=pe,l.x=Pa,l.y=tr,l.z=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}}}),d(["./shared"],function(l){class b{constructor(re){this.keyCache={},re&&this.replace(re)}replace(re){this._layerConfigs={},this._layers={},this.update(re,[])}update(re,he){for(const be of re){this._layerConfigs[be.id]=be;const Ce=this._layers[be.id]=l.aC(be);Ce._featureFilter=l.a6(Ce.filter),this.keyCache[be.id]&&delete this.keyCache[be.id]}for(const be of he)delete this.keyCache[be],delete this._layerConfigs[be],delete this._layers[be];this.familiesBySource={};const xe=l.bl(Object.values(this._layerConfigs),this.keyCache);for(const be of xe){const Ce=be.map(ht=>this._layers[ht.id]),He=Ce[0];if(He.visibility==="none")continue;const Ve=He.source||"";let Fe=this.familiesBySource[Ve];Fe||(Fe=this.familiesBySource[Ve]={});const qe=He.sourceLayer||"_geojsonTileLayer";let ut=Fe[qe];ut||(ut=Fe[qe]=[]),ut.push(Ce)}}}class w{constructor(re){const he={},xe=[];for(const Ve in re){const Fe=re[Ve],qe=he[Ve]={};for(const ut in Fe){const ht=Fe[+ut];if(!ht||ht.bitmap.width===0||ht.bitmap.height===0)continue;const mt={x:0,y:0,w:ht.bitmap.width+2,h:ht.bitmap.height+2};xe.push(mt),qe[ut]={rect:mt,metrics:ht.metrics}}}const{w:be,h:Ce}=l.p(xe),He=new l.q({width:be||1,height:Ce||1});for(const Ve in re){const Fe=re[Ve];for(const qe in Fe){const ut=Fe[+qe];if(!ut||ut.bitmap.width===0||ut.bitmap.height===0)continue;const ht=he[Ve][qe].rect;l.q.copy(ut.bitmap,He,{x:0,y:0},{x:ht.x+1,y:ht.y+1},ut.bitmap)}}this.image=He,this.positions=he}}l.bm("GlyphAtlas",w);class A{constructor(re){this.tileID=new l.O(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.uid=re.uid,this.zoom=re.zoom,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=re.showCollisionBoxes,this.collectResourceTiming=!!re.collectResourceTiming,this.returnDependencies=!!re.returnDependencies,this.promoteId=re.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(re,he,xe,be,Ce){this.status="parsing",this.data=re,this.collisionBoxArray=new l.a3;const He=new l.bn(Object.keys(re.layers).sort()),Ve=new l.bo(this.tileID,this.promoteId);Ve.bucketLayerIDs=[];const Fe={},qe={featureIndex:Ve,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:xe},ut=he.familiesBySource[this.source];for(const On in ut){const Mn=re.layers[On];if(!Mn)continue;Mn.version===1&&l.w(`Vector tile source "${this.source}" layer "${On}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ei=He.encode(On),qn=[];for(let br=0;br<Mn.length;br++){const Ur=Mn.feature(br),ri=Ve.getId(Ur,On);qn.push({feature:Ur,id:ri,index:br,sourceLayerIndex:ei})}for(const br of ut[On]){const Ur=br[0];Ur.source!==this.source&&l.w(`layer.source = ${Ur.source} does not equal this.source = ${this.source}`),Ur.minzoom&&this.zoom<Math.floor(Ur.minzoom)||Ur.maxzoom&&this.zoom>=Ur.maxzoom||Ur.visibility!=="none"&&(S(br,this.zoom,xe),(Fe[Ur.id]=Ur.createBucket({index:Ve.bucketLayerIDs.length,layers:br,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ei,sourceID:this.source})).populate(qn,qe,this.tileID.canonical),Ve.bucketLayerIDs.push(br.map(ri=>ri.id)))}}let ht,mt,Jt,un;const Dt=l.aH(qe.glyphDependencies,On=>Object.keys(On).map(Number));this.inFlightDependencies.forEach(On=>On==null?void 0:On.cancel()),this.inFlightDependencies=[];const Qt=++this.dependencySentinel;Object.keys(Dt).length?this.inFlightDependencies.push(be.send("getGlyphs",{uid:this.uid,stacks:Dt,source:this.source,tileID:this.tileID,type:"glyphs"},(On,Mn)=>{Qt===this.dependencySentinel&&(ht||(ht=On,mt=Mn,jn.call(this)))})):mt={};const fn=Object.keys(qe.iconDependencies);fn.length?this.inFlightDependencies.push(be.send("getImages",{icons:fn,source:this.source,tileID:this.tileID,type:"icons"},(On,Mn)=>{Qt===this.dependencySentinel&&(ht||(ht=On,Jt=Mn,jn.call(this)))})):Jt={};const Rn=Object.keys(qe.patternDependencies);function jn(){if(ht)return Ce(ht);if(mt&&Jt&&un){const On=new w(mt),Mn=new l.bp(Jt,un);for(const ei in Fe){const qn=Fe[ei];qn instanceof l.a4?(S(qn.layers,this.zoom,xe),l.bq({bucket:qn,glyphMap:mt,glyphPositions:On.positions,imageMap:Jt,imagePositions:Mn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):qn.hasPattern&&(qn instanceof l.br||qn instanceof l.bs||qn instanceof l.bt)&&(S(qn.layers,this.zoom,xe),qn.addFeatures(qe,this.tileID.canonical,Mn.patternPositions))}this.status="done",Ce(null,{buckets:Object.values(Fe).filter(ei=>!ei.isEmpty()),featureIndex:Ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:On.image,imageAtlas:Mn,glyphMap:this.returnDependencies?mt:null,iconMap:this.returnDependencies?Jt:null,glyphPositions:this.returnDependencies?On.positions:null})}}Rn.length?this.inFlightDependencies.push(be.send("getImages",{icons:Rn,source:this.source,tileID:this.tileID,type:"patterns"},(On,Mn)=>{Qt===this.dependencySentinel&&(ht||(ht=On,un=Mn,jn.call(this)))})):un={},jn.call(this)}}function S(ze,re,he){const xe=new l.a8(re);for(const be of ze)be.recalculate(xe,he)}function k(ze,re){const he=l.l(ze.request,(xe,be,Ce,He)=>{if(xe)re(xe);else if(be)try{const Ve=new l.bw.VectorTile(new l.bv(be));re(null,{vectorTile:Ve,rawData:be,cacheControl:Ce,expires:He})}catch(Ve){const Fe=new Uint8Array(be);let qe=`Unable to parse the tile at ${ze.request.url}, `;qe+=Fe[0]===31&&Fe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ve.messge}`,re(new Error(qe))}});return()=>{he.cancel(),re()}}class O{constructor(re,he,xe,be){this.actor=re,this.layerIndex=he,this.availableImages=xe,this.loadVectorData=be||k,this.fetching={},this.loading={},this.loaded={}}loadTile(re,he){const xe=re.uid;this.loading||(this.loading={});const be=!!(re&&re.request&&re.request.collectResourceTiming)&&new l.bu(re.request),Ce=this.loading[xe]=new A(re);Ce.abort=this.loadVectorData(re,(He,Ve)=>{if(delete this.loading[xe],He||!Ve)return Ce.status="done",this.loaded[xe]=Ce,he(He);const Fe=Ve.rawData,qe={};Ve.expires&&(qe.expires=Ve.expires),Ve.cacheControl&&(qe.cacheControl=Ve.cacheControl);const ut={};if(be){const ht=be.finish();ht&&(ut.resourceTiming=JSON.parse(JSON.stringify(ht)))}Ce.vectorTile=Ve.vectorTile,Ce.parse(Ve.vectorTile,this.layerIndex,this.availableImages,this.actor,(ht,mt)=>{if(delete this.fetching[xe],ht||!mt)return he(ht);he(null,l.e({rawTileData:Fe.slice(0)},mt,qe,ut))}),this.loaded=this.loaded||{},this.loaded[xe]=Ce,this.fetching[xe]={rawTileData:Fe,cacheControl:qe,resourceTiming:ut}})}reloadTile(re,he){const xe=this.loaded,be=re.uid;if(xe&&xe[be]){const Ce=xe[be];Ce.showCollisionBoxes=re.showCollisionBoxes,Ce.status==="parsing"?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,(He,Ve)=>{if(He||!Ve)return he(He,Ve);let Fe;if(this.fetching[be]){const{rawTileData:qe,cacheControl:ut,resourceTiming:ht}=this.fetching[be];delete this.fetching[be],Fe=l.e({rawTileData:qe.slice(0)},Ve,ut,ht)}else Fe=Ve;he(null,Fe)}):Ce.status==="done"&&(Ce.vectorTile?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,he):he())}}abortTile(re,he){const xe=this.loading,be=re.uid;xe&&xe[be]&&xe[be].abort&&(xe[be].abort(),delete xe[be]),he()}removeTile(re,he){const xe=this.loaded,be=re.uid;xe&&xe[be]&&delete xe[be],he()}}class N{constructor(){this.loaded={}}loadTile(re,he){return l._(this,void 0,void 0,function*(){const{uid:xe,encoding:be,rawImageData:Ce,redFactor:He,greenFactor:Ve,blueFactor:Fe,baseShift:qe}=re,ut=Ce.width+2,ht=Ce.height+2,mt=l.a(Ce)?new l.R({width:ut,height:ht},yield l.bx(Ce,-1,-1,ut,ht)):Ce,Jt=new l.by(xe,mt,be,He,Ve,Fe,qe);this.loaded=this.loaded||{},this.loaded[xe]=Jt,he(null,Jt)})}removeTile(re){const he=this.loaded,xe=re.uid;he&&he[xe]&&delete he[xe]}}function R(ze,re){if(ze.length!==0){ce(ze[0],re);for(var he=1;he<ze.length;he++)ce(ze[he],!re)}}function ce(ze,re){for(var he=0,xe=0,be=0,Ce=ze.length,He=Ce-1;be<Ce;He=be++){var Ve=(ze[be][0]-ze[He][0])*(ze[He][1]+ze[be][1]),Fe=he+Ve;xe+=Math.abs(he)>=Math.abs(Ve)?he-Fe+Ve:Ve-Fe+he,he=Fe}he+xe>=0!=!!re&&ze.reverse()}var K=l.bz(function ze(re,he){var xe,be=re&&re.type;if(be==="FeatureCollection")for(xe=0;xe<re.features.length;xe++)ze(re.features[xe],he);else if(be==="GeometryCollection")for(xe=0;xe<re.geometries.length;xe++)ze(re.geometries[xe],he);else if(be==="Feature")ze(re.geometry,he);else if(be==="Polygon")R(re.coordinates,he);else if(be==="MultiPolygon")for(xe=0;xe<re.coordinates.length;xe++)R(re.coordinates[xe],he);return re});const H=l.bw.VectorTileFeature.prototype.toGeoJSON;var G={exports:{}},se=l.bA,X=l.bw.VectorTileFeature,V=C;function C(ze,re){this.options=re||{},this.features=ze,this.length=ze.length}function F(ze,re){this.id=typeof ze.id=="number"?ze.id:void 0,this.type=ze.type,this.rawGeometry=ze.type===1?[ze.geometry]:ze.geometry,this.properties=ze.tags,this.extent=re||4096}C.prototype.feature=function(ze){return new F(this.features[ze],this.options.extent)},F.prototype.loadGeometry=function(){var ze=this.rawGeometry;this.geometry=[];for(var re=0;re<ze.length;re++){for(var he=ze[re],xe=[],be=0;be<he.length;be++)xe.push(new se(he[be][0],he[be][1]));this.geometry.push(xe)}return this.geometry},F.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ze=this.geometry,re=1/0,he=-1/0,xe=1/0,be=-1/0,Ce=0;Ce<ze.length;Ce++)for(var He=ze[Ce],Ve=0;Ve<He.length;Ve++){var Fe=He[Ve];re=Math.min(re,Fe.x),he=Math.max(he,Fe.x),xe=Math.min(xe,Fe.y),be=Math.max(be,Fe.y)}return[re,xe,he,be]},F.prototype.toGeoJSON=X.prototype.toGeoJSON;var D=l.bB,Q=V;function Y(ze){var re=new D;return function(he,xe){for(var be in he.layers)xe.writeMessage(3,_e,he.layers[be])}(ze,re),re.finish()}function _e(ze,re){var he;re.writeVarintField(15,ze.version||1),re.writeStringField(1,ze.name||""),re.writeVarintField(5,ze.extent||4096);var xe={keys:[],values:[],keycache:{},valuecache:{}};for(he=0;he<ze.length;he++)xe.feature=ze.feature(he),re.writeMessage(2,we,xe);var be=xe.keys;for(he=0;he<be.length;he++)re.writeStringField(3,be[he]);var Ce=xe.values;for(he=0;he<Ce.length;he++)re.writeMessage(4,ne,Ce[he])}function we(ze,re){var he=ze.feature;he.id!==void 0&&re.writeVarintField(1,he.id),re.writeMessage(2,pe,ze),re.writeVarintField(3,he.type),re.writeMessage(4,te,he)}function pe(ze,re){var he=ze.feature,xe=ze.keys,be=ze.values,Ce=ze.keycache,He=ze.valuecache;for(var Ve in he.properties){var Fe=he.properties[Ve],qe=Ce[Ve];if(Fe!==null){qe===void 0&&(xe.push(Ve),Ce[Ve]=qe=xe.length-1),re.writeVarint(qe);var ut=typeof Fe;ut!=="string"&&ut!=="boolean"&&ut!=="number"&&(Fe=JSON.stringify(Fe));var ht=ut+":"+Fe,mt=He[ht];mt===void 0&&(be.push(Fe),He[ht]=mt=be.length-1),re.writeVarint(mt)}}}function oe(ze,re){return(re<<3)+(7&ze)}function ue(ze){return ze<<1^ze>>31}function te(ze,re){for(var he=ze.loadGeometry(),xe=ze.type,be=0,Ce=0,He=he.length,Ve=0;Ve<He;Ve++){var Fe=he[Ve],qe=1;xe===1&&(qe=Fe.length),re.writeVarint(oe(1,qe));for(var ut=xe===3?Fe.length-1:Fe.length,ht=0;ht<ut;ht++){ht===1&&xe!==1&&re.writeVarint(oe(2,ut-1));var mt=Fe[ht].x-be,Jt=Fe[ht].y-Ce;re.writeVarint(ue(mt)),re.writeVarint(ue(Jt)),be+=mt,Ce+=Jt}xe===3&&re.writeVarint(oe(7,1))}}function ne(ze,re){var he=typeof ze;he==="string"?re.writeStringField(1,ze):he==="boolean"?re.writeBooleanField(7,ze):he==="number"&&(ze%1!=0?re.writeDoubleField(3,ze):ze<0?re.writeSVarintField(6,ze):re.writeVarintField(5,ze))}G.exports=Y,G.exports.fromVectorTileJs=Y,G.exports.fromGeojsonVt=function(ze,re){re=re||{};var he={};for(var xe in ze)he[xe]=new Q(ze[xe].features,re),he[xe].name=xe,he[xe].version=re.version,he[xe].extent=re.extent;return Y({layers:he})},G.exports.GeoJSONWrapper=Q;var de=l.bz(G.exports);const Se={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ze=>ze},Te=Math.fround||($e=new Float32Array(1),ze=>($e[0]=+ze,$e[0]));var $e;const Ie=3,Le=5,We=6;class Ze{constructor(re){this.options=Object.assign(Object.create(Se),re),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(re){const{log:he,minZoom:xe,maxZoom:be}=this.options;he&&console.time("total time");const Ce=`prepare ${re.length} points`;he&&console.time(Ce),this.points=re;const He=[];for(let Fe=0;Fe<re.length;Fe++){const qe=re[Fe];if(!qe.geometry)continue;const[ut,ht]=qe.geometry.coordinates,mt=Te(vt(ut)),Jt=Te(It(ht));He.push(mt,Jt,1/0,Fe,-1,1),this.options.reduce&&He.push(0)}let Ve=this.trees[be+1]=this._createTree(He);he&&console.timeEnd(Ce);for(let Fe=be;Fe>=xe;Fe--){const qe=+Date.now();Ve=this.trees[Fe]=this._createTree(this._cluster(Ve,Fe)),he&&console.log("z%d: %d clusters in %dms",Fe,Ve.numItems,+Date.now()-qe)}return he&&console.timeEnd("total time"),this}getClusters(re,he){let xe=((re[0]+180)%360+360)%360-180;const be=Math.max(-90,Math.min(90,re[1]));let Ce=re[2]===180?180:((re[2]+180)%360+360)%360-180;const He=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)xe=-180,Ce=180;else if(xe>Ce){const ht=this.getClusters([xe,be,180,He],he),mt=this.getClusters([-180,be,Ce,He],he);return ht.concat(mt)}const Ve=this.trees[this._limitZoom(he)],Fe=Ve.range(vt(xe),It(He),vt(Ce),It(be)),qe=Ve.data,ut=[];for(const ht of Fe){const mt=this.stride*ht;ut.push(qe[mt+Le]>1?nt(qe,mt,this.clusterProps):this.points[qe[mt+Ie]])}return ut}getChildren(re){const he=this._getOriginId(re),xe=this._getOriginZoom(re),be="No cluster with the specified id.",Ce=this.trees[xe];if(!Ce)throw new Error(be);const He=Ce.data;if(he*this.stride>=He.length)throw new Error(be);const Ve=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),Fe=Ce.within(He[he*this.stride],He[he*this.stride+1],Ve),qe=[];for(const ut of Fe){const ht=ut*this.stride;He[ht+4]===re&&qe.push(He[ht+Le]>1?nt(He,ht,this.clusterProps):this.points[He[ht+Ie]])}if(qe.length===0)throw new Error(be);return qe}getLeaves(re,he,xe){const be=[];return this._appendLeaves(be,re,he=he||10,xe=xe||0,0),be}getTile(re,he,xe){const be=this.trees[this._limitZoom(re)],Ce=Math.pow(2,re),{extent:He,radius:Ve}=this.options,Fe=Ve/He,qe=(xe-Fe)/Ce,ut=(xe+1+Fe)/Ce,ht={features:[]};return this._addTileFeatures(be.range((he-Fe)/Ce,qe,(he+1+Fe)/Ce,ut),be.data,he,xe,Ce,ht),he===0&&this._addTileFeatures(be.range(1-Fe/Ce,qe,1,ut),be.data,Ce,xe,Ce,ht),he===Ce-1&&this._addTileFeatures(be.range(0,qe,Fe/Ce,ut),be.data,-1,xe,Ce,ht),ht.features.length?ht:null}getClusterExpansionZoom(re){let he=this._getOriginZoom(re)-1;for(;he<=this.options.maxZoom;){const xe=this.getChildren(re);if(he++,xe.length!==1)break;re=xe[0].properties.cluster_id}return he}_appendLeaves(re,he,xe,be,Ce){const He=this.getChildren(he);for(const Ve of He){const Fe=Ve.properties;if(Fe&&Fe.cluster?Ce+Fe.point_count<=be?Ce+=Fe.point_count:Ce=this._appendLeaves(re,Fe.cluster_id,xe,be,Ce):Ce<be?Ce++:re.push(Ve),re.length===xe)break}return Ce}_createTree(re){const he=new l.av(re.length/this.stride|0,this.options.nodeSize,Float32Array);for(let xe=0;xe<re.length;xe+=this.stride)he.add(re[xe],re[xe+1]);return he.finish(),he.data=re,he}_addTileFeatures(re,he,xe,be,Ce,He){for(const Ve of re){const Fe=Ve*this.stride,qe=he[Fe+Le]>1;let ut,ht,mt;if(qe)ut=ct(he,Fe,this.clusterProps),ht=he[Fe],mt=he[Fe+1];else{const Dt=this.points[he[Fe+Ie]];ut=Dt.properties;const[Qt,fn]=Dt.geometry.coordinates;ht=vt(Qt),mt=It(fn)}const Jt={type:1,geometry:[[Math.round(this.options.extent*(ht*Ce-xe)),Math.round(this.options.extent*(mt*Ce-be))]],tags:ut};let un;un=qe||this.options.generateId?he[Fe+Ie]:this.points[he[Fe+Ie]].id,un!==void 0&&(Jt.id=un),He.features.push(Jt)}}_limitZoom(re){return Math.max(this.options.minZoom,Math.min(Math.floor(+re),this.options.maxZoom+1))}_cluster(re,he){const{radius:xe,extent:be,reduce:Ce,minPoints:He}=this.options,Ve=xe/(be*Math.pow(2,he)),Fe=re.data,qe=[],ut=this.stride;for(let ht=0;ht<Fe.length;ht+=ut){if(Fe[ht+2]<=he)continue;Fe[ht+2]=he;const mt=Fe[ht],Jt=Fe[ht+1],un=re.within(Fe[ht],Fe[ht+1],Ve),Dt=Fe[ht+Le];let Qt=Dt;for(const fn of un){const Rn=fn*ut;Fe[Rn+2]>he&&(Qt+=Fe[Rn+Le])}if(Qt>Dt&&Qt>=He){let fn,Rn=mt*Dt,jn=Jt*Dt,On=-1;const Mn=((ht/ut|0)<<5)+(he+1)+this.points.length;for(const ei of un){const qn=ei*ut;if(Fe[qn+2]<=he)continue;Fe[qn+2]=he;const br=Fe[qn+Le];Rn+=Fe[qn]*br,jn+=Fe[qn+1]*br,Fe[qn+4]=Mn,Ce&&(fn||(fn=this._map(Fe,ht,!0),On=this.clusterProps.length,this.clusterProps.push(fn)),Ce(fn,this._map(Fe,qn)))}Fe[ht+4]=Mn,qe.push(Rn/Qt,jn/Qt,1/0,Mn,-1,Qt),Ce&&qe.push(On)}else{for(let fn=0;fn<ut;fn++)qe.push(Fe[ht+fn]);if(Qt>1)for(const fn of un){const Rn=fn*ut;if(!(Fe[Rn+2]<=he)){Fe[Rn+2]=he;for(let jn=0;jn<ut;jn++)qe.push(Fe[Rn+jn])}}}}return qe}_getOriginId(re){return re-this.points.length>>5}_getOriginZoom(re){return(re-this.points.length)%32}_map(re,he,xe){if(re[he+Le]>1){const He=this.clusterProps[re[he+We]];return xe?Object.assign({},He):He}const be=this.points[re[he+Ie]].properties,Ce=this.options.map(be);return xe&&Ce===be?Object.assign({},Ce):Ce}}function nt(ze,re,he){return{type:"Feature",id:ze[re+Ie],properties:ct(ze,re,he),geometry:{type:"Point",coordinates:[(xe=ze[re],360*(xe-.5)),ft(ze[re+1])]}};var xe}function ct(ze,re,he){const xe=ze[re+Le],be=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe,Ce=ze[re+We],He=Ce===-1?{}:Object.assign({},he[Ce]);return Object.assign(He,{cluster:!0,cluster_id:ze[re+Ie],point_count:xe,point_count_abbreviated:be})}function vt(ze){return ze/360+.5}function It(ze){const re=Math.sin(ze*Math.PI/180),he=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return he<0?0:he>1?1:he}function ft(ze){const re=(180-360*ze)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function St(ze,re,he,xe){for(var be,Ce=xe,He=he-re>>1,Ve=he-re,Fe=ze[re],qe=ze[re+1],ut=ze[he],ht=ze[he+1],mt=re+3;mt<he;mt+=3){var Jt=Gt(ze[mt],ze[mt+1],Fe,qe,ut,ht);if(Jt>Ce)be=mt,Ce=Jt;else if(Jt===Ce){var un=Math.abs(mt-He);un<Ve&&(be=mt,Ve=un)}}Ce>xe&&(be-re>3&&St(ze,re,be,xe),ze[be+2]=Ce,he-be>3&&St(ze,be,he,xe))}function Gt(ze,re,he,xe,be,Ce){var He=be-he,Ve=Ce-xe;if(He!==0||Ve!==0){var Fe=((ze-he)*He+(re-xe)*Ve)/(He*He+Ve*Ve);Fe>1?(he=be,xe=Ce):Fe>0&&(he+=He*Fe,xe+=Ve*Fe)}return(He=ze-he)*He+(Ve=re-xe)*Ve}function Ut(ze,re,he,xe){var be={id:ze===void 0?null:ze,type:re,geometry:he,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ce){var He=Ce.geometry,Ve=Ce.type;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")cn(Ce,He);else if(Ve==="Polygon"||Ve==="MultiLineString")for(var Fe=0;Fe<He.length;Fe++)cn(Ce,He[Fe]);else if(Ve==="MultiPolygon")for(Fe=0;Fe<He.length;Fe++)for(var qe=0;qe<He[Fe].length;qe++)cn(Ce,He[Fe][qe])}(be),be}function cn(ze,re){for(var he=0;he<re.length;he+=3)ze.minX=Math.min(ze.minX,re[he]),ze.minY=Math.min(ze.minY,re[he+1]),ze.maxX=Math.max(ze.maxX,re[he]),ze.maxY=Math.max(ze.maxY,re[he+1])}function xn(ze,re,he,xe){if(re.geometry){var be=re.geometry.coordinates,Ce=re.geometry.type,He=Math.pow(he.tolerance/((1<<he.maxZoom)*he.extent),2),Ve=[],Fe=re.id;if(he.promoteId?Fe=re.properties[he.promoteId]:he.generateId&&(Fe=xe||0),Ce==="Point")yn(be,Ve);else if(Ce==="MultiPoint")for(var qe=0;qe<be.length;qe++)yn(be[qe],Ve);else if(Ce==="LineString")sn(be,Ve,He,!1);else if(Ce==="MultiLineString"){if(he.lineMetrics){for(qe=0;qe<be.length;qe++)sn(be[qe],Ve=[],He,!1),ze.push(Ut(Fe,"LineString",Ve,re.properties));return}gn(be,Ve,He,!1)}else if(Ce==="Polygon")gn(be,Ve,He,!0);else{if(Ce!=="MultiPolygon"){if(Ce==="GeometryCollection"){for(qe=0;qe<re.geometry.geometries.length;qe++)xn(ze,{id:Fe,geometry:re.geometry.geometries[qe],properties:re.properties},he,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(qe=0;qe<be.length;qe++){var ut=[];gn(be[qe],ut,He,!0),Ve.push(ut)}}ze.push(Ut(Fe,Ce,Ve,re.properties))}}function yn(ze,re){re.push(ie(ze[0])),re.push(B(ze[1])),re.push(0)}function sn(ze,re,he,xe){for(var be,Ce,He=0,Ve=0;Ve<ze.length;Ve++){var Fe=ie(ze[Ve][0]),qe=B(ze[Ve][1]);re.push(Fe),re.push(qe),re.push(0),Ve>0&&(He+=xe?(be*qe-Fe*Ce)/2:Math.sqrt(Math.pow(Fe-be,2)+Math.pow(qe-Ce,2))),be=Fe,Ce=qe}var ut=re.length-3;re[2]=1,St(re,0,ut,he),re[ut+2]=1,re.size=Math.abs(He),re.start=0,re.end=re.size}function gn(ze,re,he,xe){for(var be=0;be<ze.length;be++){var Ce=[];sn(ze[be],Ce,he,xe),re.push(Ce)}}function ie(ze){return ze/360+.5}function B(ze){var re=Math.sin(ze*Math.PI/180),he=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return he<0?0:he>1?1:he}function j(ze,re,he,xe,be,Ce,He,Ve){if(xe/=re,Ce>=(he/=re)&&He<xe)return ze;if(He<he||Ce>=xe)return null;for(var Fe=[],qe=0;qe<ze.length;qe++){var ut=ze[qe],ht=ut.geometry,mt=ut.type,Jt=be===0?ut.minX:ut.minY,un=be===0?ut.maxX:ut.maxY;if(Jt>=he&&un<xe)Fe.push(ut);else if(!(un<he||Jt>=xe)){var Dt=[];if(mt==="Point"||mt==="MultiPoint")ge(ht,Dt,he,xe,be);else if(mt==="LineString")Be(ht,Dt,he,xe,be,!1,Ve.lineMetrics);else if(mt==="MultiLineString")lt(ht,Dt,he,xe,be,!1);else if(mt==="Polygon")lt(ht,Dt,he,xe,be,!0);else if(mt==="MultiPolygon")for(var Qt=0;Qt<ht.length;Qt++){var fn=[];lt(ht[Qt],fn,he,xe,be,!0),fn.length&&Dt.push(fn)}if(Dt.length){if(Ve.lineMetrics&&mt==="LineString"){for(Qt=0;Qt<Dt.length;Qt++)Fe.push(Ut(ut.id,mt,Dt[Qt],ut.tags));continue}mt!=="LineString"&&mt!=="MultiLineString"||(Dt.length===1?(mt="LineString",Dt=Dt[0]):mt="MultiLineString"),mt!=="Point"&&mt!=="MultiPoint"||(mt=Dt.length===3?"Point":"MultiPoint"),Fe.push(Ut(ut.id,mt,Dt,ut.tags))}}}return Fe.length?Fe:null}function ge(ze,re,he,xe,be){for(var Ce=0;Ce<ze.length;Ce+=3){var He=ze[Ce+be];He>=he&&He<=xe&&(re.push(ze[Ce]),re.push(ze[Ce+1]),re.push(ze[Ce+2]))}}function Be(ze,re,he,xe,be,Ce,He){for(var Ve,Fe,qe=et(ze),ut=be===0?L:U,ht=ze.start,mt=0;mt<ze.length-3;mt+=3){var Jt=ze[mt],un=ze[mt+1],Dt=ze[mt+2],Qt=ze[mt+3],fn=ze[mt+4],Rn=be===0?Jt:un,jn=be===0?Qt:fn,On=!1;He&&(Ve=Math.sqrt(Math.pow(Jt-Qt,2)+Math.pow(un-fn,2))),Rn<he?jn>he&&(Fe=ut(qe,Jt,un,Qt,fn,he),He&&(qe.start=ht+Ve*Fe)):Rn>xe?jn<xe&&(Fe=ut(qe,Jt,un,Qt,fn,xe),He&&(qe.start=ht+Ve*Fe)):le(qe,Jt,un,Dt),jn<he&&Rn>=he&&(Fe=ut(qe,Jt,un,Qt,fn,he),On=!0),jn>xe&&Rn<=xe&&(Fe=ut(qe,Jt,un,Qt,fn,xe),On=!0),!Ce&&On&&(He&&(qe.end=ht+Ve*Fe),re.push(qe),qe=et(ze)),He&&(ht+=Ve)}var Mn=ze.length-3;Jt=ze[Mn],un=ze[Mn+1],Dt=ze[Mn+2],(Rn=be===0?Jt:un)>=he&&Rn<=xe&&le(qe,Jt,un,Dt),Mn=qe.length-3,Ce&&Mn>=3&&(qe[Mn]!==qe[0]||qe[Mn+1]!==qe[1])&&le(qe,qe[0],qe[1],qe[2]),qe.length&&re.push(qe)}function et(ze){var re=[];return re.size=ze.size,re.start=ze.start,re.end=ze.end,re}function lt(ze,re,he,xe,be,Ce){for(var He=0;He<ze.length;He++)Be(ze[He],re,he,xe,be,Ce,!1)}function le(ze,re,he,xe){ze.push(re),ze.push(he),ze.push(xe)}function L(ze,re,he,xe,be,Ce){var He=(Ce-re)/(xe-re);return ze.push(Ce),ze.push(he+(be-he)*He),ze.push(1),He}function U(ze,re,he,xe,be,Ce){var He=(Ce-he)/(be-he);return ze.push(re+(xe-re)*He),ze.push(Ce),ze.push(1),He}function Ee(ze,re){for(var he=[],xe=0;xe<ze.length;xe++){var be,Ce=ze[xe],He=Ce.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")be=Ge(Ce.geometry,re);else if(He==="MultiLineString"||He==="Polygon"){be=[];for(var Ve=0;Ve<Ce.geometry.length;Ve++)be.push(Ge(Ce.geometry[Ve],re))}else if(He==="MultiPolygon")for(be=[],Ve=0;Ve<Ce.geometry.length;Ve++){for(var Fe=[],qe=0;qe<Ce.geometry[Ve].length;qe++)Fe.push(Ge(Ce.geometry[Ve][qe],re));be.push(Fe)}he.push(Ut(Ce.id,He,be,Ce.tags))}return he}function Ge(ze,re){var he=[];he.size=ze.size,ze.start!==void 0&&(he.start=ze.start,he.end=ze.end);for(var xe=0;xe<ze.length;xe+=3)he.push(ze[xe]+re,ze[xe+1],ze[xe+2]);return he}function je(ze,re){if(ze.transformed)return ze;var he,xe,be,Ce=1<<ze.z,He=ze.x,Ve=ze.y;for(he=0;he<ze.features.length;he++){var Fe=ze.features[he],qe=Fe.geometry,ut=Fe.type;if(Fe.geometry=[],ut===1)for(xe=0;xe<qe.length;xe+=2)Fe.geometry.push(at(qe[xe],qe[xe+1],re,Ce,He,Ve));else for(xe=0;xe<qe.length;xe++){var ht=[];for(be=0;be<qe[xe].length;be+=2)ht.push(at(qe[xe][be],qe[xe][be+1],re,Ce,He,Ve));Fe.geometry.push(ht)}}return ze.transformed=!0,ze}function at(ze,re,he,xe,be,Ce){return[Math.round(he*(ze*xe-be)),Math.round(he*(re*xe-Ce))]}function jt(ze,re,he,xe,be){for(var Ce=re===be.maxZoom?0:be.tolerance/((1<<re)*be.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:he,y:xe,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ve=0;Ve<ze.length;Ve++){He.numFeatures++,Tn(He,ze[Ve],Ce,be);var Fe=ze[Ve].minX,qe=ze[Ve].minY,ut=ze[Ve].maxX,ht=ze[Ve].maxY;Fe<He.minX&&(He.minX=Fe),qe<He.minY&&(He.minY=qe),ut>He.maxX&&(He.maxX=ut),ht>He.maxY&&(He.maxY=ht)}return He}function Tn(ze,re,he,xe){var be=re.geometry,Ce=re.type,He=[];if(Ce==="Point"||Ce==="MultiPoint")for(var Ve=0;Ve<be.length;Ve+=3)He.push(be[Ve]),He.push(be[Ve+1]),ze.numPoints++,ze.numSimplified++;else if(Ce==="LineString")vn(He,be,ze,he,!1,!1);else if(Ce==="MultiLineString"||Ce==="Polygon")for(Ve=0;Ve<be.length;Ve++)vn(He,be[Ve],ze,he,Ce==="Polygon",Ve===0);else if(Ce==="MultiPolygon")for(var Fe=0;Fe<be.length;Fe++){var qe=be[Fe];for(Ve=0;Ve<qe.length;Ve++)vn(He,qe[Ve],ze,he,!0,Ve===0)}if(He.length){var ut=re.tags||null;if(Ce==="LineString"&&xe.lineMetrics){for(var ht in ut={},re.tags)ut[ht]=re.tags[ht];ut.mapbox_clip_start=be.start/be.size,ut.mapbox_clip_end=be.end/be.size}var mt={geometry:He,type:Ce==="Polygon"||Ce==="MultiPolygon"?3:Ce==="LineString"||Ce==="MultiLineString"?2:1,tags:ut};re.id!==null&&(mt.id=re.id),ze.features.push(mt)}}function vn(ze,re,he,xe,be,Ce){var He=xe*xe;if(xe>0&&re.size<(be?He:xe))he.numPoints+=re.length/3;else{for(var Ve=[],Fe=0;Fe<re.length;Fe+=3)(xe===0||re[Fe+2]>He)&&(he.numSimplified++,Ve.push(re[Fe]),Ve.push(re[Fe+1])),he.numPoints++;be&&function(qe,ut){for(var ht=0,mt=0,Jt=qe.length,un=Jt-2;mt<Jt;un=mt,mt+=2)ht+=(qe[mt]-qe[un])*(qe[mt+1]+qe[un+1]);if(ht>0===ut)for(mt=0,Jt=qe.length;mt<Jt/2;mt+=2){var Dt=qe[mt],Qt=qe[mt+1];qe[mt]=qe[Jt-2-mt],qe[mt+1]=qe[Jt-1-mt],qe[Jt-2-mt]=Dt,qe[Jt-1-mt]=Qt}}(Ve,Ce),ze.push(Ve)}}function _t(ze,re){var he=(re=this.options=function(be,Ce){for(var He in Ce)be[He]=Ce[He];return be}(Object.create(this.options),re)).debug;if(he&&console.time("preprocess data"),re.maxZoom<0||re.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(re.promoteId&&re.generateId)throw new Error("promoteId and generateId cannot be used together.");var xe=function(be,Ce){var He=[];if(be.type==="FeatureCollection")for(var Ve=0;Ve<be.features.length;Ve++)xn(He,be.features[Ve],Ce,Ve);else xn(He,be.type==="Feature"?be:{geometry:be},Ce);return He}(ze,re);this.tiles={},this.tileCoords=[],he&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",re.indexMaxZoom,re.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),xe=function(be,Ce){var He=Ce.buffer/Ce.extent,Ve=be,Fe=j(be,1,-1-He,He,0,-1,2,Ce),qe=j(be,1,1-He,2+He,0,-1,2,Ce);return(Fe||qe)&&(Ve=j(be,1,-He,1+He,0,-1,2,Ce)||[],Fe&&(Ve=Ee(Fe,1).concat(Ve)),qe&&(Ve=Ve.concat(Ee(qe,-1)))),Ve}(xe,re),xe.length&&this.splitTile(xe,0,0,0),he&&(xe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Rt(ze,re,he){return 32*((1<<ze)*he+re)+ze}function nn(ze,re){return re?ze.properties[re]:ze.id}function wr(ze,re){if(ze==null)return!0;if(ze.type==="Feature")return nn(ze,re)!=null;if(ze.type==="FeatureCollection"){const he=new Set;for(const xe of ze.features){const be=nn(xe,re);if(be==null||he.has(be))return!1;he.add(be)}return!0}return!1}function fi(ze,re){const he=new Map;if(ze!=null)if(ze.type==="Feature")he.set(nn(ze,re),ze);else for(const xe of ze.features)he.set(nn(xe,re),xe);return he}_t.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},_t.prototype.splitTile=function(ze,re,he,xe,be,Ce,He){for(var Ve=[ze,re,he,xe],Fe=this.options,qe=Fe.debug;Ve.length;){xe=Ve.pop(),he=Ve.pop(),re=Ve.pop(),ze=Ve.pop();var ut=1<<re,ht=Rt(re,he,xe),mt=this.tiles[ht];if(!mt&&(qe>1&&console.time("creation"),mt=this.tiles[ht]=jt(ze,re,he,xe,Fe),this.tileCoords.push({z:re,x:he,y:xe}),qe)){qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",re,he,xe,mt.numFeatures,mt.numPoints,mt.numSimplified),console.timeEnd("creation"));var Jt="z"+re;this.stats[Jt]=(this.stats[Jt]||0)+1,this.total++}if(mt.source=ze,be){if(re===Fe.maxZoom||re===be)continue;var un=1<<be-re;if(he!==Math.floor(Ce/un)||xe!==Math.floor(He/un))continue}else if(re===Fe.indexMaxZoom||mt.numPoints<=Fe.indexMaxPoints)continue;if(mt.source=null,ze.length!==0){qe>1&&console.time("clipping");var Dt,Qt,fn,Rn,jn,On,Mn=.5*Fe.buffer/Fe.extent,ei=.5-Mn,qn=.5+Mn,br=1+Mn;Dt=Qt=fn=Rn=null,jn=j(ze,ut,he-Mn,he+qn,0,mt.minX,mt.maxX,Fe),On=j(ze,ut,he+ei,he+br,0,mt.minX,mt.maxX,Fe),ze=null,jn&&(Dt=j(jn,ut,xe-Mn,xe+qn,1,mt.minY,mt.maxY,Fe),Qt=j(jn,ut,xe+ei,xe+br,1,mt.minY,mt.maxY,Fe),jn=null),On&&(fn=j(On,ut,xe-Mn,xe+qn,1,mt.minY,mt.maxY,Fe),Rn=j(On,ut,xe+ei,xe+br,1,mt.minY,mt.maxY,Fe),On=null),qe>1&&console.timeEnd("clipping"),Ve.push(Dt||[],re+1,2*he,2*xe),Ve.push(Qt||[],re+1,2*he,2*xe+1),Ve.push(fn||[],re+1,2*he+1,2*xe),Ve.push(Rn||[],re+1,2*he+1,2*xe+1)}}},_t.prototype.getTile=function(ze,re,he){var xe=this.options,be=xe.extent,Ce=xe.debug;if(ze<0||ze>24)return null;var He=1<<ze,Ve=Rt(ze,re=(re%He+He)%He,he);if(this.tiles[Ve])return je(this.tiles[Ve],be);Ce>1&&console.log("drilling down to z%d-%d-%d",ze,re,he);for(var Fe,qe=ze,ut=re,ht=he;!Fe&&qe>0;)qe--,ut=Math.floor(ut/2),ht=Math.floor(ht/2),Fe=this.tiles[Rt(qe,ut,ht)];return Fe&&Fe.source?(Ce>1&&console.log("found parent tile z%d-%d-%d",qe,ut,ht),Ce>1&&console.time("drilling down"),this.splitTile(Fe.source,qe,ut,ht,ze,re,he),Ce>1&&console.timeEnd("drilling down"),this.tiles[Ve]?je(this.tiles[Ve],be):null):null};class hn extends O{constructor(re,he,xe,be){super(re,he,xe),this._dataUpdateable=new Map,this.loadGeoJSON=(Ce,He)=>{const{promoteId:Ve}=Ce;if(Ce.request)return l.f(Ce.request,(Fe,qe,ut,ht)=>{this._dataUpdateable=wr(qe,Ve)?fi(qe,Ve):void 0,He(Fe,qe,ut,ht)});if(typeof Ce.data=="string")try{const Fe=JSON.parse(Ce.data);this._dataUpdateable=wr(Fe,Ve)?fi(Fe,Ve):void 0,He(null,Fe)}catch{He(new Error(`Input data given to '${Ce.source}' is not a valid GeoJSON object.`))}else Ce.dataDiff?this._dataUpdateable?(function(Fe,qe,ut){var ht,mt,Jt,un;if(qe.removeAll&&Fe.clear(),qe.remove)for(const Dt of qe.remove)Fe.delete(Dt);if(qe.add)for(const Dt of qe.add){const Qt=nn(Dt,ut);Qt!=null&&Fe.set(Qt,Dt)}if(qe.update)for(const Dt of qe.update){let Qt=Fe.get(Dt.id);if(Qt==null)continue;const fn=!Dt.removeAllProperties&&(((ht=Dt.removeProperties)===null||ht===void 0?void 0:ht.length)>0||((mt=Dt.addOrUpdateProperties)===null||mt===void 0?void 0:mt.length)>0);if((Dt.newGeometry||Dt.removeAllProperties||fn)&&(Qt=Object.assign({},Qt),Fe.set(Dt.id,Qt),fn&&(Qt.properties=Object.assign({},Qt.properties))),Dt.newGeometry&&(Qt.geometry=Dt.newGeometry),Dt.removeAllProperties)Qt.properties={};else if(((Jt=Dt.removeProperties)===null||Jt===void 0?void 0:Jt.length)>0)for(const Rn of Dt.removeProperties)Object.prototype.hasOwnProperty.call(Qt.properties,Rn)&&delete Qt.properties[Rn];if(((un=Dt.addOrUpdateProperties)===null||un===void 0?void 0:un.length)>0)for(const{key:Rn,value:jn}of Dt.addOrUpdateProperties)Qt.properties[Rn]=jn}}(this._dataUpdateable,Ce.dataDiff,Ve),He(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):He(new Error(`Cannot update existing geojson data in ${Ce.source}`)):He(new Error(`Input data given to '${Ce.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,be&&(this.loadGeoJSON=be)}loadGeoJSONTile(re,he){const xe=re.tileID.canonical;if(!this._geoJSONIndex)return he(null,null);const be=this._geoJSONIndex.getTile(xe.z,xe.x,xe.y);if(!be)return he(null,null);const Ce=new class{constructor(Ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.N,this.length=Ve.length,this._features=Ve}feature(Ve){return new class{constructor(Fe){this._feature=Fe,this.extent=l.N,this.type=Fe.type,this.properties=Fe.tags,"id"in Fe&&!isNaN(Fe.id)&&(this.id=parseInt(Fe.id,10))}loadGeometry(){if(this._feature.type===1){const Fe=[];for(const qe of this._feature.geometry)Fe.push([new l.P(qe[0],qe[1])]);return Fe}{const Fe=[];for(const qe of this._feature.geometry){const ut=[];for(const ht of qe)ut.push(new l.P(ht[0],ht[1]));Fe.push(ut)}return Fe}}toGeoJSON(Fe,qe,ut){return H.call(this,Fe,qe,ut)}}(this._features[Ve])}}(be.features);let He=de(Ce);He.byteOffset===0&&He.byteLength===He.buffer.byteLength||(He=new Uint8Array(He)),he(null,{vectorTile:Ce,rawData:He.buffer})}loadData(re,he){var xe;(xe=this._pendingRequest)===null||xe===void 0||xe.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const be=!!(re&&re.request&&re.request.collectResourceTiming)&&new l.bu(re.request);this._pendingCallback=he,this._pendingRequest=this.loadGeoJSON(re,(Ce,He)=>{if(delete this._pendingCallback,delete this._pendingRequest,Ce||!He)return he(Ce);if(typeof He!="object")return he(new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`));{K(He,!0);try{if(re.filter){const Fe=l.bC(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Fe.result==="error")throw new Error(Fe.value.map(ut=>`${ut.key}: ${ut.message}`).join(", "));He={type:"FeatureCollection",features:He.features.filter(ut=>Fe.value.evaluate({zoom:0},ut))}}this._geoJSONIndex=re.cluster?new Ze(function({superclusterOptions:Fe,clusterProperties:qe}){if(!qe||!Fe)return Fe;const ut={},ht={},mt={accumulated:null,zoom:0},Jt={properties:null},un=Object.keys(qe);for(const Dt of un){const[Qt,fn]=qe[Dt],Rn=l.bC(fn),jn=l.bC(typeof Qt=="string"?[Qt,["accumulated"],["get",Dt]]:Qt);ut[Dt]=Rn.value,ht[Dt]=jn.value}return Fe.map=Dt=>{Jt.properties=Dt;const Qt={};for(const fn of un)Qt[fn]=ut[fn].evaluate(mt,Jt);return Qt},Fe.reduce=(Dt,Qt)=>{Jt.properties=Qt;for(const fn of un)mt.accumulated=Dt[fn],Dt[fn]=ht[fn].evaluate(mt,Jt)},Fe}(re)).load(He.features):function(Fe,qe){return new _t(Fe,qe)}(He,re.geojsonVtOptions)}catch(Fe){return he(Fe)}this.loaded={};const Ve={};if(be){const Fe=be.finish();Fe&&(Ve.resourceTiming={},Ve.resourceTiming[re.source]=JSON.parse(JSON.stringify(Fe)))}he(null,Ve)}})}reloadTile(re,he){const xe=this.loaded;return xe&&xe[re.uid]?super.reloadTile(re,he):this.loadTile(re,he)}removeSource(re,he){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),he()}getClusterExpansionZoom(re,he){try{he(null,this._geoJSONIndex.getClusterExpansionZoom(re.clusterId))}catch(xe){he(xe)}}getClusterChildren(re,he){try{he(null,this._geoJSONIndex.getChildren(re.clusterId))}catch(xe){he(xe)}}getClusterLeaves(re,he){try{he(null,this._geoJSONIndex.getLeaves(re.clusterId,re.limit,re.offset))}catch(xe){he(xe)}}}class er{constructor(re){this.self=re,this.actor=new l.C(re,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:O,geojson:hn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(he,xe)=>{if(this.workerSourceTypes[he])throw new Error(`Worker source with name "${he}" already registered.`);this.workerSourceTypes[he]=xe},this.self.registerRTLTextPlugin=he=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.applyArabicShaping=he.applyArabicShaping,l.bD.processBidirectionalText=he.processBidirectionalText,l.bD.processStyledBidirectionalText=he.processStyledBidirectionalText}}setReferrer(re,he){this.referrer=he}setImages(re,he,xe){this.availableImages[re]=he;for(const be in this.workerSources[re]){const Ce=this.workerSources[re][be];for(const He in Ce)Ce[He].availableImages=he}xe()}setLayers(re,he,xe){this.getLayerIndex(re).replace(he),xe()}updateLayers(re,he,xe){this.getLayerIndex(re).update(he.layers,he.removedIds),xe()}loadTile(re,he,xe){this.getWorkerSource(re,he.type,he.source).loadTile(he,xe)}loadDEMTile(re,he,xe){this.getDEMWorkerSource(re,he.source).loadTile(he,xe)}reloadTile(re,he,xe){this.getWorkerSource(re,he.type,he.source).reloadTile(he,xe)}abortTile(re,he,xe){this.getWorkerSource(re,he.type,he.source).abortTile(he,xe)}removeTile(re,he,xe){this.getWorkerSource(re,he.type,he.source).removeTile(he,xe)}removeDEMTile(re,he){this.getDEMWorkerSource(re,he.source).removeTile(he)}removeSource(re,he,xe){if(!this.workerSources[re]||!this.workerSources[re][he.type]||!this.workerSources[re][he.type][he.source])return;const be=this.workerSources[re][he.type][he.source];delete this.workerSources[re][he.type][he.source],be.removeSource!==void 0?be.removeSource(he,xe):xe()}loadWorkerSource(re,he,xe){try{this.self.importScripts(he.url),xe()}catch(be){xe(be.toString())}}syncRTLPluginState(re,he,xe){try{l.bD.setState(he);const be=l.bD.getPluginURL();if(l.bD.isLoaded()&&!l.bD.isParsed()&&be!=null){this.self.importScripts(be);const Ce=l.bD.isParsed();xe(Ce?void 0:new Error(`RTL Text Plugin failed to import scripts from ${be}`),Ce)}}catch(be){xe(be.toString())}}getAvailableImages(re){let he=this.availableImages[re];return he||(he=[]),he}getLayerIndex(re){let he=this.layerIndexes[re];return he||(he=this.layerIndexes[re]=new b),he}getWorkerSource(re,he,xe){return this.workerSources[re]||(this.workerSources[re]={}),this.workerSources[re][he]||(this.workerSources[re][he]={}),this.workerSources[re][he][xe]||(this.workerSources[re][he][xe]=new this.workerSourceTypes[he]({send:(be,Ce,He)=>{this.actor.send(be,Ce,He,re)}},this.getLayerIndex(re),this.getAvailableImages(re))),this.workerSources[re][he][xe]}getDEMWorkerSource(re,he){return this.demWorkerSources[re]||(this.demWorkerSources[re]={}),this.demWorkerSources[re][he]||(this.demWorkerSources[re][he]=new N),this.demWorkerSources[re][he]}}return l.i()&&(self.worker=new er(self)),er}),d(["./shared"],function(l){var b="3.6.2";class w{static testProp(r){if(!w.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in w.docStyle)return r[u];return r[0]}static create(r,u,f){const m=window.document.createElement(r);return u!==void 0&&(m.className=u),f&&f.appendChild(m),m}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(r,u){r.style[w.transformProp]=u}static addEventListener(r,u,f,m={}){r.addEventListener(u,f,"passive"in m?m:m.capture)}static removeEventListener(r,u,f,m={}){r.removeEventListener(u,f,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(r,u){const f=r.getBoundingClientRect();return new l.P(u.clientX-f.left-r.clientLeft,u.clientY-f.top-r.clientTop)}static touchPos(r,u){const f=r.getBoundingClientRect(),m=[];for(let _=0;_<u.length;_++)m.push(new l.P(u[_].clientX-f.left-r.clientLeft,u[_].clientY-f.top-r.clientTop));return m}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const A={supported:!1,testSupport:function(y){!O&&k&&(N?R(y):S=y)}};let S,k,O=!1,N=!1;function R(y){const r=y.createTexture();y.bindTexture(y.TEXTURE_2D,r);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,k),y.isContextLost())return;A.supported=!0}catch{}y.deleteTexture(r),O=!0}var ce,K;typeof document<"u"&&(k=document.createElement("img"),k.onload=function(){S&&R(S),S=null,N=!0},k.onerror=function(){O=!0,S=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let r,u,f,m;y.resetRequestQueue=()=>{r=[],u=0,f=0,m={}},y.addThrottleControl=$=>{const q=f++;return m[q]=$,q},y.removeThrottleControl=$=>{delete m[$],I()},y.getImage=($,q,J=!0)=>{A.supported&&($.headers||($.headers={}),$.headers.accept="image/webp,*/*");const fe={requestParameters:$,supportImageRefresh:J,callback:q,cancelled:!1,completed:!1,cancel:()=>{fe.completed||fe.cancelled||(fe.cancelled=!0,fe.innerRequest&&(fe.innerRequest.cancel(),u--),I())}};return r.push(fe),I(),fe};const _=$=>{const{requestParameters:q,supportImageRefresh:J,callback:fe}=$;return l.e(q,{type:"image"}),(J!==!1||l.i()||l.g(q.url)||q.headers&&!Object.keys(q.headers).reduce((Me,ke)=>Me&&ke==="accept",!0)?l.m:M)(q,(Me,ke,Oe,Ae)=>{T($,fe,Me,ke,Oe,Ae)})},T=($,q,J,fe,Me,ke)=>{J?q(J):fe instanceof HTMLImageElement||l.a(fe)?q(null,fe):fe&&((Oe,Ae)=>{typeof createImageBitmap=="function"?l.b(Oe,Ae):l.d(Oe,Ae)})(fe,(Oe,Ae)=>{Oe!=null?q(Oe):Ae!=null&&q(null,Ae,{cacheControl:Me,expires:ke})}),$.cancelled||($.completed=!0,u--,I())},I=()=>{const $=(()=>{const q=Object.keys(m);let J=!1;if(q.length>0){for(const fe of q)if(J=m[fe](),J)break}return J})()?l.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let q=u;q<$&&r.length>0;q++){const J=r.shift();if(J.cancelled){q--;continue}const fe=_(J);u++,J.innerRequest=fe}},M=($,q)=>{const J=new Image,fe=$.url;let Me=!1;const ke=$.credentials;return ke&&ke==="include"?J.crossOrigin="use-credentials":(ke&&ke==="same-origin"||!l.s(fe))&&(J.crossOrigin="anonymous"),J.fetchPriority="high",J.onload=()=>{q(null,J),J.onerror=J.onload=null},J.onerror=()=>{Me||q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),J.onerror=J.onload=null},J.src=fe,{cancel:()=>{Me=!0,J.src=""}}}}(ce||(ce={})),ce.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(K||(K={}));class H{constructor(r){this._transformRequestFn=r}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}normalizeSpriteURL(r,u,f){const m=function(_){const T=_.match(G);if(!T)throw new Error(`Unable to parse URL "${_}"`);return{protocol:T[1],authority:T[2],path:T[3]||"/",params:T[4]?T[4].split("&"):[]}}(r);return m.path+=`${u}${f}`,function(_){const T=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${T}`}(m)}setTransformRequest(r){this._transformRequestFn=r}}const G=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function se(y){var r=new l.A(3);return r[0]=y[0],r[1]=y[1],r[2]=y[2],r}var X,V=function(y,r,u){return y[0]=r[0]-u[0],y[1]=r[1]-u[1],y[2]=r[2]-u[2],y};X=new l.A(3),l.A!=Float32Array&&(X[0]=0,X[1]=0,X[2]=0);var C=function(y){var r=y[0],u=y[1];return r*r+u*u};function F(y){const r=[];if(typeof y=="string")r.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:f,url:m}of y){const _=`${f}${m}`;u.indexOf(_)===-1&&(u.push(_),r.push({id:f,url:m}))}}return r}function D(y,r,u,f,m){if(f)return void y(f);if(m!==Object.values(r).length||m!==Object.values(u).length)return;const _={};for(const T in r){_[T]={};const I=l.h.getImageCanvasContext(u[T]),M=r[T];for(const $ in M){const{width:q,height:J,x:fe,y:Me,sdf:ke,pixelRatio:Oe,stretchX:Ae,stretchY:Ke,content:tt}=M[$];_[T][$]={data:null,pixelRatio:Oe,sdf:ke,stretchX:Ae,stretchY:Ke,content:tt,spriteData:{width:q,height:J,x:fe,y:Me,context:I}}}}y(null,_)}(function(){var y=new l.A(2);l.A!=Float32Array&&(y[0]=0,y[1]=0)})();class Q{constructor(r,u,f,m){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(u,m)}update(r,u,f){const{width:m,height:_}=r,T=!(this.size&&this.size[0]===m&&this.size[1]===_||f),{context:I}=this,{gl:M}=I;if(this.useMipmap=!!(u&&u.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!u||u.premultiply!==!1)),T)this.size=[m,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.a(r)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,r):M.texImage2D(M.TEXTURE_2D,0,this.format,m,_,0,this.format,M.UNSIGNED_BYTE,r.data);else{const{x:$,y:q}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.a(r)?M.texSubImage2D(M.TEXTURE_2D,0,$,q,M.RGBA,M.UNSIGNED_BYTE,r):M.texSubImage2D(M.TEXTURE_2D,0,$,q,m,_,M.RGBA,M.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(r,u,f){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),f!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,f||r),this.filter=r),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function Y(y){const{userImage:r}=y;return!!(r&&r.render&&r.render())&&(y.data.replace(new Uint8Array(r.data.buffer)),!0)}class _e extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const f=u.spriteData;u.data=new l.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let f=!0;const m=u.data||u.spriteData;return this._validateStretch(u.stretchX,m&&m.width)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,m&&m.height)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,u){if(!r)return!0;let f=0;for(const m of r){if(m[0]<f||m[1]<m[0]||u<m[1])return!1;f=m[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const f=u.spriteData,m=f&&f.width||u.data.width,_=f&&f.height||u.data.height;return!(r[0]<0||m<r[0]||r[1]<0||_<r[1]||r[2]<0||m<r[2]||r[3]<0||_<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,f=!0){const m=this.getImage(r);if(f&&(m.data.width!==u.data.width||m.data.height!==u.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,u){let f=!0;if(!this.isLoaded())for(const m of r)this.images[m]||(f=!1);this.isLoaded()||f?this._notify(r,u):this.requestors.push({ids:r,callback:u})}_notify(r,u){const f={};for(const m of r){let _=this.getImage(m);_||(this.fire(new l.k("styleimagemissing",{id:m})),_=this.getImage(m)),_?f[m]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],f=this.getImage(r);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const m={w:f.data.width+2,h:f.data.height+2,x:0,y:0},_=new l.I(m,f);this.patterns[r]={bin:m,position:_}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Q(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const _ in this.patterns)r.push(this.patterns[_].bin);const{w:u,h:f}=l.p(r),m=this.atlasImage;m.resize({width:u||1,height:f||1});for(const _ in this.patterns){const{bin:T}=this.patterns[_],I=T.x+1,M=T.y+1,$=this.getImage(_).data,q=$.width,J=$.height;l.R.copy($,m,{x:0,y:0},{x:I,y:M},{width:q,height:J}),l.R.copy($,m,{x:0,y:J-1},{x:I,y:M-1},{width:q,height:1}),l.R.copy($,m,{x:0,y:0},{x:I,y:M+J},{width:q,height:1}),l.R.copy($,m,{x:q-1,y:0},{x:I-1,y:M},{width:1,height:J}),l.R.copy($,m,{x:0,y:0},{x:I+q,y:M},{width:1,height:J})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.getImage(u);f||l.w(`Image with ID: "${u}" was not found`),Y(f)&&this.updateImage(u,f)}}}const we=1e20;function pe(y,r,u,f,m,_,T,I,M){for(let $=r;$<r+f;$++)oe(y,u*_+$,_,m,T,I,M);for(let $=u;$<u+m;$++)oe(y,$*_+r,1,f,T,I,M)}function oe(y,r,u,f,m,_,T){_[0]=0,T[0]=-we,T[1]=we,m[0]=y[r];for(let I=1,M=0,$=0;I<f;I++){m[I]=y[r+I*u];const q=I*I;do{const J=_[M];$=(m[I]-m[J]+q-J*J)/(I-J)/2}while($<=T[M]&&--M>-1);M++,_[M]=I,T[M]=$,T[M+1]=we}for(let I=0,M=0;I<f;I++){for(;T[M+1]<I;)M++;const $=_[M],q=I-$;y[r+I*u]=m[$]+q*q}}class ue{constructor(r,u){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={}}setURL(r){this.url=r}getGlyphs(r,u){const f=[];for(const m in r)for(const _ of r[m])f.push({stack:m,id:_});l.o(f,({stack:m,id:_},T)=>{let I=this.entries[m];I||(I=this.entries[m]={glyphs:{},requests:{},ranges:{}});let M=I.glyphs[_];if(M!==void 0)return void T(null,{stack:m,id:_,glyph:M});if(M=this._tinySDF(I,m,_),M)return I.glyphs[_]=M,void T(null,{stack:m,id:_,glyph:M});const $=Math.floor(_/256);if(256*$>65535)return void T(new Error("glyphs > 65535 not supported"));if(I.ranges[$])return void T(null,{stack:m,id:_,glyph:M});if(!this.url)return void T(new Error("glyphsUrl is not set"));let q=I.requests[$];q||(q=I.requests[$]=[],ue.loadGlyphRange(m,$,this.url,this.requestManager,(J,fe)=>{if(fe){for(const Me in fe)this._doesCharSupportLocalGlyph(+Me)||(I.glyphs[+Me]=fe[+Me]);I.ranges[$]=!0}for(const Me of q)Me(J,fe);delete I.requests[$]})),q.push((J,fe)=>{J?T(J):fe&&T(null,{stack:m,id:_,glyph:fe[_]||null})})},(m,_)=>{if(m)u(m);else if(_){const T={};for(const{stack:I,id:M,glyph:$}of _)(T[I]||(T[I]={}))[M]=$&&{id:$.id,bitmap:$.bitmap.clone(),metrics:$.metrics};u(null,T)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](r)||l.u["Hangul Syllables"](r)||l.u.Hiragana(r)||l.u.Katakana(r))}_tinySDF(r,u,f){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let _=r.tinySDF;if(!_){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),_=r.tinySDF=new ue.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:I})}const T=_.draw(String.fromCharCode(f));return{id:f,bitmap:new l.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}ue.loadGlyphRange=function(y,r,u,f,m){const _=256*r,T=_+255,I=f.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${_}-${T}`),K.Glyphs);l.l(I,(M,$)=>{if(M)m(M);else if($){const q={};for(const J of l.n($))q[J.id]=J;m(null,q)}})},ue.TinySDF=class{constructor({fontSize:y=24,buffer:r=3,radius:u=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:_="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=u;const I=this.size=y+4*r,M=this._createCanvas(I),$=this.ctx=M.getContext("2d",{willReadFrequently:!0});$.font=`${T} ${_} ${y}px ${m}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(y){const r=document.createElement("canvas");return r.width=r.height=y,r}draw(y){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:_}=this.ctx.measureText(y),T=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-m))),M=Math.min(this.size-this.buffer,T+Math.ceil(f)),$=I+2*this.buffer,q=M+2*this.buffer,J=Math.max($*q,0),fe=new Uint8ClampedArray(J),Me={data:fe,width:$,height:q,glyphWidth:I,glyphHeight:M,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(I===0||M===0)return Me;const{ctx:ke,buffer:Oe,gridInner:Ae,gridOuter:Ke}=this;ke.clearRect(Oe,Oe,I,M),ke.fillText(y,Oe,Oe+T);const tt=ke.getImageData(Oe,Oe,I,M);Ke.fill(we,0,J),Ae.fill(0,0,J);for(let De=0;De<M;De++)for(let Ye=0;Ye<I;Ye++){const ot=tt.data[4*(De*I+Ye)+3]/255;if(ot===0)continue;const st=(De+Oe)*$+Ye+Oe;if(ot===1)Ke[st]=0,Ae[st]=we;else{const dt=.5-ot;Ke[st]=dt>0?dt*dt:0,Ae[st]=dt<0?dt*dt:0}}pe(Ke,0,0,$,q,$,this.f,this.v,this.z),pe(Ae,Oe,Oe,I,M,$,this.f,this.v,this.z);for(let De=0;De<J;De++){const Ye=Math.sqrt(Ke[De])-Math.sqrt(Ae[De]);fe[De]=Math.round(255-255*(Ye/this.radius+this.cutoff))}return Me}};class te{constructor(){this.specification=l.v.light.position}possiblyEvaluate(r,u){return l.z(r.expression.evaluate(u))}interpolate(r,u,f){return{x:l.B.number(r.x,u.x,f),y:l.B.number(r.y,u.y,f),z:l.B.number(r.z,u.z,f)}}}let ne;class de extends l.E{constructor(r){super(),ne=ne||new l.r({anchor:new l.D(l.v.light.anchor),position:new te,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(ne),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(l.t,r,u))for(const f in r){const m=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,f){return(!f||f.validate!==!1)&&l.x(this,r.call(l.y,l.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}}class Se{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const f=r.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,u)),this.dashEntry[f]}getDashRanges(r,u,f){const m=[];let _=r.length%2==1?-r[r.length-1]*f:0,T=r[0]*f,I=!0;m.push({left:_,right:T,isDash:I,zeroLength:r[0]===0});let M=r[0];for(let $=1;$<r.length;$++){I=!I;const q=r[$];_=M*f,M+=q,T=M*f,m.push({left:_,right:T,isDash:I,zeroLength:q===0})}return m}addRoundDash(r,u,f){const m=u/2;for(let _=-f;_<=f;_++){const T=this.width*(this.nextRow+f+_);let I=0,M=r[I];for(let $=0;$<this.width;$++){$/M.right>1&&(M=r[++I]);const q=Math.abs($-M.left),J=Math.abs($-M.right),fe=Math.min(q,J);let Me;const ke=_/f*(m+1);if(M.isDash){const Oe=m-Math.abs(ke);Me=Math.sqrt(fe*fe+Oe*Oe)}else Me=m-Math.sqrt(fe*fe+ke*ke);this.data[T+$]=Math.max(0,Math.min(255,Me+128))}}}addRegularDash(r){for(let I=r.length-1;I>=0;--I){const M=r[I],$=r[I+1];M.zeroLength?r.splice(I,1):$&&$.isDash===M.isDash&&($.left=M.left,r.splice(I,1))}const u=r[0],f=r[r.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const m=this.width*this.nextRow;let _=0,T=r[_];for(let I=0;I<this.width;I++){I/T.right>1&&(T=r[++_]);const M=Math.abs(I-T.left),$=Math.abs(I-T.right),q=Math.min(M,$);this.data[m+I]=Math.max(0,Math.min(255,(T.isDash?q:-q)+128))}}addDash(r,u){const f=u?7:0,m=2*f+1;if(this.nextRow+m>this.height)return l.w("LineAtlas out of space"),null;let _=0;for(let I=0;I<r.length;I++)_+=r[I];if(_!==0){const I=this.width/_,M=this.getDashRanges(r,this.width,I);u?this.addRoundDash(M,I,f):this.addRegularDash(M)}const T={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:_};return this.nextRow+=m,this.dirty=!0,T}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Te{constructor(r,u,f){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=f;const m=this.workerPool.acquire(f);for(let _=0;_<m.length;_++){const T=new l.C(m[_],u,f);T.name=`Worker ${_}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u,f){l.o(this.actors,(m,_)=>{m.send(r,u,_)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function $e(y,r,u){const f=function(m,_){if(m)return u(m);if(_){const T=l.F(l.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(T.vectorLayers=_.vector_layers,T.vectorLayerIds=T.vectorLayers.map(I=>I.id)),u(null,T)}};return y.url?l.f(r.transformRequest(y.url,K.Source),f):l.h.frame(()=>f(null,y))}class Ie{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof l.L?new l.L(r.lng,r.lat):l.L.convert(r),this}setSouthWest(r){return this._sw=r instanceof l.L?new l.L(r.lng,r.lat):l.L.convert(r),this}extend(r){const u=this._sw,f=this._ne;let m,_;if(r instanceof l.L)m=r,_=r;else{if(!(r instanceof Ie))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Ie.convert(r)):this.extend(l.L.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(l.L.convert(r)):this;if(m=r._sw,_=r._ne,!m||!_)return this}return u||f?(u.lng=Math.min(m.lng,u.lng),u.lat=Math.min(m.lat,u.lat),f.lng=Math.max(_.lng,f.lng),f.lat=Math.max(_.lat,f.lat)):(this._sw=new l.L(m.lng,m.lat),this._ne=new l.L(_.lng,_.lat)),this}getCenter(){return new l.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.L(this.getWest(),this.getNorth())}getSouthEast(){return new l.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:f}=l.L.convert(r);let m=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(r){return r instanceof Ie?r:r&&new Ie(r)}static fromLngLat(r,u=0){const f=360*u/40075017,m=f/Math.cos(Math.PI/180*r.lat);return new Ie(new l.L(r.lng-m,r.lat-f),new l.L(r.lng+m,r.lat+f))}}class Le{constructor(r,u,f){this.bounds=Ie.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),f=Math.floor(l.G(this.bounds.getWest())*u),m=Math.floor(l.H(this.bounds.getNorth())*u),_=Math.ceil(l.G(this.bounds.getEast())*u),T=Math.ceil(l.H(this.bounds.getSouth())*u);return r.x>=f&&r.x<_&&r.y>=m&&r.y<T}}class We extends l.E{constructor(r,u,f,m){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=$e(this._options,this.map._requestManager,(_,T)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new l.j(_)):T&&(l.e(this,T),T.bounds&&(this.tileBounds=new Le(T.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.e({},this._options),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.F(u,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(f,K.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(T,I){return delete r.request,r.aborted?u(null):T&&T.status!==404?u(T):(I&&I.resourceTiming&&(r.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&r.setExpiryData(I),r.loadVectorData(I,this.map.painter),u(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=u:r.request=r.actor.send("reloadTile",m,_.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",m,_.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ze extends l.E{constructor(r,u,f,m){super(),this.id=r,this.dispatcher=f,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},u),l.e(this,l.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=$e(this._options,this.map._requestManager,(r,u)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new l.j(r)):u&&(l.e(this,u),u.bounds&&(this.tileBounds=new Le(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}serialize(){return l.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=ce.getImage(this.map._requestManager.transformRequest(f,K.Tile),(m,_,T)=>{if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(m)r.state="errored",u(m);else if(_){this.map._refreshExpiredTiles&&T&&r.setExpiryData(T);const I=this.map.painter.context,M=I.gl;r.texture=this.map.painter.getTileTexture(_.width),r.texture?r.texture.update(_,{useMipmap:!0}):(r.texture=new Q(I,_,M.RGBA,{useMipmap:!0}),r.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&M.texParameterf(M.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),r.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(r,u){r.request&&(r.request.cancel(),delete r.request),u()}unloadTile(r,u){r.texture&&this.map.painter.saveTileTexture(r.texture),u()}hasTransition(){return!1}}class nt extends Ze{constructor(r,u,f,m){super(r,u,f,m),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(f,K.Tile);function _(T,I){T&&(r.state="errored",u(T)),I&&(r.dem=I,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",u(null))}r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.request=ce.getImage(m,(T,I,M)=>l._(this,void 0,void 0,function*(){if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(T)r.state="errored",u(T);else if(I){this.map._refreshExpiredTiles&&r.setExpiryData(M);const $=l.a(I)&&l.J()?I:yield function(J){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.K()){const fe=J.width+2,Me=J.height+2;try{return new l.R({width:fe,height:Me},yield l.M(J,-1,-1,fe,Me))}catch{}}return l.h.getImageData(J,1)})}(I),q={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:$,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",q,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(r){const u=r.canonical,f=Math.pow(2,u.z),m=(u.x-1+f)%f,_=u.x===0?r.wrap-1:r.wrap,T=(u.x+1+f)%f,I=u.x+1===f?r.wrap+1:r.wrap,M={};return M[new l.O(r.overscaledZ,_,u.z,m,u.y).key]={backfilled:!1},M[new l.O(r.overscaledZ,I,u.z,T,u.y).key]={backfilled:!1},u.y>0&&(M[new l.O(r.overscaledZ,_,u.z,m,u.y-1).key]={backfilled:!1},M[new l.O(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},M[new l.O(r.overscaledZ,I,u.z,T,u.y-1).key]={backfilled:!1}),u.y+1<f&&(M[new l.O(r.overscaledZ,_,u.z,m,u.y+1).key]={backfilled:!1},M[new l.O(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},M[new l.O(r.overscaledZ,I,u.z,T,u.y+1).key]={backfilled:!1}),M}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class ct extends l.E{constructor(r,u,f,m){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.e({},this._options,{type:this.type,data:this._data}),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(m),this._data=u.data,this._options=l.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=l.N/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:l.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.N,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},u),this}getClusterChildren(r,u){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},u),this}getClusterLeaves(r,u,f,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:u,offset:f},m),this}_updateWorkerData(r){const u=l.e({},this.workerOptions);r?u.dataDiff=r:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(l.h.resolveURL(this._data),K.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(f,m)=>{if(this._pendingLoads--,this._removed||m&&m.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let _=null;if(m&&m.resourceTiming&&m.resourceTiming[this.id]&&(_=m.resourceTiming[this.id].slice(0)),f)return void this.fire(new l.j(f));const T={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&l.e(T,{resourceTiming:_}),this.fire(new l.k("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(r,u){const f=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const m={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(f,m,(_,T)=>(delete r.request,r.unloadVectorData(),r.aborted?u(null):_?u(_):(r.loadVectorData(T,this.map.painter,f==="reloadTile"),u(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var vt=l.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class It extends l.E{constructor(r,u,f,m){super(),this.load=(_,T)=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=ce.getImage(this.map._requestManager.transformRequest(this.url,K.Image),(I,M)=>{this._request=null,this._loaded=!0,I?this.fire(new l.j(I)):M&&(this.image=M,_&&(this.coordinates=_),T&&T(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,T=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,vt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Q(_,this.image,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let I=!1;for(const M in this.tiles){const $=this.tiles[M];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture,I=!0)}I&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=r,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(l.U.fromLngLat);this.tileID=function(m){let _=1/0,T=1/0,I=-1/0,M=-1/0;for(const fe of m)_=Math.min(_,fe.x),T=Math.min(T,fe.y),I=Math.max(I,fe.x),M=Math.max(M,fe.y);const $=Math.max(I-_,M-T),q=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),J=Math.pow(2,q);return new l.W(q,Math.floor((_+I)/2*J),Math.floor((T+M)/2*J))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new l.V,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,l.N,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,l.N),this._boundsArray.emplaceBack(f[2].x,f[2].y,l.N,l.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(r,u){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},u(null)):(r.state="errored",u(null))}hasTransition(){return!1}}class ft extends It{constructor(r,u,f,m){super(r,u,f,m),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const T of _.urls)this.urls.push(this.map._requestManager.transformRequest(T,K.Source).url);l.X(this.urls,(T,I)=>{this._loaded=!0,T?this.fire(new l.j(T)):I&&(this.video=I,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,T=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,vt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE),T.texSubImage2D(T.TEXTURE_2D,0,0,0,T.RGBA,T.UNSIGNED_BYTE,this.video)):(this.texture=new Q(_,this.video,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let I=!1;for(const M in this.tiles){const $=this.tiles[M];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture,I=!0)}I&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new l.j(new l.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class St extends It{constructor(r,u,f,m){super(r,u,f,m),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const T=this.map.painter.context,I=T.gl;this.boundsBuffer||(this.boundsBuffer=T.createVertexBuffer(this._boundsArray,vt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Q(T,this.canvas,I.RGBA,{premultiply:!0});let M=!1;for(const $ in this.tiles){const q=this.tiles[$];q.state!=="loaded"&&(q.state="loaded",q.texture=this.texture,M=!0)}M&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(T=>typeof T!="number"))||this.fire(new l.j(new l.Y(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.Y(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.j(new l.Y(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.Y(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.Y(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Gt={},Ut=y=>{switch(y){case"geojson":return ct;case"image":return It;case"raster":return Ze;case"raster-dem":return nt;case"vector":return We;case"video":return ft;case"canvas":return St}return Gt[y]};function cn(y,r){const u=l.Z();return l.$(u,u,[1,1,0]),l.a0(u,u,[.5*y.width,.5*y.height,1]),l.a1(u,u,y.calculatePosMatrix(r.toUnwrapped()))}function xn(y,r,u,f,m,_){const T=function(J,fe,Me){if(J)for(const ke of J){const Oe=fe[ke];if(Oe&&Oe.source===Me&&Oe.type==="fill-extrusion")return!0}else for(const ke in fe){const Oe=fe[ke];if(Oe.source===Me&&Oe.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,y.id),I=_.maxPitchScaleFactor(),M=y.tilesIn(f,I,T);M.sort(yn);const $=[];for(const J of M)$.push({wrappedTileID:J.tileID.wrapped().key,queryResults:J.tile.queryRenderedFeatures(r,u,y._state,J.queryGeometry,J.cameraQueryGeometry,J.scale,m,_,I,cn(y.transform,J.tileID))});const q=function(J){const fe={},Me={};for(const ke of J){const Oe=ke.queryResults,Ae=ke.wrappedTileID,Ke=Me[Ae]=Me[Ae]||{};for(const tt in Oe){const De=Oe[tt],Ye=Ke[tt]=Ke[tt]||{},ot=fe[tt]=fe[tt]||[];for(const st of De)Ye[st.featureIndex]||(Ye[st.featureIndex]=!0,ot.push(st))}}return fe}($);for(const J in q)q[J].forEach(fe=>{const Me=fe.feature,ke=y.getFeatureState(Me.layer["source-layer"],Me.id);Me.source=Me.layer.source,Me.layer["source-layer"]&&(Me.sourceLayer=Me.layer["source-layer"]),Me.state=ke});return q}function yn(y,r){const u=y.tileID,f=r.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class sn{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=l.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const u=r+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,_){const T={};if(!_)return T;for(const I of m){const M=I.layerIds.map($=>_.getLayer($)).filter(Boolean);if(M.length!==0){I.layers=M,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map($=>M.filter(q=>q.id===$)[0]));for(const $ of M)T[$.id]=I}}return T}(r.buckets,u.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.a4){if(this.hasSymbolBuckets=!0,!f)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.a4&&_.hasRTLText){this.hasRTLText=!0,l.a5();break}}this.queryPadding=0;for(const m in this.buckets){const _=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(_))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.a3}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const m=this.buckets[f];m.uploadPending()&&m.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Q(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Q(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,f,m,_,T,I,M,$,q){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:_,scale:T,tileSize:this.tileSize,pixelPosMatrix:q,transform:M,params:I,queryPadding:this.queryPadding*$},r,u,f):{}}querySourceFeatures(r,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const m=f.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",T=m._geojsonTileLayer||m[_];if(!T)return;const I=l.a6(u&&u.filter),{z:M,x:$,y:q}=this.tileID.canonical,J={z:M,x:$,y:q};for(let fe=0;fe<T.length;fe++){const Me=T.feature(fe);if(I.needGeometry){const Ae=l.a7(Me,!0);if(!I.filter(new l.a8(this.tileID.overscaledZ),Ae,this.tileID.canonical))continue}else if(!I.filter(new l.a8(this.tileID.overscaledZ),Me))continue;const ke=f.getId(Me,_),Oe=new l.a9(Me,M,$,q,ke);Oe.tile=J,r.push(Oe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const f=l.aa(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let m=!1;if(this.expirationTime>f)m=!1;else if(u)if(this.expirationTime<u)m=!0;else{const _=this.expirationTime-u;_?this.expirationTime=f+Math.max(_,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!u.style.hasLayer(m))continue;const _=this.buckets[m],T=_.layers[0].sourceLayer||"_geojsonTileLayer",I=f[T],M=r[T];if(!I||!M||Object.keys(M).length===0)continue;_.update(M,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const $=u&&u.style&&u.style.getLayer(m);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=l.h.now()+r}setDependencies(r,u){const f={};for(const m of u)f[m]=!0;this.dependencies[r]=f}hasDependency(r,u){for(const f of r){const m=this.dependencies[f];if(m){for(const _ of u)if(m[_])return!0}}return!1}}class gn{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,f){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const _={value:u,timeout:void 0};if(f!==void 0&&(_.timeout=setTimeout(()=>{this.remove(r,_)},f)),this.data[m].push(_),this.order.push(m),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const f=r.wrapped().key,m=u===void 0?0:this.data[f].indexOf(u),_=this.data[f][m];return this.data[f].splice(m,1),_.timeout&&clearTimeout(_.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(_.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const f in this.data)for(const m of this.data[f])r(m.value)||u.push(m);for(const f of u)this.remove(f.value.tileID,f)}}class ie{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,f){const m=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},l.e(this.stateChanges[r][m],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const _ in this.state[r])_!==m&&(this.deletedStates[r][_]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const _ in this.state[r][m])f[_]||(this.deletedStates[r][m][_]=null)}else for(const _ in f)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][_]===null&&delete this.deletedStates[r][m][_]}removeFeatureState(r,u,f){if(this.deletedStates[r]===null)return;const m=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&u!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][f]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(f in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][f]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,u){const f=String(u),m=l.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const _=this.deletedStates[r][u];if(_===null)return{};for(const T in _)delete m[T]}return m}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const f={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const _={};for(const T in this.stateChanges[m])this.state[m][T]||(this.state[m][T]={}),l.e(this.state[m][T],this.stateChanges[m][T]),_[T]=this.state[m][T];f[m]=_}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const _={};if(this.deletedStates[m]===null)for(const T in this.state[m])_[T]={},this.state[m][T]={};else for(const T in this.deletedStates[m]){if(this.deletedStates[m][T]===null)this.state[m][T]={};else for(const I of Object.keys(this.deletedStates[m][T]))delete this.state[m][T][I];_[T]=this.state[m][T]}f[m]=f[m]||{},l.e(f[m],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const m in r)r[m].setFeatureState(f,u)}}class B extends l.E{constructor(r,u,f){super(),this.id=r,this.dispatcher=f,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,_,T,I)=>{const M=new(Ut(_.type))(m,_,T,I);if(M.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${M.id}`);return M})(r,u,f,this),this._tiles={},this._cache=new gn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ie,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u){return this._source.loadTile(r,u)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new l.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(j).map(r=>r.key)}getRenderableIds(r){const u=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&u.push(this._tiles[f]);return r?u.sort((f,m)=>{const _=f.tileID,T=m.tileID,I=new l.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),M=new l.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-T.overscaledZ||M.y-I.y||M.x-I.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(j).map(f=>f.key)}hasRenderableParent(r){const u=this.findLoadedParent(r,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(r,u){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(u||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,u){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,r,u)))}_tileLoaded(r,u,f,m){if(m)return r.state="errored",void(m.status!==404?this._source.fire(new l.j(m,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=l.h.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let m=0;m<u.length;m++){const _=u[m];if(r.neighboringTiles&&r.neighboringTiles[_]){const T=this.getTileByID(_);f(r,T),f(T,r)}}function f(m,_){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let T=_.tileID.canonical.x-m.tileID.canonical.x;const I=_.tileID.canonical.y-m.tileID.canonical.y,M=Math.pow(2,m.tileID.canonical.z),$=_.tileID.key;T===0&&I===0||Math.abs(I)>1||(Math.abs(T)>1&&(Math.abs(T+M)===1?T+=M:Math.abs(T-M)===1&&(T-=M)),_.dem&&m.dem&&(m.dem.backfillBorder(_.dem,T,I),m.neighboringTiles&&m.neighboringTiles[$]&&(m.neighboringTiles[$].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u,f,m){for(const _ in this._tiles){let T=this._tiles[_];if(m[_]||!T.hasData()||T.tileID.overscaledZ<=u||T.tileID.overscaledZ>f)continue;let I=T.tileID;for(;T&&T.tileID.overscaledZ>u+1;){const $=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[$.key],T&&T.hasData()&&(I=$)}let M=I;for(;M.overscaledZ>u;)if(M=M.scaledTo(M.overscaledZ-1),r[M.key]){m[I.key]=I;break}}}findLoadedParent(r,u){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=r.overscaledZ-1;f>=u;f--){const m=r.scaledTo(f),_=this._getLoadedTile(m);if(_)return _}}_getLoadedTile(r){const u=this._tiles[r.key];return u&&u.hasData()?u:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(u*f*(this._maxTileCacheZoomLevels===null?l.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(_)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const f={};for(const m in this._tiles){const _=this._tiles[m];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),f[_.tileID.key]=_}this._tiles=f;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(r,u){if(this.transform=r,this.terrain=u,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(q=>new l.O(q.canonical.z,q.wrap,q.canonical.z,q.canonical.x,q.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(q=>this._source.hasTile(q)))):f=[];const m=r.coveringZoomLevel(this._source),_=Math.max(m-B.maxOverzooming,this._source.minzoom),T=Math.max(m+B.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const q={};for(const J of f)if(J.canonical.z>this._source.minzoom){const fe=J.scaledTo(J.canonical.z-1);q[fe.key]=fe;const Me=J.scaledTo(Math.max(this._source.minzoom,Math.min(J.canonical.z,5)));q[Me.key]=Me}f=f.concat(Object.values(q))}const I=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(f,m);if(ge(this._source.type)){const q={},J={},fe=Object.keys(M),Me=l.h.now();for(const ke of fe){const Oe=M[ke],Ae=this._tiles[ke];if(!Ae||Ae.fadeEndTime!==0&&Ae.fadeEndTime<=Me)continue;const Ke=this.findLoadedParent(Oe,_);Ke&&(this._addTile(Ke.tileID),q[Ke.tileID.key]=Ke.tileID),J[ke]=Oe}this._retainLoadedChildren(J,m,T,M);for(const ke in q)M[ke]||(this._coveredTiles[ke]=!0,M[ke]=q[ke]);if(u){const ke={},Oe={};for(const Ae of f)this._tiles[Ae.key].hasData()?ke[Ae.key]=Ae:Oe[Ae.key]=Ae;for(const Ae in Oe){const Ke=Oe[Ae].children(this._source.maxzoom);this._tiles[Ke[0].key]&&this._tiles[Ke[1].key]&&this._tiles[Ke[2].key]&&this._tiles[Ke[3].key]&&(ke[Ke[0].key]=M[Ke[0].key]=Ke[0],ke[Ke[1].key]=M[Ke[1].key]=Ke[1],ke[Ke[2].key]=M[Ke[2].key]=Ke[2],ke[Ke[3].key]=M[Ke[3].key]=Ke[3],delete Oe[Ae])}for(const Ae in Oe){const Ke=this.findLoadedParent(Oe[Ae],this._source.minzoom);if(Ke){ke[Ke.tileID.key]=M[Ke.tileID.key]=Ke.tileID;for(const tt in ke)ke[tt].isChildOf(Ke.tileID)&&delete ke[tt]}}for(const Ae in this._tiles)ke[Ae]||(this._coveredTiles[Ae]=!0)}}for(const q in M)this._tiles[q].clearFadeHold();const $=l.ab(this._tiles,M);for(const q of $){const J=this._tiles[q];J.hasSymbolBuckets&&!J.holdingForFade()?J.setHoldDuration(this.map._fadeDuration):J.hasSymbolBuckets&&!J.symbolFadeFinished()||this._removeTile(q)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){const f={},m={},_=Math.max(u-B.maxOverzooming,this._source.minzoom),T=Math.max(u+B.maxUnderzooming,this._source.minzoom),I={};for(const M of r){const $=this._addTile(M);f[M.key]=M,$.hasData()||u<this._source.maxzoom&&(I[M.key]=M)}this._retainLoadedChildren(I,u,T,f);for(const M of r){let $=this._tiles[M.key];if($.hasData())continue;if(u+1>this._source.maxzoom){const J=M.children(this._source.maxzoom)[0],fe=this.getTile(J);if(fe&&fe.hasData()){f[J.key]=J;continue}}else{const J=M.children(this._source.maxzoom);if(f[J[0].key]&&f[J[1].key]&&f[J[2].key]&&f[J[3].key])continue}let q=$.wasRequested();for(let J=M.overscaledZ-1;J>=_;--J){const fe=M.scaledTo(J);if(m[fe.key])break;if(m[fe.key]=!0,$=this.getTile(fe),!$&&q&&($=this._addTile(fe)),$){const Me=$.hasData();if((q||Me)&&(f[fe.key]=fe),q=$.wasRequested(),Me)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const u=[];let f,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){f=this._loadedParentTiles[m.key];break}u.push(m.key);const _=m.scaledTo(m.overscaledZ-1);if(f=this._getLoadedTile(_),f)break;m=_}for(const _ of u)this._loadedParentTiles[_]=f}}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const f=u;return u||(u=new sn(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,r.key,u.state))),u.uses++,this._tiles[r.key]=u,f||this._source.fire(new l.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=u.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,f){const m=[],_=this.transform;if(!_)return m;const T=f?_.getCameraQueryGeometry(r):r,I=r.map(ke=>_.pointCoordinate(ke,this.terrain)),M=T.map(ke=>_.pointCoordinate(ke,this.terrain)),$=this.getIds();let q=1/0,J=1/0,fe=-1/0,Me=-1/0;for(const ke of M)q=Math.min(q,ke.x),J=Math.min(J,ke.y),fe=Math.max(fe,ke.x),Me=Math.max(Me,ke.y);for(let ke=0;ke<$.length;ke++){const Oe=this._tiles[$[ke]];if(Oe.holdingForFade())continue;const Ae=Oe.tileID,Ke=Math.pow(2,_.zoom-Oe.tileID.overscaledZ),tt=u*Oe.queryPadding*l.N/Oe.tileSize/Ke,De=[Ae.getTilePoint(new l.U(q,J)),Ae.getTilePoint(new l.U(fe,Me))];if(De[0].x-tt<l.N&&De[0].y-tt<l.N&&De[1].x+tt>=0&&De[1].y+tt>=0){const Ye=I.map(st=>Ae.getTilePoint(st)),ot=M.map(st=>Ae.getTilePoint(st));m.push({tile:Oe,tileID:Ae,queryGeometry:Ye,cameraQueryGeometry:ot,scale:Ke})}}return m}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(ge(this._source.type)){const r=l.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setFeatureState(r,u,f){this._state.updateState(r=r||"_geojsonTileLayer",u,f)}removeFeatureState(r,u,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,f)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,f){const m=this._tiles[r];m&&m.setDependencies(u,f)}reloadTilesForDependencies(r,u){for(const f in this._tiles)this._tiles[f].hasDependency(r,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,u))}}function j(y,r){const u=Math.abs(2*y.wrap)-+(y.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return y.overscaledZ-r.overscaledZ||f-u||r.canonical.y-y.canonical.y||r.canonical.x-y.canonical.x}function ge(y){return y==="raster"||y==="image"||y==="video"}B.maxOverzooming=10,B.maxUnderzooming=3;const Be="mapboxgl_preloaded_worker_pool";class et{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<et.workerCount;)this.workers.push(new Worker(l.c.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Be]}numActive(){return Object.keys(this.active).length}}const lt=Math.floor(l.h.hardwareConcurrency/2);let le;function L(){return le||(le=new et),le}et.workerCount=l.ac(globalThis)?Math.max(Math.min(lt,3),1):1;class U{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.ad(r,0,1);let u=1,f=this._distances[u];const m=r*this.paddedLength+this.padding;for(;f<m&&u<this._distances.length;)f=this._distances[++u];const _=u-1,T=this._distances[_],I=f-T,M=I>0?(m-T)/I:0;return this.points[_].mult(1-M).add(this.points[u].mult(M))}}function Ee(y,r){let u=!0;return y==="always"||y!=="never"&&r!=="never"||(u=!1),u}class Ge{constructor(r,u,f){const m=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(u/f);for(let T=0;T<this.xCellCount*this.yCellCount;T++)m.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,f,m,_){this._forEachCell(u,f,m,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(_)}insertCircle(r,u,f,m){this._forEachCell(u-m,f-m,u+m,f+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(f),this.circles.push(m)}_insertBoxCell(r,u,f,m,_,T){this.boxCells[_].push(T)}_insertCircleCell(r,u,f,m,_,T){this.circleCells[_].push(T)}_query(r,u,f,m,_,T,I){if(f<0||r>this.width||m<0||u>this.height)return[];const M=[];if(r<=0&&u<=0&&this.width<=f&&this.height<=m){if(_)return[{key:null,x1:r,y1:u,x2:f,y2:m}];for(let $=0;$<this.boxKeys.length;$++)M.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const q=this.circles[3*$],J=this.circles[3*$+1],fe=this.circles[3*$+2];M.push({key:this.circleKeys[$],x1:q-fe,y1:J-fe,x2:q+fe,y2:J+fe})}}else this._forEachCell(r,u,f,m,this._queryCell,M,{hitTest:_,overlapMode:T,seenUids:{box:{},circle:{}}},I);return M}query(r,u,f,m){return this._query(r,u,f,m,!1,null)}hitTest(r,u,f,m,_,T){return this._query(r,u,f,m,!0,_,T).length>0}hitTestCircle(r,u,f,m,_){const T=r-f,I=r+f,M=u-f,$=u+f;if(I<0||T>this.width||$<0||M>this.height)return!1;const q=[];return this._forEachCell(T,M,I,$,this._queryCellCircle,q,{hitTest:!0,overlapMode:m,circle:{x:r,y:u,radius:f},seenUids:{box:{},circle:{}}},_),q.length>0}_queryCell(r,u,f,m,_,T,I,M){const{seenUids:$,hitTest:q,overlapMode:J}=I,fe=this.boxCells[_];if(fe!==null){const ke=this.bboxes;for(const Oe of fe)if(!$.box[Oe]){$.box[Oe]=!0;const Ae=4*Oe,Ke=this.boxKeys[Oe];if(r<=ke[Ae+2]&&u<=ke[Ae+3]&&f>=ke[Ae+0]&&m>=ke[Ae+1]&&(!M||M(Ke))&&(!q||!Ee(J,Ke.overlapMode))&&(T.push({key:Ke,x1:ke[Ae],y1:ke[Ae+1],x2:ke[Ae+2],y2:ke[Ae+3]}),q))return!0}}const Me=this.circleCells[_];if(Me!==null){const ke=this.circles;for(const Oe of Me)if(!$.circle[Oe]){$.circle[Oe]=!0;const Ae=3*Oe,Ke=this.circleKeys[Oe];if(this._circleAndRectCollide(ke[Ae],ke[Ae+1],ke[Ae+2],r,u,f,m)&&(!M||M(Ke))&&(!q||!Ee(J,Ke.overlapMode))){const tt=ke[Ae],De=ke[Ae+1],Ye=ke[Ae+2];if(T.push({key:Ke,x1:tt-Ye,y1:De-Ye,x2:tt+Ye,y2:De+Ye}),q)return!0}}}return!1}_queryCellCircle(r,u,f,m,_,T,I,M){const{circle:$,seenUids:q,overlapMode:J}=I,fe=this.boxCells[_];if(fe!==null){const ke=this.bboxes;for(const Oe of fe)if(!q.box[Oe]){q.box[Oe]=!0;const Ae=4*Oe,Ke=this.boxKeys[Oe];if(this._circleAndRectCollide($.x,$.y,$.radius,ke[Ae+0],ke[Ae+1],ke[Ae+2],ke[Ae+3])&&(!M||M(Ke))&&!Ee(J,Ke.overlapMode))return T.push(!0),!0}}const Me=this.circleCells[_];if(Me!==null){const ke=this.circles;for(const Oe of Me)if(!q.circle[Oe]){q.circle[Oe]=!0;const Ae=3*Oe,Ke=this.circleKeys[Oe];if(this._circlesCollide(ke[Ae],ke[Ae+1],ke[Ae+2],$.x,$.y,$.radius)&&(!M||M(Ke))&&!Ee(J,Ke.overlapMode))return T.push(!0),!0}}}_forEachCell(r,u,f,m,_,T,I,M){const $=this._convertToXCellCoord(r),q=this._convertToYCellCoord(u),J=this._convertToXCellCoord(f),fe=this._convertToYCellCoord(m);for(let Me=$;Me<=J;Me++)for(let ke=q;ke<=fe;ke++)if(_.call(this,r,u,f,m,this.xCellCount*ke+Me,T,I,M))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,f,m,_,T){const I=m-r,M=_-u,$=f+T;return $*$>I*I+M*M}_circleAndRectCollide(r,u,f,m,_,T,I){const M=(T-m)/2,$=Math.abs(r-(m+M));if($>M+f)return!1;const q=(I-_)/2,J=Math.abs(u-(_+q));if(J>q+f)return!1;if($<=M||J<=q)return!0;const fe=$-M,Me=J-q;return fe*fe+Me*Me<=f*f}}function je(y,r,u,f,m){const _=l.Z();return r?(l.a0(_,_,[1/m,1/m,1]),u||l.ae(_,_,f.angle)):l.a1(_,f.labelPlaneMatrix,y),_}function at(y,r,u,f,m){if(r){const _=l.af(y);return l.a0(_,_,[m,m,1]),u||l.ae(_,_,-f.angle),_}return f.glCoordMatrix}function jt(y,r,u){let f;u?(f=[y.x,y.y,u(y.x,y.y),1],l.ag(f,f,r)):(f=[y.x,y.y,0,1],be(f,f,r));const m=f[3];return{point:new l.P(f[0]/m,f[1]/m),signedDistanceFromCamera:m}}function Tn(y,r){return .5+y/r*.5}function vn(y,r){const u=y[0]/y[3],f=y[1]/y[3];return u>=-r[0]&&u<=r[0]&&f>=-r[1]&&f<=r[1]}function _t(y,r,u,f,m,_,T,I,M,$){const q=f?y.textSizeData:y.iconSizeData,J=l.ah(q,u.transform.zoom),fe=[256/u.width*2+1,256/u.height*2+1],Me=f?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Me.clear();const ke=y.lineVertexArray,Oe=f?y.text.placedSymbolArray:y.icon.placedSymbolArray,Ae=u.transform.width/u.transform.height;let Ke=!1;for(let tt=0;tt<Oe.length;tt++){const De=Oe.get(tt);if(De.hidden||De.writingMode===l.ai.vertical&&!Ke){xe(De.numGlyphs,Me);continue}let Ye;if(Ke=!1,$?(Ye=[De.anchorX,De.anchorY,$(De.anchorX,De.anchorY),1],l.ag(Ye,Ye,r)):(Ye=[De.anchorX,De.anchorY,0,1],be(Ye,Ye,r)),!vn(Ye,fe)){xe(De.numGlyphs,Me);continue}const ot=Tn(u.transform.cameraToCenterDistance,Ye[3]),st=l.aj(q,J,De),dt=T?st/ot:st*ot,wt=new l.P(De.anchorX,De.anchorY),xt=jt(wt,m,$).point,Et={projections:{},offsets:{}},$t=wr(De,dt,!1,I,r,m,_,y.glyphOffsetArray,ke,Me,xt,wt,Et,Ae,M,$);Ke=$t.useVertical,($t.notEnoughRoom||Ke||$t.needsFlipping&&wr(De,dt,!0,I,r,m,_,y.glyphOffsetArray,ke,Me,xt,wt,Et,Ae,M,$).notEnoughRoom)&&xe(De.numGlyphs,Me)}f?y.text.dynamicLayoutVertexBuffer.updateData(Me):y.icon.dynamicLayoutVertexBuffer.updateData(Me)}function Rt(y,r,u,f,m,_,T,I,M,$,q,J,fe){const Me=I.glyphStartIndex+I.numGlyphs,ke=I.lineStartIndex,Oe=I.lineStartIndex+I.lineLength,Ae=r.getoffsetX(I.glyphStartIndex),Ke=r.getoffsetX(Me-1),tt=re(y*Ae,u,f,m,_,T,I.segment,ke,Oe,M,$,q,J,fe);if(!tt)return null;const De=re(y*Ke,u,f,m,_,T,I.segment,ke,Oe,M,$,q,J,fe);return De?{first:tt,last:De}:null}function nn(y,r,u,f){return y===l.ai.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*f?{useVertical:!0}:(y===l.ai.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function wr(y,r,u,f,m,_,T,I,M,$,q,J,fe,Me,ke,Oe){const Ae=r/24,Ke=y.lineOffsetX*Ae,tt=y.lineOffsetY*Ae;let De;if(y.numGlyphs>1){const Ye=y.glyphStartIndex+y.numGlyphs,ot=y.lineStartIndex,st=y.lineStartIndex+y.lineLength,dt=Rt(Ae,I,Ke,tt,u,q,J,y,M,_,fe,ke,Oe);if(!dt)return{notEnoughRoom:!0};const wt=jt(dt.first.point,T,Oe).point,xt=jt(dt.last.point,T,Oe).point;if(f&&!u){const Et=nn(y.writingMode,wt,xt,Me);if(Et)return Et}De=[dt.first];for(let Et=y.glyphStartIndex+1;Et<Ye-1;Et++)De.push(re(Ae*I.getoffsetX(Et),Ke,tt,u,q,J,y.segment,ot,st,M,_,fe,ke,Oe));De.push(dt.last)}else{if(f&&!u){const ot=jt(J,m,Oe).point,st=y.lineStartIndex+y.segment+1,dt=new l.P(M.getx(st),M.gety(st)),wt=jt(dt,m,Oe),xt=wt.signedDistanceFromCamera>0?wt.point:fi(J,dt,ot,1,m,Oe),Et=nn(y.writingMode,ot,xt,Me);if(Et)return Et}const Ye=re(Ae*I.getoffsetX(y.glyphStartIndex),Ke,tt,u,q,J,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,M,_,fe,ke,Oe);if(!Ye)return{notEnoughRoom:!0};De=[Ye]}for(const Ye of De)l.ak($,Ye.point,Ye.angle);return{}}function fi(y,r,u,f,m,_){const T=jt(y.add(y.sub(r)._unit()),m,_).point,I=u.sub(T);return u.add(I._mult(f/I.mag()))}function hn(y,r){const{projectionCache:u,lineVertexArray:f,labelPlaneMatrix:m,tileAnchorPoint:_,distanceFromAnchor:T,getElevation:I,previousVertex:M,direction:$,absOffsetX:q}=r;if(u.projections[y])return u.projections[y];const J=new l.P(f.getx(y),f.gety(y)),fe=jt(J,m,I);if(fe.signedDistanceFromCamera>0)return u.projections[y]=fe.point,fe.point;const Me=y-$;return fi(T===0?_:new l.P(f.getx(Me),f.gety(Me)),J,M,q-T+1,m,I)}function er(y,r,u){return y._unit()._perp()._mult(r*u)}function ze(y,r,u,f,m,_,T,I){const{projectionCache:M,direction:$}=I;if(M.offsets[y])return M.offsets[y];const q=u.add(r);if(y+$<f||y+$>=m)return M.offsets[y]=q,q;const J=hn(y+$,I),fe=er(J.sub(u),T,$),Me=u.add(fe),ke=J.add(fe);return M.offsets[y]=l.al(_,q,Me,ke)||q,M.offsets[y]}function re(y,r,u,f,m,_,T,I,M,$,q,J,fe,Me){const ke=f?y-r:y+r;let Oe=ke>0?1:-1,Ae=0;f&&(Oe*=-1,Ae=Math.PI),Oe<0&&(Ae+=Math.PI);let Ke,tt,De=Oe>0?I+T:I+T+1,Ye=m,ot=m,st=0,dt=0;const wt=Math.abs(ke),xt=[];let Et;for(;st+dt<=wt;){if(De+=Oe,De<I||De>=M)return null;st+=dt,ot=Ye,tt=Ke;const kt={projectionCache:J,lineVertexArray:$,labelPlaneMatrix:q,tileAnchorPoint:_,distanceFromAnchor:st,getElevation:Me,previousVertex:ot,direction:Oe,absOffsetX:wt};if(Ye=hn(De,kt),u===0)xt.push(ot),Et=Ye.sub(ot);else{let ln;const Ht=Ye.sub(ot);ln=Ht.mag()===0?er(hn(De+Oe,kt).sub(Ye),u,Oe):er(Ht,u,Oe),tt||(tt=ot.add(ln)),Ke=ze(De,ln,Ye,I,M,tt,u,kt),xt.push(tt),Et=Ke.sub(tt)}dt=Et.mag()}const $t=Et._mult((wt-st)/dt)._add(tt||ot),Pn=Ae+Math.atan2(Ye.y-ot.y,Ye.x-ot.x);return xt.push($t),{point:$t,angle:fe?Pn:0,path:xt}}const he=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function xe(y,r){for(let u=0;u<y;u++){const f=r.length;r.resize(f+4),r.float32.set(he,3*f)}}function be(y,r,u){const f=r[0],m=r[1];return y[0]=u[0]*f+u[4]*m+u[12],y[1]=u[1]*f+u[5]*m+u[13],y[3]=u[3]*f+u[7]*m+u[15],y}const Ce=100;class He{constructor(r,u=new Ge(r.width+200,r.height+200,25),f=new Ge(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Ce,this.screenBottomBoundary=r.height+Ce,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,f,m,_,T){const I=this.projectAndGetPerspectiveRatio(m,r.anchorPointX,r.anchorPointY,T),M=f*I.perspectiveRatio,$=r.x1*M+I.point.x,q=r.y1*M+I.point.y,J=r.x2*M+I.point.x,fe=r.y2*M+I.point.y;return!this.isInsideGrid($,q,J,fe)||u!=="always"&&this.grid.hitTest($,q,J,fe,u,_)||I.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[$,q,J,fe],offscreen:this.isOffscreen($,q,J,fe)}}placeCollisionCircles(r,u,f,m,_,T,I,M,$,q,J,fe,Me,ke){const Oe=[],Ae=new l.P(u.anchorX,u.anchorY),Ke=jt(Ae,T,ke),tt=Tn(this.transform.cameraToCenterDistance,Ke.signedDistanceFromCamera),De=(q?_/tt:_*tt)/l.ap,Ye=jt(Ae,I,ke).point,ot=Rt(De,m,u.lineOffsetX*De,u.lineOffsetY*De,!1,Ye,Ae,u,f,I,{projections:{},offsets:{}},!1,ke);let st=!1,dt=!1,wt=!0;if(ot){const xt=.5*fe*tt+Me,Et=new l.P(-100,-100),$t=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Pn=new U,kt=ot.first,ln=ot.last;let Ht=[];for(let _n=kt.path.length-1;_n>=1;_n--)Ht.push(kt.path[_n]);for(let _n=1;_n<ln.path.length;_n++)Ht.push(ln.path[_n]);const Xn=2.5*xt;if(M){const _n=Ht.map(kn=>jt(kn,M,ke));Ht=_n.some(kn=>kn.signedDistanceFromCamera<=0)?[]:_n.map(kn=>kn.point)}let An=[];if(Ht.length>0){const _n=Ht[0].clone(),kn=Ht[0].clone();for(let Sr=1;Sr<Ht.length;Sr++)_n.x=Math.min(_n.x,Ht[Sr].x),_n.y=Math.min(_n.y,Ht[Sr].y),kn.x=Math.max(kn.x,Ht[Sr].x),kn.y=Math.max(kn.y,Ht[Sr].y);An=_n.x>=Et.x&&kn.x<=$t.x&&_n.y>=Et.y&&kn.y<=$t.y?[Ht]:kn.x<Et.x||_n.x>$t.x||kn.y<Et.y||_n.y>$t.y?[]:l.am([Ht],Et.x,Et.y,$t.x,$t.y)}for(const _n of An){Pn.reset(_n,.25*xt);let kn=0;kn=Pn.length<=.5*xt?1:Math.ceil(Pn.paddedLength/Xn)+1;for(let Sr=0;Sr<kn;Sr++){const nr=Sr/Math.max(kn-1,1),si=Pn.lerp(nr),Zr=si.x+Ce,Ar=si.y+Ce;Oe.push(Zr,Ar,xt,0);const no=Zr-xt,ur=Ar-xt,es=Zr+xt,ts=Ar+xt;if(wt=wt&&this.isOffscreen(no,ur,es,ts),dt=dt||this.isInsideGrid(no,ur,es,ts),r!=="always"&&this.grid.hitTestCircle(Zr,Ar,xt,r,J)&&(st=!0,!$))return{circles:[],offscreen:!1,collisionDetected:st}}}}return{circles:!$&&st||!dt||tt<this.perspectiveRatioCutoff?[]:Oe,offscreen:wt,collisionDetected:st}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,m=1/0,_=-1/0,T=-1/0;for(const q of r){const J=new l.P(q.x+Ce,q.y+Ce);f=Math.min(f,J.x),m=Math.min(m,J.y),_=Math.max(_,J.x),T=Math.max(T,J.y),u.push(J)}const I=this.grid.query(f,m,_,T).concat(this.ignoredGrid.query(f,m,_,T)),M={},$={};for(const q of I){const J=q.key;if(M[J.bucketInstanceId]===void 0&&(M[J.bucketInstanceId]={}),M[J.bucketInstanceId][J.featureIndex])continue;const fe=[new l.P(q.x1,q.y1),new l.P(q.x2,q.y1),new l.P(q.x2,q.y2),new l.P(q.x1,q.y2)];l.an(u,fe)&&(M[J.bucketInstanceId][J.featureIndex]=!0,$[J.bucketInstanceId]===void 0&&($[J.bucketInstanceId]=[]),$[J.bucketInstanceId].push(J.featureIndex))}return $}insertCollisionBox(r,u,f,m,_,T){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:_,collisionGroupID:T,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,f,m,_,T){const I=f?this.ignoredGrid:this.grid,M={bucketInstanceId:m,featureIndex:_,collisionGroupID:T,overlapMode:u};for(let $=0;$<r.length;$+=4)I.insertCircle(M,r[$],r[$+1],r[$+2])}projectAndGetPerspectiveRatio(r,u,f,m){let _;return m?(_=[u,f,m(u,f),1],l.ag(_,_,r)):(_=[u,f,0,1],be(_,_,r)),{point:new l.P((_[0]/_[3]+1)/2*this.transform.width+Ce,(-_[1]/_[3]+1)/2*this.transform.height+Ce),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(r,u,f,m){return f<Ce||r>=this.screenRightBoundary||m<Ce||u>this.screenBottomBoundary}isInsideGrid(r,u,f,m){return f>=0&&r<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=l.ao([]);return l.$(r,r,[-100,-100,0]),r}}function Ve(y,r,u){return r*(l.N/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class Fe{constructor(r,u,f,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):m&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class qe{constructor(r,u,f,m,_){this.text=new Fe(r?r.text:null,u,f,_),this.icon=new Fe(r?r.icon:null,u,m,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ut{constructor(r,u,f){this.text=r,this.icon=u,this.skipFade=f}}class ht{constructor(){this.invProjMatrix=l.Z(),this.viewportMatrix=l.Z(),this.circles=[]}}class mt{constructor(r,u,f,m,_){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=m,this.tileID=_}}class Jt{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[r]}}function un(y,r,u,f,m){const{horizontalAlign:_,verticalAlign:T}=l.au(y);return new l.P(-(_-.5)*r+f[0]*m,-(T-.5)*u+f[1]*m)}function Dt(y,r,u,f,m,_){const{x1:T,x2:I,y1:M,y2:$,anchorPointX:q,anchorPointY:J}=y,fe=new l.P(r,u);return f&&fe._rotate(m?_:-_),{x1:T+fe.x,y1:M+fe.y,x2:I+fe.x,y2:$+fe.y,anchorPointX:q,anchorPointY:J}}class Qt{constructor(r,u,f,m,_){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new He(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Jt(m),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,u,f,m){const _=f.getBucket(u),T=f.latestFeatureIndex;if(!_||!T||u.id!==_.layerIds[0])return;const I=f.collisionBoxArray,M=_.layers[0].layout,$=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),q=f.tileSize/l.N,J=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),fe=M.get("text-pitch-alignment")==="map",Me=M.get("text-rotation-alignment")==="map",ke=Ve(f,1,this.transform.zoom),Oe=je(J,fe,Me,this.transform,ke);let Ae=null;if(fe){const tt=at(J,fe,Me,this.transform,ke);Ae=l.a1([],this.transform.labelPlaneMatrix,tt)}this.retainedQueryData[_.bucketInstanceId]=new mt(_.bucketInstanceId,T,_.sourceLayerIndex,_.index,f.tileID);const Ke={bucket:_,layout:M,posMatrix:J,textLabelPlaneMatrix:Oe,labelToScreenMatrix:Ae,scale:$,textPixelRatio:q,holdingForFade:f.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:l.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(m)for(const tt of _.sortKeyRanges){const{sortKey:De,symbolInstanceStart:Ye,symbolInstanceEnd:ot}=tt;r.push({sortKey:De,symbolInstanceStart:Ye,symbolInstanceEnd:ot,parameters:Ke})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:Ke})}attemptAnchorPlacement(r,u,f,m,_,T,I,M,$,q,J,fe,Me,ke,Oe,Ae){const Ke=l.aq[r.textAnchor],tt=[r.textOffset0,r.textOffset1],De=un(Ke,f,m,tt,_),Ye=this.collisionIndex.placeCollisionBox(Dt(u,De.x,De.y,T,I,this.transform.angle),J,M,$,q.predicate,Ae);if((!Oe||this.collisionIndex.placeCollisionBox(Dt(Oe,De.x,De.y,T,I,this.transform.angle),J,M,$,q.predicate,Ae).box.length!==0)&&Ye.box.length>0){let ot;if(this.prevPlacement&&this.prevPlacement.variableOffsets[fe.crossTileID]&&this.prevPlacement.placements[fe.crossTileID]&&this.prevPlacement.placements[fe.crossTileID].text&&(ot=this.prevPlacement.variableOffsets[fe.crossTileID].anchor),fe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[fe.crossTileID]={textOffset:tt,width:f,height:m,anchor:Ke,textBoxScale:_,prevAnchor:ot},this.markUsedJustification(Me,Ke,fe,ke),Me.allowVerticalPlacement&&(this.markUsedOrientation(Me,ke,fe),this.placedOrientations[fe.crossTileID]=ke),{shift:De,placedGlyphBoxes:Ye}}}placeLayerBucketPart(r,u,f){const{bucket:m,layout:_,posMatrix:T,textLabelPlaneMatrix:I,labelToScreenMatrix:M,textPixelRatio:$,holdingForFade:q,collisionBoxArray:J,partiallyEvaluatedTextSize:fe,collisionGroup:Me}=r.parameters,ke=_.get("text-optional"),Oe=_.get("icon-optional"),Ae=l.ar(_,"text-overlap","text-allow-overlap"),Ke=Ae==="always",tt=l.ar(_,"icon-overlap","icon-allow-overlap"),De=tt==="always",Ye=_.get("text-rotation-alignment")==="map",ot=_.get("text-pitch-alignment")==="map",st=_.get("icon-text-fit")!=="none",dt=_.get("symbol-z-order")==="viewport-y",wt=Ke&&(De||!m.hasIconData()||Oe),xt=De&&(Ke||!m.hasTextData()||ke);!m.collisionArrays&&J&&m.deserializeCollisionBoxes(J);const Et=this.retainedQueryData[m.bucketInstanceId].tileID,$t=this.terrain?(kt,ln)=>this.terrain.getElevation(Et,kt,ln):null,Pn=(kt,ln)=>{var Ht,Xn;if(u[kt.crossTileID])return;if(q)return void(this.placements[kt.crossTileID]=new ut(!1,!1,!1));let An=!1,_n=!1,kn=!0,Sr=null,nr={box:null,offscreen:null},si={box:null,offscreen:null},Zr=null,Ar=null,no=null,ur=0,es=0,ts=0;ln.textFeatureIndex?ur=ln.textFeatureIndex:kt.useRuntimeCollisionCircles&&(ur=kt.featureIndex),ln.verticalTextFeatureIndex&&(es=ln.verticalTextFeatureIndex);const ta=ln.textBox;if(ta){const gi=Er=>{let Hr=l.ai.horizontal;if(m.allowVerticalPlacement&&!Er&&this.prevPlacement){const Ni=this.prevPlacement.placedOrientations[kt.crossTileID];Ni&&(this.placedOrientations[kt.crossTileID]=Ni,Hr=Ni,this.markUsedOrientation(m,Hr,kt))}return Hr},ai=(Er,Hr)=>{if(m.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&ln.verticalTextBox){for(const Ni of m.writingModes)if(Ni===l.ai.vertical?(nr=Hr(),si=nr):nr=Er(),nr&&nr.box&&nr.box.length)break}else nr=Er()},Ci=kt.textAnchorOffsetStartIndex,za=kt.textAnchorOffsetEndIndex;if(za===Ci){const Er=(Hr,Ni)=>{const Tr=this.collisionIndex.placeCollisionBox(Hr,Ae,$,T,Me.predicate,$t);return Tr&&Tr.box&&Tr.box.length&&(this.markUsedOrientation(m,Ni,kt),this.placedOrientations[kt.crossTileID]=Ni),Tr};ai(()=>Er(ta,l.ai.horizontal),()=>{const Hr=ln.verticalTextBox;return m.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&Hr?Er(Hr,l.ai.vertical):{box:null,offscreen:null}}),gi(nr&&nr.box&&nr.box.length)}else{let Er=l.aq[(Xn=(Ht=this.prevPlacement)===null||Ht===void 0?void 0:Ht.variableOffsets[kt.crossTileID])===null||Xn===void 0?void 0:Xn.anchor];const Hr=(Tr,Oa,Tc)=>{const ip=Tr.x2-Tr.x1,op=Tr.y2-Tr.y1,hy=kt.textBoxScale,of=st&&tt==="never"?Oa:null;let ns={box:[],offscreen:!1},Fa=Ae==="never"?1:2,rs="never";Er&&Fa++;for(let xo=0;xo<Fa;xo++){for(let is=Ci;is<za;is++){const sf=m.textAnchorOffsets.get(is);if(Er&&sf.textAnchor!==Er)continue;const Cs=this.attemptAnchorPlacement(sf,Tr,ip,op,hy,Ye,ot,$,T,Me,rs,kt,m,Tc,of,$t);if(Cs&&(ns=Cs.placedGlyphBoxes,ns&&ns.box&&ns.box.length))return An=!0,Sr=Cs.shift,ns}Er?Er=null:rs=Ae}return ns};ai(()=>Hr(ta,ln.iconBox,l.ai.horizontal),()=>{const Tr=ln.verticalTextBox;return m.allowVerticalPlacement&&!(nr&&nr.box&&nr.box.length)&&kt.numVerticalGlyphVertices>0&&Tr?Hr(Tr,ln.verticalIconBox,l.ai.vertical):{box:null,offscreen:null}}),nr&&(An=nr.box,kn=nr.offscreen);const Ni=gi(nr&&nr.box);if(!An&&this.prevPlacement){const Tr=this.prevPlacement.variableOffsets[kt.crossTileID];Tr&&(this.variableOffsets[kt.crossTileID]=Tr,this.markUsedJustification(m,Tr.anchor,kt,Ni))}}}if(Zr=nr,An=Zr&&Zr.box&&Zr.box.length>0,kn=Zr&&Zr.offscreen,kt.useRuntimeCollisionCircles){const gi=m.text.placedSymbolArray.get(kt.centerJustifiedTextSymbolIndex),ai=l.aj(m.textSizeData,fe,gi),Ci=_.get("text-padding");Ar=this.collisionIndex.placeCollisionCircles(Ae,gi,m.lineVertexArray,m.glyphOffsetArray,ai,T,I,M,f,ot,Me.predicate,kt.collisionCircleDiameter,Ci,$t),Ar.circles.length&&Ar.collisionDetected&&!f&&l.w("Collisions detected, but collision boxes are not shown"),An=Ke||Ar.circles.length>0&&!Ar.collisionDetected,kn=kn&&Ar.offscreen}if(ln.iconFeatureIndex&&(ts=ln.iconFeatureIndex),ln.iconBox){const gi=ai=>{const Ci=st&&Sr?Dt(ai,Sr.x,Sr.y,Ye,ot,this.transform.angle):ai;return this.collisionIndex.placeCollisionBox(Ci,tt,$,T,Me.predicate,$t)};si&&si.box&&si.box.length&&ln.verticalIconBox?(no=gi(ln.verticalIconBox),_n=no.box.length>0):(no=gi(ln.iconBox),_n=no.box.length>0),kn=kn&&no.offscreen}const La=ke||kt.numHorizontalGlyphVertices===0&&kt.numVerticalGlyphVertices===0,Al=Oe||kt.numIconVertices===0;if(La||Al?Al?La||(_n=_n&&An):An=_n&&An:_n=An=_n&&An,An&&Zr&&Zr.box&&this.collisionIndex.insertCollisionBox(Zr.box,Ae,_.get("text-ignore-placement"),m.bucketInstanceId,si&&si.box&&es?es:ur,Me.ID),_n&&no&&this.collisionIndex.insertCollisionBox(no.box,tt,_.get("icon-ignore-placement"),m.bucketInstanceId,ts,Me.ID),Ar&&(An&&this.collisionIndex.insertCollisionCircles(Ar.circles,Ae,_.get("text-ignore-placement"),m.bucketInstanceId,ur,Me.ID),f)){const gi=m.bucketInstanceId;let ai=this.collisionCircleArrays[gi];ai===void 0&&(ai=this.collisionCircleArrays[gi]=new ht);for(let Ci=0;Ci<Ar.circles.length;Ci+=4)ai.circles.push(Ar.circles[Ci+0]),ai.circles.push(Ar.circles[Ci+1]),ai.circles.push(Ar.circles[Ci+2]),ai.circles.push(Ar.collisionDetected?1:0)}if(kt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[kt.crossTileID]=new ut(An||wt,_n||xt,kn||m.justReloaded),u[kt.crossTileID]=!0};if(dt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const kt=m.getSortedSymbolIndexes(this.transform.angle);for(let ln=kt.length-1;ln>=0;--ln){const Ht=kt[ln];Pn(m.symbolInstances.get(Ht),m.collisionArrays[Ht])}}else for(let kt=r.symbolInstanceStart;kt<r.symbolInstanceEnd;kt++)Pn(m.symbolInstances.get(kt),m.collisionArrays[kt]);if(f&&m.bucketInstanceId in this.collisionCircleArrays){const kt=this.collisionCircleArrays[m.bucketInstanceId];l.as(kt.invProjMatrix,T),kt.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(r,u,f,m){let _;_=m===l.ai.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[l.at(u)];const T=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const I of T)I>=0&&(r.text.placedSymbolArray.get(I).crossTileID=_>=0&&I!==_?0:f.crossTileID)}markUsedOrientation(r,u,f){const m=u===l.ai.horizontal||u===l.ai.horizontalOnly?u:0,_=u===l.ai.vertical?u:0,T=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const I of T)r.text.placedSymbolArray.get(I).placedOrientation=m;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const m=u?u.symbolFadeChange(r):1,_=u?u.opacities:{},T=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const M in this.placements){const $=this.placements[M],q=_[M];q?(this.opacities[M]=new qe(q,m,$.text,$.icon),f=f||$.text!==q.text.placed||$.icon!==q.icon.placed):(this.opacities[M]=new qe(null,m,$.text,$.icon,$.skipFade),f=f||$.text||$.icon)}for(const M in _){const $=_[M];if(!this.opacities[M]){const q=new qe($,m,!1,!1);q.isHidden()||(this.opacities[M]=q,f=f||$.text.placed||$.icon.placed)}}for(const M in T)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=T[M]);for(const M in I)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=I[M]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const f={};for(const m of u){const _=m.getBucket(r);_&&m.latestFeatureIndex&&r.id===_.layerIds[0]&&this.updateBucketOpacities(_,f,m.collisionBoxArray)}}updateBucketOpacities(r,u,f){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const m=r.layers[0],_=m.layout,T=new qe(null,0,!1,!1,!0),I=_.get("text-allow-overlap"),M=_.get("icon-allow-overlap"),$=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),q=_.get("text-rotation-alignment")==="map",J=_.get("text-pitch-alignment")==="map",fe=_.get("icon-text-fit")!=="none",Me=new qe(null,0,I&&(M||!r.hasIconData()||_.get("icon-optional")),M&&(I||!r.hasTextData()||_.get("text-optional")),!0);!r.collisionArrays&&f&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(f);const ke=(Oe,Ae,Ke)=>{for(let tt=0;tt<Ae/4;tt++)Oe.opacityVertexArray.emplaceBack(Ke);Oe.hasVisibleVertices=Oe.hasVisibleVertices||Ke!==ri};for(let Oe=0;Oe<r.symbolInstances.length;Oe++){const Ae=r.symbolInstances.get(Oe),{numHorizontalGlyphVertices:Ke,numVerticalGlyphVertices:tt,crossTileID:De}=Ae;let Ye=this.opacities[De];u[De]?Ye=T:Ye||(Ye=Me,this.opacities[De]=Ye),u[De]=!0;const ot=Ae.numIconVertices>0,st=this.placedOrientations[Ae.crossTileID],dt=st===l.ai.vertical,wt=st===l.ai.horizontal||st===l.ai.horizontalOnly;if(Ke>0||tt>0){const xt=Ur(Ye.text);ke(r.text,Ke,dt?ri:xt),ke(r.text,tt,wt?ri:xt);const Et=Ye.text.isHidden();[Ae.rightJustifiedTextSymbolIndex,Ae.centerJustifiedTextSymbolIndex,Ae.leftJustifiedTextSymbolIndex].forEach(kt=>{kt>=0&&(r.text.placedSymbolArray.get(kt).hidden=Et||dt?1:0)}),Ae.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ae.verticalPlacedTextSymbolIndex).hidden=Et||wt?1:0);const $t=this.variableOffsets[Ae.crossTileID];$t&&this.markUsedJustification(r,$t.anchor,Ae,st);const Pn=this.placedOrientations[Ae.crossTileID];Pn&&(this.markUsedJustification(r,"left",Ae,Pn),this.markUsedOrientation(r,Pn,Ae))}if(ot){const xt=Ur(Ye.icon),Et=!(fe&&Ae.verticalPlacedIconSymbolIndex&&dt);Ae.placedIconSymbolIndex>=0&&(ke(r.icon,Ae.numIconVertices,Et?xt:ri),r.icon.placedSymbolArray.get(Ae.placedIconSymbolIndex).hidden=Ye.icon.isHidden()),Ae.verticalPlacedIconSymbolIndex>=0&&(ke(r.icon,Ae.numVerticalIconVertices,Et?ri:xt),r.icon.placedSymbolArray.get(Ae.verticalPlacedIconSymbolIndex).hidden=Ye.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const xt=r.collisionArrays[Oe];if(xt){let Et=new l.P(0,0);if(xt.textBox||xt.verticalTextBox){let Pn=!0;if($){const kt=this.variableOffsets[De];kt?(Et=un(kt.anchor,kt.width,kt.height,kt.textOffset,kt.textBoxScale),q&&Et._rotate(J?this.transform.angle:-this.transform.angle)):Pn=!1}xt.textBox&&fn(r.textCollisionBox.collisionVertexArray,Ye.text.placed,!Pn||dt,Et.x,Et.y),xt.verticalTextBox&&fn(r.textCollisionBox.collisionVertexArray,Ye.text.placed,!Pn||wt,Et.x,Et.y)}const $t=!!(!wt&&xt.verticalIconBox);xt.iconBox&&fn(r.iconCollisionBox.collisionVertexArray,Ye.icon.placed,$t,fe?Et.x:0,fe?Et.y:0),xt.verticalIconBox&&fn(r.iconCollisionBox.collisionVertexArray,Ye.icon.placed,!$t,fe?Et.x:0,fe?Et.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Oe=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Oe.invProjMatrix,r.placementViewportMatrix=Oe.viewportMatrix,r.collisionCircleArray=Oe.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function fn(y,r,u,f,m){y.emplaceBack(r?1:0,u?1:0,f||0,m||0),y.emplaceBack(r?1:0,u?1:0,f||0,m||0),y.emplaceBack(r?1:0,u?1:0,f||0,m||0),y.emplaceBack(r?1:0,u?1:0,f||0,m||0)}const Rn=Math.pow(2,25),jn=Math.pow(2,24),On=Math.pow(2,17),Mn=Math.pow(2,16),ei=Math.pow(2,9),qn=Math.pow(2,8),br=Math.pow(2,1);function Ur(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const r=y.placed?1:0,u=Math.floor(127*y.opacity);return u*Rn+r*jn+u*On+r*Mn+u*ei+r*qn+u*br+r}const ri=0;class Gs{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,f,m,_){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(T,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((I,M)=>I.sortKey-M.sortKey));this._currentPartIndex<T.length;)if(u.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,_())return!0;return!1}}class ms{constructor(r,u,f,m,_,T,I,M){this.placement=new Qt(r,u,T,I,M),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(r,u,f){const m=l.h.now(),_=()=>!this._forceFullPlacement&&l.h.now()-m>2;for(;this._currentPlacementIndex>=0;){const T=u[r[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=I)&&(!T.maxzoom||T.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Gs(T)),this._inProgressLayer.continuePlacement(f[T.source],this.placement,this._showCollisionBoxes,T,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const wn=512/l.N/2;class gs{constructor(r,u,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const m=new Map;for(let _=0;_<u.length;_++){const T=u.get(_),I=T.key,M=m.get(I);M?M.push(T):m.set(I,[T])}for(const[_,T]of m){const I={positions:T.map(M=>({x:Math.floor(M.anchorX*wn),y:Math.floor(M.anchorY*wn)})),crossTileIDs:T.map(M=>M.crossTileID)};if(I.positions.length>128){const M=new l.av(I.positions.length,16,Uint16Array);for(const{x:$,y:q}of I.positions)M.add($,q);M.finish(),delete I.positions,I.index=M}this._symbolsByKey[_]=I}}getScaledCoordinates(r,u){const{x:f,y:m,z:_}=this.tileID.canonical,{x:T,y:I,z:M}=u.canonical,$=wn/Math.pow(2,M-_),q=(I*l.N+r.anchorY)*$,J=m*l.N*wn;return{x:Math.floor((T*l.N+r.anchorX)*$-f*l.N*wn),y:Math.floor(q-J)}}findMatches(r,u,f){const m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<r.length;_++){const T=r.get(_);if(T.crossTileID)continue;const I=this._symbolsByKey[T.key];if(!I)continue;const M=this.getScaledCoordinates(T,u);if(I.index){const $=I.index.range(M.x-m,M.y-m,M.x+m,M.y+m).sort();for(const q of $){const J=I.crossTileIDs[q];if(!f[J]){f[J]=!0,T.crossTileID=J;break}}}else if(I.positions)for(let $=0;$<I.positions.length;$++){const q=I.positions[$],J=I.crossTileIDs[$];if(Math.abs(q.x-M.x)<=m&&Math.abs(q.y-M.y)<=m&&!f[J]){f[J]=!0,T.crossTileID=J;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Gn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class cu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const f in this.indexes){const m=this.indexes[f],_={};for(const T in m){const I=m[T];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),_[I.tileID.key]=I}this.indexes[f]=_}this.lng=r}addBucket(r,u,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const _ in this.indexes){const T=this.indexes[_];if(Number(_)>r.overscaledZ)for(const I in T){const M=T[I];M.tileID.isChildOf(r)&&M.findMatches(u.symbolInstances,r,m)}else{const I=T[r.scaledTo(Number(_)).key];I&&I.findMatches(u.symbolInstances,r,m)}}for(let _=0;_<u.symbolInstances.length;_++){const T=u.symbolInstances.get(_);T.crossTileID||(T.crossTileID=f.generate(),m[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new gs(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const f of u.getCrossTileIDsLists())for(const m of f)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let u=!1;for(const f in this.indexes){const m=this.indexes[f];for(const _ in m)r[m[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,m[_]),delete m[_],u=!0)}return u}}class rl{constructor(){this.layerIndexes={},this.crossTileIDs=new Gn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,f){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new cu);let _=!1;const T={};m.handleWrapJump(f);for(const I of u){const M=I.getBucket(r);M&&r.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(I.tileID,M,this.crossTileIDs)&&(_=!0),T[M.bucketInstanceId]=!0)}return m.removeStaleBuckets(T)&&(_=!0),_}pruneUnusedLayers(r){const u={};r.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}const ti=(y,r)=>l.x(y,r&&r.filter(u=>u.identifier!=="source.canvas")),Si=l.F(l.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Ao=l.F(l.ax,["setCenter","setZoom","setBearing","setPitch"]),Fi=l.aw();class $r extends l.E{constructor(r,u={}){super(),this.map=r,this.dispatcher=new Te(L(),this,r._getMapId()),this.imageManager=new _e,this.imageManager.setEventedParent(this),this.glyphManager=new ue(r._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Se(256,512),this.crossTileSymbolIndex=new rl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.az());const f=this;this._rtlTextPluginCallback=$r.registerForPluginStateChange(m=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(_,T)=>{if(l.aA(_),T&&T.every(I=>I))for(const I in f.sourceCaches){const M=f.sourceCaches[I].getSource().type;M!=="vector"&&M!=="geojson"||f.sourceCaches[I].reload()}})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const _=this.sourceCaches[m.sourceId];if(!_)return;const T=_.getSource();if(T&&T.vectorLayerIds)for(const I in this._layers){const M=this._layers[I];M.source===T.id&&this._validateLayer(M)}})}loadURL(r,u={},f){this.fire(new l.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const m=this.map._requestManager.transformRequest(r,K.Style);this._request=l.f(m,(_,T)=>{this._request=null,_?this.fire(new l.j(_)):T&&this._load(T,u,f)})}loadJSON(r,u={},f){this.fire(new l.k("dataloading",{dataType:"style"})),this._request=l.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(r,u,f)})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(Fi,{validate:!1})}_load(r,u,f){var m;const _=u.transformStyle?u.transformStyle(f,r):r;if(!u.validate||!ti(this,l.y(_))){this._loaded=!0,this.stylesheet=_;for(const T in _.sources)this.addSource(T,_.sources[T],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new de(this.stylesheet.light),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const r=l.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of r){const f=l.aC(u);f.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=f}}_loadSprite(r,u=!1,f=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(m,_,T,I){const M=F(m),$=M.length,q=T>1?"@2x":"",J={},fe={},Me={};for(const{id:ke,url:Oe}of M){const Ae=_.transformRequest(_.normalizeSpriteURL(Oe,q,".json"),K.SpriteJSON),Ke=`${ke}_${Ae.url}`;J[Ke]=l.f(Ae,(Ye,ot)=>{delete J[Ke],fe[ke]=ot,D(I,fe,Me,Ye,$)});const tt=_.transformRequest(_.normalizeSpriteURL(Oe,q,".png"),K.SpriteImage),De=`${ke}_${tt.url}`;J[De]=ce.getImage(tt,(Ye,ot)=>{delete J[De],Me[ke]=ot,D(I,fe,Me,Ye,$)})}return{cancel(){for(const ke of Object.values(J))ke.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(m,_)=>{if(this._spriteRequest=null,m)this.fire(new l.j(m));else if(_)for(const T in _){this._spritesImagesIds[T]=[];const I=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(M=>!(M in _)):[];for(const M of I)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in _[T]){const $=T==="default"?M:`${T}:${M}`;this._spritesImagesIds[T].push($),$ in this.imageManager.images?this.imageManager.updateImage($,_[T][M],!1):this.imageManager.addImage($,_[T][M]),u&&(this._changedImages[$]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),f&&f(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const f=r.sourceLayer;if(!f)return;const m=u.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(f)===-1)&&this.fire(new l.j(new Error(`Source layer "${f}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const u=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u);const f=[];for(const m of r)u[m]&&f.push(u[m]);return f}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const f of u){const m=this._layers[f];m.type!=="custom"&&(r[f]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(m.length||_.length)&&this._updateWorkerLayers(m,_);for(const T in this._updatedSources){const I=this._updatedSources[T];if(I==="reload")this._reloadSource(T);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const f={};for(const m in this.sourceCaches){const _=this.sourceCaches[m];f[m]=_.used,_.used=!1}for(const m of this._order){const _=this._layers[m];_.recalculate(r,this._availableImages),!_.isHidden(r.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const m in f){const _=this.sourceCaches[m];f[m]!==_.used&&_.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.z=r.zoom,u&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){this._checkLoaded();const f=this.serialize();if(r=u.transformStyle?u.transformStyle(f,r):r,ti(this,l.y(r)))return!1;(r=l.aD(r)).layers=l.aB(r.layers);const m=l.aE(f,r).filter(T=>!(T.command in Ao));if(m.length===0)return!1;const _=m.filter(T=>!(T.command in Si));if(_.length>0)throw new Error(`Unimplemented: ${_.map(T=>T.command).join(", ")}.`);for(const T of m)T.command!=="setTransition"&&this[T.command].apply(this,T.args);return this.stylesheet=r,this._serializedLayers=null,!0}addImage(r,u){if(this.getImage(r))return this.fire(new l.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.y.source,`sources.${r}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const m=this.sourceCaches[r]=new B(r,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new l.j(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,f={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new l.j(new Error(`Layer "${m}" already exists on this map.`)));let _;if(r.type==="custom"){if(ti(this,l.aF(r)))return;_=l.aC(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=l.aD(r),r=l.e(r,{source:m})),this._validate(l.y.layer,`layers.${m}`,r,{arrayIndex:-1},f))return;_=l.aC(r),this._validateLayer(_),_.setEventedParent(this,{layer:{id:m}})}const T=u?this._order.indexOf(u):this._order.length;if(u&&T===-1)this.fire(new l.j(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(T,0,m),this._layerOrderChanged=!0,this._layers[m]=_,this._removedLayers[m]&&_.source&&_.type!=="custom"){const I=this._removedLayers[m];delete this._removedLayers[m],I.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const f=this._order.indexOf(r);this._order.splice(f,1);const m=u?this._order.indexOf(u):this._order.length;u&&m===-1?this.fire(new l.j(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,f){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===u&&m.maxzoom===f||(u!=null&&(m.minzoom=u),f!=null&&(m.maxzoom=f),this._updateLayer(m)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,f={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!l.aG(m.filter,u))return u==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(l.y.filter,`layers.${m.id}.filter`,u,null,f)||(m.filter=l.aD(u),this._updateLayer(m)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.aD(this.getLayer(r).filter)}setLayoutProperty(r,u,f,m={}){this._checkLoaded();const _=this.getLayer(r);_?l.aG(_.getLayoutProperty(u),f)||(_.setLayoutProperty(u,f,m),this._updateLayer(_)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const f=this.getLayer(r);if(f)return f.getLayoutProperty(u);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,f,m={}){this._checkLoaded();const _=this.getLayer(r);_?l.aG(_.getPaintProperty(u),f)||(_.setPaintProperty(u,f,m)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new l.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const f=r.source,m=r.sourceLayer,_=this.sourceCaches[f];if(_===void 0)return void this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)));const T=_.getSource().type;T==="geojson"&&m?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||m?(r.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(m,r.id,u)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const f=r.source,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)));const _=m.getSource().type,T=_==="vector"?r.sourceLayer:void 0;_!=="vector"||T?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(T,r.id,u):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,f=r.sourceLayer,m=this.sourceCaches[u];if(m!==void 0)return m.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(f,r.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=l.aH(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),f=this.map.getTerrain()||void 0,m=this.stylesheet;return l.aI({version:m.version,name:m.name,metadata:m.metadata,light:m.light,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:r,layers:u,terrain:f},_=>_!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=T=>this._layers[T].type==="fill-extrusion",f={},m=[];for(let T=this._order.length-1;T>=0;T--){const I=this._order[T];if(u(I)){f[I]=T;for(const M of r){const $=M[I];if($)for(const q of $)m.push(q)}}}m.sort((T,I)=>I.intersectionZ-T.intersectionZ);const _=[];for(let T=this._order.length-1;T>=0;T--){const I=this._order[T];if(u(I))for(let M=m.length-1;M>=0;M--){const $=m[M].feature;if(f[$.layer.id]<T)break;_.push($),m.pop()}else for(const M of r){const $=M[I];if($)for(const q of $)_.push(q.feature)}}return _}queryRenderedFeatures(r,u,f){u&&u.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const m={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const I of u.layers){const M=this._layers[I];if(!M)return this.fire(new l.j(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];m[M.source]=!0}}const _=[];u.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const I in this.sourceCaches)u.layers&&!m[I]||_.push(xn(this.sourceCaches[I],this._layers,T,r,u,f));return this.placement&&_.push(function(I,M,$,q,J,fe,Me){const ke={},Oe=fe.queryRenderedSymbols(q),Ae=[];for(const Ke of Object.keys(Oe).map(Number))Ae.push(Me[Ke]);Ae.sort(yn);for(const Ke of Ae){const tt=Ke.featureIndex.lookupSymbolFeatures(Oe[Ke.bucketInstanceId],M,Ke.bucketIndex,Ke.sourceLayerIndex,J.filter,J.layers,J.availableImages,I);for(const De in tt){const Ye=ke[De]=ke[De]||[],ot=tt[De];ot.sort((st,dt)=>{const wt=Ke.featureSortOrder;if(wt){const xt=wt.indexOf(st.featureIndex);return wt.indexOf(dt.featureIndex)-xt}return dt.featureIndex-st.featureIndex});for(const st of ot)Ye.push(st)}}for(const Ke in ke)ke[Ke].forEach(tt=>{const De=tt.feature,Ye=$[I[Ke].source].getFeatureState(De.layer["source-layer"],De.id);De.source=De.layer.source,De.layer["source-layer"]&&(De.sourceLayer=De.layer["source-layer"]),De.state=Ye});return ke}(this._layers,T,this.sourceCaches,r,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(r,u){u&&u.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[r];return f?function(m,_){const T=m.getRenderableIds().map($=>m.getTileByID($)),I=[],M={};for(let $=0;$<T.length;$++){const q=T[$],J=q.tileID.canonical.key;M[J]||(M[J]=!0,q.querySourceFeatures(I,_))}return I}(f,u):[]}addSourceType(r,u,f){return Ut(r)?f(new Error(`A source type called "${r}" already exists.`)):(((m,_)=>{Gt[m]=_})(r,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const f=this.light.getLight();let m=!1;for(const T in r)if(!l.aG(r[T],f[T])){m=!0;break}if(!m)return;const _={now:l.h.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(_)}_validate(r,u,f,m,_={}){return(!_||_.validate!==!1)&&ti(this,r.call(l.y,l.e({key:u,style:this.serialize(),value:f,styleSpec:l.v},m)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const f=this.sourceCaches[u];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,f,m,_=!1){let T=!1,I=!1;const M={};for(const $ of this._order){const q=this._layers[$];if(q.type!=="symbol")continue;if(!M[q.source]){const fe=this.sourceCaches[q.source];M[q.source]=fe.getRenderableIds(!0).map(Me=>fe.getTileByID(Me)).sort((Me,ke)=>ke.tileID.overscaledZ-Me.tileID.overscaledZ||(Me.tileID.isLessThan(ke.tileID)?-1:1))}const J=this.crossTileSymbolIndex.addLayer(q,M[q.source],r.center.lng);T=T||J}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.h.now(),r.zoom))&&(this.pauseablePlacement=new ms(r,this.map.terrain,this._order,_,u,f,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.h.now()),I=!0),T&&this.pauseablePlacement.placement.setStale()),I||T)for(const $ of this._order){const q=this._layers[$];q.type==="symbol"&&this.placement.updateLayerOpacities(q,M[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.h.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(r,u,f){this.glyphManager.getGlyphs(u.stacks,f);const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,[""])}getResource(r,u,f){return l.m(u,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(l.y.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,u,f={},m){this._checkLoaded();const _=[{id:r,url:u}],T=[...F(this.stylesheet.sprite),..._];this._validate(l.y.sprite,"sprite",T,null,f)||(this.stylesheet.sprite=T,this._loadSprite(_,!0,m))}removeSprite(r){this._checkLoaded();const u=F(this.stylesheet.sprite);if(u.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;u.splice(u.findIndex(f=>f.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return F(this.stylesheet.sprite)}setSprite(r,u={},f){this._checkLoaded(),r&&this._validate(l.y.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}$r.registerForPluginStateChange=l.aK;var il=l.Q([{name:"a_pos",type:"Int16",components:2}]),Zs="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const ir={prelude:bn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:bn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:bn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:bn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:bn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:bn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:bn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:bn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:bn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:bn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:bn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:bn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:bn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:bn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:bn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:bn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:bn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:bn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:bn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:bn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:bn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:bn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:bn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:bn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:bn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:bn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:bn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Zs),terrainDepth:bn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Zs),terrainCoords:bn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Zs)};function bn(y,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),m=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=_?_.concat(m):m,I={};return{fragmentSource:y=y.replace(u,(M,$,q,J,fe)=>(I[fe]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
varying ${q} ${J} ${fe};
#else
uniform ${q} ${J} u_${fe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${fe}
    ${q} ${J} ${fe} = u_${fe};
#endif
`)),vertexSource:r=r.replace(u,(M,$,q,J,fe)=>{const Me=J==="float"?"vec2":"vec4",ke=fe.match(/color/)?"color":Me;return I[fe]?$==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
uniform lowp float u_${fe}_t;
attribute ${q} ${Me} a_${fe};
varying ${q} ${J} ${fe};
#else
uniform ${q} ${J} u_${fe};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${fe}
    ${fe} = a_${fe};
#else
    ${q} ${J} ${fe} = u_${fe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${fe}
    ${fe} = unpack_mix_${ke}(a_${fe}, u_${fe}_t);
#else
    ${q} ${J} ${fe} = u_${fe};
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
uniform lowp float u_${fe}_t;
attribute ${q} ${Me} a_${fe};
#else
uniform ${q} ${J} u_${fe};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${fe}
    ${q} ${J} ${fe} = a_${fe};
#else
    ${q} ${J} ${fe} = u_${fe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${fe}
    ${q} ${J} ${fe} = unpack_mix_${ke}(a_${fe}, u_${fe}_t);
#else
    ${q} ${J} ${fe} = u_${fe};
#endif
`}),staticAttributes:f,staticUniforms:T}}class ys{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,f,m,_,T,I,M,$){this.context=r;let q=this.boundPaintVertexBuffers.length!==m.length;for(let J=0;!q&&J<m.length;J++)this.boundPaintVertexBuffers[J]!==m[J]&&(q=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==f||q||this.boundIndexBuffer!==_||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==$?this.freshBind(u,f,m,_,T,I,M,$):(r.bindVertexArray.set(this.vao),I&&I.bind(),_&&_.dynamicDraw&&_.bind(),M&&M.bind(),$&&$.bind())}freshBind(r,u,f,m,_,T,I,M){const $=r.numAttributes,q=this.context,J=q.gl;this.vao&&this.destroy(),this.vao=q.createVertexArray(),q.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=m,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=M,u.enableAttributes(J,r);for(const fe of f)fe.enableAttributes(J,r);T&&T.enableAttributes(J,r),I&&I.enableAttributes(J,r),M&&M.enableAttributes(J,r),u.bind(),u.setVertexAttribPointers(J,r,_);for(const fe of f)fe.bind(),fe.setVertexAttribPointers(J,r,_);T&&(T.bind(),T.setVertexAttribPointers(J,r,_)),m&&m.bind(),I&&(I.bind(),I.setVertexAttribPointers(J,r,_)),M&&(M.bind(),M.setVertexAttribPointers(J,r,_)),q.currentNumAttributes=$}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function hr(y){const r=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const f=y[u].split(" ");r.push(f.pop())}return r}class ol{constructor(r,u,f,m,_,T){const I=r.gl;this.program=I.createProgram();const M=hr(u.staticAttributes),$=f?f.getBinderAttributes():[],q=M.concat($),J=ir.prelude.staticUniforms?hr(ir.prelude.staticUniforms):[],fe=u.staticUniforms?hr(u.staticUniforms):[],Me=f?f.getBinderUniforms():[],ke=J.concat(fe).concat(Me),Oe=[];for(const st of ke)Oe.indexOf(st)<0&&Oe.push(st);const Ae=f?f.defines():[];_&&Ae.push("#define OVERDRAW_INSPECTOR;"),T&&Ae.push("#define TERRAIN3D;");const Ke=Ae.concat(ir.prelude.fragmentSource,u.fragmentSource).join(`
`),tt=Ae.concat(ir.prelude.vertexSource,u.vertexSource).join(`
`),De=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(De,Ke),I.compileShader(De),!I.getShaderParameter(De,I.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${I.getShaderInfoLog(De)}`);I.attachShader(this.program,De);const Ye=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(Ye,tt),I.compileShader(Ye),!I.getShaderParameter(Ye,I.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${I.getShaderInfoLog(Ye)}`);I.attachShader(this.program,Ye),this.attributes={};const ot={};this.numAttributes=q.length;for(let st=0;st<this.numAttributes;st++)q[st]&&(I.bindAttribLocation(this.program,st,q[st]),this.attributes[q[st]]=st);if(I.linkProgram(this.program),!I.getProgramParameter(this.program,I.LINK_STATUS))throw new Error(`Program failed to link: ${I.getProgramInfoLog(this.program)}`);I.deleteShader(Ye),I.deleteShader(De);for(let st=0;st<Oe.length;st++){const dt=Oe[st];if(dt&&!ot[dt]){const wt=I.getUniformLocation(this.program,dt);wt&&(ot[dt]=wt)}}this.fixedUniforms=m(r,ot),this.terrainUniforms=((st,dt)=>({u_depth:new l.aL(st,dt.u_depth),u_terrain:new l.aL(st,dt.u_terrain),u_terrain_dim:new l.aM(st,dt.u_terrain_dim),u_terrain_matrix:new l.aN(st,dt.u_terrain_matrix),u_terrain_unpack:new l.aO(st,dt.u_terrain_unpack),u_terrain_exaggeration:new l.aM(st,dt.u_terrain_exaggeration)}))(r,ot),this.binderUniforms=f?f.getUniforms(r,ot):[]}draw(r,u,f,m,_,T,I,M,$,q,J,fe,Me,ke,Oe,Ae,Ke,tt){const De=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(m),r.setColorMode(_),r.setCullFace(T),M){r.activeTexture.set(De.TEXTURE2),De.bindTexture(De.TEXTURE_2D,M.depthTexture),r.activeTexture.set(De.TEXTURE3),De.bindTexture(De.TEXTURE_2D,M.texture);for(const ot in this.terrainUniforms)this.terrainUniforms[ot].set(M[ot])}for(const ot in this.fixedUniforms)this.fixedUniforms[ot].set(I[ot]);Oe&&Oe.setUniforms(r,this.binderUniforms,Me,{zoom:ke});let Ye=0;switch(u){case De.LINES:Ye=2;break;case De.TRIANGLES:Ye=3;break;case De.LINE_STRIP:Ye=1}for(const ot of fe.get()){const st=ot.vaos||(ot.vaos={});(st[$]||(st[$]=new ys)).bind(r,this,q,Oe?Oe.getPaintVertexBuffers():[],J,ot.vertexOffset,Ae,Ke,tt),De.drawElements(u,ot.primitiveLength*Ye,De.UNSIGNED_SHORT,ot.primitiveOffset*Ye*2)}}}function Ri(y,r,u){const f=1/Ve(u,1,r.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,r.transform.tileZoom)/m,T=_*(u.tileID.canonical.x+u.tileID.wrap*m),I=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[T>>16,I>>16],u_pixel_coord_lower:[65535&T,65535&I]}}const hu=(y,r,u,f)=>{const m=r.style.light,_=m.properties.get("position"),T=[_.x,_.y,_.z],I=function(){var $=new l.A(9);return l.A!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$}();m.properties.get("anchor")==="viewport"&&function($,q){var J=Math.sin(q),fe=Math.cos(q);$[0]=fe,$[1]=J,$[2]=0,$[3]=-J,$[4]=fe,$[5]=0,$[6]=0,$[7]=0,$[8]=1}(I,-r.transform.angle),function($,q,J){var fe=q[0],Me=q[1],ke=q[2];$[0]=fe*J[0]+Me*J[3]+ke*J[6],$[1]=fe*J[1]+Me*J[4]+ke*J[7],$[2]=fe*J[2]+Me*J[5]+ke*J[8]}(T,T,I);const M=m.properties.get("color");return{u_matrix:y,u_lightpos:T,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+u,u_opacity:f}},Ji=(y,r,u,f,m,_,T)=>l.e(hu(y,r,u,f),Ri(_,r,T),{u_height_factor:-Math.pow(2,m.overscaledZ)/T.tileSize/8}),hc=y=>({u_matrix:y}),fu=(y,r,u,f)=>l.e(hc(y),Ri(u,r,f)),di=(y,r)=>({u_matrix:y,u_world:r}),sl=(y,r,u,f,m)=>l.e(fu(y,r,u,f),{u_world:m}),Wo=(y,r,u,f)=>{const m=y.transform;let _,T;if(f.paint.get("circle-pitch-alignment")==="map"){const I=Ve(u,1,m.zoom);_=!0,T=[I,I]}else _=!1,T=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(r.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:T}},du=(y,r,u)=>{const f=Ve(u,1,r.zoom),m=Math.pow(2,r.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[r.pixelsToGLUnits[0]/(f*m),r.pixelsToGLUnits[1]/(f*m)],u_overscale_factor:_}},ga=(y,r,u=1)=>({u_matrix:y,u_color:r,u_overlay:0,u_overlay_scale:u}),fc=y=>({u_matrix:y}),dc=(y,r,u,f)=>({u_matrix:y,u_extrude_scale:Ve(r,1,u),u_intensity:f});function ya(y,r){const u=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new l.U(0,f/u).toLngLat().lat,new l.U(0,(f+1)/u).toLngLat().lat]}const al=(y,r,u,f)=>{const m=y.transform;return{u_matrix:ll(y,r,u,f),u_ratio:1/Ve(r,1,m.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},va=(y,r,u,f,m)=>l.e(al(y,r,u,m),{u_image:0,u_image_height:f}),Fh=(y,r,u,f,m)=>{const _=y.transform,T=pc(r,_);return{u_matrix:ll(y,r,u,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Ve(r,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[T,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},vs=(y,r,u,f,m,_)=>{const T=y.lineAtlas,I=pc(r,y.transform),M=u.layout.get("line-cap")==="round",$=T.getDash(f.from,M),q=T.getDash(f.to,M),J=$.width*m.fromScale,fe=q.width*m.toScale;return l.e(al(y,r,u,_),{u_patternscale_a:[I/J,-$.height/2],u_patternscale_b:[I/fe,-q.height/2],u_sdfgamma:T.width/(256*Math.min(J,fe)*y.pixelRatio)/2,u_image:0,u_tex_y_a:$.y,u_tex_y_b:q.y,u_mix:m.t})};function pc(y,r){return 1/Ve(y,1,r.tileZoom)}function ll(y,r,u,f){return y.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const mc=(y,r,u,f,m)=>{return{u_matrix:y,u_tl_parent:r,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(T=m.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(_=m.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:gc(m.paint.get("raster-hue-rotate"))};var _,T};function gc(y){y*=Math.PI/180;const r=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const ul=(y,r,u,f,m,_,T,I,M,$)=>{const q=m.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:q.cameraToCenterDistance,u_pitch:q.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:q.width/q.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:T,u_coord_matrix:I,u_is_text:+M,u_pitch_with_map:+f,u_texsize:$,u_texture:0}},pu=(y,r,u,f,m,_,T,I,M,$,q)=>{const J=m.transform;return l.e(ul(y,r,u,f,m,_,T,I,M,$),{u_gamma_scale:f?Math.cos(J._pitch)*J.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+q})},_s=(y,r,u,f,m,_,T,I,M,$)=>l.e(pu(y,r,u,f,m,_,T,I,!0,M,!0),{u_texsize_icon:$,u_texture_icon:1}),cl=(y,r,u)=>({u_matrix:y,u_opacity:r,u_color:u}),pi=(y,r,u,f,m,_)=>l.e(function(T,I,M,$){const q=M.imageManager.getPattern(T.from.toString()),J=M.imageManager.getPattern(T.to.toString()),{width:fe,height:Me}=M.imageManager.getPixelSize(),ke=Math.pow(2,$.tileID.overscaledZ),Oe=$.tileSize*Math.pow(2,M.transform.tileZoom)/ke,Ae=Oe*($.tileID.canonical.x+$.tileID.wrap*ke),Ke=Oe*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:q.tl,u_pattern_br_a:q.br,u_pattern_tl_b:J.tl,u_pattern_br_b:J.br,u_texsize:[fe,Me],u_mix:I.t,u_pattern_size_a:q.displaySize,u_pattern_size_b:J.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/Ve($,1,M.transform.tileZoom),u_pixel_coord_upper:[Ae>>16,Ke>>16],u_pixel_coord_lower:[65535&Ae,65535&Ke]}}(f,_,u,m),{u_matrix:y,u_opacity:r}),hl={fillExtrusion:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_lightpos:new l.aP(y,r.u_lightpos),u_lightintensity:new l.aM(y,r.u_lightintensity),u_lightcolor:new l.aP(y,r.u_lightcolor),u_vertical_gradient:new l.aM(y,r.u_vertical_gradient),u_opacity:new l.aM(y,r.u_opacity)}),fillExtrusionPattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_lightpos:new l.aP(y,r.u_lightpos),u_lightintensity:new l.aM(y,r.u_lightintensity),u_lightcolor:new l.aP(y,r.u_lightcolor),u_vertical_gradient:new l.aM(y,r.u_vertical_gradient),u_height_factor:new l.aM(y,r.u_height_factor),u_image:new l.aL(y,r.u_image),u_texsize:new l.aQ(y,r.u_texsize),u_pixel_coord_upper:new l.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,r.u_pixel_coord_lower),u_scale:new l.aP(y,r.u_scale),u_fade:new l.aM(y,r.u_fade),u_opacity:new l.aM(y,r.u_opacity)}),fill:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix)}),fillPattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_image:new l.aL(y,r.u_image),u_texsize:new l.aQ(y,r.u_texsize),u_pixel_coord_upper:new l.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,r.u_pixel_coord_lower),u_scale:new l.aP(y,r.u_scale),u_fade:new l.aM(y,r.u_fade)}),fillOutline:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_world:new l.aQ(y,r.u_world)}),fillOutlinePattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_world:new l.aQ(y,r.u_world),u_image:new l.aL(y,r.u_image),u_texsize:new l.aQ(y,r.u_texsize),u_pixel_coord_upper:new l.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,r.u_pixel_coord_lower),u_scale:new l.aP(y,r.u_scale),u_fade:new l.aM(y,r.u_fade)}),circle:(y,r)=>({u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_scale_with_map:new l.aL(y,r.u_scale_with_map),u_pitch_with_map:new l.aL(y,r.u_pitch_with_map),u_extrude_scale:new l.aQ(y,r.u_extrude_scale),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_matrix:new l.aN(y,r.u_matrix)}),collisionBox:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aM(y,r.u_pixels_to_tile_units),u_extrude_scale:new l.aQ(y,r.u_extrude_scale),u_overscale_factor:new l.aM(y,r.u_overscale_factor)}),collisionCircle:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_inv_matrix:new l.aN(y,r.u_inv_matrix),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_viewport_size:new l.aQ(y,r.u_viewport_size)}),debug:(y,r)=>({u_color:new l.aR(y,r.u_color),u_matrix:new l.aN(y,r.u_matrix),u_overlay:new l.aL(y,r.u_overlay),u_overlay_scale:new l.aM(y,r.u_overlay_scale)}),clippingMask:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix)}),heatmap:(y,r)=>({u_extrude_scale:new l.aM(y,r.u_extrude_scale),u_intensity:new l.aM(y,r.u_intensity),u_matrix:new l.aN(y,r.u_matrix)}),heatmapTexture:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_world:new l.aQ(y,r.u_world),u_image:new l.aL(y,r.u_image),u_color_ramp:new l.aL(y,r.u_color_ramp),u_opacity:new l.aM(y,r.u_opacity)}),hillshade:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_image:new l.aL(y,r.u_image),u_latrange:new l.aQ(y,r.u_latrange),u_light:new l.aQ(y,r.u_light),u_shadow:new l.aR(y,r.u_shadow),u_highlight:new l.aR(y,r.u_highlight),u_accent:new l.aR(y,r.u_accent)}),hillshadePrepare:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_image:new l.aL(y,r.u_image),u_dimension:new l.aQ(y,r.u_dimension),u_zoom:new l.aM(y,r.u_zoom),u_unpack:new l.aO(y,r.u_unpack)}),line:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_ratio:new l.aM(y,r.u_ratio),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,r.u_units_to_pixels)}),lineGradient:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_ratio:new l.aM(y,r.u_ratio),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,r.u_units_to_pixels),u_image:new l.aL(y,r.u_image),u_image_height:new l.aM(y,r.u_image_height)}),linePattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_texsize:new l.aQ(y,r.u_texsize),u_ratio:new l.aM(y,r.u_ratio),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_image:new l.aL(y,r.u_image),u_units_to_pixels:new l.aQ(y,r.u_units_to_pixels),u_scale:new l.aP(y,r.u_scale),u_fade:new l.aM(y,r.u_fade)}),lineSDF:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_ratio:new l.aM(y,r.u_ratio),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,r.u_units_to_pixels),u_patternscale_a:new l.aQ(y,r.u_patternscale_a),u_patternscale_b:new l.aQ(y,r.u_patternscale_b),u_sdfgamma:new l.aM(y,r.u_sdfgamma),u_image:new l.aL(y,r.u_image),u_tex_y_a:new l.aM(y,r.u_tex_y_a),u_tex_y_b:new l.aM(y,r.u_tex_y_b),u_mix:new l.aM(y,r.u_mix)}),raster:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_tl_parent:new l.aQ(y,r.u_tl_parent),u_scale_parent:new l.aM(y,r.u_scale_parent),u_buffer_scale:new l.aM(y,r.u_buffer_scale),u_fade_t:new l.aM(y,r.u_fade_t),u_opacity:new l.aM(y,r.u_opacity),u_image0:new l.aL(y,r.u_image0),u_image1:new l.aL(y,r.u_image1),u_brightness_low:new l.aM(y,r.u_brightness_low),u_brightness_high:new l.aM(y,r.u_brightness_high),u_saturation_factor:new l.aM(y,r.u_saturation_factor),u_contrast_factor:new l.aM(y,r.u_contrast_factor),u_spin_weights:new l.aP(y,r.u_spin_weights)}),symbolIcon:(y,r)=>({u_is_size_zoom_constant:new l.aL(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,r.u_is_size_feature_constant),u_size_t:new l.aM(y,r.u_size_t),u_size:new l.aM(y,r.u_size),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_pitch:new l.aM(y,r.u_pitch),u_rotate_symbol:new l.aL(y,r.u_rotate_symbol),u_aspect_ratio:new l.aM(y,r.u_aspect_ratio),u_fade_change:new l.aM(y,r.u_fade_change),u_matrix:new l.aN(y,r.u_matrix),u_label_plane_matrix:new l.aN(y,r.u_label_plane_matrix),u_coord_matrix:new l.aN(y,r.u_coord_matrix),u_is_text:new l.aL(y,r.u_is_text),u_pitch_with_map:new l.aL(y,r.u_pitch_with_map),u_texsize:new l.aQ(y,r.u_texsize),u_texture:new l.aL(y,r.u_texture)}),symbolSDF:(y,r)=>({u_is_size_zoom_constant:new l.aL(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,r.u_is_size_feature_constant),u_size_t:new l.aM(y,r.u_size_t),u_size:new l.aM(y,r.u_size),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_pitch:new l.aM(y,r.u_pitch),u_rotate_symbol:new l.aL(y,r.u_rotate_symbol),u_aspect_ratio:new l.aM(y,r.u_aspect_ratio),u_fade_change:new l.aM(y,r.u_fade_change),u_matrix:new l.aN(y,r.u_matrix),u_label_plane_matrix:new l.aN(y,r.u_label_plane_matrix),u_coord_matrix:new l.aN(y,r.u_coord_matrix),u_is_text:new l.aL(y,r.u_is_text),u_pitch_with_map:new l.aL(y,r.u_pitch_with_map),u_texsize:new l.aQ(y,r.u_texsize),u_texture:new l.aL(y,r.u_texture),u_gamma_scale:new l.aM(y,r.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_is_halo:new l.aL(y,r.u_is_halo)}),symbolTextAndIcon:(y,r)=>({u_is_size_zoom_constant:new l.aL(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,r.u_is_size_feature_constant),u_size_t:new l.aM(y,r.u_size_t),u_size:new l.aM(y,r.u_size),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_pitch:new l.aM(y,r.u_pitch),u_rotate_symbol:new l.aL(y,r.u_rotate_symbol),u_aspect_ratio:new l.aM(y,r.u_aspect_ratio),u_fade_change:new l.aM(y,r.u_fade_change),u_matrix:new l.aN(y,r.u_matrix),u_label_plane_matrix:new l.aN(y,r.u_label_plane_matrix),u_coord_matrix:new l.aN(y,r.u_coord_matrix),u_is_text:new l.aL(y,r.u_is_text),u_pitch_with_map:new l.aL(y,r.u_pitch_with_map),u_texsize:new l.aQ(y,r.u_texsize),u_texsize_icon:new l.aQ(y,r.u_texsize_icon),u_texture:new l.aL(y,r.u_texture),u_texture_icon:new l.aL(y,r.u_texture_icon),u_gamma_scale:new l.aM(y,r.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_is_halo:new l.aL(y,r.u_is_halo)}),background:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_opacity:new l.aM(y,r.u_opacity),u_color:new l.aR(y,r.u_color)}),backgroundPattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_opacity:new l.aM(y,r.u_opacity),u_image:new l.aL(y,r.u_image),u_pattern_tl_a:new l.aQ(y,r.u_pattern_tl_a),u_pattern_br_a:new l.aQ(y,r.u_pattern_br_a),u_pattern_tl_b:new l.aQ(y,r.u_pattern_tl_b),u_pattern_br_b:new l.aQ(y,r.u_pattern_br_b),u_texsize:new l.aQ(y,r.u_texsize),u_mix:new l.aM(y,r.u_mix),u_pattern_size_a:new l.aQ(y,r.u_pattern_size_a),u_pattern_size_b:new l.aQ(y,r.u_pattern_size_b),u_scale_a:new l.aM(y,r.u_scale_a),u_scale_b:new l.aM(y,r.u_scale_b),u_pixel_coord_upper:new l.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aM(y,r.u_tile_units_to_pixels)}),terrain:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_texture:new l.aL(y,r.u_texture),u_ele_delta:new l.aM(y,r.u_ele_delta)}),terrainDepth:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_ele_delta:new l.aM(y,r.u_ele_delta)}),terrainCoords:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_texture:new l.aL(y,r.u_texture),u_terrain_coords_id:new l.aM(y,r.u_terrain_coords_id),u_ele_delta:new l.aM(y,r.u_ele_delta)})};class fl{constructor(r,u,f){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const _a={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class dl{constructor(r,u,f,m){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=r;const _=r.gl;this.buffer=_.createBuffer(),r.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let f=0;f<this.attributes.length;f++){const m=u.attributes[this.attributes[f].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,u,f){for(let m=0;m<this.attributes.length;m++){const _=this.attributes[m],T=u.attributes[_.name];T!==void 0&&r.vertexAttribPointer(T,_.components,r[_a[_.type]],!1,this.itemSize,_.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const xs=new WeakMap;function Xo(y){var r;if(xs.has(y))return xs.get(y);{const u=(r=y.getParameter(y.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return xs.set(y,u),u}}class In{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class pl extends In{getDefault(){return l.aT.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ei extends In{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class mi extends In{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class mu extends In{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class ml extends In{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class gl extends In{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class gu extends In{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class yl extends In{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class vl extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class xa extends In{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class yu extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class _l extends In{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class yc extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class vc extends In{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Hs extends In{getDefault(){return l.aT.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Rh extends In{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class _c extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class vu extends In{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class jh extends In{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Dh extends In{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Bh extends In{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class _u extends In{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class wa extends In{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class xu extends In{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class wu extends In{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Ws extends In{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class xc extends In{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ba extends In{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;const f=this.gl;Xo(f)?f.bindVertexArray(r):(u=f.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class bu extends In{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class ji extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Su extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Vr extends In{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class Xs extends Vr{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class wc extends Vr{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Eu extends Vr{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Dn{constructor(r,u,f,m,_){this.context=r,this.width=u,this.height=f;const T=r.gl,I=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Xs(r,I),m)this.depthAttachment=_?new Eu(r,I):new wc(r,I);else if(_)throw new Error("Stencil cannot be setted without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class Jn{constructor(r,u,f){this.blendFunction=r,this.blendColor=u,this.mask=f}}Jn.Replace=[1,0],Jn.disabled=new Jn(Jn.Replace,l.aT.transparent,[!1,!1,!1,!1]),Jn.unblended=new Jn(Jn.Replace,l.aT.transparent,[!0,!0,!0,!0]),Jn.alphaBlended=new Jn([1,771],l.aT.transparent,[!0,!0,!0,!0]);class Nh{constructor(r){var u,f;if(this.gl=r,this.clearColor=new pl(this),this.clearDepth=new Ei(this),this.clearStencil=new mi(this),this.colorMask=new mu(this),this.depthMask=new ml(this),this.stencilMask=new gl(this),this.stencilFunc=new gu(this),this.stencilOp=new yl(this),this.stencilTest=new vl(this),this.depthRange=new xa(this),this.depthTest=new yu(this),this.depthFunc=new _l(this),this.blend=new yc(this),this.blendFunc=new vc(this),this.blendColor=new Hs(this),this.blendEquation=new Rh(this),this.cullFace=new _c(this),this.cullFaceSide=new vu(this),this.frontFace=new jh(this),this.program=new Dh(this),this.activeTexture=new Bh(this),this.viewport=new _u(this),this.bindFramebuffer=new wa(this),this.bindRenderbuffer=new xu(this),this.bindTexture=new wu(this),this.bindVertexBuffer=new Ws(this),this.bindElementBuffer=new xc(this),this.bindVertexArray=new ba(this),this.pixelStoreUnpack=new bu(this),this.pixelStoreUnpackPremultiplyAlpha=new ji(this),this.pixelStoreUnpackFlipY=new Su(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Xo(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new fl(this,r,u)}createVertexBuffer(r,u,f){return new dl(this,r,u,f)}createRenderbuffer(r,u,f){const m=this.gl,_=m.createRenderbuffer();return this.bindRenderbuffer.set(_),m.renderbufferStorage(m.RENDERBUFFER,r,u,f),this.bindRenderbuffer.set(null),_}createFramebuffer(r,u,f,m){return new Dn(this,r,u,f,m)}clear({color:r,depth:u,stencil:f}){const m=this.gl;let _=0;r&&(_|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f!==void 0&&(_|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),m.clear(_)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){l.aG(r.blendFunction,Jn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Xo(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return Xo(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Sn{constructor(r,u,f){this.func=r,this.mask=u,this.range=f}}Sn.ReadOnly=!1,Sn.ReadWrite=!0,Sn.disabled=new Sn(519,Sn.ReadOnly,[0,1]);const ws=7680;class or{constructor(r,u,f,m,_,T){this.test=r,this.ref=u,this.mask=f,this.fail=m,this.depthFail=_,this.pass=T}}or.disabled=new or({func:519,mask:0},0,0,ws,ws,ws);class Wn{constructor(r,u,f){this.enable=r,this.mode=u,this.frontFace=f}}let qs;function Tu(y,r,u,f,m,_,T){const I=y.context,M=I.gl,$=y.useProgram("collisionBox"),q=[];let J=0,fe=0;for(let De=0;De<f.length;De++){const Ye=f[De],ot=r.getTile(Ye),st=ot.getBucket(u);if(!st)continue;let dt=Ye.posMatrix;m[0]===0&&m[1]===0||(dt=y.translatePosMatrix(Ye.posMatrix,ot,m,_));const wt=T?st.textCollisionBox:st.iconCollisionBox,xt=st.collisionCircleArray;if(xt.length>0){const Et=l.Z(),$t=dt;l.aU(Et,st.placementInvProjMatrix,y.transform.glCoordMatrix),l.aU(Et,Et,st.placementViewportMatrix),q.push({circleArray:xt,circleOffset:fe,transform:$t,invTransform:Et,coord:Ye}),J+=xt.length/4,fe=J}wt&&$.draw(I,M.LINES,Sn.disabled,or.disabled,y.colorModeForRenderPass(),Wn.disabled,du(dt,y.transform,ot),y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ye),u.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,null,y.transform.zoom,null,null,wt.collisionVertexBuffer)}if(!T||!q.length)return;const Me=y.useProgram("collisionCircle"),ke=new l.aV;ke.resize(4*J),ke._trim();let Oe=0;for(const De of q)for(let Ye=0;Ye<De.circleArray.length/4;Ye++){const ot=4*Ye,st=De.circleArray[ot+0],dt=De.circleArray[ot+1],wt=De.circleArray[ot+2],xt=De.circleArray[ot+3];ke.emplace(Oe++,st,dt,wt,xt,0),ke.emplace(Oe++,st,dt,wt,xt,1),ke.emplace(Oe++,st,dt,wt,xt,2),ke.emplace(Oe++,st,dt,wt,xt,3)}(!qs||qs.length<2*J)&&(qs=function(De){const Ye=2*De,ot=new l.aX;ot.resize(Ye),ot._trim();for(let st=0;st<Ye;st++){const dt=6*st;ot.uint16[dt+0]=4*st+0,ot.uint16[dt+1]=4*st+1,ot.uint16[dt+2]=4*st+2,ot.uint16[dt+3]=4*st+2,ot.uint16[dt+4]=4*st+3,ot.uint16[dt+5]=4*st+0}return ot}(J));const Ae=I.createIndexBuffer(qs,!0),Ke=I.createVertexBuffer(ke,l.aW.members,!0);for(const De of q){const Ye={u_matrix:De.transform,u_inv_matrix:De.invTransform,u_camera_to_center_distance:(tt=y.transform).cameraToCenterDistance,u_viewport_size:[tt.width,tt.height]};Me.draw(I,M.TRIANGLES,Sn.disabled,or.disabled,y.colorModeForRenderPass(),Wn.disabled,Ye,y.style.map.terrain&&y.style.map.terrain.getTerrainData(De.coord),u.id,Ke,Ae,l.S.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,y.transform.zoom,null,null,null)}var tt;Ke.destroy(),Ae.destroy()}Wn.disabled=new Wn(!1,1029,2305),Wn.backCCW=new Wn(!0,1029,2305);const Cu=l.ao(new Float32Array(16));function xl(y,r,u,f,m,_){const{horizontalAlign:T,verticalAlign:I}=l.au(y);return new l.P((-(T-.5)*r/m+f[0])*_,(-(I-.5)*u/m+f[1])*_)}function bs(y,r,u,f,m,_,T,I,M,$,q){const J=y.text.placedSymbolArray,fe=y.text.dynamicLayoutVertexArray,Me=y.icon.dynamicLayoutVertexArray,ke={};fe.clear();for(let Oe=0;Oe<J.length;Oe++){const Ae=J.get(Oe),Ke=Ae.hidden||!Ae.crossTileID||y.allowVerticalPlacement&&!Ae.placedOrientation?null:f[Ae.crossTileID];if(Ke){const tt=new l.P(Ae.anchorX,Ae.anchorY),De=jt(tt,u?T:_,q),Ye=Tn(m.cameraToCenterDistance,De.signedDistanceFromCamera);let ot=l.aj(y.textSizeData,M,Ae)*Ye/l.ap;u&&(ot*=y.tilePixelRatio/I);const{width:st,height:dt,anchor:wt,textOffset:xt,textBoxScale:Et}=Ke,$t=xl(wt,st,dt,xt,Et,ot),Pn=u?jt(tt.add($t),_,q).point:De.point.add(r?$t.rotate(-m.angle):$t),kt=y.allowVerticalPlacement&&Ae.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let ln=0;ln<Ae.numGlyphs;ln++)l.ak(fe,Pn,kt);$&&Ae.associatedIconIndex>=0&&(ke[Ae.associatedIconIndex]={shiftedAnchor:Pn,angle:kt})}else xe(Ae.numGlyphs,fe)}if($){Me.clear();const Oe=y.icon.placedSymbolArray;for(let Ae=0;Ae<Oe.length;Ae++){const Ke=Oe.get(Ae);if(Ke.hidden)xe(Ke.numGlyphs,Me);else{const tt=ke[Ae];if(tt)for(let De=0;De<Ke.numGlyphs;De++)l.ak(Me,tt.shiftedAnchor,tt.angle);else xe(Ke.numGlyphs,Me)}}y.icon.dynamicLayoutVertexBuffer.updateData(Me)}y.text.dynamicLayoutVertexBuffer.updateData(fe)}function Po(y,r,u){return u.iconsInText&&r?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function wl(y,r,u,f,m,_,T,I,M,$,q,J){const fe=y.context,Me=fe.gl,ke=y.transform,Oe=I==="map",Ae=M==="map",Ke=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",tt=Oe&&!Ae&&!Ke,De=!u.layout.get("symbol-sort-key").isConstant();let Ye=!1;const ot=y.depthModeForSublayer(0,Sn.ReadOnly),st=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),dt=[];for(const wt of f){const xt=r.getTile(wt),Et=xt.getBucket(u);if(!Et)continue;const $t=m?Et.text:Et.icon;if(!$t||!$t.segments.get().length||!$t.hasVisibleVertices)continue;const Pn=$t.programConfigurations.get(u.id),kt=m||Et.sdfIcons,ln=m?Et.textSizeData:Et.iconSizeData,Ht=Ae||ke.pitch!==0,Xn=y.useProgram(Po(kt,m,Et),Pn),An=l.ah(ln,ke.zoom),_n=y.style.map.terrain&&y.style.map.terrain.getTerrainData(wt);let kn,Sr,nr,si,Zr=[0,0],Ar=null;if(m)Sr=xt.glyphAtlasTexture,nr=Me.LINEAR,kn=xt.glyphAtlasTexture.size,Et.iconsInText&&(Zr=xt.imageAtlasTexture.size,Ar=xt.imageAtlasTexture,si=Ht||y.options.rotating||y.options.zooming||ln.kind==="composite"||ln.kind==="camera"?Me.LINEAR:Me.NEAREST);else{const Er=u.layout.get("icon-size").constantOr(0)!==1||Et.iconsNeedLinear;Sr=xt.imageAtlasTexture,nr=kt||y.options.rotating||y.options.zooming||Er||Ht?Me.LINEAR:Me.NEAREST,kn=xt.imageAtlasTexture.size}const no=Ve(xt,1,y.transform.zoom),ur=je(wt.posMatrix,Ae,Oe,y.transform,no),es=at(wt.posMatrix,Ae,Oe,y.transform,no),ts=st&&Et.hasTextData(),ta=u.layout.get("icon-text-fit")!=="none"&&ts&&Et.hasIconData();if(Ke){const Er=y.style.map.terrain?(Ni,Tr)=>y.style.map.terrain.getElevation(wt,Ni,Tr):null,Hr=u.layout.get("text-rotation-alignment")==="map";_t(Et,wt.posMatrix,y,m,ur,es,Ae,$,Hr,Er)}const La=y.translatePosMatrix(wt.posMatrix,xt,_,T),Al=Ke||m&&st||ta?Cu:ur,gi=y.translatePosMatrix(es,xt,_,T,!0),ai=kt&&u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ci;Ci=kt?Et.iconsInText?_s(ln.kind,An,tt,Ae,y,La,Al,gi,kn,Zr):pu(ln.kind,An,tt,Ae,y,La,Al,gi,m,kn,!0):ul(ln.kind,An,tt,Ae,y,La,Al,gi,m,kn);const za={program:Xn,buffers:$t,uniformValues:Ci,atlasTexture:Sr,atlasTextureIcon:Ar,atlasInterpolation:nr,atlasInterpolationIcon:si,isSDF:kt,hasHalo:ai};if(De&&Et.canOverlap){Ye=!0;const Er=$t.segments.get();for(const Hr of Er)dt.push({segments:new l.S([Hr]),sortKey:Hr.sortKey,state:za,terrainData:_n})}else dt.push({segments:$t.segments,sortKey:0,state:za,terrainData:_n})}Ye&&dt.sort((wt,xt)=>wt.sortKey-xt.sortKey);for(const wt of dt){const xt=wt.state;if(fe.activeTexture.set(Me.TEXTURE0),xt.atlasTexture.bind(xt.atlasInterpolation,Me.CLAMP_TO_EDGE),xt.atlasTextureIcon&&(fe.activeTexture.set(Me.TEXTURE1),xt.atlasTextureIcon&&xt.atlasTextureIcon.bind(xt.atlasInterpolationIcon,Me.CLAMP_TO_EDGE)),xt.isSDF){const Et=xt.uniformValues;xt.hasHalo&&(Et.u_is_halo=1,bl(xt.buffers,wt.segments,u,y,xt.program,ot,q,J,Et,wt.terrainData)),Et.u_is_halo=0}bl(xt.buffers,wt.segments,u,y,xt.program,ot,q,J,xt.uniformValues,wt.terrainData)}}function bl(y,r,u,f,m,_,T,I,M,$){const q=f.context;m.draw(q,q.gl.TRIANGLES,_,T,I,Wn.disabled,M,$,u.id,y.layoutVertexBuffer,y.indexBuffer,r,u.paint,f.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function qo(y,r,u,f,m){if(!u||!f||!f.imageAtlas)return;const _=f.imageAtlas.patternPositions;let T=_[u.to.toString()],I=_[u.from.toString()];if(!T&&I&&(T=I),!I&&T&&(I=T),!T||!I){const M=m.getPaintProperty(r);T=_[M],I=_[M]}T&&I&&y.setConstantPatternPositions(T,I)}function Sa(y,r,u,f,m,_,T){const I=y.context.gl,M="fill-pattern",$=u.paint.get(M),q=$&&$.constantOr(1),J=u.getCrossfadeParameters();let fe,Me,ke,Oe,Ae;T?(Me=q&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",fe=I.LINES):(Me=q?"fillPattern":"fill",fe=I.TRIANGLES);const Ke=$.constantOr(null);for(const tt of f){const De=r.getTile(tt);if(q&&!De.patternsLoaded())continue;const Ye=De.getBucket(u);if(!Ye)continue;const ot=Ye.programConfigurations.get(u.id),st=y.useProgram(Me,ot),dt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(tt);q&&(y.context.activeTexture.set(I.TEXTURE0),De.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ot.updatePaintBuffers(J)),qo(ot,M,Ke,De,u);const wt=dt?tt:null,xt=y.translatePosMatrix(wt?wt.posMatrix:tt.posMatrix,De,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(T){Oe=Ye.indexBuffer2,Ae=Ye.segments2;const Et=[I.drawingBufferWidth,I.drawingBufferHeight];ke=Me==="fillOutlinePattern"&&q?sl(xt,y,J,De,Et):di(xt,Et)}else Oe=Ye.indexBuffer,Ae=Ye.segments,ke=q?fu(xt,y,J,De):hc(xt);st.draw(y.context,fe,m,y.stencilModeForClipping(tt),_,Wn.disabled,ke,dt,u.id,Ye.layoutVertexBuffer,Oe,Ae,u.paint,y.transform.zoom,ot)}}function vo(y,r,u,f,m,_,T){const I=y.context,M=I.gl,$="fill-extrusion-pattern",q=u.paint.get($),J=q.constantOr(1),fe=u.getCrossfadeParameters(),Me=u.paint.get("fill-extrusion-opacity"),ke=q.constantOr(null);for(const Oe of f){const Ae=r.getTile(Oe),Ke=Ae.getBucket(u);if(!Ke)continue;const tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Oe),De=Ke.programConfigurations.get(u.id),Ye=y.useProgram(J?"fillExtrusionPattern":"fillExtrusion",De);J&&(y.context.activeTexture.set(M.TEXTURE0),Ae.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),De.updatePaintBuffers(fe)),qo(De,$,ke,Ae,u);const ot=y.translatePosMatrix(Oe.posMatrix,Ae,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),st=u.paint.get("fill-extrusion-vertical-gradient"),dt=J?Ji(ot,y,st,Me,Oe,fe,Ae):hu(ot,y,st,Me);Ye.draw(I,I.gl.TRIANGLES,m,_,T,Wn.backCCW,dt,tt,u.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,u.paint,y.transform.zoom,De,y.style.map.terrain&&Ke.centroidVertexBuffer)}}function Ks(y,r,u,f,m,_,T){const I=y.context,M=I.gl,$=u.fbo;if(!$)return;const q=y.useProgram("hillshade"),J=y.style.map.terrain&&y.style.map.terrain.getTerrainData(r);I.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,$.colorAttachment.get()),q.draw(I,M.TRIANGLES,m,_,T,Wn.disabled,((fe,Me,ke,Oe)=>{const Ae=ke.paint.get("hillshade-shadow-color"),Ke=ke.paint.get("hillshade-highlight-color"),tt=ke.paint.get("hillshade-accent-color");let De=ke.paint.get("hillshade-illumination-direction")*(Math.PI/180);ke.paint.get("hillshade-illumination-anchor")==="viewport"&&(De-=fe.transform.angle);const Ye=!fe.options.moving;return{u_matrix:Oe?Oe.posMatrix:fe.transform.calculatePosMatrix(Me.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:ya(0,Me.tileID),u_light:[ke.paint.get("hillshade-exaggeration"),De],u_shadow:Ae,u_highlight:Ke,u_accent:tt}})(y,u,f,J?r:null),J,f.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Gr(y,r,u,f,m,_){const T=y.context,I=T.gl,M=r.dem;if(M&&M.data){const $=M.dim,q=M.stride,J=M.getPixels();if(T.activeTexture.set(I.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||y.getTileTexture(q),r.demTexture){const Me=r.demTexture;Me.update(J,{premultiply:!1}),Me.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else r.demTexture=new Q(T,J,I.RGBA,{premultiply:!1}),r.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);T.activeTexture.set(I.TEXTURE0);let fe=r.fbo;if(!fe){const Me=new Q(T,{width:$,height:$,data:null},I.RGBA);Me.bind(I.LINEAR,I.CLAMP_TO_EDGE),fe=r.fbo=T.createFramebuffer($,$,!0,!1),fe.colorAttachment.set(Me.texture)}T.bindFramebuffer.set(fe.framebuffer),T.viewport.set([0,0,$,$]),y.useProgram("hillshadePrepare").draw(T,I.TRIANGLES,f,m,_,Wn.disabled,((Me,ke)=>{const Oe=ke.stride,Ae=l.Z();return l.aS(Ae,0,l.N,-l.N,0,0,1),l.$(Ae,Ae,[0,-l.N,0]),{u_matrix:Ae,u_image:1,u_dimension:[Oe,Oe],u_zoom:Me.overscaledZ,u_unpack:ke.getUnpackVector()}})(r.tileID,M),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Ss(y,r,u,f,m,_){const T=f.paint.get("raster-fade-duration");if(!_&&T>0){const I=l.h.now(),M=(I-y.timeAdded)/T,$=r?(I-r.timeAdded)/T:-1,q=u.getSource(),J=m.coveringZoomLevel({tileSize:q.tileSize,roundZoom:q.roundZoom}),fe=!r||Math.abs(r.tileID.overscaledZ-J)>Math.abs(y.tileID.overscaledZ-J),Me=fe&&y.refreshedUponExpiration?1:l.ad(fe?M:1-$,0,1);return y.refreshedUponExpiration&&M>=1&&(y.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Me}:{opacity:Me,mix:0}}return{opacity:1,mix:0}}const Sl=new l.aT(1,0,0,1),Ys=new l.aT(0,1,0,1),Iu=new l.aT(0,0,1,1),Ea=new l.aT(1,0,1,1),Ta=new l.aT(0,1,1,1);function ii(y,r,u,f){Ca(y,0,r+u/2,y.transform.width,u,f)}function ko(y,r,u,f){Ca(y,r-u/2,0,u,y.transform.height,f)}function Ca(y,r,u,f,m,_){const T=y.context,I=T.gl;I.enable(I.SCISSOR_TEST),I.scissor(r*y.pixelRatio,u*y.pixelRatio,f*y.pixelRatio,m*y.pixelRatio),T.clear({color:_}),I.disable(I.SCISSOR_TEST)}function Ia(y,r,u){const f=y.context,m=f.gl,_=u.posMatrix,T=y.useProgram("debug"),I=Sn.disabled,M=or.disabled,$=y.colorModeForRenderPass(),q="$debug",J=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);f.activeTexture.set(m.TEXTURE0);const fe=r.getTileByID(u.key).latestRawTileData,Me=Math.floor((fe&&fe.byteLength||0)/1024),ke=r.getTile(u).tileSize,Oe=512/Math.min(ke,512)*(u.overscaledZ/y.transform.zoom)*.5;let Ae=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Ae+=` => ${u.overscaledZ}`),function(Ke,tt){Ke.initDebugOverlayCanvas();const De=Ke.debugOverlayCanvas,Ye=Ke.context.gl,ot=Ke.debugOverlayCanvas.getContext("2d");ot.clearRect(0,0,De.width,De.height),ot.shadowColor="white",ot.shadowBlur=2,ot.lineWidth=1.5,ot.strokeStyle="white",ot.textBaseline="top",ot.font="bold 36px Open Sans, sans-serif",ot.fillText(tt,5,5),ot.strokeText(tt,5,5),Ke.debugOverlayTexture.update(De),Ke.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(y,`${Ae} ${Me}kB`),T.draw(f,m.TRIANGLES,I,M,Jn.alphaBlended,Wn.disabled,ga(_,l.aT.transparent,Oe),null,q,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),T.draw(f,m.LINE_STRIP,I,M,$,Wn.disabled,ga(_,l.aT.red),J,q,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Qn(y,r,u){const f=y.context,m=f.gl,_=y.colorModeForRenderPass(),T=new Sn(m.LEQUAL,Sn.ReadWrite,y.depthRangeFor3D),I=y.useProgram("terrain"),M=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,y.width,y.height]);for(const $ of u){const q=y.renderToTexture.getTexture($),J=r.getTerrainData($.tileID);f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,q.texture);const fe={u_matrix:y.transform.calculatePosMatrix($.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(y.transform.zoom)};I.draw(f,m.TRIANGLES,T,or.disabled,_,Wn.backCCW,fe,J,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class Ko{constructor(r,u){this.context=new Nh(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.Z(),renderTime:0},this.setup(),this.numSublayers=B.maxUnderzooming+B.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new rl}resize(r,u,f){if(this.width=Math.floor(r*f),this.height=Math.floor(u*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,u=new l.a_;u.emplaceBack(0,0),u.emplaceBack(l.N,0),u.emplaceBack(0,l.N),u.emplaceBack(l.N,l.N),this.tileExtentBuffer=r.createVertexBuffer(u,il.members),this.tileExtentSegments=l.S.simpleSegment(0,0,4,2);const f=new l.a_;f.emplaceBack(0,0),f.emplaceBack(l.N,0),f.emplaceBack(0,l.N),f.emplaceBack(l.N,l.N),this.debugBuffer=r.createVertexBuffer(f,il.members),this.debugSegments=l.S.simpleSegment(0,0,4,5);const m=new l.V;m.emplaceBack(0,0,0,0),m.emplaceBack(l.N,0,l.N,0),m.emplaceBack(0,l.N,0,l.N),m.emplaceBack(l.N,l.N,l.N,l.N),this.rasterBoundsBuffer=r.createVertexBuffer(m,vt.members),this.rasterBoundsSegments=l.S.simpleSegment(0,0,4,2);const _=new l.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(_,il.members),this.viewportSegments=l.S.simpleSegment(0,0,4,2);const T=new l.a$;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(T);const I=new l.b0;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(I);const M=this.context.gl;this.stencilClearMode=new or({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=l.Z();l.aS(f,0,this.width,this.height,0,0,1),l.a0(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,u.TRIANGLES,Sn.disabled,this.stencilClearMode,Jn.disabled,Wn.disabled,fc(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source;const f=this.context,m=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(Jn.disabled),f.setDepthMode(Sn.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of u){const I=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);_.draw(f,m.TRIANGLES,Sn.disabled,new or({func:m.ALWAYS,mask:0},I,255,m.KEEP,m.KEEP,m.REPLACE),Jn.disabled,Wn.disabled,fc(T.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new or({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new or({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(r){const u=this.context.gl,f=r.sort((T,I)=>I.overscaledZ-T.overscaledZ),m=f[f.length-1].overscaledZ,_=f[0].overscaledZ-m+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const T={};for(let I=0;I<_;I++)T[I+m]=new or({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[T,f]}return[{[m]:or.disabled},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Jn([r.CONSTANT_COLOR,r.ONE],new l.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Jn.unblended:Jn.alphaBlended}depthModeForSublayer(r,u,f){if(!this.opaquePassEnabledForLayer())return Sn.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Sn(f||this.context.gl.LEQUAL,u,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.h.now()),this.imageManager.beginFrame();const f=this.style._order,m=this.style.sourceCaches,_={},T={},I={};for(const M in m){const $=m[M];$.used&&$.prepare(this.context),_[M]=$.getVisibleCoordinates(),T[M]=_[M].slice().reverse(),I[M]=$.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<f.length;M++)if(this.style._layers[f[M]].is3D()){this.opaquePassCutoff=M;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const M=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||M.length)&&(l.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function($,q){const J=$.context,fe=J.gl,Me=Jn.unblended,ke=new Sn(fe.LEQUAL,Sn.ReadWrite,[0,1]),Oe=q.getTerrainMesh(),Ae=q.sourceCache.getRenderableTiles(),Ke=$.useProgram("terrainDepth");J.bindFramebuffer.set(q.getFramebuffer("depth").framebuffer),J.viewport.set([0,0,$.width/devicePixelRatio,$.height/devicePixelRatio]),J.clear({color:l.aT.transparent,depth:1});for(const tt of Ae){const De=q.getTerrainData(tt.tileID),Ye={u_matrix:$.transform.calculatePosMatrix(tt.tileID.toUnwrapped()),u_ele_delta:q.getMeshFrameDelta($.transform.zoom)};Ke.draw(J,fe.TRIANGLES,ke,or.disabled,Me,Wn.backCCW,Ye,De,"terrain",Oe.vertexBuffer,Oe.indexBuffer,Oe.segments)}J.bindFramebuffer.set(null),J.viewport.set([0,0,$.width,$.height])}(this,this.style.map.terrain),function($,q){const J=$.context,fe=J.gl,Me=Jn.unblended,ke=new Sn(fe.LEQUAL,Sn.ReadWrite,[0,1]),Oe=q.getTerrainMesh(),Ae=q.getCoordsTexture(),Ke=q.sourceCache.getRenderableTiles(),tt=$.useProgram("terrainCoords");J.bindFramebuffer.set(q.getFramebuffer("coords").framebuffer),J.viewport.set([0,0,$.width/devicePixelRatio,$.height/devicePixelRatio]),J.clear({color:l.aT.transparent,depth:1}),q.coordsIndex=[];for(const De of Ke){const Ye=q.getTerrainData(De.tileID);J.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,Ae.texture);const ot={u_matrix:$.transform.calculatePosMatrix(De.tileID.toUnwrapped()),u_terrain_coords_id:(255-q.coordsIndex.length)/255,u_texture:0,u_ele_delta:q.getMeshFrameDelta($.transform.zoom)};tt.draw(J,fe.TRIANGLES,ke,or.disabled,Me,Wn.backCCW,ot,Ye,"terrain",Oe.vertexBuffer,Oe.indexBuffer,Oe.segments),q.coordsIndex.push(De.tileID.key)}J.bindFramebuffer.set(null),J.viewport.set([0,0,$.width,$.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const M of f){const $=this.style._layers[M];if(!$.hasOffscreenPass()||$.isHidden(this.transform.zoom))continue;const q=T[$.source];($.type==="custom"||q.length)&&this.renderLayer(this,m[$.source],$,q)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.aT.black:l.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[f[this.currentLayer]],$=m[M.source],q=_[M.source];this._renderTileClippingMasks(M,q),this.renderLayer(this,$,M,q)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const M=this.style._layers[f[this.currentLayer]],$=m[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const q=(M.type==="symbol"?I:T)[M.source];this._renderTileClippingMasks(M,_[M.source]),this.renderLayer(this,$,M,q)}if(this.options.showTileBoundaries){const M=function($,q){let J=null;const fe=Object.values($._layers).flatMap(Ae=>Ae.source&&!Ae.isHidden(q)?[$.sourceCaches[Ae.source]]:[]),Me=fe.filter(Ae=>Ae.getSource().type==="vector"),ke=fe.filter(Ae=>Ae.getSource().type!=="vector"),Oe=Ae=>{(!J||J.getSource().maxzoom<Ae.getSource().maxzoom)&&(J=Ae)};return Me.forEach(Ae=>Oe(Ae)),J||ke.forEach(Ae=>Oe(Ae)),J}(this.style,this.transform.zoom);M&&function($,q,J){for(let fe=0;fe<J.length;fe++)Ia($,q,J[fe])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const $=M.transform.padding;ii(M,M.transform.height-($.top||0),3,Sl),ii(M,$.bottom||0,3,Ys),ko(M,$.left||0,3,Iu),ko(M,M.transform.width-($.right||0),3,Ea);const q=M.transform.centerPoint;(function(J,fe,Me,ke){Ca(J,fe-1,Me-10,2,20,ke),Ca(J,fe-10,Me-1,20,2,ke)})(M,q.x,M.transform.height-q.y,Ta)}(this),this.context.setDefault()}renderLayer(r,u,f,m){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(m||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(_,T,I,M,$){if(_.renderPass!=="translucent")return;const q=or.disabled,J=_.colorModeForRenderPass();(I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(fe,Me,ke,Oe,Ae,Ke,tt){const De=Me.transform,Ye=Ae==="map",ot=Ke==="map";for(const st of fe){const dt=Oe.getTile(st),wt=dt.getBucket(ke);if(!wt||!wt.text||!wt.text.segments.get().length)continue;const xt=l.ah(wt.textSizeData,De.zoom),Et=Ve(dt,1,Me.transform.zoom),$t=je(st.posMatrix,ot,Ye,Me.transform,Et),Pn=ke.layout.get("icon-text-fit")!=="none"&&wt.hasIconData();if(xt){const kt=Math.pow(2,De.zoom-dt.tileID.overscaledZ);bs(wt,Ye,ot,tt,De,$t,st.posMatrix,kt,xt,Pn,Me.style.map.terrain?(ln,Ht)=>Me.style.map.terrain.getElevation(st,ln,Ht):null)}}}(M,_,I,T,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),$),I.paint.get("icon-opacity").constantOr(1)!==0&&wl(_,T,I,M,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),q,J),I.paint.get("text-opacity").constantOr(1)!==0&&wl(_,T,I,M,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),q,J),T.map.showCollisionBoxes&&(Tu(_,T,I,M,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),Tu(_,T,I,M,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))})(r,u,f,m,this.style.placement.variableOffsets);break;case"circle":(function(_,T,I,M){if(_.renderPass!=="translucent")return;const $=I.paint.get("circle-opacity"),q=I.paint.get("circle-stroke-width"),J=I.paint.get("circle-stroke-opacity"),fe=!I.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(q.constantOr(1)===0||J.constantOr(1)===0))return;const Me=_.context,ke=Me.gl,Oe=_.depthModeForSublayer(0,Sn.ReadOnly),Ae=or.disabled,Ke=_.colorModeForRenderPass(),tt=[];for(let De=0;De<M.length;De++){const Ye=M[De],ot=T.getTile(Ye),st=ot.getBucket(I);if(!st)continue;const dt=st.programConfigurations.get(I.id),wt=_.useProgram("circle",dt),xt=st.layoutVertexBuffer,Et=st.indexBuffer,$t=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ye),Pn={programConfiguration:dt,program:wt,layoutVertexBuffer:xt,indexBuffer:Et,uniformValues:Wo(_,Ye,ot,I),terrainData:$t};if(fe){const kt=st.segments.get();for(const ln of kt)tt.push({segments:new l.S([ln]),sortKey:ln.sortKey,state:Pn})}else tt.push({segments:st.segments,sortKey:0,state:Pn})}fe&&tt.sort((De,Ye)=>De.sortKey-Ye.sortKey);for(const De of tt){const{programConfiguration:Ye,program:ot,layoutVertexBuffer:st,indexBuffer:dt,uniformValues:wt,terrainData:xt}=De.state;ot.draw(Me,ke.TRIANGLES,Oe,Ae,Ke,Wn.disabled,wt,xt,I.id,st,dt,De.segments,I.paint,_.transform.zoom,Ye)}})(r,u,f,m);break;case"heatmap":(function(_,T,I,M){if(I.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const $=_.context,q=$.gl,J=or.disabled,fe=new Jn([q.ONE,q.ONE],l.aT.transparent,[!0,!0,!0,!0]);(function(Me,ke,Oe){const Ae=Me.gl;Me.activeTexture.set(Ae.TEXTURE1),Me.viewport.set([0,0,ke.width/4,ke.height/4]);let Ke=Oe.heatmapFbo;if(Ke)Ae.bindTexture(Ae.TEXTURE_2D,Ke.colorAttachment.get()),Me.bindFramebuffer.set(Ke.framebuffer);else{const tt=Ae.createTexture();Ae.bindTexture(Ae.TEXTURE_2D,tt),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_S,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_T,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MIN_FILTER,Ae.LINEAR),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MAG_FILTER,Ae.LINEAR),Ke=Oe.heatmapFbo=Me.createFramebuffer(ke.width/4,ke.height/4,!1,!1),function(De,Ye,ot,st){var dt,wt;const xt=De.gl,Et=(dt=De.HALF_FLOAT)!==null&&dt!==void 0?dt:xt.UNSIGNED_BYTE,$t=(wt=De.RGBA16F)!==null&&wt!==void 0?wt:xt.RGBA;xt.texImage2D(xt.TEXTURE_2D,0,$t,Ye.width/4,Ye.height/4,0,xt.RGBA,Et,null),st.colorAttachment.set(ot)}(Me,ke,tt,Ke)}})($,_,I),$.clear({color:l.aT.transparent});for(let Me=0;Me<M.length;Me++){const ke=M[Me];if(T.hasRenderableParent(ke))continue;const Oe=T.getTile(ke),Ae=Oe.getBucket(I);if(!Ae)continue;const Ke=Ae.programConfigurations.get(I.id),tt=_.useProgram("heatmap",Ke),{zoom:De}=_.transform;tt.draw($,q.TRIANGLES,Sn.disabled,J,fe,Wn.disabled,dc(ke.posMatrix,Oe,De,I.paint.get("heatmap-intensity")),null,I.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,I.paint,_.transform.zoom,Ke)}$.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function($,q){const J=$.context,fe=J.gl,Me=q.heatmapFbo;if(!Me)return;J.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,Me.colorAttachment.get()),J.activeTexture.set(fe.TEXTURE1);let ke=q.colorRampTexture;ke||(ke=q.colorRampTexture=new Q(J,q.colorRamp,fe.RGBA)),ke.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),$.useProgram("heatmapTexture").draw(J,fe.TRIANGLES,Sn.disabled,or.disabled,$.colorModeForRenderPass(),Wn.disabled,((Oe,Ae,Ke,tt)=>{const De=l.Z();l.aS(De,0,Oe.width,Oe.height,0,0,1);const Ye=Oe.context.gl;return{u_matrix:De,u_world:[Ye.drawingBufferWidth,Ye.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ae.paint.get("heatmap-opacity")}})($,q),null,q.id,$.viewportBuffer,$.quadTriangleIndexBuffer,$.viewportSegments,q.paint,$.transform.zoom)}(_,I))})(r,u,f,m);break;case"line":(function(_,T,I,M){if(_.renderPass!=="translucent")return;const $=I.paint.get("line-opacity"),q=I.paint.get("line-width");if($.constantOr(1)===0||q.constantOr(1)===0)return;const J=_.depthModeForSublayer(0,Sn.ReadOnly),fe=_.colorModeForRenderPass(),Me=I.paint.get("line-dasharray"),ke=I.paint.get("line-pattern"),Oe=ke.constantOr(1),Ae=I.paint.get("line-gradient"),Ke=I.getCrossfadeParameters(),tt=Oe?"linePattern":Me?"lineSDF":Ae?"lineGradient":"line",De=_.context,Ye=De.gl;let ot=!0;for(const st of M){const dt=T.getTile(st);if(Oe&&!dt.patternsLoaded())continue;const wt=dt.getBucket(I);if(!wt)continue;const xt=wt.programConfigurations.get(I.id),Et=_.context.program.get(),$t=_.useProgram(tt,xt),Pn=ot||$t.program!==Et,kt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(st),ln=ke.constantOr(null);if(ln&&dt.imageAtlas){const An=dt.imageAtlas,_n=An.patternPositions[ln.to.toString()],kn=An.patternPositions[ln.from.toString()];_n&&kn&&xt.setConstantPatternPositions(_n,kn)}const Ht=kt?st:null,Xn=Oe?Fh(_,dt,I,Ke,Ht):Me?vs(_,dt,I,Me,Ke,Ht):Ae?va(_,dt,I,wt.lineClipsArray.length,Ht):al(_,dt,I,Ht);if(Oe)De.activeTexture.set(Ye.TEXTURE0),dt.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),xt.updatePaintBuffers(Ke);else if(Me&&(Pn||_.lineAtlas.dirty))De.activeTexture.set(Ye.TEXTURE0),_.lineAtlas.bind(De);else if(Ae){const An=wt.gradients[I.id];let _n=An.texture;if(I.gradientVersion!==An.version){let kn=256;if(I.stepInterpolant){const Sr=T.getSource().maxzoom,nr=st.canonical.z===Sr?Math.ceil(1<<_.transform.maxZoom-st.canonical.z):1;kn=l.ad(l.aY(wt.maxLineLength/l.N*1024*nr),256,De.maxTextureSize)}An.gradient=l.aZ({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:kn,image:An.gradient||void 0,clips:wt.lineClipsArray}),An.texture?An.texture.update(An.gradient):An.texture=new Q(De,An.gradient,Ye.RGBA),An.version=I.gradientVersion,_n=An.texture}De.activeTexture.set(Ye.TEXTURE0),_n.bind(I.stepInterpolant?Ye.NEAREST:Ye.LINEAR,Ye.CLAMP_TO_EDGE)}$t.draw(De,Ye.TRIANGLES,J,_.stencilModeForClipping(st),fe,Wn.disabled,Xn,kt,I.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,I.paint,_.transform.zoom,xt,wt.layoutVertexBuffer2),ot=!1}})(r,u,f,m);break;case"fill":(function(_,T,I,M){const $=I.paint.get("fill-color"),q=I.paint.get("fill-opacity");if(q.constantOr(1)===0)return;const J=_.colorModeForRenderPass(),fe=I.paint.get("fill-pattern"),Me=_.opaquePassEnabledForLayer()&&!fe.constantOr(1)&&$.constantOr(l.aT.transparent).a===1&&q.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===Me){const ke=_.depthModeForSublayer(1,_.renderPass==="opaque"?Sn.ReadWrite:Sn.ReadOnly);Sa(_,T,I,M,ke,J,!1)}if(_.renderPass==="translucent"&&I.paint.get("fill-antialias")){const ke=_.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,Sn.ReadOnly);Sa(_,T,I,M,ke,J,!0)}})(r,u,f,m);break;case"fill-extrusion":(function(_,T,I,M){const $=I.paint.get("fill-extrusion-opacity");if($!==0&&_.renderPass==="translucent"){const q=new Sn(_.context.gl.LEQUAL,Sn.ReadWrite,_.depthRangeFor3D);if($!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))vo(_,T,I,M,q,or.disabled,Jn.disabled),vo(_,T,I,M,q,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const J=_.colorModeForRenderPass();vo(_,T,I,M,q,or.disabled,J)}}})(r,u,f,m);break;case"hillshade":(function(_,T,I,M){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const $=_.context,q=_.depthModeForSublayer(0,Sn.ReadOnly),J=_.colorModeForRenderPass(),[fe,Me]=_.renderPass==="translucent"?_.stencilConfigForOverlap(M):[{},M];for(const ke of Me){const Oe=T.getTile(ke);Oe.needsHillshadePrepare!==void 0&&Oe.needsHillshadePrepare&&_.renderPass==="offscreen"?Gr(_,Oe,I,q,or.disabled,J):_.renderPass==="translucent"&&Ks(_,ke,Oe,I,q,fe[ke.overscaledZ],J)}$.viewport.set([0,0,_.width,_.height])})(r,u,f,m);break;case"raster":(function(_,T,I,M){if(_.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!M.length)return;const $=_.context,q=$.gl,J=T.getSource(),fe=_.useProgram("raster"),Me=_.colorModeForRenderPass(),[ke,Oe]=J instanceof It?[{},M]:_.stencilConfigForOverlap(M),Ae=Oe[Oe.length-1].overscaledZ,Ke=!_.options.moving;for(const tt of Oe){const De=_.depthModeForSublayer(tt.overscaledZ-Ae,I.paint.get("raster-opacity")===1?Sn.ReadWrite:Sn.ReadOnly,q.LESS),Ye=T.getTile(tt);Ye.registerFadeDuration(I.paint.get("raster-fade-duration"));const ot=T.findLoadedParent(tt,0),st=Ss(Ye,ot,T,I,_.transform,_.style.map.terrain);let dt,wt;const xt=I.paint.get("raster-resampling")==="nearest"?q.NEAREST:q.LINEAR;$.activeTexture.set(q.TEXTURE0),Ye.texture.bind(xt,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),$.activeTexture.set(q.TEXTURE1),ot?(ot.texture.bind(xt,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),dt=Math.pow(2,ot.tileID.overscaledZ-Ye.tileID.overscaledZ),wt=[Ye.tileID.canonical.x*dt%1,Ye.tileID.canonical.y*dt%1]):Ye.texture.bind(xt,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST);const Et=_.style.map.terrain&&_.style.map.terrain.getTerrainData(tt),$t=Et?tt:null,Pn=$t?$t.posMatrix:_.transform.calculatePosMatrix(tt.toUnwrapped(),Ke),kt=mc(Pn,wt||[0,0],dt||1,st,I);J instanceof It?fe.draw($,q.TRIANGLES,De,or.disabled,Me,Wn.disabled,kt,Et,I.id,J.boundsBuffer,_.quadTriangleIndexBuffer,J.boundsSegments):fe.draw($,q.TRIANGLES,De,ke[tt.overscaledZ],Me,Wn.disabled,kt,Et,I.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(r,u,f,m);break;case"background":(function(_,T,I,M){const $=I.paint.get("background-color"),q=I.paint.get("background-opacity");if(q===0)return;const J=_.context,fe=J.gl,Me=_.transform,ke=Me.tileSize,Oe=I.paint.get("background-pattern");if(_.isPatternMissing(Oe))return;const Ae=!Oe&&$.a===1&&q===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Ae)return;const Ke=or.disabled,tt=_.depthModeForSublayer(0,Ae==="opaque"?Sn.ReadWrite:Sn.ReadOnly),De=_.colorModeForRenderPass(),Ye=_.useProgram(Oe?"backgroundPattern":"background"),ot=M||Me.coveringTiles({tileSize:ke,terrain:_.style.map.terrain});Oe&&(J.activeTexture.set(fe.TEXTURE0),_.imageManager.bind(_.context));const st=I.getCrossfadeParameters();for(const dt of ot){const wt=M?dt.posMatrix:_.transform.calculatePosMatrix(dt.toUnwrapped()),xt=Oe?pi(wt,q,_,Oe,{tileID:dt,tileSize:ke},st):cl(wt,q,$),Et=_.style.map.terrain&&_.style.map.terrain.getTerrainData(dt);Ye.draw(J,fe.TRIANGLES,tt,Ke,De,Wn.disabled,xt,Et,I.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(r,0,f,m);break;case"custom":(function(_,T,I){const M=_.context,$=I.implementation;if(_.renderPass==="offscreen"){const q=$.prerender;q&&(_.setCustomLayerDefaults(),M.setColorMode(_.colorModeForRenderPass()),q.call($,M.gl,_.transform.customLayerMatrix()),M.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),M.setColorMode(_.colorModeForRenderPass()),M.setStencilMode(or.disabled);const q=$.renderingMode==="3d"?new Sn(_.context.gl.LEQUAL,Sn.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,Sn.ReadOnly);M.setDepthMode(q),$.render(M.gl,_.transform.customLayerMatrix()),M.setDirty(),_.setBaseState(),M.bindFramebuffer.set(null)}})(r,0,f)}}translatePosMatrix(r,u,f,m,_){if(!f[0]&&!f[1])return r;const T=_?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(T){const $=Math.sin(T),q=Math.cos(T);f=[f[0]*q-f[1]*$,f[0]*$+f[1]*q]}const I=[_?f[0]:Ve(u,f[0],this.transform.zoom),_?f[1]:Ve(u,f[1],this.transform.zoom),0],M=new Float32Array(16);return l.$(M,r,I),M}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!u||!f}useProgram(r,u){this.cache=this.cache||{};const f=r+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new ol(this.context,ir[r],u,hl[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:u}=this.context.gl;return this.width!==r||this.height!==u}}class oi{constructor(r,u){this.points=r,this.planes=u}static fromInvProjectionMatrix(r,u,f){const m=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const M=1/(I=l.ag([],I,r))[3]/u*m;return l.b3(I,I,[M,M,1/I[3],M])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const M=function(fe,Me){var ke=Me[0],Oe=Me[1],Ae=Me[2],Ke=ke*ke+Oe*Oe+Ae*Ae;return Ke>0&&(Ke=1/Math.sqrt(Ke)),fe[0]=Me[0]*Ke,fe[1]=Me[1]*Ke,fe[2]=Me[2]*Ke,fe}([],function(fe,Me,ke){var Oe=Me[0],Ae=Me[1],Ke=Me[2],tt=ke[0],De=ke[1],Ye=ke[2];return fe[0]=Ae*Ye-Ke*De,fe[1]=Ke*tt-Oe*Ye,fe[2]=Oe*De-Ae*tt,fe}([],V([],_[I[0]],_[I[1]]),V([],_[I[2]],_[I[1]]))),$=-((q=M)[0]*(J=_[I[1]])[0]+q[1]*J[1]+q[2]*J[2]);var q,J;return M.concat($)});return new oi(_,T)}}class Es{constructor(r,u){this.min=r,this.max=u,this.center=function(f,m,_){return f[0]=.5*m[0],f[1]=.5*m[1],f[2]=.5*m[2],f}([],function(f,m,_){return f[0]=m[0]+_[0],f[1]=m[1]+_[1],f[2]=m[2]+_[2],f}([],this.min,this.max))}quadrant(r){const u=[r%2==0,r<2],f=se(this.min),m=se(this.max);for(let _=0;_<u.length;_++)f[_]=u[_]?this.min[_]:this.center[_],m[_]=u[_]?this.center[_]:this.max[_];return m[2]=this.max[2],new Es(f,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let m=0;m<r.planes.length;m++){const _=r.planes[m];let T=0;for(let I=0;I<u.length;I++)l.b4(_,u[I])>=0&&T++;if(T===0)return 0;T!==u.length&&(f=!1)}if(f)return 2;for(let m=0;m<3;m++){let _=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let I=0;I<r.points.length;I++){const M=r.points[I][m]-this.min[m];_=Math.min(_,M),T=Math.max(T,M)}if(T<0||_>this.max[m]-this.min[m])return 0}return 1}}class Js{constructor(r=0,u=0,f=0,m=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=f,this.right=m}interpolate(r,u,f){return u.top!=null&&r.top!=null&&(this.top=l.B.number(r.top,u.top,f)),u.bottom!=null&&r.bottom!=null&&(this.bottom=l.B.number(r.bottom,u.bottom,f)),u.left!=null&&r.left!=null&&(this.left=l.B.number(r.left,u.left,f)),u.right!=null&&r.right!=null&&(this.right=l.B.number(r.right,u.right,f)),this}getCenter(r,u){const f=l.ad((this.left+r-this.right)/2,0,r),m=l.ad((this.top+u-this.bottom)/2,0,u);return new l.P(f,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Js(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Qi{constructor(r,u,f,m,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=r||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Js,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const r=new Qi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this._minEleveationForCurrentTile=r._minEleveationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const u=-l.b5(r,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var f=new l.A(4);return l.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,m,_){var T=m[0],I=m[1],M=m[2],$=m[3],q=Math.sin(_),J=Math.cos(_);f[0]=T*J+M*q,f[1]=I*J+$*q,f[2]=T*-q+M*J,f[3]=I*-q+$*J}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const u=l.ad(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const u=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,f){this._unmodified=!1,this._edgeInsets.interpolate(r,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const u=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(r){const u=[new l.b6(0,r)];if(this._renderWorldCopies){const f=this.pointCoordinate(new l.P(0,0)),m=this.pointCoordinate(new l.P(this.width,0)),_=this.pointCoordinate(new l.P(this.width,this.height)),T=this.pointCoordinate(new l.P(0,this.height)),I=Math.floor(Math.min(f.x,m.x,_.x,T.x)),M=Math.floor(Math.max(f.x,m.x,_.x,T.x)),$=1;for(let q=I-$;q<=M+$;q++)q!==0&&u.push(new l.b6(q,r))}return u}coveringTiles(r){var u,f;let m=this.coveringZoomLevel(r);const _=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),I=l.U.fromLngLat(this.center),M=Math.pow(2,m),$=[M*T.x,M*T.y,0],q=[M*I.x,M*I.y,0],J=oi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let fe=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(fe=m);const Me=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,ke=De=>({aabb:new Es([De*M,0,0],[(De+1)*M,M,0]),zoom:0,x:0,y:0,wrap:De,fullyVisible:!1}),Oe=[],Ae=[],Ke=m,tt=r.reparseOverscaled?_:m;if(this._renderWorldCopies)for(let De=1;De<=3;De++)Oe.push(ke(-De)),Oe.push(ke(De));for(Oe.push(ke(0));Oe.length>0;){const De=Oe.pop(),Ye=De.x,ot=De.y;let st=De.fullyVisible;if(!st){const $t=De.aabb.intersects(J);if($t===0)continue;st=$t===2}const dt=r.terrain?$:q,wt=De.aabb.distanceX(dt),xt=De.aabb.distanceY(dt),Et=Math.max(Math.abs(wt),Math.abs(xt));if(De.zoom===Ke||Et>Me+(1<<Ke-De.zoom)-2&&De.zoom>=fe){const $t=Ke-De.zoom,Pn=$[0]-.5-(Ye<<$t),kt=$[1]-.5-(ot<<$t);Ae.push({tileID:new l.O(De.zoom===Ke?tt:De.zoom,De.wrap,De.zoom,Ye,ot),distanceSq:C([q[0]-.5-Ye,q[1]-.5-ot]),tileDistanceToCamera:Math.sqrt(Pn*Pn+kt*kt)})}else for(let $t=0;$t<4;$t++){const Pn=(Ye<<1)+$t%2,kt=(ot<<1)+($t>>1),ln=De.zoom+1;let Ht=De.aabb.quadrant($t);if(r.terrain){const Xn=new l.O(ln,De.wrap,ln,Pn,kt),An=r.terrain.getMinMaxElevation(Xn),_n=(u=An.minElevation)!==null&&u!==void 0?u:this.elevation,kn=(f=An.maxElevation)!==null&&f!==void 0?f:this.elevation;Ht=new Es([Ht.min[0],Ht.min[1],_n],[Ht.max[0],Ht.max[1],kn])}Oe.push({aabb:Ht,zoom:ln,x:Pn,y:kt,wrap:De.wrap,fullyVisible:st})}}return Ae.sort((De,Ye)=>De.distanceSq-Ye.distanceSq).map(De=>De.tileID)}resize(r,u){this.width=r,this.height=u,this.pixelsToGLUnits=[2/r,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const u=l.ad(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.P(l.G(r.lng)*this.worldSize,l.H(u)*this.worldSize)}unproject(r){return new l.U(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const u=this.pointLocation(this.centerPoint,r),f=r.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-f))return;const m=this.getCameraPosition(),_=l.U.fromLngLat(m.lngLat,m.altitude),T=l.U.fromLngLat(u,f),I=_.x-T.x,M=_.y-T.y,$=_.z-T.z,q=Math.sqrt(I*I+M*M+$*$),J=this.scaleZoom(this.cameraToCenterDistance/q/this.tileSize);this._elevation=f,this._center=u,this.zoom=J}setLocationAtPoint(r,u){const f=this.pointCoordinate(u),m=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(r),T=new l.U(_.x-(f.x-m.x),_.y-(f.y-m.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,u){return u?this.coordinatePoint(this.locationCoordinate(r),u.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,u){return this.coordinateLocation(this.pointCoordinate(r,u))}locationCoordinate(r){return l.U.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,u){if(u){const fe=u.pointCoordinate(r);if(fe!=null)return fe}const f=[r.x,r.y,0,1],m=[r.x,r.y,1,1];l.ag(f,f,this.pixelMatrixInverse),l.ag(m,m,this.pixelMatrixInverse);const _=f[3],T=m[3],I=f[1]/_,M=m[1]/T,$=f[2]/_,q=m[2]/T,J=$===q?0:(0-$)/(q-$);return new l.U(l.B.number(f[0]/_,m[0]/T,J)/this.worldSize,l.B.number(I,M,J)/this.worldSize)}coordinatePoint(r,u=0,f=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,u,1];return l.ag(m,m,f),new l.P(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Ie().extend(this.pointLocation(new l.P(0,r))).extend(this.pointLocation(new l.P(this.width,r))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ie([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,u=!1){const f=r.key,m=u?this._alignedPosMatrixCache:this._posMatrixCache;if(m[f])return m[f];const _=r.canonical,T=this.worldSize/this.zoomScale(_.z),I=_.x+Math.pow(2,_.z)*r.wrap,M=l.ao(new Float64Array(16));return l.$(M,M,[I*T,_.y*T,0]),l.a0(M,M,[T/l.N,T/l.N,1]),l.a1(M,u?this.alignedProjMatrix:this.projMatrix,M),m[f]=new Float32Array(M),m[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,u,f,m,_=-90,T=90,I=-180,M=180;const $=this.size,q=this._unmodified;if(this.latRange){const Me=this.latRange;_=l.H(Me[1])*this.worldSize,T=l.H(Me[0])*this.worldSize,r=T-_<$.y?$.y/(T-_):0}if(this.lngRange){const Me=this.lngRange;I=l.b5(l.G(Me[0])*this.worldSize,0,this.worldSize),M=l.b5(l.G(Me[1])*this.worldSize,0,this.worldSize),M<I&&(M+=this.worldSize),u=M-I<$.x?$.x/(M-I):0}const J=this.point,fe=Math.max(u||0,r||0);if(fe)return this.center=this.unproject(new l.P(u?(M+I)/2:J.x,r?(T+_)/2:J.y)),this.zoom+=this.scaleZoom(fe),this._unmodified=q,void(this._constraining=!1);if(this.latRange){const Me=J.y,ke=$.y/2;Me-ke<_&&(m=_+ke),Me+ke>T&&(m=T-ke)}if(this.lngRange){const Me=(I+M)/2,ke=l.b5(J.x,Me-this.worldSize/2,Me+this.worldSize/2),Oe=$.x/2;ke-Oe<I&&(f=I+Oe),ke+Oe>M&&(f=M-Oe)}f===void 0&&m===void 0||(this.center=this.unproject(new l.P(f!==void 0?f:J.x,m!==void 0?m:J.y)).wrap()),this._unmodified=q,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b7(1,this.center.lat)*this.worldSize;let m=l.ao(new Float64Array(16));l.a0(m,m,[this.width/2,-this.height/2,1]),l.$(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=l.ao(new Float64Array(16)),l.a0(m,m,[1,-1,1]),l.$(m,m,[-1,-1,0]),l.a0(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this._minEleveationForCurrentTile),I=_-T*this._pixelPerMeter/Math.cos(this._pitch),M=T<0?I:_,$=Math.PI/2+this._pitch,q=this._fov*(.5+r.y/this.height),J=Math.sin(q)*M/Math.sin(l.ad(Math.PI-$-q,.01,Math.PI-.01)),fe=this.getHorizon(),Me=2*Math.atan(fe/this.cameraToCenterDistance)*(.5+r.y/(2*fe)),ke=Math.sin(Me)*M/Math.sin(l.ad(Math.PI-$-Me,.01,Math.PI-.01)),Oe=Math.min(J,ke),Ae=1.01*(Math.cos(Math.PI/2-this._pitch)*Oe+M),Ke=this.height/50;m=new Float64Array(16),l.b8(m,this._fov,this.width/this.height,Ke,Ae),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,l.a0(m,m,[1,-1,1]),l.$(m,m,[0,0,-this.cameraToCenterDistance]),l.b9(m,m,this._pitch),l.ae(m,m,this.angle),l.$(m,m,[-u,-f,0]),this.mercatorMatrix=l.a0([],m,[this.worldSize,this.worldSize,this.worldSize]),l.a0(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.a1(new Float64Array(16),this.labelPlaneMatrix,m),l.$(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=l.as([],m),this.pixelMatrix3D=l.a1(new Float64Array(16),this.labelPlaneMatrix,m);const tt=this.width%2/2,De=this.height%2/2,Ye=Math.cos(this.angle),ot=Math.sin(this.angle),st=u-Math.round(u)+Ye*tt+ot*De,dt=f-Math.round(f)+Ye*De+ot*tt,wt=new Float64Array(m);if(l.$(wt,wt,[st>.5?st-1:st,dt>.5?dt-1:dt,0]),this.alignedProjMatrix=wt,m=l.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new l.P(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,r))}getCameraQueryGeometry(r){const u=this.getCameraPoint();if(r.length===1)return[r[0],u];{let f=u.x,m=u.y,_=u.x,T=u.y;for(const I of r)f=Math.min(f,I.x),m=Math.min(m,I.y),_=Math.max(_,I.x),T=Math.max(T,I.y);return[new l.P(f,m),new l.P(_,m),new l.P(_,T),new l.P(f,T),new l.P(f,m)]}}}function Yo(y,r){let u,f=!1,m=null,_=null;const T=()=>{m=null,f&&(y.apply(_,u),m=setTimeout(T,r),f=!1)};return(...I)=>(f=!0,_=this,u=I,m||T(),m)}class Aa{constructor(r){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let f;return u.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(f=m)}),(f&&f[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:f,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=Yo(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,m),T=Math.round(u.lng*_)/_,I=Math.round(u.lat*_)/_,M=this._map.getBearing(),$=this._map.getPitch();let q="";if(q+=r?`/${T}/${I}/${f}`:`${f}/${I}/${T}`,(M||$)&&(q+="/"+Math.round(10*M)/10),$&&(q+=`/${Math.round($)}`),this._hashName){const J=this._hashName;let fe=!1;const Me=window.location.hash.slice(1).split("&").map(ke=>{const Oe=ke.split("=")[0];return Oe===J?(fe=!0,`${Oe}=${q}`):ke}).filter(ke=>ke);return fe||Me.push(`${J}=${q}`),`#${Me.join("&")}`}return`#${q}`}}const Ts={linearity:.3,easing:l.ba(0,0,.3,1)},El=l.e({deceleration:2500,maxSpeed:1400},Ts),Au=l.e({deceleration:20,maxSpeed:1400},Ts),Pu=l.e({deceleration:1e3,maxSpeed:360},Ts),ku=l.e({deceleration:1e3,maxSpeed:90},Ts);class Z{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.h.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=l.h.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){const _=Ue(u.pan.mag(),f,l.e({},El,r||{}));m.offset=u.pan.mult(_.amount/u.pan.mag()),m.center=this._map.transform.center,ve(m,_)}if(u.zoom){const _=Ue(u.zoom,f,Au);m.zoom=this._map.transform.zoom+_.amount,ve(m,_)}if(u.bearing){const _=Ue(u.bearing,f,Pu);m.bearing=this._map.transform.bearing+l.ad(_.amount,-179,179),ve(m,_)}if(u.pitch){const _=Ue(u.pitch,f,ku);m.pitch=this._map.transform.pitch+_.amount,ve(m,_)}if(m.zoom||m.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;m.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.e(m,{noMoveStart:!0})}}function ve(y,r){(!y.duration||y.duration<r.duration)&&(y.duration=r.duration,y.easing=r.easing)}function Ue(y,r,u){const{maxSpeed:f,linearity:m,deceleration:_}=u,T=l.ad(y*m/(r/1e3),-f,f),I=Math.abs(T)/(_*m);return{easing:u.easing,duration:1e3*I,amount:T*(I/2)}}class it extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f,m={}){const _=w.mousePos(u.getCanvasContainer(),f),T=u.unproject(_);super(r,l.e({point:_,lngLat:T,originalEvent:f},m)),this._defaultPrevented=!1,this.target=u}}class Lt extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){const m=r==="touchend"?f.changedTouches:f.touches,_=w.touchPos(u.getCanvasContainer(),m),T=_.map(M=>u.unproject(M)),I=_.reduce((M,$,q,J)=>M.add($.div(J.length)),new l.P(0,0));super(r,{points:_,point:I,lngLats:T,lngLat:u.unproject(I),originalEvent:f}),this._defaultPrevented=!1}}class Tt extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Zt{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Tt(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new it(r.type,this._map,r))}mouseup(r){this._map.fire(new it(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new it(r.type,this._map,r))}dblclick(r){return this._firePreventable(new it(r.type,this._map,r))}mouseover(r){this._map.fire(new it(r.type,this._map,r))}mouseout(r){this._map.fire(new it(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Lt(r.type,this._map,r))}touchmove(r){this._map.fire(new Lt(r.type,this._map,r))}touchend(r){this._map.fire(new Lt(r.type,this._map,r))}touchcancel(r){this._map.fire(new Lt(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xt{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new it(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new it("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new it(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class dn{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(l.P.convert(r),this._map.terrain)}}class Zn{constructor(r,u){this._map=r,this._tr=new dn(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=f,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const _=Math.min(m.x,f.x),T=Math.max(m.x,f.x),I=Math.min(m.y,f.y),M=Math.max(m.y,f.y);w.setTransform(this._box,`translate(${_}px,${I}px)`),this._box.style.width=T-_+"px",this._box.style.height=M-I+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const f=this._startPos,m=u;if(this.reset(),w.suppressClick(),f.x!==m.x||f.y!==m.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:r})),{cameraAnimation:_=>_.fitScreenCoordinates(f,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new l.k(r,{originalEvent:u}))}}function En(y,r){if(y.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${r.length}`);const u={};for(let f=0;f<y.length;f++)u[y[f].identifier]=r[f];return u}class Un{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(m){const _=new l.P(0,0);for(const T of m)_._add(T);return _.div(m.length)}(u),this.touches=En(f,u)))}touchmove(r,u,f){if(this.aborted||!this.centroid)return;const m=En(f,u);for(const _ in this.touches){const T=m[_];(!T||T.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(r,u,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class sr{constructor(r){this.singleTap=new Un(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,f){this.singleTap.touchstart(r,u,f)}touchmove(r,u,f){this.singleTap.touchmove(r,u,f)}touchend(r,u,f){const m=this.singleTap.touchend(r,u,f);if(m){const _=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(m)<30;if(_&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class ar{constructor(r){this._tr=new dn(r),this._zoomIn=new sr({numTouches:1,numTaps:2}),this._zoomOut=new sr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,f){this._zoomIn.touchstart(r,u,f),this._zoomOut.touchstart(r,u,f)}touchmove(r,u,f){this._zoomIn.touchmove(r,u,f),this._zoomOut.touchmove(r,u,f)}touchend(r,u,f){const m=this._zoomIn.touchend(r,u,f),_=this._zoomOut.touchend(r,u,f),T=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(m)},{originalEvent:r})}):_?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(_)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tr{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=u.length?u[0]:u;return!this._moved&&m.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(f,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&w.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Jo={0:1,2:2};class eo{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=w.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,f){const m=Jo[f];return u.buttons===void 0||(u.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return w.mouseButton(r)===this._eventButton}}class Qo{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const Pa=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(r){r.preventDefault()}},Mo=({enable:y,clickTolerance:r,bearingDegreesPerPixelMoved:u=.8})=>{const f=new eo({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new tr({clickTolerance:r,move:(m,_)=>({bearingDelta:(_.x-m.x)*u}),moveStateManager:f,enable:y,assignEvents:Pa})},Di=({enable:y,clickTolerance:r,pitchDegreesPerPixelMoved:u=-.5})=>{const f=new eo({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new tr({clickTolerance:r,move:(m,_)=>({pitchDelta:(_.y-m.y)*u}),moveStateManager:f,enable:y,assignEvents:Pa})};class Bt{constructor(r,u){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,u,f){return this._calculateTransform(r,u,f)}touchmove(r,u,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,u,f)}touchend(r,u,f){this._calculateTransform(r,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,f){f.length>0&&(this._active=!0);const m=En(f,u),_=new l.P(0,0),T=new l.P(0,0);let I=0;for(const $ in m){const q=m[$],J=this._touches[$];J&&(_._add(q),T._add(q.sub(J)),I++,m[$]=q)}if(this._touches=m,I<this._minTouches||!T.mag())return;const M=T.div(I);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(I),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,f){if(!this._firstTwoTouches)return;r.preventDefault();const[m,_]=this._firstTwoTouches,T=Qs(f,u,m),I=Qs(f,u,_);if(!T||!I)return;const M=this._aroundCenter?null:T.add(I).div(2);return this._move([T,I],M,r)}touchend(r,u,f){if(!this._firstTwoTouches)return;const[m,_]=this._firstTwoTouches,T=Qs(f,u,m),I=Qs(f,u,_);T&&I||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Qs(y,r,u){for(let f=0;f<y.length;f++)if(y[f].identifier===u)return r[f]}function Tl(y,r){return Math.log(y/r)/Math.LN2}class qd extends bc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Tl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Tl(this._distance,f),pinchAround:u}}}function Ot(y,r){return 180*y.angleWith(r)/Math.PI}class Uh extends bc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u){const f=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ot(this._vector,f),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,f=Ot(r,this._startVector);return Math.abs(f)<u}}function $h(y){return Math.abs(y.y)>Math.abs(y.x)}class ly extends bc{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,f){super.touchstart(r,u,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,$h(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),_=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,_,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,f){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,_=u.mag()>=2;if(!m&&!_)return;if(!m||!_)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const T=r.y>0==u.y>0;return $h(r)&&$h(u)&&T}}const Vh={panStep:100,bearingStep:15,pitchStep:10};class Kd{constructor(r){this._tr=new dn(r);const u=Vh;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,f=0,m=0,_=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),_=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),_=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(f=0,m=0),{cameraAnimation:I=>{const M=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Yd,zoom:u?Math.round(M.zoom)+u*(r.shiftKey?2:1):M.zoom,bearing:M.bearing+f*this._bearingStep,pitch:M.pitch+m*this._pitchStep,offset:[-_*this._panStep,-T*this._panStep],center:M.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Yd(y){return y*(2-y)}const Jd=4.000244140625;class uy{constructor(r,u){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new dn(r),this._el=r.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=l.h.now(),m=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%Jd==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,r),f=this._tr;this._around=l.L.convert(this._aroundCenter?f.center:f.unproject(u)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>Jd?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&M!==0&&(M=1/M);const $=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom($*M))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,m=this._easing;let _,T=!1;if(this._type==="wheel"&&f&&m){const I=Math.min((l.h.now()-this._lastWheelEventTime)/200,1),M=m(I);_=l.B.number(f,u,M),I<1?this._frameId||(this._frameId=!0):T=!0}else _=u,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:_-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=l.bb;if(this._prevEase){const f=this._prevEase,m=(l.h.now()-f.start)/f.duration,_=f.easing(m+.01)-f.easing(m),T=.27/Math.sqrt(_*_+1e-4)*.01,I=Math.sqrt(.0729-T*T);u=l.ba(T,I,.25,1)}return this._prevEase={start:l.h.now(),duration:r,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Gh{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Zh{constructor(r){this._tr=new dn(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hh{constructor(){this._tap=new sr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,u,f){if(!this._swipePoint)if(this._tapTime){const m=u[0],_=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(m)<30;_&&T?f.length>0&&(this._swipePoint=m,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,u,f)}touchmove(r,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const m=u[0],_=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(r,u,f)}touchend(r,u,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const m=this._tap.touchend(r,u,f);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wh{constructor(r,u,f){this._el=r,this._mousePan=u,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Bi{constructor(r,u,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ea{constructor(r,u,f,m){this._el=r,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Mu=y=>y.zoom||y.drag||y.pitch||y.rotate;class Xh extends l.k{}function Lu(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class qh{constructor(r,u){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,_)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=m.type==="renderFrame"?void 0:m,I={needsRenderFrame:!1},M={},$={},q=m.touches,J=q?this._getMapTouches(q):void 0,fe=J?w.touchPos(this._el,J):w.mousePos(this._el,m);for(const{handlerName:Oe,handler:Ae,allowed:Ke}of this._handlers){if(!Ae.isEnabled())continue;let tt;this._blockedByActive($,Ke,Oe)?Ae.reset():Ae[_||m.type]&&(tt=Ae[_||m.type](m,fe,J),this.mergeHandlerResult(I,M,tt,Oe,T),tt&&tt.needsRenderFrame&&this._triggerRenderFrame()),(tt||Ae.isActive())&&($[Oe]=Ae)}const Me={};for(const Oe in this._previousActiveHandlers)$[Oe]||(Me[Oe]=T);this._previousActiveHandlers=$,(Object.keys(Me).length||Lu(I))&&(this._changes.push([I,M,Me]),this._triggerRenderFrame()),(Object.keys($).length||Lu(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ke}=I;ke&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ke(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Z(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,_,T]of this._listeners)w.addEventListener(m,_,m===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,u,f]of this._listeners)w.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new Zt(u,r));const m=u.boxZoom=new Zn(u,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const _=new ar(u),T=new Zh(u);u.doubleClickZoom=new Gh(T,_),this._add("tapZoom",_),this._add("clickZoom",T),r.interactive&&r.doubleClickZoom&&u.doubleClickZoom.enable();const I=new Hh;this._add("tapDragZoom",I);const M=u.touchPitch=new ly(u);this._add("touchPitch",M),r.interactive&&r.touchPitch&&u.touchPitch.enable(r.touchPitch);const $=Mo(r),q=Di(r);u.dragRotate=new Bi(r,$,q),this._add("mouseRotate",$,["mousePitch"]),this._add("mousePitch",q,["mouseRotate"]),r.interactive&&r.dragRotate&&u.dragRotate.enable();const J=(({enable:Ke,clickTolerance:tt})=>{const De=new eo({checkCorrectEvent:Ye=>w.mouseButton(Ye)===0&&!Ye.ctrlKey});return new tr({clickTolerance:tt,move:(Ye,ot)=>({around:ot,panDelta:ot.sub(Ye)}),activateOnStart:!0,moveStateManager:De,enable:Ke,assignEvents:Pa})})(r),fe=new Bt(r,u);u.dragPan=new Wh(f,J,fe),this._add("mousePan",J),this._add("touchPan",fe,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&u.dragPan.enable(r.dragPan);const Me=new Uh,ke=new qd;u.touchZoomRotate=new ea(f,ke,Me,I),this._add("touchRotate",Me,["touchPan","touchZoom"]),this._add("touchZoom",ke,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&u.touchZoomRotate.enable(r.touchZoomRotate);const Oe=u.scrollZoom=new uy(u,()=>this._triggerRenderFrame());this._add("scrollZoom",Oe,["mousePan"]),r.interactive&&r.scrollZoom&&u.scrollZoom.enable(r.scrollZoom);const Ae=u.keyboard=new Kd(u);this._add("keyboard",Ae),r.interactive&&r.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Xt(u))}_add(r,u,f){this._handlers.push({handlerName:r,handler:u,allowed:f}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Mu(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,f){for(const m in r)if(m!==f&&(!u||u.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const u=[];for(const f of r)this._el.contains(f.target)&&u.push(f);return u}mergeHandlerResult(r,u,f,m,_){if(!f)return;l.e(r,f);const T={handlerName:m,originalEvent:f.originalEvent||_};f.zoomDelta!==void 0&&(u.zoom=T),f.panDelta!==void 0&&(u.drag=T),f.pitchDelta!==void 0&&(u.pitch=T),f.bearingDelta!==void 0&&(u.rotate=T)}_applyChanges(){const r={},u={},f={};for(const[m,_,T]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new l.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),l.e(u,_),l.e(f,T);this._updateMapTransform(r,u,f),this._changes=[]}_updateMapTransform(r,u,f){const m=this._map,_=m._getTransformForUpdate(),T=m.terrain;if(!(Lu(r)||T&&this._terrainMovement))return this._fireEvents(u,f,!0);let{panDelta:I,zoomDelta:M,bearingDelta:$,pitchDelta:q,around:J,pinchAround:fe}=r;fe!==void 0&&(J=fe),m._stop(!0),J=J||m.transform.centerPoint;const Me=_.pointLocation(I?J.sub(I):J);$&&(_.bearing+=$),q&&(_.pitch+=q),M&&(_.zoom+=M),T?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(I)):_.setLocationAtPoint(Me,J):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(Me,J),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(m.terrain)})):_.setLocationAtPoint(Me,J),m._applyUpdatedTransform(_),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,f,!0)}_fireEvents(r,u,f){const m=Mu(this._eventsInProgress),_=Mu(r),T={};for(const q in r){const{originalEvent:J}=r[q];this._eventsInProgress[q]||(T[`${q}start`]=J),this._eventsInProgress[q]=r[q]}!m&&_&&this._fireEvent("movestart",_.originalEvent);for(const q in T)this._fireEvent(q,T[q]);_&&this._fireEvent("move",_.originalEvent);for(const q in r){const{originalEvent:J}=r[q];this._fireEvent(q,J)}const I={};let M;for(const q in this._eventsInProgress){const{handlerName:J,originalEvent:fe}=this._eventsInProgress[q];this._handlersById[J].isActive()||(delete this._eventsInProgress[q],M=u[J]||fe,I[`${q}end`]=M)}for(const q in I)this._fireEvent(q,I[q]);const $=Mu(this._eventsInProgress);if(f&&(m||_)&&!$){this._updatingCamera=!0;const q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),J=fe=>fe!==0&&-this._bearingSnap<fe&&fe<this._bearingSnap;!q||!q.essential&&l.h.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:M})),J(this._map.getBearing())&&this._map.resetNorth()):(J(q.bearing||this._map.getBearing())&&(q.bearing=0),q.freezeElevation=!0,this._map.easeTo(q,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new l.k(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Xh("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Qd extends l.E{constructor(r,u){super(),this._renderFrameCallback=()=>{const f=Math.min((l.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.L(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}panBy(r,u,f){return r=l.P.convert(r).mult(-1),this.panTo(this.transform.center,l.e({offset:r},u),f)}panTo(r,u,f){return this.easeTo(l.e({center:r},u),f)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,f){return this.easeTo(l.e({zoom:r},u),f)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,f){return this.easeTo(l.e({bearing:r},u),f)}resetNorth(r,u){return this.rotateTo(0,l.e({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}cameraForBounds(r,u){r=Ie.convert(r);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,u)}_cameraForBoxAndBearing(r,u,f,m){const _={top:0,bottom:0,right:0,left:0};if(typeof(m=l.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const ot=m.padding;m.padding={top:ot,bottom:ot,right:ot,left:ot}}m.padding=l.e(_,m.padding);const T=this.transform,I=T.padding,M=T.project(l.L.convert(r)),$=T.project(l.L.convert(u)),q=M.rotate(-f*Math.PI/180),J=$.rotate(-f*Math.PI/180),fe=new l.P(Math.max(q.x,J.x),Math.max(q.y,J.y)),Me=new l.P(Math.min(q.x,J.x),Math.min(q.y,J.y)),ke=fe.sub(Me),Oe=(T.width-(I.left+I.right+m.padding.left+m.padding.right))/ke.x,Ae=(T.height-(I.top+I.bottom+m.padding.top+m.padding.bottom))/ke.y;if(Ae<0||Oe<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ke=Math.min(T.scaleZoom(T.scale*Math.min(Oe,Ae)),m.maxZoom),tt=l.P.convert(m.offset),De=new l.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(f*Math.PI/180),Ye=tt.add(De).mult(T.scale/T.zoomScale(Ke));return{center:T.unproject(M.add($).div(2).sub(Ye)),zoom:Ke,bearing:f}}fitBounds(r,u,f){return this._fitInternal(this.cameraForBounds(r,u),u,f)}fitScreenCoordinates(r,u,f,m,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(r)),this.transform.pointLocation(l.P.convert(u)),f,m),m,_)}_fitInternal(r,u,f){return r?(delete(u=l.e(r,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(r,u){this.stop();const f=this._getTransformForUpdate();let m=!1,_=!1,T=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(m=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=l.L.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(_=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(T=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new l.k("movestart",u)).fire(new l.k("move",u)),m&&this.fire(new l.k("zoomstart",u)).fire(new l.k("zoom",u)).fire(new l.k("zoomend",u)),_&&this.fire(new l.k("rotatestart",u)).fire(new l.k("rotate",u)).fire(new l.k("rotateend",u)),T&&this.fire(new l.k("pitchstart",u)).fire(new l.k("pitch",u)).fire(new l.k("pitchend",u)),this.fire(new l.k("moveend",u))}calculateCameraOptionsFromTo(r,u,f,m=0){const _=l.U.fromLngLat(r,u),T=l.U.fromLngLat(f,m),I=T.x-_.x,M=T.y-_.y,$=T.z-_.z,q=Math.hypot(I,M,$);if(q===0)throw new Error("Can't calculate camera options with same From and To");const J=Math.hypot(I,M),fe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/q/this.transform.tileSize),Me=180*Math.atan2(I,-M)/Math.PI;let ke=180*Math.acos(J/q)/Math.PI;return ke=$<0?90-ke:90+ke,{center:T.toLngLat(),zoom:fe,pitch:ke,bearing:Me}}easeTo(r,u){this._stop(!1,r.easeId),((r=l.e({offset:[0,0],duration:500,easing:l.bb},r)).animate===!1||!r.essential&&l.h.prefersReducedMotion)&&(r.duration=0);const f=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),T=this.getPitch(),I=this.getPadding(),M="zoom"in r?+r.zoom:m,$="bearing"in r?this._normalizeBearing(r.bearing,_):_,q="pitch"in r?+r.pitch:T,J="padding"in r?r.padding:f.padding,fe=l.P.convert(r.offset);let Me=f.centerPoint.add(fe);const ke=f.pointLocation(Me),Oe=l.L.convert(r.center||ke);this._normalizeCenter(Oe);const Ae=f.project(ke),Ke=f.project(Oe).sub(Ae),tt=f.zoomScale(M-m);let De,Ye;r.around&&(De=l.L.convert(r.around),Ye=f.locationPoint(De));const ot={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||M!==m,this._rotating=this._rotating||_!==$,this._pitching=this._pitching||q!==T,this._padding=!f.isPaddingEqual(J),this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,ot),this.terrain&&this._prepareElevation(Oe),this._ease(st=>{if(this._zooming&&(f.zoom=l.B.number(m,M,st)),this._rotating&&(f.bearing=l.B.number(_,$,st)),this._pitching&&(f.pitch=l.B.number(T,q,st)),this._padding&&(f.interpolatePadding(I,J,st),Me=f.centerPoint.add(fe)),this.terrain&&!r.freezeElevation&&this._updateElevation(st),De)f.setLocationAtPoint(De,Ye);else{const dt=f.zoomScale(f.zoom-m),wt=M>m?Math.min(2,tt):Math.max(.5,tt),xt=Math.pow(wt,1-st),Et=f.unproject(Ae.add(Ke.mult(st*xt)).mult(dt));f.setLocationAtPoint(f.renderWorldCopies?Et.wrap():Et,Me)}this._applyUpdatedTransform(f),this._fireMoveEvents(u)},st=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,st)},r),this}_prepareEase(r,u,f={}){this._moving=!0,u||f.moving||this.fire(new l.k("movestart",r)),this._zooming&&!f.zooming&&this.fire(new l.k("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new l.k("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new l.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&u!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(u-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.elevation=l.B.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const u=r.clone(),{center:f,zoom:m,pitch:_,bearing:T,elevation:I}=this.transformCameraUpdate(u);f&&(u.center=f),m!==void 0&&(u.zoom=m),_!==void 0&&(u.pitch=_),T!==void 0&&(u.bearing=T),I!==void 0&&(u.elevation=I),this.transform.apply(u)}_fireMoveEvents(r){this.fire(new l.k("move",r)),this._zooming&&this.fire(new l.k("zoom",r)),this._rotating&&this.fire(new l.k("rotate",r)),this._pitching&&this.fire(new l.k("pitch",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const f=this._zooming,m=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new l.k("zoomend",r)),m&&this.fire(new l.k("rotateend",r)),_&&this.fire(new l.k("pitchend",r)),this.fire(new l.k("moveend",r))}flyTo(r,u){if(!r.essential&&l.h.prefersReducedMotion){const Ht=l.F(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ht,u)}this.stop(),r=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.bb},r);const f=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),T=this.getPitch(),I=this.getPadding(),M="zoom"in r?l.ad(+r.zoom,f.minZoom,f.maxZoom):m,$="bearing"in r?this._normalizeBearing(r.bearing,_):_,q="pitch"in r?+r.pitch:T,J="padding"in r?r.padding:f.padding,fe=f.zoomScale(M-m),Me=l.P.convert(r.offset);let ke=f.centerPoint.add(Me);const Oe=f.pointLocation(ke),Ae=l.L.convert(r.center||Oe);this._normalizeCenter(Ae);const Ke=f.project(Oe),tt=f.project(Ae).sub(Ke);let De=r.curve;const Ye=Math.max(f.width,f.height),ot=Ye/fe,st=tt.mag();if("minZoom"in r){const Ht=l.ad(Math.min(r.minZoom,m,M),f.minZoom,f.maxZoom),Xn=Ye/f.zoomScale(Ht-m);De=Math.sqrt(Xn/st*2)}const dt=De*De;function wt(Ht){const Xn=(ot*ot-Ye*Ye+(Ht?-1:1)*dt*dt*st*st)/(2*(Ht?ot:Ye)*dt*st);return Math.log(Math.sqrt(Xn*Xn+1)-Xn)}function xt(Ht){return(Math.exp(Ht)-Math.exp(-Ht))/2}function Et(Ht){return(Math.exp(Ht)+Math.exp(-Ht))/2}const $t=wt(!1);let Pn=function(Ht){return Et($t)/Et($t+De*Ht)},kt=function(Ht){return Ye*((Et($t)*(xt(Xn=$t+De*Ht)/Et(Xn))-xt($t))/dt)/st;var Xn},ln=(wt(!0)-$t)/De;if(Math.abs(st)<1e-6||!isFinite(ln)){if(Math.abs(Ye-ot)<1e-6)return this.easeTo(r,u);const Ht=ot<Ye?-1:1;ln=Math.abs(Math.log(ot/Ye))/De,kt=function(){return 0},Pn=function(Xn){return Math.exp(Ht*De*Xn)}}return r.duration="duration"in r?+r.duration:1e3*ln/("screenSpeed"in r?+r.screenSpeed/De:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=_!==$,this._pitching=q!==T,this._padding=!f.isPaddingEqual(J),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(Ae),this._ease(Ht=>{const Xn=Ht*ln,An=1/Pn(Xn);f.zoom=Ht===1?M:m+f.scaleZoom(An),this._rotating&&(f.bearing=l.B.number(_,$,Ht)),this._pitching&&(f.pitch=l.B.number(T,q,Ht)),this._padding&&(f.interpolatePadding(I,J,Ht),ke=f.centerPoint.add(Me)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ht);const _n=Ht===1?Ae:f.unproject(Ke.add(tt.mult(kt(Xn))).mult(An));f.setLocationAtPoint(f.renderWorldCopies?_n.wrap():_n,ke),this._applyUpdatedTransform(f),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!r){const f=this.handlers;f&&f.stop(!1)}return this}_ease(r,u,f){f.animate===!1||f.duration===0?(r(1),u()):(this._easeStart=l.h.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,u){r=l.b5(r,-180,180);const f=Math.abs(r-u);return Math.abs(r-360-u)<f&&(r-=360),Math.abs(r+360-u)<f&&(r+=360),r}_normalizeCenter(r){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=r.lng-u.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(l.L.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}class to{constructor(r={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const f=this._map._getUIString(`AttributionControl.${u}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const u=this._map.style.sourceCaches;for(const m in u){const _=u[m];if(_.used||_.usedForTerrain){const T=_.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,_)=>m.length-_.length),r=r.filter((m,_)=>{for(let T=_+1;T<r.length;T++)if(r[T].indexOf(m)>=0)return!1;return!0});const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class lr{constructor(r={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const f=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Sc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const m of f)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Kh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var ep=l.Q([{name:"a_pos3d",type:"Int16",components:3}]);class tp extends l.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const f={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))f[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),l.aS(m.posMatrix,0,l.N,0,l.N,0,1),this._tiles[m.key]=new sn(m,this.tileSize));for(const m in this._tiles)f[m]||delete this._tiles[m]}freeRtt(r){for(const u in this._tiles){const f=this._tiles[u];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const u={};for(const f of this._renderableTilesKeys){const m=this._tiles[f].tileID;if(m.canonical.equals(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16),l.aS(_.posMatrix,0,l.N,0,l.N,0,1),u[f]=_}else if(m.canonical.isChildOf(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=m.canonical.z-r.canonical.z,I=m.canonical.x-(m.canonical.x>>T<<T),M=m.canonical.y-(m.canonical.y>>T<<T),$=l.N>>T;l.aS(_.posMatrix,0,$,0,$,0,1),l.$(_.posMatrix,_.posMatrix,[-I*$,-M*$,0]),u[f]=_}else if(r.canonical.isChildOf(m.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=r.canonical.z-m.canonical.z,I=r.canonical.x-(r.canonical.x>>T<<T),M=r.canonical.y-(r.canonical.y>>T<<T),$=l.N>>T;l.aS(_.posMatrix,0,l.N,0,l.N,0,1),l.$(_.posMatrix,_.posMatrix,[I*$,M*$,0]),l.a0(_.posMatrix,_.posMatrix,[1/2**T,1/2**T,0]),u[f]=_}}return u}getSourceTile(r,u){const f=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>f.maxzoom&&(m=f.maxzoom),m<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!_||!_.dem)&&u)for(;m>=f.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(r.scaledTo(m--).key);return _}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=r)}}class np{constructor(r,u,f){this.painter=r,this.sourceCache=new tp(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,f,m=l.N){var _;if(!(u>=0&&u<m&&f>=0&&f<m))return 0;const T=this.getTerrainData(r),I=(_=T.tile)===null||_===void 0?void 0:_.dem;if(!I)return 0;const M=function(ke,Oe,Ae){var Ke=Oe[0],tt=Oe[1];return ke[0]=Ae[0]*Ke+Ae[4]*tt+Ae[12],ke[1]=Ae[1]*Ke+Ae[5]*tt+Ae[13],ke}([],[u/m*l.N,f/m*l.N],T.u_terrain_matrix),$=[M[0]*I.dim,M[1]*I.dim],q=Math.floor($[0]),J=Math.floor($[1]),fe=$[0]-q,Me=$[1]-J;return I.get(q,J)*(1-fe)*(1-Me)+I.get(q+1,J)*fe*(1-Me)+I.get(q,J+1)*(1-fe)*Me+I.get(q+1,J+1)*fe*Me}getElevationForLngLatZoom(r,u){const{tileID:f,mercatorX:m,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(r,u);return this.getElevation(f,m%l.N,_%l.N,l.N)}getElevation(r,u,f,m=l.N){return this.getDEMElevation(r,u,f,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,_=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Q(m,_,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Q(m,new l.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const m=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new Q(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const m=this.sourceCache.sourceCache._source.maxzoom;let _=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?_=r.canonical.z-m:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>_<<_),I=r.canonical.y-(r.canonical.y>>_<<_),M=l.bc(new Float64Array(16),[1/(l.N<<_),1/(l.N<<_),0]);l.$(M,M,[T*l.N,I*l.N,0]),this._demMatrixCache[r.key]={matrix:M,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,f=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Q(u.context,{width:f,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Q(u.context,{width:f,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,m,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,T=0;_<this._coordsTextureSize;_++)for(let I=0;I<this._coordsTextureSize;I++,T+=4)u[T+0]=255&I,u[T+1]=255&_,u[T+2]=I>>8<<4|_>>8,u[T+3]=0;const f=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new Q(r,f,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){const u=new Uint8Array(4),f=this.painter.context,m=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),f.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),T=u[1]+((15&u[2])<<8),I=this.coordsIndex[255-u[3]],M=I&&this.sourceCache.getTileByID(I);if(!M)return null;const $=this._coordsTextureSize,q=(1<<M.tileID.canonical.z)*$;return new l.U(this._allowMercatorOverflow(r,(M.tileID.canonical.x*$+_)/q),(M.tileID.canonical.y*$+T)/q,this.getElevation(M.tileID,_,T,$))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,u=new l.bd,f=new l.b0,m=this.meshSize,_=l.N/m,T=m*m;for(let J=0;J<=m;J++)for(let fe=0;fe<=m;fe++)u.emplaceBack(fe*_,J*_,0);for(let J=0;J<T;J+=m+1)for(let fe=0;fe<m;fe++)f.emplaceBack(fe+J,m+fe+J+1,m+fe+J+2),f.emplaceBack(fe+J,m+fe+J+2,fe+J+1);const I=u.length,M=I+2*(m+1);for(const J of[0,1])for(let fe=0;fe<=m;fe++)for(const Me of[0,1])u.emplaceBack(fe*_,J*l.N,Me);for(let J=0;J<2*m;J+=2)f.emplaceBack(M+J,M+J+1,M+J+3),f.emplaceBack(M+J,M+J+3,M+J+2),f.emplaceBack(I+J,I+J+3,I+J+1),f.emplaceBack(I+J,I+J+2,I+J+3);const $=u.length,q=$+2*(m+1);for(const J of[0,1])for(let fe=0;fe<=m;fe++)for(const Me of[0,1])u.emplaceBack(J*l.N,fe*_,Me);for(let J=0;J<2*m;J+=2)f.emplaceBack($+J,$+J+1,$+J+3),f.emplaceBack($+J,$+J+3,$+J+2),f.emplaceBack(q+J,q+J+3,q+J+1),f.emplaceBack(q+J,q+J+2,q+J+3);return this._mesh={indexBuffer:r.createIndexBuffer(f),vertexBuffer:r.createVertexBuffer(u,ep.members),segments:l.S.simpleSegment(0,0,u.length,f.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*l.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,u){var f;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,u);return(f=this.getMinMaxElevation(m).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=u.dem.min*this.exaggeration,f.maxElevation=u.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,u){const f=l.U.fromLngLat(r.wrap()),m=(1<<u)*l.N,_=f.x*m,T=f.y*m,I=Math.floor(_/l.N),M=Math.floor(T/l.N);return{tileID:new l.O(u,0,u,I,M),mercatorX:_,mercatorY:T}}_allowMercatorOverflow(r,u){const f=r.x<this.painter.width/2;let m=l.bf(u);const _=this.painter.transform.center.lng;return f&&Math.sign(m)>0&&Math.sign(_)<0||!f&&Math.sign(m)<0&&Math.sign(_)>0?(m=360*Math.sign(_)+m,l.G(m)):u}}class cy{constructor(r,u,f){this._context=r,this._size=u,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Q(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(f.texture),{id:r,fbo:u,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Ti={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ec{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new cy(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(u)),this._coordsDescendingInv={};for(const f in r.sourceCaches){this._coordsDescendingInv[f]={};const m=r.sourceCaches[f].getVisibleCoordinates();for(const _ of m){const T=this.terrain.sourceCache.getTerrainCoords(_);for(const I in T)this._coordsDescendingInv[f][I]||(this._coordsDescendingInv[f][I]=[]),this._coordsDescendingInv[f][I].push(T[I])}}this._coordsDescendingInvStr={};for(const f of r._order){const m=r._layers[f],_=m.source;if(Ti[m.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const T in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][T]=this._coordsDescendingInv[_][T].map(I=>I.key).sort().join()}}for(const f of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[m][f.tileID.key];_&&_!==f.rttCoords[m]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const u=r.type,f=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Ti[u]&&(this._prevType&&Ti[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(Ti[this._prevType]||Ti[u]&&m){this._prevType=u;const _=this._stacks.length-1,T=this._stacks[_]||[];for(const I of this._renderableTiles){if(this.pool.isFull()&&(Qn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(I),I.rtt[_]){const $=this.pool.getObjectForId(I.rtt[_].id);if($.stamp===I.rtt[_].stamp){this.pool.useObject($);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),I.rtt[_]={id:M.id,stamp:M.stamp},f.context.bindFramebuffer.set(M.fbo.framebuffer),f.context.clear({color:l.aT.transparent,stencil:0}),f.currentStencilSource=void 0;for(let $=0;$<T.length;$++){const q=f.style._layers[T[$]],J=q.source?this._coordsDescendingInv[q.source][I.tileID.key]:[I.tileID];f.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),f._renderTileClippingMasks(q,J),f.renderLayer(f,f.style.sourceCaches[q.source],q,J),q.source&&(I.rttCoords[q.source]=this._coordsDescendingInvStr[q.source][I.tileID.key])}}return Qn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ti[u]}return!1}}const qt=b,an={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},zu=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},Yh={showCompass:!0,showZoom:!0,visualizePitch:!1};class Jh{constructor(r,u,f=!1){this.mousedown=T=>{this.startMouse(l.e({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),w.mousePos(this.element,T)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,w.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),_=r.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Mo({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:I,bearingDegreesPerPixelMoved:M=.8})=>{const $=new Qo;return new tr({clickTolerance:I,move:(q,J)=>({bearingDelta:(J.x-q.x)*M}),moveStateManager:$,enable:T,assignEvents:zu})})({clickTolerance:m,enable:!0}),this.map=r,f&&(this.mousePitch=Di({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:I,pitchDegreesPerPixelMoved:M=-.5})=>{const $=new Qo;return new tr({clickTolerance:I,move:(q,J)=>({pitchDelta:(J.y-q.y)*M}),moveStateManager:$,enable:T,assignEvents:zu})})({clickTolerance:_,enable:!0})),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(r,u){this.mouseRotate.dragStart(r,u),this.mousePitch&&this.mousePitch.dragStart(r,u),w.disableDrag()}startTouch(r,u){this.touchRotate.dragStart(r,u),this.touchPitch&&this.touchPitch.dragStart(r,u),w.disableDrag()}moveMouse(r,u){const f=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,u)||{};if(m&&f.setBearing(f.getBearing()+m),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(r,u)||{};_&&f.setPitch(f.getPitch()+_)}}moveTouch(r,u){const f=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,u)||{};if(m&&f.setBearing(f.getBearing()+m),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(r,u)||{};_&&f.setPitch(f.getPitch()+_)}}off(){const r=this.element;w.removeEventListener(r,"mousedown",this.mousedown),w.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let Ir;function Qh(y,r,u){if(y=new l.L(y.lng,y.lat),r){const f=new l.L(y.lng-360,y.lat),m=new l.L(y.lng+360,y.lat),_=u.locationPoint(y).distSqr(r);u.locationPoint(f).distSqr(r)<_?y=f:u.locationPoint(m).distSqr(r)<_&&(y=m)}for(;Math.abs(y.lng-u.center.lng)>180;){const f=u.locationPoint(y);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const _o={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function rp(y,r,u){const f=y.classList;for(const m in _o)f.remove(`maplibregl-${u}-anchor-${m}`);f.add(`maplibregl-${u}-anchor-${r}`)}class ka extends l.E{constructor(r){if(super(),this._onKeyPress=u=>{const f=u.code,m=u.charCode||u.keyCode;f!=="Space"&&f!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=u=>{const f=u.originalEvent.target,m=this._element;this._popup&&(f===m||m.contains(f))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!f)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Qh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${_o[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${m}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const T=this._map.unproject(this._pos),I=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=T.distanceTo(this._lngLat)>20*I?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=l.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const u=w.createNS("http://www.w3.org/2000/svg","svg"),f=41,m=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${f}px`),u.setAttributeNS(null,"width",`${m}px`),u.setAttributeNS(null,"viewBox",`0 0 ${m} ${f}`);const _=w.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const T=w.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const I=w.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ke of M){const tt=w.createNS("http://www.w3.org/2000/svg","ellipse");tt.setAttributeNS(null,"opacity","0.04"),tt.setAttributeNS(null,"cx","10.5"),tt.setAttributeNS(null,"cy","5.80029008"),tt.setAttributeNS(null,"rx",Ke.rx),tt.setAttributeNS(null,"ry",Ke.ry),I.appendChild(tt)}const $=w.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);const q=w.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(q);const J=w.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"opacity","0.25"),J.setAttributeNS(null,"fill","#000000");const fe=w.createNS("http://www.w3.org/2000/svg","path");fe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),J.appendChild(fe);const Me=w.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Me.setAttributeNS(null,"fill","#FFFFFF");const ke=w.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Oe=w.createNS("http://www.w3.org/2000/svg","circle");Oe.setAttributeNS(null,"fill","#000000"),Oe.setAttributeNS(null,"opacity","0.25"),Oe.setAttributeNS(null,"cx","5.5"),Oe.setAttributeNS(null,"cy","5.5"),Oe.setAttributeNS(null,"r","5.4999962");const Ae=w.createNS("http://www.w3.org/2000/svg","circle");Ae.setAttributeNS(null,"fill","#FFFFFF"),Ae.setAttributeNS(null,"cx","5.5"),Ae.setAttributeNS(null,"cy","5.5"),Ae.setAttributeNS(null,"r","5.4999962"),ke.appendChild(Oe),ke.appendChild(Ae),T.appendChild(I),T.appendChild($),T.appendChild(J),T.appendChild(Me),T.appendChild(ke),u.appendChild(T),u.setAttributeNS(null,"height",f*this._scale+"px"),u.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(u),this._offset=l.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),rp(this._element,this._anchor,"marker"),r&&r.className)for(const u of r.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.L.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(r){return this._offset=l.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const gr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let pr=0,Cl=!1;const Ou={maxWidth:100,unit:"metric"};function Fu(y,r,u){const f=u&&u.maxWidth||100,m=y._container.clientHeight/2,_=y.unproject([0,m]),T=y.unproject([f,m]),I=_.distanceTo(T);if(u&&u.unit==="imperial"){const M=3.2808*I;M>5280?Ma(r,f,M/5280,y._getUIString("ScaleControl.Miles")):Ma(r,f,M,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Ma(r,f,I/1852,y._getUIString("ScaleControl.NauticalMiles")):I>=1e3?Ma(r,f,I/1e3,y._getUIString("ScaleControl.Kilometers")):Ma(r,f,I,y._getUIString("ScaleControl.Meters"))}function Ma(y,r,u,f){const m=function(_){const T=Math.pow(10,`${Math.floor(_)}`.length-1);let I=_/T;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(M){const $=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*$)/$}(I),T*I}(u);y.style.width=r*(m/u)+"px",y.innerHTML=`${m}&nbsp;${f}`}const ef={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},tf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Il(y){if(y){if(typeof y=="number"){const r=Math.round(Math.abs(y)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,y),"top-left":new l.P(r,r),"top-right":new l.P(-r,r),bottom:new l.P(0,-y),"bottom-left":new l.P(r,-r),"bottom-right":new l.P(-r,-r),left:new l.P(y,0),right:new l.P(-y,0)}}if(y instanceof l.P||Array.isArray(y)){const r=l.P.convert(y);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.P.convert(y.center||[0,0]),top:l.P.convert(y.top||[0,0]),"top-left":l.P.convert(y["top-left"]||[0,0]),"top-right":l.P.convert(y["top-right"]||[0,0]),bottom:l.P.convert(y.bottom||[0,0]),"bottom-left":l.P.convert(y["bottom-left"]||[0,0]),"bottom-right":l.P.convert(y["bottom-right"]||[0,0]),left:l.P.convert(y.left||[0,0]),right:l.P.convert(y.right||[0,0])}}return Il(new l.P(0,0))}const nf={extend:(y,...r)=>l.e(y,...r),run(y){y()},logToElement(y,r=!1,u="log"){const f=window.document.getElementById(u);f&&(r&&(f.innerHTML=""),f.innerHTML+=`<br>${y}`)}},rf=b;class $n{static get version(){return rf}static get workerCount(){return et.workerCount}static set workerCount(r){et.workerCount=r}static get maxParallelImageRequests(){return l.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(r){l.c.MAX_PARALLEL_IMAGE_REQUESTS=r}static get workerUrl(){return l.c.WORKER_URL}static set workerUrl(r){l.c.WORKER_URL=r}static addProtocol(r,u){l.c.REGISTERED_PROTOCOLS[r]=u}static removeProtocol(r){delete l.c.REGISTERED_PROTOCOLS[r]}}return $n.Map=class extends Qd{constructor(y){if(l.bg.mark(l.bh.create),(y=l.e({},an,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Qi(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=r=>{this._onCooperativeGesture(r,r[this._metaKey],1)},this._contextLost=r=>{r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Sc,this._controls=[],this._mapId=l.a2(),this._locale=l.e({},Kh,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=ce.addThrottleControl(()=>this.isMoving()),this._requestManager=new H(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const u=Yo(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{r?u(f):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new qh(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Aa(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,l.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new to({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new lr,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new l.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new l.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new l.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(y,r){if(r===void 0&&(r=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(y);return r>-1&&this._controls.splice(r,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,r,u,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,r,u,f)}resize(y){var r;const u=this._containerDimensions(),f=u[0],m=u[1],_=this._getClampedPixelRatio(f,m);if(this._resizeCanvas(f,m,_),this.painter.resize(f,m,_),this.painter.overLimit()){const I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];const M=this._getClampedPixelRatio(f,m);this._resizeCanvas(f,m,M),this.painter.resize(f,m,M)}this.transform.resize(f,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,m);const T=!this._moving;return T&&(this.stop(),this.fire(new l.k("movestart",y)).fire(new l.k("move",y))),this.fire(new l.k("resize",y)),T&&this.fire(new l.k("moveend",y)),this}_getClampedPixelRatio(y,r){const{0:u,1:f}=this._maxCanvasSize,m=this.getPixelRatio(),_=y*m,T=r*m;return Math.min(_>u?u/_:1,T>f?f/T:1)*m}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Ie.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(l.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(l.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,r,u){if(y==="mouseenter"||y==="mouseover"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:_=>{const T=this.getLayer(r)?this.queryRenderedFeatures(_.point,{layers:[r]}):[];T.length?f||(f=!0,u.call(this,new it(y,this,_.originalEvent,{features:T}))):f=!1},mouseout:()=>{f=!1}}}}if(y==="mouseleave"||y==="mouseout"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:T=>{(this.getLayer(r)?this.queryRenderedFeatures(T.point,{layers:[r]}):[]).length?f=!0:f&&(f=!1,u.call(this,new it(y,this,T.originalEvent)))},mouseout:T=>{f&&(f=!1,u.call(this,new it(y,this,T.originalEvent)))}}}}{const f=m=>{const _=this.getLayer(r)?this.queryRenderedFeatures(m.point,{layers:[r]}):[];_.length&&(m.features=_,u.call(this,m),delete m.features)};return{layer:r,listener:u,delegates:{[y]:f}}}}on(y,r,u){if(u===void 0)return super.on(y,r);const f=this._createDelegatedListener(y,r,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(f);for(const m in f.delegates)this.on(m,f.delegates[m]);return this}once(y,r,u){if(u===void 0)return super.once(y,r);const f=this._createDelegatedListener(y,r,u);for(const m in f.delegates)this.once(m,f.delegates[m]);return this}off(y,r,u){return u===void 0?super.off(y,r):(this._delegatedListeners&&this._delegatedListeners[y]&&(f=>{const m=this._delegatedListeners[y];for(let _=0;_<m.length;_++){const T=m[_];if(T.layer===r&&T.listener===u){for(const I in T.delegates)this.off(I,T.delegates[I]);return m.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,r){if(!this.style)return[];let u;const f=y instanceof l.P||Array.isArray(y),m=f?y:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:y)||{},m instanceof l.P||typeof m[0]=="number")u=[l.P.convert(m)];else{const _=l.P.convert(m[0]),T=l.P.convert(m[1]);u=[_,new l.P(T.x,_.y),T,new l.P(_.x,T.y),_]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(y,r){return this.style.querySourceFeatures(y,r)}setStyle(y,r){return(r=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(y,r))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const r=this._locale[y];if(r==null)throw new Error(`Missing UI string '${y}'`);return r}_updateStyle(y,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,r));const u=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new $r(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,r,u):this.style.loadJSON(y,r,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new $r(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,r){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,K.Style);l.f(u,(f,m)=>{f?this.fire(new l.j(f)):m&&this._updateDiff(m,r)})}else typeof y=="object"&&this._updateDiff(y,r)}_updateDiff(y,r){try{this.style.setState(y,r)&&this._update(!0)}catch(u){l.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(y,r){return this._lazyInitEmptyStyle(),this.style.addSource(y,r),this._update(!0)}isSourceLoaded(y){const r=this.style&&this.style.sourceCaches[y];if(r!==void 0)return r.loaded();this.fire(new l.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const r=this.style.sourceCaches[y.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const f=this.style._layers[u];f.type==="hillshade"&&f.source===y.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new np(this.painter,r,y),this.painter.renderToTexture=new Ec(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:y})),this}getTerrain(){var y,r;return(r=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const r in y){const u=y[r]._tiles;for(const f in u){const m=u[f];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(y,r,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,r,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,r,u={}){const{pixelRatio:f=1,sdf:m=!1,stretchX:_,stretchY:T,content:I}=u;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||l.a(r))){if(r.width===void 0||r.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:M,height:$,data:q}=r,J=r;return this.style.addImage(y,{data:new l.R({width:M,height:$},new Uint8Array(q)),pixelRatio:f,stretchX:_,stretchY:T,content:I,sdf:m,version:0,userImage:J}),J.onAdd&&J.onAdd(this,y),this}}{const{width:M,height:$,data:q}=l.h.getImageData(r);this.style.addImage(y,{data:new l.R({width:M,height:$},q),pixelRatio:f,stretchX:_,stretchY:T,content:I,sdf:m,version:0})}}updateImage(y,r){const u=this.style.getImage(y);if(!u)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||l.a(r)?l.h.getImageData(r):r,{width:m,height:_,data:T}=f;if(m===void 0||_===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||_!==u.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(r instanceof HTMLImageElement||l.a(r));return u.data.replace(T,I),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,r){ce.getImage(this._requestManager.transformRequest(y,K.Image),r)}listImages(){return this.style.listImages()}addLayer(y,r){return this._lazyInitEmptyStyle(),this.style.addLayer(y,r),this._update(!0)}moveLayer(y,r){return this.style.moveLayer(y,r),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,r,u){return this.style.setLayerZoomRange(y,r,u),this._update(!0)}setFilter(y,r,u={}){return this.style.setFilter(y,r,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,r,u,f={}){return this.style.setPaintProperty(y,r,u,f),this._update(!0)}getPaintProperty(y,r){return this.style.getPaintProperty(y,r)}setLayoutProperty(y,r,u,f={}){return this.style.setLayoutProperty(y,r,u,f),this._update(!0)}getLayoutProperty(y,r){return this.style.getLayoutProperty(y,r)}setGlyphs(y,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,r,u,f=>{f||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,r,u=>{u||this._update(!0)}),this}setLight(y,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,r){return this.style.setFeatureState(y,r),this._update()}removeFeatureState(y,r){return this.style.removeFeatureState(y,r),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,r=0;return this._container&&(y=this._container.clientWidth||400,r=this._container.clientHeight||300),[y,r]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const r=this._canvasContainer=w.create("div","maplibregl-canvas-container",y);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),f=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],f);const m=this._controlContainer=w.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{_[T]=w.create("div",`maplibregl-ctrl-${T} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,r,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*r),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:y},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new Ko(u,this.transform),A.testSupport(u)}_onCooperativeGesture(y,r,u){return!r&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,_=l.h.now();this.style.zoomHistory.update(m,_);const T=new l.a8(m,{now:_,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=T.crossFadingFactor();I===1&&I===this._crossFadingFactor||(u=!0,this._crossFadingFactor=I),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bg.mark(l.bh.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,l.bg.mark(l.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ce.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.bg.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.h.frame(y=>{l.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return qt}getCameraTargetElevation(){return this.transform.elevation}},$n.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const r=this._map.getZoom(),u=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,u)=>{const f=this._map._getUIString(`NavigationControl.${u}`);r.title=f,r.setAttribute("aria-label",f)},this.options=l.e({},Yh,y),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Jh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,r){const u=w.create("button",y,this._container);return u.type="button",u.addEventListener("click",r),u}},$n.GeolocateControl=class extends l.E{constructor(y){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const u=new l.L(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,m=this._map.getBearing(),_=l.e({bearing:m},this.options.fitBoundsOptions),T=Ie.fromLngLat(u,f);this._map.fitBounds(T,_,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const u=new l.L(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Cl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ka({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ka({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},gr,y)}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,u=!1){Ir===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{Ir=f.state!=="denied",r(Ir)}).catch(()=>{Ir=!!window.navigator.geolocation,r(Ir)}):(Ir=!!window.navigator.geolocation,r(Ir)):r(Ir)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,pr=0,Cl=!1}_isOutOfMapMaxBounds(y){const r=this._map.getMaxBounds(),u=y.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),r=y.getSouthEast(),u=y.getNorthEast(),f=r.distanceTo(u),m=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pr--,Cl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),pr++,pr>1?(y={maximumAge:6e5,timeout:0},Cl=!0):(y=this.options.positionOptions,Cl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},$n.AttributionControl=to,$n.LogoControl=lr,$n.ScaleControl=class{constructor(y){this._onMove=()=>{Fu(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Fu(this._map,this._container,this.options)},this.options=l.e({},Ou,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},$n.FullscreenControl=class extends l.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},$n.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},$n.Popup=class extends l.E{constructor(y){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.k("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Qh(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const u=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let f=this.options.anchor;const m=Il(this.options.offset);if(!f){const T=this._container.offsetWidth,I=this._container.offsetHeight;let M;M=u.y+m.bottom.y<I?["top"]:u.y>this._map.transform.height-I?["bottom"]:[],u.x<T/2?M.push("left"):u.x>this._map.transform.width-T/2&&M.push("right"),f=M.length===0?"bottom":M.join("-")}const _=u.add(m[f]).round();w.setTransform(this._container,`${_o[f]} translate(${_.x}px,${_.y}px)`),rp(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(ef),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=l.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const r=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=y;f=u.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(tf);y&&y.focus()}},$n.Marker=ka,$n.Style=$r,$n.LngLat=l.L,$n.LngLatBounds=Ie,$n.Point=l.P,$n.MercatorCoordinate=l.U,$n.Evented=l.E,$n.AJAXError=l.bi,$n.config=l.c,$n.CanvasSource=St,$n.GeoJSONSource=ct,$n.ImageSource=It,$n.RasterDEMTileSource=nt,$n.RasterTileSource=Ze,$n.VectorTileSource=We,$n.VideoSource=ft,$n.setRTLTextPlugin=l.bj,$n.getRTLTextPluginStatus=l.bk,$n.prewarm=function(){L().acquire(Be)},$n.clearPrewarmedResources=function(){const y=le;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Be),le=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},nf.extend($n,{isSafari:l.ac,getPerformanceMetrics:l.bg.getPerformanceMetrics}),$n});var g=c;return g})})(EC);var CC=EC.exports;const IC=zd(CC),K3=Ek({__proto__:null,default:IC},[CC]),Y3="modulepreload",J3=function(e){return"/osm-address-editor-vite/"+e},v2={},Q3=function(t,i,a){let c=Promise.resolve();if(i&&i.length>0){const d=document.getElementsByTagName("link");c=Promise.all(i.map(g=>{if(g=J3(g),g in v2)return;v2[g]=!0;const l=g.endsWith(".css"),b=l?'[rel="stylesheet"]':"";if(!!a)for(let S=d.length-1;S>=0;S--){const k=d[S];if(k.href===g&&(!l||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${b}`))return;const A=document.createElement("link");if(A.rel=l?"stylesheet":Y3,l||(A.as="script",A.crossOrigin=""),A.href=g,document.head.appendChild(A),l)return new Promise((S,k)=>{A.addEventListener("load",S),A.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${g}`)))})}))}return c.then(()=>t()).catch(d=>{const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d})},e4=yt.createContext(null);function t4(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===d}function Bo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Bo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Bo(e[c],t[c]))return!1;return!0}return!1}function n4(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function _2(e,t){if(!e.getProjection)return;const i=e.getProjection(),a=t.getProjection();Bo(i,a)||t.setProjection(i)}function x2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function w2(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const r4=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function b2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const d=t[a.ref];if(d){c=c||Object.assign({},a),delete c.ref;for(const g of r4)g in d&&(c[g]=d[g])}return c||a});return{...e,layers:i}}var S2={};const E2={version:8,sources:{},layers:[]},T2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},I0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},C2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},i4=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],o4=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Sh{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const d=this.props[C2[c.type]];d?d(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[T2[c.type]];d&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),d(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const d=this.props[I0[c.type]];d&&d(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=Sh.savedMaps.pop();if(!a)return null;const c=a.map,d=c.getContainer();for(i.className=d.className;d.childNodes.length>0;)i.appendChild(d.childNodes[0]);c._container=i;const g=c._resizeObserver;g&&(g.disconnect(),g.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:l}=t;return l&&(l.bounds?c.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):a._updateViewState(l,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=E2}=i,c={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||s4()||null,container:t,style:b2(a)},d=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),i.gl){const A=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=A,i.gl)}const g=new this._MapClass(c);d.padding&&g.setPadding(d.padding),i.cursor&&(g.getCanvas().style.cursor=i.cursor),this._createShadowTransform(g);const l=g._render;g._render=A=>{this._inRender=!0,l.call(g,A),this._inRender=!1};const b=g._renderTaskQueue.run;g._renderTaskQueue.run=A=>{b.call(g._renderTaskQueue,A),this._onBeforeRepaint()},g.on("render",()=>this._onAfterRepaint());const w=g.fire;g.fire=this._fireEvent.bind(this,w),g.on("resize",()=>{this._renderTransform.resize(g.transform.width,g.transform.height)}),g.on("styledata",()=>{this._updateStyleComponents(this.props,{}),_2(g.transform,this._renderTransform)}),g.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const A in T2)g.on(A,this._onPointerEvent);for(const A in I0)g.on(A,this._onCameraEvent);for(const A in C2)g.on(A,this._onEvent);this._map=g}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),Sh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=n4(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:d,pitch:g,bearing:l}=c,b=a.isMoving();b&&(c.cameraElevationReference="sea");const w=w2(c,{...x2(a.transform),...t});if(b&&(c.cameraElevationReference="ground"),w&&i){const A=this._deferredEvents;A.move=!0,A.zoom||(A.zoom=d!==c.zoom),A.rotate||(A.rotate=l!==c.bearing),A.pitch||(A.pitch=g!==c.pitch)}return b||w2(a.transform,t),w}_updateSettings(t,i){const a=this._map;let c=!1;for(const d of i4)if(d in t&&!Bo(t[d],i[d])){c=!0;const g=a[`set${d[0].toUpperCase()}${d.slice(1)}`];g==null||g.call(a,t[d])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=E2,styleDiffing:c=!0}=t,d={diff:c};return"localIdeographFontFamily"in t&&(d.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(b2(a),d),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!Bo(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!Bo(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!Bo(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){var a,c;const d=this._map;let g=!1;for(const l of o4){const b=(a=t[l])!==null&&a!==void 0?a:!0,w=(c=i[l])!==null&&c!==void 0?c:!0;Bo(b,w)||(g=!0,b?d[l].enable(b):d[l].disable())}return g}_queryRenderedFeatures(t){const i=this._map,a=i.transform,{interactiveLayerIds:c=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:c.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=a}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const d=t.type,g=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,l=this._queryRenderedFeatures(t.point),b=l.length>0;!b&&g&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,b&&!g&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,d=c.transform,g=typeof i=="string"?i:i.type;return g==="move"&&this._updateViewState(this.props,!1),g in I0&&(typeof i=="object"&&(i.viewState=x2(d)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=d,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{_2(this._renderTransform,i),t.transform=i}}}Sh.savedMaps=[];function s4(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||S2.MapboxAccessToken}catch{}try{e=e||S2.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const a4=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function l4(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const c=t.transform;t.transform=e.transform;const d=t.project(a);return t.transform=c,d},unproject:a=>{const c=t.transform;t.transform=e.transform;const d=t.unproject(a);return t.transform=c,d},queryTerrainElevation:(a,c)=>{const d=t.transform;t.transform=e.transform;const g=t.queryTerrainElevation(a,c);return t.transform=d,g},queryRenderedFeatures:(a,c)=>{const d=t.transform;t.transform=e.transform;const g=t.queryRenderedFeatures(a,c);return t.transform=d,g}};for(const a of u4(t))!(a in i)&&!a4.includes(a)&&(i[a]=t[a].bind(t));return i}function u4(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const c4=typeof document<"u"?yt.useLayoutEffect:yt.useEffect,h4=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function f4(e,t){for(const a of h4)a in t&&(e[a]=t[a]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,a=>{a&&console.error(a)},!0)}const Lh=yt.createContext(null);function d4(e,t,i){const a=yt.useContext(e4),[c,d]=yt.useState(null),g=yt.useRef(),{current:l}=yt.useRef({mapLib:null,map:null});yt.useEffect(()=>{const A=e.mapLib;let S=!0,k;return Promise.resolve(A||i).then(O=>{if(!S)return;if(!O)throw new Error("Invalid mapLib");const N="Map"in O?O:O.default;if(!N.Map)throw new Error("Invalid mapLib");if(f4(N,e),!N.supported||N.supported(e))e.reuseMaps&&(k=Sh.reuse(e,g.current)),k||(k=new Sh(N.Map,e,g.current)),l.map=l4(k),l.mapLib=N,d(k),a==null||a.onMapMount(l.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(O=>{const{onError:N}=e;N?N({type:"error",target:null,originalEvent:null,error:O}):console.error(O)}),()=>{S=!1,k&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?k.recycle():k.destroy())}},[]),c4(()=>{c&&c.setProps(e)}),yt.useImperativeHandle(t,()=>l.map,[c]);const b=yt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),w={height:"100%"};return yt.createElement("div",{id:e.id,ref:g,style:b},c&&yt.createElement(Lh.Provider,{value:l},yt.createElement("div",{"mapboxgl-children":"",style:w},e.children)))}const p4=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function lc(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!p4.test(a)?i[a]=`${c}px`:i[a]=c}}function m4(e,t){const{map:i,mapLib:a}=yt.useContext(Lh),c=yt.useRef({props:e});c.current.props=e;const d=yt.useMemo(()=>{let R=!1;yt.Children.forEach(e.children,H=>{H&&(R=!0)});const ce={...e,element:R?document.createElement("div"):null},K=new a.Marker(ce);return K.setLngLat([e.longitude,e.latitude]),K.getElement().addEventListener("click",H=>{var G,se;(se=(G=c.current.props).onClick)===null||se===void 0||se.call(G,{type:"click",target:K,originalEvent:H})}),K.on("dragstart",H=>{var G,se;const X=H;X.lngLat=d.getLngLat(),(se=(G=c.current.props).onDragStart)===null||se===void 0||se.call(G,X)}),K.on("drag",H=>{var G,se;const X=H;X.lngLat=d.getLngLat(),(se=(G=c.current.props).onDrag)===null||se===void 0||se.call(G,X)}),K.on("dragend",H=>{var G,se;const X=H;X.lngLat=d.getLngLat(),(se=(G=c.current.props).onDragEnd)===null||se===void 0||se.call(G,X)}),K},[]);yt.useEffect(()=>(d.addTo(i.getMap()),()=>{d.remove()}),[]);const{longitude:g,latitude:l,offset:b,style:w,draggable:A=!1,popup:S=null,rotation:k=0,rotationAlignment:O="auto",pitchAlignment:N="auto"}=e;return yt.useEffect(()=>{lc(d.getElement(),w)},[w]),yt.useImperativeHandle(t,()=>d,[]),(d.getLngLat().lng!==g||d.getLngLat().lat!==l)&&d.setLngLat([g,l]),b&&!t4(d.getOffset(),b)&&d.setOffset(b),d.isDraggable()!==A&&d.setDraggable(A),d.getRotation()!==k&&d.setRotation(k),d.getRotationAlignment()!==O&&d.setRotationAlignment(O),d.getPitchAlignment()!==N&&d.setPitchAlignment(N),d.getPopup()!==S&&d.setPopup(S),N1.createPortal(e.children,d.getElement())}const g4=yt.memo(yt.forwardRef(m4));function I2(e){return new Set(e?e.trim().split(/\s+/):[])}function y4(e,t){const{map:i,mapLib:a}=yt.useContext(Lh),c=yt.useMemo(()=>document.createElement("div"),[]),d=yt.useRef({props:e});d.current.props=e;const g=yt.useMemo(()=>{const l={...e},b=new a.Popup(l);return b.setLngLat([e.longitude,e.latitude]),b.once("open",w=>{var A,S;(S=(A=d.current.props).onOpen)===null||S===void 0||S.call(A,w)}),b},[]);if(yt.useEffect(()=>{const l=b=>{var w,A;(A=(w=d.current.props).onClose)===null||A===void 0||A.call(w,b)};return g.on("close",l),g.setDOMContent(c).addTo(i.getMap()),()=>{g.off("close",l),g.isOpen()&&g.remove()}},[]),yt.useEffect(()=>{lc(g.getElement(),e.style)},[e.style]),yt.useImperativeHandle(t,()=>g,[]),g.isOpen()&&((g.getLngLat().lng!==e.longitude||g.getLngLat().lat!==e.latitude)&&g.setLngLat([e.longitude,e.latitude]),e.offset&&!Bo(g.options.offset,e.offset)&&g.setOffset(e.offset),(g.options.anchor!==e.anchor||g.options.maxWidth!==e.maxWidth)&&(g.options.anchor=e.anchor,g.setMaxWidth(e.maxWidth)),g.options.className!==e.className)){const l=I2(g.options.className),b=I2(e.className);for(const w of l)b.has(w)||g.removeClassName(w);for(const w of b)l.has(w)||g.addClassName(w);g.options.className=e.className}return N1.createPortal(e.children,c)}yt.memo(yt.forwardRef(y4));function Bd(e,t,i,a){const c=yt.useContext(Lh),d=yt.useMemo(()=>e(c),[]);return yt.useEffect(()=>{const g=a||i||t,l=typeof t=="function"&&typeof i=="function"?t:null,b=typeof i=="function"?i:typeof t=="function"?t:null,{map:w}=c;return w.hasControl(d)||(w.addControl(d,g==null?void 0:g.position),l&&l(c)),()=>{b&&b(c),w.hasControl(d)&&w.removeControl(d)}},[]),d}function v4(e){const t=Bd(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return yt.useEffect(()=>{lc(t._container,e.style)},[e.style]),null}yt.memo(v4);function _4(e){const t=Bd(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return yt.useEffect(()=>{lc(t._controlContainer,e.style)},[e.style]),null}yt.memo(_4);function x4(e,t){const i=yt.useRef({props:e}),a=Bd(({mapLib:c})=>{const d=new c.GeolocateControl(e),g=d._setupUI;return d._setupUI=l=>{d._container.hasChildNodes()||g(l)},d.on("geolocate",l=>{var b,w;(w=(b=i.current.props).onGeolocate)===null||w===void 0||w.call(b,l)}),d.on("error",l=>{var b,w;(w=(b=i.current.props).onError)===null||w===void 0||w.call(b,l)}),d.on("outofmaxbounds",l=>{var b,w;(w=(b=i.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationstart",l=>{var b,w;(w=(b=i.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationend",l=>{var b,w;(w=(b=i.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,l)}),d},{position:e.position});return i.current.props=e,yt.useImperativeHandle(t,()=>a,[]),yt.useEffect(()=>{lc(a._container,e.style)},[e.style]),null}const w4=yt.memo(yt.forwardRef(x4));function b4(e){const t=Bd(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return yt.useEffect(()=>{lc(t._container,e.style)},[e.style]),null}const S4=yt.memo(b4);function E4(e){const t=Bd(({mapLib:d})=>new d.ScaleControl(e),{position:e.position}),i=yt.useRef(e),a=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),yt.useEffect(()=>{lc(t._container,c)},[c]),null}yt.memo(E4);function tg(e,t){if(!e)throw new Error(t)}function T4(e,t,i,a){if(tg(i.id===a.id,"layer id changed"),tg(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:d={},filter:g,minzoom:l,maxzoom:b,beforeId:w}=i;if(w!==a.beforeId&&e.moveLayer(t,w),c!==a.layout){const A=a.layout||{};for(const S in c)Bo(c[S],A[S])||e.setLayoutProperty(t,S,c[S]);for(const S in A)c.hasOwnProperty(S)||e.setLayoutProperty(t,S,void 0)}if(d!==a.paint){const A=a.paint||{};for(const S in d)Bo(d[S],A[S])||e.setPaintProperty(t,S,d[S]);for(const S in A)d.hasOwnProperty(S)||e.setPaintProperty(t,S,void 0)}Bo(g,a.filter)||e.setFilter(t,g),(l!==a.minzoom||b!==a.maxzoom)&&e.setLayerZoomRange(t,l,b)}function C4(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let I4=0;function A4(e){const t=yt.useContext(Lh).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-layer-${I4++}`,[]);if(yt.useEffect(()=>{if(t){const g=()=>a(l=>l+1);return t.on("styledata",g),g(),()=>{t.off("styledata",g),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{T4(t,c,e,i.current)}catch(g){console.warn(g)}else C4(t,c,e);return i.current=e,null}let P4=0;function k4(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function M4(e,t,i){tg(t.id===i.id,"source id changed"),tg(t.type===i.type,"source type changed");let a="",c=0;for(const g in t)g!=="children"&&g!=="id"&&!Bo(i[g],t[g])&&(a=g,c++);if(!c)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function L4(e){const t=yt.useContext(Lh).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-source-${P4++}`,[]);yt.useEffect(()=>{if(t){const g=()=>setTimeout(()=>a(l=>l+1),0);return t.on("styledata",g),g(),()=>{var l;if(t.off("styledata",g),t.style&&t.style._loaded&&t.getSource(c)){const b=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(b)for(const w of b)w.source===c&&t.removeLayer(w.id);t.removeSource(c)}}}},[t]);let d=t&&t.style&&t.getSource(c);return d?M4(d,e,i.current):d=k4(t,c,e),i.current=e,d&&yt.Children.map(e.children,g=>g&&yt.cloneElement(g,{source:c}))||null}const z4=Q3(()=>Promise.resolve().then(()=>K3),void 0),O4=yt.forwardRef(function(t,i){return d4(t,i,z4)}),F4=g4,R4=S4,j4=w4,D4=A4,B4=L4;function A2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Kt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?A2(Object(i),!0).forEach(function(a){hi(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):A2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function ng(e){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function N4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P2(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function U4(e,t,i){return t&&P2(e.prototype,t),i&&P2(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function hi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function U1(e,t){return V4(e)||Z4(e,t)||AC(e,t)||W4()}function Nd(e){return $4(e)||G4(e)||AC(e)||H4()}function $4(e){if(Array.isArray(e))return Qv(e)}function V4(e){if(Array.isArray(e))return e}function G4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Z4(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],c=!0,d=!1,g,l;try{for(i=i.call(e);!(c=(g=i.next()).done)&&(a.push(g.value),!(t&&a.length===t));c=!0);}catch(b){d=!0,l=b}finally{try{!c&&i.return!=null&&i.return()}finally{if(d)throw l}}return a}}function AC(e,t){if(e){if(typeof e=="string")return Qv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Qv(e,t)}}function Qv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function H4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var k2=function(){},$1={},PC={},kC=null,MC={mark:k2,measure:k2};try{typeof window<"u"&&($1=window),typeof document<"u"&&(PC=document),typeof MutationObserver<"u"&&(kC=MutationObserver),typeof performance<"u"&&(MC=performance)}catch{}var X4=$1.navigator||{},M2=X4.userAgent,L2=M2===void 0?"":M2,ru=$1,xr=PC,z2=kC,Gp=MC;ru.document;var nl=!!xr.documentElement&&!!xr.head&&typeof xr.addEventListener=="function"&&typeof xr.createElement=="function",LC=~L2.indexOf("MSIE")||~L2.indexOf("Trident/"),Zp,Hp,Wp,Xp,qp,Ya="___FONT_AWESOME___",e_=16,zC="fa",OC="svg-inline--fa",nc="data-fa-i2svg",t_="data-fa-pseudo-element",q4="data-fa-pseudo-element-pending",V1="data-prefix",G1="data-icon",O2="fontawesome-i2svg",K4="async",Y4=["HTML","HEAD","STYLE","SCRIPT"],FC=function(){try{return!0}catch{return!1}}(),vr="classic",Br="sharp",Z1=[vr,Br];function Ud(e){return new Proxy(e,{get:function(i,a){return a in i?i[a]:i[vr]}})}var Ed=Ud((Zp={},hi(Zp,vr,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),hi(Zp,Br,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),Zp)),Td=Ud((Hp={},hi(Hp,vr,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),hi(Hp,Br,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),Hp)),Cd=Ud((Wp={},hi(Wp,vr,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),hi(Wp,Br,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),Wp)),J4=Ud((Xp={},hi(Xp,vr,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),hi(Xp,Br,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),Xp)),Q4=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,RC="fa-layers-text",eL=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,tL=Ud((qp={},hi(qp,vr,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),hi(qp,Br,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),qp)),jC=[1,2,3,4,5,6,7,8,9,10],nL=jC.concat([11,12,13,14,15,16,17,18,19,20]),rL=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Wu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Id=new Set;Object.keys(Td[vr]).map(Id.add.bind(Id));Object.keys(Td[Br]).map(Id.add.bind(Id));var iL=[].concat(Z1,Nd(Id),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Wu.GROUP,Wu.SWAP_OPACITY,Wu.PRIMARY,Wu.SECONDARY]).concat(jC.map(function(e){return"".concat(e,"x")})).concat(nL.map(function(e){return"w-".concat(e)})),ed=ru.FontAwesomeConfig||{};function oL(e){var t=xr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function sL(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(xr&&typeof xr.querySelector=="function"){var aL=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];aL.forEach(function(e){var t=U1(e,2),i=t[0],a=t[1],c=sL(oL(i));c!=null&&(ed[a]=c)})}var DC={styleDefault:"solid",familyDefault:"classic",cssPrefix:zC,replacementClass:OC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ed.familyPrefix&&(ed.cssPrefix=ed.familyPrefix);var Eh=Kt(Kt({},DC),ed);Eh.autoReplaceSvg||(Eh.observeMutations=!1);var rn={};Object.keys(DC).forEach(function(e){Object.defineProperty(rn,e,{enumerable:!0,set:function(i){Eh[e]=i,td.forEach(function(a){return a(rn)})},get:function(){return Eh[e]}})});Object.defineProperty(rn,"familyPrefix",{enumerable:!0,set:function(t){Eh.cssPrefix=t,td.forEach(function(i){return i(rn)})},get:function(){return Eh.cssPrefix}});ru.FontAwesomeConfig=rn;var td=[];function lL(e){return td.push(e),function(){td.splice(td.indexOf(e),1)}}var Rl=e_,ca={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function uL(e){if(!(!e||!nl)){var t=xr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=xr.head.childNodes,a=null,c=i.length-1;c>-1;c--){var d=i[c],g=(d.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(g)>-1&&(a=d)}return xr.head.insertBefore(t,a),e}}var cL="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Ad(){for(var e=12,t="";e-- >0;)t+=cL[Math.random()*62|0];return t}function zh(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function H1(e){return e.classList?zh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function BC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function hL(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(BC(e[i]),'" ')},"").trim()}function qg(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function W1(e){return e.size!==ca.size||e.x!==ca.x||e.y!==ca.y||e.rotate!==ca.rotate||e.flipX||e.flipY}function fL(e){var t=e.transform,i=e.containerWidth,a=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},d="translate(".concat(t.x*32,", ").concat(t.y*32,") "),g="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),b={transform:"".concat(d," ").concat(g," ").concat(l)},w={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:b,path:w}}function dL(e){var t=e.transform,i=e.width,a=i===void 0?e_:i,c=e.height,d=c===void 0?e_:c,g=e.startCentered,l=g===void 0?!1:g,b="";return l&&LC?b+="translate(".concat(t.x/Rl-a/2,"em, ").concat(t.y/Rl-d/2,"em) "):l?b+="translate(calc(-50% + ".concat(t.x/Rl,"em), calc(-50% + ").concat(t.y/Rl,"em)) "):b+="translate(".concat(t.x/Rl,"em, ").concat(t.y/Rl,"em) "),b+="scale(".concat(t.size/Rl*(t.flipX?-1:1),", ").concat(t.size/Rl*(t.flipY?-1:1),") "),b+="rotate(".concat(t.rotate,"deg) "),b}var pL=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function NC(){var e=zC,t=OC,i=rn.cssPrefix,a=rn.replacementClass,c=pL;if(i!==e||a!==t){var d=new RegExp("\\.".concat(e,"\\-"),"g"),g=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");c=c.replace(d,".".concat(i,"-")).replace(g,"--".concat(i,"-")).replace(l,".".concat(a))}return c}var F2=!1;function A0(){rn.autoAddCss&&!F2&&(uL(NC()),F2=!0)}var mL={mixout:function(){return{dom:{css:NC,insertCss:A0}}},hooks:function(){return{beforeDOMElementCreation:function(){A0()},beforeI2svg:function(){A0()}}}},Ja=ru||{};Ja[Ya]||(Ja[Ya]={});Ja[Ya].styles||(Ja[Ya].styles={});Ja[Ya].hooks||(Ja[Ya].hooks={});Ja[Ya].shims||(Ja[Ya].shims=[]);var js=Ja[Ya],UC=[],gL=function e(){xr.removeEventListener("DOMContentLoaded",e),rg=1,UC.map(function(t){return t()})},rg=!1;nl&&(rg=(xr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(xr.readyState),rg||xr.addEventListener("DOMContentLoaded",gL));function yL(e){nl&&(rg?setTimeout(e,0):UC.push(e))}function $d(e){var t=e.tag,i=e.attributes,a=i===void 0?{}:i,c=e.children,d=c===void 0?[]:c;return typeof e=="string"?BC(e):"<".concat(t," ").concat(hL(a),">").concat(d.map($d).join(""),"</").concat(t,">")}function R2(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var vL=function(t,i){return function(a,c,d,g){return t.call(i,a,c,d,g)}},P0=function(t,i,a,c){var d=Object.keys(t),g=d.length,l=c!==void 0?vL(i,c):i,b,w,A;for(a===void 0?(b=1,A=t[d[0]]):(b=0,A=a);b<g;b++)w=d[b],A=l(A,t[w],w,t);return A};function _L(e){for(var t=[],i=0,a=e.length;i<a;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){var d=e.charCodeAt(i++);(d&64512)==56320?t.push(((c&1023)<<10)+(d&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function n_(e){var t=_L(e);return t.length===1?t[0].toString(16):null}function xL(e,t){var i=e.length,a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function j2(e){return Object.keys(e).reduce(function(t,i){var a=e[i],c=!!a.icon;return c?t[a.iconName]=a.icon:t[i]=a,t},{})}function r_(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,c=a===void 0?!1:a,d=j2(t);typeof js.hooks.addPack=="function"&&!c?js.hooks.addPack(e,j2(t)):js.styles[e]=Kt(Kt({},js.styles[e]||{}),d),e==="fas"&&r_("fa",t)}var Kp,Yp,Jp,nh=js.styles,wL=js.shims,bL=(Kp={},hi(Kp,vr,Object.values(Cd[vr])),hi(Kp,Br,Object.values(Cd[Br])),Kp),X1=null,$C={},VC={},GC={},ZC={},HC={},SL=(Yp={},hi(Yp,vr,Object.keys(Ed[vr])),hi(Yp,Br,Object.keys(Ed[Br])),Yp);function EL(e){return~iL.indexOf(e)}function TL(e,t){var i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!EL(c)?c:null}var WC=function(){var t=function(d){return P0(nh,function(g,l,b){return g[b]=P0(l,d,{}),g},{})};$C=t(function(c,d,g){if(d[3]&&(c[d[3]]=g),d[2]){var l=d[2].filter(function(b){return typeof b=="number"});l.forEach(function(b){c[b.toString(16)]=g})}return c}),VC=t(function(c,d,g){if(c[g]=g,d[2]){var l=d[2].filter(function(b){return typeof b=="string"});l.forEach(function(b){c[b]=g})}return c}),HC=t(function(c,d,g){var l=d[2];return c[g]=g,l.forEach(function(b){c[b]=g}),c});var i="far"in nh||rn.autoFetchSvg,a=P0(wL,function(c,d){var g=d[0],l=d[1],b=d[2];return l==="far"&&!i&&(l="fas"),typeof g=="string"&&(c.names[g]={prefix:l,iconName:b}),typeof g=="number"&&(c.unicodes[g.toString(16)]={prefix:l,iconName:b}),c},{names:{},unicodes:{}});GC=a.names,ZC=a.unicodes,X1=Kg(rn.styleDefault,{family:rn.familyDefault})};lL(function(e){X1=Kg(e.styleDefault,{family:rn.familyDefault})});WC();function q1(e,t){return($C[e]||{})[t]}function CL(e,t){return(VC[e]||{})[t]}function Xu(e,t){return(HC[e]||{})[t]}function XC(e){return GC[e]||{prefix:null,iconName:null}}function IL(e){var t=ZC[e],i=q1("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function iu(){return X1}var K1=function(){return{prefix:null,iconName:null,rest:[]}};function Kg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.family,a=i===void 0?vr:i,c=Ed[a][e],d=Td[a][e]||Td[a][c],g=e in js.styles?e:null;return d||g||null}var D2=(Jp={},hi(Jp,vr,Object.keys(Cd[vr])),hi(Jp,Br,Object.keys(Cd[Br])),Jp);function Yg(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.skipLookups,c=a===void 0?!1:a,d=(t={},hi(t,vr,"".concat(rn.cssPrefix,"-").concat(vr)),hi(t,Br,"".concat(rn.cssPrefix,"-").concat(Br)),t),g=null,l=vr;(e.includes(d[vr])||e.some(function(w){return D2[vr].includes(w)}))&&(l=vr),(e.includes(d[Br])||e.some(function(w){return D2[Br].includes(w)}))&&(l=Br);var b=e.reduce(function(w,A){var S=TL(rn.cssPrefix,A);if(nh[A]?(A=bL[l].includes(A)?J4[l][A]:A,g=A,w.prefix=A):SL[l].indexOf(A)>-1?(g=A,w.prefix=Kg(A,{family:l})):S?w.iconName=S:A!==rn.replacementClass&&A!==d[vr]&&A!==d[Br]&&w.rest.push(A),!c&&w.prefix&&w.iconName){var k=g==="fa"?XC(w.iconName):{},O=Xu(w.prefix,w.iconName);k.prefix&&(g=null),w.iconName=k.iconName||O||w.iconName,w.prefix=k.prefix||w.prefix,w.prefix==="far"&&!nh.far&&nh.fas&&!rn.autoFetchSvg&&(w.prefix="fas")}return w},K1());return(e.includes("fa-brands")||e.includes("fab"))&&(b.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(b.prefix="fad"),!b.prefix&&l===Br&&(nh.fass||rn.autoFetchSvg)&&(b.prefix="fass",b.iconName=Xu(b.prefix,b.iconName)||b.iconName),(b.prefix==="fa"||g==="fa")&&(b.prefix=iu()||"fas"),b}var AL=function(){function e(){N4(this,e),this.definitions={}}return U4(e,[{key:"add",value:function(){for(var i=this,a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];var g=c.reduce(this._pullDefinitions,{});Object.keys(g).forEach(function(l){i.definitions[l]=Kt(Kt({},i.definitions[l]||{}),g[l]),r_(l,g[l]);var b=Cd[vr][l];b&&r_(b,g[l]),WC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var c=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(c).map(function(d){var g=c[d],l=g.prefix,b=g.iconName,w=g.icon,A=w[2];i[l]||(i[l]={}),A.length>0&&A.forEach(function(S){typeof S=="string"&&(i[l][S]=w)}),i[l][b]=w}),i}}]),e}(),B2=[],rh={},dh={},PL=Object.keys(dh);function kL(e,t){var i=t.mixoutsTo;return B2=e,rh={},Object.keys(dh).forEach(function(a){PL.indexOf(a)===-1&&delete dh[a]}),B2.forEach(function(a){var c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(function(g){typeof c[g]=="function"&&(i[g]=c[g]),ng(c[g])==="object"&&Object.keys(c[g]).forEach(function(l){i[g]||(i[g]={}),i[g][l]=c[g][l]})}),a.hooks){var d=a.hooks();Object.keys(d).forEach(function(g){rh[g]||(rh[g]=[]),rh[g].push(d[g])})}a.provides&&a.provides(dh)}),i}function i_(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var d=rh[e]||[];return d.forEach(function(g){t=g.apply(null,[t].concat(a))}),t}function rc(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=rh[e]||[];c.forEach(function(d){d.apply(null,i)})}function Qa(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return dh[e]?dh[e].apply(null,t):void 0}function o_(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||iu();if(t)return t=Xu(i,t)||t,R2(qC.definitions,i,t)||R2(js.styles,i,t)}var qC=new AL,ML=function(){rn.autoReplaceSvg=!1,rn.observeMutations=!1,rc("noAuto")},LL={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return nl?(rc("beforeI2svg",t),Qa("pseudoElements2svg",t),Qa("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;rn.autoReplaceSvg===!1&&(rn.autoReplaceSvg=!0),rn.observeMutations=!0,yL(function(){OL({autoReplaceSvgRoot:i}),rc("watch",t)})}},zL={icon:function(t){if(t===null)return null;if(ng(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Xu(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=Kg(t[0]);return{prefix:a,iconName:Xu(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(rn.cssPrefix,"-"))>-1||t.match(Q4))){var c=Yg(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||iu(),iconName:Xu(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var d=iu();return{prefix:d,iconName:Xu(d,t)||t}}}},Zo={noAuto:ML,config:rn,dom:LL,parse:zL,library:qC,findIconDefinition:o_,toHtml:$d},OL=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?xr:i;(Object.keys(js.styles).length>0||rn.autoFetchSvg)&&nl&&rn.autoReplaceSvg&&Zo.dom.i2svg({node:a})};function Jg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return $d(a)})}}),Object.defineProperty(e,"node",{get:function(){if(nl){var a=xr.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function FL(e){var t=e.children,i=e.main,a=e.mask,c=e.attributes,d=e.styles,g=e.transform;if(W1(g)&&i.found&&!a.found){var l=i.width,b=i.height,w={x:l/b/2,y:.5};c.style=qg(Kt(Kt({},d),{},{"transform-origin":"".concat(w.x+g.x/16,"em ").concat(w.y+g.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function RL(e){var t=e.prefix,i=e.iconName,a=e.children,c=e.attributes,d=e.symbol,g=d===!0?"".concat(t,"-").concat(rn.cssPrefix,"-").concat(i):d;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Kt(Kt({},c),{},{id:g}),children:a}]}]}function Y1(e){var t=e.icons,i=t.main,a=t.mask,c=e.prefix,d=e.iconName,g=e.transform,l=e.symbol,b=e.title,w=e.maskId,A=e.titleId,S=e.extra,k=e.watchable,O=k===void 0?!1:k,N=a.found?a:i,R=N.width,ce=N.height,K=c==="fak",H=[rn.replacementClass,d?"".concat(rn.cssPrefix,"-").concat(d):""].filter(function(D){return S.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(S.classes).join(" "),G={children:[],attributes:Kt(Kt({},S.attributes),{},{"data-prefix":c,"data-icon":d,class:H,role:S.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(R," ").concat(ce)})},se=K&&!~S.classes.indexOf("fa-fw")?{width:"".concat(R/ce*16*.0625,"em")}:{};O&&(G.attributes[nc]=""),b&&(G.children.push({tag:"title",attributes:{id:G.attributes["aria-labelledby"]||"title-".concat(A||Ad())},children:[b]}),delete G.attributes.title);var X=Kt(Kt({},G),{},{prefix:c,iconName:d,main:i,mask:a,maskId:w,transform:g,symbol:l,styles:Kt(Kt({},se),S.styles)}),V=a.found&&i.found?Qa("generateAbstractMask",X)||{children:[],attributes:{}}:Qa("generateAbstractIcon",X)||{children:[],attributes:{}},C=V.children,F=V.attributes;return X.children=C,X.attributes=F,l?RL(X):FL(X)}function N2(e){var t=e.content,i=e.width,a=e.height,c=e.transform,d=e.title,g=e.extra,l=e.watchable,b=l===void 0?!1:l,w=Kt(Kt(Kt({},g.attributes),d?{title:d}:{}),{},{class:g.classes.join(" ")});b&&(w[nc]="");var A=Kt({},g.styles);W1(c)&&(A.transform=dL({transform:c,startCentered:!0,width:i,height:a}),A["-webkit-transform"]=A.transform);var S=qg(A);S.length>0&&(w.style=S);var k=[];return k.push({tag:"span",attributes:w,children:[t]}),d&&k.push({tag:"span",attributes:{class:"sr-only"},children:[d]}),k}function jL(e){var t=e.content,i=e.title,a=e.extra,c=Kt(Kt(Kt({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),d=qg(a.styles);d.length>0&&(c.style=d);var g=[];return g.push({tag:"span",attributes:c,children:[t]}),i&&g.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),g}var k0=js.styles;function s_(e){var t=e[0],i=e[1],a=e.slice(4),c=U1(a,1),d=c[0],g=null;return Array.isArray(d)?g={tag:"g",attributes:{class:"".concat(rn.cssPrefix,"-").concat(Wu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(rn.cssPrefix,"-").concat(Wu.SECONDARY),fill:"currentColor",d:d[0]}},{tag:"path",attributes:{class:"".concat(rn.cssPrefix,"-").concat(Wu.PRIMARY),fill:"currentColor",d:d[1]}}]}:g={tag:"path",attributes:{fill:"currentColor",d}},{found:!0,width:t,height:i,icon:g}}var DL={found:!1,width:512,height:512};function BL(e,t){!FC&&!rn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function a_(e,t){var i=t;return t==="fa"&&rn.styleDefault!==null&&(t=iu()),new Promise(function(a,c){if(Qa("missingIconAbstract"),i==="fa"){var d=XC(e)||{};e=d.iconName||e,t=d.prefix||t}if(e&&t&&k0[t]&&k0[t][e]){var g=k0[t][e];return a(s_(g))}BL(e,t),a(Kt(Kt({},DL),{},{icon:rn.showMissingIcons&&e?Qa("missingIconAbstract")||{}:{}}))})}var U2=function(){},l_=rn.measurePerformance&&Gp&&Gp.mark&&Gp.measure?Gp:{mark:U2,measure:U2},jf='FA "6.5.1"',NL=function(t){return l_.mark("".concat(jf," ").concat(t," begins")),function(){return KC(t)}},KC=function(t){l_.mark("".concat(jf," ").concat(t," ends")),l_.measure("".concat(jf," ").concat(t),"".concat(jf," ").concat(t," begins"),"".concat(jf," ").concat(t," ends"))},J1={begin:NL,end:KC},bm=function(){};function $2(e){var t=e.getAttribute?e.getAttribute(nc):null;return typeof t=="string"}function UL(e){var t=e.getAttribute?e.getAttribute(V1):null,i=e.getAttribute?e.getAttribute(G1):null;return t&&i}function $L(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(rn.replacementClass)}function VL(){if(rn.autoReplaceSvg===!0)return Sm.replace;var e=Sm[rn.autoReplaceSvg];return e||Sm.replace}function GL(e){return xr.createElementNS("http://www.w3.org/2000/svg",e)}function ZL(e){return xr.createElement(e)}function YC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?e.tag==="svg"?GL:ZL:i;if(typeof e=="string")return xr.createTextNode(e);var c=a(e.tag);Object.keys(e.attributes||[]).forEach(function(g){c.setAttribute(g,e.attributes[g])});var d=e.children||[];return d.forEach(function(g){c.appendChild(YC(g,{ceFn:a}))}),c}function HL(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Sm={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(YC(c),i)}),i.getAttribute(nc)===null&&rn.keepOriginalSource){var a=xr.createComment(HL(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function(t){var i=t[0],a=t[1];if(~H1(i).indexOf(rn.replacementClass))return Sm.replace(t);var c=new RegExp("".concat(rn.cssPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var d=a[0].attributes.class.split(" ").reduce(function(l,b){return b===rn.replacementClass||b.match(c)?l.toSvg.push(b):l.toNode.push(b),l},{toNode:[],toSvg:[]});a[0].attributes.class=d.toSvg.join(" "),d.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",d.toNode.join(" "))}var g=a.map(function(l){return $d(l)}).join(`
`);i.setAttribute(nc,""),i.innerHTML=g}};function V2(e){e()}function JC(e,t){var i=typeof t=="function"?t:bm;if(e.length===0)i();else{var a=V2;rn.mutateApproach===K4&&(a=ru.requestAnimationFrame||V2),a(function(){var c=VL(),d=J1.begin("mutate");e.map(c),d(),i()})}}var Q1=!1;function QC(){Q1=!0}function u_(){Q1=!1}var ig=null;function G2(e){if(z2&&rn.observeMutations){var t=e.treeCallback,i=t===void 0?bm:t,a=e.nodeCallback,c=a===void 0?bm:a,d=e.pseudoElementsCallback,g=d===void 0?bm:d,l=e.observeMutationsRoot,b=l===void 0?xr:l;ig=new z2(function(w){if(!Q1){var A=iu();zh(w).forEach(function(S){if(S.type==="childList"&&S.addedNodes.length>0&&!$2(S.addedNodes[0])&&(rn.searchPseudoElements&&g(S.target),i(S.target)),S.type==="attributes"&&S.target.parentNode&&rn.searchPseudoElements&&g(S.target.parentNode),S.type==="attributes"&&$2(S.target)&&~rL.indexOf(S.attributeName))if(S.attributeName==="class"&&UL(S.target)){var k=Yg(H1(S.target)),O=k.prefix,N=k.iconName;S.target.setAttribute(V1,O||A),N&&S.target.setAttribute(G1,N)}else $L(S.target)&&c(S.target)})}}),nl&&ig.observe(b,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function WL(){ig&&ig.disconnect()}function XL(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,c){var d=c.split(":"),g=d[0],l=d.slice(1);return g&&l.length>0&&(a[g]=l.join(":").trim()),a},{})),i}function qL(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",c=Yg(H1(e));return c.prefix||(c.prefix=iu()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||(c.prefix&&a.length>0&&(c.iconName=CL(c.prefix,e.innerText)||q1(c.prefix,n_(e.innerText))),!c.iconName&&rn.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(c.iconName=e.firstChild.data)),c}function KL(e){var t=zh(e.attributes).reduce(function(c,d){return c.name!=="class"&&c.name!=="style"&&(c[d.name]=d.value),c},{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return rn.autoA11y&&(i?t["aria-labelledby"]="".concat(rn.replacementClass,"-title-").concat(a||Ad()):(t["aria-hidden"]="true",t.focusable="false")),t}function YL(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ca,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Z2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=qL(e),a=i.iconName,c=i.prefix,d=i.rest,g=KL(e),l=i_("parseNodeAttributes",{},e),b=t.styleParser?XL(e):[];return Kt({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:ca,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:d,styles:b,attributes:g}},l)}var JL=js.styles;function eI(e){var t=rn.autoReplaceSvg==="nest"?Z2(e,{styleParser:!1}):Z2(e);return~t.extra.classes.indexOf(RC)?Qa("generateLayersText",e,t):Qa("generateSvgReplacementMutation",e,t)}var ou=new Set;Z1.map(function(e){ou.add("fa-".concat(e))});Object.keys(Ed[vr]).map(ou.add.bind(ou));Object.keys(Ed[Br]).map(ou.add.bind(ou));ou=Nd(ou);function H2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!nl)return Promise.resolve();var i=xr.documentElement.classList,a=function(S){return i.add("".concat(O2,"-").concat(S))},c=function(S){return i.remove("".concat(O2,"-").concat(S))},d=rn.autoFetchSvg?ou:Z1.map(function(A){return"fa-".concat(A)}).concat(Object.keys(JL));d.includes("fa")||d.push("fa");var g=[".".concat(RC,":not([").concat(nc,"])")].concat(d.map(function(A){return".".concat(A,":not([").concat(nc,"])")})).join(", ");if(g.length===0)return Promise.resolve();var l=[];try{l=zh(e.querySelectorAll(g))}catch{}if(l.length>0)a("pending"),c("complete");else return Promise.resolve();var b=J1.begin("onTree"),w=l.reduce(function(A,S){try{var k=eI(S);k&&A.push(k)}catch(O){FC||O.name==="MissingIcon"&&console.error(O)}return A},[]);return new Promise(function(A,S){Promise.all(w).then(function(k){JC(k,function(){a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),b(),A()})}).catch(function(k){b(),S(k)})})}function QL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;eI(e).then(function(i){i&&JC([i],t)})}function ez(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:o_(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:o_(c||{})),e(a,Kt(Kt({},i),{},{mask:c}))}}var tz=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,c=a===void 0?ca:a,d=i.symbol,g=d===void 0?!1:d,l=i.mask,b=l===void 0?null:l,w=i.maskId,A=w===void 0?null:w,S=i.title,k=S===void 0?null:S,O=i.titleId,N=O===void 0?null:O,R=i.classes,ce=R===void 0?[]:R,K=i.attributes,H=K===void 0?{}:K,G=i.styles,se=G===void 0?{}:G;if(t){var X=t.prefix,V=t.iconName,C=t.icon;return Jg(Kt({type:"icon"},t),function(){return rc("beforeDOMElementCreation",{iconDefinition:t,params:i}),rn.autoA11y&&(k?H["aria-labelledby"]="".concat(rn.replacementClass,"-title-").concat(N||Ad()):(H["aria-hidden"]="true",H.focusable="false")),Y1({icons:{main:s_(C),mask:b?s_(b.icon):{found:!1,width:null,height:null,icon:{}}},prefix:X,iconName:V,transform:Kt(Kt({},ca),c),symbol:g,title:k,maskId:A,titleId:N,extra:{attributes:H,styles:se,classes:ce}})})}},nz={mixout:function(){return{icon:ez(tz)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=H2,i.nodeCallback=QL,i}}},provides:function(t){t.i2svg=function(i){var a=i.node,c=a===void 0?xr:a,d=i.callback,g=d===void 0?function(){}:d;return H2(c,g)},t.generateSvgReplacementMutation=function(i,a){var c=a.iconName,d=a.title,g=a.titleId,l=a.prefix,b=a.transform,w=a.symbol,A=a.mask,S=a.maskId,k=a.extra;return new Promise(function(O,N){Promise.all([a_(c,l),A.iconName?a_(A.iconName,A.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(R){var ce=U1(R,2),K=ce[0],H=ce[1];O([i,Y1({icons:{main:K,mask:H},prefix:l,iconName:c,transform:b,symbol:w,maskId:S,title:d,titleId:g,extra:k,watchable:!0})])}).catch(N)})},t.generateAbstractIcon=function(i){var a=i.children,c=i.attributes,d=i.main,g=i.transform,l=i.styles,b=qg(l);b.length>0&&(c.style=b);var w;return W1(g)&&(w=Qa("generateAbstractTransformGrouping",{main:d,transform:g,containerWidth:d.width,iconWidth:d.width})),a.push(w||d.icon),{children:a,attributes:c}}}},rz={mixout:function(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.classes,d=c===void 0?[]:c;return Jg({type:"layer"},function(){rc("beforeDOMElementCreation",{assembler:i,params:a});var g=[];return i(function(l){Array.isArray(l)?l.map(function(b){g=g.concat(b.abstract)}):g=g.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(rn.cssPrefix,"-layers")].concat(Nd(d)).join(" ")},children:g}]})}}}},iz={mixout:function(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.title,d=c===void 0?null:c,g=a.classes,l=g===void 0?[]:g,b=a.attributes,w=b===void 0?{}:b,A=a.styles,S=A===void 0?{}:A;return Jg({type:"counter",content:i},function(){return rc("beforeDOMElementCreation",{content:i,params:a}),jL({content:i.toString(),title:d,extra:{attributes:w,styles:S,classes:["".concat(rn.cssPrefix,"-layers-counter")].concat(Nd(l))}})})}}}},oz={mixout:function(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.transform,d=c===void 0?ca:c,g=a.title,l=g===void 0?null:g,b=a.classes,w=b===void 0?[]:b,A=a.attributes,S=A===void 0?{}:A,k=a.styles,O=k===void 0?{}:k;return Jg({type:"text",content:i},function(){return rc("beforeDOMElementCreation",{content:i,params:a}),N2({content:i,transform:Kt(Kt({},ca),d),title:l,extra:{attributes:S,styles:O,classes:["".concat(rn.cssPrefix,"-layers-text")].concat(Nd(w))}})})}}},provides:function(t){t.generateLayersText=function(i,a){var c=a.title,d=a.transform,g=a.extra,l=null,b=null;if(LC){var w=parseInt(getComputedStyle(i).fontSize,10),A=i.getBoundingClientRect();l=A.width/w,b=A.height/w}return rn.autoA11y&&!c&&(g.attributes["aria-hidden"]="true"),Promise.resolve([i,N2({content:i.innerHTML,width:l,height:b,transform:d,title:c,extra:g,watchable:!0})])}}},sz=new RegExp('"',"ug"),W2=[1105920,1112319];function az(e){var t=e.replace(sz,""),i=xL(t,0),a=i>=W2[0]&&i<=W2[1],c=t.length===2?t[0]===t[1]:!1;return{value:n_(c?t[0]:t),isSecondary:a||c}}function X2(e,t){var i="".concat(q4).concat(t.replace(":","-"));return new Promise(function(a,c){if(e.getAttribute(i)!==null)return a();var d=zh(e.children),g=d.filter(function(C){return C.getAttribute(t_)===t})[0],l=ru.getComputedStyle(e,t),b=l.getPropertyValue("font-family").match(eL),w=l.getPropertyValue("font-weight"),A=l.getPropertyValue("content");if(g&&!b)return e.removeChild(g),a();if(b&&A!=="none"&&A!==""){var S=l.getPropertyValue("content"),k=~["Sharp"].indexOf(b[2])?Br:vr,O=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(b[2])?Td[k][b[2].toLowerCase()]:tL[k][w],N=az(S),R=N.value,ce=N.isSecondary,K=b[0].startsWith("FontAwesome"),H=q1(O,R),G=H;if(K){var se=IL(R);se.iconName&&se.prefix&&(H=se.iconName,O=se.prefix)}if(H&&!ce&&(!g||g.getAttribute(V1)!==O||g.getAttribute(G1)!==G)){e.setAttribute(i,G),g&&e.removeChild(g);var X=YL(),V=X.extra;V.attributes[t_]=t,a_(H,O).then(function(C){var F=Y1(Kt(Kt({},X),{},{icons:{main:C,mask:K1()},prefix:O,iconName:G,extra:V,watchable:!0})),D=xr.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(D,e.firstChild):e.appendChild(D),D.outerHTML=F.map(function(Q){return $d(Q)}).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function lz(e){return Promise.all([X2(e,"::before"),X2(e,"::after")])}function uz(e){return e.parentNode!==document.head&&!~Y4.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(t_)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function q2(e){if(nl)return new Promise(function(t,i){var a=zh(e.querySelectorAll("*")).filter(uz).map(lz),c=J1.begin("searchPseudoElements");QC(),Promise.all(a).then(function(){c(),u_(),t()}).catch(function(){c(),u_(),i()})})}var cz={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=q2,i}}},provides:function(t){t.pseudoElements2svg=function(i){var a=i.node,c=a===void 0?xr:a;rn.searchPseudoElements&&q2(c)}}},K2=!1,hz={mixout:function(){return{dom:{unwatch:function(){QC(),K2=!0}}}},hooks:function(){return{bootstrap:function(){G2(i_("mutationObserverCallbacks",{}))},noAuto:function(){WL()},watch:function(i){var a=i.observeMutationsRoot;K2?u_():G2(i_("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},Y2=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,c){var d=c.toLowerCase().split("-"),g=d[0],l=d.slice(1).join("-");if(g&&l==="h")return a.flipX=!0,a;if(g&&l==="v")return a.flipY=!0,a;if(l=parseFloat(l),isNaN(l))return a;switch(g){case"grow":a.size=a.size+l;break;case"shrink":a.size=a.size-l;break;case"left":a.x=a.x-l;break;case"right":a.x=a.x+l;break;case"up":a.y=a.y-l;break;case"down":a.y=a.y+l;break;case"rotate":a.rotate=a.rotate+l;break}return a},i)},fz={mixout:function(){return{parse:{transform:function(i){return Y2(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-transform");return c&&(i.transform=Y2(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,c=i.transform,d=i.containerWidth,g=i.iconWidth,l={transform:"translate(".concat(d/2," 256)")},b="translate(".concat(c.x*32,", ").concat(c.y*32,") "),w="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),A="rotate(".concat(c.rotate," 0 0)"),S={transform:"".concat(b," ").concat(w," ").concat(A)},k={transform:"translate(".concat(g/2*-1," -256)")},O={outer:l,inner:S,path:k};return{tag:"g",attributes:Kt({},O.outer),children:[{tag:"g",attributes:Kt({},O.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:Kt(Kt({},a.icon.attributes),O.path)}]}]}}}},M0={x:0,y:0,width:"100%",height:"100%"};function J2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function dz(e){return e.tag==="g"?e.children:[e]}var pz={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-mask"),d=c?Yg(c.split(" ").map(function(g){return g.trim()})):K1();return d.prefix||(d.prefix=iu()),i.mask=d,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var a=i.children,c=i.attributes,d=i.main,g=i.mask,l=i.maskId,b=i.transform,w=d.width,A=d.icon,S=g.width,k=g.icon,O=fL({transform:b,containerWidth:S,iconWidth:w}),N={tag:"rect",attributes:Kt(Kt({},M0),{},{fill:"white"})},R=A.children?{children:A.children.map(J2)}:{},ce={tag:"g",attributes:Kt({},O.inner),children:[J2(Kt({tag:A.tag,attributes:Kt(Kt({},A.attributes),O.path)},R))]},K={tag:"g",attributes:Kt({},O.outer),children:[ce]},H="mask-".concat(l||Ad()),G="clip-".concat(l||Ad()),se={tag:"mask",attributes:Kt(Kt({},M0),{},{id:H,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[N,K]},X={tag:"defs",children:[{tag:"clipPath",attributes:{id:G},children:dz(k)},se]};return a.push(X,{tag:"rect",attributes:Kt({fill:"currentColor","clip-path":"url(#".concat(G,")"),mask:"url(#".concat(H,")")},M0)}),{children:a,attributes:c}}}},mz={provides:function(t){var i=!1;ru.matchMedia&&(i=ru.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],c={fill:"currentColor"},d={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:Kt(Kt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var g=Kt(Kt({},d),{},{attributeName:"opacity"}),l={tag:"circle",attributes:Kt(Kt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||l.children.push({tag:"animate",attributes:Kt(Kt({},d),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Kt(Kt({},g),{},{values:"1;0;1;1;0;1;"})}),a.push(l),a.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:Kt(Kt({},g),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Kt(Kt({},g),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},gz={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-symbol"),d=c===null?!1:c===""?!0:c;return i.symbol=d,i}}}},yz=[mL,nz,rz,iz,oz,cz,hz,fz,pz,mz,gz];kL(yz,{mixoutsTo:Zo});Zo.noAuto;Zo.config;Zo.library;Zo.dom;var c_=Zo.parse;Zo.findIconDefinition;Zo.toHtml;var vz=Zo.icon;Zo.layer;Zo.text;Zo.counter;var tI={exports:{}},_z="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xz=_z,wz=xz;function nI(){}function rI(){}rI.resetWarningCache=nI;var bz=function(){function e(a,c,d,g,l,b){if(b!==wz){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:rI,resetWarningCache:nI};return i.PropTypes=i,i};tI.exports=bz();var Sz=tI.exports;const Bn=zd(Sz);function Q2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Hl(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Q2(Object(i),!0).forEach(function(a){ih(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Q2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function og(e){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},og(e)}function ih(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ez(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,d;for(d=0;d<a.length;d++)c=a[d],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function Tz(e,t){if(e==null)return{};var i=Ez(e,t),a,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(c=0;c<d.length;c++)a=d[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function h_(e){return Cz(e)||Iz(e)||Az(e)||Pz()}function Cz(e){if(Array.isArray(e))return f_(e)}function Iz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Az(e,t){if(e){if(typeof e=="string")return f_(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return f_(e,t)}}function f_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Pz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kz(e){var t,i=e.beat,a=e.fade,c=e.beatFade,d=e.bounce,g=e.shake,l=e.flash,b=e.spin,w=e.spinPulse,A=e.spinReverse,S=e.pulse,k=e.fixedWidth,O=e.inverse,N=e.border,R=e.listItem,ce=e.flip,K=e.size,H=e.rotation,G=e.pull,se=(t={"fa-beat":i,"fa-fade":a,"fa-beat-fade":c,"fa-bounce":d,"fa-shake":g,"fa-flash":l,"fa-spin":b,"fa-spin-reverse":A,"fa-spin-pulse":w,"fa-pulse":S,"fa-fw":k,"fa-inverse":O,"fa-border":N,"fa-li":R,"fa-flip":ce===!0,"fa-flip-horizontal":ce==="horizontal"||ce==="both","fa-flip-vertical":ce==="vertical"||ce==="both"},ih(t,"fa-".concat(K),typeof K<"u"&&K!==null),ih(t,"fa-rotate-".concat(H),typeof H<"u"&&H!==null&&H!==0),ih(t,"fa-pull-".concat(G),typeof G<"u"&&G!==null),ih(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(se).map(function(X){return se[X]?X:null}).filter(function(X){return X})}function Mz(e){return e=e-0,e===e}function iI(e){return Mz(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var Lz=["style"];function zz(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Oz(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=iI(i.slice(0,a)),d=i.slice(a+1).trim();return c.startsWith("webkit")?t[zz(c)]=d:t[c]=d,t},{})}function oI(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(b){return oI(e,b)}),c=Object.keys(t.attributes||{}).reduce(function(b,w){var A=t.attributes[w];switch(w){case"class":b.attrs.className=A,delete t.attributes.class;break;case"style":b.attrs.style=Oz(A);break;default:w.indexOf("aria-")===0||w.indexOf("data-")===0?b.attrs[w.toLowerCase()]=A:b.attrs[iI(w)]=A}return b},{attrs:{}}),d=i.style,g=d===void 0?{}:d,l=Tz(i,Lz);return c.attrs.style=Hl(Hl({},c.attrs.style),g),e.apply(void 0,[t.tag,Hl(Hl({},c.attrs),l)].concat(h_(a)))}var sI=!1;try{sI=!0}catch{}function Fz(){if(!sI&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function eS(e){if(e&&og(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(c_.icon)return c_.icon(e);if(e===null)return null;if(e&&og(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function L0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?ih({},e,t):{}}var da=q_.forwardRef(function(e,t){var i=e.icon,a=e.mask,c=e.symbol,d=e.className,g=e.title,l=e.titleId,b=e.maskId,w=eS(i),A=L0("classes",[].concat(h_(kz(e)),h_(d.split(" ")))),S=L0("transform",typeof e.transform=="string"?c_.transform(e.transform):e.transform),k=L0("mask",eS(a)),O=vz(w,Hl(Hl(Hl(Hl({},A),S),k),{},{symbol:c,title:g,titleId:l,maskId:b}));if(!O)return Fz("Could not find icon",w),null;var N=O.abstract,R={ref:t};return Object.keys(e).forEach(function(ce){da.defaultProps.hasOwnProperty(ce)||(R[ce]=e[ce])}),Rz(N[0],R)});da.displayName="FontAwesomeIcon";da.propTypes={beat:Bn.bool,border:Bn.bool,beatFade:Bn.bool,bounce:Bn.bool,className:Bn.string,fade:Bn.bool,flash:Bn.bool,mask:Bn.oneOfType([Bn.object,Bn.array,Bn.string]),maskId:Bn.string,fixedWidth:Bn.bool,inverse:Bn.bool,flip:Bn.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Bn.oneOfType([Bn.object,Bn.array,Bn.string]),listItem:Bn.bool,pull:Bn.oneOf(["right","left"]),pulse:Bn.bool,rotation:Bn.oneOf([0,90,180,270]),shake:Bn.bool,size:Bn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Bn.bool,spinPulse:Bn.bool,spinReverse:Bn.bool,symbol:Bn.oneOfType([Bn.bool,Bn.string]),title:Bn.string,titleId:Bn.string,transform:Bn.oneOfType([Bn.string,Bn.object]),swapOpacity:Bn.bool};da.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var Rz=oI.bind(null,q_.createElement),jz={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},d_={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},Dz={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"]},Bz=Dz;function Qp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aI={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,d){function g(w,A){if(!c[w]){if(!a[w]){var S=typeof Qp=="function"&&Qp;if(!A&&S)return S(w,!0);if(l)return l(w,!0);var k=new Error("Cannot find module '"+w+"'");throw k.code="MODULE_NOT_FOUND",k}var O=c[w]={exports:{}};a[w][0].call(O.exports,function(N){var R=a[w][1][N];return g(R||N)},O,O.exports,i,a,c,d)}return c[w].exports}for(var l=typeof Qp=="function"&&Qp,b=0;b<d.length;b++)g(d[b]);return g}return i}()({1:[function(i,a,c){c.byteLength=k,c.toByteArray=N,c.fromByteArray=K;for(var d=[],g=[],l=typeof Uint8Array<"u"?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,A=b.length;w<A;++w)d[w]=b[w],g[b.charCodeAt(w)]=w;g[45]=62,g[95]=63;function S(H){var G=H.length;if(G%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var se=H.indexOf("=");se===-1&&(se=G);var X=se===G?0:4-se%4;return[se,X]}function k(H){var G=S(H),se=G[0],X=G[1];return(se+X)*3/4-X}function O(H,G,se){return(G+se)*3/4-se}function N(H){var G,se=S(H),X=se[0],V=se[1],C=new l(O(H,X,V)),F=0,D=V>0?X-4:X,Q;for(Q=0;Q<D;Q+=4)G=g[H.charCodeAt(Q)]<<18|g[H.charCodeAt(Q+1)]<<12|g[H.charCodeAt(Q+2)]<<6|g[H.charCodeAt(Q+3)],C[F++]=G>>16&255,C[F++]=G>>8&255,C[F++]=G&255;return V===2&&(G=g[H.charCodeAt(Q)]<<2|g[H.charCodeAt(Q+1)]>>4,C[F++]=G&255),V===1&&(G=g[H.charCodeAt(Q)]<<10|g[H.charCodeAt(Q+1)]<<4|g[H.charCodeAt(Q+2)]>>2,C[F++]=G>>8&255,C[F++]=G&255),C}function R(H){return d[H>>18&63]+d[H>>12&63]+d[H>>6&63]+d[H&63]}function ce(H,G,se){for(var X,V=[],C=G;C<se;C+=3)X=(H[C]<<16&16711680)+(H[C+1]<<8&65280)+(H[C+2]&255),V.push(R(X));return V.join("")}function K(H){for(var G,se=H.length,X=se%3,V=[],C=16383,F=0,D=se-X;F<D;F+=C)V.push(ce(H,F,F+C>D?D:F+C));return X===1?(G=H[se-1],V.push(d[G>>2]+d[G<<4&63]+"==")):X===2&&(G=(H[se-2]<<8)+H[se-1],V.push(d[G>>10]+d[G>>4&63]+d[G<<2&63]+"=")),V.join("")}},{}],2:[function(i,a,c){(function(d){(function(){var g=i("base64-js"),l=i("ieee754");c.Buffer=S,c.SlowBuffer=X,c.INSPECT_MAX_BYTES=50;var b=2147483647;c.kMaxLength=b,S.TYPED_ARRAY_SUPPORT=w(),!S.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{var ie=new Uint8Array(1);return ie.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ie.foo()===42}catch{return!1}}Object.defineProperty(S.prototype,"parent",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.buffer}}),Object.defineProperty(S.prototype,"offset",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.byteOffset}});function A(ie){if(ie>b)throw new RangeError('The value "'+ie+'" is invalid for option "size"');var B=new Uint8Array(ie);return B.__proto__=S.prototype,B}function S(ie,B,j){if(typeof ie=="number"){if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(ie)}return k(ie,B,j)}typeof Symbol<"u"&&Symbol.species!=null&&S[Symbol.species]===S&&Object.defineProperty(S,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),S.poolSize=8192;function k(ie,B,j){if(typeof ie=="string")return ce(ie,B);if(ArrayBuffer.isView(ie))return K(ie);if(ie==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(sn(ie,ArrayBuffer)||ie&&sn(ie.buffer,ArrayBuffer))return H(ie,B,j);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ge=ie.valueOf&&ie.valueOf();if(ge!=null&&ge!==ie)return S.from(ge,B,j);var Be=G(ie);if(Be)return Be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return S.from(ie[Symbol.toPrimitive]("string"),B,j);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}S.from=function(ie,B,j){return k(ie,B,j)},S.prototype.__proto__=Uint8Array.prototype,S.__proto__=Uint8Array;function O(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function N(ie,B,j){return O(ie),ie<=0?A(ie):B!==void 0?typeof j=="string"?A(ie).fill(B,j):A(ie).fill(B):A(ie)}S.alloc=function(ie,B,j){return N(ie,B,j)};function R(ie){return O(ie),A(ie<0?0:se(ie)|0)}S.allocUnsafe=function(ie){return R(ie)},S.allocUnsafeSlow=function(ie){return R(ie)};function ce(ie,B){if((typeof B!="string"||B==="")&&(B="utf8"),!S.isEncoding(B))throw new TypeError("Unknown encoding: "+B);var j=V(ie,B)|0,ge=A(j),Be=ge.write(ie,B);return Be!==j&&(ge=ge.slice(0,Be)),ge}function K(ie){for(var B=ie.length<0?0:se(ie.length)|0,j=A(B),ge=0;ge<B;ge+=1)j[ge]=ie[ge]&255;return j}function H(ie,B,j){if(B<0||ie.byteLength<B)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<B+(j||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return B===void 0&&j===void 0?ge=new Uint8Array(ie):j===void 0?ge=new Uint8Array(ie,B):ge=new Uint8Array(ie,B,j),ge.__proto__=S.prototype,ge}function G(ie){if(S.isBuffer(ie)){var B=se(ie.length)|0,j=A(B);return j.length===0||ie.copy(j,0,0,B),j}if(ie.length!==void 0)return typeof ie.length!="number"||gn(ie.length)?A(0):K(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return K(ie.data)}function se(ie){if(ie>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return ie|0}function X(ie){return+ie!=ie&&(ie=0),S.alloc(+ie)}S.isBuffer=function(B){return B!=null&&B._isBuffer===!0&&B!==S.prototype},S.compare=function(B,j){if(sn(B,Uint8Array)&&(B=S.from(B,B.offset,B.byteLength)),sn(j,Uint8Array)&&(j=S.from(j,j.offset,j.byteLength)),!S.isBuffer(B)||!S.isBuffer(j))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===j)return 0;for(var ge=B.length,Be=j.length,et=0,lt=Math.min(ge,Be);et<lt;++et)if(B[et]!==j[et]){ge=B[et],Be=j[et];break}return ge<Be?-1:Be<ge?1:0},S.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.concat=function(B,j){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return S.alloc(0);var ge;if(j===void 0)for(j=0,ge=0;ge<B.length;++ge)j+=B[ge].length;var Be=S.allocUnsafe(j),et=0;for(ge=0;ge<B.length;++ge){var lt=B[ge];if(sn(lt,Uint8Array)&&(lt=S.from(lt)),!S.isBuffer(lt))throw new TypeError('"list" argument must be an Array of Buffers');lt.copy(Be,et),et+=lt.length}return Be};function V(ie,B){if(S.isBuffer(ie))return ie.length;if(ArrayBuffer.isView(ie)||sn(ie,ArrayBuffer))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);var j=ie.length,ge=arguments.length>2&&arguments[2]===!0;if(!ge&&j===0)return 0;for(var Be=!1;;)switch(B){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":return Gt(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j*2;case"hex":return j>>>1;case"base64":return xn(ie).length;default:if(Be)return ge?-1:Gt(ie).length;B=(""+B).toLowerCase(),Be=!0}}S.byteLength=V;function C(ie,B,j){var ge=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0,B>>>=0,j<=B))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return Ie(this,B,j);case"utf8":case"utf-8":return ne(this,B,j);case"ascii":return Te(this,B,j);case"latin1":case"binary":return $e(this,B,j);case"base64":return te(this,B,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,B,j);default:if(ge)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),ge=!0}}S.prototype._isBuffer=!0;function F(ie,B,j){var ge=ie[B];ie[B]=ie[j],ie[j]=ge}S.prototype.swap16=function(){var B=this.length;if(B%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var j=0;j<B;j+=2)F(this,j,j+1);return this},S.prototype.swap32=function(){var B=this.length;if(B%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var j=0;j<B;j+=4)F(this,j,j+3),F(this,j+1,j+2);return this},S.prototype.swap64=function(){var B=this.length;if(B%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var j=0;j<B;j+=8)F(this,j,j+7),F(this,j+1,j+6),F(this,j+2,j+5),F(this,j+3,j+4);return this},S.prototype.toString=function(){var B=this.length;return B===0?"":arguments.length===0?ne(this,0,B):C.apply(this,arguments)},S.prototype.toLocaleString=S.prototype.toString,S.prototype.equals=function(B){if(!S.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B?!0:S.compare(this,B)===0},S.prototype.inspect=function(){var B="",j=c.INSPECT_MAX_BYTES;return B=this.toString("hex",0,j).replace(/(.{2})/g,"$1 ").trim(),this.length>j&&(B+=" ... "),"<Buffer "+B+">"},S.prototype.compare=function(B,j,ge,Be,et){if(sn(B,Uint8Array)&&(B=S.from(B,B.offset,B.byteLength)),!S.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(j===void 0&&(j=0),ge===void 0&&(ge=B?B.length:0),Be===void 0&&(Be=0),et===void 0&&(et=this.length),j<0||ge>B.length||Be<0||et>this.length)throw new RangeError("out of range index");if(Be>=et&&j>=ge)return 0;if(Be>=et)return-1;if(j>=ge)return 1;if(j>>>=0,ge>>>=0,Be>>>=0,et>>>=0,this===B)return 0;for(var lt=et-Be,le=ge-j,L=Math.min(lt,le),U=this.slice(Be,et),Ee=B.slice(j,ge),Ge=0;Ge<L;++Ge)if(U[Ge]!==Ee[Ge]){lt=U[Ge],le=Ee[Ge];break}return lt<le?-1:le<lt?1:0};function D(ie,B,j,ge,Be){if(ie.length===0)return-1;if(typeof j=="string"?(ge=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),j=+j,gn(j)&&(j=Be?0:ie.length-1),j<0&&(j=ie.length+j),j>=ie.length){if(Be)return-1;j=ie.length-1}else if(j<0)if(Be)j=0;else return-1;if(typeof B=="string"&&(B=S.from(B,ge)),S.isBuffer(B))return B.length===0?-1:Q(ie,B,j,ge,Be);if(typeof B=="number")return B=B&255,typeof Uint8Array.prototype.indexOf=="function"?Be?Uint8Array.prototype.indexOf.call(ie,B,j):Uint8Array.prototype.lastIndexOf.call(ie,B,j):Q(ie,[B],j,ge,Be);throw new TypeError("val must be string, number or Buffer")}function Q(ie,B,j,ge,Be){var et=1,lt=ie.length,le=B.length;if(ge!==void 0&&(ge=String(ge).toLowerCase(),ge==="ucs2"||ge==="ucs-2"||ge==="utf16le"||ge==="utf-16le")){if(ie.length<2||B.length<2)return-1;et=2,lt/=2,le/=2,j/=2}function L(at,jt){return et===1?at[jt]:at.readUInt16BE(jt*et)}var U;if(Be){var Ee=-1;for(U=j;U<lt;U++)if(L(ie,U)===L(B,Ee===-1?0:U-Ee)){if(Ee===-1&&(Ee=U),U-Ee+1===le)return Ee*et}else Ee!==-1&&(U-=U-Ee),Ee=-1}else for(j+le>lt&&(j=lt-le),U=j;U>=0;U--){for(var Ge=!0,je=0;je<le;je++)if(L(ie,U+je)!==L(B,je)){Ge=!1;break}if(Ge)return U}return-1}S.prototype.includes=function(B,j,ge){return this.indexOf(B,j,ge)!==-1},S.prototype.indexOf=function(B,j,ge){return D(this,B,j,ge,!0)},S.prototype.lastIndexOf=function(B,j,ge){return D(this,B,j,ge,!1)};function Y(ie,B,j,ge){j=Number(j)||0;var Be=ie.length-j;ge?(ge=Number(ge),ge>Be&&(ge=Be)):ge=Be;var et=B.length;ge>et/2&&(ge=et/2);for(var lt=0;lt<ge;++lt){var le=parseInt(B.substr(lt*2,2),16);if(gn(le))return lt;ie[j+lt]=le}return lt}function _e(ie,B,j,ge){return yn(Gt(B,ie.length-j),ie,j,ge)}function we(ie,B,j,ge){return yn(Ut(B),ie,j,ge)}function pe(ie,B,j,ge){return we(ie,B,j,ge)}function oe(ie,B,j,ge){return yn(xn(B),ie,j,ge)}function ue(ie,B,j,ge){return yn(cn(B,ie.length-j),ie,j,ge)}S.prototype.write=function(B,j,ge,Be){if(j===void 0)Be="utf8",ge=this.length,j=0;else if(ge===void 0&&typeof j=="string")Be=j,ge=this.length,j=0;else if(isFinite(j))j=j>>>0,isFinite(ge)?(ge=ge>>>0,Be===void 0&&(Be="utf8")):(Be=ge,ge=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var et=this.length-j;if((ge===void 0||ge>et)&&(ge=et),B.length>0&&(ge<0||j<0)||j>this.length)throw new RangeError("Attempt to write outside buffer bounds");Be||(Be="utf8");for(var lt=!1;;)switch(Be){case"hex":return Y(this,B,j,ge);case"utf8":case"utf-8":return _e(this,B,j,ge);case"ascii":return we(this,B,j,ge);case"latin1":case"binary":return pe(this,B,j,ge);case"base64":return oe(this,B,j,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,B,j,ge);default:if(lt)throw new TypeError("Unknown encoding: "+Be);Be=(""+Be).toLowerCase(),lt=!0}},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function te(ie,B,j){return B===0&&j===ie.length?g.fromByteArray(ie):g.fromByteArray(ie.slice(B,j))}function ne(ie,B,j){j=Math.min(ie.length,j);for(var ge=[],Be=B;Be<j;){var et=ie[Be],lt=null,le=et>239?4:et>223?3:et>191?2:1;if(Be+le<=j){var L,U,Ee,Ge;switch(le){case 1:et<128&&(lt=et);break;case 2:L=ie[Be+1],(L&192)===128&&(Ge=(et&31)<<6|L&63,Ge>127&&(lt=Ge));break;case 3:L=ie[Be+1],U=ie[Be+2],(L&192)===128&&(U&192)===128&&(Ge=(et&15)<<12|(L&63)<<6|U&63,Ge>2047&&(Ge<55296||Ge>57343)&&(lt=Ge));break;case 4:L=ie[Be+1],U=ie[Be+2],Ee=ie[Be+3],(L&192)===128&&(U&192)===128&&(Ee&192)===128&&(Ge=(et&15)<<18|(L&63)<<12|(U&63)<<6|Ee&63,Ge>65535&&Ge<1114112&&(lt=Ge))}}lt===null?(lt=65533,le=1):lt>65535&&(lt-=65536,ge.push(lt>>>10&1023|55296),lt=56320|lt&1023),ge.push(lt),Be+=le}return Se(ge)}var de=4096;function Se(ie){var B=ie.length;if(B<=de)return String.fromCharCode.apply(String,ie);for(var j="",ge=0;ge<B;)j+=String.fromCharCode.apply(String,ie.slice(ge,ge+=de));return j}function Te(ie,B,j){var ge="";j=Math.min(ie.length,j);for(var Be=B;Be<j;++Be)ge+=String.fromCharCode(ie[Be]&127);return ge}function $e(ie,B,j){var ge="";j=Math.min(ie.length,j);for(var Be=B;Be<j;++Be)ge+=String.fromCharCode(ie[Be]);return ge}function Ie(ie,B,j){var ge=ie.length;(!B||B<0)&&(B=0),(!j||j<0||j>ge)&&(j=ge);for(var Be="",et=B;et<j;++et)Be+=St(ie[et]);return Be}function Le(ie,B,j){for(var ge=ie.slice(B,j),Be="",et=0;et<ge.length;et+=2)Be+=String.fromCharCode(ge[et]+ge[et+1]*256);return Be}S.prototype.slice=function(B,j){var ge=this.length;B=~~B,j=j===void 0?ge:~~j,B<0?(B+=ge,B<0&&(B=0)):B>ge&&(B=ge),j<0?(j+=ge,j<0&&(j=0)):j>ge&&(j=ge),j<B&&(j=B);var Be=this.subarray(B,j);return Be.__proto__=S.prototype,Be};function We(ie,B,j){if(ie%1!==0||ie<0)throw new RangeError("offset is not uint");if(ie+B>j)throw new RangeError("Trying to access beyond buffer length")}S.prototype.readUIntLE=function(B,j,ge){B=B>>>0,j=j>>>0,ge||We(B,j,this.length);for(var Be=this[B],et=1,lt=0;++lt<j&&(et*=256);)Be+=this[B+lt]*et;return Be},S.prototype.readUIntBE=function(B,j,ge){B=B>>>0,j=j>>>0,ge||We(B,j,this.length);for(var Be=this[B+--j],et=1;j>0&&(et*=256);)Be+=this[B+--j]*et;return Be},S.prototype.readUInt8=function(B,j){return B=B>>>0,j||We(B,1,this.length),this[B]},S.prototype.readUInt16LE=function(B,j){return B=B>>>0,j||We(B,2,this.length),this[B]|this[B+1]<<8},S.prototype.readUInt16BE=function(B,j){return B=B>>>0,j||We(B,2,this.length),this[B]<<8|this[B+1]},S.prototype.readUInt32LE=function(B,j){return B=B>>>0,j||We(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+this[B+3]*16777216},S.prototype.readUInt32BE=function(B,j){return B=B>>>0,j||We(B,4,this.length),this[B]*16777216+(this[B+1]<<16|this[B+2]<<8|this[B+3])},S.prototype.readIntLE=function(B,j,ge){B=B>>>0,j=j>>>0,ge||We(B,j,this.length);for(var Be=this[B],et=1,lt=0;++lt<j&&(et*=256);)Be+=this[B+lt]*et;return et*=128,Be>=et&&(Be-=Math.pow(2,8*j)),Be},S.prototype.readIntBE=function(B,j,ge){B=B>>>0,j=j>>>0,ge||We(B,j,this.length);for(var Be=j,et=1,lt=this[B+--Be];Be>0&&(et*=256);)lt+=this[B+--Be]*et;return et*=128,lt>=et&&(lt-=Math.pow(2,8*j)),lt},S.prototype.readInt8=function(B,j){return B=B>>>0,j||We(B,1,this.length),this[B]&128?(255-this[B]+1)*-1:this[B]},S.prototype.readInt16LE=function(B,j){B=B>>>0,j||We(B,2,this.length);var ge=this[B]|this[B+1]<<8;return ge&32768?ge|4294901760:ge},S.prototype.readInt16BE=function(B,j){B=B>>>0,j||We(B,2,this.length);var ge=this[B+1]|this[B]<<8;return ge&32768?ge|4294901760:ge},S.prototype.readInt32LE=function(B,j){return B=B>>>0,j||We(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},S.prototype.readInt32BE=function(B,j){return B=B>>>0,j||We(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},S.prototype.readFloatLE=function(B,j){return B=B>>>0,j||We(B,4,this.length),l.read(this,B,!0,23,4)},S.prototype.readFloatBE=function(B,j){return B=B>>>0,j||We(B,4,this.length),l.read(this,B,!1,23,4)},S.prototype.readDoubleLE=function(B,j){return B=B>>>0,j||We(B,8,this.length),l.read(this,B,!0,52,8)},S.prototype.readDoubleBE=function(B,j){return B=B>>>0,j||We(B,8,this.length),l.read(this,B,!1,52,8)};function Ze(ie,B,j,ge,Be,et){if(!S.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>Be||B<et)throw new RangeError('"value" argument is out of bounds');if(j+ge>ie.length)throw new RangeError("Index out of range")}S.prototype.writeUIntLE=function(B,j,ge,Be){if(B=+B,j=j>>>0,ge=ge>>>0,!Be){var et=Math.pow(2,8*ge)-1;Ze(this,B,j,ge,et,0)}var lt=1,le=0;for(this[j]=B&255;++le<ge&&(lt*=256);)this[j+le]=B/lt&255;return j+ge},S.prototype.writeUIntBE=function(B,j,ge,Be){if(B=+B,j=j>>>0,ge=ge>>>0,!Be){var et=Math.pow(2,8*ge)-1;Ze(this,B,j,ge,et,0)}var lt=ge-1,le=1;for(this[j+lt]=B&255;--lt>=0&&(le*=256);)this[j+lt]=B/le&255;return j+ge},S.prototype.writeUInt8=function(B,j,ge){return B=+B,j=j>>>0,ge||Ze(this,B,j,1,255,0),this[j]=B&255,j+1},S.prototype.writeUInt16LE=function(B,j,ge){return B=+B,j=j>>>0,ge||Ze(this,B,j,2,65535,0),this[j]=B&255,this[j+1]=B>>>8,j+2},S.prototype.writeUInt16BE=function(B,j,ge){return B=+B,j=j>>>0,ge||Ze(this,B,j,2,65535,0),this[j]=B>>>8,this[j+1]=B&255,j+2},S.prototype.writeUInt32LE=function(B,j,ge){return B=+B,j=j>>>0,ge||Ze(this,B,j,4,4294967295,0),this[j+3]=B>>>24,this[j+2]=B>>>16,this[j+1]=B>>>8,this[j]=B&255,j+4},S.prototype.writeUInt32BE=function(B,j,ge){return B=+B,j=j>>>0,ge||Ze(this,B,j,4,4294967295,0),this[j]=B>>>24,this[j+1]=B>>>16,this[j+2]=B>>>8,this[j+3]=B&255,j+4},S.prototype.writeIntLE=function(B,j,ge,Be){if(B=+B,j=j>>>0,!Be){var et=Math.pow(2,8*ge-1);Ze(this,B,j,ge,et-1,-et)}var lt=0,le=1,L=0;for(this[j]=B&255;++lt<ge&&(le*=256);)B<0&&L===0&&this[j+lt-1]!==0&&(L=1),this[j+lt]=(B/le>>0)-L&255;return j+ge},S.prototype.writeIntBE=function(B,j,ge,Be){if(B=+B,j=j>>>0,!Be){var et=Math.pow(2,8*ge-1);Ze(this,B,j,ge,et-1,-et)}var lt=ge-1,le=1,L=0;for(this[j+lt]=B&255;--lt>=0&&(le*=256);)B<0&&L===0&&this[j+lt+1]!==0&&(L=1),this[j+lt]=(B/le>>0)-L&255;return j+ge},S.prototype.writeInt8=function(B,j,ge){return B=+B,j=j>>>0,ge||Ze(this,B,j,1,127,-128),B<0&&(B=255+B+1),this[j]=B&255,j+1},S.prototype.writeInt16LE=function(B,j,ge){return B=+B,j=j>>>0,ge||Ze(this,B,j,2,32767,-32768),this[j]=B&255,this[j+1]=B>>>8,j+2},S.prototype.writeInt16BE=function(B,j,ge){return B=+B,j=j>>>0,ge||Ze(this,B,j,2,32767,-32768),this[j]=B>>>8,this[j+1]=B&255,j+2},S.prototype.writeInt32LE=function(B,j,ge){return B=+B,j=j>>>0,ge||Ze(this,B,j,4,2147483647,-2147483648),this[j]=B&255,this[j+1]=B>>>8,this[j+2]=B>>>16,this[j+3]=B>>>24,j+4},S.prototype.writeInt32BE=function(B,j,ge){return B=+B,j=j>>>0,ge||Ze(this,B,j,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),this[j]=B>>>24,this[j+1]=B>>>16,this[j+2]=B>>>8,this[j+3]=B&255,j+4};function nt(ie,B,j,ge,Be,et){if(j+ge>ie.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function ct(ie,B,j,ge,Be){return B=+B,j=j>>>0,Be||nt(ie,B,j,4),l.write(ie,B,j,ge,23,4),j+4}S.prototype.writeFloatLE=function(B,j,ge){return ct(this,B,j,!0,ge)},S.prototype.writeFloatBE=function(B,j,ge){return ct(this,B,j,!1,ge)};function vt(ie,B,j,ge,Be){return B=+B,j=j>>>0,Be||nt(ie,B,j,8),l.write(ie,B,j,ge,52,8),j+8}S.prototype.writeDoubleLE=function(B,j,ge){return vt(this,B,j,!0,ge)},S.prototype.writeDoubleBE=function(B,j,ge){return vt(this,B,j,!1,ge)},S.prototype.copy=function(B,j,ge,Be){if(!S.isBuffer(B))throw new TypeError("argument should be a Buffer");if(ge||(ge=0),!Be&&Be!==0&&(Be=this.length),j>=B.length&&(j=B.length),j||(j=0),Be>0&&Be<ge&&(Be=ge),Be===ge||B.length===0||this.length===0)return 0;if(j<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(Be<0)throw new RangeError("sourceEnd out of bounds");Be>this.length&&(Be=this.length),B.length-j<Be-ge&&(Be=B.length-j+ge);var et=Be-ge;if(this===B&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(j,ge,Be);else if(this===B&&ge<j&&j<Be)for(var lt=et-1;lt>=0;--lt)B[lt+j]=this[lt+ge];else Uint8Array.prototype.set.call(B,this.subarray(ge,Be),j);return et},S.prototype.fill=function(B,j,ge,Be){if(typeof B=="string"){if(typeof j=="string"?(Be=j,j=0,ge=this.length):typeof ge=="string"&&(Be=ge,ge=this.length),Be!==void 0&&typeof Be!="string")throw new TypeError("encoding must be a string");if(typeof Be=="string"&&!S.isEncoding(Be))throw new TypeError("Unknown encoding: "+Be);if(B.length===1){var et=B.charCodeAt(0);(Be==="utf8"&&et<128||Be==="latin1")&&(B=et)}}else typeof B=="number"&&(B=B&255);if(j<0||this.length<j||this.length<ge)throw new RangeError("Out of range index");if(ge<=j)return this;j=j>>>0,ge=ge===void 0?this.length:ge>>>0,B||(B=0);var lt;if(typeof B=="number")for(lt=j;lt<ge;++lt)this[lt]=B;else{var le=S.isBuffer(B)?B:S.from(B,Be),L=le.length;if(L===0)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(lt=0;lt<ge-j;++lt)this[lt+j]=le[lt%L]}return this};var It=/[^+/0-9A-Za-z-_]/g;function ft(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(It,""),ie.length<2)return"";for(;ie.length%4!==0;)ie=ie+"=";return ie}function St(ie){return ie<16?"0"+ie.toString(16):ie.toString(16)}function Gt(ie,B){B=B||1/0;for(var j,ge=ie.length,Be=null,et=[],lt=0;lt<ge;++lt){if(j=ie.charCodeAt(lt),j>55295&&j<57344){if(!Be){if(j>56319){(B-=3)>-1&&et.push(239,191,189);continue}else if(lt+1===ge){(B-=3)>-1&&et.push(239,191,189);continue}Be=j;continue}if(j<56320){(B-=3)>-1&&et.push(239,191,189),Be=j;continue}j=(Be-55296<<10|j-56320)+65536}else Be&&(B-=3)>-1&&et.push(239,191,189);if(Be=null,j<128){if((B-=1)<0)break;et.push(j)}else if(j<2048){if((B-=2)<0)break;et.push(j>>6|192,j&63|128)}else if(j<65536){if((B-=3)<0)break;et.push(j>>12|224,j>>6&63|128,j&63|128)}else if(j<1114112){if((B-=4)<0)break;et.push(j>>18|240,j>>12&63|128,j>>6&63|128,j&63|128)}else throw new Error("Invalid code point")}return et}function Ut(ie){for(var B=[],j=0;j<ie.length;++j)B.push(ie.charCodeAt(j)&255);return B}function cn(ie,B){for(var j,ge,Be,et=[],lt=0;lt<ie.length&&!((B-=2)<0);++lt)j=ie.charCodeAt(lt),ge=j>>8,Be=j%256,et.push(Be),et.push(ge);return et}function xn(ie){return g.toByteArray(ft(ie))}function yn(ie,B,j,ge){for(var Be=0;Be<ge&&!(Be+j>=B.length||Be>=ie.length);++Be)B[Be+j]=ie[Be];return Be}function sn(ie,B){return ie instanceof B||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===B.name}function gn(ie){return ie!==ie}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const d=i("./validator"),g=i("./xmlparser/XMLParser"),l=i("./xmlbuilder/json2xml");a.exports={XMLParser:g,XMLValidator:d,XMLBuilder:l}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const d=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",g=d+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+d+"]["+g+"]*",b=new RegExp("^"+l+"$"),w=function(S,k){const O=[];let N=k.exec(S);for(;N;){const R=[];R.startIndex=k.lastIndex-N[0].length;const ce=N.length;for(let K=0;K<ce;K++)R.push(N[K]);O.push(R),N=k.exec(S)}return O},A=function(S){const k=b.exec(S);return!(k===null||typeof k>"u")};c.isExist=function(S){return typeof S<"u"},c.isEmptyObject=function(S){return Object.keys(S).length===0},c.merge=function(S,k,O){if(k){const N=Object.keys(k),R=N.length;for(let ce=0;ce<R;ce++)O==="strict"?S[N[ce]]=[k[N[ce]]]:S[N[ce]]=k[N[ce]]}},c.getValue=function(S){return c.isExist(S)?S:""},c.isName=A,c.getAllMatches=w,c.nameRegexp=l},{}],5:[function(i,a,c){const d=i("./util"),g={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(V,C){C=Object.assign({},g,C);const F=[];let D=!1,Q=!1;V[0]==="\uFEFF"&&(V=V.substr(1));for(let Y=0;Y<V.length;Y++)if(V[Y]==="<"&&V[Y+1]==="?"){if(Y+=2,Y=b(V,Y),Y.err)return Y}else if(V[Y]==="<"){let _e=Y;if(Y++,V[Y]==="!"){Y=w(V,Y);continue}else{let we=!1;V[Y]==="/"&&(we=!0,Y++);let pe="";for(;Y<V.length&&V[Y]!==">"&&V[Y]!==" "&&V[Y]!=="	"&&V[Y]!==`
`&&V[Y]!=="\r";Y++)pe+=V[Y];if(pe=pe.trim(),pe[pe.length-1]==="/"&&(pe=pe.substring(0,pe.length-1),Y--),!G(pe)){let te;return pe.trim().length===0?te="Invalid space after '<'.":te="Tag '"+pe+"' is an invalid name.",K("InvalidTag",te,se(V,Y))}const oe=k(V,Y);if(oe===!1)return K("InvalidAttr","Attributes for '"+pe+"' have open quote.",se(V,Y));let ue=oe.value;if(Y=oe.index,ue[ue.length-1]==="/"){const te=Y-ue.length;ue=ue.substring(0,ue.length-1);const ne=N(ue,C);if(ne===!0)D=!0;else return K(ne.err.code,ne.err.msg,se(V,te+ne.err.line))}else if(we)if(oe.tagClosed){if(ue.trim().length>0)return K("InvalidTag","Closing tag '"+pe+"' can't have attributes or invalid starting.",se(V,_e));{const te=F.pop();if(pe!==te.tagName){let ne=se(V,te.tagStartPos);return K("InvalidTag","Expected closing tag '"+te.tagName+"' (opened in line "+ne.line+", col "+ne.col+") instead of closing tag '"+pe+"'.",se(V,_e))}F.length==0&&(Q=!0)}}else return K("InvalidTag","Closing tag '"+pe+"' doesn't have proper closing.",se(V,Y));else{const te=N(ue,C);if(te!==!0)return K(te.err.code,te.err.msg,se(V,Y-ue.length+te.err.line));if(Q===!0)return K("InvalidXml","Multiple possible root nodes found.",se(V,Y));C.unpairedTags.indexOf(pe)!==-1||F.push({tagName:pe,tagStartPos:_e}),D=!0}for(Y++;Y<V.length;Y++)if(V[Y]==="<")if(V[Y+1]==="!"){Y++,Y=w(V,Y);continue}else if(V[Y+1]==="?"){if(Y=b(V,++Y),Y.err)return Y}else break;else if(V[Y]==="&"){const te=ce(V,Y);if(te==-1)return K("InvalidChar","char '&' is not expected.",se(V,Y));Y=te}else if(Q===!0&&!l(V[Y]))return K("InvalidXml","Extra text at the end",se(V,Y));V[Y]==="<"&&Y--}}else{if(l(V[Y]))continue;return K("InvalidChar","char '"+V[Y]+"' is not expected.",se(V,Y))}if(D){if(F.length==1)return K("InvalidTag","Unclosed tag '"+F[0].tagName+"'.",se(V,F[0].tagStartPos));if(F.length>0)return K("InvalidXml","Invalid '"+JSON.stringify(F.map(Y=>Y.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return K("InvalidXml","Start tag expected.",1);return!0};function l(V){return V===" "||V==="	"||V===`
`||V==="\r"}function b(V,C){const F=C;for(;C<V.length;C++)if(V[C]=="?"||V[C]==" "){const D=V.substr(F,C-F);if(C>5&&D==="xml")return K("InvalidXml","XML declaration allowed only at the start of the document.",se(V,C));if(V[C]=="?"&&V[C+1]==">"){C++;break}else continue}return C}function w(V,C){if(V.length>C+5&&V[C+1]==="-"&&V[C+2]==="-"){for(C+=3;C<V.length;C++)if(V[C]==="-"&&V[C+1]==="-"&&V[C+2]===">"){C+=2;break}}else if(V.length>C+8&&V[C+1]==="D"&&V[C+2]==="O"&&V[C+3]==="C"&&V[C+4]==="T"&&V[C+5]==="Y"&&V[C+6]==="P"&&V[C+7]==="E"){let F=1;for(C+=8;C<V.length;C++)if(V[C]==="<")F++;else if(V[C]===">"&&(F--,F===0))break}else if(V.length>C+9&&V[C+1]==="["&&V[C+2]==="C"&&V[C+3]==="D"&&V[C+4]==="A"&&V[C+5]==="T"&&V[C+6]==="A"&&V[C+7]==="["){for(C+=8;C<V.length;C++)if(V[C]==="]"&&V[C+1]==="]"&&V[C+2]===">"){C+=2;break}}return C}const A='"',S="'";function k(V,C){let F="",D="",Q=!1;for(;C<V.length;C++){if(V[C]===A||V[C]===S)D===""?D=V[C]:D!==V[C]||(D="");else if(V[C]===">"&&D===""){Q=!0;break}F+=V[C]}return D!==""?!1:{value:F,index:C,tagClosed:Q}}const O=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function N(V,C){const F=d.getAllMatches(V,O),D={};for(let Q=0;Q<F.length;Q++){if(F[Q][1].length===0)return K("InvalidAttr","Attribute '"+F[Q][2]+"' has no space in starting.",X(F[Q]));if(F[Q][3]!==void 0&&F[Q][4]===void 0)return K("InvalidAttr","Attribute '"+F[Q][2]+"' is without value.",X(F[Q]));if(F[Q][3]===void 0&&!C.allowBooleanAttributes)return K("InvalidAttr","boolean attribute '"+F[Q][2]+"' is not allowed.",X(F[Q]));const Y=F[Q][2];if(!H(Y))return K("InvalidAttr","Attribute '"+Y+"' is an invalid name.",X(F[Q]));if(!D.hasOwnProperty(Y))D[Y]=1;else return K("InvalidAttr","Attribute '"+Y+"' is repeated.",X(F[Q]))}return!0}function R(V,C){let F=/\d/;for(V[C]==="x"&&(C++,F=/[\da-fA-F]/);C<V.length;C++){if(V[C]===";")return C;if(!V[C].match(F))break}return-1}function ce(V,C){if(C++,V[C]===";")return-1;if(V[C]==="#")return C++,R(V,C);let F=0;for(;C<V.length;C++,F++)if(!(V[C].match(/\w/)&&F<20)){if(V[C]===";")break;return-1}return C}function K(V,C,F){return{err:{code:V,msg:C,line:F.line||F,col:F.col}}}function H(V){return d.isName(V)}function G(V){return d.isName(V)}function se(V,C){const F=V.substring(0,C).split(/\r?\n/);return{line:F.length,col:F[F.length-1].length+1}}function X(V){return V.startIndex+V[1].length}},{"./util":4}],6:[function(i,a,c){const d=i("./orderedJs2Xml"),g={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(S,k){return k},attributeValueProcessor:function(S,k){return k},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function l(S){this.options=Object.assign({},g,S),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=A),this.processTextOrObjNode=b,this.options.format?(this.indentate=w,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}l.prototype.build=function(S){return this.options.preserveOrder?d(S,this.options):(Array.isArray(S)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(S={[this.options.arrayNodeName]:S}),this.j2x(S,0).val)},l.prototype.j2x=function(S,k){let O="",N="";for(let R in S)if(Object.prototype.hasOwnProperty.call(S,R))if(typeof S[R]>"u")this.isAttribute(R)&&(N+="");else if(S[R]===null)this.isAttribute(R)?N+="":R[0]==="?"?N+=this.indentate(k)+"<"+R+"?"+this.tagEndChar:N+=this.indentate(k)+"<"+R+"/"+this.tagEndChar;else if(S[R]instanceof Date)N+=this.buildTextValNode(S[R],R,"",k);else if(typeof S[R]!="object"){const ce=this.isAttribute(R);if(ce)O+=this.buildAttrPairStr(ce,""+S[R]);else if(R===this.options.textNodeName){let K=this.options.tagValueProcessor(R,""+S[R]);N+=this.replaceEntitiesValue(K)}else N+=this.buildTextValNode(S[R],R,"",k)}else if(Array.isArray(S[R])){const ce=S[R].length;let K="";for(let H=0;H<ce;H++){const G=S[R][H];typeof G>"u"||(G===null?R[0]==="?"?N+=this.indentate(k)+"<"+R+"?"+this.tagEndChar:N+=this.indentate(k)+"<"+R+"/"+this.tagEndChar:typeof G=="object"?this.options.oneListGroup?K+=this.j2x(G,k+1).val:K+=this.processTextOrObjNode(G,R,k):K+=this.buildTextValNode(G,R,"",k))}this.options.oneListGroup&&(K=this.buildObjectNode(K,R,"",k)),N+=K}else if(this.options.attributesGroupName&&R===this.options.attributesGroupName){const ce=Object.keys(S[R]),K=ce.length;for(let H=0;H<K;H++)O+=this.buildAttrPairStr(ce[H],""+S[R][ce[H]])}else N+=this.processTextOrObjNode(S[R],R,k);return{attrStr:O,val:N}},l.prototype.buildAttrPairStr=function(S,k){return k=this.options.attributeValueProcessor(S,""+k),k=this.replaceEntitiesValue(k),this.options.suppressBooleanAttributes&&k==="true"?" "+S:" "+S+'="'+k+'"'};function b(S,k,O){const N=this.j2x(S,O+1);return S[this.options.textNodeName]!==void 0&&Object.keys(S).length===1?this.buildTextValNode(S[this.options.textNodeName],k,N.attrStr,O):this.buildObjectNode(N.val,k,N.attrStr,O)}l.prototype.buildObjectNode=function(S,k,O,N){if(S==="")return k[0]==="?"?this.indentate(N)+"<"+k+O+"?"+this.tagEndChar:this.indentate(N)+"<"+k+O+this.closeTag(k)+this.tagEndChar;{let R="</"+k+this.tagEndChar,ce="";return k[0]==="?"&&(ce="?",R=""),(O||O==="")&&S.indexOf("<")===-1?this.indentate(N)+"<"+k+O+ce+">"+S+R:this.options.commentPropName!==!1&&k===this.options.commentPropName&&ce.length===0?this.indentate(N)+`<!--${S}-->`+this.newLine:this.indentate(N)+"<"+k+O+ce+this.tagEndChar+S+this.indentate(N)+R}},l.prototype.closeTag=function(S){let k="";return this.options.unpairedTags.indexOf(S)!==-1?this.options.suppressUnpairedNode||(k="/"):this.options.suppressEmptyNode?k="/":k=`></${S}`,k},l.prototype.buildTextValNode=function(S,k,O,N){if(this.options.cdataPropName!==!1&&k===this.options.cdataPropName)return this.indentate(N)+`<![CDATA[${S}]]>`+this.newLine;if(this.options.commentPropName!==!1&&k===this.options.commentPropName)return this.indentate(N)+`<!--${S}-->`+this.newLine;if(k[0]==="?")return this.indentate(N)+"<"+k+O+"?"+this.tagEndChar;{let R=this.options.tagValueProcessor(k,S);return R=this.replaceEntitiesValue(R),R===""?this.indentate(N)+"<"+k+O+this.closeTag(k)+this.tagEndChar:this.indentate(N)+"<"+k+O+">"+R+"</"+k+this.tagEndChar}},l.prototype.replaceEntitiesValue=function(S){if(S&&S.length>0&&this.options.processEntities)for(let k=0;k<this.options.entities.length;k++){const O=this.options.entities[k];S=S.replace(O.regex,O.val)}return S};function w(S){return this.options.indentBy.repeat(S)}function A(S){return S.startsWith(this.options.attributeNamePrefix)&&S!==this.options.textNodeName?S.substr(this.attrPrefixLen):!1}a.exports=l},{"./orderedJs2Xml":7}],7:[function(i,a,c){const d=`
`;function g(k,O){let N="";return O.format&&O.indentBy.length>0&&(N=d),l(k,O,"",N)}function l(k,O,N,R){let ce="",K=!1;for(let H=0;H<k.length;H++){const G=k[H],se=b(G);if(se===void 0)continue;let X="";if(N.length===0?X=se:X=`${N}.${se}`,se===O.textNodeName){let Q=G[se];A(X,O)||(Q=O.tagValueProcessor(se,Q),Q=S(Q,O)),K&&(ce+=R),ce+=Q,K=!1;continue}else if(se===O.cdataPropName){K&&(ce+=R),ce+=`<![CDATA[${G[se][0][O.textNodeName]}]]>`,K=!1;continue}else if(se===O.commentPropName){ce+=R+`<!--${G[se][0][O.textNodeName]}-->`,K=!0;continue}else if(se[0]==="?"){const Q=w(G[":@"],O),Y=se==="?xml"?"":R;let _e=G[se][0][O.textNodeName];_e=_e.length!==0?" "+_e:"",ce+=Y+`<${se}${_e}${Q}?>`,K=!0;continue}let V=R;V!==""&&(V+=O.indentBy);const C=w(G[":@"],O),F=R+`<${se}${C}`,D=l(G[se],O,X,V);O.unpairedTags.indexOf(se)!==-1?O.suppressUnpairedNode?ce+=F+">":ce+=F+"/>":(!D||D.length===0)&&O.suppressEmptyNode?ce+=F+"/>":D&&D.endsWith(">")?ce+=F+`>${D}${R}</${se}>`:(ce+=F+">",D&&R!==""&&(D.includes("/>")||D.includes("</"))?ce+=R+O.indentBy+D+R:ce+=D,ce+=`</${se}>`),K=!0}return ce}function b(k){const O=Object.keys(k);for(let N=0;N<O.length;N++){const R=O[N];if(k.hasOwnProperty(R)&&R!==":@")return R}}function w(k,O){let N="";if(k&&!O.ignoreAttributes)for(let R in k){if(!k.hasOwnProperty(R))continue;let ce=O.attributeValueProcessor(R,k[R]);ce=S(ce,O),ce===!0&&O.suppressBooleanAttributes?N+=` ${R.substr(O.attributeNamePrefix.length)}`:N+=` ${R.substr(O.attributeNamePrefix.length)}="${ce}"`}return N}function A(k,O){k=k.substr(0,k.length-O.textNodeName.length-1);let N=k.substr(k.lastIndexOf(".")+1);for(let R in O.stopNodes)if(O.stopNodes[R]===k||O.stopNodes[R]==="*."+N)return!0;return!1}function S(k,O){if(k&&k.length>0&&O.processEntities)for(let N=0;N<O.entities.length;N++){const R=O.entities[N];k=k.replace(R.regex,R.val)}return k}a.exports=g},{}],8:[function(i,a,c){const d=i("../util");function g(N,R){const ce={};if(N[R+3]==="O"&&N[R+4]==="C"&&N[R+5]==="T"&&N[R+6]==="Y"&&N[R+7]==="P"&&N[R+8]==="E"){R=R+9;let K=1,H=!1,G=!1,se="";for(;R<N.length;R++)if(N[R]==="<"&&!G){if(H&&w(N,R))R+=7,[entityName,val,R]=l(N,R+1),val.indexOf("&")===-1&&(ce[O(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(H&&A(N,R))R+=8;else if(H&&S(N,R))R+=8;else if(H&&k(N,R))R+=9;else if(b)G=!0;else throw new Error("Invalid DOCTYPE");K++,se=""}else if(N[R]===">"){if(G?N[R-1]==="-"&&N[R-2]==="-"&&(G=!1,K--):K--,K===0)break}else N[R]==="["?H=!0:se+=N[R];if(K!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:ce,i:R}}function l(N,R){let ce="";for(;R<N.length&&N[R]!=="'"&&N[R]!=='"';R++)ce+=N[R];if(ce=ce.trim(),ce.indexOf(" ")!==-1)throw new Error("External entites are not supported");const K=N[R++];let H="";for(;R<N.length&&N[R]!==K;R++)H+=N[R];return[ce,H,R]}function b(N,R){return N[R+1]==="!"&&N[R+2]==="-"&&N[R+3]==="-"}function w(N,R){return N[R+1]==="!"&&N[R+2]==="E"&&N[R+3]==="N"&&N[R+4]==="T"&&N[R+5]==="I"&&N[R+6]==="T"&&N[R+7]==="Y"}function A(N,R){return N[R+1]==="!"&&N[R+2]==="E"&&N[R+3]==="L"&&N[R+4]==="E"&&N[R+5]==="M"&&N[R+6]==="E"&&N[R+7]==="N"&&N[R+8]==="T"}function S(N,R){return N[R+1]==="!"&&N[R+2]==="A"&&N[R+3]==="T"&&N[R+4]==="T"&&N[R+5]==="L"&&N[R+6]==="I"&&N[R+7]==="S"&&N[R+8]==="T"}function k(N,R){return N[R+1]==="!"&&N[R+2]==="N"&&N[R+3]==="O"&&N[R+4]==="T"&&N[R+5]==="A"&&N[R+6]==="T"&&N[R+7]==="I"&&N[R+8]==="O"&&N[R+9]==="N"}function O(N){if(d.isName(N))return N;throw new Error(`Invalid entity name ${N}`)}a.exports=g},{"../util":4}],9:[function(i,a,c){const d={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(l,b){return b},attributeValueProcessor:function(l,b){return b},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(l,b,w){return l}},g=function(l){return Object.assign({},d,l)};c.buildOptions=g,c.defaultOptions=d},{}],10:[function(i,a,c){const d=i("../util"),g=i("./xmlNode"),l=i("./DocTypeReader"),b=i("strnum");class w{constructor(Q){this.options=Q,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=A,this.parseXml=R,this.parseTextData=S,this.resolveNameSpace=k,this.buildAttributesMap=N,this.isItStopNode=G,this.replaceEntitiesValue=K,this.readStopNodeData=C,this.saveTextToParentTag=H,this.addChild=ce}}function A(D){const Q=Object.keys(D);for(let Y=0;Y<Q.length;Y++){const _e=Q[Y];this.lastEntities[_e]={regex:new RegExp("&"+_e+";","g"),val:D[_e]}}}function S(D,Q,Y,_e,we,pe,oe){if(D!==void 0&&(this.options.trimValues&&!_e&&(D=D.trim()),D.length>0)){oe||(D=this.replaceEntitiesValue(D));const ue=this.options.tagValueProcessor(Q,D,Y,we,pe);return ue==null?D:typeof ue!=typeof D||ue!==D?ue:this.options.trimValues?F(D,this.options.parseTagValue,this.options.numberParseOptions):D.trim()===D?F(D,this.options.parseTagValue,this.options.numberParseOptions):D}}function k(D){if(this.options.removeNSPrefix){const Q=D.split(":"),Y=D.charAt(0)==="/"?"/":"";if(Q[0]==="xmlns")return"";Q.length===2&&(D=Y+Q[1])}return D}const O=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function N(D,Q,Y){if(!this.options.ignoreAttributes&&typeof D=="string"){const _e=d.getAllMatches(D,O),we=_e.length,pe={};for(let oe=0;oe<we;oe++){const ue=this.resolveNameSpace(_e[oe][1]);let te=_e[oe][4],ne=this.options.attributeNamePrefix+ue;if(ue.length)if(this.options.transformAttributeName&&(ne=this.options.transformAttributeName(ne)),ne==="__proto__"&&(ne="#__proto__"),te!==void 0){this.options.trimValues&&(te=te.trim()),te=this.replaceEntitiesValue(te);const de=this.options.attributeValueProcessor(ue,te,Q);de==null?pe[ne]=te:typeof de!=typeof te||de!==te?pe[ne]=de:pe[ne]=F(te,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(pe[ne]=!0)}if(!Object.keys(pe).length)return;if(this.options.attributesGroupName){const oe={};return oe[this.options.attributesGroupName]=pe,oe}return pe}}const R=function(D){D=D.replace(/\r\n?/g,`
`);const Q=new g("!xml");let Y=Q,_e="",we="";for(let pe=0;pe<D.length;pe++)if(D[pe]==="<")if(D[pe+1]==="/"){const ue=X(D,">",pe,"Closing Tag is not closed.");let te=D.substring(pe+2,ue).trim();if(this.options.removeNSPrefix){const Se=te.indexOf(":");Se!==-1&&(te=te.substr(Se+1))}this.options.transformTagName&&(te=this.options.transformTagName(te)),Y&&(_e=this.saveTextToParentTag(_e,Y,we));const ne=we.substring(we.lastIndexOf(".")+1);if(te&&this.options.unpairedTags.indexOf(te)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${te}>`);let de=0;ne&&this.options.unpairedTags.indexOf(ne)!==-1?(de=we.lastIndexOf(".",we.lastIndexOf(".")-1),this.tagsNodeStack.pop()):de=we.lastIndexOf("."),we=we.substring(0,de),Y=this.tagsNodeStack.pop(),_e="",pe=ue}else if(D[pe+1]==="?"){let ue=V(D,pe,!1,"?>");if(!ue)throw new Error("Pi Tag is not closed.");if(_e=this.saveTextToParentTag(_e,Y,we),!(this.options.ignoreDeclaration&&ue.tagName==="?xml"||this.options.ignorePiTags)){const te=new g(ue.tagName);te.add(this.options.textNodeName,""),ue.tagName!==ue.tagExp&&ue.attrExpPresent&&(te[":@"]=this.buildAttributesMap(ue.tagExp,we,ue.tagName)),this.addChild(Y,te,we)}pe=ue.closeIndex+1}else if(D.substr(pe+1,3)==="!--"){const ue=X(D,"-->",pe+4,"Comment is not closed.");if(this.options.commentPropName){const te=D.substring(pe+4,ue-2);_e=this.saveTextToParentTag(_e,Y,we),Y.add(this.options.commentPropName,[{[this.options.textNodeName]:te}])}pe=ue}else if(D.substr(pe+1,2)==="!D"){const ue=l(D,pe);this.docTypeEntities=ue.entities,pe=ue.i}else if(D.substr(pe+1,2)==="!["){const ue=X(D,"]]>",pe,"CDATA is not closed.")-2,te=D.substring(pe+9,ue);if(_e=this.saveTextToParentTag(_e,Y,we),this.options.cdataPropName)Y.add(this.options.cdataPropName,[{[this.options.textNodeName]:te}]);else{let ne=this.parseTextData(te,Y.tagname,we,!0,!1,!0);ne==null&&(ne=""),Y.add(this.options.textNodeName,ne)}pe=ue+2}else{let ue=V(D,pe,this.options.removeNSPrefix),te=ue.tagName;const ne=ue.rawTagName;let de=ue.tagExp,Se=ue.attrExpPresent,Te=ue.closeIndex;this.options.transformTagName&&(te=this.options.transformTagName(te)),Y&&_e&&Y.tagname!=="!xml"&&(_e=this.saveTextToParentTag(_e,Y,we,!1));const $e=Y;if($e&&this.options.unpairedTags.indexOf($e.tagname)!==-1&&(Y=this.tagsNodeStack.pop(),we=we.substring(0,we.lastIndexOf("."))),te!==Q.tagname&&(we+=we?"."+te:te),this.isItStopNode(this.options.stopNodes,we,te)){let Ie="";if(de.length>0&&de.lastIndexOf("/")===de.length-1)pe=ue.closeIndex;else if(this.options.unpairedTags.indexOf(te)!==-1)pe=ue.closeIndex;else{const We=this.readStopNodeData(D,ne,Te+1);if(!We)throw new Error(`Unexpected end of ${ne}`);pe=We.i,Ie=We.tagContent}const Le=new g(te);te!==de&&Se&&(Le[":@"]=this.buildAttributesMap(de,we,te)),Ie&&(Ie=this.parseTextData(Ie,te,we,!0,Se,!0,!0)),we=we.substr(0,we.lastIndexOf(".")),Le.add(this.options.textNodeName,Ie),this.addChild(Y,Le,we)}else{if(de.length>0&&de.lastIndexOf("/")===de.length-1){te[te.length-1]==="/"?(te=te.substr(0,te.length-1),we=we.substr(0,we.length-1),de=te):de=de.substr(0,de.length-1),this.options.transformTagName&&(te=this.options.transformTagName(te));const Ie=new g(te);te!==de&&Se&&(Ie[":@"]=this.buildAttributesMap(de,we,te)),this.addChild(Y,Ie,we),we=we.substr(0,we.lastIndexOf("."))}else{const Ie=new g(te);this.tagsNodeStack.push(Y),te!==de&&Se&&(Ie[":@"]=this.buildAttributesMap(de,we,te)),this.addChild(Y,Ie,we),Y=Ie}_e="",pe=Te}}else _e+=D[pe];return Q.child};function ce(D,Q,Y){const _e=this.options.updateTag(Q.tagname,Y,Q[":@"]);_e===!1||(typeof _e=="string"&&(Q.tagname=_e),D.addChild(Q))}const K=function(D){if(this.options.processEntities){for(let Q in this.docTypeEntities){const Y=this.docTypeEntities[Q];D=D.replace(Y.regx,Y.val)}for(let Q in this.lastEntities){const Y=this.lastEntities[Q];D=D.replace(Y.regex,Y.val)}if(this.options.htmlEntities)for(let Q in this.htmlEntities){const Y=this.htmlEntities[Q];D=D.replace(Y.regex,Y.val)}D=D.replace(this.ampEntity.regex,this.ampEntity.val)}return D};function H(D,Q,Y,_e){return D&&(_e===void 0&&(_e=Object.keys(Q.child).length===0),D=this.parseTextData(D,Q.tagname,Y,!1,Q[":@"]?Object.keys(Q[":@"]).length!==0:!1,_e),D!==void 0&&D!==""&&Q.add(this.options.textNodeName,D),D=""),D}function G(D,Q,Y){const _e="*."+Y;for(const we in D){const pe=D[we];if(_e===pe||Q===pe)return!0}return!1}function se(D,Q,Y=">"){let _e,we="";for(let pe=Q;pe<D.length;pe++){let oe=D[pe];if(_e)oe===_e&&(_e="");else if(oe==='"'||oe==="'")_e=oe;else if(oe===Y[0])if(Y[1]){if(D[pe+1]===Y[1])return{data:we,index:pe}}else return{data:we,index:pe};else oe==="	"&&(oe=" ");we+=oe}}function X(D,Q,Y,_e){const we=D.indexOf(Q,Y);if(we===-1)throw new Error(_e);return we+Q.length-1}function V(D,Q,Y,_e=">"){const we=se(D,Q+1,_e);if(!we)return;let pe=we.data;const oe=we.index,ue=pe.search(/\s/);let te=pe,ne=!0;ue!==-1&&(te=pe.substring(0,ue),pe=pe.substring(ue+1).trimStart());const de=te;if(Y){const Se=te.indexOf(":");Se!==-1&&(te=te.substr(Se+1),ne=te!==we.data.substr(Se+1))}return{tagName:te,tagExp:pe,closeIndex:oe,attrExpPresent:ne,rawTagName:de}}function C(D,Q,Y){const _e=Y;let we=1;for(;Y<D.length;Y++)if(D[Y]==="<")if(D[Y+1]==="/"){const pe=X(D,">",Y,`${Q} is not closed`);if(D.substring(Y+2,pe).trim()===Q&&(we--,we===0))return{tagContent:D.substring(_e,Y),i:pe};Y=pe}else if(D[Y+1]==="?")Y=X(D,"?>",Y+1,"StopNode is not closed.");else if(D.substr(Y+1,3)==="!--")Y=X(D,"-->",Y+3,"StopNode is not closed.");else if(D.substr(Y+1,2)==="![")Y=X(D,"]]>",Y,"StopNode is not closed.")-2;else{const pe=V(D,Y,">");pe&&((pe&&pe.tagName)===Q&&pe.tagExp[pe.tagExp.length-1]!=="/"&&we++,Y=pe.closeIndex)}}function F(D,Q,Y){if(Q&&typeof D=="string"){const _e=D.trim();return _e==="true"?!0:_e==="false"?!1:b(D,Y)}else return d.isExist(D)?D:""}a.exports=w},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:d}=i("./OptionsBuilder"),g=i("./OrderedObjParser"),{prettify:l}=i("./node2json"),b=i("../validator");class w{constructor(S){this.externalEntities={},this.options=d(S)}parse(S,k){if(typeof S!="string")if(S.toString)S=S.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(k){k===!0&&(k={});const R=b.validate(S,k);if(R!==!0)throw Error(`${R.err.msg}:${R.err.line}:${R.err.col}`)}const O=new g(this.options);O.addExternalEntities(this.externalEntities);const N=O.parseXml(S);return this.options.preserveOrder||N===void 0?N:l(N,this.options)}addEntity(S,k){if(k.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(S.indexOf("&")!==-1||S.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(k==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[S]=k}}a.exports=w},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function d(A,S){return g(A,S)}function g(A,S,k){let O;const N={};for(let R=0;R<A.length;R++){const ce=A[R],K=l(ce);let H="";if(k===void 0?H=K:H=k+"."+K,K===S.textNodeName)O===void 0?O=ce[K]:O+=""+ce[K];else{if(K===void 0)continue;if(ce[K]){let G=g(ce[K],S,H);const se=w(G,S);ce[":@"]?b(G,ce[":@"],H,S):Object.keys(G).length===1&&G[S.textNodeName]!==void 0&&!S.alwaysCreateTextNode?G=G[S.textNodeName]:Object.keys(G).length===0&&(S.alwaysCreateTextNode?G[S.textNodeName]="":G=""),N[K]!==void 0&&N.hasOwnProperty(K)?(Array.isArray(N[K])||(N[K]=[N[K]]),N[K].push(G)):S.isArray(K,H,se)?N[K]=[G]:N[K]=G}}}return typeof O=="string"?O.length>0&&(N[S.textNodeName]=O):O!==void 0&&(N[S.textNodeName]=O),N}function l(A){const S=Object.keys(A);for(let k=0;k<S.length;k++){const O=S[k];if(O!==":@")return O}}function b(A,S,k,O){if(S){const N=Object.keys(S),R=N.length;for(let ce=0;ce<R;ce++){const K=N[ce];O.isArray(K,k+"."+K,!0,!0)?A[K]=[S[K]]:A[K]=S[K]}}}function w(A,S){const{textNodeName:k}=S,O=Object.keys(A).length;return!!(O===0||O===1&&(A[k]||typeof A[k]=="boolean"||A[k]===0))}c.prettify=d},{}],13:[function(i,a,c){class d{constructor(l){this.tagname=l,this.child=[],this[":@"]={}}add(l,b){l==="__proto__"&&(l="#__proto__"),this.child.push({[l]:b})}addChild(l){l.tagname==="__proto__"&&(l.tagname="#__proto__"),l[":@"]&&Object.keys(l[":@"]).length>0?this.child.push({[l.tagname]:l.child,":@":l[":@"]}):this.child.push({[l.tagname]:l.child})}}a.exports=d},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(d,g,l,b,w){var A,S,k=w*8-b-1,O=(1<<k)-1,N=O>>1,R=-7,ce=l?w-1:0,K=l?-1:1,H=d[g+ce];for(ce+=K,A=H&(1<<-R)-1,H>>=-R,R+=k;R>0;A=A*256+d[g+ce],ce+=K,R-=8);for(S=A&(1<<-R)-1,A>>=-R,R+=b;R>0;S=S*256+d[g+ce],ce+=K,R-=8);if(A===0)A=1-N;else{if(A===O)return S?NaN:(H?-1:1)*(1/0);S=S+Math.pow(2,b),A=A-N}return(H?-1:1)*S*Math.pow(2,A-b)},c.write=function(d,g,l,b,w,A){var S,k,O,N=A*8-w-1,R=(1<<N)-1,ce=R>>1,K=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=b?0:A-1,G=b?1:-1,se=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(k=isNaN(g)?1:0,S=R):(S=Math.floor(Math.log(g)/Math.LN2),g*(O=Math.pow(2,-S))<1&&(S--,O*=2),S+ce>=1?g+=K/O:g+=K*Math.pow(2,1-ce),g*O>=2&&(S++,O/=2),S+ce>=R?(k=0,S=R):S+ce>=1?(k=(g*O-1)*Math.pow(2,w),S=S+ce):(k=g*Math.pow(2,ce-1)*Math.pow(2,w),S=0));w>=8;d[l+H]=k&255,H+=G,k/=256,w-=8);for(S=S<<w|k,N+=w;N>0;d[l+H]=S&255,H+=G,S/=256,N-=8);d[l+H-G]|=se*128}},{}],15:[function(i,a,c){const d=/^[-+]?0x[a-fA-F0-9]+$/,g=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const l={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function b(A,S={}){if(S=Object.assign({},l,S),!A||typeof A!="string")return A;let k=A.trim();if(S.skipLike!==void 0&&S.skipLike.test(k))return A;if(S.hex&&d.test(k))return Number.parseInt(k,16);{const O=g.exec(k);if(O){const N=O[1],R=O[2];let ce=w(O[3]);const K=O[4]||O[6];if(!S.leadingZeros&&R.length>0&&N&&k[2]!==".")return A;if(!S.leadingZeros&&R.length>0&&!N&&k[1]!==".")return A;{const H=Number(k),G=""+H;return G.search(/[eE]/)!==-1||K?S.eNotation?H:A:k.indexOf(".")!==-1?G==="0"&&ce===""||G===ce||N&&G==="-"+ce?H:A:R?ce===G||N+ce===G?H:A:k===G||k===N+G?H:A}}else return A}}function w(A){return A&&A.indexOf(".")!==-1&&(A=A.replace(/0+$/,""),A==="."?A="0":A[0]==="."?A="0"+A:A[A.length-1]==="."&&(A=A.substr(0,A.length-1))),A}a.exports=b},{}],16:[function(i,a,c){(function(d){(function(){var g=this&&this.__awaiter||function(k,O,N,R){function ce(K){return K instanceof N?K:new N(function(H){H(K)})}return new(N||(N=Promise))(function(K,H){function G(V){try{X(R.next(V))}catch(C){H(C)}}function se(V){try{X(R.throw(V))}catch(C){H(C)}}function X(V){V.done?K(V.value):ce(V.value).then(G,se)}X((R=R.apply(k,O||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const l=i("../auth"),b=i("../config"),w=i("./_xml"),A=k=>typeof btoa>"u"?d.from(k,"binary").toString("base64"):btoa(k);function S(k,O,N){return g(this,void 0,void 0,function*(){const{apiUrl:R,authHeader:ce,basicAuth:K,userAgent:H}=(0,b.getConfig)(),G=K&&`Basic ${A(`${K.username}:${K.password}`)}`,se=(0,l.getAuthToken)()&&`Bearer ${(0,l.getAuthToken)()}`;let X=new URLSearchParams(O).toString();X&&(X=`?${X}`);const V=yield fetch(`${R}/api${k}${X}`,Object.assign(Object.assign({},N),{headers:Object.assign({Authorization:ce||G||se||"","User-Agent":H},N==null?void 0:N.headers)})),C=V.headers.get("Content-Type");if(C!=null&&C.startsWith("application/xml")){const F=yield V.text();return yield w.xmlParser.parse(F)}if(C!=null&&C.startsWith("application/json"))return V.json();if(V.ok)return yield V.text();throw new Error(`OSM API: ${yield V.text()}`)})}c.osmFetch=S}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const d=i("fast-xml-parser");c.xmlParser=new d.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:g=>g!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const d=i("fast-xml-parser"),g=new d.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function l(A){return g.build({osm:{changeset:{tag:Object.entries(A).map(([S,k])=>({$k:S,$v:k}))}}})}c.createChangesetMetaXml=l;const b=(A,S,k)=>S.reduce((O,N)=>{const R={$id:N.id,$version:k?0:N.version,$changeset:A,tag:Object.entries(N.tags||{}).map(([ce,K])=>({$k:ce,$v:K}))};switch(N.type){case"node":{const ce=Object.assign(Object.assign({},R),{$lat:N.lat,$lon:N.lon});return Object.assign(Object.assign({},O),{node:[...O.node,ce]})}case"way":{if(!N.nodes)throw new Error("Way has no nodes");const ce=Object.assign(Object.assign({},R),{nd:N.nodes.map(K=>({$ref:K}))});return Object.assign(Object.assign({},O),{way:[...O.way,ce]})}case"relation":{if(!N.members)throw new Error("Relation has no members");const ce=Object.assign(Object.assign({},R),{member:N.members.map(K=>({$type:K.type,$ref:K.ref,$role:K.role}))});return Object.assign(Object.assign({},O),{relation:[...O.relation,ce]})}default:return O}},{node:[],way:[],relation:[]});function w(A,S,k){return g.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},k),{create:[b(A,S.create,!0)],modify:[b(A,S.modify)],delete:[Object.assign({"$if-unused":!0},b(A,S.delete))]})})}c.createOsmChangeXml=w},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const d=i("../_xml");function g(A){return{changeset:+A.$.changeset,id:+A.$.id,timestamp:A.$.timestamp,uid:+A.$.uid,user:A.$.user,version:+A.$.version,tags:A.tag?Object.fromEntries(A.tag.map(S=>[S.$.k,S.$.v])):void 0}}const l=A=>{const S=[];if(A.node){const k=A.node.map(O=>Object.assign(Object.assign({type:"node"},g(O)),{lat:+O.$.lat,lon:+O.$.lon}));S.push(...k)}if(A.way){const k=A.way.map(O=>{var N;return Object.assign(Object.assign({type:"way"},g(O)),{nodes:((N=O.nd)===null||N===void 0?void 0:N.map(R=>+R.$.ref))||[]})});S.push(...k)}if(A.relation){const k=A.relation.map(O=>{var N;return Object.assign(Object.assign({type:"relation"},g(O)),{members:((N=O.member)===null||N===void 0?void 0:N.map(R=>({ref:+R.$.ref,role:R.$.role,type:R.$.type})))||[]})});S.push(...k)}return S};function b(A){var S,k,O;return{create:((S=A.osmChange[0].create)===null||S===void 0?void 0:S.flatMap(l))||[],modify:((k=A.osmChange[0].modify)===null||k===void 0?void 0:k.flatMap(l))||[],delete:((O=A.osmChange[0].delete)===null||O===void 0?void 0:O.flatMap(l))||[]}}c.parseOsmChangeJson=b;function w(A){const S=d.xmlParser.parse(A);return b(S)}c.parseOsmChangeXml=w},{"../_xml":17}],20:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,S){function k(O){return O instanceof A?O:new A(function(N){N(O)})}return new(A||(A=Promise))(function(O,N){function R(H){try{K(S.next(H))}catch(G){N(G)}}function ce(H){try{K(S.throw(H))}catch(G){N(G)}}function K(H){H.done?O(H.value):k(H.value).then(R,ce)}K((S=S.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const g=i("../_osmFetch");function l(b,w){return d(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/changeset/${b}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(w)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=l},{"../_osmFetch":16}],21:[function(i,a,c){var d=this&&this.__awaiter||function(w,A,S,k){function O(N){return N instanceof S?N:new S(function(R){R(N)})}return new(S||(S=Promise))(function(N,R){function ce(G){try{H(k.next(G))}catch(se){R(se)}}function K(G){try{H(k.throw(G))}catch(se){R(se)}}function H(G){G.done?N(G.value):O(G.value).then(ce,K)}H((k=k.apply(w,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const g=i("../_osmFetch"),l=i("./_parseOsmChangeXml");function b(w){return d(this,void 0,void 0,function*(){const A=yield(0,g.osmFetch)(`/0.6/changeset/${w}/download`);return(0,l.parseOsmChangeJson)(A)})}c.getChangesetDiff=b},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var d=this&&this.__awaiter||function(S,k,O,N){function R(ce){return ce instanceof O?ce:new O(function(K){K(ce)})}return new(O||(O=Promise))(function(ce,K){function H(X){try{se(N.next(X))}catch(V){K(V)}}function G(X){try{se(N.throw(X))}catch(V){K(V)}}function se(X){X.done?ce(X.value):R(X.value).then(H,G)}se((N=N.apply(S,k||[])).next())})},g=this&&this.__rest||function(S,k){var O={};for(var N in S)Object.prototype.hasOwnProperty.call(S,N)&&k.indexOf(N)<0&&(O[N]=S[N]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var R=0,N=Object.getOwnPropertySymbols(S);R<N.length;R++)k.indexOf(N[R])<0&&Object.prototype.propertyIsEnumerable.call(S,N[R])&&(O[N[R]]=S[N[R]]);return O};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const l=i("../_osmFetch"),b=S=>{var k;return{id:+S.$.id,created_at:new Date(S.$.created_at),closed_at:new Date(S.$.closed_at),open:S.$.open==="true",comments_count:+S.$.comments_count,changes_count:+S.$.changes_count,min_lat:+S.$.min_lat,min_lon:+S.$.min_lon,max_lat:+S.$.max_lat,max_lon:+S.$.max_lon,uid:+S.$.uid,user:S.$.user,tags:Object.fromEntries(S.tag.map(O=>[O.$.k,O.$.v])),discussion:(k=S.discussion)===null||k===void 0?void 0:k[0].comment.map(O=>({date:new Date(O.$.date),user:O.$.user,uid:O.$.uid,text:O.text[0]}))}};function w(S){var k;return d(this,void 0,void 0,function*(){const{only:O}=S,N=g(S,["only"]);return((k=(yield(0,l.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},O&&{[O]:!0}),N))).osm[0].changeset)===null||k===void 0?void 0:k.map(b))||[]})}c.listChangesets=w;function A(S,k=!0){return d(this,void 0,void 0,function*(){return(yield(0,l.osmFetch)(`/0.6/changeset/${S}`,{include_discussion:k})).osm[0].changeset.map(b)[0]})}c.getChangeset=A},{"../_osmFetch":16}],23:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(w,A,S,k){k===void 0&&(k=S);var O=Object.getOwnPropertyDescriptor(A,S);(!O||("get"in O?!A.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return A[S]}}),Object.defineProperty(w,k,O)}:function(w,A,S,k){k===void 0&&(k=S),w[k]=A[S]}),g=this&&this.__exportStar||function(w,A){for(var S in w)S!=="default"&&!Object.prototype.hasOwnProperty.call(A,S)&&d(A,w,S)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,g(i("./createChangesetComment"),c),g(i("./getChangesetDiff"),c),g(i("./getChangesets"),c),g(i("./uploadChangeset"),c);var l=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return l.parseOsmChangeXml}});var b=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return b.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var d=this&&this.__awaiter||function(w,A,S,k){function O(N){return N instanceof S?N:new S(function(R){R(N)})}return new(S||(S=Promise))(function(N,R){function ce(G){try{H(k.next(G))}catch(se){R(se)}}function K(G){try{H(k.throw(G))}catch(se){R(se)}}function H(G){G.done?N(G.value):O(G.value).then(ce,K)}H((k=k.apply(w,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const g=i("../_osmFetch"),l=i("./_createOsmChangeXml");function b(w,A){return d(this,void 0,void 0,function*(){const S=(0,l.createChangesetMetaXml)(w),k=+(yield(0,g.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:S,headers:{"content-type":"application/xml; charset=utf-8"}})),O=(0,l.createOsmChangeXml)(k,A);return yield(0,g.osmFetch)(`/0.6/changeset/${k}/upload`,void 0,{method:"POST",body:O,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,g.osmFetch)(`/0.6/changeset/${k}/close`,void 0,{method:"PUT"}),+k})}c.uploadChangeset=b},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,S){function k(O){return O instanceof A?O:new A(function(N){N(O)})}return new(A||(A=Promise))(function(O,N){function R(H){try{K(S.next(H))}catch(G){N(G)}}function ce(H){try{K(S.throw(H))}catch(G){N(G)}}function K(H){H.done?O(H.value):k(H.value).then(R,ce)}K((S=S.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const g=i("./_osmFetch");function l(){var b;return d(this,void 0,void 0,function*(){const w=yield(0,g.osmFetch)("/capabilities");return{limits:{maxArea:+w.osm[0].api[0].area[0].$.maximum,maxNoteArea:+w.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+w.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+w.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+w.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+w.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((b=w.osm[0].policy[0].imagery[0].blacklist)===null||b===void 0?void 0:b.map(S=>S.$.regex))||[]}}})}c.getCapabilities=l},{"./_osmFetch":16}],26:[function(i,a,c){var d=this&&this.__awaiter||function(O,N,R,ce){function K(H){return H instanceof R?H:new R(function(G){G(H)})}return new(R||(R=Promise))(function(H,G){function se(C){try{V(ce.next(C))}catch(F){G(F)}}function X(C){try{V(ce.throw(C))}catch(F){G(F)}}function V(C){C.done?H(C.value):K(C.value).then(se,X)}V((ce=ce.apply(O,N||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const g=i("./_osmFetch");function l(O,N,R){return d(this,void 0,void 0,function*(){const ce=R&&O!=="node"?"/full":"";return(yield(0,g.osmFetch)(`/0.6/${O}/${N}${ce}.json`)).elements})}c.getFeature=l;function b(O,N){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${O}s.json?${O}s=${N.join(",")}`)).elements})}c.getFeatures=b;function w(O,N,R){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${O}/${N}/${R}.json`)).elements[0]})}c.getFeatureAtVersion=w;function A(O,N){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${O}/${N}/history.json`)).elements})}c.getFeatureHistory=A;function S(O){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/node/${O}/ways.json`)).elements})}c.getWaysForNode=S;function k(O,N){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${O}/${N}/relations.json`)).elements})}c.getRelationsForElement=k},{"./_osmFetch":16}],27:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,S){function k(O){return O instanceof A?O:new A(function(N){N(O)})}return new(A||(A=Promise))(function(O,N){function R(H){try{K(S.next(H))}catch(G){N(G)}}function ce(H){try{K(S.throw(H))}catch(G){N(G)}}function K(H){H.done?O(H.value):k(H.value).then(R,ce)}K((S=S.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const g=i("./_osmFetch");function l(b){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)("/0.6/map.json",{bbox:b})).elements})}c.getMapData=l},{"./_osmFetch":16}],28:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,S){function k(O){return O instanceof A?O:new A(function(N){N(O)})}return new(A||(A=Promise))(function(O,N){function R(H){try{K(S.next(H))}catch(G){N(G)}}function ce(H){try{K(S.throw(H))}catch(G){N(G)}}function K(H){H.done?O(H.value):k(H.value).then(R,ce)}K((S=S.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const g=i("./changesets");function l(b){return d(this,void 0,void 0,function*(){const w=yield(0,g.listChangesets)({display_name:b});if(!w.length)throw new Error("Could not get uid because the user has never edited the map");return w[0].uid})}c.getUIdFromDisplayName=l},{"./changesets":23}],29:[function(i,a,c){var d=this&&this.__awaiter||function(w,A,S,k){function O(N){return N instanceof S?N:new S(function(R){R(N)})}return new(S||(S=Promise))(function(N,R){function ce(G){try{H(k.next(G))}catch(se){R(se)}}function K(G){try{H(k.throw(G))}catch(se){R(se)}}function H(G){G.done?N(G.value):O(G.value).then(ce,K)}H((k=k.apply(w,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const g=i("./_osmFetch");function l(w){return d(this,void 0,void 0,function*(){const A=yield(0,g.osmFetch)(`/0.6/user/${w==="me"?"details":w}.json`);return Object.assign(Object.assign({},A.user),{account_created:new Date(A.user.account_created)})})}c.getUser=l;function b(w){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)("/0.6/users",{users:w})).users.map(S=>Object.assign(Object.assign({},S),{account_created:new Date(S.account_created)}))})}c.getUsers=b},{"./_osmFetch":16}],30:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var S=Object.getOwnPropertyDescriptor(b,w);(!S||("get"in S?!b.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,S)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),g(i("./changesets"),c),g(i("./notes"),c),g(i("./getCapabilities"),c),g(i("./getFeature"),c),g(i("./getMapData"),c),g(i("./getUIdFromDisplayName"),c),g(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var d=this&&this.__awaiter||function(k,O,N,R){function ce(K){return K instanceof N?K:new N(function(H){H(K)})}return new(N||(N=Promise))(function(K,H){function G(V){try{X(R.next(V))}catch(C){H(C)}}function se(V){try{X(R.throw(V))}catch(C){H(C)}}function X(V){V.done?K(V.value):ce(V.value).then(G,se)}X((R=R.apply(k,O||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const g=i("../_osmFetch"),l=k=>{const[O,N]=k.geometry.coordinates;return Object.assign(Object.assign({},k.properties),{location:{lat:N,lng:O}})};function b(k,O){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/notes${O?"/search":""}.json`,k)).features.map(l)})}function w(k){return b(k,!0)}c.getNotesForQuery=w;function A(k){return b({bbox:k},!1)}c.getNotesForArea=A;function S(k){return d(this,void 0,void 0,function*(){const O=yield(0,g.osmFetch)(`/0.6/notes/${k}.json`);return l(O)})}c.getNote=S},{"../_osmFetch":16}],32:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var S=Object.getOwnPropertyDescriptor(b,w);(!S||("get"in S?!b.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,S)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),g(i("./getNotes"),c),g(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var d=this&&this.__awaiter||function(A,S,k,O){function N(R){return R instanceof k?R:new k(function(ce){ce(R)})}return new(k||(k=Promise))(function(R,ce){function K(se){try{G(O.next(se))}catch(X){ce(X)}}function H(se){try{G(O.throw(se))}catch(X){ce(X)}}function G(se){se.done?R(se.value):N(se.value).then(K,H)}G((O=O.apply(A,S||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const g=i("../_osmFetch");function l(A,S,k){return d(this,void 0,void 0,function*(){yield(0,g.osmFetch)("/0.6/notes",{lat:A,lon:S,text:k})})}c.createNote=l;function b(A,S){return d(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/notes/${A}/comment`,{text:S})})}c.commentOnNote=b;function w(A,S){return d(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/notes/${A}/reopen`,{text:S})})}c.reopenNote=w},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function d(g){let l=!1;return new Promise((b,w)=>{const[A,S]=[600,550],k=Object.entries({width:A,height:S,left:window.screen.width/2-A/2,top:window.screen.height/2-S/2}).map(([R,ce])=>`${R}=${ce}`).join(","),O=window.open("about:blank","oauth_window",k);if(!O)throw new Error("Popup was blocked");O.location=g,window.authComplete=R=>{b(R),l=!0};const N=setInterval(()=>{O.closed&&(l||w(new Error("Cancelled")),clearInterval(N))},500)})}c.createPopup=d},{}],35:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,A,S){function k(O){return O instanceof A?O:new A(function(N){N(O)})}return new(A||(A=Promise))(function(O,N){function R(H){try{K(S.next(H))}catch(G){N(G)}}function ce(H){try{K(S.throw(H))}catch(G){N(G)}}function K(H){H.done?O(H.value):k(H.value).then(R,ce)}K((S=S.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const g=i("./helpers");function l(b,{options:w,pkceVerifier:A,state:S}){return d(this,void 0,void 0,function*(){const k=new URL(b).searchParams,O=k.get("error_description"),N=k.get("code"),R=k.get("state");if(O)throw new Error(O);if(!N)throw new Error("No code in OAuth response");if(!A||!S)throw new Error("No login in progress");if(S!==R)throw new Error("State Mismatch");const ce={grant_type:"authorization_code",code:N,redirect_uri:w.redirectUrl,client_id:w.clientId,code_verifier:A},K=`${(0,g.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(ce).toString()}`,G=yield(yield fetch(K,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in G)throw new Error(G.error_description);const se={issuedAt:new Date(G.created_at*1e3).toISOString(),accessToken:G.access_token,scopes:G.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(se)),delete window.authComplete,se})}c.exchangeCode=l},{"./helpers":36}],36:[function(i,a,c){var d=this&&this.__awaiter||function(A,S,k,O){function N(R){return R instanceof k?R:new k(function(ce){ce(R)})}return new(k||(k=Promise))(function(R,ce){function K(se){try{G(O.next(se))}catch(X){ce(X)}}function H(se){try{G(O.throw(se))}catch(X){ce(X)}}function G(se){se.done?R(se.value):N(se.value).then(K,H)}G((O=O.apply(A,S||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const g=i("../config");function l(A){return d(this,void 0,void 0,function*(){const S=new TextEncoder().encode(A),k=yield window.crypto.subtle.digest("SHA-256",S);return btoa(String.fromCharCode(...new Uint8Array(k))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}c.sha256=l;function b(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(A=>`0${A.toString(16)}`.slice(-2)).join("")}c.getRandomString=b;function w(){let A=(0,g.getConfig)().apiUrl;return A==="https://api.openstreetmap.org"&&(A="https://www.openstreetmap.org"),A}c.getOAuthBaseUrl=w},{"../config":39}],37:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var S=Object.getOwnPropertyDescriptor(b,w);(!S||("get"in S?!b.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,S)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),g(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var d=this&&this.__awaiter||function(O,N,R,ce){function K(H){return H instanceof R?H:new R(function(G){G(H)})}return new(R||(R=Promise))(function(H,G){function se(C){try{V(ce.next(C))}catch(F){G(F)}}function X(C){try{V(ce.throw(C))}catch(F){G(F)}}function V(C){C.done?H(C.value):K(C.value).then(se,X)}V((ce=ce.apply(O,N||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const g=i("./createPopup"),l=i("./exchangeCode"),b=i("./helpers");function w(O){return d(this,void 0,void 0,function*(){if(!O.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!O.clientId)throw new Error("You must include the 'clientId' option");if(!O.scopes)throw new Error("You must include the 'scopes' option");const N=(0,b.getRandomString)(),R=(0,b.getRandomString)(),ce=yield(0,b.sha256)(R),K={scope:O.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:N,redirect_uri:O.redirectUrl,client_id:O.clientId,code_challenge_method:"S256",code_challenge:ce},H=`${(0,b.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(K).toString()}`,G={state:N,pkceVerifier:R,options:O};if(O.mode==="popup"){const se=yield(0,g.createPopup)(H);return(0,l.exchangeCode)(se,G)}if(O.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(G)),window.location.replace(H);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=w,c.authReady=d(void 0,void 0,void 0,function*(){var O;if(typeof window>"u")return;const N=window.location.href,R=localStorage.getItem("__osmAuthTemp");if(new URL(N).searchParams.get("code")){if(!((O=window.opener)===null||O===void 0)&&O.authComplete)window.opener.authComplete(N),window.close();else if(R)try{const ce=JSON.parse(R);yield(0,l.exchangeCode)(N,ce),localStorage.removeItem("__osmAuthTemp")}catch(ce){console.error("OSM Auth Error",ce)}}});const A=()=>{try{const O=localStorage.getItem("__osmAuth");return O?JSON.parse(O).accessToken:void 0}catch{return}};c.getAuthToken=A;const S=()=>!!(0,c.getAuthToken)();c.isLoggedIn=S;function k(){localStorage.removeItem("__osmAuth")}c.logout=k},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const d={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},g=()=>d;c.getConfig=g;function l(b){Object.assign(d,b)}c.configure=l},{}],40:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var S=Object.getOwnPropertyDescriptor(b,w);(!S||("get"in S?!b.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,S)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),g(i("./api"),c),g(i("./auth"),c),g(i("./config"),c),g(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],42:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],43:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],44:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,A){A===void 0&&(A=w);var S=Object.getOwnPropertyDescriptor(b,w);(!S||("get"in S?!b.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,A,S)}:function(l,b,w,A){A===void 0&&(A=w),l[A]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),g(i("./changesets"),c),g(i("./features"),c),g(i("./general"),c),g(i("./notes"),c),g(i("./osmPatch"),c),g(i("./user"),c)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],46:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],47:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}]},{},[40])(40)})})(aI);var Ds=aI.exports;const lI=()=>{const[e,t]=yt.useState(!1);yt.useEffect(()=>{t(Ds.isLoggedIn())},[]);const i=yt.useCallback(()=>{(async()=>(await Ds.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Ds.isLoggedIn()),window.location.reload()))()},[]),a=yt.useCallback(()=>{(async()=>(Ds.logout(),t(!1)))()},[]);return pt.jsx(pt.Fragment,{children:e?pt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):pt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},Nz=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(Ds.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await Ds.getUser("me");a(c)})()},[e]),pt.jsx(pt.Fragment,{children:i?pt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):pt.jsx("img",{})})},Uz=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(Ds.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await Ds.getUser("me");a(c)})()},[e]),pt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[pt.jsxs("div",{children:[pt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?pt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):pt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),pt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[pt.jsx("div",{children:pt.jsx(Nz,{})}),pt.jsx("div",{children:pt.jsx(lI,{})})]})]})},uI=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return pt.jsxs(pt.Fragment,{children:[pt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",pt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},$z=({feature:e})=>pt.jsx(pt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return pt.jsxs("div",{className:t,children:[pt.jsx("span",{className:"underline",children:t})," = ",pt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function Df(e,t,i){return parseInt(e.substr(t,i),16)}function cI(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function z0(e,t,i){return i=i<0?i+6:i>6?i-6:i,cI(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function Vz(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],d=e[3],g=e[4]||"";t="#"+a+a+c+c+d+d+g+g}return(i==7||i>8)&&(t=e),t}}function Gz(e,t,i){let a;if(t==0){const c=cI(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,d=i*2-c;a=z0(d,c,e*6+2)+z0(d,c,e*6)+z0(d,c,e*6-2)}return"#"+a}function Lf(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,Gz(e,t,i)}const Zz=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},tS={V:"jdenticon_config",n:"config"};var Hz={};function Wz(e,t){const i=typeof e=="object"&&e||Hz[tS.n]||Zz[tS.V]||{},a=i.lightness||{},c=i.saturation||{},d="color"in c?c.color:c,g=c.grayscale,l=i.backColor,b=i.padding;function w(S,k){let O=a[S];return O&&O.length>1||(O=k),function(N){return N=O[0]+N*(O[1]-O[0]),N<0?0:N>1?1:N}}function A(S){const k=i.hues;let O;return k&&k.length>0&&(O=k[0|.999*S*k.length]),typeof O=="number"?(O/360%1+1)%1:S}return{W:A,o:typeof d=="number"?d:.5,D:typeof g=="number"?g:0,p:w("color",[.4,.8]),F:w("grayscale",[.3,.9]),G:Vz(l),X:typeof e=="number"?e:typeof b=="number"?b:t}}let em=class{constructor(t,i){this.x=t,this.y=i}};class hI{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const d=this.q+this.H,g=this.t+this.H,l=this.Y;return l===1?new em(d-i-(c||0),this.t+t):l===2?new em(d-t-(a||0),g-i-(c||0)):l===3?new em(this.q+i,g-t-(a||0)):new em(this.q+t,this.t+i)}}const Xz=new hI(0,0,0,0);class qz{constructor(t){this.J=t,this.u=Xz}g(t,i){const a=i?-2:2,c=[];for(let d=i?t.length-2:0;d<t.length&&d>=0;d+=a)c.push(this.u.I(t[d],t[d+1]));this.J.g(c)}h(t,i,a,c){const d=this.u.I(t,i,a,a);this.J.h(d,a,c)}i(t,i,a,c,d){this.g([t,i,t+a,i,t+a,i+c,t,i+c],d)}j(t,i,a,c,d,g){const l=[t+a,i,t+a,i+c,t,i+c,t,i];l.splice((d||0)%4*2,2),this.g(l,g)}K(t,i,a,c,d){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],d)}}function Kz(e,t,i,a){e=e%14;let c,d,g,l,b,w;e?e==1?(g=0|i*.5,l=0|i*.8,t.j(i-g,0,g,l,2)):e==2?(g=0|i/3,t.i(g,g,i-g,i-g)):e==3?(b=i*.1,w=i<6?1:i<8?2:0|i*.25,b=b>1?0|b:b>.5?1:b,t.i(w,w,i-b-w,i-b-w)):e==4?(d=0|i*.15,g=0|i*.5,t.h(i-g-d,i-g-d,g)):e==5?(b=i*.1,w=b*4,w>3&&(w=0|w),t.i(0,0,i,i),t.g([w,w,i-b,w,w+(i-w-b)/2,i-b],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(b=i*.14,w=i<4?1:i<6?2:0|i*.35,b=i<8?b:0|b,t.i(0,0,i,i),t.i(w,w,i-w-b,i-w-b,!0)):e==10?(b=i*.12,w=b*3,t.i(0,0,i,i),t.h(w,w,i-b-w,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(d=i*.25,t.i(0,0,i,i),t.K(d,d,i-d,i-d,!0)):!a&&(d=i*.4,g=i*1.2,t.h(d,d,g)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function nS(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function Yz(e,t){return e=t.W(e),[Lf(e,t.D,t.F(0)),Lf(e,t.o,t.p(.5)),Lf(e,t.D,t.F(1)),Lf(e,t.o,t.p(1)),Lf(e,t.o,t.p(0))]}function Jz(e,t,i){const a=Wz(i,.08);a.G&&e.m(a.G);let c=e.k;const d=.5+c*a.X|0;c-=d*2;const g=new qz(e),l=0|c/4,b=0|d+c/2-l*2,w=0|d+c/2-l*2;function A(ce,K,H,G,se){const X=Df(t,H,1);let V=G?Df(t,G,1):0;e.L(k[O[ce]]);for(let C=0;C<se.length;C++)g.u=new hI(b+se[C][0]*l,w+se[C][1]*l,l,V++%4),K(X,g,l,C);e.M()}const S=Df(t,-7)/268435455,k=Yz(S,a),O=[];let N;function R(ce){if(ce.indexOf(N)>=0){for(let K=0;K<ce.length;K++)if(O.indexOf(ce[K])>=0)return!0}}for(let ce=0;ce<3;ce++)N=Df(t,8+ce,1)%k.length,(R([0,4])||R([2,3]))&&(N=1),O.push(N);A(0,nS,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),A(1,nS,4,5,[[0,0],[3,0],[3,3],[0,3]]),A(2,Kz,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function Qz(e){var a=0,c=0,d=encodeURI(e)+"%80",g=[],l,b=[],w=1732584193,A=4023233417,S=~w,k=~A,O=3285377520,N=[w,A,S,k,O],R=0,ce="";function K(H,G){return H<<G|H>>>32-G}for(;a<d.length;c++)g[c>>2]=g[c>>2]|(d[a]=="%"?parseInt(d.substring(a+1,a+=3),16):d.charCodeAt(a++))<<(3-(c&3))*8;for(l=((c+7>>6)+1)*16,g[l-1]=c*8-8;R<l;R+=16){for(a=0;a<80;a++)c=K(w,5)+O+(a<20?(A&S^~A&k)+1518500249:a<40?(A^S^k)+1859775393:a<60?(A&S^A&k^S&k)+2400959708:(A^S^k)+3395469782)+(b[a]=a<16?g[R+a]|0:K(b[a-3]^b[a-8]^b[a-14]^b[a-16],1)),O=k,k=S,S=K(A,30),A=w,w=c;N[0]=w=N[0]+w|0,N[1]=A=N[1]+A|0,N[2]=S=N[2]+S|0,N[3]=k=N[3]+k|0,N[4]=O=N[4]+O|0}for(a=0;a<40;a++)ce+=(N[a>>3]>>>(7-(a&7))*4&15).toString(16);return ce}function eO(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function tO(e){return Qz(e==null?"":""+e)}function jc(e){return(e*10+.5|0)/10}class nO{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+jc(t[a].x)+" "+jc(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,d=jc(i/2),g=jc(i),l="a"+d+","+d+" 0 1,"+c+" ";this.v+="M"+jc(t.x)+" "+jc(t.y+i/2)+l+g+",0"+l+-g+",0"}}class rO{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?Df(i[2],0)/255:1;this.N.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new nO)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.N.O(i,t[i].v)}}const iO={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class oO{constructor(t){this.k=t,this.C='<svg xmlns="'+iO.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}O(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function sO(e,t,i){const a=new oO(t);return Jz(new rO(a),eO(e)||tO(e),i),a.toString()}typeof document<"u"&&document.querySelectorAll.bind(document);const aO=({feature:e,size:t})=>e.properties===null?null:pt.jsx(pt.Fragment,{children:e.properties.userIconHref.length>0?pt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):pt.jsx("span",{dangerouslySetInnerHTML:{__html:sO(e.properties.user||"noname",t)}})}),lO=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?pt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};var uO={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};const cO=({viewState:e})=>{const[t,i]=yt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return yt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),pt.jsx(pt.Fragment,{children:e&&t&&pt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[pt.jsx(da,{icon:uO,style:{padding:"0px 3px"}}),pt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var fI={};class Ki{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const d=i[c],g=t+d,l=Math.abs(t)<Math.abs(d)?t-(g-d):d-(g-t);l&&(i[a++]=l),t=g}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,d,g=0;if(i>0){for(g=t[--i];i>0&&(a=g,c=t[--i],g=a+c,d=c-(g-a),!d););i>0&&(d<0&&t[i-1]<0||d>0&&t[i-1]>0)&&(c=d*2,a=g+c,c==a-g&&(g=a))}return g}}function*hO(e){for(const t of e)yield*t}function dI(e){return Array.from(hO(e))}function oh(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,d=new Array(c);++a<c;)d[a]=e+a*i;return d}var pn=1e-6,Pd=1e-12,Fn=Math.PI,Nr=Fn/2,sg=Fn/4,fo=Fn*2,dr=180/Fn,mn=Fn/180,Vn=Math.abs,Oh=Math.atan,po=Math.atan2,on=Math.cos,tm=Math.ceil,pI=Math.exp,p_=Math.hypot,ag=Math.log,O0=Math.pow,Yt=Math.sin,hs=Math.sign||function(e){return e>0?1:e<0?-1:0},bi=Math.sqrt,ex=Math.tan;function mI(e){return e>1?0:e<-1?Fn:Math.acos(e)}function mo(e){return e>1?Nr:e<-1?-Nr:Math.asin(e)}function rS(e){return(e=Yt(e/2))*e}function Lr(){}function lg(e,t){e&&oS.hasOwnProperty(e.type)&&oS[e.type](e,t)}var iS={Feature:function(e,t){lg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)lg(i[a].geometry,t)}},oS={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){m_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)m_(i[a],t,0)},Polygon:function(e,t){sS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)sS(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)lg(i[a],t)}};function m_(e,t,i){var a=-1,c=e.length-i,d;for(t.lineStart();++a<c;)d=e[a],t.point(d[0],d[1],d[2]);t.lineEnd()}function sS(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)m_(e[i],t,1);t.polygonEnd()}function Fs(e,t){e&&iS.hasOwnProperty(e.type)?iS[e.type](e,t):lg(e,t)}var ug=new Ki,cg=new Ki,gI,yI,g_,y_,v_,pa={point:Lr,lineStart:Lr,lineEnd:Lr,polygonStart:function(){ug=new Ki,pa.lineStart=fO,pa.lineEnd=dO},polygonEnd:function(){var e=+ug;cg.add(e<0?fo+e:e),this.lineStart=this.lineEnd=this.point=Lr},sphere:function(){cg.add(fo)}};function fO(){pa.point=pO}function dO(){vI(gI,yI)}function pO(e,t){pa.point=vI,gI=e,yI=t,e*=mn,t*=mn,g_=e,y_=on(t=t/2+sg),v_=Yt(t)}function vI(e,t){e*=mn,t*=mn,t=t/2+sg;var i=e-g_,a=i>=0?1:-1,c=a*i,d=on(t),g=Yt(t),l=v_*g,b=y_*d+l*on(c),w=l*a*Yt(c);ug.add(po(w,b)),g_=e,y_=d,v_=g}function mO(e){return cg=new Ki,Fs(e,pa),cg*2}function hg(e){return[po(e[1],e[0]),mo(e[2])]}function ic(e){var t=e[0],i=e[1],a=on(i);return[a*on(t),a*Yt(t),Yt(i)]}function nm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Th(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function F0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function rm(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function fg(e){var t=bi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var kr,So,jr,Do,Vu,_I,xI,ph,nd,Bl,el,Va={point:__,lineStart:aS,lineEnd:lS,polygonStart:function(){Va.point=bI,Va.lineStart=gO,Va.lineEnd=yO,nd=new Ki,pa.polygonStart()},polygonEnd:function(){pa.polygonEnd(),Va.point=__,Va.lineStart=aS,Va.lineEnd=lS,ug<0?(kr=-(jr=180),So=-(Do=90)):nd>pn?Do=90:nd<-pn&&(So=-90),el[0]=kr,el[1]=jr},sphere:function(){kr=-(jr=180),So=-(Do=90)}};function __(e,t){Bl.push(el=[kr=e,jr=e]),t<So&&(So=t),t>Do&&(Do=t)}function wI(e,t){var i=ic([e*mn,t*mn]);if(ph){var a=Th(ph,i),c=[a[1],-a[0],0],d=Th(c,a);fg(d),d=hg(d);var g=e-Vu,l=g>0?1:-1,b=d[0]*dr*l,w,A=Vn(g)>180;A^(l*Vu<b&&b<l*e)?(w=d[1]*dr,w>Do&&(Do=w)):(b=(b+360)%360-180,A^(l*Vu<b&&b<l*e)?(w=-d[1]*dr,w<So&&(So=w)):(t<So&&(So=t),t>Do&&(Do=t))),A?e<Vu?jo(kr,e)>jo(kr,jr)&&(jr=e):jo(e,jr)>jo(kr,jr)&&(kr=e):jr>=kr?(e<kr&&(kr=e),e>jr&&(jr=e)):e>Vu?jo(kr,e)>jo(kr,jr)&&(jr=e):jo(e,jr)>jo(kr,jr)&&(kr=e)}else Bl.push(el=[kr=e,jr=e]);t<So&&(So=t),t>Do&&(Do=t),ph=i,Vu=e}function aS(){Va.point=wI}function lS(){el[0]=kr,el[1]=jr,Va.point=__,ph=null}function bI(e,t){if(ph){var i=e-Vu;nd.add(Vn(i)>180?i+(i>0?360:-360):i)}else _I=e,xI=t;pa.point(e,t),wI(e,t)}function gO(){pa.lineStart()}function yO(){bI(_I,xI),pa.lineEnd(),Vn(nd)>pn&&(kr=-(jr=180)),el[0]=kr,el[1]=jr,ph=null}function jo(e,t){return(t-=e)<0?t+360:t}function vO(e,t){return e[0]-t[0]}function uS(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function _O(e){var t,i,a,c,d,g,l;if(Do=jr=-(kr=So=1/0),Bl=[],Fs(e,Va),i=Bl.length){for(Bl.sort(vO),t=1,a=Bl[0],d=[a];t<i;++t)c=Bl[t],uS(a,c[0])||uS(a,c[1])?(jo(a[0],c[1])>jo(a[0],a[1])&&(a[1]=c[1]),jo(c[0],a[1])>jo(a[0],a[1])&&(a[0]=c[0])):d.push(a=c);for(g=-1/0,i=d.length-1,t=0,a=d[i];t<=i;a=c,++t)c=d[t],(l=jo(a[1],c[0]))>g&&(g=l,kr=c[0],jr=a[1])}return Bl=el=null,kr===1/0||So===1/0?[[NaN,NaN],[NaN,NaN]]:[[kr,So],[jr,Do]]}var Bf,dg,pg,mg,gg,yg,vg,_g,x_,w_,b_,SI,EI,lo,uo,co,Bs={sphere:Lr,point:tx,lineStart:cS,lineEnd:hS,polygonStart:function(){Bs.lineStart=bO,Bs.lineEnd=SO},polygonEnd:function(){Bs.lineStart=cS,Bs.lineEnd=hS}};function tx(e,t){e*=mn,t*=mn;var i=on(t);Vd(i*on(e),i*Yt(e),Yt(t))}function Vd(e,t,i){++Bf,pg+=(e-pg)/Bf,mg+=(t-mg)/Bf,gg+=(i-gg)/Bf}function cS(){Bs.point=xO}function xO(e,t){e*=mn,t*=mn;var i=on(t);lo=i*on(e),uo=i*Yt(e),co=Yt(t),Bs.point=wO,Vd(lo,uo,co)}function wO(e,t){e*=mn,t*=mn;var i=on(t),a=i*on(e),c=i*Yt(e),d=Yt(t),g=po(bi((g=uo*d-co*c)*g+(g=co*a-lo*d)*g+(g=lo*c-uo*a)*g),lo*a+uo*c+co*d);dg+=g,yg+=g*(lo+(lo=a)),vg+=g*(uo+(uo=c)),_g+=g*(co+(co=d)),Vd(lo,uo,co)}function hS(){Bs.point=tx}function bO(){Bs.point=EO}function SO(){TI(SI,EI),Bs.point=tx}function EO(e,t){SI=e,EI=t,e*=mn,t*=mn,Bs.point=TI;var i=on(t);lo=i*on(e),uo=i*Yt(e),co=Yt(t),Vd(lo,uo,co)}function TI(e,t){e*=mn,t*=mn;var i=on(t),a=i*on(e),c=i*Yt(e),d=Yt(t),g=uo*d-co*c,l=co*a-lo*d,b=lo*c-uo*a,w=p_(g,l,b),A=mo(w),S=w&&-A/w;x_.add(S*g),w_.add(S*l),b_.add(S*b),dg+=A,yg+=A*(lo+(lo=a)),vg+=A*(uo+(uo=c)),_g+=A*(co+(co=d)),Vd(lo,uo,co)}function TO(e){Bf=dg=pg=mg=gg=yg=vg=_g=0,x_=new Ki,w_=new Ki,b_=new Ki,Fs(e,Bs);var t=+x_,i=+w_,a=+b_,c=p_(t,i,a);return c<Pd&&(t=yg,i=vg,a=_g,dg<pn&&(t=pg,i=mg,a=gg),c=p_(t,i,a),c<Pd)?[NaN,NaN]:[po(i,t)*dr,mo(a/c)*dr]}function Dc(e){return function(){return e}}function S_(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function E_(e,t){return[Vn(e)>Fn?e+Math.round(-e/fo)*fo:e,t]}E_.invert=E_;function nx(e,t,i){return(e%=fo)?t||i?S_(dS(e),pS(t,i)):dS(e):t||i?pS(t,i):E_}function fS(e){return function(t,i){return t+=e,[t>Fn?t-fo:t<-Fn?t+fo:t,i]}}function dS(e){var t=fS(e);return t.invert=fS(-e),t}function pS(e,t){var i=on(e),a=Yt(e),c=on(t),d=Yt(t);function g(l,b){var w=on(b),A=on(l)*w,S=Yt(l)*w,k=Yt(b),O=k*i+A*a;return[po(S*c-O*d,A*i-k*a),mo(O*c+S*d)]}return g.invert=function(l,b){var w=on(b),A=on(l)*w,S=Yt(l)*w,k=Yt(b),O=k*c-S*d;return[po(S*c+k*d,A*i+O*a),mo(O*i-A*a)]},g}function CI(e){e=nx(e[0]*mn,e[1]*mn,e.length>2?e[2]*mn:0);function t(i){return i=e(i[0]*mn,i[1]*mn),i[0]*=dr,i[1]*=dr,i}return t.invert=function(i){return i=e.invert(i[0]*mn,i[1]*mn),i[0]*=dr,i[1]*=dr,i},t}function II(e,t,i,a,c,d){if(i){var g=on(t),l=Yt(t),b=a*i;c==null?(c=t+a*fo,d=t-b/2):(c=mS(g,c),d=mS(g,d),(a>0?c<d:c>d)&&(c+=a*fo));for(var w,A=c;a>0?A>d:A<d;A-=b)w=hg([g,-l*on(A),-l*Yt(A)]),e.point(w[0],w[1])}}function mS(e,t){t=ic(t),t[0]-=e,fg(t);var i=mI(-t[1]);return((-t[2]<0?-i:i)+fo-pn)%fo}function CO(){var e=Dc([0,0]),t=Dc(90),i=Dc(6),a,c,d={point:g};function g(b,w){a.push(b=c(b,w)),b[0]*=dr,b[1]*=dr}function l(){var b=e.apply(this,arguments),w=t.apply(this,arguments)*mn,A=i.apply(this,arguments)*mn;return a=[],c=nx(-b[0]*mn,-b[1]*mn,0).invert,II(d,w,A,1),b={type:"Polygon",coordinates:[a]},a=c=null,b}return l.center=function(b){return arguments.length?(e=typeof b=="function"?b:Dc([+b[0],+b[1]]),l):e},l.radius=function(b){return arguments.length?(t=typeof b=="function"?b:Dc(+b),l):t},l.precision=function(b){return arguments.length?(i=typeof b=="function"?b:Dc(+b),l):i},l}function AI(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:Lr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function Em(e,t){return Vn(e[0]-t[0])<pn&&Vn(e[1]-t[1])<pn}function im(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function PI(e,t,i,a,c){var d=[],g=[],l,b;if(e.forEach(function(N){if(!((R=N.length-1)<=0)){var R,ce=N[0],K=N[R],H;if(Em(ce,K)){if(!ce[2]&&!K[2]){for(c.lineStart(),l=0;l<R;++l)c.point((ce=N[l])[0],ce[1]);c.lineEnd();return}K[0]+=2*pn}d.push(H=new im(ce,N,null,!0)),g.push(H.o=new im(ce,null,H,!1)),d.push(H=new im(K,N,null,!1)),g.push(H.o=new im(K,null,H,!0))}}),!!d.length){for(g.sort(t),gS(d),gS(g),l=0,b=g.length;l<b;++l)g[l].e=i=!i;for(var w=d[0],A,S;;){for(var k=w,O=!0;k.v;)if((k=k.n)===w)return;A=k.z,c.lineStart();do{if(k.v=k.o.v=!0,k.e){if(O)for(l=0,b=A.length;l<b;++l)c.point((S=A[l])[0],S[1]);else a(k.x,k.n.x,1,c);k=k.n}else{if(O)for(A=k.p.z,l=A.length-1;l>=0;--l)c.point((S=A[l])[0],S[1]);else a(k.x,k.p.x,-1,c);k=k.p}k=k.o,A=k.z,O=!O}while(!k.v);c.lineEnd()}}}function gS(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function R0(e){return Vn(e[0])<=Fn?e[0]:hs(e[0])*((Vn(e[0])+Fn)%fo-Fn)}function kI(e,t){var i=R0(t),a=t[1],c=Yt(a),d=[Yt(i),-on(i),0],g=0,l=0,b=new Ki;c===1?a=Nr+pn:c===-1&&(a=-Nr-pn);for(var w=0,A=e.length;w<A;++w)if(k=(S=e[w]).length)for(var S,k,O=S[k-1],N=R0(O),R=O[1]/2+sg,ce=Yt(R),K=on(R),H=0;H<k;++H,N=se,ce=V,K=C,O=G){var G=S[H],se=R0(G),X=G[1]/2+sg,V=Yt(X),C=on(X),F=se-N,D=F>=0?1:-1,Q=D*F,Y=Q>Fn,_e=ce*V;if(b.add(po(_e*D*Yt(Q),K*C+_e*on(Q))),g+=Y?F+D*fo:F,Y^N>=i^se>=i){var we=Th(ic(O),ic(G));fg(we);var pe=Th(d,we);fg(pe);var oe=(Y^F>=0?-1:1)*mo(pe[2]);(a>oe||a===oe&&(we[0]||we[1]))&&(l+=Y^F>=0?1:-1)}}return(g<-pn||g<pn&&b<-Pd)^l&1}function MI(e,t,i,a){return function(c){var d=t(c),g=AI(),l=t(g),b=!1,w,A,S,k={point:O,lineStart:R,lineEnd:ce,polygonStart:function(){k.point=K,k.lineStart=H,k.lineEnd=G,A=[],w=[]},polygonEnd:function(){k.point=O,k.lineStart=R,k.lineEnd=ce,A=dI(A);var se=kI(w,a);A.length?(b||(c.polygonStart(),b=!0),PI(A,AO,se,i,c)):se&&(b||(c.polygonStart(),b=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),b&&(c.polygonEnd(),b=!1),A=w=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function O(se,X){e(se,X)&&c.point(se,X)}function N(se,X){d.point(se,X)}function R(){k.point=N,d.lineStart()}function ce(){k.point=O,d.lineEnd()}function K(se,X){S.push([se,X]),l.point(se,X)}function H(){l.lineStart(),S=[]}function G(){K(S[0][0],S[0][1]),l.lineEnd();var se=l.clean(),X=g.result(),V,C=X.length,F,D,Q;if(S.pop(),w.push(S),S=null,!!C){if(se&1){if(D=X[0],(F=D.length-1)>0){for(b||(c.polygonStart(),b=!0),c.lineStart(),V=0;V<F;++V)c.point((Q=D[V])[0],Q[1]);c.lineEnd()}return}C>1&&se&2&&X.push(X.pop().concat(X.shift())),A.push(X.filter(IO))}}return k}}function IO(e){return e.length>1}function AO(e,t){return((e=e.x)[0]<0?e[1]-Nr-pn:Nr-e[1])-((t=t.x)[0]<0?t[1]-Nr-pn:Nr-t[1])}const T_=MI(function(){return!0},PO,MO,[-Fn,-Nr]);function PO(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(d,g){var l=d>0?Fn:-Fn,b=Vn(d-t);Vn(b-Fn)<pn?(e.point(t,i=(i+g)/2>0?Nr:-Nr),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),e.point(d,i),c=0):a!==l&&b>=Fn&&(Vn(t-a)<pn&&(t-=a*pn),Vn(d-l)<pn&&(d-=l*pn),i=kO(t,i,d,g),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),c=0),e.point(t=d,i=g),a=l},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function kO(e,t,i,a){var c,d,g=Yt(e-i);return Vn(g)>pn?Oh((Yt(t)*(d=on(a))*Yt(i)-Yt(a)*(c=on(t))*Yt(e))/(c*d*g)):(t+a)/2}function MO(e,t,i,a){var c;if(e==null)c=i*Nr,a.point(-Fn,c),a.point(0,c),a.point(Fn,c),a.point(Fn,0),a.point(Fn,-c),a.point(0,-c),a.point(-Fn,-c),a.point(-Fn,0),a.point(-Fn,c);else if(Vn(e[0]-t[0])>pn){var d=e[0]<t[0]?Fn:-Fn;c=i*d/2,a.point(-d,c),a.point(0,c),a.point(d,c)}else a.point(t[0],t[1])}function LI(e){var t=on(e),i=6*mn,a=t>0,c=Vn(t)>pn;function d(A,S,k,O){II(O,e,i,k,A,S)}function g(A,S){return on(A)*on(S)>t}function l(A){var S,k,O,N,R;return{lineStart:function(){N=O=!1,R=1},point:function(ce,K){var H=[ce,K],G,se=g(ce,K),X=a?se?0:w(ce,K):se?w(ce+(ce<0?Fn:-Fn),K):0;if(!S&&(N=O=se)&&A.lineStart(),se!==O&&(G=b(S,H),(!G||Em(S,G)||Em(H,G))&&(H[2]=1)),se!==O)R=0,se?(A.lineStart(),G=b(H,S),A.point(G[0],G[1])):(G=b(S,H),A.point(G[0],G[1],2),A.lineEnd()),S=G;else if(c&&S&&a^se){var V;!(X&k)&&(V=b(H,S,!0))&&(R=0,a?(A.lineStart(),A.point(V[0][0],V[0][1]),A.point(V[1][0],V[1][1]),A.lineEnd()):(A.point(V[1][0],V[1][1]),A.lineEnd(),A.lineStart(),A.point(V[0][0],V[0][1],3)))}se&&(!S||!Em(S,H))&&A.point(H[0],H[1]),S=H,O=se,k=X},lineEnd:function(){O&&A.lineEnd(),S=null},clean:function(){return R|(N&&O)<<1}}}function b(A,S,k){var O=ic(A),N=ic(S),R=[1,0,0],ce=Th(O,N),K=nm(ce,ce),H=ce[0],G=K-H*H;if(!G)return!k&&A;var se=t*K/G,X=-t*H/G,V=Th(R,ce),C=rm(R,se),F=rm(ce,X);F0(C,F);var D=V,Q=nm(C,D),Y=nm(D,D),_e=Q*Q-Y*(nm(C,C)-1);if(!(_e<0)){var we=bi(_e),pe=rm(D,(-Q-we)/Y);if(F0(pe,C),pe=hg(pe),!k)return pe;var oe=A[0],ue=S[0],te=A[1],ne=S[1],de;ue<oe&&(de=oe,oe=ue,ue=de);var Se=ue-oe,Te=Vn(Se-Fn)<pn,$e=Te||Se<pn;if(!Te&&ne<te&&(de=te,te=ne,ne=de),$e?Te?te+ne>0^pe[1]<(Vn(pe[0]-oe)<pn?te:ne):te<=pe[1]&&pe[1]<=ne:Se>Fn^(oe<=pe[0]&&pe[0]<=ue)){var Ie=rm(D,(-Q+we)/Y);return F0(Ie,C),[pe,hg(Ie)]}}}function w(A,S){var k=a?e:Fn-e,O=0;return A<-k?O|=1:A>k&&(O|=2),S<-k?O|=4:S>k&&(O|=8),O}return MI(g,l,d,a?[0,-e]:[-Fn,e-Fn])}function LO(e,t,i,a,c,d){var g=e[0],l=e[1],b=t[0],w=t[1],A=0,S=1,k=b-g,O=w-l,N;if(N=i-g,!(!k&&N>0)){if(N/=k,k<0){if(N<A)return;N<S&&(S=N)}else if(k>0){if(N>S)return;N>A&&(A=N)}if(N=c-g,!(!k&&N<0)){if(N/=k,k<0){if(N>S)return;N>A&&(A=N)}else if(k>0){if(N<A)return;N<S&&(S=N)}if(N=a-l,!(!O&&N>0)){if(N/=O,O<0){if(N<A)return;N<S&&(S=N)}else if(O>0){if(N>S)return;N>A&&(A=N)}if(N=d-l,!(!O&&N<0)){if(N/=O,O<0){if(N>S)return;N>A&&(A=N)}else if(O>0){if(N<A)return;N<S&&(S=N)}return A>0&&(e[0]=g+A*k,e[1]=l+A*O),S<1&&(t[0]=g+S*k,t[1]=l+S*O),!0}}}}}var Nf=1e9,om=-Nf;function Qg(e,t,i,a){function c(w,A){return e<=w&&w<=i&&t<=A&&A<=a}function d(w,A,S,k){var O=0,N=0;if(w==null||(O=g(w,S))!==(N=g(A,S))||b(w,A)<0^S>0)do k.point(O===0||O===3?e:i,O>1?a:t);while((O=(O+S+4)%4)!==N);else k.point(A[0],A[1])}function g(w,A){return Vn(w[0]-e)<pn?A>0?0:3:Vn(w[0]-i)<pn?A>0?2:1:Vn(w[1]-t)<pn?A>0?1:0:A>0?3:2}function l(w,A){return b(w.x,A.x)}function b(w,A){var S=g(w,1),k=g(A,1);return S!==k?S-k:S===0?A[1]-w[1]:S===1?w[0]-A[0]:S===2?w[1]-A[1]:A[0]-w[0]}return function(w){var A=w,S=AI(),k,O,N,R,ce,K,H,G,se,X,V,C={point:F,lineStart:_e,lineEnd:we,polygonStart:Q,polygonEnd:Y};function F(oe,ue){c(oe,ue)&&A.point(oe,ue)}function D(){for(var oe=0,ue=0,te=O.length;ue<te;++ue)for(var ne=O[ue],de=1,Se=ne.length,Te=ne[0],$e,Ie,Le=Te[0],We=Te[1];de<Se;++de)$e=Le,Ie=We,Te=ne[de],Le=Te[0],We=Te[1],Ie<=a?We>a&&(Le-$e)*(a-Ie)>(We-Ie)*(e-$e)&&++oe:We<=a&&(Le-$e)*(a-Ie)<(We-Ie)*(e-$e)&&--oe;return oe}function Q(){A=S,k=[],O=[],V=!0}function Y(){var oe=D(),ue=V&&oe,te=(k=dI(k)).length;(ue||te)&&(w.polygonStart(),ue&&(w.lineStart(),d(null,null,1,w),w.lineEnd()),te&&PI(k,l,oe,d,w),w.polygonEnd()),A=w,k=O=N=null}function _e(){C.point=pe,O&&O.push(N=[]),X=!0,se=!1,H=G=NaN}function we(){k&&(pe(R,ce),K&&se&&S.rejoin(),k.push(S.result())),C.point=F,se&&A.lineEnd()}function pe(oe,ue){var te=c(oe,ue);if(O&&N.push([oe,ue]),X)R=oe,ce=ue,K=te,X=!1,te&&(A.lineStart(),A.point(oe,ue));else if(te&&se)A.point(oe,ue);else{var ne=[H=Math.max(om,Math.min(Nf,H)),G=Math.max(om,Math.min(Nf,G))],de=[oe=Math.max(om,Math.min(Nf,oe)),ue=Math.max(om,Math.min(Nf,ue))];LO(ne,de,e,t,i,a)?(se||(A.lineStart(),A.point(ne[0],ne[1])),A.point(de[0],de[1]),te||A.lineEnd(),V=!1):te&&(A.lineStart(),A.point(oe,ue),V=!1)}H=oe,G=ue,se=te}return C}}function zO(){var e=0,t=0,i=960,a=500,c,d,g;return g={stream:function(l){return c&&d===l?c:c=Qg(e,t,i,a)(d=l)},extent:function(l){return arguments.length?(e=+l[0][0],t=+l[0][1],i=+l[1][0],a=+l[1][1],c=d=null,g):[[e,t],[i,a]]}}}var C_,I_,Tm,Cm,Ch={sphere:Lr,point:Lr,lineStart:OO,lineEnd:Lr,polygonStart:Lr,polygonEnd:Lr};function OO(){Ch.point=RO,Ch.lineEnd=FO}function FO(){Ch.point=Ch.lineEnd=Lr}function RO(e,t){e*=mn,t*=mn,I_=e,Tm=Yt(t),Cm=on(t),Ch.point=jO}function jO(e,t){e*=mn,t*=mn;var i=Yt(t),a=on(t),c=Vn(e-I_),d=on(c),g=Yt(c),l=a*g,b=Cm*i-Tm*a*d,w=Tm*i+Cm*a*d;C_.add(po(bi(l*l+b*b),w)),I_=e,Tm=i,Cm=a}function zI(e){return C_=new Ki,Fs(e,Ch),+C_}var A_=[null,null],DO={type:"LineString",coordinates:A_};function xg(e,t){return A_[0]=e,A_[1]=t,zI(DO)}var yS={Feature:function(e,t){return wg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if(wg(i[a].geometry,t))return!0;return!1}},vS={Sphere:function(){return!0},Point:function(e,t){return _S(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(_S(i[a],t))return!0;return!1},LineString:function(e,t){return xS(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(xS(i[a],t))return!0;return!1},Polygon:function(e,t){return wS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(wS(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if(wg(i[a],t))return!0;return!1}};function wg(e,t){return e&&vS.hasOwnProperty(e.type)?vS[e.type](e,t):!1}function _S(e,t){return xg(e,t)===0}function xS(e,t){for(var i,a,c,d=0,g=e.length;d<g;d++){if(a=xg(e[d],t),a===0||d>0&&(c=xg(e[d],e[d-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<Pd*c))return!0;i=a}return!1}function wS(e,t){return!!kI(e.map(BO),OI(t))}function BO(e){return e=e.map(OI),e.pop(),e}function OI(e){return[e[0]*mn,e[1]*mn]}function NO(e,t){return(e&&yS.hasOwnProperty(e.type)?yS[e.type]:wg)(e,t)}function bS(e,t,i){var a=oh(e,t-pn,i).concat(t);return function(c){return a.map(function(d){return[c,d]})}}function SS(e,t,i){var a=oh(e,t-pn,i).concat(t);return function(c){return a.map(function(d){return[d,c]})}}function FI(){var e,t,i,a,c,d,g,l,b=10,w=b,A=90,S=360,k,O,N,R,ce=2.5;function K(){return{type:"MultiLineString",coordinates:H()}}function H(){return oh(tm(a/A)*A,i,A).map(N).concat(oh(tm(l/S)*S,g,S).map(R)).concat(oh(tm(t/b)*b,e,b).filter(function(G){return Vn(G%A)>pn}).map(k)).concat(oh(tm(d/w)*w,c,w).filter(function(G){return Vn(G%S)>pn}).map(O))}return K.lines=function(){return H().map(function(G){return{type:"LineString",coordinates:G}})},K.outline=function(){return{type:"Polygon",coordinates:[N(a).concat(R(g).slice(1),N(i).reverse().slice(1),R(l).reverse().slice(1))]}},K.extent=function(G){return arguments.length?K.extentMajor(G).extentMinor(G):K.extentMinor()},K.extentMajor=function(G){return arguments.length?(a=+G[0][0],i=+G[1][0],l=+G[0][1],g=+G[1][1],a>i&&(G=a,a=i,i=G),l>g&&(G=l,l=g,g=G),K.precision(ce)):[[a,l],[i,g]]},K.extentMinor=function(G){return arguments.length?(t=+G[0][0],e=+G[1][0],d=+G[0][1],c=+G[1][1],t>e&&(G=t,t=e,e=G),d>c&&(G=d,d=c,c=G),K.precision(ce)):[[t,d],[e,c]]},K.step=function(G){return arguments.length?K.stepMajor(G).stepMinor(G):K.stepMinor()},K.stepMajor=function(G){return arguments.length?(A=+G[0],S=+G[1],K):[A,S]},K.stepMinor=function(G){return arguments.length?(b=+G[0],w=+G[1],K):[b,w]},K.precision=function(G){return arguments.length?(ce=+G,k=bS(d,c,90),O=SS(t,e,ce),N=bS(l,g,90),R=SS(a,i,ce),K):ce},K.extentMajor([[-180,-90+pn],[180,90-pn]]).extentMinor([[-180,-80-pn],[180,80+pn]])}function UO(){return FI()()}function $O(e,t){var i=e[0]*mn,a=e[1]*mn,c=t[0]*mn,d=t[1]*mn,g=on(a),l=Yt(a),b=on(d),w=Yt(d),A=g*on(i),S=g*Yt(i),k=b*on(c),O=b*Yt(c),N=2*mo(bi(rS(d-a)+g*b*rS(c-i))),R=Yt(N),ce=N?function(K){var H=Yt(K*=N)/R,G=Yt(N-K)/R,se=G*A+H*k,X=G*S+H*O,V=G*l+H*w;return[po(X,se)*dr,po(V,bi(se*se+X*X))*dr]}:function(){return[i*dr,a*dr]};return ce.distance=N,ce}const kd=e=>e;var j0=new Ki,P_=new Ki,RI,jI,k_,M_,Vl={point:Lr,lineStart:Lr,lineEnd:Lr,polygonStart:function(){Vl.lineStart=VO,Vl.lineEnd=ZO},polygonEnd:function(){Vl.lineStart=Vl.lineEnd=Vl.point=Lr,j0.add(Vn(P_)),P_=new Ki},result:function(){var e=j0/2;return j0=new Ki,e}};function VO(){Vl.point=GO}function GO(e,t){Vl.point=DI,RI=k_=e,jI=M_=t}function DI(e,t){P_.add(M_*e-k_*t),k_=e,M_=t}function ZO(){DI(RI,jI)}const ES=Vl;var Ih=1/0,bg=Ih,Md=-Ih,Sg=Md,HO={point:WO,lineStart:Lr,lineEnd:Lr,polygonStart:Lr,polygonEnd:Lr,result:function(){var e=[[Ih,bg],[Md,Sg]];return Md=Sg=-(bg=Ih=1/0),e}};function WO(e,t){e<Ih&&(Ih=e),e>Md&&(Md=e),t<bg&&(bg=t),t>Sg&&(Sg=t)}const Eg=HO;var L_=0,z_=0,Uf=0,Tg=0,Cg=0,sh=0,O_=0,F_=0,$f=0,BI,NI,aa,la,Rs={point:oc,lineStart:TS,lineEnd:CS,polygonStart:function(){Rs.lineStart=KO,Rs.lineEnd=YO},polygonEnd:function(){Rs.point=oc,Rs.lineStart=TS,Rs.lineEnd=CS},result:function(){var e=$f?[O_/$f,F_/$f]:sh?[Tg/sh,Cg/sh]:Uf?[L_/Uf,z_/Uf]:[NaN,NaN];return L_=z_=Uf=Tg=Cg=sh=O_=F_=$f=0,e}};function oc(e,t){L_+=e,z_+=t,++Uf}function TS(){Rs.point=XO}function XO(e,t){Rs.point=qO,oc(aa=e,la=t)}function qO(e,t){var i=e-aa,a=t-la,c=bi(i*i+a*a);Tg+=c*(aa+e)/2,Cg+=c*(la+t)/2,sh+=c,oc(aa=e,la=t)}function CS(){Rs.point=oc}function KO(){Rs.point=JO}function YO(){UI(BI,NI)}function JO(e,t){Rs.point=UI,oc(BI=aa=e,NI=la=t)}function UI(e,t){var i=e-aa,a=t-la,c=bi(i*i+a*a);Tg+=c*(aa+e)/2,Cg+=c*(la+t)/2,sh+=c,c=la*e-aa*t,O_+=c*(aa+e),F_+=c*(la+t),$f+=c*3,oc(aa=e,la=t)}const IS=Rs;function $I(e){this._context=e}$I.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,fo);break}}},result:Lr};var R_=new Ki,D0,VI,GI,Vf,Gf,Ig={point:Lr,lineStart:function(){Ig.point=QO},lineEnd:function(){D0&&ZI(VI,GI),Ig.point=Lr},polygonStart:function(){D0=!0},polygonEnd:function(){D0=null},result:function(){var e=+R_;return R_=new Ki,e}};function QO(e,t){Ig.point=ZI,VI=Vf=e,GI=Gf=t}function ZI(e,t){Vf-=e,Gf-=t,R_.add(bi(Vf*Vf+Gf*Gf)),Vf=e,Gf=t}const AS=Ig;function HI(){this._string=[]}HI.prototype={_radius:4.5,_circle:PS(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=PS(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function PS(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function eF(e,t){var i=4.5,a,c;function d(g){return g&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),Fs(g,a(c))),c.result()}return d.area=function(g){return Fs(g,a(ES)),ES.result()},d.measure=function(g){return Fs(g,a(AS)),AS.result()},d.bounds=function(g){return Fs(g,a(Eg)),Eg.result()},d.centroid=function(g){return Fs(g,a(IS)),IS.result()},d.projection=function(g){return arguments.length?(a=g==null?(e=null,kd):(e=g).stream,d):e},d.context=function(g){return arguments.length?(c=g==null?(t=null,new HI):new $I(t=g),typeof i!="function"&&c.pointRadius(i),d):t},d.pointRadius=function(g){return arguments.length?(i=typeof g=="function"?g:(c.pointRadius(+g),+g),d):i},d.projection(e).context(t)}function tF(e){return{stream:Gd(e)}}function Gd(e){return function(t){var i=new j_;for(var a in e)i[a]=e[a];return i.stream=t,i}}function j_(){}j_.prototype={constructor:j_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function rx(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),Fs(i,e.stream(Eg)),t(Eg.result()),a!=null&&e.clipExtent(a),e}function ey(e,t,i){return rx(e,function(a){var c=t[1][0]-t[0][0],d=t[1][1]-t[0][1],g=Math.min(c/(a[1][0]-a[0][0]),d/(a[1][1]-a[0][1])),l=+t[0][0]+(c-g*(a[1][0]+a[0][0]))/2,b=+t[0][1]+(d-g*(a[1][1]+a[0][1]))/2;e.scale(150*g).translate([l,b])},i)}function ix(e,t,i){return ey(e,[[0,0],t],i)}function ox(e,t,i){return rx(e,function(a){var c=+t,d=c/(a[1][0]-a[0][0]),g=(c-d*(a[1][0]+a[0][0]))/2,l=-d*a[0][1];e.scale(150*d).translate([g,l])},i)}function sx(e,t,i){return rx(e,function(a){var c=+t,d=c/(a[1][1]-a[0][1]),g=-d*a[0][0],l=(c-d*(a[1][1]+a[0][1]))/2;e.scale(150*d).translate([g,l])},i)}var kS=16,nF=on(30*mn);function MS(e,t){return+t?iF(e,t):rF(e)}function rF(e){return Gd({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function iF(e,t){function i(a,c,d,g,l,b,w,A,S,k,O,N,R,ce){var K=w-a,H=A-c,G=K*K+H*H;if(G>4*t&&R--){var se=g+k,X=l+O,V=b+N,C=bi(se*se+X*X+V*V),F=mo(V/=C),D=Vn(Vn(V)-1)<pn||Vn(d-S)<pn?(d+S)/2:po(X,se),Q=e(D,F),Y=Q[0],_e=Q[1],we=Y-a,pe=_e-c,oe=H*we-K*pe;(oe*oe/G>t||Vn((K*we+H*pe)/G-.5)>.3||g*k+l*O+b*N<nF)&&(i(a,c,d,g,l,b,Y,_e,D,se/=C,X/=C,V,R,ce),ce.point(Y,_e),i(Y,_e,D,se,X,V,w,A,S,k,O,N,R,ce))}}return function(a){var c,d,g,l,b,w,A,S,k,O,N,R,ce={point:K,lineStart:H,lineEnd:se,polygonStart:function(){a.polygonStart(),ce.lineStart=X},polygonEnd:function(){a.polygonEnd(),ce.lineStart=H}};function K(F,D){F=e(F,D),a.point(F[0],F[1])}function H(){S=NaN,ce.point=G,a.lineStart()}function G(F,D){var Q=ic([F,D]),Y=e(F,D);i(S,k,A,O,N,R,S=Y[0],k=Y[1],A=F,O=Q[0],N=Q[1],R=Q[2],kS,a),a.point(S,k)}function se(){ce.point=K,a.lineEnd()}function X(){H(),ce.point=V,ce.lineEnd=C}function V(F,D){G(c=F,D),d=S,g=k,l=O,b=N,w=R,ce.point=G}function C(){i(S,k,A,O,N,R,d,g,c,l,b,w,kS,a),ce.lineEnd=se,se()}return ce}}var oF=Gd({point:function(e,t){this.stream.point(e*mn,t*mn)}});function sF(e){return Gd({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function aF(e,t,i,a,c){function d(g,l){return g*=a,l*=c,[t+e*g,i-e*l]}return d.invert=function(g,l){return[(g-t)/e*a,(i-l)/e*c]},d}function LS(e,t,i,a,c,d){if(!d)return aF(e,t,i,a,c);var g=on(d),l=Yt(d),b=g*e,w=l*e,A=g/e,S=l/e,k=(l*i-g*t)/e,O=(l*t+g*i)/e;function N(R,ce){return R*=a,ce*=c,[b*R-w*ce+t,i-w*R-b*ce]}return N.invert=function(R,ce){return[a*(A*R-S*ce+k),c*(O-S*R-A*ce)]},N}function ma(e){return ax(function(){return e})()}function ax(e){var t,i=150,a=480,c=250,d=0,g=0,l=0,b=0,w=0,A,S=0,k=1,O=1,N=null,R=T_,ce=null,K,H,G,se=kd,X=.5,V,C,F,D,Q;function Y(oe){return F(oe[0]*mn,oe[1]*mn)}function _e(oe){return oe=F.invert(oe[0],oe[1]),oe&&[oe[0]*dr,oe[1]*dr]}Y.stream=function(oe){return D&&Q===oe?D:D=oF(sF(A)(R(V(se(Q=oe)))))},Y.preclip=function(oe){return arguments.length?(R=oe,N=void 0,pe()):R},Y.postclip=function(oe){return arguments.length?(se=oe,ce=K=H=G=null,pe()):se},Y.clipAngle=function(oe){return arguments.length?(R=+oe?LI(N=oe*mn):(N=null,T_),pe()):N*dr},Y.clipExtent=function(oe){return arguments.length?(se=oe==null?(ce=K=H=G=null,kd):Qg(ce=+oe[0][0],K=+oe[0][1],H=+oe[1][0],G=+oe[1][1]),pe()):ce==null?null:[[ce,K],[H,G]]},Y.scale=function(oe){return arguments.length?(i=+oe,we()):i},Y.translate=function(oe){return arguments.length?(a=+oe[0],c=+oe[1],we()):[a,c]},Y.center=function(oe){return arguments.length?(d=oe[0]%360*mn,g=oe[1]%360*mn,we()):[d*dr,g*dr]},Y.rotate=function(oe){return arguments.length?(l=oe[0]%360*mn,b=oe[1]%360*mn,w=oe.length>2?oe[2]%360*mn:0,we()):[l*dr,b*dr,w*dr]},Y.angle=function(oe){return arguments.length?(S=oe%360*mn,we()):S*dr},Y.reflectX=function(oe){return arguments.length?(k=oe?-1:1,we()):k<0},Y.reflectY=function(oe){return arguments.length?(O=oe?-1:1,we()):O<0},Y.precision=function(oe){return arguments.length?(V=MS(C,X=oe*oe),pe()):bi(X)},Y.fitExtent=function(oe,ue){return ey(Y,oe,ue)},Y.fitSize=function(oe,ue){return ix(Y,oe,ue)},Y.fitWidth=function(oe,ue){return ox(Y,oe,ue)},Y.fitHeight=function(oe,ue){return sx(Y,oe,ue)};function we(){var oe=LS(i,0,0,k,O,S).apply(null,t(d,g)),ue=LS(i,a-oe[0],c-oe[1],k,O,S);return A=nx(l,b,w),C=S_(t,ue),F=S_(A,C),V=MS(C,X),pe()}function pe(){return D=Q=null,Y}return function(){return t=e.apply(this,arguments),Y.invert=t.invert&&_e,we()}}function lx(e){var t=0,i=Fn/3,a=ax(e),c=a(t,i);return c.parallels=function(d){return arguments.length?a(t=d[0]*mn,i=d[1]*mn):[t*dr,i*dr]},c}function lF(e){var t=on(e);function i(a,c){return[a*t,Yt(c)/t]}return i.invert=function(a,c){return[a/t,mo(c*t)]},i}function WI(e,t){var i=Yt(e),a=(i+Yt(t))/2;if(Vn(a)<pn)return lF(e);var c=1+i*(2*a-i),d=bi(c)/a;function g(l,b){var w=bi(c-2*a*Yt(b))/a;return[w*Yt(l*=a),d-w*on(l)]}return g.invert=function(l,b){var w=d-b,A=po(l,Vn(w))*hs(w);return w*a<0&&(A-=Fn*hs(l)*hs(w)),[A/a,mo((c-(l*l+w*w)*a*a)/(2*a))]},g}function Ag(){return lx(WI).scale(155.424).center([0,33.6442])}function XI(){return Ag().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function uF(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function cF(){var e,t,i=XI(),a,c=Ag().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d,g=Ag().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,b,w={point:function(k,O){b=[k,O]}};function A(k){var O=k[0],N=k[1];return b=null,a.point(O,N),b||(d.point(O,N),b)||(l.point(O,N),b)}A.invert=function(k){var O=i.scale(),N=i.translate(),R=(k[0]-N[0])/O,ce=(k[1]-N[1])/O;return(ce>=.12&&ce<.234&&R>=-.425&&R<-.214?c:ce>=.166&&ce<.234&&R>=-.214&&R<-.115?g:i).invert(k)},A.stream=function(k){return e&&t===k?e:e=uF([i.stream(t=k),c.stream(k),g.stream(k)])},A.precision=function(k){return arguments.length?(i.precision(k),c.precision(k),g.precision(k),S()):i.precision()},A.scale=function(k){return arguments.length?(i.scale(k),c.scale(k*.35),g.scale(k),A.translate(i.translate())):i.scale()},A.translate=function(k){if(!arguments.length)return i.translate();var O=i.scale(),N=+k[0],R=+k[1];return a=i.translate(k).clipExtent([[N-.455*O,R-.238*O],[N+.455*O,R+.238*O]]).stream(w),d=c.translate([N-.307*O,R+.201*O]).clipExtent([[N-.425*O+pn,R+.12*O+pn],[N-.214*O-pn,R+.234*O-pn]]).stream(w),l=g.translate([N-.205*O,R+.212*O]).clipExtent([[N-.214*O+pn,R+.166*O+pn],[N-.115*O-pn,R+.234*O-pn]]).stream(w),S()},A.fitExtent=function(k,O){return ey(A,k,O)},A.fitSize=function(k,O){return ix(A,k,O)},A.fitWidth=function(k,O){return ox(A,k,O)},A.fitHeight=function(k,O){return sx(A,k,O)};function S(){return e=t=null,A}return A.scale(1070)}function qI(e){return function(t,i){var a=on(t),c=on(i),d=e(a*c);return d===1/0?[2,0]:[d*c*Yt(t),d*Yt(i)]}}function Zd(e){return function(t,i){var a=bi(t*t+i*i),c=e(a),d=Yt(c),g=on(c);return[po(t*d,a*g),mo(a&&i*d/a)]}}var ux=qI(function(e){return bi(2/(1+e))});ux.invert=Zd(function(e){return 2*mo(e/2)});function hF(){return ma(ux).scale(124.75).clipAngle(180-.001)}var cx=qI(function(e){return(e=mI(e))&&e/Yt(e)});cx.invert=Zd(function(e){return e});function fF(){return ma(cx).scale(79.4188).clipAngle(180-.001)}function Hd(e,t){return[e,ag(ex((Nr+t)/2))]}Hd.invert=function(e,t){return[e,2*Oh(pI(t))-Nr]};function dF(){return KI(Hd).scale(961/fo)}function KI(e){var t=ma(e),i=t.center,a=t.scale,c=t.translate,d=t.clipExtent,g=null,l,b,w;t.scale=function(S){return arguments.length?(a(S),A()):a()},t.translate=function(S){return arguments.length?(c(S),A()):c()},t.center=function(S){return arguments.length?(i(S),A()):i()},t.clipExtent=function(S){return arguments.length?(S==null?g=l=b=w=null:(g=+S[0][0],l=+S[0][1],b=+S[1][0],w=+S[1][1]),A()):g==null?null:[[g,l],[b,w]]};function A(){var S=Fn*a(),k=t(CI(t.rotate()).invert([0,0]));return d(g==null?[[k[0]-S,k[1]-S],[k[0]+S,k[1]+S]]:e===Hd?[[Math.max(k[0]-S,g),l],[Math.min(k[0]+S,b),w]]:[[g,Math.max(k[1]-S,l)],[b,Math.min(k[1]+S,w)]])}return A()}function sm(e){return ex((Nr+e)/2)}function YI(e,t){var i=on(e),a=e===t?Yt(e):ag(i/on(t))/ag(sm(t)/sm(e)),c=i*O0(sm(e),a)/a;if(!a)return Hd;function d(g,l){c>0?l<-Nr+pn&&(l=-Nr+pn):l>Nr-pn&&(l=Nr-pn);var b=c/O0(sm(l),a);return[b*Yt(a*g),c-b*on(a*g)]}return d.invert=function(g,l){var b=c-l,w=hs(a)*bi(g*g+b*b),A=po(g,Vn(b))*hs(b);return b*a<0&&(A-=Fn*hs(g)*hs(b)),[A/a,2*Oh(O0(c/w,1/a))-Nr]},d}function pF(){return lx(YI).scale(109.5).parallels([30,30])}function Ld(e,t){return[e,t]}Ld.invert=Ld;function mF(){return ma(Ld).scale(152.63)}function JI(e,t){var i=on(e),a=e===t?Yt(e):(i-on(t))/(t-e),c=i/a+e;if(Vn(a)<pn)return Ld;function d(g,l){var b=c-l,w=a*g;return[b*Yt(w),c-b*on(w)]}return d.invert=function(g,l){var b=c-l,w=po(g,Vn(b))*hs(b);return b*a<0&&(w-=Fn*hs(g)*hs(b)),[w/a,c-hs(a)*bi(g*g+b*b)]},d}function gF(){return lx(JI).scale(131.154).center([0,13.9389])}var rd=1.340264,id=-.081106,od=893e-6,sd=.003796,Pg=bi(3)/2,yF=12;function hx(e,t){var i=mo(Pg*Yt(t)),a=i*i,c=a*a*a;return[e*on(i)/(Pg*(rd+3*id*a+c*(7*od+9*sd*a))),i*(rd+id*a+c*(od+sd*a))]}hx.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,d=0,g,l,b;d<yF&&(l=i*(rd+id*a+c*(od+sd*a))-t,b=rd+3*id*a+c*(7*od+9*sd*a),i-=g=l/b,a=i*i,c=a*a*a,!(Vn(g)<Pd));++d);return[Pg*e*(rd+3*id*a+c*(7*od+9*sd*a))/on(i),mo(Yt(i)/Pg)]};function vF(){return ma(hx).scale(177.158)}function fx(e,t){var i=on(t),a=on(e)*i;return[i*Yt(e)/a,Yt(t)/a]}fx.invert=Zd(Oh);function _F(){return ma(fx).scale(144.049).clipAngle(60)}function xF(){var e=1,t=0,i=0,a=1,c=1,d=0,g,l,b=null,w,A,S,k=1,O=1,N=Gd({point:function(se,X){var V=G([se,X]);this.stream.point(V[0],V[1])}}),R=kd,ce,K;function H(){return k=e*a,O=e*c,ce=K=null,G}function G(se){var X=se[0]*k,V=se[1]*O;if(d){var C=V*g-X*l;X=X*g+V*l,V=C}return[X+t,V+i]}return G.invert=function(se){var X=se[0]-t,V=se[1]-i;if(d){var C=V*g+X*l;X=X*g-V*l,V=C}return[X/k,V/O]},G.stream=function(se){return ce&&K===se?ce:ce=N(R(K=se))},G.postclip=function(se){return arguments.length?(R=se,b=w=A=S=null,H()):R},G.clipExtent=function(se){return arguments.length?(R=se==null?(b=w=A=S=null,kd):Qg(b=+se[0][0],w=+se[0][1],A=+se[1][0],S=+se[1][1]),H()):b==null?null:[[b,w],[A,S]]},G.scale=function(se){return arguments.length?(e=+se,H()):e},G.translate=function(se){return arguments.length?(t=+se[0],i=+se[1],H()):[t,i]},G.angle=function(se){return arguments.length?(d=se%360*mn,l=Yt(d),g=on(d),H()):d*dr},G.reflectX=function(se){return arguments.length?(a=se?-1:1,H()):a<0},G.reflectY=function(se){return arguments.length?(c=se?-1:1,H()):c<0},G.fitExtent=function(se,X){return ey(G,se,X)},G.fitSize=function(se,X){return ix(G,se,X)},G.fitWidth=function(se,X){return ox(G,se,X)},G.fitHeight=function(se,X){return sx(G,se,X)},G}function dx(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}dx.invert=function(e,t){var i=t,a=25,c;do{var d=i*i,g=d*d;i-=c=(i*(1.007226+d*(.015085+g*(-.044475+.028874*d-.005916*g)))-t)/(1.007226+d*(.015085*3+g*(-.044475*7+.028874*9*d-.005916*11*g)))}while(Vn(c)>pn&&--a>0);return[e/(.8707+(d=i*i)*(-.131979+d*(-.013791+d*d*d*(.003971-.001529*d)))),i]};function wF(){return ma(dx).scale(175.295)}function px(e,t){return[on(t)*Yt(e),Yt(t)]}px.invert=Zd(mo);function bF(){return ma(px).scale(249.5).clipAngle(90+pn)}function mx(e,t){var i=on(t),a=1+on(e)*i;return[i*Yt(e)/a,Yt(t)/a]}mx.invert=Zd(function(e){return 2*Oh(e)});function SF(){return ma(mx).scale(250).clipAngle(142)}function gx(e,t){return[ag(ex((Nr+t)/2)),-e]}gx.invert=function(e,t){return[-t,2*Oh(pI(e))-Nr]};function EF(){var e=KI(gx),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const TF=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:XI,geoAlbersUsa:cF,geoArea:mO,geoAzimuthalEqualArea:hF,geoAzimuthalEqualAreaRaw:ux,geoAzimuthalEquidistant:fF,geoAzimuthalEquidistantRaw:cx,geoBounds:_O,geoCentroid:TO,geoCircle:CO,geoClipAntimeridian:T_,geoClipCircle:LI,geoClipExtent:zO,geoClipRectangle:Qg,geoConicConformal:pF,geoConicConformalRaw:YI,geoConicEqualArea:Ag,geoConicEqualAreaRaw:WI,geoConicEquidistant:gF,geoConicEquidistantRaw:JI,geoContains:NO,geoDistance:xg,geoEqualEarth:vF,geoEqualEarthRaw:hx,geoEquirectangular:mF,geoEquirectangularRaw:Ld,geoGnomonic:_F,geoGnomonicRaw:fx,geoGraticule:FI,geoGraticule10:UO,geoIdentity:xF,geoInterpolate:$O,geoLength:zI,geoMercator:dF,geoMercatorRaw:Hd,geoNaturalEarth1:wF,geoNaturalEarth1Raw:dx,geoOrthographic:bF,geoOrthographicRaw:px,geoPath:eF,geoProjection:ma,geoProjectionMutator:ax,geoRotation:CI,geoStereographic:SF,geoStereographicRaw:mx,geoStream:Fs,geoTransform:tF,geoTransverseMercator:EF,geoTransverseMercatorRaw:gx},Symbol.toStringTag,{value:"Module"})),CF=G_(TF);var su=2*Math.PI*6378137/2,IF=Math.PI/180;function QI(e){return e=e||256,2*Math.PI*6378137/e}function AF(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function D_(e,t,i){var a=eA(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function eA(e,t,i){var a=t,c=Ex(e[0]),d=Sx(e[1]),g=Math.sin(d*IF),l=Math.pow(2,a),b=l*(c/360+.5),w=l*(.5-.25*Math.log((1+g)/(1-g))/Math.PI);return uc([b,w,a],i)}function PF(e,t=6){var i=e[0],a=e[1],c=e[2],d=e[3],g=(i-c)/2+c,l=(a-d)/2+d;return t!=null&&(g=Number(g.toFixed(t)),l=Number(l.toFixed(t))),[g,l]}function kg(e,t,i={enable:!0,decimal:1}){e=ty(e,t);var a=e[0],c=e[1],d=a*su/180,g=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return g=g*su/180,i.enable&&(d=Number(d.toFixed(i.decimal)),g=Number(g.toFixed(i.decimal))),[d,g]}function B_(e,t=6){var i=e[0],a=e[1],c=i/su*180,d=a/su*180;return d=180/Math.PI*(2*Math.atan(Math.exp(d*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),d=Number(d.toFixed(t))),[c,d]}function yx(e,t,i){var a=e[0],c=e[1],d=wx(t,i),g=(a+su)/d,l=(c+su)/d;return[g,l,t]}function tA(e,t,i){e=ty(e,i);var a=kg(e),c=yx(a,t);return vx(c)}function kF(e,t,i){if(e=ty(e,i),t===0)return[0,0,0];var a=tA(e,t);return rA(a)}function MF(e,t){if(t===0)return[0,0,0];var i=yx(e,t);return vx(i)}function N_(e,t,i=1){var a=e[0],c=e[1],d=e[2],g=wx(d,t),l=a*g-su,b=c*g-su;return i!=null&&(l=Number(l.toFixed(i)),b=Number(b.toFixed(i))),[l,b]}function vx(e,t,i){t=t||256;var a=e[0],c=e[1],d=e[2];if(d===0)return[0,0,0];xx(d);var g=Math.ceil(a/t)-1,l=Math.ceil(c/t)-1;return g<0&&(g=0),l<0&&(l=0),[g,l,d]}function _x(e,t,i){uc(e,i),t=t||256;var a=e[0],c=e[1],d=e[2],g=N_([a*t,c*t,d]),l=N_([(a+1)*t,(c+1)*t,d]);return[g[0],g[1],l[0],l[1]]}function nA(e,t){uc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var d=_x([i,a,c]),g=d[0],l=d[1],b=d[2],w=d[3],A=B_([g,l,c]),S=B_([b,w,c]);return[A[0],A[1],S[0],S[1]]}function LF(e){var t=Wd(e);return _x(t)}function zF(e){var t=Wd(e);return nA(t)}function rA(e,t){uc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var d=i,g=Math.pow(2,c)-1-a;return[d,g,c]}function Wd(e){var t=e[0],i=e[1],a=e[2],c=t,d=Math.pow(2,a)-i-1;return[c,d,a]}function OF(e){var t=Wd(e);return iA(t)}function iA(e,t){uc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var d="";return a=Math.pow(2,c)-1-a,bx(c,0,-1).map(function(g){var l=0,b=1<<g-1;i&b&&(l+=1),a&b&&(l+=2),d=d.concat(l)}),d}function FF(e){var t=oA(e);return Wd(t)}function oA(e){var t=0,i=0,a=e.length;return bx(a,0,-1).map(function(c){var d=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=d;break;case 2:i+=d;break;case 3:t+=d,i+=d;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function RF(e){var t=kg([e[0],e[1]]),i=kg([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function uc(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=xx(c),e=sA(e),e}function sA(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function xx(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function ty(e,t){if(t===!1)return e;var i=Ex(e[0]),a=Sx(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function wx(e,t){return QI(t)/Math.pow(2,e)}function bx(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),d=0;d<a;d++,e+=i)c[d]=e;return c}function jF(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(d){d[0]<t&&(t=d[0]),d[1]<i&&(i=d[1]),d[2]>a&&(a=d[2]),d[3]>c&&(c=d[3])}),[t,i,a,c]}}function DF(e){try{return uc(e),!0}catch{return!1}}function Sx(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Ex(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function BF(e){var t=D_([e[0],e[1]],32),i=D_([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=NF(a);if(c===0)return[0,0,0];var d=a[0]>>>32-c,g=a[1]>>>32-c;return[d,g,c]}function NF(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const UF=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:PF,bboxToMeters:RF,bboxToTile:BF,googleToBBox:zF,googleToBBoxMeters:LF,googleToQuadkey:OF,googleToTile:Wd,hash:AF,initialResolution:QI,latitude:Sx,lngLatToGoogle:kF,lngLatToMeters:kg,lngLatToTile:tA,longitude:Ex,maxBBox:jF,metersToLngLat:B_,metersToPixels:yx,metersToTile:MF,pixelsToMeters:N_,pixelsToTile:vx,pointToTile:D_,pointToTileFraction:eA,quadkeyToGoogle:oA,quadkeyToTile:FF,range:bx,resolution:wx,tileToBBox:nA,tileToBBoxMeters:_x,tileToGoogle:rA,tileToQuadkey:iA,validTile:DF,validateLngLat:ty,validateTile:uc,validateZoom:xx,wrapTile:sA},Symbol.toStringTag,{value:"Module"})),$F=G_(UF);var ny={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ny.read=function(e,t,i,a,c){var d,g,l=c*8-a-1,b=(1<<l)-1,w=b>>1,A=-7,S=i?c-1:0,k=i?-1:1,O=e[t+S];for(S+=k,d=O&(1<<-A)-1,O>>=-A,A+=l;A>0;d=d*256+e[t+S],S+=k,A-=8);for(g=d&(1<<-A)-1,d>>=-A,A+=a;A>0;g=g*256+e[t+S],S+=k,A-=8);if(d===0)d=1-w;else{if(d===b)return g?NaN:(O?-1:1)*(1/0);g=g+Math.pow(2,a),d=d-w}return(O?-1:1)*g*Math.pow(2,d-a)};ny.write=function(e,t,i,a,c,d){var g,l,b,w=d*8-c-1,A=(1<<w)-1,S=A>>1,k=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=a?0:d-1,N=a?1:-1,R=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,g=A):(g=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-g))<1&&(g--,b*=2),g+S>=1?t+=k/b:t+=k*Math.pow(2,1-S),t*b>=2&&(g++,b/=2),g+S>=A?(l=0,g=A):g+S>=1?(l=(t*b-1)*Math.pow(2,c),g=g+S):(l=t*Math.pow(2,S-1)*Math.pow(2,c),g=0));c>=8;e[i+O]=l&255,O+=N,l/=256,c-=8);for(g=g<<c|l,w+=c;w>0;e[i+O]=g&255,O+=N,g/=256,w-=8);e[i+O-N]|=R*128};var VF=Yn,am=ny;function Yn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Yn.Varint=0;Yn.Fixed64=1;Yn.Bytes=2;Yn.Fixed32=5;var U_=65536*65536,zS=1/U_,GF=12,aA=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Yn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,d=this.pos;this.type=a&7,e(c,t,this),this.pos===d&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=lm(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=FS(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=lm(this.buf,this.pos)+lm(this.buf,this.pos+4)*U_;return this.pos+=8,e},readSFixed64:function(){var e=lm(this.buf,this.pos)+FS(this.buf,this.pos+4)*U_;return this.pos+=8,e},readFloat:function(){var e=am.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=am.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,ZF(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=GF&&aA?o5(this.buf,t,e):i5(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Yn.Bytes)return e.push(this.readVarint(t));var i=Na(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Yn.Bytes)return e.push(this.readSVarint());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Yn.Bytes)return e.push(this.readBoolean());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Yn.Bytes)return e.push(this.readFloat());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Yn.Bytes)return e.push(this.readDouble());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Yn.Bytes)return e.push(this.readFixed32());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Yn.Bytes)return e.push(this.readSFixed32());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Yn.Bytes)return e.push(this.readFixed64());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Yn.Bytes)return e.push(this.readSFixed64());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Yn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Yn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Yn.Fixed32)this.pos+=4;else if(t===Yn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Nc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Nc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Nc(this.buf,e&-1,this.pos),Nc(this.buf,Math.floor(e*zS),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Nc(this.buf,e&-1,this.pos),Nc(this.buf,Math.floor(e*zS),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){HF(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=s5(this.buf,e,this.pos);var i=this.pos-t;i>=128&&OS(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),am.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),am.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&OS(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,Yn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,qF,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,KF,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,QF,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,YF,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,JF,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,e5,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,t5,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,n5,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,r5,t)},writeBytesField:function(e,t){this.writeTag(e,Yn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Yn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Yn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Yn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Yn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Yn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Yn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Yn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Yn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Yn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function ZF(e,t,i){var a=i.buf,c,d;if(d=a[i.pos++],c=(d&112)>>4,d<128||(d=a[i.pos++],c|=(d&127)<<3,d<128)||(d=a[i.pos++],c|=(d&127)<<10,d<128)||(d=a[i.pos++],c|=(d&127)<<17,d<128)||(d=a[i.pos++],c|=(d&127)<<24,d<128)||(d=a[i.pos++],c|=(d&1)<<31,d<128))return Bc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Na(e){return e.type===Yn.Bytes?e.readVarint()+e.pos:e.pos+1}function Bc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function HF(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),WF(i,a,t),XF(a,t)}function WF(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function XF(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function OS(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function qF(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function KF(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function YF(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function JF(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function QF(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function e5(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function t5(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function n5(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function r5(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function lm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Nc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function FS(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function i5(e,t,i){for(var a="",c=t;c<i;){var d=e[c],g=null,l=d>239?4:d>223?3:d>191?2:1;if(c+l>i)break;var b,w,A;l===1?d<128&&(g=d):l===2?(b=e[c+1],(b&192)===128&&(g=(d&31)<<6|b&63,g<=127&&(g=null))):l===3?(b=e[c+1],w=e[c+2],(b&192)===128&&(w&192)===128&&(g=(d&15)<<12|(b&63)<<6|w&63,(g<=2047||g>=55296&&g<=57343)&&(g=null))):l===4&&(b=e[c+1],w=e[c+2],A=e[c+3],(b&192)===128&&(w&192)===128&&(A&192)===128&&(g=(d&15)<<18|(b&63)<<12|(w&63)<<6|A&63,(g<=65535||g>=1114112)&&(g=null))),g===null?(g=65533,l=1):g>65535&&(g-=65536,a+=String.fromCharCode(g>>>10&1023|55296),g=56320|g&1023),a+=String.fromCharCode(g),c+=l}return a}function o5(e,t,i){return aA.decode(e.subarray(t,i))}function s5(e,t,i){for(var a=0,c,d;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(d)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,d=c;continue}else c=d-55296<<10|c-56320|65536,d=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):d=c;continue}else d&&(e[i++]=239,e[i++]=191,e[i++]=189,d=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var Tx={exports:{}},lA=function(t,i){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return t.apply(i,c)}},a5=lA,cc=Object.prototype.toString;function Cx(e){return cc.call(e)==="[object Array]"}function $_(e){return typeof e>"u"}function l5(e){return e!==null&&!$_(e)&&e.constructor!==null&&!$_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function u5(e){return cc.call(e)==="[object ArrayBuffer]"}function c5(e){return typeof FormData<"u"&&e instanceof FormData}function h5(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function f5(e){return typeof e=="string"}function d5(e){return typeof e=="number"}function uA(e){return e!==null&&typeof e=="object"}function Im(e){if(cc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function p5(e){return cc.call(e)==="[object Date]"}function m5(e){return cc.call(e)==="[object File]"}function g5(e){return cc.call(e)==="[object Blob]"}function cA(e){return cc.call(e)==="[object Function]"}function y5(e){return uA(e)&&cA(e.pipe)}function v5(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function _5(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function x5(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Ix(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Cx(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function V_(){var e={};function t(c,d){Im(e[d])&&Im(c)?e[d]=V_(e[d],c):Im(c)?e[d]=V_({},c):Cx(c)?e[d]=c.slice():e[d]=c}for(var i=0,a=arguments.length;i<a;i++)Ix(arguments[i],t);return e}function w5(e,t,i){return Ix(t,function(c,d){i&&typeof c=="function"?e[d]=a5(c,i):e[d]=c}),e}function b5(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Ho={isArray:Cx,isArrayBuffer:u5,isBuffer:l5,isFormData:c5,isArrayBufferView:h5,isString:f5,isNumber:d5,isObject:uA,isPlainObject:Im,isUndefined:$_,isDate:p5,isFile:m5,isBlob:g5,isFunction:cA,isStream:y5,isURLSearchParams:v5,isStandardBrowserEnv:x5,forEach:Ix,merge:V_,extend:w5,trim:_5,stripBOM:b5},Uc=Ho;function RS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var hA=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(Uc.isURLSearchParams(i))c=i.toString();else{var d=[];Uc.forEach(i,function(b,w){b===null||typeof b>"u"||(Uc.isArray(b)?w=w+"[]":b=[b],Uc.forEach(b,function(S){Uc.isDate(S)?S=S.toISOString():Uc.isObject(S)&&(S=JSON.stringify(S)),d.push(RS(w)+"="+RS(S))}))}),c=d.join("&")}if(c){var g=t.indexOf("#");g!==-1&&(t=t.slice(0,g)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},S5=Ho;function ry(){this.handlers=[]}ry.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};ry.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};ry.prototype.forEach=function(t){S5.forEach(this.handlers,function(a){a!==null&&t(a)})};var E5=ry,T5=Ho,C5=function(t,i){T5.forEach(t,function(c,d){d!==i&&d.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[d])})},fA=function(t,i,a,c,d){return t.config=i,a&&(t.code=a),t.request=c,t.response=d,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},B0,jS;function dA(){if(jS)return B0;jS=1;var e=fA;return B0=function(i,a,c,d,g){var l=new Error(i);return e(l,a,c,d,g)},B0}var N0,DS;function I5(){if(DS)return N0;DS=1;var e=dA();return N0=function(i,a,c){var d=c.config.validateStatus;!c.status||!d||d(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},N0}var U0,BS;function A5(){if(BS)return U0;BS=1;var e=Ho;return U0=e.isStandardBrowserEnv()?function(){return{write:function(a,c,d,g,l,b){var w=[];w.push(a+"="+encodeURIComponent(c)),e.isNumber(d)&&w.push("expires="+new Date(d).toGMTString()),e.isString(g)&&w.push("path="+g),e.isString(l)&&w.push("domain="+l),b===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),U0}var $0,NS;function P5(){return NS||(NS=1,$0=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),$0}var V0,US;function k5(){return US||(US=1,V0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),V0}var G0,$S;function M5(){if($S)return G0;$S=1;var e=P5(),t=k5();return G0=function(a,c){return a&&!e(c)?t(a,c):c},G0}var Z0,VS;function L5(){if(VS)return Z0;VS=1;var e=Ho,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Z0=function(a){var c={},d,g,l;return a&&e.forEach(a.split(`
`),function(w){if(l=w.indexOf(":"),d=e.trim(w.substr(0,l)).toLowerCase(),g=e.trim(w.substr(l+1)),d){if(c[d]&&t.indexOf(d)>=0)return;d==="set-cookie"?c[d]=(c[d]?c[d]:[]).concat([g]):c[d]=c[d]?c[d]+", "+g:g}}),c},Z0}var H0,GS;function z5(){if(GS)return H0;GS=1;var e=Ho;return H0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function d(g){var l=g;return i&&(a.setAttribute("href",l),l=a.href),a.setAttribute("href",l),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=d(window.location.href),function(l){var b=e.isString(l)?d(l):l;return b.protocol===c.protocol&&b.host===c.host}}():function(){return function(){return!0}}(),H0}var W0,ZS;function HS(){if(ZS)return W0;ZS=1;var e=Ho,t=I5(),i=A5(),a=hA,c=M5(),d=L5(),g=z5(),l=dA();return W0=function(w){return new Promise(function(S,k){var O=w.data,N=w.headers,R=w.responseType;e.isFormData(O)&&delete N["Content-Type"];var ce=new XMLHttpRequest;if(w.auth){var K=w.auth.username||"",H=w.auth.password?unescape(encodeURIComponent(w.auth.password)):"";N.Authorization="Basic "+btoa(K+":"+H)}var G=c(w.baseURL,w.url);ce.open(w.method.toUpperCase(),a(G,w.params,w.paramsSerializer),!0),ce.timeout=w.timeout;function se(){if(ce){var V="getAllResponseHeaders"in ce?d(ce.getAllResponseHeaders()):null,C=!R||R==="text"||R==="json"?ce.responseText:ce.response,F={data:C,status:ce.status,statusText:ce.statusText,headers:V,config:w,request:ce};t(S,k,F),ce=null}}if("onloadend"in ce?ce.onloadend=se:ce.onreadystatechange=function(){!ce||ce.readyState!==4||ce.status===0&&!(ce.responseURL&&ce.responseURL.indexOf("file:")===0)||setTimeout(se)},ce.onabort=function(){ce&&(k(l("Request aborted",w,"ECONNABORTED",ce)),ce=null)},ce.onerror=function(){k(l("Network Error",w,null,ce)),ce=null},ce.ontimeout=function(){var C="timeout of "+w.timeout+"ms exceeded";w.timeoutErrorMessage&&(C=w.timeoutErrorMessage),k(l(C,w,w.transitional&&w.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ce)),ce=null},e.isStandardBrowserEnv()){var X=(w.withCredentials||g(G))&&w.xsrfCookieName?i.read(w.xsrfCookieName):void 0;X&&(N[w.xsrfHeaderName]=X)}"setRequestHeader"in ce&&e.forEach(N,function(C,F){typeof O>"u"&&F.toLowerCase()==="content-type"?delete N[F]:ce.setRequestHeader(F,C)}),e.isUndefined(w.withCredentials)||(ce.withCredentials=!!w.withCredentials),R&&R!=="json"&&(ce.responseType=w.responseType),typeof w.onDownloadProgress=="function"&&ce.addEventListener("progress",w.onDownloadProgress),typeof w.onUploadProgress=="function"&&ce.upload&&ce.upload.addEventListener("progress",w.onUploadProgress),w.cancelToken&&w.cancelToken.promise.then(function(C){ce&&(ce.abort(),k(C),ce=null)}),O||(O=null),ce.send(O)})},W0}var Li=Ho,WS=C5,O5=fA,F5={"Content-Type":"application/x-www-form-urlencoded"};function XS(e,t){!Li.isUndefined(e)&&Li.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function R5(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=HS()),e}function j5(e,t,i){if(Li.isString(e))try{return(t||JSON.parse)(e),Li.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var iy={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:R5(),transformRequest:[function(t,i){return WS(i,"Accept"),WS(i,"Content-Type"),Li.isFormData(t)||Li.isArrayBuffer(t)||Li.isBuffer(t)||Li.isStream(t)||Li.isFile(t)||Li.isBlob(t)?t:Li.isArrayBufferView(t)?t.buffer:Li.isURLSearchParams(t)?(XS(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Li.isObject(t)||i&&i["Content-Type"]==="application/json"?(XS(i,"application/json"),j5(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,d=!a&&this.responseType==="json";if(d||c&&Li.isString(t)&&t.length)try{return JSON.parse(t)}catch(g){if(d)throw g.name==="SyntaxError"?O5(g,this,"E_JSON_PARSE"):g}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};iy.headers={common:{Accept:"application/json, text/plain, */*"}};Li.forEach(["delete","get","head"],function(t){iy.headers[t]={}});Li.forEach(["post","put","patch"],function(t){iy.headers[t]=Li.merge(F5)});var Ax=iy,D5=Ho,B5=Ax,N5=function(t,i,a){var c=this||B5;return D5.forEach(a,function(g){t=g.call(c,t,i)}),t},X0,qS;function pA(){return qS||(qS=1,X0=function(t){return!!(t&&t.__CANCEL__)}),X0}var KS=Ho,q0=N5,U5=pA(),$5=Ax;function K0(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var V5=function(t){K0(t),t.headers=t.headers||{},t.data=q0.call(t,t.data,t.headers,t.transformRequest),t.headers=KS.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),KS.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||$5.adapter;return i(t).then(function(c){return K0(t),c.data=q0.call(t,c.data,c.headers,t.transformResponse),c},function(c){return U5(c)||(K0(t),c&&c.response&&(c.response.data=q0.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Xi=Ho,mA=function(t,i){i=i||{};var a={},c=["url","method","data"],d=["headers","auth","proxy","params"],g=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function b(k,O){return Xi.isPlainObject(k)&&Xi.isPlainObject(O)?Xi.merge(k,O):Xi.isPlainObject(O)?Xi.merge({},O):Xi.isArray(O)?O.slice():O}function w(k){Xi.isUndefined(i[k])?Xi.isUndefined(t[k])||(a[k]=b(void 0,t[k])):a[k]=b(t[k],i[k])}Xi.forEach(c,function(O){Xi.isUndefined(i[O])||(a[O]=b(void 0,i[O]))}),Xi.forEach(d,w),Xi.forEach(g,function(O){Xi.isUndefined(i[O])?Xi.isUndefined(t[O])||(a[O]=b(void 0,t[O])):a[O]=b(void 0,i[O])}),Xi.forEach(l,function(O){O in i?a[O]=b(t[O],i[O]):O in t&&(a[O]=b(void 0,t[O]))});var A=c.concat(d).concat(g).concat(l),S=Object.keys(t).concat(Object.keys(i)).filter(function(O){return A.indexOf(O)===-1});return Xi.forEach(S,w),a};const G5="axios",Z5="0.21.4",H5="Promise based HTTP client for the browser and node.js",W5="index.js",X5={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},q5={type:"git",url:"https://github.com/axios/axios.git"},K5=["xhr","http","ajax","promise","node"],Y5="Matt Zabriskie",J5="MIT",Q5={url:"https://github.com/axios/axios/issues"},eR="https://axios-http.com",tR={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},nR={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},rR="dist/axios.min.js",iR="dist/axios.min.js",oR="./index.d.ts",sR={"follow-redirects":"^1.14.0"},aR=[{path:"./dist/axios.min.js",threshold:"5kB"}],lR={name:G5,version:Z5,description:H5,main:W5,scripts:X5,repository:q5,keywords:K5,author:Y5,license:J5,bugs:Q5,homepage:eR,devDependencies:tR,browser:nR,jsdelivr:rR,unpkg:iR,typings:oR,dependencies:sR,bundlesize:aR};var gA=lR,Px={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Px[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var YS={},uR=gA.version.split(".");function yA(e,t){for(var i=t?t.split("."):uR,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}Px.transitional=function(t,i,a){var c=i&&yA(i);function d(g,l){return"[Axios v"+gA.version+"] Transitional option '"+g+"'"+l+(a?". "+a:"")}return function(g,l,b){if(t===!1)throw new Error(d(l," has been removed in "+i));return c&&!YS[l]&&(YS[l]=!0,console.warn(d(l," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(g,l,b):!0}};function cR(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var d=a[c],g=t[d];if(g){var l=e[d],b=l===void 0||g(l,d,e);if(b!==!0)throw new TypeError("option "+d+" must be "+b);continue}if(i!==!0)throw Error("Unknown option "+d)}}var hR={isOlderVersion:yA,assertOptions:cR,validators:Px},vA=Ho,fR=hA,JS=E5,QS=V5,oy=mA,_A=hR,$c=_A.validators;function Xd(e){this.defaults=e,this.interceptors={request:new JS,response:new JS}}Xd.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=oy(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&_A.assertOptions(i,{silentJSONParsing:$c.transitional($c.boolean,"1.0.0"),forcedJSONParsing:$c.transitional($c.boolean,"1.0.0"),clarifyTimeoutError:$c.transitional($c.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(c=c&&k.synchronous,a.unshift(k.fulfilled,k.rejected))});var d=[];this.interceptors.response.forEach(function(k){d.push(k.fulfilled,k.rejected)});var g;if(!c){var l=[QS,void 0];for(Array.prototype.unshift.apply(l,a),l=l.concat(d),g=Promise.resolve(t);l.length;)g=g.then(l.shift(),l.shift());return g}for(var b=t;a.length;){var w=a.shift(),A=a.shift();try{b=w(b)}catch(S){A(S);break}}try{g=QS(b)}catch(S){return Promise.reject(S)}for(;d.length;)g=g.then(d.shift(),d.shift());return g};Xd.prototype.getUri=function(t){return t=oy(this.defaults,t),fR(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};vA.forEach(["delete","get","head","options"],function(t){Xd.prototype[t]=function(i,a){return this.request(oy(a||{},{method:t,url:i,data:(a||{}).data}))}});vA.forEach(["post","put","patch"],function(t){Xd.prototype[t]=function(i,a,c){return this.request(oy(c||{},{method:t,url:i,data:a}))}});var dR=Xd,Y0,eE;function xA(){if(eE)return Y0;eE=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,Y0=e,Y0}var J0,tE;function pR(){if(tE)return J0;tE=1;var e=xA();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(g){a=g});var c=this;i(function(g){c.reason||(c.reason=new e(g),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(g){a=g});return{token:c,cancel:a}},J0=t,J0}var Q0,nE;function mR(){return nE||(nE=1,Q0=function(t){return function(a){return t.apply(null,a)}}),Q0}var ev,rE;function gR(){return rE||(rE=1,ev=function(t){return typeof t=="object"&&t.isAxiosError===!0}),ev}var iE=Ho,yR=lA,Am=dR,vR=mA,_R=Ax;function wA(e){var t=new Am(e),i=yR(Am.prototype.request,t);return iE.extend(i,Am.prototype,t),iE.extend(i,t),i}var Vs=wA(_R);Vs.Axios=Am;Vs.create=function(t){return wA(vR(Vs.defaults,t))};Vs.Cancel=xA();Vs.CancelToken=pR();Vs.isCancel=pA();Vs.all=function(t){return Promise.all(t)};Vs.spread=mR();Vs.isAxiosError=gR();Tx.exports=Vs;Tx.exports.default=Vs;var xR=Tx.exports,wR=xR;const bR={},SR=Object.freeze(Object.defineProperty({__proto__:null,default:bR},Symbol.toStringTag,{value:"Module"})),ER=G_(SR);var sy={},TR=mh;function mh(e,t){this.x=e,this.y=t}mh.prototype={clone:function(){return new mh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),d=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};mh.convert=function(e){return e instanceof mh?e:Array.isArray(e)?new mh(e[0],e[1]):e};var CR=TR,bA=Ah;function Ah(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(IR,this,t)}function IR(e,t,i){e==1?t.id=i.readVarint():e==2?AR(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function AR(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}Ah.types=["Unknown","Point","LineString","Polygon"];Ah.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,d=0,g=[],l;e.pos<t;){if(a<=0){var b=e.readVarint();i=b&7,a=b>>3}if(a--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),i===1&&(l&&g.push(l),l=[]),l.push(new CR(c,d));else if(i===7)l&&l.push(l[0].clone());else throw new Error("unknown command "+i)}return l&&g.push(l),g};Ah.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,d=0,g=1/0,l=-1/0,b=1/0,w=-1/0;e.pos<t;){if(a<=0){var A=e.readVarint();i=A&7,a=A>>3}if(a--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),c<g&&(g=c),c>l&&(l=c),d<b&&(b=d),d>w&&(w=d);else if(i!==7)throw new Error("unknown command "+i)}return[g,b,l,w]};Ah.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,d=this.extent*t,g=this.loadGeometry(),l=Ah.types[this.type],b,w;function A(O){for(var N=0;N<O.length;N++){var R=O[N],ce=180-(R.y+d)*360/a;O[N]=[(R.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(ce*Math.PI/180))-90]}}switch(this.type){case 1:var S=[];for(b=0;b<g.length;b++)S[b]=g[b][0];g=S,A(g);break;case 2:for(b=0;b<g.length;b++)A(g[b]);break;case 3:for(g=PR(g),b=0;b<g.length;b++)for(w=0;w<g[b].length;w++)A(g[b][w]);break}g.length===1?g=g[0]:l="Multi"+l;var k={type:"Feature",geometry:{type:l,coordinates:g},properties:this.properties};return"id"in this&&(k.id=this.id),k};function PR(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,d=0;d<t;d++){var g=kR(e[d]);g!==0&&(c===void 0&&(c=g<0),c===g<0?(a&&i.push(a),a=[e[d]]):a.push(e[d]))}return a&&i.push(a),i}function kR(e){for(var t=0,i=0,a=e.length,c=a-1,d,g;i<a;c=i++)d=e[i],g=e[c],t+=(g.x-d.x)*(d.y+g.y);return t}var MR=bA,SA=EA;function EA(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(LR,this,t),this.length=this._features.length}function LR(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(zR(i))}function zR(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}EA.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new MR(this._pbf,t,this.extent,this._keys,this._values)};var OR=SA,FR=RR;function RR(e,t){this.layers=e.readFields(jR,{},t)}function jR(e,t,i){if(e===3){var a=new OR(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}sy.VectorTile=FR;sy.VectorTileFeature=bA;sy.VectorTileLayer=SA;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=CF,i=$F,a=VF,c=wR,d=ER,g=sy;function l(H){return H&&typeof H=="object"&&"default"in H?H:{default:H}}var b=l(a),w=l(c),A=l(d),S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Nl<"u"?Nl:typeof self<"u"?self:{};function k(H){var G={exports:{}};return H(G,G.exports),G.exports}var O=k(function(H,G){(function(X,V){H.exports=V(w.default)})(S,function(se){return function(X){var V={};function C(F){if(V[F])return V[F].exports;var D=V[F]={i:F,l:!1,exports:{}};return X[F].call(D.exports,D,D.exports,C),D.l=!0,D.exports}return C.m=X,C.c=V,C.d=function(F,D,Q){C.o(F,D)||Object.defineProperty(F,D,{enumerable:!0,get:Q})},C.r=function(F){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})},C.t=function(F,D){if(D&1&&(F=C(F)),D&8||D&4&&typeof F=="object"&&F&&F.__esModule)return F;var Q=Object.create(null);if(C.r(Q),Object.defineProperty(Q,"default",{enumerable:!0,value:F}),D&2&&typeof F!="string")for(var Y in F)C.d(Q,Y,(function(_e){return F[_e]}).bind(null,Y));return Q},C.n=function(F){var D=F&&F.__esModule?function(){return F.default}:function(){return F};return C.d(D,"a",D),D},C.o=function(F,D){return Object.prototype.hasOwnProperty.call(F,D)},C.p="",C(C.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(X,V,C){C.r(V),C.d(V,"CacheControl",function(){return Te}),C.d(V,"parse",function(){return $e}),C.d(V,"format",function(){return Ie}),C("./node_modules/core-js/modules/es6.array.from.js"),C("./node_modules/core-js/modules/es6.function.name.js"),C("./node_modules/core-js/modules/es6.object.to-string.js"),C("./node_modules/core-js/modules/web.dom.iterable.js"),C("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),C("./node_modules/core-js/modules/es6.symbol.js"),C("./node_modules/core-js/modules/es6.regexp.split.js"),C("./node_modules/core-js/modules/es6.number.is-finite.js");function F(Le,We){return we(Le)||_e(Le,We)||Q(Le,We)||D()}function D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q(Le,We){if(Le){if(typeof Le=="string")return Y(Le,We);var Ze=Object.prototype.toString.call(Le).slice(8,-1);if(Ze==="Object"&&Le.constructor&&(Ze=Le.constructor.name),Ze==="Map"||Ze==="Set")return Array.from(Le);if(Ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ze))return Y(Le,We)}}function Y(Le,We){(We==null||We>Le.length)&&(We=Le.length);for(var Ze=0,nt=new Array(We);Ze<We;Ze++)nt[Ze]=Le[Ze];return nt}function _e(Le,We){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Le)))){var Ze=[],nt=!0,ct=!1,vt=void 0;try{for(var It=Le[Symbol.iterator](),ft;!(nt=(ft=It.next()).done)&&(Ze.push(ft.value),!(We&&Ze.length===We));nt=!0);}catch(St){ct=!0,vt=St}finally{try{!nt&&It.return!=null&&It.return()}finally{if(ct)throw vt}}return Ze}}function we(Le){if(Array.isArray(Le))return Le}function pe(Le,We){if(!(Le instanceof We))throw new TypeError("Cannot call a class as a function")}function oe(Le,We){for(var Ze=0;Ze<We.length;Ze++){var nt=We[Ze];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(Le,nt.key,nt)}}function ue(Le,We,Ze){return We&&oe(Le.prototype,We),Ze&&oe(Le,Ze),Le}var te=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,ne={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function de(Le){return Le===null}function Se(Le){if(!Le)return null;var We=parseInt(Le,10);return!Number.isFinite(We)||We<0?null:We}var Te=function(){function Le(){pe(this,Le),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ue(Le,[{key:"parse",value:function(Ze){if(!Ze||Ze.length===0)return this;var nt={},ct=Ze.match(te)||[];return Array.prototype.forEach.call(ct,function(vt){var It=vt.split("=",2),ft=F(It,1),St=ft[0],Gt=null;It.length>1&&(Gt=It[1].trim()),nt[St.toLowerCase()]=Gt}),this.maxAge=Se(nt[ne.maxAge]),this.sharedMaxAge=Se(nt[ne.sharedMaxAge]),this.maxStale=de(nt[ne.maxStale]),this.maxStaleDuration=Se(nt[ne.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=Se(nt[ne.minFresh]),this.immutable=de(nt[ne.immutable]),this.mustRevalidate=de(nt[ne.mustRevalidate]),this.noCache=de(nt[ne.noCache]),this.noStore=de(nt[ne.noStore]),this.noTransform=de(nt[ne.noTransform]),this.onlyIfCached=de(nt[ne.onlyIfCached]),this.private=de(nt[ne.private]),this.proxyRevalidate=de(nt[ne.proxyRevalidate]),this.public=de(nt[ne.public]),this}},{key:"format",value:function(){var Ze=[];return this.maxAge&&Ze.push("".concat(ne.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ze.push("".concat(ne.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ze.push("".concat(ne.maxStale,"=").concat(this.maxStaleDuration)):Ze.push(ne.maxStale)),this.minFresh&&Ze.push("".concat(ne.minFresh,"=").concat(this.minFresh)),this.immutable&&Ze.push(ne.immutable),this.mustRevalidate&&Ze.push(ne.mustRevalidate),this.noCache&&Ze.push(ne.noCache),this.noStore&&Ze.push(ne.noStore),this.noTransform&&Ze.push(ne.noTransform),this.onlyIfCached&&Ze.push(ne.onlyIfCached),this.private&&Ze.push(ne.private),this.proxyRevalidate&&Ze.push(ne.proxyRevalidate),this.public&&Ze.push(ne.public),Ze.join(", ")}}]),Le}();function $e(Le){var We=new Te;return We.parse(Le)}function Ie(Le){return Le instanceof Te?Le.format():Te.prototype.format.call(Le)}V.default={CacheControl:Te,parse:$e,format:Ie}},"./node_modules/charenc/charenc.js":function(X,V){var C={utf8:{stringToBytes:function(F){return C.bin.stringToBytes(unescape(encodeURIComponent(F)))},bytesToString:function(F){return decodeURIComponent(escape(C.bin.bytesToString(F)))}},bin:{stringToBytes:function(F){for(var D=[],Q=0;Q<F.length;Q++)D.push(F.charCodeAt(Q)&255);return D},bytesToString:function(F){for(var D=[],Q=0;Q<F.length;Q++)D.push(String.fromCharCode(F[Q]));return D.join("")}}};X.exports=C},"./node_modules/core-js/modules/_a-function.js":function(X,V){X.exports=function(C){if(typeof C!="function")throw TypeError(C+" is not a function!");return C}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_wks.js")("unscopables"),D=Array.prototype;D[F]==null&&C("./node_modules/core-js/modules/_hide.js")(D,F,{}),X.exports=function(Q){D[F][Q]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_string-at.js")(!0);X.exports=function(D,Q,Y){return Q+(Y?F(D,Q).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_is-object.js");X.exports=function(D){if(!F(D))throw TypeError(D+" is not an object!");return D}},"./node_modules/core-js/modules/_array-includes.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_to-iobject.js"),D=C("./node_modules/core-js/modules/_to-length.js"),Q=C("./node_modules/core-js/modules/_to-absolute-index.js");X.exports=function(Y){return function(_e,we,pe){var oe=F(_e),ue=D(oe.length),te=Q(pe,ue),ne;if(Y&&we!=we){for(;ue>te;)if(ne=oe[te++],ne!=ne)return!0}else for(;ue>te;te++)if((Y||te in oe)&&oe[te]===we)return Y||te||0;return!Y&&-1}}},"./node_modules/core-js/modules/_bind.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_a-function.js"),D=C("./node_modules/core-js/modules/_is-object.js"),Q=C("./node_modules/core-js/modules/_invoke.js"),Y=[].slice,_e={},we=function(pe,oe,ue){if(!(oe in _e)){for(var te=[],ne=0;ne<oe;ne++)te[ne]="a["+ne+"]";_e[oe]=Function("F,a","return new F("+te.join(",")+")")}return _e[oe](pe,ue)};X.exports=Function.bind||function(oe){var ue=F(this),te=Y.call(arguments,1),ne=function(){var de=te.concat(Y.call(arguments));return this instanceof ne?we(ue,de.length,de):Q(ue,de,oe)};return D(ue.prototype)&&(ne.prototype=ue.prototype),ne}},"./node_modules/core-js/modules/_classof.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_cof.js"),D=C("./node_modules/core-js/modules/_wks.js")("toStringTag"),Q=F(function(){return arguments}())=="Arguments",Y=function(_e,we){try{return _e[we]}catch{}};X.exports=function(_e){var we,pe,oe;return _e===void 0?"Undefined":_e===null?"Null":typeof(pe=Y(we=Object(_e),D))=="string"?pe:Q?F(we):(oe=F(we))=="Object"&&typeof we.callee=="function"?"Arguments":oe}},"./node_modules/core-js/modules/_cof.js":function(X,V){var C={}.toString;X.exports=function(F){return C.call(F).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(X,V){var C=X.exports={version:"2.6.12"};typeof __e=="number"&&(__e=C)},"./node_modules/core-js/modules/_create-property.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_object-dp.js"),D=C("./node_modules/core-js/modules/_property-desc.js");X.exports=function(Q,Y,_e){Y in Q?F.f(Q,Y,D(0,_e)):Q[Y]=_e}},"./node_modules/core-js/modules/_ctx.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_a-function.js");X.exports=function(D,Q,Y){if(F(D),Q===void 0)return D;switch(Y){case 1:return function(_e){return D.call(Q,_e)};case 2:return function(_e,we){return D.call(Q,_e,we)};case 3:return function(_e,we,pe){return D.call(Q,_e,we,pe)}}return function(){return D.apply(Q,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(X,V){X.exports=function(C){if(C==null)throw TypeError("Can't call method on  "+C);return C}},"./node_modules/core-js/modules/_descriptors.js":function(X,V,C){X.exports=!C("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_is-object.js"),D=C("./node_modules/core-js/modules/_global.js").document,Q=F(D)&&F(D.createElement);X.exports=function(Y){return Q?D.createElement(Y):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(X,V){X.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_object-keys.js"),D=C("./node_modules/core-js/modules/_object-gops.js"),Q=C("./node_modules/core-js/modules/_object-pie.js");X.exports=function(Y){var _e=F(Y),we=D.f;if(we)for(var pe=we(Y),oe=Q.f,ue=0,te;pe.length>ue;)oe.call(Y,te=pe[ue++])&&_e.push(te);return _e}},"./node_modules/core-js/modules/_export.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_global.js"),D=C("./node_modules/core-js/modules/_core.js"),Q=C("./node_modules/core-js/modules/_hide.js"),Y=C("./node_modules/core-js/modules/_redefine.js"),_e=C("./node_modules/core-js/modules/_ctx.js"),we="prototype",pe=function(oe,ue,te){var ne=oe&pe.F,de=oe&pe.G,Se=oe&pe.S,Te=oe&pe.P,$e=oe&pe.B,Ie=de?F:Se?F[ue]||(F[ue]={}):(F[ue]||{})[we],Le=de?D:D[ue]||(D[ue]={}),We=Le[we]||(Le[we]={}),Ze,nt,ct,vt;de&&(te=ue);for(Ze in te)nt=!ne&&Ie&&Ie[Ze]!==void 0,ct=(nt?Ie:te)[Ze],vt=$e&&nt?_e(ct,F):Te&&typeof ct=="function"?_e(Function.call,ct):ct,Ie&&Y(Ie,Ze,ct,oe&pe.U),Le[Ze]!=ct&&Q(Le,Ze,vt),Te&&We[Ze]!=ct&&(We[Ze]=ct)};F.core=D,pe.F=1,pe.G=2,pe.S=4,pe.P=8,pe.B=16,pe.W=32,pe.U=64,pe.R=128,X.exports=pe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(D){var Q=/./;try{"/./"[D](Q)}catch{try{return Q[F]=!1,!"/./"[D](Q)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(X,V){X.exports=function(C){try{return!!C()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(X,V,C){C("./node_modules/core-js/modules/es6.regexp.exec.js");var F=C("./node_modules/core-js/modules/_redefine.js"),D=C("./node_modules/core-js/modules/_hide.js"),Q=C("./node_modules/core-js/modules/_fails.js"),Y=C("./node_modules/core-js/modules/_defined.js"),_e=C("./node_modules/core-js/modules/_wks.js"),we=C("./node_modules/core-js/modules/_regexp-exec.js"),pe=_e("species"),oe=!Q(function(){var te=/./;return te.exec=function(){var ne=[];return ne.groups={a:"7"},ne},"".replace(te,"$<a>")!=="7"}),ue=function(){var te=/(?:)/,ne=te.exec;te.exec=function(){return ne.apply(this,arguments)};var de="ab".split(te);return de.length===2&&de[0]==="a"&&de[1]==="b"}();X.exports=function(te,ne,de){var Se=_e(te),Te=!Q(function(){var nt={};return nt[Se]=function(){return 7},""[te](nt)!=7}),$e=Te?!Q(function(){var nt=!1,ct=/a/;return ct.exec=function(){return nt=!0,null},te==="split"&&(ct.constructor={},ct.constructor[pe]=function(){return ct}),ct[Se](""),!nt}):void 0;if(!Te||!$e||te==="replace"&&!oe||te==="split"&&!ue){var Ie=/./[Se],Le=de(Y,Se,""[te],function(ct,vt,It,ft,St){return vt.exec===we?Te&&!St?{done:!0,value:Ie.call(vt,It,ft)}:{done:!0,value:ct.call(It,vt,ft)}:{done:!1}}),We=Le[0],Ze=Le[1];F(String.prototype,te,We),D(RegExp.prototype,Se,ne==2?function(nt,ct){return Ze.call(nt,this,ct)}:function(nt){return Ze.call(nt,this)})}}},"./node_modules/core-js/modules/_flags.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_an-object.js");X.exports=function(){var D=F(this),Q="";return D.global&&(Q+="g"),D.ignoreCase&&(Q+="i"),D.multiline&&(Q+="m"),D.unicode&&(Q+="u"),D.sticky&&(Q+="y"),Q}},"./node_modules/core-js/modules/_function-to-string.js":function(X,V,C){X.exports=C("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(X,V){var C=X.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=C)},"./node_modules/core-js/modules/_has.js":function(X,V){var C={}.hasOwnProperty;X.exports=function(F,D){return C.call(F,D)}},"./node_modules/core-js/modules/_hide.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_object-dp.js"),D=C("./node_modules/core-js/modules/_property-desc.js");X.exports=C("./node_modules/core-js/modules/_descriptors.js")?function(Q,Y,_e){return F.f(Q,Y,D(1,_e))}:function(Q,Y,_e){return Q[Y]=_e,Q}},"./node_modules/core-js/modules/_html.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_global.js").document;X.exports=F&&F.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(X,V,C){X.exports=!C("./node_modules/core-js/modules/_descriptors.js")&&!C("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(C("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(X,V){X.exports=function(C,F,D){var Q=D===void 0;switch(F.length){case 0:return Q?C():C.call(D);case 1:return Q?C(F[0]):C.call(D,F[0]);case 2:return Q?C(F[0],F[1]):C.call(D,F[0],F[1]);case 3:return Q?C(F[0],F[1],F[2]):C.call(D,F[0],F[1],F[2]);case 4:return Q?C(F[0],F[1],F[2],F[3]):C.call(D,F[0],F[1],F[2],F[3])}return C.apply(D,F)}},"./node_modules/core-js/modules/_iobject.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_cof.js");X.exports=Object("z").propertyIsEnumerable(0)?Object:function(D){return F(D)=="String"?D.split(""):Object(D)}},"./node_modules/core-js/modules/_is-array-iter.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_iterators.js"),D=C("./node_modules/core-js/modules/_wks.js")("iterator"),Q=Array.prototype;X.exports=function(Y){return Y!==void 0&&(F.Array===Y||Q[D]===Y)}},"./node_modules/core-js/modules/_is-array.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_cof.js");X.exports=Array.isArray||function(Q){return F(Q)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(X,V){X.exports=function(C){return typeof C=="object"?C!==null:typeof C=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_is-object.js"),D=C("./node_modules/core-js/modules/_cof.js"),Q=C("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(Y){var _e;return F(Y)&&((_e=Y[Q])!==void 0?!!_e:D(Y)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_an-object.js");X.exports=function(D,Q,Y,_e){try{return _e?Q(F(Y)[0],Y[1]):Q(Y)}catch(pe){var we=D.return;throw we!==void 0&&F(we.call(D)),pe}}},"./node_modules/core-js/modules/_iter-create.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_object-create.js"),D=C("./node_modules/core-js/modules/_property-desc.js"),Q=C("./node_modules/core-js/modules/_set-to-string-tag.js"),Y={};C("./node_modules/core-js/modules/_hide.js")(Y,C("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),X.exports=function(_e,we,pe){_e.prototype=F(Y,{next:D(1,pe)}),Q(_e,we+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_library.js"),D=C("./node_modules/core-js/modules/_export.js"),Q=C("./node_modules/core-js/modules/_redefine.js"),Y=C("./node_modules/core-js/modules/_hide.js"),_e=C("./node_modules/core-js/modules/_iterators.js"),we=C("./node_modules/core-js/modules/_iter-create.js"),pe=C("./node_modules/core-js/modules/_set-to-string-tag.js"),oe=C("./node_modules/core-js/modules/_object-gpo.js"),ue=C("./node_modules/core-js/modules/_wks.js")("iterator"),te=!([].keys&&"next"in[].keys()),ne="@@iterator",de="keys",Se="values",Te=function(){return this};X.exports=function($e,Ie,Le,We,Ze,nt,ct){we(Le,Ie,We);var vt=function(B){if(!te&&B in Gt)return Gt[B];switch(B){case de:return function(){return new Le(this,B)};case Se:return function(){return new Le(this,B)}}return function(){return new Le(this,B)}},It=Ie+" Iterator",ft=Ze==Se,St=!1,Gt=$e.prototype,Ut=Gt[ue]||Gt[ne]||Ze&&Gt[Ze],cn=Ut||vt(Ze),xn=Ze?ft?vt("entries"):cn:void 0,yn=Ie=="Array"&&Gt.entries||Ut,sn,gn,ie;if(yn&&(ie=oe(yn.call(new $e)),ie!==Object.prototype&&ie.next&&(pe(ie,It,!0),!F&&typeof ie[ue]!="function"&&Y(ie,ue,Te))),ft&&Ut&&Ut.name!==Se&&(St=!0,cn=function(){return Ut.call(this)}),(!F||ct)&&(te||St||!Gt[ue])&&Y(Gt,ue,cn),_e[Ie]=cn,_e[It]=Te,Ze)if(sn={values:ft?cn:vt(Se),keys:nt?cn:vt(de),entries:xn},ct)for(gn in sn)gn in Gt||Q(Gt,gn,sn[gn]);else D(D.P+D.F*(te||St),Ie,sn);return sn}},"./node_modules/core-js/modules/_iter-detect.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_wks.js")("iterator"),D=!1;try{var Q=[7][F]();Q.return=function(){D=!0},Array.from(Q,function(){throw 2})}catch{}X.exports=function(Y,_e){if(!_e&&!D)return!1;var we=!1;try{var pe=[7],oe=pe[F]();oe.next=function(){return{done:we=!0}},pe[F]=function(){return oe},Y(pe)}catch{}return we}},"./node_modules/core-js/modules/_iter-step.js":function(X,V){X.exports=function(C,F){return{value:F,done:!!C}}},"./node_modules/core-js/modules/_iterators.js":function(X,V){X.exports={}},"./node_modules/core-js/modules/_library.js":function(X,V){X.exports=!1},"./node_modules/core-js/modules/_meta.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_uid.js")("meta"),D=C("./node_modules/core-js/modules/_is-object.js"),Q=C("./node_modules/core-js/modules/_has.js"),Y=C("./node_modules/core-js/modules/_object-dp.js").f,_e=0,we=Object.isExtensible||function(){return!0},pe=!C("./node_modules/core-js/modules/_fails.js")(function(){return we(Object.preventExtensions({}))}),oe=function(Se){Y(Se,F,{value:{i:"O"+ ++_e,w:{}}})},ue=function(Se,Te){if(!D(Se))return typeof Se=="symbol"?Se:(typeof Se=="string"?"S":"P")+Se;if(!Q(Se,F)){if(!we(Se))return"F";if(!Te)return"E";oe(Se)}return Se[F].i},te=function(Se,Te){if(!Q(Se,F)){if(!we(Se))return!0;if(!Te)return!1;oe(Se)}return Se[F].w},ne=function(Se){return pe&&de.NEED&&we(Se)&&!Q(Se,F)&&oe(Se),Se},de=X.exports={KEY:F,NEED:!1,fastKey:ue,getWeak:te,onFreeze:ne}},"./node_modules/core-js/modules/_object-create.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_an-object.js"),D=C("./node_modules/core-js/modules/_object-dps.js"),Q=C("./node_modules/core-js/modules/_enum-bug-keys.js"),Y=C("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),_e=function(){},we="prototype",pe=function(){var oe=C("./node_modules/core-js/modules/_dom-create.js")("iframe"),ue=Q.length,te="<",ne=">",de;for(oe.style.display="none",C("./node_modules/core-js/modules/_html.js").appendChild(oe),oe.src="javascript:",de=oe.contentWindow.document,de.open(),de.write(te+"script"+ne+"document.F=Object"+te+"/script"+ne),de.close(),pe=de.F;ue--;)delete pe[we][Q[ue]];return pe()};X.exports=Object.create||function(ue,te){var ne;return ue!==null?(_e[we]=F(ue),ne=new _e,_e[we]=null,ne[Y]=ue):ne=pe(),te===void 0?ne:D(ne,te)}},"./node_modules/core-js/modules/_object-dp.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_an-object.js"),D=C("./node_modules/core-js/modules/_ie8-dom-define.js"),Q=C("./node_modules/core-js/modules/_to-primitive.js"),Y=Object.defineProperty;V.f=C("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(we,pe,oe){if(F(we),pe=Q(pe,!0),F(oe),D)try{return Y(we,pe,oe)}catch{}if("get"in oe||"set"in oe)throw TypeError("Accessors not supported!");return"value"in oe&&(we[pe]=oe.value),we}},"./node_modules/core-js/modules/_object-dps.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_object-dp.js"),D=C("./node_modules/core-js/modules/_an-object.js"),Q=C("./node_modules/core-js/modules/_object-keys.js");X.exports=C("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(_e,we){D(_e);for(var pe=Q(we),oe=pe.length,ue=0,te;oe>ue;)F.f(_e,te=pe[ue++],we[te]);return _e}},"./node_modules/core-js/modules/_object-gopd.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_object-pie.js"),D=C("./node_modules/core-js/modules/_property-desc.js"),Q=C("./node_modules/core-js/modules/_to-iobject.js"),Y=C("./node_modules/core-js/modules/_to-primitive.js"),_e=C("./node_modules/core-js/modules/_has.js"),we=C("./node_modules/core-js/modules/_ie8-dom-define.js"),pe=Object.getOwnPropertyDescriptor;V.f=C("./node_modules/core-js/modules/_descriptors.js")?pe:function(ue,te){if(ue=Q(ue),te=Y(te,!0),we)try{return pe(ue,te)}catch{}if(_e(ue,te))return D(!F.f.call(ue,te),ue[te])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_to-iobject.js"),D=C("./node_modules/core-js/modules/_object-gopn.js").f,Q={}.toString,Y=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],_e=function(we){try{return D(we)}catch{return Y.slice()}};X.exports.f=function(pe){return Y&&Q.call(pe)=="[object Window]"?_e(pe):D(F(pe))}},"./node_modules/core-js/modules/_object-gopn.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_object-keys-internal.js"),D=C("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");V.f=Object.getOwnPropertyNames||function(Y){return F(Y,D)}},"./node_modules/core-js/modules/_object-gops.js":function(X,V){V.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_has.js"),D=C("./node_modules/core-js/modules/_to-object.js"),Q=C("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),Y=Object.prototype;X.exports=Object.getPrototypeOf||function(_e){return _e=D(_e),F(_e,Q)?_e[Q]:typeof _e.constructor=="function"&&_e instanceof _e.constructor?_e.constructor.prototype:_e instanceof Object?Y:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_has.js"),D=C("./node_modules/core-js/modules/_to-iobject.js"),Q=C("./node_modules/core-js/modules/_array-includes.js")(!1),Y=C("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");X.exports=function(_e,we){var pe=D(_e),oe=0,ue=[],te;for(te in pe)te!=Y&&F(pe,te)&&ue.push(te);for(;we.length>oe;)F(pe,te=we[oe++])&&(~Q(ue,te)||ue.push(te));return ue}},"./node_modules/core-js/modules/_object-keys.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_object-keys-internal.js"),D=C("./node_modules/core-js/modules/_enum-bug-keys.js");X.exports=Object.keys||function(Y){return F(Y,D)}},"./node_modules/core-js/modules/_object-pie.js":function(X,V){V.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_object-gopn.js"),D=C("./node_modules/core-js/modules/_object-gops.js"),Q=C("./node_modules/core-js/modules/_an-object.js"),Y=C("./node_modules/core-js/modules/_global.js").Reflect;X.exports=Y&&Y.ownKeys||function(we){var pe=F.f(Q(we)),oe=D.f;return oe?pe.concat(oe(we)):pe}},"./node_modules/core-js/modules/_property-desc.js":function(X,V){X.exports=function(C,F){return{enumerable:!(C&1),configurable:!(C&2),writable:!(C&4),value:F}}},"./node_modules/core-js/modules/_redefine.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_global.js"),D=C("./node_modules/core-js/modules/_hide.js"),Q=C("./node_modules/core-js/modules/_has.js"),Y=C("./node_modules/core-js/modules/_uid.js")("src"),_e=C("./node_modules/core-js/modules/_function-to-string.js"),we="toString",pe=(""+_e).split(we);C("./node_modules/core-js/modules/_core.js").inspectSource=function(oe){return _e.call(oe)},(X.exports=function(oe,ue,te,ne){var de=typeof te=="function";de&&(Q(te,"name")||D(te,"name",ue)),oe[ue]!==te&&(de&&(Q(te,Y)||D(te,Y,oe[ue]?""+oe[ue]:pe.join(String(ue)))),oe===F?oe[ue]=te:ne?oe[ue]?oe[ue]=te:D(oe,ue,te):(delete oe[ue],D(oe,ue,te)))})(Function.prototype,we,function(){return typeof this=="function"&&this[Y]||_e.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_classof.js"),D=RegExp.prototype.exec;X.exports=function(Q,Y){var _e=Q.exec;if(typeof _e=="function"){var we=_e.call(Q,Y);if(typeof we!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return we}if(F(Q)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return D.call(Q,Y)}},"./node_modules/core-js/modules/_regexp-exec.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_flags.js"),D=RegExp.prototype.exec,Q=String.prototype.replace,Y=D,_e="lastIndex",we=function(){var ue=/a/,te=/b*/g;return D.call(ue,"a"),D.call(te,"a"),ue[_e]!==0||te[_e]!==0}(),pe=/()??/.exec("")[1]!==void 0,oe=we||pe;oe&&(Y=function(te){var ne=this,de,Se,Te,$e;return pe&&(Se=new RegExp("^"+ne.source+"$(?!\\s)",F.call(ne))),we&&(de=ne[_e]),Te=D.call(ne,te),we&&Te&&(ne[_e]=ne.global?Te.index+Te[0].length:de),pe&&Te&&Te.length>1&&Q.call(Te[0],Se,function(){for($e=1;$e<arguments.length-2;$e++)arguments[$e]===void 0&&(Te[$e]=void 0)}),Te}),X.exports=Y},"./node_modules/core-js/modules/_set-to-string-tag.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_object-dp.js").f,D=C("./node_modules/core-js/modules/_has.js"),Q=C("./node_modules/core-js/modules/_wks.js")("toStringTag");X.exports=function(Y,_e,we){Y&&!D(Y=we?Y:Y.prototype,Q)&&F(Y,Q,{configurable:!0,value:_e})}},"./node_modules/core-js/modules/_shared-key.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_shared.js")("keys"),D=C("./node_modules/core-js/modules/_uid.js");X.exports=function(Q){return F[Q]||(F[Q]=D(Q))}},"./node_modules/core-js/modules/_shared.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_core.js"),D=C("./node_modules/core-js/modules/_global.js"),Q="__core-js_shared__",Y=D[Q]||(D[Q]={});(X.exports=function(_e,we){return Y[_e]||(Y[_e]=we!==void 0?we:{})})("versions",[]).push({version:F.version,mode:C("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_an-object.js"),D=C("./node_modules/core-js/modules/_a-function.js"),Q=C("./node_modules/core-js/modules/_wks.js")("species");X.exports=function(Y,_e){var we=F(Y).constructor,pe;return we===void 0||(pe=F(we)[Q])==null?_e:D(pe)}},"./node_modules/core-js/modules/_string-at.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_to-integer.js"),D=C("./node_modules/core-js/modules/_defined.js");X.exports=function(Q){return function(Y,_e){var we=String(D(Y)),pe=F(_e),oe=we.length,ue,te;return pe<0||pe>=oe?Q?"":void 0:(ue=we.charCodeAt(pe),ue<55296||ue>56319||pe+1===oe||(te=we.charCodeAt(pe+1))<56320||te>57343?Q?we.charAt(pe):ue:Q?we.slice(pe,pe+2):(ue-55296<<10)+(te-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_is-regexp.js"),D=C("./node_modules/core-js/modules/_defined.js");X.exports=function(Q,Y,_e){if(F(Y))throw TypeError("String#"+_e+" doesn't accept regex!");return String(D(Q))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_to-integer.js"),D=Math.max,Q=Math.min;X.exports=function(Y,_e){return Y=F(Y),Y<0?D(Y+_e,0):Q(Y,_e)}},"./node_modules/core-js/modules/_to-integer.js":function(X,V){var C=Math.ceil,F=Math.floor;X.exports=function(D){return isNaN(D=+D)?0:(D>0?F:C)(D)}},"./node_modules/core-js/modules/_to-iobject.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_iobject.js"),D=C("./node_modules/core-js/modules/_defined.js");X.exports=function(Q){return F(D(Q))}},"./node_modules/core-js/modules/_to-length.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_to-integer.js"),D=Math.min;X.exports=function(Q){return Q>0?D(F(Q),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_defined.js");X.exports=function(D){return Object(F(D))}},"./node_modules/core-js/modules/_to-primitive.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_is-object.js");X.exports=function(D,Q){if(!F(D))return D;var Y,_e;if(Q&&typeof(Y=D.toString)=="function"&&!F(_e=Y.call(D))||typeof(Y=D.valueOf)=="function"&&!F(_e=Y.call(D))||!Q&&typeof(Y=D.toString)=="function"&&!F(_e=Y.call(D)))return _e;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(X,V){var C=0,F=Math.random();X.exports=function(D){return"Symbol(".concat(D===void 0?"":D,")_",(++C+F).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_global.js"),D=C("./node_modules/core-js/modules/_core.js"),Q=C("./node_modules/core-js/modules/_library.js"),Y=C("./node_modules/core-js/modules/_wks-ext.js"),_e=C("./node_modules/core-js/modules/_object-dp.js").f;X.exports=function(we){var pe=D.Symbol||(D.Symbol=Q?{}:F.Symbol||{});we.charAt(0)!="_"&&!(we in pe)&&_e(pe,we,{value:Y.f(we)})}},"./node_modules/core-js/modules/_wks-ext.js":function(X,V,C){V.f=C("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_shared.js")("wks"),D=C("./node_modules/core-js/modules/_uid.js"),Q=C("./node_modules/core-js/modules/_global.js").Symbol,Y=typeof Q=="function",_e=X.exports=function(we){return F[we]||(F[we]=Y&&Q[we]||(Y?Q:D)("Symbol."+we))};_e.store=F},"./node_modules/core-js/modules/core.get-iterator-method.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_classof.js"),D=C("./node_modules/core-js/modules/_wks.js")("iterator"),Q=C("./node_modules/core-js/modules/_iterators.js");X.exports=C("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(Y){if(Y!=null)return Y[D]||Y["@@iterator"]||Q[F(Y)]}},"./node_modules/core-js/modules/es6.array.from.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_ctx.js"),D=C("./node_modules/core-js/modules/_export.js"),Q=C("./node_modules/core-js/modules/_to-object.js"),Y=C("./node_modules/core-js/modules/_iter-call.js"),_e=C("./node_modules/core-js/modules/_is-array-iter.js"),we=C("./node_modules/core-js/modules/_to-length.js"),pe=C("./node_modules/core-js/modules/_create-property.js"),oe=C("./node_modules/core-js/modules/core.get-iterator-method.js");D(D.S+D.F*!C("./node_modules/core-js/modules/_iter-detect.js")(function(ue){Array.from(ue)}),"Array",{from:function(te){var ne=Q(te),de=typeof this=="function"?this:Array,Se=arguments.length,Te=Se>1?arguments[1]:void 0,$e=Te!==void 0,Ie=0,Le=oe(ne),We,Ze,nt,ct;if($e&&(Te=F(Te,Se>2?arguments[2]:void 0,2)),Le!=null&&!(de==Array&&_e(Le)))for(ct=Le.call(ne),Ze=new de;!(nt=ct.next()).done;Ie++)pe(Ze,Ie,$e?Y(ct,Te,[nt.value,Ie],!0):nt.value);else for(We=we(ne.length),Ze=new de(We);We>Ie;Ie++)pe(Ze,Ie,$e?Te(ne[Ie],Ie):ne[Ie]);return Ze.length=Ie,Ze}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_add-to-unscopables.js"),D=C("./node_modules/core-js/modules/_iter-step.js"),Q=C("./node_modules/core-js/modules/_iterators.js"),Y=C("./node_modules/core-js/modules/_to-iobject.js");X.exports=C("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(_e,we){this._t=Y(_e),this._i=0,this._k=we},function(){var _e=this._t,we=this._k,pe=this._i++;return!_e||pe>=_e.length?(this._t=void 0,D(1)):we=="keys"?D(0,pe):we=="values"?D(0,_e[pe]):D(0,[pe,_e[pe]])},"values"),Q.Arguments=Q.Array,F("keys"),F("values"),F("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_export.js");F(F.P,"Function",{bind:C("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_object-dp.js").f,D=Function.prototype,Q=/^\s*function ([^ (]*)/,Y="name";Y in D||C("./node_modules/core-js/modules/_descriptors.js")&&F(D,Y,{configurable:!0,get:function(){try{return(""+this).match(Q)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_export.js"),D=C("./node_modules/core-js/modules/_global.js").isFinite;F(F.S,"Number",{isFinite:function(Y){return typeof Y=="number"&&D(Y)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_classof.js"),D={};D[C("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",D+""!="[object z]"&&C("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+F(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_regexp-exec.js");C("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:F!==/./.exec},{exec:F})},"./node_modules/core-js/modules/es6.regexp.split.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_is-regexp.js"),D=C("./node_modules/core-js/modules/_an-object.js"),Q=C("./node_modules/core-js/modules/_species-constructor.js"),Y=C("./node_modules/core-js/modules/_advance-string-index.js"),_e=C("./node_modules/core-js/modules/_to-length.js"),we=C("./node_modules/core-js/modules/_regexp-exec-abstract.js"),pe=C("./node_modules/core-js/modules/_regexp-exec.js"),oe=C("./node_modules/core-js/modules/_fails.js"),ue=Math.min,te=[].push,ne="split",de="length",Se="lastIndex",Te=4294967295,$e=!oe(function(){});C("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Ie,Le,We,Ze){var nt;return"abbc"[ne](/(b)*/)[1]=="c"||"test"[ne](/(?:)/,-1)[de]!=4||"ab"[ne](/(?:ab)*/)[de]!=2||"."[ne](/(.?)(.?)/)[de]!=4||"."[ne](/()()/)[de]>1||""[ne](/.?/)[de]?nt=function(ct,vt){var It=String(this);if(ct===void 0&&vt===0)return[];if(!F(ct))return We.call(It,ct,vt);for(var ft=[],St=(ct.ignoreCase?"i":"")+(ct.multiline?"m":"")+(ct.unicode?"u":"")+(ct.sticky?"y":""),Gt=0,Ut=vt===void 0?Te:vt>>>0,cn=new RegExp(ct.source,St+"g"),xn,yn,sn;(xn=pe.call(cn,It))&&(yn=cn[Se],!(yn>Gt&&(ft.push(It.slice(Gt,xn.index)),xn[de]>1&&xn.index<It[de]&&te.apply(ft,xn.slice(1)),sn=xn[0][de],Gt=yn,ft[de]>=Ut)));)cn[Se]===xn.index&&cn[Se]++;return Gt===It[de]?(sn||!cn.test(""))&&ft.push(""):ft.push(It.slice(Gt)),ft[de]>Ut?ft.slice(0,Ut):ft}:"0"[ne](void 0,0)[de]?nt=function(ct,vt){return ct===void 0&&vt===0?[]:We.call(this,ct,vt)}:nt=We,[function(vt,It){var ft=Ie(this),St=vt==null?void 0:vt[Le];return St!==void 0?St.call(vt,ft,It):nt.call(String(ft),vt,It)},function(ct,vt){var It=Ze(nt,ct,this,vt,nt!==We);if(It.done)return It.value;var ft=D(ct),St=String(this),Gt=Q(ft,RegExp),Ut=ft.unicode,cn=(ft.ignoreCase?"i":"")+(ft.multiline?"m":"")+(ft.unicode?"u":"")+($e?"y":"g"),xn=new Gt($e?ft:"^(?:"+ft.source+")",cn),yn=vt===void 0?Te:vt>>>0;if(yn===0)return[];if(St.length===0)return we(xn,St)===null?[St]:[];for(var sn=0,gn=0,ie=[];gn<St.length;){xn.lastIndex=$e?gn:0;var B=we(xn,$e?St:St.slice(gn)),j;if(B===null||(j=ue(_e(xn.lastIndex+($e?0:gn)),St.length))===sn)gn=Y(St,gn,Ut);else{if(ie.push(St.slice(sn,gn)),ie.length===yn)return ie;for(var ge=1;ge<=B.length-1;ge++)if(ie.push(B[ge]),ie.length===yn)return ie;gn=sn=j}}return ie.push(St.slice(sn)),ie}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_export.js"),D=C("./node_modules/core-js/modules/_string-context.js"),Q="includes";F(F.P+F.F*C("./node_modules/core-js/modules/_fails-is-regexp.js")(Q),"String",{includes:function(_e){return!!~D(this,_e,Q).indexOf(_e,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_global.js"),D=C("./node_modules/core-js/modules/_has.js"),Q=C("./node_modules/core-js/modules/_descriptors.js"),Y=C("./node_modules/core-js/modules/_export.js"),_e=C("./node_modules/core-js/modules/_redefine.js"),we=C("./node_modules/core-js/modules/_meta.js").KEY,pe=C("./node_modules/core-js/modules/_fails.js"),oe=C("./node_modules/core-js/modules/_shared.js"),ue=C("./node_modules/core-js/modules/_set-to-string-tag.js"),te=C("./node_modules/core-js/modules/_uid.js"),ne=C("./node_modules/core-js/modules/_wks.js"),de=C("./node_modules/core-js/modules/_wks-ext.js"),Se=C("./node_modules/core-js/modules/_wks-define.js"),Te=C("./node_modules/core-js/modules/_enum-keys.js"),$e=C("./node_modules/core-js/modules/_is-array.js"),Ie=C("./node_modules/core-js/modules/_an-object.js"),Le=C("./node_modules/core-js/modules/_is-object.js"),We=C("./node_modules/core-js/modules/_to-object.js"),Ze=C("./node_modules/core-js/modules/_to-iobject.js"),nt=C("./node_modules/core-js/modules/_to-primitive.js"),ct=C("./node_modules/core-js/modules/_property-desc.js"),vt=C("./node_modules/core-js/modules/_object-create.js"),It=C("./node_modules/core-js/modules/_object-gopn-ext.js"),ft=C("./node_modules/core-js/modules/_object-gopd.js"),St=C("./node_modules/core-js/modules/_object-gops.js"),Gt=C("./node_modules/core-js/modules/_object-dp.js"),Ut=C("./node_modules/core-js/modules/_object-keys.js"),cn=ft.f,xn=Gt.f,yn=It.f,sn=F.Symbol,gn=F.JSON,ie=gn&&gn.stringify,B="prototype",j=ne("_hidden"),ge=ne("toPrimitive"),Be={}.propertyIsEnumerable,et=oe("symbol-registry"),lt=oe("symbols"),le=oe("op-symbols"),L=Object[B],U=typeof sn=="function"&&!!St.f,Ee=F.QObject,Ge=!Ee||!Ee[B]||!Ee[B].findChild,je=Q&&pe(function(){return vt(xn({},"a",{get:function(){return xn(this,"a",{value:7}).a}})).a!=7})?function(xe,be,Ce){var He=cn(L,be);He&&delete L[be],xn(xe,be,Ce),He&&xe!==L&&xn(L,be,He)}:xn,at=function(xe){var be=lt[xe]=vt(sn[B]);return be._k=xe,be},jt=U&&typeof sn.iterator=="symbol"?function(xe){return typeof xe=="symbol"}:function(xe){return xe instanceof sn},Tn=function(be,Ce,He){return be===L&&Tn(le,Ce,He),Ie(be),Ce=nt(Ce,!0),Ie(He),D(lt,Ce)?(He.enumerable?(D(be,j)&&be[j][Ce]&&(be[j][Ce]=!1),He=vt(He,{enumerable:ct(0,!1)})):(D(be,j)||xn(be,j,ct(1,{})),be[j][Ce]=!0),je(be,Ce,He)):xn(be,Ce,He)},vn=function(be,Ce){Ie(be);for(var He=Te(Ce=Ze(Ce)),Ve=0,Fe=He.length,qe;Fe>Ve;)Tn(be,qe=He[Ve++],Ce[qe]);return be},_t=function(be,Ce){return Ce===void 0?vt(be):vn(vt(be),Ce)},Rt=function(be){var Ce=Be.call(this,be=nt(be,!0));return this===L&&D(lt,be)&&!D(le,be)?!1:Ce||!D(this,be)||!D(lt,be)||D(this,j)&&this[j][be]?Ce:!0},nn=function(be,Ce){if(be=Ze(be),Ce=nt(Ce,!0),!(be===L&&D(lt,Ce)&&!D(le,Ce))){var He=cn(be,Ce);return He&&D(lt,Ce)&&!(D(be,j)&&be[j][Ce])&&(He.enumerable=!0),He}},wr=function(be){for(var Ce=yn(Ze(be)),He=[],Ve=0,Fe;Ce.length>Ve;)!D(lt,Fe=Ce[Ve++])&&Fe!=j&&Fe!=we&&He.push(Fe);return He},fi=function(be){for(var Ce=be===L,He=yn(Ce?le:Ze(be)),Ve=[],Fe=0,qe;He.length>Fe;)D(lt,qe=He[Fe++])&&(!Ce||D(L,qe))&&Ve.push(lt[qe]);return Ve};U||(sn=function(){if(this instanceof sn)throw TypeError("Symbol is not a constructor!");var be=te(arguments.length>0?arguments[0]:void 0),Ce=function(He){this===L&&Ce.call(le,He),D(this,j)&&D(this[j],be)&&(this[j][be]=!1),je(this,be,ct(1,He))};return Q&&Ge&&je(L,be,{configurable:!0,set:Ce}),at(be)},_e(sn[B],"toString",function(){return this._k}),ft.f=nn,Gt.f=Tn,C("./node_modules/core-js/modules/_object-gopn.js").f=It.f=wr,C("./node_modules/core-js/modules/_object-pie.js").f=Rt,St.f=fi,Q&&!C("./node_modules/core-js/modules/_library.js")&&_e(L,"propertyIsEnumerable",Rt,!0),de.f=function(xe){return at(ne(xe))}),Y(Y.G+Y.W+Y.F*!U,{Symbol:sn});for(var hn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),er=0;hn.length>er;)ne(hn[er++]);for(var ze=Ut(ne.store),re=0;ze.length>re;)Se(ze[re++]);Y(Y.S+Y.F*!U,"Symbol",{for:function(xe){return D(et,xe+="")?et[xe]:et[xe]=sn(xe)},keyFor:function(be){if(!jt(be))throw TypeError(be+" is not a symbol!");for(var Ce in et)if(et[Ce]===be)return Ce},useSetter:function(){Ge=!0},useSimple:function(){Ge=!1}}),Y(Y.S+Y.F*!U,"Object",{create:_t,defineProperty:Tn,defineProperties:vn,getOwnPropertyDescriptor:nn,getOwnPropertyNames:wr,getOwnPropertySymbols:fi});var he=pe(function(){St.f(1)});Y(Y.S+Y.F*he,"Object",{getOwnPropertySymbols:function(be){return St.f(We(be))}}),gn&&Y(Y.S+Y.F*(!U||pe(function(){var xe=sn();return ie([xe])!="[null]"||ie({a:xe})!="{}"||ie(Object(xe))!="{}"})),"JSON",{stringify:function(be){for(var Ce=[be],He=1,Ve,Fe;arguments.length>He;)Ce.push(arguments[He++]);if(Fe=Ve=Ce[1],!(!Le(Ve)&&be===void 0||jt(be)))return $e(Ve)||(Ve=function(qe,ut){if(typeof Fe=="function"&&(ut=Fe.call(this,qe,ut)),!jt(ut))return ut}),Ce[1]=Ve,ie.apply(gn,Ce)}}),sn[B][ge]||C("./node_modules/core-js/modules/_hide.js")(sn[B],ge,sn[B].valueOf),ue(sn,"Symbol"),ue(Math,"Math",!0),ue(F.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_export.js"),D=C("./node_modules/core-js/modules/_array-includes.js")(!0);F(F.P,"Array",{includes:function(Y){return D(this,Y,arguments.length>1?arguments[1]:void 0)}}),C("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(X,V,C){var F=C("./node_modules/core-js/modules/_export.js"),D=C("./node_modules/core-js/modules/_own-keys.js"),Q=C("./node_modules/core-js/modules/_to-iobject.js"),Y=C("./node_modules/core-js/modules/_object-gopd.js"),_e=C("./node_modules/core-js/modules/_create-property.js");F(F.S,"Object",{getOwnPropertyDescriptors:function(pe){for(var oe=Q(pe),ue=Y.f,te=D(oe),ne={},de=0,Se,Te;te.length>de;)Te=ue(oe,Se=te[de++]),Te!==void 0&&_e(ne,Se,Te);return ne}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(X,V,C){C("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(X,V,C){for(var F=C("./node_modules/core-js/modules/es6.array.iterator.js"),D=C("./node_modules/core-js/modules/_object-keys.js"),Q=C("./node_modules/core-js/modules/_redefine.js"),Y=C("./node_modules/core-js/modules/_global.js"),_e=C("./node_modules/core-js/modules/_hide.js"),we=C("./node_modules/core-js/modules/_iterators.js"),pe=C("./node_modules/core-js/modules/_wks.js"),oe=pe("iterator"),ue=pe("toStringTag"),te=we.Array,ne={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},de=D(ne),Se=0;Se<de.length;Se++){var Te=de[Se],$e=ne[Te],Ie=Y[Te],Le=Ie&&Ie.prototype,We;if(Le&&(Le[oe]||_e(Le,oe,te),Le[ue]||_e(Le,ue,Te),we[Te]=te,$e))for(We in F)Le[We]||Q(Le,We,F[We],!0)}},"./node_modules/crypt/crypt.js":function(X,V){(function(){var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F={rotl:function(D,Q){return D<<Q|D>>>32-Q},rotr:function(D,Q){return D<<32-Q|D>>>Q},endian:function(D){if(D.constructor==Number)return F.rotl(D,8)&16711935|F.rotl(D,24)&4278255360;for(var Q=0;Q<D.length;Q++)D[Q]=F.endian(D[Q]);return D},randomBytes:function(D){for(var Q=[];D>0;D--)Q.push(Math.floor(Math.random()*256));return Q},bytesToWords:function(D){for(var Q=[],Y=0,_e=0;Y<D.length;Y++,_e+=8)Q[_e>>>5]|=D[Y]<<24-_e%32;return Q},wordsToBytes:function(D){for(var Q=[],Y=0;Y<D.length*32;Y+=8)Q.push(D[Y>>>5]>>>24-Y%32&255);return Q},bytesToHex:function(D){for(var Q=[],Y=0;Y<D.length;Y++)Q.push((D[Y]>>>4).toString(16)),Q.push((D[Y]&15).toString(16));return Q.join("")},hexToBytes:function(D){for(var Q=[],Y=0;Y<D.length;Y+=2)Q.push(parseInt(D.substr(Y,2),16));return Q},bytesToBase64:function(D){for(var Q=[],Y=0;Y<D.length;Y+=3)for(var _e=D[Y]<<16|D[Y+1]<<8|D[Y+2],we=0;we<4;we++)Y*8+we*6<=D.length*8?Q.push(C.charAt(_e>>>6*(3-we)&63)):Q.push("=");return Q.join("")},base64ToBytes:function(D){D=D.replace(/[^A-Z0-9+\/]/ig,"");for(var Q=[],Y=0,_e=0;Y<D.length;_e=++Y%4)_e!=0&&Q.push((C.indexOf(D.charAt(Y-1))&Math.pow(2,-2*_e+8)-1)<<_e*2|C.indexOf(D.charAt(Y))>>>6-_e*2);return Q}};X.exports=F})()},"./node_modules/is-buffer/index.js":function(X,V){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */X.exports=function(D){return D!=null&&(C(D)||F(D)||!!D._isBuffer)};function C(D){return!!D.constructor&&typeof D.constructor.isBuffer=="function"&&D.constructor.isBuffer(D)}function F(D){return typeof D.readFloatLE=="function"&&typeof D.slice=="function"&&C(D.slice(0,0))}},"./node_modules/md5/md5.js":function(X,V,C){(function(){var F=C("./node_modules/crypt/crypt.js"),D=C("./node_modules/charenc/charenc.js").utf8,Q=C("./node_modules/is-buffer/index.js"),Y=C("./node_modules/charenc/charenc.js").bin,_e=function(we,pe){we.constructor==String?pe&&pe.encoding==="binary"?we=Y.stringToBytes(we):we=D.stringToBytes(we):Q(we)?we=Array.prototype.slice.call(we,0):!Array.isArray(we)&&we.constructor!==Uint8Array&&(we=we.toString());for(var oe=F.bytesToWords(we),ue=we.length*8,te=1732584193,ne=-271733879,de=-1732584194,Se=271733878,Te=0;Te<oe.length;Te++)oe[Te]=(oe[Te]<<8|oe[Te]>>>24)&16711935|(oe[Te]<<24|oe[Te]>>>8)&4278255360;oe[ue>>>5]|=128<<ue%32,oe[(ue+64>>>9<<4)+14]=ue;for(var $e=_e._ff,Ie=_e._gg,Le=_e._hh,We=_e._ii,Te=0;Te<oe.length;Te+=16){var Ze=te,nt=ne,ct=de,vt=Se;te=$e(te,ne,de,Se,oe[Te+0],7,-680876936),Se=$e(Se,te,ne,de,oe[Te+1],12,-389564586),de=$e(de,Se,te,ne,oe[Te+2],17,606105819),ne=$e(ne,de,Se,te,oe[Te+3],22,-1044525330),te=$e(te,ne,de,Se,oe[Te+4],7,-176418897),Se=$e(Se,te,ne,de,oe[Te+5],12,1200080426),de=$e(de,Se,te,ne,oe[Te+6],17,-1473231341),ne=$e(ne,de,Se,te,oe[Te+7],22,-45705983),te=$e(te,ne,de,Se,oe[Te+8],7,1770035416),Se=$e(Se,te,ne,de,oe[Te+9],12,-1958414417),de=$e(de,Se,te,ne,oe[Te+10],17,-42063),ne=$e(ne,de,Se,te,oe[Te+11],22,-1990404162),te=$e(te,ne,de,Se,oe[Te+12],7,1804603682),Se=$e(Se,te,ne,de,oe[Te+13],12,-40341101),de=$e(de,Se,te,ne,oe[Te+14],17,-1502002290),ne=$e(ne,de,Se,te,oe[Te+15],22,1236535329),te=Ie(te,ne,de,Se,oe[Te+1],5,-165796510),Se=Ie(Se,te,ne,de,oe[Te+6],9,-1069501632),de=Ie(de,Se,te,ne,oe[Te+11],14,643717713),ne=Ie(ne,de,Se,te,oe[Te+0],20,-373897302),te=Ie(te,ne,de,Se,oe[Te+5],5,-701558691),Se=Ie(Se,te,ne,de,oe[Te+10],9,38016083),de=Ie(de,Se,te,ne,oe[Te+15],14,-660478335),ne=Ie(ne,de,Se,te,oe[Te+4],20,-405537848),te=Ie(te,ne,de,Se,oe[Te+9],5,568446438),Se=Ie(Se,te,ne,de,oe[Te+14],9,-1019803690),de=Ie(de,Se,te,ne,oe[Te+3],14,-187363961),ne=Ie(ne,de,Se,te,oe[Te+8],20,1163531501),te=Ie(te,ne,de,Se,oe[Te+13],5,-1444681467),Se=Ie(Se,te,ne,de,oe[Te+2],9,-51403784),de=Ie(de,Se,te,ne,oe[Te+7],14,1735328473),ne=Ie(ne,de,Se,te,oe[Te+12],20,-1926607734),te=Le(te,ne,de,Se,oe[Te+5],4,-378558),Se=Le(Se,te,ne,de,oe[Te+8],11,-2022574463),de=Le(de,Se,te,ne,oe[Te+11],16,1839030562),ne=Le(ne,de,Se,te,oe[Te+14],23,-35309556),te=Le(te,ne,de,Se,oe[Te+1],4,-1530992060),Se=Le(Se,te,ne,de,oe[Te+4],11,1272893353),de=Le(de,Se,te,ne,oe[Te+7],16,-155497632),ne=Le(ne,de,Se,te,oe[Te+10],23,-1094730640),te=Le(te,ne,de,Se,oe[Te+13],4,681279174),Se=Le(Se,te,ne,de,oe[Te+0],11,-358537222),de=Le(de,Se,te,ne,oe[Te+3],16,-722521979),ne=Le(ne,de,Se,te,oe[Te+6],23,76029189),te=Le(te,ne,de,Se,oe[Te+9],4,-640364487),Se=Le(Se,te,ne,de,oe[Te+12],11,-421815835),de=Le(de,Se,te,ne,oe[Te+15],16,530742520),ne=Le(ne,de,Se,te,oe[Te+2],23,-995338651),te=We(te,ne,de,Se,oe[Te+0],6,-198630844),Se=We(Se,te,ne,de,oe[Te+7],10,1126891415),de=We(de,Se,te,ne,oe[Te+14],15,-1416354905),ne=We(ne,de,Se,te,oe[Te+5],21,-57434055),te=We(te,ne,de,Se,oe[Te+12],6,1700485571),Se=We(Se,te,ne,de,oe[Te+3],10,-1894986606),de=We(de,Se,te,ne,oe[Te+10],15,-1051523),ne=We(ne,de,Se,te,oe[Te+1],21,-2054922799),te=We(te,ne,de,Se,oe[Te+8],6,1873313359),Se=We(Se,te,ne,de,oe[Te+15],10,-30611744),de=We(de,Se,te,ne,oe[Te+6],15,-1560198380),ne=We(ne,de,Se,te,oe[Te+13],21,1309151649),te=We(te,ne,de,Se,oe[Te+4],6,-145523070),Se=We(Se,te,ne,de,oe[Te+11],10,-1120210379),de=We(de,Se,te,ne,oe[Te+2],15,718787259),ne=We(ne,de,Se,te,oe[Te+9],21,-343485551),te=te+Ze>>>0,ne=ne+nt>>>0,de=de+ct>>>0,Se=Se+vt>>>0}return F.endian([te,ne,de,Se])};_e._ff=function(we,pe,oe,ue,te,ne,de){var Se=we+(pe&oe|~pe&ue)+(te>>>0)+de;return(Se<<ne|Se>>>32-ne)+pe},_e._gg=function(we,pe,oe,ue,te,ne,de){var Se=we+(pe&ue|oe&~ue)+(te>>>0)+de;return(Se<<ne|Se>>>32-ne)+pe},_e._hh=function(we,pe,oe,ue,te,ne,de){var Se=we+(pe^oe^ue)+(te>>>0)+de;return(Se<<ne|Se>>>32-ne)+pe},_e._ii=function(we,pe,oe,ue,te,ne,de){var Se=we+(oe^(pe|~ue))+(te>>>0)+de;return(Se<<ne|Se>>>32-ne)+pe},_e._blocksize=16,_e._digestsize=16,X.exports=function(we,pe){if(we==null)throw new Error("Illegal argument "+we);var oe=F.wordsToBytes(_e(we,pe));return pe&&pe.asBytes?oe:pe&&pe.asString?Y.bytesToString(oe):F.bytesToHex(oe)}})()},"./node_modules/regenerator-runtime/runtime.js":function(X,V,C){var F=function(D){var Q=Object.prototype,Y=Q.hasOwnProperty,_e,we=typeof Symbol=="function"?Symbol:{},pe=we.iterator||"@@iterator",oe=we.asyncIterator||"@@asyncIterator",ue=we.toStringTag||"@@toStringTag";function te(B,j,ge){return Object.defineProperty(B,j,{value:ge,enumerable:!0,configurable:!0,writable:!0}),B[j]}try{te({},"")}catch{te=function(j,ge,Be){return j[ge]=Be}}function ne(B,j,ge,Be){var et=j&&j.prototype instanceof We?j:We,lt=Object.create(et.prototype),le=new sn(Be||[]);return lt._invoke=Ut(B,ge,le),lt}D.wrap=ne;function de(B,j,ge){try{return{type:"normal",arg:B.call(j,ge)}}catch(Be){return{type:"throw",arg:Be}}}var Se="suspendedStart",Te="suspendedYield",$e="executing",Ie="completed",Le={};function We(){}function Ze(){}function nt(){}var ct={};ct[pe]=function(){return this};var vt=Object.getPrototypeOf,It=vt&&vt(vt(gn([])));It&&It!==Q&&Y.call(It,pe)&&(ct=It);var ft=nt.prototype=We.prototype=Object.create(ct);Ze.prototype=ft.constructor=nt,nt.constructor=Ze,Ze.displayName=te(nt,ue,"GeneratorFunction");function St(B){["next","throw","return"].forEach(function(j){te(B,j,function(ge){return this._invoke(j,ge)})})}D.isGeneratorFunction=function(B){var j=typeof B=="function"&&B.constructor;return j?j===Ze||(j.displayName||j.name)==="GeneratorFunction":!1},D.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,nt):(B.__proto__=nt,te(B,ue,"GeneratorFunction")),B.prototype=Object.create(ft),B},D.awrap=function(B){return{__await:B}};function Gt(B,j){function ge(lt,le,L,U){var Ee=de(B[lt],B,le);if(Ee.type==="throw")U(Ee.arg);else{var Ge=Ee.arg,je=Ge.value;return je&&typeof je=="object"&&Y.call(je,"__await")?j.resolve(je.__await).then(function(at){ge("next",at,L,U)},function(at){ge("throw",at,L,U)}):j.resolve(je).then(function(at){Ge.value=at,L(Ge)},function(at){return ge("throw",at,L,U)})}}var Be;function et(lt,le){function L(){return new j(function(U,Ee){ge(lt,le,U,Ee)})}return Be=Be?Be.then(L,L):L()}this._invoke=et}St(Gt.prototype),Gt.prototype[oe]=function(){return this},D.AsyncIterator=Gt,D.async=function(B,j,ge,Be,et){et===void 0&&(et=Promise);var lt=new Gt(ne(B,j,ge,Be),et);return D.isGeneratorFunction(j)?lt:lt.next().then(function(le){return le.done?le.value:lt.next()})};function Ut(B,j,ge){var Be=Se;return function(lt,le){if(Be===$e)throw new Error("Generator is already running");if(Be===Ie){if(lt==="throw")throw le;return ie()}for(ge.method=lt,ge.arg=le;;){var L=ge.delegate;if(L){var U=cn(L,ge);if(U){if(U===Le)continue;return U}}if(ge.method==="next")ge.sent=ge._sent=ge.arg;else if(ge.method==="throw"){if(Be===Se)throw Be=Ie,ge.arg;ge.dispatchException(ge.arg)}else ge.method==="return"&&ge.abrupt("return",ge.arg);Be=$e;var Ee=de(B,j,ge);if(Ee.type==="normal"){if(Be=ge.done?Ie:Te,Ee.arg===Le)continue;return{value:Ee.arg,done:ge.done}}else Ee.type==="throw"&&(Be=Ie,ge.method="throw",ge.arg=Ee.arg)}}}function cn(B,j){var ge=B.iterator[j.method];if(ge===_e){if(j.delegate=null,j.method==="throw"){if(B.iterator.return&&(j.method="return",j.arg=_e,cn(B,j),j.method==="throw"))return Le;j.method="throw",j.arg=new TypeError("The iterator does not provide a 'throw' method")}return Le}var Be=de(ge,B.iterator,j.arg);if(Be.type==="throw")return j.method="throw",j.arg=Be.arg,j.delegate=null,Le;var et=Be.arg;if(!et)return j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,Le;if(et.done)j[B.resultName]=et.value,j.next=B.nextLoc,j.method!=="return"&&(j.method="next",j.arg=_e);else return et;return j.delegate=null,Le}St(ft),te(ft,ue,"Generator"),ft[pe]=function(){return this},ft.toString=function(){return"[object Generator]"};function xn(B){var j={tryLoc:B[0]};1 in B&&(j.catchLoc=B[1]),2 in B&&(j.finallyLoc=B[2],j.afterLoc=B[3]),this.tryEntries.push(j)}function yn(B){var j=B.completion||{};j.type="normal",delete j.arg,B.completion=j}function sn(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(xn,this),this.reset(!0)}D.keys=function(B){var j=[];for(var ge in B)j.push(ge);return j.reverse(),function Be(){for(;j.length;){var et=j.pop();if(et in B)return Be.value=et,Be.done=!1,Be}return Be.done=!0,Be}};function gn(B){if(B){var j=B[pe];if(j)return j.call(B);if(typeof B.next=="function")return B;if(!isNaN(B.length)){var ge=-1,Be=function et(){for(;++ge<B.length;)if(Y.call(B,ge))return et.value=B[ge],et.done=!1,et;return et.value=_e,et.done=!0,et};return Be.next=Be}}return{next:ie}}D.values=gn;function ie(){return{value:_e,done:!0}}return sn.prototype={constructor:sn,reset:function(B){if(this.prev=0,this.next=0,this.sent=this._sent=_e,this.done=!1,this.delegate=null,this.method="next",this.arg=_e,this.tryEntries.forEach(yn),!B)for(var j in this)j.charAt(0)==="t"&&Y.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=_e)},stop:function(){this.done=!0;var B=this.tryEntries[0],j=B.completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(B){if(this.done)throw B;var j=this;function ge(U,Ee){return lt.type="throw",lt.arg=B,j.next=U,Ee&&(j.method="next",j.arg=_e),!!Ee}for(var Be=this.tryEntries.length-1;Be>=0;--Be){var et=this.tryEntries[Be],lt=et.completion;if(et.tryLoc==="root")return ge("end");if(et.tryLoc<=this.prev){var le=Y.call(et,"catchLoc"),L=Y.call(et,"finallyLoc");if(le&&L){if(this.prev<et.catchLoc)return ge(et.catchLoc,!0);if(this.prev<et.finallyLoc)return ge(et.finallyLoc)}else if(le){if(this.prev<et.catchLoc)return ge(et.catchLoc,!0)}else if(L){if(this.prev<et.finallyLoc)return ge(et.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(B,j){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var Be=this.tryEntries[ge];if(Be.tryLoc<=this.prev&&Y.call(Be,"finallyLoc")&&this.prev<Be.finallyLoc){var et=Be;break}}et&&(B==="break"||B==="continue")&&et.tryLoc<=j&&j<=et.finallyLoc&&(et=null);var lt=et?et.completion:{};return lt.type=B,lt.arg=j,et?(this.method="next",this.next=et.finallyLoc,Le):this.complete(lt)},complete:function(B,j){if(B.type==="throw")throw B.arg;return B.type==="break"||B.type==="continue"?this.next=B.arg:B.type==="return"?(this.rval=this.arg=B.arg,this.method="return",this.next="end"):B.type==="normal"&&j&&(this.next=j),Le},finish:function(B){for(var j=this.tryEntries.length-1;j>=0;--j){var ge=this.tryEntries[j];if(ge.finallyLoc===B)return this.complete(ge.completion,ge.afterLoc),yn(ge),Le}},catch:function(B){for(var j=this.tryEntries.length-1;j>=0;--j){var ge=this.tryEntries[j];if(ge.tryLoc===B){var Be=ge.completion;if(Be.type==="throw"){var et=Be.arg;yn(ge)}return et}}throw new Error("illegal catch attempt")},delegateYield:function(B,j,ge){return this.delegate={iterator:gn(B),resultName:j,nextLoc:ge},this.method==="next"&&(this.arg=_e),Le}},D}(X.exports);try{regeneratorRuntime=F}catch{Function("r","regeneratorRuntime = r")(F)}},"./src/api.js":function(X,V,C){C.r(V),C.d(V,"setup",function(){return $e}),C.d(V,"setupCache",function(){return Te}),C("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),C("./node_modules/core-js/modules/es6.symbol.js"),C("./node_modules/core-js/modules/es6.array.iterator.js"),C("./node_modules/core-js/modules/es6.object.to-string.js"),C("./node_modules/regenerator-runtime/runtime.js");var F=C("axios"),D=C.n(F),Q=C("./src/request.js"),Y=C("./src/cache.js");C.d(V,"serializeQuery",function(){return Y.serializeQuery});var _e=C("./src/config.js"),we=C("./src/utilities.js");function pe(Ie,Le){if(Ie==null)return{};var We=oe(Ie,Le),Ze,nt;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(Ie);for(nt=0;nt<ct.length;nt++)Ze=ct[nt],!(Le.indexOf(Ze)>=0)&&Object.prototype.propertyIsEnumerable.call(Ie,Ze)&&(We[Ze]=Ie[Ze])}return We}function oe(Ie,Le){if(Ie==null)return{};var We={},Ze=Object.keys(Ie),nt,ct;for(ct=0;ct<Ze.length;ct++)nt=Ze[ct],!(Le.indexOf(nt)>=0)&&(We[nt]=Ie[nt]);return We}function ue(Ie,Le){var We=Object.keys(Ie);if(Object.getOwnPropertySymbols){var Ze=Object.getOwnPropertySymbols(Ie);Le&&(Ze=Ze.filter(function(nt){return Object.getOwnPropertyDescriptor(Ie,nt).enumerable})),We.push.apply(We,Ze)}return We}function te(Ie){for(var Le=1;Le<arguments.length;Le++){var We=arguments[Le]!=null?arguments[Le]:{};Le%2?ue(Object(We),!0).forEach(function(Ze){ne(Ie,Ze,We[Ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ie,Object.getOwnPropertyDescriptors(We)):ue(Object(We)).forEach(function(Ze){Object.defineProperty(Ie,Ze,Object.getOwnPropertyDescriptor(We,Ze))})}return Ie}function ne(Ie,Le,We){return Le in Ie?Object.defineProperty(Ie,Le,{value:We,enumerable:!0,configurable:!0,writable:!0}):Ie[Le]=We,Ie}function de(Ie,Le,We,Ze,nt,ct,vt){try{var It=Ie[ct](vt),ft=It.value}catch(St){We(St);return}It.done?Le(ft):Promise.resolve(ft).then(Ze,nt)}function Se(Ie){return function(){var Le=this,We=arguments;return new Promise(function(Ze,nt){var ct=Ie.apply(Le,We);function vt(ft){de(ct,Ze,nt,vt,It,"next",ft)}function It(ft){de(ct,Ze,nt,vt,It,"throw",ft)}vt(void 0)})}}function Te(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ie=Object(_e.makeConfig)(Ie);function Le(Ze){return We.apply(this,arguments)}function We(){return We=Se(regeneratorRuntime.mark(function Ze(nt){var ct,vt,It,ft,St;return regeneratorRuntime.wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return ct=Object(_e.mergeRequestConfig)(Ie,nt),Ut.next=3,Object(Q.default)(ct,nt);case 3:if(vt=Ut.sent,It=vt.next,Object(we.isFunction)(It)){Ut.next=7;break}return Ut.abrupt("return",It);case 7:return Ut.prev=7,Ut.next=10,ct.adapter(nt);case 10:vt=Ut.sent,Ut.next=16;break;case 13:Ut.prev=13,Ut.t0=Ut.catch(7),ft=Ut.t0;case 16:if(!ft){Ut.next=31;break}if(St=Object(we.isFunction)(ct.readOnError)?ct.readOnError(ft,nt):ct.readOnError,!St){Ut.next=30;break}return Ut.prev=19,ct.acceptStale=!0,Ut.next=23,Object(Q.default)(ct,nt);case 23:return vt=Ut.sent,vt.next.request.stale=!0,Ut.abrupt("return",vt.next);case 28:Ut.prev=28,Ut.t1=Ut.catch(19);case 30:throw ft;case 31:return Ut.abrupt("return",It(vt));case 32:case"end":return Ut.stop()}},Ze,null,[[7,13],[19,28]])})),We.apply(this,arguments)}return{adapter:Le,config:Ie,store:Ie.store}}function $e(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Le=te(te(te({},_e.defaults.axios),Ie),{},{cache:te(te({},_e.defaults.axios.cache),Ie.cache)}),We=Te(Le.cache);Le.cache;var Ze=pe(Le,["cache"]),nt=D.a.create(te(te({},Ze),{},{adapter:We.adapter}));return nt.cache=We.store,nt}V.default={setup:$e,setupCache:Te,serializeQuery:Y.serializeQuery}},"./src/cache.js":function(X,V,C){C.r(V),C.d(V,"read",function(){return ue}),C.d(V,"write",function(){return pe}),C.d(V,"key",function(){return ne}),C.d(V,"invalidate",function(){return Te}),C.d(V,"serializeQuery",function(){return $e}),C("./node_modules/core-js/modules/es7.array.includes.js"),C("./node_modules/core-js/modules/es6.string.includes.js"),C("./node_modules/regenerator-runtime/runtime.js"),C("./node_modules/core-js/modules/es6.array.iterator.js"),C("./node_modules/core-js/modules/es6.object.to-string.js");var F=C("./src/utilities.js"),D=C("./node_modules/md5/md5.js"),Q=C.n(D),Y=C("./src/serialize.js");function _e(Ie,Le,We,Ze,nt,ct,vt){try{var It=Ie[ct](vt),ft=It.value}catch(St){We(St);return}It.done?Le(ft):Promise.resolve(ft).then(Ze,nt)}function we(Ie){return function(){var Le=this,We=arguments;return new Promise(function(Ze,nt){var ct=Ie.apply(Le,We);function vt(ft){_e(ct,Ze,nt,vt,It,"next",ft)}function It(ft){_e(ct,Ze,nt,vt,It,"throw",ft)}vt(void 0)})}}function pe(Ie,Le,We){return oe.apply(this,arguments)}function oe(){return oe=we(regeneratorRuntime.mark(function Ie(Le,We,Ze){var nt;return regeneratorRuntime.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.prev=0,nt={expires:Le.expires,data:Object(Y.default)(Le,We,Ze)},vt.next=4,Le.store.setItem(Le.uuid,nt);case 4:vt.next=19;break;case 6:if(vt.prev=6,vt.t0=vt.catch(0),Le.debug("Could not store response",vt.t0),!Le.clearOnError){vt.next=18;break}return vt.prev=10,vt.next=13,Le.store.clear();case 13:vt.next=18;break;case 15:vt.prev=15,vt.t1=vt.catch(10),Le.debug("Could not clear store",vt.t1);case 18:return vt.abrupt("return",!1);case 19:return vt.abrupt("return",!0);case 20:case"end":return vt.stop()}},Ie,null,[[0,6],[10,15]])})),oe.apply(this,arguments)}function ue(Ie,Le){return te.apply(this,arguments)}function te(){return te=we(regeneratorRuntime.mark(function Ie(Le,We){var Ze,nt,ct,vt,It,ft,St,Gt;return regeneratorRuntime.wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return Ze=Le.uuid,nt=Le.ignoreCache,cn.next=3,Le.store.getItem(Ze);case 3:if(ct=cn.sent,!(nt||!ct||!ct.data)){cn.next=10;break}throw Le.debug("cache-miss",We.url),vt=new Error,vt.reason="cache-miss",vt.message="Entry not found from cache",vt;case 10:if(It=ct.expires,ft=ct.data,St=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!St&&!Le.acceptStale&&It!==0&&It<Date.now())){cn.next=18;break}throw Le.debug("cache-stale",We.url),Gt=new Error,Gt.reason="cache-stale",Gt.message="Entry is stale",Gt;case 18:return Le.debug(Le.acceptStale?"cache-hit-stale":"cache-hit",We.url),cn.abrupt("return",ft);case 20:case"end":return cn.stop()}},Ie)})),te.apply(this,arguments)}function ne(Ie){if(Object(F.isFunction)(Ie.key))return Ie.key;var Le;return Object(F.isString)(Ie.key)?Le=function(Ze){var nt="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),ct="".concat(Ie.key,"/").concat(nt).concat($e(Ze));return Ze.data?ct+Q()(Ze.data):ct}:Le=function(Ze){var nt="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),ct=nt+$e(Ze);return Ze.data?ct+Q()(Ze.data):ct},Le}function de(Ie,Le){return Se.apply(this,arguments)}function Se(){return Se=we(regeneratorRuntime.mark(function Ie(Le,We){var Ze;return regeneratorRuntime.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(Ze=We.method.toLowerCase(),!Le.exclude.methods.includes(Ze)){ct.next=4;break}return ct.next=4,Le.store.removeItem(Le.uuid);case 4:case"end":return ct.stop()}},Ie)})),Se.apply(this,arguments)}function Te(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(F.isFunction)(Ie.invalidate)?Ie.invalidate:de}function $e(Ie){if(!Ie.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Ie.params);var Le=Ie.params,We=Ie.params instanceof URLSearchParams;return We||(Le=new URLSearchParams,Object.keys(Ie.params).forEach(function(Ze){return Le.append(Ze,Ie.params[Ze])})),"?".concat(Le.toString())}V.default={read:ue,write:pe,key:ne,invalidate:Te,serializeQuery:$e}},"./src/config.js":function(X,V,C){C.r(V),C.d(V,"defaults",function(){return te}),C.d(V,"makeConfig",function(){return de}),C.d(V,"mergeRequestConfig",function(){return Se}),C("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),C("./node_modules/core-js/modules/es6.symbol.js"),C("./node_modules/core-js/modules/es6.array.iterator.js"),C("./node_modules/core-js/modules/es6.object.to-string.js");var F=C("axios"),D=C.n(F),Q=C("./src/memory.js"),Y=C("./src/cache.js");function _e(Te,$e){var Ie=Object.keys(Te);if(Object.getOwnPropertySymbols){var Le=Object.getOwnPropertySymbols(Te);$e&&(Le=Le.filter(function(We){return Object.getOwnPropertyDescriptor(Te,We).enumerable})),Ie.push.apply(Ie,Le)}return Ie}function we(Te){for(var $e=1;$e<arguments.length;$e++){var Ie=arguments[$e]!=null?arguments[$e]:{};$e%2?_e(Object(Ie),!0).forEach(function(Le){pe(Te,Le,Ie[Le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Te,Object.getOwnPropertyDescriptors(Ie)):_e(Object(Ie)).forEach(function(Le){Object.defineProperty(Te,Le,Object.getOwnPropertyDescriptor(Ie,Le))})}return Te}function pe(Te,$e,Ie){return $e in Te?Object.defineProperty(Te,$e,{value:Ie,enumerable:!0,configurable:!0,writable:!0}):Te[$e]=Ie,Te}var oe=function(){},ue=function(){for(var $e,Ie=arguments.length,Le=new Array(Ie),We=0;We<Ie;We++)Le[We]=arguments[We];return($e=console).log.apply($e,["[axios-cache-adapter]"].concat(Le))},te={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:D.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},ne=["limit","store","adapter","uuid","acceptStale"],de=function(){var $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ie=we(we(we({},te.cache),$e),{},{exclude:we(we({},te.cache.exclude),$e.exclude)});return Ie.key=Object(Y.key)(Ie),Ie.invalidate=Object(Y.invalidate)(Ie),Ie.debug!==!1?Ie.debug=typeof Ie.debug=="function"?Ie.debug:ue:Ie.debug=oe,Ie.store||(Ie.store=new Q.default),Ie.debug("Global cache config",Ie),Ie},Se=function($e,Ie){var Le=Ie.cache||{};Le&&ne.forEach(function(Ze){return Le[Ze]?delete Le[Ze]:void 0});var We=we(we(we({},$e),Le),{},{exclude:we(we({},$e.exclude),Le.exclude)});return We.debug===!0&&(We.debug=ue),Le.key&&(We.key=Object(Y.key)(Le)),We.uuid=We.key(Ie),$e.debug("Request config for ".concat(Ie.url),We),We};V.default={defaults:te,makeConfig:de,mergeRequestConfig:Se}},"./src/exclude.js":function(X,V,C){C.r(V),C("./node_modules/core-js/modules/es6.array.iterator.js"),C("./node_modules/core-js/modules/es6.object.to-string.js"),C("./node_modules/core-js/modules/es7.array.includes.js"),C("./node_modules/core-js/modules/es6.string.includes.js");var F=C("./src/utilities.js");function D(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=arguments.length>1?arguments[1]:void 0,_e=Q.exclude,we=_e===void 0?{}:_e,pe=Q.debug,oe=Y.method.toLowerCase();if(oe==="head"||we.methods.includes(oe))return pe("Excluding request by HTTP method ".concat(Y.url)),!0;if(typeof we.filter=="function"&&we.filter(Y))return pe("Excluding request by filter ".concat(Y.url)),!0;var ue=/\?.*$/.test(Y.url)||Object(F.isObject)(Y.params)&&Object.keys(Y.params).length!==0||typeof URLSearchParams<"u"&&Y.params instanceof URLSearchParams;if(we.query&&ue)return pe("Excluding request by query ".concat(Y.url)),!0;var te=we.paths||[],ne=te.some(function(de){return Y.url.match(de)});return ne?(pe("Excluding request by url match ".concat(Y.url)),!0):!1}V.default=D},"./src/index.node.js":function(X,V,C){C.r(V);var F=C("./src/api.js");C.d(V,"setup",function(){return F.setup}),C.d(V,"setupCache",function(){return F.setupCache}),C.d(V,"serializeQuery",function(){return F.serializeQuery});var D=C("./src/redis.js");C.d(V,"RedisStore",function(){return D.default});var Q=C("./src/redis-default.js");C.d(V,"RedisDefaultStore",function(){return Q.default}),V.default={setup:F.setup,setupCache:F.setupCache,serializeQuery:F.serializeQuery,RedisStore:D.default,RedisDefaultStore:Q.default}},"./src/limit.js":function(X,V,C){C.r(V),C("./node_modules/regenerator-runtime/runtime.js"),C("./node_modules/core-js/modules/es6.object.to-string.js");function F(_e,we,pe,oe,ue,te,ne){try{var de=_e[te](ne),Se=de.value}catch(Te){pe(Te);return}de.done?we(Se):Promise.resolve(Se).then(oe,ue)}function D(_e){return function(){var we=this,pe=arguments;return new Promise(function(oe,ue){var te=_e.apply(we,pe);function ne(Se){F(te,oe,ue,ne,de,"next",Se)}function de(Se){F(te,oe,ue,ne,de,"throw",Se)}ne(void 0)})}}function Q(_e){return Y.apply(this,arguments)}function Y(){return Y=D(regeneratorRuntime.mark(function _e(we){var pe,oe;return regeneratorRuntime.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,we.store.length();case 2:if(pe=te.sent,!(pe<we.limit)){te.next=5;break}return te.abrupt("return");case 5:return we.debug("Current store size: ".concat(pe)),te.next=8,we.store.iterate(function(ne,de){oe||(oe={value:ne,key:de}),ne.expires<oe.value.expires&&(oe={value:ne,key:de})});case 8:if(!oe){te.next=12;break}return we.debug("Removing item: ".concat(oe.key)),te.next=12,we.store.removeItem(oe.key);case 12:case"end":return te.stop()}},_e)})),Y.apply(this,arguments)}V.default=Q},"./src/memory.js":function(X,V,C){C.r(V),C("./node_modules/core-js/modules/es6.array.iterator.js"),C("./node_modules/core-js/modules/es6.object.to-string.js"),C("./node_modules/regenerator-runtime/runtime.js");var F=C("./src/utilities.js");function D(oe,ue,te,ne,de,Se,Te){try{var $e=oe[Se](Te),Ie=$e.value}catch(Le){te(Le);return}$e.done?ue(Ie):Promise.resolve(Ie).then(ne,de)}function Q(oe){return function(){var ue=this,te=arguments;return new Promise(function(ne,de){var Se=oe.apply(ue,te);function Te(Ie){D(Se,ne,de,Te,$e,"next",Ie)}function $e(Ie){D(Se,ne,de,Te,$e,"throw",Ie)}Te(void 0)})}}function Y(oe,ue){if(!(oe instanceof ue))throw new TypeError("Cannot call a class as a function")}function _e(oe,ue){for(var te=0;te<ue.length;te++){var ne=ue[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(oe,ne.key,ne)}}function we(oe,ue,te){return ue&&_e(oe.prototype,ue),te&&_e(oe,te),oe}var pe=function(){function oe(){Y(this,oe),this.store={}}return we(oe,[{key:"getItem",value:function(){var ue=Q(regeneratorRuntime.mark(function ne(de){var Se;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return Se=this.store[de]||null,$e.abrupt("return",JSON.parse(Se));case 2:case"end":return $e.stop()}},ne,this)}));function te(ne){return ue.apply(this,arguments)}return te}()},{key:"setItem",value:function(){var ue=Q(regeneratorRuntime.mark(function ne(de,Se){return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return this.store[de]=JSON.stringify(Se),$e.abrupt("return",Se);case 2:case"end":return $e.stop()}},ne,this)}));function te(ne,de){return ue.apply(this,arguments)}return te}()},{key:"removeItem",value:function(){var ue=Q(regeneratorRuntime.mark(function ne(de){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:delete this.store[de];case 1:case"end":return Te.stop()}},ne,this)}));function te(ne){return ue.apply(this,arguments)}return te}()},{key:"clear",value:function(){var ue=Q(regeneratorRuntime.mark(function ne(){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:this.store={};case 1:case"end":return Se.stop()}},ne,this)}));function te(){return ue.apply(this,arguments)}return te}()},{key:"length",value:function(){var ue=Q(regeneratorRuntime.mark(function ne(){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.abrupt("return",Object.keys(this.store).length);case 1:case"end":return Se.stop()}},ne,this)}));function te(){return ue.apply(this,arguments)}return te}()},{key:"iterate",value:function(te){return Promise.all(Object(F.mapObject)(this.store,te))}}]),oe}();V.default=pe},"./src/redis-default.js":function(X,V,C){C.r(V),C("./node_modules/core-js/modules/es6.array.iterator.js"),C("./node_modules/core-js/modules/es6.object.to-string.js"),C("./node_modules/regenerator-runtime/runtime.js"),C("./node_modules/core-js/modules/es6.function.bind.js"),C("./node_modules/core-js/modules/es6.function.name.js");var F=C("util");function D(oe,ue,te,ne,de,Se,Te){try{var $e=oe[Se](Te),Ie=$e.value}catch(Le){te(Le);return}$e.done?ue(Ie):Promise.resolve(Ie).then(ne,de)}function Q(oe){return function(){var ue=this,te=arguments;return new Promise(function(ne,de){var Se=oe.apply(ue,te);function Te(Ie){D(Se,ne,de,Te,$e,"next",Ie)}function $e(Ie){D(Se,ne,de,Te,$e,"throw",Ie)}Te(void 0)})}}function Y(oe,ue){if(!(oe instanceof ue))throw new TypeError("Cannot call a class as a function")}function _e(oe,ue){for(var te=0;te<ue.length;te++){var ne=ue[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(oe,ne.key,ne)}}function we(oe,ue,te){return ue&&_e(oe.prototype,ue),te&&_e(oe,te),oe}var pe=function(){function oe(ue){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Y(this,oe);var ne=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ue.constructor.name!=="RedisClient")throw ne}catch{throw ne}this.client=ue,this.prefix=te.prefix||"axios-cache",this.maxScanCount=te.maxScanCount||1e3,this.getAsync=Object(F.promisify)(ue.get).bind(ue),this.psetexAsync=Object(F.promisify)(ue.psetex).bind(ue),this.delAsync=Object(F.promisify)(ue.del).bind(ue),this.scanAsync=Object(F.promisify)(ue.scan).bind(ue)}return we(oe,[{key:"calculateTTL",value:function(te){var ne=Date.now();return te.expires&&te.expires>ne?te.expires-ne:-1}},{key:"transformKey",value:function(te){return this.prefix+"_"+te}},{key:"getItem",value:function(){var ue=Q(regeneratorRuntime.mark(function ne(de){var Se;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.getAsync(this.transformKey(de));case 2:if($e.t0=$e.sent,$e.t0){$e.next=5;break}$e.t0=null;case 5:return Se=$e.t0,$e.abrupt("return",JSON.parse(Se));case 7:case"end":return $e.stop()}},ne,this)}));function te(ne){return ue.apply(this,arguments)}return te}()},{key:"setItem",value:function(){var ue=Q(regeneratorRuntime.mark(function ne(de,Se){var Te,$e;return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(Te=this.transformKey(de),$e=this.calculateTTL(Se),!($e>0)){Le.next=5;break}return Le.next=5,this.psetexAsync(Te,$e,JSON.stringify(Se));case 5:return Le.abrupt("return",Se);case 6:case"end":return Le.stop()}},ne,this)}));function te(ne,de){return ue.apply(this,arguments)}return te}()},{key:"removeItem",value:function(){var ue=Q(regeneratorRuntime.mark(function ne(de){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.delAsync(this.transformKey(de));case 2:case"end":return Te.stop()}},ne,this)}));function te(ne){return ue.apply(this,arguments)}return te}()},{key:"scan",value:function(){var ue=Q(regeneratorRuntime.mark(function ne(de){var Se,Te;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:Se="0";case 1:return Ie.next=3,this.scanAsync(Se,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Te=Ie.sent,Se=Te[0],Ie.next=7,de(Te[1]);case 7:if(Se!=="0"){Ie.next=1;break}case 8:case"end":return Ie.stop()}},ne,this)}));function te(ne){return ue.apply(this,arguments)}return te}()},{key:"clear",value:function(){var ue=Q(regeneratorRuntime.mark(function ne(){var de=this;return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.scan(function($e){return de.delAsync($e)});case 2:case"end":return Te.stop()}},ne,this)}));function te(){return ue.apply(this,arguments)}return te}()},{key:"length",value:function(){var ue=Q(regeneratorRuntime.mark(function ne(){var de;return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return de=0,Te.next=3,this.scan(function($e){de+=$e.length});case 3:return Te.abrupt("return",de);case 4:case"end":return Te.stop()}},ne,this)}));function te(){return ue.apply(this,arguments)}return te}()},{key:"iterate",value:function(){var ue=Q(regeneratorRuntime.mark(function ne(de){var Se=this,Te,$e;return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return $e=function(){return $e=Q(regeneratorRuntime.mark(function Ze(nt){var ct,vt;return regeneratorRuntime.wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return ft.next=2,this.getAsync(nt);case 2:if(ft.t0=ft.sent,ft.t0){ft.next=5;break}ft.t0=null;case 5:return ct=ft.t0,vt=JSON.parse(ct),ft.next=9,de(vt,nt);case 9:return ft.abrupt("return",ft.sent);case 10:case"end":return ft.stop()}},Ze,this)})),$e.apply(this,arguments)},Te=function(Ze){return $e.apply(this,arguments)},Le.next=4,this.scan(function(We){return Promise.all(We.map(Te.bind(Se)))});case 4:return Le.abrupt("return",Promise.resolve([]));case 5:case"end":return Le.stop()}},ne,this)}));function te(ne){return ue.apply(this,arguments)}return te}()}]),oe}();V.default=pe},"./src/redis.js":function(X,V,C){C.r(V),C("./node_modules/core-js/modules/es6.array.iterator.js"),C("./node_modules/core-js/modules/es6.object.to-string.js"),C("./node_modules/regenerator-runtime/runtime.js"),C("./node_modules/core-js/modules/es6.function.bind.js"),C("./node_modules/core-js/modules/es6.function.name.js");var F=C("util"),D=C("./src/utilities.js");function Q(ue,te,ne,de,Se,Te,$e){try{var Ie=ue[Te]($e),Le=Ie.value}catch(We){ne(We);return}Ie.done?te(Le):Promise.resolve(Le).then(de,Se)}function Y(ue){return function(){var te=this,ne=arguments;return new Promise(function(de,Se){var Te=ue.apply(te,ne);function $e(Le){Q(Te,de,Se,$e,Ie,"next",Le)}function Ie(Le){Q(Te,de,Se,$e,Ie,"throw",Le)}$e(void 0)})}}function _e(ue,te){if(!(ue instanceof te))throw new TypeError("Cannot call a class as a function")}function we(ue,te){for(var ne=0;ne<te.length;ne++){var de=te[ne];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(ue,de.key,de)}}function pe(ue,te,ne){return te&&we(ue.prototype,te),ne&&we(ue,ne),ue}var oe=function(){function ue(te){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";_e(this,ue);var de=new TypeError("First parameter must be a valid RedisClient instance.");try{if(te.constructor.name!=="RedisClient")throw de}catch{throw de}this.client=te,this.HASH_KEY=ne,this.hgetAsync=Object(F.promisify)(te.hget).bind(te),this.hsetAsync=Object(F.promisify)(te.hset).bind(te),this.hdelAsync=Object(F.promisify)(te.hdel).bind(te),this.delAsync=Object(F.promisify)(te.del).bind(te),this.hlenAsync=Object(F.promisify)(te.hlen).bind(te),this.hgetallAsync=Object(F.promisify)(te.hgetall).bind(te)}return pe(ue,[{key:"getItem",value:function(){var te=Y(regeneratorRuntime.mark(function de(Se){var Te;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hgetAsync(this.HASH_KEY,Se);case 2:if(Ie.t0=Ie.sent,Ie.t0){Ie.next=5;break}Ie.t0=null;case 5:return Te=Ie.t0,Ie.abrupt("return",JSON.parse(Te));case 7:case"end":return Ie.stop()}},de,this)}));function ne(de){return te.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var te=Y(regeneratorRuntime.mark(function de(Se,Te){return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hsetAsync(this.HASH_KEY,Se,JSON.stringify(Te));case 2:return Ie.abrupt("return",Te);case 3:case"end":return Ie.stop()}},de,this)}));function ne(de,Se){return te.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var te=Y(regeneratorRuntime.mark(function de(Se){return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.hdelAsync(this.HASH_KEY,Se);case 2:case"end":return $e.stop()}},de,this)}));function ne(de){return te.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var te=Y(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Te.stop()}},de,this)}));function ne(){return te.apply(this,arguments)}return ne}()},{key:"length",value:function(){var te=Y(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Te.stop()}},de,this)}));function ne(){return te.apply(this,arguments)}return ne}()},{key:"iterate",value:function(){var te=Y(regeneratorRuntime.mark(function de(Se){var Te;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Te=Ie.sent,Ie.abrupt("return",Promise.all(Object(D.mapObject)(Te,Se)));case 4:case"end":return Ie.stop()}},de,this)}));function ne(de){return te.apply(this,arguments)}return ne}()}]),ue}();V.default=oe},"./src/request.js":function(X,V,C){C.r(V),C("./node_modules/regenerator-runtime/runtime.js"),C("./node_modules/core-js/modules/es6.object.to-string.js");var F=C("./src/response.js"),D=C("./src/exclude.js"),Q=C("./src/cache.js");function Y(oe,ue,te,ne,de,Se,Te){try{var $e=oe[Se](Te),Ie=$e.value}catch(Le){te(Le);return}$e.done?ue(Ie):Promise.resolve(Ie).then(ne,de)}function _e(oe){return function(){var ue=this,te=arguments;return new Promise(function(ne,de){var Se=oe.apply(ue,te);function Te(Ie){Y(Se,ne,de,Te,$e,"next",Ie)}function $e(Ie){Y(Se,ne,de,Te,$e,"throw",Ie)}Te(void 0)})}}function we(oe,ue){return pe.apply(this,arguments)}function pe(){return pe=_e(regeneratorRuntime.mark(function oe(ue,te){var ne,de,Se;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return Se=function(){return ue.excludeFromCache=!0,{config:ue,next:ne}},ue.debug("uuid",ue.uuid),ne=function(){for(var Le=arguments.length,We=new Array(Le),Ze=0;Ze<Le;Ze++)We[Ze]=arguments[Ze];return F.default.apply(void 0,[ue,te].concat(We))},$e.next=5,ue.invalidate(ue,te);case 5:if(!Object(D.default)(ue,te)){$e.next=7;break}return $e.abrupt("return",Se());case 7:return $e.prev=7,$e.next=10,Object(Q.read)(ue,te);case 10:return de=$e.sent,de.config=te,de.request={fromCache:!0},$e.abrupt("return",{config:ue,next:de});case 16:if($e.prev=16,$e.t0=$e.catch(7),!(ue.clearOnStale&&$e.t0.reason==="cache-stale")){$e.next=21;break}return $e.next=21,ue.store.removeItem(ue.uuid);case 21:return $e.abrupt("return",{config:ue,next:ne});case 22:case"end":return $e.stop()}},oe,null,[[7,16]])})),pe.apply(this,arguments)}V.default=we},"./src/response.js":function(X,V,C){C.r(V),C("./node_modules/regenerator-runtime/runtime.js"),C("./node_modules/core-js/modules/es6.object.to-string.js");var F=C("./src/limit.js"),D=C("./src/cache.js"),Q=C("./node_modules/cache-control-esm/index.js");function Y(oe,ue,te,ne,de,Se,Te){try{var $e=oe[Se](Te),Ie=$e.value}catch(Le){te(Le);return}$e.done?ue(Ie):Promise.resolve(Ie).then(ne,de)}function _e(oe){return function(){var ue=this,te=arguments;return new Promise(function(ne,de){var Se=oe.apply(ue,te);function Te(Ie){Y(Se,ne,de,Te,$e,"next",Ie)}function $e(Ie){Y(Se,ne,de,Te,$e,"throw",Ie)}Te(void 0)})}}function we(oe,ue,te){return pe.apply(this,arguments)}function pe(){return pe=_e(regeneratorRuntime.mark(function oe(ue,te,ne){var de,Se,Te,$e,Ie;return regeneratorRuntime.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(de=ne.request,Se=de===void 0?{}:de,Te=ne.headers,$e=Te===void 0?{}:Te,!(["arraybuffer","blob"].indexOf(Se.responseType)>-1)){We.next=3;break}return We.abrupt("return",ne);case 3:if(Ie={},ue.readHeaders&&($e["cache-control"]?(Ie=Object(Q.parse)($e["cache-control"]),(Ie.noCache||Ie.noStore)&&(ue.excludeFromCache=!0)):$e.expires?ue.expires=new Date($e.expires).getTime():ue.expires=new Date().getTime()),ue.excludeFromCache){We.next=15;break}if(Ie.maxAge||Ie.maxAge===0?ue.expires=Date.now()+Ie.maxAge*1e3:ue.readHeaders||(ue.expires=ue.maxAge===0?Date.now():Date.now()+ue.maxAge),!ue.limit){We.next=11;break}return ue.debug("Detected limit: ".concat(ue.limit)),We.next=11,Object(F.default)(ue);case 11:return We.next=13,Object(D.write)(ue,te,ne);case 13:We.next=16;break;case 15:ne.request.excludedFromCache=!0;case 16:return We.abrupt("return",ne);case 17:case"end":return We.stop()}},oe)})),pe.apply(this,arguments)}V.default=we},"./src/serialize.js":function(X,V,C){C.r(V),C("./node_modules/core-js/modules/es6.symbol.js"),C("./node_modules/core-js/modules/es6.array.iterator.js"),C("./node_modules/core-js/modules/es6.object.to-string.js");function F(Y,_e){if(Y==null)return{};var we=D(Y,_e),pe,oe;if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(Y);for(oe=0;oe<ue.length;oe++)pe=ue[oe],!(_e.indexOf(pe)>=0)&&Object.prototype.propertyIsEnumerable.call(Y,pe)&&(we[pe]=Y[pe])}return we}function D(Y,_e){if(Y==null)return{};var we={},pe=Object.keys(Y),oe,ue;for(ue=0;ue<pe.length;ue++)oe=pe[ue],!(_e.indexOf(oe)>=0)&&(we[oe]=Y[oe]);return we}function Q(Y,_e,we){if(we.data)try{we.data=JSON.parse(we.data)}catch(oe){Y.debug("Could not parse data as JSON",oe)}we.request,we.config;var pe=F(we,["request","config"]);return pe}V.default=Q},"./src/utilities.js":function(X,V,C){C.r(V),C.d(V,"isObject",function(){return D}),C.d(V,"getTag",function(){return Q}),C.d(V,"isFunction",function(){return Y}),C.d(V,"isString",function(){return _e}),C.d(V,"mapObject",function(){return we}),C("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),C("./node_modules/core-js/modules/es6.symbol.js"),C("./node_modules/core-js/modules/es6.array.iterator.js"),C("./node_modules/core-js/modules/es6.object.to-string.js");function F(pe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?F=function(ue){return typeof ue}:F=function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},F(pe)}function D(pe){var oe=F(pe);return pe!=null&&(oe==="object"||oe==="function")}function Q(pe){return pe===null?pe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(pe)}function Y(pe){if(!D(pe))return!1;var oe=Q(pe);return oe==="[object Function]"||oe==="[object AsyncFunction]"||oe==="[object GeneratorFunction]"||oe==="[object Proxy]"}function _e(pe){var oe=F(pe);return oe==="string"||oe==="object"&&pe!=null&&!Array.isArray(pe)&&Q(pe)==="[object String]"}function we(pe,oe){return D(pe)?Object.keys(pe).map(function(ue){return oe(pe[ue],ue)}):[]}},axios:function(X,V){X.exports=se},util:function(X,V){X.exports=A.default}})})});const N={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},R=O.setupCache({maxAge:60*60*24*1e3}),ce=w.default.create({adapter:R.adapter}),K=async(H,G={})=>{const se={...N,...G},[X,V]=i.lngLatToGoogle(H,se.zoomBase),C=se.tileUrl.replace("{z}",String(se.zoomBase)).replace("{x}",String(X)).replace("{y}",String(V)),F={code:"",prefecture:"",city:""};let D;try{const _e=await ce.get(C,{responseType:"arraybuffer"});D=Buffer.from(_e.data,"binary")}catch(_e){throw new Error(_e)}const Q=new g.VectorTile(new b.default(D));let Y=Object.keys(Q.layers);return Array.isArray(Y)||(Y=[Y]),Y.forEach(_e=>{const we=Q.layers[_e];if(we&&se.layer===we.name)for(let pe=0;pe<we.length;pe++){const oe=we.feature(pe).toGeoJSON(X,V,se.zoomBase);Y.length>1&&(oe.properties.vt_layer=_e);const ue={type:"FeatureCollection",features:[oe]};t.geoContains(ue,H)&&(F.code=String(oe.id).length===5?String(oe.id):`0${String(oe.id)}`,F.prefecture=oe.properties.prefecture,F.city=oe.properties.city)}}),F};e.openReverseGeocoder=K})(fI);const DR={defaultComment:"更新地址",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},BR={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},NR={defaultComment:"住所を更新",postcodeField:{key:"addr:postcode",displayName:"郵便番号",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"都道府県",placeholder:"東京都",adminLevel:4},{key:"addr:city",displayName:"市町村と東京23区",placeholder:"千代田区",adminLevel:7},{key:"addr:suburb",displayName:"政令指定都市の区",placeholder:""},{key:"addr:quarter",displayName:"地名",placeholder:"外神田",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"丁目",placeholder:"1丁目"},{key:"addr:block_number",displayName:"番地",placeholder:"17"},{key:"addr:housenumber",displayName:"号",placeholder:"6",prefix:"-"}]},UR={defaultComment:"주소 업데이트",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},oE={JPN:NR,CHN:DR,DEU:BR,KOR:UR};function TA(e,t,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function $R(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!sE(e[0])||!sE(e[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:e};return TA(a,t,i)}function VR(e,t,i){i===void 0&&(i={});for(var a=0,c=e;a<c.length;a++){var d=c[a];if(d.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<d[d.length-1].length;g++)if(d[d.length-1][g]!==d[0][g])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return TA(l,t,i)}function sE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function CA(e,t,i){if(e!==null)for(var a,c,d,g,l,b,w,A=0,S=0,k,O=e.type,N=O==="FeatureCollection",R=O==="Feature",ce=N?e.features.length:1,K=0;K<ce;K++){w=N?e.features[K].geometry:R?e.geometry:e,k=w?w.type==="GeometryCollection":!1,l=k?w.geometries.length:1;for(var H=0;H<l;H++){var G=0,se=0;if(g=k?w.geometries[H]:w,g!==null){b=g.coordinates;var X=g.type;switch(A=i&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(t(b,S,K,G,se)===!1)return!1;S++,G++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(t(b[a],S,K,G,se)===!1)return!1;S++,X==="MultiPoint"&&G++}X==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(c=0;c<b[a].length-A;c++){if(t(b[a][c],S,K,G,se)===!1)return!1;S++}X==="MultiLineString"&&G++,X==="Polygon"&&se++}X==="Polygon"&&G++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(se=0,c=0;c<b[a].length;c++){for(d=0;d<b[a][c].length-A;d++){if(t(b[a][c][d],S,K,G,se)===!1)return!1;S++}se++}G++}break;case"GeometryCollection":for(a=0;a<g.geometries.length;a++)if(CA(g.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function GR(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ZR(e){return e.type==="Feature"?e.geometry:e}function HR(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var a=GR(e),c=ZR(t),d=c.type,g=t.bbox,l=c.coordinates;if(g&&WR(a,g)===!1)return!1;d==="Polygon"&&(l=[l]);for(var b=!1,w=0;w<l.length&&!b;w++)if(aE(a,l[w][0],i.ignoreBoundary)){for(var A=!1,S=1;S<l[w].length&&!A;)aE(a,l[w][S],!i.ignoreBoundary)&&(A=!0),S++;A||(b=!0)}return b}function aE(e,t,i){var a=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,d=t.length-1;c<t.length;d=c++){var g=t[c][0],l=t[c][1],b=t[d][0],w=t[d][1],A=e[1]*(g-b)+l*(b-e[0])+w*(e[0]-g)===0&&(g-e[0])*(b-e[0])<=0&&(l-e[1])*(w-e[1])<=0;if(A)return!i;var S=l>e[1]!=w>e[1]&&e[0]<(b-g)*(e[1]-l)/(w-l)+g;S&&(a=!a)}return a}function WR(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function XR(e,t){t===void 0&&(t={});var i=0,a=0,c=0;return CA(e,function(d){i+=d[0],a+=d[1],c++},!0),$R([i/c,a/c],t.properties)}const qR=()=>{const[e,t]=yt.useState(!1);return{detectCountry:yt.useCallback(async(a,c)=>{t(!0);const g=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const l of g.features)if(HR([a,c],l.geometry))return console.log("country: ",l.properties),t(!1),l;t(!1)},[]),loadingCountry:e}},tv=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var l;const[c,d]=yt.useState((l=e.properties)==null?void 0:l[t.key]);yt.useEffect(()=>{var b;d((b=e.properties)==null?void 0:b[t.key])},[e]);const g=yt.useCallback(b=>{d(b.currentTarget.value),a&&a(b)},[]);return pt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[pt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),pt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:g}),pt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(b=>{if(parseInt(b.tags.admin_level)===t.adminLevel)return pt.jsx("option",{value:b.tags.name},b.id);if(b.type==="node"&&t.adminLevel===9)return pt.jsx("option",{value:b.tags.name},b.id)})})]})},KR=({feature:e,fields:t})=>e.properties?pt.jsxs(pt.Fragment,{children:[t.postcodeField&&pt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return pt.jsxs(pt.Fragment,{children:[pt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return pt.jsxs(pt.Fragment,{children:[pt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,YR=({placeholder:e,defaultValue:t})=>{const[i,a]=yt.useState(t);yt.useEffect(()=>{a(t)},[t]);const c=yt.useCallback(d=>{a(d.currentTarget.value)},[]);return pt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[pt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),pt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var Mg={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Mg.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,d="Expected a function",g="__lodash_hash_undefined__",l=1,b=2,w=1/0,A=9007199254740991,S="[object Arguments]",k="[object Array]",O="[object Boolean]",N="[object Date]",R="[object Error]",ce="[object Function]",K="[object GeneratorFunction]",H="[object Map]",G="[object Number]",se="[object Object]",X="[object Promise]",V="[object RegExp]",C="[object Set]",F="[object String]",D="[object Symbol]",Q="[object WeakMap]",Y="[object ArrayBuffer]",_e="[object DataView]",we="[object Float32Array]",pe="[object Float64Array]",oe="[object Int8Array]",ue="[object Int16Array]",te="[object Int32Array]",ne="[object Uint8Array]",de="[object Uint8ClampedArray]",Se="[object Uint16Array]",Te="[object Uint32Array]",$e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ie=/^\w*$/,Le=/^\./,We=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ze=/[\\^$.*+?()[\]{}|]/g,nt=/\\(\\)?/g,ct=/\w*$/,vt=/^\[object .+?Constructor\]$/,It=/^(?:0|[1-9]\d*)$/,ft={};ft[we]=ft[pe]=ft[oe]=ft[ue]=ft[te]=ft[ne]=ft[de]=ft[Se]=ft[Te]=!0,ft[S]=ft[k]=ft[Y]=ft[O]=ft[_e]=ft[N]=ft[R]=ft[ce]=ft[H]=ft[G]=ft[se]=ft[V]=ft[C]=ft[F]=ft[Q]=!1;var St={};St[S]=St[k]=St[Y]=St[_e]=St[O]=St[N]=St[we]=St[pe]=St[oe]=St[ue]=St[te]=St[H]=St[G]=St[se]=St[V]=St[C]=St[F]=St[D]=St[ne]=St[de]=St[Se]=St[Te]=!0,St[R]=St[ce]=St[Q]=!1;var Gt=typeof Nl=="object"&&Nl&&Nl.Object===Object&&Nl,Ut=typeof self=="object"&&self&&self.Object===Object&&self,cn=Gt||Ut||Function("return this")(),xn=t&&!t.nodeType&&t,yn=xn&&!0&&e&&!e.nodeType&&e,sn=yn&&yn.exports===xn,gn=sn&&Gt.process,ie=function(){try{return gn&&gn.binding("util")}catch{}}(),B=ie&&ie.isTypedArray;function j(Z,ve){return Z.set(ve[0],ve[1]),Z}function ge(Z,ve){return Z.add(ve),Z}function Be(Z,ve,Ue){switch(Ue.length){case 0:return Z.call(ve);case 1:return Z.call(ve,Ue[0]);case 2:return Z.call(ve,Ue[0],Ue[1]);case 3:return Z.call(ve,Ue[0],Ue[1],Ue[2])}return Z.apply(ve,Ue)}function et(Z,ve){for(var Ue=-1,it=Z?Z.length:0;++Ue<it&&ve(Z[Ue],Ue,Z)!==!1;);return Z}function lt(Z,ve){for(var Ue=-1,it=ve.length,Lt=Z.length;++Ue<it;)Z[Lt+Ue]=ve[Ue];return Z}function le(Z,ve,Ue,it){var Lt=-1,Tt=Z?Z.length:0;for(it&&Tt&&(Ue=Z[++Lt]);++Lt<Tt;)Ue=ve(Ue,Z[Lt],Lt,Z);return Ue}function L(Z,ve){for(var Ue=-1,it=Z?Z.length:0;++Ue<it;)if(ve(Z[Ue],Ue,Z))return!0;return!1}function U(Z){return function(ve){return ve==null?i:ve[Z]}}function Ee(Z,ve){for(var Ue=-1,it=Array(Z);++Ue<Z;)it[Ue]=ve(Ue);return it}function Ge(Z){return function(ve){return Z(ve)}}function je(Z,ve){return Z==null?i:Z[ve]}function at(Z){var ve=!1;if(Z!=null&&typeof Z.toString!="function")try{ve=!!(Z+"")}catch{}return ve}function jt(Z){var ve=-1,Ue=Array(Z.size);return Z.forEach(function(it,Lt){Ue[++ve]=[Lt,it]}),Ue}function Tn(Z,ve){return function(Ue){return Z(ve(Ue))}}function vn(Z){var ve=-1,Ue=Array(Z.size);return Z.forEach(function(it){Ue[++ve]=it}),Ue}var _t=Array.prototype,Rt=Function.prototype,nn=Object.prototype,wr=cn["__core-js_shared__"],fi=function(){var Z=/[^.]+$/.exec(wr&&wr.keys&&wr.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),hn=Rt.toString,er=nn.hasOwnProperty,ze=hn.call(Object),re=nn.toString,he=RegExp("^"+hn.call(er).replace(Ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xe=sn?cn.Buffer:i,be=cn.Symbol,Ce=cn.Uint8Array,He=Tn(Object.getPrototypeOf,Object),Ve=Object.create,Fe=nn.propertyIsEnumerable,qe=_t.splice,ut=Object.getOwnPropertySymbols,ht=xe?xe.isBuffer:i,mt=Tn(Object.keys,Object),Jt=Math.max,un=ji(cn,"DataView"),Dt=ji(cn,"Map"),Qt=ji(cn,"Promise"),fn=ji(cn,"Set"),Rn=ji(cn,"WeakMap"),jn=ji(Object,"create"),On=!Fe.call({valueOf:1},"valueOf"),Mn=Po(un),ei=Po(Dt),qn=Po(Qt),br=Po(fn),Ur=Po(Rn),ri=be?be.prototype:i,Gs=ri?ri.valueOf:i,ms=ri?ri.toString:i;function wn(){}function gs(Z){var ve=-1,Ue=Z?Z.length:0;for(this.clear();++ve<Ue;){var it=Z[ve];this.set(it[0],it[1])}}function Gn(){this.__data__=jn?jn(null):{}}function cu(Z){return this.has(Z)&&delete this.__data__[Z]}function rl(Z){var ve=this.__data__;if(jn){var Ue=ve[Z];return Ue===g?i:Ue}return er.call(ve,Z)?ve[Z]:i}function ti(Z){var ve=this.__data__;return jn?ve[Z]!==i:er.call(ve,Z)}function Si(Z,ve){var Ue=this.__data__;return Ue[Z]=jn&&ve===i?g:ve,this}gs.prototype.clear=Gn,gs.prototype.delete=cu,gs.prototype.get=rl,gs.prototype.has=ti,gs.prototype.set=Si;function Ao(Z){var ve=-1,Ue=Z?Z.length:0;for(this.clear();++ve<Ue;){var it=Z[ve];this.set(it[0],it[1])}}function Fi(){this.__data__=[]}function $r(Z){var ve=this.__data__,Ue=va(ve,Z);if(Ue<0)return!1;var it=ve.length-1;return Ue==it?ve.pop():qe.call(ve,Ue,1),!0}function il(Z){var ve=this.__data__,Ue=va(ve,Z);return Ue<0?i:ve[Ue][1]}function Zs(Z){return va(this.__data__,Z)>-1}function ir(Z,ve){var Ue=this.__data__,it=va(Ue,Z);return it<0?Ue.push([Z,ve]):Ue[it][1]=ve,this}Ao.prototype.clear=Fi,Ao.prototype.delete=$r,Ao.prototype.get=il,Ao.prototype.has=Zs,Ao.prototype.set=ir;function bn(Z){var ve=-1,Ue=Z?Z.length:0;for(this.clear();++ve<Ue;){var it=Z[ve];this.set(it[0],it[1])}}function ys(){this.__data__={hash:new gs,map:new(Dt||Ao),string:new gs}}function hr(Z){return ba(this,Z).delete(Z)}function ol(Z){return ba(this,Z).get(Z)}function Ri(Z){return ba(this,Z).has(Z)}function hu(Z,ve){return ba(this,Z).set(Z,ve),this}bn.prototype.clear=ys,bn.prototype.delete=hr,bn.prototype.get=ol,bn.prototype.has=Ri,bn.prototype.set=hu;function Ji(Z){var ve=-1,Ue=Z?Z.length:0;for(this.__data__=new bn;++ve<Ue;)this.add(Z[ve])}function hc(Z){return this.__data__.set(Z,g),this}function fu(Z){return this.__data__.has(Z)}Ji.prototype.add=Ji.prototype.push=hc,Ji.prototype.has=fu;function di(Z){this.__data__=new Ao(Z)}function sl(){this.__data__=new Ao}function Wo(Z){return this.__data__.delete(Z)}function du(Z){return this.__data__.get(Z)}function ga(Z){return this.__data__.has(Z)}function fc(Z,ve){var Ue=this.__data__;if(Ue instanceof Ao){var it=Ue.__data__;if(!Dt||it.length<c-1)return it.push([Z,ve]),this;Ue=this.__data__=new bn(it)}return Ue.set(Z,ve),this}di.prototype.clear=sl,di.prototype.delete=Wo,di.prototype.get=du,di.prototype.has=ga,di.prototype.set=fc;function dc(Z,ve){var Ue=Gr(Z)||Ks(Z)?Ee(Z.length,String):[],it=Ue.length,Lt=!!it;for(var Tt in Z)(ve||er.call(Z,Tt))&&!(Lt&&(Tt=="length"||Jn(Tt,it)))&&Ue.push(Tt);return Ue}function ya(Z,ve,Ue){(Ue!==i&&!vo(Z[ve],Ue)||typeof ve=="number"&&Ue===i&&!(ve in Z))&&(Z[ve]=Ue)}function al(Z,ve,Ue){var it=Z[ve];(!(er.call(Z,ve)&&vo(it,Ue))||Ue===i&&!(ve in Z))&&(Z[ve]=Ue)}function va(Z,ve){for(var Ue=Z.length;Ue--;)if(vo(Z[Ue][0],ve))return Ue;return-1}function Fh(Z,ve){return Z&&vu(ve,Qi(ve),Z)}function vs(Z,ve,Ue,it,Lt,Tt,Zt){var Xt;if(it&&(Xt=Tt?it(Z,Lt,Tt,Zt):it(Z)),Xt!==i)return Xt;if(!ii(Z))return Z;var dn=Gr(Z);if(dn){if(Xt=wc(Z),!ve)return _c(Z,Xt)}else{var Zn=Vr(Z),En=Zn==ce||Zn==K;if(Ys(Z))return vl(Z,ve);if(Zn==se||Zn==S||En&&!Tt){if(at(Z))return Tt?Z:{};if(Xt=Eu(En?{}:Z),!ve)return jh(Z,Fh(Xt,Z))}else{if(!St[Zn])return Tt?Z:{};Xt=Dn(Z,Zn,vs,ve)}}Zt||(Zt=new di);var Un=Zt.get(Z);if(Un)return Un;if(Zt.set(Z,Xt),!dn)var sr=Ue?Ws(Z):Qi(Z);return et(sr||Z,function(ar,tr){sr&&(tr=ar,ar=Z[tr]),al(Xt,tr,vs(ar,ve,Ue,it,tr,Z,Zt))}),Xt}function pc(Z){return ii(Z)?Ve(Z):{}}var ll=Bh(gc),mc=_u();function gc(Z,ve){return Z&&mc(Z,ve,Qi)}function ul(Z,ve){ve=Sn(ve,Z)?[ve]:yl(ve);for(var Ue=0,it=ve.length;Z!=null&&Ue<it;)Z=Z[bs(ve[Ue++])];return Ue&&Ue==it?Z:i}function pu(Z,ve,Ue){var it=ve(Z);return Gr(Z)?it:lt(it,Ue(Z))}function _s(Z){return re.call(Z)}function cl(Z,ve){return Z!=null&&ve in Object(Z)}function pi(Z,ve,Ue,it,Lt){return Z===ve?!0:Z==null||ve==null||!ii(Z)&&!ko(ve)?Z!==Z&&ve!==ve:hl(Z,ve,pi,Ue,it,Lt)}function hl(Z,ve,Ue,it,Lt,Tt){var Zt=Gr(Z),Xt=Gr(ve),dn=k,Zn=k;Zt||(dn=Vr(Z),dn=dn==S?se:dn),Xt||(Zn=Vr(ve),Zn=Zn==S?se:Zn);var En=dn==se&&!at(Z),Un=Zn==se&&!at(ve),sr=dn==Zn;if(sr&&!En)return Tt||(Tt=new di),Zt||Qn(Z)?wa(Z,ve,Ue,it,Lt,Tt):xu(Z,ve,dn,Ue,it,Lt,Tt);if(!(Lt&b)){var ar=En&&er.call(Z,"__wrapped__"),tr=Un&&er.call(ve,"__wrapped__");if(ar||tr){var Jo=ar?Z.value():Z,eo=tr?ve.value():ve;return Tt||(Tt=new di),Ue(Jo,eo,it,Lt,Tt)}}return sr?(Tt||(Tt=new di),wu(Z,ve,Ue,it,Lt,Tt)):!1}function fl(Z,ve,Ue,it){var Lt=Ue.length,Tt=Lt,Zt=!it;if(Z==null)return!Tt;for(Z=Object(Z);Lt--;){var Xt=Ue[Lt];if(Zt&&Xt[2]?Xt[1]!==Z[Xt[0]]:!(Xt[0]in Z))return!1}for(;++Lt<Tt;){Xt=Ue[Lt];var dn=Xt[0],Zn=Z[dn],En=Xt[1];if(Zt&&Xt[2]){if(Zn===i&&!(dn in Z))return!1}else{var Un=new di;if(it)var sr=it(Zn,En,dn,Z,ve,Un);if(!(sr===i?pi(En,Zn,it,l|b,Un):sr))return!1}}return!0}function _a(Z){if(!ii(Z)||or(Z))return!1;var ve=Ea(Z)||at(Z)?he:vt;return ve.test(Po(Z))}function dl(Z){return ko(Z)&&Ta(Z.length)&&!!ft[re.call(Z)]}function xs(Z){return typeof Z=="function"?Z:Z==null?Ts:typeof Z=="object"?Gr(Z)?Ei(Z[0],Z[1]):pl(Z):Au(Z)}function Xo(Z){if(!Wn(Z))return mt(Z);var ve=[];for(var Ue in Object(Z))er.call(Z,Ue)&&Ue!="constructor"&&ve.push(Ue);return ve}function In(Z){if(!ii(Z))return Cu(Z);var ve=Wn(Z),Ue=[];for(var it in Z)it=="constructor"&&(ve||!er.call(Z,it))||Ue.push(it);return Ue}function pl(Z){var ve=bu(Z);return ve.length==1&&ve[0][2]?Tu(ve[0][0],ve[0][1]):function(Ue){return Ue===Z||fl(Ue,Z,ve)}}function Ei(Z,ve){return Sn(Z)&&qs(ve)?Tu(bs(Z),ve):function(Ue){var it=Es(Ue,Z);return it===i&&it===ve?Js(Ue,Z):pi(ve,it,i,l|b)}}function mi(Z,ve,Ue,it,Lt){if(Z!==ve){if(!(Gr(ve)||Qn(ve)))var Tt=In(ve);et(Tt||ve,function(Zt,Xt){if(Tt&&(Xt=Zt,Zt=ve[Xt]),ii(Zt))Lt||(Lt=new di),mu(Z,ve,Xt,Ue,mi,it,Lt);else{var dn=it?it(Z[Xt],Zt,Xt+"",Z,ve,Lt):i;dn===i&&(dn=Zt),ya(Z,Xt,dn)}})}}function mu(Z,ve,Ue,it,Lt,Tt,Zt){var Xt=Z[Ue],dn=ve[Ue],Zn=Zt.get(dn);if(Zn){ya(Z,Ue,Zn);return}var En=Tt?Tt(Xt,dn,Ue+"",Z,ve,Zt):i,Un=En===i;Un&&(En=dn,Gr(dn)||Qn(dn)?Gr(Xt)?En=Xt:Sl(Xt)?En=_c(Xt):(Un=!1,En=vs(dn,!0)):Ca(dn)||Ks(dn)?Ks(Xt)?En=Ko(Xt):!ii(Xt)||it&&Ea(Xt)?(Un=!1,En=vs(dn,!0)):En=Xt:Un=!1),Un&&(Zt.set(dn,En),Lt(En,dn,it,Tt,Zt),Zt.delete(dn)),ya(Z,Ue,En)}function ml(Z){return function(ve){return ul(ve,Z)}}function gl(Z,ve){return ve=Jt(ve===i?Z.length-1:ve,0),function(){for(var Ue=arguments,it=-1,Lt=Jt(Ue.length-ve,0),Tt=Array(Lt);++it<Lt;)Tt[it]=Ue[ve+it];it=-1;for(var Zt=Array(ve+1);++it<ve;)Zt[it]=Ue[it];return Zt[ve]=Tt,Be(Z,this,Zt)}}function gu(Z){if(typeof Z=="string")return Z;if(Ia(Z))return ms?ms.call(Z):"";var ve=Z+"";return ve=="0"&&1/Z==-w?"-0":ve}function yl(Z){return Gr(Z)?Z:xl(Z)}function vl(Z,ve){if(ve)return Z.slice();var Ue=new Z.constructor(Z.length);return Z.copy(Ue),Ue}function xa(Z){var ve=new Z.constructor(Z.byteLength);return new Ce(ve).set(new Ce(Z)),ve}function yu(Z,ve){var Ue=ve?xa(Z.buffer):Z.buffer;return new Z.constructor(Ue,Z.byteOffset,Z.byteLength)}function _l(Z,ve,Ue){var it=ve?Ue(jt(Z),!0):jt(Z);return le(it,j,new Z.constructor)}function yc(Z){var ve=new Z.constructor(Z.source,ct.exec(Z));return ve.lastIndex=Z.lastIndex,ve}function vc(Z,ve,Ue){var it=ve?Ue(vn(Z),!0):vn(Z);return le(it,ge,new Z.constructor)}function Hs(Z){return Gs?Object(Gs.call(Z)):{}}function Rh(Z,ve){var Ue=ve?xa(Z.buffer):Z.buffer;return new Z.constructor(Ue,Z.byteOffset,Z.length)}function _c(Z,ve){var Ue=-1,it=Z.length;for(ve||(ve=Array(it));++Ue<it;)ve[Ue]=Z[Ue];return ve}function vu(Z,ve,Ue,it){Ue||(Ue={});for(var Lt=-1,Tt=ve.length;++Lt<Tt;){var Zt=ve[Lt],Xt=it?it(Ue[Zt],Z[Zt],Zt,Ue,Z):i;al(Ue,Zt,Xt===i?Z[Zt]:Xt)}return Ue}function jh(Z,ve){return vu(Z,Su(Z),ve)}function Dh(Z){return gl(function(ve,Ue){var it=-1,Lt=Ue.length,Tt=Lt>1?Ue[Lt-1]:i,Zt=Lt>2?Ue[2]:i;for(Tt=Z.length>3&&typeof Tt=="function"?(Lt--,Tt):i,Zt&&Nh(Ue[0],Ue[1],Zt)&&(Tt=Lt<3?i:Tt,Lt=1),ve=Object(ve);++it<Lt;){var Xt=Ue[it];Xt&&Z(ve,Xt,it,Tt)}return ve})}function Bh(Z,ve){return function(Ue,it){if(Ue==null)return Ue;if(!Ss(Ue))return Z(Ue,it);for(var Lt=Ue.length,Tt=ve?Lt:-1,Zt=Object(Ue);(ve?Tt--:++Tt<Lt)&&it(Zt[Tt],Tt,Zt)!==!1;);return Ue}}function _u(Z){return function(ve,Ue,it){for(var Lt=-1,Tt=Object(ve),Zt=it(ve),Xt=Zt.length;Xt--;){var dn=Zt[Z?Xt:++Lt];if(Ue(Tt[dn],dn,Tt)===!1)break}return ve}}function wa(Z,ve,Ue,it,Lt,Tt){var Zt=Lt&b,Xt=Z.length,dn=ve.length;if(Xt!=dn&&!(Zt&&dn>Xt))return!1;var Zn=Tt.get(Z);if(Zn&&Tt.get(ve))return Zn==ve;var En=-1,Un=!0,sr=Lt&l?new Ji:i;for(Tt.set(Z,ve),Tt.set(ve,Z);++En<Xt;){var ar=Z[En],tr=ve[En];if(it)var Jo=Zt?it(tr,ar,En,ve,Z,Tt):it(ar,tr,En,Z,ve,Tt);if(Jo!==i){if(Jo)continue;Un=!1;break}if(sr){if(!L(ve,function(eo,Qo){if(!sr.has(Qo)&&(ar===eo||Ue(ar,eo,it,Lt,Tt)))return sr.add(Qo)})){Un=!1;break}}else if(!(ar===tr||Ue(ar,tr,it,Lt,Tt))){Un=!1;break}}return Tt.delete(Z),Tt.delete(ve),Un}function xu(Z,ve,Ue,it,Lt,Tt,Zt){switch(Ue){case _e:if(Z.byteLength!=ve.byteLength||Z.byteOffset!=ve.byteOffset)return!1;Z=Z.buffer,ve=ve.buffer;case Y:return!(Z.byteLength!=ve.byteLength||!it(new Ce(Z),new Ce(ve)));case O:case N:case G:return vo(+Z,+ve);case R:return Z.name==ve.name&&Z.message==ve.message;case V:case F:return Z==ve+"";case H:var Xt=jt;case C:var dn=Tt&b;if(Xt||(Xt=vn),Z.size!=ve.size&&!dn)return!1;var Zn=Zt.get(Z);if(Zn)return Zn==ve;Tt|=l,Zt.set(Z,ve);var En=wa(Xt(Z),Xt(ve),it,Lt,Tt,Zt);return Zt.delete(Z),En;case D:if(Gs)return Gs.call(Z)==Gs.call(ve)}return!1}function wu(Z,ve,Ue,it,Lt,Tt){var Zt=Lt&b,Xt=Qi(Z),dn=Xt.length,Zn=Qi(ve),En=Zn.length;if(dn!=En&&!Zt)return!1;for(var Un=dn;Un--;){var sr=Xt[Un];if(!(Zt?sr in ve:er.call(ve,sr)))return!1}var ar=Tt.get(Z);if(ar&&Tt.get(ve))return ar==ve;var tr=!0;Tt.set(Z,ve),Tt.set(ve,Z);for(var Jo=Zt;++Un<dn;){sr=Xt[Un];var eo=Z[sr],Qo=ve[sr];if(it)var Pa=Zt?it(Qo,eo,sr,ve,Z,Tt):it(eo,Qo,sr,Z,ve,Tt);if(!(Pa===i?eo===Qo||Ue(eo,Qo,it,Lt,Tt):Pa)){tr=!1;break}Jo||(Jo=sr=="constructor")}if(tr&&!Jo){var Mo=Z.constructor,Di=ve.constructor;Mo!=Di&&"constructor"in Z&&"constructor"in ve&&!(typeof Mo=="function"&&Mo instanceof Mo&&typeof Di=="function"&&Di instanceof Di)&&(tr=!1)}return Tt.delete(Z),Tt.delete(ve),tr}function Ws(Z){return pu(Z,Qi,Su)}function xc(){var Z=wn.iteratee||El;return Z=Z===El?xs:Z,arguments.length?Z(arguments[0],arguments[1]):Z}function ba(Z,ve){var Ue=Z.__data__;return ws(ve)?Ue[typeof ve=="string"?"string":"hash"]:Ue.map}function bu(Z){for(var ve=Qi(Z),Ue=ve.length;Ue--;){var it=ve[Ue],Lt=Z[it];ve[Ue]=[it,Lt,qs(Lt)]}return ve}function ji(Z,ve){var Ue=je(Z,ve);return _a(Ue)?Ue:i}var Su=ut?Tn(ut,Object):Pu,Vr=_s;(un&&Vr(new un(new ArrayBuffer(1)))!=_e||Dt&&Vr(new Dt)!=H||Qt&&Vr(Qt.resolve())!=X||fn&&Vr(new fn)!=C||Rn&&Vr(new Rn)!=Q)&&(Vr=function(Z){var ve=re.call(Z),Ue=ve==se?Z.constructor:i,it=Ue?Po(Ue):i;if(it)switch(it){case Mn:return _e;case ei:return H;case qn:return X;case br:return C;case Ur:return Q}return ve});function Xs(Z,ve,Ue){ve=Sn(ve,Z)?[ve]:yl(ve);for(var it,Lt=-1,Zt=ve.length;++Lt<Zt;){var Tt=bs(ve[Lt]);if(!(it=Z!=null&&Ue(Z,Tt)))break;Z=Z[Tt]}if(it)return it;var Zt=Z?Z.length:0;return!!Zt&&Ta(Zt)&&Jn(Tt,Zt)&&(Gr(Z)||Ks(Z))}function wc(Z){var ve=Z.length,Ue=Z.constructor(ve);return ve&&typeof Z[0]=="string"&&er.call(Z,"index")&&(Ue.index=Z.index,Ue.input=Z.input),Ue}function Eu(Z){return typeof Z.constructor=="function"&&!Wn(Z)?pc(He(Z)):{}}function Dn(Z,ve,Ue,it){var Lt=Z.constructor;switch(ve){case Y:return xa(Z);case O:case N:return new Lt(+Z);case _e:return yu(Z,it);case we:case pe:case oe:case ue:case te:case ne:case de:case Se:case Te:return Rh(Z,it);case H:return _l(Z,it,Ue);case G:case F:return new Lt(Z);case V:return yc(Z);case C:return vc(Z,it,Ue);case D:return Hs(Z)}}function Jn(Z,ve){return ve=ve??A,!!ve&&(typeof Z=="number"||It.test(Z))&&Z>-1&&Z%1==0&&Z<ve}function Nh(Z,ve,Ue){if(!ii(Ue))return!1;var it=typeof ve;return(it=="number"?Ss(Ue)&&Jn(ve,Ue.length):it=="string"&&ve in Ue)?vo(Ue[ve],Z):!1}function Sn(Z,ve){if(Gr(Z))return!1;var Ue=typeof Z;return Ue=="number"||Ue=="symbol"||Ue=="boolean"||Z==null||Ia(Z)?!0:Ie.test(Z)||!$e.test(Z)||ve!=null&&Z in Object(ve)}function ws(Z){var ve=typeof Z;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?Z!=="__proto__":Z===null}function or(Z){return!!fi&&fi in Z}function Wn(Z){var ve=Z&&Z.constructor,Ue=typeof ve=="function"&&ve.prototype||nn;return Z===Ue}function qs(Z){return Z===Z&&!ii(Z)}function Tu(Z,ve){return function(Ue){return Ue==null?!1:Ue[Z]===ve&&(ve!==i||Z in Object(Ue))}}function Cu(Z){var ve=[];if(Z!=null)for(var Ue in Object(Z))ve.push(Ue);return ve}var xl=qo(function(Z){Z=oi(Z);var ve=[];return Le.test(Z)&&ve.push(""),Z.replace(We,function(Ue,it,Lt,Tt){ve.push(Lt?Tt.replace(nt,"$1"):it||Ue)}),ve});function bs(Z){if(typeof Z=="string"||Ia(Z))return Z;var ve=Z+"";return ve=="0"&&1/Z==-w?"-0":ve}function Po(Z){if(Z!=null){try{return hn.call(Z)}catch{}try{return Z+""}catch{}}return""}function wl(Z){for(var ve=-1,Ue=Z?Z.length:0,it=0,Lt=[];++ve<Ue;){var Tt=Z[ve];Tt&&(Lt[it++]=Tt)}return Lt}function bl(Z,ve){var Ue=Gr(Z)?et:ll;return Ue(Z,xc(ve,3))}function qo(Z,ve){if(typeof Z!="function"||ve&&typeof ve!="function")throw new TypeError(d);var Ue=function(){var it=arguments,Lt=ve?ve.apply(this,it):it[0],Tt=Ue.cache;if(Tt.has(Lt))return Tt.get(Lt);var Zt=Z.apply(this,it);return Ue.cache=Tt.set(Lt,Zt),Zt};return Ue.cache=new(qo.Cache||bn),Ue}qo.Cache=bn;function Sa(Z){return vs(Z,!1,!0)}function vo(Z,ve){return Z===ve||Z!==Z&&ve!==ve}function Ks(Z){return Sl(Z)&&er.call(Z,"callee")&&(!Fe.call(Z,"callee")||re.call(Z)==S)}var Gr=Array.isArray;function Ss(Z){return Z!=null&&Ta(Z.length)&&!Ea(Z)}function Sl(Z){return ko(Z)&&Ss(Z)}var Ys=ht||ku;function Iu(Z){if(Ss(Z)&&(Gr(Z)||typeof Z=="string"||typeof Z.splice=="function"||Ys(Z)||Ks(Z)))return!Z.length;var ve=Vr(Z);if(ve==H||ve==C)return!Z.size;if(On||Wn(Z))return!mt(Z).length;for(var Ue in Z)if(er.call(Z,Ue))return!1;return!0}function Ea(Z){var ve=ii(Z)?re.call(Z):"";return ve==ce||ve==K}function Ta(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=A}function ii(Z){var ve=typeof Z;return!!Z&&(ve=="object"||ve=="function")}function ko(Z){return!!Z&&typeof Z=="object"}function Ca(Z){if(!ko(Z)||re.call(Z)!=se||at(Z))return!1;var ve=He(Z);if(ve===null)return!0;var Ue=er.call(ve,"constructor")&&ve.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&hn.call(Ue)==ze}function Ia(Z){return typeof Z=="symbol"||ko(Z)&&re.call(Z)==D}var Qn=B?Ge(B):dl;function Ko(Z){return vu(Z,Yo(Z))}function oi(Z){return Z==null?"":gu(Z)}function Es(Z,ve,Ue){var it=Z==null?i:ul(Z,ve);return it===i?Ue:it}function Js(Z,ve){return Z!=null&&Xs(Z,ve,cl)}function Qi(Z){return Ss(Z)?dc(Z):Xo(Z)}function Yo(Z){return Ss(Z)?dc(Z,!0):In(Z)}var Aa=Dh(function(Z,ve,Ue){mi(Z,ve,Ue)});function Ts(Z){return Z}function El(Z){return xs(typeof Z=="function"?Z:vs(Z,!0))}function Au(Z){return Sn(Z)?U(bs(Z)):ml(Z)}function Pu(){return[]}function ku(){return!1}wn.compact=wl,wn.iteratee=El,wn.keys=Qi,wn.keysIn=Yo,wn.memoize=qo,wn.merge=Aa,wn.property=Au,wn.toPlainObject=Ko,wn.clone=Sa,wn.eq=vo,wn.forEach=bl,wn.get=Es,wn.hasIn=Js,wn.identity=Ts,wn.isArguments=Ks,wn.isArray=Gr,wn.isArrayLike=Ss,wn.isArrayLikeObject=Sl,wn.isBuffer=Ys,wn.isEmpty=Iu,wn.isFunction=Ea,wn.isLength=Ta,wn.isObject=ii,wn.isObjectLike=ko,wn.isPlainObject=Ca,wn.isSymbol=Ia,wn.isTypedArray=Qn,wn.stubArray=Pu,wn.stubFalse=ku,wn.toString=oi,wn.each=bl,wn.VERSION=a,yn&&((yn.exports=wn)._=wn,xn._=wn)}).call(Nl)})(Mg,Mg.exports);var JR=Mg.exports,QR=Pm;function Pm(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)Pm(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)Pm(e.geometries[a],t);else if(i==="Feature")Pm(e.geometry,t);else if(i==="Polygon")lE(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)lE(e.coordinates[a],t);return e}function lE(e,t){if(e.length!==0){uE(e[0],t);for(var i=1;i<e.length;i++)uE(e[i],!t)}}function uE(e,t){for(var i=0,a=0,c=0,d=e.length,g=d-1;c<d;g=c++){var l=(e[c][0]-e[g][0])*(e[g][1]+e[c][1]),b=i+l;a+=Math.abs(i)>=Math.abs(l)?i-b+l:l-b+i,i=b}i+a>=0!=!!t&&e.reverse()}const ej=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var nv,cE;function tj(){return cE||(cE=1,nv=ej),nv}var zn=JR,um=QR,km={};tj().forEach(function(e){if(e.polygon==="all")km[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),km[e.key]={},km[e.key][t]=i}});function nj(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:zn.merge(e,t)}var Lg={};Lg=function(e,t,i){t=zn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:km,deduplicator:nj},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=d(e):a=c(e),a;function c(b){var w=new Array,A=new Array,S=new Array;function k(X){var V=zn.clone(X);V.lat=X.center.lat,V.lon=X.center.lon,V.__is_center_placeholder=!0,w.push(V)}function O(X){var V=zn.clone(X);V.nodes=[];function C(F,D,Q){var Y={type:"node",id:"_"+V.type+"/"+V.id+"bounds"+Q,lat:F,lon:D};V.nodes.push(Y.id),w.push(Y)}C(V.bounds.minlat,V.bounds.minlon,1),C(V.bounds.maxlat,V.bounds.minlon,2),C(V.bounds.maxlat,V.bounds.maxlon,3),C(V.bounds.minlat,V.bounds.maxlon,4),V.nodes.push(V.nodes[0]),V.__is_bounds_placeholder=!0,A.push(V)}function N(X){function V(C,F,D){var Q={type:"node",id:D,lat:C,lon:F};w.push(Q)}zn.isArray(X.nodes)||(X.nodes=X.geometry.map(function(C){return C!==null?"_anonymous@"+C.lat+"/"+C.lon:"_anonymous@unknown_location"})),X.geometry.forEach(function(C,F){C&&V(C.lat,C.lon,X.nodes[F])})}function R(X){function V(F,D,Q){var Y={type:"node",id:Q,lat:F,lon:D};w.push(Y)}function C(F,D){if(A.some(function(_e){return _e.type=="way"&&_e.id==D}))return;var Q={type:"way",id:D,nodes:[]};function Y(_e,we){var pe={type:"node",id:"_anonymous@"+_e+"/"+we,lat:_e,lon:we};Q.nodes.push(pe.id),w.push(pe)}F.forEach(function(_e){_e?Y(_e.lat,_e.lon):Q.nodes.push(void 0)}),A.push(Q)}X.members.forEach(function(F,D){F.type=="node"?F.lat&&V(F.lat,F.lon,F.ref):F.type=="way"&&F.geometry&&(F.ref="_fullGeom"+F.ref,C(F.geometry,F.ref))})}for(var ce=0;ce<b.elements.length;ce++)switch(b.elements[ce].type){case"node":var K=b.elements[ce];w.push(K);break;case"way":var H=zn.clone(b.elements[ce]);H.nodes=zn.clone(H.nodes),A.push(H),H.center&&k(H),H.geometry?N(H):H.bounds&&O(H);break;case"relation":var G=zn.clone(b.elements[ce]);G.members=zn.clone(G.members),S.push(G);var se=G.members&&G.members.some(function(X){return X.type=="node"&&X.lat||X.type=="way"&&X.geometry&&X.geometry.length>0});G.center&&k(G),se?R(G):G.bounds&&O(G);break}return g(w,A,S)}function d(b){var w=new Array,A=new Array,S=new Array;function k(G,se,X){G.hasAttribute(X)&&(se[X]=G.getAttribute(X))}function O(G,se){var X=zn.clone(G);k(se,X,"lat"),k(se,X,"lon"),X.__is_center_placeholder=!0,w.push(X)}function N(G,se){var X=zn.clone(G);X.nodes=[];function V(C,F,D){var Q={type:"node",id:"_"+X.type+"/"+X.id+"bounds"+D,lat:C,lon:F};X.nodes.push(Q.id),w.push(Q)}V(se.getAttribute("minlat"),se.getAttribute("minlon"),1),V(se.getAttribute("maxlat"),se.getAttribute("minlon"),2),V(se.getAttribute("maxlat"),se.getAttribute("maxlon"),3),V(se.getAttribute("minlat"),se.getAttribute("maxlon"),4),X.nodes.push(X.nodes[0]),X.__is_bounds_placeholder=!0,A.push(X)}function R(G,se){function X(V,C,F){var D={type:"node",id:F,lat:V,lon:C};return w.push(D),D.id}zn.isArray(G.nodes)||(G.nodes=[],zn.each(se,function(V,C){G.nodes.push("_anonymous@"+V.getAttribute("lat")+"/"+V.getAttribute("lon"))})),zn.each(se,function(V,C){V.getAttribute("lat")&&X(V.getAttribute("lat"),V.getAttribute("lon"),G.nodes[C])})}function ce(G,se){function X(C,F,D){var Q={type:"node",id:D,lat:C,lon:F};w.push(Q)}function V(C,F){if(A.some(function(Y){return Y.type=="way"&&Y.id==F}))return;var D={type:"way",id:F,nodes:[]};function Q(Y,_e){var we={type:"node",id:"_anonymous@"+Y+"/"+_e,lat:Y,lon:_e};D.nodes.push(we.id),w.push(we)}zn.each(C,function(Y){Y.getAttribute("lat")?Q(Y.getAttribute("lat"),Y.getAttribute("lon")):D.nodes.push(void 0)}),A.push(D)}zn.each(se,function(C,F){G.members[F].type=="node"?C.getAttribute("lat")&&X(C.getAttribute("lat"),C.getAttribute("lon"),G.members[F].ref):G.members[F].type=="way"&&C.getElementsByTagName("nd").length>0&&(G.members[F].ref="_fullGeom"+G.members[F].ref,V(C.getElementsByTagName("nd"),G.members[F].ref))})}zn.each(b.getElementsByTagName("node"),function(G,se){var X={};zn.each(G.getElementsByTagName("tag"),function(C){X[C.getAttribute("k")]=C.getAttribute("v")});var V={type:"node"};k(G,V,"id"),k(G,V,"lat"),k(G,V,"lon"),k(G,V,"version"),k(G,V,"timestamp"),k(G,V,"changeset"),k(G,V,"uid"),k(G,V,"user"),zn.isEmpty(X)||(V.tags=X),w.push(V)});var K,H;return zn.each(b.getElementsByTagName("way"),function(G,se){var X={},V=[];zn.each(G.getElementsByTagName("tag"),function(D){X[D.getAttribute("k")]=D.getAttribute("v")});var C=!1;zn.each(G.getElementsByTagName("nd"),function(D,Q){var Y;(Y=D.getAttribute("ref"))&&(V[Q]=Y),!C&&D.getAttribute("lat")&&(C=!0)});var F={type:"way"};k(G,F,"id"),k(G,F,"version"),k(G,F,"timestamp"),k(G,F,"changeset"),k(G,F,"uid"),k(G,F,"user"),V.length>0&&(F.nodes=V),zn.isEmpty(X)||(F.tags=X),(K=G.getElementsByTagName("center")[0])&&O(F,K),C?R(F,G.getElementsByTagName("nd")):(H=G.getElementsByTagName("bounds")[0])&&N(F,H),A.push(F)}),zn.each(b.getElementsByTagName("relation"),function(G,se){var X={},V=[];zn.each(G.getElementsByTagName("tag"),function(D){X[D.getAttribute("k")]=D.getAttribute("v")});var C=!1;zn.each(G.getElementsByTagName("member"),function(D,Q){V[Q]={},k(D,V[Q],"ref"),k(D,V[Q],"role"),k(D,V[Q],"type"),(!C&&V[Q].type=="node"&&D.getAttribute("lat")||V[Q].type=="way"&&D.getElementsByTagName("nd").length>0)&&(C=!0)});var F={type:"relation"};k(G,F,"id"),k(G,F,"version"),k(G,F,"timestamp"),k(G,F,"changeset"),k(G,F,"uid"),k(G,F,"user"),V.length>0&&(F.members=V),zn.isEmpty(X)||(F.tags=X),(K=G.getElementsByTagName("center")[0])&&O(F,K),C?ce(F,G.getElementsByTagName("member")):(H=G.getElementsByTagName("bounds")[0])&&N(F,H),S.push(F)}),g(w,A,S)}function g(b,w,A){function S(Le,We){if(typeof We!="object"&&(We={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Le,We);for(var Ze in Le)if(t.uninterestingTags[Ze]!==!0&&!(We[Ze]===!0||We[Ze]===Le[Ze]))return!0;return!1}function k(Le){var We={timestamp:Le.timestamp,version:Le.version,changeset:Le.changeset,user:Le.user,uid:Le.uid};for(var Ze in We)We[Ze]===void 0&&delete We[Ze];return We}for(var O=new Object,N=new Object,R=0;R<b.length;R++){var ce=b[R];O[ce.id]!==void 0&&(ce=t.deduplicator(ce,O[ce.id])),O[ce.id]=ce,typeof ce.tags<"u"&&S(ce.tags)&&(N[ce.id]=!0)}for(var R=0;R<A.length;R++)if(zn.isArray(A[R].members))for(var K=0;K<A[R].members.length;K++)A[R].members[K].type=="node"&&(N[A[R].members[K].ref]=!0);for(var H=new Object,G=new Object,R=0;R<w.length;R++){var se=w[R];if(H[se.id]&&(se=t.deduplicator(se,H[se.id])),H[se.id]=se,zn.isArray(se.nodes))for(var K=0;K<se.nodes.length;K++)typeof se.nodes[K]!="object"&&(G[se.nodes[K]]=!0,se.nodes[K]=O[se.nodes[K]])}var X=new Array;for(var V in O){var ce=O[V];(!G[V]||N[V])&&X.push(ce)}for(var C=new Array,R=0;R<A.length;R++){var F=A[R];C[F.id]&&(F=t.deduplicator(F,C[F.id])),C[F.id]=F}var D={node:{},way:{},relation:{}};for(var V in C){var F=C[V];if(!zn.isArray(F.members)){t.verbose&&console.warn("Relation",F.type+"/"+F.id,"ignored because it has no members");continue}for(var K=0;K<F.members.length;K++){var Q=F.members[K].type,Y=F.members[K].ref;if(typeof Y!="number"&&(Y=Y.replace("_fullGeom","")),!D[Q]){t.verbose&&console.warn("Relation",F.type+"/"+F.id,"member",Q+"/"+Y,"ignored because it has an invalid type");continue}typeof D[Q][Y]>"u"&&(D[Q][Y]=[]),D[Q][Y].push({role:F.members[K].role,rel:F.id,reltags:F.tags})}}var _e,we=[];for(R=0;R<X.length;R++){if(typeof X[R].lon>"u"||typeof X[R].lat>"u"){t.verbose&&console.warn("POI",X[R].type+"/"+X[R].id,"ignored because it lacks coordinates");continue}var pe={type:"Feature",id:X[R].type+"/"+X[R].id,properties:{type:X[R].type,id:X[R].id,tags:X[R].tags||{},relations:D.node[X[R].id]||[],meta:k(X[R])},geometry:{type:"Point",coordinates:[+X[R].lon,+X[R].lat]}};X[R].__is_center_placeholder&&(pe.properties.geometry="center"),i?i(pe):we.push(pe)}for(var oe=[],ue=[],R=0;R<A.length;R++)if(C[A[R].id]===A[R]){if(typeof A[R].tags<"u"&&(A[R].tags.type=="route"||A[R].tags.type=="waterway")){let We=function(Ze){var nt=!1,ct;ct=Ze.members.filter(function(St){return St.type==="way"}),ct=ct.map(function(St){var Gt=H[St.ref];if(Gt===void 0||Gt.nodes===void 0){t.verbose&&console.warn("Route "+Ze.type+"/"+Ze.id,"tainted by a missing or incomplete  way",St.type+"/"+St.ref),nt=!0;return}return{id:St.ref,role:St.role,way:Gt,nodes:Gt.nodes.filter(function(Ut){return Ut!==void 0?!0:(nt=!0,t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"tainted by a way",St.type+"/"+St.ref,"with a missing node"),!1)})}}),ct=zn.compact(ct);var vt;vt=rv(ct);var It=[];if(It=zn.compact(vt.map(function(St){return zn.compact(St.map(function(Gt){return[+Gt.lon,+Gt.lat]}))})),It.length==0)return t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"contains no coordinates"),!1;var ft={type:"Feature",id:Ze.type+"/"+Ze.id,properties:{type:Ze.type,id:Ze.id,tags:Ze.tags||{},relations:D[Ze.type][Ze.id]||[],meta:k(Ze)},geometry:{type:It.length===1?"LineString":"MultiLineString",coordinates:It.length===1?It[0]:It}};return nt&&(t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"is tainted"),ft.properties.tainted=!0),ft};var $e=We;if(!zn.isArray(A[R].members)){t.verbose&&console.warn("Route",A[R].type+"/"+A[R].id,"ignored because it has no members");continue}if(A[R].members.forEach(function(Ze){H[Ze.ref]&&!S(H[Ze.ref].tags)&&(H[Ze.ref].is_skippablerelationmember=!0)}),pe=We(A[R]),pe===!1){t.verbose&&console.warn("Route relation",A[R].type+"/"+A[R].id,"ignored because it has invalid geometry");continue}i?i(um(pe)):ue.push(pe)}if(typeof A[R].tags<"u"&&(A[R].tags.type=="multipolygon"||A[R].tags.type=="boundary")){let Ze=function(nt,ct){var vt=!1,It=ne?"way":"relation",ft=typeof nt.id=="number"?nt.id:+nt.id.replace("_fullGeom",""),St;St=ct.members.filter(function(j){return j.type==="way"}),St=St.map(function(j){var ge=H[j.ref];if(ge===void 0||ge.nodes===void 0){t.verbose&&console.warn("Multipolygon",It+"/"+ft,"tainted by a missing or incomplete way",j.type+"/"+j.ref),vt=!0;return}return{id:j.ref,role:j.role||"outer",way:ge,nodes:ge.nodes.filter(function(Be){return Be!==void 0?!0:(vt=!0,t.verbose&&console.warn("Multipolygon",It+"/"+ft,"tainted by a way",j.type+"/"+j.ref,"with a missing node"),!1)})}}),St=zn.compact(St);var Gt,Ut;Gt=rv(St.filter(function(j){return j.role==="outer"})),Ut=rv(St.filter(function(j){return j.role==="inner"}));var cn;function xn(j){var ge=function(L,U){for(var Ee=0;Ee<U.length;Ee++)if(et(U[Ee],L))return!0;return!1},Be=function(L){return L.map(function(U){return[+U.lat,+U.lon]})},et=function(L,U){for(var Ee=L[0],Ge=L[1],je=!1,at=0,jt=U.length-1;at<U.length;jt=at++){var Tn=U[at][0],vn=U[at][1],_t=U[jt][0],Rt=U[jt][1],nn=vn>Ge!=Rt>Ge&&Ee<(_t-Tn)*(Ge-vn)/(Rt-vn)+Tn;nn&&(je=!je)}return je},lt,le;for(j=Be(j),lt=0;lt<Gt.length;lt++)if(le=Be(Gt[lt]),ge(le,j))return lt}cn=Gt.map(function(j){return[j]});for(var yn=0;yn<Ut.length;yn++){var sn=xn(Ut[yn]);sn!==void 0?cn[sn].push(Ut[yn]):t.verbose&&console.warn("Multipolygon",It+"/"+ft,"contains an inner ring with no containing outer")}var gn=[];if(gn=zn.compact(cn.map(function(j){var ge=zn.compact(j.map(function(Be){if(Be.length<4){t.verbose&&console.warn("Multipolygon",It+"/"+ft,"contains a ring with less than four nodes");return}return zn.compact(Be.map(function(et){return[+et.lon,+et.lat]}))}));if(ge.length==0){t.verbose&&console.warn("Multipolygon",It+"/"+ft,"contains an empty ring cluster");return}return ge})),gn.length==0)return t.verbose&&console.warn("Multipolygon",It+"/"+ft,"contains no coordinates"),!1;var ie="MultiPolygon";gn.length===1&&(ie="Polygon",gn=gn[0]);var B={type:"Feature",id:nt.type+"/"+ft,properties:{type:nt.type,id:ft,tags:nt.tags||{},relations:D[nt.type][nt.id]||[],meta:k(nt)},geometry:{type:ie,coordinates:gn}};return vt&&(t.verbose&&console.warn("Multipolygon",It+"/"+ft,"is tainted"),B.properties.tainted=!0),B};var Ie=Ze;if(!zn.isArray(A[R].members)){t.verbose&&console.warn("Multipolygon",A[R].type+"/"+A[R].id,"ignored because it has no members");continue}for(var te=0,K=0;K<A[R].members.length;K++)A[R].members[K].role=="outer"?te++:t.verbose&&A[R].members[K].role!="inner"&&console.warn("Multipolygon",A[R].type+"/"+A[R].id,"member",A[R].members[K].type+"/"+A[R].members[K].ref,'ignored because it has an invalid role: "'+A[R].members[K].role+'"');if(A[R].members.forEach(function(nt){H[nt.ref]&&(nt.role==="outer"&&!S(H[nt.ref].tags,A[R].tags)&&(H[nt.ref].is_skippablerelationmember=!0),nt.role==="inner"&&!S(H[nt.ref].tags)&&(H[nt.ref].is_skippablerelationmember=!0))}),te==0){t.verbose&&console.warn("Multipolygon relation",A[R].type+"/"+A[R].id,"ignored because it has no outer ways");continue}var ne=!1;te==1&&!S(A[R].tags,{type:!0})&&(ne=!0);var pe=null;if(!ne)pe=Ze(A[R],A[R]);else{var de=A[R].members.filter(function(nt){return nt.role==="outer"})[0];if(de=H[de.ref],de===void 0){t.verbose&&console.warn("Multipolygon relation",A[R].type+"/"+A[R].id,"ignored because outer way",de.type+"/"+de.ref,"is missing");continue}de.is_skippablerelationmember=!0,pe=Ze(de,A[R])}if(pe===!1){t.verbose&&console.warn("Multipolygon relation",A[R].type+"/"+A[R].id,"ignored because it has invalid geometry");continue}i?i(um(pe)):ue.push(pe)}}for(var R=0;R<w.length;R++)if(H[w[R].id]===w[R]){if(!zn.isArray(w[R].nodes)){t.verbose&&console.warn("Way",w[R].type+"/"+w[R].id,"ignored because it has no nodes");continue}if(!w[R].is_skippablerelationmember){typeof w[R].id!="number"&&(w[R].id=+w[R].id.replace("_fullGeom","")),w[R].tainted=!1,w[R].hidden=!1;var Se=new Array;for(K=0;K<w[R].nodes.length;K++)typeof w[R].nodes[K]=="object"?Se.push([+w[R].nodes[K].lon,+w[R].nodes[K].lat]):(t.verbose&&console.warn("Way",w[R].type+"/"+w[R].id,"is tainted by an invalid node"),w[R].tainted=!0);if(Se.length<=1){t.verbose&&console.warn("Way",w[R].type+"/"+w[R].id,"ignored because it contains too few nodes");continue}var Te="LineString";typeof w[R].nodes[0]<"u"&&typeof w[R].nodes[w[R].nodes.length-1]<"u"&&w[R].nodes[0].id===w[R].nodes[w[R].nodes.length-1].id&&(typeof w[R].tags<"u"&&l(w[R].tags)||w[R].__is_bounds_placeholder)&&(Te="Polygon",Se=[Se]);var pe={type:"Feature",id:w[R].type+"/"+w[R].id,properties:{type:w[R].type,id:w[R].id,tags:w[R].tags||{},relations:D.way[w[R].id]||[],meta:k(w[R])},geometry:{type:Te,coordinates:Se}};w[R].tainted&&(t.verbose&&console.warn("Way",w[R].type+"/"+w[R].id,"is tainted"),pe.properties.tainted=!0),w[R].__is_bounds_placeholder&&(pe.properties.geometry="bounds"),i?i(um(pe)):Te=="LineString"?oe.push(pe):ue.push(pe)}}return i?!0:(_e={type:"FeatureCollection",features:[]},_e.features=_e.features.concat(ue),_e.features=_e.features.concat(oe),_e.features=_e.features.concat(we),t.flatProperties&&_e.features.forEach(function(Le){Le.properties=zn.merge(Le.properties.meta,Le.properties.tags,{id:Le.properties.type+"/"+Le.properties.id})}),_e=um(_e),_e)}function l(b){var w=t.polygonFeatures;if(typeof w=="function")return w(b);if(b.area==="no")return!1;for(var A in b){var S=b[A],k=w[A];if(!(typeof k>"u")&&S!=="no"&&(k===!0||k.included_values&&k.included_values[S]===!0||k.excluded_values&&k.excluded_values[S]!==!0))return!0}return!1}};function rv(e){for(var t=function(S){return S[0]},i=function(S){return S[S.length-1]},a=function(S,k){return S!==void 0&&k!==void 0&&S.id===k.id},c=[],d,g,l,b,w,A;e.length;)for(d=e.pop().nodes.slice(),c.push(d);e.length&&!a(t(d),i(d));){for(g=t(d),l=i(d),b=0;b<e.length;b++)if(A=e[b].nodes,a(l,t(A))){w=d.push,A=A.slice(1);break}else if(a(l,i(A))){w=d.push,A=A.slice(0,-1).reverse();break}else if(a(g,i(A))){w=d.unshift,A=A.slice(0,-1);break}else if(a(g,t(A))){w=d.unshift,A=A.slice(1).reverse();break}else A=w=null;if(!A)break;e.splice(b,1),w.apply(d,A)}return c}Lg.toGeojson=Lg;var rj=Lg;const ij=zd(rj),iv={type:"FeatureCollection",features:[]},IA=()=>{const[e,t]=yt.useState(!1),i=yt.useCallback(async(g,l,b)=>{var R,ce;if(e||(console.log(b),b<16))return iv;t(!0);let w=300;b>17&&(w=200),b>18&&(w=100),b>19&&(w=50),console.log("overpass: loading...");let A="[out:json]";A+=`[timeout:25];
`,A+='nwr["building"]',A+=`(around:${w},${g},${l});
`,A+="out meta geom;",console.log(A);const S=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(A)}`,{});if(S.status!==200)return t(!1),iv;const k=await S.json();console.log("overpass json elements: ",k.elements);const O=ij(k);console.log("overpass osmtogeojson raw: ",O);for await(const K of O.features){if(!K.properties)continue;K.id=K.properties.id.split("/")[1];const H=(R=k.elements.filter(se=>K.id?typeof K.id=="number"?se.id===K.id:se.id===parseInt(K.id):!1))==null?void 0:R[0];if(H&&(K.properties.tags=H.tags,K.properties.nodes=H.nodes),K.geometry.type==="Polygon"){const se=VR(K.geometry.coordinates);var N=XR(se);K.properties.center=N.geometry.coordinates}K.geometry.type==="Point"&&(K.properties.center=K.geometry.coordinates);const G=K.properties.uid;if(G){let se=localStorage.getItem(G+"-icon");if(se===null){const X=await Ds.getUser(G);(ce=X.img)!=null&&ce.href?(se=X.img.href,localStorage.setItem(G+"-icon",X.img.href)):localStorage.setItem(G+"-icon","")}K.properties.userIconHref=se||""}}return console.log("overpass osmtogeojson converted: ",O),console.log("overpass: loaded."),t(!1),O},[]),[a,c]=yt.useState(!1),d=yt.useCallback(async g=>{console.log("overpass: loading...",g),c(!0);const l=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(l);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(l)}`,{});if(b.status!==200){c(!1);return}const w=await b.json();console.log("overpass json parent elements: ",w.elements);const A=250,S=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${A});
      out;
      `;console.log(S);const k=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(S)}`,{});if(k.status!==200){c(!1);return}const O=await k.json();console.log("overpass json child elements: ",O.elements);const N=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${A});
      out;
      `;console.log(N);const R=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(N)}`,{});if(R.status!==200){c(!1);return}const ce=await R.json();return console.log("overpass json neighbour elements: ",ce.elements),c(!1),[...w.elements,...O.elements,...ce.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:d,loadingOverpass:e,loadingOverpassAdmin:a}},oj=()=>pt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[pt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),pt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),pt.jsxs("datalist",{id:"source-list",children:[pt.jsx("option",{value:"survey"}),pt.jsx("option",{value:"local knowledge"}),pt.jsx("option",{value:"extrapolation"}),pt.jsx("option",{value:"estimation from existing data"})]})]}),ov={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},sj=({feature:e,onCancel:t,onSubmit:i})=>{var _e,we,pe,oe;const{detectCountry:a,loadingCountry:c}=qR(),{fetchOverpassAdmin:d,loadingOverpassAdmin:g}=IA(),l=JSON.parse((_e=e.properties)==null?void 0:_e.center),[b,w]=yt.useState(void 0),[A,S]=yt.useState(),[k,O]=yt.useState(e),[N,R]=yt.useState(!1),[ce,K]=yt.useState(!1),[H,G]=yt.useState(!1),[se,X]=yt.useState(),[V,C]=yt.useState();yt.useEffect(()=>{R(Ds.isLoggedIn())},[]),yt.useEffect(()=>{(async()=>{var te,ne;const ue=await a(l[0],l[1]);if(w(ue),(te=ue==null?void 0:ue.properties)!=null&&te.ISO_A3&&oE[ue.properties.ISO_A3]){const de=oE[ue.properties.ISO_A3];S(de);const Se=de.defaultComment+" "+((ne=e.properties)==null?void 0:ne.id);C(Se)}})()},[e]),yt.useEffect(()=>{console.log(k.properties)},[k]);const F=yt.useCallback(async()=>{const ue=await fI.openReverseGeocoder([l[0],l[1]]);O(te=>{const ne={properties:{"addr:province":ue.prefecture,"addr:city":ue.city,...te.properties}};return te.properties=ne.properties,te})},[]),D=yt.useCallback(async()=>{if(!k.properties)return;k.properties.nodes;const ue=await d(JSON.parse(k.properties.nodes));console.log("onOverpassReverseGeocode",ue),X(ue)},[k]),Q=yt.useCallback(async ue=>{var Ie,Le,We;G(!0),ue.preventDefault();const te=new FormData(ue.currentTarget),ne=JSON.parse((Ie=e.properties)==null?void 0:Ie.tags);te.forEach((Ze,nt)=>{typeof Ze=="string"&&Ze.length>0&&nt!=="comment"&&nt!=="source"&&(ne[nt]=Ze)});const de={type:"way",id:e.id,version:(Le=e.properties)==null?void 0:Le.version,tags:ne,nodes:JSON.parse((We=e.properties)==null?void 0:We.nodes)};console.info(JSON.stringify(de,null,2));const Se={create:[],modify:[de],delete:[]},Te=te.get("comment");Te&&(ov.comment=Te.toString());const $e=te.get("source");$e&&(ov.source=$e.toString()),await Ds.uploadChangeset(ov,Se),G(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),Y=yt.useCallback(()=>{K(!0)},[]);return k.properties?pt.jsxs("div",{children:[pt.jsxs("div",{children:["OSM:"," ",pt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+k.properties.id,target:"_blank",children:k.properties.id})," | ",pt.jsx(uI,{feature:k}),A&&pt.jsxs("span",{children:[" | ","Address:"," ",pt.jsx(KR,{feature:k,fields:A})]})]}),c?pt.jsx(da,{icon:d_,spin:!0}):pt.jsx(pt.Fragment,{children:A?pt.jsxs("form",{onSubmit:Q,children:[pt.jsx("div",{className:"flex flex-wrap",children:pt.jsx(tv,{feature:k,fieldOption:A.postcodeField,onChange:Y})}),pt.jsx("div",{className:"flex flex-wrap",children:A.mainFields.map(ue=>pt.jsx(tv,{feature:k,fieldOption:ue,onChange:Y,suggestList:se},ue.key))}),pt.jsx("div",{className:"flex flex-wrap",children:A.detailFields.map(ue=>pt.jsx(tv,{feature:k,fieldOption:ue,onChange:Y},ue.key))}),pt.jsxs("div",{className:"flex flex-wrap",children:[pt.jsx(oj,{}),pt.jsx(YR,{defaultValue:V})]}),pt.jsx("div",{className:"flex flex-wrap",children:pt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[pt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((we=b==null?void 0:b.properties)==null?void 0:we.ISO_A3)==="JPN"&&pt.jsx("button",{type:"button",onClick:F,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),pt.jsxs("button",{type:"button",disabled:g,onClick:D,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",g&&pt.jsx(da,{icon:d_,spin:!0})]}),pt.jsx("button",{disabled:!N||H||!ce,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!N&&pt.jsxs(pt.Fragment,{children:[pt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),pt.jsx(lI,{})]})]})})]}):pt.jsx("div",{className:"flex flex-wrap",children:pt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[pt.jsxs("div",{className:"py-2",children:[pt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(pe=b==null?void 0:b.properties)==null?void 0:pe.NAME," (ISO code:",(oe=b==null?void 0:b.properties)==null?void 0:oe.ISO_A3,") does not support yet."]}),pt.jsx("p",{children:pt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),pt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function aj(e,t){const[i,a]=yt.useState(e);return yt.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const lj={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},uj={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function cj(){const e=yt.useRef(null),[t,i]=yt.useState(),a=aj(t,2500),c=yt.useRef(null),[d,g]=yt.useState({type:"FeatureCollection",features:[]}),[l,b]=yt.useState("auto"),[w,A]=yt.useState(),[S,k]=yt.useState([]),{fetchOverpassBuildings:O,loadingOverpass:N}=IA();yt.useEffect(()=>{setTimeout(()=>{var C;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(C=c.current)==null||C.trigger())},500)},[]);const R=yt.useCallback(C=>{const F=C.target.getCenter(),D=C.target.getZoom();i({zoom:D,latitude:F.lat,longitude:F.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),ce=yt.useCallback(C=>{i(C.viewState)},[]),K=yt.useCallback(C=>{i(C.viewState)},[]);yt.useEffect(()=>{(async()=>{if(!a)return;const C=a,F=await O(C.latitude,C.longitude,C.zoom);g(F)})()},[a]);const H=yt.useCallback(C=>{var _e;b("pointer");const{features:F,point:{x:D,y:Q}}=C,Y=F&&F[0];Y?((_e=e.current)==null||_e.setFeatureState({source:"buildings-source",id:Y.id},{hover:!0}),A({feature:Y,x:D,y:Q})):A(void 0)},[]),G=yt.useCallback(C=>{var F;b("auto"),(F=e.current)==null||F.querySourceFeatures("buildings-source").map(D=>{var Q;(Q=e.current)==null||Q.setFeatureState({source:"buildings-source",id:D.id},{hover:!1})}),A(void 0)},[]),se=yt.useCallback(C=>{var D;X();const F=C.features&&C.features[0];F&&((D=e.current)==null||D.setFeatureState({source:"buildings-source",id:F.id},{select:!0}),k([F]))},[]),X=yt.useCallback(()=>{var C;(C=e.current)==null||C.querySourceFeatures("buildings-source").map(F=>{var D;(D=e.current)==null||D.setFeatureState({source:"buildings-source",id:F.id},{select:!1})}),k([])},[]),V=yt.useMemo(()=>{let C=25;return t&&(C=t.zoom<18?20:t.zoom<19?25:35),d.features.map((F,D)=>!F.properties||!F.properties.center?null:pt.jsx(F4,{style:{cursor:"pointer"},longitude:F.properties.center[0],latitude:F.properties.center[1],anchor:"center",children:pt.jsx(aO,{feature:F,size:C})},`marker-${D}`))},[d,t]);return pt.jsxs("div",{children:[pt.jsx(Uz,{}),pt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:pt.jsx(cO,{viewState:t})}),pt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[S.length>0&&pt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:pt.jsx("div",{style:{padding:"10px"},children:S.map(C=>pt.jsx(sj,{feature:C,onCancel:X,onSubmit:X},C.id))})}),pt.jsxs(O4,{ref:e,...t,onMove:ce,onMoveEnd:K,onLoad:R,interactiveLayerIds:["buildings-layer-fill"],onClick:se,onMouseEnter:H,onMouseLeave:G,dragRotate:!1,boxZoom:!1,hash:!0,cursor:l,mapLib:IC,style:{width:"100%",height:"100%"},mapStyle:lj,children:[pt.jsx(B4,{id:"buildings-source",type:"geojson",data:d,children:pt.jsx(D4,{...uj})}),pt.jsx(R4,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),pt.jsx(j4,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),pt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?pt.jsx(da,{size:"2x",icon:Bz}):N?pt.jsx(da,{size:"2x",icon:d_,spin:!0}):pt.jsx(da,{size:"2x",icon:jz})}),V,w&&pt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:w.x+5,top:w.y+5},children:[pt.jsx(uI,{feature:w.feature}),pt.jsx("br",{}),pt.jsx(lO,{feature:w.feature}),pt.jsx($z,{feature:w.feature})]})]})]})]})}var AA={},ay={};ay.byteLength=dj;ay.toByteArray=mj;ay.fromByteArray=vj;var ua=[],as=[],hj=typeof Uint8Array<"u"?Uint8Array:Array,sv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Vc=0,fj=sv.length;Vc<fj;++Vc)ua[Vc]=sv[Vc],as[sv.charCodeAt(Vc)]=Vc;as[45]=62;as[95]=63;function PA(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function dj(e){var t=PA(e),i=t[0],a=t[1];return(i+a)*3/4-a}function pj(e,t,i){return(t+i)*3/4-i}function mj(e){var t,i=PA(e),a=i[0],c=i[1],d=new hj(pj(e,a,c)),g=0,l=c>0?a-4:a,b;for(b=0;b<l;b+=4)t=as[e.charCodeAt(b)]<<18|as[e.charCodeAt(b+1)]<<12|as[e.charCodeAt(b+2)]<<6|as[e.charCodeAt(b+3)],d[g++]=t>>16&255,d[g++]=t>>8&255,d[g++]=t&255;return c===2&&(t=as[e.charCodeAt(b)]<<2|as[e.charCodeAt(b+1)]>>4,d[g++]=t&255),c===1&&(t=as[e.charCodeAt(b)]<<10|as[e.charCodeAt(b+1)]<<4|as[e.charCodeAt(b+2)]>>2,d[g++]=t>>8&255,d[g++]=t&255),d}function gj(e){return ua[e>>18&63]+ua[e>>12&63]+ua[e>>6&63]+ua[e&63]}function yj(e,t,i){for(var a,c=[],d=t;d<i;d+=3)a=(e[d]<<16&16711680)+(e[d+1]<<8&65280)+(e[d+2]&255),c.push(gj(a));return c.join("")}function vj(e){for(var t,i=e.length,a=i%3,c=[],d=16383,g=0,l=i-a;g<l;g+=d)c.push(yj(e,g,g+d>l?l:g+d));return a===1?(t=e[i-1],c.push(ua[t>>2]+ua[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(ua[t>>10]+ua[t>>4&63]+ua[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=ay,i=ny,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=H,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,l.TYPED_ARRAY_SUPPORT=d(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const le=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(le,L),le.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function g(le){if(le>c)throw new RangeError('The value "'+le+'" is invalid for option "size"');const L=new Uint8Array(le);return Object.setPrototypeOf(L,l.prototype),L}function l(le,L,U){if(typeof le=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(le)}return b(le,L,U)}l.poolSize=8192;function b(le,L,U){if(typeof le=="string")return k(le,L);if(ArrayBuffer.isView(le))return N(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(j(le,ArrayBuffer)||le&&j(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(j(le,SharedArrayBuffer)||le&&j(le.buffer,SharedArrayBuffer)))return R(le,L,U);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ee=le.valueOf&&le.valueOf();if(Ee!=null&&Ee!==le)return l.from(Ee,L,U);const Ge=ce(le);if(Ge)return Ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return l.from(le[Symbol.toPrimitive]("string"),L,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}l.from=function(le,L,U){return b(le,L,U)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function w(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function A(le,L,U){return w(le),le<=0?g(le):L!==void 0?typeof U=="string"?g(le).fill(L,U):g(le).fill(L):g(le)}l.alloc=function(le,L,U){return A(le,L,U)};function S(le){return w(le),g(le<0?0:K(le)|0)}l.allocUnsafe=function(le){return S(le)},l.allocUnsafeSlow=function(le){return S(le)};function k(le,L){if((typeof L!="string"||L==="")&&(L="utf8"),!l.isEncoding(L))throw new TypeError("Unknown encoding: "+L);const U=G(le,L)|0;let Ee=g(U);const Ge=Ee.write(le,L);return Ge!==U&&(Ee=Ee.slice(0,Ge)),Ee}function O(le){const L=le.length<0?0:K(le.length)|0,U=g(L);for(let Ee=0;Ee<L;Ee+=1)U[Ee]=le[Ee]&255;return U}function N(le){if(j(le,Uint8Array)){const L=new Uint8Array(le);return R(L.buffer,L.byteOffset,L.byteLength)}return O(le)}function R(le,L,U){if(L<0||le.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<L+(U||0))throw new RangeError('"length" is outside of buffer bounds');let Ee;return L===void 0&&U===void 0?Ee=new Uint8Array(le):U===void 0?Ee=new Uint8Array(le,L):Ee=new Uint8Array(le,L,U),Object.setPrototypeOf(Ee,l.prototype),Ee}function ce(le){if(l.isBuffer(le)){const L=K(le.length)|0,U=g(L);return U.length===0||le.copy(U,0,0,L),U}if(le.length!==void 0)return typeof le.length!="number"||ge(le.length)?g(0):O(le);if(le.type==="Buffer"&&Array.isArray(le.data))return O(le.data)}function K(le){if(le>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return le|0}function H(le){return+le!=le&&(le=0),l.alloc(+le)}l.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==l.prototype},l.compare=function(L,U){if(j(L,Uint8Array)&&(L=l.from(L,L.offset,L.byteLength)),j(U,Uint8Array)&&(U=l.from(U,U.offset,U.byteLength)),!l.isBuffer(L)||!l.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===U)return 0;let Ee=L.length,Ge=U.length;for(let je=0,at=Math.min(Ee,Ge);je<at;++je)if(L[je]!==U[je]){Ee=L[je],Ge=U[je];break}return Ee<Ge?-1:Ge<Ee?1:0},l.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(L,U){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return l.alloc(0);let Ee;if(U===void 0)for(U=0,Ee=0;Ee<L.length;++Ee)U+=L[Ee].length;const Ge=l.allocUnsafe(U);let je=0;for(Ee=0;Ee<L.length;++Ee){let at=L[Ee];if(j(at,Uint8Array))je+at.length>Ge.length?(l.isBuffer(at)||(at=l.from(at)),at.copy(Ge,je)):Uint8Array.prototype.set.call(Ge,at,je);else if(l.isBuffer(at))at.copy(Ge,je);else throw new TypeError('"list" argument must be an Array of Buffers');je+=at.length}return Ge};function G(le,L){if(l.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||j(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);const U=le.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&U===0)return 0;let Ge=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return yn(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U*2;case"hex":return U>>>1;case"base64":return ie(le).length;default:if(Ge)return Ee?-1:yn(le).length;L=(""+L).toLowerCase(),Ge=!0}}l.byteLength=G;function se(le,L,U){let Ee=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0,L>>>=0,U<=L))return"";for(le||(le="utf8");;)switch(le){case"hex":return de(this,L,U);case"utf8":case"utf-8":return pe(this,L,U);case"ascii":return te(this,L,U);case"latin1":case"binary":return ne(this,L,U);case"base64":return we(this,L,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Se(this,L,U);default:if(Ee)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Ee=!0}}l.prototype._isBuffer=!0;function X(le,L,U){const Ee=le[L];le[L]=le[U],le[U]=Ee}l.prototype.swap16=function(){const L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let U=0;U<L;U+=2)X(this,U,U+1);return this},l.prototype.swap32=function(){const L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let U=0;U<L;U+=4)X(this,U,U+3),X(this,U+1,U+2);return this},l.prototype.swap64=function(){const L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let U=0;U<L;U+=8)X(this,U,U+7),X(this,U+1,U+6),X(this,U+2,U+5),X(this,U+3,U+4);return this},l.prototype.toString=function(){const L=this.length;return L===0?"":arguments.length===0?pe(this,0,L):se.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(L){if(!l.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:l.compare(this,L)===0},l.prototype.inspect=function(){let L="";const U=e.INSPECT_MAX_BYTES;return L=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(L+=" ... "),"<Buffer "+L+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(L,U,Ee,Ge,je){if(j(L,Uint8Array)&&(L=l.from(L,L.offset,L.byteLength)),!l.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(U===void 0&&(U=0),Ee===void 0&&(Ee=L?L.length:0),Ge===void 0&&(Ge=0),je===void 0&&(je=this.length),U<0||Ee>L.length||Ge<0||je>this.length)throw new RangeError("out of range index");if(Ge>=je&&U>=Ee)return 0;if(Ge>=je)return-1;if(U>=Ee)return 1;if(U>>>=0,Ee>>>=0,Ge>>>=0,je>>>=0,this===L)return 0;let at=je-Ge,jt=Ee-U;const Tn=Math.min(at,jt),vn=this.slice(Ge,je),_t=L.slice(U,Ee);for(let Rt=0;Rt<Tn;++Rt)if(vn[Rt]!==_t[Rt]){at=vn[Rt],jt=_t[Rt];break}return at<jt?-1:jt<at?1:0};function V(le,L,U,Ee,Ge){if(le.length===0)return-1;if(typeof U=="string"?(Ee=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),U=+U,ge(U)&&(U=Ge?0:le.length-1),U<0&&(U=le.length+U),U>=le.length){if(Ge)return-1;U=le.length-1}else if(U<0)if(Ge)U=0;else return-1;if(typeof L=="string"&&(L=l.from(L,Ee)),l.isBuffer(L))return L.length===0?-1:C(le,L,U,Ee,Ge);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?Ge?Uint8Array.prototype.indexOf.call(le,L,U):Uint8Array.prototype.lastIndexOf.call(le,L,U):C(le,[L],U,Ee,Ge);throw new TypeError("val must be string, number or Buffer")}function C(le,L,U,Ee,Ge){let je=1,at=le.length,jt=L.length;if(Ee!==void 0&&(Ee=String(Ee).toLowerCase(),Ee==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(le.length<2||L.length<2)return-1;je=2,at/=2,jt/=2,U/=2}function Tn(_t,Rt){return je===1?_t[Rt]:_t.readUInt16BE(Rt*je)}let vn;if(Ge){let _t=-1;for(vn=U;vn<at;vn++)if(Tn(le,vn)===Tn(L,_t===-1?0:vn-_t)){if(_t===-1&&(_t=vn),vn-_t+1===jt)return _t*je}else _t!==-1&&(vn-=vn-_t),_t=-1}else for(U+jt>at&&(U=at-jt),vn=U;vn>=0;vn--){let _t=!0;for(let Rt=0;Rt<jt;Rt++)if(Tn(le,vn+Rt)!==Tn(L,Rt)){_t=!1;break}if(_t)return vn}return-1}l.prototype.includes=function(L,U,Ee){return this.indexOf(L,U,Ee)!==-1},l.prototype.indexOf=function(L,U,Ee){return V(this,L,U,Ee,!0)},l.prototype.lastIndexOf=function(L,U,Ee){return V(this,L,U,Ee,!1)};function F(le,L,U,Ee){U=Number(U)||0;const Ge=le.length-U;Ee?(Ee=Number(Ee),Ee>Ge&&(Ee=Ge)):Ee=Ge;const je=L.length;Ee>je/2&&(Ee=je/2);let at;for(at=0;at<Ee;++at){const jt=parseInt(L.substr(at*2,2),16);if(ge(jt))return at;le[U+at]=jt}return at}function D(le,L,U,Ee){return B(yn(L,le.length-U),le,U,Ee)}function Q(le,L,U,Ee){return B(sn(L),le,U,Ee)}function Y(le,L,U,Ee){return B(ie(L),le,U,Ee)}function _e(le,L,U,Ee){return B(gn(L,le.length-U),le,U,Ee)}l.prototype.write=function(L,U,Ee,Ge){if(U===void 0)Ge="utf8",Ee=this.length,U=0;else if(Ee===void 0&&typeof U=="string")Ge=U,Ee=this.length,U=0;else if(isFinite(U))U=U>>>0,isFinite(Ee)?(Ee=Ee>>>0,Ge===void 0&&(Ge="utf8")):(Ge=Ee,Ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const je=this.length-U;if((Ee===void 0||Ee>je)&&(Ee=je),L.length>0&&(Ee<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ge||(Ge="utf8");let at=!1;for(;;)switch(Ge){case"hex":return F(this,L,U,Ee);case"utf8":case"utf-8":return D(this,L,U,Ee);case"ascii":case"latin1":case"binary":return Q(this,L,U,Ee);case"base64":return Y(this,L,U,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,L,U,Ee);default:if(at)throw new TypeError("Unknown encoding: "+Ge);Ge=(""+Ge).toLowerCase(),at=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function we(le,L,U){return L===0&&U===le.length?t.fromByteArray(le):t.fromByteArray(le.slice(L,U))}function pe(le,L,U){U=Math.min(le.length,U);const Ee=[];let Ge=L;for(;Ge<U;){const je=le[Ge];let at=null,jt=je>239?4:je>223?3:je>191?2:1;if(Ge+jt<=U){let Tn,vn,_t,Rt;switch(jt){case 1:je<128&&(at=je);break;case 2:Tn=le[Ge+1],(Tn&192)===128&&(Rt=(je&31)<<6|Tn&63,Rt>127&&(at=Rt));break;case 3:Tn=le[Ge+1],vn=le[Ge+2],(Tn&192)===128&&(vn&192)===128&&(Rt=(je&15)<<12|(Tn&63)<<6|vn&63,Rt>2047&&(Rt<55296||Rt>57343)&&(at=Rt));break;case 4:Tn=le[Ge+1],vn=le[Ge+2],_t=le[Ge+3],(Tn&192)===128&&(vn&192)===128&&(_t&192)===128&&(Rt=(je&15)<<18|(Tn&63)<<12|(vn&63)<<6|_t&63,Rt>65535&&Rt<1114112&&(at=Rt))}}at===null?(at=65533,jt=1):at>65535&&(at-=65536,Ee.push(at>>>10&1023|55296),at=56320|at&1023),Ee.push(at),Ge+=jt}return ue(Ee)}const oe=4096;function ue(le){const L=le.length;if(L<=oe)return String.fromCharCode.apply(String,le);let U="",Ee=0;for(;Ee<L;)U+=String.fromCharCode.apply(String,le.slice(Ee,Ee+=oe));return U}function te(le,L,U){let Ee="";U=Math.min(le.length,U);for(let Ge=L;Ge<U;++Ge)Ee+=String.fromCharCode(le[Ge]&127);return Ee}function ne(le,L,U){let Ee="";U=Math.min(le.length,U);for(let Ge=L;Ge<U;++Ge)Ee+=String.fromCharCode(le[Ge]);return Ee}function de(le,L,U){const Ee=le.length;(!L||L<0)&&(L=0),(!U||U<0||U>Ee)&&(U=Ee);let Ge="";for(let je=L;je<U;++je)Ge+=Be[le[je]];return Ge}function Se(le,L,U){const Ee=le.slice(L,U);let Ge="";for(let je=0;je<Ee.length-1;je+=2)Ge+=String.fromCharCode(Ee[je]+Ee[je+1]*256);return Ge}l.prototype.slice=function(L,U){const Ee=this.length;L=~~L,U=U===void 0?Ee:~~U,L<0?(L+=Ee,L<0&&(L=0)):L>Ee&&(L=Ee),U<0?(U+=Ee,U<0&&(U=0)):U>Ee&&(U=Ee),U<L&&(U=L);const Ge=this.subarray(L,U);return Object.setPrototypeOf(Ge,l.prototype),Ge};function Te(le,L,U){if(le%1!==0||le<0)throw new RangeError("offset is not uint");if(le+L>U)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(L,U,Ee){L=L>>>0,U=U>>>0,Ee||Te(L,U,this.length);let Ge=this[L],je=1,at=0;for(;++at<U&&(je*=256);)Ge+=this[L+at]*je;return Ge},l.prototype.readUintBE=l.prototype.readUIntBE=function(L,U,Ee){L=L>>>0,U=U>>>0,Ee||Te(L,U,this.length);let Ge=this[L+--U],je=1;for(;U>0&&(je*=256);)Ge+=this[L+--U]*je;return Ge},l.prototype.readUint8=l.prototype.readUInt8=function(L,U){return L=L>>>0,U||Te(L,1,this.length),this[L]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(L,U){return L=L>>>0,U||Te(L,2,this.length),this[L]|this[L+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(L,U){return L=L>>>0,U||Te(L,2,this.length),this[L]<<8|this[L+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(L,U){return L=L>>>0,U||Te(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(L,U){return L=L>>>0,U||Te(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},l.prototype.readBigUInt64LE=et(function(L){L=L>>>0,Gt(L,"offset");const U=this[L],Ee=this[L+7];(U===void 0||Ee===void 0)&&Ut(L,this.length-8);const Ge=U+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24,je=this[++L]+this[++L]*2**8+this[++L]*2**16+Ee*2**24;return BigInt(Ge)+(BigInt(je)<<BigInt(32))}),l.prototype.readBigUInt64BE=et(function(L){L=L>>>0,Gt(L,"offset");const U=this[L],Ee=this[L+7];(U===void 0||Ee===void 0)&&Ut(L,this.length-8);const Ge=U*2**24+this[++L]*2**16+this[++L]*2**8+this[++L],je=this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+Ee;return(BigInt(Ge)<<BigInt(32))+BigInt(je)}),l.prototype.readIntLE=function(L,U,Ee){L=L>>>0,U=U>>>0,Ee||Te(L,U,this.length);let Ge=this[L],je=1,at=0;for(;++at<U&&(je*=256);)Ge+=this[L+at]*je;return je*=128,Ge>=je&&(Ge-=Math.pow(2,8*U)),Ge},l.prototype.readIntBE=function(L,U,Ee){L=L>>>0,U=U>>>0,Ee||Te(L,U,this.length);let Ge=U,je=1,at=this[L+--Ge];for(;Ge>0&&(je*=256);)at+=this[L+--Ge]*je;return je*=128,at>=je&&(at-=Math.pow(2,8*U)),at},l.prototype.readInt8=function(L,U){return L=L>>>0,U||Te(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},l.prototype.readInt16LE=function(L,U){L=L>>>0,U||Te(L,2,this.length);const Ee=this[L]|this[L+1]<<8;return Ee&32768?Ee|4294901760:Ee},l.prototype.readInt16BE=function(L,U){L=L>>>0,U||Te(L,2,this.length);const Ee=this[L+1]|this[L]<<8;return Ee&32768?Ee|4294901760:Ee},l.prototype.readInt32LE=function(L,U){return L=L>>>0,U||Te(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},l.prototype.readInt32BE=function(L,U){return L=L>>>0,U||Te(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},l.prototype.readBigInt64LE=et(function(L){L=L>>>0,Gt(L,"offset");const U=this[L],Ee=this[L+7];(U===void 0||Ee===void 0)&&Ut(L,this.length-8);const Ge=this[L+4]+this[L+5]*2**8+this[L+6]*2**16+(Ee<<24);return(BigInt(Ge)<<BigInt(32))+BigInt(U+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24)}),l.prototype.readBigInt64BE=et(function(L){L=L>>>0,Gt(L,"offset");const U=this[L],Ee=this[L+7];(U===void 0||Ee===void 0)&&Ut(L,this.length-8);const Ge=(U<<24)+this[++L]*2**16+this[++L]*2**8+this[++L];return(BigInt(Ge)<<BigInt(32))+BigInt(this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+Ee)}),l.prototype.readFloatLE=function(L,U){return L=L>>>0,U||Te(L,4,this.length),i.read(this,L,!0,23,4)},l.prototype.readFloatBE=function(L,U){return L=L>>>0,U||Te(L,4,this.length),i.read(this,L,!1,23,4)},l.prototype.readDoubleLE=function(L,U){return L=L>>>0,U||Te(L,8,this.length),i.read(this,L,!0,52,8)},l.prototype.readDoubleBE=function(L,U){return L=L>>>0,U||Te(L,8,this.length),i.read(this,L,!1,52,8)};function $e(le,L,U,Ee,Ge,je){if(!l.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>Ge||L<je)throw new RangeError('"value" argument is out of bounds');if(U+Ee>le.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(L,U,Ee,Ge){if(L=+L,U=U>>>0,Ee=Ee>>>0,!Ge){const jt=Math.pow(2,8*Ee)-1;$e(this,L,U,Ee,jt,0)}let je=1,at=0;for(this[U]=L&255;++at<Ee&&(je*=256);)this[U+at]=L/je&255;return U+Ee},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(L,U,Ee,Ge){if(L=+L,U=U>>>0,Ee=Ee>>>0,!Ge){const jt=Math.pow(2,8*Ee)-1;$e(this,L,U,Ee,jt,0)}let je=Ee-1,at=1;for(this[U+je]=L&255;--je>=0&&(at*=256);)this[U+je]=L/at&255;return U+Ee},l.prototype.writeUint8=l.prototype.writeUInt8=function(L,U,Ee){return L=+L,U=U>>>0,Ee||$e(this,L,U,1,255,0),this[U]=L&255,U+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(L,U,Ee){return L=+L,U=U>>>0,Ee||$e(this,L,U,2,65535,0),this[U]=L&255,this[U+1]=L>>>8,U+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(L,U,Ee){return L=+L,U=U>>>0,Ee||$e(this,L,U,2,65535,0),this[U]=L>>>8,this[U+1]=L&255,U+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(L,U,Ee){return L=+L,U=U>>>0,Ee||$e(this,L,U,4,4294967295,0),this[U+3]=L>>>24,this[U+2]=L>>>16,this[U+1]=L>>>8,this[U]=L&255,U+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(L,U,Ee){return L=+L,U=U>>>0,Ee||$e(this,L,U,4,4294967295,0),this[U]=L>>>24,this[U+1]=L>>>16,this[U+2]=L>>>8,this[U+3]=L&255,U+4};function Ie(le,L,U,Ee,Ge){St(L,Ee,Ge,le,U,7);let je=Number(L&BigInt(4294967295));le[U++]=je,je=je>>8,le[U++]=je,je=je>>8,le[U++]=je,je=je>>8,le[U++]=je;let at=Number(L>>BigInt(32)&BigInt(4294967295));return le[U++]=at,at=at>>8,le[U++]=at,at=at>>8,le[U++]=at,at=at>>8,le[U++]=at,U}function Le(le,L,U,Ee,Ge){St(L,Ee,Ge,le,U,7);let je=Number(L&BigInt(4294967295));le[U+7]=je,je=je>>8,le[U+6]=je,je=je>>8,le[U+5]=je,je=je>>8,le[U+4]=je;let at=Number(L>>BigInt(32)&BigInt(4294967295));return le[U+3]=at,at=at>>8,le[U+2]=at,at=at>>8,le[U+1]=at,at=at>>8,le[U]=at,U+8}l.prototype.writeBigUInt64LE=et(function(L,U=0){return Ie(this,L,U,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=et(function(L,U=0){return Le(this,L,U,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(L,U,Ee,Ge){if(L=+L,U=U>>>0,!Ge){const Tn=Math.pow(2,8*Ee-1);$e(this,L,U,Ee,Tn-1,-Tn)}let je=0,at=1,jt=0;for(this[U]=L&255;++je<Ee&&(at*=256);)L<0&&jt===0&&this[U+je-1]!==0&&(jt=1),this[U+je]=(L/at>>0)-jt&255;return U+Ee},l.prototype.writeIntBE=function(L,U,Ee,Ge){if(L=+L,U=U>>>0,!Ge){const Tn=Math.pow(2,8*Ee-1);$e(this,L,U,Ee,Tn-1,-Tn)}let je=Ee-1,at=1,jt=0;for(this[U+je]=L&255;--je>=0&&(at*=256);)L<0&&jt===0&&this[U+je+1]!==0&&(jt=1),this[U+je]=(L/at>>0)-jt&255;return U+Ee},l.prototype.writeInt8=function(L,U,Ee){return L=+L,U=U>>>0,Ee||$e(this,L,U,1,127,-128),L<0&&(L=255+L+1),this[U]=L&255,U+1},l.prototype.writeInt16LE=function(L,U,Ee){return L=+L,U=U>>>0,Ee||$e(this,L,U,2,32767,-32768),this[U]=L&255,this[U+1]=L>>>8,U+2},l.prototype.writeInt16BE=function(L,U,Ee){return L=+L,U=U>>>0,Ee||$e(this,L,U,2,32767,-32768),this[U]=L>>>8,this[U+1]=L&255,U+2},l.prototype.writeInt32LE=function(L,U,Ee){return L=+L,U=U>>>0,Ee||$e(this,L,U,4,2147483647,-2147483648),this[U]=L&255,this[U+1]=L>>>8,this[U+2]=L>>>16,this[U+3]=L>>>24,U+4},l.prototype.writeInt32BE=function(L,U,Ee){return L=+L,U=U>>>0,Ee||$e(this,L,U,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[U]=L>>>24,this[U+1]=L>>>16,this[U+2]=L>>>8,this[U+3]=L&255,U+4},l.prototype.writeBigInt64LE=et(function(L,U=0){return Ie(this,L,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=et(function(L,U=0){return Le(this,L,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function We(le,L,U,Ee,Ge,je){if(U+Ee>le.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function Ze(le,L,U,Ee,Ge){return L=+L,U=U>>>0,Ge||We(le,L,U,4),i.write(le,L,U,Ee,23,4),U+4}l.prototype.writeFloatLE=function(L,U,Ee){return Ze(this,L,U,!0,Ee)},l.prototype.writeFloatBE=function(L,U,Ee){return Ze(this,L,U,!1,Ee)};function nt(le,L,U,Ee,Ge){return L=+L,U=U>>>0,Ge||We(le,L,U,8),i.write(le,L,U,Ee,52,8),U+8}l.prototype.writeDoubleLE=function(L,U,Ee){return nt(this,L,U,!0,Ee)},l.prototype.writeDoubleBE=function(L,U,Ee){return nt(this,L,U,!1,Ee)},l.prototype.copy=function(L,U,Ee,Ge){if(!l.isBuffer(L))throw new TypeError("argument should be a Buffer");if(Ee||(Ee=0),!Ge&&Ge!==0&&(Ge=this.length),U>=L.length&&(U=L.length),U||(U=0),Ge>0&&Ge<Ee&&(Ge=Ee),Ge===Ee||L.length===0||this.length===0)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(Ee<0||Ee>=this.length)throw new RangeError("Index out of range");if(Ge<0)throw new RangeError("sourceEnd out of bounds");Ge>this.length&&(Ge=this.length),L.length-U<Ge-Ee&&(Ge=L.length-U+Ee);const je=Ge-Ee;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(U,Ee,Ge):Uint8Array.prototype.set.call(L,this.subarray(Ee,Ge),U),je},l.prototype.fill=function(L,U,Ee,Ge){if(typeof L=="string"){if(typeof U=="string"?(Ge=U,U=0,Ee=this.length):typeof Ee=="string"&&(Ge=Ee,Ee=this.length),Ge!==void 0&&typeof Ge!="string")throw new TypeError("encoding must be a string");if(typeof Ge=="string"&&!l.isEncoding(Ge))throw new TypeError("Unknown encoding: "+Ge);if(L.length===1){const at=L.charCodeAt(0);(Ge==="utf8"&&at<128||Ge==="latin1")&&(L=at)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(U<0||this.length<U||this.length<Ee)throw new RangeError("Out of range index");if(Ee<=U)return this;U=U>>>0,Ee=Ee===void 0?this.length:Ee>>>0,L||(L=0);let je;if(typeof L=="number")for(je=U;je<Ee;++je)this[je]=L;else{const at=l.isBuffer(L)?L:l.from(L,Ge),jt=at.length;if(jt===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(je=0;je<Ee-U;++je)this[je+U]=at[je%jt]}return this};const ct={};function vt(le,L,U){ct[le]=class extends U{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${le}]`,this.stack,delete this.name}get code(){return le}set code(Ge){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ge,writable:!0})}toString(){return`${this.name} [${le}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?`${le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(le,L){return`The "${le}" argument must be of type number. Received type ${typeof L}`},TypeError),vt("ERR_OUT_OF_RANGE",function(le,L,U){let Ee=`The value of "${le}" is out of range.`,Ge=U;return Number.isInteger(U)&&Math.abs(U)>2**32?Ge=It(String(U)):typeof U=="bigint"&&(Ge=String(U),(U>BigInt(2)**BigInt(32)||U<-(BigInt(2)**BigInt(32)))&&(Ge=It(Ge)),Ge+="n"),Ee+=` It must be ${L}. Received ${Ge}`,Ee},RangeError);function It(le){let L="",U=le.length;const Ee=le[0]==="-"?1:0;for(;U>=Ee+4;U-=3)L=`_${le.slice(U-3,U)}${L}`;return`${le.slice(0,U)}${L}`}function ft(le,L,U){Gt(L,"offset"),(le[L]===void 0||le[L+U]===void 0)&&Ut(L,le.length-(U+1))}function St(le,L,U,Ee,Ge,je){if(le>U||le<L){const at=typeof L=="bigint"?"n":"";let jt;throw je>3?L===0||L===BigInt(0)?jt=`>= 0${at} and < 2${at} ** ${(je+1)*8}${at}`:jt=`>= -(2${at} ** ${(je+1)*8-1}${at}) and < 2 ** ${(je+1)*8-1}${at}`:jt=`>= ${L}${at} and <= ${U}${at}`,new ct.ERR_OUT_OF_RANGE("value",jt,le)}ft(Ee,Ge,je)}function Gt(le,L){if(typeof le!="number")throw new ct.ERR_INVALID_ARG_TYPE(L,"number",le)}function Ut(le,L,U){throw Math.floor(le)!==le?(Gt(le,U),new ct.ERR_OUT_OF_RANGE(U||"offset","an integer",le)):L<0?new ct.ERR_BUFFER_OUT_OF_BOUNDS:new ct.ERR_OUT_OF_RANGE(U||"offset",`>= ${U?1:0} and <= ${L}`,le)}const cn=/[^+/0-9A-Za-z-_]/g;function xn(le){if(le=le.split("=")[0],le=le.trim().replace(cn,""),le.length<2)return"";for(;le.length%4!==0;)le=le+"=";return le}function yn(le,L){L=L||1/0;let U;const Ee=le.length;let Ge=null;const je=[];for(let at=0;at<Ee;++at){if(U=le.charCodeAt(at),U>55295&&U<57344){if(!Ge){if(U>56319){(L-=3)>-1&&je.push(239,191,189);continue}else if(at+1===Ee){(L-=3)>-1&&je.push(239,191,189);continue}Ge=U;continue}if(U<56320){(L-=3)>-1&&je.push(239,191,189),Ge=U;continue}U=(Ge-55296<<10|U-56320)+65536}else Ge&&(L-=3)>-1&&je.push(239,191,189);if(Ge=null,U<128){if((L-=1)<0)break;je.push(U)}else if(U<2048){if((L-=2)<0)break;je.push(U>>6|192,U&63|128)}else if(U<65536){if((L-=3)<0)break;je.push(U>>12|224,U>>6&63|128,U&63|128)}else if(U<1114112){if((L-=4)<0)break;je.push(U>>18|240,U>>12&63|128,U>>6&63|128,U&63|128)}else throw new Error("Invalid code point")}return je}function sn(le){const L=[];for(let U=0;U<le.length;++U)L.push(le.charCodeAt(U)&255);return L}function gn(le,L){let U,Ee,Ge;const je=[];for(let at=0;at<le.length&&!((L-=2)<0);++at)U=le.charCodeAt(at),Ee=U>>8,Ge=U%256,je.push(Ge),je.push(Ee);return je}function ie(le){return t.toByteArray(xn(le))}function B(le,L,U,Ee){let Ge;for(Ge=0;Ge<Ee&&!(Ge+U>=L.length||Ge>=le.length);++Ge)L[Ge+U]=le[Ge];return Ge}function j(le,L){return le instanceof L||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===L.name}function ge(le){return le!==le}const Be=function(){const le="0123456789abcdef",L=new Array(256);for(let U=0;U<16;++U){const Ee=U*16;for(let Ge=0;Ge<16;++Ge)L[Ee+Ge]=le[U]+le[Ge]}return L}();function et(le){return typeof BigInt>"u"?lt:le}function lt(){throw new Error("BigInt not supported")}})(AA);window.Buffer=AA.Buffer;q3.render(pt.jsx(q_.StrictMode,{children:pt.jsx(cj,{})}),document.getElementById("root"));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

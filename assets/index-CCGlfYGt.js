function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
function uk(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const p=Object.getOwnPropertyDescriptor(a,c);p&&Object.defineProperty(e,c,p.get?p:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const d of p.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function a(c){if(c.ep)return;c.ep=!0;const p=i(c);fetch(c.href,p)}})();var Gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var eE={exports:{}},Bg={},tE={exports:{}},Un={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f=Symbol.for("react.element"),ck=Symbol.for("react.portal"),hk=Symbol.for("react.fragment"),dk=Symbol.for("react.strict_mode"),fk=Symbol.for("react.profiler"),pk=Symbol.for("react.provider"),mk=Symbol.for("react.context"),gk=Symbol.for("react.forward_ref"),yk=Symbol.for("react.suspense"),vk=Symbol.for("react.memo"),_k=Symbol.for("react.lazy"),rb=Symbol.iterator;function xk(e){return e===null||typeof e!="object"?null:(e=rb&&e[rb]||e["@@iterator"],typeof e=="function"?e:null)}var nE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rE=Object.assign,iE={};function Oh(e,t,i){this.props=e,this.context=t,this.refs=iE,this.updater=i||nE}Oh.prototype.isReactComponent={};Oh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Oh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function oE(){}oE.prototype=Oh.prototype;function V_(e,t,i){this.props=e,this.context=t,this.refs=iE,this.updater=i||nE}var G_=V_.prototype=new oE;G_.constructor=V_;rE(G_,Oh.prototype);G_.isPureReactComponent=!0;var ib=Array.isArray,sE=Object.prototype.hasOwnProperty,H_={current:null},aE={key:!0,ref:!0,__self:!0,__source:!0};function lE(e,t,i){var a,c={},p=null,d=null;if(t!=null)for(a in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(p=""+t.key),t)sE.call(t,a)&&!aE.hasOwnProperty(a)&&(c[a]=t[a]);var u=arguments.length-2;if(u===1)c.children=i;else if(1<u){for(var b=Array(u),C=0;C<u;C++)b[C]=arguments[C+2];c.children=b}if(e&&e.defaultProps)for(a in u=e.defaultProps,u)c[a]===void 0&&(c[a]=u[a]);return{$$typeof:$f,type:e,key:p,ref:d,props:c,_owner:H_.current}}function wk(e,t){return{$$typeof:$f,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function W_(e){return typeof e=="object"&&e!==null&&e.$$typeof===$f}function bk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var ob=/\/+/g;function e0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bk(""+e.key):t.toString(36)}function ym(e,t,i,a,c){var p=typeof e;(p==="undefined"||p==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(p){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case $f:case ck:d=!0}}if(d)return d=e,c=c(d),e=a===""?"."+e0(d,0):a,ib(c)?(i="",e!=null&&(i=e.replace(ob,"$&/")+"/"),ym(c,t,i,"",function(C){return C})):c!=null&&(W_(c)&&(c=wk(c,i+(!c.key||d&&d.key===c.key?"":(""+c.key).replace(ob,"$&/")+"/")+e)),t.push(c)),1;if(d=0,a=a===""?".":a+":",ib(e))for(var u=0;u<e.length;u++){p=e[u];var b=a+e0(p,u);d+=ym(p,t,i,b,c)}else if(b=xk(e),typeof b=="function")for(e=b.call(e),u=0;!(p=e.next()).done;)p=p.value,b=a+e0(p,u++),d+=ym(p,t,i,b,c);else if(p==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Op(e,t,i){if(e==null)return e;var a=[],c=0;return ym(e,a,"","",function(p){return t.call(i,p,c++)}),a}function Sk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var so={current:null},vm={transition:null},Ek={ReactCurrentDispatcher:so,ReactCurrentBatchConfig:vm,ReactCurrentOwner:H_};Un.Children={map:Op,forEach:function(e,t,i){Op(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Op(e,function(){t++}),t},toArray:function(e){return Op(e,function(t){return t})||[]},only:function(e){if(!W_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Un.Component=Oh;Un.Fragment=hk;Un.Profiler=fk;Un.PureComponent=V_;Un.StrictMode=dk;Un.Suspense=yk;Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ek;Un.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=rE({},e.props),c=e.key,p=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(p=t.ref,d=H_.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(b in t)sE.call(t,b)&&!aE.hasOwnProperty(b)&&(a[b]=t[b]===void 0&&u!==void 0?u[b]:t[b])}var b=arguments.length-2;if(b===1)a.children=i;else if(1<b){u=Array(b);for(var C=0;C<b;C++)u[C]=arguments[C+2];a.children=u}return{$$typeof:$f,type:e.type,key:c,ref:p,props:a,_owner:d}};Un.createContext=function(e){return e={$$typeof:mk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pk,_context:e},e.Consumer=e};Un.createElement=lE;Un.createFactory=function(e){var t=lE.bind(null,e);return t.type=e,t};Un.createRef=function(){return{current:null}};Un.forwardRef=function(e){return{$$typeof:gk,render:e}};Un.isValidElement=W_;Un.lazy=function(e){return{$$typeof:_k,_payload:{_status:-1,_result:e},_init:Sk}};Un.memo=function(e,t){return{$$typeof:vk,type:e,compare:t===void 0?null:t}};Un.startTransition=function(e){var t=vm.transition;vm.transition={};try{e()}finally{vm.transition=t}};Un.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Un.useCallback=function(e,t){return so.current.useCallback(e,t)};Un.useContext=function(e){return so.current.useContext(e)};Un.useDebugValue=function(){};Un.useDeferredValue=function(e){return so.current.useDeferredValue(e)};Un.useEffect=function(e,t){return so.current.useEffect(e,t)};Un.useId=function(){return so.current.useId()};Un.useImperativeHandle=function(e,t,i){return so.current.useImperativeHandle(e,t,i)};Un.useInsertionEffect=function(e,t){return so.current.useInsertionEffect(e,t)};Un.useLayoutEffect=function(e,t){return so.current.useLayoutEffect(e,t)};Un.useMemo=function(e,t){return so.current.useMemo(e,t)};Un.useReducer=function(e,t,i){return so.current.useReducer(e,t,i)};Un.useRef=function(e){return so.current.useRef(e)};Un.useState=function(e){return so.current.useState(e)};Un.useSyncExternalStore=function(e,t,i){return so.current.useSyncExternalStore(e,t,i)};Un.useTransition=function(){return so.current.useTransition()};Un.version="18.2.0";tE.exports=Un;var _t=tE.exports;const Z_=Uf(_t);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk=_t,Ck=Symbol.for("react.element"),Ik=Symbol.for("react.fragment"),Ak=Object.prototype.hasOwnProperty,Pk=Tk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kk={key:!0,ref:!0,__self:!0,__source:!0};function uE(e,t,i){var a,c={},p=null,d=null;i!==void 0&&(p=""+i),t.key!==void 0&&(p=""+t.key),t.ref!==void 0&&(d=t.ref);for(a in t)Ak.call(t,a)&&!kk.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:Ck,type:e,key:p,ref:d,props:c,_owner:Pk.current}}Bg.Fragment=Ik;Bg.jsx=uE;Bg.jsxs=uE;eE.exports=Bg;var yt=eE.exports,cE={exports:{}},Uo={},hE={exports:{}},dE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(te,he){var be=te.length;te.push(he);e:for(;0<be;){var Ee=be-1>>>1,Be=te[Ee];if(0<c(Be,he))te[Ee]=he,te[be]=Be,be=Ee;else break e}}function i(te){return te.length===0?null:te[0]}function a(te){if(te.length===0)return null;var he=te[0],be=te.pop();if(be!==he){te[0]=be;e:for(var Ee=0,Be=te.length,Pe=Be>>>1;Ee<Pe;){var ze=2*(Ee+1)-1,We=te[ze],He=ze+1,nt=te[He];if(0>c(We,be))He<Be&&0>c(nt,We)?(te[Ee]=nt,te[He]=be,Ee=He):(te[Ee]=We,te[ze]=be,Ee=ze);else if(He<Be&&0>c(nt,be))te[Ee]=nt,te[He]=be,Ee=He;else break e}}return he}function c(te,he){var be=te.sortIndex-he.sortIndex;return be!==0?be:te.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var d=Date,u=d.now();e.unstable_now=function(){return d.now()-u}}var b=[],C=[],A=1,w=null,T=3,L=!1,U=!1,F=!1,ce=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(te){for(var he=i(C);he!==null;){if(he.callback===null)a(C);else if(he.startTime<=te)a(C),he.sortIndex=he.expirationTime,t(b,he);else break;he=i(C)}}function ie(te){if(F=!1,$(te),!U)if(i(b)!==null)U=!0,le(X);else{var he=i(C);he!==null&&J(ie,he.startTime-te)}}function X(te,he){U=!1,F&&(F=!1,K(j),j=-1),L=!0;var be=T;try{for($(he),w=i(b);w!==null&&(!(w.expirationTime>he)||te&&!q());){var Ee=w.callback;if(typeof Ee=="function"){w.callback=null,T=w.priorityLevel;var Be=Ee(w.expirationTime<=he);he=e.unstable_now(),typeof Be=="function"?w.callback=Be:w===i(b)&&a(b),$(he)}else a(b);w=i(b)}if(w!==null)var Pe=!0;else{var ze=i(C);ze!==null&&J(ie,ze.startTime-he),Pe=!1}return Pe}finally{w=null,T=be,L=!1}}var V=!1,E=null,j=-1,B=5,ee=-1;function q(){return!(e.unstable_now()-ee<B)}function pe(){if(E!==null){var te=e.unstable_now();ee=te;var he=!0;try{he=E(!0,te)}finally{he?_e():(V=!1,E=null)}}else V=!1}var _e;if(typeof W=="function")_e=function(){W(pe)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,oe=de.port2;de.port1.onmessage=pe,_e=function(){oe.postMessage(null)}}else _e=function(){ce(pe,0)};function le(te){E=te,V||(V=!0,_e())}function J(te,he){j=ce(function(){te(e.unstable_now())},he)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){U||L||(U=!0,le(X))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return i(b)},e.unstable_next=function(te){switch(T){case 1:case 2:case 3:var he=3;break;default:he=T}var be=T;T=he;try{return te()}finally{T=be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,he){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var be=T;T=te;try{return he()}finally{T=be}},e.unstable_scheduleCallback=function(te,he,be){var Ee=e.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Ee+be:Ee):be=Ee,te){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=be+Be,te={id:A++,callback:he,priorityLevel:te,startTime:be,expirationTime:Be,sortIndex:-1},be>Ee?(te.sortIndex=be,t(C,te),i(b)===null&&te===i(C)&&(F?(K(j),j=-1):F=!0,J(ie,be-Ee))):(te.sortIndex=Be,t(b,te),U||L||(U=!0,le(X))),te},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(te){var he=T;return function(){var be=T;T=he;try{return te.apply(this,arguments)}finally{T=be}}}})(dE);hE.exports=dE;var Mk=hE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fE=_t,No=Mk;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pE=new Set,pf={};function tc(e,t){wh(e,t),wh(e+"Capture",t)}function wh(e,t){for(pf[e]=t,e=0;e<t.length;e++)pE.add(t[e])}var Ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ov=Object.prototype.hasOwnProperty,zk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sb={},ab={};function Rk(e){return ov.call(ab,e)?!0:ov.call(sb,e)?!1:zk.test(e)?ab[e]=!0:(sb[e]=!0,!1)}function Ok(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Lk(e,t,i,a){if(t===null||typeof t>"u"||Ok(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ao(e,t,i,a,c,p,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=d}var Ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ai[e]=new ao(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ai[t]=new ao(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ai[e]=new ao(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ai[e]=new ao(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ai[e]=new ao(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ai[e]=new ao(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ai[e]=new ao(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ai[e]=new ao(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ai[e]=new ao(e,5,!1,e.toLowerCase(),null,!1,!1)});var X_=/[\-:]([a-z])/g;function q_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(X_,q_);Ai[t]=new ao(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(X_,q_);Ai[t]=new ao(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(X_,q_);Ai[t]=new ao(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ai[e]=new ao(e,1,!1,e.toLowerCase(),null,!1,!1)});Ai.xlinkHref=new ao("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ai[e]=new ao(e,1,!1,e.toLowerCase(),null,!0,!0)});function K_(e,t,i,a){var c=Ai.hasOwnProperty(t)?Ai[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Lk(t,i,c,a)&&(i=null),a||c===null?Rk(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var ol=fE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lp=Symbol.for("react.element"),qc=Symbol.for("react.portal"),Kc=Symbol.for("react.fragment"),Y_=Symbol.for("react.strict_mode"),sv=Symbol.for("react.profiler"),mE=Symbol.for("react.provider"),gE=Symbol.for("react.context"),J_=Symbol.for("react.forward_ref"),av=Symbol.for("react.suspense"),lv=Symbol.for("react.suspense_list"),Q_=Symbol.for("react.memo"),Ul=Symbol.for("react.lazy"),yE=Symbol.for("react.offscreen"),lb=Symbol.iterator;function kd(e){return e===null||typeof e!="object"?null:(e=lb&&e[lb]||e["@@iterator"],typeof e=="function"?e:null)}var kr=Object.assign,t0;function Bd(e){if(t0===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);t0=t&&t[1]||""}return`
`+t0+e}var n0=!1;function r0(e,t){if(!e||n0)return"";n0=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var a=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){a=C}e.call(t.prototype)}else{try{throw Error()}catch(C){a=C}e()}}catch(C){if(C&&a&&typeof C.stack=="string"){for(var c=C.stack.split(`
`),p=a.stack.split(`
`),d=c.length-1,u=p.length-1;1<=d&&0<=u&&c[d]!==p[u];)u--;for(;1<=d&&0<=u;d--,u--)if(c[d]!==p[u]){if(d!==1||u!==1)do if(d--,u--,0>u||c[d]!==p[u]){var b=`
`+c[d].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=d&&0<=u);break}}}finally{n0=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Bd(e):""}function Fk(e){switch(e.tag){case 5:return Bd(e.type);case 16:return Bd("Lazy");case 13:return Bd("Suspense");case 19:return Bd("SuspenseList");case 0:case 2:case 15:return e=r0(e.type,!1),e;case 11:return e=r0(e.type.render,!1),e;case 1:return e=r0(e.type,!0),e;default:return""}}function uv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Kc:return"Fragment";case qc:return"Portal";case sv:return"Profiler";case Y_:return"StrictMode";case av:return"Suspense";case lv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gE:return(e.displayName||"Context")+".Consumer";case mE:return(e._context.displayName||"Context")+".Provider";case J_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q_:return t=e.displayName||null,t!==null?t:uv(e.type)||"Memo";case Ul:t=e._payload,e=e._init;try{return uv(e(t))}catch{}}return null}function jk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uv(t);case 8:return t===Y_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function iu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Dk(e){var t=vE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,p=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(d){a=""+d,p.call(this,d)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fp(e){e._valueTracker||(e._valueTracker=Dk(e))}function _E(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=vE(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Dm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function cv(e,t){var i=t.checked;return kr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function ub(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=iu(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xE(e,t){t=t.checked,t!=null&&K_(e,"checked",t,!1)}function hv(e,t){xE(e,t);var i=iu(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dv(e,t.type,i):t.hasOwnProperty("defaultValue")&&dv(e,t.type,iu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cb(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function dv(e,t,i){(t!=="number"||Dm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Nd=Array.isArray;function dh(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+iu(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function fv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return kr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(At(92));if(Nd(i)){if(1<i.length)throw Error(At(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:iu(i)}}function wE(e,t){var i=iu(t.value),a=iu(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function db(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function bE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?bE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var jp,SE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(jp=jp||document.createElement("div"),jp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=jp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function mf(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Yd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bk=["Webkit","ms","Moz","O"];Object.keys(Yd).forEach(function(e){Bk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yd[t]=Yd[e]})});function EE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Yd.hasOwnProperty(e)&&Yd[e]?(""+t).trim():t+"px"}function TE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=EE(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var Nk=kr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mv(e,t){if(t){if(Nk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function gv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yv=null;function e1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vv=null,fh=null,ph=null;function fb(e){if(e=Hf(e)){if(typeof vv!="function")throw Error(At(280));var t=e.stateNode;t&&(t=Gg(t),vv(e.stateNode,e.type,t))}}function CE(e){fh?ph?ph.push(e):ph=[e]:fh=e}function IE(){if(fh){var e=fh,t=ph;if(ph=fh=null,fb(e),t)for(e=0;e<t.length;e++)fb(t[e])}}function AE(e,t){return e(t)}function PE(){}var i0=!1;function kE(e,t,i){if(i0)return e(t,i);i0=!0;try{return AE(e,t,i)}finally{i0=!1,(fh!==null||ph!==null)&&(PE(),IE())}}function gf(e,t){var i=e.stateNode;if(i===null)return null;var a=Gg(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(At(231,t,typeof i));return i}var _v=!1;if(Ya)try{var Md={};Object.defineProperty(Md,"passive",{get:function(){_v=!0}}),window.addEventListener("test",Md,Md),window.removeEventListener("test",Md,Md)}catch{_v=!1}function Uk(e,t,i,a,c,p,d,u,b){var C=Array.prototype.slice.call(arguments,3);try{t.apply(i,C)}catch(A){this.onError(A)}}var Jd=!1,Bm=null,Nm=!1,xv=null,$k={onError:function(e){Jd=!0,Bm=e}};function Vk(e,t,i,a,c,p,d,u,b){Jd=!1,Bm=null,Uk.apply($k,arguments)}function Gk(e,t,i,a,c,p,d,u,b){if(Vk.apply(this,arguments),Jd){if(Jd){var C=Bm;Jd=!1,Bm=null}else throw Error(At(198));Nm||(Nm=!0,xv=C)}}function nc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function ME(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pb(e){if(nc(e)!==e)throw Error(At(188))}function Hk(e){var t=e.alternate;if(!t){if(t=nc(e),t===null)throw Error(At(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var p=c.alternate;if(p===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===p.child){for(p=c.child;p;){if(p===i)return pb(c),e;if(p===a)return pb(c),t;p=p.sibling}throw Error(At(188))}if(i.return!==a.return)i=c,a=p;else{for(var d=!1,u=c.child;u;){if(u===i){d=!0,i=c,a=p;break}if(u===a){d=!0,a=c,i=p;break}u=u.sibling}if(!d){for(u=p.child;u;){if(u===i){d=!0,i=p,a=c;break}if(u===a){d=!0,a=p,i=c;break}u=u.sibling}if(!d)throw Error(At(189))}}if(i.alternate!==a)throw Error(At(190))}if(i.tag!==3)throw Error(At(188));return i.stateNode.current===i?e:t}function zE(e){return e=Hk(e),e!==null?RE(e):null}function RE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=RE(e);if(t!==null)return t;e=e.sibling}return null}var OE=No.unstable_scheduleCallback,mb=No.unstable_cancelCallback,Wk=No.unstable_shouldYield,Zk=No.unstable_requestPaint,Hr=No.unstable_now,Xk=No.unstable_getCurrentPriorityLevel,t1=No.unstable_ImmediatePriority,LE=No.unstable_UserBlockingPriority,Um=No.unstable_NormalPriority,qk=No.unstable_LowPriority,FE=No.unstable_IdlePriority,Ng=null,aa=null;function Kk(e){if(aa&&typeof aa.onCommitFiberRoot=="function")try{aa.onCommitFiberRoot(Ng,e,void 0,(e.current.flags&128)===128)}catch{}}var ks=Math.clz32?Math.clz32:Qk,Yk=Math.log,Jk=Math.LN2;function Qk(e){return e>>>=0,e===0?32:31-(Yk(e)/Jk|0)|0}var Dp=64,Bp=4194304;function Ud(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $m(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,p=e.pingedLanes,d=i&268435455;if(d!==0){var u=d&~c;u!==0?a=Ud(u):(p&=d,p!==0&&(a=Ud(p)))}else d=i&~c,d!==0?a=Ud(d):p!==0&&(a=Ud(p));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,p=t&-t,c>=p||c===16&&(p&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-ks(t),c=1<<i,a|=e[i],t&=~c;return a}function eM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tM(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,p=e.pendingLanes;0<p;){var d=31-ks(p),u=1<<d,b=c[d];b===-1?(!(u&i)||u&a)&&(c[d]=eM(u,t)):b<=t&&(e.expiredLanes|=u),p&=~u}}function wv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jE(){var e=Dp;return Dp<<=1,!(Dp&4194240)&&(Dp=64),e}function o0(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Vf(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ks(t),e[t]=i}function nM(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-ks(i),p=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~p}}function n1(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-ks(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var er=0;function DE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var BE,r1,NE,UE,$E,bv=!1,Np=[],Kl=null,Yl=null,Jl=null,yf=new Map,vf=new Map,Hl=[],rM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gb(e,t){switch(e){case"focusin":case"focusout":Kl=null;break;case"dragenter":case"dragleave":Yl=null;break;case"mouseover":case"mouseout":Jl=null;break;case"pointerover":case"pointerout":yf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vf.delete(t.pointerId)}}function zd(e,t,i,a,c,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:p,targetContainers:[c]},t!==null&&(t=Hf(t),t!==null&&r1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function iM(e,t,i,a,c){switch(t){case"focusin":return Kl=zd(Kl,e,t,i,a,c),!0;case"dragenter":return Yl=zd(Yl,e,t,i,a,c),!0;case"mouseover":return Jl=zd(Jl,e,t,i,a,c),!0;case"pointerover":var p=c.pointerId;return yf.set(p,zd(yf.get(p)||null,e,t,i,a,c)),!0;case"gotpointercapture":return p=c.pointerId,vf.set(p,zd(vf.get(p)||null,e,t,i,a,c)),!0}return!1}function VE(e){var t=Bu(e.target);if(t!==null){var i=nc(t);if(i!==null){if(t=i.tag,t===13){if(t=ME(i),t!==null){e.blockedOn=t,$E(e.priority,function(){NE(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _m(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Sv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);yv=a,i.target.dispatchEvent(a),yv=null}else return t=Hf(i),t!==null&&r1(t),e.blockedOn=i,!1;t.shift()}return!0}function yb(e,t,i){_m(e)&&i.delete(t)}function oM(){bv=!1,Kl!==null&&_m(Kl)&&(Kl=null),Yl!==null&&_m(Yl)&&(Yl=null),Jl!==null&&_m(Jl)&&(Jl=null),yf.forEach(yb),vf.forEach(yb)}function Rd(e,t){e.blockedOn===t&&(e.blockedOn=null,bv||(bv=!0,No.unstable_scheduleCallback(No.unstable_NormalPriority,oM)))}function _f(e){function t(c){return Rd(c,e)}if(0<Np.length){Rd(Np[0],e);for(var i=1;i<Np.length;i++){var a=Np[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Kl!==null&&Rd(Kl,e),Yl!==null&&Rd(Yl,e),Jl!==null&&Rd(Jl,e),yf.forEach(t),vf.forEach(t),i=0;i<Hl.length;i++)a=Hl[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Hl.length&&(i=Hl[0],i.blockedOn===null);)VE(i),i.blockedOn===null&&Hl.shift()}var mh=ol.ReactCurrentBatchConfig,Vm=!0;function sM(e,t,i,a){var c=er,p=mh.transition;mh.transition=null;try{er=1,i1(e,t,i,a)}finally{er=c,mh.transition=p}}function aM(e,t,i,a){var c=er,p=mh.transition;mh.transition=null;try{er=4,i1(e,t,i,a)}finally{er=c,mh.transition=p}}function i1(e,t,i,a){if(Vm){var c=Sv(e,t,i,a);if(c===null)m0(e,t,a,Gm,i),gb(e,a);else if(iM(c,e,t,i,a))a.stopPropagation();else if(gb(e,a),t&4&&-1<rM.indexOf(e)){for(;c!==null;){var p=Hf(c);if(p!==null&&BE(p),p=Sv(e,t,i,a),p===null&&m0(e,t,a,Gm,i),p===c)break;c=p}c!==null&&a.stopPropagation()}else m0(e,t,a,null,i)}}var Gm=null;function Sv(e,t,i,a){if(Gm=null,e=e1(a),e=Bu(e),e!==null)if(t=nc(e),t===null)e=null;else if(i=t.tag,i===13){if(e=ME(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gm=e,null}function GE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xk()){case t1:return 1;case LE:return 4;case Um:case qk:return 16;case FE:return 536870912;default:return 16}default:return 16}}var Zl=null,o1=null,xm=null;function HE(){if(xm)return xm;var e,t=o1,i=t.length,a,c="value"in Zl?Zl.value:Zl.textContent,p=c.length;for(e=0;e<i&&t[e]===c[e];e++);var d=i-e;for(a=1;a<=d&&t[i-a]===c[p-a];a++);return xm=c.slice(e,1<a?1-a:void 0)}function wm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Up(){return!0}function vb(){return!1}function $o(e){function t(i,a,c,p,d){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=p,this.target=d,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(i=e[u],this[u]=i?i(p):p[u]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Up:vb,this.isPropagationStopped=vb,this}return kr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Up)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Up)},persist:function(){},isPersistent:Up}),t}var Lh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},s1=$o(Lh),Gf=kr({},Lh,{view:0,detail:0}),lM=$o(Gf),s0,a0,Od,Ug=kr({},Gf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:a1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Od&&(Od&&e.type==="mousemove"?(s0=e.screenX-Od.screenX,a0=e.screenY-Od.screenY):a0=s0=0,Od=e),s0)},movementY:function(e){return"movementY"in e?e.movementY:a0}}),_b=$o(Ug),uM=kr({},Ug,{dataTransfer:0}),cM=$o(uM),hM=kr({},Gf,{relatedTarget:0}),l0=$o(hM),dM=kr({},Lh,{animationName:0,elapsedTime:0,pseudoElement:0}),fM=$o(dM),pM=kr({},Lh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mM=$o(pM),gM=kr({},Lh,{data:0}),xb=$o(gM),yM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_M={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_M[e])?!!t[e]:!1}function a1(){return xM}var wM=kr({},Gf,{key:function(e){if(e.key){var t=yM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:a1,charCode:function(e){return e.type==="keypress"?wm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bM=$o(wM),SM=kr({},Ug,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wb=$o(SM),EM=kr({},Gf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:a1}),TM=$o(EM),CM=kr({},Lh,{propertyName:0,elapsedTime:0,pseudoElement:0}),IM=$o(CM),AM=kr({},Ug,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),PM=$o(AM),kM=[9,13,27,32],l1=Ya&&"CompositionEvent"in window,Qd=null;Ya&&"documentMode"in document&&(Qd=document.documentMode);var MM=Ya&&"TextEvent"in window&&!Qd,WE=Ya&&(!l1||Qd&&8<Qd&&11>=Qd),bb=" ",Sb=!1;function ZE(e,t){switch(e){case"keyup":return kM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yc=!1;function zM(e,t){switch(e){case"compositionend":return XE(t);case"keypress":return t.which!==32?null:(Sb=!0,bb);case"textInput":return e=t.data,e===bb&&Sb?null:e;default:return null}}function RM(e,t){if(Yc)return e==="compositionend"||!l1&&ZE(e,t)?(e=HE(),xm=o1=Zl=null,Yc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return WE&&t.locale!=="ko"?null:t.data;default:return null}}var OM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!OM[e.type]:t==="textarea"}function qE(e,t,i,a){CE(a),t=Hm(t,"onChange"),0<t.length&&(i=new s1("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var ef=null,xf=null;function LM(e){sT(e,0)}function $g(e){var t=eh(e);if(_E(t))return e}function FM(e,t){if(e==="change")return t}var KE=!1;if(Ya){var u0;if(Ya){var c0="oninput"in document;if(!c0){var Tb=document.createElement("div");Tb.setAttribute("oninput","return;"),c0=typeof Tb.oninput=="function"}u0=c0}else u0=!1;KE=u0&&(!document.documentMode||9<document.documentMode)}function Cb(){ef&&(ef.detachEvent("onpropertychange",YE),xf=ef=null)}function YE(e){if(e.propertyName==="value"&&$g(xf)){var t=[];qE(t,xf,e,e1(e)),kE(LM,t)}}function jM(e,t,i){e==="focusin"?(Cb(),ef=t,xf=i,ef.attachEvent("onpropertychange",YE)):e==="focusout"&&Cb()}function DM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $g(xf)}function BM(e,t){if(e==="click")return $g(t)}function NM(e,t){if(e==="input"||e==="change")return $g(t)}function UM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zs=typeof Object.is=="function"?Object.is:UM;function wf(e,t){if(zs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!ov.call(t,c)||!zs(e[c],t[c]))return!1}return!0}function Ib(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ab(e,t){var i=Ib(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ib(i)}}function JE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?JE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function QE(){for(var e=window,t=Dm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Dm(e.document)}return t}function u1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $M(e){var t=QE(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&JE(i.ownerDocument.documentElement,i)){if(a!==null&&u1(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,p=Math.min(a.start,c);a=a.end===void 0?p:Math.min(a.end,c),!e.extend&&p>a&&(c=a,a=p,p=c),c=Ab(i,p);var d=Ab(i,a);c&&d&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),p>a?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var VM=Ya&&"documentMode"in document&&11>=document.documentMode,Jc=null,Ev=null,tf=null,Tv=!1;function Pb(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Tv||Jc==null||Jc!==Dm(a)||(a=Jc,"selectionStart"in a&&u1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),tf&&wf(tf,a)||(tf=a,a=Hm(Ev,"onSelect"),0<a.length&&(t=new s1("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Jc)))}function $p(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Qc={animationend:$p("Animation","AnimationEnd"),animationiteration:$p("Animation","AnimationIteration"),animationstart:$p("Animation","AnimationStart"),transitionend:$p("Transition","TransitionEnd")},h0={},eT={};Ya&&(eT=document.createElement("div").style,"AnimationEvent"in window||(delete Qc.animationend.animation,delete Qc.animationiteration.animation,delete Qc.animationstart.animation),"TransitionEvent"in window||delete Qc.transitionend.transition);function Vg(e){if(h0[e])return h0[e];if(!Qc[e])return e;var t=Qc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in eT)return h0[e]=t[i];return e}var tT=Vg("animationend"),nT=Vg("animationiteration"),rT=Vg("animationstart"),iT=Vg("transitionend"),oT=new Map,kb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cu(e,t){oT.set(e,t),tc(t,[e])}for(var d0=0;d0<kb.length;d0++){var f0=kb[d0],GM=f0.toLowerCase(),HM=f0[0].toUpperCase()+f0.slice(1);cu(GM,"on"+HM)}cu(tT,"onAnimationEnd");cu(nT,"onAnimationIteration");cu(rT,"onAnimationStart");cu("dblclick","onDoubleClick");cu("focusin","onFocus");cu("focusout","onBlur");cu(iT,"onTransitionEnd");wh("onMouseEnter",["mouseout","mouseover"]);wh("onMouseLeave",["mouseout","mouseover"]);wh("onPointerEnter",["pointerout","pointerover"]);wh("onPointerLeave",["pointerout","pointerover"]);tc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tc("onBeforeInput",["compositionend","keypress","textInput","paste"]);tc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WM=new Set("cancel close invalid load scroll toggle".split(" ").concat($d));function Mb(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,Gk(a,t,void 0,e),e.currentTarget=null}function sT(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var p=void 0;if(t)for(var d=a.length-1;0<=d;d--){var u=a[d],b=u.instance,C=u.currentTarget;if(u=u.listener,b!==p&&c.isPropagationStopped())break e;Mb(c,u,C),p=b}else for(d=0;d<a.length;d++){if(u=a[d],b=u.instance,C=u.currentTarget,u=u.listener,b!==p&&c.isPropagationStopped())break e;Mb(c,u,C),p=b}}}if(Nm)throw e=xv,Nm=!1,xv=null,e}function yr(e,t){var i=t[kv];i===void 0&&(i=t[kv]=new Set);var a=e+"__bubble";i.has(a)||(aT(t,e,2,!1),i.add(a))}function p0(e,t,i){var a=0;t&&(a|=4),aT(i,e,a,t)}var Vp="_reactListening"+Math.random().toString(36).slice(2);function bf(e){if(!e[Vp]){e[Vp]=!0,pE.forEach(function(i){i!=="selectionchange"&&(WM.has(i)||p0(i,!1,e),p0(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vp]||(t[Vp]=!0,p0("selectionchange",!1,t))}}function aT(e,t,i,a){switch(GE(t)){case 1:var c=sM;break;case 4:c=aM;break;default:c=i1}i=c.bind(null,t,i,e),c=void 0,!_v||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function m0(e,t,i,a,c){var p=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var u=a.stateNode.containerInfo;if(u===c||u.nodeType===8&&u.parentNode===c)break;if(d===4)for(d=a.return;d!==null;){var b=d.tag;if((b===3||b===4)&&(b=d.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;d=d.return}for(;u!==null;){if(d=Bu(u),d===null)return;if(b=d.tag,b===5||b===6){a=p=d;continue e}u=u.parentNode}}a=a.return}kE(function(){var C=p,A=e1(i),w=[];e:{var T=oT.get(e);if(T!==void 0){var L=s1,U=e;switch(e){case"keypress":if(wm(i)===0)break e;case"keydown":case"keyup":L=bM;break;case"focusin":U="focus",L=l0;break;case"focusout":U="blur",L=l0;break;case"beforeblur":case"afterblur":L=l0;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=_b;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=cM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=TM;break;case tT:case nT:case rT:L=fM;break;case iT:L=IM;break;case"scroll":L=lM;break;case"wheel":L=PM;break;case"copy":case"cut":case"paste":L=mM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=wb}var F=(t&4)!==0,ce=!F&&e==="scroll",K=F?T!==null?T+"Capture":null:T;F=[];for(var W=C,$;W!==null;){$=W;var ie=$.stateNode;if($.tag===5&&ie!==null&&($=ie,K!==null&&(ie=gf(W,K),ie!=null&&F.push(Sf(W,ie,$)))),ce)break;W=W.return}0<F.length&&(T=new L(T,U,null,i,A),w.push({event:T,listeners:F}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",T&&i!==yv&&(U=i.relatedTarget||i.fromElement)&&(Bu(U)||U[Ja]))break e;if((L||T)&&(T=A.window===A?A:(T=A.ownerDocument)?T.defaultView||T.parentWindow:window,L?(U=i.relatedTarget||i.toElement,L=C,U=U?Bu(U):null,U!==null&&(ce=nc(U),U!==ce||U.tag!==5&&U.tag!==6)&&(U=null)):(L=null,U=C),L!==U)){if(F=_b,ie="onMouseLeave",K="onMouseEnter",W="mouse",(e==="pointerout"||e==="pointerover")&&(F=wb,ie="onPointerLeave",K="onPointerEnter",W="pointer"),ce=L==null?T:eh(L),$=U==null?T:eh(U),T=new F(ie,W+"leave",L,i,A),T.target=ce,T.relatedTarget=$,ie=null,Bu(A)===C&&(F=new F(K,W+"enter",U,i,A),F.target=$,F.relatedTarget=ce,ie=F),ce=ie,L&&U)t:{for(F=L,K=U,W=0,$=F;$;$=Uc($))W++;for($=0,ie=K;ie;ie=Uc(ie))$++;for(;0<W-$;)F=Uc(F),W--;for(;0<$-W;)K=Uc(K),$--;for(;W--;){if(F===K||K!==null&&F===K.alternate)break t;F=Uc(F),K=Uc(K)}F=null}else F=null;L!==null&&zb(w,T,L,F,!1),U!==null&&ce!==null&&zb(w,ce,U,F,!0)}}e:{if(T=C?eh(C):window,L=T.nodeName&&T.nodeName.toLowerCase(),L==="select"||L==="input"&&T.type==="file")var X=FM;else if(Eb(T))if(KE)X=NM;else{X=DM;var V=jM}else(L=T.nodeName)&&L.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(X=BM);if(X&&(X=X(e,C))){qE(w,X,i,A);break e}V&&V(e,T,C),e==="focusout"&&(V=T._wrapperState)&&V.controlled&&T.type==="number"&&dv(T,"number",T.value)}switch(V=C?eh(C):window,e){case"focusin":(Eb(V)||V.contentEditable==="true")&&(Jc=V,Ev=C,tf=null);break;case"focusout":tf=Ev=Jc=null;break;case"mousedown":Tv=!0;break;case"contextmenu":case"mouseup":case"dragend":Tv=!1,Pb(w,i,A);break;case"selectionchange":if(VM)break;case"keydown":case"keyup":Pb(w,i,A)}var E;if(l1)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Yc?ZE(e,i)&&(j="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(j="onCompositionStart");j&&(WE&&i.locale!=="ko"&&(Yc||j!=="onCompositionStart"?j==="onCompositionEnd"&&Yc&&(E=HE()):(Zl=A,o1="value"in Zl?Zl.value:Zl.textContent,Yc=!0)),V=Hm(C,j),0<V.length&&(j=new xb(j,e,null,i,A),w.push({event:j,listeners:V}),E?j.data=E:(E=XE(i),E!==null&&(j.data=E)))),(E=MM?zM(e,i):RM(e,i))&&(C=Hm(C,"onBeforeInput"),0<C.length&&(A=new xb("onBeforeInput","beforeinput",null,i,A),w.push({event:A,listeners:C}),A.data=E))}sT(w,t)})}function Sf(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Hm(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,p=c.stateNode;c.tag===5&&p!==null&&(c=p,p=gf(e,i),p!=null&&a.unshift(Sf(e,p,c)),p=gf(e,t),p!=null&&a.push(Sf(e,p,c))),e=e.return}return a}function Uc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zb(e,t,i,a,c){for(var p=t._reactName,d=[];i!==null&&i!==a;){var u=i,b=u.alternate,C=u.stateNode;if(b!==null&&b===a)break;u.tag===5&&C!==null&&(u=C,c?(b=gf(i,p),b!=null&&d.unshift(Sf(i,b,u))):c||(b=gf(i,p),b!=null&&d.push(Sf(i,b,u)))),i=i.return}d.length!==0&&e.push({event:t,listeners:d})}var ZM=/\r\n?/g,XM=/\u0000|\uFFFD/g;function Rb(e){return(typeof e=="string"?e:""+e).replace(ZM,`
`).replace(XM,"")}function Gp(e,t,i){if(t=Rb(t),Rb(e)!==t&&i)throw Error(At(425))}function Wm(){}var Cv=null,Iv=null;function Av(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pv=typeof setTimeout=="function"?setTimeout:void 0,qM=typeof clearTimeout=="function"?clearTimeout:void 0,Ob=typeof Promise=="function"?Promise:void 0,KM=typeof queueMicrotask=="function"?queueMicrotask:typeof Ob<"u"?function(e){return Ob.resolve(null).then(e).catch(YM)}:Pv;function YM(e){setTimeout(function(){throw e})}function g0(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),_f(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);_f(t)}function Ql(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Lb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Fh=Math.random().toString(36).slice(2),na="__reactFiber$"+Fh,Ef="__reactProps$"+Fh,Ja="__reactContainer$"+Fh,kv="__reactEvents$"+Fh,JM="__reactListeners$"+Fh,QM="__reactHandles$"+Fh;function Bu(e){var t=e[na];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ja]||i[na]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Lb(e);e!==null;){if(i=e[na])return i;e=Lb(e)}return t}e=i,i=e.parentNode}return null}function Hf(e){return e=e[na]||e[Ja],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function eh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function Gg(e){return e[Ef]||null}var Mv=[],th=-1;function hu(e){return{current:e}}function _r(e){0>th||(e.current=Mv[th],Mv[th]=null,th--)}function fr(e,t){th++,Mv[th]=e.current,e.current=t}var ou={},Gi=hu(ou),vo=hu(!1),Wu=ou;function bh(e,t){var i=e.type.contextTypes;if(!i)return ou;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},p;for(p in i)c[p]=t[p];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function _o(e){return e=e.childContextTypes,e!=null}function Zm(){_r(vo),_r(Gi)}function Fb(e,t,i){if(Gi.current!==ou)throw Error(At(168));fr(Gi,t),fr(vo,i)}function lT(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(At(108,jk(e)||"Unknown",c));return kr({},i,a)}function Xm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ou,Wu=Gi.current,fr(Gi,e),fr(vo,vo.current),!0}function jb(e,t,i){var a=e.stateNode;if(!a)throw Error(At(169));i?(e=lT(e,t,Wu),a.__reactInternalMemoizedMergedChildContext=e,_r(vo),_r(Gi),fr(Gi,e)):_r(vo),fr(vo,i)}var Ha=null,Hg=!1,y0=!1;function uT(e){Ha===null?Ha=[e]:Ha.push(e)}function e3(e){Hg=!0,uT(e)}function du(){if(!y0&&Ha!==null){y0=!0;var e=0,t=er;try{var i=Ha;for(er=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Ha=null,Hg=!1}catch(c){throw Ha!==null&&(Ha=Ha.slice(e+1)),OE(t1,du),c}finally{er=t,y0=!1}}return null}var nh=[],rh=0,qm=null,Km=0,rs=[],is=0,Zu=null,Xa=1,qa="";function Fu(e,t){nh[rh++]=Km,nh[rh++]=qm,qm=e,Km=t}function cT(e,t,i){rs[is++]=Xa,rs[is++]=qa,rs[is++]=Zu,Zu=e;var a=Xa;e=qa;var c=32-ks(a)-1;a&=~(1<<c),i+=1;var p=32-ks(t)+c;if(30<p){var d=c-c%5;p=(a&(1<<d)-1).toString(32),a>>=d,c-=d,Xa=1<<32-ks(t)+c|i<<c|a,qa=p+e}else Xa=1<<p|i<<c|a,qa=e}function c1(e){e.return!==null&&(Fu(e,1),cT(e,1,0))}function h1(e){for(;e===qm;)qm=nh[--rh],nh[rh]=null,Km=nh[--rh],nh[rh]=null;for(;e===Zu;)Zu=rs[--is],rs[is]=null,qa=rs[--is],rs[is]=null,Xa=rs[--is],rs[is]=null}var Bo=null,Do=null,Sr=!1,Ts=null;function hT(e,t){var i=ss(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Db(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bo=e,Do=Ql(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bo=e,Do=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Zu!==null?{id:Xa,overflow:qa}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=ss(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Bo=e,Do=null,!0):!1;default:return!1}}function zv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rv(e){if(Sr){var t=Do;if(t){var i=t;if(!Db(e,t)){if(zv(e))throw Error(At(418));t=Ql(i.nextSibling);var a=Bo;t&&Db(e,t)?hT(a,i):(e.flags=e.flags&-4097|2,Sr=!1,Bo=e)}}else{if(zv(e))throw Error(At(418));e.flags=e.flags&-4097|2,Sr=!1,Bo=e}}}function Bb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bo=e}function Hp(e){if(e!==Bo)return!1;if(!Sr)return Bb(e),Sr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Av(e.type,e.memoizedProps)),t&&(t=Do)){if(zv(e))throw dT(),Error(At(418));for(;t;)hT(e,t),t=Ql(t.nextSibling)}if(Bb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Do=Ql(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Do=null}}else Do=Bo?Ql(e.stateNode.nextSibling):null;return!0}function dT(){for(var e=Do;e;)e=Ql(e.nextSibling)}function Sh(){Do=Bo=null,Sr=!1}function d1(e){Ts===null?Ts=[e]:Ts.push(e)}var t3=ol.ReactCurrentBatchConfig;function Ss(e,t){if(e&&e.defaultProps){t=kr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Ym=hu(null),Jm=null,ih=null,f1=null;function p1(){f1=ih=Jm=null}function m1(e){var t=Ym.current;_r(Ym),e._currentValue=t}function Ov(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function gh(e,t){Jm=e,f1=ih=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yo=!0),e.firstContext=null)}function us(e){var t=e._currentValue;if(f1!==e)if(e={context:e,memoizedValue:t,next:null},ih===null){if(Jm===null)throw Error(At(308));ih=e,Jm.dependencies={lanes:0,firstContext:e}}else ih=ih.next=e;return t}var Nu=null;function g1(e){Nu===null?Nu=[e]:Nu.push(e)}function fT(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,g1(t)):(i.next=c.next,c.next=i),t.interleaved=i,Qa(e,a)}function Qa(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var $l=!1;function y1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ka(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function eu(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Wn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Qa(e,i)}return c=a.interleaved,c===null?(t.next=t,g1(a)):(t.next=c.next,c.next=t),a.interleaved=t,Qa(e,i)}function bm(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,n1(e,i)}}function Nb(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?c=p=d:p=p.next=d,i=i.next}while(i!==null);p===null?c=p=t:p=p.next=t}else c=p=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:p,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Qm(e,t,i,a){var c=e.updateQueue;$l=!1;var p=c.firstBaseUpdate,d=c.lastBaseUpdate,u=c.shared.pending;if(u!==null){c.shared.pending=null;var b=u,C=b.next;b.next=null,d===null?p=C:d.next=C,d=b;var A=e.alternate;A!==null&&(A=A.updateQueue,u=A.lastBaseUpdate,u!==d&&(u===null?A.firstBaseUpdate=C:u.next=C,A.lastBaseUpdate=b))}if(p!==null){var w=c.baseState;d=0,A=C=b=null,u=p;do{var T=u.lane,L=u.eventTime;if((a&T)===T){A!==null&&(A=A.next={eventTime:L,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var U=e,F=u;switch(T=t,L=i,F.tag){case 1:if(U=F.payload,typeof U=="function"){w=U.call(L,w,T);break e}w=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=F.payload,T=typeof U=="function"?U.call(L,w,T):U,T==null)break e;w=kr({},w,T);break e;case 2:$l=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,T=c.effects,T===null?c.effects=[u]:T.push(u))}else L={eventTime:L,lane:T,tag:u.tag,payload:u.payload,callback:u.callback,next:null},A===null?(C=A=L,b=w):A=A.next=L,d|=T;if(u=u.next,u===null){if(u=c.shared.pending,u===null)break;T=u,u=T.next,T.next=null,c.lastBaseUpdate=T,c.shared.pending=null}}while(!0);if(A===null&&(b=w),c.baseState=b,c.firstBaseUpdate=C,c.lastBaseUpdate=A,t=c.shared.interleaved,t!==null){c=t;do d|=c.lane,c=c.next;while(c!==t)}else p===null&&(c.shared.lanes=0);qu|=d,e.lanes=d,e.memoizedState=w}}function Ub(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(At(191,c));c.call(a)}}}var mT=new fE.Component().refs;function Lv(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:kr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Wg={isMounted:function(e){return(e=e._reactInternals)?nc(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=no(),c=nu(e),p=Ka(a,c);p.payload=t,i!=null&&(p.callback=i),t=eu(e,p,c),t!==null&&(Ms(t,e,c,a),bm(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=no(),c=nu(e),p=Ka(a,c);p.tag=1,p.payload=t,i!=null&&(p.callback=i),t=eu(e,p,c),t!==null&&(Ms(t,e,c,a),bm(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=no(),a=nu(e),c=Ka(i,a);c.tag=2,t!=null&&(c.callback=t),t=eu(e,c,a),t!==null&&(Ms(t,e,a,i),bm(t,e,a))}};function $b(e,t,i,a,c,p,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,p,d):t.prototype&&t.prototype.isPureReactComponent?!wf(i,a)||!wf(c,p):!0}function gT(e,t,i){var a=!1,c=ou,p=t.contextType;return typeof p=="object"&&p!==null?p=us(p):(c=_o(t)?Wu:Gi.current,a=t.contextTypes,p=(a=a!=null)?bh(e,c):ou),t=new t(i,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wg,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=p),t}function Vb(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&Wg.enqueueReplaceState(t,t.state,null)}function Fv(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=mT,y1(e);var p=t.contextType;typeof p=="object"&&p!==null?c.context=us(p):(p=_o(t)?Wu:Gi.current,c.context=bh(e,p)),c.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(Lv(e,t,p,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Wg.enqueueReplaceState(c,c.state,null),Qm(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Ld(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(At(309));var a=i.stateNode}if(!a)throw Error(At(147,e));var c=a,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(d){var u=c.refs;u===mT&&(u=c.refs={}),d===null?delete u[p]:u[p]=d},t._stringRef=p,t)}if(typeof e!="string")throw Error(At(284));if(!i._owner)throw Error(At(290,e))}return e}function Wp(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gb(e){var t=e._init;return t(e._payload)}function yT(e){function t(K,W){if(e){var $=K.deletions;$===null?(K.deletions=[W],K.flags|=16):$.push(W)}}function i(K,W){if(!e)return null;for(;W!==null;)t(K,W),W=W.sibling;return null}function a(K,W){for(K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function c(K,W){return K=ru(K,W),K.index=0,K.sibling=null,K}function p(K,W,$){return K.index=$,e?($=K.alternate,$!==null?($=$.index,$<W?(K.flags|=2,W):$):(K.flags|=2,W)):(K.flags|=1048576,W)}function d(K){return e&&K.alternate===null&&(K.flags|=2),K}function u(K,W,$,ie){return W===null||W.tag!==6?(W=E0($,K.mode,ie),W.return=K,W):(W=c(W,$),W.return=K,W)}function b(K,W,$,ie){var X=$.type;return X===Kc?A(K,W,$.props.children,ie,$.key):W!==null&&(W.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Ul&&Gb(X)===W.type)?(ie=c(W,$.props),ie.ref=Ld(K,W,$),ie.return=K,ie):(ie=Am($.type,$.key,$.props,null,K.mode,ie),ie.ref=Ld(K,W,$),ie.return=K,ie)}function C(K,W,$,ie){return W===null||W.tag!==4||W.stateNode.containerInfo!==$.containerInfo||W.stateNode.implementation!==$.implementation?(W=T0($,K.mode,ie),W.return=K,W):(W=c(W,$.children||[]),W.return=K,W)}function A(K,W,$,ie,X){return W===null||W.tag!==7?(W=Hu($,K.mode,ie,X),W.return=K,W):(W=c(W,$),W.return=K,W)}function w(K,W,$){if(typeof W=="string"&&W!==""||typeof W=="number")return W=E0(""+W,K.mode,$),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Lp:return $=Am(W.type,W.key,W.props,null,K.mode,$),$.ref=Ld(K,null,W),$.return=K,$;case qc:return W=T0(W,K.mode,$),W.return=K,W;case Ul:var ie=W._init;return w(K,ie(W._payload),$)}if(Nd(W)||kd(W))return W=Hu(W,K.mode,$,null),W.return=K,W;Wp(K,W)}return null}function T(K,W,$,ie){var X=W!==null?W.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return X!==null?null:u(K,W,""+$,ie);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Lp:return $.key===X?b(K,W,$,ie):null;case qc:return $.key===X?C(K,W,$,ie):null;case Ul:return X=$._init,T(K,W,X($._payload),ie)}if(Nd($)||kd($))return X!==null?null:A(K,W,$,ie,null);Wp(K,$)}return null}function L(K,W,$,ie,X){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return K=K.get($)||null,u(W,K,""+ie,X);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Lp:return K=K.get(ie.key===null?$:ie.key)||null,b(W,K,ie,X);case qc:return K=K.get(ie.key===null?$:ie.key)||null,C(W,K,ie,X);case Ul:var V=ie._init;return L(K,W,$,V(ie._payload),X)}if(Nd(ie)||kd(ie))return K=K.get($)||null,A(W,K,ie,X,null);Wp(W,ie)}return null}function U(K,W,$,ie){for(var X=null,V=null,E=W,j=W=0,B=null;E!==null&&j<$.length;j++){E.index>j?(B=E,E=null):B=E.sibling;var ee=T(K,E,$[j],ie);if(ee===null){E===null&&(E=B);break}e&&E&&ee.alternate===null&&t(K,E),W=p(ee,W,j),V===null?X=ee:V.sibling=ee,V=ee,E=B}if(j===$.length)return i(K,E),Sr&&Fu(K,j),X;if(E===null){for(;j<$.length;j++)E=w(K,$[j],ie),E!==null&&(W=p(E,W,j),V===null?X=E:V.sibling=E,V=E);return Sr&&Fu(K,j),X}for(E=a(K,E);j<$.length;j++)B=L(E,K,j,$[j],ie),B!==null&&(e&&B.alternate!==null&&E.delete(B.key===null?j:B.key),W=p(B,W,j),V===null?X=B:V.sibling=B,V=B);return e&&E.forEach(function(q){return t(K,q)}),Sr&&Fu(K,j),X}function F(K,W,$,ie){var X=kd($);if(typeof X!="function")throw Error(At(150));if($=X.call($),$==null)throw Error(At(151));for(var V=X=null,E=W,j=W=0,B=null,ee=$.next();E!==null&&!ee.done;j++,ee=$.next()){E.index>j?(B=E,E=null):B=E.sibling;var q=T(K,E,ee.value,ie);if(q===null){E===null&&(E=B);break}e&&E&&q.alternate===null&&t(K,E),W=p(q,W,j),V===null?X=q:V.sibling=q,V=q,E=B}if(ee.done)return i(K,E),Sr&&Fu(K,j),X;if(E===null){for(;!ee.done;j++,ee=$.next())ee=w(K,ee.value,ie),ee!==null&&(W=p(ee,W,j),V===null?X=ee:V.sibling=ee,V=ee);return Sr&&Fu(K,j),X}for(E=a(K,E);!ee.done;j++,ee=$.next())ee=L(E,K,j,ee.value,ie),ee!==null&&(e&&ee.alternate!==null&&E.delete(ee.key===null?j:ee.key),W=p(ee,W,j),V===null?X=ee:V.sibling=ee,V=ee);return e&&E.forEach(function(pe){return t(K,pe)}),Sr&&Fu(K,j),X}function ce(K,W,$,ie){if(typeof $=="object"&&$!==null&&$.type===Kc&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case Lp:e:{for(var X=$.key,V=W;V!==null;){if(V.key===X){if(X=$.type,X===Kc){if(V.tag===7){i(K,V.sibling),W=c(V,$.props.children),W.return=K,K=W;break e}}else if(V.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Ul&&Gb(X)===V.type){i(K,V.sibling),W=c(V,$.props),W.ref=Ld(K,V,$),W.return=K,K=W;break e}i(K,V);break}else t(K,V);V=V.sibling}$.type===Kc?(W=Hu($.props.children,K.mode,ie,$.key),W.return=K,K=W):(ie=Am($.type,$.key,$.props,null,K.mode,ie),ie.ref=Ld(K,W,$),ie.return=K,K=ie)}return d(K);case qc:e:{for(V=$.key;W!==null;){if(W.key===V)if(W.tag===4&&W.stateNode.containerInfo===$.containerInfo&&W.stateNode.implementation===$.implementation){i(K,W.sibling),W=c(W,$.children||[]),W.return=K,K=W;break e}else{i(K,W);break}else t(K,W);W=W.sibling}W=T0($,K.mode,ie),W.return=K,K=W}return d(K);case Ul:return V=$._init,ce(K,W,V($._payload),ie)}if(Nd($))return U(K,W,$,ie);if(kd($))return F(K,W,$,ie);Wp(K,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,W!==null&&W.tag===6?(i(K,W.sibling),W=c(W,$),W.return=K,K=W):(i(K,W),W=E0($,K.mode,ie),W.return=K,K=W),d(K)):i(K,W)}return ce}var Eh=yT(!0),vT=yT(!1),Wf={},la=hu(Wf),Tf=hu(Wf),Cf=hu(Wf);function Uu(e){if(e===Wf)throw Error(At(174));return e}function v1(e,t){switch(fr(Cf,t),fr(Tf,e),fr(la,Wf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pv(t,e)}_r(la),fr(la,t)}function Th(){_r(la),_r(Tf),_r(Cf)}function _T(e){Uu(Cf.current);var t=Uu(la.current),i=pv(t,e.type);t!==i&&(fr(Tf,e),fr(la,i))}function _1(e){Tf.current===e&&(_r(la),_r(Tf))}var Ir=hu(0);function eg(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var v0=[];function x1(){for(var e=0;e<v0.length;e++)v0[e]._workInProgressVersionPrimary=null;v0.length=0}var Sm=ol.ReactCurrentDispatcher,_0=ol.ReactCurrentBatchConfig,Xu=0,Pr=null,ti=null,di=null,tg=!1,nf=!1,If=0,n3=0;function Bi(){throw Error(At(321))}function w1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!zs(e[i],t[i]))return!1;return!0}function b1(e,t,i,a,c,p){if(Xu=p,Pr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sm.current=e===null||e.memoizedState===null?s3:a3,e=i(a,c),nf){p=0;do{if(nf=!1,If=0,25<=p)throw Error(At(301));p+=1,di=ti=null,t.updateQueue=null,Sm.current=l3,e=i(a,c)}while(nf)}if(Sm.current=ng,t=ti!==null&&ti.next!==null,Xu=0,di=ti=Pr=null,tg=!1,t)throw Error(At(300));return e}function S1(){var e=If!==0;return If=0,e}function ta(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?Pr.memoizedState=di=e:di=di.next=e,di}function cs(){if(ti===null){var e=Pr.alternate;e=e!==null?e.memoizedState:null}else e=ti.next;var t=di===null?Pr.memoizedState:di.next;if(t!==null)di=t,ti=e;else{if(e===null)throw Error(At(310));ti=e,e={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},di===null?Pr.memoizedState=di=e:di=di.next=e}return di}function Af(e,t){return typeof t=="function"?t(e):t}function x0(e){var t=cs(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=ti,c=a.baseQueue,p=i.pending;if(p!==null){if(c!==null){var d=c.next;c.next=p.next,p.next=d}a.baseQueue=c=p,i.pending=null}if(c!==null){p=c.next,a=a.baseState;var u=d=null,b=null,C=p;do{var A=C.lane;if((Xu&A)===A)b!==null&&(b=b.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),a=C.hasEagerState?C.eagerState:e(a,C.action);else{var w={lane:A,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};b===null?(u=b=w,d=a):b=b.next=w,Pr.lanes|=A,qu|=A}C=C.next}while(C!==null&&C!==p);b===null?d=a:b.next=u,zs(a,t.memoizedState)||(yo=!0),t.memoizedState=a,t.baseState=d,t.baseQueue=b,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do p=c.lane,Pr.lanes|=p,qu|=p,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function w0(e){var t=cs(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,p=t.memoizedState;if(c!==null){i.pending=null;var d=c=c.next;do p=e(p,d.action),d=d.next;while(d!==c);zs(p,t.memoizedState)||(yo=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),i.lastRenderedState=p}return[p,a]}function xT(){}function wT(e,t){var i=Pr,a=cs(),c=t(),p=!zs(a.memoizedState,c);if(p&&(a.memoizedState=c,yo=!0),a=a.queue,E1(ET.bind(null,i,a,e),[e]),a.getSnapshot!==t||p||di!==null&&di.memoizedState.tag&1){if(i.flags|=2048,Pf(9,ST.bind(null,i,a,c,t),void 0,null),fi===null)throw Error(At(349));Xu&30||bT(i,t,c)}return c}function bT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Pr.updateQueue,t===null?(t={lastEffect:null,stores:null},Pr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function ST(e,t,i,a){t.value=i,t.getSnapshot=a,TT(t)&&CT(e)}function ET(e,t,i){return i(function(){TT(t)&&CT(e)})}function TT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!zs(e,i)}catch{return!0}}function CT(e){var t=Qa(e,1);t!==null&&Ms(t,e,1,-1)}function Hb(e){var t=ta();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Af,lastRenderedState:e},t.queue=e,e=e.dispatch=o3.bind(null,Pr,e),[t.memoizedState,e]}function Pf(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Pr.updateQueue,t===null?(t={lastEffect:null,stores:null},Pr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function IT(){return cs().memoizedState}function Em(e,t,i,a){var c=ta();Pr.flags|=e,c.memoizedState=Pf(1|t,i,void 0,a===void 0?null:a)}function Zg(e,t,i,a){var c=cs();a=a===void 0?null:a;var p=void 0;if(ti!==null){var d=ti.memoizedState;if(p=d.destroy,a!==null&&w1(a,d.deps)){c.memoizedState=Pf(t,i,p,a);return}}Pr.flags|=e,c.memoizedState=Pf(1|t,i,p,a)}function Wb(e,t){return Em(8390656,8,e,t)}function E1(e,t){return Zg(2048,8,e,t)}function AT(e,t){return Zg(4,2,e,t)}function PT(e,t){return Zg(4,4,e,t)}function kT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function MT(e,t,i){return i=i!=null?i.concat([e]):null,Zg(4,4,kT.bind(null,t,e),i)}function T1(){}function zT(e,t){var i=cs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&w1(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function RT(e,t){var i=cs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&w1(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function OT(e,t,i){return Xu&21?(zs(i,t)||(i=jE(),Pr.lanes|=i,qu|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=i)}function r3(e,t){var i=er;er=i!==0&&4>i?i:4,e(!0);var a=_0.transition;_0.transition={};try{e(!1),t()}finally{er=i,_0.transition=a}}function LT(){return cs().memoizedState}function i3(e,t,i){var a=nu(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},FT(e))jT(t,i);else if(i=fT(e,t,i,a),i!==null){var c=no();Ms(i,e,a,c),DT(i,t,a)}}function o3(e,t,i){var a=nu(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(FT(e))jT(t,c);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var d=t.lastRenderedState,u=p(d,i);if(c.hasEagerState=!0,c.eagerState=u,zs(u,d)){var b=t.interleaved;b===null?(c.next=c,g1(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}i=fT(e,t,c,a),i!==null&&(c=no(),Ms(i,e,a,c),DT(i,t,a))}}function FT(e){var t=e.alternate;return e===Pr||t!==null&&t===Pr}function jT(e,t){nf=tg=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function DT(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,n1(e,i)}}var ng={readContext:us,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useInsertionEffect:Bi,useLayoutEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi,useDeferredValue:Bi,useTransition:Bi,useMutableSource:Bi,useSyncExternalStore:Bi,useId:Bi,unstable_isNewReconciler:!1},s3={readContext:us,useCallback:function(e,t){return ta().memoizedState=[e,t===void 0?null:t],e},useContext:us,useEffect:Wb,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Em(4194308,4,kT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Em(4194308,4,e,t)},useInsertionEffect:function(e,t){return Em(4,2,e,t)},useMemo:function(e,t){var i=ta();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=ta();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=i3.bind(null,Pr,e),[a.memoizedState,e]},useRef:function(e){var t=ta();return e={current:e},t.memoizedState=e},useState:Hb,useDebugValue:T1,useDeferredValue:function(e){return ta().memoizedState=e},useTransition:function(){var e=Hb(!1),t=e[0];return e=r3.bind(null,e[1]),ta().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Pr,c=ta();if(Sr){if(i===void 0)throw Error(At(407));i=i()}else{if(i=t(),fi===null)throw Error(At(349));Xu&30||bT(a,t,i)}c.memoizedState=i;var p={value:i,getSnapshot:t};return c.queue=p,Wb(ET.bind(null,a,p,e),[e]),a.flags|=2048,Pf(9,ST.bind(null,a,p,i,t),void 0,null),i},useId:function(){var e=ta(),t=fi.identifierPrefix;if(Sr){var i=qa,a=Xa;i=(a&~(1<<32-ks(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=If++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=n3++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},a3={readContext:us,useCallback:zT,useContext:us,useEffect:E1,useImperativeHandle:MT,useInsertionEffect:AT,useLayoutEffect:PT,useMemo:RT,useReducer:x0,useRef:IT,useState:function(){return x0(Af)},useDebugValue:T1,useDeferredValue:function(e){var t=cs();return OT(t,ti.memoizedState,e)},useTransition:function(){var e=x0(Af)[0],t=cs().memoizedState;return[e,t]},useMutableSource:xT,useSyncExternalStore:wT,useId:LT,unstable_isNewReconciler:!1},l3={readContext:us,useCallback:zT,useContext:us,useEffect:E1,useImperativeHandle:MT,useInsertionEffect:AT,useLayoutEffect:PT,useMemo:RT,useReducer:w0,useRef:IT,useState:function(){return w0(Af)},useDebugValue:T1,useDeferredValue:function(e){var t=cs();return ti===null?t.memoizedState=e:OT(t,ti.memoizedState,e)},useTransition:function(){var e=w0(Af)[0],t=cs().memoizedState;return[e,t]},useMutableSource:xT,useSyncExternalStore:wT,useId:LT,unstable_isNewReconciler:!1};function Ch(e,t){try{var i="",a=t;do i+=Fk(a),a=a.return;while(a);var c=i}catch(p){c=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:c,digest:null}}function b0(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function jv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var u3=typeof WeakMap=="function"?WeakMap:Map;function BT(e,t,i){i=Ka(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){ig||(ig=!0,Zv=a),jv(e,t)},i}function NT(e,t,i){i=Ka(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){jv(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){jv(e,t),typeof a!="function"&&(tu===null?tu=new Set([this]):tu.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),i}function Zb(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new u3;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=S3.bind(null,e,t,i),t.then(e,e))}function Xb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qb(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Ka(-1,1),t.tag=2,eu(i,t,1))),i.lanes|=1),e)}var c3=ol.ReactCurrentOwner,yo=!1;function Ji(e,t,i,a){t.child=e===null?vT(t,null,i,a):Eh(t,e.child,i,a)}function Kb(e,t,i,a,c){i=i.render;var p=t.ref;return gh(t,c),a=b1(e,t,i,a,p,c),i=S1(),e!==null&&!yo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,el(e,t,c)):(Sr&&i&&c1(t),t.flags|=1,Ji(e,t,a,c),t.child)}function Yb(e,t,i,a,c){if(e===null){var p=i.type;return typeof p=="function"&&!R1(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=p,UT(e,t,p,a,c)):(e=Am(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,!(e.lanes&c)){var d=p.memoizedProps;if(i=i.compare,i=i!==null?i:wf,i(d,a)&&e.ref===t.ref)return el(e,t,c)}return t.flags|=1,e=ru(p,a),e.ref=t.ref,e.return=t,t.child=e}function UT(e,t,i,a,c){if(e!==null){var p=e.memoizedProps;if(wf(p,a)&&e.ref===t.ref)if(yo=!1,t.pendingProps=a=p,(e.lanes&c)!==0)e.flags&131072&&(yo=!0);else return t.lanes=e.lanes,el(e,t,c)}return Dv(e,t,i,a,c)}function $T(e,t,i){var a=t.pendingProps,c=a.children,p=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fr(sh,Oo),Oo|=i;else{if(!(i&1073741824))return e=p!==null?p.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fr(sh,Oo),Oo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=p!==null?p.baseLanes:i,fr(sh,Oo),Oo|=a}else p!==null?(a=p.baseLanes|i,t.memoizedState=null):a=i,fr(sh,Oo),Oo|=a;return Ji(e,t,c,i),t.child}function VT(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Dv(e,t,i,a,c){var p=_o(i)?Wu:Gi.current;return p=bh(t,p),gh(t,c),i=b1(e,t,i,a,p,c),a=S1(),e!==null&&!yo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,el(e,t,c)):(Sr&&a&&c1(t),t.flags|=1,Ji(e,t,i,c),t.child)}function Jb(e,t,i,a,c){if(_o(i)){var p=!0;Xm(t)}else p=!1;if(gh(t,c),t.stateNode===null)Tm(e,t),gT(t,i,a),Fv(t,i,a,c),a=!0;else if(e===null){var d=t.stateNode,u=t.memoizedProps;d.props=u;var b=d.context,C=i.contextType;typeof C=="object"&&C!==null?C=us(C):(C=_o(i)?Wu:Gi.current,C=bh(t,C));var A=i.getDerivedStateFromProps,w=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function";w||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==a||b!==C)&&Vb(t,d,a,C),$l=!1;var T=t.memoizedState;d.state=T,Qm(t,a,d,c),b=t.memoizedState,u!==a||T!==b||vo.current||$l?(typeof A=="function"&&(Lv(t,i,A,a),b=t.memoizedState),(u=$l||$b(t,i,u,a,T,b,C))?(w||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),d.props=a,d.state=b,d.context=C,a=u):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{d=t.stateNode,pT(e,t),u=t.memoizedProps,C=t.type===t.elementType?u:Ss(t.type,u),d.props=C,w=t.pendingProps,T=d.context,b=i.contextType,typeof b=="object"&&b!==null?b=us(b):(b=_o(i)?Wu:Gi.current,b=bh(t,b));var L=i.getDerivedStateFromProps;(A=typeof L=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==w||T!==b)&&Vb(t,d,a,b),$l=!1,T=t.memoizedState,d.state=T,Qm(t,a,d,c);var U=t.memoizedState;u!==w||T!==U||vo.current||$l?(typeof L=="function"&&(Lv(t,i,L,a),U=t.memoizedState),(C=$l||$b(t,i,C,a,T,U,b)||!1)?(A||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,U,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,U,b)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=U),d.props=a,d.state=U,d.context=b,a=C):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),a=!1)}return Bv(e,t,i,a,p,c)}function Bv(e,t,i,a,c,p){VT(e,t);var d=(t.flags&128)!==0;if(!a&&!d)return c&&jb(t,i,!1),el(e,t,p);a=t.stateNode,c3.current=t;var u=d&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&d?(t.child=Eh(t,e.child,null,p),t.child=Eh(t,null,u,p)):Ji(e,t,u,p),t.memoizedState=a.state,c&&jb(t,i,!0),t.child}function GT(e){var t=e.stateNode;t.pendingContext?Fb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fb(e,t.context,!1),v1(e,t.containerInfo)}function Qb(e,t,i,a,c){return Sh(),d1(c),t.flags|=256,Ji(e,t,i,a),t.child}var Nv={dehydrated:null,treeContext:null,retryLane:0};function Uv(e){return{baseLanes:e,cachePool:null,transitions:null}}function HT(e,t,i){var a=t.pendingProps,c=Ir.current,p=!1,d=(t.flags&128)!==0,u;if((u=d)||(u=e!==null&&e.memoizedState===null?!1:(c&2)!==0),u?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),fr(Ir,c&1),e===null)return Rv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=a.children,e=a.fallback,p?(a=t.mode,p=t.child,d={mode:"hidden",children:d},!(a&1)&&p!==null?(p.childLanes=0,p.pendingProps=d):p=Kg(d,a,0,null),e=Hu(e,a,i,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=Uv(i),t.memoizedState=Nv,e):C1(t,d));if(c=e.memoizedState,c!==null&&(u=c.dehydrated,u!==null))return h3(e,t,d,a,u,c,i);if(p){p=a.fallback,d=t.mode,c=e.child,u=c.sibling;var b={mode:"hidden",children:a.children};return!(d&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=ru(c,b),a.subtreeFlags=c.subtreeFlags&14680064),u!==null?p=ru(u,p):(p=Hu(p,d,i,null),p.flags|=2),p.return=t,a.return=t,a.sibling=p,t.child=a,a=p,p=t.child,d=e.child.memoizedState,d=d===null?Uv(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},p.memoizedState=d,p.childLanes=e.childLanes&~i,t.memoizedState=Nv,a}return p=e.child,e=p.sibling,a=ru(p,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function C1(e,t){return t=Kg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zp(e,t,i,a){return a!==null&&d1(a),Eh(t,e.child,null,i),e=C1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function h3(e,t,i,a,c,p,d){if(i)return t.flags&256?(t.flags&=-257,a=b0(Error(At(422))),Zp(e,t,d,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=a.fallback,c=t.mode,a=Kg({mode:"visible",children:a.children},c,0,null),p=Hu(p,c,d,null),p.flags|=2,a.return=t,p.return=t,a.sibling=p,t.child=a,t.mode&1&&Eh(t,e.child,null,d),t.child.memoizedState=Uv(d),t.memoizedState=Nv,p);if(!(t.mode&1))return Zp(e,t,d,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var u=a.dgst;return a=u,p=Error(At(419)),a=b0(p,a,void 0),Zp(e,t,d,a)}if(u=(d&e.childLanes)!==0,yo||u){if(a=fi,a!==null){switch(d&-d){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|d)?0:c,c!==0&&c!==p.retryLane&&(p.retryLane=c,Qa(e,c),Ms(a,e,c,-1))}return z1(),a=b0(Error(At(421))),Zp(e,t,d,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=E3.bind(null,e),c._reactRetry=t,null):(e=p.treeContext,Do=Ql(c.nextSibling),Bo=t,Sr=!0,Ts=null,e!==null&&(rs[is++]=Xa,rs[is++]=qa,rs[is++]=Zu,Xa=e.id,qa=e.overflow,Zu=t),t=C1(t,a.children),t.flags|=4096,t)}function e2(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Ov(e.return,t,i)}function S0(e,t,i,a,c){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=a,p.tail=i,p.tailMode=c)}function WT(e,t,i){var a=t.pendingProps,c=a.revealOrder,p=a.tail;if(Ji(e,t,a.children,i),a=Ir.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&e2(e,i,t);else if(e.tag===19)e2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(fr(Ir,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&eg(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),S0(t,!1,c,i,p);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&eg(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}S0(t,!0,i,null,p);break;case"together":S0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Tm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function el(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),qu|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,i=ru(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=ru(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function d3(e,t,i){switch(t.tag){case 3:GT(t),Sh();break;case 5:_T(t);break;case 1:_o(t.type)&&Xm(t);break;case 4:v1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;fr(Ym,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(fr(Ir,Ir.current&1),t.flags|=128,null):i&t.child.childLanes?HT(e,t,i):(fr(Ir,Ir.current&1),e=el(e,t,i),e!==null?e.sibling:null);fr(Ir,Ir.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return WT(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),fr(Ir,Ir.current),a)break;return null;case 22:case 23:return t.lanes=0,$T(e,t,i)}return el(e,t,i)}var ZT,$v,XT,qT;ZT=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};$v=function(){};XT=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Uu(la.current);var p=null;switch(i){case"input":c=cv(e,c),a=cv(e,a),p=[];break;case"select":c=kr({},c,{value:void 0}),a=kr({},a,{value:void 0}),p=[];break;case"textarea":c=fv(e,c),a=fv(e,a),p=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Wm)}mv(i,a);var d;i=null;for(C in c)if(!a.hasOwnProperty(C)&&c.hasOwnProperty(C)&&c[C]!=null)if(C==="style"){var u=c[C];for(d in u)u.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(pf.hasOwnProperty(C)?p||(p=[]):(p=p||[]).push(C,null));for(C in a){var b=a[C];if(u=c!=null?c[C]:void 0,a.hasOwnProperty(C)&&b!==u&&(b!=null||u!=null))if(C==="style")if(u){for(d in u)!u.hasOwnProperty(d)||b&&b.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in b)b.hasOwnProperty(d)&&u[d]!==b[d]&&(i||(i={}),i[d]=b[d])}else i||(p||(p=[]),p.push(C,i)),i=b;else C==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,u=u?u.__html:void 0,b!=null&&u!==b&&(p=p||[]).push(C,b)):C==="children"?typeof b!="string"&&typeof b!="number"||(p=p||[]).push(C,""+b):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(pf.hasOwnProperty(C)?(b!=null&&C==="onScroll"&&yr("scroll",e),p||u===b||(p=[])):(p=p||[]).push(C,b))}i&&(p=p||[]).push("style",i);var C=p;(t.updateQueue=C)&&(t.flags|=4)}};qT=function(e,t,i,a){i!==a&&(t.flags|=4)};function Fd(e,t){if(!Sr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ni(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function f3(e,t,i){var a=t.pendingProps;switch(h1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(t),null;case 1:return _o(t.type)&&Zm(),Ni(t),null;case 3:return a=t.stateNode,Th(),_r(vo),_r(Gi),x1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Hp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ts!==null&&(Kv(Ts),Ts=null))),$v(e,t),Ni(t),null;case 5:_1(t);var c=Uu(Cf.current);if(i=t.type,e!==null&&t.stateNode!=null)XT(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(At(166));return Ni(t),null}if(e=Uu(la.current),Hp(t)){a=t.stateNode,i=t.type;var p=t.memoizedProps;switch(a[na]=t,a[Ef]=p,e=(t.mode&1)!==0,i){case"dialog":yr("cancel",a),yr("close",a);break;case"iframe":case"object":case"embed":yr("load",a);break;case"video":case"audio":for(c=0;c<$d.length;c++)yr($d[c],a);break;case"source":yr("error",a);break;case"img":case"image":case"link":yr("error",a),yr("load",a);break;case"details":yr("toggle",a);break;case"input":ub(a,p),yr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!p.multiple},yr("invalid",a);break;case"textarea":hb(a,p),yr("invalid",a)}mv(i,p),c=null;for(var d in p)if(p.hasOwnProperty(d)){var u=p[d];d==="children"?typeof u=="string"?a.textContent!==u&&(p.suppressHydrationWarning!==!0&&Gp(a.textContent,u,e),c=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(p.suppressHydrationWarning!==!0&&Gp(a.textContent,u,e),c=["children",""+u]):pf.hasOwnProperty(d)&&u!=null&&d==="onScroll"&&yr("scroll",a)}switch(i){case"input":Fp(a),cb(a,p,!0);break;case"textarea":Fp(a),db(a);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(a.onclick=Wm)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{d=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=bE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(i,{is:a.is}):(e=d.createElement(i),i==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,i),e[na]=t,e[Ef]=a,ZT(e,t,!1,!1),t.stateNode=e;e:{switch(d=gv(i,a),i){case"dialog":yr("cancel",e),yr("close",e),c=a;break;case"iframe":case"object":case"embed":yr("load",e),c=a;break;case"video":case"audio":for(c=0;c<$d.length;c++)yr($d[c],e);c=a;break;case"source":yr("error",e),c=a;break;case"img":case"image":case"link":yr("error",e),yr("load",e),c=a;break;case"details":yr("toggle",e),c=a;break;case"input":ub(e,a),c=cv(e,a),yr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=kr({},a,{value:void 0}),yr("invalid",e);break;case"textarea":hb(e,a),c=fv(e,a),yr("invalid",e);break;default:c=a}mv(i,c),u=c;for(p in u)if(u.hasOwnProperty(p)){var b=u[p];p==="style"?TE(e,b):p==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&SE(e,b)):p==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&mf(e,b):typeof b=="number"&&mf(e,""+b):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(pf.hasOwnProperty(p)?b!=null&&p==="onScroll"&&yr("scroll",e):b!=null&&K_(e,p,b,d))}switch(i){case"input":Fp(e),cb(e,a,!1);break;case"textarea":Fp(e),db(e);break;case"option":a.value!=null&&e.setAttribute("value",""+iu(a.value));break;case"select":e.multiple=!!a.multiple,p=a.value,p!=null?dh(e,!!a.multiple,p,!1):a.defaultValue!=null&&dh(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Wm)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ni(t),null;case 6:if(e&&t.stateNode!=null)qT(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(At(166));if(i=Uu(Cf.current),Uu(la.current),Hp(t)){if(a=t.stateNode,i=t.memoizedProps,a[na]=t,(p=a.nodeValue!==i)&&(e=Bo,e!==null))switch(e.tag){case 3:Gp(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gp(a.nodeValue,i,(e.mode&1)!==0)}p&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[na]=t,t.stateNode=a}return Ni(t),null;case 13:if(_r(Ir),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sr&&Do!==null&&t.mode&1&&!(t.flags&128))dT(),Sh(),t.flags|=98560,p=!1;else if(p=Hp(t),a!==null&&a.dehydrated!==null){if(e===null){if(!p)throw Error(At(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(At(317));p[na]=t}else Sh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ni(t),p=!1}else Ts!==null&&(Kv(Ts),Ts=null),p=!0;if(!p)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Ir.current&1?ni===0&&(ni=3):z1())),t.updateQueue!==null&&(t.flags|=4),Ni(t),null);case 4:return Th(),$v(e,t),e===null&&bf(t.stateNode.containerInfo),Ni(t),null;case 10:return m1(t.type._context),Ni(t),null;case 17:return _o(t.type)&&Zm(),Ni(t),null;case 19:if(_r(Ir),p=t.memoizedState,p===null)return Ni(t),null;if(a=(t.flags&128)!==0,d=p.rendering,d===null)if(a)Fd(p,!1);else{if(ni!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=eg(e),d!==null){for(t.flags|=128,Fd(p,!1),a=d.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)p=i,e=a,p.flags&=14680066,d=p.alternate,d===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=d.childLanes,p.lanes=d.lanes,p.child=d.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=d.memoizedProps,p.memoizedState=d.memoizedState,p.updateQueue=d.updateQueue,p.type=d.type,e=d.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return fr(Ir,Ir.current&1|2),t.child}e=e.sibling}p.tail!==null&&Hr()>Ih&&(t.flags|=128,a=!0,Fd(p,!1),t.lanes=4194304)}else{if(!a)if(e=eg(d),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Fd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!d.alternate&&!Sr)return Ni(t),null}else 2*Hr()-p.renderingStartTime>Ih&&i!==1073741824&&(t.flags|=128,a=!0,Fd(p,!1),t.lanes=4194304);p.isBackwards?(d.sibling=t.child,t.child=d):(i=p.last,i!==null?i.sibling=d:t.child=d,p.last=d)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=Hr(),t.sibling=null,i=Ir.current,fr(Ir,a?i&1|2:i&1),t):(Ni(t),null);case 22:case 23:return M1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Oo&1073741824&&(Ni(t),t.subtreeFlags&6&&(t.flags|=8192)):Ni(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function p3(e,t){switch(h1(t),t.tag){case 1:return _o(t.type)&&Zm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Th(),_r(vo),_r(Gi),x1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _1(t),null;case 13:if(_r(Ir),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));Sh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _r(Ir),null;case 4:return Th(),null;case 10:return m1(t.type._context),null;case 22:case 23:return M1(),null;case 24:return null;default:return null}}var Xp=!1,$i=!1,m3=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function oh(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Fr(e,t,a)}else i.current=null}function Vv(e,t,i){try{i()}catch(a){Fr(e,t,a)}}var t2=!1;function g3(e,t){if(Cv=Vm,e=QE(),u1(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,p=a.focusNode;a=a.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var d=0,u=-1,b=-1,C=0,A=0,w=e,T=null;t:for(;;){for(var L;w!==i||c!==0&&w.nodeType!==3||(u=d+c),w!==p||a!==0&&w.nodeType!==3||(b=d+a),w.nodeType===3&&(d+=w.nodeValue.length),(L=w.firstChild)!==null;)T=w,w=L;for(;;){if(w===e)break t;if(T===i&&++C===c&&(u=d),T===p&&++A===a&&(b=d),(L=w.nextSibling)!==null)break;w=T,T=w.parentNode}w=L}i=u===-1||b===-1?null:{start:u,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(Iv={focusedElem:e,selectionRange:i},Vm=!1,Qt=t;Qt!==null;)if(t=Qt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qt=e;else for(;Qt!==null;){t=Qt;try{var U=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var F=U.memoizedProps,ce=U.memoizedState,K=t.stateNode,W=K.getSnapshotBeforeUpdate(t.elementType===t.type?F:Ss(t.type,F),ce);K.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var $=t.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(ie){Fr(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,Qt=e;break}Qt=t.return}return U=t2,t2=!1,U}function rf(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var p=c.destroy;c.destroy=void 0,p!==void 0&&Vv(t,i,p)}c=c.next}while(c!==a)}}function Xg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function Gv(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function KT(e){var t=e.alternate;t!==null&&(e.alternate=null,KT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[na],delete t[Ef],delete t[kv],delete t[JM],delete t[QM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function YT(e){return e.tag===5||e.tag===3||e.tag===4}function n2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||YT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Wm));else if(a!==4&&(e=e.child,e!==null))for(Hv(e,t,i),e=e.sibling;e!==null;)Hv(e,t,i),e=e.sibling}function Wv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Wv(e,t,i),e=e.sibling;e!==null;)Wv(e,t,i),e=e.sibling}var Ti=null,Es=!1;function Bl(e,t,i){for(i=i.child;i!==null;)JT(e,t,i),i=i.sibling}function JT(e,t,i){if(aa&&typeof aa.onCommitFiberUnmount=="function")try{aa.onCommitFiberUnmount(Ng,i)}catch{}switch(i.tag){case 5:$i||oh(i,t);case 6:var a=Ti,c=Es;Ti=null,Bl(e,t,i),Ti=a,Es=c,Ti!==null&&(Es?(e=Ti,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Ti.removeChild(i.stateNode));break;case 18:Ti!==null&&(Es?(e=Ti,i=i.stateNode,e.nodeType===8?g0(e.parentNode,i):e.nodeType===1&&g0(e,i),_f(e)):g0(Ti,i.stateNode));break;case 4:a=Ti,c=Es,Ti=i.stateNode.containerInfo,Es=!0,Bl(e,t,i),Ti=a,Es=c;break;case 0:case 11:case 14:case 15:if(!$i&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var p=c,d=p.destroy;p=p.tag,d!==void 0&&(p&2||p&4)&&Vv(i,t,d),c=c.next}while(c!==a)}Bl(e,t,i);break;case 1:if(!$i&&(oh(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(u){Fr(i,t,u)}Bl(e,t,i);break;case 21:Bl(e,t,i);break;case 22:i.mode&1?($i=(a=$i)||i.memoizedState!==null,Bl(e,t,i),$i=a):Bl(e,t,i);break;default:Bl(e,t,i)}}function r2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new m3),t.forEach(function(a){var c=T3.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function bs(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var p=e,d=t,u=d;e:for(;u!==null;){switch(u.tag){case 5:Ti=u.stateNode,Es=!1;break e;case 3:Ti=u.stateNode.containerInfo,Es=!0;break e;case 4:Ti=u.stateNode.containerInfo,Es=!0;break e}u=u.return}if(Ti===null)throw Error(At(160));JT(p,d,c),Ti=null,Es=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(C){Fr(c,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)QT(t,e),t=t.sibling}function QT(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bs(t,e),ea(e),a&4){try{rf(3,e,e.return),Xg(3,e)}catch(F){Fr(e,e.return,F)}try{rf(5,e,e.return)}catch(F){Fr(e,e.return,F)}}break;case 1:bs(t,e),ea(e),a&512&&i!==null&&oh(i,i.return);break;case 5:if(bs(t,e),ea(e),a&512&&i!==null&&oh(i,i.return),e.flags&32){var c=e.stateNode;try{mf(c,"")}catch(F){Fr(e,e.return,F)}}if(a&4&&(c=e.stateNode,c!=null)){var p=e.memoizedProps,d=i!==null?i.memoizedProps:p,u=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{u==="input"&&p.type==="radio"&&p.name!=null&&xE(c,p),gv(u,d);var C=gv(u,p);for(d=0;d<b.length;d+=2){var A=b[d],w=b[d+1];A==="style"?TE(c,w):A==="dangerouslySetInnerHTML"?SE(c,w):A==="children"?mf(c,w):K_(c,A,w,C)}switch(u){case"input":hv(c,p);break;case"textarea":wE(c,p);break;case"select":var T=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!p.multiple;var L=p.value;L!=null?dh(c,!!p.multiple,L,!1):T!==!!p.multiple&&(p.defaultValue!=null?dh(c,!!p.multiple,p.defaultValue,!0):dh(c,!!p.multiple,p.multiple?[]:"",!1))}c[Ef]=p}catch(F){Fr(e,e.return,F)}}break;case 6:if(bs(t,e),ea(e),a&4){if(e.stateNode===null)throw Error(At(162));c=e.stateNode,p=e.memoizedProps;try{c.nodeValue=p}catch(F){Fr(e,e.return,F)}}break;case 3:if(bs(t,e),ea(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{_f(t.containerInfo)}catch(F){Fr(e,e.return,F)}break;case 4:bs(t,e),ea(e);break;case 13:bs(t,e),ea(e),c=e.child,c.flags&8192&&(p=c.memoizedState!==null,c.stateNode.isHidden=p,!p||c.alternate!==null&&c.alternate.memoizedState!==null||(P1=Hr())),a&4&&r2(e);break;case 22:if(A=i!==null&&i.memoizedState!==null,e.mode&1?($i=(C=$i)||A,bs(t,e),$i=C):bs(t,e),ea(e),a&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!A&&e.mode&1)for(Qt=e,A=e.child;A!==null;){for(w=Qt=A;Qt!==null;){switch(T=Qt,L=T.child,T.tag){case 0:case 11:case 14:case 15:rf(4,T,T.return);break;case 1:oh(T,T.return);var U=T.stateNode;if(typeof U.componentWillUnmount=="function"){a=T,i=T.return;try{t=a,U.props=t.memoizedProps,U.state=t.memoizedState,U.componentWillUnmount()}catch(F){Fr(a,i,F)}}break;case 5:oh(T,T.return);break;case 22:if(T.memoizedState!==null){o2(w);continue}}L!==null?(L.return=T,Qt=L):o2(w)}A=A.sibling}e:for(A=null,w=e;;){if(w.tag===5){if(A===null){A=w;try{c=w.stateNode,C?(p=c.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(u=w.stateNode,b=w.memoizedProps.style,d=b!=null&&b.hasOwnProperty("display")?b.display:null,u.style.display=EE("display",d))}catch(F){Fr(e,e.return,F)}}}else if(w.tag===6){if(A===null)try{w.stateNode.nodeValue=C?"":w.memoizedProps}catch(F){Fr(e,e.return,F)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;A===w&&(A=null),w=w.return}A===w&&(A=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:bs(t,e),ea(e),a&4&&r2(e);break;case 21:break;default:bs(t,e),ea(e)}}function ea(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(YT(i)){var a=i;break e}i=i.return}throw Error(At(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(mf(c,""),a.flags&=-33);var p=n2(e);Wv(e,p,c);break;case 3:case 4:var d=a.stateNode.containerInfo,u=n2(e);Hv(e,u,d);break;default:throw Error(At(161))}}catch(b){Fr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function y3(e,t,i){Qt=e,eC(e)}function eC(e,t,i){for(var a=(e.mode&1)!==0;Qt!==null;){var c=Qt,p=c.child;if(c.tag===22&&a){var d=c.memoizedState!==null||Xp;if(!d){var u=c.alternate,b=u!==null&&u.memoizedState!==null||$i;u=Xp;var C=$i;if(Xp=d,($i=b)&&!C)for(Qt=c;Qt!==null;)d=Qt,b=d.child,d.tag===22&&d.memoizedState!==null?s2(c):b!==null?(b.return=d,Qt=b):s2(c);for(;p!==null;)Qt=p,eC(p),p=p.sibling;Qt=c,Xp=u,$i=C}i2(e)}else c.subtreeFlags&8772&&p!==null?(p.return=c,Qt=p):i2(e)}}function i2(e){for(;Qt!==null;){var t=Qt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$i||Xg(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!$i)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Ss(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&Ub(t,p,a);break;case 3:var d=t.updateQueue;if(d!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Ub(t,d,i)}break;case 5:var u=t.stateNode;if(i===null&&t.flags&4){i=u;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var A=C.memoizedState;if(A!==null){var w=A.dehydrated;w!==null&&_f(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}$i||t.flags&512&&Gv(t)}catch(T){Fr(t,t.return,T)}}if(t===e){Qt=null;break}if(i=t.sibling,i!==null){i.return=t.return,Qt=i;break}Qt=t.return}}function o2(e){for(;Qt!==null;){var t=Qt;if(t===e){Qt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Qt=i;break}Qt=t.return}}function s2(e){for(;Qt!==null;){var t=Qt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Xg(4,t)}catch(b){Fr(t,i,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(b){Fr(t,c,b)}}var p=t.return;try{Gv(t)}catch(b){Fr(t,p,b)}break;case 5:var d=t.return;try{Gv(t)}catch(b){Fr(t,d,b)}}}catch(b){Fr(t,t.return,b)}if(t===e){Qt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Qt=u;break}Qt=t.return}}var v3=Math.ceil,rg=ol.ReactCurrentDispatcher,I1=ol.ReactCurrentOwner,ls=ol.ReactCurrentBatchConfig,Wn=0,fi=null,Kr=null,Ii=0,Oo=0,sh=hu(0),ni=0,kf=null,qu=0,qg=0,A1=0,of=null,mo=null,P1=0,Ih=1/0,Ga=null,ig=!1,Zv=null,tu=null,qp=!1,Xl=null,og=0,sf=0,Xv=null,Cm=-1,Im=0;function no(){return Wn&6?Hr():Cm!==-1?Cm:Cm=Hr()}function nu(e){return e.mode&1?Wn&2&&Ii!==0?Ii&-Ii:t3.transition!==null?(Im===0&&(Im=jE()),Im):(e=er,e!==0||(e=window.event,e=e===void 0?16:GE(e.type)),e):1}function Ms(e,t,i,a){if(50<sf)throw sf=0,Xv=null,Error(At(185));Vf(e,i,a),(!(Wn&2)||e!==fi)&&(e===fi&&(!(Wn&2)&&(qg|=i),ni===4&&Wl(e,Ii)),xo(e,a),i===1&&Wn===0&&!(t.mode&1)&&(Ih=Hr()+500,Hg&&du()))}function xo(e,t){var i=e.callbackNode;tM(e,t);var a=$m(e,e===fi?Ii:0);if(a===0)i!==null&&mb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&mb(i),t===1)e.tag===0?e3(a2.bind(null,e)):uT(a2.bind(null,e)),KM(function(){!(Wn&6)&&du()}),i=null;else{switch(DE(a)){case 1:i=t1;break;case 4:i=LE;break;case 16:i=Um;break;case 536870912:i=FE;break;default:i=Um}i=lC(i,tC.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function tC(e,t){if(Cm=-1,Im=0,Wn&6)throw Error(At(327));var i=e.callbackNode;if(yh()&&e.callbackNode!==i)return null;var a=$m(e,e===fi?Ii:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=sg(e,a);else{t=a;var c=Wn;Wn|=2;var p=rC();(fi!==e||Ii!==t)&&(Ga=null,Ih=Hr()+500,Gu(e,t));do try{w3();break}catch(u){nC(e,u)}while(!0);p1(),rg.current=p,Wn=c,Kr!==null?t=0:(fi=null,Ii=0,t=ni)}if(t!==0){if(t===2&&(c=wv(e),c!==0&&(a=c,t=qv(e,c))),t===1)throw i=kf,Gu(e,0),Wl(e,a),xo(e,Hr()),i;if(t===6)Wl(e,a);else{if(c=e.current.alternate,!(a&30)&&!_3(c)&&(t=sg(e,a),t===2&&(p=wv(e),p!==0&&(a=p,t=qv(e,p))),t===1))throw i=kf,Gu(e,0),Wl(e,a),xo(e,Hr()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(At(345));case 2:ju(e,mo,Ga);break;case 3:if(Wl(e,a),(a&130023424)===a&&(t=P1+500-Hr(),10<t)){if($m(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){no(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Pv(ju.bind(null,e,mo,Ga),t);break}ju(e,mo,Ga);break;case 4:if(Wl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var d=31-ks(a);p=1<<d,d=t[d],d>c&&(c=d),a&=~p}if(a=c,a=Hr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*v3(a/1960))-a,10<a){e.timeoutHandle=Pv(ju.bind(null,e,mo,Ga),a);break}ju(e,mo,Ga);break;case 5:ju(e,mo,Ga);break;default:throw Error(At(329))}}}return xo(e,Hr()),e.callbackNode===i?tC.bind(null,e):null}function qv(e,t){var i=of;return e.current.memoizedState.isDehydrated&&(Gu(e,t).flags|=256),e=sg(e,t),e!==2&&(t=mo,mo=i,t!==null&&Kv(t)),e}function Kv(e){mo===null?mo=e:mo.push.apply(mo,e)}function _3(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],p=c.getSnapshot;c=c.value;try{if(!zs(p(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wl(e,t){for(t&=~A1,t&=~qg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-ks(t),a=1<<i;e[i]=-1,t&=~a}}function a2(e){if(Wn&6)throw Error(At(327));yh();var t=$m(e,0);if(!(t&1))return xo(e,Hr()),null;var i=sg(e,t);if(e.tag!==0&&i===2){var a=wv(e);a!==0&&(t=a,i=qv(e,a))}if(i===1)throw i=kf,Gu(e,0),Wl(e,t),xo(e,Hr()),i;if(i===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ju(e,mo,Ga),xo(e,Hr()),null}function k1(e,t){var i=Wn;Wn|=1;try{return e(t)}finally{Wn=i,Wn===0&&(Ih=Hr()+500,Hg&&du())}}function Ku(e){Xl!==null&&Xl.tag===0&&!(Wn&6)&&yh();var t=Wn;Wn|=1;var i=ls.transition,a=er;try{if(ls.transition=null,er=1,e)return e()}finally{er=a,ls.transition=i,Wn=t,!(Wn&6)&&du()}}function M1(){Oo=sh.current,_r(sh)}function Gu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,qM(i)),Kr!==null)for(i=Kr.return;i!==null;){var a=i;switch(h1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Zm();break;case 3:Th(),_r(vo),_r(Gi),x1();break;case 5:_1(a);break;case 4:Th();break;case 13:_r(Ir);break;case 19:_r(Ir);break;case 10:m1(a.type._context);break;case 22:case 23:M1()}i=i.return}if(fi=e,Kr=e=ru(e.current,null),Ii=Oo=t,ni=0,kf=null,A1=qg=qu=0,mo=of=null,Nu!==null){for(t=0;t<Nu.length;t++)if(i=Nu[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,p=i.pending;if(p!==null){var d=p.next;p.next=c,a.next=d}i.pending=a}Nu=null}return e}function nC(e,t){do{var i=Kr;try{if(p1(),Sm.current=ng,tg){for(var a=Pr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}tg=!1}if(Xu=0,di=ti=Pr=null,nf=!1,If=0,I1.current=null,i===null||i.return===null){ni=1,kf=t,Kr=null;break}e:{var p=e,d=i.return,u=i,b=t;if(t=Ii,u.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var C=b,A=u,w=A.tag;if(!(A.mode&1)&&(w===0||w===11||w===15)){var T=A.alternate;T?(A.updateQueue=T.updateQueue,A.memoizedState=T.memoizedState,A.lanes=T.lanes):(A.updateQueue=null,A.memoizedState=null)}var L=Xb(d);if(L!==null){L.flags&=-257,qb(L,d,u,p,t),L.mode&1&&Zb(p,C,t),t=L,b=C;var U=t.updateQueue;if(U===null){var F=new Set;F.add(b),t.updateQueue=F}else U.add(b);break e}else{if(!(t&1)){Zb(p,C,t),z1();break e}b=Error(At(426))}}else if(Sr&&u.mode&1){var ce=Xb(d);if(ce!==null){!(ce.flags&65536)&&(ce.flags|=256),qb(ce,d,u,p,t),d1(Ch(b,u));break e}}p=b=Ch(b,u),ni!==4&&(ni=2),of===null?of=[p]:of.push(p),p=d;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var K=BT(p,b,t);Nb(p,K);break e;case 1:u=b;var W=p.type,$=p.stateNode;if(!(p.flags&128)&&(typeof W.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(tu===null||!tu.has($)))){p.flags|=65536,t&=-t,p.lanes|=t;var ie=NT(p,u,t);Nb(p,ie);break e}}p=p.return}while(p!==null)}oC(i)}catch(X){t=X,Kr===i&&i!==null&&(Kr=i=i.return);continue}break}while(!0)}function rC(){var e=rg.current;return rg.current=ng,e===null?ng:e}function z1(){(ni===0||ni===3||ni===2)&&(ni=4),fi===null||!(qu&268435455)&&!(qg&268435455)||Wl(fi,Ii)}function sg(e,t){var i=Wn;Wn|=2;var a=rC();(fi!==e||Ii!==t)&&(Ga=null,Gu(e,t));do try{x3();break}catch(c){nC(e,c)}while(!0);if(p1(),Wn=i,rg.current=a,Kr!==null)throw Error(At(261));return fi=null,Ii=0,ni}function x3(){for(;Kr!==null;)iC(Kr)}function w3(){for(;Kr!==null&&!Wk();)iC(Kr)}function iC(e){var t=aC(e.alternate,e,Oo);e.memoizedProps=e.pendingProps,t===null?oC(e):Kr=t,I1.current=null}function oC(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=p3(i,t),i!==null){i.flags&=32767,Kr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ni=6,Kr=null;return}}else if(i=f3(i,t,Oo),i!==null){Kr=i;return}if(t=t.sibling,t!==null){Kr=t;return}Kr=t=e}while(t!==null);ni===0&&(ni=5)}function ju(e,t,i){var a=er,c=ls.transition;try{ls.transition=null,er=1,b3(e,t,i,a)}finally{ls.transition=c,er=a}return null}function b3(e,t,i,a){do yh();while(Xl!==null);if(Wn&6)throw Error(At(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var p=i.lanes|i.childLanes;if(nM(e,p),e===fi&&(Kr=fi=null,Ii=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||qp||(qp=!0,lC(Um,function(){return yh(),null})),p=(i.flags&15990)!==0,i.subtreeFlags&15990||p){p=ls.transition,ls.transition=null;var d=er;er=1;var u=Wn;Wn|=4,I1.current=null,g3(e,i),QT(i,e),$M(Iv),Vm=!!Cv,Iv=Cv=null,e.current=i,y3(i),Zk(),Wn=u,er=d,ls.transition=p}else e.current=i;if(qp&&(qp=!1,Xl=e,og=c),p=e.pendingLanes,p===0&&(tu=null),Kk(i.stateNode),xo(e,Hr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(ig)throw ig=!1,e=Zv,Zv=null,e;return og&1&&e.tag!==0&&yh(),p=e.pendingLanes,p&1?e===Xv?sf++:(sf=0,Xv=e):sf=0,du(),null}function yh(){if(Xl!==null){var e=DE(og),t=ls.transition,i=er;try{if(ls.transition=null,er=16>e?16:e,Xl===null)var a=!1;else{if(e=Xl,Xl=null,og=0,Wn&6)throw Error(At(331));var c=Wn;for(Wn|=4,Qt=e.current;Qt!==null;){var p=Qt,d=p.child;if(Qt.flags&16){var u=p.deletions;if(u!==null){for(var b=0;b<u.length;b++){var C=u[b];for(Qt=C;Qt!==null;){var A=Qt;switch(A.tag){case 0:case 11:case 15:rf(8,A,p)}var w=A.child;if(w!==null)w.return=A,Qt=w;else for(;Qt!==null;){A=Qt;var T=A.sibling,L=A.return;if(KT(A),A===C){Qt=null;break}if(T!==null){T.return=L,Qt=T;break}Qt=L}}}var U=p.alternate;if(U!==null){var F=U.child;if(F!==null){U.child=null;do{var ce=F.sibling;F.sibling=null,F=ce}while(F!==null)}}Qt=p}}if(p.subtreeFlags&2064&&d!==null)d.return=p,Qt=d;else e:for(;Qt!==null;){if(p=Qt,p.flags&2048)switch(p.tag){case 0:case 11:case 15:rf(9,p,p.return)}var K=p.sibling;if(K!==null){K.return=p.return,Qt=K;break e}Qt=p.return}}var W=e.current;for(Qt=W;Qt!==null;){d=Qt;var $=d.child;if(d.subtreeFlags&2064&&$!==null)$.return=d,Qt=$;else e:for(d=W;Qt!==null;){if(u=Qt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Xg(9,u)}}catch(X){Fr(u,u.return,X)}if(u===d){Qt=null;break e}var ie=u.sibling;if(ie!==null){ie.return=u.return,Qt=ie;break e}Qt=u.return}}if(Wn=c,du(),aa&&typeof aa.onPostCommitFiberRoot=="function")try{aa.onPostCommitFiberRoot(Ng,e)}catch{}a=!0}return a}finally{er=i,ls.transition=t}}return!1}function l2(e,t,i){t=Ch(i,t),t=BT(e,t,1),e=eu(e,t,1),t=no(),e!==null&&(Vf(e,1,t),xo(e,t))}function Fr(e,t,i){if(e.tag===3)l2(e,e,i);else for(;t!==null;){if(t.tag===3){l2(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(tu===null||!tu.has(a))){e=Ch(i,e),e=NT(t,e,1),t=eu(t,e,1),e=no(),t!==null&&(Vf(t,1,e),xo(t,e));break}}t=t.return}}function S3(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=no(),e.pingedLanes|=e.suspendedLanes&i,fi===e&&(Ii&i)===i&&(ni===4||ni===3&&(Ii&130023424)===Ii&&500>Hr()-P1?Gu(e,0):A1|=i),xo(e,t)}function sC(e,t){t===0&&(e.mode&1?(t=Bp,Bp<<=1,!(Bp&130023424)&&(Bp=4194304)):t=1);var i=no();e=Qa(e,t),e!==null&&(Vf(e,t,i),xo(e,i))}function E3(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),sC(e,i)}function T3(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(At(314))}a!==null&&a.delete(t),sC(e,i)}var aC;aC=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||vo.current)yo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return yo=!1,d3(e,t,i);yo=!!(e.flags&131072)}else yo=!1,Sr&&t.flags&1048576&&cT(t,Km,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Tm(e,t),e=t.pendingProps;var c=bh(t,Gi.current);gh(t,i),c=b1(null,t,a,e,c,i);var p=S1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_o(a)?(p=!0,Xm(t)):p=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,y1(t),c.updater=Wg,t.stateNode=c,c._reactInternals=t,Fv(t,a,e,i),t=Bv(null,t,a,!0,p,i)):(t.tag=0,Sr&&p&&c1(t),Ji(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Tm(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=I3(a),e=Ss(a,e),c){case 0:t=Dv(null,t,a,e,i);break e;case 1:t=Jb(null,t,a,e,i);break e;case 11:t=Kb(null,t,a,e,i);break e;case 14:t=Yb(null,t,a,Ss(a.type,e),i);break e}throw Error(At(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ss(a,c),Dv(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ss(a,c),Jb(e,t,a,c,i);case 3:e:{if(GT(t),e===null)throw Error(At(387));a=t.pendingProps,p=t.memoizedState,c=p.element,pT(e,t),Qm(t,a,null,i);var d=t.memoizedState;if(a=d.element,p.isDehydrated)if(p={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){c=Ch(Error(At(423)),t),t=Qb(e,t,a,i,c);break e}else if(a!==c){c=Ch(Error(At(424)),t),t=Qb(e,t,a,i,c);break e}else for(Do=Ql(t.stateNode.containerInfo.firstChild),Bo=t,Sr=!0,Ts=null,i=vT(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Sh(),a===c){t=el(e,t,i);break e}Ji(e,t,a,i)}t=t.child}return t;case 5:return _T(t),e===null&&Rv(t),a=t.type,c=t.pendingProps,p=e!==null?e.memoizedProps:null,d=c.children,Av(a,c)?d=null:p!==null&&Av(a,p)&&(t.flags|=32),VT(e,t),Ji(e,t,d,i),t.child;case 6:return e===null&&Rv(t),null;case 13:return HT(e,t,i);case 4:return v1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Eh(t,null,a,i):Ji(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ss(a,c),Kb(e,t,a,c,i);case 7:return Ji(e,t,t.pendingProps,i),t.child;case 8:return Ji(e,t,t.pendingProps.children,i),t.child;case 12:return Ji(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,p=t.memoizedProps,d=c.value,fr(Ym,a._currentValue),a._currentValue=d,p!==null)if(zs(p.value,d)){if(p.children===c.children&&!vo.current){t=el(e,t,i);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var u=p.dependencies;if(u!==null){d=p.child;for(var b=u.firstContext;b!==null;){if(b.context===a){if(p.tag===1){b=Ka(-1,i&-i),b.tag=2;var C=p.updateQueue;if(C!==null){C=C.shared;var A=C.pending;A===null?b.next=b:(b.next=A.next,A.next=b),C.pending=b}}p.lanes|=i,b=p.alternate,b!==null&&(b.lanes|=i),Ov(p.return,i,t),u.lanes|=i;break}b=b.next}}else if(p.tag===10)d=p.type===t.type?null:p.child;else if(p.tag===18){if(d=p.return,d===null)throw Error(At(341));d.lanes|=i,u=d.alternate,u!==null&&(u.lanes|=i),Ov(d,i,t),d=p.sibling}else d=p.child;if(d!==null)d.return=p;else for(d=p;d!==null;){if(d===t){d=null;break}if(p=d.sibling,p!==null){p.return=d.return,d=p;break}d=d.return}p=d}Ji(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,gh(t,i),c=us(c),a=a(c),t.flags|=1,Ji(e,t,a,i),t.child;case 14:return a=t.type,c=Ss(a,t.pendingProps),c=Ss(a.type,c),Yb(e,t,a,c,i);case 15:return UT(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ss(a,c),Tm(e,t),t.tag=1,_o(a)?(e=!0,Xm(t)):e=!1,gh(t,i),gT(t,a,c),Fv(t,a,c,i),Bv(null,t,a,!0,e,i);case 19:return WT(e,t,i);case 22:return $T(e,t,i)}throw Error(At(156,t.tag))};function lC(e,t){return OE(e,t)}function C3(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(e,t,i,a){return new C3(e,t,i,a)}function R1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function I3(e){if(typeof e=="function")return R1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===J_)return 11;if(e===Q_)return 14}return 2}function ru(e,t){var i=e.alternate;return i===null?(i=ss(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Am(e,t,i,a,c,p){var d=2;if(a=e,typeof e=="function")R1(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Kc:return Hu(i.children,c,p,t);case Y_:d=8,c|=8;break;case sv:return e=ss(12,i,t,c|2),e.elementType=sv,e.lanes=p,e;case av:return e=ss(13,i,t,c),e.elementType=av,e.lanes=p,e;case lv:return e=ss(19,i,t,c),e.elementType=lv,e.lanes=p,e;case yE:return Kg(i,c,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mE:d=10;break e;case gE:d=9;break e;case J_:d=11;break e;case Q_:d=14;break e;case Ul:d=16,a=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=ss(d,i,t,c),t.elementType=e,t.type=a,t.lanes=p,t}function Hu(e,t,i,a){return e=ss(7,e,a,t),e.lanes=i,e}function Kg(e,t,i,a){return e=ss(22,e,a,t),e.elementType=yE,e.lanes=i,e.stateNode={isHidden:!1},e}function E0(e,t,i){return e=ss(6,e,null,t),e.lanes=i,e}function T0(e,t,i){return t=ss(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function A3(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=o0(0),this.expirationTimes=o0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=o0(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function O1(e,t,i,a,c,p,d,u,b){return e=new A3(e,t,i,u,b),t===1?(t=1,p===!0&&(t|=8)):t=0,p=ss(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},y1(p),e}function P3(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function uC(e){if(!e)return ou;e=e._reactInternals;e:{if(nc(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_o(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var i=e.type;if(_o(i))return lT(e,i,t)}return t}function cC(e,t,i,a,c,p,d,u,b){return e=O1(i,a,!0,e,c,p,d,u,b),e.context=uC(null),i=e.current,a=no(),c=nu(i),p=Ka(a,c),p.callback=t??null,eu(i,p,c),e.current.lanes=c,Vf(e,c,a),xo(e,a),e}function Yg(e,t,i,a){var c=t.current,p=no(),d=nu(c);return i=uC(i),t.context===null?t.context=i:t.pendingContext=i,t=Ka(p,d),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=eu(c,t,d),e!==null&&(Ms(e,c,d,p),bm(e,c,d)),d}function ag(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function u2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function L1(e,t){u2(e,t),(e=e.alternate)&&u2(e,t)}function k3(){return null}var hC=typeof reportError=="function"?reportError:function(e){console.error(e)};function F1(e){this._internalRoot=e}Jg.prototype.render=F1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));Yg(e,t,null,null)};Jg.prototype.unmount=F1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ku(function(){Yg(null,e,null,null)}),t[Ja]=null}};function Jg(e){this._internalRoot=e}Jg.prototype.unstable_scheduleHydration=function(e){if(e){var t=UE();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Hl.length&&t!==0&&t<Hl[i].priority;i++);Hl.splice(i,0,e),i===0&&VE(e)}};function j1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function c2(){}function M3(e,t,i,a,c){if(c){if(typeof a=="function"){var p=a;a=function(){var C=ag(d);p.call(C)}}var d=cC(t,a,e,0,null,!1,!1,"",c2);return e._reactRootContainer=d,e[Ja]=d.current,bf(e.nodeType===8?e.parentNode:e),Ku(),d}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var u=a;a=function(){var C=ag(b);u.call(C)}}var b=O1(e,0,!1,null,null,!1,!1,"",c2);return e._reactRootContainer=b,e[Ja]=b.current,bf(e.nodeType===8?e.parentNode:e),Ku(function(){Yg(t,b,i,a)}),b}function ey(e,t,i,a,c){var p=i._reactRootContainer;if(p){var d=p;if(typeof c=="function"){var u=c;c=function(){var b=ag(d);u.call(b)}}Yg(t,d,e,c)}else d=M3(i,t,e,c,a);return ag(d)}BE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Ud(t.pendingLanes);i!==0&&(n1(t,i|1),xo(t,Hr()),!(Wn&6)&&(Ih=Hr()+500,du()))}break;case 13:Ku(function(){var a=Qa(e,1);if(a!==null){var c=no();Ms(a,e,1,c)}}),L1(e,1)}};r1=function(e){if(e.tag===13){var t=Qa(e,134217728);if(t!==null){var i=no();Ms(t,e,134217728,i)}L1(e,134217728)}};NE=function(e){if(e.tag===13){var t=nu(e),i=Qa(e,t);if(i!==null){var a=no();Ms(i,e,t,a)}L1(e,t)}};UE=function(){return er};$E=function(e,t){var i=er;try{return er=e,t()}finally{er=i}};vv=function(e,t,i){switch(t){case"input":if(hv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=Gg(a);if(!c)throw Error(At(90));_E(a),hv(a,c)}}}break;case"textarea":wE(e,i);break;case"select":t=i.value,t!=null&&dh(e,!!i.multiple,t,!1)}};AE=k1;PE=Ku;var z3={usingClientEntryPoint:!1,Events:[Hf,eh,Gg,CE,IE,k1]},jd={findFiberByHostInstance:Bu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},R3={bundleType:jd.bundleType,version:jd.version,rendererPackageName:jd.rendererPackageName,rendererConfig:jd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ol.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zE(e),e===null?null:e.stateNode},findFiberByHostInstance:jd.findFiberByHostInstance||k3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kp.isDisabled&&Kp.supportsFiber)try{Ng=Kp.inject(R3),aa=Kp}catch{}}Uo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z3;Uo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j1(t))throw Error(At(200));return P3(e,t,null,i)};Uo.createRoot=function(e,t){if(!j1(e))throw Error(At(299));var i=!1,a="",c=hC;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=O1(e,1,!1,null,null,i,!1,a,c),e[Ja]=t.current,bf(e.nodeType===8?e.parentNode:e),new F1(t)};Uo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=zE(t),e=e===null?null:e.stateNode,e};Uo.flushSync=function(e){return Ku(e)};Uo.hydrate=function(e,t,i){if(!Qg(t))throw Error(At(200));return ey(null,e,t,!0,i)};Uo.hydrateRoot=function(e,t,i){if(!j1(e))throw Error(At(405));var a=i!=null&&i.hydratedSources||null,c=!1,p="",d=hC;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),t=cC(t,null,e,1,i??null,c,!1,p,d),e[Ja]=t.current,bf(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new Jg(t)};Uo.render=function(e,t,i){if(!Qg(t))throw Error(At(200));return ey(null,e,t,!1,i)};Uo.unmountComponentAtNode=function(e){if(!Qg(e))throw Error(At(40));return e._reactRootContainer?(Ku(function(){ey(null,null,e,!1,function(){e._reactRootContainer=null,e[Ja]=null})}),!0):!1};Uo.unstable_batchedUpdates=k1;Uo.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!Qg(i))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return ey(e,t,i,!1,a)};Uo.version="18.2.0-next-9e3b772b8-20220608";function dC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dC)}catch(e){console.error(e)}}dC(),cE.exports=Uo;var D1=cE.exports;const O3=Uf(D1);var fC={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.1.2/LICENSE.txt
 */(function(e,t){(function(i,a){e.exports=a()})(Gl,function(){var i={},a={};function c(d,u,b){if(a[d]=b,d==="index"){var C="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",A={};return a.shared(A),a.index(i,A),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),i}}c("shared",["exports"],function(d){function u(o,n,s,h){return new(s||(s=Promise))(function(g,_){function x(O){try{k(h.next(O))}catch(Z){_(Z)}}function S(O){try{k(h.throw(O))}catch(Z){_(Z)}}function k(O){var Z;O.done?g(O.value):(Z=O.value,Z instanceof s?Z:new s(function(Y){Y(Z)})).then(x,S)}k((h=h.apply(o,n||[])).next())})}function b(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var C=A;function A(o,n){this.x=o,this.y=n}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),g=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(o){return o instanceof A?o:Array.isArray(o)?new A(o[0],o[1]):o};var w=b(C),T=L;function L(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}L.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var g=this.sampleCurveX(s)-o;if(Math.abs(g)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=g/_}var x=0,S=1;for(s=o,h=0;h<20&&(g=this.sampleCurveX(s),!(Math.abs(g-o)<n));h++)o>g?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var U=b(T);let F,ce;function K(){return F==null&&(F=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),F}function W(){if(ce==null&&(ce=!1,K())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const g=4*h;n.fillStyle=`rgb(${g},${g+1},${g+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){ce=!0;break}}}return ce||!1}function $(o,n,s,h){const g=new U(o,n,s,h);return function(_){return g.solve(_)}}const ie=$(.25,.1,.25,1);function X(o,n,s){return Math.min(s,Math.max(n,o))}function V(o,n,s){const h=s-n,g=((o-n)%h+h)%h+n;return g===n?s:g}function E(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let j=1;function B(o,n,s){const h={};for(const g in o)h[g]=n.call(s||this,o[g],g,o);return h}function ee(o,n,s){const h={};for(const g in o)n.call(s||this,o[g],g,o)&&(h[g]=o[g]);return h}function q(o){return Array.isArray(o)?o.map(q):typeof o=="object"&&o?B(o,q):o}const pe={};function _e(o){pe[o]||(typeof console<"u"&&console.warn(o),pe[o]=!0)}function de(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function oe(o){let n=0;for(let s,h,g=0,_=o.length,x=_-1;g<_;x=g++)s=o[g],h=o[x],n+=(h.x-s.x)*(s.y+h.y);return n}function le(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let J=null;function te(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function be(o,n,s,h,g){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(o,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),k=new Uint8ClampedArray(h*g*4);if(yield _.copyTo(k,function(O,Z,Y,se,fe){const ye=4*Math.max(-Z,0),Ce=(Math.max(0,Y)-Y)*se*4+ye,Re=4*se,Ue=Math.max(0,Z),Je=Math.max(0,Y);return{rect:{x:Ue,y:Je,width:Math.min(O.width,Z+se)-Ue,height:Math.min(O.height,Y+fe)-Je},layout:[{offset:Ce,stride:Re}]}}(o,n,s,h,g)),S)for(let O=0;O<k.length;O+=4){const Z=k[O];k[O]=k[O+2],k[O+2]=Z}return k}finally{_.close()}})}let Ee,Be;const Pe="AbortError";function ze(){return new Error(Pe)}const We={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function He(o){return We.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const nt="global-dispatcher";class dt extends Error{constructor(n,s,h,g){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=g}}const wt=()=>le(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Mt=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=He(o.url);if(h)return h(o,n);if(le(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:o,targetMapId:nt},n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(wt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,g){return u(this,void 0,void 0,function*(){const _=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:wt(),signal:g.signal});h.type==="json"&&_.headers.set("Accept","application/json");const x=yield fetch(_);if(!x.ok){const O=yield x.blob();throw new dt(x.status,x.statusText,h.url,O)}let S;S=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const k=yield S;if(g.signal.aborted)throw ze();return{data:k,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,n);if(le(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:o,mustQueue:!0,targetMapId:nt},n)}var s;return function(h,g){return new Promise((_,x)=>{const S=new XMLHttpRequest;S.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(S.responseType="arraybuffer");for(const k in h.headers)S.setRequestHeader(k,h.headers[k]);h.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=h.credentials==="include",S.onerror=()=>{x(new Error(S.statusText))},S.onload=()=>{if(!g.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let k=S.response;if(h.type==="json")try{k=JSON.parse(S.response)}catch(O){return void x(O)}_({data:k,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const k=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});x(new dt(S.status,S.statusText,h.url,k))}},g.signal.addEventListener("abort",()=>{S.abort(),x(ze())}),S.send(h.body)})}(o,n)};function gt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function Tt(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function $t(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class Vt{constructor(n,s={}){E(this,s),this.type=n}}class Zt extends Vt{constructor(n,s={}){super("error",E({error:n},s))}}class En{on(n,s){return this._listeners=this._listeners||{},Tt(n,s,this._listeners),this}off(n,s){return $t(n,s,this._listeners),$t(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Tt(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new Vt(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of g)S.call(this,n);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of _)$t(h,S,this._oneTimeListeners),S.call(this,n);const x=this._eventedParent;x&&(E(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof Zt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var et={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const sn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Sn(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return sn.forEach(h=>{h in n&&(s[h]=n[h])}),s}function we(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!we(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!we(o[s],n[s]))return!1;return!0}return o===n}function N(o,n){o.push(n)}function D(o,n,s){N(s,{command:"addSource",args:[o,n[o]]})}function xe(o,n,s){N(n,{command:"removeSource",args:[o]}),s[o]=!0}function Ze(o,n,s,h){xe(o,s,h),D(o,n,s)}function Qe(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!we(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!we(o[s][h],n[s][h]))return!1;return!0}function ct(o,n,s,h,g,_){o=o||{},n=n||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(we(o[x],n[x])||s.push({command:_,args:[h,x,n[x],g]}));for(const x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(we(o[x],n[x])||s.push({command:_,args:[h,x,n[x],g]}))}function ae(o){return o.id}function R(o,n){return o[n.id]=n,o}class z{constructor(n,s,h,g){this.message=(n?`${n}: `:"")+h,g&&(this.identifier=g),s!=null&&s.__line__&&(this.line=s.__line__)}}function Se(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class Ve extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class tt{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,g]of s)this.bindings[h]=g}concat(n){return new tt(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const at={kind:"null"},st={kind:"number"},Dt={kind:"string"},Rt={kind:"boolean"},_n={kind:"color"},vn={kind:"object"},an={kind:"value"},mi={kind:"collator"},gi={kind:"formatted"},Ae={kind:"padding"},re={kind:"resolvedImage"},ue={kind:"variableAnchorOffsetCollection"};function me(o,n){return{kind:"array",itemType:o,N:n}}function Ie(o){if(o.kind==="array"){const n=Ie(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const Ne=[at,st,Dt,Rt,_n,gi,vn,me(an),Ae,re,ue];function Oe(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Oe(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of Ne)if(!Oe(s,n))return null}}return`Expected ${Ie(o)} but found ${Ie(n)} instead.`}function $e(o,n){return n.some(s=>s.kind===o.kind)}function Fe(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function Ye(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const ft=.96422,ut=.82521,pt=4/29,Gt=6/29,ln=3*Gt*Gt,tn=Gt*Gt*Gt,Tn=Math.PI/180,cn=180/Math.PI;function Zn(o){return(o%=360)<0&&(o+=360),o}function Gn([o,n,s,h]){let g,_;const x=dn((.2225045*(o=ir(o))+.7168786*(n=ir(n))+.0606169*(s=ir(s)))/1);o===n&&n===s?g=_=x:(g=dn((.4360747*o+.3850649*n+.1430804*s)/ft),_=dn((.0139322*o+.0971045*n+.7141733*s)/ut));const S=116*x-16;return[S<0?0:S,500*(g-x),200*(x-_),h]}function ir(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function dn(o){return o>tn?Math.pow(o,1/3):o/ln+pt}function or([o,n,s,h]){let g=(o+16)/116,_=isNaN(n)?g:g+n/500,x=isNaN(s)?g:g-s/200;return g=1*ii(g),_=ft*ii(_),x=ut*ii(x),[Mr(3.1338561*_-1.6168667*g-.4906146*x),Mr(-.9787684*_+1.9161415*g+.033454*x),Mr(.0719453*_-.2289914*g+1.4052427*x),h]}function Mr(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function ii(o){return o>Gt?o*o*o:ln*(o-pt)}function Wr(o){return parseInt(o.padEnd(2,o),16)/255}function Yr(o,n){return yi(n?o/100:o,0,1)}function yi(o,n,s){return Math.min(Math.max(n,o),s)}function da(o){return!o.some(Number.isNaN)}const fa={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class $n{constructor(n,s,h,g=1,_=!0){this.r=n,this.g=s,this.b=h,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[n,s,h,g]))}static parse(n){if(n instanceof $n)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=fa[h];if(g){const[x,S,k]=g;return[x/255,S/255,k/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[Wr(h.slice(S,S+=x)),Wr(h.slice(S,S+=x)),Wr(h.slice(S,S+=x)),Wr(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,k,O,Z,Y,se,fe,ye,Ce,Re,Ue,Je]=x,Ge=[Z||" ",fe||" ",Re].join("");if(Ge==="  "||Ge==="  /"||Ge===",,"||Ge===",,,"){const qe=[O,se,Ce].join(""),mt=qe==="%%%"?100:qe===""?255:0;if(mt){const vt=[yi(+k/mt,0,1),yi(+Y/mt,0,1),yi(+ye/mt,0,1),Ue?Yr(+Ue,Je):1];if(da(vt))return vt}}return}}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,S,k,O,Z,Y,se,fe,ye]=_,Ce=[k||" ",Z||" ",se].join("");if(Ce==="  "||Ce==="  /"||Ce===",,"||Ce===",,,"){const Re=[+S,yi(+O,0,100),yi(+Y,0,100),fe?Yr(+fe,ye):1];if(da(Re))return function([Ue,Je,Ge,qe]){function mt(vt){const Ft=(vt+Ue/30)%12,Ht=Je*Math.min(Ge,1-Ge);return Ge-Ht*Math.max(-1,Math.min(Ft-3,9-Ft,1))}return Ue=Zn(Ue),Je/=100,Ge/=100,[mt(0),mt(8),mt(4),qe]}(Re)}}}(n);return s?new $n(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[n/_,s/_,h/_,g])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,g,_]=Gn(n),x=Math.sqrt(h*h+g*g);return[Math.round(1e4*x)?Zn(Math.atan2(g,h)*cn):NaN,x,s,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Gn(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,g]=this.rgb;return`rgba(${[n,s,h].map(_=>Math.round(255*_)).join(",")},${g})`}}$n.black=new $n(0,0,0,1),$n.white=new $n(1,1,1,1),$n.transparent=new $n(0,0,0,0),$n.red=new $n(1,0,0,1);class In{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class wo{constructor(n,s,h,g,_){this.text=n,this.image=s,this.scale=h,this.fontStack=g,this.textColor=_}}class vi{constructor(n){this.sections=n}static fromString(n){return new vi([new wo(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof vi?n:vi.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class _i{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof _i)return n;if(typeof n=="number")return new _i([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new _i(n)}}toString(){return JSON.stringify(this.values)}}const sc=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Zr{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Zr)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],g=n[s+1];if(typeof h!="string"||!sc.has(h)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new Zr(n)}}toString(){return JSON.stringify(this.values)}}class Pi{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Pi({name:n,available:!1}):null}}function lo(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ho(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof $n||o instanceof In||o instanceof vi||o instanceof _i||o instanceof Zr||o instanceof Pi)return!0;if(Array.isArray(o)){for(const n of o)if(!Ho(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!Ho(o[n]))return!1;return!0}return!1}function wr(o){if(o===null)return at;if(typeof o=="string")return Dt;if(typeof o=="boolean")return Rt;if(typeof o=="number")return st;if(o instanceof $n)return _n;if(o instanceof In)return mi;if(o instanceof vi)return gi;if(o instanceof _i)return Ae;if(o instanceof Zr)return ue;if(o instanceof Pi)return re;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const g=wr(h);if(s){if(s===g)continue;s=an;break}s=g}return me(s||an,n)}return vn}function pa(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof $n||o instanceof vi||o instanceof _i||o instanceof Zr||o instanceof Pi?o.toString():JSON.stringify(o)}class hs{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ho(n[1]))return s.error("invalid value");const h=n[1];let g=wr(h);const _=s.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new hs(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class cr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Jr={string:Dt,number:st,boolean:Rt,object:vn};class Hi{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,g=1;const _=n[0];if(_==="array"){let S,k;if(n.length>2){const O=n[1];if(typeof O!="string"||!(O in Jr)||O==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=Jr[O],g++}else S=an;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);k=n[2],g++}h=me(S,k)}else{if(!Jr[_])throw new Error(`Types doesn't contain name = ${_}`);h=Jr[_]}const x=[];for(;g<n.length;g++){const S=s.parse(n[g],g,an);if(!S)return null;x.push(S)}return new Hi(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!Oe(this.type,wr(h)))return h;if(s===this.args.length-1)throw new cr(`Expected value to be of type ${Ie(this.type)}, but found ${Ie(wr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const al={"to-boolean":Rt,"to-color":_n,"to-number":st,"to-string":Dt};class uo{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!al[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const g=al[h],_=[];for(let x=1;x<n.length;x++){const S=s.parse(n[x],x,an);if(!S)return null;_.push(S)}return new uo(g,_)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const g of this.args){if(s=g.evaluate(n),h=null,s instanceof $n)return s;if(typeof s=="string"){const _=n.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:lo(s[0],s[1],s[2],s[3]),!h))return new $n(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new cr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const g=_i.parse(s);if(g)return g}throw new cr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const g=Zr.parse(s);if(g)return g}throw new cr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const g=Number(s);if(!isNaN(g))return g}throw new cr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return vi.fromString(pa(this.args[0].evaluate(n)));case"resolvedImage":return Pi.fromString(pa(this.args[0].evaluate(n)));default:return pa(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const fu=["Unknown","Point","LineString","Polygon"];class Os{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?fu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=$n.parse(n)),s}}class On{constructor(n,s,h=[],g,_=new tt,x=[]){this.registry=n,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=_,this.errors=x,this.expectedType=g,this._isConstant=s}parse(n,s,h,g,_={}){return s?this.concat(s,h,g)._parse(n,_):this._parse(n,_)}_parse(n,s){function h(g,_,x){return x==="assert"?new Hi(_,[g]):x==="coerce"?new uo(_,[g]):g}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=n[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let x=_.parse(n,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,k=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||k.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||k.kind!=="value"&&k.kind!=="string")if(S.kind!=="padding"||k.kind!=="value"&&k.kind!=="number"&&k.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||k.kind!=="value"&&k.kind!=="array"){if(this.checkSubtype(S,k))return null}else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof hs)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new Os;try{x=new hs(x.type,x.evaluate(S))}catch(k){return this.error(k.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const g=typeof n=="number"?this.path.concat(n):this.path,_=h?this.scope.concat(h):this.scope;return new On(this.registry,this._isConstant,g,s||null,_,this.errors)}error(n,...s){const h=`${this.key}${s.map(g=>`[${g}]`).join("")}`;this.errors.push(new Ve(h,n))}checkSubtype(n,s){const h=Oe(n,s);return h&&this.error(h),h}}class ll{constructor(n,s,h){this.type=mi,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const g=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Rt);if(!g)return null;const _=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Rt);if(!_)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Dt),!x)?null:new ll(g,_,x)}evaluate(n){return new In(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const co=8192;function xi(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function ma(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function ac(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,g=Math.pow(2,n.z);return[Math.round(s*g*co),Math.round(h*g*co)]}function Nh(o,n,s){const h=o[0]-n[0],g=o[1]-n[1],_=o[0]-s[0],x=o[1]-s[1];return h*x-_*g==0&&h*_<=0&&g*x<=0}function ul(o,n){let s=!1;for(let x=0,S=n.length;x<S;x++){const k=n[x];for(let O=0,Z=k.length;O<Z-1;O++){if(Nh(o,k[O],k[O+1]))return!1;(g=k[O])[1]>(h=o)[1]!=(_=k[O+1])[1]>h[1]&&h[0]<(_[0]-g[0])*(h[1]-g[1])/(_[1]-g[1])+g[0]&&(s=!s)}}var h,g,_;return s}function lc(o,n){for(let s=0;s<n.length;s++)if(ul(o,n[s]))return!0;return!1}function pu(o,n,s,h){const g=h[0]-s[0],_=h[1]-s[1],x=(o[0]-s[0])*_-g*(o[1]-s[1]),S=(n[0]-s[0])*_-g*(n[1]-s[1]);return x>0&&S<0||x<0&&S>0}function mu(o,n,s){for(const O of s)for(let Z=0;Z<O.length-1;++Z)if((S=[(x=O[Z+1])[0]-(_=O[Z])[0],x[1]-_[1]])[0]*(k=[(g=n)[0]-(h=o)[0],g[1]-h[1]])[1]-S[1]*k[0]!=0&&pu(h,g,_,x)&&pu(_,x,h,g))return!0;var h,g,_,x,S,k;return!1}function gu(o,n){for(let s=0;s<o.length;++s)if(!ul(o[s],n))return!1;for(let s=0;s<o.length-1;++s)if(mu(o[s],o[s+1],n))return!1;return!0}function cl(o,n){for(let s=0;s<n.length;s++)if(gu(o,n[s]))return!0;return!1}function hl(o,n,s){const h=[];for(let g=0;g<o.length;g++){const _=[];for(let x=0;x<o[g].length;x++){const S=ac(o[g][x],s);xi(n,S),_.push(S)}h.push(_)}return h}function Wo(o,n,s){const h=[];for(let g=0;g<o.length;g++){const _=hl(o[g],n,s);h.push(_)}return h}function uc(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const g=.5*h;let _=o[0]-s[0]>g?-h:s[0]-o[0]>g?h:0;_===0&&(_=o[0]-s[2]>g?-h:s[2]-o[0]>g?h:0),o[0]+=_}xi(n,o)}function cc(o,n,s,h){const g=Math.pow(2,h.z)*co,_=[h.x*co,h.y*co],x=[];for(const S of o)for(const k of S){const O=[k.x+_[0],k.y+_[1]];uc(O,n,s,g),x.push(O)}return x}function dl(o,n,s,h){const g=Math.pow(2,h.z)*co,_=[h.x*co,h.y*co],x=[];for(const k of o){const O=[];for(const Z of k){const Y=[Z.x+_[0],Z.y+_[1]];xi(n,Y),O.push(Y)}x.push(O)}if(n[2]-n[0]<=g/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const k of x)for(const O of k)uc(O,n,s,g)}var S;return x}class ds{constructor(n,s){this.type=Rt,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ho(n[1])){const h=n[1];if(h.type==="FeatureCollection"){const g=[];for(const _ of h.features){const{type:x,coordinates:S}=_.geometry;x==="Polygon"&&g.push(S),x==="MultiPolygon"&&g.push(...S)}if(g.length)return new ds(h,{type:"MultiPolygon",coordinates:g})}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new ds(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ds(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=hl(h.coordinates,_,x),k=cc(s.geometry(),g,_,x);if(!ma(g,_))return!1;for(const O of k)if(!ul(O,S))return!1}if(h.type==="MultiPolygon"){const S=Wo(h.coordinates,_,x),k=cc(s.geometry(),g,_,x);if(!ma(g,_))return!1;for(const O of k)if(!lc(O,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=hl(h.coordinates,_,x),k=dl(s.geometry(),g,_,x);if(!ma(g,_))return!1;for(const O of k)if(!gu(O,S))return!1}if(h.type==="MultiPolygon"){const S=Wo(h.coordinates,_,x),k=dl(s.geometry(),g,_,x);if(!ma(g,_))return!1;for(const O of k)if(!cl(O,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class ga{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new ga(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class ki{constructor(n,s,h,g){this.name=n,this.type=s,this._evaluate=h,this.args=g}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],g=ki.definitions[h];if(!g)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,S=x.filter(([O])=>!Array.isArray(O)||O.length===n.length-1);let k=null;for(const[O,Z]of S){k=new On(s.registry,ya,s.path,null,s.scope);const Y=[];let se=!1;for(let fe=1;fe<n.length;fe++){const ye=n[fe],Ce=Array.isArray(O)?O[fe-1]:O.type,Re=k.parse(ye,1+Y.length,Ce);if(!Re){se=!0;break}Y.push(Re)}if(!se)if(Array.isArray(O)&&O.length!==Y.length)k.error(`Expected ${O.length} arguments, but found ${Y.length} instead.`);else{for(let fe=0;fe<Y.length;fe++){const ye=Array.isArray(O)?O[fe]:O.type,Ce=Y[fe];k.concat(fe+1).checkSubtype(ye,Ce.type)}if(k.errors.length===0)return new ki(h,_,Z,Y)}}if(S.length===1)s.errors.push(...k.errors);else{const O=(S.length?S:x).map(([Y])=>{return se=Y,Array.isArray(se)?`(${se.map(Ie).join(", ")})`:`(${Ie(se.type)}...)`;var se}).join(" | "),Z=[];for(let Y=1;Y<n.length;Y++){const se=s.parse(n[Y],1+Z.length);if(!se)return null;Z.push(Ie(se.type))}s.error(`Expected arguments of type ${O}, but found (${Z.join(", ")}) instead.`)}return null}static register(n,s){ki.definitions=s;for(const h in s)n[h]=ki}}function ya(o){if(o instanceof ga)return ya(o.boundExpression);if(o instanceof ki&&o.name==="error"||o instanceof ll||o instanceof ds)return!1;const n=o instanceof uo||o instanceof Hi;let s=!0;return o.eachChild(h=>{s=n?s&&ya(h):s&&h instanceof hs}),!!s&&va(o)&&fl(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function va(o){if(o instanceof ki&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof ds)return!1;let n=!0;return o.eachChild(s=>{n&&!va(s)&&(n=!1)}),n}function fs(o){if(o instanceof ki&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!fs(s)&&(n=!1)}),n}function fl(o,n){if(o instanceof ki&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!fl(h,n)&&(s=!1)}),s}function _a(o,n){const s=o.length-1;let h,g,_=0,x=s,S=0;for(;_<=x;)if(S=Math.floor((_+x)/2),h=o[S],g=o[S+1],h<=n){if(S===s||n<g)return S;_=S+1}else{if(!(h>n))throw new cr("Input is not a number.");x=S-1}return 0}class Ls{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[g,_]of h)this.labels.push(g),this.outputs.push(_)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,st);if(!h)return null;const g=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let x=1;x<n.length;x+=2){const S=x===1?-1/0:n[x],k=n[x+1],O=x,Z=x+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(g.length&&g[g.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',O);const Y=s.parse(k,Z,_);if(!Y)return null;_=_||Y.type,g.push([S,Y])}return new Ls(_,h,g)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const g=this.input.evaluate(n);if(g<=s[0])return h[0].evaluate(n);const _=s.length;return g>=s[_-1]?h[_-1].evaluate(n):h[_a(s,g)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Uh(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var hc=dc;function dc(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}dc.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var g=this.sampleCurveX(s)-o;if(Math.abs(g)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=g/_}var x=0,S=1;for(s=o,h=0;h<20&&(g=this.sampleCurveX(s),!(Math.abs(g-o)<n));h++)o>g?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var fc=Uh(hc);function ps(o,n,s){return o+s*(n-o)}function pl(o,n,s){return o.map((h,g)=>ps(h,n[g],s))}const oi={number:ps,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[g,_,x,S]=pl(o.rgb,n.rgb,s);return new $n(g,_,x,S,!1)}case"hcl":{const[g,_,x,S]=o.hcl,[k,O,Z,Y]=n.hcl;let se,fe;if(isNaN(g)||isNaN(k))isNaN(g)?isNaN(k)?se=NaN:(se=k,x!==1&&x!==0||(fe=O)):(se=g,Z!==1&&Z!==0||(fe=_));else{let Je=k-g;k>g&&Je>180?Je-=360:k<g&&g-k>180&&(Je+=360),se=g+s*Je}const[ye,Ce,Re,Ue]=function([Je,Ge,qe,mt]){return Je=isNaN(Je)?0:Je*Tn,or([qe,Math.cos(Je)*Ge,Math.sin(Je)*Ge,mt])}([se,fe??ps(_,O,s),ps(x,Z,s),ps(S,Y,s)]);return new $n(ye,Ce,Re,Ue,!1)}case"lab":{const[g,_,x,S]=or(pl(o.lab,n.lab,s));return new $n(g,_,x,S,!1)}}},array:pl,padding:function(o,n,s){return new _i(pl(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const h=o.values,g=n.values;if(h.length!==g.length)throw new cr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const _=[];for(let x=0;x<h.length;x+=2){if(h[x]!==g[x])throw new cr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${g[x]}`);_.push(h[x]);const[S,k]=h[x+1],[O,Z]=g[x+1];_.push([ps(S,O,s),ps(k,Z,s)])}return new Zr(_)}};class Qr{constructor(n,s,h,g,_){this.type=n,this.operator=s,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[x,S]of _)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(n,s,h,g){let _=0;if(n.name==="exponential")_=Fs(s,n.base,h,g);else if(n.name==="linear")_=Fs(s,1,h,g);else if(n.name==="cubic-bezier"){const x=n.controlPoints;_=new fc(x[0],x[1],x[2],x[3]).solve(Fs(s,1,h,g))}return _}static parse(n,s){let[h,g,_,...x]=n;if(!Array.isArray(g)||g.length===0)return s.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const O=g[1];if(typeof O!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:O}}else{if(g[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const O=g.slice(1);if(O.length!==4||O.some(Z=>typeof Z!="number"||Z<0||Z>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:O}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,st),!_)return null;const S=[];let k=null;h==="interpolate-hcl"||h==="interpolate-lab"?k=_n:s.expectedType&&s.expectedType.kind!=="value"&&(k=s.expectedType);for(let O=0;O<x.length;O+=2){const Z=x[O],Y=x[O+1],se=O+3,fe=O+4;if(typeof Z!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',se);if(S.length&&S[S.length-1][0]>=Z)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',se);const ye=s.parse(Y,fe,k);if(!ye)return null;k=k||ye.type,S.push([Z,ye])}return Ye(k,st)||Ye(k,_n)||Ye(k,Ae)||Ye(k,ue)||Ye(k,me(st))?new Qr(k,h,g,_,S):s.error(`Type ${Ie(k)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const g=this.input.evaluate(n);if(g<=s[0])return h[0].evaluate(n);const _=s.length;if(g>=s[_-1])return h[_-1].evaluate(n);const x=_a(s,g),S=Qr.interpolationFactor(this.interpolation,g,s[x],s[x+1]),k=h[x].evaluate(n),O=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return oi[this.type.kind](k,O,S);case"interpolate-hcl":return oi.color(k,O,S,"hcl");case"interpolate-lab":return oi.color(k,O,S,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Fs(o,n,s,h){const g=h-s,_=o-s;return g===0?0:n===1?_/g:(Math.pow(n,_)-1)/(Math.pow(n,g)-1)}class Ln{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const g=s.expectedType;g&&g.kind!=="value"&&(h=g);const _=[];for(const S of n.slice(1)){const k=s.parse(S,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!k)return null;h=h||k.type,_.push(k)}if(!h)throw new Error("No output type");const x=g&&_.some(S=>Oe(g,S.type));return new Ln(x?an:h,_)}evaluate(n){let s,h=null,g=0;for(const _ of this.args)if(g++,h=_.evaluate(n),h&&h instanceof Pi&&!h.available&&(s||(s=h.name),h=null,g===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class ml{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let _=1;_<n.length-1;_+=2){const x=n[_];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);const S=s.parse(n[_+1],_+1);if(!S)return null;h.push([x,S])}const g=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return g?new ml(h,g):null}outputDefined(){return this.result.outputDefined()}}class gl{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,st),g=s.parse(n[2],2,me(s.expectedType||an));return h&&g?new gl(g.type.itemType,h,g):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new cr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new cr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new cr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class yu{constructor(n,s){this.type=Rt,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,an),g=s.parse(n[2],2,an);return h&&g?$e(h.type,[Rt,Dt,st,at,an])?new yu(h,g):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Fe(s,["boolean","string","number","null"]))throw new cr(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(wr(s))} instead.`);if(!Fe(h,["string","array"]))throw new cr(`Expected second argument to be of type array or string, but found ${Ie(wr(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class js{constructor(n,s,h){this.type=st,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,an),g=s.parse(n[2],2,an);if(!h||!g)return null;if(!$e(h.type,[Rt,Dt,st,at,an]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(h.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,st);return _?new js(h,g,_):null}return new js(h,g)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Fe(s,["boolean","string","number","null"]))throw new cr(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(wr(s))} instead.`);if(!Fe(h,["string","array"]))throw new cr(`Expected second argument to be of type array or string, but found ${Ie(wr(h))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(n);return h.indexOf(s,g)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class vu{constructor(n,s,h,g,_,x){this.inputType=n,this.type=s,this.input=h,this.cases=g,this.outputs=_,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,g;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);const _={},x=[];for(let O=2;O<n.length-1;O+=2){let Z=n[O];const Y=n[O+1];Array.isArray(Z)||(Z=[Z]);const se=s.concat(O);if(Z.length===0)return se.error("Expected at least one branch label.");for(const ye of Z){if(typeof ye!="number"&&typeof ye!="string")return se.error("Branch labels must be numbers or strings.");if(typeof ye=="number"&&Math.abs(ye)>Number.MAX_SAFE_INTEGER)return se.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ye=="number"&&Math.floor(ye)!==ye)return se.error("Numeric branch labels must be integer values.");if(h){if(se.checkSubtype(h,wr(ye)))return null}else h=wr(ye);if(_[String(ye)]!==void 0)return se.error("Branch labels must be unique.");_[String(ye)]=x.length}const fe=s.parse(Y,O,g);if(!fe)return null;g=g||fe.type,x.push(fe)}const S=s.parse(n[1],1,an);if(!S)return null;const k=s.parse(n[n.length-1],n.length-1,g);return k?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new vu(h,g,S,_,x,k):null}evaluate(n){const s=this.input.evaluate(n);return(wr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class _u{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const g=[];for(let x=1;x<n.length-1;x+=2){const S=s.parse(n[x],x,Rt);if(!S)return null;const k=s.parse(n[x+1],x+1,h);if(!k)return null;g.push([S,k]),h=h||k.type}const _=s.parse(n[n.length-1],n.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new _u(h,g,_)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class yl{constructor(n,s,h,g){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=g}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,an),g=s.parse(n[2],2,st);if(!h||!g)return null;if(!$e(h.type,[me(an),Dt,an]))return s.error(`Expected first argument to be of type array or string, but found ${Ie(h.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,st);return _?new yl(h.type,h,g,_):null}return new yl(h.type,h,g)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Fe(s,["string","array"]))throw new cr(`Expected first argument to be of type array or string, but found ${Ie(wr(s))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(n);return s.slice(h,g)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function pc(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function mc(o,n,s,h){return h.compare(n,s)===0}function Ds(o,n,s){const h=o!=="=="&&o!=="!=";return class pC{constructor(_,x,S){this.type=Rt,this.lhs=_,this.rhs=x,this.collator=S,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const S=_[0];let k=x.parse(_[1],1,an);if(!k)return null;if(!pc(S,k.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${Ie(k.type)}'.`);let O=x.parse(_[2],2,an);if(!O)return null;if(!pc(S,O.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${Ie(O.type)}'.`);if(k.type.kind!==O.type.kind&&k.type.kind!=="value"&&O.type.kind!=="value")return x.error(`Cannot compare types '${Ie(k.type)}' and '${Ie(O.type)}'.`);h&&(k.type.kind==="value"&&O.type.kind!=="value"?k=new Hi(O.type,[k]):k.type.kind!=="value"&&O.type.kind==="value"&&(O=new Hi(k.type,[O])));let Z=null;if(_.length===4){if(k.type.kind!=="string"&&O.type.kind!=="string"&&k.type.kind!=="value"&&O.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(Z=x.parse(_[3],3,mi),!Z)return null}return new pC(k,O,Z)}evaluate(_){const x=this.lhs.evaluate(_),S=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const k=wr(x),O=wr(S);if(k.kind!==O.kind||k.kind!=="string"&&k.kind!=="number")throw new cr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${k.kind}, ${O.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const k=wr(x),O=wr(S);if(k.kind!=="string"||O.kind!=="string")return n(_,x,S)}return this.collator?s(_,x,S,this.collator.evaluate(_)):n(_,x,S)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const gc=Ds("==",function(o,n,s){return n===s},mc),xu=Ds("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!mc(0,n,s,h)}),$h=Ds("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),Vh=Ds(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),Gh=Ds("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),Hh=Ds(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class vl{constructor(n,s,h,g,_){this.type=Dt,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,st);if(!h)return null;const g=n[2];if(typeof g!="object"||Array.isArray(g))return s.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=s.parse(g.locale,1,Dt),!_))return null;let x=null;if(g.currency&&(x=s.parse(g.currency,1,Dt),!x))return null;let S=null;if(g["min-fraction-digits"]&&(S=s.parse(g["min-fraction-digits"],1,st),!S))return null;let k=null;return g["max-fraction-digits"]&&(k=s.parse(g["max-fraction-digits"],1,st),!k)?null:new vl(h,_,x,S,k)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class _l{constructor(n){this.type=gi,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const g=[];let _=!1;for(let x=1;x<=n.length-1;++x){const S=n[x];if(_&&typeof S=="object"&&!Array.isArray(S)){_=!1;let k=null;if(S["font-scale"]&&(k=s.parse(S["font-scale"],1,st),!k))return null;let O=null;if(S["text-font"]&&(O=s.parse(S["text-font"],1,me(Dt)),!O))return null;let Z=null;if(S["text-color"]&&(Z=s.parse(S["text-color"],1,_n),!Z))return null;const Y=g[g.length-1];Y.scale=k,Y.font=O,Y.textColor=Z}else{const k=s.parse(n[x],1,an);if(!k)return null;const O=k.type.kind;if(O!=="string"&&O!=="value"&&O!=="null"&&O!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:k,scale:null,font:null,textColor:null})}}return new _l(g)}evaluate(n){return new vi(this.sections.map(s=>{const h=s.content.evaluate(n);return wr(h)===re?new wo("",h,null,null,null):new wo(pa(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class wu{constructor(n){this.type=re,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Dt);return h?new wu(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=Pi.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class bu{constructor(n){this.type=st,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Ie(h.type)} instead.`):new bu(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new cr(`Expected value to be of type string or array, but found ${Ie(wr(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Bs={"==":gc,"!=":xu,">":Vh,"<":$h,">=":Hh,"<=":Gh,array:Hi,at:gl,boolean:Hi,case:_u,coalesce:Ln,collator:ll,format:_l,image:wu,in:yu,"index-of":js,interpolate:Qr,"interpolate-hcl":Qr,"interpolate-lab":Qr,length:bu,let:ml,literal:hs,match:vu,number:Hi,"number-format":vl,object:Hi,slice:yl,step:Ls,string:Hi,"to-boolean":uo,"to-color":uo,"to-number":uo,"to-string":uo,var:ga,within:ds};function xa(o,[n,s,h,g]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const _=g?g.evaluate(o):1,x=lo(n,s,h,_);if(x)throw new cr(x);return new $n(n/255,s/255,h/255,_,!1)}function yc(o,n){return o in n}function Zo(o,n){const s=n[o];return s===void 0?null:s}function Xo(o){return{type:o}}function Wi(o){return{result:"success",value:o}}function Ns(o){return{result:"error",value:o}}function Us(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function vc(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Su(o){return!!o.expression&&o.expression.interpolated}function Rn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function $s(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function xl(o){return o}function _c(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",g=h||!(h||o.property!==void 0),_=o.type||(Su(n)?"exponential":"interval");if(s||n.type==="padding"){const Z=s?$n.parse:_i.parse;(o=Se({},o)).stops&&(o.stops=o.stops.map(Y=>[Y[0],Z(Y[1])])),o.default=Z(o.default?o.default:n.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let S,k,O;if(_==="exponential")S=Eu;else if(_==="interval")S=hr;else if(_==="categorical"){S=wl,k=Object.create(null);for(const Z of o.stops)k[Z[0]]=Z[1];O=typeof o.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);S=Pn}if(h){const Z={},Y=[];for(let ye=0;ye<o.stops.length;ye++){const Ce=o.stops[ye],Re=Ce[0].zoom;Z[Re]===void 0&&(Z[Re]={zoom:Re,type:o.type,property:o.property,default:o.default,stops:[]},Y.push(Re)),Z[Re].stops.push([Ce[0].value,Ce[1]])}const se=[];for(const ye of Y)se.push([Z[ye].zoom,_c(Z[ye],n)]);const fe={name:"linear"};return{kind:"composite",interpolationType:fe,interpolationFactor:Qr.interpolationFactor.bind(void 0,fe),zoomStops:se.map(ye=>ye[0]),evaluate:({zoom:ye},Ce)=>Eu({stops:se,base:o.base},n,ye).evaluate(ye,Ce)}}if(g){const Z=_==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:Z,interpolationFactor:Qr.interpolationFactor.bind(void 0,Z),zoomStops:o.stops.map(Y=>Y[0]),evaluate:({zoom:Y})=>S(o,n,Y,k,O)}}return{kind:"source",evaluate(Z,Y){const se=Y&&Y.properties?Y.properties[o.property]:void 0;return se===void 0?wa(o.default,n.default):S(o,n,se,k,O)}}}function wa(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function wl(o,n,s,h,g){return wa(typeof s===g?h[s]:void 0,o.default,n.default)}function hr(o,n,s){if(Rn(s)!=="number")return wa(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const g=_a(o.stops.map(_=>_[0]),s);return o.stops[g][1]}function Eu(o,n,s){const h=o.base!==void 0?o.base:1;if(Rn(s)!=="number")return wa(o.default,n.default);const g=o.stops.length;if(g===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[g-1][0])return o.stops[g-1][1];const _=_a(o.stops.map(Z=>Z[0]),s),x=function(Z,Y,se,fe){const ye=fe-se,Ce=Z-se;return ye===0?0:Y===1?Ce/ye:(Math.pow(Y,Ce)-1)/(Math.pow(Y,ye)-1)}(s,h,o.stops[_][0],o.stops[_+1][0]),S=o.stops[_][1],k=o.stops[_+1][1],O=oi[n.type]||xl;return typeof S.evaluate=="function"?{evaluate(...Z){const Y=S.evaluate.apply(void 0,Z),se=k.evaluate.apply(void 0,Z);if(Y!==void 0&&se!==void 0)return O(Y,se,x,o.colorSpace)}}:O(S,k,x,o.colorSpace)}function Pn(o,n,s){switch(n.type){case"color":s=$n.parse(s);break;case"formatted":s=vi.fromString(s.toString());break;case"resolvedImage":s=Pi.fromString(s.toString());break;case"padding":s=_i.parse(s);break;default:Rn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return wa(s,o.default,n.default)}ki.register(Bs,{error:[{kind:"error"},[Dt],(o,[n])=>{throw new cr(n.evaluate(o))}],typeof:[Dt,[an],(o,[n])=>Ie(wr(n.evaluate(o)))],"to-rgba":[me(st,4),[_n],(o,[n])=>{const[s,h,g,_]=n.evaluate(o).rgb;return[255*s,255*h,255*g,_]}],rgb:[_n,[st,st,st],xa],rgba:[_n,[st,st,st,st],xa],has:{type:Rt,overloads:[[[Dt],(o,[n])=>yc(n.evaluate(o),o.properties())],[[Dt,vn],(o,[n,s])=>yc(n.evaluate(o),s.evaluate(o))]]},get:{type:an,overloads:[[[Dt],(o,[n])=>Zo(n.evaluate(o),o.properties())],[[Dt,vn],(o,[n,s])=>Zo(n.evaluate(o),s.evaluate(o))]]},"feature-state":[an,[Dt],(o,[n])=>Zo(n.evaluate(o),o.featureState||{})],properties:[vn,[],o=>o.properties()],"geometry-type":[Dt,[],o=>o.geometryType()],id:[an,[],o=>o.id()],zoom:[st,[],o=>o.globals.zoom],"heatmap-density":[st,[],o=>o.globals.heatmapDensity||0],"line-progress":[st,[],o=>o.globals.lineProgress||0],accumulated:[an,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[st,Xo(st),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[st,Xo(st),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:st,overloads:[[[st,st],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[st],(o,[n])=>-n.evaluate(o)]]},"/":[st,[st,st],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[st,[st,st],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[st,[],()=>Math.LN2],pi:[st,[],()=>Math.PI],e:[st,[],()=>Math.E],"^":[st,[st,st],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[st,[st],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[st,[st],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[st,[st],(o,[n])=>Math.log(n.evaluate(o))],log2:[st,[st],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[st,[st],(o,[n])=>Math.sin(n.evaluate(o))],cos:[st,[st],(o,[n])=>Math.cos(n.evaluate(o))],tan:[st,[st],(o,[n])=>Math.tan(n.evaluate(o))],asin:[st,[st],(o,[n])=>Math.asin(n.evaluate(o))],acos:[st,[st],(o,[n])=>Math.acos(n.evaluate(o))],atan:[st,[st],(o,[n])=>Math.atan(n.evaluate(o))],min:[st,Xo(st),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[st,Xo(st),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[st,[st],(o,[n])=>Math.abs(n.evaluate(o))],round:[st,[st],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[st,[st],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[st,[st],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[Rt,[Dt,an],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[Rt,[an],(o,[n])=>o.id()===n.value],"filter-type-==":[Rt,[Dt],(o,[n])=>o.geometryType()===n.value],"filter-<":[Rt,[Dt,an],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h<g}],"filter-id-<":[Rt,[an],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[Rt,[Dt,an],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h>g}],"filter-id->":[Rt,[an],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[Rt,[Dt,an],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[Rt,[an],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[Rt,[Dt,an],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[Rt,[an],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[Rt,[an],(o,[n])=>n.value in o.properties()],"filter-has-id":[Rt,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Rt,[me(Dt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[Rt,[me(an)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[Rt,[Dt,me(an)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[Rt,[Dt,me(an)],(o,[n,s])=>function(h,g,_,x){for(;_<=x;){const S=_+x>>1;if(g[S]===h)return!0;g[S]>h?x=S-1:_=S+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:Rt,overloads:[[[Rt,Rt],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Xo(Rt),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:Rt,overloads:[[[Rt,Rt],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Xo(Rt),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[Rt,[Rt],(o,[n])=>!n.evaluate(o)],"is-supported-script":[Rt,[Dt],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Dt,[Dt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Dt,[Dt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Dt,Xo(an),(o,n)=>n.map(s=>pa(s.evaluate(o))).join("")],"resolved-locale":[Dt,[mi],(o,[n])=>n.evaluate(o).resolvedLocale()]});class ba{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new Os,this._defaultValue=s?(h=s).type==="color"&&$s(h.default)?new $n(0,0,0,0):h.type==="color"?$n.parse(h.default)||null:h.type==="padding"?_i.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Zr.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,g,_,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,g,_,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new cr(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Hn(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Bs}function jn(o,n){const s=new On(Bs,ya,[],n?function(g){const _={color:_n,string:Dt,number:st,enum:Dt,boolean:Rt,formatted:gi,padding:Ae,resolvedImage:re,variableAnchorOffsetCollection:ue};return g.type==="array"?me(_[g.value]||an,g.length):_[g.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Wi(new ba(h,n)):Ns(s.errors)}class Vs{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!fs(s.expression)}evaluateWithoutErrorHandling(n,s,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,g,_,x)}evaluate(n,s,h,g,_,x){return this._styleExpression.evaluate(n,s,h,g,_,x)}}class Sa{constructor(n,s,h,g){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!fs(s.expression),this.interpolationType=g}evaluateWithoutErrorHandling(n,s,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,g,_,x)}evaluate(n,s,h,g,_,x){return this._styleExpression.evaluate(n,s,h,g,_,x)}interpolationFactor(n,s,h){return this.interpolationType?Qr.interpolationFactor(this.interpolationType,n,s,h):0}}function Ea(o,n){const s=jn(o,n);if(s.result==="error")return s;const h=s.value.expression,g=va(h);if(!g&&!Us(n))return Ns([new Ve("","data expressions not supported")]);const _=fl(h,["zoom"]);if(!_&&!vc(n))return Ns([new Ve("","zoom expressions not supported")]);const x=bo(h);return x||_?x instanceof Ve?Ns([x]):x instanceof Qr&&!Su(n)?Ns([new Ve("",'"interpolate" expressions cannot be used with this property')]):Wi(x?new Sa(g?"camera":"composite",s.value,x.labels,x instanceof Qr?x.interpolation:void 0):new Vs(g?"constant":"source",s.value)):Ns([new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class bl{constructor(n,s){this._parameters=n,this._specification=s,Se(this,_c(this._parameters,this._specification))}static deserialize(n){return new bl(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function bo(o){let n=null;if(o instanceof ml)n=bo(o.result);else if(o instanceof Ln){for(const s of o.args)if(n=bo(s),n)break}else(o instanceof Ls||o instanceof Qr)&&o.input instanceof ki&&o.input.name==="zoom"&&(n=o);return n instanceof Ve||o.eachChild(s=>{const h=bo(s);h instanceof Ve?n=h:!n&&h?n=new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new Ve("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function qo(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!qo(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Xr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ho(o){if(o==null)return{filter:()=>!0,needGeometry:!1};qo(o)||(o=Gs(o));const n=jn(o,Xr);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,g)=>n.value.evaluate(s,h,{},g),needGeometry:Ta(o)}}function Sl(o,n){return o<n?-1:o>n?1:0}function Ta(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(Ta(o[n]))return!0;return!1}function Gs(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Hs(o[1],o[2],"=="):n==="!="?So(Hs(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Hs(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(Gs))):n==="all"?["all"].concat(o.slice(1).map(Gs)):n==="none"?["all"].concat(o.slice(1).map(Gs).map(So)):n==="in"?Ca(o[1],o.slice(2)):n==="!in"?So(Ca(o[1],o.slice(2))):n==="has"?Mi(o[1]):n==="!has"?So(Mi(o[1])):n!=="within"||o;var s}function Hs(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Ca(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(Sl)]]:["filter-in-small",o,["literal",n]]}}function Mi(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function So(o){return["!",o]}function El(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let g="[";for(const _ of o)g+=`${El(_)},`;return`${g}]`}const s=Object.keys(o).sort();let h="{";for(let g=0;g<s.length;g++)h+=`${JSON.stringify(s[g])}:${El(o[s[g]])},`;return`${h}}`}function Tl(o){let n="";for(const s of sn)n+=`/${El(o[s])}`;return n}function Ia(o){const n=o.value;return n?[new z(o.key,n,"constants have been deprecated as of v8")]:[]}function sr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Eo(o){if(Array.isArray(o))return o.map(Eo);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=Eo(o[s]);return n}return sr(o)}function si(o){const n=o.key,s=o.value,h=o.valueSpec||{},g=o.objectElementValidators||{},_=o.style,x=o.styleSpec,S=o.validateSpec;let k=[];const O=Rn(s);if(O!=="object")return[new z(n,s,`object expected, ${O} found`)];for(const Z in s){const Y=Z.split(".")[0],se=h[Y]||h["*"];let fe;if(g[Y])fe=g[Y];else if(h[Y])fe=S;else if(g["*"])fe=g["*"];else{if(!h["*"]){k.push(new z(n,s[Z],`unknown property "${Z}"`));continue}fe=S}k=k.concat(fe({key:(n&&`${n}.`)+Z,value:s[Z],valueSpec:se,style:_,styleSpec:x,object:s,objectKey:Z,validateSpec:S},s))}for(const Z in h)g[Z]||h[Z].required&&h[Z].default===void 0&&s[Z]===void 0&&k.push(new z(n,s,`missing required property "${Z}"`));return k}function ms(o){const n=o.value,s=o.valueSpec,h=o.style,g=o.styleSpec,_=o.key,x=o.arrayElementValidator||o.validateSpec;if(Rn(n)!=="array")return[new z(_,n,`array expected, ${Rn(n)} found`)];if(s.length&&n.length!==s.length)return[new z(_,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new z(_,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let S={type:s.value,values:s.values};g.$version<7&&(S.function=s.function),Rn(s.value)==="object"&&(S=s.value);let k=[];for(let O=0;O<n.length;O++)k=k.concat(x({array:n,arrayIndex:O,value:n[O],valueSpec:S,validateSpec:o.validateSpec,style:h,styleSpec:g,key:`${_}[${O}]`}));return k}function fo(o){const n=o.key,s=o.value,h=o.valueSpec;let g=Rn(s);return g==="number"&&s!=s&&(g="NaN"),g!=="number"?[new z(n,s,`number expected, ${g} found`)]:"minimum"in h&&s<h.minimum?[new z(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new z(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Cl(o){const n=o.valueSpec,s=sr(o.value.type);let h,g,_,x={};const S=s!=="categorical"&&o.value.property===void 0,k=!S,O=Rn(o.value.stops)==="array"&&Rn(o.value.stops[0])==="array"&&Rn(o.value.stops[0][0])==="object",Z=si({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(fe){if(s==="identity")return[new z(fe.key,fe.value,'identity function may not have a "stops" property')];let ye=[];const Ce=fe.value;return ye=ye.concat(ms({key:fe.key,value:Ce,valueSpec:fe.valueSpec,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,arrayElementValidator:Y})),Rn(Ce)==="array"&&Ce.length===0&&ye.push(new z(fe.key,Ce,"array must have at least one stop")),ye},default:function(fe){return fe.validateSpec({key:fe.key,value:fe.value,valueSpec:n,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec})}}});return s==="identity"&&S&&Z.push(new z(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||Z.push(new z(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!Su(o.valueSpec)&&Z.push(new z(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(k&&!Us(o.valueSpec)?Z.push(new z(o.key,o.value,"property functions not supported")):S&&!vc(o.valueSpec)&&Z.push(new z(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!O||o.value.property!==void 0||Z.push(new z(o.key,o.value,'"property" property is required')),Z;function Y(fe){let ye=[];const Ce=fe.value,Re=fe.key;if(Rn(Ce)!=="array")return[new z(Re,Ce,`array expected, ${Rn(Ce)} found`)];if(Ce.length!==2)return[new z(Re,Ce,`array length 2 expected, length ${Ce.length} found`)];if(O){if(Rn(Ce[0])!=="object")return[new z(Re,Ce,`object expected, ${Rn(Ce[0])} found`)];if(Ce[0].zoom===void 0)return[new z(Re,Ce,"object stop key must have zoom")];if(Ce[0].value===void 0)return[new z(Re,Ce,"object stop key must have value")];if(_&&_>sr(Ce[0].zoom))return[new z(Re,Ce[0].zoom,"stop zoom values must appear in ascending order")];sr(Ce[0].zoom)!==_&&(_=sr(Ce[0].zoom),g=void 0,x={}),ye=ye.concat(si({key:`${Re}[0]`,value:Ce[0],valueSpec:{zoom:{}},validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{zoom:fo,value:se}}))}else ye=ye.concat(se({key:`${Re}[0]`,value:Ce[0],valueSpec:{},validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec},Ce));return Hn(Eo(Ce[1]))?ye.concat([new z(`${Re}[1]`,Ce[1],"expressions are not allowed in function stops.")]):ye.concat(fe.validateSpec({key:`${Re}[1]`,value:Ce[1],valueSpec:n,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec}))}function se(fe,ye){const Ce=Rn(fe.value),Re=sr(fe.value),Ue=fe.value!==null?fe.value:ye;if(h){if(Ce!==h)return[new z(fe.key,Ue,`${Ce} stop domain type must match previous stop domain type ${h}`)]}else h=Ce;if(Ce!=="number"&&Ce!=="string"&&Ce!=="boolean")return[new z(fe.key,Ue,"stop domain value must be a number, string, or boolean")];if(Ce!=="number"&&s!=="categorical"){let Je=`number expected, ${Ce} found`;return Us(n)&&s===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new z(fe.key,Ue,Je)]}return s!=="categorical"||Ce!=="number"||isFinite(Re)&&Math.floor(Re)===Re?s!=="categorical"&&Ce==="number"&&g!==void 0&&Re<g?[new z(fe.key,Ue,"stop domain values must appear in ascending order")]:(g=Re,s==="categorical"&&Re in x?[new z(fe.key,Ue,"stop domain values must be unique")]:(x[Re]=!0,[])):[new z(fe.key,Ue,`integer expected, found ${Re}`)]}}function Ws(o){const n=(o.expressionContext==="property"?Ea:jn)(Eo(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new z(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new z(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!fs(s))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!fs(s))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!fl(s,["zoom","feature-state"]))return[new z(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!va(s))return[new z(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ko(o){const n=o.key,s=o.value,h=o.valueSpec,g=[];return Array.isArray(h.values)?h.values.indexOf(sr(s))===-1&&g.push(new z(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(sr(s))===-1&&g.push(new z(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),g}function Yo(o){return qo(Eo(o.value))?Ws(Se({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Zs(o)}function Zs(o){const n=o.value,s=o.key;if(Rn(n)!=="array")return[new z(s,n,`array expected, ${Rn(n)} found`)];const h=o.styleSpec;let g,_=[];if(n.length<1)return[new z(s,n,"filter array must have at least 1 element")];switch(_=_.concat(Ko({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),sr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&sr(n[1])==="$type"&&_.push(new z(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&_.push(new z(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(g=Rn(n[1]),g!=="string"&&_.push(new z(`${s}[1]`,n[1],`string expected, ${g} found`)));for(let x=2;x<n.length;x++)g=Rn(n[x]),sr(n[1])==="$type"?_=_.concat(Ko({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new z(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)_=_.concat(Zs({key:`${s}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":g=Rn(n[1]),n.length!==2?_.push(new z(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new z(`${s}[1]`,n[1],`string expected, ${g} found`));break;case"within":g=Rn(n[1]),n.length!==2?_.push(new z(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):g!=="object"&&_.push(new z(`${s}[1]`,n[1],`object expected, ${g} found`))}return _}function Il(o,n){const s=o.key,h=o.validateSpec,g=o.style,_=o.styleSpec,x=o.value,S=o.objectKey,k=_[`${n}_${o.layerType}`];if(!k)return[];const O=S.match(/^(.*)-transition$/);if(n==="paint"&&O&&k[O[1]]&&k[O[1]].transition)return h({key:s,value:x,valueSpec:_.transition,style:g,styleSpec:_});const Z=o.valueSpec||k[S];if(!Z)return[new z(s,x,`unknown property "${S}"`)];let Y;if(Rn(x)==="string"&&Us(Z)&&!Z.tokens&&(Y=/^{([^}]+)}$/.exec(x)))return[new z(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Y[1])} }\`.`)];const se=[];return o.layerType==="symbol"&&(S==="text-field"&&g&&!g.glyphs&&se.push(new z(s,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&$s(Eo(x))&&sr(x.type)==="identity"&&se.push(new z(s,x,'"text-font" does not support identity functions'))),se.concat(h({key:o.key,value:x,valueSpec:Z,style:g,styleSpec:_,expressionContext:"property",propertyType:n,propertyKey:S}))}function Aa(o){return Il(o,"paint")}function G(o){return Il(o,"layout")}function ve(o){let n=[];const s=o.value,h=o.key,g=o.style,_=o.styleSpec;s.type||s.ref||n.push(new z(h,s,'either "type" or "ref" is required'));let x=sr(s.type);const S=sr(s.ref);if(s.id){const k=sr(s.id);for(let O=0;O<o.arrayIndex;O++){const Z=g.layers[O];sr(Z.id)===k&&n.push(new z(h,s.id,`duplicate layer id "${s.id}", previously used at line ${Z.id.__line__}`))}}if("ref"in s){let k;["type","source","source-layer","filter","layout"].forEach(O=>{O in s&&n.push(new z(h,s[O],`"${O}" is prohibited for ref layers`))}),g.layers.forEach(O=>{sr(O.id)===S&&(k=O)}),k?k.ref?n.push(new z(h,s.ref,"ref cannot reference another ref layer")):x=sr(k.type):n.push(new z(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){const k=g.sources&&g.sources[s.source],O=k&&sr(k.type);k?O==="vector"&&x==="raster"?n.push(new z(h,s.source,`layer "${s.id}" requires a raster source`)):O!=="raster-dem"&&x==="hillshade"?n.push(new z(h,s.source,`layer "${s.id}" requires a raster-dem source`)):O==="raster"&&x!=="raster"?n.push(new z(h,s.source,`layer "${s.id}" requires a vector source`)):O!=="vector"||s["source-layer"]?O==="raster-dem"&&x!=="hillshade"?n.push(new z(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||O==="geojson"&&k.lineMetrics||n.push(new z(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new z(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new z(h,s.source,`source "${s.source}" not found`))}else n.push(new z(h,s,'missing required property "source"'));return n=n.concat(si({key:h,value:s,valueSpec:_.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:_.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Yo,layout:k=>si({layer:s,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":O=>G(Se({layerType:x},O))}}),paint:k=>si({layer:s,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":O=>Aa(Se({layerType:x},O))}})}})),n}function De(o){const n=o.value,s=o.key,h=Rn(n);return h!=="string"?[new z(s,n,`string expected, ${h} found`)]:[]}const lt={promoteId:function({key:o,value:n}){if(Rn(n)==="string")return De({key:o,value:n});{const s=[];for(const h in n)s.push(...De({key:`${o}.${h}`,value:n[h]}));return s}}};function Ot(o){const n=o.value,s=o.key,h=o.styleSpec,g=o.style,_=o.validateSpec;if(!n.type)return[new z(s,n,'"type" is required')];const x=sr(n.type);let S;switch(x){case"vector":case"raster":return S=si({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:lt,validateSpec:_}),S;case"raster-dem":return S=function(k){var O;const Z=(O=k.sourceName)!==null&&O!==void 0?O:"",Y=k.value,se=k.styleSpec,fe=se.source_raster_dem,ye=k.style;let Ce=[];const Re=Rn(Y);if(Y===void 0)return Ce;if(Re!=="object")return Ce.push(new z("source_raster_dem",Y,`object expected, ${Re} found`)),Ce;const Ue=sr(Y.encoding)==="custom",Je=["redFactor","greenFactor","blueFactor","baseShift"],Ge=k.value.encoding?`"${k.value.encoding}"`:"Default";for(const qe in Y)!Ue&&Je.includes(qe)?Ce.push(new z(qe,Y[qe],`In "${Z}": "${qe}" is only valid when "encoding" is set to "custom". ${Ge} encoding found`)):fe[qe]?Ce=Ce.concat(k.validateSpec({key:qe,value:Y[qe],valueSpec:fe[qe],validateSpec:k.validateSpec,style:ye,styleSpec:se})):Ce.push(new z(qe,Y[qe],`unknown property "${qe}"`));return Ce}({sourceName:s,value:n,style:o.style,styleSpec:h,validateSpec:_}),S;case"geojson":if(S=si({key:s,value:n,valueSpec:h.source_geojson,style:g,styleSpec:h,validateSpec:_,objectElementValidators:lt}),n.cluster)for(const k in n.clusterProperties){const[O,Z]=n.clusterProperties[k],Y=typeof O=="string"?[O,["accumulated"],["get",k]]:O;S.push(...Ws({key:`${s}.${k}.map`,value:Z,validateSpec:_,expressionContext:"cluster-map"})),S.push(...Ws({key:`${s}.${k}.reduce`,value:Y,validateSpec:_,expressionContext:"cluster-reduce"}))}return S;case"video":return si({key:s,value:n,valueSpec:h.source_video,style:g,validateSpec:_,styleSpec:h});case"image":return si({key:s,value:n,valueSpec:h.source_image,style:g,validateSpec:_,styleSpec:h});case"canvas":return[new z(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ko({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,validateSpec:_,styleSpec:h})}}function Ct(o){const n=o.value,s=o.styleSpec,h=s.light,g=o.style;let _=[];const x=Rn(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new z("light",n,`object expected, ${x} found`)]),_;for(const S in n){const k=S.match(/^(.*)-transition$/);_=_.concat(k&&h[k[1]]&&h[k[1]].transition?o.validateSpec({key:S,value:n[S],valueSpec:s.transition,validateSpec:o.validateSpec,style:g,styleSpec:s}):h[S]?o.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:o.validateSpec,style:g,styleSpec:s}):[new z(S,n[S],`unknown property "${S}"`)])}return _}function Wt(o){const n=o.value,s=o.styleSpec,h=s.sky,g=o.style,_=Rn(n);if(n===void 0)return[];if(_!=="object")return[new z("sky",n,`object expected, ${_} found`)];let x=[];for(const S in n)x=x.concat(h[S]?gn({key:S,value:n[S],valueSpec:h[S],style:g,styleSpec:s}):[new z(S,n[S],`unknown property "${S}"`)]);return x}function Kt(o){const n=o.value,s=o.styleSpec,h=s.terrain,g=o.style;let _=[];const x=Rn(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new z("terrain",n,`object expected, ${x} found`)]),_;for(const S in n)_=_.concat(h[S]?o.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:o.validateSpec,style:g,styleSpec:s}):[new z(S,n[S],`unknown property "${S}"`)]);return _}function mn(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const g=[],_=[];for(const x in s)s[x].id&&g.includes(s[x].id)&&n.push(new z(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),g.push(s[x].id),s[x].url&&_.includes(s[x].url)&&n.push(new z(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),_.push(s[x].url),n=n.concat(si({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return De({key:h,value:s})}const Bn={"*":()=>[],array:ms,boolean:function(o){const n=o.value,s=o.key,h=Rn(n);return h!=="boolean"?[new z(s,n,`boolean expected, ${h} found`)]:[]},number:fo,color:function(o){const n=o.key,s=o.value,h=Rn(s);return h!=="string"?[new z(n,s,`color expected, ${h} found`)]:$n.parse(String(s))?[]:[new z(n,s,`color expected, "${s}" found`)]},constants:Ia,enum:Ko,filter:Yo,function:Cl,layer:ve,object:si,source:Ot,light:Ct,sky:Wt,terrain:Kt,string:De,formatted:function(o){return De(o).length===0?[]:Ws(o)},resolvedImage:function(o){return De(o).length===0?[]:Ws(o)},padding:function(o){const n=o.key,s=o.value;if(Rn(s)==="array"){if(s.length<1||s.length>4)return[new z(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let g=[];for(let _=0;_<s.length;_++)g=g.concat(o.validateSpec({key:`${n}[${_}]`,value:s[_],validateSpec:o.validateSpec,valueSpec:h}));return g}return fo({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,h=Rn(s),g=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new z(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<s.length;x+=2)_=_.concat(Ko({key:`${n}[${x}]`,value:s[x],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(ms({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:g}));return _},sprite:mn};function gn(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=gn,s.expression&&$s(sr(n))?Cl(o):s.expression&&Hn(Eo(n))?Ws(o):s.type&&Bn[s.type]?Bn[s.type](o):si(Se({},o,{valueSpec:s.type?h[s.type]:s}))}function Xn(o){const n=o.value,s=o.key,h=De(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new z(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new z(s,n,'"glyphs" url must include a "{range}" token'))),h}function Nn(o,n=et){let s=[];return s=s.concat(gn({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:gn,objectElementValidators:{glyphs:Xn,"*":()=>[]}})),o.constants&&(s=s.concat(Ia({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:gn}))),zr(s)}function Jn(o){return function(n){return o({...n,validateSpec:gn})}}function zr(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function pr(o){return function(...n){return zr(o.apply(this,n))}}Nn.source=pr(Jn(Ot)),Nn.sprite=pr(Jn(mn)),Nn.glyphs=pr(Jn(Xn)),Nn.light=pr(Jn(Ct)),Nn.sky=pr(Jn(Wt)),Nn.terrain=pr(Jn(Kt)),Nn.layer=pr(Jn(ve)),Nn.filter=pr(Jn(Yo)),Nn.paintProperty=pr(Jn(Aa)),Nn.layoutProperty=pr(Jn(G));const ai=Nn,To=ai.light,xc=ai.paintProperty,Xs=ai.layoutProperty;function Pa(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new Zt(new Error(h.message))),s=!0;return s}class gs{constructor(n,s,h){const g=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let k=0;k<this.d*this.d;k++){const O=x[3+k],Z=x[3+k+1];g.push(O===Z?null:x.subarray(O,Z))}const S=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const _=h/s*n;this.min=-_,this.max=n+_}insert(n,s,h,g,_){this._forEachCell(s,h,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,g,_,x){this.cells[_].push(x)}query(n,s,h,g,_){const x=this.min,S=this.max;if(n<=x&&s<=x&&S<=h&&S<=g&&!_)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(n,s,h,g,this._queryCell,k,{},_),k}}_queryCell(n,s,h,g,_,x,S,k){const O=this.cells[_];if(O!==null){const Z=this.keys,Y=this.bboxes;for(let se=0;se<O.length;se++){const fe=O[se];if(S[fe]===void 0){const ye=4*fe;(k?k(Y[ye+0],Y[ye+1],Y[ye+2],Y[ye+3]):n<=Y[ye+2]&&s<=Y[ye+3]&&h>=Y[ye+0]&&g>=Y[ye+1])?(S[fe]=!0,x.push(Z[fe])):S[fe]=!1}}}}_forEachCell(n,s,h,g,_,x,S,k){const O=this._convertToCellCoord(n),Z=this._convertToCellCoord(s),Y=this._convertToCellCoord(h),se=this._convertToCellCoord(g);for(let fe=O;fe<=Y;fe++)for(let ye=Z;ye<=se;ye++){const Ce=this.d*ye+fe;if((!k||k(this._convertFromCellCoord(fe),this._convertFromCellCoord(ye),this._convertFromCellCoord(fe+1),this._convertFromCellCoord(ye+1)))&&_.call(this,n,s,h,g,Ce,x,S,k))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const g=new Int32Array(s+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=s;for(let x=0;x<n.length;x++){const S=n[x];g[3+x]=_,g.set(S,_),_+=S.length}return g[3+n.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+n.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new gs(n.buffer)}}const qs={};function Nt(o,n,s={}){if(qs[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),qs[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Nt("Object",Object),Nt("TransferableGridIndex",gs),Nt("Color",$n),Nt("Error",Error),Nt("AJAXError",dt),Nt("ResolvedImage",Pi),Nt("StylePropertyFunction",bl),Nt("StyleExpression",ba,{omit:["_evaluator"]}),Nt("ZoomDependentExpression",Sa),Nt("ZoomConstantExpression",Vs),Nt("CompoundExpression",ki,{omit:["_evaluate"]});for(const o in Bs)Bs[o]._classRegistryKey||Nt(`Expression_${o}`,Bs[o]);function Wh(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function ka(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error)return o;if(Wh(o)||te(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(ka(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${s.name}`);if(!qs[h])throw new Error(`${h} is not registered.`);const g=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&g===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in o){if(!o.hasOwnProperty(_)||qs[h].omit.indexOf(_)>=0)continue;const x=o[_];g[_]=qs[h].shallow.indexOf(_)>=0?x:ka(x,n)}o instanceof Error&&(g.message=o.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(g.$name=h),g}throw new Error("can't serialize object of type "+typeof o)}function Al(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||Wh(o)||te(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Al);if(typeof o=="object"){const n=o.$name||"Object";if(!qs[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=qs[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const g of Object.keys(o)){if(g==="$name")continue;const _=o[g];h[g]=qs[n].shallow.indexOf(g)>=0?_:Al(_)}return h}throw new Error("can't deserialize object of type "+typeof o)}class Zh{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const jt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Tu(o){for(const n of o)if(bc(n.charCodeAt(0)))return!0;return!1}function wc(o){for(const n of o)if(!rp(n.charCodeAt(0)))return!1;return!0}function rp(o){return!(jt.Arabic(o)||jt["Arabic Supplement"](o)||jt["Arabic Extended-A"](o)||jt["Arabic Presentation Forms-A"](o)||jt["Arabic Presentation Forms-B"](o))}function bc(o){return!(o!==746&&o!==747&&(o<4352||!(jt["Bopomofo Extended"](o)||jt.Bopomofo(o)||jt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||jt["CJK Compatibility Ideographs"](o)||jt["CJK Compatibility"](o)||jt["CJK Radicals Supplement"](o)||jt["CJK Strokes"](o)||!(!jt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||jt["CJK Unified Ideographs Extension A"](o)||jt["CJK Unified Ideographs"](o)||jt["Enclosed CJK Letters and Months"](o)||jt["Hangul Compatibility Jamo"](o)||jt["Hangul Jamo Extended-A"](o)||jt["Hangul Jamo Extended-B"](o)||jt["Hangul Jamo"](o)||jt["Hangul Syllables"](o)||jt.Hiragana(o)||jt["Ideographic Description Characters"](o)||jt.Kanbun(o)||jt["Kangxi Radicals"](o)||jt["Katakana Phonetic Extensions"](o)||jt.Katakana(o)&&o!==12540||!(!jt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!jt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||jt["Unified Canadian Aboriginal Syllabics"](o)||jt["Unified Canadian Aboriginal Syllabics Extended"](o)||jt["Vertical Forms"](o)||jt["Yijing Hexagram Symbols"](o)||jt["Yi Syllables"](o)||jt["Yi Radicals"](o))))}function Xh(o){return!(bc(o)||function(n){return!!(jt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||jt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||jt["Letterlike Symbols"](n)||jt["Number Forms"](n)||jt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||jt["Control Pictures"](n)&&n!==9251||jt["Optical Character Recognition"](n)||jt["Enclosed Alphanumerics"](n)||jt["Geometric Shapes"](n)||jt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||jt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||jt["CJK Symbols and Punctuation"](n)||jt.Katakana(n)||jt["Private Use Area"](n)||jt["CJK Compatibility Forms"](n)||jt["Small Form Variants"](n)||jt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function qh(o){return o>=1424&&o<=2303||jt["Arabic Presentation Forms-A"](o)||jt["Arabic Presentation Forms-B"](o)}function Kh(o,n){return!(!n&&qh(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||jt.Khmer(o))}function ip(o){for(const n of o)if(qh(n.charCodeAt(0)))return!0;return!1}const Ma=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class tr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Zh,this.transition={})}isSupportedScript(n){return function(s,h){for(const g of s)if(!Kh(g.charCodeAt(0),h))return!1;return!0}(n,Ma.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class Sc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,g){if($s(h))return new bl(h,g);if(Hn(h)){const _=Ea(h,g);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=h;return g.type==="color"&&typeof h=="string"?_=$n.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(_=Zr.parse(h)):_=_i.parse(h),{kind:"constant",evaluate:()=>_}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Ec{constructor(n){this.property=n,this.value=new Sc(n,void 0)}transitioned(n,s){return new Jh(this.property,this.value,s,E({},n.transition,this.transition),n.now)}untransitioned(){return new Jh(this.property,this.value,null,{},0)}}class Yh{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return q(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Ec(this._values[n].property)),this._values[n].value=new Sc(this._values[n].property,s===null?void 0:q(s))}getTransition(n){return q(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Ec(this._values[n].property)),this._values[n].transition=q(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const g=this.getTransition(s);g!==void 0&&(n[`${s}-transition`]=g)}return n}transitioned(n,s){const h=new op(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(n,s._values[g]);return h}untransitioned(){const n=new op(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Jh{constructor(n,s,h,g,_){this.property=n,this.value=s,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,n.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const g=n.now||0,_=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return x.possiblyEvaluate(n,s,h);{const S=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),_,function(k){if(k<=0)return 0;if(k>=1)return 1;const O=k*k,Z=O*k;return 4*(k<.5?Z:3*(k-O)+Z-.75)}(S))}}return _}}class op{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const g=new Cu(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(n,s,h);return g}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class py{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return q(this._values[n].value)}setValue(n,s){this._values[n]=new Sc(this._values[n].property,s===null?void 0:q(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const g=new Cu(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(n,s,h);return g}}class Co{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,g){return this.property.evaluate(this.value,this.parameters,n,s,h,g)}}class Cu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class qt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const g=oi[this.specification.type];return g?g(n,s,h):n}}class nn{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,g){return new Co(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,g)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Co(this,{kind:"constant",value:void 0},n.parameters);const g=oi[this.specification.type];if(g){const _=g(n.value.value,s.value.value,h);return new Co(this,{kind:"constant",value:_},n.parameters)}return n}evaluate(n,s,h,g,_,x){return n.kind==="constant"?n.value:n.evaluate(s,h,g,_,x)}}class za extends nn{possiblyEvaluate(n,s,h,g){if(n.value===void 0)return new Co(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},h,g),x=n.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,S=this._calculate(x,x,x,s);return new Co(this,{kind:"constant",value:S},s)}if(n.expression.kind==="camera"){const _=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Co(this,{kind:"constant",value:_},s)}return new Co(this,n.expression,s)}evaluate(n,s,h,g,_,x){if(n.kind==="source"){const S=n.evaluate(s,h,g,_,x);return this._calculate(S,S,S,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,g),n.evaluate({zoom:Math.floor(s.zoom)},h,g),n.evaluate({zoom:Math.floor(s.zoom)+1},h,g),s):n.value}_calculate(n,s,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Qh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,g){if(n.value!==void 0){if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},h,g);return this._calculate(_,_,_,s)}return this._calculate(n.expression.evaluate(new tr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new tr(Math.floor(s.zoom),s)),n.expression.evaluate(new tr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Iu{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,g){return!!n.expression.evaluate(s,null,{},h,g)}interpolate(){return!1}}class zi{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const g=this.defaultPropertyValues[s]=new Sc(h,void 0),_=this.defaultTransitionablePropertyValues[s]=new Ec(h);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=g.possiblyEvaluate({})}}}Nt("DataDrivenProperty",nn),Nt("DataConstantProperty",qt),Nt("CrossFadedDataDrivenProperty",za),Nt("CrossFadedProperty",Qh),Nt("ColorRampProperty",Iu);const sp="-transition";class Io extends En{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new py(s.layout)),s.paint)){this._transitionablePaint=new Yh(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Cu(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(Xs,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(sp)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(xc,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(sp))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const g=this._transitionablePaint._values[n],_=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),S=g.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const k=this._transitionablePaint._values[n].value;return k.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(n,S,k)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ee(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,g,_={}){return(!_||_.validate!==!1)&&Pa(this,n.call(ai,{key:s,layerType:this.type,objectKey:h,value:g,styleSpec:et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Co&&Us(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const ap={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Pl{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class mr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Er(o,n=1){let s=0,h=0;return{members:o.map(g=>{const _=ap[g.type].BYTES_PER_ELEMENT,x=s=lp(s,Math.max(n,_)),S=g.components||1;return h=Math.max(h,_),s+=_*S,{name:g.name,type:g.type,components:S,offset:x}}),size:lp(s,Math.max(h,n)),alignment:n}}function lp(o,n){return Math.ceil(o/n)*n}class Au extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const g=2*n;return this.int16[g+0]=s,this.int16[g+1]=h,n}}Au.prototype.bytesPerElement=4,Nt("StructArrayLayout2i4",Au);class Tc extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.int16[_+0]=s,this.int16[_+1]=h,this.int16[_+2]=g,n}}Tc.prototype.bytesPerElement=6,Nt("StructArrayLayout3i6",Tc);class Ks extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,g)}emplace(n,s,h,g,_){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=g,this.int16[x+3]=_,n}}Ks.prototype.bytesPerElement=8,Nt("StructArrayLayout4i8",Ks);class ed extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,S){const k=6*n;return this.int16[k+0]=s,this.int16[k+1]=h,this.int16[k+2]=g,this.int16[k+3]=_,this.int16[k+4]=x,this.int16[k+5]=S,n}}ed.prototype.bytesPerElement=12,Nt("StructArrayLayout2i4i12",ed);class td extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,S){const k=4*n,O=8*n;return this.int16[k+0]=s,this.int16[k+1]=h,this.uint8[O+4]=g,this.uint8[O+5]=_,this.uint8[O+6]=x,this.uint8[O+7]=S,n}}td.prototype.bytesPerElement=8,Nt("StructArrayLayout2i4ub8",td);class Pu extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const g=2*n;return this.float32[g+0]=s,this.float32[g+1]=h,n}}Pu.prototype.bytesPerElement=8,Nt("StructArrayLayout2f8",Pu);class nd extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,S,k,O,Z){const Y=this.length;return this.resize(Y+1),this.emplace(Y,n,s,h,g,_,x,S,k,O,Z)}emplace(n,s,h,g,_,x,S,k,O,Z,Y){const se=10*n;return this.uint16[se+0]=s,this.uint16[se+1]=h,this.uint16[se+2]=g,this.uint16[se+3]=_,this.uint16[se+4]=x,this.uint16[se+5]=S,this.uint16[se+6]=k,this.uint16[se+7]=O,this.uint16[se+8]=Z,this.uint16[se+9]=Y,n}}nd.prototype.bytesPerElement=20,Nt("StructArrayLayout10ui20",nd);class Cc extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,S,k,O,Z,Y,se){const fe=this.length;return this.resize(fe+1),this.emplace(fe,n,s,h,g,_,x,S,k,O,Z,Y,se)}emplace(n,s,h,g,_,x,S,k,O,Z,Y,se,fe){const ye=12*n;return this.int16[ye+0]=s,this.int16[ye+1]=h,this.int16[ye+2]=g,this.int16[ye+3]=_,this.uint16[ye+4]=x,this.uint16[ye+5]=S,this.uint16[ye+6]=k,this.uint16[ye+7]=O,this.int16[ye+8]=Z,this.int16[ye+9]=Y,this.int16[ye+10]=se,this.int16[ye+11]=fe,n}}Cc.prototype.bytesPerElement=24,Nt("StructArrayLayout4i4ui4i24",Cc);class rd extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.float32[_+0]=s,this.float32[_+1]=h,this.float32[_+2]=g,n}}rd.prototype.bytesPerElement=12,Nt("StructArrayLayout3f12",rd);class id extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}id.prototype.bytesPerElement=4,Nt("StructArrayLayout1ul4",id);class ys extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,S,k,O){const Z=this.length;return this.resize(Z+1),this.emplace(Z,n,s,h,g,_,x,S,k,O)}emplace(n,s,h,g,_,x,S,k,O,Z){const Y=10*n,se=5*n;return this.int16[Y+0]=s,this.int16[Y+1]=h,this.int16[Y+2]=g,this.int16[Y+3]=_,this.int16[Y+4]=x,this.int16[Y+5]=S,this.uint32[se+3]=k,this.uint16[Y+8]=O,this.uint16[Y+9]=Z,n}}ys.prototype.bytesPerElement=20,Nt("StructArrayLayout6i1ul2ui20",ys);class Ic extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,S){const k=6*n;return this.int16[k+0]=s,this.int16[k+1]=h,this.int16[k+2]=g,this.int16[k+3]=_,this.int16[k+4]=x,this.int16[k+5]=S,n}}Ic.prototype.bytesPerElement=12,Nt("StructArrayLayout2i2i2i12",Ic);class ku extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,g,_)}emplace(n,s,h,g,_,x){const S=4*n,k=8*n;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=g,this.int16[k+6]=_,this.int16[k+7]=x,n}}ku.prototype.bytesPerElement=16,Nt("StructArrayLayout2f1f2i16",ku);class Ac extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,g)}emplace(n,s,h,g,_){const x=12*n,S=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=h,this.float32[S+1]=g,this.float32[S+2]=_,n}}Ac.prototype.bytesPerElement=12,Nt("StructArrayLayout2ub2f12",Ac);class kl extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.uint16[_+0]=s,this.uint16[_+1]=h,this.uint16[_+2]=g,n}}kl.prototype.bytesPerElement=6,Nt("StructArrayLayout3ui6",kl);class od extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,S,k,O,Z,Y,se,fe,ye,Ce,Re,Ue){const Je=this.length;return this.resize(Je+1),this.emplace(Je,n,s,h,g,_,x,S,k,O,Z,Y,se,fe,ye,Ce,Re,Ue)}emplace(n,s,h,g,_,x,S,k,O,Z,Y,se,fe,ye,Ce,Re,Ue,Je){const Ge=24*n,qe=12*n,mt=48*n;return this.int16[Ge+0]=s,this.int16[Ge+1]=h,this.uint16[Ge+2]=g,this.uint16[Ge+3]=_,this.uint32[qe+2]=x,this.uint32[qe+3]=S,this.uint32[qe+4]=k,this.uint16[Ge+10]=O,this.uint16[Ge+11]=Z,this.uint16[Ge+12]=Y,this.float32[qe+7]=se,this.float32[qe+8]=fe,this.uint8[mt+36]=ye,this.uint8[mt+37]=Ce,this.uint8[mt+38]=Re,this.uint32[qe+10]=Ue,this.int16[Ge+22]=Je,n}}od.prototype.bytesPerElement=48,Nt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",od);class Ml extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,S,k,O,Z,Y,se,fe,ye,Ce,Re,Ue,Je,Ge,qe,mt,vt,Ft,Ht,Lt,zt,It,Ut){const kt=this.length;return this.resize(kt+1),this.emplace(kt,n,s,h,g,_,x,S,k,O,Z,Y,se,fe,ye,Ce,Re,Ue,Je,Ge,qe,mt,vt,Ft,Ht,Lt,zt,It,Ut)}emplace(n,s,h,g,_,x,S,k,O,Z,Y,se,fe,ye,Ce,Re,Ue,Je,Ge,qe,mt,vt,Ft,Ht,Lt,zt,It,Ut,kt){const Et=32*n,en=16*n;return this.int16[Et+0]=s,this.int16[Et+1]=h,this.int16[Et+2]=g,this.int16[Et+3]=_,this.int16[Et+4]=x,this.int16[Et+5]=S,this.int16[Et+6]=k,this.int16[Et+7]=O,this.uint16[Et+8]=Z,this.uint16[Et+9]=Y,this.uint16[Et+10]=se,this.uint16[Et+11]=fe,this.uint16[Et+12]=ye,this.uint16[Et+13]=Ce,this.uint16[Et+14]=Re,this.uint16[Et+15]=Ue,this.uint16[Et+16]=Je,this.uint16[Et+17]=Ge,this.uint16[Et+18]=qe,this.uint16[Et+19]=mt,this.uint16[Et+20]=vt,this.uint16[Et+21]=Ft,this.uint16[Et+22]=Ht,this.uint32[en+12]=Lt,this.float32[en+13]=zt,this.float32[en+14]=It,this.uint16[Et+30]=Ut,this.uint16[Et+31]=kt,n}}Ml.prototype.bytesPerElement=64,Nt("StructArrayLayout8i15ui1ul2f2ui64",Ml);class Ys extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}Ys.prototype.bytesPerElement=4,Nt("StructArrayLayout1f4",Ys);class sd extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.uint16[6*n+0]=s,this.float32[_+1]=h,this.float32[_+2]=g,n}}sd.prototype.bytesPerElement=12,Nt("StructArrayLayout1ui2f12",sd);class Pc extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=4*n;return this.uint32[2*n+0]=s,this.uint16[_+2]=h,this.uint16[_+3]=g,n}}Pc.prototype.bytesPerElement=8,Nt("StructArrayLayout1ul2ui8",Pc);class Ra extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const g=2*n;return this.uint16[g+0]=s,this.uint16[g+1]=h,n}}Ra.prototype.bytesPerElement=4,Nt("StructArrayLayout2ui4",Ra);class ad extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}ad.prototype.bytesPerElement=2,Nt("StructArrayLayout1ui2",ad);class ld extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,g)}emplace(n,s,h,g,_){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=g,this.float32[x+3]=_,n}}ld.prototype.bytesPerElement=16,Nt("StructArrayLayout4f16",ld);class ud extends Pl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new w(this.anchorPointX,this.anchorPointY)}}ud.prototype.size=20;class up extends ys{get(n){return new ud(this,n)}}Nt("CollisionBoxArray",up);class y extends Pl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}y.prototype.size=48;class r extends od{get(n){return new y(this,n)}}Nt("PlacedSymbolArray",r);class l extends Pl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}l.prototype.size=64;class f extends Ml{get(n){return new l(this,n)}}Nt("SymbolInstanceArray",f);class m extends Ys{getoffsetX(n){return this.float32[1*n+0]}}Nt("GlyphOffsetArray",m);class v extends Tc{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Nt("SymbolLineVertexArray",v);class I extends Pl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}I.prototype.size=12;class P extends sd{get(n){return new I(this,n)}}Nt("TextAnchorOffsetArray",P);class M extends Pl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}M.prototype.size=8;class H extends Pc{get(n){return new M(this,n)}}Nt("FeatureIndexArray",H);class Q extends Au{}class ne extends Au{}class ge extends Au{}class Me extends ed{}class ke extends td{}class Le extends Pu{}class Te extends nd{}class Xe extends Cc{}class rt extends rd{}class je extends id{}class Ke extends Ic{}class it extends Ac{}class ot extends kl{}class ht extends Ra{}const St=Er([{name:"a_pos",components:2,type:"Int16"}],4),{members:xt}=St;class bt{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,g){let _=this.segments[this.segments.length-1];return n>bt.MAX_VERTEX_ARRAY_LENGTH&&_e(`Max vertices per segment is ${bt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!_||_.vertexLength+n>bt.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g)&&(_={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},g!==void 0&&(_.sortKey=g),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,g){return new bt([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function Bt(o,n){return 256*(o=X(Math.floor(o),0,255))+X(Math.floor(n),0,255)}bt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Nt("SegmentVector",bt);const yn=Er([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Pt={exports:{}},un={exports:{}};un.exports=function(o,n){var s,h,g,_,x,S,k,O;for(h=o.length-(s=3&o.length),g=n,x=3432918353,S=461845907,O=0;O<h;)k=255&o.charCodeAt(O)|(255&o.charCodeAt(++O))<<8|(255&o.charCodeAt(++O))<<16|(255&o.charCodeAt(++O))<<24,++O,g=27492+(65535&(_=5*(65535&(g=(g^=k=(65535&(k=(k=(65535&k)*x+(((k>>>16)*x&65535)<<16)&4294967295)<<15|k>>>17))*S+(((k>>>16)*S&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(k=0,s){case 3:k^=(255&o.charCodeAt(O+2))<<16;case 2:k^=(255&o.charCodeAt(O+1))<<8;case 1:g^=k=(65535&(k=(k=(65535&(k^=255&o.charCodeAt(O)))*x+(((k>>>16)*x&65535)<<16)&4294967295)<<15|k>>>17))*S+(((k>>>16)*S&65535)<<16)&4294967295}return g^=o.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var xn=un.exports,kn={exports:{}};kn.exports=function(o,n){for(var s,h=o.length,g=n^h,_=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(_)|(255&o.charCodeAt(++_))<<8|(255&o.charCodeAt(++_))<<16|(255&o.charCodeAt(++_))<<24))+((1540483477*(s>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++_;switch(h){case 3:g^=(255&o.charCodeAt(_+2))<<16;case 2:g^=(255&o.charCodeAt(_+1))<<8;case 1:g=1540483477*(65535&(g^=255&o.charCodeAt(_)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var hn=xn,wn=kn.exports;Pt.exports=hn,Pt.exports.murmur3=hn,Pt.exports.murmur2=wn;var bn=b(Pt.exports);class dr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,g){this.ids.push(Yn(n)),this.positions.push(s,h,g)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Yn(n);let h=0,g=this.ids.length-1;for(;h<g;){const x=h+g>>1;this.ids[x]>=s?g=x:h=x+1}const _=[];for(;this.ids[h]===s;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(n,s){const h=new Float64Array(n.ids),g=new Uint32Array(n.positions);return Ri(h,g,0,h.length-1),s&&s.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(n){const s=new dr;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Yn(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:bn(String(o))}function Ri(o,n,s,h){for(;s<h;){const g=o[s+h>>1];let _=s-1,x=h+1;for(;;){do _++;while(o[_]<g);do x--;while(o[x]>g);if(_>=x)break;Rr(o,_,x),Rr(n,3*_,3*x),Rr(n,3*_+1,3*x+1),Rr(n,3*_+2,3*x+2)}x-s<h-x?(Ri(o,n,s,x),s=x+1):(Ri(o,n,x+1,h),h=x)}}function Rr(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}Nt("FeaturePositionMap",dr);class Qn{constructor(n,s){this.gl=n.gl,this.location=s}}class li extends Qn{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Ao extends Qn{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Jo extends Qn{constructor(n,s){super(n,s),this.current=$n.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Oa=new Float32Array(16);function La(o){return[Bt(255*o.r,255*o.g),Bt(255*o.b,255*o.a)]}class Qo{constructor(n,s,h){this.value=n,this.uniformNames=s.map(g=>`u_${g}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Jo(n,s):new li(n,s)}}class Po{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&n.set(_)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new Ao(n,s):new li(n,s)}}class gr{constructor(n,s,h,g){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(n,s,h,g,_){const x=this.paintVertexArray.length,S=this.expression.evaluate(new tr(0),s,{},g,[],_);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,s,h,g){const _=this.expression.evaluate({zoom:0},h,g);this._setPaintValue(n,s,_)}_setPaintValue(n,s,h){if(this.type==="color"){const g=La(h);for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=n;g<s;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class nr{constructor(n,s,h,g,_,x){this.expression=n,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,g,_){const x=this.expression.evaluate(new tr(this.zoom),s,{},g,[],_),S=this.expression.evaluate(new tr(this.zoom+1),s,{},g,[],_),k=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(k,n,x,S)}updatePaintArray(n,s,h,g){const _=this.expression.evaluate({zoom:this.zoom},h,g),x=this.expression.evaluate({zoom:this.zoom+1},h,g);this._setPaintValue(n,s,_,x)}_setPaintValue(n,s,h,g){if(this.type==="color"){const _=La(h),x=La(g);for(let S=n;S<s;S++)this.paintVertexArray.emplace(S,_[0],_[1],x[0],x[1])}else{for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,g=X(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(g)}getBinding(n,s,h){return new li(n,s)}}class br{constructor(n,s,h,g,_,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(n,s,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(g,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,g,_){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(n,s,h,g){if(!g||!h)return;const{min:_,mid:x,max:S}=h,k=g[_],O=g[x],Z=g[S];if(k&&O&&Z)for(let Y=n;Y<s;Y++)this.zoomInPaintVertexArray.emplace(Y,O.tl[0],O.tl[1],O.br[0],O.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],O.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace(Y,O.tl[0],O.tl[1],O.br[0],O.br[1],Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],O.pixelRatio,Z.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,yn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,yn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class zl{constructor(n,s,h){this.binders={},this._buffers=[];const g=[];for(const _ in n.paint._values){if(!h(_))continue;const x=n.paint.get(_);if(!(x instanceof Co&&Us(x.property.specification)))continue;const S=qr(_,n.type),k=x.value,O=x.property.specification.type,Z=x.property.useIntegerZoom,Y=x.property.specification["property-type"],se=Y==="cross-faded"||Y==="cross-faded-data-driven";if(k.kind==="constant")this.binders[_]=se?new Po(k.value,S):new Qo(k.value,S,O),g.push(`/u_${_}`);else if(k.kind==="source"||se){const fe=Zi(_,O,"source");this.binders[_]=se?new br(k,O,Z,s,fe,n.id):new gr(k,S,O,fe),g.push(`/a_${_}`)}else{const fe=Zi(_,O,"composite");this.binders[_]=new nr(k,S,O,Z,s,fe),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof gr||s instanceof nr?s.maxValue:0}populatePaintArrays(n,s,h,g,_){for(const x in this.binders){const S=this.binders[x];(S instanceof gr||S instanceof nr||S instanceof br)&&S.populatePaintArray(n,s,h,g,_)}}setConstantPatternPositions(n,s){for(const h in this.binders){const g=this.binders[h];g instanceof Po&&g.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,g,_){let x=!1;for(const S in n){const k=s.getPositions(S);for(const O of k){const Z=h.feature(O.index);for(const Y in this.binders){const se=this.binders[Y];if((se instanceof gr||se instanceof nr||se instanceof br)&&se.expression.isStateDependent===!0){const fe=g.paint.get(Y);se.expression=fe.value,se.updatePaintArray(O.start,O.end,Z,n[S],_),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Qo||h instanceof Po)&&n.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof gr||h instanceof nr)for(let g=0;g<h.paintVertexAttributes.length;g++)n.push(h.paintVertexAttributes[g].name);else if(h instanceof br)for(let g=0;g<yn.members.length;g++)n.push(yn.members[g].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Qo||h instanceof Po||h instanceof nr)for(const g of h.uniformNames)n.push(g)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof Qo||_ instanceof Po||_ instanceof nr){for(const x of _.uniformNames)if(s[x]){const S=_.getBinding(n,s[x],x);h.push({name:x,property:g,binding:S})}}}return h}setUniforms(n,s,h,g){for(const{name:_,property:x,binding:S}of s)this.binders[x].setUniform(S,g,h.get(x),_)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof br){const g=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof gr||h instanceof nr)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof gr||h instanceof nr||h instanceof br)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof gr||s instanceof nr||s instanceof br)&&s.destroy()}}}class ar{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const g of n)this.programConfigurations[g.id]=new zl(g,s,h);this.needsUpload=!1,this._featureMap=new dr,this._bufferOffset=0}populatePaintArrays(n,s,h,g,_,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,s,g,_,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,g){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(n,this._featureMap,s,_,g)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function qr(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function Zi(o,n,s){const h={color:{source:Pu,composite:ld},number:{source:Ys,composite:Pu}},g=function(_){return{"line-pattern":{source:Te,composite:Te},"fill-pattern":{source:Te,composite:Te},"fill-extrusion-pattern":{source:Te,composite:Te}}[_]}(o);return g&&g[s]||h[n][s]}Nt("ConstantBinder",Qo),Nt("CrossFadedConstantBinder",Po),Nt("SourceExpressionBinder",gr),Nt("CrossFadedCompositeBinder",br),Nt("CompositeExpressionBinder",nr),Nt("ProgramConfiguration",zl,{omit:["_buffers"]}),Nt("ProgramConfigurationSet",ar);const An=8192,cd=Math.pow(2,14)-1,cp=-cd-1;function Fa(o){const n=An/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const g=s[h];for(let _=0;_<g.length;_++){const x=g[_],S=Math.round(x.x*n),k=Math.round(x.y*n);x.x=X(S,cp,cd),x.y=X(k,cp,cd),(S<x.x||S>x.x+1||k<x.y||k>x.y+1)&&_e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function ja(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?Fa(o):[]}}function kc(o,n,s,h,g){o.emplaceBack(2*n+(h+1)/2,2*s+(g+1)/2)}class hd{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new ne,this.indexArray=new ot,this.segments=new bt,this.programConfigurations=new ar(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const g=this.layers[0],_=[];let x=null,S=!1;g.type==="circle"&&(x=g.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:k,id:O,index:Z,sourceLayerIndex:Y}of n){const se=this.layers[0]._featureFilter.needGeometry,fe=ja(k,se);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),fe,h))continue;const ye=S?x.evaluate(fe,{},h):void 0,Ce={id:O,properties:k.properties,type:k.type,sourceLayerIndex:Y,index:Z,geometry:se?fe.geometry:Fa(k),patterns:{},sortKey:ye};_.push(Ce)}S&&_.sort((k,O)=>k.sortKey-O.sortKey);for(const k of _){const{geometry:O,index:Z,sourceLayerIndex:Y}=k,se=n[Z].feature;this.addFeature(k,O,Z,h),s.featureIndex.insert(se,O,Z,Y,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,xt),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,g){for(const _ of s)for(const x of _){const S=x.x,k=x.y;if(S<0||S>=An||k<0||k>=An)continue;const O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),Z=O.vertexLength;kc(this.layoutVertexArray,S,k,-1,-1),kc(this.layoutVertexArray,S,k,1,-1),kc(this.layoutVertexArray,S,k,1,1),kc(this.layoutVertexArray,S,k,-1,1),this.indexArray.emplaceBack(Z,Z+1,Z+2),this.indexArray.emplaceBack(Z,Z+3,Z+2),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},g)}}function Da(o,n){for(let s=0;s<o.length;s++)if(Mc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Mc(o,n[s]))return!0;return!!Mu(o,n)}function hp(o,n,s){return!!Mc(o,n)||!!zu(n,o,s)}function dd(o,n){if(o.length===1)return Px(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let g=0;g<h.length;g++)if(Mc(o,h[g]))return!0}for(let s=0;s<o.length;s++)if(Px(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Mu(o,n[s]))return!0;return!1}function dp(o,n,s){if(o.length>1){if(Mu(o,n))return!0;for(let h=0;h<n.length;h++)if(zu(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(zu(o[h],n,s))return!0;return!1}function Mu(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],g=o[s+1];for(let _=0;_<n.length-1;_++)if(fp(h,g,n[_],n[_+1]))return!0}return!1}function fp(o,n,s,h){return de(o,s,h)!==de(n,s,h)&&de(o,n,s)!==de(o,n,h)}function zu(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let g=1;g<n.length;g++)if(Ax(o,n[g-1],n[g])<h)return!0;return!1}function Ax(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const g=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(g<0?n:g>1?s:s.sub(n)._mult(g)._add(n))}function Px(o,n){let s,h,g,_=!1;for(let x=0;x<o.length;x++){s=o[x];for(let S=0,k=s.length-1;S<s.length;k=S++)h=s[S],g=s[k],h.y>n.y!=g.y>n.y&&n.x<(g.x-h.x)*(n.y-h.y)/(g.y-h.y)+h.x&&(_=!_)}return _}function Mc(o,n){let s=!1;for(let h=0,g=o.length-1;h<o.length;g=h++){const _=o[h],x=o[g];_.y>n.y!=x.y>n.y&&n.x<(x.x-_.x)*(n.y-_.y)/(x.y-_.y)+_.x&&(s=!s)}return s}function _A(o,n,s){const h=s[0],g=s[2];if(o.x<h.x&&n.x<h.x||o.x>g.x&&n.x>g.x||o.y<h.y&&n.y<h.y||o.y>g.y&&n.y>g.y)return!1;const _=de(o,n,s[0]);return _!==de(o,n,s[1])||_!==de(o,n,s[2])||_!==de(o,n,s[3])}function fd(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function pp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function mp(o,n,s,h,g){if(!n[0]&&!n[1])return o;const _=w.convert(n)._mult(g);s==="viewport"&&_._rotate(-h);const x=[];for(let S=0;S<o.length;S++)x.push(o[S].sub(_));return x}let kx,Mx;Nt("CircleBucket",hd,{omit:["layers"]});var xA={get paint(){return Mx=Mx||new zi({"circle-radius":new nn(et.paint_circle["circle-radius"]),"circle-color":new nn(et.paint_circle["circle-color"]),"circle-blur":new nn(et.paint_circle["circle-blur"]),"circle-opacity":new nn(et.paint_circle["circle-opacity"]),"circle-translate":new qt(et.paint_circle["circle-translate"]),"circle-translate-anchor":new qt(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qt(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qt(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new nn(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new nn(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new nn(et.paint_circle["circle-stroke-opacity"])})},get layout(){return kx=kx||new zi({"circle-sort-key":new nn(et.layout_circle["circle-sort-key"])})}},Oi=1e-6,zc=typeof Float32Array<"u"?Float32Array:Array;function my(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function zx(o,n,s){var h=n[0],g=n[1],_=n[2],x=n[3],S=n[4],k=n[5],O=n[6],Z=n[7],Y=n[8],se=n[9],fe=n[10],ye=n[11],Ce=n[12],Re=n[13],Ue=n[14],Je=n[15],Ge=s[0],qe=s[1],mt=s[2],vt=s[3];return o[0]=Ge*h+qe*S+mt*Y+vt*Ce,o[1]=Ge*g+qe*k+mt*se+vt*Re,o[2]=Ge*_+qe*O+mt*fe+vt*Ue,o[3]=Ge*x+qe*Z+mt*ye+vt*Je,o[4]=(Ge=s[4])*h+(qe=s[5])*S+(mt=s[6])*Y+(vt=s[7])*Ce,o[5]=Ge*g+qe*k+mt*se+vt*Re,o[6]=Ge*_+qe*O+mt*fe+vt*Ue,o[7]=Ge*x+qe*Z+mt*ye+vt*Je,o[8]=(Ge=s[8])*h+(qe=s[9])*S+(mt=s[10])*Y+(vt=s[11])*Ce,o[9]=Ge*g+qe*k+mt*se+vt*Re,o[10]=Ge*_+qe*O+mt*fe+vt*Ue,o[11]=Ge*x+qe*Z+mt*ye+vt*Je,o[12]=(Ge=s[12])*h+(qe=s[13])*S+(mt=s[14])*Y+(vt=s[15])*Ce,o[13]=Ge*g+qe*k+mt*se+vt*Re,o[14]=Ge*_+qe*O+mt*fe+vt*Ue,o[15]=Ge*x+qe*Z+mt*ye+vt*Je,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var pd,wA=zx;function gp(o,n,s){var h=n[0],g=n[1],_=n[2],x=n[3];return o[0]=s[0]*h+s[4]*g+s[8]*_+s[12]*x,o[1]=s[1]*h+s[5]*g+s[9]*_+s[13]*x,o[2]=s[2]*h+s[6]*g+s[10]*_+s[14]*x,o[3]=s[3]*h+s[7]*g+s[11]*_+s[15]*x,o}pd=new zc(4),zc!=Float32Array&&(pd[0]=0,pd[1]=0,pd[2]=0,pd[3]=0);class bA extends Io{constructor(n){super(n,xA)}createBucket(n){return new hd(n)}queryRadius(n){const s=n;return fd("circle-radius",this,s)+fd("circle-stroke-width",this,s)+pp(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,g,_,x,S,k){const O=mp(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),Z=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),Y=this.paint.get("circle-pitch-alignment")==="map",se=Y?O:function(ye,Ce){return ye.map(Re=>Rx(Re,Ce))}(O,k),fe=Y?Z*S:Z;for(const ye of g)for(const Ce of ye){const Re=Y?Ce:Rx(Ce,k);let Ue=fe;const Je=gp([],[Ce.x,Ce.y,0,1],k);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ue*=Je[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ue*=x.cameraToCenterDistance/Je[3]),hp(se,Re,Ue))return!0}return!1}}function Rx(o,n){const s=gp([],[o.x,o.y,0,1],n);return new w(s[0]/s[3],s[1]/s[3])}class Ox extends hd{}let Lx;Nt("HeatmapBucket",Ox,{omit:["layers"]});var SA={get paint(){return Lx=Lx||new zi({"heatmap-radius":new nn(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new nn(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qt(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Iu(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qt(et.paint_heatmap["heatmap-opacity"])})}};function gy(o,{width:n,height:s},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${n*s*h}`)}else g=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=g,o}function Fx(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const g=gy({},{width:n,height:s},h);yy(o,g,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=g.data}function yy(o,n,s,h,g,_){if(g.width===0||g.height===0)return n;if(g.width>o.width||g.height>o.height||s.x>o.width-g.width||s.y>o.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>n.width||g.height>n.height||h.x>n.width-g.width||h.y>n.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,S=n.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<g.height;k++){const O=((s.y+k)*o.width+s.x)*_,Z=((h.y+k)*n.width+h.x)*_;for(let Y=0;Y<g.width*_;Y++)S[Z+Y]=x[O+Y]}return n}class md{constructor(n,s){gy(this,n,1,s)}resize(n){Fx(this,n,1)}clone(){return new md({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,g,_){yy(n,s,h,g,_,1)}}class ko{constructor(n,s){gy(this,n,4,s)}resize(n){Fx(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new ko({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,g,_){yy(n,s,h,g,_,4)}}function jx(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,g=o.image||new ko({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const _=(x,S,k)=>{n[o.evaluationKey]=k;const O=o.expression.evaluate(n);g.data[x+S+0]=Math.floor(255*O.r/O.a),g.data[x+S+1]=Math.floor(255*O.g/O.a),g.data[x+S+2]=Math.floor(255*O.b/O.a),g.data[x+S+3]=Math.floor(255*O.a)};if(o.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let k=0,O=0;k<s;k++,O+=4){const Z=k/(s-1),{start:Y,end:se}=o.clips[x];_(S,O,Y*(1-Z)+se*Z)}else for(let x=0,S=0;x<s;x++,S+=4)_(0,S,x/(s-1));return g}Nt("AlphaImage",md),Nt("RGBAImage",ko);class EA extends Io{createBucket(n){return new Ox(n)}constructor(n){super(n,SA),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=jx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Dx;var TA={get paint(){return Dx=Dx||new zi({"hillshade-illumination-direction":new qt(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qt(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qt(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qt(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qt(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qt(et.paint_hillshade["hillshade-accent-color"])})}};class CA extends Io{constructor(n){super(n,TA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const IA=Er([{name:"a_pos",components:2,type:"Int16"}],4),{members:AA}=IA;var vy={exports:{}};function yp(o,n,s){s=s||2;var h,g,_,x,S,k,O,Z=n&&n.length,Y=Z?n[0]*s:o.length,se=Bx(o,0,Y,s,!0),fe=[];if(!se||se.next===se.prev)return fe;if(Z&&(se=function(Ce,Re,Ue,Je){var Ge,qe,mt,vt=[];for(Ge=0,qe=Re.length;Ge<qe;Ge++)(mt=Bx(Ce,Re[Ge]*Je,Ge<qe-1?Re[Ge+1]*Je:Ce.length,Je,!1))===mt.next&&(mt.steiner=!0),vt.push(FA(mt));for(vt.sort(RA),Ge=0;Ge<vt.length;Ge++)Ue=OA(vt[Ge],Ue);return Ue}(o,n,se,s)),o.length>80*s){h=_=o[0],g=x=o[1];for(var ye=s;ye<Y;ye+=s)(S=o[ye])<h&&(h=S),(k=o[ye+1])<g&&(g=k),S>_&&(_=S),k>x&&(x=k);O=(O=Math.max(_-h,x-g))!==0?32767/O:0}return gd(se,fe,s,h,g,O,0),fe}function Bx(o,n,s,h,g){var _,x;if(g===wy(o,n,s,h)>0)for(_=n;_<s;_+=h)x=$x(_,o[_],o[_+1],x);else for(_=s-h;_>=n;_-=h)x=$x(_,o[_],o[_+1],x);return x&&vp(x,x.next)&&(vd(x),x=x.next),x}function Ru(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!vp(h,h.next)&&Tr(h.prev,h,h.next)!==0)h=h.next;else{if(vd(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function gd(o,n,s,h,g,_,x){if(o){!x&&_&&function(Z,Y,se,fe){var ye=Z;do ye.z===0&&(ye.z=_y(ye.x,ye.y,Y,se,fe)),ye.prevZ=ye.prev,ye.nextZ=ye.next,ye=ye.next;while(ye!==Z);ye.prevZ.nextZ=null,ye.prevZ=null,function(Ce){var Re,Ue,Je,Ge,qe,mt,vt,Ft,Ht=1;do{for(Ue=Ce,Ce=null,qe=null,mt=0;Ue;){for(mt++,Je=Ue,vt=0,Re=0;Re<Ht&&(vt++,Je=Je.nextZ);Re++);for(Ft=Ht;vt>0||Ft>0&&Je;)vt!==0&&(Ft===0||!Je||Ue.z<=Je.z)?(Ge=Ue,Ue=Ue.nextZ,vt--):(Ge=Je,Je=Je.nextZ,Ft--),qe?qe.nextZ=Ge:Ce=Ge,Ge.prevZ=qe,qe=Ge;Ue=Je}qe.nextZ=null,Ht*=2}while(mt>1)}(ye)}(o,h,g,_);for(var S,k,O=o;o.prev!==o.next;)if(S=o.prev,k=o.next,_?kA(o,h,g,_):PA(o))n.push(S.i/s|0),n.push(o.i/s|0),n.push(k.i/s|0),vd(o),o=k.next,O=k.next;else if((o=k)===O){x?x===1?gd(o=MA(Ru(o),n,s),n,s,h,g,_,2):x===2&&zA(o,n,s,h,g,_):gd(Ru(o),n,s,h,g,_,1);break}}}function PA(o){var n=o.prev,s=o,h=o.next;if(Tr(n,s,h)>=0)return!1;for(var g=n.x,_=s.x,x=h.x,S=n.y,k=s.y,O=h.y,Z=g<_?g<x?g:x:_<x?_:x,Y=S<k?S<O?S:O:k<O?k:O,se=g>_?g>x?g:x:_>x?_:x,fe=S>k?S>O?S:O:k>O?k:O,ye=h.next;ye!==n;){if(ye.x>=Z&&ye.x<=se&&ye.y>=Y&&ye.y<=fe&&Rc(g,S,_,k,x,O,ye.x,ye.y)&&Tr(ye.prev,ye,ye.next)>=0)return!1;ye=ye.next}return!0}function kA(o,n,s,h){var g=o.prev,_=o,x=o.next;if(Tr(g,_,x)>=0)return!1;for(var S=g.x,k=_.x,O=x.x,Z=g.y,Y=_.y,se=x.y,fe=S<k?S<O?S:O:k<O?k:O,ye=Z<Y?Z<se?Z:se:Y<se?Y:se,Ce=S>k?S>O?S:O:k>O?k:O,Re=Z>Y?Z>se?Z:se:Y>se?Y:se,Ue=_y(fe,ye,n,s,h),Je=_y(Ce,Re,n,s,h),Ge=o.prevZ,qe=o.nextZ;Ge&&Ge.z>=Ue&&qe&&qe.z<=Je;){if(Ge.x>=fe&&Ge.x<=Ce&&Ge.y>=ye&&Ge.y<=Re&&Ge!==g&&Ge!==x&&Rc(S,Z,k,Y,O,se,Ge.x,Ge.y)&&Tr(Ge.prev,Ge,Ge.next)>=0||(Ge=Ge.prevZ,qe.x>=fe&&qe.x<=Ce&&qe.y>=ye&&qe.y<=Re&&qe!==g&&qe!==x&&Rc(S,Z,k,Y,O,se,qe.x,qe.y)&&Tr(qe.prev,qe,qe.next)>=0))return!1;qe=qe.nextZ}for(;Ge&&Ge.z>=Ue;){if(Ge.x>=fe&&Ge.x<=Ce&&Ge.y>=ye&&Ge.y<=Re&&Ge!==g&&Ge!==x&&Rc(S,Z,k,Y,O,se,Ge.x,Ge.y)&&Tr(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.prevZ}for(;qe&&qe.z<=Je;){if(qe.x>=fe&&qe.x<=Ce&&qe.y>=ye&&qe.y<=Re&&qe!==g&&qe!==x&&Rc(S,Z,k,Y,O,se,qe.x,qe.y)&&Tr(qe.prev,qe,qe.next)>=0)return!1;qe=qe.nextZ}return!0}function MA(o,n,s){var h=o;do{var g=h.prev,_=h.next.next;!vp(g,_)&&Nx(g,h,h.next,_)&&yd(g,_)&&yd(_,g)&&(n.push(g.i/s|0),n.push(h.i/s|0),n.push(_.i/s|0),vd(h),vd(h.next),h=o=_),h=h.next}while(h!==o);return Ru(h)}function zA(o,n,s,h,g,_){var x=o;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&jA(x,S)){var k=Ux(x,S);return x=Ru(x,x.next),k=Ru(k,k.next),gd(x,n,s,h,g,_,0),void gd(k,n,s,h,g,_,0)}S=S.next}x=x.next}while(x!==o)}function RA(o,n){return o.x-n.x}function OA(o,n){var s=function(g,_){var x,S=_,k=g.x,O=g.y,Z=-1/0;do{if(O<=S.y&&O>=S.next.y&&S.next.y!==S.y){var Y=S.x+(O-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(Y<=k&&Y>Z&&(Z=Y,x=S.x<S.next.x?S:S.next,Y===k))return x}S=S.next}while(S!==_);if(!x)return null;var se,fe=x,ye=x.x,Ce=x.y,Re=1/0;S=x;do k>=S.x&&S.x>=ye&&k!==S.x&&Rc(O<Ce?k:Z,O,ye,Ce,O<Ce?Z:k,O,S.x,S.y)&&(se=Math.abs(O-S.y)/(k-S.x),yd(S,g)&&(se<Re||se===Re&&(S.x>x.x||S.x===x.x&&LA(x,S)))&&(x=S,Re=se)),S=S.next;while(S!==fe);return x}(o,n);if(!s)return n;var h=Ux(s,o);return Ru(h,h.next),Ru(s,s.next)}function LA(o,n){return Tr(o.prev,o,n.prev)<0&&Tr(n.next,o,o.next)<0}function _y(o,n,s,h,g){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*g|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function FA(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function Rc(o,n,s,h,g,_,x,S){return(g-x)*(n-S)>=(o-x)*(_-S)&&(o-x)*(h-S)>=(s-x)*(n-S)&&(s-x)*(_-S)>=(g-x)*(h-S)}function jA(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var g=s;do{if(g.i!==s.i&&g.next.i!==s.i&&g.i!==h.i&&g.next.i!==h.i&&Nx(g,g.next,s,h))return!0;g=g.next}while(g!==s);return!1}(o,n)&&(yd(o,n)&&yd(n,o)&&function(s,h){var g=s,_=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do g.y>S!=g.next.y>S&&g.next.y!==g.y&&x<(g.next.x-g.x)*(S-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==s);return _}(o,n)&&(Tr(o.prev,o,n.prev)||Tr(o,n.prev,n))||vp(o,n)&&Tr(o.prev,o,o.next)>0&&Tr(n.prev,n,n.next)>0)}function Tr(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function vp(o,n){return o.x===n.x&&o.y===n.y}function Nx(o,n,s,h){var g=xp(Tr(o,n,s)),_=xp(Tr(o,n,h)),x=xp(Tr(s,h,o)),S=xp(Tr(s,h,n));return g!==_&&x!==S||!(g!==0||!_p(o,s,n))||!(_!==0||!_p(o,h,n))||!(x!==0||!_p(s,o,h))||!(S!==0||!_p(s,n,h))}function _p(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function xp(o){return o>0?1:o<0?-1:0}function yd(o,n){return Tr(o.prev,o,o.next)<0?Tr(o,n,o.next)>=0&&Tr(o,o.prev,n)>=0:Tr(o,n,o.prev)<0||Tr(o,o.next,n)<0}function Ux(o,n){var s=new xy(o.i,o.x,o.y),h=new xy(n.i,n.x,n.y),g=o.next,_=n.prev;return o.next=n,n.prev=o,s.next=g,g.prev=s,h.next=s,s.prev=h,_.next=h,h.prev=_,h}function $x(o,n,s,h){var g=new xy(o,n,s);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function vd(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function xy(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wy(o,n,s,h){for(var g=0,_=n,x=s-h;_<s;_+=h)g+=(o[x]-o[_])*(o[_+1]+o[x+1]),x=_;return g}vy.exports=yp,vy.exports.default=yp,yp.deviation=function(o,n,s,h){var g=n&&n.length,_=Math.abs(wy(o,0,g?n[0]*s:o.length,s));if(g)for(var x=0,S=n.length;x<S;x++)_-=Math.abs(wy(o,n[x]*s,x<S-1?n[x+1]*s:o.length,s));var k=0;for(x=0;x<h.length;x+=3){var O=h[x]*s,Z=h[x+1]*s,Y=h[x+2]*s;k+=Math.abs((o[O]-o[Y])*(o[Z+1]-o[O+1])-(o[O]-o[Z])*(o[Y+1]-o[O+1]))}return _===0&&k===0?0:Math.abs((k-_)/_)},yp.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,g=0;g<o.length;g++){for(var _=0;_<o[g].length;_++)for(var x=0;x<n;x++)s.vertices.push(o[g][_][x]);g>0&&s.holes.push(h+=o[g-1].length)}return s};var Vx=b(vy.exports);function DA(o,n,s,h,g){Gx(o,n,s||0,h||o.length-1,g||BA)}function Gx(o,n,s,h,g){for(;h>s;){if(h-s>600){var _=h-s+1,x=n-s+1,S=Math.log(_),k=.5*Math.exp(2*S/3),O=.5*Math.sqrt(S*k*(_-k)/_)*(x-_/2<0?-1:1);Gx(o,n,Math.max(s,Math.floor(n-x*k/_+O)),Math.min(h,Math.floor(n+(_-x)*k/_+O)),g)}var Z=o[n],Y=s,se=h;for(_d(o,s,n),g(o[h],Z)>0&&_d(o,s,h);Y<se;){for(_d(o,Y,se),Y++,se--;g(o[Y],Z)<0;)Y++;for(;g(o[se],Z)>0;)se--}g(o[s],Z)===0?_d(o,s,se):_d(o,++se,h),se<=n&&(s=se+1),n<=se&&(h=se-1)}}function _d(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function BA(o,n){return o<n?-1:o>n?1:0}function by(o,n){const s=o.length;if(s<=1)return[o];const h=[];let g,_;for(let x=0;x<s;x++){const S=oe(o[x]);S!==0&&(o[x].area=Math.abs(S),_===void 0&&(_=S<0),_===S<0?(g&&h.push(g),g=[o[x]]):g.push(o[x]))}if(g&&h.push(g),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(DA(h[x],n,1,h[x].length-1,NA),h[x]=h[x].slice(0,n));return h}function NA(o,n){return n.area-o.area}function Sy(o,n,s){const h=s.patternDependencies;let g=!1;for(const _ of n){const x=_.paint.get(`${o}-pattern`);x.isConstant()||(g=!0);const S=x.constantOr(null);S&&(g=!0,h[S.to]=!0,h[S.from]=!0)}return g}function Ey(o,n,s,h,g){const _=g.patternDependencies;for(const x of n){const S=x.paint.get(`${o}-pattern`).value;if(S.kind!=="constant"){let k=S.evaluate({zoom:h-1},s,{},g.availableImages),O=S.evaluate({zoom:h},s,{},g.availableImages),Z=S.evaluate({zoom:h+1},s,{},g.availableImages);k=k&&k.name?k.name:k,O=O&&O.name?O.name:O,Z=Z&&Z.name?Z.name:Z,_[k]=!0,_[O]=!0,_[Z]=!0,s.patterns[x.id]={min:k,mid:O,max:Z}}}return s}class Ty{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ge,this.indexArray=new ot,this.indexArray2=new ht,this.programConfigurations=new ar(n.layers,n.zoom),this.segments=new bt,this.segments2=new bt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Sy("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),x=[];for(const{feature:S,id:k,index:O,sourceLayerIndex:Z}of n){const Y=this.layers[0]._featureFilter.needGeometry,se=ja(S,Y);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),se,h))continue;const fe=_?g.evaluate(se,{},h,s.availableImages):void 0,ye={id:k,properties:S.properties,type:S.type,sourceLayerIndex:Z,index:O,geometry:Y?se.geometry:Fa(S),patterns:{},sortKey:fe};x.push(ye)}_&&x.sort((S,k)=>S.sortKey-k.sortKey);for(const S of x){const{geometry:k,index:O,sourceLayerIndex:Z}=S;if(this.hasPattern){const Y=Ey("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(Y)}else this.addFeature(S,k,O,h,{});s.featureIndex.insert(n[O].feature,k,O,Z,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,AA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,g,_){for(const x of by(s,500)){let S=0;for(const fe of x)S+=fe.length;const k=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),O=k.vertexLength,Z=[],Y=[];for(const fe of x){if(fe.length===0)continue;fe!==x[0]&&Y.push(Z.length/2);const ye=this.segments2.prepareSegment(fe.length,this.layoutVertexArray,this.indexArray2),Ce=ye.vertexLength;this.layoutVertexArray.emplaceBack(fe[0].x,fe[0].y),this.indexArray2.emplaceBack(Ce+fe.length-1,Ce),Z.push(fe[0].x),Z.push(fe[0].y);for(let Re=1;Re<fe.length;Re++)this.layoutVertexArray.emplaceBack(fe[Re].x,fe[Re].y),this.indexArray2.emplaceBack(Ce+Re-1,Ce+Re),Z.push(fe[Re].x),Z.push(fe[Re].y);ye.vertexLength+=fe.length,ye.primitiveLength+=fe.length}const se=Vx(Z,Y);for(let fe=0;fe<se.length;fe+=3)this.indexArray.emplaceBack(O+se[fe],O+se[fe+1],O+se[fe+2]);k.vertexLength+=S,k.primitiveLength+=se.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,g)}}let Hx,Wx;Nt("FillBucket",Ty,{omit:["layers","patternFeatures"]});var UA={get paint(){return Wx=Wx||new zi({"fill-antialias":new qt(et.paint_fill["fill-antialias"]),"fill-opacity":new nn(et.paint_fill["fill-opacity"]),"fill-color":new nn(et.paint_fill["fill-color"]),"fill-outline-color":new nn(et.paint_fill["fill-outline-color"]),"fill-translate":new qt(et.paint_fill["fill-translate"]),"fill-translate-anchor":new qt(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new za(et.paint_fill["fill-pattern"])})},get layout(){return Hx=Hx||new zi({"fill-sort-key":new nn(et.layout_fill["fill-sort-key"])})}};class $A extends Io{constructor(n){super(n,UA)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Ty(n)}queryRadius(){return pp(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,g,_,x,S){return dd(mp(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),g)}isTileClipped(){return!0}}const VA=Er([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),GA=Er([{name:"a_centroid",components:2,type:"Int16"}],4),{members:HA}=VA;var Rl={},WA=C,Zx=Oc;function Oc(o,n,s,h,g){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=g,o.readFields(ZA,this,n)}function ZA(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,g){for(var _=h.readVarint()+h.pos;h.pos<_;){var x=g._keys[h.readVarint()],S=g._values[h.readVarint()];g.properties[x]=S}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function XA(o){for(var n,s,h=0,g=0,_=o.length,x=_-1;g<_;x=g++)h+=((s=o[x]).x-(n=o[g]).x)*(n.y+s.y);return h}Oc.types=["Unknown","Point","LineString","Polygon"],Oc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,g=0,_=0,x=0,S=[];o.pos<s;){if(g<=0){var k=o.readVarint();h=7&k,g=k>>3}if(g--,h===1||h===2)_+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&S.push(n),n=[]),n.push(new WA(_,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&S.push(n),S},Oc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,g=0,_=0,x=1/0,S=-1/0,k=1/0,O=-1/0;o.pos<n;){if(h<=0){var Z=o.readVarint();s=7&Z,h=Z>>3}if(h--,s===1||s===2)(g+=o.readSVarint())<x&&(x=g),g>S&&(S=g),(_+=o.readSVarint())<k&&(k=_),_>O&&(O=_);else if(s!==7)throw new Error("unknown command "+s)}return[x,k,S,O]},Oc.prototype.toGeoJSON=function(o,n,s){var h,g,_=this.extent*Math.pow(2,s),x=this.extent*o,S=this.extent*n,k=this.loadGeometry(),O=Oc.types[this.type];function Z(fe){for(var ye=0;ye<fe.length;ye++){var Ce=fe[ye];fe[ye]=[360*(Ce.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ce.y+S)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var Y=[];for(h=0;h<k.length;h++)Y[h]=k[h][0];Z(k=Y);break;case 2:for(h=0;h<k.length;h++)Z(k[h]);break;case 3:for(k=function(fe){var ye=fe.length;if(ye<=1)return[fe];for(var Ce,Re,Ue=[],Je=0;Je<ye;Je++){var Ge=XA(fe[Je]);Ge!==0&&(Re===void 0&&(Re=Ge<0),Re===Ge<0?(Ce&&Ue.push(Ce),Ce=[fe[Je]]):Ce.push(fe[Je]))}return Ce&&Ue.push(Ce),Ue}(k),h=0;h<k.length;h++)for(g=0;g<k[h].length;g++)Z(k[h][g])}k.length===1?k=k[0]:O="Multi"+O;var se={type:"Feature",geometry:{type:O,coordinates:k},properties:this.properties};return"id"in this&&(se.id=this.id),se};var qA=Zx,Xx=qx;function qx(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(KA,this,n),this.length=this._features.length}function KA(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var g=null,_=h.readVarint()+h.pos;h.pos<_;){var x=h.readVarint()>>3;g=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return g}(s))}qx.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new qA(this._pbf,n,this.extent,this._keys,this._values)};var YA=Xx;function JA(o,n,s){if(o===3){var h=new YA(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Rl.VectorTile=function(o,n){this.layers=o.readFields(JA,{},n)},Rl.VectorTileFeature=Zx,Rl.VectorTileLayer=Xx;const QA=Rl.VectorTileFeature.types,Cy=Math.pow(2,13);function xd(o,n,s,h,g,_,x,S){o.emplaceBack(n,s,2*Math.floor(h*Cy)+x,g*Cy*2,_*Cy*2,Math.round(S))}class Iy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Me,this.centroidVertexArray=new Q,this.indexArray=new ot,this.programConfigurations=new ar(n.layers,n.zoom),this.segments=new bt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=Sy("fill-extrusion",this.layers,s);for(const{feature:g,id:_,index:x,sourceLayerIndex:S}of n){const k=this.layers[0]._featureFilter.needGeometry,O=ja(g,k);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),O,h))continue;const Z={id:_,sourceLayerIndex:S,index:x,geometry:k?O.geometry:Fa(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Ey("fill-extrusion",this.layers,Z,this.zoom,s)):this.addFeature(Z,Z.geometry,x,h,{}),s.featureIndex.insert(g,Z.geometry,x,S,this.index,!0)}}addFeatures(n,s,h){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,HA),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,GA.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,g,_){const x={x:0,y:0,vertexCount:0};for(const S of by(s,500)){let k=0;for(const ye of S)k+=ye.length;let O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ye of S){if(ye.length===0||tP(ye))continue;let Ce=0;for(let Re=0;Re<ye.length;Re++){const Ue=ye[Re];if(Re>=1){const Je=ye[Re-1];if(!eP(Ue,Je)){O.vertexLength+4>bt.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ge=Ue.sub(Je)._perp()._unit(),qe=Je.dist(Ue);Ce+qe>32768&&(Ce=0),xd(this.layoutVertexArray,Ue.x,Ue.y,Ge.x,Ge.y,0,0,Ce),xd(this.layoutVertexArray,Ue.x,Ue.y,Ge.x,Ge.y,0,1,Ce),x.x+=2*Ue.x,x.y+=2*Ue.y,x.vertexCount+=2,Ce+=qe,xd(this.layoutVertexArray,Je.x,Je.y,Ge.x,Ge.y,0,0,Ce),xd(this.layoutVertexArray,Je.x,Je.y,Ge.x,Ge.y,0,1,Ce),x.x+=2*Je.x,x.y+=2*Je.y,x.vertexCount+=2;const mt=O.vertexLength;this.indexArray.emplaceBack(mt,mt+2,mt+1),this.indexArray.emplaceBack(mt+1,mt+2,mt+3),O.vertexLength+=4,O.primitiveLength+=2}}}}if(O.vertexLength+k>bt.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray)),QA[n.type]!=="Polygon")continue;const Z=[],Y=[],se=O.vertexLength;for(const ye of S)if(ye.length!==0){ye!==S[0]&&Y.push(Z.length/2);for(let Ce=0;Ce<ye.length;Ce++){const Re=ye[Ce];xd(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),x.x+=Re.x,x.y+=Re.y,x.vertexCount+=1,Z.push(Re.x),Z.push(Re.y)}}const fe=Vx(Z,Y);for(let ye=0;ye<fe.length;ye+=3)this.indexArray.emplaceBack(se+fe[ye],se+fe[ye+2],se+fe[ye+1]);O.primitiveLength+=fe.length/3,O.vertexLength+=k}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,g)}}function eP(o,n){return o.x===n.x&&(o.x<0||o.x>An)||o.y===n.y&&(o.y<0||o.y>An)}function tP(o){return o.every(n=>n.x<0)||o.every(n=>n.x>An)||o.every(n=>n.y<0)||o.every(n=>n.y>An)}let Kx;Nt("FillExtrusionBucket",Iy,{omit:["layers","features"]});var nP={get paint(){return Kx=Kx||new zi({"fill-extrusion-opacity":new qt(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new nn(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qt(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qt(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new za(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new nn(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new nn(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qt(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class rP extends Io{constructor(n){super(n,nP)}createBucket(n){return new Iy(n)}queryRadius(){return pp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,g,_,x,S,k){const O=mp(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),Z=this.paint.get("fill-extrusion-height").evaluate(s,h),Y=this.paint.get("fill-extrusion-base").evaluate(s,h),se=function(ye,Ce,Re,Ue){const Je=[];for(const Ge of ye){const qe=[Ge.x,Ge.y,0,1];gp(qe,qe,Ce),Je.push(new w(qe[0]/qe[3],qe[1]/qe[3]))}return Je}(O,k),fe=function(ye,Ce,Re,Ue){const Je=[],Ge=[],qe=Ue[8]*Ce,mt=Ue[9]*Ce,vt=Ue[10]*Ce,Ft=Ue[11]*Ce,Ht=Ue[8]*Re,Lt=Ue[9]*Re,zt=Ue[10]*Re,It=Ue[11]*Re;for(const Ut of ye){const kt=[],Et=[];for(const en of Ut){const Xt=en.x,Cn=en.y,rr=Ue[0]*Xt+Ue[4]*Cn+Ue[12],lr=Ue[1]*Xt+Ue[5]*Cn+Ue[13],Nr=Ue[2]*Xt+Ue[6]*Cn+Ue[14],po=Ue[3]*Xt+Ue[7]*Cn+Ue[15],Li=Nr+vt,Or=po+Ft,ei=rr+Ht,ci=lr+Lt,Fi=Nr+zt,ji=po+It,Ur=new w((rr+qe)/Or,(lr+mt)/Or);Ur.z=Li/Or,kt.push(Ur);const $r=new w(ei/ji,ci/ji);$r.z=Fi/ji,Et.push($r)}Je.push(kt),Ge.push(Et)}return[Je,Ge]}(g,Y,Z,k);return function(ye,Ce,Re){let Ue=1/0;dd(Re,Ce)&&(Ue=Yx(Re,Ce[0]));for(let Je=0;Je<Ce.length;Je++){const Ge=Ce[Je],qe=ye[Je];for(let mt=0;mt<Ge.length-1;mt++){const vt=Ge[mt],Ft=[vt,Ge[mt+1],qe[mt+1],qe[mt],vt];Da(Re,Ft)&&(Ue=Math.min(Ue,Yx(Re,Ft)))}}return Ue!==1/0&&Ue}(fe[0],fe[1],se)}}function wd(o,n){return o.x*n.x+o.y*n.y}function Yx(o,n){if(o.length===1){let s=0;const h=n[s++];let g;for(;!g||h.equals(g);)if(g=n[s++],!g)return 1/0;for(;s<n.length;s++){const _=n[s],x=o[0],S=g.sub(h),k=_.sub(h),O=x.sub(h),Z=wd(S,S),Y=wd(S,k),se=wd(k,k),fe=wd(O,S),ye=wd(O,k),Ce=Z*se-Y*Y,Re=(se*fe-Y*ye)/Ce,Ue=(Z*ye-Y*fe)/Ce,Je=h.z*(1-Re-Ue)+g.z*Re+_.z*Ue;if(isFinite(Je))return Je}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const iP=Er([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:oP}=iP,sP=Er([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:aP}=sP,lP=Rl.VectorTileFeature.types,uP=Math.cos(Math.PI/180*37.5),Jx=Math.pow(2,14)/.5;class Ay{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new ke,this.layoutVertexArray2=new Le,this.indexArray=new ot,this.programConfigurations=new ar(n.layers,n.zoom),this.segments=new bt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Sy("line",this.layers,s);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),x=[];for(const{feature:S,id:k,index:O,sourceLayerIndex:Z}of n){const Y=this.layers[0]._featureFilter.needGeometry,se=ja(S,Y);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),se,h))continue;const fe=_?g.evaluate(se,{},h):void 0,ye={id:k,properties:S.properties,type:S.type,sourceLayerIndex:Z,index:O,geometry:Y?se.geometry:Fa(S),patterns:{},sortKey:fe};x.push(ye)}_&&x.sort((S,k)=>S.sortKey-k.sortKey);for(const S of x){const{geometry:k,index:O,sourceLayerIndex:Z}=S;if(this.hasPattern){const Y=Ey("line",this.layers,S,this.zoom,s);this.patternFeatures.push(Y)}else this.addFeature(S,k,O,h,{});s.featureIndex.insert(n[O].feature,k,O,Z,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,aP)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,oP),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,g,_){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),k=x.get("line-cap"),O=x.get("line-miter-limit"),Z=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const Y of s)this.addLine(Y,n,S,k,O,Z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,g)}addLine(n,s,h,g,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ue=0;Ue<n.length-1;Ue++)this.totalDistance+=n[Ue].dist(n[Ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=lP[s.type]==="Polygon";let k=n.length;for(;k>=2&&n[k-1].equals(n[k-2]);)k--;let O=0;for(;O<k-1&&n[O].equals(n[O+1]);)O++;if(k<(S?3:2))return;h==="bevel"&&(_=1.05);const Z=this.overscaling<=16?15*An/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray);let se,fe,ye,Ce,Re;this.e1=this.e2=-1,S&&(se=n[k-2],Re=n[O].sub(se)._unit()._perp());for(let Ue=O;Ue<k;Ue++){if(ye=Ue===k-1?S?n[O+1]:void 0:n[Ue+1],ye&&n[Ue].equals(ye))continue;Re&&(Ce=Re),se&&(fe=se),se=n[Ue],Re=ye?ye.sub(se)._unit()._perp():Ce,Ce=Ce||Re;let Je=Ce.add(Re);Je.x===0&&Je.y===0||Je._unit();const Ge=Ce.x*Re.x+Ce.y*Re.y,qe=Je.x*Re.x+Je.y*Re.y,mt=qe!==0?1/qe:1/0,vt=2*Math.sqrt(2-2*qe),Ft=qe<uP&&fe&&ye,Ht=Ce.x*Re.y-Ce.y*Re.x>0;if(Ft&&Ue>O){const It=se.dist(fe);if(It>2*Z){const Ut=se.sub(se.sub(fe)._mult(Z/It)._round());this.updateDistance(fe,Ut),this.addCurrentVertex(Ut,Ce,0,0,Y),fe=Ut}}const Lt=fe&&ye;let zt=Lt?h:S?"butt":g;if(Lt&&zt==="round"&&(mt<x?zt="miter":mt<=2&&(zt="fakeround")),zt==="miter"&&mt>_&&(zt="bevel"),zt==="bevel"&&(mt>2&&(zt="flipbevel"),mt<_&&(zt="miter")),fe&&this.updateDistance(fe,se),zt==="miter")Je._mult(mt),this.addCurrentVertex(se,Je,0,0,Y);else if(zt==="flipbevel"){if(mt>100)Je=Re.mult(-1);else{const It=mt*Ce.add(Re).mag()/Ce.sub(Re).mag();Je._perp()._mult(It*(Ht?-1:1))}this.addCurrentVertex(se,Je,0,0,Y),this.addCurrentVertex(se,Je.mult(-1),0,0,Y)}else if(zt==="bevel"||zt==="fakeround"){const It=-Math.sqrt(mt*mt-1),Ut=Ht?It:0,kt=Ht?0:It;if(fe&&this.addCurrentVertex(se,Ce,Ut,kt,Y),zt==="fakeround"){const Et=Math.round(180*vt/Math.PI/20);for(let en=1;en<Et;en++){let Xt=en/Et;if(Xt!==.5){const rr=Xt-.5;Xt+=Xt*rr*(Xt-1)*((1.0904+Ge*(Ge*(3.55645-1.43519*Ge)-3.2452))*rr*rr+(.848013+Ge*(.215638*Ge-1.06021)))}const Cn=Re.sub(Ce)._mult(Xt)._add(Ce)._unit()._mult(Ht?-1:1);this.addHalfVertex(se,Cn.x,Cn.y,!1,Ht,0,Y)}}ye&&this.addCurrentVertex(se,Re,-Ut,-kt,Y)}else if(zt==="butt")this.addCurrentVertex(se,Je,0,0,Y);else if(zt==="square"){const It=fe?1:-1;this.addCurrentVertex(se,Je,It,It,Y)}else zt==="round"&&(fe&&(this.addCurrentVertex(se,Ce,0,0,Y),this.addCurrentVertex(se,Ce,1,1,Y,!0)),ye&&(this.addCurrentVertex(se,Re,-1,-1,Y,!0),this.addCurrentVertex(se,Re,0,0,Y)));if(Ft&&Ue<k-1){const It=se.dist(ye);if(It>2*Z){const Ut=se.add(ye.sub(se)._mult(Z/It)._round());this.updateDistance(se,Ut),this.addCurrentVertex(Ut,Re,0,0,Y),se=Ut}}}}addCurrentVertex(n,s,h,g,_,x=!1){const S=s.y*g-s.x,k=-s.y-s.x*g;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,_),this.addHalfVertex(n,S,k,x,!0,-g,_),this.distance>Jx/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,g,_,x))}addHalfVertex({x:n,y:s},h,g,_,x,S,k){const O=.5*(this.lineClips?this.scaledDistance*(Jx-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(_?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(S===0?0:S<0?-1:1)|(63&O)<<2,O>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Z=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Z),k.primitiveLength++),x?this.e2=Z:this.e1=Z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let Qx,ew;Nt("LineBucket",Ay,{omit:["layers","patternFeatures"]});var tw={get paint(){return ew=ew||new zi({"line-opacity":new nn(et.paint_line["line-opacity"]),"line-color":new nn(et.paint_line["line-color"]),"line-translate":new qt(et.paint_line["line-translate"]),"line-translate-anchor":new qt(et.paint_line["line-translate-anchor"]),"line-width":new nn(et.paint_line["line-width"]),"line-gap-width":new nn(et.paint_line["line-gap-width"]),"line-offset":new nn(et.paint_line["line-offset"]),"line-blur":new nn(et.paint_line["line-blur"]),"line-dasharray":new Qh(et.paint_line["line-dasharray"]),"line-pattern":new za(et.paint_line["line-pattern"]),"line-gradient":new Iu(et.paint_line["line-gradient"])})},get layout(){return Qx=Qx||new zi({"line-cap":new qt(et.layout_line["line-cap"]),"line-join":new nn(et.layout_line["line-join"]),"line-miter-limit":new qt(et.layout_line["line-miter-limit"]),"line-round-limit":new qt(et.layout_line["line-round-limit"]),"line-sort-key":new nn(et.layout_line["line-sort-key"])})}};class cP extends nn{possiblyEvaluate(n,s){return s=new tr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,g){return s=E({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,g)}}let wp;class hP extends Io{constructor(n){super(n,tw),this.gradientVersion=0,wp||(wp=new cP(tw.paint.properties["line-width"].specification),wp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Ls,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=wp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Ay(n)}queryRadius(n){const s=n,h=nw(fd("line-width",this,s),fd("line-gap-width",this,s)),g=fd("line-offset",this,s);return h/2+Math.abs(g)+pp(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,g,_,x,S){const k=mp(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),O=S/2*nw(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),Z=this.paint.get("line-offset").evaluate(s,h);return Z&&(g=function(Y,se){const fe=[];for(let ye=0;ye<Y.length;ye++){const Ce=Y[ye],Re=[];for(let Ue=0;Ue<Ce.length;Ue++){const Je=Ce[Ue-1],Ge=Ce[Ue],qe=Ce[Ue+1],mt=Ue===0?new w(0,0):Ge.sub(Je)._unit()._perp(),vt=Ue===Ce.length-1?new w(0,0):qe.sub(Ge)._unit()._perp(),Ft=mt._add(vt)._unit(),Ht=Ft.x*vt.x+Ft.y*vt.y;Ht!==0&&Ft._mult(1/Ht),Re.push(Ft._mult(se)._add(Ge))}fe.push(Re)}return fe}(g,Z*S)),function(Y,se,fe){for(let ye=0;ye<se.length;ye++){const Ce=se[ye];if(Y.length>=3){for(let Re=0;Re<Ce.length;Re++)if(Mc(Y,Ce[Re]))return!0}if(dp(Y,Ce,fe))return!0}return!1}(k,g,O)}isTileClipped(){return!0}}function nw(o,n){return n>0?n+2*o:o}const dP=Er([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),fP=Er([{name:"a_projected_pos",components:3,type:"Float32"}],4);Er([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const pP=Er([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Er([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const rw=Er([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),mP=Er([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function gP(o,n,s){return o.sections.forEach(h=>{h.text=function(g,_,x){const S=_.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?g=g.toLocaleUpperCase():S==="lowercase"&&(g=g.toLocaleLowerCase()),Ma.applyArabicShaping&&(g=Ma.applyArabicShaping(g)),g}(h.text,n,s)}),o}Er([{name:"triangle",components:3,type:"Uint16"}]),Er([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Er([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Er([{type:"Float32",name:"offsetX"}]),Er([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Er([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const bd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Br=24,iw=qn,ow=function(o,n,s,h,g){var _,x,S=8*g-h-1,k=(1<<S)-1,O=k>>1,Z=-7,Y=s?g-1:0,se=s?-1:1,fe=o[n+Y];for(Y+=se,_=fe&(1<<-Z)-1,fe>>=-Z,Z+=S;Z>0;_=256*_+o[n+Y],Y+=se,Z-=8);for(x=_&(1<<-Z)-1,_>>=-Z,Z+=h;Z>0;x=256*x+o[n+Y],Y+=se,Z-=8);if(_===0)_=1-O;else{if(_===k)return x?NaN:1/0*(fe?-1:1);x+=Math.pow(2,h),_-=O}return(fe?-1:1)*x*Math.pow(2,_-h)},sw=function(o,n,s,h,g,_){var x,S,k,O=8*_-g-1,Z=(1<<O)-1,Y=Z>>1,se=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,fe=h?0:_-1,ye=h?1:-1,Ce=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(S=isNaN(n)?1:0,x=Z):(x=Math.floor(Math.log(n)/Math.LN2),n*(k=Math.pow(2,-x))<1&&(x--,k*=2),(n+=x+Y>=1?se/k:se*Math.pow(2,1-Y))*k>=2&&(x++,k/=2),x+Y>=Z?(S=0,x=Z):x+Y>=1?(S=(n*k-1)*Math.pow(2,g),x+=Y):(S=n*Math.pow(2,Y-1)*Math.pow(2,g),x=0));g>=8;o[s+fe]=255&S,fe+=ye,S/=256,g-=8);for(x=x<<g|S,O+=g;O>0;o[s+fe]=255&x,fe+=ye,x/=256,O-=8);o[s+fe-ye]|=128*Ce};function qn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}qn.Varint=0,qn.Fixed64=1,qn.Bytes=2,qn.Fixed32=5;var Py=4294967296,aw=1/Py,lw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ba(o){return o.type===qn.Bytes?o.readVarint()+o.pos:o.pos+1}function Lc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function uw(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var g=s.pos-1;g>=o;g--)s.buf[g+h]=s.buf[g]}function yP(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function vP(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function _P(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function xP(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function wP(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function bP(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function SP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function EP(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function TP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function bp(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Fc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function cw(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}qn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),g=h>>3,_=this.pos;this.type=7&h,o(g,n,this),this.pos===_&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=bp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=cw(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=bp(this.buf,this.pos)+bp(this.buf,this.pos+4)*Py;return this.pos+=8,o},readSFixed64:function(){var o=bp(this.buf,this.pos)+cw(this.buf,this.pos+4)*Py;return this.pos+=8,o},readFloat:function(){var o=ow(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=ow(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(g,_,x){var S,k,O=x.buf;if(S=(112&(k=O[x.pos++]))>>4,k<128||(S|=(127&(k=O[x.pos++]))<<3,k<128)||(S|=(127&(k=O[x.pos++]))<<10,k<128)||(S|=(127&(k=O[x.pos++]))<<17,k<128)||(S|=(127&(k=O[x.pos++]))<<24,k<128)||(S|=(1&(k=O[x.pos++]))<<31,k<128))return Lc(g,S,_);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&lw?function(s,h,g){return lw.decode(s.subarray(h,g))}(this.buf,n,o):function(s,h,g){for(var _="",x=h;x<g;){var S,k,O,Z=s[x],Y=null,se=Z>239?4:Z>223?3:Z>191?2:1;if(x+se>g)break;se===1?Z<128&&(Y=Z):se===2?(192&(S=s[x+1]))==128&&(Y=(31&Z)<<6|63&S)<=127&&(Y=null):se===3?(k=s[x+2],(192&(S=s[x+1]))==128&&(192&k)==128&&((Y=(15&Z)<<12|(63&S)<<6|63&k)<=2047||Y>=55296&&Y<=57343)&&(Y=null)):se===4&&(k=s[x+2],O=s[x+3],(192&(S=s[x+1]))==128&&(192&k)==128&&(192&O)==128&&((Y=(15&Z)<<18|(63&S)<<12|(63&k)<<6|63&O)<=65535||Y>=1114112)&&(Y=null)),Y===null?(Y=65533,se=1):Y>65535&&(Y-=65536,_+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),_+=String.fromCharCode(Y),x+=se}return _}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==qn.Bytes)return o.push(this.readVarint(n));var s=Ba(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==qn.Bytes)return o.push(this.readSVarint());var n=Ba(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==qn.Bytes)return o.push(this.readBoolean());var n=Ba(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==qn.Bytes)return o.push(this.readFloat());var n=Ba(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==qn.Bytes)return o.push(this.readDouble());var n=Ba(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==qn.Bytes)return o.push(this.readFixed32());var n=Ba(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==qn.Bytes)return o.push(this.readSFixed32());var n=Ba(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==qn.Bytes)return o.push(this.readFixed64());var n=Ba(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==qn.Bytes)return o.push(this.readSFixed64());var n=Ba(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===qn.Varint)for(;this.buf[this.pos++]>127;);else if(n===qn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===qn.Fixed32)this.pos+=4;else{if(n!==qn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Fc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Fc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Fc(this.buf,-1&o,this.pos),Fc(this.buf,Math.floor(o*aw),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Fc(this.buf,-1&o,this.pos),Fc(this.buf,Math.floor(o*aw),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,g;if(n>=0?(h=n%4294967296|0,g=n/4294967296|0):(g=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,g=g+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(_,x,S){S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,S.buf[S.pos]=127&(_>>>=7)}(h,0,s),function(_,x){var S=(7&_)<<4;x.buf[x.pos++]|=S|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))}(g,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,g,_){for(var x,S,k=0;k<g.length;k++){if((x=g.charCodeAt(k))>55295&&x<57344){if(!S){x>56319||k+1===g.length?(h[_++]=239,h[_++]=191,h[_++]=189):S=x;continue}if(x<56320){h[_++]=239,h[_++]=191,h[_++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[_++]=239,h[_++]=191,h[_++]=189,S=null);x<128?h[_++]=x:(x<2048?h[_++]=x>>6|192:(x<65536?h[_++]=x>>12|224:(h[_++]=x>>18|240,h[_++]=x>>12&63|128),h[_++]=x>>6&63|128),h[_++]=63&x|128)}return _}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&uw(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),sw(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),sw(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&uw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,qn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,yP,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,vP,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,wP,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,_P,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,xP,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,bP,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,SP,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,EP,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,TP,n)},writeBytesField:function(o,n){this.writeTag(o,qn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,qn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,qn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,qn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,qn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,qn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,qn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,qn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,qn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,qn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var ky=b(iw);const My=3;function CP(o,n,s){o===1&&s.readMessage(IP,n)}function IP(o,n,s){if(o===3){const{id:h,bitmap:g,width:_,height:x,left:S,top:k,advance:O}=s.readMessage(AP,{});n.push({id:h,bitmap:new md({width:_+2*My,height:x+2*My},g),metrics:{width:_,height:x,left:S,top:k,advance:O}})}}function AP(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const hw=My;function dw(o){let n=0,s=0;for(const x of o)n+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let g=0,_=0;for(const x of o)for(let S=h.length-1;S>=0;S--){const k=h[S];if(!(x.w>k.w||x.h>k.h)){if(x.x=k.x,x.y=k.y,_=Math.max(_,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===k.w&&x.h===k.h){const O=h.pop();S<h.length&&(h[S]=O)}else x.h===k.h?(k.x+=x.w,k.w-=x.w):x.w===k.w?(k.y+=x.h,k.h-=x.h):(h.push({x:k.x+x.w,y:k.y,w:k.w-x.w,h:x.h}),k.y+=x.h,k.h-=x.h);break}}return{w:g,h:_,fill:n/(g*_)||0}}const Xi=1;class zy{constructor(n,{pixelRatio:s,version:h,stretchX:g,stretchY:_,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=g,this.stretchY=_,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+Xi,this.paddedRect.y+Xi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Xi,this.paddedRect.y+this.paddedRect.h-Xi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Xi)/this.pixelRatio,(this.paddedRect.h-2*Xi)/this.pixelRatio]}}class fw{constructor(n,s){const h={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(n,h,_),this.addImages(s,g,_);const{w:x,h:S}=dw(_),k=new ko({width:x||1,height:S||1});for(const O in n){const Z=n[O],Y=h[O].paddedRect;ko.copy(Z.data,k,{x:0,y:0},{x:Y.x+Xi,y:Y.y+Xi},Z.data)}for(const O in s){const Z=s[O],Y=g[O].paddedRect,se=Y.x+Xi,fe=Y.y+Xi,ye=Z.data.width,Ce=Z.data.height;ko.copy(Z.data,k,{x:0,y:0},{x:se,y:fe},Z.data),ko.copy(Z.data,k,{x:0,y:Ce-1},{x:se,y:fe-1},{width:ye,height:1}),ko.copy(Z.data,k,{x:0,y:0},{x:se,y:fe+Ce},{width:ye,height:1}),ko.copy(Z.data,k,{x:ye-1,y:0},{x:se-1,y:fe},{width:1,height:Ce}),ko.copy(Z.data,k,{x:0,y:0},{x:se+ye,y:fe},{width:1,height:Ce})}this.image=k,this.iconPositions=h,this.patternPositions=g}addImages(n,s,h){for(const g in n){const _=n[g],x={x:0,y:0,w:_.data.width+2*Xi,h:_.data.height+2*Xi};h.push(x),s[g]=new zy(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[g,_]=n.tl;h.update(s.data,void 0,{x:g,y:_})}}var Ol;Nt("ImagePosition",zy),Nt("ImageAtlas",fw),d.ah=void 0,(Ol=d.ah||(d.ah={}))[Ol.none=0]="none",Ol[Ol.horizontal=1]="horizontal",Ol[Ol.vertical=2]="vertical",Ol[Ol.horizontalOnly=3]="horizontalOnly";const Sd=-17;class Ed{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new Ed;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new Ed;return s.imageName=n,s}}class jc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new jc;for(let g=0;g<n.sections.length;g++){const _=n.sections[g];_.image?h.addImageSection(_):h.addTextSection(_,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const g=n.charCodeAt(h+1)||null,_=n.charCodeAt(h-1)||null;s+=g&&Xh(g)&&!bd[n[h+1]]||_&&Xh(_)&&!bd[n[h-1]]||!bd[n[h]]?n[h]:bd[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Ep[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Ep[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new jc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(Ed.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let g=0;g<n.text.length;++g)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void _e("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Ed.forImage(s)),this.sectionIndex.push(this.sections.length-1)):_e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Sp(o,n,s,h,g,_,x,S,k,O,Z,Y,se,fe,ye,Ce){const Re=jc.fromFeature(o,g);let Ue;Y===d.ah.vertical&&Re.verticalizePunctuation();const{processBidirectionalText:Je,processStyledBidirectionalText:Ge}=Ma;if(Je&&Re.sections.length===1){Ue=[];const vt=Je(Re.toString(),Ry(Re,O,_,n,h,fe,ye));for(const Ft of vt){const Ht=new jc;Ht.text=Ft,Ht.sections=Re.sections;for(let Lt=0;Lt<Ft.length;Lt++)Ht.sectionIndex.push(0);Ue.push(Ht)}}else if(Ge){Ue=[];const vt=Ge(Re.text,Re.sectionIndex,Ry(Re,O,_,n,h,fe,ye));for(const Ft of vt){const Ht=new jc;Ht.text=Ft[0],Ht.sectionIndex=Ft[1],Ht.sections=Re.sections,Ue.push(Ht)}}else Ue=function(vt,Ft){const Ht=[],Lt=vt.text;let zt=0;for(const It of Ft)Ht.push(vt.substring(zt,It)),zt=It;return zt<Lt.length&&Ht.push(vt.substring(zt,Lt.length)),Ht}(Re,Ry(Re,O,_,n,h,fe,ye));const qe=[],mt={positionedLines:qe,text:Re.toString(),top:Z[1],bottom:Z[1],left:Z[0],right:Z[0],writingMode:Y,iconsInText:!1,verticalizable:!1};return function(vt,Ft,Ht,Lt,zt,It,Ut,kt,Et,en,Xt,Cn){let rr=0,lr=Sd,Nr=0,po=0;const Li=kt==="right"?1:kt==="left"?0:.5;let Or=0;for(const Ur of zt){Ur.trim();const $r=Ur.getMaxScale(),wi=($r-1)*Br,Di={positionedGlyphs:[],lineOffset:0};vt.positionedLines[Or]=Di;const bi=Di.positionedGlyphs;let qi=0;if(!Ur.length()){lr+=It,++Or;continue}for(let Vr=0;Vr<Ur.length();Vr++){const Mn=Ur.getSection(Vr),Si=Ur.getSectionIndex(Vr),hi=Ur.getCharCode(Vr);let Gr=0,es=null,vs=null,_s=null,Na=Br;const ts=!(Et===d.ah.horizontal||!Xt&&!bc(hi)||Xt&&(Ep[hi]||(ei=hi,jt.Arabic(ei)||jt["Arabic Supplement"](ei)||jt["Arabic Extended-A"](ei)||jt["Arabic Presentation Forms-A"](ei)||jt["Arabic Presentation Forms-B"](ei))));if(Mn.imageName){const zo=Lt[Mn.imageName];if(!zo)continue;_s=Mn.imageName,vt.iconsInText=vt.iconsInText||!0,vs=zo.paddedRect;const Yi=zo.displaySize;Mn.scale=Mn.scale*Br/Cn,es={width:Yi[0],height:Yi[1],left:Xi,top:-hw,advance:ts?Yi[1]:Yi[0]},Gr=wi+(Br-Yi[1]*Mn.scale),Na=es.advance;const Ua=ts?Yi[0]*Mn.scale-Br*$r:Yi[1]*Mn.scale-Br*$r;Ua>0&&Ua>qi&&(qi=Ua)}else{const zo=Ht[Mn.fontStack],Yi=zo&&zo[hi];if(Yi&&Yi.rect)vs=Yi.rect,es=Yi.metrics;else{const Ua=Ft[Mn.fontStack],Pd=Ua&&Ua[hi];if(!Pd)continue;es=Pd.metrics}Gr=($r-Mn.scale)*Br}ts?(vt.verticalizable=!0,bi.push({glyph:hi,imageName:_s,x:rr,y:lr+Gr,vertical:ts,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:Si,metrics:es,rect:vs}),rr+=Na*Mn.scale+en):(bi.push({glyph:hi,imageName:_s,x:rr,y:lr+Gr,vertical:ts,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:Si,metrics:es,rect:vs}),rr+=es.advance*Mn.scale+en)}bi.length!==0&&(Nr=Math.max(rr-en,Nr),MP(bi,0,bi.length-1,Li,qi)),rr=0;const Ki=It*$r+qi;Di.lineOffset=Math.max(qi,wi),lr+=Ki,po=Math.max(Ki,po),++Or}var ei;const ci=lr-Sd,{horizontalAlign:Fi,verticalAlign:ji}=Oy(Ut);(function(Ur,$r,wi,Di,bi,qi,Ki,Vr,Mn){const Si=($r-wi)*bi;let hi=0;hi=qi!==Ki?-Vr*Di-Sd:(-Di*Mn+.5)*Ki;for(const Gr of Ur)for(const es of Gr.positionedGlyphs)es.x+=Si,es.y+=hi})(vt.positionedLines,Li,Fi,ji,Nr,po,It,ci,zt.length),vt.top+=-ji*ci,vt.bottom=vt.top+ci,vt.left+=-Fi*Nr,vt.right=vt.left+Nr}(mt,n,s,h,Ue,x,S,k,Y,O,se,Ce),!function(vt){for(const Ft of vt)if(Ft.positionedGlyphs.length!==0)return!1;return!0}(qe)&&mt}const Ep={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},PP={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function pw(o,n,s,h,g,_){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Br/_+g:0}{const x=s[n.fontStack],S=x&&x[o];return S?S.metrics.advance*n.scale+g:0}}function mw(o,n,s,h){const g=Math.pow(o-n,2);return h?o<n?g/2:2*g:g+Math.abs(s)*s}function kP(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function gw(o,n,s,h,g,_){let x=null,S=mw(n,s,g,_);for(const k of h){const O=mw(n-k.x,s,g,_)+k.badness;O<=S&&(x=k,S=O)}return{index:o,x:n,priorBreak:x,badness:S}}function yw(o){return o?yw(o.priorBreak).concat(o.index):[]}function Ry(o,n,s,h,g,_,x){if(_!=="point")return[];if(!o)return[];const S=[],k=function(se,fe,ye,Ce,Re,Ue){let Je=0;for(let Ge=0;Ge<se.length();Ge++){const qe=se.getSection(Ge);Je+=pw(se.getCharCode(Ge),qe,Ce,Re,fe,Ue)}return Je/Math.max(1,Math.ceil(Je/ye))}(o,n,s,h,g,x),O=o.text.indexOf("")>=0;let Z=0;for(let se=0;se<o.length();se++){const fe=o.getSection(se),ye=o.getCharCode(se);if(Ep[ye]||(Z+=pw(ye,fe,h,g,n,x)),se<o.length()-1){const Ce=!((Y=ye)<11904||!(jt["Bopomofo Extended"](Y)||jt.Bopomofo(Y)||jt["CJK Compatibility Forms"](Y)||jt["CJK Compatibility Ideographs"](Y)||jt["CJK Compatibility"](Y)||jt["CJK Radicals Supplement"](Y)||jt["CJK Strokes"](Y)||jt["CJK Symbols and Punctuation"](Y)||jt["CJK Unified Ideographs Extension A"](Y)||jt["CJK Unified Ideographs"](Y)||jt["Enclosed CJK Letters and Months"](Y)||jt["Halfwidth and Fullwidth Forms"](Y)||jt.Hiragana(Y)||jt["Ideographic Description Characters"](Y)||jt["Kangxi Radicals"](Y)||jt["Katakana Phonetic Extensions"](Y)||jt.Katakana(Y)||jt["Vertical Forms"](Y)||jt["Yi Radicals"](Y)||jt["Yi Syllables"](Y)));(PP[ye]||Ce||fe.imageName)&&S.push(gw(se+1,Z,k,S,kP(ye,o.getCharCode(se+1),Ce&&O),!1))}}var Y;return yw(gw(o.length(),Z,k,S,0,!0))}function Oy(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function MP(o,n,s,h,g){if(!h&&!g)return;const _=o[s],x=(o[s].x+_.metrics.advance*_.scale)*h;for(let S=n;S<=s;S++)o[S].x-=x,o[S].y+=g}function zP(o,n,s){const{horizontalAlign:h,verticalAlign:g}=Oy(s),_=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*g;return{image:o,top:x,bottom:x+o.displaySize[1],left:_,right:_+o.displaySize[0]}}function vw(o,n,s,h,g,_){const x=o.image;let S;if(x.content){const Re=x.content,Ue=x.pixelRatio||1;S=[Re[0]/Ue,Re[1]/Ue,x.displaySize[0]-Re[2]/Ue,x.displaySize[1]-Re[3]/Ue]}const k=n.left*_,O=n.right*_;let Z,Y,se,fe;s==="width"||s==="both"?(fe=g[0]+k-h[3],Y=g[0]+O+h[1]):(fe=g[0]+(k+O-x.displaySize[0])/2,Y=fe+x.displaySize[0]);const ye=n.top*_,Ce=n.bottom*_;return s==="height"||s==="both"?(Z=g[1]+ye-h[0],se=g[1]+Ce+h[2]):(Z=g[1]+(ye+Ce-x.displaySize[1])/2,se=Z+x.displaySize[1]),{image:x,top:Z,right:Y,bottom:se,left:fe,collisionPadding:S}}const Td=255,Js=128,Ll=Td*Js;function _w(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new tr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=s;let _=0;for(;_<h.length&&h[_]<=o;)_++;_=Math.max(0,_-1);let x=_;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const S=h[_],k=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:k,interpolationType:g}:{kind:"camera",minZoom:S,maxZoom:k,minSize:s.evaluate(new tr(S)),maxSize:s.evaluate(new tr(k)),interpolationType:g}}}function Ly(o,n,s){let h="never";const g=o.get(n);return g?h=g:o.get(s)&&(h="always"),h}const RP=Rl.VectorTileFeature.types,OP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Tp(o,n,s,h,g,_,x,S,k,O,Z,Y,se){const fe=S?Math.min(Ll,Math.round(S[0])):0,ye=S?Math.min(Ll,Math.round(S[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*g),_,x,(fe<<1)+(k?1:0),ye,16*O,16*Z,256*Y,256*se)}function Fy(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function LP(o){for(const n of o.sections)if(ip(n.text))return!0;return!1}class jy{constructor(n){this.layoutVertexArray=new Xe,this.indexArray=new ot,this.programConfigurations=n,this.segments=new bt,this.dynamicLayoutVertexArray=new rt,this.opacityVertexArray=new je,this.hasVisibleVertices=!1,this.placedSymbolArray=new r}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,dP.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,fP.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,OP,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Nt("SymbolBuffers",jy);class Dy{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new bt,this.collisionVertexArray=new it}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,pP.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Nt("CollisionBuffers",Dy);class Dc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=my([]),this.placementViewportMatrix=my([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_w(this.zoom,s["text-size"]),this.iconSizeData=_w(this.zoom,s["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=Ly(h,"text-overlap","text-allow-overlap")!=="never"||Ly(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>d.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new jy(new ar(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new jy(new ar(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new m,this.lineVertexArray=new v,this.symbolInstances=new f,this.textAnchorOffsets=new P}calculateGlyphDependencies(n,s,h,g,_){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||g)&&_){const S=bd[n.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(n,s,h){const g=this.layers[0],_=g.layout,x=_.get("text-font"),S=_.get("text-field"),k=_.get("icon-image"),O=(S.value.kind!=="constant"||S.value.value instanceof vi&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),Z=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,Y=_.get("symbol-sort-key");if(this.features=[],!O&&!Z)return;const se=s.iconDependencies,fe=s.glyphDependencies,ye=s.availableImages,Ce=new tr(this.zoom);for(const{feature:Re,id:Ue,index:Je,sourceLayerIndex:Ge}of n){const qe=g._featureFilter.needGeometry,mt=ja(Re,qe);if(!g._featureFilter.filter(Ce,mt,h))continue;let vt,Ft;if(qe||(mt.geometry=Fa(Re)),O){const Lt=g.getValueAndResolveTokens("text-field",mt,h,ye),zt=vi.factory(Lt),It=this.hasRTLText=this.hasRTLText||LP(zt);(!It||Ma.getRTLTextPluginStatus()==="unavailable"||It&&Ma.isParsed())&&(vt=gP(zt,g,mt))}if(Z){const Lt=g.getValueAndResolveTokens("icon-image",mt,h,ye);Ft=Lt instanceof Pi?Lt:Pi.fromString(Lt)}if(!vt&&!Ft)continue;const Ht=this.sortFeaturesByKey?Y.evaluate(mt,{},h):void 0;if(this.features.push({id:Ue,text:vt,icon:Ft,index:Je,sourceLayerIndex:Ge,geometry:mt.geometry,properties:Re.properties,type:RP[Re.type],sortKey:Ht}),Ft&&(se[Ft.name]=!0),vt){const Lt=x.evaluate(mt,{},h).join(","),zt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.ah.vertical)>=0;for(const It of vt.sections)if(It.image)se[It.image.name]=!0;else{const Ut=Tu(vt.toString()),kt=It.fontStack||Lt,Et=fe[kt]=fe[kt]||{};this.calculateGlyphDependencies(It.text,Et,zt,this.allowVerticalPlacement,Ut)}}}_.get("symbol-placement")==="line"&&(this.features=function(Re){const Ue={},Je={},Ge=[];let qe=0;function mt(Lt){Ge.push(Re[Lt]),qe++}function vt(Lt,zt,It){const Ut=Je[Lt];return delete Je[Lt],Je[zt]=Ut,Ge[Ut].geometry[0].pop(),Ge[Ut].geometry[0]=Ge[Ut].geometry[0].concat(It[0]),Ut}function Ft(Lt,zt,It){const Ut=Ue[zt];return delete Ue[zt],Ue[Lt]=Ut,Ge[Ut].geometry[0].shift(),Ge[Ut].geometry[0]=It[0].concat(Ge[Ut].geometry[0]),Ut}function Ht(Lt,zt,It){const Ut=It?zt[0][zt[0].length-1]:zt[0][0];return`${Lt}:${Ut.x}:${Ut.y}`}for(let Lt=0;Lt<Re.length;Lt++){const zt=Re[Lt],It=zt.geometry,Ut=zt.text?zt.text.toString():null;if(!Ut){mt(Lt);continue}const kt=Ht(Ut,It),Et=Ht(Ut,It,!0);if(kt in Je&&Et in Ue&&Je[kt]!==Ue[Et]){const en=Ft(kt,Et,It),Xt=vt(kt,Et,Ge[en].geometry);delete Ue[kt],delete Je[Et],Je[Ht(Ut,Ge[Xt].geometry,!0)]=Xt,Ge[en].geometry=null}else kt in Je?vt(kt,Et,It):Et in Ue?Ft(kt,Et,It):(mt(Lt),Ue[kt]=qe-1,Je[Et]=qe-1)}return Ge.filter(Lt=>Lt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,Ue)=>Re.sortKey-Ue.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let g=n.dist(s[n.segment+1]),_=n.dist(s[n.segment]);const x={};for(let S=n.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:g},S<s.length-1&&(g+=s[S+1].dist(s[S]));for(let S=n.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:_},S>0&&(_+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const k=x[S];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,g,_,x,S,k,O,Z,Y,se){const fe=n.indexArray,ye=n.layoutVertexArray,Ce=n.segments.prepareSegment(4*s.length,ye,fe,this.canOverlap?x.sortKey:void 0),Re=this.glyphOffsetArray.length,Ue=Ce.vertexLength,Je=this.allowVerticalPlacement&&S===d.ah.vertical?Math.PI/2:0,Ge=x.text&&x.text.sections;for(let qe=0;qe<s.length;qe++){const{tl:mt,tr:vt,bl:Ft,br:Ht,tex:Lt,pixelOffsetTL:zt,pixelOffsetBR:It,minFontScaleX:Ut,minFontScaleY:kt,glyphOffset:Et,isSDF:en,sectionIndex:Xt}=s[qe],Cn=Ce.vertexLength,rr=Et[1];Tp(ye,k.x,k.y,mt.x,rr+mt.y,Lt.x,Lt.y,h,en,zt.x,zt.y,Ut,kt),Tp(ye,k.x,k.y,vt.x,rr+vt.y,Lt.x+Lt.w,Lt.y,h,en,It.x,zt.y,Ut,kt),Tp(ye,k.x,k.y,Ft.x,rr+Ft.y,Lt.x,Lt.y+Lt.h,h,en,zt.x,It.y,Ut,kt),Tp(ye,k.x,k.y,Ht.x,rr+Ht.y,Lt.x+Lt.w,Lt.y+Lt.h,h,en,It.x,It.y,Ut,kt),Fy(n.dynamicLayoutVertexArray,k,Je),fe.emplaceBack(Cn,Cn+1,Cn+2),fe.emplaceBack(Cn+1,Cn+2,Cn+3),Ce.vertexLength+=4,Ce.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Et[0]),qe!==s.length-1&&Xt===s[qe+1].sectionIndex||n.programConfigurations.populatePaintArrays(ye.length,x,x.index,{},se,Ge&&Ge[Xt])}n.placedSymbolArray.emplaceBack(k.x,k.y,Re,this.glyphOffsetArray.length-Re,Ue,O,Z,k.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],S,0,!1,0,Y)}_addCollisionDebugVertex(n,s,h,g,_,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,g,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,g,_,x,S){const k=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),O=k.vertexLength,Z=_.layoutVertexArray,Y=_.collisionVertexArray,se=S.anchorX,fe=S.anchorY;this._addCollisionDebugVertex(Z,Y,x,se,fe,new w(n,s)),this._addCollisionDebugVertex(Z,Y,x,se,fe,new w(h,s)),this._addCollisionDebugVertex(Z,Y,x,se,fe,new w(h,g)),this._addCollisionDebugVertex(Z,Y,x,se,fe,new w(n,g)),k.vertexLength+=4;const ye=_.indexArray;ye.emplaceBack(O,O+1),ye.emplaceBack(O+1,O+2),ye.emplaceBack(O+2,O+3),ye.emplaceBack(O+3,O),k.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,g){for(let _=n;_<s;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Dy(Ke,rw.members,ht),this.iconCollisionBox=new Dy(Ke,rw.members,ht);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,g,_,x,S,k,O){const Z={};for(let Y=s;Y<h;Y++){const se=n.get(Y);Z.textBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},Z.textFeatureIndex=se.featureIndex;break}for(let Y=g;Y<_;Y++){const se=n.get(Y);Z.verticalTextBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},Z.verticalTextFeatureIndex=se.featureIndex;break}for(let Y=x;Y<S;Y++){const se=n.get(Y);Z.iconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},Z.iconFeatureIndex=se.featureIndex;break}for(let Y=k;Y<O;Y++){const se=n.get(Y);Z.verticalIconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},Z.verticalIconFeatureIndex=se.featureIndex;break}return Z}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),g=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<g;_+=4)n.indexArray.emplaceBack(_,_+1,_+2),n.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),g=[],_=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const k=this.symbolInstances.get(S);g.push(0|Math.round(s*k.anchorX+h*k.anchorY)),_.push(k.featureIndex)}return x.sort((S,k)=>g[S]-g[k]||_[k]-_[S]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((g,_,x)=>{g>=0&&x.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let xw,ww;Nt("SymbolBucket",Dc,{omit:["layers","collisionBoxArray","features","compareText"]}),Dc.MAX_GLYPHS=65535,Dc.addDynamicAttributes=Fy;var By={get paint(){return ww=ww||new zi({"icon-opacity":new nn(et.paint_symbol["icon-opacity"]),"icon-color":new nn(et.paint_symbol["icon-color"]),"icon-halo-color":new nn(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new nn(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new nn(et.paint_symbol["icon-halo-blur"]),"icon-translate":new qt(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new qt(et.paint_symbol["icon-translate-anchor"]),"text-opacity":new nn(et.paint_symbol["text-opacity"]),"text-color":new nn(et.paint_symbol["text-color"],{runtimeType:_n,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new nn(et.paint_symbol["text-halo-color"]),"text-halo-width":new nn(et.paint_symbol["text-halo-width"]),"text-halo-blur":new nn(et.paint_symbol["text-halo-blur"]),"text-translate":new qt(et.paint_symbol["text-translate"]),"text-translate-anchor":new qt(et.paint_symbol["text-translate-anchor"])})},get layout(){return xw=xw||new zi({"symbol-placement":new qt(et.layout_symbol["symbol-placement"]),"symbol-spacing":new qt(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qt(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new nn(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qt(et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qt(et.layout_symbol["icon-allow-overlap"]),"icon-overlap":new qt(et.layout_symbol["icon-overlap"]),"icon-ignore-placement":new qt(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new qt(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qt(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new nn(et.layout_symbol["icon-size"]),"icon-text-fit":new qt(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qt(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new nn(et.layout_symbol["icon-image"]),"icon-rotate":new nn(et.layout_symbol["icon-rotate"]),"icon-padding":new nn(et.layout_symbol["icon-padding"]),"icon-keep-upright":new qt(et.layout_symbol["icon-keep-upright"]),"icon-offset":new nn(et.layout_symbol["icon-offset"]),"icon-anchor":new nn(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qt(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qt(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qt(et.layout_symbol["text-rotation-alignment"]),"text-field":new nn(et.layout_symbol["text-field"]),"text-font":new nn(et.layout_symbol["text-font"]),"text-size":new nn(et.layout_symbol["text-size"]),"text-max-width":new nn(et.layout_symbol["text-max-width"]),"text-line-height":new qt(et.layout_symbol["text-line-height"]),"text-letter-spacing":new nn(et.layout_symbol["text-letter-spacing"]),"text-justify":new nn(et.layout_symbol["text-justify"]),"text-radial-offset":new nn(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qt(et.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new nn(et.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new nn(et.layout_symbol["text-anchor"]),"text-max-angle":new qt(et.layout_symbol["text-max-angle"]),"text-writing-mode":new qt(et.layout_symbol["text-writing-mode"]),"text-rotate":new nn(et.layout_symbol["text-rotate"]),"text-padding":new qt(et.layout_symbol["text-padding"]),"text-keep-upright":new qt(et.layout_symbol["text-keep-upright"]),"text-transform":new nn(et.layout_symbol["text-transform"]),"text-offset":new nn(et.layout_symbol["text-offset"]),"text-allow-overlap":new qt(et.layout_symbol["text-allow-overlap"]),"text-overlap":new qt(et.layout_symbol["text-overlap"]),"text-ignore-placement":new qt(et.layout_symbol["text-ignore-placement"]),"text-optional":new qt(et.layout_symbol["text-optional"])})}};class bw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:at,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Nt("FormatSectionOverride",bw,{omit:["defaultValue"]});class Cp extends Io{constructor(n){super(n,By)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const _ of h)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,g){const _=this.layout.get(n).evaluate(s,{},h,g),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Hn(x.value)||!_?_:function(S,k){return k.replace(/{([^{}]+)}/g,(O,Z)=>S&&Z in S?String(S[Z]):"")}(s.properties,_)}createBucket(n){return new Dc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of By.paint.overridableProperties){if(!Cp.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new bw(s),g=new ba(h,s.property.specification);let _=null;_=s.value.kind==="constant"||s.value.kind==="source"?new Vs("source",g):new Sa("composite",g,s.value.zoomStops),this.paint._values[n]=new Co(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Cp.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),g=By.paint.properties[s];let _=!1;const x=S=>{for(const k of S)if(g.overrides&&g.overrides.hasOverride(k))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof vi)x(h.value.value.sections);else if(h.value.kind==="source"){const S=O=>{_||(O instanceof hs&&wr(O.value)===gi?x(O.value.sections):O instanceof _l?x(O.sections):O.eachChild(S))},k=h.value;k._styleExpression&&S(k._styleExpression.expression)}return _}}let Sw;var FP={get paint(){return Sw=Sw||new zi({"background-color":new qt(et.paint_background["background-color"]),"background-pattern":new Qh(et.paint_background["background-pattern"]),"background-opacity":new qt(et.paint_background["background-opacity"])})}};class jP extends Io{constructor(n){super(n,FP)}}let Ew;var DP={get paint(){return Ew=Ew||new zi({"raster-opacity":new qt(et.paint_raster["raster-opacity"]),"raster-hue-rotate":new qt(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qt(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qt(et.paint_raster["raster-brightness-max"]),"raster-saturation":new qt(et.paint_raster["raster-saturation"]),"raster-contrast":new qt(et.paint_raster["raster-contrast"]),"raster-resampling":new qt(et.paint_raster["raster-resampling"]),"raster-fade-duration":new qt(et.paint_raster["raster-fade-duration"])})}};class BP extends Io{constructor(n){super(n,DP)}}class NP extends Io{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class UP{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Ny=63710088e-1;class Fl{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Fl(V(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,g=n.lat*s,_=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((n.lng-this.lng)*s);return Ny*Math.acos(Math.min(_,1))}static convert(n){if(n instanceof Fl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Fl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Fl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Tw=2*Math.PI*Ny;function Cw(o){return Tw*Math.cos(o*Math.PI/180)}function Iw(o){return(180+o)/360}function Aw(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Pw(o,n){return o/Cw(n)}function Uy(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Ip{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Fl.convert(n);return new Ip(Iw(h.lng),Aw(h.lat),Pw(s,h.lat))}toLngLat(){return new Fl(360*this.x-180,Uy(this.y))}toAltitude(){return this.z*Cw(Uy(this.y))}meterInMercatorCoordinateUnits(){return 1/Tw*(n=Uy(this.y),1/Math.cos(n*Math.PI/180));var n}}function kw(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class $y{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=Cd(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const g=(x=this.y,S=this.z,k=kw(256*(_=this.x),256*(x=Math.pow(2,S)-x-1),S),O=kw(256*(_+1),256*(x+1),S),k[0]+","+k[1]+","+O[0]+","+O[1]);var _,x,S,k,O;const Z=function(Y,se,fe){let ye,Ce="";for(let Re=Y;Re>0;Re--)ye=1<<Re-1,Ce+=(se&ye?1:0)+(fe&ye?2:0);return Ce}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,Z).replace(/{bbox-epsg-3857}/g,g)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new w((n.x*s-this.x)*An,(n.y*s-this.y)*An)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Mw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Cd(n,s.z,s.z,s.x,s.y)}}class Mo{constructor(n,s,h,g,_){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new $y(h,+g,+_),this.key=Cd(s,n,h,g,_)}clone(){return new Mo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Mo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?Cd(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Cd(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Mo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new Mo(s,this.wrap,s,h,g),new Mo(s,this.wrap,s,h+1,g),new Mo(s,this.wrap,s,h,g+1),new Mo(s,this.wrap,s,h+1,g+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Mo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Mo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Mw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Ip(n.x-this.wrap,n.y))}}function Cd(o,n,s,h,g){(o*=2)<0&&(o=-1*o-1);const _=1<<s;return(_*_*o+_*g+h).toString(36)+s.toString(36)+n.toString(36)}Nt("CanonicalTileID",$y),Nt("OverscaledTileID",Mo,{omit:["posMatrix"]});class zw{constructor(n,s,h,g=1,_=1,x=1,S=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void _e(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const k=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let O=0;O<k;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(k,O)]=this.data[this._idx(k-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,k)]=this.data[this._idx(O,k-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(k,-1)]=this.data[this._idx(k-1,0)],this.data[this._idx(-1,k)]=this.data[this._idx(0,k-1)],this.data[this._idx(k,k)]=this.data[this._idx(k-1,k-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<k;O++)for(let Z=0;Z<k;Z++){const Y=this.get(O,Z);Y>this.max&&(this.max=Y),Y<this.min&&(this.min=Y)}}get(n,s){const h=new Uint8Array(this.data.buffer),g=4*this._idx(n,s);return this.unpack(h[g],h[g+1],h[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new ko({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let g=s*this.dim,_=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:g=_-1;break;case 1:_=g+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const k=-s*this.dim,O=-h*this.dim;for(let Z=x;Z<S;Z++)for(let Y=g;Y<_;Y++)this.data[this._idx(Y,Z)]=n.data[this._idx(Y+k,Z+O)]}}Nt("DEMData",zw);class Rw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Ow{constructor(n,s,h,g,_){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=g,this.properties=n.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class Lw{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new gs(An,16,0),this.grid3D=new gs(An,16,0),this.featureIndexArray=new H,this.promoteId=s}insert(n,s,h,g,_,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,_);const k=x?this.grid3D:this.grid;for(let O=0;O<s.length;O++){const Z=s[O],Y=[1/0,1/0,-1/0,-1/0];for(let se=0;se<Z.length;se++){const fe=Z[se];Y[0]=Math.min(Y[0],fe.x),Y[1]=Math.min(Y[1],fe.y),Y[2]=Math.max(Y[2],fe.x),Y[3]=Math.max(Y[3],fe.y)}Y[0]<An&&Y[1]<An&&Y[2]>=0&&Y[3]>=0&&k.insert(S,Y[0],Y[1],Y[2],Y[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Rl.VectorTile(new ky(this.rawTileData)).layers,this.sourceLayerCoder=new Rw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,g){this.loadVTLayers();const _=n.params||{},x=An/n.tileSize/n.scale,S=ho(_.filter),k=n.queryGeometry,O=n.queryPadding*x,Z=jw(k),Y=this.grid.query(Z.minX-O,Z.minY-O,Z.maxX+O,Z.maxY+O),se=jw(n.cameraQueryGeometry),fe=this.grid3D.query(se.minX-O,se.minY-O,se.maxX+O,se.maxY+O,(Re,Ue,Je,Ge)=>function(qe,mt,vt,Ft,Ht){for(const zt of qe)if(mt<=zt.x&&vt<=zt.y&&Ft>=zt.x&&Ht>=zt.y)return!0;const Lt=[new w(mt,vt),new w(mt,Ht),new w(Ft,Ht),new w(Ft,vt)];if(qe.length>2){for(const zt of Lt)if(Mc(qe,zt))return!0}for(let zt=0;zt<qe.length-1;zt++)if(_A(qe[zt],qe[zt+1],Lt))return!0;return!1}(n.cameraQueryGeometry,Re-O,Ue-O,Je+O,Ge+O));for(const Re of fe)Y.push(Re);Y.sort($P);const ye={};let Ce;for(let Re=0;Re<Y.length;Re++){const Ue=Y[Re];if(Ue===Ce)continue;Ce=Ue;const Je=this.featureIndexArray.get(Ue);let Ge=null;this.loadMatchingFeature(ye,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,S,_.layers,_.availableImages,s,h,g,(qe,mt,vt)=>(Ge||(Ge=Fa(qe)),mt.queryIntersectsFeature(k,qe,vt,Ge,this.z,n.transform,x,n.pixelPosMatrix)))}return ye}loadMatchingFeature(n,s,h,g,_,x,S,k,O,Z,Y){const se=this.bucketLayerIDs[s];if(x&&!function(Re,Ue){for(let Je=0;Je<Re.length;Je++)if(Ue.indexOf(Re[Je])>=0)return!0;return!1}(x,se))return;const fe=this.sourceLayerCoder.decode(h),ye=this.vtLayers[fe].feature(g);if(_.needGeometry){const Re=ja(ye,!0);if(!_.filter(new tr(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!_.filter(new tr(this.tileID.overscaledZ),ye))return;const Ce=this.getId(ye,fe);for(let Re=0;Re<se.length;Re++){const Ue=se[Re];if(x&&x.indexOf(Ue)<0)continue;const Je=k[Ue];if(!Je)continue;let Ge={};Ce&&Z&&(Ge=Z.getState(Je.sourceLayer||"_geojsonTileLayer",Ce));const qe=E({},O[Ue]);qe.paint=Fw(qe.paint,Je.paint,ye,Ge,S),qe.layout=Fw(qe.layout,Je.layout,ye,Ge,S);const mt=!Y||Y(ye,Je,Ge);if(!mt)continue;const vt=new Ow(ye,this.z,this.x,this.y,Ce);vt.layer=qe;let Ft=n[Ue];Ft===void 0&&(Ft=n[Ue]=[]),Ft.push({featureIndex:g,feature:vt,intersectionZ:mt})}}lookupSymbolFeatures(n,s,h,g,_,x,S,k){const O={};this.loadVTLayers();const Z=ho(_);for(const Y of n)this.loadMatchingFeature(O,h,g,Y,Z,x,S,k,s);return O}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function Fw(o,n,s,h,g){return B(o,(_,x)=>{const S=n instanceof Cu?n.get(x):null;return S&&S.evaluate?S.evaluate(s,h,g):S})}function jw(o){let n=1/0,s=1/0,h=-1/0,g=-1/0;for(const _ of o)n=Math.min(n,_.x),s=Math.min(s,_.y),h=Math.max(h,_.x),g=Math.max(g,_.y);return{minX:n,minY:s,maxX:h,maxY:g}}function $P(o,n){return n-o}function Dw(o,n,s,h,g){const _=[];for(let x=0;x<o.length;x++){const S=o[x];let k;for(let O=0;O<S.length-1;O++){let Z=S[O],Y=S[O+1];Z.x<n&&Y.x<n||(Z.x<n?Z=new w(n,Z.y+(n-Z.x)/(Y.x-Z.x)*(Y.y-Z.y))._round():Y.x<n&&(Y=new w(n,Z.y+(n-Z.x)/(Y.x-Z.x)*(Y.y-Z.y))._round()),Z.y<s&&Y.y<s||(Z.y<s?Z=new w(Z.x+(s-Z.y)/(Y.y-Z.y)*(Y.x-Z.x),s)._round():Y.y<s&&(Y=new w(Z.x+(s-Z.y)/(Y.y-Z.y)*(Y.x-Z.x),s)._round()),Z.x>=h&&Y.x>=h||(Z.x>=h?Z=new w(h,Z.y+(h-Z.x)/(Y.x-Z.x)*(Y.y-Z.y))._round():Y.x>=h&&(Y=new w(h,Z.y+(h-Z.x)/(Y.x-Z.x)*(Y.y-Z.y))._round()),Z.y>=g&&Y.y>=g||(Z.y>=g?Z=new w(Z.x+(g-Z.y)/(Y.y-Z.y)*(Y.x-Z.x),g)._round():Y.y>=g&&(Y=new w(Z.x+(g-Z.y)/(Y.y-Z.y)*(Y.x-Z.x),g)._round()),k&&Z.equals(k[k.length-1])||(k=[Z],_.push(k)),k.push(Y)))))}}return _}Nt("FeatureIndex",Lw,{omit:["rawTileData","sourceLayerCoder"]});class jl extends w{constructor(n,s,h,g){super(n,s),this.angle=h,g!==void 0&&(this.segment=g)}clone(){return new jl(this.x,this.y,this.angle,this.segment)}}function Bw(o,n,s,h,g){if(n.segment===void 0||s===0)return!0;let _=n,x=n.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=o[x].dist(_),_=o[x]}S+=o[x].dist(o[x+1]),x++;const k=[];let O=0;for(;S<s/2;){const Z=o[x],Y=o[x+1];if(!Y)return!1;let se=o[x-1].angleTo(Z)-Z.angleTo(Y);for(se=Math.abs((se+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:S,angleDelta:se}),O+=se;S-k[0].distance>h;)O-=k.shift().angleDelta;if(O>g)return!1;x++,S+=Z.dist(Y)}return!0}function Nw(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function Uw(o,n,s){return o?.6*n*s:0}function $w(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function VP(o,n,s,h,g,_){const x=Uw(s,g,_),S=$w(s,h)*_;let k=0;const O=Nw(o)/2;for(let Z=0;Z<o.length-1;Z++){const Y=o[Z],se=o[Z+1],fe=Y.dist(se);if(k+fe>O){const ye=(O-k)/fe,Ce=oi.number(Y.x,se.x,ye),Re=oi.number(Y.y,se.y,ye),Ue=new jl(Ce,Re,se.angleTo(Y),Z);return Ue._round(),!x||Bw(o,Ue,S,x,n)?Ue:void 0}k+=fe}}function GP(o,n,s,h,g,_,x,S,k){const O=Uw(h,_,x),Z=$w(h,g),Y=Z*x,se=o[0].x===0||o[0].x===k||o[0].y===0||o[0].y===k;return n-Y<n/4&&(n=Y+n/4),Vw(o,se?n/2*S%n:(Z/2+2*_)*x*S%n,n,O,s,Y,se,!1,k)}function Vw(o,n,s,h,g,_,x,S,k){const O=_/2,Z=Nw(o);let Y=0,se=n-s,fe=[];for(let ye=0;ye<o.length-1;ye++){const Ce=o[ye],Re=o[ye+1],Ue=Ce.dist(Re),Je=Re.angleTo(Ce);for(;se+s<Y+Ue;){se+=s;const Ge=(se-Y)/Ue,qe=oi.number(Ce.x,Re.x,Ge),mt=oi.number(Ce.y,Re.y,Ge);if(qe>=0&&qe<k&&mt>=0&&mt<k&&se-O>=0&&se+O<=Z){const vt=new jl(qe,mt,Je,ye);vt._round(),h&&!Bw(o,vt,_,h,g)||fe.push(vt)}}Y+=Ue}return S||fe.length||x||(fe=Vw(o,Y/2,s,h,g,_,x,!0,k)),fe}Nt("Anchor",jl);const Bc=Xi;function Gw(o,n,s,h){const g=[],_=o.image,x=_.pixelRatio,S=_.paddedRect.w-2*Bc,k=_.paddedRect.h-2*Bc,O=o.right-o.left,Z=o.bottom-o.top,Y=_.stretchX||[[0,S]],se=_.stretchY||[[0,k]],fe=(It,Ut)=>It+Ut[1]-Ut[0],ye=Y.reduce(fe,0),Ce=se.reduce(fe,0),Re=S-ye,Ue=k-Ce;let Je=0,Ge=ye,qe=0,mt=Ce,vt=0,Ft=Re,Ht=0,Lt=Ue;if(_.content&&h){const It=_.content;Je=Ap(Y,0,It[0]),qe=Ap(se,0,It[1]),Ge=Ap(Y,It[0],It[2]),mt=Ap(se,It[1],It[3]),vt=It[0]-Je,Ht=It[1]-qe,Ft=It[2]-It[0]-Ge,Lt=It[3]-It[1]-mt}const zt=(It,Ut,kt,Et)=>{const en=Pp(It.stretch-Je,Ge,O,o.left),Xt=kp(It.fixed-vt,Ft,It.stretch,ye),Cn=Pp(Ut.stretch-qe,mt,Z,o.top),rr=kp(Ut.fixed-Ht,Lt,Ut.stretch,Ce),lr=Pp(kt.stretch-Je,Ge,O,o.left),Nr=kp(kt.fixed-vt,Ft,kt.stretch,ye),po=Pp(Et.stretch-qe,mt,Z,o.top),Li=kp(Et.fixed-Ht,Lt,Et.stretch,Ce),Or=new w(en,Cn),ei=new w(lr,Cn),ci=new w(lr,po),Fi=new w(en,po),ji=new w(Xt/x,rr/x),Ur=new w(Nr/x,Li/x),$r=n*Math.PI/180;if($r){const bi=Math.sin($r),qi=Math.cos($r),Ki=[qi,-bi,bi,qi];Or._matMult(Ki),ei._matMult(Ki),Fi._matMult(Ki),ci._matMult(Ki)}const wi=It.stretch+It.fixed,Di=Ut.stretch+Ut.fixed;return{tl:Or,tr:ei,bl:Fi,br:ci,tex:{x:_.paddedRect.x+Bc+wi,y:_.paddedRect.y+Bc+Di,w:kt.stretch+kt.fixed-wi,h:Et.stretch+Et.fixed-Di},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ji,pixelOffsetBR:Ur,minFontScaleX:Ft/x/O,minFontScaleY:Lt/x/Z,isSDF:s}};if(h&&(_.stretchX||_.stretchY)){const It=Hw(Y,Re,ye),Ut=Hw(se,Ue,Ce);for(let kt=0;kt<It.length-1;kt++){const Et=It[kt],en=It[kt+1];for(let Xt=0;Xt<Ut.length-1;Xt++)g.push(zt(Et,Ut[Xt],en,Ut[Xt+1]))}}else g.push(zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:k+1}));return g}function Ap(o,n,s){let h=0;for(const g of o)h+=Math.max(n,Math.min(s,g[1]))-Math.max(n,Math.min(s,g[0]));return h}function Hw(o,n,s){const h=[{fixed:-Bc,stretch:0}];for(const[g,_]of o){const x=h[h.length-1];h.push({fixed:g-x.stretch,stretch:x.stretch}),h.push({fixed:g-x.stretch,stretch:x.stretch+(_-g)})}return h.push({fixed:n+Bc,stretch:s}),h}function Pp(o,n,s,h){return o/n*s+h}function kp(o,n,s,h){return o-n*s/h}class Mp{constructor(n,s,h,g,_,x,S,k,O,Z){if(this.boxStartIndex=n.length,O){let Y=x.top,se=x.bottom;const fe=x.collisionPadding;fe&&(Y-=fe[1],se+=fe[3]);let ye=se-Y;ye>0&&(ye=Math.max(10,ye),this.circleDiameter=ye)}else{let Y=x.top*S-k[0],se=x.bottom*S+k[2],fe=x.left*S-k[3],ye=x.right*S+k[1];const Ce=x.collisionPadding;if(Ce&&(fe-=Ce[0]*S,Y-=Ce[1]*S,ye+=Ce[2]*S,se+=Ce[3]*S),Z){const Re=new w(fe,Y),Ue=new w(ye,Y),Je=new w(fe,se),Ge=new w(ye,se),qe=Z*Math.PI/180;Re._rotate(qe),Ue._rotate(qe),Je._rotate(qe),Ge._rotate(qe),fe=Math.min(Re.x,Ue.x,Je.x,Ge.x),ye=Math.max(Re.x,Ue.x,Je.x,Ge.x),Y=Math.min(Re.y,Ue.y,Je.y,Ge.y),se=Math.max(Re.y,Ue.y,Je.y,Ge.y)}n.emplaceBack(s.x,s.y,fe,Y,ye,se,h,g,_)}this.boxEndIndex=n.length}}class HP{constructor(n=[],s=WP){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,g=s[n];for(;n>0;){const _=n-1>>1,x=s[_];if(h(g,x)>=0)break;s[n]=x,n=_}s[n]=g}_down(n){const{data:s,compare:h}=this,g=this.length>>1,_=s[n];for(;n<g;){let x=1+(n<<1),S=s[x];const k=x+1;if(k<this.length&&h(s[k],S)<0&&(x=k,S=s[k]),h(S,_)>=0)break;s[n]=S,n=x}s[n]=_}}function WP(o,n){return o<n?-1:o>n?1:0}function ZP(o,n=1,s=!1){let h=1/0,g=1/0,_=-1/0,x=-1/0;const S=o[0];for(let fe=0;fe<S.length;fe++){const ye=S[fe];(!fe||ye.x<h)&&(h=ye.x),(!fe||ye.y<g)&&(g=ye.y),(!fe||ye.x>_)&&(_=ye.x),(!fe||ye.y>x)&&(x=ye.y)}const k=Math.min(_-h,x-g);let O=k/2;const Z=new HP([],XP);if(k===0)return new w(h,g);for(let fe=h;fe<_;fe+=k)for(let ye=g;ye<x;ye+=k)Z.push(new Nc(fe+O,ye+O,O,o));let Y=function(fe){let ye=0,Ce=0,Re=0;const Ue=fe[0];for(let Je=0,Ge=Ue.length,qe=Ge-1;Je<Ge;qe=Je++){const mt=Ue[Je],vt=Ue[qe],Ft=mt.x*vt.y-vt.x*mt.y;Ce+=(mt.x+vt.x)*Ft,Re+=(mt.y+vt.y)*Ft,ye+=3*Ft}return new Nc(Ce/ye,Re/ye,0,fe)}(o),se=Z.length;for(;Z.length;){const fe=Z.pop();(fe.d>Y.d||!Y.d)&&(Y=fe,s&&console.log("found best %d after %d probes",Math.round(1e4*fe.d)/1e4,se)),fe.max-Y.d<=n||(O=fe.h/2,Z.push(new Nc(fe.p.x-O,fe.p.y-O,O,o)),Z.push(new Nc(fe.p.x+O,fe.p.y-O,O,o)),Z.push(new Nc(fe.p.x-O,fe.p.y+O,O,o)),Z.push(new Nc(fe.p.x+O,fe.p.y+O,O,o)),se+=4)}return s&&(console.log(`num probes: ${se}`),console.log(`best distance: ${Y.d}`)),Y.p}function XP(o,n){return n.max-o.max}function Nc(o,n,s,h){this.p=new w(o,n),this.h=s,this.d=function(g,_){let x=!1,S=1/0;for(let k=0;k<_.length;k++){const O=_[k];for(let Z=0,Y=O.length,se=Y-1;Z<Y;se=Z++){const fe=O[Z],ye=O[se];fe.y>g.y!=ye.y>g.y&&g.x<(ye.x-fe.x)*(g.y-fe.y)/(ye.y-fe.y)+fe.x&&(x=!x),S=Math.min(S,Ax(g,fe,ye))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var ui;d.ap=void 0,(ui=d.ap||(d.ap={}))[ui.center=1]="center",ui[ui.left=2]="left",ui[ui.right=3]="right",ui[ui.top=4]="top",ui[ui.bottom=5]="bottom",ui[ui["top-left"]=6]="top-left",ui[ui["top-right"]=7]="top-right",ui[ui["bottom-left"]=8]="bottom-left",ui[ui["bottom-right"]=9]="bottom-right";const Dl=7,Vy=Number.POSITIVE_INFINITY;function Ww(o,n){return n[1]!==Vy?function(s,h,g){let _=0,x=0;switch(h=Math.abs(h),g=Math.abs(g),s){case"top-right":case"top-left":case"top":x=g-Dl;break;case"bottom-right":case"bottom-left":case"bottom":x=-g+Dl}switch(s){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,x]}(o,n[0],n[1]):function(s,h){let g=0,_=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":_=x-Dl;break;case"bottom-right":case"bottom-left":_=-x+Dl;break;case"bottom":_=-h+Dl;break;case"top":_=h-Dl}switch(s){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=h;break;case"right":g=-h}return[g,_]}(o,n[0])}function Zw(o,n,s){var h;const g=o.layout,_=(h=g.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(_){const S=_.values,k=[];for(let O=0;O<S.length;O+=2){const Z=k[O]=S[O],Y=S[O+1].map(se=>se*Br);Z.startsWith("top")?Y[1]-=Dl:Z.startsWith("bottom")&&(Y[1]+=Dl),k[O+1]=Y}return new Zr(k)}const x=g.get("text-variable-anchor");if(x){let S;S=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(n,{},s)*Br,Vy]:g.get("text-offset").evaluate(n,{},s).map(O=>O*Br);const k=[];for(const O of x)k.push(O,Ww(O,S));return new Zr(k)}return null}function Gy(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function qP(o,n,s,h,g,_,x,S,k,O,Z){let Y=_.textMaxSize.evaluate(n,{});Y===void 0&&(Y=x);const se=o.layers[0].layout,fe=se.get("icon-offset").evaluate(n,{},Z),ye=qw(s.horizontal),Ce=x/24,Re=o.tilePixelRatio*Ce,Ue=o.tilePixelRatio*Y/24,Je=o.tilePixelRatio*S,Ge=o.tilePixelRatio*se.get("symbol-spacing"),qe=se.get("text-padding")*o.tilePixelRatio,mt=function(Et,en,Xt,Cn=1){const rr=Et.get("icon-padding").evaluate(en,{},Xt),lr=rr&&rr.values;return[lr[0]*Cn,lr[1]*Cn,lr[2]*Cn,lr[3]*Cn]}(se,n,Z,o.tilePixelRatio),vt=se.get("text-max-angle")/180*Math.PI,Ft=se.get("text-rotation-alignment")!=="viewport"&&se.get("symbol-placement")!=="point",Ht=se.get("icon-rotation-alignment")==="map"&&se.get("symbol-placement")!=="point",Lt=se.get("symbol-placement"),zt=Ge/2,It=se.get("icon-text-fit");let Ut;h&&It!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Ut=vw(h,s.vertical,It,se.get("icon-text-fit-padding"),fe,Ce)),ye&&(h=vw(h,ye,It,se.get("icon-text-fit-padding"),fe,Ce)));const kt=(Et,en)=>{en.x<0||en.x>=An||en.y<0||en.y>=An||function(Xt,Cn,rr,lr,Nr,po,Li,Or,ei,ci,Fi,ji,Ur,$r,wi,Di,bi,qi,Ki,Vr,Mn,Si,hi,Gr,es){const vs=Xt.addToLineVertexArray(Cn,rr);let _s,Na,ts,zo,Yi=0,Ua=0,Pd=0,Qw=0,Jy=-1,Qy=-1;const $a={};let eb=bn("");if(Xt.allowVerticalPlacement&&lr.vertical){const Ei=Or.layout.get("text-rotate").evaluate(Mn,{},Gr)+90;ts=new Mp(ei,Cn,ci,Fi,ji,lr.vertical,Ur,$r,wi,Ei),Li&&(zo=new Mp(ei,Cn,ci,Fi,ji,Li,bi,qi,wi,Ei))}if(Nr){const Ei=Or.layout.get("icon-rotate").evaluate(Mn,{}),Ro=Or.layout.get("icon-text-fit")!=="none",Ou=Gw(Nr,Ei,hi,Ro),ws=Li?Gw(Li,Ei,hi,Ro):void 0;Na=new Mp(ei,Cn,ci,Fi,ji,Nr,bi,qi,!1,Ei),Yi=4*Ou.length;const Lu=Xt.iconSizeData;let Qs=null;Lu.kind==="source"?(Qs=[Js*Or.layout.get("icon-size").evaluate(Mn,{})],Qs[0]>Ll&&_e(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${Td}. Reduce your "icon-size".`)):Lu.kind==="composite"&&(Qs=[Js*Si.compositeIconSizes[0].evaluate(Mn,{},Gr),Js*Si.compositeIconSizes[1].evaluate(Mn,{},Gr)],(Qs[0]>Ll||Qs[1]>Ll)&&_e(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${Td}. Reduce your "icon-size".`)),Xt.addSymbols(Xt.icon,Ou,Qs,Vr,Ki,Mn,d.ah.none,Cn,vs.lineStartIndex,vs.lineLength,-1,Gr),Jy=Xt.icon.placedSymbolArray.length-1,ws&&(Ua=4*ws.length,Xt.addSymbols(Xt.icon,ws,Qs,Vr,Ki,Mn,d.ah.vertical,Cn,vs.lineStartIndex,vs.lineLength,-1,Gr),Qy=Xt.icon.placedSymbolArray.length-1)}const tb=Object.keys(lr.horizontal);for(const Ei of tb){const Ro=lr.horizontal[Ei];if(!_s){eb=bn(Ro.text);const ws=Or.layout.get("text-rotate").evaluate(Mn,{},Gr);_s=new Mp(ei,Cn,ci,Fi,ji,Ro,Ur,$r,wi,ws)}const Ou=Ro.positionedLines.length===1;if(Pd+=Xw(Xt,Cn,Ro,po,Or,wi,Mn,Di,vs,lr.vertical?d.ah.horizontal:d.ah.horizontalOnly,Ou?tb:[Ei],$a,Jy,Si,Gr),Ou)break}lr.vertical&&(Qw+=Xw(Xt,Cn,lr.vertical,po,Or,wi,Mn,Di,vs,d.ah.vertical,["vertical"],$a,Qy,Si,Gr));const JP=_s?_s.boxStartIndex:Xt.collisionBoxArray.length,QP=_s?_s.boxEndIndex:Xt.collisionBoxArray.length,ek=ts?ts.boxStartIndex:Xt.collisionBoxArray.length,tk=ts?ts.boxEndIndex:Xt.collisionBoxArray.length,nk=Na?Na.boxStartIndex:Xt.collisionBoxArray.length,rk=Na?Na.boxEndIndex:Xt.collisionBoxArray.length,ik=zo?zo.boxStartIndex:Xt.collisionBoxArray.length,ok=zo?zo.boxEndIndex:Xt.collisionBoxArray.length;let xs=-1;const Rp=(Ei,Ro)=>Ei&&Ei.circleDiameter?Math.max(Ei.circleDiameter,Ro):Ro;xs=Rp(_s,xs),xs=Rp(ts,xs),xs=Rp(Na,xs),xs=Rp(zo,xs);const nb=xs>-1?1:0;nb&&(xs*=es/Br),Xt.glyphOffsetArray.length>=Dc.MAX_GLYPHS&&_e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Mn.sortKey!==void 0&&Xt.addToSortKeyRanges(Xt.symbolInstances.length,Mn.sortKey);const sk=Zw(Or,Mn,Gr),[ak,lk]=function(Ei,Ro){const Ou=Ei.length,ws=Ro==null?void 0:Ro.values;if((ws==null?void 0:ws.length)>0)for(let Lu=0;Lu<ws.length;Lu+=2){const Qs=ws[Lu+1];Ei.emplaceBack(d.ap[ws[Lu]],Qs[0],Qs[1])}return[Ou,Ei.length]}(Xt.textAnchorOffsets,sk);Xt.symbolInstances.emplaceBack(Cn.x,Cn.y,$a.right>=0?$a.right:-1,$a.center>=0?$a.center:-1,$a.left>=0?$a.left:-1,$a.vertical||-1,Jy,Qy,eb,JP,QP,ek,tk,nk,rk,ik,ok,ci,Pd,Qw,Yi,Ua,nb,0,Ur,xs,ak,lk)}(o,en,Et,s,h,g,Ut,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Re,[qe,qe,qe,qe],Ft,k,Je,mt,Ht,fe,n,_,O,Z,x)};if(Lt==="line")for(const Et of Dw(n.geometry,0,0,An,An)){const en=GP(Et,Ge,vt,s.vertical||ye,h,24,Ue,o.overscaling,An);for(const Xt of en)ye&&KP(o,ye.text,zt,Xt)||kt(Et,Xt)}else if(Lt==="line-center"){for(const Et of n.geometry)if(Et.length>1){const en=VP(Et,vt,s.vertical||ye,h,24,Ue);en&&kt(Et,en)}}else if(n.type==="Polygon")for(const Et of by(n.geometry,0)){const en=ZP(Et,16);kt(Et[0],new jl(en.x,en.y,0))}else if(n.type==="LineString")for(const Et of n.geometry)kt(Et,new jl(Et[0].x,Et[0].y,0));else if(n.type==="Point")for(const Et of n.geometry)for(const en of Et)kt([en],new jl(en.x,en.y,0))}function Xw(o,n,s,h,g,_,x,S,k,O,Z,Y,se,fe,ye){const Ce=function(Je,Ge,qe,mt,vt,Ft,Ht,Lt){const zt=mt.layout.get("text-rotate").evaluate(Ft,{})*Math.PI/180,It=[];for(const Ut of Ge.positionedLines)for(const kt of Ut.positionedGlyphs){if(!kt.rect)continue;const Et=kt.rect||{};let en=hw+1,Xt=!0,Cn=1,rr=0;const lr=(vt||Lt)&&kt.vertical,Nr=kt.metrics.advance*kt.scale/2;if(Lt&&Ge.verticalizable&&(rr=Ut.lineOffset/2-(kt.imageName?-(Br-kt.metrics.width*kt.scale)/2:(kt.scale-1)*Br)),kt.imageName){const Vr=Ht[kt.imageName];Xt=Vr.sdf,Cn=Vr.pixelRatio,en=Xi/Cn}const po=vt?[kt.x+Nr,kt.y]:[0,0];let Li=vt?[0,0]:[kt.x+Nr+qe[0],kt.y+qe[1]-rr],Or=[0,0];lr&&(Or=Li,Li=[0,0]);const ei=kt.metrics.isDoubleResolution?2:1,ci=(kt.metrics.left-en)*kt.scale-Nr+Li[0],Fi=(-kt.metrics.top-en)*kt.scale+Li[1],ji=ci+Et.w/ei*kt.scale/Cn,Ur=Fi+Et.h/ei*kt.scale/Cn,$r=new w(ci,Fi),wi=new w(ji,Fi),Di=new w(ci,Ur),bi=new w(ji,Ur);if(lr){const Vr=new w(-Nr,Nr-Sd),Mn=-Math.PI/2,Si=Br/2-Nr,hi=new w(5-Sd-Si,-(kt.imageName?Si:0)),Gr=new w(...Or);$r._rotateAround(Mn,Vr)._add(hi)._add(Gr),wi._rotateAround(Mn,Vr)._add(hi)._add(Gr),Di._rotateAround(Mn,Vr)._add(hi)._add(Gr),bi._rotateAround(Mn,Vr)._add(hi)._add(Gr)}if(zt){const Vr=Math.sin(zt),Mn=Math.cos(zt),Si=[Mn,-Vr,Vr,Mn];$r._matMult(Si),wi._matMult(Si),Di._matMult(Si),bi._matMult(Si)}const qi=new w(0,0),Ki=new w(0,0);It.push({tl:$r,tr:wi,bl:Di,br:bi,tex:Et,writingMode:Ge.writingMode,glyphOffset:po,sectionIndex:kt.sectionIndex,isSDF:Xt,pixelOffsetTL:qi,pixelOffsetBR:Ki,minFontScaleX:0,minFontScaleY:0})}return It}(0,s,S,g,_,x,h,o.allowVerticalPlacement),Re=o.textSizeData;let Ue=null;Re.kind==="source"?(Ue=[Js*g.layout.get("text-size").evaluate(x,{})],Ue[0]>Ll&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Td}. Reduce your "text-size".`)):Re.kind==="composite"&&(Ue=[Js*fe.compositeTextSizes[0].evaluate(x,{},ye),Js*fe.compositeTextSizes[1].evaluate(x,{},ye)],(Ue[0]>Ll||Ue[1]>Ll)&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Td}. Reduce your "text-size".`)),o.addSymbols(o.text,Ce,Ue,S,_,x,O,n,k.lineStartIndex,k.lineLength,se,ye);for(const Je of Z)Y[Je]=o.text.placedSymbolArray.length-1;return 4*Ce.length}function qw(o){for(const n in o)return o[n];return null}function KP(o,n,s,h){const g=o.compareText;if(n in g){const _=g[n];for(let x=_.length-1;x>=0;x--)if(h.dist(_[x])<s)return!0}else g[n]=[];return g[n].push(h),!1}const Kw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Hy{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=Kw[15&h];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new Hy(S,x,_,n)}constructor(n,s=64,h=Float64Array,g){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const _=Kw.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-S%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+k,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+k),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+k,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Wy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:S}=this,k=[0,_.length-1,0],O=[];for(;k.length;){const Z=k.pop()||0,Y=k.pop()||0,se=k.pop()||0;if(Y-se<=S){for(let Re=se;Re<=Y;Re++){const Ue=x[2*Re],Je=x[2*Re+1];Ue>=n&&Ue<=h&&Je>=s&&Je<=g&&O.push(_[Re])}continue}const fe=se+Y>>1,ye=x[2*fe],Ce=x[2*fe+1];ye>=n&&ye<=h&&Ce>=s&&Ce<=g&&O.push(_[fe]),(Z===0?n<=ye:s<=Ce)&&(k.push(se),k.push(fe-1),k.push(1-Z)),(Z===0?h>=ye:g>=Ce)&&(k.push(fe+1),k.push(Y),k.push(1-Z))}return O}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:x}=this,S=[0,g.length-1,0],k=[],O=h*h;for(;S.length;){const Z=S.pop()||0,Y=S.pop()||0,se=S.pop()||0;if(Y-se<=x){for(let Re=se;Re<=Y;Re++)Jw(_[2*Re],_[2*Re+1],n,s)<=O&&k.push(g[Re]);continue}const fe=se+Y>>1,ye=_[2*fe],Ce=_[2*fe+1];Jw(ye,Ce,n,s)<=O&&k.push(g[fe]),(Z===0?n-h<=ye:s-h<=Ce)&&(S.push(se),S.push(fe-1),S.push(1-Z)),(Z===0?n+h>=ye:s+h>=Ce)&&(S.push(fe+1),S.push(Y),S.push(1-Z))}return k}}function Wy(o,n,s,h,g,_){if(g-h<=s)return;const x=h+g>>1;Yw(o,n,x,h,g,_),Wy(o,n,s,h,x-1,1-_),Wy(o,n,s,x+1,g,1-_)}function Yw(o,n,s,h,g,_){for(;g>h;){if(g-h>600){const O=g-h+1,Z=s-h+1,Y=Math.log(O),se=.5*Math.exp(2*Y/3),fe=.5*Math.sqrt(Y*se*(O-se)/O)*(Z-O/2<0?-1:1);Yw(o,n,s,Math.max(h,Math.floor(s-Z*se/O+fe)),Math.min(g,Math.floor(s+(O-Z)*se/O+fe)),_)}const x=n[2*s+_];let S=h,k=g;for(Id(o,n,h,s),n[2*g+_]>x&&Id(o,n,h,g);S<k;){for(Id(o,n,S,k),S++,k--;n[2*S+_]<x;)S++;for(;n[2*k+_]>x;)k--}n[2*h+_]===x?Id(o,n,h,k):(k++,Id(o,n,k,g)),k<=s&&(h=k+1),s<=k&&(g=k-1)}}function Id(o,n,s,h){Zy(o,s,h),Zy(n,2*s,2*h),Zy(n,2*s+1,2*h+1)}function Zy(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function Jw(o,n,s,h){const g=o-s,_=n-h;return g*g+_*_}var Xy;d.bd=void 0,(Xy=d.bd||(d.bd={})).create="create",Xy.load="load",Xy.fullLoad="fullLoad";let zp=null,Ad=[];const qy=1e3/60,Ky="loadTime",Yy="fullLoadTime",YP={mark(o){performance.mark(o)},frame(o){const n=o;zp!=null&&Ad.push(n-zp),zp=n},clearMetrics(){zp=null,Ad=[],performance.clearMeasures(Ky),performance.clearMeasures(Yy);for(const o in d.bd)performance.clearMarks(d.bd[o])},getPerformanceMetrics(){performance.measure(Ky,d.bd.create,d.bd.load),performance.measure(Yy,d.bd.create,d.bd.fullLoad);const o=performance.getEntriesByName(Ky)[0].duration,n=performance.getEntriesByName(Yy)[0].duration,s=Ad.length,h=1/(Ad.reduce((_,x)=>_+x,0)/s/1e3),g=Ad.filter(_=>_>qy).reduce((_,x)=>_+(x-qy)/qy,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:g/(s+g)*100,totalFrames:s}}};d.$=bt,d.A=zc,d.B=function(o){if(J==null){const n=o.navigator?o.navigator.userAgent:null;J=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return J},d.C=class{constructor(o,n){this.target=o,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new UP(()=>this.process()),this.subscription=function(s,h,g,_){return s.addEventListener(h,g,!1),{unsubscribe:()=>{s.removeEventListener(h,g,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=le(self)?o:window}registerMessageHandler(o,n){this.messageHandlers[o]=n}sendAsync(o,n){return new Promise((s,h)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[g]={resolve:s,reject:h},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[g];const S={id:g,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const _=[],x=Object.assign(Object.assign({},o),{id:g,sourceMapId:this.mapId,origin:location.origin,data:ka(o.data,_)});this.target.postMessage(x,{transfer:_})})}receive(o){const n=o.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(le(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){return u(this,void 0,void 0,function*(){if(n.type==="<response>"){const g=this.resolveRejects[o];return delete this.resolveRejects[o],g?void(n.error?g.reject(Al(n.error)):g.resolve(Al(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=Al(n.data),h=new AbortController;this.abortControllers[o]=h;try{const g=yield this.messageHandlers[n.type](n.sourceMapId,s,h);this.completeTask(o,null,g)}catch(g){this.completeTask(o,g)}})}completeTask(o,n,s){const h=[];delete this.abortControllers[o];const g={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?ka(n):null,data:ka(s,h)};this.target.postMessage(g,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.D=qt,d.E=En,d.F=function(){var o=new zc(16);return zc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},d.G=nt,d.H=function(o,n,s){var h,g,_,x,S,k,O,Z,Y,se,fe,ye,Ce=s[0],Re=s[1],Ue=s[2];return n===o?(o[12]=n[0]*Ce+n[4]*Re+n[8]*Ue+n[12],o[13]=n[1]*Ce+n[5]*Re+n[9]*Ue+n[13],o[14]=n[2]*Ce+n[6]*Re+n[10]*Ue+n[14],o[15]=n[3]*Ce+n[7]*Re+n[11]*Ue+n[15]):(g=n[1],_=n[2],x=n[3],S=n[4],k=n[5],O=n[6],Z=n[7],Y=n[8],se=n[9],fe=n[10],ye=n[11],o[0]=h=n[0],o[1]=g,o[2]=_,o[3]=x,o[4]=S,o[5]=k,o[6]=O,o[7]=Z,o[8]=Y,o[9]=se,o[10]=fe,o[11]=ye,o[12]=h*Ce+S*Re+Y*Ue+n[12],o[13]=g*Ce+k*Re+se*Ue+n[13],o[14]=_*Ce+O*Re+fe*Ue+n[14],o[15]=x*Ce+Z*Re+ye*Ue+n[15]),o},d.I=zy,d.J=function(o,n,s){var h=s[0],g=s[1],_=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*g,o[5]=n[5]*g,o[6]=n[6]*g,o[7]=n[7]*g,o[8]=n[8]*_,o[9]=n[9]*_,o[10]=n[10]*_,o[11]=n[11]*_,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},d.K=zx,d.L=function(o,n){const s={};for(let h=0;h<n.length;h++){const g=n[h];g in o&&(s[g]=o[g])}return s},d.M=Fl,d.N=Iw,d.O=Aw,d.P=w,d.Q=Mo,d.R=ko,d.S=K,d.T=Yh,d.U=W,d.V=be,d.W=An,d.X=Er,d.Y=Ip,d.Z=class extends Ks{},d._=u,d.a=We,d.a$=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},d.a0=$y,d.a1=z,d.a2=o=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(s=>{n.onloadstart=()=>{s(n)};for(const h of o){const g=window.document.createElement("source");gt(h)||(n.crossOrigin="Anonymous"),g.src=h,n.appendChild(g)}})},d.a3=function(){return j++},d.a4=up,d.a5=Dc,d.a6=ho,d.a7=ja,d.a8=tr,d.a9=Ow,d.aA=q,d.aB=function(o,n){if(!o)return[{command:"setStyle",args:[n]}];let s=[];try{if(!we(o.version,n.version))return[{command:"setStyle",args:[n]}];we(o.center,n.center)||s.push({command:"setCenter",args:[n.center]}),we(o.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),we(o.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),we(o.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),we(o.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),we(o.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),we(o.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),we(o.light,n.light)||s.push({command:"setLight",args:[n.light]}),we(o.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),we(o.sky,n.sky)||s.push({command:"setSky",args:[n.sky]});const h={},g=[];(function(x,S,k,O){let Z;for(Z in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,Z)&&(Object.prototype.hasOwnProperty.call(S,Z)||xe(Z,k,O));for(Z in S)Object.prototype.hasOwnProperty.call(S,Z)&&(Object.prototype.hasOwnProperty.call(x,Z)?we(x[Z],S[Z])||(x[Z].type==="geojson"&&S[Z].type==="geojson"&&Qe(x,S,Z)?N(k,{command:"setGeoJSONSourceData",args:[Z,S[Z].data]}):Ze(Z,S,k,O)):D(Z,S,k))})(o.sources,n.sources,g,h);const _=[];o.layers&&o.layers.forEach(x=>{"source"in x&&h[x.source]?s.push({command:"removeLayer",args:[x.id]}):_.push(x)}),s=s.concat(g),function(x,S,k){S=S||[];const O=(x=x||[]).map(ae),Z=S.map(ae),Y=x.reduce(R,{}),se=S.reduce(R,{}),fe=O.slice(),ye=Object.create(null);let Ce,Re,Ue,Je,Ge;for(let qe=0,mt=0;qe<O.length;qe++)Ce=O[qe],Object.prototype.hasOwnProperty.call(se,Ce)?mt++:(N(k,{command:"removeLayer",args:[Ce]}),fe.splice(fe.indexOf(Ce,mt),1));for(let qe=0,mt=0;qe<Z.length;qe++)Ce=Z[Z.length-1-qe],fe[fe.length-1-qe]!==Ce&&(Object.prototype.hasOwnProperty.call(Y,Ce)?(N(k,{command:"removeLayer",args:[Ce]}),fe.splice(fe.lastIndexOf(Ce,fe.length-mt),1)):mt++,Je=fe[fe.length-qe],N(k,{command:"addLayer",args:[se[Ce],Je]}),fe.splice(fe.length-qe,0,Ce),ye[Ce]=!0);for(let qe=0;qe<Z.length;qe++)if(Ce=Z[qe],Re=Y[Ce],Ue=se[Ce],!ye[Ce]&&!we(Re,Ue))if(we(Re.source,Ue.source)&&we(Re["source-layer"],Ue["source-layer"])&&we(Re.type,Ue.type)){for(Ge in ct(Re.layout,Ue.layout,k,Ce,null,"setLayoutProperty"),ct(Re.paint,Ue.paint,k,Ce,null,"setPaintProperty"),we(Re.filter,Ue.filter)||N(k,{command:"setFilter",args:[Ce,Ue.filter]}),we(Re.minzoom,Ue.minzoom)&&we(Re.maxzoom,Ue.maxzoom)||N(k,{command:"setLayerZoomRange",args:[Ce,Ue.minzoom,Ue.maxzoom]}),Re)Object.prototype.hasOwnProperty.call(Re,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?ct(Re[Ge],Ue[Ge],k,Ce,Ge.slice(6),"setPaintProperty"):we(Re[Ge],Ue[Ge])||N(k,{command:"setLayerProperty",args:[Ce,Ge,Ue[Ge]]}));for(Ge in Ue)Object.prototype.hasOwnProperty.call(Ue,Ge)&&!Object.prototype.hasOwnProperty.call(Re,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?ct(Re[Ge],Ue[Ge],k,Ce,Ge.slice(6),"setPaintProperty"):we(Re[Ge],Ue[Ge])||N(k,{command:"setLayerProperty",args:[Ce,Ge,Ue[Ge]]}))}else N(k,{command:"removeLayer",args:[Ce]}),Je=fe[fe.lastIndexOf(Ce)+1],N(k,{command:"addLayer",args:[Ue,Je]})}(_,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[n]}]}return s},d.aC=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},d.aD=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},d.aE=B,d.aF=ee,d.aG=class extends Qn{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},d.aH=li,d.aI=class extends Qn{constructor(o,n){super(o,n),this.current=Oa}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},d.aJ=Ao,d.aK=class extends Qn{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},d.aL=class extends Qn{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},d.aM=Jo,d.aN=function(o,n,s,h,g,_,x){var S=1/(n-s),k=1/(h-g),O=1/(_-x);return o[0]=-2*S,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*k,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*O,o[11]=0,o[12]=(n+s)*S,o[13]=(g+h)*k,o[14]=(x+_)*O,o[15]=1,o},d.aO=$n,d.aP=wA,d.aQ=class extends ku{},d.aR=mP,d.aS=class extends kl{},d.aT=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},d.aU=jx,d.aV=Q,d.aW=class extends ad{},d.aX=ot,d.aY=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]&&o[3]===n[3]&&o[4]===n[4]&&o[5]===n[5]&&o[6]===n[6]&&o[7]===n[7]&&o[8]===n[8]&&o[9]===n[9]&&o[10]===n[10]&&o[11]===n[11]&&o[12]===n[12]&&o[13]===n[13]&&o[14]===n[14]&&o[15]===n[15]},d.aZ=function(o,n){var s=o[0],h=o[1],g=o[2],_=o[3],x=o[4],S=o[5],k=o[6],O=o[7],Z=o[8],Y=o[9],se=o[10],fe=o[11],ye=o[12],Ce=o[13],Re=o[14],Ue=o[15],Je=n[0],Ge=n[1],qe=n[2],mt=n[3],vt=n[4],Ft=n[5],Ht=n[6],Lt=n[7],zt=n[8],It=n[9],Ut=n[10],kt=n[11],Et=n[12],en=n[13],Xt=n[14],Cn=n[15];return Math.abs(s-Je)<=Oi*Math.max(1,Math.abs(s),Math.abs(Je))&&Math.abs(h-Ge)<=Oi*Math.max(1,Math.abs(h),Math.abs(Ge))&&Math.abs(g-qe)<=Oi*Math.max(1,Math.abs(g),Math.abs(qe))&&Math.abs(_-mt)<=Oi*Math.max(1,Math.abs(_),Math.abs(mt))&&Math.abs(x-vt)<=Oi*Math.max(1,Math.abs(x),Math.abs(vt))&&Math.abs(S-Ft)<=Oi*Math.max(1,Math.abs(S),Math.abs(Ft))&&Math.abs(k-Ht)<=Oi*Math.max(1,Math.abs(k),Math.abs(Ht))&&Math.abs(O-Lt)<=Oi*Math.max(1,Math.abs(O),Math.abs(Lt))&&Math.abs(Z-zt)<=Oi*Math.max(1,Math.abs(Z),Math.abs(zt))&&Math.abs(Y-It)<=Oi*Math.max(1,Math.abs(Y),Math.abs(It))&&Math.abs(se-Ut)<=Oi*Math.max(1,Math.abs(se),Math.abs(Ut))&&Math.abs(fe-kt)<=Oi*Math.max(1,Math.abs(fe),Math.abs(kt))&&Math.abs(ye-Et)<=Oi*Math.max(1,Math.abs(ye),Math.abs(Et))&&Math.abs(Ce-en)<=Oi*Math.max(1,Math.abs(Ce),Math.abs(en))&&Math.abs(Re-Xt)<=Oi*Math.max(1,Math.abs(Re),Math.abs(Xt))&&Math.abs(Ue-Cn)<=Oi*Math.max(1,Math.abs(Ue),Math.abs(Cn))},d.a_=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},d.aa=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,g,_)=>{const x=g||_;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},d.ab=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},d.ac=X,d.ad=function(o,n,s){var h=Math.sin(s),g=Math.cos(s),_=n[0],x=n[1],S=n[2],k=n[3],O=n[4],Z=n[5],Y=n[6],se=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=_*g+O*h,o[1]=x*g+Z*h,o[2]=S*g+Y*h,o[3]=k*g+se*h,o[4]=O*g-_*h,o[5]=Z*g-x*h,o[6]=Y*g-S*h,o[7]=se*g-k*h,o},d.ae=function(o){var n=new zc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},d.af=gp,d.ag=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:x}=o,S=g?X(Qr.interpolationFactor(g,n,_,x),0,1):0;o.kind==="camera"?h=oi.number(o.minSize,o.maxSize,S):s=S}return{uSizeT:s,uSize:h}},d.ai=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:g}){return o.kind==="source"?h/Js:o.kind==="composite"?oi.number(h/Js,g/Js,s):n},d.aj=Fy,d.ak=function(o,n,s,h){const g=n.y-o.y,_=n.x-o.x,x=h.y-s.y,S=h.x-s.x,k=x*_-S*g;if(k===0)return null;const O=(S*(o.y-s.y)-x*(o.x-s.x))/k;return new w(o.x+O*_,o.y+O*g)},d.al=Dw,d.am=Da,d.an=my,d.ao=Br,d.aq=Ly,d.ar=function(o,n){var s=n[0],h=n[1],g=n[2],_=n[3],x=n[4],S=n[5],k=n[6],O=n[7],Z=n[8],Y=n[9],se=n[10],fe=n[11],ye=n[12],Ce=n[13],Re=n[14],Ue=n[15],Je=s*S-h*x,Ge=s*k-g*x,qe=s*O-_*x,mt=h*k-g*S,vt=h*O-_*S,Ft=g*O-_*k,Ht=Z*Ce-Y*ye,Lt=Z*Re-se*ye,zt=Z*Ue-fe*ye,It=Y*Re-se*Ce,Ut=Y*Ue-fe*Ce,kt=se*Ue-fe*Re,Et=Je*kt-Ge*Ut+qe*It+mt*zt-vt*Lt+Ft*Ht;return Et?(o[0]=(S*kt-k*Ut+O*It)*(Et=1/Et),o[1]=(g*Ut-h*kt-_*It)*Et,o[2]=(Ce*Ft-Re*vt+Ue*mt)*Et,o[3]=(se*vt-Y*Ft-fe*mt)*Et,o[4]=(k*zt-x*kt-O*Lt)*Et,o[5]=(s*kt-g*zt+_*Lt)*Et,o[6]=(Re*qe-ye*Ft-Ue*Ge)*Et,o[7]=(Z*Ft-se*qe+fe*Ge)*Et,o[8]=(x*Ut-S*zt+O*Ht)*Et,o[9]=(h*zt-s*Ut-_*Ht)*Et,o[10]=(ye*vt-Ce*qe+Ue*Je)*Et,o[11]=(Y*qe-Z*vt-fe*Je)*Et,o[12]=(S*Lt-x*It-k*Ht)*Et,o[13]=(s*It-h*Lt+g*Ht)*Et,o[14]=(Ce*Ge-ye*mt-Re*Je)*Et,o[15]=(Z*mt-Y*Ge+se*Je)*Et,o):null},d.as=Gy,d.at=Oy,d.au=Hy,d.av=function(){const o={},n=et.$version;for(const s in et.$root){const h=et.$root[s];if(h.required){let g=null;g=s==="version"?n:h.type==="array"?[]:{},g!=null&&(o[s]=g)}}return o},d.aw=Zh,d.ax=wt,d.ay=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=Sn(o[s],n[o[s].ref]));return o},d.az=function(o){if(o.type==="custom")return new NP(o);switch(o.type){case"background":return new jP(o);case"circle":return new bA(o);case"fill":return new $A(o);case"fill-extrusion":return new rP(o);case"heatmap":return new EA(o);case"hillshade":return new CA(o);case"line":return new hP(o);case"raster":return new BP(o);case"symbol":return new Cp(o)}},d.b=te,d.b0=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},d.b1=V,d.b2=Mw,d.b3=Pw,d.b4=function(o,n,s,h,g){var _,x=1/Math.tan(n/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,g!=null&&g!==1/0?(o[10]=(g+h)*(_=1/(h-g)),o[14]=2*g*h*_):(o[10]=-1,o[14]=-2*h),o},d.b5=function(o,n,s){var h=Math.sin(s),g=Math.cos(s),_=n[4],x=n[5],S=n[6],k=n[7],O=n[8],Z=n[9],Y=n[10],se=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=_*g+O*h,o[5]=x*g+Z*h,o[6]=S*g+Y*h,o[7]=k*g+se*h,o[8]=O*g-_*h,o[9]=Z*g-x*h,o[10]=Y*g-S*h,o[11]=se*g-k*h,o},d.b6=$,d.b7=ie,d.b8=function(o){return o*Math.PI/180},d.b9=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},d.bA=Ma,d.ba=class extends Tc{},d.bb=Ny,d.bc=YP,d.be=dt,d.bf=function(o,n){We.REGISTERED_PROTOCOLS[o]=n},d.bg=function(o){delete We.REGISTERED_PROTOCOLS[o]},d.bh=function(o,n){const s={};for(let g=0;g<o.length;g++){const _=n&&n[o[g].id]||Tl(o[g]);n&&(n[o[g].id]=_);let x=s[_];x||(x=s[_]=[]),x.push(o[g])}const h=[];for(const g in s)h.push(s[g]);return h},d.bi=Nt,d.bj=Rw,d.bk=Lw,d.bl=fw,d.bm=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=An/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new tr(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new tr(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new tr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:O,maxZoom:Z}=o.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new tr(O),o.canonical),h["text-size"].possiblyEvaluate(new tr(Z),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:O,maxZoom:Z}=o.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new tr(O),o.canonical),h["icon-size"].possiblyEvaluate(new tr(Z),o.canonical)]}const _=s.get("text-line-height")*Br,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),k=s.get("text-size");for(const O of o.bucket.features){const Z=s.get("text-font").evaluate(O,{},o.canonical).join(","),Y=k.evaluate(O,{},o.canonical),se=g.layoutTextSize.evaluate(O,{},o.canonical),fe=g.layoutIconSize.evaluate(O,{},o.canonical),ye={horizontal:{},vertical:void 0},Ce=O.text;let Re,Ue=[0,0];if(Ce){const qe=Ce.toString(),mt=s.get("text-letter-spacing").evaluate(O,{},o.canonical)*Br,vt=wc(qe)?mt:0,Ft=s.get("text-anchor").evaluate(O,{},o.canonical),Ht=Zw(n,O,o.canonical);if(!Ht){const kt=s.get("text-radial-offset").evaluate(O,{},o.canonical);Ue=kt?Ww(Ft,[kt*Br,Vy]):s.get("text-offset").evaluate(O,{},o.canonical).map(Et=>Et*Br)}let Lt=x?"center":s.get("text-justify").evaluate(O,{},o.canonical);const zt=s.get("symbol-placement"),It=zt==="point"?s.get("text-max-width").evaluate(O,{},o.canonical)*Br:0,Ut=()=>{o.bucket.allowVerticalPlacement&&Tu(qe)&&(ye.vertical=Sp(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,Z,It,_,Ft,"left",vt,Ue,d.ah.vertical,!0,zt,se,Y))};if(!x&&Ht){const kt=new Set;if(Lt==="auto")for(let en=0;en<Ht.values.length;en+=2)kt.add(Gy(Ht.values[en]));else kt.add(Lt);let Et=!1;for(const en of kt)if(!ye.horizontal[en])if(Et)ye.horizontal[en]=ye.horizontal[0];else{const Xt=Sp(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,Z,It,_,"center",en,vt,Ue,d.ah.horizontal,!1,zt,se,Y);Xt&&(ye.horizontal[en]=Xt,Et=Xt.positionedLines.length===1)}Ut()}else{Lt==="auto"&&(Lt=Gy(Ft));const kt=Sp(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,Z,It,_,Ft,Lt,vt,Ue,d.ah.horizontal,!1,zt,se,Y);kt&&(ye.horizontal[Lt]=kt),Ut(),Tu(qe)&&x&&S&&(ye.vertical=Sp(Ce,o.glyphMap,o.glyphPositions,o.imagePositions,Z,It,_,Ft,Lt,vt,Ue,d.ah.vertical,!1,zt,se,Y))}}let Je=!1;if(O.icon&&O.icon.name){const qe=o.imageMap[O.icon.name];qe&&(Re=zP(o.imagePositions[O.icon.name],s.get("icon-offset").evaluate(O,{},o.canonical),s.get("icon-anchor").evaluate(O,{},o.canonical)),Je=!!qe.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Je:o.bucket.sdfIcons!==Je&&_e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(qe.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Ge=qw(ye.horizontal)||ye.vertical;o.bucket.iconsInText=!!Ge&&Ge.iconsInText,(Ge||Re)&&qP(o.bucket,O,ye,Re,o.imageMap,g,se,fe,Ue,Je,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},d.bn=Ay,d.bo=Ty,d.bp=Iy,d.bq=Rl,d.br=ky,d.bs=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},d.bt=function(o,n,s,h,g){return u(this,void 0,void 0,function*(){if(W())try{return yield be(o,n,s,h,g)}catch{}return function(_,x,S,k,O){const Z=_.width,Y=_.height;Ee&&Be||(Ee=new OffscreenCanvas(Z,Y),Be=Ee.getContext("2d",{willReadFrequently:!0})),Ee.width=Z,Ee.height=Y,Be.drawImage(_,0,0,Z,Y);const se=Be.getImageData(x,S,k,O);return Be.clearRect(0,0,Z,Y),se.data}(o,n,s,h,g)})},d.bu=zw,d.bv=b,d.bw=C,d.bx=iw,d.by=jn,d.bz=function(o){return o.message===Pe},d.c=ze,d.d=o=>u(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.e=E,d.f=o=>new Promise((n,s)=>{const h=new Image;h.onload=()=>{n(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=he})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(g):he}),d.g=He,d.h=(o,n)=>Mt(E(o,{type:"json"}),n),d.i=le,d.j=Zt,d.k=Vt,d.l=(o,n)=>Mt(E(o,{type:"arrayBuffer"}),n),d.m=Mt,d.n=function(o){return new ky(o).readFields(CP,[])},d.o=md,d.p=dw,d.q=zi,d.r=To,d.s=gt,d.t=Pa,d.u=jt,d.v=et,d.w=_e,d.x=ai,d.y=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},d.z=oi}),c("worker",["./shared"],function(d){class u{constructor(re){this.keyCache={},re&&this.replace(re)}replace(re){this._layerConfigs={},this._layers={},this.update(re,[])}update(re,ue){for(const Ie of re){this._layerConfigs[Ie.id]=Ie;const Ne=this._layers[Ie.id]=d.az(Ie);Ne._featureFilter=d.a6(Ne.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(const Ie of ue)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const me=d.bh(Object.values(this._layerConfigs),this.keyCache);for(const Ie of me){const Ne=Ie.map(ut=>this._layers[ut.id]),Oe=Ne[0];if(Oe.visibility==="none")continue;const $e=Oe.source||"";let Fe=this.familiesBySource[$e];Fe||(Fe=this.familiesBySource[$e]={});const Ye=Oe.sourceLayer||"_geojsonTileLayer";let ft=Fe[Ye];ft||(ft=Fe[Ye]=[]),ft.push(Ne)}}}class b{constructor(re){const ue={},me=[];for(const $e in re){const Fe=re[$e],Ye=ue[$e]={};for(const ft in Fe){const ut=Fe[+ft];if(!ut||ut.bitmap.width===0||ut.bitmap.height===0)continue;const pt={x:0,y:0,w:ut.bitmap.width+2,h:ut.bitmap.height+2};me.push(pt),Ye[ft]={rect:pt,metrics:ut.metrics}}}const{w:Ie,h:Ne}=d.p(me),Oe=new d.o({width:Ie||1,height:Ne||1});for(const $e in re){const Fe=re[$e];for(const Ye in Fe){const ft=Fe[+Ye];if(!ft||ft.bitmap.width===0||ft.bitmap.height===0)continue;const ut=ue[$e][Ye].rect;d.o.copy(ft.bitmap,Oe,{x:0,y:0},{x:ut.x+1,y:ut.y+1},ft.bitmap)}}this.image=Oe,this.positions=ue}}d.bi("GlyphAtlas",b);class C{constructor(re){this.tileID=new d.Q(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.uid=re.uid,this.zoom=re.zoom,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=re.showCollisionBoxes,this.collectResourceTiming=!!re.collectResourceTiming,this.returnDependencies=!!re.returnDependencies,this.promoteId=re.promoteId,this.inFlightDependencies=[]}parse(re,ue,me,Ie){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=re,this.collisionBoxArray=new d.a4;const Ne=new d.bj(Object.keys(re.layers).sort()),Oe=new d.bk(this.tileID,this.promoteId);Oe.bucketLayerIDs=[];const $e={},Fe={featureIndex:Oe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:me},Ye=ue.familiesBySource[this.source];for(const dn in Ye){const or=re.layers[dn];if(!or)continue;or.version===1&&d.w(`Vector tile source "${this.source}" layer "${dn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Mr=Ne.encode(dn),ii=[];for(let Wr=0;Wr<or.length;Wr++){const Yr=or.feature(Wr),yi=Oe.getId(Yr,dn);ii.push({feature:Yr,id:yi,index:Wr,sourceLayerIndex:Mr})}for(const Wr of Ye[dn]){const Yr=Wr[0];Yr.source!==this.source&&d.w(`layer.source = ${Yr.source} does not equal this.source = ${this.source}`),Yr.minzoom&&this.zoom<Math.floor(Yr.minzoom)||Yr.maxzoom&&this.zoom>=Yr.maxzoom||Yr.visibility!=="none"&&(A(Wr,this.zoom,me),($e[Yr.id]=Yr.createBucket({index:Oe.bucketLayerIDs.length,layers:Wr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Mr,sourceID:this.source})).populate(ii,Fe,this.tileID.canonical),Oe.bucketLayerIDs.push(Wr.map(yi=>yi.id)))}}const ft=d.aE(Fe.glyphDependencies,dn=>Object.keys(dn).map(Number));this.inFlightDependencies.forEach(dn=>dn==null?void 0:dn.abort()),this.inFlightDependencies=[];let ut=Promise.resolve({});if(Object.keys(ft).length){const dn=new AbortController;this.inFlightDependencies.push(dn),ut=Ie.sendAsync({type:"getGlyphs",data:{stacks:ft,source:this.source,tileID:this.tileID,type:"glyphs"}},dn)}const pt=Object.keys(Fe.iconDependencies);let Gt=Promise.resolve({});if(pt.length){const dn=new AbortController;this.inFlightDependencies.push(dn),Gt=Ie.sendAsync({type:"getImages",data:{icons:pt,source:this.source,tileID:this.tileID,type:"icons"}},dn)}const ln=Object.keys(Fe.patternDependencies);let tn=Promise.resolve({});if(ln.length){const dn=new AbortController;this.inFlightDependencies.push(dn),tn=Ie.sendAsync({type:"getImages",data:{icons:ln,source:this.source,tileID:this.tileID,type:"patterns"}},dn)}const[Tn,cn,Zn]=yield Promise.all([ut,Gt,tn]),Gn=new b(Tn),ir=new d.bl(cn,Zn);for(const dn in $e){const or=$e[dn];or instanceof d.a5?(A(or.layers,this.zoom,me),d.bm({bucket:or,glyphMap:Tn,glyphPositions:Gn.positions,imageMap:cn,imagePositions:ir.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):or.hasPattern&&(or instanceof d.bn||or instanceof d.bo||or instanceof d.bp)&&(A(or.layers,this.zoom,me),or.addFeatures(Fe,this.tileID.canonical,ir.patternPositions))}return this.status="done",{buckets:Object.values($e).filter(dn=>!dn.isEmpty()),featureIndex:Oe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Gn.image,imageAtlas:ir,glyphMap:this.returnDependencies?Tn:null,iconMap:this.returnDependencies?cn:null,glyphPositions:this.returnDependencies?Gn.positions:null}})}}function A(Ae,re,ue){const me=new d.a8(re);for(const Ie of Ae)Ie.recalculate(me,ue)}class w{constructor(re,ue,me){this.actor=re,this.layerIndex=ue,this.availableImages=me,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(re,ue){return d._(this,void 0,void 0,function*(){const me=yield d.l(re.request,ue);try{return{vectorTile:new d.bq.VectorTile(new d.br(me.data)),rawData:me.data,cacheControl:me.cacheControl,expires:me.expires}}catch(Ie){const Ne=new Uint8Array(me.data);let Oe=`Unable to parse the tile at ${re.request.url}, `;throw Oe+=Ne[0]===31&&Ne[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ie.messge}`,new Error(Oe)}})}loadTile(re){return d._(this,void 0,void 0,function*(){const ue=re.uid,me=!!(re&&re.request&&re.request.collectResourceTiming)&&new d.bs(re.request),Ie=new C(re);this.loading[ue]=Ie;const Ne=new AbortController;Ie.abort=Ne;try{const Oe=yield this.loadVectorTile(re,Ne);if(delete this.loading[ue],!Oe)return null;const $e=Oe.rawData,Fe={};Oe.expires&&(Fe.expires=Oe.expires),Oe.cacheControl&&(Fe.cacheControl=Oe.cacheControl);const Ye={};if(me){const ut=me.finish();ut&&(Ye.resourceTiming=JSON.parse(JSON.stringify(ut)))}Ie.vectorTile=Oe.vectorTile;const ft=Ie.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ue]=Ie,this.fetching[ue]={rawTileData:$e,cacheControl:Fe,resourceTiming:Ye};try{const ut=yield ft;return d.e({rawTileData:$e.slice(0)},ut,Fe,Ye)}finally{delete this.fetching[ue]}}catch(Oe){throw delete this.loading[ue],Ie.status="done",this.loaded[ue]=Ie,Oe}})}reloadTile(re){return d._(this,void 0,void 0,function*(){const ue=re.uid;if(!this.loaded||!this.loaded[ue])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const me=this.loaded[ue];if(me.showCollisionBoxes=re.showCollisionBoxes,me.status==="parsing"){const Ie=yield me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor);let Ne;if(this.fetching[ue]){const{rawTileData:Oe,cacheControl:$e,resourceTiming:Fe}=this.fetching[ue];delete this.fetching[ue],Ne=d.e({rawTileData:Oe.slice(0)},Ie,$e,Fe)}else Ne=Ie;return Ne}if(me.status==="done"&&me.vectorTile)return me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(re){return d._(this,void 0,void 0,function*(){const ue=this.loading,me=re.uid;ue&&ue[me]&&ue[me].abort&&(ue[me].abort.abort(),delete ue[me])})}removeTile(re){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[re.uid]&&delete this.loaded[re.uid]})}}class T{constructor(){this.loaded={}}loadTile(re){return d._(this,void 0,void 0,function*(){const{uid:ue,encoding:me,rawImageData:Ie,redFactor:Ne,greenFactor:Oe,blueFactor:$e,baseShift:Fe}=re,Ye=Ie.width+2,ft=Ie.height+2,ut=d.b(Ie)?new d.R({width:Ye,height:ft},yield d.bt(Ie,-1,-1,Ye,ft)):Ie,pt=new d.bu(ue,ut,me,Ne,Oe,$e,Fe);return this.loaded=this.loaded||{},this.loaded[ue]=pt,pt})}removeTile(re){const ue=this.loaded,me=re.uid;ue&&ue[me]&&delete ue[me]}}function L(Ae,re){if(Ae.length!==0){U(Ae[0],re);for(var ue=1;ue<Ae.length;ue++)U(Ae[ue],!re)}}function U(Ae,re){for(var ue=0,me=0,Ie=0,Ne=Ae.length,Oe=Ne-1;Ie<Ne;Oe=Ie++){var $e=(Ae[Ie][0]-Ae[Oe][0])*(Ae[Oe][1]+Ae[Ie][1]),Fe=ue+$e;me+=Math.abs(ue)>=Math.abs($e)?ue-Fe+$e:$e-Fe+ue,ue=Fe}ue+me>=0!=!!re&&Ae.reverse()}var F=d.bv(function Ae(re,ue){var me,Ie=re&&re.type;if(Ie==="FeatureCollection")for(me=0;me<re.features.length;me++)Ae(re.features[me],ue);else if(Ie==="GeometryCollection")for(me=0;me<re.geometries.length;me++)Ae(re.geometries[me],ue);else if(Ie==="Feature")Ae(re.geometry,ue);else if(Ie==="Polygon")L(re.coordinates,ue);else if(Ie==="MultiPolygon")for(me=0;me<re.coordinates.length;me++)L(re.coordinates[me],ue);return re});const ce=d.bq.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},W=d.bw,$=d.bq.VectorTileFeature,ie=X;function X(Ae,re){this.options=re||{},this.features=Ae,this.length=Ae.length}function V(Ae,re){this.id=typeof Ae.id=="number"?Ae.id:void 0,this.type=Ae.type,this.rawGeometry=Ae.type===1?[Ae.geometry]:Ae.geometry,this.properties=Ae.tags,this.extent=re||4096}X.prototype.feature=function(Ae){return new V(this.features[Ae],this.options.extent)},V.prototype.loadGeometry=function(){var Ae=this.rawGeometry;this.geometry=[];for(var re=0;re<Ae.length;re++){for(var ue=Ae[re],me=[],Ie=0;Ie<ue.length;Ie++)me.push(new W(ue[Ie][0],ue[Ie][1]));this.geometry.push(me)}return this.geometry},V.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ae=this.geometry,re=1/0,ue=-1/0,me=1/0,Ie=-1/0,Ne=0;Ne<Ae.length;Ne++)for(var Oe=Ae[Ne],$e=0;$e<Oe.length;$e++){var Fe=Oe[$e];re=Math.min(re,Fe.x),ue=Math.max(ue,Fe.x),me=Math.min(me,Fe.y),Ie=Math.max(Ie,Fe.y)}return[re,me,ue,Ie]},V.prototype.toGeoJSON=$.prototype.toGeoJSON;var E=d.bx,j=ie;function B(Ae){var re=new E;return function(ue,me){for(var Ie in ue.layers)me.writeMessage(3,ee,ue.layers[Ie])}(Ae,re),re.finish()}function ee(Ae,re){var ue;re.writeVarintField(15,Ae.version||1),re.writeStringField(1,Ae.name||""),re.writeVarintField(5,Ae.extent||4096);var me={keys:[],values:[],keycache:{},valuecache:{}};for(ue=0;ue<Ae.length;ue++)me.feature=Ae.feature(ue),re.writeMessage(2,q,me);var Ie=me.keys;for(ue=0;ue<Ie.length;ue++)re.writeStringField(3,Ie[ue]);var Ne=me.values;for(ue=0;ue<Ne.length;ue++)re.writeMessage(4,le,Ne[ue])}function q(Ae,re){var ue=Ae.feature;ue.id!==void 0&&re.writeVarintField(1,ue.id),re.writeMessage(2,pe,Ae),re.writeVarintField(3,ue.type),re.writeMessage(4,oe,ue)}function pe(Ae,re){var ue=Ae.feature,me=Ae.keys,Ie=Ae.values,Ne=Ae.keycache,Oe=Ae.valuecache;for(var $e in ue.properties){var Fe=ue.properties[$e],Ye=Ne[$e];if(Fe!==null){Ye===void 0&&(me.push($e),Ne[$e]=Ye=me.length-1),re.writeVarint(Ye);var ft=typeof Fe;ft!=="string"&&ft!=="boolean"&&ft!=="number"&&(Fe=JSON.stringify(Fe));var ut=ft+":"+Fe,pt=Oe[ut];pt===void 0&&(Ie.push(Fe),Oe[ut]=pt=Ie.length-1),re.writeVarint(pt)}}}function _e(Ae,re){return(re<<3)+(7&Ae)}function de(Ae){return Ae<<1^Ae>>31}function oe(Ae,re){for(var ue=Ae.loadGeometry(),me=Ae.type,Ie=0,Ne=0,Oe=ue.length,$e=0;$e<Oe;$e++){var Fe=ue[$e],Ye=1;me===1&&(Ye=Fe.length),re.writeVarint(_e(1,Ye));for(var ft=me===3?Fe.length-1:Fe.length,ut=0;ut<ft;ut++){ut===1&&me!==1&&re.writeVarint(_e(2,ft-1));var pt=Fe[ut].x-Ie,Gt=Fe[ut].y-Ne;re.writeVarint(de(pt)),re.writeVarint(de(Gt)),Ie+=pt,Ne+=Gt}me===3&&re.writeVarint(_e(7,1))}}function le(Ae,re){var ue=typeof Ae;ue==="string"?re.writeStringField(1,Ae):ue==="boolean"?re.writeBooleanField(7,Ae):ue==="number"&&(Ae%1!=0?re.writeDoubleField(3,Ae):Ae<0?re.writeSVarintField(6,Ae):re.writeVarintField(5,Ae))}K.exports=B,K.exports.fromVectorTileJs=B,K.exports.fromGeojsonVt=function(Ae,re){re=re||{};var ue={};for(var me in Ae)ue[me]=new j(Ae[me].features,re),ue[me].name=me,ue[me].version=re.version,ue[me].extent=re.extent;return B({layers:ue})},K.exports.GeoJSONWrapper=j;var J=d.bv(K.exports);const te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ae=>Ae},he=Math.fround||(be=new Float32Array(1),Ae=>(be[0]=+Ae,be[0]));var be;const Ee=3,Be=5,Pe=6;class ze{constructor(re){this.options=Object.assign(Object.create(te),re),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(re){const{log:ue,minZoom:me,maxZoom:Ie}=this.options;ue&&console.time("total time");const Ne=`prepare ${re.length} points`;ue&&console.time(Ne),this.points=re;const Oe=[];for(let Fe=0;Fe<re.length;Fe++){const Ye=re[Fe];if(!Ye.geometry)continue;const[ft,ut]=Ye.geometry.coordinates,pt=he(nt(ft)),Gt=he(dt(ut));Oe.push(pt,Gt,1/0,Fe,-1,1),this.options.reduce&&Oe.push(0)}let $e=this.trees[Ie+1]=this._createTree(Oe);ue&&console.timeEnd(Ne);for(let Fe=Ie;Fe>=me;Fe--){const Ye=+Date.now();$e=this.trees[Fe]=this._createTree(this._cluster($e,Fe)),ue&&console.log("z%d: %d clusters in %dms",Fe,$e.numItems,+Date.now()-Ye)}return ue&&console.timeEnd("total time"),this}getClusters(re,ue){let me=((re[0]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,re[1]));let Ne=re[2]===180?180:((re[2]+180)%360+360)%360-180;const Oe=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)me=-180,Ne=180;else if(me>Ne){const ut=this.getClusters([me,Ie,180,Oe],ue),pt=this.getClusters([-180,Ie,Ne,Oe],ue);return ut.concat(pt)}const $e=this.trees[this._limitZoom(ue)],Fe=$e.range(nt(me),dt(Oe),nt(Ne),dt(Ie)),Ye=$e.data,ft=[];for(const ut of Fe){const pt=this.stride*ut;ft.push(Ye[pt+Be]>1?We(Ye,pt,this.clusterProps):this.points[Ye[pt+Ee]])}return ft}getChildren(re){const ue=this._getOriginId(re),me=this._getOriginZoom(re),Ie="No cluster with the specified id.",Ne=this.trees[me];if(!Ne)throw new Error(Ie);const Oe=Ne.data;if(ue*this.stride>=Oe.length)throw new Error(Ie);const $e=this.options.radius/(this.options.extent*Math.pow(2,me-1)),Fe=Ne.within(Oe[ue*this.stride],Oe[ue*this.stride+1],$e),Ye=[];for(const ft of Fe){const ut=ft*this.stride;Oe[ut+4]===re&&Ye.push(Oe[ut+Be]>1?We(Oe,ut,this.clusterProps):this.points[Oe[ut+Ee]])}if(Ye.length===0)throw new Error(Ie);return Ye}getLeaves(re,ue,me){const Ie=[];return this._appendLeaves(Ie,re,ue=ue||10,me=me||0,0),Ie}getTile(re,ue,me){const Ie=this.trees[this._limitZoom(re)],Ne=Math.pow(2,re),{extent:Oe,radius:$e}=this.options,Fe=$e/Oe,Ye=(me-Fe)/Ne,ft=(me+1+Fe)/Ne,ut={features:[]};return this._addTileFeatures(Ie.range((ue-Fe)/Ne,Ye,(ue+1+Fe)/Ne,ft),Ie.data,ue,me,Ne,ut),ue===0&&this._addTileFeatures(Ie.range(1-Fe/Ne,Ye,1,ft),Ie.data,Ne,me,Ne,ut),ue===Ne-1&&this._addTileFeatures(Ie.range(0,Ye,Fe/Ne,ft),Ie.data,-1,me,Ne,ut),ut.features.length?ut:null}getClusterExpansionZoom(re){let ue=this._getOriginZoom(re)-1;for(;ue<=this.options.maxZoom;){const me=this.getChildren(re);if(ue++,me.length!==1)break;re=me[0].properties.cluster_id}return ue}_appendLeaves(re,ue,me,Ie,Ne){const Oe=this.getChildren(ue);for(const $e of Oe){const Fe=$e.properties;if(Fe&&Fe.cluster?Ne+Fe.point_count<=Ie?Ne+=Fe.point_count:Ne=this._appendLeaves(re,Fe.cluster_id,me,Ie,Ne):Ne<Ie?Ne++:re.push($e),re.length===me)break}return Ne}_createTree(re){const ue=new d.au(re.length/this.stride|0,this.options.nodeSize,Float32Array);for(let me=0;me<re.length;me+=this.stride)ue.add(re[me],re[me+1]);return ue.finish(),ue.data=re,ue}_addTileFeatures(re,ue,me,Ie,Ne,Oe){for(const $e of re){const Fe=$e*this.stride,Ye=ue[Fe+Be]>1;let ft,ut,pt;if(Ye)ft=He(ue,Fe,this.clusterProps),ut=ue[Fe],pt=ue[Fe+1];else{const tn=this.points[ue[Fe+Ee]];ft=tn.properties;const[Tn,cn]=tn.geometry.coordinates;ut=nt(Tn),pt=dt(cn)}const Gt={type:1,geometry:[[Math.round(this.options.extent*(ut*Ne-me)),Math.round(this.options.extent*(pt*Ne-Ie))]],tags:ft};let ln;ln=Ye||this.options.generateId?ue[Fe+Ee]:this.points[ue[Fe+Ee]].id,ln!==void 0&&(Gt.id=ln),Oe.features.push(Gt)}}_limitZoom(re){return Math.max(this.options.minZoom,Math.min(Math.floor(+re),this.options.maxZoom+1))}_cluster(re,ue){const{radius:me,extent:Ie,reduce:Ne,minPoints:Oe}=this.options,$e=me/(Ie*Math.pow(2,ue)),Fe=re.data,Ye=[],ft=this.stride;for(let ut=0;ut<Fe.length;ut+=ft){if(Fe[ut+2]<=ue)continue;Fe[ut+2]=ue;const pt=Fe[ut],Gt=Fe[ut+1],ln=re.within(Fe[ut],Fe[ut+1],$e),tn=Fe[ut+Be];let Tn=tn;for(const cn of ln){const Zn=cn*ft;Fe[Zn+2]>ue&&(Tn+=Fe[Zn+Be])}if(Tn>tn&&Tn>=Oe){let cn,Zn=pt*tn,Gn=Gt*tn,ir=-1;const dn=((ut/ft|0)<<5)+(ue+1)+this.points.length;for(const or of ln){const Mr=or*ft;if(Fe[Mr+2]<=ue)continue;Fe[Mr+2]=ue;const ii=Fe[Mr+Be];Zn+=Fe[Mr]*ii,Gn+=Fe[Mr+1]*ii,Fe[Mr+4]=dn,Ne&&(cn||(cn=this._map(Fe,ut,!0),ir=this.clusterProps.length,this.clusterProps.push(cn)),Ne(cn,this._map(Fe,Mr)))}Fe[ut+4]=dn,Ye.push(Zn/Tn,Gn/Tn,1/0,dn,-1,Tn),Ne&&Ye.push(ir)}else{for(let cn=0;cn<ft;cn++)Ye.push(Fe[ut+cn]);if(Tn>1)for(const cn of ln){const Zn=cn*ft;if(!(Fe[Zn+2]<=ue)){Fe[Zn+2]=ue;for(let Gn=0;Gn<ft;Gn++)Ye.push(Fe[Zn+Gn])}}}}return Ye}_getOriginId(re){return re-this.points.length>>5}_getOriginZoom(re){return(re-this.points.length)%32}_map(re,ue,me){if(re[ue+Be]>1){const Oe=this.clusterProps[re[ue+Pe]];return me?Object.assign({},Oe):Oe}const Ie=this.points[re[ue+Ee]].properties,Ne=this.options.map(Ie);return me&&Ne===Ie?Object.assign({},Ne):Ne}}function We(Ae,re,ue){return{type:"Feature",id:Ae[re+Ee],properties:He(Ae,re,ue),geometry:{type:"Point",coordinates:[(me=Ae[re],360*(me-.5)),wt(Ae[re+1])]}};var me}function He(Ae,re,ue){const me=Ae[re+Be],Ie=me>=1e4?`${Math.round(me/1e3)}k`:me>=1e3?Math.round(me/100)/10+"k":me,Ne=Ae[re+Pe],Oe=Ne===-1?{}:Object.assign({},ue[Ne]);return Object.assign(Oe,{cluster:!0,cluster_id:Ae[re+Ee],point_count:me,point_count_abbreviated:Ie})}function nt(Ae){return Ae/360+.5}function dt(Ae){const re=Math.sin(Ae*Math.PI/180),ue=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ue<0?0:ue>1?1:ue}function wt(Ae){const re=(180-360*Ae)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function Mt(Ae,re,ue,me){for(var Ie,Ne=me,Oe=ue-re>>1,$e=ue-re,Fe=Ae[re],Ye=Ae[re+1],ft=Ae[ue],ut=Ae[ue+1],pt=re+3;pt<ue;pt+=3){var Gt=gt(Ae[pt],Ae[pt+1],Fe,Ye,ft,ut);if(Gt>Ne)Ie=pt,Ne=Gt;else if(Gt===Ne){var ln=Math.abs(pt-Oe);ln<$e&&(Ie=pt,$e=ln)}}Ne>me&&(Ie-re>3&&Mt(Ae,re,Ie,me),Ae[Ie+2]=Ne,ue-Ie>3&&Mt(Ae,Ie,ue,me))}function gt(Ae,re,ue,me,Ie,Ne){var Oe=Ie-ue,$e=Ne-me;if(Oe!==0||$e!==0){var Fe=((Ae-ue)*Oe+(re-me)*$e)/(Oe*Oe+$e*$e);Fe>1?(ue=Ie,me=Ne):Fe>0&&(ue+=Oe*Fe,me+=$e*Fe)}return(Oe=Ae-ue)*Oe+($e=re-me)*$e}function Tt(Ae,re,ue,me){var Ie={id:Ae===void 0?null:Ae,type:re,geometry:ue,tags:me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ne){var Oe=Ne.geometry,$e=Ne.type;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")$t(Ne,Oe);else if($e==="Polygon"||$e==="MultiLineString")for(var Fe=0;Fe<Oe.length;Fe++)$t(Ne,Oe[Fe]);else if($e==="MultiPolygon")for(Fe=0;Fe<Oe.length;Fe++)for(var Ye=0;Ye<Oe[Fe].length;Ye++)$t(Ne,Oe[Fe][Ye])}(Ie),Ie}function $t(Ae,re){for(var ue=0;ue<re.length;ue+=3)Ae.minX=Math.min(Ae.minX,re[ue]),Ae.minY=Math.min(Ae.minY,re[ue+1]),Ae.maxX=Math.max(Ae.maxX,re[ue]),Ae.maxY=Math.max(Ae.maxY,re[ue+1])}function Vt(Ae,re,ue,me){if(re.geometry){var Ie=re.geometry.coordinates,Ne=re.geometry.type,Oe=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2),$e=[],Fe=re.id;if(ue.promoteId?Fe=re.properties[ue.promoteId]:ue.generateId&&(Fe=me||0),Ne==="Point")Zt(Ie,$e);else if(Ne==="MultiPoint")for(var Ye=0;Ye<Ie.length;Ye++)Zt(Ie[Ye],$e);else if(Ne==="LineString")En(Ie,$e,Oe,!1);else if(Ne==="MultiLineString"){if(ue.lineMetrics){for(Ye=0;Ye<Ie.length;Ye++)En(Ie[Ye],$e=[],Oe,!1),Ae.push(Tt(Fe,"LineString",$e,re.properties));return}et(Ie,$e,Oe,!1)}else if(Ne==="Polygon")et(Ie,$e,Oe,!0);else{if(Ne!=="MultiPolygon"){if(Ne==="GeometryCollection"){for(Ye=0;Ye<re.geometry.geometries.length;Ye++)Vt(Ae,{id:Fe,geometry:re.geometry.geometries[Ye],properties:re.properties},ue,me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ye=0;Ye<Ie.length;Ye++){var ft=[];et(Ie[Ye],ft,Oe,!0),$e.push(ft)}}Ae.push(Tt(Fe,Ne,$e,re.properties))}}function Zt(Ae,re){re.push(sn(Ae[0])),re.push(Sn(Ae[1])),re.push(0)}function En(Ae,re,ue,me){for(var Ie,Ne,Oe=0,$e=0;$e<Ae.length;$e++){var Fe=sn(Ae[$e][0]),Ye=Sn(Ae[$e][1]);re.push(Fe),re.push(Ye),re.push(0),$e>0&&(Oe+=me?(Ie*Ye-Fe*Ne)/2:Math.sqrt(Math.pow(Fe-Ie,2)+Math.pow(Ye-Ne,2))),Ie=Fe,Ne=Ye}var ft=re.length-3;re[2]=1,Mt(re,0,ft,ue),re[ft+2]=1,re.size=Math.abs(Oe),re.start=0,re.end=re.size}function et(Ae,re,ue,me){for(var Ie=0;Ie<Ae.length;Ie++){var Ne=[];En(Ae[Ie],Ne,ue,me),re.push(Ne)}}function sn(Ae){return Ae/360+.5}function Sn(Ae){var re=Math.sin(Ae*Math.PI/180),ue=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ue<0?0:ue>1?1:ue}function we(Ae,re,ue,me,Ie,Ne,Oe,$e){if(me/=re,Ne>=(ue/=re)&&Oe<me)return Ae;if(Oe<ue||Ne>=me)return null;for(var Fe=[],Ye=0;Ye<Ae.length;Ye++){var ft=Ae[Ye],ut=ft.geometry,pt=ft.type,Gt=Ie===0?ft.minX:ft.minY,ln=Ie===0?ft.maxX:ft.maxY;if(Gt>=ue&&ln<me)Fe.push(ft);else if(!(ln<ue||Gt>=me)){var tn=[];if(pt==="Point"||pt==="MultiPoint")N(ut,tn,ue,me,Ie);else if(pt==="LineString")D(ut,tn,ue,me,Ie,!1,$e.lineMetrics);else if(pt==="MultiLineString")Ze(ut,tn,ue,me,Ie,!1);else if(pt==="Polygon")Ze(ut,tn,ue,me,Ie,!0);else if(pt==="MultiPolygon")for(var Tn=0;Tn<ut.length;Tn++){var cn=[];Ze(ut[Tn],cn,ue,me,Ie,!0),cn.length&&tn.push(cn)}if(tn.length){if($e.lineMetrics&&pt==="LineString"){for(Tn=0;Tn<tn.length;Tn++)Fe.push(Tt(ft.id,pt,tn[Tn],ft.tags));continue}pt!=="LineString"&&pt!=="MultiLineString"||(tn.length===1?(pt="LineString",tn=tn[0]):pt="MultiLineString"),pt!=="Point"&&pt!=="MultiPoint"||(pt=tn.length===3?"Point":"MultiPoint"),Fe.push(Tt(ft.id,pt,tn,ft.tags))}}}return Fe.length?Fe:null}function N(Ae,re,ue,me,Ie){for(var Ne=0;Ne<Ae.length;Ne+=3){var Oe=Ae[Ne+Ie];Oe>=ue&&Oe<=me&&(re.push(Ae[Ne]),re.push(Ae[Ne+1]),re.push(Ae[Ne+2]))}}function D(Ae,re,ue,me,Ie,Ne,Oe){for(var $e,Fe,Ye=xe(Ae),ft=Ie===0?ct:ae,ut=Ae.start,pt=0;pt<Ae.length-3;pt+=3){var Gt=Ae[pt],ln=Ae[pt+1],tn=Ae[pt+2],Tn=Ae[pt+3],cn=Ae[pt+4],Zn=Ie===0?Gt:ln,Gn=Ie===0?Tn:cn,ir=!1;Oe&&($e=Math.sqrt(Math.pow(Gt-Tn,2)+Math.pow(ln-cn,2))),Zn<ue?Gn>ue&&(Fe=ft(Ye,Gt,ln,Tn,cn,ue),Oe&&(Ye.start=ut+$e*Fe)):Zn>me?Gn<me&&(Fe=ft(Ye,Gt,ln,Tn,cn,me),Oe&&(Ye.start=ut+$e*Fe)):Qe(Ye,Gt,ln,tn),Gn<ue&&Zn>=ue&&(Fe=ft(Ye,Gt,ln,Tn,cn,ue),ir=!0),Gn>me&&Zn<=me&&(Fe=ft(Ye,Gt,ln,Tn,cn,me),ir=!0),!Ne&&ir&&(Oe&&(Ye.end=ut+$e*Fe),re.push(Ye),Ye=xe(Ae)),Oe&&(ut+=$e)}var dn=Ae.length-3;Gt=Ae[dn],ln=Ae[dn+1],tn=Ae[dn+2],(Zn=Ie===0?Gt:ln)>=ue&&Zn<=me&&Qe(Ye,Gt,ln,tn),dn=Ye.length-3,Ne&&dn>=3&&(Ye[dn]!==Ye[0]||Ye[dn+1]!==Ye[1])&&Qe(Ye,Ye[0],Ye[1],Ye[2]),Ye.length&&re.push(Ye)}function xe(Ae){var re=[];return re.size=Ae.size,re.start=Ae.start,re.end=Ae.end,re}function Ze(Ae,re,ue,me,Ie,Ne){for(var Oe=0;Oe<Ae.length;Oe++)D(Ae[Oe],re,ue,me,Ie,Ne,!1)}function Qe(Ae,re,ue,me){Ae.push(re),Ae.push(ue),Ae.push(me)}function ct(Ae,re,ue,me,Ie,Ne){var Oe=(Ne-re)/(me-re);return Ae.push(Ne),Ae.push(ue+(Ie-ue)*Oe),Ae.push(1),Oe}function ae(Ae,re,ue,me,Ie,Ne){var Oe=(Ne-ue)/(Ie-ue);return Ae.push(re+(me-re)*Oe),Ae.push(Ne),Ae.push(1),Oe}function R(Ae,re){for(var ue=[],me=0;me<Ae.length;me++){var Ie,Ne=Ae[me],Oe=Ne.type;if(Oe==="Point"||Oe==="MultiPoint"||Oe==="LineString")Ie=z(Ne.geometry,re);else if(Oe==="MultiLineString"||Oe==="Polygon"){Ie=[];for(var $e=0;$e<Ne.geometry.length;$e++)Ie.push(z(Ne.geometry[$e],re))}else if(Oe==="MultiPolygon")for(Ie=[],$e=0;$e<Ne.geometry.length;$e++){for(var Fe=[],Ye=0;Ye<Ne.geometry[$e].length;Ye++)Fe.push(z(Ne.geometry[$e][Ye],re));Ie.push(Fe)}ue.push(Tt(Ne.id,Oe,Ie,Ne.tags))}return ue}function z(Ae,re){var ue=[];ue.size=Ae.size,Ae.start!==void 0&&(ue.start=Ae.start,ue.end=Ae.end);for(var me=0;me<Ae.length;me+=3)ue.push(Ae[me]+re,Ae[me+1],Ae[me+2]);return ue}function Se(Ae,re){if(Ae.transformed)return Ae;var ue,me,Ie,Ne=1<<Ae.z,Oe=Ae.x,$e=Ae.y;for(ue=0;ue<Ae.features.length;ue++){var Fe=Ae.features[ue],Ye=Fe.geometry,ft=Fe.type;if(Fe.geometry=[],ft===1)for(me=0;me<Ye.length;me+=2)Fe.geometry.push(Ve(Ye[me],Ye[me+1],re,Ne,Oe,$e));else for(me=0;me<Ye.length;me++){var ut=[];for(Ie=0;Ie<Ye[me].length;Ie+=2)ut.push(Ve(Ye[me][Ie],Ye[me][Ie+1],re,Ne,Oe,$e));Fe.geometry.push(ut)}}return Ae.transformed=!0,Ae}function Ve(Ae,re,ue,me,Ie,Ne){return[Math.round(ue*(Ae*me-Ie)),Math.round(ue*(re*me-Ne))]}function tt(Ae,re,ue,me,Ie){for(var Ne=re===Ie.maxZoom?0:Ie.tolerance/((1<<re)*Ie.extent),Oe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ue,y:me,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},$e=0;$e<Ae.length;$e++){Oe.numFeatures++,at(Oe,Ae[$e],Ne,Ie);var Fe=Ae[$e].minX,Ye=Ae[$e].minY,ft=Ae[$e].maxX,ut=Ae[$e].maxY;Fe<Oe.minX&&(Oe.minX=Fe),Ye<Oe.minY&&(Oe.minY=Ye),ft>Oe.maxX&&(Oe.maxX=ft),ut>Oe.maxY&&(Oe.maxY=ut)}return Oe}function at(Ae,re,ue,me){var Ie=re.geometry,Ne=re.type,Oe=[];if(Ne==="Point"||Ne==="MultiPoint")for(var $e=0;$e<Ie.length;$e+=3)Oe.push(Ie[$e]),Oe.push(Ie[$e+1]),Ae.numPoints++,Ae.numSimplified++;else if(Ne==="LineString")st(Oe,Ie,Ae,ue,!1,!1);else if(Ne==="MultiLineString"||Ne==="Polygon")for($e=0;$e<Ie.length;$e++)st(Oe,Ie[$e],Ae,ue,Ne==="Polygon",$e===0);else if(Ne==="MultiPolygon")for(var Fe=0;Fe<Ie.length;Fe++){var Ye=Ie[Fe];for($e=0;$e<Ye.length;$e++)st(Oe,Ye[$e],Ae,ue,!0,$e===0)}if(Oe.length){var ft=re.tags||null;if(Ne==="LineString"&&me.lineMetrics){for(var ut in ft={},re.tags)ft[ut]=re.tags[ut];ft.mapbox_clip_start=Ie.start/Ie.size,ft.mapbox_clip_end=Ie.end/Ie.size}var pt={geometry:Oe,type:Ne==="Polygon"||Ne==="MultiPolygon"?3:Ne==="LineString"||Ne==="MultiLineString"?2:1,tags:ft};re.id!==null&&(pt.id=re.id),Ae.features.push(pt)}}function st(Ae,re,ue,me,Ie,Ne){var Oe=me*me;if(me>0&&re.size<(Ie?Oe:me))ue.numPoints+=re.length/3;else{for(var $e=[],Fe=0;Fe<re.length;Fe+=3)(me===0||re[Fe+2]>Oe)&&(ue.numSimplified++,$e.push(re[Fe]),$e.push(re[Fe+1])),ue.numPoints++;Ie&&function(Ye,ft){for(var ut=0,pt=0,Gt=Ye.length,ln=Gt-2;pt<Gt;ln=pt,pt+=2)ut+=(Ye[pt]-Ye[ln])*(Ye[pt+1]+Ye[ln+1]);if(ut>0===ft)for(pt=0,Gt=Ye.length;pt<Gt/2;pt+=2){var tn=Ye[pt],Tn=Ye[pt+1];Ye[pt]=Ye[Gt-2-pt],Ye[pt+1]=Ye[Gt-1-pt],Ye[Gt-2-pt]=tn,Ye[Gt-1-pt]=Tn}}($e,Ne),Ae.push($e)}}function Dt(Ae,re){var ue=(re=this.options=function(Ie,Ne){for(var Oe in Ne)Ie[Oe]=Ne[Oe];return Ie}(Object.create(this.options),re)).debug;if(ue&&console.time("preprocess data"),re.maxZoom<0||re.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(re.promoteId&&re.generateId)throw new Error("promoteId and generateId cannot be used together.");var me=function(Ie,Ne){var Oe=[];if(Ie.type==="FeatureCollection")for(var $e=0;$e<Ie.features.length;$e++)Vt(Oe,Ie.features[$e],Ne,$e);else Vt(Oe,Ie.type==="Feature"?Ie:{geometry:Ie},Ne);return Oe}(Ae,re);this.tiles={},this.tileCoords=[],ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",re.indexMaxZoom,re.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),me=function(Ie,Ne){var Oe=Ne.buffer/Ne.extent,$e=Ie,Fe=we(Ie,1,-1-Oe,Oe,0,-1,2,Ne),Ye=we(Ie,1,1-Oe,2+Oe,0,-1,2,Ne);return(Fe||Ye)&&($e=we(Ie,1,-Oe,1+Oe,0,-1,2,Ne)||[],Fe&&($e=R(Fe,1).concat($e)),Ye&&($e=$e.concat(R(Ye,-1)))),$e}(me,re),me.length&&this.splitTile(me,0,0,0),ue&&(me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Rt(Ae,re,ue){return 32*((1<<Ae)*ue+re)+Ae}function _n(Ae,re){return re?Ae.properties[re]:Ae.id}function vn(Ae,re){if(Ae==null)return!0;if(Ae.type==="Feature")return _n(Ae,re)!=null;if(Ae.type==="FeatureCollection"){const ue=new Set;for(const me of Ae.features){const Ie=_n(me,re);if(Ie==null||ue.has(Ie))return!1;ue.add(Ie)}return!0}return!1}function an(Ae,re){const ue=new Map;if(Ae!=null)if(Ae.type==="Feature")ue.set(_n(Ae,re),Ae);else for(const me of Ae.features)ue.set(_n(me,re),me);return ue}Dt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Dt.prototype.splitTile=function(Ae,re,ue,me,Ie,Ne,Oe){for(var $e=[Ae,re,ue,me],Fe=this.options,Ye=Fe.debug;$e.length;){me=$e.pop(),ue=$e.pop(),re=$e.pop(),Ae=$e.pop();var ft=1<<re,ut=Rt(re,ue,me),pt=this.tiles[ut];if(!pt&&(Ye>1&&console.time("creation"),pt=this.tiles[ut]=tt(Ae,re,ue,me,Fe),this.tileCoords.push({z:re,x:ue,y:me}),Ye)){Ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",re,ue,me,pt.numFeatures,pt.numPoints,pt.numSimplified),console.timeEnd("creation"));var Gt="z"+re;this.stats[Gt]=(this.stats[Gt]||0)+1,this.total++}if(pt.source=Ae,Ie){if(re===Fe.maxZoom||re===Ie)continue;var ln=1<<Ie-re;if(ue!==Math.floor(Ne/ln)||me!==Math.floor(Oe/ln))continue}else if(re===Fe.indexMaxZoom||pt.numPoints<=Fe.indexMaxPoints)continue;if(pt.source=null,Ae.length!==0){Ye>1&&console.time("clipping");var tn,Tn,cn,Zn,Gn,ir,dn=.5*Fe.buffer/Fe.extent,or=.5-dn,Mr=.5+dn,ii=1+dn;tn=Tn=cn=Zn=null,Gn=we(Ae,ft,ue-dn,ue+Mr,0,pt.minX,pt.maxX,Fe),ir=we(Ae,ft,ue+or,ue+ii,0,pt.minX,pt.maxX,Fe),Ae=null,Gn&&(tn=we(Gn,ft,me-dn,me+Mr,1,pt.minY,pt.maxY,Fe),Tn=we(Gn,ft,me+or,me+ii,1,pt.minY,pt.maxY,Fe),Gn=null),ir&&(cn=we(ir,ft,me-dn,me+Mr,1,pt.minY,pt.maxY,Fe),Zn=we(ir,ft,me+or,me+ii,1,pt.minY,pt.maxY,Fe),ir=null),Ye>1&&console.timeEnd("clipping"),$e.push(tn||[],re+1,2*ue,2*me),$e.push(Tn||[],re+1,2*ue,2*me+1),$e.push(cn||[],re+1,2*ue+1,2*me),$e.push(Zn||[],re+1,2*ue+1,2*me+1)}}},Dt.prototype.getTile=function(Ae,re,ue){var me=this.options,Ie=me.extent,Ne=me.debug;if(Ae<0||Ae>24)return null;var Oe=1<<Ae,$e=Rt(Ae,re=(re%Oe+Oe)%Oe,ue);if(this.tiles[$e])return Se(this.tiles[$e],Ie);Ne>1&&console.log("drilling down to z%d-%d-%d",Ae,re,ue);for(var Fe,Ye=Ae,ft=re,ut=ue;!Fe&&Ye>0;)Ye--,ft=Math.floor(ft/2),ut=Math.floor(ut/2),Fe=this.tiles[Rt(Ye,ft,ut)];return Fe&&Fe.source?(Ne>1&&console.log("found parent tile z%d-%d-%d",Ye,ft,ut),Ne>1&&console.time("drilling down"),this.splitTile(Fe.source,Ye,ft,ut,Ae,re,ue),Ne>1&&console.timeEnd("drilling down"),this.tiles[$e]?Se(this.tiles[$e],Ie):null):null};class mi extends w{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(re,ue){return d._(this,void 0,void 0,function*(){const me=re.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ie=this._geoJSONIndex.getTile(me.z,me.x,me.y);if(!Ie)return null;const Ne=new class{constructor($e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.W,this.length=$e.length,this._features=$e}feature($e){return new class{constructor(Fe){this._feature=Fe,this.extent=d.W,this.type=Fe.type,this.properties=Fe.tags,"id"in Fe&&!isNaN(Fe.id)&&(this.id=parseInt(Fe.id,10))}loadGeometry(){if(this._feature.type===1){const Fe=[];for(const Ye of this._feature.geometry)Fe.push([new d.P(Ye[0],Ye[1])]);return Fe}{const Fe=[];for(const Ye of this._feature.geometry){const ft=[];for(const ut of Ye)ft.push(new d.P(ut[0],ut[1]));Fe.push(ft)}return Fe}}toGeoJSON(Fe,Ye,ft){return ce.call(this,Fe,Ye,ft)}}(this._features[$e])}}(Ie.features);let Oe=J(Ne);return Oe.byteOffset===0&&Oe.byteLength===Oe.buffer.byteLength||(Oe=new Uint8Array(Oe)),{vectorTile:Ne,rawData:Oe.buffer}})}loadData(re){return d._(this,void 0,void 0,function*(){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.abort();const me=!!(re&&re.request&&re.request.collectResourceTiming)&&new d.bs(re.request);this._pendingRequest=new AbortController;try{let Ie=yield this.loadGeoJSON(re,this._pendingRequest);if(delete this._pendingRequest,typeof Ie!="object")throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`);if(F(Ie,!0),re.filter){const Oe=d.by(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Oe.result==="error")throw new Error(Oe.value.map(Fe=>`${Fe.key}: ${Fe.message}`).join(", "));Ie={type:"FeatureCollection",features:Ie.features.filter(Fe=>Oe.value.evaluate({zoom:0},Fe))}}this._geoJSONIndex=re.cluster?new ze(function({superclusterOptions:Oe,clusterProperties:$e}){if(!$e||!Oe)return Oe;const Fe={},Ye={},ft={accumulated:null,zoom:0},ut={properties:null},pt=Object.keys($e);for(const Gt of pt){const[ln,tn]=$e[Gt],Tn=d.by(tn),cn=d.by(typeof ln=="string"?[ln,["accumulated"],["get",Gt]]:ln);Fe[Gt]=Tn.value,Ye[Gt]=cn.value}return Oe.map=Gt=>{ut.properties=Gt;const ln={};for(const tn of pt)ln[tn]=Fe[tn].evaluate(ft,ut);return ln},Oe.reduce=(Gt,ln)=>{ut.properties=ln;for(const tn of pt)ft.accumulated=Gt[tn],Gt[tn]=Ye[tn].evaluate(ft,ut)},Oe}(re)).load(Ie.features):function(Oe,$e){return new Dt(Oe,$e)}(Ie,re.geojsonVtOptions),this.loaded={};const Ne={};if(me){const Oe=me.finish();Oe&&(Ne.resourceTiming={},Ne.resourceTiming[re.source]=JSON.parse(JSON.stringify(Oe)))}return Ne}catch(Ie){if(delete this._pendingRequest,d.bz(Ie))return{abandoned:!0};throw Ie}})}reloadTile(re){const ue=this.loaded;return ue&&ue[re.uid]?super.reloadTile(re):this.loadTile(re)}loadGeoJSON(re,ue){return d._(this,void 0,void 0,function*(){const{promoteId:me}=re;if(re.request){const Ie=yield d.h(re.request,ue);return this._dataUpdateable=vn(Ie.data,me)?an(Ie.data,me):void 0,Ie.data}if(typeof re.data=="string")try{const Ie=JSON.parse(re.data);return this._dataUpdateable=vn(Ie,me)?an(Ie,me):void 0,Ie}catch{throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`)}if(!re.dataDiff)throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${re.source}`);return function(Ie,Ne,Oe){var $e,Fe,Ye,ft;if(Ne.removeAll&&Ie.clear(),Ne.remove)for(const ut of Ne.remove)Ie.delete(ut);if(Ne.add)for(const ut of Ne.add){const pt=_n(ut,Oe);pt!=null&&Ie.set(pt,ut)}if(Ne.update)for(const ut of Ne.update){let pt=Ie.get(ut.id);if(pt==null)continue;const Gt=!ut.removeAllProperties&&((($e=ut.removeProperties)===null||$e===void 0?void 0:$e.length)>0||((Fe=ut.addOrUpdateProperties)===null||Fe===void 0?void 0:Fe.length)>0);if((ut.newGeometry||ut.removeAllProperties||Gt)&&(pt=Object.assign({},pt),Ie.set(ut.id,pt),Gt&&(pt.properties=Object.assign({},pt.properties))),ut.newGeometry&&(pt.geometry=ut.newGeometry),ut.removeAllProperties)pt.properties={};else if(((Ye=ut.removeProperties)===null||Ye===void 0?void 0:Ye.length)>0)for(const ln of ut.removeProperties)Object.prototype.hasOwnProperty.call(pt.properties,ln)&&delete pt.properties[ln];if(((ft=ut.addOrUpdateProperties)===null||ft===void 0?void 0:ft.length)>0)for(const{key:ln,value:tn}of ut.addOrUpdateProperties)pt.properties[ln]=tn}}(this._dataUpdateable,re.dataDiff,me),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(re){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(re){return this._geoJSONIndex.getClusterExpansionZoom(re.clusterId)}getClusterChildren(re){return this._geoJSONIndex.getChildren(re.clusterId)}getClusterLeaves(re){return this._geoJSONIndex.getLeaves(re.clusterId,re.limit,re.offset)}}class gi{constructor(re){this.self=re,this.actor=new d.C(re),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ue,me)=>{if(this.externalWorkerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.externalWorkerSourceTypes[ue]=me},this.self.addProtocol=d.bf,this.self.removeProtocol=d.bg,this.self.registerRTLTextPlugin=ue=>{if(d.bA.isParsed())throw new Error("RTL text plugin already registered.");d.bA.setMethods(ue)},this.actor.registerMessageHandler("loadDEMTile",(ue,me)=>this._getDEMWorkerSource(ue,me.source).loadTile(me)),this.actor.registerMessageHandler("removeDEMTile",(ue,me)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ue,me.source).removeTile(me)})),this.actor.registerMessageHandler("getClusterExpansionZoom",(ue,me)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,me.type,me.source).getClusterExpansionZoom(me)})),this.actor.registerMessageHandler("getClusterChildren",(ue,me)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,me.type,me.source).getClusterChildren(me)})),this.actor.registerMessageHandler("getClusterLeaves",(ue,me)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,me.type,me.source).getClusterLeaves(me)})),this.actor.registerMessageHandler("loadData",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).loadData(me)),this.actor.registerMessageHandler("loadTile",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).loadTile(me)),this.actor.registerMessageHandler("reloadTile",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).reloadTile(me)),this.actor.registerMessageHandler("abortTile",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).abortTile(me)),this.actor.registerMessageHandler("removeTile",(ue,me)=>this._getWorkerSource(ue,me.type,me.source).removeTile(me)),this.actor.registerMessageHandler("removeSource",(ue,me)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[ue]||!this.workerSources[ue][me.type]||!this.workerSources[ue][me.type][me.source])return;const Ie=this.workerSources[ue][me.type][me.source];delete this.workerSources[ue][me.type][me.source],Ie.removeSource!==void 0&&Ie.removeSource(me)})),this.actor.registerMessageHandler("removeMap",ue=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue]})),this.actor.registerMessageHandler("setReferrer",(ue,me)=>d._(this,void 0,void 0,function*(){this.referrer=me})),this.actor.registerMessageHandler("syncRTLPluginState",(ue,me)=>this._syncRTLPluginState(ue,me)),this.actor.registerMessageHandler("importScript",(ue,me)=>d._(this,void 0,void 0,function*(){this.self.importScripts(me)})),this.actor.registerMessageHandler("setImages",(ue,me)=>this._setImages(ue,me)),this.actor.registerMessageHandler("updateLayers",(ue,me)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(ue).update(me.layers,me.removedIds)})),this.actor.registerMessageHandler("setLayers",(ue,me)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(ue).replace(me)}))}_setImages(re,ue){return d._(this,void 0,void 0,function*(){this.availableImages[re]=ue;for(const me in this.workerSources[re]){const Ie=this.workerSources[re][me];for(const Ne in Ie)Ie[Ne].availableImages=ue}})}_syncRTLPluginState(re,ue){return d._(this,void 0,void 0,function*(){if(d.bA.isParsed())return d.bA.getState();if(ue.pluginStatus!=="loading")return d.bA.setState(ue),ue;const me=ue.pluginURL;if(this.self.importScripts(me),d.bA.isParsed()){const Ie={pluginStatus:"loaded",pluginURL:me};return d.bA.setState(Ie),Ie}throw d.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${me}`)})}_getAvailableImages(re){let ue=this.availableImages[re];return ue||(ue=[]),ue}_getLayerIndex(re){let ue=this.layerIndexes[re];return ue||(ue=this.layerIndexes[re]=new u),ue}_getWorkerSource(re,ue,me){if(this.workerSources[re]||(this.workerSources[re]={}),this.workerSources[re][ue]||(this.workerSources[re][ue]={}),!this.workerSources[re][ue][me]){const Ie={sendAsync:(Ne,Oe)=>(Ne.targetMapId=re,this.actor.sendAsync(Ne,Oe))};switch(ue){case"vector":this.workerSources[re][ue][me]=new w(Ie,this._getLayerIndex(re),this._getAvailableImages(re));break;case"geojson":this.workerSources[re][ue][me]=new mi(Ie,this._getLayerIndex(re),this._getAvailableImages(re));break;default:this.workerSources[re][ue][me]=new this.externalWorkerSourceTypes[ue](Ie,this._getLayerIndex(re),this._getAvailableImages(re))}}return this.workerSources[re][ue][me]}_getDEMWorkerSource(re,ue){return this.demWorkerSources[re]||(this.demWorkerSources[re]={}),this.demWorkerSources[re][ue]||(this.demWorkerSources[re][ue]=new T),this.demWorkerSources[re][ue]}}return d.i(self)&&(self.worker=new gi(self)),gi}),c("index",["exports","./shared"],function(d,u){var b="4.1.2";let C,A;const w={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((r,l)=>{const f=requestAnimationFrame(r);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(f),l(u.c())})}),getImageData(y,r=0){return this.getImageCanvasContext(y).getImageData(-r,-r,y.width+2*r,y.height+2*r)},getImageCanvasContext(y){const r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=y.width,r.height=y.height,l.drawImage(y,0,0,y.width,y.height),l},resolveURL:y=>(C||(C=document.createElement("a")),C.href=y,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(A==null&&(A=matchMedia("(prefers-reduced-motion: reduce)")),A.matches)}};class T{static testProp(r){if(!T.docStyle)return r[0];for(let l=0;l<r.length;l++)if(r[l]in T.docStyle)return r[l];return r[0]}static create(r,l,f){const m=window.document.createElement(r);return l!==void 0&&(m.className=l),f&&f.appendChild(m),m}static createNS(r,l){return window.document.createElementNS(r,l)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(r,l){r.style[T.transformProp]=l}static addEventListener(r,l,f,m={}){r.addEventListener(l,f,"passive"in m?m:m.capture)}static removeEventListener(r,l,f,m={}){r.removeEventListener(l,f,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static getScale(r){const l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}static getPoint(r,l,f){const m=l.boundingClientRect;return new u.P((f.clientX-m.left)/l.x-r.clientLeft,(f.clientY-m.top)/l.y-r.clientTop)}static mousePos(r,l){const f=T.getScale(r);return T.getPoint(r,f,l)}static touchPos(r,l){const f=[],m=T.getScale(r);for(let v=0;v<l.length;v++)f.push(T.getPoint(r,m,l[v]));return f}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);const L={supported:!1,testSupport:function(y){!ce&&F&&(K?W(y):U=y)}};let U,F,ce=!1,K=!1;function W(y){const r=y.createTexture();y.bindTexture(y.TEXTURE_2D,r);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,F),y.isContextLost())return;L.supported=!0}catch{}y.deleteTexture(r),ce=!0}var $,ie;typeof document<"u"&&(F=document.createElement("img"),F.onload=function(){U&&W(U),U=null,K=!0},F.onerror=function(){ce=!0,U=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let r,l,f,m;y.resetRequestQueue=()=>{r=[],l=0,f=0,m={}},y.addThrottleControl=M=>{const H=f++;return m[H]=M,H},y.removeThrottleControl=M=>{delete m[M],I()},y.getImage=(M,H,Q=!0)=>new Promise((ne,ge)=>{L.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),u.e(M,{type:"image"}),r.push({abortController:H,requestParameters:M,supportImageRefresh:Q,state:"queued",onError:Me=>{ge(Me)},onSuccess:Me=>{ne(Me)}}),I()});const v=M=>u._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:H,supportImageRefresh:Q,onError:ne,onSuccess:ge,abortController:Me}=M,ke=Q===!1&&!u.i(self)&&!u.g(H.url)&&(!H.headers||Object.keys(H.headers).reduce((Xe,rt)=>Xe&&rt==="accept",!0));l++;const Le=ke?P(H,Me):u.m(H,Me);try{const Xe=yield Le;delete M.abortController,M.state="completed",Xe.data instanceof HTMLImageElement||u.b(Xe.data)?ge(Xe):Xe.data&&ge({data:yield(Te=Xe.data,typeof createImageBitmap=="function"?u.d(Te):u.f(Te)),cacheControl:Xe.cacheControl,expires:Xe.expires})}catch(Xe){delete M.abortController,ne(Xe)}finally{l--,I()}var Te}),I=()=>{const M=(()=>{for(const H of Object.keys(m))if(m[H]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let H=l;H<M&&r.length>0;H++){const Q=r.shift();Q.abortController.signal.aborted?H--:v(Q)}},P=(M,H)=>new Promise((Q,ne)=>{const ge=new Image,Me=M.url,ke=M.credentials;ke&&ke==="include"?ge.crossOrigin="use-credentials":(ke&&ke==="same-origin"||!u.s(Me))&&(ge.crossOrigin="anonymous"),H.signal.addEventListener("abort",()=>{ge.src="",ne(u.c())}),ge.fetchPriority="high",ge.onload=()=>{ge.onerror=ge.onload=null,Q({data:ge})},ge.onerror=()=>{ge.onerror=ge.onload=null,H.signal.aborted||ne(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ge.src=Me})}($||($={})),$.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(ie||(ie={}));class X{constructor(r){this._transformRequestFn=r}transformRequest(r,l){return this._transformRequestFn&&this._transformRequestFn(r,l)||{url:r}}normalizeSpriteURL(r,l,f){const m=function(v){const I=v.match(V);if(!I)throw new Error(`Unable to parse URL "${v}"`);return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}(r);return m.path+=`${l}${f}`,function(v){const I=v.params.length?`?${v.params.join("&")}`:"";return`${v.protocol}://${v.authority}${v.path}${I}`}(m)}setTransformRequest(r){this._transformRequestFn=r}}const V=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function E(y){var r=new u.A(3);return r[0]=y[0],r[1]=y[1],r[2]=y[2],r}var j,B=function(y,r,l){return y[0]=r[0]-l[0],y[1]=r[1]-l[1],y[2]=r[2]-l[2],y};j=new u.A(3),u.A!=Float32Array&&(j[0]=0,j[1]=0,j[2]=0);var ee=function(y){var r=y[0],l=y[1];return r*r+l*l};function q(y){const r=[];if(typeof y=="string")r.push({id:"default",url:y});else if(y&&y.length>0){const l=[];for(const{id:f,url:m}of y){const v=`${f}${m}`;l.indexOf(v)===-1&&(l.push(v),r.push({id:f,url:m}))}}return r}(function(){var y=new u.A(2);u.A!=Float32Array&&(y[0]=0,y[1]=0)})();class pe{constructor(r,l,f,m){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(l,m)}update(r,l,f){const{width:m,height:v}=r,I=!(this.size&&this.size[0]===m&&this.size[1]===v||f),{context:P}=this,{gl:M}=P;if(this.useMipmap=!!(l&&l.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!l||l.premultiply!==!1)),I)this.size=[m,v],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,r):M.texImage2D(M.TEXTURE_2D,0,this.format,m,v,0,this.format,M.UNSIGNED_BYTE,r.data);else{const{x:H,y:Q}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?M.texSubImage2D(M.TEXTURE_2D,0,H,Q,M.RGBA,M.UNSIGNED_BYTE,r):M.texSubImage2D(M.TEXTURE_2D,0,H,Q,m,v,M.RGBA,M.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(r,l,f){const{context:m}=this,{gl:v}=m;v.bindTexture(v.TEXTURE_2D,this.texture),f!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=v.LINEAR),r!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,r),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,f||r),this.filter=r),l!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,l),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function _e(y){const{userImage:r}=y;return!!(r&&r.render&&r.render())&&(y.data.replace(new Uint8Array(r.data.buffer)),!0)}class de extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:l,promiseResolve:f}of this.requestors)f(this._getImagesForIds(l));this.requestors=[]}}getImage(r){const l=this.images[r];if(l&&!l.data&&l.spriteData){const f=l.spriteData;l.data=new u.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),l.spriteData=null}return l}addImage(r,l){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,l)&&(this.images[r]=l)}_validate(r,l){let f=!0;const m=l.data||l.spriteData;return this._validateStretch(l.stretchX,m&&m.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(l.stretchY,m&&m.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(l.content,l)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,l){if(!r)return!0;let f=0;for(const m of r){if(m[0]<f||m[1]<m[0]||l<m[1])return!1;f=m[1]}return!0}_validateContent(r,l){if(!r)return!0;if(r.length!==4)return!1;const f=l.spriteData,m=f&&f.width||l.data.width,v=f&&f.height||l.data.height;return!(r[0]<0||m<r[0]||r[1]<0||v<r[1]||r[2]<0||m<r[2]||r[3]<0||v<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,l,f=!0){const m=this.getImage(r);if(f&&(m.data.width!==l.data.width||m.data.height!==l.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=m.version+1,this.images[r]=l,this.updatedImages[r]=!0}removeImage(r){const l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((l,f)=>{let m=!0;if(!this.isLoaded())for(const v of r)this.images[v]||(m=!1);this.isLoaded()||m?l(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:l})})}_getImagesForIds(r){const l={};for(const f of r){let m=this.getImage(f);m||(this.fire(new u.k("styleimagemissing",{id:f})),m=this.getImage(f)),m?l[f]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:u.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:r,height:l}=this.atlasImage;return{width:r,height:l}}getPattern(r){const l=this.patterns[r],f=this.getImage(r);if(!f)return null;if(l&&l.position.version===f.version)return l.position;if(l)l.position.version=f.version;else{const m={w:f.data.width+2,h:f.data.height+2,x:0,y:0},v=new u.I(m,f);this.patterns[r]={bin:m,position:v}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new pe(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const v in this.patterns)r.push(this.patterns[v].bin);const{w:l,h:f}=u.p(r),m=this.atlasImage;m.resize({width:l||1,height:f||1});for(const v in this.patterns){const{bin:I}=this.patterns[v],P=I.x+1,M=I.y+1,H=this.getImage(v).data,Q=H.width,ne=H.height;u.R.copy(H,m,{x:0,y:0},{x:P,y:M},{width:Q,height:ne}),u.R.copy(H,m,{x:0,y:ne-1},{x:P,y:M-1},{width:Q,height:1}),u.R.copy(H,m,{x:0,y:0},{x:P,y:M+ne},{width:Q,height:1}),u.R.copy(H,m,{x:Q-1,y:0},{x:P-1,y:M},{width:1,height:ne}),u.R.copy(H,m,{x:0,y:0},{x:P+Q,y:M},{width:1,height:ne})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const l of r){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const f=this.getImage(l);f||u.w(`Image with ID: "${l}" was not found`),_e(f)&&this.updateImage(l,f)}}}const oe=1e20;function le(y,r,l,f,m,v,I,P,M){for(let H=r;H<r+f;H++)J(y,l*v+H,v,m,I,P,M);for(let H=l;H<l+m;H++)J(y,H*v+r,1,f,I,P,M)}function J(y,r,l,f,m,v,I){v[0]=0,I[0]=-oe,I[1]=oe,m[0]=y[r];for(let P=1,M=0,H=0;P<f;P++){m[P]=y[r+P*l];const Q=P*P;do{const ne=v[M];H=(m[P]-m[ne]+Q-ne*ne)/(P-ne)/2}while(H<=I[M]&&--M>-1);M++,v[M]=P,I[M]=H,I[M+1]=oe}for(let P=0,M=0;P<f;P++){for(;I[M+1]<P;)M++;const H=v[M],Q=P-H;y[r+P*l]=m[H]+Q*Q}}class te{constructor(r,l){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return u._(this,void 0,void 0,function*(){const l=[];for(const v in r)for(const I of r[v])l.push(this._getAndCacheGlyphsPromise(v,I));const f=yield Promise.all(l),m={};for(const{stack:v,id:I,glyph:P}of f)m[v]||(m[v]={}),m[v][I]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};return m})}_getAndCacheGlyphsPromise(r,l){return u._(this,void 0,void 0,function*(){let f=this.entries[r];f||(f=this.entries[r]={glyphs:{},requests:{},ranges:{}});let m=f.glyphs[l];if(m!==void 0)return{stack:r,id:l,glyph:m};if(m=this._tinySDF(f,r,l),m)return f.glyphs[l]=m,{stack:r,id:l,glyph:m};const v=Math.floor(l/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[v])return{stack:r,id:l,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[v]){const P=te.loadGlyphRange(r,v,this.url,this.requestManager);f.requests[v]=P}const I=yield f.requests[v];for(const P in I)this._doesCharSupportLocalGlyph(+P)||(f.glyphs[+P]=I[+P]);return f.ranges[v]=!0,{stack:r,id:l,glyph:I[l]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](r)||u.u["Hangul Syllables"](r)||u.u.Hiragana(r)||u.u.Katakana(r))}_tinySDF(r,l,f){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let v=r.tinySDF;if(!v){let P="400";/bold/i.test(l)?P="900":/medium/i.test(l)?P="500":/light/i.test(l)&&(P="200"),v=r.tinySDF=new te.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:P})}const I=v.draw(String.fromCharCode(f));return{id:f,bitmap:new u.o({width:I.width||60,height:I.height||60},I.data),metrics:{width:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:I.glyphAdvance/2||24,isDoubleResolution:!0}}}}te.loadGlyphRange=function(y,r,l,f){return u._(this,void 0,void 0,function*(){const m=256*r,v=m+255,I=f.transformRequest(l.replace("{fontstack}",y).replace("{range}",`${m}-${v}`),ie.Glyphs),P=yield u.l(I,new AbortController);if(!P||!P.data)throw new Error(`Could not load glyph range. range: ${r}, ${m}-${v}`);const M={};for(const H of u.n(P.data))M[H.id]=H;return M})},te.TinySDF=class{constructor({fontSize:y=24,buffer:r=3,radius:l=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:v="normal",fontStyle:I="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=l;const P=this.size=y+4*r,M=this._createCanvas(P),H=this.ctx=M.getContext("2d",{willReadFrequently:!0});H.font=`${I} ${v} ${y}px ${m}`,H.textBaseline="alphabetic",H.textAlign="left",H.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(y){const r=document.createElement("canvas");return r.width=r.height=y,r}draw(y){const{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:v}=this.ctx.measureText(y),I=Math.ceil(l),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-m))),M=Math.min(this.size-this.buffer,I+Math.ceil(f)),H=P+2*this.buffer,Q=M+2*this.buffer,ne=Math.max(H*Q,0),ge=new Uint8ClampedArray(ne),Me={data:ge,width:H,height:Q,glyphWidth:P,glyphHeight:M,glyphTop:I,glyphLeft:0,glyphAdvance:r};if(P===0||M===0)return Me;const{ctx:ke,buffer:Le,gridInner:Te,gridOuter:Xe}=this;ke.clearRect(Le,Le,P,M),ke.fillText(y,Le,Le+I);const rt=ke.getImageData(Le,Le,P,M);Xe.fill(oe,0,ne),Te.fill(0,0,ne);for(let je=0;je<M;je++)for(let Ke=0;Ke<P;Ke++){const it=rt.data[4*(je*P+Ke)+3]/255;if(it===0)continue;const ot=(je+Le)*H+Ke+Le;if(it===1)Xe[ot]=0,Te[ot]=oe;else{const ht=.5-it;Xe[ot]=ht>0?ht*ht:0,Te[ot]=ht<0?ht*ht:0}}le(Xe,0,0,H,Q,H,this.f,this.v,this.z),le(Te,Le,Le,P,M,H,this.f,this.v,this.z);for(let je=0;je<ne;je++){const Ke=Math.sqrt(Xe[je])-Math.sqrt(Te[je]);ge[je]=Math.round(255-255*(Ke/this.radius+this.cutoff))}return Me}};class he{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,l){return u.y(r.expression.evaluate(l))}interpolate(r,l,f){return{x:u.z.number(r.x,l.x,f),y:u.z.number(r.y,l.y,f),z:u.z.number(r.z,l.z,f)}}}let be;class Ee extends u.E{constructor(r){super(),be=be||new u.q({anchor:new u.D(u.v.light.anchor),position:new he,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(be),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,l={}){if(!this._validate(u.r,r,l))for(const f in r){const m=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,f){return(!f||f.validate!==!1)&&u.t(this,r.call(u.x,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}class Be{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,l){const f=r.join(",")+String(l);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,l)),this.dashEntry[f]}getDashRanges(r,l,f){const m=[];let v=r.length%2==1?-r[r.length-1]*f:0,I=r[0]*f,P=!0;m.push({left:v,right:I,isDash:P,zeroLength:r[0]===0});let M=r[0];for(let H=1;H<r.length;H++){P=!P;const Q=r[H];v=M*f,M+=Q,I=M*f,m.push({left:v,right:I,isDash:P,zeroLength:Q===0})}return m}addRoundDash(r,l,f){const m=l/2;for(let v=-f;v<=f;v++){const I=this.width*(this.nextRow+f+v);let P=0,M=r[P];for(let H=0;H<this.width;H++){H/M.right>1&&(M=r[++P]);const Q=Math.abs(H-M.left),ne=Math.abs(H-M.right),ge=Math.min(Q,ne);let Me;const ke=v/f*(m+1);if(M.isDash){const Le=m-Math.abs(ke);Me=Math.sqrt(ge*ge+Le*Le)}else Me=m-Math.sqrt(ge*ge+ke*ke);this.data[I+H]=Math.max(0,Math.min(255,Me+128))}}}addRegularDash(r){for(let P=r.length-1;P>=0;--P){const M=r[P],H=r[P+1];M.zeroLength?r.splice(P,1):H&&H.isDash===M.isDash&&(H.left=M.left,r.splice(P,1))}const l=r[0],f=r[r.length-1];l.isDash===f.isDash&&(l.left=f.left-this.width,f.right=l.right+this.width);const m=this.width*this.nextRow;let v=0,I=r[v];for(let P=0;P<this.width;P++){P/I.right>1&&(I=r[++v]);const M=Math.abs(P-I.left),H=Math.abs(P-I.right),Q=Math.min(M,H);this.data[m+P]=Math.max(0,Math.min(255,(I.isDash?Q:-Q)+128))}}addDash(r,l){const f=l?7:0,m=2*f+1;if(this.nextRow+m>this.height)return u.w("LineAtlas out of space"),null;let v=0;for(let P=0;P<r.length;P++)v+=r[P];if(v!==0){const P=this.width/v,M=this.getDashRanges(r,this.width,P);l?this.addRoundDash(M,P,f):this.addRegularDash(M)}const I={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:v};return this.nextRow+=m,this.dirty=!0,I}bind(r){const l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const Pe="maplibre_preloaded_worker_pool";class ze{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<ze.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Pe]}numActive(){return Object.keys(this.active).length}}const We=Math.floor(w.hardwareConcurrency/2);let He,nt;function dt(){return He||(He=new ze),He}ze.workerCount=u.B(globalThis)?Math.max(Math.min(We,3),1):1;class wt{constructor(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l;const f=this.workerPool.acquire(l);for(let m=0;m<f.length;m++){const v=new u.C(f[m],l);v.name=`Worker ${m}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,l){const f=[];for(const m of this.actors)f.push(m.sendAsync({type:r,data:l}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,l){for(const f of this.actors)f.registerMessageHandler(r,l)}}function Mt(){return nt||(nt=new wt(dt(),u.G),nt.registerMessageHandler("getResource",(y,r,l)=>u.m(r,l))),nt}function gt(y,r){const l=u.F();return u.H(l,l,[1,1,0]),u.J(l,l,[.5*y.width,.5*y.height,1]),u.K(l,l,y.calculatePosMatrix(r.toUnwrapped()))}function Tt(y,r,l,f,m,v){const I=function(ne,ge,Me){if(ne)for(const ke of ne){const Le=ge[ke];if(Le&&Le.source===Me&&Le.type==="fill-extrusion")return!0}else for(const ke in ge){const Le=ge[ke];if(Le.source===Me&&Le.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,y.id),P=v.maxPitchScaleFactor(),M=y.tilesIn(f,P,I);M.sort($t);const H=[];for(const ne of M)H.push({wrappedTileID:ne.tileID.wrapped().key,queryResults:ne.tile.queryRenderedFeatures(r,l,y._state,ne.queryGeometry,ne.cameraQueryGeometry,ne.scale,m,v,P,gt(y.transform,ne.tileID))});const Q=function(ne){const ge={},Me={};for(const ke of ne){const Le=ke.queryResults,Te=ke.wrappedTileID,Xe=Me[Te]=Me[Te]||{};for(const rt in Le){const je=Le[rt],Ke=Xe[rt]=Xe[rt]||{},it=ge[rt]=ge[rt]||[];for(const ot of je)Ke[ot.featureIndex]||(Ke[ot.featureIndex]=!0,it.push(ot))}}return ge}(H);for(const ne in Q)Q[ne].forEach(ge=>{const Me=ge.feature,ke=y.getFeatureState(Me.layer["source-layer"],Me.id);Me.source=Me.layer.source,Me.layer["source-layer"]&&(Me.sourceLayer=Me.layer["source-layer"]),Me.state=ke});return Q}function $t(y,r){const l=y.tileID,f=r.tileID;return l.overscaledZ-f.overscaledZ||l.canonical.y-f.canonical.y||l.wrap-f.wrap||l.canonical.x-f.canonical.x}function Vt(y,r,l){return u._(this,void 0,void 0,function*(){let f=y;if(y.url?f=(yield u.h(r.transformRequest(y.url,ie.Source),l)).data:yield w.frameAsync(l),!f)return null;const m=u.L(u.e(f,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(m.vectorLayerIds=f.vector_layers.map(v=>v.id)),m})}class Zt{constructor(r,l){r&&(l?this.setSouthWest(r).setNorthEast(l):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.M?new u.M(r.lng,r.lat):u.M.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.M?new u.M(r.lng,r.lat):u.M.convert(r),this}extend(r){const l=this._sw,f=this._ne;let m,v;if(r instanceof u.M)m=r,v=r;else{if(!(r instanceof Zt))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Zt.convert(r)):this.extend(u.M.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.M.convert(r)):this;if(m=r._sw,v=r._ne,!m||!v)return this}return l||f?(l.lng=Math.min(m.lng,l.lng),l.lat=Math.min(m.lat,l.lat),f.lng=Math.max(v.lng,f.lng),f.lat=Math.max(v.lat,f.lat)):(this._sw=new u.M(m.lng,m.lat),this._ne=new u.M(v.lng,v.lat)),this}getCenter(){return new u.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.M(this.getWest(),this.getNorth())}getSouthEast(){return new u.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:l,lat:f}=u.M.convert(r);let m=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(r){return r instanceof Zt?r:r&&new Zt(r)}static fromLngLat(r,l=0){const f=360*l/40075017,m=f/Math.cos(Math.PI/180*r.lat);return new Zt(new u.M(r.lng-m,r.lat-f),new u.M(r.lng+m,r.lat+f))}}class En{constructor(r,l,f){this.bounds=Zt.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const l=Math.pow(2,r.z),f=Math.floor(u.N(this.bounds.getWest())*l),m=Math.floor(u.O(this.bounds.getNorth())*l),v=Math.ceil(u.N(this.bounds.getEast())*l),I=Math.ceil(u.O(this.bounds.getSouth())*l);return r.x>=f&&r.x<v&&r.y>=m&&r.y<I}}class et extends u.E{constructor(r,l,f,m){if(super(),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.L(l,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Vt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(u.e(this,r),r.bounds&&(this.tileBounds=new En(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(l,ie.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request.collectResourceTiming=this._collectResourceTiming;let m="reloadTile";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((v,I)=>{r.reloadPromise={resolve:v,reject:I}})}else r.actor=this.dispatcher.getActor(),m="loadTile";r.abortController=new AbortController;try{const v=yield r.actor.sendAsync({type:m,data:f},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,v)}catch(v){if(delete r.abortController,r.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,l){if(l&&l.resourceTiming&&(r.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&r.setExpiryData(l),r.loadVectorData(l,this.map.painter),r.reloadPromise){const f=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(f.resolve).catch(f.reject)}}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"abortTile",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"removeTile",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class sn extends u.E{constructor(r,l,f,m){super(),this.id=r,this.dispatcher=f,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},l),u.e(this,u.L(l,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Vt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new En(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const f=yield $.getImage(this.map._requestManager.transformRequest(l,ie.Tile),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&r.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const m=this.map.painter.context,v=m.gl,I=f.data;r.texture=this.map.painter.getTileTexture(I.width),r.texture?r.texture.update(I,{useMipmap:!0}):(r.texture=new pe(m,I,v.RGBA,{useMipmap:!0}),r.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),m.extTextureFilterAnisotropic&&v.texParameterf(v.TEXTURE_2D,m.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,m.extTextureFilterAnisotropicMax)),r.state="loaded"}}catch(f){if(delete r.abortController,r.aborted)r.state="unloaded";else if(f)throw r.state="errored",f}})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Sn extends sn{constructor(r,l,f,m){super(r,l,f,m),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(l,ie.Tile);r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const m=yield $.getImage(f,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(m&&m.data){const v=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&r.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const I=u.b(v)&&u.S()?v:yield this.readImageNow(v),P={type:this.type,uid:r.uid,source:this.id,rawImageData:I,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const M=yield r.actor.sendAsync({type:"loadDEMTile",data:P});r.dem=M,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(m){if(delete r.abortController,r.aborted)r.state="unloaded";else if(m)throw r.state="errored",m}})}readImageNow(r){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.U()){const l=r.width+2,f=r.height+2;try{return new u.R({width:l,height:f},yield u.V(r,-1,-1,l,f))}catch{}}return w.getImageData(r,1)})}_getNeighboringTiles(r){const l=r.canonical,f=Math.pow(2,l.z),m=(l.x-1+f)%f,v=l.x===0?r.wrap-1:r.wrap,I=(l.x+1+f)%f,P=l.x+1===f?r.wrap+1:r.wrap,M={};return M[new u.Q(r.overscaledZ,v,l.z,m,l.y).key]={backfilled:!1},M[new u.Q(r.overscaledZ,P,l.z,I,l.y).key]={backfilled:!1},l.y>0&&(M[new u.Q(r.overscaledZ,v,l.z,m,l.y-1).key]={backfilled:!1},M[new u.Q(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},M[new u.Q(r.overscaledZ,P,l.z,I,l.y-1).key]={backfilled:!1}),l.y+1<f&&(M[new u.Q(r.overscaledZ,v,l.z,m,l.y+1).key]={backfilled:!1},M[new u.Q(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},M[new u.Q(r.overscaledZ,P,l.z,I,l.y+1).key]={backfilled:!1}),M}unloadTile(r){return u._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"removeDEMTile",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class we extends u.E{constructor(r,l,f,m){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(m),this._data=l.data,this._options=u.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const v=u.W/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*v,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*v,extent:u.W,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:u.W,radius:(l.clusterRadius||50)*v,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"getClusterExpansionZoom",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"getClusterChildren",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,l,f){return this.actor.sendAsync({type:"getClusterLeaves",data:{type:this.type,source:this.id,clusterId:r,limit:l,offset:f}})}_updateWorkerData(r){return u._(this,void 0,void 0,function*(){const l=u.e({type:this.type},this.workerOptions);r?l.dataDiff=r:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(w.resolveURL(this._data),ie.Source),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const f=yield this.actor.sendAsync({type:"loadData",data:l});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let m=null;f.resourceTiming&&f.resourceTiming[this.id]&&(m=f.resourceTiming[this.id].slice(0));const v={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&u.e(v,{resourceTiming:m}),this.fire(new u.k("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(f))}})}loaded(){return this._pendingLoads===0}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const f={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const m=yield this.actor.sendAsync({type:l,data:f},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(m,this.map.painter,l==="reloadTile")})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"removeTile",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"removeSource",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var N=u.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class D extends u.E{constructor(r,l,f,m){super(),this.id=r,this.dispatcher=f,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=l}load(r){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield $.getImage(this.map._requestManager.transformRequest(this.url,ie.Image),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,r&&(this.coordinates=r),this._finishLoading())}catch(l){this._request=null,this.fire(new u.j(l))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const l=r.map(u.Y.fromLngLat);this.tileID=function(m){let v=1/0,I=1/0,P=-1/0,M=-1/0;for(const ge of m)v=Math.min(v,ge.x),I=Math.min(I,ge.y),P=Math.max(P,ge.x),M=Math.max(M,ge.y);const H=Math.max(P-v,M-I),Q=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),ne=Math.pow(2,Q);return new u.a0(Q,Math.floor((v+P)/2*ne),Math.floor((I+M)/2*ne))}(l),this.minzoom=this.maxzoom=this.tileID.z;const f=l.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new u.Z,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,u.W,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,u.W),this._boundsArray.emplaceBack(f[2].x,f[2].y,u.W,u.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new pe(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let f=!1;for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class xe extends D{constructor(r,l,f,m){super(r,l,f,m),this.roundZoom=!0,this.type="video",this.options=l}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const l of r.urls)this.urls.push(this.map._requestManager.transformRequest(l,ie.Source).url);try{const l=yield u.a2(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new u.j(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new u.j(new u.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new pe(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let f=!1;for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ze extends D{constructor(r,l,f,m){super(r,l,f,m),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(I=>typeof I!="number"))||this.fire(new u.j(new u.a1(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a1(`sources.${r}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new u.j(new u.a1(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a1(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a1(`sources.${r}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,f=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new pe(l,this.canvas,f.RGBA,{premultiply:!0});let m=!1;for(const v in this.tiles){const I=this.tiles[v];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,m=!0)}m&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Qe={},ct=y=>{switch(y){case"geojson":return we;case"image":return D;case"raster":return sn;case"raster-dem":return Sn;case"vector":return et;case"video":return xe;case"canvas":return Ze}return Qe[y]},ae="RTLPluginLoaded";class R extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Mt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:r,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return u._(this,arguments,void 0,function*(l,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=w.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(ae))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let z=null;function Se(){return z||(z=new R),z}class Ve{constructor(r,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a3(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const l=r+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,l,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,v){const I={};if(!v)return I;for(const P of m){const M=P.layerIds.map(H=>v.getLayer(H)).filter(Boolean);if(M.length!==0){P.layers=M,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(H=>M.filter(Q=>Q.id===H)[0]));for(const H of M)I[H.id]=P}}return I}(r.buckets,l.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const v=this.buckets[m];if(v instanceof u.a5){if(this.hasSymbolBuckets=!0,!f)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const v=this.buckets[m];if(v instanceof u.a5&&v.hasRTLText){this.hasRTLText=!0,Se().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const v=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(m).queryRadius(v))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a4}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const m=this.buckets[f];m.uploadPending()&&m.upload(r)}const l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new pe(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new pe(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,f,m,v,I,P,M,H,Q){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:v,scale:I,tileSize:this.tileSize,pixelPosMatrix:Q,transform:M,params:P,queryPadding:this.queryPadding*H},r,l,f):{}}querySourceFeatures(r,l){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const m=f.loadVTLayers(),v=l&&l.sourceLayer?l.sourceLayer:"",I=m._geojsonTileLayer||m[v];if(!I)return;const P=u.a6(l&&l.filter),{z:M,x:H,y:Q}=this.tileID.canonical,ne={z:M,x:H,y:Q};for(let ge=0;ge<I.length;ge++){const Me=I.feature(ge);if(P.needGeometry){const Te=u.a7(Me,!0);if(!P.filter(new u.a8(this.tileID.overscaledZ),Te,this.tileID.canonical))continue}else if(!P.filter(new u.a8(this.tileID.overscaledZ),Me))continue;const ke=f.getId(Me,v),Le=new u.a9(Me,M,H,Q,ke);Le.tile=ne,r.push(Le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const l=this.expirationTime;if(r.cacheControl){const f=u.aa(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let m=!1;if(this.expirationTime>f)m=!1;else if(l)if(this.expirationTime<l)m=!0;else{const v=this.expirationTime-l;v?this.expirationTime=f+Math.max(v,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!l.style.hasLayer(m))continue;const v=this.buckets[m],I=v.layers[0].sourceLayer||"_geojsonTileLayer",P=f[I],M=r[I];if(!P||!M||Object.keys(M).length===0)continue;v.update(M,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const H=l&&l.style&&l.style.getLayer(m);H&&(this.queryPadding=Math.max(this.queryPadding,H.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<w.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=w.now()+r}setDependencies(r,l){const f={};for(const m of l)f[m]=!0;this.dependencies[r]=f}hasDependency(r,l){for(const f of r){const m=this.dependencies[f];if(m){for(const v of l)if(m[v])return!0}}return!1}}class tt{constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(const r in this.data)for(const l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,f){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const v={value:l,timeout:void 0};if(f!==void 0&&(v.timeout=setTimeout(()=>{this.remove(r,v)},f)),this.data[m].push(v),this.order.push(m),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){const l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;const f=r.wrapped().key,m=l===void 0?0:this.data[f].indexOf(l),v=this.data[f][m];return this.data[f].splice(m,1),v.timeout&&clearTimeout(v.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(v.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){const l=[];for(const f in this.data)for(const m of this.data[f])r(m.value)||l.push(m);for(const f of l)this.remove(f.value.tileID,f)}}class at{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,f){const m=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},u.e(this.stateChanges[r][m],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const v in this.state[r])v!==m&&(this.deletedStates[r][v]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const v in this.state[r][m])f[v]||(this.deletedStates[r][m][v]=null)}else for(const v in f)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][v]===null&&delete this.deletedStates[r][m][v]}removeFeatureState(r,l,f){if(this.deletedStates[r]===null)return;const m=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&l!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][f]=null);else if(l!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(f in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][f]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,l){const f=String(l),m=u.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const v=this.deletedStates[r][l];if(v===null)return{};for(const I in v)delete m[I]}return m}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){const f={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const v={};for(const I in this.stateChanges[m])this.state[m][I]||(this.state[m][I]={}),u.e(this.state[m][I],this.stateChanges[m][I]),v[I]=this.state[m][I];f[m]=v}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const v={};if(this.deletedStates[m]===null)for(const I in this.state[m])v[I]={},this.state[m][I]={};else for(const I in this.deletedStates[m]){if(this.deletedStates[m][I]===null)this.state[m][I]={};else for(const P of Object.keys(this.deletedStates[m][I]))delete this.state[m][I][P];v[I]=this.state[m][I]}f[m]=f[m]||{},u.e(f[m],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const m in r)r[m].setFeatureState(f,l)}}class st extends u.E{constructor(r,l,f){super(),this.id=r,this.dispatcher=f,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,v,I,P)=>{const M=new(ct(v.type))(m,v,I,P);if(M.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${M.id}`);return M})(r,l,f,this),this._tiles={},this._cache=new tt(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new at,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,l,f){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,l,f)}catch(m){r.state="errored",m.status!==404?this._source.fire(new u.j(m,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const f=this._tiles[l];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Dt).map(r=>r.key)}getRenderableIds(r){const l=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&l.push(this._tiles[f]);return r?l.sort((f,m)=>{const v=f.tileID,I=m.tileID,P=new u.P(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),M=new u.P(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-I.overscaledZ||M.y-P.y||M.x-P.x}).map(f=>f.tileID.key):l.map(f=>f.tileID).sort(Dt).map(f=>f.key)}hasRenderableParent(r){const l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,l){return u._(this,void 0,void 0,function*(){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=l),yield this._loadTile(f,r,l))})}_tileLoaded(r,l,f){r.timeAdded=w.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const l=this.getRenderableIds();for(let m=0;m<l.length;m++){const v=l[m];if(r.neighboringTiles&&r.neighboringTiles[v]){const I=this.getTileByID(v);f(r,I),f(I,r)}}function f(m,v){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let I=v.tileID.canonical.x-m.tileID.canonical.x;const P=v.tileID.canonical.y-m.tileID.canonical.y,M=Math.pow(2,m.tileID.canonical.z),H=v.tileID.key;I===0&&P===0||Math.abs(P)>1||(Math.abs(I)>1&&(Math.abs(I+M)===1?I+=M:Math.abs(I-M)===1&&(I-=M)),v.dem&&m.dem&&(m.dem.backfillBorder(v.dem,I,P),m.neighboringTiles&&m.neighboringTiles[H]&&(m.neighboringTiles[H].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,f,m){for(const v in this._tiles){let I=this._tiles[v];if(m[v]||!I.hasData()||I.tileID.overscaledZ<=l||I.tileID.overscaledZ>f)continue;let P=I.tileID;for(;I&&I.tileID.overscaledZ>l+1;){const H=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[H.key],I&&I.hasData()&&(P=H)}let M=P;for(;M.overscaledZ>l;)if(M=M.scaledTo(M.overscaledZ-1),r[M.key]){m[P.key]=P;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=l?f:null}for(let f=r.overscaledZ-1;f>=l;f--){const m=r.scaledTo(f),v=this._getLoadedTile(m);if(v)return v}}_getLoadedTile(r){const l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const l=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(l*f*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(v)}handleWrapJump(r){const l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){const f={};for(const m in this._tiles){const v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+l),f[v.tileID.key]=v}this._tiles=f;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(r,l){if(this.transform=r,this.terrain=l,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(Q=>new u.Q(Q.canonical.z,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l}),this._source.hasTile&&(f=f.filter(Q=>this._source.hasTile(Q)))):f=[];const m=r.coveringZoomLevel(this._source),v=Math.max(m-st.maxOverzooming,this._source.minzoom),I=Math.max(m+st.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Q={};for(const ne of f)if(ne.canonical.z>this._source.minzoom){const ge=ne.scaledTo(ne.canonical.z-1);Q[ge.key]=ge;const Me=ne.scaledTo(Math.max(this._source.minzoom,Math.min(ne.canonical.z,5)));Q[Me.key]=Me}f=f.concat(Object.values(Q))}const P=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(f,m);if(Rt(this._source.type)){const Q={},ne={},ge=Object.keys(M),Me=w.now();for(const ke of ge){const Le=M[ke],Te=this._tiles[ke];if(!Te||Te.fadeEndTime!==0&&Te.fadeEndTime<=Me)continue;const Xe=this.findLoadedParent(Le,v);Xe&&(this._addTile(Xe.tileID),Q[Xe.tileID.key]=Xe.tileID),ne[ke]=Le}this._retainLoadedChildren(ne,m,I,M);for(const ke in Q)M[ke]||(this._coveredTiles[ke]=!0,M[ke]=Q[ke]);if(l){const ke={},Le={};for(const Te of f)this._tiles[Te.key].hasData()?ke[Te.key]=Te:Le[Te.key]=Te;for(const Te in Le){const Xe=Le[Te].children(this._source.maxzoom);this._tiles[Xe[0].key]&&this._tiles[Xe[1].key]&&this._tiles[Xe[2].key]&&this._tiles[Xe[3].key]&&(ke[Xe[0].key]=M[Xe[0].key]=Xe[0],ke[Xe[1].key]=M[Xe[1].key]=Xe[1],ke[Xe[2].key]=M[Xe[2].key]=Xe[2],ke[Xe[3].key]=M[Xe[3].key]=Xe[3],delete Le[Te])}for(const Te in Le){const Xe=this.findLoadedParent(Le[Te],this._source.minzoom);if(Xe){ke[Xe.tileID.key]=M[Xe.tileID.key]=Xe.tileID;for(const rt in ke)ke[rt].isChildOf(Xe.tileID)&&delete ke[rt]}}for(const Te in this._tiles)ke[Te]||(this._coveredTiles[Te]=!0)}}for(const Q in M)this._tiles[Q].clearFadeHold();const H=u.ab(this._tiles,M);for(const Q of H){const ne=this._tiles[Q];ne.hasSymbolBuckets&&!ne.holdingForFade()?ne.setHoldDuration(this.map._fadeDuration):ne.hasSymbolBuckets&&!ne.symbolFadeFinished()||this._removeTile(Q)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,l){const f={},m={},v=Math.max(l-st.maxOverzooming,this._source.minzoom),I=Math.max(l+st.maxUnderzooming,this._source.minzoom),P={};for(const M of r){const H=this._addTile(M);f[M.key]=M,H.hasData()||l<this._source.maxzoom&&(P[M.key]=M)}this._retainLoadedChildren(P,l,I,f);for(const M of r){let H=this._tiles[M.key];if(H.hasData())continue;if(l+1>this._source.maxzoom){const ne=M.children(this._source.maxzoom)[0],ge=this.getTile(ne);if(ge&&ge.hasData()){f[ne.key]=ne;continue}}else{const ne=M.children(this._source.maxzoom);if(f[ne[0].key]&&f[ne[1].key]&&f[ne[2].key]&&f[ne[3].key])continue}let Q=H.wasRequested();for(let ne=M.overscaledZ-1;ne>=v;--ne){const ge=M.scaledTo(ne);if(m[ge.key])break;if(m[ge.key]=!0,H=this.getTile(ge),!H&&Q&&(H=this._addTile(ge)),H){const Me=H.hasData();if((Q||Me)&&(f[ge.key]=ge),Q=H.wasRequested(),Me)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const l=[];let f,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){f=this._loadedParentTiles[m.key];break}l.push(m.key);const v=m.scaledTo(m.overscaledZ-1);if(f=this._getLoadedTile(v),f)break;m=v}for(const v of l)this._loadedParentTiles[v]=f}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));const f=l;return l||(l=new Ve(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,r.key,l.state)),l.uses++,this._tiles[r.key]=l,f||this._source.fire(new u.k("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=l.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){const l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,l,f){const m=[],v=this.transform;if(!v)return m;const I=f?v.getCameraQueryGeometry(r):r,P=r.map(ke=>v.pointCoordinate(ke,this.terrain)),M=I.map(ke=>v.pointCoordinate(ke,this.terrain)),H=this.getIds();let Q=1/0,ne=1/0,ge=-1/0,Me=-1/0;for(const ke of M)Q=Math.min(Q,ke.x),ne=Math.min(ne,ke.y),ge=Math.max(ge,ke.x),Me=Math.max(Me,ke.y);for(let ke=0;ke<H.length;ke++){const Le=this._tiles[H[ke]];if(Le.holdingForFade())continue;const Te=Le.tileID,Xe=Math.pow(2,v.zoom-Le.tileID.overscaledZ),rt=l*Le.queryPadding*u.W/Le.tileSize/Xe,je=[Te.getTilePoint(new u.Y(Q,ne)),Te.getTilePoint(new u.Y(ge,Me))];if(je[0].x-rt<u.W&&je[0].y-rt<u.W&&je[1].x+rt>=0&&je[1].y+rt>=0){const Ke=P.map(ot=>Te.getTilePoint(ot)),it=M.map(ot=>Te.getTilePoint(ot));m.push({tile:Le,tileID:Te,queryGeometry:Ke,cameraQueryGeometry:it,scale:Xe})}}return m}getVisibleCoordinates(r){const l=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(const f of l)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(Rt(this._source.type)){const r=w.now();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=r)return!0}return!1}setFeatureState(r,l,f){this._state.updateState(r=r||"_geojsonTileLayer",l,f)}removeFeatureState(r,l,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,f)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,f){const m=this._tiles[r];m&&m.setDependencies(l,f)}reloadTilesForDependencies(r,l){for(const f in this._tiles)this._tiles[f].hasDependency(r,l)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,l))}}function Dt(y,r){const l=Math.abs(2*y.wrap)-+(y.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return y.overscaledZ-r.overscaledZ||f-l||r.canonical.y-y.canonical.y||r.canonical.x-y.canonical.x}function Rt(y){return y==="raster"||y==="image"||y==="video"}st.maxOverzooming=10,st.maxUnderzooming=3;class _n{constructor(r,l){this.reset(r,l)}reset(r,l){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ac(r,0,1);let l=1,f=this._distances[l];const m=r*this.paddedLength+this.padding;for(;f<m&&l<this._distances.length;)f=this._distances[++l];const v=l-1,I=this._distances[v],P=f-I,M=P>0?(m-I)/P:0;return this.points[v].mult(1-M).add(this.points[l].mult(M))}}function vn(y,r){let l=!0;return y==="always"||y!=="never"&&r!=="never"||(l=!1),l}class an{constructor(r,l,f){const m=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(l/f);for(let I=0;I<this.xCellCount*this.yCellCount;I++)m.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,l,f,m,v){this._forEachCell(l,f,m,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(v)}insertCircle(r,l,f,m){this._forEachCell(l-m,f-m,l+m,f+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(f),this.circles.push(m)}_insertBoxCell(r,l,f,m,v,I){this.boxCells[v].push(I)}_insertCircleCell(r,l,f,m,v,I){this.circleCells[v].push(I)}_query(r,l,f,m,v,I,P){if(f<0||r>this.width||m<0||l>this.height)return[];const M=[];if(r<=0&&l<=0&&this.width<=f&&this.height<=m){if(v)return[{key:null,x1:r,y1:l,x2:f,y2:m}];for(let H=0;H<this.boxKeys.length;H++)M.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(let H=0;H<this.circleKeys.length;H++){const Q=this.circles[3*H],ne=this.circles[3*H+1],ge=this.circles[3*H+2];M.push({key:this.circleKeys[H],x1:Q-ge,y1:ne-ge,x2:Q+ge,y2:ne+ge})}}else this._forEachCell(r,l,f,m,this._queryCell,M,{hitTest:v,overlapMode:I,seenUids:{box:{},circle:{}}},P);return M}query(r,l,f,m){return this._query(r,l,f,m,!1,null)}hitTest(r,l,f,m,v,I){return this._query(r,l,f,m,!0,v,I).length>0}hitTestCircle(r,l,f,m,v){const I=r-f,P=r+f,M=l-f,H=l+f;if(P<0||I>this.width||H<0||M>this.height)return!1;const Q=[];return this._forEachCell(I,M,P,H,this._queryCellCircle,Q,{hitTest:!0,overlapMode:m,circle:{x:r,y:l,radius:f},seenUids:{box:{},circle:{}}},v),Q.length>0}_queryCell(r,l,f,m,v,I,P,M){const{seenUids:H,hitTest:Q,overlapMode:ne}=P,ge=this.boxCells[v];if(ge!==null){const ke=this.bboxes;for(const Le of ge)if(!H.box[Le]){H.box[Le]=!0;const Te=4*Le,Xe=this.boxKeys[Le];if(r<=ke[Te+2]&&l<=ke[Te+3]&&f>=ke[Te+0]&&m>=ke[Te+1]&&(!M||M(Xe))&&(!Q||!vn(ne,Xe.overlapMode))&&(I.push({key:Xe,x1:ke[Te],y1:ke[Te+1],x2:ke[Te+2],y2:ke[Te+3]}),Q))return!0}}const Me=this.circleCells[v];if(Me!==null){const ke=this.circles;for(const Le of Me)if(!H.circle[Le]){H.circle[Le]=!0;const Te=3*Le,Xe=this.circleKeys[Le];if(this._circleAndRectCollide(ke[Te],ke[Te+1],ke[Te+2],r,l,f,m)&&(!M||M(Xe))&&(!Q||!vn(ne,Xe.overlapMode))){const rt=ke[Te],je=ke[Te+1],Ke=ke[Te+2];if(I.push({key:Xe,x1:rt-Ke,y1:je-Ke,x2:rt+Ke,y2:je+Ke}),Q)return!0}}}return!1}_queryCellCircle(r,l,f,m,v,I,P,M){const{circle:H,seenUids:Q,overlapMode:ne}=P,ge=this.boxCells[v];if(ge!==null){const ke=this.bboxes;for(const Le of ge)if(!Q.box[Le]){Q.box[Le]=!0;const Te=4*Le,Xe=this.boxKeys[Le];if(this._circleAndRectCollide(H.x,H.y,H.radius,ke[Te+0],ke[Te+1],ke[Te+2],ke[Te+3])&&(!M||M(Xe))&&!vn(ne,Xe.overlapMode))return I.push(!0),!0}}const Me=this.circleCells[v];if(Me!==null){const ke=this.circles;for(const Le of Me)if(!Q.circle[Le]){Q.circle[Le]=!0;const Te=3*Le,Xe=this.circleKeys[Le];if(this._circlesCollide(ke[Te],ke[Te+1],ke[Te+2],H.x,H.y,H.radius)&&(!M||M(Xe))&&!vn(ne,Xe.overlapMode))return I.push(!0),!0}}}_forEachCell(r,l,f,m,v,I,P,M){const H=this._convertToXCellCoord(r),Q=this._convertToYCellCoord(l),ne=this._convertToXCellCoord(f),ge=this._convertToYCellCoord(m);for(let Me=H;Me<=ne;Me++)for(let ke=Q;ke<=ge;ke++)if(v.call(this,r,l,f,m,this.xCellCount*ke+Me,I,P,M))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,l,f,m,v,I){const P=m-r,M=v-l,H=f+I;return H*H>P*P+M*M}_circleAndRectCollide(r,l,f,m,v,I,P){const M=(I-m)/2,H=Math.abs(r-(m+M));if(H>M+f)return!1;const Q=(P-v)/2,ne=Math.abs(l-(v+Q));if(ne>Q+f)return!1;if(H<=M||ne<=Q)return!0;const ge=H-M,Me=ne-Q;return ge*ge+Me*Me<=f*f}}function mi(y,r,l,f,m){const v=u.F();return r?(u.J(v,v,[1/m,1/m,1]),l||u.ad(v,v,f.angle)):u.K(v,f.labelPlaneMatrix,y),v}function gi(y,r,l,f,m){if(r){const v=u.ae(y);return u.J(v,v,[m,m,1]),l||u.ad(v,v,-f.angle),v}return f.glCoordMatrix}function Ae(y,r,l){let f;l?(f=[y.x,y.y,l(y.x,y.y),1],u.af(f,f,r)):(f=[y.x,y.y,0,1],ln(f,f,r));const m=f[3];return{point:new u.P(f[0]/m,f[1]/m),signedDistanceFromCamera:m}}function re(y,r){return .5+y/r*.5}function ue(y,r){const l=y[0]/y[3],f=y[1]/y[3];return l>=-r[0]&&l<=r[0]&&f>=-r[1]&&f<=r[1]}function me(y,r,l,f,m,v,I,P,M,H){const Q=f?y.textSizeData:y.iconSizeData,ne=u.ag(Q,l.transform.zoom),ge=[256/l.width*2+1,256/l.height*2+1],Me=f?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Me.clear();const ke=y.lineVertexArray,Le=f?y.text.placedSymbolArray:y.icon.placedSymbolArray,Te=l.transform.width/l.transform.height;let Xe=!1;for(let rt=0;rt<Le.length;rt++){const je=Le.get(rt);if(je.hidden||je.writingMode===u.ah.vertical&&!Xe){Gt(je.numGlyphs,Me);continue}let Ke;if(Xe=!1,H?(Ke=[je.anchorX,je.anchorY,H(je.anchorX,je.anchorY),1],u.af(Ke,Ke,r)):(Ke=[je.anchorX,je.anchorY,0,1],ln(Ke,Ke,r)),!ue(Ke,ge)){Gt(je.numGlyphs,Me);continue}const it=re(l.transform.cameraToCenterDistance,Ke[3]),ot=u.ai(Q,ne,je),ht=I?ot/it:ot*it,St=new u.P(je.anchorX,je.anchorY),xt=Ae(St,m,H).point,bt={projections:{},offsets:{}},Bt=Oe(je,ht,!1,P,r,m,v,y.glyphOffsetArray,ke,Me,xt,St,bt,Te,M,H);Xe=Bt.useVertical,(Bt.notEnoughRoom||Xe||Bt.needsFlipping&&Oe(je,ht,!0,P,r,m,v,y.glyphOffsetArray,ke,Me,xt,St,bt,Te,M,H).notEnoughRoom)&&Gt(je.numGlyphs,Me)}f?y.text.dynamicLayoutVertexBuffer.updateData(Me):y.icon.dynamicLayoutVertexBuffer.updateData(Me)}function Ie(y,r,l,f,m,v,I,P,M,H,Q,ne,ge){const Me=P.glyphStartIndex+P.numGlyphs,ke=P.lineStartIndex,Le=P.lineStartIndex+P.lineLength,Te=r.getoffsetX(P.glyphStartIndex),Xe=r.getoffsetX(Me-1),rt=ut(y*Te,l,f,m,v,I,P.segment,ke,Le,M,H,Q,ne,ge);if(!rt)return null;const je=ut(y*Xe,l,f,m,v,I,P.segment,ke,Le,M,H,Q,ne,ge);return je?{first:rt,last:je}:null}function Ne(y,r,l,f){return y===u.ah.horizontal&&Math.abs(l.y-r.y)>Math.abs(l.x-r.x)*f?{useVertical:!0}:(y===u.ah.vertical?r.y<l.y:r.x>l.x)?{needsFlipping:!0}:null}function Oe(y,r,l,f,m,v,I,P,M,H,Q,ne,ge,Me,ke,Le){const Te=r/24,Xe=y.lineOffsetX*Te,rt=y.lineOffsetY*Te;let je;if(y.numGlyphs>1){const Ke=y.glyphStartIndex+y.numGlyphs,it=y.lineStartIndex,ot=y.lineStartIndex+y.lineLength,ht=Ie(Te,P,Xe,rt,l,Q,ne,y,M,v,ge,ke,Le);if(!ht)return{notEnoughRoom:!0};const St=Ae(ht.first.point,I,Le).point,xt=Ae(ht.last.point,I,Le).point;if(f&&!l){const bt=Ne(y.writingMode,St,xt,Me);if(bt)return bt}je=[ht.first];for(let bt=y.glyphStartIndex+1;bt<Ke-1;bt++)je.push(ut(Te*P.getoffsetX(bt),Xe,rt,l,Q,ne,y.segment,it,ot,M,v,ge,ke,Le));je.push(ht.last)}else{if(f&&!l){const it=Ae(ne,m,Le).point,ot=y.lineStartIndex+y.segment+1,ht=new u.P(M.getx(ot),M.gety(ot)),St=Ae(ht,m,Le),xt=St.signedDistanceFromCamera>0?St.point:$e(ne,ht,it,1,m,Le),bt=Ne(y.writingMode,it,xt,Me);if(bt)return bt}const Ke=ut(Te*P.getoffsetX(y.glyphStartIndex),Xe,rt,l,Q,ne,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,M,v,ge,ke,Le);if(!Ke)return{notEnoughRoom:!0};je=[Ke]}for(const Ke of je)u.aj(H,Ke.point,Ke.angle);return{}}function $e(y,r,l,f,m,v){const I=Ae(y.add(y.sub(r)._unit()),m,v).point,P=l.sub(I);return l.add(P._mult(f/P.mag()))}function Fe(y,r){const{projectionCache:l,lineVertexArray:f,labelPlaneMatrix:m,tileAnchorPoint:v,distanceFromAnchor:I,getElevation:P,previousVertex:M,direction:H,absOffsetX:Q}=r;if(l.projections[y])return l.projections[y];const ne=new u.P(f.getx(y),f.gety(y)),ge=Ae(ne,m,P);if(ge.signedDistanceFromCamera>0)return l.projections[y]=ge.point,ge.point;const Me=y-H;return $e(I===0?v:new u.P(f.getx(Me),f.gety(Me)),ne,M,Q-I+1,m,P)}function Ye(y,r,l){return y._unit()._perp()._mult(r*l)}function ft(y,r,l,f,m,v,I,P){const{projectionCache:M,direction:H}=P;if(M.offsets[y])return M.offsets[y];const Q=l.add(r);if(y+H<f||y+H>=m)return M.offsets[y]=Q,Q;const ne=Fe(y+H,P),ge=Ye(ne.sub(l),I,H),Me=l.add(ge),ke=ne.add(ge);return M.offsets[y]=u.ak(v,Q,Me,ke)||Q,M.offsets[y]}function ut(y,r,l,f,m,v,I,P,M,H,Q,ne,ge,Me){const ke=f?y-r:y+r;let Le=ke>0?1:-1,Te=0;f&&(Le*=-1,Te=Math.PI),Le<0&&(Te+=Math.PI);let Xe,rt,je=Le>0?P+I:P+I+1,Ke=m,it=m,ot=0,ht=0;const St=Math.abs(ke),xt=[];let bt;for(;ot+ht<=St;){if(je+=Le,je<P||je>=M)return null;ot+=ht,it=Ke,rt=Xe;const Pt={projectionCache:ne,lineVertexArray:H,labelPlaneMatrix:Q,tileAnchorPoint:v,distanceFromAnchor:ot,getElevation:Me,previousVertex:it,direction:Le,absOffsetX:St};if(Ke=Fe(je,Pt),l===0)xt.push(it),bt=Ke.sub(it);else{let un;const xn=Ke.sub(it);un=xn.mag()===0?Ye(Fe(je+Le,Pt).sub(Ke),l,Le):Ye(xn,l,Le),rt||(rt=it.add(un)),Xe=ft(je,un,Ke,P,M,rt,l,Pt),xt.push(rt),bt=Xe.sub(rt)}ht=bt.mag()}const Bt=bt._mult((St-ot)/ht)._add(rt||it),yn=Te+Math.atan2(Ke.y-it.y,Ke.x-it.x);return xt.push(Bt),{point:Bt,angle:ge?yn:0,path:xt}}const pt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Gt(y,r){for(let l=0;l<y;l++){const f=r.length;r.resize(f+4),r.float32.set(pt,3*f)}}function ln(y,r,l){const f=r[0],m=r[1];return y[0]=l[0]*f+l[4]*m+l[12],y[1]=l[1]*f+l[5]*m+l[13],y[3]=l[3]*f+l[7]*m+l[15],y}const tn=100;class Tn{constructor(r,l=new an(r.width+200,r.height+200,25),f=new an(r.width+200,r.height+200,25)){this.transform=r,this.grid=l,this.ignoredGrid=f,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+tn,this.screenBottomBoundary=r.height+tn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,l,f,m,v,I){const P=this.projectAndGetPerspectiveRatio(m,r.anchorPointX,r.anchorPointY,I),M=f*P.perspectiveRatio,H=r.x1*M+P.point.x,Q=r.y1*M+P.point.y,ne=r.x2*M+P.point.x,ge=r.y2*M+P.point.y;return!this.isInsideGrid(H,Q,ne,ge)||l!=="always"&&this.grid.hitTest(H,Q,ne,ge,l,v)||P.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[H,Q,ne,ge],offscreen:this.isOffscreen(H,Q,ne,ge)}}placeCollisionCircles(r,l,f,m,v,I,P,M,H,Q,ne,ge,Me,ke){const Le=[],Te=new u.P(l.anchorX,l.anchorY),Xe=Ae(Te,I,ke),rt=re(this.transform.cameraToCenterDistance,Xe.signedDistanceFromCamera),je=(Q?v/rt:v*rt)/u.ao,Ke=Ae(Te,P,ke).point,it=Ie(je,m,l.lineOffsetX*je,l.lineOffsetY*je,!1,Ke,Te,l,f,P,{projections:{},offsets:{}},!1,ke);let ot=!1,ht=!1,St=!0;if(it){const xt=.5*ge*rt+Me,bt=new u.P(-100,-100),Bt=new u.P(this.screenRightBoundary,this.screenBottomBoundary),yn=new _n,Pt=it.first,un=it.last;let xn=[];for(let wn=Pt.path.length-1;wn>=1;wn--)xn.push(Pt.path[wn]);for(let wn=1;wn<un.path.length;wn++)xn.push(un.path[wn]);const kn=2.5*xt;if(M){const wn=xn.map(bn=>Ae(bn,M,ke));xn=wn.some(bn=>bn.signedDistanceFromCamera<=0)?[]:wn.map(bn=>bn.point)}let hn=[];if(xn.length>0){const wn=xn[0].clone(),bn=xn[0].clone();for(let dr=1;dr<xn.length;dr++)wn.x=Math.min(wn.x,xn[dr].x),wn.y=Math.min(wn.y,xn[dr].y),bn.x=Math.max(bn.x,xn[dr].x),bn.y=Math.max(bn.y,xn[dr].y);hn=wn.x>=bt.x&&bn.x<=Bt.x&&wn.y>=bt.y&&bn.y<=Bt.y?[xn]:bn.x<bt.x||wn.x>Bt.x||bn.y<bt.y||wn.y>Bt.y?[]:u.al([xn],bt.x,bt.y,Bt.x,Bt.y)}for(const wn of hn){yn.reset(wn,.25*xt);let bn=0;bn=yn.length<=.5*xt?1:Math.ceil(yn.paddedLength/kn)+1;for(let dr=0;dr<bn;dr++){const Yn=dr/Math.max(bn-1,1),Ri=yn.lerp(Yn),Rr=Ri.x+tn,Qn=Ri.y+tn;Le.push(Rr,Qn,xt,0);const li=Rr-xt,Ao=Qn-xt,Jo=Rr+xt,Oa=Qn+xt;if(St=St&&this.isOffscreen(li,Ao,Jo,Oa),ht=ht||this.isInsideGrid(li,Ao,Jo,Oa),r!=="always"&&this.grid.hitTestCircle(Rr,Qn,xt,r,ne)&&(ot=!0,!H))return{circles:[],offscreen:!1,collisionDetected:ot}}}}return{circles:!H&&ot||!ht||rt<this.perspectiveRatioCutoff?[]:Le,offscreen:St,collisionDetected:ot}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let f=1/0,m=1/0,v=-1/0,I=-1/0;for(const Q of r){const ne=new u.P(Q.x+tn,Q.y+tn);f=Math.min(f,ne.x),m=Math.min(m,ne.y),v=Math.max(v,ne.x),I=Math.max(I,ne.y),l.push(ne)}const P=this.grid.query(f,m,v,I).concat(this.ignoredGrid.query(f,m,v,I)),M={},H={};for(const Q of P){const ne=Q.key;if(M[ne.bucketInstanceId]===void 0&&(M[ne.bucketInstanceId]={}),M[ne.bucketInstanceId][ne.featureIndex])continue;const ge=[new u.P(Q.x1,Q.y1),new u.P(Q.x2,Q.y1),new u.P(Q.x2,Q.y2),new u.P(Q.x1,Q.y2)];u.am(l,ge)&&(M[ne.bucketInstanceId][ne.featureIndex]=!0,H[ne.bucketInstanceId]===void 0&&(H[ne.bucketInstanceId]=[]),H[ne.bucketInstanceId].push(ne.featureIndex))}return H}insertCollisionBox(r,l,f,m,v,I){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:v,collisionGroupID:I,overlapMode:l},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,l,f,m,v,I){const P=f?this.ignoredGrid:this.grid,M={bucketInstanceId:m,featureIndex:v,collisionGroupID:I,overlapMode:l};for(let H=0;H<r.length;H+=4)P.insertCircle(M,r[H],r[H+1],r[H+2])}projectAndGetPerspectiveRatio(r,l,f,m){let v;return m?(v=[l,f,m(l,f),1],u.af(v,v,r)):(v=[l,f,0,1],ln(v,v,r)),{point:new u.P((v[0]/v[3]+1)/2*this.transform.width+tn,(-v[1]/v[3]+1)/2*this.transform.height+tn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/v[3]*.5}}isOffscreen(r,l,f,m){return f<tn||r>=this.screenRightBoundary||m<tn||l>this.screenBottomBoundary}isInsideGrid(r,l,f,m){return f>=0&&r<this.gridRightBoundary&&m>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const r=u.an([]);return u.H(r,r,[-100,-100,0]),r}}function cn(y,r,l){return r*(u.W/(y.tileSize*Math.pow(2,l-y.tileID.overscaledZ)))}class Zn{constructor(r,l,f,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):m&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Gn{constructor(r,l,f,m,v){this.text=new Zn(r?r.text:null,l,f,v),this.icon=new Zn(r?r.icon:null,l,m,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ir{constructor(r,l,f){this.text=r,this.icon=l,this.skipFade=f}}class dn{constructor(){this.invProjMatrix=u.F(),this.viewportMatrix=u.F(),this.circles=[]}}class or{constructor(r,l,f,m,v){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=f,this.bucketIndex=m,this.tileID=v}}class Mr{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:f=>f.collisionGroupID===l}}return this.collisionGroups[r]}}function ii(y,r,l,f,m){const{horizontalAlign:v,verticalAlign:I}=u.at(y);return new u.P(-(v-.5)*r+f[0]*m,-(I-.5)*l+f[1]*m)}function Wr(y,r,l,f,m,v){const{x1:I,x2:P,y1:M,y2:H,anchorPointX:Q,anchorPointY:ne}=y,ge=new u.P(r,l);return f&&ge._rotate(m?v:-v),{x1:I+ge.x,y1:M+ge.y,x2:P+ge.x,y2:H+ge.y,anchorPointX:Q,anchorPointY:ne}}class Yr{constructor(r,l,f,m,v){this.transform=r.clone(),this.terrain=l,this.collisionIndex=new Tn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Mr(m),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,l,f,m){const v=f.getBucket(l),I=f.latestFeatureIndex;if(!v||!I||l.id!==v.layerIds[0])return;const P=f.collisionBoxArray,M=v.layers[0].layout,H=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),Q=f.tileSize/u.W,ne=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),ge=M.get("text-pitch-alignment")==="map",Me=M.get("text-rotation-alignment")==="map",ke=cn(f,1,this.transform.zoom),Le=mi(ne,ge,Me,this.transform,ke);let Te=null;if(ge){const rt=gi(ne,ge,Me,this.transform,ke);Te=u.K([],this.transform.labelPlaneMatrix,rt)}this.retainedQueryData[v.bucketInstanceId]=new or(v.bucketInstanceId,I,v.sourceLayerIndex,v.index,f.tileID);const Xe={bucket:v,layout:M,posMatrix:ne,textLabelPlaneMatrix:Le,labelToScreenMatrix:Te,scale:H,textPixelRatio:Q,holdingForFade:f.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:u.ag(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(m)for(const rt of v.sortKeyRanges){const{sortKey:je,symbolInstanceStart:Ke,symbolInstanceEnd:it}=rt;r.push({sortKey:je,symbolInstanceStart:Ke,symbolInstanceEnd:it,parameters:Xe})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:Xe})}attemptAnchorPlacement(r,l,f,m,v,I,P,M,H,Q,ne,ge,Me,ke,Le,Te){const Xe=u.ap[r.textAnchor],rt=[r.textOffset0,r.textOffset1],je=ii(Xe,f,m,rt,v),Ke=this.collisionIndex.placeCollisionBox(Wr(l,je.x,je.y,I,P,this.transform.angle),ne,M,H,Q.predicate,Te);if((!Le||this.collisionIndex.placeCollisionBox(Wr(Le,je.x,je.y,I,P,this.transform.angle),ne,M,H,Q.predicate,Te).box.length!==0)&&Ke.box.length>0){let it;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ge.crossTileID]&&this.prevPlacement.placements[ge.crossTileID]&&this.prevPlacement.placements[ge.crossTileID].text&&(it=this.prevPlacement.variableOffsets[ge.crossTileID].anchor),ge.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ge.crossTileID]={textOffset:rt,width:f,height:m,anchor:Xe,textBoxScale:v,prevAnchor:it},this.markUsedJustification(Me,Xe,ge,ke),Me.allowVerticalPlacement&&(this.markUsedOrientation(Me,ke,ge),this.placedOrientations[ge.crossTileID]=ke),{shift:je,placedGlyphBoxes:Ke}}}placeLayerBucketPart(r,l,f){const{bucket:m,layout:v,posMatrix:I,textLabelPlaneMatrix:P,labelToScreenMatrix:M,textPixelRatio:H,holdingForFade:Q,collisionBoxArray:ne,partiallyEvaluatedTextSize:ge,collisionGroup:Me}=r.parameters,ke=v.get("text-optional"),Le=v.get("icon-optional"),Te=u.aq(v,"text-overlap","text-allow-overlap"),Xe=Te==="always",rt=u.aq(v,"icon-overlap","icon-allow-overlap"),je=rt==="always",Ke=v.get("text-rotation-alignment")==="map",it=v.get("text-pitch-alignment")==="map",ot=v.get("icon-text-fit")!=="none",ht=v.get("symbol-z-order")==="viewport-y",St=Xe&&(je||!m.hasIconData()||Le),xt=je&&(Xe||!m.hasTextData()||ke);!m.collisionArrays&&ne&&m.deserializeCollisionBoxes(ne);const bt=this.retainedQueryData[m.bucketInstanceId].tileID,Bt=this.terrain?(Pt,un)=>this.terrain.getElevation(bt,Pt,un):null,yn=(Pt,un)=>{var xn,kn;if(l[Pt.crossTileID])return;if(Q)return void(this.placements[Pt.crossTileID]=new ir(!1,!1,!1));let hn=!1,wn=!1,bn=!0,dr=null,Yn={box:null,offscreen:null},Ri={box:null,offscreen:null},Rr=null,Qn=null,li=null,Ao=0,Jo=0,Oa=0;un.textFeatureIndex?Ao=un.textFeatureIndex:Pt.useRuntimeCollisionCircles&&(Ao=Pt.featureIndex),un.verticalTextFeatureIndex&&(Jo=un.verticalTextFeatureIndex);const La=un.textBox;if(La){const gr=ar=>{let qr=u.ah.horizontal;if(m.allowVerticalPlacement&&!ar&&this.prevPlacement){const Zi=this.prevPlacement.placedOrientations[Pt.crossTileID];Zi&&(this.placedOrientations[Pt.crossTileID]=Zi,qr=Zi,this.markUsedOrientation(m,qr,Pt))}return qr},nr=(ar,qr)=>{if(m.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&un.verticalTextBox){for(const Zi of m.writingModes)if(Zi===u.ah.vertical?(Yn=qr(),Ri=Yn):Yn=ar(),Yn&&Yn.box&&Yn.box.length)break}else Yn=ar()},br=Pt.textAnchorOffsetStartIndex,zl=Pt.textAnchorOffsetEndIndex;if(zl===br){const ar=(qr,Zi)=>{const An=this.collisionIndex.placeCollisionBox(qr,Te,H,I,Me.predicate,Bt);return An&&An.box&&An.box.length&&(this.markUsedOrientation(m,Zi,Pt),this.placedOrientations[Pt.crossTileID]=Zi),An};nr(()=>ar(La,u.ah.horizontal),()=>{const qr=un.verticalTextBox;return m.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&qr?ar(qr,u.ah.vertical):{box:null,offscreen:null}}),gr(Yn&&Yn.box&&Yn.box.length)}else{let ar=u.ap[(kn=(xn=this.prevPlacement)===null||xn===void 0?void 0:xn.variableOffsets[Pt.crossTileID])===null||kn===void 0?void 0:kn.anchor];const qr=(An,cd,cp)=>{const Fa=An.x2-An.x1,ja=An.y2-An.y1,kc=Pt.textBoxScale,hd=ot&&rt==="never"?cd:null;let Da={box:[],offscreen:!1},hp=Te==="never"?1:2,dd="never";ar&&hp++;for(let dp=0;dp<hp;dp++){for(let Mu=br;Mu<zl;Mu++){const fp=m.textAnchorOffsets.get(Mu);if(ar&&fp.textAnchor!==ar)continue;const zu=this.attemptAnchorPlacement(fp,An,Fa,ja,kc,Ke,it,H,I,Me,dd,Pt,m,cp,hd,Bt);if(zu&&(Da=zu.placedGlyphBoxes,Da&&Da.box&&Da.box.length))return hn=!0,dr=zu.shift,Da}ar?ar=null:dd=Te}return Da};nr(()=>qr(La,un.iconBox,u.ah.horizontal),()=>{const An=un.verticalTextBox;return m.allowVerticalPlacement&&!(Yn&&Yn.box&&Yn.box.length)&&Pt.numVerticalGlyphVertices>0&&An?qr(An,un.verticalIconBox,u.ah.vertical):{box:null,offscreen:null}}),Yn&&(hn=Yn.box,bn=Yn.offscreen);const Zi=gr(Yn&&Yn.box);if(!hn&&this.prevPlacement){const An=this.prevPlacement.variableOffsets[Pt.crossTileID];An&&(this.variableOffsets[Pt.crossTileID]=An,this.markUsedJustification(m,An.anchor,Pt,Zi))}}}if(Rr=Yn,hn=Rr&&Rr.box&&Rr.box.length>0,bn=Rr&&Rr.offscreen,Pt.useRuntimeCollisionCircles){const gr=m.text.placedSymbolArray.get(Pt.centerJustifiedTextSymbolIndex),nr=u.ai(m.textSizeData,ge,gr),br=v.get("text-padding");Qn=this.collisionIndex.placeCollisionCircles(Te,gr,m.lineVertexArray,m.glyphOffsetArray,nr,I,P,M,f,it,Me.predicate,Pt.collisionCircleDiameter,br,Bt),Qn.circles.length&&Qn.collisionDetected&&!f&&u.w("Collisions detected, but collision boxes are not shown"),hn=Xe||Qn.circles.length>0&&!Qn.collisionDetected,bn=bn&&Qn.offscreen}if(un.iconFeatureIndex&&(Oa=un.iconFeatureIndex),un.iconBox){const gr=nr=>{const br=ot&&dr?Wr(nr,dr.x,dr.y,Ke,it,this.transform.angle):nr;return this.collisionIndex.placeCollisionBox(br,rt,H,I,Me.predicate,Bt)};Ri&&Ri.box&&Ri.box.length&&un.verticalIconBox?(li=gr(un.verticalIconBox),wn=li.box.length>0):(li=gr(un.iconBox),wn=li.box.length>0),bn=bn&&li.offscreen}const Qo=ke||Pt.numHorizontalGlyphVertices===0&&Pt.numVerticalGlyphVertices===0,Po=Le||Pt.numIconVertices===0;if(Qo||Po?Po?Qo||(wn=wn&&hn):hn=wn&&hn:wn=hn=wn&&hn,hn&&Rr&&Rr.box&&this.collisionIndex.insertCollisionBox(Rr.box,Te,v.get("text-ignore-placement"),m.bucketInstanceId,Ri&&Ri.box&&Jo?Jo:Ao,Me.ID),wn&&li&&this.collisionIndex.insertCollisionBox(li.box,rt,v.get("icon-ignore-placement"),m.bucketInstanceId,Oa,Me.ID),Qn&&(hn&&this.collisionIndex.insertCollisionCircles(Qn.circles,Te,v.get("text-ignore-placement"),m.bucketInstanceId,Ao,Me.ID),f)){const gr=m.bucketInstanceId;let nr=this.collisionCircleArrays[gr];nr===void 0&&(nr=this.collisionCircleArrays[gr]=new dn);for(let br=0;br<Qn.circles.length;br+=4)nr.circles.push(Qn.circles[br+0]),nr.circles.push(Qn.circles[br+1]),nr.circles.push(Qn.circles[br+2]),nr.circles.push(Qn.collisionDetected?1:0)}if(Pt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Pt.crossTileID]=new ir(hn||St,wn||xt,bn||m.justReloaded),l[Pt.crossTileID]=!0};if(ht){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Pt=m.getSortedSymbolIndexes(this.transform.angle);for(let un=Pt.length-1;un>=0;--un){const xn=Pt[un];yn(m.symbolInstances.get(xn),m.collisionArrays[xn])}}else for(let Pt=r.symbolInstanceStart;Pt<r.symbolInstanceEnd;Pt++)yn(m.symbolInstances.get(Pt),m.collisionArrays[Pt]);if(f&&m.bucketInstanceId in this.collisionCircleArrays){const Pt=this.collisionCircleArrays[m.bucketInstanceId];u.ar(Pt.invProjMatrix,I),Pt.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(r,l,f,m){let v;v=m===u.ah.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[u.as(l)];const I=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const P of I)P>=0&&(r.text.placedSymbolArray.get(P).crossTileID=v>=0&&P!==v?0:f.crossTileID)}markUsedOrientation(r,l,f){const m=l===u.ah.horizontal||l===u.ah.horizontalOnly?l:0,v=l===u.ah.vertical?l:0,I=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const P of I)r.text.placedSymbolArray.get(P).placedOrientation=m;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let f=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const m=l?l.symbolFadeChange(r):1,v=l?l.opacities:{},I=l?l.variableOffsets:{},P=l?l.placedOrientations:{};for(const M in this.placements){const H=this.placements[M],Q=v[M];Q?(this.opacities[M]=new Gn(Q,m,H.text,H.icon),f=f||H.text!==Q.text.placed||H.icon!==Q.icon.placed):(this.opacities[M]=new Gn(null,m,H.text,H.icon,H.skipFade),f=f||H.text||H.icon)}for(const M in v){const H=v[M];if(!this.opacities[M]){const Q=new Gn(H,m,!1,!1);Q.isHidden()||(this.opacities[M]=Q,f=f||H.text.placed||H.icon.placed)}}for(const M in I)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=I[M]);for(const M in P)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=P[M]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)}updateLayerOpacities(r,l){const f={};for(const m of l){const v=m.getBucket(r);v&&m.latestFeatureIndex&&r.id===v.layerIds[0]&&this.updateBucketOpacities(v,f,m.collisionBoxArray)}}updateBucketOpacities(r,l,f){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const m=r.layers[0],v=m.layout,I=new Gn(null,0,!1,!1,!0),P=v.get("text-allow-overlap"),M=v.get("icon-allow-overlap"),H=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Q=v.get("text-rotation-alignment")==="map",ne=v.get("text-pitch-alignment")==="map",ge=v.get("icon-text-fit")!=="none",Me=new Gn(null,0,P&&(M||!r.hasIconData()||v.get("icon-optional")),M&&(P||!r.hasTextData()||v.get("text-optional")),!0);!r.collisionArrays&&f&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(f);const ke=(Le,Te,Xe)=>{for(let rt=0;rt<Te/4;rt++)Le.opacityVertexArray.emplaceBack(Xe);Le.hasVisibleVertices=Le.hasVisibleVertices||Xe!==Zr};for(let Le=0;Le<r.symbolInstances.length;Le++){const Te=r.symbolInstances.get(Le),{numHorizontalGlyphVertices:Xe,numVerticalGlyphVertices:rt,crossTileID:je}=Te;let Ke=this.opacities[je];l[je]?Ke=I:Ke||(Ke=Me,this.opacities[je]=Ke),l[je]=!0;const it=Te.numIconVertices>0,ot=this.placedOrientations[Te.crossTileID],ht=ot===u.ah.vertical,St=ot===u.ah.horizontal||ot===u.ah.horizontalOnly;if(Xe>0||rt>0){const xt=sc(Ke.text);ke(r.text,Xe,ht?Zr:xt),ke(r.text,rt,St?Zr:xt);const bt=Ke.text.isHidden();[Te.rightJustifiedTextSymbolIndex,Te.centerJustifiedTextSymbolIndex,Te.leftJustifiedTextSymbolIndex].forEach(Pt=>{Pt>=0&&(r.text.placedSymbolArray.get(Pt).hidden=bt||ht?1:0)}),Te.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Te.verticalPlacedTextSymbolIndex).hidden=bt||St?1:0);const Bt=this.variableOffsets[Te.crossTileID];Bt&&this.markUsedJustification(r,Bt.anchor,Te,ot);const yn=this.placedOrientations[Te.crossTileID];yn&&(this.markUsedJustification(r,"left",Te,yn),this.markUsedOrientation(r,yn,Te))}if(it){const xt=sc(Ke.icon),bt=!(ge&&Te.verticalPlacedIconSymbolIndex&&ht);Te.placedIconSymbolIndex>=0&&(ke(r.icon,Te.numIconVertices,bt?xt:Zr),r.icon.placedSymbolArray.get(Te.placedIconSymbolIndex).hidden=Ke.icon.isHidden()),Te.verticalPlacedIconSymbolIndex>=0&&(ke(r.icon,Te.numVerticalIconVertices,bt?Zr:xt),r.icon.placedSymbolArray.get(Te.verticalPlacedIconSymbolIndex).hidden=Ke.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const xt=r.collisionArrays[Le];if(xt){let bt=new u.P(0,0);if(xt.textBox||xt.verticalTextBox){let yn=!0;if(H){const Pt=this.variableOffsets[je];Pt?(bt=ii(Pt.anchor,Pt.width,Pt.height,Pt.textOffset,Pt.textBoxScale),Q&&bt._rotate(ne?this.transform.angle:-this.transform.angle)):yn=!1}xt.textBox&&yi(r.textCollisionBox.collisionVertexArray,Ke.text.placed,!yn||ht,bt.x,bt.y),xt.verticalTextBox&&yi(r.textCollisionBox.collisionVertexArray,Ke.text.placed,!yn||St,bt.x,bt.y)}const Bt=!!(!St&&xt.verticalIconBox);xt.iconBox&&yi(r.iconCollisionBox.collisionVertexArray,Ke.icon.placed,Bt,ge?bt.x:0,ge?bt.y:0),xt.verticalIconBox&&yi(r.iconCollisionBox.collisionVertexArray,Ke.icon.placed,!Bt,ge?bt.x:0,ge?bt.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Le=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Le.invProjMatrix,r.placementViewportMatrix=Le.viewportMatrix,r.collisionCircleArray=Le.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,l){const f=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function yi(y,r,l,f,m){y.emplaceBack(r?1:0,l?1:0,f||0,m||0),y.emplaceBack(r?1:0,l?1:0,f||0,m||0),y.emplaceBack(r?1:0,l?1:0,f||0,m||0),y.emplaceBack(r?1:0,l?1:0,f||0,m||0)}const da=Math.pow(2,25),fa=Math.pow(2,24),$n=Math.pow(2,17),In=Math.pow(2,16),wo=Math.pow(2,9),vi=Math.pow(2,8),_i=Math.pow(2,1);function sc(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const r=y.placed?1:0,l=Math.floor(127*y.opacity);return l*da+r*fa+l*$n+r*In+l*wo+r*vi+l*_i+r}const Zr=0;class Pi{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,l,f,m,v){const I=this._bucketParts;for(;this._currentTileIndex<r.length;)if(l.getBucketParts(I,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((P,M)=>P.sortKey-M.sortKey));this._currentPartIndex<I.length;)if(l.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,v())return!0;return!1}}class lo{constructor(r,l,f,m,v,I,P,M){this.placement=new Yr(r,l,I,P,M),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(r,l,f){const m=w.now(),v=()=>!this._forceFullPlacement&&w.now()-m>2;for(;this._currentPlacementIndex>=0;){const I=l[r[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=P)&&(!I.maxzoom||I.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new Pi(I)),this._inProgressLayer.continuePlacement(f[I.source],this.placement,this._showCollisionBoxes,I,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Ho=512/u.W/2;class wr{constructor(r,l,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const m=new Map;for(let v=0;v<l.length;v++){const I=l.get(v),P=I.key,M=m.get(P);M?M.push(I):m.set(P,[I])}for(const[v,I]of m){const P={positions:I.map(M=>({x:Math.floor(M.anchorX*Ho),y:Math.floor(M.anchorY*Ho)})),crossTileIDs:I.map(M=>M.crossTileID)};if(P.positions.length>128){const M=new u.au(P.positions.length,16,Uint16Array);for(const{x:H,y:Q}of P.positions)M.add(H,Q);M.finish(),delete P.positions,P.index=M}this._symbolsByKey[v]=P}}getScaledCoordinates(r,l){const{x:f,y:m,z:v}=this.tileID.canonical,{x:I,y:P,z:M}=l.canonical,H=Ho/Math.pow(2,M-v),Q=(P*u.W+r.anchorY)*H,ne=m*u.W*Ho;return{x:Math.floor((I*u.W+r.anchorX)*H-f*u.W*Ho),y:Math.floor(Q-ne)}}findMatches(r,l,f){const m=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let v=0;v<r.length;v++){const I=r.get(v);if(I.crossTileID)continue;const P=this._symbolsByKey[I.key];if(!P)continue;const M=this.getScaledCoordinates(I,l);if(P.index){const H=P.index.range(M.x-m,M.y-m,M.x+m,M.y+m).sort();for(const Q of H){const ne=P.crossTileIDs[Q];if(!f[ne]){f[ne]=!0,I.crossTileID=ne;break}}}else if(P.positions)for(let H=0;H<P.positions.length;H++){const Q=P.positions[H],ne=P.crossTileIDs[H];if(Math.abs(Q.x-M.x)<=m&&Math.abs(Q.y-M.y)<=m&&!f[ne]){f[ne]=!0,I.crossTileID=ne;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class pa{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class hs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const l=Math.round((r-this.lng)/360);if(l!==0)for(const f in this.indexes){const m=this.indexes[f],v={};for(const I in m){const P=m[I];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+l),v[P.tileID.key]=P}this.indexes[f]=v}this.lng=r}addBucket(r,l,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let v=0;v<l.symbolInstances.length;v++)l.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const v in this.indexes){const I=this.indexes[v];if(Number(v)>r.overscaledZ)for(const P in I){const M=I[P];M.tileID.isChildOf(r)&&M.findMatches(l.symbolInstances,r,m)}else{const P=I[r.scaledTo(Number(v)).key];P&&P.findMatches(l.symbolInstances,r,m)}}for(let v=0;v<l.symbolInstances.length;v++){const I=l.symbolInstances.get(v);I.crossTileID||(I.crossTileID=f.generate(),m[I.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new wr(r,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(r,l){for(const f of l.getCrossTileIDsLists())for(const m of f)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let l=!1;for(const f in this.indexes){const m=this.indexes[f];for(const v in m)r[m[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,m[v]),delete m[v],l=!0)}return l}}class cr{constructor(){this.layerIndexes={},this.crossTileIDs=new pa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,l,f){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new hs);let v=!1;const I={};m.handleWrapJump(f);for(const P of l){const M=P.getBucket(r);M&&r.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(P.tileID,M,this.crossTileIDs)&&(v=!0),I[M.bucketInstanceId]=!0)}return m.removeStaleBuckets(I)&&(v=!0),v}pruneUnusedLayers(r){const l={};r.forEach(f=>{l[f]=!0});for(const f in this.layerIndexes)l[f]||delete this.layerIndexes[f]}}const Jr=(y,r)=>u.t(y,r&&r.filter(l=>l.identifier!=="source.canvas")),Hi=u.av();class al extends u.E{constructor(r,l={}){super(),this._rtlPluginLoaded=()=>{for(const f in this.sourceCaches){const m=this.sourceCaches[f].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[f].reload()}},this.map=r,this.dispatcher=new wt(dt(),r._getMapId()),this.dispatcher.registerMessageHandler("getGlyphs",(f,m)=>this.getGlyphs(f,m)),this.dispatcher.registerMessageHandler("getImages",(f,m)=>this.getImages(f,m)),this.imageManager=new de,this.imageManager.setEventedParent(this),this.glyphManager=new te(r._requestManager,l.localIdeographFontFamily),this.lineAtlas=new Be(256,512),this.crossTileSymbolIndex=new cr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.ax()),Se().on(ae,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const m=this.sourceCaches[f.sourceId];if(!m)return;const v=m.getSource();if(v&&v.vectorLayerIds)for(const I in this._layers){const P=this._layers[I];P.source===v.id&&this._validateLayer(P)}})}loadURL(r,l={},f){this.fire(new u.k("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const m=this.map._requestManager.transformRequest(r,ie.Style);this._loadStyleRequest=new AbortController,u.h(m,this._loadStyleRequest).then(v=>{this._loadStyleRequest=null,this._load(v.data,l,f)}).catch(v=>{this._loadStyleRequest=null,v&&this.fire(new u.j(v))})}loadJSON(r,l={},f){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(r,l,f)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Hi,{validate:!1})}_load(r,l,f){var m;const v=l.transformStyle?l.transformStyle(f,r):r;if(!l.validate||!Jr(this,u.x(v))){this._loaded=!0,this.stylesheet=v;for(const I in v.sources)this.addSource(I,v.sources[I],{validate:!1});v.sprite?this._loadSprite(v.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(v.glyphs),this._createLayers(),this.light=new Ee(this.stylesheet.light),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.ay(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(l=>l.id),this._layers={},this._serializedLayers=null;for(const l of r){const f=u.az(l);f.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=f}}_loadSprite(r,l=!1,f=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,I,P,M){return u._(this,void 0,void 0,function*(){const H=q(v),Q=P>1?"@2x":"",ne={},ge={};for(const{id:Me,url:ke}of H){const Le=I.transformRequest(I.normalizeSpriteURL(ke,Q,".json"),ie.SpriteJSON);ne[Me]=u.h(Le,M);const Te=I.transformRequest(I.normalizeSpriteURL(ke,Q,".png"),ie.SpriteImage);ge[Me]=$.getImage(Te,M)}return yield Promise.all([...Object.values(ne),...Object.values(ge)]),function(Me,ke){return u._(this,void 0,void 0,function*(){const Le={};for(const Te in Me){Le[Te]={};const Xe=w.getImageCanvasContext((yield ke[Te]).data),rt=(yield Me[Te]).data;for(const je in rt){const{width:Ke,height:it,x:ot,y:ht,sdf:St,pixelRatio:xt,stretchX:bt,stretchY:Bt,content:yn}=rt[je];Le[Te][je]={data:null,pixelRatio:xt,sdf:St,stretchX:bt,stretchY:Bt,content:yn,spriteData:{width:Ke,height:it,x:ot,y:ht,context:Xe}}}}return Le})}(ne,ge)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(const I in v){this._spritesImagesIds[I]=[];const P=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter(M=>!(M in v)):[];for(const M of P)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in v[I]){const H=I==="default"?M:`${I}:${M}`;this._spritesImagesIds[I].push(H),H in this.imageManager.images?this.imageManager.updateImage(H,v[I][M],!1):this.imageManager.addImage(H,v[I][M]),l&&(this._changedImages[H]=!0)}}}).catch(v=>{this._spriteRequest=null,m=v,this.fire(new u.j(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),f&&f(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const l=this.sourceCaches[r.source];if(!l)return;const f=r.sourceLayer;if(!f)return;const m=l.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(f)===-1)&&this.fire(new u.j(new Error(`Source layer "${f}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const l=this._serializedAllLayers();if(!r||r.length===0)return Object.values(l);const f=[];for(const m of r)l[m]&&f.push(l[m]);return f}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const l=Object.keys(this._layers);for(const f of l){const m=this._layers[f];m.type!=="custom"&&(r[f]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const l=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(m.length||v.length)&&this._updateWorkerLayers(m,v);for(const I in this._updatedSources){const P=this._updatedSources[I];if(P==="reload")this._reloadSource(I);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const f={};for(const m in this.sourceCaches){const v=this.sourceCaches[m];f[m]=v.used,v.used=!1}for(const m of this._order){const v=this._layers[m];v.recalculate(r,this._availableImages),!v.isHidden(r.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const m in f){const v=this.sourceCaches[m];f[m]!==v.used&&v.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.z=r.zoom,l&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,l={}){var f;this._checkLoaded();const m=this.serialize();if(r=l.transformStyle?l.transformStyle(m,r):r,((f=l.validate)===null||f===void 0||f)&&Jr(this,u.x(r)))return!1;(r=u.aA(r)).layers=u.ay(r.layers);const v=u.aB(m,r),I=this._getOperationsToPerform(v);if(I.unimplemented.length>0)throw new Error(`Unimplemented: ${I.unimplemented.join(", ")}.`);if(I.operations.length===0)return!1;for(const P of I.operations)P();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const l=[],f=[];for(const m of r)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":l.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":l.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,m.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setTransition":l.push(()=>{});break;default:f.push(m.command)}return{operations:l,unimplemented:f}}addImage(r,l){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,l),this._afterImageUpdated(r)}updateImage(r,l){this.imageManager.updateImage(r,l)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,l,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(u.x.source,`sources.${r}`,l,null,f))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const m=this.sourceCaches[r]=new st(r,l,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const l=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],l.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,l){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(l),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,l,f={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new u.j(new Error(`Layer "${m}" already exists on this map.`)));let v;if(r.type==="custom"){if(Jr(this,u.aC(r)))return;v=u.az(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=u.aA(r),r=u.e(r,{source:m})),this._validate(u.x.layer,`layers.${m}`,r,{arrayIndex:-1},f))return;v=u.az(r),this._validateLayer(v),v.setEventedParent(this,{layer:{id:m}})}const I=l?this._order.indexOf(l):this._order.length;if(l&&I===-1)this.fire(new u.j(new Error(`Cannot add layer "${m}" before non-existing layer "${l}".`)));else{if(this._order.splice(I,0,m),this._layerOrderChanged=!0,this._layers[m]=v,this._removedLayers[m]&&v.source&&v.type!=="custom"){const P=this._removedLayers[m];delete this._removedLayers[m],P.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(r,l){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===l)return;const f=this._order.indexOf(r);this._order.splice(f,1);const m=l?this._order.indexOf(l):this._order.length;l&&m===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${l}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const l=this._layers[r];if(!l)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));l.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,l,f){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===l&&m.maxzoom===f||(l!=null&&(m.minzoom=l),f!=null&&(m.maxzoom=f),this._updateLayer(m)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,l,f={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!u.aD(m.filter,l))return l==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(u.x.filter,`layers.${m.id}.filter`,l,null,f)||(m.filter=u.aA(l),this._updateLayer(m)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aA(this.getLayer(r).filter)}setLayoutProperty(r,l,f,m={}){this._checkLoaded();const v=this.getLayer(r);v?u.aD(v.getLayoutProperty(l),f)||(v.setLayoutProperty(l,f,m),this._updateLayer(v)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,l){const f=this.getLayer(r);if(f)return f.getLayoutProperty(l);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,l,f,m={}){this._checkLoaded();const v=this.getLayer(r);v?u.aD(v.getPaintProperty(l),f)||(v.setPaintProperty(l,f,m)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,l){return this.getLayer(r).getPaintProperty(l)}setFeatureState(r,l){this._checkLoaded();const f=r.source,m=r.sourceLayer,v=this.sourceCaches[f];if(v===void 0)return void this.fire(new u.j(new Error(`The source '${f}' does not exist in the map's style.`)));const I=v.getSource().type;I==="geojson"&&m?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||m?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),v.setFeatureState(m,r.id,l)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,l){this._checkLoaded();const f=r.source,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new u.j(new Error(`The source '${f}' does not exist in the map's style.`)));const v=m.getSource().type,I=v==="vector"?r.sourceLayer:void 0;v!=="vector"||I?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(I,r.id,l):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const l=r.source,f=r.sourceLayer,m=this.sourceCaches[l];if(m!==void 0)return m.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(f,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aE(this.sourceCaches,v=>v.serialize()),l=this._serializeByIds(this._order),f=this.map.getTerrain()||void 0,m=this.stylesheet;return u.aF({version:m.version,name:m.name,metadata:m.metadata,light:m.light,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:r,layers:l,terrain:f},v=>v!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const l=I=>this._layers[I].type==="fill-extrusion",f={},m=[];for(let I=this._order.length-1;I>=0;I--){const P=this._order[I];if(l(P)){f[P]=I;for(const M of r){const H=M[P];if(H)for(const Q of H)m.push(Q)}}}m.sort((I,P)=>P.intersectionZ-I.intersectionZ);const v=[];for(let I=this._order.length-1;I>=0;I--){const P=this._order[I];if(l(P))for(let M=m.length-1;M>=0;M--){const H=m[M].feature;if(f[H.layer.id]<I)break;v.push(H),m.pop()}else for(const M of r){const H=M[P];if(H)for(const Q of H)v.push(Q.feature)}}return v}queryRenderedFeatures(r,l,f){l&&l.filter&&this._validate(u.x.filter,"queryRenderedFeatures.filter",l.filter,null,l);const m={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const P of l.layers){const M=this._layers[P];if(!M)return this.fire(new u.j(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];m[M.source]=!0}}const v=[];l.availableImages=this._availableImages;const I=this._serializedAllLayers();for(const P in this.sourceCaches)l.layers&&!m[P]||v.push(Tt(this.sourceCaches[P],this._layers,I,r,l,f));return this.placement&&v.push(function(P,M,H,Q,ne,ge,Me){const ke={},Le=ge.queryRenderedSymbols(Q),Te=[];for(const Xe of Object.keys(Le).map(Number))Te.push(Me[Xe]);Te.sort($t);for(const Xe of Te){const rt=Xe.featureIndex.lookupSymbolFeatures(Le[Xe.bucketInstanceId],M,Xe.bucketIndex,Xe.sourceLayerIndex,ne.filter,ne.layers,ne.availableImages,P);for(const je in rt){const Ke=ke[je]=ke[je]||[],it=rt[je];it.sort((ot,ht)=>{const St=Xe.featureSortOrder;if(St){const xt=St.indexOf(ot.featureIndex);return St.indexOf(ht.featureIndex)-xt}return ht.featureIndex-ot.featureIndex});for(const ot of it)Ke.push(ot)}}for(const Xe in ke)ke[Xe].forEach(rt=>{const je=rt.feature,Ke=H[P[Xe].source].getFeatureState(je.layer["source-layer"],je.id);je.source=je.layer.source,je.layer["source-layer"]&&(je.sourceLayer=je.layer["source-layer"]),je.state=Ke});return ke}(this._layers,I,this.sourceCaches,r,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(r,l){l&&l.filter&&this._validate(u.x.filter,"querySourceFeatures.filter",l.filter,null,l);const f=this.sourceCaches[r];return f?function(m,v){const I=m.getRenderableIds().map(H=>m.getTileByID(H)),P=[],M={};for(let H=0;H<I.length;H++){const Q=I[H],ne=Q.tileID.canonical.key;M[ne]||(M[ne]=!0,Q.querySourceFeatures(P,v))}return P}(f,l):[]}getLight(){return this.light.getLight()}setLight(r,l={}){this._checkLoaded();const f=this.light.getLight();let m=!1;for(const I in r)if(!u.aD(r[I],f[I])){m=!0;break}if(!m)return;const v={now:w.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(v)}_validate(r,l,f,m,v={}){return(!v||v.validate!==!1)&&Jr(this,r.call(u.x,u.e({key:l,style:this.serialize(),value:f,styleSpec:u.v},m)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Se().off(ae,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const f=this.sourceCaches[l];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("removeMap",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const l in this.sourceCaches)this.sourceCaches[l].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,l,f,m,v=!1){let I=!1,P=!1;const M={};for(const H of this._order){const Q=this._layers[H];if(Q.type!=="symbol")continue;if(!M[Q.source]){const ge=this.sourceCaches[Q.source];M[Q.source]=ge.getRenderableIds(!0).map(Me=>ge.getTileByID(Me)).sort((Me,ke)=>ke.tileID.overscaledZ-Me.tileID.overscaledZ||(Me.tileID.isLessThan(ke.tileID)?-1:1))}const ne=this.crossTileSymbolIndex.addLayer(Q,M[Q.source],r.center.lng);I=I||ne}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(w.now(),r.zoom))&&(this.pauseablePlacement=new lo(r,this.map.terrain,this._order,v,l,f,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(w.now()),P=!0),I&&this.pauseablePlacement.placement.setStale()),P||I)for(const H of this._order){const Q=this._layers[H];Q.type==="symbol"&&this.placement.updateLayerOpacities(Q,M[Q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(w.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,l){return u._(this,void 0,void 0,function*(){const f=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[l.source];return m&&m.setDependencies(l.tileID.key,l.type,l.icons),f})}getGlyphs(r,l){return u._(this,void 0,void 0,function*(){const f=yield this.glyphManager.getGlyphs(l.stacks),m=this.sourceCaches[l.source];return m&&m.setDependencies(l.tileID.key,l.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,l={}){this._checkLoaded(),r&&this._validate(u.x.glyphs,"glyphs",r,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,l,f={},m){this._checkLoaded();const v=[{id:r,url:l}],I=[...q(this.stylesheet.sprite),...v];this._validate(u.x.sprite,"sprite",I,null,f)||(this.stylesheet.sprite=I,this._loadSprite(v,!0,m))}removeSprite(r){this._checkLoaded();const l=q(this.stylesheet.sprite);if(l.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;l.splice(l.findIndex(f=>f.id===r),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return q(this.stylesheet.sprite)}setSprite(r,l={},f){this._checkLoaded(),r&&this._validate(u.x.sprite,"sprite",r,null,l)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}var uo=u.X([{name:"a_pos",type:"Int16",components:2}]),fu="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Os={prelude:On(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:On(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:On(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:On(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:On("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:On(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:On(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:On("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:On("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:On("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:On(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:On(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:On(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:On(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:On(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:On(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:On(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:On(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:On(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:On(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:On(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:On(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:On(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:On(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:On(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:On(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:On("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",fu),terrainDepth:On("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",fu),terrainCoords:On("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",fu)};function On(y,r){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),m=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=v?v.concat(m):m,P={};return{fragmentSource:y=y.replace(l,(M,H,Q,ne,ge)=>(P[ge]=!0,H==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
varying ${Q} ${ne} ${ge};
#else
uniform ${Q} ${ne} u_${ge};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ge}
    ${Q} ${ne} ${ge} = u_${ge};
#endif
`)),vertexSource:r=r.replace(l,(M,H,Q,ne,ge)=>{const Me=ne==="float"?"vec2":"vec4",ke=ge.match(/color/)?"color":Me;return P[ge]?H==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
uniform lowp float u_${ge}_t;
attribute ${Q} ${Me} a_${ge};
varying ${Q} ${ne} ${ge};
#else
uniform ${Q} ${ne} u_${ge};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${ge}
    ${ge} = a_${ge};
#else
    ${Q} ${ne} ${ge} = u_${ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ge}
    ${ge} = unpack_mix_${ke}(a_${ge}, u_${ge}_t);
#else
    ${Q} ${ne} ${ge} = u_${ge};
#endif
`:H==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
uniform lowp float u_${ge}_t;
attribute ${Q} ${Me} a_${ge};
#else
uniform ${Q} ${ne} u_${ge};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${ge}
    ${Q} ${ne} ${ge} = a_${ge};
#else
    ${Q} ${ne} ${ge} = u_${ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ge}
    ${Q} ${ne} ${ge} = unpack_mix_${ke}(a_${ge}, u_${ge}_t);
#else
    ${Q} ${ne} ${ge} = u_${ge};
#endif
`}),staticAttributes:f,staticUniforms:I}}class ll{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,l,f,m,v,I,P,M,H){this.context=r;let Q=this.boundPaintVertexBuffers.length!==m.length;for(let ne=0;!Q&&ne<m.length;ne++)this.boundPaintVertexBuffers[ne]!==m[ne]&&(Q=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==f||Q||this.boundIndexBuffer!==v||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==H?this.freshBind(l,f,m,v,I,P,M,H):(r.bindVertexArray.set(this.vao),P&&P.bind(),v&&v.dynamicDraw&&v.bind(),M&&M.bind(),H&&H.bind())}freshBind(r,l,f,m,v,I,P,M){const H=r.numAttributes,Q=this.context,ne=Q.gl;this.vao&&this.destroy(),this.vao=Q.createVertexArray(),Q.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=m,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=M,l.enableAttributes(ne,r);for(const ge of f)ge.enableAttributes(ne,r);I&&I.enableAttributes(ne,r),P&&P.enableAttributes(ne,r),M&&M.enableAttributes(ne,r),l.bind(),l.setVertexAttribPointers(ne,r,v);for(const ge of f)ge.bind(),ge.setVertexAttribPointers(ne,r,v);I&&(I.bind(),I.setVertexAttribPointers(ne,r,v)),m&&m.bind(),P&&(P.bind(),P.setVertexAttribPointers(ne,r,v)),M&&(M.bind(),M.setVertexAttribPointers(ne,r,v)),Q.currentNumAttributes=H}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function co(y){const r=[];for(let l=0;l<y.length;l++){if(y[l]===null)continue;const f=y[l].split(" ");r.push(f.pop())}return r}class xi{constructor(r,l,f,m,v,I){const P=r.gl;this.program=P.createProgram();const M=co(l.staticAttributes),H=f?f.getBinderAttributes():[],Q=M.concat(H),ne=Os.prelude.staticUniforms?co(Os.prelude.staticUniforms):[],ge=l.staticUniforms?co(l.staticUniforms):[],Me=f?f.getBinderUniforms():[],ke=ne.concat(ge).concat(Me),Le=[];for(const ot of ke)Le.indexOf(ot)<0&&Le.push(ot);const Te=f?f.defines():[];v&&Te.push("#define OVERDRAW_INSPECTOR;"),I&&Te.push("#define TERRAIN3D;");const Xe=Te.concat(Os.prelude.fragmentSource,l.fragmentSource).join(`
`),rt=Te.concat(Os.prelude.vertexSource,l.vertexSource).join(`
`),je=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);if(P.shaderSource(je,Xe),P.compileShader(je),!P.getShaderParameter(je,P.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${P.getShaderInfoLog(je)}`);P.attachShader(this.program,je);const Ke=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);if(P.shaderSource(Ke,rt),P.compileShader(Ke),!P.getShaderParameter(Ke,P.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${P.getShaderInfoLog(Ke)}`);P.attachShader(this.program,Ke),this.attributes={};const it={};this.numAttributes=Q.length;for(let ot=0;ot<this.numAttributes;ot++)Q[ot]&&(P.bindAttribLocation(this.program,ot,Q[ot]),this.attributes[Q[ot]]=ot);if(P.linkProgram(this.program),!P.getProgramParameter(this.program,P.LINK_STATUS))throw new Error(`Program failed to link: ${P.getProgramInfoLog(this.program)}`);P.deleteShader(Ke),P.deleteShader(je);for(let ot=0;ot<Le.length;ot++){const ht=Le[ot];if(ht&&!it[ht]){const St=P.getUniformLocation(this.program,ht);St&&(it[ht]=St)}}this.fixedUniforms=m(r,it),this.terrainUniforms=((ot,ht)=>({u_depth:new u.aG(ot,ht.u_depth),u_terrain:new u.aG(ot,ht.u_terrain),u_terrain_dim:new u.aH(ot,ht.u_terrain_dim),u_terrain_matrix:new u.aI(ot,ht.u_terrain_matrix),u_terrain_unpack:new u.aJ(ot,ht.u_terrain_unpack),u_terrain_exaggeration:new u.aH(ot,ht.u_terrain_exaggeration)}))(r,it),this.binderUniforms=f?f.getUniforms(r,it):[]}draw(r,l,f,m,v,I,P,M,H,Q,ne,ge,Me,ke,Le,Te,Xe,rt){const je=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(m),r.setColorMode(v),r.setCullFace(I),M){r.activeTexture.set(je.TEXTURE2),je.bindTexture(je.TEXTURE_2D,M.depthTexture),r.activeTexture.set(je.TEXTURE3),je.bindTexture(je.TEXTURE_2D,M.texture);for(const it in this.terrainUniforms)this.terrainUniforms[it].set(M[it])}for(const it in this.fixedUniforms)this.fixedUniforms[it].set(P[it]);Le&&Le.setUniforms(r,this.binderUniforms,Me,{zoom:ke});let Ke=0;switch(l){case je.LINES:Ke=2;break;case je.TRIANGLES:Ke=3;break;case je.LINE_STRIP:Ke=1}for(const it of ge.get()){const ot=it.vaos||(it.vaos={});(ot[H]||(ot[H]=new ll)).bind(r,this,Q,Le?Le.getPaintVertexBuffers():[],ne,it.vertexOffset,Te,Xe,rt),je.drawElements(l,it.primitiveLength*Ke,je.UNSIGNED_SHORT,it.primitiveOffset*Ke*2)}}}function ma(y,r,l){const f=1/cn(l,1,r.transform.tileZoom),m=Math.pow(2,l.tileID.overscaledZ),v=l.tileSize*Math.pow(2,r.transform.tileZoom)/m,I=v*(l.tileID.canonical.x+l.tileID.wrap*m),P=v*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[f,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[I>>16,P>>16],u_pixel_coord_lower:[65535&I,65535&P]}}const ac=(y,r,l,f)=>{const m=r.style.light,v=m.properties.get("position"),I=[v.x,v.y,v.z],P=function(){var H=new u.A(9);return u.A!=Float32Array&&(H[1]=0,H[2]=0,H[3]=0,H[5]=0,H[6]=0,H[7]=0),H[0]=1,H[4]=1,H[8]=1,H}();m.properties.get("anchor")==="viewport"&&function(H,Q){var ne=Math.sin(Q),ge=Math.cos(Q);H[0]=ge,H[1]=ne,H[2]=0,H[3]=-ne,H[4]=ge,H[5]=0,H[6]=0,H[7]=0,H[8]=1}(P,-r.transform.angle),function(H,Q,ne){var ge=Q[0],Me=Q[1],ke=Q[2];H[0]=ge*ne[0]+Me*ne[3]+ke*ne[6],H[1]=ge*ne[1]+Me*ne[4]+ke*ne[7],H[2]=ge*ne[2]+Me*ne[5]+ke*ne[8]}(I,I,P);const M=m.properties.get("color");return{u_matrix:y,u_lightpos:I,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+l,u_opacity:f}},Nh=(y,r,l,f,m,v,I)=>u.e(ac(y,r,l,f),ma(v,r,I),{u_height_factor:-Math.pow(2,m.overscaledZ)/I.tileSize/8}),ul=y=>({u_matrix:y}),lc=(y,r,l,f)=>u.e(ul(y),ma(l,r,f)),pu=(y,r)=>({u_matrix:y,u_world:r}),mu=(y,r,l,f,m)=>u.e(lc(y,r,l,f),{u_world:m}),gu=(y,r,l,f)=>{const m=y.transform;let v,I;if(f.paint.get("circle-pitch-alignment")==="map"){const P=cn(l,1,m.zoom);v=!0,I=[P,P]}else v=!1,I=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(r.posMatrix,l,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:I}},cl=(y,r,l)=>{const f=cn(l,1,r.zoom),m=Math.pow(2,r.zoom-l.tileID.overscaledZ),v=l.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[r.pixelsToGLUnits[0]/(f*m),r.pixelsToGLUnits[1]/(f*m)],u_overscale_factor:v}},hl=(y,r,l=1)=>({u_matrix:y,u_color:r,u_overlay:0,u_overlay_scale:l}),Wo=y=>({u_matrix:y}),uc=(y,r,l,f)=>({u_matrix:y,u_extrude_scale:cn(r,1,l),u_intensity:f});function cc(y,r){const l=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new u.Y(0,f/l).toLngLat().lat,new u.Y(0,(f+1)/l).toLngLat().lat]}const dl=(y,r,l,f)=>{const m=y.transform;return{u_matrix:va(y,r,l,f),u_ratio:1/cn(r,1,m.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},ds=(y,r,l,f,m)=>u.e(dl(y,r,l,m),{u_image:0,u_image_height:f}),ga=(y,r,l,f,m)=>{const v=y.transform,I=ya(r,v);return{u_matrix:va(y,r,l,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/cn(r,1,v.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[I,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},ki=(y,r,l,f,m,v)=>{const I=y.lineAtlas,P=ya(r,y.transform),M=l.layout.get("line-cap")==="round",H=I.getDash(f.from,M),Q=I.getDash(f.to,M),ne=H.width*m.fromScale,ge=Q.width*m.toScale;return u.e(dl(y,r,l,v),{u_patternscale_a:[P/ne,-H.height/2],u_patternscale_b:[P/ge,-Q.height/2],u_sdfgamma:I.width/(256*Math.min(ne,ge)*y.pixelRatio)/2,u_image:0,u_tex_y_a:H.y,u_tex_y_b:Q.y,u_mix:m.t})};function ya(y,r){return 1/cn(y,1,r.tileZoom)}function va(y,r,l,f){return y.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const fs=(y,r,l,f,m)=>{return{u_matrix:y,u_tl_parent:r,u_scale_parent:l,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(I=m.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(v=m.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:fl(m.paint.get("raster-hue-rotate"))};var v,I};function fl(y){y*=Math.PI/180;const r=Math.sin(y),l=Math.cos(y);return[(2*l+1)/3,(-Math.sqrt(3)*r-l+1)/3,(Math.sqrt(3)*r-l+1)/3]}const _a=(y,r,l,f,m,v,I,P,M,H)=>{const Q=m.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Q.cameraToCenterDistance,u_pitch:Q.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:Q.width/Q.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:I,u_coord_matrix:P,u_is_text:+M,u_pitch_with_map:+f,u_texsize:H,u_texture:0}},Ls=(y,r,l,f,m,v,I,P,M,H,Q)=>{const ne=m.transform;return u.e(_a(y,r,l,f,m,v,I,P,M,H),{u_gamma_scale:f?Math.cos(ne._pitch)*ne.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+Q})},Uh=(y,r,l,f,m,v,I,P,M,H)=>u.e(Ls(y,r,l,f,m,v,I,P,!0,M,!0),{u_texsize_icon:H,u_texture_icon:1}),hc=(y,r,l)=>({u_matrix:y,u_opacity:r,u_color:l}),dc=(y,r,l,f,m,v)=>u.e(function(I,P,M,H){const Q=M.imageManager.getPattern(I.from.toString()),ne=M.imageManager.getPattern(I.to.toString()),{width:ge,height:Me}=M.imageManager.getPixelSize(),ke=Math.pow(2,H.tileID.overscaledZ),Le=H.tileSize*Math.pow(2,M.transform.tileZoom)/ke,Te=Le*(H.tileID.canonical.x+H.tileID.wrap*ke),Xe=Le*H.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Q.tl,u_pattern_br_a:Q.br,u_pattern_tl_b:ne.tl,u_pattern_br_b:ne.br,u_texsize:[ge,Me],u_mix:P.t,u_pattern_size_a:Q.displaySize,u_pattern_size_b:ne.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/cn(H,1,M.transform.tileZoom),u_pixel_coord_upper:[Te>>16,Xe>>16],u_pixel_coord_lower:[65535&Te,65535&Xe]}}(f,v,l,m),{u_matrix:y,u_opacity:r}),fc={fillExtrusion:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_lightpos:new u.aK(y,r.u_lightpos),u_lightintensity:new u.aH(y,r.u_lightintensity),u_lightcolor:new u.aK(y,r.u_lightcolor),u_vertical_gradient:new u.aH(y,r.u_vertical_gradient),u_opacity:new u.aH(y,r.u_opacity)}),fillExtrusionPattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_lightpos:new u.aK(y,r.u_lightpos),u_lightintensity:new u.aH(y,r.u_lightintensity),u_lightcolor:new u.aK(y,r.u_lightcolor),u_vertical_gradient:new u.aH(y,r.u_vertical_gradient),u_height_factor:new u.aH(y,r.u_height_factor),u_image:new u.aG(y,r.u_image),u_texsize:new u.aL(y,r.u_texsize),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade),u_opacity:new u.aH(y,r.u_opacity)}),fill:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix)}),fillPattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_image:new u.aG(y,r.u_image),u_texsize:new u.aL(y,r.u_texsize),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade)}),fillOutline:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_world:new u.aL(y,r.u_world)}),fillOutlinePattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_world:new u.aL(y,r.u_world),u_image:new u.aG(y,r.u_image),u_texsize:new u.aL(y,r.u_texsize),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade)}),circle:(y,r)=>({u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_scale_with_map:new u.aG(y,r.u_scale_with_map),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_extrude_scale:new u.aL(y,r.u_extrude_scale),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_matrix:new u.aI(y,r.u_matrix)}),collisionBox:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pixels_to_tile_units:new u.aH(y,r.u_pixels_to_tile_units),u_extrude_scale:new u.aL(y,r.u_extrude_scale),u_overscale_factor:new u.aH(y,r.u_overscale_factor)}),collisionCircle:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_inv_matrix:new u.aI(y,r.u_inv_matrix),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_viewport_size:new u.aL(y,r.u_viewport_size)}),debug:(y,r)=>({u_color:new u.aM(y,r.u_color),u_matrix:new u.aI(y,r.u_matrix),u_overlay:new u.aG(y,r.u_overlay),u_overlay_scale:new u.aH(y,r.u_overlay_scale)}),clippingMask:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix)}),heatmap:(y,r)=>({u_extrude_scale:new u.aH(y,r.u_extrude_scale),u_intensity:new u.aH(y,r.u_intensity),u_matrix:new u.aI(y,r.u_matrix)}),heatmapTexture:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_world:new u.aL(y,r.u_world),u_image:new u.aG(y,r.u_image),u_color_ramp:new u.aG(y,r.u_color_ramp),u_opacity:new u.aH(y,r.u_opacity)}),hillshade:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_image:new u.aG(y,r.u_image),u_latrange:new u.aL(y,r.u_latrange),u_light:new u.aL(y,r.u_light),u_shadow:new u.aM(y,r.u_shadow),u_highlight:new u.aM(y,r.u_highlight),u_accent:new u.aM(y,r.u_accent)}),hillshadePrepare:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_image:new u.aG(y,r.u_image),u_dimension:new u.aL(y,r.u_dimension),u_zoom:new u.aH(y,r.u_zoom),u_unpack:new u.aJ(y,r.u_unpack)}),line:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels)}),lineGradient:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels),u_image:new u.aG(y,r.u_image),u_image_height:new u.aH(y,r.u_image_height)}),linePattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_texsize:new u.aL(y,r.u_texsize),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_image:new u.aG(y,r.u_image),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade)}),lineSDF:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels),u_patternscale_a:new u.aL(y,r.u_patternscale_a),u_patternscale_b:new u.aL(y,r.u_patternscale_b),u_sdfgamma:new u.aH(y,r.u_sdfgamma),u_image:new u.aG(y,r.u_image),u_tex_y_a:new u.aH(y,r.u_tex_y_a),u_tex_y_b:new u.aH(y,r.u_tex_y_b),u_mix:new u.aH(y,r.u_mix)}),raster:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_tl_parent:new u.aL(y,r.u_tl_parent),u_scale_parent:new u.aH(y,r.u_scale_parent),u_buffer_scale:new u.aH(y,r.u_buffer_scale),u_fade_t:new u.aH(y,r.u_fade_t),u_opacity:new u.aH(y,r.u_opacity),u_image0:new u.aG(y,r.u_image0),u_image1:new u.aG(y,r.u_image1),u_brightness_low:new u.aH(y,r.u_brightness_low),u_brightness_high:new u.aH(y,r.u_brightness_high),u_saturation_factor:new u.aH(y,r.u_saturation_factor),u_contrast_factor:new u.aH(y,r.u_contrast_factor),u_spin_weights:new u.aK(y,r.u_spin_weights)}),symbolIcon:(y,r)=>({u_is_size_zoom_constant:new u.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,r.u_is_size_feature_constant),u_size_t:new u.aH(y,r.u_size_t),u_size:new u.aH(y,r.u_size),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pitch:new u.aH(y,r.u_pitch),u_rotate_symbol:new u.aG(y,r.u_rotate_symbol),u_aspect_ratio:new u.aH(y,r.u_aspect_ratio),u_fade_change:new u.aH(y,r.u_fade_change),u_matrix:new u.aI(y,r.u_matrix),u_label_plane_matrix:new u.aI(y,r.u_label_plane_matrix),u_coord_matrix:new u.aI(y,r.u_coord_matrix),u_is_text:new u.aG(y,r.u_is_text),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_texsize:new u.aL(y,r.u_texsize),u_texture:new u.aG(y,r.u_texture)}),symbolSDF:(y,r)=>({u_is_size_zoom_constant:new u.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,r.u_is_size_feature_constant),u_size_t:new u.aH(y,r.u_size_t),u_size:new u.aH(y,r.u_size),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pitch:new u.aH(y,r.u_pitch),u_rotate_symbol:new u.aG(y,r.u_rotate_symbol),u_aspect_ratio:new u.aH(y,r.u_aspect_ratio),u_fade_change:new u.aH(y,r.u_fade_change),u_matrix:new u.aI(y,r.u_matrix),u_label_plane_matrix:new u.aI(y,r.u_label_plane_matrix),u_coord_matrix:new u.aI(y,r.u_coord_matrix),u_is_text:new u.aG(y,r.u_is_text),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_texsize:new u.aL(y,r.u_texsize),u_texture:new u.aG(y,r.u_texture),u_gamma_scale:new u.aH(y,r.u_gamma_scale),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_is_halo:new u.aG(y,r.u_is_halo)}),symbolTextAndIcon:(y,r)=>({u_is_size_zoom_constant:new u.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,r.u_is_size_feature_constant),u_size_t:new u.aH(y,r.u_size_t),u_size:new u.aH(y,r.u_size),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pitch:new u.aH(y,r.u_pitch),u_rotate_symbol:new u.aG(y,r.u_rotate_symbol),u_aspect_ratio:new u.aH(y,r.u_aspect_ratio),u_fade_change:new u.aH(y,r.u_fade_change),u_matrix:new u.aI(y,r.u_matrix),u_label_plane_matrix:new u.aI(y,r.u_label_plane_matrix),u_coord_matrix:new u.aI(y,r.u_coord_matrix),u_is_text:new u.aG(y,r.u_is_text),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_texsize:new u.aL(y,r.u_texsize),u_texsize_icon:new u.aL(y,r.u_texsize_icon),u_texture:new u.aG(y,r.u_texture),u_texture_icon:new u.aG(y,r.u_texture_icon),u_gamma_scale:new u.aH(y,r.u_gamma_scale),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_is_halo:new u.aG(y,r.u_is_halo)}),background:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_opacity:new u.aH(y,r.u_opacity),u_color:new u.aM(y,r.u_color)}),backgroundPattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_opacity:new u.aH(y,r.u_opacity),u_image:new u.aG(y,r.u_image),u_pattern_tl_a:new u.aL(y,r.u_pattern_tl_a),u_pattern_br_a:new u.aL(y,r.u_pattern_br_a),u_pattern_tl_b:new u.aL(y,r.u_pattern_tl_b),u_pattern_br_b:new u.aL(y,r.u_pattern_br_b),u_texsize:new u.aL(y,r.u_texsize),u_mix:new u.aH(y,r.u_mix),u_pattern_size_a:new u.aL(y,r.u_pattern_size_a),u_pattern_size_b:new u.aL(y,r.u_pattern_size_b),u_scale_a:new u.aH(y,r.u_scale_a),u_scale_b:new u.aH(y,r.u_scale_b),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aH(y,r.u_tile_units_to_pixels)}),terrain:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_texture:new u.aG(y,r.u_texture),u_ele_delta:new u.aH(y,r.u_ele_delta)}),terrainDepth:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ele_delta:new u.aH(y,r.u_ele_delta)}),terrainCoords:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_texture:new u.aG(y,r.u_texture),u_terrain_coords_id:new u.aH(y,r.u_terrain_coords_id),u_ele_delta:new u.aH(y,r.u_ele_delta)})};class ps{constructor(r,l,f){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class oi{constructor(r,l,f,m){this.length=l.length,this.attributes=f,this.itemSize=l.bytesPerElement,this.dynamicDraw=m,this.context=r;const v=r.gl;this.buffer=v.createBuffer(),r.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,l){for(let f=0;f<this.attributes.length;f++){const m=l.attributes[this.attributes[f].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,l,f){for(let m=0;m<this.attributes.length;m++){const v=this.attributes[m],I=l.attributes[v.name];I!==void 0&&r.vertexAttribPointer(I,v.components,r[pl[v.type]],!1,this.itemSize,v.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Qr=new WeakMap;function Fs(y){var r;if(Qr.has(y))return Qr.get(y);{const l=(r=y.getParameter(y.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Qr.set(y,l),l}}class Ln{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ml extends Ln{getDefault(){return u.aO.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class gl extends Ln{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class yu extends Ln{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class js extends Ln{getDefault(){return[!0,!0,!0,!0]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class vu extends Ln{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class _u extends Ln{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class yl extends Ln{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const l=this.current;(r.func!==l.func||r.ref!==l.ref||r.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class pc extends Ln{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class mc extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}}class Ds extends Ln{getDefault(){return[0,1]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class gc extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}}class xu extends Ln{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class $h extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}}class Vh extends Ln{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Gh extends Ln{getDefault(){return u.aO.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Hh extends Ln{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class vl extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}}class _l extends Ln{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class wu extends Ln{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class bu extends Ln{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Bs extends Ln{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class xa extends Ln{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class yc extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Zo extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Xo extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Wi extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Ns extends Ln{getDefault(){return null}set(r){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Us extends Ln{getDefault(){return null}set(r){var l;if(r===this.current&&!this.dirty)return;const f=this.gl;Fs(f)?f.bindVertexArray(r):(l=f.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class vc extends Ln{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Su extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Rn extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class $s extends Ln{constructor(r,l){super(r),this.context=r,this.parent=l}getDefault(){return null}}class xl extends $s{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class _c extends $s{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class wa extends $s{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class wl{constructor(r,l,f,m,v){this.context=r,this.width=l,this.height=f;const I=r.gl,P=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new xl(r,P),m)this.depthAttachment=v?new wa(r,P):new _c(r,P);else if(v)throw new Error("Stencil cannot be set without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class hr{constructor(r,l,f){this.blendFunction=r,this.blendColor=l,this.mask=f}}hr.Replace=[1,0],hr.disabled=new hr(hr.Replace,u.aO.transparent,[!1,!1,!1,!1]),hr.unblended=new hr(hr.Replace,u.aO.transparent,[!0,!0,!0,!0]),hr.alphaBlended=new hr([1,771],u.aO.transparent,[!0,!0,!0,!0]);class Eu{constructor(r){var l,f;if(this.gl=r,this.clearColor=new ml(this),this.clearDepth=new gl(this),this.clearStencil=new yu(this),this.colorMask=new js(this),this.depthMask=new vu(this),this.stencilMask=new _u(this),this.stencilFunc=new yl(this),this.stencilOp=new pc(this),this.stencilTest=new mc(this),this.depthRange=new Ds(this),this.depthTest=new gc(this),this.depthFunc=new xu(this),this.blend=new $h(this),this.blendFunc=new Vh(this),this.blendColor=new Gh(this),this.blendEquation=new Hh(this),this.cullFace=new vl(this),this.cullFaceSide=new _l(this),this.frontFace=new wu(this),this.program=new bu(this),this.activeTexture=new Bs(this),this.viewport=new xa(this),this.bindFramebuffer=new yc(this),this.bindRenderbuffer=new Zo(this),this.bindTexture=new Xo(this),this.bindVertexBuffer=new Wi(this),this.bindElementBuffer=new Ns(this),this.bindVertexArray=new Us(this),this.pixelStoreUnpack=new vc(this),this.pixelStoreUnpackPremultiplyAlpha=new Su(this),this.pixelStoreUnpackFlipY=new Rn(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Fs(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=r.RGBA16F)!==null&&l!==void 0?l:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,l){return new ps(this,r,l)}createVertexBuffer(r,l,f){return new oi(this,r,l,f)}createRenderbuffer(r,l,f){const m=this.gl,v=m.createRenderbuffer();return this.bindRenderbuffer.set(v),m.renderbufferStorage(m.RENDERBUFFER,r,l,f),this.bindRenderbuffer.set(null),v}createFramebuffer(r,l,f,m){return new wl(this,r,l,f,m)}clear({color:r,depth:l,stencil:f}){const m=this.gl;let v=0;r&&(v|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(v|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),f!==void 0&&(v|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),m.clear(v)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aD(r.blendFunction,hr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Fs(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var l;return Fs(this.gl)?this.gl.deleteVertexArray(r):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Pn{constructor(r,l,f){this.func=r,this.mask=l,this.range=f}}Pn.ReadOnly=!1,Pn.ReadWrite=!0,Pn.disabled=new Pn(519,Pn.ReadOnly,[0,1]);const ba=7680;class Hn{constructor(r,l,f,m,v,I){this.test=r,this.ref=l,this.mask=f,this.fail=m,this.depthFail=v,this.pass=I}}Hn.disabled=new Hn({func:519,mask:0},0,0,ba,ba,ba);class jn{constructor(r,l,f){this.enable=r,this.mode=l,this.frontFace=f}}let Vs;function Sa(y,r,l,f,m,v,I){const P=y.context,M=P.gl,H=y.useProgram("collisionBox"),Q=[];let ne=0,ge=0;for(let je=0;je<f.length;je++){const Ke=f[je],it=r.getTile(Ke),ot=it.getBucket(l);if(!ot)continue;let ht=Ke.posMatrix;m[0]===0&&m[1]===0||(ht=y.translatePosMatrix(Ke.posMatrix,it,m,v));const St=I?ot.textCollisionBox:ot.iconCollisionBox,xt=ot.collisionCircleArray;if(xt.length>0){const bt=u.F(),Bt=ht;u.aP(bt,ot.placementInvProjMatrix,y.transform.glCoordMatrix),u.aP(bt,bt,ot.placementViewportMatrix),Q.push({circleArray:xt,circleOffset:ge,transform:Bt,invTransform:bt,coord:Ke}),ne+=xt.length/4,ge=ne}St&&H.draw(P,M.LINES,Pn.disabled,Hn.disabled,y.colorModeForRenderPass(),jn.disabled,cl(ht,y.transform,it),y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ke),l.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,null,y.transform.zoom,null,null,St.collisionVertexBuffer)}if(!I||!Q.length)return;const Me=y.useProgram("collisionCircle"),ke=new u.aQ;ke.resize(4*ne),ke._trim();let Le=0;for(const je of Q)for(let Ke=0;Ke<je.circleArray.length/4;Ke++){const it=4*Ke,ot=je.circleArray[it+0],ht=je.circleArray[it+1],St=je.circleArray[it+2],xt=je.circleArray[it+3];ke.emplace(Le++,ot,ht,St,xt,0),ke.emplace(Le++,ot,ht,St,xt,1),ke.emplace(Le++,ot,ht,St,xt,2),ke.emplace(Le++,ot,ht,St,xt,3)}(!Vs||Vs.length<2*ne)&&(Vs=function(je){const Ke=2*je,it=new u.aS;it.resize(Ke),it._trim();for(let ot=0;ot<Ke;ot++){const ht=6*ot;it.uint16[ht+0]=4*ot+0,it.uint16[ht+1]=4*ot+1,it.uint16[ht+2]=4*ot+2,it.uint16[ht+3]=4*ot+2,it.uint16[ht+4]=4*ot+3,it.uint16[ht+5]=4*ot+0}return it}(ne));const Te=P.createIndexBuffer(Vs,!0),Xe=P.createVertexBuffer(ke,u.aR.members,!0);for(const je of Q){const Ke={u_matrix:je.transform,u_inv_matrix:je.invTransform,u_camera_to_center_distance:(rt=y.transform).cameraToCenterDistance,u_viewport_size:[rt.width,rt.height]};Me.draw(P,M.TRIANGLES,Pn.disabled,Hn.disabled,y.colorModeForRenderPass(),jn.disabled,Ke,y.style.map.terrain&&y.style.map.terrain.getTerrainData(je.coord),l.id,Xe,Te,u.$.simpleSegment(0,2*je.circleOffset,je.circleArray.length,je.circleArray.length/2),null,y.transform.zoom,null,null,null)}var rt;Xe.destroy(),Te.destroy()}jn.disabled=new jn(!1,1029,2305),jn.backCCW=new jn(!0,1029,2305);const Ea=u.an(new Float32Array(16));function bl(y,r,l,f,m,v){const{horizontalAlign:I,verticalAlign:P}=u.at(y);return new u.P((-(I-.5)*r/m+f[0])*v,(-(P-.5)*l/m+f[1])*v)}function bo(y,r,l,f,m,v,I,P,M,H,Q){const ne=y.text.placedSymbolArray,ge=y.text.dynamicLayoutVertexArray,Me=y.icon.dynamicLayoutVertexArray,ke={};ge.clear();for(let Le=0;Le<ne.length;Le++){const Te=ne.get(Le),Xe=Te.hidden||!Te.crossTileID||y.allowVerticalPlacement&&!Te.placedOrientation?null:f[Te.crossTileID];if(Xe){const rt=new u.P(Te.anchorX,Te.anchorY),je=Ae(rt,l?I:v,Q),Ke=re(m.cameraToCenterDistance,je.signedDistanceFromCamera);let it=u.ai(y.textSizeData,M,Te)*Ke/u.ao;l&&(it*=y.tilePixelRatio/P);const{width:ot,height:ht,anchor:St,textOffset:xt,textBoxScale:bt}=Xe,Bt=bl(St,ot,ht,xt,bt,it),yn=l?Ae(rt.add(Bt),v,Q).point:je.point.add(r?Bt.rotate(-m.angle):Bt),Pt=y.allowVerticalPlacement&&Te.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let un=0;un<Te.numGlyphs;un++)u.aj(ge,yn,Pt);H&&Te.associatedIconIndex>=0&&(ke[Te.associatedIconIndex]={shiftedAnchor:yn,angle:Pt})}else Gt(Te.numGlyphs,ge)}if(H){Me.clear();const Le=y.icon.placedSymbolArray;for(let Te=0;Te<Le.length;Te++){const Xe=Le.get(Te);if(Xe.hidden)Gt(Xe.numGlyphs,Me);else{const rt=ke[Te];if(rt)for(let je=0;je<Xe.numGlyphs;je++)u.aj(Me,rt.shiftedAnchor,rt.angle);else Gt(Xe.numGlyphs,Me)}}y.icon.dynamicLayoutVertexBuffer.updateData(Me)}y.text.dynamicLayoutVertexBuffer.updateData(ge)}function qo(y,r,l){return l.iconsInText&&r?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Xr(y,r,l,f,m,v,I,P,M,H,Q,ne){const ge=y.context,Me=ge.gl,ke=y.transform,Le=P==="map",Te=M==="map",Xe=P!=="viewport"&&l.layout.get("symbol-placement")!=="point",rt=Le&&!Te&&!Xe,je=!l.layout.get("symbol-sort-key").isConstant();let Ke=!1;const it=y.depthModeForSublayer(0,Pn.ReadOnly),ot=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ht=[];for(const St of f){const xt=r.getTile(St),bt=xt.getBucket(l);if(!bt)continue;const Bt=m?bt.text:bt.icon;if(!Bt||!Bt.segments.get().length||!Bt.hasVisibleVertices)continue;const yn=Bt.programConfigurations.get(l.id),Pt=m||bt.sdfIcons,un=m?bt.textSizeData:bt.iconSizeData,xn=Te||ke.pitch!==0,kn=y.useProgram(qo(Pt,m,bt),yn),hn=u.ag(un,ke.zoom),wn=y.style.map.terrain&&y.style.map.terrain.getTerrainData(St);let bn,dr,Yn,Ri,Rr=[0,0],Qn=null;if(m)dr=xt.glyphAtlasTexture,Yn=Me.LINEAR,bn=xt.glyphAtlasTexture.size,bt.iconsInText&&(Rr=xt.imageAtlasTexture.size,Qn=xt.imageAtlasTexture,Ri=xn||y.options.rotating||y.options.zooming||un.kind==="composite"||un.kind==="camera"?Me.LINEAR:Me.NEAREST);else{const ar=l.layout.get("icon-size").constantOr(0)!==1||bt.iconsNeedLinear;dr=xt.imageAtlasTexture,Yn=Pt||y.options.rotating||y.options.zooming||ar||xn?Me.LINEAR:Me.NEAREST,bn=xt.imageAtlasTexture.size}const li=cn(xt,1,y.transform.zoom),Ao=mi(St.posMatrix,Te,Le,y.transform,li),Jo=gi(St.posMatrix,Te,Le,y.transform,li),Oa=ot&&bt.hasTextData(),La=l.layout.get("icon-text-fit")!=="none"&&Oa&&bt.hasIconData();if(Xe){const ar=y.style.map.terrain?(Zi,An)=>y.style.map.terrain.getElevation(St,Zi,An):null,qr=l.layout.get("text-rotation-alignment")==="map";me(bt,St.posMatrix,y,m,Ao,Jo,Te,H,qr,ar)}const Qo=y.translatePosMatrix(St.posMatrix,xt,v,I),Po=Xe||m&&ot||La?Ea:Ao,gr=y.translatePosMatrix(Jo,xt,v,I,!0),nr=Pt&&l.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let br;br=Pt?bt.iconsInText?Uh(un.kind,hn,rt,Te,y,Qo,Po,gr,bn,Rr):Ls(un.kind,hn,rt,Te,y,Qo,Po,gr,m,bn,!0):_a(un.kind,hn,rt,Te,y,Qo,Po,gr,m,bn);const zl={program:kn,buffers:Bt,uniformValues:br,atlasTexture:dr,atlasTextureIcon:Qn,atlasInterpolation:Yn,atlasInterpolationIcon:Ri,isSDF:Pt,hasHalo:nr};if(je&&bt.canOverlap){Ke=!0;const ar=Bt.segments.get();for(const qr of ar)ht.push({segments:new u.$([qr]),sortKey:qr.sortKey,state:zl,terrainData:wn})}else ht.push({segments:Bt.segments,sortKey:0,state:zl,terrainData:wn})}Ke&&ht.sort((St,xt)=>St.sortKey-xt.sortKey);for(const St of ht){const xt=St.state;if(ge.activeTexture.set(Me.TEXTURE0),xt.atlasTexture.bind(xt.atlasInterpolation,Me.CLAMP_TO_EDGE),xt.atlasTextureIcon&&(ge.activeTexture.set(Me.TEXTURE1),xt.atlasTextureIcon&&xt.atlasTextureIcon.bind(xt.atlasInterpolationIcon,Me.CLAMP_TO_EDGE)),xt.isSDF){const bt=xt.uniformValues;xt.hasHalo&&(bt.u_is_halo=1,ho(xt.buffers,St.segments,l,y,xt.program,it,Q,ne,bt,St.terrainData)),bt.u_is_halo=0}ho(xt.buffers,St.segments,l,y,xt.program,it,Q,ne,xt.uniformValues,St.terrainData)}}function ho(y,r,l,f,m,v,I,P,M,H){const Q=f.context;m.draw(Q,Q.gl.TRIANGLES,v,I,P,jn.disabled,M,H,l.id,y.layoutVertexBuffer,y.indexBuffer,r,l.paint,f.transform.zoom,y.programConfigurations.get(l.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Sl(y,r,l,f,m){if(!l||!f||!f.imageAtlas)return;const v=f.imageAtlas.patternPositions;let I=v[l.to.toString()],P=v[l.from.toString()];if(!I&&P&&(I=P),!P&&I&&(P=I),!I||!P){const M=m.getPaintProperty(r);I=v[M],P=v[M]}I&&P&&y.setConstantPatternPositions(I,P)}function Ta(y,r,l,f,m,v,I){const P=y.context.gl,M="fill-pattern",H=l.paint.get(M),Q=H&&H.constantOr(1),ne=l.getCrossfadeParameters();let ge,Me,ke,Le,Te;I?(Me=Q&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ge=P.LINES):(Me=Q?"fillPattern":"fill",ge=P.TRIANGLES);const Xe=H.constantOr(null);for(const rt of f){const je=r.getTile(rt);if(Q&&!je.patternsLoaded())continue;const Ke=je.getBucket(l);if(!Ke)continue;const it=Ke.programConfigurations.get(l.id),ot=y.useProgram(Me,it),ht=y.style.map.terrain&&y.style.map.terrain.getTerrainData(rt);Q&&(y.context.activeTexture.set(P.TEXTURE0),je.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),it.updatePaintBuffers(ne)),Sl(it,M,Xe,je,l);const St=ht?rt:null,xt=y.translatePosMatrix(St?St.posMatrix:rt.posMatrix,je,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(I){Le=Ke.indexBuffer2,Te=Ke.segments2;const bt=[P.drawingBufferWidth,P.drawingBufferHeight];ke=Me==="fillOutlinePattern"&&Q?mu(xt,y,ne,je,bt):pu(xt,bt)}else Le=Ke.indexBuffer,Te=Ke.segments,ke=Q?lc(xt,y,ne,je):ul(xt);ot.draw(y.context,ge,m,y.stencilModeForClipping(rt),v,jn.disabled,ke,ht,l.id,Ke.layoutVertexBuffer,Le,Te,l.paint,y.transform.zoom,it)}}function Gs(y,r,l,f,m,v,I){const P=y.context,M=P.gl,H="fill-extrusion-pattern",Q=l.paint.get(H),ne=Q.constantOr(1),ge=l.getCrossfadeParameters(),Me=l.paint.get("fill-extrusion-opacity"),ke=Q.constantOr(null);for(const Le of f){const Te=r.getTile(Le),Xe=Te.getBucket(l);if(!Xe)continue;const rt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Le),je=Xe.programConfigurations.get(l.id),Ke=y.useProgram(ne?"fillExtrusionPattern":"fillExtrusion",je);ne&&(y.context.activeTexture.set(M.TEXTURE0),Te.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),je.updatePaintBuffers(ge)),Sl(je,H,ke,Te,l);const it=y.translatePosMatrix(Le.posMatrix,Te,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),ot=l.paint.get("fill-extrusion-vertical-gradient"),ht=ne?Nh(it,y,ot,Me,Le,ge,Te):ac(it,y,ot,Me);Ke.draw(P,P.gl.TRIANGLES,m,v,I,jn.backCCW,ht,rt,l.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,l.paint,y.transform.zoom,je,y.style.map.terrain&&Xe.centroidVertexBuffer)}}function Hs(y,r,l,f,m,v,I){const P=y.context,M=P.gl,H=l.fbo;if(!H)return;const Q=y.useProgram("hillshade"),ne=y.style.map.terrain&&y.style.map.terrain.getTerrainData(r);P.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,H.colorAttachment.get()),Q.draw(P,M.TRIANGLES,m,v,I,jn.disabled,((ge,Me,ke,Le)=>{const Te=ke.paint.get("hillshade-shadow-color"),Xe=ke.paint.get("hillshade-highlight-color"),rt=ke.paint.get("hillshade-accent-color");let je=ke.paint.get("hillshade-illumination-direction")*(Math.PI/180);ke.paint.get("hillshade-illumination-anchor")==="viewport"&&(je-=ge.transform.angle);const Ke=!ge.options.moving;return{u_matrix:Le?Le.posMatrix:ge.transform.calculatePosMatrix(Me.tileID.toUnwrapped(),Ke),u_image:0,u_latrange:cc(0,Me.tileID),u_light:[ke.paint.get("hillshade-exaggeration"),je],u_shadow:Te,u_highlight:Xe,u_accent:rt}})(y,l,f,ne?r:null),ne,f.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Ca(y,r,l,f,m,v){const I=y.context,P=I.gl,M=r.dem;if(M&&M.data){const H=M.dim,Q=M.stride,ne=M.getPixels();if(I.activeTexture.set(P.TEXTURE1),I.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||y.getTileTexture(Q),r.demTexture){const Me=r.demTexture;Me.update(ne,{premultiply:!1}),Me.bind(P.NEAREST,P.CLAMP_TO_EDGE)}else r.demTexture=new pe(I,ne,P.RGBA,{premultiply:!1}),r.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);I.activeTexture.set(P.TEXTURE0);let ge=r.fbo;if(!ge){const Me=new pe(I,{width:H,height:H,data:null},P.RGBA);Me.bind(P.LINEAR,P.CLAMP_TO_EDGE),ge=r.fbo=I.createFramebuffer(H,H,!0,!1),ge.colorAttachment.set(Me.texture)}I.bindFramebuffer.set(ge.framebuffer),I.viewport.set([0,0,H,H]),y.useProgram("hillshadePrepare").draw(I,P.TRIANGLES,f,m,v,jn.disabled,((Me,ke)=>{const Le=ke.stride,Te=u.F();return u.aN(Te,0,u.W,-u.W,0,0,1),u.H(Te,Te,[0,-u.W,0]),{u_matrix:Te,u_image:1,u_dimension:[Le,Le],u_zoom:Me.overscaledZ,u_unpack:ke.getUnpackVector()}})(r.tileID,M),null,l.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Mi(y,r,l,f,m,v){const I=f.paint.get("raster-fade-duration");if(!v&&I>0){const P=w.now(),M=(P-y.timeAdded)/I,H=r?(P-r.timeAdded)/I:-1,Q=l.getSource(),ne=m.coveringZoomLevel({tileSize:Q.tileSize,roundZoom:Q.roundZoom}),ge=!r||Math.abs(r.tileID.overscaledZ-ne)>Math.abs(y.tileID.overscaledZ-ne),Me=ge&&y.refreshedUponExpiration?1:u.ac(ge?M:1-H,0,1);return y.refreshedUponExpiration&&M>=1&&(y.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Me}:{opacity:Me,mix:0}}return{opacity:1,mix:0}}const So=new u.aO(1,0,0,1),El=new u.aO(0,1,0,1),Tl=new u.aO(0,0,1,1),Ia=new u.aO(1,0,1,1),sr=new u.aO(0,1,1,1);function Eo(y,r,l,f){ms(y,0,r+l/2,y.transform.width,l,f)}function si(y,r,l,f){ms(y,r-l/2,0,l,y.transform.height,f)}function ms(y,r,l,f,m,v){const I=y.context,P=I.gl;P.enable(P.SCISSOR_TEST),P.scissor(r*y.pixelRatio,l*y.pixelRatio,f*y.pixelRatio,m*y.pixelRatio),I.clear({color:v}),P.disable(P.SCISSOR_TEST)}function fo(y,r,l){const f=y.context,m=f.gl,v=l.posMatrix,I=y.useProgram("debug"),P=Pn.disabled,M=Hn.disabled,H=y.colorModeForRenderPass(),Q="$debug",ne=y.style.map.terrain&&y.style.map.terrain.getTerrainData(l);f.activeTexture.set(m.TEXTURE0);const ge=r.getTileByID(l.key).latestRawTileData,Me=Math.floor((ge&&ge.byteLength||0)/1024),ke=r.getTile(l).tileSize,Le=512/Math.min(ke,512)*(l.overscaledZ/y.transform.zoom)*.5;let Te=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(Te+=` => ${l.overscaledZ}`),function(Xe,rt){Xe.initDebugOverlayCanvas();const je=Xe.debugOverlayCanvas,Ke=Xe.context.gl,it=Xe.debugOverlayCanvas.getContext("2d");it.clearRect(0,0,je.width,je.height),it.shadowColor="white",it.shadowBlur=2,it.lineWidth=1.5,it.strokeStyle="white",it.textBaseline="top",it.font="bold 36px Open Sans, sans-serif",it.fillText(rt,5,5),it.strokeText(rt,5,5),Xe.debugOverlayTexture.update(je),Xe.debugOverlayTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE)}(y,`${Te} ${Me}kB`),I.draw(f,m.TRIANGLES,P,M,hr.alphaBlended,jn.disabled,hl(v,u.aO.transparent,Le),null,Q,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),I.draw(f,m.LINE_STRIP,P,M,H,jn.disabled,hl(v,u.aO.red),ne,Q,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Cl(y,r,l){const f=y.context,m=f.gl,v=y.colorModeForRenderPass(),I=new Pn(m.LEQUAL,Pn.ReadWrite,y.depthRangeFor3D),P=y.useProgram("terrain"),M=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,y.width,y.height]);for(const H of l){const Q=y.renderToTexture.getTexture(H),ne=r.getTerrainData(H.tileID);f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,Q.texture);const ge={u_matrix:y.transform.calculatePosMatrix(H.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(y.transform.zoom)};P.draw(f,m.TRIANGLES,I,Hn.disabled,v,jn.backCCW,ge,ne,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class Ws{constructor(r,l){this.context=new Eu(r),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=st.maxUnderzooming+st.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new cr}resize(r,l,f){if(this.width=Math.floor(r*f),this.height=Math.floor(l*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,l=new u.aV;l.emplaceBack(0,0),l.emplaceBack(u.W,0),l.emplaceBack(0,u.W),l.emplaceBack(u.W,u.W),this.tileExtentBuffer=r.createVertexBuffer(l,uo.members),this.tileExtentSegments=u.$.simpleSegment(0,0,4,2);const f=new u.aV;f.emplaceBack(0,0),f.emplaceBack(u.W,0),f.emplaceBack(0,u.W),f.emplaceBack(u.W,u.W),this.debugBuffer=r.createVertexBuffer(f,uo.members),this.debugSegments=u.$.simpleSegment(0,0,4,5);const m=new u.Z;m.emplaceBack(0,0,0,0),m.emplaceBack(u.W,0,u.W,0),m.emplaceBack(0,u.W,0,u.W),m.emplaceBack(u.W,u.W,u.W,u.W),this.rasterBoundsBuffer=r.createVertexBuffer(m,N.members),this.rasterBoundsSegments=u.$.simpleSegment(0,0,4,2);const v=new u.aV;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(v,uo.members),this.viewportSegments=u.$.simpleSegment(0,0,4,2);const I=new u.aW;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(I);const P=new u.aX;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(P);const M=this.context.gl;this.stencilClearMode=new Hn({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=u.F();u.aN(f,0,this.width,this.height,0,0,1),u.J(f,f,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,l.TRIANGLES,Pn.disabled,this.stencilClearMode,hr.disabled,jn.disabled,Wo(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,l){if(this.currentStencilSource===r.source||!r.isTileClipped()||!l||!l.length)return;this.currentStencilSource=r.source;const f=this.context,m=f.gl;this.nextStencilID+l.length>256&&this.clearStencil(),f.setColorMode(hr.disabled),f.setDepthMode(Pn.disabled);const v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const I of l){const P=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(I);v.draw(f,m.TRIANGLES,Pn.disabled,new Hn({func:m.ALWAYS,mask:0},P,255,m.KEEP,m.KEEP,m.REPLACE),hr.disabled,jn.disabled,Wo(I.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,l=this.context.gl;return new Hn({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(r){const l=this.context.gl;return new Hn({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(r){const l=this.context.gl,f=r.sort((I,P)=>P.overscaledZ-I.overscaledZ),m=f[f.length-1].overscaledZ,v=f[0].overscaledZ-m+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const I={};for(let P=0;P<v;P++)I[P+m]=new Hn({func:l.GEQUAL,mask:255},P+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=v,[I,f]}return[{[m]:Hn.disabled},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new hr([r.CONSTANT_COLOR,r.ONE],new u.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?hr.unblended:hr.alphaBlended}depthModeForSublayer(r,l,f){if(!this.opaquePassEnabledForLayer())return Pn.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Pn(f||this.context.gl.LEQUAL,l,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,l){this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(w.now()),this.imageManager.beginFrame();const f=this.style._order,m=this.style.sourceCaches,v={},I={},P={};for(const M in m){const H=m[M];H.used&&H.prepare(this.context),v[M]=H.getVisibleCoordinates(),I[M]=v[M].slice().reverse(),P[M]=H.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<f.length;M++)if(this.style._layers[f[M]].is3D()){this.opaquePassCutoff=M;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const M of f){const H=this.style._layers[M];if(!H.hasOffscreenPass()||H.isHidden(this.transform.zoom))continue;const Q=I[H.source];(H.type==="custom"||Q.length)&&this.renderLayer(this,m[H.source],H,Q)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?u.aO.black:u.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[f[this.currentLayer]],H=m[M.source],Q=v[M.source];this._renderTileClippingMasks(M,Q),this.renderLayer(this,H,M,Q)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const M=this.style._layers[f[this.currentLayer]],H=m[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const Q=(M.type==="symbol"?P:I)[M.source];this._renderTileClippingMasks(M,v[M.source]),this.renderLayer(this,H,M,Q)}if(this.options.showTileBoundaries){const M=function(H,Q){let ne=null;const ge=Object.values(H._layers).flatMap(Te=>Te.source&&!Te.isHidden(Q)?[H.sourceCaches[Te.source]]:[]),Me=ge.filter(Te=>Te.getSource().type==="vector"),ke=ge.filter(Te=>Te.getSource().type!=="vector"),Le=Te=>{(!ne||ne.getSource().maxzoom<Te.getSource().maxzoom)&&(ne=Te)};return Me.forEach(Te=>Le(Te)),ne||ke.forEach(Te=>Le(Te)),ne}(this.style,this.transform.zoom);M&&function(H,Q,ne){for(let ge=0;ge<ne.length;ge++)fo(H,Q,ne[ge])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const H=M.transform.padding;Eo(M,M.transform.height-(H.top||0),3,So),Eo(M,H.bottom||0,3,El),si(M,H.left||0,3,Tl),si(M,M.transform.width-(H.right||0),3,Ia);const Q=M.transform.centerPoint;(function(ne,ge,Me,ke){ms(ne,ge-1,Me-10,2,20,ke),ms(ne,ge-10,Me-1,20,2,ke)})(M,Q.x,M.transform.height-Q.y,sr)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,f=this.transform.projMatrix;let m=this.terrainFacilitator.dirty;m||(m=r?!u.aY(l,f):!u.aZ(l,f)),m||(m=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),m&&(u.a_(l,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(v,I){const P=v.context,M=P.gl,H=hr.unblended,Q=new Pn(M.LEQUAL,Pn.ReadWrite,[0,1]),ne=I.getTerrainMesh(),ge=I.sourceCache.getRenderableTiles(),Me=v.useProgram("terrainDepth");P.bindFramebuffer.set(I.getFramebuffer("depth").framebuffer),P.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),P.clear({color:u.aO.transparent,depth:1});for(const ke of ge){const Le=I.getTerrainData(ke.tileID),Te={u_matrix:v.transform.calculatePosMatrix(ke.tileID.toUnwrapped()),u_ele_delta:I.getMeshFrameDelta(v.transform.zoom)};Me.draw(P,M.TRIANGLES,Q,Hn.disabled,H,jn.backCCW,Te,Le,"terrain",ne.vertexBuffer,ne.indexBuffer,ne.segments)}P.bindFramebuffer.set(null),P.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain),function(v,I){const P=v.context,M=P.gl,H=hr.unblended,Q=new Pn(M.LEQUAL,Pn.ReadWrite,[0,1]),ne=I.getTerrainMesh(),ge=I.getCoordsTexture(),Me=I.sourceCache.getRenderableTiles(),ke=v.useProgram("terrainCoords");P.bindFramebuffer.set(I.getFramebuffer("coords").framebuffer),P.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),P.clear({color:u.aO.transparent,depth:1}),I.coordsIndex=[];for(const Le of Me){const Te=I.getTerrainData(Le.tileID);P.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,ge.texture);const Xe={u_matrix:v.transform.calculatePosMatrix(Le.tileID.toUnwrapped()),u_terrain_coords_id:(255-I.coordsIndex.length)/255,u_texture:0,u_ele_delta:I.getMeshFrameDelta(v.transform.zoom)};ke.draw(P,M.TRIANGLES,Q,Hn.disabled,H,jn.backCCW,Xe,Te,"terrain",ne.vertexBuffer,ne.indexBuffer,ne.segments),I.coordsIndex.push(Le.tileID.key)}P.bindFramebuffer.set(null),P.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain))}renderLayer(r,l,f,m){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(m||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(v,I,P,M,H){if(v.renderPass!=="translucent")return;const Q=Hn.disabled,ne=v.colorModeForRenderPass();(P._unevaluatedLayout.hasValue("text-variable-anchor")||P._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ge,Me,ke,Le,Te,Xe,rt){const je=Me.transform,Ke=Te==="map",it=Xe==="map";for(const ot of ge){const ht=Le.getTile(ot),St=ht.getBucket(ke);if(!St||!St.text||!St.text.segments.get().length)continue;const xt=u.ag(St.textSizeData,je.zoom),bt=cn(ht,1,Me.transform.zoom),Bt=mi(ot.posMatrix,it,Ke,Me.transform,bt),yn=ke.layout.get("icon-text-fit")!=="none"&&St.hasIconData();if(xt){const Pt=Math.pow(2,je.zoom-ht.tileID.overscaledZ);bo(St,Ke,it,rt,je,Bt,ot.posMatrix,Pt,xt,yn,Me.style.map.terrain?(un,xn)=>Me.style.map.terrain.getElevation(ot,un,xn):null)}}}(M,v,P,I,P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),H),P.paint.get("icon-opacity").constantOr(1)!==0&&Xr(v,I,P,M,!1,P.paint.get("icon-translate"),P.paint.get("icon-translate-anchor"),P.layout.get("icon-rotation-alignment"),P.layout.get("icon-pitch-alignment"),P.layout.get("icon-keep-upright"),Q,ne),P.paint.get("text-opacity").constantOr(1)!==0&&Xr(v,I,P,M,!0,P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),P.layout.get("text-keep-upright"),Q,ne),I.map.showCollisionBoxes&&(Sa(v,I,P,M,P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),!0),Sa(v,I,P,M,P.paint.get("icon-translate"),P.paint.get("icon-translate-anchor"),!1))})(r,l,f,m,this.style.placement.variableOffsets);break;case"circle":(function(v,I,P,M){if(v.renderPass!=="translucent")return;const H=P.paint.get("circle-opacity"),Q=P.paint.get("circle-stroke-width"),ne=P.paint.get("circle-stroke-opacity"),ge=!P.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(Q.constantOr(1)===0||ne.constantOr(1)===0))return;const Me=v.context,ke=Me.gl,Le=v.depthModeForSublayer(0,Pn.ReadOnly),Te=Hn.disabled,Xe=v.colorModeForRenderPass(),rt=[];for(let je=0;je<M.length;je++){const Ke=M[je],it=I.getTile(Ke),ot=it.getBucket(P);if(!ot)continue;const ht=ot.programConfigurations.get(P.id),St=v.useProgram("circle",ht),xt=ot.layoutVertexBuffer,bt=ot.indexBuffer,Bt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ke),yn={programConfiguration:ht,program:St,layoutVertexBuffer:xt,indexBuffer:bt,uniformValues:gu(v,Ke,it,P),terrainData:Bt};if(ge){const Pt=ot.segments.get();for(const un of Pt)rt.push({segments:new u.$([un]),sortKey:un.sortKey,state:yn})}else rt.push({segments:ot.segments,sortKey:0,state:yn})}ge&&rt.sort((je,Ke)=>je.sortKey-Ke.sortKey);for(const je of rt){const{programConfiguration:Ke,program:it,layoutVertexBuffer:ot,indexBuffer:ht,uniformValues:St,terrainData:xt}=je.state;it.draw(Me,ke.TRIANGLES,Le,Te,Xe,jn.disabled,St,xt,P.id,ot,ht,je.segments,P.paint,v.transform.zoom,Ke)}})(r,l,f,m);break;case"heatmap":(function(v,I,P,M){if(P.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const H=v.context,Q=H.gl,ne=Hn.disabled,ge=new hr([Q.ONE,Q.ONE],u.aO.transparent,[!0,!0,!0,!0]);(function(Me,ke,Le){const Te=Me.gl;Me.activeTexture.set(Te.TEXTURE1),Me.viewport.set([0,0,ke.width/4,ke.height/4]);let Xe=Le.heatmapFbo;if(Xe)Te.bindTexture(Te.TEXTURE_2D,Xe.colorAttachment.get()),Me.bindFramebuffer.set(Xe.framebuffer);else{const rt=Te.createTexture();Te.bindTexture(Te.TEXTURE_2D,rt),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_S,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_T,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,Te.LINEAR),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,Te.LINEAR),Xe=Le.heatmapFbo=Me.createFramebuffer(ke.width/4,ke.height/4,!1,!1),function(je,Ke,it,ot){var ht,St;const xt=je.gl,bt=(ht=je.HALF_FLOAT)!==null&&ht!==void 0?ht:xt.UNSIGNED_BYTE,Bt=(St=je.RGBA16F)!==null&&St!==void 0?St:xt.RGBA;xt.texImage2D(xt.TEXTURE_2D,0,Bt,Ke.width/4,Ke.height/4,0,xt.RGBA,bt,null),ot.colorAttachment.set(it)}(Me,ke,rt,Xe)}})(H,v,P),H.clear({color:u.aO.transparent});for(let Me=0;Me<M.length;Me++){const ke=M[Me];if(I.hasRenderableParent(ke))continue;const Le=I.getTile(ke),Te=Le.getBucket(P);if(!Te)continue;const Xe=Te.programConfigurations.get(P.id),rt=v.useProgram("heatmap",Xe),{zoom:je}=v.transform;rt.draw(H,Q.TRIANGLES,Pn.disabled,ne,ge,jn.disabled,uc(ke.posMatrix,Le,je,P.paint.get("heatmap-intensity")),null,P.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,P.paint,v.transform.zoom,Xe)}H.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),function(H,Q){const ne=H.context,ge=ne.gl,Me=Q.heatmapFbo;if(!Me)return;ne.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,Me.colorAttachment.get()),ne.activeTexture.set(ge.TEXTURE1);let ke=Q.colorRampTexture;ke||(ke=Q.colorRampTexture=new pe(ne,Q.colorRamp,ge.RGBA)),ke.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(ne,ge.TRIANGLES,Pn.disabled,Hn.disabled,H.colorModeForRenderPass(),jn.disabled,((Le,Te,Xe,rt)=>{const je=u.F();u.aN(je,0,Le.width,Le.height,0,0,1);const Ke=Le.context.gl;return{u_matrix:je,u_world:[Ke.drawingBufferWidth,Ke.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Te.paint.get("heatmap-opacity")}})(H,Q),null,Q.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,Q.paint,H.transform.zoom)}(v,P))})(r,l,f,m);break;case"line":(function(v,I,P,M){if(v.renderPass!=="translucent")return;const H=P.paint.get("line-opacity"),Q=P.paint.get("line-width");if(H.constantOr(1)===0||Q.constantOr(1)===0)return;const ne=v.depthModeForSublayer(0,Pn.ReadOnly),ge=v.colorModeForRenderPass(),Me=P.paint.get("line-dasharray"),ke=P.paint.get("line-pattern"),Le=ke.constantOr(1),Te=P.paint.get("line-gradient"),Xe=P.getCrossfadeParameters(),rt=Le?"linePattern":Me?"lineSDF":Te?"lineGradient":"line",je=v.context,Ke=je.gl;let it=!0;for(const ot of M){const ht=I.getTile(ot);if(Le&&!ht.patternsLoaded())continue;const St=ht.getBucket(P);if(!St)continue;const xt=St.programConfigurations.get(P.id),bt=v.context.program.get(),Bt=v.useProgram(rt,xt),yn=it||Bt.program!==bt,Pt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ot),un=ke.constantOr(null);if(un&&ht.imageAtlas){const hn=ht.imageAtlas,wn=hn.patternPositions[un.to.toString()],bn=hn.patternPositions[un.from.toString()];wn&&bn&&xt.setConstantPatternPositions(wn,bn)}const xn=Pt?ot:null,kn=Le?ga(v,ht,P,Xe,xn):Me?ki(v,ht,P,Me,Xe,xn):Te?ds(v,ht,P,St.lineClipsArray.length,xn):dl(v,ht,P,xn);if(Le)je.activeTexture.set(Ke.TEXTURE0),ht.imageAtlasTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE),xt.updatePaintBuffers(Xe);else if(Me&&(yn||v.lineAtlas.dirty))je.activeTexture.set(Ke.TEXTURE0),v.lineAtlas.bind(je);else if(Te){const hn=St.gradients[P.id];let wn=hn.texture;if(P.gradientVersion!==hn.version){let bn=256;if(P.stepInterpolant){const dr=I.getSource().maxzoom,Yn=ot.canonical.z===dr?Math.ceil(1<<v.transform.maxZoom-ot.canonical.z):1;bn=u.ac(u.aT(St.maxLineLength/u.W*1024*Yn),256,je.maxTextureSize)}hn.gradient=u.aU({expression:P.gradientExpression(),evaluationKey:"lineProgress",resolution:bn,image:hn.gradient||void 0,clips:St.lineClipsArray}),hn.texture?hn.texture.update(hn.gradient):hn.texture=new pe(je,hn.gradient,Ke.RGBA),hn.version=P.gradientVersion,wn=hn.texture}je.activeTexture.set(Ke.TEXTURE0),wn.bind(P.stepInterpolant?Ke.NEAREST:Ke.LINEAR,Ke.CLAMP_TO_EDGE)}Bt.draw(je,Ke.TRIANGLES,ne,v.stencilModeForClipping(ot),ge,jn.disabled,kn,Pt,P.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,P.paint,v.transform.zoom,xt,St.layoutVertexBuffer2),it=!1}})(r,l,f,m);break;case"fill":(function(v,I,P,M){const H=P.paint.get("fill-color"),Q=P.paint.get("fill-opacity");if(Q.constantOr(1)===0)return;const ne=v.colorModeForRenderPass(),ge=P.paint.get("fill-pattern"),Me=v.opaquePassEnabledForLayer()&&!ge.constantOr(1)&&H.constantOr(u.aO.transparent).a===1&&Q.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===Me){const ke=v.depthModeForSublayer(1,v.renderPass==="opaque"?Pn.ReadWrite:Pn.ReadOnly);Ta(v,I,P,M,ke,ne,!1)}if(v.renderPass==="translucent"&&P.paint.get("fill-antialias")){const ke=v.depthModeForSublayer(P.getPaintProperty("fill-outline-color")?2:0,Pn.ReadOnly);Ta(v,I,P,M,ke,ne,!0)}})(r,l,f,m);break;case"fill-extrusion":(function(v,I,P,M){const H=P.paint.get("fill-extrusion-opacity");if(H!==0&&v.renderPass==="translucent"){const Q=new Pn(v.context.gl.LEQUAL,Pn.ReadWrite,v.depthRangeFor3D);if(H!==1||P.paint.get("fill-extrusion-pattern").constantOr(1))Gs(v,I,P,M,Q,Hn.disabled,hr.disabled),Gs(v,I,P,M,Q,v.stencilModeFor3D(),v.colorModeForRenderPass());else{const ne=v.colorModeForRenderPass();Gs(v,I,P,M,Q,Hn.disabled,ne)}}})(r,l,f,m);break;case"hillshade":(function(v,I,P,M){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const H=v.context,Q=v.depthModeForSublayer(0,Pn.ReadOnly),ne=v.colorModeForRenderPass(),[ge,Me]=v.renderPass==="translucent"?v.stencilConfigForOverlap(M):[{},M];for(const ke of Me){const Le=I.getTile(ke);Le.needsHillshadePrepare!==void 0&&Le.needsHillshadePrepare&&v.renderPass==="offscreen"?Ca(v,Le,P,Q,Hn.disabled,ne):v.renderPass==="translucent"&&Hs(v,ke,Le,P,Q,ge[ke.overscaledZ],ne)}H.viewport.set([0,0,v.width,v.height])})(r,l,f,m);break;case"raster":(function(v,I,P,M){if(v.renderPass!=="translucent"||P.paint.get("raster-opacity")===0||!M.length)return;const H=v.context,Q=H.gl,ne=I.getSource(),ge=v.useProgram("raster"),Me=v.colorModeForRenderPass(),[ke,Le]=ne instanceof D?[{},M]:v.stencilConfigForOverlap(M),Te=Le[Le.length-1].overscaledZ,Xe=!v.options.moving;for(const rt of Le){const je=v.depthModeForSublayer(rt.overscaledZ-Te,P.paint.get("raster-opacity")===1?Pn.ReadWrite:Pn.ReadOnly,Q.LESS),Ke=I.getTile(rt);Ke.registerFadeDuration(P.paint.get("raster-fade-duration"));const it=I.findLoadedParent(rt,0),ot=Mi(Ke,it,I,P,v.transform,v.style.map.terrain);let ht,St;const xt=P.paint.get("raster-resampling")==="nearest"?Q.NEAREST:Q.LINEAR;H.activeTexture.set(Q.TEXTURE0),Ke.texture.bind(xt,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(Q.TEXTURE1),it?(it.texture.bind(xt,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),ht=Math.pow(2,it.tileID.overscaledZ-Ke.tileID.overscaledZ),St=[Ke.tileID.canonical.x*ht%1,Ke.tileID.canonical.y*ht%1]):Ke.texture.bind(xt,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST);const bt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(rt),Bt=bt?rt:null,yn=Bt?Bt.posMatrix:v.transform.calculatePosMatrix(rt.toUnwrapped(),Xe),Pt=fs(yn,St||[0,0],ht||1,ot,P);ne instanceof D?ge.draw(H,Q.TRIANGLES,je,Hn.disabled,Me,jn.disabled,Pt,bt,P.id,ne.boundsBuffer,v.quadTriangleIndexBuffer,ne.boundsSegments):ge.draw(H,Q.TRIANGLES,je,ke[rt.overscaledZ],Me,jn.disabled,Pt,bt,P.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}})(r,l,f,m);break;case"background":(function(v,I,P,M){const H=P.paint.get("background-color"),Q=P.paint.get("background-opacity");if(Q===0)return;const ne=v.context,ge=ne.gl,Me=v.transform,ke=Me.tileSize,Le=P.paint.get("background-pattern");if(v.isPatternMissing(Le))return;const Te=!Le&&H.a===1&&Q===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==Te)return;const Xe=Hn.disabled,rt=v.depthModeForSublayer(0,Te==="opaque"?Pn.ReadWrite:Pn.ReadOnly),je=v.colorModeForRenderPass(),Ke=v.useProgram(Le?"backgroundPattern":"background"),it=M||Me.coveringTiles({tileSize:ke,terrain:v.style.map.terrain});Le&&(ne.activeTexture.set(ge.TEXTURE0),v.imageManager.bind(v.context));const ot=P.getCrossfadeParameters();for(const ht of it){const St=M?ht.posMatrix:v.transform.calculatePosMatrix(ht.toUnwrapped()),xt=Le?dc(St,Q,v,Le,{tileID:ht,tileSize:ke},ot):hc(St,Q,H),bt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ht);Ke.draw(ne,ge.TRIANGLES,rt,Xe,je,jn.disabled,xt,bt,P.id,v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}})(r,0,f,m);break;case"custom":(function(v,I,P){const M=v.context,H=P.implementation;if(v.renderPass==="offscreen"){const Q=H.prerender;Q&&(v.setCustomLayerDefaults(),M.setColorMode(v.colorModeForRenderPass()),Q.call(H,M.gl,v.transform.customLayerMatrix()),M.setDirty(),v.setBaseState())}else if(v.renderPass==="translucent"){v.setCustomLayerDefaults(),M.setColorMode(v.colorModeForRenderPass()),M.setStencilMode(Hn.disabled);const Q=H.renderingMode==="3d"?new Pn(v.context.gl.LEQUAL,Pn.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,Pn.ReadOnly);M.setDepthMode(Q),H.render(M.gl,v.transform.customLayerMatrix()),M.setDirty(),v.setBaseState(),M.bindFramebuffer.set(null)}})(r,0,f)}}translatePosMatrix(r,l,f,m,v){if(!f[0]&&!f[1])return r;const I=v?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(I){const H=Math.sin(I),Q=Math.cos(I);f=[f[0]*Q-f[1]*H,f[0]*H+f[1]*Q]}const P=[v?f[0]:cn(l,f[0],this.transform.zoom),v?f[1]:cn(l,f[1],this.transform.zoom),0],M=new Float32Array(16);return u.H(M,r,P),M}saveTileTexture(r){const l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const l=this._tileTextures[r];return l&&l.length>0?l.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const l=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!l||!f}useProgram(r,l){this.cache=this.cache||{};const f=r+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new xi(this.context,Os[r],l,fc[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new pe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:l}=this.context.gl;return this.width!==r||this.height!==l}}class Ko{constructor(r,l){this.points=r,this.planes=l}static fromInvProjectionMatrix(r,l,f){const m=Math.pow(2,f),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const M=1/(P=u.af([],P,r))[3]/l*m;return u.a$(P,P,[M,M,1/P[3],M])}),I=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const M=function(ge,Me){var ke=Me[0],Le=Me[1],Te=Me[2],Xe=ke*ke+Le*Le+Te*Te;return Xe>0&&(Xe=1/Math.sqrt(Xe)),ge[0]=Me[0]*Xe,ge[1]=Me[1]*Xe,ge[2]=Me[2]*Xe,ge}([],function(ge,Me,ke){var Le=Me[0],Te=Me[1],Xe=Me[2],rt=ke[0],je=ke[1],Ke=ke[2];return ge[0]=Te*Ke-Xe*je,ge[1]=Xe*rt-Le*Ke,ge[2]=Le*je-Te*rt,ge}([],B([],v[P[0]],v[P[1]]),B([],v[P[2]],v[P[1]]))),H=-((Q=M)[0]*(ne=v[P[1]])[0]+Q[1]*ne[1]+Q[2]*ne[2]);var Q,ne;return M.concat(H)});return new Ko(v,I)}}class Yo{constructor(r,l){this.min=r,this.max=l,this.center=function(f,m,v){return f[0]=.5*m[0],f[1]=.5*m[1],f[2]=.5*m[2],f}([],function(f,m,v){return f[0]=m[0]+v[0],f[1]=m[1]+v[1],f[2]=m[2]+v[2],f}([],this.min,this.max))}quadrant(r){const l=[r%2==0,r<2],f=E(this.min),m=E(this.max);for(let v=0;v<l.length;v++)f[v]=l[v]?this.min[v]:this.center[v],m[v]=l[v]?this.center[v]:this.max[v];return m[2]=this.max[2],new Yo(f,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const l=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let m=0;m<r.planes.length;m++){const v=r.planes[m];let I=0;for(let P=0;P<l.length;P++)u.b0(v,l[P])>=0&&I++;if(I===0)return 0;I!==l.length&&(f=!1)}if(f)return 2;for(let m=0;m<3;m++){let v=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let P=0;P<r.points.length;P++){const M=r.points[P][m]-this.min[m];v=Math.min(v,M),I=Math.max(I,M)}if(I<0||v>this.max[m]-this.min[m])return 0}return 1}}class Zs{constructor(r=0,l=0,f=0,m=0){if(isNaN(r)||r<0||isNaN(l)||l<0||isNaN(f)||f<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=f,this.right=m}interpolate(r,l,f){return l.top!=null&&r.top!=null&&(this.top=u.z.number(r.top,l.top,f)),l.bottom!=null&&r.bottom!=null&&(this.bottom=u.z.number(r.bottom,l.bottom,f)),l.left!=null&&r.left!=null&&(this.left=u.z.number(r.left,l.left,f)),l.right!=null&&r.right!=null&&(this.right=u.z.number(r.right,l.right,f)),this}getCenter(r,l){const f=u.ac((this.left+r-this.right)/2,0,r),m=u.ac((this.top+l-this.bottom)/2,0,l);return new u.P(f,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Zs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Il=85.051129;class Aa{constructor(r,l,f,m,v){this.tileSize=512,this._renderWorldCopies=v===void 0||!!v,this._minZoom=r||0,this._maxZoom=l||22,this._minPitch=f??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Zs,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new Aa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const l=-u.b1(r,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var f=new u.A(4);return u.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,m,v){var I=m[0],P=m[1],M=m[2],H=m[3],Q=Math.sin(v),ne=Math.cos(v);f[0]=I*ne+M*Q,f[1]=P*ne+H*Q,f[2]=I*-Q+M*ne,f[3]=P*-Q+H*ne}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const l=u.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const l=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.tileZoom=Math.max(0,Math.floor(l)),this.scale=this.zoomScale(l),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,l,f){this._unmodified=!1,this._edgeInsets.interpolate(r,l,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const l=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(r){const l=[new u.b2(0,r)];if(this._renderWorldCopies){const f=this.pointCoordinate(new u.P(0,0)),m=this.pointCoordinate(new u.P(this.width,0)),v=this.pointCoordinate(new u.P(this.width,this.height)),I=this.pointCoordinate(new u.P(0,this.height)),P=Math.floor(Math.min(f.x,m.x,v.x,I.x)),M=Math.floor(Math.max(f.x,m.x,v.x,I.x)),H=1;for(let Q=P-H;Q<=M+H;Q++)Q!==0&&l.push(new u.b2(Q,r))}return l}coveringTiles(r){var l,f;let m=this.coveringZoomLevel(r);const v=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const I=this.pointCoordinate(this.getCameraPoint()),P=u.Y.fromLngLat(this.center),M=Math.pow(2,m),H=[M*I.x,M*I.y,0],Q=[M*P.x,M*P.y,0],ne=Ko.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let ge=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ge=m);const Me=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,ke=je=>({aabb:new Yo([je*M,0,0],[(je+1)*M,M,0]),zoom:0,x:0,y:0,wrap:je,fullyVisible:!1}),Le=[],Te=[],Xe=m,rt=r.reparseOverscaled?v:m;if(this._renderWorldCopies)for(let je=1;je<=3;je++)Le.push(ke(-je)),Le.push(ke(je));for(Le.push(ke(0));Le.length>0;){const je=Le.pop(),Ke=je.x,it=je.y;let ot=je.fullyVisible;if(!ot){const Bt=je.aabb.intersects(ne);if(Bt===0)continue;ot=Bt===2}const ht=r.terrain?H:Q,St=je.aabb.distanceX(ht),xt=je.aabb.distanceY(ht),bt=Math.max(Math.abs(St),Math.abs(xt));if(je.zoom===Xe||bt>Me+(1<<Xe-je.zoom)-2&&je.zoom>=ge){const Bt=Xe-je.zoom,yn=H[0]-.5-(Ke<<Bt),Pt=H[1]-.5-(it<<Bt);Te.push({tileID:new u.Q(je.zoom===Xe?rt:je.zoom,je.wrap,je.zoom,Ke,it),distanceSq:ee([Q[0]-.5-Ke,Q[1]-.5-it]),tileDistanceToCamera:Math.sqrt(yn*yn+Pt*Pt)})}else for(let Bt=0;Bt<4;Bt++){const yn=(Ke<<1)+Bt%2,Pt=(it<<1)+(Bt>>1),un=je.zoom+1;let xn=je.aabb.quadrant(Bt);if(r.terrain){const kn=new u.Q(un,je.wrap,un,yn,Pt),hn=r.terrain.getMinMaxElevation(kn),wn=(l=hn.minElevation)!==null&&l!==void 0?l:this.elevation,bn=(f=hn.maxElevation)!==null&&f!==void 0?f:this.elevation;xn=new Yo([xn.min[0],xn.min[1],wn],[xn.max[0],xn.max[1],bn])}Le.push({aabb:xn,zoom:un,x:yn,y:Pt,wrap:je.wrap,fullyVisible:ot})}}return Te.sort((je,Ke)=>je.distanceSq-Ke.distanceSq).map(je=>je.tileID)}resize(r,l){this.width=r,this.height=l,this.pixelsToGLUnits=[2/r,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const l=u.ac(r.lat,-85.051129,Il);return new u.P(u.N(r.lng)*this.worldSize,u.O(l)*this.worldSize)}unproject(r){return new u.Y(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const l=this.elevation,f=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,m=this.pointLocation(this.centerPoint,r),v=r.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-v))return;const I=f+l-v,P=Math.cos(this._pitch)*this.cameraToCenterDistance/I/u.b3(1,m.lat),M=this.scaleZoom(P/this.tileSize);this._elevation=v,this._center=m,this.zoom=M}setLocationAtPoint(r,l){const f=this.pointCoordinate(l),m=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(r),I=new u.Y(v.x-(f.x-m.x),v.y-(f.y-m.y));this.center=this.coordinateLocation(I),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,l){return l?this.coordinatePoint(this.locationCoordinate(r),l.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,l){return this.coordinateLocation(this.pointCoordinate(r,l))}locationCoordinate(r){return u.Y.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,l){if(l){const ge=l.pointCoordinate(r);if(ge!=null)return ge}const f=[r.x,r.y,0,1],m=[r.x,r.y,1,1];u.af(f,f,this.pixelMatrixInverse),u.af(m,m,this.pixelMatrixInverse);const v=f[3],I=m[3],P=f[1]/v,M=m[1]/I,H=f[2]/v,Q=m[2]/I,ne=H===Q?0:(0-H)/(Q-H);return new u.Y(u.z.number(f[0]/v,m[0]/I,ne)/this.worldSize,u.z.number(P,M,ne)/this.worldSize)}coordinatePoint(r,l=0,f=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,l,1];return u.af(m,m,f),new u.P(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Zt().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Zt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Il])}calculatePosMatrix(r,l=!1){const f=r.key,m=l?this._alignedPosMatrixCache:this._posMatrixCache;if(m[f])return m[f];const v=r.canonical,I=this.worldSize/this.zoomScale(v.z),P=v.x+Math.pow(2,v.z)*r.wrap,M=u.an(new Float64Array(16));return u.H(M,M,[P*I,v.y*I,0]),u.J(M,M,[I/u.W,I/u.W,1]),u.K(M,l?this.alignedProjMatrix:this.projMatrix,M),m[f]=new Float32Array(M),m[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,l){l=u.ac(+l,this.minZoom,this.maxZoom);const f={center:new u.M(r.lng,r.lat),zoom:l};let m=this.lngRange;if(!this._renderWorldCopies&&m===null){const je=179.9999999999;m=[-je,je]}const v=this.tileSize*this.zoomScale(f.zoom);let I=0,P=v,M=0,H=v,Q=0,ne=0;const{x:ge,y:Me}=this.size;if(this.latRange){const je=this.latRange;I=u.O(je[1])*v,P=u.O(je[0])*v,P-I<Me&&(Q=Me/(P-I))}m&&(M=u.b1(u.N(m[0])*v,0,v),H=u.b1(u.N(m[1])*v,0,v),H<M&&(H+=v),H-M<ge&&(ne=ge/(H-M)));const{x:ke,y:Le}=this.project.call({worldSize:v},r);let Te,Xe;const rt=Math.max(ne||0,Q||0);if(rt){const je=new u.P(ne?(H+M)/2:ke,Q?(P+I)/2:Le);return f.center=this.unproject.call({worldSize:v},je).wrap(),f.zoom+=this.scaleZoom(rt),f}if(this.latRange){const je=Me/2;Le-je<I&&(Xe=I+je),Le+je>P&&(Xe=P-je)}if(m){const je=(M+H)/2;let Ke=ke;this._renderWorldCopies&&(Ke=u.b1(ke,je-v/2,je+v/2));const it=ge/2;Ke-it<M&&(Te=M+it),Ke+it>H&&(Te=H-it)}if(Te!==void 0||Xe!==void 0){const je=new u.P(Te??ke,Xe??Le);f.center=this.unproject.call({worldSize:v},je).wrap()}return f}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:l,zoom:f}=this.getConstrained(this.center,this.zoom);this.center=l,this.zoom=f,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,l=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b3(1,this.center.lat)*this.worldSize;let m=u.an(new Float64Array(16));u.J(m,m,[this.width/2,-this.height/2,1]),u.H(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=u.an(new Float64Array(16)),u.J(m,m,[1,-1,1]),u.H(m,m,[-1,-1,0]),u.J(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const v=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),I=Math.min(this.elevation,this.minElevationForCurrentTile),P=v-I*this._pixelPerMeter/Math.cos(this._pitch),M=I<0?P:v,H=Math.PI/2+this._pitch,Q=this._fov*(.5+r.y/this.height),ne=Math.sin(Q)*M/Math.sin(u.ac(Math.PI-H-Q,.01,Math.PI-.01)),ge=this.getHorizon(),Me=2*Math.atan(ge/this.cameraToCenterDistance)*(.5+r.y/(2*ge)),ke=Math.sin(Me)*M/Math.sin(u.ac(Math.PI-H-Me,.01,Math.PI-.01)),Le=Math.min(ne,ke),Te=1.01*(Math.cos(Math.PI/2-this._pitch)*Le+M),Xe=this.height/50;m=new Float64Array(16),u.b4(m,this._fov,this.width/this.height,Xe,Te),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,u.J(m,m,[1,-1,1]),u.H(m,m,[0,0,-this.cameraToCenterDistance]),u.b5(m,m,this._pitch),u.ad(m,m,this.angle),u.H(m,m,[-l,-f,0]),this.mercatorMatrix=u.J([],m,[this.worldSize,this.worldSize,this.worldSize]),u.J(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.K(new Float64Array(16),this.labelPlaneMatrix,m),u.H(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=u.ar([],m),this.pixelMatrix3D=u.K(new Float64Array(16),this.labelPlaneMatrix,m);const rt=this.width%2/2,je=this.height%2/2,Ke=Math.cos(this.angle),it=Math.sin(this.angle),ot=l-Math.round(l)+Ke*rt+it*je,ht=f-Math.round(f)+Ke*je+it*rt,St=new Float64Array(m);if(u.H(St,St,[ot>.5?ot-1:ot,ht>.5?ht-1:ht,0]),this.alignedProjMatrix=St,m=u.ar(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.af(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const l=this.getCameraPoint();if(r.length===1)return[r[0],l];{let f=l.x,m=l.y,v=l.x,I=l.y;for(const P of r)f=Math.min(f,P.x),m=Math.min(m,P.y),v=Math.max(v,P.x),I=Math.max(I,P.y);return[new u.P(f,m),new u.P(v,m),new u.P(v,I),new u.P(f,I),new u.P(f,m)]}}lngLatToCameraDepth(r,l){const f=this.locationCoordinate(r),m=[f.x*this.worldSize,f.y*this.worldSize,l,1];return u.af(m,m,this.projMatrix),m[2]/m[3]}}function G(y,r){let l,f=!1,m=null,v=null;const I=()=>{m=null,f&&(y.apply(v,l),m=setTimeout(I,r),f=!1)};return(...P)=>(f=!0,v=this,l=P,m||I(),m)}class ve{constructor(r){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(f=m)}),(f&&f[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(l.length>=3&&!l.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:f,pitch:+(l[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,l)}catch{}},this._updateHash=G(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const l=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,m),I=Math.round(l.lng*v)/v,P=Math.round(l.lat*v)/v,M=this._map.getBearing(),H=this._map.getPitch();let Q="";if(Q+=r?`/${I}/${P}/${f}`:`${f}/${P}/${I}`,(M||H)&&(Q+="/"+Math.round(10*M)/10),H&&(Q+=`/${Math.round(H)}`),this._hashName){const ne=this._hashName;let ge=!1;const Me=window.location.hash.slice(1).split("&").map(ke=>{const Le=ke.split("=")[0];return Le===ne?(ge=!0,`${Le}=${Q}`):ke}).filter(ke=>ke);return ge||Me.push(`${ne}=${Q}`),`#${Me.join("&")}`}return`#${Q}`}}const De={linearity:.3,easing:u.b6(0,0,.3,1)},lt=u.e({deceleration:2500,maxSpeed:1400},De),Ot=u.e({deceleration:20,maxSpeed:1400},De),Ct=u.e({deceleration:1e3,maxSpeed:360},De),Wt=u.e({deceleration:1e3,maxSpeed:90},De);class Kt{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:w.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,l=w.now();for(;r.length>0&&l-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)l.zoom+=v.zoomDelta||0,l.bearing+=v.bearingDelta||0,l.pitch+=v.pitchDelta||0,v.panDelta&&l.pan._add(v.panDelta),v.around&&(l.around=v.around),v.pinchAround&&(l.pinchAround=v.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(l.pan.mag()){const v=Bn(l.pan.mag(),f,u.e({},lt,r||{}));m.offset=l.pan.mult(v.amount/l.pan.mag()),m.center=this._map.transform.center,mn(m,v)}if(l.zoom){const v=Bn(l.zoom,f,Ot);m.zoom=this._map.transform.zoom+v.amount,mn(m,v)}if(l.bearing){const v=Bn(l.bearing,f,Ct);m.bearing=this._map.transform.bearing+u.ac(v.amount,-179,179),mn(m,v)}if(l.pitch){const v=Bn(l.pitch,f,Wt);m.pitch=this._map.transform.pitch+v.amount,mn(m,v)}if(m.zoom||m.bearing){const v=l.pinchAround===void 0?l.around:l.pinchAround;m.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),u.e(m,{noMoveStart:!0})}}function mn(y,r){(!y.duration||y.duration<r.duration)&&(y.duration=r.duration,y.easing=r.easing)}function Bn(y,r,l){const{maxSpeed:f,linearity:m,deceleration:v}=l,I=u.ac(y*m/(r/1e3),-f,f),P=Math.abs(I)/(v*m);return{easing:l.easing,duration:1e3*P,amount:I*(P/2)}}class gn extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,f,m={}){const v=T.mousePos(l.getCanvas(),f),I=l.unproject(v);super(r,u.e({point:v,lngLat:I,originalEvent:f},m)),this._defaultPrevented=!1,this.target=l}}class Xn extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,f){const m=r==="touchend"?f.changedTouches:f.touches,v=T.touchPos(l.getCanvasContainer(),m),I=v.map(M=>l.unproject(M)),P=v.reduce((M,H,Q,ne)=>M.add(H.div(ne.length)),new u.P(0,0));super(r,{points:v,point:P,lngLats:I,lngLat:l.unproject(P),originalEvent:f}),this._defaultPrevented=!1}}class Nn extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Jn{constructor(r,l){this._map=r,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Nn(r.type,this._map,r))}mousedown(r,l){return this._mousedownPos=l,this._firePreventable(new gn(r.type,this._map,r))}mouseup(r){this._map.fire(new gn(r.type,this._map,r))}click(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new gn(r.type,this._map,r))}dblclick(r){return this._firePreventable(new gn(r.type,this._map,r))}mouseover(r){this._map.fire(new gn(r.type,this._map,r))}mouseout(r){this._map.fire(new gn(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Xn(r.type,this._map,r))}touchmove(r){this._map.fire(new Xn(r.type,this._map,r))}touchend(r){this._map.fire(new Xn(r.type,this._map,r))}touchcancel(r){this._map.fire(new Xn(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zr{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new gn(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new gn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new gn(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pr{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class ai{constructor(r,l){this._map=r,this._tr=new pr(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(T.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(r,l){if(!this._active)return;const f=l;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=f,this._box||(this._box=T.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const v=Math.min(m.x,f.x),I=Math.max(m.x,f.x),P=Math.min(m.y,f.y),M=Math.max(m.y,f.y);T.setTransform(this._box,`translate(${v}px,${P}px)`),this._box.style.width=I-v+"px",this._box.style.height=M-P+"px"}mouseupWindow(r,l){if(!this._active||r.button!==0)return;const f=this._startPos,m=l;if(this.reset(),T.suppressClick(),f.x!==m.x||f.y!==m.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:v=>v.fitScreenCoordinates(f,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,l){return this._map.fire(new u.k(r,{originalEvent:l}))}}function To(y,r){if(y.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${r.length}`);const l={};for(let f=0;f<y.length;f++)l[y[f].identifier]=r[f];return l}class xc{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,l,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(m){const v=new u.P(0,0);for(const I of m)v._add(I);return v.div(m.length)}(l),this.touches=To(f,l)))}touchmove(r,l,f){if(this.aborted||!this.centroid)return;const m=To(f,l);for(const v in this.touches){const I=m[v];(!I||I.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(r,l,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Xs{constructor(r){this.singleTap=new xc(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,l,f){this.singleTap.touchstart(r,l,f)}touchmove(r,l,f){this.singleTap.touchmove(r,l,f)}touchend(r,l,f){const m=this.singleTap.touchend(r,l,f);if(m){const v=r.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(m)<30;if(v&&I||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Pa{constructor(r){this._tr=new pr(r),this._zoomIn=new Xs({numTouches:1,numTaps:2}),this._zoomOut=new Xs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,l,f){this._zoomIn.touchstart(r,l,f),this._zoomOut.touchstart(r,l,f)}touchmove(r,l,f){this._zoomIn.touchmove(r,l,f),this._zoomOut.touchmove(r,l,f)}touchend(r,l,f){const m=this._zoomIn.touchend(r,l,f),v=this._zoomOut.touchend(r,l,f),I=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(m)},{originalEvent:r})}):v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(v)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gs{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const l=this._moveFunction(...r);if(l.bearingDelta||l.pitchDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(r,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=l.length?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,l){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=l.length?l[0]:l;return!this._moved&&m.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(f,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&T.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const qs={0:1,2:2};class Nt{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const l=T.mouseButton(r);this._eventButton=l}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(l,f){const m=qs[f];return l.buttons===void 0||(l.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return T.mouseButton(r)===this._eventButton}}class Wh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const ka=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(r){r.preventDefault()}},Al=({enable:y,clickTolerance:r,bearingDegreesPerPixelMoved:l=.8})=>{const f=new Nt({checkCorrectEvent:m=>T.mouseButton(m)===0&&m.ctrlKey||T.mouseButton(m)===2});return new gs({clickTolerance:r,move:(m,v)=>({bearingDelta:(v.x-m.x)*l}),moveStateManager:f,enable:y,assignEvents:ka})},Zh=({enable:y,clickTolerance:r,pitchDegreesPerPixelMoved:l=-.5})=>{const f=new Nt({checkCorrectEvent:m=>T.mouseButton(m)===0&&m.ctrlKey||T.mouseButton(m)===2});return new gs({clickTolerance:r,move:(m,v)=>({pitchDelta:(v.y-m.y)*l}),moveStateManager:f,enable:y,assignEvents:ka})};class jt{constructor(r,l){this._clickTolerance=r.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(r,l,f){return this._calculateTransform(r,l,f)}touchmove(r,l,f){if(this._active&&!(f.length<this.minTouchs()))return r.preventDefault(),this._calculateTransform(r,l,f)}touchend(r,l,f){this._calculateTransform(r,l,f),this._active&&f.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,l,f){f.length>0&&(this._active=!0);const m=To(f,l),v=new u.P(0,0),I=new u.P(0,0);let P=0;for(const H in m){const Q=m[H],ne=this._touches[H];ne&&(v._add(Q),I._add(Q.sub(ne)),P++,m[H]=Q)}if(this._touches=m,P<this.minTouchs()||!I.mag())return;const M=I.div(P);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(P),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,l,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([l[0],l[1]]))}touchmove(r,l,f){if(!this._firstTwoTouches)return;r.preventDefault();const[m,v]=this._firstTwoTouches,I=wc(f,l,m),P=wc(f,l,v);if(!I||!P)return;const M=this._aroundCenter?null:I.add(P).div(2);return this._move([I,P],M,r)}touchend(r,l,f){if(!this._firstTwoTouches)return;const[m,v]=this._firstTwoTouches,I=wc(f,l,m),P=wc(f,l,v);I&&P||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function wc(y,r,l){for(let f=0;f<y.length;f++)if(y[f].identifier===l)return r[f]}function rp(y,r){return Math.log(y/r)/Math.LN2}class bc extends Tu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,l){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(rp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:rp(this._distance,f),pinchAround:l}}}function Xh(y,r){return 180*y.angleWith(r)/Math.PI}class qh extends Tu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,l,f){const m=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Xh(this._vector,m),pinchAround:l}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const l=25/(Math.PI*this._minDiameter)*360,f=Xh(r,this._startVector);return Math.abs(f)<l}}function Kh(y){return Math.abs(y.y)>Math.abs(y.x)}class ip extends Tu{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,l,f){super.touchstart(r,l,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,Kh(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,l,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),v=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,v,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(r,l,f){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,v=l.mag()>=2;if(!m&&!v)return;if(!m||!v)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const I=r.y>0==l.y>0;return Kh(r)&&Kh(l)&&I}}const Ma={panStep:100,bearingStep:15,pitchStep:10};class tr{constructor(r){this._tr=new pr(r);const l=Ma;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let l=0,f=0,m=0,v=0,I=0;switch(r.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),v=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),v=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),I=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(f=0,m=0),{cameraAnimation:P=>{const M=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:Sc,zoom:l?Math.round(M.zoom)+l*(r.shiftKey?2:1):M.zoom,bearing:M.bearing+f*this._bearingStep,pitch:M.pitch+m*this._pitchStep,offset:[-v*this._panStep,-I*this._panStep],center:M.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Sc(y){return y*(2-y)}const Ec=4.000244140625;class Yh{constructor(r,l){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new pr(r),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!r[this._map.cooperativeGestures._bypassKey])return;let l=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=w.now(),m=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,l!==0&&l%Ec==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=T.mousePos(this._map.getCanvas(),r),f=this._tr;this._around=l.y>f.transform.height/2-f.transform.getHorizon()?u.M.convert(this._aroundCenter?f.center:f.unproject(l)):u.M.convert(f.center),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>Ec?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&M!==0&&(M=1/M);const H=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(H*M))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,m=this._easing;let v,I=!1;if(this._type==="wheel"&&f&&m){const P=Math.min((w.now()-this._lastWheelEventTime)/200,1),M=m(P);v=u.z.number(f,l,M),P<1?this._frameId||(this._frameId=!0):I=!0}else v=l,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:v-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let l=u.b7;if(this._prevEase){const f=this._prevEase,m=(w.now()-f.start)/f.duration,v=f.easing(m+.01)-f.easing(m),I=.27/Math.sqrt(v*v+1e-4)*.01,P=Math.sqrt(.0729-I*I);l=u.b6(I,P,.25,1)}return this._prevEase={start:w.now(),duration:r,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Jh{constructor(r,l){this._clickZoom=r,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class op{constructor(r){this._tr=new pr(r),this.reset()}reset(){this._active=!1}dblclick(r,l){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class py{constructor(){this._tap=new Xs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,l,f){if(!this._swipePoint)if(this._tapTime){const m=l[0],v=r.timeStamp-this._tapTime<500,I=this._tapPoint.dist(m)<30;v&&I?f.length>0&&(this._swipePoint=m,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,l,f)}touchmove(r,l,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const m=l[0],v=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(r,l,f)}touchend(r,l,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const m=this._tap.touchend(r,l,f);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Co{constructor(r,l,f){this._el=r,this._mousePan=l,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Cu{constructor(r,l,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=l,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class qt{constructor(r,l,f,m){this._el=r,this._touchZoom=l,this._touchRotate=f,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class nn{constructor(r,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=T.create("div","maplibregl-cooperative-gesture-screen",r);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=l,this._container.appendChild(m);const v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=f,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(T.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(r){this._onCooperativeGesture(r.touches.length===1)}wheel(r){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!r[this._bypassKey])}_onCooperativeGesture(r){this._enabled&&r&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const za=y=>y.zoom||y.drag||y.pitch||y.rotate;class Qh extends u.k{}function Iu(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class zi{constructor(r,l){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,v)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const I=m.type==="renderFrame"?void 0:m,P={needsRenderFrame:!1},M={},H={},Q=m.touches,ne=Q?this._getMapTouches(Q):void 0,ge=ne?T.touchPos(this._map.getCanvas(),ne):T.mousePos(this._map.getCanvas(),m);for(const{handlerName:Le,handler:Te,allowed:Xe}of this._handlers){if(!Te.isEnabled())continue;let rt;this._blockedByActive(H,Xe,Le)?Te.reset():Te[v||m.type]&&(rt=Te[v||m.type](m,ge,ne),this.mergeHandlerResult(P,M,rt,Le,I),rt&&rt.needsRenderFrame&&this._triggerRenderFrame()),(rt||Te.isActive())&&(H[Le]=Te)}const Me={};for(const Le in this._previousActiveHandlers)H[Le]||(Me[Le]=I);this._previousActiveHandlers=H,(Object.keys(Me).length||Iu(P))&&(this._changes.push([P,M,Me]),this._triggerRenderFrame()),(Object.keys(H).length||Iu(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ke}=P;ke&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ke(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Kt(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,v,I]of this._listeners)T.addEventListener(m,v,m===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[r,l,f]of this._listeners)T.removeEventListener(r,l,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const l=this._map,f=l.getCanvasContainer();this._add("mapEvent",new Jn(l,r));const m=l.boxZoom=new ai(l,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const v=l.cooperativeGestures=new nn(l,r.cooperativeGestures);this._add("cooperativeGestures",v),r.cooperativeGestures&&v.enable();const I=new Pa(l),P=new op(l);l.doubleClickZoom=new Jh(P,I),this._add("tapZoom",I),this._add("clickZoom",P),r.interactive&&r.doubleClickZoom&&l.doubleClickZoom.enable();const M=new py;this._add("tapDragZoom",M);const H=l.touchPitch=new ip(l);this._add("touchPitch",H),r.interactive&&r.touchPitch&&l.touchPitch.enable(r.touchPitch);const Q=Al(r),ne=Zh(r);l.dragRotate=new Cu(r,Q,ne),this._add("mouseRotate",Q,["mousePitch"]),this._add("mousePitch",ne,["mouseRotate"]),r.interactive&&r.dragRotate&&l.dragRotate.enable();const ge=(({enable:rt,clickTolerance:je})=>{const Ke=new Nt({checkCorrectEvent:it=>T.mouseButton(it)===0&&!it.ctrlKey});return new gs({clickTolerance:je,move:(it,ot)=>({around:ot,panDelta:ot.sub(it)}),activateOnStart:!0,moveStateManager:Ke,enable:rt,assignEvents:ka})})(r),Me=new jt(r,l);l.dragPan=new Co(f,ge,Me),this._add("mousePan",ge),this._add("touchPan",Me,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&l.dragPan.enable(r.dragPan);const ke=new qh,Le=new bc;l.touchZoomRotate=new qt(f,Le,ke,M),this._add("touchRotate",ke,["touchPan","touchZoom"]),this._add("touchZoom",Le,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&l.touchZoomRotate.enable(r.touchZoomRotate);const Te=l.scrollZoom=new Yh(l,()=>this._triggerRenderFrame());this._add("scrollZoom",Te,["mousePan"]),r.interactive&&r.scrollZoom&&l.scrollZoom.enable(r.scrollZoom);const Xe=l.keyboard=new tr(l);this._add("keyboard",Xe),r.interactive&&r.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new zr(l))}_add(r,l,f){this._handlers.push({handlerName:r,handler:l,allowed:f}),this._handlersById[r]=l}stop(r){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!za(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,l,f){for(const m in r)if(m!==f&&(!l||l.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const l=[];for(const f of r)this._el.contains(f.target)&&l.push(f);return l}mergeHandlerResult(r,l,f,m,v){if(!f)return;u.e(r,f);const I={handlerName:m,originalEvent:f.originalEvent||v};f.zoomDelta!==void 0&&(l.zoom=I),f.panDelta!==void 0&&(l.drag=I),f.pitchDelta!==void 0&&(l.pitch=I),f.bearingDelta!==void 0&&(l.rotate=I)}_applyChanges(){const r={},l={},f={};for(const[m,v,I]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),u.e(l,v),u.e(f,I);this._updateMapTransform(r,l,f),this._changes=[]}_updateMapTransform(r,l,f){const m=this._map,v=m._getTransformForUpdate(),I=m.terrain;if(!(Iu(r)||I&&this._terrainMovement))return this._fireEvents(l,f,!0);let{panDelta:P,zoomDelta:M,bearingDelta:H,pitchDelta:Q,around:ne,pinchAround:ge}=r;ge!==void 0&&(ne=ge),m._stop(!0),ne=ne||m.transform.centerPoint;const Me=v.pointLocation(P?ne.sub(P):ne);H&&(v.bearing+=H),Q&&(v.pitch+=Q),M&&(v.zoom+=M),I?this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?v.center=v.pointLocation(v.centerPoint.sub(P)):v.setLocationAtPoint(Me,ne):(this._terrainMovement=!0,this._map._elevationFreeze=!0,v.setLocationAtPoint(Me,ne),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,v.recalculateZoom(m.terrain)})):v.setLocationAtPoint(Me,ne),m._applyUpdatedTransform(v),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,f,!0)}_fireEvents(r,l,f){const m=za(this._eventsInProgress),v=za(r),I={};for(const Q in r){const{originalEvent:ne}=r[Q];this._eventsInProgress[Q]||(I[`${Q}start`]=ne),this._eventsInProgress[Q]=r[Q]}!m&&v&&this._fireEvent("movestart",v.originalEvent);for(const Q in I)this._fireEvent(Q,I[Q]);v&&this._fireEvent("move",v.originalEvent);for(const Q in r){const{originalEvent:ne}=r[Q];this._fireEvent(Q,ne)}const P={};let M;for(const Q in this._eventsInProgress){const{handlerName:ne,originalEvent:ge}=this._eventsInProgress[Q];this._handlersById[ne].isActive()||(delete this._eventsInProgress[Q],M=l[ne]||ge,P[`${Q}end`]=M)}for(const Q in P)this._fireEvent(Q,P[Q]);const H=za(this._eventsInProgress);if(f&&(m||v)&&!H){this._updatingCamera=!0;const Q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ne=ge=>ge!==0&&-this._bearingSnap<ge&&ge<this._bearingSnap;!Q||!Q.essential&&w.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:M})),ne(this._map.getBearing())&&this._map.resetNorth()):(ne(Q.bearing||this._map.getBearing())&&(Q.bearing=0),Q.freezeElevation=!0,this._map.easeTo(Q,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(r,l){this._map.fire(new u.k(r,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Qh("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class sp extends u.E{constructor(r,l){super(),this._renderFrameCallback=()=>{const f=Math.min((w.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=l.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.M(this.transform.center.lng,this.transform.center.lat)}setCenter(r,l){return this.jumpTo({center:r},l)}panBy(r,l,f){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},l),f)}panTo(r,l,f){return this.easeTo(u.e({center:r},l),f)}getZoom(){return this.transform.zoom}setZoom(r,l){return this.jumpTo({zoom:r},l),this}zoomTo(r,l,f){return this.easeTo(u.e({zoom:r},l),f)}zoomIn(r,l){return this.zoomTo(this.getZoom()+1,r,l),this}zoomOut(r,l){return this.zoomTo(this.getZoom()-1,r,l),this}getBearing(){return this.transform.bearing}setBearing(r,l){return this.jumpTo({bearing:r},l),this}getPadding(){return this.transform.padding}setPadding(r,l){return this.jumpTo({padding:r},l),this}rotateTo(r,l,f){return this.easeTo(u.e({bearing:r},l),f)}resetNorth(r,l){return this.rotateTo(0,u.e({duration:1e3},r),l),this}resetNorthPitch(r,l){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),l),this}snapToNorth(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this}getPitch(){return this.transform.pitch}setPitch(r,l){return this.jumpTo({pitch:r},l),this}cameraForBounds(r,l){r=Zt.convert(r);const f=l&&l.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,l)}_cameraForBoxAndBearing(r,l,f,m){const v={top:0,bottom:0,right:0,left:0};if(typeof(m=u.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const Bt=m.padding;m.padding={top:Bt,bottom:Bt,right:Bt,left:Bt}}m.padding=u.e(v,m.padding);const I=this.transform,P=I.padding,M=new Zt(r,l),H=I.project(M.getNorthWest()),Q=I.project(M.getNorthEast()),ne=I.project(M.getSouthEast()),ge=I.project(M.getSouthWest()),Me=u.b8(-f),ke=H.rotate(Me),Le=Q.rotate(Me),Te=ne.rotate(Me),Xe=ge.rotate(Me),rt=new u.P(Math.max(ke.x,Le.x,Xe.x,Te.x),Math.max(ke.y,Le.y,Xe.y,Te.y)),je=new u.P(Math.min(ke.x,Le.x,Xe.x,Te.x),Math.min(ke.y,Le.y,Xe.y,Te.y)),Ke=rt.sub(je),it=(I.width-(P.left+P.right+m.padding.left+m.padding.right))/Ke.x,ot=(I.height-(P.top+P.bottom+m.padding.top+m.padding.bottom))/Ke.y;if(ot<0||it<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ht=Math.min(I.scaleZoom(I.scale*Math.min(it,ot)),m.maxZoom),St=u.P.convert(m.offset),xt=new u.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(u.b8(f)),bt=St.add(xt).mult(I.scale/I.zoomScale(ht));return{center:I.unproject(H.add(ne).div(2).sub(bt)),zoom:ht,bearing:f}}fitBounds(r,l,f){return this._fitInternal(this.cameraForBounds(r,l),l,f)}fitScreenCoordinates(r,l,f,m,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(l)),f,m),m,v)}_fitInternal(r,l,f){return r?(delete(l=u.e(r,l)).padding,l.linear?this.easeTo(l,f):this.flyTo(l,f)):this}jumpTo(r,l){this.stop();const f=this._getTransformForUpdate();let m=!1,v=!1,I=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(m=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=u.M.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(v=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(I=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new u.k("movestart",l)).fire(new u.k("move",l)),m&&this.fire(new u.k("zoomstart",l)).fire(new u.k("zoom",l)).fire(new u.k("zoomend",l)),v&&this.fire(new u.k("rotatestart",l)).fire(new u.k("rotate",l)).fire(new u.k("rotateend",l)),I&&this.fire(new u.k("pitchstart",l)).fire(new u.k("pitch",l)).fire(new u.k("pitchend",l)),this.fire(new u.k("moveend",l))}calculateCameraOptionsFromTo(r,l,f,m=0){const v=u.Y.fromLngLat(r,l),I=u.Y.fromLngLat(f,m),P=I.x-v.x,M=I.y-v.y,H=I.z-v.z,Q=Math.hypot(P,M,H);if(Q===0)throw new Error("Can't calculate camera options with same From and To");const ne=Math.hypot(P,M),ge=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Q/this.transform.tileSize),Me=180*Math.atan2(P,-M)/Math.PI;let ke=180*Math.acos(ne/Q)/Math.PI;return ke=H<0?90-ke:90+ke,{center:I.toLngLat(),zoom:ge,pitch:ke,bearing:Me}}easeTo(r,l){var f;this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.b7},r)).animate===!1||!r.essential&&w.prefersReducedMotion)&&(r.duration=0);const m=this._getTransformForUpdate(),v=this.getZoom(),I=this.getBearing(),P=this.getPitch(),M=this.getPadding(),H="bearing"in r?this._normalizeBearing(r.bearing,I):I,Q="pitch"in r?+r.pitch:P,ne="padding"in r?r.padding:m.padding,ge=u.P.convert(r.offset);let Me=m.centerPoint.add(ge);const ke=m.pointLocation(Me),{center:Le,zoom:Te}=m.getConstrained(u.M.convert(r.center||ke),(f=r.zoom)!==null&&f!==void 0?f:v);this._normalizeCenter(Le);const Xe=m.project(ke),rt=m.project(Le).sub(Xe),je=m.zoomScale(Te-v);let Ke,it;r.around&&(Ke=u.M.convert(r.around),it=m.locationPoint(Ke));const ot={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Te!==v,this._rotating=this._rotating||I!==H,this._pitching=this._pitching||Q!==P,this._padding=!m.isPaddingEqual(ne),this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,ot),this.terrain&&this._prepareElevation(Le),this._ease(ht=>{if(this._zooming&&(m.zoom=u.z.number(v,Te,ht)),this._rotating&&(m.bearing=u.z.number(I,H,ht)),this._pitching&&(m.pitch=u.z.number(P,Q,ht)),this._padding&&(m.interpolatePadding(M,ne,ht),Me=m.centerPoint.add(ge)),this.terrain&&!r.freezeElevation&&this._updateElevation(ht),Ke)m.setLocationAtPoint(Ke,it);else{const St=m.zoomScale(m.zoom-v),xt=Te>v?Math.min(2,je):Math.max(.5,je),bt=Math.pow(xt,1-ht),Bt=m.unproject(Xe.add(rt.mult(ht*bt)).mult(St));m.setLocationAtPoint(m.renderWorldCopies?Bt.wrap():Bt,Me)}this._applyUpdatedTransform(m),this._fireMoveEvents(l)},ht=>{this.terrain&&this._finalizeElevation(),this._afterEase(l,ht)},r),this}_prepareEase(r,l,f={}){this._moving=!0,l||f.moving||this.fire(new u.k("movestart",r)),this._zooming&&!f.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&l!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(l-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=l}this.transform.elevation=u.z.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const l=r.clone(),{center:f,zoom:m,pitch:v,bearing:I,elevation:P}=this.transformCameraUpdate(l);f&&(l.center=f),m!==void 0&&(l.zoom=m),v!==void 0&&(l.pitch=v),I!==void 0&&(l.bearing=I),P!==void 0&&(l.elevation=P),this.transform.apply(l)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const f=this._zooming,m=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new u.k("zoomend",r)),m&&this.fire(new u.k("rotateend",r)),v&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,l){var f;if(!r.essential&&w.prefersReducedMotion){const kn=u.L(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(kn,l)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b7},r);const m=this._getTransformForUpdate(),v=this.getZoom(),I=this.getBearing(),P=this.getPitch(),M=this.getPadding(),H="bearing"in r?this._normalizeBearing(r.bearing,I):I,Q="pitch"in r?+r.pitch:P,ne="padding"in r?r.padding:m.padding,ge=u.P.convert(r.offset);let Me=m.centerPoint.add(ge);const ke=m.pointLocation(Me),{center:Le,zoom:Te}=m.getConstrained(u.M.convert(r.center||ke),(f=r.zoom)!==null&&f!==void 0?f:v);this._normalizeCenter(Le);const Xe=m.zoomScale(Te-v),rt=m.project(ke),je=m.project(Le).sub(rt);let Ke=r.curve;const it=Math.max(m.width,m.height),ot=it/Xe,ht=je.mag();if("minZoom"in r){const kn=u.ac(Math.min(r.minZoom,v,Te),m.minZoom,m.maxZoom),hn=it/m.zoomScale(kn-v);Ke=Math.sqrt(hn/ht*2)}const St=Ke*Ke;function xt(kn){const hn=(ot*ot-it*it+(kn?-1:1)*St*St*ht*ht)/(2*(kn?ot:it)*St*ht);return Math.log(Math.sqrt(hn*hn+1)-hn)}function bt(kn){return(Math.exp(kn)-Math.exp(-kn))/2}function Bt(kn){return(Math.exp(kn)+Math.exp(-kn))/2}const yn=xt(!1);let Pt=function(kn){return Bt(yn)/Bt(yn+Ke*kn)},un=function(kn){return it*((Bt(yn)*(bt(hn=yn+Ke*kn)/Bt(hn))-bt(yn))/St)/ht;var hn},xn=(xt(!0)-yn)/Ke;if(Math.abs(ht)<1e-6||!isFinite(xn)){if(Math.abs(it-ot)<1e-6)return this.easeTo(r,l);const kn=ot<it?-1:1;xn=Math.abs(Math.log(ot/it))/Ke,un=function(){return 0},Pt=function(hn){return Math.exp(kn*Ke*hn)}}return r.duration="duration"in r?+r.duration:1e3*xn/("screenSpeed"in r?+r.screenSpeed/Ke:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=I!==H,this._pitching=Q!==P,this._padding=!m.isPaddingEqual(ne),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(Le),this._ease(kn=>{const hn=kn*xn,wn=1/Pt(hn);m.zoom=kn===1?Te:v+m.scaleZoom(wn),this._rotating&&(m.bearing=u.z.number(I,H,kn)),this._pitching&&(m.pitch=u.z.number(P,Q,kn)),this._padding&&(m.interpolatePadding(M,ne,kn),Me=m.centerPoint.add(ge)),this.terrain&&!r.freezeElevation&&this._updateElevation(kn);const bn=kn===1?Le:m.unproject(rt.add(je.mult(un(hn))).mult(wn));m.setLocationAtPoint(m.renderWorldCopies?bn.wrap():bn,Me),this._applyUpdatedTransform(m),this._fireMoveEvents(l)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(l)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,l)}if(!r){const f=this.handlers;f&&f.stop(!1)}return this}_ease(r,l,f){f.animate===!1||f.duration===0?(r(1),l()):(this._easeStart=w.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,l){r=u.b1(r,-180,180);const f=Math.abs(r-l);return Math.abs(r-360-l)<f&&(r-=360),Math.abs(r+360-l)<f&&(r+=360),r}_normalizeCenter(r){const l=this.transform;if(!l.renderWorldCopies||l.lngRange)return;const f=r.lng-l.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.M.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const Io={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ap{constructor(r=Io){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,l){const f=this._map._getUIString(`AttributionControl.${l}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const l=this._map.style.sourceCaches;for(const m in l){const v=l[m];if(v.used||v.usedForTerrain){const I=v.getSource();I.attribution&&r.indexOf(I.attribution)<0&&r.push(I.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,v)=>m.length-v.length),r=r.filter((m,v)=>{for(let I=v+1;I<r.length;I++)if(r[I].indexOf(m)>=0)return!1;return!0});const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Pl{constructor(r={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const f=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl");const l=T.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class mr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l}remove(r){const l=this._currentlyRunning,f=l?this._queue.concat(l):this._queue;for(const m of f)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const f of l)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Er=u.X([{name:"a_pos3d",type:"Int16",components:3}]);class lp extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,l){this.sourceCache.update(r,l),this._renderableTilesKeys=[];const f={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l}))f[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),u.aN(m.posMatrix,0,u.W,0,u.W,0,1),this._tiles[m.key]=new Ve(m,this.tileSize));for(const m in this._tiles)f[m]||delete this._tiles[m]}freeRtt(r){for(const l in this._tiles){const f=this._tiles[l];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const l={};for(const f of this._renderableTilesKeys){const m=this._tiles[f].tileID;if(m.canonical.equals(r.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16),u.aN(v.posMatrix,0,u.W,0,u.W,0,1),l[f]=v}else if(m.canonical.isChildOf(r.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16);const I=m.canonical.z-r.canonical.z,P=m.canonical.x-(m.canonical.x>>I<<I),M=m.canonical.y-(m.canonical.y>>I<<I),H=u.W>>I;u.aN(v.posMatrix,0,H,0,H,0,1),u.H(v.posMatrix,v.posMatrix,[-P*H,-M*H,0]),l[f]=v}else if(r.canonical.isChildOf(m.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16);const I=r.canonical.z-m.canonical.z,P=r.canonical.x-(r.canonical.x>>I<<I),M=r.canonical.y-(r.canonical.y>>I<<I),H=u.W>>I;u.aN(v.posMatrix,0,u.W,0,u.W,0,1),u.H(v.posMatrix,v.posMatrix,[P*H,M*H,0]),u.J(v.posMatrix,v.posMatrix,[1/2**I,1/2**I,0]),l[f]=v}}return l}getSourceTile(r,l){const f=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>f.maxzoom&&(m=f.maxzoom),m<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!v||!v.dem)&&l)for(;m>=f.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(r.scaledTo(m--).key);return v}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(l=>l.timeAdded>=r)}}class Au{constructor(r,l,f){this.painter=r,this.sourceCache=new lp(l),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,l,f,m=u.W){var v;if(!(l>=0&&l<m&&f>=0&&f<m))return 0;const I=this.getTerrainData(r),P=(v=I.tile)===null||v===void 0?void 0:v.dem;if(!P)return 0;const M=function(ke,Le,Te){var Xe=Le[0],rt=Le[1];return ke[0]=Te[0]*Xe+Te[4]*rt+Te[12],ke[1]=Te[1]*Xe+Te[5]*rt+Te[13],ke}([],[l/m*u.W,f/m*u.W],I.u_terrain_matrix),H=[M[0]*P.dim,M[1]*P.dim],Q=Math.floor(H[0]),ne=Math.floor(H[1]),ge=H[0]-Q,Me=H[1]-ne;return P.get(Q,ne)*(1-ge)*(1-Me)+P.get(Q+1,ne)*ge*(1-Me)+P.get(Q,ne+1)*(1-ge)*Me+P.get(Q+1,ne+1)*ge*Me}getElevationForLngLatZoom(r,l){const{tileID:f,mercatorX:m,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(r,l);return this.getElevation(f,m%u.W,v%u.W,u.W)}getElevation(r,l,f,m=u.W){return this.getDEMElevation(r,l,f,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,v=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new pe(m,v,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new pe(m,new u.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const l=this.sourceCache.getSourceTile(r,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const m=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new pe(m,l.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),l.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const f=l&&l+l.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const m=this.sourceCache.sourceCache._source.maxzoom;let v=r.canonical.z-l.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?v=r.canonical.z-m:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const I=r.canonical.x-(r.canonical.x>>v<<v),P=r.canonical.y-(r.canonical.y>>v<<v),M=u.b9(new Float64Array(16),[1/(u.W<<v),1/(u.W<<v),0]);u.H(M,M,[I*u.W,P*u.W,0]),this._demMatrixCache[r.key]={matrix:M,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(r){const l=this.painter,f=l.width/devicePixelRatio,m=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new pe(l.context,{width:f,height:m,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new pe(l.context,{width:f,height:m,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(f,m,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,f,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,I=0;v<this._coordsTextureSize;v++)for(let P=0;P<this._coordsTextureSize;P++,I+=4)l[I+0]=255&P,l[I+1]=255&v,l[I+2]=P>>8<<4|v>>8,l[I+3]=0;const f=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),m=new pe(r,f,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),f=this.painter.context,m=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,l),f.bindFramebuffer.set(null);const v=l[0]+(l[2]>>4<<8),I=l[1]+((15&l[2])<<8),P=this.coordsIndex[255-l[3]],M=P&&this.sourceCache.getTileByID(P);if(!M)return null;const H=this._coordsTextureSize,Q=(1<<M.tileID.canonical.z)*H;return new u.Y((M.tileID.canonical.x*H+v)/Q+M.tileID.wrap,(M.tileID.canonical.y*H+I)/Q,this.getElevation(M.tileID,v,I,H))}depthAtPoint(r){const l=new Uint8Array(4),f=this.painter.context,m=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,l),f.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,l=new u.ba,f=new u.aX,m=this.meshSize,v=u.W/m,I=m*m;for(let ne=0;ne<=m;ne++)for(let ge=0;ge<=m;ge++)l.emplaceBack(ge*v,ne*v,0);for(let ne=0;ne<I;ne+=m+1)for(let ge=0;ge<m;ge++)f.emplaceBack(ge+ne,m+ge+ne+1,m+ge+ne+2),f.emplaceBack(ge+ne,m+ge+ne+2,ge+ne+1);const P=l.length,M=P+2*(m+1);for(const ne of[0,1])for(let ge=0;ge<=m;ge++)for(const Me of[0,1])l.emplaceBack(ge*v,ne*u.W,Me);for(let ne=0;ne<2*m;ne+=2)f.emplaceBack(M+ne,M+ne+1,M+ne+3),f.emplaceBack(M+ne,M+ne+3,M+ne+2),f.emplaceBack(P+ne,P+ne+3,P+ne+1),f.emplaceBack(P+ne,P+ne+2,P+ne+3);const H=l.length,Q=H+2*(m+1);for(const ne of[0,1])for(let ge=0;ge<=m;ge++)for(const Me of[0,1])l.emplaceBack(ne*u.W,ge*v,Me);for(let ne=0;ne<2*m;ne+=2)f.emplaceBack(H+ne,H+ne+1,H+ne+3),f.emplaceBack(H+ne,H+ne+3,H+ne+2),f.emplaceBack(Q+ne,Q+ne+3,Q+ne+1),f.emplaceBack(Q+ne,Q+ne+2,Q+ne+3);return this._mesh={indexBuffer:r.createIndexBuffer(f),vertexBuffer:r.createVertexBuffer(l,Er.members),segments:u.$.simpleSegment(0,0,l.length,f.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.bb/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,l){var f;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,l);return(f=this.getMinMaxElevation(m).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){const l=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return l&&l.dem&&(f.minElevation=l.dem.min*this.exaggeration,f.maxElevation=l.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,l){const f=u.Y.fromLngLat(r.wrap()),m=(1<<l)*u.W,v=f.x*m,I=f.y*m,P=Math.floor(v/u.W),M=Math.floor(I/u.W);return{tileID:new u.Q(l,0,l,P,M),mercatorX:v,mercatorY:I}}}class Tc{constructor(r,l,f){this._context=r,this._size=l,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new pe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(f.texture),{id:r,fbo:l,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>r.id!==l),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Ks={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ed{constructor(r,l){this.painter=r,this.terrain=l,this.pool=new Tc(r.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(l)),this._coordsDescendingInv={};for(const f in r.sourceCaches){this._coordsDescendingInv[f]={};const m=r.sourceCaches[f].getVisibleCoordinates();for(const v of m){const I=this.terrain.sourceCache.getTerrainCoords(v);for(const P in I)this._coordsDescendingInv[f][P]||(this._coordsDescendingInv[f][P]=[]),this._coordsDescendingInv[f][P].push(I[P])}}this._coordsDescendingInvStr={};for(const f of r._order){const m=r._layers[f],v=m.source;if(Ks[m.type]&&!this._coordsDescendingInvStr[v]){this._coordsDescendingInvStr[v]={};for(const I in this._coordsDescendingInv[v])this._coordsDescendingInvStr[v][I]=this._coordsDescendingInv[v][I].map(P=>P.key).sort().join()}}for(const f of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const v=this._coordsDescendingInvStr[m][f.tileID.key];v&&v!==f.rttCoords[m]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const l=r.type,f=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Ks[l]&&(this._prevType&&Ks[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(Ks[this._prevType]||Ks[l]&&m){this._prevType=l;const v=this._stacks.length-1,I=this._stacks[v]||[];for(const P of this._renderableTiles){if(this.pool.isFull()&&(Cl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(P),P.rtt[v]){const H=this.pool.getObjectForId(P.rtt[v].id);if(H.stamp===P.rtt[v].stamp){this.pool.useObject(H);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),P.rtt[v]={id:M.id,stamp:M.stamp},f.context.bindFramebuffer.set(M.fbo.framebuffer),f.context.clear({color:u.aO.transparent,stencil:0}),f.currentStencilSource=void 0;for(let H=0;H<I.length;H++){const Q=f.style._layers[I[H]],ne=Q.source?this._coordsDescendingInv[Q.source][P.tileID.key]:[P.tileID];f.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),f._renderTileClippingMasks(Q,ne),f.renderLayer(f,f.style.sourceCaches[Q.source],Q,ne),Q.source&&(P.rttCoords[Q.source]=this._coordsDescendingInvStr[Q.source][P.tileID.key])}}return Cl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ks[l]}return!1}}const td={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Pu=b,nd={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:Io,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Cc=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},rd={showCompass:!0,showZoom:!0,visualizePitch:!1};class id{constructor(r,l,f=!1){this.mousedown=I=>{this.startMouse(u.e({},I,{ctrlKey:!0,preventDefault:()=>I.preventDefault()}),T.mousePos(this.element,I)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.moveMouse(I,T.mousePos(this.element,I))},this.mouseup=I=>{this.mouseRotate.dragEnd(I),this.mousePitch&&this.mousePitch.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,I.targetTouches)[0],this.startTouch(I,this._startPos),T.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,I.targetTouches)[0],this.moveTouch(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),v=r.dragRotate._mousePitch.getClickTolerance();this.element=l,this.mouseRotate=Al({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:I,clickTolerance:P,bearingDegreesPerPixelMoved:M=.8})=>{const H=new Wh;return new gs({clickTolerance:P,move:(Q,ne)=>({bearingDelta:(ne.x-Q.x)*M}),moveStateManager:H,enable:I,assignEvents:Cc})})({clickTolerance:m,enable:!0}),this.map=r,f&&(this.mousePitch=Zh({clickTolerance:v,enable:!0}),this.touchPitch=(({enable:I,clickTolerance:P,pitchDegreesPerPixelMoved:M=-.5})=>{const H=new Wh;return new gs({clickTolerance:P,move:(Q,ne)=>({pitchDelta:(ne.y-Q.y)*M}),moveStateManager:H,enable:I,assignEvents:Cc})})({clickTolerance:v,enable:!0})),T.addEventListener(l,"mousedown",this.mousedown),T.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(l,"touchcancel",this.reset)}startMouse(r,l){this.mouseRotate.dragStart(r,l),this.mousePitch&&this.mousePitch.dragStart(r,l),T.disableDrag()}startTouch(r,l){this.touchRotate.dragStart(r,l),this.touchPitch&&this.touchPitch.dragStart(r,l),T.disableDrag()}moveMouse(r,l){const f=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,l)||{};if(m&&f.setBearing(f.getBearing()+m),this.mousePitch){const{pitchDelta:v}=this.mousePitch.dragMove(r,l)||{};v&&f.setPitch(f.getPitch()+v)}}moveTouch(r,l){const f=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,l)||{};if(m&&f.setBearing(f.getBearing()+m),this.touchPitch){const{pitchDelta:v}=this.touchPitch.dragMove(r,l)||{};v&&f.setPitch(f.getPitch()+v)}}off(){const r=this.element;T.removeEventListener(r,"mousedown",this.mousedown),T.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend),T.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend)}}let ys;function Ic(y,r,l){const f=new u.M(y.lng,y.lat);if(y=new u.M(y.lng,y.lat),r){const m=new u.M(y.lng-360,y.lat),v=new u.M(y.lng+360,y.lat),I=l.locationPoint(y).distSqr(r);l.locationPoint(m).distSqr(r)<I?y=m:l.locationPoint(v).distSqr(r)<I&&(y=v)}for(;Math.abs(y.lng-l.center.lng)>180;){const m=l.locationPoint(y);if(m.x>=0&&m.y>=0&&m.x<=l.width&&m.y<=l.height)break;y.lng>l.center.lng?y.lng-=360:y.lng+=360}return y.lng!==f.lng&&l.locationPoint(y).y>l.height/2-l.getHorizon()?y:f}const ku={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ac(y,r,l){const f=y.classList;for(const m in ku)f.remove(`maplibregl-${l}-anchor-${m}`);f.add(`maplibregl-${l}-anchor-${r}`)}class kl extends u.E{constructor(r){if(super(),this._onKeyPress=l=>{const f=l.code,m=l.charCode||l.keyCode;f!=="Space"&&f!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=l=>{const f=l.originalEvent.target,m=this._element;this._popup&&(f===m||m.contains(f))&&this.togglePopup()},this._update=l=>{var f;if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Ic(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),l&&l.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${ku[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${v}`),w.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");const l=T.createNS("http://www.w3.org/2000/svg","svg"),f=41,m=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${f}px`),l.setAttributeNS(null,"width",`${m}px`),l.setAttributeNS(null,"viewBox",`0 0 ${m} ${f}`);const v=T.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");const I=T.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");const P=T.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Xe of M){const rt=T.createNS("http://www.w3.org/2000/svg","ellipse");rt.setAttributeNS(null,"opacity","0.04"),rt.setAttributeNS(null,"cx","10.5"),rt.setAttributeNS(null,"cy","5.80029008"),rt.setAttributeNS(null,"rx",Xe.rx),rt.setAttributeNS(null,"ry",Xe.ry),P.appendChild(rt)}const H=T.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);const Q=T.createNS("http://www.w3.org/2000/svg","path");Q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(Q);const ne=T.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"opacity","0.25"),ne.setAttributeNS(null,"fill","#000000");const ge=T.createNS("http://www.w3.org/2000/svg","path");ge.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ne.appendChild(ge);const Me=T.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Me.setAttributeNS(null,"fill","#FFFFFF");const ke=T.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Le=T.createNS("http://www.w3.org/2000/svg","circle");Le.setAttributeNS(null,"fill","#000000"),Le.setAttributeNS(null,"opacity","0.25"),Le.setAttributeNS(null,"cx","5.5"),Le.setAttributeNS(null,"cy","5.5"),Le.setAttributeNS(null,"r","5.4999962");const Te=T.createNS("http://www.w3.org/2000/svg","circle");Te.setAttributeNS(null,"fill","#FFFFFF"),Te.setAttributeNS(null,"cx","5.5"),Te.setAttributeNS(null,"cy","5.5"),Te.setAttributeNS(null,"r","5.4999962"),ke.appendChild(Le),ke.appendChild(Te),I.appendChild(P),I.appendChild(H),I.appendChild(ne),I.appendChild(Me),I.appendChild(ke),l.appendChild(I),l.setAttributeNS(null,"height",f*this._scale+"px"),l.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(l),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),Ac(this._element,this._anchor,"marker"),r&&r.className)for(const l of r.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.M.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var l,f;if(!(!((l=this._map)===null||l===void 0)&&l.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,v=m.terrain.depthAtPoint(this._pos),I=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,I)-v<.006)return void(this._element.style.opacity=this._opacity);const P=-this._offset.y/m.transform._pixelPerMeter,M=Math.sin(m.getPitch()*Math.PI/180)*P,H=m.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),Q=m.transform.lngLatToCameraDepth(this._lngLat,I+M)-H>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&Q&&this._popup.remove(),this._element.style.opacity=Q?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,l){return r===void 0&&l===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const od={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ml=0,Ys=!1;const sd={maxWidth:100,unit:"metric"};function Pc(y,r,l){const f=l&&l.maxWidth||100,m=y._container.clientHeight/2,v=y.unproject([0,m]),I=y.unproject([f,m]),P=v.distanceTo(I);if(l&&l.unit==="imperial"){const M=3.2808*P;M>5280?Ra(r,f,M/5280,y._getUIString("ScaleControl.Miles")):Ra(r,f,M,y._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?Ra(r,f,P/1852,y._getUIString("ScaleControl.NauticalMiles")):P>=1e3?Ra(r,f,P/1e3,y._getUIString("ScaleControl.Kilometers")):Ra(r,f,P,y._getUIString("ScaleControl.Meters"))}function Ra(y,r,l,f){const m=function(v){const I=Math.pow(10,`${Math.floor(v)}`.length-1);let P=v/I;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(M){const H=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*H)/H}(P),I*P}(l);y.style.width=r*(m/l)+"px",y.innerHTML=`${m}&nbsp;${f}`}const ad={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},ld=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ud(y){if(y){if(typeof y=="number"){const r=Math.round(Math.abs(y)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,y),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-y),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(y,0),right:new u.P(-y,0)}}if(y instanceof u.P||Array.isArray(y)){const r=u.P.convert(y);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(y.center||[0,0]),top:u.P.convert(y.top||[0,0]),"top-left":u.P.convert(y["top-left"]||[0,0]),"top-right":u.P.convert(y["top-right"]||[0,0]),bottom:u.P.convert(y.bottom||[0,0]),"bottom-left":u.P.convert(y["bottom-left"]||[0,0]),"bottom-right":u.P.convert(y["bottom-right"]||[0,0]),left:u.P.convert(y.left||[0,0]),right:u.P.convert(y.right||[0,0])}}return ud(new u.P(0,0))}const up=b;d.AJAXError=u.be,d.Evented=u.E,d.LngLat=u.M,d.MercatorCoordinate=u.Y,d.Point=u.P,d.addProtocol=u.bf,d.config=u.a,d.removeProtocol=u.bg,d.AttributionControl=ap,d.BoxZoomHandler=ai,d.CanvasSource=Ze,d.CooperativeGesturesHandler=nn,d.DoubleClickZoomHandler=Jh,d.DragPanHandler=Co,d.DragRotateHandler=Cu,d.EdgeInsets=Zs,d.FullscreenControl=class extends u.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var r;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=l==null?void 0:l.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=we,d.GeolocateControl=class extends u.E{constructor(y){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const l=new u.M(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,m=this._map.getBearing(),v=u.e({bearing:m},this.options.fitBoundsOptions),I=Zt.fromLngLat(l,f);this._map.fitBounds(I,v,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const l=new u.M(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Ys)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new kl({element:this._dotElement}),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new kl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")))})}},this.options=u.e({},od,y)}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return u._(this,arguments,void 0,function*(r=!1){if(ys!==void 0&&!r)return ys;if(window.navigator.permissions===void 0)return ys=!!window.navigator.geolocation,ys;try{ys=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ys=!!window.navigator.geolocation}return ys})}().then(r=>this._setupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ml=0,Ys=!1}_isOutOfMapMaxBounds(y){const r=this._map.getMaxBounds(),l=y.coords;return r&&(l.longitude<r.getWest()||l.longitude>r.getEast()||l.latitude<r.getSouth()||l.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),r=y.getSouthEast(),l=y.getNorthEast(),f=r.distanceTo(l),m=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ml--,Ys=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ml++,Ml>1?(y={maximumAge:6e5,timeout:0},Ys=!0):(y=this.options.positionOptions,Ys=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.Hash=ve,d.ImageSource=D,d.KeyboardHandler=tr,d.LngLatBounds=Zt,d.LogoControl=Pl,d.Map=class extends sp{constructor(y){if(u.bc.mark(u.bd.create),(y=u.e({},nd,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Aa(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._contextLost=r=>{r.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new mr,this._controls=[],this._mapId=u.a3(),this._locale=u.e({},td,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=$.addThrottleControl(()=>this.isMoving()),this._requestManager=new X(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const l=G(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{r?l(f):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new zi(this,y),this._hash=y.hash&&new ve(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,u.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new ap(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new Pl,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new u.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new u.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new u.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(y,r){if(r===void 0&&(r=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=y.onAdd(this);this._controls.push(y);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(y);return r>-1&&this._controls.splice(r,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,r,l,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,r,l,f)}resize(y){var r;const l=this._containerDimensions(),f=l[0],m=l[1],v=this._getClampedPixelRatio(f,m);if(this._resizeCanvas(f,m,v),this.painter.resize(f,m,v),this.painter.overLimit()){const P=this.painter.context.gl;this._maxCanvasSize=[P.drawingBufferWidth,P.drawingBufferHeight];const M=this._getClampedPixelRatio(f,m);this._resizeCanvas(f,m,M),this.painter.resize(f,m,M)}this.transform.resize(f,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,m);const I=!this._moving;return I&&(this.stop(),this.fire(new u.k("movestart",y)).fire(new u.k("move",y))),this.fire(new u.k("resize",y)),I&&this.fire(new u.k("moveend",y)),this}_getClampedPixelRatio(y,r){const{0:l,1:f}=this._maxCanvasSize,m=this.getPixelRatio(),v=y*m,I=r*m;return Math.min(v>l?l/v:1,I>f?f/I:1)*m}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Zt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(u.M.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(u.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,r,l){if(y==="mouseenter"||y==="mouseover"){let f=!1;return{layer:r,listener:l,delegates:{mousemove:v=>{const I=this.getLayer(r)?this.queryRenderedFeatures(v.point,{layers:[r]}):[];I.length?f||(f=!0,l.call(this,new gn(y,this,v.originalEvent,{features:I}))):f=!1},mouseout:()=>{f=!1}}}}if(y==="mouseleave"||y==="mouseout"){let f=!1;return{layer:r,listener:l,delegates:{mousemove:I=>{(this.getLayer(r)?this.queryRenderedFeatures(I.point,{layers:[r]}):[]).length?f=!0:f&&(f=!1,l.call(this,new gn(y,this,I.originalEvent)))},mouseout:I=>{f&&(f=!1,l.call(this,new gn(y,this,I.originalEvent)))}}}}{const f=m=>{const v=this.getLayer(r)?this.queryRenderedFeatures(m.point,{layers:[r]}):[];v.length&&(m.features=v,l.call(this,m),delete m.features)};return{layer:r,listener:l,delegates:{[y]:f}}}}on(y,r,l){if(l===void 0)return super.on(y,r);const f=this._createDelegatedListener(y,r,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(f);for(const m in f.delegates)this.on(m,f.delegates[m]);return this}once(y,r,l){if(l===void 0)return super.once(y,r);const f=this._createDelegatedListener(y,r,l);for(const m in f.delegates)this.once(m,f.delegates[m]);return this}off(y,r,l){return l===void 0?super.off(y,r):(this._delegatedListeners&&this._delegatedListeners[y]&&(f=>{const m=this._delegatedListeners[y];for(let v=0;v<m.length;v++){const I=m[v];if(I.layer===r&&I.listener===l){for(const P in I.delegates)this.off(P,I.delegates[P]);return m.splice(v,1),this}}})(),this)}queryRenderedFeatures(y,r){if(!this.style)return[];let l;const f=y instanceof u.P||Array.isArray(y),m=f?y:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:y)||{},m instanceof u.P||typeof m[0]=="number")l=[u.P.convert(m)];else{const v=u.P.convert(m[0]),I=u.P.convert(m[1]);l=[v,new u.P(I.x,v.y),I,new u.P(v.x,I.y),v]}return this.style.queryRenderedFeatures(l,r,this.transform)}querySourceFeatures(y,r){return this.style.querySourceFeatures(y,r)}setStyle(y,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(y,r))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const r=this._locale[y];if(r==null)throw new Error(`Missing UI string '${y}'`);return r}_updateStyle(y,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,r));const l=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new al(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,r,l):this.style.loadJSON(y,r,l),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new al(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,r){if(typeof y=="string"){const l=this._requestManager.transformRequest(y,ie.Style);u.h(l,new AbortController).then(f=>{this._updateDiff(f.data,r)}).catch(f=>{f&&this.fire(new u.j(f))})}else typeof y=="object"&&this._updateDiff(y,r)}_updateDiff(y,r){try{this.style.setState(y,r)&&this._update(!0)}catch(l){u.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(y,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(y,r){return this._lazyInitEmptyStyle(),this.style.addSource(y,r),this._update(!0)}isSourceLoaded(y){const r=this.style&&this.style.sourceCaches[y];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const r=this.style.sourceCaches[y.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&r.reload();for(const l in this.style._layers){const f=this.style._layers[l];f.type==="hillshade"&&f.source===y.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Au(this.painter,r,y),this.painter.renderToTexture=new ed(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=l=>{l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:y})),this}getTerrain(){var y,r;return(r=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const r in y){const l=y[r]._tiles;for(const f in l){const m=l[f];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,r,l={}){const{pixelRatio:f=1,sdf:m=!1,stretchX:v,stretchY:I,content:P}=l;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:M,height:H,data:Q}=r,ne=r;return this.style.addImage(y,{data:new u.R({width:M,height:H},new Uint8Array(Q)),pixelRatio:f,stretchX:v,stretchY:I,content:P,sdf:m,version:0,userImage:ne}),ne.onAdd&&ne.onAdd(this,y),this}}{const{width:M,height:H,data:Q}=w.getImageData(r);this.style.addImage(y,{data:new u.R({width:M,height:H},Q),pixelRatio:f,stretchX:v,stretchY:I,content:P,sdf:m,version:0})}}updateImage(y,r){const l=this.style.getImage(y);if(!l)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||u.b(r)?w.getImageData(r):r,{width:m,height:v,data:I}=f;if(m===void 0||v===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==l.data.width||v!==l.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(r instanceof HTMLImageElement||u.b(r));return l.data.replace(I,P),this.style.updateImage(y,l),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return $.getImage(this._requestManager.transformRequest(y,ie.Image),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,r){return this._lazyInitEmptyStyle(),this.style.addLayer(y,r),this._update(!0)}moveLayer(y,r){return this.style.moveLayer(y,r),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,r,l){return this.style.setLayerZoomRange(y,r,l),this._update(!0)}setFilter(y,r,l={}){return this.style.setFilter(y,r,l),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,r,l,f={}){return this.style.setPaintProperty(y,r,l,f),this._update(!0)}getPaintProperty(y,r){return this.style.getPaintProperty(y,r)}setLayoutProperty(y,r,l,f={}){return this.style.setLayoutProperty(y,r,l,f),this._update(!0)}getLayoutProperty(y,r){return this.style.getLayoutProperty(y,r)}setGlyphs(y,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,r,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,r,l,f=>{f||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,r,l=>{l||this._update(!0)}),this}setLight(y,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,r){return this.style.setFeatureState(y,r),this._update()}removeFeatureState(y,r){return this.style.removeFeatureState(y,r),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,r=0;return this._container&&(y=this._container.clientWidth||400,r=this._container.clientHeight||300),[y,r]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const r=this._canvasContainer=T.create("div","maplibregl-canvas-container",y);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),f=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],f);const m=this._controlContainer=T.create("div","maplibregl-control-container",y),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(I=>{v[I]=T.create("div",`maplibregl-ctrl-${I} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,r,l){this._canvas.width=Math.floor(l*y),this._canvas.height=Math.floor(l*r),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:y},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});const l=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!l){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new Ws(l,this.transform),L.testSupport(l)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,v=w.now();this.style.zoomHistory.update(m,v);const I=new u.a8(m,{now:v,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),P=I.crossFadingFactor();P===1&&P===this._crossFadingFactor||(l=!0,this._crossFadingFactor=P),this.style.update(I)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bc.mark(u.bd.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,u.bc.mark(u.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bc.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then(y=>{u.bc.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Pu}getCameraTargetElevation(){return this.transform.elevation}},d.MapMouseEvent=gn,d.MapTouchEvent=Xn,d.MapWheelEvent=Nn,d.Marker=kl,d.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const r=this._map.getZoom(),l=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,l)=>{const f=this._map._getUIString(`NavigationControl.${l}`);r.title=f,r.setAttribute("aria-label",f)},this.options=u.e({},rd,y),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),T.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),T.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new id(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,r){const l=T.create("button",y,this._container);return l.type="button",l.addEventListener("click",r),l}},d.Popup=class extends u.E{constructor(y){super(),this.remove=()=>(this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var l;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=T.create("div","maplibregl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Ic(this._lngLat,this._flatPos,this._map.transform):(l=this._lngLat)===null||l===void 0?void 0:l.wrap(),this._trackPointer&&!r)return;const f=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let m=this.options.anchor;const v=ud(this.options.offset);if(!m){const P=this._container.offsetWidth,M=this._container.offsetHeight;let H;H=f.y+v.bottom.y<M?["top"]:f.y>this._map.transform.height-M?["bottom"]:[],f.x<P/2?H.push("left"):f.x>this._map.transform.width-P/2&&H.push("right"),m=H.length===0?"bottom":H.join("-")}let I=f.add(v[m]);this.options.subpixelPositioning||(I=I.round()),T.setTransform(this._container,`${ku[m]} translate(${I.x}px,${I.y}px)`),Ac(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(ad),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=u.M.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const r=document.createDocumentFragment(),l=document.createElement("body");let f;for(l.innerHTML=y;f=l.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(ld);y&&y.focus()}},d.RasterDEMTileSource=Sn,d.RasterTileSource=sn,d.ScaleControl=class{constructor(y){this._onMove=()=>{Pc(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Pc(this._map,this._container,this.options)},this.options=u.e({},sd,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=Yh,d.Style=al,d.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=ip,d.TwoFingersTouchRotateHandler=qh,d.TwoFingersTouchZoomHandler=bc,d.TwoFingersTouchZoomRotateHandler=qt,d.VectorTileSource=et,d.VideoSource=xe,d.addSourceType=(y,r)=>u._(void 0,void 0,void 0,function*(){if(ct(y))throw new Error(`A source type called "${y}" already exists.`);((l,f)=>{Qe[l]=f})(y,r)}),d.clearPrewarmedResources=function(){const y=He;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Pe),He=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return Se().getRTLTextPluginStatus()},d.getVersion=function(){return up},d.getWorkerCount=function(){return ze.workerCount},d.getWorkerUrl=function(){return u.a.WORKER_URL},d.importScriptInWorkers=function(y){return Mt().broadcast("importScript",y)},d.prewarm=function(){dt().acquire(Pe)},d.setMaxParallelImageRequests=function(y){u.a.MAX_PARALLEL_IMAGE_REQUESTS=y},d.setRTLTextPlugin=function(y,r){return Se().setRTLTextPlugin(y,r)},d.setWorkerCount=function(y){ze.workerCount=y},d.setWorkerUrl=function(y){u.a.WORKER_URL=y}});var p=i;return p})})(fC);var mC=fC.exports;const gC=Uf(mC),L3=uk({__proto__:null,default:gC},[mC]),F3="modulepreload",j3=function(e){return"/osm-address-editor-vite/"+e},h2={},D3=function(t,i,a){let c=Promise.resolve();if(i&&i.length>0){const p=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));c=Promise.all(i.map(b=>{if(b=j3(b),b in h2)return;h2[b]=!0;const C=b.endsWith(".css"),A=C?'[rel="stylesheet"]':"";if(!!a)for(let L=p.length-1;L>=0;L--){const U=p[L];if(U.href===b&&(!C||U.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${A}`))return;const T=document.createElement("link");if(T.rel=C?"stylesheet":F3,C||(T.as="script",T.crossOrigin=""),T.href=b,u&&T.setAttribute("nonce",u),document.head.appendChild(T),C)return new Promise((L,U)=>{T.addEventListener("load",L),T.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${b}`)))})}))}return c.then(()=>t()).catch(p=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=p,window.dispatchEvent(d),!d.defaultPrevented)throw p})},B3=_t.createContext(null);function N3(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,p=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===p}function jo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!jo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!jo(e[c],t[c]))return!1;return!0}return!1}function U3(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function d2(e,t){if(!e.getProjection)return;const i=e.getProjection(),a=t.getProjection();jo(i,a)||t.setProjection(i)}function f2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function p2(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const $3=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function m2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const p=t[a.ref];if(p){c=c||Object.assign({},a),delete c.ref;for(const d of $3)d in p&&(c[d]=p[d])}return c||a});return{...e,layers:i}}var g2={};const y2={version:8,sources:{},layers:[]},v2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},C0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},_2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},V3=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],G3=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Ah{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const p=this.props[_2[c.type]];p?p(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const p=this.props[v2[c.type]];p&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),p(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const p=this.props[C0[c.type]];p&&p(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),p=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||p&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=Ah.savedMaps.pop();if(!a)return null;const c=a.map,p=c.getContainer();for(i.className=p.className;p.childNodes.length>0;)i.appendChild(p.childNodes[0]);c._container=i;const d=c._resizeObserver;d&&(d.disconnect(),d.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:u}=t;return u&&(u.bounds?c.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):a._updateViewState(u,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=y2}=i,c={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||H3()||null,container:t,style:m2(a)},p=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[p.longitude||0,p.latitude||0],zoom:p.zoom||0,pitch:p.pitch||0,bearing:p.bearing||0}),i.gl){const A=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=A,i.gl)}const d=new this._MapClass(c);p.padding&&d.setPadding(p.padding),i.cursor&&(d.getCanvas().style.cursor=i.cursor),this._createShadowTransform(d);const u=d._render;d._render=A=>{this._inRender=!0,u.call(d,A),this._inRender=!1};const b=d._renderTaskQueue.run;d._renderTaskQueue.run=A=>{b.call(d._renderTaskQueue,A),this._onBeforeRepaint()},d.on("render",()=>this._onAfterRepaint());const C=d.fire;d.fire=this._fireEvent.bind(this,C),d.on("resize",()=>{this._renderTransform.resize(d.transform.width,d.transform.height)}),d.on("styledata",()=>{this._updateStyleComponents(this.props,{}),d2(d.transform,this._renderTransform)}),d.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const A in v2)d.on(A,this._onPointerEvent);for(const A in C0)d.on(A,this._onCameraEvent);for(const A in _2)d.on(A,this._onEvent);this._map=d}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),Ah.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=U3(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:p,pitch:d,bearing:u}=c,b=a.isMoving();b&&(c.cameraElevationReference="sea");const C=p2(c,{...f2(a.transform),...t});if(b&&(c.cameraElevationReference="ground"),C&&i){const A=this._deferredEvents;A.move=!0,A.zoom||(A.zoom=p!==c.zoom),A.rotate||(A.rotate=u!==c.bearing),A.pitch||(A.pitch=d!==c.pitch)}return b||p2(a.transform,t),C}_updateSettings(t,i){const a=this._map;let c=!1;for(const p of V3)if(p in t&&!jo(t[p],i[p])){c=!0;const d=a[`set${p[0].toUpperCase()}${p.slice(1)}`];d==null||d.call(a,t[p])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=y2,styleDiffing:c=!0}=t,p={diff:c};return"localIdeographFontFamily"in t&&(p.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(m2(a),p),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!jo(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!jo(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!jo(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){var a,c;const p=this._map;let d=!1;for(const u of G3){const b=(a=t[u])!==null&&a!==void 0?a:!0,C=(c=i[u])!==null&&c!==void 0?c:!0;jo(b,C)||(d=!0,b?p[u].enable(b):p[u].disable())}return d}_queryRenderedFeatures(t){const i=this._map,a=i.transform,{interactiveLayerIds:c=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:c.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=a}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const p=t.type,d=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,u=this._queryRenderedFeatures(t.point),b=u.length>0;!b&&d&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=u,b&&!d&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=p}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,p=c.transform,d=typeof i=="string"?i:i.type;return d==="move"&&this._updateViewState(this.props,!1),d in C0&&(typeof i=="object"&&(i.viewState=f2(p)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=p,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{d2(this._renderTransform,i),t.transform=i}}}Ah.savedMaps=[];function H3(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||g2.MapboxAccessToken}catch{}try{e=e||g2.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const W3=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Z3(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const c=t.transform;t.transform=e.transform;const p=t.project(a);return t.transform=c,p},unproject:a=>{const c=t.transform;t.transform=e.transform;const p=t.unproject(a);return t.transform=c,p},queryTerrainElevation:(a,c)=>{const p=t.transform;t.transform=e.transform;const d=t.queryTerrainElevation(a,c);return t.transform=p,d},queryRenderedFeatures:(a,c)=>{const p=t.transform;t.transform=e.transform;const d=t.queryRenderedFeatures(a,c);return t.transform=p,d}};for(const a of X3(t))!(a in i)&&!W3.includes(a)&&(i[a]=t[a].bind(t));return i}function X3(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const q3=typeof document<"u"?_t.useLayoutEffect:_t.useEffect,K3=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Y3(e,t){for(const a of K3)a in t&&(e[a]=t[a]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,a=>{a&&console.error(a)},!0)}const jh=_t.createContext(null);function J3(e,t,i){const a=_t.useContext(B3),[c,p]=_t.useState(null),d=_t.useRef(),{current:u}=_t.useRef({mapLib:null,map:null});_t.useEffect(()=>{const A=e.mapLib;let w=!0,T;return Promise.resolve(A||i).then(L=>{if(!w)return;if(!L)throw new Error("Invalid mapLib");const U="Map"in L?L:L.default;if(!U.Map)throw new Error("Invalid mapLib");if(Y3(U,e),!U.supported||U.supported(e))e.reuseMaps&&(T=Ah.reuse(e,d.current)),T||(T=new Ah(U.Map,e,d.current)),u.map=Z3(T),u.mapLib=U,p(T),a==null||a.onMapMount(u.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(L=>{const{onError:U}=e;U?U({type:"error",target:null,originalEvent:null,error:L}):console.error(L)}),()=>{w=!1,T&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?T.recycle():T.destroy())}},[]),q3(()=>{c&&c.setProps(e)}),_t.useImperativeHandle(t,()=>u.map,[c]);const b=_t.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),C={height:"100%"};return _t.createElement("div",{id:e.id,ref:d,style:b},c&&_t.createElement(jh.Provider,{value:u},_t.createElement("div",{"mapboxgl-children":"",style:C},e.children)))}const Q3=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function rc(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!Q3.test(a)?i[a]=`${c}px`:i[a]=c}}function e4(e,t){const{map:i,mapLib:a}=_t.useContext(jh),c=_t.useRef({props:e});c.current.props=e;const p=_t.useMemo(()=>{let F=!1;_t.Children.forEach(e.children,W=>{W&&(F=!0)});const ce={...e,element:F?document.createElement("div"):null},K=new a.Marker(ce);return K.setLngLat([e.longitude,e.latitude]),K.getElement().addEventListener("click",W=>{var $,ie;(ie=($=c.current.props).onClick)===null||ie===void 0||ie.call($,{type:"click",target:K,originalEvent:W})}),K.on("dragstart",W=>{var $,ie;const X=W;X.lngLat=p.getLngLat(),(ie=($=c.current.props).onDragStart)===null||ie===void 0||ie.call($,X)}),K.on("drag",W=>{var $,ie;const X=W;X.lngLat=p.getLngLat(),(ie=($=c.current.props).onDrag)===null||ie===void 0||ie.call($,X)}),K.on("dragend",W=>{var $,ie;const X=W;X.lngLat=p.getLngLat(),(ie=($=c.current.props).onDragEnd)===null||ie===void 0||ie.call($,X)}),K},[]);_t.useEffect(()=>(p.addTo(i.getMap()),()=>{p.remove()}),[]);const{longitude:d,latitude:u,offset:b,style:C,draggable:A=!1,popup:w=null,rotation:T=0,rotationAlignment:L="auto",pitchAlignment:U="auto"}=e;return _t.useEffect(()=>{rc(p.getElement(),C)},[C]),_t.useImperativeHandle(t,()=>p,[]),(p.getLngLat().lng!==d||p.getLngLat().lat!==u)&&p.setLngLat([d,u]),b&&!N3(p.getOffset(),b)&&p.setOffset(b),p.isDraggable()!==A&&p.setDraggable(A),p.getRotation()!==T&&p.setRotation(T),p.getRotationAlignment()!==L&&p.setRotationAlignment(L),p.getPitchAlignment()!==U&&p.setPitchAlignment(U),p.getPopup()!==w&&p.setPopup(w),D1.createPortal(e.children,p.getElement())}const t4=_t.memo(_t.forwardRef(e4));function x2(e){return new Set(e?e.trim().split(/\s+/):[])}function n4(e,t){const{map:i,mapLib:a}=_t.useContext(jh),c=_t.useMemo(()=>document.createElement("div"),[]),p=_t.useRef({props:e});p.current.props=e;const d=_t.useMemo(()=>{const u={...e},b=new a.Popup(u);return b.setLngLat([e.longitude,e.latitude]),b.once("open",C=>{var A,w;(w=(A=p.current.props).onOpen)===null||w===void 0||w.call(A,C)}),b},[]);if(_t.useEffect(()=>{const u=b=>{var C,A;(A=(C=p.current.props).onClose)===null||A===void 0||A.call(C,b)};return d.on("close",u),d.setDOMContent(c).addTo(i.getMap()),()=>{d.off("close",u),d.isOpen()&&d.remove()}},[]),_t.useEffect(()=>{rc(d.getElement(),e.style)},[e.style]),_t.useImperativeHandle(t,()=>d,[]),d.isOpen()&&((d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!jo(d.options.offset,e.offset)&&d.setOffset(e.offset),(d.options.anchor!==e.anchor||d.options.maxWidth!==e.maxWidth)&&(d.options.anchor=e.anchor,d.setMaxWidth(e.maxWidth)),d.options.className!==e.className)){const u=x2(d.options.className),b=x2(e.className);for(const C of u)b.has(C)||d.removeClassName(C);for(const C of b)u.has(C)||d.addClassName(C);d.options.className=e.className}return D1.createPortal(e.children,c)}_t.memo(_t.forwardRef(n4));function Zf(e,t,i,a){const c=_t.useContext(jh),p=_t.useMemo(()=>e(c),[]);return _t.useEffect(()=>{const d=a||i||t,u=typeof t=="function"&&typeof i=="function"?t:null,b=typeof i=="function"?i:typeof t=="function"?t:null,{map:C}=c;return C.hasControl(p)||(C.addControl(p,d==null?void 0:d.position),u&&u(c)),()=>{b&&b(c),C.hasControl(p)&&C.removeControl(p)}},[]),p}function r4(e){const t=Zf(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return _t.useEffect(()=>{rc(t._container,e.style)},[e.style]),null}_t.memo(r4);function i4(e){const t=Zf(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return _t.useEffect(()=>{rc(t._controlContainer,e.style)},[e.style]),null}_t.memo(i4);function o4(e,t){const i=_t.useRef({props:e}),a=Zf(({mapLib:c})=>{const p=new c.GeolocateControl(e),d=p._setupUI;return p._setupUI=u=>{p._container.hasChildNodes()||d(u)},p.on("geolocate",u=>{var b,C;(C=(b=i.current.props).onGeolocate)===null||C===void 0||C.call(b,u)}),p.on("error",u=>{var b,C;(C=(b=i.current.props).onError)===null||C===void 0||C.call(b,u)}),p.on("outofmaxbounds",u=>{var b,C;(C=(b=i.current.props).onOutOfMaxBounds)===null||C===void 0||C.call(b,u)}),p.on("trackuserlocationstart",u=>{var b,C;(C=(b=i.current.props).onTrackUserLocationStart)===null||C===void 0||C.call(b,u)}),p.on("trackuserlocationend",u=>{var b,C;(C=(b=i.current.props).onTrackUserLocationEnd)===null||C===void 0||C.call(b,u)}),p},{position:e.position});return i.current.props=e,_t.useImperativeHandle(t,()=>a,[]),_t.useEffect(()=>{rc(a._container,e.style)},[e.style]),null}const s4=_t.memo(_t.forwardRef(o4));function a4(e){const t=Zf(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return _t.useEffect(()=>{rc(t._container,e.style)},[e.style]),null}const l4=_t.memo(a4);function u4(e){const t=Zf(({mapLib:p})=>new p.ScaleControl(e),{position:e.position}),i=_t.useRef(e),a=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),_t.useEffect(()=>{rc(t._container,c)},[c]),null}_t.memo(u4);function lg(e,t){if(!e)throw new Error(t)}function c4(e,t,i,a){if(lg(i.id===a.id,"layer id changed"),lg(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:p={},filter:d,minzoom:u,maxzoom:b,beforeId:C}=i;if(C!==a.beforeId&&e.moveLayer(t,C),c!==a.layout){const A=a.layout||{};for(const w in c)jo(c[w],A[w])||e.setLayoutProperty(t,w,c[w]);for(const w in A)c.hasOwnProperty(w)||e.setLayoutProperty(t,w,void 0)}if(p!==a.paint){const A=a.paint||{};for(const w in p)jo(p[w],A[w])||e.setPaintProperty(t,w,p[w]);for(const w in A)p.hasOwnProperty(w)||e.setPaintProperty(t,w,void 0)}jo(d,a.filter)||e.setFilter(t,d),(u!==a.minzoom||b!==a.maxzoom)&&e.setLayerZoomRange(t,u,b)}function h4(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let d4=0;function f4(e){const t=_t.useContext(jh).map.getMap(),i=_t.useRef(e),[,a]=_t.useState(0),c=_t.useMemo(()=>e.id||`jsx-layer-${d4++}`,[]);if(_t.useEffect(()=>{if(t){const d=()=>a(u=>u+1);return t.on("styledata",d),d(),()=>{t.off("styledata",d),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{c4(t,c,e,i.current)}catch(d){console.warn(d)}else h4(t,c,e);return i.current=e,null}let p4=0;function m4(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function g4(e,t,i){lg(t.id===i.id,"source id changed"),lg(t.type===i.type,"source type changed");let a="",c=0;for(const d in t)d!=="children"&&d!=="id"&&!jo(i[d],t[d])&&(a=d,c++);if(!c)return;const p=t.type;if(p==="geojson")e.setData(t.data);else if(p==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function y4(e){const t=_t.useContext(jh).map.getMap(),i=_t.useRef(e),[,a]=_t.useState(0),c=_t.useMemo(()=>e.id||`jsx-source-${p4++}`,[]);_t.useEffect(()=>{if(t){const d=()=>setTimeout(()=>a(u=>u+1),0);return t.on("styledata",d),d(),()=>{var u;if(t.off("styledata",d),t.style&&t.style._loaded&&t.getSource(c)){const b=(u=t.getStyle())===null||u===void 0?void 0:u.layers;if(b)for(const C of b)C.source===c&&t.removeLayer(C.id);t.removeSource(c)}}}},[t]);let p=t&&t.style&&t.getSource(c);return p?g4(p,e,i.current):p=m4(t,c,e),i.current=e,p&&_t.Children.map(e.children,d=>d&&_t.cloneElement(d,{source:c}))||null}const v4=D3(()=>Promise.resolve().then(()=>L3),void 0),_4=_t.forwardRef(function(t,i){return J3(t,i,v4)}),x4=t4,w4=l4,b4=s4,S4=f4,E4=y4;function w2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Yt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?w2(Object(i),!0).forEach(function(a){ri(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function ug(e){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ug(e)}function T4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b2(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function C4(e,t,i){return t&&b2(e.prototype,t),i&&b2(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function ri(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function B1(e,t){return A4(e)||k4(e,t)||yC(e,t)||z4()}function Xf(e){return I4(e)||P4(e)||yC(e)||M4()}function I4(e){if(Array.isArray(e))return Yv(e)}function A4(e){if(Array.isArray(e))return e}function P4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function k4(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],c=!0,p=!1,d,u;try{for(i=i.call(e);!(c=(d=i.next()).done)&&(a.push(d.value),!(t&&a.length===t));c=!0);}catch(b){p=!0,u=b}finally{try{!c&&i.return!=null&&i.return()}finally{if(p)throw u}}return a}}function yC(e,t){if(e){if(typeof e=="string")return Yv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Yv(e,t)}}function Yv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function M4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S2=function(){},N1={},vC={},_C=null,xC={mark:S2,measure:S2};try{typeof window<"u"&&(N1=window),typeof document<"u"&&(vC=document),typeof MutationObserver<"u"&&(_C=MutationObserver),typeof performance<"u"&&(xC=performance)}catch{}var R4=N1.navigator||{},E2=R4.userAgent,T2=E2===void 0?"":E2,su=N1,xr=vC,C2=_C,Yp=xC;su.document;var sl=!!xr.documentElement&&!!xr.head&&typeof xr.addEventListener=="function"&&typeof xr.createElement=="function",wC=~T2.indexOf("MSIE")||~T2.indexOf("Trident/"),Jp,Qp,em,tm,nm,tl="___FONT_AWESOME___",Jv=16,bC="fa",SC="svg-inline--fa",Yu="data-fa-i2svg",Qv="data-fa-pseudo-element",O4="data-fa-pseudo-element-pending",U1="data-prefix",$1="data-icon",I2="fontawesome-i2svg",L4="async",F4=["HTML","HEAD","STYLE","SCRIPT"],EC=function(){try{return!0}catch{return!1}}(),vr="classic",jr="sharp",V1=[vr,jr];function qf(e){return new Proxy(e,{get:function(i,a){return a in i?i[a]:i[vr]}})}var Mf=qf((Jp={},ri(Jp,vr,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),ri(Jp,jr,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),Jp)),zf=qf((Qp={},ri(Qp,vr,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),ri(Qp,jr,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),Qp)),Rf=qf((em={},ri(em,vr,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),ri(em,jr,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),em)),j4=qf((tm={},ri(tm,vr,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),ri(tm,jr,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),tm)),D4=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,TC="fa-layers-text",B4=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,N4=qf((nm={},ri(nm,vr,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),ri(nm,jr,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),nm)),CC=[1,2,3,4,5,6,7,8,9,10],U4=CC.concat([11,12,13,14,15,16,17,18,19,20]),$4=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],$u={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Of=new Set;Object.keys(zf[vr]).map(Of.add.bind(Of));Object.keys(zf[jr]).map(Of.add.bind(Of));var V4=[].concat(V1,Xf(Of),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",$u.GROUP,$u.SWAP_OPACITY,$u.PRIMARY,$u.SECONDARY]).concat(CC.map(function(e){return"".concat(e,"x")})).concat(U4.map(function(e){return"w-".concat(e)})),af=su.FontAwesomeConfig||{};function G4(e){var t=xr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function H4(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(xr&&typeof xr.querySelector=="function"){var W4=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];W4.forEach(function(e){var t=B1(e,2),i=t[0],a=t[1],c=H4(G4(i));c!=null&&(af[a]=c)})}var IC={styleDefault:"solid",familyDefault:"classic",cssPrefix:bC,replacementClass:SC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};af.familyPrefix&&(af.cssPrefix=af.familyPrefix);var Ph=Yt(Yt({},IC),af);Ph.autoReplaceSvg||(Ph.observeMutations=!1);var rn={};Object.keys(IC).forEach(function(e){Object.defineProperty(rn,e,{enumerable:!0,set:function(i){Ph[e]=i,lf.forEach(function(a){return a(rn)})},get:function(){return Ph[e]}})});Object.defineProperty(rn,"familyPrefix",{enumerable:!0,set:function(t){Ph.cssPrefix=t,lf.forEach(function(i){return i(rn)})},get:function(){return Ph.cssPrefix}});su.FontAwesomeConfig=rn;var lf=[];function Z4(e){return lf.push(e),function(){lf.splice(lf.indexOf(e),1)}}var Nl=Jv,sa={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function X4(e){if(!(!e||!sl)){var t=xr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=xr.head.childNodes,a=null,c=i.length-1;c>-1;c--){var p=i[c],d=(p.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(d)>-1&&(a=p)}return xr.head.insertBefore(t,a),e}}var q4="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Lf(){for(var e=12,t="";e-- >0;)t+=q4[Math.random()*62|0];return t}function Dh(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function G1(e){return e.classList?Dh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function AC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function K4(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(AC(e[i]),'" ')},"").trim()}function ty(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function H1(e){return e.size!==sa.size||e.x!==sa.x||e.y!==sa.y||e.rotate!==sa.rotate||e.flipX||e.flipY}function Y4(e){var t=e.transform,i=e.containerWidth,a=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},p="translate(".concat(t.x*32,", ").concat(t.y*32,") "),d="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)"),b={transform:"".concat(p," ").concat(d," ").concat(u)},C={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:b,path:C}}function J4(e){var t=e.transform,i=e.width,a=i===void 0?Jv:i,c=e.height,p=c===void 0?Jv:c,d=e.startCentered,u=d===void 0?!1:d,b="";return u&&wC?b+="translate(".concat(t.x/Nl-a/2,"em, ").concat(t.y/Nl-p/2,"em) "):u?b+="translate(calc(-50% + ".concat(t.x/Nl,"em), calc(-50% + ").concat(t.y/Nl,"em)) "):b+="translate(".concat(t.x/Nl,"em, ").concat(t.y/Nl,"em) "),b+="scale(".concat(t.size/Nl*(t.flipX?-1:1),", ").concat(t.size/Nl*(t.flipY?-1:1),") "),b+="rotate(".concat(t.rotate,"deg) "),b}var Q4=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function PC(){var e=bC,t=SC,i=rn.cssPrefix,a=rn.replacementClass,c=Q4;if(i!==e||a!==t){var p=new RegExp("\\.".concat(e,"\\-"),"g"),d=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");c=c.replace(p,".".concat(i,"-")).replace(d,"--".concat(i,"-")).replace(u,".".concat(a))}return c}var A2=!1;function I0(){rn.autoAddCss&&!A2&&(X4(PC()),A2=!0)}var ez={mixout:function(){return{dom:{css:PC,insertCss:I0}}},hooks:function(){return{beforeDOMElementCreation:function(){I0()},beforeI2svg:function(){I0()}}}},nl=su||{};nl[tl]||(nl[tl]={});nl[tl].styles||(nl[tl].styles={});nl[tl].hooks||(nl[tl].hooks={});nl[tl].shims||(nl[tl].shims=[]);var Is=nl[tl],kC=[],tz=function e(){xr.removeEventListener("DOMContentLoaded",e),cg=1,kC.map(function(t){return t()})},cg=!1;sl&&(cg=(xr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(xr.readyState),cg||xr.addEventListener("DOMContentLoaded",tz));function nz(e){sl&&(cg?setTimeout(e,0):kC.push(e))}function Kf(e){var t=e.tag,i=e.attributes,a=i===void 0?{}:i,c=e.children,p=c===void 0?[]:c;return typeof e=="string"?AC(e):"<".concat(t," ").concat(K4(a),">").concat(p.map(Kf).join(""),"</").concat(t,">")}function P2(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var rz=function(t,i){return function(a,c,p,d){return t.call(i,a,c,p,d)}},A0=function(t,i,a,c){var p=Object.keys(t),d=p.length,u=c!==void 0?rz(i,c):i,b,C,A;for(a===void 0?(b=1,A=t[p[0]]):(b=0,A=a);b<d;b++)C=p[b],A=u(A,t[C],C,t);return A};function iz(e){for(var t=[],i=0,a=e.length;i<a;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){var p=e.charCodeAt(i++);(p&64512)==56320?t.push(((c&1023)<<10)+(p&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function e_(e){var t=iz(e);return t.length===1?t[0].toString(16):null}function oz(e,t){var i=e.length,a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function k2(e){return Object.keys(e).reduce(function(t,i){var a=e[i],c=!!a.icon;return c?t[a.iconName]=a.icon:t[i]=a,t},{})}function t_(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,c=a===void 0?!1:a,p=k2(t);typeof Is.hooks.addPack=="function"&&!c?Is.hooks.addPack(e,k2(t)):Is.styles[e]=Yt(Yt({},Is.styles[e]||{}),p),e==="fas"&&t_("fa",t)}var rm,im,om,ah=Is.styles,sz=Is.shims,az=(rm={},ri(rm,vr,Object.values(Rf[vr])),ri(rm,jr,Object.values(Rf[jr])),rm),W1=null,MC={},zC={},RC={},OC={},LC={},lz=(im={},ri(im,vr,Object.keys(Mf[vr])),ri(im,jr,Object.keys(Mf[jr])),im);function uz(e){return~V4.indexOf(e)}function cz(e,t){var i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!uz(c)?c:null}var FC=function(){var t=function(p){return A0(ah,function(d,u,b){return d[b]=A0(u,p,{}),d},{})};MC=t(function(c,p,d){if(p[3]&&(c[p[3]]=d),p[2]){var u=p[2].filter(function(b){return typeof b=="number"});u.forEach(function(b){c[b.toString(16)]=d})}return c}),zC=t(function(c,p,d){if(c[d]=d,p[2]){var u=p[2].filter(function(b){return typeof b=="string"});u.forEach(function(b){c[b]=d})}return c}),LC=t(function(c,p,d){var u=p[2];return c[d]=d,u.forEach(function(b){c[b]=d}),c});var i="far"in ah||rn.autoFetchSvg,a=A0(sz,function(c,p){var d=p[0],u=p[1],b=p[2];return u==="far"&&!i&&(u="fas"),typeof d=="string"&&(c.names[d]={prefix:u,iconName:b}),typeof d=="number"&&(c.unicodes[d.toString(16)]={prefix:u,iconName:b}),c},{names:{},unicodes:{}});RC=a.names,OC=a.unicodes,W1=ny(rn.styleDefault,{family:rn.familyDefault})};Z4(function(e){W1=ny(e.styleDefault,{family:rn.familyDefault})});FC();function Z1(e,t){return(MC[e]||{})[t]}function hz(e,t){return(zC[e]||{})[t]}function Vu(e,t){return(LC[e]||{})[t]}function jC(e){return RC[e]||{prefix:null,iconName:null}}function dz(e){var t=OC[e],i=Z1("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function au(){return W1}var X1=function(){return{prefix:null,iconName:null,rest:[]}};function ny(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.family,a=i===void 0?vr:i,c=Mf[a][e],p=zf[a][e]||zf[a][c],d=e in Is.styles?e:null;return p||d||null}var M2=(om={},ri(om,vr,Object.keys(Rf[vr])),ri(om,jr,Object.keys(Rf[jr])),om);function ry(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.skipLookups,c=a===void 0?!1:a,p=(t={},ri(t,vr,"".concat(rn.cssPrefix,"-").concat(vr)),ri(t,jr,"".concat(rn.cssPrefix,"-").concat(jr)),t),d=null,u=vr;(e.includes(p[vr])||e.some(function(C){return M2[vr].includes(C)}))&&(u=vr),(e.includes(p[jr])||e.some(function(C){return M2[jr].includes(C)}))&&(u=jr);var b=e.reduce(function(C,A){var w=cz(rn.cssPrefix,A);if(ah[A]?(A=az[u].includes(A)?j4[u][A]:A,d=A,C.prefix=A):lz[u].indexOf(A)>-1?(d=A,C.prefix=ny(A,{family:u})):w?C.iconName=w:A!==rn.replacementClass&&A!==p[vr]&&A!==p[jr]&&C.rest.push(A),!c&&C.prefix&&C.iconName){var T=d==="fa"?jC(C.iconName):{},L=Vu(C.prefix,C.iconName);T.prefix&&(d=null),C.iconName=T.iconName||L||C.iconName,C.prefix=T.prefix||C.prefix,C.prefix==="far"&&!ah.far&&ah.fas&&!rn.autoFetchSvg&&(C.prefix="fas")}return C},X1());return(e.includes("fa-brands")||e.includes("fab"))&&(b.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(b.prefix="fad"),!b.prefix&&u===jr&&(ah.fass||rn.autoFetchSvg)&&(b.prefix="fass",b.iconName=Vu(b.prefix,b.iconName)||b.iconName),(b.prefix==="fa"||d==="fa")&&(b.prefix=au()||"fas"),b}var fz=function(){function e(){T4(this,e),this.definitions={}}return C4(e,[{key:"add",value:function(){for(var i=this,a=arguments.length,c=new Array(a),p=0;p<a;p++)c[p]=arguments[p];var d=c.reduce(this._pullDefinitions,{});Object.keys(d).forEach(function(u){i.definitions[u]=Yt(Yt({},i.definitions[u]||{}),d[u]),t_(u,d[u]);var b=Rf[vr][u];b&&t_(b,d[u]),FC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var c=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(c).map(function(p){var d=c[p],u=d.prefix,b=d.iconName,C=d.icon,A=C[2];i[u]||(i[u]={}),A.length>0&&A.forEach(function(w){typeof w=="string"&&(i[u][w]=C)}),i[u][b]=C}),i}}]),e}(),z2=[],lh={},vh={},pz=Object.keys(vh);function mz(e,t){var i=t.mixoutsTo;return z2=e,lh={},Object.keys(vh).forEach(function(a){pz.indexOf(a)===-1&&delete vh[a]}),z2.forEach(function(a){var c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(function(d){typeof c[d]=="function"&&(i[d]=c[d]),ug(c[d])==="object"&&Object.keys(c[d]).forEach(function(u){i[d]||(i[d]={}),i[d][u]=c[d][u]})}),a.hooks){var p=a.hooks();Object.keys(p).forEach(function(d){lh[d]||(lh[d]=[]),lh[d].push(p[d])})}a.provides&&a.provides(vh)}),i}function n_(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var p=lh[e]||[];return p.forEach(function(d){t=d.apply(null,[t].concat(a))}),t}function Ju(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=lh[e]||[];c.forEach(function(p){p.apply(null,i)})}function rl(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return vh[e]?vh[e].apply(null,t):void 0}function r_(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||au();if(t)return t=Vu(i,t)||t,P2(DC.definitions,i,t)||P2(Is.styles,i,t)}var DC=new fz,gz=function(){rn.autoReplaceSvg=!1,rn.observeMutations=!1,Ju("noAuto")},yz={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return sl?(Ju("beforeI2svg",t),rl("pseudoElements2svg",t),rl("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;rn.autoReplaceSvg===!1&&(rn.autoReplaceSvg=!0),rn.observeMutations=!0,nz(function(){_z({autoReplaceSvgRoot:i}),Ju("watch",t)})}},vz={icon:function(t){if(t===null)return null;if(ug(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Vu(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=ny(t[0]);return{prefix:a,iconName:Vu(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(rn.cssPrefix,"-"))>-1||t.match(D4))){var c=ry(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||au(),iconName:Vu(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var p=au();return{prefix:p,iconName:Vu(p,t)||t}}}},Vo={noAuto:gz,config:rn,dom:yz,parse:vz,library:DC,findIconDefinition:r_,toHtml:Kf},_z=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?xr:i;(Object.keys(Is.styles).length>0||rn.autoFetchSvg)&&sl&&rn.autoReplaceSvg&&Vo.dom.i2svg({node:a})};function iy(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return Kf(a)})}}),Object.defineProperty(e,"node",{get:function(){if(sl){var a=xr.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function xz(e){var t=e.children,i=e.main,a=e.mask,c=e.attributes,p=e.styles,d=e.transform;if(H1(d)&&i.found&&!a.found){var u=i.width,b=i.height,C={x:u/b/2,y:.5};c.style=ty(Yt(Yt({},p),{},{"transform-origin":"".concat(C.x+d.x/16,"em ").concat(C.y+d.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function wz(e){var t=e.prefix,i=e.iconName,a=e.children,c=e.attributes,p=e.symbol,d=p===!0?"".concat(t,"-").concat(rn.cssPrefix,"-").concat(i):p;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Yt(Yt({},c),{},{id:d}),children:a}]}]}function q1(e){var t=e.icons,i=t.main,a=t.mask,c=e.prefix,p=e.iconName,d=e.transform,u=e.symbol,b=e.title,C=e.maskId,A=e.titleId,w=e.extra,T=e.watchable,L=T===void 0?!1:T,U=a.found?a:i,F=U.width,ce=U.height,K=c==="fak",W=[rn.replacementClass,p?"".concat(rn.cssPrefix,"-").concat(p):""].filter(function(B){return w.classes.indexOf(B)===-1}).filter(function(B){return B!==""||!!B}).concat(w.classes).join(" "),$={children:[],attributes:Yt(Yt({},w.attributes),{},{"data-prefix":c,"data-icon":p,class:W,role:w.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(F," ").concat(ce)})},ie=K&&!~w.classes.indexOf("fa-fw")?{width:"".concat(F/ce*16*.0625,"em")}:{};L&&($.attributes[Yu]=""),b&&($.children.push({tag:"title",attributes:{id:$.attributes["aria-labelledby"]||"title-".concat(A||Lf())},children:[b]}),delete $.attributes.title);var X=Yt(Yt({},$),{},{prefix:c,iconName:p,main:i,mask:a,maskId:C,transform:d,symbol:u,styles:Yt(Yt({},ie),w.styles)}),V=a.found&&i.found?rl("generateAbstractMask",X)||{children:[],attributes:{}}:rl("generateAbstractIcon",X)||{children:[],attributes:{}},E=V.children,j=V.attributes;return X.children=E,X.attributes=j,u?wz(X):xz(X)}function R2(e){var t=e.content,i=e.width,a=e.height,c=e.transform,p=e.title,d=e.extra,u=e.watchable,b=u===void 0?!1:u,C=Yt(Yt(Yt({},d.attributes),p?{title:p}:{}),{},{class:d.classes.join(" ")});b&&(C[Yu]="");var A=Yt({},d.styles);H1(c)&&(A.transform=J4({transform:c,startCentered:!0,width:i,height:a}),A["-webkit-transform"]=A.transform);var w=ty(A);w.length>0&&(C.style=w);var T=[];return T.push({tag:"span",attributes:C,children:[t]}),p&&T.push({tag:"span",attributes:{class:"sr-only"},children:[p]}),T}function bz(e){var t=e.content,i=e.title,a=e.extra,c=Yt(Yt(Yt({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),p=ty(a.styles);p.length>0&&(c.style=p);var d=[];return d.push({tag:"span",attributes:c,children:[t]}),i&&d.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),d}var P0=Is.styles;function i_(e){var t=e[0],i=e[1],a=e.slice(4),c=B1(a,1),p=c[0],d=null;return Array.isArray(p)?d={tag:"g",attributes:{class:"".concat(rn.cssPrefix,"-").concat($u.GROUP)},children:[{tag:"path",attributes:{class:"".concat(rn.cssPrefix,"-").concat($u.SECONDARY),fill:"currentColor",d:p[0]}},{tag:"path",attributes:{class:"".concat(rn.cssPrefix,"-").concat($u.PRIMARY),fill:"currentColor",d:p[1]}}]}:d={tag:"path",attributes:{fill:"currentColor",d:p}},{found:!0,width:t,height:i,icon:d}}var Sz={found:!1,width:512,height:512};function Ez(e,t){!EC&&!rn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function o_(e,t){var i=t;return t==="fa"&&rn.styleDefault!==null&&(t=au()),new Promise(function(a,c){if(rl("missingIconAbstract"),i==="fa"){var p=jC(e)||{};e=p.iconName||e,t=p.prefix||t}if(e&&t&&P0[t]&&P0[t][e]){var d=P0[t][e];return a(i_(d))}Ez(e,t),a(Yt(Yt({},Sz),{},{icon:rn.showMissingIcons&&e?rl("missingIconAbstract")||{}:{}}))})}var O2=function(){},s_=rn.measurePerformance&&Yp&&Yp.mark&&Yp.measure?Yp:{mark:O2,measure:O2},Vd='FA "6.5.1"',Tz=function(t){return s_.mark("".concat(Vd," ").concat(t," begins")),function(){return BC(t)}},BC=function(t){s_.mark("".concat(Vd," ").concat(t," ends")),s_.measure("".concat(Vd," ").concat(t),"".concat(Vd," ").concat(t," begins"),"".concat(Vd," ").concat(t," ends"))},K1={begin:Tz,end:BC},Pm=function(){};function L2(e){var t=e.getAttribute?e.getAttribute(Yu):null;return typeof t=="string"}function Cz(e){var t=e.getAttribute?e.getAttribute(U1):null,i=e.getAttribute?e.getAttribute($1):null;return t&&i}function Iz(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(rn.replacementClass)}function Az(){if(rn.autoReplaceSvg===!0)return km.replace;var e=km[rn.autoReplaceSvg];return e||km.replace}function Pz(e){return xr.createElementNS("http://www.w3.org/2000/svg",e)}function kz(e){return xr.createElement(e)}function NC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?e.tag==="svg"?Pz:kz:i;if(typeof e=="string")return xr.createTextNode(e);var c=a(e.tag);Object.keys(e.attributes||[]).forEach(function(d){c.setAttribute(d,e.attributes[d])});var p=e.children||[];return p.forEach(function(d){c.appendChild(NC(d,{ceFn:a}))}),c}function Mz(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var km={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(NC(c),i)}),i.getAttribute(Yu)===null&&rn.keepOriginalSource){var a=xr.createComment(Mz(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function(t){var i=t[0],a=t[1];if(~G1(i).indexOf(rn.replacementClass))return km.replace(t);var c=new RegExp("".concat(rn.cssPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var p=a[0].attributes.class.split(" ").reduce(function(u,b){return b===rn.replacementClass||b.match(c)?u.toSvg.push(b):u.toNode.push(b),u},{toNode:[],toSvg:[]});a[0].attributes.class=p.toSvg.join(" "),p.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",p.toNode.join(" "))}var d=a.map(function(u){return Kf(u)}).join(`
`);i.setAttribute(Yu,""),i.innerHTML=d}};function F2(e){e()}function UC(e,t){var i=typeof t=="function"?t:Pm;if(e.length===0)i();else{var a=F2;rn.mutateApproach===L4&&(a=su.requestAnimationFrame||F2),a(function(){var c=Az(),p=K1.begin("mutate");e.map(c),p(),i()})}}var Y1=!1;function $C(){Y1=!0}function a_(){Y1=!1}var hg=null;function j2(e){if(C2&&rn.observeMutations){var t=e.treeCallback,i=t===void 0?Pm:t,a=e.nodeCallback,c=a===void 0?Pm:a,p=e.pseudoElementsCallback,d=p===void 0?Pm:p,u=e.observeMutationsRoot,b=u===void 0?xr:u;hg=new C2(function(C){if(!Y1){var A=au();Dh(C).forEach(function(w){if(w.type==="childList"&&w.addedNodes.length>0&&!L2(w.addedNodes[0])&&(rn.searchPseudoElements&&d(w.target),i(w.target)),w.type==="attributes"&&w.target.parentNode&&rn.searchPseudoElements&&d(w.target.parentNode),w.type==="attributes"&&L2(w.target)&&~$4.indexOf(w.attributeName))if(w.attributeName==="class"&&Cz(w.target)){var T=ry(G1(w.target)),L=T.prefix,U=T.iconName;w.target.setAttribute(U1,L||A),U&&w.target.setAttribute($1,U)}else Iz(w.target)&&c(w.target)})}}),sl&&hg.observe(b,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function zz(){hg&&hg.disconnect()}function Rz(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,c){var p=c.split(":"),d=p[0],u=p.slice(1);return d&&u.length>0&&(a[d]=u.join(":").trim()),a},{})),i}function Oz(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",c=ry(G1(e));return c.prefix||(c.prefix=au()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||(c.prefix&&a.length>0&&(c.iconName=hz(c.prefix,e.innerText)||Z1(c.prefix,e_(e.innerText))),!c.iconName&&rn.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(c.iconName=e.firstChild.data)),c}function Lz(e){var t=Dh(e.attributes).reduce(function(c,p){return c.name!=="class"&&c.name!=="style"&&(c[p.name]=p.value),c},{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return rn.autoA11y&&(i?t["aria-labelledby"]="".concat(rn.replacementClass,"-title-").concat(a||Lf()):(t["aria-hidden"]="true",t.focusable="false")),t}function Fz(){return{iconName:null,title:null,titleId:null,prefix:null,transform:sa,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function D2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=Oz(e),a=i.iconName,c=i.prefix,p=i.rest,d=Lz(e),u=n_("parseNodeAttributes",{},e),b=t.styleParser?Rz(e):[];return Yt({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:sa,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:p,styles:b,attributes:d}},u)}var jz=Is.styles;function VC(e){var t=rn.autoReplaceSvg==="nest"?D2(e,{styleParser:!1}):D2(e);return~t.extra.classes.indexOf(TC)?rl("generateLayersText",e,t):rl("generateSvgReplacementMutation",e,t)}var lu=new Set;V1.map(function(e){lu.add("fa-".concat(e))});Object.keys(Mf[vr]).map(lu.add.bind(lu));Object.keys(Mf[jr]).map(lu.add.bind(lu));lu=Xf(lu);function B2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!sl)return Promise.resolve();var i=xr.documentElement.classList,a=function(w){return i.add("".concat(I2,"-").concat(w))},c=function(w){return i.remove("".concat(I2,"-").concat(w))},p=rn.autoFetchSvg?lu:V1.map(function(A){return"fa-".concat(A)}).concat(Object.keys(jz));p.includes("fa")||p.push("fa");var d=[".".concat(TC,":not([").concat(Yu,"])")].concat(p.map(function(A){return".".concat(A,":not([").concat(Yu,"])")})).join(", ");if(d.length===0)return Promise.resolve();var u=[];try{u=Dh(e.querySelectorAll(d))}catch{}if(u.length>0)a("pending"),c("complete");else return Promise.resolve();var b=K1.begin("onTree"),C=u.reduce(function(A,w){try{var T=VC(w);T&&A.push(T)}catch(L){EC||L.name==="MissingIcon"&&console.error(L)}return A},[]);return new Promise(function(A,w){Promise.all(C).then(function(T){UC(T,function(){a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),b(),A()})}).catch(function(T){b(),w(T)})})}function Dz(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;VC(e).then(function(i){i&&UC([i],t)})}function Bz(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:r_(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:r_(c||{})),e(a,Yt(Yt({},i),{},{mask:c}))}}var Nz=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,c=a===void 0?sa:a,p=i.symbol,d=p===void 0?!1:p,u=i.mask,b=u===void 0?null:u,C=i.maskId,A=C===void 0?null:C,w=i.title,T=w===void 0?null:w,L=i.titleId,U=L===void 0?null:L,F=i.classes,ce=F===void 0?[]:F,K=i.attributes,W=K===void 0?{}:K,$=i.styles,ie=$===void 0?{}:$;if(t){var X=t.prefix,V=t.iconName,E=t.icon;return iy(Yt({type:"icon"},t),function(){return Ju("beforeDOMElementCreation",{iconDefinition:t,params:i}),rn.autoA11y&&(T?W["aria-labelledby"]="".concat(rn.replacementClass,"-title-").concat(U||Lf()):(W["aria-hidden"]="true",W.focusable="false")),q1({icons:{main:i_(E),mask:b?i_(b.icon):{found:!1,width:null,height:null,icon:{}}},prefix:X,iconName:V,transform:Yt(Yt({},sa),c),symbol:d,title:T,maskId:A,titleId:U,extra:{attributes:W,styles:ie,classes:ce}})})}},Uz={mixout:function(){return{icon:Bz(Nz)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=B2,i.nodeCallback=Dz,i}}},provides:function(t){t.i2svg=function(i){var a=i.node,c=a===void 0?xr:a,p=i.callback,d=p===void 0?function(){}:p;return B2(c,d)},t.generateSvgReplacementMutation=function(i,a){var c=a.iconName,p=a.title,d=a.titleId,u=a.prefix,b=a.transform,C=a.symbol,A=a.mask,w=a.maskId,T=a.extra;return new Promise(function(L,U){Promise.all([o_(c,u),A.iconName?o_(A.iconName,A.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(F){var ce=B1(F,2),K=ce[0],W=ce[1];L([i,q1({icons:{main:K,mask:W},prefix:u,iconName:c,transform:b,symbol:C,maskId:w,title:p,titleId:d,extra:T,watchable:!0})])}).catch(U)})},t.generateAbstractIcon=function(i){var a=i.children,c=i.attributes,p=i.main,d=i.transform,u=i.styles,b=ty(u);b.length>0&&(c.style=b);var C;return H1(d)&&(C=rl("generateAbstractTransformGrouping",{main:p,transform:d,containerWidth:p.width,iconWidth:p.width})),a.push(C||p.icon),{children:a,attributes:c}}}},$z={mixout:function(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.classes,p=c===void 0?[]:c;return iy({type:"layer"},function(){Ju("beforeDOMElementCreation",{assembler:i,params:a});var d=[];return i(function(u){Array.isArray(u)?u.map(function(b){d=d.concat(b.abstract)}):d=d.concat(u.abstract)}),[{tag:"span",attributes:{class:["".concat(rn.cssPrefix,"-layers")].concat(Xf(p)).join(" ")},children:d}]})}}}},Vz={mixout:function(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.title,p=c===void 0?null:c,d=a.classes,u=d===void 0?[]:d,b=a.attributes,C=b===void 0?{}:b,A=a.styles,w=A===void 0?{}:A;return iy({type:"counter",content:i},function(){return Ju("beforeDOMElementCreation",{content:i,params:a}),bz({content:i.toString(),title:p,extra:{attributes:C,styles:w,classes:["".concat(rn.cssPrefix,"-layers-counter")].concat(Xf(u))}})})}}}},Gz={mixout:function(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.transform,p=c===void 0?sa:c,d=a.title,u=d===void 0?null:d,b=a.classes,C=b===void 0?[]:b,A=a.attributes,w=A===void 0?{}:A,T=a.styles,L=T===void 0?{}:T;return iy({type:"text",content:i},function(){return Ju("beforeDOMElementCreation",{content:i,params:a}),R2({content:i,transform:Yt(Yt({},sa),p),title:u,extra:{attributes:w,styles:L,classes:["".concat(rn.cssPrefix,"-layers-text")].concat(Xf(C))}})})}}},provides:function(t){t.generateLayersText=function(i,a){var c=a.title,p=a.transform,d=a.extra,u=null,b=null;if(wC){var C=parseInt(getComputedStyle(i).fontSize,10),A=i.getBoundingClientRect();u=A.width/C,b=A.height/C}return rn.autoA11y&&!c&&(d.attributes["aria-hidden"]="true"),Promise.resolve([i,R2({content:i.innerHTML,width:u,height:b,transform:p,title:c,extra:d,watchable:!0})])}}},Hz=new RegExp('"',"ug"),N2=[1105920,1112319];function Wz(e){var t=e.replace(Hz,""),i=oz(t,0),a=i>=N2[0]&&i<=N2[1],c=t.length===2?t[0]===t[1]:!1;return{value:e_(c?t[0]:t),isSecondary:a||c}}function U2(e,t){var i="".concat(O4).concat(t.replace(":","-"));return new Promise(function(a,c){if(e.getAttribute(i)!==null)return a();var p=Dh(e.children),d=p.filter(function(E){return E.getAttribute(Qv)===t})[0],u=su.getComputedStyle(e,t),b=u.getPropertyValue("font-family").match(B4),C=u.getPropertyValue("font-weight"),A=u.getPropertyValue("content");if(d&&!b)return e.removeChild(d),a();if(b&&A!=="none"&&A!==""){var w=u.getPropertyValue("content"),T=~["Sharp"].indexOf(b[2])?jr:vr,L=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(b[2])?zf[T][b[2].toLowerCase()]:N4[T][C],U=Wz(w),F=U.value,ce=U.isSecondary,K=b[0].startsWith("FontAwesome"),W=Z1(L,F),$=W;if(K){var ie=dz(F);ie.iconName&&ie.prefix&&(W=ie.iconName,L=ie.prefix)}if(W&&!ce&&(!d||d.getAttribute(U1)!==L||d.getAttribute($1)!==$)){e.setAttribute(i,$),d&&e.removeChild(d);var X=Fz(),V=X.extra;V.attributes[Qv]=t,o_(W,L).then(function(E){var j=q1(Yt(Yt({},X),{},{icons:{main:E,mask:X1()},prefix:L,iconName:$,extra:V,watchable:!0})),B=xr.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(B,e.firstChild):e.appendChild(B),B.outerHTML=j.map(function(ee){return Kf(ee)}).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function Zz(e){return Promise.all([U2(e,"::before"),U2(e,"::after")])}function Xz(e){return e.parentNode!==document.head&&!~F4.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Qv)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function $2(e){if(sl)return new Promise(function(t,i){var a=Dh(e.querySelectorAll("*")).filter(Xz).map(Zz),c=K1.begin("searchPseudoElements");$C(),Promise.all(a).then(function(){c(),a_(),t()}).catch(function(){c(),a_(),i()})})}var qz={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=$2,i}}},provides:function(t){t.pseudoElements2svg=function(i){var a=i.node,c=a===void 0?xr:a;rn.searchPseudoElements&&$2(c)}}},V2=!1,Kz={mixout:function(){return{dom:{unwatch:function(){$C(),V2=!0}}}},hooks:function(){return{bootstrap:function(){j2(n_("mutationObserverCallbacks",{}))},noAuto:function(){zz()},watch:function(i){var a=i.observeMutationsRoot;V2?a_():j2(n_("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},G2=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,c){var p=c.toLowerCase().split("-"),d=p[0],u=p.slice(1).join("-");if(d&&u==="h")return a.flipX=!0,a;if(d&&u==="v")return a.flipY=!0,a;if(u=parseFloat(u),isNaN(u))return a;switch(d){case"grow":a.size=a.size+u;break;case"shrink":a.size=a.size-u;break;case"left":a.x=a.x-u;break;case"right":a.x=a.x+u;break;case"up":a.y=a.y-u;break;case"down":a.y=a.y+u;break;case"rotate":a.rotate=a.rotate+u;break}return a},i)},Yz={mixout:function(){return{parse:{transform:function(i){return G2(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-transform");return c&&(i.transform=G2(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,c=i.transform,p=i.containerWidth,d=i.iconWidth,u={transform:"translate(".concat(p/2," 256)")},b="translate(".concat(c.x*32,", ").concat(c.y*32,") "),C="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),A="rotate(".concat(c.rotate," 0 0)"),w={transform:"".concat(b," ").concat(C," ").concat(A)},T={transform:"translate(".concat(d/2*-1," -256)")},L={outer:u,inner:w,path:T};return{tag:"g",attributes:Yt({},L.outer),children:[{tag:"g",attributes:Yt({},L.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:Yt(Yt({},a.icon.attributes),L.path)}]}]}}}},k0={x:0,y:0,width:"100%",height:"100%"};function H2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function Jz(e){return e.tag==="g"?e.children:[e]}var Qz={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-mask"),p=c?ry(c.split(" ").map(function(d){return d.trim()})):X1();return p.prefix||(p.prefix=au()),i.mask=p,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var a=i.children,c=i.attributes,p=i.main,d=i.mask,u=i.maskId,b=i.transform,C=p.width,A=p.icon,w=d.width,T=d.icon,L=Y4({transform:b,containerWidth:w,iconWidth:C}),U={tag:"rect",attributes:Yt(Yt({},k0),{},{fill:"white"})},F=A.children?{children:A.children.map(H2)}:{},ce={tag:"g",attributes:Yt({},L.inner),children:[H2(Yt({tag:A.tag,attributes:Yt(Yt({},A.attributes),L.path)},F))]},K={tag:"g",attributes:Yt({},L.outer),children:[ce]},W="mask-".concat(u||Lf()),$="clip-".concat(u||Lf()),ie={tag:"mask",attributes:Yt(Yt({},k0),{},{id:W,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[U,K]},X={tag:"defs",children:[{tag:"clipPath",attributes:{id:$},children:Jz(T)},ie]};return a.push(X,{tag:"rect",attributes:Yt({fill:"currentColor","clip-path":"url(#".concat($,")"),mask:"url(#".concat(W,")")},k0)}),{children:a,attributes:c}}}},eR={provides:function(t){var i=!1;su.matchMedia&&(i=su.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],c={fill:"currentColor"},p={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:Yt(Yt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var d=Yt(Yt({},p),{},{attributeName:"opacity"}),u={tag:"circle",attributes:Yt(Yt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||u.children.push({tag:"animate",attributes:Yt(Yt({},p),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Yt(Yt({},d),{},{values:"1;0;1;1;0;1;"})}),a.push(u),a.push({tag:"path",attributes:Yt(Yt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:Yt(Yt({},d),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:Yt(Yt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Yt(Yt({},d),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},tR={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-symbol"),p=c===null?!1:c===""?!0:c;return i.symbol=p,i}}}},nR=[ez,Uz,$z,Vz,Gz,qz,Kz,Yz,Qz,eR,tR];mz(nR,{mixoutsTo:Vo});Vo.noAuto;Vo.config;Vo.library;Vo.dom;var l_=Vo.parse;Vo.findIconDefinition;Vo.toHtml;var rR=Vo.icon;Vo.layer;Vo.text;Vo.counter;var GC={exports:{}},iR="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",oR=iR,sR=oR;function HC(){}function WC(){}WC.resetWarningCache=HC;var aR=function(){function e(a,c,p,d,u,b){if(b!==sR){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:WC,resetWarningCache:HC};return i.PropTypes=i,i};GC.exports=aR();var lR=GC.exports;const Dn=Uf(lR);function W2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function ql(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?W2(Object(i),!0).forEach(function(a){uh(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):W2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function dg(e){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dg(e)}function uh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function uR(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,p;for(p=0;p<a.length;p++)c=a[p],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function cR(e,t){if(e==null)return{};var i=uR(e,t),a,c;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(c=0;c<p.length;c++)a=p[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function u_(e){return hR(e)||dR(e)||fR(e)||pR()}function hR(e){if(Array.isArray(e))return c_(e)}function dR(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fR(e,t){if(e){if(typeof e=="string")return c_(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c_(e,t)}}function c_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function pR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mR(e){var t,i=e.beat,a=e.fade,c=e.beatFade,p=e.bounce,d=e.shake,u=e.flash,b=e.spin,C=e.spinPulse,A=e.spinReverse,w=e.pulse,T=e.fixedWidth,L=e.inverse,U=e.border,F=e.listItem,ce=e.flip,K=e.size,W=e.rotation,$=e.pull,ie=(t={"fa-beat":i,"fa-fade":a,"fa-beat-fade":c,"fa-bounce":p,"fa-shake":d,"fa-flash":u,"fa-spin":b,"fa-spin-reverse":A,"fa-spin-pulse":C,"fa-pulse":w,"fa-fw":T,"fa-inverse":L,"fa-border":U,"fa-li":F,"fa-flip":ce===!0,"fa-flip-horizontal":ce==="horizontal"||ce==="both","fa-flip-vertical":ce==="vertical"||ce==="both"},uh(t,"fa-".concat(K),typeof K<"u"&&K!==null),uh(t,"fa-rotate-".concat(W),typeof W<"u"&&W!==null&&W!==0),uh(t,"fa-pull-".concat($),typeof $<"u"&&$!==null),uh(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(ie).map(function(X){return ie[X]?X:null}).filter(function(X){return X})}function gR(e){return e=e-0,e===e}function ZC(e){return gR(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var yR=["style"];function vR(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _R(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=ZC(i.slice(0,a)),p=i.slice(a+1).trim();return c.startsWith("webkit")?t[vR(c)]=p:t[c]=p,t},{})}function XC(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(b){return XC(e,b)}),c=Object.keys(t.attributes||{}).reduce(function(b,C){var A=t.attributes[C];switch(C){case"class":b.attrs.className=A,delete t.attributes.class;break;case"style":b.attrs.style=_R(A);break;default:C.indexOf("aria-")===0||C.indexOf("data-")===0?b.attrs[C.toLowerCase()]=A:b.attrs[ZC(C)]=A}return b},{attrs:{}}),p=i.style,d=p===void 0?{}:p,u=cR(i,yR);return c.attrs.style=ql(ql({},c.attrs.style),d),e.apply(void 0,[t.tag,ql(ql({},c.attrs),u)].concat(u_(a)))}var qC=!1;try{qC=!0}catch{}function xR(){if(!qC&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function Z2(e){if(e&&dg(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(l_.icon)return l_.icon(e);if(e===null)return null;if(e&&dg(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function M0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?uh({},e,t):{}}var ua=Z_.forwardRef(function(e,t){var i=e.icon,a=e.mask,c=e.symbol,p=e.className,d=e.title,u=e.titleId,b=e.maskId,C=Z2(i),A=M0("classes",[].concat(u_(mR(e)),u_(p.split(" ")))),w=M0("transform",typeof e.transform=="string"?l_.transform(e.transform):e.transform),T=M0("mask",Z2(a)),L=rR(C,ql(ql(ql(ql({},A),w),T),{},{symbol:c,title:d,titleId:u,maskId:b}));if(!L)return xR("Could not find icon",C),null;var U=L.abstract,F={ref:t};return Object.keys(e).forEach(function(ce){ua.defaultProps.hasOwnProperty(ce)||(F[ce]=e[ce])}),wR(U[0],F)});ua.displayName="FontAwesomeIcon";ua.propTypes={beat:Dn.bool,border:Dn.bool,beatFade:Dn.bool,bounce:Dn.bool,className:Dn.string,fade:Dn.bool,flash:Dn.bool,mask:Dn.oneOfType([Dn.object,Dn.array,Dn.string]),maskId:Dn.string,fixedWidth:Dn.bool,inverse:Dn.bool,flip:Dn.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Dn.oneOfType([Dn.object,Dn.array,Dn.string]),listItem:Dn.bool,pull:Dn.oneOf(["right","left"]),pulse:Dn.bool,rotation:Dn.oneOf([0,90,180,270]),shake:Dn.bool,size:Dn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Dn.bool,spinPulse:Dn.bool,spinReverse:Dn.bool,symbol:Dn.oneOfType([Dn.bool,Dn.string]),title:Dn.string,titleId:Dn.string,transform:Dn.oneOfType([Dn.string,Dn.object]),swapOpacity:Dn.bool};ua.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var wR=XC.bind(null,Z_.createElement),bR={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},h_={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},SR={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"]},ER=SR;function sm(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var KC={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,p){function d(C,A){if(!c[C]){if(!a[C]){var w=typeof sm=="function"&&sm;if(!A&&w)return w(C,!0);if(u)return u(C,!0);var T=new Error("Cannot find module '"+C+"'");throw T.code="MODULE_NOT_FOUND",T}var L=c[C]={exports:{}};a[C][0].call(L.exports,function(U){var F=a[C][1][U];return d(F||U)},L,L.exports,i,a,c,p)}return c[C].exports}for(var u=typeof sm=="function"&&sm,b=0;b<p.length;b++)d(p[b]);return d}return i}()({1:[function(i,a,c){c.byteLength=T,c.toByteArray=U,c.fromByteArray=K;for(var p=[],d=[],u=typeof Uint8Array<"u"?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,A=b.length;C<A;++C)p[C]=b[C],d[b.charCodeAt(C)]=C;d[45]=62,d[95]=63;function w(W){var $=W.length;if($%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ie=W.indexOf("=");ie===-1&&(ie=$);var X=ie===$?0:4-ie%4;return[ie,X]}function T(W){var $=w(W),ie=$[0],X=$[1];return(ie+X)*3/4-X}function L(W,$,ie){return($+ie)*3/4-ie}function U(W){var $,ie=w(W),X=ie[0],V=ie[1],E=new u(L(W,X,V)),j=0,B=V>0?X-4:X,ee;for(ee=0;ee<B;ee+=4)$=d[W.charCodeAt(ee)]<<18|d[W.charCodeAt(ee+1)]<<12|d[W.charCodeAt(ee+2)]<<6|d[W.charCodeAt(ee+3)],E[j++]=$>>16&255,E[j++]=$>>8&255,E[j++]=$&255;return V===2&&($=d[W.charCodeAt(ee)]<<2|d[W.charCodeAt(ee+1)]>>4,E[j++]=$&255),V===1&&($=d[W.charCodeAt(ee)]<<10|d[W.charCodeAt(ee+1)]<<4|d[W.charCodeAt(ee+2)]>>2,E[j++]=$>>8&255,E[j++]=$&255),E}function F(W){return p[W>>18&63]+p[W>>12&63]+p[W>>6&63]+p[W&63]}function ce(W,$,ie){for(var X,V=[],E=$;E<ie;E+=3)X=(W[E]<<16&16711680)+(W[E+1]<<8&65280)+(W[E+2]&255),V.push(F(X));return V.join("")}function K(W){for(var $,ie=W.length,X=ie%3,V=[],E=16383,j=0,B=ie-X;j<B;j+=E)V.push(ce(W,j,j+E>B?B:j+E));return X===1?($=W[ie-1],V.push(p[$>>2]+p[$<<4&63]+"==")):X===2&&($=(W[ie-2]<<8)+W[ie-1],V.push(p[$>>10]+p[$>>4&63]+p[$<<2&63]+"=")),V.join("")}},{}],2:[function(i,a,c){(function(p){(function(){var d=i("base64-js"),u=i("ieee754");c.Buffer=w,c.SlowBuffer=X,c.INSPECT_MAX_BYTES=50;var b=2147483647;c.kMaxLength=b,w.TYPED_ARRAY_SUPPORT=C(),!w.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function C(){try{var we=new Uint8Array(1);return we.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},we.foo()===42}catch{return!1}}Object.defineProperty(w.prototype,"parent",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.buffer}}),Object.defineProperty(w.prototype,"offset",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.byteOffset}});function A(we){if(we>b)throw new RangeError('The value "'+we+'" is invalid for option "size"');var N=new Uint8Array(we);return N.__proto__=w.prototype,N}function w(we,N,D){if(typeof we=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return F(we)}return T(we,N,D)}typeof Symbol<"u"&&Symbol.species!=null&&w[Symbol.species]===w&&Object.defineProperty(w,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),w.poolSize=8192;function T(we,N,D){if(typeof we=="string")return ce(we,N);if(ArrayBuffer.isView(we))return K(we);if(we==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof we);if(sn(we,ArrayBuffer)||we&&sn(we.buffer,ArrayBuffer))return W(we,N,D);if(typeof we=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var xe=we.valueOf&&we.valueOf();if(xe!=null&&xe!==we)return w.from(xe,N,D);var Ze=$(we);if(Ze)return Ze;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof we[Symbol.toPrimitive]=="function")return w.from(we[Symbol.toPrimitive]("string"),N,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof we)}w.from=function(we,N,D){return T(we,N,D)},w.prototype.__proto__=Uint8Array.prototype,w.__proto__=Uint8Array;function L(we){if(typeof we!="number")throw new TypeError('"size" argument must be of type number');if(we<0)throw new RangeError('The value "'+we+'" is invalid for option "size"')}function U(we,N,D){return L(we),we<=0?A(we):N!==void 0?typeof D=="string"?A(we).fill(N,D):A(we).fill(N):A(we)}w.alloc=function(we,N,D){return U(we,N,D)};function F(we){return L(we),A(we<0?0:ie(we)|0)}w.allocUnsafe=function(we){return F(we)},w.allocUnsafeSlow=function(we){return F(we)};function ce(we,N){if((typeof N!="string"||N==="")&&(N="utf8"),!w.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var D=V(we,N)|0,xe=A(D),Ze=xe.write(we,N);return Ze!==D&&(xe=xe.slice(0,Ze)),xe}function K(we){for(var N=we.length<0?0:ie(we.length)|0,D=A(N),xe=0;xe<N;xe+=1)D[xe]=we[xe]&255;return D}function W(we,N,D){if(N<0||we.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(we.byteLength<N+(D||0))throw new RangeError('"length" is outside of buffer bounds');var xe;return N===void 0&&D===void 0?xe=new Uint8Array(we):D===void 0?xe=new Uint8Array(we,N):xe=new Uint8Array(we,N,D),xe.__proto__=w.prototype,xe}function $(we){if(w.isBuffer(we)){var N=ie(we.length)|0,D=A(N);return D.length===0||we.copy(D,0,0,N),D}if(we.length!==void 0)return typeof we.length!="number"||Sn(we.length)?A(0):K(we);if(we.type==="Buffer"&&Array.isArray(we.data))return K(we.data)}function ie(we){if(we>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return we|0}function X(we){return+we!=we&&(we=0),w.alloc(+we)}w.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==w.prototype},w.compare=function(N,D){if(sn(N,Uint8Array)&&(N=w.from(N,N.offset,N.byteLength)),sn(D,Uint8Array)&&(D=w.from(D,D.offset,D.byteLength)),!w.isBuffer(N)||!w.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===D)return 0;for(var xe=N.length,Ze=D.length,Qe=0,ct=Math.min(xe,Ze);Qe<ct;++Qe)if(N[Qe]!==D[Qe]){xe=N[Qe],Ze=D[Qe];break}return xe<Ze?-1:Ze<xe?1:0},w.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},w.concat=function(N,D){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return w.alloc(0);var xe;if(D===void 0)for(D=0,xe=0;xe<N.length;++xe)D+=N[xe].length;var Ze=w.allocUnsafe(D),Qe=0;for(xe=0;xe<N.length;++xe){var ct=N[xe];if(sn(ct,Uint8Array)&&(ct=w.from(ct)),!w.isBuffer(ct))throw new TypeError('"list" argument must be an Array of Buffers');ct.copy(Ze,Qe),Qe+=ct.length}return Ze};function V(we,N){if(w.isBuffer(we))return we.length;if(ArrayBuffer.isView(we)||sn(we,ArrayBuffer))return we.byteLength;if(typeof we!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof we);var D=we.length,xe=arguments.length>2&&arguments[2]===!0;if(!xe&&D===0)return 0;for(var Ze=!1;;)switch(N){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return $t(we).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return En(we).length;default:if(Ze)return xe?-1:$t(we).length;N=(""+N).toLowerCase(),Ze=!0}}w.byteLength=V;function E(we,N,D){var xe=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,N>>>=0,D<=N))return"";for(we||(we="utf8");;)switch(we){case"hex":return Pe(this,N,D);case"utf8":case"utf-8":return te(this,N,D);case"ascii":return Ee(this,N,D);case"latin1":case"binary":return Be(this,N,D);case"base64":return J(this,N,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,N,D);default:if(xe)throw new TypeError("Unknown encoding: "+we);we=(we+"").toLowerCase(),xe=!0}}w.prototype._isBuffer=!0;function j(we,N,D){var xe=we[N];we[N]=we[D],we[D]=xe}w.prototype.swap16=function(){var N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<N;D+=2)j(this,D,D+1);return this},w.prototype.swap32=function(){var N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<N;D+=4)j(this,D,D+3),j(this,D+1,D+2);return this},w.prototype.swap64=function(){var N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<N;D+=8)j(this,D,D+7),j(this,D+1,D+6),j(this,D+2,D+5),j(this,D+3,D+4);return this},w.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?te(this,0,N):E.apply(this,arguments)},w.prototype.toLocaleString=w.prototype.toString,w.prototype.equals=function(N){if(!w.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:w.compare(this,N)===0},w.prototype.inspect=function(){var N="",D=c.INSPECT_MAX_BYTES;return N=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(N+=" ... "),"<Buffer "+N+">"},w.prototype.compare=function(N,D,xe,Ze,Qe){if(sn(N,Uint8Array)&&(N=w.from(N,N.offset,N.byteLength)),!w.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(D===void 0&&(D=0),xe===void 0&&(xe=N?N.length:0),Ze===void 0&&(Ze=0),Qe===void 0&&(Qe=this.length),D<0||xe>N.length||Ze<0||Qe>this.length)throw new RangeError("out of range index");if(Ze>=Qe&&D>=xe)return 0;if(Ze>=Qe)return-1;if(D>=xe)return 1;if(D>>>=0,xe>>>=0,Ze>>>=0,Qe>>>=0,this===N)return 0;for(var ct=Qe-Ze,ae=xe-D,R=Math.min(ct,ae),z=this.slice(Ze,Qe),Se=N.slice(D,xe),Ve=0;Ve<R;++Ve)if(z[Ve]!==Se[Ve]){ct=z[Ve],ae=Se[Ve];break}return ct<ae?-1:ae<ct?1:0};function B(we,N,D,xe,Ze){if(we.length===0)return-1;if(typeof D=="string"?(xe=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,Sn(D)&&(D=Ze?0:we.length-1),D<0&&(D=we.length+D),D>=we.length){if(Ze)return-1;D=we.length-1}else if(D<0)if(Ze)D=0;else return-1;if(typeof N=="string"&&(N=w.from(N,xe)),w.isBuffer(N))return N.length===0?-1:ee(we,N,D,xe,Ze);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?Ze?Uint8Array.prototype.indexOf.call(we,N,D):Uint8Array.prototype.lastIndexOf.call(we,N,D):ee(we,[N],D,xe,Ze);throw new TypeError("val must be string, number or Buffer")}function ee(we,N,D,xe,Ze){var Qe=1,ct=we.length,ae=N.length;if(xe!==void 0&&(xe=String(xe).toLowerCase(),xe==="ucs2"||xe==="ucs-2"||xe==="utf16le"||xe==="utf-16le")){if(we.length<2||N.length<2)return-1;Qe=2,ct/=2,ae/=2,D/=2}function R(at,st){return Qe===1?at[st]:at.readUInt16BE(st*Qe)}var z;if(Ze){var Se=-1;for(z=D;z<ct;z++)if(R(we,z)===R(N,Se===-1?0:z-Se)){if(Se===-1&&(Se=z),z-Se+1===ae)return Se*Qe}else Se!==-1&&(z-=z-Se),Se=-1}else for(D+ae>ct&&(D=ct-ae),z=D;z>=0;z--){for(var Ve=!0,tt=0;tt<ae;tt++)if(R(we,z+tt)!==R(N,tt)){Ve=!1;break}if(Ve)return z}return-1}w.prototype.includes=function(N,D,xe){return this.indexOf(N,D,xe)!==-1},w.prototype.indexOf=function(N,D,xe){return B(this,N,D,xe,!0)},w.prototype.lastIndexOf=function(N,D,xe){return B(this,N,D,xe,!1)};function q(we,N,D,xe){D=Number(D)||0;var Ze=we.length-D;xe?(xe=Number(xe),xe>Ze&&(xe=Ze)):xe=Ze;var Qe=N.length;xe>Qe/2&&(xe=Qe/2);for(var ct=0;ct<xe;++ct){var ae=parseInt(N.substr(ct*2,2),16);if(Sn(ae))return ct;we[D+ct]=ae}return ct}function pe(we,N,D,xe){return et($t(N,we.length-D),we,D,xe)}function _e(we,N,D,xe){return et(Vt(N),we,D,xe)}function de(we,N,D,xe){return _e(we,N,D,xe)}function oe(we,N,D,xe){return et(En(N),we,D,xe)}function le(we,N,D,xe){return et(Zt(N,we.length-D),we,D,xe)}w.prototype.write=function(N,D,xe,Ze){if(D===void 0)Ze="utf8",xe=this.length,D=0;else if(xe===void 0&&typeof D=="string")Ze=D,xe=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(xe)?(xe=xe>>>0,Ze===void 0&&(Ze="utf8")):(Ze=xe,xe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Qe=this.length-D;if((xe===void 0||xe>Qe)&&(xe=Qe),N.length>0&&(xe<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ze||(Ze="utf8");for(var ct=!1;;)switch(Ze){case"hex":return q(this,N,D,xe);case"utf8":case"utf-8":return pe(this,N,D,xe);case"ascii":return _e(this,N,D,xe);case"latin1":case"binary":return de(this,N,D,xe);case"base64":return oe(this,N,D,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,N,D,xe);default:if(ct)throw new TypeError("Unknown encoding: "+Ze);Ze=(""+Ze).toLowerCase(),ct=!0}},w.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function J(we,N,D){return N===0&&D===we.length?d.fromByteArray(we):d.fromByteArray(we.slice(N,D))}function te(we,N,D){D=Math.min(we.length,D);for(var xe=[],Ze=N;Ze<D;){var Qe=we[Ze],ct=null,ae=Qe>239?4:Qe>223?3:Qe>191?2:1;if(Ze+ae<=D){var R,z,Se,Ve;switch(ae){case 1:Qe<128&&(ct=Qe);break;case 2:R=we[Ze+1],(R&192)===128&&(Ve=(Qe&31)<<6|R&63,Ve>127&&(ct=Ve));break;case 3:R=we[Ze+1],z=we[Ze+2],(R&192)===128&&(z&192)===128&&(Ve=(Qe&15)<<12|(R&63)<<6|z&63,Ve>2047&&(Ve<55296||Ve>57343)&&(ct=Ve));break;case 4:R=we[Ze+1],z=we[Ze+2],Se=we[Ze+3],(R&192)===128&&(z&192)===128&&(Se&192)===128&&(Ve=(Qe&15)<<18|(R&63)<<12|(z&63)<<6|Se&63,Ve>65535&&Ve<1114112&&(ct=Ve))}}ct===null?(ct=65533,ae=1):ct>65535&&(ct-=65536,xe.push(ct>>>10&1023|55296),ct=56320|ct&1023),xe.push(ct),Ze+=ae}return be(xe)}var he=4096;function be(we){var N=we.length;if(N<=he)return String.fromCharCode.apply(String,we);for(var D="",xe=0;xe<N;)D+=String.fromCharCode.apply(String,we.slice(xe,xe+=he));return D}function Ee(we,N,D){var xe="";D=Math.min(we.length,D);for(var Ze=N;Ze<D;++Ze)xe+=String.fromCharCode(we[Ze]&127);return xe}function Be(we,N,D){var xe="";D=Math.min(we.length,D);for(var Ze=N;Ze<D;++Ze)xe+=String.fromCharCode(we[Ze]);return xe}function Pe(we,N,D){var xe=we.length;(!N||N<0)&&(N=0),(!D||D<0||D>xe)&&(D=xe);for(var Ze="",Qe=N;Qe<D;++Qe)Ze+=Tt(we[Qe]);return Ze}function ze(we,N,D){for(var xe=we.slice(N,D),Ze="",Qe=0;Qe<xe.length;Qe+=2)Ze+=String.fromCharCode(xe[Qe]+xe[Qe+1]*256);return Ze}w.prototype.slice=function(N,D){var xe=this.length;N=~~N,D=D===void 0?xe:~~D,N<0?(N+=xe,N<0&&(N=0)):N>xe&&(N=xe),D<0?(D+=xe,D<0&&(D=0)):D>xe&&(D=xe),D<N&&(D=N);var Ze=this.subarray(N,D);return Ze.__proto__=w.prototype,Ze};function We(we,N,D){if(we%1!==0||we<0)throw new RangeError("offset is not uint");if(we+N>D)throw new RangeError("Trying to access beyond buffer length")}w.prototype.readUIntLE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||We(N,D,this.length);for(var Ze=this[N],Qe=1,ct=0;++ct<D&&(Qe*=256);)Ze+=this[N+ct]*Qe;return Ze},w.prototype.readUIntBE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||We(N,D,this.length);for(var Ze=this[N+--D],Qe=1;D>0&&(Qe*=256);)Ze+=this[N+--D]*Qe;return Ze},w.prototype.readUInt8=function(N,D){return N=N>>>0,D||We(N,1,this.length),this[N]},w.prototype.readUInt16LE=function(N,D){return N=N>>>0,D||We(N,2,this.length),this[N]|this[N+1]<<8},w.prototype.readUInt16BE=function(N,D){return N=N>>>0,D||We(N,2,this.length),this[N]<<8|this[N+1]},w.prototype.readUInt32LE=function(N,D){return N=N>>>0,D||We(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},w.prototype.readUInt32BE=function(N,D){return N=N>>>0,D||We(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},w.prototype.readIntLE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||We(N,D,this.length);for(var Ze=this[N],Qe=1,ct=0;++ct<D&&(Qe*=256);)Ze+=this[N+ct]*Qe;return Qe*=128,Ze>=Qe&&(Ze-=Math.pow(2,8*D)),Ze},w.prototype.readIntBE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||We(N,D,this.length);for(var Ze=D,Qe=1,ct=this[N+--Ze];Ze>0&&(Qe*=256);)ct+=this[N+--Ze]*Qe;return Qe*=128,ct>=Qe&&(ct-=Math.pow(2,8*D)),ct},w.prototype.readInt8=function(N,D){return N=N>>>0,D||We(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},w.prototype.readInt16LE=function(N,D){N=N>>>0,D||We(N,2,this.length);var xe=this[N]|this[N+1]<<8;return xe&32768?xe|4294901760:xe},w.prototype.readInt16BE=function(N,D){N=N>>>0,D||We(N,2,this.length);var xe=this[N+1]|this[N]<<8;return xe&32768?xe|4294901760:xe},w.prototype.readInt32LE=function(N,D){return N=N>>>0,D||We(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},w.prototype.readInt32BE=function(N,D){return N=N>>>0,D||We(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},w.prototype.readFloatLE=function(N,D){return N=N>>>0,D||We(N,4,this.length),u.read(this,N,!0,23,4)},w.prototype.readFloatBE=function(N,D){return N=N>>>0,D||We(N,4,this.length),u.read(this,N,!1,23,4)},w.prototype.readDoubleLE=function(N,D){return N=N>>>0,D||We(N,8,this.length),u.read(this,N,!0,52,8)},w.prototype.readDoubleBE=function(N,D){return N=N>>>0,D||We(N,8,this.length),u.read(this,N,!1,52,8)};function He(we,N,D,xe,Ze,Qe){if(!w.isBuffer(we))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>Ze||N<Qe)throw new RangeError('"value" argument is out of bounds');if(D+xe>we.length)throw new RangeError("Index out of range")}w.prototype.writeUIntLE=function(N,D,xe,Ze){if(N=+N,D=D>>>0,xe=xe>>>0,!Ze){var Qe=Math.pow(2,8*xe)-1;He(this,N,D,xe,Qe,0)}var ct=1,ae=0;for(this[D]=N&255;++ae<xe&&(ct*=256);)this[D+ae]=N/ct&255;return D+xe},w.prototype.writeUIntBE=function(N,D,xe,Ze){if(N=+N,D=D>>>0,xe=xe>>>0,!Ze){var Qe=Math.pow(2,8*xe)-1;He(this,N,D,xe,Qe,0)}var ct=xe-1,ae=1;for(this[D+ct]=N&255;--ct>=0&&(ae*=256);)this[D+ct]=N/ae&255;return D+xe},w.prototype.writeUInt8=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,1,255,0),this[D]=N&255,D+1},w.prototype.writeUInt16LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,65535,0),this[D]=N&255,this[D+1]=N>>>8,D+2},w.prototype.writeUInt16BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,65535,0),this[D]=N>>>8,this[D+1]=N&255,D+2},w.prototype.writeUInt32LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,4294967295,0),this[D+3]=N>>>24,this[D+2]=N>>>16,this[D+1]=N>>>8,this[D]=N&255,D+4},w.prototype.writeUInt32BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,4294967295,0),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4},w.prototype.writeIntLE=function(N,D,xe,Ze){if(N=+N,D=D>>>0,!Ze){var Qe=Math.pow(2,8*xe-1);He(this,N,D,xe,Qe-1,-Qe)}var ct=0,ae=1,R=0;for(this[D]=N&255;++ct<xe&&(ae*=256);)N<0&&R===0&&this[D+ct-1]!==0&&(R=1),this[D+ct]=(N/ae>>0)-R&255;return D+xe},w.prototype.writeIntBE=function(N,D,xe,Ze){if(N=+N,D=D>>>0,!Ze){var Qe=Math.pow(2,8*xe-1);He(this,N,D,xe,Qe-1,-Qe)}var ct=xe-1,ae=1,R=0;for(this[D+ct]=N&255;--ct>=0&&(ae*=256);)N<0&&R===0&&this[D+ct+1]!==0&&(R=1),this[D+ct]=(N/ae>>0)-R&255;return D+xe},w.prototype.writeInt8=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,1,127,-128),N<0&&(N=255+N+1),this[D]=N&255,D+1},w.prototype.writeInt16LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,32767,-32768),this[D]=N&255,this[D+1]=N>>>8,D+2},w.prototype.writeInt16BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,32767,-32768),this[D]=N>>>8,this[D+1]=N&255,D+2},w.prototype.writeInt32LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,2147483647,-2147483648),this[D]=N&255,this[D+1]=N>>>8,this[D+2]=N>>>16,this[D+3]=N>>>24,D+4},w.prototype.writeInt32BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4};function nt(we,N,D,xe,Ze,Qe){if(D+xe>we.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function dt(we,N,D,xe,Ze){return N=+N,D=D>>>0,Ze||nt(we,N,D,4),u.write(we,N,D,xe,23,4),D+4}w.prototype.writeFloatLE=function(N,D,xe){return dt(this,N,D,!0,xe)},w.prototype.writeFloatBE=function(N,D,xe){return dt(this,N,D,!1,xe)};function wt(we,N,D,xe,Ze){return N=+N,D=D>>>0,Ze||nt(we,N,D,8),u.write(we,N,D,xe,52,8),D+8}w.prototype.writeDoubleLE=function(N,D,xe){return wt(this,N,D,!0,xe)},w.prototype.writeDoubleBE=function(N,D,xe){return wt(this,N,D,!1,xe)},w.prototype.copy=function(N,D,xe,Ze){if(!w.isBuffer(N))throw new TypeError("argument should be a Buffer");if(xe||(xe=0),!Ze&&Ze!==0&&(Ze=this.length),D>=N.length&&(D=N.length),D||(D=0),Ze>0&&Ze<xe&&(Ze=xe),Ze===xe||N.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(xe<0||xe>=this.length)throw new RangeError("Index out of range");if(Ze<0)throw new RangeError("sourceEnd out of bounds");Ze>this.length&&(Ze=this.length),N.length-D<Ze-xe&&(Ze=N.length-D+xe);var Qe=Ze-xe;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(D,xe,Ze);else if(this===N&&xe<D&&D<Ze)for(var ct=Qe-1;ct>=0;--ct)N[ct+D]=this[ct+xe];else Uint8Array.prototype.set.call(N,this.subarray(xe,Ze),D);return Qe},w.prototype.fill=function(N,D,xe,Ze){if(typeof N=="string"){if(typeof D=="string"?(Ze=D,D=0,xe=this.length):typeof xe=="string"&&(Ze=xe,xe=this.length),Ze!==void 0&&typeof Ze!="string")throw new TypeError("encoding must be a string");if(typeof Ze=="string"&&!w.isEncoding(Ze))throw new TypeError("Unknown encoding: "+Ze);if(N.length===1){var Qe=N.charCodeAt(0);(Ze==="utf8"&&Qe<128||Ze==="latin1")&&(N=Qe)}}else typeof N=="number"&&(N=N&255);if(D<0||this.length<D||this.length<xe)throw new RangeError("Out of range index");if(xe<=D)return this;D=D>>>0,xe=xe===void 0?this.length:xe>>>0,N||(N=0);var ct;if(typeof N=="number")for(ct=D;ct<xe;++ct)this[ct]=N;else{var ae=w.isBuffer(N)?N:w.from(N,Ze),R=ae.length;if(R===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ct=0;ct<xe-D;++ct)this[ct+D]=ae[ct%R]}return this};var Mt=/[^+/0-9A-Za-z-_]/g;function gt(we){if(we=we.split("=")[0],we=we.trim().replace(Mt,""),we.length<2)return"";for(;we.length%4!==0;)we=we+"=";return we}function Tt(we){return we<16?"0"+we.toString(16):we.toString(16)}function $t(we,N){N=N||1/0;for(var D,xe=we.length,Ze=null,Qe=[],ct=0;ct<xe;++ct){if(D=we.charCodeAt(ct),D>55295&&D<57344){if(!Ze){if(D>56319){(N-=3)>-1&&Qe.push(239,191,189);continue}else if(ct+1===xe){(N-=3)>-1&&Qe.push(239,191,189);continue}Ze=D;continue}if(D<56320){(N-=3)>-1&&Qe.push(239,191,189),Ze=D;continue}D=(Ze-55296<<10|D-56320)+65536}else Ze&&(N-=3)>-1&&Qe.push(239,191,189);if(Ze=null,D<128){if((N-=1)<0)break;Qe.push(D)}else if(D<2048){if((N-=2)<0)break;Qe.push(D>>6|192,D&63|128)}else if(D<65536){if((N-=3)<0)break;Qe.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((N-=4)<0)break;Qe.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return Qe}function Vt(we){for(var N=[],D=0;D<we.length;++D)N.push(we.charCodeAt(D)&255);return N}function Zt(we,N){for(var D,xe,Ze,Qe=[],ct=0;ct<we.length&&!((N-=2)<0);++ct)D=we.charCodeAt(ct),xe=D>>8,Ze=D%256,Qe.push(Ze),Qe.push(xe);return Qe}function En(we){return d.toByteArray(gt(we))}function et(we,N,D,xe){for(var Ze=0;Ze<xe&&!(Ze+D>=N.length||Ze>=we.length);++Ze)N[Ze+D]=we[Ze];return Ze}function sn(we,N){return we instanceof N||we!=null&&we.constructor!=null&&we.constructor.name!=null&&we.constructor.name===N.name}function Sn(we){return we!==we}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const p=i("./validator"),d=i("./xmlparser/XMLParser"),u=i("./xmlbuilder/json2xml");a.exports={XMLParser:d,XMLValidator:p,XMLBuilder:u}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const p=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",d=p+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",u="["+p+"]["+d+"]*",b=new RegExp("^"+u+"$"),C=function(w,T){const L=[];let U=T.exec(w);for(;U;){const F=[];F.startIndex=T.lastIndex-U[0].length;const ce=U.length;for(let K=0;K<ce;K++)F.push(U[K]);L.push(F),U=T.exec(w)}return L},A=function(w){const T=b.exec(w);return!(T===null||typeof T>"u")};c.isExist=function(w){return typeof w<"u"},c.isEmptyObject=function(w){return Object.keys(w).length===0},c.merge=function(w,T,L){if(T){const U=Object.keys(T),F=U.length;for(let ce=0;ce<F;ce++)L==="strict"?w[U[ce]]=[T[U[ce]]]:w[U[ce]]=T[U[ce]]}},c.getValue=function(w){return c.isExist(w)?w:""},c.isName=A,c.getAllMatches=C,c.nameRegexp=u},{}],5:[function(i,a,c){const p=i("./util"),d={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(V,E){E=Object.assign({},d,E);const j=[];let B=!1,ee=!1;V[0]==="\uFEFF"&&(V=V.substr(1));for(let q=0;q<V.length;q++)if(V[q]==="<"&&V[q+1]==="?"){if(q+=2,q=b(V,q),q.err)return q}else if(V[q]==="<"){let pe=q;if(q++,V[q]==="!"){q=C(V,q);continue}else{let _e=!1;V[q]==="/"&&(_e=!0,q++);let de="";for(;q<V.length&&V[q]!==">"&&V[q]!==" "&&V[q]!=="	"&&V[q]!==`
`&&V[q]!=="\r";q++)de+=V[q];if(de=de.trim(),de[de.length-1]==="/"&&(de=de.substring(0,de.length-1),q--),!$(de)){let J;return de.trim().length===0?J="Invalid space after '<'.":J="Tag '"+de+"' is an invalid name.",K("InvalidTag",J,ie(V,q))}const oe=T(V,q);if(oe===!1)return K("InvalidAttr","Attributes for '"+de+"' have open quote.",ie(V,q));let le=oe.value;if(q=oe.index,le[le.length-1]==="/"){const J=q-le.length;le=le.substring(0,le.length-1);const te=U(le,E);if(te===!0)B=!0;else return K(te.err.code,te.err.msg,ie(V,J+te.err.line))}else if(_e)if(oe.tagClosed){if(le.trim().length>0)return K("InvalidTag","Closing tag '"+de+"' can't have attributes or invalid starting.",ie(V,pe));{const J=j.pop();if(de!==J.tagName){let te=ie(V,J.tagStartPos);return K("InvalidTag","Expected closing tag '"+J.tagName+"' (opened in line "+te.line+", col "+te.col+") instead of closing tag '"+de+"'.",ie(V,pe))}j.length==0&&(ee=!0)}}else return K("InvalidTag","Closing tag '"+de+"' doesn't have proper closing.",ie(V,q));else{const J=U(le,E);if(J!==!0)return K(J.err.code,J.err.msg,ie(V,q-le.length+J.err.line));if(ee===!0)return K("InvalidXml","Multiple possible root nodes found.",ie(V,q));E.unpairedTags.indexOf(de)!==-1||j.push({tagName:de,tagStartPos:pe}),B=!0}for(q++;q<V.length;q++)if(V[q]==="<")if(V[q+1]==="!"){q++,q=C(V,q);continue}else if(V[q+1]==="?"){if(q=b(V,++q),q.err)return q}else break;else if(V[q]==="&"){const J=ce(V,q);if(J==-1)return K("InvalidChar","char '&' is not expected.",ie(V,q));q=J}else if(ee===!0&&!u(V[q]))return K("InvalidXml","Extra text at the end",ie(V,q));V[q]==="<"&&q--}}else{if(u(V[q]))continue;return K("InvalidChar","char '"+V[q]+"' is not expected.",ie(V,q))}if(B){if(j.length==1)return K("InvalidTag","Unclosed tag '"+j[0].tagName+"'.",ie(V,j[0].tagStartPos));if(j.length>0)return K("InvalidXml","Invalid '"+JSON.stringify(j.map(q=>q.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return K("InvalidXml","Start tag expected.",1);return!0};function u(V){return V===" "||V==="	"||V===`
`||V==="\r"}function b(V,E){const j=E;for(;E<V.length;E++)if(V[E]=="?"||V[E]==" "){const B=V.substr(j,E-j);if(E>5&&B==="xml")return K("InvalidXml","XML declaration allowed only at the start of the document.",ie(V,E));if(V[E]=="?"&&V[E+1]==">"){E++;break}else continue}return E}function C(V,E){if(V.length>E+5&&V[E+1]==="-"&&V[E+2]==="-"){for(E+=3;E<V.length;E++)if(V[E]==="-"&&V[E+1]==="-"&&V[E+2]===">"){E+=2;break}}else if(V.length>E+8&&V[E+1]==="D"&&V[E+2]==="O"&&V[E+3]==="C"&&V[E+4]==="T"&&V[E+5]==="Y"&&V[E+6]==="P"&&V[E+7]==="E"){let j=1;for(E+=8;E<V.length;E++)if(V[E]==="<")j++;else if(V[E]===">"&&(j--,j===0))break}else if(V.length>E+9&&V[E+1]==="["&&V[E+2]==="C"&&V[E+3]==="D"&&V[E+4]==="A"&&V[E+5]==="T"&&V[E+6]==="A"&&V[E+7]==="["){for(E+=8;E<V.length;E++)if(V[E]==="]"&&V[E+1]==="]"&&V[E+2]===">"){E+=2;break}}return E}const A='"',w="'";function T(V,E){let j="",B="",ee=!1;for(;E<V.length;E++){if(V[E]===A||V[E]===w)B===""?B=V[E]:B!==V[E]||(B="");else if(V[E]===">"&&B===""){ee=!0;break}j+=V[E]}return B!==""?!1:{value:j,index:E,tagClosed:ee}}const L=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function U(V,E){const j=p.getAllMatches(V,L),B={};for(let ee=0;ee<j.length;ee++){if(j[ee][1].length===0)return K("InvalidAttr","Attribute '"+j[ee][2]+"' has no space in starting.",X(j[ee]));if(j[ee][3]!==void 0&&j[ee][4]===void 0)return K("InvalidAttr","Attribute '"+j[ee][2]+"' is without value.",X(j[ee]));if(j[ee][3]===void 0&&!E.allowBooleanAttributes)return K("InvalidAttr","boolean attribute '"+j[ee][2]+"' is not allowed.",X(j[ee]));const q=j[ee][2];if(!W(q))return K("InvalidAttr","Attribute '"+q+"' is an invalid name.",X(j[ee]));if(!B.hasOwnProperty(q))B[q]=1;else return K("InvalidAttr","Attribute '"+q+"' is repeated.",X(j[ee]))}return!0}function F(V,E){let j=/\d/;for(V[E]==="x"&&(E++,j=/[\da-fA-F]/);E<V.length;E++){if(V[E]===";")return E;if(!V[E].match(j))break}return-1}function ce(V,E){if(E++,V[E]===";")return-1;if(V[E]==="#")return E++,F(V,E);let j=0;for(;E<V.length;E++,j++)if(!(V[E].match(/\w/)&&j<20)){if(V[E]===";")break;return-1}return E}function K(V,E,j){return{err:{code:V,msg:E,line:j.line||j,col:j.col}}}function W(V){return p.isName(V)}function $(V){return p.isName(V)}function ie(V,E){const j=V.substring(0,E).split(/\r?\n/);return{line:j.length,col:j[j.length-1].length+1}}function X(V){return V.startIndex+V[1].length}},{"./util":4}],6:[function(i,a,c){const p=i("./orderedJs2Xml"),d={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(w,T){return T},attributeValueProcessor:function(w,T){return T},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function u(w){this.options=Object.assign({},d,w),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=A),this.processTextOrObjNode=b,this.options.format?(this.indentate=C,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}u.prototype.build=function(w){return this.options.preserveOrder?p(w,this.options):(Array.isArray(w)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(w={[this.options.arrayNodeName]:w}),this.j2x(w,0).val)},u.prototype.j2x=function(w,T){let L="",U="";for(let F in w)if(Object.prototype.hasOwnProperty.call(w,F))if(typeof w[F]>"u")this.isAttribute(F)&&(U+="");else if(w[F]===null)this.isAttribute(F)?U+="":F[0]==="?"?U+=this.indentate(T)+"<"+F+"?"+this.tagEndChar:U+=this.indentate(T)+"<"+F+"/"+this.tagEndChar;else if(w[F]instanceof Date)U+=this.buildTextValNode(w[F],F,"",T);else if(typeof w[F]!="object"){const ce=this.isAttribute(F);if(ce)L+=this.buildAttrPairStr(ce,""+w[F]);else if(F===this.options.textNodeName){let K=this.options.tagValueProcessor(F,""+w[F]);U+=this.replaceEntitiesValue(K)}else U+=this.buildTextValNode(w[F],F,"",T)}else if(Array.isArray(w[F])){const ce=w[F].length;let K="";for(let W=0;W<ce;W++){const $=w[F][W];typeof $>"u"||($===null?F[0]==="?"?U+=this.indentate(T)+"<"+F+"?"+this.tagEndChar:U+=this.indentate(T)+"<"+F+"/"+this.tagEndChar:typeof $=="object"?this.options.oneListGroup?K+=this.j2x($,T+1).val:K+=this.processTextOrObjNode($,F,T):K+=this.buildTextValNode($,F,"",T))}this.options.oneListGroup&&(K=this.buildObjectNode(K,F,"",T)),U+=K}else if(this.options.attributesGroupName&&F===this.options.attributesGroupName){const ce=Object.keys(w[F]),K=ce.length;for(let W=0;W<K;W++)L+=this.buildAttrPairStr(ce[W],""+w[F][ce[W]])}else U+=this.processTextOrObjNode(w[F],F,T);return{attrStr:L,val:U}},u.prototype.buildAttrPairStr=function(w,T){return T=this.options.attributeValueProcessor(w,""+T),T=this.replaceEntitiesValue(T),this.options.suppressBooleanAttributes&&T==="true"?" "+w:" "+w+'="'+T+'"'};function b(w,T,L){const U=this.j2x(w,L+1);return w[this.options.textNodeName]!==void 0&&Object.keys(w).length===1?this.buildTextValNode(w[this.options.textNodeName],T,U.attrStr,L):this.buildObjectNode(U.val,T,U.attrStr,L)}u.prototype.buildObjectNode=function(w,T,L,U){if(w==="")return T[0]==="?"?this.indentate(U)+"<"+T+L+"?"+this.tagEndChar:this.indentate(U)+"<"+T+L+this.closeTag(T)+this.tagEndChar;{let F="</"+T+this.tagEndChar,ce="";return T[0]==="?"&&(ce="?",F=""),(L||L==="")&&w.indexOf("<")===-1?this.indentate(U)+"<"+T+L+ce+">"+w+F:this.options.commentPropName!==!1&&T===this.options.commentPropName&&ce.length===0?this.indentate(U)+`<!--${w}-->`+this.newLine:this.indentate(U)+"<"+T+L+ce+this.tagEndChar+w+this.indentate(U)+F}},u.prototype.closeTag=function(w){let T="";return this.options.unpairedTags.indexOf(w)!==-1?this.options.suppressUnpairedNode||(T="/"):this.options.suppressEmptyNode?T="/":T=`></${w}`,T},u.prototype.buildTextValNode=function(w,T,L,U){if(this.options.cdataPropName!==!1&&T===this.options.cdataPropName)return this.indentate(U)+`<![CDATA[${w}]]>`+this.newLine;if(this.options.commentPropName!==!1&&T===this.options.commentPropName)return this.indentate(U)+`<!--${w}-->`+this.newLine;if(T[0]==="?")return this.indentate(U)+"<"+T+L+"?"+this.tagEndChar;{let F=this.options.tagValueProcessor(T,w);return F=this.replaceEntitiesValue(F),F===""?this.indentate(U)+"<"+T+L+this.closeTag(T)+this.tagEndChar:this.indentate(U)+"<"+T+L+">"+F+"</"+T+this.tagEndChar}},u.prototype.replaceEntitiesValue=function(w){if(w&&w.length>0&&this.options.processEntities)for(let T=0;T<this.options.entities.length;T++){const L=this.options.entities[T];w=w.replace(L.regex,L.val)}return w};function C(w){return this.options.indentBy.repeat(w)}function A(w){return w.startsWith(this.options.attributeNamePrefix)&&w!==this.options.textNodeName?w.substr(this.attrPrefixLen):!1}a.exports=u},{"./orderedJs2Xml":7}],7:[function(i,a,c){const p=`
`;function d(T,L){let U="";return L.format&&L.indentBy.length>0&&(U=p),u(T,L,"",U)}function u(T,L,U,F){let ce="",K=!1;for(let W=0;W<T.length;W++){const $=T[W],ie=b($);if(ie===void 0)continue;let X="";if(U.length===0?X=ie:X=`${U}.${ie}`,ie===L.textNodeName){let ee=$[ie];A(X,L)||(ee=L.tagValueProcessor(ie,ee),ee=w(ee,L)),K&&(ce+=F),ce+=ee,K=!1;continue}else if(ie===L.cdataPropName){K&&(ce+=F),ce+=`<![CDATA[${$[ie][0][L.textNodeName]}]]>`,K=!1;continue}else if(ie===L.commentPropName){ce+=F+`<!--${$[ie][0][L.textNodeName]}-->`,K=!0;continue}else if(ie[0]==="?"){const ee=C($[":@"],L),q=ie==="?xml"?"":F;let pe=$[ie][0][L.textNodeName];pe=pe.length!==0?" "+pe:"",ce+=q+`<${ie}${pe}${ee}?>`,K=!0;continue}let V=F;V!==""&&(V+=L.indentBy);const E=C($[":@"],L),j=F+`<${ie}${E}`,B=u($[ie],L,X,V);L.unpairedTags.indexOf(ie)!==-1?L.suppressUnpairedNode?ce+=j+">":ce+=j+"/>":(!B||B.length===0)&&L.suppressEmptyNode?ce+=j+"/>":B&&B.endsWith(">")?ce+=j+`>${B}${F}</${ie}>`:(ce+=j+">",B&&F!==""&&(B.includes("/>")||B.includes("</"))?ce+=F+L.indentBy+B+F:ce+=B,ce+=`</${ie}>`),K=!0}return ce}function b(T){const L=Object.keys(T);for(let U=0;U<L.length;U++){const F=L[U];if(T.hasOwnProperty(F)&&F!==":@")return F}}function C(T,L){let U="";if(T&&!L.ignoreAttributes)for(let F in T){if(!T.hasOwnProperty(F))continue;let ce=L.attributeValueProcessor(F,T[F]);ce=w(ce,L),ce===!0&&L.suppressBooleanAttributes?U+=` ${F.substr(L.attributeNamePrefix.length)}`:U+=` ${F.substr(L.attributeNamePrefix.length)}="${ce}"`}return U}function A(T,L){T=T.substr(0,T.length-L.textNodeName.length-1);let U=T.substr(T.lastIndexOf(".")+1);for(let F in L.stopNodes)if(L.stopNodes[F]===T||L.stopNodes[F]==="*."+U)return!0;return!1}function w(T,L){if(T&&T.length>0&&L.processEntities)for(let U=0;U<L.entities.length;U++){const F=L.entities[U];T=T.replace(F.regex,F.val)}return T}a.exports=d},{}],8:[function(i,a,c){const p=i("../util");function d(U,F){const ce={};if(U[F+3]==="O"&&U[F+4]==="C"&&U[F+5]==="T"&&U[F+6]==="Y"&&U[F+7]==="P"&&U[F+8]==="E"){F=F+9;let K=1,W=!1,$=!1,ie="";for(;F<U.length;F++)if(U[F]==="<"&&!$){if(W&&C(U,F))F+=7,[entityName,val,F]=u(U,F+1),val.indexOf("&")===-1&&(ce[L(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(W&&A(U,F))F+=8;else if(W&&w(U,F))F+=8;else if(W&&T(U,F))F+=9;else if(b)$=!0;else throw new Error("Invalid DOCTYPE");K++,ie=""}else if(U[F]===">"){if($?U[F-1]==="-"&&U[F-2]==="-"&&($=!1,K--):K--,K===0)break}else U[F]==="["?W=!0:ie+=U[F];if(K!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:ce,i:F}}function u(U,F){let ce="";for(;F<U.length&&U[F]!=="'"&&U[F]!=='"';F++)ce+=U[F];if(ce=ce.trim(),ce.indexOf(" ")!==-1)throw new Error("External entites are not supported");const K=U[F++];let W="";for(;F<U.length&&U[F]!==K;F++)W+=U[F];return[ce,W,F]}function b(U,F){return U[F+1]==="!"&&U[F+2]==="-"&&U[F+3]==="-"}function C(U,F){return U[F+1]==="!"&&U[F+2]==="E"&&U[F+3]==="N"&&U[F+4]==="T"&&U[F+5]==="I"&&U[F+6]==="T"&&U[F+7]==="Y"}function A(U,F){return U[F+1]==="!"&&U[F+2]==="E"&&U[F+3]==="L"&&U[F+4]==="E"&&U[F+5]==="M"&&U[F+6]==="E"&&U[F+7]==="N"&&U[F+8]==="T"}function w(U,F){return U[F+1]==="!"&&U[F+2]==="A"&&U[F+3]==="T"&&U[F+4]==="T"&&U[F+5]==="L"&&U[F+6]==="I"&&U[F+7]==="S"&&U[F+8]==="T"}function T(U,F){return U[F+1]==="!"&&U[F+2]==="N"&&U[F+3]==="O"&&U[F+4]==="T"&&U[F+5]==="A"&&U[F+6]==="T"&&U[F+7]==="I"&&U[F+8]==="O"&&U[F+9]==="N"}function L(U){if(p.isName(U))return U;throw new Error(`Invalid entity name ${U}`)}a.exports=d},{"../util":4}],9:[function(i,a,c){const p={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(u,b){return b},attributeValueProcessor:function(u,b){return b},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(u,b,C){return u}},d=function(u){return Object.assign({},p,u)};c.buildOptions=d,c.defaultOptions=p},{}],10:[function(i,a,c){const p=i("../util"),d=i("./xmlNode"),u=i("./DocTypeReader"),b=i("strnum");class C{constructor(ee){this.options=ee,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=A,this.parseXml=F,this.parseTextData=w,this.resolveNameSpace=T,this.buildAttributesMap=U,this.isItStopNode=$,this.replaceEntitiesValue=K,this.readStopNodeData=E,this.saveTextToParentTag=W,this.addChild=ce}}function A(B){const ee=Object.keys(B);for(let q=0;q<ee.length;q++){const pe=ee[q];this.lastEntities[pe]={regex:new RegExp("&"+pe+";","g"),val:B[pe]}}}function w(B,ee,q,pe,_e,de,oe){if(B!==void 0&&(this.options.trimValues&&!pe&&(B=B.trim()),B.length>0)){oe||(B=this.replaceEntitiesValue(B));const le=this.options.tagValueProcessor(ee,B,q,_e,de);return le==null?B:typeof le!=typeof B||le!==B?le:this.options.trimValues?j(B,this.options.parseTagValue,this.options.numberParseOptions):B.trim()===B?j(B,this.options.parseTagValue,this.options.numberParseOptions):B}}function T(B){if(this.options.removeNSPrefix){const ee=B.split(":"),q=B.charAt(0)==="/"?"/":"";if(ee[0]==="xmlns")return"";ee.length===2&&(B=q+ee[1])}return B}const L=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function U(B,ee,q){if(!this.options.ignoreAttributes&&typeof B=="string"){const pe=p.getAllMatches(B,L),_e=pe.length,de={};for(let oe=0;oe<_e;oe++){const le=this.resolveNameSpace(pe[oe][1]);let J=pe[oe][4],te=this.options.attributeNamePrefix+le;if(le.length)if(this.options.transformAttributeName&&(te=this.options.transformAttributeName(te)),te==="__proto__"&&(te="#__proto__"),J!==void 0){this.options.trimValues&&(J=J.trim()),J=this.replaceEntitiesValue(J);const he=this.options.attributeValueProcessor(le,J,ee);he==null?de[te]=J:typeof he!=typeof J||he!==J?de[te]=he:de[te]=j(J,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(de[te]=!0)}if(!Object.keys(de).length)return;if(this.options.attributesGroupName){const oe={};return oe[this.options.attributesGroupName]=de,oe}return de}}const F=function(B){B=B.replace(/\r\n?/g,`
`);const ee=new d("!xml");let q=ee,pe="",_e="";for(let de=0;de<B.length;de++)if(B[de]==="<")if(B[de+1]==="/"){const le=X(B,">",de,"Closing Tag is not closed.");let J=B.substring(de+2,le).trim();if(this.options.removeNSPrefix){const be=J.indexOf(":");be!==-1&&(J=J.substr(be+1))}this.options.transformTagName&&(J=this.options.transformTagName(J)),q&&(pe=this.saveTextToParentTag(pe,q,_e));const te=_e.substring(_e.lastIndexOf(".")+1);if(J&&this.options.unpairedTags.indexOf(J)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${J}>`);let he=0;te&&this.options.unpairedTags.indexOf(te)!==-1?(he=_e.lastIndexOf(".",_e.lastIndexOf(".")-1),this.tagsNodeStack.pop()):he=_e.lastIndexOf("."),_e=_e.substring(0,he),q=this.tagsNodeStack.pop(),pe="",de=le}else if(B[de+1]==="?"){let le=V(B,de,!1,"?>");if(!le)throw new Error("Pi Tag is not closed.");if(pe=this.saveTextToParentTag(pe,q,_e),!(this.options.ignoreDeclaration&&le.tagName==="?xml"||this.options.ignorePiTags)){const J=new d(le.tagName);J.add(this.options.textNodeName,""),le.tagName!==le.tagExp&&le.attrExpPresent&&(J[":@"]=this.buildAttributesMap(le.tagExp,_e,le.tagName)),this.addChild(q,J,_e)}de=le.closeIndex+1}else if(B.substr(de+1,3)==="!--"){const le=X(B,"-->",de+4,"Comment is not closed.");if(this.options.commentPropName){const J=B.substring(de+4,le-2);pe=this.saveTextToParentTag(pe,q,_e),q.add(this.options.commentPropName,[{[this.options.textNodeName]:J}])}de=le}else if(B.substr(de+1,2)==="!D"){const le=u(B,de);this.docTypeEntities=le.entities,de=le.i}else if(B.substr(de+1,2)==="!["){const le=X(B,"]]>",de,"CDATA is not closed.")-2,J=B.substring(de+9,le);if(pe=this.saveTextToParentTag(pe,q,_e),this.options.cdataPropName)q.add(this.options.cdataPropName,[{[this.options.textNodeName]:J}]);else{let te=this.parseTextData(J,q.tagname,_e,!0,!1,!0);te==null&&(te=""),q.add(this.options.textNodeName,te)}de=le+2}else{let le=V(B,de,this.options.removeNSPrefix),J=le.tagName;const te=le.rawTagName;let he=le.tagExp,be=le.attrExpPresent,Ee=le.closeIndex;this.options.transformTagName&&(J=this.options.transformTagName(J)),q&&pe&&q.tagname!=="!xml"&&(pe=this.saveTextToParentTag(pe,q,_e,!1));const Be=q;if(Be&&this.options.unpairedTags.indexOf(Be.tagname)!==-1&&(q=this.tagsNodeStack.pop(),_e=_e.substring(0,_e.lastIndexOf("."))),J!==ee.tagname&&(_e+=_e?"."+J:J),this.isItStopNode(this.options.stopNodes,_e,J)){let Pe="";if(he.length>0&&he.lastIndexOf("/")===he.length-1)de=le.closeIndex;else if(this.options.unpairedTags.indexOf(J)!==-1)de=le.closeIndex;else{const We=this.readStopNodeData(B,te,Ee+1);if(!We)throw new Error(`Unexpected end of ${te}`);de=We.i,Pe=We.tagContent}const ze=new d(J);J!==he&&be&&(ze[":@"]=this.buildAttributesMap(he,_e,J)),Pe&&(Pe=this.parseTextData(Pe,J,_e,!0,be,!0,!0)),_e=_e.substr(0,_e.lastIndexOf(".")),ze.add(this.options.textNodeName,Pe),this.addChild(q,ze,_e)}else{if(he.length>0&&he.lastIndexOf("/")===he.length-1){J[J.length-1]==="/"?(J=J.substr(0,J.length-1),_e=_e.substr(0,_e.length-1),he=J):he=he.substr(0,he.length-1),this.options.transformTagName&&(J=this.options.transformTagName(J));const Pe=new d(J);J!==he&&be&&(Pe[":@"]=this.buildAttributesMap(he,_e,J)),this.addChild(q,Pe,_e),_e=_e.substr(0,_e.lastIndexOf("."))}else{const Pe=new d(J);this.tagsNodeStack.push(q),J!==he&&be&&(Pe[":@"]=this.buildAttributesMap(he,_e,J)),this.addChild(q,Pe,_e),q=Pe}pe="",de=Ee}}else pe+=B[de];return ee.child};function ce(B,ee,q){const pe=this.options.updateTag(ee.tagname,q,ee[":@"]);pe===!1||(typeof pe=="string"&&(ee.tagname=pe),B.addChild(ee))}const K=function(B){if(this.options.processEntities){for(let ee in this.docTypeEntities){const q=this.docTypeEntities[ee];B=B.replace(q.regx,q.val)}for(let ee in this.lastEntities){const q=this.lastEntities[ee];B=B.replace(q.regex,q.val)}if(this.options.htmlEntities)for(let ee in this.htmlEntities){const q=this.htmlEntities[ee];B=B.replace(q.regex,q.val)}B=B.replace(this.ampEntity.regex,this.ampEntity.val)}return B};function W(B,ee,q,pe){return B&&(pe===void 0&&(pe=Object.keys(ee.child).length===0),B=this.parseTextData(B,ee.tagname,q,!1,ee[":@"]?Object.keys(ee[":@"]).length!==0:!1,pe),B!==void 0&&B!==""&&ee.add(this.options.textNodeName,B),B=""),B}function $(B,ee,q){const pe="*."+q;for(const _e in B){const de=B[_e];if(pe===de||ee===de)return!0}return!1}function ie(B,ee,q=">"){let pe,_e="";for(let de=ee;de<B.length;de++){let oe=B[de];if(pe)oe===pe&&(pe="");else if(oe==='"'||oe==="'")pe=oe;else if(oe===q[0])if(q[1]){if(B[de+1]===q[1])return{data:_e,index:de}}else return{data:_e,index:de};else oe==="	"&&(oe=" ");_e+=oe}}function X(B,ee,q,pe){const _e=B.indexOf(ee,q);if(_e===-1)throw new Error(pe);return _e+ee.length-1}function V(B,ee,q,pe=">"){const _e=ie(B,ee+1,pe);if(!_e)return;let de=_e.data;const oe=_e.index,le=de.search(/\s/);let J=de,te=!0;le!==-1&&(J=de.substring(0,le),de=de.substring(le+1).trimStart());const he=J;if(q){const be=J.indexOf(":");be!==-1&&(J=J.substr(be+1),te=J!==_e.data.substr(be+1))}return{tagName:J,tagExp:de,closeIndex:oe,attrExpPresent:te,rawTagName:he}}function E(B,ee,q){const pe=q;let _e=1;for(;q<B.length;q++)if(B[q]==="<")if(B[q+1]==="/"){const de=X(B,">",q,`${ee} is not closed`);if(B.substring(q+2,de).trim()===ee&&(_e--,_e===0))return{tagContent:B.substring(pe,q),i:de};q=de}else if(B[q+1]==="?")q=X(B,"?>",q+1,"StopNode is not closed.");else if(B.substr(q+1,3)==="!--")q=X(B,"-->",q+3,"StopNode is not closed.");else if(B.substr(q+1,2)==="![")q=X(B,"]]>",q,"StopNode is not closed.")-2;else{const de=V(B,q,">");de&&((de&&de.tagName)===ee&&de.tagExp[de.tagExp.length-1]!=="/"&&_e++,q=de.closeIndex)}}function j(B,ee,q){if(ee&&typeof B=="string"){const pe=B.trim();return pe==="true"?!0:pe==="false"?!1:b(B,q)}else return p.isExist(B)?B:""}a.exports=C},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:p}=i("./OptionsBuilder"),d=i("./OrderedObjParser"),{prettify:u}=i("./node2json"),b=i("../validator");class C{constructor(w){this.externalEntities={},this.options=p(w)}parse(w,T){if(typeof w!="string")if(w.toString)w=w.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(T){T===!0&&(T={});const F=b.validate(w,T);if(F!==!0)throw Error(`${F.err.msg}:${F.err.line}:${F.err.col}`)}const L=new d(this.options);L.addExternalEntities(this.externalEntities);const U=L.parseXml(w);return this.options.preserveOrder||U===void 0?U:u(U,this.options)}addEntity(w,T){if(T.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(w.indexOf("&")!==-1||w.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(T==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[w]=T}}a.exports=C},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function p(A,w){return d(A,w)}function d(A,w,T){let L;const U={};for(let F=0;F<A.length;F++){const ce=A[F],K=u(ce);let W="";if(T===void 0?W=K:W=T+"."+K,K===w.textNodeName)L===void 0?L=ce[K]:L+=""+ce[K];else{if(K===void 0)continue;if(ce[K]){let $=d(ce[K],w,W);const ie=C($,w);ce[":@"]?b($,ce[":@"],W,w):Object.keys($).length===1&&$[w.textNodeName]!==void 0&&!w.alwaysCreateTextNode?$=$[w.textNodeName]:Object.keys($).length===0&&(w.alwaysCreateTextNode?$[w.textNodeName]="":$=""),U[K]!==void 0&&U.hasOwnProperty(K)?(Array.isArray(U[K])||(U[K]=[U[K]]),U[K].push($)):w.isArray(K,W,ie)?U[K]=[$]:U[K]=$}}}return typeof L=="string"?L.length>0&&(U[w.textNodeName]=L):L!==void 0&&(U[w.textNodeName]=L),U}function u(A){const w=Object.keys(A);for(let T=0;T<w.length;T++){const L=w[T];if(L!==":@")return L}}function b(A,w,T,L){if(w){const U=Object.keys(w),F=U.length;for(let ce=0;ce<F;ce++){const K=U[ce];L.isArray(K,T+"."+K,!0,!0)?A[K]=[w[K]]:A[K]=w[K]}}}function C(A,w){const{textNodeName:T}=w,L=Object.keys(A).length;return!!(L===0||L===1&&(A[T]||typeof A[T]=="boolean"||A[T]===0))}c.prettify=p},{}],13:[function(i,a,c){class p{constructor(u){this.tagname=u,this.child=[],this[":@"]={}}add(u,b){u==="__proto__"&&(u="#__proto__"),this.child.push({[u]:b})}addChild(u){u.tagname==="__proto__"&&(u.tagname="#__proto__"),u[":@"]&&Object.keys(u[":@"]).length>0?this.child.push({[u.tagname]:u.child,":@":u[":@"]}):this.child.push({[u.tagname]:u.child})}}a.exports=p},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(p,d,u,b,C){var A,w,T=C*8-b-1,L=(1<<T)-1,U=L>>1,F=-7,ce=u?C-1:0,K=u?-1:1,W=p[d+ce];for(ce+=K,A=W&(1<<-F)-1,W>>=-F,F+=T;F>0;A=A*256+p[d+ce],ce+=K,F-=8);for(w=A&(1<<-F)-1,A>>=-F,F+=b;F>0;w=w*256+p[d+ce],ce+=K,F-=8);if(A===0)A=1-U;else{if(A===L)return w?NaN:(W?-1:1)*(1/0);w=w+Math.pow(2,b),A=A-U}return(W?-1:1)*w*Math.pow(2,A-b)},c.write=function(p,d,u,b,C,A){var w,T,L,U=A*8-C-1,F=(1<<U)-1,ce=F>>1,K=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=b?0:A-1,$=b?1:-1,ie=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(T=isNaN(d)?1:0,w=F):(w=Math.floor(Math.log(d)/Math.LN2),d*(L=Math.pow(2,-w))<1&&(w--,L*=2),w+ce>=1?d+=K/L:d+=K*Math.pow(2,1-ce),d*L>=2&&(w++,L/=2),w+ce>=F?(T=0,w=F):w+ce>=1?(T=(d*L-1)*Math.pow(2,C),w=w+ce):(T=d*Math.pow(2,ce-1)*Math.pow(2,C),w=0));C>=8;p[u+W]=T&255,W+=$,T/=256,C-=8);for(w=w<<C|T,U+=C;U>0;p[u+W]=w&255,W+=$,w/=256,U-=8);p[u+W-$]|=ie*128}},{}],15:[function(i,a,c){const p=/^[-+]?0x[a-fA-F0-9]+$/,d=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const u={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function b(A,w={}){if(w=Object.assign({},u,w),!A||typeof A!="string")return A;let T=A.trim();if(w.skipLike!==void 0&&w.skipLike.test(T))return A;if(w.hex&&p.test(T))return Number.parseInt(T,16);{const L=d.exec(T);if(L){const U=L[1],F=L[2];let ce=C(L[3]);const K=L[4]||L[6];if(!w.leadingZeros&&F.length>0&&U&&T[2]!==".")return A;if(!w.leadingZeros&&F.length>0&&!U&&T[1]!==".")return A;{const W=Number(T),$=""+W;return $.search(/[eE]/)!==-1||K?w.eNotation?W:A:T.indexOf(".")!==-1?$==="0"&&ce===""||$===ce||U&&$==="-"+ce?W:A:F?ce===$||U+ce===$?W:A:T===$||T===U+$?W:A}}else return A}}function C(A){return A&&A.indexOf(".")!==-1&&(A=A.replace(/0+$/,""),A==="."?A="0":A[0]==="."?A="0"+A:A[A.length-1]==="."&&(A=A.substr(0,A.length-1))),A}a.exports=b},{}],16:[function(i,a,c){(function(p){(function(){var d=this&&this.__awaiter||function(T,L,U,F){function ce(K){return K instanceof U?K:new U(function(W){W(K)})}return new(U||(U=Promise))(function(K,W){function $(V){try{X(F.next(V))}catch(E){W(E)}}function ie(V){try{X(F.throw(V))}catch(E){W(E)}}function X(V){V.done?K(V.value):ce(V.value).then($,ie)}X((F=F.apply(T,L||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const u=i("../auth"),b=i("../config"),C=i("./_xml"),A=T=>typeof btoa>"u"?p.from(T,"binary").toString("base64"):btoa(T);function w(T,L,U){return d(this,void 0,void 0,function*(){const{apiUrl:F,authHeader:ce,basicAuth:K,userAgent:W}=(0,b.getConfig)(),$=K&&`Basic ${A(`${K.username}:${K.password}`)}`,ie=(0,u.getAuthToken)()&&`Bearer ${(0,u.getAuthToken)()}`;let X=new URLSearchParams(L).toString();X&&(X=`?${X}`);const V=yield fetch(`${F}/api${T}${X}`,Object.assign(Object.assign({},U),{headers:Object.assign({Authorization:ce||$||ie||"","User-Agent":W},U==null?void 0:U.headers)})),E=V.headers.get("Content-Type");if(E!=null&&E.startsWith("application/xml")){const j=yield V.text();return yield C.xmlParser.parse(j)}if(E!=null&&E.startsWith("application/json"))return V.json();if(V.ok)return yield V.text();throw new Error(`OSM API: ${yield V.text()}`)})}c.osmFetch=w}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const p=i("fast-xml-parser");c.xmlParser=new p.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:d=>d!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const p=i("fast-xml-parser"),d=new p.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function u(A){return d.build({osm:{changeset:{tag:Object.entries(A).map(([w,T])=>({$k:w,$v:T}))}}})}c.createChangesetMetaXml=u;const b=(A,w,T)=>w.reduce((L,U)=>{const F={$id:U.id,$version:T?0:U.version,$changeset:A,tag:Object.entries(U.tags||{}).map(([ce,K])=>({$k:ce,$v:K}))};switch(U.type){case"node":{const ce=Object.assign(Object.assign({},F),{$lat:U.lat,$lon:U.lon});return Object.assign(Object.assign({},L),{node:[...L.node,ce]})}case"way":{if(!U.nodes)throw new Error("Way has no nodes");const ce=Object.assign(Object.assign({},F),{nd:U.nodes.map(K=>({$ref:K}))});return Object.assign(Object.assign({},L),{way:[...L.way,ce]})}case"relation":{if(!U.members)throw new Error("Relation has no members");const ce=Object.assign(Object.assign({},F),{member:U.members.map(K=>({$type:K.type,$ref:K.ref,$role:K.role}))});return Object.assign(Object.assign({},L),{relation:[...L.relation,ce]})}default:return L}},{node:[],way:[],relation:[]});function C(A,w,T){return d.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},T),{create:[b(A,w.create,!0)],modify:[b(A,w.modify)],delete:[Object.assign({"$if-unused":!0},b(A,w.delete))]})})}c.createOsmChangeXml=C},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const p=i("../_xml");function d(A){return{changeset:+A.$.changeset,id:+A.$.id,timestamp:A.$.timestamp,uid:+A.$.uid,user:A.$.user,version:+A.$.version,tags:A.tag?Object.fromEntries(A.tag.map(w=>[w.$.k,w.$.v])):void 0}}const u=A=>{const w=[];if(A.node){const T=A.node.map(L=>Object.assign(Object.assign({type:"node"},d(L)),{lat:+L.$.lat,lon:+L.$.lon}));w.push(...T)}if(A.way){const T=A.way.map(L=>{var U;return Object.assign(Object.assign({type:"way"},d(L)),{nodes:((U=L.nd)===null||U===void 0?void 0:U.map(F=>+F.$.ref))||[]})});w.push(...T)}if(A.relation){const T=A.relation.map(L=>{var U;return Object.assign(Object.assign({type:"relation"},d(L)),{members:((U=L.member)===null||U===void 0?void 0:U.map(F=>({ref:+F.$.ref,role:F.$.role,type:F.$.type})))||[]})});w.push(...T)}return w};function b(A){var w,T,L;return{create:((w=A.osmChange[0].create)===null||w===void 0?void 0:w.flatMap(u))||[],modify:((T=A.osmChange[0].modify)===null||T===void 0?void 0:T.flatMap(u))||[],delete:((L=A.osmChange[0].delete)===null||L===void 0?void 0:L.flatMap(u))||[]}}c.parseOsmChangeJson=b;function C(A){const w=p.xmlParser.parse(A);return b(w)}c.parseOsmChangeXml=C},{"../_xml":17}],20:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,A,w){function T(L){return L instanceof A?L:new A(function(U){U(L)})}return new(A||(A=Promise))(function(L,U){function F(W){try{K(w.next(W))}catch($){U($)}}function ce(W){try{K(w.throw(W))}catch($){U($)}}function K(W){W.done?L(W.value):T(W.value).then(F,ce)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const d=i("../_osmFetch");function u(b,C){return p(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/changeset/${b}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(C)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=u},{"../_osmFetch":16}],21:[function(i,a,c){var p=this&&this.__awaiter||function(C,A,w,T){function L(U){return U instanceof w?U:new w(function(F){F(U)})}return new(w||(w=Promise))(function(U,F){function ce($){try{W(T.next($))}catch(ie){F(ie)}}function K($){try{W(T.throw($))}catch(ie){F(ie)}}function W($){$.done?U($.value):L($.value).then(ce,K)}W((T=T.apply(C,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const d=i("../_osmFetch"),u=i("./_parseOsmChangeXml");function b(C){return p(this,void 0,void 0,function*(){const A=yield(0,d.osmFetch)(`/0.6/changeset/${C}/download`);return(0,u.parseOsmChangeJson)(A)})}c.getChangesetDiff=b},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var p=this&&this.__awaiter||function(w,T,L,U){function F(ce){return ce instanceof L?ce:new L(function(K){K(ce)})}return new(L||(L=Promise))(function(ce,K){function W(X){try{ie(U.next(X))}catch(V){K(V)}}function $(X){try{ie(U.throw(X))}catch(V){K(V)}}function ie(X){X.done?ce(X.value):F(X.value).then(W,$)}ie((U=U.apply(w,T||[])).next())})},d=this&&this.__rest||function(w,T){var L={};for(var U in w)Object.prototype.hasOwnProperty.call(w,U)&&T.indexOf(U)<0&&(L[U]=w[U]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var F=0,U=Object.getOwnPropertySymbols(w);F<U.length;F++)T.indexOf(U[F])<0&&Object.prototype.propertyIsEnumerable.call(w,U[F])&&(L[U[F]]=w[U[F]]);return L};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const u=i("../_osmFetch"),b=w=>{var T;return{id:+w.$.id,created_at:new Date(w.$.created_at),closed_at:new Date(w.$.closed_at),open:w.$.open==="true",comments_count:+w.$.comments_count,changes_count:+w.$.changes_count,min_lat:+w.$.min_lat,min_lon:+w.$.min_lon,max_lat:+w.$.max_lat,max_lon:+w.$.max_lon,uid:+w.$.uid,user:w.$.user,tags:Object.fromEntries(w.tag.map(L=>[L.$.k,L.$.v])),discussion:(T=w.discussion)===null||T===void 0?void 0:T[0].comment.map(L=>({date:new Date(L.$.date),user:L.$.user,uid:L.$.uid,text:L.text[0]}))}};function C(w){var T;return p(this,void 0,void 0,function*(){const{only:L}=w,U=d(w,["only"]);return((T=(yield(0,u.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},L&&{[L]:!0}),U))).osm[0].changeset)===null||T===void 0?void 0:T.map(b))||[]})}c.listChangesets=C;function A(w,T=!0){return p(this,void 0,void 0,function*(){return(yield(0,u.osmFetch)(`/0.6/changeset/${w}`,{include_discussion:T})).osm[0].changeset.map(b)[0]})}c.getChangeset=A},{"../_osmFetch":16}],23:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(C,A,w,T){T===void 0&&(T=w);var L=Object.getOwnPropertyDescriptor(A,w);(!L||("get"in L?!A.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return A[w]}}),Object.defineProperty(C,T,L)}:function(C,A,w,T){T===void 0&&(T=w),C[T]=A[w]}),d=this&&this.__exportStar||function(C,A){for(var w in C)w!=="default"&&!Object.prototype.hasOwnProperty.call(A,w)&&p(A,C,w)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,d(i("./createChangesetComment"),c),d(i("./getChangesetDiff"),c),d(i("./getChangesets"),c),d(i("./uploadChangeset"),c);var u=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return u.parseOsmChangeXml}});var b=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return b.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var p=this&&this.__awaiter||function(C,A,w,T){function L(U){return U instanceof w?U:new w(function(F){F(U)})}return new(w||(w=Promise))(function(U,F){function ce($){try{W(T.next($))}catch(ie){F(ie)}}function K($){try{W(T.throw($))}catch(ie){F(ie)}}function W($){$.done?U($.value):L($.value).then(ce,K)}W((T=T.apply(C,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const d=i("../_osmFetch"),u=i("./_createOsmChangeXml");function b(C,A){return p(this,void 0,void 0,function*(){const w=(0,u.createChangesetMetaXml)(C),T=+(yield(0,d.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:w,headers:{"content-type":"application/xml; charset=utf-8"}})),L=(0,u.createOsmChangeXml)(T,A);return yield(0,d.osmFetch)(`/0.6/changeset/${T}/upload`,void 0,{method:"POST",body:L,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,d.osmFetch)(`/0.6/changeset/${T}/close`,void 0,{method:"PUT"}),+T})}c.uploadChangeset=b},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,A,w){function T(L){return L instanceof A?L:new A(function(U){U(L)})}return new(A||(A=Promise))(function(L,U){function F(W){try{K(w.next(W))}catch($){U($)}}function ce(W){try{K(w.throw(W))}catch($){U($)}}function K(W){W.done?L(W.value):T(W.value).then(F,ce)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const d=i("./_osmFetch");function u(){var b;return p(this,void 0,void 0,function*(){const C=yield(0,d.osmFetch)("/capabilities");return{limits:{maxArea:+C.osm[0].api[0].area[0].$.maximum,maxNoteArea:+C.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+C.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+C.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+C.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+C.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((b=C.osm[0].policy[0].imagery[0].blacklist)===null||b===void 0?void 0:b.map(w=>w.$.regex))||[]}}})}c.getCapabilities=u},{"./_osmFetch":16}],26:[function(i,a,c){var p=this&&this.__awaiter||function(L,U,F,ce){function K(W){return W instanceof F?W:new F(function($){$(W)})}return new(F||(F=Promise))(function(W,$){function ie(E){try{V(ce.next(E))}catch(j){$(j)}}function X(E){try{V(ce.throw(E))}catch(j){$(j)}}function V(E){E.done?W(E.value):K(E.value).then(ie,X)}V((ce=ce.apply(L,U||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const d=i("./_osmFetch");function u(L,U,F){return p(this,void 0,void 0,function*(){const ce=F&&L!=="node"?"/full":"";return(yield(0,d.osmFetch)(`/0.6/${L}/${U}${ce}.json`)).elements})}c.getFeature=u;function b(L,U){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${L}s.json?${L}s=${U.join(",")}`)).elements})}c.getFeatures=b;function C(L,U,F){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${L}/${U}/${F}.json`)).elements[0]})}c.getFeatureAtVersion=C;function A(L,U){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${L}/${U}/history.json`)).elements})}c.getFeatureHistory=A;function w(L){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/node/${L}/ways.json`)).elements})}c.getWaysForNode=w;function T(L,U){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${L}/${U}/relations.json`)).elements})}c.getRelationsForElement=T},{"./_osmFetch":16}],27:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,A,w){function T(L){return L instanceof A?L:new A(function(U){U(L)})}return new(A||(A=Promise))(function(L,U){function F(W){try{K(w.next(W))}catch($){U($)}}function ce(W){try{K(w.throw(W))}catch($){U($)}}function K(W){W.done?L(W.value):T(W.value).then(F,ce)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const d=i("./_osmFetch");function u(b){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)("/0.6/map.json",{bbox:b})).elements})}c.getMapData=u},{"./_osmFetch":16}],28:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,A,w){function T(L){return L instanceof A?L:new A(function(U){U(L)})}return new(A||(A=Promise))(function(L,U){function F(W){try{K(w.next(W))}catch($){U($)}}function ce(W){try{K(w.throw(W))}catch($){U($)}}function K(W){W.done?L(W.value):T(W.value).then(F,ce)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const d=i("./changesets");function u(b){return p(this,void 0,void 0,function*(){const C=yield(0,d.listChangesets)({display_name:b});if(!C.length)throw new Error("Could not get uid because the user has never edited the map");return C[0].uid})}c.getUIdFromDisplayName=u},{"./changesets":23}],29:[function(i,a,c){var p=this&&this.__awaiter||function(C,A,w,T){function L(U){return U instanceof w?U:new w(function(F){F(U)})}return new(w||(w=Promise))(function(U,F){function ce($){try{W(T.next($))}catch(ie){F(ie)}}function K($){try{W(T.throw($))}catch(ie){F(ie)}}function W($){$.done?U($.value):L($.value).then(ce,K)}W((T=T.apply(C,A||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const d=i("./_osmFetch");function u(C){return p(this,void 0,void 0,function*(){const A=yield(0,d.osmFetch)(`/0.6/user/${C==="me"?"details":C}.json`);return Object.assign(Object.assign({},A.user),{account_created:new Date(A.user.account_created)})})}c.getUser=u;function b(C){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)("/0.6/users",{users:C})).users.map(w=>Object.assign(Object.assign({},w),{account_created:new Date(w.account_created)}))})}c.getUsers=b},{"./_osmFetch":16}],30:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,A){A===void 0&&(A=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,A,w)}:function(u,b,C,A){A===void 0&&(A=C),u[A]=b[C]}),d=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./changesets"),c),d(i("./notes"),c),d(i("./getCapabilities"),c),d(i("./getFeature"),c),d(i("./getMapData"),c),d(i("./getUIdFromDisplayName"),c),d(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var p=this&&this.__awaiter||function(T,L,U,F){function ce(K){return K instanceof U?K:new U(function(W){W(K)})}return new(U||(U=Promise))(function(K,W){function $(V){try{X(F.next(V))}catch(E){W(E)}}function ie(V){try{X(F.throw(V))}catch(E){W(E)}}function X(V){V.done?K(V.value):ce(V.value).then($,ie)}X((F=F.apply(T,L||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const d=i("../_osmFetch"),u=T=>{const[L,U]=T.geometry.coordinates;return Object.assign(Object.assign({},T.properties),{location:{lat:U,lng:L}})};function b(T,L){return p(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/notes${L?"/search":""}.json`,T)).features.map(u)})}function C(T){return b(T,!0)}c.getNotesForQuery=C;function A(T){return b({bbox:T},!1)}c.getNotesForArea=A;function w(T){return p(this,void 0,void 0,function*(){const L=yield(0,d.osmFetch)(`/0.6/notes/${T}.json`);return u(L)})}c.getNote=w},{"../_osmFetch":16}],32:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,A){A===void 0&&(A=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,A,w)}:function(u,b,C,A){A===void 0&&(A=C),u[A]=b[C]}),d=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./getNotes"),c),d(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var p=this&&this.__awaiter||function(A,w,T,L){function U(F){return F instanceof T?F:new T(function(ce){ce(F)})}return new(T||(T=Promise))(function(F,ce){function K(ie){try{$(L.next(ie))}catch(X){ce(X)}}function W(ie){try{$(L.throw(ie))}catch(X){ce(X)}}function $(ie){ie.done?F(ie.value):U(ie.value).then(K,W)}$((L=L.apply(A,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const d=i("../_osmFetch");function u(A,w,T){return p(this,void 0,void 0,function*(){yield(0,d.osmFetch)("/0.6/notes",{lat:A,lon:w,text:T})})}c.createNote=u;function b(A,w){return p(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/notes/${A}/comment`,{text:w})})}c.commentOnNote=b;function C(A,w){return p(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/notes/${A}/reopen`,{text:w})})}c.reopenNote=C},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function p(d){let u=!1;return new Promise((b,C)=>{const[A,w]=[600,550],T=Object.entries({width:A,height:w,left:window.screen.width/2-A/2,top:window.screen.height/2-w/2}).map(([F,ce])=>`${F}=${ce}`).join(","),L=window.open("about:blank","oauth_window",T);if(!L)throw new Error("Popup was blocked");L.location=d,window.authComplete=F=>{b(F),u=!0};const U=setInterval(()=>{L.closed&&(u||C(new Error("Cancelled")),clearInterval(U))},500)})}c.createPopup=p},{}],35:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,A,w){function T(L){return L instanceof A?L:new A(function(U){U(L)})}return new(A||(A=Promise))(function(L,U){function F(W){try{K(w.next(W))}catch($){U($)}}function ce(W){try{K(w.throw(W))}catch($){U($)}}function K(W){W.done?L(W.value):T(W.value).then(F,ce)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const d=i("./helpers");function u(b,{options:C,pkceVerifier:A,state:w}){return p(this,void 0,void 0,function*(){const T=new URL(b).searchParams,L=T.get("error_description"),U=T.get("code"),F=T.get("state");if(L)throw new Error(L);if(!U)throw new Error("No code in OAuth response");if(!A||!w)throw new Error("No login in progress");if(w!==F)throw new Error("State Mismatch");const ce={grant_type:"authorization_code",code:U,redirect_uri:C.redirectUrl,client_id:C.clientId,code_verifier:A},K=`${(0,d.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(ce).toString()}`,$=yield(yield fetch(K,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in $)throw new Error($.error_description);const ie={issuedAt:new Date($.created_at*1e3).toISOString(),accessToken:$.access_token,scopes:$.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(ie)),delete window.authComplete,ie})}c.exchangeCode=u},{"./helpers":36}],36:[function(i,a,c){var p=this&&this.__awaiter||function(A,w,T,L){function U(F){return F instanceof T?F:new T(function(ce){ce(F)})}return new(T||(T=Promise))(function(F,ce){function K(ie){try{$(L.next(ie))}catch(X){ce(X)}}function W(ie){try{$(L.throw(ie))}catch(X){ce(X)}}function $(ie){ie.done?F(ie.value):U(ie.value).then(K,W)}$((L=L.apply(A,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const d=i("../config");function u(A){return p(this,void 0,void 0,function*(){const w=new TextEncoder().encode(A),T=yield window.crypto.subtle.digest("SHA-256",w);return btoa(String.fromCharCode(...new Uint8Array(T))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}c.sha256=u;function b(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(A=>`0${A.toString(16)}`.slice(-2)).join("")}c.getRandomString=b;function C(){let A=(0,d.getConfig)().apiUrl;return A==="https://api.openstreetmap.org"&&(A="https://www.openstreetmap.org"),A}c.getOAuthBaseUrl=C},{"../config":39}],37:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,A){A===void 0&&(A=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,A,w)}:function(u,b,C,A){A===void 0&&(A=C),u[A]=b[C]}),d=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var p=this&&this.__awaiter||function(L,U,F,ce){function K(W){return W instanceof F?W:new F(function($){$(W)})}return new(F||(F=Promise))(function(W,$){function ie(E){try{V(ce.next(E))}catch(j){$(j)}}function X(E){try{V(ce.throw(E))}catch(j){$(j)}}function V(E){E.done?W(E.value):K(E.value).then(ie,X)}V((ce=ce.apply(L,U||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const d=i("./createPopup"),u=i("./exchangeCode"),b=i("./helpers");function C(L){return p(this,void 0,void 0,function*(){if(!L.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!L.clientId)throw new Error("You must include the 'clientId' option");if(!L.scopes)throw new Error("You must include the 'scopes' option");const U=(0,b.getRandomString)(),F=(0,b.getRandomString)(),ce=yield(0,b.sha256)(F),K={scope:L.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:U,redirect_uri:L.redirectUrl,client_id:L.clientId,code_challenge_method:"S256",code_challenge:ce},W=`${(0,b.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(K).toString()}`,$={state:U,pkceVerifier:F,options:L};if(L.mode==="popup"){const ie=yield(0,d.createPopup)(W);return(0,u.exchangeCode)(ie,$)}if(L.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify($)),window.location.replace(W);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=C,c.authReady=p(void 0,void 0,void 0,function*(){var L;if(typeof window>"u")return;const U=window.location.href,F=localStorage.getItem("__osmAuthTemp");if(new URL(U).searchParams.get("code")){if(!((L=window.opener)===null||L===void 0)&&L.authComplete)window.opener.authComplete(U),window.close();else if(F)try{const ce=JSON.parse(F);yield(0,u.exchangeCode)(U,ce),localStorage.removeItem("__osmAuthTemp")}catch(ce){console.error("OSM Auth Error",ce)}}});const A=()=>{try{const L=localStorage.getItem("__osmAuth");return L?JSON.parse(L).accessToken:void 0}catch{return}};c.getAuthToken=A;const w=()=>!!(0,c.getAuthToken)();c.isLoggedIn=w;function T(){localStorage.removeItem("__osmAuth")}c.logout=T},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const p={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},d=()=>p;c.getConfig=d;function u(b){Object.assign(p,b)}c.configure=u},{}],40:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,A){A===void 0&&(A=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,A,w)}:function(u,b,C,A){A===void 0&&(A=C),u[A]=b[C]}),d=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./api"),c),d(i("./auth"),c),d(i("./config"),c),d(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],42:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],43:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],44:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,A){A===void 0&&(A=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,A,w)}:function(u,b,C,A){A===void 0&&(A=C),u[A]=b[C]}),d=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),d(i("./changesets"),c),d(i("./features"),c),d(i("./general"),c),d(i("./notes"),c),d(i("./osmPatch"),c),d(i("./user"),c)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],46:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],47:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}]},{},[40])(40)})})(KC);var As=KC.exports;const YC=()=>{const[e,t]=_t.useState(!1);_t.useEffect(()=>{t(As.isLoggedIn())},[]);const i=_t.useCallback(()=>{(async()=>(await As.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(As.isLoggedIn()),window.location.reload()))()},[]),a=_t.useCallback(()=>{(async()=>(As.logout(),t(!1)))()},[]);return yt.jsx(yt.Fragment,{children:e?yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},TR=()=>{const[e,t]=_t.useState(!1),[i,a]=_t.useState(void 0);return _t.useEffect(()=>{t(As.isLoggedIn())},[]),_t.useEffect(()=>{e&&(async()=>{const c=await As.getUser("me");a(c)})()},[e]),yt.jsx(yt.Fragment,{children:i?yt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):yt.jsx("img",{})})},CR=()=>{const[e,t]=_t.useState(!1),[i,a]=_t.useState(void 0);return _t.useEffect(()=>{t(As.isLoggedIn())},[]),_t.useEffect(()=>{e&&(async()=>{const c=await As.getUser("me");a(c)})()},[e]),yt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[yt.jsxs("div",{children:[yt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?yt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):yt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),yt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[yt.jsx("div",{children:yt.jsx(TR,{})}),yt.jsx("div",{children:yt.jsx(YC,{})})]})]})},JC=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return yt.jsxs(yt.Fragment,{children:[yt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",yt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},IR=({feature:e})=>yt.jsx(yt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return yt.jsxs("div",{className:t,children:[yt.jsx("span",{className:"underline",children:t})," = ",yt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function Gd(e,t,i){return parseInt(e.substr(t,i),16)}function QC(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function z0(e,t,i){return i=i<0?i+6:i>6?i-6:i,QC(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function AR(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],p=e[3],d=e[4]||"";t="#"+a+a+c+c+p+p+d+d}return(i==7||i>8)&&(t=e),t}}function PR(e,t,i){let a;if(t==0){const c=QC(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,p=i*2-c;a=z0(p,c,e*6+2)+z0(p,c,e*6)+z0(p,c,e*6-2)}return"#"+a}function Dd(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,PR(e,t,i)}const kR=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},X2={V:"jdenticon_config",n:"config"};var MR={};function zR(e,t){const i=typeof e=="object"&&e||MR[X2.n]||kR[X2.V]||{},a=i.lightness||{},c=i.saturation||{},p="color"in c?c.color:c,d=c.grayscale,u=i.backColor,b=i.padding;function C(w,T){let L=a[w];return L&&L.length>1||(L=T),function(U){return U=L[0]+U*(L[1]-L[0]),U<0?0:U>1?1:U}}function A(w){const T=i.hues;let L;return T&&T.length>0&&(L=T[0|.999*w*T.length]),typeof L=="number"?(L/360%1+1)%1:w}return{W:A,o:typeof p=="number"?p:.5,D:typeof d=="number"?d:0,p:C("color",[.4,.8]),F:C("grayscale",[.3,.9]),G:AR(u),X:typeof e=="number"?e:typeof b=="number"?b:t}}let am=class{constructor(t,i){this.x=t,this.y=i}};class eI{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const p=this.q+this.H,d=this.t+this.H,u=this.Y;return u===1?new am(p-i-(c||0),this.t+t):u===2?new am(p-t-(a||0),d-i-(c||0)):u===3?new am(this.q+i,d-t-(a||0)):new am(this.q+t,this.t+i)}}const RR=new eI(0,0,0,0);class OR{constructor(t){this.J=t,this.u=RR}g(t,i){const a=i?-2:2,c=[];for(let p=i?t.length-2:0;p<t.length&&p>=0;p+=a)c.push(this.u.I(t[p],t[p+1]));this.J.g(c)}h(t,i,a,c){const p=this.u.I(t,i,a,a);this.J.h(p,a,c)}i(t,i,a,c,p){this.g([t,i,t+a,i,t+a,i+c,t,i+c],p)}j(t,i,a,c,p,d){const u=[t+a,i,t+a,i+c,t,i+c,t,i];u.splice((p||0)%4*2,2),this.g(u,d)}K(t,i,a,c,p){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],p)}}function LR(e,t,i,a){e=e%14;let c,p,d,u,b,C;e?e==1?(d=0|i*.5,u=0|i*.8,t.j(i-d,0,d,u,2)):e==2?(d=0|i/3,t.i(d,d,i-d,i-d)):e==3?(b=i*.1,C=i<6?1:i<8?2:0|i*.25,b=b>1?0|b:b>.5?1:b,t.i(C,C,i-b-C,i-b-C)):e==4?(p=0|i*.15,d=0|i*.5,t.h(i-d-p,i-d-p,d)):e==5?(b=i*.1,C=b*4,C>3&&(C=0|C),t.i(0,0,i,i),t.g([C,C,i-b,C,C+(i-C-b)/2,i-b],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(b=i*.14,C=i<4?1:i<6?2:0|i*.35,b=i<8?b:0|b,t.i(0,0,i,i),t.i(C,C,i-C-b,i-C-b,!0)):e==10?(b=i*.12,C=b*3,t.i(0,0,i,i),t.h(C,C,i-b-C,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(p=i*.25,t.i(0,0,i,i),t.K(p,p,i-p,i-p,!0)):!a&&(p=i*.4,d=i*1.2,t.h(p,p,d)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function q2(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function FR(e,t){return e=t.W(e),[Dd(e,t.D,t.F(0)),Dd(e,t.o,t.p(.5)),Dd(e,t.D,t.F(1)),Dd(e,t.o,t.p(1)),Dd(e,t.o,t.p(0))]}function jR(e,t,i){const a=zR(i,.08);a.G&&e.m(a.G);let c=e.k;const p=.5+c*a.X|0;c-=p*2;const d=new OR(e),u=0|c/4,b=0|p+c/2-u*2,C=0|p+c/2-u*2;function A(ce,K,W,$,ie){const X=Gd(t,W,1);let V=$?Gd(t,$,1):0;e.L(T[L[ce]]);for(let E=0;E<ie.length;E++)d.u=new eI(b+ie[E][0]*u,C+ie[E][1]*u,u,V++%4),K(X,d,u,E);e.M()}const w=Gd(t,-7)/268435455,T=FR(w,a),L=[];let U;function F(ce){if(ce.indexOf(U)>=0){for(let K=0;K<ce.length;K++)if(L.indexOf(ce[K])>=0)return!0}}for(let ce=0;ce<3;ce++)U=Gd(t,8+ce,1)%T.length,(F([0,4])||F([2,3]))&&(U=1),L.push(U);A(0,q2,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),A(1,q2,4,5,[[0,0],[3,0],[3,3],[0,3]]),A(2,LR,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function DR(e){var a=0,c=0,p=encodeURI(e)+"%80",d=[],u,b=[],C=1732584193,A=4023233417,w=~C,T=~A,L=3285377520,U=[C,A,w,T,L],F=0,ce="";function K(W,$){return W<<$|W>>>32-$}for(;a<p.length;c++)d[c>>2]=d[c>>2]|(p[a]=="%"?parseInt(p.substring(a+1,a+=3),16):p.charCodeAt(a++))<<(3-(c&3))*8;for(u=((c+7>>6)+1)*16,d[u-1]=c*8-8;F<u;F+=16){for(a=0;a<80;a++)c=K(C,5)+L+(a<20?(A&w^~A&T)+1518500249:a<40?(A^w^T)+1859775393:a<60?(A&w^A&T^w&T)+2400959708:(A^w^T)+3395469782)+(b[a]=a<16?d[F+a]|0:K(b[a-3]^b[a-8]^b[a-14]^b[a-16],1)),L=T,T=w,w=K(A,30),A=C,C=c;U[0]=C=U[0]+C|0,U[1]=A=U[1]+A|0,U[2]=w=U[2]+w|0,U[3]=T=U[3]+T|0,U[4]=L=U[4]+L|0}for(a=0;a<40;a++)ce+=(U[a>>3]>>>(7-(a&7))*4&15).toString(16);return ce}function BR(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function NR(e){return DR(e==null?"":""+e)}function $c(e){return(e*10+.5|0)/10}class UR{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+$c(t[a].x)+" "+$c(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,p=$c(i/2),d=$c(i),u="a"+p+","+p+" 0 1,"+c+" ";this.v+="M"+$c(t.x)+" "+$c(t.y+i/2)+u+d+",0"+u+-d+",0"}}class $R{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?Gd(i[2],0)/255:1;this.N.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new UR)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.N.O(i,t[i].v)}}const VR={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class GR{constructor(t){this.k=t,this.C='<svg xmlns="'+VR.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}O(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function HR(e,t,i){const a=new GR(t);return jR(new $R(a),BR(e)||NR(e),i),a.toString()}typeof document<"u"&&document.querySelectorAll.bind(document);const WR=({feature:e,size:t})=>e.properties===null?null:yt.jsx(yt.Fragment,{children:e.properties.userIconHref.length>0?yt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):yt.jsx("span",{dangerouslySetInnerHTML:{__html:HR(e.properties.user||"noname",t)}})}),ZR=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?yt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};var XR={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};const qR=({viewState:e})=>{const[t,i]=_t.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return _t.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),yt.jsx(yt.Fragment,{children:e&&t&&yt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[yt.jsx(ua,{icon:XR,style:{padding:"0px 3px"}}),yt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var tI={};class Vi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const p=i[c],d=t+p,u=Math.abs(t)<Math.abs(p)?t-(d-p):p-(d-t);u&&(i[a++]=u),t=d}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,p,d=0;if(i>0){for(d=t[--i];i>0&&(a=d,c=t[--i],d=a+c,p=c-(d-a),!p););i>0&&(p<0&&t[i-1]<0||p>0&&t[i-1]>0)&&(c=p*2,a=d+c,c==a-d&&(d=a))}return d}}function*KR(e){for(const t of e)yield*t}function nI(e){return Array.from(KR(e))}function ch(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,p=new Array(c);++a<c;)p[a]=e+a*i;return p}var fn=1e-6,Ff=1e-12,Fn=Math.PI,Dr=Fn/2,fg=Fn/4,ro=Fn*2,ur=180/Fn,pn=Fn/180,Vn=Math.abs,Bh=Math.atan,io=Math.atan2,on=Math.cos,lm=Math.ceil,rI=Math.exp,d_=Math.hypot,pg=Math.log,R0=Math.pow,Jt=Math.sin,as=Math.sign||function(e){return e>0?1:e<0?-1:0},pi=Math.sqrt,J1=Math.tan;function iI(e){return e>1?0:e<-1?Fn:Math.acos(e)}function oo(e){return e>1?Dr:e<-1?-Dr:Math.asin(e)}function K2(e){return(e=Jt(e/2))*e}function Ar(){}function mg(e,t){e&&J2.hasOwnProperty(e.type)&&J2[e.type](e,t)}var Y2={Feature:function(e,t){mg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)mg(i[a].geometry,t)}},J2={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){f_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)f_(i[a],t,0)},Polygon:function(e,t){Q2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)Q2(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)mg(i[a],t)}};function f_(e,t,i){var a=-1,c=e.length-i,p;for(t.lineStart();++a<c;)p=e[a],t.point(p[0],p[1],p[2]);t.lineEnd()}function Q2(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)f_(e[i],t,1);t.polygonEnd()}function Cs(e,t){e&&Y2.hasOwnProperty(e.type)?Y2[e.type](e,t):mg(e,t)}var gg=new Vi,yg=new Vi,oI,sI,p_,m_,g_,ca={point:Ar,lineStart:Ar,lineEnd:Ar,polygonStart:function(){gg=new Vi,ca.lineStart=YR,ca.lineEnd=JR},polygonEnd:function(){var e=+gg;yg.add(e<0?ro+e:e),this.lineStart=this.lineEnd=this.point=Ar},sphere:function(){yg.add(ro)}};function YR(){ca.point=QR}function JR(){aI(oI,sI)}function QR(e,t){ca.point=aI,oI=e,sI=t,e*=pn,t*=pn,p_=e,m_=on(t=t/2+fg),g_=Jt(t)}function aI(e,t){e*=pn,t*=pn,t=t/2+fg;var i=e-p_,a=i>=0?1:-1,c=a*i,p=on(t),d=Jt(t),u=g_*d,b=m_*p+u*on(c),C=u*a*Jt(c);gg.add(io(C,b)),p_=e,m_=p,g_=d}function eO(e){return yg=new Vi,Cs(e,ca),yg*2}function vg(e){return[io(e[1],e[0]),oo(e[2])]}function Qu(e){var t=e[0],i=e[1],a=on(i);return[a*on(t),a*Jt(t),Jt(i)]}function um(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function kh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function O0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function cm(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _g(e){var t=pi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Cr,go,Lr,Fo,Du,lI,uI,_h,uf,Vl,il,Wa={point:y_,lineStart:eS,lineEnd:tS,polygonStart:function(){Wa.point=hI,Wa.lineStart=tO,Wa.lineEnd=nO,uf=new Vi,ca.polygonStart()},polygonEnd:function(){ca.polygonEnd(),Wa.point=y_,Wa.lineStart=eS,Wa.lineEnd=tS,gg<0?(Cr=-(Lr=180),go=-(Fo=90)):uf>fn?Fo=90:uf<-fn&&(go=-90),il[0]=Cr,il[1]=Lr},sphere:function(){Cr=-(Lr=180),go=-(Fo=90)}};function y_(e,t){Vl.push(il=[Cr=e,Lr=e]),t<go&&(go=t),t>Fo&&(Fo=t)}function cI(e,t){var i=Qu([e*pn,t*pn]);if(_h){var a=kh(_h,i),c=[a[1],-a[0],0],p=kh(c,a);_g(p),p=vg(p);var d=e-Du,u=d>0?1:-1,b=p[0]*ur*u,C,A=Vn(d)>180;A^(u*Du<b&&b<u*e)?(C=p[1]*ur,C>Fo&&(Fo=C)):(b=(b+360)%360-180,A^(u*Du<b&&b<u*e)?(C=-p[1]*ur,C<go&&(go=C)):(t<go&&(go=t),t>Fo&&(Fo=t))),A?e<Du?Lo(Cr,e)>Lo(Cr,Lr)&&(Lr=e):Lo(e,Lr)>Lo(Cr,Lr)&&(Cr=e):Lr>=Cr?(e<Cr&&(Cr=e),e>Lr&&(Lr=e)):e>Du?Lo(Cr,e)>Lo(Cr,Lr)&&(Lr=e):Lo(e,Lr)>Lo(Cr,Lr)&&(Cr=e)}else Vl.push(il=[Cr=e,Lr=e]);t<go&&(go=t),t>Fo&&(Fo=t),_h=i,Du=e}function eS(){Wa.point=cI}function tS(){il[0]=Cr,il[1]=Lr,Wa.point=y_,_h=null}function hI(e,t){if(_h){var i=e-Du;uf.add(Vn(i)>180?i+(i>0?360:-360):i)}else lI=e,uI=t;ca.point(e,t),cI(e,t)}function tO(){ca.lineStart()}function nO(){hI(lI,uI),ca.lineEnd(),Vn(uf)>fn&&(Cr=-(Lr=180)),il[0]=Cr,il[1]=Lr,_h=null}function Lo(e,t){return(t-=e)<0?t+360:t}function rO(e,t){return e[0]-t[0]}function nS(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function iO(e){var t,i,a,c,p,d,u;if(Fo=Lr=-(Cr=go=1/0),Vl=[],Cs(e,Wa),i=Vl.length){for(Vl.sort(rO),t=1,a=Vl[0],p=[a];t<i;++t)c=Vl[t],nS(a,c[0])||nS(a,c[1])?(Lo(a[0],c[1])>Lo(a[0],a[1])&&(a[1]=c[1]),Lo(c[0],a[1])>Lo(a[0],a[1])&&(a[0]=c[0])):p.push(a=c);for(d=-1/0,i=p.length-1,t=0,a=p[i];t<=i;a=c,++t)c=p[t],(u=Lo(a[1],c[0]))>d&&(d=u,Cr=c[0],Lr=a[1])}return Vl=il=null,Cr===1/0||go===1/0?[[NaN,NaN],[NaN,NaN]]:[[Cr,go],[Lr,Fo]]}var Hd,xg,wg,bg,Sg,Eg,Tg,Cg,v_,__,x_,dI,fI,Qi,eo,to,Ps={sphere:Ar,point:Q1,lineStart:rS,lineEnd:iS,polygonStart:function(){Ps.lineStart=aO,Ps.lineEnd=lO},polygonEnd:function(){Ps.lineStart=rS,Ps.lineEnd=iS}};function Q1(e,t){e*=pn,t*=pn;var i=on(t);Yf(i*on(e),i*Jt(e),Jt(t))}function Yf(e,t,i){++Hd,wg+=(e-wg)/Hd,bg+=(t-bg)/Hd,Sg+=(i-Sg)/Hd}function rS(){Ps.point=oO}function oO(e,t){e*=pn,t*=pn;var i=on(t);Qi=i*on(e),eo=i*Jt(e),to=Jt(t),Ps.point=sO,Yf(Qi,eo,to)}function sO(e,t){e*=pn,t*=pn;var i=on(t),a=i*on(e),c=i*Jt(e),p=Jt(t),d=io(pi((d=eo*p-to*c)*d+(d=to*a-Qi*p)*d+(d=Qi*c-eo*a)*d),Qi*a+eo*c+to*p);xg+=d,Eg+=d*(Qi+(Qi=a)),Tg+=d*(eo+(eo=c)),Cg+=d*(to+(to=p)),Yf(Qi,eo,to)}function iS(){Ps.point=Q1}function aO(){Ps.point=uO}function lO(){pI(dI,fI),Ps.point=Q1}function uO(e,t){dI=e,fI=t,e*=pn,t*=pn,Ps.point=pI;var i=on(t);Qi=i*on(e),eo=i*Jt(e),to=Jt(t),Yf(Qi,eo,to)}function pI(e,t){e*=pn,t*=pn;var i=on(t),a=i*on(e),c=i*Jt(e),p=Jt(t),d=eo*p-to*c,u=to*a-Qi*p,b=Qi*c-eo*a,C=d_(d,u,b),A=oo(C),w=C&&-A/C;v_.add(w*d),__.add(w*u),x_.add(w*b),xg+=A,Eg+=A*(Qi+(Qi=a)),Tg+=A*(eo+(eo=c)),Cg+=A*(to+(to=p)),Yf(Qi,eo,to)}function cO(e){Hd=xg=wg=bg=Sg=Eg=Tg=Cg=0,v_=new Vi,__=new Vi,x_=new Vi,Cs(e,Ps);var t=+v_,i=+__,a=+x_,c=d_(t,i,a);return c<Ff&&(t=Eg,i=Tg,a=Cg,xg<fn&&(t=wg,i=bg,a=Sg),c=d_(t,i,a),c<Ff)?[NaN,NaN]:[io(i,t)*ur,oo(a/c)*ur]}function Vc(e){return function(){return e}}function w_(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function b_(e,t){return[Vn(e)>Fn?e+Math.round(-e/ro)*ro:e,t]}b_.invert=b_;function ex(e,t,i){return(e%=ro)?t||i?w_(sS(e),aS(t,i)):sS(e):t||i?aS(t,i):b_}function oS(e){return function(t,i){return t+=e,[t>Fn?t-ro:t<-Fn?t+ro:t,i]}}function sS(e){var t=oS(e);return t.invert=oS(-e),t}function aS(e,t){var i=on(e),a=Jt(e),c=on(t),p=Jt(t);function d(u,b){var C=on(b),A=on(u)*C,w=Jt(u)*C,T=Jt(b),L=T*i+A*a;return[io(w*c-L*p,A*i-T*a),oo(L*c+w*p)]}return d.invert=function(u,b){var C=on(b),A=on(u)*C,w=Jt(u)*C,T=Jt(b),L=T*c-w*p;return[io(w*c+T*p,A*i+L*a),oo(L*i-A*a)]},d}function mI(e){e=ex(e[0]*pn,e[1]*pn,e.length>2?e[2]*pn:0);function t(i){return i=e(i[0]*pn,i[1]*pn),i[0]*=ur,i[1]*=ur,i}return t.invert=function(i){return i=e.invert(i[0]*pn,i[1]*pn),i[0]*=ur,i[1]*=ur,i},t}function gI(e,t,i,a,c,p){if(i){var d=on(t),u=Jt(t),b=a*i;c==null?(c=t+a*ro,p=t-b/2):(c=lS(d,c),p=lS(d,p),(a>0?c<p:c>p)&&(c+=a*ro));for(var C,A=c;a>0?A>p:A<p;A-=b)C=vg([d,-u*on(A),-u*Jt(A)]),e.point(C[0],C[1])}}function lS(e,t){t=Qu(t),t[0]-=e,_g(t);var i=iI(-t[1]);return((-t[2]<0?-i:i)+ro-fn)%ro}function hO(){var e=Vc([0,0]),t=Vc(90),i=Vc(6),a,c,p={point:d};function d(b,C){a.push(b=c(b,C)),b[0]*=ur,b[1]*=ur}function u(){var b=e.apply(this,arguments),C=t.apply(this,arguments)*pn,A=i.apply(this,arguments)*pn;return a=[],c=ex(-b[0]*pn,-b[1]*pn,0).invert,gI(p,C,A,1),b={type:"Polygon",coordinates:[a]},a=c=null,b}return u.center=function(b){return arguments.length?(e=typeof b=="function"?b:Vc([+b[0],+b[1]]),u):e},u.radius=function(b){return arguments.length?(t=typeof b=="function"?b:Vc(+b),u):t},u.precision=function(b){return arguments.length?(i=typeof b=="function"?b:Vc(+b),u):i},u}function yI(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:Ar,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function Mm(e,t){return Vn(e[0]-t[0])<fn&&Vn(e[1]-t[1])<fn}function hm(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function vI(e,t,i,a,c){var p=[],d=[],u,b;if(e.forEach(function(U){if(!((F=U.length-1)<=0)){var F,ce=U[0],K=U[F],W;if(Mm(ce,K)){if(!ce[2]&&!K[2]){for(c.lineStart(),u=0;u<F;++u)c.point((ce=U[u])[0],ce[1]);c.lineEnd();return}K[0]+=2*fn}p.push(W=new hm(ce,U,null,!0)),d.push(W.o=new hm(ce,null,W,!1)),p.push(W=new hm(K,U,null,!1)),d.push(W.o=new hm(K,null,W,!0))}}),!!p.length){for(d.sort(t),uS(p),uS(d),u=0,b=d.length;u<b;++u)d[u].e=i=!i;for(var C=p[0],A,w;;){for(var T=C,L=!0;T.v;)if((T=T.n)===C)return;A=T.z,c.lineStart();do{if(T.v=T.o.v=!0,T.e){if(L)for(u=0,b=A.length;u<b;++u)c.point((w=A[u])[0],w[1]);else a(T.x,T.n.x,1,c);T=T.n}else{if(L)for(A=T.p.z,u=A.length-1;u>=0;--u)c.point((w=A[u])[0],w[1]);else a(T.x,T.p.x,-1,c);T=T.p}T=T.o,A=T.z,L=!L}while(!T.v);c.lineEnd()}}}function uS(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function L0(e){return Vn(e[0])<=Fn?e[0]:as(e[0])*((Vn(e[0])+Fn)%ro-Fn)}function _I(e,t){var i=L0(t),a=t[1],c=Jt(a),p=[Jt(i),-on(i),0],d=0,u=0,b=new Vi;c===1?a=Dr+fn:c===-1&&(a=-Dr-fn);for(var C=0,A=e.length;C<A;++C)if(T=(w=e[C]).length)for(var w,T,L=w[T-1],U=L0(L),F=L[1]/2+fg,ce=Jt(F),K=on(F),W=0;W<T;++W,U=ie,ce=V,K=E,L=$){var $=w[W],ie=L0($),X=$[1]/2+fg,V=Jt(X),E=on(X),j=ie-U,B=j>=0?1:-1,ee=B*j,q=ee>Fn,pe=ce*V;if(b.add(io(pe*B*Jt(ee),K*E+pe*on(ee))),d+=q?j+B*ro:j,q^U>=i^ie>=i){var _e=kh(Qu(L),Qu($));_g(_e);var de=kh(p,_e);_g(de);var oe=(q^j>=0?-1:1)*oo(de[2]);(a>oe||a===oe&&(_e[0]||_e[1]))&&(u+=q^j>=0?1:-1)}}return(d<-fn||d<fn&&b<-Ff)^u&1}function xI(e,t,i,a){return function(c){var p=t(c),d=yI(),u=t(d),b=!1,C,A,w,T={point:L,lineStart:F,lineEnd:ce,polygonStart:function(){T.point=K,T.lineStart=W,T.lineEnd=$,A=[],C=[]},polygonEnd:function(){T.point=L,T.lineStart=F,T.lineEnd=ce,A=nI(A);var ie=_I(C,a);A.length?(b||(c.polygonStart(),b=!0),vI(A,fO,ie,i,c)):ie&&(b||(c.polygonStart(),b=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),b&&(c.polygonEnd(),b=!1),A=C=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function L(ie,X){e(ie,X)&&c.point(ie,X)}function U(ie,X){p.point(ie,X)}function F(){T.point=U,p.lineStart()}function ce(){T.point=L,p.lineEnd()}function K(ie,X){w.push([ie,X]),u.point(ie,X)}function W(){u.lineStart(),w=[]}function $(){K(w[0][0],w[0][1]),u.lineEnd();var ie=u.clean(),X=d.result(),V,E=X.length,j,B,ee;if(w.pop(),C.push(w),w=null,!!E){if(ie&1){if(B=X[0],(j=B.length-1)>0){for(b||(c.polygonStart(),b=!0),c.lineStart(),V=0;V<j;++V)c.point((ee=B[V])[0],ee[1]);c.lineEnd()}return}E>1&&ie&2&&X.push(X.pop().concat(X.shift())),A.push(X.filter(dO))}}return T}}function dO(e){return e.length>1}function fO(e,t){return((e=e.x)[0]<0?e[1]-Dr-fn:Dr-e[1])-((t=t.x)[0]<0?t[1]-Dr-fn:Dr-t[1])}const S_=xI(function(){return!0},pO,gO,[-Fn,-Dr]);function pO(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(p,d){var u=p>0?Fn:-Fn,b=Vn(p-t);Vn(b-Fn)<fn?(e.point(t,i=(i+d)/2>0?Dr:-Dr),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),e.point(p,i),c=0):a!==u&&b>=Fn&&(Vn(t-a)<fn&&(t-=a*fn),Vn(p-u)<fn&&(p-=u*fn),i=mO(t,i,p,d),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),c=0),e.point(t=p,i=d),a=u},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function mO(e,t,i,a){var c,p,d=Jt(e-i);return Vn(d)>fn?Bh((Jt(t)*(p=on(a))*Jt(i)-Jt(a)*(c=on(t))*Jt(e))/(c*p*d)):(t+a)/2}function gO(e,t,i,a){var c;if(e==null)c=i*Dr,a.point(-Fn,c),a.point(0,c),a.point(Fn,c),a.point(Fn,0),a.point(Fn,-c),a.point(0,-c),a.point(-Fn,-c),a.point(-Fn,0),a.point(-Fn,c);else if(Vn(e[0]-t[0])>fn){var p=e[0]<t[0]?Fn:-Fn;c=i*p/2,a.point(-p,c),a.point(0,c),a.point(p,c)}else a.point(t[0],t[1])}function wI(e){var t=on(e),i=6*pn,a=t>0,c=Vn(t)>fn;function p(A,w,T,L){gI(L,e,i,T,A,w)}function d(A,w){return on(A)*on(w)>t}function u(A){var w,T,L,U,F;return{lineStart:function(){U=L=!1,F=1},point:function(ce,K){var W=[ce,K],$,ie=d(ce,K),X=a?ie?0:C(ce,K):ie?C(ce+(ce<0?Fn:-Fn),K):0;if(!w&&(U=L=ie)&&A.lineStart(),ie!==L&&($=b(w,W),(!$||Mm(w,$)||Mm(W,$))&&(W[2]=1)),ie!==L)F=0,ie?(A.lineStart(),$=b(W,w),A.point($[0],$[1])):($=b(w,W),A.point($[0],$[1],2),A.lineEnd()),w=$;else if(c&&w&&a^ie){var V;!(X&T)&&(V=b(W,w,!0))&&(F=0,a?(A.lineStart(),A.point(V[0][0],V[0][1]),A.point(V[1][0],V[1][1]),A.lineEnd()):(A.point(V[1][0],V[1][1]),A.lineEnd(),A.lineStart(),A.point(V[0][0],V[0][1],3)))}ie&&(!w||!Mm(w,W))&&A.point(W[0],W[1]),w=W,L=ie,T=X},lineEnd:function(){L&&A.lineEnd(),w=null},clean:function(){return F|(U&&L)<<1}}}function b(A,w,T){var L=Qu(A),U=Qu(w),F=[1,0,0],ce=kh(L,U),K=um(ce,ce),W=ce[0],$=K-W*W;if(!$)return!T&&A;var ie=t*K/$,X=-t*W/$,V=kh(F,ce),E=cm(F,ie),j=cm(ce,X);O0(E,j);var B=V,ee=um(E,B),q=um(B,B),pe=ee*ee-q*(um(E,E)-1);if(!(pe<0)){var _e=pi(pe),de=cm(B,(-ee-_e)/q);if(O0(de,E),de=vg(de),!T)return de;var oe=A[0],le=w[0],J=A[1],te=w[1],he;le<oe&&(he=oe,oe=le,le=he);var be=le-oe,Ee=Vn(be-Fn)<fn,Be=Ee||be<fn;if(!Ee&&te<J&&(he=J,J=te,te=he),Be?Ee?J+te>0^de[1]<(Vn(de[0]-oe)<fn?J:te):J<=de[1]&&de[1]<=te:be>Fn^(oe<=de[0]&&de[0]<=le)){var Pe=cm(B,(-ee+_e)/q);return O0(Pe,E),[de,vg(Pe)]}}}function C(A,w){var T=a?e:Fn-e,L=0;return A<-T?L|=1:A>T&&(L|=2),w<-T?L|=4:w>T&&(L|=8),L}return xI(d,u,p,a?[0,-e]:[-Fn,e-Fn])}function yO(e,t,i,a,c,p){var d=e[0],u=e[1],b=t[0],C=t[1],A=0,w=1,T=b-d,L=C-u,U;if(U=i-d,!(!T&&U>0)){if(U/=T,T<0){if(U<A)return;U<w&&(w=U)}else if(T>0){if(U>w)return;U>A&&(A=U)}if(U=c-d,!(!T&&U<0)){if(U/=T,T<0){if(U>w)return;U>A&&(A=U)}else if(T>0){if(U<A)return;U<w&&(w=U)}if(U=a-u,!(!L&&U>0)){if(U/=L,L<0){if(U<A)return;U<w&&(w=U)}else if(L>0){if(U>w)return;U>A&&(A=U)}if(U=p-u,!(!L&&U<0)){if(U/=L,L<0){if(U>w)return;U>A&&(A=U)}else if(L>0){if(U<A)return;U<w&&(w=U)}return A>0&&(e[0]=d+A*T,e[1]=u+A*L),w<1&&(t[0]=d+w*T,t[1]=u+w*L),!0}}}}}var Wd=1e9,dm=-Wd;function oy(e,t,i,a){function c(C,A){return e<=C&&C<=i&&t<=A&&A<=a}function p(C,A,w,T){var L=0,U=0;if(C==null||(L=d(C,w))!==(U=d(A,w))||b(C,A)<0^w>0)do T.point(L===0||L===3?e:i,L>1?a:t);while((L=(L+w+4)%4)!==U);else T.point(A[0],A[1])}function d(C,A){return Vn(C[0]-e)<fn?A>0?0:3:Vn(C[0]-i)<fn?A>0?2:1:Vn(C[1]-t)<fn?A>0?1:0:A>0?3:2}function u(C,A){return b(C.x,A.x)}function b(C,A){var w=d(C,1),T=d(A,1);return w!==T?w-T:w===0?A[1]-C[1]:w===1?C[0]-A[0]:w===2?C[1]-A[1]:A[0]-C[0]}return function(C){var A=C,w=yI(),T,L,U,F,ce,K,W,$,ie,X,V,E={point:j,lineStart:pe,lineEnd:_e,polygonStart:ee,polygonEnd:q};function j(oe,le){c(oe,le)&&A.point(oe,le)}function B(){for(var oe=0,le=0,J=L.length;le<J;++le)for(var te=L[le],he=1,be=te.length,Ee=te[0],Be,Pe,ze=Ee[0],We=Ee[1];he<be;++he)Be=ze,Pe=We,Ee=te[he],ze=Ee[0],We=Ee[1],Pe<=a?We>a&&(ze-Be)*(a-Pe)>(We-Pe)*(e-Be)&&++oe:We<=a&&(ze-Be)*(a-Pe)<(We-Pe)*(e-Be)&&--oe;return oe}function ee(){A=w,T=[],L=[],V=!0}function q(){var oe=B(),le=V&&oe,J=(T=nI(T)).length;(le||J)&&(C.polygonStart(),le&&(C.lineStart(),p(null,null,1,C),C.lineEnd()),J&&vI(T,u,oe,p,C),C.polygonEnd()),A=C,T=L=U=null}function pe(){E.point=de,L&&L.push(U=[]),X=!0,ie=!1,W=$=NaN}function _e(){T&&(de(F,ce),K&&ie&&w.rejoin(),T.push(w.result())),E.point=j,ie&&A.lineEnd()}function de(oe,le){var J=c(oe,le);if(L&&U.push([oe,le]),X)F=oe,ce=le,K=J,X=!1,J&&(A.lineStart(),A.point(oe,le));else if(J&&ie)A.point(oe,le);else{var te=[W=Math.max(dm,Math.min(Wd,W)),$=Math.max(dm,Math.min(Wd,$))],he=[oe=Math.max(dm,Math.min(Wd,oe)),le=Math.max(dm,Math.min(Wd,le))];yO(te,he,e,t,i,a)?(ie||(A.lineStart(),A.point(te[0],te[1])),A.point(he[0],he[1]),J||A.lineEnd(),V=!1):J&&(A.lineStart(),A.point(oe,le),V=!1)}W=oe,$=le,ie=J}return E}}function vO(){var e=0,t=0,i=960,a=500,c,p,d;return d={stream:function(u){return c&&p===u?c:c=oy(e,t,i,a)(p=u)},extent:function(u){return arguments.length?(e=+u[0][0],t=+u[0][1],i=+u[1][0],a=+u[1][1],c=p=null,d):[[e,t],[i,a]]}}}var E_,T_,zm,Rm,Mh={sphere:Ar,point:Ar,lineStart:_O,lineEnd:Ar,polygonStart:Ar,polygonEnd:Ar};function _O(){Mh.point=wO,Mh.lineEnd=xO}function xO(){Mh.point=Mh.lineEnd=Ar}function wO(e,t){e*=pn,t*=pn,T_=e,zm=Jt(t),Rm=on(t),Mh.point=bO}function bO(e,t){e*=pn,t*=pn;var i=Jt(t),a=on(t),c=Vn(e-T_),p=on(c),d=Jt(c),u=a*d,b=Rm*i-zm*a*p,C=zm*i+Rm*a*p;E_.add(io(pi(u*u+b*b),C)),T_=e,zm=i,Rm=a}function bI(e){return E_=new Vi,Cs(e,Mh),+E_}var C_=[null,null],SO={type:"LineString",coordinates:C_};function Ig(e,t){return C_[0]=e,C_[1]=t,bI(SO)}var cS={Feature:function(e,t){return Ag(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if(Ag(i[a].geometry,t))return!0;return!1}},hS={Sphere:function(){return!0},Point:function(e,t){return dS(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(dS(i[a],t))return!0;return!1},LineString:function(e,t){return fS(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(fS(i[a],t))return!0;return!1},Polygon:function(e,t){return pS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(pS(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if(Ag(i[a],t))return!0;return!1}};function Ag(e,t){return e&&hS.hasOwnProperty(e.type)?hS[e.type](e,t):!1}function dS(e,t){return Ig(e,t)===0}function fS(e,t){for(var i,a,c,p=0,d=e.length;p<d;p++){if(a=Ig(e[p],t),a===0||p>0&&(c=Ig(e[p],e[p-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<Ff*c))return!0;i=a}return!1}function pS(e,t){return!!_I(e.map(EO),SI(t))}function EO(e){return e=e.map(SI),e.pop(),e}function SI(e){return[e[0]*pn,e[1]*pn]}function TO(e,t){return(e&&cS.hasOwnProperty(e.type)?cS[e.type]:Ag)(e,t)}function mS(e,t,i){var a=ch(e,t-fn,i).concat(t);return function(c){return a.map(function(p){return[c,p]})}}function gS(e,t,i){var a=ch(e,t-fn,i).concat(t);return function(c){return a.map(function(p){return[p,c]})}}function EI(){var e,t,i,a,c,p,d,u,b=10,C=b,A=90,w=360,T,L,U,F,ce=2.5;function K(){return{type:"MultiLineString",coordinates:W()}}function W(){return ch(lm(a/A)*A,i,A).map(U).concat(ch(lm(u/w)*w,d,w).map(F)).concat(ch(lm(t/b)*b,e,b).filter(function($){return Vn($%A)>fn}).map(T)).concat(ch(lm(p/C)*C,c,C).filter(function($){return Vn($%w)>fn}).map(L))}return K.lines=function(){return W().map(function($){return{type:"LineString",coordinates:$}})},K.outline=function(){return{type:"Polygon",coordinates:[U(a).concat(F(d).slice(1),U(i).reverse().slice(1),F(u).reverse().slice(1))]}},K.extent=function($){return arguments.length?K.extentMajor($).extentMinor($):K.extentMinor()},K.extentMajor=function($){return arguments.length?(a=+$[0][0],i=+$[1][0],u=+$[0][1],d=+$[1][1],a>i&&($=a,a=i,i=$),u>d&&($=u,u=d,d=$),K.precision(ce)):[[a,u],[i,d]]},K.extentMinor=function($){return arguments.length?(t=+$[0][0],e=+$[1][0],p=+$[0][1],c=+$[1][1],t>e&&($=t,t=e,e=$),p>c&&($=p,p=c,c=$),K.precision(ce)):[[t,p],[e,c]]},K.step=function($){return arguments.length?K.stepMajor($).stepMinor($):K.stepMinor()},K.stepMajor=function($){return arguments.length?(A=+$[0],w=+$[1],K):[A,w]},K.stepMinor=function($){return arguments.length?(b=+$[0],C=+$[1],K):[b,C]},K.precision=function($){return arguments.length?(ce=+$,T=mS(p,c,90),L=gS(t,e,ce),U=mS(u,d,90),F=gS(a,i,ce),K):ce},K.extentMajor([[-180,-90+fn],[180,90-fn]]).extentMinor([[-180,-80-fn],[180,80+fn]])}function CO(){return EI()()}function IO(e,t){var i=e[0]*pn,a=e[1]*pn,c=t[0]*pn,p=t[1]*pn,d=on(a),u=Jt(a),b=on(p),C=Jt(p),A=d*on(i),w=d*Jt(i),T=b*on(c),L=b*Jt(c),U=2*oo(pi(K2(p-a)+d*b*K2(c-i))),F=Jt(U),ce=U?function(K){var W=Jt(K*=U)/F,$=Jt(U-K)/F,ie=$*A+W*T,X=$*w+W*L,V=$*u+W*C;return[io(X,ie)*ur,io(V,pi(ie*ie+X*X))*ur]}:function(){return[i*ur,a*ur]};return ce.distance=U,ce}const jf=e=>e;var F0=new Vi,I_=new Vi,TI,CI,A_,P_,Za={point:Ar,lineStart:Ar,lineEnd:Ar,polygonStart:function(){Za.lineStart=AO,Za.lineEnd=kO},polygonEnd:function(){Za.lineStart=Za.lineEnd=Za.point=Ar,F0.add(Vn(I_)),I_=new Vi},result:function(){var e=F0/2;return F0=new Vi,e}};function AO(){Za.point=PO}function PO(e,t){Za.point=II,TI=A_=e,CI=P_=t}function II(e,t){I_.add(P_*e-A_*t),A_=e,P_=t}function kO(){II(TI,CI)}var zh=1/0,Pg=zh,Df=-zh,kg=Df,Mg={point:MO,lineStart:Ar,lineEnd:Ar,polygonStart:Ar,polygonEnd:Ar,result:function(){var e=[[zh,Pg],[Df,kg]];return Df=kg=-(Pg=zh=1/0),e}};function MO(e,t){e<zh&&(zh=e),e>Df&&(Df=e),t<Pg&&(Pg=t),t>kg&&(kg=t)}var k_=0,M_=0,Zd=0,zg=0,Rg=0,hh=0,z_=0,R_=0,Xd=0,AI,PI,ra,ia,os={point:ec,lineStart:yS,lineEnd:vS,polygonStart:function(){os.lineStart=OO,os.lineEnd=LO},polygonEnd:function(){os.point=ec,os.lineStart=yS,os.lineEnd=vS},result:function(){var e=Xd?[z_/Xd,R_/Xd]:hh?[zg/hh,Rg/hh]:Zd?[k_/Zd,M_/Zd]:[NaN,NaN];return k_=M_=Zd=zg=Rg=hh=z_=R_=Xd=0,e}};function ec(e,t){k_+=e,M_+=t,++Zd}function yS(){os.point=zO}function zO(e,t){os.point=RO,ec(ra=e,ia=t)}function RO(e,t){var i=e-ra,a=t-ia,c=pi(i*i+a*a);zg+=c*(ra+e)/2,Rg+=c*(ia+t)/2,hh+=c,ec(ra=e,ia=t)}function vS(){os.point=ec}function OO(){os.point=FO}function LO(){kI(AI,PI)}function FO(e,t){os.point=kI,ec(AI=ra=e,PI=ia=t)}function kI(e,t){var i=e-ra,a=t-ia,c=pi(i*i+a*a);zg+=c*(ra+e)/2,Rg+=c*(ia+t)/2,hh+=c,c=ia*e-ra*t,z_+=c*(ra+e),R_+=c*(ia+t),Xd+=c*3,ec(ra=e,ia=t)}function MI(e){this._context=e}MI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ro);break}}},result:Ar};var O_=new Vi,j0,zI,RI,qd,Kd,Bf={point:Ar,lineStart:function(){Bf.point=jO},lineEnd:function(){j0&&OI(zI,RI),Bf.point=Ar},polygonStart:function(){j0=!0},polygonEnd:function(){j0=null},result:function(){var e=+O_;return O_=new Vi,e}};function jO(e,t){Bf.point=OI,zI=qd=e,RI=Kd=t}function OI(e,t){qd-=e,Kd-=t,O_.add(pi(qd*qd+Kd*Kd)),qd=e,Kd=t}function LI(){this._string=[]}LI.prototype={_radius:4.5,_circle:_S(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=_S(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function _S(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function DO(e,t){var i=4.5,a,c;function p(d){return d&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),Cs(d,a(c))),c.result()}return p.area=function(d){return Cs(d,a(Za)),Za.result()},p.measure=function(d){return Cs(d,a(Bf)),Bf.result()},p.bounds=function(d){return Cs(d,a(Mg)),Mg.result()},p.centroid=function(d){return Cs(d,a(os)),os.result()},p.projection=function(d){return arguments.length?(a=d==null?(e=null,jf):(e=d).stream,p):e},p.context=function(d){return arguments.length?(c=d==null?(t=null,new LI):new MI(t=d),typeof i!="function"&&c.pointRadius(i),p):t},p.pointRadius=function(d){return arguments.length?(i=typeof d=="function"?d:(c.pointRadius(+d),+d),p):i},p.projection(e).context(t)}function BO(e){return{stream:Jf(e)}}function Jf(e){return function(t){var i=new L_;for(var a in e)i[a]=e[a];return i.stream=t,i}}function L_(){}L_.prototype={constructor:L_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function tx(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),Cs(i,e.stream(Mg)),t(Mg.result()),a!=null&&e.clipExtent(a),e}function sy(e,t,i){return tx(e,function(a){var c=t[1][0]-t[0][0],p=t[1][1]-t[0][1],d=Math.min(c/(a[1][0]-a[0][0]),p/(a[1][1]-a[0][1])),u=+t[0][0]+(c-d*(a[1][0]+a[0][0]))/2,b=+t[0][1]+(p-d*(a[1][1]+a[0][1]))/2;e.scale(150*d).translate([u,b])},i)}function nx(e,t,i){return sy(e,[[0,0],t],i)}function rx(e,t,i){return tx(e,function(a){var c=+t,p=c/(a[1][0]-a[0][0]),d=(c-p*(a[1][0]+a[0][0]))/2,u=-p*a[0][1];e.scale(150*p).translate([d,u])},i)}function ix(e,t,i){return tx(e,function(a){var c=+t,p=c/(a[1][1]-a[0][1]),d=-p*a[0][0],u=(c-p*(a[1][1]+a[0][1]))/2;e.scale(150*p).translate([d,u])},i)}var xS=16,NO=on(30*pn);function wS(e,t){return+t?$O(e,t):UO(e)}function UO(e){return Jf({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function $O(e,t){function i(a,c,p,d,u,b,C,A,w,T,L,U,F,ce){var K=C-a,W=A-c,$=K*K+W*W;if($>4*t&&F--){var ie=d+T,X=u+L,V=b+U,E=pi(ie*ie+X*X+V*V),j=oo(V/=E),B=Vn(Vn(V)-1)<fn||Vn(p-w)<fn?(p+w)/2:io(X,ie),ee=e(B,j),q=ee[0],pe=ee[1],_e=q-a,de=pe-c,oe=W*_e-K*de;(oe*oe/$>t||Vn((K*_e+W*de)/$-.5)>.3||d*T+u*L+b*U<NO)&&(i(a,c,p,d,u,b,q,pe,B,ie/=E,X/=E,V,F,ce),ce.point(q,pe),i(q,pe,B,ie,X,V,C,A,w,T,L,U,F,ce))}}return function(a){var c,p,d,u,b,C,A,w,T,L,U,F,ce={point:K,lineStart:W,lineEnd:ie,polygonStart:function(){a.polygonStart(),ce.lineStart=X},polygonEnd:function(){a.polygonEnd(),ce.lineStart=W}};function K(j,B){j=e(j,B),a.point(j[0],j[1])}function W(){w=NaN,ce.point=$,a.lineStart()}function $(j,B){var ee=Qu([j,B]),q=e(j,B);i(w,T,A,L,U,F,w=q[0],T=q[1],A=j,L=ee[0],U=ee[1],F=ee[2],xS,a),a.point(w,T)}function ie(){ce.point=K,a.lineEnd()}function X(){W(),ce.point=V,ce.lineEnd=E}function V(j,B){$(c=j,B),p=w,d=T,u=L,b=U,C=F,ce.point=$}function E(){i(w,T,A,L,U,F,p,d,c,u,b,C,xS,a),ce.lineEnd=ie,ie()}return ce}}var VO=Jf({point:function(e,t){this.stream.point(e*pn,t*pn)}});function GO(e){return Jf({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function HO(e,t,i,a,c){function p(d,u){return d*=a,u*=c,[t+e*d,i-e*u]}return p.invert=function(d,u){return[(d-t)/e*a,(i-u)/e*c]},p}function bS(e,t,i,a,c,p){if(!p)return HO(e,t,i,a,c);var d=on(p),u=Jt(p),b=d*e,C=u*e,A=d/e,w=u/e,T=(u*i-d*t)/e,L=(u*t+d*i)/e;function U(F,ce){return F*=a,ce*=c,[b*F-C*ce+t,i-C*F-b*ce]}return U.invert=function(F,ce){return[a*(A*F-w*ce+T),c*(L-w*F-A*ce)]},U}function ha(e){return ox(function(){return e})()}function ox(e){var t,i=150,a=480,c=250,p=0,d=0,u=0,b=0,C=0,A,w=0,T=1,L=1,U=null,F=S_,ce=null,K,W,$,ie=jf,X=.5,V,E,j,B,ee;function q(oe){return j(oe[0]*pn,oe[1]*pn)}function pe(oe){return oe=j.invert(oe[0],oe[1]),oe&&[oe[0]*ur,oe[1]*ur]}q.stream=function(oe){return B&&ee===oe?B:B=VO(GO(A)(F(V(ie(ee=oe)))))},q.preclip=function(oe){return arguments.length?(F=oe,U=void 0,de()):F},q.postclip=function(oe){return arguments.length?(ie=oe,ce=K=W=$=null,de()):ie},q.clipAngle=function(oe){return arguments.length?(F=+oe?wI(U=oe*pn):(U=null,S_),de()):U*ur},q.clipExtent=function(oe){return arguments.length?(ie=oe==null?(ce=K=W=$=null,jf):oy(ce=+oe[0][0],K=+oe[0][1],W=+oe[1][0],$=+oe[1][1]),de()):ce==null?null:[[ce,K],[W,$]]},q.scale=function(oe){return arguments.length?(i=+oe,_e()):i},q.translate=function(oe){return arguments.length?(a=+oe[0],c=+oe[1],_e()):[a,c]},q.center=function(oe){return arguments.length?(p=oe[0]%360*pn,d=oe[1]%360*pn,_e()):[p*ur,d*ur]},q.rotate=function(oe){return arguments.length?(u=oe[0]%360*pn,b=oe[1]%360*pn,C=oe.length>2?oe[2]%360*pn:0,_e()):[u*ur,b*ur,C*ur]},q.angle=function(oe){return arguments.length?(w=oe%360*pn,_e()):w*ur},q.reflectX=function(oe){return arguments.length?(T=oe?-1:1,_e()):T<0},q.reflectY=function(oe){return arguments.length?(L=oe?-1:1,_e()):L<0},q.precision=function(oe){return arguments.length?(V=wS(E,X=oe*oe),de()):pi(X)},q.fitExtent=function(oe,le){return sy(q,oe,le)},q.fitSize=function(oe,le){return nx(q,oe,le)},q.fitWidth=function(oe,le){return rx(q,oe,le)},q.fitHeight=function(oe,le){return ix(q,oe,le)};function _e(){var oe=bS(i,0,0,T,L,w).apply(null,t(p,d)),le=bS(i,a-oe[0],c-oe[1],T,L,w);return A=ex(u,b,C),E=w_(t,le),j=w_(A,E),V=wS(E,X),de()}function de(){return B=ee=null,q}return function(){return t=e.apply(this,arguments),q.invert=t.invert&&pe,_e()}}function sx(e){var t=0,i=Fn/3,a=ox(e),c=a(t,i);return c.parallels=function(p){return arguments.length?a(t=p[0]*pn,i=p[1]*pn):[t*ur,i*ur]},c}function WO(e){var t=on(e);function i(a,c){return[a*t,Jt(c)/t]}return i.invert=function(a,c){return[a/t,oo(c*t)]},i}function FI(e,t){var i=Jt(e),a=(i+Jt(t))/2;if(Vn(a)<fn)return WO(e);var c=1+i*(2*a-i),p=pi(c)/a;function d(u,b){var C=pi(c-2*a*Jt(b))/a;return[C*Jt(u*=a),p-C*on(u)]}return d.invert=function(u,b){var C=p-b,A=io(u,Vn(C))*as(C);return C*a<0&&(A-=Fn*as(u)*as(C)),[A/a,oo((c-(u*u+C*C)*a*a)/(2*a))]},d}function Og(){return sx(FI).scale(155.424).center([0,33.6442])}function jI(){return Og().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ZO(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function XO(){var e,t,i=jI(),a,c=Og().rotate([154,0]).center([-2,58.5]).parallels([55,65]),p,d=Og().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,b,C={point:function(T,L){b=[T,L]}};function A(T){var L=T[0],U=T[1];return b=null,a.point(L,U),b||(p.point(L,U),b)||(u.point(L,U),b)}A.invert=function(T){var L=i.scale(),U=i.translate(),F=(T[0]-U[0])/L,ce=(T[1]-U[1])/L;return(ce>=.12&&ce<.234&&F>=-.425&&F<-.214?c:ce>=.166&&ce<.234&&F>=-.214&&F<-.115?d:i).invert(T)},A.stream=function(T){return e&&t===T?e:e=ZO([i.stream(t=T),c.stream(T),d.stream(T)])},A.precision=function(T){return arguments.length?(i.precision(T),c.precision(T),d.precision(T),w()):i.precision()},A.scale=function(T){return arguments.length?(i.scale(T),c.scale(T*.35),d.scale(T),A.translate(i.translate())):i.scale()},A.translate=function(T){if(!arguments.length)return i.translate();var L=i.scale(),U=+T[0],F=+T[1];return a=i.translate(T).clipExtent([[U-.455*L,F-.238*L],[U+.455*L,F+.238*L]]).stream(C),p=c.translate([U-.307*L,F+.201*L]).clipExtent([[U-.425*L+fn,F+.12*L+fn],[U-.214*L-fn,F+.234*L-fn]]).stream(C),u=d.translate([U-.205*L,F+.212*L]).clipExtent([[U-.214*L+fn,F+.166*L+fn],[U-.115*L-fn,F+.234*L-fn]]).stream(C),w()},A.fitExtent=function(T,L){return sy(A,T,L)},A.fitSize=function(T,L){return nx(A,T,L)},A.fitWidth=function(T,L){return rx(A,T,L)},A.fitHeight=function(T,L){return ix(A,T,L)};function w(){return e=t=null,A}return A.scale(1070)}function DI(e){return function(t,i){var a=on(t),c=on(i),p=e(a*c);return p===1/0?[2,0]:[p*c*Jt(t),p*Jt(i)]}}function Qf(e){return function(t,i){var a=pi(t*t+i*i),c=e(a),p=Jt(c),d=on(c);return[io(t*p,a*d),oo(a&&i*p/a)]}}var ax=DI(function(e){return pi(2/(1+e))});ax.invert=Qf(function(e){return 2*oo(e/2)});function qO(){return ha(ax).scale(124.75).clipAngle(180-.001)}var lx=DI(function(e){return(e=iI(e))&&e/Jt(e)});lx.invert=Qf(function(e){return e});function KO(){return ha(lx).scale(79.4188).clipAngle(180-.001)}function ep(e,t){return[e,pg(J1((Dr+t)/2))]}ep.invert=function(e,t){return[e,2*Bh(rI(t))-Dr]};function YO(){return BI(ep).scale(961/ro)}function BI(e){var t=ha(e),i=t.center,a=t.scale,c=t.translate,p=t.clipExtent,d=null,u,b,C;t.scale=function(w){return arguments.length?(a(w),A()):a()},t.translate=function(w){return arguments.length?(c(w),A()):c()},t.center=function(w){return arguments.length?(i(w),A()):i()},t.clipExtent=function(w){return arguments.length?(w==null?d=u=b=C=null:(d=+w[0][0],u=+w[0][1],b=+w[1][0],C=+w[1][1]),A()):d==null?null:[[d,u],[b,C]]};function A(){var w=Fn*a(),T=t(mI(t.rotate()).invert([0,0]));return p(d==null?[[T[0]-w,T[1]-w],[T[0]+w,T[1]+w]]:e===ep?[[Math.max(T[0]-w,d),u],[Math.min(T[0]+w,b),C]]:[[d,Math.max(T[1]-w,u)],[b,Math.min(T[1]+w,C)]])}return A()}function fm(e){return J1((Dr+e)/2)}function NI(e,t){var i=on(e),a=e===t?Jt(e):pg(i/on(t))/pg(fm(t)/fm(e)),c=i*R0(fm(e),a)/a;if(!a)return ep;function p(d,u){c>0?u<-Dr+fn&&(u=-Dr+fn):u>Dr-fn&&(u=Dr-fn);var b=c/R0(fm(u),a);return[b*Jt(a*d),c-b*on(a*d)]}return p.invert=function(d,u){var b=c-u,C=as(a)*pi(d*d+b*b),A=io(d,Vn(b))*as(b);return b*a<0&&(A-=Fn*as(d)*as(b)),[A/a,2*Bh(R0(c/C,1/a))-Dr]},p}function JO(){return sx(NI).scale(109.5).parallels([30,30])}function Nf(e,t){return[e,t]}Nf.invert=Nf;function QO(){return ha(Nf).scale(152.63)}function UI(e,t){var i=on(e),a=e===t?Jt(e):(i-on(t))/(t-e),c=i/a+e;if(Vn(a)<fn)return Nf;function p(d,u){var b=c-u,C=a*d;return[b*Jt(C),c-b*on(C)]}return p.invert=function(d,u){var b=c-u,C=io(d,Vn(b))*as(b);return b*a<0&&(C-=Fn*as(d)*as(b)),[C/a,c-as(a)*pi(d*d+b*b)]},p}function eL(){return sx(UI).scale(131.154).center([0,13.9389])}var cf=1.340264,hf=-.081106,df=893e-6,ff=.003796,Lg=pi(3)/2,tL=12;function ux(e,t){var i=oo(Lg*Jt(t)),a=i*i,c=a*a*a;return[e*on(i)/(Lg*(cf+3*hf*a+c*(7*df+9*ff*a))),i*(cf+hf*a+c*(df+ff*a))]}ux.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,p=0,d,u,b;p<tL&&(u=i*(cf+hf*a+c*(df+ff*a))-t,b=cf+3*hf*a+c*(7*df+9*ff*a),i-=d=u/b,a=i*i,c=a*a*a,!(Vn(d)<Ff));++p);return[Lg*e*(cf+3*hf*a+c*(7*df+9*ff*a))/on(i),oo(Jt(i)/Lg)]};function nL(){return ha(ux).scale(177.158)}function cx(e,t){var i=on(t),a=on(e)*i;return[i*Jt(e)/a,Jt(t)/a]}cx.invert=Qf(Bh);function rL(){return ha(cx).scale(144.049).clipAngle(60)}function iL(){var e=1,t=0,i=0,a=1,c=1,p=0,d,u,b=null,C,A,w,T=1,L=1,U=Jf({point:function(ie,X){var V=$([ie,X]);this.stream.point(V[0],V[1])}}),F=jf,ce,K;function W(){return T=e*a,L=e*c,ce=K=null,$}function $(ie){var X=ie[0]*T,V=ie[1]*L;if(p){var E=V*d-X*u;X=X*d+V*u,V=E}return[X+t,V+i]}return $.invert=function(ie){var X=ie[0]-t,V=ie[1]-i;if(p){var E=V*d+X*u;X=X*d-V*u,V=E}return[X/T,V/L]},$.stream=function(ie){return ce&&K===ie?ce:ce=U(F(K=ie))},$.postclip=function(ie){return arguments.length?(F=ie,b=C=A=w=null,W()):F},$.clipExtent=function(ie){return arguments.length?(F=ie==null?(b=C=A=w=null,jf):oy(b=+ie[0][0],C=+ie[0][1],A=+ie[1][0],w=+ie[1][1]),W()):b==null?null:[[b,C],[A,w]]},$.scale=function(ie){return arguments.length?(e=+ie,W()):e},$.translate=function(ie){return arguments.length?(t=+ie[0],i=+ie[1],W()):[t,i]},$.angle=function(ie){return arguments.length?(p=ie%360*pn,u=Jt(p),d=on(p),W()):p*ur},$.reflectX=function(ie){return arguments.length?(a=ie?-1:1,W()):a<0},$.reflectY=function(ie){return arguments.length?(c=ie?-1:1,W()):c<0},$.fitExtent=function(ie,X){return sy($,ie,X)},$.fitSize=function(ie,X){return nx($,ie,X)},$.fitWidth=function(ie,X){return rx($,ie,X)},$.fitHeight=function(ie,X){return ix($,ie,X)},$}function hx(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}hx.invert=function(e,t){var i=t,a=25,c;do{var p=i*i,d=p*p;i-=c=(i*(1.007226+p*(.015085+d*(-.044475+.028874*p-.005916*d)))-t)/(1.007226+p*(.015085*3+d*(-.044475*7+.028874*9*p-.005916*11*d)))}while(Vn(c)>fn&&--a>0);return[e/(.8707+(p=i*i)*(-.131979+p*(-.013791+p*p*p*(.003971-.001529*p)))),i]};function oL(){return ha(hx).scale(175.295)}function dx(e,t){return[on(t)*Jt(e),Jt(t)]}dx.invert=Qf(oo);function sL(){return ha(dx).scale(249.5).clipAngle(90+fn)}function fx(e,t){var i=on(t),a=1+on(e)*i;return[i*Jt(e)/a,Jt(t)/a]}fx.invert=Qf(function(e){return 2*Bh(e)});function aL(){return ha(fx).scale(250).clipAngle(142)}function px(e,t){return[pg(J1((Dr+t)/2)),-e]}px.invert=function(e,t){return[-t,2*Bh(rI(e))-Dr]};function lL(){var e=BI(px),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const uL=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:jI,geoAlbersUsa:XO,geoArea:eO,geoAzimuthalEqualArea:qO,geoAzimuthalEqualAreaRaw:ax,geoAzimuthalEquidistant:KO,geoAzimuthalEquidistantRaw:lx,geoBounds:iO,geoCentroid:cO,geoCircle:hO,geoClipAntimeridian:S_,geoClipCircle:wI,geoClipExtent:vO,geoClipRectangle:oy,geoConicConformal:JO,geoConicConformalRaw:NI,geoConicEqualArea:Og,geoConicEqualAreaRaw:FI,geoConicEquidistant:eL,geoConicEquidistantRaw:UI,geoContains:TO,geoDistance:Ig,geoEqualEarth:nL,geoEqualEarthRaw:ux,geoEquirectangular:QO,geoEquirectangularRaw:Nf,geoGnomonic:rL,geoGnomonicRaw:cx,geoGraticule:EI,geoGraticule10:CO,geoIdentity:iL,geoInterpolate:IO,geoLength:bI,geoMercator:YO,geoMercatorRaw:ep,geoNaturalEarth1:oL,geoNaturalEarth1Raw:hx,geoOrthographic:sL,geoOrthographicRaw:dx,geoPath:DO,geoProjection:ha,geoProjectionMutator:ox,geoRotation:mI,geoStereographic:aL,geoStereographicRaw:fx,geoStream:Cs,geoTransform:BO,geoTransverseMercator:lL,geoTransverseMercatorRaw:px},Symbol.toStringTag,{value:"Module"})),cL=$_(uL);var uu=2*Math.PI*6378137/2,hL=Math.PI/180;function $I(e){return e=e||256,2*Math.PI*6378137/e}function dL(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function F_(e,t,i){var a=VI(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function VI(e,t,i){var a=t,c=bx(e[0]),p=wx(e[1]),d=Math.sin(p*hL),u=Math.pow(2,a),b=u*(c/360+.5),C=u*(.5-.25*Math.log((1+d)/(1-d))/Math.PI);return ic([b,C,a],i)}function fL(e,t=6){var i=e[0],a=e[1],c=e[2],p=e[3],d=(i-c)/2+c,u=(a-p)/2+p;return t!=null&&(d=Number(d.toFixed(t)),u=Number(u.toFixed(t))),[d,u]}function Fg(e,t,i={enable:!0,decimal:1}){e=ay(e,t);var a=e[0],c=e[1],p=a*uu/180,d=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return d=d*uu/180,i.enable&&(p=Number(p.toFixed(i.decimal)),d=Number(d.toFixed(i.decimal))),[p,d]}function j_(e,t=6){var i=e[0],a=e[1],c=i/uu*180,p=a/uu*180;return p=180/Math.PI*(2*Math.atan(Math.exp(p*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),p=Number(p.toFixed(t))),[c,p]}function mx(e,t,i){var a=e[0],c=e[1],p=_x(t,i),d=(a+uu)/p,u=(c+uu)/p;return[d,u,t]}function GI(e,t,i){e=ay(e,i);var a=Fg(e),c=mx(a,t);return gx(c)}function pL(e,t,i){if(e=ay(e,i),t===0)return[0,0,0];var a=GI(e,t);return WI(a)}function mL(e,t){if(t===0)return[0,0,0];var i=mx(e,t);return gx(i)}function D_(e,t,i=1){var a=e[0],c=e[1],p=e[2],d=_x(p,t),u=a*d-uu,b=c*d-uu;return i!=null&&(u=Number(u.toFixed(i)),b=Number(b.toFixed(i))),[u,b]}function gx(e,t,i){t=t||256;var a=e[0],c=e[1],p=e[2];if(p===0)return[0,0,0];vx(p);var d=Math.ceil(a/t)-1,u=Math.ceil(c/t)-1;return d<0&&(d=0),u<0&&(u=0),[d,u,p]}function yx(e,t,i){ic(e,i),t=t||256;var a=e[0],c=e[1],p=e[2],d=D_([a*t,c*t,p]),u=D_([(a+1)*t,(c+1)*t,p]);return[d[0],d[1],u[0],u[1]]}function HI(e,t){ic(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var p=yx([i,a,c]),d=p[0],u=p[1],b=p[2],C=p[3],A=j_([d,u,c]),w=j_([b,C,c]);return[A[0],A[1],w[0],w[1]]}function gL(e){var t=tp(e);return yx(t)}function yL(e){var t=tp(e);return HI(t)}function WI(e,t){ic(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var p=i,d=Math.pow(2,c)-1-a;return[p,d,c]}function tp(e){var t=e[0],i=e[1],a=e[2],c=t,p=Math.pow(2,a)-i-1;return[c,p,a]}function vL(e){var t=tp(e);return ZI(t)}function ZI(e,t){ic(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var p="";return a=Math.pow(2,c)-1-a,xx(c,0,-1).map(function(d){var u=0,b=1<<d-1;i&b&&(u+=1),a&b&&(u+=2),p=p.concat(u)}),p}function _L(e){var t=XI(e);return tp(t)}function XI(e){var t=0,i=0,a=e.length;return xx(a,0,-1).map(function(c){var p=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=p;break;case 2:i+=p;break;case 3:t+=p,i+=p;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function xL(e){var t=Fg([e[0],e[1]]),i=Fg([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function ic(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=vx(c),e=qI(e),e}function qI(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function vx(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function ay(e,t){if(t===!1)return e;var i=bx(e[0]),a=wx(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function _x(e,t){return $I(t)/Math.pow(2,e)}function xx(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),p=0;p<a;p++,e+=i)c[p]=e;return c}function wL(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(p){p[0]<t&&(t=p[0]),p[1]<i&&(i=p[1]),p[2]>a&&(a=p[2]),p[3]>c&&(c=p[3])}),[t,i,a,c]}}function bL(e){try{return ic(e),!0}catch{return!1}}function wx(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function bx(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function SL(e){var t=F_([e[0],e[1]],32),i=F_([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=EL(a);if(c===0)return[0,0,0];var p=a[0]>>>32-c,d=a[1]>>>32-c;return[p,d,c]}function EL(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const TL=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:fL,bboxToMeters:xL,bboxToTile:SL,googleToBBox:yL,googleToBBoxMeters:gL,googleToQuadkey:vL,googleToTile:tp,hash:dL,initialResolution:$I,latitude:wx,lngLatToGoogle:pL,lngLatToMeters:Fg,lngLatToTile:GI,longitude:bx,maxBBox:wL,metersToLngLat:j_,metersToPixels:mx,metersToTile:mL,pixelsToMeters:D_,pixelsToTile:gx,pointToTile:F_,pointToTileFraction:VI,quadkeyToGoogle:XI,quadkeyToTile:_L,range:xx,resolution:_x,tileToBBox:HI,tileToBBoxMeters:yx,tileToGoogle:WI,tileToQuadkey:ZI,validTile:bL,validateLngLat:ay,validateTile:ic,validateZoom:vx,wrapTile:qI},Symbol.toStringTag,{value:"Module"})),CL=$_(TL);var ly={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ly.read=function(e,t,i,a,c){var p,d,u=c*8-a-1,b=(1<<u)-1,C=b>>1,A=-7,w=i?c-1:0,T=i?-1:1,L=e[t+w];for(w+=T,p=L&(1<<-A)-1,L>>=-A,A+=u;A>0;p=p*256+e[t+w],w+=T,A-=8);for(d=p&(1<<-A)-1,p>>=-A,A+=a;A>0;d=d*256+e[t+w],w+=T,A-=8);if(p===0)p=1-C;else{if(p===b)return d?NaN:(L?-1:1)*(1/0);d=d+Math.pow(2,a),p=p-C}return(L?-1:1)*d*Math.pow(2,p-a)};ly.write=function(e,t,i,a,c,p){var d,u,b,C=p*8-c-1,A=(1<<C)-1,w=A>>1,T=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=a?0:p-1,U=a?1:-1,F=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,d=A):(d=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-d))<1&&(d--,b*=2),d+w>=1?t+=T/b:t+=T*Math.pow(2,1-w),t*b>=2&&(d++,b/=2),d+w>=A?(u=0,d=A):d+w>=1?(u=(t*b-1)*Math.pow(2,c),d=d+w):(u=t*Math.pow(2,w-1)*Math.pow(2,c),d=0));c>=8;e[i+L]=u&255,L+=U,u/=256,c-=8);for(d=d<<c|u,C+=c;C>0;e[i+L]=d&255,L+=U,d/=256,C-=8);e[i+L-U]|=F*128};var IL=Kn,pm=ly;function Kn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Kn.Varint=0;Kn.Fixed64=1;Kn.Bytes=2;Kn.Fixed32=5;var B_=65536*65536,SS=1/B_,AL=12,KI=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Kn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,p=this.pos;this.type=a&7,e(c,t,this),this.pos===p&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=mm(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=TS(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=mm(this.buf,this.pos)+mm(this.buf,this.pos+4)*B_;return this.pos+=8,e},readSFixed64:function(){var e=mm(this.buf,this.pos)+TS(this.buf,this.pos+4)*B_;return this.pos+=8,e},readFloat:function(){var e=pm.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=pm.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,PL(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=AL&&KI?VL(this.buf,t,e):$L(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Kn.Bytes)return e.push(this.readVarint(t));var i=Va(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Kn.Bytes)return e.push(this.readSVarint());var t=Va(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Kn.Bytes)return e.push(this.readBoolean());var t=Va(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Kn.Bytes)return e.push(this.readFloat());var t=Va(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Kn.Bytes)return e.push(this.readDouble());var t=Va(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Kn.Bytes)return e.push(this.readFixed32());var t=Va(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Kn.Bytes)return e.push(this.readSFixed32());var t=Va(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Kn.Bytes)return e.push(this.readFixed64());var t=Va(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Kn.Bytes)return e.push(this.readSFixed64());var t=Va(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Kn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Kn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Kn.Fixed32)this.pos+=4;else if(t===Kn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Hc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Hc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Hc(this.buf,e&-1,this.pos),Hc(this.buf,Math.floor(e*SS),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Hc(this.buf,e&-1,this.pos),Hc(this.buf,Math.floor(e*SS),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){kL(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=GL(this.buf,e,this.pos);var i=this.pos-t;i>=128&&ES(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),pm.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),pm.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&ES(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,Kn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,RL,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,OL,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,jL,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,LL,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,FL,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,DL,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,BL,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,NL,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,UL,t)},writeBytesField:function(e,t){this.writeTag(e,Kn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Kn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Kn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Kn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Kn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Kn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Kn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Kn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Kn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Kn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function PL(e,t,i){var a=i.buf,c,p;if(p=a[i.pos++],c=(p&112)>>4,p<128||(p=a[i.pos++],c|=(p&127)<<3,p<128)||(p=a[i.pos++],c|=(p&127)<<10,p<128)||(p=a[i.pos++],c|=(p&127)<<17,p<128)||(p=a[i.pos++],c|=(p&127)<<24,p<128)||(p=a[i.pos++],c|=(p&1)<<31,p<128))return Gc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Va(e){return e.type===Kn.Bytes?e.readVarint()+e.pos:e.pos+1}function Gc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function kL(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),ML(i,a,t),zL(a,t)}function ML(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function zL(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function ES(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function RL(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function OL(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function LL(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function FL(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function jL(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function DL(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function BL(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function NL(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function UL(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function mm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Hc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function TS(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function $L(e,t,i){for(var a="",c=t;c<i;){var p=e[c],d=null,u=p>239?4:p>223?3:p>191?2:1;if(c+u>i)break;var b,C,A;u===1?p<128&&(d=p):u===2?(b=e[c+1],(b&192)===128&&(d=(p&31)<<6|b&63,d<=127&&(d=null))):u===3?(b=e[c+1],C=e[c+2],(b&192)===128&&(C&192)===128&&(d=(p&15)<<12|(b&63)<<6|C&63,(d<=2047||d>=55296&&d<=57343)&&(d=null))):u===4&&(b=e[c+1],C=e[c+2],A=e[c+3],(b&192)===128&&(C&192)===128&&(A&192)===128&&(d=(p&15)<<18|(b&63)<<12|(C&63)<<6|A&63,(d<=65535||d>=1114112)&&(d=null))),d===null?(d=65533,u=1):d>65535&&(d-=65536,a+=String.fromCharCode(d>>>10&1023|55296),d=56320|d&1023),a+=String.fromCharCode(d),c+=u}return a}function VL(e,t,i){return KI.decode(e.subarray(t,i))}function GL(e,t,i){for(var a=0,c,p;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(p)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,p=c;continue}else c=p-55296<<10|c-56320|65536,p=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):p=c;continue}else p&&(e[i++]=239,e[i++]=191,e[i++]=189,p=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var Sx={exports:{}},YI=function(t,i){return function(){for(var c=new Array(arguments.length),p=0;p<c.length;p++)c[p]=arguments[p];return t.apply(i,c)}},HL=YI,oc=Object.prototype.toString;function Ex(e){return oc.call(e)==="[object Array]"}function N_(e){return typeof e>"u"}function WL(e){return e!==null&&!N_(e)&&e.constructor!==null&&!N_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function ZL(e){return oc.call(e)==="[object ArrayBuffer]"}function XL(e){return typeof FormData<"u"&&e instanceof FormData}function qL(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function KL(e){return typeof e=="string"}function YL(e){return typeof e=="number"}function JI(e){return e!==null&&typeof e=="object"}function Om(e){if(oc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function JL(e){return oc.call(e)==="[object Date]"}function QL(e){return oc.call(e)==="[object File]"}function eF(e){return oc.call(e)==="[object Blob]"}function QI(e){return oc.call(e)==="[object Function]"}function tF(e){return JI(e)&&QI(e.pipe)}function nF(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function rF(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function iF(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Tx(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Ex(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function U_(){var e={};function t(c,p){Om(e[p])&&Om(c)?e[p]=U_(e[p],c):Om(c)?e[p]=U_({},c):Ex(c)?e[p]=c.slice():e[p]=c}for(var i=0,a=arguments.length;i<a;i++)Tx(arguments[i],t);return e}function oF(e,t,i){return Tx(t,function(c,p){i&&typeof c=="function"?e[p]=HL(c,i):e[p]=c}),e}function sF(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Go={isArray:Ex,isArrayBuffer:ZL,isBuffer:WL,isFormData:XL,isArrayBufferView:qL,isString:KL,isNumber:YL,isObject:JI,isPlainObject:Om,isUndefined:N_,isDate:JL,isFile:QL,isBlob:eF,isFunction:QI,isStream:tF,isURLSearchParams:nF,isStandardBrowserEnv:iF,forEach:Tx,merge:U_,extend:oF,trim:rF,stripBOM:sF},Wc=Go;function CS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var eA=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(Wc.isURLSearchParams(i))c=i.toString();else{var p=[];Wc.forEach(i,function(b,C){b===null||typeof b>"u"||(Wc.isArray(b)?C=C+"[]":b=[b],Wc.forEach(b,function(w){Wc.isDate(w)?w=w.toISOString():Wc.isObject(w)&&(w=JSON.stringify(w)),p.push(CS(C)+"="+CS(w))}))}),c=p.join("&")}if(c){var d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},aF=Go;function uy(){this.handlers=[]}uy.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};uy.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};uy.prototype.forEach=function(t){aF.forEach(this.handlers,function(a){a!==null&&t(a)})};var lF=uy,uF=Go,cF=function(t,i){uF.forEach(t,function(c,p){p!==i&&p.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[p])})},tA=function(t,i,a,c,p){return t.config=i,a&&(t.code=a),t.request=c,t.response=p,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},D0,IS;function nA(){if(IS)return D0;IS=1;var e=tA;return D0=function(i,a,c,p,d){var u=new Error(i);return e(u,a,c,p,d)},D0}var B0,AS;function hF(){if(AS)return B0;AS=1;var e=nA();return B0=function(i,a,c){var p=c.config.validateStatus;!c.status||!p||p(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},B0}var N0,PS;function dF(){if(PS)return N0;PS=1;var e=Go;return N0=e.isStandardBrowserEnv()?function(){return{write:function(a,c,p,d,u,b){var C=[];C.push(a+"="+encodeURIComponent(c)),e.isNumber(p)&&C.push("expires="+new Date(p).toGMTString()),e.isString(d)&&C.push("path="+d),e.isString(u)&&C.push("domain="+u),b===!0&&C.push("secure"),document.cookie=C.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),N0}var U0,kS;function fF(){return kS||(kS=1,U0=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),U0}var $0,MS;function pF(){return MS||(MS=1,$0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),$0}var V0,zS;function mF(){if(zS)return V0;zS=1;var e=fF(),t=pF();return V0=function(a,c){return a&&!e(c)?t(a,c):c},V0}var G0,RS;function gF(){if(RS)return G0;RS=1;var e=Go,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return G0=function(a){var c={},p,d,u;return a&&e.forEach(a.split(`
`),function(C){if(u=C.indexOf(":"),p=e.trim(C.substr(0,u)).toLowerCase(),d=e.trim(C.substr(u+1)),p){if(c[p]&&t.indexOf(p)>=0)return;p==="set-cookie"?c[p]=(c[p]?c[p]:[]).concat([d]):c[p]=c[p]?c[p]+", "+d:d}}),c},G0}var H0,OS;function yF(){if(OS)return H0;OS=1;var e=Go;return H0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function p(d){var u=d;return i&&(a.setAttribute("href",u),u=a.href),a.setAttribute("href",u),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=p(window.location.href),function(u){var b=e.isString(u)?p(u):u;return b.protocol===c.protocol&&b.host===c.host}}():function(){return function(){return!0}}(),H0}var W0,LS;function FS(){if(LS)return W0;LS=1;var e=Go,t=hF(),i=dF(),a=eA,c=mF(),p=gF(),d=yF(),u=nA();return W0=function(C){return new Promise(function(w,T){var L=C.data,U=C.headers,F=C.responseType;e.isFormData(L)&&delete U["Content-Type"];var ce=new XMLHttpRequest;if(C.auth){var K=C.auth.username||"",W=C.auth.password?unescape(encodeURIComponent(C.auth.password)):"";U.Authorization="Basic "+btoa(K+":"+W)}var $=c(C.baseURL,C.url);ce.open(C.method.toUpperCase(),a($,C.params,C.paramsSerializer),!0),ce.timeout=C.timeout;function ie(){if(ce){var V="getAllResponseHeaders"in ce?p(ce.getAllResponseHeaders()):null,E=!F||F==="text"||F==="json"?ce.responseText:ce.response,j={data:E,status:ce.status,statusText:ce.statusText,headers:V,config:C,request:ce};t(w,T,j),ce=null}}if("onloadend"in ce?ce.onloadend=ie:ce.onreadystatechange=function(){!ce||ce.readyState!==4||ce.status===0&&!(ce.responseURL&&ce.responseURL.indexOf("file:")===0)||setTimeout(ie)},ce.onabort=function(){ce&&(T(u("Request aborted",C,"ECONNABORTED",ce)),ce=null)},ce.onerror=function(){T(u("Network Error",C,null,ce)),ce=null},ce.ontimeout=function(){var E="timeout of "+C.timeout+"ms exceeded";C.timeoutErrorMessage&&(E=C.timeoutErrorMessage),T(u(E,C,C.transitional&&C.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ce)),ce=null},e.isStandardBrowserEnv()){var X=(C.withCredentials||d($))&&C.xsrfCookieName?i.read(C.xsrfCookieName):void 0;X&&(U[C.xsrfHeaderName]=X)}"setRequestHeader"in ce&&e.forEach(U,function(E,j){typeof L>"u"&&j.toLowerCase()==="content-type"?delete U[j]:ce.setRequestHeader(j,E)}),e.isUndefined(C.withCredentials)||(ce.withCredentials=!!C.withCredentials),F&&F!=="json"&&(ce.responseType=C.responseType),typeof C.onDownloadProgress=="function"&&ce.addEventListener("progress",C.onDownloadProgress),typeof C.onUploadProgress=="function"&&ce.upload&&ce.upload.addEventListener("progress",C.onUploadProgress),C.cancelToken&&C.cancelToken.promise.then(function(E){ce&&(ce.abort(),T(E),ce=null)}),L||(L=null),ce.send(L)})},W0}var Ci=Go,jS=cF,vF=tA,_F={"Content-Type":"application/x-www-form-urlencoded"};function DS(e,t){!Ci.isUndefined(e)&&Ci.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function xF(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=FS()),e}function wF(e,t,i){if(Ci.isString(e))try{return(t||JSON.parse)(e),Ci.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var cy={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:xF(),transformRequest:[function(t,i){return jS(i,"Accept"),jS(i,"Content-Type"),Ci.isFormData(t)||Ci.isArrayBuffer(t)||Ci.isBuffer(t)||Ci.isStream(t)||Ci.isFile(t)||Ci.isBlob(t)?t:Ci.isArrayBufferView(t)?t.buffer:Ci.isURLSearchParams(t)?(DS(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ci.isObject(t)||i&&i["Content-Type"]==="application/json"?(DS(i,"application/json"),wF(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,p=!a&&this.responseType==="json";if(p||c&&Ci.isString(t)&&t.length)try{return JSON.parse(t)}catch(d){if(p)throw d.name==="SyntaxError"?vF(d,this,"E_JSON_PARSE"):d}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};cy.headers={common:{Accept:"application/json, text/plain, */*"}};Ci.forEach(["delete","get","head"],function(t){cy.headers[t]={}});Ci.forEach(["post","put","patch"],function(t){cy.headers[t]=Ci.merge(_F)});var Cx=cy,bF=Go,SF=Cx,EF=function(t,i,a){var c=this||SF;return bF.forEach(a,function(d){t=d.call(c,t,i)}),t},Z0,BS;function rA(){return BS||(BS=1,Z0=function(t){return!!(t&&t.__CANCEL__)}),Z0}var NS=Go,X0=EF,TF=rA(),CF=Cx;function q0(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var IF=function(t){q0(t),t.headers=t.headers||{},t.data=X0.call(t,t.data,t.headers,t.transformRequest),t.headers=NS.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),NS.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||CF.adapter;return i(t).then(function(c){return q0(t),c.data=X0.call(t,c.data,c.headers,t.transformResponse),c},function(c){return TF(c)||(q0(t),c&&c.response&&(c.response.data=X0.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Ui=Go,iA=function(t,i){i=i||{};var a={},c=["url","method","data"],p=["headers","auth","proxy","params"],d=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function b(T,L){return Ui.isPlainObject(T)&&Ui.isPlainObject(L)?Ui.merge(T,L):Ui.isPlainObject(L)?Ui.merge({},L):Ui.isArray(L)?L.slice():L}function C(T){Ui.isUndefined(i[T])?Ui.isUndefined(t[T])||(a[T]=b(void 0,t[T])):a[T]=b(t[T],i[T])}Ui.forEach(c,function(L){Ui.isUndefined(i[L])||(a[L]=b(void 0,i[L]))}),Ui.forEach(p,C),Ui.forEach(d,function(L){Ui.isUndefined(i[L])?Ui.isUndefined(t[L])||(a[L]=b(void 0,t[L])):a[L]=b(void 0,i[L])}),Ui.forEach(u,function(L){L in i?a[L]=b(t[L],i[L]):L in t&&(a[L]=b(void 0,t[L]))});var A=c.concat(p).concat(d).concat(u),w=Object.keys(t).concat(Object.keys(i)).filter(function(L){return A.indexOf(L)===-1});return Ui.forEach(w,C),a};const AF="axios",PF="0.21.4",kF="Promise based HTTP client for the browser and node.js",MF="index.js",zF={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},RF={type:"git",url:"https://github.com/axios/axios.git"},OF=["xhr","http","ajax","promise","node"],LF="Matt Zabriskie",FF="MIT",jF={url:"https://github.com/axios/axios/issues"},DF="https://axios-http.com",BF={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},NF={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},UF="dist/axios.min.js",$F="dist/axios.min.js",VF="./index.d.ts",GF={"follow-redirects":"^1.14.0"},HF=[{path:"./dist/axios.min.js",threshold:"5kB"}],WF={name:AF,version:PF,description:kF,main:MF,scripts:zF,repository:RF,keywords:OF,author:LF,license:FF,bugs:jF,homepage:DF,devDependencies:BF,browser:NF,jsdelivr:UF,unpkg:$F,typings:VF,dependencies:GF,bundlesize:HF};var oA=WF,Ix={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Ix[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var US={},ZF=oA.version.split(".");function sA(e,t){for(var i=t?t.split("."):ZF,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}Ix.transitional=function(t,i,a){var c=i&&sA(i);function p(d,u){return"[Axios v"+oA.version+"] Transitional option '"+d+"'"+u+(a?". "+a:"")}return function(d,u,b){if(t===!1)throw new Error(p(u," has been removed in "+i));return c&&!US[u]&&(US[u]=!0,console.warn(p(u," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(d,u,b):!0}};function XF(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var p=a[c],d=t[p];if(d){var u=e[p],b=u===void 0||d(u,p,e);if(b!==!0)throw new TypeError("option "+p+" must be "+b);continue}if(i!==!0)throw Error("Unknown option "+p)}}var qF={isOlderVersion:sA,assertOptions:XF,validators:Ix},aA=Go,KF=eA,$S=lF,VS=IF,hy=iA,lA=qF,Zc=lA.validators;function np(e){this.defaults=e,this.interceptors={request:new $S,response:new $S}}np.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=hy(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&lA.assertOptions(i,{silentJSONParsing:Zc.transitional(Zc.boolean,"1.0.0"),forcedJSONParsing:Zc.transitional(Zc.boolean,"1.0.0"),clarifyTimeoutError:Zc.transitional(Zc.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(c=c&&T.synchronous,a.unshift(T.fulfilled,T.rejected))});var p=[];this.interceptors.response.forEach(function(T){p.push(T.fulfilled,T.rejected)});var d;if(!c){var u=[VS,void 0];for(Array.prototype.unshift.apply(u,a),u=u.concat(p),d=Promise.resolve(t);u.length;)d=d.then(u.shift(),u.shift());return d}for(var b=t;a.length;){var C=a.shift(),A=a.shift();try{b=C(b)}catch(w){A(w);break}}try{d=VS(b)}catch(w){return Promise.reject(w)}for(;p.length;)d=d.then(p.shift(),p.shift());return d};np.prototype.getUri=function(t){return t=hy(this.defaults,t),KF(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};aA.forEach(["delete","get","head","options"],function(t){np.prototype[t]=function(i,a){return this.request(hy(a||{},{method:t,url:i,data:(a||{}).data}))}});aA.forEach(["post","put","patch"],function(t){np.prototype[t]=function(i,a,c){return this.request(hy(c||{},{method:t,url:i,data:a}))}});var YF=np,K0,GS;function uA(){if(GS)return K0;GS=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,K0=e,K0}var Y0,HS;function JF(){if(HS)return Y0;HS=1;var e=uA();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(d){a=d});var c=this;i(function(d){c.reason||(c.reason=new e(d),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(d){a=d});return{token:c,cancel:a}},Y0=t,Y0}var J0,WS;function QF(){return WS||(WS=1,J0=function(t){return function(a){return t.apply(null,a)}}),J0}var Q0,ZS;function e5(){return ZS||(ZS=1,Q0=function(t){return typeof t=="object"&&t.isAxiosError===!0}),Q0}var XS=Go,t5=YI,Lm=YF,n5=iA,r5=Cx;function cA(e){var t=new Lm(e),i=t5(Lm.prototype.request,t);return XS.extend(i,Lm.prototype,t),XS.extend(i,t),i}var Rs=cA(r5);Rs.Axios=Lm;Rs.create=function(t){return cA(n5(Rs.defaults,t))};Rs.Cancel=uA();Rs.CancelToken=JF();Rs.isCancel=rA();Rs.all=function(t){return Promise.all(t)};Rs.spread=QF();Rs.isAxiosError=e5();Sx.exports=Rs;Sx.exports.default=Rs;var i5=Sx.exports,o5=i5;const s5={},a5=Object.freeze(Object.defineProperty({__proto__:null,default:s5},Symbol.toStringTag,{value:"Module"})),l5=$_(a5);var dy={},u5=xh;function xh(e,t){this.x=e,this.y=t}xh.prototype={clone:function(){return new xh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),p=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};xh.convert=function(e){return e instanceof xh?e:Array.isArray(e)?new xh(e[0],e[1]):e};var c5=u5,hA=Rh;function Rh(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(h5,this,t)}function h5(e,t,i){e==1?t.id=i.readVarint():e==2?d5(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function d5(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}Rh.types=["Unknown","Point","LineString","Polygon"];Rh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,p=0,d=[],u;e.pos<t;){if(a<=0){var b=e.readVarint();i=b&7,a=b>>3}if(a--,i===1||i===2)c+=e.readSVarint(),p+=e.readSVarint(),i===1&&(u&&d.push(u),u=[]),u.push(new c5(c,p));else if(i===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+i)}return u&&d.push(u),d};Rh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,p=0,d=1/0,u=-1/0,b=1/0,C=-1/0;e.pos<t;){if(a<=0){var A=e.readVarint();i=A&7,a=A>>3}if(a--,i===1||i===2)c+=e.readSVarint(),p+=e.readSVarint(),c<d&&(d=c),c>u&&(u=c),p<b&&(b=p),p>C&&(C=p);else if(i!==7)throw new Error("unknown command "+i)}return[d,b,u,C]};Rh.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,p=this.extent*t,d=this.loadGeometry(),u=Rh.types[this.type],b,C;function A(L){for(var U=0;U<L.length;U++){var F=L[U],ce=180-(F.y+p)*360/a;L[U]=[(F.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(ce*Math.PI/180))-90]}}switch(this.type){case 1:var w=[];for(b=0;b<d.length;b++)w[b]=d[b][0];d=w,A(d);break;case 2:for(b=0;b<d.length;b++)A(d[b]);break;case 3:for(d=f5(d),b=0;b<d.length;b++)for(C=0;C<d[b].length;C++)A(d[b][C]);break}d.length===1?d=d[0]:u="Multi"+u;var T={type:"Feature",geometry:{type:u,coordinates:d},properties:this.properties};return"id"in this&&(T.id=this.id),T};function f5(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,p=0;p<t;p++){var d=p5(e[p]);d!==0&&(c===void 0&&(c=d<0),c===d<0?(a&&i.push(a),a=[e[p]]):a.push(e[p]))}return a&&i.push(a),i}function p5(e){for(var t=0,i=0,a=e.length,c=a-1,p,d;i<a;c=i++)p=e[i],d=e[c],t+=(d.x-p.x)*(p.y+d.y);return t}var m5=hA,dA=fA;function fA(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(g5,this,t),this.length=this._features.length}function g5(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(y5(i))}function y5(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}fA.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new m5(this._pbf,t,this.extent,this._keys,this._values)};var v5=dA,_5=x5;function x5(e,t){this.layers=e.readFields(w5,{},t)}function w5(e,t,i){if(e===3){var a=new v5(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}dy.VectorTile=_5;dy.VectorTileFeature=hA;dy.VectorTileLayer=dA;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=cL,i=CL,a=IL,c=o5,p=l5,d=dy;function u(W){return W&&typeof W=="object"&&"default"in W?W:{default:W}}var b=u(a),C=u(c),A=u(p),w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Gl<"u"?Gl:typeof self<"u"?self:{};function T(W){var $={exports:{}};return W($,$.exports),$.exports}var L=T(function(W,$){(function(X,V){W.exports=V(C.default)})(w,function(ie){return function(X){var V={};function E(j){if(V[j])return V[j].exports;var B=V[j]={i:j,l:!1,exports:{}};return X[j].call(B.exports,B,B.exports,E),B.l=!0,B.exports}return E.m=X,E.c=V,E.d=function(j,B,ee){E.o(j,B)||Object.defineProperty(j,B,{enumerable:!0,get:ee})},E.r=function(j){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})},E.t=function(j,B){if(B&1&&(j=E(j)),B&8||B&4&&typeof j=="object"&&j&&j.__esModule)return j;var ee=Object.create(null);if(E.r(ee),Object.defineProperty(ee,"default",{enumerable:!0,value:j}),B&2&&typeof j!="string")for(var q in j)E.d(ee,q,(function(pe){return j[pe]}).bind(null,q));return ee},E.n=function(j){var B=j&&j.__esModule?function(){return j.default}:function(){return j};return E.d(B,"a",B),B},E.o=function(j,B){return Object.prototype.hasOwnProperty.call(j,B)},E.p="",E(E.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(X,V,E){E.r(V),E.d(V,"CacheControl",function(){return Ee}),E.d(V,"parse",function(){return Be}),E.d(V,"format",function(){return Pe}),E("./node_modules/core-js/modules/es6.array.from.js"),E("./node_modules/core-js/modules/es6.function.name.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/web.dom.iterable.js"),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.regexp.split.js"),E("./node_modules/core-js/modules/es6.number.is-finite.js");function j(ze,We){return _e(ze)||pe(ze,We)||ee(ze,We)||B()}function B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(ze,We){if(ze){if(typeof ze=="string")return q(ze,We);var He=Object.prototype.toString.call(ze).slice(8,-1);if(He==="Object"&&ze.constructor&&(He=ze.constructor.name),He==="Map"||He==="Set")return Array.from(ze);if(He==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(He))return q(ze,We)}}function q(ze,We){(We==null||We>ze.length)&&(We=ze.length);for(var He=0,nt=new Array(We);He<We;He++)nt[He]=ze[He];return nt}function pe(ze,We){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(ze)))){var He=[],nt=!0,dt=!1,wt=void 0;try{for(var Mt=ze[Symbol.iterator](),gt;!(nt=(gt=Mt.next()).done)&&(He.push(gt.value),!(We&&He.length===We));nt=!0);}catch(Tt){dt=!0,wt=Tt}finally{try{!nt&&Mt.return!=null&&Mt.return()}finally{if(dt)throw wt}}return He}}function _e(ze){if(Array.isArray(ze))return ze}function de(ze,We){if(!(ze instanceof We))throw new TypeError("Cannot call a class as a function")}function oe(ze,We){for(var He=0;He<We.length;He++){var nt=We[He];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(ze,nt.key,nt)}}function le(ze,We,He){return We&&oe(ze.prototype,We),He&&oe(ze,He),ze}var J=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,te={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function he(ze){return ze===null}function be(ze){if(!ze)return null;var We=parseInt(ze,10);return!Number.isFinite(We)||We<0?null:We}var Ee=function(){function ze(){de(this,ze),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return le(ze,[{key:"parse",value:function(He){if(!He||He.length===0)return this;var nt={},dt=He.match(J)||[];return Array.prototype.forEach.call(dt,function(wt){var Mt=wt.split("=",2),gt=j(Mt,1),Tt=gt[0],$t=null;Mt.length>1&&($t=Mt[1].trim()),nt[Tt.toLowerCase()]=$t}),this.maxAge=be(nt[te.maxAge]),this.sharedMaxAge=be(nt[te.sharedMaxAge]),this.maxStale=he(nt[te.maxStale]),this.maxStaleDuration=be(nt[te.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=be(nt[te.minFresh]),this.immutable=he(nt[te.immutable]),this.mustRevalidate=he(nt[te.mustRevalidate]),this.noCache=he(nt[te.noCache]),this.noStore=he(nt[te.noStore]),this.noTransform=he(nt[te.noTransform]),this.onlyIfCached=he(nt[te.onlyIfCached]),this.private=he(nt[te.private]),this.proxyRevalidate=he(nt[te.proxyRevalidate]),this.public=he(nt[te.public]),this}},{key:"format",value:function(){var He=[];return this.maxAge&&He.push("".concat(te.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&He.push("".concat(te.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?He.push("".concat(te.maxStale,"=").concat(this.maxStaleDuration)):He.push(te.maxStale)),this.minFresh&&He.push("".concat(te.minFresh,"=").concat(this.minFresh)),this.immutable&&He.push(te.immutable),this.mustRevalidate&&He.push(te.mustRevalidate),this.noCache&&He.push(te.noCache),this.noStore&&He.push(te.noStore),this.noTransform&&He.push(te.noTransform),this.onlyIfCached&&He.push(te.onlyIfCached),this.private&&He.push(te.private),this.proxyRevalidate&&He.push(te.proxyRevalidate),this.public&&He.push(te.public),He.join(", ")}}]),ze}();function Be(ze){var We=new Ee;return We.parse(ze)}function Pe(ze){return ze instanceof Ee?ze.format():Ee.prototype.format.call(ze)}V.default={CacheControl:Ee,parse:Be,format:Pe}},"./node_modules/charenc/charenc.js":function(X,V){var E={utf8:{stringToBytes:function(j){return E.bin.stringToBytes(unescape(encodeURIComponent(j)))},bytesToString:function(j){return decodeURIComponent(escape(E.bin.bytesToString(j)))}},bin:{stringToBytes:function(j){for(var B=[],ee=0;ee<j.length;ee++)B.push(j.charCodeAt(ee)&255);return B},bytesToString:function(j){for(var B=[],ee=0;ee<j.length;ee++)B.push(String.fromCharCode(j[ee]));return B.join("")}}};X.exports=E},"./node_modules/core-js/modules/_a-function.js":function(X,V){X.exports=function(E){if(typeof E!="function")throw TypeError(E+" is not a function!");return E}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_wks.js")("unscopables"),B=Array.prototype;B[j]==null&&E("./node_modules/core-js/modules/_hide.js")(B,j,{}),X.exports=function(ee){B[j][ee]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_string-at.js")(!0);X.exports=function(B,ee,q){return ee+(q?j(B,ee).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_is-object.js");X.exports=function(B){if(!j(B))throw TypeError(B+" is not an object!");return B}},"./node_modules/core-js/modules/_array-includes.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_to-iobject.js"),B=E("./node_modules/core-js/modules/_to-length.js"),ee=E("./node_modules/core-js/modules/_to-absolute-index.js");X.exports=function(q){return function(pe,_e,de){var oe=j(pe),le=B(oe.length),J=ee(de,le),te;if(q&&_e!=_e){for(;le>J;)if(te=oe[J++],te!=te)return!0}else for(;le>J;J++)if((q||J in oe)&&oe[J]===_e)return q||J||0;return!q&&-1}}},"./node_modules/core-js/modules/_bind.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_a-function.js"),B=E("./node_modules/core-js/modules/_is-object.js"),ee=E("./node_modules/core-js/modules/_invoke.js"),q=[].slice,pe={},_e=function(de,oe,le){if(!(oe in pe)){for(var J=[],te=0;te<oe;te++)J[te]="a["+te+"]";pe[oe]=Function("F,a","return new F("+J.join(",")+")")}return pe[oe](de,le)};X.exports=Function.bind||function(oe){var le=j(this),J=q.call(arguments,1),te=function(){var he=J.concat(q.call(arguments));return this instanceof te?_e(le,he.length,he):ee(le,he,oe)};return B(le.prototype)&&(te.prototype=le.prototype),te}},"./node_modules/core-js/modules/_classof.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_cof.js"),B=E("./node_modules/core-js/modules/_wks.js")("toStringTag"),ee=j(function(){return arguments}())=="Arguments",q=function(pe,_e){try{return pe[_e]}catch{}};X.exports=function(pe){var _e,de,oe;return pe===void 0?"Undefined":pe===null?"Null":typeof(de=q(_e=Object(pe),B))=="string"?de:ee?j(_e):(oe=j(_e))=="Object"&&typeof _e.callee=="function"?"Arguments":oe}},"./node_modules/core-js/modules/_cof.js":function(X,V){var E={}.toString;X.exports=function(j){return E.call(j).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(X,V){var E=X.exports={version:"2.6.12"};typeof __e=="number"&&(__e=E)},"./node_modules/core-js/modules/_create-property.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js"),B=E("./node_modules/core-js/modules/_property-desc.js");X.exports=function(ee,q,pe){q in ee?j.f(ee,q,B(0,pe)):ee[q]=pe}},"./node_modules/core-js/modules/_ctx.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_a-function.js");X.exports=function(B,ee,q){if(j(B),ee===void 0)return B;switch(q){case 1:return function(pe){return B.call(ee,pe)};case 2:return function(pe,_e){return B.call(ee,pe,_e)};case 3:return function(pe,_e,de){return B.call(ee,pe,_e,de)}}return function(){return B.apply(ee,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(X,V){X.exports=function(E){if(E==null)throw TypeError("Can't call method on  "+E);return E}},"./node_modules/core-js/modules/_descriptors.js":function(X,V,E){X.exports=!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_is-object.js"),B=E("./node_modules/core-js/modules/_global.js").document,ee=j(B)&&j(B.createElement);X.exports=function(q){return ee?B.createElement(q):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(X,V){X.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-keys.js"),B=E("./node_modules/core-js/modules/_object-gops.js"),ee=E("./node_modules/core-js/modules/_object-pie.js");X.exports=function(q){var pe=j(q),_e=B.f;if(_e)for(var de=_e(q),oe=ee.f,le=0,J;de.length>le;)oe.call(q,J=de[le++])&&pe.push(J);return pe}},"./node_modules/core-js/modules/_export.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_global.js"),B=E("./node_modules/core-js/modules/_core.js"),ee=E("./node_modules/core-js/modules/_hide.js"),q=E("./node_modules/core-js/modules/_redefine.js"),pe=E("./node_modules/core-js/modules/_ctx.js"),_e="prototype",de=function(oe,le,J){var te=oe&de.F,he=oe&de.G,be=oe&de.S,Ee=oe&de.P,Be=oe&de.B,Pe=he?j:be?j[le]||(j[le]={}):(j[le]||{})[_e],ze=he?B:B[le]||(B[le]={}),We=ze[_e]||(ze[_e]={}),He,nt,dt,wt;he&&(J=le);for(He in J)nt=!te&&Pe&&Pe[He]!==void 0,dt=(nt?Pe:J)[He],wt=Be&&nt?pe(dt,j):Ee&&typeof dt=="function"?pe(Function.call,dt):dt,Pe&&q(Pe,He,dt,oe&de.U),ze[He]!=dt&&ee(ze,He,wt),Ee&&We[He]!=dt&&(We[He]=dt)};j.core=B,de.F=1,de.G=2,de.S=4,de.P=8,de.B=16,de.W=32,de.U=64,de.R=128,X.exports=de},"./node_modules/core-js/modules/_fails-is-regexp.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(B){var ee=/./;try{"/./"[B](ee)}catch{try{return ee[j]=!1,!"/./"[B](ee)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(X,V){X.exports=function(E){try{return!!E()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(X,V,E){E("./node_modules/core-js/modules/es6.regexp.exec.js");var j=E("./node_modules/core-js/modules/_redefine.js"),B=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_fails.js"),q=E("./node_modules/core-js/modules/_defined.js"),pe=E("./node_modules/core-js/modules/_wks.js"),_e=E("./node_modules/core-js/modules/_regexp-exec.js"),de=pe("species"),oe=!ee(function(){var J=/./;return J.exec=function(){var te=[];return te.groups={a:"7"},te},"".replace(J,"$<a>")!=="7"}),le=function(){var J=/(?:)/,te=J.exec;J.exec=function(){return te.apply(this,arguments)};var he="ab".split(J);return he.length===2&&he[0]==="a"&&he[1]==="b"}();X.exports=function(J,te,he){var be=pe(J),Ee=!ee(function(){var nt={};return nt[be]=function(){return 7},""[J](nt)!=7}),Be=Ee?!ee(function(){var nt=!1,dt=/a/;return dt.exec=function(){return nt=!0,null},J==="split"&&(dt.constructor={},dt.constructor[de]=function(){return dt}),dt[be](""),!nt}):void 0;if(!Ee||!Be||J==="replace"&&!oe||J==="split"&&!le){var Pe=/./[be],ze=he(q,be,""[J],function(dt,wt,Mt,gt,Tt){return wt.exec===_e?Ee&&!Tt?{done:!0,value:Pe.call(wt,Mt,gt)}:{done:!0,value:dt.call(Mt,wt,gt)}:{done:!1}}),We=ze[0],He=ze[1];j(String.prototype,J,We),B(RegExp.prototype,be,te==2?function(nt,dt){return He.call(nt,this,dt)}:function(nt){return He.call(nt,this)})}}},"./node_modules/core-js/modules/_flags.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_an-object.js");X.exports=function(){var B=j(this),ee="";return B.global&&(ee+="g"),B.ignoreCase&&(ee+="i"),B.multiline&&(ee+="m"),B.unicode&&(ee+="u"),B.sticky&&(ee+="y"),ee}},"./node_modules/core-js/modules/_function-to-string.js":function(X,V,E){X.exports=E("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(X,V){var E=X.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=E)},"./node_modules/core-js/modules/_has.js":function(X,V){var E={}.hasOwnProperty;X.exports=function(j,B){return E.call(j,B)}},"./node_modules/core-js/modules/_hide.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js"),B=E("./node_modules/core-js/modules/_property-desc.js");X.exports=E("./node_modules/core-js/modules/_descriptors.js")?function(ee,q,pe){return j.f(ee,q,B(1,pe))}:function(ee,q,pe){return ee[q]=pe,ee}},"./node_modules/core-js/modules/_html.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_global.js").document;X.exports=j&&j.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(X,V,E){X.exports=!E("./node_modules/core-js/modules/_descriptors.js")&&!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(E("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(X,V){X.exports=function(E,j,B){var ee=B===void 0;switch(j.length){case 0:return ee?E():E.call(B);case 1:return ee?E(j[0]):E.call(B,j[0]);case 2:return ee?E(j[0],j[1]):E.call(B,j[0],j[1]);case 3:return ee?E(j[0],j[1],j[2]):E.call(B,j[0],j[1],j[2]);case 4:return ee?E(j[0],j[1],j[2],j[3]):E.call(B,j[0],j[1],j[2],j[3])}return E.apply(B,j)}},"./node_modules/core-js/modules/_iobject.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_cof.js");X.exports=Object("z").propertyIsEnumerable(0)?Object:function(B){return j(B)=="String"?B.split(""):Object(B)}},"./node_modules/core-js/modules/_is-array-iter.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_iterators.js"),B=E("./node_modules/core-js/modules/_wks.js")("iterator"),ee=Array.prototype;X.exports=function(q){return q!==void 0&&(j.Array===q||ee[B]===q)}},"./node_modules/core-js/modules/_is-array.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_cof.js");X.exports=Array.isArray||function(ee){return j(ee)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(X,V){X.exports=function(E){return typeof E=="object"?E!==null:typeof E=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_is-object.js"),B=E("./node_modules/core-js/modules/_cof.js"),ee=E("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(q){var pe;return j(q)&&((pe=q[ee])!==void 0?!!pe:B(q)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_an-object.js");X.exports=function(B,ee,q,pe){try{return pe?ee(j(q)[0],q[1]):ee(q)}catch(de){var _e=B.return;throw _e!==void 0&&j(_e.call(B)),de}}},"./node_modules/core-js/modules/_iter-create.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-create.js"),B=E("./node_modules/core-js/modules/_property-desc.js"),ee=E("./node_modules/core-js/modules/_set-to-string-tag.js"),q={};E("./node_modules/core-js/modules/_hide.js")(q,E("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),X.exports=function(pe,_e,de){pe.prototype=j(q,{next:B(1,de)}),ee(pe,_e+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_library.js"),B=E("./node_modules/core-js/modules/_export.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),q=E("./node_modules/core-js/modules/_hide.js"),pe=E("./node_modules/core-js/modules/_iterators.js"),_e=E("./node_modules/core-js/modules/_iter-create.js"),de=E("./node_modules/core-js/modules/_set-to-string-tag.js"),oe=E("./node_modules/core-js/modules/_object-gpo.js"),le=E("./node_modules/core-js/modules/_wks.js")("iterator"),J=!([].keys&&"next"in[].keys()),te="@@iterator",he="keys",be="values",Ee=function(){return this};X.exports=function(Be,Pe,ze,We,He,nt,dt){_e(ze,Pe,We);var wt=function(N){if(!J&&N in $t)return $t[N];switch(N){case he:return function(){return new ze(this,N)};case be:return function(){return new ze(this,N)}}return function(){return new ze(this,N)}},Mt=Pe+" Iterator",gt=He==be,Tt=!1,$t=Be.prototype,Vt=$t[le]||$t[te]||He&&$t[He],Zt=Vt||wt(He),En=He?gt?wt("entries"):Zt:void 0,et=Pe=="Array"&&$t.entries||Vt,sn,Sn,we;if(et&&(we=oe(et.call(new Be)),we!==Object.prototype&&we.next&&(de(we,Mt,!0),!j&&typeof we[le]!="function"&&q(we,le,Ee))),gt&&Vt&&Vt.name!==be&&(Tt=!0,Zt=function(){return Vt.call(this)}),(!j||dt)&&(J||Tt||!$t[le])&&q($t,le,Zt),pe[Pe]=Zt,pe[Mt]=Ee,He)if(sn={values:gt?Zt:wt(be),keys:nt?Zt:wt(he),entries:En},dt)for(Sn in sn)Sn in $t||ee($t,Sn,sn[Sn]);else B(B.P+B.F*(J||Tt),Pe,sn);return sn}},"./node_modules/core-js/modules/_iter-detect.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_wks.js")("iterator"),B=!1;try{var ee=[7][j]();ee.return=function(){B=!0},Array.from(ee,function(){throw 2})}catch{}X.exports=function(q,pe){if(!pe&&!B)return!1;var _e=!1;try{var de=[7],oe=de[j]();oe.next=function(){return{done:_e=!0}},de[j]=function(){return oe},q(de)}catch{}return _e}},"./node_modules/core-js/modules/_iter-step.js":function(X,V){X.exports=function(E,j){return{value:j,done:!!E}}},"./node_modules/core-js/modules/_iterators.js":function(X,V){X.exports={}},"./node_modules/core-js/modules/_library.js":function(X,V){X.exports=!1},"./node_modules/core-js/modules/_meta.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_uid.js")("meta"),B=E("./node_modules/core-js/modules/_is-object.js"),ee=E("./node_modules/core-js/modules/_has.js"),q=E("./node_modules/core-js/modules/_object-dp.js").f,pe=0,_e=Object.isExtensible||function(){return!0},de=!E("./node_modules/core-js/modules/_fails.js")(function(){return _e(Object.preventExtensions({}))}),oe=function(be){q(be,j,{value:{i:"O"+ ++pe,w:{}}})},le=function(be,Ee){if(!B(be))return typeof be=="symbol"?be:(typeof be=="string"?"S":"P")+be;if(!ee(be,j)){if(!_e(be))return"F";if(!Ee)return"E";oe(be)}return be[j].i},J=function(be,Ee){if(!ee(be,j)){if(!_e(be))return!0;if(!Ee)return!1;oe(be)}return be[j].w},te=function(be){return de&&he.NEED&&_e(be)&&!ee(be,j)&&oe(be),be},he=X.exports={KEY:j,NEED:!1,fastKey:le,getWeak:J,onFreeze:te}},"./node_modules/core-js/modules/_object-create.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_an-object.js"),B=E("./node_modules/core-js/modules/_object-dps.js"),ee=E("./node_modules/core-js/modules/_enum-bug-keys.js"),q=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),pe=function(){},_e="prototype",de=function(){var oe=E("./node_modules/core-js/modules/_dom-create.js")("iframe"),le=ee.length,J="<",te=">",he;for(oe.style.display="none",E("./node_modules/core-js/modules/_html.js").appendChild(oe),oe.src="javascript:",he=oe.contentWindow.document,he.open(),he.write(J+"script"+te+"document.F=Object"+J+"/script"+te),he.close(),de=he.F;le--;)delete de[_e][ee[le]];return de()};X.exports=Object.create||function(le,J){var te;return le!==null?(pe[_e]=j(le),te=new pe,pe[_e]=null,te[q]=le):te=de(),J===void 0?te:B(te,J)}},"./node_modules/core-js/modules/_object-dp.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_an-object.js"),B=E("./node_modules/core-js/modules/_ie8-dom-define.js"),ee=E("./node_modules/core-js/modules/_to-primitive.js"),q=Object.defineProperty;V.f=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(_e,de,oe){if(j(_e),de=ee(de,!0),j(oe),B)try{return q(_e,de,oe)}catch{}if("get"in oe||"set"in oe)throw TypeError("Accessors not supported!");return"value"in oe&&(_e[de]=oe.value),_e}},"./node_modules/core-js/modules/_object-dps.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js"),B=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_object-keys.js");X.exports=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(pe,_e){B(pe);for(var de=ee(_e),oe=de.length,le=0,J;oe>le;)j.f(pe,J=de[le++],_e[J]);return pe}},"./node_modules/core-js/modules/_object-gopd.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-pie.js"),B=E("./node_modules/core-js/modules/_property-desc.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js"),q=E("./node_modules/core-js/modules/_to-primitive.js"),pe=E("./node_modules/core-js/modules/_has.js"),_e=E("./node_modules/core-js/modules/_ie8-dom-define.js"),de=Object.getOwnPropertyDescriptor;V.f=E("./node_modules/core-js/modules/_descriptors.js")?de:function(le,J){if(le=ee(le),J=q(J,!0),_e)try{return de(le,J)}catch{}if(pe(le,J))return B(!j.f.call(le,J),le[J])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_to-iobject.js"),B=E("./node_modules/core-js/modules/_object-gopn.js").f,ee={}.toString,q=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],pe=function(_e){try{return B(_e)}catch{return q.slice()}};X.exports.f=function(de){return q&&ee.call(de)=="[object Window]"?pe(de):B(j(de))}},"./node_modules/core-js/modules/_object-gopn.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-keys-internal.js"),B=E("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");V.f=Object.getOwnPropertyNames||function(q){return j(q,B)}},"./node_modules/core-js/modules/_object-gops.js":function(X,V){V.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_has.js"),B=E("./node_modules/core-js/modules/_to-object.js"),ee=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),q=Object.prototype;X.exports=Object.getPrototypeOf||function(pe){return pe=B(pe),j(pe,ee)?pe[ee]:typeof pe.constructor=="function"&&pe instanceof pe.constructor?pe.constructor.prototype:pe instanceof Object?q:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_has.js"),B=E("./node_modules/core-js/modules/_to-iobject.js"),ee=E("./node_modules/core-js/modules/_array-includes.js")(!1),q=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");X.exports=function(pe,_e){var de=B(pe),oe=0,le=[],J;for(J in de)J!=q&&j(de,J)&&le.push(J);for(;_e.length>oe;)j(de,J=_e[oe++])&&(~ee(le,J)||le.push(J));return le}},"./node_modules/core-js/modules/_object-keys.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-keys-internal.js"),B=E("./node_modules/core-js/modules/_enum-bug-keys.js");X.exports=Object.keys||function(q){return j(q,B)}},"./node_modules/core-js/modules/_object-pie.js":function(X,V){V.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-gopn.js"),B=E("./node_modules/core-js/modules/_object-gops.js"),ee=E("./node_modules/core-js/modules/_an-object.js"),q=E("./node_modules/core-js/modules/_global.js").Reflect;X.exports=q&&q.ownKeys||function(_e){var de=j.f(ee(_e)),oe=B.f;return oe?de.concat(oe(_e)):de}},"./node_modules/core-js/modules/_property-desc.js":function(X,V){X.exports=function(E,j){return{enumerable:!(E&1),configurable:!(E&2),writable:!(E&4),value:j}}},"./node_modules/core-js/modules/_redefine.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_global.js"),B=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_has.js"),q=E("./node_modules/core-js/modules/_uid.js")("src"),pe=E("./node_modules/core-js/modules/_function-to-string.js"),_e="toString",de=(""+pe).split(_e);E("./node_modules/core-js/modules/_core.js").inspectSource=function(oe){return pe.call(oe)},(X.exports=function(oe,le,J,te){var he=typeof J=="function";he&&(ee(J,"name")||B(J,"name",le)),oe[le]!==J&&(he&&(ee(J,q)||B(J,q,oe[le]?""+oe[le]:de.join(String(le)))),oe===j?oe[le]=J:te?oe[le]?oe[le]=J:B(oe,le,J):(delete oe[le],B(oe,le,J)))})(Function.prototype,_e,function(){return typeof this=="function"&&this[q]||pe.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_classof.js"),B=RegExp.prototype.exec;X.exports=function(ee,q){var pe=ee.exec;if(typeof pe=="function"){var _e=pe.call(ee,q);if(typeof _e!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return _e}if(j(ee)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return B.call(ee,q)}},"./node_modules/core-js/modules/_regexp-exec.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_flags.js"),B=RegExp.prototype.exec,ee=String.prototype.replace,q=B,pe="lastIndex",_e=function(){var le=/a/,J=/b*/g;return B.call(le,"a"),B.call(J,"a"),le[pe]!==0||J[pe]!==0}(),de=/()??/.exec("")[1]!==void 0,oe=_e||de;oe&&(q=function(J){var te=this,he,be,Ee,Be;return de&&(be=new RegExp("^"+te.source+"$(?!\\s)",j.call(te))),_e&&(he=te[pe]),Ee=B.call(te,J),_e&&Ee&&(te[pe]=te.global?Ee.index+Ee[0].length:he),de&&Ee&&Ee.length>1&&ee.call(Ee[0],be,function(){for(Be=1;Be<arguments.length-2;Be++)arguments[Be]===void 0&&(Ee[Be]=void 0)}),Ee}),X.exports=q},"./node_modules/core-js/modules/_set-to-string-tag.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js").f,B=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_wks.js")("toStringTag");X.exports=function(q,pe,_e){q&&!B(q=_e?q:q.prototype,ee)&&j(q,ee,{configurable:!0,value:pe})}},"./node_modules/core-js/modules/_shared-key.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_shared.js")("keys"),B=E("./node_modules/core-js/modules/_uid.js");X.exports=function(ee){return j[ee]||(j[ee]=B(ee))}},"./node_modules/core-js/modules/_shared.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_core.js"),B=E("./node_modules/core-js/modules/_global.js"),ee="__core-js_shared__",q=B[ee]||(B[ee]={});(X.exports=function(pe,_e){return q[pe]||(q[pe]=_e!==void 0?_e:{})})("versions",[]).push({version:j.version,mode:E("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_an-object.js"),B=E("./node_modules/core-js/modules/_a-function.js"),ee=E("./node_modules/core-js/modules/_wks.js")("species");X.exports=function(q,pe){var _e=j(q).constructor,de;return _e===void 0||(de=j(_e)[ee])==null?pe:B(de)}},"./node_modules/core-js/modules/_string-at.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_to-integer.js"),B=E("./node_modules/core-js/modules/_defined.js");X.exports=function(ee){return function(q,pe){var _e=String(B(q)),de=j(pe),oe=_e.length,le,J;return de<0||de>=oe?ee?"":void 0:(le=_e.charCodeAt(de),le<55296||le>56319||de+1===oe||(J=_e.charCodeAt(de+1))<56320||J>57343?ee?_e.charAt(de):le:ee?_e.slice(de,de+2):(le-55296<<10)+(J-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_is-regexp.js"),B=E("./node_modules/core-js/modules/_defined.js");X.exports=function(ee,q,pe){if(j(q))throw TypeError("String#"+pe+" doesn't accept regex!");return String(B(ee))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_to-integer.js"),B=Math.max,ee=Math.min;X.exports=function(q,pe){return q=j(q),q<0?B(q+pe,0):ee(q,pe)}},"./node_modules/core-js/modules/_to-integer.js":function(X,V){var E=Math.ceil,j=Math.floor;X.exports=function(B){return isNaN(B=+B)?0:(B>0?j:E)(B)}},"./node_modules/core-js/modules/_to-iobject.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_iobject.js"),B=E("./node_modules/core-js/modules/_defined.js");X.exports=function(ee){return j(B(ee))}},"./node_modules/core-js/modules/_to-length.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_to-integer.js"),B=Math.min;X.exports=function(ee){return ee>0?B(j(ee),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_defined.js");X.exports=function(B){return Object(j(B))}},"./node_modules/core-js/modules/_to-primitive.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_is-object.js");X.exports=function(B,ee){if(!j(B))return B;var q,pe;if(ee&&typeof(q=B.toString)=="function"&&!j(pe=q.call(B))||typeof(q=B.valueOf)=="function"&&!j(pe=q.call(B))||!ee&&typeof(q=B.toString)=="function"&&!j(pe=q.call(B)))return pe;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(X,V){var E=0,j=Math.random();X.exports=function(B){return"Symbol(".concat(B===void 0?"":B,")_",(++E+j).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_global.js"),B=E("./node_modules/core-js/modules/_core.js"),ee=E("./node_modules/core-js/modules/_library.js"),q=E("./node_modules/core-js/modules/_wks-ext.js"),pe=E("./node_modules/core-js/modules/_object-dp.js").f;X.exports=function(_e){var de=B.Symbol||(B.Symbol=ee?{}:j.Symbol||{});_e.charAt(0)!="_"&&!(_e in de)&&pe(de,_e,{value:q.f(_e)})}},"./node_modules/core-js/modules/_wks-ext.js":function(X,V,E){V.f=E("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_shared.js")("wks"),B=E("./node_modules/core-js/modules/_uid.js"),ee=E("./node_modules/core-js/modules/_global.js").Symbol,q=typeof ee=="function",pe=X.exports=function(_e){return j[_e]||(j[_e]=q&&ee[_e]||(q?ee:B)("Symbol."+_e))};pe.store=j},"./node_modules/core-js/modules/core.get-iterator-method.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_classof.js"),B=E("./node_modules/core-js/modules/_wks.js")("iterator"),ee=E("./node_modules/core-js/modules/_iterators.js");X.exports=E("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(q){if(q!=null)return q[B]||q["@@iterator"]||ee[j(q)]}},"./node_modules/core-js/modules/es6.array.from.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_ctx.js"),B=E("./node_modules/core-js/modules/_export.js"),ee=E("./node_modules/core-js/modules/_to-object.js"),q=E("./node_modules/core-js/modules/_iter-call.js"),pe=E("./node_modules/core-js/modules/_is-array-iter.js"),_e=E("./node_modules/core-js/modules/_to-length.js"),de=E("./node_modules/core-js/modules/_create-property.js"),oe=E("./node_modules/core-js/modules/core.get-iterator-method.js");B(B.S+B.F*!E("./node_modules/core-js/modules/_iter-detect.js")(function(le){Array.from(le)}),"Array",{from:function(J){var te=ee(J),he=typeof this=="function"?this:Array,be=arguments.length,Ee=be>1?arguments[1]:void 0,Be=Ee!==void 0,Pe=0,ze=oe(te),We,He,nt,dt;if(Be&&(Ee=j(Ee,be>2?arguments[2]:void 0,2)),ze!=null&&!(he==Array&&pe(ze)))for(dt=ze.call(te),He=new he;!(nt=dt.next()).done;Pe++)de(He,Pe,Be?q(dt,Ee,[nt.value,Pe],!0):nt.value);else for(We=_e(te.length),He=new he(We);We>Pe;Pe++)de(He,Pe,Be?Ee(te[Pe],Pe):te[Pe]);return He.length=Pe,He}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_add-to-unscopables.js"),B=E("./node_modules/core-js/modules/_iter-step.js"),ee=E("./node_modules/core-js/modules/_iterators.js"),q=E("./node_modules/core-js/modules/_to-iobject.js");X.exports=E("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(pe,_e){this._t=q(pe),this._i=0,this._k=_e},function(){var pe=this._t,_e=this._k,de=this._i++;return!pe||de>=pe.length?(this._t=void 0,B(1)):_e=="keys"?B(0,de):_e=="values"?B(0,pe[de]):B(0,[de,pe[de]])},"values"),ee.Arguments=ee.Array,j("keys"),j("values"),j("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_export.js");j(j.P,"Function",{bind:E("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js").f,B=Function.prototype,ee=/^\s*function ([^ (]*)/,q="name";q in B||E("./node_modules/core-js/modules/_descriptors.js")&&j(B,q,{configurable:!0,get:function(){try{return(""+this).match(ee)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_export.js"),B=E("./node_modules/core-js/modules/_global.js").isFinite;j(j.S,"Number",{isFinite:function(q){return typeof q=="number"&&B(q)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_classof.js"),B={};B[E("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",B+""!="[object z]"&&E("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+j(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_regexp-exec.js");E("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:j!==/./.exec},{exec:j})},"./node_modules/core-js/modules/es6.regexp.split.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_is-regexp.js"),B=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_species-constructor.js"),q=E("./node_modules/core-js/modules/_advance-string-index.js"),pe=E("./node_modules/core-js/modules/_to-length.js"),_e=E("./node_modules/core-js/modules/_regexp-exec-abstract.js"),de=E("./node_modules/core-js/modules/_regexp-exec.js"),oe=E("./node_modules/core-js/modules/_fails.js"),le=Math.min,J=[].push,te="split",he="length",be="lastIndex",Ee=4294967295,Be=!oe(function(){});E("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Pe,ze,We,He){var nt;return"abbc"[te](/(b)*/)[1]=="c"||"test"[te](/(?:)/,-1)[he]!=4||"ab"[te](/(?:ab)*/)[he]!=2||"."[te](/(.?)(.?)/)[he]!=4||"."[te](/()()/)[he]>1||""[te](/.?/)[he]?nt=function(dt,wt){var Mt=String(this);if(dt===void 0&&wt===0)return[];if(!j(dt))return We.call(Mt,dt,wt);for(var gt=[],Tt=(dt.ignoreCase?"i":"")+(dt.multiline?"m":"")+(dt.unicode?"u":"")+(dt.sticky?"y":""),$t=0,Vt=wt===void 0?Ee:wt>>>0,Zt=new RegExp(dt.source,Tt+"g"),En,et,sn;(En=de.call(Zt,Mt))&&(et=Zt[be],!(et>$t&&(gt.push(Mt.slice($t,En.index)),En[he]>1&&En.index<Mt[he]&&J.apply(gt,En.slice(1)),sn=En[0][he],$t=et,gt[he]>=Vt)));)Zt[be]===En.index&&Zt[be]++;return $t===Mt[he]?(sn||!Zt.test(""))&&gt.push(""):gt.push(Mt.slice($t)),gt[he]>Vt?gt.slice(0,Vt):gt}:"0"[te](void 0,0)[he]?nt=function(dt,wt){return dt===void 0&&wt===0?[]:We.call(this,dt,wt)}:nt=We,[function(wt,Mt){var gt=Pe(this),Tt=wt==null?void 0:wt[ze];return Tt!==void 0?Tt.call(wt,gt,Mt):nt.call(String(gt),wt,Mt)},function(dt,wt){var Mt=He(nt,dt,this,wt,nt!==We);if(Mt.done)return Mt.value;var gt=B(dt),Tt=String(this),$t=ee(gt,RegExp),Vt=gt.unicode,Zt=(gt.ignoreCase?"i":"")+(gt.multiline?"m":"")+(gt.unicode?"u":"")+(Be?"y":"g"),En=new $t(Be?gt:"^(?:"+gt.source+")",Zt),et=wt===void 0?Ee:wt>>>0;if(et===0)return[];if(Tt.length===0)return _e(En,Tt)===null?[Tt]:[];for(var sn=0,Sn=0,we=[];Sn<Tt.length;){En.lastIndex=Be?Sn:0;var N=_e(En,Be?Tt:Tt.slice(Sn)),D;if(N===null||(D=le(pe(En.lastIndex+(Be?0:Sn)),Tt.length))===sn)Sn=q(Tt,Sn,Vt);else{if(we.push(Tt.slice(sn,Sn)),we.length===et)return we;for(var xe=1;xe<=N.length-1;xe++)if(we.push(N[xe]),we.length===et)return we;Sn=sn=D}}return we.push(Tt.slice(sn)),we}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_export.js"),B=E("./node_modules/core-js/modules/_string-context.js"),ee="includes";j(j.P+j.F*E("./node_modules/core-js/modules/_fails-is-regexp.js")(ee),"String",{includes:function(pe){return!!~B(this,pe,ee).indexOf(pe,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_global.js"),B=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_descriptors.js"),q=E("./node_modules/core-js/modules/_export.js"),pe=E("./node_modules/core-js/modules/_redefine.js"),_e=E("./node_modules/core-js/modules/_meta.js").KEY,de=E("./node_modules/core-js/modules/_fails.js"),oe=E("./node_modules/core-js/modules/_shared.js"),le=E("./node_modules/core-js/modules/_set-to-string-tag.js"),J=E("./node_modules/core-js/modules/_uid.js"),te=E("./node_modules/core-js/modules/_wks.js"),he=E("./node_modules/core-js/modules/_wks-ext.js"),be=E("./node_modules/core-js/modules/_wks-define.js"),Ee=E("./node_modules/core-js/modules/_enum-keys.js"),Be=E("./node_modules/core-js/modules/_is-array.js"),Pe=E("./node_modules/core-js/modules/_an-object.js"),ze=E("./node_modules/core-js/modules/_is-object.js"),We=E("./node_modules/core-js/modules/_to-object.js"),He=E("./node_modules/core-js/modules/_to-iobject.js"),nt=E("./node_modules/core-js/modules/_to-primitive.js"),dt=E("./node_modules/core-js/modules/_property-desc.js"),wt=E("./node_modules/core-js/modules/_object-create.js"),Mt=E("./node_modules/core-js/modules/_object-gopn-ext.js"),gt=E("./node_modules/core-js/modules/_object-gopd.js"),Tt=E("./node_modules/core-js/modules/_object-gops.js"),$t=E("./node_modules/core-js/modules/_object-dp.js"),Vt=E("./node_modules/core-js/modules/_object-keys.js"),Zt=gt.f,En=$t.f,et=Mt.f,sn=j.Symbol,Sn=j.JSON,we=Sn&&Sn.stringify,N="prototype",D=te("_hidden"),xe=te("toPrimitive"),Ze={}.propertyIsEnumerable,Qe=oe("symbol-registry"),ct=oe("symbols"),ae=oe("op-symbols"),R=Object[N],z=typeof sn=="function"&&!!Tt.f,Se=j.QObject,Ve=!Se||!Se[N]||!Se[N].findChild,tt=ee&&de(function(){return wt(En({},"a",{get:function(){return En(this,"a",{value:7}).a}})).a!=7})?function(Ne,Oe,$e){var Fe=Zt(R,Oe);Fe&&delete R[Oe],En(Ne,Oe,$e),Fe&&Ne!==R&&En(R,Oe,Fe)}:En,at=function(Ne){var Oe=ct[Ne]=wt(sn[N]);return Oe._k=Ne,Oe},st=z&&typeof sn.iterator=="symbol"?function(Ne){return typeof Ne=="symbol"}:function(Ne){return Ne instanceof sn},Dt=function(Oe,$e,Fe){return Oe===R&&Dt(ae,$e,Fe),Pe(Oe),$e=nt($e,!0),Pe(Fe),B(ct,$e)?(Fe.enumerable?(B(Oe,D)&&Oe[D][$e]&&(Oe[D][$e]=!1),Fe=wt(Fe,{enumerable:dt(0,!1)})):(B(Oe,D)||En(Oe,D,dt(1,{})),Oe[D][$e]=!0),tt(Oe,$e,Fe)):En(Oe,$e,Fe)},Rt=function(Oe,$e){Pe(Oe);for(var Fe=Ee($e=He($e)),Ye=0,ft=Fe.length,ut;ft>Ye;)Dt(Oe,ut=Fe[Ye++],$e[ut]);return Oe},_n=function(Oe,$e){return $e===void 0?wt(Oe):Rt(wt(Oe),$e)},vn=function(Oe){var $e=Ze.call(this,Oe=nt(Oe,!0));return this===R&&B(ct,Oe)&&!B(ae,Oe)?!1:$e||!B(this,Oe)||!B(ct,Oe)||B(this,D)&&this[D][Oe]?$e:!0},an=function(Oe,$e){if(Oe=He(Oe),$e=nt($e,!0),!(Oe===R&&B(ct,$e)&&!B(ae,$e))){var Fe=Zt(Oe,$e);return Fe&&B(ct,$e)&&!(B(Oe,D)&&Oe[D][$e])&&(Fe.enumerable=!0),Fe}},mi=function(Oe){for(var $e=et(He(Oe)),Fe=[],Ye=0,ft;$e.length>Ye;)!B(ct,ft=$e[Ye++])&&ft!=D&&ft!=_e&&Fe.push(ft);return Fe},gi=function(Oe){for(var $e=Oe===R,Fe=et($e?ae:He(Oe)),Ye=[],ft=0,ut;Fe.length>ft;)B(ct,ut=Fe[ft++])&&(!$e||B(R,ut))&&Ye.push(ct[ut]);return Ye};z||(sn=function(){if(this instanceof sn)throw TypeError("Symbol is not a constructor!");var Oe=J(arguments.length>0?arguments[0]:void 0),$e=function(Fe){this===R&&$e.call(ae,Fe),B(this,D)&&B(this[D],Oe)&&(this[D][Oe]=!1),tt(this,Oe,dt(1,Fe))};return ee&&Ve&&tt(R,Oe,{configurable:!0,set:$e}),at(Oe)},pe(sn[N],"toString",function(){return this._k}),gt.f=an,$t.f=Dt,E("./node_modules/core-js/modules/_object-gopn.js").f=Mt.f=mi,E("./node_modules/core-js/modules/_object-pie.js").f=vn,Tt.f=gi,ee&&!E("./node_modules/core-js/modules/_library.js")&&pe(R,"propertyIsEnumerable",vn,!0),he.f=function(Ne){return at(te(Ne))}),q(q.G+q.W+q.F*!z,{Symbol:sn});for(var Ae="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;Ae.length>re;)te(Ae[re++]);for(var ue=Vt(te.store),me=0;ue.length>me;)be(ue[me++]);q(q.S+q.F*!z,"Symbol",{for:function(Ne){return B(Qe,Ne+="")?Qe[Ne]:Qe[Ne]=sn(Ne)},keyFor:function(Oe){if(!st(Oe))throw TypeError(Oe+" is not a symbol!");for(var $e in Qe)if(Qe[$e]===Oe)return $e},useSetter:function(){Ve=!0},useSimple:function(){Ve=!1}}),q(q.S+q.F*!z,"Object",{create:_n,defineProperty:Dt,defineProperties:Rt,getOwnPropertyDescriptor:an,getOwnPropertyNames:mi,getOwnPropertySymbols:gi});var Ie=de(function(){Tt.f(1)});q(q.S+q.F*Ie,"Object",{getOwnPropertySymbols:function(Oe){return Tt.f(We(Oe))}}),Sn&&q(q.S+q.F*(!z||de(function(){var Ne=sn();return we([Ne])!="[null]"||we({a:Ne})!="{}"||we(Object(Ne))!="{}"})),"JSON",{stringify:function(Oe){for(var $e=[Oe],Fe=1,Ye,ft;arguments.length>Fe;)$e.push(arguments[Fe++]);if(ft=Ye=$e[1],!(!ze(Ye)&&Oe===void 0||st(Oe)))return Be(Ye)||(Ye=function(ut,pt){if(typeof ft=="function"&&(pt=ft.call(this,ut,pt)),!st(pt))return pt}),$e[1]=Ye,we.apply(Sn,$e)}}),sn[N][xe]||E("./node_modules/core-js/modules/_hide.js")(sn[N],xe,sn[N].valueOf),le(sn,"Symbol"),le(Math,"Math",!0),le(j.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_export.js"),B=E("./node_modules/core-js/modules/_array-includes.js")(!0);j(j.P,"Array",{includes:function(q){return B(this,q,arguments.length>1?arguments[1]:void 0)}}),E("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_export.js"),B=E("./node_modules/core-js/modules/_own-keys.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js"),q=E("./node_modules/core-js/modules/_object-gopd.js"),pe=E("./node_modules/core-js/modules/_create-property.js");j(j.S,"Object",{getOwnPropertyDescriptors:function(de){for(var oe=ee(de),le=q.f,J=B(oe),te={},he=0,be,Ee;J.length>he;)Ee=le(oe,be=J[he++]),Ee!==void 0&&pe(te,be,Ee);return te}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(X,V,E){E("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(X,V,E){for(var j=E("./node_modules/core-js/modules/es6.array.iterator.js"),B=E("./node_modules/core-js/modules/_object-keys.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),q=E("./node_modules/core-js/modules/_global.js"),pe=E("./node_modules/core-js/modules/_hide.js"),_e=E("./node_modules/core-js/modules/_iterators.js"),de=E("./node_modules/core-js/modules/_wks.js"),oe=de("iterator"),le=de("toStringTag"),J=_e.Array,te={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},he=B(te),be=0;be<he.length;be++){var Ee=he[be],Be=te[Ee],Pe=q[Ee],ze=Pe&&Pe.prototype,We;if(ze&&(ze[oe]||pe(ze,oe,J),ze[le]||pe(ze,le,Ee),_e[Ee]=J,Be))for(We in j)ze[We]||ee(ze,We,j[We],!0)}},"./node_modules/crypt/crypt.js":function(X,V){(function(){var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j={rotl:function(B,ee){return B<<ee|B>>>32-ee},rotr:function(B,ee){return B<<32-ee|B>>>ee},endian:function(B){if(B.constructor==Number)return j.rotl(B,8)&16711935|j.rotl(B,24)&4278255360;for(var ee=0;ee<B.length;ee++)B[ee]=j.endian(B[ee]);return B},randomBytes:function(B){for(var ee=[];B>0;B--)ee.push(Math.floor(Math.random()*256));return ee},bytesToWords:function(B){for(var ee=[],q=0,pe=0;q<B.length;q++,pe+=8)ee[pe>>>5]|=B[q]<<24-pe%32;return ee},wordsToBytes:function(B){for(var ee=[],q=0;q<B.length*32;q+=8)ee.push(B[q>>>5]>>>24-q%32&255);return ee},bytesToHex:function(B){for(var ee=[],q=0;q<B.length;q++)ee.push((B[q]>>>4).toString(16)),ee.push((B[q]&15).toString(16));return ee.join("")},hexToBytes:function(B){for(var ee=[],q=0;q<B.length;q+=2)ee.push(parseInt(B.substr(q,2),16));return ee},bytesToBase64:function(B){for(var ee=[],q=0;q<B.length;q+=3)for(var pe=B[q]<<16|B[q+1]<<8|B[q+2],_e=0;_e<4;_e++)q*8+_e*6<=B.length*8?ee.push(E.charAt(pe>>>6*(3-_e)&63)):ee.push("=");return ee.join("")},base64ToBytes:function(B){B=B.replace(/[^A-Z0-9+\/]/ig,"");for(var ee=[],q=0,pe=0;q<B.length;pe=++q%4)pe!=0&&ee.push((E.indexOf(B.charAt(q-1))&Math.pow(2,-2*pe+8)-1)<<pe*2|E.indexOf(B.charAt(q))>>>6-pe*2);return ee}};X.exports=j})()},"./node_modules/is-buffer/index.js":function(X,V){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */X.exports=function(B){return B!=null&&(E(B)||j(B)||!!B._isBuffer)};function E(B){return!!B.constructor&&typeof B.constructor.isBuffer=="function"&&B.constructor.isBuffer(B)}function j(B){return typeof B.readFloatLE=="function"&&typeof B.slice=="function"&&E(B.slice(0,0))}},"./node_modules/md5/md5.js":function(X,V,E){(function(){var j=E("./node_modules/crypt/crypt.js"),B=E("./node_modules/charenc/charenc.js").utf8,ee=E("./node_modules/is-buffer/index.js"),q=E("./node_modules/charenc/charenc.js").bin,pe=function(_e,de){_e.constructor==String?de&&de.encoding==="binary"?_e=q.stringToBytes(_e):_e=B.stringToBytes(_e):ee(_e)?_e=Array.prototype.slice.call(_e,0):!Array.isArray(_e)&&_e.constructor!==Uint8Array&&(_e=_e.toString());for(var oe=j.bytesToWords(_e),le=_e.length*8,J=1732584193,te=-271733879,he=-1732584194,be=271733878,Ee=0;Ee<oe.length;Ee++)oe[Ee]=(oe[Ee]<<8|oe[Ee]>>>24)&16711935|(oe[Ee]<<24|oe[Ee]>>>8)&4278255360;oe[le>>>5]|=128<<le%32,oe[(le+64>>>9<<4)+14]=le;for(var Be=pe._ff,Pe=pe._gg,ze=pe._hh,We=pe._ii,Ee=0;Ee<oe.length;Ee+=16){var He=J,nt=te,dt=he,wt=be;J=Be(J,te,he,be,oe[Ee+0],7,-680876936),be=Be(be,J,te,he,oe[Ee+1],12,-389564586),he=Be(he,be,J,te,oe[Ee+2],17,606105819),te=Be(te,he,be,J,oe[Ee+3],22,-1044525330),J=Be(J,te,he,be,oe[Ee+4],7,-176418897),be=Be(be,J,te,he,oe[Ee+5],12,1200080426),he=Be(he,be,J,te,oe[Ee+6],17,-1473231341),te=Be(te,he,be,J,oe[Ee+7],22,-45705983),J=Be(J,te,he,be,oe[Ee+8],7,1770035416),be=Be(be,J,te,he,oe[Ee+9],12,-1958414417),he=Be(he,be,J,te,oe[Ee+10],17,-42063),te=Be(te,he,be,J,oe[Ee+11],22,-1990404162),J=Be(J,te,he,be,oe[Ee+12],7,1804603682),be=Be(be,J,te,he,oe[Ee+13],12,-40341101),he=Be(he,be,J,te,oe[Ee+14],17,-1502002290),te=Be(te,he,be,J,oe[Ee+15],22,1236535329),J=Pe(J,te,he,be,oe[Ee+1],5,-165796510),be=Pe(be,J,te,he,oe[Ee+6],9,-1069501632),he=Pe(he,be,J,te,oe[Ee+11],14,643717713),te=Pe(te,he,be,J,oe[Ee+0],20,-373897302),J=Pe(J,te,he,be,oe[Ee+5],5,-701558691),be=Pe(be,J,te,he,oe[Ee+10],9,38016083),he=Pe(he,be,J,te,oe[Ee+15],14,-660478335),te=Pe(te,he,be,J,oe[Ee+4],20,-405537848),J=Pe(J,te,he,be,oe[Ee+9],5,568446438),be=Pe(be,J,te,he,oe[Ee+14],9,-1019803690),he=Pe(he,be,J,te,oe[Ee+3],14,-187363961),te=Pe(te,he,be,J,oe[Ee+8],20,1163531501),J=Pe(J,te,he,be,oe[Ee+13],5,-1444681467),be=Pe(be,J,te,he,oe[Ee+2],9,-51403784),he=Pe(he,be,J,te,oe[Ee+7],14,1735328473),te=Pe(te,he,be,J,oe[Ee+12],20,-1926607734),J=ze(J,te,he,be,oe[Ee+5],4,-378558),be=ze(be,J,te,he,oe[Ee+8],11,-2022574463),he=ze(he,be,J,te,oe[Ee+11],16,1839030562),te=ze(te,he,be,J,oe[Ee+14],23,-35309556),J=ze(J,te,he,be,oe[Ee+1],4,-1530992060),be=ze(be,J,te,he,oe[Ee+4],11,1272893353),he=ze(he,be,J,te,oe[Ee+7],16,-155497632),te=ze(te,he,be,J,oe[Ee+10],23,-1094730640),J=ze(J,te,he,be,oe[Ee+13],4,681279174),be=ze(be,J,te,he,oe[Ee+0],11,-358537222),he=ze(he,be,J,te,oe[Ee+3],16,-722521979),te=ze(te,he,be,J,oe[Ee+6],23,76029189),J=ze(J,te,he,be,oe[Ee+9],4,-640364487),be=ze(be,J,te,he,oe[Ee+12],11,-421815835),he=ze(he,be,J,te,oe[Ee+15],16,530742520),te=ze(te,he,be,J,oe[Ee+2],23,-995338651),J=We(J,te,he,be,oe[Ee+0],6,-198630844),be=We(be,J,te,he,oe[Ee+7],10,1126891415),he=We(he,be,J,te,oe[Ee+14],15,-1416354905),te=We(te,he,be,J,oe[Ee+5],21,-57434055),J=We(J,te,he,be,oe[Ee+12],6,1700485571),be=We(be,J,te,he,oe[Ee+3],10,-1894986606),he=We(he,be,J,te,oe[Ee+10],15,-1051523),te=We(te,he,be,J,oe[Ee+1],21,-2054922799),J=We(J,te,he,be,oe[Ee+8],6,1873313359),be=We(be,J,te,he,oe[Ee+15],10,-30611744),he=We(he,be,J,te,oe[Ee+6],15,-1560198380),te=We(te,he,be,J,oe[Ee+13],21,1309151649),J=We(J,te,he,be,oe[Ee+4],6,-145523070),be=We(be,J,te,he,oe[Ee+11],10,-1120210379),he=We(he,be,J,te,oe[Ee+2],15,718787259),te=We(te,he,be,J,oe[Ee+9],21,-343485551),J=J+He>>>0,te=te+nt>>>0,he=he+dt>>>0,be=be+wt>>>0}return j.endian([J,te,he,be])};pe._ff=function(_e,de,oe,le,J,te,he){var be=_e+(de&oe|~de&le)+(J>>>0)+he;return(be<<te|be>>>32-te)+de},pe._gg=function(_e,de,oe,le,J,te,he){var be=_e+(de&le|oe&~le)+(J>>>0)+he;return(be<<te|be>>>32-te)+de},pe._hh=function(_e,de,oe,le,J,te,he){var be=_e+(de^oe^le)+(J>>>0)+he;return(be<<te|be>>>32-te)+de},pe._ii=function(_e,de,oe,le,J,te,he){var be=_e+(oe^(de|~le))+(J>>>0)+he;return(be<<te|be>>>32-te)+de},pe._blocksize=16,pe._digestsize=16,X.exports=function(_e,de){if(_e==null)throw new Error("Illegal argument "+_e);var oe=j.wordsToBytes(pe(_e,de));return de&&de.asBytes?oe:de&&de.asString?q.bytesToString(oe):j.bytesToHex(oe)}})()},"./node_modules/regenerator-runtime/runtime.js":function(X,V,E){var j=function(B){var ee=Object.prototype,q=ee.hasOwnProperty,pe,_e=typeof Symbol=="function"?Symbol:{},de=_e.iterator||"@@iterator",oe=_e.asyncIterator||"@@asyncIterator",le=_e.toStringTag||"@@toStringTag";function J(N,D,xe){return Object.defineProperty(N,D,{value:xe,enumerable:!0,configurable:!0,writable:!0}),N[D]}try{J({},"")}catch{J=function(D,xe,Ze){return D[xe]=Ze}}function te(N,D,xe,Ze){var Qe=D&&D.prototype instanceof We?D:We,ct=Object.create(Qe.prototype),ae=new sn(Ze||[]);return ct._invoke=Vt(N,xe,ae),ct}B.wrap=te;function he(N,D,xe){try{return{type:"normal",arg:N.call(D,xe)}}catch(Ze){return{type:"throw",arg:Ze}}}var be="suspendedStart",Ee="suspendedYield",Be="executing",Pe="completed",ze={};function We(){}function He(){}function nt(){}var dt={};dt[de]=function(){return this};var wt=Object.getPrototypeOf,Mt=wt&&wt(wt(Sn([])));Mt&&Mt!==ee&&q.call(Mt,de)&&(dt=Mt);var gt=nt.prototype=We.prototype=Object.create(dt);He.prototype=gt.constructor=nt,nt.constructor=He,He.displayName=J(nt,le,"GeneratorFunction");function Tt(N){["next","throw","return"].forEach(function(D){J(N,D,function(xe){return this._invoke(D,xe)})})}B.isGeneratorFunction=function(N){var D=typeof N=="function"&&N.constructor;return D?D===He||(D.displayName||D.name)==="GeneratorFunction":!1},B.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,nt):(N.__proto__=nt,J(N,le,"GeneratorFunction")),N.prototype=Object.create(gt),N},B.awrap=function(N){return{__await:N}};function $t(N,D){function xe(ct,ae,R,z){var Se=he(N[ct],N,ae);if(Se.type==="throw")z(Se.arg);else{var Ve=Se.arg,tt=Ve.value;return tt&&typeof tt=="object"&&q.call(tt,"__await")?D.resolve(tt.__await).then(function(at){xe("next",at,R,z)},function(at){xe("throw",at,R,z)}):D.resolve(tt).then(function(at){Ve.value=at,R(Ve)},function(at){return xe("throw",at,R,z)})}}var Ze;function Qe(ct,ae){function R(){return new D(function(z,Se){xe(ct,ae,z,Se)})}return Ze=Ze?Ze.then(R,R):R()}this._invoke=Qe}Tt($t.prototype),$t.prototype[oe]=function(){return this},B.AsyncIterator=$t,B.async=function(N,D,xe,Ze,Qe){Qe===void 0&&(Qe=Promise);var ct=new $t(te(N,D,xe,Ze),Qe);return B.isGeneratorFunction(D)?ct:ct.next().then(function(ae){return ae.done?ae.value:ct.next()})};function Vt(N,D,xe){var Ze=be;return function(ct,ae){if(Ze===Be)throw new Error("Generator is already running");if(Ze===Pe){if(ct==="throw")throw ae;return we()}for(xe.method=ct,xe.arg=ae;;){var R=xe.delegate;if(R){var z=Zt(R,xe);if(z){if(z===ze)continue;return z}}if(xe.method==="next")xe.sent=xe._sent=xe.arg;else if(xe.method==="throw"){if(Ze===be)throw Ze=Pe,xe.arg;xe.dispatchException(xe.arg)}else xe.method==="return"&&xe.abrupt("return",xe.arg);Ze=Be;var Se=he(N,D,xe);if(Se.type==="normal"){if(Ze=xe.done?Pe:Ee,Se.arg===ze)continue;return{value:Se.arg,done:xe.done}}else Se.type==="throw"&&(Ze=Pe,xe.method="throw",xe.arg=Se.arg)}}}function Zt(N,D){var xe=N.iterator[D.method];if(xe===pe){if(D.delegate=null,D.method==="throw"){if(N.iterator.return&&(D.method="return",D.arg=pe,Zt(N,D),D.method==="throw"))return ze;D.method="throw",D.arg=new TypeError("The iterator does not provide a 'throw' method")}return ze}var Ze=he(xe,N.iterator,D.arg);if(Ze.type==="throw")return D.method="throw",D.arg=Ze.arg,D.delegate=null,ze;var Qe=Ze.arg;if(!Qe)return D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,ze;if(Qe.done)D[N.resultName]=Qe.value,D.next=N.nextLoc,D.method!=="return"&&(D.method="next",D.arg=pe);else return Qe;return D.delegate=null,ze}Tt(gt),J(gt,le,"Generator"),gt[de]=function(){return this},gt.toString=function(){return"[object Generator]"};function En(N){var D={tryLoc:N[0]};1 in N&&(D.catchLoc=N[1]),2 in N&&(D.finallyLoc=N[2],D.afterLoc=N[3]),this.tryEntries.push(D)}function et(N){var D=N.completion||{};D.type="normal",delete D.arg,N.completion=D}function sn(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(En,this),this.reset(!0)}B.keys=function(N){var D=[];for(var xe in N)D.push(xe);return D.reverse(),function Ze(){for(;D.length;){var Qe=D.pop();if(Qe in N)return Ze.value=Qe,Ze.done=!1,Ze}return Ze.done=!0,Ze}};function Sn(N){if(N){var D=N[de];if(D)return D.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var xe=-1,Ze=function Qe(){for(;++xe<N.length;)if(q.call(N,xe))return Qe.value=N[xe],Qe.done=!1,Qe;return Qe.value=pe,Qe.done=!0,Qe};return Ze.next=Ze}}return{next:we}}B.values=Sn;function we(){return{value:pe,done:!0}}return sn.prototype={constructor:sn,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=pe,this.done=!1,this.delegate=null,this.method="next",this.arg=pe,this.tryEntries.forEach(et),!N)for(var D in this)D.charAt(0)==="t"&&q.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=pe)},stop:function(){this.done=!0;var N=this.tryEntries[0],D=N.completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var D=this;function xe(z,Se){return ct.type="throw",ct.arg=N,D.next=z,Se&&(D.method="next",D.arg=pe),!!Se}for(var Ze=this.tryEntries.length-1;Ze>=0;--Ze){var Qe=this.tryEntries[Ze],ct=Qe.completion;if(Qe.tryLoc==="root")return xe("end");if(Qe.tryLoc<=this.prev){var ae=q.call(Qe,"catchLoc"),R=q.call(Qe,"finallyLoc");if(ae&&R){if(this.prev<Qe.catchLoc)return xe(Qe.catchLoc,!0);if(this.prev<Qe.finallyLoc)return xe(Qe.finallyLoc)}else if(ae){if(this.prev<Qe.catchLoc)return xe(Qe.catchLoc,!0)}else if(R){if(this.prev<Qe.finallyLoc)return xe(Qe.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(N,D){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var Ze=this.tryEntries[xe];if(Ze.tryLoc<=this.prev&&q.call(Ze,"finallyLoc")&&this.prev<Ze.finallyLoc){var Qe=Ze;break}}Qe&&(N==="break"||N==="continue")&&Qe.tryLoc<=D&&D<=Qe.finallyLoc&&(Qe=null);var ct=Qe?Qe.completion:{};return ct.type=N,ct.arg=D,Qe?(this.method="next",this.next=Qe.finallyLoc,ze):this.complete(ct)},complete:function(N,D){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&D&&(this.next=D),ze},finish:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var xe=this.tryEntries[D];if(xe.finallyLoc===N)return this.complete(xe.completion,xe.afterLoc),et(xe),ze}},catch:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var xe=this.tryEntries[D];if(xe.tryLoc===N){var Ze=xe.completion;if(Ze.type==="throw"){var Qe=Ze.arg;et(xe)}return Qe}}throw new Error("illegal catch attempt")},delegateYield:function(N,D,xe){return this.delegate={iterator:Sn(N),resultName:D,nextLoc:xe},this.method==="next"&&(this.arg=pe),ze}},B}(X.exports);try{regeneratorRuntime=j}catch{Function("r","regeneratorRuntime = r")(j)}},"./src/api.js":function(X,V,E){E.r(V),E.d(V,"setup",function(){return Be}),E.d(V,"setupCache",function(){return Ee}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var j=E("axios"),B=E.n(j),ee=E("./src/request.js"),q=E("./src/cache.js");E.d(V,"serializeQuery",function(){return q.serializeQuery});var pe=E("./src/config.js"),_e=E("./src/utilities.js");function de(Pe,ze){if(Pe==null)return{};var We=oe(Pe,ze),He,nt;if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(Pe);for(nt=0;nt<dt.length;nt++)He=dt[nt],!(ze.indexOf(He)>=0)&&Object.prototype.propertyIsEnumerable.call(Pe,He)&&(We[He]=Pe[He])}return We}function oe(Pe,ze){if(Pe==null)return{};var We={},He=Object.keys(Pe),nt,dt;for(dt=0;dt<He.length;dt++)nt=He[dt],!(ze.indexOf(nt)>=0)&&(We[nt]=Pe[nt]);return We}function le(Pe,ze){var We=Object.keys(Pe);if(Object.getOwnPropertySymbols){var He=Object.getOwnPropertySymbols(Pe);ze&&(He=He.filter(function(nt){return Object.getOwnPropertyDescriptor(Pe,nt).enumerable})),We.push.apply(We,He)}return We}function J(Pe){for(var ze=1;ze<arguments.length;ze++){var We=arguments[ze]!=null?arguments[ze]:{};ze%2?le(Object(We),!0).forEach(function(He){te(Pe,He,We[He])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors(We)):le(Object(We)).forEach(function(He){Object.defineProperty(Pe,He,Object.getOwnPropertyDescriptor(We,He))})}return Pe}function te(Pe,ze,We){return ze in Pe?Object.defineProperty(Pe,ze,{value:We,enumerable:!0,configurable:!0,writable:!0}):Pe[ze]=We,Pe}function he(Pe,ze,We,He,nt,dt,wt){try{var Mt=Pe[dt](wt),gt=Mt.value}catch(Tt){We(Tt);return}Mt.done?ze(gt):Promise.resolve(gt).then(He,nt)}function be(Pe){return function(){var ze=this,We=arguments;return new Promise(function(He,nt){var dt=Pe.apply(ze,We);function wt(gt){he(dt,He,nt,wt,Mt,"next",gt)}function Mt(gt){he(dt,He,nt,wt,Mt,"throw",gt)}wt(void 0)})}}function Ee(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Pe=Object(pe.makeConfig)(Pe);function ze(He){return We.apply(this,arguments)}function We(){return We=be(regeneratorRuntime.mark(function He(nt){var dt,wt,Mt,gt,Tt;return regeneratorRuntime.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return dt=Object(pe.mergeRequestConfig)(Pe,nt),Vt.next=3,Object(ee.default)(dt,nt);case 3:if(wt=Vt.sent,Mt=wt.next,Object(_e.isFunction)(Mt)){Vt.next=7;break}return Vt.abrupt("return",Mt);case 7:return Vt.prev=7,Vt.next=10,dt.adapter(nt);case 10:wt=Vt.sent,Vt.next=16;break;case 13:Vt.prev=13,Vt.t0=Vt.catch(7),gt=Vt.t0;case 16:if(!gt){Vt.next=31;break}if(Tt=Object(_e.isFunction)(dt.readOnError)?dt.readOnError(gt,nt):dt.readOnError,!Tt){Vt.next=30;break}return Vt.prev=19,dt.acceptStale=!0,Vt.next=23,Object(ee.default)(dt,nt);case 23:return wt=Vt.sent,wt.next.request.stale=!0,Vt.abrupt("return",wt.next);case 28:Vt.prev=28,Vt.t1=Vt.catch(19);case 30:throw gt;case 31:return Vt.abrupt("return",Mt(wt));case 32:case"end":return Vt.stop()}},He,null,[[7,13],[19,28]])})),We.apply(this,arguments)}return{adapter:ze,config:Pe,store:Pe.store}}function Be(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=J(J(J({},pe.defaults.axios),Pe),{},{cache:J(J({},pe.defaults.axios.cache),Pe.cache)}),We=Ee(ze.cache);ze.cache;var He=de(ze,["cache"]),nt=B.a.create(J(J({},He),{},{adapter:We.adapter}));return nt.cache=We.store,nt}V.default={setup:Be,setupCache:Ee,serializeQuery:q.serializeQuery}},"./src/cache.js":function(X,V,E){E.r(V),E.d(V,"read",function(){return le}),E.d(V,"write",function(){return de}),E.d(V,"key",function(){return te}),E.d(V,"invalidate",function(){return Ee}),E.d(V,"serializeQuery",function(){return Be}),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("./src/utilities.js"),B=E("./node_modules/md5/md5.js"),ee=E.n(B),q=E("./src/serialize.js");function pe(Pe,ze,We,He,nt,dt,wt){try{var Mt=Pe[dt](wt),gt=Mt.value}catch(Tt){We(Tt);return}Mt.done?ze(gt):Promise.resolve(gt).then(He,nt)}function _e(Pe){return function(){var ze=this,We=arguments;return new Promise(function(He,nt){var dt=Pe.apply(ze,We);function wt(gt){pe(dt,He,nt,wt,Mt,"next",gt)}function Mt(gt){pe(dt,He,nt,wt,Mt,"throw",gt)}wt(void 0)})}}function de(Pe,ze,We){return oe.apply(this,arguments)}function oe(){return oe=_e(regeneratorRuntime.mark(function Pe(ze,We,He){var nt;return regeneratorRuntime.wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:return wt.prev=0,nt={expires:ze.expires,data:Object(q.default)(ze,We,He)},wt.next=4,ze.store.setItem(ze.uuid,nt);case 4:wt.next=19;break;case 6:if(wt.prev=6,wt.t0=wt.catch(0),ze.debug("Could not store response",wt.t0),!ze.clearOnError){wt.next=18;break}return wt.prev=10,wt.next=13,ze.store.clear();case 13:wt.next=18;break;case 15:wt.prev=15,wt.t1=wt.catch(10),ze.debug("Could not clear store",wt.t1);case 18:return wt.abrupt("return",!1);case 19:return wt.abrupt("return",!0);case 20:case"end":return wt.stop()}},Pe,null,[[0,6],[10,15]])})),oe.apply(this,arguments)}function le(Pe,ze){return J.apply(this,arguments)}function J(){return J=_e(regeneratorRuntime.mark(function Pe(ze,We){var He,nt,dt,wt,Mt,gt,Tt,$t;return regeneratorRuntime.wrap(function(Zt){for(;;)switch(Zt.prev=Zt.next){case 0:return He=ze.uuid,nt=ze.ignoreCache,Zt.next=3,ze.store.getItem(He);case 3:if(dt=Zt.sent,!(nt||!dt||!dt.data)){Zt.next=10;break}throw ze.debug("cache-miss",We.url),wt=new Error,wt.reason="cache-miss",wt.message="Entry not found from cache",wt;case 10:if(Mt=dt.expires,gt=dt.data,Tt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!Tt&&!ze.acceptStale&&Mt!==0&&Mt<Date.now())){Zt.next=18;break}throw ze.debug("cache-stale",We.url),$t=new Error,$t.reason="cache-stale",$t.message="Entry is stale",$t;case 18:return ze.debug(ze.acceptStale?"cache-hit-stale":"cache-hit",We.url),Zt.abrupt("return",gt);case 20:case"end":return Zt.stop()}},Pe)})),J.apply(this,arguments)}function te(Pe){if(Object(j.isFunction)(Pe.key))return Pe.key;var ze;return Object(j.isString)(Pe.key)?ze=function(He){var nt="".concat(He.baseURL?He.baseURL:"").concat(He.url),dt="".concat(Pe.key,"/").concat(nt).concat(Be(He));return He.data?dt+ee()(He.data):dt}:ze=function(He){var nt="".concat(He.baseURL?He.baseURL:"").concat(He.url),dt=nt+Be(He);return He.data?dt+ee()(He.data):dt},ze}function he(Pe,ze){return be.apply(this,arguments)}function be(){return be=_e(regeneratorRuntime.mark(function Pe(ze,We){var He;return regeneratorRuntime.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(He=We.method.toLowerCase(),!ze.exclude.methods.includes(He)){dt.next=4;break}return dt.next=4,ze.store.removeItem(ze.uuid);case 4:case"end":return dt.stop()}},Pe)})),be.apply(this,arguments)}function Ee(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(j.isFunction)(Pe.invalidate)?Pe.invalidate:he}function Be(Pe){if(!Pe.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Pe.params);var ze=Pe.params,We=Pe.params instanceof URLSearchParams;return We||(ze=new URLSearchParams,Object.keys(Pe.params).forEach(function(He){return ze.append(He,Pe.params[He])})),"?".concat(ze.toString())}V.default={read:le,write:de,key:te,invalidate:Ee,serializeQuery:Be}},"./src/config.js":function(X,V,E){E.r(V),E.d(V,"defaults",function(){return J}),E.d(V,"makeConfig",function(){return he}),E.d(V,"mergeRequestConfig",function(){return be}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("axios"),B=E.n(j),ee=E("./src/memory.js"),q=E("./src/cache.js");function pe(Ee,Be){var Pe=Object.keys(Ee);if(Object.getOwnPropertySymbols){var ze=Object.getOwnPropertySymbols(Ee);Be&&(ze=ze.filter(function(We){return Object.getOwnPropertyDescriptor(Ee,We).enumerable})),Pe.push.apply(Pe,ze)}return Pe}function _e(Ee){for(var Be=1;Be<arguments.length;Be++){var Pe=arguments[Be]!=null?arguments[Be]:{};Be%2?pe(Object(Pe),!0).forEach(function(ze){de(Ee,ze,Pe[ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(Pe)):pe(Object(Pe)).forEach(function(ze){Object.defineProperty(Ee,ze,Object.getOwnPropertyDescriptor(Pe,ze))})}return Ee}function de(Ee,Be,Pe){return Be in Ee?Object.defineProperty(Ee,Be,{value:Pe,enumerable:!0,configurable:!0,writable:!0}):Ee[Be]=Pe,Ee}var oe=function(){},le=function(){for(var Be,Pe=arguments.length,ze=new Array(Pe),We=0;We<Pe;We++)ze[We]=arguments[We];return(Be=console).log.apply(Be,["[axios-cache-adapter]"].concat(ze))},J={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:B.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},te=["limit","store","adapter","uuid","acceptStale"],he=function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=_e(_e(_e({},J.cache),Be),{},{exclude:_e(_e({},J.cache.exclude),Be.exclude)});return Pe.key=Object(q.key)(Pe),Pe.invalidate=Object(q.invalidate)(Pe),Pe.debug!==!1?Pe.debug=typeof Pe.debug=="function"?Pe.debug:le:Pe.debug=oe,Pe.store||(Pe.store=new ee.default),Pe.debug("Global cache config",Pe),Pe},be=function(Be,Pe){var ze=Pe.cache||{};ze&&te.forEach(function(He){return ze[He]?delete ze[He]:void 0});var We=_e(_e(_e({},Be),ze),{},{exclude:_e(_e({},Be.exclude),ze.exclude)});return We.debug===!0&&(We.debug=le),ze.key&&(We.key=Object(q.key)(ze)),We.uuid=We.key(Pe),Be.debug("Request config for ".concat(Pe.url),We),We};V.default={defaults:J,makeConfig:he,mergeRequestConfig:be}},"./src/exclude.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js");var j=E("./src/utilities.js");function B(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=arguments.length>1?arguments[1]:void 0,pe=ee.exclude,_e=pe===void 0?{}:pe,de=ee.debug,oe=q.method.toLowerCase();if(oe==="head"||_e.methods.includes(oe))return de("Excluding request by HTTP method ".concat(q.url)),!0;if(typeof _e.filter=="function"&&_e.filter(q))return de("Excluding request by filter ".concat(q.url)),!0;var le=/\?.*$/.test(q.url)||Object(j.isObject)(q.params)&&Object.keys(q.params).length!==0||typeof URLSearchParams<"u"&&q.params instanceof URLSearchParams;if(_e.query&&le)return de("Excluding request by query ".concat(q.url)),!0;var J=_e.paths||[],te=J.some(function(he){return q.url.match(he)});return te?(de("Excluding request by url match ".concat(q.url)),!0):!1}V.default=B},"./src/index.node.js":function(X,V,E){E.r(V);var j=E("./src/api.js");E.d(V,"setup",function(){return j.setup}),E.d(V,"setupCache",function(){return j.setupCache}),E.d(V,"serializeQuery",function(){return j.serializeQuery});var B=E("./src/redis.js");E.d(V,"RedisStore",function(){return B.default});var ee=E("./src/redis-default.js");E.d(V,"RedisDefaultStore",function(){return ee.default}),V.default={setup:j.setup,setupCache:j.setupCache,serializeQuery:j.serializeQuery,RedisStore:B.default,RedisDefaultStore:ee.default}},"./src/limit.js":function(X,V,E){E.r(V),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function j(pe,_e,de,oe,le,J,te){try{var he=pe[J](te),be=he.value}catch(Ee){de(Ee);return}he.done?_e(be):Promise.resolve(be).then(oe,le)}function B(pe){return function(){var _e=this,de=arguments;return new Promise(function(oe,le){var J=pe.apply(_e,de);function te(be){j(J,oe,le,te,he,"next",be)}function he(be){j(J,oe,le,te,he,"throw",be)}te(void 0)})}}function ee(pe){return q.apply(this,arguments)}function q(){return q=B(regeneratorRuntime.mark(function pe(_e){var de,oe;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,_e.store.length();case 2:if(de=J.sent,!(de<_e.limit)){J.next=5;break}return J.abrupt("return");case 5:return _e.debug("Current store size: ".concat(de)),J.next=8,_e.store.iterate(function(te,he){oe||(oe={value:te,key:he}),te.expires<oe.value.expires&&(oe={value:te,key:he})});case 8:if(!oe){J.next=12;break}return _e.debug("Removing item: ".concat(oe.key)),J.next=12,_e.store.removeItem(oe.key);case 12:case"end":return J.stop()}},pe)})),q.apply(this,arguments)}V.default=ee},"./src/memory.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var j=E("./src/utilities.js");function B(oe,le,J,te,he,be,Ee){try{var Be=oe[be](Ee),Pe=Be.value}catch(ze){J(ze);return}Be.done?le(Pe):Promise.resolve(Pe).then(te,he)}function ee(oe){return function(){var le=this,J=arguments;return new Promise(function(te,he){var be=oe.apply(le,J);function Ee(Pe){B(be,te,he,Ee,Be,"next",Pe)}function Be(Pe){B(be,te,he,Ee,Be,"throw",Pe)}Ee(void 0)})}}function q(oe,le){if(!(oe instanceof le))throw new TypeError("Cannot call a class as a function")}function pe(oe,le){for(var J=0;J<le.length;J++){var te=le[J];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(oe,te.key,te)}}function _e(oe,le,J){return le&&pe(oe.prototype,le),J&&pe(oe,J),oe}var de=function(){function oe(){q(this,oe),this.store={}}return _e(oe,[{key:"getItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){var be;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return be=this.store[he]||null,Be.abrupt("return",JSON.parse(be));case 2:case"end":return Be.stop()}},te,this)}));function J(te){return le.apply(this,arguments)}return J}()},{key:"setItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he,be){return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return this.store[he]=JSON.stringify(be),Be.abrupt("return",be);case 2:case"end":return Be.stop()}},te,this)}));function J(te,he){return le.apply(this,arguments)}return J}()},{key:"removeItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:delete this.store[he];case 1:case"end":return Ee.stop()}},te,this)}));function J(te){return le.apply(this,arguments)}return J}()},{key:"clear",value:function(){var le=ee(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:this.store={};case 1:case"end":return be.stop()}},te,this)}));function J(){return le.apply(this,arguments)}return J}()},{key:"length",value:function(){var le=ee(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.abrupt("return",Object.keys(this.store).length);case 1:case"end":return be.stop()}},te,this)}));function J(){return le.apply(this,arguments)}return J}()},{key:"iterate",value:function(J){return Promise.all(Object(j.mapObject)(this.store,J))}}]),oe}();V.default=de},"./src/redis-default.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var j=E("util");function B(oe,le,J,te,he,be,Ee){try{var Be=oe[be](Ee),Pe=Be.value}catch(ze){J(ze);return}Be.done?le(Pe):Promise.resolve(Pe).then(te,he)}function ee(oe){return function(){var le=this,J=arguments;return new Promise(function(te,he){var be=oe.apply(le,J);function Ee(Pe){B(be,te,he,Ee,Be,"next",Pe)}function Be(Pe){B(be,te,he,Ee,Be,"throw",Pe)}Ee(void 0)})}}function q(oe,le){if(!(oe instanceof le))throw new TypeError("Cannot call a class as a function")}function pe(oe,le){for(var J=0;J<le.length;J++){var te=le[J];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(oe,te.key,te)}}function _e(oe,le,J){return le&&pe(oe.prototype,le),J&&pe(oe,J),oe}var de=function(){function oe(le){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q(this,oe);var te=new TypeError("First parameter must be a valid RedisClient instance.");try{if(le.constructor.name!=="RedisClient")throw te}catch{throw te}this.client=le,this.prefix=J.prefix||"axios-cache",this.maxScanCount=J.maxScanCount||1e3,this.getAsync=Object(j.promisify)(le.get).bind(le),this.psetexAsync=Object(j.promisify)(le.psetex).bind(le),this.delAsync=Object(j.promisify)(le.del).bind(le),this.scanAsync=Object(j.promisify)(le.scan).bind(le)}return _e(oe,[{key:"calculateTTL",value:function(J){var te=Date.now();return J.expires&&J.expires>te?J.expires-te:-1}},{key:"transformKey",value:function(J){return this.prefix+"_"+J}},{key:"getItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){var be;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,this.getAsync(this.transformKey(he));case 2:if(Be.t0=Be.sent,Be.t0){Be.next=5;break}Be.t0=null;case 5:return be=Be.t0,Be.abrupt("return",JSON.parse(be));case 7:case"end":return Be.stop()}},te,this)}));function J(te){return le.apply(this,arguments)}return J}()},{key:"setItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he,be){var Ee,Be;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(Ee=this.transformKey(he),Be=this.calculateTTL(be),!(Be>0)){ze.next=5;break}return ze.next=5,this.psetexAsync(Ee,Be,JSON.stringify(be));case 5:return ze.abrupt("return",be);case 6:case"end":return ze.stop()}},te,this)}));function J(te,he){return le.apply(this,arguments)}return J}()},{key:"removeItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.delAsync(this.transformKey(he));case 2:case"end":return Ee.stop()}},te,this)}));function J(te){return le.apply(this,arguments)}return J}()},{key:"scan",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){var be,Ee;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:be="0";case 1:return Pe.next=3,this.scanAsync(be,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Ee=Pe.sent,be=Ee[0],Pe.next=7,he(Ee[1]);case 7:if(be!=="0"){Pe.next=1;break}case 8:case"end":return Pe.stop()}},te,this)}));function J(te){return le.apply(this,arguments)}return J}()},{key:"clear",value:function(){var le=ee(regeneratorRuntime.mark(function te(){var he=this;return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.scan(function(Be){return he.delAsync(Be)});case 2:case"end":return Ee.stop()}},te,this)}));function J(){return le.apply(this,arguments)}return J}()},{key:"length",value:function(){var le=ee(regeneratorRuntime.mark(function te(){var he;return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return he=0,Ee.next=3,this.scan(function(Be){he+=Be.length});case 3:return Ee.abrupt("return",he);case 4:case"end":return Ee.stop()}},te,this)}));function J(){return le.apply(this,arguments)}return J}()},{key:"iterate",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){var be=this,Ee,Be;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return Be=function(){return Be=ee(regeneratorRuntime.mark(function He(nt){var dt,wt;return regeneratorRuntime.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return gt.next=2,this.getAsync(nt);case 2:if(gt.t0=gt.sent,gt.t0){gt.next=5;break}gt.t0=null;case 5:return dt=gt.t0,wt=JSON.parse(dt),gt.next=9,he(wt,nt);case 9:return gt.abrupt("return",gt.sent);case 10:case"end":return gt.stop()}},He,this)})),Be.apply(this,arguments)},Ee=function(He){return Be.apply(this,arguments)},ze.next=4,this.scan(function(We){return Promise.all(We.map(Ee.bind(be)))});case 4:return ze.abrupt("return",Promise.resolve([]));case 5:case"end":return ze.stop()}},te,this)}));function J(te){return le.apply(this,arguments)}return J}()}]),oe}();V.default=de},"./src/redis.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var j=E("util"),B=E("./src/utilities.js");function ee(le,J,te,he,be,Ee,Be){try{var Pe=le[Ee](Be),ze=Pe.value}catch(We){te(We);return}Pe.done?J(ze):Promise.resolve(ze).then(he,be)}function q(le){return function(){var J=this,te=arguments;return new Promise(function(he,be){var Ee=le.apply(J,te);function Be(ze){ee(Ee,he,be,Be,Pe,"next",ze)}function Pe(ze){ee(Ee,he,be,Be,Pe,"throw",ze)}Be(void 0)})}}function pe(le,J){if(!(le instanceof J))throw new TypeError("Cannot call a class as a function")}function _e(le,J){for(var te=0;te<J.length;te++){var he=J[te];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(le,he.key,he)}}function de(le,J,te){return J&&_e(le.prototype,J),te&&_e(le,te),le}var oe=function(){function le(J){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";pe(this,le);var he=new TypeError("First parameter must be a valid RedisClient instance.");try{if(J.constructor.name!=="RedisClient")throw he}catch{throw he}this.client=J,this.HASH_KEY=te,this.hgetAsync=Object(j.promisify)(J.hget).bind(J),this.hsetAsync=Object(j.promisify)(J.hset).bind(J),this.hdelAsync=Object(j.promisify)(J.hdel).bind(J),this.delAsync=Object(j.promisify)(J.del).bind(J),this.hlenAsync=Object(j.promisify)(J.hlen).bind(J),this.hgetallAsync=Object(j.promisify)(J.hgetall).bind(J)}return de(le,[{key:"getItem",value:function(){var J=q(regeneratorRuntime.mark(function he(be){var Ee;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hgetAsync(this.HASH_KEY,be);case 2:if(Pe.t0=Pe.sent,Pe.t0){Pe.next=5;break}Pe.t0=null;case 5:return Ee=Pe.t0,Pe.abrupt("return",JSON.parse(Ee));case 7:case"end":return Pe.stop()}},he,this)}));function te(he){return J.apply(this,arguments)}return te}()},{key:"setItem",value:function(){var J=q(regeneratorRuntime.mark(function he(be,Ee){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hsetAsync(this.HASH_KEY,be,JSON.stringify(Ee));case 2:return Pe.abrupt("return",Ee);case 3:case"end":return Pe.stop()}},he,this)}));function te(he,be){return J.apply(this,arguments)}return te}()},{key:"removeItem",value:function(){var J=q(regeneratorRuntime.mark(function he(be){return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,this.hdelAsync(this.HASH_KEY,be);case 2:case"end":return Be.stop()}},he,this)}));function te(he){return J.apply(this,arguments)}return te}()},{key:"clear",value:function(){var J=q(regeneratorRuntime.mark(function he(){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Ee.stop()}},he,this)}));function te(){return J.apply(this,arguments)}return te}()},{key:"length",value:function(){var J=q(regeneratorRuntime.mark(function he(){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Ee.stop()}},he,this)}));function te(){return J.apply(this,arguments)}return te}()},{key:"iterate",value:function(){var J=q(regeneratorRuntime.mark(function he(be){var Ee;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Ee=Pe.sent,Pe.abrupt("return",Promise.all(Object(B.mapObject)(Ee,be)));case 4:case"end":return Pe.stop()}},he,this)}));function te(he){return J.apply(this,arguments)}return te}()}]),le}();V.default=oe},"./src/request.js":function(X,V,E){E.r(V),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("./src/response.js"),B=E("./src/exclude.js"),ee=E("./src/cache.js");function q(oe,le,J,te,he,be,Ee){try{var Be=oe[be](Ee),Pe=Be.value}catch(ze){J(ze);return}Be.done?le(Pe):Promise.resolve(Pe).then(te,he)}function pe(oe){return function(){var le=this,J=arguments;return new Promise(function(te,he){var be=oe.apply(le,J);function Ee(Pe){q(be,te,he,Ee,Be,"next",Pe)}function Be(Pe){q(be,te,he,Ee,Be,"throw",Pe)}Ee(void 0)})}}function _e(oe,le){return de.apply(this,arguments)}function de(){return de=pe(regeneratorRuntime.mark(function oe(le,J){var te,he,be;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return be=function(){return le.excludeFromCache=!0,{config:le,next:te}},le.debug("uuid",le.uuid),te=function(){for(var ze=arguments.length,We=new Array(ze),He=0;He<ze;He++)We[He]=arguments[He];return j.default.apply(void 0,[le,J].concat(We))},Be.next=5,le.invalidate(le,J);case 5:if(!Object(B.default)(le,J)){Be.next=7;break}return Be.abrupt("return",be());case 7:return Be.prev=7,Be.next=10,Object(ee.read)(le,J);case 10:return he=Be.sent,he.config=J,he.request={fromCache:!0},Be.abrupt("return",{config:le,next:he});case 16:if(Be.prev=16,Be.t0=Be.catch(7),!(le.clearOnStale&&Be.t0.reason==="cache-stale")){Be.next=21;break}return Be.next=21,le.store.removeItem(le.uuid);case 21:return Be.abrupt("return",{config:le,next:te});case 22:case"end":return Be.stop()}},oe,null,[[7,16]])})),de.apply(this,arguments)}V.default=_e},"./src/response.js":function(X,V,E){E.r(V),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("./src/limit.js"),B=E("./src/cache.js"),ee=E("./node_modules/cache-control-esm/index.js");function q(oe,le,J,te,he,be,Ee){try{var Be=oe[be](Ee),Pe=Be.value}catch(ze){J(ze);return}Be.done?le(Pe):Promise.resolve(Pe).then(te,he)}function pe(oe){return function(){var le=this,J=arguments;return new Promise(function(te,he){var be=oe.apply(le,J);function Ee(Pe){q(be,te,he,Ee,Be,"next",Pe)}function Be(Pe){q(be,te,he,Ee,Be,"throw",Pe)}Ee(void 0)})}}function _e(oe,le,J){return de.apply(this,arguments)}function de(){return de=pe(regeneratorRuntime.mark(function oe(le,J,te){var he,be,Ee,Be,Pe;return regeneratorRuntime.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(he=te.request,be=he===void 0?{}:he,Ee=te.headers,Be=Ee===void 0?{}:Ee,!(["arraybuffer","blob"].indexOf(be.responseType)>-1)){We.next=3;break}return We.abrupt("return",te);case 3:if(Pe={},le.readHeaders&&(Be["cache-control"]?(Pe=Object(ee.parse)(Be["cache-control"]),(Pe.noCache||Pe.noStore)&&(le.excludeFromCache=!0)):Be.expires?le.expires=new Date(Be.expires).getTime():le.expires=new Date().getTime()),le.excludeFromCache){We.next=15;break}if(Pe.maxAge||Pe.maxAge===0?le.expires=Date.now()+Pe.maxAge*1e3:le.readHeaders||(le.expires=le.maxAge===0?Date.now():Date.now()+le.maxAge),!le.limit){We.next=11;break}return le.debug("Detected limit: ".concat(le.limit)),We.next=11,Object(j.default)(le);case 11:return We.next=13,Object(B.write)(le,J,te);case 13:We.next=16;break;case 15:te.request.excludedFromCache=!0;case 16:return We.abrupt("return",te);case 17:case"end":return We.stop()}},oe)})),de.apply(this,arguments)}V.default=_e},"./src/serialize.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function j(q,pe){if(q==null)return{};var _e=B(q,pe),de,oe;if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(q);for(oe=0;oe<le.length;oe++)de=le[oe],!(pe.indexOf(de)>=0)&&Object.prototype.propertyIsEnumerable.call(q,de)&&(_e[de]=q[de])}return _e}function B(q,pe){if(q==null)return{};var _e={},de=Object.keys(q),oe,le;for(le=0;le<de.length;le++)oe=de[le],!(pe.indexOf(oe)>=0)&&(_e[oe]=q[oe]);return _e}function ee(q,pe,_e){if(_e.data)try{_e.data=JSON.parse(_e.data)}catch(oe){q.debug("Could not parse data as JSON",oe)}_e.request,_e.config;var de=j(_e,["request","config"]);return de}V.default=ee},"./src/utilities.js":function(X,V,E){E.r(V),E.d(V,"isObject",function(){return B}),E.d(V,"getTag",function(){return ee}),E.d(V,"isFunction",function(){return q}),E.d(V,"isString",function(){return pe}),E.d(V,"mapObject",function(){return _e}),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function j(de){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?j=function(le){return typeof le}:j=function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},j(de)}function B(de){var oe=j(de);return de!=null&&(oe==="object"||oe==="function")}function ee(de){return de===null?de===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(de)}function q(de){if(!B(de))return!1;var oe=ee(de);return oe==="[object Function]"||oe==="[object AsyncFunction]"||oe==="[object GeneratorFunction]"||oe==="[object Proxy]"}function pe(de){var oe=j(de);return oe==="string"||oe==="object"&&de!=null&&!Array.isArray(de)&&ee(de)==="[object String]"}function _e(de,oe){return B(de)?Object.keys(de).map(function(le){return oe(de[le],le)}):[]}},axios:function(X,V){X.exports=ie},util:function(X,V){X.exports=A.default}})})});const U={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},F=L.setupCache({maxAge:60*60*24*1e3}),ce=C.default.create({adapter:F.adapter}),K=async(W,$={})=>{const ie={...U,...$},[X,V]=i.lngLatToGoogle(W,ie.zoomBase),E=ie.tileUrl.replace("{z}",String(ie.zoomBase)).replace("{x}",String(X)).replace("{y}",String(V)),j={code:"",prefecture:"",city:""};let B;try{const pe=await ce.get(E,{responseType:"arraybuffer"});B=Buffer.from(pe.data,"binary")}catch(pe){throw new Error(pe)}const ee=new d.VectorTile(new b.default(B));let q=Object.keys(ee.layers);return Array.isArray(q)||(q=[q]),q.forEach(pe=>{const _e=ee.layers[pe];if(_e&&ie.layer===_e.name)for(let de=0;de<_e.length;de++){const oe=_e.feature(de).toGeoJSON(X,V,ie.zoomBase);q.length>1&&(oe.properties.vt_layer=pe);const le={type:"FeatureCollection",features:[oe]};t.geoContains(le,W)&&(j.code=String(oe.id).length===5?String(oe.id):`0${String(oe.id)}`,j.prefecture=oe.properties.prefecture,j.city=oe.properties.city)}}),j};e.openReverseGeocoder=K})(tI);const b5={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},S5={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},E5={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"",placeholder:"",adminLevel:4},{key:"addr:city",displayName:"23",placeholder:"",adminLevel:7},{key:"addr:suburb",displayName:"",placeholder:""},{key:"addr:quarter",displayName:"",placeholder:"",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"",placeholder:"1"},{key:"addr:block_number",displayName:"",placeholder:"17"},{key:"addr:housenumber",displayName:"",placeholder:"6",prefix:"-"}]},T5={defaultComment:" ",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},qS={JPN:E5,CHN:b5,DEU:S5,KOR:T5};function pA(e,t,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function C5(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!KS(e[0])||!KS(e[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:e};return pA(a,t,i)}function I5(e,t,i){i===void 0&&(i={});for(var a=0,c=e;a<c.length;a++){var p=c[a];if(p.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<p[p.length-1].length;d++)if(p[p.length-1][d]!==p[0][d])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:e};return pA(u,t,i)}function KS(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function mA(e,t,i){if(e!==null)for(var a,c,p,d,u,b,C,A=0,w=0,T,L=e.type,U=L==="FeatureCollection",F=L==="Feature",ce=U?e.features.length:1,K=0;K<ce;K++){C=U?e.features[K].geometry:F?e.geometry:e,T=C?C.type==="GeometryCollection":!1,u=T?C.geometries.length:1;for(var W=0;W<u;W++){var $=0,ie=0;if(d=T?C.geometries[W]:C,d!==null){b=d.coordinates;var X=d.type;switch(A=i&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(t(b,w,K,$,ie)===!1)return!1;w++,$++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(t(b[a],w,K,$,ie)===!1)return!1;w++,X==="MultiPoint"&&$++}X==="LineString"&&$++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(c=0;c<b[a].length-A;c++){if(t(b[a][c],w,K,$,ie)===!1)return!1;w++}X==="MultiLineString"&&$++,X==="Polygon"&&ie++}X==="Polygon"&&$++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(ie=0,c=0;c<b[a].length;c++){for(p=0;p<b[a][c].length-A;p++){if(t(b[a][c][p],w,K,$,ie)===!1)return!1;w++}ie++}$++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(mA(d.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function A5(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function P5(e){return e.type==="Feature"?e.geometry:e}function k5(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var a=A5(e),c=P5(t),p=c.type,d=t.bbox,u=c.coordinates;if(d&&M5(a,d)===!1)return!1;p==="Polygon"&&(u=[u]);for(var b=!1,C=0;C<u.length&&!b;C++)if(YS(a,u[C][0],i.ignoreBoundary)){for(var A=!1,w=1;w<u[C].length&&!A;)YS(a,u[C][w],!i.ignoreBoundary)&&(A=!0),w++;A||(b=!0)}return b}function YS(e,t,i){var a=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,p=t.length-1;c<t.length;p=c++){var d=t[c][0],u=t[c][1],b=t[p][0],C=t[p][1],A=e[1]*(d-b)+u*(b-e[0])+C*(e[0]-d)===0&&(d-e[0])*(b-e[0])<=0&&(u-e[1])*(C-e[1])<=0;if(A)return!i;var w=u>e[1]!=C>e[1]&&e[0]<(b-d)*(e[1]-u)/(C-u)+d;w&&(a=!a)}return a}function M5(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function z5(e,t){t===void 0&&(t={});var i=0,a=0,c=0;return mA(e,function(p){i+=p[0],a+=p[1],c++},!0),C5([i/c,a/c],t.properties)}const R5=()=>{const[e,t]=_t.useState(!1);return{detectCountry:_t.useCallback(async(a,c)=>{t(!0);const d=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const u of d.features)if(k5([a,c],u.geometry))return console.log("country: ",u.properties),t(!1),u;t(!1)},[]),loadingCountry:e}},ev=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var u;const[c,p]=_t.useState((u=e.properties)==null?void 0:u[t.key]);_t.useEffect(()=>{var b;p((b=e.properties)==null?void 0:b[t.key])},[e]);const d=_t.useCallback(b=>{p(b.currentTarget.value),a&&a(b)},[]);return yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:d}),yt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(b=>{if(parseInt(b.tags.admin_level)===t.adminLevel)return yt.jsx("option",{value:b.tags.name},b.id);if(b.type==="node"&&t.adminLevel===9)return yt.jsx("option",{value:b.tags.name},b.id)})})]})},O5=({feature:e,fields:t})=>e.properties?yt.jsxs(yt.Fragment,{children:[t.postcodeField&&yt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,L5=({placeholder:e,defaultValue:t})=>{const[i,a]=_t.useState(t);_t.useEffect(()=>{a(t)},[t]);const c=_t.useCallback(p=>{a(p.currentTarget.value)},[]);return yt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var jg={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */jg.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,p="Expected a function",d="__lodash_hash_undefined__",u=1,b=2,C=1/0,A=9007199254740991,w="[object Arguments]",T="[object Array]",L="[object Boolean]",U="[object Date]",F="[object Error]",ce="[object Function]",K="[object GeneratorFunction]",W="[object Map]",$="[object Number]",ie="[object Object]",X="[object Promise]",V="[object RegExp]",E="[object Set]",j="[object String]",B="[object Symbol]",ee="[object WeakMap]",q="[object ArrayBuffer]",pe="[object DataView]",_e="[object Float32Array]",de="[object Float64Array]",oe="[object Int8Array]",le="[object Int16Array]",J="[object Int32Array]",te="[object Uint8Array]",he="[object Uint8ClampedArray]",be="[object Uint16Array]",Ee="[object Uint32Array]",Be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,ze=/^\./,We=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,He=/[\\^$.*+?()[\]{}|]/g,nt=/\\(\\)?/g,dt=/\w*$/,wt=/^\[object .+?Constructor\]$/,Mt=/^(?:0|[1-9]\d*)$/,gt={};gt[_e]=gt[de]=gt[oe]=gt[le]=gt[J]=gt[te]=gt[he]=gt[be]=gt[Ee]=!0,gt[w]=gt[T]=gt[q]=gt[L]=gt[pe]=gt[U]=gt[F]=gt[ce]=gt[W]=gt[$]=gt[ie]=gt[V]=gt[E]=gt[j]=gt[ee]=!1;var Tt={};Tt[w]=Tt[T]=Tt[q]=Tt[pe]=Tt[L]=Tt[U]=Tt[_e]=Tt[de]=Tt[oe]=Tt[le]=Tt[J]=Tt[W]=Tt[$]=Tt[ie]=Tt[V]=Tt[E]=Tt[j]=Tt[B]=Tt[te]=Tt[he]=Tt[be]=Tt[Ee]=!0,Tt[F]=Tt[ce]=Tt[ee]=!1;var $t=typeof Gl=="object"&&Gl&&Gl.Object===Object&&Gl,Vt=typeof self=="object"&&self&&self.Object===Object&&self,Zt=$t||Vt||Function("return this")(),En=t&&!t.nodeType&&t,et=En&&!0&&e&&!e.nodeType&&e,sn=et&&et.exports===En,Sn=sn&&$t.process,we=function(){try{return Sn&&Sn.binding("util")}catch{}}(),N=we&&we.isTypedArray;function D(G,ve){return G.set(ve[0],ve[1]),G}function xe(G,ve){return G.add(ve),G}function Ze(G,ve,De){switch(De.length){case 0:return G.call(ve);case 1:return G.call(ve,De[0]);case 2:return G.call(ve,De[0],De[1]);case 3:return G.call(ve,De[0],De[1],De[2])}return G.apply(ve,De)}function Qe(G,ve){for(var De=-1,lt=G?G.length:0;++De<lt&&ve(G[De],De,G)!==!1;);return G}function ct(G,ve){for(var De=-1,lt=ve.length,Ot=G.length;++De<lt;)G[Ot+De]=ve[De];return G}function ae(G,ve,De,lt){var Ot=-1,Ct=G?G.length:0;for(lt&&Ct&&(De=G[++Ot]);++Ot<Ct;)De=ve(De,G[Ot],Ot,G);return De}function R(G,ve){for(var De=-1,lt=G?G.length:0;++De<lt;)if(ve(G[De],De,G))return!0;return!1}function z(G){return function(ve){return ve==null?i:ve[G]}}function Se(G,ve){for(var De=-1,lt=Array(G);++De<G;)lt[De]=ve(De);return lt}function Ve(G){return function(ve){return G(ve)}}function tt(G,ve){return G==null?i:G[ve]}function at(G){var ve=!1;if(G!=null&&typeof G.toString!="function")try{ve=!!(G+"")}catch{}return ve}function st(G){var ve=-1,De=Array(G.size);return G.forEach(function(lt,Ot){De[++ve]=[Ot,lt]}),De}function Dt(G,ve){return function(De){return G(ve(De))}}function Rt(G){var ve=-1,De=Array(G.size);return G.forEach(function(lt){De[++ve]=lt}),De}var _n=Array.prototype,vn=Function.prototype,an=Object.prototype,mi=Zt["__core-js_shared__"],gi=function(){var G=/[^.]+$/.exec(mi&&mi.keys&&mi.keys.IE_PROTO||"");return G?"Symbol(src)_1."+G:""}(),Ae=vn.toString,re=an.hasOwnProperty,ue=Ae.call(Object),me=an.toString,Ie=RegExp("^"+Ae.call(re).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=sn?Zt.Buffer:i,Oe=Zt.Symbol,$e=Zt.Uint8Array,Fe=Dt(Object.getPrototypeOf,Object),Ye=Object.create,ft=an.propertyIsEnumerable,ut=_n.splice,pt=Object.getOwnPropertySymbols,Gt=Ne?Ne.isBuffer:i,ln=Dt(Object.keys,Object),tn=Math.max,Tn=Zo(Zt,"DataView"),cn=Zo(Zt,"Map"),Zn=Zo(Zt,"Promise"),Gn=Zo(Zt,"Set"),ir=Zo(Zt,"WeakMap"),dn=Zo(Object,"create"),or=!ft.call({valueOf:1},"valueOf"),Mr=jn(Tn),ii=jn(cn),Wr=jn(Zn),Yr=jn(Gn),yi=jn(ir),da=Oe?Oe.prototype:i,fa=da?da.valueOf:i,$n=da?da.toString:i;function In(){}function wo(G){var ve=-1,De=G?G.length:0;for(this.clear();++ve<De;){var lt=G[ve];this.set(lt[0],lt[1])}}function vi(){this.__data__=dn?dn(null):{}}function _i(G){return this.has(G)&&delete this.__data__[G]}function sc(G){var ve=this.__data__;if(dn){var De=ve[G];return De===d?i:De}return re.call(ve,G)?ve[G]:i}function Zr(G){var ve=this.__data__;return dn?ve[G]!==i:re.call(ve,G)}function Pi(G,ve){var De=this.__data__;return De[G]=dn&&ve===i?d:ve,this}wo.prototype.clear=vi,wo.prototype.delete=_i,wo.prototype.get=sc,wo.prototype.has=Zr,wo.prototype.set=Pi;function lo(G){var ve=-1,De=G?G.length:0;for(this.clear();++ve<De;){var lt=G[ve];this.set(lt[0],lt[1])}}function Ho(){this.__data__=[]}function wr(G){var ve=this.__data__,De=cl(ve,G);if(De<0)return!1;var lt=ve.length-1;return De==lt?ve.pop():ut.call(ve,De,1),!0}function pa(G){var ve=this.__data__,De=cl(ve,G);return De<0?i:ve[De][1]}function hs(G){return cl(this.__data__,G)>-1}function cr(G,ve){var De=this.__data__,lt=cl(De,G);return lt<0?De.push([G,ve]):De[lt][1]=ve,this}lo.prototype.clear=Ho,lo.prototype.delete=wr,lo.prototype.get=pa,lo.prototype.has=hs,lo.prototype.set=cr;function Jr(G){var ve=-1,De=G?G.length:0;for(this.clear();++ve<De;){var lt=G[ve];this.set(lt[0],lt[1])}}function Hi(){this.__data__={hash:new wo,map:new(cn||lo),string:new wo}}function al(G){return xa(this,G).delete(G)}function uo(G){return xa(this,G).get(G)}function fu(G){return xa(this,G).has(G)}function Os(G,ve){return xa(this,G).set(G,ve),this}Jr.prototype.clear=Hi,Jr.prototype.delete=al,Jr.prototype.get=uo,Jr.prototype.has=fu,Jr.prototype.set=Os;function On(G){var ve=-1,De=G?G.length:0;for(this.__data__=new Jr;++ve<De;)this.add(G[ve])}function ll(G){return this.__data__.set(G,d),this}function co(G){return this.__data__.has(G)}On.prototype.add=On.prototype.push=ll,On.prototype.has=co;function xi(G){this.__data__=new lo(G)}function ma(){this.__data__=new lo}function ac(G){return this.__data__.delete(G)}function Nh(G){return this.__data__.get(G)}function ul(G){return this.__data__.has(G)}function lc(G,ve){var De=this.__data__;if(De instanceof lo){var lt=De.__data__;if(!cn||lt.length<c-1)return lt.push([G,ve]),this;De=this.__data__=new Jr(lt)}return De.set(G,ve),this}xi.prototype.clear=ma,xi.prototype.delete=ac,xi.prototype.get=Nh,xi.prototype.has=ul,xi.prototype.set=lc;function pu(G,ve){var De=Xr(G)||qo(G)?Se(G.length,String):[],lt=De.length,Ot=!!lt;for(var Ct in G)(ve||re.call(G,Ct))&&!(Ot&&(Ct=="length"||Rn(Ct,lt)))&&De.push(Ct);return De}function mu(G,ve,De){(De!==i&&!bo(G[ve],De)||typeof ve=="number"&&De===i&&!(ve in G))&&(G[ve]=De)}function gu(G,ve,De){var lt=G[ve];(!(re.call(G,ve)&&bo(lt,De))||De===i&&!(ve in G))&&(G[ve]=De)}function cl(G,ve){for(var De=G.length;De--;)if(bo(G[De][0],ve))return De;return-1}function hl(G,ve){return G&&xu(ve,fo(ve),G)}function Wo(G,ve,De,lt,Ot,Ct,Wt){var Kt;if(lt&&(Kt=Ct?lt(G,Ot,Ct,Wt):lt(G)),Kt!==i)return Kt;if(!Mi(G))return G;var mn=Xr(G);if(mn){if(Kt=Us(G),!ve)return gc(G,Kt)}else{var Bn=Wi(G),gn=Bn==ce||Bn==K;if(Ta(G))return yu(G,ve);if(Bn==ie||Bn==w||gn&&!Ct){if(at(G))return Ct?G:{};if(Kt=vc(gn?{}:G),!ve)return $h(G,hl(Kt,G))}else{if(!Tt[Bn])return Ct?G:{};Kt=Su(G,Bn,Wo,ve)}}Wt||(Wt=new xi);var Xn=Wt.get(G);if(Xn)return Xn;if(Wt.set(G,Kt),!mn)var Nn=De?bu(G):fo(G);return Qe(Nn||G,function(Jn,zr){Nn&&(zr=Jn,Jn=G[zr]),gu(Kt,zr,Wo(Jn,ve,De,lt,zr,G,Wt))}),Kt}function uc(G){return Mi(G)?Ye(G):{}}var cc=Gh(ds),dl=Hh();function ds(G,ve){return G&&dl(G,ve,fo)}function ga(G,ve){ve=xl(ve,G)?[ve]:gl(ve);for(var De=0,lt=ve.length;G!=null&&De<lt;)G=G[Hn(ve[De++])];return De&&De==lt?G:i}function ki(G,ve,De){var lt=ve(G);return Xr(G)?lt:ct(lt,De(G))}function ya(G){return me.call(G)}function va(G,ve){return G!=null&&ve in Object(G)}function fs(G,ve,De,lt,Ot){return G===ve?!0:G==null||ve==null||!Mi(G)&&!So(ve)?G!==G&&ve!==ve:fl(G,ve,fs,De,lt,Ot)}function fl(G,ve,De,lt,Ot,Ct){var Wt=Xr(G),Kt=Xr(ve),mn=T,Bn=T;Wt||(mn=Wi(G),mn=mn==w?ie:mn),Kt||(Bn=Wi(ve),Bn=Bn==w?ie:Bn);var gn=mn==ie&&!at(G),Xn=Bn==ie&&!at(ve),Nn=mn==Bn;if(Nn&&!gn)return Ct||(Ct=new xi),Wt||Ia(G)?vl(G,ve,De,lt,Ot,Ct):_l(G,ve,mn,De,lt,Ot,Ct);if(!(Ot&b)){var Jn=gn&&re.call(G,"__wrapped__"),zr=Xn&&re.call(ve,"__wrapped__");if(Jn||zr){var pr=Jn?G.value():G,ai=zr?ve.value():ve;return Ct||(Ct=new xi),De(pr,ai,lt,Ot,Ct)}}return Nn?(Ct||(Ct=new xi),wu(G,ve,De,lt,Ot,Ct)):!1}function _a(G,ve,De,lt){var Ot=De.length,Ct=Ot,Wt=!lt;if(G==null)return!Ct;for(G=Object(G);Ot--;){var Kt=De[Ot];if(Wt&&Kt[2]?Kt[1]!==G[Kt[0]]:!(Kt[0]in G))return!1}for(;++Ot<Ct;){Kt=De[Ot];var mn=Kt[0],Bn=G[mn],gn=Kt[1];if(Wt&&Kt[2]){if(Bn===i&&!(mn in G))return!1}else{var Xn=new xi;if(lt)var Nn=lt(Bn,gn,mn,G,ve,Xn);if(!(Nn===i?fs(gn,Bn,lt,u|b,Xn):Nn))return!1}}return!0}function Ls(G){if(!Mi(G)||wa(G))return!1;var ve=Hs(G)||at(G)?Ie:wt;return ve.test(jn(G))}function Uh(G){return So(G)&&Ca(G.length)&&!!gt[me.call(G)]}function hc(G){return typeof G=="function"?G:G==null?Ko:typeof G=="object"?Xr(G)?pl(G[0],G[1]):ps(G):Zs(G)}function dc(G){if(!wl(G))return ln(G);var ve=[];for(var De in Object(G))re.call(G,De)&&De!="constructor"&&ve.push(De);return ve}function fc(G){if(!Mi(G))return Pn(G);var ve=wl(G),De=[];for(var lt in G)lt=="constructor"&&(ve||!re.call(G,lt))||De.push(lt);return De}function ps(G){var ve=yc(G);return ve.length==1&&ve[0][2]?Eu(ve[0][0],ve[0][1]):function(De){return De===G||_a(De,G,ve)}}function pl(G,ve){return xl(G)&&hr(ve)?Eu(Hn(G),ve):function(De){var lt=si(De,G);return lt===i&&lt===ve?ms(De,G):fs(ve,lt,i,u|b)}}function oi(G,ve,De,lt,Ot){if(G!==ve){if(!(Xr(ve)||Ia(ve)))var Ct=fc(ve);Qe(Ct||ve,function(Wt,Kt){if(Ct&&(Kt=Wt,Wt=ve[Kt]),Mi(Wt))Ot||(Ot=new xi),Qr(G,ve,Kt,De,oi,lt,Ot);else{var mn=lt?lt(G[Kt],Wt,Kt+"",G,ve,Ot):i;mn===i&&(mn=Wt),mu(G,Kt,mn)}})}}function Qr(G,ve,De,lt,Ot,Ct,Wt){var Kt=G[De],mn=ve[De],Bn=Wt.get(mn);if(Bn){mu(G,De,Bn);return}var gn=Ct?Ct(Kt,mn,De+"",G,ve,Wt):i,Xn=gn===i;Xn&&(gn=mn,Xr(mn)||Ia(mn)?Xr(Kt)?gn=Kt:Sl(Kt)?gn=gc(Kt):(Xn=!1,gn=Wo(mn,!0)):El(mn)||qo(mn)?qo(Kt)?gn=sr(Kt):!Mi(Kt)||lt&&Hs(Kt)?(Xn=!1,gn=Wo(mn,!0)):gn=Kt:Xn=!1),Xn&&(Wt.set(mn,gn),Ot(gn,mn,lt,Ct,Wt),Wt.delete(mn)),mu(G,De,gn)}function Fs(G){return function(ve){return ga(ve,G)}}function Ln(G,ve){return ve=tn(ve===i?G.length-1:ve,0),function(){for(var De=arguments,lt=-1,Ot=tn(De.length-ve,0),Ct=Array(Ot);++lt<Ot;)Ct[lt]=De[ve+lt];lt=-1;for(var Wt=Array(ve+1);++lt<ve;)Wt[lt]=De[lt];return Wt[ve]=Ct,Ze(G,this,Wt)}}function ml(G){if(typeof G=="string")return G;if(Tl(G))return $n?$n.call(G):"";var ve=G+"";return ve=="0"&&1/G==-C?"-0":ve}function gl(G){return Xr(G)?G:ba(G)}function yu(G,ve){if(ve)return G.slice();var De=new G.constructor(G.length);return G.copy(De),De}function js(G){var ve=new G.constructor(G.byteLength);return new $e(ve).set(new $e(G)),ve}function vu(G,ve){var De=ve?js(G.buffer):G.buffer;return new G.constructor(De,G.byteOffset,G.byteLength)}function _u(G,ve,De){var lt=ve?De(st(G),!0):st(G);return ae(lt,D,new G.constructor)}function yl(G){var ve=new G.constructor(G.source,dt.exec(G));return ve.lastIndex=G.lastIndex,ve}function pc(G,ve,De){var lt=ve?De(Rt(G),!0):Rt(G);return ae(lt,xe,new G.constructor)}function mc(G){return fa?Object(fa.call(G)):{}}function Ds(G,ve){var De=ve?js(G.buffer):G.buffer;return new G.constructor(De,G.byteOffset,G.length)}function gc(G,ve){var De=-1,lt=G.length;for(ve||(ve=Array(lt));++De<lt;)ve[De]=G[De];return ve}function xu(G,ve,De,lt){De||(De={});for(var Ot=-1,Ct=ve.length;++Ot<Ct;){var Wt=ve[Ot],Kt=lt?lt(De[Wt],G[Wt],Wt,De,G):i;gu(De,Wt,Kt===i?G[Wt]:Kt)}return De}function $h(G,ve){return xu(G,Xo(G),ve)}function Vh(G){return Ln(function(ve,De){var lt=-1,Ot=De.length,Ct=Ot>1?De[Ot-1]:i,Wt=Ot>2?De[2]:i;for(Ct=G.length>3&&typeof Ct=="function"?(Ot--,Ct):i,Wt&&$s(De[0],De[1],Wt)&&(Ct=Ot<3?i:Ct,Ot=1),ve=Object(ve);++lt<Ot;){var Kt=De[lt];Kt&&G(ve,Kt,lt,Ct)}return ve})}function Gh(G,ve){return function(De,lt){if(De==null)return De;if(!ho(De))return G(De,lt);for(var Ot=De.length,Ct=ve?Ot:-1,Wt=Object(De);(ve?Ct--:++Ct<Ot)&&lt(Wt[Ct],Ct,Wt)!==!1;);return De}}function Hh(G){return function(ve,De,lt){for(var Ot=-1,Ct=Object(ve),Wt=lt(ve),Kt=Wt.length;Kt--;){var mn=Wt[G?Kt:++Ot];if(De(Ct[mn],mn,Ct)===!1)break}return ve}}function vl(G,ve,De,lt,Ot,Ct){var Wt=Ot&b,Kt=G.length,mn=ve.length;if(Kt!=mn&&!(Wt&&mn>Kt))return!1;var Bn=Ct.get(G);if(Bn&&Ct.get(ve))return Bn==ve;var gn=-1,Xn=!0,Nn=Ot&u?new On:i;for(Ct.set(G,ve),Ct.set(ve,G);++gn<Kt;){var Jn=G[gn],zr=ve[gn];if(lt)var pr=Wt?lt(zr,Jn,gn,ve,G,Ct):lt(Jn,zr,gn,G,ve,Ct);if(pr!==i){if(pr)continue;Xn=!1;break}if(Nn){if(!R(ve,function(ai,To){if(!Nn.has(To)&&(Jn===ai||De(Jn,ai,lt,Ot,Ct)))return Nn.add(To)})){Xn=!1;break}}else if(!(Jn===zr||De(Jn,zr,lt,Ot,Ct))){Xn=!1;break}}return Ct.delete(G),Ct.delete(ve),Xn}function _l(G,ve,De,lt,Ot,Ct,Wt){switch(De){case pe:if(G.byteLength!=ve.byteLength||G.byteOffset!=ve.byteOffset)return!1;G=G.buffer,ve=ve.buffer;case q:return!(G.byteLength!=ve.byteLength||!lt(new $e(G),new $e(ve)));case L:case U:case $:return bo(+G,+ve);case F:return G.name==ve.name&&G.message==ve.message;case V:case j:return G==ve+"";case W:var Kt=st;case E:var mn=Ct&b;if(Kt||(Kt=Rt),G.size!=ve.size&&!mn)return!1;var Bn=Wt.get(G);if(Bn)return Bn==ve;Ct|=u,Wt.set(G,ve);var gn=vl(Kt(G),Kt(ve),lt,Ot,Ct,Wt);return Wt.delete(G),gn;case B:if(fa)return fa.call(G)==fa.call(ve)}return!1}function wu(G,ve,De,lt,Ot,Ct){var Wt=Ot&b,Kt=fo(G),mn=Kt.length,Bn=fo(ve),gn=Bn.length;if(mn!=gn&&!Wt)return!1;for(var Xn=mn;Xn--;){var Nn=Kt[Xn];if(!(Wt?Nn in ve:re.call(ve,Nn)))return!1}var Jn=Ct.get(G);if(Jn&&Ct.get(ve))return Jn==ve;var zr=!0;Ct.set(G,ve),Ct.set(ve,G);for(var pr=Wt;++Xn<mn;){Nn=Kt[Xn];var ai=G[Nn],To=ve[Nn];if(lt)var xc=Wt?lt(To,ai,Nn,ve,G,Ct):lt(ai,To,Nn,G,ve,Ct);if(!(xc===i?ai===To||De(ai,To,lt,Ot,Ct):xc)){zr=!1;break}pr||(pr=Nn=="constructor")}if(zr&&!pr){var Xs=G.constructor,Pa=ve.constructor;Xs!=Pa&&"constructor"in G&&"constructor"in ve&&!(typeof Xs=="function"&&Xs instanceof Xs&&typeof Pa=="function"&&Pa instanceof Pa)&&(zr=!1)}return Ct.delete(G),Ct.delete(ve),zr}function bu(G){return ki(G,fo,Xo)}function Bs(){var G=In.iteratee||Yo;return G=G===Yo?hc:G,arguments.length?G(arguments[0],arguments[1]):G}function xa(G,ve){var De=G.__data__;return _c(ve)?De[typeof ve=="string"?"string":"hash"]:De.map}function yc(G){for(var ve=fo(G),De=ve.length;De--;){var lt=ve[De],Ot=G[lt];ve[De]=[lt,Ot,hr(Ot)]}return ve}function Zo(G,ve){var De=tt(G,ve);return Ls(De)?De:i}var Xo=pt?Dt(pt,Object):Il,Wi=ya;(Tn&&Wi(new Tn(new ArrayBuffer(1)))!=pe||cn&&Wi(new cn)!=W||Zn&&Wi(Zn.resolve())!=X||Gn&&Wi(new Gn)!=E||ir&&Wi(new ir)!=ee)&&(Wi=function(G){var ve=me.call(G),De=ve==ie?G.constructor:i,lt=De?jn(De):i;if(lt)switch(lt){case Mr:return pe;case ii:return W;case Wr:return X;case Yr:return E;case yi:return ee}return ve});function Ns(G,ve,De){ve=xl(ve,G)?[ve]:gl(ve);for(var lt,Ot=-1,Wt=ve.length;++Ot<Wt;){var Ct=Hn(ve[Ot]);if(!(lt=G!=null&&De(G,Ct)))break;G=G[Ct]}if(lt)return lt;var Wt=G?G.length:0;return!!Wt&&Ca(Wt)&&Rn(Ct,Wt)&&(Xr(G)||qo(G))}function Us(G){var ve=G.length,De=G.constructor(ve);return ve&&typeof G[0]=="string"&&re.call(G,"index")&&(De.index=G.index,De.input=G.input),De}function vc(G){return typeof G.constructor=="function"&&!wl(G)?uc(Fe(G)):{}}function Su(G,ve,De,lt){var Ot=G.constructor;switch(ve){case q:return js(G);case L:case U:return new Ot(+G);case pe:return vu(G,lt);case _e:case de:case oe:case le:case J:case te:case he:case be:case Ee:return Ds(G,lt);case W:return _u(G,lt,De);case $:case j:return new Ot(G);case V:return yl(G);case E:return pc(G,lt,De);case B:return mc(G)}}function Rn(G,ve){return ve=ve??A,!!ve&&(typeof G=="number"||Mt.test(G))&&G>-1&&G%1==0&&G<ve}function $s(G,ve,De){if(!Mi(De))return!1;var lt=typeof ve;return(lt=="number"?ho(De)&&Rn(ve,De.length):lt=="string"&&ve in De)?bo(De[ve],G):!1}function xl(G,ve){if(Xr(G))return!1;var De=typeof G;return De=="number"||De=="symbol"||De=="boolean"||G==null||Tl(G)?!0:Pe.test(G)||!Be.test(G)||ve!=null&&G in Object(ve)}function _c(G){var ve=typeof G;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?G!=="__proto__":G===null}function wa(G){return!!gi&&gi in G}function wl(G){var ve=G&&G.constructor,De=typeof ve=="function"&&ve.prototype||an;return G===De}function hr(G){return G===G&&!Mi(G)}function Eu(G,ve){return function(De){return De==null?!1:De[G]===ve&&(ve!==i||G in Object(De))}}function Pn(G){var ve=[];if(G!=null)for(var De in Object(G))ve.push(De);return ve}var ba=Ea(function(G){G=Eo(G);var ve=[];return ze.test(G)&&ve.push(""),G.replace(We,function(De,lt,Ot,Ct){ve.push(Ot?Ct.replace(nt,"$1"):lt||De)}),ve});function Hn(G){if(typeof G=="string"||Tl(G))return G;var ve=G+"";return ve=="0"&&1/G==-C?"-0":ve}function jn(G){if(G!=null){try{return Ae.call(G)}catch{}try{return G+""}catch{}}return""}function Vs(G){for(var ve=-1,De=G?G.length:0,lt=0,Ot=[];++ve<De;){var Ct=G[ve];Ct&&(Ot[lt++]=Ct)}return Ot}function Sa(G,ve){var De=Xr(G)?Qe:cc;return De(G,Bs(ve,3))}function Ea(G,ve){if(typeof G!="function"||ve&&typeof ve!="function")throw new TypeError(p);var De=function(){var lt=arguments,Ot=ve?ve.apply(this,lt):lt[0],Ct=De.cache;if(Ct.has(Ot))return Ct.get(Ot);var Wt=G.apply(this,lt);return De.cache=Ct.set(Ot,Wt),Wt};return De.cache=new(Ea.Cache||Jr),De}Ea.Cache=Jr;function bl(G){return Wo(G,!1,!0)}function bo(G,ve){return G===ve||G!==G&&ve!==ve}function qo(G){return Sl(G)&&re.call(G,"callee")&&(!ft.call(G,"callee")||me.call(G)==w)}var Xr=Array.isArray;function ho(G){return G!=null&&Ca(G.length)&&!Hs(G)}function Sl(G){return So(G)&&ho(G)}var Ta=Gt||Aa;function Gs(G){if(ho(G)&&(Xr(G)||typeof G=="string"||typeof G.splice=="function"||Ta(G)||qo(G)))return!G.length;var ve=Wi(G);if(ve==W||ve==E)return!G.size;if(or||wl(G))return!ln(G).length;for(var De in G)if(re.call(G,De))return!1;return!0}function Hs(G){var ve=Mi(G)?me.call(G):"";return ve==ce||ve==K}function Ca(G){return typeof G=="number"&&G>-1&&G%1==0&&G<=A}function Mi(G){var ve=typeof G;return!!G&&(ve=="object"||ve=="function")}function So(G){return!!G&&typeof G=="object"}function El(G){if(!So(G)||me.call(G)!=ie||at(G))return!1;var ve=Fe(G);if(ve===null)return!0;var De=re.call(ve,"constructor")&&ve.constructor;return typeof De=="function"&&De instanceof De&&Ae.call(De)==ue}function Tl(G){return typeof G=="symbol"||So(G)&&me.call(G)==B}var Ia=N?Ve(N):Uh;function sr(G){return xu(G,Cl(G))}function Eo(G){return G==null?"":ml(G)}function si(G,ve,De){var lt=G==null?i:ga(G,ve);return lt===i?De:lt}function ms(G,ve){return G!=null&&Ns(G,ve,va)}function fo(G){return ho(G)?pu(G):dc(G)}function Cl(G){return ho(G)?pu(G,!0):fc(G)}var Ws=Vh(function(G,ve,De){oi(G,ve,De)});function Ko(G){return G}function Yo(G){return hc(typeof G=="function"?G:Wo(G,!0))}function Zs(G){return xl(G)?z(Hn(G)):Fs(G)}function Il(){return[]}function Aa(){return!1}In.compact=Vs,In.iteratee=Yo,In.keys=fo,In.keysIn=Cl,In.memoize=Ea,In.merge=Ws,In.property=Zs,In.toPlainObject=sr,In.clone=bl,In.eq=bo,In.forEach=Sa,In.get=si,In.hasIn=ms,In.identity=Ko,In.isArguments=qo,In.isArray=Xr,In.isArrayLike=ho,In.isArrayLikeObject=Sl,In.isBuffer=Ta,In.isEmpty=Gs,In.isFunction=Hs,In.isLength=Ca,In.isObject=Mi,In.isObjectLike=So,In.isPlainObject=El,In.isSymbol=Tl,In.isTypedArray=Ia,In.stubArray=Il,In.stubFalse=Aa,In.toString=Eo,In.each=Sa,In.VERSION=a,et&&((et.exports=In)._=In,En._=In)}).call(Gl)})(jg,jg.exports);var F5=jg.exports,j5=Fm;function Fm(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)Fm(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)Fm(e.geometries[a],t);else if(i==="Feature")Fm(e.geometry,t);else if(i==="Polygon")JS(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)JS(e.coordinates[a],t);return e}function JS(e,t){if(e.length!==0){QS(e[0],t);for(var i=1;i<e.length;i++)QS(e[i],!t)}}function QS(e,t){for(var i=0,a=0,c=0,p=e.length,d=p-1;c<p;d=c++){var u=(e[c][0]-e[d][0])*(e[d][1]+e[c][1]),b=i+u;a+=Math.abs(i)>=Math.abs(u)?i-b+u:u-b+i,i=b}i+a>=0!=!!t&&e.reverse()}const D5=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var B5=D5,zn=F5,gm=j5,jm={};B5.forEach(function(e){if(e.polygon==="all")jm[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),jm[e.key]={},jm[e.key][t]=i}});function N5(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:zn.merge(e,t)}var Dg={};Dg=function(e,t,i){t=zn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:jm,deduplicator:N5},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=p(e):a=c(e),a;function c(b){var C=new Array,A=new Array,w=new Array;function T(X){var V=zn.clone(X);V.lat=X.center.lat,V.lon=X.center.lon,V.__is_center_placeholder=!0,C.push(V)}function L(X){var V=zn.clone(X);V.nodes=[];function E(j,B,ee){var q={type:"node",id:"_"+V.type+"/"+V.id+"bounds"+ee,lat:j,lon:B};V.nodes.push(q.id),C.push(q)}E(V.bounds.minlat,V.bounds.minlon,1),E(V.bounds.maxlat,V.bounds.minlon,2),E(V.bounds.maxlat,V.bounds.maxlon,3),E(V.bounds.minlat,V.bounds.maxlon,4),V.nodes.push(V.nodes[0]),V.__is_bounds_placeholder=!0,A.push(V)}function U(X){function V(E,j,B){var ee={type:"node",id:B,lat:E,lon:j};C.push(ee)}zn.isArray(X.nodes)||(X.nodes=X.geometry.map(function(E){return E!==null?"_anonymous@"+E.lat+"/"+E.lon:"_anonymous@unknown_location"})),X.geometry.forEach(function(E,j){E&&V(E.lat,E.lon,X.nodes[j])})}function F(X){function V(j,B,ee){var q={type:"node",id:ee,lat:j,lon:B};C.push(q)}function E(j,B){if(A.some(function(pe){return pe.type=="way"&&pe.id==B}))return;var ee={type:"way",id:B,nodes:[]};function q(pe,_e){var de={type:"node",id:"_anonymous@"+pe+"/"+_e,lat:pe,lon:_e};ee.nodes.push(de.id),C.push(de)}j.forEach(function(pe){pe?q(pe.lat,pe.lon):ee.nodes.push(void 0)}),A.push(ee)}X.members.forEach(function(j,B){j.type=="node"?j.lat&&V(j.lat,j.lon,j.ref):j.type=="way"&&j.geometry&&(j.ref="_fullGeom"+j.ref,E(j.geometry,j.ref))})}for(var ce=0;ce<b.elements.length;ce++)switch(b.elements[ce].type){case"node":var K=b.elements[ce];C.push(K);break;case"way":var W=zn.clone(b.elements[ce]);W.nodes=zn.clone(W.nodes),A.push(W),W.center&&T(W),W.geometry?U(W):W.bounds&&L(W);break;case"relation":var $=zn.clone(b.elements[ce]);$.members=zn.clone($.members),w.push($);var ie=$.members&&$.members.some(function(X){return X.type=="node"&&X.lat||X.type=="way"&&X.geometry&&X.geometry.length>0});$.center&&T($),ie?F($):$.bounds&&L($);break}return d(C,A,w)}function p(b){var C=new Array,A=new Array,w=new Array;function T($,ie,X){$.hasAttribute(X)&&(ie[X]=$.getAttribute(X))}function L($,ie){var X=zn.clone($);T(ie,X,"lat"),T(ie,X,"lon"),X.__is_center_placeholder=!0,C.push(X)}function U($,ie){var X=zn.clone($);X.nodes=[];function V(E,j,B){var ee={type:"node",id:"_"+X.type+"/"+X.id+"bounds"+B,lat:E,lon:j};X.nodes.push(ee.id),C.push(ee)}V(ie.getAttribute("minlat"),ie.getAttribute("minlon"),1),V(ie.getAttribute("maxlat"),ie.getAttribute("minlon"),2),V(ie.getAttribute("maxlat"),ie.getAttribute("maxlon"),3),V(ie.getAttribute("minlat"),ie.getAttribute("maxlon"),4),X.nodes.push(X.nodes[0]),X.__is_bounds_placeholder=!0,A.push(X)}function F($,ie){function X(V,E,j){var B={type:"node",id:j,lat:V,lon:E};return C.push(B),B.id}zn.isArray($.nodes)||($.nodes=[],zn.each(ie,function(V,E){$.nodes.push("_anonymous@"+V.getAttribute("lat")+"/"+V.getAttribute("lon"))})),zn.each(ie,function(V,E){V.getAttribute("lat")&&X(V.getAttribute("lat"),V.getAttribute("lon"),$.nodes[E])})}function ce($,ie){function X(E,j,B){var ee={type:"node",id:B,lat:E,lon:j};C.push(ee)}function V(E,j){if(A.some(function(q){return q.type=="way"&&q.id==j}))return;var B={type:"way",id:j,nodes:[]};function ee(q,pe){var _e={type:"node",id:"_anonymous@"+q+"/"+pe,lat:q,lon:pe};B.nodes.push(_e.id),C.push(_e)}zn.each(E,function(q){q.getAttribute("lat")?ee(q.getAttribute("lat"),q.getAttribute("lon")):B.nodes.push(void 0)}),A.push(B)}zn.each(ie,function(E,j){$.members[j].type=="node"?E.getAttribute("lat")&&X(E.getAttribute("lat"),E.getAttribute("lon"),$.members[j].ref):$.members[j].type=="way"&&E.getElementsByTagName("nd").length>0&&($.members[j].ref="_fullGeom"+$.members[j].ref,V(E.getElementsByTagName("nd"),$.members[j].ref))})}zn.each(b.getElementsByTagName("node"),function($,ie){var X={};zn.each($.getElementsByTagName("tag"),function(E){X[E.getAttribute("k")]=E.getAttribute("v")});var V={type:"node"};T($,V,"id"),T($,V,"lat"),T($,V,"lon"),T($,V,"version"),T($,V,"timestamp"),T($,V,"changeset"),T($,V,"uid"),T($,V,"user"),zn.isEmpty(X)||(V.tags=X),C.push(V)});var K,W;return zn.each(b.getElementsByTagName("way"),function($,ie){var X={},V=[];zn.each($.getElementsByTagName("tag"),function(B){X[B.getAttribute("k")]=B.getAttribute("v")});var E=!1;zn.each($.getElementsByTagName("nd"),function(B,ee){var q;(q=B.getAttribute("ref"))&&(V[ee]=q),!E&&B.getAttribute("lat")&&(E=!0)});var j={type:"way"};T($,j,"id"),T($,j,"version"),T($,j,"timestamp"),T($,j,"changeset"),T($,j,"uid"),T($,j,"user"),V.length>0&&(j.nodes=V),zn.isEmpty(X)||(j.tags=X),(K=$.getElementsByTagName("center")[0])&&L(j,K),E?F(j,$.getElementsByTagName("nd")):(W=$.getElementsByTagName("bounds")[0])&&U(j,W),A.push(j)}),zn.each(b.getElementsByTagName("relation"),function($,ie){var X={},V=[];zn.each($.getElementsByTagName("tag"),function(B){X[B.getAttribute("k")]=B.getAttribute("v")});var E=!1;zn.each($.getElementsByTagName("member"),function(B,ee){V[ee]={},T(B,V[ee],"ref"),T(B,V[ee],"role"),T(B,V[ee],"type"),(!E&&V[ee].type=="node"&&B.getAttribute("lat")||V[ee].type=="way"&&B.getElementsByTagName("nd").length>0)&&(E=!0)});var j={type:"relation"};T($,j,"id"),T($,j,"version"),T($,j,"timestamp"),T($,j,"changeset"),T($,j,"uid"),T($,j,"user"),V.length>0&&(j.members=V),zn.isEmpty(X)||(j.tags=X),(K=$.getElementsByTagName("center")[0])&&L(j,K),E?ce(j,$.getElementsByTagName("member")):(W=$.getElementsByTagName("bounds")[0])&&U(j,W),w.push(j)}),d(C,A,w)}function d(b,C,A){function w(ze,We){if(typeof We!="object"&&(We={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(ze,We);for(var He in ze)if(t.uninterestingTags[He]!==!0&&!(We[He]===!0||We[He]===ze[He]))return!0;return!1}function T(ze){var We={timestamp:ze.timestamp,version:ze.version,changeset:ze.changeset,user:ze.user,uid:ze.uid};for(var He in We)We[He]===void 0&&delete We[He];return We}for(var L=new Object,U=new Object,F=0;F<b.length;F++){var ce=b[F];L[ce.id]!==void 0&&(ce=t.deduplicator(ce,L[ce.id])),L[ce.id]=ce,typeof ce.tags<"u"&&w(ce.tags)&&(U[ce.id]=!0)}for(var F=0;F<A.length;F++)if(zn.isArray(A[F].members))for(var K=0;K<A[F].members.length;K++)A[F].members[K].type=="node"&&(U[A[F].members[K].ref]=!0);for(var W=new Object,$=new Object,F=0;F<C.length;F++){var ie=C[F];if(W[ie.id]&&(ie=t.deduplicator(ie,W[ie.id])),W[ie.id]=ie,zn.isArray(ie.nodes))for(var K=0;K<ie.nodes.length;K++)typeof ie.nodes[K]!="object"&&($[ie.nodes[K]]=!0,ie.nodes[K]=L[ie.nodes[K]])}var X=new Array;for(var V in L){var ce=L[V];(!$[V]||U[V])&&X.push(ce)}for(var E=new Array,F=0;F<A.length;F++){var j=A[F];E[j.id]&&(j=t.deduplicator(j,E[j.id])),E[j.id]=j}var B={node:{},way:{},relation:{}};for(var V in E){var j=E[V];if(!zn.isArray(j.members)){t.verbose&&console.warn("Relation",j.type+"/"+j.id,"ignored because it has no members");continue}for(var K=0;K<j.members.length;K++){var ee=j.members[K].type,q=j.members[K].ref;if(typeof q!="number"&&(q=q.replace("_fullGeom","")),!B[ee]){t.verbose&&console.warn("Relation",j.type+"/"+j.id,"member",ee+"/"+q,"ignored because it has an invalid type");continue}typeof B[ee][q]>"u"&&(B[ee][q]=[]),B[ee][q].push({role:j.members[K].role,rel:j.id,reltags:j.tags})}}var pe,_e=[];for(F=0;F<X.length;F++){if(typeof X[F].lon>"u"||typeof X[F].lat>"u"){t.verbose&&console.warn("POI",X[F].type+"/"+X[F].id,"ignored because it lacks coordinates");continue}var de={type:"Feature",id:X[F].type+"/"+X[F].id,properties:{type:X[F].type,id:X[F].id,tags:X[F].tags||{},relations:B.node[X[F].id]||[],meta:T(X[F])},geometry:{type:"Point",coordinates:[+X[F].lon,+X[F].lat]}};X[F].__is_center_placeholder&&(de.properties.geometry="center"),i?i(de):_e.push(de)}for(var oe=[],le=[],F=0;F<A.length;F++)if(E[A[F].id]===A[F]){if(typeof A[F].tags<"u"&&(A[F].tags.type=="route"||A[F].tags.type=="waterway")){let We=function(He){var nt=!1,dt;dt=He.members.filter(function(Tt){return Tt.type==="way"}),dt=dt.map(function(Tt){var $t=W[Tt.ref];if($t===void 0||$t.nodes===void 0){t.verbose&&console.warn("Route "+He.type+"/"+He.id,"tainted by a missing or incomplete  way",Tt.type+"/"+Tt.ref),nt=!0;return}return{id:Tt.ref,role:Tt.role,way:$t,nodes:$t.nodes.filter(function(Vt){return Vt!==void 0?!0:(nt=!0,t.verbose&&console.warn("Route",He.type+"/"+He.id,"tainted by a way",Tt.type+"/"+Tt.ref,"with a missing node"),!1)})}}),dt=zn.compact(dt);var wt;wt=tv(dt);var Mt=[];if(Mt=zn.compact(wt.map(function(Tt){return zn.compact(Tt.map(function($t){return[+$t.lon,+$t.lat]}))})),Mt.length==0)return t.verbose&&console.warn("Route",He.type+"/"+He.id,"contains no coordinates"),!1;var gt={type:"Feature",id:He.type+"/"+He.id,properties:{type:He.type,id:He.id,tags:He.tags||{},relations:B[He.type][He.id]||[],meta:T(He)},geometry:{type:Mt.length===1?"LineString":"MultiLineString",coordinates:Mt.length===1?Mt[0]:Mt}};return nt&&(t.verbose&&console.warn("Route",He.type+"/"+He.id,"is tainted"),gt.properties.tainted=!0),gt};var Be=We;if(!zn.isArray(A[F].members)){t.verbose&&console.warn("Route",A[F].type+"/"+A[F].id,"ignored because it has no members");continue}if(A[F].members.forEach(function(He){W[He.ref]&&!w(W[He.ref].tags)&&(W[He.ref].is_skippablerelationmember=!0)}),de=We(A[F]),de===!1){t.verbose&&console.warn("Route relation",A[F].type+"/"+A[F].id,"ignored because it has invalid geometry");continue}i?i(gm(de)):le.push(de)}if(typeof A[F].tags<"u"&&(A[F].tags.type=="multipolygon"||A[F].tags.type=="boundary")){let He=function(nt,dt){var wt=!1,Mt=te?"way":"relation",gt=typeof nt.id=="number"?nt.id:+nt.id.replace("_fullGeom",""),Tt;Tt=dt.members.filter(function(D){return D.type==="way"}),Tt=Tt.map(function(D){var xe=W[D.ref];if(xe===void 0||xe.nodes===void 0){t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"tainted by a missing or incomplete way",D.type+"/"+D.ref),wt=!0;return}return{id:D.ref,role:D.role||"outer",way:xe,nodes:xe.nodes.filter(function(Ze){return Ze!==void 0?!0:(wt=!0,t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"tainted by a way",D.type+"/"+D.ref,"with a missing node"),!1)})}}),Tt=zn.compact(Tt);var $t,Vt;$t=tv(Tt.filter(function(D){return D.role==="outer"})),Vt=tv(Tt.filter(function(D){return D.role==="inner"}));var Zt;function En(D){var xe=function(R,z){for(var Se=0;Se<z.length;Se++)if(Qe(z[Se],R))return!0;return!1},Ze=function(R){return R.map(function(z){return[+z.lat,+z.lon]})},Qe=function(R,z){for(var Se=R[0],Ve=R[1],tt=!1,at=0,st=z.length-1;at<z.length;st=at++){var Dt=z[at][0],Rt=z[at][1],_n=z[st][0],vn=z[st][1],an=Rt>Ve!=vn>Ve&&Se<(_n-Dt)*(Ve-Rt)/(vn-Rt)+Dt;an&&(tt=!tt)}return tt},ct,ae;for(D=Ze(D),ct=0;ct<$t.length;ct++)if(ae=Ze($t[ct]),xe(ae,D))return ct}Zt=$t.map(function(D){return[D]});for(var et=0;et<Vt.length;et++){var sn=En(Vt[et]);sn!==void 0?Zt[sn].push(Vt[et]):t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"contains an inner ring with no containing outer")}var Sn=[];if(Sn=zn.compact(Zt.map(function(D){var xe=zn.compact(D.map(function(Ze){if(Ze.length<4){t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"contains a ring with less than four nodes");return}return zn.compact(Ze.map(function(Qe){return[+Qe.lon,+Qe.lat]}))}));if(xe.length==0){t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"contains an empty ring cluster");return}return xe})),Sn.length==0)return t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"contains no coordinates"),!1;var we="MultiPolygon";Sn.length===1&&(we="Polygon",Sn=Sn[0]);var N={type:"Feature",id:nt.type+"/"+gt,properties:{type:nt.type,id:gt,tags:nt.tags||{},relations:B[nt.type][nt.id]||[],meta:T(nt)},geometry:{type:we,coordinates:Sn}};return wt&&(t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"is tainted"),N.properties.tainted=!0),N};var Pe=He;if(!zn.isArray(A[F].members)){t.verbose&&console.warn("Multipolygon",A[F].type+"/"+A[F].id,"ignored because it has no members");continue}for(var J=0,K=0;K<A[F].members.length;K++)A[F].members[K].role=="outer"?J++:t.verbose&&A[F].members[K].role!="inner"&&console.warn("Multipolygon",A[F].type+"/"+A[F].id,"member",A[F].members[K].type+"/"+A[F].members[K].ref,'ignored because it has an invalid role: "'+A[F].members[K].role+'"');if(A[F].members.forEach(function(nt){W[nt.ref]&&(nt.role==="outer"&&!w(W[nt.ref].tags,A[F].tags)&&(W[nt.ref].is_skippablerelationmember=!0),nt.role==="inner"&&!w(W[nt.ref].tags)&&(W[nt.ref].is_skippablerelationmember=!0))}),J==0){t.verbose&&console.warn("Multipolygon relation",A[F].type+"/"+A[F].id,"ignored because it has no outer ways");continue}var te=!1;J==1&&!w(A[F].tags,{type:!0})&&(te=!0);var de=null;if(!te)de=He(A[F],A[F]);else{var he=A[F].members.filter(function(nt){return nt.role==="outer"})[0];if(he=W[he.ref],he===void 0){t.verbose&&console.warn("Multipolygon relation",A[F].type+"/"+A[F].id,"ignored because outer way",he.type+"/"+he.ref,"is missing");continue}he.is_skippablerelationmember=!0,de=He(he,A[F])}if(de===!1){t.verbose&&console.warn("Multipolygon relation",A[F].type+"/"+A[F].id,"ignored because it has invalid geometry");continue}i?i(gm(de)):le.push(de)}}for(var F=0;F<C.length;F++)if(W[C[F].id]===C[F]){if(!zn.isArray(C[F].nodes)){t.verbose&&console.warn("Way",C[F].type+"/"+C[F].id,"ignored because it has no nodes");continue}if(!C[F].is_skippablerelationmember){typeof C[F].id!="number"&&(C[F].id=+C[F].id.replace("_fullGeom","")),C[F].tainted=!1,C[F].hidden=!1;var be=new Array;for(K=0;K<C[F].nodes.length;K++)typeof C[F].nodes[K]=="object"?be.push([+C[F].nodes[K].lon,+C[F].nodes[K].lat]):(t.verbose&&console.warn("Way",C[F].type+"/"+C[F].id,"is tainted by an invalid node"),C[F].tainted=!0);if(be.length<=1){t.verbose&&console.warn("Way",C[F].type+"/"+C[F].id,"ignored because it contains too few nodes");continue}var Ee="LineString";typeof C[F].nodes[0]<"u"&&typeof C[F].nodes[C[F].nodes.length-1]<"u"&&C[F].nodes[0].id===C[F].nodes[C[F].nodes.length-1].id&&(typeof C[F].tags<"u"&&u(C[F].tags)||C[F].__is_bounds_placeholder)&&(Ee="Polygon",be=[be]);var de={type:"Feature",id:C[F].type+"/"+C[F].id,properties:{type:C[F].type,id:C[F].id,tags:C[F].tags||{},relations:B.way[C[F].id]||[],meta:T(C[F])},geometry:{type:Ee,coordinates:be}};C[F].tainted&&(t.verbose&&console.warn("Way",C[F].type+"/"+C[F].id,"is tainted"),de.properties.tainted=!0),C[F].__is_bounds_placeholder&&(de.properties.geometry="bounds"),i?i(gm(de)):Ee=="LineString"?oe.push(de):le.push(de)}}return i?!0:(pe={type:"FeatureCollection",features:[]},pe.features=pe.features.concat(le),pe.features=pe.features.concat(oe),pe.features=pe.features.concat(_e),t.flatProperties&&pe.features.forEach(function(ze){ze.properties=zn.merge(ze.properties.meta,ze.properties.tags,{id:ze.properties.type+"/"+ze.properties.id})}),pe=gm(pe),pe)}function u(b){var C=t.polygonFeatures;if(typeof C=="function")return C(b);if(b.area==="no")return!1;for(var A in b){var w=b[A],T=C[A];if(!(typeof T>"u")&&w!=="no"&&(T===!0||T.included_values&&T.included_values[w]===!0||T.excluded_values&&T.excluded_values[w]!==!0))return!0}return!1}};function tv(e){for(var t=function(w){return w[0]},i=function(w){return w[w.length-1]},a=function(w,T){return w!==void 0&&T!==void 0&&w.id===T.id},c=[],p,d,u,b,C,A;e.length;)for(p=e.pop().nodes.slice(),c.push(p);e.length&&!a(t(p),i(p));){for(d=t(p),u=i(p),b=0;b<e.length;b++)if(A=e[b].nodes,a(u,t(A))){C=p.push,A=A.slice(1);break}else if(a(u,i(A))){C=p.push,A=A.slice(0,-1).reverse();break}else if(a(d,i(A))){C=p.unshift,A=A.slice(0,-1);break}else if(a(d,t(A))){C=p.unshift,A=A.slice(1).reverse();break}else A=C=null;if(!A)break;e.splice(b,1),C.apply(p,A)}return c}Dg.toGeojson=Dg;var U5=Dg;const $5=Uf(U5),nv={type:"FeatureCollection",features:[]},gA=()=>{const[e,t]=_t.useState(!1),i=_t.useCallback(async(d,u,b)=>{var F,ce;if(e||(console.log(b),b<16))return nv;t(!0);let C=300;b>17&&(C=200),b>18&&(C=100),b>19&&(C=50),console.log("overpass: loading...");let A="[out:json]";A+=`[timeout:25];
`,A+='nwr["building"]',A+=`(around:${C},${d},${u});
`,A+="out meta geom;",console.log(A);const w=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(A)}`,{});if(w.status!==200)return t(!1),nv;const T=await w.json();console.log("overpass json elements: ",T.elements);const L=$5(T);console.log("overpass osmtogeojson raw: ",L);for await(const K of L.features){if(!K.properties)continue;K.id=K.properties.id.split("/")[1];const W=(F=T.elements.filter(ie=>K.id?typeof K.id=="number"?ie.id===K.id:ie.id===parseInt(K.id):!1))==null?void 0:F[0];if(W&&(K.properties.tags=W.tags,K.properties.nodes=W.nodes),K.geometry.type==="Polygon"){const ie=I5(K.geometry.coordinates);var U=z5(ie);K.properties.center=U.geometry.coordinates}K.geometry.type==="Point"&&(K.properties.center=K.geometry.coordinates);const $=K.properties.uid;if($){let ie=localStorage.getItem($+"-icon");if(ie===null){const X=await As.getUser($);(ce=X.img)!=null&&ce.href?(ie=X.img.href,localStorage.setItem($+"-icon",X.img.href)):localStorage.setItem($+"-icon","")}K.properties.userIconHref=ie||""}}return console.log("overpass osmtogeojson converted: ",L),console.log("overpass: loaded."),t(!1),L},[]),[a,c]=_t.useState(!1),p=_t.useCallback(async d=>{console.log("overpass: loading...",d),c(!0);const u=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(u);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(u)}`,{});if(b.status!==200){c(!1);return}const C=await b.json();console.log("overpass json parent elements: ",C.elements);const A=250,w=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${A});
      out;
      `;console.log(w);const T=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(w)}`,{});if(T.status!==200){c(!1);return}const L=await T.json();console.log("overpass json child elements: ",L.elements);const U=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${A});
      out;
      `;console.log(U);const F=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(U)}`,{});if(F.status!==200){c(!1);return}const ce=await F.json();return console.log("overpass json neighbour elements: ",ce.elements),c(!1),[...C.elements,...L.elements,...ce.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:p,loadingOverpass:e,loadingOverpassAdmin:a}},V5=()=>yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),yt.jsxs("datalist",{id:"source-list",children:[yt.jsx("option",{value:"survey"}),yt.jsx("option",{value:"local knowledge"}),yt.jsx("option",{value:"extrapolation"}),yt.jsx("option",{value:"estimation from existing data"})]})]}),rv={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},G5=({feature:e,onCancel:t,onSubmit:i})=>{var pe,_e,de,oe;const{detectCountry:a,loadingCountry:c}=R5(),{fetchOverpassAdmin:p,loadingOverpassAdmin:d}=gA(),u=JSON.parse((pe=e.properties)==null?void 0:pe.center),[b,C]=_t.useState(void 0),[A,w]=_t.useState(),[T,L]=_t.useState(e),[U,F]=_t.useState(!1),[ce,K]=_t.useState(!1),[W,$]=_t.useState(!1),[ie,X]=_t.useState(),[V,E]=_t.useState();_t.useEffect(()=>{F(As.isLoggedIn())},[]),_t.useEffect(()=>{(async()=>{var J,te;const le=await a(u[0],u[1]);if(C(le),(J=le==null?void 0:le.properties)!=null&&J.ISO_A3&&qS[le.properties.ISO_A3]){const he=qS[le.properties.ISO_A3];w(he);const be=he.defaultComment+" "+((te=e.properties)==null?void 0:te.id);E(be)}})()},[e]),_t.useEffect(()=>{console.log(T.properties)},[T]);const j=_t.useCallback(async()=>{const le=await tI.openReverseGeocoder([u[0],u[1]]);L(J=>{const te={properties:{"addr:province":le.prefecture,"addr:city":le.city,...J.properties}};return J.properties=te.properties,J})},[]),B=_t.useCallback(async()=>{if(!T.properties)return;T.properties.nodes;const le=await p(JSON.parse(T.properties.nodes));console.log("onOverpassReverseGeocode",le),X(le)},[T]),ee=_t.useCallback(async le=>{var Pe,ze,We;$(!0),le.preventDefault();const J=new FormData(le.currentTarget),te=JSON.parse((Pe=e.properties)==null?void 0:Pe.tags);J.forEach((He,nt)=>{typeof He=="string"&&He.length>0&&nt!=="comment"&&nt!=="source"&&(te[nt]=He)});const he={type:"way",id:e.id,version:(ze=e.properties)==null?void 0:ze.version,tags:te,nodes:JSON.parse((We=e.properties)==null?void 0:We.nodes)};console.info(JSON.stringify(he,null,2));const be={create:[],modify:[he],delete:[]},Ee=J.get("comment");Ee&&(rv.comment=Ee.toString());const Be=J.get("source");Be&&(rv.source=Be.toString()),await As.uploadChangeset(rv,be),$(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),q=_t.useCallback(()=>{K(!0)},[]);return T.properties?yt.jsxs("div",{children:[yt.jsxs("div",{children:["OSM:"," ",yt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+T.properties.id,target:"_blank",children:T.properties.id})," | ",yt.jsx(JC,{feature:T}),A&&yt.jsxs("span",{children:[" | ","Address:"," ",yt.jsx(O5,{feature:T,fields:A})]})]}),c?yt.jsx(ua,{icon:h_,spin:!0}):yt.jsx(yt.Fragment,{children:A?yt.jsxs("form",{onSubmit:ee,children:[yt.jsx("div",{className:"flex flex-wrap",children:yt.jsx(ev,{feature:T,fieldOption:A.postcodeField,onChange:q})}),yt.jsx("div",{className:"flex flex-wrap",children:A.mainFields.map(le=>yt.jsx(ev,{feature:T,fieldOption:le,onChange:q,suggestList:ie},le.key))}),yt.jsx("div",{className:"flex flex-wrap",children:A.detailFields.map(le=>yt.jsx(ev,{feature:T,fieldOption:le,onChange:q},le.key))}),yt.jsxs("div",{className:"flex flex-wrap",children:[yt.jsx(V5,{}),yt.jsx(L5,{defaultValue:V})]}),yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((_e=b==null?void 0:b.properties)==null?void 0:_e.ISO_A3)==="JPN"&&yt.jsx("button",{type:"button",onClick:j,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),yt.jsxs("button",{type:"button",disabled:d,onClick:B,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",d&&yt.jsx(ua,{icon:h_,spin:!0})]}),yt.jsx("button",{disabled:!U||W||!ce,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!U&&yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),yt.jsx(YC,{})]})]})})]}):yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[yt.jsxs("div",{className:"py-2",children:[yt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(de=b==null?void 0:b.properties)==null?void 0:de.NAME," (ISO code:",(oe=b==null?void 0:b.properties)==null?void 0:oe.ISO_A3,") does not support yet."]}),yt.jsx("p",{children:yt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function H5(e,t){const[i,a]=_t.useState(e);return _t.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const W5={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},Z5={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function X5(){const e=_t.useRef(null),[t,i]=_t.useState(),a=H5(t,2500),c=_t.useRef(null),[p,d]=_t.useState({type:"FeatureCollection",features:[]}),[u,b]=_t.useState("auto"),[C,A]=_t.useState(),[w,T]=_t.useState([]),{fetchOverpassBuildings:L,loadingOverpass:U}=gA();_t.useEffect(()=>{setTimeout(()=>{var E;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(E=c.current)==null||E.trigger())},500)},[]);const F=_t.useCallback(E=>{const j=E.target.getCenter(),B=E.target.getZoom();i({zoom:B,latitude:j.lat,longitude:j.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),ce=_t.useCallback(E=>{i(E.viewState)},[]),K=_t.useCallback(E=>{i(E.viewState)},[]);_t.useEffect(()=>{(async()=>{if(!a)return;const E=a,j=await L(E.latitude,E.longitude,E.zoom);d(j)})()},[a]);const W=_t.useCallback(E=>{var pe;b("pointer");const{features:j,point:{x:B,y:ee}}=E,q=j&&j[0];q?((pe=e.current)==null||pe.setFeatureState({source:"buildings-source",id:q.id},{hover:!0}),A({feature:q,x:B,y:ee})):A(void 0)},[]),$=_t.useCallback(E=>{var j;b("auto"),(j=e.current)==null||j.querySourceFeatures("buildings-source").map(B=>{var ee;(ee=e.current)==null||ee.setFeatureState({source:"buildings-source",id:B.id},{hover:!1})}),A(void 0)},[]),ie=_t.useCallback(E=>{var B;X();const j=E.features&&E.features[0];j&&((B=e.current)==null||B.setFeatureState({source:"buildings-source",id:j.id},{select:!0}),T([j]))},[]),X=_t.useCallback(()=>{var E;(E=e.current)==null||E.querySourceFeatures("buildings-source").map(j=>{var B;(B=e.current)==null||B.setFeatureState({source:"buildings-source",id:j.id},{select:!1})}),T([])},[]),V=_t.useMemo(()=>{let E=25;return t&&(E=t.zoom<18?20:t.zoom<19?25:35),p.features.map((j,B)=>!j.properties||!j.properties.center?null:yt.jsx(x4,{style:{cursor:"pointer"},longitude:j.properties.center[0],latitude:j.properties.center[1],anchor:"center",children:yt.jsx(WR,{feature:j,size:E})},`marker-${B}`))},[p,t]);return yt.jsxs("div",{children:[yt.jsx(CR,{}),yt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:yt.jsx(qR,{viewState:t})}),yt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[w.length>0&&yt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:yt.jsx("div",{style:{padding:"10px"},children:w.map(E=>yt.jsx(G5,{feature:E,onCancel:X,onSubmit:X},E.id))})}),yt.jsxs(_4,{ref:e,...t,onMove:ce,onMoveEnd:K,onLoad:F,interactiveLayerIds:["buildings-layer-fill"],onClick:ie,onMouseEnter:W,onMouseLeave:$,dragRotate:!1,boxZoom:!1,hash:!0,cursor:u,mapLib:gC,style:{width:"100%",height:"100%"},mapStyle:W5,children:[yt.jsx(E4,{id:"buildings-source",type:"geojson",data:p,children:yt.jsx(S4,{...Z5})}),yt.jsx(w4,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),yt.jsx(b4,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),yt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?yt.jsx(ua,{size:"2x",icon:ER}):U?yt.jsx(ua,{size:"2x",icon:h_,spin:!0}):yt.jsx(ua,{size:"2x",icon:bR})}),V,C&&yt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:C.x+5,top:C.y+5},children:[yt.jsx(JC,{feature:C.feature}),yt.jsx("br",{}),yt.jsx(ZR,{feature:C.feature}),yt.jsx(IR,{feature:C.feature})]})]})]})]})}var yA={},fy={};fy.byteLength=Y5;fy.toByteArray=Q5;fy.fromByteArray=nj;var oa=[],ns=[],q5=typeof Uint8Array<"u"?Uint8Array:Array,iv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Xc=0,K5=iv.length;Xc<K5;++Xc)oa[Xc]=iv[Xc],ns[iv.charCodeAt(Xc)]=Xc;ns[45]=62;ns[95]=63;function vA(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function Y5(e){var t=vA(e),i=t[0],a=t[1];return(i+a)*3/4-a}function J5(e,t,i){return(t+i)*3/4-i}function Q5(e){var t,i=vA(e),a=i[0],c=i[1],p=new q5(J5(e,a,c)),d=0,u=c>0?a-4:a,b;for(b=0;b<u;b+=4)t=ns[e.charCodeAt(b)]<<18|ns[e.charCodeAt(b+1)]<<12|ns[e.charCodeAt(b+2)]<<6|ns[e.charCodeAt(b+3)],p[d++]=t>>16&255,p[d++]=t>>8&255,p[d++]=t&255;return c===2&&(t=ns[e.charCodeAt(b)]<<2|ns[e.charCodeAt(b+1)]>>4,p[d++]=t&255),c===1&&(t=ns[e.charCodeAt(b)]<<10|ns[e.charCodeAt(b+1)]<<4|ns[e.charCodeAt(b+2)]>>2,p[d++]=t>>8&255,p[d++]=t&255),p}function ej(e){return oa[e>>18&63]+oa[e>>12&63]+oa[e>>6&63]+oa[e&63]}function tj(e,t,i){for(var a,c=[],p=t;p<i;p+=3)a=(e[p]<<16&16711680)+(e[p+1]<<8&65280)+(e[p+2]&255),c.push(ej(a));return c.join("")}function nj(e){for(var t,i=e.length,a=i%3,c=[],p=16383,d=0,u=i-a;d<u;d+=p)c.push(tj(e,d,d+p>u?u:d+p));return a===1?(t=e[i-1],c.push(oa[t>>2]+oa[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(oa[t>>10]+oa[t>>4&63]+oa[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=fy,i=ly,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=W,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,u.TYPED_ARRAY_SUPPORT=p(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function p(){try{const ae=new Uint8Array(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,Uint8Array.prototype),Object.setPrototypeOf(ae,R),ae.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function d(ae){if(ae>c)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const R=new Uint8Array(ae);return Object.setPrototypeOf(R,u.prototype),R}function u(ae,R,z){if(typeof ae=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(ae)}return b(ae,R,z)}u.poolSize=8192;function b(ae,R,z){if(typeof ae=="string")return T(ae,R);if(ArrayBuffer.isView(ae))return U(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(D(ae,ArrayBuffer)||ae&&D(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(D(ae,SharedArrayBuffer)||ae&&D(ae.buffer,SharedArrayBuffer)))return F(ae,R,z);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Se=ae.valueOf&&ae.valueOf();if(Se!=null&&Se!==ae)return u.from(Se,R,z);const Ve=ce(ae);if(Ve)return Ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return u.from(ae[Symbol.toPrimitive]("string"),R,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}u.from=function(ae,R,z){return b(ae,R,z)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function C(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function A(ae,R,z){return C(ae),ae<=0?d(ae):R!==void 0?typeof z=="string"?d(ae).fill(R,z):d(ae).fill(R):d(ae)}u.alloc=function(ae,R,z){return A(ae,R,z)};function w(ae){return C(ae),d(ae<0?0:K(ae)|0)}u.allocUnsafe=function(ae){return w(ae)},u.allocUnsafeSlow=function(ae){return w(ae)};function T(ae,R){if((typeof R!="string"||R==="")&&(R="utf8"),!u.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const z=$(ae,R)|0;let Se=d(z);const Ve=Se.write(ae,R);return Ve!==z&&(Se=Se.slice(0,Ve)),Se}function L(ae){const R=ae.length<0?0:K(ae.length)|0,z=d(R);for(let Se=0;Se<R;Se+=1)z[Se]=ae[Se]&255;return z}function U(ae){if(D(ae,Uint8Array)){const R=new Uint8Array(ae);return F(R.buffer,R.byteOffset,R.byteLength)}return L(ae)}function F(ae,R,z){if(R<0||ae.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<R+(z||0))throw new RangeError('"length" is outside of buffer bounds');let Se;return R===void 0&&z===void 0?Se=new Uint8Array(ae):z===void 0?Se=new Uint8Array(ae,R):Se=new Uint8Array(ae,R,z),Object.setPrototypeOf(Se,u.prototype),Se}function ce(ae){if(u.isBuffer(ae)){const R=K(ae.length)|0,z=d(R);return z.length===0||ae.copy(z,0,0,R),z}if(ae.length!==void 0)return typeof ae.length!="number"||xe(ae.length)?d(0):L(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return L(ae.data)}function K(ae){if(ae>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return ae|0}function W(ae){return+ae!=ae&&(ae=0),u.alloc(+ae)}u.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==u.prototype},u.compare=function(R,z){if(D(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),D(z,Uint8Array)&&(z=u.from(z,z.offset,z.byteLength)),!u.isBuffer(R)||!u.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===z)return 0;let Se=R.length,Ve=z.length;for(let tt=0,at=Math.min(Se,Ve);tt<at;++tt)if(R[tt]!==z[tt]){Se=R[tt],Ve=z[tt];break}return Se<Ve?-1:Ve<Se?1:0},u.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(R,z){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return u.alloc(0);let Se;if(z===void 0)for(z=0,Se=0;Se<R.length;++Se)z+=R[Se].length;const Ve=u.allocUnsafe(z);let tt=0;for(Se=0;Se<R.length;++Se){let at=R[Se];if(D(at,Uint8Array))tt+at.length>Ve.length?(u.isBuffer(at)||(at=u.from(at)),at.copy(Ve,tt)):Uint8Array.prototype.set.call(Ve,at,tt);else if(u.isBuffer(at))at.copy(Ve,tt);else throw new TypeError('"list" argument must be an Array of Buffers');tt+=at.length}return Ve};function $(ae,R){if(u.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||D(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const z=ae.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&z===0)return 0;let Ve=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return et(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return we(ae).length;default:if(Ve)return Se?-1:et(ae).length;R=(""+R).toLowerCase(),Ve=!0}}u.byteLength=$;function ie(ae,R,z){let Se=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,R>>>=0,z<=R))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return he(this,R,z);case"utf8":case"utf-8":return de(this,R,z);case"ascii":return J(this,R,z);case"latin1":case"binary":return te(this,R,z);case"base64":return _e(this,R,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,R,z);default:if(Se)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),Se=!0}}u.prototype._isBuffer=!0;function X(ae,R,z){const Se=ae[R];ae[R]=ae[z],ae[z]=Se}u.prototype.swap16=function(){const R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let z=0;z<R;z+=2)X(this,z,z+1);return this},u.prototype.swap32=function(){const R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let z=0;z<R;z+=4)X(this,z,z+3),X(this,z+1,z+2);return this},u.prototype.swap64=function(){const R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let z=0;z<R;z+=8)X(this,z,z+7),X(this,z+1,z+6),X(this,z+2,z+5),X(this,z+3,z+4);return this},u.prototype.toString=function(){const R=this.length;return R===0?"":arguments.length===0?de(this,0,R):ie.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(R){if(!u.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:u.compare(this,R)===0},u.prototype.inspect=function(){let R="";const z=e.INSPECT_MAX_BYTES;return R=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(R+=" ... "),"<Buffer "+R+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(R,z,Se,Ve,tt){if(D(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),!u.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(z===void 0&&(z=0),Se===void 0&&(Se=R?R.length:0),Ve===void 0&&(Ve=0),tt===void 0&&(tt=this.length),z<0||Se>R.length||Ve<0||tt>this.length)throw new RangeError("out of range index");if(Ve>=tt&&z>=Se)return 0;if(Ve>=tt)return-1;if(z>=Se)return 1;if(z>>>=0,Se>>>=0,Ve>>>=0,tt>>>=0,this===R)return 0;let at=tt-Ve,st=Se-z;const Dt=Math.min(at,st),Rt=this.slice(Ve,tt),_n=R.slice(z,Se);for(let vn=0;vn<Dt;++vn)if(Rt[vn]!==_n[vn]){at=Rt[vn],st=_n[vn];break}return at<st?-1:st<at?1:0};function V(ae,R,z,Se,Ve){if(ae.length===0)return-1;if(typeof z=="string"?(Se=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,xe(z)&&(z=Ve?0:ae.length-1),z<0&&(z=ae.length+z),z>=ae.length){if(Ve)return-1;z=ae.length-1}else if(z<0)if(Ve)z=0;else return-1;if(typeof R=="string"&&(R=u.from(R,Se)),u.isBuffer(R))return R.length===0?-1:E(ae,R,z,Se,Ve);if(typeof R=="number")return R=R&255,typeof Uint8Array.prototype.indexOf=="function"?Ve?Uint8Array.prototype.indexOf.call(ae,R,z):Uint8Array.prototype.lastIndexOf.call(ae,R,z):E(ae,[R],z,Se,Ve);throw new TypeError("val must be string, number or Buffer")}function E(ae,R,z,Se,Ve){let tt=1,at=ae.length,st=R.length;if(Se!==void 0&&(Se=String(Se).toLowerCase(),Se==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(ae.length<2||R.length<2)return-1;tt=2,at/=2,st/=2,z/=2}function Dt(_n,vn){return tt===1?_n[vn]:_n.readUInt16BE(vn*tt)}let Rt;if(Ve){let _n=-1;for(Rt=z;Rt<at;Rt++)if(Dt(ae,Rt)===Dt(R,_n===-1?0:Rt-_n)){if(_n===-1&&(_n=Rt),Rt-_n+1===st)return _n*tt}else _n!==-1&&(Rt-=Rt-_n),_n=-1}else for(z+st>at&&(z=at-st),Rt=z;Rt>=0;Rt--){let _n=!0;for(let vn=0;vn<st;vn++)if(Dt(ae,Rt+vn)!==Dt(R,vn)){_n=!1;break}if(_n)return Rt}return-1}u.prototype.includes=function(R,z,Se){return this.indexOf(R,z,Se)!==-1},u.prototype.indexOf=function(R,z,Se){return V(this,R,z,Se,!0)},u.prototype.lastIndexOf=function(R,z,Se){return V(this,R,z,Se,!1)};function j(ae,R,z,Se){z=Number(z)||0;const Ve=ae.length-z;Se?(Se=Number(Se),Se>Ve&&(Se=Ve)):Se=Ve;const tt=R.length;Se>tt/2&&(Se=tt/2);let at;for(at=0;at<Se;++at){const st=parseInt(R.substr(at*2,2),16);if(xe(st))return at;ae[z+at]=st}return at}function B(ae,R,z,Se){return N(et(R,ae.length-z),ae,z,Se)}function ee(ae,R,z,Se){return N(sn(R),ae,z,Se)}function q(ae,R,z,Se){return N(we(R),ae,z,Se)}function pe(ae,R,z,Se){return N(Sn(R,ae.length-z),ae,z,Se)}u.prototype.write=function(R,z,Se,Ve){if(z===void 0)Ve="utf8",Se=this.length,z=0;else if(Se===void 0&&typeof z=="string")Ve=z,Se=this.length,z=0;else if(isFinite(z))z=z>>>0,isFinite(Se)?(Se=Se>>>0,Ve===void 0&&(Ve="utf8")):(Ve=Se,Se=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const tt=this.length-z;if((Se===void 0||Se>tt)&&(Se=tt),R.length>0&&(Se<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ve||(Ve="utf8");let at=!1;for(;;)switch(Ve){case"hex":return j(this,R,z,Se);case"utf8":case"utf-8":return B(this,R,z,Se);case"ascii":case"latin1":case"binary":return ee(this,R,z,Se);case"base64":return q(this,R,z,Se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,R,z,Se);default:if(at)throw new TypeError("Unknown encoding: "+Ve);Ve=(""+Ve).toLowerCase(),at=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(ae,R,z){return R===0&&z===ae.length?t.fromByteArray(ae):t.fromByteArray(ae.slice(R,z))}function de(ae,R,z){z=Math.min(ae.length,z);const Se=[];let Ve=R;for(;Ve<z;){const tt=ae[Ve];let at=null,st=tt>239?4:tt>223?3:tt>191?2:1;if(Ve+st<=z){let Dt,Rt,_n,vn;switch(st){case 1:tt<128&&(at=tt);break;case 2:Dt=ae[Ve+1],(Dt&192)===128&&(vn=(tt&31)<<6|Dt&63,vn>127&&(at=vn));break;case 3:Dt=ae[Ve+1],Rt=ae[Ve+2],(Dt&192)===128&&(Rt&192)===128&&(vn=(tt&15)<<12|(Dt&63)<<6|Rt&63,vn>2047&&(vn<55296||vn>57343)&&(at=vn));break;case 4:Dt=ae[Ve+1],Rt=ae[Ve+2],_n=ae[Ve+3],(Dt&192)===128&&(Rt&192)===128&&(_n&192)===128&&(vn=(tt&15)<<18|(Dt&63)<<12|(Rt&63)<<6|_n&63,vn>65535&&vn<1114112&&(at=vn))}}at===null?(at=65533,st=1):at>65535&&(at-=65536,Se.push(at>>>10&1023|55296),at=56320|at&1023),Se.push(at),Ve+=st}return le(Se)}const oe=4096;function le(ae){const R=ae.length;if(R<=oe)return String.fromCharCode.apply(String,ae);let z="",Se=0;for(;Se<R;)z+=String.fromCharCode.apply(String,ae.slice(Se,Se+=oe));return z}function J(ae,R,z){let Se="";z=Math.min(ae.length,z);for(let Ve=R;Ve<z;++Ve)Se+=String.fromCharCode(ae[Ve]&127);return Se}function te(ae,R,z){let Se="";z=Math.min(ae.length,z);for(let Ve=R;Ve<z;++Ve)Se+=String.fromCharCode(ae[Ve]);return Se}function he(ae,R,z){const Se=ae.length;(!R||R<0)&&(R=0),(!z||z<0||z>Se)&&(z=Se);let Ve="";for(let tt=R;tt<z;++tt)Ve+=Ze[ae[tt]];return Ve}function be(ae,R,z){const Se=ae.slice(R,z);let Ve="";for(let tt=0;tt<Se.length-1;tt+=2)Ve+=String.fromCharCode(Se[tt]+Se[tt+1]*256);return Ve}u.prototype.slice=function(R,z){const Se=this.length;R=~~R,z=z===void 0?Se:~~z,R<0?(R+=Se,R<0&&(R=0)):R>Se&&(R=Se),z<0?(z+=Se,z<0&&(z=0)):z>Se&&(z=Se),z<R&&(z=R);const Ve=this.subarray(R,z);return Object.setPrototypeOf(Ve,u.prototype),Ve};function Ee(ae,R,z){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+R>z)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(R,z,Se){R=R>>>0,z=z>>>0,Se||Ee(R,z,this.length);let Ve=this[R],tt=1,at=0;for(;++at<z&&(tt*=256);)Ve+=this[R+at]*tt;return Ve},u.prototype.readUintBE=u.prototype.readUIntBE=function(R,z,Se){R=R>>>0,z=z>>>0,Se||Ee(R,z,this.length);let Ve=this[R+--z],tt=1;for(;z>0&&(tt*=256);)Ve+=this[R+--z]*tt;return Ve},u.prototype.readUint8=u.prototype.readUInt8=function(R,z){return R=R>>>0,z||Ee(R,1,this.length),this[R]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(R,z){return R=R>>>0,z||Ee(R,2,this.length),this[R]|this[R+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(R,z){return R=R>>>0,z||Ee(R,2,this.length),this[R]<<8|this[R+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},u.prototype.readBigUInt64LE=Qe(function(R){R=R>>>0,$t(R,"offset");const z=this[R],Se=this[R+7];(z===void 0||Se===void 0)&&Vt(R,this.length-8);const Ve=z+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,tt=this[++R]+this[++R]*2**8+this[++R]*2**16+Se*2**24;return BigInt(Ve)+(BigInt(tt)<<BigInt(32))}),u.prototype.readBigUInt64BE=Qe(function(R){R=R>>>0,$t(R,"offset");const z=this[R],Se=this[R+7];(z===void 0||Se===void 0)&&Vt(R,this.length-8);const Ve=z*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],tt=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+Se;return(BigInt(Ve)<<BigInt(32))+BigInt(tt)}),u.prototype.readIntLE=function(R,z,Se){R=R>>>0,z=z>>>0,Se||Ee(R,z,this.length);let Ve=this[R],tt=1,at=0;for(;++at<z&&(tt*=256);)Ve+=this[R+at]*tt;return tt*=128,Ve>=tt&&(Ve-=Math.pow(2,8*z)),Ve},u.prototype.readIntBE=function(R,z,Se){R=R>>>0,z=z>>>0,Se||Ee(R,z,this.length);let Ve=z,tt=1,at=this[R+--Ve];for(;Ve>0&&(tt*=256);)at+=this[R+--Ve]*tt;return tt*=128,at>=tt&&(at-=Math.pow(2,8*z)),at},u.prototype.readInt8=function(R,z){return R=R>>>0,z||Ee(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},u.prototype.readInt16LE=function(R,z){R=R>>>0,z||Ee(R,2,this.length);const Se=this[R]|this[R+1]<<8;return Se&32768?Se|4294901760:Se},u.prototype.readInt16BE=function(R,z){R=R>>>0,z||Ee(R,2,this.length);const Se=this[R+1]|this[R]<<8;return Se&32768?Se|4294901760:Se},u.prototype.readInt32LE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},u.prototype.readInt32BE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},u.prototype.readBigInt64LE=Qe(function(R){R=R>>>0,$t(R,"offset");const z=this[R],Se=this[R+7];(z===void 0||Se===void 0)&&Vt(R,this.length-8);const Ve=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(Se<<24);return(BigInt(Ve)<<BigInt(32))+BigInt(z+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),u.prototype.readBigInt64BE=Qe(function(R){R=R>>>0,$t(R,"offset");const z=this[R],Se=this[R+7];(z===void 0||Se===void 0)&&Vt(R,this.length-8);const Ve=(z<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(Ve)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+Se)}),u.prototype.readFloatLE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),i.read(this,R,!0,23,4)},u.prototype.readFloatBE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),i.read(this,R,!1,23,4)},u.prototype.readDoubleLE=function(R,z){return R=R>>>0,z||Ee(R,8,this.length),i.read(this,R,!0,52,8)},u.prototype.readDoubleBE=function(R,z){return R=R>>>0,z||Ee(R,8,this.length),i.read(this,R,!1,52,8)};function Be(ae,R,z,Se,Ve,tt){if(!u.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>Ve||R<tt)throw new RangeError('"value" argument is out of bounds');if(z+Se>ae.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(R,z,Se,Ve){if(R=+R,z=z>>>0,Se=Se>>>0,!Ve){const st=Math.pow(2,8*Se)-1;Be(this,R,z,Se,st,0)}let tt=1,at=0;for(this[z]=R&255;++at<Se&&(tt*=256);)this[z+at]=R/tt&255;return z+Se},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(R,z,Se,Ve){if(R=+R,z=z>>>0,Se=Se>>>0,!Ve){const st=Math.pow(2,8*Se)-1;Be(this,R,z,Se,st,0)}let tt=Se-1,at=1;for(this[z+tt]=R&255;--tt>=0&&(at*=256);)this[z+tt]=R/at&255;return z+Se},u.prototype.writeUint8=u.prototype.writeUInt8=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,1,255,0),this[z]=R&255,z+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,2,65535,0),this[z]=R&255,this[z+1]=R>>>8,z+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,2,65535,0),this[z]=R>>>8,this[z+1]=R&255,z+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,4,4294967295,0),this[z+3]=R>>>24,this[z+2]=R>>>16,this[z+1]=R>>>8,this[z]=R&255,z+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,4,4294967295,0),this[z]=R>>>24,this[z+1]=R>>>16,this[z+2]=R>>>8,this[z+3]=R&255,z+4};function Pe(ae,R,z,Se,Ve){Tt(R,Se,Ve,ae,z,7);let tt=Number(R&BigInt(4294967295));ae[z++]=tt,tt=tt>>8,ae[z++]=tt,tt=tt>>8,ae[z++]=tt,tt=tt>>8,ae[z++]=tt;let at=Number(R>>BigInt(32)&BigInt(4294967295));return ae[z++]=at,at=at>>8,ae[z++]=at,at=at>>8,ae[z++]=at,at=at>>8,ae[z++]=at,z}function ze(ae,R,z,Se,Ve){Tt(R,Se,Ve,ae,z,7);let tt=Number(R&BigInt(4294967295));ae[z+7]=tt,tt=tt>>8,ae[z+6]=tt,tt=tt>>8,ae[z+5]=tt,tt=tt>>8,ae[z+4]=tt;let at=Number(R>>BigInt(32)&BigInt(4294967295));return ae[z+3]=at,at=at>>8,ae[z+2]=at,at=at>>8,ae[z+1]=at,at=at>>8,ae[z]=at,z+8}u.prototype.writeBigUInt64LE=Qe(function(R,z=0){return Pe(this,R,z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Qe(function(R,z=0){return ze(this,R,z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(R,z,Se,Ve){if(R=+R,z=z>>>0,!Ve){const Dt=Math.pow(2,8*Se-1);Be(this,R,z,Se,Dt-1,-Dt)}let tt=0,at=1,st=0;for(this[z]=R&255;++tt<Se&&(at*=256);)R<0&&st===0&&this[z+tt-1]!==0&&(st=1),this[z+tt]=(R/at>>0)-st&255;return z+Se},u.prototype.writeIntBE=function(R,z,Se,Ve){if(R=+R,z=z>>>0,!Ve){const Dt=Math.pow(2,8*Se-1);Be(this,R,z,Se,Dt-1,-Dt)}let tt=Se-1,at=1,st=0;for(this[z+tt]=R&255;--tt>=0&&(at*=256);)R<0&&st===0&&this[z+tt+1]!==0&&(st=1),this[z+tt]=(R/at>>0)-st&255;return z+Se},u.prototype.writeInt8=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,1,127,-128),R<0&&(R=255+R+1),this[z]=R&255,z+1},u.prototype.writeInt16LE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,2,32767,-32768),this[z]=R&255,this[z+1]=R>>>8,z+2},u.prototype.writeInt16BE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,2,32767,-32768),this[z]=R>>>8,this[z+1]=R&255,z+2},u.prototype.writeInt32LE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,4,2147483647,-2147483648),this[z]=R&255,this[z+1]=R>>>8,this[z+2]=R>>>16,this[z+3]=R>>>24,z+4},u.prototype.writeInt32BE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[z]=R>>>24,this[z+1]=R>>>16,this[z+2]=R>>>8,this[z+3]=R&255,z+4},u.prototype.writeBigInt64LE=Qe(function(R,z=0){return Pe(this,R,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Qe(function(R,z=0){return ze(this,R,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function We(ae,R,z,Se,Ve,tt){if(z+Se>ae.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function He(ae,R,z,Se,Ve){return R=+R,z=z>>>0,Ve||We(ae,R,z,4),i.write(ae,R,z,Se,23,4),z+4}u.prototype.writeFloatLE=function(R,z,Se){return He(this,R,z,!0,Se)},u.prototype.writeFloatBE=function(R,z,Se){return He(this,R,z,!1,Se)};function nt(ae,R,z,Se,Ve){return R=+R,z=z>>>0,Ve||We(ae,R,z,8),i.write(ae,R,z,Se,52,8),z+8}u.prototype.writeDoubleLE=function(R,z,Se){return nt(this,R,z,!0,Se)},u.prototype.writeDoubleBE=function(R,z,Se){return nt(this,R,z,!1,Se)},u.prototype.copy=function(R,z,Se,Ve){if(!u.isBuffer(R))throw new TypeError("argument should be a Buffer");if(Se||(Se=0),!Ve&&Ve!==0&&(Ve=this.length),z>=R.length&&(z=R.length),z||(z=0),Ve>0&&Ve<Se&&(Ve=Se),Ve===Se||R.length===0||this.length===0)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(Se<0||Se>=this.length)throw new RangeError("Index out of range");if(Ve<0)throw new RangeError("sourceEnd out of bounds");Ve>this.length&&(Ve=this.length),R.length-z<Ve-Se&&(Ve=R.length-z+Se);const tt=Ve-Se;return this===R&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(z,Se,Ve):Uint8Array.prototype.set.call(R,this.subarray(Se,Ve),z),tt},u.prototype.fill=function(R,z,Se,Ve){if(typeof R=="string"){if(typeof z=="string"?(Ve=z,z=0,Se=this.length):typeof Se=="string"&&(Ve=Se,Se=this.length),Ve!==void 0&&typeof Ve!="string")throw new TypeError("encoding must be a string");if(typeof Ve=="string"&&!u.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);if(R.length===1){const at=R.charCodeAt(0);(Ve==="utf8"&&at<128||Ve==="latin1")&&(R=at)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(z<0||this.length<z||this.length<Se)throw new RangeError("Out of range index");if(Se<=z)return this;z=z>>>0,Se=Se===void 0?this.length:Se>>>0,R||(R=0);let tt;if(typeof R=="number")for(tt=z;tt<Se;++tt)this[tt]=R;else{const at=u.isBuffer(R)?R:u.from(R,Ve),st=at.length;if(st===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(tt=0;tt<Se-z;++tt)this[tt+z]=at[tt%st]}return this};const dt={};function wt(ae,R,z){dt[ae]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(Ve){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ve,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}wt("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),wt("ERR_INVALID_ARG_TYPE",function(ae,R){return`The "${ae}" argument must be of type number. Received type ${typeof R}`},TypeError),wt("ERR_OUT_OF_RANGE",function(ae,R,z){let Se=`The value of "${ae}" is out of range.`,Ve=z;return Number.isInteger(z)&&Math.abs(z)>2**32?Ve=Mt(String(z)):typeof z=="bigint"&&(Ve=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(Ve=Mt(Ve)),Ve+="n"),Se+=` It must be ${R}. Received ${Ve}`,Se},RangeError);function Mt(ae){let R="",z=ae.length;const Se=ae[0]==="-"?1:0;for(;z>=Se+4;z-=3)R=`_${ae.slice(z-3,z)}${R}`;return`${ae.slice(0,z)}${R}`}function gt(ae,R,z){$t(R,"offset"),(ae[R]===void 0||ae[R+z]===void 0)&&Vt(R,ae.length-(z+1))}function Tt(ae,R,z,Se,Ve,tt){if(ae>z||ae<R){const at=typeof R=="bigint"?"n":"";let st;throw tt>3?R===0||R===BigInt(0)?st=`>= 0${at} and < 2${at} ** ${(tt+1)*8}${at}`:st=`>= -(2${at} ** ${(tt+1)*8-1}${at}) and < 2 ** ${(tt+1)*8-1}${at}`:st=`>= ${R}${at} and <= ${z}${at}`,new dt.ERR_OUT_OF_RANGE("value",st,ae)}gt(Se,Ve,tt)}function $t(ae,R){if(typeof ae!="number")throw new dt.ERR_INVALID_ARG_TYPE(R,"number",ae)}function Vt(ae,R,z){throw Math.floor(ae)!==ae?($t(ae,z),new dt.ERR_OUT_OF_RANGE(z||"offset","an integer",ae)):R<0?new dt.ERR_BUFFER_OUT_OF_BOUNDS:new dt.ERR_OUT_OF_RANGE(z||"offset",`>= ${z?1:0} and <= ${R}`,ae)}const Zt=/[^+/0-9A-Za-z-_]/g;function En(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(Zt,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function et(ae,R){R=R||1/0;let z;const Se=ae.length;let Ve=null;const tt=[];for(let at=0;at<Se;++at){if(z=ae.charCodeAt(at),z>55295&&z<57344){if(!Ve){if(z>56319){(R-=3)>-1&&tt.push(239,191,189);continue}else if(at+1===Se){(R-=3)>-1&&tt.push(239,191,189);continue}Ve=z;continue}if(z<56320){(R-=3)>-1&&tt.push(239,191,189),Ve=z;continue}z=(Ve-55296<<10|z-56320)+65536}else Ve&&(R-=3)>-1&&tt.push(239,191,189);if(Ve=null,z<128){if((R-=1)<0)break;tt.push(z)}else if(z<2048){if((R-=2)<0)break;tt.push(z>>6|192,z&63|128)}else if(z<65536){if((R-=3)<0)break;tt.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((R-=4)<0)break;tt.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return tt}function sn(ae){const R=[];for(let z=0;z<ae.length;++z)R.push(ae.charCodeAt(z)&255);return R}function Sn(ae,R){let z,Se,Ve;const tt=[];for(let at=0;at<ae.length&&!((R-=2)<0);++at)z=ae.charCodeAt(at),Se=z>>8,Ve=z%256,tt.push(Ve),tt.push(Se);return tt}function we(ae){return t.toByteArray(En(ae))}function N(ae,R,z,Se){let Ve;for(Ve=0;Ve<Se&&!(Ve+z>=R.length||Ve>=ae.length);++Ve)R[Ve+z]=ae[Ve];return Ve}function D(ae,R){return ae instanceof R||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===R.name}function xe(ae){return ae!==ae}const Ze=function(){const ae="0123456789abcdef",R=new Array(256);for(let z=0;z<16;++z){const Se=z*16;for(let Ve=0;Ve<16;++Ve)R[Se+Ve]=ae[z]+ae[Ve]}return R}();function Qe(ae){return typeof BigInt>"u"?ct:ae}function ct(){throw new Error("BigInt not supported")}})(yA);window.Buffer=yA.Buffer;O3.render(yt.jsx(Z_.StrictMode,{children:yt.jsx(X5,{})}),document.getElementById("root"));

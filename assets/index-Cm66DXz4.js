function KF(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in e)){const f=Object.getOwnPropertyDescriptor(a,l);f&&Object.defineProperty(e,l,f.get?f:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const f of l)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const f={};return l.integrity&&(f.integrity=l.integrity),l.referrerPolicy&&(f.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?f.credentials="include":l.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(l){if(l.ep)return;l.ep=!0;const f=n(l);fetch(l.href,f)}})();var Da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _w(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var l=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:function(){return e[a]}})}),n}var TI={exports:{}},y0={},PI={exports:{}},Br={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np=Symbol.for("react.element"),YF=Symbol.for("react.portal"),JF=Symbol.for("react.fragment"),QF=Symbol.for("react.strict_mode"),eR=Symbol.for("react.profiler"),tR=Symbol.for("react.provider"),rR=Symbol.for("react.context"),nR=Symbol.for("react.forward_ref"),iR=Symbol.for("react.suspense"),oR=Symbol.for("react.memo"),aR=Symbol.for("react.lazy"),sE=Symbol.iterator;function sR(e){return e===null||typeof e!="object"?null:(e=sE&&e[sE]||e["@@iterator"],typeof e=="function"?e:null)}var AI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},II=Object.assign,CI={};function Sf(e,t,n){this.props=e,this.context=t,this.refs=CI,this.updater=n||AI}Sf.prototype.isReactComponent={};Sf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function MI(){}MI.prototype=Sf.prototype;function xw(e,t,n){this.props=e,this.context=t,this.refs=CI,this.updater=n||AI}var ww=xw.prototype=new MI;ww.constructor=xw;II(ww,Sf.prototype);ww.isPureReactComponent=!0;var lE=Array.isArray,kI=Object.prototype.hasOwnProperty,bw={current:null},OI={key:!0,ref:!0,__self:!0,__source:!0};function FI(e,t,n){var a,l={},f=null,d=null;if(t!=null)for(a in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(f=""+t.key),t)kI.call(t,a)&&!OI.hasOwnProperty(a)&&(l[a]=t[a]);var u=arguments.length-2;if(u===1)l.children=n;else if(1<u){for(var w=Array(u),E=0;E<u;E++)w[E]=arguments[E+2];l.children=w}if(e&&e.defaultProps)for(a in u=e.defaultProps,u)l[a]===void 0&&(l[a]=u[a]);return{$$typeof:Np,type:e,key:f,ref:d,props:l,_owner:bw.current}}function lR(e,t){return{$$typeof:Np,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Sw(e){return typeof e=="object"&&e!==null&&e.$$typeof===Np}function uR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var uE=/\/+/g;function Gv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uR(""+e.key):t.toString(36)}function Pg(e,t,n,a,l){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(f){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Np:case YF:d=!0}}if(d)return d=e,l=l(d),e=a===""?"."+Gv(d,0):a,lE(l)?(n="",e!=null&&(n=e.replace(uE,"$&/")+"/"),Pg(l,t,n,"",function(E){return E})):l!=null&&(Sw(l)&&(l=lR(l,n+(!l.key||d&&d.key===l.key?"":(""+l.key).replace(uE,"$&/")+"/")+e)),t.push(l)),1;if(d=0,a=a===""?".":a+":",lE(e))for(var u=0;u<e.length;u++){f=e[u];var w=a+Gv(f,u);d+=Pg(f,t,n,w,l)}else if(w=sR(e),typeof w=="function")for(e=w.call(e),u=0;!(f=e.next()).done;)f=f.value,w=a+Gv(f,u++),d+=Pg(f,t,n,w,l);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Nm(e,t,n){if(e==null)return e;var a=[],l=0;return Pg(e,a,"","",function(f){return t.call(n,f,l++)}),a}function cR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var po={current:null},Ag={transition:null},hR={ReactCurrentDispatcher:po,ReactCurrentBatchConfig:Ag,ReactCurrentOwner:bw};Br.Children={map:Nm,forEach:function(e,t,n){Nm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Nm(e,function(){t++}),t},toArray:function(e){return Nm(e,function(t){return t})||[]},only:function(e){if(!Sw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Br.Component=Sf;Br.Fragment=JF;Br.Profiler=eR;Br.PureComponent=xw;Br.StrictMode=QF;Br.Suspense=iR;Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hR;Br.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=II({},e.props),l=e.key,f=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,d=bw.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(w in t)kI.call(t,w)&&!OI.hasOwnProperty(w)&&(a[w]=t[w]===void 0&&u!==void 0?u[w]:t[w])}var w=arguments.length-2;if(w===1)a.children=n;else if(1<w){u=Array(w);for(var E=0;E<w;E++)u[E]=arguments[E+2];a.children=u}return{$$typeof:Np,type:e.type,key:l,ref:f,props:a,_owner:d}};Br.createContext=function(e){return e={$$typeof:rR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:tR,_context:e},e.Consumer=e};Br.createElement=FI;Br.createFactory=function(e){var t=FI.bind(null,e);return t.type=e,t};Br.createRef=function(){return{current:null}};Br.forwardRef=function(e){return{$$typeof:nR,render:e}};Br.isValidElement=Sw;Br.lazy=function(e){return{$$typeof:aR,_payload:{_status:-1,_result:e},_init:cR}};Br.memo=function(e,t){return{$$typeof:oR,type:e,compare:t===void 0?null:t}};Br.startTransition=function(e){var t=Ag.transition;Ag.transition={};try{e()}finally{Ag.transition=t}};Br.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Br.useCallback=function(e,t){return po.current.useCallback(e,t)};Br.useContext=function(e){return po.current.useContext(e)};Br.useDebugValue=function(){};Br.useDeferredValue=function(e){return po.current.useDeferredValue(e)};Br.useEffect=function(e,t){return po.current.useEffect(e,t)};Br.useId=function(){return po.current.useId()};Br.useImperativeHandle=function(e,t,n){return po.current.useImperativeHandle(e,t,n)};Br.useInsertionEffect=function(e,t){return po.current.useInsertionEffect(e,t)};Br.useLayoutEffect=function(e,t){return po.current.useLayoutEffect(e,t)};Br.useMemo=function(e,t){return po.current.useMemo(e,t)};Br.useReducer=function(e,t,n){return po.current.useReducer(e,t,n)};Br.useRef=function(e){return po.current.useRef(e)};Br.useState=function(e){return po.current.useState(e)};Br.useSyncExternalStore=function(e,t,n){return po.current.useSyncExternalStore(e,t,n)};Br.useTransition=function(){return po.current.useTransition()};Br.version="18.2.0";PI.exports=Br;var vt=PI.exports;const Ew=bf(vt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fR=vt,dR=Symbol.for("react.element"),pR=Symbol.for("react.fragment"),mR=Object.prototype.hasOwnProperty,gR=fR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yR={key:!0,ref:!0,__self:!0,__source:!0};function RI(e,t,n){var a,l={},f=null,d=null;n!==void 0&&(f=""+n),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(d=t.ref);for(a in t)mR.call(t,a)&&!yR.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)l[a]===void 0&&(l[a]=t[a]);return{$$typeof:dR,type:e,key:f,ref:d,props:l,_owner:gR.current}}y0.Fragment=pR;y0.jsx=RI;y0.jsxs=RI;TI.exports=y0;var yt=TI.exports,jI={exports:{}},Yo={},LI={exports:{}},zI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(re,de){var we=re.length;re.push(de);e:for(;0<we;){var Te=we-1>>>1,Ne=re[Te];if(0<l(Ne,de))re[Te]=de,re[we]=Ne,we=Te;else break e}}function n(re){return re.length===0?null:re[0]}function a(re){if(re.length===0)return null;var de=re[0],we=re.pop();if(we!==de){re[0]=we;e:for(var Te=0,Ne=re.length,Ie=Ne>>>1;Te<Ie;){var Oe=2*(Te+1)-1,qe=re[Oe],He=Oe+1,ot=re[He];if(0>l(qe,we))He<Ne&&0>l(ot,qe)?(re[Te]=ot,re[He]=we,Te=He):(re[Te]=qe,re[Oe]=we,Te=Oe);else if(He<Ne&&0>l(ot,we))re[Te]=ot,re[He]=we,Te=He;else break e}}return de}function l(re,de){var we=re.sortIndex-de.sortIndex;return we!==0?we:re.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var d=Date,u=d.now();e.unstable_now=function(){return d.now()-u}}var w=[],E=[],I=1,b=null,T=3,R=!1,z=!1,j=!1,se=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(re){for(var de=n(E);de!==null;){if(de.callback===null)a(E);else if(de.startTime<=re)a(E),de.sortIndex=de.expirationTime,t(w,de);else break;de=n(E)}}function ae(re){if(j=!1,V(re),!z)if(n(w)!==null)z=!0,ce(X);else{var de=n(E);de!==null&&J(ae,de.startTime-re)}}function X(re,de){z=!1,j&&(j=!1,K(L),L=-1),R=!0;var we=T;try{for(V(de),b=n(w);b!==null&&(!(b.expirationTime>de)||re&&!q());){var Te=b.callback;if(typeof Te=="function"){b.callback=null,T=b.priorityLevel;var Ne=Te(b.expirationTime<=de);de=e.unstable_now(),typeof Ne=="function"?b.callback=Ne:b===n(w)&&a(w),V(de)}else a(w);b=n(w)}if(b!==null)var Ie=!0;else{var Oe=n(E);Oe!==null&&J(ae,Oe.startTime-de),Ie=!1}return Ie}finally{b=null,T=we,R=!1}}var U=!1,P=null,L=-1,B=5,Q=-1;function q(){return!(e.unstable_now()-Q<B)}function ve(){if(P!==null){var re=e.unstable_now();Q=re;var de=!0;try{de=P(!0,re)}finally{de?ye():(U=!1,P=null)}}else U=!1}var ye;if(typeof Z=="function")ye=function(){Z(ve)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,oe=fe.port2;fe.port1.onmessage=ve,ye=function(){oe.postMessage(null)}}else ye=function(){se(ve,0)};function ce(re){P=re,U||(U=!0,ye())}function J(re,de){L=se(function(){re(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){z||R||(z=!0,ce(X))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return n(w)},e.unstable_next=function(re){switch(T){case 1:case 2:case 3:var de=3;break;default:de=T}var we=T;T=de;try{return re()}finally{T=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,de){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var we=T;T=re;try{return de()}finally{T=we}},e.unstable_scheduleCallback=function(re,de,we){var Te=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Te+we:Te):we=Te,re){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=we+Ne,re={id:I++,callback:de,priorityLevel:re,startTime:we,expirationTime:Ne,sortIndex:-1},we>Te?(re.sortIndex=we,t(E,re),n(w)===null&&re===n(E)&&(j?(K(L),L=-1):j=!0,J(ae,we-Te))):(re.sortIndex=Ne,t(w,re),z||R||(z=!0,ce(X))),re},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(re){var de=T;return function(){var we=T;T=de;try{return re.apply(this,arguments)}finally{T=we}}}})(zI);LI.exports=zI;var vR=LI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BI=vt,Ko=vR;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DI=new Set,fp={};function Tc(e,t){of(e,t),of(e+"Capture",t)}function of(e,t){for(fp[e]=t,e=0;e<t.length;e++)DI.add(t[e])}var hl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m1=Object.prototype.hasOwnProperty,_R=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cE={},hE={};function xR(e){return m1.call(hE,e)?!0:m1.call(cE,e)?!1:_R.test(e)?hE[e]=!0:(cE[e]=!0,!1)}function wR(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bR(e,t,n,a){if(t===null||typeof t>"u"||wR(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mo(e,t,n,a,l,f,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=d}var ji={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ji[e]=new mo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ji[t]=new mo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ji[e]=new mo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ji[e]=new mo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ji[e]=new mo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ji[e]=new mo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ji[e]=new mo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ji[e]=new mo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ji[e]=new mo(e,5,!1,e.toLowerCase(),null,!1,!1)});var Tw=/[\-:]([a-z])/g;function Pw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Tw,Pw);ji[t]=new mo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Tw,Pw);ji[t]=new mo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Tw,Pw);ji[t]=new mo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ji[e]=new mo(e,1,!1,e.toLowerCase(),null,!1,!1)});ji.xlinkHref=new mo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ji[e]=new mo(e,1,!1,e.toLowerCase(),null,!0,!0)});function Aw(e,t,n,a){var l=ji.hasOwnProperty(t)?ji[t]:null;(l!==null?l.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bR(t,n,l,a)&&(n=null),a||l===null?xR(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,a=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var _l=BI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$m=Symbol.for("react.element"),Mh=Symbol.for("react.portal"),kh=Symbol.for("react.fragment"),Iw=Symbol.for("react.strict_mode"),g1=Symbol.for("react.profiler"),NI=Symbol.for("react.provider"),$I=Symbol.for("react.context"),Cw=Symbol.for("react.forward_ref"),y1=Symbol.for("react.suspense"),v1=Symbol.for("react.suspense_list"),Mw=Symbol.for("react.memo"),ru=Symbol.for("react.lazy"),UI=Symbol.for("react.offscreen"),fE=Symbol.iterator;function bd(e){return e===null||typeof e!="object"?null:(e=fE&&e[fE]||e["@@iterator"],typeof e=="function"?e:null)}var Mn=Object.assign,Wv;function Rd(e){if(Wv===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wv=t&&t[1]||""}return`
`+Wv+e}var Hv=!1;function Zv(e,t){if(!e||Hv)return"";Hv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var a=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){a=E}e.call(t.prototype)}else{try{throw Error()}catch(E){a=E}e()}}catch(E){if(E&&a&&typeof E.stack=="string"){for(var l=E.stack.split(`
`),f=a.stack.split(`
`),d=l.length-1,u=f.length-1;1<=d&&0<=u&&l[d]!==f[u];)u--;for(;1<=d&&0<=u;d--,u--)if(l[d]!==f[u]){if(d!==1||u!==1)do if(d--,u--,0>u||l[d]!==f[u]){var w=`
`+l[d].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=d&&0<=u);break}}}finally{Hv=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Rd(e):""}function SR(e){switch(e.tag){case 5:return Rd(e.type);case 16:return Rd("Lazy");case 13:return Rd("Suspense");case 19:return Rd("SuspenseList");case 0:case 2:case 15:return e=Zv(e.type,!1),e;case 11:return e=Zv(e.type.render,!1),e;case 1:return e=Zv(e.type,!0),e;default:return""}}function _1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case kh:return"Fragment";case Mh:return"Portal";case g1:return"Profiler";case Iw:return"StrictMode";case y1:return"Suspense";case v1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $I:return(e.displayName||"Context")+".Consumer";case NI:return(e._context.displayName||"Context")+".Provider";case Cw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mw:return t=e.displayName||null,t!==null?t:_1(e.type)||"Memo";case ru:t=e._payload,e=e._init;try{return _1(e(t))}catch{}}return null}function ER(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _1(t);case 8:return t===Iw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function VI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function TR(e){var t=VI(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,f=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(d){a=""+d,f.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Um(e){e._valueTracker||(e._valueTracker=TR(e))}function GI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=VI(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function ry(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function x1(e,t){var n=t.checked;return Mn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function dE(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=xu(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function WI(e,t){t=t.checked,t!=null&&Aw(e,"checked",t,!1)}function w1(e,t){WI(e,t);var n=xu(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?b1(e,t.type,n):t.hasOwnProperty("defaultValue")&&b1(e,t.type,xu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function b1(e,t,n){(t!=="number"||ry(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var jd=Array.isArray;function qh(e,t,n,a){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&a&&(e[n].defaultSelected=!0)}else{for(n=""+xu(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,a&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function S1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return Mn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(At(92));if(jd(n)){if(1<n.length)throw Error(At(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xu(n)}}function HI(e,t){var n=xu(t.value),a=xu(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function gE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ZI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function E1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ZI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vm,qI=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vm=Vm||document.createElement("div"),Vm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function dp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PR=["Webkit","ms","Moz","O"];Object.keys(Zd).forEach(function(e){PR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zd[t]=Zd[e]})});function XI(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Zd.hasOwnProperty(e)&&Zd[e]?(""+t).trim():t+"px"}function KI(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,l=XI(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,l):e[n]=l}}var AR=Mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function T1(e,t){if(t){if(AR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function P1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var A1=null;function kw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var I1=null,Xh=null,Kh=null;function yE(e){if(e=Vp(e)){if(typeof I1!="function")throw Error(At(280));var t=e.stateNode;t&&(t=b0(t),I1(e.stateNode,e.type,t))}}function YI(e){Xh?Kh?Kh.push(e):Kh=[e]:Xh=e}function JI(){if(Xh){var e=Xh,t=Kh;if(Kh=Xh=null,yE(e),t)for(e=0;e<t.length;e++)yE(t[e])}}function QI(e,t){return e(t)}function eC(){}var qv=!1;function tC(e,t,n){if(qv)return e(t,n);qv=!0;try{return QI(e,t,n)}finally{qv=!1,(Xh!==null||Kh!==null)&&(eC(),JI())}}function pp(e,t){var n=e.stateNode;if(n===null)return null;var a=b0(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(At(231,t,typeof n));return n}var C1=!1;if(hl)try{var Sd={};Object.defineProperty(Sd,"passive",{get:function(){C1=!0}}),window.addEventListener("test",Sd,Sd),window.removeEventListener("test",Sd,Sd)}catch{C1=!1}function IR(e,t,n,a,l,f,d,u,w){var E=Array.prototype.slice.call(arguments,3);try{t.apply(n,E)}catch(I){this.onError(I)}}var qd=!1,ny=null,iy=!1,M1=null,CR={onError:function(e){qd=!0,ny=e}};function MR(e,t,n,a,l,f,d,u,w){qd=!1,ny=null,IR.apply(CR,arguments)}function kR(e,t,n,a,l,f,d,u,w){if(MR.apply(this,arguments),qd){if(qd){var E=ny;qd=!1,ny=null}else throw Error(At(198));iy||(iy=!0,M1=E)}}function Pc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function rC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vE(e){if(Pc(e)!==e)throw Error(At(188))}function OR(e){var t=e.alternate;if(!t){if(t=Pc(e),t===null)throw Error(At(188));return t!==e?null:e}for(var n=e,a=t;;){var l=n.return;if(l===null)break;var f=l.alternate;if(f===null){if(a=l.return,a!==null){n=a;continue}break}if(l.child===f.child){for(f=l.child;f;){if(f===n)return vE(l),e;if(f===a)return vE(l),t;f=f.sibling}throw Error(At(188))}if(n.return!==a.return)n=l,a=f;else{for(var d=!1,u=l.child;u;){if(u===n){d=!0,n=l,a=f;break}if(u===a){d=!0,a=l,n=f;break}u=u.sibling}if(!d){for(u=f.child;u;){if(u===n){d=!0,n=f,a=l;break}if(u===a){d=!0,a=f,n=l;break}u=u.sibling}if(!d)throw Error(At(189))}}if(n.alternate!==a)throw Error(At(190))}if(n.tag!==3)throw Error(At(188));return n.stateNode.current===n?e:t}function nC(e){return e=OR(e),e!==null?iC(e):null}function iC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=iC(e);if(t!==null)return t;e=e.sibling}return null}var oC=Ko.unstable_scheduleCallback,_E=Ko.unstable_cancelCallback,FR=Ko.unstable_shouldYield,RR=Ko.unstable_requestPaint,Zn=Ko.unstable_now,jR=Ko.unstable_getCurrentPriorityLevel,Ow=Ko.unstable_ImmediatePriority,aC=Ko.unstable_UserBlockingPriority,oy=Ko.unstable_NormalPriority,LR=Ko.unstable_LowPriority,sC=Ko.unstable_IdlePriority,v0=null,As=null;function zR(e){if(As&&typeof As.onCommitFiberRoot=="function")try{As.onCommitFiberRoot(v0,e,void 0,(e.current.flags&128)===128)}catch{}}var Ga=Math.clz32?Math.clz32:NR,BR=Math.log,DR=Math.LN2;function NR(e){return e>>>=0,e===0?32:31-(BR(e)/DR|0)|0}var Gm=64,Wm=4194304;function Ld(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ay(e,t){var n=e.pendingLanes;if(n===0)return 0;var a=0,l=e.suspendedLanes,f=e.pingedLanes,d=n&268435455;if(d!==0){var u=d&~l;u!==0?a=Ld(u):(f&=d,f!==0&&(a=Ld(f)))}else d=n&~l,d!==0?a=Ld(d):f!==0&&(a=Ld(f));if(a===0)return 0;if(t!==0&&t!==a&&!(t&l)&&(l=a&-a,f=t&-t,l>=f||l===16&&(f&4194240)!==0))return t;if(a&4&&(a|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-Ga(t),l=1<<n,a|=e[n],t&=~l;return a}function $R(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UR(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,l=e.expirationTimes,f=e.pendingLanes;0<f;){var d=31-Ga(f),u=1<<d,w=l[d];w===-1?(!(u&n)||u&a)&&(l[d]=$R(u,t)):w<=t&&(e.expiredLanes|=u),f&=~u}}function k1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lC(){var e=Gm;return Gm<<=1,!(Gm&4194240)&&(Gm=64),e}function Xv(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $p(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ga(t),e[t]=n}function VR(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Ga(n),f=1<<l;t[l]=0,a[l]=-1,e[l]=-1,n&=~f}}function Fw(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Ga(n),l=1<<a;l&t|e[a]&t&&(e[a]|=t),n&=~l}}var Yr=0;function uC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cC,Rw,hC,fC,dC,O1=!1,Hm=[],hu=null,fu=null,du=null,mp=new Map,gp=new Map,au=[],GR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xE(e,t){switch(e){case"focusin":case"focusout":hu=null;break;case"dragenter":case"dragleave":fu=null;break;case"mouseover":case"mouseout":du=null;break;case"pointerover":case"pointerout":mp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gp.delete(t.pointerId)}}function Ed(e,t,n,a,l,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:f,targetContainers:[l]},t!==null&&(t=Vp(t),t!==null&&Rw(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function WR(e,t,n,a,l){switch(t){case"focusin":return hu=Ed(hu,e,t,n,a,l),!0;case"dragenter":return fu=Ed(fu,e,t,n,a,l),!0;case"mouseover":return du=Ed(du,e,t,n,a,l),!0;case"pointerover":var f=l.pointerId;return mp.set(f,Ed(mp.get(f)||null,e,t,n,a,l)),!0;case"gotpointercapture":return f=l.pointerId,gp.set(f,Ed(gp.get(f)||null,e,t,n,a,l)),!0}return!1}function pC(e){var t=sc(e.target);if(t!==null){var n=Pc(t);if(n!==null){if(t=n.tag,t===13){if(t=rC(n),t!==null){e.blockedOn=t,dC(e.priority,function(){hC(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ig(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=F1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);A1=a,n.target.dispatchEvent(a),A1=null}else return t=Vp(n),t!==null&&Rw(t),e.blockedOn=n,!1;t.shift()}return!0}function wE(e,t,n){Ig(e)&&n.delete(t)}function HR(){O1=!1,hu!==null&&Ig(hu)&&(hu=null),fu!==null&&Ig(fu)&&(fu=null),du!==null&&Ig(du)&&(du=null),mp.forEach(wE),gp.forEach(wE)}function Td(e,t){e.blockedOn===t&&(e.blockedOn=null,O1||(O1=!0,Ko.unstable_scheduleCallback(Ko.unstable_NormalPriority,HR)))}function yp(e){function t(l){return Td(l,e)}if(0<Hm.length){Td(Hm[0],e);for(var n=1;n<Hm.length;n++){var a=Hm[n];a.blockedOn===e&&(a.blockedOn=null)}}for(hu!==null&&Td(hu,e),fu!==null&&Td(fu,e),du!==null&&Td(du,e),mp.forEach(t),gp.forEach(t),n=0;n<au.length;n++)a=au[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<au.length&&(n=au[0],n.blockedOn===null);)pC(n),n.blockedOn===null&&au.shift()}var Yh=_l.ReactCurrentBatchConfig,sy=!0;function ZR(e,t,n,a){var l=Yr,f=Yh.transition;Yh.transition=null;try{Yr=1,jw(e,t,n,a)}finally{Yr=l,Yh.transition=f}}function qR(e,t,n,a){var l=Yr,f=Yh.transition;Yh.transition=null;try{Yr=4,jw(e,t,n,a)}finally{Yr=l,Yh.transition=f}}function jw(e,t,n,a){if(sy){var l=F1(e,t,n,a);if(l===null)o_(e,t,a,ly,n),xE(e,a);else if(WR(l,e,t,n,a))a.stopPropagation();else if(xE(e,a),t&4&&-1<GR.indexOf(e)){for(;l!==null;){var f=Vp(l);if(f!==null&&cC(f),f=F1(e,t,n,a),f===null&&o_(e,t,a,ly,n),f===l)break;l=f}l!==null&&a.stopPropagation()}else o_(e,t,a,null,n)}}var ly=null;function F1(e,t,n,a){if(ly=null,e=kw(a),e=sc(e),e!==null)if(t=Pc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=rC(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ly=e,null}function mC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jR()){case Ow:return 1;case aC:return 4;case oy:case LR:return 16;case sC:return 536870912;default:return 16}default:return 16}}var lu=null,Lw=null,Cg=null;function gC(){if(Cg)return Cg;var e,t=Lw,n=t.length,a,l="value"in lu?lu.value:lu.textContent,f=l.length;for(e=0;e<n&&t[e]===l[e];e++);var d=n-e;for(a=1;a<=d&&t[n-a]===l[f-a];a++);return Cg=l.slice(e,1<a?1-a:void 0)}function Mg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zm(){return!0}function bE(){return!1}function Jo(e){function t(n,a,l,f,d){this._reactName=n,this._targetInst=l,this.type=a,this.nativeEvent=f,this.target=d,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(f):f[u]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Zm:bE,this.isPropagationStopped=bE,this}return Mn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zm)},persist:function(){},isPersistent:Zm}),t}var Ef={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zw=Jo(Ef),Up=Mn({},Ef,{view:0,detail:0}),XR=Jo(Up),Kv,Yv,Pd,_0=Mn({},Up,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pd&&(Pd&&e.type==="mousemove"?(Kv=e.screenX-Pd.screenX,Yv=e.screenY-Pd.screenY):Yv=Kv=0,Pd=e),Kv)},movementY:function(e){return"movementY"in e?e.movementY:Yv}}),SE=Jo(_0),KR=Mn({},_0,{dataTransfer:0}),YR=Jo(KR),JR=Mn({},Up,{relatedTarget:0}),Jv=Jo(JR),QR=Mn({},Ef,{animationName:0,elapsedTime:0,pseudoElement:0}),ej=Jo(QR),tj=Mn({},Ef,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rj=Jo(tj),nj=Mn({},Ef,{data:0}),EE=Jo(nj),ij={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=aj[e])?!!t[e]:!1}function Bw(){return sj}var lj=Mn({},Up,{key:function(e){if(e.key){var t=ij[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Mg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?oj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bw,charCode:function(e){return e.type==="keypress"?Mg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uj=Jo(lj),cj=Mn({},_0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TE=Jo(cj),hj=Mn({},Up,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bw}),fj=Jo(hj),dj=Mn({},Ef,{propertyName:0,elapsedTime:0,pseudoElement:0}),pj=Jo(dj),mj=Mn({},_0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gj=Jo(mj),yj=[9,13,27,32],Dw=hl&&"CompositionEvent"in window,Xd=null;hl&&"documentMode"in document&&(Xd=document.documentMode);var vj=hl&&"TextEvent"in window&&!Xd,yC=hl&&(!Dw||Xd&&8<Xd&&11>=Xd),PE=" ",AE=!1;function vC(e,t){switch(e){case"keyup":return yj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _C(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oh=!1;function _j(e,t){switch(e){case"compositionend":return _C(t);case"keypress":return t.which!==32?null:(AE=!0,PE);case"textInput":return e=t.data,e===PE&&AE?null:e;default:return null}}function xj(e,t){if(Oh)return e==="compositionend"||!Dw&&vC(e,t)?(e=gC(),Cg=Lw=lu=null,Oh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yC&&t.locale!=="ko"?null:t.data;default:return null}}var wj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function IE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wj[e.type]:t==="textarea"}function xC(e,t,n,a){YI(a),t=uy(t,"onChange"),0<t.length&&(n=new zw("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Kd=null,vp=null;function bj(e){kC(e,0)}function x0(e){var t=jh(e);if(GI(t))return e}function Sj(e,t){if(e==="change")return t}var wC=!1;if(hl){var Qv;if(hl){var e_="oninput"in document;if(!e_){var CE=document.createElement("div");CE.setAttribute("oninput","return;"),e_=typeof CE.oninput=="function"}Qv=e_}else Qv=!1;wC=Qv&&(!document.documentMode||9<document.documentMode)}function ME(){Kd&&(Kd.detachEvent("onpropertychange",bC),vp=Kd=null)}function bC(e){if(e.propertyName==="value"&&x0(vp)){var t=[];xC(t,vp,e,kw(e)),tC(bj,t)}}function Ej(e,t,n){e==="focusin"?(ME(),Kd=t,vp=n,Kd.attachEvent("onpropertychange",bC)):e==="focusout"&&ME()}function Tj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return x0(vp)}function Pj(e,t){if(e==="click")return x0(t)}function Aj(e,t){if(e==="input"||e==="change")return x0(t)}function Ij(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Za=typeof Object.is=="function"?Object.is:Ij;function _p(e,t){if(Za(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var l=n[a];if(!m1.call(t,l)||!Za(e[l],t[l]))return!1}return!0}function kE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function OE(e,t){var n=kE(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kE(n)}}function SC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?SC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function EC(){for(var e=window,t=ry();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ry(e.document)}return t}function Nw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Cj(e){var t=EC(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&SC(n.ownerDocument.documentElement,n)){if(a!==null&&Nw(n)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,f=Math.min(a.start,l);a=a.end===void 0?f:Math.min(a.end,l),!e.extend&&f>a&&(l=a,a=f,f=l),l=OE(n,f);var d=OE(n,a);l&&d&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Mj=hl&&"documentMode"in document&&11>=document.documentMode,Fh=null,R1=null,Yd=null,j1=!1;function FE(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;j1||Fh==null||Fh!==ry(a)||(a=Fh,"selectionStart"in a&&Nw(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Yd&&_p(Yd,a)||(Yd=a,a=uy(R1,"onSelect"),0<a.length&&(t=new zw("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=Fh)))}function qm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Rh={animationend:qm("Animation","AnimationEnd"),animationiteration:qm("Animation","AnimationIteration"),animationstart:qm("Animation","AnimationStart"),transitionend:qm("Transition","TransitionEnd")},t_={},TC={};hl&&(TC=document.createElement("div").style,"AnimationEvent"in window||(delete Rh.animationend.animation,delete Rh.animationiteration.animation,delete Rh.animationstart.animation),"TransitionEvent"in window||delete Rh.transitionend.transition);function w0(e){if(t_[e])return t_[e];if(!Rh[e])return e;var t=Rh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in TC)return t_[e]=t[n];return e}var PC=w0("animationend"),AC=w0("animationiteration"),IC=w0("animationstart"),CC=w0("transitionend"),MC=new Map,RE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pu(e,t){MC.set(e,t),Tc(t,[e])}for(var r_=0;r_<RE.length;r_++){var n_=RE[r_],kj=n_.toLowerCase(),Oj=n_[0].toUpperCase()+n_.slice(1);Pu(kj,"on"+Oj)}Pu(PC,"onAnimationEnd");Pu(AC,"onAnimationIteration");Pu(IC,"onAnimationStart");Pu("dblclick","onDoubleClick");Pu("focusin","onFocus");Pu("focusout","onBlur");Pu(CC,"onTransitionEnd");of("onMouseEnter",["mouseout","mouseover"]);of("onMouseLeave",["mouseout","mouseover"]);of("onPointerEnter",["pointerout","pointerover"]);of("onPointerLeave",["pointerout","pointerover"]);Tc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fj=new Set("cancel close invalid load scroll toggle".split(" ").concat(zd));function jE(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,kR(a,t,void 0,e),e.currentTarget=null}function kC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],l=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var d=a.length-1;0<=d;d--){var u=a[d],w=u.instance,E=u.currentTarget;if(u=u.listener,w!==f&&l.isPropagationStopped())break e;jE(l,u,E),f=w}else for(d=0;d<a.length;d++){if(u=a[d],w=u.instance,E=u.currentTarget,u=u.listener,w!==f&&l.isPropagationStopped())break e;jE(l,u,E),f=w}}}if(iy)throw e=M1,iy=!1,M1=null,e}function dn(e,t){var n=t[N1];n===void 0&&(n=t[N1]=new Set);var a=e+"__bubble";n.has(a)||(OC(t,e,2,!1),n.add(a))}function i_(e,t,n){var a=0;t&&(a|=4),OC(n,e,a,t)}var Xm="_reactListening"+Math.random().toString(36).slice(2);function xp(e){if(!e[Xm]){e[Xm]=!0,DI.forEach(function(n){n!=="selectionchange"&&(Fj.has(n)||i_(n,!1,e),i_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xm]||(t[Xm]=!0,i_("selectionchange",!1,t))}}function OC(e,t,n,a){switch(mC(t)){case 1:var l=ZR;break;case 4:l=qR;break;default:l=jw}n=l.bind(null,t,n,e),l=void 0,!C1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),a?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function o_(e,t,n,a,l){var f=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var u=a.stateNode.containerInfo;if(u===l||u.nodeType===8&&u.parentNode===l)break;if(d===4)for(d=a.return;d!==null;){var w=d.tag;if((w===3||w===4)&&(w=d.stateNode.containerInfo,w===l||w.nodeType===8&&w.parentNode===l))return;d=d.return}for(;u!==null;){if(d=sc(u),d===null)return;if(w=d.tag,w===5||w===6){a=f=d;continue e}u=u.parentNode}}a=a.return}tC(function(){var E=f,I=kw(n),b=[];e:{var T=MC.get(e);if(T!==void 0){var R=zw,z=e;switch(e){case"keypress":if(Mg(n)===0)break e;case"keydown":case"keyup":R=uj;break;case"focusin":z="focus",R=Jv;break;case"focusout":z="blur",R=Jv;break;case"beforeblur":case"afterblur":R=Jv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=SE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=YR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=fj;break;case PC:case AC:case IC:R=ej;break;case CC:R=pj;break;case"scroll":R=XR;break;case"wheel":R=gj;break;case"copy":case"cut":case"paste":R=rj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=TE}var j=(t&4)!==0,se=!j&&e==="scroll",K=j?T!==null?T+"Capture":null:T;j=[];for(var Z=E,V;Z!==null;){V=Z;var ae=V.stateNode;if(V.tag===5&&ae!==null&&(V=ae,K!==null&&(ae=pp(Z,K),ae!=null&&j.push(wp(Z,ae,V)))),se)break;Z=Z.return}0<j.length&&(T=new R(T,z,null,n,I),b.push({event:T,listeners:j}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",T&&n!==A1&&(z=n.relatedTarget||n.fromElement)&&(sc(z)||z[fl]))break e;if((R||T)&&(T=I.window===I?I:(T=I.ownerDocument)?T.defaultView||T.parentWindow:window,R?(z=n.relatedTarget||n.toElement,R=E,z=z?sc(z):null,z!==null&&(se=Pc(z),z!==se||z.tag!==5&&z.tag!==6)&&(z=null)):(R=null,z=E),R!==z)){if(j=SE,ae="onMouseLeave",K="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(j=TE,ae="onPointerLeave",K="onPointerEnter",Z="pointer"),se=R==null?T:jh(R),V=z==null?T:jh(z),T=new j(ae,Z+"leave",R,n,I),T.target=se,T.relatedTarget=V,ae=null,sc(I)===E&&(j=new j(K,Z+"enter",z,n,I),j.target=V,j.relatedTarget=se,ae=j),se=ae,R&&z)t:{for(j=R,K=z,Z=0,V=j;V;V=_h(V))Z++;for(V=0,ae=K;ae;ae=_h(ae))V++;for(;0<Z-V;)j=_h(j),Z--;for(;0<V-Z;)K=_h(K),V--;for(;Z--;){if(j===K||K!==null&&j===K.alternate)break t;j=_h(j),K=_h(K)}j=null}else j=null;R!==null&&LE(b,T,R,j,!1),z!==null&&se!==null&&LE(b,se,z,j,!0)}}e:{if(T=E?jh(E):window,R=T.nodeName&&T.nodeName.toLowerCase(),R==="select"||R==="input"&&T.type==="file")var X=Sj;else if(IE(T))if(wC)X=Aj;else{X=Tj;var U=Ej}else(R=T.nodeName)&&R.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(X=Pj);if(X&&(X=X(e,E))){xC(b,X,n,I);break e}U&&U(e,T,E),e==="focusout"&&(U=T._wrapperState)&&U.controlled&&T.type==="number"&&b1(T,"number",T.value)}switch(U=E?jh(E):window,e){case"focusin":(IE(U)||U.contentEditable==="true")&&(Fh=U,R1=E,Yd=null);break;case"focusout":Yd=R1=Fh=null;break;case"mousedown":j1=!0;break;case"contextmenu":case"mouseup":case"dragend":j1=!1,FE(b,n,I);break;case"selectionchange":if(Mj)break;case"keydown":case"keyup":FE(b,n,I)}var P;if(Dw)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Oh?vC(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(yC&&n.locale!=="ko"&&(Oh||L!=="onCompositionStart"?L==="onCompositionEnd"&&Oh&&(P=gC()):(lu=I,Lw="value"in lu?lu.value:lu.textContent,Oh=!0)),U=uy(E,L),0<U.length&&(L=new EE(L,e,null,n,I),b.push({event:L,listeners:U}),P?L.data=P:(P=_C(n),P!==null&&(L.data=P)))),(P=vj?_j(e,n):xj(e,n))&&(E=uy(E,"onBeforeInput"),0<E.length&&(I=new EE("onBeforeInput","beforeinput",null,n,I),b.push({event:I,listeners:E}),I.data=P))}kC(b,t)})}function wp(e,t,n){return{instance:e,listener:t,currentTarget:n}}function uy(e,t){for(var n=t+"Capture",a=[];e!==null;){var l=e,f=l.stateNode;l.tag===5&&f!==null&&(l=f,f=pp(e,n),f!=null&&a.unshift(wp(e,f,l)),f=pp(e,t),f!=null&&a.push(wp(e,f,l))),e=e.return}return a}function _h(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function LE(e,t,n,a,l){for(var f=t._reactName,d=[];n!==null&&n!==a;){var u=n,w=u.alternate,E=u.stateNode;if(w!==null&&w===a)break;u.tag===5&&E!==null&&(u=E,l?(w=pp(n,f),w!=null&&d.unshift(wp(n,w,u))):l||(w=pp(n,f),w!=null&&d.push(wp(n,w,u)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var Rj=/\r\n?/g,jj=/\u0000|\uFFFD/g;function zE(e){return(typeof e=="string"?e:""+e).replace(Rj,`
`).replace(jj,"")}function Km(e,t,n){if(t=zE(t),zE(e)!==t&&n)throw Error(At(425))}function cy(){}var L1=null,z1=null;function B1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var D1=typeof setTimeout=="function"?setTimeout:void 0,Lj=typeof clearTimeout=="function"?clearTimeout:void 0,BE=typeof Promise=="function"?Promise:void 0,zj=typeof queueMicrotask=="function"?queueMicrotask:typeof BE<"u"?function(e){return BE.resolve(null).then(e).catch(Bj)}:D1;function Bj(e){setTimeout(function(){throw e})}function a_(e,t){var n=t,a=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(a===0){e.removeChild(l),yp(t);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=l}while(n);yp(t)}function pu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function DE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Tf=Math.random().toString(36).slice(2),bs="__reactFiber$"+Tf,bp="__reactProps$"+Tf,fl="__reactContainer$"+Tf,N1="__reactEvents$"+Tf,Dj="__reactListeners$"+Tf,Nj="__reactHandles$"+Tf;function sc(e){var t=e[bs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fl]||n[bs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=DE(e);e!==null;){if(n=e[bs])return n;e=DE(e)}return t}e=n,n=e.parentNode}return null}function Vp(e){return e=e[bs]||e[fl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function b0(e){return e[bp]||null}var $1=[],Lh=-1;function Au(e){return{current:e}}function mn(e){0>Lh||(e.current=$1[Lh],$1[Lh]=null,Lh--)}function hn(e,t){Lh++,$1[Lh]=e.current,e.current=t}var wu={},Xi=Au(wu),Po=Au(!1),gc=wu;function af(e,t){var n=e.type.contextTypes;if(!n)return wu;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var l={},f;for(f in n)l[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Ao(e){return e=e.childContextTypes,e!=null}function hy(){mn(Po),mn(Xi)}function NE(e,t,n){if(Xi.current!==wu)throw Error(At(168));hn(Xi,t),hn(Po,n)}function FC(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var l in a)if(!(l in t))throw Error(At(108,ER(e)||"Unknown",l));return Mn({},n,a)}function fy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wu,gc=Xi.current,hn(Xi,e),hn(Po,Po.current),!0}function $E(e,t,n){var a=e.stateNode;if(!a)throw Error(At(169));n?(e=FC(e,t,gc),a.__reactInternalMemoizedMergedChildContext=e,mn(Po),mn(Xi),hn(Xi,e)):mn(Po),hn(Po,n)}var il=null,S0=!1,s_=!1;function RC(e){il===null?il=[e]:il.push(e)}function $j(e){S0=!0,RC(e)}function Iu(){if(!s_&&il!==null){s_=!0;var e=0,t=Yr;try{var n=il;for(Yr=1;e<n.length;e++){var a=n[e];do a=a(!0);while(a!==null)}il=null,S0=!1}catch(l){throw il!==null&&(il=il.slice(e+1)),oC(Ow,Iu),l}finally{Yr=t,s_=!1}}return null}var zh=[],Bh=0,dy=null,py=0,ua=[],ca=0,yc=null,sl=1,ll="";function ic(e,t){zh[Bh++]=py,zh[Bh++]=dy,dy=e,py=t}function jC(e,t,n){ua[ca++]=sl,ua[ca++]=ll,ua[ca++]=yc,yc=e;var a=sl;e=ll;var l=32-Ga(a)-1;a&=~(1<<l),n+=1;var f=32-Ga(t)+l;if(30<f){var d=l-l%5;f=(a&(1<<d)-1).toString(32),a>>=d,l-=d,sl=1<<32-Ga(t)+l|n<<l|a,ll=f+e}else sl=1<<f|n<<l|a,ll=e}function $w(e){e.return!==null&&(ic(e,1),jC(e,1,0))}function Uw(e){for(;e===dy;)dy=zh[--Bh],zh[Bh]=null,py=zh[--Bh],zh[Bh]=null;for(;e===yc;)yc=ua[--ca],ua[ca]=null,ll=ua[--ca],ua[ca]=null,sl=ua[--ca],ua[ca]=null}var Xo=null,qo=null,_n=!1,Ba=null;function LC(e,t){var n=fa(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function UE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xo=e,qo=pu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xo=e,qo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=yc!==null?{id:sl,overflow:ll}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=fa(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Xo=e,qo=null,!0):!1;default:return!1}}function U1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function V1(e){if(_n){var t=qo;if(t){var n=t;if(!UE(e,t)){if(U1(e))throw Error(At(418));t=pu(n.nextSibling);var a=Xo;t&&UE(e,t)?LC(a,n):(e.flags=e.flags&-4097|2,_n=!1,Xo=e)}}else{if(U1(e))throw Error(At(418));e.flags=e.flags&-4097|2,_n=!1,Xo=e}}}function VE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xo=e}function Ym(e){if(e!==Xo)return!1;if(!_n)return VE(e),_n=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!B1(e.type,e.memoizedProps)),t&&(t=qo)){if(U1(e))throw zC(),Error(At(418));for(;t;)LC(e,t),t=pu(t.nextSibling)}if(VE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){qo=pu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}qo=null}}else qo=Xo?pu(e.stateNode.nextSibling):null;return!0}function zC(){for(var e=qo;e;)e=pu(e.nextSibling)}function sf(){qo=Xo=null,_n=!1}function Vw(e){Ba===null?Ba=[e]:Ba.push(e)}var Uj=_l.ReactCurrentBatchConfig;function La(e,t){if(e&&e.defaultProps){t=Mn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var my=Au(null),gy=null,Dh=null,Gw=null;function Ww(){Gw=Dh=gy=null}function Hw(e){var t=my.current;mn(my),e._currentValue=t}function G1(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Jh(e,t){gy=e,Gw=Dh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(To=!0),e.firstContext=null)}function ma(e){var t=e._currentValue;if(Gw!==e)if(e={context:e,memoizedValue:t,next:null},Dh===null){if(gy===null)throw Error(At(308));Dh=e,gy.dependencies={lanes:0,firstContext:e}}else Dh=Dh.next=e;return t}var lc=null;function Zw(e){lc===null?lc=[e]:lc.push(e)}function BC(e,t,n,a){var l=t.interleaved;return l===null?(n.next=n,Zw(t)):(n.next=l.next,l.next=n),t.interleaved=n,dl(e,a)}function dl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var nu=!1;function qw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mu(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Ur&2){var l=a.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),a.pending=t,dl(e,n)}return l=a.interleaved,l===null?(t.next=t,Zw(a)):(t.next=l.next,l.next=t),a.interleaved=t,dl(e,n)}function kg(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Fw(e,n)}}function GE(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var l=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};f===null?l=f=d:f=f.next=d,n=n.next}while(n!==null);f===null?l=f=t:f=f.next=t}else l=f=t;n={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function yy(e,t,n,a){var l=e.updateQueue;nu=!1;var f=l.firstBaseUpdate,d=l.lastBaseUpdate,u=l.shared.pending;if(u!==null){l.shared.pending=null;var w=u,E=w.next;w.next=null,d===null?f=E:d.next=E,d=w;var I=e.alternate;I!==null&&(I=I.updateQueue,u=I.lastBaseUpdate,u!==d&&(u===null?I.firstBaseUpdate=E:u.next=E,I.lastBaseUpdate=w))}if(f!==null){var b=l.baseState;d=0,I=E=w=null,u=f;do{var T=u.lane,R=u.eventTime;if((a&T)===T){I!==null&&(I=I.next={eventTime:R,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var z=e,j=u;switch(T=t,R=n,j.tag){case 1:if(z=j.payload,typeof z=="function"){b=z.call(R,b,T);break e}b=z;break e;case 3:z.flags=z.flags&-65537|128;case 0:if(z=j.payload,T=typeof z=="function"?z.call(R,b,T):z,T==null)break e;b=Mn({},b,T);break e;case 2:nu=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,T=l.effects,T===null?l.effects=[u]:T.push(u))}else R={eventTime:R,lane:T,tag:u.tag,payload:u.payload,callback:u.callback,next:null},I===null?(E=I=R,w=b):I=I.next=R,d|=T;if(u=u.next,u===null){if(u=l.shared.pending,u===null)break;T=u,u=T.next,T.next=null,l.lastBaseUpdate=T,l.shared.pending=null}}while(!0);if(I===null&&(w=b),l.baseState=w,l.firstBaseUpdate=E,l.lastBaseUpdate=I,t=l.shared.interleaved,t!==null){l=t;do d|=l.lane,l=l.next;while(l!==t)}else f===null&&(l.shared.lanes=0);_c|=d,e.lanes=d,e.memoizedState=b}}function WE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],l=a.callback;if(l!==null){if(a.callback=null,a=n,typeof l!="function")throw Error(At(191,l));l.call(a)}}}var NC=new BI.Component().refs;function W1(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:Mn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var E0={isMounted:function(e){return(e=e._reactInternals)?Pc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=uo(),l=yu(e),f=cl(a,l);f.payload=t,n!=null&&(f.callback=n),t=mu(e,f,l),t!==null&&(Wa(t,e,l,a),kg(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=uo(),l=yu(e),f=cl(a,l);f.tag=1,f.payload=t,n!=null&&(f.callback=n),t=mu(e,f,l),t!==null&&(Wa(t,e,l,a),kg(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=uo(),a=yu(e),l=cl(n,a);l.tag=2,t!=null&&(l.callback=t),t=mu(e,l,a),t!==null&&(Wa(t,e,a,n),kg(t,e,a))}};function HE(e,t,n,a,l,f,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,d):t.prototype&&t.prototype.isPureReactComponent?!_p(n,a)||!_p(l,f):!0}function $C(e,t,n){var a=!1,l=wu,f=t.contextType;return typeof f=="object"&&f!==null?f=ma(f):(l=Ao(t)?gc:Xi.current,a=t.contextTypes,f=(a=a!=null)?af(e,l):wu),t=new t(n,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=E0,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=f),t}function ZE(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&E0.enqueueReplaceState(t,t.state,null)}function H1(e,t,n,a){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs=NC,qw(e);var f=t.contextType;typeof f=="object"&&f!==null?l.context=ma(f):(f=Ao(t)?gc:Xi.current,l.context=af(e,f)),l.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(W1(e,t,f,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&E0.enqueueReplaceState(l,l.state,null),yy(e,n,l,a),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Ad(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(At(309));var a=n.stateNode}if(!a)throw Error(At(147,e));var l=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(d){var u=l.refs;u===NC&&(u=l.refs={}),d===null?delete u[f]:u[f]=d},t._stringRef=f,t)}if(typeof e!="string")throw Error(At(284));if(!n._owner)throw Error(At(290,e))}return e}function Jm(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qE(e){var t=e._init;return t(e._payload)}function UC(e){function t(K,Z){if(e){var V=K.deletions;V===null?(K.deletions=[Z],K.flags|=16):V.push(Z)}}function n(K,Z){if(!e)return null;for(;Z!==null;)t(K,Z),Z=Z.sibling;return null}function a(K,Z){for(K=new Map;Z!==null;)Z.key!==null?K.set(Z.key,Z):K.set(Z.index,Z),Z=Z.sibling;return K}function l(K,Z){return K=vu(K,Z),K.index=0,K.sibling=null,K}function f(K,Z,V){return K.index=V,e?(V=K.alternate,V!==null?(V=V.index,V<Z?(K.flags|=2,Z):V):(K.flags|=2,Z)):(K.flags|=1048576,Z)}function d(K){return e&&K.alternate===null&&(K.flags|=2),K}function u(K,Z,V,ae){return Z===null||Z.tag!==6?(Z=p_(V,K.mode,ae),Z.return=K,Z):(Z=l(Z,V),Z.return=K,Z)}function w(K,Z,V,ae){var X=V.type;return X===kh?I(K,Z,V.props.children,ae,V.key):Z!==null&&(Z.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===ru&&qE(X)===Z.type)?(ae=l(Z,V.props),ae.ref=Ad(K,Z,V),ae.return=K,ae):(ae=zg(V.type,V.key,V.props,null,K.mode,ae),ae.ref=Ad(K,Z,V),ae.return=K,ae)}function E(K,Z,V,ae){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==V.containerInfo||Z.stateNode.implementation!==V.implementation?(Z=m_(V,K.mode,ae),Z.return=K,Z):(Z=l(Z,V.children||[]),Z.return=K,Z)}function I(K,Z,V,ae,X){return Z===null||Z.tag!==7?(Z=dc(V,K.mode,ae,X),Z.return=K,Z):(Z=l(Z,V),Z.return=K,Z)}function b(K,Z,V){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=p_(""+Z,K.mode,V),Z.return=K,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case $m:return V=zg(Z.type,Z.key,Z.props,null,K.mode,V),V.ref=Ad(K,null,Z),V.return=K,V;case Mh:return Z=m_(Z,K.mode,V),Z.return=K,Z;case ru:var ae=Z._init;return b(K,ae(Z._payload),V)}if(jd(Z)||bd(Z))return Z=dc(Z,K.mode,V,null),Z.return=K,Z;Jm(K,Z)}return null}function T(K,Z,V,ae){var X=Z!==null?Z.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return X!==null?null:u(K,Z,""+V,ae);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case $m:return V.key===X?w(K,Z,V,ae):null;case Mh:return V.key===X?E(K,Z,V,ae):null;case ru:return X=V._init,T(K,Z,X(V._payload),ae)}if(jd(V)||bd(V))return X!==null?null:I(K,Z,V,ae,null);Jm(K,V)}return null}function R(K,Z,V,ae,X){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return K=K.get(V)||null,u(Z,K,""+ae,X);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case $m:return K=K.get(ae.key===null?V:ae.key)||null,w(Z,K,ae,X);case Mh:return K=K.get(ae.key===null?V:ae.key)||null,E(Z,K,ae,X);case ru:var U=ae._init;return R(K,Z,V,U(ae._payload),X)}if(jd(ae)||bd(ae))return K=K.get(V)||null,I(Z,K,ae,X,null);Jm(Z,ae)}return null}function z(K,Z,V,ae){for(var X=null,U=null,P=Z,L=Z=0,B=null;P!==null&&L<V.length;L++){P.index>L?(B=P,P=null):B=P.sibling;var Q=T(K,P,V[L],ae);if(Q===null){P===null&&(P=B);break}e&&P&&Q.alternate===null&&t(K,P),Z=f(Q,Z,L),U===null?X=Q:U.sibling=Q,U=Q,P=B}if(L===V.length)return n(K,P),_n&&ic(K,L),X;if(P===null){for(;L<V.length;L++)P=b(K,V[L],ae),P!==null&&(Z=f(P,Z,L),U===null?X=P:U.sibling=P,U=P);return _n&&ic(K,L),X}for(P=a(K,P);L<V.length;L++)B=R(P,K,L,V[L],ae),B!==null&&(e&&B.alternate!==null&&P.delete(B.key===null?L:B.key),Z=f(B,Z,L),U===null?X=B:U.sibling=B,U=B);return e&&P.forEach(function(q){return t(K,q)}),_n&&ic(K,L),X}function j(K,Z,V,ae){var X=bd(V);if(typeof X!="function")throw Error(At(150));if(V=X.call(V),V==null)throw Error(At(151));for(var U=X=null,P=Z,L=Z=0,B=null,Q=V.next();P!==null&&!Q.done;L++,Q=V.next()){P.index>L?(B=P,P=null):B=P.sibling;var q=T(K,P,Q.value,ae);if(q===null){P===null&&(P=B);break}e&&P&&q.alternate===null&&t(K,P),Z=f(q,Z,L),U===null?X=q:U.sibling=q,U=q,P=B}if(Q.done)return n(K,P),_n&&ic(K,L),X;if(P===null){for(;!Q.done;L++,Q=V.next())Q=b(K,Q.value,ae),Q!==null&&(Z=f(Q,Z,L),U===null?X=Q:U.sibling=Q,U=Q);return _n&&ic(K,L),X}for(P=a(K,P);!Q.done;L++,Q=V.next())Q=R(P,K,L,Q.value,ae),Q!==null&&(e&&Q.alternate!==null&&P.delete(Q.key===null?L:Q.key),Z=f(Q,Z,L),U===null?X=Q:U.sibling=Q,U=Q);return e&&P.forEach(function(ve){return t(K,ve)}),_n&&ic(K,L),X}function se(K,Z,V,ae){if(typeof V=="object"&&V!==null&&V.type===kh&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case $m:e:{for(var X=V.key,U=Z;U!==null;){if(U.key===X){if(X=V.type,X===kh){if(U.tag===7){n(K,U.sibling),Z=l(U,V.props.children),Z.return=K,K=Z;break e}}else if(U.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===ru&&qE(X)===U.type){n(K,U.sibling),Z=l(U,V.props),Z.ref=Ad(K,U,V),Z.return=K,K=Z;break e}n(K,U);break}else t(K,U);U=U.sibling}V.type===kh?(Z=dc(V.props.children,K.mode,ae,V.key),Z.return=K,K=Z):(ae=zg(V.type,V.key,V.props,null,K.mode,ae),ae.ref=Ad(K,Z,V),ae.return=K,K=ae)}return d(K);case Mh:e:{for(U=V.key;Z!==null;){if(Z.key===U)if(Z.tag===4&&Z.stateNode.containerInfo===V.containerInfo&&Z.stateNode.implementation===V.implementation){n(K,Z.sibling),Z=l(Z,V.children||[]),Z.return=K,K=Z;break e}else{n(K,Z);break}else t(K,Z);Z=Z.sibling}Z=m_(V,K.mode,ae),Z.return=K,K=Z}return d(K);case ru:return U=V._init,se(K,Z,U(V._payload),ae)}if(jd(V))return z(K,Z,V,ae);if(bd(V))return j(K,Z,V,ae);Jm(K,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,Z!==null&&Z.tag===6?(n(K,Z.sibling),Z=l(Z,V),Z.return=K,K=Z):(n(K,Z),Z=p_(V,K.mode,ae),Z.return=K,K=Z),d(K)):n(K,Z)}return se}var lf=UC(!0),VC=UC(!1),Gp={},Is=Au(Gp),Sp=Au(Gp),Ep=Au(Gp);function uc(e){if(e===Gp)throw Error(At(174));return e}function Xw(e,t){switch(hn(Ep,t),hn(Sp,e),hn(Is,Gp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:E1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=E1(t,e)}mn(Is),hn(Is,t)}function uf(){mn(Is),mn(Sp),mn(Ep)}function GC(e){uc(Ep.current);var t=uc(Is.current),n=E1(t,e.type);t!==n&&(hn(Sp,e),hn(Is,n))}function Kw(e){Sp.current===e&&(mn(Is),mn(Sp))}var An=Au(0);function vy(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var l_=[];function Yw(){for(var e=0;e<l_.length;e++)l_[e]._workInProgressVersionPrimary=null;l_.length=0}var Og=_l.ReactCurrentDispatcher,u_=_l.ReactCurrentBatchConfig,vc=0,Cn=null,ei=null,vi=null,_y=!1,Jd=!1,Tp=0,Vj=0;function Gi(){throw Error(At(321))}function Jw(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Za(e[n],t[n]))return!1;return!0}function Qw(e,t,n,a,l,f){if(vc=f,Cn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Og.current=e===null||e.memoizedState===null?Zj:qj,e=n(a,l),Jd){f=0;do{if(Jd=!1,Tp=0,25<=f)throw Error(At(301));f+=1,vi=ei=null,t.updateQueue=null,Og.current=Xj,e=n(a,l)}while(Jd)}if(Og.current=xy,t=ei!==null&&ei.next!==null,vc=0,vi=ei=Cn=null,_y=!1,t)throw Error(At(300));return e}function eb(){var e=Tp!==0;return Tp=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?Cn.memoizedState=vi=e:vi=vi.next=e,vi}function ga(){if(ei===null){var e=Cn.alternate;e=e!==null?e.memoizedState:null}else e=ei.next;var t=vi===null?Cn.memoizedState:vi.next;if(t!==null)vi=t,ei=e;else{if(e===null)throw Error(At(310));ei=e,e={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},vi===null?Cn.memoizedState=vi=e:vi=vi.next=e}return vi}function Pp(e,t){return typeof t=="function"?t(e):t}function c_(e){var t=ga(),n=t.queue;if(n===null)throw Error(At(311));n.lastRenderedReducer=e;var a=ei,l=a.baseQueue,f=n.pending;if(f!==null){if(l!==null){var d=l.next;l.next=f.next,f.next=d}a.baseQueue=l=f,n.pending=null}if(l!==null){f=l.next,a=a.baseState;var u=d=null,w=null,E=f;do{var I=E.lane;if((vc&I)===I)w!==null&&(w=w.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),a=E.hasEagerState?E.eagerState:e(a,E.action);else{var b={lane:I,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};w===null?(u=w=b,d=a):w=w.next=b,Cn.lanes|=I,_c|=I}E=E.next}while(E!==null&&E!==f);w===null?d=a:w.next=u,Za(a,t.memoizedState)||(To=!0),t.memoizedState=a,t.baseState=d,t.baseQueue=w,n.lastRenderedState=a}if(e=n.interleaved,e!==null){l=e;do f=l.lane,Cn.lanes|=f,_c|=f,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function h_(e){var t=ga(),n=t.queue;if(n===null)throw Error(At(311));n.lastRenderedReducer=e;var a=n.dispatch,l=n.pending,f=t.memoizedState;if(l!==null){n.pending=null;var d=l=l.next;do f=e(f,d.action),d=d.next;while(d!==l);Za(f,t.memoizedState)||(To=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,a]}function WC(){}function HC(e,t){var n=Cn,a=ga(),l=t(),f=!Za(a.memoizedState,l);if(f&&(a.memoizedState=l,To=!0),a=a.queue,tb(XC.bind(null,n,a,e),[e]),a.getSnapshot!==t||f||vi!==null&&vi.memoizedState.tag&1){if(n.flags|=2048,Ap(9,qC.bind(null,n,a,l,t),void 0,null),_i===null)throw Error(At(349));vc&30||ZC(n,t,l)}return l}function ZC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Cn.updateQueue,t===null?(t={lastEffect:null,stores:null},Cn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qC(e,t,n,a){t.value=n,t.getSnapshot=a,KC(t)&&YC(e)}function XC(e,t,n){return n(function(){KC(t)&&YC(e)})}function KC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Za(e,n)}catch{return!0}}function YC(e){var t=dl(e,1);t!==null&&Wa(t,e,1,-1)}function XE(e){var t=vs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pp,lastRenderedState:e},t.queue=e,e=e.dispatch=Hj.bind(null,Cn,e),[t.memoizedState,e]}function Ap(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=Cn.updateQueue,t===null?(t={lastEffect:null,stores:null},Cn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function JC(){return ga().memoizedState}function Fg(e,t,n,a){var l=vs();Cn.flags|=e,l.memoizedState=Ap(1|t,n,void 0,a===void 0?null:a)}function T0(e,t,n,a){var l=ga();a=a===void 0?null:a;var f=void 0;if(ei!==null){var d=ei.memoizedState;if(f=d.destroy,a!==null&&Jw(a,d.deps)){l.memoizedState=Ap(t,n,f,a);return}}Cn.flags|=e,l.memoizedState=Ap(1|t,n,f,a)}function KE(e,t){return Fg(8390656,8,e,t)}function tb(e,t){return T0(2048,8,e,t)}function QC(e,t){return T0(4,2,e,t)}function eM(e,t){return T0(4,4,e,t)}function tM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rM(e,t,n){return n=n!=null?n.concat([e]):null,T0(4,4,tM.bind(null,t,e),n)}function rb(){}function nM(e,t){var n=ga();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&Jw(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function iM(e,t){var n=ga();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&Jw(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function oM(e,t,n){return vc&21?(Za(n,t)||(n=lC(),Cn.lanes|=n,_c|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,To=!0),e.memoizedState=n)}function Gj(e,t){var n=Yr;Yr=n!==0&&4>n?n:4,e(!0);var a=u_.transition;u_.transition={};try{e(!1),t()}finally{Yr=n,u_.transition=a}}function aM(){return ga().memoizedState}function Wj(e,t,n){var a=yu(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},sM(e))lM(t,n);else if(n=BC(e,t,n,a),n!==null){var l=uo();Wa(n,e,a,l),uM(n,t,a)}}function Hj(e,t,n){var a=yu(e),l={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(sM(e))lM(t,l);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var d=t.lastRenderedState,u=f(d,n);if(l.hasEagerState=!0,l.eagerState=u,Za(u,d)){var w=t.interleaved;w===null?(l.next=l,Zw(t)):(l.next=w.next,w.next=l),t.interleaved=l;return}}catch{}finally{}n=BC(e,t,l,a),n!==null&&(l=uo(),Wa(n,e,a,l),uM(n,t,a))}}function sM(e){var t=e.alternate;return e===Cn||t!==null&&t===Cn}function lM(e,t){Jd=_y=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function uM(e,t,n){if(n&4194240){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Fw(e,n)}}var xy={readContext:ma,useCallback:Gi,useContext:Gi,useEffect:Gi,useImperativeHandle:Gi,useInsertionEffect:Gi,useLayoutEffect:Gi,useMemo:Gi,useReducer:Gi,useRef:Gi,useState:Gi,useDebugValue:Gi,useDeferredValue:Gi,useTransition:Gi,useMutableSource:Gi,useSyncExternalStore:Gi,useId:Gi,unstable_isNewReconciler:!1},Zj={readContext:ma,useCallback:function(e,t){return vs().memoizedState=[e,t===void 0?null:t],e},useContext:ma,useEffect:KE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Fg(4194308,4,tM.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fg(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=vs();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Wj.bind(null,Cn,e),[a.memoizedState,e]},useRef:function(e){var t=vs();return e={current:e},t.memoizedState=e},useState:XE,useDebugValue:rb,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=XE(!1),t=e[0];return e=Gj.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=Cn,l=vs();if(_n){if(n===void 0)throw Error(At(407));n=n()}else{if(n=t(),_i===null)throw Error(At(349));vc&30||ZC(a,t,n)}l.memoizedState=n;var f={value:n,getSnapshot:t};return l.queue=f,KE(XC.bind(null,a,f,e),[e]),a.flags|=2048,Ap(9,qC.bind(null,a,f,n,t),void 0,null),n},useId:function(){var e=vs(),t=_i.identifierPrefix;if(_n){var n=ll,a=sl;n=(a&~(1<<32-Ga(a)-1)).toString(32)+n,t=":"+t+"R"+n,n=Tp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Vj++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qj={readContext:ma,useCallback:nM,useContext:ma,useEffect:tb,useImperativeHandle:rM,useInsertionEffect:QC,useLayoutEffect:eM,useMemo:iM,useReducer:c_,useRef:JC,useState:function(){return c_(Pp)},useDebugValue:rb,useDeferredValue:function(e){var t=ga();return oM(t,ei.memoizedState,e)},useTransition:function(){var e=c_(Pp)[0],t=ga().memoizedState;return[e,t]},useMutableSource:WC,useSyncExternalStore:HC,useId:aM,unstable_isNewReconciler:!1},Xj={readContext:ma,useCallback:nM,useContext:ma,useEffect:tb,useImperativeHandle:rM,useInsertionEffect:QC,useLayoutEffect:eM,useMemo:iM,useReducer:h_,useRef:JC,useState:function(){return h_(Pp)},useDebugValue:rb,useDeferredValue:function(e){var t=ga();return ei===null?t.memoizedState=e:oM(t,ei.memoizedState,e)},useTransition:function(){var e=h_(Pp)[0],t=ga().memoizedState;return[e,t]},useMutableSource:WC,useSyncExternalStore:HC,useId:aM,unstable_isNewReconciler:!1};function cf(e,t){try{var n="",a=t;do n+=SR(a),a=a.return;while(a);var l=n}catch(f){l=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:l,digest:null}}function f_(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Z1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Kj=typeof WeakMap=="function"?WeakMap:Map;function cM(e,t,n){n=cl(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){by||(by=!0,nx=a),Z1(e,t)},n}function hM(e,t,n){n=cl(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var l=t.value;n.payload=function(){return a(l)},n.callback=function(){Z1(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(n.callback=function(){Z1(e,t),typeof a!="function"&&(gu===null?gu=new Set([this]):gu.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),n}function YE(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Kj;var l=new Set;a.set(t,l)}else l=a.get(t),l===void 0&&(l=new Set,a.set(t,l));l.has(n)||(l.add(n),e=cL.bind(null,e,t,n),t.then(e,e))}function JE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function QE(e,t,n,a,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cl(-1,1),t.tag=2,mu(n,t,1))),n.lanes|=1),e)}var Yj=_l.ReactCurrentOwner,To=!1;function oo(e,t,n,a){t.child=e===null?VC(t,null,n,a):lf(t,e.child,n,a)}function eT(e,t,n,a,l){n=n.render;var f=t.ref;return Jh(t,l),a=Qw(e,t,n,a,f,l),n=eb(),e!==null&&!To?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,pl(e,t,l)):(_n&&n&&$w(t),t.flags|=1,oo(e,t,a,l),t.child)}function tT(e,t,n,a,l){if(e===null){var f=n.type;return typeof f=="function"&&!cb(f)&&f.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=f,fM(e,t,f,a,l)):(e=zg(n.type,null,a,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&l)){var d=f.memoizedProps;if(n=n.compare,n=n!==null?n:_p,n(d,a)&&e.ref===t.ref)return pl(e,t,l)}return t.flags|=1,e=vu(f,a),e.ref=t.ref,e.return=t,t.child=e}function fM(e,t,n,a,l){if(e!==null){var f=e.memoizedProps;if(_p(f,a)&&e.ref===t.ref)if(To=!1,t.pendingProps=a=f,(e.lanes&l)!==0)e.flags&131072&&(To=!0);else return t.lanes=e.lanes,pl(e,t,l)}return q1(e,t,n,a,l)}function dM(e,t,n){var a=t.pendingProps,l=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},hn($h,Go),Go|=n;else{if(!(n&1073741824))return e=f!==null?f.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,hn($h,Go),Go|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:n,hn($h,Go),Go|=a}else f!==null?(a=f.baseLanes|n,t.memoizedState=null):a=n,hn($h,Go),Go|=a;return oo(e,t,l,n),t.child}function pM(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function q1(e,t,n,a,l){var f=Ao(n)?gc:Xi.current;return f=af(t,f),Jh(t,l),n=Qw(e,t,n,a,f,l),a=eb(),e!==null&&!To?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,pl(e,t,l)):(_n&&a&&$w(t),t.flags|=1,oo(e,t,n,l),t.child)}function rT(e,t,n,a,l){if(Ao(n)){var f=!0;fy(t)}else f=!1;if(Jh(t,l),t.stateNode===null)Rg(e,t),$C(t,n,a),H1(t,n,a,l),a=!0;else if(e===null){var d=t.stateNode,u=t.memoizedProps;d.props=u;var w=d.context,E=n.contextType;typeof E=="object"&&E!==null?E=ma(E):(E=Ao(n)?gc:Xi.current,E=af(t,E));var I=n.getDerivedStateFromProps,b=typeof I=="function"||typeof d.getSnapshotBeforeUpdate=="function";b||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==a||w!==E)&&ZE(t,d,a,E),nu=!1;var T=t.memoizedState;d.state=T,yy(t,a,d,l),w=t.memoizedState,u!==a||T!==w||Po.current||nu?(typeof I=="function"&&(W1(t,n,I,a),w=t.memoizedState),(u=nu||HE(t,n,u,a,T,w,E))?(b||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=w),d.props=a,d.state=w,d.context=E,a=u):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{d=t.stateNode,DC(e,t),u=t.memoizedProps,E=t.type===t.elementType?u:La(t.type,u),d.props=E,b=t.pendingProps,T=d.context,w=n.contextType,typeof w=="object"&&w!==null?w=ma(w):(w=Ao(n)?gc:Xi.current,w=af(t,w));var R=n.getDerivedStateFromProps;(I=typeof R=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==b||T!==w)&&ZE(t,d,a,w),nu=!1,T=t.memoizedState,d.state=T,yy(t,a,d,l);var z=t.memoizedState;u!==b||T!==z||Po.current||nu?(typeof R=="function"&&(W1(t,n,R,a),z=t.memoizedState),(E=nu||HE(t,n,E,a,T,z,w)||!1)?(I||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,z,w),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,z,w)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=z),d.props=a,d.state=z,d.context=w,a=E):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),a=!1)}return X1(e,t,n,a,f,l)}function X1(e,t,n,a,l,f){pM(e,t);var d=(t.flags&128)!==0;if(!a&&!d)return l&&$E(t,n,!1),pl(e,t,f);a=t.stateNode,Yj.current=t;var u=d&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&d?(t.child=lf(t,e.child,null,f),t.child=lf(t,null,u,f)):oo(e,t,u,f),t.memoizedState=a.state,l&&$E(t,n,!0),t.child}function mM(e){var t=e.stateNode;t.pendingContext?NE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&NE(e,t.context,!1),Xw(e,t.containerInfo)}function nT(e,t,n,a,l){return sf(),Vw(l),t.flags|=256,oo(e,t,n,a),t.child}var K1={dehydrated:null,treeContext:null,retryLane:0};function Y1(e){return{baseLanes:e,cachePool:null,transitions:null}}function gM(e,t,n){var a=t.pendingProps,l=An.current,f=!1,d=(t.flags&128)!==0,u;if((u=d)||(u=e!==null&&e.memoizedState===null?!1:(l&2)!==0),u?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),hn(An,l&1),e===null)return V1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=a.children,e=a.fallback,f?(a=t.mode,f=t.child,d={mode:"hidden",children:d},!(a&1)&&f!==null?(f.childLanes=0,f.pendingProps=d):f=I0(d,a,0,null),e=dc(e,a,n,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Y1(n),t.memoizedState=K1,e):nb(t,d));if(l=e.memoizedState,l!==null&&(u=l.dehydrated,u!==null))return Jj(e,t,d,a,u,l,n);if(f){f=a.fallback,d=t.mode,l=e.child,u=l.sibling;var w={mode:"hidden",children:a.children};return!(d&1)&&t.child!==l?(a=t.child,a.childLanes=0,a.pendingProps=w,t.deletions=null):(a=vu(l,w),a.subtreeFlags=l.subtreeFlags&14680064),u!==null?f=vu(u,f):(f=dc(f,d,n,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,d=e.child.memoizedState,d=d===null?Y1(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},f.memoizedState=d,f.childLanes=e.childLanes&~n,t.memoizedState=K1,a}return f=e.child,e=f.sibling,a=vu(f,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=n),a.return=t,a.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function nb(e,t){return t=I0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qm(e,t,n,a){return a!==null&&Vw(a),lf(t,e.child,null,n),e=nb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Jj(e,t,n,a,l,f,d){if(n)return t.flags&256?(t.flags&=-257,a=f_(Error(At(422))),Qm(e,t,d,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,l=t.mode,a=I0({mode:"visible",children:a.children},l,0,null),f=dc(f,l,d,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,t.mode&1&&lf(t,e.child,null,d),t.child.memoizedState=Y1(d),t.memoizedState=K1,f);if(!(t.mode&1))return Qm(e,t,d,null);if(l.data==="$!"){if(a=l.nextSibling&&l.nextSibling.dataset,a)var u=a.dgst;return a=u,f=Error(At(419)),a=f_(f,a,void 0),Qm(e,t,d,a)}if(u=(d&e.childLanes)!==0,To||u){if(a=_i,a!==null){switch(d&-d){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(a.suspendedLanes|d)?0:l,l!==0&&l!==f.retryLane&&(f.retryLane=l,dl(e,l),Wa(a,e,l,-1))}return ub(),a=f_(Error(At(421))),Qm(e,t,d,a)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=hL.bind(null,e),l._reactRetry=t,null):(e=f.treeContext,qo=pu(l.nextSibling),Xo=t,_n=!0,Ba=null,e!==null&&(ua[ca++]=sl,ua[ca++]=ll,ua[ca++]=yc,sl=e.id,ll=e.overflow,yc=t),t=nb(t,a.children),t.flags|=4096,t)}function iT(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),G1(e.return,t,n)}function d_(e,t,n,a,l){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:l}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=n,f.tailMode=l)}function yM(e,t,n){var a=t.pendingProps,l=a.revealOrder,f=a.tail;if(oo(e,t,a.children,n),a=An.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&iT(e,n,t);else if(e.tag===19)iT(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(hn(An,a),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&vy(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),d_(t,!1,l,n,f);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&vy(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}d_(t,!0,n,null,f);break;case"together":d_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Rg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),_c|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,n=vu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=vu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Qj(e,t,n){switch(t.tag){case 3:mM(t),sf();break;case 5:GC(t);break;case 1:Ao(t.type)&&fy(t);break;case 4:Xw(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,l=t.memoizedProps.value;hn(my,a._currentValue),a._currentValue=l;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(hn(An,An.current&1),t.flags|=128,null):n&t.child.childLanes?gM(e,t,n):(hn(An,An.current&1),e=pl(e,t,n),e!==null?e.sibling:null);hn(An,An.current&1);break;case 19:if(a=(n&t.childLanes)!==0,e.flags&128){if(a)return yM(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),hn(An,An.current),a)break;return null;case 22:case 23:return t.lanes=0,dM(e,t,n)}return pl(e,t,n)}var vM,J1,_M,xM;vM=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};J1=function(){};_M=function(e,t,n,a){var l=e.memoizedProps;if(l!==a){e=t.stateNode,uc(Is.current);var f=null;switch(n){case"input":l=x1(e,l),a=x1(e,a),f=[];break;case"select":l=Mn({},l,{value:void 0}),a=Mn({},a,{value:void 0}),f=[];break;case"textarea":l=S1(e,l),a=S1(e,a),f=[];break;default:typeof l.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=cy)}T1(n,a);var d;n=null;for(E in l)if(!a.hasOwnProperty(E)&&l.hasOwnProperty(E)&&l[E]!=null)if(E==="style"){var u=l[E];for(d in u)u.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(fp.hasOwnProperty(E)?f||(f=[]):(f=f||[]).push(E,null));for(E in a){var w=a[E];if(u=l!=null?l[E]:void 0,a.hasOwnProperty(E)&&w!==u&&(w!=null||u!=null))if(E==="style")if(u){for(d in u)!u.hasOwnProperty(d)||w&&w.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in w)w.hasOwnProperty(d)&&u[d]!==w[d]&&(n||(n={}),n[d]=w[d])}else n||(f||(f=[]),f.push(E,n)),n=w;else E==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,u=u?u.__html:void 0,w!=null&&u!==w&&(f=f||[]).push(E,w)):E==="children"?typeof w!="string"&&typeof w!="number"||(f=f||[]).push(E,""+w):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(fp.hasOwnProperty(E)?(w!=null&&E==="onScroll"&&dn("scroll",e),f||u===w||(f=[])):(f=f||[]).push(E,w))}n&&(f=f||[]).push("style",n);var E=f;(t.updateQueue=E)&&(t.flags|=4)}};xM=function(e,t,n,a){n!==a&&(t.flags|=4)};function Id(e,t){if(!_n)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Wi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,a|=l.subtreeFlags&14680064,a|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function eL(e,t,n){var a=t.pendingProps;switch(Uw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wi(t),null;case 1:return Ao(t.type)&&hy(),Wi(t),null;case 3:return a=t.stateNode,uf(),mn(Po),mn(Xi),Yw(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ym(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ba!==null&&(ax(Ba),Ba=null))),J1(e,t),Wi(t),null;case 5:Kw(t);var l=uc(Ep.current);if(n=t.type,e!==null&&t.stateNode!=null)_M(e,t,n,a,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(At(166));return Wi(t),null}if(e=uc(Is.current),Ym(t)){a=t.stateNode,n=t.type;var f=t.memoizedProps;switch(a[bs]=t,a[bp]=f,e=(t.mode&1)!==0,n){case"dialog":dn("cancel",a),dn("close",a);break;case"iframe":case"object":case"embed":dn("load",a);break;case"video":case"audio":for(l=0;l<zd.length;l++)dn(zd[l],a);break;case"source":dn("error",a);break;case"img":case"image":case"link":dn("error",a),dn("load",a);break;case"details":dn("toggle",a);break;case"input":dE(a,f),dn("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},dn("invalid",a);break;case"textarea":mE(a,f),dn("invalid",a)}T1(n,f),l=null;for(var d in f)if(f.hasOwnProperty(d)){var u=f[d];d==="children"?typeof u=="string"?a.textContent!==u&&(f.suppressHydrationWarning!==!0&&Km(a.textContent,u,e),l=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(f.suppressHydrationWarning!==!0&&Km(a.textContent,u,e),l=["children",""+u]):fp.hasOwnProperty(d)&&u!=null&&d==="onScroll"&&dn("scroll",a)}switch(n){case"input":Um(a),pE(a,f,!0);break;case"textarea":Um(a),gE(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=cy)}a=l,t.updateQueue=a,a!==null&&(t.flags|=4)}else{d=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ZI(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(n,{is:a.is}):(e=d.createElement(n),n==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,n),e[bs]=t,e[bp]=a,vM(e,t,!1,!1),t.stateNode=e;e:{switch(d=P1(n,a),n){case"dialog":dn("cancel",e),dn("close",e),l=a;break;case"iframe":case"object":case"embed":dn("load",e),l=a;break;case"video":case"audio":for(l=0;l<zd.length;l++)dn(zd[l],e);l=a;break;case"source":dn("error",e),l=a;break;case"img":case"image":case"link":dn("error",e),dn("load",e),l=a;break;case"details":dn("toggle",e),l=a;break;case"input":dE(e,a),l=x1(e,a),dn("invalid",e);break;case"option":l=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},l=Mn({},a,{value:void 0}),dn("invalid",e);break;case"textarea":mE(e,a),l=S1(e,a),dn("invalid",e);break;default:l=a}T1(n,l),u=l;for(f in u)if(u.hasOwnProperty(f)){var w=u[f];f==="style"?KI(e,w):f==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&qI(e,w)):f==="children"?typeof w=="string"?(n!=="textarea"||w!=="")&&dp(e,w):typeof w=="number"&&dp(e,""+w):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(fp.hasOwnProperty(f)?w!=null&&f==="onScroll"&&dn("scroll",e):w!=null&&Aw(e,f,w,d))}switch(n){case"input":Um(e),pE(e,a,!1);break;case"textarea":Um(e),gE(e);break;case"option":a.value!=null&&e.setAttribute("value",""+xu(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?qh(e,!!a.multiple,f,!1):a.defaultValue!=null&&qh(e,!!a.multiple,a.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=cy)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Wi(t),null;case 6:if(e&&t.stateNode!=null)xM(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(At(166));if(n=uc(Ep.current),uc(Is.current),Ym(t)){if(a=t.stateNode,n=t.memoizedProps,a[bs]=t,(f=a.nodeValue!==n)&&(e=Xo,e!==null))switch(e.tag){case 3:Km(a.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Km(a.nodeValue,n,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[bs]=t,t.stateNode=a}return Wi(t),null;case 13:if(mn(An),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_n&&qo!==null&&t.mode&1&&!(t.flags&128))zC(),sf(),t.flags|=98560,f=!1;else if(f=Ym(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(At(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(At(317));f[bs]=t}else sf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Wi(t),f=!1}else Ba!==null&&(ax(Ba),Ba=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||An.current&1?ti===0&&(ti=3):ub())),t.updateQueue!==null&&(t.flags|=4),Wi(t),null);case 4:return uf(),J1(e,t),e===null&&xp(t.stateNode.containerInfo),Wi(t),null;case 10:return Hw(t.type._context),Wi(t),null;case 17:return Ao(t.type)&&hy(),Wi(t),null;case 19:if(mn(An),f=t.memoizedState,f===null)return Wi(t),null;if(a=(t.flags&128)!==0,d=f.rendering,d===null)if(a)Id(f,!1);else{if(ti!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=vy(e),d!==null){for(t.flags|=128,Id(f,!1),a=d.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;n!==null;)f=n,e=a,f.flags&=14680066,d=f.alternate,d===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=d.childLanes,f.lanes=d.lanes,f.child=d.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=d.memoizedProps,f.memoizedState=d.memoizedState,f.updateQueue=d.updateQueue,f.type=d.type,e=d.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return hn(An,An.current&1|2),t.child}e=e.sibling}f.tail!==null&&Zn()>hf&&(t.flags|=128,a=!0,Id(f,!1),t.lanes=4194304)}else{if(!a)if(e=vy(d),e!==null){if(t.flags|=128,a=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Id(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!_n)return Wi(t),null}else 2*Zn()-f.renderingStartTime>hf&&n!==1073741824&&(t.flags|=128,a=!0,Id(f,!1),t.lanes=4194304);f.isBackwards?(d.sibling=t.child,t.child=d):(n=f.last,n!==null?n.sibling=d:t.child=d,f.last=d)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Zn(),t.sibling=null,n=An.current,hn(An,a?n&1|2:n&1),t):(Wi(t),null);case 22:case 23:return lb(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Go&1073741824&&(Wi(t),t.subtreeFlags&6&&(t.flags|=8192)):Wi(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function tL(e,t){switch(Uw(t),t.tag){case 1:return Ao(t.type)&&hy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return uf(),mn(Po),mn(Xi),Yw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Kw(t),null;case 13:if(mn(An),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));sf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return mn(An),null;case 4:return uf(),null;case 10:return Hw(t.type._context),null;case 22:case 23:return lb(),null;case 24:return null;default:return null}}var eg=!1,Zi=!1,rL=typeof WeakSet=="function"?WeakSet:Set,ir=null;function Nh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){zn(e,t,a)}else n.current=null}function Q1(e,t,n){try{n()}catch(a){zn(e,t,a)}}var oT=!1;function nL(e,t){if(L1=sy,e=EC(),Nw(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var l=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var d=0,u=-1,w=-1,E=0,I=0,b=e,T=null;t:for(;;){for(var R;b!==n||l!==0&&b.nodeType!==3||(u=d+l),b!==f||a!==0&&b.nodeType!==3||(w=d+a),b.nodeType===3&&(d+=b.nodeValue.length),(R=b.firstChild)!==null;)T=b,b=R;for(;;){if(b===e)break t;if(T===n&&++E===l&&(u=d),T===f&&++I===a&&(w=d),(R=b.nextSibling)!==null)break;b=T,T=b.parentNode}b=R}n=u===-1||w===-1?null:{start:u,end:w}}else n=null}n=n||{start:0,end:0}}else n=null;for(z1={focusedElem:e,selectionRange:n},sy=!1,ir=t;ir!==null;)if(t=ir,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ir=e;else for(;ir!==null;){t=ir;try{var z=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(z!==null){var j=z.memoizedProps,se=z.memoizedState,K=t.stateNode,Z=K.getSnapshotBeforeUpdate(t.elementType===t.type?j:La(t.type,j),se);K.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var V=t.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(ae){zn(t,t.return,ae)}if(e=t.sibling,e!==null){e.return=t.return,ir=e;break}ir=t.return}return z=oT,oT=!1,z}function Qd(e,t,n){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var l=a=a.next;do{if((l.tag&e)===e){var f=l.destroy;l.destroy=void 0,f!==void 0&&Q1(t,n,f)}l=l.next}while(l!==a)}}function P0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function ex(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function wM(e){var t=e.alternate;t!==null&&(e.alternate=null,wM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bs],delete t[bp],delete t[N1],delete t[Dj],delete t[Nj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bM(e){return e.tag===5||e.tag===3||e.tag===4}function aT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tx(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=cy));else if(a!==4&&(e=e.child,e!==null))for(tx(e,t,n),e=e.sibling;e!==null;)tx(e,t,n),e=e.sibling}function rx(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(rx(e,t,n),e=e.sibling;e!==null;)rx(e,t,n),e=e.sibling}var Oi=null,za=!1;function eu(e,t,n){for(n=n.child;n!==null;)SM(e,t,n),n=n.sibling}function SM(e,t,n){if(As&&typeof As.onCommitFiberUnmount=="function")try{As.onCommitFiberUnmount(v0,n)}catch{}switch(n.tag){case 5:Zi||Nh(n,t);case 6:var a=Oi,l=za;Oi=null,eu(e,t,n),Oi=a,za=l,Oi!==null&&(za?(e=Oi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Oi.removeChild(n.stateNode));break;case 18:Oi!==null&&(za?(e=Oi,n=n.stateNode,e.nodeType===8?a_(e.parentNode,n):e.nodeType===1&&a_(e,n),yp(e)):a_(Oi,n.stateNode));break;case 4:a=Oi,l=za,Oi=n.stateNode.containerInfo,za=!0,eu(e,t,n),Oi=a,za=l;break;case 0:case 11:case 14:case 15:if(!Zi&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){l=a=a.next;do{var f=l,d=f.destroy;f=f.tag,d!==void 0&&(f&2||f&4)&&Q1(n,t,d),l=l.next}while(l!==a)}eu(e,t,n);break;case 1:if(!Zi&&(Nh(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(u){zn(n,t,u)}eu(e,t,n);break;case 21:eu(e,t,n);break;case 22:n.mode&1?(Zi=(a=Zi)||n.memoizedState!==null,eu(e,t,n),Zi=a):eu(e,t,n);break;default:eu(e,t,n)}}function sT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new rL),t.forEach(function(a){var l=fL.bind(null,e,a);n.has(a)||(n.add(a),a.then(l,l))})}}function Ra(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];try{var f=e,d=t,u=d;e:for(;u!==null;){switch(u.tag){case 5:Oi=u.stateNode,za=!1;break e;case 3:Oi=u.stateNode.containerInfo,za=!0;break e;case 4:Oi=u.stateNode.containerInfo,za=!0;break e}u=u.return}if(Oi===null)throw Error(At(160));SM(f,d,l),Oi=null,za=!1;var w=l.alternate;w!==null&&(w.return=null),l.return=null}catch(E){zn(l,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)EM(t,e),t=t.sibling}function EM(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ra(t,e),ys(e),a&4){try{Qd(3,e,e.return),P0(3,e)}catch(j){zn(e,e.return,j)}try{Qd(5,e,e.return)}catch(j){zn(e,e.return,j)}}break;case 1:Ra(t,e),ys(e),a&512&&n!==null&&Nh(n,n.return);break;case 5:if(Ra(t,e),ys(e),a&512&&n!==null&&Nh(n,n.return),e.flags&32){var l=e.stateNode;try{dp(l,"")}catch(j){zn(e,e.return,j)}}if(a&4&&(l=e.stateNode,l!=null)){var f=e.memoizedProps,d=n!==null?n.memoizedProps:f,u=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{u==="input"&&f.type==="radio"&&f.name!=null&&WI(l,f),P1(u,d);var E=P1(u,f);for(d=0;d<w.length;d+=2){var I=w[d],b=w[d+1];I==="style"?KI(l,b):I==="dangerouslySetInnerHTML"?qI(l,b):I==="children"?dp(l,b):Aw(l,I,b,E)}switch(u){case"input":w1(l,f);break;case"textarea":HI(l,f);break;case"select":var T=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!f.multiple;var R=f.value;R!=null?qh(l,!!f.multiple,R,!1):T!==!!f.multiple&&(f.defaultValue!=null?qh(l,!!f.multiple,f.defaultValue,!0):qh(l,!!f.multiple,f.multiple?[]:"",!1))}l[bp]=f}catch(j){zn(e,e.return,j)}}break;case 6:if(Ra(t,e),ys(e),a&4){if(e.stateNode===null)throw Error(At(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(j){zn(e,e.return,j)}}break;case 3:if(Ra(t,e),ys(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{yp(t.containerInfo)}catch(j){zn(e,e.return,j)}break;case 4:Ra(t,e),ys(e);break;case 13:Ra(t,e),ys(e),l=e.child,l.flags&8192&&(f=l.memoizedState!==null,l.stateNode.isHidden=f,!f||l.alternate!==null&&l.alternate.memoizedState!==null||(ab=Zn())),a&4&&sT(e);break;case 22:if(I=n!==null&&n.memoizedState!==null,e.mode&1?(Zi=(E=Zi)||I,Ra(t,e),Zi=E):Ra(t,e),ys(e),a&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!I&&e.mode&1)for(ir=e,I=e.child;I!==null;){for(b=ir=I;ir!==null;){switch(T=ir,R=T.child,T.tag){case 0:case 11:case 14:case 15:Qd(4,T,T.return);break;case 1:Nh(T,T.return);var z=T.stateNode;if(typeof z.componentWillUnmount=="function"){a=T,n=T.return;try{t=a,z.props=t.memoizedProps,z.state=t.memoizedState,z.componentWillUnmount()}catch(j){zn(a,n,j)}}break;case 5:Nh(T,T.return);break;case 22:if(T.memoizedState!==null){uT(b);continue}}R!==null?(R.return=T,ir=R):uT(b)}I=I.sibling}e:for(I=null,b=e;;){if(b.tag===5){if(I===null){I=b;try{l=b.stateNode,E?(f=l.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(u=b.stateNode,w=b.memoizedProps.style,d=w!=null&&w.hasOwnProperty("display")?w.display:null,u.style.display=XI("display",d))}catch(j){zn(e,e.return,j)}}}else if(b.tag===6){if(I===null)try{b.stateNode.nodeValue=E?"":b.memoizedProps}catch(j){zn(e,e.return,j)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;I===b&&(I=null),b=b.return}I===b&&(I=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Ra(t,e),ys(e),a&4&&sT(e);break;case 21:break;default:Ra(t,e),ys(e)}}function ys(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(bM(n)){var a=n;break e}n=n.return}throw Error(At(160))}switch(a.tag){case 5:var l=a.stateNode;a.flags&32&&(dp(l,""),a.flags&=-33);var f=aT(e);rx(e,f,l);break;case 3:case 4:var d=a.stateNode.containerInfo,u=aT(e);tx(e,u,d);break;default:throw Error(At(161))}}catch(w){zn(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function iL(e,t,n){ir=e,TM(e)}function TM(e,t,n){for(var a=(e.mode&1)!==0;ir!==null;){var l=ir,f=l.child;if(l.tag===22&&a){var d=l.memoizedState!==null||eg;if(!d){var u=l.alternate,w=u!==null&&u.memoizedState!==null||Zi;u=eg;var E=Zi;if(eg=d,(Zi=w)&&!E)for(ir=l;ir!==null;)d=ir,w=d.child,d.tag===22&&d.memoizedState!==null?cT(l):w!==null?(w.return=d,ir=w):cT(l);for(;f!==null;)ir=f,TM(f),f=f.sibling;ir=l,eg=u,Zi=E}lT(e)}else l.subtreeFlags&8772&&f!==null?(f.return=l,ir=f):lT(e)}}function lT(e){for(;ir!==null;){var t=ir;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Zi||P0(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Zi)if(n===null)a.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:La(t.type,n.memoizedProps);a.componentDidUpdate(l,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&WE(t,f,a);break;case 3:var d=t.updateQueue;if(d!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}WE(t,d,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&n.focus();break;case"img":w.src&&(n.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var I=E.memoizedState;if(I!==null){var b=I.dehydrated;b!==null&&yp(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}Zi||t.flags&512&&ex(t)}catch(T){zn(t,t.return,T)}}if(t===e){ir=null;break}if(n=t.sibling,n!==null){n.return=t.return,ir=n;break}ir=t.return}}function uT(e){for(;ir!==null;){var t=ir;if(t===e){ir=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ir=n;break}ir=t.return}}function cT(e){for(;ir!==null;){var t=ir;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{P0(4,t)}catch(w){zn(t,n,w)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var l=t.return;try{a.componentDidMount()}catch(w){zn(t,l,w)}}var f=t.return;try{ex(t)}catch(w){zn(t,f,w)}break;case 5:var d=t.return;try{ex(t)}catch(w){zn(t,d,w)}}}catch(w){zn(t,t.return,w)}if(t===e){ir=null;break}var u=t.sibling;if(u!==null){u.return=t.return,ir=u;break}ir=t.return}}var oL=Math.ceil,wy=_l.ReactCurrentDispatcher,ib=_l.ReactCurrentOwner,pa=_l.ReactCurrentBatchConfig,Ur=0,_i=null,Kn=null,Ri=0,Go=0,$h=Au(0),ti=0,Ip=null,_c=0,A0=0,ob=0,ep=null,So=null,ab=0,hf=1/0,nl=null,by=!1,nx=null,gu=null,tg=!1,uu=null,Sy=0,tp=0,ix=null,jg=-1,Lg=0;function uo(){return Ur&6?Zn():jg!==-1?jg:jg=Zn()}function yu(e){return e.mode&1?Ur&2&&Ri!==0?Ri&-Ri:Uj.transition!==null?(Lg===0&&(Lg=lC()),Lg):(e=Yr,e!==0||(e=window.event,e=e===void 0?16:mC(e.type)),e):1}function Wa(e,t,n,a){if(50<tp)throw tp=0,ix=null,Error(At(185));$p(e,n,a),(!(Ur&2)||e!==_i)&&(e===_i&&(!(Ur&2)&&(A0|=n),ti===4&&su(e,Ri)),Io(e,a),n===1&&Ur===0&&!(t.mode&1)&&(hf=Zn()+500,S0&&Iu()))}function Io(e,t){var n=e.callbackNode;UR(e,t);var a=ay(e,e===_i?Ri:0);if(a===0)n!==null&&_E(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(n!=null&&_E(n),t===1)e.tag===0?$j(hT.bind(null,e)):RC(hT.bind(null,e)),zj(function(){!(Ur&6)&&Iu()}),n=null;else{switch(uC(a)){case 1:n=Ow;break;case 4:n=aC;break;case 16:n=oy;break;case 536870912:n=sC;break;default:n=oy}n=FM(n,PM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function PM(e,t){if(jg=-1,Lg=0,Ur&6)throw Error(At(327));var n=e.callbackNode;if(Qh()&&e.callbackNode!==n)return null;var a=ay(e,e===_i?Ri:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Ey(e,a);else{t=a;var l=Ur;Ur|=2;var f=IM();(_i!==e||Ri!==t)&&(nl=null,hf=Zn()+500,fc(e,t));do try{lL();break}catch(u){AM(e,u)}while(!0);Ww(),wy.current=f,Ur=l,Kn!==null?t=0:(_i=null,Ri=0,t=ti)}if(t!==0){if(t===2&&(l=k1(e),l!==0&&(a=l,t=ox(e,l))),t===1)throw n=Ip,fc(e,0),su(e,a),Io(e,Zn()),n;if(t===6)su(e,a);else{if(l=e.current.alternate,!(a&30)&&!aL(l)&&(t=Ey(e,a),t===2&&(f=k1(e),f!==0&&(a=f,t=ox(e,f))),t===1))throw n=Ip,fc(e,0),su(e,a),Io(e,Zn()),n;switch(e.finishedWork=l,e.finishedLanes=a,t){case 0:case 1:throw Error(At(345));case 2:oc(e,So,nl);break;case 3:if(su(e,a),(a&130023424)===a&&(t=ab+500-Zn(),10<t)){if(ay(e,0)!==0)break;if(l=e.suspendedLanes,(l&a)!==a){uo(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=D1(oc.bind(null,e,So,nl),t);break}oc(e,So,nl);break;case 4:if(su(e,a),(a&4194240)===a)break;for(t=e.eventTimes,l=-1;0<a;){var d=31-Ga(a);f=1<<d,d=t[d],d>l&&(l=d),a&=~f}if(a=l,a=Zn()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*oL(a/1960))-a,10<a){e.timeoutHandle=D1(oc.bind(null,e,So,nl),a);break}oc(e,So,nl);break;case 5:oc(e,So,nl);break;default:throw Error(At(329))}}}return Io(e,Zn()),e.callbackNode===n?PM.bind(null,e):null}function ox(e,t){var n=ep;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),e=Ey(e,t),e!==2&&(t=So,So=n,t!==null&&ax(t)),e}function ax(e){So===null?So=e:So.push.apply(So,e)}function aL(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var l=n[a],f=l.getSnapshot;l=l.value;try{if(!Za(f(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function su(e,t){for(t&=~ob,t&=~A0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ga(t),a=1<<n;e[n]=-1,t&=~a}}function hT(e){if(Ur&6)throw Error(At(327));Qh();var t=ay(e,0);if(!(t&1))return Io(e,Zn()),null;var n=Ey(e,t);if(e.tag!==0&&n===2){var a=k1(e);a!==0&&(t=a,n=ox(e,a))}if(n===1)throw n=Ip,fc(e,0),su(e,t),Io(e,Zn()),n;if(n===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,oc(e,So,nl),Io(e,Zn()),null}function sb(e,t){var n=Ur;Ur|=1;try{return e(t)}finally{Ur=n,Ur===0&&(hf=Zn()+500,S0&&Iu())}}function xc(e){uu!==null&&uu.tag===0&&!(Ur&6)&&Qh();var t=Ur;Ur|=1;var n=pa.transition,a=Yr;try{if(pa.transition=null,Yr=1,e)return e()}finally{Yr=a,pa.transition=n,Ur=t,!(Ur&6)&&Iu()}}function lb(){Go=$h.current,mn($h)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Lj(n)),Kn!==null)for(n=Kn.return;n!==null;){var a=n;switch(Uw(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&hy();break;case 3:uf(),mn(Po),mn(Xi),Yw();break;case 5:Kw(a);break;case 4:uf();break;case 13:mn(An);break;case 19:mn(An);break;case 10:Hw(a.type._context);break;case 22:case 23:lb()}n=n.return}if(_i=e,Kn=e=vu(e.current,null),Ri=Go=t,ti=0,Ip=null,ob=A0=_c=0,So=ep=null,lc!==null){for(t=0;t<lc.length;t++)if(n=lc[t],a=n.interleaved,a!==null){n.interleaved=null;var l=a.next,f=n.pending;if(f!==null){var d=f.next;f.next=l,a.next=d}n.pending=a}lc=null}return e}function AM(e,t){do{var n=Kn;try{if(Ww(),Og.current=xy,_y){for(var a=Cn.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}_y=!1}if(vc=0,vi=ei=Cn=null,Jd=!1,Tp=0,ib.current=null,n===null||n.return===null){ti=1,Ip=t,Kn=null;break}e:{var f=e,d=n.return,u=n,w=t;if(t=Ri,u.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var E=w,I=u,b=I.tag;if(!(I.mode&1)&&(b===0||b===11||b===15)){var T=I.alternate;T?(I.updateQueue=T.updateQueue,I.memoizedState=T.memoizedState,I.lanes=T.lanes):(I.updateQueue=null,I.memoizedState=null)}var R=JE(d);if(R!==null){R.flags&=-257,QE(R,d,u,f,t),R.mode&1&&YE(f,E,t),t=R,w=E;var z=t.updateQueue;if(z===null){var j=new Set;j.add(w),t.updateQueue=j}else z.add(w);break e}else{if(!(t&1)){YE(f,E,t),ub();break e}w=Error(At(426))}}else if(_n&&u.mode&1){var se=JE(d);if(se!==null){!(se.flags&65536)&&(se.flags|=256),QE(se,d,u,f,t),Vw(cf(w,u));break e}}f=w=cf(w,u),ti!==4&&(ti=2),ep===null?ep=[f]:ep.push(f),f=d;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var K=cM(f,w,t);GE(f,K);break e;case 1:u=w;var Z=f.type,V=f.stateNode;if(!(f.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(gu===null||!gu.has(V)))){f.flags|=65536,t&=-t,f.lanes|=t;var ae=hM(f,u,t);GE(f,ae);break e}}f=f.return}while(f!==null)}MM(n)}catch(X){t=X,Kn===n&&n!==null&&(Kn=n=n.return);continue}break}while(!0)}function IM(){var e=wy.current;return wy.current=xy,e===null?xy:e}function ub(){(ti===0||ti===3||ti===2)&&(ti=4),_i===null||!(_c&268435455)&&!(A0&268435455)||su(_i,Ri)}function Ey(e,t){var n=Ur;Ur|=2;var a=IM();(_i!==e||Ri!==t)&&(nl=null,fc(e,t));do try{sL();break}catch(l){AM(e,l)}while(!0);if(Ww(),Ur=n,wy.current=a,Kn!==null)throw Error(At(261));return _i=null,Ri=0,ti}function sL(){for(;Kn!==null;)CM(Kn)}function lL(){for(;Kn!==null&&!FR();)CM(Kn)}function CM(e){var t=OM(e.alternate,e,Go);e.memoizedProps=e.pendingProps,t===null?MM(e):Kn=t,ib.current=null}function MM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=tL(n,t),n!==null){n.flags&=32767,Kn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ti=6,Kn=null;return}}else if(n=eL(n,t,Go),n!==null){Kn=n;return}if(t=t.sibling,t!==null){Kn=t;return}Kn=t=e}while(t!==null);ti===0&&(ti=5)}function oc(e,t,n){var a=Yr,l=pa.transition;try{pa.transition=null,Yr=1,uL(e,t,n,a)}finally{pa.transition=l,Yr=a}return null}function uL(e,t,n,a){do Qh();while(uu!==null);if(Ur&6)throw Error(At(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var f=n.lanes|n.childLanes;if(VR(e,f),e===_i&&(Kn=_i=null,Ri=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tg||(tg=!0,FM(oy,function(){return Qh(),null})),f=(n.flags&15990)!==0,n.subtreeFlags&15990||f){f=pa.transition,pa.transition=null;var d=Yr;Yr=1;var u=Ur;Ur|=4,ib.current=null,nL(e,n),EM(n,e),Cj(z1),sy=!!L1,z1=L1=null,e.current=n,iL(n),RR(),Ur=u,Yr=d,pa.transition=f}else e.current=n;if(tg&&(tg=!1,uu=e,Sy=l),f=e.pendingLanes,f===0&&(gu=null),zR(n.stateNode),Io(e,Zn()),t!==null)for(a=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],a(l.value,{componentStack:l.stack,digest:l.digest});if(by)throw by=!1,e=nx,nx=null,e;return Sy&1&&e.tag!==0&&Qh(),f=e.pendingLanes,f&1?e===ix?tp++:(tp=0,ix=e):tp=0,Iu(),null}function Qh(){if(uu!==null){var e=uC(Sy),t=pa.transition,n=Yr;try{if(pa.transition=null,Yr=16>e?16:e,uu===null)var a=!1;else{if(e=uu,uu=null,Sy=0,Ur&6)throw Error(At(331));var l=Ur;for(Ur|=4,ir=e.current;ir!==null;){var f=ir,d=f.child;if(ir.flags&16){var u=f.deletions;if(u!==null){for(var w=0;w<u.length;w++){var E=u[w];for(ir=E;ir!==null;){var I=ir;switch(I.tag){case 0:case 11:case 15:Qd(8,I,f)}var b=I.child;if(b!==null)b.return=I,ir=b;else for(;ir!==null;){I=ir;var T=I.sibling,R=I.return;if(wM(I),I===E){ir=null;break}if(T!==null){T.return=R,ir=T;break}ir=R}}}var z=f.alternate;if(z!==null){var j=z.child;if(j!==null){z.child=null;do{var se=j.sibling;j.sibling=null,j=se}while(j!==null)}}ir=f}}if(f.subtreeFlags&2064&&d!==null)d.return=f,ir=d;else e:for(;ir!==null;){if(f=ir,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Qd(9,f,f.return)}var K=f.sibling;if(K!==null){K.return=f.return,ir=K;break e}ir=f.return}}var Z=e.current;for(ir=Z;ir!==null;){d=ir;var V=d.child;if(d.subtreeFlags&2064&&V!==null)V.return=d,ir=V;else e:for(d=Z;ir!==null;){if(u=ir,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:P0(9,u)}}catch(X){zn(u,u.return,X)}if(u===d){ir=null;break e}var ae=u.sibling;if(ae!==null){ae.return=u.return,ir=ae;break e}ir=u.return}}if(Ur=l,Iu(),As&&typeof As.onPostCommitFiberRoot=="function")try{As.onPostCommitFiberRoot(v0,e)}catch{}a=!0}return a}finally{Yr=n,pa.transition=t}}return!1}function fT(e,t,n){t=cf(n,t),t=cM(e,t,1),e=mu(e,t,1),t=uo(),e!==null&&($p(e,1,t),Io(e,t))}function zn(e,t,n){if(e.tag===3)fT(e,e,n);else for(;t!==null;){if(t.tag===3){fT(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(gu===null||!gu.has(a))){e=cf(n,e),e=hM(t,e,1),t=mu(t,e,1),e=uo(),t!==null&&($p(t,1,e),Io(t,e));break}}t=t.return}}function cL(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=uo(),e.pingedLanes|=e.suspendedLanes&n,_i===e&&(Ri&n)===n&&(ti===4||ti===3&&(Ri&130023424)===Ri&&500>Zn()-ab?fc(e,0):ob|=n),Io(e,t)}function kM(e,t){t===0&&(e.mode&1?(t=Wm,Wm<<=1,!(Wm&130023424)&&(Wm=4194304)):t=1);var n=uo();e=dl(e,t),e!==null&&($p(e,t,n),Io(e,n))}function hL(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),kM(e,n)}function fL(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(At(314))}a!==null&&a.delete(t),kM(e,n)}var OM;OM=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Po.current)To=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return To=!1,Qj(e,t,n);To=!!(e.flags&131072)}else To=!1,_n&&t.flags&1048576&&jC(t,py,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Rg(e,t),e=t.pendingProps;var l=af(t,Xi.current);Jh(t,n),l=Qw(null,t,a,e,l,n);var f=eb();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ao(a)?(f=!0,fy(t)):f=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,qw(t),l.updater=E0,t.stateNode=l,l._reactInternals=t,H1(t,a,e,n),t=X1(null,t,a,!0,f,n)):(t.tag=0,_n&&f&&$w(t),oo(null,t,l,n),t=t.child),t;case 16:a=t.elementType;e:{switch(Rg(e,t),e=t.pendingProps,l=a._init,a=l(a._payload),t.type=a,l=t.tag=pL(a),e=La(a,e),l){case 0:t=q1(null,t,a,e,n);break e;case 1:t=rT(null,t,a,e,n);break e;case 11:t=eT(null,t,a,e,n);break e;case 14:t=tT(null,t,a,La(a.type,e),n);break e}throw Error(At(306,a,""))}return t;case 0:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:La(a,l),q1(e,t,a,l,n);case 1:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:La(a,l),rT(e,t,a,l,n);case 3:e:{if(mM(t),e===null)throw Error(At(387));a=t.pendingProps,f=t.memoizedState,l=f.element,DC(e,t),yy(t,a,null,n);var d=t.memoizedState;if(a=d.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){l=cf(Error(At(423)),t),t=nT(e,t,a,n,l);break e}else if(a!==l){l=cf(Error(At(424)),t),t=nT(e,t,a,n,l);break e}else for(qo=pu(t.stateNode.containerInfo.firstChild),Xo=t,_n=!0,Ba=null,n=VC(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sf(),a===l){t=pl(e,t,n);break e}oo(e,t,a,n)}t=t.child}return t;case 5:return GC(t),e===null&&V1(t),a=t.type,l=t.pendingProps,f=e!==null?e.memoizedProps:null,d=l.children,B1(a,l)?d=null:f!==null&&B1(a,f)&&(t.flags|=32),pM(e,t),oo(e,t,d,n),t.child;case 6:return e===null&&V1(t),null;case 13:return gM(e,t,n);case 4:return Xw(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=lf(t,null,a,n):oo(e,t,a,n),t.child;case 11:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:La(a,l),eT(e,t,a,l,n);case 7:return oo(e,t,t.pendingProps,n),t.child;case 8:return oo(e,t,t.pendingProps.children,n),t.child;case 12:return oo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,l=t.pendingProps,f=t.memoizedProps,d=l.value,hn(my,a._currentValue),a._currentValue=d,f!==null)if(Za(f.value,d)){if(f.children===l.children&&!Po.current){t=pl(e,t,n);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var u=f.dependencies;if(u!==null){d=f.child;for(var w=u.firstContext;w!==null;){if(w.context===a){if(f.tag===1){w=cl(-1,n&-n),w.tag=2;var E=f.updateQueue;if(E!==null){E=E.shared;var I=E.pending;I===null?w.next=w:(w.next=I.next,I.next=w),E.pending=w}}f.lanes|=n,w=f.alternate,w!==null&&(w.lanes|=n),G1(f.return,n,t),u.lanes|=n;break}w=w.next}}else if(f.tag===10)d=f.type===t.type?null:f.child;else if(f.tag===18){if(d=f.return,d===null)throw Error(At(341));d.lanes|=n,u=d.alternate,u!==null&&(u.lanes|=n),G1(d,n,t),d=f.sibling}else d=f.child;if(d!==null)d.return=f;else for(d=f;d!==null;){if(d===t){d=null;break}if(f=d.sibling,f!==null){f.return=d.return,d=f;break}d=d.return}f=d}oo(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,a=t.pendingProps.children,Jh(t,n),l=ma(l),a=a(l),t.flags|=1,oo(e,t,a,n),t.child;case 14:return a=t.type,l=La(a,t.pendingProps),l=La(a.type,l),tT(e,t,a,l,n);case 15:return fM(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:La(a,l),Rg(e,t),t.tag=1,Ao(a)?(e=!0,fy(t)):e=!1,Jh(t,n),$C(t,a,l),H1(t,a,l,n),X1(null,t,a,!0,e,n);case 19:return yM(e,t,n);case 22:return dM(e,t,n)}throw Error(At(156,t.tag))};function FM(e,t){return oC(e,t)}function dL(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(e,t,n,a){return new dL(e,t,n,a)}function cb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pL(e){if(typeof e=="function")return cb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cw)return 11;if(e===Mw)return 14}return 2}function vu(e,t){var n=e.alternate;return n===null?(n=fa(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zg(e,t,n,a,l,f){var d=2;if(a=e,typeof e=="function")cb(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case kh:return dc(n.children,l,f,t);case Iw:d=8,l|=8;break;case g1:return e=fa(12,n,t,l|2),e.elementType=g1,e.lanes=f,e;case y1:return e=fa(13,n,t,l),e.elementType=y1,e.lanes=f,e;case v1:return e=fa(19,n,t,l),e.elementType=v1,e.lanes=f,e;case UI:return I0(n,l,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case NI:d=10;break e;case $I:d=9;break e;case Cw:d=11;break e;case Mw:d=14;break e;case ru:d=16,a=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=fa(d,n,t,l),t.elementType=e,t.type=a,t.lanes=f,t}function dc(e,t,n,a){return e=fa(7,e,a,t),e.lanes=n,e}function I0(e,t,n,a){return e=fa(22,e,a,t),e.elementType=UI,e.lanes=n,e.stateNode={isHidden:!1},e}function p_(e,t,n){return e=fa(6,e,null,t),e.lanes=n,e}function m_(e,t,n){return t=fa(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mL(e,t,n,a,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xv(0),this.expirationTimes=Xv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xv(0),this.identifierPrefix=a,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function hb(e,t,n,a,l,f,d,u,w){return e=new mL(e,t,n,u,w),t===1?(t=1,f===!0&&(t|=8)):t=0,f=fa(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qw(f),e}function gL(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mh,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function RM(e){if(!e)return wu;e=e._reactInternals;e:{if(Pc(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ao(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var n=e.type;if(Ao(n))return FC(e,n,t)}return t}function jM(e,t,n,a,l,f,d,u,w){return e=hb(n,a,!0,e,l,f,d,u,w),e.context=RM(null),n=e.current,a=uo(),l=yu(n),f=cl(a,l),f.callback=t??null,mu(n,f,l),e.current.lanes=l,$p(e,l,a),Io(e,a),e}function C0(e,t,n,a){var l=t.current,f=uo(),d=yu(l);return n=RM(n),t.context===null?t.context=n:t.pendingContext=n,t=cl(f,d),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=mu(l,t,d),e!==null&&(Wa(e,l,d,f),kg(e,l,d)),d}function Ty(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fb(e,t){dT(e,t),(e=e.alternate)&&dT(e,t)}function yL(){return null}var LM=typeof reportError=="function"?reportError:function(e){console.error(e)};function db(e){this._internalRoot=e}M0.prototype.render=db.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));C0(e,t,null,null)};M0.prototype.unmount=db.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xc(function(){C0(null,e,null,null)}),t[fl]=null}};function M0(e){this._internalRoot=e}M0.prototype.unstable_scheduleHydration=function(e){if(e){var t=fC();e={blockedOn:null,target:e,priority:t};for(var n=0;n<au.length&&t!==0&&t<au[n].priority;n++);au.splice(n,0,e),n===0&&pC(e)}};function pb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function k0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pT(){}function vL(e,t,n,a,l){if(l){if(typeof a=="function"){var f=a;a=function(){var E=Ty(d);f.call(E)}}var d=jM(t,a,e,0,null,!1,!1,"",pT);return e._reactRootContainer=d,e[fl]=d.current,xp(e.nodeType===8?e.parentNode:e),xc(),d}for(;l=e.lastChild;)e.removeChild(l);if(typeof a=="function"){var u=a;a=function(){var E=Ty(w);u.call(E)}}var w=hb(e,0,!1,null,null,!1,!1,"",pT);return e._reactRootContainer=w,e[fl]=w.current,xp(e.nodeType===8?e.parentNode:e),xc(function(){C0(t,w,n,a)}),w}function O0(e,t,n,a,l){var f=n._reactRootContainer;if(f){var d=f;if(typeof l=="function"){var u=l;l=function(){var w=Ty(d);u.call(w)}}C0(t,d,e,l)}else d=vL(n,t,e,l,a);return Ty(d)}cC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ld(t.pendingLanes);n!==0&&(Fw(t,n|1),Io(t,Zn()),!(Ur&6)&&(hf=Zn()+500,Iu()))}break;case 13:xc(function(){var a=dl(e,1);if(a!==null){var l=uo();Wa(a,e,1,l)}}),fb(e,1)}};Rw=function(e){if(e.tag===13){var t=dl(e,134217728);if(t!==null){var n=uo();Wa(t,e,134217728,n)}fb(e,134217728)}};hC=function(e){if(e.tag===13){var t=yu(e),n=dl(e,t);if(n!==null){var a=uo();Wa(n,e,t,a)}fb(e,t)}};fC=function(){return Yr};dC=function(e,t){var n=Yr;try{return Yr=e,t()}finally{Yr=n}};I1=function(e,t,n){switch(t){case"input":if(w1(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var l=b0(a);if(!l)throw Error(At(90));GI(a),w1(a,l)}}}break;case"textarea":HI(e,n);break;case"select":t=n.value,t!=null&&qh(e,!!n.multiple,t,!1)}};QI=sb;eC=xc;var _L={usingClientEntryPoint:!1,Events:[Vp,jh,b0,YI,JI,sb]},Cd={findFiberByHostInstance:sc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},xL={bundleType:Cd.bundleType,version:Cd.version,rendererPackageName:Cd.rendererPackageName,rendererConfig:Cd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_l.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nC(e),e===null?null:e.stateNode},findFiberByHostInstance:Cd.findFiberByHostInstance||yL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rg.isDisabled&&rg.supportsFiber)try{v0=rg.inject(xL),As=rg}catch{}}Yo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_L;Yo.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pb(t))throw Error(At(200));return gL(e,t,null,n)};Yo.createRoot=function(e,t){if(!pb(e))throw Error(At(299));var n=!1,a="",l=LM;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=hb(e,1,!1,null,null,n,!1,a,l),e[fl]=t.current,xp(e.nodeType===8?e.parentNode:e),new db(t)};Yo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=nC(t),e=e===null?null:e.stateNode,e};Yo.flushSync=function(e){return xc(e)};Yo.hydrate=function(e,t,n){if(!k0(t))throw Error(At(200));return O0(null,e,t,!0,n)};Yo.hydrateRoot=function(e,t,n){if(!pb(e))throw Error(At(405));var a=n!=null&&n.hydratedSources||null,l=!1,f="",d=LM;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(f=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),t=jM(t,null,e,1,n??null,l,!1,f,d),e[fl]=t.current,xp(e),a)for(e=0;e<a.length;e++)n=a[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new M0(t)};Yo.render=function(e,t,n){if(!k0(t))throw Error(At(200));return O0(null,e,t,!1,n)};Yo.unmountComponentAtNode=function(e){if(!k0(e))throw Error(At(40));return e._reactRootContainer?(xc(function(){O0(null,null,e,!1,function(){e._reactRootContainer=null,e[fl]=null})}),!0):!1};Yo.unstable_batchedUpdates=sb;Yo.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!k0(n))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return O0(e,t,n,!1,a)};Yo.version="18.2.0-next-9e3b772b8-20220608";function zM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zM)}catch(e){console.error(e)}}zM(),jI.exports=Yo;var mb=jI.exports;const wL=bf(mb);var BM={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.3.2/LICENSE.txt
 */(function(e,t){(function(n,a){e.exports=a()})(Da,function(){var n={},a={};function l(d,u,w){if(a[d]=w,d==="index"){var E="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",I={};return a.shared(I),a.index(n,I),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([E],{type:"text/javascript"}))),n}}l("shared",["exports"],function(d){function u(o,r,s,h){return new(s||(s=Promise))(function(m,v){function x(F){try{C(h.next(F))}catch(H){v(H)}}function S(F){try{C(h.throw(F))}catch(H){v(H)}}function C(F){var H;F.done?m(F.value):(H=F.value,H instanceof s?H:new s(function(Y){Y(H)})).then(x,S)}C((h=h.apply(o,r||[])).next())})}function w(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var E=I;function I(o,r){this.x=o,this.y=r}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,s=o.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),s=Math.sin(o),h=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,r){var s=Math.cos(o),h=Math.sin(o),m=r.y+h*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-h*(this.y-r.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(o){return o instanceof I?o:Array.isArray(o)?new I(o[0],o[1]):o};var b=w(E),T=R;function R(o,r,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=s,this.p2y=h}R.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<r)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=m/v}var x=0,S=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<r));h++)o>m?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var z=w(T);let j,se;function K(){return j==null&&(j=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),j}function Z(){if(se==null&&(se=!1,K())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let h=0;h<5*5;h++){const m=4*h;r.fillStyle=`rgb(${m},${m+1},${m+2})`,r.fillRect(h%5,Math.floor(h/5),1,1)}const s=r.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){se=!0;break}}}return se||!1}function V(o,r,s,h){const m=new z(o,r,s,h);return v=>m.solve(v)}const ae=V(.25,.1,.25,1);function X(o,r,s){return Math.min(s,Math.max(r,o))}function U(o,r,s){const h=s-r,m=((o-r)%h+h)%h+r;return m===r?s:m}function P(o,...r){for(const s of r)for(const h in s)o[h]=s[h];return o}let L=1;function B(o,r,s){const h={};for(const m in o)h[m]=r.call(this,o[m],m,o);return h}function Q(o,r,s){const h={};for(const m in o)r.call(this,o[m],m,o)&&(h[m]=o[m]);return h}function q(o){return Array.isArray(o)?o.map(q):typeof o=="object"&&o?B(o,q):o}const ve={};function ye(o){ve[o]||(typeof console<"u"&&console.warn(o),ve[o]=!0)}function fe(o,r,s){return(s.y-o.y)*(r.x-o.x)>(r.y-o.y)*(s.x-o.x)}function oe(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let ce=null;function J(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function de(o,r,s,h,m){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(o,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),C=new Uint8ClampedArray(h*m*4);if(yield v.copyTo(C,function(F,H,Y,ne,he){const ge=4*Math.max(-H,0),Pe=(Math.max(0,Y)-Y)*ne*4+ge,ke=4*ne,De=Math.max(0,H),et=Math.max(0,Y);return{rect:{x:De,y:et,width:Math.min(F.width,H+ne)-De,height:Math.min(F.height,Y+he)-et},layout:[{offset:Pe,stride:ke}]}}(o,r,s,h,m)),S)for(let F=0;F<C.length;F+=4){const H=C[F];C[F]=C[F+2],C[F+2]=H}return C}finally{v.close()}})}let we,Te;const Ne="AbortError";function Ie(){return new Error(Ne)}const Oe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function qe(o){return Oe.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const He="global-dispatcher";class ot extends Error{constructor(r,s,h,m){super(`AJAXError: ${s} (${r}): ${h}`),this.status=r,this.statusText=s,this.url=h,this.body=m}}const ht=()=>oe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,xt=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=qe(o.url);if(h)return h(o,r);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:He},r)}if(!(/^file:/.test(s=o.url)||/^file:/.test(ht())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,m){return u(this,void 0,void 0,function*(){const v=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:ht(),signal:m.signal});h.type==="json"&&v.headers.set("Accept","application/json");const x=yield fetch(v);if(!x.ok){const F=yield x.blob();throw new ot(x.status,x.statusText,h.url,F)}let S;S=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const C=yield S;if(m.signal.aborted)throw Ie();return{data:C,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,r);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:He},r)}var s;return function(h,m){return new Promise((v,x)=>{const S=new XMLHttpRequest;S.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(S.responseType="arraybuffer");for(const C in h.headers)S.setRequestHeader(C,h.headers[C]);h.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=h.credentials==="include",S.onerror=()=>{x(new Error(S.statusText))},S.onload=()=>{if(!m.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let C=S.response;if(h.type==="json")try{C=JSON.parse(S.response)}catch(F){return void x(F)}v({data:C,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const C=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});x(new ot(S.status,S.statusText,h.url,C))}},m.signal.addEventListener("abort",()=>{S.abort(),x(Ie())}),S.send(h.body)})}(o,r)};function Mt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),s=window.location;return r.protocol===s.protocol&&r.host===s.host}function pt(o,r,s){s[o]&&s[o].indexOf(r)!==-1||(s[o]=s[o]||[],s[o].push(r))}function wt(o,r,s){if(s&&s[o]){const h=s[o].indexOf(r);h!==-1&&s[o].splice(h,1)}}class Ht{constructor(r,s={}){P(this,s),this.type=r}}class zt extends Ht{constructor(r,s={}){super("error",P({error:r},s))}}class ur{on(r,s){return this._listeners=this._listeners||{},pt(r,s,this._listeners),this}off(r,s){return wt(r,s,this._listeners),wt(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},pt(r,s,this._oneTimeListeners),this):new Promise(h=>this.once(r,h))}fire(r,s){typeof r=="string"&&(r=new Ht(r,s||{}));const h=r.type;if(this.listens(h)){r.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of m)S.call(this,r);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of v)wt(h,S,this._oneTimeListeners),S.call(this,r);const x=this._eventedParent;x&&(P(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof zt&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var it={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const wr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function cr(o,r){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return wr.forEach(h=>{h in r&&(s[h]=r[h])}),s}function qt(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let s=0;s<o.length;s++)if(!qt(o[s],r[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const s in o)if(!qt(o[s],r[s]))return!1;return!0}return o===r}function Se(o,r){o.push(r)}function N(o,r,s){Se(s,{command:"addSource",args:[o,r[o]]})}function D(o,r,s){Se(r,{command:"removeSource",args:[o]}),s[o]=!0}function xe(o,r,s,h){D(o,s,h),N(o,r,s)}function Xe(o,r,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!qt(o[s][h],r[s][h]))return!1;for(h in r[s])if(Object.prototype.hasOwnProperty.call(r[s],h)&&h!=="data"&&!qt(o[s][h],r[s][h]))return!1;return!0}function tt(o,r,s,h,m,v){o=o||{},r=r||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(qt(o[x],r[x])||s.push({command:v,args:[h,x,r[x],m]}));for(const x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(qt(o[x],r[x])||s.push({command:v,args:[h,x,r[x],m]}))}function ct(o){return o.id}function le(o,r){return o[r.id]=r,o}class k{constructor(r,s,h,m){this.message=(r?`${r}: `:"")+h,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function $(o,...r){for(const s of r)for(const h in s)o[h]=s[h];return o}class Ee extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}class We{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[h,m]of s)this.bindings[h]=m}concat(r){return new We(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const nt={kind:"null"},Ve={kind:"number"},Et={kind:"string"},Ot={kind:"boolean"},dr={kind:"color"},br={kind:"object"},Ft={kind:"value"},Nn={kind:"collator"},ni={kind:"formatted"},an={kind:"padding"},Me={kind:"resolvedImage"},ie={kind:"variableAnchorOffsetCollection"};function ue(o,r){return{kind:"array",itemType:o,N:r}}function pe(o){if(o.kind==="array"){const r=pe(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const Fe=[nt,Ve,Et,Ot,dr,ni,br,ue(Ft),an,Me,ie];function Be(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Be(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const s of Fe)if(!Be(s,r))return null}}return`Expected ${pe(o)} but found ${pe(r)} instead.`}function je(o,r){return r.some(s=>s.kind===o.kind)}function Ue(o,r){return r.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function Le(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const Qe=.96422,ft=.82521,lt=4/29,ut=6/29,nr=3*ut*ut,Yt=ut*ut*ut,Er=Math.PI/180,lr=180/Math.PI;function Tr(o){return(o%=360)<0&&(o+=360),o}function Dr([o,r,s,h]){let m,v;const x=sn((.2225045*(o=Vr(o))+.7168786*(r=Vr(r))+.0606169*(s=Vr(s)))/1);o===r&&r===s?m=v=x:(m=sn((.4360747*o+.3850649*r+.1430804*s)/Qe),v=sn((.0139322*o+.0971045*r+.7141733*s)/ft));const S=116*x-16;return[S<0?0:S,500*(m-x),200*(x-v),h]}function Vr(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function sn(o){return o>Yt?Math.pow(o,1/3):o/nr+lt}function pr([o,r,s,h]){let m=(o+16)/116,v=isNaN(r)?m:m+r/500,x=isNaN(s)?m:m-s/200;return m=1*xn(m),v=Qe*xn(v),x=ft*xn(x),[Qr(3.1338561*v-1.6168667*m-.4906146*x),Qr(-.9787684*v+1.9161415*m+.033454*x),Qr(.0719453*v-.2289914*m+1.4052427*x),h]}function Qr(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function xn(o){return o>ut?o*o*o:nr*(o-lt)}function ii(o){return parseInt(o.padEnd(2,o),16)/255}function wi(o,r){return wn(r?o/100:o,0,1)}function wn(o,r,s){return Math.min(Math.max(r,o),s)}function Xa(o){return!o.some(Number.isNaN)}const wl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class kr{constructor(r,s,h,m=1,v=!0){this.r=r,this.g=s,this.b=h,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,s,h,m]))}static parse(r){if(r instanceof kr)return r;if(typeof r!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=wl[h];if(m){const[x,S,C]=m;return[x/255,S/255,C/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[ii(h.slice(S,S+=x)),ii(h.slice(S,S+=x)),ii(h.slice(S,S+=x)),ii(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,C,F,H,Y,ne,he,ge,Pe,ke,De,et]=x,Ze=[H||" ",he||" ",ke].join("");if(Ze==="  "||Ze==="  /"||Ze===",,"||Ze===",,,"){const Je=[F,ne,Pe].join(""),dt=Je==="%%%"?100:Je===""?255:0;if(dt){const gt=[wn(+C/dt,0,1),wn(+Y/dt,0,1),wn(+ge/dt,0,1),De?wi(+De,et):1];if(Xa(gt))return gt}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,S,C,F,H,Y,ne,he,ge]=v,Pe=[C||" ",H||" ",ne].join("");if(Pe==="  "||Pe==="  /"||Pe===",,"||Pe===",,,"){const ke=[+S,wn(+F,0,100),wn(+Y,0,100),he?wi(+he,ge):1];if(Xa(ke))return function([De,et,Ze,Je]){function dt(gt){const Dt=(gt+De/30)%12,Xt=et*Math.min(Ze,1-Ze);return Ze-Xt*Math.max(-1,Math.min(Dt-3,9-Dt,1))}return De=Tr(De),et/=100,Ze/=100,[dt(0),dt(8),dt(4),Je]}(ke)}}}(r);return s?new kr(...s,!1):void 0}get rgb(){const{r,g:s,b:h,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[r/v,s/v,h/v,m])}get hcl(){return this.overwriteGetter("hcl",function(r){const[s,h,m,v]=Dr(r),x=Math.sqrt(h*h+m*m);return[Math.round(1e4*x)?Tr(Math.atan2(m,h)*lr):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Dr(this.rgb))}overwriteGetter(r,s){return Object.defineProperty(this,r,{value:s}),s}toString(){const[r,s,h,m]=this.rgb;return`rgba(${[r,s,h].map(v=>Math.round(255*v)).join(",")},${m})`}}kr.black=new kr(0,0,0,1),kr.white=new kr(1,1,1,1),kr.transparent=new kr(0,0,0,0),kr.red=new kr(1,0,0,1);class bl{constructor(r,s,h){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ar{constructor(r,s,h,m,v){this.text=r,this.image=s,this.scale=h,this.fontStack=m,this.textColor=v}}class bn{constructor(r){this.sections=r}static fromString(r){return new bn([new Ar(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof bn?r:bn.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class oi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof oi)return r;if(typeof r=="number")return new oi([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const s of r)if(typeof s!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new oi(r)}}toString(){return JSON.stringify(this.values)}}const Rs=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ai{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof ai)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let s=0;s<r.length;s+=2){const h=r[s],m=r[s+1];if(typeof h!="string"||!Rs.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new ai(r)}}toString(){return JSON.stringify(this.values)}}class zi{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new zi({name:r,available:!1}):null}}function Oc(o,r,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,r,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,r,s,h]:[o,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function $n(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof kr||o instanceof bl||o instanceof bn||o instanceof oi||o instanceof ai||o instanceof zi)return!0;if(Array.isArray(o)){for(const r of o)if(!$n(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!$n(o[r]))return!1;return!0}return!1}function yn(o){if(o===null)return nt;if(typeof o=="string")return Et;if(typeof o=="boolean")return Ot;if(typeof o=="number")return Ve;if(o instanceof kr)return dr;if(o instanceof bl)return Nn;if(o instanceof bn)return ni;if(o instanceof oi)return an;if(o instanceof ai)return ie;if(o instanceof zi)return Me;if(Array.isArray(o)){const r=o.length;let s;for(const h of o){const m=yn(h);if(s){if(s===m)continue;s=Ft;break}s=m}return ue(s||Ft,r)}return br}function js(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof kr||o instanceof bn||o instanceof oi||o instanceof ai||o instanceof zi?o.toString():JSON.stringify(o)}class va{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!$n(r[1]))return s.error("invalid value");const h=r[1];let m=yn(h);const v=s.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new va(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ln{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const _a={string:Et,number:Ve,boolean:Ot,object:br};class Sn{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let h,m=1;const v=r[0];if(v==="array"){let S,C;if(r.length>2){const F=r[1];if(typeof F!="string"||!(F in _a)||F==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=_a[F],m++}else S=Ft;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);C=r[2],m++}h=ue(S,C)}else{if(!_a[v])throw new Error(`Types doesn't contain name = ${v}`);h=_a[v]}const x=[];for(;m<r.length;m++){const S=s.parse(r[m],m,Ft);if(!S)return null;x.push(S)}return new Sn(h,x)}evaluate(r){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(r);if(!Be(this.type,yn(h)))return h;if(s===this.args.length-1)throw new ln(`Expected value to be of type ${pe(this.type)}, but found ${pe(yn(h))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Sl={"to-boolean":Ot,"to-color":dr,"to-number":Ve,"to-string":Et};class go{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const h=r[0];if(!Sl[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&r.length!==2)return s.error("Expected one argument.");const m=Sl[h],v=[];for(let x=1;x<r.length;x++){const S=s.parse(r[x],x,Ft);if(!S)return null;v.push(S)}return new go(m,v)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let s,h;for(const m of this.args){if(s=m.evaluate(r),h=null,s instanceof kr)return s;if(typeof s=="string"){const v=r.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Oc(s[0],s[1],s[2],s[3]),!h))return new kr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ln(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(r);const m=oi.parse(s);if(m)return m}throw new ln(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(r);const m=ai.parse(s);if(m)return m}throw new ln(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(r),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new ln(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return bn.fromString(js(this.args[0].evaluate(r)));case"resolvedImage":return zi.fromString(js(this.args[0].evaluate(r)));default:return js(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Ou=["Unknown","Point","LineString","Polygon"];class Ka{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ou[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let s=this._parseColorCache[r];return s||(s=this._parseColorCache[r]=kr.parse(r)),s}}class jr{constructor(r,s,h=[],m,v=new We,x=[]){this.registry=r,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=x,this.expectedType=m,this._isConstant=s}parse(r,s,h,m,v={}){return s?this.concat(s,h,m)._parse(r,v):this._parse(r,v)}_parse(r,s){function h(m,v,x){return x==="assert"?new Sn(v,[m]):x==="coerce"?new go(v,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let x=v.parse(r,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,C=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||C.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string")if(S.kind!=="padding"||C.kind!=="value"&&C.kind!=="number"&&C.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||C.kind!=="value"&&C.kind!=="array"){if(this.checkSubtype(S,C))return null}else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof va)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new Ka;try{x=new va(x.type,x.evaluate(S))}catch(C){return this.error(C.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,h){const m=typeof r=="number"?this.path.concat(r):this.path,v=h?this.scope.concat(h):this.scope;return new jr(this.registry,this._isConstant,m,s||null,v,this.errors)}error(r,...s){const h=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new Ee(h,r))}checkSubtype(r,s){const h=Be(r,s);return h&&this.error(h),h}}class xa{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const h=[];for(let v=1;v<r.length-1;v+=2){const x=r[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=s.parse(r[v+1],v+1);if(!S)return null;h.push([x,S])}const m=s.parse(r[r.length-1],r.length-1,s.expectedType,h);return m?new xa(h,m):null}outputDefined(){return this.result.outputDefined()}}class Ya{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=r[1];return s.scope.has(h)?new Ya(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class Fu{constructor(r,s,h){this.type=r,this.index=s,this.input=h}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Ve),m=s.parse(r[2],2,ue(s.expectedType||Ft));return h&&m?new Fu(m.type.itemType,h,m):null}evaluate(r){const s=this.index.evaluate(r),h=this.input.evaluate(r);if(s<0)throw new ln(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new ln(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new ln(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class si{constructor(r,s){this.type=Ot,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Ft),m=s.parse(r[2],2,Ft);return h&&m?je(h.type,[Ot,Et,Ve,nt,Ft])?new si(h,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(h.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!h)return!1;if(!Ue(s,["boolean","string","number","null"]))throw new ln(`Expected first argument to be of type boolean, string, number or null, but found ${pe(yn(s))} instead.`);if(!Ue(h,["string","array"]))throw new ln(`Expected second argument to be of type array or string, but found ${pe(yn(h))} instead.`);return h.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Ls{constructor(r,s,h){this.type=Ve,this.needle=r,this.haystack=s,this.fromIndex=h}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Ft),m=s.parse(r[2],2,Ft);if(!h||!m)return null;if(!je(h.type,[Ot,Et,Ve,nt,Ft]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(h.type)} instead`);if(r.length===4){const v=s.parse(r[3],3,Ve);return v?new Ls(h,m,v):null}return new Ls(h,m)}evaluate(r){const s=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!Ue(s,["boolean","string","number","null"]))throw new ln(`Expected first argument to be of type boolean, string, number or null, but found ${pe(yn(s))} instead.`);if(!Ue(h,["string","array"]))throw new ln(`Expected second argument to be of type array or string, but found ${pe(yn(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(r);return h.indexOf(s,m)}return h.indexOf(s)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Ru{constructor(r,s,h,m,v,x){this.inputType=r,this.type=s,this.input=h,this.cases=m,this.outputs=v,this.otherwise=x}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let h,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const v={},x=[];for(let F=2;F<r.length-1;F+=2){let H=r[F];const Y=r[F+1];Array.isArray(H)||(H=[H]);const ne=s.concat(F);if(H.length===0)return ne.error("Expected at least one branch label.");for(const ge of H){if(typeof ge!="number"&&typeof ge!="string")return ne.error("Branch labels must be numbers or strings.");if(typeof ge=="number"&&Math.abs(ge)>Number.MAX_SAFE_INTEGER)return ne.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ge=="number"&&Math.floor(ge)!==ge)return ne.error("Numeric branch labels must be integer values.");if(h){if(ne.checkSubtype(h,yn(ge)))return null}else h=yn(ge);if(v[String(ge)]!==void 0)return ne.error("Branch labels must be unique.");v[String(ge)]=x.length}const he=s.parse(Y,F,m);if(!he)return null;m=m||he.type,x.push(he)}const S=s.parse(r[1],1,Ft);if(!S)return null;const C=s.parse(r[r.length-1],r.length-1,m);return C?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new Ru(h,m,S,v,x,C):null}evaluate(r){const s=this.input.evaluate(r);return(yn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class El{constructor(r,s,h){this.type=r,this.branches=s,this.otherwise=h}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const m=[];for(let x=1;x<r.length-1;x+=2){const S=s.parse(r[x],x,Ot);if(!S)return null;const C=s.parse(r[x+1],x+1,h);if(!C)return null;m.push([S,C]),h=h||C.type}const v=s.parse(r[r.length-1],r.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new El(h,m,v)}evaluate(r){for(const[s,h]of this.branches)if(s.evaluate(r))return h.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,h]of this.branches)r(s),r(h);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class zs{constructor(r,s,h,m){this.type=r,this.input=s,this.beginIndex=h,this.endIndex=m}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const h=s.parse(r[1],1,Ft),m=s.parse(r[2],2,Ve);if(!h||!m)return null;if(!je(h.type,[ue(Ft),Et,Ft]))return s.error(`Expected first argument to be of type array or string, but found ${pe(h.type)} instead`);if(r.length===4){const v=s.parse(r[3],3,Ve);return v?new zs(h.type,h,m,v):null}return new zs(h.type,h,m)}evaluate(r){const s=this.input.evaluate(r),h=this.beginIndex.evaluate(r);if(!Ue(s,["string","array"]))throw new ln(`Expected first argument to be of type array or string, but found ${pe(yn(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(r);return s.slice(h,m)}return s.slice(h)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Tl(o,r){const s=o.length-1;let h,m,v=0,x=s,S=0;for(;v<=x;)if(S=Math.floor((v+x)/2),h=o[S],m=o[S+1],h<=r){if(S===s||r<m)return S;v=S+1}else{if(!(h>r))throw new ln("Input is not a number.");x=S-1}return 0}class Ja{constructor(r,s,h){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[m,v]of h)this.labels.push(m),this.outputs.push(v)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(r[1],1,Ve);if(!h)return null;const m=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<r.length;x+=2){const S=x===1?-1/0:r[x],C=r[x+1],F=x,H=x+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(m.length&&m[m.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',F);const Y=s.parse(C,H,v);if(!Y)return null;v=v||Y.type,m.push([S,Y])}return new Ja(v,h,m)}evaluate(r){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return h[0].evaluate(r);const v=s.length;return m>=s[v-1]?h[v-1].evaluate(r):h[Tl(s,m)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function ju(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Fc=Qa;function Qa(o,r,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(h-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=s,this.p2y=h}Qa.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<r)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=m/v}var x=0,S=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<r));h++)o>m?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var Rc=ju(Fc);function Bi(o,r,s){return o+s*(r-o)}function Pl(o,r,s){return o.map((h,m)=>Bi(h,r[m],s))}const Yn={number:Bi,color:function(o,r,s,h="rgb"){switch(h){case"rgb":{const[m,v,x,S]=Pl(o.rgb,r.rgb,s);return new kr(m,v,x,S,!1)}case"hcl":{const[m,v,x,S]=o.hcl,[C,F,H,Y]=r.hcl;let ne,he;if(isNaN(m)||isNaN(C))isNaN(m)?isNaN(C)?ne=NaN:(ne=C,x!==1&&x!==0||(he=F)):(ne=m,H!==1&&H!==0||(he=v));else{let et=C-m;C>m&&et>180?et-=360:C<m&&m-C>180&&(et+=360),ne=m+s*et}const[ge,Pe,ke,De]=function([et,Ze,Je,dt]){return et=isNaN(et)?0:et*Er,pr([Je,Math.cos(et)*Ze,Math.sin(et)*Ze,dt])}([ne,he??Bi(v,F,s),Bi(x,H,s),Bi(S,Y,s)]);return new kr(ge,Pe,ke,De,!1)}case"lab":{const[m,v,x,S]=pr(Pl(o.lab,r.lab,s));return new kr(m,v,x,S,!1)}}},array:Pl,padding:function(o,r,s){return new oi(Pl(o.values,r.values,s))},variableAnchorOffsetCollection:function(o,r,s){const h=o.values,m=r.values;if(h.length!==m.length)throw new ln(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==m[x])throw new ln(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${m[x]}`);v.push(h[x]);const[S,C]=h[x+1],[F,H]=m[x+1];v.push([Bi(S,F,s),Bi(C,H,s)])}return new ai(v)}};class bi{constructor(r,s,h,m,v){this.type=r,this.operator=s,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[x,S]of v)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(r,s,h,m){let v=0;if(r.name==="exponential")v=Lu(s,r.base,h,m);else if(r.name==="linear")v=Lu(s,1,h,m);else if(r.name==="cubic-bezier"){const x=r.controlPoints;v=new Rc(x[0],x[1],x[2],x[3]).solve(Lu(s,1,h,m))}return v}static parse(r,s){let[h,m,v,...x]=r;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const F=m[1];if(typeof F!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:F}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const F=m.slice(1);if(F.length!==4||F.some(H=>typeof H!="number"||H<0||H>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:F}}}if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,Ve),!v)return null;const S=[];let C=null;h==="interpolate-hcl"||h==="interpolate-lab"?C=dr:s.expectedType&&s.expectedType.kind!=="value"&&(C=s.expectedType);for(let F=0;F<x.length;F+=2){const H=x[F],Y=x[F+1],ne=F+3,he=F+4;if(typeof H!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(S.length&&S[S.length-1][0]>=H)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ne);const ge=s.parse(Y,he,C);if(!ge)return null;C=C||ge.type,S.push([H,ge])}return Le(C,Ve)||Le(C,dr)||Le(C,an)||Le(C,ie)||Le(C,ue(Ve))?new bi(C,h,m,v,S):s.error(`Type ${pe(C)} is not interpolatable.`)}evaluate(r){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(r);const m=this.input.evaluate(r);if(m<=s[0])return h[0].evaluate(r);const v=s.length;if(m>=s[v-1])return h[v-1].evaluate(r);const x=Tl(s,m),S=bi.interpolationFactor(this.interpolation,m,s[x],s[x+1]),C=h[x].evaluate(r),F=h[x+1].evaluate(r);switch(this.operator){case"interpolate":return Yn[this.type.kind](C,F,S);case"interpolate-hcl":return Yn.color(C,F,S,"hcl");case"interpolate-lab":return Yn.color(C,F,S,"lab")}}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Lu(o,r,s,h){const m=h-s,v=o-s;return m===0?0:r===1?v/m:(Math.pow(r,v)-1)/(Math.pow(r,m)-1)}class Bs{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expectected at least one argument.");let h=null;const m=s.expectedType;m&&m.kind!=="value"&&(h=m);const v=[];for(const S of r.slice(1)){const C=s.parse(S,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!C)return null;h=h||C.type,v.push(C)}if(!h)throw new Error("No output type");const x=m&&v.some(S=>Be(m,S.type));return new Bs(x?Ft:h,v)}evaluate(r){let s,h=null,m=0;for(const v of this.args)if(m++,h=v.evaluate(r),h&&h instanceof zi&&!h.available&&(s||(s=h.name),h=null,m===this.args.length&&(h=s)),h!==null)break;return h}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function zu(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Bu(o,r,s,h){return h.compare(r,s)===0}function es(o,r,s){const h=o!=="=="&&o!=="!=";return class DM{constructor(v,x,S){this.type=Ot,this.lhs=v,this.rhs=x,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const S=v[0];let C=x.parse(v[1],1,Ft);if(!C)return null;if(!zu(S,C.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${pe(C.type)}'.`);let F=x.parse(v[2],2,Ft);if(!F)return null;if(!zu(S,F.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${pe(F.type)}'.`);if(C.type.kind!==F.type.kind&&C.type.kind!=="value"&&F.type.kind!=="value")return x.error(`Cannot compare types '${pe(C.type)}' and '${pe(F.type)}'.`);h&&(C.type.kind==="value"&&F.type.kind!=="value"?C=new Sn(F.type,[C]):C.type.kind!=="value"&&F.type.kind==="value"&&(F=new Sn(C.type,[F])));let H=null;if(v.length===4){if(C.type.kind!=="string"&&F.type.kind!=="string"&&C.type.kind!=="value"&&F.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(H=x.parse(v[3],3,Nn),!H)return null}return new DM(C,F,H)}evaluate(v){const x=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const C=yn(x),F=yn(S);if(C.kind!==F.kind||C.kind!=="string"&&C.kind!=="number")throw new ln(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${C.kind}, ${F.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const C=yn(x),F=yn(S);if(C.kind!=="string"||F.kind!=="string")return r(v,x,S)}return this.collator?s(v,x,S,this.collator.evaluate(v)):r(v,x,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Du=es("==",function(o,r,s){return r===s},Bu),jc=es("!=",function(o,r,s){return r!==s},function(o,r,s,h){return!Bu(0,r,s,h)}),Lc=es("<",function(o,r,s){return r<s},function(o,r,s,h){return h.compare(r,s)<0}),Of=es(">",function(o,r,s){return r>s},function(o,r,s,h){return h.compare(r,s)>0}),Ff=es("<=",function(o,r,s){return r<=s},function(o,r,s,h){return h.compare(r,s)<=0}),zc=es(">=",function(o,r,s){return r>=s},function(o,r,s,h){return h.compare(r,s)>=0});class Al{constructor(r,s,h){this.type=Nn,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const h=r[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const m=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Ot);if(!m)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Ot);if(!v)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Et),!x)?null:new Al(m,v,x)}evaluate(r){return new bl(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class Il{constructor(r,s,h,m,v){this.type=Et,this.number=r,this.locale=s,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const h=s.parse(r[1],1,Ve);if(!h)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=s.parse(m.locale,1,Et),!v))return null;let x=null;if(m.currency&&(x=s.parse(m.currency,1,Et),!x))return null;let S=null;if(m["min-fraction-digits"]&&(S=s.parse(m["min-fraction-digits"],1,Ve),!S))return null;let C=null;return m["max-fraction-digits"]&&(C=s.parse(m["max-fraction-digits"],1,Ve),!C)?null:new Il(h,v,x,S,C)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Cl{constructor(r){this.type=ni,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const h=r[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const m=[];let v=!1;for(let x=1;x<=r.length-1;++x){const S=r[x];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let C=null;if(S["font-scale"]&&(C=s.parse(S["font-scale"],1,Ve),!C))return null;let F=null;if(S["text-font"]&&(F=s.parse(S["text-font"],1,ue(Et)),!F))return null;let H=null;if(S["text-color"]&&(H=s.parse(S["text-color"],1,dr),!H))return null;const Y=m[m.length-1];Y.scale=C,Y.font=F,Y.textColor=H}else{const C=s.parse(r[x],1,Ft);if(!C)return null;const F=C.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:C,scale:null,font:null,textColor:null})}}return new Cl(m)}evaluate(r){return new bn(this.sections.map(s=>{const h=s.content.evaluate(r);return yn(h)===Me?new Ar("",h,null,null,null):new Ar(js(h),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor)}outputDefined(){return!1}}class Nu{constructor(r){this.type=Me,this.input=r}static parse(r,s){if(r.length!==2)return s.error("Expected two arguments.");const h=s.parse(r[1],1,Et);return h?new Nu(h):s.error("No image name provided.")}evaluate(r){const s=this.input.evaluate(r),h=zi.fromString(s);return h&&r.availableImages&&(h.available=r.availableImages.indexOf(s)>-1),h}eachChild(r){r(this.input)}outputDefined(){return!1}}class ts{constructor(r){this.type=Ve,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const h=s.parse(r[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${pe(h.type)} instead.`):new ts(h):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string"||Array.isArray(s))return s.length;throw new ln(`Expected value to be of type string or array, but found ${pe(yn(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Si=8192;function Lr(o,r){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(s*m*Si),Math.round(h*m*Si)]}function $u(o,r){const s=Math.pow(2,r.z);return[(m=(o[0]/Si+r.x)/s,360*m-180),(h=(o[1]/Si+r.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,m}function Ds(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function rs(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Rf(o,r,s){const h=o[0]-r[0],m=o[1]-r[1],v=o[0]-s[0],x=o[1]-s[1];return h*x-v*m==0&&h*v<=0&&m*x<=0}function ns(o,r,s,h){return(m=[h[0]-s[0],h[1]-s[1]])[0]*(v=[r[0]-o[0],r[1]-o[1]])[1]-m[1]*v[0]!=0&&!(!Dc(o,r,s,h)||!Dc(s,h,o,r));var m,v}function jf(o,r,s){for(const h of s)for(let m=0;m<h.length-1;++m)if(ns(o,r,h[m],h[m+1]))return!0;return!1}function is(o,r,s=!1){let h=!1;for(const S of r)for(let C=0;C<S.length-1;C++){if(Rf(o,S[C],S[C+1]))return s;(v=S[C])[1]>(m=o)[1]!=(x=S[C+1])[1]>m[1]&&m[0]<(x[0]-v[0])*(m[1]-v[1])/(x[1]-v[1])+v[0]&&(h=!h)}var m,v,x;return h}function Lf(o,r){for(const s of r)if(is(o,s))return!0;return!1}function Bc(o,r){for(const s of o)if(!is(s,r))return!1;for(let s=0;s<o.length-1;++s)if(jf(o[s],o[s+1],r))return!1;return!0}function zf(o,r){for(const s of r)if(Bc(o,s))return!0;return!1}function Dc(o,r,s,h){const m=h[0]-s[0],v=h[1]-s[1],x=(o[0]-s[0])*v-m*(o[1]-s[1]),S=(r[0]-s[0])*v-m*(r[1]-s[1]);return x>0&&S<0||x<0&&S>0}function Ml(o,r,s){const h=[];for(let m=0;m<o.length;m++){const v=[];for(let x=0;x<o[m].length;x++){const S=Lr(o[m][x],s);Ds(r,S),v.push(S)}h.push(v)}return h}function kl(o,r,s){const h=[];for(let m=0;m<o.length;m++){const v=Ml(o[m],r,s);h.push(v)}return h}function Nc(o,r,s,h){if(o[0]<s[0]||o[0]>s[2]){const m=.5*h;let v=o[0]-s[0]>m?-h:s[0]-o[0]>m?h:0;v===0&&(v=o[0]-s[2]>m?-h:s[2]-o[0]>m?h:0),o[0]+=v}Ds(r,o)}function $c(o,r,s,h){const m=Math.pow(2,h.z)*Si,v=[h.x*Si,h.y*Si],x=[];for(const S of o)for(const C of S){const F=[C.x+v[0],C.y+v[1]];Nc(F,r,s,m),x.push(F)}return x}function Uc(o,r,s,h){const m=Math.pow(2,h.z)*Si,v=[h.x*Si,h.y*Si],x=[];for(const C of o){const F=[];for(const H of C){const Y=[H.x+v[0],H.y+v[1]];Ds(r,Y),F.push(Y)}x.push(F)}if(r[2]-r[0]<=m/2){(S=r)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const C of x)for(const F of C)Nc(F,r,s,m)}var S;return x}class wa{constructor(r,s){this.type=Ot,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if($n(r[1])){const h=r[1];if(h.type==="FeatureCollection"){const m=[];for(const v of h.features){const{type:x,coordinates:S}=v.geometry;x==="Polygon"&&m.push(S),x==="MultiPolygon"&&m.push(...S)}if(m.length)return new wa(h,{type:"MultiPolygon",coordinates:m})}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new wa(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new wa(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Ml(h.coordinates,v,x),C=$c(s.geometry(),m,v,x);if(!rs(m,v))return!1;for(const F of C)if(!is(F,S))return!1}if(h.type==="MultiPolygon"){const S=kl(h.coordinates,v,x),C=$c(s.geometry(),m,v,x);if(!rs(m,v))return!1;for(const F of C)if(!Lf(F,S))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Ml(h.coordinates,v,x),C=Uc(s.geometry(),m,v,x);if(!rs(m,v))return!1;for(const F of C)if(!Bc(F,S))return!1}if(h.type==="MultiPolygon"){const S=kl(h.coordinates,v,x),C=Uc(s.geometry(),m,v,x);if(!rs(m,v))return!1;for(const F of C)if(!zf(F,S))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Uu=class{constructor(o=[],r=Bf){if(this.data=o,this.length=this.data.length,this.compare=r,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:r,compare:s}=this,h=r[o];for(;o>0;){const m=o-1>>1,v=r[m];if(s(h,v)>=0)break;r[o]=v,o=m}r[o]=h}_down(o){const{data:r,compare:s}=this,h=this.length>>1,m=r[o];for(;o<h;){let v=1+(o<<1),x=r[v];const S=v+1;if(S<this.length&&s(r[S],x)<0&&(v=S,x=r[S]),s(x,m)>=0)break;r[o]=x,o=v}r[o]=m}};function Bf(o,r){return o<r?-1:o>r?1:0}function Df(o,r,s,h,m){Vc(o,r,s,h||o.length-1,m||Ol)}function Vc(o,r,s,h,m){for(;h>s;){if(h-s>600){var v=h-s+1,x=r-s+1,S=Math.log(v),C=.5*Math.exp(2*S/3),F=.5*Math.sqrt(S*C*(v-C)/v)*(x-v/2<0?-1:1);Vc(o,r,Math.max(s,Math.floor(r-x*C/v+F)),Math.min(h,Math.floor(r+(v-x)*C/v+F)),m)}var H=o[r],Y=s,ne=h;for(Ns(o,s,r),m(o[h],H)>0&&Ns(o,s,h);Y<ne;){for(Ns(o,Y,ne),Y++,ne--;m(o[Y],H)<0;)Y++;for(;m(o[ne],H)>0;)ne--}m(o[s],H)===0?Ns(o,s,ne):Ns(o,++ne,h),ne<=r&&(s=ne+1),r<=ne&&(h=ne-1)}}function Ns(o,r,s){var h=o[r];o[r]=o[s],o[s]=h}function Ol(o,r){return o<r?-1:o>r?1:0}function Fl(o,r){if(o.length<=1)return[o];const s=[];let h,m;for(const v of o){const x=Gc(v);x!==0&&(v.area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(h&&s.push(h),h=[v]):h.push(v))}if(h&&s.push(h),r>1)for(let v=0;v<s.length;v++)s[v].length<=r||(Df(s[v],r,1,s[v].length-1,os),s[v]=s[v].slice(0,r));return s}function os(o,r){return r.area-o.area}function Gc(o){let r=0;for(let s,h,m=0,v=o.length,x=v-1;m<v;x=m++)s=o[m],h=o[x],r+=(h.x-s.x)*(s.y+h.y);return r}const Yi=1/298.257223563,Wc=Yi*(2-Yi),Hc=Math.PI/180;class Vu{constructor(r){const s=6378.137*Hc*1e3,h=Math.cos(r*Hc),m=1/(1-Wc*(1-h*h)),v=Math.sqrt(m);this.kx=s*v*h,this.ky=s*v*m*(1-Wc)}distance(r,s){const h=this.wrap(r[0]-s[0])*this.kx,m=(r[1]-s[1])*this.ky;return Math.sqrt(h*h+m*m)}pointOnLine(r,s){let h,m,v,x,S=1/0;for(let C=0;C<r.length-1;C++){let F=r[C][0],H=r[C][1],Y=this.wrap(r[C+1][0]-F)*this.kx,ne=(r[C+1][1]-H)*this.ky,he=0;Y===0&&ne===0||(he=(this.wrap(s[0]-F)*this.kx*Y+(s[1]-H)*this.ky*ne)/(Y*Y+ne*ne),he>1?(F=r[C+1][0],H=r[C+1][1]):he>0&&(F+=Y/this.kx*he,H+=ne/this.ky*he)),Y=this.wrap(s[0]-F)*this.kx,ne=(s[1]-H)*this.ky;const ge=Y*Y+ne*ne;ge<S&&(S=ge,h=F,m=H,v=C,x=he)}return{point:[h,m],index:v,t:Math.max(0,Math.min(1,x))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function Zc(o,r){return r[0]-o[0]}function ta(o){return o[1]-o[0]+1}function Co(o,r){return o[1]>=o[0]&&o[1]<r}function as(o,r){if(o[0]>o[1])return[null,null];const s=ta(o);if(r){if(s===2)return[o,null];const m=Math.floor(s/2);return[[o[0],o[0]+m],[o[0]+m,o[1]]]}if(s===1)return[o,null];const h=Math.floor(s/2)-1;return[[o[0],o[0]+h],[o[0]+h+1,o[1]]]}function Gu(o,r){if(!Co(r,o.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let h=r[0];h<=r[1];++h)Ds(s,o[h]);return s}function Wu(o){const r=[1/0,1/0,-1/0,-1/0];for(const s of o)for(const h of s)Ds(r,h);return r}function Xr(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function Rl(o,r,s){if(!Xr(o)||!Xr(r))return NaN;let h=0,m=0;return o[2]<r[0]&&(h=r[0]-o[2]),o[0]>r[2]&&(h=o[0]-r[2]),o[1]>r[3]&&(m=o[1]-r[3]),o[3]<r[1]&&(m=r[1]-o[3]),s.distance([0,0],[h,m])}function xr(o,r,s){const h=s.pointOnLine(r,o);return s.distance(o,h.point)}function $s(o,r,s,h,m){const v=Math.min(xr(o,[s,h],m),xr(r,[s,h],m)),x=Math.min(xr(s,[o,r],m),xr(h,[o,r],m));return Math.min(v,x)}function en(o,r,s,h,m){if(!Co(r,o.length)||!Co(h,s.length))return 1/0;let v=1/0;for(let x=r[0];x<r[1];++x){const S=o[x],C=o[x+1];for(let F=h[0];F<h[1];++F){const H=s[F],Y=s[F+1];if(ns(S,C,H,Y))return 0;v=Math.min(v,$s(S,C,H,Y,m))}}return v}function Gr(o,r,s,h,m){if(!Co(r,o.length)||!Co(h,s.length))return NaN;let v=1/0;for(let x=r[0];x<=r[1];++x)for(let S=h[0];S<=h[1];++S)if(v=Math.min(v,m.distance(o[x],s[S])),v===0)return v;return v}function yo(o,r,s){if(is(o,r,!0))return 0;let h=1/0;for(const m of r){const v=m[0],x=m[m.length-1];if(v!==x&&(h=Math.min(h,xr(o,[x,v],s)),h===0))return h;const S=s.pointOnLine(m,o);if(h=Math.min(h,s.distance(o,S.point)),h===0)return h}return h}function qc(o,r,s,h){if(!Co(r,o.length))return NaN;for(let v=r[0];v<=r[1];++v)if(is(o[v],s,!0))return 0;let m=1/0;for(let v=r[0];v<r[1];++v){const x=o[v],S=o[v+1];for(const C of s)for(let F=0,H=C.length,Y=H-1;F<H;Y=F++){const ne=C[Y],he=C[F];if(ns(x,S,ne,he))return 0;m=Math.min(m,$s(x,S,ne,he,h))}}return m}function jl(o,r){for(const s of o)for(const h of s)if(is(h,r,!0))return!0;return!1}function Ll(o,r,s,h=1/0){const m=Wu(o),v=Wu(r);if(h!==1/0&&Rl(m,v,s)>=h)return h;if(rs(m,v)){if(jl(o,r))return 0}else if(jl(r,o))return 0;let x=1/0;for(const S of o)for(let C=0,F=S.length,H=F-1;C<F;H=C++){const Y=S[H],ne=S[C];for(const he of r)for(let ge=0,Pe=he.length,ke=Pe-1;ge<Pe;ke=ge++){const De=he[ke],et=he[ge];if(ns(Y,ne,De,et))return 0;x=Math.min(x,$s(Y,ne,De,et,s))}}return x}function Xc(o,r,s,h,m,v){if(!v)return;const x=Rl(Gu(h,v),m,s);x<r&&o.push([x,v,[0,0]])}function Mo(o,r,s,h,m,v,x){if(!v||!x)return;const S=Rl(Gu(h,v),Gu(m,x),s);S<r&&o.push([S,v,x])}function ko(o,r,s,h,m=1/0){let v=Math.min(h.distance(o[0],s[0][0]),m);if(v===0)return v;const x=new Uu([[0,[0,o.length-1],[0,0]]],Zc),S=Wu(s);for(;x.length>0;){const C=x.pop();if(C[0]>=v)continue;const F=C[1],H=r?50:100;if(ta(F)<=H){if(!Co(F,o.length))return NaN;if(r){const Y=qc(o,F,s,h);if(isNaN(Y)||Y===0)return Y;v=Math.min(v,Y)}else for(let Y=F[0];Y<=F[1];++Y){const ne=yo(o[Y],s,h);if(v=Math.min(v,ne),v===0)return 0}}else{const Y=as(F,r);Xc(x,v,h,o,S,Y[0]),Xc(x,v,h,o,S,Y[1])}}return v}function En(o,r,s,h,m,v=1/0){let x=Math.min(v,m.distance(o[0],s[0]));if(x===0)return x;const S=new Uu([[0,[0,o.length-1],[0,s.length-1]]],Zc);for(;S.length>0;){const C=S.pop();if(C[0]>=x)continue;const F=C[1],H=C[2],Y=r?50:100,ne=h?50:100;if(ta(F)<=Y&&ta(H)<=ne){if(!Co(F,o.length)&&Co(H,s.length))return NaN;let he;if(r&&h)he=en(o,F,s,H,m),x=Math.min(x,he);else if(r&&!h){const ge=o.slice(F[0],F[1]+1);for(let Pe=H[0];Pe<=H[1];++Pe)if(he=xr(s[Pe],ge,m),x=Math.min(x,he),x===0)return x}else if(!r&&h){const ge=s.slice(H[0],H[1]+1);for(let Pe=F[0];Pe<=F[1];++Pe)if(he=xr(o[Pe],ge,m),x=Math.min(x,he),x===0)return x}else he=Gr(o,F,s,H,m),x=Math.min(x,he)}else{const he=as(F,r),ge=as(H,h);Mo(S,x,m,o,s,he[0],ge[0]),Mo(S,x,m,o,s,he[0],ge[1]),Mo(S,x,m,o,s,he[1],ge[0]),Mo(S,x,m,o,s,he[1],ge[1])}}return x}function vo(o){return o.type==="MultiPolygon"?o.coordinates.map(r=>({type:"Polygon",coordinates:r})):o.type==="MultiLineString"?o.coordinates.map(r=>({type:"LineString",coordinates:r})):o.type==="MultiPoint"?o.coordinates.map(r=>({type:"Point",coordinates:r})):[o]}class _o{constructor(r,s){this.type=Ve,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if($n(r[1])){const h=r[1];if(h.type==="FeatureCollection")return new _o(h,h.features.map(m=>vo(m.geometry)).flat());if(h.type==="Feature")return new _o(h,vo(h.geometry));if("type"in h&&"coordinates"in h)return new _o(h,vo(h))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,h){const m=s.geometry(),v=m.flat().map(C=>$u([C.x,C.y],s.canonical));if(m.length===0)return NaN;const x=new Vu(v[0][1]);let S=1/0;for(const C of h){switch(C.type){case"Point":S=Math.min(S,En(v,!1,[C.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,En(v,!1,C.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,ko(v,!1,C.coordinates,x,S))}if(S===0)return S}return S}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,h){const m=s.geometry(),v=m.flat().map(C=>$u([C.x,C.y],s.canonical));if(m.length===0)return NaN;const x=new Vu(v[0][1]);let S=1/0;for(const C of h){switch(C.type){case"Point":S=Math.min(S,En(v,!0,[C.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,En(v,!0,C.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,ko(v,!0,C.coordinates,x,S))}if(S===0)return S}return S}(r,this.geometries);if(r.geometryType()==="Polygon")return function(s,h){const m=s.geometry();if(m.length===0||m[0].length===0)return NaN;const v=Fl(m,0).map(C=>C.map(F=>F.map(H=>$u([H.x,H.y],s.canonical)))),x=new Vu(v[0][0][0][1]);let S=1/0;for(const C of h)for(const F of v){switch(C.type){case"Point":S=Math.min(S,ko([C.coordinates],!1,F,x,S));break;case"LineString":S=Math.min(S,ko(C.coordinates,!0,F,x,S));break;case"Polygon":S=Math.min(S,Ll(F,C.coordinates,x,S))}if(S===0)return S}return S}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Oo={"==":Du,"!=":jc,">":Of,"<":Lc,">=":zc,"<=":Ff,array:Sn,at:Fu,boolean:Sn,case:El,coalesce:Bs,collator:Al,format:Cl,image:Nu,in:si,"index-of":Ls,interpolate:bi,"interpolate-hcl":bi,"interpolate-lab":bi,length:ts,let:xa,literal:va,match:Ru,number:Sn,"number-format":Il,object:Sn,slice:zs,step:Ja,string:Sn,"to-boolean":go,"to-color":go,"to-number":go,"to-string":go,var:Ya,within:wa,distance:_o};class li{constructor(r,s,h,m){this.name=r,this.type=s,this._evaluate=h,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,s){const h=r[0],m=li.definitions[h];if(!m)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=x.filter(([F])=>!Array.isArray(F)||F.length===r.length-1);let C=null;for(const[F,H]of S){C=new jr(s.registry,Gs,s.path,null,s.scope);const Y=[];let ne=!1;for(let he=1;he<r.length;he++){const ge=r[he],Pe=Array.isArray(F)?F[he-1]:F.type,ke=C.parse(ge,1+Y.length,Pe);if(!ke){ne=!0;break}Y.push(ke)}if(!ne)if(Array.isArray(F)&&F.length!==Y.length)C.error(`Expected ${F.length} arguments, but found ${Y.length} instead.`);else{for(let he=0;he<Y.length;he++){const ge=Array.isArray(F)?F[he]:F.type,Pe=Y[he];C.concat(he+1).checkSubtype(ge,Pe.type)}if(C.errors.length===0)return new li(h,v,H,Y)}}if(S.length===1)s.errors.push(...C.errors);else{const F=(S.length?S:x).map(([Y])=>{return ne=Y,Array.isArray(ne)?`(${ne.map(pe).join(", ")})`:`(${pe(ne.type)}...)`;var ne}).join(" | "),H=[];for(let Y=1;Y<r.length;Y++){const ne=s.parse(r[Y],1+H.length);if(!ne)return null;H.push(pe(ne.type))}s.error(`Expected arguments of type ${F}, but found (${H.join(", ")}) instead.`)}return null}static register(r,s){li.definitions=s;for(const h in s)r[h]=li}}function Us(o,[r,s,h,m]){r=r.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const v=m?m.evaluate(o):1,x=Oc(r,s,h,v);if(x)throw new ln(x);return new kr(r/255,s/255,h/255,v,!1)}function Vs(o,r){return o in r}function Ei(o,r){const s=r[o];return s===void 0?null:s}function Di(o){return{type:o}}function Gs(o){if(o instanceof Ya)return Gs(o.boundExpression);if(o instanceof li&&o.name==="error"||o instanceof Al||o instanceof wa||o instanceof _o)return!1;const r=o instanceof go||o instanceof Sn;let s=!0;return o.eachChild(h=>{s=r?s&&Gs(h):s&&h instanceof va}),!!s&&ba(o)&&Ws(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ba(o){if(o instanceof li&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof wa||o instanceof _o)return!1;let r=!0;return o.eachChild(s=>{r&&!ba(s)&&(r=!1)}),r}function ra(o){if(o instanceof li&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(s=>{r&&!ra(s)&&(r=!1)}),r}function Ws(o,r){if(o instanceof li&&r.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!Ws(h,r)&&(s=!1)}),s}function zl(o){return{result:"success",value:o}}function na(o){return{result:"error",value:o}}function xo(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Fo(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Hs(o){return!!o.expression&&o.expression.interpolated}function Fr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Sa(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function ss(o){return o}function ls(o,r){const s=r.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",m=h||!(h||o.property!==void 0),v=o.type||(Hs(r)?"exponential":"interval");if(s||r.type==="padding"){const H=s?kr.parse:oi.parse;(o=$({},o)).stops&&(o.stops=o.stops.map(Y=>[Y[0],H(Y[1])])),o.default=H(o.default?o.default:r.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let S,C,F;if(v==="exponential")S=_e;else if(v==="interval")S=W;else if(v==="categorical"){S=Bl,C=Object.create(null);for(const H of o.stops)C[H[0]]=H[1];F=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=$e}if(h){const H={},Y=[];for(let ge=0;ge<o.stops.length;ge++){const Pe=o.stops[ge],ke=Pe[0].zoom;H[ke]===void 0&&(H[ke]={zoom:ke,type:o.type,property:o.property,default:o.default,stops:[]},Y.push(ke)),H[ke].stops.push([Pe[0].value,Pe[1]])}const ne=[];for(const ge of Y)ne.push([H[ge].zoom,ls(H[ge],r)]);const he={name:"linear"};return{kind:"composite",interpolationType:he,interpolationFactor:bi.interpolationFactor.bind(void 0,he),zoomStops:ne.map(ge=>ge[0]),evaluate:({zoom:ge},Pe)=>_e({stops:ne,base:o.base},r,ge).evaluate(ge,Pe)}}if(m){const H=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:H,interpolationFactor:bi.interpolationFactor.bind(void 0,H),zoomStops:o.stops.map(Y=>Y[0]),evaluate:({zoom:Y})=>S(o,r,Y,C,F)}}return{kind:"source",evaluate(H,Y){const ne=Y&&Y.properties?Y.properties[o.property]:void 0;return ne===void 0?Ea(o.default,r.default):S(o,r,ne,C,F)}}}function Ea(o,r,s){return o!==void 0?o:r!==void 0?r:s!==void 0?s:void 0}function Bl(o,r,s,h,m){return Ea(typeof s===m?h[s]:void 0,o.default,r.default)}function W(o,r,s){if(Fr(s)!=="number")return Ea(o.default,r.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const m=Tl(o.stops.map(v=>v[0]),s);return o.stops[m][1]}function _e(o,r,s){const h=o.base!==void 0?o.base:1;if(Fr(s)!=="number")return Ea(o.default,r.default);const m=o.stops.length;if(m===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[m-1][0])return o.stops[m-1][1];const v=Tl(o.stops.map(H=>H[0]),s),x=function(H,Y,ne,he){const ge=he-ne,Pe=H-ne;return ge===0?0:Y===1?Pe/ge:(Math.pow(Y,Pe)-1)/(Math.pow(Y,ge)-1)}(s,h,o.stops[v][0],o.stops[v+1][0]),S=o.stops[v][1],C=o.stops[v+1][1],F=Yn[r.type]||ss;return typeof S.evaluate=="function"?{evaluate(...H){const Y=S.evaluate.apply(void 0,H),ne=C.evaluate.apply(void 0,H);if(Y!==void 0&&ne!==void 0)return F(Y,ne,x,o.colorSpace)}}:F(S,C,x,o.colorSpace)}function $e(o,r,s){switch(r.type){case"color":s=kr.parse(s);break;case"formatted":s=bn.fromString(s.toString());break;case"resolvedImage":s=zi.fromString(s.toString());break;case"padding":s=oi.parse(s);break;default:Fr(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0)}return Ea(s,o.default,r.default)}li.register(Oo,{error:[{kind:"error"},[Et],(o,[r])=>{throw new ln(r.evaluate(o))}],typeof:[Et,[Ft],(o,[r])=>pe(yn(r.evaluate(o)))],"to-rgba":[ue(Ve,4),[dr],(o,[r])=>{const[s,h,m,v]=r.evaluate(o).rgb;return[255*s,255*h,255*m,v]}],rgb:[dr,[Ve,Ve,Ve],Us],rgba:[dr,[Ve,Ve,Ve,Ve],Us],has:{type:Ot,overloads:[[[Et],(o,[r])=>Vs(r.evaluate(o),o.properties())],[[Et,br],(o,[r,s])=>Vs(r.evaluate(o),s.evaluate(o))]]},get:{type:Ft,overloads:[[[Et],(o,[r])=>Ei(r.evaluate(o),o.properties())],[[Et,br],(o,[r,s])=>Ei(r.evaluate(o),s.evaluate(o))]]},"feature-state":[Ft,[Et],(o,[r])=>Ei(r.evaluate(o),o.featureState||{})],properties:[br,[],o=>o.properties()],"geometry-type":[Et,[],o=>o.geometryType()],id:[Ft,[],o=>o.id()],zoom:[Ve,[],o=>o.globals.zoom],"heatmap-density":[Ve,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ve,[],o=>o.globals.lineProgress||0],accumulated:[Ft,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ve,Di(Ve),(o,r)=>{let s=0;for(const h of r)s+=h.evaluate(o);return s}],"*":[Ve,Di(Ve),(o,r)=>{let s=1;for(const h of r)s*=h.evaluate(o);return s}],"-":{type:Ve,overloads:[[[Ve,Ve],(o,[r,s])=>r.evaluate(o)-s.evaluate(o)],[[Ve],(o,[r])=>-r.evaluate(o)]]},"/":[Ve,[Ve,Ve],(o,[r,s])=>r.evaluate(o)/s.evaluate(o)],"%":[Ve,[Ve,Ve],(o,[r,s])=>r.evaluate(o)%s.evaluate(o)],ln2:[Ve,[],()=>Math.LN2],pi:[Ve,[],()=>Math.PI],e:[Ve,[],()=>Math.E],"^":[Ve,[Ve,Ve],(o,[r,s])=>Math.pow(r.evaluate(o),s.evaluate(o))],sqrt:[Ve,[Ve],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Ve,[Ve],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Ve,[Ve],(o,[r])=>Math.log(r.evaluate(o))],log2:[Ve,[Ve],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Ve,[Ve],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Ve,[Ve],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Ve,[Ve],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Ve,[Ve],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Ve,[Ve],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Ve,[Ve],(o,[r])=>Math.atan(r.evaluate(o))],min:[Ve,Di(Ve),(o,r)=>Math.min(...r.map(s=>s.evaluate(o)))],max:[Ve,Di(Ve),(o,r)=>Math.max(...r.map(s=>s.evaluate(o)))],abs:[Ve,[Ve],(o,[r])=>Math.abs(r.evaluate(o))],round:[Ve,[Ve],(o,[r])=>{const s=r.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ve,[Ve],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Ve,[Ve],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[Ot,[Et,Ft],(o,[r,s])=>o.properties()[r.value]===s.value],"filter-id-==":[Ot,[Ft],(o,[r])=>o.id()===r.value],"filter-type-==":[Ot,[Et],(o,[r])=>o.geometryType()===r.value],"filter-<":[Ot,[Et,Ft],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h<m}],"filter-id-<":[Ot,[Ft],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s<h}],"filter->":[Ot,[Et,Ft],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h>m}],"filter-id->":[Ot,[Ft],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s>h}],"filter-<=":[Ot,[Et,Ft],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[Ot,[Ft],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s<=h}],"filter->=":[Ot,[Et,Ft],(o,[r,s])=>{const h=o.properties()[r.value],m=s.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[Ot,[Ft],(o,[r])=>{const s=o.id(),h=r.value;return typeof s==typeof h&&s>=h}],"filter-has":[Ot,[Ft],(o,[r])=>r.value in o.properties()],"filter-has-id":[Ot,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Ot,[ue(Et)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[Ot,[ue(Ft)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[Ot,[Et,ue(Ft)],(o,[r,s])=>s.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[Ot,[Et,ue(Ft)],(o,[r,s])=>function(h,m,v,x){for(;v<=x;){const S=v+x>>1;if(m[S]===h)return!0;m[S]>h?x=S-1:v=S+1}return!1}(o.properties()[r.value],s.value,0,s.value.length-1)],all:{type:Ot,overloads:[[[Ot,Ot],(o,[r,s])=>r.evaluate(o)&&s.evaluate(o)],[Di(Ot),(o,r)=>{for(const s of r)if(!s.evaluate(o))return!1;return!0}]]},any:{type:Ot,overloads:[[[Ot,Ot],(o,[r,s])=>r.evaluate(o)||s.evaluate(o)],[Di(Ot),(o,r)=>{for(const s of r)if(s.evaluate(o))return!0;return!1}]]},"!":[Ot,[Ot],(o,[r])=>!r.evaluate(o)],"is-supported-script":[Ot,[Et],(o,[r])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(r.evaluate(o))}],upcase:[Et,[Et],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Et,[Et],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Et,Di(Ft),(o,r)=>r.map(s=>js(s.evaluate(o))).join("")],"resolved-locale":[Et,[Nn],(o,[r])=>r.evaluate(o).resolvedLocale()]});class st{constructor(r,s){var h;this.expression=r,this._warningHistory={},this._evaluator=new Ka,this._defaultValue=s?(h=s).type==="color"&&Sa(h.default)?new kr(0,0,0,0):h.type==="color"?kr.parse(h.default)||null:h.type==="padding"?oi.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?ai.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(r,s,h,m,v,x){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,s,h,m,v,x){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new ln(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function kt(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Oo}function Tt(o,r){const s=new jr(Oo,Gs,[],r?function(m){const v={color:dr,string:Et,number:Ve,enum:Et,boolean:Ot,formatted:ni,padding:an,resolvedImage:Me,variableAnchorOffsetCollection:ie};return m.type==="array"?ue(v[m.value]||Ft,m.length):v[m.type]}(r):void 0),h=s.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?zl(new st(h,r)):na(s.errors)}class Kt{constructor(r,s){this.kind=r,this._styleExpression=s,this.isStateDependent=r!=="constant"&&!ra(s.expression)}evaluateWithoutErrorHandling(r,s,h,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,h,m,v,x)}evaluate(r,s,h,m,v,x){return this._styleExpression.evaluate(r,s,h,m,v,x)}}class Jt{constructor(r,s,h,m){this.kind=r,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!ra(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(r,s,h,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,h,m,v,x)}evaluate(r,s,h,m,v,x){return this._styleExpression.evaluate(r,s,h,m,v,x)}interpolationFactor(r,s,h){return this.interpolationType?bi.interpolationFactor(this.interpolationType,r,s,h):0}}function yr(o,r){const s=Tt(o,r);if(s.result==="error")return s;const h=s.value.expression,m=ba(h);if(!m&&!xo(r))return na([new Ee("","data expressions not supported")]);const v=Ws(h,["zoom"]);if(!v&&!Fo(r))return na([new Ee("","zoom expressions not supported")]);const x=vr(h);return x||v?x instanceof Ee?na([x]):x instanceof bi&&!Hs(r)?na([new Ee("",'"interpolate" expressions cannot be used with this property')]):zl(x?new Jt(m?"camera":"composite",s.value,x.labels,x instanceof bi?x.interpolation:void 0):new Kt(m?"constant":"source",s.value)):na([new Ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Or{constructor(r,s){this._parameters=r,this._specification=s,$(this,ls(this._parameters,this._specification))}static deserialize(r){return new Or(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function vr(o){let r=null;if(o instanceof xa)r=vr(o.result);else if(o instanceof Bs){for(const s of o.args)if(r=vr(s),r)break}else(o instanceof Ja||o instanceof bi)&&o.input instanceof li&&o.input.name==="zoom"&&(r=o);return r instanceof Ee||o.eachChild(s=>{const h=vr(s);h instanceof Ee?r=h:!r&&h?r=new Ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&h&&r!==h&&(r=new Ee("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function $r(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!$r(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const un={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function kn(o){if(o==null)return{filter:()=>!0,needGeometry:!1};$r(o)||(o=Pi(o));const r=Tt(o,un);if(r.result==="error")throw new Error(r.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,m)=>r.value.evaluate(s,h,{},m),needGeometry:Ti(o)}}function Un(o,r){return o<r?-1:o>r?1:0}function Ti(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let r=1;r<o.length;r++)if(Ti(o[r]))return!0;return!1}function Pi(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Ji(o[1],o[2],"=="):r==="!="?Pa(Ji(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Ji(o[1],o[2],r):r==="any"?(s=o.slice(1),["any"].concat(s.map(Pi))):r==="all"?["all"].concat(o.slice(1).map(Pi)):r==="none"?["all"].concat(o.slice(1).map(Pi).map(Pa)):r==="in"?Hu(o[1],o.slice(2)):r==="!in"?Pa(Hu(o[1],o.slice(2))):r==="has"?Ta(o[1]):r!=="!has"||Pa(Ta(o[1]));var s}function Ji(o,r,s){switch(o){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,o,r]}}function Hu(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",o,["literal",r.sort(Un)]]:["filter-in-small",o,["literal",r]]}}function Ta(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Pa(o){return["!",o]}function Zs(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const v of o)m+=`${Zs(v)},`;return`${m}]`}const s=Object.keys(o).sort();let h="{";for(let m=0;m<s.length;m++)h+=`${JSON.stringify(s[m])}:${Zs(o[s[m]])},`;return`${h}}`}function Y0(o){let r="";for(const s of wr)r+=`/${Zs(o[s])}`;return r}function Kc(o){const r=o.value;return r?[new k(o.key,r,"constants have been deprecated as of v8")]:[]}function fn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Aa(o){if(Array.isArray(o))return o.map(Aa);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const s in o)r[s]=Aa(o[s]);return r}return fn(o)}function Qi(o){const r=o.key,s=o.value,h=o.valueSpec||{},m=o.objectElementValidators||{},v=o.style,x=o.styleSpec,S=o.validateSpec;let C=[];const F=Fr(s);if(F!=="object")return[new k(r,s,`object expected, ${F} found`)];for(const H in s){const Y=H.split(".")[0],ne=h[Y]||h["*"];let he;if(m[Y])he=m[Y];else if(h[Y])he=S;else if(m["*"])he=m["*"];else{if(!h["*"]){C.push(new k(r,s[H],`unknown property "${H}"`));continue}he=S}C=C.concat(he({key:(r&&`${r}.`)+H,value:s[H],valueSpec:ne,style:v,styleSpec:x,object:s,objectKey:H,validateSpec:S},s))}for(const H in h)m[H]||h[H].required&&h[H].default===void 0&&s[H]===void 0&&C.push(new k(r,s,`missing required property "${H}"`));return C}function Yc(o){const r=o.value,s=o.valueSpec,h=o.style,m=o.styleSpec,v=o.key,x=o.arrayElementValidator||o.validateSpec;if(Fr(r)!=="array")return[new k(v,r,`array expected, ${Fr(r)} found`)];if(s.length&&r.length!==s.length)return[new k(v,r,`array length ${s.length} expected, length ${r.length} found`)];if(s["min-length"]&&r.length<s["min-length"])return[new k(v,r,`array length at least ${s["min-length"]} expected, length ${r.length} found`)];let S={type:s.value,values:s.values};m.$version<7&&(S.function=s.function),Fr(s.value)==="object"&&(S=s.value);let C=[];for(let F=0;F<r.length;F++)C=C.concat(x({array:r,arrayIndex:F,value:r[F],valueSpec:S,validateSpec:o.validateSpec,style:h,styleSpec:m,key:`${v}[${F}]`}));return C}function Nf(o){const r=o.key,s=o.value,h=o.valueSpec;let m=Fr(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new k(r,s,`number expected, ${m} found`)]:"minimum"in h&&s<h.minimum?[new k(r,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new k(r,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Jc(o){const r=o.valueSpec,s=fn(o.value.type);let h,m,v,x={};const S=s!=="categorical"&&o.value.property===void 0,C=!S,F=Fr(o.value.stops)==="array"&&Fr(o.value.stops[0])==="array"&&Fr(o.value.stops[0][0])==="object",H=Qi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(he){if(s==="identity")return[new k(he.key,he.value,'identity function may not have a "stops" property')];let ge=[];const Pe=he.value;return ge=ge.concat(Yc({key:he.key,value:Pe,valueSpec:he.valueSpec,validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec,arrayElementValidator:Y})),Fr(Pe)==="array"&&Pe.length===0&&ge.push(new k(he.key,Pe,"array must have at least one stop")),ge},default:function(he){return he.validateSpec({key:he.key,value:he.value,valueSpec:r,validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec})}}});return s==="identity"&&S&&H.push(new k(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||H.push(new k(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!Hs(o.valueSpec)&&H.push(new k(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(C&&!xo(o.valueSpec)?H.push(new k(o.key,o.value,"property functions not supported")):S&&!Fo(o.valueSpec)&&H.push(new k(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!F||o.value.property!==void 0||H.push(new k(o.key,o.value,'"property" property is required')),H;function Y(he){let ge=[];const Pe=he.value,ke=he.key;if(Fr(Pe)!=="array")return[new k(ke,Pe,`array expected, ${Fr(Pe)} found`)];if(Pe.length!==2)return[new k(ke,Pe,`array length 2 expected, length ${Pe.length} found`)];if(F){if(Fr(Pe[0])!=="object")return[new k(ke,Pe,`object expected, ${Fr(Pe[0])} found`)];if(Pe[0].zoom===void 0)return[new k(ke,Pe,"object stop key must have zoom")];if(Pe[0].value===void 0)return[new k(ke,Pe,"object stop key must have value")];if(v&&v>fn(Pe[0].zoom))return[new k(ke,Pe[0].zoom,"stop zoom values must appear in ascending order")];fn(Pe[0].zoom)!==v&&(v=fn(Pe[0].zoom),m=void 0,x={}),ge=ge.concat(Qi({key:`${ke}[0]`,value:Pe[0],valueSpec:{zoom:{}},validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec,objectElementValidators:{zoom:Nf,value:ne}}))}else ge=ge.concat(ne({key:`${ke}[0]`,value:Pe[0],valueSpec:{},validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec},Pe));return kt(Aa(Pe[1]))?ge.concat([new k(`${ke}[1]`,Pe[1],"expressions are not allowed in function stops.")]):ge.concat(he.validateSpec({key:`${ke}[1]`,value:Pe[1],valueSpec:r,validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec}))}function ne(he,ge){const Pe=Fr(he.value),ke=fn(he.value),De=he.value!==null?he.value:ge;if(h){if(Pe!==h)return[new k(he.key,De,`${Pe} stop domain type must match previous stop domain type ${h}`)]}else h=Pe;if(Pe!=="number"&&Pe!=="string"&&Pe!=="boolean")return[new k(he.key,De,"stop domain value must be a number, string, or boolean")];if(Pe!=="number"&&s!=="categorical"){let et=`number expected, ${Pe} found`;return xo(r)&&s===void 0&&(et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new k(he.key,De,et)]}return s!=="categorical"||Pe!=="number"||isFinite(ke)&&Math.floor(ke)===ke?s!=="categorical"&&Pe==="number"&&m!==void 0&&ke<m?[new k(he.key,De,"stop domain values must appear in ascending order")]:(m=ke,s==="categorical"&&ke in x?[new k(he.key,De,"stop domain values must be unique")]:(x[ke]=!0,[])):[new k(he.key,De,`integer expected, found ${ke}`)]}}function Ia(o){const r=(o.expressionContext==="property"?yr:Tt)(Aa(o.value),o.valueSpec);if(r.result==="error")return r.value.map(h=>new k(`${o.key}${h.key}`,o.value,h.message));const s=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new k(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!ra(s))return[new k(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!ra(s))return[new k(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Ws(s,["zoom","feature-state"]))return[new k(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!ba(s))return[new k(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Dl(o){const r=o.key,s=o.value,h=o.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(fn(s))===-1&&m.push(new k(r,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(fn(s))===-1&&m.push(new k(r,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function Qc(o){return $r(Aa(o.value))?Ia($({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):$f(o)}function $f(o){const r=o.value,s=o.key;if(Fr(r)!=="array")return[new k(s,r,`array expected, ${Fr(r)} found`)];const h=o.styleSpec;let m,v=[];if(r.length<1)return[new k(s,r,"filter array must have at least 1 element")];switch(v=v.concat(Dl({key:`${s}[0]`,value:r[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),fn(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&fn(r[1])==="$type"&&v.push(new k(s,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&v.push(new k(s,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=Fr(r[1]),m!=="string"&&v.push(new k(`${s}[1]`,r[1],`string expected, ${m} found`)));for(let x=2;x<r.length;x++)m=Fr(r[x]),fn(r[1])==="$type"?v=v.concat(Dl({key:`${s}[${x}]`,value:r[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new k(`${s}[${x}]`,r[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)v=v.concat($f({key:`${s}[${x}]`,value:r[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=Fr(r[1]),r.length!==2?v.push(new k(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new k(`${s}[1]`,r[1],`string expected, ${m} found`))}return v}function Uf(o,r){const s=o.key,h=o.validateSpec,m=o.style,v=o.styleSpec,x=o.value,S=o.objectKey,C=v[`${r}_${o.layerType}`];if(!C)return[];const F=S.match(/^(.*)-transition$/);if(r==="paint"&&F&&C[F[1]]&&C[F[1]].transition)return h({key:s,value:x,valueSpec:v.transition,style:m,styleSpec:v});const H=o.valueSpec||C[S];if(!H)return[new k(s,x,`unknown property "${S}"`)];let Y;if(Fr(x)==="string"&&xo(H)&&!H.tokens&&(Y=/^{([^}]+)}$/.exec(x)))return[new k(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Y[1])} }\`.`)];const ne=[];return o.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&ne.push(new k(s,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Sa(Aa(x))&&fn(x.type)==="identity"&&ne.push(new k(s,x,'"text-font" does not support identity functions'))),ne.concat(h({key:o.key,value:x,valueSpec:H,style:m,styleSpec:v,expressionContext:"property",propertyType:r,propertyKey:S}))}function eh(o){return Uf(o,"paint")}function Vf(o){return Uf(o,"layout")}function rm(o){let r=[];const s=o.value,h=o.key,m=o.style,v=o.styleSpec;s.type||s.ref||r.push(new k(h,s,'either "type" or "ref" is required'));let x=fn(s.type);const S=fn(s.ref);if(s.id){const C=fn(s.id);for(let F=0;F<o.arrayIndex;F++){const H=m.layers[F];fn(H.id)===C&&r.push(new k(h,s.id,`duplicate layer id "${s.id}", previously used at line ${H.id.__line__}`))}}if("ref"in s){let C;["type","source","source-layer","filter","layout"].forEach(F=>{F in s&&r.push(new k(h,s[F],`"${F}" is prohibited for ref layers`))}),m.layers.forEach(F=>{fn(F.id)===S&&(C=F)}),C?C.ref?r.push(new k(h,s.ref,"ref cannot reference another ref layer")):x=fn(C.type):r.push(new k(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){const C=m.sources&&m.sources[s.source],F=C&&fn(C.type);C?F==="vector"&&x==="raster"?r.push(new k(h,s.source,`layer "${s.id}" requires a raster source`)):F!=="raster-dem"&&x==="hillshade"?r.push(new k(h,s.source,`layer "${s.id}" requires a raster-dem source`)):F==="raster"&&x!=="raster"?r.push(new k(h,s.source,`layer "${s.id}" requires a vector source`)):F!=="vector"||s["source-layer"]?F==="raster-dem"&&x!=="hillshade"?r.push(new k(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||F==="geojson"&&C.lineMetrics||r.push(new k(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new k(h,s,`layer "${s.id}" must specify a "source-layer"`)):r.push(new k(h,s.source,`source "${s.source}" not found`))}else r.push(new k(h,s,'missing required property "source"'));return r=r.concat(Qi({key:h,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Qc,layout:C=>Qi({layer:s,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":F=>Vf($({layerType:x},F))}}),paint:C=>Qi({layer:s,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":F=>eh($({layerType:x},F))}})}})),r}function us(o){const r=o.value,s=o.key,h=Fr(r);return h!=="string"?[new k(s,r,`string expected, ${h} found`)]:[]}const nm={promoteId:function({key:o,value:r}){if(Fr(r)==="string")return us({key:o,value:r});{const s=[];for(const h in r)s.push(...us({key:`${o}.${h}`,value:r[h]}));return s}}};function Gf(o){const r=o.value,s=o.key,h=o.styleSpec,m=o.style,v=o.validateSpec;if(!r.type)return[new k(s,r,'"type" is required')];const x=fn(r.type);let S;switch(x){case"vector":case"raster":return S=Qi({key:s,value:r,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:nm,validateSpec:v}),S;case"raster-dem":return S=function(C){var F;const H=(F=C.sourceName)!==null&&F!==void 0?F:"",Y=C.value,ne=C.styleSpec,he=ne.source_raster_dem,ge=C.style;let Pe=[];const ke=Fr(Y);if(Y===void 0)return Pe;if(ke!=="object")return Pe.push(new k("source_raster_dem",Y,`object expected, ${ke} found`)),Pe;const De=fn(Y.encoding)==="custom",et=["redFactor","greenFactor","blueFactor","baseShift"],Ze=C.value.encoding?`"${C.value.encoding}"`:"Default";for(const Je in Y)!De&&et.includes(Je)?Pe.push(new k(Je,Y[Je],`In "${H}": "${Je}" is only valid when "encoding" is set to "custom". ${Ze} encoding found`)):he[Je]?Pe=Pe.concat(C.validateSpec({key:Je,value:Y[Je],valueSpec:he[Je],validateSpec:C.validateSpec,style:ge,styleSpec:ne})):Pe.push(new k(Je,Y[Je],`unknown property "${Je}"`));return Pe}({sourceName:s,value:r,style:o.style,styleSpec:h,validateSpec:v}),S;case"geojson":if(S=Qi({key:s,value:r,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:v,objectElementValidators:nm}),r.cluster)for(const C in r.clusterProperties){const[F,H]=r.clusterProperties[C],Y=typeof F=="string"?[F,["accumulated"],["get",C]]:F;S.push(...Ia({key:`${s}.${C}.map`,value:H,validateSpec:v,expressionContext:"cluster-map"})),S.push(...Ia({key:`${s}.${C}.reduce`,value:Y,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return Qi({key:s,value:r,valueSpec:h.source_video,style:m,validateSpec:v,styleSpec:h});case"image":return Qi({key:s,value:r,valueSpec:h.source_image,style:m,validateSpec:v,styleSpec:h});case"canvas":return[new k(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Dl({key:`${s}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:v,styleSpec:h})}}function Wf(o){const r=o.value,s=o.styleSpec,h=s.light,m=o.style;let v=[];const x=Fr(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new k("light",r,`object expected, ${x} found`)]),v;for(const S in r){const C=S.match(/^(.*)-transition$/);v=v.concat(C&&h[C[1]]&&h[C[1]].transition?o.validateSpec({key:S,value:r[S],valueSpec:s.transition,validateSpec:o.validateSpec,style:m,styleSpec:s}):h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new k(S,r[S],`unknown property "${S}"`)])}return v}function Hf(o){const r=o.value,s=o.styleSpec,h=s.sky,m=o.style,v=Fr(r);if(r===void 0)return[];if(v!=="object")return[new k("sky",r,`object expected, ${v} found`)];let x=[];for(const S in r)x=x.concat(h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],style:m,styleSpec:s}):[new k(S,r[S],`unknown property "${S}"`)]);return x}function im(o){const r=o.value,s=o.styleSpec,h=s.terrain,m=o.style;let v=[];const x=Fr(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new k("terrain",r,`object expected, ${x} found`)]),v;for(const S in r)v=v.concat(h[S]?o.validateSpec({key:S,value:r[S],valueSpec:h[S],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new k(S,r[S],`unknown property "${S}"`)]);return v}function om(o){let r=[];const s=o.value,h=o.key;if(Array.isArray(s)){const m=[],v=[];for(const x in s)s[x].id&&m.includes(s[x].id)&&r.push(new k(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),m.push(s[x].id),s[x].url&&v.includes(s[x].url)&&r.push(new k(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),r=r.concat(Qi({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return us({key:h,value:s})}const Zf={"*":()=>[],array:Yc,boolean:function(o){const r=o.value,s=o.key,h=Fr(r);return h!=="boolean"?[new k(s,r,`boolean expected, ${h} found`)]:[]},number:Nf,color:function(o){const r=o.key,s=o.value,h=Fr(s);return h!=="string"?[new k(r,s,`color expected, ${h} found`)]:kr.parse(String(s))?[]:[new k(r,s,`color expected, "${s}" found`)]},constants:Kc,enum:Dl,filter:Qc,function:Jc,layer:rm,object:Qi,source:Gf,light:Wf,sky:Hf,terrain:im,string:us,formatted:function(o){return us(o).length===0?[]:Ia(o)},resolvedImage:function(o){return us(o).length===0?[]:Ia(o)},padding:function(o){const r=o.key,s=o.value;if(Fr(s)==="array"){if(s.length<1||s.length>4)return[new k(r,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let m=[];for(let v=0;v<s.length;v++)m=m.concat(o.validateSpec({key:`${r}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:h}));return m}return Nf({key:r,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,s=o.value,h=Fr(s),m=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new k(r,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat(Dl({key:`${r}[${x}]`,value:s[x],valueSpec:m.layout_symbol["text-anchor"]})),v=v.concat(Yc({key:`${r}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:m}));return v},sprite:om};function Nl(o){const r=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=Nl,s.expression&&Sa(fn(r))?Jc(o):s.expression&&kt(Aa(r))?Ia(o):s.type&&Zf[s.type]?Zf[s.type](o):Qi($({},o,{valueSpec:s.type?h[s.type]:s}))}function qf(o){const r=o.value,s=o.key,h=us(o);return h.length||(r.indexOf("{fontstack}")===-1&&h.push(new k(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&h.push(new k(s,r,'"glyphs" url must include a "{range}" token'))),h}function wo(o,r=it){let s=[];return s=s.concat(Nl({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:Nl,objectElementValidators:{glyphs:qf,"*":()=>[]}})),o.constants&&(s=s.concat(Kc({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:Nl}))),am(s)}function eo(o){return function(r){return o({...r,validateSpec:Nl})}}function am(o){return[].concat(o).sort((r,s)=>r.line-s.line)}function bo(o){return function(...r){return am(o.apply(this,r))}}wo.source=bo(eo(Gf)),wo.sprite=bo(eo(om)),wo.glyphs=bo(eo(qf)),wo.light=bo(eo(Wf)),wo.sky=bo(eo(Hf)),wo.terrain=bo(eo(im)),wo.layer=bo(eo(rm)),wo.filter=bo(eo(Qc)),wo.paintProperty=bo(eo(eh)),wo.layoutProperty=bo(eo(Vf));const Zu=wo,J0=Zu.light,sm=Zu.paintProperty,lm=Zu.layoutProperty;function Xf(o,r){let s=!1;if(r&&r.length)for(const h of r)o.fire(new zt(new Error(h.message))),s=!0;return s}class qu{constructor(r,s,h){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let C=0;C<this.d*this.d;C++){const F=x[3+C],H=x[3+C+1];m.push(F===H?null:x.subarray(F,H))}const S=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=r,this.padding=h,this.scale=s/r,this.uid=0;const v=h/s*r;this.min=-v,this.max=r+v}insert(r,s,h,m,v){this._forEachCell(s,h,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,s,h,m,v,x){this.cells[v].push(x)}query(r,s,h,m,v){const x=this.min,S=this.max;if(r<=x&&s<=x&&S<=h&&S<=m&&!v)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(r,s,h,m,this._queryCell,C,{},v),C}}_queryCell(r,s,h,m,v,x,S,C){const F=this.cells[v];if(F!==null){const H=this.keys,Y=this.bboxes;for(let ne=0;ne<F.length;ne++){const he=F[ne];if(S[he]===void 0){const ge=4*he;(C?C(Y[ge+0],Y[ge+1],Y[ge+2],Y[ge+3]):r<=Y[ge+2]&&s<=Y[ge+3]&&h>=Y[ge+0]&&m>=Y[ge+1])?(S[he]=!0,x.push(H[he])):S[he]=!1}}}}_forEachCell(r,s,h,m,v,x,S,C){const F=this._convertToCellCoord(r),H=this._convertToCellCoord(s),Y=this._convertToCellCoord(h),ne=this._convertToCellCoord(m);for(let he=F;he<=Y;he++)for(let ge=H;ge<=ne;ge++){const Pe=this.d*ge+he;if((!C||C(this._convertFromCellCoord(he),this._convertFromCellCoord(ge),this._convertFromCellCoord(he+1),this._convertFromCellCoord(ge+1)))&&v.call(this,r,s,h,m,Pe,x,S,C))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const m=new Int32Array(s+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=s;for(let x=0;x<r.length;x++){const S=r[x];m[3+x]=v,m.set(S,v),v+=S.length}return m[3+r.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+r.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(r,s){const h=r.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(r){return new qu(r.buffer)}}const cs={};function Ut(o,r,s={}){if(cs[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),cs[o]={klass:r,omit:s.omit||[],shallow:s.shallow||[]}}Ut("Object",Object),Ut("TransferableGridIndex",qu),Ut("Color",kr),Ut("Error",Error),Ut("AJAXError",ot),Ut("ResolvedImage",zi),Ut("StylePropertyFunction",Or),Ut("StyleExpression",st,{omit:["_evaluator"]}),Ut("ZoomDependentExpression",Jt),Ut("ZoomConstantExpression",Kt),Ut("CompoundExpression",li,{omit:["_evaluate"]});for(const o in Oo)Oo[o]._classRegistryKey||Ut(`Expression_${o}`,Oo[o]);function um(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Xu(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error)return o;if(um(o)||J(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return r&&r.push(s.buffer),s}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(Xu(h,r));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${s.name}`);if(!cs[h])throw new Error(`${h} is not registered.`);const m=s.serialize?s.serialize(o,r):{};if(s.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||cs[h].omit.indexOf(v)>=0)continue;const x=o[v];m[v]=cs[h].shallow.indexOf(v)>=0?x:Xu(x,r)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof o)}function ia(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||um(o)||J(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(ia);if(typeof o=="object"){const r=o.$name||"Object";if(!cs[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:s}=cs[r];if(!s)throw new Error(`can't deserialize unregistered class ${r}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const v=o[m];h[m]=cs[r].shallow.indexOf(m)>=0?v:ia(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class cm{constructor(){this.first=!0}update(r,s){const h=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=h,!0))}}const Bt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Kf(o){for(const r of o)if(Yf(r.charCodeAt(0)))return!0;return!1}function Q0(o){for(const r of o)if(!hm(r.charCodeAt(0)))return!1;return!0}function hm(o){return!(Bt.Arabic(o)||Bt["Arabic Supplement"](o)||Bt["Arabic Extended-A"](o)||Bt["Arabic Presentation Forms-A"](o)||Bt["Arabic Presentation Forms-B"](o))}function Yf(o){return!(o!==746&&o!==747&&(o<4352||!(Bt["Bopomofo Extended"](o)||Bt.Bopomofo(o)||Bt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Bt["CJK Compatibility Ideographs"](o)||Bt["CJK Compatibility"](o)||Bt["CJK Radicals Supplement"](o)||Bt["CJK Strokes"](o)||!(!Bt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Bt["CJK Unified Ideographs Extension A"](o)||Bt["CJK Unified Ideographs"](o)||Bt["Enclosed CJK Letters and Months"](o)||Bt["Hangul Compatibility Jamo"](o)||Bt["Hangul Jamo Extended-A"](o)||Bt["Hangul Jamo Extended-B"](o)||Bt["Hangul Jamo"](o)||Bt["Hangul Syllables"](o)||Bt.Hiragana(o)||Bt["Ideographic Description Characters"](o)||Bt.Kanbun(o)||Bt["Kangxi Radicals"](o)||Bt["Katakana Phonetic Extensions"](o)||Bt.Katakana(o)&&o!==12540||!(!Bt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Bt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Bt["Unified Canadian Aboriginal Syllabics"](o)||Bt["Unified Canadian Aboriginal Syllabics Extended"](o)||Bt["Vertical Forms"](o)||Bt["Yijing Hexagram Symbols"](o)||Bt["Yi Syllables"](o)||Bt["Yi Radicals"](o))))}function fm(o){return!(Yf(o)||function(r){return!!(Bt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Bt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Bt["Letterlike Symbols"](r)||Bt["Number Forms"](r)||Bt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Bt["Control Pictures"](r)&&r!==9251||Bt["Optical Character Recognition"](r)||Bt["Enclosed Alphanumerics"](r)||Bt["Geometric Shapes"](r)||Bt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Bt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Bt["CJK Symbols and Punctuation"](r)||Bt.Katakana(r)||Bt["Private Use Area"](r)||Bt["CJK Compatibility Forms"](r)||Bt["Small Form Variants"](r)||Bt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function hs(o){return o>=1424&&o<=2303||Bt["Arabic Presentation Forms-A"](o)||Bt["Arabic Presentation Forms-B"](o)}function dm(o,r){return!(!r&&hs(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Bt.Khmer(o))}function Jf(o){for(const r of o)if(hs(r.charCodeAt(0)))return!0;return!1}const fs=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Kr{constructor(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new cm,this.transition={})}isSupportedScript(r){return function(s,h){for(const m of s)if(!dm(m.charCodeAt(0),h))return!1;return!0}(r,fs.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,s=r-Math.floor(r),h=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class th{constructor(r,s){this.property=r,this.value=s,this.expression=function(h,m){if(Sa(h))return new Or(h,m);if(kt(h)){const v=yr(h,m);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return m.type==="color"&&typeof h=="string"?v=kr.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=ai.parse(h)):v=oi.parse(h),{kind:"constant",evaluate:()=>v}}}(s===void 0?r.specification.default:s,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,s,h){return this.property.possiblyEvaluate(this,r,s,h)}}class $l{constructor(r){this.property=r,this.value=new th(r,void 0)}transitioned(r,s){return new pm(this.property,this.value,s,P({},r.transition,this.transition),r.now)}untransitioned(){return new pm(this.property,this.value,null,{},0)}}class Ul{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return q(this._values[r].value.value)}setValue(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new $l(this._values[r].property)),this._values[r].value=new th(this._values[r].property,s===null?void 0:q(s))}getTransition(r){return q(this._values[r].transition)}setTransition(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new $l(this._values[r].property)),this._values[r].transition=q(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(r[s]=h);const m=this.getTransition(s);m!==void 0&&(r[`${s}-transition`]=m)}return r}transitioned(r,s){const h=new Qf(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(r,s._values[m]);return h}untransitioned(){const r=new Qf(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class pm{constructor(r,s,h,m,v){this.property=r,this.value=s,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(r,s,h){const m=r.now||0,v=this.value.possiblyEvaluate(r,s,h),x=this.prior;if(x){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return x.possiblyEvaluate(r,s,h);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,s,h),v,function(C){if(C<=0)return 0;if(C>=1)return 1;const F=C*C,H=F*C;return 4*(C<.5?H:3*(C-F)+H-.75)}(S))}}return v}}class Qf{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,h){const m=new rh(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(r,s,h);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Ku{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return q(this._values[r].value)}setValue(r,s){this._values[r]=new th(this._values[r].property,s===null?void 0:q(s))}serialize(){const r={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(r[s]=h)}return r}possiblyEvaluate(r,s,h){const m=new rh(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(r,s,h);return m}}class oa{constructor(r,s,h){this.property=r,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,h,m){return this.property.evaluate(this.value,this.parameters,r,s,h,m)}}class rh{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Qt{constructor(r){this.specification=r}possiblyEvaluate(r,s){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(s)}interpolate(r,s,h){const m=Yn[this.specification.type];return m?m(r,s,h):r}}class sr{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,h,m){return new oa(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},h,m)}:r.expression,s)}interpolate(r,s,h){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new oa(this,{kind:"constant",value:void 0},r.parameters);const m=Yn[this.specification.type];if(m){const v=m(r.value.value,s.value.value,h);return new oa(this,{kind:"constant",value:v},r.parameters)}return r}evaluate(r,s,h,m,v,x){return r.kind==="constant"?r.value:r.evaluate(s,h,m,v,x)}}class y extends sr{possiblyEvaluate(r,s,h,m){if(r.value===void 0)return new oa(this,{kind:"constant",value:void 0},s);if(r.expression.kind==="constant"){const v=r.expression.evaluate(s,null,{},h,m),x=r.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(x,x,x,s);return new oa(this,{kind:"constant",value:S},s)}if(r.expression.kind==="camera"){const v=this._calculate(r.expression.evaluate({zoom:s.zoom-1}),r.expression.evaluate({zoom:s.zoom}),r.expression.evaluate({zoom:s.zoom+1}),s);return new oa(this,{kind:"constant",value:v},s)}return new oa(this,r.expression,s)}evaluate(r,s,h,m,v,x){if(r.kind==="source"){const S=r.evaluate(s,h,m,v,x);return this._calculate(S,S,S,s)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(s.zoom)-1},h,m),r.evaluate({zoom:Math.floor(s.zoom)},h,m),r.evaluate({zoom:Math.floor(s.zoom)+1},h,m),s):r.value}_calculate(r,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:h,to:s}}interpolate(r){return r}}class i{constructor(r){this.specification=r}possiblyEvaluate(r,s,h,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const v=r.expression.evaluate(s,null,{},h,m);return this._calculate(v,v,v,s)}return this._calculate(r.expression.evaluate(new Kr(Math.floor(s.zoom-1),s)),r.expression.evaluate(new Kr(Math.floor(s.zoom),s)),r.expression.evaluate(new Kr(Math.floor(s.zoom+1),s)),s)}}_calculate(r,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:h,to:s}}interpolate(r){return r}}class c{constructor(r){this.specification=r}possiblyEvaluate(r,s,h,m){return!!r.expression.evaluate(s,null,{},h,m)}interpolate(){return!1}}class p{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in r){const h=r[s];h.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new th(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new $l(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate({})}}}Ut("DataDrivenProperty",sr),Ut("DataConstantProperty",Qt),Ut("CrossFadedDataDrivenProperty",y),Ut("CrossFadedProperty",i),Ut("ColorRampProperty",c);const g="-transition";class _ extends ur{constructor(r,s){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),s.layout&&(this._unevaluatedLayout=new Ku(s.layout)),s.paint)){this._transitionablePaint=new Ul(s.paint);for(const h in r.paint)this.setPaintProperty(h,r.paint[h],{validate:!1});for(const h in r.layout)this.setLayoutProperty(h,r.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new rh(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,s,h={}){s!=null&&this._validate(lm,`layers.${this.id}.layout.${r}`,r,s,h)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,s):this.visibility=s)}getPaintProperty(r){return r.endsWith(g)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s,h={}){if(s!=null&&this._validate(sm,`layers.${this.id}.paint.${r}`,r,s,h))return!1;if(r.endsWith(g))return this._transitionablePaint.setTransition(r.slice(0,-11),s||void 0),!1;{const m=this._transitionablePaint._values[r],v=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(r,s),this._handleSpecialPaintPropertyUpdate(r);const C=this._transitionablePaint._values[r].value;return C.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(r,S,C)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,s,h){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,s){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Q(r,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(r,s,h,m,v={}){return(!v||v.validate!==!1)&&Xf(this,r.call(Zu,{key:s,layerType:this.type,objectKey:h,value:m,styleSpec:it,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof oa&&xo(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const A={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class M{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class O{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function G(o,r=1){let s=0,h=0;return{members:o.map(m=>{const v=A[m.type].BYTES_PER_ELEMENT,x=s=te(s,Math.max(r,v)),S=m.components||1;return h=Math.max(h,v),s+=v*S,{name:m.name,type:m.type,components:S,offset:x}}),size:te(s,Math.max(h,r)),alignment:r}}function te(o,r){return Math.ceil(o/r)*r}class ee extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.int16[m+0]=s,this.int16[m+1]=h,r}}ee.prototype.bytesPerElement=4,Ut("StructArrayLayout2i4",ee);class me extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const v=3*r;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=m,r}}me.prototype.bytesPerElement=6,Ut("StructArrayLayout3i6",me);class be extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,s,h,m)}emplace(r,s,h,m,v){const x=4*r;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=m,this.int16[x+3]=v,r}}be.prototype.bytesPerElement=8,Ut("StructArrayLayout4i8",be);class Ae extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,v,x)}emplace(r,s,h,m,v,x,S){const C=6*r;return this.int16[C+0]=s,this.int16[C+1]=h,this.int16[C+2]=m,this.int16[C+3]=v,this.int16[C+4]=x,this.int16[C+5]=S,r}}Ae.prototype.bytesPerElement=12,Ut("StructArrayLayout2i4i12",Ae);class ze extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,v,x)}emplace(r,s,h,m,v,x,S){const C=4*r,F=8*r;return this.int16[C+0]=s,this.int16[C+1]=h,this.uint8[F+4]=m,this.uint8[F+5]=v,this.uint8[F+6]=x,this.uint8[F+7]=S,r}}ze.prototype.bytesPerElement=8,Ut("StructArrayLayout2i4ub8",ze);class Ce extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.float32[m+0]=s,this.float32[m+1]=h,r}}Ce.prototype.bytesPerElement=8,Ut("StructArrayLayout2f8",Ce);class Ge extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,v,x,S,C,F,H){const Y=this.length;return this.resize(Y+1),this.emplace(Y,r,s,h,m,v,x,S,C,F,H)}emplace(r,s,h,m,v,x,S,C,F,H,Y){const ne=10*r;return this.uint16[ne+0]=s,this.uint16[ne+1]=h,this.uint16[ne+2]=m,this.uint16[ne+3]=v,this.uint16[ne+4]=x,this.uint16[ne+5]=S,this.uint16[ne+6]=C,this.uint16[ne+7]=F,this.uint16[ne+8]=H,this.uint16[ne+9]=Y,r}}Ge.prototype.bytesPerElement=20,Ut("StructArrayLayout10ui20",Ge);class Ke extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,v,x,S,C,F,H,Y,ne){const he=this.length;return this.resize(he+1),this.emplace(he,r,s,h,m,v,x,S,C,F,H,Y,ne)}emplace(r,s,h,m,v,x,S,C,F,H,Y,ne,he){const ge=12*r;return this.int16[ge+0]=s,this.int16[ge+1]=h,this.int16[ge+2]=m,this.int16[ge+3]=v,this.uint16[ge+4]=x,this.uint16[ge+5]=S,this.uint16[ge+6]=C,this.uint16[ge+7]=F,this.int16[ge+8]=H,this.int16[ge+9]=Y,this.int16[ge+10]=ne,this.int16[ge+11]=he,r}}Ke.prototype.bytesPerElement=24,Ut("StructArrayLayout4i4ui4i24",Ke);class Re extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const v=3*r;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=m,r}}Re.prototype.bytesPerElement=12,Ut("StructArrayLayout3f12",Re);class Ye extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}Ye.prototype.bytesPerElement=4,Ut("StructArrayLayout1ul4",Ye);class rt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,v,x,S,C,F){const H=this.length;return this.resize(H+1),this.emplace(H,r,s,h,m,v,x,S,C,F)}emplace(r,s,h,m,v,x,S,C,F,H){const Y=10*r,ne=5*r;return this.int16[Y+0]=s,this.int16[Y+1]=h,this.int16[Y+2]=m,this.int16[Y+3]=v,this.int16[Y+4]=x,this.int16[Y+5]=S,this.uint32[ne+3]=C,this.uint16[Y+8]=F,this.uint16[Y+9]=H,r}}rt.prototype.bytesPerElement=20,Ut("StructArrayLayout6i1ul2ui20",rt);class at extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,v,x)}emplace(r,s,h,m,v,x,S){const C=6*r;return this.int16[C+0]=s,this.int16[C+1]=h,this.int16[C+2]=m,this.int16[C+3]=v,this.int16[C+4]=x,this.int16[C+5]=S,r}}at.prototype.bytesPerElement=12,Ut("StructArrayLayout2i2i2i12",at);class mt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,h,m,v)}emplace(r,s,h,m,v,x){const S=4*r,C=8*r;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=m,this.int16[C+6]=v,this.int16[C+7]=x,r}}mt.prototype.bytesPerElement=16,Ut("StructArrayLayout2f1f2i16",mt);class bt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,r,s,h,m,v,x)}emplace(r,s,h,m,v,x,S){const C=16*r,F=4*r,H=8*r;return this.uint8[C+0]=s,this.uint8[C+1]=h,this.float32[F+1]=m,this.float32[F+2]=v,this.int16[H+6]=x,this.int16[H+7]=S,r}}bt.prototype.bytesPerElement=16,Ut("StructArrayLayout2ub2f2i16",bt);class Nt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const v=3*r;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=m,r}}Nt.prototype.bytesPerElement=6,Ut("StructArrayLayout3ui6",Nt);class $t extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m,v,x,S,C,F,H,Y,ne,he,ge,Pe,ke,De){const et=this.length;return this.resize(et+1),this.emplace(et,r,s,h,m,v,x,S,C,F,H,Y,ne,he,ge,Pe,ke,De)}emplace(r,s,h,m,v,x,S,C,F,H,Y,ne,he,ge,Pe,ke,De,et){const Ze=24*r,Je=12*r,dt=48*r;return this.int16[Ze+0]=s,this.int16[Ze+1]=h,this.uint16[Ze+2]=m,this.uint16[Ze+3]=v,this.uint32[Je+2]=x,this.uint32[Je+3]=S,this.uint32[Je+4]=C,this.uint16[Ze+10]=F,this.uint16[Ze+11]=H,this.uint16[Ze+12]=Y,this.float32[Je+7]=ne,this.float32[Je+8]=he,this.uint8[dt+36]=ge,this.uint8[dt+37]=Pe,this.uint8[dt+38]=ke,this.uint32[Je+10]=De,this.int16[Ze+22]=et,r}}$t.prototype.bytesPerElement=48,Ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",$t);class St extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m,v,x,S,C,F,H,Y,ne,he,ge,Pe,ke,De,et,Ze,Je,dt,gt,Dt,Xt,jt,Ct,Vt,er){const Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,r,s,h,m,v,x,S,C,F,H,Y,ne,he,ge,Pe,ke,De,et,Ze,Je,dt,gt,Dt,Xt,jt,Ct,Vt,er)}emplace(r,s,h,m,v,x,S,C,F,H,Y,ne,he,ge,Pe,ke,De,et,Ze,Je,dt,gt,Dt,Xt,jt,Ct,Vt,er,Lt){const _t=32*r,Zt=16*r;return this.int16[_t+0]=s,this.int16[_t+1]=h,this.int16[_t+2]=m,this.int16[_t+3]=v,this.int16[_t+4]=x,this.int16[_t+5]=S,this.int16[_t+6]=C,this.int16[_t+7]=F,this.uint16[_t+8]=H,this.uint16[_t+9]=Y,this.uint16[_t+10]=ne,this.uint16[_t+11]=he,this.uint16[_t+12]=ge,this.uint16[_t+13]=Pe,this.uint16[_t+14]=ke,this.uint16[_t+15]=De,this.uint16[_t+16]=et,this.uint16[_t+17]=Ze,this.uint16[_t+18]=Je,this.uint16[_t+19]=dt,this.uint16[_t+20]=gt,this.uint16[_t+21]=Dt,this.uint16[_t+22]=Xt,this.uint32[Zt+12]=jt,this.float32[Zt+13]=Ct,this.float32[Zt+14]=Vt,this.uint16[_t+30]=er,this.uint16[_t+31]=Lt,r}}St.prototype.bytesPerElement=64,Ut("StructArrayLayout8i15ui1ul2f2ui64",St);class Pt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}Pt.prototype.bytesPerElement=4,Ut("StructArrayLayout1f4",Pt);class Wt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const v=3*r;return this.uint16[6*r+0]=s,this.float32[v+1]=h,this.float32[v+2]=m,r}}Wt.prototype.bytesPerElement=12,Ut("StructArrayLayout1ui2f12",Wt);class mr extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,r,s,h)}emplace(r,s,h,m){const v=4*r;return this.uint32[2*r+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=m,r}}mr.prototype.bytesPerElement=8,Ut("StructArrayLayout1ul2ui8",mr);class It extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const h=this.length;return this.resize(h+1),this.emplace(h,r,s)}emplace(r,s,h){const m=2*r;return this.uint16[m+0]=s,this.uint16[m+1]=h,r}}It.prototype.bytesPerElement=4,Ut("StructArrayLayout2ui4",It);class Rt extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}Rt.prototype.bytesPerElement=2,Ut("StructArrayLayout1ui2",Rt);class hr extends O{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,r,s,h,m)}emplace(r,s,h,m,v){const x=4*r;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=m,this.float32[x+3]=v,r}}hr.prototype.bytesPerElement=16,Ut("StructArrayLayout4f16",hr);class tn extends M{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}tn.prototype.size=20;class Sr extends rt{get(r){return new tn(this,r)}}Ut("CollisionBoxArray",Sr);class Ir extends M{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ir.prototype.size=48;class rn extends $t{get(r){return new Ir(this,r)}}Ut("PlacedSymbolArray",rn);class ui extends M{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ui.prototype.size=64;class Ro extends St{get(r){return new ui(this,r)}}Ut("SymbolInstanceArray",Ro);class nn extends Pt{getoffsetX(r){return this.float32[1*r+0]}}Ut("GlyphOffsetArray",nn);class Ni extends me{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}Ut("SymbolLineVertexArray",Ni);class Ai extends M{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ai.prototype.size=12;class ci extends Wt{get(r){return new Ai(this,r)}}Ut("TextAnchorOffsetArray",ci);class hi extends M{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}hi.prototype.size=8;class jo extends mr{get(r){return new hi(this,r)}}Ut("FeatureIndexArray",jo);class qs extends ee{}class nh extends ee{}class Vl extends ee{}class Xs extends Ae{}class ih extends ze{}class ed extends Ce{}class Jn extends Ge{}class Lo extends Ke{}class ds extends Re{}class Gl extends Ye{}class fi extends at{}class di extends bt{}class qn extends Nt{}class cn extends It{}const Wl=G([{name:"a_pos",components:2,type:"Int16"}],4),{members:td}=Wl;class Vn{constructor(r=[]){this.segments=r}prepareSegment(r,s,h,m){let v=this.segments[this.segments.length-1];return r>Vn.MAX_VERTEX_ARRAY_LENGTH&&ye(`Max vertices per segment is ${Vn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!v||v.vertexLength+r>Vn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,h,m){return new Vn([{vertexOffset:r,primitiveOffset:s,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function mm(o,r){return 256*(o=X(Math.floor(o),0,255))+X(Math.floor(r),0,255)}Vn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ut("SegmentVector",Vn);const oh=G([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ah={exports:{}},ps={exports:{}};ps.exports=function(o,r){var s,h,m,v,x,S,C,F;for(h=o.length-(s=3&o.length),m=r,x=3432918353,S=461845907,F=0;F<h;)C=255&o.charCodeAt(F)|(255&o.charCodeAt(++F))<<8|(255&o.charCodeAt(++F))<<16|(255&o.charCodeAt(++F))<<24,++F,m=27492+(65535&(v=5*(65535&(m=(m^=C=(65535&(C=(C=(65535&C)*x+(((C>>>16)*x&65535)<<16)&4294967295)<<15|C>>>17))*S+(((C>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(C=0,s){case 3:C^=(255&o.charCodeAt(F+2))<<16;case 2:C^=(255&o.charCodeAt(F+1))<<8;case 1:m^=C=(65535&(C=(C=(65535&(C^=255&o.charCodeAt(F)))*x+(((C>>>16)*x&65535)<<16)&4294967295)<<15|C>>>17))*S+(((C>>>16)*S&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var gm=ps.exports,rd={exports:{}};rd.exports=function(o,r){for(var s,h=o.length,m=r^h,v=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:m^=(255&o.charCodeAt(v+2))<<16;case 2:m^=(255&o.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var nd=gm,id=rd.exports;ah.exports=nd,ah.exports.murmur3=nd,ah.exports.murmur2=id;var sh=w(ah.exports);class Hl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,s,h,m){this.ids.push(E2(r)),this.positions.push(s,h,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=E2(r);let h=0,m=this.ids.length-1;for(;h<m;){const x=h+m>>1;this.ids[x]>=s?m=x:h=x+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(r,s){const h=new Float64Array(r.ids),m=new Uint32Array(r.positions);return ev(h,m,0,h.length-1),s&&s.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(r){const s=new Hl;return s.ids=r.ids,s.positions=r.positions,s.indexed=!0,s}}function E2(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:sh(String(o))}function ev(o,r,s,h){for(;s<h;){const m=o[s+h>>1];let v=s-1,x=h+1;for(;;){do v++;while(o[v]<m);do x--;while(o[x]>m);if(v>=x)break;ym(o,v,x),ym(r,3*v,3*x),ym(r,3*v+1,3*x+1),ym(r,3*v+2,3*x+2)}x-s<h-x?(ev(o,r,s,x),s=x+1):(ev(o,r,x+1,h),h=x)}}function ym(o,r,s){const h=o[r];o[r]=o[s],o[s]=h}Ut("FeaturePositionMap",Hl);class Yu{constructor(r,s){this.gl=r.gl,this.location=s}}class vm extends Yu{constructor(r,s){super(r,s),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class T2 extends Yu{constructor(r,s){super(r,s),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class P2 extends Yu{constructor(r,s){super(r,s),this.current=kr.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const i4=new Float32Array(16);function tv(o){return[mm(255*o.r,255*o.g),mm(255*o.b,255*o.a)]}class od{constructor(r,s,h){this.value=r,this.uniformNames=s.map(m=>`u_${m}`),this.type=h}setUniform(r,s,h){r.set(h.constantOr(this.value))}getBinding(r,s,h){return this.type==="color"?new P2(r,s):new vm(r,s)}}class lh{constructor(r,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=r.tlbr}setUniform(r,s,h,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&r.set(v)}getBinding(r,s,h){return h.substr(0,9)==="u_pattern"?new T2(r,s):new vm(r,s)}}class Ks{constructor(r,s,h,m){this.expression=r,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(r,s,h,m,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new Kr(0),s,{},m,[],v);this.paintVertexArray.resize(r),this._setPaintValue(x,r,S)}updatePaintArray(r,s,h,m){const v=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(r,s,v)}_setPaintValue(r,s,h){if(this.type==="color"){const m=tv(h);for(let v=r;v<s;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=r;m<s;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ca{constructor(r,s,h,m,v,x){this.expression=r,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,s,h,m,v){const x=this.expression.evaluate(new Kr(this.zoom),s,{},m,[],v),S=this.expression.evaluate(new Kr(this.zoom+1),s,{},m,[],v),C=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(C,r,x,S)}updatePaintArray(r,s,h,m){const v=this.expression.evaluate({zoom:this.zoom},h,m),x=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(r,s,v,x)}_setPaintValue(r,s,h,m){if(this.type==="color"){const v=tv(h),x=tv(m);for(let S=r;S<s;S++)this.paintVertexArray.emplace(S,v[0],v[1],x[0],x[1])}else{for(let v=r;v<s;v++)this.paintVertexArray.emplace(v,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,m=X(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,s,h){return new vm(r,s)}}class Zl{constructor(r,s,h,m,v,x){this.expression=r,this.type=s,this.useIntegerZoom=h,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(r,s,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(r,s,h,m,v){this._setPaintValues(r,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(r,s,h,m){if(!m||!h)return;const{min:v,mid:x,max:S}=h,C=m[v],F=m[x],H=m[S];if(C&&F&&H)for(let Y=r;Y<s;Y++)this.zoomInPaintVertexArray.emplace(Y,F.tl[0],F.tl[1],F.br[0],F.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],F.pixelRatio,C.pixelRatio),this.zoomOutPaintVertexArray.emplace(Y,F.tl[0],F.tl[1],F.br[0],F.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],F.pixelRatio,H.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,oh.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,oh.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class A2{constructor(r,s,h){this.binders={},this._buffers=[];const m=[];for(const v in r.paint._values){if(!h(v))continue;const x=r.paint.get(v);if(!(x instanceof oa&&xo(x.property.specification)))continue;const S=o4(v,r.type),C=x.value,F=x.property.specification.type,H=x.property.useIntegerZoom,Y=x.property.specification["property-type"],ne=Y==="cross-faded"||Y==="cross-faded-data-driven";if(C.kind==="constant")this.binders[v]=ne?new lh(C.value,S):new od(C.value,S,F),m.push(`/u_${v}`);else if(C.kind==="source"||ne){const he=I2(v,F,"source");this.binders[v]=ne?new Zl(C,F,H,s,he,r.id):new Ks(C,S,F,he),m.push(`/a_${v}`)}else{const he=I2(v,F,"composite");this.binders[v]=new Ca(C,S,F,H,s,he),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof Ks||s instanceof Ca?s.maxValue:0}populatePaintArrays(r,s,h,m,v){for(const x in this.binders){const S=this.binders[x];(S instanceof Ks||S instanceof Ca||S instanceof Zl)&&S.populatePaintArray(r,s,h,m,v)}}setConstantPatternPositions(r,s){for(const h in this.binders){const m=this.binders[h];m instanceof lh&&m.setConstantPatternPositions(r,s)}}updatePaintArrays(r,s,h,m,v){let x=!1;for(const S in r){const C=s.getPositions(S);for(const F of C){const H=h.feature(F.index);for(const Y in this.binders){const ne=this.binders[Y];if((ne instanceof Ks||ne instanceof Ca||ne instanceof Zl)&&ne.expression.isStateDependent===!0){const he=m.paint.get(Y);ne.expression=he.value,ne.updatePaintArray(F.start,F.end,H,r[S],v),x=!0}}}}return x}defines(){const r=[];for(const s in this.binders){const h=this.binders[s];(h instanceof od||h instanceof lh)&&r.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Ks||h instanceof Ca)for(let m=0;m<h.paintVertexAttributes.length;m++)r.push(h.paintVertexAttributes[m].name);else if(h instanceof Zl)for(let m=0;m<oh.members.length;m++)r.push(oh.members[m].name)}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof od||h instanceof lh||h instanceof Ca)for(const m of h.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,s){const h=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof od||v instanceof lh||v instanceof Ca){for(const x of v.uniformNames)if(s[x]){const S=v.getBinding(r,s[x],x);h.push({name:x,property:m,binding:S})}}}return h}setUniforms(r,s,h,m){for(const{name:v,property:x,binding:S}of s)this.binders[x].setUniform(S,m,h.get(x),v)}updatePaintBuffers(r){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(r&&h instanceof Zl){const m=r.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof Ks||h instanceof Ca)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(r){for(const s in this.binders){const h=this.binders[s];(h instanceof Ks||h instanceof Ca||h instanceof Zl)&&h.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof Ks||s instanceof Ca||s instanceof Zl)&&s.destroy()}}}class Ju{constructor(r,s,h=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new A2(m,s,h);this.needsUpload=!1,this._featureMap=new Hl,this._bufferOffset=0}populatePaintArrays(r,s,h,m,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(r,s,m,v,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,h,m){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(r,this._featureMap,s,v,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function o4(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function I2(o,r,s){const h={color:{source:Ce,composite:hr},number:{source:Pt,composite:Ce}},m=function(v){return{"line-pattern":{source:Jn,composite:Jn},"fill-pattern":{source:Jn,composite:Jn},"fill-extrusion-pattern":{source:Jn,composite:Jn}}[v]}(o);return m&&m[s]||h[r][s]}Ut("ConstantBinder",od),Ut("CrossFadedConstantBinder",lh),Ut("SourceExpressionBinder",Ks),Ut("CrossFadedCompositeBinder",Zl),Ut("CompositeExpressionBinder",Ca),Ut("ProgramConfiguration",A2,{omit:["_buffers"]}),Ut("ProgramConfigurationSet",Ju);const On=8192,rv=Math.pow(2,14)-1,C2=-rv-1;function Qu(o){const r=On/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const m=s[h];for(let v=0;v<m.length;v++){const x=m[v],S=Math.round(x.x*r),C=Math.round(x.y*r);x.x=X(S,C2,rv),x.y=X(C,C2,rv),(S<x.x||S>x.x+1||C<x.y||C>x.y+1)&&ye("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function ec(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Qu(o):[]}}function _m(o,r,s,h,m){o.emplaceBack(2*r+(h+1)/2,2*s+(m+1)/2)}class nv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new nh,this.indexArray=new qn,this.segments=new Vn,this.programConfigurations=new Ju(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){const m=this.layers[0],v=[];let x=null,S=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:C,id:F,index:H,sourceLayerIndex:Y}of r){const ne=this.layers[0]._featureFilter.needGeometry,he=ec(C,ne);if(!this.layers[0]._featureFilter.filter(new Kr(this.zoom),he,h))continue;const ge=S?x.evaluate(he,{},h):void 0,Pe={id:F,properties:C.properties,type:C.type,sourceLayerIndex:Y,index:H,geometry:ne?he.geometry:Qu(C),patterns:{},sortKey:ge};v.push(Pe)}S&&v.sort((C,F)=>C.sortKey-F.sortKey);for(const C of v){const{geometry:F,index:H,sourceLayerIndex:Y}=C,ne=r[H].feature;this.addFeature(C,F,H,h),s.featureIndex.insert(ne,F,H,Y,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,td),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,h,m){for(const v of s)for(const x of v){const S=x.x,C=x.y;if(S<0||S>=On||C<0||C>=On)continue;const F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),H=F.vertexLength;_m(this.layoutVertexArray,S,C,-1,-1),_m(this.layoutVertexArray,S,C,1,-1),_m(this.layoutVertexArray,S,C,1,1),_m(this.layoutVertexArray,S,C,-1,1),this.indexArray.emplaceBack(H,H+1,H+2),this.indexArray.emplaceBack(H,H+3,H+2),F.vertexLength+=4,F.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{},m)}}function M2(o,r){for(let s=0;s<o.length;s++)if(uh(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(uh(o,r[s]))return!0;return!!iv(o,r)}function a4(o,r,s){return!!uh(o,r)||!!ov(r,o,s)}function k2(o,r){if(o.length===1)return F2(r,o[0]);for(let s=0;s<r.length;s++){const h=r[s];for(let m=0;m<h.length;m++)if(uh(o,h[m]))return!0}for(let s=0;s<o.length;s++)if(F2(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(iv(o,r[s]))return!0;return!1}function s4(o,r,s){if(o.length>1){if(iv(o,r))return!0;for(let h=0;h<r.length;h++)if(ov(r[h],o,s))return!0}for(let h=0;h<o.length;h++)if(ov(o[h],r,s))return!0;return!1}function iv(o,r){if(o.length===0||r.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],m=o[s+1];for(let v=0;v<r.length-1;v++)if(l4(h,m,r[v],r[v+1]))return!0}return!1}function l4(o,r,s,h){return fe(o,s,h)!==fe(r,s,h)&&fe(o,r,s)!==fe(o,r,h)}function ov(o,r,s){const h=s*s;if(r.length===1)return o.distSqr(r[0])<h;for(let m=1;m<r.length;m++)if(O2(o,r[m-1],r[m])<h)return!0;return!1}function O2(o,r,s){const h=r.distSqr(s);if(h===0)return o.distSqr(r);const m=((o.x-r.x)*(s.x-r.x)+(o.y-r.y)*(s.y-r.y))/h;return o.distSqr(m<0?r:m>1?s:s.sub(r)._mult(m)._add(r))}function F2(o,r){let s,h,m,v=!1;for(let x=0;x<o.length;x++){s=o[x];for(let S=0,C=s.length-1;S<s.length;C=S++)h=s[S],m=s[C],h.y>r.y!=m.y>r.y&&r.x<(m.x-h.x)*(r.y-h.y)/(m.y-h.y)+h.x&&(v=!v)}return v}function uh(o,r){let s=!1;for(let h=0,m=o.length-1;h<o.length;m=h++){const v=o[h],x=o[m];v.y>r.y!=x.y>r.y&&r.x<(x.x-v.x)*(r.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function u4(o,r,s){const h=s[0],m=s[2];if(o.x<h.x&&r.x<h.x||o.x>m.x&&r.x>m.x||o.y<h.y&&r.y<h.y||o.y>m.y&&r.y>m.y)return!1;const v=fe(o,r,s[0]);return v!==fe(o,r,s[1])||v!==fe(o,r,s[2])||v!==fe(o,r,s[3])}function ad(o,r,s){const h=r.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(r.id).getMaxValue(o)}function xm(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function wm(o,r,s,h,m){if(!r[0]&&!r[1])return o;const v=b.convert(r)._mult(m);s==="viewport"&&v._rotate(-h);const x=[];for(let S=0;S<o.length;S++)x.push(o[S].sub(v));return x}let R2,j2;Ut("CircleBucket",nv,{omit:["layers"]});var c4={get paint(){return j2=j2||new p({"circle-radius":new sr(it.paint_circle["circle-radius"]),"circle-color":new sr(it.paint_circle["circle-color"]),"circle-blur":new sr(it.paint_circle["circle-blur"]),"circle-opacity":new sr(it.paint_circle["circle-opacity"]),"circle-translate":new Qt(it.paint_circle["circle-translate"]),"circle-translate-anchor":new Qt(it.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qt(it.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qt(it.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sr(it.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sr(it.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sr(it.paint_circle["circle-stroke-opacity"])})},get layout(){return R2=R2||new p({"circle-sort-key":new sr(it.layout_circle["circle-sort-key"])})}},$i=1e-6,ch=typeof Float32Array<"u"?Float32Array:Array;function av(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function L2(o,r,s){var h=r[0],m=r[1],v=r[2],x=r[3],S=r[4],C=r[5],F=r[6],H=r[7],Y=r[8],ne=r[9],he=r[10],ge=r[11],Pe=r[12],ke=r[13],De=r[14],et=r[15],Ze=s[0],Je=s[1],dt=s[2],gt=s[3];return o[0]=Ze*h+Je*S+dt*Y+gt*Pe,o[1]=Ze*m+Je*C+dt*ne+gt*ke,o[2]=Ze*v+Je*F+dt*he+gt*De,o[3]=Ze*x+Je*H+dt*ge+gt*et,o[4]=(Ze=s[4])*h+(Je=s[5])*S+(dt=s[6])*Y+(gt=s[7])*Pe,o[5]=Ze*m+Je*C+dt*ne+gt*ke,o[6]=Ze*v+Je*F+dt*he+gt*De,o[7]=Ze*x+Je*H+dt*ge+gt*et,o[8]=(Ze=s[8])*h+(Je=s[9])*S+(dt=s[10])*Y+(gt=s[11])*Pe,o[9]=Ze*m+Je*C+dt*ne+gt*ke,o[10]=Ze*v+Je*F+dt*he+gt*De,o[11]=Ze*x+Je*H+dt*ge+gt*et,o[12]=(Ze=s[12])*h+(Je=s[13])*S+(dt=s[14])*Y+(gt=s[15])*Pe,o[13]=Ze*m+Je*C+dt*ne+gt*ke,o[14]=Ze*v+Je*F+dt*he+gt*De,o[15]=Ze*x+Je*H+dt*ge+gt*et,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var sd,h4=L2;function bm(o,r,s){var h=r[0],m=r[1],v=r[2],x=r[3];return o[0]=s[0]*h+s[4]*m+s[8]*v+s[12]*x,o[1]=s[1]*h+s[5]*m+s[9]*v+s[13]*x,o[2]=s[2]*h+s[6]*m+s[10]*v+s[14]*x,o[3]=s[3]*h+s[7]*m+s[11]*v+s[15]*x,o}sd=new ch(4),ch!=Float32Array&&(sd[0]=0,sd[1]=0,sd[2]=0,sd[3]=0);class f4 extends _{constructor(r){super(r,c4)}createBucket(r){return new nv(r)}queryRadius(r){const s=r;return ad("circle-radius",this,s)+ad("circle-stroke-width",this,s)+xm(this.paint.get("circle-translate"))}queryIntersectsFeature(r,s,h,m,v,x,S,C){const F=wm(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),H=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),Y=this.paint.get("circle-pitch-alignment")==="map",ne=Y?F:function(ge,Pe){return ge.map(ke=>z2(ke,Pe))}(F,C),he=Y?H*S:H;for(const ge of m)for(const Pe of ge){const ke=Y?Pe:z2(Pe,C);let De=he;const et=bm([],[Pe.x,Pe.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?De*=et[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(De*=x.cameraToCenterDistance/et[3]),a4(ne,ke,De))return!0}return!1}}function z2(o,r){const s=bm([],[o.x,o.y,0,1],r);return new b(s[0]/s[3],s[1]/s[3])}class B2 extends nv{}let D2;Ut("HeatmapBucket",B2,{omit:["layers"]});var d4={get paint(){return D2=D2||new p({"heatmap-radius":new sr(it.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sr(it.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Qt(it.paint_heatmap["heatmap-intensity"]),"heatmap-color":new c(it.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qt(it.paint_heatmap["heatmap-opacity"])})}};function sv(o,{width:r,height:s},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*s*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*s*h}`)}else m=new Uint8Array(r*s*h);return o.width=r,o.height=s,o.data=m,o}function N2(o,{width:r,height:s},h){if(r===o.width&&s===o.height)return;const m=sv({},{width:r,height:s},h);lv(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,s)},h),o.width=r,o.height=s,o.data=m.data}function lv(o,r,s,h,m,v){if(m.width===0||m.height===0)return r;if(m.width>o.width||m.height>o.height||s.x>o.width-m.width||s.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||h.x>r.width-m.width||h.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,S=r.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<m.height;C++){const F=((s.y+C)*o.width+s.x)*v,H=((h.y+C)*r.width+h.x)*v;for(let Y=0;Y<m.width*v;Y++)S[H+Y]=x[F+Y]}return r}class ld{constructor(r,s){sv(this,r,1,s)}resize(r){N2(this,r,1)}clone(){return new ld({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,h,m,v){lv(r,s,h,m,v,1)}}class zo{constructor(r,s){sv(this,r,4,s)}resize(r){N2(this,r,4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new zo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,h,m,v){lv(r,s,h,m,v,4)}}function $2(o){const r={},s=o.resolution||256,h=o.clips?o.clips.length:1,m=o.image||new zo({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,S,C)=>{r[o.evaluationKey]=C;const F=o.expression.evaluate(r);m.data[x+S+0]=Math.floor(255*F.r/F.a),m.data[x+S+1]=Math.floor(255*F.g/F.a),m.data[x+S+2]=Math.floor(255*F.b/F.a),m.data[x+S+3]=Math.floor(255*F.a)};if(o.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let C=0,F=0;C<s;C++,F+=4){const H=C/(s-1),{start:Y,end:ne}=o.clips[x];v(S,F,Y*(1-H)+ne*H)}else for(let x=0,S=0;x<s;x++,S+=4)v(0,S,x/(s-1));return m}Ut("AlphaImage",ld),Ut("RGBAImage",zo);class p4 extends _{createBucket(r){return new B2(r)}constructor(r){super(r,d4),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=$2({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let U2;var m4={get paint(){return U2=U2||new p({"hillshade-illumination-direction":new Qt(it.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Qt(it.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qt(it.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qt(it.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qt(it.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qt(it.paint_hillshade["hillshade-accent-color"])})}};class g4 extends _{constructor(r){super(r,m4)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const y4=G([{name:"a_pos",components:2,type:"Int16"}],4),{members:v4}=y4;var uv={exports:{}};function Sm(o,r,s){s=s||2;var h,m,v,x,S,C,F,H=r&&r.length,Y=H?r[0]*s:o.length,ne=V2(o,0,Y,s,!0),he=[];if(!ne||ne.next===ne.prev)return he;if(H&&(ne=function(Pe,ke,De,et){var Ze,Je,dt,gt=[];for(Ze=0,Je=ke.length;Ze<Je;Ze++)(dt=V2(Pe,ke[Ze]*et,Ze<Je-1?ke[Ze+1]*et:Pe.length,et,!1))===dt.next&&(dt.steiner=!0),gt.push(P4(dt));for(gt.sort(S4),Ze=0;Ze<gt.length;Ze++)De=E4(gt[Ze],De);return De}(o,r,ne,s)),o.length>80*s){h=v=o[0],m=x=o[1];for(var ge=s;ge<Y;ge+=s)(S=o[ge])<h&&(h=S),(C=o[ge+1])<m&&(m=C),S>v&&(v=S),C>x&&(x=C);F=(F=Math.max(v-h,x-m))!==0?32767/F:0}return ud(ne,he,s,h,m,F,0),he}function V2(o,r,s,h,m){var v,x;if(m===fv(o,r,s,h)>0)for(v=r;v<s;v+=h)x=H2(v,o[v],o[v+1],x);else for(v=s-h;v>=r;v-=h)x=H2(v,o[v],o[v+1],x);return x&&Em(x,x.next)&&(hd(x),x=x.next),x}function tc(o,r){if(!o)return o;r||(r=o);var s,h=o;do if(s=!1,h.steiner||!Em(h,h.next)&&Tn(h.prev,h,h.next)!==0)h=h.next;else{if(hd(h),(h=r=h.prev)===h.next)break;s=!0}while(s||h!==r);return r}function ud(o,r,s,h,m,v,x){if(o){!x&&v&&function(H,Y,ne,he){var ge=H;do ge.z===0&&(ge.z=cv(ge.x,ge.y,Y,ne,he)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==H);ge.prevZ.nextZ=null,ge.prevZ=null,function(Pe){var ke,De,et,Ze,Je,dt,gt,Dt,Xt=1;do{for(De=Pe,Pe=null,Je=null,dt=0;De;){for(dt++,et=De,gt=0,ke=0;ke<Xt&&(gt++,et=et.nextZ);ke++);for(Dt=Xt;gt>0||Dt>0&&et;)gt!==0&&(Dt===0||!et||De.z<=et.z)?(Ze=De,De=De.nextZ,gt--):(Ze=et,et=et.nextZ,Dt--),Je?Je.nextZ=Ze:Pe=Ze,Ze.prevZ=Je,Je=Ze;De=et}Je.nextZ=null,Xt*=2}while(dt>1)}(ge)}(o,h,m,v);for(var S,C,F=o;o.prev!==o.next;)if(S=o.prev,C=o.next,v?x4(o,h,m,v):_4(o))r.push(S.i/s|0),r.push(o.i/s|0),r.push(C.i/s|0),hd(o),o=C.next,F=C.next;else if((o=C)===F){x?x===1?ud(o=w4(tc(o),r,s),r,s,h,m,v,2):x===2&&b4(o,r,s,h,m,v):ud(tc(o),r,s,h,m,v,1);break}}}function _4(o){var r=o.prev,s=o,h=o.next;if(Tn(r,s,h)>=0)return!1;for(var m=r.x,v=s.x,x=h.x,S=r.y,C=s.y,F=h.y,H=m<v?m<x?m:x:v<x?v:x,Y=S<C?S<F?S:F:C<F?C:F,ne=m>v?m>x?m:x:v>x?v:x,he=S>C?S>F?S:F:C>F?C:F,ge=h.next;ge!==r;){if(ge.x>=H&&ge.x<=ne&&ge.y>=Y&&ge.y<=he&&hh(m,S,v,C,x,F,ge.x,ge.y)&&Tn(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function x4(o,r,s,h){var m=o.prev,v=o,x=o.next;if(Tn(m,v,x)>=0)return!1;for(var S=m.x,C=v.x,F=x.x,H=m.y,Y=v.y,ne=x.y,he=S<C?S<F?S:F:C<F?C:F,ge=H<Y?H<ne?H:ne:Y<ne?Y:ne,Pe=S>C?S>F?S:F:C>F?C:F,ke=H>Y?H>ne?H:ne:Y>ne?Y:ne,De=cv(he,ge,r,s,h),et=cv(Pe,ke,r,s,h),Ze=o.prevZ,Je=o.nextZ;Ze&&Ze.z>=De&&Je&&Je.z<=et;){if(Ze.x>=he&&Ze.x<=Pe&&Ze.y>=ge&&Ze.y<=ke&&Ze!==m&&Ze!==x&&hh(S,H,C,Y,F,ne,Ze.x,Ze.y)&&Tn(Ze.prev,Ze,Ze.next)>=0||(Ze=Ze.prevZ,Je.x>=he&&Je.x<=Pe&&Je.y>=ge&&Je.y<=ke&&Je!==m&&Je!==x&&hh(S,H,C,Y,F,ne,Je.x,Je.y)&&Tn(Je.prev,Je,Je.next)>=0))return!1;Je=Je.nextZ}for(;Ze&&Ze.z>=De;){if(Ze.x>=he&&Ze.x<=Pe&&Ze.y>=ge&&Ze.y<=ke&&Ze!==m&&Ze!==x&&hh(S,H,C,Y,F,ne,Ze.x,Ze.y)&&Tn(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.prevZ}for(;Je&&Je.z<=et;){if(Je.x>=he&&Je.x<=Pe&&Je.y>=ge&&Je.y<=ke&&Je!==m&&Je!==x&&hh(S,H,C,Y,F,ne,Je.x,Je.y)&&Tn(Je.prev,Je,Je.next)>=0)return!1;Je=Je.nextZ}return!0}function w4(o,r,s){var h=o;do{var m=h.prev,v=h.next.next;!Em(m,v)&&G2(m,h,h.next,v)&&cd(m,v)&&cd(v,m)&&(r.push(m.i/s|0),r.push(h.i/s|0),r.push(v.i/s|0),hd(h),hd(h.next),h=o=v),h=h.next}while(h!==o);return tc(h)}function b4(o,r,s,h,m,v){var x=o;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&A4(x,S)){var C=W2(x,S);return x=tc(x,x.next),C=tc(C,C.next),ud(x,r,s,h,m,v,0),void ud(C,r,s,h,m,v,0)}S=S.next}x=x.next}while(x!==o)}function S4(o,r){return o.x-r.x}function E4(o,r){var s=function(m,v){var x,S=v,C=m.x,F=m.y,H=-1/0;do{if(F<=S.y&&F>=S.next.y&&S.next.y!==S.y){var Y=S.x+(F-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(Y<=C&&Y>H&&(H=Y,x=S.x<S.next.x?S:S.next,Y===C))return x}S=S.next}while(S!==v);if(!x)return null;var ne,he=x,ge=x.x,Pe=x.y,ke=1/0;S=x;do C>=S.x&&S.x>=ge&&C!==S.x&&hh(F<Pe?C:H,F,ge,Pe,F<Pe?H:C,F,S.x,S.y)&&(ne=Math.abs(F-S.y)/(C-S.x),cd(S,m)&&(ne<ke||ne===ke&&(S.x>x.x||S.x===x.x&&T4(x,S)))&&(x=S,ke=ne)),S=S.next;while(S!==he);return x}(o,r);if(!s)return r;var h=W2(s,o);return tc(h,h.next),tc(s,s.next)}function T4(o,r){return Tn(o.prev,o,r.prev)<0&&Tn(r.next,o,o.next)<0}function cv(o,r,s,h,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-h)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function P4(o){var r=o,s=o;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==o);return s}function hh(o,r,s,h,m,v,x,S){return(m-x)*(r-S)>=(o-x)*(v-S)&&(o-x)*(h-S)>=(s-x)*(r-S)&&(s-x)*(v-S)>=(m-x)*(h-S)}function A4(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(s,h){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==h.i&&m.next.i!==h.i&&G2(m,m.next,s,h))return!0;m=m.next}while(m!==s);return!1}(o,r)&&(cd(o,r)&&cd(r,o)&&function(s,h){var m=s,v=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&x<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==s);return v}(o,r)&&(Tn(o.prev,o,r.prev)||Tn(o,r.prev,r))||Em(o,r)&&Tn(o.prev,o,o.next)>0&&Tn(r.prev,r,r.next)>0)}function Tn(o,r,s){return(r.y-o.y)*(s.x-r.x)-(r.x-o.x)*(s.y-r.y)}function Em(o,r){return o.x===r.x&&o.y===r.y}function G2(o,r,s,h){var m=Pm(Tn(o,r,s)),v=Pm(Tn(o,r,h)),x=Pm(Tn(s,h,o)),S=Pm(Tn(s,h,r));return m!==v&&x!==S||!(m!==0||!Tm(o,s,r))||!(v!==0||!Tm(o,h,r))||!(x!==0||!Tm(s,o,h))||!(S!==0||!Tm(s,r,h))}function Tm(o,r,s){return r.x<=Math.max(o.x,s.x)&&r.x>=Math.min(o.x,s.x)&&r.y<=Math.max(o.y,s.y)&&r.y>=Math.min(o.y,s.y)}function Pm(o){return o>0?1:o<0?-1:0}function cd(o,r){return Tn(o.prev,o,o.next)<0?Tn(o,r,o.next)>=0&&Tn(o,o.prev,r)>=0:Tn(o,r,o.prev)<0||Tn(o,o.next,r)<0}function W2(o,r){var s=new hv(o.i,o.x,o.y),h=new hv(r.i,r.x,r.y),m=o.next,v=r.prev;return o.next=r,r.prev=o,s.next=m,m.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function H2(o,r,s,h){var m=new hv(o,r,s);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function hd(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function hv(o,r,s){this.i=o,this.x=r,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function fv(o,r,s,h){for(var m=0,v=r,x=s-h;v<s;v+=h)m+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return m}uv.exports=Sm,uv.exports.default=Sm,Sm.deviation=function(o,r,s,h){var m=r&&r.length,v=Math.abs(fv(o,0,m?r[0]*s:o.length,s));if(m)for(var x=0,S=r.length;x<S;x++)v-=Math.abs(fv(o,r[x]*s,x<S-1?r[x+1]*s:o.length,s));var C=0;for(x=0;x<h.length;x+=3){var F=h[x]*s,H=h[x+1]*s,Y=h[x+2]*s;C+=Math.abs((o[F]-o[Y])*(o[H+1]-o[F+1])-(o[F]-o[H])*(o[Y+1]-o[F+1]))}return v===0&&C===0?0:Math.abs((C-v)/v)},Sm.flatten=function(o){for(var r=o[0][0].length,s={vertices:[],holes:[],dimensions:r},h=0,m=0;m<o.length;m++){for(var v=0;v<o[m].length;v++)for(var x=0;x<r;x++)s.vertices.push(o[m][v][x]);m>0&&s.holes.push(h+=o[m-1].length)}return s};var Z2=w(uv.exports);function dv(o,r,s){const h=s.patternDependencies;let m=!1;for(const v of r){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(m=!0);const S=x.constantOr(null);S&&(m=!0,h[S.to]=!0,h[S.from]=!0)}return m}function pv(o,r,s,h,m){const v=m.patternDependencies;for(const x of r){const S=x.paint.get(`${o}-pattern`).value;if(S.kind!=="constant"){let C=S.evaluate({zoom:h-1},s,{},m.availableImages),F=S.evaluate({zoom:h},s,{},m.availableImages),H=S.evaluate({zoom:h+1},s,{},m.availableImages);C=C&&C.name?C.name:C,F=F&&F.name?F.name:F,H=H&&H.name?H.name:H,v[C]=!0,v[F]=!0,v[H]=!0,s.patterns[x.id]={min:C,mid:F,max:H}}}return s}class mv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Vl,this.indexArray=new qn,this.indexArray2=new cn,this.programConfigurations=new Ju(r.layers,r.zoom),this.segments=new Vn,this.segments2=new Vn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.hasPattern=dv("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),x=[];for(const{feature:S,id:C,index:F,sourceLayerIndex:H}of r){const Y=this.layers[0]._featureFilter.needGeometry,ne=ec(S,Y);if(!this.layers[0]._featureFilter.filter(new Kr(this.zoom),ne,h))continue;const he=v?m.evaluate(ne,{},h,s.availableImages):void 0,ge={id:C,properties:S.properties,type:S.type,sourceLayerIndex:H,index:F,geometry:Y?ne.geometry:Qu(S),patterns:{},sortKey:he};x.push(ge)}v&&x.sort((S,C)=>S.sortKey-C.sortKey);for(const S of x){const{geometry:C,index:F,sourceLayerIndex:H}=S;if(this.hasPattern){const Y=pv("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(Y)}else this.addFeature(S,C,F,h,{});s.featureIndex.insert(r[F].feature,C,F,H,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}addFeatures(r,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,v4),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,h,m,v){for(const x of Fl(s,500)){let S=0;for(const he of x)S+=he.length;const C=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),F=C.vertexLength,H=[],Y=[];for(const he of x){if(he.length===0)continue;he!==x[0]&&Y.push(H.length/2);const ge=this.segments2.prepareSegment(he.length,this.layoutVertexArray,this.indexArray2),Pe=ge.vertexLength;this.layoutVertexArray.emplaceBack(he[0].x,he[0].y),this.indexArray2.emplaceBack(Pe+he.length-1,Pe),H.push(he[0].x),H.push(he[0].y);for(let ke=1;ke<he.length;ke++)this.layoutVertexArray.emplaceBack(he[ke].x,he[ke].y),this.indexArray2.emplaceBack(Pe+ke-1,Pe+ke),H.push(he[ke].x),H.push(he[ke].y);ge.vertexLength+=he.length,ge.primitiveLength+=he.length}const ne=Z2(H,Y);for(let he=0;he<ne.length;he+=3)this.indexArray.emplaceBack(F+ne[he],F+ne[he+1],F+ne[he+2]);C.vertexLength+=S,C.primitiveLength+=ne.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v,m)}}let q2,X2;Ut("FillBucket",mv,{omit:["layers","patternFeatures"]});var I4={get paint(){return X2=X2||new p({"fill-antialias":new Qt(it.paint_fill["fill-antialias"]),"fill-opacity":new sr(it.paint_fill["fill-opacity"]),"fill-color":new sr(it.paint_fill["fill-color"]),"fill-outline-color":new sr(it.paint_fill["fill-outline-color"]),"fill-translate":new Qt(it.paint_fill["fill-translate"]),"fill-translate-anchor":new Qt(it.paint_fill["fill-translate-anchor"]),"fill-pattern":new y(it.paint_fill["fill-pattern"])})},get layout(){return q2=q2||new p({"fill-sort-key":new sr(it.layout_fill["fill-sort-key"])})}};class C4 extends _{constructor(r){super(r,I4)}recalculate(r,s){super.recalculate(r,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new mv(r)}queryRadius(){return xm(this.paint.get("fill-translate"))}queryIntersectsFeature(r,s,h,m,v,x,S){return k2(wm(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),m)}isTileClipped(){return!0}}const M4=G([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),k4=G([{name:"a_centroid",components:2,type:"Int16"}],4),{members:O4}=M4;var ql={},F4=E,K2=fh;function fh(o,r,s,h,m){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=m,o.readFields(R4,this,r)}function R4(o,r,s){o==1?r.id=s.readVarint():o==2?function(h,m){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=m._keys[h.readVarint()],S=m._values[h.readVarint()];m.properties[x]=S}}(s,r):o==3?r.type=s.readVarint():o==4&&(r._geometry=s.pos)}function j4(o){for(var r,s,h=0,m=0,v=o.length,x=v-1;m<v;x=m++)h+=((s=o[x]).x-(r=o[m]).x)*(r.y+s.y);return h}fh.types=["Unknown","Point","LineString","Polygon"],fh.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,s=o.readVarint()+o.pos,h=1,m=0,v=0,x=0,S=[];o.pos<s;){if(m<=0){var C=o.readVarint();h=7&C,m=C>>3}if(m--,h===1||h===2)v+=o.readSVarint(),x+=o.readSVarint(),h===1&&(r&&S.push(r),r=[]),r.push(new F4(v,x));else{if(h!==7)throw new Error("unknown command "+h);r&&r.push(r[0].clone())}}return r&&S.push(r),S},fh.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,s=1,h=0,m=0,v=0,x=1/0,S=-1/0,C=1/0,F=-1/0;o.pos<r;){if(h<=0){var H=o.readVarint();s=7&H,h=H>>3}if(h--,s===1||s===2)(m+=o.readSVarint())<x&&(x=m),m>S&&(S=m),(v+=o.readSVarint())<C&&(C=v),v>F&&(F=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,C,S,F]},fh.prototype.toGeoJSON=function(o,r,s){var h,m,v=this.extent*Math.pow(2,s),x=this.extent*o,S=this.extent*r,C=this.loadGeometry(),F=fh.types[this.type];function H(he){for(var ge=0;ge<he.length;ge++){var Pe=he[ge];he[ge]=[360*(Pe.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pe.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var Y=[];for(h=0;h<C.length;h++)Y[h]=C[h][0];H(C=Y);break;case 2:for(h=0;h<C.length;h++)H(C[h]);break;case 3:for(C=function(he){var ge=he.length;if(ge<=1)return[he];for(var Pe,ke,De=[],et=0;et<ge;et++){var Ze=j4(he[et]);Ze!==0&&(ke===void 0&&(ke=Ze<0),ke===Ze<0?(Pe&&De.push(Pe),Pe=[he[et]]):Pe.push(he[et]))}return Pe&&De.push(Pe),De}(C),h=0;h<C.length;h++)for(m=0;m<C[h].length;m++)H(C[h][m])}C.length===1?C=C[0]:F="Multi"+F;var ne={type:"Feature",geometry:{type:F,coordinates:C},properties:this.properties};return"id"in this&&(ne.id=this.id),ne};var L4=K2,Y2=J2;function J2(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(z4,this,r),this.length=this._features.length}function z4(o,r,s){o===15?r.version=s.readVarint():o===1?r.name=s.readString():o===5?r.extent=s.readVarint():o===2?r._features.push(s.pos):o===3?r._keys.push(s.readString()):o===4&&r._values.push(function(h){for(var m=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;m=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return m}(s))}J2.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new L4(this._pbf,r,this.extent,this._keys,this._values)};var B4=Y2;function D4(o,r,s){if(o===3){var h=new B4(s,s.readVarint()+s.pos);h.length&&(r[h.name]=h)}}ql.VectorTile=function(o,r){this.layers=o.readFields(D4,{},r)},ql.VectorTileFeature=K2,ql.VectorTileLayer=Y2;const N4=ql.VectorTileFeature.types,gv=Math.pow(2,13);function fd(o,r,s,h,m,v,x,S){o.emplaceBack(r,s,2*Math.floor(h*gv)+x,m*gv*2,v*gv*2,Math.round(S))}class yv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Xs,this.centroidVertexArray=new qs,this.indexArray=new qn,this.programConfigurations=new Ju(r.layers,r.zoom),this.segments=new Vn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.features=[],this.hasPattern=dv("fill-extrusion",this.layers,s);for(const{feature:m,id:v,index:x,sourceLayerIndex:S}of r){const C=this.layers[0]._featureFilter.needGeometry,F=ec(m,C);if(!this.layers[0]._featureFilter.filter(new Kr(this.zoom),F,h))continue;const H={id:v,sourceLayerIndex:S,index:x,geometry:C?F.geometry:Qu(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(pv("fill-extrusion",this.layers,H,this.zoom,s)):this.addFeature(H,H.geometry,x,h,{}),s.featureIndex.insert(m,H.geometry,x,S,this.index,!0)}}addFeatures(r,s,h){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,s,h)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,O4),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,k4.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,s,h,m,v){const x={x:0,y:0,vertexCount:0};for(const S of Fl(s,500)){let C=0;for(const ge of S)C+=ge.length;let F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ge of S){if(ge.length===0||U4(ge))continue;let Pe=0;for(let ke=0;ke<ge.length;ke++){const De=ge[ke];if(ke>=1){const et=ge[ke-1];if(!$4(De,et)){F.vertexLength+4>Vn.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ze=De.sub(et)._perp()._unit(),Je=et.dist(De);Pe+Je>32768&&(Pe=0),fd(this.layoutVertexArray,De.x,De.y,Ze.x,Ze.y,0,0,Pe),fd(this.layoutVertexArray,De.x,De.y,Ze.x,Ze.y,0,1,Pe),x.x+=2*De.x,x.y+=2*De.y,x.vertexCount+=2,Pe+=Je,fd(this.layoutVertexArray,et.x,et.y,Ze.x,Ze.y,0,0,Pe),fd(this.layoutVertexArray,et.x,et.y,Ze.x,Ze.y,0,1,Pe),x.x+=2*et.x,x.y+=2*et.y,x.vertexCount+=2;const dt=F.vertexLength;this.indexArray.emplaceBack(dt,dt+2,dt+1),this.indexArray.emplaceBack(dt+1,dt+2,dt+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+C>Vn.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),N4[r.type]!=="Polygon")continue;const H=[],Y=[],ne=F.vertexLength;for(const ge of S)if(ge.length!==0){ge!==S[0]&&Y.push(H.length/2);for(let Pe=0;Pe<ge.length;Pe++){const ke=ge[Pe];fd(this.layoutVertexArray,ke.x,ke.y,0,0,1,1,0),x.x+=ke.x,x.y+=ke.y,x.vertexCount+=1,H.push(ke.x),H.push(ke.y)}}const he=Z2(H,Y);for(let ge=0;ge<he.length;ge+=3)this.indexArray.emplaceBack(ne+he[ge],ne+he[ge+2],ne+he[ge+1]);F.primitiveLength+=he.length/3,F.vertexLength+=C}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v,m)}}function $4(o,r){return o.x===r.x&&(o.x<0||o.x>On)||o.y===r.y&&(o.y<0||o.y>On)}function U4(o){return o.every(r=>r.x<0)||o.every(r=>r.x>On)||o.every(r=>r.y<0)||o.every(r=>r.y>On)}let Q2;Ut("FillExtrusionBucket",yv,{omit:["layers","features"]});var V4={get paint(){return Q2=Q2||new p({"fill-extrusion-opacity":new Qt(it["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sr(it["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qt(it["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qt(it["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new y(it["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sr(it["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sr(it["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qt(it["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class G4 extends _{constructor(r){super(r,V4)}createBucket(r){return new yv(r)}queryRadius(){return xm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,s,h,m,v,x,S,C){const F=wm(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),H=this.paint.get("fill-extrusion-height").evaluate(s,h),Y=this.paint.get("fill-extrusion-base").evaluate(s,h),ne=function(ge,Pe,ke,De){const et=[];for(const Ze of ge){const Je=[Ze.x,Ze.y,0,1];bm(Je,Je,Pe),et.push(new b(Je[0]/Je[3],Je[1]/Je[3]))}return et}(F,C),he=function(ge,Pe,ke,De){const et=[],Ze=[],Je=De[8]*Pe,dt=De[9]*Pe,gt=De[10]*Pe,Dt=De[11]*Pe,Xt=De[8]*ke,jt=De[9]*ke,Ct=De[10]*ke,Vt=De[11]*ke;for(const er of ge){const Lt=[],_t=[];for(const Zt of er){const Gt=Zt.x,_r=Zt.y,Hr=De[0]*Gt+De[4]*_r+De[12],Zr=De[1]*Gt+De[5]*_r+De[13],Fn=De[2]*Gt+De[6]*_r+De[14],Do=De[3]*Gt+De[7]*_r+De[15],Ii=Fn+gt,Wn=Do+Dt,Qn=Hr+Xt,Ci=Zr+jt,Ui=Fn+Ct,Mi=Do+Vt,Rn=new b((Hr+Je)/Wn,(Zr+dt)/Wn);Rn.z=Ii/Wn,Lt.push(Rn);const Xn=new b(Qn/Mi,Ci/Mi);Xn.z=Ui/Mi,_t.push(Xn)}et.push(Lt),Ze.push(_t)}return[et,Ze]}(m,Y,H,C);return function(ge,Pe,ke){let De=1/0;k2(ke,Pe)&&(De=eS(ke,Pe[0]));for(let et=0;et<Pe.length;et++){const Ze=Pe[et],Je=ge[et];for(let dt=0;dt<Ze.length-1;dt++){const gt=Ze[dt],Dt=[gt,Ze[dt+1],Je[dt+1],Je[dt],gt];M2(ke,Dt)&&(De=Math.min(De,eS(ke,Dt)))}}return De!==1/0&&De}(he[0],he[1],ne)}}function dd(o,r){return o.x*r.x+o.y*r.y}function eS(o,r){if(o.length===1){let s=0;const h=r[s++];let m;for(;!m||h.equals(m);)if(m=r[s++],!m)return 1/0;for(;s<r.length;s++){const v=r[s],x=o[0],S=m.sub(h),C=v.sub(h),F=x.sub(h),H=dd(S,S),Y=dd(S,C),ne=dd(C,C),he=dd(F,S),ge=dd(F,C),Pe=H*ne-Y*Y,ke=(ne*he-Y*ge)/Pe,De=(H*ge-Y*he)/Pe,et=h.z*(1-ke-De)+m.z*ke+v.z*De;if(isFinite(et))return et}return 1/0}{let s=1/0;for(const h of r)s=Math.min(s,h.z);return s}}const W4=G([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:H4}=W4,Z4=G([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:q4}=Z4,X4=ql.VectorTileFeature.types,K4=Math.cos(Math.PI/180*37.5),tS=Math.pow(2,14)/.5;class vv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new ih,this.layoutVertexArray2=new ed,this.indexArray=new qn,this.programConfigurations=new Ju(r.layers,r.zoom),this.segments=new Vn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,h){this.hasPattern=dv("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),x=[];for(const{feature:S,id:C,index:F,sourceLayerIndex:H}of r){const Y=this.layers[0]._featureFilter.needGeometry,ne=ec(S,Y);if(!this.layers[0]._featureFilter.filter(new Kr(this.zoom),ne,h))continue;const he=v?m.evaluate(ne,{},h):void 0,ge={id:C,properties:S.properties,type:S.type,sourceLayerIndex:H,index:F,geometry:Y?ne.geometry:Qu(S),patterns:{},sortKey:he};x.push(ge)}v&&x.sort((S,C)=>S.sortKey-C.sortKey);for(const S of x){const{geometry:C,index:F,sourceLayerIndex:H}=S;if(this.hasPattern){const Y=pv("line",this.layers,S,this.zoom,s);this.patternFeatures.push(Y)}else this.addFeature(S,C,F,h,{});s.featureIndex.insert(r[F].feature,C,F,H,this.index)}}update(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)}addFeatures(r,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,q4)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,H4),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,h,m,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(r,{}),C=x.get("line-cap"),F=x.get("line-miter-limit"),H=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const Y of s)this.addLine(Y,r,S,C,F,H);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v,m)}addLine(r,s,h,m,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let De=0;De<r.length-1;De++)this.totalDistance+=r[De].dist(r[De+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=X4[s.type]==="Polygon";let C=r.length;for(;C>=2&&r[C-1].equals(r[C-2]);)C--;let F=0;for(;F<C-1&&r[F].equals(r[F+1]);)F++;if(C<(S?3:2))return;h==="bevel"&&(v=1.05);const H=this.overscaling<=16?15*On/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let ne,he,ge,Pe,ke;this.e1=this.e2=-1,S&&(ne=r[C-2],ke=r[F].sub(ne)._unit()._perp());for(let De=F;De<C;De++){if(ge=De===C-1?S?r[F+1]:void 0:r[De+1],ge&&r[De].equals(ge))continue;ke&&(Pe=ke),ne&&(he=ne),ne=r[De],ke=ge?ge.sub(ne)._unit()._perp():Pe,Pe=Pe||ke;let et=Pe.add(ke);et.x===0&&et.y===0||et._unit();const Ze=Pe.x*ke.x+Pe.y*ke.y,Je=et.x*ke.x+et.y*ke.y,dt=Je!==0?1/Je:1/0,gt=2*Math.sqrt(2-2*Je),Dt=Je<K4&&he&&ge,Xt=Pe.x*ke.y-Pe.y*ke.x>0;if(Dt&&De>F){const Vt=ne.dist(he);if(Vt>2*H){const er=ne.sub(ne.sub(he)._mult(H/Vt)._round());this.updateDistance(he,er),this.addCurrentVertex(er,Pe,0,0,Y),he=er}}const jt=he&&ge;let Ct=jt?h:S?"butt":m;if(jt&&Ct==="round"&&(dt<x?Ct="miter":dt<=2&&(Ct="fakeround")),Ct==="miter"&&dt>v&&(Ct="bevel"),Ct==="bevel"&&(dt>2&&(Ct="flipbevel"),dt<v&&(Ct="miter")),he&&this.updateDistance(he,ne),Ct==="miter")et._mult(dt),this.addCurrentVertex(ne,et,0,0,Y);else if(Ct==="flipbevel"){if(dt>100)et=ke.mult(-1);else{const Vt=dt*Pe.add(ke).mag()/Pe.sub(ke).mag();et._perp()._mult(Vt*(Xt?-1:1))}this.addCurrentVertex(ne,et,0,0,Y),this.addCurrentVertex(ne,et.mult(-1),0,0,Y)}else if(Ct==="bevel"||Ct==="fakeround"){const Vt=-Math.sqrt(dt*dt-1),er=Xt?Vt:0,Lt=Xt?0:Vt;if(he&&this.addCurrentVertex(ne,Pe,er,Lt,Y),Ct==="fakeround"){const _t=Math.round(180*gt/Math.PI/20);for(let Zt=1;Zt<_t;Zt++){let Gt=Zt/_t;if(Gt!==.5){const Hr=Gt-.5;Gt+=Gt*Hr*(Gt-1)*((1.0904+Ze*(Ze*(3.55645-1.43519*Ze)-3.2452))*Hr*Hr+(.848013+Ze*(.215638*Ze-1.06021)))}const _r=ke.sub(Pe)._mult(Gt)._add(Pe)._unit()._mult(Xt?-1:1);this.addHalfVertex(ne,_r.x,_r.y,!1,Xt,0,Y)}}ge&&this.addCurrentVertex(ne,ke,-er,-Lt,Y)}else if(Ct==="butt")this.addCurrentVertex(ne,et,0,0,Y);else if(Ct==="square"){const Vt=he?1:-1;this.addCurrentVertex(ne,et,Vt,Vt,Y)}else Ct==="round"&&(he&&(this.addCurrentVertex(ne,Pe,0,0,Y),this.addCurrentVertex(ne,Pe,1,1,Y,!0)),ge&&(this.addCurrentVertex(ne,ke,-1,-1,Y,!0),this.addCurrentVertex(ne,ke,0,0,Y)));if(Dt&&De<C-1){const Vt=ne.dist(ge);if(Vt>2*H){const er=ne.add(ge.sub(ne)._mult(H/Vt)._round());this.updateDistance(ne,er),this.addCurrentVertex(er,ke,0,0,Y),ne=er}}}}addCurrentVertex(r,s,h,m,v,x=!1){const S=s.y*m-s.x,C=-s.y-s.x*m;this.addHalfVertex(r,s.x+s.y*h,s.y-s.x*h,x,!1,h,v),this.addHalfVertex(r,S,C,x,!0,-m,v),this.distance>tS/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,s,h,m,v,x))}addHalfVertex({x:r,y:s},h,m,v,x,S,C){const F=.5*(this.lineClips?this.scaledDistance*(tS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const H=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,H),C.primitiveLength++),x?this.e2=H:this.e1=H}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,s){this.distance+=r.dist(s),this.updateScaledDistance()}}let rS,nS;Ut("LineBucket",vv,{omit:["layers","patternFeatures"]});var iS={get paint(){return nS=nS||new p({"line-opacity":new sr(it.paint_line["line-opacity"]),"line-color":new sr(it.paint_line["line-color"]),"line-translate":new Qt(it.paint_line["line-translate"]),"line-translate-anchor":new Qt(it.paint_line["line-translate-anchor"]),"line-width":new sr(it.paint_line["line-width"]),"line-gap-width":new sr(it.paint_line["line-gap-width"]),"line-offset":new sr(it.paint_line["line-offset"]),"line-blur":new sr(it.paint_line["line-blur"]),"line-dasharray":new i(it.paint_line["line-dasharray"]),"line-pattern":new y(it.paint_line["line-pattern"]),"line-gradient":new c(it.paint_line["line-gradient"])})},get layout(){return rS=rS||new p({"line-cap":new Qt(it.layout_line["line-cap"]),"line-join":new sr(it.layout_line["line-join"]),"line-miter-limit":new Qt(it.layout_line["line-miter-limit"]),"line-round-limit":new Qt(it.layout_line["line-round-limit"]),"line-sort-key":new sr(it.layout_line["line-sort-key"])})}};class Y4 extends sr{possiblyEvaluate(r,s){return s=new Kr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(r,s)}evaluate(r,s,h,m){return s=P({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(r,s,h,m)}}let Am;class J4 extends _{constructor(r){super(r,iS),this.gradientVersion=0,Am||(Am=new Y4(iS.paint.properties["line-width"].specification),Am.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Ja,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,s){super.recalculate(r,s),this.paint._values["line-floorwidth"]=Am.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new vv(r)}queryRadius(r){const s=r,h=oS(ad("line-width",this,s),ad("line-gap-width",this,s)),m=ad("line-offset",this,s);return h/2+Math.abs(m)+xm(this.paint.get("line-translate"))}queryIntersectsFeature(r,s,h,m,v,x,S){const C=wm(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),F=S/2*oS(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),H=this.paint.get("line-offset").evaluate(s,h);return H&&(m=function(Y,ne){const he=[];for(let ge=0;ge<Y.length;ge++){const Pe=Y[ge],ke=[];for(let De=0;De<Pe.length;De++){const et=Pe[De-1],Ze=Pe[De],Je=Pe[De+1],dt=De===0?new b(0,0):Ze.sub(et)._unit()._perp(),gt=De===Pe.length-1?new b(0,0):Je.sub(Ze)._unit()._perp(),Dt=dt._add(gt)._unit(),Xt=Dt.x*gt.x+Dt.y*gt.y;Xt!==0&&Dt._mult(1/Xt),ke.push(Dt._mult(ne)._add(Ze))}he.push(ke)}return he}(m,H*S)),function(Y,ne,he){for(let ge=0;ge<ne.length;ge++){const Pe=ne[ge];if(Y.length>=3){for(let ke=0;ke<Pe.length;ke++)if(uh(Y,Pe[ke]))return!0}if(s4(Y,Pe,he))return!0}return!1}(C,m,F)}isTileClipped(){return!0}}function oS(o,r){return r>0?r+2*o:o}const Q4=G([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),eF=G([{name:"a_projected_pos",components:3,type:"Float32"}],4);G([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const tF=G([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);G([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const aS=G([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rF=G([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function nF(o,r,s){return o.sections.forEach(h=>{h.text=function(m,v,x){const S=v.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),fs.applyArabicShaping&&(m=fs.applyArabicShaping(m)),m}(h.text,r,s)}),o}G([{name:"triangle",components:3,type:"Uint16"}]),G([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),G([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),G([{type:"Float32",name:"offsetX"}]),G([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),G([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const pd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Gn=24,sS=Wr,lS=function(o,r,s,h,m){var v,x,S=8*m-h-1,C=(1<<S)-1,F=C>>1,H=-7,Y=s?m-1:0,ne=s?-1:1,he=o[r+Y];for(Y+=ne,v=he&(1<<-H)-1,he>>=-H,H+=S;H>0;v=256*v+o[r+Y],Y+=ne,H-=8);for(x=v&(1<<-H)-1,v>>=-H,H+=h;H>0;x=256*x+o[r+Y],Y+=ne,H-=8);if(v===0)v=1-F;else{if(v===C)return x?NaN:1/0*(he?-1:1);x+=Math.pow(2,h),v-=F}return(he?-1:1)*x*Math.pow(2,v-h)},uS=function(o,r,s,h,m,v){var x,S,C,F=8*v-m-1,H=(1<<F)-1,Y=H>>1,ne=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,he=h?0:v-1,ge=h?1:-1,Pe=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(S=isNaN(r)?1:0,x=H):(x=Math.floor(Math.log(r)/Math.LN2),r*(C=Math.pow(2,-x))<1&&(x--,C*=2),(r+=x+Y>=1?ne/C:ne*Math.pow(2,1-Y))*C>=2&&(x++,C/=2),x+Y>=H?(S=0,x=H):x+Y>=1?(S=(r*C-1)*Math.pow(2,m),x+=Y):(S=r*Math.pow(2,Y-1)*Math.pow(2,m),x=0));m>=8;o[s+he]=255&S,he+=ge,S/=256,m-=8);for(x=x<<m|S,F+=m;F>0;o[s+he]=255&x,he+=ge,x/=256,F-=8);o[s+he-ge]|=128*Pe};function Wr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Wr.Varint=0,Wr.Fixed64=1,Wr.Bytes=2,Wr.Fixed32=5;var _v=4294967296,cS=1/_v,hS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ys(o){return o.type===Wr.Bytes?o.readVarint()+o.pos:o.pos+1}function dh(o,r,s){return s?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function fS(o,r,s){var h=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(h);for(var m=s.pos-1;m>=o;m--)s.buf[m+h]=s.buf[m]}function iF(o,r){for(var s=0;s<o.length;s++)r.writeVarint(o[s])}function oF(o,r){for(var s=0;s<o.length;s++)r.writeSVarint(o[s])}function aF(o,r){for(var s=0;s<o.length;s++)r.writeFloat(o[s])}function sF(o,r){for(var s=0;s<o.length;s++)r.writeDouble(o[s])}function lF(o,r){for(var s=0;s<o.length;s++)r.writeBoolean(o[s])}function uF(o,r){for(var s=0;s<o.length;s++)r.writeFixed32(o[s])}function cF(o,r){for(var s=0;s<o.length;s++)r.writeSFixed32(o[s])}function hF(o,r){for(var s=0;s<o.length;s++)r.writeFixed64(o[s])}function fF(o,r){for(var s=0;s<o.length;s++)r.writeSFixed64(o[s])}function Im(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function ph(o,r,s){o[s]=r,o[s+1]=r>>>8,o[s+2]=r>>>16,o[s+3]=r>>>24}function dS(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}Wr.prototype={destroy:function(){this.buf=null},readFields:function(o,r,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),m=h>>3,v=this.pos;this.type=7&h,o(m,r,this),this.pos===v&&this.skip(h)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=Im(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=dS(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Im(this.buf,this.pos)+Im(this.buf,this.pos+4)*_v;return this.pos+=8,o},readSFixed64:function(){var o=Im(this.buf,this.pos)+dS(this.buf,this.pos+4)*_v;return this.pos+=8,o},readFloat:function(){var o=lS(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=lS(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,s,h=this.buf;return r=127&(s=h[this.pos++]),s<128?r:(r|=(127&(s=h[this.pos++]))<<7,s<128?r:(r|=(127&(s=h[this.pos++]))<<14,s<128?r:(r|=(127&(s=h[this.pos++]))<<21,s<128?r:function(m,v,x){var S,C,F=x.buf;if(S=(112&(C=F[x.pos++]))>>4,C<128||(S|=(127&(C=F[x.pos++]))<<3,C<128)||(S|=(127&(C=F[x.pos++]))<<10,C<128)||(S|=(127&(C=F[x.pos++]))<<17,C<128)||(S|=(127&(C=F[x.pos++]))<<24,C<128)||(S|=(1&(C=F[x.pos++]))<<31,C<128))return dh(m,S,v);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&hS?function(s,h,m){return hS.decode(s.subarray(h,m))}(this.buf,r,o):function(s,h,m){for(var v="",x=h;x<m;){var S,C,F,H=s[x],Y=null,ne=H>239?4:H>223?3:H>191?2:1;if(x+ne>m)break;ne===1?H<128&&(Y=H):ne===2?(192&(S=s[x+1]))==128&&(Y=(31&H)<<6|63&S)<=127&&(Y=null):ne===3?(C=s[x+2],(192&(S=s[x+1]))==128&&(192&C)==128&&((Y=(15&H)<<12|(63&S)<<6|63&C)<=2047||Y>=55296&&Y<=57343)&&(Y=null)):ne===4&&(C=s[x+2],F=s[x+3],(192&(S=s[x+1]))==128&&(192&C)==128&&(192&F)==128&&((Y=(15&H)<<18|(63&S)<<12|(63&C)<<6|63&F)<=65535||Y>=1114112)&&(Y=null)),Y===null?(Y=65533,ne=1):Y>65535&&(Y-=65536,v+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),v+=String.fromCharCode(Y),x+=ne}return v}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==Wr.Bytes)return o.push(this.readVarint(r));var s=Ys(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==Wr.Bytes)return o.push(this.readSVarint());var r=Ys(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Wr.Bytes)return o.push(this.readBoolean());var r=Ys(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Wr.Bytes)return o.push(this.readFloat());var r=Ys(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Wr.Bytes)return o.push(this.readDouble());var r=Ys(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Wr.Bytes)return o.push(this.readFixed32());var r=Ys(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Wr.Bytes)return o.push(this.readSFixed32());var r=Ys(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Wr.Bytes)return o.push(this.readFixed64());var r=Ys(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Wr.Bytes)return o.push(this.readSFixed64());var r=Ys(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===Wr.Varint)for(;this.buf[this.pos++]>127;);else if(r===Wr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===Wr.Fixed32)this.pos+=4;else{if(r!==Wr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),ph(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),ph(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),ph(this.buf,-1&o,this.pos),ph(this.buf,Math.floor(o*cS),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),ph(this.buf,-1&o,this.pos),ph(this.buf,Math.floor(o*cS),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,s){var h,m;if(r>=0?(h=r%4294967296|0,m=r/4294967296|0):(m=~(-r/4294967296),4294967295^(h=~(-r%4294967296))?h=h+1|0:(h=0,m=m+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(h,0,s),function(v,x){var S=(7&v)<<4;x.buf[x.pos++]|=S|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(m,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(h,m,v){for(var x,S,C=0;C<m.length;C++){if((x=m.charCodeAt(C))>55295&&x<57344){if(!S){x>56319||C+1===m.length?(h[v++]=239,h[v++]=191,h[v++]=189):S=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[v++]=239,h[v++]=191,h[v++]=189,S=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,o,this.pos);var s=this.pos-r;s>=128&&fS(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),uS(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),uS(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var s=0;s<r;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,r){this.pos++;var s=this.pos;o(r,this);var h=this.pos-s;h>=128&&fS(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,r,s){this.writeTag(o,Wr.Bytes),this.writeRawMessage(r,s)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,iF,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,oF,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,lF,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,aF,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,sF,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,uF,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,cF,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,hF,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,fF,r)},writeBytesField:function(o,r){this.writeTag(o,Wr.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,Wr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,Wr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,Wr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,Wr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,Wr.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,Wr.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,Wr.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,Wr.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,Wr.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var xv=w(sS);const wv=3;function dF(o,r,s){o===1&&s.readMessage(pF,r)}function pF(o,r,s){if(o===3){const{id:h,bitmap:m,width:v,height:x,left:S,top:C,advance:F}=s.readMessage(mF,{});r.push({id:h,bitmap:new ld({width:v+2*wv,height:x+2*wv},m),metrics:{width:v,height:x,left:S,top:C,advance:F}})}}function mF(o,r,s){o===1?r.id=s.readVarint():o===2?r.bitmap=s.readBytes():o===3?r.width=s.readVarint():o===4?r.height=s.readVarint():o===5?r.left=s.readSVarint():o===6?r.top=s.readSVarint():o===7&&(r.advance=s.readVarint())}const pS=wv;function mS(o){let r=0,s=0;for(const x of o)r+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let m=0,v=0;for(const x of o)for(let S=h.length-1;S>=0;S--){const C=h[S];if(!(x.w>C.w||x.h>C.h)){if(x.x=C.x,x.y=C.y,v=Math.max(v,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===C.w&&x.h===C.h){const F=h.pop();S<h.length&&(h[S]=F)}else x.h===C.h?(C.x+=x.w,C.w-=x.w):x.w===C.w?(C.y+=x.h,C.h-=x.h):(h.push({x:C.x+x.w,y:C.y,w:C.w-x.w,h:x.h}),C.y+=x.h,C.h-=x.h);break}}return{w:m,h:v,fill:r/(m*v)||0}}const to=1;class bv{constructor(r,{pixelRatio:s,version:h,stretchX:m,stretchY:v,content:x,textFitWidth:S,textFitHeight:C}){this.paddedRect=r,this.pixelRatio=s,this.stretchX=m,this.stretchY=v,this.content=x,this.version=h,this.textFitWidth=S,this.textFitHeight=C}get tl(){return[this.paddedRect.x+to,this.paddedRect.y+to]}get br(){return[this.paddedRect.x+this.paddedRect.w-to,this.paddedRect.y+this.paddedRect.h-to]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*to)/this.pixelRatio,(this.paddedRect.h-2*to)/this.pixelRatio]}}class gS{constructor(r,s){const h={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(r,h,v),this.addImages(s,m,v);const{w:x,h:S}=mS(v),C=new zo({width:x||1,height:S||1});for(const F in r){const H=r[F],Y=h[F].paddedRect;zo.copy(H.data,C,{x:0,y:0},{x:Y.x+to,y:Y.y+to},H.data)}for(const F in s){const H=s[F],Y=m[F].paddedRect,ne=Y.x+to,he=Y.y+to,ge=H.data.width,Pe=H.data.height;zo.copy(H.data,C,{x:0,y:0},{x:ne,y:he},H.data),zo.copy(H.data,C,{x:0,y:Pe-1},{x:ne,y:he-1},{width:ge,height:1}),zo.copy(H.data,C,{x:0,y:0},{x:ne,y:he+Pe},{width:ge,height:1}),zo.copy(H.data,C,{x:ge-1,y:0},{x:ne-1,y:he},{width:1,height:Pe}),zo.copy(H.data,C,{x:0,y:0},{x:ne+ge,y:he},{width:1,height:Pe})}this.image=C,this.iconPositions=h,this.patternPositions=m}addImages(r,s,h){for(const m in r){const v=r[m],x={x:0,y:0,w:v.data.width+2*to,h:v.data.height+2*to};h.push(x),s[m]=new bv(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,s){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),s)}patchUpdatedImage(r,s,h){if(!r||!s||r.version===s.version)return;r.version=s.version;const[m,v]=r.tl;h.update(s.data,void 0,{x:m,y:v})}}var Xl;Ut("ImagePosition",bv),Ut("ImageAtlas",gS),d.ah=void 0,(Xl=d.ah||(d.ah={}))[Xl.none=0]="none",Xl[Xl.horizontal=1]="horizontal",Xl[Xl.vertical=2]="vertical",Xl[Xl.horizontalOnly=3]="horizontalOnly";const md=-17;class gd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,s){const h=new gd;return h.scale=r||1,h.fontStack=s,h}static forImage(r){const s=new gd;return s.imageName=r,s}}class mh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,s){const h=new mh;for(let m=0;m<r.sections.length;m++){const v=r.sections[m];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let s="";for(let h=0;h<r.length;h++){const m=r.charCodeAt(h+1)||null,v=r.charCodeAt(h-1)||null;s+=m&&fm(m)&&!pd[r[h+1]]||v&&fm(v)&&!pd[r[h-1]]||!pd[r[h]]?r[h]:pd[r[h]]}return s}(this.text)}trim(){let r=0;for(let h=0;h<this.text.length&&Mm[this.text.charCodeAt(h)];h++)r++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=r&&Mm[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)}substring(r,s){const h=new mh;return h.text=this.text.substring(r,s),h.sectionIndex=this.sectionIndex.slice(r,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}addTextSection(r,s){this.text+=r.text,this.sections.push(gd.forText(r.scale,r.fontStack||s));const h=this.sections.length-1;for(let m=0;m<r.text.length;++m)this.sectionIndex.push(h)}addImageSection(r){const s=r.image?r.image.name:"";if(s.length===0)return void ye("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(gd.forImage(s)),this.sectionIndex.push(this.sections.length-1)):ye("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Cm(o,r,s,h,m,v,x,S,C,F,H,Y,ne,he,ge,Pe){const ke=mh.fromFeature(o,m);let De;Y===d.ah.vertical&&ke.verticalizePunctuation();const{processBidirectionalText:et,processStyledBidirectionalText:Ze}=fs;if(et&&ke.sections.length===1){De=[];const gt=et(ke.toString(),Sv(ke,F,v,r,h,he,ge));for(const Dt of gt){const Xt=new mh;Xt.text=Dt,Xt.sections=ke.sections;for(let jt=0;jt<Dt.length;jt++)Xt.sectionIndex.push(0);De.push(Xt)}}else if(Ze){De=[];const gt=Ze(ke.text,ke.sectionIndex,Sv(ke,F,v,r,h,he,ge));for(const Dt of gt){const Xt=new mh;Xt.text=Dt[0],Xt.sectionIndex=Dt[1],Xt.sections=ke.sections,De.push(Xt)}}else De=function(gt,Dt){const Xt=[],jt=gt.text;let Ct=0;for(const Vt of Dt)Xt.push(gt.substring(Ct,Vt)),Ct=Vt;return Ct<jt.length&&Xt.push(gt.substring(Ct,jt.length)),Xt}(ke,Sv(ke,F,v,r,h,he,ge));const Je=[],dt={positionedLines:Je,text:ke.toString(),top:H[1],bottom:H[1],left:H[0],right:H[0],writingMode:Y,iconsInText:!1,verticalizable:!1};return function(gt,Dt,Xt,jt,Ct,Vt,er,Lt,_t,Zt,Gt,_r){let Hr=0,Zr=md,Fn=0,Do=0;const Ii=Lt==="right"?1:Lt==="left"?0:.5;let Wn=0;for(const Rn of Ct){Rn.trim();const Xn=Rn.getMaxScale(),Vi=(Xn-1)*Gn,ro={positionedGlyphs:[],lineOffset:0};gt.positionedLines[Wn]=ro;const mi=ro.positionedGlyphs;let no=0;if(!Rn.length()){Zr+=Vt,++Wn;continue}for(let vn=0;vn<Rn.length();vn++){const Pr=Rn.getSection(vn),jn=Rn.getSectionIndex(vn),gi=Rn.getCharCode(vn);let Hn=0,aa=null,Ma=null,ka=null,Js=Gn;const sa=!(_t===d.ah.horizontal||!Gt&&!Yf(gi)||Gt&&(Mm[gi]||(Qn=gi,Bt.Arabic(Qn)||Bt["Arabic Supplement"](Qn)||Bt["Arabic Extended-A"](Qn)||Bt["Arabic Presentation Forms-A"](Qn)||Bt["Arabic Presentation Forms-B"](Qn))));if(Pr.imageName){const $o=jt[Pr.imageName];if(!$o)continue;ka=Pr.imageName,gt.iconsInText=gt.iconsInText||!0,Ma=$o.paddedRect;const io=$o.displaySize;Pr.scale=Pr.scale*Gn/_r,aa={width:io[0],height:io[1],left:to,top:-pS,advance:sa?io[1]:io[0]},Hn=Vi+(Gn-io[1]*Pr.scale),Js=aa.advance;const Qs=sa?io[0]*Pr.scale-Gn*Xn:io[1]*Pr.scale-Gn*Xn;Qs>0&&Qs>no&&(no=Qs)}else{const $o=Xt[Pr.fontStack],io=$o&&$o[gi];if(io&&io.rect)Ma=io.rect,aa=io.metrics;else{const Qs=Dt[Pr.fontStack],wd=Qs&&Qs[gi];if(!wd)continue;aa=wd.metrics}Hn=(Xn-Pr.scale)*Gn}sa?(gt.verticalizable=!0,mi.push({glyph:gi,imageName:ka,x:Hr,y:Zr+Hn,vertical:sa,scale:Pr.scale,fontStack:Pr.fontStack,sectionIndex:jn,metrics:aa,rect:Ma}),Hr+=Js*Pr.scale+Zt):(mi.push({glyph:gi,imageName:ka,x:Hr,y:Zr+Hn,vertical:sa,scale:Pr.scale,fontStack:Pr.fontStack,sectionIndex:jn,metrics:aa,rect:Ma}),Hr+=aa.advance*Pr.scale+Zt)}mi.length!==0&&(Fn=Math.max(Hr-Zt,Fn),vF(mi,0,mi.length-1,Ii,no)),Hr=0;const No=Vt*Xn+no;ro.lineOffset=Math.max(no,Vi),Zr+=No,Do=Math.max(No,Do),++Wn}var Qn;const Ci=Zr-md,{horizontalAlign:Ui,verticalAlign:Mi}=Ev(er);(function(Rn,Xn,Vi,ro,mi,no,No,vn,Pr){const jn=(Xn-Vi)*mi;let gi=0;gi=no!==No?-vn*ro-md:(-ro*Pr+.5)*No;for(const Hn of Rn)for(const aa of Hn.positionedGlyphs)aa.x+=jn,aa.y+=gi})(gt.positionedLines,Ii,Ui,Mi,Fn,Do,Vt,Ci,Ct.length),gt.top+=-Mi*Ci,gt.bottom=gt.top+Ci,gt.left+=-Ui*Fn,gt.right=gt.left+Fn}(dt,r,s,h,De,x,S,C,Y,F,ne,Pe),!function(gt){for(const Dt of gt)if(Dt.positionedGlyphs.length!==0)return!1;return!0}(Je)&&dt}const Mm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},gF={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function yS(o,r,s,h,m,v){if(r.imageName){const x=h[r.imageName];return x?x.displaySize[0]*r.scale*Gn/v+m:0}{const x=s[r.fontStack],S=x&&x[o];return S?S.metrics.advance*r.scale+m:0}}function vS(o,r,s,h){const m=Math.pow(o-r,2);return h?o<r?m/2:2*m:m+Math.abs(s)*s}function yF(o,r,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),r!==41&&r!==65289||(h+=50),h}function _S(o,r,s,h,m,v){let x=null,S=vS(r,s,m,v);for(const C of h){const F=vS(r-C.x,s,m,v)+C.badness;F<=S&&(x=C,S=F)}return{index:o,x:r,priorBreak:x,badness:S}}function xS(o){return o?xS(o.priorBreak).concat(o.index):[]}function Sv(o,r,s,h,m,v,x){if(v!=="point")return[];if(!o)return[];const S=[],C=function(ne,he,ge,Pe,ke,De){let et=0;for(let Ze=0;Ze<ne.length();Ze++){const Je=ne.getSection(Ze);et+=yS(ne.getCharCode(Ze),Je,Pe,ke,he,De)}return et/Math.max(1,Math.ceil(et/ge))}(o,r,s,h,m,x),F=o.text.indexOf("")>=0;let H=0;for(let ne=0;ne<o.length();ne++){const he=o.getSection(ne),ge=o.getCharCode(ne);if(Mm[ge]||(H+=yS(ge,he,h,m,r,x)),ne<o.length()-1){const Pe=!((Y=ge)<11904||!(Bt["Bopomofo Extended"](Y)||Bt.Bopomofo(Y)||Bt["CJK Compatibility Forms"](Y)||Bt["CJK Compatibility Ideographs"](Y)||Bt["CJK Compatibility"](Y)||Bt["CJK Radicals Supplement"](Y)||Bt["CJK Strokes"](Y)||Bt["CJK Symbols and Punctuation"](Y)||Bt["CJK Unified Ideographs Extension A"](Y)||Bt["CJK Unified Ideographs"](Y)||Bt["Enclosed CJK Letters and Months"](Y)||Bt["Halfwidth and Fullwidth Forms"](Y)||Bt.Hiragana(Y)||Bt["Ideographic Description Characters"](Y)||Bt["Kangxi Radicals"](Y)||Bt["Katakana Phonetic Extensions"](Y)||Bt.Katakana(Y)||Bt["Vertical Forms"](Y)||Bt["Yi Radicals"](Y)||Bt["Yi Syllables"](Y)));(gF[ge]||Pe||he.imageName)&&S.push(_S(ne+1,H,C,S,yF(ge,o.getCharCode(ne+1),Pe&&F),!1))}}var Y;return xS(_S(o.length(),H,C,S,0,!0))}function Ev(o){let r=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function vF(o,r,s,h,m){if(!h&&!m)return;const v=o[s],x=(o[s].x+v.metrics.advance*v.scale)*h;for(let S=r;S<=s;S++)o[S].x-=x,o[S].y+=m}function _F(o,r,s){const{horizontalAlign:h,verticalAlign:m}=Ev(s),v=r[0]-o.displaySize[0]*h,x=r[1]-o.displaySize[1]*m;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function wS(o){var r,s;let h=o.left,m=o.top,v=o.right-h,x=o.bottom-m;const S=(r=o.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",C=(s=o.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",F=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(C==="proportional"){if(S==="stretchOnly"&&v/x<F||S==="proportional"){const H=Math.ceil(x*F);h*=H/v,v=H}}else if(S==="proportional"&&C==="stretchOnly"&&F!==0&&v/x>F){const H=Math.ceil(v/F);m*=H/x,x=H}return{x1:h,y1:m,x2:h+v,y2:m+x}}function bS(o,r,s,h,m,v){const x=o.image;let S;if(x.content){const ke=x.content,De=x.pixelRatio||1;S=[ke[0]/De,ke[1]/De,x.displaySize[0]-ke[2]/De,x.displaySize[1]-ke[3]/De]}const C=r.left*v,F=r.right*v;let H,Y,ne,he;s==="width"||s==="both"?(he=m[0]+C-h[3],Y=m[0]+F+h[1]):(he=m[0]+(C+F-x.displaySize[0])/2,Y=he+x.displaySize[0]);const ge=r.top*v,Pe=r.bottom*v;return s==="height"||s==="both"?(H=m[1]+ge-h[0],ne=m[1]+Pe+h[2]):(H=m[1]+(ge+Pe-x.displaySize[1])/2,ne=H+x.displaySize[1]),{image:x,top:H,right:Y,bottom:ne,left:he,collisionPadding:S}}const yd=255,ms=128,Kl=yd*ms;function SS(o,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Kr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=s;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const S=h[v],C=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:C,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:C,minSize:s.evaluate(new Kr(S)),maxSize:s.evaluate(new Kr(C)),interpolationType:m}}}function Tv(o,r,s){let h="never";const m=o.get(r);return m?h=m:o.get(s)&&(h="always"),h}const xF=ql.VectorTileFeature.types,wF=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function km(o,r,s,h,m,v,x,S,C,F,H,Y,ne){const he=S?Math.min(Kl,Math.round(S[0])):0,ge=S?Math.min(Kl,Math.round(S[1])):0;o.emplaceBack(r,s,Math.round(32*h),Math.round(32*m),v,x,(he<<1)+(C?1:0),ge,16*F,16*H,256*Y,256*ne)}function Pv(o,r,s){o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s)}function bF(o){for(const r of o.sections)if(Jf(r.text))return!0;return!1}class Av{constructor(r){this.layoutVertexArray=new Lo,this.indexArray=new qn,this.programConfigurations=r,this.segments=new Vn,this.dynamicLayoutVertexArray=new ds,this.opacityVertexArray=new Gl,this.hasVisibleVertices=!1,this.placedSymbolArray=new rn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,s,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Q4.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,eF.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,wF,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ut("SymbolBuffers",Av);class Iv{constructor(r,s,h){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Vn,this.collisionVertexArray=new di}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,tF.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ut("CollisionBuffers",Iv);class gh{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=av([]),this.placementViewportMatrix=av([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=SS(this.zoom,s["text-size"]),this.iconSizeData=SS(this.zoom,s["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=Tv(h,"text-overlap","text-allow-overlap")!=="never"||Tv(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>d.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new Av(new Ju(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Av(new Ju(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new nn,this.lineVertexArray=new Ni,this.symbolInstances=new Ro,this.textAnchorOffsets=new ci}calculateGlyphDependencies(r,s,h,m,v){for(let x=0;x<r.length;x++)if(s[r.charCodeAt(x)]=!0,(h||m)&&v){const S=pd[r.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(r,s,h){const m=this.layers[0],v=m.layout,x=v.get("text-font"),S=v.get("text-field"),C=v.get("icon-image"),F=(S.value.kind!=="constant"||S.value.value instanceof bn&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),H=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,Y=v.get("symbol-sort-key");if(this.features=[],!F&&!H)return;const ne=s.iconDependencies,he=s.glyphDependencies,ge=s.availableImages,Pe=new Kr(this.zoom);for(const{feature:ke,id:De,index:et,sourceLayerIndex:Ze}of r){const Je=m._featureFilter.needGeometry,dt=ec(ke,Je);if(!m._featureFilter.filter(Pe,dt,h))continue;let gt,Dt;if(Je||(dt.geometry=Qu(ke)),F){const jt=m.getValueAndResolveTokens("text-field",dt,h,ge),Ct=bn.factory(jt),Vt=this.hasRTLText=this.hasRTLText||bF(Ct);(!Vt||fs.getRTLTextPluginStatus()==="unavailable"||Vt&&fs.isParsed())&&(gt=nF(Ct,m,dt))}if(H){const jt=m.getValueAndResolveTokens("icon-image",dt,h,ge);Dt=jt instanceof zi?jt:zi.fromString(jt)}if(!gt&&!Dt)continue;const Xt=this.sortFeaturesByKey?Y.evaluate(dt,{},h):void 0;if(this.features.push({id:De,text:gt,icon:Dt,index:et,sourceLayerIndex:Ze,geometry:dt.geometry,properties:ke.properties,type:xF[ke.type],sortKey:Xt}),Dt&&(ne[Dt.name]=!0),gt){const jt=x.evaluate(dt,{},h).join(","),Ct=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.ah.vertical)>=0;for(const Vt of gt.sections)if(Vt.image)ne[Vt.image.name]=!0;else{const er=Kf(gt.toString()),Lt=Vt.fontStack||jt,_t=he[Lt]=he[Lt]||{};this.calculateGlyphDependencies(Vt.text,_t,Ct,this.allowVerticalPlacement,er)}}}v.get("symbol-placement")==="line"&&(this.features=function(ke){const De={},et={},Ze=[];let Je=0;function dt(jt){Ze.push(ke[jt]),Je++}function gt(jt,Ct,Vt){const er=et[jt];return delete et[jt],et[Ct]=er,Ze[er].geometry[0].pop(),Ze[er].geometry[0]=Ze[er].geometry[0].concat(Vt[0]),er}function Dt(jt,Ct,Vt){const er=De[Ct];return delete De[Ct],De[jt]=er,Ze[er].geometry[0].shift(),Ze[er].geometry[0]=Vt[0].concat(Ze[er].geometry[0]),er}function Xt(jt,Ct,Vt){const er=Vt?Ct[0][Ct[0].length-1]:Ct[0][0];return`${jt}:${er.x}:${er.y}`}for(let jt=0;jt<ke.length;jt++){const Ct=ke[jt],Vt=Ct.geometry,er=Ct.text?Ct.text.toString():null;if(!er){dt(jt);continue}const Lt=Xt(er,Vt),_t=Xt(er,Vt,!0);if(Lt in et&&_t in De&&et[Lt]!==De[_t]){const Zt=Dt(Lt,_t,Vt),Gt=gt(Lt,_t,Ze[Zt].geometry);delete De[Lt],delete et[_t],et[Xt(er,Ze[Gt].geometry,!0)]=Gt,Ze[Zt].geometry=null}else Lt in et?gt(Lt,_t,Vt):_t in De?Dt(Lt,_t,Vt):(dt(jt),De[Lt]=Je-1,et[_t]=Je-1)}return Ze.filter(jt=>jt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ke,De)=>ke.sortKey-De.sortKey)}update(r,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(r,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const h=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(s[r.segment+1]),v=r.dist(s[r.segment]);const x={};for(let S=r.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:m},S<s.length-1&&(m+=s[S+1].dist(s[S]));for(let S=r.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const C=x[S];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(r,s,h,m,v,x,S,C,F,H,Y,ne){const he=r.indexArray,ge=r.layoutVertexArray,Pe=r.segments.prepareSegment(4*s.length,ge,he,this.canOverlap?x.sortKey:void 0),ke=this.glyphOffsetArray.length,De=Pe.vertexLength,et=this.allowVerticalPlacement&&S===d.ah.vertical?Math.PI/2:0,Ze=x.text&&x.text.sections;for(let Je=0;Je<s.length;Je++){const{tl:dt,tr:gt,bl:Dt,br:Xt,tex:jt,pixelOffsetTL:Ct,pixelOffsetBR:Vt,minFontScaleX:er,minFontScaleY:Lt,glyphOffset:_t,isSDF:Zt,sectionIndex:Gt}=s[Je],_r=Pe.vertexLength,Hr=_t[1];km(ge,C.x,C.y,dt.x,Hr+dt.y,jt.x,jt.y,h,Zt,Ct.x,Ct.y,er,Lt),km(ge,C.x,C.y,gt.x,Hr+gt.y,jt.x+jt.w,jt.y,h,Zt,Vt.x,Ct.y,er,Lt),km(ge,C.x,C.y,Dt.x,Hr+Dt.y,jt.x,jt.y+jt.h,h,Zt,Ct.x,Vt.y,er,Lt),km(ge,C.x,C.y,Xt.x,Hr+Xt.y,jt.x+jt.w,jt.y+jt.h,h,Zt,Vt.x,Vt.y,er,Lt),Pv(r.dynamicLayoutVertexArray,C,et),he.emplaceBack(_r,_r+1,_r+2),he.emplaceBack(_r+1,_r+2,_r+3),Pe.vertexLength+=4,Pe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(_t[0]),Je!==s.length-1&&Gt===s[Je+1].sectionIndex||r.programConfigurations.populatePaintArrays(ge.length,x,x.index,{},ne,Ze&&Ze[Gt])}r.placedSymbolArray.emplaceBack(C.x,C.y,ke,this.glyphOffsetArray.length-ke,De,F,H,C.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],S,0,!1,0,Y)}_addCollisionDebugVertex(r,s,h,m,v,x){return s.emplaceBack(0,0),r.emplaceBack(h.x,h.y,m,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,s,h,m,v,x,S){const C=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),F=C.vertexLength,H=v.layoutVertexArray,Y=v.collisionVertexArray,ne=S.anchorX,he=S.anchorY;this._addCollisionDebugVertex(H,Y,x,ne,he,new b(r,s)),this._addCollisionDebugVertex(H,Y,x,ne,he,new b(h,s)),this._addCollisionDebugVertex(H,Y,x,ne,he,new b(h,m)),this._addCollisionDebugVertex(H,Y,x,ne,he,new b(r,m)),C.vertexLength+=4;const ge=v.indexArray;ge.emplaceBack(F,F+1),ge.emplaceBack(F+1,F+2),ge.emplaceBack(F+2,F+3),ge.emplaceBack(F+3,F),C.primitiveLength+=4}addDebugCollisionBoxes(r,s,h,m){for(let v=r;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Iv(fi,aS.members,cn),this.iconCollisionBox=new Iv(fi,aS.members,cn);for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(r,s,h,m,v,x,S,C,F){const H={};for(let Y=s;Y<h;Y++){const ne=r.get(Y);H.textBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},H.textFeatureIndex=ne.featureIndex;break}for(let Y=m;Y<v;Y++){const ne=r.get(Y);H.verticalTextBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},H.verticalTextFeatureIndex=ne.featureIndex;break}for(let Y=x;Y<S;Y++){const ne=r.get(Y);H.iconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},H.iconFeatureIndex=ne.featureIndex;break}for(let Y=C;Y<F;Y++){const ne=r.get(Y);H.verticalIconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},H.verticalIconFeatureIndex=ne.featureIndex;break}return H}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,s){const h=r.placedSymbolArray.get(s),m=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<m;v+=4)r.indexArray.emplaceBack(v,v+1,v+2),r.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),h=Math.cos(r),m=[],v=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const C=this.symbolInstances.get(S);m.push(0|Math.round(s*C.anchorX+h*C.anchorY)),v.push(C.featureIndex)}return x.sort((S,C)=>m[S]-m[C]||v[C]-v[S]),x}addToSortKeyRanges(r,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,v,x)=>{m>=0&&x.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let ES,TS;Ut("SymbolBucket",gh,{omit:["layers","collisionBoxArray","features","compareText"]}),gh.MAX_GLYPHS=65535,gh.addDynamicAttributes=Pv;var Cv={get paint(){return TS=TS||new p({"icon-opacity":new sr(it.paint_symbol["icon-opacity"]),"icon-color":new sr(it.paint_symbol["icon-color"]),"icon-halo-color":new sr(it.paint_symbol["icon-halo-color"]),"icon-halo-width":new sr(it.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sr(it.paint_symbol["icon-halo-blur"]),"icon-translate":new Qt(it.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qt(it.paint_symbol["icon-translate-anchor"]),"text-opacity":new sr(it.paint_symbol["text-opacity"]),"text-color":new sr(it.paint_symbol["text-color"],{runtimeType:dr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new sr(it.paint_symbol["text-halo-color"]),"text-halo-width":new sr(it.paint_symbol["text-halo-width"]),"text-halo-blur":new sr(it.paint_symbol["text-halo-blur"]),"text-translate":new Qt(it.paint_symbol["text-translate"]),"text-translate-anchor":new Qt(it.paint_symbol["text-translate-anchor"])})},get layout(){return ES=ES||new p({"symbol-placement":new Qt(it.layout_symbol["symbol-placement"]),"symbol-spacing":new Qt(it.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Qt(it.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sr(it.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Qt(it.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qt(it.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Qt(it.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Qt(it.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qt(it.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qt(it.layout_symbol["icon-rotation-alignment"]),"icon-size":new sr(it.layout_symbol["icon-size"]),"icon-text-fit":new Qt(it.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qt(it.layout_symbol["icon-text-fit-padding"]),"icon-image":new sr(it.layout_symbol["icon-image"]),"icon-rotate":new sr(it.layout_symbol["icon-rotate"]),"icon-padding":new sr(it.layout_symbol["icon-padding"]),"icon-keep-upright":new Qt(it.layout_symbol["icon-keep-upright"]),"icon-offset":new sr(it.layout_symbol["icon-offset"]),"icon-anchor":new sr(it.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qt(it.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Qt(it.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qt(it.layout_symbol["text-rotation-alignment"]),"text-field":new sr(it.layout_symbol["text-field"]),"text-font":new sr(it.layout_symbol["text-font"]),"text-size":new sr(it.layout_symbol["text-size"]),"text-max-width":new sr(it.layout_symbol["text-max-width"]),"text-line-height":new Qt(it.layout_symbol["text-line-height"]),"text-letter-spacing":new sr(it.layout_symbol["text-letter-spacing"]),"text-justify":new sr(it.layout_symbol["text-justify"]),"text-radial-offset":new sr(it.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Qt(it.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new sr(it.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new sr(it.layout_symbol["text-anchor"]),"text-max-angle":new Qt(it.layout_symbol["text-max-angle"]),"text-writing-mode":new Qt(it.layout_symbol["text-writing-mode"]),"text-rotate":new sr(it.layout_symbol["text-rotate"]),"text-padding":new Qt(it.layout_symbol["text-padding"]),"text-keep-upright":new Qt(it.layout_symbol["text-keep-upright"]),"text-transform":new sr(it.layout_symbol["text-transform"]),"text-offset":new sr(it.layout_symbol["text-offset"]),"text-allow-overlap":new Qt(it.layout_symbol["text-allow-overlap"]),"text-overlap":new Qt(it.layout_symbol["text-overlap"]),"text-ignore-placement":new Qt(it.layout_symbol["text-ignore-placement"]),"text-optional":new Qt(it.layout_symbol["text-optional"])})}};class PS{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:nt,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ut("FormatSectionOverride",PS,{omit:["defaultValue"]});class Om extends _{constructor(r){super(r,Cv)}recalculate(r,s){if(super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const v of h)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,s,h,m){const v=this.layout.get(r).evaluate(s,{},h,m),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||kt(x.value)||!v?v:function(S,C){return C.replace(/{([^{}]+)}/g,(F,H)=>S&&H in S?String(S[H]):"")}(s.properties,v)}createBucket(r){return new gh(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Cv.paint.overridableProperties){if(!Om.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),h=new PS(s),m=new st(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Kt("source",m):new Jt("composite",m,s.value.zoomStops),this.paint._values[r]=new oa(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Om.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const h=r.get("text-field"),m=Cv.paint.properties[s];let v=!1;const x=S=>{for(const C of S)if(m.overrides&&m.overrides.hasOverride(C))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof bn)x(h.value.value.sections);else if(h.value.kind==="source"){const S=F=>{v||(F instanceof va&&yn(F.value)===ni?x(F.value.sections):F instanceof Cl?x(F.sections):F.eachChild(S))},C=h.value;C._styleExpression&&S(C._styleExpression.expression)}return v}}let AS;var SF={get paint(){return AS=AS||new p({"background-color":new Qt(it.paint_background["background-color"]),"background-pattern":new i(it.paint_background["background-pattern"]),"background-opacity":new Qt(it.paint_background["background-opacity"])})}};class EF extends _{constructor(r){super(r,SF)}}let IS;var TF={get paint(){return IS=IS||new p({"raster-opacity":new Qt(it.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qt(it.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qt(it.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qt(it.paint_raster["raster-brightness-max"]),"raster-saturation":new Qt(it.paint_raster["raster-saturation"]),"raster-contrast":new Qt(it.paint_raster["raster-contrast"]),"raster-resampling":new Qt(it.paint_raster["raster-resampling"]),"raster-fade-duration":new Qt(it.paint_raster["raster-fade-duration"])})}};class PF extends _{constructor(r){super(r,TF)}}class AF extends _{constructor(r){super(r,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class IF{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Mv=63710088e-1;class Yl{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Yl(U(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,h=this.lat*s,m=r.lat*s,v=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((r.lng-this.lng)*s);return Mv*Math.acos(Math.min(v,1))}static convert(r){if(r instanceof Yl)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Yl(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Yl(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const CS=2*Math.PI*Mv;function MS(o){return CS*Math.cos(o*Math.PI/180)}function kS(o){return(180+o)/360}function OS(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function FS(o,r){return o/MS(r)}function kv(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Fm{constructor(r,s,h=0){this.x=+r,this.y=+s,this.z=+h}static fromLngLat(r,s=0){const h=Yl.convert(r);return new Fm(kS(h.lng),OS(h.lat),FS(s,h.lat))}toLngLat(){return new Yl(360*this.x-180,kv(this.y))}toAltitude(){return this.z*MS(kv(this.y))}meterInMercatorCoordinateUnits(){return 1/CS*(r=kv(this.y),1/Math.cos(r*Math.PI/180));var r}}function RS(o,r,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,r*h-2*Math.PI*6378137/2]}class Ov{constructor(r,s,h){if(r<0||r>25||h<0||h>=Math.pow(2,r)||s<0||s>=Math.pow(2,r))throw new Error(`x=${s}, y=${h}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=s,this.y=h,this.key=vd(0,r,r,s,h)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s,h){const m=(x=this.y,S=this.z,C=RS(256*(v=this.x),256*(x=Math.pow(2,S)-x-1),S),F=RS(256*(v+1),256*(x+1),S),C[0]+","+C[1]+","+F[0]+","+F[1]);var v,x,S,C,F;const H=function(Y,ne,he){let ge,Pe="";for(let ke=Y;ke>0;ke--)ge=1<<ke-1,Pe+=(ne&ge?1:0)+(he&ge?2:0);return Pe}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,H).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const s=this.z-r.z;return s>0&&r.x===this.x>>s&&r.y===this.y>>s}getTilePoint(r){const s=Math.pow(2,this.z);return new b((r.x*s-this.x)*On,(r.y*s-this.y)*On)}toString(){return`${this.z}/${this.x}/${this.y}`}}class jS{constructor(r,s){this.wrap=r,this.canonical=s,this.key=vd(r,s.z,s.z,s.x,s.y)}}class Bo{constructor(r,s,h,m,v){if(r<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${h}`);this.overscaledZ=r,this.wrap=s,this.canonical=new Ov(h,+m,+v),this.key=vd(s,r,h,m,v)}clone(){return new Bo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-r;return r>this.canonical.z?new Bo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Bo(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(r,s){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-r;return r>this.canonical.z?vd(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y):vd(this.wrap*+s,r,r,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new Bo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new Bo(s,this.wrap,s,h,m),new Bo(s,this.wrap,s,h+1,m),new Bo(s,this.wrap,s,h,m+1),new Bo(s,this.wrap,s,h+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Bo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Bo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new jS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Fm(r.x-this.wrap,r.y))}}function vd(o,r,s,h,m){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*m+h).toString(36)+s.toString(36)+r.toString(36)}Ut("CanonicalTileID",Ov),Ut("OverscaledTileID",Bo,{omit:["posMatrix"]});class LS{constructor(r,s,h,m=1,v=1,x=1,S=0){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void ye(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const C=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=v,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let F=0;F<C;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(C,F)]=this.data[this._idx(C-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,C)]=this.data[this._idx(F,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let F=0;F<C;F++)for(let H=0;H<C;H++){const Y=this.get(F,H);Y>this.max&&(this.max=Y),Y<this.min&&(this.min=Y)}}get(r,s){const h=new Uint8Array(this.data.buffer),m=4*this._idx(r,s);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)}unpack(r,s,h){return r*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new zo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,s,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,v=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:m=v-1;break;case 1:v=m+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const C=-s*this.dim,F=-h*this.dim;for(let H=x;H<S;H++)for(let Y=m;Y<v;Y++)this.data[this._idx(Y,H)]=r.data[this._idx(Y+C,H+F)]}}Ut("DEMData",LS);class zS{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const h=r[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class BS{constructor(r,s,h,m,v){this.type="Feature",this._vectorTileFeature=r,r._z=s,r._x=h,r._y=m,this.properties=r.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(r[s]=this[s]);return r}}class DS{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new qu(On,16,0),this.grid3D=new qu(On,16,0),this.featureIndexArray=new jo,this.promoteId=s}insert(r,s,h,m,v,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,v);const C=x?this.grid3D:this.grid;for(let F=0;F<s.length;F++){const H=s[F],Y=[1/0,1/0,-1/0,-1/0];for(let ne=0;ne<H.length;ne++){const he=H[ne];Y[0]=Math.min(Y[0],he.x),Y[1]=Math.min(Y[1],he.y),Y[2]=Math.max(Y[2],he.x),Y[3]=Math.max(Y[3],he.y)}Y[0]<On&&Y[1]<On&&Y[2]>=0&&Y[3]>=0&&C.insert(S,Y[0],Y[1],Y[2],Y[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ql.VectorTile(new xv(this.rawTileData)).layers,this.sourceLayerCoder=new zS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,s,h,m){this.loadVTLayers();const v=r.params||{},x=On/r.tileSize/r.scale,S=kn(v.filter),C=r.queryGeometry,F=r.queryPadding*x,H=$S(C),Y=this.grid.query(H.minX-F,H.minY-F,H.maxX+F,H.maxY+F),ne=$S(r.cameraQueryGeometry),he=this.grid3D.query(ne.minX-F,ne.minY-F,ne.maxX+F,ne.maxY+F,(ke,De,et,Ze)=>function(Je,dt,gt,Dt,Xt){for(const Ct of Je)if(dt<=Ct.x&&gt<=Ct.y&&Dt>=Ct.x&&Xt>=Ct.y)return!0;const jt=[new b(dt,gt),new b(dt,Xt),new b(Dt,Xt),new b(Dt,gt)];if(Je.length>2){for(const Ct of jt)if(uh(Je,Ct))return!0}for(let Ct=0;Ct<Je.length-1;Ct++)if(u4(Je[Ct],Je[Ct+1],jt))return!0;return!1}(r.cameraQueryGeometry,ke-F,De-F,et+F,Ze+F));for(const ke of he)Y.push(ke);Y.sort(CF);const ge={};let Pe;for(let ke=0;ke<Y.length;ke++){const De=Y[ke];if(De===Pe)continue;Pe=De;const et=this.featureIndexArray.get(De);let Ze=null;this.loadMatchingFeature(ge,et.bucketIndex,et.sourceLayerIndex,et.featureIndex,S,v.layers,v.availableImages,s,h,m,(Je,dt,gt)=>(Ze||(Ze=Qu(Je)),dt.queryIntersectsFeature(C,Je,gt,Ze,this.z,r.transform,x,r.pixelPosMatrix)))}return ge}loadMatchingFeature(r,s,h,m,v,x,S,C,F,H,Y){const ne=this.bucketLayerIDs[s];if(x&&!function(ke,De){for(let et=0;et<ke.length;et++)if(De.indexOf(ke[et])>=0)return!0;return!1}(x,ne))return;const he=this.sourceLayerCoder.decode(h),ge=this.vtLayers[he].feature(m);if(v.needGeometry){const ke=ec(ge,!0);if(!v.filter(new Kr(this.tileID.overscaledZ),ke,this.tileID.canonical))return}else if(!v.filter(new Kr(this.tileID.overscaledZ),ge))return;const Pe=this.getId(ge,he);for(let ke=0;ke<ne.length;ke++){const De=ne[ke];if(x&&x.indexOf(De)<0)continue;const et=C[De];if(!et)continue;let Ze={};Pe&&H&&(Ze=H.getState(et.sourceLayer||"_geojsonTileLayer",Pe));const Je=P({},F[De]);Je.paint=NS(Je.paint,et.paint,ge,Ze,S),Je.layout=NS(Je.layout,et.layout,ge,Ze,S);const dt=!Y||Y(ge,et,Ze);if(!dt)continue;const gt=new BS(ge,this.z,this.x,this.y,Pe);gt.layer=Je;let Dt=r[De];Dt===void 0&&(Dt=r[De]=[]),Dt.push({featureIndex:m,feature:gt,intersectionZ:dt})}}lookupSymbolFeatures(r,s,h,m,v,x,S,C){const F={};this.loadVTLayers();const H=kn(v);for(const Y of r)this.loadMatchingFeature(F,h,m,Y,H,x,S,C,s);return F}hasLayer(r){for(const s of this.bucketLayerIDs)for(const h of s)if(r===h)return!0;return!1}getId(r,s){let h=r.id;return this.promoteId&&(h=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function NS(o,r,s,h,m){return B(o,(v,x)=>{const S=r instanceof rh?r.get(x):null;return S&&S.evaluate?S.evaluate(s,h,m):S})}function $S(o){let r=1/0,s=1/0,h=-1/0,m=-1/0;for(const v of o)r=Math.min(r,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),m=Math.max(m,v.y);return{minX:r,minY:s,maxX:h,maxY:m}}function CF(o,r){return r-o}function US(o,r,s,h,m){const v=[];for(let x=0;x<o.length;x++){const S=o[x];let C;for(let F=0;F<S.length-1;F++){let H=S[F],Y=S[F+1];H.x<r&&Y.x<r||(H.x<r?H=new b(r,H.y+(r-H.x)/(Y.x-H.x)*(Y.y-H.y))._round():Y.x<r&&(Y=new b(r,H.y+(r-H.x)/(Y.x-H.x)*(Y.y-H.y))._round()),H.y<s&&Y.y<s||(H.y<s?H=new b(H.x+(s-H.y)/(Y.y-H.y)*(Y.x-H.x),s)._round():Y.y<s&&(Y=new b(H.x+(s-H.y)/(Y.y-H.y)*(Y.x-H.x),s)._round()),H.x>=h&&Y.x>=h||(H.x>=h?H=new b(h,H.y+(h-H.x)/(Y.x-H.x)*(Y.y-H.y))._round():Y.x>=h&&(Y=new b(h,H.y+(h-H.x)/(Y.x-H.x)*(Y.y-H.y))._round()),H.y>=m&&Y.y>=m||(H.y>=m?H=new b(H.x+(m-H.y)/(Y.y-H.y)*(Y.x-H.x),m)._round():Y.y>=m&&(Y=new b(H.x+(m-H.y)/(Y.y-H.y)*(Y.x-H.x),m)._round()),C&&H.equals(C[C.length-1])||(C=[H],v.push(C)),C.push(Y)))))}}return v}Ut("FeatureIndex",DS,{omit:["rawTileData","sourceLayerCoder"]});class Jl extends b{constructor(r,s,h,m){super(r,s),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new Jl(this.x,this.y,this.angle,this.segment)}}function VS(o,r,s,h,m){if(r.segment===void 0||s===0)return!0;let v=r,x=r.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=o[x].dist(v),v=o[x]}S+=o[x].dist(o[x+1]),x++;const C=[];let F=0;for(;S<s/2;){const H=o[x],Y=o[x+1];if(!Y)return!1;let ne=o[x-1].angleTo(H)-H.angleTo(Y);for(ne=Math.abs((ne+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:S,angleDelta:ne}),F+=ne;S-C[0].distance>h;)F-=C.shift().angleDelta;if(F>m)return!1;x++,S+=H.dist(Y)}return!0}function GS(o){let r=0;for(let s=0;s<o.length-1;s++)r+=o[s].dist(o[s+1]);return r}function WS(o,r,s){return o?.6*r*s:0}function HS(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function MF(o,r,s,h,m,v){const x=WS(s,m,v),S=HS(s,h)*v;let C=0;const F=GS(o)/2;for(let H=0;H<o.length-1;H++){const Y=o[H],ne=o[H+1],he=Y.dist(ne);if(C+he>F){const ge=(F-C)/he,Pe=Yn.number(Y.x,ne.x,ge),ke=Yn.number(Y.y,ne.y,ge),De=new Jl(Pe,ke,ne.angleTo(Y),H);return De._round(),!x||VS(o,De,S,x,r)?De:void 0}C+=he}}function kF(o,r,s,h,m,v,x,S,C){const F=WS(h,v,x),H=HS(h,m),Y=H*x,ne=o[0].x===0||o[0].x===C||o[0].y===0||o[0].y===C;return r-Y<r/4&&(r=Y+r/4),ZS(o,ne?r/2*S%r:(H/2+2*v)*x*S%r,r,F,s,Y,ne,!1,C)}function ZS(o,r,s,h,m,v,x,S,C){const F=v/2,H=GS(o);let Y=0,ne=r-s,he=[];for(let ge=0;ge<o.length-1;ge++){const Pe=o[ge],ke=o[ge+1],De=Pe.dist(ke),et=ke.angleTo(Pe);for(;ne+s<Y+De;){ne+=s;const Ze=(ne-Y)/De,Je=Yn.number(Pe.x,ke.x,Ze),dt=Yn.number(Pe.y,ke.y,Ze);if(Je>=0&&Je<C&&dt>=0&&dt<C&&ne-F>=0&&ne+F<=H){const gt=new Jl(Je,dt,et,ge);gt._round(),h&&!VS(o,gt,v,h,m)||he.push(gt)}}Y+=De}return S||he.length||x||(he=ZS(o,Y/2,s,h,m,v,x,!0,C)),he}Ut("Anchor",Jl);const yh=to;function qS(o,r,s,h){const m=[],v=o.image,x=v.pixelRatio,S=v.paddedRect.w-2*yh,C=v.paddedRect.h-2*yh;let F={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const H=v.stretchX||[[0,S]],Y=v.stretchY||[[0,C]],ne=(_t,Zt)=>_t+Zt[1]-Zt[0],he=H.reduce(ne,0),ge=Y.reduce(ne,0),Pe=S-he,ke=C-ge;let De=0,et=he,Ze=0,Je=ge,dt=0,gt=Pe,Dt=0,Xt=ke;if(v.content&&h){const _t=v.content,Zt=_t[2]-_t[0],Gt=_t[3]-_t[1];(v.textFitWidth||v.textFitHeight)&&(F=wS(o)),De=Rm(H,0,_t[0]),Ze=Rm(Y,0,_t[1]),et=Rm(H,_t[0],_t[2]),Je=Rm(Y,_t[1],_t[3]),dt=_t[0]-De,Dt=_t[1]-Ze,gt=Zt-et,Xt=Gt-Je}const jt=F.x1,Ct=F.y1,Vt=F.x2-jt,er=F.y2-Ct,Lt=(_t,Zt,Gt,_r)=>{const Hr=jm(_t.stretch-De,et,Vt,jt),Zr=Lm(_t.fixed-dt,gt,_t.stretch,he),Fn=jm(Zt.stretch-Ze,Je,er,Ct),Do=Lm(Zt.fixed-Dt,Xt,Zt.stretch,ge),Ii=jm(Gt.stretch-De,et,Vt,jt),Wn=Lm(Gt.fixed-dt,gt,Gt.stretch,he),Qn=jm(_r.stretch-Ze,Je,er,Ct),Ci=Lm(_r.fixed-Dt,Xt,_r.stretch,ge),Ui=new b(Hr,Fn),Mi=new b(Ii,Fn),Rn=new b(Ii,Qn),Xn=new b(Hr,Qn),Vi=new b(Zr/x,Do/x),ro=new b(Wn/x,Ci/x),mi=r*Math.PI/180;if(mi){const vn=Math.sin(mi),Pr=Math.cos(mi),jn=[Pr,-vn,vn,Pr];Ui._matMult(jn),Mi._matMult(jn),Xn._matMult(jn),Rn._matMult(jn)}const no=_t.stretch+_t.fixed,No=Zt.stretch+Zt.fixed;return{tl:Ui,tr:Mi,bl:Xn,br:Rn,tex:{x:v.paddedRect.x+yh+no,y:v.paddedRect.y+yh+No,w:Gt.stretch+Gt.fixed-no,h:_r.stretch+_r.fixed-No},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Vi,pixelOffsetBR:ro,minFontScaleX:gt/x/Vt,minFontScaleY:Xt/x/er,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const _t=XS(H,Pe,he),Zt=XS(Y,ke,ge);for(let Gt=0;Gt<_t.length-1;Gt++){const _r=_t[Gt],Hr=_t[Gt+1];for(let Zr=0;Zr<Zt.length-1;Zr++)m.push(Lt(_r,Zt[Zr],Hr,Zt[Zr+1]))}}else m.push(Lt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:C+1}));return m}function Rm(o,r,s){let h=0;for(const m of o)h+=Math.max(r,Math.min(s,m[1]))-Math.max(r,Math.min(s,m[0]));return h}function XS(o,r,s){const h=[{fixed:-yh,stretch:0}];for(const[m,v]of o){const x=h[h.length-1];h.push({fixed:m-x.stretch,stretch:x.stretch}),h.push({fixed:m-x.stretch,stretch:x.stretch+(v-m)})}return h.push({fixed:r+yh,stretch:s}),h}function jm(o,r,s,h){return o/r*s+h}function Lm(o,r,s,h){return o-r*s/h}class zm{constructor(r,s,h,m,v,x,S,C,F,H){var Y;if(this.boxStartIndex=r.length,F){let ne=x.top,he=x.bottom;const ge=x.collisionPadding;ge&&(ne-=ge[1],he+=ge[3]);let Pe=he-ne;Pe>0&&(Pe=Math.max(10,Pe),this.circleDiameter=Pe)}else{const ne=!((Y=x.image)===null||Y===void 0)&&Y.content&&(x.image.textFitWidth||x.image.textFitHeight)?wS(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};ne.y1=ne.y1*S-C[0],ne.y2=ne.y2*S+C[2],ne.x1=ne.x1*S-C[3],ne.x2=ne.x2*S+C[1];const he=x.collisionPadding;if(he&&(ne.x1-=he[0]*S,ne.y1-=he[1]*S,ne.x2+=he[2]*S,ne.y2+=he[3]*S),H){const ge=new b(ne.x1,ne.y1),Pe=new b(ne.x2,ne.y1),ke=new b(ne.x1,ne.y2),De=new b(ne.x2,ne.y2),et=H*Math.PI/180;ge._rotate(et),Pe._rotate(et),ke._rotate(et),De._rotate(et),ne.x1=Math.min(ge.x,Pe.x,ke.x,De.x),ne.x2=Math.max(ge.x,Pe.x,ke.x,De.x),ne.y1=Math.min(ge.y,Pe.y,ke.y,De.y),ne.y2=Math.max(ge.y,Pe.y,ke.y,De.y)}r.emplaceBack(s.x,s.y,ne.x1,ne.y1,ne.x2,ne.y2,h,m,v)}this.boxEndIndex=r.length}}class OF{constructor(r=[],s=FF){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:h}=this,m=s[r];for(;r>0;){const v=r-1>>1,x=s[v];if(h(m,x)>=0)break;s[r]=x,r=v}s[r]=m}_down(r){const{data:s,compare:h}=this,m=this.length>>1,v=s[r];for(;r<m;){let x=1+(r<<1),S=s[x];const C=x+1;if(C<this.length&&h(s[C],S)<0&&(x=C,S=s[C]),h(S,v)>=0)break;s[r]=S,r=x}s[r]=v}}function FF(o,r){return o<r?-1:o>r?1:0}function RF(o,r=1,s=!1){let h=1/0,m=1/0,v=-1/0,x=-1/0;const S=o[0];for(let he=0;he<S.length;he++){const ge=S[he];(!he||ge.x<h)&&(h=ge.x),(!he||ge.y<m)&&(m=ge.y),(!he||ge.x>v)&&(v=ge.x),(!he||ge.y>x)&&(x=ge.y)}const C=Math.min(v-h,x-m);let F=C/2;const H=new OF([],jF);if(C===0)return new b(h,m);for(let he=h;he<v;he+=C)for(let ge=m;ge<x;ge+=C)H.push(new vh(he+F,ge+F,F,o));let Y=function(he){let ge=0,Pe=0,ke=0;const De=he[0];for(let et=0,Ze=De.length,Je=Ze-1;et<Ze;Je=et++){const dt=De[et],gt=De[Je],Dt=dt.x*gt.y-gt.x*dt.y;Pe+=(dt.x+gt.x)*Dt,ke+=(dt.y+gt.y)*Dt,ge+=3*Dt}return new vh(Pe/ge,ke/ge,0,he)}(o),ne=H.length;for(;H.length;){const he=H.pop();(he.d>Y.d||!Y.d)&&(Y=he,s&&console.log("found best %d after %d probes",Math.round(1e4*he.d)/1e4,ne)),he.max-Y.d<=r||(F=he.h/2,H.push(new vh(he.p.x-F,he.p.y-F,F,o)),H.push(new vh(he.p.x+F,he.p.y-F,F,o)),H.push(new vh(he.p.x-F,he.p.y+F,F,o)),H.push(new vh(he.p.x+F,he.p.y+F,F,o)),ne+=4)}return s&&(console.log(`num probes: ${ne}`),console.log(`best distance: ${Y.d}`)),Y.p}function jF(o,r){return r.max-o.max}function vh(o,r,s,h){this.p=new b(o,r),this.h=s,this.d=function(m,v){let x=!1,S=1/0;for(let C=0;C<v.length;C++){const F=v[C];for(let H=0,Y=F.length,ne=Y-1;H<Y;ne=H++){const he=F[H],ge=F[ne];he.y>m.y!=ge.y>m.y&&m.x<(ge.x-he.x)*(m.y-he.y)/(ge.y-he.y)+he.x&&(x=!x),S=Math.min(S,O2(m,he,ge))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var pi;d.aq=void 0,(pi=d.aq||(d.aq={}))[pi.center=1]="center",pi[pi.left=2]="left",pi[pi.right=3]="right",pi[pi.top=4]="top",pi[pi.bottom=5]="bottom",pi[pi["top-left"]=6]="top-left",pi[pi["top-right"]=7]="top-right",pi[pi["bottom-left"]=8]="bottom-left",pi[pi["bottom-right"]=9]="bottom-right";const Ql=7,Fv=Number.POSITIVE_INFINITY;function KS(o,r){return r[1]!==Fv?function(s,h,m){let v=0,x=0;switch(h=Math.abs(h),m=Math.abs(m),s){case"top-right":case"top-left":case"top":x=m-Ql;break;case"bottom-right":case"bottom-left":case"bottom":x=-m+Ql}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(o,r[0],r[1]):function(s,h){let m=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-Ql;break;case"bottom-right":case"bottom-left":v=-x+Ql;break;case"bottom":v=-h+Ql;break;case"top":v=h-Ql}switch(s){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=h;break;case"right":m=-h}return[m,v]}(o,r[0])}function YS(o,r,s){var h;const m=o.layout,v=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(r,{},s);if(v){const S=v.values,C=[];for(let F=0;F<S.length;F+=2){const H=C[F]=S[F],Y=S[F+1].map(ne=>ne*Gn);H.startsWith("top")?Y[1]-=Ql:H.startsWith("bottom")&&(Y[1]+=Ql),C[F+1]=Y}return new ai(C)}const x=m.get("text-variable-anchor");if(x){let S;S=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(r,{},s)*Gn,Fv]:m.get("text-offset").evaluate(r,{},s).map(F=>F*Gn);const C=[];for(const F of x)C.push(F,KS(F,S));return new ai(C)}return null}function Rv(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function LF(o,r,s,h,m,v,x,S,C,F,H){let Y=v.textMaxSize.evaluate(r,{});Y===void 0&&(Y=x);const ne=o.layers[0].layout,he=ne.get("icon-offset").evaluate(r,{},H),ge=QS(s.horizontal),Pe=x/24,ke=o.tilePixelRatio*Pe,De=o.tilePixelRatio*Y/24,et=o.tilePixelRatio*S,Ze=o.tilePixelRatio*ne.get("symbol-spacing"),Je=ne.get("text-padding")*o.tilePixelRatio,dt=function(_t,Zt,Gt,_r=1){const Hr=_t.get("icon-padding").evaluate(Zt,{},Gt),Zr=Hr&&Hr.values;return[Zr[0]*_r,Zr[1]*_r,Zr[2]*_r,Zr[3]*_r]}(ne,r,H,o.tilePixelRatio),gt=ne.get("text-max-angle")/180*Math.PI,Dt=ne.get("text-rotation-alignment")!=="viewport"&&ne.get("symbol-placement")!=="point",Xt=ne.get("icon-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",jt=ne.get("symbol-placement"),Ct=Ze/2,Vt=ne.get("icon-text-fit");let er;h&&Vt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(er=bS(h,s.vertical,Vt,ne.get("icon-text-fit-padding"),he,Pe)),ge&&(h=bS(h,ge,Vt,ne.get("icon-text-fit-padding"),he,Pe)));const Lt=(_t,Zt)=>{Zt.x<0||Zt.x>=On||Zt.y<0||Zt.y>=On||function(Gt,_r,Hr,Zr,Fn,Do,Ii,Wn,Qn,Ci,Ui,Mi,Rn,Xn,Vi,ro,mi,no,No,vn,Pr,jn,gi,Hn,aa){const Ma=Gt.addToLineVertexArray(_r,Hr);let ka,Js,sa,$o,io=0,Qs=0,wd=0,nE=0,Uv=-1,Vv=-1;const el={};let iE=sh("");if(Gt.allowVerticalPlacement&&Zr.vertical){const ki=Wn.layout.get("text-rotate").evaluate(Pr,{},Hn)+90;sa=new zm(Qn,_r,Ci,Ui,Mi,Zr.vertical,Rn,Xn,Vi,ki),Ii&&($o=new zm(Qn,_r,Ci,Ui,Mi,Ii,mi,no,Vi,ki))}if(Fn){const ki=Wn.layout.get("icon-rotate").evaluate(Pr,{}),Uo=Wn.layout.get("icon-text-fit")!=="none",rc=qS(Fn,ki,gi,Uo),Fa=Ii?qS(Ii,ki,gi,Uo):void 0;Js=new zm(Qn,_r,Ci,Ui,Mi,Fn,mi,no,!1,ki),io=4*rc.length;const nc=Gt.iconSizeData;let gs=null;nc.kind==="source"?(gs=[ms*Wn.layout.get("icon-size").evaluate(Pr,{})],gs[0]>Kl&&ye(`${Gt.layerIds[0]}: Value for "icon-size" is >= ${yd}. Reduce your "icon-size".`)):nc.kind==="composite"&&(gs=[ms*jn.compositeIconSizes[0].evaluate(Pr,{},Hn),ms*jn.compositeIconSizes[1].evaluate(Pr,{},Hn)],(gs[0]>Kl||gs[1]>Kl)&&ye(`${Gt.layerIds[0]}: Value for "icon-size" is >= ${yd}. Reduce your "icon-size".`)),Gt.addSymbols(Gt.icon,rc,gs,vn,No,Pr,d.ah.none,_r,Ma.lineStartIndex,Ma.lineLength,-1,Hn),Uv=Gt.icon.placedSymbolArray.length-1,Fa&&(Qs=4*Fa.length,Gt.addSymbols(Gt.icon,Fa,gs,vn,No,Pr,d.ah.vertical,_r,Ma.lineStartIndex,Ma.lineLength,-1,Hn),Vv=Gt.icon.placedSymbolArray.length-1)}const oE=Object.keys(Zr.horizontal);for(const ki of oE){const Uo=Zr.horizontal[ki];if(!ka){iE=sh(Uo.text);const Fa=Wn.layout.get("text-rotate").evaluate(Pr,{},Hn);ka=new zm(Qn,_r,Ci,Ui,Mi,Uo,Rn,Xn,Vi,Fa)}const rc=Uo.positionedLines.length===1;if(wd+=JS(Gt,_r,Uo,Do,Wn,Vi,Pr,ro,Ma,Zr.vertical?d.ah.horizontal:d.ah.horizontalOnly,rc?oE:[ki],el,Uv,jn,Hn),rc)break}Zr.vertical&&(nE+=JS(Gt,_r,Zr.vertical,Do,Wn,Vi,Pr,ro,Ma,d.ah.vertical,["vertical"],el,Vv,jn,Hn));const DF=ka?ka.boxStartIndex:Gt.collisionBoxArray.length,NF=ka?ka.boxEndIndex:Gt.collisionBoxArray.length,$F=sa?sa.boxStartIndex:Gt.collisionBoxArray.length,UF=sa?sa.boxEndIndex:Gt.collisionBoxArray.length,VF=Js?Js.boxStartIndex:Gt.collisionBoxArray.length,GF=Js?Js.boxEndIndex:Gt.collisionBoxArray.length,WF=$o?$o.boxStartIndex:Gt.collisionBoxArray.length,HF=$o?$o.boxEndIndex:Gt.collisionBoxArray.length;let Oa=-1;const Dm=(ki,Uo)=>ki&&ki.circleDiameter?Math.max(ki.circleDiameter,Uo):Uo;Oa=Dm(ka,Oa),Oa=Dm(sa,Oa),Oa=Dm(Js,Oa),Oa=Dm($o,Oa);const aE=Oa>-1?1:0;aE&&(Oa*=aa/Gn),Gt.glyphOffsetArray.length>=gh.MAX_GLYPHS&&ye("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Pr.sortKey!==void 0&&Gt.addToSortKeyRanges(Gt.symbolInstances.length,Pr.sortKey);const ZF=YS(Wn,Pr,Hn),[qF,XF]=function(ki,Uo){const rc=ki.length,Fa=Uo==null?void 0:Uo.values;if((Fa==null?void 0:Fa.length)>0)for(let nc=0;nc<Fa.length;nc+=2){const gs=Fa[nc+1];ki.emplaceBack(d.aq[Fa[nc]],gs[0],gs[1])}return[rc,ki.length]}(Gt.textAnchorOffsets,ZF);Gt.symbolInstances.emplaceBack(_r.x,_r.y,el.right>=0?el.right:-1,el.center>=0?el.center:-1,el.left>=0?el.left:-1,el.vertical||-1,Uv,Vv,iE,DF,NF,$F,UF,VF,GF,WF,HF,Ci,wd,nE,io,Qs,aE,0,Rn,Oa,qF,XF)}(o,Zt,_t,s,h,m,er,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,ke,[Je,Je,Je,Je],Dt,C,et,dt,Xt,he,r,v,F,H,x)};if(jt==="line")for(const _t of US(r.geometry,0,0,On,On)){const Zt=kF(_t,Ze,gt,s.vertical||ge,h,24,De,o.overscaling,On);for(const Gt of Zt)ge&&zF(o,ge.text,Ct,Gt)||Lt(_t,Gt)}else if(jt==="line-center"){for(const _t of r.geometry)if(_t.length>1){const Zt=MF(_t,gt,s.vertical||ge,h,24,De);Zt&&Lt(_t,Zt)}}else if(r.type==="Polygon")for(const _t of Fl(r.geometry,0)){const Zt=RF(_t,16);Lt(_t[0],new Jl(Zt.x,Zt.y,0))}else if(r.type==="LineString")for(const _t of r.geometry)Lt(_t,new Jl(_t[0].x,_t[0].y,0));else if(r.type==="Point")for(const _t of r.geometry)for(const Zt of _t)Lt([Zt],new Jl(Zt.x,Zt.y,0))}function JS(o,r,s,h,m,v,x,S,C,F,H,Y,ne,he,ge){const Pe=function(et,Ze,Je,dt,gt,Dt,Xt,jt){const Ct=dt.layout.get("text-rotate").evaluate(Dt,{})*Math.PI/180,Vt=[];for(const er of Ze.positionedLines)for(const Lt of er.positionedGlyphs){if(!Lt.rect)continue;const _t=Lt.rect||{};let Zt=pS+1,Gt=!0,_r=1,Hr=0;const Zr=(gt||jt)&&Lt.vertical,Fn=Lt.metrics.advance*Lt.scale/2;if(jt&&Ze.verticalizable&&(Hr=er.lineOffset/2-(Lt.imageName?-(Gn-Lt.metrics.width*Lt.scale)/2:(Lt.scale-1)*Gn)),Lt.imageName){const vn=Xt[Lt.imageName];Gt=vn.sdf,_r=vn.pixelRatio,Zt=to/_r}const Do=gt?[Lt.x+Fn,Lt.y]:[0,0];let Ii=gt?[0,0]:[Lt.x+Fn+Je[0],Lt.y+Je[1]-Hr],Wn=[0,0];Zr&&(Wn=Ii,Ii=[0,0]);const Qn=Lt.metrics.isDoubleResolution?2:1,Ci=(Lt.metrics.left-Zt)*Lt.scale-Fn+Ii[0],Ui=(-Lt.metrics.top-Zt)*Lt.scale+Ii[1],Mi=Ci+_t.w/Qn*Lt.scale/_r,Rn=Ui+_t.h/Qn*Lt.scale/_r,Xn=new b(Ci,Ui),Vi=new b(Mi,Ui),ro=new b(Ci,Rn),mi=new b(Mi,Rn);if(Zr){const vn=new b(-Fn,Fn-md),Pr=-Math.PI/2,jn=Gn/2-Fn,gi=new b(5-md-jn,-(Lt.imageName?jn:0)),Hn=new b(...Wn);Xn._rotateAround(Pr,vn)._add(gi)._add(Hn),Vi._rotateAround(Pr,vn)._add(gi)._add(Hn),ro._rotateAround(Pr,vn)._add(gi)._add(Hn),mi._rotateAround(Pr,vn)._add(gi)._add(Hn)}if(Ct){const vn=Math.sin(Ct),Pr=Math.cos(Ct),jn=[Pr,-vn,vn,Pr];Xn._matMult(jn),Vi._matMult(jn),ro._matMult(jn),mi._matMult(jn)}const no=new b(0,0),No=new b(0,0);Vt.push({tl:Xn,tr:Vi,bl:ro,br:mi,tex:_t,writingMode:Ze.writingMode,glyphOffset:Do,sectionIndex:Lt.sectionIndex,isSDF:Gt,pixelOffsetTL:no,pixelOffsetBR:No,minFontScaleX:0,minFontScaleY:0})}return Vt}(0,s,S,m,v,x,h,o.allowVerticalPlacement),ke=o.textSizeData;let De=null;ke.kind==="source"?(De=[ms*m.layout.get("text-size").evaluate(x,{})],De[0]>Kl&&ye(`${o.layerIds[0]}: Value for "text-size" is >= ${yd}. Reduce your "text-size".`)):ke.kind==="composite"&&(De=[ms*he.compositeTextSizes[0].evaluate(x,{},ge),ms*he.compositeTextSizes[1].evaluate(x,{},ge)],(De[0]>Kl||De[1]>Kl)&&ye(`${o.layerIds[0]}: Value for "text-size" is >= ${yd}. Reduce your "text-size".`)),o.addSymbols(o.text,Pe,De,S,v,x,F,r,C.lineStartIndex,C.lineLength,ne,ge);for(const et of H)Y[et]=o.text.placedSymbolArray.length-1;return 4*Pe.length}function QS(o){for(const r in o)return o[r];return null}function zF(o,r,s,h){const m=o.compareText;if(r in m){const v=m[r];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<s)return!0}else m[r]=[];return m[r].push(h),!1}const eE=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class jv{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=eE[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[S]=new Uint32Array(r,4,1);return new jv(S,x,v,r)}constructor(r,s=64,h=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const v=eE.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,S=r*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+C,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+C),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+C,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=r,this.coords[this._pos++]=s,h}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Lv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:S}=this,C=[0,v.length-1,0],F=[];for(;C.length;){const H=C.pop()||0,Y=C.pop()||0,ne=C.pop()||0;if(Y-ne<=S){for(let ke=ne;ke<=Y;ke++){const De=x[2*ke],et=x[2*ke+1];De>=r&&De<=h&&et>=s&&et<=m&&F.push(v[ke])}continue}const he=ne+Y>>1,ge=x[2*he],Pe=x[2*he+1];ge>=r&&ge<=h&&Pe>=s&&Pe<=m&&F.push(v[he]),(H===0?r<=ge:s<=Pe)&&(C.push(ne),C.push(he-1),C.push(1-H)),(H===0?h>=ge:m>=Pe)&&(C.push(he+1),C.push(Y),C.push(1-H))}return F}within(r,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:x}=this,S=[0,m.length-1,0],C=[],F=h*h;for(;S.length;){const H=S.pop()||0,Y=S.pop()||0,ne=S.pop()||0;if(Y-ne<=x){for(let ke=ne;ke<=Y;ke++)rE(v[2*ke],v[2*ke+1],r,s)<=F&&C.push(m[ke]);continue}const he=ne+Y>>1,ge=v[2*he],Pe=v[2*he+1];rE(ge,Pe,r,s)<=F&&C.push(m[he]),(H===0?r-h<=ge:s-h<=Pe)&&(S.push(ne),S.push(he-1),S.push(1-H)),(H===0?r+h>=ge:s+h>=Pe)&&(S.push(he+1),S.push(Y),S.push(1-H))}return C}}function Lv(o,r,s,h,m,v){if(m-h<=s)return;const x=h+m>>1;tE(o,r,x,h,m,v),Lv(o,r,s,h,x-1,1-v),Lv(o,r,s,x+1,m,1-v)}function tE(o,r,s,h,m,v){for(;m>h;){if(m-h>600){const F=m-h+1,H=s-h+1,Y=Math.log(F),ne=.5*Math.exp(2*Y/3),he=.5*Math.sqrt(Y*ne*(F-ne)/F)*(H-F/2<0?-1:1);tE(o,r,s,Math.max(h,Math.floor(s-H*ne/F+he)),Math.min(m,Math.floor(s+(F-H)*ne/F+he)),v)}const x=r[2*s+v];let S=h,C=m;for(_d(o,r,h,s),r[2*m+v]>x&&_d(o,r,h,m);S<C;){for(_d(o,r,S,C),S++,C--;r[2*S+v]<x;)S++;for(;r[2*C+v]>x;)C--}r[2*h+v]===x?_d(o,r,h,C):(C++,_d(o,r,C,m)),C<=s&&(h=C+1),s<=C&&(m=C-1)}}function _d(o,r,s,h){zv(o,s,h),zv(r,2*s,2*h),zv(r,2*s+1,2*h+1)}function zv(o,r,s){const h=o[r];o[r]=o[s],o[s]=h}function rE(o,r,s,h){const m=o-s,v=r-h;return m*m+v*v}var Bv;d.be=void 0,(Bv=d.be||(d.be={})).create="create",Bv.load="load",Bv.fullLoad="fullLoad";let Bm=null,xd=[];const Dv=1e3/60,Nv="loadTime",$v="fullLoadTime",BF={mark(o){performance.mark(o)},frame(o){const r=o;Bm!=null&&xd.push(r-Bm),Bm=r},clearMetrics(){Bm=null,xd=[],performance.clearMeasures(Nv),performance.clearMeasures($v);for(const o in d.be)performance.clearMarks(d.be[o])},getPerformanceMetrics(){performance.measure(Nv,d.be.create,d.be.load),performance.measure($v,d.be.create,d.be.fullLoad);const o=performance.getEntriesByName(Nv)[0].duration,r=performance.getEntriesByName($v)[0].duration,s=xd.length,h=1/(xd.reduce((v,x)=>v+x,0)/s/1e3),m=xd.filter(v=>v>Dv).reduce((v,x)=>v+(x-Dv)/Dv,0);return{loadTime:o,fullLoadTime:r,fps:h,percentDroppedFrames:m/(s+m)*100,totalFrames:s}}};d.$=Vn,d.A=ch,d.B=function(o){if(ce==null){const r=o.navigator?o.navigator.userAgent:null;ce=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return ce},d.C=class{constructor(o,r){this.target=o,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new IF(()=>this.process()),this.subscription=function(s,h,m,v){return s.addEventListener(h,m,!1),{unsubscribe:()=>{s.removeEventListener(h,m,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=oe(self)?o:window}registerMessageHandler(o,r){this.messageHandlers[o]=r}sendAsync(o,r){return new Promise((s,h)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:s,reject:h},r&&r.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];const S={id:m,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const v=[],x=Object.assign(Object.assign({},o),{id:m,sourceMapId:this.mapId,origin:location.origin,data:Xu(o.data,v)});this.target.postMessage(x,{transfer:v})})}receive(o){const r=o.data,s=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[s];const h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(oe(self)||r.mustQueue)return this.tasks[s]=r,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,r)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),r=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(o,r)}processTask(o,r){return u(this,void 0,void 0,function*(){if(r.type==="<response>"){const m=this.resolveRejects[o];return delete this.resolveRejects[o],m?void(r.error?m.reject(ia(r.error)):m.resolve(ia(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=ia(r.data),h=new AbortController;this.abortControllers[o]=h;try{const m=yield this.messageHandlers[r.type](r.sourceMapId,s,h);this.completeTask(o,null,m)}catch(m){this.completeTask(o,m)}})}completeTask(o,r,s){const h=[];delete this.abortControllers[o];const m={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?Xu(r):null,data:Xu(s,h)};this.target.postMessage(m,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.D=Qt,d.E=ur,d.F=function(){var o=new ch(16);return ch!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},d.G=He,d.H=function(o,r,s){var h,m,v,x,S,C,F,H,Y,ne,he,ge,Pe=s[0],ke=s[1],De=s[2];return r===o?(o[12]=r[0]*Pe+r[4]*ke+r[8]*De+r[12],o[13]=r[1]*Pe+r[5]*ke+r[9]*De+r[13],o[14]=r[2]*Pe+r[6]*ke+r[10]*De+r[14],o[15]=r[3]*Pe+r[7]*ke+r[11]*De+r[15]):(m=r[1],v=r[2],x=r[3],S=r[4],C=r[5],F=r[6],H=r[7],Y=r[8],ne=r[9],he=r[10],ge=r[11],o[0]=h=r[0],o[1]=m,o[2]=v,o[3]=x,o[4]=S,o[5]=C,o[6]=F,o[7]=H,o[8]=Y,o[9]=ne,o[10]=he,o[11]=ge,o[12]=h*Pe+S*ke+Y*De+r[12],o[13]=m*Pe+C*ke+ne*De+r[13],o[14]=v*Pe+F*ke+he*De+r[14],o[15]=x*Pe+H*ke+ge*De+r[15]),o},d.I=bv,d.J=function(o,r,s){var h=s[0],m=s[1],v=s[2];return o[0]=r[0]*h,o[1]=r[1]*h,o[2]=r[2]*h,o[3]=r[3]*h,o[4]=r[4]*m,o[5]=r[5]*m,o[6]=r[6]*m,o[7]=r[7]*m,o[8]=r[8]*v,o[9]=r[9]*v,o[10]=r[10]*v,o[11]=r[11]*v,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},d.K=L2,d.L=function(o,r){const s={};for(let h=0;h<r.length;h++){const m=r[h];m in o&&(s[m]=o[m])}return s},d.M=Yl,d.N=kS,d.O=OS,d.P=b,d.Q=Bo,d.R=zo,d.S=K,d.T=Ul,d.U=Z,d.V=de,d.W=On,d.X=G,d.Y=Fm,d.Z=class extends be{},d._=u,d.a=Oe,d.a$=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},d.a0=Ov,d.a1=k,d.a2=o=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(s=>{r.onloadstart=()=>{s(r)};for(const h of o){const m=window.document.createElement("source");Mt(h)||(r.crossOrigin="Anonymous"),m.src=h,r.appendChild(m)}})},d.a3=function(){return L++},d.a4=Sr,d.a5=gh,d.a6=kn,d.a7=ec,d.a8=Kr,d.a9=BS,d.aA=function(o){if(o.type==="custom")return new AF(o);switch(o.type){case"background":return new EF(o);case"circle":return new f4(o);case"fill":return new C4(o);case"fill-extrusion":return new G4(o);case"heatmap":return new p4(o);case"hillshade":return new g4(o);case"line":return new J4(o);case"raster":return new PF(o);case"symbol":return new Om(o)}},d.aB=q,d.aC=function(o,r){if(!o)return[{command:"setStyle",args:[r]}];let s=[];try{if(!qt(o.version,r.version))return[{command:"setStyle",args:[r]}];qt(o.center,r.center)||s.push({command:"setCenter",args:[r.center]}),qt(o.zoom,r.zoom)||s.push({command:"setZoom",args:[r.zoom]}),qt(o.bearing,r.bearing)||s.push({command:"setBearing",args:[r.bearing]}),qt(o.pitch,r.pitch)||s.push({command:"setPitch",args:[r.pitch]}),qt(o.sprite,r.sprite)||s.push({command:"setSprite",args:[r.sprite]}),qt(o.glyphs,r.glyphs)||s.push({command:"setGlyphs",args:[r.glyphs]}),qt(o.transition,r.transition)||s.push({command:"setTransition",args:[r.transition]}),qt(o.light,r.light)||s.push({command:"setLight",args:[r.light]}),qt(o.terrain,r.terrain)||s.push({command:"setTerrain",args:[r.terrain]}),qt(o.sky,r.sky)||s.push({command:"setSky",args:[r.sky]});const h={},m=[];(function(x,S,C,F){let H;for(H in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,H)&&(Object.prototype.hasOwnProperty.call(S,H)||D(H,C,F));for(H in S)Object.prototype.hasOwnProperty.call(S,H)&&(Object.prototype.hasOwnProperty.call(x,H)?qt(x[H],S[H])||(x[H].type==="geojson"&&S[H].type==="geojson"&&Xe(x,S,H)?Se(C,{command:"setGeoJSONSourceData",args:[H,S[H].data]}):xe(H,S,C,F)):N(H,S,C))})(o.sources,r.sources,m,h);const v=[];o.layers&&o.layers.forEach(x=>{"source"in x&&h[x.source]?s.push({command:"removeLayer",args:[x.id]}):v.push(x)}),s=s.concat(m),function(x,S,C){S=S||[];const F=(x=x||[]).map(ct),H=S.map(ct),Y=x.reduce(le,{}),ne=S.reduce(le,{}),he=F.slice(),ge=Object.create(null);let Pe,ke,De,et,Ze;for(let Je=0,dt=0;Je<F.length;Je++)Pe=F[Je],Object.prototype.hasOwnProperty.call(ne,Pe)?dt++:(Se(C,{command:"removeLayer",args:[Pe]}),he.splice(he.indexOf(Pe,dt),1));for(let Je=0,dt=0;Je<H.length;Je++)Pe=H[H.length-1-Je],he[he.length-1-Je]!==Pe&&(Object.prototype.hasOwnProperty.call(Y,Pe)?(Se(C,{command:"removeLayer",args:[Pe]}),he.splice(he.lastIndexOf(Pe,he.length-dt),1)):dt++,et=he[he.length-Je],Se(C,{command:"addLayer",args:[ne[Pe],et]}),he.splice(he.length-Je,0,Pe),ge[Pe]=!0);for(let Je=0;Je<H.length;Je++)if(Pe=H[Je],ke=Y[Pe],De=ne[Pe],!ge[Pe]&&!qt(ke,De))if(qt(ke.source,De.source)&&qt(ke["source-layer"],De["source-layer"])&&qt(ke.type,De.type)){for(Ze in tt(ke.layout,De.layout,C,Pe,null,"setLayoutProperty"),tt(ke.paint,De.paint,C,Pe,null,"setPaintProperty"),qt(ke.filter,De.filter)||Se(C,{command:"setFilter",args:[Pe,De.filter]}),qt(ke.minzoom,De.minzoom)&&qt(ke.maxzoom,De.maxzoom)||Se(C,{command:"setLayerZoomRange",args:[Pe,De.minzoom,De.maxzoom]}),ke)Object.prototype.hasOwnProperty.call(ke,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?tt(ke[Ze],De[Ze],C,Pe,Ze.slice(6),"setPaintProperty"):qt(ke[Ze],De[Ze])||Se(C,{command:"setLayerProperty",args:[Pe,Ze,De[Ze]]}));for(Ze in De)Object.prototype.hasOwnProperty.call(De,Ze)&&!Object.prototype.hasOwnProperty.call(ke,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?tt(ke[Ze],De[Ze],C,Pe,Ze.slice(6),"setPaintProperty"):qt(ke[Ze],De[Ze])||Se(C,{command:"setLayerProperty",args:[Pe,Ze,De[Ze]]}))}else Se(C,{command:"removeLayer",args:[Pe]}),et=he[he.lastIndexOf(Pe)+1],Se(C,{command:"addLayer",args:[De,et]})}(v,r.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[r]}]}return s},d.aD=function(o){const r=[],s=o.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},d.aE=function o(r,s){if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(let h=0;h<r.length;h++)if(!o(r[h],s[h]))return!1;return!0}if(typeof r=="object"&&r!==null&&s!==null){if(typeof s!="object"||Object.keys(r).length!==Object.keys(s).length)return!1;for(const h in r)if(!o(r[h],s[h]))return!1;return!0}return r===s},d.aF=B,d.aG=Q,d.aH=class extends Yu{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},d.aI=vm,d.aJ=class extends Yu{constructor(o,r){super(o,r),this.current=i4}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},d.aK=T2,d.aL=class extends Yu{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},d.aM=class extends Yu{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},d.aN=P2,d.aO=function(o,r,s,h,m,v,x){var S=1/(r-s),C=1/(h-m),F=1/(v-x);return o[0]=-2*S,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*C,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*F,o[11]=0,o[12]=(r+s)*S,o[13]=(m+h)*C,o[14]=(x+v)*F,o[15]=1,o},d.aP=kr,d.aQ=h4,d.aR=class extends mt{},d.aS=rF,d.aT=class extends Nt{},d.aU=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},d.aV=$2,d.aW=qs,d.aX=class extends Rt{},d.aY=qn,d.aZ=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]&&o[3]===r[3]&&o[4]===r[4]&&o[5]===r[5]&&o[6]===r[6]&&o[7]===r[7]&&o[8]===r[8]&&o[9]===r[9]&&o[10]===r[10]&&o[11]===r[11]&&o[12]===r[12]&&o[13]===r[13]&&o[14]===r[14]&&o[15]===r[15]},d.a_=function(o,r){var s=o[0],h=o[1],m=o[2],v=o[3],x=o[4],S=o[5],C=o[6],F=o[7],H=o[8],Y=o[9],ne=o[10],he=o[11],ge=o[12],Pe=o[13],ke=o[14],De=o[15],et=r[0],Ze=r[1],Je=r[2],dt=r[3],gt=r[4],Dt=r[5],Xt=r[6],jt=r[7],Ct=r[8],Vt=r[9],er=r[10],Lt=r[11],_t=r[12],Zt=r[13],Gt=r[14],_r=r[15];return Math.abs(s-et)<=$i*Math.max(1,Math.abs(s),Math.abs(et))&&Math.abs(h-Ze)<=$i*Math.max(1,Math.abs(h),Math.abs(Ze))&&Math.abs(m-Je)<=$i*Math.max(1,Math.abs(m),Math.abs(Je))&&Math.abs(v-dt)<=$i*Math.max(1,Math.abs(v),Math.abs(dt))&&Math.abs(x-gt)<=$i*Math.max(1,Math.abs(x),Math.abs(gt))&&Math.abs(S-Dt)<=$i*Math.max(1,Math.abs(S),Math.abs(Dt))&&Math.abs(C-Xt)<=$i*Math.max(1,Math.abs(C),Math.abs(Xt))&&Math.abs(F-jt)<=$i*Math.max(1,Math.abs(F),Math.abs(jt))&&Math.abs(H-Ct)<=$i*Math.max(1,Math.abs(H),Math.abs(Ct))&&Math.abs(Y-Vt)<=$i*Math.max(1,Math.abs(Y),Math.abs(Vt))&&Math.abs(ne-er)<=$i*Math.max(1,Math.abs(ne),Math.abs(er))&&Math.abs(he-Lt)<=$i*Math.max(1,Math.abs(he),Math.abs(Lt))&&Math.abs(ge-_t)<=$i*Math.max(1,Math.abs(ge),Math.abs(_t))&&Math.abs(Pe-Zt)<=$i*Math.max(1,Math.abs(Pe),Math.abs(Zt))&&Math.abs(ke-Gt)<=$i*Math.max(1,Math.abs(ke),Math.abs(Gt))&&Math.abs(De-_r)<=$i*Math.max(1,Math.abs(De),Math.abs(_r))},d.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,m,v)=>{const x=m||v;return r[h]=!x||x.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r},d.ab=function(o,r){const s=[];for(const h in o)h in r||s.push(h);return s},d.ac=X,d.ad=function(o,r,s){var h=Math.sin(s),m=Math.cos(s),v=r[0],x=r[1],S=r[2],C=r[3],F=r[4],H=r[5],Y=r[6],ne=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=v*m+F*h,o[1]=x*m+H*h,o[2]=S*m+Y*h,o[3]=C*m+ne*h,o[4]=F*m-v*h,o[5]=H*m-x*h,o[6]=Y*m-S*h,o[7]=ne*m-C*h,o},d.ae=function(o){var r=new ch(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},d.af=bm,d.ag=function(o,r){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:x}=o,S=m?X(bi.interpolationFactor(m,r,v,x),0,1):0;o.kind==="camera"?h=Yn.number(o.minSize,o.maxSize,S):s=S}return{uSizeT:s,uSize:h}},d.ai=function(o,{uSize:r,uSizeT:s},{lowerSize:h,upperSize:m}){return o.kind==="source"?h/ms:o.kind==="composite"?Yn.number(h/ms,m/ms,s):r},d.aj=Pv,d.ak=function(o,r,s,h){const m=r.y-o.y,v=r.x-o.x,x=h.y-s.y,S=h.x-s.x,C=x*v-S*m;if(C===0)return null;const F=(S*(o.y-s.y)-x*(o.x-s.x))/C;return new b(o.x+F*v,o.y+F*m)},d.al=US,d.am=M2,d.an=av,d.ao=function(o){let r=1/0,s=1/0,h=-1/0,m=-1/0;for(const v of o)r=Math.min(r,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),m=Math.max(m,v.y);return[r,s,h,m]},d.ap=Gn,d.ar=Tv,d.as=function(o,r){var s=r[0],h=r[1],m=r[2],v=r[3],x=r[4],S=r[5],C=r[6],F=r[7],H=r[8],Y=r[9],ne=r[10],he=r[11],ge=r[12],Pe=r[13],ke=r[14],De=r[15],et=s*S-h*x,Ze=s*C-m*x,Je=s*F-v*x,dt=h*C-m*S,gt=h*F-v*S,Dt=m*F-v*C,Xt=H*Pe-Y*ge,jt=H*ke-ne*ge,Ct=H*De-he*ge,Vt=Y*ke-ne*Pe,er=Y*De-he*Pe,Lt=ne*De-he*ke,_t=et*Lt-Ze*er+Je*Vt+dt*Ct-gt*jt+Dt*Xt;return _t?(o[0]=(S*Lt-C*er+F*Vt)*(_t=1/_t),o[1]=(m*er-h*Lt-v*Vt)*_t,o[2]=(Pe*Dt-ke*gt+De*dt)*_t,o[3]=(ne*gt-Y*Dt-he*dt)*_t,o[4]=(C*Ct-x*Lt-F*jt)*_t,o[5]=(s*Lt-m*Ct+v*jt)*_t,o[6]=(ke*Je-ge*Dt-De*Ze)*_t,o[7]=(H*Dt-ne*Je+he*Ze)*_t,o[8]=(x*er-S*Ct+F*Xt)*_t,o[9]=(h*Ct-s*er-v*Xt)*_t,o[10]=(ge*gt-Pe*Je+De*et)*_t,o[11]=(Y*Je-H*gt-he*et)*_t,o[12]=(S*jt-x*Vt-C*Xt)*_t,o[13]=(s*Vt-h*jt+m*Xt)*_t,o[14]=(Pe*Ze-ge*dt-ke*et)*_t,o[15]=(H*dt-Y*Ze+ne*et)*_t,o):null},d.at=Rv,d.au=Ev,d.av=jv,d.aw=function(){const o={},r=it.$version;for(const s in it.$root){const h=it.$root[s];if(h.required){let m=null;m=s==="version"?r:h.type==="array"?[]:{},m!=null&&(o[s]=m)}}return o},d.ax=cm,d.ay=ht,d.az=function(o){o=o.slice();const r=Object.create(null);for(let s=0;s<o.length;s++)r[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=cr(o[s],r[o[s].ref]));return o},d.b=J,d.b0=function(o,r,s){return o[0]=r[0]*s[0],o[1]=r[1]*s[1],o[2]=r[2]*s[2],o[3]=r[3]*s[3],o},d.b1=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},d.b2=U,d.b3=jS,d.b4=FS,d.b5=function(o,r,s,h,m){var v,x=1/Math.tan(r/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+h)*(v=1/(h-m)),o[14]=2*m*h*v):(o[10]=-1,o[14]=-2*h),o},d.b6=function(o,r,s){var h=Math.sin(s),m=Math.cos(s),v=r[4],x=r[5],S=r[6],C=r[7],F=r[8],H=r[9],Y=r[10],ne=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=v*m+F*h,o[5]=x*m+H*h,o[6]=S*m+Y*h,o[7]=C*m+ne*h,o[8]=F*m-v*h,o[9]=H*m-x*h,o[10]=Y*m-S*h,o[11]=ne*m-C*h,o},d.b7=V,d.b8=ae,d.b9=function(o){return o*Math.PI/180},d.bA=Tt,d.bB=fs,d.ba=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},d.bb=class extends me{},d.bc=Mv,d.bd=BF,d.bf=ot,d.bg=function(o,r){Oe.REGISTERED_PROTOCOLS[o]=r},d.bh=function(o){delete Oe.REGISTERED_PROTOCOLS[o]},d.bi=function(o,r){const s={};for(let m=0;m<o.length;m++){const v=r&&r[o[m].id]||Y0(o[m]);r&&(r[o[m].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(o[m])}const h=[];for(const m in s)h.push(s[m]);return h},d.bj=Ut,d.bk=zS,d.bl=DS,d.bm=gS,d.bn=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=On/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],s=r.layout,h=r._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new Kr(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Kr(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Kr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:F,maxZoom:H}=o.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Kr(F),o.canonical),h["text-size"].possiblyEvaluate(new Kr(H),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:F,maxZoom:H}=o.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Kr(F),o.canonical),h["icon-size"].possiblyEvaluate(new Kr(H),o.canonical)]}const v=s.get("text-line-height")*Gn,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),C=s.get("text-size");for(const F of o.bucket.features){const H=s.get("text-font").evaluate(F,{},o.canonical).join(","),Y=C.evaluate(F,{},o.canonical),ne=m.layoutTextSize.evaluate(F,{},o.canonical),he=m.layoutIconSize.evaluate(F,{},o.canonical),ge={horizontal:{},vertical:void 0},Pe=F.text;let ke,De=[0,0];if(Pe){const Je=Pe.toString(),dt=s.get("text-letter-spacing").evaluate(F,{},o.canonical)*Gn,gt=Q0(Je)?dt:0,Dt=s.get("text-anchor").evaluate(F,{},o.canonical),Xt=YS(r,F,o.canonical);if(!Xt){const Lt=s.get("text-radial-offset").evaluate(F,{},o.canonical);De=Lt?KS(Dt,[Lt*Gn,Fv]):s.get("text-offset").evaluate(F,{},o.canonical).map(_t=>_t*Gn)}let jt=x?"center":s.get("text-justify").evaluate(F,{},o.canonical);const Ct=s.get("symbol-placement"),Vt=Ct==="point"?s.get("text-max-width").evaluate(F,{},o.canonical)*Gn:0,er=()=>{o.bucket.allowVerticalPlacement&&Kf(Je)&&(ge.vertical=Cm(Pe,o.glyphMap,o.glyphPositions,o.imagePositions,H,Vt,v,Dt,"left",gt,De,d.ah.vertical,!0,Ct,ne,Y))};if(!x&&Xt){const Lt=new Set;if(jt==="auto")for(let Zt=0;Zt<Xt.values.length;Zt+=2)Lt.add(Rv(Xt.values[Zt]));else Lt.add(jt);let _t=!1;for(const Zt of Lt)if(!ge.horizontal[Zt])if(_t)ge.horizontal[Zt]=ge.horizontal[0];else{const Gt=Cm(Pe,o.glyphMap,o.glyphPositions,o.imagePositions,H,Vt,v,"center",Zt,gt,De,d.ah.horizontal,!1,Ct,ne,Y);Gt&&(ge.horizontal[Zt]=Gt,_t=Gt.positionedLines.length===1)}er()}else{jt==="auto"&&(jt=Rv(Dt));const Lt=Cm(Pe,o.glyphMap,o.glyphPositions,o.imagePositions,H,Vt,v,Dt,jt,gt,De,d.ah.horizontal,!1,Ct,ne,Y);Lt&&(ge.horizontal[jt]=Lt),er(),Kf(Je)&&x&&S&&(ge.vertical=Cm(Pe,o.glyphMap,o.glyphPositions,o.imagePositions,H,Vt,v,Dt,jt,gt,De,d.ah.vertical,!1,Ct,ne,Y))}}let et=!1;if(F.icon&&F.icon.name){const Je=o.imageMap[F.icon.name];Je&&(ke=_F(o.imagePositions[F.icon.name],s.get("icon-offset").evaluate(F,{},o.canonical),s.get("icon-anchor").evaluate(F,{},o.canonical)),et=!!Je.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=et:o.bucket.sdfIcons!==et&&ye("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Je.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Ze=QS(ge.horizontal)||ge.vertical;o.bucket.iconsInText=!!Ze&&Ze.iconsInText,(Ze||ke)&&LF(o.bucket,F,ge,ke,o.imageMap,m,ne,he,De,et,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},d.bo=vv,d.bp=mv,d.bq=yv,d.br=ql,d.bs=xv,d.bt=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},d.bu=function(o,r,s,h,m){return u(this,void 0,void 0,function*(){if(Z())try{return yield de(o,r,s,h,m)}catch{}return function(v,x,S,C,F){const H=v.width,Y=v.height;we&&Te||(we=new OffscreenCanvas(H,Y),Te=we.getContext("2d",{willReadFrequently:!0})),we.width=H,we.height=Y,Te.drawImage(v,0,0,H,Y);const ne=Te.getImageData(x,S,C,F);return Te.clearRect(0,0,H,Y),ne.data}(o,r,s,h,m)})},d.bv=LS,d.bw=w,d.bx=E,d.by=sS,d.bz=function(o){return o.message===Ne},d.c=Ie,d.d=o=>u(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(r)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.e=P,d.f=o=>new Promise((r,s)=>{const h=new Image;h.onload=()=>{r(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=re})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(m):re}),d.g=qe,d.h=(o,r)=>xt(P(o,{type:"json"}),r),d.i=oe,d.j=zt,d.k=Ht,d.l=(o,r)=>xt(P(o,{type:"arrayBuffer"}),r),d.m=xt,d.n=function(o){return new xv(o).readFields(dF,[])},d.o=ld,d.p=mS,d.q=p,d.r=J0,d.s=Mt,d.t=Xf,d.u=Bt,d.v=it,d.w=ye,d.x=Zu,d.y=function([o,r,s]){return r+=90,r*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(s),y:o*Math.sin(r)*Math.sin(s),z:o*Math.cos(s)}},d.z=Yn}),l("worker",["./shared"],function(d){class u{constructor(ie){this.keyCache={},ie&&this.replace(ie)}replace(ie){this._layerConfigs={},this._layers={},this.update(ie,[])}update(ie,ue){for(const Fe of ie){this._layerConfigs[Fe.id]=Fe;const Be=this._layers[Fe.id]=d.aA(Fe);Be._featureFilter=d.a6(Be.filter),this.keyCache[Fe.id]&&delete this.keyCache[Fe.id]}for(const Fe of ue)delete this.keyCache[Fe],delete this._layerConfigs[Fe],delete this._layers[Fe];this.familiesBySource={};const pe=d.bi(Object.values(this._layerConfigs),this.keyCache);for(const Fe of pe){const Be=Fe.map(lt=>this._layers[lt.id]),je=Be[0];if(je.visibility==="none")continue;const Ue=je.source||"";let Le=this.familiesBySource[Ue];Le||(Le=this.familiesBySource[Ue]={});const Qe=je.sourceLayer||"_geojsonTileLayer";let ft=Le[Qe];ft||(ft=Le[Qe]=[]),ft.push(Be)}}}class w{constructor(ie){const ue={},pe=[];for(const Ue in ie){const Le=ie[Ue],Qe=ue[Ue]={};for(const ft in Le){const lt=Le[+ft];if(!lt||lt.bitmap.width===0||lt.bitmap.height===0)continue;const ut={x:0,y:0,w:lt.bitmap.width+2,h:lt.bitmap.height+2};pe.push(ut),Qe[ft]={rect:ut,metrics:lt.metrics}}}const{w:Fe,h:Be}=d.p(pe),je=new d.o({width:Fe||1,height:Be||1});for(const Ue in ie){const Le=ie[Ue];for(const Qe in Le){const ft=Le[+Qe];if(!ft||ft.bitmap.width===0||ft.bitmap.height===0)continue;const lt=ue[Ue][Qe].rect;d.o.copy(ft.bitmap,je,{x:0,y:0},{x:lt.x+1,y:lt.y+1},ft.bitmap)}}this.image=je,this.positions=ue}}d.bj("GlyphAtlas",w);class E{constructor(ie){this.tileID=new d.Q(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId,this.inFlightDependencies=[]}parse(ie,ue,pe,Fe){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=ie,this.collisionBoxArray=new d.a4;const Be=new d.bk(Object.keys(ie.layers).sort()),je=new d.bl(this.tileID,this.promoteId);je.bucketLayerIDs=[];const Ue={},Le={featureIndex:je,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:pe},Qe=ue.familiesBySource[this.source];for(const pr in Qe){const Qr=ie.layers[pr];if(!Qr)continue;Qr.version===1&&d.w(`Vector tile source "${this.source}" layer "${pr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const xn=Be.encode(pr),ii=[];for(let wi=0;wi<Qr.length;wi++){const wn=Qr.feature(wi),Xa=je.getId(wn,pr);ii.push({feature:wn,id:Xa,index:wi,sourceLayerIndex:xn})}for(const wi of Qe[pr]){const wn=wi[0];wn.source!==this.source&&d.w(`layer.source = ${wn.source} does not equal this.source = ${this.source}`),wn.minzoom&&this.zoom<Math.floor(wn.minzoom)||wn.maxzoom&&this.zoom>=wn.maxzoom||wn.visibility!=="none"&&(I(wi,this.zoom,pe),(Ue[wn.id]=wn.createBucket({index:je.bucketLayerIDs.length,layers:wi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:xn,sourceID:this.source})).populate(ii,Le,this.tileID.canonical),je.bucketLayerIDs.push(wi.map(Xa=>Xa.id)))}}const ft=d.aF(Le.glyphDependencies,pr=>Object.keys(pr).map(Number));this.inFlightDependencies.forEach(pr=>pr==null?void 0:pr.abort()),this.inFlightDependencies=[];let lt=Promise.resolve({});if(Object.keys(ft).length){const pr=new AbortController;this.inFlightDependencies.push(pr),lt=Fe.sendAsync({type:"GG",data:{stacks:ft,source:this.source,tileID:this.tileID,type:"glyphs"}},pr)}const ut=Object.keys(Le.iconDependencies);let nr=Promise.resolve({});if(ut.length){const pr=new AbortController;this.inFlightDependencies.push(pr),nr=Fe.sendAsync({type:"GI",data:{icons:ut,source:this.source,tileID:this.tileID,type:"icons"}},pr)}const Yt=Object.keys(Le.patternDependencies);let Er=Promise.resolve({});if(Yt.length){const pr=new AbortController;this.inFlightDependencies.push(pr),Er=Fe.sendAsync({type:"GI",data:{icons:Yt,source:this.source,tileID:this.tileID,type:"patterns"}},pr)}const[lr,Tr,Dr]=yield Promise.all([lt,nr,Er]),Vr=new w(lr),sn=new d.bm(Tr,Dr);for(const pr in Ue){const Qr=Ue[pr];Qr instanceof d.a5?(I(Qr.layers,this.zoom,pe),d.bn({bucket:Qr,glyphMap:lr,glyphPositions:Vr.positions,imageMap:Tr,imagePositions:sn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Qr.hasPattern&&(Qr instanceof d.bo||Qr instanceof d.bp||Qr instanceof d.bq)&&(I(Qr.layers,this.zoom,pe),Qr.addFeatures(Le,this.tileID.canonical,sn.patternPositions))}return this.status="done",{buckets:Object.values(Ue).filter(pr=>!pr.isEmpty()),featureIndex:je,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Vr.image,imageAtlas:sn,glyphMap:this.returnDependencies?lr:null,iconMap:this.returnDependencies?Tr:null,glyphPositions:this.returnDependencies?Vr.positions:null}})}}function I(Me,ie,ue){const pe=new d.a8(ie);for(const Fe of Me)Fe.recalculate(pe,ue)}class b{constructor(ie,ue,pe){this.actor=ie,this.layerIndex=ue,this.availableImages=pe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ie,ue){return d._(this,void 0,void 0,function*(){const pe=yield d.l(ie.request,ue);try{return{vectorTile:new d.br.VectorTile(new d.bs(pe.data)),rawData:pe.data,cacheControl:pe.cacheControl,expires:pe.expires}}catch(Fe){const Be=new Uint8Array(pe.data);let je=`Unable to parse the tile at ${ie.request.url}, `;throw je+=Be[0]===31&&Be[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Fe.messge}`,new Error(je)}})}loadTile(ie){return d._(this,void 0,void 0,function*(){const ue=ie.uid,pe=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new d.bt(ie.request),Fe=new E(ie);this.loading[ue]=Fe;const Be=new AbortController;Fe.abort=Be;try{const je=yield this.loadVectorTile(ie,Be);if(delete this.loading[ue],!je)return null;const Ue=je.rawData,Le={};je.expires&&(Le.expires=je.expires),je.cacheControl&&(Le.cacheControl=je.cacheControl);const Qe={};if(pe){const lt=pe.finish();lt&&(Qe.resourceTiming=JSON.parse(JSON.stringify(lt)))}Fe.vectorTile=je.vectorTile;const ft=Fe.parse(je.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ue]=Fe,this.fetching[ue]={rawTileData:Ue,cacheControl:Le,resourceTiming:Qe};try{const lt=yield ft;return d.e({rawTileData:Ue.slice(0)},lt,Le,Qe)}finally{delete this.fetching[ue]}}catch(je){throw delete this.loading[ue],Fe.status="done",this.loaded[ue]=Fe,je}})}reloadTile(ie){return d._(this,void 0,void 0,function*(){const ue=ie.uid;if(!this.loaded||!this.loaded[ue])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const pe=this.loaded[ue];if(pe.showCollisionBoxes=ie.showCollisionBoxes,pe.status==="parsing"){const Fe=yield pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor);let Be;if(this.fetching[ue]){const{rawTileData:je,cacheControl:Ue,resourceTiming:Le}=this.fetching[ue];delete this.fetching[ue],Be=d.e({rawTileData:je.slice(0)},Fe,Ue,Le)}else Be=Fe;return Be}if(pe.status==="done"&&pe.vectorTile)return pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(ie){return d._(this,void 0,void 0,function*(){const ue=this.loading,pe=ie.uid;ue&&ue[pe]&&ue[pe].abort&&(ue[pe].abort.abort(),delete ue[pe])})}removeTile(ie){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ie.uid]&&delete this.loaded[ie.uid]})}}class T{constructor(){this.loaded={}}loadTile(ie){return d._(this,void 0,void 0,function*(){const{uid:ue,encoding:pe,rawImageData:Fe,redFactor:Be,greenFactor:je,blueFactor:Ue,baseShift:Le}=ie,Qe=Fe.width+2,ft=Fe.height+2,lt=d.b(Fe)?new d.R({width:Qe,height:ft},yield d.bu(Fe,-1,-1,Qe,ft)):Fe,ut=new d.bv(ue,lt,pe,Be,je,Ue,Le);return this.loaded=this.loaded||{},this.loaded[ue]=ut,ut})}removeTile(ie){const ue=this.loaded,pe=ie.uid;ue&&ue[pe]&&delete ue[pe]}}function R(Me,ie){if(Me.length!==0){z(Me[0],ie);for(var ue=1;ue<Me.length;ue++)z(Me[ue],!ie)}}function z(Me,ie){for(var ue=0,pe=0,Fe=0,Be=Me.length,je=Be-1;Fe<Be;je=Fe++){var Ue=(Me[Fe][0]-Me[je][0])*(Me[je][1]+Me[Fe][1]),Le=ue+Ue;pe+=Math.abs(ue)>=Math.abs(Ue)?ue-Le+Ue:Ue-Le+ue,ue=Le}ue+pe>=0!=!!ie&&Me.reverse()}var j=d.bw(function Me(ie,ue){var pe,Fe=ie&&ie.type;if(Fe==="FeatureCollection")for(pe=0;pe<ie.features.length;pe++)Me(ie.features[pe],ue);else if(Fe==="GeometryCollection")for(pe=0;pe<ie.geometries.length;pe++)Me(ie.geometries[pe],ue);else if(Fe==="Feature")Me(ie.geometry,ue);else if(Fe==="Polygon")R(ie.coordinates,ue);else if(Fe==="MultiPolygon")for(pe=0;pe<ie.coordinates.length;pe++)R(ie.coordinates[pe],ue);return ie});const se=d.br.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},Z=d.bx,V=d.br.VectorTileFeature,ae=X;function X(Me,ie){this.options=ie||{},this.features=Me,this.length=Me.length}function U(Me,ie){this.id=typeof Me.id=="number"?Me.id:void 0,this.type=Me.type,this.rawGeometry=Me.type===1?[Me.geometry]:Me.geometry,this.properties=Me.tags,this.extent=ie||4096}X.prototype.feature=function(Me){return new U(this.features[Me],this.options.extent)},U.prototype.loadGeometry=function(){var Me=this.rawGeometry;this.geometry=[];for(var ie=0;ie<Me.length;ie++){for(var ue=Me[ie],pe=[],Fe=0;Fe<ue.length;Fe++)pe.push(new Z(ue[Fe][0],ue[Fe][1]));this.geometry.push(pe)}return this.geometry},U.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Me=this.geometry,ie=1/0,ue=-1/0,pe=1/0,Fe=-1/0,Be=0;Be<Me.length;Be++)for(var je=Me[Be],Ue=0;Ue<je.length;Ue++){var Le=je[Ue];ie=Math.min(ie,Le.x),ue=Math.max(ue,Le.x),pe=Math.min(pe,Le.y),Fe=Math.max(Fe,Le.y)}return[ie,pe,ue,Fe]},U.prototype.toGeoJSON=V.prototype.toGeoJSON;var P=d.by,L=ae;function B(Me){var ie=new P;return function(ue,pe){for(var Fe in ue.layers)pe.writeMessage(3,Q,ue.layers[Fe])}(Me,ie),ie.finish()}function Q(Me,ie){var ue;ie.writeVarintField(15,Me.version||1),ie.writeStringField(1,Me.name||""),ie.writeVarintField(5,Me.extent||4096);var pe={keys:[],values:[],keycache:{},valuecache:{}};for(ue=0;ue<Me.length;ue++)pe.feature=Me.feature(ue),ie.writeMessage(2,q,pe);var Fe=pe.keys;for(ue=0;ue<Fe.length;ue++)ie.writeStringField(3,Fe[ue]);var Be=pe.values;for(ue=0;ue<Be.length;ue++)ie.writeMessage(4,ce,Be[ue])}function q(Me,ie){var ue=Me.feature;ue.id!==void 0&&ie.writeVarintField(1,ue.id),ie.writeMessage(2,ve,Me),ie.writeVarintField(3,ue.type),ie.writeMessage(4,oe,ue)}function ve(Me,ie){var ue=Me.feature,pe=Me.keys,Fe=Me.values,Be=Me.keycache,je=Me.valuecache;for(var Ue in ue.properties){var Le=ue.properties[Ue],Qe=Be[Ue];if(Le!==null){Qe===void 0&&(pe.push(Ue),Be[Ue]=Qe=pe.length-1),ie.writeVarint(Qe);var ft=typeof Le;ft!=="string"&&ft!=="boolean"&&ft!=="number"&&(Le=JSON.stringify(Le));var lt=ft+":"+Le,ut=je[lt];ut===void 0&&(Fe.push(Le),je[lt]=ut=Fe.length-1),ie.writeVarint(ut)}}}function ye(Me,ie){return(ie<<3)+(7&Me)}function fe(Me){return Me<<1^Me>>31}function oe(Me,ie){for(var ue=Me.loadGeometry(),pe=Me.type,Fe=0,Be=0,je=ue.length,Ue=0;Ue<je;Ue++){var Le=ue[Ue],Qe=1;pe===1&&(Qe=Le.length),ie.writeVarint(ye(1,Qe));for(var ft=pe===3?Le.length-1:Le.length,lt=0;lt<ft;lt++){lt===1&&pe!==1&&ie.writeVarint(ye(2,ft-1));var ut=Le[lt].x-Fe,nr=Le[lt].y-Be;ie.writeVarint(fe(ut)),ie.writeVarint(fe(nr)),Fe+=ut,Be+=nr}pe===3&&ie.writeVarint(ye(7,1))}}function ce(Me,ie){var ue=typeof Me;ue==="string"?ie.writeStringField(1,Me):ue==="boolean"?ie.writeBooleanField(7,Me):ue==="number"&&(Me%1!=0?ie.writeDoubleField(3,Me):Me<0?ie.writeSVarintField(6,Me):ie.writeVarintField(5,Me))}K.exports=B,K.exports.fromVectorTileJs=B,K.exports.fromGeojsonVt=function(Me,ie){ie=ie||{};var ue={};for(var pe in Me)ue[pe]=new L(Me[pe].features,ie),ue[pe].name=pe,ue[pe].version=ie.version,ue[pe].extent=ie.extent;return B({layers:ue})},K.exports.GeoJSONWrapper=L;var J=d.bw(K.exports);const re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Me=>Me},de=Math.fround||(we=new Float32Array(1),Me=>(we[0]=+Me,we[0]));var we;const Te=3,Ne=5,Ie=6;class Oe{constructor(ie){this.options=Object.assign(Object.create(re),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:ue,minZoom:pe,maxZoom:Fe}=this.options;ue&&console.time("total time");const Be=`prepare ${ie.length} points`;ue&&console.time(Be),this.points=ie;const je=[];for(let Le=0;Le<ie.length;Le++){const Qe=ie[Le];if(!Qe.geometry)continue;const[ft,lt]=Qe.geometry.coordinates,ut=de(ot(ft)),nr=de(ht(lt));je.push(ut,nr,1/0,Le,-1,1),this.options.reduce&&je.push(0)}let Ue=this.trees[Fe+1]=this._createTree(je);ue&&console.timeEnd(Be);for(let Le=Fe;Le>=pe;Le--){const Qe=+Date.now();Ue=this.trees[Le]=this._createTree(this._cluster(Ue,Le)),ue&&console.log("z%d: %d clusters in %dms",Le,Ue.numItems,+Date.now()-Qe)}return ue&&console.timeEnd("total time"),this}getClusters(ie,ue){let pe=((ie[0]+180)%360+360)%360-180;const Fe=Math.max(-90,Math.min(90,ie[1]));let Be=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)pe=-180,Be=180;else if(pe>Be){const lt=this.getClusters([pe,Fe,180,je],ue),ut=this.getClusters([-180,Fe,Be,je],ue);return lt.concat(ut)}const Ue=this.trees[this._limitZoom(ue)],Le=Ue.range(ot(pe),ht(je),ot(Be),ht(Fe)),Qe=Ue.data,ft=[];for(const lt of Le){const ut=this.stride*lt;ft.push(Qe[ut+Ne]>1?qe(Qe,ut,this.clusterProps):this.points[Qe[ut+Te]])}return ft}getChildren(ie){const ue=this._getOriginId(ie),pe=this._getOriginZoom(ie),Fe="No cluster with the specified id.",Be=this.trees[pe];if(!Be)throw new Error(Fe);const je=Be.data;if(ue*this.stride>=je.length)throw new Error(Fe);const Ue=this.options.radius/(this.options.extent*Math.pow(2,pe-1)),Le=Be.within(je[ue*this.stride],je[ue*this.stride+1],Ue),Qe=[];for(const ft of Le){const lt=ft*this.stride;je[lt+4]===ie&&Qe.push(je[lt+Ne]>1?qe(je,lt,this.clusterProps):this.points[je[lt+Te]])}if(Qe.length===0)throw new Error(Fe);return Qe}getLeaves(ie,ue,pe){const Fe=[];return this._appendLeaves(Fe,ie,ue=ue||10,pe=pe||0,0),Fe}getTile(ie,ue,pe){const Fe=this.trees[this._limitZoom(ie)],Be=Math.pow(2,ie),{extent:je,radius:Ue}=this.options,Le=Ue/je,Qe=(pe-Le)/Be,ft=(pe+1+Le)/Be,lt={features:[]};return this._addTileFeatures(Fe.range((ue-Le)/Be,Qe,(ue+1+Le)/Be,ft),Fe.data,ue,pe,Be,lt),ue===0&&this._addTileFeatures(Fe.range(1-Le/Be,Qe,1,ft),Fe.data,Be,pe,Be,lt),ue===Be-1&&this._addTileFeatures(Fe.range(0,Qe,Le/Be,ft),Fe.data,-1,pe,Be,lt),lt.features.length?lt:null}getClusterExpansionZoom(ie){let ue=this._getOriginZoom(ie)-1;for(;ue<=this.options.maxZoom;){const pe=this.getChildren(ie);if(ue++,pe.length!==1)break;ie=pe[0].properties.cluster_id}return ue}_appendLeaves(ie,ue,pe,Fe,Be){const je=this.getChildren(ue);for(const Ue of je){const Le=Ue.properties;if(Le&&Le.cluster?Be+Le.point_count<=Fe?Be+=Le.point_count:Be=this._appendLeaves(ie,Le.cluster_id,pe,Fe,Be):Be<Fe?Be++:ie.push(Ue),ie.length===pe)break}return Be}_createTree(ie){const ue=new d.av(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let pe=0;pe<ie.length;pe+=this.stride)ue.add(ie[pe],ie[pe+1]);return ue.finish(),ue.data=ie,ue}_addTileFeatures(ie,ue,pe,Fe,Be,je){for(const Ue of ie){const Le=Ue*this.stride,Qe=ue[Le+Ne]>1;let ft,lt,ut;if(Qe)ft=He(ue,Le,this.clusterProps),lt=ue[Le],ut=ue[Le+1];else{const Er=this.points[ue[Le+Te]];ft=Er.properties;const[lr,Tr]=Er.geometry.coordinates;lt=ot(lr),ut=ht(Tr)}const nr={type:1,geometry:[[Math.round(this.options.extent*(lt*Be-pe)),Math.round(this.options.extent*(ut*Be-Fe))]],tags:ft};let Yt;Yt=Qe||this.options.generateId?ue[Le+Te]:this.points[ue[Le+Te]].id,Yt!==void 0&&(nr.id=Yt),je.features.push(nr)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,ue){const{radius:pe,extent:Fe,reduce:Be,minPoints:je}=this.options,Ue=pe/(Fe*Math.pow(2,ue)),Le=ie.data,Qe=[],ft=this.stride;for(let lt=0;lt<Le.length;lt+=ft){if(Le[lt+2]<=ue)continue;Le[lt+2]=ue;const ut=Le[lt],nr=Le[lt+1],Yt=ie.within(Le[lt],Le[lt+1],Ue),Er=Le[lt+Ne];let lr=Er;for(const Tr of Yt){const Dr=Tr*ft;Le[Dr+2]>ue&&(lr+=Le[Dr+Ne])}if(lr>Er&&lr>=je){let Tr,Dr=ut*Er,Vr=nr*Er,sn=-1;const pr=((lt/ft|0)<<5)+(ue+1)+this.points.length;for(const Qr of Yt){const xn=Qr*ft;if(Le[xn+2]<=ue)continue;Le[xn+2]=ue;const ii=Le[xn+Ne];Dr+=Le[xn]*ii,Vr+=Le[xn+1]*ii,Le[xn+4]=pr,Be&&(Tr||(Tr=this._map(Le,lt,!0),sn=this.clusterProps.length,this.clusterProps.push(Tr)),Be(Tr,this._map(Le,xn)))}Le[lt+4]=pr,Qe.push(Dr/lr,Vr/lr,1/0,pr,-1,lr),Be&&Qe.push(sn)}else{for(let Tr=0;Tr<ft;Tr++)Qe.push(Le[lt+Tr]);if(lr>1)for(const Tr of Yt){const Dr=Tr*ft;if(!(Le[Dr+2]<=ue)){Le[Dr+2]=ue;for(let Vr=0;Vr<ft;Vr++)Qe.push(Le[Dr+Vr])}}}}return Qe}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,ue,pe){if(ie[ue+Ne]>1){const je=this.clusterProps[ie[ue+Ie]];return pe?Object.assign({},je):je}const Fe=this.points[ie[ue+Te]].properties,Be=this.options.map(Fe);return pe&&Be===Fe?Object.assign({},Be):Be}}function qe(Me,ie,ue){return{type:"Feature",id:Me[ie+Te],properties:He(Me,ie,ue),geometry:{type:"Point",coordinates:[(pe=Me[ie],360*(pe-.5)),xt(Me[ie+1])]}};var pe}function He(Me,ie,ue){const pe=Me[ie+Ne],Fe=pe>=1e4?`${Math.round(pe/1e3)}k`:pe>=1e3?Math.round(pe/100)/10+"k":pe,Be=Me[ie+Ie],je=Be===-1?{}:Object.assign({},ue[Be]);return Object.assign(je,{cluster:!0,cluster_id:Me[ie+Te],point_count:pe,point_count_abbreviated:Fe})}function ot(Me){return Me/360+.5}function ht(Me){const ie=Math.sin(Me*Math.PI/180),ue=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ue<0?0:ue>1?1:ue}function xt(Me){const ie=(180-360*Me)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function Mt(Me,ie,ue,pe){for(var Fe,Be=pe,je=ue-ie>>1,Ue=ue-ie,Le=Me[ie],Qe=Me[ie+1],ft=Me[ue],lt=Me[ue+1],ut=ie+3;ut<ue;ut+=3){var nr=pt(Me[ut],Me[ut+1],Le,Qe,ft,lt);if(nr>Be)Fe=ut,Be=nr;else if(nr===Be){var Yt=Math.abs(ut-je);Yt<Ue&&(Fe=ut,Ue=Yt)}}Be>pe&&(Fe-ie>3&&Mt(Me,ie,Fe,pe),Me[Fe+2]=Be,ue-Fe>3&&Mt(Me,Fe,ue,pe))}function pt(Me,ie,ue,pe,Fe,Be){var je=Fe-ue,Ue=Be-pe;if(je!==0||Ue!==0){var Le=((Me-ue)*je+(ie-pe)*Ue)/(je*je+Ue*Ue);Le>1?(ue=Fe,pe=Be):Le>0&&(ue+=je*Le,pe+=Ue*Le)}return(je=Me-ue)*je+(Ue=ie-pe)*Ue}function wt(Me,ie,ue,pe){var Fe={id:Me===void 0?null:Me,type:ie,geometry:ue,tags:pe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Be){var je=Be.geometry,Ue=Be.type;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")Ht(Be,je);else if(Ue==="Polygon"||Ue==="MultiLineString")for(var Le=0;Le<je.length;Le++)Ht(Be,je[Le]);else if(Ue==="MultiPolygon")for(Le=0;Le<je.length;Le++)for(var Qe=0;Qe<je[Le].length;Qe++)Ht(Be,je[Le][Qe])}(Fe),Fe}function Ht(Me,ie){for(var ue=0;ue<ie.length;ue+=3)Me.minX=Math.min(Me.minX,ie[ue]),Me.minY=Math.min(Me.minY,ie[ue+1]),Me.maxX=Math.max(Me.maxX,ie[ue]),Me.maxY=Math.max(Me.maxY,ie[ue+1])}function zt(Me,ie,ue,pe){if(ie.geometry){var Fe=ie.geometry.coordinates,Be=ie.geometry.type,je=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2),Ue=[],Le=ie.id;if(ue.promoteId?Le=ie.properties[ue.promoteId]:ue.generateId&&(Le=pe||0),Be==="Point")ur(Fe,Ue);else if(Be==="MultiPoint")for(var Qe=0;Qe<Fe.length;Qe++)ur(Fe[Qe],Ue);else if(Be==="LineString")it(Fe,Ue,je,!1);else if(Be==="MultiLineString"){if(ue.lineMetrics){for(Qe=0;Qe<Fe.length;Qe++)it(Fe[Qe],Ue=[],je,!1),Me.push(wt(Le,"LineString",Ue,ie.properties));return}wr(Fe,Ue,je,!1)}else if(Be==="Polygon")wr(Fe,Ue,je,!0);else{if(Be!=="MultiPolygon"){if(Be==="GeometryCollection"){for(Qe=0;Qe<ie.geometry.geometries.length;Qe++)zt(Me,{id:Le,geometry:ie.geometry.geometries[Qe],properties:ie.properties},ue,pe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Qe=0;Qe<Fe.length;Qe++){var ft=[];wr(Fe[Qe],ft,je,!0),Ue.push(ft)}}Me.push(wt(Le,Be,Ue,ie.properties))}}function ur(Me,ie){ie.push(cr(Me[0])),ie.push(qt(Me[1])),ie.push(0)}function it(Me,ie,ue,pe){for(var Fe,Be,je=0,Ue=0;Ue<Me.length;Ue++){var Le=cr(Me[Ue][0]),Qe=qt(Me[Ue][1]);ie.push(Le),ie.push(Qe),ie.push(0),Ue>0&&(je+=pe?(Fe*Qe-Le*Be)/2:Math.sqrt(Math.pow(Le-Fe,2)+Math.pow(Qe-Be,2))),Fe=Le,Be=Qe}var ft=ie.length-3;ie[2]=1,Mt(ie,0,ft,ue),ie[ft+2]=1,ie.size=Math.abs(je),ie.start=0,ie.end=ie.size}function wr(Me,ie,ue,pe){for(var Fe=0;Fe<Me.length;Fe++){var Be=[];it(Me[Fe],Be,ue,pe),ie.push(Be)}}function cr(Me){return Me/360+.5}function qt(Me){var ie=Math.sin(Me*Math.PI/180),ue=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ue<0?0:ue>1?1:ue}function Se(Me,ie,ue,pe,Fe,Be,je,Ue){if(pe/=ie,Be>=(ue/=ie)&&je<pe)return Me;if(je<ue||Be>=pe)return null;for(var Le=[],Qe=0;Qe<Me.length;Qe++){var ft=Me[Qe],lt=ft.geometry,ut=ft.type,nr=Fe===0?ft.minX:ft.minY,Yt=Fe===0?ft.maxX:ft.maxY;if(nr>=ue&&Yt<pe)Le.push(ft);else if(!(Yt<ue||nr>=pe)){var Er=[];if(ut==="Point"||ut==="MultiPoint")N(lt,Er,ue,pe,Fe);else if(ut==="LineString")D(lt,Er,ue,pe,Fe,!1,Ue.lineMetrics);else if(ut==="MultiLineString")Xe(lt,Er,ue,pe,Fe,!1);else if(ut==="Polygon")Xe(lt,Er,ue,pe,Fe,!0);else if(ut==="MultiPolygon")for(var lr=0;lr<lt.length;lr++){var Tr=[];Xe(lt[lr],Tr,ue,pe,Fe,!0),Tr.length&&Er.push(Tr)}if(Er.length){if(Ue.lineMetrics&&ut==="LineString"){for(lr=0;lr<Er.length;lr++)Le.push(wt(ft.id,ut,Er[lr],ft.tags));continue}ut!=="LineString"&&ut!=="MultiLineString"||(Er.length===1?(ut="LineString",Er=Er[0]):ut="MultiLineString"),ut!=="Point"&&ut!=="MultiPoint"||(ut=Er.length===3?"Point":"MultiPoint"),Le.push(wt(ft.id,ut,Er,ft.tags))}}}return Le.length?Le:null}function N(Me,ie,ue,pe,Fe){for(var Be=0;Be<Me.length;Be+=3){var je=Me[Be+Fe];je>=ue&&je<=pe&&(ie.push(Me[Be]),ie.push(Me[Be+1]),ie.push(Me[Be+2]))}}function D(Me,ie,ue,pe,Fe,Be,je){for(var Ue,Le,Qe=xe(Me),ft=Fe===0?ct:le,lt=Me.start,ut=0;ut<Me.length-3;ut+=3){var nr=Me[ut],Yt=Me[ut+1],Er=Me[ut+2],lr=Me[ut+3],Tr=Me[ut+4],Dr=Fe===0?nr:Yt,Vr=Fe===0?lr:Tr,sn=!1;je&&(Ue=Math.sqrt(Math.pow(nr-lr,2)+Math.pow(Yt-Tr,2))),Dr<ue?Vr>ue&&(Le=ft(Qe,nr,Yt,lr,Tr,ue),je&&(Qe.start=lt+Ue*Le)):Dr>pe?Vr<pe&&(Le=ft(Qe,nr,Yt,lr,Tr,pe),je&&(Qe.start=lt+Ue*Le)):tt(Qe,nr,Yt,Er),Vr<ue&&Dr>=ue&&(Le=ft(Qe,nr,Yt,lr,Tr,ue),sn=!0),Vr>pe&&Dr<=pe&&(Le=ft(Qe,nr,Yt,lr,Tr,pe),sn=!0),!Be&&sn&&(je&&(Qe.end=lt+Ue*Le),ie.push(Qe),Qe=xe(Me)),je&&(lt+=Ue)}var pr=Me.length-3;nr=Me[pr],Yt=Me[pr+1],Er=Me[pr+2],(Dr=Fe===0?nr:Yt)>=ue&&Dr<=pe&&tt(Qe,nr,Yt,Er),pr=Qe.length-3,Be&&pr>=3&&(Qe[pr]!==Qe[0]||Qe[pr+1]!==Qe[1])&&tt(Qe,Qe[0],Qe[1],Qe[2]),Qe.length&&ie.push(Qe)}function xe(Me){var ie=[];return ie.size=Me.size,ie.start=Me.start,ie.end=Me.end,ie}function Xe(Me,ie,ue,pe,Fe,Be){for(var je=0;je<Me.length;je++)D(Me[je],ie,ue,pe,Fe,Be,!1)}function tt(Me,ie,ue,pe){Me.push(ie),Me.push(ue),Me.push(pe)}function ct(Me,ie,ue,pe,Fe,Be){var je=(Be-ie)/(pe-ie);return Me.push(Be),Me.push(ue+(Fe-ue)*je),Me.push(1),je}function le(Me,ie,ue,pe,Fe,Be){var je=(Be-ue)/(Fe-ue);return Me.push(ie+(pe-ie)*je),Me.push(Be),Me.push(1),je}function k(Me,ie){for(var ue=[],pe=0;pe<Me.length;pe++){var Fe,Be=Me[pe],je=Be.type;if(je==="Point"||je==="MultiPoint"||je==="LineString")Fe=$(Be.geometry,ie);else if(je==="MultiLineString"||je==="Polygon"){Fe=[];for(var Ue=0;Ue<Be.geometry.length;Ue++)Fe.push($(Be.geometry[Ue],ie))}else if(je==="MultiPolygon")for(Fe=[],Ue=0;Ue<Be.geometry.length;Ue++){for(var Le=[],Qe=0;Qe<Be.geometry[Ue].length;Qe++)Le.push($(Be.geometry[Ue][Qe],ie));Fe.push(Le)}ue.push(wt(Be.id,je,Fe,Be.tags))}return ue}function $(Me,ie){var ue=[];ue.size=Me.size,Me.start!==void 0&&(ue.start=Me.start,ue.end=Me.end);for(var pe=0;pe<Me.length;pe+=3)ue.push(Me[pe]+ie,Me[pe+1],Me[pe+2]);return ue}function Ee(Me,ie){if(Me.transformed)return Me;var ue,pe,Fe,Be=1<<Me.z,je=Me.x,Ue=Me.y;for(ue=0;ue<Me.features.length;ue++){var Le=Me.features[ue],Qe=Le.geometry,ft=Le.type;if(Le.geometry=[],ft===1)for(pe=0;pe<Qe.length;pe+=2)Le.geometry.push(We(Qe[pe],Qe[pe+1],ie,Be,je,Ue));else for(pe=0;pe<Qe.length;pe++){var lt=[];for(Fe=0;Fe<Qe[pe].length;Fe+=2)lt.push(We(Qe[pe][Fe],Qe[pe][Fe+1],ie,Be,je,Ue));Le.geometry.push(lt)}}return Me.transformed=!0,Me}function We(Me,ie,ue,pe,Fe,Be){return[Math.round(ue*(Me*pe-Fe)),Math.round(ue*(ie*pe-Be))]}function nt(Me,ie,ue,pe,Fe){for(var Be=ie===Fe.maxZoom?0:Fe.tolerance/((1<<ie)*Fe.extent),je={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ue,y:pe,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ue=0;Ue<Me.length;Ue++){je.numFeatures++,Ve(je,Me[Ue],Be,Fe);var Le=Me[Ue].minX,Qe=Me[Ue].minY,ft=Me[Ue].maxX,lt=Me[Ue].maxY;Le<je.minX&&(je.minX=Le),Qe<je.minY&&(je.minY=Qe),ft>je.maxX&&(je.maxX=ft),lt>je.maxY&&(je.maxY=lt)}return je}function Ve(Me,ie,ue,pe){var Fe=ie.geometry,Be=ie.type,je=[];if(Be==="Point"||Be==="MultiPoint")for(var Ue=0;Ue<Fe.length;Ue+=3)je.push(Fe[Ue]),je.push(Fe[Ue+1]),Me.numPoints++,Me.numSimplified++;else if(Be==="LineString")Et(je,Fe,Me,ue,!1,!1);else if(Be==="MultiLineString"||Be==="Polygon")for(Ue=0;Ue<Fe.length;Ue++)Et(je,Fe[Ue],Me,ue,Be==="Polygon",Ue===0);else if(Be==="MultiPolygon")for(var Le=0;Le<Fe.length;Le++){var Qe=Fe[Le];for(Ue=0;Ue<Qe.length;Ue++)Et(je,Qe[Ue],Me,ue,!0,Ue===0)}if(je.length){var ft=ie.tags||null;if(Be==="LineString"&&pe.lineMetrics){for(var lt in ft={},ie.tags)ft[lt]=ie.tags[lt];ft.mapbox_clip_start=Fe.start/Fe.size,ft.mapbox_clip_end=Fe.end/Fe.size}var ut={geometry:je,type:Be==="Polygon"||Be==="MultiPolygon"?3:Be==="LineString"||Be==="MultiLineString"?2:1,tags:ft};ie.id!==null&&(ut.id=ie.id),Me.features.push(ut)}}function Et(Me,ie,ue,pe,Fe,Be){var je=pe*pe;if(pe>0&&ie.size<(Fe?je:pe))ue.numPoints+=ie.length/3;else{for(var Ue=[],Le=0;Le<ie.length;Le+=3)(pe===0||ie[Le+2]>je)&&(ue.numSimplified++,Ue.push(ie[Le]),Ue.push(ie[Le+1])),ue.numPoints++;Fe&&function(Qe,ft){for(var lt=0,ut=0,nr=Qe.length,Yt=nr-2;ut<nr;Yt=ut,ut+=2)lt+=(Qe[ut]-Qe[Yt])*(Qe[ut+1]+Qe[Yt+1]);if(lt>0===ft)for(ut=0,nr=Qe.length;ut<nr/2;ut+=2){var Er=Qe[ut],lr=Qe[ut+1];Qe[ut]=Qe[nr-2-ut],Qe[ut+1]=Qe[nr-1-ut],Qe[nr-2-ut]=Er,Qe[nr-1-ut]=lr}}(Ue,Be),Me.push(Ue)}}function Ot(Me,ie){var ue=(ie=this.options=function(Fe,Be){for(var je in Be)Fe[je]=Be[je];return Fe}(Object.create(this.options),ie)).debug;if(ue&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var pe=function(Fe,Be){var je=[];if(Fe.type==="FeatureCollection")for(var Ue=0;Ue<Fe.features.length;Ue++)zt(je,Fe.features[Ue],Be,Ue);else zt(je,Fe.type==="Feature"?Fe:{geometry:Fe},Be);return je}(Me,ie);this.tiles={},this.tileCoords=[],ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pe=function(Fe,Be){var je=Be.buffer/Be.extent,Ue=Fe,Le=Se(Fe,1,-1-je,je,0,-1,2,Be),Qe=Se(Fe,1,1-je,2+je,0,-1,2,Be);return(Le||Qe)&&(Ue=Se(Fe,1,-je,1+je,0,-1,2,Be)||[],Le&&(Ue=k(Le,1).concat(Ue)),Qe&&(Ue=Ue.concat(k(Qe,-1)))),Ue}(pe,ie),pe.length&&this.splitTile(pe,0,0,0),ue&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function dr(Me,ie,ue){return 32*((1<<Me)*ue+ie)+Me}function br(Me,ie){return ie?Me.properties[ie]:Me.id}function Ft(Me,ie){if(Me==null)return!0;if(Me.type==="Feature")return br(Me,ie)!=null;if(Me.type==="FeatureCollection"){const ue=new Set;for(const pe of Me.features){const Fe=br(pe,ie);if(Fe==null||ue.has(Fe))return!1;ue.add(Fe)}return!0}return!1}function Nn(Me,ie){const ue=new Map;if(Me!=null)if(Me.type==="Feature")ue.set(br(Me,ie),Me);else for(const pe of Me.features)ue.set(br(pe,ie),pe);return ue}Ot.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ot.prototype.splitTile=function(Me,ie,ue,pe,Fe,Be,je){for(var Ue=[Me,ie,ue,pe],Le=this.options,Qe=Le.debug;Ue.length;){pe=Ue.pop(),ue=Ue.pop(),ie=Ue.pop(),Me=Ue.pop();var ft=1<<ie,lt=dr(ie,ue,pe),ut=this.tiles[lt];if(!ut&&(Qe>1&&console.time("creation"),ut=this.tiles[lt]=nt(Me,ie,ue,pe,Le),this.tileCoords.push({z:ie,x:ue,y:pe}),Qe)){Qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,ue,pe,ut.numFeatures,ut.numPoints,ut.numSimplified),console.timeEnd("creation"));var nr="z"+ie;this.stats[nr]=(this.stats[nr]||0)+1,this.total++}if(ut.source=Me,Fe){if(ie===Le.maxZoom||ie===Fe)continue;var Yt=1<<Fe-ie;if(ue!==Math.floor(Be/Yt)||pe!==Math.floor(je/Yt))continue}else if(ie===Le.indexMaxZoom||ut.numPoints<=Le.indexMaxPoints)continue;if(ut.source=null,Me.length!==0){Qe>1&&console.time("clipping");var Er,lr,Tr,Dr,Vr,sn,pr=.5*Le.buffer/Le.extent,Qr=.5-pr,xn=.5+pr,ii=1+pr;Er=lr=Tr=Dr=null,Vr=Se(Me,ft,ue-pr,ue+xn,0,ut.minX,ut.maxX,Le),sn=Se(Me,ft,ue+Qr,ue+ii,0,ut.minX,ut.maxX,Le),Me=null,Vr&&(Er=Se(Vr,ft,pe-pr,pe+xn,1,ut.minY,ut.maxY,Le),lr=Se(Vr,ft,pe+Qr,pe+ii,1,ut.minY,ut.maxY,Le),Vr=null),sn&&(Tr=Se(sn,ft,pe-pr,pe+xn,1,ut.minY,ut.maxY,Le),Dr=Se(sn,ft,pe+Qr,pe+ii,1,ut.minY,ut.maxY,Le),sn=null),Qe>1&&console.timeEnd("clipping"),Ue.push(Er||[],ie+1,2*ue,2*pe),Ue.push(lr||[],ie+1,2*ue,2*pe+1),Ue.push(Tr||[],ie+1,2*ue+1,2*pe),Ue.push(Dr||[],ie+1,2*ue+1,2*pe+1)}}},Ot.prototype.getTile=function(Me,ie,ue){var pe=this.options,Fe=pe.extent,Be=pe.debug;if(Me<0||Me>24)return null;var je=1<<Me,Ue=dr(Me,ie=(ie%je+je)%je,ue);if(this.tiles[Ue])return Ee(this.tiles[Ue],Fe);Be>1&&console.log("drilling down to z%d-%d-%d",Me,ie,ue);for(var Le,Qe=Me,ft=ie,lt=ue;!Le&&Qe>0;)Qe--,ft=Math.floor(ft/2),lt=Math.floor(lt/2),Le=this.tiles[dr(Qe,ft,lt)];return Le&&Le.source?(Be>1&&console.log("found parent tile z%d-%d-%d",Qe,ft,lt),Be>1&&console.time("drilling down"),this.splitTile(Le.source,Qe,ft,lt,Me,ie,ue),Be>1&&console.timeEnd("drilling down"),this.tiles[Ue]?Ee(this.tiles[Ue],Fe):null):null};class ni extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ie,ue){return d._(this,void 0,void 0,function*(){const pe=ie.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Fe=this._geoJSONIndex.getTile(pe.z,pe.x,pe.y);if(!Fe)return null;const Be=new class{constructor(Ue){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.W,this.length=Ue.length,this._features=Ue}feature(Ue){return new class{constructor(Le){this._feature=Le,this.extent=d.W,this.type=Le.type,this.properties=Le.tags,"id"in Le&&!isNaN(Le.id)&&(this.id=parseInt(Le.id,10))}loadGeometry(){if(this._feature.type===1){const Le=[];for(const Qe of this._feature.geometry)Le.push([new d.P(Qe[0],Qe[1])]);return Le}{const Le=[];for(const Qe of this._feature.geometry){const ft=[];for(const lt of Qe)ft.push(new d.P(lt[0],lt[1]));Le.push(ft)}return Le}}toGeoJSON(Le,Qe,ft){return se.call(this,Le,Qe,ft)}}(this._features[Ue])}}(Fe.features);let je=J(Be);return je.byteOffset===0&&je.byteLength===je.buffer.byteLength||(je=new Uint8Array(je)),{vectorTile:Be,rawData:je.buffer}})}loadData(ie){return d._(this,void 0,void 0,function*(){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.abort();const pe=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new d.bt(ie.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ie,this._pendingRequest),this._geoJSONIndex=ie.cluster?new Oe(function({superclusterOptions:Be,clusterProperties:je}){if(!je||!Be)return Be;const Ue={},Le={},Qe={accumulated:null,zoom:0},ft={properties:null},lt=Object.keys(je);for(const ut of lt){const[nr,Yt]=je[ut],Er=d.bA(Yt),lr=d.bA(typeof nr=="string"?[nr,["accumulated"],["get",ut]]:nr);Ue[ut]=Er.value,Le[ut]=lr.value}return Be.map=ut=>{ft.properties=ut;const nr={};for(const Yt of lt)nr[Yt]=Ue[Yt].evaluate(Qe,ft);return nr},Be.reduce=(ut,nr)=>{ft.properties=nr;for(const Yt of lt)Qe.accumulated=ut[Yt],ut[Yt]=Le[Yt].evaluate(Qe,ft)},Be}(ie)).load((yield this._pendingData).features):new Ot(yield this._pendingData,ie.geojsonVtOptions),this.loaded={};const Fe={};if(pe){const Be=pe.finish();Be&&(Fe.resourceTiming={},Fe.resourceTiming[ie.source]=JSON.parse(JSON.stringify(Be)))}return Fe}catch(Fe){if(delete this._pendingRequest,d.bz(Fe))return{abandoned:!0};throw Fe}})}getData(){return d._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ie){const ue=this.loaded;return ue&&ue[ie.uid]?super.reloadTile(ie):this.loadTile(ie)}loadAndProcessGeoJSON(ie,ue){return d._(this,void 0,void 0,function*(){let pe=yield this.loadGeoJSON(ie,ue);if(delete this._pendingRequest,typeof pe!="object")throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(j(pe,!0),ie.filter){const Fe=d.bA(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Fe.result==="error")throw new Error(Fe.value.map(je=>`${je.key}: ${je.message}`).join(", "));pe={type:"FeatureCollection",features:pe.features.filter(je=>Fe.value.evaluate({zoom:0},je))}}return pe})}loadGeoJSON(ie,ue){return d._(this,void 0,void 0,function*(){const{promoteId:pe}=ie;if(ie.request){const Fe=yield d.h(ie.request,ue);return this._dataUpdateable=Ft(Fe.data,pe)?Nn(Fe.data,pe):void 0,Fe.data}if(typeof ie.data=="string")try{const Fe=JSON.parse(ie.data);return this._dataUpdateable=Ft(Fe,pe)?Nn(Fe,pe):void 0,Fe}catch{throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`)}if(!ie.dataDiff)throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ie.source}`);return function(Fe,Be,je){var Ue,Le,Qe,ft;if(Be.removeAll&&Fe.clear(),Be.remove)for(const lt of Be.remove)Fe.delete(lt);if(Be.add)for(const lt of Be.add){const ut=br(lt,je);ut!=null&&Fe.set(ut,lt)}if(Be.update)for(const lt of Be.update){let ut=Fe.get(lt.id);if(ut==null)continue;const nr=!lt.removeAllProperties&&(((Ue=lt.removeProperties)===null||Ue===void 0?void 0:Ue.length)>0||((Le=lt.addOrUpdateProperties)===null||Le===void 0?void 0:Le.length)>0);if((lt.newGeometry||lt.removeAllProperties||nr)&&(ut=Object.assign({},ut),Fe.set(lt.id,ut),nr&&(ut.properties=Object.assign({},ut.properties))),lt.newGeometry&&(ut.geometry=lt.newGeometry),lt.removeAllProperties)ut.properties={};else if(((Qe=lt.removeProperties)===null||Qe===void 0?void 0:Qe.length)>0)for(const Yt of lt.removeProperties)Object.prototype.hasOwnProperty.call(ut.properties,Yt)&&delete ut.properties[Yt];if(((ft=lt.addOrUpdateProperties)===null||ft===void 0?void 0:ft.length)>0)for(const{key:Yt,value:Er}of lt.addOrUpdateProperties)ut.properties[Yt]=Er}}(this._dataUpdateable,ie.dataDiff,pe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ie){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ie){return this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId)}getClusterChildren(ie){return this._geoJSONIndex.getChildren(ie.clusterId)}getClusterLeaves(ie){return this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset)}}class an{constructor(ie){this.self=ie,this.actor=new d.C(ie),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ue,pe)=>{if(this.externalWorkerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.externalWorkerSourceTypes[ue]=pe},this.self.addProtocol=d.bg,this.self.removeProtocol=d.bh,this.self.registerRTLTextPlugin=ue=>{if(d.bB.isParsed())throw new Error("RTL text plugin already registered.");d.bB.setMethods(ue)},this.actor.registerMessageHandler("LDT",(ue,pe)=>this._getDEMWorkerSource(ue,pe.source).loadTile(pe)),this.actor.registerMessageHandler("RDT",(ue,pe)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ue,pe.source).removeTile(pe)})),this.actor.registerMessageHandler("GCEZ",(ue,pe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,pe.type,pe.source).getClusterExpansionZoom(pe)})),this.actor.registerMessageHandler("GCC",(ue,pe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,pe.type,pe.source).getClusterChildren(pe)})),this.actor.registerMessageHandler("GCL",(ue,pe)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,pe.type,pe.source).getClusterLeaves(pe)})),this.actor.registerMessageHandler("LD",(ue,pe)=>this._getWorkerSource(ue,pe.type,pe.source).loadData(pe)),this.actor.registerMessageHandler("GD",(ue,pe)=>this._getWorkerSource(ue,pe.type,pe.source).getData()),this.actor.registerMessageHandler("LT",(ue,pe)=>this._getWorkerSource(ue,pe.type,pe.source).loadTile(pe)),this.actor.registerMessageHandler("RT",(ue,pe)=>this._getWorkerSource(ue,pe.type,pe.source).reloadTile(pe)),this.actor.registerMessageHandler("AT",(ue,pe)=>this._getWorkerSource(ue,pe.type,pe.source).abortTile(pe)),this.actor.registerMessageHandler("RMT",(ue,pe)=>this._getWorkerSource(ue,pe.type,pe.source).removeTile(pe)),this.actor.registerMessageHandler("RS",(ue,pe)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[ue]||!this.workerSources[ue][pe.type]||!this.workerSources[ue][pe.type][pe.source])return;const Fe=this.workerSources[ue][pe.type][pe.source];delete this.workerSources[ue][pe.type][pe.source],Fe.removeSource!==void 0&&Fe.removeSource(pe)})),this.actor.registerMessageHandler("RM",ue=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue]})),this.actor.registerMessageHandler("SR",(ue,pe)=>d._(this,void 0,void 0,function*(){this.referrer=pe})),this.actor.registerMessageHandler("SRPS",(ue,pe)=>this._syncRTLPluginState(ue,pe)),this.actor.registerMessageHandler("IS",(ue,pe)=>d._(this,void 0,void 0,function*(){this.self.importScripts(pe)})),this.actor.registerMessageHandler("SI",(ue,pe)=>this._setImages(ue,pe)),this.actor.registerMessageHandler("UL",(ue,pe)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(ue).update(pe.layers,pe.removedIds)})),this.actor.registerMessageHandler("SL",(ue,pe)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(ue).replace(pe)}))}_setImages(ie,ue){return d._(this,void 0,void 0,function*(){this.availableImages[ie]=ue;for(const pe in this.workerSources[ie]){const Fe=this.workerSources[ie][pe];for(const Be in Fe)Fe[Be].availableImages=ue}})}_syncRTLPluginState(ie,ue){return d._(this,void 0,void 0,function*(){if(d.bB.isParsed())return d.bB.getState();if(ue.pluginStatus!=="loading")return d.bB.setState(ue),ue;const pe=ue.pluginURL;if(this.self.importScripts(pe),d.bB.isParsed()){const Fe={pluginStatus:"loaded",pluginURL:pe};return d.bB.setState(Fe),Fe}throw d.bB.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${pe}`)})}_getAvailableImages(ie){let ue=this.availableImages[ie];return ue||(ue=[]),ue}_getLayerIndex(ie){let ue=this.layerIndexes[ie];return ue||(ue=this.layerIndexes[ie]=new u),ue}_getWorkerSource(ie,ue,pe){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][ue]||(this.workerSources[ie][ue]={}),!this.workerSources[ie][ue][pe]){const Fe={sendAsync:(Be,je)=>(Be.targetMapId=ie,this.actor.sendAsync(Be,je))};switch(ue){case"vector":this.workerSources[ie][ue][pe]=new b(Fe,this._getLayerIndex(ie),this._getAvailableImages(ie));break;case"geojson":this.workerSources[ie][ue][pe]=new ni(Fe,this._getLayerIndex(ie),this._getAvailableImages(ie));break;default:this.workerSources[ie][ue][pe]=new this.externalWorkerSourceTypes[ue](Fe,this._getLayerIndex(ie),this._getAvailableImages(ie))}}return this.workerSources[ie][ue][pe]}_getDEMWorkerSource(ie,ue){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][ue]||(this.demWorkerSources[ie][ue]=new T),this.demWorkerSources[ie][ue]}}return d.i(self)&&(self.worker=new an(self)),an}),l("index",["exports","./shared"],function(d,u){var w="4.3.2";let E,I;const b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((i,c)=>{const p=requestAnimationFrame(i);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(p),c(u.c())})}),getImageData(y,i=0){return this.getImageCanvasContext(y).getImageData(-i,-i,y.width+2*i,y.height+2*i)},getImageCanvasContext(y){const i=window.document.createElement("canvas"),c=i.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return i.width=y.width,i.height=y.height,c.drawImage(y,0,0,y.width,y.height),c},resolveURL:y=>(E||(E=document.createElement("a")),E.href=y,E.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class T{static testProp(i){if(!T.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in T.docStyle)return i[c];return i[0]}static create(i,c,p){const g=window.document.createElement(i);return c!==void 0&&(g.className=c),p&&p.appendChild(g),g}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(i,c){i.style[T.transformProp]=c}static addEventListener(i,c,p,g={}){i.addEventListener(c,p,"passive"in g?g:g.capture)}static removeEventListener(i,c,p,g={}){i.removeEventListener(c,p,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static getScale(i){const c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}static getPoint(i,c,p){const g=c.boundingClientRect;return new u.P((p.clientX-g.left)/c.x-i.clientLeft,(p.clientY-g.top)/c.y-i.clientTop)}static mousePos(i,c){const p=T.getScale(i);return T.getPoint(i,p,c)}static touchPos(i,c){const p=[],g=T.getScale(i);for(let _=0;_<c.length;_++)p.push(T.getPoint(i,g,c[_]));return p}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(y){!se&&j&&(K?Z(y):z=y)}};let z,j,se=!1,K=!1;function Z(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,j),y.isContextLost())return;R.supported=!0}catch{}y.deleteTexture(i),se=!0}var V;typeof document<"u"&&(j=document.createElement("img"),j.onload=()=>{z&&Z(z),z=null,K=!0},j.onerror=()=>{se=!0,z=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,c,p,g;y.resetRequestQueue=()=>{i=[],c=0,p=0,g={}},y.addThrottleControl=O=>{const G=p++;return g[G]=O,G},y.removeThrottleControl=O=>{delete g[O],A()},y.getImage=(O,G,te=!0)=>new Promise((ee,me)=>{R.supported&&(O.headers||(O.headers={}),O.headers.accept="image/webp,*/*"),u.e(O,{type:"image"}),i.push({abortController:G,requestParameters:O,supportImageRefresh:te,state:"queued",onError:be=>{me(be)},onSuccess:be=>{ee(be)}}),A()});const _=O=>u._(this,void 0,void 0,function*(){O.state="running";const{requestParameters:G,supportImageRefresh:te,onError:ee,onSuccess:me,abortController:be}=O,Ae=te===!1&&!u.i(self)&&!u.g(G.url)&&(!G.headers||Object.keys(G.headers).reduce((Ge,Ke)=>Ge&&Ke==="accept",!0));c++;const ze=Ae?M(G,be):u.m(G,be);try{const Ge=yield ze;delete O.abortController,O.state="completed",Ge.data instanceof HTMLImageElement||u.b(Ge.data)?me(Ge):Ge.data&&me({data:yield(Ce=Ge.data,typeof createImageBitmap=="function"?u.d(Ce):u.f(Ce)),cacheControl:Ge.cacheControl,expires:Ge.expires})}catch(Ge){delete O.abortController,ee(Ge)}finally{c--,A()}var Ce}),A=()=>{const O=(()=>{for(const G of Object.keys(g))if(g[G]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let G=c;G<O&&i.length>0;G++){const te=i.shift();te.abortController.signal.aborted?G--:_(te)}},M=(O,G)=>new Promise((te,ee)=>{const me=new Image,be=O.url,Ae=O.credentials;Ae&&Ae==="include"?me.crossOrigin="use-credentials":(Ae&&Ae==="same-origin"||!u.s(be))&&(me.crossOrigin="anonymous"),G.signal.addEventListener("abort",()=>{me.src="",ee(u.c())}),me.fetchPriority="high",me.onload=()=>{me.onerror=me.onload=null,te({data:me})},me.onerror=()=>{me.onerror=me.onload=null,G.signal.aborted||ee(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},me.src=be})}(V||(V={})),V.resetRequestQueue();class ae{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function X(y){var i=new u.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var U,P=function(y,i,c){return y[0]=i[0]-c[0],y[1]=i[1]-c[1],y[2]=i[2]-c[2],y};U=new u.A(3),u.A!=Float32Array&&(U[0]=0,U[1]=0,U[2]=0);var L=function(y){var i=y[0],c=y[1];return i*i+c*c};function B(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const c=[];for(const{id:p,url:g}of y){const _=`${p}${g}`;c.indexOf(_)===-1&&(c.push(_),i.push({id:p,url:g}))}}return i}function Q(y,i,c){const p=y.split("?");return p[0]+=`${i}${c}`,p.join("?")}(function(){var y=new u.A(2);u.A!=Float32Array&&(y[0]=0,y[1]=0)})();class q{constructor(i,c,p,g){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(c,g)}update(i,c,p){const{width:g,height:_}=i,A=!(this.size&&this.size[0]===g&&this.size[1]===_||p),{context:M}=this,{gl:O}=M;if(this.useMipmap=!!(c&&c.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!c||c.premultiply!==!1)),A)this.size=[g,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.b(i)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,i):O.texImage2D(O.TEXTURE_2D,0,this.format,g,_,0,this.format,O.UNSIGNED_BYTE,i.data);else{const{x:G,y:te}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.b(i)?O.texSubImage2D(O.TEXTURE_2D,0,G,te,O.RGBA,O.UNSIGNED_BYTE,i):O.texSubImage2D(O.TEXTURE_2D,0,G,te,g,_,O.RGBA,O.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D)}bind(i,c,p){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),p!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,p||i),this.filter=i),c!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,c),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function ve(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class ye extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,promiseResolve:p}of this.requestors)p(this._getImagesForIds(c));this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const p=c.spriteData;c.data=new u.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let p=!0;const g=c.data||c.spriteData;return this._validateStretch(c.stretchX,g&&g.width)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,g&&g.height)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,c){if(!i)return!0;let p=0;for(const g of i){if(g[0]<p||g[1]<g[0]||c<g[1])return!1;p=g[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const p=c.spriteData,g=p&&p.width||c.data.width,_=p&&p.height||c.data.height;return!(i[0]<0||g<i[0]||i[1]<0||_<i[1]||i[2]<0||g<i[2]||i[3]<0||_<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,p=!0){const g=this.getImage(i);if(p&&(g.data.width!==c.data.width||g.data.height!==c.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=g.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((c,p)=>{let g=!0;if(!this.isLoaded())for(const _ of i)this.images[_]||(g=!1);this.isLoaded()||g?c(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:c})})}_getImagesForIds(i){const c={};for(const p of i){let g=this.getImage(p);g||(this.fire(new u.k("styleimagemissing",{id:p})),g=this.getImage(p)),g?c[p]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:u.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],p=this.getImage(i);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},_=new u.I(g,p);this.patterns[i]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new q(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const _ in this.patterns)i.push(this.patterns[_].bin);const{w:c,h:p}=u.p(i),g=this.atlasImage;g.resize({width:c||1,height:p||1});for(const _ in this.patterns){const{bin:A}=this.patterns[_],M=A.x+1,O=A.y+1,G=this.getImage(_).data,te=G.width,ee=G.height;u.R.copy(G,g,{x:0,y:0},{x:M,y:O},{width:te,height:ee}),u.R.copy(G,g,{x:0,y:ee-1},{x:M,y:O-1},{width:te,height:1}),u.R.copy(G,g,{x:0,y:0},{x:M,y:O+ee},{width:te,height:1}),u.R.copy(G,g,{x:te-1,y:0},{x:M-1,y:O},{width:1,height:ee}),u.R.copy(G,g,{x:0,y:0},{x:M+te,y:O},{width:1,height:ee})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.getImage(c);p||u.w(`Image with ID: "${c}" was not found`),ve(p)&&this.updateImage(c,p)}}}const fe=1e20;function oe(y,i,c,p,g,_,A,M,O){for(let G=i;G<i+p;G++)ce(y,c*_+G,_,g,A,M,O);for(let G=c;G<c+g;G++)ce(y,G*_+i,1,p,A,M,O)}function ce(y,i,c,p,g,_,A){_[0]=0,A[0]=-fe,A[1]=fe,g[0]=y[i];for(let M=1,O=0,G=0;M<p;M++){g[M]=y[i+M*c];const te=M*M;do{const ee=_[O];G=(g[M]-g[ee]+te-ee*ee)/(M-ee)/2}while(G<=A[O]&&--O>-1);O++,_[O]=M,A[O]=G,A[O+1]=fe}for(let M=0,O=0;M<p;M++){for(;A[O+1]<M;)O++;const G=_[O],te=M-G;y[i+M*c]=g[G]+te*te}}class J{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return u._(this,void 0,void 0,function*(){const c=[];for(const _ in i)for(const A of i[_])c.push(this._getAndCacheGlyphsPromise(_,A));const p=yield Promise.all(c),g={};for(const{stack:_,id:A,glyph:M}of p)g[_]||(g[_]={}),g[_][A]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};return g})}_getAndCacheGlyphsPromise(i,c){return u._(this,void 0,void 0,function*(){let p=this.entries[i];p||(p=this.entries[i]={glyphs:{},requests:{},ranges:{}});let g=p.glyphs[c];if(g!==void 0)return{stack:i,id:c,glyph:g};if(g=this._tinySDF(p,i,c),g)return p.glyphs[c]=g,{stack:i,id:c,glyph:g};const _=Math.floor(c/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[_])return{stack:i,id:c,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[_]){const M=J.loadGlyphRange(i,_,this.url,this.requestManager);p.requests[_]=M}const A=yield p.requests[_];for(const M in A)this._doesCharSupportLocalGlyph(+M)||(p.glyphs[+M]=A[+M]);return p.ranges[_]=!0,{stack:i,id:c,glyph:A[c]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](i)||u.u["Hangul Syllables"](i)||u.u.Hiragana(i)||u.u.Katakana(i))}_tinySDF(i,c,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let _=i.tinySDF;if(!_){let M="400";/bold/i.test(c)?M="900":/medium/i.test(c)?M="500":/light/i.test(c)&&(M="200"),_=i.tinySDF=new J.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:M})}const A=_.draw(String.fromCharCode(p));return{id:p,bitmap:new u.o({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}J.loadGlyphRange=function(y,i,c,p){return u._(this,void 0,void 0,function*(){const g=256*i,_=g+255,A=p.transformRequest(c.replace("{fontstack}",y).replace("{range}",`${g}-${_}`),"Glyphs"),M=yield u.l(A,new AbortController);if(!M||!M.data)throw new Error(`Could not load glyph range. range: ${i}, ${g}-${_}`);const O={};for(const G of u.n(M.data))O[G.id]=G;return O})},J.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:c=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:A="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=c;const M=this.size=y+4*i,O=this._createCanvas(M),G=this.ctx=O.getContext("2d",{willReadFrequently:!0});G.font=`${A} ${_} ${y}px ${g}`,G.textBaseline="alphabetic",G.textAlign="left",G.fillStyle="black",this.gridOuter=new Float64Array(M*M),this.gridInner=new Float64Array(M*M),this.f=new Float64Array(M),this.z=new Float64Array(M+1),this.v=new Uint16Array(M)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(y),A=Math.ceil(c),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),O=Math.min(this.size-this.buffer,A+Math.ceil(p)),G=M+2*this.buffer,te=O+2*this.buffer,ee=Math.max(G*te,0),me=new Uint8ClampedArray(ee),be={data:me,width:G,height:te,glyphWidth:M,glyphHeight:O,glyphTop:A,glyphLeft:0,glyphAdvance:i};if(M===0||O===0)return be;const{ctx:Ae,buffer:ze,gridInner:Ce,gridOuter:Ge}=this;Ae.clearRect(ze,ze,M,O),Ae.fillText(y,ze,ze+A);const Ke=Ae.getImageData(ze,ze,M,O);Ge.fill(fe,0,ee),Ce.fill(0,0,ee);for(let Re=0;Re<O;Re++)for(let Ye=0;Ye<M;Ye++){const rt=Ke.data[4*(Re*M+Ye)+3]/255;if(rt===0)continue;const at=(Re+ze)*G+Ye+ze;if(rt===1)Ge[at]=0,Ce[at]=fe;else{const mt=.5-rt;Ge[at]=mt>0?mt*mt:0,Ce[at]=mt<0?mt*mt:0}}oe(Ge,0,0,G,te,G,this.f,this.v,this.z),oe(Ce,ze,ze,M,O,G,this.f,this.v,this.z);for(let Re=0;Re<ee;Re++){const Ye=Math.sqrt(Ge[Re])-Math.sqrt(Ce[Re]);me[Re]=Math.round(255-255*(Ye/this.radius+this.cutoff))}return be}};class re{constructor(){this.specification=u.v.light.position}possiblyEvaluate(i,c){return u.y(i.expression.evaluate(c))}interpolate(i,c,p){return{x:u.z.number(i.x,c.x,p),y:u.z.number(i.y,c.y,p),z:u.z.number(i.z,c.z,p)}}}let de;class we extends u.E{constructor(i){super(),de=de||new u.q({anchor:new u.D(u.v.light.anchor),position:new re,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(de),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(u.r,i,c))for(const p in i){const g=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p){return(!p||p.validate!==!1)&&u.t(this,i.call(u.x,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}class Te{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const p=i.join(",")+String(c);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,c)),this.dashEntry[p]}getDashRanges(i,c,p){const g=[];let _=i.length%2==1?-i[i.length-1]*p:0,A=i[0]*p,M=!0;g.push({left:_,right:A,isDash:M,zeroLength:i[0]===0});let O=i[0];for(let G=1;G<i.length;G++){M=!M;const te=i[G];_=O*p,O+=te,A=O*p,g.push({left:_,right:A,isDash:M,zeroLength:te===0})}return g}addRoundDash(i,c,p){const g=c/2;for(let _=-p;_<=p;_++){const A=this.width*(this.nextRow+p+_);let M=0,O=i[M];for(let G=0;G<this.width;G++){G/O.right>1&&(O=i[++M]);const te=Math.abs(G-O.left),ee=Math.abs(G-O.right),me=Math.min(te,ee);let be;const Ae=_/p*(g+1);if(O.isDash){const ze=g-Math.abs(Ae);be=Math.sqrt(me*me+ze*ze)}else be=g-Math.sqrt(me*me+Ae*Ae);this.data[A+G]=Math.max(0,Math.min(255,be+128))}}}addRegularDash(i){for(let M=i.length-1;M>=0;--M){const O=i[M],G=i[M+1];O.zeroLength?i.splice(M,1):G&&G.isDash===O.isDash&&(G.left=O.left,i.splice(M,1))}const c=i[0],p=i[i.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const g=this.width*this.nextRow;let _=0,A=i[_];for(let M=0;M<this.width;M++){M/A.right>1&&(A=i[++_]);const O=Math.abs(M-A.left),G=Math.abs(M-A.right),te=Math.min(O,G);this.data[g+M]=Math.max(0,Math.min(255,(A.isDash?te:-te)+128))}}addDash(i,c){const p=c?7:0,g=2*p+1;if(this.nextRow+g>this.height)return u.w("LineAtlas out of space"),null;let _=0;for(let M=0;M<i.length;M++)_+=i[M];if(_!==0){const M=this.width/_,O=this.getDashRanges(i,this.width,M);c?this.addRoundDash(O,M,p):this.addRegularDash(O)}const A={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:_};return this.nextRow+=g,this.dirty=!0,A}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Ne="maplibre_preloaded_worker_pool";class Ie{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Ie.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ne]}numActive(){return Object.keys(this.active).length}}const Oe=Math.floor(b.hardwareConcurrency/2);let qe,He;function ot(){return qe||(qe=new Ie),qe}Ie.workerCount=u.B(globalThis)?Math.max(Math.min(Oe,3),1):1;class ht{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=c;const p=this.workerPool.acquire(c);for(let g=0;g<p.length;g++){const _=new u.C(p[g],c);_.name=`Worker ${g}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c){const p=[];for(const g of this.actors)p.push(g.sendAsync({type:i,data:c}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,c){for(const p of this.actors)p.registerMessageHandler(i,c)}}function xt(){return He||(He=new ht(ot(),u.G),He.registerMessageHandler("GR",(y,i,c)=>u.m(i,c))),He}function Mt(y,i){const c=u.F();return u.H(c,c,[1,1,0]),u.J(c,c,[.5*y.width,.5*y.height,1]),u.K(c,c,y.calculatePosMatrix(i.toUnwrapped()))}function pt(y,i,c,p,g,_){const A=function(ee,me,be){if(ee)for(const Ae of ee){const ze=me[Ae];if(ze&&ze.source===be&&ze.type==="fill-extrusion")return!0}else for(const Ae in me){const ze=me[Ae];if(ze.source===be&&ze.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,y.id),M=_.maxPitchScaleFactor(),O=y.tilesIn(p,M,A);O.sort(wt);const G=[];for(const ee of O)G.push({wrappedTileID:ee.tileID.wrapped().key,queryResults:ee.tile.queryRenderedFeatures(i,c,y._state,ee.queryGeometry,ee.cameraQueryGeometry,ee.scale,g,_,M,Mt(y.transform,ee.tileID))});const te=function(ee){const me={},be={};for(const Ae of ee){const ze=Ae.queryResults,Ce=Ae.wrappedTileID,Ge=be[Ce]=be[Ce]||{};for(const Ke in ze){const Re=ze[Ke],Ye=Ge[Ke]=Ge[Ke]||{},rt=me[Ke]=me[Ke]||[];for(const at of Re)Ye[at.featureIndex]||(Ye[at.featureIndex]=!0,rt.push(at))}}return me}(G);for(const ee in te)te[ee].forEach(me=>{const be=me.feature,Ae=y.getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=Ae});return te}function wt(y,i){const c=y.tileID,p=i.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}function Ht(y,i,c){return u._(this,void 0,void 0,function*(){let p=y;if(y.url?p=(yield u.h(i.transformRequest(y.url,"Source"),c)).data:yield b.frameAsync(c),!p)return null;const g=u.L(u.e(p,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(g.vectorLayerIds=p.vector_layers.map(_=>_.id)),g})}class zt{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof u.M?new u.M(i.lng,i.lat):u.M.convert(i),this}setSouthWest(i){return this._sw=i instanceof u.M?new u.M(i.lng,i.lat):u.M.convert(i),this}extend(i){const c=this._sw,p=this._ne;let g,_;if(i instanceof u.M)g=i,_=i;else{if(!(i instanceof zt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(zt.convert(i)):this.extend(u.M.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(u.M.convert(i)):this;if(g=i._sw,_=i._ne,!g||!_)return this}return c||p?(c.lng=Math.min(g.lng,c.lng),c.lat=Math.min(g.lat,c.lat),p.lng=Math.max(_.lng,p.lng),p.lat=Math.max(_.lat,p.lat)):(this._sw=new u.M(g.lng,g.lat),this._ne=new u.M(_.lng,_.lat)),this}getCenter(){return new u.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.M(this.getWest(),this.getNorth())}getSouthEast(){return new u.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:p}=u.M.convert(i);let g=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(i){return i instanceof zt?i:i&&new zt(i)}static fromLngLat(i,c=0){const p=360*c/40075017,g=p/Math.cos(Math.PI/180*i.lat);return new zt(new u.M(i.lng-g,i.lat-p),new u.M(i.lng+g,i.lat+p))}}class ur{constructor(i,c,p){this.bounds=zt.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),p=Math.floor(u.N(this.bounds.getWest())*c),g=Math.floor(u.O(this.bounds.getNorth())*c),_=Math.ceil(u.N(this.bounds.getEast())*c),A=Math.ceil(u.O(this.bounds.getSouth())*c);return i.x>=p&&i.x<_&&i.y>=g&&i.y<A}}class it extends u.E{constructor(i,c,p,g){if(super(),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.L(c,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Ht(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(u.e(this,i),i.bounds&&(this.tileBounds=new ur(i.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new u.j(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(c,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((_,A)=>{i.reloadPromise={resolve:_,reject:A}})}else i.actor=this.dispatcher.getActor(),g="LT";i.abortController=new AbortController;try{const _=yield i.actor.sendAsync({type:g,data:p},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,_)}catch(_){if(delete i.abortController,i.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,c){if(c&&c.resourceTiming&&(i.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&i.setExpiryData(c),i.loadVectorData(c,this.map.painter),i.reloadPromise){const p=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(p.resolve).catch(p.reject)}}abortTile(i){return u._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return u._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class wr extends u.E{constructor(i,c,p,g){super(),this.id=i,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},c),u.e(this,u.L(c,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Ht(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(u.e(this,i),i.bounds&&(this.tileBounds=new ur(i.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new u.j(i))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return u.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const p=yield V.getImage(this.map._requestManager.transformRequest(c,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&i.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const g=this.map.painter.context,_=g.gl,A=p.data;i.texture=this.map.painter.getTileTexture(A.width),i.texture?i.texture.update(A,{useMipmap:!0}):(i.texture=new q(g,A,_.RGBA,{useMipmap:!0}),i.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&_.texParameterf(_.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax)),i.state="loaded"}}catch(p){if(delete i.abortController,i.aborted)i.state="unloaded";else if(p)throw i.state="errored",p}})}abortTile(i){return u._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return u._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class cr extends wr{constructor(i,c,p,g){super(i,c,p,g),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(c,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const g=yield V.getImage(p,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(g&&g.data){const _=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&i.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const A=u.b(_)&&u.S()?_:yield this.readImageNow(_),M={type:this.type,uid:i.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const O=yield i.actor.sendAsync({type:"LDT",data:M});i.dem=O,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(g){if(delete i.abortController,i.aborted)i.state="unloaded";else if(g)throw i.state="errored",g}})}readImageNow(i){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.U()){const c=i.width+2,p=i.height+2;try{return new u.R({width:c,height:p},yield u.V(i,-1,-1,c,p))}catch{}}return b.getImageData(i,1)})}_getNeighboringTiles(i){const c=i.canonical,p=Math.pow(2,c.z),g=(c.x-1+p)%p,_=c.x===0?i.wrap-1:i.wrap,A=(c.x+1+p)%p,M=c.x+1===p?i.wrap+1:i.wrap,O={};return O[new u.Q(i.overscaledZ,_,c.z,g,c.y).key]={backfilled:!1},O[new u.Q(i.overscaledZ,M,c.z,A,c.y).key]={backfilled:!1},c.y>0&&(O[new u.Q(i.overscaledZ,_,c.z,g,c.y-1).key]={backfilled:!1},O[new u.Q(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},O[new u.Q(i.overscaledZ,M,c.z,A,c.y-1).key]={backfilled:!1}),c.y+1<p&&(O[new u.Q(i.overscaledZ,_,c.z,g,c.y+1).key]={backfilled:!1},O[new u.Q(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},O[new u.Q(i.overscaledZ,M,c.z,A,c.y+1).key]={backfilled:!1}),O}unloadTile(i){return u._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class qt extends u.E{constructor(i,c,p,g){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=c.data,this._options=u.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const _=u.W/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*_,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*_,extent:u.W,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:u.W,radius:(c.clusterRadius||50)*_,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return u._(this,void 0,void 0,function*(){const i=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})})}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,c,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:c,offset:p}})}_updateWorkerData(i){return u._(this,void 0,void 0,function*(){const c=u.e({type:this.type},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let g=null;p.resourceTiming&&p.resourceTiming[this.id]&&(g=p.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&u.e(_,{resourceTiming:g}),this.fire(new u.k("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(p))}})}loaded(){return this._pendingLoads===0}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.actor?"RT":"LT";i.actor=this.actor;const p={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.abortController=new AbortController;const g=yield this.actor.sendAsync({type:c,data:p},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(g,this.map.painter,c==="RT")})}abortTile(i){return u._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return u._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Se=u.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class N extends u.E{constructor(i,c,p,g){super(),this.id=i,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=c}load(i){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield V.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,i&&(this.coordinates=i),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new u.j(c))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(u.Y.fromLngLat);this.tileID=function(g){let _=1/0,A=1/0,M=-1/0,O=-1/0;for(const me of g)_=Math.min(_,me.x),A=Math.min(A,me.y),M=Math.max(M,me.x),O=Math.max(O,me.y);const G=Math.max(M-_,O-A),te=Math.max(0,Math.floor(-Math.log(G)/Math.LN2)),ee=Math.pow(2,te);return new u.a0(te,Math.floor((_+M)/2*ee),Math.floor((A+O)/2*ee))}(c),this.minzoom=this.maxzoom=this.tileID.z;const p=c.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new u.Z,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,u.W,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,u.W),this._boundsArray.emplaceBack(p[2].x,p[2].y,u.W,u.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Se.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new q(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class D extends N{constructor(i,c,p,g){super(i,c,p,g),this.roundZoom=!0,this.type="video",this.options=c}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const c of i.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield u.a2(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new u.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new u.j(new u.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Se.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new q(i,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class xe extends N{constructor(i,c,p,g){super(i,c,p,g),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(A=>typeof A!="number"))||this.fire(new u.j(new u.a1(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a1(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new u.j(new u.a1(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a1(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a1(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,p=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Se.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new q(c,this.canvas,p.RGBA,{premultiply:!0});let g=!1;for(const _ in this.tiles){const A=this.tiles[_];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,g=!0)}g&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Xe={},tt=y=>{switch(y){case"geojson":return qt;case"image":return N;case"raster":return wr;case"raster-dem":return cr;case"vector":return it;case"video":return D;case"canvas":return xe}return Xe[y]},ct="RTLPluginLoaded";class le extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=xt()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return u._(this,arguments,void 0,function*(c,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(ct))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let k=null;function $(){return k||(k=new le),k}class Ee{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=u.a3(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,_){const A={};if(!_)return A;for(const M of g){const O=M.layerIds.map(G=>_.getLayer(G)).filter(Boolean);if(O.length!==0){M.layers=O,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map(G=>O.filter(te=>te.id===G)[0]));for(const G of O)A[G.id]=M}}return A}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof u.a5){if(this.hasSymbolBuckets=!0,!p)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof u.a5&&_.hasRTLText){this.hasRTLText=!0,$().lazyLoad();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(g).queryRadius(_))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new u.a4}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new q(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new q(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,p,g,_,A,M,O,G,te){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:A,tileSize:this.tileSize,pixelPosMatrix:te,transform:O,params:M,queryPadding:this.queryPadding*G},i,c,p):{}}querySourceFeatures(i,c){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),_=c&&c.sourceLayer?c.sourceLayer:"",A=g._geojsonTileLayer||g[_];if(!A)return;const M=u.a6(c&&c.filter),{z:O,x:G,y:te}=this.tileID.canonical,ee={z:O,x:G,y:te};for(let me=0;me<A.length;me++){const be=A.feature(me);if(M.needGeometry){const Ce=u.a7(be,!0);if(!M.filter(new u.a8(this.tileID.overscaledZ),Ce,this.tileID.canonical))continue}else if(!M.filter(new u.a8(this.tileID.overscaledZ),be))continue;const Ae=p.getId(be,_),ze=new u.a9(be,O,G,te,Ae);ze.tile=ee,i.push(ze)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const p=u.aa(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(c)if(this.expirationTime<c)g=!0;else{const _=this.expirationTime-c;_?this.expirationTime=p+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!c.style.hasLayer(g))continue;const _=this.buckets[g],A=_.layers[0].sourceLayer||"_geojsonTileLayer",M=p[A],O=i[A];if(!M||!O||Object.keys(O).length===0)continue;_.update(O,M,this.imageAtlas&&this.imageAtlas.patternPositions||{});const G=c&&c.style&&c.style.getLayer(g);G&&(this.queryPadding=Math.max(this.queryPadding,G.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=b.now()+i}setDependencies(i,c){const p={};for(const g of c)p[g]=!0;this.dependencies[i]=p}hasDependency(i,c){for(const p of i){const g=this.dependencies[p];if(g){for(const _ of c)if(g[_])return!0}}return!1}}class We{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,p){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:c,timeout:void 0};if(p!==void 0&&(_.timeout=setTimeout(()=>{this.remove(i,_)},p)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const p=i.wrapped().key,g=c===void 0?0:this.data[p].indexOf(c),_=this.data[p][g];return this.data[p].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(_.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const p in this.data)for(const g of this.data[p])i(g.value)||c.push(g);for(const p of c)this.remove(p.value.tileID,p)}}class nt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,p){const g=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},u.e(this.stateChanges[i][g],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const _ in this.state[i])_!==g&&(this.deletedStates[i][_]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const _ in this.state[i][g])p[_]||(this.deletedStates[i][g][_]=null)}else for(const _ in p)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][_]===null&&delete this.deletedStates[i][g][_]}removeFeatureState(i,c,p){if(this.deletedStates[i]===null)return;const g=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&c!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][p]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(p in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][p]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,c){const p=String(c),g=u.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const _=this.deletedStates[i][c];if(_===null)return{};for(const A in _)delete g[A]}return g}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const A in this.stateChanges[g])this.state[g][A]||(this.state[g][A]={}),u.e(this.state[g][A],this.stateChanges[g][A]),_[A]=this.state[g][A];p[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const A in this.state[g])_[A]={},this.state[g][A]={};else for(const A in this.deletedStates[g]){if(this.deletedStates[g][A]===null)this.state[g][A]={};else for(const M of Object.keys(this.deletedStates[g][A]))delete this.state[g][A][M];_[A]=this.state[g][A]}p[g]=p[g]||{},u.e(p[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in i)i[g].setFeatureState(p,c)}}class Ve extends u.E{constructor(i,c,p){super(),this.id=i,this.dispatcher=p,this.on("data",g=>this._dataHandler(g)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,A,M)=>{const O=new(tt(_.type))(g,_,A,M);if(O.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${O.id}`);return O})(i,c,p,this),this._tiles={},this._cache=new We(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new nt,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c,p){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,c,p)}catch(g){i.state="errored",g.status!==404?this._source.fire(new u.j(g,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new u.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const p=this._tiles[c];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Et).map(i=>i.key)}getRenderableIds(i){const c=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&c.push(this._tiles[p]);return i?c.sort((p,g)=>{const _=p.tileID,A=g.tileID,M=new u.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),O=new u.P(A.canonical.x,A.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-A.overscaledZ||O.y-M.y||O.x-M.x}).map(p=>p.tileID.key):c.map(p=>p.tileID).sort(Et).map(p=>p.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){return u._(this,void 0,void 0,function*(){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=c),yield this._loadTile(p,i,c))})}_tileLoaded(i,c,p){i.timeAdded=b.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let g=0;g<c.length;g++){const _=c[g];if(i.neighboringTiles&&i.neighboringTiles[_]){const A=this.getTileByID(_);p(i,A),p(A,i)}}function p(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let A=_.tileID.canonical.x-g.tileID.canonical.x;const M=_.tileID.canonical.y-g.tileID.canonical.y,O=Math.pow(2,g.tileID.canonical.z),G=_.tileID.key;A===0&&M===0||Math.abs(M)>1||(Math.abs(A)>1&&(Math.abs(A+O)===1?A+=O:Math.abs(A-O)===1&&(A-=O)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,A,M),g.neighboringTiles&&g.neighboringTiles[G]&&(g.neighboringTiles[G].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,p,g){for(const _ in this._tiles){let A=this._tiles[_];if(g[_]||!A.hasData()||A.tileID.overscaledZ<=c||A.tileID.overscaledZ>p)continue;let M=A.tileID;for(;A&&A.tileID.overscaledZ>c+1;){const G=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[G.key],A&&A.hasData()&&(M=G)}let O=M;for(;O.overscaledZ>c;)if(O=O.scaledTo(O.overscaledZ-1),i[O.key]){g[M.key]=M;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=c?p:null}for(let p=i.overscaledZ-1;p>=c;p--){const g=i.scaledTo(p),_=this._getLoadedTile(g);if(_)return _}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(c*p*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const p={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+c),p[_.tileID.key]=_}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}_updateCoveredAndRetainedTiles(i,c,p,g,_,A){const M={},O={},G=Object.keys(i),te=b.now();for(const ee of G){const me=i[ee],be=this._tiles[ee];if(!be||be.fadeEndTime!==0&&be.fadeEndTime<=te)continue;const Ae=this.findLoadedParent(me,c),ze=this.findLoadedSibling(me),Ce=Ae||ze||null;Ce&&(this._addTile(Ce.tileID),M[Ce.tileID.key]=Ce.tileID),O[ee]=me}this._retainLoadedChildren(O,g,p,i);for(const ee in M)i[ee]||(this._coveredTiles[ee]=!0,i[ee]=M[ee]);if(A){const ee={},me={};for(const be of _)this._tiles[be.key].hasData()?ee[be.key]=be:me[be.key]=be;for(const be in me){const Ae=me[be].children(this._source.maxzoom);this._tiles[Ae[0].key]&&this._tiles[Ae[1].key]&&this._tiles[Ae[2].key]&&this._tiles[Ae[3].key]&&(ee[Ae[0].key]=i[Ae[0].key]=Ae[0],ee[Ae[1].key]=i[Ae[1].key]=Ae[1],ee[Ae[2].key]=i[Ae[2].key]=Ae[2],ee[Ae[3].key]=i[Ae[3].key]=Ae[3],delete me[be])}for(const be in me){const Ae=me[be],ze=this.findLoadedParent(Ae,this._source.minzoom),Ce=this.findLoadedSibling(Ae),Ge=ze||Ce||null;if(Ge){ee[Ge.tileID.key]=i[Ge.tileID.key]=Ge.tileID;for(const Ke in ee)ee[Ke].isChildOf(Ge.tileID)&&delete ee[Ke]}}for(const be in this._tiles)ee[be]||(this._coveredTiles[be]=!0)}}update(i,c){if(!this._sourceLoaded||this._paused)return;let p;this.transform=i,this.terrain=c,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(te=>new u.Q(te.canonical.z,te.wrap,te.canonical.z,te.canonical.x,te.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(p=p.filter(te=>this._source.hasTile(te)))):p=[];const g=i.coveringZoomLevel(this._source),_=Math.max(g-Ve.maxOverzooming,this._source.minzoom),A=Math.max(g+Ve.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const te={};for(const ee of p)if(ee.canonical.z>this._source.minzoom){const me=ee.scaledTo(ee.canonical.z-1);te[me.key]=me;const be=ee.scaledTo(Math.max(this._source.minzoom,Math.min(ee.canonical.z,5)));te[be.key]=be}p=p.concat(Object.values(te))}const M=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,M&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(p,g);Ot(this._source.type)&&this._updateCoveredAndRetainedTiles(O,_,A,g,p,c);for(const te in O)this._tiles[te].clearFadeHold();const G=u.ab(this._tiles,O);for(const te of G){const ee=this._tiles[te];ee.hasSymbolBuckets&&!ee.holdingForFade()?ee.setHoldDuration(this.map._fadeDuration):ee.hasSymbolBuckets&&!ee.symbolFadeFinished()||this._removeTile(te)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){var p;const g={},_={},A=Math.max(c-Ve.maxOverzooming,this._source.minzoom),M=Math.max(c+Ve.maxUnderzooming,this._source.minzoom),O={};for(const G of i){const te=this._addTile(G);g[G.key]=G,te.hasData()||c<this._source.maxzoom&&(O[G.key]=G)}this._retainLoadedChildren(O,c,M,g);for(const G of i){let te=this._tiles[G.key];if(te.hasData())continue;if(c+1>this._source.maxzoom){const me=G.children(this._source.maxzoom)[0],be=this.getTile(me);if(be&&be.hasData()){g[me.key]=me;continue}}else{const me=G.children(this._source.maxzoom);if(g[me[0].key]&&g[me[1].key]&&g[me[2].key]&&g[me[3].key])continue}let ee=te.wasRequested();for(let me=G.overscaledZ-1;me>=A;--me){const be=G.scaledTo(me);if(_[be.key])break;if(_[be.key]=!0,te=this.getTile(be),!te&&ee&&(te=this._addTile(be)),te){const Ae=te.hasData();if((Ae||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||ee)&&(g[be.key]=be),ee=te.wasRequested(),Ae)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let p,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}c.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(_),p)break;g=_}for(const _ of c)this._loadedParentTiles[_]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const i in this._tiles){const c=this._tiles[i].tileID,p=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=p}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const p=c;return c||(c=new Ee(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,i.key,c.state)),c.uses++,this._tiles[i.key]=c,p||this._source.fire(new u.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=c.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(i){const c=i.sourceDataType;i.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,p){const g=[],_=this.transform;if(!_)return g;const A=p?_.getCameraQueryGeometry(i):i,M=i.map(Ae=>_.pointCoordinate(Ae,this.terrain)),O=A.map(Ae=>_.pointCoordinate(Ae,this.terrain)),G=this.getIds();let te=1/0,ee=1/0,me=-1/0,be=-1/0;for(const Ae of O)te=Math.min(te,Ae.x),ee=Math.min(ee,Ae.y),me=Math.max(me,Ae.x),be=Math.max(be,Ae.y);for(let Ae=0;Ae<G.length;Ae++){const ze=this._tiles[G[Ae]];if(ze.holdingForFade())continue;const Ce=ze.tileID,Ge=Math.pow(2,_.zoom-ze.tileID.overscaledZ),Ke=c*ze.queryPadding*u.W/ze.tileSize/Ge,Re=[Ce.getTilePoint(new u.Y(te,ee)),Ce.getTilePoint(new u.Y(me,be))];if(Re[0].x-Ke<u.W&&Re[0].y-Ke<u.W&&Re[1].x+Ke>=0&&Re[1].y+Ke>=0){const Ye=M.map(at=>Ce.getTilePoint(at)),rt=O.map(at=>Ce.getTilePoint(at));g.push({tile:ze,tileID:Ce,queryGeometry:Ye,cameraQueryGeometry:rt,scale:Ge})}}return g}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of c)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Ot(this._source.type)){const i=b.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,p){this._state.updateState(i=i||"_geojsonTileLayer",c,p)}removeFeatureState(i,c,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,p)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,p){const g=this._tiles[i];g&&g.setDependencies(c,p)}reloadTilesForDependencies(i,c){for(const p in this._tiles)this._tiles[p].hasDependency(i,c)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,c))}}function Et(y,i){const c=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||p-c||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function Ot(y){return y==="raster"||y==="image"||y==="video"}Ve.maxOverzooming=10,Ve.maxUnderzooming=3;class dr{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=u.ac(i,0,1);let c=1,p=this._distances[c];const g=i*this.paddedLength+this.padding;for(;p<g&&c<this._distances.length;)p=this._distances[++c];const _=c-1,A=this._distances[_],M=p-A,O=M>0?(g-A)/M:0;return this.points[_].mult(1-O).add(this.points[c].mult(O))}}function br(y,i){let c=!0;return y==="always"||y!=="never"&&i!=="never"||(c=!1),c}class Ft{constructor(i,c,p){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(c/p);for(let A=0;A<this.xCellCount*this.yCellCount;A++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,p,g,_){this._forEachCell(c,p,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(i,c,p,g){this._forEachCell(c-g,p-g,c+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(p),this.circles.push(g)}_insertBoxCell(i,c,p,g,_,A){this.boxCells[_].push(A)}_insertCircleCell(i,c,p,g,_,A){this.circleCells[_].push(A)}_query(i,c,p,g,_,A,M){if(p<0||i>this.width||g<0||c>this.height)return[];const O=[];if(i<=0&&c<=0&&this.width<=p&&this.height<=g){if(_)return[{key:null,x1:i,y1:c,x2:p,y2:g}];for(let G=0;G<this.boxKeys.length;G++)O.push({key:this.boxKeys[G],x1:this.bboxes[4*G],y1:this.bboxes[4*G+1],x2:this.bboxes[4*G+2],y2:this.bboxes[4*G+3]});for(let G=0;G<this.circleKeys.length;G++){const te=this.circles[3*G],ee=this.circles[3*G+1],me=this.circles[3*G+2];O.push({key:this.circleKeys[G],x1:te-me,y1:ee-me,x2:te+me,y2:ee+me})}}else this._forEachCell(i,c,p,g,this._queryCell,O,{hitTest:_,overlapMode:A,seenUids:{box:{},circle:{}}},M);return O}query(i,c,p,g){return this._query(i,c,p,g,!1,null)}hitTest(i,c,p,g,_,A){return this._query(i,c,p,g,!0,_,A).length>0}hitTestCircle(i,c,p,g,_){const A=i-p,M=i+p,O=c-p,G=c+p;if(M<0||A>this.width||G<0||O>this.height)return!1;const te=[];return this._forEachCell(A,O,M,G,this._queryCellCircle,te,{hitTest:!0,overlapMode:g,circle:{x:i,y:c,radius:p},seenUids:{box:{},circle:{}}},_),te.length>0}_queryCell(i,c,p,g,_,A,M,O){const{seenUids:G,hitTest:te,overlapMode:ee}=M,me=this.boxCells[_];if(me!==null){const Ae=this.bboxes;for(const ze of me)if(!G.box[ze]){G.box[ze]=!0;const Ce=4*ze,Ge=this.boxKeys[ze];if(i<=Ae[Ce+2]&&c<=Ae[Ce+3]&&p>=Ae[Ce+0]&&g>=Ae[Ce+1]&&(!O||O(Ge))&&(!te||!br(ee,Ge.overlapMode))&&(A.push({key:Ge,x1:Ae[Ce],y1:Ae[Ce+1],x2:Ae[Ce+2],y2:Ae[Ce+3]}),te))return!0}}const be=this.circleCells[_];if(be!==null){const Ae=this.circles;for(const ze of be)if(!G.circle[ze]){G.circle[ze]=!0;const Ce=3*ze,Ge=this.circleKeys[ze];if(this._circleAndRectCollide(Ae[Ce],Ae[Ce+1],Ae[Ce+2],i,c,p,g)&&(!O||O(Ge))&&(!te||!br(ee,Ge.overlapMode))){const Ke=Ae[Ce],Re=Ae[Ce+1],Ye=Ae[Ce+2];if(A.push({key:Ge,x1:Ke-Ye,y1:Re-Ye,x2:Ke+Ye,y2:Re+Ye}),te)return!0}}}return!1}_queryCellCircle(i,c,p,g,_,A,M,O){const{circle:G,seenUids:te,overlapMode:ee}=M,me=this.boxCells[_];if(me!==null){const Ae=this.bboxes;for(const ze of me)if(!te.box[ze]){te.box[ze]=!0;const Ce=4*ze,Ge=this.boxKeys[ze];if(this._circleAndRectCollide(G.x,G.y,G.radius,Ae[Ce+0],Ae[Ce+1],Ae[Ce+2],Ae[Ce+3])&&(!O||O(Ge))&&!br(ee,Ge.overlapMode))return A.push(!0),!0}}const be=this.circleCells[_];if(be!==null){const Ae=this.circles;for(const ze of be)if(!te.circle[ze]){te.circle[ze]=!0;const Ce=3*ze,Ge=this.circleKeys[ze];if(this._circlesCollide(Ae[Ce],Ae[Ce+1],Ae[Ce+2],G.x,G.y,G.radius)&&(!O||O(Ge))&&!br(ee,Ge.overlapMode))return A.push(!0),!0}}}_forEachCell(i,c,p,g,_,A,M,O){const G=this._convertToXCellCoord(i),te=this._convertToYCellCoord(c),ee=this._convertToXCellCoord(p),me=this._convertToYCellCoord(g);for(let be=G;be<=ee;be++)for(let Ae=te;Ae<=me;Ae++)if(_.call(this,i,c,p,g,this.xCellCount*Ae+be,A,M,O))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,p,g,_,A){const M=g-i,O=_-c,G=p+A;return G*G>M*M+O*O}_circleAndRectCollide(i,c,p,g,_,A,M){const O=(A-g)/2,G=Math.abs(i-(g+O));if(G>O+p)return!1;const te=(M-_)/2,ee=Math.abs(c-(_+te));if(ee>te+p)return!1;if(G<=O||ee<=te)return!0;const me=G-O,be=ee-te;return me*me+be*be<=p*p}}function Nn(y,i,c,p,g){const _=u.F();return i?(u.J(_,_,[1/g,1/g,1]),c||u.ad(_,_,p.angle)):u.K(_,p.labelPlaneMatrix,y),_}function ni(y,i,c,p,g){if(i){const _=u.ae(y);return u.J(_,_,[g,g,1]),c||u.ad(_,_,-p.angle),_}return p.glCoordMatrix}function an(y,i,c){let p;c?(p=[y.x,y.y,c(y.x,y.y),1],u.af(p,p,i)):(p=[y.x,y.y,0,1],function(_,A,M){const O=A[0],G=A[1];_[0]=M[0]*O+M[4]*G+M[12],_[1]=M[1]*O+M[5]*G+M[13],_[3]=M[3]*O+M[7]*G+M[15]}(p,p,i));const g=p[3];return{point:new u.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g,isOccluded:!1}}function Me(y,i){return .5+y/i*.5}function ie(y,i){return y.x>=-i[0]&&y.x<=i[0]&&y.y>=-i[1]&&y.y<=i[1]}function ue(y,i,c,p,g,_,A,M,O,G,te,ee,me,be,Ae){const ze=p?y.textSizeData:y.iconSizeData,Ce=u.ag(ze,c.transform.zoom),Ge=[256/c.width*2+1,256/c.height*2+1],Ke=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Ke.clear();const Re=y.lineVertexArray,Ye=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,rt=c.transform.width/c.transform.height;let at=!1;for(let mt=0;mt<Ye.length;mt++){const bt=Ye.get(mt);if(bt.hidden||bt.writingMode===u.ah.vertical&&!at){nr(bt.numGlyphs,Ke);continue}at=!1;const Nt=an(new u.P(bt.anchorX,bt.anchorY),i,Ae);if(!ie(Nt.point,Ge)){nr(bt.numGlyphs,Ke);continue}const $t=Me(c.transform.cameraToCenterDistance,Nt.signedDistanceFromCamera),St=u.ai(ze,Ce,bt),Pt=A?St/$t:St*$t,Wt={getElevation:Ae,labelPlaneMatrix:g,lineVertexArray:Re,pitchWithMap:A,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:G,tileAnchorPoint:new u.P(bt.anchorX,bt.anchorY),unwrappedTileID:te,width:ee,height:me,translation:be},mr=Be(Wt,bt,Pt,!1,M,i,_,y.glyphOffsetArray,Ke,rt,O);at=mr.useVertical,(mr.notEnoughRoom||at||mr.needsFlipping&&Be(Wt,bt,Pt,!0,M,i,_,y.glyphOffsetArray,Ke,rt,O).notEnoughRoom)&&nr(bt.numGlyphs,Ke)}p?y.text.dynamicLayoutVertexBuffer.updateData(Ke):y.icon.dynamicLayoutVertexBuffer.updateData(Ke)}function pe(y,i,c,p,g,_,A,M){const O=_.glyphStartIndex+_.numGlyphs,G=_.lineStartIndex,te=_.lineStartIndex+_.lineLength,ee=i.getoffsetX(_.glyphStartIndex),me=i.getoffsetX(O-1),be=lt(y*ee,c,p,g,_.segment,G,te,M,A);if(!be)return null;const Ae=lt(y*me,c,p,g,_.segment,G,te,M,A);return Ae?M.projectionCache.anyProjectionOccluded?null:{first:be,last:Ae}:null}function Fe(y,i,c,p){return y===u.ah.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*p?{useVertical:!0}:(y===u.ah.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function Be(y,i,c,p,g,_,A,M,O,G,te){const ee=c/24,me=i.lineOffsetX*ee,be=i.lineOffsetY*ee;let Ae;if(i.numGlyphs>1){const ze=i.glyphStartIndex+i.numGlyphs,Ce=i.lineStartIndex,Ge=i.lineStartIndex+i.lineLength,Ke=pe(ee,M,me,be,p,i,te,y);if(!Ke)return{notEnoughRoom:!0};const Re=an(Ke.first.point,A,y.getElevation).point,Ye=an(Ke.last.point,A,y.getElevation).point;if(g&&!p){const rt=Fe(i.writingMode,Re,Ye,G);if(rt)return rt}Ae=[Ke.first];for(let rt=i.glyphStartIndex+1;rt<ze-1;rt++)Ae.push(lt(ee*M.getoffsetX(rt),me,be,p,i.segment,Ce,Ge,y,te));Ae.push(Ke.last)}else{if(g&&!p){const Ce=an(y.tileAnchorPoint,_,y.getElevation).point,Ge=i.lineStartIndex+i.segment+1,Ke=new u.P(y.lineVertexArray.getx(Ge),y.lineVertexArray.gety(Ge)),Re=an(Ke,_,y.getElevation),Ye=Re.signedDistanceFromCamera>0?Re.point:function(at,mt,bt,Nt,$t,St){return je(at,mt,bt,1,$t,St)}(y.tileAnchorPoint,Ke,Ce,0,_,y),rt=Fe(i.writingMode,Ce,Ye,G);if(rt)return rt}const ze=lt(ee*M.getoffsetX(i.glyphStartIndex),me,be,p,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,y,te);if(!ze||y.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ae=[ze]}for(const ze of Ae)u.aj(O,ze.point,ze.angle);return{}}function je(y,i,c,p,g,_){const A=y.add(y.sub(i)._unit()),M=g!==void 0?an(A,g,_.getElevation).point:Le(A.x,A.y,_).point,O=c.sub(M);return c.add(O._mult(p/O.mag()))}function Ue(y,i,c){const p=i.projectionCache;if(p.projections[y])return p.projections[y];const g=new u.P(i.lineVertexArray.getx(y),i.lineVertexArray.gety(y)),_=Le(g.x,g.y,i);if(_.signedDistanceFromCamera>0)return p.projections[y]=_.point,p.anyProjectionOccluded=p.anyProjectionOccluded||_.isOccluded,_.point;const A=y-c.direction;return function(M,O,G,te,ee){return je(M,O,G,te,void 0,ee)}(c.distanceFromAnchor===0?i.tileAnchorPoint:new u.P(i.lineVertexArray.getx(A),i.lineVertexArray.gety(A)),g,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,i)}function Le(y,i,c){const p=y+c.translation[0],g=i+c.translation[1];let _;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(_=c.projection.projectTileCoordinates(p,g,c.unwrappedTileID,c.getElevation),_.point.x=(.5*_.point.x+.5)*c.width,_.point.y=(.5*-_.point.y+.5)*c.height):(_=an(new u.P(p,g),c.labelPlaneMatrix,c.getElevation),_.isOccluded=!1),_}function Qe(y,i,c){return y._unit()._perp()._mult(i*c)}function ft(y,i,c,p,g,_,A,M,O){if(M.projectionCache.offsets[y])return M.projectionCache.offsets[y];const G=c.add(i);if(y+O.direction<p||y+O.direction>=g)return M.projectionCache.offsets[y]=G,G;const te=Ue(y+O.direction,M,O),ee=Qe(te.sub(c),A,O.direction),me=c.add(ee),be=te.add(ee);return M.projectionCache.offsets[y]=u.ak(_,G,me,be)||G,M.projectionCache.offsets[y]}function lt(y,i,c,p,g,_,A,M,O){const G=p?y-i:y+i;let te=G>0?1:-1,ee=0;p&&(te*=-1,ee=Math.PI),te<0&&(ee+=Math.PI);let me,be=te>0?_+g:_+g+1;M.projectionCache.cachedAnchorPoint?me=M.projectionCache.cachedAnchorPoint:(me=Le(M.tileAnchorPoint.x,M.tileAnchorPoint.y,M).point,M.projectionCache.cachedAnchorPoint=me);let Ae,ze,Ce=me,Ge=me,Ke=0,Re=0;const Ye=Math.abs(G),rt=[];let at;for(;Ke+Re<=Ye;){if(be+=te,be<_||be>=A)return null;Ke+=Re,Ge=Ce,ze=Ae;const Nt={absOffsetX:Ye,direction:te,distanceFromAnchor:Ke,previousVertex:Ge};if(Ce=Ue(be,M,Nt),c===0)rt.push(Ge),at=Ce.sub(Ge);else{let $t;const St=Ce.sub(Ge);$t=St.mag()===0?Qe(Ue(be+te,M,Nt).sub(Ce),c,te):Qe(St,c,te),ze||(ze=Ge.add($t)),Ae=ft(be,$t,Ce,_,A,ze,c,M,Nt),rt.push(ze),at=Ae.sub(ze)}Re=at.mag()}const mt=at._mult((Ye-Ke)/Re)._add(ze||Ge),bt=ee+Math.atan2(Ce.y-Ge.y,Ce.x-Ge.x);return rt.push(mt),{point:mt,angle:O?bt:0,path:rt}}const ut=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function nr(y,i){for(let c=0;c<y;c++){const p=i.length;i.resize(p+4),i.float32.set(ut,3*p)}}const Yt=100;class Er{constructor(i,c,p=new Ft(i.width+200,i.height+200,25),g=new Ft(i.width+200,i.height+200,25)){this.transform=i,this.mapProjection=c,this.grid=p,this.ignoredGrid=g,this.pitchFactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Yt,this.screenBottomBoundary=i.height+Yt,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,p,g,_,A,M,O,G,te,ee){const me=i.anchorPointX+O[0],be=i.anchorPointY+O[1],Ae=this.projectAndGetPerspectiveRatio(g,me,be,_,te),ze=this._projectCollisionBox(i,p,g,_,A,M,O,Ae,te,ee),[Ce,Ge,Ke,Re]=ze.box;return this.mapProjection.useSpecialProjectionForSymbols&&(A?ze.allPointsOccluded:this.mapProjection.isOccluded(me,be,_))||Ae.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Ce,Ge,Ke,Re)||c!=="always"&&this.grid.hitTest(Ce,Ge,Ke,Re,c,G)?{box:[Ce,Ge,Ke,Re],placeable:!1,offscreen:!1}:{box:[Ce,Ge,Ke,Re],placeable:!0,offscreen:this.isOffscreen(Ce,Ge,Ke,Re)}}placeCollisionCircles(i,c,p,g,_,A,M,O,G,te,ee,me,be,Ae,ze,Ce){const Ge=[],Ke=new u.P(c.anchorX,c.anchorY),Re=this.getPerspectiveRatio(A,Ke.x,Ke.y,M,Ce),Ye=(ee?_/Re:_*Re)/u.ap,rt={getElevation:Ce,labelPlaneMatrix:O,lineVertexArray:p,pitchWithMap:ee,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Ke,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:ze},at=pe(Ye,g,c.lineOffsetX*Ye,c.lineOffsetY*Ye,!1,c,!1,rt);let mt=!1,bt=!1,Nt=!0;if(at){const $t=.5*be*Re+Ae,St=new u.P(-100,-100),Pt=new u.P(this.screenRightBoundary,this.screenBottomBoundary),Wt=new dr,mr=at.first,It=at.last;let Rt=[];for(let Sr=mr.path.length-1;Sr>=1;Sr--)Rt.push(mr.path[Sr]);for(let Sr=1;Sr<It.path.length;Sr++)Rt.push(It.path[Sr]);const hr=2.5*$t;if(G){const Sr=this.projectPathToScreenSpace(Rt,rt,G);Rt=Sr.some(Ir=>Ir.signedDistanceFromCamera<=0)?[]:Sr.map(Ir=>Ir.point)}let tn=[];if(Rt.length>0){const Sr=Rt[0].clone(),Ir=Rt[0].clone();for(let rn=1;rn<Rt.length;rn++)Sr.x=Math.min(Sr.x,Rt[rn].x),Sr.y=Math.min(Sr.y,Rt[rn].y),Ir.x=Math.max(Ir.x,Rt[rn].x),Ir.y=Math.max(Ir.y,Rt[rn].y);tn=Sr.x>=St.x&&Ir.x<=Pt.x&&Sr.y>=St.y&&Ir.y<=Pt.y?[Rt]:Ir.x<St.x||Sr.x>Pt.x||Ir.y<St.y||Sr.y>Pt.y?[]:u.al([Rt],St.x,St.y,Pt.x,Pt.y)}for(const Sr of tn){Wt.reset(Sr,.25*$t);let Ir=0;Ir=Wt.length<=.5*$t?1:Math.ceil(Wt.paddedLength/hr)+1;for(let rn=0;rn<Ir;rn++){const ui=rn/Math.max(Ir-1,1),Ro=Wt.lerp(ui),nn=Ro.x+Yt,Ni=Ro.y+Yt;Ge.push(nn,Ni,$t,0);const Ai=nn-$t,ci=Ni-$t,hi=nn+$t,jo=Ni+$t;if(Nt=Nt&&this.isOffscreen(Ai,ci,hi,jo),bt=bt||this.isInsideGrid(Ai,ci,hi,jo),i!=="always"&&this.grid.hitTestCircle(nn,Ni,$t,i,me)&&(mt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:mt}}}}return{circles:!te&&mt||!bt||Re<this.perspectiveRatioCutoff?[]:Ge,offscreen:Nt,collisionDetected:mt}}projectPathToScreenSpace(i,c,p){return i.map(g=>an(g,p,c.getElevation))}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let p=1/0,g=1/0,_=-1/0,A=-1/0;for(const te of i){const ee=new u.P(te.x+Yt,te.y+Yt);p=Math.min(p,ee.x),g=Math.min(g,ee.y),_=Math.max(_,ee.x),A=Math.max(A,ee.y),c.push(ee)}const M=this.grid.query(p,g,_,A).concat(this.ignoredGrid.query(p,g,_,A)),O={},G={};for(const te of M){const ee=te.key;if(O[ee.bucketInstanceId]===void 0&&(O[ee.bucketInstanceId]={}),O[ee.bucketInstanceId][ee.featureIndex])continue;const me=[new u.P(te.x1,te.y1),new u.P(te.x2,te.y1),new u.P(te.x2,te.y2),new u.P(te.x1,te.y2)];u.am(c,me)&&(O[ee.bucketInstanceId][ee.featureIndex]=!0,G[ee.bucketInstanceId]===void 0&&(G[ee.bucketInstanceId]=[]),G[ee.bucketInstanceId].push(ee.featureIndex))}return G}insertCollisionBox(i,c,p,g,_,A){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:A,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,p,g,_,A){const M=p?this.ignoredGrid:this.grid,O={bucketInstanceId:g,featureIndex:_,collisionGroupID:A,overlapMode:c};for(let G=0;G<i.length;G+=4)M.insertCircle(O,i[G],i[G+1],i[G+2])}projectAndGetPerspectiveRatio(i,c,p,g,_){const A=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,p,g,_):an(new u.P(c,p),i,_);return{point:new u.P((A.point.x+1)/2*this.transform.width+Yt,(1-A.point.y)/2*this.transform.height+Yt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5,isOccluded:A.isOccluded,signedDistanceFromCamera:A.signedDistanceFromCamera}}getPerspectiveRatio(i,c,p,g,_){const A=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,p,g,_):an(new u.P(c,p),i,_);return .5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5}isOffscreen(i,c,p,g){return p<Yt||i>=this.screenRightBoundary||g<Yt||c>this.screenBottomBoundary}isInsideGrid(i,c,p,g){return p>=0&&i<this.gridRightBoundary&&g>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=u.an([]);return u.H(i,i,[-100,-100,0]),i}_projectCollisionBox(i,c,p,g,_,A,M,O,G,te){const ee=c*O.perspectiveRatio;let me=new u.P(1,0),be=new u.P(0,1);const Ae=new u.P(i.anchorPointX+M[0],i.anchorPointY+M[1]);if(A&&!_){const $t=this.projectAndGetPerspectiveRatio(p,Ae.x+1,Ae.y,g,G).point.sub(O.point).unit(),St=Math.atan($t.y/$t.x)+($t.x<0?Math.PI:0),Pt=Math.sin(St),Wt=Math.cos(St);me=new u.P(Wt,Pt),be=new u.P(-Pt,Wt)}else if(!A&&_){const $t=-this.transform.angle,St=Math.sin($t),Pt=Math.cos($t);me=new u.P(Pt,St),be=new u.P(-St,Pt)}let ze=O.point,Ce=ee;if(_){ze=Ae;const $t=this.transform.zoom-Math.floor(this.transform.zoom);Ce=Math.pow(2,-$t),Ce*=this.mapProjection.getPitchedTextCorrection(this.transform,Ae,g),te||(Ce*=u.ac(.5+O.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}te&&(ze=ze.add(me.mult(te.x*Ce)).add(be.mult(te.y*Ce)));const Ge=i.x1*Ce,Ke=i.x2*Ce,Re=(Ge+Ke)/2,Ye=i.y1*Ce,rt=i.y2*Ce,at=(Ye+rt)/2,mt=[{offsetX:Ge,offsetY:Ye},{offsetX:Re,offsetY:Ye},{offsetX:Ke,offsetY:Ye},{offsetX:Ke,offsetY:at},{offsetX:Ke,offsetY:rt},{offsetX:Re,offsetY:rt},{offsetX:Ge,offsetY:rt},{offsetX:Ge,offsetY:at}];let bt=[];for(const{offsetX:$t,offsetY:St}of mt)bt.push(new u.P(ze.x+me.x*$t+be.x*St,ze.y+me.y*$t+be.y*St));let Nt=!1;if(_){const $t=bt.map(St=>this.projectAndGetPerspectiveRatio(p,St.x,St.y,g,G));Nt=$t.some(St=>!St.isOccluded),bt=$t.map(St=>St.point)}else Nt=!0;return{box:u.ao(bt),allPointsOccluded:!Nt}}}function lr(y,i,c){return i*(u.W/(y.tileSize*Math.pow(2,c-y.tileID.overscaledZ)))}class Tr{constructor(i,c,p,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Dr{constructor(i,c,p,g,_){this.text=new Tr(i?i.text:null,c,p,_),this.icon=new Tr(i?i.icon:null,c,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Vr{constructor(i,c,p){this.text=i,this.icon=c,this.skipFade=p}}class sn{constructor(){this.invProjMatrix=u.F(),this.viewportMatrix=u.F(),this.circles=[]}}class pr{constructor(i,c,p,g,_){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=_}}class Qr{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[i]}}function xn(y,i,c,p,g){const{horizontalAlign:_,verticalAlign:A}=u.au(y);return new u.P(-(_-.5)*i+p[0]*g,-(A-.5)*c+p[1]*g)}class ii{constructor(i,c,p,g,_,A){this.transform=i.clone(),this.terrain=p,this.collisionIndex=new Er(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Qr(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=A,A&&(A.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const c=this.terrain;return c?(p,g)=>c.getElevation(i,p,g):null}getBucketParts(i,c,p,g){const _=p.getBucket(c),A=p.latestFeatureIndex;if(!_||!A||c.id!==_.layerIds[0])return;const M=p.collisionBoxArray,O=_.layers[0].layout,G=_.layers[0].paint,te=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),ee=p.tileSize/u.W,me=p.tileID.toUnwrapped(),be=this.transform.calculatePosMatrix(me),Ae=O.get("text-pitch-alignment")==="map",ze=O.get("text-rotation-alignment")==="map",Ce=lr(p,1,this.transform.zoom),Ge=this.collisionIndex.mapProjection.translatePosition(this.transform,p,G.get("text-translate"),G.get("text-translate-anchor")),Ke=this.collisionIndex.mapProjection.translatePosition(this.transform,p,G.get("icon-translate"),G.get("icon-translate-anchor")),Re=Nn(be,Ae,ze,this.transform,Ce);let Ye=null;if(Ae){const at=ni(be,Ae,ze,this.transform,Ce);Ye=u.K([],this.transform.labelPlaneMatrix,at)}this.retainedQueryData[_.bucketInstanceId]=new pr(_.bucketInstanceId,A,_.sourceLayerIndex,_.index,p.tileID);const rt={bucket:_,layout:O,translationText:Ge,translationIcon:Ke,posMatrix:be,unwrappedTileID:me,textLabelPlaneMatrix:Re,labelToScreenMatrix:Ye,scale:te,textPixelRatio:ee,holdingForFade:p.holdingForFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:u.ag(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const at of _.sortKeyRanges){const{sortKey:mt,symbolInstanceStart:bt,symbolInstanceEnd:Nt}=at;i.push({sortKey:mt,symbolInstanceStart:bt,symbolInstanceEnd:Nt,parameters:rt})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:rt})}attemptAnchorPlacement(i,c,p,g,_,A,M,O,G,te,ee,me,be,Ae,ze,Ce,Ge,Ke,Re){const Ye=u.aq[i.textAnchor],rt=[i.textOffset0,i.textOffset1],at=xn(Ye,p,g,rt,_),mt=this.collisionIndex.placeCollisionBox(c,me,O,G,te,M,A,Ce,ee.predicate,Re,at);if((!Ke||this.collisionIndex.placeCollisionBox(Ke,me,O,G,te,M,A,Ge,ee.predicate,Re,at).placeable)&&mt.placeable){let bt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID].text&&(bt=this.prevPlacement.variableOffsets[be.crossTileID].anchor),be.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[be.crossTileID]={textOffset:rt,width:p,height:g,anchor:Ye,textBoxScale:_,prevAnchor:bt},this.markUsedJustification(Ae,Ye,be,ze),Ae.allowVerticalPlacement&&(this.markUsedOrientation(Ae,ze,be),this.placedOrientations[be.crossTileID]=ze),{shift:at,placedGlyphBoxes:mt}}}placeLayerBucketPart(i,c,p){const{bucket:g,layout:_,translationText:A,translationIcon:M,posMatrix:O,unwrappedTileID:G,textLabelPlaneMatrix:te,labelToScreenMatrix:ee,textPixelRatio:me,holdingForFade:be,collisionBoxArray:Ae,partiallyEvaluatedTextSize:ze,collisionGroup:Ce}=i.parameters,Ge=_.get("text-optional"),Ke=_.get("icon-optional"),Re=u.ar(_,"text-overlap","text-allow-overlap"),Ye=Re==="always",rt=u.ar(_,"icon-overlap","icon-allow-overlap"),at=rt==="always",mt=_.get("text-rotation-alignment")==="map",bt=_.get("text-pitch-alignment")==="map",Nt=_.get("icon-text-fit")!=="none",$t=_.get("symbol-z-order")==="viewport-y",St=Ye&&(at||!g.hasIconData()||Ke),Pt=at&&(Ye||!g.hasTextData()||Ge);!g.collisionArrays&&Ae&&g.deserializeCollisionBoxes(Ae);const Wt=this._getTerrainElevationFunc(this.retainedQueryData[g.bucketInstanceId].tileID),mr=(It,Rt,hr)=>{var tn,Sr;if(c[It.crossTileID])return;if(be)return void(this.placements[It.crossTileID]=new Vr(!1,!1,!1));let Ir=!1,rn=!1,ui=!0,Ro=null,nn={box:null,placeable:!1,offscreen:null},Ni={box:null,placeable:!1,offscreen:null},Ai=null,ci=null,hi=null,jo=0,qs=0,nh=0;Rt.textFeatureIndex?jo=Rt.textFeatureIndex:It.useRuntimeCollisionCircles&&(jo=It.featureIndex),Rt.verticalTextFeatureIndex&&(qs=Rt.verticalTextFeatureIndex);const Vl=Rt.textBox;if(Vl){const Jn=fi=>{let di=u.ah.horizontal;if(g.allowVerticalPlacement&&!fi&&this.prevPlacement){const qn=this.prevPlacement.placedOrientations[It.crossTileID];qn&&(this.placedOrientations[It.crossTileID]=qn,di=qn,this.markUsedOrientation(g,di,It))}return di},Lo=(fi,di)=>{if(g.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&Rt.verticalTextBox){for(const qn of g.writingModes)if(qn===u.ah.vertical?(nn=di(),Ni=nn):nn=fi(),nn&&nn.placeable)break}else nn=fi()},ds=It.textAnchorOffsetStartIndex,Gl=It.textAnchorOffsetEndIndex;if(Gl===ds){const fi=(di,qn)=>{const cn=this.collisionIndex.placeCollisionBox(di,Re,me,O,G,bt,mt,A,Ce.predicate,Wt);return cn&&cn.placeable&&(this.markUsedOrientation(g,qn,It),this.placedOrientations[It.crossTileID]=qn),cn};Lo(()=>fi(Vl,u.ah.horizontal),()=>{const di=Rt.verticalTextBox;return g.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&di?fi(di,u.ah.vertical):{box:null,offscreen:null}}),Jn(nn&&nn.placeable)}else{let fi=u.aq[(Sr=(tn=this.prevPlacement)===null||tn===void 0?void 0:tn.variableOffsets[It.crossTileID])===null||Sr===void 0?void 0:Sr.anchor];const di=(cn,Wl,td)=>{const Vn=cn.x2-cn.x1,mm=cn.y2-cn.y1,oh=It.textBoxScale,ah=Nt&&rt==="never"?Wl:null;let ps=null,gm=Re==="never"?1:2,rd="never";fi&&gm++;for(let nd=0;nd<gm;nd++){for(let id=ds;id<Gl;id++){const sh=g.textAnchorOffsets.get(id);if(fi&&sh.textAnchor!==fi)continue;const Hl=this.attemptAnchorPlacement(sh,cn,Vn,mm,oh,mt,bt,me,O,G,Ce,rd,It,g,td,A,M,ah,Wt);if(Hl&&(ps=Hl.placedGlyphBoxes,ps&&ps.placeable))return Ir=!0,Ro=Hl.shift,ps}fi?fi=null:rd=Re}return p&&!ps&&(ps={box:this.collisionIndex.placeCollisionBox(Vl,"always",me,O,G,bt,mt,A,Ce.predicate,Wt,new u.P(0,0)).box,offscreen:!1,placeable:!1}),ps};Lo(()=>di(Vl,Rt.iconBox,u.ah.horizontal),()=>{const cn=Rt.verticalTextBox;return g.allowVerticalPlacement&&(!nn||!nn.placeable)&&It.numVerticalGlyphVertices>0&&cn?di(cn,Rt.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}}),nn&&(Ir=nn.placeable,ui=nn.offscreen);const qn=Jn(nn&&nn.placeable);if(!Ir&&this.prevPlacement){const cn=this.prevPlacement.variableOffsets[It.crossTileID];cn&&(this.variableOffsets[It.crossTileID]=cn,this.markUsedJustification(g,cn.anchor,It,qn))}}}if(Ai=nn,Ir=Ai&&Ai.placeable,ui=Ai&&Ai.offscreen,It.useRuntimeCollisionCircles){const Jn=g.text.placedSymbolArray.get(It.centerJustifiedTextSymbolIndex),Lo=u.ai(g.textSizeData,ze,Jn),ds=_.get("text-padding");ci=this.collisionIndex.placeCollisionCircles(Re,Jn,g.lineVertexArray,g.glyphOffsetArray,Lo,O,G,te,ee,p,bt,Ce.predicate,It.collisionCircleDiameter,ds,A,Wt),ci.circles.length&&ci.collisionDetected&&!p&&u.w("Collisions detected, but collision boxes are not shown"),Ir=Ye||ci.circles.length>0&&!ci.collisionDetected,ui=ui&&ci.offscreen}if(Rt.iconFeatureIndex&&(nh=Rt.iconFeatureIndex),Rt.iconBox){const Jn=Lo=>this.collisionIndex.placeCollisionBox(Lo,rt,me,O,G,bt,mt,M,Ce.predicate,Wt,Nt&&Ro?Ro:void 0);Ni&&Ni.placeable&&Rt.verticalIconBox?(hi=Jn(Rt.verticalIconBox),rn=hi.placeable):(hi=Jn(Rt.iconBox),rn=hi.placeable),ui=ui&&hi.offscreen}const Xs=Ge||It.numHorizontalGlyphVertices===0&&It.numVerticalGlyphVertices===0,ih=Ke||It.numIconVertices===0;Xs||ih?ih?Xs||(rn=rn&&Ir):Ir=rn&&Ir:rn=Ir=rn&&Ir;const ed=rn&&hi.placeable;if(Ir&&Ai.placeable&&this.collisionIndex.insertCollisionBox(Ai.box,Re,_.get("text-ignore-placement"),g.bucketInstanceId,Ni&&Ni.placeable&&qs?qs:jo,Ce.ID),ed&&this.collisionIndex.insertCollisionBox(hi.box,rt,_.get("icon-ignore-placement"),g.bucketInstanceId,nh,Ce.ID),ci&&Ir&&this.collisionIndex.insertCollisionCircles(ci.circles,Re,_.get("text-ignore-placement"),g.bucketInstanceId,jo,Ce.ID),p&&this.storeCollisionData(g.bucketInstanceId,hr,Rt,Ai,hi,ci),It.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[It.crossTileID]=new Vr(Ir||St,rn||Pt,ui||g.justReloaded),c[It.crossTileID]=!0};if($t){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const It=g.getSortedSymbolIndexes(this.transform.angle);for(let Rt=It.length-1;Rt>=0;--Rt){const hr=It[Rt];mr(g.symbolInstances.get(hr),g.collisionArrays[hr],hr)}}else for(let It=i.symbolInstanceStart;It<i.symbolInstanceEnd;It++)mr(g.symbolInstances.get(It),g.collisionArrays[It],It);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const It=this.collisionCircleArrays[g.bucketInstanceId];u.as(It.invProjMatrix,O),It.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}storeCollisionData(i,c,p,g,_,A){if(p.textBox||p.iconBox){let M,O;this.collisionBoxArrays.has(i)?M=this.collisionBoxArrays.get(i):(M=new Map,this.collisionBoxArrays.set(i,M)),M.has(c)?O=M.get(c):(O={text:null,icon:null},M.set(c,O)),p.textBox&&(O.text=g.box),p.iconBox&&(O.icon=_.box)}if(A){let M=this.collisionCircleArrays[i];M===void 0&&(M=this.collisionCircleArrays[i]=new sn);for(let O=0;O<A.circles.length;O+=4)M.circles.push(A.circles[O+0]),M.circles.push(A.circles[O+1]),M.circles.push(A.circles[O+2]),M.circles.push(A.collisionDetected?1:0)}}markUsedJustification(i,c,p,g){let _;_=g===u.ah.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[u.at(c)];const A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const M of A)M>=0&&(i.text.placedSymbolArray.get(M).crossTileID=_>=0&&M!==_?0:p.crossTileID)}markUsedOrientation(i,c,p){const g=c===u.ah.horizontal||c===u.ah.horizontalOnly?c:0,_=c===u.ah.vertical?c:0,A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const M of A)i.text.placedSymbolArray.get(M).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const g=c?c.symbolFadeChange(i):1,_=c?c.opacities:{},A=c?c.variableOffsets:{},M=c?c.placedOrientations:{};for(const O in this.placements){const G=this.placements[O],te=_[O];te?(this.opacities[O]=new Dr(te,g,G.text,G.icon),p=p||G.text!==te.text.placed||G.icon!==te.icon.placed):(this.opacities[O]=new Dr(null,g,G.text,G.icon,G.skipFade),p=p||G.text||G.icon)}for(const O in _){const G=_[O];if(!this.opacities[O]){const te=new Dr(G,g,!1,!1);te.isHidden()||(this.opacities[O]=te,p=p||G.text.placed||G.icon.placed)}}for(const O in A)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=A[O]);for(const O in M)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=M[O]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const p={};for(const g of c){const _=g.getBucket(i);_&&g.latestFeatureIndex&&i.id===_.layerIds[0]&&this.updateBucketOpacities(_,g.tileID,p,g.collisionBoxArray)}}updateBucketOpacities(i,c,p,g){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const _=i.layers[0],A=_.layout,M=new Dr(null,0,!1,!1,!0),O=A.get("text-allow-overlap"),G=A.get("icon-allow-overlap"),te=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ee=A.get("text-rotation-alignment")==="map",me=A.get("text-pitch-alignment")==="map",be=A.get("icon-text-fit")!=="none",Ae=new Dr(null,0,O&&(G||!i.hasIconData()||A.get("icon-optional")),G&&(O||!i.hasTextData()||A.get("text-optional")),!0);!i.collisionArrays&&g&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(g);const ze=(Ge,Ke,Re)=>{for(let Ye=0;Ye<Ke/4;Ye++)Ge.opacityVertexArray.emplaceBack(Re);Ge.hasVisibleVertices=Ge.hasVisibleVertices||Re!==Rs},Ce=this.collisionBoxArrays.get(i.bucketInstanceId);for(let Ge=0;Ge<i.symbolInstances.length;Ge++){const Ke=i.symbolInstances.get(Ge),{numHorizontalGlyphVertices:Re,numVerticalGlyphVertices:Ye,crossTileID:rt}=Ke;let at=this.opacities[rt];p[rt]?at=M:at||(at=Ae,this.opacities[rt]=at),p[rt]=!0;const mt=Ke.numIconVertices>0,bt=this.placedOrientations[Ke.crossTileID],Nt=bt===u.ah.vertical,$t=bt===u.ah.horizontal||bt===u.ah.horizontalOnly;if(Re>0||Ye>0){const Pt=oi(at.text);ze(i.text,Re,Nt?Rs:Pt),ze(i.text,Ye,$t?Rs:Pt);const Wt=at.text.isHidden();[Ke.rightJustifiedTextSymbolIndex,Ke.centerJustifiedTextSymbolIndex,Ke.leftJustifiedTextSymbolIndex].forEach(Rt=>{Rt>=0&&(i.text.placedSymbolArray.get(Rt).hidden=Wt||Nt?1:0)}),Ke.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Ke.verticalPlacedTextSymbolIndex).hidden=Wt||$t?1:0);const mr=this.variableOffsets[Ke.crossTileID];mr&&this.markUsedJustification(i,mr.anchor,Ke,bt);const It=this.placedOrientations[Ke.crossTileID];It&&(this.markUsedJustification(i,"left",Ke,It),this.markUsedOrientation(i,It,Ke))}if(mt){const Pt=oi(at.icon),Wt=!(be&&Ke.verticalPlacedIconSymbolIndex&&Nt);Ke.placedIconSymbolIndex>=0&&(ze(i.icon,Ke.numIconVertices,Wt?Pt:Rs),i.icon.placedSymbolArray.get(Ke.placedIconSymbolIndex).hidden=at.icon.isHidden()),Ke.verticalPlacedIconSymbolIndex>=0&&(ze(i.icon,Ke.numVerticalIconVertices,Wt?Rs:Pt),i.icon.placedSymbolArray.get(Ke.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}const St=Ce&&Ce.has(Ge)?Ce.get(Ge):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Pt=i.collisionArrays[Ge];if(Pt){let Wt=new u.P(0,0);if(Pt.textBox||Pt.verticalTextBox){let mr=!0;if(te){const It=this.variableOffsets[rt];It?(Wt=xn(It.anchor,It.width,It.height,It.textOffset,It.textBoxScale),ee&&Wt._rotate(me?this.transform.angle:-this.transform.angle)):mr=!1}if(Pt.textBox||Pt.verticalTextBox){let It;Pt.textBox&&(It=Nt),Pt.verticalTextBox&&(It=$t),wi(i.textCollisionBox.collisionVertexArray,at.text.placed,!mr||It,St.text,Wt.x,Wt.y)}}if(Pt.iconBox||Pt.verticalIconBox){const mr=!!(!$t&&Pt.verticalIconBox);let It;Pt.iconBox&&(It=mr),Pt.verticalIconBox&&(It=!mr),wi(i.iconCollisionBox.collisionVertexArray,at.icon.placed,It,St.icon,be?Wt.x:0,be?Wt.y:0)}}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const Ge=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Ge.invProjMatrix,i.placementViewportMatrix=Ge.viewportMatrix,i.collisionCircleArray=Ge.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function wi(y,i,c,p,g,_){p&&p.length!==0||(p=[0,0,0,0]);const A=p[0]-Yt,M=p[1]-Yt,O=p[2]-Yt,G=p[3]-Yt;y.emplaceBack(i?1:0,c?1:0,g||0,_||0,A,M),y.emplaceBack(i?1:0,c?1:0,g||0,_||0,O,M),y.emplaceBack(i?1:0,c?1:0,g||0,_||0,O,G),y.emplaceBack(i?1:0,c?1:0,g||0,_||0,A,G)}const wn=Math.pow(2,25),Xa=Math.pow(2,24),wl=Math.pow(2,17),kr=Math.pow(2,16),bl=Math.pow(2,9),Ar=Math.pow(2,8),bn=Math.pow(2,1);function oi(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,c=Math.floor(127*y.opacity);return c*wn+i*Xa+c*wl+i*kr+c*bl+i*Ar+c*bn+i}const Rs=0;function ai(){return{isOccluded:(y,i,c)=>!1,getPitchedTextCorrection:(y,i,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(y,i,c,p){throw new Error("Not implemented.")},translatePosition:(y,i,c,p)=>function(g,_,A,M,O=!1){if(!A[0]&&!A[1])return[0,0];const G=O?M==="map"?g.angle:0:M==="viewport"?-g.angle:0;if(G){const te=Math.sin(G),ee=Math.cos(G);A=[A[0]*ee-A[1]*te,A[0]*te+A[1]*ee]}return[O?A[0]:lr(_,A[0],g.zoom),O?A[1]:lr(_,A[1],g.zoom)]}(y,i,c,p),getCircleRadiusCorrection:y=>1}}class zi{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,p,g,_){const A=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(A,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((M,O)=>M.sortKey-O.sortKey));this._currentPartIndex<A.length;)if(c.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,_())return!0;return!1}}class Oc{constructor(i,c,p,g,_,A,M,O){this.placement=new ii(i,ai(),c,A,M,O),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,c,p){const g=b.now(),_=()=>!this._forceFullPlacement&&b.now()-g>2;for(;this._currentPlacementIndex>=0;){const A=c[i[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=M)&&(!A.maxzoom||A.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new zi(A)),this._inProgressLayer.continuePlacement(p[A.source],this.placement,this._showCollisionBoxes,A,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const $n=512/u.W/2;class yn{constructor(i,c,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let _=0;_<c.length;_++){const A=c.get(_),M=A.key,O=g.get(M);O?O.push(A):g.set(M,[A])}for(const[_,A]of g){const M={positions:A.map(O=>({x:Math.floor(O.anchorX*$n),y:Math.floor(O.anchorY*$n)})),crossTileIDs:A.map(O=>O.crossTileID)};if(M.positions.length>128){const O=new u.av(M.positions.length,16,Uint16Array);for(const{x:G,y:te}of M.positions)O.add(G,te);O.finish(),delete M.positions,M.index=O}this._symbolsByKey[_]=M}}getScaledCoordinates(i,c){const{x:p,y:g,z:_}=this.tileID.canonical,{x:A,y:M,z:O}=c.canonical,G=$n/Math.pow(2,O-_),te=(M*u.W+i.anchorY)*G,ee=g*u.W*$n;return{x:Math.floor((A*u.W+i.anchorX)*G-p*u.W*$n),y:Math.floor(te-ee)}}findMatches(i,c,p){const g=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let _=0;_<i.length;_++){const A=i.get(_);if(A.crossTileID)continue;const M=this._symbolsByKey[A.key];if(!M)continue;const O=this.getScaledCoordinates(A,c);if(M.index){const G=M.index.range(O.x-g,O.y-g,O.x+g,O.y+g).sort();for(const te of G){const ee=M.crossTileIDs[te];if(!p[ee]){p[ee]=!0,A.crossTileID=ee;break}}}else if(M.positions)for(let G=0;G<M.positions.length;G++){const te=M.positions[G],ee=M.crossTileIDs[G];if(Math.abs(te.x-O.x)<=g&&Math.abs(te.y-O.y)<=g&&!p[ee]){p[ee]=!0,A.crossTileID=ee;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class js{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class va{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const p in this.indexes){const g=this.indexes[p],_={};for(const A in g){const M=g[A];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+c),_[M.tileID.key]=M}this.indexes[p]=_}this.lng=i}addBucket(i,c,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let _=0;_<c.symbolInstances.length;_++)c.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const _ in this.indexes){const A=this.indexes[_];if(Number(_)>i.overscaledZ)for(const M in A){const O=A[M];O.tileID.isChildOf(i)&&O.findMatches(c.symbolInstances,i,g)}else{const M=A[i.scaledTo(Number(_)).key];M&&M.findMatches(c.symbolInstances,i,g)}}for(let _=0;_<c.symbolInstances.length;_++){const A=c.symbolInstances.get(_);A.crossTileID||(A.crossTileID=p.generate(),g[A.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new yn(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const p of c.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let c=!1;for(const p in this.indexes){const g=this.indexes[p];for(const _ in g)i[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[_]),delete g[_],c=!0)}return c}}class ln{constructor(){this.layerIndexes={},this.crossTileIDs=new js,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,p){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new va);let _=!1;const A={};g.handleWrapJump(p);for(const M of c){const O=M.getBucket(i);O&&i.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(M.tileID,O,this.crossTileIDs)&&(_=!0),A[O.bucketInstanceId]=!0)}return g.removeStaleBuckets(A)&&(_=!0),_}pruneUnusedLayers(i){const c={};i.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}const _a=(y,i)=>u.t(y,i&&i.filter(c=>c.identifier!=="source.canvas")),Sn=u.aw();class Sl extends u.E{constructor(i,c={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const g=this.sourceCaches[p].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[p].reload()}},this.map=i,this.dispatcher=new ht(ot(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,g)=>this.getGlyphs(p,g)),this.dispatcher.registerMessageHandler("GI",(p,g)=>this.getImages(p,g)),this.imageManager=new ye,this.imageManager.setEventedParent(this),this.glyphManager=new J(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Te(256,512),this.crossTileSymbolIndex=new ln,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),$().on(ct,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const g=this.sourceCaches[p.sourceId];if(!g)return;const _=g.getSource();if(_&&_.vectorLayerIds)for(const A in this._layers){const M=this._layers[A];M.source===_.id&&this._validateLayer(M)}})}loadURL(i,c={},p){this.fire(new u.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const g=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController,u.h(g,this._loadStyleRequest).then(_=>{this._loadStyleRequest=null,this._load(_.data,c,p)}).catch(_=>{this._loadStyleRequest=null,_&&this.fire(new u.j(_))})}loadJSON(i,c={},p){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(i,c,p)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Sn,{validate:!1})}_load(i,c,p){var g;const _=c.transformStyle?c.transformStyle(p,i):i;if(!c.validate||!_a(this,u.x(_))){this._loaded=!0,this.stylesheet=_;for(const A in _.sources)this.addSource(A,_.sources[A],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new we(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const i=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of i){const p=u.aA(c);p.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=p}}_loadSprite(i,c=!1,p=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,A,M,O){return u._(this,void 0,void 0,function*(){const G=B(_),te=M>1?"@2x":"",ee={},me={};for(const{id:be,url:Ae}of G){const ze=A.transformRequest(Q(Ae,te,".json"),"SpriteJSON");ee[be]=u.h(ze,O);const Ce=A.transformRequest(Q(Ae,te,".png"),"SpriteImage");me[be]=V.getImage(Ce,O)}return yield Promise.all([...Object.values(ee),...Object.values(me)]),function(be,Ae){return u._(this,void 0,void 0,function*(){const ze={};for(const Ce in be){ze[Ce]={};const Ge=b.getImageCanvasContext((yield Ae[Ce]).data),Ke=(yield be[Ce]).data;for(const Re in Ke){const{width:Ye,height:rt,x:at,y:mt,sdf:bt,pixelRatio:Nt,stretchX:$t,stretchY:St,content:Pt,textFitWidth:Wt,textFitHeight:mr}=Ke[Re];ze[Ce][Re]={data:null,pixelRatio:Nt,sdf:bt,stretchX:$t,stretchY:St,content:Pt,textFitWidth:Wt,textFitHeight:mr,spriteData:{width:Ye,height:rt,x:at,y:mt,context:Ge}}}}return ze})}(ee,me)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const A in _){this._spritesImagesIds[A]=[];const M=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter(O=>!(O in _)):[];for(const O of M)this.imageManager.removeImage(O),this._changedImages[O]=!0;for(const O in _[A]){const G=A==="default"?O:`${A}:${O}`;this._spritesImagesIds[A].push(G),G in this.imageManager.images?this.imageManager.updateImage(G,_[A][O],!1):this.imageManager.addImage(G,_[A][O]),c&&(this._changedImages[G]=!0)}}}).catch(_=>{this._spriteRequest=null,g=_,this.fire(new u.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const p=i.sourceLayer;if(!p)return;const g=c.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new u.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const c=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c);const p=[];for(const g of i)c[g]&&p.push(c[g]);return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const p of c){const g=this._layers[p];g.type!=="custom"&&(i[p]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(c){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const A in this._updatedSources){const M=this._updatedSources[A];if(M==="reload")this._reloadSource(A);else{if(M!=="clear")throw new Error(`Invalid action ${M}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];p[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(i,this._availableImages),!_.isHidden(i.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in p){const _=this.sourceCaches[g];!!p[g]!=!!_.used&&_.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){var p;this._checkLoaded();const g=this.serialize();if(i=c.transformStyle?c.transformStyle(g,i):i,((p=c.validate)===null||p===void 0||p)&&_a(this,u.x(i)))return!1;(i=u.aB(i)).layers=u.az(i.layers);const _=u.aC(g,i),A=this._getOperationsToPerform(_);if(A.unimplemented.length>0)throw new Error(`Unimplemented: ${A.unimplemented.join(", ")}.`);if(A.operations.length===0)return!1;for(const M of A.operations)M();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){const c=[],p=[];for(const g of i)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":c.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":c.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,g.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":c.push(()=>{});break;default:p.push(g.command)}return{operations:c,unimplemented:p}}addImage(i,c){if(this.getImage(i))return this.fire(new u.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new u.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(u.x.source,`sources.${i}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const g=this.sourceCaches[i]=new Ve(i,c,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new u.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,p={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new u.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(i.type==="custom"){if(_a(this,u.aD(i)))return;_=u.aA(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=u.aB(i),i=u.e(i,{source:g})),this._validate(u.x.layer,`layers.${g}`,i,{arrayIndex:-1},p))return;_=u.aA(i),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const A=c?this._order.indexOf(c):this._order.length;if(c&&A===-1)this.fire(new u.j(new Error(`Cannot add layer "${g}" before non-existing layer "${c}".`)));else{if(this._order.splice(A,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const M=this._removedLayers[g];delete this._removedLayers[g],M.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new u.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const p=this._order.indexOf(i);this._order.splice(p,1);const g=c?this._order.indexOf(c):this._order.length;c&&g===-1?this.fire(new u.j(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,p){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===c&&g.maxzoom===p||(c!=null&&(g.minzoom=c),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,p={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!u.aE(g.filter,c))return c==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(u.x.filter,`layers.${g.id}.filter`,c,null,p)||(g.filter=u.aB(c),this._updateLayer(g)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return u.aB(this.getLayer(i).filter)}setLayoutProperty(i,c,p,g={}){this._checkLoaded();const _=this.getLayer(i);_?u.aE(_.getLayoutProperty(c),p)||(_.setLayoutProperty(c,p,g),this._updateLayer(_)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const p=this.getLayer(i);if(p)return p.getLayoutProperty(c);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,p,g={}){this._checkLoaded();const _=this.getLayer(i);_?u.aE(_.getPaintProperty(c),p)||(_.setPaintProperty(c,p,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const p=i.source,g=i.sourceLayer,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)));const A=_.getSource().type;A==="geojson"&&g?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||g?(i.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,i.id,c)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const p=i.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)));const _=g.getSource().type,A=_==="vector"?i.sourceLayer:void 0;_!=="vector"||A?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(A,i.id,c):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,p=i.sourceLayer,g=this.sourceCaches[c];if(g!==void 0)return g.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,i.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=u.aF(this.sourceCaches,_=>_.serialize()),c=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return u.aG({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:c,terrain:p},_=>_!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=A=>this._layers[A].type==="fill-extrusion",p={},g=[];for(let A=this._order.length-1;A>=0;A--){const M=this._order[A];if(c(M)){p[M]=A;for(const O of i){const G=O[M];if(G)for(const te of G)g.push(te)}}}g.sort((A,M)=>M.intersectionZ-A.intersectionZ);const _=[];for(let A=this._order.length-1;A>=0;A--){const M=this._order[A];if(c(M))for(let O=g.length-1;O>=0;O--){const G=g[O].feature;if(p[G.layer.id]<A)break;_.push(G),g.pop()}else for(const O of i){const G=O[M];if(G)for(const te of G)_.push(te.feature)}}return _}queryRenderedFeatures(i,c,p){c&&c.filter&&this._validate(u.x.filter,"queryRenderedFeatures.filter",c.filter,null,c);const g={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const M of c.layers){const O=this._layers[M];if(!O)return this.fire(new u.j(new Error(`The layer '${M}' does not exist in the map's style and cannot be queried for features.`))),[];g[O.source]=!0}}const _=[];c.availableImages=this._availableImages;const A=this._serializedAllLayers();for(const M in this.sourceCaches)c.layers&&!g[M]||_.push(pt(this.sourceCaches[M],this._layers,A,i,c,p));return this.placement&&_.push(function(M,O,G,te,ee,me,be){const Ae={},ze=me.queryRenderedSymbols(te),Ce=[];for(const Ge of Object.keys(ze).map(Number))Ce.push(be[Ge]);Ce.sort(wt);for(const Ge of Ce){const Ke=Ge.featureIndex.lookupSymbolFeatures(ze[Ge.bucketInstanceId],O,Ge.bucketIndex,Ge.sourceLayerIndex,ee.filter,ee.layers,ee.availableImages,M);for(const Re in Ke){const Ye=Ae[Re]=Ae[Re]||[],rt=Ke[Re];rt.sort((at,mt)=>{const bt=Ge.featureSortOrder;if(bt){const Nt=bt.indexOf(at.featureIndex);return bt.indexOf(mt.featureIndex)-Nt}return mt.featureIndex-at.featureIndex});for(const at of rt)Ye.push(at)}}for(const Ge in Ae)Ae[Ge].forEach(Ke=>{const Re=Ke.feature,Ye=G[M[Ge].source].getFeatureState(Re.layer["source-layer"],Re.id);Re.source=Re.layer.source,Re.layer["source-layer"]&&(Re.sourceLayer=Re.layer["source-layer"]),Re.state=Ye});return Ae}(this._layers,A,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(i,c){c&&c.filter&&this._validate(u.x.filter,"querySourceFeatures.filter",c.filter,null,c);const p=this.sourceCaches[i];return p?function(g,_){const A=g.getRenderableIds().map(G=>g.getTileByID(G)),M=[],O={};for(let G=0;G<A.length;G++){const te=A[G],ee=te.tileID.canonical.key;O[ee]||(O[ee]=!0,te.querySourceFeatures(M,_))}return M}(p,c):[]}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const A in i)if(!u.aE(i[A],p[A])){g=!0;break}if(!g)return;const _={now:b.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(_)}_validate(i,c,p,g,_={}){return(!_||_.validate!==!1)&&_a(this,i.call(u.x,u.e({key:c,style:this.serialize(),value:p,styleSpec:u.v},g)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),$().off(ct,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const p=this.sourceCaches[c];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,p,g,_=!1){let A=!1,M=!1;const O={};for(const G of this._order){const te=this._layers[G];if(te.type!=="symbol")continue;if(!O[te.source]){const me=this.sourceCaches[te.source];O[te.source]=me.getRenderableIds(!0).map(be=>me.getTileByID(be)).sort((be,Ae)=>Ae.tileID.overscaledZ-be.tileID.overscaledZ||(be.tileID.isLessThan(Ae.tileID)?-1:1))}const ee=this.crossTileSymbolIndex.addLayer(te,O[te.source],i.center.lng);A=A||ee}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),i.zoom))&&(this.pauseablePlacement=new Oc(i,this.map.terrain,this._order,_,c,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),M=!0),A&&this.pauseablePlacement.placement.setStale()),M||A)for(const G of this._order){const te=this._layers[G];te.type==="symbol"&&this.placement.updateLayerOpacities(te,O[te.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c){return u._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const g=this.sourceCaches[c.source];return g&&g.setDependencies(c.tileID.key,c.type,c.icons),p})}getGlyphs(i,c){return u._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(c.stacks),g=this.sourceCaches[c.source];return g&&g.setDependencies(c.tileID.key,c.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(u.x.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,p={},g){this._checkLoaded();const _=[{id:i,url:c}],A=[...B(this.stylesheet.sprite),..._];this._validate(u.x.sprite,"sprite",A,null,p)||(this.stylesheet.sprite=A,this._loadSprite(_,!0,g))}removeSprite(i){this._checkLoaded();const c=B(this.stylesheet.sprite);if(c.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;c.splice(c.findIndex(p=>p.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return B(this.stylesheet.sprite)}setSprite(i,c={},p){this._checkLoaded(),i&&this._validate(u.x.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}var go=u.X([{name:"a_pos",type:"Int16",components:2}]),Ou="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ka={prelude:jr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:jr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:jr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:jr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:jr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:jr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:jr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:jr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:jr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:jr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:jr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:jr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:jr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:jr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:jr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:jr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:jr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:jr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:jr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:jr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:jr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:jr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:jr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:jr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:jr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:jr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:jr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ou),terrainDepth:jr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ou),terrainCoords:jr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ou)};function jr(y,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=_?_.concat(g):g,M={};return{fragmentSource:y=y.replace(c,(O,G,te,ee,me)=>(M[me]=!0,G==="define"?`
#ifndef HAS_UNIFORM_u_${me}
varying ${te} ${ee} ${me};
#else
uniform ${te} ${ee} u_${me};
#endif
`:`
#ifdef HAS_UNIFORM_u_${me}
    ${te} ${ee} ${me} = u_${me};
#endif
`)),vertexSource:i=i.replace(c,(O,G,te,ee,me)=>{const be=ee==="float"?"vec2":"vec4",Ae=me.match(/color/)?"color":be;return M[me]?G==="define"?`
#ifndef HAS_UNIFORM_u_${me}
uniform lowp float u_${me}_t;
attribute ${te} ${be} a_${me};
varying ${te} ${ee} ${me};
#else
uniform ${te} ${ee} u_${me};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${me}
    ${me} = a_${me};
#else
    ${te} ${ee} ${me} = u_${me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${me}
    ${me} = unpack_mix_${Ae}(a_${me}, u_${me}_t);
#else
    ${te} ${ee} ${me} = u_${me};
#endif
`:G==="define"?`
#ifndef HAS_UNIFORM_u_${me}
uniform lowp float u_${me}_t;
attribute ${te} ${be} a_${me};
#else
uniform ${te} ${ee} u_${me};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${me}
    ${te} ${ee} ${me} = a_${me};
#else
    ${te} ${ee} ${me} = u_${me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${me}
    ${te} ${ee} ${me} = unpack_mix_${Ae}(a_${me}, u_${me}_t);
#else
    ${te} ${ee} ${me} = u_${me};
#endif
`}),staticAttributes:p,staticUniforms:A}}class xa{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,p,g,_,A,M,O,G){this.context=i;let te=this.boundPaintVertexBuffers.length!==g.length;for(let ee=0;!te&&ee<g.length;ee++)this.boundPaintVertexBuffers[ee]!==g[ee]&&(te=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||te||this.boundIndexBuffer!==_||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==M||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==G?this.freshBind(c,p,g,_,A,M,O,G):(i.bindVertexArray.set(this.vao),M&&M.bind(),_&&_.dynamicDraw&&_.bind(),O&&O.bind(),G&&G.bind())}freshBind(i,c,p,g,_,A,M,O){const G=i.numAttributes,te=this.context,ee=te.gl;this.vao&&this.destroy(),this.vao=te.createVertexArray(),te.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=M,this.boundDynamicVertexBuffer3=O,c.enableAttributes(ee,i);for(const me of p)me.enableAttributes(ee,i);A&&A.enableAttributes(ee,i),M&&M.enableAttributes(ee,i),O&&O.enableAttributes(ee,i),c.bind(),c.setVertexAttribPointers(ee,i,_);for(const me of p)me.bind(),me.setVertexAttribPointers(ee,i,_);A&&(A.bind(),A.setVertexAttribPointers(ee,i,_)),g&&g.bind(),M&&(M.bind(),M.setVertexAttribPointers(ee,i,_)),O&&(O.bind(),O.setVertexAttribPointers(ee,i,_)),te.currentNumAttributes=G}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Ya(y){const i=[];for(let c=0;c<y.length;c++){if(y[c]===null)continue;const p=y[c].split(" ");i.push(p.pop())}return i}class Fu{constructor(i,c,p,g,_,A){const M=i.gl;this.program=M.createProgram();const O=Ya(c.staticAttributes),G=p?p.getBinderAttributes():[],te=O.concat(G),ee=Ka.prelude.staticUniforms?Ya(Ka.prelude.staticUniforms):[],me=c.staticUniforms?Ya(c.staticUniforms):[],be=p?p.getBinderUniforms():[],Ae=ee.concat(me).concat(be),ze=[];for(const at of Ae)ze.indexOf(at)<0&&ze.push(at);const Ce=p?p.defines():[];_&&Ce.push("#define OVERDRAW_INSPECTOR;"),A&&Ce.push("#define TERRAIN3D;");const Ge=Ce.concat(Ka.prelude.fragmentSource,c.fragmentSource).join(`
`),Ke=Ce.concat(Ka.prelude.vertexSource,c.vertexSource).join(`
`),Re=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(Re,Ge),M.compileShader(Re),!M.getShaderParameter(Re,M.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${M.getShaderInfoLog(Re)}`);M.attachShader(this.program,Re);const Ye=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(Ye,Ke),M.compileShader(Ye),!M.getShaderParameter(Ye,M.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${M.getShaderInfoLog(Ye)}`);M.attachShader(this.program,Ye),this.attributes={};const rt={};this.numAttributes=te.length;for(let at=0;at<this.numAttributes;at++)te[at]&&(M.bindAttribLocation(this.program,at,te[at]),this.attributes[te[at]]=at);if(M.linkProgram(this.program),!M.getProgramParameter(this.program,M.LINK_STATUS))throw new Error(`Program failed to link: ${M.getProgramInfoLog(this.program)}`);M.deleteShader(Ye),M.deleteShader(Re);for(let at=0;at<ze.length;at++){const mt=ze[at];if(mt&&!rt[mt]){const bt=M.getUniformLocation(this.program,mt);bt&&(rt[mt]=bt)}}this.fixedUniforms=g(i,rt),this.terrainUniforms=((at,mt)=>({u_depth:new u.aH(at,mt.u_depth),u_terrain:new u.aH(at,mt.u_terrain),u_terrain_dim:new u.aI(at,mt.u_terrain_dim),u_terrain_matrix:new u.aJ(at,mt.u_terrain_matrix),u_terrain_unpack:new u.aK(at,mt.u_terrain_unpack),u_terrain_exaggeration:new u.aI(at,mt.u_terrain_exaggeration)}))(i,rt),this.binderUniforms=p?p.getUniforms(i,rt):[]}draw(i,c,p,g,_,A,M,O,G,te,ee,me,be,Ae,ze,Ce,Ge,Ke){const Re=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(g),i.setColorMode(_),i.setCullFace(A),O){i.activeTexture.set(Re.TEXTURE2),Re.bindTexture(Re.TEXTURE_2D,O.depthTexture),i.activeTexture.set(Re.TEXTURE3),Re.bindTexture(Re.TEXTURE_2D,O.texture);for(const rt in this.terrainUniforms)this.terrainUniforms[rt].set(O[rt])}for(const rt in this.fixedUniforms)this.fixedUniforms[rt].set(M[rt]);ze&&ze.setUniforms(i,this.binderUniforms,be,{zoom:Ae});let Ye=0;switch(c){case Re.LINES:Ye=2;break;case Re.TRIANGLES:Ye=3;break;case Re.LINE_STRIP:Ye=1}for(const rt of me.get()){const at=rt.vaos||(rt.vaos={});(at[G]||(at[G]=new xa)).bind(i,this,te,ze?ze.getPaintVertexBuffers():[],ee,rt.vertexOffset,Ce,Ge,Ke),Re.drawElements(c,rt.primitiveLength*Ye,Re.UNSIGNED_SHORT,rt.primitiveOffset*Ye*2)}}}function si(y,i,c){const p=1/lr(c,1,i.transform.tileZoom),g=Math.pow(2,c.tileID.overscaledZ),_=c.tileSize*Math.pow(2,i.transform.tileZoom)/g,A=_*(c.tileID.canonical.x+c.tileID.wrap*g),M=_*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[A>>16,M>>16],u_pixel_coord_lower:[65535&A,65535&M]}}const Ls=(y,i,c,p)=>{const g=i.style.light,_=g.properties.get("position"),A=[_.x,_.y,_.z],M=function(){var G=new u.A(9);return u.A!=Float32Array&&(G[1]=0,G[2]=0,G[3]=0,G[5]=0,G[6]=0,G[7]=0),G[0]=1,G[4]=1,G[8]=1,G}();g.properties.get("anchor")==="viewport"&&function(G,te){var ee=Math.sin(te),me=Math.cos(te);G[0]=me,G[1]=ee,G[2]=0,G[3]=-ee,G[4]=me,G[5]=0,G[6]=0,G[7]=0,G[8]=1}(M,-i.transform.angle),function(G,te,ee){var me=te[0],be=te[1],Ae=te[2];G[0]=me*ee[0]+be*ee[3]+Ae*ee[6],G[1]=me*ee[1]+be*ee[4]+Ae*ee[7],G[2]=me*ee[2]+be*ee[5]+Ae*ee[8]}(A,A,M);const O=g.properties.get("color");return{u_matrix:y,u_lightpos:A,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+c,u_opacity:p}},Ru=(y,i,c,p,g,_,A)=>u.e(Ls(y,i,c,p),si(_,i,A),{u_height_factor:-Math.pow(2,g.overscaledZ)/A.tileSize/8}),El=y=>({u_matrix:y}),zs=(y,i,c,p)=>u.e(El(y),si(c,i,p)),Tl=(y,i)=>({u_matrix:y,u_world:i}),Ja=(y,i,c,p,g)=>u.e(zs(y,i,c,p),{u_world:g}),ju=(y,i,c,p)=>{const g=y.transform;let _,A;if(p.paint.get("circle-pitch-alignment")==="map"){const M=lr(c,1,g.zoom);_=!0,A=[M,M]}else _=!1,A=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,c,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:A}},Fc=(y,i,c)=>({u_matrix:y,u_inv_matrix:i,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),Qa=(y,i,c=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:c}),Rc=y=>({u_matrix:y}),Bi=(y,i,c,p)=>({u_matrix:y,u_extrude_scale:lr(i,1,c),u_intensity:p});function Pl(y,i){const c=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new u.Y(0,p/c).toLngLat().lat,new u.Y(0,(p+1)/c).toLngLat().lat]}const Yn=(y,i,c,p)=>{const g=y.transform;return{u_matrix:Bu(y,i,c,p),u_ratio:1/lr(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},bi=(y,i,c,p,g)=>u.e(Yn(y,i,c,g),{u_image:0,u_image_height:p}),Lu=(y,i,c,p,g)=>{const _=y.transform,A=zu(i,_);return{u_matrix:Bu(y,i,c,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/lr(i,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[A,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Bs=(y,i,c,p,g,_)=>{const A=y.lineAtlas,M=zu(i,y.transform),O=c.layout.get("line-cap")==="round",G=A.getDash(p.from,O),te=A.getDash(p.to,O),ee=G.width*g.fromScale,me=te.width*g.toScale;return u.e(Yn(y,i,c,_),{u_patternscale_a:[M/ee,-G.height/2],u_patternscale_b:[M/me,-te.height/2],u_sdfgamma:A.width/(256*Math.min(ee,me)*y.pixelRatio)/2,u_image:0,u_tex_y_a:G.y,u_tex_y_b:te.y,u_mix:g.t})};function zu(y,i){return 1/lr(y,1,i.tileZoom)}function Bu(y,i,c,p){return y.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const es=(y,i,c,p,g)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(A=g.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Du(g.paint.get("raster-hue-rotate"))};var _,A};function Du(y){y*=Math.PI/180;const i=Math.sin(y),c=Math.cos(y);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const jc=(y,i,c,p,g,_,A,M,O,G,te,ee,me,be)=>{const Ae=A.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:Ae.cameraToCenterDistance,u_pitch:Ae.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:Ae.width/Ae.height,u_fade_change:A.options.fadeDuration?A.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:O,u_coord_matrix:G,u_is_text:+ee,u_pitch_with_map:+p,u_is_along_line:g,u_is_variable_anchor:_,u_texsize:me,u_texture:0,u_translation:te,u_pitched_scale:be}},Lc=(y,i,c,p,g,_,A,M,O,G,te,ee,me,be,Ae)=>{const ze=A.transform;return u.e(jc(y,i,c,p,g,_,A,M,O,G,te,ee,me,Ae),{u_gamma_scale:p?Math.cos(ze._pitch)*ze.cameraToCenterDistance:1,u_device_pixel_ratio:A.pixelRatio,u_is_halo:+be})},Of=(y,i,c,p,g,_,A,M,O,G,te,ee,me,be)=>u.e(Lc(y,i,c,p,g,_,A,M,O,G,te,!0,ee,!0,be),{u_texsize_icon:me,u_texture_icon:1}),Ff=(y,i,c)=>({u_matrix:y,u_opacity:i,u_color:c}),zc=(y,i,c,p,g,_)=>u.e(function(A,M,O,G){const te=O.imageManager.getPattern(A.from.toString()),ee=O.imageManager.getPattern(A.to.toString()),{width:me,height:be}=O.imageManager.getPixelSize(),Ae=Math.pow(2,G.tileID.overscaledZ),ze=G.tileSize*Math.pow(2,O.transform.tileZoom)/Ae,Ce=ze*(G.tileID.canonical.x+G.tileID.wrap*Ae),Ge=ze*G.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:te.tl,u_pattern_br_a:te.br,u_pattern_tl_b:ee.tl,u_pattern_br_b:ee.br,u_texsize:[me,be],u_mix:M.t,u_pattern_size_a:te.displaySize,u_pattern_size_b:ee.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/lr(G,1,O.transform.tileZoom),u_pixel_coord_upper:[Ce>>16,Ge>>16],u_pixel_coord_lower:[65535&Ce,65535&Ge]}}(p,_,c,g),{u_matrix:y,u_opacity:i}),Al={fillExtrusion:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_lightpos:new u.aL(y,i.u_lightpos),u_lightintensity:new u.aI(y,i.u_lightintensity),u_lightcolor:new u.aL(y,i.u_lightcolor),u_vertical_gradient:new u.aI(y,i.u_vertical_gradient),u_opacity:new u.aI(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_lightpos:new u.aL(y,i.u_lightpos),u_lightintensity:new u.aI(y,i.u_lightintensity),u_lightcolor:new u.aL(y,i.u_lightcolor),u_vertical_gradient:new u.aI(y,i.u_vertical_gradient),u_height_factor:new u.aI(y,i.u_height_factor),u_image:new u.aH(y,i.u_image),u_texsize:new u.aM(y,i.u_texsize),u_pixel_coord_upper:new u.aM(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aM(y,i.u_pixel_coord_lower),u_scale:new u.aL(y,i.u_scale),u_fade:new u.aI(y,i.u_fade),u_opacity:new u.aI(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_image:new u.aH(y,i.u_image),u_texsize:new u.aM(y,i.u_texsize),u_pixel_coord_upper:new u.aM(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aM(y,i.u_pixel_coord_lower),u_scale:new u.aL(y,i.u_scale),u_fade:new u.aI(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_world:new u.aM(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_world:new u.aM(y,i.u_world),u_image:new u.aH(y,i.u_image),u_texsize:new u.aM(y,i.u_texsize),u_pixel_coord_upper:new u.aM(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aM(y,i.u_pixel_coord_lower),u_scale:new u.aL(y,i.u_scale),u_fade:new u.aI(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new u.aI(y,i.u_camera_to_center_distance),u_scale_with_map:new u.aH(y,i.u_scale_with_map),u_pitch_with_map:new u.aH(y,i.u_pitch_with_map),u_extrude_scale:new u.aM(y,i.u_extrude_scale),u_device_pixel_ratio:new u.aI(y,i.u_device_pixel_ratio),u_matrix:new u.aJ(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_pixel_extrude_scale:new u.aM(y,i.u_pixel_extrude_scale)}),collisionCircle:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_inv_matrix:new u.aJ(y,i.u_inv_matrix),u_camera_to_center_distance:new u.aI(y,i.u_camera_to_center_distance),u_viewport_size:new u.aM(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new u.aN(y,i.u_color),u_matrix:new u.aJ(y,i.u_matrix),u_overlay:new u.aH(y,i.u_overlay),u_overlay_scale:new u.aI(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new u.aI(y,i.u_extrude_scale),u_intensity:new u.aI(y,i.u_intensity),u_matrix:new u.aJ(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_world:new u.aM(y,i.u_world),u_image:new u.aH(y,i.u_image),u_color_ramp:new u.aH(y,i.u_color_ramp),u_opacity:new u.aI(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_image:new u.aH(y,i.u_image),u_latrange:new u.aM(y,i.u_latrange),u_light:new u.aM(y,i.u_light),u_shadow:new u.aN(y,i.u_shadow),u_highlight:new u.aN(y,i.u_highlight),u_accent:new u.aN(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_image:new u.aH(y,i.u_image),u_dimension:new u.aM(y,i.u_dimension),u_zoom:new u.aI(y,i.u_zoom),u_unpack:new u.aK(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_ratio:new u.aI(y,i.u_ratio),u_device_pixel_ratio:new u.aI(y,i.u_device_pixel_ratio),u_units_to_pixels:new u.aM(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_ratio:new u.aI(y,i.u_ratio),u_device_pixel_ratio:new u.aI(y,i.u_device_pixel_ratio),u_units_to_pixels:new u.aM(y,i.u_units_to_pixels),u_image:new u.aH(y,i.u_image),u_image_height:new u.aI(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_texsize:new u.aM(y,i.u_texsize),u_ratio:new u.aI(y,i.u_ratio),u_device_pixel_ratio:new u.aI(y,i.u_device_pixel_ratio),u_image:new u.aH(y,i.u_image),u_units_to_pixels:new u.aM(y,i.u_units_to_pixels),u_scale:new u.aL(y,i.u_scale),u_fade:new u.aI(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_ratio:new u.aI(y,i.u_ratio),u_device_pixel_ratio:new u.aI(y,i.u_device_pixel_ratio),u_units_to_pixels:new u.aM(y,i.u_units_to_pixels),u_patternscale_a:new u.aM(y,i.u_patternscale_a),u_patternscale_b:new u.aM(y,i.u_patternscale_b),u_sdfgamma:new u.aI(y,i.u_sdfgamma),u_image:new u.aH(y,i.u_image),u_tex_y_a:new u.aI(y,i.u_tex_y_a),u_tex_y_b:new u.aI(y,i.u_tex_y_b),u_mix:new u.aI(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_tl_parent:new u.aM(y,i.u_tl_parent),u_scale_parent:new u.aI(y,i.u_scale_parent),u_buffer_scale:new u.aI(y,i.u_buffer_scale),u_fade_t:new u.aI(y,i.u_fade_t),u_opacity:new u.aI(y,i.u_opacity),u_image0:new u.aH(y,i.u_image0),u_image1:new u.aH(y,i.u_image1),u_brightness_low:new u.aI(y,i.u_brightness_low),u_brightness_high:new u.aI(y,i.u_brightness_high),u_saturation_factor:new u.aI(y,i.u_saturation_factor),u_contrast_factor:new u.aI(y,i.u_contrast_factor),u_spin_weights:new u.aL(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new u.aH(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(y,i.u_is_size_feature_constant),u_size_t:new u.aI(y,i.u_size_t),u_size:new u.aI(y,i.u_size),u_camera_to_center_distance:new u.aI(y,i.u_camera_to_center_distance),u_pitch:new u.aI(y,i.u_pitch),u_rotate_symbol:new u.aH(y,i.u_rotate_symbol),u_aspect_ratio:new u.aI(y,i.u_aspect_ratio),u_fade_change:new u.aI(y,i.u_fade_change),u_matrix:new u.aJ(y,i.u_matrix),u_label_plane_matrix:new u.aJ(y,i.u_label_plane_matrix),u_coord_matrix:new u.aJ(y,i.u_coord_matrix),u_is_text:new u.aH(y,i.u_is_text),u_pitch_with_map:new u.aH(y,i.u_pitch_with_map),u_is_along_line:new u.aH(y,i.u_is_along_line),u_is_variable_anchor:new u.aH(y,i.u_is_variable_anchor),u_texsize:new u.aM(y,i.u_texsize),u_texture:new u.aH(y,i.u_texture),u_translation:new u.aM(y,i.u_translation),u_pitched_scale:new u.aI(y,i.u_pitched_scale)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new u.aH(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(y,i.u_is_size_feature_constant),u_size_t:new u.aI(y,i.u_size_t),u_size:new u.aI(y,i.u_size),u_camera_to_center_distance:new u.aI(y,i.u_camera_to_center_distance),u_pitch:new u.aI(y,i.u_pitch),u_rotate_symbol:new u.aH(y,i.u_rotate_symbol),u_aspect_ratio:new u.aI(y,i.u_aspect_ratio),u_fade_change:new u.aI(y,i.u_fade_change),u_matrix:new u.aJ(y,i.u_matrix),u_label_plane_matrix:new u.aJ(y,i.u_label_plane_matrix),u_coord_matrix:new u.aJ(y,i.u_coord_matrix),u_is_text:new u.aH(y,i.u_is_text),u_pitch_with_map:new u.aH(y,i.u_pitch_with_map),u_is_along_line:new u.aH(y,i.u_is_along_line),u_is_variable_anchor:new u.aH(y,i.u_is_variable_anchor),u_texsize:new u.aM(y,i.u_texsize),u_texture:new u.aH(y,i.u_texture),u_gamma_scale:new u.aI(y,i.u_gamma_scale),u_device_pixel_ratio:new u.aI(y,i.u_device_pixel_ratio),u_is_halo:new u.aH(y,i.u_is_halo),u_translation:new u.aM(y,i.u_translation),u_pitched_scale:new u.aI(y,i.u_pitched_scale)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new u.aH(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(y,i.u_is_size_feature_constant),u_size_t:new u.aI(y,i.u_size_t),u_size:new u.aI(y,i.u_size),u_camera_to_center_distance:new u.aI(y,i.u_camera_to_center_distance),u_pitch:new u.aI(y,i.u_pitch),u_rotate_symbol:new u.aH(y,i.u_rotate_symbol),u_aspect_ratio:new u.aI(y,i.u_aspect_ratio),u_fade_change:new u.aI(y,i.u_fade_change),u_matrix:new u.aJ(y,i.u_matrix),u_label_plane_matrix:new u.aJ(y,i.u_label_plane_matrix),u_coord_matrix:new u.aJ(y,i.u_coord_matrix),u_is_text:new u.aH(y,i.u_is_text),u_pitch_with_map:new u.aH(y,i.u_pitch_with_map),u_is_along_line:new u.aH(y,i.u_is_along_line),u_is_variable_anchor:new u.aH(y,i.u_is_variable_anchor),u_texsize:new u.aM(y,i.u_texsize),u_texsize_icon:new u.aM(y,i.u_texsize_icon),u_texture:new u.aH(y,i.u_texture),u_texture_icon:new u.aH(y,i.u_texture_icon),u_gamma_scale:new u.aI(y,i.u_gamma_scale),u_device_pixel_ratio:new u.aI(y,i.u_device_pixel_ratio),u_is_halo:new u.aH(y,i.u_is_halo),u_translation:new u.aM(y,i.u_translation),u_pitched_scale:new u.aI(y,i.u_pitched_scale)}),background:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_opacity:new u.aI(y,i.u_opacity),u_color:new u.aN(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_opacity:new u.aI(y,i.u_opacity),u_image:new u.aH(y,i.u_image),u_pattern_tl_a:new u.aM(y,i.u_pattern_tl_a),u_pattern_br_a:new u.aM(y,i.u_pattern_br_a),u_pattern_tl_b:new u.aM(y,i.u_pattern_tl_b),u_pattern_br_b:new u.aM(y,i.u_pattern_br_b),u_texsize:new u.aM(y,i.u_texsize),u_mix:new u.aI(y,i.u_mix),u_pattern_size_a:new u.aM(y,i.u_pattern_size_a),u_pattern_size_b:new u.aM(y,i.u_pattern_size_b),u_scale_a:new u.aI(y,i.u_scale_a),u_scale_b:new u.aI(y,i.u_scale_b),u_pixel_coord_upper:new u.aM(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aM(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_texture:new u.aH(y,i.u_texture),u_ele_delta:new u.aI(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_ele_delta:new u.aI(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new u.aJ(y,i.u_matrix),u_texture:new u.aH(y,i.u_texture),u_terrain_coords_id:new u.aI(y,i.u_terrain_coords_id),u_ele_delta:new u.aI(y,i.u_ele_delta)})};class Il{constructor(i,c,p){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Cl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Nu{constructor(i,c,p,g){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=g,this.context=i;const _=i.gl;this.buffer=_.createBuffer(),i.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let p=0;p<this.attributes.length;p++){const g=c.attributes[this.attributes[p].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,c,p){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],A=c.attributes[_.name];A!==void 0&&i.vertexAttribPointer(A,_.components,i[Cl[_.type]],!1,this.itemSize,_.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ts=new WeakMap;function Si(y){var i;if(ts.has(y))return ts.get(y);{const c=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return ts.set(y,c),c}}class Lr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class $u extends Lr{getDefault(){return u.aP.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Ds extends Lr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class rs extends Lr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Rf extends Lr{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class ns extends Lr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class jf extends Lr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class is extends Lr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Lf extends Lr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Bc extends Lr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class zf extends Lr{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Dc extends Lr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Ml extends Lr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class kl extends Lr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class Nc extends Lr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class $c extends Lr{getDefault(){return u.aP.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Uc extends Lr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class wa extends Lr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class Uu extends Lr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Bf extends Lr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Df extends Lr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Vc extends Lr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Ns extends Lr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ol extends Lr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Fl extends Lr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class os extends Lr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Gc extends Lr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Yi extends Lr{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Wc extends Lr{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;const p=this.gl;Si(p)?p.bindVertexArray(i):(c=p.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Hc extends Lr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Vu extends Lr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Zc extends Lr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class ta extends Lr{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Co extends ta{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class as extends ta{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Gu extends ta{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Wu{constructor(i,c,p,g,_){this.context=i,this.width=c,this.height=p;const A=i.gl,M=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new Co(i,M),g)this.depthAttachment=_?new Gu(i,M):new as(i,M);else if(_)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class Xr{constructor(i,c,p){this.blendFunction=i,this.blendColor=c,this.mask=p}}Xr.Replace=[1,0],Xr.disabled=new Xr(Xr.Replace,u.aP.transparent,[!1,!1,!1,!1]),Xr.unblended=new Xr(Xr.Replace,u.aP.transparent,[!0,!0,!0,!0]),Xr.alphaBlended=new Xr([1,771],u.aP.transparent,[!0,!0,!0,!0]);class Rl{constructor(i){var c,p;if(this.gl=i,this.clearColor=new $u(this),this.clearDepth=new Ds(this),this.clearStencil=new rs(this),this.colorMask=new Rf(this),this.depthMask=new ns(this),this.stencilMask=new jf(this),this.stencilFunc=new is(this),this.stencilOp=new Lf(this),this.stencilTest=new Bc(this),this.depthRange=new zf(this),this.depthTest=new Dc(this),this.depthFunc=new Ml(this),this.blend=new kl(this),this.blendFunc=new Nc(this),this.blendColor=new $c(this),this.blendEquation=new Uc(this),this.cullFace=new wa(this),this.cullFaceSide=new Uu(this),this.frontFace=new Bf(this),this.program=new Df(this),this.activeTexture=new Vc(this),this.viewport=new Ns(this),this.bindFramebuffer=new Ol(this),this.bindRenderbuffer=new Fl(this),this.bindTexture=new os(this),this.bindVertexBuffer=new Gc(this),this.bindElementBuffer=new Yi(this),this.bindVertexArray=new Wc(this),this.pixelStoreUnpack=new Hc(this),this.pixelStoreUnpackPremultiplyAlpha=new Vu(this),this.pixelStoreUnpackFlipY=new Zc(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Si(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new Il(this,i,c)}createVertexBuffer(i,c,p){return new Nu(this,i,c,p)}createRenderbuffer(i,c,p){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,i,c,p),this.bindRenderbuffer.set(null),_}createFramebuffer(i,c,p,g){return new Wu(this,i,c,p,g)}clear({color:i,depth:c,stencil:p}){const g=this.gl;let _=0;i&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(_)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){u.aE(i.blendFunction,Xr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Si(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return Si(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class xr{constructor(i,c,p){this.func=i,this.mask=c,this.range=p}}xr.ReadOnly=!1,xr.ReadWrite=!0,xr.disabled=new xr(519,xr.ReadOnly,[0,1]);const $s=7680;class en{constructor(i,c,p,g,_,A){this.test=i,this.ref=c,this.mask=p,this.fail=g,this.depthFail=_,this.pass=A}}en.disabled=new en({func:519,mask:0},0,0,$s,$s,$s);class Gr{constructor(i,c,p){this.enable=i,this.mode=c,this.frontFace=p}}let yo;function qc(y,i,c,p,g){const _=y.context,A=_.gl,M=y.useProgram("collisionBox"),O=[];let G=0,te=0;for(let Ge=0;Ge<p.length;Ge++){const Ke=p[Ge],Re=i.getTile(Ke).getBucket(c);if(!Re)continue;const Ye=g?Re.textCollisionBox:Re.iconCollisionBox,rt=Re.collisionCircleArray;if(rt.length>0){const at=u.F();u.aQ(at,Re.placementInvProjMatrix,y.transform.glCoordMatrix),u.aQ(at,at,Re.placementViewportMatrix),O.push({circleArray:rt,circleOffset:te,transform:Ke.posMatrix,invTransform:at,coord:Ke}),G+=rt.length/4,te=G}Ye&&M.draw(_,A.LINES,xr.disabled,en.disabled,y.colorModeForRenderPass(),Gr.disabled,{u_matrix:Ke.posMatrix,u_pixel_extrude_scale:[1/(ee=y.transform).width,1/ee.height]},y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ke),c.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,null,y.transform.zoom,null,null,Ye.collisionVertexBuffer)}var ee;if(!g||!O.length)return;const me=y.useProgram("collisionCircle"),be=new u.aR;be.resize(4*G),be._trim();let Ae=0;for(const Ge of O)for(let Ke=0;Ke<Ge.circleArray.length/4;Ke++){const Re=4*Ke,Ye=Ge.circleArray[Re+0],rt=Ge.circleArray[Re+1],at=Ge.circleArray[Re+2],mt=Ge.circleArray[Re+3];be.emplace(Ae++,Ye,rt,at,mt,0),be.emplace(Ae++,Ye,rt,at,mt,1),be.emplace(Ae++,Ye,rt,at,mt,2),be.emplace(Ae++,Ye,rt,at,mt,3)}(!yo||yo.length<2*G)&&(yo=function(Ge){const Ke=2*Ge,Re=new u.aT;Re.resize(Ke),Re._trim();for(let Ye=0;Ye<Ke;Ye++){const rt=6*Ye;Re.uint16[rt+0]=4*Ye+0,Re.uint16[rt+1]=4*Ye+1,Re.uint16[rt+2]=4*Ye+2,Re.uint16[rt+3]=4*Ye+2,Re.uint16[rt+4]=4*Ye+3,Re.uint16[rt+5]=4*Ye+0}return Re}(G));const ze=_.createIndexBuffer(yo,!0),Ce=_.createVertexBuffer(be,u.aS.members,!0);for(const Ge of O){const Ke=Fc(Ge.transform,Ge.invTransform,y.transform);me.draw(_,A.TRIANGLES,xr.disabled,en.disabled,y.colorModeForRenderPass(),Gr.disabled,Ke,y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ge.coord),c.id,Ce,ze,u.$.simpleSegment(0,2*Ge.circleOffset,Ge.circleArray.length,Ge.circleArray.length/2),null,y.transform.zoom,null,null,null)}Ce.destroy(),ze.destroy()}Gr.disabled=new Gr(!1,1029,2305),Gr.backCCW=new Gr(!0,1029,2305);const jl=u.an(new Float32Array(16));function Ll(y,i,c,p,g,_){const{horizontalAlign:A,verticalAlign:M}=u.au(y);return new u.P((-(A-.5)*i/g+p[0])*_,(-(M-.5)*c/g+p[1])*_)}function Xc(y,i,c,p,g,_){const A=i.tileAnchorPoint.add(new u.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let M=p.mult(_);return c||(M=M.rotate(-g)),an(A.add(M),i.labelPlaneMatrix,i.getElevation).point}if(c){const M=Le(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(y),O=Math.atan(M.y/M.x)+(M.x<0?Math.PI:0);return y.add(p.rotate(O))}return y.add(p)}function Mo(y,i,c,p,g,_,A,M,O,G,te,ee,me,be){const Ae=y.text.placedSymbolArray,ze=y.text.dynamicLayoutVertexArray,Ce=y.icon.dynamicLayoutVertexArray,Ge={};ze.clear();for(let Ke=0;Ke<Ae.length;Ke++){const Re=Ae.get(Ke),Ye=Re.hidden||!Re.crossTileID||y.allowVerticalPlacement&&!Re.placedOrientation?null:p[Re.crossTileID];if(Ye){const rt=new u.P(Re.anchorX,Re.anchorY),at={getElevation:be,width:g.width,height:g.height,labelPlaneMatrix:_,lineVertexArray:null,pitchWithMap:c,projection:te,projectionCache:null,tileAnchorPoint:rt,translation:ee,unwrappedTileID:me},mt=c?an(rt,A,be):Le(rt.x,rt.y,at),bt=Me(g.cameraToCenterDistance,mt.signedDistanceFromCamera);let Nt=u.ai(y.textSizeData,O,Re)*bt/u.ap;c&&(Nt*=y.tilePixelRatio/M);const{width:$t,height:St,anchor:Pt,textOffset:Wt,textBoxScale:mr}=Ye,It=Ll(Pt,$t,St,Wt,mr,Nt),Rt=te.getPitchedTextCorrection(g,rt.add(new u.P(ee[0],ee[1])),me),hr=Xc(mt.point,at,i,It,g.angle,Rt),tn=y.allowVerticalPlacement&&Re.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let Sr=0;Sr<Re.numGlyphs;Sr++)u.aj(ze,hr,tn);G&&Re.associatedIconIndex>=0&&(Ge[Re.associatedIconIndex]={shiftedAnchor:hr,angle:tn})}else nr(Re.numGlyphs,ze)}if(G){Ce.clear();const Ke=y.icon.placedSymbolArray;for(let Re=0;Re<Ke.length;Re++){const Ye=Ke.get(Re);if(Ye.hidden)nr(Ye.numGlyphs,Ce);else{const rt=Ge[Re];if(rt)for(let at=0;at<Ye.numGlyphs;at++)u.aj(Ce,rt.shiftedAnchor,rt.angle);else nr(Ye.numGlyphs,Ce)}}y.icon.dynamicLayoutVertexBuffer.updateData(Ce)}y.text.dynamicLayoutVertexBuffer.updateData(ze)}function ko(y,i,c){return c.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function En(y,i,c,p,g,_,A,M,O,G,te,ee){const me=y.context,be=me.gl,Ae=y.transform,ze=ai(),Ce=M==="map",Ge=O==="map",Ke=M!=="viewport"&&c.layout.get("symbol-placement")!=="point",Re=Ce&&!Ge&&!Ke,Ye=!Ge&&Ke,rt=!c.layout.get("symbol-sort-key").isConstant();let at=!1;const mt=y.depthModeForSublayer(0,xr.ReadOnly),bt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Nt=[],$t=ze.getCircleRadiusCorrection(Ae);for(const St of p){const Pt=i.getTile(St),Wt=Pt.getBucket(c);if(!Wt)continue;const mr=g?Wt.text:Wt.icon;if(!mr||!mr.segments.get().length||!mr.hasVisibleVertices)continue;const It=mr.programConfigurations.get(c.id),Rt=g||Wt.sdfIcons,hr=g?Wt.textSizeData:Wt.iconSizeData,tn=Ge||Ae.pitch!==0,Sr=y.useProgram(ko(Rt,g,Wt),It),Ir=u.ag(hr,Ae.zoom),rn=y.style.map.terrain&&y.style.map.terrain.getTerrainData(St);let ui,Ro,nn,Ni,Ai=[0,0],ci=null;if(g)Ro=Pt.glyphAtlasTexture,nn=be.LINEAR,ui=Pt.glyphAtlasTexture.size,Wt.iconsInText&&(Ai=Pt.imageAtlasTexture.size,ci=Pt.imageAtlasTexture,Ni=tn||y.options.rotating||y.options.zooming||hr.kind==="composite"||hr.kind==="camera"?be.LINEAR:be.NEAREST);else{const cn=c.layout.get("icon-size").constantOr(0)!==1||Wt.iconsNeedLinear;Ro=Pt.imageAtlasTexture,nn=Rt||y.options.rotating||y.options.zooming||cn||tn?be.LINEAR:be.NEAREST,ui=Pt.imageAtlasTexture.size}const hi=lr(Pt,1,y.transform.zoom),jo=Ye?St.posMatrix:jl,qs=Nn(jo,Ge,Ce,y.transform,hi),nh=ni(jo,Ge,Ce,y.transform,hi),Vl=ni(St.posMatrix,Ge,Ce,y.transform,hi),Xs=ze.translatePosition(y.transform,Pt,_,A),ih=bt&&Wt.hasTextData(),ed=c.layout.get("icon-text-fit")!=="none"&&ih&&Wt.hasIconData();if(Ke){const cn=y.style.map.terrain?(td,Vn)=>y.style.map.terrain.getElevation(St,td,Vn):null,Wl=c.layout.get("text-rotation-alignment")==="map";ue(Wt,St.posMatrix,y,g,qs,Vl,Ge,G,Wl,ze,St.toUnwrapped(),Ae.width,Ae.height,Xs,cn)}const Jn=St.posMatrix,Lo=g&&bt||ed,ds=Ke||Lo?jl:qs,Gl=nh,fi=Rt&&c.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let di;di=Rt?Wt.iconsInText?Of(hr.kind,Ir,Re,Ge,Ke,Lo,y,Jn,ds,Gl,Xs,ui,Ai,$t):Lc(hr.kind,Ir,Re,Ge,Ke,Lo,y,Jn,ds,Gl,Xs,g,ui,!0,$t):jc(hr.kind,Ir,Re,Ge,Ke,Lo,y,Jn,ds,Gl,Xs,g,ui,$t);const qn={program:Sr,buffers:mr,uniformValues:di,atlasTexture:Ro,atlasTextureIcon:ci,atlasInterpolation:nn,atlasInterpolationIcon:Ni,isSDF:Rt,hasHalo:fi};if(rt&&Wt.canOverlap){at=!0;const cn=mr.segments.get();for(const Wl of cn)Nt.push({segments:new u.$([Wl]),sortKey:Wl.sortKey,state:qn,terrainData:rn})}else Nt.push({segments:mr.segments,sortKey:0,state:qn,terrainData:rn})}at&&Nt.sort((St,Pt)=>St.sortKey-Pt.sortKey);for(const St of Nt){const Pt=St.state;if(me.activeTexture.set(be.TEXTURE0),Pt.atlasTexture.bind(Pt.atlasInterpolation,be.CLAMP_TO_EDGE),Pt.atlasTextureIcon&&(me.activeTexture.set(be.TEXTURE1),Pt.atlasTextureIcon&&Pt.atlasTextureIcon.bind(Pt.atlasInterpolationIcon,be.CLAMP_TO_EDGE)),Pt.isSDF){const Wt=Pt.uniformValues;Pt.hasHalo&&(Wt.u_is_halo=1,vo(Pt.buffers,St.segments,c,y,Pt.program,mt,te,ee,Wt,St.terrainData)),Wt.u_is_halo=0}vo(Pt.buffers,St.segments,c,y,Pt.program,mt,te,ee,Pt.uniformValues,St.terrainData)}}function vo(y,i,c,p,g,_,A,M,O,G){const te=p.context;g.draw(te,te.gl.TRIANGLES,_,A,M,Gr.disabled,O,G,c.id,y.layoutVertexBuffer,y.indexBuffer,i,c.paint,p.transform.zoom,y.programConfigurations.get(c.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function _o(y,i,c,p,g){if(!c||!p||!p.imageAtlas)return;const _=p.imageAtlas.patternPositions;let A=_[c.to.toString()],M=_[c.from.toString()];if(!A&&M&&(A=M),!M&&A&&(M=A),!A||!M){const O=g.getPaintProperty(i);A=_[O],M=_[O]}A&&M&&y.setConstantPatternPositions(A,M)}function Oo(y,i,c,p,g,_,A){const M=y.context.gl,O="fill-pattern",G=c.paint.get(O),te=G&&G.constantOr(1),ee=c.getCrossfadeParameters();let me,be,Ae,ze,Ce;A?(be=te&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",me=M.LINES):(be=te?"fillPattern":"fill",me=M.TRIANGLES);const Ge=G.constantOr(null);for(const Ke of p){const Re=i.getTile(Ke);if(te&&!Re.patternsLoaded())continue;const Ye=Re.getBucket(c);if(!Ye)continue;const rt=Ye.programConfigurations.get(c.id),at=y.useProgram(be,rt),mt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ke);te&&(y.context.activeTexture.set(M.TEXTURE0),Re.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),rt.updatePaintBuffers(ee)),_o(rt,O,Ge,Re,c);const bt=mt?Ke:null,Nt=y.translatePosMatrix(bt?bt.posMatrix:Ke.posMatrix,Re,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(A){ze=Ye.indexBuffer2,Ce=Ye.segments2;const $t=[M.drawingBufferWidth,M.drawingBufferHeight];Ae=be==="fillOutlinePattern"&&te?Ja(Nt,y,ee,Re,$t):Tl(Nt,$t)}else ze=Ye.indexBuffer,Ce=Ye.segments,Ae=te?zs(Nt,y,ee,Re):El(Nt);at.draw(y.context,me,g,y.stencilModeForClipping(Ke),_,Gr.disabled,Ae,mt,c.id,Ye.layoutVertexBuffer,ze,Ce,c.paint,y.transform.zoom,rt)}}function li(y,i,c,p,g,_,A){const M=y.context,O=M.gl,G="fill-extrusion-pattern",te=c.paint.get(G),ee=te.constantOr(1),me=c.getCrossfadeParameters(),be=c.paint.get("fill-extrusion-opacity"),Ae=te.constantOr(null);for(const ze of p){const Ce=i.getTile(ze),Ge=Ce.getBucket(c);if(!Ge)continue;const Ke=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ze),Re=Ge.programConfigurations.get(c.id),Ye=y.useProgram(ee?"fillExtrusionPattern":"fillExtrusion",Re);ee&&(y.context.activeTexture.set(O.TEXTURE0),Ce.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Re.updatePaintBuffers(me)),_o(Re,G,Ae,Ce,c);const rt=y.translatePosMatrix(ze.posMatrix,Ce,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),at=c.paint.get("fill-extrusion-vertical-gradient"),mt=ee?Ru(rt,y,at,be,ze,me,Ce):Ls(rt,y,at,be);Ye.draw(M,M.gl.TRIANGLES,g,_,A,Gr.backCCW,mt,Ke,c.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,c.paint,y.transform.zoom,Re,y.style.map.terrain&&Ge.centroidVertexBuffer)}}function Us(y,i,c,p,g,_,A){const M=y.context,O=M.gl,G=c.fbo;if(!G)return;const te=y.useProgram("hillshade"),ee=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);M.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,G.colorAttachment.get()),te.draw(M,O.TRIANGLES,g,_,A,Gr.disabled,((me,be,Ae,ze)=>{const Ce=Ae.paint.get("hillshade-shadow-color"),Ge=Ae.paint.get("hillshade-highlight-color"),Ke=Ae.paint.get("hillshade-accent-color");let Re=Ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ae.paint.get("hillshade-illumination-anchor")==="viewport"&&(Re-=me.transform.angle);const Ye=!me.options.moving;return{u_matrix:ze?ze.posMatrix:me.transform.calculatePosMatrix(be.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:Pl(0,be.tileID),u_light:[Ae.paint.get("hillshade-exaggeration"),Re],u_shadow:Ce,u_highlight:Ge,u_accent:Ke}})(y,c,p,ee?i:null),ee,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Vs(y,i,c,p,g,_){const A=y.context,M=A.gl,O=i.dem;if(O&&O.data){const G=O.dim,te=O.stride,ee=O.getPixels();if(A.activeTexture.set(M.TEXTURE1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(te),i.demTexture){const be=i.demTexture;be.update(ee,{premultiply:!1}),be.bind(M.NEAREST,M.CLAMP_TO_EDGE)}else i.demTexture=new q(A,ee,M.RGBA,{premultiply:!1}),i.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);A.activeTexture.set(M.TEXTURE0);let me=i.fbo;if(!me){const be=new q(A,{width:G,height:G,data:null},M.RGBA);be.bind(M.LINEAR,M.CLAMP_TO_EDGE),me=i.fbo=A.createFramebuffer(G,G,!0,!1),me.colorAttachment.set(be.texture)}A.bindFramebuffer.set(me.framebuffer),A.viewport.set([0,0,G,G]),y.useProgram("hillshadePrepare").draw(A,M.TRIANGLES,p,g,_,Gr.disabled,((be,Ae)=>{const ze=Ae.stride,Ce=u.F();return u.aO(Ce,0,u.W,-u.W,0,0,1),u.H(Ce,Ce,[0,-u.W,0]),{u_matrix:Ce,u_image:1,u_dimension:[ze,ze],u_zoom:be.overscaledZ,u_unpack:Ae.getUnpackVector()}})(i.tileID,O),null,c.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Ei(y,i,c,p,g,_){const A=p.paint.get("raster-fade-duration");if(!_&&A>0){const M=b.now(),O=(M-y.timeAdded)/A,G=i?(M-i.timeAdded)/A:-1,te=c.getSource(),ee=g.coveringZoomLevel({tileSize:te.tileSize,roundZoom:te.roundZoom}),me=!i||Math.abs(i.tileID.overscaledZ-ee)>Math.abs(y.tileID.overscaledZ-ee),be=me&&y.refreshedUponExpiration?1:u.ac(me?O:1-G,0,1);return y.refreshedUponExpiration&&O>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-be}:{opacity:be,mix:0}}return{opacity:1,mix:0}}const Di=new u.aP(1,0,0,1),Gs=new u.aP(0,1,0,1),ba=new u.aP(0,0,1,1),ra=new u.aP(1,0,1,1),Ws=new u.aP(0,1,1,1);function zl(y,i,c,p){xo(y,0,i+c/2,y.transform.width,c,p)}function na(y,i,c,p){xo(y,i-c/2,0,c,y.transform.height,p)}function xo(y,i,c,p,g,_){const A=y.context,M=A.gl;M.enable(M.SCISSOR_TEST),M.scissor(i*y.pixelRatio,c*y.pixelRatio,p*y.pixelRatio,g*y.pixelRatio),A.clear({color:_}),M.disable(M.SCISSOR_TEST)}function Fo(y,i,c){const p=y.context,g=p.gl,_=c.posMatrix,A=y.useProgram("debug"),M=xr.disabled,O=en.disabled,G=y.colorModeForRenderPass(),te="$debug",ee=y.style.map.terrain&&y.style.map.terrain.getTerrainData(c);p.activeTexture.set(g.TEXTURE0);const me=i.getTileByID(c.key).latestRawTileData,be=Math.floor((me&&me.byteLength||0)/1024),Ae=i.getTile(c).tileSize,ze=512/Math.min(Ae,512)*(c.overscaledZ/y.transform.zoom)*.5;let Ce=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(Ce+=` => ${c.overscaledZ}`),function(Ge,Ke){Ge.initDebugOverlayCanvas();const Re=Ge.debugOverlayCanvas,Ye=Ge.context.gl,rt=Ge.debugOverlayCanvas.getContext("2d");rt.clearRect(0,0,Re.width,Re.height),rt.shadowColor="white",rt.shadowBlur=2,rt.lineWidth=1.5,rt.strokeStyle="white",rt.textBaseline="top",rt.font="bold 36px Open Sans, sans-serif",rt.fillText(Ke,5,5),rt.strokeText(Ke,5,5),Ge.debugOverlayTexture.update(Re),Ge.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(y,`${Ce} ${be}kB`),A.draw(p,g.TRIANGLES,M,O,Xr.alphaBlended,Gr.disabled,Qa(_,u.aP.transparent,ze),null,te,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),A.draw(p,g.LINE_STRIP,M,O,G,Gr.disabled,Qa(_,u.aP.red),ee,te,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Hs(y,i,c){const p=y.context,g=p.gl,_=y.colorModeForRenderPass(),A=new xr(g.LEQUAL,xr.ReadWrite,y.depthRangeFor3D),M=y.useProgram("terrain"),O=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const G of c){const te=y.renderToTexture.getTexture(G),ee=i.getTerrainData(G.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,te.texture);const me={u_matrix:y.transform.calculatePosMatrix(G.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};M.draw(p,g.TRIANGLES,A,en.disabled,_,Gr.backCCW,me,ee,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}}class Fr{constructor(i,c){this.context=new Rl(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ve.maxUnderzooming+Ve.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ln}resize(i,c,p){if(this.width=Math.floor(i*p),this.height=Math.floor(c*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,c=new u.aW;c.emplaceBack(0,0),c.emplaceBack(u.W,0),c.emplaceBack(0,u.W),c.emplaceBack(u.W,u.W),this.tileExtentBuffer=i.createVertexBuffer(c,go.members),this.tileExtentSegments=u.$.simpleSegment(0,0,4,2);const p=new u.aW;p.emplaceBack(0,0),p.emplaceBack(u.W,0),p.emplaceBack(0,u.W),p.emplaceBack(u.W,u.W),this.debugBuffer=i.createVertexBuffer(p,go.members),this.debugSegments=u.$.simpleSegment(0,0,4,5);const g=new u.Z;g.emplaceBack(0,0,0,0),g.emplaceBack(u.W,0,u.W,0),g.emplaceBack(0,u.W,0,u.W),g.emplaceBack(u.W,u.W,u.W,u.W),this.rasterBoundsBuffer=i.createVertexBuffer(g,Se.members),this.rasterBoundsSegments=u.$.simpleSegment(0,0,4,2);const _=new u.aW;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(_,go.members),this.viewportSegments=u.$.simpleSegment(0,0,4,2);const A=new u.aX;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(A);const M=new u.aY;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(M);const O=this.context.gl;this.stencilClearMode=new en({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=u.F();u.aO(p,0,this.width,this.height,0,0,1),u.J(p,p,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,xr.disabled,this.stencilClearMode,Xr.disabled,Gr.disabled,Rc(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const p=this.context,g=p.gl;this.nextStencilID+c.length>256&&this.clearStencil(),p.setColorMode(Xr.disabled),p.setDepthMode(xr.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of c){const M=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A);_.draw(p,g.TRIANGLES,xr.disabled,new en({func:g.ALWAYS,mask:0},M,255,g.KEEP,g.KEEP,g.REPLACE),Xr.disabled,Gr.disabled,Rc(A.posMatrix),O,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new en({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new en({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,p=i.sort((A,M)=>M.overscaledZ-A.overscaledZ),g=p[p.length-1].overscaledZ,_=p[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const A={};for(let M=0;M<_;M++)A[M+g]=new en({func:c.GEQUAL,mask:255},M+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=_,[A,p]}return[{[g]:en.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Xr([i.CONSTANT_COLOR,i.ONE],new u.aP(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Xr.unblended:Xr.alphaBlended}depthModeForSublayer(i,c,p){if(!this.opaquePassEnabledForLayer())return xr.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new xr(p||this.context.gl.LEQUAL,c,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,_={},A={},M={};for(const O in g){const G=g[O];G.used&&G.prepare(this.context),_[O]=G.getVisibleCoordinates(),A[O]=_[O].slice().reverse(),M[O]=G.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let O=0;O<p.length;O++)if(this.style._layers[p[O]].is3D()){this.opaquePassCutoff=O;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const O of p){const G=this.style._layers[O];if(!G.hasOffscreenPass()||G.isHidden(this.transform.zoom))continue;const te=A[G.source];(G.type==="custom"||te.length)&&this.renderLayer(this,g[G.source],G,te)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?u.aP.black:u.aP.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const O=this.style._layers[p[this.currentLayer]],G=g[O.source],te=_[O.source];this._renderTileClippingMasks(O,te),this.renderLayer(this,G,O,te)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const O=this.style._layers[p[this.currentLayer]],G=g[O.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(O))continue;const te=(O.type==="symbol"?M:A)[O.source];this._renderTileClippingMasks(O,_[O.source]),this.renderLayer(this,G,O,te)}if(this.options.showTileBoundaries){const O=function(G,te){let ee=null;const me=Object.values(G._layers).flatMap(Ce=>Ce.source&&!Ce.isHidden(te)?[G.sourceCaches[Ce.source]]:[]),be=me.filter(Ce=>Ce.getSource().type==="vector"),Ae=me.filter(Ce=>Ce.getSource().type!=="vector"),ze=Ce=>{(!ee||ee.getSource().maxzoom<Ce.getSource().maxzoom)&&(ee=Ce)};return be.forEach(Ce=>ze(Ce)),ee||Ae.forEach(Ce=>ze(Ce)),ee}(this.style,this.transform.zoom);O&&function(G,te,ee){for(let me=0;me<ee.length;me++)Fo(G,te,ee[me])}(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(O){const G=O.transform.padding;zl(O,O.transform.height-(G.top||0),3,Di),zl(O,G.bottom||0,3,Gs),na(O,G.left||0,3,ba),na(O,O.transform.width-(G.right||0),3,ra);const te=O.transform.centerPoint;(function(ee,me,be,Ae){xo(ee,me-1,be-10,2,20,Ae),xo(ee,me-10,be-1,20,2,Ae)})(O,te.x,O.transform.height-te.y,Ws)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,p=this.transform.projMatrix;let g=this.terrainFacilitator.dirty;g||(g=i?!u.aZ(c,p):!u.a_(c,p)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(u.a$(c,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,A){const M=_.context,O=M.gl,G=Xr.unblended,te=new xr(O.LEQUAL,xr.ReadWrite,[0,1]),ee=A.getTerrainMesh(),me=A.sourceCache.getRenderableTiles(),be=_.useProgram("terrainDepth");M.bindFramebuffer.set(A.getFramebuffer("depth").framebuffer),M.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),M.clear({color:u.aP.transparent,depth:1});for(const Ae of me){const ze=A.getTerrainData(Ae.tileID),Ce={u_matrix:_.transform.calculatePosMatrix(Ae.tileID.toUnwrapped()),u_ele_delta:A.getMeshFrameDelta(_.transform.zoom)};be.draw(M,O.TRIANGLES,te,en.disabled,G,Gr.backCCW,Ce,ze,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments)}M.bindFramebuffer.set(null),M.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,A){const M=_.context,O=M.gl,G=Xr.unblended,te=new xr(O.LEQUAL,xr.ReadWrite,[0,1]),ee=A.getTerrainMesh(),me=A.getCoordsTexture(),be=A.sourceCache.getRenderableTiles(),Ae=_.useProgram("terrainCoords");M.bindFramebuffer.set(A.getFramebuffer("coords").framebuffer),M.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),M.clear({color:u.aP.transparent,depth:1}),A.coordsIndex=[];for(const ze of be){const Ce=A.getTerrainData(ze.tileID);M.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,me.texture);const Ge={u_matrix:_.transform.calculatePosMatrix(ze.tileID.toUnwrapped()),u_terrain_coords_id:(255-A.coordsIndex.length)/255,u_texture:0,u_ele_delta:A.getMeshFrameDelta(_.transform.zoom)};Ae.draw(M,O.TRIANGLES,te,en.disabled,G,Gr.backCCW,Ge,Ce,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments),A.coordsIndex.push(ze.tileID.key)}M.bindFramebuffer.set(null),M.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(i,c,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(_,A,M,O,G){if(_.renderPass!=="translucent")return;const te=en.disabled,ee=_.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(me,be,Ae,ze,Ce,Ge,Ke,Re,Ye){const rt=be.transform,at=ai(),mt=Ce==="map",bt=Ge==="map";for(const Nt of me){const $t=ze.getTile(Nt),St=$t.getBucket(Ae);if(!St||!St.text||!St.text.segments.get().length)continue;const Pt=u.ag(St.textSizeData,rt.zoom),Wt=lr($t,1,be.transform.zoom),mr=Nn(Nt.posMatrix,bt,mt,be.transform,Wt),It=Ae.layout.get("icon-text-fit")!=="none"&&St.hasIconData();if(Pt){const Rt=Math.pow(2,rt.zoom-$t.tileID.overscaledZ),hr=be.style.map.terrain?(Sr,Ir)=>be.style.map.terrain.getElevation(Nt,Sr,Ir):null,tn=at.translatePosition(rt,$t,Ke,Re);Mo(St,mt,bt,Ye,rt,mr,Nt.posMatrix,Rt,Pt,It,at,tn,Nt.toUnwrapped(),hr)}}}(O,_,M,A,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),G),M.paint.get("icon-opacity").constantOr(1)!==0&&En(_,A,M,O,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),te,ee),M.paint.get("text-opacity").constantOr(1)!==0&&En(_,A,M,O,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),te,ee),A.map.showCollisionBoxes&&(qc(_,A,M,O,!0),qc(_,A,M,O,!1))})(i,c,p,g,this.style.placement.variableOffsets);break;case"circle":(function(_,A,M,O){if(_.renderPass!=="translucent")return;const G=M.paint.get("circle-opacity"),te=M.paint.get("circle-stroke-width"),ee=M.paint.get("circle-stroke-opacity"),me=!M.layout.get("circle-sort-key").isConstant();if(G.constantOr(1)===0&&(te.constantOr(1)===0||ee.constantOr(1)===0))return;const be=_.context,Ae=be.gl,ze=_.depthModeForSublayer(0,xr.ReadOnly),Ce=en.disabled,Ge=_.colorModeForRenderPass(),Ke=[];for(let Re=0;Re<O.length;Re++){const Ye=O[Re],rt=A.getTile(Ye),at=rt.getBucket(M);if(!at)continue;const mt=at.programConfigurations.get(M.id),bt=_.useProgram("circle",mt),Nt=at.layoutVertexBuffer,$t=at.indexBuffer,St=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ye),Pt={programConfiguration:mt,program:bt,layoutVertexBuffer:Nt,indexBuffer:$t,uniformValues:ju(_,Ye,rt,M),terrainData:St};if(me){const Wt=at.segments.get();for(const mr of Wt)Ke.push({segments:new u.$([mr]),sortKey:mr.sortKey,state:Pt})}else Ke.push({segments:at.segments,sortKey:0,state:Pt})}me&&Ke.sort((Re,Ye)=>Re.sortKey-Ye.sortKey);for(const Re of Ke){const{programConfiguration:Ye,program:rt,layoutVertexBuffer:at,indexBuffer:mt,uniformValues:bt,terrainData:Nt}=Re.state;rt.draw(be,Ae.TRIANGLES,ze,Ce,Ge,Gr.disabled,bt,Nt,M.id,at,mt,Re.segments,M.paint,_.transform.zoom,Ye)}})(i,c,p,g);break;case"heatmap":(function(_,A,M,O){if(M.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const G=_.context,te=G.gl,ee=en.disabled,me=new Xr([te.ONE,te.ONE],u.aP.transparent,[!0,!0,!0,!0]);(function(be,Ae,ze){const Ce=be.gl;be.activeTexture.set(Ce.TEXTURE1),be.viewport.set([0,0,Ae.width/4,Ae.height/4]);let Ge=ze.heatmapFbo;if(Ge)Ce.bindTexture(Ce.TEXTURE_2D,Ge.colorAttachment.get()),be.bindFramebuffer.set(Ge.framebuffer);else{const Ke=Ce.createTexture();Ce.bindTexture(Ce.TEXTURE_2D,Ke),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.LINEAR),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.LINEAR),Ge=ze.heatmapFbo=be.createFramebuffer(Ae.width/4,Ae.height/4,!1,!1),function(Re,Ye,rt,at){var mt,bt;const Nt=Re.gl,$t=(mt=Re.HALF_FLOAT)!==null&&mt!==void 0?mt:Nt.UNSIGNED_BYTE,St=(bt=Re.RGBA16F)!==null&&bt!==void 0?bt:Nt.RGBA;Nt.texImage2D(Nt.TEXTURE_2D,0,St,Ye.width/4,Ye.height/4,0,Nt.RGBA,$t,null),at.colorAttachment.set(rt)}(be,Ae,Ke,Ge)}})(G,_,M),G.clear({color:u.aP.transparent});for(let be=0;be<O.length;be++){const Ae=O[be];if(A.hasRenderableParent(Ae))continue;const ze=A.getTile(Ae),Ce=ze.getBucket(M);if(!Ce)continue;const Ge=Ce.programConfigurations.get(M.id),Ke=_.useProgram("heatmap",Ge),{zoom:Re}=_.transform;Ke.draw(G,te.TRIANGLES,xr.disabled,ee,me,Gr.disabled,Bi(Ae.posMatrix,ze,Re,M.paint.get("heatmap-intensity")),null,M.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,M.paint,_.transform.zoom,Ge)}G.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(G,te){const ee=G.context,me=ee.gl,be=te.heatmapFbo;if(!be)return;ee.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_2D,be.colorAttachment.get()),ee.activeTexture.set(me.TEXTURE1);let Ae=te.colorRampTexture;Ae||(Ae=te.colorRampTexture=new q(ee,te.colorRamp,me.RGBA)),Ae.bind(me.LINEAR,me.CLAMP_TO_EDGE),G.useProgram("heatmapTexture").draw(ee,me.TRIANGLES,xr.disabled,en.disabled,G.colorModeForRenderPass(),Gr.disabled,((ze,Ce,Ge,Ke)=>{const Re=u.F();u.aO(Re,0,ze.width,ze.height,0,0,1);const Ye=ze.context.gl;return{u_matrix:Re,u_world:[Ye.drawingBufferWidth,Ye.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ce.paint.get("heatmap-opacity")}})(G,te),null,te.id,G.viewportBuffer,G.quadTriangleIndexBuffer,G.viewportSegments,te.paint,G.transform.zoom)}(_,M))})(i,c,p,g);break;case"line":(function(_,A,M,O){if(_.renderPass!=="translucent")return;const G=M.paint.get("line-opacity"),te=M.paint.get("line-width");if(G.constantOr(1)===0||te.constantOr(1)===0)return;const ee=_.depthModeForSublayer(0,xr.ReadOnly),me=_.colorModeForRenderPass(),be=M.paint.get("line-dasharray"),Ae=M.paint.get("line-pattern"),ze=Ae.constantOr(1),Ce=M.paint.get("line-gradient"),Ge=M.getCrossfadeParameters(),Ke=ze?"linePattern":be?"lineSDF":Ce?"lineGradient":"line",Re=_.context,Ye=Re.gl;let rt=!0;for(const at of O){const mt=A.getTile(at);if(ze&&!mt.patternsLoaded())continue;const bt=mt.getBucket(M);if(!bt)continue;const Nt=bt.programConfigurations.get(M.id),$t=_.context.program.get(),St=_.useProgram(Ke,Nt),Pt=rt||St.program!==$t,Wt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(at),mr=Ae.constantOr(null);if(mr&&mt.imageAtlas){const hr=mt.imageAtlas,tn=hr.patternPositions[mr.to.toString()],Sr=hr.patternPositions[mr.from.toString()];tn&&Sr&&Nt.setConstantPatternPositions(tn,Sr)}const It=Wt?at:null,Rt=ze?Lu(_,mt,M,Ge,It):be?Bs(_,mt,M,be,Ge,It):Ce?bi(_,mt,M,bt.lineClipsArray.length,It):Yn(_,mt,M,It);if(ze)Re.activeTexture.set(Ye.TEXTURE0),mt.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),Nt.updatePaintBuffers(Ge);else if(be&&(Pt||_.lineAtlas.dirty))Re.activeTexture.set(Ye.TEXTURE0),_.lineAtlas.bind(Re);else if(Ce){const hr=bt.gradients[M.id];let tn=hr.texture;if(M.gradientVersion!==hr.version){let Sr=256;if(M.stepInterpolant){const Ir=A.getSource().maxzoom,rn=at.canonical.z===Ir?Math.ceil(1<<_.transform.maxZoom-at.canonical.z):1;Sr=u.ac(u.aU(bt.maxLineLength/u.W*1024*rn),256,Re.maxTextureSize)}hr.gradient=u.aV({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:Sr,image:hr.gradient||void 0,clips:bt.lineClipsArray}),hr.texture?hr.texture.update(hr.gradient):hr.texture=new q(Re,hr.gradient,Ye.RGBA),hr.version=M.gradientVersion,tn=hr.texture}Re.activeTexture.set(Ye.TEXTURE0),tn.bind(M.stepInterpolant?Ye.NEAREST:Ye.LINEAR,Ye.CLAMP_TO_EDGE)}St.draw(Re,Ye.TRIANGLES,ee,_.stencilModeForClipping(at),me,Gr.disabled,Rt,Wt,M.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,M.paint,_.transform.zoom,Nt,bt.layoutVertexBuffer2),rt=!1}})(i,c,p,g);break;case"fill":(function(_,A,M,O){const G=M.paint.get("fill-color"),te=M.paint.get("fill-opacity");if(te.constantOr(1)===0)return;const ee=_.colorModeForRenderPass(),me=M.paint.get("fill-pattern"),be=_.opaquePassEnabledForLayer()&&!me.constantOr(1)&&G.constantOr(u.aP.transparent).a===1&&te.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===be){const Ae=_.depthModeForSublayer(1,_.renderPass==="opaque"?xr.ReadWrite:xr.ReadOnly);Oo(_,A,M,O,Ae,ee,!1)}if(_.renderPass==="translucent"&&M.paint.get("fill-antialias")){const Ae=_.depthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,xr.ReadOnly);Oo(_,A,M,O,Ae,ee,!0)}})(i,c,p,g);break;case"fill-extrusion":(function(_,A,M,O){const G=M.paint.get("fill-extrusion-opacity");if(G!==0&&_.renderPass==="translucent"){const te=new xr(_.context.gl.LEQUAL,xr.ReadWrite,_.depthRangeFor3D);if(G!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))li(_,A,M,O,te,en.disabled,Xr.disabled),li(_,A,M,O,te,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const ee=_.colorModeForRenderPass();li(_,A,M,O,te,en.disabled,ee)}}})(i,c,p,g);break;case"hillshade":(function(_,A,M,O){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const G=_.context,te=_.depthModeForSublayer(0,xr.ReadOnly),ee=_.colorModeForRenderPass(),[me,be]=_.renderPass==="translucent"?_.stencilConfigForOverlap(O):[{},O];for(const Ae of be){const ze=A.getTile(Ae);ze.needsHillshadePrepare!==void 0&&ze.needsHillshadePrepare&&_.renderPass==="offscreen"?Vs(_,ze,M,te,en.disabled,ee):_.renderPass==="translucent"&&Us(_,Ae,ze,M,te,me[Ae.overscaledZ],ee)}G.viewport.set([0,0,_.width,_.height])})(i,c,p,g);break;case"raster":(function(_,A,M,O){if(_.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!O.length)return;const G=_.context,te=G.gl,ee=A.getSource(),me=_.useProgram("raster"),be=_.colorModeForRenderPass(),[Ae,ze]=ee instanceof N?[{},O]:_.stencilConfigForOverlap(O),Ce=ze[ze.length-1].overscaledZ,Ge=!_.options.moving;for(const Ke of ze){const Re=_.depthModeForSublayer(Ke.overscaledZ-Ce,M.paint.get("raster-opacity")===1?xr.ReadWrite:xr.ReadOnly,te.LESS),Ye=A.getTile(Ke);Ye.registerFadeDuration(M.paint.get("raster-fade-duration"));const rt=A.findLoadedParent(Ke,0),at=A.findLoadedSibling(Ke),mt=Ei(Ye,rt||at||null,A,M,_.transform,_.style.map.terrain);let bt,Nt;const $t=M.paint.get("raster-resampling")==="nearest"?te.NEAREST:te.LINEAR;G.activeTexture.set(te.TEXTURE0),Ye.texture.bind($t,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),G.activeTexture.set(te.TEXTURE1),rt?(rt.texture.bind($t,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),bt=Math.pow(2,rt.tileID.overscaledZ-Ye.tileID.overscaledZ),Nt=[Ye.tileID.canonical.x*bt%1,Ye.tileID.canonical.y*bt%1]):Ye.texture.bind($t,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST);const St=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ke),Pt=St?Ke:null,Wt=Pt?Pt.posMatrix:_.transform.calculatePosMatrix(Ke.toUnwrapped(),Ge),mr=es(Wt,Nt||[0,0],bt||1,mt,M);ee instanceof N?me.draw(G,te.TRIANGLES,Re,en.disabled,be,Gr.disabled,mr,St,M.id,ee.boundsBuffer,_.quadTriangleIndexBuffer,ee.boundsSegments):me.draw(G,te.TRIANGLES,Re,Ae[Ke.overscaledZ],be,Gr.disabled,mr,St,M.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(i,c,p,g);break;case"background":(function(_,A,M,O){const G=M.paint.get("background-color"),te=M.paint.get("background-opacity");if(te===0)return;const ee=_.context,me=ee.gl,be=_.transform,Ae=be.tileSize,ze=M.paint.get("background-pattern");if(_.isPatternMissing(ze))return;const Ce=!ze&&G.a===1&&te===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Ce)return;const Ge=en.disabled,Ke=_.depthModeForSublayer(0,Ce==="opaque"?xr.ReadWrite:xr.ReadOnly),Re=_.colorModeForRenderPass(),Ye=_.useProgram(ze?"backgroundPattern":"background"),rt=O||be.coveringTiles({tileSize:Ae,terrain:_.style.map.terrain});ze&&(ee.activeTexture.set(me.TEXTURE0),_.imageManager.bind(_.context));const at=M.getCrossfadeParameters();for(const mt of rt){const bt=O?mt.posMatrix:_.transform.calculatePosMatrix(mt.toUnwrapped()),Nt=ze?zc(bt,te,_,ze,{tileID:mt,tileSize:Ae},at):Ff(bt,te,G),$t=_.style.map.terrain&&_.style.map.terrain.getTerrainData(mt);Ye.draw(ee,me.TRIANGLES,Ke,Ge,Re,Gr.disabled,Nt,$t,M.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(i,0,p,g);break;case"custom":(function(_,A,M){const O=_.context,G=M.implementation;if(_.renderPass==="offscreen"){const te=G.prerender;te&&(_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),te.call(G,O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),O.setStencilMode(en.disabled);const te=G.renderingMode==="3d"?new xr(_.context.gl.LEQUAL,xr.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,xr.ReadOnly);O.setDepthMode(te),G.render(O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState(),O.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,c,p,g,_){if(!p[0]&&!p[1])return i;const A=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(A){const G=Math.sin(A),te=Math.cos(A);p=[p[0]*te-p[1]*G,p[0]*G+p[1]*te]}const M=[_?p[0]:lr(c,p[0],this.transform.zoom),_?p[1]:lr(c,p[1],this.transform.zoom),0],O=new Float32Array(16);return u.H(O,i,M),O}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!c||!p}useProgram(i,c){this.cache=this.cache||{};const p=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Fu(this.context,Ka[i],c,Al[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}class Sa{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,p){const g=Math.pow(2,p),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(M=>{const O=1/(M=u.af([],M,i))[3]/c*g;return u.b0(M,M,[O,O,1/M[3],O])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(M=>{const O=function(me,be){var Ae=be[0],ze=be[1],Ce=be[2],Ge=Ae*Ae+ze*ze+Ce*Ce;return Ge>0&&(Ge=1/Math.sqrt(Ge)),me[0]=be[0]*Ge,me[1]=be[1]*Ge,me[2]=be[2]*Ge,me}([],function(me,be,Ae){var ze=be[0],Ce=be[1],Ge=be[2],Ke=Ae[0],Re=Ae[1],Ye=Ae[2];return me[0]=Ce*Ye-Ge*Re,me[1]=Ge*Ke-ze*Ye,me[2]=ze*Re-Ce*Ke,me}([],P([],_[M[0]],_[M[1]]),P([],_[M[2]],_[M[1]]))),G=-((te=O)[0]*(ee=_[M[1]])[0]+te[1]*ee[1]+te[2]*ee[2]);var te,ee;return O.concat(G)});return new Sa(_,A)}}class ss{constructor(i,c){this.min=i,this.max=c,this.center=function(p,g,_){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,_){return p[0]=g[0]+_[0],p[1]=g[1]+_[1],p[2]=g[2]+_[2],p}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],p=X(this.min),g=X(this.max);for(let _=0;_<c.length;_++)p[_]=c[_]?this.min[_]:this.center[_],g[_]=c[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new ss(p,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<i.planes.length;g++){const _=i.planes[g];let A=0;for(let M=0;M<c.length;M++)u.b1(_,c[M])>=0&&A++;if(A===0)return 0;A!==c.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let M=0;M<i.points.length;M++){const O=i.points[M][g]-this.min[g];_=Math.min(_,O),A=Math.max(A,O)}if(A<0||_>this.max[g]-this.min[g])return 0}return 1}}class ls{constructor(i=0,c=0,p=0,g=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=p,this.right=g}interpolate(i,c,p){return c.top!=null&&i.top!=null&&(this.top=u.z.number(i.top,c.top,p)),c.bottom!=null&&i.bottom!=null&&(this.bottom=u.z.number(i.bottom,c.bottom,p)),c.left!=null&&i.left!=null&&(this.left=u.z.number(i.left,c.left,p)),c.right!=null&&i.right!=null&&(this.right=u.z.number(i.right,c.right,p)),this}getCenter(i,c){const p=u.ac((this.left+i-this.right)/2,0,i),g=u.ac((this.top+c-this.bottom)/2,0,c);return new u.P(p,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new ls(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Ea=85.051129;class Bl{constructor(i,c,p,g,_){this.tileSize=512,this._renderWorldCopies=_===void 0||!!_,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ls,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const i=new Bl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.minElevationForCurrentTile=i.minElevationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-u.b2(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var p=new u.A(4);return u.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,_){var A=g[0],M=g[1],O=g[2],G=g[3],te=Math.sin(_),ee=Math.cos(_);p[0]=A*ee+O*te,p[1]=M*ee+G*te,p[2]=A*-te+O*ee,p[3]=M*-te+G*ee}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=u.ac(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,p){this._unmodified=!1,this._edgeInsets.interpolate(i,c,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new u.b3(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new u.P(0,0)),g=this.pointCoordinate(new u.P(this.width,0)),_=this.pointCoordinate(new u.P(this.width,this.height)),A=this.pointCoordinate(new u.P(0,this.height)),M=Math.floor(Math.min(p.x,g.x,_.x,A.x)),O=Math.floor(Math.max(p.x,g.x,_.x,A.x)),G=1;for(let te=M-G;te<=O+G;te++)te!==0&&c.push(new u.b3(te,i))}return c}coveringTiles(i){var c,p;let g=this.coveringZoomLevel(i);const _=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const A=this.pointCoordinate(this.getCameraPoint()),M=u.Y.fromLngLat(this.center),O=Math.pow(2,g),G=[O*A.x,O*A.y,0],te=[O*M.x,O*M.y,0],ee=Sa.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let me=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(me=g);const be=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,Ae=Re=>({aabb:new ss([Re*O,0,0],[(Re+1)*O,O,0]),zoom:0,x:0,y:0,wrap:Re,fullyVisible:!1}),ze=[],Ce=[],Ge=g,Ke=i.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let Re=1;Re<=3;Re++)ze.push(Ae(-Re)),ze.push(Ae(Re));for(ze.push(Ae(0));ze.length>0;){const Re=ze.pop(),Ye=Re.x,rt=Re.y;let at=Re.fullyVisible;if(!at){const St=Re.aabb.intersects(ee);if(St===0)continue;at=St===2}const mt=i.terrain?G:te,bt=Re.aabb.distanceX(mt),Nt=Re.aabb.distanceY(mt),$t=Math.max(Math.abs(bt),Math.abs(Nt));if(Re.zoom===Ge||$t>be+(1<<Ge-Re.zoom)-2&&Re.zoom>=me){const St=Ge-Re.zoom,Pt=G[0]-.5-(Ye<<St),Wt=G[1]-.5-(rt<<St);Ce.push({tileID:new u.Q(Re.zoom===Ge?Ke:Re.zoom,Re.wrap,Re.zoom,Ye,rt),distanceSq:L([te[0]-.5-Ye,te[1]-.5-rt]),tileDistanceToCamera:Math.sqrt(Pt*Pt+Wt*Wt)})}else for(let St=0;St<4;St++){const Pt=(Ye<<1)+St%2,Wt=(rt<<1)+(St>>1),mr=Re.zoom+1;let It=Re.aabb.quadrant(St);if(i.terrain){const Rt=new u.Q(mr,Re.wrap,mr,Pt,Wt),hr=i.terrain.getMinMaxElevation(Rt),tn=(c=hr.minElevation)!==null&&c!==void 0?c:this.elevation,Sr=(p=hr.maxElevation)!==null&&p!==void 0?p:this.elevation;It=new ss([It.min[0],It.min[1],tn],[It.max[0],It.max[1],Sr])}ze.push({aabb:It,zoom:mr,x:Pt,y:Wt,wrap:Re.wrap,fullyVisible:at})}}return Ce.sort((Re,Ye)=>Re.distanceSq-Ye.distanceSq).map(Re=>Re.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=u.ac(i.lat,-85.051129,Ea);return new u.P(u.N(i.lng)*this.worldSize,u.O(c)*this.worldSize)}unproject(i){return new u.Y(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const c=this.elevation,p=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,i),_=i.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-_))return;const A=p+c-_,M=Math.cos(this._pitch)*this.cameraToCenterDistance/A/u.b4(1,g.lat),O=this.scaleZoom(M/this.tileSize);this._elevation=_,this._center=g,this.zoom=O}setLocationAtPoint(i,c){const p=this.pointCoordinate(c),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(i),A=new u.Y(_.x-(p.x-g.x),_.y-(p.y-g.y));this.center=this.coordinateLocation(A),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),c.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return u.Y.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){const me=c.pointCoordinate(i);if(me!=null)return me}const p=[i.x,i.y,0,1],g=[i.x,i.y,1,1];u.af(p,p,this.pixelMatrixInverse),u.af(g,g,this.pixelMatrixInverse);const _=p[3],A=g[3],M=p[1]/_,O=g[1]/A,G=p[2]/_,te=g[2]/A,ee=G===te?0:(0-G)/(te-G);return new u.Y(u.z.number(p[0]/_,g[0]/A,ee)/this.worldSize,u.z.number(M,O,ee)/this.worldSize)}coordinatePoint(i,c=0,p=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,c,1];return u.af(g,g,p),new u.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new zt().extend(this.pointLocation(new u.P(0,i))).extend(this.pointLocation(new u.P(this.width,i))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new zt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Ea])}calculatePosMatrix(i,c=!1){const p=i.key,g=c?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const _=i.canonical,A=this.worldSize/this.zoomScale(_.z),M=_.x+Math.pow(2,_.z)*i.wrap,O=u.an(new Float64Array(16));return u.H(O,O,[M*A,_.y*A,0]),u.J(O,O,[A/u.W,A/u.W,1]),u.K(O,c?this.alignedProjMatrix:this.projMatrix,O),g[p]=new Float32Array(O),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(i,c){c=u.ac(+c,this.minZoom,this.maxZoom);const p={center:new u.M(i.lng,i.lat),zoom:c};let g=this.lngRange;if(!this._renderWorldCopies&&g===null){const Re=179.9999999999;g=[-Re,Re]}const _=this.tileSize*this.zoomScale(p.zoom);let A=0,M=_,O=0,G=_,te=0,ee=0;const{x:me,y:be}=this.size;if(this.latRange){const Re=this.latRange;A=u.O(Re[1])*_,M=u.O(Re[0])*_,M-A<be&&(te=be/(M-A))}g&&(O=u.b2(u.N(g[0])*_,0,_),G=u.b2(u.N(g[1])*_,0,_),G<O&&(G+=_),G-O<me&&(ee=me/(G-O)));const{x:Ae,y:ze}=this.project.call({worldSize:_},i);let Ce,Ge;const Ke=Math.max(ee||0,te||0);if(Ke){const Re=new u.P(ee?(G+O)/2:Ae,te?(M+A)/2:ze);return p.center=this.unproject.call({worldSize:_},Re).wrap(),p.zoom+=this.scaleZoom(Ke),p}if(this.latRange){const Re=be/2;ze-Re<A&&(Ge=A+Re),ze+Re>M&&(Ge=M-Re)}if(g){const Re=(O+G)/2;let Ye=Ae;this._renderWorldCopies&&(Ye=u.b2(Ae,Re-_/2,Re+_/2));const rt=me/2;Ye-rt<O&&(Ce=O+rt),Ye+rt>G&&(Ce=G-rt)}if(Ce!==void 0||Ge!==void 0){const Re=new u.P(Ce??Ae,Ge??ze);p.center=this.unproject.call({worldSize:_},Re).wrap()}return p}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:c,zoom:p}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=p,this._unmodified=i,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b4(1,this.center.lat)*this.worldSize;let g=u.an(new Float64Array(16));u.J(g,g,[this.width/2,-this.height/2,1]),u.H(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=u.an(new Float64Array(16)),u.J(g,g,[1,-1,1]),u.H(g,g,[-1,-1,0]),u.J(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),A=Math.min(this.elevation,this.minElevationForCurrentTile),M=_-A*this._pixelPerMeter/Math.cos(this._pitch),O=A<0?M:_,G=Math.PI/2+this._pitch,te=this._fov*(.5+i.y/this.height),ee=Math.sin(te)*O/Math.sin(u.ac(Math.PI-G-te,.01,Math.PI-.01)),me=this.getHorizon(),be=2*Math.atan(me/this.cameraToCenterDistance)*(.5+i.y/(2*me)),Ae=Math.sin(be)*O/Math.sin(u.ac(Math.PI-G-be,.01,Math.PI-.01)),ze=Math.min(ee,Ae),Ce=1.01*(Math.cos(Math.PI/2-this._pitch)*ze+O),Ge=this.height/50;g=new Float64Array(16),u.b5(g,this._fov,this.width/this.height,Ge,Ce),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,u.J(g,g,[1,-1,1]),u.H(g,g,[0,0,-this.cameraToCenterDistance]),u.b6(g,g,this._pitch),u.ad(g,g,this.angle),u.H(g,g,[-c,-p,0]),this.mercatorMatrix=u.J([],g,[this.worldSize,this.worldSize,this.worldSize]),u.J(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.K(new Float64Array(16),this.labelPlaneMatrix,g),u.H(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=u.as([],g),this.pixelMatrix3D=u.K(new Float64Array(16),this.labelPlaneMatrix,g);const Ke=this.width%2/2,Re=this.height%2/2,Ye=Math.cos(this.angle),rt=Math.sin(this.angle),at=c-Math.round(c)+Ye*Ke+rt*Re,mt=p-Math.round(p)+Ye*Re+rt*Ke,bt=new Float64Array(g);if(u.H(bt,bt,[at>.5?at-1:at,mt>.5?mt-1:mt,0]),this.alignedProjMatrix=bt,g=u.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new u.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.af(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let p=c.x,g=c.y,_=c.x,A=c.y;for(const M of i)p=Math.min(p,M.x),g=Math.min(g,M.y),_=Math.max(_,M.x),A=Math.max(A,M.y);return[new u.P(p,g),new u.P(_,g),new u.P(_,A),new u.P(p,A),new u.P(p,g)]}}lngLatToCameraDepth(i,c){const p=this.locationCoordinate(i),g=[p.x*this.worldSize,p.y*this.worldSize,c,1];return u.af(g,g,this.projMatrix),g[2]/g[3]}}function W(y,i){let c,p=!1,g=null,_=null;const A=()=>{g=null,p&&(y.apply(_,c),g=setTimeout(A,i),p=!1)};return(...M)=>(p=!0,_=this,c=M,g||A(),g)}class _e{constructor(i){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=W(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),A=Math.round(c.lng*_)/_,M=Math.round(c.lat*_)/_,O=this._map.getBearing(),G=this._map.getPitch();let te="";if(te+=i?`/${A}/${M}/${p}`:`${p}/${M}/${A}`,(O||G)&&(te+="/"+Math.round(10*O)/10),G&&(te+=`/${Math.round(G)}`),this._hashName){const ee=this._hashName;let me=!1;const be=window.location.hash.slice(1).split("&").map(Ae=>{const ze=Ae.split("=")[0];return ze===ee?(me=!0,`${ze}=${te}`):Ae}).filter(Ae=>Ae);return me||be.push(`${ee}=${te}`),`#${be.join("&")}`}return`#${te}`}}const $e={linearity:.3,easing:u.b7(0,0,.3,1)},st=u.e({deceleration:2500,maxSpeed:1400},$e),kt=u.e({deceleration:20,maxSpeed:1400},$e),Tt=u.e({deceleration:1e3,maxSpeed:360},$e),Kt=u.e({deceleration:1e3,maxSpeed:90},$e);class Jt{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=b.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)c.zoom+=_.zoomDelta||0,c.bearing+=_.bearingDelta||0,c.pitch+=_.pitchDelta||0,_.panDelta&&c.pan._add(_.panDelta),_.around&&(c.around=_.around),_.pinchAround&&(c.pinchAround=_.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(c.pan.mag()){const _=Or(c.pan.mag(),p,u.e({},st,i||{}));g.offset=c.pan.mult(_.amount/c.pan.mag()),g.center=this._map.transform.center,yr(g,_)}if(c.zoom){const _=Or(c.zoom,p,kt);g.zoom=this._map.transform.zoom+_.amount,yr(g,_)}if(c.bearing){const _=Or(c.bearing,p,Tt);g.bearing=this._map.transform.bearing+u.ac(_.amount,-179,179),yr(g,_)}if(c.pitch){const _=Or(c.pitch,p,Kt);g.pitch=this._map.transform.pitch+_.amount,yr(g,_)}if(g.zoom||g.bearing){const _=c.pinchAround===void 0?c.around:c.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),u.e(g,{noMoveStart:!0})}}function yr(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Or(y,i,c){const{maxSpeed:p,linearity:g,deceleration:_}=c,A=u.ac(y*g/(i/1e3),-p,p),M=Math.abs(A)/(_*g);return{easing:c.easing,duration:1e3*M,amount:A*(M/2)}}class vr extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p,g={}){const _=T.mousePos(c.getCanvas(),p),A=c.unproject(_);super(i,u.e({point:_,lngLat:A,originalEvent:p},g)),this._defaultPrevented=!1,this.target=c}}class $r extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){const g=i==="touchend"?p.changedTouches:p.touches,_=T.touchPos(c.getCanvasContainer(),g),A=_.map(O=>c.unproject(O)),M=_.reduce((O,G,te,ee)=>O.add(G.div(ee.length)),new u.P(0,0));super(i,{points:_,point:M,lngLats:A,lngLat:c.unproject(M),originalEvent:p}),this._defaultPrevented=!1}}class un extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class kn{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new un(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new vr(i.type,this._map,i))}mouseup(i){this._map.fire(new vr(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new vr(i.type,this._map,i))}dblclick(i){return this._firePreventable(new vr(i.type,this._map,i))}mouseover(i){this._map.fire(new vr(i.type,this._map,i))}mouseout(i){this._map.fire(new vr(i.type,this._map,i))}touchstart(i){return this._firePreventable(new $r(i.type,this._map,i))}touchmove(i){this._map.fire(new $r(i.type,this._map,i))}touchend(i){this._map.fire(new $r(i.type,this._map,i))}touchcancel(i){this._map.fire(new $r(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Un{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new vr(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new vr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new vr(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ti{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(u.P.convert(i),this._map.terrain)}}class Pi{constructor(i,c){this._map=i,this._tr=new Ti(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(T.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=T.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const _=Math.min(g.x,p.x),A=Math.max(g.x,p.x),M=Math.min(g.y,p.y),O=Math.max(g.y,p.y);T.setTransform(this._box,`translate(${_}px,${M}px)`),this._box.style.width=A-_+"px",this._box.style.height=O-M+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const p=this._startPos,g=c;if(this.reset(),T.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:i})),{cameraAnimation:_=>_.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new u.k(i,{originalEvent:c}))}}function Ji(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const c={};for(let p=0;p<y.length;p++)c[y[p].identifier]=i[p];return c}class Hu{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const _=new u.P(0,0);for(const A of g)_._add(A);return _.div(g.length)}(c),this.touches=Ji(p,c)))}touchmove(i,c,p){if(this.aborted||!this.centroid)return;const g=Ji(p,c);for(const _ in this.touches){const A=g[_];(!A||A.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(i,c,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Ta{constructor(i){this.singleTap=new Hu(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,p){this.singleTap.touchstart(i,c,p)}touchmove(i,c,p){this.singleTap.touchmove(i,c,p)}touchend(i,c,p){const g=this.singleTap.touchend(i,c,p);if(g){const _=i.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(g)<30;if(_&&A||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Pa{constructor(i){this._tr=new Ti(i),this._zoomIn=new Ta({numTouches:1,numTaps:2}),this._zoomOut=new Ta({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,p){this._zoomIn.touchstart(i,c,p),this._zoomOut.touchstart(i,c,p)}touchmove(i,c,p){this._zoomIn.touchmove(i,c,p),this._zoomOut.touchmove(i,c,p)}touchend(i,c,p){const g=this._zoomIn.touchend(i,c,p),_=this._zoomOut.touchend(i,c,p),A=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(g)},{originalEvent:i})}):_?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(_)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zs{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=c.length?c[0]:c;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&T.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Y0={0:1,2:2};class Kc{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=T.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,p){const g=Y0[p];return c.buttons===void 0||(c.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return T.mouseButton(i)===this._eventButton}}class fn{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Aa=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=i=>{i.preventDefault()}},Qi=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{const p=new Kc({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new Zs({clickTolerance:i,move:(g,_)=>({bearingDelta:(_.x-g.x)*c}),moveStateManager:p,enable:y,assignEvents:Aa})},Yc=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{const p=new Kc({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new Zs({clickTolerance:i,move:(g,_)=>({pitchDelta:(_.y-g.y)*c}),moveStateManager:p,enable:y,assignEvents:Aa})};class Nf{constructor(i,c){this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(i,c,p){return this._calculateTransform(i,c,p)}touchmove(i,c,p){if(this._active&&!(p.length<this.minTouchs()))return i.preventDefault(),this._calculateTransform(i,c,p)}touchend(i,c,p){this._calculateTransform(i,c,p),this._active&&p.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,p){p.length>0&&(this._active=!0);const g=Ji(p,c),_=new u.P(0,0),A=new u.P(0,0);let M=0;for(const G in g){const te=g[G],ee=this._touches[G];ee&&(_._add(te),A._add(te.sub(ee)),M++,g[G]=te)}if(this._touches=g,M<this.minTouchs()||!A.mag())return;const O=A.div(M);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(M),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Jc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,p){if(!this._firstTwoTouches)return;i.preventDefault();const[g,_]=this._firstTwoTouches,A=Ia(p,c,g),M=Ia(p,c,_);if(!A||!M)return;const O=this._aroundCenter?null:A.add(M).div(2);return this._move([A,M],O,i)}touchend(i,c,p){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,A=Ia(p,c,g),M=Ia(p,c,_);A&&M||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ia(y,i,c){for(let p=0;p<y.length;p++)if(y[p].identifier===c)return i[p]}function Dl(y,i){return Math.log(y/i)/Math.LN2}class Qc extends Jc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Dl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Dl(this._distance,p),pinchAround:c}}}function $f(y,i){return 180*y.angleWith(i)/Math.PI}class Uf extends Jc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c,p){const g=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$f(this._vector,g),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,p=$f(i,this._startVector);return Math.abs(p)<c}}function eh(y){return Math.abs(y.y)>Math.abs(y.x)}class Vf extends Jc{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,p){super.touchstart(i,c,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,eh(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),_=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,p){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,_=c.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const A=i.y>0==c.y>0;return eh(i)&&eh(c)&&A}}const rm={panStep:100,bearingStep:15,pitchStep:10};class us{constructor(i){this._tr=new Ti(i);const c=rm;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,p=0,g=0,_=0,A=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),_=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),_=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),A=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:M=>{const O=this._tr;M.easeTo({duration:300,easeId:"keyboardHandler",easing:nm,zoom:c?Math.round(O.zoom)+c*(i.shiftKey?2:1):O.zoom,bearing:O.bearing+p*this._bearingStep,pitch:O.pitch+g*this._pitchStep,offset:[-_*this._panStep,-A*this._panStep],center:O.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function nm(y){return y*(2-y)}const Gf=4.000244140625;class Wf{constructor(i,c){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new Ti(i),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!i[this._map.cooperativeGestures._bypassKey])return;let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=b.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%Gf==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=T.mousePos(this._map.getCanvas(),i),p=this._tr;this._around=c.y>p.transform.height/2-p.transform.getHorizon()?u.M.convert(this._aroundCenter?p.center:p.unproject(c)):u.M.convert(p.center),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>Gf?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&O!==0&&(O=1/O);const G=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(G*O))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,g=this._easing;let _,A=!1;if(this._type==="wheel"&&p&&g){const M=Math.min((b.now()-this._lastWheelEventTime)/200,1),O=g(M);_=u.z.number(p,c,O),M<1?this._frameId||(this._frameId=!0):A=!0}else _=c,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:_-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=u.b8;if(this._prevEase){const p=this._prevEase,g=(b.now()-p.start)/p.duration,_=p.easing(g+.01)-p.easing(g),A=.27/Math.sqrt(_*_+1e-4)*.01,M=Math.sqrt(.0729-A*A);c=u.b7(A,M,.25,1)}return this._prevEase={start:b.now(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Hf{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class im{constructor(i){this._tr=new Ti(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class om{constructor(){this._tap=new Ta({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,p){if(!this._swipePoint)if(this._tapTime){const g=c[0],_=i.timeStamp-this._tapTime<500,A=this._tapPoint.dist(g)<30;_&&A?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,c,p)}touchmove(i,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=c[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(i,c,p)}touchend(i,c,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(i,c,p);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zf{constructor(i,c,p){this._el=i,this._mousePan=c,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Nl{constructor(i,c,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class qf{constructor(i,c,p,g){this._el=i,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class wo{constructor(i,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=T.create("div","maplibregl-cooperative-gesture-screen",i);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=c,this._container.appendChild(g);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=p,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(T.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(i){this._onCooperativeGesture(i.touches.length===1)}wheel(i){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!i[this._bypassKey])}_onCooperativeGesture(i){this._enabled&&i&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const eo=y=>y.zoom||y.drag||y.pitch||y.rotate;class am extends u.k{}function bo(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Zu{constructor(i,c){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=g.type==="renderFrame"?void 0:g,M={needsRenderFrame:!1},O={},G={},te=g.touches,ee=te?this._getMapTouches(te):void 0,me=ee?T.touchPos(this._map.getCanvas(),ee):T.mousePos(this._map.getCanvas(),g);for(const{handlerName:ze,handler:Ce,allowed:Ge}of this._handlers){if(!Ce.isEnabled())continue;let Ke;this._blockedByActive(G,Ge,ze)?Ce.reset():Ce[_||g.type]&&(Ke=Ce[_||g.type](g,me,ee),this.mergeHandlerResult(M,O,Ke,ze,A),Ke&&Ke.needsRenderFrame&&this._triggerRenderFrame()),(Ke||Ce.isActive())&&(G[ze]=Ce)}const be={};for(const ze in this._previousActiveHandlers)G[ze]||(be[ze]=A);this._previousActiveHandlers=G,(Object.keys(be).length||bo(M))&&(this._changes.push([M,O,be]),this._triggerRenderFrame()),(Object.keys(G).length||bo(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ae}=M;Ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ae(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jt(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,A]of this._listeners)T.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[i,c,p]of this._listeners)T.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new kn(c,i));const g=c.boxZoom=new Pi(c,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const _=c.cooperativeGestures=new wo(c,i.cooperativeGestures);this._add("cooperativeGestures",_),i.cooperativeGestures&&_.enable();const A=new Pa(c),M=new im(c);c.doubleClickZoom=new Hf(M,A),this._add("tapZoom",A),this._add("clickZoom",M),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();const O=new om;this._add("tapDragZoom",O);const G=c.touchPitch=new Vf(c);this._add("touchPitch",G),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);const te=Qi(i),ee=Yc(i);c.dragRotate=new Nl(i,te,ee),this._add("mouseRotate",te,["mousePitch"]),this._add("mousePitch",ee,["mouseRotate"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();const me=(({enable:Ke,clickTolerance:Re})=>{const Ye=new Kc({checkCorrectEvent:rt=>T.mouseButton(rt)===0&&!rt.ctrlKey});return new Zs({clickTolerance:Re,move:(rt,at)=>({around:at,panDelta:at.sub(rt)}),activateOnStart:!0,moveStateManager:Ye,enable:Ke,assignEvents:Aa})})(i),be=new Nf(i,c);c.dragPan=new Zf(p,me,be),this._add("mousePan",me),this._add("touchPan",be,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);const Ae=new Uf,ze=new Qc;c.touchZoomRotate=new qf(p,ze,Ae,O),this._add("touchRotate",Ae,["touchPan","touchZoom"]),this._add("touchZoom",ze,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate);const Ce=c.scrollZoom=new Wf(c,()=>this._triggerRenderFrame());this._add("scrollZoom",Ce,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);const Ge=c.keyboard=new us(c);this._add("keyboard",Ge),i.interactive&&i.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Un(c))}_add(i,c,p){this._handlers.push({handlerName:i,handler:c,allowed:p}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!eo(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,p){for(const g in i)if(g!==p&&(!c||c.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const c=[];for(const p of i)this._el.contains(p.target)&&c.push(p);return c}mergeHandlerResult(i,c,p,g,_){if(!p)return;u.e(i,p);const A={handlerName:g,originalEvent:p.originalEvent||_};p.zoomDelta!==void 0&&(c.zoom=A),p.panDelta!==void 0&&(c.drag=A),p.pitchDelta!==void 0&&(c.pitch=A),p.bearingDelta!==void 0&&(c.rotate=A)}_applyChanges(){const i={},c={},p={};for(const[g,_,A]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new u.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),u.e(c,_),u.e(p,A);this._updateMapTransform(i,c,p),this._changes=[]}_updateMapTransform(i,c,p){const g=this._map,_=g._getTransformForUpdate(),A=g.terrain;if(!(bo(i)||A&&this._terrainMovement))return this._fireEvents(c,p,!0);let{panDelta:M,zoomDelta:O,bearingDelta:G,pitchDelta:te,around:ee,pinchAround:me}=i;me!==void 0&&(ee=me),g._stop(!0),ee=ee||g.transform.centerPoint;const be=_.pointLocation(M?ee.sub(M):ee);G&&(_.bearing+=G),te&&(_.pitch+=te),O&&(_.zoom+=O),A?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(M)):_.setLocationAtPoint(be,ee):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(be,ee)):_.setLocationAtPoint(be,ee),g._applyUpdatedTransform(_),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,p,!0)}_fireEvents(i,c,p){const g=eo(this._eventsInProgress),_=eo(i),A={};for(const ee in i){const{originalEvent:me}=i[ee];this._eventsInProgress[ee]||(A[`${ee}start`]=me),this._eventsInProgress[ee]=i[ee]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const ee in A)this._fireEvent(ee,A[ee]);_&&this._fireEvent("move",_.originalEvent);for(const ee in i){const{originalEvent:me}=i[ee];this._fireEvent(ee,me)}const M={};let O;for(const ee in this._eventsInProgress){const{handlerName:me,originalEvent:be}=this._eventsInProgress[ee];this._handlersById[me].isActive()||(delete this._eventsInProgress[ee],O=c[me]||be,M[`${ee}end`]=O)}for(const ee in M)this._fireEvent(ee,M[ee]);const G=eo(this._eventsInProgress),te=(g||_)&&!G;if(te&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),p&&te){this._updatingCamera=!0;const ee=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),me=be=>be!==0&&-this._bearingSnap<be&&be<this._bearingSnap;!ee||!ee.essential&&b.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:O})),me(this._map.getBearing())&&this._map.resetNorth()):(me(ee.bearing||this._map.getBearing())&&(ee.bearing=0),ee.freezeElevation=!0,this._map.easeTo(ee,{originalEvent:O})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new u.k(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new am("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class J0 extends u.E{constructor(i,c){super(),this._renderFrameCallback=()=>{const p=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.M(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,p){return i=u.P.convert(i).mult(-1),this.panTo(this.transform.center,u.e({offset:i},c),p)}panTo(i,c,p){return this.easeTo(u.e({center:i},c),p)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,p){return this.easeTo(u.e({zoom:i},c),p)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,p){return this.easeTo(u.e({bearing:i},c),p)}resetNorth(i,c){return this.rotateTo(0,u.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=zt.convert(i);const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,c)}_cameraForBoxAndBearing(i,c,p,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=u.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const St=g.padding;g.padding={top:St,bottom:St,right:St,left:St}}g.padding=u.e(_,g.padding);const A=this.transform,M=A.padding,O=new zt(i,c),G=A.project(O.getNorthWest()),te=A.project(O.getNorthEast()),ee=A.project(O.getSouthEast()),me=A.project(O.getSouthWest()),be=u.b9(-p),Ae=G.rotate(be),ze=te.rotate(be),Ce=ee.rotate(be),Ge=me.rotate(be),Ke=new u.P(Math.max(Ae.x,ze.x,Ge.x,Ce.x),Math.max(Ae.y,ze.y,Ge.y,Ce.y)),Re=new u.P(Math.min(Ae.x,ze.x,Ge.x,Ce.x),Math.min(Ae.y,ze.y,Ge.y,Ce.y)),Ye=Ke.sub(Re),rt=(A.width-(M.left+M.right+g.padding.left+g.padding.right))/Ye.x,at=(A.height-(M.top+M.bottom+g.padding.top+g.padding.bottom))/Ye.y;if(at<0||rt<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const mt=Math.min(A.scaleZoom(A.scale*Math.min(rt,at)),g.maxZoom),bt=u.P.convert(g.offset),Nt=new u.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(u.b9(p)),$t=bt.add(Nt).mult(A.scale/A.zoomScale(mt));return{center:A.unproject(G.add(ee).div(2).sub($t)),zoom:mt,bearing:p}}fitBounds(i,c,p){return this._fitInternal(this.cameraForBounds(i,c),c,p)}fitScreenCoordinates(i,c,p,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(i)),this.transform.pointLocation(u.P.convert(c)),p,g),g,_)}_fitInternal(i,c,p){return i?(delete(c=u.e(i,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(i,c){this.stop();const p=this._getTransformForUpdate();let g=!1,_=!1,A=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(g=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=u.M.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(_=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(A=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new u.k("movestart",c)).fire(new u.k("move",c)),g&&this.fire(new u.k("zoomstart",c)).fire(new u.k("zoom",c)).fire(new u.k("zoomend",c)),_&&this.fire(new u.k("rotatestart",c)).fire(new u.k("rotate",c)).fire(new u.k("rotateend",c)),A&&this.fire(new u.k("pitchstart",c)).fire(new u.k("pitch",c)).fire(new u.k("pitchend",c)),this.fire(new u.k("moveend",c))}calculateCameraOptionsFromTo(i,c,p,g=0){const _=u.Y.fromLngLat(i,c),A=u.Y.fromLngLat(p,g),M=A.x-_.x,O=A.y-_.y,G=A.z-_.z,te=Math.hypot(M,O,G);if(te===0)throw new Error("Can't calculate camera options with same From and To");const ee=Math.hypot(M,O),me=this.transform.scaleZoom(this.transform.cameraToCenterDistance/te/this.transform.tileSize),be=180*Math.atan2(M,-O)/Math.PI;let Ae=180*Math.acos(ee/te)/Math.PI;return Ae=G<0?90-Ae:90+Ae,{center:A.toLngLat(),zoom:me,pitch:Ae,bearing:be}}easeTo(i,c){var p;this._stop(!1,i.easeId),((i=u.e({offset:[0,0],duration:500,easing:u.b8},i)).animate===!1||!i.essential&&b.prefersReducedMotion)&&(i.duration=0);const g=this._getTransformForUpdate(),_=this.getZoom(),A=this.getBearing(),M=this.getPitch(),O=this.getPadding(),G="bearing"in i?this._normalizeBearing(i.bearing,A):A,te="pitch"in i?+i.pitch:M,ee="padding"in i?i.padding:g.padding,me=u.P.convert(i.offset);let be=g.centerPoint.add(me);const Ae=g.pointLocation(be),{center:ze,zoom:Ce}=g.getConstrained(u.M.convert(i.center||Ae),(p=i.zoom)!==null&&p!==void 0?p:_);this._normalizeCenter(ze);const Ge=g.project(Ae),Ke=g.project(ze).sub(Ge),Re=g.zoomScale(Ce-_);let Ye,rt;i.around&&(Ye=u.M.convert(i.around),rt=g.locationPoint(Ye));const at={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ce!==_,this._rotating=this._rotating||A!==G,this._pitching=this._pitching||te!==M,this._padding=!g.isPaddingEqual(ee),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,at),this.terrain&&this._prepareElevation(ze),this._ease(mt=>{if(this._zooming&&(g.zoom=u.z.number(_,Ce,mt)),this._rotating&&(g.bearing=u.z.number(A,G,mt)),this._pitching&&(g.pitch=u.z.number(M,te,mt)),this._padding&&(g.interpolatePadding(O,ee,mt),be=g.centerPoint.add(me)),this.terrain&&!i.freezeElevation&&this._updateElevation(mt),Ye)g.setLocationAtPoint(Ye,rt);else{const bt=g.zoomScale(g.zoom-_),Nt=Ce>_?Math.min(2,Re):Math.max(.5,Re),$t=Math.pow(Nt,1-mt),St=g.unproject(Ge.add(Ke.mult(mt*$t)).mult(bt));g.setLocationAtPoint(g.renderWorldCopies?St.wrap():St,be)}this._applyUpdatedTransform(g),this._fireMoveEvents(c)},mt=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c,mt)},i),this}_prepareEase(i,c,p={}){this._moving=!0,c||p.moving||this.fire(new u.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new u.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new u.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new u.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(c-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=u.z.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const c=i.clone(),{center:p,zoom:g,pitch:_,bearing:A,elevation:M}=this.transformCameraUpdate(c);p&&(c.center=p),g!==void 0&&(c.zoom=g),_!==void 0&&(c.pitch=_),A!==void 0&&(c.bearing=A),M!==void 0&&(c.elevation=M),this.transform.apply(c)}_fireMoveEvents(i){this.fire(new u.k("move",i)),this._zooming&&this.fire(new u.k("zoom",i)),this._rotating&&this.fire(new u.k("rotate",i)),this._pitching&&this.fire(new u.k("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const p=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new u.k("zoomend",i)),g&&this.fire(new u.k("rotateend",i)),_&&this.fire(new u.k("pitchend",i)),this.fire(new u.k("moveend",i))}flyTo(i,c){var p;if(!i.essential&&b.prefersReducedMotion){const Rt=u.L(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Rt,c)}this.stop(),i=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b8},i);const g=this._getTransformForUpdate(),_=this.getZoom(),A=this.getBearing(),M=this.getPitch(),O=this.getPadding(),G="bearing"in i?this._normalizeBearing(i.bearing,A):A,te="pitch"in i?+i.pitch:M,ee="padding"in i?i.padding:g.padding,me=u.P.convert(i.offset);let be=g.centerPoint.add(me);const Ae=g.pointLocation(be),{center:ze,zoom:Ce}=g.getConstrained(u.M.convert(i.center||Ae),(p=i.zoom)!==null&&p!==void 0?p:_);this._normalizeCenter(ze);const Ge=g.zoomScale(Ce-_),Ke=g.project(Ae),Re=g.project(ze).sub(Ke);let Ye=i.curve;const rt=Math.max(g.width,g.height),at=rt/Ge,mt=Re.mag();if("minZoom"in i){const Rt=u.ac(Math.min(i.minZoom,_,Ce),g.minZoom,g.maxZoom),hr=rt/g.zoomScale(Rt-_);Ye=Math.sqrt(hr/mt*2)}const bt=Ye*Ye;function Nt(Rt){const hr=(at*at-rt*rt+(Rt?-1:1)*bt*bt*mt*mt)/(2*(Rt?at:rt)*bt*mt);return Math.log(Math.sqrt(hr*hr+1)-hr)}function $t(Rt){return(Math.exp(Rt)-Math.exp(-Rt))/2}function St(Rt){return(Math.exp(Rt)+Math.exp(-Rt))/2}const Pt=Nt(!1);let Wt=function(Rt){return St(Pt)/St(Pt+Ye*Rt)},mr=function(Rt){return rt*((St(Pt)*($t(hr=Pt+Ye*Rt)/St(hr))-$t(Pt))/bt)/mt;var hr},It=(Nt(!0)-Pt)/Ye;if(Math.abs(mt)<1e-6||!isFinite(It)){if(Math.abs(rt-at)<1e-6)return this.easeTo(i,c);const Rt=at<rt?-1:1;It=Math.abs(Math.log(at/rt))/Ye,mr=()=>0,Wt=hr=>Math.exp(Rt*Ye*hr)}return i.duration="duration"in i?+i.duration:1e3*It/("screenSpeed"in i?+i.screenSpeed/Ye:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=A!==G,this._pitching=te!==M,this._padding=!g.isPaddingEqual(ee),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ze),this._ease(Rt=>{const hr=Rt*It,tn=1/Wt(hr);g.zoom=Rt===1?Ce:_+g.scaleZoom(tn),this._rotating&&(g.bearing=u.z.number(A,G,Rt)),this._pitching&&(g.pitch=u.z.number(M,te,Rt)),this._padding&&(g.interpolatePadding(O,ee,Rt),be=g.centerPoint.add(me)),this.terrain&&!i.freezeElevation&&this._updateElevation(Rt);const Sr=Rt===1?ze:g.unproject(Ke.add(Re.mult(mr(hr))).mult(tn));g.setLocationAtPoint(g.renderWorldCopies?Sr.wrap():Sr,be),this._applyUpdatedTransform(g),this._fireMoveEvents(c)},()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,c)}return i||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(i,c,p){p.animate===!1||p.duration===0?(i(1),c()):(this._easeStart=b.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=u.b2(i,-180,180);const p=Math.abs(i-c);return Math.abs(i-360-c)<p&&(i-=360),Math.abs(i+360-c)<p&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const p=i.lng-c.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(u.M.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}const sm={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class lm{constructor(i=sm){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const p=this._map._getUIString(`AttributionControl.${c}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const c=this._map.style.sourceCaches;for(const g in c){const _=c[g];if(_.used||_.usedForTerrain){const A=_.getSource();A.attribution&&i.indexOf(A.attribution)<0&&i.push(A.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,_)=>g.length-_.length),i=i.filter((g,_)=>{for(let A=_+1;A<i.length;A++)if(i[A].indexOf(g)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Xf{constructor(i={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl");const c=T.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class qu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const g of p)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var cs=u.X([{name:"a_pos3d",type:"Int16",components:3}]);class Ut extends u.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];const p={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),u.aO(g.posMatrix,0,u.W,0,u.W,0,1),this._tiles[g.key]=new Ee(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(i){for(const c in this._tiles){const p=this._tiles[c];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const c={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16),u.aO(_.posMatrix,0,u.W,0,u.W,0,1),c[p]=_}else if(g.canonical.isChildOf(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const A=g.canonical.z-i.canonical.z,M=g.canonical.x-(g.canonical.x>>A<<A),O=g.canonical.y-(g.canonical.y>>A<<A),G=u.W>>A;u.aO(_.posMatrix,0,G,0,G,0,1),u.H(_.posMatrix,_.posMatrix,[-M*G,-O*G,0]),c[p]=_}else if(i.canonical.isChildOf(g.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const A=i.canonical.z-g.canonical.z,M=i.canonical.x-(i.canonical.x>>A<<A),O=i.canonical.y-(i.canonical.y>>A<<A),G=u.W>>A;u.aO(_.posMatrix,0,u.W,0,u.W,0,1),u.H(_.posMatrix,_.posMatrix,[M*G,O*G,0]),u.J(_.posMatrix,_.posMatrix,[1/2**A,1/2**A,0]),c[p]=_}}return c}getSourceTile(i,c){const p=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!_||!_.dem)&&c)for(;g>=p.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(i.scaledTo(g--).key);return _}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class um{constructor(i,c,p){this.painter=i,this.sourceCache=new Ut(c),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,p,g=u.W){var _;if(!(c>=0&&c<g&&p>=0&&p<g))return 0;const A=this.getTerrainData(i),M=(_=A.tile)===null||_===void 0?void 0:_.dem;if(!M)return 0;const O=function(Ae,ze,Ce){var Ge=ze[0],Ke=ze[1];return Ae[0]=Ce[0]*Ge+Ce[4]*Ke+Ce[12],Ae[1]=Ce[1]*Ge+Ce[5]*Ke+Ce[13],Ae}([],[c/g*u.W,p/g*u.W],A.u_terrain_matrix),G=[O[0]*M.dim,O[1]*M.dim],te=Math.floor(G[0]),ee=Math.floor(G[1]),me=G[0]-te,be=G[1]-ee;return M.get(te,ee)*(1-me)*(1-be)+M.get(te+1,ee)*me*(1-be)+M.get(te,ee+1)*(1-me)*be+M.get(te+1,ee+1)*me*be}getElevationForLngLatZoom(i,c){const{tileID:p,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(p,g%u.W,_%u.W,u.W)}getElevation(i,c,p,g=u.W){return this.getDEMElevation(i,c,p,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,_=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new q(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new q(g,new u.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const g=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new q(g,c.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),c.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const p=c&&c+c.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?_=i.canonical.z-g:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=i.canonical.x-(i.canonical.x>>_<<_),M=i.canonical.y-(i.canonical.y>>_<<_),O=u.ba(new Float64Array(16),[1/(u.W<<_),1/(u.W<<_),0]);u.H(O,O,[A*u.W,M*u.W,0]),this._demMatrixCache[i.key]={matrix:O,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,p=c.width/devicePixelRatio,g=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new q(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new q(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,A=0;_<this._coordsTextureSize;_++)for(let M=0;M<this._coordsTextureSize;M++,A+=4)c[A+0]=255&M,c[A+1]=255&_,c[A+2]=M>>8<<4|_>>8,c[A+3]=0;const p=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),g=new q(i,p,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),p=this.painter.context,g=p.gl,_=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),A=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),M=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(_,M-A-1,1,1,g.RGBA,g.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null);const O=c[0]+(c[2]>>4<<8),G=c[1]+((15&c[2])<<8),te=this.coordsIndex[255-c[3]],ee=te&&this.sourceCache.getTileByID(te);if(!ee)return null;const me=this._coordsTextureSize,be=(1<<ee.tileID.canonical.z)*me;return new u.Y((ee.tileID.canonical.x*me+O)/be+ee.tileID.wrap,(ee.tileID.canonical.y*me+G)/be,this.getElevation(ee.tileID,O,G,me))}depthAtPoint(i){const c=new Uint8Array(4),p=this.painter.context,g=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,c=new u.bb,p=new u.aY,g=this.meshSize,_=u.W/g,A=g*g;for(let ee=0;ee<=g;ee++)for(let me=0;me<=g;me++)c.emplaceBack(me*_,ee*_,0);for(let ee=0;ee<A;ee+=g+1)for(let me=0;me<g;me++)p.emplaceBack(me+ee,g+me+ee+1,g+me+ee+2),p.emplaceBack(me+ee,g+me+ee+2,me+ee+1);const M=c.length,O=M+2*(g+1);for(const ee of[0,1])for(let me=0;me<=g;me++)for(const be of[0,1])c.emplaceBack(me*_,ee*u.W,be);for(let ee=0;ee<2*g;ee+=2)p.emplaceBack(O+ee,O+ee+1,O+ee+3),p.emplaceBack(O+ee,O+ee+3,O+ee+2),p.emplaceBack(M+ee,M+ee+3,M+ee+1),p.emplaceBack(M+ee,M+ee+2,M+ee+3);const G=c.length,te=G+2*(g+1);for(const ee of[0,1])for(let me=0;me<=g;me++)for(const be of[0,1])c.emplaceBack(ee*u.W,me*_,be);for(let ee=0;ee<2*g;ee+=2)p.emplaceBack(G+ee,G+ee+1,G+ee+3),p.emplaceBack(G+ee,G+ee+3,G+ee+2),p.emplaceBack(te+ee,te+ee+3,te+ee+1),p.emplaceBack(te+ee,te+ee+2,te+ee+3);return this._mesh={indexBuffer:i.createIndexBuffer(p),vertexBuffer:i.createVertexBuffer(c,cs.members),segments:u.$.simpleSegment(0,0,c.length,p.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*u.bc/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,c){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return c&&c.dem&&(p.minElevation=c.dem.min*this.exaggeration,p.maxElevation=c.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,c){const p=u.Y.fromLngLat(i.wrap()),g=(1<<c)*u.W,_=p.x*g,A=p.y*g,M=Math.floor(_/u.W),O=Math.floor(A/u.W);return{tileID:new u.Q(c,0,c,M,O),mercatorX:_,mercatorY:A}}}class Xu{constructor(i,c,p){this._context=i,this._size=c,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new q(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(p.texture),{id:i,fbo:c,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const ia={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class cm{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new Xu(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(c)),this._coordsDescendingInv={};for(const p in i.sourceCaches){this._coordsDescendingInv[p]={};const g=i.sourceCaches[p].getVisibleCoordinates();for(const _ of g){const A=this.terrain.sourceCache.getTerrainCoords(_);for(const M in A)this._coordsDescendingInv[p][M]||(this._coordsDescendingInv[p][M]=[]),this._coordsDescendingInv[p][M].push(A[M])}}this._coordsDescendingInvStr={};for(const p of i._order){const g=i._layers[p],_=g.source;if(ia[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const A in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][A]=this._coordsDescendingInv[_][A].map(M=>M.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][p.tileID.key];_&&_!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const c=i.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(ia[c]&&(this._prevType&&ia[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(ia[this._prevType]||ia[c]&&g){this._prevType=c;const _=this._stacks.length-1,A=this._stacks[_]||[];for(const M of this._renderableTiles){if(this.pool.isFull()&&(Hs(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(M),M.rtt[_]){const G=this.pool.getObjectForId(M.rtt[_].id);if(G.stamp===M.rtt[_].stamp){this.pool.useObject(G);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),M.rtt[_]={id:O.id,stamp:O.stamp},p.context.bindFramebuffer.set(O.fbo.framebuffer),p.context.clear({color:u.aP.transparent,stencil:0}),p.currentStencilSource=void 0;for(let G=0;G<A.length;G++){const te=p.style._layers[A[G]],ee=te.source?this._coordsDescendingInv[te.source][M.tileID.key]:[M.tileID];p.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),p._renderTileClippingMasks(te,ee),p.renderLayer(p,p.style.sourceCaches[te.source],te,ee),te.source&&(M.rttCoords[te.source]=this._coordsDescendingInvStr[te.source][M.tileID.key])}}return Hs(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ia[c]}return!1}}const Bt={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Kf=w,Q0={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:sm,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},hm=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},Yf={showCompass:!0,showZoom:!0,visualizePitch:!1};class fm{constructor(i,c,p=!1){this.mousedown=A=>{this.startMouse(u.e({},A,{ctrlKey:!0,preventDefault:()=>A.preventDefault()}),T.mousePos(this.element,A)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.moveMouse(A,T.mousePos(this.element,A))},this.mouseup=A=>{this.mouseRotate.dragEnd(A),this.mousePitch&&this.mousePitch.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,A.targetTouches)[0],this.startTouch(A,this._startPos),T.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,A.targetTouches)[0],this.moveTouch(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),_=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=Qi({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:A,clickTolerance:M,bearingDegreesPerPixelMoved:O=.8})=>{const G=new fn;return new Zs({clickTolerance:M,move:(te,ee)=>({bearingDelta:(ee.x-te.x)*O}),moveStateManager:G,enable:A,assignEvents:hm})})({clickTolerance:g,enable:!0}),this.map=i,p&&(this.mousePitch=Yc({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:A,clickTolerance:M,pitchDegreesPerPixelMoved:O=-.5})=>{const G=new fn;return new Zs({clickTolerance:M,move:(te,ee)=>({pitchDelta:(ee.y-te.y)*O}),moveStateManager:G,enable:A,assignEvents:hm})})({clickTolerance:_,enable:!0})),T.addEventListener(c,"mousedown",this.mousedown),T.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),T.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),T.disableDrag()}moveMouse(i,c){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(i,c)||{};_&&p.setPitch(p.getPitch()+_)}}moveTouch(i,c){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(i,c)||{};_&&p.setPitch(p.getPitch()+_)}}off(){const i=this.element;T.removeEventListener(i,"mousedown",this.mousedown),T.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend),T.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend)}}let hs;function dm(y,i,c){const p=new u.M(y.lng,y.lat);if(y=new u.M(y.lng,y.lat),i){const g=new u.M(y.lng-360,y.lat),_=new u.M(y.lng+360,y.lat),A=c.locationPoint(y).distSqr(i);c.locationPoint(g).distSqr(i)<A?y=g:c.locationPoint(_).distSqr(i)<A&&(y=_)}for(;Math.abs(y.lng-c.center.lng)>180;){const g=c.locationPoint(y);if(g.x>=0&&g.y>=0&&g.x<=c.width&&g.y<=c.height)break;y.lng>c.center.lng?y.lng-=360:y.lng+=360}return y.lng!==p.lng&&c.locationPoint(y).y>c.height/2-c.getHorizon()?y:p}const Jf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function fs(y,i,c){const p=y.classList;for(const g in Jf)p.remove(`maplibregl-${c}-anchor-${g}`);p.add(`maplibregl-${c}-anchor-${i}`)}class Kr extends u.E{constructor(i){if(super(),this._onKeyPress=c=>{const p=c.code,g=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=c=>{const p=c.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=c=>{var p;if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?dm(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${Jf[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${_}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=u.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");const c=T.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${p}px`),c.setAttributeNS(null,"width",`${g}px`),c.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const _=T.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const A=T.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const M=T.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ge of O){const Ke=T.createNS("http://www.w3.org/2000/svg","ellipse");Ke.setAttributeNS(null,"opacity","0.04"),Ke.setAttributeNS(null,"cx","10.5"),Ke.setAttributeNS(null,"cy","5.80029008"),Ke.setAttributeNS(null,"rx",Ge.rx),Ke.setAttributeNS(null,"ry",Ge.ry),M.appendChild(Ke)}const G=T.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"fill",this._color);const te=T.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),G.appendChild(te);const ee=T.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"opacity","0.25"),ee.setAttributeNS(null,"fill","#000000");const me=T.createNS("http://www.w3.org/2000/svg","path");me.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ee.appendChild(me);const be=T.createNS("http://www.w3.org/2000/svg","g");be.setAttributeNS(null,"transform","translate(6.0, 7.0)"),be.setAttributeNS(null,"fill","#FFFFFF");const Ae=T.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ze=T.createNS("http://www.w3.org/2000/svg","circle");ze.setAttributeNS(null,"fill","#000000"),ze.setAttributeNS(null,"opacity","0.25"),ze.setAttributeNS(null,"cx","5.5"),ze.setAttributeNS(null,"cy","5.5"),ze.setAttributeNS(null,"r","5.4999962");const Ce=T.createNS("http://www.w3.org/2000/svg","circle");Ce.setAttributeNS(null,"fill","#FFFFFF"),Ce.setAttributeNS(null,"cx","5.5"),Ce.setAttributeNS(null,"cy","5.5"),Ce.setAttributeNS(null,"r","5.4999962"),Ae.appendChild(ze),Ae.appendChild(Ce),A.appendChild(M),A.appendChild(G),A.appendChild(ee),A.appendChild(be),A.appendChild(Ae),c.appendChild(A),c.setAttributeNS(null,"height",p*this._scale+"px"),c.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(c),this._offset=u.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),fs(this._element,this._anchor,"marker"),i&&i.className)for(const c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=u.M.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var c,p;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const g=this._map,_=g.terrain.depthAtPoint(this._pos),A=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,A)-_<.006)return void(this._element.style.opacity=this._opacity);const M=-this._offset.y/g.transform._pixelPerMeter,O=Math.sin(g.getPitch()*Math.PI/180)*M,G=g.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),te=g.transform.lngLatToCameraDepth(this._lngLat,A+O)-G>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&te&&this._popup.remove(),this._element.style.opacity=te?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=u.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,c){return i===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const th={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let $l=0,Ul=!1;const pm={maxWidth:100,unit:"metric"};function Qf(y,i,c){const p=c&&c.maxWidth||100,g=y._container.clientHeight/2,_=y.unproject([0,g]),A=y.unproject([p,g]),M=_.distanceTo(A);if(c&&c.unit==="imperial"){const O=3.2808*M;O>5280?Ku(i,p,O/5280,y._getUIString("ScaleControl.Miles")):Ku(i,p,O,y._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Ku(i,p,M/1852,y._getUIString("ScaleControl.NauticalMiles")):M>=1e3?Ku(i,p,M/1e3,y._getUIString("ScaleControl.Kilometers")):Ku(i,p,M,y._getUIString("ScaleControl.Meters"))}function Ku(y,i,c,p){const g=function(_){const A=Math.pow(10,`${Math.floor(_)}`.length-1);let M=_/A;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:function(O){const G=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*G)/G}(M),A*M}(c);y.style.width=i*(g/c)+"px",y.innerHTML=`${g}&nbsp;${p}`}const oa={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},rh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Qt(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,y),"top-left":new u.P(i,i),"top-right":new u.P(-i,i),bottom:new u.P(0,-y),"bottom-left":new u.P(i,-i),"bottom-right":new u.P(-i,-i),left:new u.P(y,0),right:new u.P(-y,0)}}if(y instanceof u.P||Array.isArray(y)){const i=u.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:u.P.convert(y.center||[0,0]),top:u.P.convert(y.top||[0,0]),"top-left":u.P.convert(y["top-left"]||[0,0]),"top-right":u.P.convert(y["top-right"]||[0,0]),bottom:u.P.convert(y.bottom||[0,0]),"bottom-left":u.P.convert(y["bottom-left"]||[0,0]),"bottom-right":u.P.convert(y["bottom-right"]||[0,0]),left:u.P.convert(y.left||[0,0]),right:u.P.convert(y.right||[0,0])}}return Qt(new u.P(0,0))}const sr=w;d.AJAXError=u.bf,d.Evented=u.E,d.LngLat=u.M,d.MercatorCoordinate=u.Y,d.Point=u.P,d.addProtocol=u.bg,d.config=u.a,d.removeProtocol=u.bh,d.AttributionControl=lm,d.BoxZoomHandler=Pi,d.CanvasSource=xe,d.CooperativeGesturesHandler=wo,d.DoubleClickZoomHandler=Hf,d.DragPanHandler=Zf,d.DragRotateHandler=Nl,d.EdgeInsets=ls,d.FullscreenControl=class extends u.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var i;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=c==null?void 0:c.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=qt,d.GeolocateControl=class extends u.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const c=new u.M(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,g=this._map.getBearing(),_=u.e({bearing:g},this.options.fitBoundsOptions),A=zt.fromLngLat(c,p);this._map.fitBounds(A,_,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const c=new u.M(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Ul)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Kr({element:this._dotElement}),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Kr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")))})}},this.options=u.e({},th,y)}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return u._(this,arguments,void 0,function*(i=!1){if(hs!==void 0&&!i)return hs;if(window.navigator.permissions===void 0)return hs=!!window.navigator.geolocation,hs;try{hs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{hs=!!window.navigator.geolocation}return hs})}().then(i=>this._setupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,$l=0,Ul=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),c=y.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),c=y.getNorthEast(),p=i.distanceTo(c),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":$l--,Ul=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),$l++,$l>1?(y={maximumAge:6e5,timeout:0},Ul=!0):(y=this.options.positionOptions,Ul=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.Hash=_e,d.ImageSource=N,d.KeyboardHandler=us,d.LngLatBounds=zt,d.LogoControl=Xf,d.Map=class extends J0{constructor(y){if(u.bd.mark(u.be.create),(y=u.e({},Q0,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Bl(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._contextLost=i=>{i.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new qu,this._controls=[],this._mapId=u.a3(),this._locale=u.e({},Bt,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=V.addThrottleControl(()=>this.isMoving()),this._requestManager=new ae(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const c=W(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{i?c(p):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Zu(this,y),this._hash=y.hash&&new _e(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,u.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new lm(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new Xf,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new u.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new u.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new u.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,c,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,c,p)}resize(y){var i;const c=this._containerDimensions(),p=c[0],g=c[1],_=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,_),this.painter.resize(p,g,_),this.painter.overLimit()){const M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];const O=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,O),this.painter.resize(p,g,O)}this.transform.resize(p,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,g);const A=!this._moving;return A&&(this.stop(),this.fire(new u.k("movestart",y)).fire(new u.k("move",y))),this.fire(new u.k("resize",y)),A&&this.fire(new u.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:c,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),_=y*g,A=i*g;return Math.min(_>c?c/_:1,A>p?p/A:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(zt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(u.M.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(u.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,c){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:i,listener:c,delegates:{mousemove:_=>{const A=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];A.length?p||(p=!0,c.call(this,new vr(y,this,_.originalEvent,{features:A}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:i,listener:c,delegates:{mousemove:A=>{(this.getLayer(i)?this.queryRenderedFeatures(A.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,c.call(this,new vr(y,this,A.originalEvent)))},mouseout:A=>{p&&(p=!1,c.call(this,new vr(y,this,A.originalEvent)))}}}}{const p=g=>{const _=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];_.length&&(g.features=_,c.call(this,g),delete g.features)};return{layer:i,listener:c,delegates:{[y]:p}}}}on(y,i,c){if(c===void 0)return super.on(y,i);const p=this._createDelegatedListener(y,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(y,i,c){if(c===void 0)return super.once(y,i);const p=this._createDelegatedListener(y,i,c);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(y,i,c){return c===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const A=g[_];if(A.layer===i&&A.listener===c){for(const M in A.delegates)this.off(M,A.delegates[M]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let c;const p=y instanceof u.P||Array.isArray(y),g=p?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:y)||{},g instanceof u.P||typeof g[0]=="number")c=[u.P.convert(g)];else{const _=u.P.convert(g[0]),A=u.P.convert(g[1]);c=[_,new u.P(A.x,_.y),A,new u.P(_.x,A.y),_]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new Sl(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,c):this.style.loadJSON(y,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Sl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const c=this._requestManager.transformRequest(y,"Style");u.h(c,new AbortController).then(p=>{this._updateDiff(p.data,i)}).catch(p=>{p&&this.fire(new u.j(p))})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(c){u.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new u.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&i.reload();for(const c in this.style._layers){const p=this.style._layers[c];p.type==="hillshade"&&p.source===y.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new um(this.painter,i,y),this.painter.renderToTexture=new cm(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const c=y[i]._tiles;for(const p in c){const g=c[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,c={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:_,stretchY:A,content:M,textFitWidth:O,textFitHeight:G}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||u.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:te,height:ee,data:me}=i,be=i;return this.style.addImage(y,{data:new u.R({width:te,height:ee},new Uint8Array(me)),pixelRatio:p,stretchX:_,stretchY:A,content:M,textFitWidth:O,textFitHeight:G,sdf:g,version:0,userImage:be}),be.onAdd&&be.onAdd(this,y),this}}{const{width:te,height:ee,data:me}=b.getImageData(i);this.style.addImage(y,{data:new u.R({width:te,height:ee},me),pixelRatio:p,stretchX:_,stretchY:A,content:M,textFitWidth:O,textFitHeight:G,sdf:g,version:0})}}updateImage(y,i){const c=this.style.getImage(y);if(!c)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||u.b(i)?b.getImageData(i):i,{width:g,height:_,data:A}=p;if(g===void 0||_===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==c.data.width||_!==c.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const M=!(i instanceof HTMLImageElement||u.b(i));return c.data.replace(A,M),this.style.updateImage(y,c),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return V.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,c){return this.style.setLayerZoomRange(y,i,c),this._update(!0)}setFilter(y,i,c={}){return this.style.setFilter(y,i,c),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,c,p={}){return this.style.setPaintProperty(y,i,c,p),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,c,p={}){return this.style.setLayoutProperty(y,i,c,p),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,c,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,c=>{c||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=T.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),p=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],p);const g=this._controlContainer=T.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(A=>{_[A]=T.create("div",`maplibregl-ctrl-${A} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,i,c){this._canvas.width=Math.floor(c*y),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:y},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});const c=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!c){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new Fr(c,this.transform),R.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=b.now();this.style.zoomHistory.update(g,_);const A=new u.a8(g,{now:_,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),M=A.crossFadingFactor();M===1&&M===this._crossFadingFactor||(c=!0,this._crossFadingFactor=M),this.style.update(A)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bd.mark(u.be.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,u.bd.mark(u.be.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),V.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bd.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(y=>{u.bd.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Kf}getCameraTargetElevation(){return this.transform.elevation}},d.MapMouseEvent=vr,d.MapTouchEvent=$r,d.MapWheelEvent=un,d.Marker=Kr,d.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),c=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,c)=>{const p=this._map._getUIString(`NavigationControl.${c}`);i.title=p,i.setAttribute("aria-label",p)},this.options=u.e({},Yf,y),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),T.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),T.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new fm(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const c=T.create("button",y,this._container);return c.type="button",c.addEventListener("click",i),c}},d.Popup=class extends u.E{constructor(y){super(),this.remove=()=>(this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=T.create("div","maplibregl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?dm(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!i)return;const p=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor;const _=Qt(this.options.offset);if(!g){const M=this._container.offsetWidth,O=this._container.offsetHeight;let G;G=p.y+_.bottom.y<O?["top"]:p.y>this._map.transform.height-O?["bottom"]:[],p.x<M/2?G.push("left"):p.x>this._map.transform.width-M/2&&G.push("right"),g=G.length===0?"bottom":G.join("-")}let A=p.add(_[g]);this.options.subpixelPositioning||(A=A.round()),T.setTransform(this._container,`${Jf[g]} translate(${A.x}px,${A.y}px)`),fs(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(oa),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=u.M.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),c=document.createElement("body");let p;for(c.innerHTML=y;p=c.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(rh);y&&y.focus()}},d.RasterDEMTileSource=cr,d.RasterTileSource=wr,d.ScaleControl=class{constructor(y){this._onMove=()=>{Qf(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Qf(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},pm),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=Wf,d.Style=Sl,d.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=Vf,d.TwoFingersTouchRotateHandler=Uf,d.TwoFingersTouchZoomHandler=Qc,d.TwoFingersTouchZoomRotateHandler=qf,d.VectorTileSource=it,d.VideoSource=D,d.addSourceType=(y,i)=>u._(void 0,void 0,void 0,function*(){if(tt(y))throw new Error(`A source type called "${y}" already exists.`);((c,p)=>{Xe[c]=p})(y,i)}),d.clearPrewarmedResources=function(){const y=qe;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Ne),qe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return $().getRTLTextPluginStatus()},d.getVersion=function(){return sr},d.getWorkerCount=function(){return Ie.workerCount},d.getWorkerUrl=function(){return u.a.WORKER_URL},d.importScriptInWorkers=function(y){return xt().broadcast("IS",y)},d.prewarm=function(){ot().acquire(Ne)},d.setMaxParallelImageRequests=function(y){u.a.MAX_PARALLEL_IMAGE_REQUESTS=y},d.setRTLTextPlugin=function(y,i){return $().setRTLTextPlugin(y,i)},d.setWorkerCount=function(y){Ie.workerCount=y},d.setWorkerUrl=function(y){u.a.WORKER_URL=y}});var f=n;return f})})(BM);var NM=BM.exports;const $M=bf(NM),bL=KF({__proto__:null,default:$M},[NM]),SL="modulepreload",EL=function(e){return"/osm-address-editor-vite/"+e},mT={},TL=function(t,n,a){let l=Promise.resolve();if(n&&n.length>0){const f=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));l=Promise.all(n.map(w=>{if(w=EL(w),w in mT)return;mT[w]=!0;const E=w.endsWith(".css"),I=E?'[rel="stylesheet"]':"";if(!!a)for(let R=f.length-1;R>=0;R--){const z=f[R];if(z.href===w&&(!E||z.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${I}`))return;const T=document.createElement("link");if(T.rel=E?"stylesheet":SL,E||(T.as="script",T.crossOrigin=""),T.href=w,u&&T.setAttribute("nonce",u),document.head.appendChild(T),E)return new Promise((R,z)=>{T.addEventListener("load",R),T.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${w}`)))})}))}return l.then(()=>t()).catch(f=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=f,window.dispatchEvent(d),!d.defaultPrevented)throw f})},PL=vt.createContext(null);function AL(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,l=Array.isArray(t)?t[0]:t?t.x:0,f=Array.isArray(t)?t[1]:t?t.y:0;return n===l&&a===f}function Zo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Zo(e[n],t[n]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(const l of n)if(!t.hasOwnProperty(l)||!Zo(e[l],t[l]))return!1;return!0}return!1}function IL(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function gT(e,t){if(!e.getProjection)return;const n=e.getProjection(),a=t.getProjection();Zo(n,a)||t.setProjection(n)}function yT(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function vT(e,t){const n=t.viewState||t;let a=!1;if("longitude"in n&&"latitude"in n){const l=e.center;e.center=new l.constructor(n.longitude,n.latitude),a=a||l!==e.center}if("zoom"in n){const l=e.zoom;e.zoom=n.zoom,a=a||l!==e.zoom}if("bearing"in n){const l=e.bearing;e.bearing=n.bearing,a=a||l!==e.bearing}if("pitch"in n){const l=e.pitch;e.pitch=n.pitch,a=a||l!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(a=!0,e.padding=n.padding),a}const CL=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function _T(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const n=e.layers.map(a=>{let l=null;"interactive"in a&&(l=Object.assign({},a),delete l.interactive);const f=t[a.ref];if(f){l=l||Object.assign({},a),delete l.ref;for(const d of CL)d in f&&(l[d]=f[d])}return l||a});return{...e,layers:n}}var xT={};const wT={version:8,sources:{},layers:[]},bT={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},g_={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},ST={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},ML=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],kL=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class ff{constructor(t,n,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=l=>{const f=this.props[ST[l.type]];f?f(l):l.type==="error"&&console.error(l.error)},this._onPointerEvent=l=>{(l.type==="mousemove"||l.type==="mouseout")&&this._updateHover(l);const f=this.props[bT[l.type]];f&&(this.props.interactiveLayerIds&&l.type!=="mouseover"&&l.type!=="mouseout"&&(l.features=this._hoveredFeatures||this._queryRenderedFeatures(l.point)),f(l),delete l.features)},this._onCameraEvent=l=>{if(!this._internalUpdate){const f=this.props[g_[l.type]];f&&f(l)}l.type in this._deferredEvents&&(this._deferredEvents[l.type]=!1)},this._MapClass=t,this.props=n,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const n=this.props;this.props=t;const a=this._updateSettings(t,n);a&&this._createShadowTransform(this._map);const l=this._updateSize(t),f=this._updateViewState(t,!0);this._updateStyle(t,n),this._updateStyleComponents(t,n),this._updateHandlers(t,n),(a||l||f&&!this._map.isMoving())&&this.redraw()}static reuse(t,n){const a=ff.savedMaps.pop();if(!a)return null;const l=a.map,f=l.getContainer();for(n.className=f.className;f.childNodes.length>0;)n.appendChild(f.childNodes[0]);l._container=n;const d=l._resizeObserver;d&&(d.disconnect(),d.observe(n)),a.setProps({...t,styleDiffing:!1}),l.resize();const{initialViewState:u}=t;return u&&(u.bounds?l.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):a._updateViewState(u,!1)),l.isStyleLoaded()?l.fire("load"):l.once("styledata",()=>l.fire("load")),l._update(),a}_initialize(t){const{props:n}=this,{mapStyle:a=wT}=n,l={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||OL()||null,container:t,style:_T(a)},f=l.initialViewState||l.viewState||l;if(Object.assign(l,{center:[f.longitude||0,f.latitude||0],zoom:f.zoom||0,pitch:f.pitch||0,bearing:f.bearing||0}),n.gl){const I=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=I,n.gl)}const d=new this._MapClass(l);f.padding&&d.setPadding(f.padding),n.cursor&&(d.getCanvas().style.cursor=n.cursor),this._createShadowTransform(d);const u=d._render;d._render=I=>{this._inRender=!0,u.call(d,I),this._inRender=!1};const w=d._renderTaskQueue.run;d._renderTaskQueue.run=I=>{w.call(d._renderTaskQueue,I),this._onBeforeRepaint()},d.on("render",()=>this._onAfterRepaint());const E=d.fire;d.fire=this._fireEvent.bind(this,E),d.on("resize",()=>{this._renderTransform.resize(d.transform.width,d.transform.height)}),d.on("styledata",()=>{this._updateStyleComponents(this.props,{}),gT(d.transform,this._renderTransform)}),d.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const I in bT)d.on(I,this._onPointerEvent);for(const I in g_)d.on(I,this._onCameraEvent);for(const I in ST)d.on(I,this._onEvent);this._map=d}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),ff.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const n=IL(t.transform);t.painter.transform=n,this._renderTransform=n}_updateSize(t){const{viewState:n}=t;if(n){const a=this._map;if(n.width!==a.transform.width||n.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,n){if(this._internalUpdate)return!1;const a=this._map,l=this._renderTransform,{zoom:f,pitch:d,bearing:u}=l,w=a.isMoving();w&&(l.cameraElevationReference="sea");const E=vT(l,{...yT(a.transform),...t});if(w&&(l.cameraElevationReference="ground"),E&&n){const I=this._deferredEvents;I.move=!0,I.zoom||(I.zoom=f!==l.zoom),I.rotate||(I.rotate=u!==l.bearing),I.pitch||(I.pitch=d!==l.pitch)}return w||vT(a.transform,t),E}_updateSettings(t,n){const a=this._map;let l=!1;for(const f of ML)if(f in t&&!Zo(t[f],n[f])){l=!0;const d=a[`set${f[0].toUpperCase()}${f.slice(1)}`];d==null||d.call(a,t[f])}return l}_updateStyle(t,n){if(t.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==n.mapStyle){const{mapStyle:a=wT,styleDiffing:l=!0}=t,f={diff:l};return"localIdeographFontFamily"in t&&(f.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(_T(a),f),!0}return!1}_updateStyleComponents(t,n){const a=this._map;let l=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!Zo(t.light,n.light)&&(l=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!Zo(t.fog,n.fog)&&(l=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!Zo(t.terrain,n.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(l=!0,a.setTerrain(t.terrain))),l}_updateHandlers(t,n){var a,l;const f=this._map;let d=!1;for(const u of kL){const w=(a=t[u])!==null&&a!==void 0?a:!0,E=(l=n[u])!==null&&l!==void 0?l:!0;Zo(w,E)||(d=!0,w?f[u].enable(w):f[u].disable())}return d}_queryRenderedFeatures(t){const n=this._map,a=n.transform,{interactiveLayerIds:l=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(t,{layers:l.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=a}}_updateHover(t){var n;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const f=t.type,d=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,u=this._queryRenderedFeatures(t.point),w=u.length>0;!w&&d&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=u,w&&!d&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=f}else this._hoveredFeatures=null}_fireEvent(t,n,a){const l=this._map,f=l.transform,d=typeof n=="string"?n:n.type;return d==="move"&&this._updateViewState(this.props,!1),d in g_&&(typeof n=="object"&&(n.viewState=yT(f)),this._map.isMoving())?(l.transform=this._renderTransform,t.call(l,n,a),l.transform=f,l):(t.call(l,n,a),l)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const n=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{gT(this._renderTransform,n),t.transform=n}}}ff.savedMaps=[];function OL(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||xT.MapboxAccessToken}catch{}try{e=e||xT.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const FL=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function RL(e){if(!e)return null;const t=e.map,n={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const l=t.transform;t.transform=e.transform;const f=t.project(a);return t.transform=l,f},unproject:a=>{const l=t.transform;t.transform=e.transform;const f=t.unproject(a);return t.transform=l,f},queryTerrainElevation:(a,l)=>{const f=t.transform;t.transform=e.transform;const d=t.queryTerrainElevation(a,l);return t.transform=f,d},queryRenderedFeatures:(a,l)=>{const f=t.transform;t.transform=e.transform;const d=t.queryRenderedFeatures(a,l);return t.transform=f,d}};for(const a of jL(t))!(a in n)&&!FL.includes(a)&&(n[a]=t[a].bind(t));return n}function jL(e){const t=new Set;let n=e;for(;n;){for(const a of Object.getOwnPropertyNames(n))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);n=Object.getPrototypeOf(n)}return Array.from(t)}const LL=typeof document<"u"?vt.useLayoutEffect:vt.useEffect,zL=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function BL(e,t){for(const a of zL)a in t&&(e[a]=t[a]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;n&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(n,a=>{a&&console.error(a)},!0)}const Pf=vt.createContext(null);function DL(e,t,n){const a=vt.useContext(PL),[l,f]=vt.useState(null),d=vt.useRef(),{current:u}=vt.useRef({mapLib:null,map:null});vt.useEffect(()=>{const I=e.mapLib;let b=!0,T;return Promise.resolve(I||n).then(R=>{if(!b)return;if(!R)throw new Error("Invalid mapLib");const z="Map"in R?R:R.default;if(!z.Map)throw new Error("Invalid mapLib");if(BL(z,e),!z.supported||z.supported(e))e.reuseMaps&&(T=ff.reuse(e,d.current)),T||(T=new ff(z.Map,e,d.current)),u.map=RL(T),u.mapLib=z,f(T),a==null||a.onMapMount(u.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(R=>{const{onError:z}=e;z?z({type:"error",target:null,originalEvent:null,error:R}):console.error(R)}),()=>{b=!1,T&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?T.recycle():T.destroy())}},[]),LL(()=>{l&&l.setProps(e)}),vt.useImperativeHandle(t,()=>u.map,[l]);const w=vt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),E={height:"100%"};return vt.createElement("div",{id:e.id,ref:d,style:w},l&&vt.createElement(Pf.Provider,{value:u},vt.createElement("div",{"mapboxgl-children":"",style:E},e.children)))}const NL=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Ac(e,t){if(!e||!t)return;const n=e.style;for(const a in t){const l=t[a];Number.isFinite(l)&&!NL.test(a)?n[a]=`${l}px`:n[a]=l}}function $L(e,t){const{map:n,mapLib:a}=vt.useContext(Pf),l=vt.useRef({props:e});l.current.props=e;const f=vt.useMemo(()=>{let j=!1;vt.Children.forEach(e.children,Z=>{Z&&(j=!0)});const se={...e,element:j?document.createElement("div"):null},K=new a.Marker(se);return K.setLngLat([e.longitude,e.latitude]),K.getElement().addEventListener("click",Z=>{var V,ae;(ae=(V=l.current.props).onClick)===null||ae===void 0||ae.call(V,{type:"click",target:K,originalEvent:Z})}),K.on("dragstart",Z=>{var V,ae;const X=Z;X.lngLat=f.getLngLat(),(ae=(V=l.current.props).onDragStart)===null||ae===void 0||ae.call(V,X)}),K.on("drag",Z=>{var V,ae;const X=Z;X.lngLat=f.getLngLat(),(ae=(V=l.current.props).onDrag)===null||ae===void 0||ae.call(V,X)}),K.on("dragend",Z=>{var V,ae;const X=Z;X.lngLat=f.getLngLat(),(ae=(V=l.current.props).onDragEnd)===null||ae===void 0||ae.call(V,X)}),K},[]);vt.useEffect(()=>(f.addTo(n.getMap()),()=>{f.remove()}),[]);const{longitude:d,latitude:u,offset:w,style:E,draggable:I=!1,popup:b=null,rotation:T=0,rotationAlignment:R="auto",pitchAlignment:z="auto"}=e;return vt.useEffect(()=>{Ac(f.getElement(),E)},[E]),vt.useImperativeHandle(t,()=>f,[]),(f.getLngLat().lng!==d||f.getLngLat().lat!==u)&&f.setLngLat([d,u]),w&&!AL(f.getOffset(),w)&&f.setOffset(w),f.isDraggable()!==I&&f.setDraggable(I),f.getRotation()!==T&&f.setRotation(T),f.getRotationAlignment()!==R&&f.setRotationAlignment(R),f.getPitchAlignment()!==z&&f.setPitchAlignment(z),f.getPopup()!==b&&f.setPopup(b),mb.createPortal(e.children,f.getElement())}const UL=vt.memo(vt.forwardRef($L));function ET(e){return new Set(e?e.trim().split(/\s+/):[])}function VL(e,t){const{map:n,mapLib:a}=vt.useContext(Pf),l=vt.useMemo(()=>document.createElement("div"),[]),f=vt.useRef({props:e});f.current.props=e;const d=vt.useMemo(()=>{const u={...e},w=new a.Popup(u);return w.setLngLat([e.longitude,e.latitude]),w.once("open",E=>{var I,b;(b=(I=f.current.props).onOpen)===null||b===void 0||b.call(I,E)}),w},[]);if(vt.useEffect(()=>{const u=w=>{var E,I;(I=(E=f.current.props).onClose)===null||I===void 0||I.call(E,w)};return d.on("close",u),d.setDOMContent(l).addTo(n.getMap()),()=>{d.off("close",u),d.isOpen()&&d.remove()}},[]),vt.useEffect(()=>{Ac(d.getElement(),e.style)},[e.style]),vt.useImperativeHandle(t,()=>d,[]),d.isOpen()&&((d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!Zo(d.options.offset,e.offset)&&d.setOffset(e.offset),(d.options.anchor!==e.anchor||d.options.maxWidth!==e.maxWidth)&&(d.options.anchor=e.anchor,d.setMaxWidth(e.maxWidth)),d.options.className!==e.className)){const u=ET(d.options.className),w=ET(e.className);for(const E of u)w.has(E)||d.removeClassName(E);for(const E of w)u.has(E)||d.addClassName(E);d.options.className=e.className}return mb.createPortal(e.children,l)}vt.memo(vt.forwardRef(VL));function Wp(e,t,n,a){const l=vt.useContext(Pf),f=vt.useMemo(()=>e(l),[]);return vt.useEffect(()=>{const d=a||n||t,u=typeof t=="function"&&typeof n=="function"?t:null,w=typeof n=="function"?n:typeof t=="function"?t:null,{map:E}=l;return E.hasControl(f)||(E.addControl(f,d==null?void 0:d.position),u&&u(l)),()=>{w&&w(l),E.hasControl(f)&&E.removeControl(f)}},[]),f}function GL(e){const t=Wp(({mapLib:n})=>new n.AttributionControl(e),{position:e.position});return vt.useEffect(()=>{Ac(t._container,e.style)},[e.style]),null}vt.memo(GL);function WL(e){const t=Wp(({mapLib:n})=>new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return vt.useEffect(()=>{Ac(t._controlContainer,e.style)},[e.style]),null}vt.memo(WL);function HL(e,t){const n=vt.useRef({props:e}),a=Wp(({mapLib:l})=>{const f=new l.GeolocateControl(e),d=f._setupUI;return f._setupUI=u=>{f._container.hasChildNodes()||d(u)},f.on("geolocate",u=>{var w,E;(E=(w=n.current.props).onGeolocate)===null||E===void 0||E.call(w,u)}),f.on("error",u=>{var w,E;(E=(w=n.current.props).onError)===null||E===void 0||E.call(w,u)}),f.on("outofmaxbounds",u=>{var w,E;(E=(w=n.current.props).onOutOfMaxBounds)===null||E===void 0||E.call(w,u)}),f.on("trackuserlocationstart",u=>{var w,E;(E=(w=n.current.props).onTrackUserLocationStart)===null||E===void 0||E.call(w,u)}),f.on("trackuserlocationend",u=>{var w,E;(E=(w=n.current.props).onTrackUserLocationEnd)===null||E===void 0||E.call(w,u)}),f},{position:e.position});return n.current.props=e,vt.useImperativeHandle(t,()=>a,[]),vt.useEffect(()=>{Ac(a._container,e.style)},[e.style]),null}const ZL=vt.memo(vt.forwardRef(HL));function qL(e){const t=Wp(({mapLib:n})=>new n.NavigationControl(e),{position:e.position});return vt.useEffect(()=>{Ac(t._container,e.style)},[e.style]),null}const XL=vt.memo(qL);function KL(e){const t=Wp(({mapLib:f})=>new f.ScaleControl(e),{position:e.position}),n=vt.useRef(e),a=n.current;n.current=e;const{style:l}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),vt.useEffect(()=>{Ac(t._container,l)},[l]),null}vt.memo(KL);function Py(e,t){if(!e)throw new Error(t)}function YL(e,t,n,a){if(Py(n.id===a.id,"layer id changed"),Py(n.type===a.type,"layer type changed"),n.type==="custom"||a.type==="custom")return;const{layout:l={},paint:f={},filter:d,minzoom:u,maxzoom:w,beforeId:E}=n;if(E!==a.beforeId&&e.moveLayer(t,E),l!==a.layout){const I=a.layout||{};for(const b in l)Zo(l[b],I[b])||e.setLayoutProperty(t,b,l[b]);for(const b in I)l.hasOwnProperty(b)||e.setLayoutProperty(t,b,void 0)}if(f!==a.paint){const I=a.paint||{};for(const b in f)Zo(f[b],I[b])||e.setPaintProperty(t,b,f[b]);for(const b in I)f.hasOwnProperty(b)||e.setPaintProperty(t,b,void 0)}Zo(d,a.filter)||e.setFilter(t,d),(u!==a.minzoom||w!==a.maxzoom)&&e.setLayerZoomRange(t,u,w)}function JL(e,t,n){if(e.style&&e.style._loaded&&(!("source"in n)||e.getSource(n.source))){const a={...n,id:t};delete a.beforeId,e.addLayer(a,n.beforeId)}}let QL=0;function ez(e){const t=vt.useContext(Pf).map.getMap(),n=vt.useRef(e),[,a]=vt.useState(0),l=vt.useMemo(()=>e.id||`jsx-layer-${QL++}`,[]);if(vt.useEffect(()=>{if(t){const d=()=>a(u=>u+1);return t.on("styledata",d),d(),()=>{t.off("styledata",d),t.style&&t.style._loaded&&t.getLayer(l)&&t.removeLayer(l)}}},[t]),t&&t.style&&t.getLayer(l))try{YL(t,l,e,n.current)}catch(d){console.warn(d)}else JL(t,l,e);return n.current=e,null}let tz=0;function rz(e,t,n){if(e.style&&e.style._loaded){const a={...n};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function nz(e,t,n){Py(t.id===n.id,"source id changed"),Py(t.type===n.type,"source type changed");let a="",l=0;for(const d in t)d!=="children"&&d!=="id"&&!Zo(n[d],t[d])&&(a=d,l++);if(!l)return;const f=t.type;if(f==="geojson")e.setData(t.data);else if(f==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&l===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function iz(e){const t=vt.useContext(Pf).map.getMap(),n=vt.useRef(e),[,a]=vt.useState(0),l=vt.useMemo(()=>e.id||`jsx-source-${tz++}`,[]);vt.useEffect(()=>{if(t){const d=()=>setTimeout(()=>a(u=>u+1),0);return t.on("styledata",d),d(),()=>{var u;if(t.off("styledata",d),t.style&&t.style._loaded&&t.getSource(l)){const w=(u=t.getStyle())===null||u===void 0?void 0:u.layers;if(w)for(const E of w)E.source===l&&t.removeLayer(E.id);t.removeSource(l)}}}},[t]);let f=t&&t.style&&t.getSource(l);return f?nz(f,e,n.current):f=rz(t,l,e),n.current=e,f&&vt.Children.map(e.children,d=>d&&vt.cloneElement(d,{source:l}))||null}const oz=TL(()=>Promise.resolve().then(()=>bL),void 0),az=vt.forwardRef(function(t,n){return DL(t,n,oz)}),sz=UL,lz=XL,uz=ZL,cz=ez,hz=iz;function TT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TT(Object(n),!0).forEach(function(a){ri(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TT(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Ay(e){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ay(e)}function fz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PT(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function dz(e,t,n){return t&&PT(e.prototype,t),n&&PT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ri(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gb(e,t){return mz(e)||yz(e,t)||UM(e,t)||_z()}function Hp(e){return pz(e)||gz(e)||UM(e)||vz()}function pz(e){if(Array.isArray(e))return sx(e)}function mz(e){if(Array.isArray(e))return e}function gz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yz(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a=[],l=!0,f=!1,d,u;try{for(n=n.call(e);!(l=(d=n.next()).done)&&(a.push(d.value),!(t&&a.length===t));l=!0);}catch(w){f=!0,u=w}finally{try{!l&&n.return!=null&&n.return()}finally{if(f)throw u}}return a}}function UM(e,t){if(e){if(typeof e=="string")return sx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sx(e,t)}}function sx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function vz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var AT=function(){},yb={},VM={},GM=null,WM={mark:AT,measure:AT};try{typeof window<"u"&&(yb=window),typeof document<"u"&&(VM=document),typeof MutationObserver<"u"&&(GM=MutationObserver),typeof performance<"u"&&(WM=performance)}catch{}var xz=yb.navigator||{},IT=xz.userAgent,CT=IT===void 0?"":IT,bu=yb,gn=VM,MT=GM,ng=WM;bu.document;var xl=!!gn.documentElement&&!!gn.head&&typeof gn.addEventListener=="function"&&typeof gn.createElement=="function",HM=~CT.indexOf("MSIE")||~CT.indexOf("Trident/"),ig,og,ag,sg,lg,ml="___FONT_AWESOME___",lx=16,ZM="fa",qM="svg-inline--fa",wc="data-fa-i2svg",ux="data-fa-pseudo-element",wz="data-fa-pseudo-element-pending",vb="data-prefix",_b="data-icon",kT="fontawesome-i2svg",bz="async",Sz=["HTML","HEAD","STYLE","SCRIPT"],XM=function(){try{return!0}catch{return!1}}(),pn="classic",Bn="sharp",xb=[pn,Bn];function Zp(e){return new Proxy(e,{get:function(n,a){return a in n?n[a]:n[pn]}})}var Cp=Zp((ig={},ri(ig,pn,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),ri(ig,Bn,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),ig)),Mp=Zp((og={},ri(og,pn,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),ri(og,Bn,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),og)),kp=Zp((ag={},ri(ag,pn,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),ri(ag,Bn,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),ag)),Ez=Zp((sg={},ri(sg,pn,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),ri(sg,Bn,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),sg)),Tz=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,KM="fa-layers-text",Pz=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,Az=Zp((lg={},ri(lg,pn,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),ri(lg,Bn,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),lg)),YM=[1,2,3,4,5,6,7,8,9,10],Iz=YM.concat([11,12,13,14,15,16,17,18,19,20]),Cz=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],cc={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Op=new Set;Object.keys(Mp[pn]).map(Op.add.bind(Op));Object.keys(Mp[Bn]).map(Op.add.bind(Op));var Mz=[].concat(xb,Hp(Op),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",cc.GROUP,cc.SWAP_OPACITY,cc.PRIMARY,cc.SECONDARY]).concat(YM.map(function(e){return"".concat(e,"x")})).concat(Iz.map(function(e){return"w-".concat(e)})),rp=bu.FontAwesomeConfig||{};function kz(e){var t=gn.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function Oz(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(gn&&typeof gn.querySelector=="function"){var Fz=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];Fz.forEach(function(e){var t=gb(e,2),n=t[0],a=t[1],l=Oz(kz(n));l!=null&&(rp[a]=l)})}var JM={styleDefault:"solid",familyDefault:"classic",cssPrefix:ZM,replacementClass:qM,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};rp.familyPrefix&&(rp.cssPrefix=rp.familyPrefix);var df=tr(tr({},JM),rp);df.autoReplaceSvg||(df.observeMutations=!1);var or={};Object.keys(JM).forEach(function(e){Object.defineProperty(or,e,{enumerable:!0,set:function(n){df[e]=n,np.forEach(function(a){return a(or)})},get:function(){return df[e]}})});Object.defineProperty(or,"familyPrefix",{enumerable:!0,set:function(t){df.cssPrefix=t,np.forEach(function(n){return n(or)})},get:function(){return df.cssPrefix}});bu.FontAwesomeConfig=or;var np=[];function Rz(e){return np.push(e),function(){np.splice(np.indexOf(e),1)}}var tu=lx,Ps={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function jz(e){if(!(!e||!xl)){var t=gn.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=gn.head.childNodes,a=null,l=n.length-1;l>-1;l--){var f=n[l],d=(f.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(d)>-1&&(a=f)}return gn.head.insertBefore(t,a),e}}var Lz="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Fp(){for(var e=12,t="";e-- >0;)t+=Lz[Math.random()*62|0];return t}function Af(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function wb(e){return e.classList?Af(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function QM(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function zz(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,'="').concat(QM(e[n]),'" ')},"").trim()}function F0(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")},"")}function bb(e){return e.size!==Ps.size||e.x!==Ps.x||e.y!==Ps.y||e.rotate!==Ps.rotate||e.flipX||e.flipY}function Bz(e){var t=e.transform,n=e.containerWidth,a=e.iconWidth,l={transform:"translate(".concat(n/2," 256)")},f="translate(".concat(t.x*32,", ").concat(t.y*32,") "),d="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)"),w={transform:"".concat(f," ").concat(d," ").concat(u)},E={transform:"translate(".concat(a/2*-1," -256)")};return{outer:l,inner:w,path:E}}function Dz(e){var t=e.transform,n=e.width,a=n===void 0?lx:n,l=e.height,f=l===void 0?lx:l,d=e.startCentered,u=d===void 0?!1:d,w="";return u&&HM?w+="translate(".concat(t.x/tu-a/2,"em, ").concat(t.y/tu-f/2,"em) "):u?w+="translate(calc(-50% + ".concat(t.x/tu,"em), calc(-50% + ").concat(t.y/tu,"em)) "):w+="translate(".concat(t.x/tu,"em, ").concat(t.y/tu,"em) "),w+="scale(".concat(t.size/tu*(t.flipX?-1:1),", ").concat(t.size/tu*(t.flipY?-1:1),") "),w+="rotate(".concat(t.rotate,"deg) "),w}var Nz=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function ek(){var e=ZM,t=qM,n=or.cssPrefix,a=or.replacementClass,l=Nz;if(n!==e||a!==t){var f=new RegExp("\\.".concat(e,"\\-"),"g"),d=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");l=l.replace(f,".".concat(n,"-")).replace(d,"--".concat(n,"-")).replace(u,".".concat(a))}return l}var OT=!1;function y_(){or.autoAddCss&&!OT&&(jz(ek()),OT=!0)}var $z={mixout:function(){return{dom:{css:ek,insertCss:y_}}},hooks:function(){return{beforeDOMElementCreation:function(){y_()},beforeI2svg:function(){y_()}}}},gl=bu||{};gl[ml]||(gl[ml]={});gl[ml].styles||(gl[ml].styles={});gl[ml].hooks||(gl[ml].hooks={});gl[ml].shims||(gl[ml].shims=[]);var $a=gl[ml],tk=[],Uz=function e(){gn.removeEventListener("DOMContentLoaded",e),Iy=1,tk.map(function(t){return t()})},Iy=!1;xl&&(Iy=(gn.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(gn.readyState),Iy||gn.addEventListener("DOMContentLoaded",Uz));function Vz(e){xl&&(Iy?setTimeout(e,0):tk.push(e))}function qp(e){var t=e.tag,n=e.attributes,a=n===void 0?{}:n,l=e.children,f=l===void 0?[]:l;return typeof e=="string"?QM(e):"<".concat(t," ").concat(zz(a),">").concat(f.map(qp).join(""),"</").concat(t,">")}function FT(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var Gz=function(t,n){return function(a,l,f,d){return t.call(n,a,l,f,d)}},v_=function(t,n,a,l){var f=Object.keys(t),d=f.length,u=l!==void 0?Gz(n,l):n,w,E,I;for(a===void 0?(w=1,I=t[f[0]]):(w=0,I=a);w<d;w++)E=f[w],I=u(I,t[E],E,t);return I};function Wz(e){for(var t=[],n=0,a=e.length;n<a;){var l=e.charCodeAt(n++);if(l>=55296&&l<=56319&&n<a){var f=e.charCodeAt(n++);(f&64512)==56320?t.push(((l&1023)<<10)+(f&1023)+65536):(t.push(l),n--)}else t.push(l)}return t}function cx(e){var t=Wz(e);return t.length===1?t[0].toString(16):null}function Hz(e,t){var n=e.length,a=e.charCodeAt(t),l;return a>=55296&&a<=56319&&n>t+1&&(l=e.charCodeAt(t+1),l>=56320&&l<=57343)?(a-55296)*1024+l-56320+65536:a}function RT(e){return Object.keys(e).reduce(function(t,n){var a=e[n],l=!!a.icon;return l?t[a.iconName]=a.icon:t[n]=a,t},{})}function hx(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n.skipHooks,l=a===void 0?!1:a,f=RT(t);typeof $a.hooks.addPack=="function"&&!l?$a.hooks.addPack(e,RT(t)):$a.styles[e]=tr(tr({},$a.styles[e]||{}),f),e==="fas"&&hx("fa",t)}var ug,cg,hg,Uh=$a.styles,Zz=$a.shims,qz=(ug={},ri(ug,pn,Object.values(kp[pn])),ri(ug,Bn,Object.values(kp[Bn])),ug),Sb=null,rk={},nk={},ik={},ok={},ak={},Xz=(cg={},ri(cg,pn,Object.keys(Cp[pn])),ri(cg,Bn,Object.keys(Cp[Bn])),cg);function Kz(e){return~Mz.indexOf(e)}function Yz(e,t){var n=t.split("-"),a=n[0],l=n.slice(1).join("-");return a===e&&l!==""&&!Kz(l)?l:null}var sk=function(){var t=function(f){return v_(Uh,function(d,u,w){return d[w]=v_(u,f,{}),d},{})};rk=t(function(l,f,d){if(f[3]&&(l[f[3]]=d),f[2]){var u=f[2].filter(function(w){return typeof w=="number"});u.forEach(function(w){l[w.toString(16)]=d})}return l}),nk=t(function(l,f,d){if(l[d]=d,f[2]){var u=f[2].filter(function(w){return typeof w=="string"});u.forEach(function(w){l[w]=d})}return l}),ak=t(function(l,f,d){var u=f[2];return l[d]=d,u.forEach(function(w){l[w]=d}),l});var n="far"in Uh||or.autoFetchSvg,a=v_(Zz,function(l,f){var d=f[0],u=f[1],w=f[2];return u==="far"&&!n&&(u="fas"),typeof d=="string"&&(l.names[d]={prefix:u,iconName:w}),typeof d=="number"&&(l.unicodes[d.toString(16)]={prefix:u,iconName:w}),l},{names:{},unicodes:{}});ik=a.names,ok=a.unicodes,Sb=R0(or.styleDefault,{family:or.familyDefault})};Rz(function(e){Sb=R0(e.styleDefault,{family:or.familyDefault})});sk();function Eb(e,t){return(rk[e]||{})[t]}function Jz(e,t){return(nk[e]||{})[t]}function hc(e,t){return(ak[e]||{})[t]}function lk(e){return ik[e]||{prefix:null,iconName:null}}function Qz(e){var t=ok[e],n=Eb("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Su(){return Sb}var Tb=function(){return{prefix:null,iconName:null,rest:[]}};function R0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.family,a=n===void 0?pn:n,l=Cp[a][e],f=Mp[a][e]||Mp[a][l],d=e in $a.styles?e:null;return f||d||null}var jT=(hg={},ri(hg,pn,Object.keys(kp[pn])),ri(hg,Bn,Object.keys(kp[Bn])),hg);function j0(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.skipLookups,l=a===void 0?!1:a,f=(t={},ri(t,pn,"".concat(or.cssPrefix,"-").concat(pn)),ri(t,Bn,"".concat(or.cssPrefix,"-").concat(Bn)),t),d=null,u=pn;(e.includes(f[pn])||e.some(function(E){return jT[pn].includes(E)}))&&(u=pn),(e.includes(f[Bn])||e.some(function(E){return jT[Bn].includes(E)}))&&(u=Bn);var w=e.reduce(function(E,I){var b=Yz(or.cssPrefix,I);if(Uh[I]?(I=qz[u].includes(I)?Ez[u][I]:I,d=I,E.prefix=I):Xz[u].indexOf(I)>-1?(d=I,E.prefix=R0(I,{family:u})):b?E.iconName=b:I!==or.replacementClass&&I!==f[pn]&&I!==f[Bn]&&E.rest.push(I),!l&&E.prefix&&E.iconName){var T=d==="fa"?lk(E.iconName):{},R=hc(E.prefix,E.iconName);T.prefix&&(d=null),E.iconName=T.iconName||R||E.iconName,E.prefix=T.prefix||E.prefix,E.prefix==="far"&&!Uh.far&&Uh.fas&&!or.autoFetchSvg&&(E.prefix="fas")}return E},Tb());return(e.includes("fa-brands")||e.includes("fab"))&&(w.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(w.prefix="fad"),!w.prefix&&u===Bn&&(Uh.fass||or.autoFetchSvg)&&(w.prefix="fass",w.iconName=hc(w.prefix,w.iconName)||w.iconName),(w.prefix==="fa"||d==="fa")&&(w.prefix=Su()||"fas"),w}var e5=function(){function e(){fz(this,e),this.definitions={}}return dz(e,[{key:"add",value:function(){for(var n=this,a=arguments.length,l=new Array(a),f=0;f<a;f++)l[f]=arguments[f];var d=l.reduce(this._pullDefinitions,{});Object.keys(d).forEach(function(u){n.definitions[u]=tr(tr({},n.definitions[u]||{}),d[u]),hx(u,d[u]);var w=kp[pn][u];w&&hx(w,d[u]),sk()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,a){var l=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(l).map(function(f){var d=l[f],u=d.prefix,w=d.iconName,E=d.icon,I=E[2];n[u]||(n[u]={}),I.length>0&&I.forEach(function(b){typeof b=="string"&&(n[u][b]=E)}),n[u][w]=E}),n}}]),e}(),LT=[],Vh={},ef={},t5=Object.keys(ef);function r5(e,t){var n=t.mixoutsTo;return LT=e,Vh={},Object.keys(ef).forEach(function(a){t5.indexOf(a)===-1&&delete ef[a]}),LT.forEach(function(a){var l=a.mixout?a.mixout():{};if(Object.keys(l).forEach(function(d){typeof l[d]=="function"&&(n[d]=l[d]),Ay(l[d])==="object"&&Object.keys(l[d]).forEach(function(u){n[d]||(n[d]={}),n[d][u]=l[d][u]})}),a.hooks){var f=a.hooks();Object.keys(f).forEach(function(d){Vh[d]||(Vh[d]=[]),Vh[d].push(f[d])})}a.provides&&a.provides(ef)}),n}function fx(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),l=2;l<n;l++)a[l-2]=arguments[l];var f=Vh[e]||[];return f.forEach(function(d){t=d.apply(null,[t].concat(a))}),t}function bc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var l=Vh[e]||[];l.forEach(function(f){f.apply(null,n)})}function yl(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return ef[e]?ef[e].apply(null,t):void 0}function dx(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,n=e.prefix||Su();if(t)return t=hc(n,t)||t,FT(uk.definitions,n,t)||FT($a.styles,n,t)}var uk=new e5,n5=function(){or.autoReplaceSvg=!1,or.observeMutations=!1,bc("noAuto")},i5={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return xl?(bc("beforeI2svg",t),yl("pseudoElements2svg",t),yl("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot;or.autoReplaceSvg===!1&&(or.autoReplaceSvg=!0),or.observeMutations=!0,Vz(function(){a5({autoReplaceSvgRoot:n}),bc("watch",t)})}},o5={icon:function(t){if(t===null)return null;if(Ay(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:hc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var n=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=R0(t[0]);return{prefix:a,iconName:hc(a,n)||n}}if(typeof t=="string"&&(t.indexOf("".concat(or.cssPrefix,"-"))>-1||t.match(Tz))){var l=j0(t.split(" "),{skipLookups:!0});return{prefix:l.prefix||Su(),iconName:hc(l.prefix,l.iconName)||l.iconName}}if(typeof t=="string"){var f=Su();return{prefix:f,iconName:hc(f,t)||t}}}},Qo={noAuto:n5,config:or,dom:i5,parse:o5,library:uk,findIconDefinition:dx,toHtml:qp},a5=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot,a=n===void 0?gn:n;(Object.keys($a.styles).length>0||or.autoFetchSvg)&&xl&&or.autoReplaceSvg&&Qo.dom.i2svg({node:a})};function L0(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return qp(a)})}}),Object.defineProperty(e,"node",{get:function(){if(xl){var a=gn.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function s5(e){var t=e.children,n=e.main,a=e.mask,l=e.attributes,f=e.styles,d=e.transform;if(bb(d)&&n.found&&!a.found){var u=n.width,w=n.height,E={x:u/w/2,y:.5};l.style=F0(tr(tr({},f),{},{"transform-origin":"".concat(E.x+d.x/16,"em ").concat(E.y+d.y/16,"em")}))}return[{tag:"svg",attributes:l,children:t}]}function l5(e){var t=e.prefix,n=e.iconName,a=e.children,l=e.attributes,f=e.symbol,d=f===!0?"".concat(t,"-").concat(or.cssPrefix,"-").concat(n):f;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:tr(tr({},l),{},{id:d}),children:a}]}]}function Pb(e){var t=e.icons,n=t.main,a=t.mask,l=e.prefix,f=e.iconName,d=e.transform,u=e.symbol,w=e.title,E=e.maskId,I=e.titleId,b=e.extra,T=e.watchable,R=T===void 0?!1:T,z=a.found?a:n,j=z.width,se=z.height,K=l==="fak",Z=[or.replacementClass,f?"".concat(or.cssPrefix,"-").concat(f):""].filter(function(B){return b.classes.indexOf(B)===-1}).filter(function(B){return B!==""||!!B}).concat(b.classes).join(" "),V={children:[],attributes:tr(tr({},b.attributes),{},{"data-prefix":l,"data-icon":f,class:Z,role:b.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(j," ").concat(se)})},ae=K&&!~b.classes.indexOf("fa-fw")?{width:"".concat(j/se*16*.0625,"em")}:{};R&&(V.attributes[wc]=""),w&&(V.children.push({tag:"title",attributes:{id:V.attributes["aria-labelledby"]||"title-".concat(I||Fp())},children:[w]}),delete V.attributes.title);var X=tr(tr({},V),{},{prefix:l,iconName:f,main:n,mask:a,maskId:E,transform:d,symbol:u,styles:tr(tr({},ae),b.styles)}),U=a.found&&n.found?yl("generateAbstractMask",X)||{children:[],attributes:{}}:yl("generateAbstractIcon",X)||{children:[],attributes:{}},P=U.children,L=U.attributes;return X.children=P,X.attributes=L,u?l5(X):s5(X)}function zT(e){var t=e.content,n=e.width,a=e.height,l=e.transform,f=e.title,d=e.extra,u=e.watchable,w=u===void 0?!1:u,E=tr(tr(tr({},d.attributes),f?{title:f}:{}),{},{class:d.classes.join(" ")});w&&(E[wc]="");var I=tr({},d.styles);bb(l)&&(I.transform=Dz({transform:l,startCentered:!0,width:n,height:a}),I["-webkit-transform"]=I.transform);var b=F0(I);b.length>0&&(E.style=b);var T=[];return T.push({tag:"span",attributes:E,children:[t]}),f&&T.push({tag:"span",attributes:{class:"sr-only"},children:[f]}),T}function u5(e){var t=e.content,n=e.title,a=e.extra,l=tr(tr(tr({},a.attributes),n?{title:n}:{}),{},{class:a.classes.join(" ")}),f=F0(a.styles);f.length>0&&(l.style=f);var d=[];return d.push({tag:"span",attributes:l,children:[t]}),n&&d.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),d}var __=$a.styles;function px(e){var t=e[0],n=e[1],a=e.slice(4),l=gb(a,1),f=l[0],d=null;return Array.isArray(f)?d={tag:"g",attributes:{class:"".concat(or.cssPrefix,"-").concat(cc.GROUP)},children:[{tag:"path",attributes:{class:"".concat(or.cssPrefix,"-").concat(cc.SECONDARY),fill:"currentColor",d:f[0]}},{tag:"path",attributes:{class:"".concat(or.cssPrefix,"-").concat(cc.PRIMARY),fill:"currentColor",d:f[1]}}]}:d={tag:"path",attributes:{fill:"currentColor",d:f}},{found:!0,width:t,height:n,icon:d}}var c5={found:!1,width:512,height:512};function h5(e,t){!XM&&!or.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function mx(e,t){var n=t;return t==="fa"&&or.styleDefault!==null&&(t=Su()),new Promise(function(a,l){if(yl("missingIconAbstract"),n==="fa"){var f=lk(e)||{};e=f.iconName||e,t=f.prefix||t}if(e&&t&&__[t]&&__[t][e]){var d=__[t][e];return a(px(d))}h5(e,t),a(tr(tr({},c5),{},{icon:or.showMissingIcons&&e?yl("missingIconAbstract")||{}:{}}))})}var BT=function(){},gx=or.measurePerformance&&ng&&ng.mark&&ng.measure?ng:{mark:BT,measure:BT},Bd='FA "6.5.2"',f5=function(t){return gx.mark("".concat(Bd," ").concat(t," begins")),function(){return ck(t)}},ck=function(t){gx.mark("".concat(Bd," ").concat(t," ends")),gx.measure("".concat(Bd," ").concat(t),"".concat(Bd," ").concat(t," begins"),"".concat(Bd," ").concat(t," ends"))},Ab={begin:f5,end:ck},Bg=function(){};function DT(e){var t=e.getAttribute?e.getAttribute(wc):null;return typeof t=="string"}function d5(e){var t=e.getAttribute?e.getAttribute(vb):null,n=e.getAttribute?e.getAttribute(_b):null;return t&&n}function p5(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(or.replacementClass)}function m5(){if(or.autoReplaceSvg===!0)return Dg.replace;var e=Dg[or.autoReplaceSvg];return e||Dg.replace}function g5(e){return gn.createElementNS("http://www.w3.org/2000/svg",e)}function y5(e){return gn.createElement(e)}function hk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.ceFn,a=n===void 0?e.tag==="svg"?g5:y5:n;if(typeof e=="string")return gn.createTextNode(e);var l=a(e.tag);Object.keys(e.attributes||[]).forEach(function(d){l.setAttribute(d,e.attributes[d])});var f=e.children||[];return f.forEach(function(d){l.appendChild(hk(d,{ceFn:a}))}),l}function v5(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Dg={replace:function(t){var n=t[0];if(n.parentNode)if(t[1].forEach(function(l){n.parentNode.insertBefore(hk(l),n)}),n.getAttribute(wc)===null&&or.keepOriginalSource){var a=gn.createComment(v5(n));n.parentNode.replaceChild(a,n)}else n.remove()},nest:function(t){var n=t[0],a=t[1];if(~wb(n).indexOf(or.replacementClass))return Dg.replace(t);var l=new RegExp("".concat(or.cssPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var f=a[0].attributes.class.split(" ").reduce(function(u,w){return w===or.replacementClass||w.match(l)?u.toSvg.push(w):u.toNode.push(w),u},{toNode:[],toSvg:[]});a[0].attributes.class=f.toSvg.join(" "),f.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",f.toNode.join(" "))}var d=a.map(function(u){return qp(u)}).join(`
`);n.setAttribute(wc,""),n.innerHTML=d}};function NT(e){e()}function fk(e,t){var n=typeof t=="function"?t:Bg;if(e.length===0)n();else{var a=NT;or.mutateApproach===bz&&(a=bu.requestAnimationFrame||NT),a(function(){var l=m5(),f=Ab.begin("mutate");e.map(l),f(),n()})}}var Ib=!1;function dk(){Ib=!0}function yx(){Ib=!1}var Cy=null;function $T(e){if(MT&&or.observeMutations){var t=e.treeCallback,n=t===void 0?Bg:t,a=e.nodeCallback,l=a===void 0?Bg:a,f=e.pseudoElementsCallback,d=f===void 0?Bg:f,u=e.observeMutationsRoot,w=u===void 0?gn:u;Cy=new MT(function(E){if(!Ib){var I=Su();Af(E).forEach(function(b){if(b.type==="childList"&&b.addedNodes.length>0&&!DT(b.addedNodes[0])&&(or.searchPseudoElements&&d(b.target),n(b.target)),b.type==="attributes"&&b.target.parentNode&&or.searchPseudoElements&&d(b.target.parentNode),b.type==="attributes"&&DT(b.target)&&~Cz.indexOf(b.attributeName))if(b.attributeName==="class"&&d5(b.target)){var T=j0(wb(b.target)),R=T.prefix,z=T.iconName;b.target.setAttribute(vb,R||I),z&&b.target.setAttribute(_b,z)}else p5(b.target)&&l(b.target)})}}),xl&&Cy.observe(w,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function _5(){Cy&&Cy.disconnect()}function x5(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce(function(a,l){var f=l.split(":"),d=f[0],u=f.slice(1);return d&&u.length>0&&(a[d]=u.join(":").trim()),a},{})),n}function w5(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",l=j0(wb(e));return l.prefix||(l.prefix=Su()),t&&n&&(l.prefix=t,l.iconName=n),l.iconName&&l.prefix||(l.prefix&&a.length>0&&(l.iconName=Jz(l.prefix,e.innerText)||Eb(l.prefix,cx(e.innerText))),!l.iconName&&or.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(l.iconName=e.firstChild.data)),l}function b5(e){var t=Af(e.attributes).reduce(function(l,f){return l.name!=="class"&&l.name!=="style"&&(l[f.name]=f.value),l},{}),n=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return or.autoA11y&&(n?t["aria-labelledby"]="".concat(or.replacementClass,"-title-").concat(a||Fp()):(t["aria-hidden"]="true",t.focusable="false")),t}function S5(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ps,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function UT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=w5(e),a=n.iconName,l=n.prefix,f=n.rest,d=b5(e),u=fx("parseNodeAttributes",{},e),w=t.styleParser?x5(e):[];return tr({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:l,transform:Ps,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:f,styles:w,attributes:d}},u)}var E5=$a.styles;function pk(e){var t=or.autoReplaceSvg==="nest"?UT(e,{styleParser:!1}):UT(e);return~t.extra.classes.indexOf(KM)?yl("generateLayersText",e,t):yl("generateSvgReplacementMutation",e,t)}var Eu=new Set;xb.map(function(e){Eu.add("fa-".concat(e))});Object.keys(Cp[pn]).map(Eu.add.bind(Eu));Object.keys(Cp[Bn]).map(Eu.add.bind(Eu));Eu=Hp(Eu);function VT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!xl)return Promise.resolve();var n=gn.documentElement.classList,a=function(b){return n.add("".concat(kT,"-").concat(b))},l=function(b){return n.remove("".concat(kT,"-").concat(b))},f=or.autoFetchSvg?Eu:xb.map(function(I){return"fa-".concat(I)}).concat(Object.keys(E5));f.includes("fa")||f.push("fa");var d=[".".concat(KM,":not([").concat(wc,"])")].concat(f.map(function(I){return".".concat(I,":not([").concat(wc,"])")})).join(", ");if(d.length===0)return Promise.resolve();var u=[];try{u=Af(e.querySelectorAll(d))}catch{}if(u.length>0)a("pending"),l("complete");else return Promise.resolve();var w=Ab.begin("onTree"),E=u.reduce(function(I,b){try{var T=pk(b);T&&I.push(T)}catch(R){XM||R.name==="MissingIcon"&&console.error(R)}return I},[]);return new Promise(function(I,b){Promise.all(E).then(function(T){fk(T,function(){a("active"),a("complete"),l("pending"),typeof t=="function"&&t(),w(),I()})}).catch(function(T){w(),b(T)})})}function T5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;pk(e).then(function(n){n&&fk([n],t)})}function P5(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:dx(t||{}),l=n.mask;return l&&(l=(l||{}).icon?l:dx(l||{})),e(a,tr(tr({},n),{},{mask:l}))}}var A5=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.transform,l=a===void 0?Ps:a,f=n.symbol,d=f===void 0?!1:f,u=n.mask,w=u===void 0?null:u,E=n.maskId,I=E===void 0?null:E,b=n.title,T=b===void 0?null:b,R=n.titleId,z=R===void 0?null:R,j=n.classes,se=j===void 0?[]:j,K=n.attributes,Z=K===void 0?{}:K,V=n.styles,ae=V===void 0?{}:V;if(t){var X=t.prefix,U=t.iconName,P=t.icon;return L0(tr({type:"icon"},t),function(){return bc("beforeDOMElementCreation",{iconDefinition:t,params:n}),or.autoA11y&&(T?Z["aria-labelledby"]="".concat(or.replacementClass,"-title-").concat(z||Fp()):(Z["aria-hidden"]="true",Z.focusable="false")),Pb({icons:{main:px(P),mask:w?px(w.icon):{found:!1,width:null,height:null,icon:{}}},prefix:X,iconName:U,transform:tr(tr({},Ps),l),symbol:d,title:T,maskId:I,titleId:z,extra:{attributes:Z,styles:ae,classes:se}})})}},I5={mixout:function(){return{icon:P5(A5)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=VT,n.nodeCallback=T5,n}}},provides:function(t){t.i2svg=function(n){var a=n.node,l=a===void 0?gn:a,f=n.callback,d=f===void 0?function(){}:f;return VT(l,d)},t.generateSvgReplacementMutation=function(n,a){var l=a.iconName,f=a.title,d=a.titleId,u=a.prefix,w=a.transform,E=a.symbol,I=a.mask,b=a.maskId,T=a.extra;return new Promise(function(R,z){Promise.all([mx(l,u),I.iconName?mx(I.iconName,I.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(j){var se=gb(j,2),K=se[0],Z=se[1];R([n,Pb({icons:{main:K,mask:Z},prefix:u,iconName:l,transform:w,symbol:E,maskId:b,title:f,titleId:d,extra:T,watchable:!0})])}).catch(z)})},t.generateAbstractIcon=function(n){var a=n.children,l=n.attributes,f=n.main,d=n.transform,u=n.styles,w=F0(u);w.length>0&&(l.style=w);var E;return bb(d)&&(E=yl("generateAbstractTransformGrouping",{main:f,transform:d,containerWidth:f.width,iconWidth:f.width})),a.push(E||f.icon),{children:a,attributes:l}}}},C5={mixout:function(){return{layer:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=a.classes,f=l===void 0?[]:l;return L0({type:"layer"},function(){bc("beforeDOMElementCreation",{assembler:n,params:a});var d=[];return n(function(u){Array.isArray(u)?u.map(function(w){d=d.concat(w.abstract)}):d=d.concat(u.abstract)}),[{tag:"span",attributes:{class:["".concat(or.cssPrefix,"-layers")].concat(Hp(f)).join(" ")},children:d}]})}}}},M5={mixout:function(){return{counter:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=a.title,f=l===void 0?null:l,d=a.classes,u=d===void 0?[]:d,w=a.attributes,E=w===void 0?{}:w,I=a.styles,b=I===void 0?{}:I;return L0({type:"counter",content:n},function(){return bc("beforeDOMElementCreation",{content:n,params:a}),u5({content:n.toString(),title:f,extra:{attributes:E,styles:b,classes:["".concat(or.cssPrefix,"-layers-counter")].concat(Hp(u))}})})}}}},k5={mixout:function(){return{text:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=a.transform,f=l===void 0?Ps:l,d=a.title,u=d===void 0?null:d,w=a.classes,E=w===void 0?[]:w,I=a.attributes,b=I===void 0?{}:I,T=a.styles,R=T===void 0?{}:T;return L0({type:"text",content:n},function(){return bc("beforeDOMElementCreation",{content:n,params:a}),zT({content:n,transform:tr(tr({},Ps),f),title:u,extra:{attributes:b,styles:R,classes:["".concat(or.cssPrefix,"-layers-text")].concat(Hp(E))}})})}}},provides:function(t){t.generateLayersText=function(n,a){var l=a.title,f=a.transform,d=a.extra,u=null,w=null;if(HM){var E=parseInt(getComputedStyle(n).fontSize,10),I=n.getBoundingClientRect();u=I.width/E,w=I.height/E}return or.autoA11y&&!l&&(d.attributes["aria-hidden"]="true"),Promise.resolve([n,zT({content:n.innerHTML,width:u,height:w,transform:f,title:l,extra:d,watchable:!0})])}}},O5=new RegExp('"',"ug"),GT=[1105920,1112319];function F5(e){var t=e.replace(O5,""),n=Hz(t,0),a=n>=GT[0]&&n<=GT[1],l=t.length===2?t[0]===t[1]:!1;return{value:cx(l?t[0]:t),isSecondary:a||l}}function WT(e,t){var n="".concat(wz).concat(t.replace(":","-"));return new Promise(function(a,l){if(e.getAttribute(n)!==null)return a();var f=Af(e.children),d=f.filter(function(P){return P.getAttribute(ux)===t})[0],u=bu.getComputedStyle(e,t),w=u.getPropertyValue("font-family").match(Pz),E=u.getPropertyValue("font-weight"),I=u.getPropertyValue("content");if(d&&!w)return e.removeChild(d),a();if(w&&I!=="none"&&I!==""){var b=u.getPropertyValue("content"),T=~["Sharp"].indexOf(w[2])?Bn:pn,R=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(w[2])?Mp[T][w[2].toLowerCase()]:Az[T][E],z=F5(b),j=z.value,se=z.isSecondary,K=w[0].startsWith("FontAwesome"),Z=Eb(R,j),V=Z;if(K){var ae=Qz(j);ae.iconName&&ae.prefix&&(Z=ae.iconName,R=ae.prefix)}if(Z&&!se&&(!d||d.getAttribute(vb)!==R||d.getAttribute(_b)!==V)){e.setAttribute(n,V),d&&e.removeChild(d);var X=S5(),U=X.extra;U.attributes[ux]=t,mx(Z,R).then(function(P){var L=Pb(tr(tr({},X),{},{icons:{main:P,mask:Tb()},prefix:R,iconName:V,extra:U,watchable:!0})),B=gn.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(B,e.firstChild):e.appendChild(B),B.outerHTML=L.map(function(Q){return qp(Q)}).join(`
`),e.removeAttribute(n),a()}).catch(l)}else a()}else a()})}function R5(e){return Promise.all([WT(e,"::before"),WT(e,"::after")])}function j5(e){return e.parentNode!==document.head&&!~Sz.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(ux)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function HT(e){if(xl)return new Promise(function(t,n){var a=Af(e.querySelectorAll("*")).filter(j5).map(R5),l=Ab.begin("searchPseudoElements");dk(),Promise.all(a).then(function(){l(),yx(),t()}).catch(function(){l(),yx(),n()})})}var L5={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=HT,n}}},provides:function(t){t.pseudoElements2svg=function(n){var a=n.node,l=a===void 0?gn:a;or.searchPseudoElements&&HT(l)}}},ZT=!1,z5={mixout:function(){return{dom:{unwatch:function(){dk(),ZT=!0}}}},hooks:function(){return{bootstrap:function(){$T(fx("mutationObserverCallbacks",{}))},noAuto:function(){_5()},watch:function(n){var a=n.observeMutationsRoot;ZT?yx():$T(fx("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},qT=function(t){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,l){var f=l.toLowerCase().split("-"),d=f[0],u=f.slice(1).join("-");if(d&&u==="h")return a.flipX=!0,a;if(d&&u==="v")return a.flipY=!0,a;if(u=parseFloat(u),isNaN(u))return a;switch(d){case"grow":a.size=a.size+u;break;case"shrink":a.size=a.size-u;break;case"left":a.x=a.x-u;break;case"right":a.x=a.x+u;break;case"up":a.y=a.y-u;break;case"down":a.y=a.y+u;break;case"rotate":a.rotate=a.rotate+u;break}return a},n)},B5={mixout:function(){return{parse:{transform:function(n){return qT(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,a){var l=a.getAttribute("data-fa-transform");return l&&(n.transform=qT(l)),n}}},provides:function(t){t.generateAbstractTransformGrouping=function(n){var a=n.main,l=n.transform,f=n.containerWidth,d=n.iconWidth,u={transform:"translate(".concat(f/2," 256)")},w="translate(".concat(l.x*32,", ").concat(l.y*32,") "),E="scale(".concat(l.size/16*(l.flipX?-1:1),", ").concat(l.size/16*(l.flipY?-1:1),") "),I="rotate(".concat(l.rotate," 0 0)"),b={transform:"".concat(w," ").concat(E," ").concat(I)},T={transform:"translate(".concat(d/2*-1," -256)")},R={outer:u,inner:b,path:T};return{tag:"g",attributes:tr({},R.outer),children:[{tag:"g",attributes:tr({},R.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:tr(tr({},a.icon.attributes),R.path)}]}]}}}},x_={x:0,y:0,width:"100%",height:"100%"};function XT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function D5(e){return e.tag==="g"?e.children:[e]}var N5={hooks:function(){return{parseNodeAttributes:function(n,a){var l=a.getAttribute("data-fa-mask"),f=l?j0(l.split(" ").map(function(d){return d.trim()})):Tb();return f.prefix||(f.prefix=Su()),n.mask=f,n.maskId=a.getAttribute("data-fa-mask-id"),n}}},provides:function(t){t.generateAbstractMask=function(n){var a=n.children,l=n.attributes,f=n.main,d=n.mask,u=n.maskId,w=n.transform,E=f.width,I=f.icon,b=d.width,T=d.icon,R=Bz({transform:w,containerWidth:b,iconWidth:E}),z={tag:"rect",attributes:tr(tr({},x_),{},{fill:"white"})},j=I.children?{children:I.children.map(XT)}:{},se={tag:"g",attributes:tr({},R.inner),children:[XT(tr({tag:I.tag,attributes:tr(tr({},I.attributes),R.path)},j))]},K={tag:"g",attributes:tr({},R.outer),children:[se]},Z="mask-".concat(u||Fp()),V="clip-".concat(u||Fp()),ae={tag:"mask",attributes:tr(tr({},x_),{},{id:Z,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[z,K]},X={tag:"defs",children:[{tag:"clipPath",attributes:{id:V},children:D5(T)},ae]};return a.push(X,{tag:"rect",attributes:tr({fill:"currentColor","clip-path":"url(#".concat(V,")"),mask:"url(#".concat(Z,")")},x_)}),{children:a,attributes:l}}}},$5={provides:function(t){var n=!1;bu.matchMedia&&(n=bu.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],l={fill:"currentColor"},f={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:tr(tr({},l),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var d=tr(tr({},f),{},{attributeName:"opacity"}),u={tag:"circle",attributes:tr(tr({},l),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||u.children.push({tag:"animate",attributes:tr(tr({},f),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:tr(tr({},d),{},{values:"1;0;1;1;0;1;"})}),a.push(u),a.push({tag:"path",attributes:tr(tr({},l),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:tr(tr({},d),{},{values:"1;0;0;0;0;1;"})}]}),n||a.push({tag:"path",attributes:tr(tr({},l),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:tr(tr({},d),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},U5={hooks:function(){return{parseNodeAttributes:function(n,a){var l=a.getAttribute("data-fa-symbol"),f=l===null?!1:l===""?!0:l;return n.symbol=f,n}}}},V5=[$z,I5,C5,M5,k5,L5,z5,B5,N5,$5,U5];r5(V5,{mixoutsTo:Qo});Qo.noAuto;Qo.config;Qo.library;Qo.dom;var vx=Qo.parse;Qo.findIconDefinition;Qo.toHtml;var G5=Qo.icon;Qo.layer;Qo.text;Qo.counter;var mk={exports:{}},W5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",H5=W5,Z5=H5;function gk(){}function yk(){}yk.resetWarningCache=gk;var q5=function(){function e(a,l,f,d,u,w){if(w!==Z5){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:yk,resetWarningCache:gk};return n.PropTypes=n,n};mk.exports=q5();var X5=mk.exports;const Rr=bf(X5);function KT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function _s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KT(Object(n),!0).forEach(function(a){Gh(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KT(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function My(e){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},My(e)}function Gh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K5(e,t){if(e==null)return{};var n={},a=Object.keys(e),l,f;for(f=0;f<a.length;f++)l=a[f],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function Y5(e,t){if(e==null)return{};var n=K5(e,t),a,l;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(l=0;l<f.length;l++)a=f[l],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function _x(e){return J5(e)||Q5(e)||e6(e)||t6()}function J5(e){if(Array.isArray(e))return xx(e)}function Q5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function e6(e,t){if(e){if(typeof e=="string")return xx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xx(e,t)}}function xx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function t6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r6(e){var t,n=e.beat,a=e.fade,l=e.beatFade,f=e.bounce,d=e.shake,u=e.flash,w=e.spin,E=e.spinPulse,I=e.spinReverse,b=e.pulse,T=e.fixedWidth,R=e.inverse,z=e.border,j=e.listItem,se=e.flip,K=e.size,Z=e.rotation,V=e.pull,ae=(t={"fa-beat":n,"fa-fade":a,"fa-beat-fade":l,"fa-bounce":f,"fa-shake":d,"fa-flash":u,"fa-spin":w,"fa-spin-reverse":I,"fa-spin-pulse":E,"fa-pulse":b,"fa-fw":T,"fa-inverse":R,"fa-border":z,"fa-li":j,"fa-flip":se===!0,"fa-flip-horizontal":se==="horizontal"||se==="both","fa-flip-vertical":se==="vertical"||se==="both"},Gh(t,"fa-".concat(K),typeof K<"u"&&K!==null),Gh(t,"fa-rotate-".concat(Z),typeof Z<"u"&&Z!==null&&Z!==0),Gh(t,"fa-pull-".concat(V),typeof V<"u"&&V!==null),Gh(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(ae).map(function(X){return ae[X]?X:null}).filter(function(X){return X})}function n6(e){return e=e-0,e===e}function vk(e){return n6(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,n){return n?n.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var i6=["style"];function o6(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a6(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,n){var a=n.indexOf(":"),l=vk(n.slice(0,a)),f=n.slice(a+1).trim();return l.startsWith("webkit")?t[o6(l)]=f:t[l]=f,t},{})}function _k(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(w){return _k(e,w)}),l=Object.keys(t.attributes||{}).reduce(function(w,E){var I=t.attributes[E];switch(E){case"class":w.attrs.className=I,delete t.attributes.class;break;case"style":w.attrs.style=a6(I);break;default:E.indexOf("aria-")===0||E.indexOf("data-")===0?w.attrs[E.toLowerCase()]=I:w.attrs[vk(E)]=I}return w},{attrs:{}}),f=n.style,d=f===void 0?{}:f,u=Y5(n,i6);return l.attrs.style=_s(_s({},l.attrs.style),d),e.apply(void 0,[t.tag,_s(_s({},l.attrs),u)].concat(_x(a)))}var xk=!1;try{xk=!0}catch{}function s6(){if(!xk&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function YT(e){if(e&&My(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(vx.icon)return vx.icon(e);if(e===null)return null;if(e&&My(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function w_(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Gh({},e,t):{}}var JT={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},_u=Ew.forwardRef(function(e,t){var n=_s(_s({},JT),e),a=n.icon,l=n.mask,f=n.symbol,d=n.className,u=n.title,w=n.titleId,E=n.maskId,I=YT(a),b=w_("classes",[].concat(_x(r6(n)),_x((d||"").split(" ")))),T=w_("transform",typeof n.transform=="string"?vx.transform(n.transform):n.transform),R=w_("mask",YT(l)),z=G5(I,_s(_s(_s(_s({},b),T),R),{},{symbol:f,title:u,titleId:w,maskId:E}));if(!z)return s6("Could not find icon",I),null;var j=z.abstract,se={ref:t};return Object.keys(n).forEach(function(K){JT.hasOwnProperty(K)||(se[K]=n[K])}),l6(j[0],se)});_u.displayName="FontAwesomeIcon";_u.propTypes={beat:Rr.bool,border:Rr.bool,beatFade:Rr.bool,bounce:Rr.bool,className:Rr.string,fade:Rr.bool,flash:Rr.bool,mask:Rr.oneOfType([Rr.object,Rr.array,Rr.string]),maskId:Rr.string,fixedWidth:Rr.bool,inverse:Rr.bool,flip:Rr.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Rr.oneOfType([Rr.object,Rr.array,Rr.string]),listItem:Rr.bool,pull:Rr.oneOf(["right","left"]),pulse:Rr.bool,rotation:Rr.oneOf([0,90,180,270]),shake:Rr.bool,size:Rr.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Rr.bool,spinPulse:Rr.bool,spinReverse:Rr.bool,symbol:Rr.oneOfType([Rr.bool,Rr.string]),title:Rr.string,titleId:Rr.string,transform:Rr.oneOfType([Rr.string,Rr.object]),swapOpacity:Rr.bool};var l6=_k.bind(null,Ew.createElement),u6={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},wx={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},c6={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"]},h6=c6;function fg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wk={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){return function(){function n(a,l,f){function d(E,I){if(!l[E]){if(!a[E]){var b=typeof fg=="function"&&fg;if(!I&&b)return b(E,!0);if(u)return u(E,!0);var T=new Error("Cannot find module '"+E+"'");throw T.code="MODULE_NOT_FOUND",T}var R=l[E]={exports:{}};a[E][0].call(R.exports,function(z){var j=a[E][1][z];return d(j||z)},R,R.exports,n,a,l,f)}return l[E].exports}for(var u=typeof fg=="function"&&fg,w=0;w<f.length;w++)d(f[w]);return d}return n}()({1:[function(n,a,l){l.byteLength=T,l.toByteArray=z,l.fromByteArray=K;for(var f=[],d=[],u=typeof Uint8Array<"u"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=0,I=w.length;E<I;++E)f[E]=w[E],d[w.charCodeAt(E)]=E;d[45]=62,d[95]=63;function b(Z){var V=Z.length;if(V%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=Z.indexOf("=");ae===-1&&(ae=V);var X=ae===V?0:4-ae%4;return[ae,X]}function T(Z){var V=b(Z),ae=V[0],X=V[1];return(ae+X)*3/4-X}function R(Z,V,ae){return(V+ae)*3/4-ae}function z(Z){var V,ae=b(Z),X=ae[0],U=ae[1],P=new u(R(Z,X,U)),L=0,B=U>0?X-4:X,Q;for(Q=0;Q<B;Q+=4)V=d[Z.charCodeAt(Q)]<<18|d[Z.charCodeAt(Q+1)]<<12|d[Z.charCodeAt(Q+2)]<<6|d[Z.charCodeAt(Q+3)],P[L++]=V>>16&255,P[L++]=V>>8&255,P[L++]=V&255;return U===2&&(V=d[Z.charCodeAt(Q)]<<2|d[Z.charCodeAt(Q+1)]>>4,P[L++]=V&255),U===1&&(V=d[Z.charCodeAt(Q)]<<10|d[Z.charCodeAt(Q+1)]<<4|d[Z.charCodeAt(Q+2)]>>2,P[L++]=V>>8&255,P[L++]=V&255),P}function j(Z){return f[Z>>18&63]+f[Z>>12&63]+f[Z>>6&63]+f[Z&63]}function se(Z,V,ae){for(var X,U=[],P=V;P<ae;P+=3)X=(Z[P]<<16&16711680)+(Z[P+1]<<8&65280)+(Z[P+2]&255),U.push(j(X));return U.join("")}function K(Z){for(var V,ae=Z.length,X=ae%3,U=[],P=16383,L=0,B=ae-X;L<B;L+=P)U.push(se(Z,L,L+P>B?B:L+P));return X===1?(V=Z[ae-1],U.push(f[V>>2]+f[V<<4&63]+"==")):X===2&&(V=(Z[ae-2]<<8)+Z[ae-1],U.push(f[V>>10]+f[V>>4&63]+f[V<<2&63]+"=")),U.join("")}},{}],2:[function(n,a,l){(function(f){(function(){var d=n("base64-js"),u=n("ieee754");l.Buffer=b,l.SlowBuffer=X,l.INSPECT_MAX_BYTES=50;var w=2147483647;l.kMaxLength=w,b.TYPED_ARRAY_SUPPORT=E(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{var Se=new Uint8Array(1);return Se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Se.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function I(Se){if(Se>w)throw new RangeError('The value "'+Se+'" is invalid for option "size"');var N=new Uint8Array(Se);return N.__proto__=b.prototype,N}function b(Se,N,D){if(typeof Se=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return j(Se)}return T(Se,N,D)}typeof Symbol<"u"&&Symbol.species!=null&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),b.poolSize=8192;function T(Se,N,D){if(typeof Se=="string")return se(Se,N);if(ArrayBuffer.isView(Se))return K(Se);if(Se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se);if(cr(Se,ArrayBuffer)||Se&&cr(Se.buffer,ArrayBuffer))return Z(Se,N,D);if(typeof Se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var xe=Se.valueOf&&Se.valueOf();if(xe!=null&&xe!==Se)return b.from(xe,N,D);var Xe=V(Se);if(Xe)return Xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Se[Symbol.toPrimitive]=="function")return b.from(Se[Symbol.toPrimitive]("string"),N,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se)}b.from=function(Se,N,D){return T(Se,N,D)},b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array;function R(Se){if(typeof Se!="number")throw new TypeError('"size" argument must be of type number');if(Se<0)throw new RangeError('The value "'+Se+'" is invalid for option "size"')}function z(Se,N,D){return R(Se),Se<=0?I(Se):N!==void 0?typeof D=="string"?I(Se).fill(N,D):I(Se).fill(N):I(Se)}b.alloc=function(Se,N,D){return z(Se,N,D)};function j(Se){return R(Se),I(Se<0?0:ae(Se)|0)}b.allocUnsafe=function(Se){return j(Se)},b.allocUnsafeSlow=function(Se){return j(Se)};function se(Se,N){if((typeof N!="string"||N==="")&&(N="utf8"),!b.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var D=U(Se,N)|0,xe=I(D),Xe=xe.write(Se,N);return Xe!==D&&(xe=xe.slice(0,Xe)),xe}function K(Se){for(var N=Se.length<0?0:ae(Se.length)|0,D=I(N),xe=0;xe<N;xe+=1)D[xe]=Se[xe]&255;return D}function Z(Se,N,D){if(N<0||Se.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(Se.byteLength<N+(D||0))throw new RangeError('"length" is outside of buffer bounds');var xe;return N===void 0&&D===void 0?xe=new Uint8Array(Se):D===void 0?xe=new Uint8Array(Se,N):xe=new Uint8Array(Se,N,D),xe.__proto__=b.prototype,xe}function V(Se){if(b.isBuffer(Se)){var N=ae(Se.length)|0,D=I(N);return D.length===0||Se.copy(D,0,0,N),D}if(Se.length!==void 0)return typeof Se.length!="number"||qt(Se.length)?I(0):K(Se);if(Se.type==="Buffer"&&Array.isArray(Se.data))return K(Se.data)}function ae(Se){if(Se>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return Se|0}function X(Se){return+Se!=Se&&(Se=0),b.alloc(+Se)}b.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==b.prototype},b.compare=function(N,D){if(cr(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),cr(D,Uint8Array)&&(D=b.from(D,D.offset,D.byteLength)),!b.isBuffer(N)||!b.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===D)return 0;for(var xe=N.length,Xe=D.length,tt=0,ct=Math.min(xe,Xe);tt<ct;++tt)if(N[tt]!==D[tt]){xe=N[tt],Xe=D[tt];break}return xe<Xe?-1:Xe<xe?1:0},b.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(N,D){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return b.alloc(0);var xe;if(D===void 0)for(D=0,xe=0;xe<N.length;++xe)D+=N[xe].length;var Xe=b.allocUnsafe(D),tt=0;for(xe=0;xe<N.length;++xe){var ct=N[xe];if(cr(ct,Uint8Array)&&(ct=b.from(ct)),!b.isBuffer(ct))throw new TypeError('"list" argument must be an Array of Buffers');ct.copy(Xe,tt),tt+=ct.length}return Xe};function U(Se,N){if(b.isBuffer(Se))return Se.length;if(ArrayBuffer.isView(Se)||cr(Se,ArrayBuffer))return Se.byteLength;if(typeof Se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Se);var D=Se.length,xe=arguments.length>2&&arguments[2]===!0;if(!xe&&D===0)return 0;for(var Xe=!1;;)switch(N){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return Ht(Se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return it(Se).length;default:if(Xe)return xe?-1:Ht(Se).length;N=(""+N).toLowerCase(),Xe=!0}}b.byteLength=U;function P(Se,N,D){var xe=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,N>>>=0,D<=N))return"";for(Se||(Se="utf8");;)switch(Se){case"hex":return Ie(this,N,D);case"utf8":case"utf-8":return re(this,N,D);case"ascii":return Te(this,N,D);case"latin1":case"binary":return Ne(this,N,D);case"base64":return J(this,N,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,N,D);default:if(xe)throw new TypeError("Unknown encoding: "+Se);Se=(Se+"").toLowerCase(),xe=!0}}b.prototype._isBuffer=!0;function L(Se,N,D){var xe=Se[N];Se[N]=Se[D],Se[D]=xe}b.prototype.swap16=function(){var N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<N;D+=2)L(this,D,D+1);return this},b.prototype.swap32=function(){var N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<N;D+=4)L(this,D,D+3),L(this,D+1,D+2);return this},b.prototype.swap64=function(){var N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<N;D+=8)L(this,D,D+7),L(this,D+1,D+6),L(this,D+2,D+5),L(this,D+3,D+4);return this},b.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?re(this,0,N):P.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(N){if(!b.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:b.compare(this,N)===0},b.prototype.inspect=function(){var N="",D=l.INSPECT_MAX_BYTES;return N=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(N+=" ... "),"<Buffer "+N+">"},b.prototype.compare=function(N,D,xe,Xe,tt){if(cr(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),!b.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(D===void 0&&(D=0),xe===void 0&&(xe=N?N.length:0),Xe===void 0&&(Xe=0),tt===void 0&&(tt=this.length),D<0||xe>N.length||Xe<0||tt>this.length)throw new RangeError("out of range index");if(Xe>=tt&&D>=xe)return 0;if(Xe>=tt)return-1;if(D>=xe)return 1;if(D>>>=0,xe>>>=0,Xe>>>=0,tt>>>=0,this===N)return 0;for(var ct=tt-Xe,le=xe-D,k=Math.min(ct,le),$=this.slice(Xe,tt),Ee=N.slice(D,xe),We=0;We<k;++We)if($[We]!==Ee[We]){ct=$[We],le=Ee[We];break}return ct<le?-1:le<ct?1:0};function B(Se,N,D,xe,Xe){if(Se.length===0)return-1;if(typeof D=="string"?(xe=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,qt(D)&&(D=Xe?0:Se.length-1),D<0&&(D=Se.length+D),D>=Se.length){if(Xe)return-1;D=Se.length-1}else if(D<0)if(Xe)D=0;else return-1;if(typeof N=="string"&&(N=b.from(N,xe)),b.isBuffer(N))return N.length===0?-1:Q(Se,N,D,xe,Xe);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?Xe?Uint8Array.prototype.indexOf.call(Se,N,D):Uint8Array.prototype.lastIndexOf.call(Se,N,D):Q(Se,[N],D,xe,Xe);throw new TypeError("val must be string, number or Buffer")}function Q(Se,N,D,xe,Xe){var tt=1,ct=Se.length,le=N.length;if(xe!==void 0&&(xe=String(xe).toLowerCase(),xe==="ucs2"||xe==="ucs-2"||xe==="utf16le"||xe==="utf-16le")){if(Se.length<2||N.length<2)return-1;tt=2,ct/=2,le/=2,D/=2}function k(Ve,Et){return tt===1?Ve[Et]:Ve.readUInt16BE(Et*tt)}var $;if(Xe){var Ee=-1;for($=D;$<ct;$++)if(k(Se,$)===k(N,Ee===-1?0:$-Ee)){if(Ee===-1&&(Ee=$),$-Ee+1===le)return Ee*tt}else Ee!==-1&&($-=$-Ee),Ee=-1}else for(D+le>ct&&(D=ct-le),$=D;$>=0;$--){for(var We=!0,nt=0;nt<le;nt++)if(k(Se,$+nt)!==k(N,nt)){We=!1;break}if(We)return $}return-1}b.prototype.includes=function(N,D,xe){return this.indexOf(N,D,xe)!==-1},b.prototype.indexOf=function(N,D,xe){return B(this,N,D,xe,!0)},b.prototype.lastIndexOf=function(N,D,xe){return B(this,N,D,xe,!1)};function q(Se,N,D,xe){D=Number(D)||0;var Xe=Se.length-D;xe?(xe=Number(xe),xe>Xe&&(xe=Xe)):xe=Xe;var tt=N.length;xe>tt/2&&(xe=tt/2);for(var ct=0;ct<xe;++ct){var le=parseInt(N.substr(ct*2,2),16);if(qt(le))return ct;Se[D+ct]=le}return ct}function ve(Se,N,D,xe){return wr(Ht(N,Se.length-D),Se,D,xe)}function ye(Se,N,D,xe){return wr(zt(N),Se,D,xe)}function fe(Se,N,D,xe){return ye(Se,N,D,xe)}function oe(Se,N,D,xe){return wr(it(N),Se,D,xe)}function ce(Se,N,D,xe){return wr(ur(N,Se.length-D),Se,D,xe)}b.prototype.write=function(N,D,xe,Xe){if(D===void 0)Xe="utf8",xe=this.length,D=0;else if(xe===void 0&&typeof D=="string")Xe=D,xe=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(xe)?(xe=xe>>>0,Xe===void 0&&(Xe="utf8")):(Xe=xe,xe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var tt=this.length-D;if((xe===void 0||xe>tt)&&(xe=tt),N.length>0&&(xe<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xe||(Xe="utf8");for(var ct=!1;;)switch(Xe){case"hex":return q(this,N,D,xe);case"utf8":case"utf-8":return ve(this,N,D,xe);case"ascii":return ye(this,N,D,xe);case"latin1":case"binary":return fe(this,N,D,xe);case"base64":return oe(this,N,D,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,N,D,xe);default:if(ct)throw new TypeError("Unknown encoding: "+Xe);Xe=(""+Xe).toLowerCase(),ct=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function J(Se,N,D){return N===0&&D===Se.length?d.fromByteArray(Se):d.fromByteArray(Se.slice(N,D))}function re(Se,N,D){D=Math.min(Se.length,D);for(var xe=[],Xe=N;Xe<D;){var tt=Se[Xe],ct=null,le=tt>239?4:tt>223?3:tt>191?2:1;if(Xe+le<=D){var k,$,Ee,We;switch(le){case 1:tt<128&&(ct=tt);break;case 2:k=Se[Xe+1],(k&192)===128&&(We=(tt&31)<<6|k&63,We>127&&(ct=We));break;case 3:k=Se[Xe+1],$=Se[Xe+2],(k&192)===128&&($&192)===128&&(We=(tt&15)<<12|(k&63)<<6|$&63,We>2047&&(We<55296||We>57343)&&(ct=We));break;case 4:k=Se[Xe+1],$=Se[Xe+2],Ee=Se[Xe+3],(k&192)===128&&($&192)===128&&(Ee&192)===128&&(We=(tt&15)<<18|(k&63)<<12|($&63)<<6|Ee&63,We>65535&&We<1114112&&(ct=We))}}ct===null?(ct=65533,le=1):ct>65535&&(ct-=65536,xe.push(ct>>>10&1023|55296),ct=56320|ct&1023),xe.push(ct),Xe+=le}return we(xe)}var de=4096;function we(Se){var N=Se.length;if(N<=de)return String.fromCharCode.apply(String,Se);for(var D="",xe=0;xe<N;)D+=String.fromCharCode.apply(String,Se.slice(xe,xe+=de));return D}function Te(Se,N,D){var xe="";D=Math.min(Se.length,D);for(var Xe=N;Xe<D;++Xe)xe+=String.fromCharCode(Se[Xe]&127);return xe}function Ne(Se,N,D){var xe="";D=Math.min(Se.length,D);for(var Xe=N;Xe<D;++Xe)xe+=String.fromCharCode(Se[Xe]);return xe}function Ie(Se,N,D){var xe=Se.length;(!N||N<0)&&(N=0),(!D||D<0||D>xe)&&(D=xe);for(var Xe="",tt=N;tt<D;++tt)Xe+=wt(Se[tt]);return Xe}function Oe(Se,N,D){for(var xe=Se.slice(N,D),Xe="",tt=0;tt<xe.length;tt+=2)Xe+=String.fromCharCode(xe[tt]+xe[tt+1]*256);return Xe}b.prototype.slice=function(N,D){var xe=this.length;N=~~N,D=D===void 0?xe:~~D,N<0?(N+=xe,N<0&&(N=0)):N>xe&&(N=xe),D<0?(D+=xe,D<0&&(D=0)):D>xe&&(D=xe),D<N&&(D=N);var Xe=this.subarray(N,D);return Xe.__proto__=b.prototype,Xe};function qe(Se,N,D){if(Se%1!==0||Se<0)throw new RangeError("offset is not uint");if(Se+N>D)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUIntLE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||qe(N,D,this.length);for(var Xe=this[N],tt=1,ct=0;++ct<D&&(tt*=256);)Xe+=this[N+ct]*tt;return Xe},b.prototype.readUIntBE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||qe(N,D,this.length);for(var Xe=this[N+--D],tt=1;D>0&&(tt*=256);)Xe+=this[N+--D]*tt;return Xe},b.prototype.readUInt8=function(N,D){return N=N>>>0,D||qe(N,1,this.length),this[N]},b.prototype.readUInt16LE=function(N,D){return N=N>>>0,D||qe(N,2,this.length),this[N]|this[N+1]<<8},b.prototype.readUInt16BE=function(N,D){return N=N>>>0,D||qe(N,2,this.length),this[N]<<8|this[N+1]},b.prototype.readUInt32LE=function(N,D){return N=N>>>0,D||qe(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},b.prototype.readUInt32BE=function(N,D){return N=N>>>0,D||qe(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},b.prototype.readIntLE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||qe(N,D,this.length);for(var Xe=this[N],tt=1,ct=0;++ct<D&&(tt*=256);)Xe+=this[N+ct]*tt;return tt*=128,Xe>=tt&&(Xe-=Math.pow(2,8*D)),Xe},b.prototype.readIntBE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||qe(N,D,this.length);for(var Xe=D,tt=1,ct=this[N+--Xe];Xe>0&&(tt*=256);)ct+=this[N+--Xe]*tt;return tt*=128,ct>=tt&&(ct-=Math.pow(2,8*D)),ct},b.prototype.readInt8=function(N,D){return N=N>>>0,D||qe(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},b.prototype.readInt16LE=function(N,D){N=N>>>0,D||qe(N,2,this.length);var xe=this[N]|this[N+1]<<8;return xe&32768?xe|4294901760:xe},b.prototype.readInt16BE=function(N,D){N=N>>>0,D||qe(N,2,this.length);var xe=this[N+1]|this[N]<<8;return xe&32768?xe|4294901760:xe},b.prototype.readInt32LE=function(N,D){return N=N>>>0,D||qe(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},b.prototype.readInt32BE=function(N,D){return N=N>>>0,D||qe(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},b.prototype.readFloatLE=function(N,D){return N=N>>>0,D||qe(N,4,this.length),u.read(this,N,!0,23,4)},b.prototype.readFloatBE=function(N,D){return N=N>>>0,D||qe(N,4,this.length),u.read(this,N,!1,23,4)},b.prototype.readDoubleLE=function(N,D){return N=N>>>0,D||qe(N,8,this.length),u.read(this,N,!0,52,8)},b.prototype.readDoubleBE=function(N,D){return N=N>>>0,D||qe(N,8,this.length),u.read(this,N,!1,52,8)};function He(Se,N,D,xe,Xe,tt){if(!b.isBuffer(Se))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>Xe||N<tt)throw new RangeError('"value" argument is out of bounds');if(D+xe>Se.length)throw new RangeError("Index out of range")}b.prototype.writeUIntLE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,xe=xe>>>0,!Xe){var tt=Math.pow(2,8*xe)-1;He(this,N,D,xe,tt,0)}var ct=1,le=0;for(this[D]=N&255;++le<xe&&(ct*=256);)this[D+le]=N/ct&255;return D+xe},b.prototype.writeUIntBE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,xe=xe>>>0,!Xe){var tt=Math.pow(2,8*xe)-1;He(this,N,D,xe,tt,0)}var ct=xe-1,le=1;for(this[D+ct]=N&255;--ct>=0&&(le*=256);)this[D+ct]=N/le&255;return D+xe},b.prototype.writeUInt8=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,1,255,0),this[D]=N&255,D+1},b.prototype.writeUInt16LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,65535,0),this[D]=N&255,this[D+1]=N>>>8,D+2},b.prototype.writeUInt16BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,65535,0),this[D]=N>>>8,this[D+1]=N&255,D+2},b.prototype.writeUInt32LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,4294967295,0),this[D+3]=N>>>24,this[D+2]=N>>>16,this[D+1]=N>>>8,this[D]=N&255,D+4},b.prototype.writeUInt32BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,4294967295,0),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4},b.prototype.writeIntLE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,!Xe){var tt=Math.pow(2,8*xe-1);He(this,N,D,xe,tt-1,-tt)}var ct=0,le=1,k=0;for(this[D]=N&255;++ct<xe&&(le*=256);)N<0&&k===0&&this[D+ct-1]!==0&&(k=1),this[D+ct]=(N/le>>0)-k&255;return D+xe},b.prototype.writeIntBE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,!Xe){var tt=Math.pow(2,8*xe-1);He(this,N,D,xe,tt-1,-tt)}var ct=xe-1,le=1,k=0;for(this[D+ct]=N&255;--ct>=0&&(le*=256);)N<0&&k===0&&this[D+ct+1]!==0&&(k=1),this[D+ct]=(N/le>>0)-k&255;return D+xe},b.prototype.writeInt8=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,1,127,-128),N<0&&(N=255+N+1),this[D]=N&255,D+1},b.prototype.writeInt16LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,32767,-32768),this[D]=N&255,this[D+1]=N>>>8,D+2},b.prototype.writeInt16BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,32767,-32768),this[D]=N>>>8,this[D+1]=N&255,D+2},b.prototype.writeInt32LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,2147483647,-2147483648),this[D]=N&255,this[D+1]=N>>>8,this[D+2]=N>>>16,this[D+3]=N>>>24,D+4},b.prototype.writeInt32BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4};function ot(Se,N,D,xe,Xe,tt){if(D+xe>Se.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function ht(Se,N,D,xe,Xe){return N=+N,D=D>>>0,Xe||ot(Se,N,D,4),u.write(Se,N,D,xe,23,4),D+4}b.prototype.writeFloatLE=function(N,D,xe){return ht(this,N,D,!0,xe)},b.prototype.writeFloatBE=function(N,D,xe){return ht(this,N,D,!1,xe)};function xt(Se,N,D,xe,Xe){return N=+N,D=D>>>0,Xe||ot(Se,N,D,8),u.write(Se,N,D,xe,52,8),D+8}b.prototype.writeDoubleLE=function(N,D,xe){return xt(this,N,D,!0,xe)},b.prototype.writeDoubleBE=function(N,D,xe){return xt(this,N,D,!1,xe)},b.prototype.copy=function(N,D,xe,Xe){if(!b.isBuffer(N))throw new TypeError("argument should be a Buffer");if(xe||(xe=0),!Xe&&Xe!==0&&(Xe=this.length),D>=N.length&&(D=N.length),D||(D=0),Xe>0&&Xe<xe&&(Xe=xe),Xe===xe||N.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(xe<0||xe>=this.length)throw new RangeError("Index out of range");if(Xe<0)throw new RangeError("sourceEnd out of bounds");Xe>this.length&&(Xe=this.length),N.length-D<Xe-xe&&(Xe=N.length-D+xe);var tt=Xe-xe;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(D,xe,Xe);else if(this===N&&xe<D&&D<Xe)for(var ct=tt-1;ct>=0;--ct)N[ct+D]=this[ct+xe];else Uint8Array.prototype.set.call(N,this.subarray(xe,Xe),D);return tt},b.prototype.fill=function(N,D,xe,Xe){if(typeof N=="string"){if(typeof D=="string"?(Xe=D,D=0,xe=this.length):typeof xe=="string"&&(Xe=xe,xe=this.length),Xe!==void 0&&typeof Xe!="string")throw new TypeError("encoding must be a string");if(typeof Xe=="string"&&!b.isEncoding(Xe))throw new TypeError("Unknown encoding: "+Xe);if(N.length===1){var tt=N.charCodeAt(0);(Xe==="utf8"&&tt<128||Xe==="latin1")&&(N=tt)}}else typeof N=="number"&&(N=N&255);if(D<0||this.length<D||this.length<xe)throw new RangeError("Out of range index");if(xe<=D)return this;D=D>>>0,xe=xe===void 0?this.length:xe>>>0,N||(N=0);var ct;if(typeof N=="number")for(ct=D;ct<xe;++ct)this[ct]=N;else{var le=b.isBuffer(N)?N:b.from(N,Xe),k=le.length;if(k===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ct=0;ct<xe-D;++ct)this[ct+D]=le[ct%k]}return this};var Mt=/[^+/0-9A-Za-z-_]/g;function pt(Se){if(Se=Se.split("=")[0],Se=Se.trim().replace(Mt,""),Se.length<2)return"";for(;Se.length%4!==0;)Se=Se+"=";return Se}function wt(Se){return Se<16?"0"+Se.toString(16):Se.toString(16)}function Ht(Se,N){N=N||1/0;for(var D,xe=Se.length,Xe=null,tt=[],ct=0;ct<xe;++ct){if(D=Se.charCodeAt(ct),D>55295&&D<57344){if(!Xe){if(D>56319){(N-=3)>-1&&tt.push(239,191,189);continue}else if(ct+1===xe){(N-=3)>-1&&tt.push(239,191,189);continue}Xe=D;continue}if(D<56320){(N-=3)>-1&&tt.push(239,191,189),Xe=D;continue}D=(Xe-55296<<10|D-56320)+65536}else Xe&&(N-=3)>-1&&tt.push(239,191,189);if(Xe=null,D<128){if((N-=1)<0)break;tt.push(D)}else if(D<2048){if((N-=2)<0)break;tt.push(D>>6|192,D&63|128)}else if(D<65536){if((N-=3)<0)break;tt.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((N-=4)<0)break;tt.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return tt}function zt(Se){for(var N=[],D=0;D<Se.length;++D)N.push(Se.charCodeAt(D)&255);return N}function ur(Se,N){for(var D,xe,Xe,tt=[],ct=0;ct<Se.length&&!((N-=2)<0);++ct)D=Se.charCodeAt(ct),xe=D>>8,Xe=D%256,tt.push(Xe),tt.push(xe);return tt}function it(Se){return d.toByteArray(pt(Se))}function wr(Se,N,D,xe){for(var Xe=0;Xe<xe&&!(Xe+D>=N.length||Xe>=Se.length);++Xe)N[Xe+D]=Se[Xe];return Xe}function cr(Se,N){return Se instanceof N||Se!=null&&Se.constructor!=null&&Se.constructor.name!=null&&Se.constructor.name===N.name}function qt(Se){return Se!==Se}}).call(this)}).call(this,n("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(n,a,l){const f=n("./validator"),d=n("./xmlparser/XMLParser"),u=n("./xmlbuilder/json2xml");a.exports={XMLParser:d,XMLValidator:f,XMLBuilder:u}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(n,a,l){const f=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",d=f+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",u="["+f+"]["+d+"]*",w=new RegExp("^"+u+"$"),E=function(b,T){const R=[];let z=T.exec(b);for(;z;){const j=[];j.startIndex=T.lastIndex-z[0].length;const se=z.length;for(let K=0;K<se;K++)j.push(z[K]);R.push(j),z=T.exec(b)}return R},I=function(b){const T=w.exec(b);return!(T===null||typeof T>"u")};l.isExist=function(b){return typeof b<"u"},l.isEmptyObject=function(b){return Object.keys(b).length===0},l.merge=function(b,T,R){if(T){const z=Object.keys(T),j=z.length;for(let se=0;se<j;se++)R==="strict"?b[z[se]]=[T[z[se]]]:b[z[se]]=T[z[se]]}},l.getValue=function(b){return l.isExist(b)?b:""},l.isName=I,l.getAllMatches=E,l.nameRegexp=u},{}],5:[function(n,a,l){const f=n("./util"),d={allowBooleanAttributes:!1,unpairedTags:[]};l.validate=function(U,P){P=Object.assign({},d,P);const L=[];let B=!1,Q=!1;U[0]==="\uFEFF"&&(U=U.substr(1));for(let q=0;q<U.length;q++)if(U[q]==="<"&&U[q+1]==="?"){if(q+=2,q=w(U,q),q.err)return q}else if(U[q]==="<"){let ve=q;if(q++,U[q]==="!"){q=E(U,q);continue}else{let ye=!1;U[q]==="/"&&(ye=!0,q++);let fe="";for(;q<U.length&&U[q]!==">"&&U[q]!==" "&&U[q]!=="	"&&U[q]!==`
`&&U[q]!=="\r";q++)fe+=U[q];if(fe=fe.trim(),fe[fe.length-1]==="/"&&(fe=fe.substring(0,fe.length-1),q--),!V(fe)){let J;return fe.trim().length===0?J="Invalid space after '<'.":J="Tag '"+fe+"' is an invalid name.",K("InvalidTag",J,ae(U,q))}const oe=T(U,q);if(oe===!1)return K("InvalidAttr","Attributes for '"+fe+"' have open quote.",ae(U,q));let ce=oe.value;if(q=oe.index,ce[ce.length-1]==="/"){const J=q-ce.length;ce=ce.substring(0,ce.length-1);const re=z(ce,P);if(re===!0)B=!0;else return K(re.err.code,re.err.msg,ae(U,J+re.err.line))}else if(ye)if(oe.tagClosed){if(ce.trim().length>0)return K("InvalidTag","Closing tag '"+fe+"' can't have attributes or invalid starting.",ae(U,ve));{const J=L.pop();if(fe!==J.tagName){let re=ae(U,J.tagStartPos);return K("InvalidTag","Expected closing tag '"+J.tagName+"' (opened in line "+re.line+", col "+re.col+") instead of closing tag '"+fe+"'.",ae(U,ve))}L.length==0&&(Q=!0)}}else return K("InvalidTag","Closing tag '"+fe+"' doesn't have proper closing.",ae(U,q));else{const J=z(ce,P);if(J!==!0)return K(J.err.code,J.err.msg,ae(U,q-ce.length+J.err.line));if(Q===!0)return K("InvalidXml","Multiple possible root nodes found.",ae(U,q));P.unpairedTags.indexOf(fe)!==-1||L.push({tagName:fe,tagStartPos:ve}),B=!0}for(q++;q<U.length;q++)if(U[q]==="<")if(U[q+1]==="!"){q++,q=E(U,q);continue}else if(U[q+1]==="?"){if(q=w(U,++q),q.err)return q}else break;else if(U[q]==="&"){const J=se(U,q);if(J==-1)return K("InvalidChar","char '&' is not expected.",ae(U,q));q=J}else if(Q===!0&&!u(U[q]))return K("InvalidXml","Extra text at the end",ae(U,q));U[q]==="<"&&q--}}else{if(u(U[q]))continue;return K("InvalidChar","char '"+U[q]+"' is not expected.",ae(U,q))}if(B){if(L.length==1)return K("InvalidTag","Unclosed tag '"+L[0].tagName+"'.",ae(U,L[0].tagStartPos));if(L.length>0)return K("InvalidXml","Invalid '"+JSON.stringify(L.map(q=>q.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return K("InvalidXml","Start tag expected.",1);return!0};function u(U){return U===" "||U==="	"||U===`
`||U==="\r"}function w(U,P){const L=P;for(;P<U.length;P++)if(U[P]=="?"||U[P]==" "){const B=U.substr(L,P-L);if(P>5&&B==="xml")return K("InvalidXml","XML declaration allowed only at the start of the document.",ae(U,P));if(U[P]=="?"&&U[P+1]==">"){P++;break}else continue}return P}function E(U,P){if(U.length>P+5&&U[P+1]==="-"&&U[P+2]==="-"){for(P+=3;P<U.length;P++)if(U[P]==="-"&&U[P+1]==="-"&&U[P+2]===">"){P+=2;break}}else if(U.length>P+8&&U[P+1]==="D"&&U[P+2]==="O"&&U[P+3]==="C"&&U[P+4]==="T"&&U[P+5]==="Y"&&U[P+6]==="P"&&U[P+7]==="E"){let L=1;for(P+=8;P<U.length;P++)if(U[P]==="<")L++;else if(U[P]===">"&&(L--,L===0))break}else if(U.length>P+9&&U[P+1]==="["&&U[P+2]==="C"&&U[P+3]==="D"&&U[P+4]==="A"&&U[P+5]==="T"&&U[P+6]==="A"&&U[P+7]==="["){for(P+=8;P<U.length;P++)if(U[P]==="]"&&U[P+1]==="]"&&U[P+2]===">"){P+=2;break}}return P}const I='"',b="'";function T(U,P){let L="",B="",Q=!1;for(;P<U.length;P++){if(U[P]===I||U[P]===b)B===""?B=U[P]:B!==U[P]||(B="");else if(U[P]===">"&&B===""){Q=!0;break}L+=U[P]}return B!==""?!1:{value:L,index:P,tagClosed:Q}}const R=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function z(U,P){const L=f.getAllMatches(U,R),B={};for(let Q=0;Q<L.length;Q++){if(L[Q][1].length===0)return K("InvalidAttr","Attribute '"+L[Q][2]+"' has no space in starting.",X(L[Q]));if(L[Q][3]!==void 0&&L[Q][4]===void 0)return K("InvalidAttr","Attribute '"+L[Q][2]+"' is without value.",X(L[Q]));if(L[Q][3]===void 0&&!P.allowBooleanAttributes)return K("InvalidAttr","boolean attribute '"+L[Q][2]+"' is not allowed.",X(L[Q]));const q=L[Q][2];if(!Z(q))return K("InvalidAttr","Attribute '"+q+"' is an invalid name.",X(L[Q]));if(!B.hasOwnProperty(q))B[q]=1;else return K("InvalidAttr","Attribute '"+q+"' is repeated.",X(L[Q]))}return!0}function j(U,P){let L=/\d/;for(U[P]==="x"&&(P++,L=/[\da-fA-F]/);P<U.length;P++){if(U[P]===";")return P;if(!U[P].match(L))break}return-1}function se(U,P){if(P++,U[P]===";")return-1;if(U[P]==="#")return P++,j(U,P);let L=0;for(;P<U.length;P++,L++)if(!(U[P].match(/\w/)&&L<20)){if(U[P]===";")break;return-1}return P}function K(U,P,L){return{err:{code:U,msg:P,line:L.line||L,col:L.col}}}function Z(U){return f.isName(U)}function V(U){return f.isName(U)}function ae(U,P){const L=U.substring(0,P).split(/\r?\n/);return{line:L.length,col:L[L.length-1].length+1}}function X(U){return U.startIndex+U[1].length}},{"./util":4}],6:[function(n,a,l){const f=n("./orderedJs2Xml"),d={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(b,T){return T},attributeValueProcessor:function(b,T){return T},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function u(b){this.options=Object.assign({},d,b),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=I),this.processTextOrObjNode=w,this.options.format?(this.indentate=E,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}u.prototype.build=function(b){return this.options.preserveOrder?f(b,this.options):(Array.isArray(b)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(b={[this.options.arrayNodeName]:b}),this.j2x(b,0).val)},u.prototype.j2x=function(b,T){let R="",z="";for(let j in b)if(Object.prototype.hasOwnProperty.call(b,j))if(typeof b[j]>"u")this.isAttribute(j)&&(z+="");else if(b[j]===null)this.isAttribute(j)?z+="":j[0]==="?"?z+=this.indentate(T)+"<"+j+"?"+this.tagEndChar:z+=this.indentate(T)+"<"+j+"/"+this.tagEndChar;else if(b[j]instanceof Date)z+=this.buildTextValNode(b[j],j,"",T);else if(typeof b[j]!="object"){const se=this.isAttribute(j);if(se)R+=this.buildAttrPairStr(se,""+b[j]);else if(j===this.options.textNodeName){let K=this.options.tagValueProcessor(j,""+b[j]);z+=this.replaceEntitiesValue(K)}else z+=this.buildTextValNode(b[j],j,"",T)}else if(Array.isArray(b[j])){const se=b[j].length;let K="";for(let Z=0;Z<se;Z++){const V=b[j][Z];typeof V>"u"||(V===null?j[0]==="?"?z+=this.indentate(T)+"<"+j+"?"+this.tagEndChar:z+=this.indentate(T)+"<"+j+"/"+this.tagEndChar:typeof V=="object"?this.options.oneListGroup?K+=this.j2x(V,T+1).val:K+=this.processTextOrObjNode(V,j,T):K+=this.buildTextValNode(V,j,"",T))}this.options.oneListGroup&&(K=this.buildObjectNode(K,j,"",T)),z+=K}else if(this.options.attributesGroupName&&j===this.options.attributesGroupName){const se=Object.keys(b[j]),K=se.length;for(let Z=0;Z<K;Z++)R+=this.buildAttrPairStr(se[Z],""+b[j][se[Z]])}else z+=this.processTextOrObjNode(b[j],j,T);return{attrStr:R,val:z}},u.prototype.buildAttrPairStr=function(b,T){return T=this.options.attributeValueProcessor(b,""+T),T=this.replaceEntitiesValue(T),this.options.suppressBooleanAttributes&&T==="true"?" "+b:" "+b+'="'+T+'"'};function w(b,T,R){const z=this.j2x(b,R+1);return b[this.options.textNodeName]!==void 0&&Object.keys(b).length===1?this.buildTextValNode(b[this.options.textNodeName],T,z.attrStr,R):this.buildObjectNode(z.val,T,z.attrStr,R)}u.prototype.buildObjectNode=function(b,T,R,z){if(b==="")return T[0]==="?"?this.indentate(z)+"<"+T+R+"?"+this.tagEndChar:this.indentate(z)+"<"+T+R+this.closeTag(T)+this.tagEndChar;{let j="</"+T+this.tagEndChar,se="";return T[0]==="?"&&(se="?",j=""),(R||R==="")&&b.indexOf("<")===-1?this.indentate(z)+"<"+T+R+se+">"+b+j:this.options.commentPropName!==!1&&T===this.options.commentPropName&&se.length===0?this.indentate(z)+`<!--${b}-->`+this.newLine:this.indentate(z)+"<"+T+R+se+this.tagEndChar+b+this.indentate(z)+j}},u.prototype.closeTag=function(b){let T="";return this.options.unpairedTags.indexOf(b)!==-1?this.options.suppressUnpairedNode||(T="/"):this.options.suppressEmptyNode?T="/":T=`></${b}`,T},u.prototype.buildTextValNode=function(b,T,R,z){if(this.options.cdataPropName!==!1&&T===this.options.cdataPropName)return this.indentate(z)+`<![CDATA[${b}]]>`+this.newLine;if(this.options.commentPropName!==!1&&T===this.options.commentPropName)return this.indentate(z)+`<!--${b}-->`+this.newLine;if(T[0]==="?")return this.indentate(z)+"<"+T+R+"?"+this.tagEndChar;{let j=this.options.tagValueProcessor(T,b);return j=this.replaceEntitiesValue(j),j===""?this.indentate(z)+"<"+T+R+this.closeTag(T)+this.tagEndChar:this.indentate(z)+"<"+T+R+">"+j+"</"+T+this.tagEndChar}},u.prototype.replaceEntitiesValue=function(b){if(b&&b.length>0&&this.options.processEntities)for(let T=0;T<this.options.entities.length;T++){const R=this.options.entities[T];b=b.replace(R.regex,R.val)}return b};function E(b){return this.options.indentBy.repeat(b)}function I(b){return b.startsWith(this.options.attributeNamePrefix)&&b!==this.options.textNodeName?b.substr(this.attrPrefixLen):!1}a.exports=u},{"./orderedJs2Xml":7}],7:[function(n,a,l){const f=`
`;function d(T,R){let z="";return R.format&&R.indentBy.length>0&&(z=f),u(T,R,"",z)}function u(T,R,z,j){let se="",K=!1;for(let Z=0;Z<T.length;Z++){const V=T[Z],ae=w(V);if(ae===void 0)continue;let X="";if(z.length===0?X=ae:X=`${z}.${ae}`,ae===R.textNodeName){let Q=V[ae];I(X,R)||(Q=R.tagValueProcessor(ae,Q),Q=b(Q,R)),K&&(se+=j),se+=Q,K=!1;continue}else if(ae===R.cdataPropName){K&&(se+=j),se+=`<![CDATA[${V[ae][0][R.textNodeName]}]]>`,K=!1;continue}else if(ae===R.commentPropName){se+=j+`<!--${V[ae][0][R.textNodeName]}-->`,K=!0;continue}else if(ae[0]==="?"){const Q=E(V[":@"],R),q=ae==="?xml"?"":j;let ve=V[ae][0][R.textNodeName];ve=ve.length!==0?" "+ve:"",se+=q+`<${ae}${ve}${Q}?>`,K=!0;continue}let U=j;U!==""&&(U+=R.indentBy);const P=E(V[":@"],R),L=j+`<${ae}${P}`,B=u(V[ae],R,X,U);R.unpairedTags.indexOf(ae)!==-1?R.suppressUnpairedNode?se+=L+">":se+=L+"/>":(!B||B.length===0)&&R.suppressEmptyNode?se+=L+"/>":B&&B.endsWith(">")?se+=L+`>${B}${j}</${ae}>`:(se+=L+">",B&&j!==""&&(B.includes("/>")||B.includes("</"))?se+=j+R.indentBy+B+j:se+=B,se+=`</${ae}>`),K=!0}return se}function w(T){const R=Object.keys(T);for(let z=0;z<R.length;z++){const j=R[z];if(T.hasOwnProperty(j)&&j!==":@")return j}}function E(T,R){let z="";if(T&&!R.ignoreAttributes)for(let j in T){if(!T.hasOwnProperty(j))continue;let se=R.attributeValueProcessor(j,T[j]);se=b(se,R),se===!0&&R.suppressBooleanAttributes?z+=` ${j.substr(R.attributeNamePrefix.length)}`:z+=` ${j.substr(R.attributeNamePrefix.length)}="${se}"`}return z}function I(T,R){T=T.substr(0,T.length-R.textNodeName.length-1);let z=T.substr(T.lastIndexOf(".")+1);for(let j in R.stopNodes)if(R.stopNodes[j]===T||R.stopNodes[j]==="*."+z)return!0;return!1}function b(T,R){if(T&&T.length>0&&R.processEntities)for(let z=0;z<R.entities.length;z++){const j=R.entities[z];T=T.replace(j.regex,j.val)}return T}a.exports=d},{}],8:[function(n,a,l){const f=n("../util");function d(z,j){const se={};if(z[j+3]==="O"&&z[j+4]==="C"&&z[j+5]==="T"&&z[j+6]==="Y"&&z[j+7]==="P"&&z[j+8]==="E"){j=j+9;let K=1,Z=!1,V=!1,ae="";for(;j<z.length;j++)if(z[j]==="<"&&!V){if(Z&&E(z,j))j+=7,[entityName,val,j]=u(z,j+1),val.indexOf("&")===-1&&(se[R(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(Z&&I(z,j))j+=8;else if(Z&&b(z,j))j+=8;else if(Z&&T(z,j))j+=9;else if(w)V=!0;else throw new Error("Invalid DOCTYPE");K++,ae=""}else if(z[j]===">"){if(V?z[j-1]==="-"&&z[j-2]==="-"&&(V=!1,K--):K--,K===0)break}else z[j]==="["?Z=!0:ae+=z[j];if(K!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:se,i:j}}function u(z,j){let se="";for(;j<z.length&&z[j]!=="'"&&z[j]!=='"';j++)se+=z[j];if(se=se.trim(),se.indexOf(" ")!==-1)throw new Error("External entites are not supported");const K=z[j++];let Z="";for(;j<z.length&&z[j]!==K;j++)Z+=z[j];return[se,Z,j]}function w(z,j){return z[j+1]==="!"&&z[j+2]==="-"&&z[j+3]==="-"}function E(z,j){return z[j+1]==="!"&&z[j+2]==="E"&&z[j+3]==="N"&&z[j+4]==="T"&&z[j+5]==="I"&&z[j+6]==="T"&&z[j+7]==="Y"}function I(z,j){return z[j+1]==="!"&&z[j+2]==="E"&&z[j+3]==="L"&&z[j+4]==="E"&&z[j+5]==="M"&&z[j+6]==="E"&&z[j+7]==="N"&&z[j+8]==="T"}function b(z,j){return z[j+1]==="!"&&z[j+2]==="A"&&z[j+3]==="T"&&z[j+4]==="T"&&z[j+5]==="L"&&z[j+6]==="I"&&z[j+7]==="S"&&z[j+8]==="T"}function T(z,j){return z[j+1]==="!"&&z[j+2]==="N"&&z[j+3]==="O"&&z[j+4]==="T"&&z[j+5]==="A"&&z[j+6]==="T"&&z[j+7]==="I"&&z[j+8]==="O"&&z[j+9]==="N"}function R(z){if(f.isName(z))return z;throw new Error(`Invalid entity name ${z}`)}a.exports=d},{"../util":4}],9:[function(n,a,l){const f={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(u,w){return w},attributeValueProcessor:function(u,w){return w},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(u,w,E){return u}},d=function(u){return Object.assign({},f,u)};l.buildOptions=d,l.defaultOptions=f},{}],10:[function(n,a,l){const f=n("../util"),d=n("./xmlNode"),u=n("./DocTypeReader"),w=n("strnum");class E{constructor(Q){this.options=Q,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=I,this.parseXml=j,this.parseTextData=b,this.resolveNameSpace=T,this.buildAttributesMap=z,this.isItStopNode=V,this.replaceEntitiesValue=K,this.readStopNodeData=P,this.saveTextToParentTag=Z,this.addChild=se}}function I(B){const Q=Object.keys(B);for(let q=0;q<Q.length;q++){const ve=Q[q];this.lastEntities[ve]={regex:new RegExp("&"+ve+";","g"),val:B[ve]}}}function b(B,Q,q,ve,ye,fe,oe){if(B!==void 0&&(this.options.trimValues&&!ve&&(B=B.trim()),B.length>0)){oe||(B=this.replaceEntitiesValue(B));const ce=this.options.tagValueProcessor(Q,B,q,ye,fe);return ce==null?B:typeof ce!=typeof B||ce!==B?ce:this.options.trimValues?L(B,this.options.parseTagValue,this.options.numberParseOptions):B.trim()===B?L(B,this.options.parseTagValue,this.options.numberParseOptions):B}}function T(B){if(this.options.removeNSPrefix){const Q=B.split(":"),q=B.charAt(0)==="/"?"/":"";if(Q[0]==="xmlns")return"";Q.length===2&&(B=q+Q[1])}return B}const R=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function z(B,Q,q){if(!this.options.ignoreAttributes&&typeof B=="string"){const ve=f.getAllMatches(B,R),ye=ve.length,fe={};for(let oe=0;oe<ye;oe++){const ce=this.resolveNameSpace(ve[oe][1]);let J=ve[oe][4],re=this.options.attributeNamePrefix+ce;if(ce.length)if(this.options.transformAttributeName&&(re=this.options.transformAttributeName(re)),re==="__proto__"&&(re="#__proto__"),J!==void 0){this.options.trimValues&&(J=J.trim()),J=this.replaceEntitiesValue(J);const de=this.options.attributeValueProcessor(ce,J,Q);de==null?fe[re]=J:typeof de!=typeof J||de!==J?fe[re]=de:fe[re]=L(J,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(fe[re]=!0)}if(!Object.keys(fe).length)return;if(this.options.attributesGroupName){const oe={};return oe[this.options.attributesGroupName]=fe,oe}return fe}}const j=function(B){B=B.replace(/\r\n?/g,`
`);const Q=new d("!xml");let q=Q,ve="",ye="";for(let fe=0;fe<B.length;fe++)if(B[fe]==="<")if(B[fe+1]==="/"){const ce=X(B,">",fe,"Closing Tag is not closed.");let J=B.substring(fe+2,ce).trim();if(this.options.removeNSPrefix){const we=J.indexOf(":");we!==-1&&(J=J.substr(we+1))}this.options.transformTagName&&(J=this.options.transformTagName(J)),q&&(ve=this.saveTextToParentTag(ve,q,ye));const re=ye.substring(ye.lastIndexOf(".")+1);if(J&&this.options.unpairedTags.indexOf(J)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${J}>`);let de=0;re&&this.options.unpairedTags.indexOf(re)!==-1?(de=ye.lastIndexOf(".",ye.lastIndexOf(".")-1),this.tagsNodeStack.pop()):de=ye.lastIndexOf("."),ye=ye.substring(0,de),q=this.tagsNodeStack.pop(),ve="",fe=ce}else if(B[fe+1]==="?"){let ce=U(B,fe,!1,"?>");if(!ce)throw new Error("Pi Tag is not closed.");if(ve=this.saveTextToParentTag(ve,q,ye),!(this.options.ignoreDeclaration&&ce.tagName==="?xml"||this.options.ignorePiTags)){const J=new d(ce.tagName);J.add(this.options.textNodeName,""),ce.tagName!==ce.tagExp&&ce.attrExpPresent&&(J[":@"]=this.buildAttributesMap(ce.tagExp,ye,ce.tagName)),this.addChild(q,J,ye)}fe=ce.closeIndex+1}else if(B.substr(fe+1,3)==="!--"){const ce=X(B,"-->",fe+4,"Comment is not closed.");if(this.options.commentPropName){const J=B.substring(fe+4,ce-2);ve=this.saveTextToParentTag(ve,q,ye),q.add(this.options.commentPropName,[{[this.options.textNodeName]:J}])}fe=ce}else if(B.substr(fe+1,2)==="!D"){const ce=u(B,fe);this.docTypeEntities=ce.entities,fe=ce.i}else if(B.substr(fe+1,2)==="!["){const ce=X(B,"]]>",fe,"CDATA is not closed.")-2,J=B.substring(fe+9,ce);if(ve=this.saveTextToParentTag(ve,q,ye),this.options.cdataPropName)q.add(this.options.cdataPropName,[{[this.options.textNodeName]:J}]);else{let re=this.parseTextData(J,q.tagname,ye,!0,!1,!0);re==null&&(re=""),q.add(this.options.textNodeName,re)}fe=ce+2}else{let ce=U(B,fe,this.options.removeNSPrefix),J=ce.tagName;const re=ce.rawTagName;let de=ce.tagExp,we=ce.attrExpPresent,Te=ce.closeIndex;this.options.transformTagName&&(J=this.options.transformTagName(J)),q&&ve&&q.tagname!=="!xml"&&(ve=this.saveTextToParentTag(ve,q,ye,!1));const Ne=q;if(Ne&&this.options.unpairedTags.indexOf(Ne.tagname)!==-1&&(q=this.tagsNodeStack.pop(),ye=ye.substring(0,ye.lastIndexOf("."))),J!==Q.tagname&&(ye+=ye?"."+J:J),this.isItStopNode(this.options.stopNodes,ye,J)){let Ie="";if(de.length>0&&de.lastIndexOf("/")===de.length-1)fe=ce.closeIndex;else if(this.options.unpairedTags.indexOf(J)!==-1)fe=ce.closeIndex;else{const qe=this.readStopNodeData(B,re,Te+1);if(!qe)throw new Error(`Unexpected end of ${re}`);fe=qe.i,Ie=qe.tagContent}const Oe=new d(J);J!==de&&we&&(Oe[":@"]=this.buildAttributesMap(de,ye,J)),Ie&&(Ie=this.parseTextData(Ie,J,ye,!0,we,!0,!0)),ye=ye.substr(0,ye.lastIndexOf(".")),Oe.add(this.options.textNodeName,Ie),this.addChild(q,Oe,ye)}else{if(de.length>0&&de.lastIndexOf("/")===de.length-1){J[J.length-1]==="/"?(J=J.substr(0,J.length-1),ye=ye.substr(0,ye.length-1),de=J):de=de.substr(0,de.length-1),this.options.transformTagName&&(J=this.options.transformTagName(J));const Ie=new d(J);J!==de&&we&&(Ie[":@"]=this.buildAttributesMap(de,ye,J)),this.addChild(q,Ie,ye),ye=ye.substr(0,ye.lastIndexOf("."))}else{const Ie=new d(J);this.tagsNodeStack.push(q),J!==de&&we&&(Ie[":@"]=this.buildAttributesMap(de,ye,J)),this.addChild(q,Ie,ye),q=Ie}ve="",fe=Te}}else ve+=B[fe];return Q.child};function se(B,Q,q){const ve=this.options.updateTag(Q.tagname,q,Q[":@"]);ve===!1||(typeof ve=="string"&&(Q.tagname=ve),B.addChild(Q))}const K=function(B){if(this.options.processEntities){for(let Q in this.docTypeEntities){const q=this.docTypeEntities[Q];B=B.replace(q.regx,q.val)}for(let Q in this.lastEntities){const q=this.lastEntities[Q];B=B.replace(q.regex,q.val)}if(this.options.htmlEntities)for(let Q in this.htmlEntities){const q=this.htmlEntities[Q];B=B.replace(q.regex,q.val)}B=B.replace(this.ampEntity.regex,this.ampEntity.val)}return B};function Z(B,Q,q,ve){return B&&(ve===void 0&&(ve=Object.keys(Q.child).length===0),B=this.parseTextData(B,Q.tagname,q,!1,Q[":@"]?Object.keys(Q[":@"]).length!==0:!1,ve),B!==void 0&&B!==""&&Q.add(this.options.textNodeName,B),B=""),B}function V(B,Q,q){const ve="*."+q;for(const ye in B){const fe=B[ye];if(ve===fe||Q===fe)return!0}return!1}function ae(B,Q,q=">"){let ve,ye="";for(let fe=Q;fe<B.length;fe++){let oe=B[fe];if(ve)oe===ve&&(ve="");else if(oe==='"'||oe==="'")ve=oe;else if(oe===q[0])if(q[1]){if(B[fe+1]===q[1])return{data:ye,index:fe}}else return{data:ye,index:fe};else oe==="	"&&(oe=" ");ye+=oe}}function X(B,Q,q,ve){const ye=B.indexOf(Q,q);if(ye===-1)throw new Error(ve);return ye+Q.length-1}function U(B,Q,q,ve=">"){const ye=ae(B,Q+1,ve);if(!ye)return;let fe=ye.data;const oe=ye.index,ce=fe.search(/\s/);let J=fe,re=!0;ce!==-1&&(J=fe.substring(0,ce),fe=fe.substring(ce+1).trimStart());const de=J;if(q){const we=J.indexOf(":");we!==-1&&(J=J.substr(we+1),re=J!==ye.data.substr(we+1))}return{tagName:J,tagExp:fe,closeIndex:oe,attrExpPresent:re,rawTagName:de}}function P(B,Q,q){const ve=q;let ye=1;for(;q<B.length;q++)if(B[q]==="<")if(B[q+1]==="/"){const fe=X(B,">",q,`${Q} is not closed`);if(B.substring(q+2,fe).trim()===Q&&(ye--,ye===0))return{tagContent:B.substring(ve,q),i:fe};q=fe}else if(B[q+1]==="?")q=X(B,"?>",q+1,"StopNode is not closed.");else if(B.substr(q+1,3)==="!--")q=X(B,"-->",q+3,"StopNode is not closed.");else if(B.substr(q+1,2)==="![")q=X(B,"]]>",q,"StopNode is not closed.")-2;else{const fe=U(B,q,">");fe&&((fe&&fe.tagName)===Q&&fe.tagExp[fe.tagExp.length-1]!=="/"&&ye++,q=fe.closeIndex)}}function L(B,Q,q){if(Q&&typeof B=="string"){const ve=B.trim();return ve==="true"?!0:ve==="false"?!1:w(B,q)}else return f.isExist(B)?B:""}a.exports=E},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(n,a,l){const{buildOptions:f}=n("./OptionsBuilder"),d=n("./OrderedObjParser"),{prettify:u}=n("./node2json"),w=n("../validator");class E{constructor(b){this.externalEntities={},this.options=f(b)}parse(b,T){if(typeof b!="string")if(b.toString)b=b.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(T){T===!0&&(T={});const j=w.validate(b,T);if(j!==!0)throw Error(`${j.err.msg}:${j.err.line}:${j.err.col}`)}const R=new d(this.options);R.addExternalEntities(this.externalEntities);const z=R.parseXml(b);return this.options.preserveOrder||z===void 0?z:u(z,this.options)}addEntity(b,T){if(T.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(b.indexOf("&")!==-1||b.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(T==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[b]=T}}a.exports=E},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(n,a,l){function f(I,b){return d(I,b)}function d(I,b,T){let R;const z={};for(let j=0;j<I.length;j++){const se=I[j],K=u(se);let Z="";if(T===void 0?Z=K:Z=T+"."+K,K===b.textNodeName)R===void 0?R=se[K]:R+=""+se[K];else{if(K===void 0)continue;if(se[K]){let V=d(se[K],b,Z);const ae=E(V,b);se[":@"]?w(V,se[":@"],Z,b):Object.keys(V).length===1&&V[b.textNodeName]!==void 0&&!b.alwaysCreateTextNode?V=V[b.textNodeName]:Object.keys(V).length===0&&(b.alwaysCreateTextNode?V[b.textNodeName]="":V=""),z[K]!==void 0&&z.hasOwnProperty(K)?(Array.isArray(z[K])||(z[K]=[z[K]]),z[K].push(V)):b.isArray(K,Z,ae)?z[K]=[V]:z[K]=V}}}return typeof R=="string"?R.length>0&&(z[b.textNodeName]=R):R!==void 0&&(z[b.textNodeName]=R),z}function u(I){const b=Object.keys(I);for(let T=0;T<b.length;T++){const R=b[T];if(R!==":@")return R}}function w(I,b,T,R){if(b){const z=Object.keys(b),j=z.length;for(let se=0;se<j;se++){const K=z[se];R.isArray(K,T+"."+K,!0,!0)?I[K]=[b[K]]:I[K]=b[K]}}}function E(I,b){const{textNodeName:T}=b,R=Object.keys(I).length;return!!(R===0||R===1&&(I[T]||typeof I[T]=="boolean"||I[T]===0))}l.prettify=f},{}],13:[function(n,a,l){class f{constructor(u){this.tagname=u,this.child=[],this[":@"]={}}add(u,w){u==="__proto__"&&(u="#__proto__"),this.child.push({[u]:w})}addChild(u){u.tagname==="__proto__"&&(u.tagname="#__proto__"),u[":@"]&&Object.keys(u[":@"]).length>0?this.child.push({[u.tagname]:u.child,":@":u[":@"]}):this.child.push({[u.tagname]:u.child})}}a.exports=f},{}],14:[function(n,a,l){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */l.read=function(f,d,u,w,E){var I,b,T=E*8-w-1,R=(1<<T)-1,z=R>>1,j=-7,se=u?E-1:0,K=u?-1:1,Z=f[d+se];for(se+=K,I=Z&(1<<-j)-1,Z>>=-j,j+=T;j>0;I=I*256+f[d+se],se+=K,j-=8);for(b=I&(1<<-j)-1,I>>=-j,j+=w;j>0;b=b*256+f[d+se],se+=K,j-=8);if(I===0)I=1-z;else{if(I===R)return b?NaN:(Z?-1:1)*(1/0);b=b+Math.pow(2,w),I=I-z}return(Z?-1:1)*b*Math.pow(2,I-w)},l.write=function(f,d,u,w,E,I){var b,T,R,z=I*8-E-1,j=(1<<z)-1,se=j>>1,K=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=w?0:I-1,V=w?1:-1,ae=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(T=isNaN(d)?1:0,b=j):(b=Math.floor(Math.log(d)/Math.LN2),d*(R=Math.pow(2,-b))<1&&(b--,R*=2),b+se>=1?d+=K/R:d+=K*Math.pow(2,1-se),d*R>=2&&(b++,R/=2),b+se>=j?(T=0,b=j):b+se>=1?(T=(d*R-1)*Math.pow(2,E),b=b+se):(T=d*Math.pow(2,se-1)*Math.pow(2,E),b=0));E>=8;f[u+Z]=T&255,Z+=V,T/=256,E-=8);for(b=b<<E|T,z+=E;z>0;f[u+Z]=b&255,Z+=V,b/=256,z-=8);f[u+Z-V]|=ae*128}},{}],15:[function(n,a,l){const f=/^[-+]?0x[a-fA-F0-9]+$/,d=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const u={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function w(I,b={}){if(b=Object.assign({},u,b),!I||typeof I!="string")return I;let T=I.trim();if(b.skipLike!==void 0&&b.skipLike.test(T))return I;if(b.hex&&f.test(T))return Number.parseInt(T,16);{const R=d.exec(T);if(R){const z=R[1],j=R[2];let se=E(R[3]);const K=R[4]||R[6];if(!b.leadingZeros&&j.length>0&&z&&T[2]!==".")return I;if(!b.leadingZeros&&j.length>0&&!z&&T[1]!==".")return I;{const Z=Number(T),V=""+Z;return V.search(/[eE]/)!==-1||K?b.eNotation?Z:I:T.indexOf(".")!==-1?V==="0"&&se===""||V===se||z&&V==="-"+se?Z:I:j?se===V||z+se===V?Z:I:T===V||T===z+V?Z:I}}else return I}}function E(I){return I&&I.indexOf(".")!==-1&&(I=I.replace(/0+$/,""),I==="."?I="0":I[0]==="."?I="0"+I:I[I.length-1]==="."&&(I=I.substr(0,I.length-1))),I}a.exports=w},{}],16:[function(n,a,l){(function(f){(function(){var d=this&&this.__awaiter||function(T,R,z,j){function se(K){return K instanceof z?K:new z(function(Z){Z(K)})}return new(z||(z=Promise))(function(K,Z){function V(U){try{X(j.next(U))}catch(P){Z(P)}}function ae(U){try{X(j.throw(U))}catch(P){Z(P)}}function X(U){U.done?K(U.value):se(U.value).then(V,ae)}X((j=j.apply(T,R||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.osmFetch=void 0;const u=n("../auth"),w=n("../config"),E=n("./_xml"),I=T=>typeof btoa>"u"?f.from(T,"binary").toString("base64"):btoa(T);function b(T,R,z){return d(this,void 0,void 0,function*(){const{apiUrl:j,authHeader:se,basicAuth:K,userAgent:Z}=(0,w.getConfig)(),V=K&&`Basic ${I(`${K.username}:${K.password}`)}`,ae=(0,u.getAuthToken)()&&`Bearer ${(0,u.getAuthToken)()}`;let X=new URLSearchParams(R).toString();X&&(X=`?${X}`);const U=yield fetch(`${j}/api${T}${X}`,Object.assign(Object.assign({},z),{headers:Object.assign({Authorization:se||V||ae||"","User-Agent":Z},z==null?void 0:z.headers)})),P=U.headers.get("Content-Type");if(P!=null&&P.startsWith("application/xml")){const L=yield U.text();return yield E.xmlParser.parse(L)}if(P!=null&&P.startsWith("application/json"))return U.json();if(U.ok)return yield U.text();throw new Error(`OSM API: ${yield U.text()}`)})}l.osmFetch=b}).call(this)}).call(this,n("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(n,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.xmlParser=void 0;const f=n("fast-xml-parser");l.xmlParser=new f.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:d=>d!=="$"})},{"fast-xml-parser":3}],18:[function(n,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.createOsmChangeXml=l.createChangesetMetaXml=void 0;const f=n("fast-xml-parser"),d=new f.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function u(I){return d.build({osm:{changeset:{tag:Object.entries(I).map(([b,T])=>({$k:b,$v:T}))}}})}l.createChangesetMetaXml=u;const w=(I,b,T)=>b.reduce((R,z)=>{const j={$id:z.id,$version:T?0:z.version,$changeset:I,tag:Object.entries(z.tags||{}).map(([se,K])=>({$k:se,$v:K}))};switch(z.type){case"node":{const se=Object.assign(Object.assign({},j),{$lat:z.lat,$lon:z.lon});return Object.assign(Object.assign({},R),{node:[...R.node,se]})}case"way":{if(!z.nodes)throw new Error("Way has no nodes");const se=Object.assign(Object.assign({},j),{nd:z.nodes.map(K=>({$ref:K}))});return Object.assign(Object.assign({},R),{way:[...R.way,se]})}case"relation":{if(!z.members)throw new Error("Relation has no members");const se=Object.assign(Object.assign({},j),{member:z.members.map(K=>({$type:K.type,$ref:K.ref,$role:K.role}))});return Object.assign(Object.assign({},R),{relation:[...R.relation,se]})}default:return R}},{node:[],way:[],relation:[]});function E(I,b,T){return d.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},T),{create:[w(I,b.create,!0)],modify:[w(I,b.modify)],delete:[Object.assign({"$if-unused":!0},w(I,b.delete))]})})}l.createOsmChangeXml=E},{"fast-xml-parser":3}],19:[function(n,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.parseOsmChangeXml=l.parseOsmChangeJson=void 0;const f=n("../_xml");function d(I){return{changeset:+I.$.changeset,id:+I.$.id,timestamp:I.$.timestamp,uid:+I.$.uid,user:I.$.user,version:+I.$.version,tags:I.tag?Object.fromEntries(I.tag.map(b=>[b.$.k,b.$.v])):void 0}}const u=I=>{const b=[];if(I.node){const T=I.node.map(R=>Object.assign(Object.assign({type:"node"},d(R)),{lat:+R.$.lat,lon:+R.$.lon}));b.push(...T)}if(I.way){const T=I.way.map(R=>{var z;return Object.assign(Object.assign({type:"way"},d(R)),{nodes:((z=R.nd)===null||z===void 0?void 0:z.map(j=>+j.$.ref))||[]})});b.push(...T)}if(I.relation){const T=I.relation.map(R=>{var z;return Object.assign(Object.assign({type:"relation"},d(R)),{members:((z=R.member)===null||z===void 0?void 0:z.map(j=>({ref:+j.$.ref,role:j.$.role,type:j.$.type})))||[]})});b.push(...T)}return b};function w(I){var b,T,R;return{create:((b=I.osmChange[0].create)===null||b===void 0?void 0:b.flatMap(u))||[],modify:((T=I.osmChange[0].modify)===null||T===void 0?void 0:T.flatMap(u))||[],delete:((R=I.osmChange[0].delete)===null||R===void 0?void 0:R.flatMap(u))||[]}}l.parseOsmChangeJson=w;function E(I){const b=f.xmlParser.parse(I);return w(b)}l.parseOsmChangeXml=E},{"../_xml":17}],20:[function(n,a,l){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(z){z(R)})}return new(I||(I=Promise))(function(R,z){function j(Z){try{K(b.next(Z))}catch(V){z(V)}}function se(Z){try{K(b.throw(Z))}catch(V){z(V)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,se)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.createChangesetComment=void 0;const d=n("../_osmFetch");function u(w,E){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/changeset/${w}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(E)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}l.createChangesetComment=u},{"../_osmFetch":16}],21:[function(n,a,l){var f=this&&this.__awaiter||function(E,I,b,T){function R(z){return z instanceof b?z:new b(function(j){j(z)})}return new(b||(b=Promise))(function(z,j){function se(V){try{Z(T.next(V))}catch(ae){j(ae)}}function K(V){try{Z(T.throw(V))}catch(ae){j(ae)}}function Z(V){V.done?z(V.value):R(V.value).then(se,K)}Z((T=T.apply(E,I||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getChangesetDiff=void 0;const d=n("../_osmFetch"),u=n("./_parseOsmChangeXml");function w(E){return f(this,void 0,void 0,function*(){const I=yield(0,d.osmFetch)(`/0.6/changeset/${E}/download`);return(0,u.parseOsmChangeJson)(I)})}l.getChangesetDiff=w},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(n,a,l){var f=this&&this.__awaiter||function(b,T,R,z){function j(se){return se instanceof R?se:new R(function(K){K(se)})}return new(R||(R=Promise))(function(se,K){function Z(X){try{ae(z.next(X))}catch(U){K(U)}}function V(X){try{ae(z.throw(X))}catch(U){K(U)}}function ae(X){X.done?se(X.value):j(X.value).then(Z,V)}ae((z=z.apply(b,T||[])).next())})},d=this&&this.__rest||function(b,T){var R={};for(var z in b)Object.prototype.hasOwnProperty.call(b,z)&&T.indexOf(z)<0&&(R[z]=b[z]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,z=Object.getOwnPropertySymbols(b);j<z.length;j++)T.indexOf(z[j])<0&&Object.prototype.propertyIsEnumerable.call(b,z[j])&&(R[z[j]]=b[z[j]]);return R};Object.defineProperty(l,"__esModule",{value:!0}),l.getChangeset=l.listChangesets=void 0;const u=n("../_osmFetch"),w=b=>{var T;return{id:+b.$.id,created_at:new Date(b.$.created_at),closed_at:new Date(b.$.closed_at),open:b.$.open==="true",comments_count:+b.$.comments_count,changes_count:+b.$.changes_count,min_lat:+b.$.min_lat,min_lon:+b.$.min_lon,max_lat:+b.$.max_lat,max_lon:+b.$.max_lon,uid:+b.$.uid,user:b.$.user,tags:Object.fromEntries(b.tag.map(R=>[R.$.k,R.$.v])),discussion:(T=b.discussion)===null||T===void 0?void 0:T[0].comment.map(R=>({date:new Date(R.$.date),user:R.$.user,uid:R.$.uid,text:R.text[0]}))}};function E(b){var T;return f(this,void 0,void 0,function*(){const{only:R}=b,z=d(b,["only"]);return((T=(yield(0,u.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},R&&{[R]:!0}),z))).osm[0].changeset)===null||T===void 0?void 0:T.map(w))||[]})}l.listChangesets=E;function I(b,T=!0){return f(this,void 0,void 0,function*(){return(yield(0,u.osmFetch)(`/0.6/changeset/${b}`,{include_discussion:T})).osm[0].changeset.map(w)[0]})}l.getChangeset=I},{"../_osmFetch":16}],23:[function(n,a,l){var f=this&&this.__createBinding||(Object.create?function(E,I,b,T){T===void 0&&(T=b);var R=Object.getOwnPropertyDescriptor(I,b);(!R||("get"in R?!I.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return I[b]}}),Object.defineProperty(E,T,R)}:function(E,I,b,T){T===void 0&&(T=b),E[T]=I[b]}),d=this&&this.__exportStar||function(E,I){for(var b in E)b!=="default"&&!Object.prototype.hasOwnProperty.call(I,b)&&f(I,E,b)};Object.defineProperty(l,"__esModule",{value:!0}),l.createOsmChangeXml=l.parseOsmChangeXml=void 0,d(n("./createChangesetComment"),l),d(n("./getChangesetDiff"),l),d(n("./getChangesets"),l),d(n("./uploadChangeset"),l);var u=n("./_parseOsmChangeXml");Object.defineProperty(l,"parseOsmChangeXml",{enumerable:!0,get:function(){return u.parseOsmChangeXml}});var w=n("./_createOsmChangeXml");Object.defineProperty(l,"createOsmChangeXml",{enumerable:!0,get:function(){return w.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(n,a,l){var f=this&&this.__awaiter||function(E,I,b,T){function R(z){return z instanceof b?z:new b(function(j){j(z)})}return new(b||(b=Promise))(function(z,j){function se(V){try{Z(T.next(V))}catch(ae){j(ae)}}function K(V){try{Z(T.throw(V))}catch(ae){j(ae)}}function Z(V){V.done?z(V.value):R(V.value).then(se,K)}Z((T=T.apply(E,I||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.uploadChangeset=void 0;const d=n("../_osmFetch"),u=n("./_createOsmChangeXml");function w(E,I){return f(this,void 0,void 0,function*(){const b=(0,u.createChangesetMetaXml)(E),T=+(yield(0,d.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:b,headers:{"content-type":"application/xml; charset=utf-8"}})),R=(0,u.createOsmChangeXml)(T,I);return yield(0,d.osmFetch)(`/0.6/changeset/${T}/upload`,void 0,{method:"POST",body:R,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,d.osmFetch)(`/0.6/changeset/${T}/close`,void 0,{method:"PUT"}),+T})}l.uploadChangeset=w},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(n,a,l){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(z){z(R)})}return new(I||(I=Promise))(function(R,z){function j(Z){try{K(b.next(Z))}catch(V){z(V)}}function se(Z){try{K(b.throw(Z))}catch(V){z(V)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,se)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getCapabilities=void 0;const d=n("./_osmFetch");function u(){var w;return f(this,void 0,void 0,function*(){const E=yield(0,d.osmFetch)("/capabilities");return{limits:{maxArea:+E.osm[0].api[0].area[0].$.maximum,maxNoteArea:+E.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+E.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+E.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+E.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+E.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((w=E.osm[0].policy[0].imagery[0].blacklist)===null||w===void 0?void 0:w.map(b=>b.$.regex))||[]}}})}l.getCapabilities=u},{"./_osmFetch":16}],26:[function(n,a,l){var f=this&&this.__awaiter||function(R,z,j,se){function K(Z){return Z instanceof j?Z:new j(function(V){V(Z)})}return new(j||(j=Promise))(function(Z,V){function ae(P){try{U(se.next(P))}catch(L){V(L)}}function X(P){try{U(se.throw(P))}catch(L){V(L)}}function U(P){P.done?Z(P.value):K(P.value).then(ae,X)}U((se=se.apply(R,z||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getRelationsForElement=l.getWaysForNode=l.getFeatureHistory=l.getFeatureAtVersion=l.getFeatures=l.getFeature=void 0;const d=n("./_osmFetch");function u(R,z,j){return f(this,void 0,void 0,function*(){const se=j&&R!=="node"?"/full":"";return(yield(0,d.osmFetch)(`/0.6/${R}/${z}${se}.json`)).elements})}l.getFeature=u;function w(R,z){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}s.json?${R}s=${z.join(",")}`)).elements})}l.getFeatures=w;function E(R,z,j){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}/${z}/${j}.json`)).elements[0]})}l.getFeatureAtVersion=E;function I(R,z){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}/${z}/history.json`)).elements})}l.getFeatureHistory=I;function b(R){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/node/${R}/ways.json`)).elements})}l.getWaysForNode=b;function T(R,z){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/${R}/${z}/relations.json`)).elements})}l.getRelationsForElement=T},{"./_osmFetch":16}],27:[function(n,a,l){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(z){z(R)})}return new(I||(I=Promise))(function(R,z){function j(Z){try{K(b.next(Z))}catch(V){z(V)}}function se(Z){try{K(b.throw(Z))}catch(V){z(V)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,se)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getMapData=void 0;const d=n("./_osmFetch");function u(w){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)("/0.6/map.json",{bbox:w})).elements})}l.getMapData=u},{"./_osmFetch":16}],28:[function(n,a,l){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(z){z(R)})}return new(I||(I=Promise))(function(R,z){function j(Z){try{K(b.next(Z))}catch(V){z(V)}}function se(Z){try{K(b.throw(Z))}catch(V){z(V)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,se)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getUIdFromDisplayName=void 0;const d=n("./changesets");function u(w){return f(this,void 0,void 0,function*(){const E=yield(0,d.listChangesets)({display_name:w});if(!E.length)throw new Error("Could not get uid because the user has never edited the map");return E[0].uid})}l.getUIdFromDisplayName=u},{"./changesets":23}],29:[function(n,a,l){var f=this&&this.__awaiter||function(E,I,b,T){function R(z){return z instanceof b?z:new b(function(j){j(z)})}return new(b||(b=Promise))(function(z,j){function se(V){try{Z(T.next(V))}catch(ae){j(ae)}}function K(V){try{Z(T.throw(V))}catch(ae){j(ae)}}function Z(V){V.done?z(V.value):R(V.value).then(se,K)}Z((T=T.apply(E,I||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getUsers=l.getUser=void 0;const d=n("./_osmFetch");function u(E){return f(this,void 0,void 0,function*(){const I=yield(0,d.osmFetch)(`/0.6/user/${E==="me"?"details":E}.json`);return Object.assign(Object.assign({},I.user),{account_created:new Date(I.user.account_created)})})}l.getUser=u;function w(E){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)("/0.6/users",{users:E})).users.map(b=>Object.assign(Object.assign({},b),{account_created:new Date(b.account_created)}))})}l.getUsers=w},{"./_osmFetch":16}],30:[function(n,a,l){var f=this&&this.__createBinding||(Object.create?function(u,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(u,I,b)}:function(u,w,E,I){I===void 0&&(I=E),u[I]=w[E]}),d=this&&this.__exportStar||function(u,w){for(var E in u)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,u,E)};Object.defineProperty(l,"__esModule",{value:!0}),d(n("./changesets"),l),d(n("./notes"),l),d(n("./getCapabilities"),l),d(n("./getFeature"),l),d(n("./getMapData"),l),d(n("./getUIdFromDisplayName"),l),d(n("./getUser"),l)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(n,a,l){var f=this&&this.__awaiter||function(T,R,z,j){function se(K){return K instanceof z?K:new z(function(Z){Z(K)})}return new(z||(z=Promise))(function(K,Z){function V(U){try{X(j.next(U))}catch(P){Z(P)}}function ae(U){try{X(j.throw(U))}catch(P){Z(P)}}function X(U){U.done?K(U.value):se(U.value).then(V,ae)}X((j=j.apply(T,R||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getNote=l.getNotesForArea=l.getNotesForQuery=void 0;const d=n("../_osmFetch"),u=T=>{const[R,z]=T.geometry.coordinates;return Object.assign(Object.assign({},T.properties),{location:{lat:z,lng:R}})};function w(T,R){return f(this,void 0,void 0,function*(){return(yield(0,d.osmFetch)(`/0.6/notes${R?"/search":""}.json`,T)).features.map(u)})}function E(T){return w(T,!0)}l.getNotesForQuery=E;function I(T){return w({bbox:T},!1)}l.getNotesForArea=I;function b(T){return f(this,void 0,void 0,function*(){const R=yield(0,d.osmFetch)(`/0.6/notes/${T}.json`);return u(R)})}l.getNote=b},{"../_osmFetch":16}],32:[function(n,a,l){var f=this&&this.__createBinding||(Object.create?function(u,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(u,I,b)}:function(u,w,E,I){I===void 0&&(I=E),u[I]=w[E]}),d=this&&this.__exportStar||function(u,w){for(var E in u)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,u,E)};Object.defineProperty(l,"__esModule",{value:!0}),d(n("./getNotes"),l),d(n("./noteActions"),l)},{"./getNotes":31,"./noteActions":33}],33:[function(n,a,l){var f=this&&this.__awaiter||function(I,b,T,R){function z(j){return j instanceof T?j:new T(function(se){se(j)})}return new(T||(T=Promise))(function(j,se){function K(ae){try{V(R.next(ae))}catch(X){se(X)}}function Z(ae){try{V(R.throw(ae))}catch(X){se(X)}}function V(ae){ae.done?j(ae.value):z(ae.value).then(K,Z)}V((R=R.apply(I,b||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.reopenNote=l.commentOnNote=l.createNote=void 0;const d=n("../_osmFetch");function u(I,b,T){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)("/0.6/notes",{lat:I,lon:b,text:T})})}l.createNote=u;function w(I,b){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/notes/${I}/comment`,{text:b})})}l.commentOnNote=w;function E(I,b){return f(this,void 0,void 0,function*(){yield(0,d.osmFetch)(`/0.6/notes/${I}/reopen`,{text:b})})}l.reopenNote=E},{"../_osmFetch":16}],34:[function(n,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.createPopup=void 0;function f(d){let u=!1;return new Promise((w,E)=>{const[I,b]=[600,550],T=Object.entries({width:I,height:b,left:window.screen.width/2-I/2,top:window.screen.height/2-b/2}).map(([j,se])=>`${j}=${se}`).join(","),R=window.open("about:blank","oauth_window",T);if(!R)throw new Error("Popup was blocked");R.location=d,window.authComplete=j=>{w(j),u=!0};const z=setInterval(()=>{R.closed&&(u||E(new Error("Cancelled")),clearInterval(z))},500)})}l.createPopup=f},{}],35:[function(n,a,l){var f=this&&this.__awaiter||function(w,E,I,b){function T(R){return R instanceof I?R:new I(function(z){z(R)})}return new(I||(I=Promise))(function(R,z){function j(Z){try{K(b.next(Z))}catch(V){z(V)}}function se(Z){try{K(b.throw(Z))}catch(V){z(V)}}function K(Z){Z.done?R(Z.value):T(Z.value).then(j,se)}K((b=b.apply(w,E||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.exchangeCode=void 0;const d=n("./helpers");function u(w,{options:E,pkceVerifier:I,state:b}){return f(this,void 0,void 0,function*(){const T=new URL(w).searchParams,R=T.get("error_description"),z=T.get("code"),j=T.get("state");if(R)throw new Error(R);if(!z)throw new Error("No code in OAuth response");if(!I||!b)throw new Error("No login in progress");if(b!==j)throw new Error("State Mismatch");const se={grant_type:"authorization_code",code:z,redirect_uri:E.redirectUrl,client_id:E.clientId,code_verifier:I},K=`${(0,d.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(se).toString()}`,V=yield(yield fetch(K,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in V)throw new Error(V.error_description);const ae={issuedAt:new Date(V.created_at*1e3).toISOString(),accessToken:V.access_token,scopes:V.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(ae)),delete window.authComplete,ae})}l.exchangeCode=u},{"./helpers":36}],36:[function(n,a,l){var f=this&&this.__awaiter||function(I,b,T,R){function z(j){return j instanceof T?j:new T(function(se){se(j)})}return new(T||(T=Promise))(function(j,se){function K(ae){try{V(R.next(ae))}catch(X){se(X)}}function Z(ae){try{V(R.throw(ae))}catch(X){se(X)}}function V(ae){ae.done?j(ae.value):z(ae.value).then(K,Z)}V((R=R.apply(I,b||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getOAuthBaseUrl=l.getRandomString=l.sha256=void 0;const d=n("../config");function u(I){return f(this,void 0,void 0,function*(){const b=new TextEncoder().encode(I),T=yield window.crypto.subtle.digest("SHA-256",b);return btoa(String.fromCharCode(...new Uint8Array(T))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}l.sha256=u;function w(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(I=>`0${I.toString(16)}`.slice(-2)).join("")}l.getRandomString=w;function E(){let I=(0,d.getConfig)().apiUrl;return I==="https://api.openstreetmap.org"&&(I="https://www.openstreetmap.org"),I}l.getOAuthBaseUrl=E},{"../config":39}],37:[function(n,a,l){var f=this&&this.__createBinding||(Object.create?function(u,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(u,I,b)}:function(u,w,E,I){I===void 0&&(I=E),u[I]=w[E]}),d=this&&this.__exportStar||function(u,w){for(var E in u)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,u,E)};Object.defineProperty(l,"__esModule",{value:!0}),d(n("./oauth2"),l)},{"./oauth2":38}],38:[function(n,a,l){var f=this&&this.__awaiter||function(R,z,j,se){function K(Z){return Z instanceof j?Z:new j(function(V){V(Z)})}return new(j||(j=Promise))(function(Z,V){function ae(P){try{U(se.next(P))}catch(L){V(L)}}function X(P){try{U(se.throw(P))}catch(L){V(L)}}function U(P){P.done?Z(P.value):K(P.value).then(ae,X)}U((se=se.apply(R,z||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.logout=l.isLoggedIn=l.getAuthToken=l.authReady=l.login=void 0;const d=n("./createPopup"),u=n("./exchangeCode"),w=n("./helpers");function E(R){return f(this,void 0,void 0,function*(){if(!R.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!R.clientId)throw new Error("You must include the 'clientId' option");if(!R.scopes)throw new Error("You must include the 'scopes' option");const z=(0,w.getRandomString)(),j=(0,w.getRandomString)(),se=yield(0,w.sha256)(j),K={scope:R.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:z,redirect_uri:R.redirectUrl,client_id:R.clientId,code_challenge_method:"S256",code_challenge:se},Z=`${(0,w.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(K).toString()}`,V={state:z,pkceVerifier:j,options:R};if(R.mode==="popup"){const ae=yield(0,d.createPopup)(Z);return(0,u.exchangeCode)(ae,V)}if(R.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(V)),window.location.replace(Z);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}l.login=E,l.authReady=f(void 0,void 0,void 0,function*(){var R;if(typeof window>"u")return;const z=window.location.href,j=localStorage.getItem("__osmAuthTemp");if(new URL(z).searchParams.get("code")){if(!((R=window.opener)===null||R===void 0)&&R.authComplete)window.opener.authComplete(z),window.close();else if(j)try{const se=JSON.parse(j);yield(0,u.exchangeCode)(z,se),localStorage.removeItem("__osmAuthTemp")}catch(se){console.error("OSM Auth Error",se)}}});const I=()=>{try{const R=localStorage.getItem("__osmAuth");return R?JSON.parse(R).accessToken:void 0}catch{return}};l.getAuthToken=I;const b=()=>!!(0,l.getAuthToken)();l.isLoggedIn=b;function T(){localStorage.removeItem("__osmAuth")}l.logout=T},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(n,a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.configure=l.getConfig=void 0;const f={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},d=()=>f;l.getConfig=d;function u(w){Object.assign(f,w)}l.configure=u},{}],40:[function(n,a,l){var f=this&&this.__createBinding||(Object.create?function(u,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(u,I,b)}:function(u,w,E,I){I===void 0&&(I=E),u[I]=w[E]}),d=this&&this.__exportStar||function(u,w){for(var E in u)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,u,E)};Object.defineProperty(l,"__esModule",{value:!0}),d(n("./api"),l),d(n("./auth"),l),d(n("./config"),l),d(n("./types"),l)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(n,a,l){Object.defineProperty(l,"__esModule",{value:!0})},{}],42:[function(n,a,l){arguments[4][41][0].apply(l,arguments)},{dup:41}],43:[function(n,a,l){arguments[4][41][0].apply(l,arguments)},{dup:41}],44:[function(n,a,l){var f=this&&this.__createBinding||(Object.create?function(u,w,E,I){I===void 0&&(I=E);var b=Object.getOwnPropertyDescriptor(w,E);(!b||("get"in b?!w.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(u,I,b)}:function(u,w,E,I){I===void 0&&(I=E),u[I]=w[E]}),d=this&&this.__exportStar||function(u,w){for(var E in u)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,u,E)};Object.defineProperty(l,"__esModule",{value:!0}),d(n("./changesets"),l),d(n("./features"),l),d(n("./general"),l),d(n("./notes"),l),d(n("./osmPatch"),l),d(n("./user"),l)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(n,a,l){arguments[4][41][0].apply(l,arguments)},{dup:41}],46:[function(n,a,l){arguments[4][41][0].apply(l,arguments)},{dup:41}],47:[function(n,a,l){arguments[4][41][0].apply(l,arguments)},{dup:41}]},{},[40])(40)})})(wk);var Ua=wk.exports;const bk=()=>{const[e,t]=vt.useState(!1);vt.useEffect(()=>{t(Ua.isLoggedIn())},[]);const n=vt.useCallback(()=>{(async()=>(await Ua.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Ua.isLoggedIn()),window.location.reload()))()},[]),a=vt.useCallback(()=>{(async()=>(Ua.logout(),t(!1)))()},[]);return yt.jsx(yt.Fragment,{children:e?yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:n,children:"login"})})},f6=()=>{const[e,t]=vt.useState(!1),[n,a]=vt.useState(void 0);return vt.useEffect(()=>{t(Ua.isLoggedIn())},[]),vt.useEffect(()=>{e&&(async()=>{const l=await Ua.getUser("me");a(l)})()},[e]),yt.jsx(yt.Fragment,{children:n?yt.jsx("img",{style:{width:"44px",height:"44px"},src:n.img.href,alt:n.display_name,title:n.display_name}):yt.jsx("img",{})})},d6=()=>{const[e,t]=vt.useState(!1),[n,a]=vt.useState(void 0);return vt.useEffect(()=>{t(Ua.isLoggedIn())},[]),vt.useEffect(()=>{e&&(async()=>{const l=await Ua.getUser("me");a(l)})()},[e]),yt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[yt.jsxs("div",{children:[yt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),n?yt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",n==null?void 0:n.display_name,", You have"," ",n==null?void 0:n.changesets.count," changesets."]}):yt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),yt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[yt.jsx("div",{children:yt.jsx(f6,{})}),yt.jsx("div",{children:yt.jsx(bk,{})})]})]})},Sk=({feature:e})=>{var n;const t=JSON.parse((n=e.properties)==null?void 0:n.center);return yt.jsxs(yt.Fragment,{children:[yt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",yt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},p6=({feature:e})=>yt.jsx(yt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var n;if(t.startsWith("addr"))return yt.jsxs("div",{className:t,children:[yt.jsx("span",{className:"underline",children:t})," = ",yt.jsx("span",{children:(n=e.properties)==null?void 0:n[t]})]})})});function Dd(e,t,n){return parseInt(e.substr(t,n),16)}function Ek(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function b_(e,t,n){return n=n<0?n+6:n>6?n-6:n,Ek(255*(n<1?e+(t-e)*n:n<3?t:n<4?e+(t-e)*(4-n):e))}function m6(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const n=e.length;if(n<6){const a=e[1],l=e[2],f=e[3],d=e[4]||"";t="#"+a+a+l+l+f+f+d+d}return(n==7||n>8)&&(t=e),t}}function g6(e,t,n){let a;if(t==0){const l=Ek(n*255);a=l+l+l}else{const l=n<=.5?n*(t+1):n+t-n*t,f=n*2-l;a=b_(f,l,e*6+2)+b_(f,l,e*6)+b_(f,l,e*6-2)}return"#"+a}function Md(e,t,n){const a=[.55,.5,.5,.46,.6,.55,.55],l=a[e*6+.5|0];return n=n<.5?n*l*2:l+(n-.5)*(1-l)*2,g6(e,t,n)}const y6=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},QT={V:"jdenticon_config",n:"config"};var v6={};function _6(e,t){const n=typeof e=="object"&&e||v6[QT.n]||y6[QT.V]||{},a=n.lightness||{},l=n.saturation||{},f="color"in l?l.color:l,d=l.grayscale,u=n.backColor,w=n.padding;function E(b,T){let R=a[b];return R&&R.length>1||(R=T),function(z){return z=R[0]+z*(R[1]-R[0]),z<0?0:z>1?1:z}}function I(b){const T=n.hues;let R;return T&&T.length>0&&(R=T[0|.999*b*T.length]),typeof R=="number"?(R/360%1+1)%1:b}return{W:I,o:typeof f=="number"?f:.5,D:typeof d=="number"?d:0,p:E("color",[.4,.8]),F:E("grayscale",[.3,.9]),G:m6(u),X:typeof e=="number"?e:typeof w=="number"?w:t}}let dg=class{constructor(t,n){this.x=t,this.y=n}};class Tk{constructor(t,n,a,l){this.q=t,this.t=n,this.H=a,this.Y=l}I(t,n,a,l){const f=this.q+this.H,d=this.t+this.H,u=this.Y;return u===1?new dg(f-n-(l||0),this.t+t):u===2?new dg(f-t-(a||0),d-n-(l||0)):u===3?new dg(this.q+n,d-t-(a||0)):new dg(this.q+t,this.t+n)}}const x6=new Tk(0,0,0,0);class w6{constructor(t){this.J=t,this.u=x6}g(t,n){const a=n?-2:2,l=[];for(let f=n?t.length-2:0;f<t.length&&f>=0;f+=a)l.push(this.u.I(t[f],t[f+1]));this.J.g(l)}h(t,n,a,l){const f=this.u.I(t,n,a,a);this.J.h(f,a,l)}i(t,n,a,l,f){this.g([t,n,t+a,n,t+a,n+l,t,n+l],f)}j(t,n,a,l,f,d){const u=[t+a,n,t+a,n+l,t,n+l,t,n];u.splice((f||0)%4*2,2),this.g(u,d)}K(t,n,a,l,f){this.g([t+a/2,n,t+a,n+l/2,t+a/2,n+l,t,n+l/2],f)}}function b6(e,t,n,a){e=e%14;let l,f,d,u,w,E;e?e==1?(d=0|n*.5,u=0|n*.8,t.j(n-d,0,d,u,2)):e==2?(d=0|n/3,t.i(d,d,n-d,n-d)):e==3?(w=n*.1,E=n<6?1:n<8?2:0|n*.25,w=w>1?0|w:w>.5?1:w,t.i(E,E,n-w-E,n-w-E)):e==4?(f=0|n*.15,d=0|n*.5,t.h(n-d-f,n-d-f,d)):e==5?(w=n*.1,E=w*4,E>3&&(E=0|E),t.i(0,0,n,n),t.g([E,E,n-w,E,E+(n-E-w)/2,n-w],!0)):e==6?t.g([0,0,n,0,n,n*.7,n*.4,n*.4,n*.7,n,0,n]):e==7?t.j(n/2,n/2,n/2,n/2,3):e==8?(t.i(0,0,n,n/2),t.i(0,n/2,n/2,n/2),t.j(n/2,n/2,n/2,n/2,1)):e==9?(w=n*.14,E=n<4?1:n<6?2:0|n*.35,w=n<8?w:0|w,t.i(0,0,n,n),t.i(E,E,n-E-w,n-E-w,!0)):e==10?(w=n*.12,E=w*3,t.i(0,0,n,n),t.h(E,E,n-w-E,!0)):e==11?t.j(n/2,n/2,n/2,n/2,3):e==12?(f=n*.25,t.i(0,0,n,n),t.K(f,f,n-f,n-f,!0)):!a&&(f=n*.4,d=n*1.2,t.h(f,f,d)):(l=n*.42,t.g([0,0,n,0,n,n-l*2,n-l,n,0,n]))}function eP(e,t,n){e=e%4;let a;e?e==1?t.j(0,n/2,n,n/2,0):e==2?t.K(0,0,n,n):(a=n/6,t.h(a,a,n-2*a)):t.j(0,0,n,n,0)}function S6(e,t){return e=t.W(e),[Md(e,t.D,t.F(0)),Md(e,t.o,t.p(.5)),Md(e,t.D,t.F(1)),Md(e,t.o,t.p(1)),Md(e,t.o,t.p(0))]}function E6(e,t,n){const a=_6(n,.08);a.G&&e.m(a.G);let l=e.k;const f=.5+l*a.X|0;l-=f*2;const d=new w6(e),u=0|l/4,w=0|f+l/2-u*2,E=0|f+l/2-u*2;function I(se,K,Z,V,ae){const X=Dd(t,Z,1);let U=V?Dd(t,V,1):0;e.L(T[R[se]]);for(let P=0;P<ae.length;P++)d.u=new Tk(w+ae[P][0]*u,E+ae[P][1]*u,u,U++%4),K(X,d,u,P);e.M()}const b=Dd(t,-7)/268435455,T=S6(b,a),R=[];let z;function j(se){if(se.indexOf(z)>=0){for(let K=0;K<se.length;K++)if(R.indexOf(se[K])>=0)return!0}}for(let se=0;se<3;se++)z=Dd(t,8+se,1)%T.length,(j([0,4])||j([2,3]))&&(z=1),R.push(z);I(0,eP,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),I(1,eP,4,5,[[0,0],[3,0],[3,3],[0,3]]),I(2,b6,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function T6(e){var a=0,l=0,f=encodeURI(e)+"%80",d=[],u,w=[],E=1732584193,I=4023233417,b=~E,T=~I,R=3285377520,z=[E,I,b,T,R],j=0,se="";function K(Z,V){return Z<<V|Z>>>32-V}for(;a<f.length;l++)d[l>>2]=d[l>>2]|(f[a]=="%"?parseInt(f.substring(a+1,a+=3),16):f.charCodeAt(a++))<<(3-(l&3))*8;for(u=((l+7>>6)+1)*16,d[u-1]=l*8-8;j<u;j+=16){for(a=0;a<80;a++)l=K(E,5)+R+(a<20?(I&b^~I&T)+1518500249:a<40?(I^b^T)+1859775393:a<60?(I&b^I&T^b&T)+2400959708:(I^b^T)+3395469782)+(w[a]=a<16?d[j+a]|0:K(w[a-3]^w[a-8]^w[a-14]^w[a-16],1)),R=T,T=b,b=K(I,30),I=E,E=l;z[0]=E=z[0]+E|0,z[1]=I=z[1]+I|0,z[2]=b=z[2]+b|0,z[3]=T=z[3]+T|0,z[4]=R=z[4]+R|0}for(a=0;a<40;a++)se+=(z[a>>3]>>>(7-(a&7))*4&15).toString(16);return se}function P6(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function A6(e){return T6(e==null?"":""+e)}typeof document<"u"&&document.querySelectorAll.bind(document);function xh(e){return(e*10+.5|0)/10}class I6{constructor(){this.v=""}g(t){let n="";for(let a=0;a<t.length;a++)n+=(a?"L":"M")+xh(t[a].x)+" "+xh(t[a].y);this.v+=n+"Z"}h(t,n,a){const l=a?0:1,f=xh(n/2),d=xh(n),u="a"+f+","+f+" 0 1,"+l+" ";this.v+="M"+xh(t.x)+" "+xh(t.y+n/2)+u+d+",0"+u+-d+",0"}}class C6{constructor(t){this.A,this.B={},this.O=t,this.k=t.k}m(t){const n=/^(#......)(..)?/.exec(t),a=n[2]?Dd(n[2],0)/255:1;this.O.m(n[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new I6)}M(){}g(t){this.A.g(t)}h(t,n,a){this.A.h(t,n,a)}finish(){const t=this.B;for(let n in t)t.hasOwnProperty(n)&&this.O.P(n,t[n].v)}}const M6={R:"http://www.w3.org/2000/svg",S:"width",T:"height"};class k6{constructor(t){this.k=t,this.C='<svg xmlns="'+M6.R+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,n){n&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+n.toFixed(2)+'"/>')}P(t,n){this.C+='<path fill="'+t+'" d="'+n+'"/>'}toString(){return this.C+"</svg>"}}function O6(e,t,n){const a=new k6(t);return E6(new C6(a),P6(e)||A6(e),n),a.toString()}const F6=({feature:e,size:t})=>e.properties===null?null:yt.jsx(yt.Fragment,{children:e.properties.userIconHref.length>0?yt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):yt.jsx("span",{dangerouslySetInnerHTML:{__html:O6(e.properties.user||"noname",t)}})}),R6=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?yt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};var j6={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};const L6=({viewState:e})=>{const[t,n]=vt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return vt.useEffect(()=>{n(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),yt.jsx(yt.Fragment,{children:e&&t&&yt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[yt.jsx(_u,{icon:j6,style:{padding:"0px 3px"}}),yt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var Pk={};class qi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let a=0;for(let l=0;l<this._n&&l<32;l++){const f=n[l],d=t+f,u=Math.abs(t)<Math.abs(f)?t-(d-f):f-(d-t);u&&(n[a++]=u),t=d}return n[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let n=this._n,a,l,f,d=0;if(n>0){for(d=t[--n];n>0&&(a=d,l=t[--n],d=a+l,f=l-(d-a),!f););n>0&&(f<0&&t[n-1]<0||f>0&&t[n-1]>0)&&(l=f*2,a=d+l,l==a-d&&(d=a))}return d}}function*z6(e){for(const t of e)yield*t}function Ak(e){return Array.from(z6(e))}function Wh(e,t,n){e=+e,t=+t,n=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+n;for(var a=-1,l=Math.max(0,Math.ceil((t-e)/n))|0,f=new Array(l);++a<l;)f[a]=e+a*n;return f}var fr=1e-6,Rp=1e-12,Mr=Math.PI,Dn=Mr/2,ky=Mr/4,co=Mr*2,on=180/Mr,gr=Mr/180,Nr=Math.abs,If=Math.atan,ho=Math.atan2,ar=Math.cos,pg=Math.ceil,Ik=Math.exp,bx=Math.hypot,Oy=Math.log,S_=Math.pow,rr=Math.sin,da=Math.sign||function(e){return e>0?1:e<0?-1:0},xi=Math.sqrt,Cb=Math.tan;function Ck(e){return e>1?0:e<-1?Mr:Math.acos(e)}function fo(e){return e>1?Dn:e<-1?-Dn:Math.asin(e)}function tP(e){return(e=rr(e/2))*e}function In(){}function Fy(e,t){e&&nP.hasOwnProperty(e.type)&&nP[e.type](e,t)}var rP={Feature:function(e,t){Fy(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,a=-1,l=n.length;++a<l;)Fy(n[a].geometry,t)}},nP={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,a=-1,l=n.length;++a<l;)e=n[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){Sx(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,a=-1,l=n.length;++a<l;)Sx(n[a],t,0)},Polygon:function(e,t){iP(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,a=-1,l=n.length;++a<l;)iP(n[a],t)},GeometryCollection:function(e,t){for(var n=e.geometries,a=-1,l=n.length;++a<l;)Fy(n[a],t)}};function Sx(e,t,n){var a=-1,l=e.length-n,f;for(t.lineStart();++a<l;)f=e[a],t.point(f[0],f[1],f[2]);t.lineEnd()}function iP(e,t){var n=-1,a=e.length;for(t.polygonStart();++n<a;)Sx(e[n],t,1);t.polygonEnd()}function Na(e,t){e&&rP.hasOwnProperty(e.type)?rP[e.type](e,t):Fy(e,t)}var Ry=new qi,jy=new qi,Mk,kk,Ex,Tx,Px,Cs={point:In,lineStart:In,lineEnd:In,polygonStart:function(){Ry=new qi,Cs.lineStart=B6,Cs.lineEnd=D6},polygonEnd:function(){var e=+Ry;jy.add(e<0?co+e:e),this.lineStart=this.lineEnd=this.point=In},sphere:function(){jy.add(co)}};function B6(){Cs.point=N6}function D6(){Ok(Mk,kk)}function N6(e,t){Cs.point=Ok,Mk=e,kk=t,e*=gr,t*=gr,Ex=e,Tx=ar(t=t/2+ky),Px=rr(t)}function Ok(e,t){e*=gr,t*=gr,t=t/2+ky;var n=e-Ex,a=n>=0?1:-1,l=a*n,f=ar(t),d=rr(t),u=Px*d,w=Tx*f+u*ar(l),E=u*a*rr(l);Ry.add(ho(E,w)),Ex=e,Tx=f,Px=d}function $6(e){return jy=new qi,Na(e,Cs),jy*2}function Ly(e){return[ho(e[1],e[0]),fo(e[2])]}function Sc(e){var t=e[0],n=e[1],a=ar(n);return[a*ar(t),a*rr(t),rr(n)]}function mg(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function pf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function E_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function gg(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function zy(e){var t=xi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Pn,Eo,Ln,Ho,ac,Fk,Rk,tf,ip,iu,vl,ol={point:Ax,lineStart:oP,lineEnd:aP,polygonStart:function(){ol.point=Lk,ol.lineStart=U6,ol.lineEnd=V6,ip=new qi,Cs.polygonStart()},polygonEnd:function(){Cs.polygonEnd(),ol.point=Ax,ol.lineStart=oP,ol.lineEnd=aP,Ry<0?(Pn=-(Ln=180),Eo=-(Ho=90)):ip>fr?Ho=90:ip<-fr&&(Eo=-90),vl[0]=Pn,vl[1]=Ln},sphere:function(){Pn=-(Ln=180),Eo=-(Ho=90)}};function Ax(e,t){iu.push(vl=[Pn=e,Ln=e]),t<Eo&&(Eo=t),t>Ho&&(Ho=t)}function jk(e,t){var n=Sc([e*gr,t*gr]);if(tf){var a=pf(tf,n),l=[a[1],-a[0],0],f=pf(l,a);zy(f),f=Ly(f);var d=e-ac,u=d>0?1:-1,w=f[0]*on*u,E,I=Nr(d)>180;I^(u*ac<w&&w<u*e)?(E=f[1]*on,E>Ho&&(Ho=E)):(w=(w+360)%360-180,I^(u*ac<w&&w<u*e)?(E=-f[1]*on,E<Eo&&(Eo=E)):(t<Eo&&(Eo=t),t>Ho&&(Ho=t))),I?e<ac?Wo(Pn,e)>Wo(Pn,Ln)&&(Ln=e):Wo(e,Ln)>Wo(Pn,Ln)&&(Pn=e):Ln>=Pn?(e<Pn&&(Pn=e),e>Ln&&(Ln=e)):e>ac?Wo(Pn,e)>Wo(Pn,Ln)&&(Ln=e):Wo(e,Ln)>Wo(Pn,Ln)&&(Pn=e)}else iu.push(vl=[Pn=e,Ln=e]);t<Eo&&(Eo=t),t>Ho&&(Ho=t),tf=n,ac=e}function oP(){ol.point=jk}function aP(){vl[0]=Pn,vl[1]=Ln,ol.point=Ax,tf=null}function Lk(e,t){if(tf){var n=e-ac;ip.add(Nr(n)>180?n+(n>0?360:-360):n)}else Fk=e,Rk=t;Cs.point(e,t),jk(e,t)}function U6(){Cs.lineStart()}function V6(){Lk(Fk,Rk),Cs.lineEnd(),Nr(ip)>fr&&(Pn=-(Ln=180)),vl[0]=Pn,vl[1]=Ln,tf=null}function Wo(e,t){return(t-=e)<0?t+360:t}function G6(e,t){return e[0]-t[0]}function sP(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function W6(e){var t,n,a,l,f,d,u;if(Ho=Ln=-(Pn=Eo=1/0),iu=[],Na(e,ol),n=iu.length){for(iu.sort(G6),t=1,a=iu[0],f=[a];t<n;++t)l=iu[t],sP(a,l[0])||sP(a,l[1])?(Wo(a[0],l[1])>Wo(a[0],a[1])&&(a[1]=l[1]),Wo(l[0],a[1])>Wo(a[0],a[1])&&(a[0]=l[0])):f.push(a=l);for(d=-1/0,n=f.length-1,t=0,a=f[n];t<=n;a=l,++t)l=f[t],(u=Wo(a[1],l[0]))>d&&(d=u,Pn=l[0],Ln=a[1])}return iu=vl=null,Pn===1/0||Eo===1/0?[[NaN,NaN],[NaN,NaN]]:[[Pn,Eo],[Ln,Ho]]}var Nd,By,Dy,Ny,$y,Uy,Vy,Gy,Ix,Cx,Mx,zk,Bk,ao,so,lo,Va={sphere:In,point:Mb,lineStart:lP,lineEnd:uP,polygonStart:function(){Va.lineStart=q6,Va.lineEnd=X6},polygonEnd:function(){Va.lineStart=lP,Va.lineEnd=uP}};function Mb(e,t){e*=gr,t*=gr;var n=ar(t);Xp(n*ar(e),n*rr(e),rr(t))}function Xp(e,t,n){++Nd,Dy+=(e-Dy)/Nd,Ny+=(t-Ny)/Nd,$y+=(n-$y)/Nd}function lP(){Va.point=H6}function H6(e,t){e*=gr,t*=gr;var n=ar(t);ao=n*ar(e),so=n*rr(e),lo=rr(t),Va.point=Z6,Xp(ao,so,lo)}function Z6(e,t){e*=gr,t*=gr;var n=ar(t),a=n*ar(e),l=n*rr(e),f=rr(t),d=ho(xi((d=so*f-lo*l)*d+(d=lo*a-ao*f)*d+(d=ao*l-so*a)*d),ao*a+so*l+lo*f);By+=d,Uy+=d*(ao+(ao=a)),Vy+=d*(so+(so=l)),Gy+=d*(lo+(lo=f)),Xp(ao,so,lo)}function uP(){Va.point=Mb}function q6(){Va.point=K6}function X6(){Dk(zk,Bk),Va.point=Mb}function K6(e,t){zk=e,Bk=t,e*=gr,t*=gr,Va.point=Dk;var n=ar(t);ao=n*ar(e),so=n*rr(e),lo=rr(t),Xp(ao,so,lo)}function Dk(e,t){e*=gr,t*=gr;var n=ar(t),a=n*ar(e),l=n*rr(e),f=rr(t),d=so*f-lo*l,u=lo*a-ao*f,w=ao*l-so*a,E=bx(d,u,w),I=fo(E),b=E&&-I/E;Ix.add(b*d),Cx.add(b*u),Mx.add(b*w),By+=I,Uy+=I*(ao+(ao=a)),Vy+=I*(so+(so=l)),Gy+=I*(lo+(lo=f)),Xp(ao,so,lo)}function Y6(e){Nd=By=Dy=Ny=$y=Uy=Vy=Gy=0,Ix=new qi,Cx=new qi,Mx=new qi,Na(e,Va);var t=+Ix,n=+Cx,a=+Mx,l=bx(t,n,a);return l<Rp&&(t=Uy,n=Vy,a=Gy,By<fr&&(t=Dy,n=Ny,a=$y),l=bx(t,n,a),l<Rp)?[NaN,NaN]:[ho(n,t)*on,fo(a/l)*on]}function wh(e){return function(){return e}}function kx(e,t){function n(a,l){return a=e(a,l),t(a[0],a[1])}return e.invert&&t.invert&&(n.invert=function(a,l){return a=t.invert(a,l),a&&e.invert(a[0],a[1])}),n}function Ox(e,t){return[Nr(e)>Mr?e+Math.round(-e/co)*co:e,t]}Ox.invert=Ox;function kb(e,t,n){return(e%=co)?t||n?kx(hP(e),fP(t,n)):hP(e):t||n?fP(t,n):Ox}function cP(e){return function(t,n){return t+=e,[t>Mr?t-co:t<-Mr?t+co:t,n]}}function hP(e){var t=cP(e);return t.invert=cP(-e),t}function fP(e,t){var n=ar(e),a=rr(e),l=ar(t),f=rr(t);function d(u,w){var E=ar(w),I=ar(u)*E,b=rr(u)*E,T=rr(w),R=T*n+I*a;return[ho(b*l-R*f,I*n-T*a),fo(R*l+b*f)]}return d.invert=function(u,w){var E=ar(w),I=ar(u)*E,b=rr(u)*E,T=rr(w),R=T*l-b*f;return[ho(b*l+T*f,I*n+R*a),fo(R*n-I*a)]},d}function Nk(e){e=kb(e[0]*gr,e[1]*gr,e.length>2?e[2]*gr:0);function t(n){return n=e(n[0]*gr,n[1]*gr),n[0]*=on,n[1]*=on,n}return t.invert=function(n){return n=e.invert(n[0]*gr,n[1]*gr),n[0]*=on,n[1]*=on,n},t}function $k(e,t,n,a,l,f){if(n){var d=ar(t),u=rr(t),w=a*n;l==null?(l=t+a*co,f=t-w/2):(l=dP(d,l),f=dP(d,f),(a>0?l<f:l>f)&&(l+=a*co));for(var E,I=l;a>0?I>f:I<f;I-=w)E=Ly([d,-u*ar(I),-u*rr(I)]),e.point(E[0],E[1])}}function dP(e,t){t=Sc(t),t[0]-=e,zy(t);var n=Ck(-t[1]);return((-t[2]<0?-n:n)+co-fr)%co}function J6(){var e=wh([0,0]),t=wh(90),n=wh(6),a,l,f={point:d};function d(w,E){a.push(w=l(w,E)),w[0]*=on,w[1]*=on}function u(){var w=e.apply(this,arguments),E=t.apply(this,arguments)*gr,I=n.apply(this,arguments)*gr;return a=[],l=kb(-w[0]*gr,-w[1]*gr,0).invert,$k(f,E,I,1),w={type:"Polygon",coordinates:[a]},a=l=null,w}return u.center=function(w){return arguments.length?(e=typeof w=="function"?w:wh([+w[0],+w[1]]),u):e},u.radius=function(w){return arguments.length?(t=typeof w=="function"?w:wh(+w),u):t},u.precision=function(w){return arguments.length?(n=typeof w=="function"?w:wh(+w),u):n},u}function Uk(){var e=[],t;return{point:function(n,a,l){t.push([n,a,l])},lineStart:function(){e.push(t=[])},lineEnd:In,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ng(e,t){return Nr(e[0]-t[0])<fr&&Nr(e[1]-t[1])<fr}function yg(e,t,n,a){this.x=e,this.z=t,this.o=n,this.e=a,this.v=!1,this.n=this.p=null}function Vk(e,t,n,a,l){var f=[],d=[],u,w;if(e.forEach(function(z){if(!((j=z.length-1)<=0)){var j,se=z[0],K=z[j],Z;if(Ng(se,K)){if(!se[2]&&!K[2]){for(l.lineStart(),u=0;u<j;++u)l.point((se=z[u])[0],se[1]);l.lineEnd();return}K[0]+=2*fr}f.push(Z=new yg(se,z,null,!0)),d.push(Z.o=new yg(se,null,Z,!1)),f.push(Z=new yg(K,z,null,!1)),d.push(Z.o=new yg(K,null,Z,!0))}}),!!f.length){for(d.sort(t),pP(f),pP(d),u=0,w=d.length;u<w;++u)d[u].e=n=!n;for(var E=f[0],I,b;;){for(var T=E,R=!0;T.v;)if((T=T.n)===E)return;I=T.z,l.lineStart();do{if(T.v=T.o.v=!0,T.e){if(R)for(u=0,w=I.length;u<w;++u)l.point((b=I[u])[0],b[1]);else a(T.x,T.n.x,1,l);T=T.n}else{if(R)for(I=T.p.z,u=I.length-1;u>=0;--u)l.point((b=I[u])[0],b[1]);else a(T.x,T.p.x,-1,l);T=T.p}T=T.o,I=T.z,R=!R}while(!T.v);l.lineEnd()}}}function pP(e){if(t=e.length){for(var t,n=0,a=e[0],l;++n<t;)a.n=l=e[n],l.p=a,a=l;a.n=l=e[0],l.p=a}}function T_(e){return Nr(e[0])<=Mr?e[0]:da(e[0])*((Nr(e[0])+Mr)%co-Mr)}function Gk(e,t){var n=T_(t),a=t[1],l=rr(a),f=[rr(n),-ar(n),0],d=0,u=0,w=new qi;l===1?a=Dn+fr:l===-1&&(a=-Dn-fr);for(var E=0,I=e.length;E<I;++E)if(T=(b=e[E]).length)for(var b,T,R=b[T-1],z=T_(R),j=R[1]/2+ky,se=rr(j),K=ar(j),Z=0;Z<T;++Z,z=ae,se=U,K=P,R=V){var V=b[Z],ae=T_(V),X=V[1]/2+ky,U=rr(X),P=ar(X),L=ae-z,B=L>=0?1:-1,Q=B*L,q=Q>Mr,ve=se*U;if(w.add(ho(ve*B*rr(Q),K*P+ve*ar(Q))),d+=q?L+B*co:L,q^z>=n^ae>=n){var ye=pf(Sc(R),Sc(V));zy(ye);var fe=pf(f,ye);zy(fe);var oe=(q^L>=0?-1:1)*fo(fe[2]);(a>oe||a===oe&&(ye[0]||ye[1]))&&(u+=q^L>=0?1:-1)}}return(d<-fr||d<fr&&w<-Rp)^u&1}function Wk(e,t,n,a){return function(l){var f=t(l),d=Uk(),u=t(d),w=!1,E,I,b,T={point:R,lineStart:j,lineEnd:se,polygonStart:function(){T.point=K,T.lineStart=Z,T.lineEnd=V,I=[],E=[]},polygonEnd:function(){T.point=R,T.lineStart=j,T.lineEnd=se,I=Ak(I);var ae=Gk(E,a);I.length?(w||(l.polygonStart(),w=!0),Vk(I,eB,ae,n,l)):ae&&(w||(l.polygonStart(),w=!0),l.lineStart(),n(null,null,1,l),l.lineEnd()),w&&(l.polygonEnd(),w=!1),I=E=null},sphere:function(){l.polygonStart(),l.lineStart(),n(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function R(ae,X){e(ae,X)&&l.point(ae,X)}function z(ae,X){f.point(ae,X)}function j(){T.point=z,f.lineStart()}function se(){T.point=R,f.lineEnd()}function K(ae,X){b.push([ae,X]),u.point(ae,X)}function Z(){u.lineStart(),b=[]}function V(){K(b[0][0],b[0][1]),u.lineEnd();var ae=u.clean(),X=d.result(),U,P=X.length,L,B,Q;if(b.pop(),E.push(b),b=null,!!P){if(ae&1){if(B=X[0],(L=B.length-1)>0){for(w||(l.polygonStart(),w=!0),l.lineStart(),U=0;U<L;++U)l.point((Q=B[U])[0],Q[1]);l.lineEnd()}return}P>1&&ae&2&&X.push(X.pop().concat(X.shift())),I.push(X.filter(Q6))}}return T}}function Q6(e){return e.length>1}function eB(e,t){return((e=e.x)[0]<0?e[1]-Dn-fr:Dn-e[1])-((t=t.x)[0]<0?t[1]-Dn-fr:Dn-t[1])}const Fx=Wk(function(){return!0},tB,nB,[-Mr,-Dn]);function tB(e){var t=NaN,n=NaN,a=NaN,l;return{lineStart:function(){e.lineStart(),l=1},point:function(f,d){var u=f>0?Mr:-Mr,w=Nr(f-t);Nr(w-Mr)<fr?(e.point(t,n=(n+d)/2>0?Dn:-Dn),e.point(a,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(f,n),l=0):a!==u&&w>=Mr&&(Nr(t-a)<fr&&(t-=a*fr),Nr(f-u)<fr&&(f-=u*fr),n=rB(t,n,f,d),e.point(a,n),e.lineEnd(),e.lineStart(),e.point(u,n),l=0),e.point(t=f,n=d),a=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-l}}}function rB(e,t,n,a){var l,f,d=rr(e-n);return Nr(d)>fr?If((rr(t)*(f=ar(a))*rr(n)-rr(a)*(l=ar(t))*rr(e))/(l*f*d)):(t+a)/2}function nB(e,t,n,a){var l;if(e==null)l=n*Dn,a.point(-Mr,l),a.point(0,l),a.point(Mr,l),a.point(Mr,0),a.point(Mr,-l),a.point(0,-l),a.point(-Mr,-l),a.point(-Mr,0),a.point(-Mr,l);else if(Nr(e[0]-t[0])>fr){var f=e[0]<t[0]?Mr:-Mr;l=n*f/2,a.point(-f,l),a.point(0,l),a.point(f,l)}else a.point(t[0],t[1])}function Hk(e){var t=ar(e),n=6*gr,a=t>0,l=Nr(t)>fr;function f(I,b,T,R){$k(R,e,n,T,I,b)}function d(I,b){return ar(I)*ar(b)>t}function u(I){var b,T,R,z,j;return{lineStart:function(){z=R=!1,j=1},point:function(se,K){var Z=[se,K],V,ae=d(se,K),X=a?ae?0:E(se,K):ae?E(se+(se<0?Mr:-Mr),K):0;if(!b&&(z=R=ae)&&I.lineStart(),ae!==R&&(V=w(b,Z),(!V||Ng(b,V)||Ng(Z,V))&&(Z[2]=1)),ae!==R)j=0,ae?(I.lineStart(),V=w(Z,b),I.point(V[0],V[1])):(V=w(b,Z),I.point(V[0],V[1],2),I.lineEnd()),b=V;else if(l&&b&&a^ae){var U;!(X&T)&&(U=w(Z,b,!0))&&(j=0,a?(I.lineStart(),I.point(U[0][0],U[0][1]),I.point(U[1][0],U[1][1]),I.lineEnd()):(I.point(U[1][0],U[1][1]),I.lineEnd(),I.lineStart(),I.point(U[0][0],U[0][1],3)))}ae&&(!b||!Ng(b,Z))&&I.point(Z[0],Z[1]),b=Z,R=ae,T=X},lineEnd:function(){R&&I.lineEnd(),b=null},clean:function(){return j|(z&&R)<<1}}}function w(I,b,T){var R=Sc(I),z=Sc(b),j=[1,0,0],se=pf(R,z),K=mg(se,se),Z=se[0],V=K-Z*Z;if(!V)return!T&&I;var ae=t*K/V,X=-t*Z/V,U=pf(j,se),P=gg(j,ae),L=gg(se,X);E_(P,L);var B=U,Q=mg(P,B),q=mg(B,B),ve=Q*Q-q*(mg(P,P)-1);if(!(ve<0)){var ye=xi(ve),fe=gg(B,(-Q-ye)/q);if(E_(fe,P),fe=Ly(fe),!T)return fe;var oe=I[0],ce=b[0],J=I[1],re=b[1],de;ce<oe&&(de=oe,oe=ce,ce=de);var we=ce-oe,Te=Nr(we-Mr)<fr,Ne=Te||we<fr;if(!Te&&re<J&&(de=J,J=re,re=de),Ne?Te?J+re>0^fe[1]<(Nr(fe[0]-oe)<fr?J:re):J<=fe[1]&&fe[1]<=re:we>Mr^(oe<=fe[0]&&fe[0]<=ce)){var Ie=gg(B,(-Q+ye)/q);return E_(Ie,P),[fe,Ly(Ie)]}}}function E(I,b){var T=a?e:Mr-e,R=0;return I<-T?R|=1:I>T&&(R|=2),b<-T?R|=4:b>T&&(R|=8),R}return Wk(d,u,f,a?[0,-e]:[-Mr,e-Mr])}function iB(e,t,n,a,l,f){var d=e[0],u=e[1],w=t[0],E=t[1],I=0,b=1,T=w-d,R=E-u,z;if(z=n-d,!(!T&&z>0)){if(z/=T,T<0){if(z<I)return;z<b&&(b=z)}else if(T>0){if(z>b)return;z>I&&(I=z)}if(z=l-d,!(!T&&z<0)){if(z/=T,T<0){if(z>b)return;z>I&&(I=z)}else if(T>0){if(z<I)return;z<b&&(b=z)}if(z=a-u,!(!R&&z>0)){if(z/=R,R<0){if(z<I)return;z<b&&(b=z)}else if(R>0){if(z>b)return;z>I&&(I=z)}if(z=f-u,!(!R&&z<0)){if(z/=R,R<0){if(z>b)return;z>I&&(I=z)}else if(R>0){if(z<I)return;z<b&&(b=z)}return I>0&&(e[0]=d+I*T,e[1]=u+I*R),b<1&&(t[0]=d+b*T,t[1]=u+b*R),!0}}}}}var $d=1e9,vg=-$d;function z0(e,t,n,a){function l(E,I){return e<=E&&E<=n&&t<=I&&I<=a}function f(E,I,b,T){var R=0,z=0;if(E==null||(R=d(E,b))!==(z=d(I,b))||w(E,I)<0^b>0)do T.point(R===0||R===3?e:n,R>1?a:t);while((R=(R+b+4)%4)!==z);else T.point(I[0],I[1])}function d(E,I){return Nr(E[0]-e)<fr?I>0?0:3:Nr(E[0]-n)<fr?I>0?2:1:Nr(E[1]-t)<fr?I>0?1:0:I>0?3:2}function u(E,I){return w(E.x,I.x)}function w(E,I){var b=d(E,1),T=d(I,1);return b!==T?b-T:b===0?I[1]-E[1]:b===1?E[0]-I[0]:b===2?E[1]-I[1]:I[0]-E[0]}return function(E){var I=E,b=Uk(),T,R,z,j,se,K,Z,V,ae,X,U,P={point:L,lineStart:ve,lineEnd:ye,polygonStart:Q,polygonEnd:q};function L(oe,ce){l(oe,ce)&&I.point(oe,ce)}function B(){for(var oe=0,ce=0,J=R.length;ce<J;++ce)for(var re=R[ce],de=1,we=re.length,Te=re[0],Ne,Ie,Oe=Te[0],qe=Te[1];de<we;++de)Ne=Oe,Ie=qe,Te=re[de],Oe=Te[0],qe=Te[1],Ie<=a?qe>a&&(Oe-Ne)*(a-Ie)>(qe-Ie)*(e-Ne)&&++oe:qe<=a&&(Oe-Ne)*(a-Ie)<(qe-Ie)*(e-Ne)&&--oe;return oe}function Q(){I=b,T=[],R=[],U=!0}function q(){var oe=B(),ce=U&&oe,J=(T=Ak(T)).length;(ce||J)&&(E.polygonStart(),ce&&(E.lineStart(),f(null,null,1,E),E.lineEnd()),J&&Vk(T,u,oe,f,E),E.polygonEnd()),I=E,T=R=z=null}function ve(){P.point=fe,R&&R.push(z=[]),X=!0,ae=!1,Z=V=NaN}function ye(){T&&(fe(j,se),K&&ae&&b.rejoin(),T.push(b.result())),P.point=L,ae&&I.lineEnd()}function fe(oe,ce){var J=l(oe,ce);if(R&&z.push([oe,ce]),X)j=oe,se=ce,K=J,X=!1,J&&(I.lineStart(),I.point(oe,ce));else if(J&&ae)I.point(oe,ce);else{var re=[Z=Math.max(vg,Math.min($d,Z)),V=Math.max(vg,Math.min($d,V))],de=[oe=Math.max(vg,Math.min($d,oe)),ce=Math.max(vg,Math.min($d,ce))];iB(re,de,e,t,n,a)?(ae||(I.lineStart(),I.point(re[0],re[1])),I.point(de[0],de[1]),J||I.lineEnd(),U=!1):J&&(I.lineStart(),I.point(oe,ce),U=!1)}Z=oe,V=ce,ae=J}return P}}function oB(){var e=0,t=0,n=960,a=500,l,f,d;return d={stream:function(u){return l&&f===u?l:l=z0(e,t,n,a)(f=u)},extent:function(u){return arguments.length?(e=+u[0][0],t=+u[0][1],n=+u[1][0],a=+u[1][1],l=f=null,d):[[e,t],[n,a]]}}}var Rx,jx,$g,Ug,mf={sphere:In,point:In,lineStart:aB,lineEnd:In,polygonStart:In,polygonEnd:In};function aB(){mf.point=lB,mf.lineEnd=sB}function sB(){mf.point=mf.lineEnd=In}function lB(e,t){e*=gr,t*=gr,jx=e,$g=rr(t),Ug=ar(t),mf.point=uB}function uB(e,t){e*=gr,t*=gr;var n=rr(t),a=ar(t),l=Nr(e-jx),f=ar(l),d=rr(l),u=a*d,w=Ug*n-$g*a*f,E=$g*n+Ug*a*f;Rx.add(ho(xi(u*u+w*w),E)),jx=e,$g=n,Ug=a}function Zk(e){return Rx=new qi,Na(e,mf),+Rx}var Lx=[null,null],cB={type:"LineString",coordinates:Lx};function Wy(e,t){return Lx[0]=e,Lx[1]=t,Zk(cB)}var mP={Feature:function(e,t){return Hy(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,a=-1,l=n.length;++a<l;)if(Hy(n[a].geometry,t))return!0;return!1}},gP={Sphere:function(){return!0},Point:function(e,t){return yP(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,a=-1,l=n.length;++a<l;)if(yP(n[a],t))return!0;return!1},LineString:function(e,t){return vP(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,a=-1,l=n.length;++a<l;)if(vP(n[a],t))return!0;return!1},Polygon:function(e,t){return _P(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,a=-1,l=n.length;++a<l;)if(_P(n[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,a=-1,l=n.length;++a<l;)if(Hy(n[a],t))return!0;return!1}};function Hy(e,t){return e&&gP.hasOwnProperty(e.type)?gP[e.type](e,t):!1}function yP(e,t){return Wy(e,t)===0}function vP(e,t){for(var n,a,l,f=0,d=e.length;f<d;f++){if(a=Wy(e[f],t),a===0||f>0&&(l=Wy(e[f],e[f-1]),l>0&&n<=l&&a<=l&&(n+a-l)*(1-Math.pow((n-a)/l,2))<Rp*l))return!0;n=a}return!1}function _P(e,t){return!!Gk(e.map(hB),qk(t))}function hB(e){return e=e.map(qk),e.pop(),e}function qk(e){return[e[0]*gr,e[1]*gr]}function fB(e,t){return(e&&mP.hasOwnProperty(e.type)?mP[e.type]:Hy)(e,t)}function xP(e,t,n){var a=Wh(e,t-fr,n).concat(t);return function(l){return a.map(function(f){return[l,f]})}}function wP(e,t,n){var a=Wh(e,t-fr,n).concat(t);return function(l){return a.map(function(f){return[f,l]})}}function Xk(){var e,t,n,a,l,f,d,u,w=10,E=w,I=90,b=360,T,R,z,j,se=2.5;function K(){return{type:"MultiLineString",coordinates:Z()}}function Z(){return Wh(pg(a/I)*I,n,I).map(z).concat(Wh(pg(u/b)*b,d,b).map(j)).concat(Wh(pg(t/w)*w,e,w).filter(function(V){return Nr(V%I)>fr}).map(T)).concat(Wh(pg(f/E)*E,l,E).filter(function(V){return Nr(V%b)>fr}).map(R))}return K.lines=function(){return Z().map(function(V){return{type:"LineString",coordinates:V}})},K.outline=function(){return{type:"Polygon",coordinates:[z(a).concat(j(d).slice(1),z(n).reverse().slice(1),j(u).reverse().slice(1))]}},K.extent=function(V){return arguments.length?K.extentMajor(V).extentMinor(V):K.extentMinor()},K.extentMajor=function(V){return arguments.length?(a=+V[0][0],n=+V[1][0],u=+V[0][1],d=+V[1][1],a>n&&(V=a,a=n,n=V),u>d&&(V=u,u=d,d=V),K.precision(se)):[[a,u],[n,d]]},K.extentMinor=function(V){return arguments.length?(t=+V[0][0],e=+V[1][0],f=+V[0][1],l=+V[1][1],t>e&&(V=t,t=e,e=V),f>l&&(V=f,f=l,l=V),K.precision(se)):[[t,f],[e,l]]},K.step=function(V){return arguments.length?K.stepMajor(V).stepMinor(V):K.stepMinor()},K.stepMajor=function(V){return arguments.length?(I=+V[0],b=+V[1],K):[I,b]},K.stepMinor=function(V){return arguments.length?(w=+V[0],E=+V[1],K):[w,E]},K.precision=function(V){return arguments.length?(se=+V,T=xP(f,l,90),R=wP(t,e,se),z=xP(u,d,90),j=wP(a,n,se),K):se},K.extentMajor([[-180,-90+fr],[180,90-fr]]).extentMinor([[-180,-80-fr],[180,80+fr]])}function dB(){return Xk()()}function pB(e,t){var n=e[0]*gr,a=e[1]*gr,l=t[0]*gr,f=t[1]*gr,d=ar(a),u=rr(a),w=ar(f),E=rr(f),I=d*ar(n),b=d*rr(n),T=w*ar(l),R=w*rr(l),z=2*fo(xi(tP(f-a)+d*w*tP(l-n))),j=rr(z),se=z?function(K){var Z=rr(K*=z)/j,V=rr(z-K)/j,ae=V*I+Z*T,X=V*b+Z*R,U=V*u+Z*E;return[ho(X,ae)*on,ho(U,xi(ae*ae+X*X))*on]}:function(){return[n*on,a*on]};return se.distance=z,se}const jp=e=>e;var P_=new qi,zx=new qi,Kk,Yk,Bx,Dx,al={point:In,lineStart:In,lineEnd:In,polygonStart:function(){al.lineStart=mB,al.lineEnd=yB},polygonEnd:function(){al.lineStart=al.lineEnd=al.point=In,P_.add(Nr(zx)),zx=new qi},result:function(){var e=P_/2;return P_=new qi,e}};function mB(){al.point=gB}function gB(e,t){al.point=Jk,Kk=Bx=e,Yk=Dx=t}function Jk(e,t){zx.add(Dx*e-Bx*t),Bx=e,Dx=t}function yB(){Jk(Kk,Yk)}var gf=1/0,Zy=gf,Lp=-gf,qy=Lp,Xy={point:vB,lineStart:In,lineEnd:In,polygonStart:In,polygonEnd:In,result:function(){var e=[[gf,Zy],[Lp,qy]];return Lp=qy=-(Zy=gf=1/0),e}};function vB(e,t){e<gf&&(gf=e),e>Lp&&(Lp=e),t<Zy&&(Zy=t),t>qy&&(qy=t)}var Nx=0,$x=0,Ud=0,Ky=0,Yy=0,Hh=0,Ux=0,Vx=0,Vd=0,Qk,e3,Ss,Es,ha={point:Ec,lineStart:bP,lineEnd:SP,polygonStart:function(){ha.lineStart=wB,ha.lineEnd=bB},polygonEnd:function(){ha.point=Ec,ha.lineStart=bP,ha.lineEnd=SP},result:function(){var e=Vd?[Ux/Vd,Vx/Vd]:Hh?[Ky/Hh,Yy/Hh]:Ud?[Nx/Ud,$x/Ud]:[NaN,NaN];return Nx=$x=Ud=Ky=Yy=Hh=Ux=Vx=Vd=0,e}};function Ec(e,t){Nx+=e,$x+=t,++Ud}function bP(){ha.point=_B}function _B(e,t){ha.point=xB,Ec(Ss=e,Es=t)}function xB(e,t){var n=e-Ss,a=t-Es,l=xi(n*n+a*a);Ky+=l*(Ss+e)/2,Yy+=l*(Es+t)/2,Hh+=l,Ec(Ss=e,Es=t)}function SP(){ha.point=Ec}function wB(){ha.point=SB}function bB(){t3(Qk,e3)}function SB(e,t){ha.point=t3,Ec(Qk=Ss=e,e3=Es=t)}function t3(e,t){var n=e-Ss,a=t-Es,l=xi(n*n+a*a);Ky+=l*(Ss+e)/2,Yy+=l*(Es+t)/2,Hh+=l,l=Es*e-Ss*t,Ux+=l*(Ss+e),Vx+=l*(Es+t),Vd+=l*3,Ec(Ss=e,Es=t)}function r3(e){this._context=e}r3.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,co);break}}},result:In};var Gx=new qi,A_,n3,i3,Gd,Wd,zp={point:In,lineStart:function(){zp.point=EB},lineEnd:function(){A_&&o3(n3,i3),zp.point=In},polygonStart:function(){A_=!0},polygonEnd:function(){A_=null},result:function(){var e=+Gx;return Gx=new qi,e}};function EB(e,t){zp.point=o3,n3=Gd=e,i3=Wd=t}function o3(e,t){Gd-=e,Wd-=t,Gx.add(xi(Gd*Gd+Wd*Wd)),Gd=e,Wd=t}function a3(){this._string=[]}a3.prototype={_radius:4.5,_circle:EP(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=EP(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function EP(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function TB(e,t){var n=4.5,a,l;function f(d){return d&&(typeof n=="function"&&l.pointRadius(+n.apply(this,arguments)),Na(d,a(l))),l.result()}return f.area=function(d){return Na(d,a(al)),al.result()},f.measure=function(d){return Na(d,a(zp)),zp.result()},f.bounds=function(d){return Na(d,a(Xy)),Xy.result()},f.centroid=function(d){return Na(d,a(ha)),ha.result()},f.projection=function(d){return arguments.length?(a=d==null?(e=null,jp):(e=d).stream,f):e},f.context=function(d){return arguments.length?(l=d==null?(t=null,new a3):new r3(t=d),typeof n!="function"&&l.pointRadius(n),f):t},f.pointRadius=function(d){return arguments.length?(n=typeof d=="function"?d:(l.pointRadius(+d),+d),f):n},f.projection(e).context(t)}function PB(e){return{stream:Kp(e)}}function Kp(e){return function(t){var n=new Wx;for(var a in e)n[a]=e[a];return n.stream=t,n}}function Wx(){}Wx.prototype={constructor:Wx,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ob(e,t,n){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),Na(n,e.stream(Xy)),t(Xy.result()),a!=null&&e.clipExtent(a),e}function B0(e,t,n){return Ob(e,function(a){var l=t[1][0]-t[0][0],f=t[1][1]-t[0][1],d=Math.min(l/(a[1][0]-a[0][0]),f/(a[1][1]-a[0][1])),u=+t[0][0]+(l-d*(a[1][0]+a[0][0]))/2,w=+t[0][1]+(f-d*(a[1][1]+a[0][1]))/2;e.scale(150*d).translate([u,w])},n)}function Fb(e,t,n){return B0(e,[[0,0],t],n)}function Rb(e,t,n){return Ob(e,function(a){var l=+t,f=l/(a[1][0]-a[0][0]),d=(l-f*(a[1][0]+a[0][0]))/2,u=-f*a[0][1];e.scale(150*f).translate([d,u])},n)}function jb(e,t,n){return Ob(e,function(a){var l=+t,f=l/(a[1][1]-a[0][1]),d=-f*a[0][0],u=(l-f*(a[1][1]+a[0][1]))/2;e.scale(150*f).translate([d,u])},n)}var TP=16,AB=ar(30*gr);function PP(e,t){return+t?CB(e,t):IB(e)}function IB(e){return Kp({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function CB(e,t){function n(a,l,f,d,u,w,E,I,b,T,R,z,j,se){var K=E-a,Z=I-l,V=K*K+Z*Z;if(V>4*t&&j--){var ae=d+T,X=u+R,U=w+z,P=xi(ae*ae+X*X+U*U),L=fo(U/=P),B=Nr(Nr(U)-1)<fr||Nr(f-b)<fr?(f+b)/2:ho(X,ae),Q=e(B,L),q=Q[0],ve=Q[1],ye=q-a,fe=ve-l,oe=Z*ye-K*fe;(oe*oe/V>t||Nr((K*ye+Z*fe)/V-.5)>.3||d*T+u*R+w*z<AB)&&(n(a,l,f,d,u,w,q,ve,B,ae/=P,X/=P,U,j,se),se.point(q,ve),n(q,ve,B,ae,X,U,E,I,b,T,R,z,j,se))}}return function(a){var l,f,d,u,w,E,I,b,T,R,z,j,se={point:K,lineStart:Z,lineEnd:ae,polygonStart:function(){a.polygonStart(),se.lineStart=X},polygonEnd:function(){a.polygonEnd(),se.lineStart=Z}};function K(L,B){L=e(L,B),a.point(L[0],L[1])}function Z(){b=NaN,se.point=V,a.lineStart()}function V(L,B){var Q=Sc([L,B]),q=e(L,B);n(b,T,I,R,z,j,b=q[0],T=q[1],I=L,R=Q[0],z=Q[1],j=Q[2],TP,a),a.point(b,T)}function ae(){se.point=K,a.lineEnd()}function X(){Z(),se.point=U,se.lineEnd=P}function U(L,B){V(l=L,B),f=b,d=T,u=R,w=z,E=j,se.point=V}function P(){n(b,T,I,R,z,j,f,d,l,u,w,E,TP,a),se.lineEnd=ae,ae()}return se}}var MB=Kp({point:function(e,t){this.stream.point(e*gr,t*gr)}});function kB(e){return Kp({point:function(t,n){var a=e(t,n);return this.stream.point(a[0],a[1])}})}function OB(e,t,n,a,l){function f(d,u){return d*=a,u*=l,[t+e*d,n-e*u]}return f.invert=function(d,u){return[(d-t)/e*a,(n-u)/e*l]},f}function AP(e,t,n,a,l,f){if(!f)return OB(e,t,n,a,l);var d=ar(f),u=rr(f),w=d*e,E=u*e,I=d/e,b=u/e,T=(u*n-d*t)/e,R=(u*t+d*n)/e;function z(j,se){return j*=a,se*=l,[w*j-E*se+t,n-E*j-w*se]}return z.invert=function(j,se){return[a*(I*j-b*se+T),l*(R-b*j-I*se)]},z}function ks(e){return Lb(function(){return e})()}function Lb(e){var t,n=150,a=480,l=250,f=0,d=0,u=0,w=0,E=0,I,b=0,T=1,R=1,z=null,j=Fx,se=null,K,Z,V,ae=jp,X=.5,U,P,L,B,Q;function q(oe){return L(oe[0]*gr,oe[1]*gr)}function ve(oe){return oe=L.invert(oe[0],oe[1]),oe&&[oe[0]*on,oe[1]*on]}q.stream=function(oe){return B&&Q===oe?B:B=MB(kB(I)(j(U(ae(Q=oe)))))},q.preclip=function(oe){return arguments.length?(j=oe,z=void 0,fe()):j},q.postclip=function(oe){return arguments.length?(ae=oe,se=K=Z=V=null,fe()):ae},q.clipAngle=function(oe){return arguments.length?(j=+oe?Hk(z=oe*gr):(z=null,Fx),fe()):z*on},q.clipExtent=function(oe){return arguments.length?(ae=oe==null?(se=K=Z=V=null,jp):z0(se=+oe[0][0],K=+oe[0][1],Z=+oe[1][0],V=+oe[1][1]),fe()):se==null?null:[[se,K],[Z,V]]},q.scale=function(oe){return arguments.length?(n=+oe,ye()):n},q.translate=function(oe){return arguments.length?(a=+oe[0],l=+oe[1],ye()):[a,l]},q.center=function(oe){return arguments.length?(f=oe[0]%360*gr,d=oe[1]%360*gr,ye()):[f*on,d*on]},q.rotate=function(oe){return arguments.length?(u=oe[0]%360*gr,w=oe[1]%360*gr,E=oe.length>2?oe[2]%360*gr:0,ye()):[u*on,w*on,E*on]},q.angle=function(oe){return arguments.length?(b=oe%360*gr,ye()):b*on},q.reflectX=function(oe){return arguments.length?(T=oe?-1:1,ye()):T<0},q.reflectY=function(oe){return arguments.length?(R=oe?-1:1,ye()):R<0},q.precision=function(oe){return arguments.length?(U=PP(P,X=oe*oe),fe()):xi(X)},q.fitExtent=function(oe,ce){return B0(q,oe,ce)},q.fitSize=function(oe,ce){return Fb(q,oe,ce)},q.fitWidth=function(oe,ce){return Rb(q,oe,ce)},q.fitHeight=function(oe,ce){return jb(q,oe,ce)};function ye(){var oe=AP(n,0,0,T,R,b).apply(null,t(f,d)),ce=AP(n,a-oe[0],l-oe[1],T,R,b);return I=kb(u,w,E),P=kx(t,ce),L=kx(I,P),U=PP(P,X),fe()}function fe(){return B=Q=null,q}return function(){return t=e.apply(this,arguments),q.invert=t.invert&&ve,ye()}}function zb(e){var t=0,n=Mr/3,a=Lb(e),l=a(t,n);return l.parallels=function(f){return arguments.length?a(t=f[0]*gr,n=f[1]*gr):[t*on,n*on]},l}function FB(e){var t=ar(e);function n(a,l){return[a*t,rr(l)/t]}return n.invert=function(a,l){return[a/t,fo(l*t)]},n}function s3(e,t){var n=rr(e),a=(n+rr(t))/2;if(Nr(a)<fr)return FB(e);var l=1+n*(2*a-n),f=xi(l)/a;function d(u,w){var E=xi(l-2*a*rr(w))/a;return[E*rr(u*=a),f-E*ar(u)]}return d.invert=function(u,w){var E=f-w,I=ho(u,Nr(E))*da(E);return E*a<0&&(I-=Mr*da(u)*da(E)),[I/a,fo((l-(u*u+E*E)*a*a)/(2*a))]},d}function Jy(){return zb(s3).scale(155.424).center([0,33.6442])}function l3(){return Jy().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function RB(e){var t=e.length;return{point:function(n,a){for(var l=-1;++l<t;)e[l].point(n,a)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function jB(){var e,t,n=l3(),a,l=Jy().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f,d=Jy().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,w,E={point:function(T,R){w=[T,R]}};function I(T){var R=T[0],z=T[1];return w=null,a.point(R,z),w||(f.point(R,z),w)||(u.point(R,z),w)}I.invert=function(T){var R=n.scale(),z=n.translate(),j=(T[0]-z[0])/R,se=(T[1]-z[1])/R;return(se>=.12&&se<.234&&j>=-.425&&j<-.214?l:se>=.166&&se<.234&&j>=-.214&&j<-.115?d:n).invert(T)},I.stream=function(T){return e&&t===T?e:e=RB([n.stream(t=T),l.stream(T),d.stream(T)])},I.precision=function(T){return arguments.length?(n.precision(T),l.precision(T),d.precision(T),b()):n.precision()},I.scale=function(T){return arguments.length?(n.scale(T),l.scale(T*.35),d.scale(T),I.translate(n.translate())):n.scale()},I.translate=function(T){if(!arguments.length)return n.translate();var R=n.scale(),z=+T[0],j=+T[1];return a=n.translate(T).clipExtent([[z-.455*R,j-.238*R],[z+.455*R,j+.238*R]]).stream(E),f=l.translate([z-.307*R,j+.201*R]).clipExtent([[z-.425*R+fr,j+.12*R+fr],[z-.214*R-fr,j+.234*R-fr]]).stream(E),u=d.translate([z-.205*R,j+.212*R]).clipExtent([[z-.214*R+fr,j+.166*R+fr],[z-.115*R-fr,j+.234*R-fr]]).stream(E),b()},I.fitExtent=function(T,R){return B0(I,T,R)},I.fitSize=function(T,R){return Fb(I,T,R)},I.fitWidth=function(T,R){return Rb(I,T,R)},I.fitHeight=function(T,R){return jb(I,T,R)};function b(){return e=t=null,I}return I.scale(1070)}function u3(e){return function(t,n){var a=ar(t),l=ar(n),f=e(a*l);return f===1/0?[2,0]:[f*l*rr(t),f*rr(n)]}}function Yp(e){return function(t,n){var a=xi(t*t+n*n),l=e(a),f=rr(l),d=ar(l);return[ho(t*f,a*d),fo(a&&n*f/a)]}}var Bb=u3(function(e){return xi(2/(1+e))});Bb.invert=Yp(function(e){return 2*fo(e/2)});function LB(){return ks(Bb).scale(124.75).clipAngle(180-.001)}var Db=u3(function(e){return(e=Ck(e))&&e/rr(e)});Db.invert=Yp(function(e){return e});function zB(){return ks(Db).scale(79.4188).clipAngle(180-.001)}function Jp(e,t){return[e,Oy(Cb((Dn+t)/2))]}Jp.invert=function(e,t){return[e,2*If(Ik(t))-Dn]};function BB(){return c3(Jp).scale(961/co)}function c3(e){var t=ks(e),n=t.center,a=t.scale,l=t.translate,f=t.clipExtent,d=null,u,w,E;t.scale=function(b){return arguments.length?(a(b),I()):a()},t.translate=function(b){return arguments.length?(l(b),I()):l()},t.center=function(b){return arguments.length?(n(b),I()):n()},t.clipExtent=function(b){return arguments.length?(b==null?d=u=w=E=null:(d=+b[0][0],u=+b[0][1],w=+b[1][0],E=+b[1][1]),I()):d==null?null:[[d,u],[w,E]]};function I(){var b=Mr*a(),T=t(Nk(t.rotate()).invert([0,0]));return f(d==null?[[T[0]-b,T[1]-b],[T[0]+b,T[1]+b]]:e===Jp?[[Math.max(T[0]-b,d),u],[Math.min(T[0]+b,w),E]]:[[d,Math.max(T[1]-b,u)],[w,Math.min(T[1]+b,E)]])}return I()}function _g(e){return Cb((Dn+e)/2)}function h3(e,t){var n=ar(e),a=e===t?rr(e):Oy(n/ar(t))/Oy(_g(t)/_g(e)),l=n*S_(_g(e),a)/a;if(!a)return Jp;function f(d,u){l>0?u<-Dn+fr&&(u=-Dn+fr):u>Dn-fr&&(u=Dn-fr);var w=l/S_(_g(u),a);return[w*rr(a*d),l-w*ar(a*d)]}return f.invert=function(d,u){var w=l-u,E=da(a)*xi(d*d+w*w),I=ho(d,Nr(w))*da(w);return w*a<0&&(I-=Mr*da(d)*da(w)),[I/a,2*If(S_(l/E,1/a))-Dn]},f}function DB(){return zb(h3).scale(109.5).parallels([30,30])}function Bp(e,t){return[e,t]}Bp.invert=Bp;function NB(){return ks(Bp).scale(152.63)}function f3(e,t){var n=ar(e),a=e===t?rr(e):(n-ar(t))/(t-e),l=n/a+e;if(Nr(a)<fr)return Bp;function f(d,u){var w=l-u,E=a*d;return[w*rr(E),l-w*ar(E)]}return f.invert=function(d,u){var w=l-u,E=ho(d,Nr(w))*da(w);return w*a<0&&(E-=Mr*da(d)*da(w)),[E/a,l-da(a)*xi(d*d+w*w)]},f}function $B(){return zb(f3).scale(131.154).center([0,13.9389])}var op=1.340264,ap=-.081106,sp=893e-6,lp=.003796,Qy=xi(3)/2,UB=12;function Nb(e,t){var n=fo(Qy*rr(t)),a=n*n,l=a*a*a;return[e*ar(n)/(Qy*(op+3*ap*a+l*(7*sp+9*lp*a))),n*(op+ap*a+l*(sp+lp*a))]}Nb.invert=function(e,t){for(var n=t,a=n*n,l=a*a*a,f=0,d,u,w;f<UB&&(u=n*(op+ap*a+l*(sp+lp*a))-t,w=op+3*ap*a+l*(7*sp+9*lp*a),n-=d=u/w,a=n*n,l=a*a*a,!(Nr(d)<Rp));++f);return[Qy*e*(op+3*ap*a+l*(7*sp+9*lp*a))/ar(n),fo(rr(n)/Qy)]};function VB(){return ks(Nb).scale(177.158)}function $b(e,t){var n=ar(t),a=ar(e)*n;return[n*rr(e)/a,rr(t)/a]}$b.invert=Yp(If);function GB(){return ks($b).scale(144.049).clipAngle(60)}function WB(){var e=1,t=0,n=0,a=1,l=1,f=0,d,u,w=null,E,I,b,T=1,R=1,z=Kp({point:function(ae,X){var U=V([ae,X]);this.stream.point(U[0],U[1])}}),j=jp,se,K;function Z(){return T=e*a,R=e*l,se=K=null,V}function V(ae){var X=ae[0]*T,U=ae[1]*R;if(f){var P=U*d-X*u;X=X*d+U*u,U=P}return[X+t,U+n]}return V.invert=function(ae){var X=ae[0]-t,U=ae[1]-n;if(f){var P=U*d+X*u;X=X*d-U*u,U=P}return[X/T,U/R]},V.stream=function(ae){return se&&K===ae?se:se=z(j(K=ae))},V.postclip=function(ae){return arguments.length?(j=ae,w=E=I=b=null,Z()):j},V.clipExtent=function(ae){return arguments.length?(j=ae==null?(w=E=I=b=null,jp):z0(w=+ae[0][0],E=+ae[0][1],I=+ae[1][0],b=+ae[1][1]),Z()):w==null?null:[[w,E],[I,b]]},V.scale=function(ae){return arguments.length?(e=+ae,Z()):e},V.translate=function(ae){return arguments.length?(t=+ae[0],n=+ae[1],Z()):[t,n]},V.angle=function(ae){return arguments.length?(f=ae%360*gr,u=rr(f),d=ar(f),Z()):f*on},V.reflectX=function(ae){return arguments.length?(a=ae?-1:1,Z()):a<0},V.reflectY=function(ae){return arguments.length?(l=ae?-1:1,Z()):l<0},V.fitExtent=function(ae,X){return B0(V,ae,X)},V.fitSize=function(ae,X){return Fb(V,ae,X)},V.fitWidth=function(ae,X){return Rb(V,ae,X)},V.fitHeight=function(ae,X){return jb(V,ae,X)},V}function Ub(e,t){var n=t*t,a=n*n;return[e*(.8707-.131979*n+a*(-.013791+a*(.003971*n-.001529*a))),t*(1.007226+n*(.015085+a*(-.044475+.028874*n-.005916*a)))]}Ub.invert=function(e,t){var n=t,a=25,l;do{var f=n*n,d=f*f;n-=l=(n*(1.007226+f*(.015085+d*(-.044475+.028874*f-.005916*d)))-t)/(1.007226+f*(.015085*3+d*(-.044475*7+.028874*9*f-.005916*11*d)))}while(Nr(l)>fr&&--a>0);return[e/(.8707+(f=n*n)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),n]};function HB(){return ks(Ub).scale(175.295)}function Vb(e,t){return[ar(t)*rr(e),rr(t)]}Vb.invert=Yp(fo);function ZB(){return ks(Vb).scale(249.5).clipAngle(90+fr)}function Gb(e,t){var n=ar(t),a=1+ar(e)*n;return[n*rr(e)/a,rr(t)/a]}Gb.invert=Yp(function(e){return 2*If(e)});function qB(){return ks(Gb).scale(250).clipAngle(142)}function Wb(e,t){return[Oy(Cb((Dn+t)/2)),-e]}Wb.invert=function(e,t){return[-t,2*If(Ik(e))-Dn]};function XB(){var e=c3(Wb),t=e.center,n=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?n([a[0],a[1],a.length>2?a[2]+90:90]):(a=n(),[a[0],a[1],a[2]-90])},n([0,0,90]).scale(159.155)}const KB=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:l3,geoAlbersUsa:jB,geoArea:$6,geoAzimuthalEqualArea:LB,geoAzimuthalEqualAreaRaw:Bb,geoAzimuthalEquidistant:zB,geoAzimuthalEquidistantRaw:Db,geoBounds:W6,geoCentroid:Y6,geoCircle:J6,geoClipAntimeridian:Fx,geoClipCircle:Hk,geoClipExtent:oB,geoClipRectangle:z0,geoConicConformal:DB,geoConicConformalRaw:h3,geoConicEqualArea:Jy,geoConicEqualAreaRaw:s3,geoConicEquidistant:$B,geoConicEquidistantRaw:f3,geoContains:fB,geoDistance:Wy,geoEqualEarth:VB,geoEqualEarthRaw:Nb,geoEquirectangular:NB,geoEquirectangularRaw:Bp,geoGnomonic:GB,geoGnomonicRaw:$b,geoGraticule:Xk,geoGraticule10:dB,geoIdentity:WB,geoInterpolate:pB,geoLength:Zk,geoMercator:BB,geoMercatorRaw:Jp,geoNaturalEarth1:HB,geoNaturalEarth1Raw:Ub,geoOrthographic:ZB,geoOrthographicRaw:Vb,geoPath:TB,geoProjection:ks,geoProjectionMutator:Lb,geoRotation:Nk,geoStereographic:qB,geoStereographicRaw:Gb,geoStream:Na,geoTransform:PB,geoTransverseMercator:XB,geoTransverseMercatorRaw:Wb},Symbol.toStringTag,{value:"Module"})),YB=_w(KB);var Tu=2*Math.PI*6378137/2,JB=Math.PI/180;function d3(e){return e=e||256,2*Math.PI*6378137/e}function QB(e){var t=e[0],n=e[1],a=e[2];return(1<<a)*((1<<a)+t)+n}function Hx(e,t,n){var a=p3(e,t,n);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function p3(e,t,n){var a=t,l=Qb(e[0]),f=Jb(e[1]),d=Math.sin(f*JB),u=Math.pow(2,a),w=u*(l/360+.5),E=u*(.5-.25*Math.log((1+d)/(1-d))/Math.PI);return Ic([w,E,a],n)}function eD(e,t=6){var n=e[0],a=e[1],l=e[2],f=e[3],d=(n-l)/2+l,u=(a-f)/2+f;return t!=null&&(d=Number(d.toFixed(t)),u=Number(u.toFixed(t))),[d,u]}function e0(e,t,n={enable:!0,decimal:1}){e=D0(e,t);var a=e[0],l=e[1],f=a*Tu/180,d=Math.log(Math.tan((90+l)*Math.PI/360))/(Math.PI/180);return d=d*Tu/180,n.enable&&(f=Number(f.toFixed(n.decimal)),d=Number(d.toFixed(n.decimal))),[f,d]}function Zx(e,t=6){var n=e[0],a=e[1],l=n/Tu*180,f=a/Tu*180;return f=180/Math.PI*(2*Math.atan(Math.exp(f*Math.PI/180))-Math.PI/2),t!=null&&(l=Number(l.toFixed(t)),f=Number(f.toFixed(t))),[l,f]}function Hb(e,t,n){var a=e[0],l=e[1],f=Kb(t,n),d=(a+Tu)/f,u=(l+Tu)/f;return[d,u,t]}function m3(e,t,n){e=D0(e,n);var a=e0(e),l=Hb(a,t);return Zb(l)}function tD(e,t,n){if(e=D0(e,n),t===0)return[0,0,0];var a=m3(e,t);return y3(a)}function rD(e,t){if(t===0)return[0,0,0];var n=Hb(e,t);return Zb(n)}function qx(e,t,n=1){var a=e[0],l=e[1],f=e[2],d=Kb(f,t),u=a*d-Tu,w=l*d-Tu;return n!=null&&(u=Number(u.toFixed(n)),w=Number(w.toFixed(n))),[u,w]}function Zb(e,t,n){t=t||256;var a=e[0],l=e[1],f=e[2];if(f===0)return[0,0,0];Xb(f);var d=Math.ceil(a/t)-1,u=Math.ceil(l/t)-1;return d<0&&(d=0),u<0&&(u=0),[d,u,f]}function qb(e,t,n){Ic(e,n),t=t||256;var a=e[0],l=e[1],f=e[2],d=qx([a*t,l*t,f]),u=qx([(a+1)*t,(l+1)*t,f]);return[d[0],d[1],u[0],u[1]]}function g3(e,t){Ic(e,t);var n=e[0],a=e[1],l=e[2];if(l===0)return[-180,-85.051129,180,85.051129];var f=qb([n,a,l]),d=f[0],u=f[1],w=f[2],E=f[3],I=Zx([d,u,l]),b=Zx([w,E,l]);return[I[0],I[1],b[0],b[1]]}function nD(e){var t=Qp(e);return qb(t)}function iD(e){var t=Qp(e);return g3(t)}function y3(e,t){Ic(e,t);var n=e[0],a=e[1],l=e[2];if(l===0)return[0,0,0];var f=n,d=Math.pow(2,l)-1-a;return[f,d,l]}function Qp(e){var t=e[0],n=e[1],a=e[2],l=t,f=Math.pow(2,a)-n-1;return[l,f,a]}function oD(e){var t=Qp(e);return v3(t)}function v3(e,t){Ic(e,t);var n=e[0],a=e[1],l=e[2];if(l===0)return"";var f="";return a=Math.pow(2,l)-1-a,Yb(l,0,-1).map(function(d){var u=0,w=1<<d-1;n&w&&(u+=1),a&w&&(u+=2),f=f.concat(u)}),f}function aD(e){var t=_3(e);return Qp(t)}function _3(e){var t=0,n=0,a=e.length;return Yb(a,0,-1).map(function(l){var f=1<<l-1;switch(parseInt(e[a-l],0)){case 0:break;case 1:t+=f;break;case 2:n+=f;break;case 3:t+=f,n+=f;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,n,a]}function sD(e){var t=e0([e[0],e[1]]),n=e0([e[2],e[3]]);return[t[0],t[1],n[0],n[1]]}function Ic(e,t){var n=e[0],a=e[1],l=e[2];if(t===!1)return e;if(l==null)throw new Error("<zoom> is required");if(n==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return l=Xb(l),e=x3(e),e}function x3(e){var t=e[0],n=e[1],a=e[2],l=Math.pow(2,a);return t=t%l,t<0&&(t=t+l),[t,n,a]}function Xb(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function D0(e,t){if(t===!1)return e;var n=Qb(e[0]),a=Jb(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[n,a]}function Kb(e,t){return d3(t)/Math.pow(2,e)}function Yb(e,t,n){t==null&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/n),0),l=Array(a),f=0;f<a;f++,e+=n)l[f]=e;return l}function lD(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],n=e[0][1],a=e[0][2],l=e[0][3];return e.map(function(f){f[0]<t&&(t=f[0]),f[1]<n&&(n=f[1]),f[2]>a&&(a=f[2]),f[3]>l&&(l=f[3])}),[t,n,a,l]}}function uD(e){try{return Ic(e),!0}catch{return!1}}function Jb(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Qb(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function cD(e){var t=Hx([e[0],e[1]],32),n=Hx([e[2],e[3]],32),a=[t[0],t[1],n[0],n[1]],l=hD(a);if(l===0)return[0,0,0];var f=a[0]>>>32-l,d=a[1]>>>32-l;return[f,d,l]}function hD(e){for(var t=28,n=0;n<t;n++){var a=1<<32-(n+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return n}return t}const fD=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:eD,bboxToMeters:sD,bboxToTile:cD,googleToBBox:iD,googleToBBoxMeters:nD,googleToQuadkey:oD,googleToTile:Qp,hash:QB,initialResolution:d3,latitude:Jb,lngLatToGoogle:tD,lngLatToMeters:e0,lngLatToTile:m3,longitude:Qb,maxBBox:lD,metersToLngLat:Zx,metersToPixels:Hb,metersToTile:rD,pixelsToMeters:qx,pixelsToTile:Zb,pointToTile:Hx,pointToTileFraction:p3,quadkeyToGoogle:_3,quadkeyToTile:aD,range:Yb,resolution:Kb,tileToBBox:g3,tileToBBoxMeters:qb,tileToGoogle:y3,tileToQuadkey:v3,validTile:uD,validateLngLat:D0,validateTile:Ic,validateZoom:Xb,wrapTile:x3},Symbol.toStringTag,{value:"Module"})),dD=_w(fD);var N0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */N0.read=function(e,t,n,a,l){var f,d,u=l*8-a-1,w=(1<<u)-1,E=w>>1,I=-7,b=n?l-1:0,T=n?-1:1,R=e[t+b];for(b+=T,f=R&(1<<-I)-1,R>>=-I,I+=u;I>0;f=f*256+e[t+b],b+=T,I-=8);for(d=f&(1<<-I)-1,f>>=-I,I+=a;I>0;d=d*256+e[t+b],b+=T,I-=8);if(f===0)f=1-E;else{if(f===w)return d?NaN:(R?-1:1)*(1/0);d=d+Math.pow(2,a),f=f-E}return(R?-1:1)*d*Math.pow(2,f-a)};N0.write=function(e,t,n,a,l,f){var d,u,w,E=f*8-l-1,I=(1<<E)-1,b=I>>1,T=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=a?0:f-1,z=a?1:-1,j=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,d=I):(d=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-d))<1&&(d--,w*=2),d+b>=1?t+=T/w:t+=T*Math.pow(2,1-b),t*w>=2&&(d++,w/=2),d+b>=I?(u=0,d=I):d+b>=1?(u=(t*w-1)*Math.pow(2,l),d=d+b):(u=t*Math.pow(2,b-1)*Math.pow(2,l),d=0));l>=8;e[n+R]=u&255,R+=z,u/=256,l-=8);for(d=d<<l|u,E+=l;E>0;e[n+R]=d&255,R+=z,d/=256,E-=8);e[n+R-z]|=j*128};var pD=qr,xg=N0;function qr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}qr.Varint=0;qr.Fixed64=1;qr.Bytes=2;qr.Fixed32=5;var Xx=65536*65536,IP=1/Xx,mD=12,w3=typeof TextDecoder>"u"?null:new TextDecoder("utf8");qr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var a=this.readVarint(),l=a>>3,f=this.pos;this.type=a&7,e(l,t,this),this.pos===f&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=wg(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=MP(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=wg(this.buf,this.pos)+wg(this.buf,this.pos+4)*Xx;return this.pos+=8,e},readSFixed64:function(){var e=wg(this.buf,this.pos)+MP(this.buf,this.pos+4)*Xx;return this.pos+=8,e},readFloat:function(){var e=xg.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=xg.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,n,a;return a=t[this.pos++],n=a&127,a<128||(a=t[this.pos++],n|=(a&127)<<7,a<128)||(a=t[this.pos++],n|=(a&127)<<14,a<128)||(a=t[this.pos++],n|=(a&127)<<21,a<128)?n:(a=t[this.pos],n|=(a&15)<<28,gD(n,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=mD&&w3?MD(this.buf,t,e):CD(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==qr.Bytes)return e.push(this.readVarint(t));var n=tl(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==qr.Bytes)return e.push(this.readSVarint());var t=tl(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==qr.Bytes)return e.push(this.readBoolean());var t=tl(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==qr.Bytes)return e.push(this.readFloat());var t=tl(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==qr.Bytes)return e.push(this.readDouble());var t=tl(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==qr.Bytes)return e.push(this.readFixed32());var t=tl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==qr.Bytes)return e.push(this.readSFixed32());var t=tl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==qr.Bytes)return e.push(this.readFixed64());var t=tl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==qr.Bytes)return e.push(this.readSFixed64());var t=tl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===qr.Varint)for(;this.buf[this.pos++]>127;);else if(t===qr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===qr.Fixed32)this.pos+=4;else if(t===qr.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Sh(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Sh(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Sh(this.buf,e&-1,this.pos),Sh(this.buf,Math.floor(e*IP),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Sh(this.buf,e&-1,this.pos),Sh(this.buf,Math.floor(e*IP),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){yD(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=kD(this.buf,e,this.pos);var n=this.pos-t;n>=128&&CP(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),xg.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),xg.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var a=this.pos-n;a>=128&&CP(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,n){this.writeTag(e,qr.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,xD,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,wD,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,ED,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,bD,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,SD,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,TD,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,PD,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,AD,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,ID,t)},writeBytesField:function(e,t){this.writeTag(e,qr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,qr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,qr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,qr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,qr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,qr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,qr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,qr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,qr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,qr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function gD(e,t,n){var a=n.buf,l,f;if(f=a[n.pos++],l=(f&112)>>4,f<128||(f=a[n.pos++],l|=(f&127)<<3,f<128)||(f=a[n.pos++],l|=(f&127)<<10,f<128)||(f=a[n.pos++],l|=(f&127)<<17,f<128)||(f=a[n.pos++],l|=(f&127)<<24,f<128)||(f=a[n.pos++],l|=(f&1)<<31,f<128))return bh(e,l,t);throw new Error("Expected varint not more than 10 bytes")}function tl(e){return e.type===qr.Bytes?e.readVarint()+e.pos:e.pos+1}function bh(e,t,n){return n?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function yD(e,t){var n,a;if(e>=0?(n=e%4294967296|0,a=e/4294967296|0):(n=~(-e%4294967296),a=~(-e/4294967296),n^4294967295?n=n+1|0:(n=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),vD(n,a,t),_D(a,t)}function vD(e,t,n){n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos]=e&127}function _D(e,t){var n=(e&7)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function CP(e,t,n){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));n.realloc(a);for(var l=n.pos-1;l>=e;l--)n.buf[l+a]=n.buf[l]}function xD(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function wD(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function bD(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function SD(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function ED(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function TD(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function PD(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function AD(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function ID(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function wg(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Sh(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function MP(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function CD(e,t,n){for(var a="",l=t;l<n;){var f=e[l],d=null,u=f>239?4:f>223?3:f>191?2:1;if(l+u>n)break;var w,E,I;u===1?f<128&&(d=f):u===2?(w=e[l+1],(w&192)===128&&(d=(f&31)<<6|w&63,d<=127&&(d=null))):u===3?(w=e[l+1],E=e[l+2],(w&192)===128&&(E&192)===128&&(d=(f&15)<<12|(w&63)<<6|E&63,(d<=2047||d>=55296&&d<=57343)&&(d=null))):u===4&&(w=e[l+1],E=e[l+2],I=e[l+3],(w&192)===128&&(E&192)===128&&(I&192)===128&&(d=(f&15)<<18|(w&63)<<12|(E&63)<<6|I&63,(d<=65535||d>=1114112)&&(d=null))),d===null?(d=65533,u=1):d>65535&&(d-=65536,a+=String.fromCharCode(d>>>10&1023|55296),d=56320|d&1023),a+=String.fromCharCode(d),l+=u}return a}function MD(e,t,n){return w3.decode(e.subarray(t,n))}function kD(e,t,n){for(var a=0,l,f;a<t.length;a++){if(l=t.charCodeAt(a),l>55295&&l<57344)if(f)if(l<56320){e[n++]=239,e[n++]=191,e[n++]=189,f=l;continue}else l=f-55296<<10|l-56320|65536,f=null;else{l>56319||a+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):f=l;continue}else f&&(e[n++]=239,e[n++]=191,e[n++]=189,f=null);l<128?e[n++]=l:(l<2048?e[n++]=l>>6|192:(l<65536?e[n++]=l>>12|224:(e[n++]=l>>18|240,e[n++]=l>>12&63|128),e[n++]=l>>6&63|128),e[n++]=l&63|128)}return n}var e2={exports:{}},b3=function(t,n){return function(){for(var l=new Array(arguments.length),f=0;f<l.length;f++)l[f]=arguments[f];return t.apply(n,l)}},OD=b3,Cc=Object.prototype.toString;function t2(e){return Cc.call(e)==="[object Array]"}function Kx(e){return typeof e>"u"}function FD(e){return e!==null&&!Kx(e)&&e.constructor!==null&&!Kx(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function RD(e){return Cc.call(e)==="[object ArrayBuffer]"}function jD(e){return typeof FormData<"u"&&e instanceof FormData}function LD(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function zD(e){return typeof e=="string"}function BD(e){return typeof e=="number"}function S3(e){return e!==null&&typeof e=="object"}function Vg(e){if(Cc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function DD(e){return Cc.call(e)==="[object Date]"}function ND(e){return Cc.call(e)==="[object File]"}function $D(e){return Cc.call(e)==="[object Blob]"}function E3(e){return Cc.call(e)==="[object Function]"}function UD(e){return S3(e)&&E3(e.pipe)}function VD(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function GD(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function WD(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function r2(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),t2(e))for(var n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.call(null,e[l],l,e)}function Yx(){var e={};function t(l,f){Vg(e[f])&&Vg(l)?e[f]=Yx(e[f],l):Vg(l)?e[f]=Yx({},l):t2(l)?e[f]=l.slice():e[f]=l}for(var n=0,a=arguments.length;n<a;n++)r2(arguments[n],t);return e}function HD(e,t,n){return r2(t,function(l,f){n&&typeof l=="function"?e[f]=OD(l,n):e[f]=l}),e}function ZD(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var ea={isArray:t2,isArrayBuffer:RD,isBuffer:FD,isFormData:jD,isArrayBufferView:LD,isString:zD,isNumber:BD,isObject:S3,isPlainObject:Vg,isUndefined:Kx,isDate:DD,isFile:ND,isBlob:$D,isFunction:E3,isStream:UD,isURLSearchParams:VD,isStandardBrowserEnv:WD,forEach:r2,merge:Yx,extend:HD,trim:GD,stripBOM:ZD},Eh=ea;function kP(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var T3=function(t,n,a){if(!n)return t;var l;if(a)l=a(n);else if(Eh.isURLSearchParams(n))l=n.toString();else{var f=[];Eh.forEach(n,function(w,E){w===null||typeof w>"u"||(Eh.isArray(w)?E=E+"[]":w=[w],Eh.forEach(w,function(b){Eh.isDate(b)?b=b.toISOString():Eh.isObject(b)&&(b=JSON.stringify(b)),f.push(kP(E)+"="+kP(b))}))}),l=f.join("&")}if(l){var d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t},qD=ea;function $0(){this.handlers=[]}$0.prototype.use=function(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};$0.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};$0.prototype.forEach=function(t){qD.forEach(this.handlers,function(a){a!==null&&t(a)})};var XD=$0,KD=ea,YD=function(t,n){KD.forEach(t,function(l,f){f!==n&&f.toUpperCase()===n.toUpperCase()&&(t[n]=l,delete t[f])})},P3=function(t,n,a,l,f){return t.config=n,a&&(t.code=a),t.request=l,t.response=f,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},I_,OP;function A3(){if(OP)return I_;OP=1;var e=P3;return I_=function(n,a,l,f,d){var u=new Error(n);return e(u,a,l,f,d)},I_}var C_,FP;function JD(){if(FP)return C_;FP=1;var e=A3();return C_=function(n,a,l){var f=l.config.validateStatus;!l.status||!f||f(l.status)?n(l):a(e("Request failed with status code "+l.status,l.config,null,l.request,l))},C_}var M_,RP;function QD(){if(RP)return M_;RP=1;var e=ea;return M_=e.isStandardBrowserEnv()?function(){return{write:function(a,l,f,d,u,w){var E=[];E.push(a+"="+encodeURIComponent(l)),e.isNumber(f)&&E.push("expires="+new Date(f).toGMTString()),e.isString(d)&&E.push("path="+d),e.isString(u)&&E.push("domain="+u),w===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(a){var l=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),M_}var k_,jP;function eN(){return jP||(jP=1,k_=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),k_}var O_,LP;function tN(){return LP||(LP=1,O_=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}),O_}var F_,zP;function rN(){if(zP)return F_;zP=1;var e=eN(),t=tN();return F_=function(a,l){return a&&!e(l)?t(a,l):l},F_}var R_,BP;function nN(){if(BP)return R_;BP=1;var e=ea,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return R_=function(a){var l={},f,d,u;return a&&e.forEach(a.split(`
`),function(E){if(u=E.indexOf(":"),f=e.trim(E.substr(0,u)).toLowerCase(),d=e.trim(E.substr(u+1)),f){if(l[f]&&t.indexOf(f)>=0)return;f==="set-cookie"?l[f]=(l[f]?l[f]:[]).concat([d]):l[f]=l[f]?l[f]+", "+d:d}}),l},R_}var j_,DP;function iN(){if(DP)return j_;DP=1;var e=ea;return j_=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),l;function f(d){var u=d;return n&&(a.setAttribute("href",u),u=a.href),a.setAttribute("href",u),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return l=f(window.location.href),function(u){var w=e.isString(u)?f(u):u;return w.protocol===l.protocol&&w.host===l.host}}():function(){return function(){return!0}}(),j_}var L_,NP;function $P(){if(NP)return L_;NP=1;var e=ea,t=JD(),n=QD(),a=T3,l=rN(),f=nN(),d=iN(),u=A3();return L_=function(E){return new Promise(function(b,T){var R=E.data,z=E.headers,j=E.responseType;e.isFormData(R)&&delete z["Content-Type"];var se=new XMLHttpRequest;if(E.auth){var K=E.auth.username||"",Z=E.auth.password?unescape(encodeURIComponent(E.auth.password)):"";z.Authorization="Basic "+btoa(K+":"+Z)}var V=l(E.baseURL,E.url);se.open(E.method.toUpperCase(),a(V,E.params,E.paramsSerializer),!0),se.timeout=E.timeout;function ae(){if(se){var U="getAllResponseHeaders"in se?f(se.getAllResponseHeaders()):null,P=!j||j==="text"||j==="json"?se.responseText:se.response,L={data:P,status:se.status,statusText:se.statusText,headers:U,config:E,request:se};t(b,T,L),se=null}}if("onloadend"in se?se.onloadend=ae:se.onreadystatechange=function(){!se||se.readyState!==4||se.status===0&&!(se.responseURL&&se.responseURL.indexOf("file:")===0)||setTimeout(ae)},se.onabort=function(){se&&(T(u("Request aborted",E,"ECONNABORTED",se)),se=null)},se.onerror=function(){T(u("Network Error",E,null,se)),se=null},se.ontimeout=function(){var P="timeout of "+E.timeout+"ms exceeded";E.timeoutErrorMessage&&(P=E.timeoutErrorMessage),T(u(P,E,E.transitional&&E.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",se)),se=null},e.isStandardBrowserEnv()){var X=(E.withCredentials||d(V))&&E.xsrfCookieName?n.read(E.xsrfCookieName):void 0;X&&(z[E.xsrfHeaderName]=X)}"setRequestHeader"in se&&e.forEach(z,function(P,L){typeof R>"u"&&L.toLowerCase()==="content-type"?delete z[L]:se.setRequestHeader(L,P)}),e.isUndefined(E.withCredentials)||(se.withCredentials=!!E.withCredentials),j&&j!=="json"&&(se.responseType=E.responseType),typeof E.onDownloadProgress=="function"&&se.addEventListener("progress",E.onDownloadProgress),typeof E.onUploadProgress=="function"&&se.upload&&se.upload.addEventListener("progress",E.onUploadProgress),E.cancelToken&&E.cancelToken.promise.then(function(P){se&&(se.abort(),T(P),se=null)}),R||(R=null),se.send(R)})},L_}var Fi=ea,UP=YD,oN=P3,aN={"Content-Type":"application/x-www-form-urlencoded"};function VP(e,t){!Fi.isUndefined(e)&&Fi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function sN(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=$P()),e}function lN(e,t,n){if(Fi.isString(e))try{return(t||JSON.parse)(e),Fi.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}var U0={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:sN(),transformRequest:[function(t,n){return UP(n,"Accept"),UP(n,"Content-Type"),Fi.isFormData(t)||Fi.isArrayBuffer(t)||Fi.isBuffer(t)||Fi.isStream(t)||Fi.isFile(t)||Fi.isBlob(t)?t:Fi.isArrayBufferView(t)?t.buffer:Fi.isURLSearchParams(t)?(VP(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Fi.isObject(t)||n&&n["Content-Type"]==="application/json"?(VP(n,"application/json"),lN(t)):t}],transformResponse:[function(t){var n=this.transitional,a=n&&n.silentJSONParsing,l=n&&n.forcedJSONParsing,f=!a&&this.responseType==="json";if(f||l&&Fi.isString(t)&&t.length)try{return JSON.parse(t)}catch(d){if(f)throw d.name==="SyntaxError"?oN(d,this,"E_JSON_PARSE"):d}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};U0.headers={common:{Accept:"application/json, text/plain, */*"}};Fi.forEach(["delete","get","head"],function(t){U0.headers[t]={}});Fi.forEach(["post","put","patch"],function(t){U0.headers[t]=Fi.merge(aN)});var n2=U0,uN=ea,cN=n2,hN=function(t,n,a){var l=this||cN;return uN.forEach(a,function(d){t=d.call(l,t,n)}),t},z_,GP;function I3(){return GP||(GP=1,z_=function(t){return!!(t&&t.__CANCEL__)}),z_}var WP=ea,B_=hN,fN=I3(),dN=n2;function D_(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var pN=function(t){D_(t),t.headers=t.headers||{},t.data=B_.call(t,t.data,t.headers,t.transformRequest),t.headers=WP.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),WP.forEach(["delete","get","head","post","put","patch","common"],function(l){delete t.headers[l]});var n=t.adapter||dN.adapter;return n(t).then(function(l){return D_(t),l.data=B_.call(t,l.data,l.headers,t.transformResponse),l},function(l){return fN(l)||(D_(t),l&&l.response&&(l.response.data=B_.call(t,l.response.data,l.response.headers,t.transformResponse))),Promise.reject(l)})},Hi=ea,C3=function(t,n){n=n||{};var a={},l=["url","method","data"],f=["headers","auth","proxy","params"],d=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function w(T,R){return Hi.isPlainObject(T)&&Hi.isPlainObject(R)?Hi.merge(T,R):Hi.isPlainObject(R)?Hi.merge({},R):Hi.isArray(R)?R.slice():R}function E(T){Hi.isUndefined(n[T])?Hi.isUndefined(t[T])||(a[T]=w(void 0,t[T])):a[T]=w(t[T],n[T])}Hi.forEach(l,function(R){Hi.isUndefined(n[R])||(a[R]=w(void 0,n[R]))}),Hi.forEach(f,E),Hi.forEach(d,function(R){Hi.isUndefined(n[R])?Hi.isUndefined(t[R])||(a[R]=w(void 0,t[R])):a[R]=w(void 0,n[R])}),Hi.forEach(u,function(R){R in n?a[R]=w(t[R],n[R]):R in t&&(a[R]=w(void 0,t[R]))});var I=l.concat(f).concat(d).concat(u),b=Object.keys(t).concat(Object.keys(n)).filter(function(R){return I.indexOf(R)===-1});return Hi.forEach(b,E),a};const mN="axios",gN="0.21.4",yN="Promise based HTTP client for the browser and node.js",vN="index.js",_N={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},xN={type:"git",url:"https://github.com/axios/axios.git"},wN=["xhr","http","ajax","promise","node"],bN="Matt Zabriskie",SN="MIT",EN={url:"https://github.com/axios/axios/issues"},TN="https://axios-http.com",PN={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},AN={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},IN="dist/axios.min.js",CN="dist/axios.min.js",MN="./index.d.ts",kN={"follow-redirects":"^1.14.0"},ON=[{path:"./dist/axios.min.js",threshold:"5kB"}],FN={name:mN,version:gN,description:yN,main:vN,scripts:_N,repository:xN,keywords:wN,author:bN,license:SN,bugs:EN,homepage:TN,devDependencies:PN,browser:AN,jsdelivr:IN,unpkg:CN,typings:MN,dependencies:kN,bundlesize:ON};var M3=FN,i2={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){i2[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var HP={},RN=M3.version.split(".");function k3(e,t){for(var n=t?t.split("."):RN,a=e.split("."),l=0;l<3;l++){if(n[l]>a[l])return!0;if(n[l]<a[l])return!1}return!1}i2.transitional=function(t,n,a){var l=n&&k3(n);function f(d,u){return"[Axios v"+M3.version+"] Transitional option '"+d+"'"+u+(a?". "+a:"")}return function(d,u,w){if(t===!1)throw new Error(f(u," has been removed in "+n));return l&&!HP[u]&&(HP[u]=!0,console.warn(f(u," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(d,u,w):!0}};function jN(e,t,n){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),l=a.length;l-- >0;){var f=a[l],d=t[f];if(d){var u=e[f],w=u===void 0||d(u,f,e);if(w!==!0)throw new TypeError("option "+f+" must be "+w);continue}if(n!==!0)throw Error("Unknown option "+f)}}var LN={isOlderVersion:k3,assertOptions:jN,validators:i2},O3=ea,zN=T3,ZP=XD,qP=pN,V0=C3,F3=LN,Th=F3.validators;function em(e){this.defaults=e,this.interceptors={request:new ZP,response:new ZP}}em.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=V0(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&F3.assertOptions(n,{silentJSONParsing:Th.transitional(Th.boolean,"1.0.0"),forcedJSONParsing:Th.transitional(Th.boolean,"1.0.0"),clarifyTimeoutError:Th.transitional(Th.boolean,"1.0.0")},!1);var a=[],l=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(l=l&&T.synchronous,a.unshift(T.fulfilled,T.rejected))});var f=[];this.interceptors.response.forEach(function(T){f.push(T.fulfilled,T.rejected)});var d;if(!l){var u=[qP,void 0];for(Array.prototype.unshift.apply(u,a),u=u.concat(f),d=Promise.resolve(t);u.length;)d=d.then(u.shift(),u.shift());return d}for(var w=t;a.length;){var E=a.shift(),I=a.shift();try{w=E(w)}catch(b){I(b);break}}try{d=qP(w)}catch(b){return Promise.reject(b)}for(;f.length;)d=d.then(f.shift(),f.shift());return d};em.prototype.getUri=function(t){return t=V0(this.defaults,t),zN(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};O3.forEach(["delete","get","head","options"],function(t){em.prototype[t]=function(n,a){return this.request(V0(a||{},{method:t,url:n,data:(a||{}).data}))}});O3.forEach(["post","put","patch"],function(t){em.prototype[t]=function(n,a,l){return this.request(V0(l||{},{method:t,url:n,data:a}))}});var BN=em,N_,XP;function R3(){if(XP)return N_;XP=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,N_=e,N_}var $_,KP;function DN(){if(KP)return $_;KP=1;var e=R3();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(d){a=d});var l=this;n(function(d){l.reason||(l.reason=new e(d),a(l.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,l=new t(function(d){a=d});return{token:l,cancel:a}},$_=t,$_}var U_,YP;function NN(){return YP||(YP=1,U_=function(t){return function(a){return t.apply(null,a)}}),U_}var V_,JP;function $N(){return JP||(JP=1,V_=function(t){return typeof t=="object"&&t.isAxiosError===!0}),V_}var QP=ea,UN=b3,Gg=BN,VN=C3,GN=n2;function j3(e){var t=new Gg(e),n=UN(Gg.prototype.request,t);return QP.extend(n,Gg.prototype,t),QP.extend(n,t),n}var qa=j3(GN);qa.Axios=Gg;qa.create=function(t){return j3(VN(qa.defaults,t))};qa.Cancel=R3();qa.CancelToken=DN();qa.isCancel=I3();qa.all=function(t){return Promise.all(t)};qa.spread=NN();qa.isAxiosError=$N();e2.exports=qa;e2.exports.default=qa;var WN=e2.exports,HN=WN;const ZN={},qN=Object.freeze(Object.defineProperty({__proto__:null,default:ZN},Symbol.toStringTag,{value:"Module"})),L3=_w(qN);var G0={},XN=rf;function rf(e,t){this.x=e,this.y=t}rf.prototype={clone:function(){return new rf(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),a=t*this.x-n*this.y,l=n*this.x+t*this.y;return this.x=a,this.y=l,this},_rotateAround:function(e,t){var n=Math.cos(e),a=Math.sin(e),l=t.x+n*(this.x-t.x)-a*(this.y-t.y),f=t.y+a*(this.x-t.x)+n*(this.y-t.y);return this.x=l,this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};rf.convert=function(e){return e instanceof rf?e:Array.isArray(e)?new rf(e[0],e[1]):e};var KN=XN,z3=yf;function yf(e,t,n,a,l){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=l,e.readFields(YN,this,t)}function YN(e,t,n){e==1?t.id=n.readVarint():e==2?JN(n,t):e==3?t.type=n.readVarint():e==4&&(t._geometry=n.pos)}function JN(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var a=t._keys[e.readVarint()],l=t._values[e.readVarint()];t.properties[a]=l}}yf.types=["Unknown","Point","LineString","Polygon"];yf.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,a=0,l=0,f=0,d=[],u;e.pos<t;){if(a<=0){var w=e.readVarint();n=w&7,a=w>>3}if(a--,n===1||n===2)l+=e.readSVarint(),f+=e.readSVarint(),n===1&&(u&&d.push(u),u=[]),u.push(new KN(l,f));else if(n===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+n)}return u&&d.push(u),d};yf.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,a=0,l=0,f=0,d=1/0,u=-1/0,w=1/0,E=-1/0;e.pos<t;){if(a<=0){var I=e.readVarint();n=I&7,a=I>>3}if(a--,n===1||n===2)l+=e.readSVarint(),f+=e.readSVarint(),l<d&&(d=l),l>u&&(u=l),f<w&&(w=f),f>E&&(E=f);else if(n!==7)throw new Error("unknown command "+n)}return[d,w,u,E]};yf.prototype.toGeoJSON=function(e,t,n){var a=this.extent*Math.pow(2,n),l=this.extent*e,f=this.extent*t,d=this.loadGeometry(),u=yf.types[this.type],w,E;function I(R){for(var z=0;z<R.length;z++){var j=R[z],se=180-(j.y+f)*360/a;R[z]=[(j.x+l)*360/a-180,360/Math.PI*Math.atan(Math.exp(se*Math.PI/180))-90]}}switch(this.type){case 1:var b=[];for(w=0;w<d.length;w++)b[w]=d[w][0];d=b,I(d);break;case 2:for(w=0;w<d.length;w++)I(d[w]);break;case 3:for(d=QN(d),w=0;w<d.length;w++)for(E=0;E<d[w].length;E++)I(d[w][E]);break}d.length===1?d=d[0]:u="Multi"+u;var T={type:"Feature",geometry:{type:u,coordinates:d},properties:this.properties};return"id"in this&&(T.id=this.id),T};function QN(e){var t=e.length;if(t<=1)return[e];for(var n=[],a,l,f=0;f<t;f++){var d=e8(e[f]);d!==0&&(l===void 0&&(l=d<0),l===d<0?(a&&n.push(a),a=[e[f]]):a.push(e[f]))}return a&&n.push(a),n}function e8(e){for(var t=0,n=0,a=e.length,l=a-1,f,d;n<a;l=n++)f=e[n],d=e[l],t+=(d.x-f.x)*(f.y+d.y);return t}var t8=z3,B3=D3;function D3(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(r8,this,t),this.length=this._features.length}function r8(e,t,n){e===15?t.version=n.readVarint():e===1?t.name=n.readString():e===5?t.extent=n.readVarint():e===2?t._features.push(n.pos):e===3?t._keys.push(n.readString()):e===4&&t._values.push(n8(n))}function n8(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}D3.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new t8(this._pbf,t,this.extent,this._keys,this._values)};var i8=B3,o8=a8;function a8(e,t){this.layers=e.readFields(s8,{},t)}function s8(e,t,n){if(e===3){var a=new i8(n,n.readVarint()+n.pos);a.length&&(t[a.name]=a)}}G0.VectorTile=o8;G0.VectorTileFeature=z3;G0.VectorTileLayer=B3;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=YB,n=dD,a=pD,l=HN,f=L3,d=G0;function u(Z){return Z&&typeof Z=="object"&&"default"in Z?Z:{default:Z}}var w=u(a),E=u(l),I=u(f),b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Da<"u"?Da:typeof self<"u"?self:{};function T(Z){var V={exports:{}};return Z(V,V.exports),V.exports}var R=T(function(Z,V){(function(X,U){Z.exports=U(E.default)})(b,function(ae){return function(X){var U={};function P(L){if(U[L])return U[L].exports;var B=U[L]={i:L,l:!1,exports:{}};return X[L].call(B.exports,B,B.exports,P),B.l=!0,B.exports}return P.m=X,P.c=U,P.d=function(L,B,Q){P.o(L,B)||Object.defineProperty(L,B,{enumerable:!0,get:Q})},P.r=function(L){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})},P.t=function(L,B){if(B&1&&(L=P(L)),B&8||B&4&&typeof L=="object"&&L&&L.__esModule)return L;var Q=Object.create(null);if(P.r(Q),Object.defineProperty(Q,"default",{enumerable:!0,value:L}),B&2&&typeof L!="string")for(var q in L)P.d(Q,q,(function(ve){return L[ve]}).bind(null,q));return Q},P.n=function(L){var B=L&&L.__esModule?function(){return L.default}:function(){return L};return P.d(B,"a",B),B},P.o=function(L,B){return Object.prototype.hasOwnProperty.call(L,B)},P.p="",P(P.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(X,U,P){P.r(U),P.d(U,"CacheControl",function(){return Te}),P.d(U,"parse",function(){return Ne}),P.d(U,"format",function(){return Ie}),P("./node_modules/core-js/modules/es6.array.from.js"),P("./node_modules/core-js/modules/es6.function.name.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/core-js/modules/web.dom.iterable.js"),P("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.regexp.split.js"),P("./node_modules/core-js/modules/es6.number.is-finite.js");function L(Oe,qe){return ye(Oe)||ve(Oe,qe)||Q(Oe,qe)||B()}function B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q(Oe,qe){if(Oe){if(typeof Oe=="string")return q(Oe,qe);var He=Object.prototype.toString.call(Oe).slice(8,-1);if(He==="Object"&&Oe.constructor&&(He=Oe.constructor.name),He==="Map"||He==="Set")return Array.from(Oe);if(He==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(He))return q(Oe,qe)}}function q(Oe,qe){(qe==null||qe>Oe.length)&&(qe=Oe.length);for(var He=0,ot=new Array(qe);He<qe;He++)ot[He]=Oe[He];return ot}function ve(Oe,qe){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Oe)))){var He=[],ot=!0,ht=!1,xt=void 0;try{for(var Mt=Oe[Symbol.iterator](),pt;!(ot=(pt=Mt.next()).done)&&(He.push(pt.value),!(qe&&He.length===qe));ot=!0);}catch(wt){ht=!0,xt=wt}finally{try{!ot&&Mt.return!=null&&Mt.return()}finally{if(ht)throw xt}}return He}}function ye(Oe){if(Array.isArray(Oe))return Oe}function fe(Oe,qe){if(!(Oe instanceof qe))throw new TypeError("Cannot call a class as a function")}function oe(Oe,qe){for(var He=0;He<qe.length;He++){var ot=qe[He];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(Oe,ot.key,ot)}}function ce(Oe,qe,He){return qe&&oe(Oe.prototype,qe),He&&oe(Oe,He),Oe}var J=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,re={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function de(Oe){return Oe===null}function we(Oe){if(!Oe)return null;var qe=parseInt(Oe,10);return!Number.isFinite(qe)||qe<0?null:qe}var Te=function(){function Oe(){fe(this,Oe),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ce(Oe,[{key:"parse",value:function(He){if(!He||He.length===0)return this;var ot={},ht=He.match(J)||[];return Array.prototype.forEach.call(ht,function(xt){var Mt=xt.split("=",2),pt=L(Mt,1),wt=pt[0],Ht=null;Mt.length>1&&(Ht=Mt[1].trim()),ot[wt.toLowerCase()]=Ht}),this.maxAge=we(ot[re.maxAge]),this.sharedMaxAge=we(ot[re.sharedMaxAge]),this.maxStale=de(ot[re.maxStale]),this.maxStaleDuration=we(ot[re.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=we(ot[re.minFresh]),this.immutable=de(ot[re.immutable]),this.mustRevalidate=de(ot[re.mustRevalidate]),this.noCache=de(ot[re.noCache]),this.noStore=de(ot[re.noStore]),this.noTransform=de(ot[re.noTransform]),this.onlyIfCached=de(ot[re.onlyIfCached]),this.private=de(ot[re.private]),this.proxyRevalidate=de(ot[re.proxyRevalidate]),this.public=de(ot[re.public]),this}},{key:"format",value:function(){var He=[];return this.maxAge&&He.push("".concat(re.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&He.push("".concat(re.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?He.push("".concat(re.maxStale,"=").concat(this.maxStaleDuration)):He.push(re.maxStale)),this.minFresh&&He.push("".concat(re.minFresh,"=").concat(this.minFresh)),this.immutable&&He.push(re.immutable),this.mustRevalidate&&He.push(re.mustRevalidate),this.noCache&&He.push(re.noCache),this.noStore&&He.push(re.noStore),this.noTransform&&He.push(re.noTransform),this.onlyIfCached&&He.push(re.onlyIfCached),this.private&&He.push(re.private),this.proxyRevalidate&&He.push(re.proxyRevalidate),this.public&&He.push(re.public),He.join(", ")}}]),Oe}();function Ne(Oe){var qe=new Te;return qe.parse(Oe)}function Ie(Oe){return Oe instanceof Te?Oe.format():Te.prototype.format.call(Oe)}U.default={CacheControl:Te,parse:Ne,format:Ie}},"./node_modules/charenc/charenc.js":function(X,U){var P={utf8:{stringToBytes:function(L){return P.bin.stringToBytes(unescape(encodeURIComponent(L)))},bytesToString:function(L){return decodeURIComponent(escape(P.bin.bytesToString(L)))}},bin:{stringToBytes:function(L){for(var B=[],Q=0;Q<L.length;Q++)B.push(L.charCodeAt(Q)&255);return B},bytesToString:function(L){for(var B=[],Q=0;Q<L.length;Q++)B.push(String.fromCharCode(L[Q]));return B.join("")}}};X.exports=P},"./node_modules/core-js/modules/_a-function.js":function(X,U){X.exports=function(P){if(typeof P!="function")throw TypeError(P+" is not a function!");return P}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_wks.js")("unscopables"),B=Array.prototype;B[L]==null&&P("./node_modules/core-js/modules/_hide.js")(B,L,{}),X.exports=function(Q){B[L][Q]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_string-at.js")(!0);X.exports=function(B,Q,q){return Q+(q?L(B,Q).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_is-object.js");X.exports=function(B){if(!L(B))throw TypeError(B+" is not an object!");return B}},"./node_modules/core-js/modules/_array-includes.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_to-iobject.js"),B=P("./node_modules/core-js/modules/_to-length.js"),Q=P("./node_modules/core-js/modules/_to-absolute-index.js");X.exports=function(q){return function(ve,ye,fe){var oe=L(ve),ce=B(oe.length),J=Q(fe,ce),re;if(q&&ye!=ye){for(;ce>J;)if(re=oe[J++],re!=re)return!0}else for(;ce>J;J++)if((q||J in oe)&&oe[J]===ye)return q||J||0;return!q&&-1}}},"./node_modules/core-js/modules/_bind.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_a-function.js"),B=P("./node_modules/core-js/modules/_is-object.js"),Q=P("./node_modules/core-js/modules/_invoke.js"),q=[].slice,ve={},ye=function(fe,oe,ce){if(!(oe in ve)){for(var J=[],re=0;re<oe;re++)J[re]="a["+re+"]";ve[oe]=Function("F,a","return new F("+J.join(",")+")")}return ve[oe](fe,ce)};X.exports=Function.bind||function(oe){var ce=L(this),J=q.call(arguments,1),re=function(){var de=J.concat(q.call(arguments));return this instanceof re?ye(ce,de.length,de):Q(ce,de,oe)};return B(ce.prototype)&&(re.prototype=ce.prototype),re}},"./node_modules/core-js/modules/_classof.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_cof.js"),B=P("./node_modules/core-js/modules/_wks.js")("toStringTag"),Q=L(function(){return arguments}())=="Arguments",q=function(ve,ye){try{return ve[ye]}catch{}};X.exports=function(ve){var ye,fe,oe;return ve===void 0?"Undefined":ve===null?"Null":typeof(fe=q(ye=Object(ve),B))=="string"?fe:Q?L(ye):(oe=L(ye))=="Object"&&typeof ye.callee=="function"?"Arguments":oe}},"./node_modules/core-js/modules/_cof.js":function(X,U){var P={}.toString;X.exports=function(L){return P.call(L).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(X,U){var P=X.exports={version:"2.6.12"};typeof __e=="number"&&(__e=P)},"./node_modules/core-js/modules/_create-property.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_object-dp.js"),B=P("./node_modules/core-js/modules/_property-desc.js");X.exports=function(Q,q,ve){q in Q?L.f(Q,q,B(0,ve)):Q[q]=ve}},"./node_modules/core-js/modules/_ctx.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_a-function.js");X.exports=function(B,Q,q){if(L(B),Q===void 0)return B;switch(q){case 1:return function(ve){return B.call(Q,ve)};case 2:return function(ve,ye){return B.call(Q,ve,ye)};case 3:return function(ve,ye,fe){return B.call(Q,ve,ye,fe)}}return function(){return B.apply(Q,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(X,U){X.exports=function(P){if(P==null)throw TypeError("Can't call method on  "+P);return P}},"./node_modules/core-js/modules/_descriptors.js":function(X,U,P){X.exports=!P("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_is-object.js"),B=P("./node_modules/core-js/modules/_global.js").document,Q=L(B)&&L(B.createElement);X.exports=function(q){return Q?B.createElement(q):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(X,U){X.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_object-keys.js"),B=P("./node_modules/core-js/modules/_object-gops.js"),Q=P("./node_modules/core-js/modules/_object-pie.js");X.exports=function(q){var ve=L(q),ye=B.f;if(ye)for(var fe=ye(q),oe=Q.f,ce=0,J;fe.length>ce;)oe.call(q,J=fe[ce++])&&ve.push(J);return ve}},"./node_modules/core-js/modules/_export.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_global.js"),B=P("./node_modules/core-js/modules/_core.js"),Q=P("./node_modules/core-js/modules/_hide.js"),q=P("./node_modules/core-js/modules/_redefine.js"),ve=P("./node_modules/core-js/modules/_ctx.js"),ye="prototype",fe=function(oe,ce,J){var re=oe&fe.F,de=oe&fe.G,we=oe&fe.S,Te=oe&fe.P,Ne=oe&fe.B,Ie=de?L:we?L[ce]||(L[ce]={}):(L[ce]||{})[ye],Oe=de?B:B[ce]||(B[ce]={}),qe=Oe[ye]||(Oe[ye]={}),He,ot,ht,xt;de&&(J=ce);for(He in J)ot=!re&&Ie&&Ie[He]!==void 0,ht=(ot?Ie:J)[He],xt=Ne&&ot?ve(ht,L):Te&&typeof ht=="function"?ve(Function.call,ht):ht,Ie&&q(Ie,He,ht,oe&fe.U),Oe[He]!=ht&&Q(Oe,He,xt),Te&&qe[He]!=ht&&(qe[He]=ht)};L.core=B,fe.F=1,fe.G=2,fe.S=4,fe.P=8,fe.B=16,fe.W=32,fe.U=64,fe.R=128,X.exports=fe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(B){var Q=/./;try{"/./"[B](Q)}catch{try{return Q[L]=!1,!"/./"[B](Q)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(X,U){X.exports=function(P){try{return!!P()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(X,U,P){P("./node_modules/core-js/modules/es6.regexp.exec.js");var L=P("./node_modules/core-js/modules/_redefine.js"),B=P("./node_modules/core-js/modules/_hide.js"),Q=P("./node_modules/core-js/modules/_fails.js"),q=P("./node_modules/core-js/modules/_defined.js"),ve=P("./node_modules/core-js/modules/_wks.js"),ye=P("./node_modules/core-js/modules/_regexp-exec.js"),fe=ve("species"),oe=!Q(function(){var J=/./;return J.exec=function(){var re=[];return re.groups={a:"7"},re},"".replace(J,"$<a>")!=="7"}),ce=function(){var J=/(?:)/,re=J.exec;J.exec=function(){return re.apply(this,arguments)};var de="ab".split(J);return de.length===2&&de[0]==="a"&&de[1]==="b"}();X.exports=function(J,re,de){var we=ve(J),Te=!Q(function(){var ot={};return ot[we]=function(){return 7},""[J](ot)!=7}),Ne=Te?!Q(function(){var ot=!1,ht=/a/;return ht.exec=function(){return ot=!0,null},J==="split"&&(ht.constructor={},ht.constructor[fe]=function(){return ht}),ht[we](""),!ot}):void 0;if(!Te||!Ne||J==="replace"&&!oe||J==="split"&&!ce){var Ie=/./[we],Oe=de(q,we,""[J],function(ht,xt,Mt,pt,wt){return xt.exec===ye?Te&&!wt?{done:!0,value:Ie.call(xt,Mt,pt)}:{done:!0,value:ht.call(Mt,xt,pt)}:{done:!1}}),qe=Oe[0],He=Oe[1];L(String.prototype,J,qe),B(RegExp.prototype,we,re==2?function(ot,ht){return He.call(ot,this,ht)}:function(ot){return He.call(ot,this)})}}},"./node_modules/core-js/modules/_flags.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_an-object.js");X.exports=function(){var B=L(this),Q="";return B.global&&(Q+="g"),B.ignoreCase&&(Q+="i"),B.multiline&&(Q+="m"),B.unicode&&(Q+="u"),B.sticky&&(Q+="y"),Q}},"./node_modules/core-js/modules/_function-to-string.js":function(X,U,P){X.exports=P("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(X,U){var P=X.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=P)},"./node_modules/core-js/modules/_has.js":function(X,U){var P={}.hasOwnProperty;X.exports=function(L,B){return P.call(L,B)}},"./node_modules/core-js/modules/_hide.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_object-dp.js"),B=P("./node_modules/core-js/modules/_property-desc.js");X.exports=P("./node_modules/core-js/modules/_descriptors.js")?function(Q,q,ve){return L.f(Q,q,B(1,ve))}:function(Q,q,ve){return Q[q]=ve,Q}},"./node_modules/core-js/modules/_html.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_global.js").document;X.exports=L&&L.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(X,U,P){X.exports=!P("./node_modules/core-js/modules/_descriptors.js")&&!P("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(P("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(X,U){X.exports=function(P,L,B){var Q=B===void 0;switch(L.length){case 0:return Q?P():P.call(B);case 1:return Q?P(L[0]):P.call(B,L[0]);case 2:return Q?P(L[0],L[1]):P.call(B,L[0],L[1]);case 3:return Q?P(L[0],L[1],L[2]):P.call(B,L[0],L[1],L[2]);case 4:return Q?P(L[0],L[1],L[2],L[3]):P.call(B,L[0],L[1],L[2],L[3])}return P.apply(B,L)}},"./node_modules/core-js/modules/_iobject.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_cof.js");X.exports=Object("z").propertyIsEnumerable(0)?Object:function(B){return L(B)=="String"?B.split(""):Object(B)}},"./node_modules/core-js/modules/_is-array-iter.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_iterators.js"),B=P("./node_modules/core-js/modules/_wks.js")("iterator"),Q=Array.prototype;X.exports=function(q){return q!==void 0&&(L.Array===q||Q[B]===q)}},"./node_modules/core-js/modules/_is-array.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_cof.js");X.exports=Array.isArray||function(Q){return L(Q)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(X,U){X.exports=function(P){return typeof P=="object"?P!==null:typeof P=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_is-object.js"),B=P("./node_modules/core-js/modules/_cof.js"),Q=P("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(q){var ve;return L(q)&&((ve=q[Q])!==void 0?!!ve:B(q)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_an-object.js");X.exports=function(B,Q,q,ve){try{return ve?Q(L(q)[0],q[1]):Q(q)}catch(fe){var ye=B.return;throw ye!==void 0&&L(ye.call(B)),fe}}},"./node_modules/core-js/modules/_iter-create.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_object-create.js"),B=P("./node_modules/core-js/modules/_property-desc.js"),Q=P("./node_modules/core-js/modules/_set-to-string-tag.js"),q={};P("./node_modules/core-js/modules/_hide.js")(q,P("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),X.exports=function(ve,ye,fe){ve.prototype=L(q,{next:B(1,fe)}),Q(ve,ye+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_library.js"),B=P("./node_modules/core-js/modules/_export.js"),Q=P("./node_modules/core-js/modules/_redefine.js"),q=P("./node_modules/core-js/modules/_hide.js"),ve=P("./node_modules/core-js/modules/_iterators.js"),ye=P("./node_modules/core-js/modules/_iter-create.js"),fe=P("./node_modules/core-js/modules/_set-to-string-tag.js"),oe=P("./node_modules/core-js/modules/_object-gpo.js"),ce=P("./node_modules/core-js/modules/_wks.js")("iterator"),J=!([].keys&&"next"in[].keys()),re="@@iterator",de="keys",we="values",Te=function(){return this};X.exports=function(Ne,Ie,Oe,qe,He,ot,ht){ye(Oe,Ie,qe);var xt=function(N){if(!J&&N in Ht)return Ht[N];switch(N){case de:return function(){return new Oe(this,N)};case we:return function(){return new Oe(this,N)}}return function(){return new Oe(this,N)}},Mt=Ie+" Iterator",pt=He==we,wt=!1,Ht=Ne.prototype,zt=Ht[ce]||Ht[re]||He&&Ht[He],ur=zt||xt(He),it=He?pt?xt("entries"):ur:void 0,wr=Ie=="Array"&&Ht.entries||zt,cr,qt,Se;if(wr&&(Se=oe(wr.call(new Ne)),Se!==Object.prototype&&Se.next&&(fe(Se,Mt,!0),!L&&typeof Se[ce]!="function"&&q(Se,ce,Te))),pt&&zt&&zt.name!==we&&(wt=!0,ur=function(){return zt.call(this)}),(!L||ht)&&(J||wt||!Ht[ce])&&q(Ht,ce,ur),ve[Ie]=ur,ve[Mt]=Te,He)if(cr={values:pt?ur:xt(we),keys:ot?ur:xt(de),entries:it},ht)for(qt in cr)qt in Ht||Q(Ht,qt,cr[qt]);else B(B.P+B.F*(J||wt),Ie,cr);return cr}},"./node_modules/core-js/modules/_iter-detect.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_wks.js")("iterator"),B=!1;try{var Q=[7][L]();Q.return=function(){B=!0},Array.from(Q,function(){throw 2})}catch{}X.exports=function(q,ve){if(!ve&&!B)return!1;var ye=!1;try{var fe=[7],oe=fe[L]();oe.next=function(){return{done:ye=!0}},fe[L]=function(){return oe},q(fe)}catch{}return ye}},"./node_modules/core-js/modules/_iter-step.js":function(X,U){X.exports=function(P,L){return{value:L,done:!!P}}},"./node_modules/core-js/modules/_iterators.js":function(X,U){X.exports={}},"./node_modules/core-js/modules/_library.js":function(X,U){X.exports=!1},"./node_modules/core-js/modules/_meta.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_uid.js")("meta"),B=P("./node_modules/core-js/modules/_is-object.js"),Q=P("./node_modules/core-js/modules/_has.js"),q=P("./node_modules/core-js/modules/_object-dp.js").f,ve=0,ye=Object.isExtensible||function(){return!0},fe=!P("./node_modules/core-js/modules/_fails.js")(function(){return ye(Object.preventExtensions({}))}),oe=function(we){q(we,L,{value:{i:"O"+ ++ve,w:{}}})},ce=function(we,Te){if(!B(we))return typeof we=="symbol"?we:(typeof we=="string"?"S":"P")+we;if(!Q(we,L)){if(!ye(we))return"F";if(!Te)return"E";oe(we)}return we[L].i},J=function(we,Te){if(!Q(we,L)){if(!ye(we))return!0;if(!Te)return!1;oe(we)}return we[L].w},re=function(we){return fe&&de.NEED&&ye(we)&&!Q(we,L)&&oe(we),we},de=X.exports={KEY:L,NEED:!1,fastKey:ce,getWeak:J,onFreeze:re}},"./node_modules/core-js/modules/_object-create.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_an-object.js"),B=P("./node_modules/core-js/modules/_object-dps.js"),Q=P("./node_modules/core-js/modules/_enum-bug-keys.js"),q=P("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ve=function(){},ye="prototype",fe=function(){var oe=P("./node_modules/core-js/modules/_dom-create.js")("iframe"),ce=Q.length,J="<",re=">",de;for(oe.style.display="none",P("./node_modules/core-js/modules/_html.js").appendChild(oe),oe.src="javascript:",de=oe.contentWindow.document,de.open(),de.write(J+"script"+re+"document.F=Object"+J+"/script"+re),de.close(),fe=de.F;ce--;)delete fe[ye][Q[ce]];return fe()};X.exports=Object.create||function(ce,J){var re;return ce!==null?(ve[ye]=L(ce),re=new ve,ve[ye]=null,re[q]=ce):re=fe(),J===void 0?re:B(re,J)}},"./node_modules/core-js/modules/_object-dp.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_an-object.js"),B=P("./node_modules/core-js/modules/_ie8-dom-define.js"),Q=P("./node_modules/core-js/modules/_to-primitive.js"),q=Object.defineProperty;U.f=P("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(ye,fe,oe){if(L(ye),fe=Q(fe,!0),L(oe),B)try{return q(ye,fe,oe)}catch{}if("get"in oe||"set"in oe)throw TypeError("Accessors not supported!");return"value"in oe&&(ye[fe]=oe.value),ye}},"./node_modules/core-js/modules/_object-dps.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_object-dp.js"),B=P("./node_modules/core-js/modules/_an-object.js"),Q=P("./node_modules/core-js/modules/_object-keys.js");X.exports=P("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ve,ye){B(ve);for(var fe=Q(ye),oe=fe.length,ce=0,J;oe>ce;)L.f(ve,J=fe[ce++],ye[J]);return ve}},"./node_modules/core-js/modules/_object-gopd.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_object-pie.js"),B=P("./node_modules/core-js/modules/_property-desc.js"),Q=P("./node_modules/core-js/modules/_to-iobject.js"),q=P("./node_modules/core-js/modules/_to-primitive.js"),ve=P("./node_modules/core-js/modules/_has.js"),ye=P("./node_modules/core-js/modules/_ie8-dom-define.js"),fe=Object.getOwnPropertyDescriptor;U.f=P("./node_modules/core-js/modules/_descriptors.js")?fe:function(ce,J){if(ce=Q(ce),J=q(J,!0),ye)try{return fe(ce,J)}catch{}if(ve(ce,J))return B(!L.f.call(ce,J),ce[J])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_to-iobject.js"),B=P("./node_modules/core-js/modules/_object-gopn.js").f,Q={}.toString,q=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ve=function(ye){try{return B(ye)}catch{return q.slice()}};X.exports.f=function(fe){return q&&Q.call(fe)=="[object Window]"?ve(fe):B(L(fe))}},"./node_modules/core-js/modules/_object-gopn.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_object-keys-internal.js"),B=P("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");U.f=Object.getOwnPropertyNames||function(q){return L(q,B)}},"./node_modules/core-js/modules/_object-gops.js":function(X,U){U.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_has.js"),B=P("./node_modules/core-js/modules/_to-object.js"),Q=P("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),q=Object.prototype;X.exports=Object.getPrototypeOf||function(ve){return ve=B(ve),L(ve,Q)?ve[Q]:typeof ve.constructor=="function"&&ve instanceof ve.constructor?ve.constructor.prototype:ve instanceof Object?q:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_has.js"),B=P("./node_modules/core-js/modules/_to-iobject.js"),Q=P("./node_modules/core-js/modules/_array-includes.js")(!1),q=P("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");X.exports=function(ve,ye){var fe=B(ve),oe=0,ce=[],J;for(J in fe)J!=q&&L(fe,J)&&ce.push(J);for(;ye.length>oe;)L(fe,J=ye[oe++])&&(~Q(ce,J)||ce.push(J));return ce}},"./node_modules/core-js/modules/_object-keys.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_object-keys-internal.js"),B=P("./node_modules/core-js/modules/_enum-bug-keys.js");X.exports=Object.keys||function(q){return L(q,B)}},"./node_modules/core-js/modules/_object-pie.js":function(X,U){U.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_object-gopn.js"),B=P("./node_modules/core-js/modules/_object-gops.js"),Q=P("./node_modules/core-js/modules/_an-object.js"),q=P("./node_modules/core-js/modules/_global.js").Reflect;X.exports=q&&q.ownKeys||function(ye){var fe=L.f(Q(ye)),oe=B.f;return oe?fe.concat(oe(ye)):fe}},"./node_modules/core-js/modules/_property-desc.js":function(X,U){X.exports=function(P,L){return{enumerable:!(P&1),configurable:!(P&2),writable:!(P&4),value:L}}},"./node_modules/core-js/modules/_redefine.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_global.js"),B=P("./node_modules/core-js/modules/_hide.js"),Q=P("./node_modules/core-js/modules/_has.js"),q=P("./node_modules/core-js/modules/_uid.js")("src"),ve=P("./node_modules/core-js/modules/_function-to-string.js"),ye="toString",fe=(""+ve).split(ye);P("./node_modules/core-js/modules/_core.js").inspectSource=function(oe){return ve.call(oe)},(X.exports=function(oe,ce,J,re){var de=typeof J=="function";de&&(Q(J,"name")||B(J,"name",ce)),oe[ce]!==J&&(de&&(Q(J,q)||B(J,q,oe[ce]?""+oe[ce]:fe.join(String(ce)))),oe===L?oe[ce]=J:re?oe[ce]?oe[ce]=J:B(oe,ce,J):(delete oe[ce],B(oe,ce,J)))})(Function.prototype,ye,function(){return typeof this=="function"&&this[q]||ve.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_classof.js"),B=RegExp.prototype.exec;X.exports=function(Q,q){var ve=Q.exec;if(typeof ve=="function"){var ye=ve.call(Q,q);if(typeof ye!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return ye}if(L(Q)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return B.call(Q,q)}},"./node_modules/core-js/modules/_regexp-exec.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_flags.js"),B=RegExp.prototype.exec,Q=String.prototype.replace,q=B,ve="lastIndex",ye=function(){var ce=/a/,J=/b*/g;return B.call(ce,"a"),B.call(J,"a"),ce[ve]!==0||J[ve]!==0}(),fe=/()??/.exec("")[1]!==void 0,oe=ye||fe;oe&&(q=function(J){var re=this,de,we,Te,Ne;return fe&&(we=new RegExp("^"+re.source+"$(?!\\s)",L.call(re))),ye&&(de=re[ve]),Te=B.call(re,J),ye&&Te&&(re[ve]=re.global?Te.index+Te[0].length:de),fe&&Te&&Te.length>1&&Q.call(Te[0],we,function(){for(Ne=1;Ne<arguments.length-2;Ne++)arguments[Ne]===void 0&&(Te[Ne]=void 0)}),Te}),X.exports=q},"./node_modules/core-js/modules/_set-to-string-tag.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_object-dp.js").f,B=P("./node_modules/core-js/modules/_has.js"),Q=P("./node_modules/core-js/modules/_wks.js")("toStringTag");X.exports=function(q,ve,ye){q&&!B(q=ye?q:q.prototype,Q)&&L(q,Q,{configurable:!0,value:ve})}},"./node_modules/core-js/modules/_shared-key.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_shared.js")("keys"),B=P("./node_modules/core-js/modules/_uid.js");X.exports=function(Q){return L[Q]||(L[Q]=B(Q))}},"./node_modules/core-js/modules/_shared.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_core.js"),B=P("./node_modules/core-js/modules/_global.js"),Q="__core-js_shared__",q=B[Q]||(B[Q]={});(X.exports=function(ve,ye){return q[ve]||(q[ve]=ye!==void 0?ye:{})})("versions",[]).push({version:L.version,mode:P("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_an-object.js"),B=P("./node_modules/core-js/modules/_a-function.js"),Q=P("./node_modules/core-js/modules/_wks.js")("species");X.exports=function(q,ve){var ye=L(q).constructor,fe;return ye===void 0||(fe=L(ye)[Q])==null?ve:B(fe)}},"./node_modules/core-js/modules/_string-at.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_to-integer.js"),B=P("./node_modules/core-js/modules/_defined.js");X.exports=function(Q){return function(q,ve){var ye=String(B(q)),fe=L(ve),oe=ye.length,ce,J;return fe<0||fe>=oe?Q?"":void 0:(ce=ye.charCodeAt(fe),ce<55296||ce>56319||fe+1===oe||(J=ye.charCodeAt(fe+1))<56320||J>57343?Q?ye.charAt(fe):ce:Q?ye.slice(fe,fe+2):(ce-55296<<10)+(J-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_is-regexp.js"),B=P("./node_modules/core-js/modules/_defined.js");X.exports=function(Q,q,ve){if(L(q))throw TypeError("String#"+ve+" doesn't accept regex!");return String(B(Q))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_to-integer.js"),B=Math.max,Q=Math.min;X.exports=function(q,ve){return q=L(q),q<0?B(q+ve,0):Q(q,ve)}},"./node_modules/core-js/modules/_to-integer.js":function(X,U){var P=Math.ceil,L=Math.floor;X.exports=function(B){return isNaN(B=+B)?0:(B>0?L:P)(B)}},"./node_modules/core-js/modules/_to-iobject.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_iobject.js"),B=P("./node_modules/core-js/modules/_defined.js");X.exports=function(Q){return L(B(Q))}},"./node_modules/core-js/modules/_to-length.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_to-integer.js"),B=Math.min;X.exports=function(Q){return Q>0?B(L(Q),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_defined.js");X.exports=function(B){return Object(L(B))}},"./node_modules/core-js/modules/_to-primitive.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_is-object.js");X.exports=function(B,Q){if(!L(B))return B;var q,ve;if(Q&&typeof(q=B.toString)=="function"&&!L(ve=q.call(B))||typeof(q=B.valueOf)=="function"&&!L(ve=q.call(B))||!Q&&typeof(q=B.toString)=="function"&&!L(ve=q.call(B)))return ve;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(X,U){var P=0,L=Math.random();X.exports=function(B){return"Symbol(".concat(B===void 0?"":B,")_",(++P+L).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_global.js"),B=P("./node_modules/core-js/modules/_core.js"),Q=P("./node_modules/core-js/modules/_library.js"),q=P("./node_modules/core-js/modules/_wks-ext.js"),ve=P("./node_modules/core-js/modules/_object-dp.js").f;X.exports=function(ye){var fe=B.Symbol||(B.Symbol=Q?{}:L.Symbol||{});ye.charAt(0)!="_"&&!(ye in fe)&&ve(fe,ye,{value:q.f(ye)})}},"./node_modules/core-js/modules/_wks-ext.js":function(X,U,P){U.f=P("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_shared.js")("wks"),B=P("./node_modules/core-js/modules/_uid.js"),Q=P("./node_modules/core-js/modules/_global.js").Symbol,q=typeof Q=="function",ve=X.exports=function(ye){return L[ye]||(L[ye]=q&&Q[ye]||(q?Q:B)("Symbol."+ye))};ve.store=L},"./node_modules/core-js/modules/core.get-iterator-method.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_classof.js"),B=P("./node_modules/core-js/modules/_wks.js")("iterator"),Q=P("./node_modules/core-js/modules/_iterators.js");X.exports=P("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(q){if(q!=null)return q[B]||q["@@iterator"]||Q[L(q)]}},"./node_modules/core-js/modules/es6.array.from.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_ctx.js"),B=P("./node_modules/core-js/modules/_export.js"),Q=P("./node_modules/core-js/modules/_to-object.js"),q=P("./node_modules/core-js/modules/_iter-call.js"),ve=P("./node_modules/core-js/modules/_is-array-iter.js"),ye=P("./node_modules/core-js/modules/_to-length.js"),fe=P("./node_modules/core-js/modules/_create-property.js"),oe=P("./node_modules/core-js/modules/core.get-iterator-method.js");B(B.S+B.F*!P("./node_modules/core-js/modules/_iter-detect.js")(function(ce){Array.from(ce)}),"Array",{from:function(J){var re=Q(J),de=typeof this=="function"?this:Array,we=arguments.length,Te=we>1?arguments[1]:void 0,Ne=Te!==void 0,Ie=0,Oe=oe(re),qe,He,ot,ht;if(Ne&&(Te=L(Te,we>2?arguments[2]:void 0,2)),Oe!=null&&!(de==Array&&ve(Oe)))for(ht=Oe.call(re),He=new de;!(ot=ht.next()).done;Ie++)fe(He,Ie,Ne?q(ht,Te,[ot.value,Ie],!0):ot.value);else for(qe=ye(re.length),He=new de(qe);qe>Ie;Ie++)fe(He,Ie,Ne?Te(re[Ie],Ie):re[Ie]);return He.length=Ie,He}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_add-to-unscopables.js"),B=P("./node_modules/core-js/modules/_iter-step.js"),Q=P("./node_modules/core-js/modules/_iterators.js"),q=P("./node_modules/core-js/modules/_to-iobject.js");X.exports=P("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ve,ye){this._t=q(ve),this._i=0,this._k=ye},function(){var ve=this._t,ye=this._k,fe=this._i++;return!ve||fe>=ve.length?(this._t=void 0,B(1)):ye=="keys"?B(0,fe):ye=="values"?B(0,ve[fe]):B(0,[fe,ve[fe]])},"values"),Q.Arguments=Q.Array,L("keys"),L("values"),L("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_export.js");L(L.P,"Function",{bind:P("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_object-dp.js").f,B=Function.prototype,Q=/^\s*function ([^ (]*)/,q="name";q in B||P("./node_modules/core-js/modules/_descriptors.js")&&L(B,q,{configurable:!0,get:function(){try{return(""+this).match(Q)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_export.js"),B=P("./node_modules/core-js/modules/_global.js").isFinite;L(L.S,"Number",{isFinite:function(q){return typeof q=="number"&&B(q)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_classof.js"),B={};B[P("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",B+""!="[object z]"&&P("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+L(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_regexp-exec.js");P("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:L!==/./.exec},{exec:L})},"./node_modules/core-js/modules/es6.regexp.split.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_is-regexp.js"),B=P("./node_modules/core-js/modules/_an-object.js"),Q=P("./node_modules/core-js/modules/_species-constructor.js"),q=P("./node_modules/core-js/modules/_advance-string-index.js"),ve=P("./node_modules/core-js/modules/_to-length.js"),ye=P("./node_modules/core-js/modules/_regexp-exec-abstract.js"),fe=P("./node_modules/core-js/modules/_regexp-exec.js"),oe=P("./node_modules/core-js/modules/_fails.js"),ce=Math.min,J=[].push,re="split",de="length",we="lastIndex",Te=4294967295,Ne=!oe(function(){});P("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Ie,Oe,qe,He){var ot;return"abbc"[re](/(b)*/)[1]=="c"||"test"[re](/(?:)/,-1)[de]!=4||"ab"[re](/(?:ab)*/)[de]!=2||"."[re](/(.?)(.?)/)[de]!=4||"."[re](/()()/)[de]>1||""[re](/.?/)[de]?ot=function(ht,xt){var Mt=String(this);if(ht===void 0&&xt===0)return[];if(!L(ht))return qe.call(Mt,ht,xt);for(var pt=[],wt=(ht.ignoreCase?"i":"")+(ht.multiline?"m":"")+(ht.unicode?"u":"")+(ht.sticky?"y":""),Ht=0,zt=xt===void 0?Te:xt>>>0,ur=new RegExp(ht.source,wt+"g"),it,wr,cr;(it=fe.call(ur,Mt))&&(wr=ur[we],!(wr>Ht&&(pt.push(Mt.slice(Ht,it.index)),it[de]>1&&it.index<Mt[de]&&J.apply(pt,it.slice(1)),cr=it[0][de],Ht=wr,pt[de]>=zt)));)ur[we]===it.index&&ur[we]++;return Ht===Mt[de]?(cr||!ur.test(""))&&pt.push(""):pt.push(Mt.slice(Ht)),pt[de]>zt?pt.slice(0,zt):pt}:"0"[re](void 0,0)[de]?ot=function(ht,xt){return ht===void 0&&xt===0?[]:qe.call(this,ht,xt)}:ot=qe,[function(xt,Mt){var pt=Ie(this),wt=xt==null?void 0:xt[Oe];return wt!==void 0?wt.call(xt,pt,Mt):ot.call(String(pt),xt,Mt)},function(ht,xt){var Mt=He(ot,ht,this,xt,ot!==qe);if(Mt.done)return Mt.value;var pt=B(ht),wt=String(this),Ht=Q(pt,RegExp),zt=pt.unicode,ur=(pt.ignoreCase?"i":"")+(pt.multiline?"m":"")+(pt.unicode?"u":"")+(Ne?"y":"g"),it=new Ht(Ne?pt:"^(?:"+pt.source+")",ur),wr=xt===void 0?Te:xt>>>0;if(wr===0)return[];if(wt.length===0)return ye(it,wt)===null?[wt]:[];for(var cr=0,qt=0,Se=[];qt<wt.length;){it.lastIndex=Ne?qt:0;var N=ye(it,Ne?wt:wt.slice(qt)),D;if(N===null||(D=ce(ve(it.lastIndex+(Ne?0:qt)),wt.length))===cr)qt=q(wt,qt,zt);else{if(Se.push(wt.slice(cr,qt)),Se.length===wr)return Se;for(var xe=1;xe<=N.length-1;xe++)if(Se.push(N[xe]),Se.length===wr)return Se;qt=cr=D}}return Se.push(wt.slice(cr)),Se}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_export.js"),B=P("./node_modules/core-js/modules/_string-context.js"),Q="includes";L(L.P+L.F*P("./node_modules/core-js/modules/_fails-is-regexp.js")(Q),"String",{includes:function(ve){return!!~B(this,ve,Q).indexOf(ve,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_global.js"),B=P("./node_modules/core-js/modules/_has.js"),Q=P("./node_modules/core-js/modules/_descriptors.js"),q=P("./node_modules/core-js/modules/_export.js"),ve=P("./node_modules/core-js/modules/_redefine.js"),ye=P("./node_modules/core-js/modules/_meta.js").KEY,fe=P("./node_modules/core-js/modules/_fails.js"),oe=P("./node_modules/core-js/modules/_shared.js"),ce=P("./node_modules/core-js/modules/_set-to-string-tag.js"),J=P("./node_modules/core-js/modules/_uid.js"),re=P("./node_modules/core-js/modules/_wks.js"),de=P("./node_modules/core-js/modules/_wks-ext.js"),we=P("./node_modules/core-js/modules/_wks-define.js"),Te=P("./node_modules/core-js/modules/_enum-keys.js"),Ne=P("./node_modules/core-js/modules/_is-array.js"),Ie=P("./node_modules/core-js/modules/_an-object.js"),Oe=P("./node_modules/core-js/modules/_is-object.js"),qe=P("./node_modules/core-js/modules/_to-object.js"),He=P("./node_modules/core-js/modules/_to-iobject.js"),ot=P("./node_modules/core-js/modules/_to-primitive.js"),ht=P("./node_modules/core-js/modules/_property-desc.js"),xt=P("./node_modules/core-js/modules/_object-create.js"),Mt=P("./node_modules/core-js/modules/_object-gopn-ext.js"),pt=P("./node_modules/core-js/modules/_object-gopd.js"),wt=P("./node_modules/core-js/modules/_object-gops.js"),Ht=P("./node_modules/core-js/modules/_object-dp.js"),zt=P("./node_modules/core-js/modules/_object-keys.js"),ur=pt.f,it=Ht.f,wr=Mt.f,cr=L.Symbol,qt=L.JSON,Se=qt&&qt.stringify,N="prototype",D=re("_hidden"),xe=re("toPrimitive"),Xe={}.propertyIsEnumerable,tt=oe("symbol-registry"),ct=oe("symbols"),le=oe("op-symbols"),k=Object[N],$=typeof cr=="function"&&!!wt.f,Ee=L.QObject,We=!Ee||!Ee[N]||!Ee[N].findChild,nt=Q&&fe(function(){return xt(it({},"a",{get:function(){return it(this,"a",{value:7}).a}})).a!=7})?function(Be,je,Ue){var Le=ur(k,je);Le&&delete k[je],it(Be,je,Ue),Le&&Be!==k&&it(k,je,Le)}:it,Ve=function(Be){var je=ct[Be]=xt(cr[N]);return je._k=Be,je},Et=$&&typeof cr.iterator=="symbol"?function(Be){return typeof Be=="symbol"}:function(Be){return Be instanceof cr},Ot=function(je,Ue,Le){return je===k&&Ot(le,Ue,Le),Ie(je),Ue=ot(Ue,!0),Ie(Le),B(ct,Ue)?(Le.enumerable?(B(je,D)&&je[D][Ue]&&(je[D][Ue]=!1),Le=xt(Le,{enumerable:ht(0,!1)})):(B(je,D)||it(je,D,ht(1,{})),je[D][Ue]=!0),nt(je,Ue,Le)):it(je,Ue,Le)},dr=function(je,Ue){Ie(je);for(var Le=Te(Ue=He(Ue)),Qe=0,ft=Le.length,lt;ft>Qe;)Ot(je,lt=Le[Qe++],Ue[lt]);return je},br=function(je,Ue){return Ue===void 0?xt(je):dr(xt(je),Ue)},Ft=function(je){var Ue=Xe.call(this,je=ot(je,!0));return this===k&&B(ct,je)&&!B(le,je)?!1:Ue||!B(this,je)||!B(ct,je)||B(this,D)&&this[D][je]?Ue:!0},Nn=function(je,Ue){if(je=He(je),Ue=ot(Ue,!0),!(je===k&&B(ct,Ue)&&!B(le,Ue))){var Le=ur(je,Ue);return Le&&B(ct,Ue)&&!(B(je,D)&&je[D][Ue])&&(Le.enumerable=!0),Le}},ni=function(je){for(var Ue=wr(He(je)),Le=[],Qe=0,ft;Ue.length>Qe;)!B(ct,ft=Ue[Qe++])&&ft!=D&&ft!=ye&&Le.push(ft);return Le},an=function(je){for(var Ue=je===k,Le=wr(Ue?le:He(je)),Qe=[],ft=0,lt;Le.length>ft;)B(ct,lt=Le[ft++])&&(!Ue||B(k,lt))&&Qe.push(ct[lt]);return Qe};$||(cr=function(){if(this instanceof cr)throw TypeError("Symbol is not a constructor!");var je=J(arguments.length>0?arguments[0]:void 0),Ue=function(Le){this===k&&Ue.call(le,Le),B(this,D)&&B(this[D],je)&&(this[D][je]=!1),nt(this,je,ht(1,Le))};return Q&&We&&nt(k,je,{configurable:!0,set:Ue}),Ve(je)},ve(cr[N],"toString",function(){return this._k}),pt.f=Nn,Ht.f=Ot,P("./node_modules/core-js/modules/_object-gopn.js").f=Mt.f=ni,P("./node_modules/core-js/modules/_object-pie.js").f=Ft,wt.f=an,Q&&!P("./node_modules/core-js/modules/_library.js")&&ve(k,"propertyIsEnumerable",Ft,!0),de.f=function(Be){return Ve(re(Be))}),q(q.G+q.W+q.F*!$,{Symbol:cr});for(var Me="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;Me.length>ie;)re(Me[ie++]);for(var ue=zt(re.store),pe=0;ue.length>pe;)we(ue[pe++]);q(q.S+q.F*!$,"Symbol",{for:function(Be){return B(tt,Be+="")?tt[Be]:tt[Be]=cr(Be)},keyFor:function(je){if(!Et(je))throw TypeError(je+" is not a symbol!");for(var Ue in tt)if(tt[Ue]===je)return Ue},useSetter:function(){We=!0},useSimple:function(){We=!1}}),q(q.S+q.F*!$,"Object",{create:br,defineProperty:Ot,defineProperties:dr,getOwnPropertyDescriptor:Nn,getOwnPropertyNames:ni,getOwnPropertySymbols:an});var Fe=fe(function(){wt.f(1)});q(q.S+q.F*Fe,"Object",{getOwnPropertySymbols:function(je){return wt.f(qe(je))}}),qt&&q(q.S+q.F*(!$||fe(function(){var Be=cr();return Se([Be])!="[null]"||Se({a:Be})!="{}"||Se(Object(Be))!="{}"})),"JSON",{stringify:function(je){for(var Ue=[je],Le=1,Qe,ft;arguments.length>Le;)Ue.push(arguments[Le++]);if(ft=Qe=Ue[1],!(!Oe(Qe)&&je===void 0||Et(je)))return Ne(Qe)||(Qe=function(lt,ut){if(typeof ft=="function"&&(ut=ft.call(this,lt,ut)),!Et(ut))return ut}),Ue[1]=Qe,Se.apply(qt,Ue)}}),cr[N][xe]||P("./node_modules/core-js/modules/_hide.js")(cr[N],xe,cr[N].valueOf),ce(cr,"Symbol"),ce(Math,"Math",!0),ce(L.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_export.js"),B=P("./node_modules/core-js/modules/_array-includes.js")(!0);L(L.P,"Array",{includes:function(q){return B(this,q,arguments.length>1?arguments[1]:void 0)}}),P("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(X,U,P){var L=P("./node_modules/core-js/modules/_export.js"),B=P("./node_modules/core-js/modules/_own-keys.js"),Q=P("./node_modules/core-js/modules/_to-iobject.js"),q=P("./node_modules/core-js/modules/_object-gopd.js"),ve=P("./node_modules/core-js/modules/_create-property.js");L(L.S,"Object",{getOwnPropertyDescriptors:function(fe){for(var oe=Q(fe),ce=q.f,J=B(oe),re={},de=0,we,Te;J.length>de;)Te=ce(oe,we=J[de++]),Te!==void 0&&ve(re,we,Te);return re}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(X,U,P){P("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(X,U,P){for(var L=P("./node_modules/core-js/modules/es6.array.iterator.js"),B=P("./node_modules/core-js/modules/_object-keys.js"),Q=P("./node_modules/core-js/modules/_redefine.js"),q=P("./node_modules/core-js/modules/_global.js"),ve=P("./node_modules/core-js/modules/_hide.js"),ye=P("./node_modules/core-js/modules/_iterators.js"),fe=P("./node_modules/core-js/modules/_wks.js"),oe=fe("iterator"),ce=fe("toStringTag"),J=ye.Array,re={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},de=B(re),we=0;we<de.length;we++){var Te=de[we],Ne=re[Te],Ie=q[Te],Oe=Ie&&Ie.prototype,qe;if(Oe&&(Oe[oe]||ve(Oe,oe,J),Oe[ce]||ve(Oe,ce,Te),ye[Te]=J,Ne))for(qe in L)Oe[qe]||Q(Oe,qe,L[qe],!0)}},"./node_modules/crypt/crypt.js":function(X,U){(function(){var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L={rotl:function(B,Q){return B<<Q|B>>>32-Q},rotr:function(B,Q){return B<<32-Q|B>>>Q},endian:function(B){if(B.constructor==Number)return L.rotl(B,8)&16711935|L.rotl(B,24)&4278255360;for(var Q=0;Q<B.length;Q++)B[Q]=L.endian(B[Q]);return B},randomBytes:function(B){for(var Q=[];B>0;B--)Q.push(Math.floor(Math.random()*256));return Q},bytesToWords:function(B){for(var Q=[],q=0,ve=0;q<B.length;q++,ve+=8)Q[ve>>>5]|=B[q]<<24-ve%32;return Q},wordsToBytes:function(B){for(var Q=[],q=0;q<B.length*32;q+=8)Q.push(B[q>>>5]>>>24-q%32&255);return Q},bytesToHex:function(B){for(var Q=[],q=0;q<B.length;q++)Q.push((B[q]>>>4).toString(16)),Q.push((B[q]&15).toString(16));return Q.join("")},hexToBytes:function(B){for(var Q=[],q=0;q<B.length;q+=2)Q.push(parseInt(B.substr(q,2),16));return Q},bytesToBase64:function(B){for(var Q=[],q=0;q<B.length;q+=3)for(var ve=B[q]<<16|B[q+1]<<8|B[q+2],ye=0;ye<4;ye++)q*8+ye*6<=B.length*8?Q.push(P.charAt(ve>>>6*(3-ye)&63)):Q.push("=");return Q.join("")},base64ToBytes:function(B){B=B.replace(/[^A-Z0-9+\/]/ig,"");for(var Q=[],q=0,ve=0;q<B.length;ve=++q%4)ve!=0&&Q.push((P.indexOf(B.charAt(q-1))&Math.pow(2,-2*ve+8)-1)<<ve*2|P.indexOf(B.charAt(q))>>>6-ve*2);return Q}};X.exports=L})()},"./node_modules/is-buffer/index.js":function(X,U){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */X.exports=function(B){return B!=null&&(P(B)||L(B)||!!B._isBuffer)};function P(B){return!!B.constructor&&typeof B.constructor.isBuffer=="function"&&B.constructor.isBuffer(B)}function L(B){return typeof B.readFloatLE=="function"&&typeof B.slice=="function"&&P(B.slice(0,0))}},"./node_modules/md5/md5.js":function(X,U,P){(function(){var L=P("./node_modules/crypt/crypt.js"),B=P("./node_modules/charenc/charenc.js").utf8,Q=P("./node_modules/is-buffer/index.js"),q=P("./node_modules/charenc/charenc.js").bin,ve=function(ye,fe){ye.constructor==String?fe&&fe.encoding==="binary"?ye=q.stringToBytes(ye):ye=B.stringToBytes(ye):Q(ye)?ye=Array.prototype.slice.call(ye,0):!Array.isArray(ye)&&ye.constructor!==Uint8Array&&(ye=ye.toString());for(var oe=L.bytesToWords(ye),ce=ye.length*8,J=1732584193,re=-271733879,de=-1732584194,we=271733878,Te=0;Te<oe.length;Te++)oe[Te]=(oe[Te]<<8|oe[Te]>>>24)&16711935|(oe[Te]<<24|oe[Te]>>>8)&4278255360;oe[ce>>>5]|=128<<ce%32,oe[(ce+64>>>9<<4)+14]=ce;for(var Ne=ve._ff,Ie=ve._gg,Oe=ve._hh,qe=ve._ii,Te=0;Te<oe.length;Te+=16){var He=J,ot=re,ht=de,xt=we;J=Ne(J,re,de,we,oe[Te+0],7,-680876936),we=Ne(we,J,re,de,oe[Te+1],12,-389564586),de=Ne(de,we,J,re,oe[Te+2],17,606105819),re=Ne(re,de,we,J,oe[Te+3],22,-1044525330),J=Ne(J,re,de,we,oe[Te+4],7,-176418897),we=Ne(we,J,re,de,oe[Te+5],12,1200080426),de=Ne(de,we,J,re,oe[Te+6],17,-1473231341),re=Ne(re,de,we,J,oe[Te+7],22,-45705983),J=Ne(J,re,de,we,oe[Te+8],7,1770035416),we=Ne(we,J,re,de,oe[Te+9],12,-1958414417),de=Ne(de,we,J,re,oe[Te+10],17,-42063),re=Ne(re,de,we,J,oe[Te+11],22,-1990404162),J=Ne(J,re,de,we,oe[Te+12],7,1804603682),we=Ne(we,J,re,de,oe[Te+13],12,-40341101),de=Ne(de,we,J,re,oe[Te+14],17,-1502002290),re=Ne(re,de,we,J,oe[Te+15],22,1236535329),J=Ie(J,re,de,we,oe[Te+1],5,-165796510),we=Ie(we,J,re,de,oe[Te+6],9,-1069501632),de=Ie(de,we,J,re,oe[Te+11],14,643717713),re=Ie(re,de,we,J,oe[Te+0],20,-373897302),J=Ie(J,re,de,we,oe[Te+5],5,-701558691),we=Ie(we,J,re,de,oe[Te+10],9,38016083),de=Ie(de,we,J,re,oe[Te+15],14,-660478335),re=Ie(re,de,we,J,oe[Te+4],20,-405537848),J=Ie(J,re,de,we,oe[Te+9],5,568446438),we=Ie(we,J,re,de,oe[Te+14],9,-1019803690),de=Ie(de,we,J,re,oe[Te+3],14,-187363961),re=Ie(re,de,we,J,oe[Te+8],20,1163531501),J=Ie(J,re,de,we,oe[Te+13],5,-1444681467),we=Ie(we,J,re,de,oe[Te+2],9,-51403784),de=Ie(de,we,J,re,oe[Te+7],14,1735328473),re=Ie(re,de,we,J,oe[Te+12],20,-1926607734),J=Oe(J,re,de,we,oe[Te+5],4,-378558),we=Oe(we,J,re,de,oe[Te+8],11,-2022574463),de=Oe(de,we,J,re,oe[Te+11],16,1839030562),re=Oe(re,de,we,J,oe[Te+14],23,-35309556),J=Oe(J,re,de,we,oe[Te+1],4,-1530992060),we=Oe(we,J,re,de,oe[Te+4],11,1272893353),de=Oe(de,we,J,re,oe[Te+7],16,-155497632),re=Oe(re,de,we,J,oe[Te+10],23,-1094730640),J=Oe(J,re,de,we,oe[Te+13],4,681279174),we=Oe(we,J,re,de,oe[Te+0],11,-358537222),de=Oe(de,we,J,re,oe[Te+3],16,-722521979),re=Oe(re,de,we,J,oe[Te+6],23,76029189),J=Oe(J,re,de,we,oe[Te+9],4,-640364487),we=Oe(we,J,re,de,oe[Te+12],11,-421815835),de=Oe(de,we,J,re,oe[Te+15],16,530742520),re=Oe(re,de,we,J,oe[Te+2],23,-995338651),J=qe(J,re,de,we,oe[Te+0],6,-198630844),we=qe(we,J,re,de,oe[Te+7],10,1126891415),de=qe(de,we,J,re,oe[Te+14],15,-1416354905),re=qe(re,de,we,J,oe[Te+5],21,-57434055),J=qe(J,re,de,we,oe[Te+12],6,1700485571),we=qe(we,J,re,de,oe[Te+3],10,-1894986606),de=qe(de,we,J,re,oe[Te+10],15,-1051523),re=qe(re,de,we,J,oe[Te+1],21,-2054922799),J=qe(J,re,de,we,oe[Te+8],6,1873313359),we=qe(we,J,re,de,oe[Te+15],10,-30611744),de=qe(de,we,J,re,oe[Te+6],15,-1560198380),re=qe(re,de,we,J,oe[Te+13],21,1309151649),J=qe(J,re,de,we,oe[Te+4],6,-145523070),we=qe(we,J,re,de,oe[Te+11],10,-1120210379),de=qe(de,we,J,re,oe[Te+2],15,718787259),re=qe(re,de,we,J,oe[Te+9],21,-343485551),J=J+He>>>0,re=re+ot>>>0,de=de+ht>>>0,we=we+xt>>>0}return L.endian([J,re,de,we])};ve._ff=function(ye,fe,oe,ce,J,re,de){var we=ye+(fe&oe|~fe&ce)+(J>>>0)+de;return(we<<re|we>>>32-re)+fe},ve._gg=function(ye,fe,oe,ce,J,re,de){var we=ye+(fe&ce|oe&~ce)+(J>>>0)+de;return(we<<re|we>>>32-re)+fe},ve._hh=function(ye,fe,oe,ce,J,re,de){var we=ye+(fe^oe^ce)+(J>>>0)+de;return(we<<re|we>>>32-re)+fe},ve._ii=function(ye,fe,oe,ce,J,re,de){var we=ye+(oe^(fe|~ce))+(J>>>0)+de;return(we<<re|we>>>32-re)+fe},ve._blocksize=16,ve._digestsize=16,X.exports=function(ye,fe){if(ye==null)throw new Error("Illegal argument "+ye);var oe=L.wordsToBytes(ve(ye,fe));return fe&&fe.asBytes?oe:fe&&fe.asString?q.bytesToString(oe):L.bytesToHex(oe)}})()},"./node_modules/regenerator-runtime/runtime.js":function(X,U,P){var L=function(B){var Q=Object.prototype,q=Q.hasOwnProperty,ve,ye=typeof Symbol=="function"?Symbol:{},fe=ye.iterator||"@@iterator",oe=ye.asyncIterator||"@@asyncIterator",ce=ye.toStringTag||"@@toStringTag";function J(N,D,xe){return Object.defineProperty(N,D,{value:xe,enumerable:!0,configurable:!0,writable:!0}),N[D]}try{J({},"")}catch{J=function(D,xe,Xe){return D[xe]=Xe}}function re(N,D,xe,Xe){var tt=D&&D.prototype instanceof qe?D:qe,ct=Object.create(tt.prototype),le=new cr(Xe||[]);return ct._invoke=zt(N,xe,le),ct}B.wrap=re;function de(N,D,xe){try{return{type:"normal",arg:N.call(D,xe)}}catch(Xe){return{type:"throw",arg:Xe}}}var we="suspendedStart",Te="suspendedYield",Ne="executing",Ie="completed",Oe={};function qe(){}function He(){}function ot(){}var ht={};ht[fe]=function(){return this};var xt=Object.getPrototypeOf,Mt=xt&&xt(xt(qt([])));Mt&&Mt!==Q&&q.call(Mt,fe)&&(ht=Mt);var pt=ot.prototype=qe.prototype=Object.create(ht);He.prototype=pt.constructor=ot,ot.constructor=He,He.displayName=J(ot,ce,"GeneratorFunction");function wt(N){["next","throw","return"].forEach(function(D){J(N,D,function(xe){return this._invoke(D,xe)})})}B.isGeneratorFunction=function(N){var D=typeof N=="function"&&N.constructor;return D?D===He||(D.displayName||D.name)==="GeneratorFunction":!1},B.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,ot):(N.__proto__=ot,J(N,ce,"GeneratorFunction")),N.prototype=Object.create(pt),N},B.awrap=function(N){return{__await:N}};function Ht(N,D){function xe(ct,le,k,$){var Ee=de(N[ct],N,le);if(Ee.type==="throw")$(Ee.arg);else{var We=Ee.arg,nt=We.value;return nt&&typeof nt=="object"&&q.call(nt,"__await")?D.resolve(nt.__await).then(function(Ve){xe("next",Ve,k,$)},function(Ve){xe("throw",Ve,k,$)}):D.resolve(nt).then(function(Ve){We.value=Ve,k(We)},function(Ve){return xe("throw",Ve,k,$)})}}var Xe;function tt(ct,le){function k(){return new D(function($,Ee){xe(ct,le,$,Ee)})}return Xe=Xe?Xe.then(k,k):k()}this._invoke=tt}wt(Ht.prototype),Ht.prototype[oe]=function(){return this},B.AsyncIterator=Ht,B.async=function(N,D,xe,Xe,tt){tt===void 0&&(tt=Promise);var ct=new Ht(re(N,D,xe,Xe),tt);return B.isGeneratorFunction(D)?ct:ct.next().then(function(le){return le.done?le.value:ct.next()})};function zt(N,D,xe){var Xe=we;return function(ct,le){if(Xe===Ne)throw new Error("Generator is already running");if(Xe===Ie){if(ct==="throw")throw le;return Se()}for(xe.method=ct,xe.arg=le;;){var k=xe.delegate;if(k){var $=ur(k,xe);if($){if($===Oe)continue;return $}}if(xe.method==="next")xe.sent=xe._sent=xe.arg;else if(xe.method==="throw"){if(Xe===we)throw Xe=Ie,xe.arg;xe.dispatchException(xe.arg)}else xe.method==="return"&&xe.abrupt("return",xe.arg);Xe=Ne;var Ee=de(N,D,xe);if(Ee.type==="normal"){if(Xe=xe.done?Ie:Te,Ee.arg===Oe)continue;return{value:Ee.arg,done:xe.done}}else Ee.type==="throw"&&(Xe=Ie,xe.method="throw",xe.arg=Ee.arg)}}}function ur(N,D){var xe=N.iterator[D.method];if(xe===ve){if(D.delegate=null,D.method==="throw"){if(N.iterator.return&&(D.method="return",D.arg=ve,ur(N,D),D.method==="throw"))return Oe;D.method="throw",D.arg=new TypeError("The iterator does not provide a 'throw' method")}return Oe}var Xe=de(xe,N.iterator,D.arg);if(Xe.type==="throw")return D.method="throw",D.arg=Xe.arg,D.delegate=null,Oe;var tt=Xe.arg;if(!tt)return D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,Oe;if(tt.done)D[N.resultName]=tt.value,D.next=N.nextLoc,D.method!=="return"&&(D.method="next",D.arg=ve);else return tt;return D.delegate=null,Oe}wt(pt),J(pt,ce,"Generator"),pt[fe]=function(){return this},pt.toString=function(){return"[object Generator]"};function it(N){var D={tryLoc:N[0]};1 in N&&(D.catchLoc=N[1]),2 in N&&(D.finallyLoc=N[2],D.afterLoc=N[3]),this.tryEntries.push(D)}function wr(N){var D=N.completion||{};D.type="normal",delete D.arg,N.completion=D}function cr(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(it,this),this.reset(!0)}B.keys=function(N){var D=[];for(var xe in N)D.push(xe);return D.reverse(),function Xe(){for(;D.length;){var tt=D.pop();if(tt in N)return Xe.value=tt,Xe.done=!1,Xe}return Xe.done=!0,Xe}};function qt(N){if(N){var D=N[fe];if(D)return D.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var xe=-1,Xe=function tt(){for(;++xe<N.length;)if(q.call(N,xe))return tt.value=N[xe],tt.done=!1,tt;return tt.value=ve,tt.done=!0,tt};return Xe.next=Xe}}return{next:Se}}B.values=qt;function Se(){return{value:ve,done:!0}}return cr.prototype={constructor:cr,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=ve,this.done=!1,this.delegate=null,this.method="next",this.arg=ve,this.tryEntries.forEach(wr),!N)for(var D in this)D.charAt(0)==="t"&&q.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=ve)},stop:function(){this.done=!0;var N=this.tryEntries[0],D=N.completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var D=this;function xe($,Ee){return ct.type="throw",ct.arg=N,D.next=$,Ee&&(D.method="next",D.arg=ve),!!Ee}for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var tt=this.tryEntries[Xe],ct=tt.completion;if(tt.tryLoc==="root")return xe("end");if(tt.tryLoc<=this.prev){var le=q.call(tt,"catchLoc"),k=q.call(tt,"finallyLoc");if(le&&k){if(this.prev<tt.catchLoc)return xe(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return xe(tt.finallyLoc)}else if(le){if(this.prev<tt.catchLoc)return xe(tt.catchLoc,!0)}else if(k){if(this.prev<tt.finallyLoc)return xe(tt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(N,D){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var Xe=this.tryEntries[xe];if(Xe.tryLoc<=this.prev&&q.call(Xe,"finallyLoc")&&this.prev<Xe.finallyLoc){var tt=Xe;break}}tt&&(N==="break"||N==="continue")&&tt.tryLoc<=D&&D<=tt.finallyLoc&&(tt=null);var ct=tt?tt.completion:{};return ct.type=N,ct.arg=D,tt?(this.method="next",this.next=tt.finallyLoc,Oe):this.complete(ct)},complete:function(N,D){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&D&&(this.next=D),Oe},finish:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var xe=this.tryEntries[D];if(xe.finallyLoc===N)return this.complete(xe.completion,xe.afterLoc),wr(xe),Oe}},catch:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var xe=this.tryEntries[D];if(xe.tryLoc===N){var Xe=xe.completion;if(Xe.type==="throw"){var tt=Xe.arg;wr(xe)}return tt}}throw new Error("illegal catch attempt")},delegateYield:function(N,D,xe){return this.delegate={iterator:qt(N),resultName:D,nextLoc:xe},this.method==="next"&&(this.arg=ve),Oe}},B}(X.exports);try{regeneratorRuntime=L}catch{Function("r","regeneratorRuntime = r")(L)}},"./src/api.js":function(X,U,P){P.r(U),P.d(U,"setup",function(){return Ne}),P.d(U,"setupCache",function(){return Te}),P("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js");var L=P("axios"),B=P.n(L),Q=P("./src/request.js"),q=P("./src/cache.js");P.d(U,"serializeQuery",function(){return q.serializeQuery});var ve=P("./src/config.js"),ye=P("./src/utilities.js");function fe(Ie,Oe){if(Ie==null)return{};var qe=oe(Ie,Oe),He,ot;if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(Ie);for(ot=0;ot<ht.length;ot++)He=ht[ot],!(Oe.indexOf(He)>=0)&&Object.prototype.propertyIsEnumerable.call(Ie,He)&&(qe[He]=Ie[He])}return qe}function oe(Ie,Oe){if(Ie==null)return{};var qe={},He=Object.keys(Ie),ot,ht;for(ht=0;ht<He.length;ht++)ot=He[ht],!(Oe.indexOf(ot)>=0)&&(qe[ot]=Ie[ot]);return qe}function ce(Ie,Oe){var qe=Object.keys(Ie);if(Object.getOwnPropertySymbols){var He=Object.getOwnPropertySymbols(Ie);Oe&&(He=He.filter(function(ot){return Object.getOwnPropertyDescriptor(Ie,ot).enumerable})),qe.push.apply(qe,He)}return qe}function J(Ie){for(var Oe=1;Oe<arguments.length;Oe++){var qe=arguments[Oe]!=null?arguments[Oe]:{};Oe%2?ce(Object(qe),!0).forEach(function(He){re(Ie,He,qe[He])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ie,Object.getOwnPropertyDescriptors(qe)):ce(Object(qe)).forEach(function(He){Object.defineProperty(Ie,He,Object.getOwnPropertyDescriptor(qe,He))})}return Ie}function re(Ie,Oe,qe){return Oe in Ie?Object.defineProperty(Ie,Oe,{value:qe,enumerable:!0,configurable:!0,writable:!0}):Ie[Oe]=qe,Ie}function de(Ie,Oe,qe,He,ot,ht,xt){try{var Mt=Ie[ht](xt),pt=Mt.value}catch(wt){qe(wt);return}Mt.done?Oe(pt):Promise.resolve(pt).then(He,ot)}function we(Ie){return function(){var Oe=this,qe=arguments;return new Promise(function(He,ot){var ht=Ie.apply(Oe,qe);function xt(pt){de(ht,He,ot,xt,Mt,"next",pt)}function Mt(pt){de(ht,He,ot,xt,Mt,"throw",pt)}xt(void 0)})}}function Te(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ie=Object(ve.makeConfig)(Ie);function Oe(He){return qe.apply(this,arguments)}function qe(){return qe=we(regeneratorRuntime.mark(function He(ot){var ht,xt,Mt,pt,wt;return regeneratorRuntime.wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return ht=Object(ve.mergeRequestConfig)(Ie,ot),zt.next=3,Object(Q.default)(ht,ot);case 3:if(xt=zt.sent,Mt=xt.next,Object(ye.isFunction)(Mt)){zt.next=7;break}return zt.abrupt("return",Mt);case 7:return zt.prev=7,zt.next=10,ht.adapter(ot);case 10:xt=zt.sent,zt.next=16;break;case 13:zt.prev=13,zt.t0=zt.catch(7),pt=zt.t0;case 16:if(!pt){zt.next=31;break}if(wt=Object(ye.isFunction)(ht.readOnError)?ht.readOnError(pt,ot):ht.readOnError,!wt){zt.next=30;break}return zt.prev=19,ht.acceptStale=!0,zt.next=23,Object(Q.default)(ht,ot);case 23:return xt=zt.sent,xt.next.request.stale=!0,zt.abrupt("return",xt.next);case 28:zt.prev=28,zt.t1=zt.catch(19);case 30:throw pt;case 31:return zt.abrupt("return",Mt(xt));case 32:case"end":return zt.stop()}},He,null,[[7,13],[19,28]])})),qe.apply(this,arguments)}return{adapter:Oe,config:Ie,store:Ie.store}}function Ne(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Oe=J(J(J({},ve.defaults.axios),Ie),{},{cache:J(J({},ve.defaults.axios.cache),Ie.cache)}),qe=Te(Oe.cache);Oe.cache;var He=fe(Oe,["cache"]),ot=B.a.create(J(J({},He),{},{adapter:qe.adapter}));return ot.cache=qe.store,ot}U.default={setup:Ne,setupCache:Te,serializeQuery:q.serializeQuery}},"./src/cache.js":function(X,U,P){P.r(U),P.d(U,"read",function(){return ce}),P.d(U,"write",function(){return fe}),P.d(U,"key",function(){return re}),P.d(U,"invalidate",function(){return Te}),P.d(U,"serializeQuery",function(){return Ne}),P("./node_modules/core-js/modules/es7.array.includes.js"),P("./node_modules/core-js/modules/es6.string.includes.js"),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var L=P("./src/utilities.js"),B=P("./node_modules/md5/md5.js"),Q=P.n(B),q=P("./src/serialize.js");function ve(Ie,Oe,qe,He,ot,ht,xt){try{var Mt=Ie[ht](xt),pt=Mt.value}catch(wt){qe(wt);return}Mt.done?Oe(pt):Promise.resolve(pt).then(He,ot)}function ye(Ie){return function(){var Oe=this,qe=arguments;return new Promise(function(He,ot){var ht=Ie.apply(Oe,qe);function xt(pt){ve(ht,He,ot,xt,Mt,"next",pt)}function Mt(pt){ve(ht,He,ot,xt,Mt,"throw",pt)}xt(void 0)})}}function fe(Ie,Oe,qe){return oe.apply(this,arguments)}function oe(){return oe=ye(regeneratorRuntime.mark(function Ie(Oe,qe,He){var ot;return regeneratorRuntime.wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:return xt.prev=0,ot={expires:Oe.expires,data:Object(q.default)(Oe,qe,He)},xt.next=4,Oe.store.setItem(Oe.uuid,ot);case 4:xt.next=19;break;case 6:if(xt.prev=6,xt.t0=xt.catch(0),Oe.debug("Could not store response",xt.t0),!Oe.clearOnError){xt.next=18;break}return xt.prev=10,xt.next=13,Oe.store.clear();case 13:xt.next=18;break;case 15:xt.prev=15,xt.t1=xt.catch(10),Oe.debug("Could not clear store",xt.t1);case 18:return xt.abrupt("return",!1);case 19:return xt.abrupt("return",!0);case 20:case"end":return xt.stop()}},Ie,null,[[0,6],[10,15]])})),oe.apply(this,arguments)}function ce(Ie,Oe){return J.apply(this,arguments)}function J(){return J=ye(regeneratorRuntime.mark(function Ie(Oe,qe){var He,ot,ht,xt,Mt,pt,wt,Ht;return regeneratorRuntime.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return He=Oe.uuid,ot=Oe.ignoreCache,ur.next=3,Oe.store.getItem(He);case 3:if(ht=ur.sent,!(ot||!ht||!ht.data)){ur.next=10;break}throw Oe.debug("cache-miss",qe.url),xt=new Error,xt.reason="cache-miss",xt.message="Entry not found from cache",xt;case 10:if(Mt=ht.expires,pt=ht.data,wt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!wt&&!Oe.acceptStale&&Mt!==0&&Mt<Date.now())){ur.next=18;break}throw Oe.debug("cache-stale",qe.url),Ht=new Error,Ht.reason="cache-stale",Ht.message="Entry is stale",Ht;case 18:return Oe.debug(Oe.acceptStale?"cache-hit-stale":"cache-hit",qe.url),ur.abrupt("return",pt);case 20:case"end":return ur.stop()}},Ie)})),J.apply(this,arguments)}function re(Ie){if(Object(L.isFunction)(Ie.key))return Ie.key;var Oe;return Object(L.isString)(Ie.key)?Oe=function(He){var ot="".concat(He.baseURL?He.baseURL:"").concat(He.url),ht="".concat(Ie.key,"/").concat(ot).concat(Ne(He));return He.data?ht+Q()(He.data):ht}:Oe=function(He){var ot="".concat(He.baseURL?He.baseURL:"").concat(He.url),ht=ot+Ne(He);return He.data?ht+Q()(He.data):ht},Oe}function de(Ie,Oe){return we.apply(this,arguments)}function we(){return we=ye(regeneratorRuntime.mark(function Ie(Oe,qe){var He;return regeneratorRuntime.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(He=qe.method.toLowerCase(),!Oe.exclude.methods.includes(He)){ht.next=4;break}return ht.next=4,Oe.store.removeItem(Oe.uuid);case 4:case"end":return ht.stop()}},Ie)})),we.apply(this,arguments)}function Te(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(L.isFunction)(Ie.invalidate)?Ie.invalidate:de}function Ne(Ie){if(!Ie.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Ie.params);var Oe=Ie.params,qe=Ie.params instanceof URLSearchParams;return qe||(Oe=new URLSearchParams,Object.keys(Ie.params).forEach(function(He){return Oe.append(He,Ie.params[He])})),"?".concat(Oe.toString())}U.default={read:ce,write:fe,key:re,invalidate:Te,serializeQuery:Ne}},"./src/config.js":function(X,U,P){P.r(U),P.d(U,"defaults",function(){return J}),P.d(U,"makeConfig",function(){return de}),P.d(U,"mergeRequestConfig",function(){return we}),P("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var L=P("axios"),B=P.n(L),Q=P("./src/memory.js"),q=P("./src/cache.js");function ve(Te,Ne){var Ie=Object.keys(Te);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(Te);Ne&&(Oe=Oe.filter(function(qe){return Object.getOwnPropertyDescriptor(Te,qe).enumerable})),Ie.push.apply(Ie,Oe)}return Ie}function ye(Te){for(var Ne=1;Ne<arguments.length;Ne++){var Ie=arguments[Ne]!=null?arguments[Ne]:{};Ne%2?ve(Object(Ie),!0).forEach(function(Oe){fe(Te,Oe,Ie[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Te,Object.getOwnPropertyDescriptors(Ie)):ve(Object(Ie)).forEach(function(Oe){Object.defineProperty(Te,Oe,Object.getOwnPropertyDescriptor(Ie,Oe))})}return Te}function fe(Te,Ne,Ie){return Ne in Te?Object.defineProperty(Te,Ne,{value:Ie,enumerable:!0,configurable:!0,writable:!0}):Te[Ne]=Ie,Te}var oe=function(){},ce=function(){for(var Ne,Ie=arguments.length,Oe=new Array(Ie),qe=0;qe<Ie;qe++)Oe[qe]=arguments[qe];return(Ne=console).log.apply(Ne,["[axios-cache-adapter]"].concat(Oe))},J={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:B.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},re=["limit","store","adapter","uuid","acceptStale"],de=function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ie=ye(ye(ye({},J.cache),Ne),{},{exclude:ye(ye({},J.cache.exclude),Ne.exclude)});return Ie.key=Object(q.key)(Ie),Ie.invalidate=Object(q.invalidate)(Ie),Ie.debug!==!1?Ie.debug=typeof Ie.debug=="function"?Ie.debug:ce:Ie.debug=oe,Ie.store||(Ie.store=new Q.default),Ie.debug("Global cache config",Ie),Ie},we=function(Ne,Ie){var Oe=Ie.cache||{};Oe&&re.forEach(function(He){return Oe[He]?delete Oe[He]:void 0});var qe=ye(ye(ye({},Ne),Oe),{},{exclude:ye(ye({},Ne.exclude),Oe.exclude)});return qe.debug===!0&&(qe.debug=ce),Oe.key&&(qe.key=Object(q.key)(Oe)),qe.uuid=qe.key(Ie),Ne.debug("Request config for ".concat(Ie.url),qe),qe};U.default={defaults:J,makeConfig:de,mergeRequestConfig:we}},"./src/exclude.js":function(X,U,P){P.r(U),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/core-js/modules/es7.array.includes.js"),P("./node_modules/core-js/modules/es6.string.includes.js");var L=P("./src/utilities.js");function B(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=arguments.length>1?arguments[1]:void 0,ve=Q.exclude,ye=ve===void 0?{}:ve,fe=Q.debug,oe=q.method.toLowerCase();if(oe==="head"||ye.methods.includes(oe))return fe("Excluding request by HTTP method ".concat(q.url)),!0;if(typeof ye.filter=="function"&&ye.filter(q))return fe("Excluding request by filter ".concat(q.url)),!0;var ce=/\?.*$/.test(q.url)||Object(L.isObject)(q.params)&&Object.keys(q.params).length!==0||typeof URLSearchParams<"u"&&q.params instanceof URLSearchParams;if(ye.query&&ce)return fe("Excluding request by query ".concat(q.url)),!0;var J=ye.paths||[],re=J.some(function(de){return q.url.match(de)});return re?(fe("Excluding request by url match ".concat(q.url)),!0):!1}U.default=B},"./src/index.node.js":function(X,U,P){P.r(U);var L=P("./src/api.js");P.d(U,"setup",function(){return L.setup}),P.d(U,"setupCache",function(){return L.setupCache}),P.d(U,"serializeQuery",function(){return L.serializeQuery});var B=P("./src/redis.js");P.d(U,"RedisStore",function(){return B.default});var Q=P("./src/redis-default.js");P.d(U,"RedisDefaultStore",function(){return Q.default}),U.default={setup:L.setup,setupCache:L.setupCache,serializeQuery:L.serializeQuery,RedisStore:B.default,RedisDefaultStore:Q.default}},"./src/limit.js":function(X,U,P){P.r(U),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");function L(ve,ye,fe,oe,ce,J,re){try{var de=ve[J](re),we=de.value}catch(Te){fe(Te);return}de.done?ye(we):Promise.resolve(we).then(oe,ce)}function B(ve){return function(){var ye=this,fe=arguments;return new Promise(function(oe,ce){var J=ve.apply(ye,fe);function re(we){L(J,oe,ce,re,de,"next",we)}function de(we){L(J,oe,ce,re,de,"throw",we)}re(void 0)})}}function Q(ve){return q.apply(this,arguments)}function q(){return q=B(regeneratorRuntime.mark(function ve(ye){var fe,oe;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,ye.store.length();case 2:if(fe=J.sent,!(fe<ye.limit)){J.next=5;break}return J.abrupt("return");case 5:return ye.debug("Current store size: ".concat(fe)),J.next=8,ye.store.iterate(function(re,de){oe||(oe={value:re,key:de}),re.expires<oe.value.expires&&(oe={value:re,key:de})});case 8:if(!oe){J.next=12;break}return ye.debug("Removing item: ".concat(oe.key)),J.next=12,ye.store.removeItem(oe.key);case 12:case"end":return J.stop()}},ve)})),q.apply(this,arguments)}U.default=Q},"./src/memory.js":function(X,U,P){P.r(U),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js");var L=P("./src/utilities.js");function B(oe,ce,J,re,de,we,Te){try{var Ne=oe[we](Te),Ie=Ne.value}catch(Oe){J(Oe);return}Ne.done?ce(Ie):Promise.resolve(Ie).then(re,de)}function Q(oe){return function(){var ce=this,J=arguments;return new Promise(function(re,de){var we=oe.apply(ce,J);function Te(Ie){B(we,re,de,Te,Ne,"next",Ie)}function Ne(Ie){B(we,re,de,Te,Ne,"throw",Ie)}Te(void 0)})}}function q(oe,ce){if(!(oe instanceof ce))throw new TypeError("Cannot call a class as a function")}function ve(oe,ce){for(var J=0;J<ce.length;J++){var re=ce[J];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(oe,re.key,re)}}function ye(oe,ce,J){return ce&&ve(oe.prototype,ce),J&&ve(oe,J),oe}var fe=function(){function oe(){q(this,oe),this.store={}}return ye(oe,[{key:"getItem",value:function(){var ce=Q(regeneratorRuntime.mark(function re(de){var we;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return we=this.store[de]||null,Ne.abrupt("return",JSON.parse(we));case 2:case"end":return Ne.stop()}},re,this)}));function J(re){return ce.apply(this,arguments)}return J}()},{key:"setItem",value:function(){var ce=Q(regeneratorRuntime.mark(function re(de,we){return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return this.store[de]=JSON.stringify(we),Ne.abrupt("return",we);case 2:case"end":return Ne.stop()}},re,this)}));function J(re,de){return ce.apply(this,arguments)}return J}()},{key:"removeItem",value:function(){var ce=Q(regeneratorRuntime.mark(function re(de){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:delete this.store[de];case 1:case"end":return Te.stop()}},re,this)}));function J(re){return ce.apply(this,arguments)}return J}()},{key:"clear",value:function(){var ce=Q(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:this.store={};case 1:case"end":return we.stop()}},re,this)}));function J(){return ce.apply(this,arguments)}return J}()},{key:"length",value:function(){var ce=Q(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.abrupt("return",Object.keys(this.store).length);case 1:case"end":return we.stop()}},re,this)}));function J(){return ce.apply(this,arguments)}return J}()},{key:"iterate",value:function(J){return Promise.all(Object(L.mapObject)(this.store,J))}}]),oe}();U.default=fe},"./src/redis-default.js":function(X,U,P){P.r(U),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.function.bind.js"),P("./node_modules/core-js/modules/es6.function.name.js");var L=P("util");function B(oe,ce,J,re,de,we,Te){try{var Ne=oe[we](Te),Ie=Ne.value}catch(Oe){J(Oe);return}Ne.done?ce(Ie):Promise.resolve(Ie).then(re,de)}function Q(oe){return function(){var ce=this,J=arguments;return new Promise(function(re,de){var we=oe.apply(ce,J);function Te(Ie){B(we,re,de,Te,Ne,"next",Ie)}function Ne(Ie){B(we,re,de,Te,Ne,"throw",Ie)}Te(void 0)})}}function q(oe,ce){if(!(oe instanceof ce))throw new TypeError("Cannot call a class as a function")}function ve(oe,ce){for(var J=0;J<ce.length;J++){var re=ce[J];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(oe,re.key,re)}}function ye(oe,ce,J){return ce&&ve(oe.prototype,ce),J&&ve(oe,J),oe}var fe=function(){function oe(ce){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q(this,oe);var re=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ce.constructor.name!=="RedisClient")throw re}catch{throw re}this.client=ce,this.prefix=J.prefix||"axios-cache",this.maxScanCount=J.maxScanCount||1e3,this.getAsync=Object(L.promisify)(ce.get).bind(ce),this.psetexAsync=Object(L.promisify)(ce.psetex).bind(ce),this.delAsync=Object(L.promisify)(ce.del).bind(ce),this.scanAsync=Object(L.promisify)(ce.scan).bind(ce)}return ye(oe,[{key:"calculateTTL",value:function(J){var re=Date.now();return J.expires&&J.expires>re?J.expires-re:-1}},{key:"transformKey",value:function(J){return this.prefix+"_"+J}},{key:"getItem",value:function(){var ce=Q(regeneratorRuntime.mark(function re(de){var we;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.getAsync(this.transformKey(de));case 2:if(Ne.t0=Ne.sent,Ne.t0){Ne.next=5;break}Ne.t0=null;case 5:return we=Ne.t0,Ne.abrupt("return",JSON.parse(we));case 7:case"end":return Ne.stop()}},re,this)}));function J(re){return ce.apply(this,arguments)}return J}()},{key:"setItem",value:function(){var ce=Q(regeneratorRuntime.mark(function re(de,we){var Te,Ne;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(Te=this.transformKey(de),Ne=this.calculateTTL(we),!(Ne>0)){Oe.next=5;break}return Oe.next=5,this.psetexAsync(Te,Ne,JSON.stringify(we));case 5:return Oe.abrupt("return",we);case 6:case"end":return Oe.stop()}},re,this)}));function J(re,de){return ce.apply(this,arguments)}return J}()},{key:"removeItem",value:function(){var ce=Q(regeneratorRuntime.mark(function re(de){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.delAsync(this.transformKey(de));case 2:case"end":return Te.stop()}},re,this)}));function J(re){return ce.apply(this,arguments)}return J}()},{key:"scan",value:function(){var ce=Q(regeneratorRuntime.mark(function re(de){var we,Te;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:we="0";case 1:return Ie.next=3,this.scanAsync(we,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Te=Ie.sent,we=Te[0],Ie.next=7,de(Te[1]);case 7:if(we!=="0"){Ie.next=1;break}case 8:case"end":return Ie.stop()}},re,this)}));function J(re){return ce.apply(this,arguments)}return J}()},{key:"clear",value:function(){var ce=Q(regeneratorRuntime.mark(function re(){var de=this;return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.scan(function(Ne){return de.delAsync(Ne)});case 2:case"end":return Te.stop()}},re,this)}));function J(){return ce.apply(this,arguments)}return J}()},{key:"length",value:function(){var ce=Q(regeneratorRuntime.mark(function re(){var de;return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return de=0,Te.next=3,this.scan(function(Ne){de+=Ne.length});case 3:return Te.abrupt("return",de);case 4:case"end":return Te.stop()}},re,this)}));function J(){return ce.apply(this,arguments)}return J}()},{key:"iterate",value:function(){var ce=Q(regeneratorRuntime.mark(function re(de){var we=this,Te,Ne;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Ne=function(){return Ne=Q(regeneratorRuntime.mark(function He(ot){var ht,xt;return regeneratorRuntime.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,this.getAsync(ot);case 2:if(pt.t0=pt.sent,pt.t0){pt.next=5;break}pt.t0=null;case 5:return ht=pt.t0,xt=JSON.parse(ht),pt.next=9,de(xt,ot);case 9:return pt.abrupt("return",pt.sent);case 10:case"end":return pt.stop()}},He,this)})),Ne.apply(this,arguments)},Te=function(He){return Ne.apply(this,arguments)},Oe.next=4,this.scan(function(qe){return Promise.all(qe.map(Te.bind(we)))});case 4:return Oe.abrupt("return",Promise.resolve([]));case 5:case"end":return Oe.stop()}},re,this)}));function J(re){return ce.apply(this,arguments)}return J}()}]),oe}();U.default=fe},"./src/redis.js":function(X,U,P){P.r(U),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js"),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.function.bind.js"),P("./node_modules/core-js/modules/es6.function.name.js");var L=P("util"),B=P("./src/utilities.js");function Q(ce,J,re,de,we,Te,Ne){try{var Ie=ce[Te](Ne),Oe=Ie.value}catch(qe){re(qe);return}Ie.done?J(Oe):Promise.resolve(Oe).then(de,we)}function q(ce){return function(){var J=this,re=arguments;return new Promise(function(de,we){var Te=ce.apply(J,re);function Ne(Oe){Q(Te,de,we,Ne,Ie,"next",Oe)}function Ie(Oe){Q(Te,de,we,Ne,Ie,"throw",Oe)}Ne(void 0)})}}function ve(ce,J){if(!(ce instanceof J))throw new TypeError("Cannot call a class as a function")}function ye(ce,J){for(var re=0;re<J.length;re++){var de=J[re];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(ce,de.key,de)}}function fe(ce,J,re){return J&&ye(ce.prototype,J),re&&ye(ce,re),ce}var oe=function(){function ce(J){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ve(this,ce);var de=new TypeError("First parameter must be a valid RedisClient instance.");try{if(J.constructor.name!=="RedisClient")throw de}catch{throw de}this.client=J,this.HASH_KEY=re,this.hgetAsync=Object(L.promisify)(J.hget).bind(J),this.hsetAsync=Object(L.promisify)(J.hset).bind(J),this.hdelAsync=Object(L.promisify)(J.hdel).bind(J),this.delAsync=Object(L.promisify)(J.del).bind(J),this.hlenAsync=Object(L.promisify)(J.hlen).bind(J),this.hgetallAsync=Object(L.promisify)(J.hgetall).bind(J)}return fe(ce,[{key:"getItem",value:function(){var J=q(regeneratorRuntime.mark(function de(we){var Te;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hgetAsync(this.HASH_KEY,we);case 2:if(Ie.t0=Ie.sent,Ie.t0){Ie.next=5;break}Ie.t0=null;case 5:return Te=Ie.t0,Ie.abrupt("return",JSON.parse(Te));case 7:case"end":return Ie.stop()}},de,this)}));function re(de){return J.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var J=q(regeneratorRuntime.mark(function de(we,Te){return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hsetAsync(this.HASH_KEY,we,JSON.stringify(Te));case 2:return Ie.abrupt("return",Te);case 3:case"end":return Ie.stop()}},de,this)}));function re(de,we){return J.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var J=q(regeneratorRuntime.mark(function de(we){return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.hdelAsync(this.HASH_KEY,we);case 2:case"end":return Ne.stop()}},de,this)}));function re(de){return J.apply(this,arguments)}return re}()},{key:"clear",value:function(){var J=q(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Te.stop()}},de,this)}));function re(){return J.apply(this,arguments)}return re}()},{key:"length",value:function(){var J=q(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Te.stop()}},de,this)}));function re(){return J.apply(this,arguments)}return re}()},{key:"iterate",value:function(){var J=q(regeneratorRuntime.mark(function de(we){var Te;return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Te=Ie.sent,Ie.abrupt("return",Promise.all(Object(B.mapObject)(Te,we)));case 4:case"end":return Ie.stop()}},de,this)}));function re(de){return J.apply(this,arguments)}return re}()}]),ce}();U.default=oe},"./src/request.js":function(X,U,P){P.r(U),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var L=P("./src/response.js"),B=P("./src/exclude.js"),Q=P("./src/cache.js");function q(oe,ce,J,re,de,we,Te){try{var Ne=oe[we](Te),Ie=Ne.value}catch(Oe){J(Oe);return}Ne.done?ce(Ie):Promise.resolve(Ie).then(re,de)}function ve(oe){return function(){var ce=this,J=arguments;return new Promise(function(re,de){var we=oe.apply(ce,J);function Te(Ie){q(we,re,de,Te,Ne,"next",Ie)}function Ne(Ie){q(we,re,de,Te,Ne,"throw",Ie)}Te(void 0)})}}function ye(oe,ce){return fe.apply(this,arguments)}function fe(){return fe=ve(regeneratorRuntime.mark(function oe(ce,J){var re,de,we;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return we=function(){return ce.excludeFromCache=!0,{config:ce,next:re}},ce.debug("uuid",ce.uuid),re=function(){for(var Oe=arguments.length,qe=new Array(Oe),He=0;He<Oe;He++)qe[He]=arguments[He];return L.default.apply(void 0,[ce,J].concat(qe))},Ne.next=5,ce.invalidate(ce,J);case 5:if(!Object(B.default)(ce,J)){Ne.next=7;break}return Ne.abrupt("return",we());case 7:return Ne.prev=7,Ne.next=10,Object(Q.read)(ce,J);case 10:return de=Ne.sent,de.config=J,de.request={fromCache:!0},Ne.abrupt("return",{config:ce,next:de});case 16:if(Ne.prev=16,Ne.t0=Ne.catch(7),!(ce.clearOnStale&&Ne.t0.reason==="cache-stale")){Ne.next=21;break}return Ne.next=21,ce.store.removeItem(ce.uuid);case 21:return Ne.abrupt("return",{config:ce,next:re});case 22:case"end":return Ne.stop()}},oe,null,[[7,16]])})),fe.apply(this,arguments)}U.default=ye},"./src/response.js":function(X,U,P){P.r(U),P("./node_modules/regenerator-runtime/runtime.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");var L=P("./src/limit.js"),B=P("./src/cache.js"),Q=P("./node_modules/cache-control-esm/index.js");function q(oe,ce,J,re,de,we,Te){try{var Ne=oe[we](Te),Ie=Ne.value}catch(Oe){J(Oe);return}Ne.done?ce(Ie):Promise.resolve(Ie).then(re,de)}function ve(oe){return function(){var ce=this,J=arguments;return new Promise(function(re,de){var we=oe.apply(ce,J);function Te(Ie){q(we,re,de,Te,Ne,"next",Ie)}function Ne(Ie){q(we,re,de,Te,Ne,"throw",Ie)}Te(void 0)})}}function ye(oe,ce,J){return fe.apply(this,arguments)}function fe(){return fe=ve(regeneratorRuntime.mark(function oe(ce,J,re){var de,we,Te,Ne,Ie;return regeneratorRuntime.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(de=re.request,we=de===void 0?{}:de,Te=re.headers,Ne=Te===void 0?{}:Te,!(["arraybuffer","blob"].indexOf(we.responseType)>-1)){qe.next=3;break}return qe.abrupt("return",re);case 3:if(Ie={},ce.readHeaders&&(Ne["cache-control"]?(Ie=Object(Q.parse)(Ne["cache-control"]),(Ie.noCache||Ie.noStore)&&(ce.excludeFromCache=!0)):Ne.expires?ce.expires=new Date(Ne.expires).getTime():ce.expires=new Date().getTime()),ce.excludeFromCache){qe.next=15;break}if(Ie.maxAge||Ie.maxAge===0?ce.expires=Date.now()+Ie.maxAge*1e3:ce.readHeaders||(ce.expires=ce.maxAge===0?Date.now():Date.now()+ce.maxAge),!ce.limit){qe.next=11;break}return ce.debug("Detected limit: ".concat(ce.limit)),qe.next=11,Object(L.default)(ce);case 11:return qe.next=13,Object(B.write)(ce,J,re);case 13:qe.next=16;break;case 15:re.request.excludedFromCache=!0;case 16:return qe.abrupt("return",re);case 17:case"end":return qe.stop()}},oe)})),fe.apply(this,arguments)}U.default=ye},"./src/serialize.js":function(X,U,P){P.r(U),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");function L(q,ve){if(q==null)return{};var ye=B(q,ve),fe,oe;if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(q);for(oe=0;oe<ce.length;oe++)fe=ce[oe],!(ve.indexOf(fe)>=0)&&Object.prototype.propertyIsEnumerable.call(q,fe)&&(ye[fe]=q[fe])}return ye}function B(q,ve){if(q==null)return{};var ye={},fe=Object.keys(q),oe,ce;for(ce=0;ce<fe.length;ce++)oe=fe[ce],!(ve.indexOf(oe)>=0)&&(ye[oe]=q[oe]);return ye}function Q(q,ve,ye){if(ye.data)try{ye.data=JSON.parse(ye.data)}catch(oe){q.debug("Could not parse data as JSON",oe)}ye.request,ye.config;var fe=L(ye,["request","config"]);return fe}U.default=Q},"./src/utilities.js":function(X,U,P){P.r(U),P.d(U,"isObject",function(){return B}),P.d(U,"getTag",function(){return Q}),P.d(U,"isFunction",function(){return q}),P.d(U,"isString",function(){return ve}),P.d(U,"mapObject",function(){return ye}),P("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),P("./node_modules/core-js/modules/es6.symbol.js"),P("./node_modules/core-js/modules/es6.array.iterator.js"),P("./node_modules/core-js/modules/es6.object.to-string.js");function L(fe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?L=function(ce){return typeof ce}:L=function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},L(fe)}function B(fe){var oe=L(fe);return fe!=null&&(oe==="object"||oe==="function")}function Q(fe){return fe===null?fe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(fe)}function q(fe){if(!B(fe))return!1;var oe=Q(fe);return oe==="[object Function]"||oe==="[object AsyncFunction]"||oe==="[object GeneratorFunction]"||oe==="[object Proxy]"}function ve(fe){var oe=L(fe);return oe==="string"||oe==="object"&&fe!=null&&!Array.isArray(fe)&&Q(fe)==="[object String]"}function ye(fe,oe){return B(fe)?Object.keys(fe).map(function(ce){return oe(fe[ce],ce)}):[]}},axios:function(X,U){X.exports=ae},util:function(X,U){X.exports=I.default}})})});const z={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},j=R.setupCache({maxAge:60*60*24*1e3}),se=E.default.create({adapter:j.adapter}),K=async(Z,V={})=>{const ae={...z,...V},[X,U]=n.lngLatToGoogle(Z,ae.zoomBase),P=ae.tileUrl.replace("{z}",String(ae.zoomBase)).replace("{x}",String(X)).replace("{y}",String(U)),L={code:"",prefecture:"",city:""};let B;try{const ve=await se.get(P,{responseType:"arraybuffer"});B=Buffer.from(ve.data,"binary")}catch(ve){throw new Error(ve)}const Q=new d.VectorTile(new w.default(B));let q=Object.keys(Q.layers);return Array.isArray(q)||(q=[q]),q.forEach(ve=>{const ye=Q.layers[ve];if(ye&&ae.layer===ye.name)for(let fe=0;fe<ye.length;fe++){const oe=ye.feature(fe).toGeoJSON(X,U,ae.zoomBase);q.length>1&&(oe.properties.vt_layer=ve);const ce={type:"FeatureCollection",features:[oe]};t.geoContains(ce,Z)&&(L.code=String(oe.id).length===5?String(oe.id):`0${String(oe.id)}`,L.prefecture=oe.properties.prefecture,L.city=oe.properties.city)}}),L};e.openReverseGeocoder=K})(Pk);const l8={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},u8={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},c8={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"",placeholder:"",adminLevel:4},{key:"addr:city",displayName:"23",placeholder:"",adminLevel:7},{key:"addr:suburb",displayName:"",placeholder:""},{key:"addr:quarter",displayName:"",placeholder:"",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"",placeholder:"1"},{key:"addr:block_number",displayName:"",placeholder:"17"},{key:"addr:housenumber",displayName:"",placeholder:"6",prefix:"-"}]},h8={defaultComment:" ",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},eA={JPN:c8,CHN:l8,DEU:u8,KOR:h8};var tA=Object.prototype.toString,N3=function(t){var n=tA.call(t),a=n==="[object Arguments]";return a||(a=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&tA.call(t.callee)==="[object Function]"),a},G_,rA;function f8(){if(rA)return G_;rA=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,a=N3,l=Object.prototype.propertyIsEnumerable,f=!l.call({toString:null},"toString"),d=l.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],w=function(T){var R=T.constructor;return R&&R.prototype===T},E={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},I=function(){if(typeof window>"u")return!1;for(var T in window)try{if(!E["$"+T]&&t.call(window,T)&&window[T]!==null&&typeof window[T]=="object")try{w(window[T])}catch{return!0}}catch{return!0}return!1}(),b=function(T){if(typeof window>"u"||!I)return w(T);try{return w(T)}catch{return!1}};e=function(R){var z=R!==null&&typeof R=="object",j=n.call(R)==="[object Function]",se=a(R),K=z&&n.call(R)==="[object String]",Z=[];if(!z&&!j&&!se)throw new TypeError("Object.keys called on a non-object");var V=d&&j;if(K&&R.length>0&&!t.call(R,0))for(var ae=0;ae<R.length;++ae)Z.push(String(ae));if(se&&R.length>0)for(var X=0;X<R.length;++X)Z.push(String(X));else for(var U in R)!(V&&U==="prototype")&&t.call(R,U)&&Z.push(String(U));if(f)for(var P=b(R),L=0;L<u.length;++L)!(P&&u[L]==="constructor")&&t.call(R,u[L])&&Z.push(u[L]);return Z}}return G_=e,G_}var d8=Array.prototype.slice,p8=N3,nA=Object.keys,Wg=nA?function(t){return nA(t)}:f8(),iA=Object.keys;Wg.shim=function(){if(Object.keys){var t=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);t||(Object.keys=function(a){return p8(a)?iA(d8.call(a)):iA(a)})}else Object.keys=Wg;return Object.keys||Wg};var o2=Wg,m8=Error,g8=EvalError,y8=RangeError,v8=ReferenceError,$3=SyntaxError,Cu=TypeError,_8=URIError,W0=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),a=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var l=42;t[n]=l;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var f=Object.getOwnPropertySymbols(t);if(f.length!==1||f[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var d=Object.getOwnPropertyDescriptor(t,n);if(d.value!==l||d.enumerable!==!0)return!1}return!0},oA=typeof Symbol<"u"&&Symbol,x8=W0,a2=function(){return typeof oA!="function"||typeof Symbol!="function"||typeof oA("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:x8()},W_={__proto__:null,foo:{}},w8=Object,b8=function(){return{__proto__:W_}.foo===W_.foo&&!(W_ instanceof w8)},S8="Function.prototype.bind called on incompatible ",E8=Object.prototype.toString,T8=Math.max,P8="[object Function]",aA=function(t,n){for(var a=[],l=0;l<t.length;l+=1)a[l]=t[l];for(var f=0;f<n.length;f+=1)a[f+t.length]=n[f];return a},A8=function(t,n){for(var a=[],l=n||0,f=0;l<t.length;l+=1,f+=1)a[f]=t[l];return a},I8=function(e,t){for(var n="",a=0;a<e.length;a+=1)n+=e[a],a+1<e.length&&(n+=t);return n},C8=function(t){var n=this;if(typeof n!="function"||E8.apply(n)!==P8)throw new TypeError(S8+n);for(var a=A8(arguments,1),l,f=function(){if(this instanceof l){var I=n.apply(this,aA(a,arguments));return Object(I)===I?I:this}return n.apply(t,aA(a,arguments))},d=T8(0,n.length-a.length),u=[],w=0;w<d;w++)u[w]="$"+w;if(l=Function("binder","return function ("+I8(u,",")+"){ return binder.apply(this,arguments); }")(f),n.prototype){var E=function(){};E.prototype=n.prototype,l.prototype=new E,E.prototype=null}return l},M8=C8,s2=Function.prototype.bind||M8,k8=Function.prototype.call,O8=Object.prototype.hasOwnProperty,F8=s2,U3=F8.call(k8,O8),zr,R8=m8,j8=g8,L8=y8,z8=v8,vf=$3,nf=Cu,B8=_8,V3=Function,H_=function(e){try{return V3('"use strict"; return ('+e+").constructor;")()}catch{}},pc=Object.getOwnPropertyDescriptor;if(pc)try{pc({},"")}catch{pc=null}var Z_=function(){throw new nf},D8=pc?function(){try{return arguments.callee,Z_}catch{try{return pc(arguments,"callee").get}catch{return Z_}}}():Z_,Ph=a2(),N8=b8(),yi=Object.getPrototypeOf||(N8?function(e){return e.__proto__}:null),Ch={},$8=typeof Uint8Array>"u"||!yi?zr:yi(Uint8Array),mc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?zr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?zr:ArrayBuffer,"%ArrayIteratorPrototype%":Ph&&yi?yi([][Symbol.iterator]()):zr,"%AsyncFromSyncIteratorPrototype%":zr,"%AsyncFunction%":Ch,"%AsyncGenerator%":Ch,"%AsyncGeneratorFunction%":Ch,"%AsyncIteratorPrototype%":Ch,"%Atomics%":typeof Atomics>"u"?zr:Atomics,"%BigInt%":typeof BigInt>"u"?zr:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?zr:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?zr:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?zr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":R8,"%eval%":eval,"%EvalError%":j8,"%Float32Array%":typeof Float32Array>"u"?zr:Float32Array,"%Float64Array%":typeof Float64Array>"u"?zr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?zr:FinalizationRegistry,"%Function%":V3,"%GeneratorFunction%":Ch,"%Int8Array%":typeof Int8Array>"u"?zr:Int8Array,"%Int16Array%":typeof Int16Array>"u"?zr:Int16Array,"%Int32Array%":typeof Int32Array>"u"?zr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ph&&yi?yi(yi([][Symbol.iterator]())):zr,"%JSON%":typeof JSON=="object"?JSON:zr,"%Map%":typeof Map>"u"?zr:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ph||!yi?zr:yi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?zr:Promise,"%Proxy%":typeof Proxy>"u"?zr:Proxy,"%RangeError%":L8,"%ReferenceError%":z8,"%Reflect%":typeof Reflect>"u"?zr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?zr:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ph||!yi?zr:yi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?zr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ph&&yi?yi(""[Symbol.iterator]()):zr,"%Symbol%":Ph?Symbol:zr,"%SyntaxError%":vf,"%ThrowTypeError%":D8,"%TypedArray%":$8,"%TypeError%":nf,"%Uint8Array%":typeof Uint8Array>"u"?zr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?zr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?zr:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?zr:Uint32Array,"%URIError%":B8,"%WeakMap%":typeof WeakMap>"u"?zr:WeakMap,"%WeakRef%":typeof WeakRef>"u"?zr:WeakRef,"%WeakSet%":typeof WeakSet>"u"?zr:WeakSet};if(yi)try{null.error}catch(e){var U8=yi(yi(e));mc["%Error.prototype%"]=U8}var V8=function e(t){var n;if(t==="%AsyncFunction%")n=H_("async function () {}");else if(t==="%GeneratorFunction%")n=H_("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=H_("async function* () {}");else if(t==="%AsyncGenerator%"){var a=e("%AsyncGeneratorFunction%");a&&(n=a.prototype)}else if(t==="%AsyncIteratorPrototype%"){var l=e("%AsyncGenerator%");l&&yi&&(n=yi(l.prototype))}return mc[t]=n,n},sA={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},tm=s2,t0=U3,G8=tm.call(Function.call,Array.prototype.concat),W8=tm.call(Function.apply,Array.prototype.splice),lA=tm.call(Function.call,String.prototype.replace),r0=tm.call(Function.call,String.prototype.slice),H8=tm.call(Function.call,RegExp.prototype.exec),Z8=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,q8=/\\(\\)?/g,X8=function(t){var n=r0(t,0,1),a=r0(t,-1);if(n==="%"&&a!=="%")throw new vf("invalid intrinsic syntax, expected closing `%`");if(a==="%"&&n!=="%")throw new vf("invalid intrinsic syntax, expected opening `%`");var l=[];return lA(t,Z8,function(f,d,u,w){l[l.length]=u?lA(w,q8,"$1"):d||f}),l},K8=function(t,n){var a=t,l;if(t0(sA,a)&&(l=sA[a],a="%"+l[0]+"%"),t0(mc,a)){var f=mc[a];if(f===Ch&&(f=V8(a)),typeof f>"u"&&!n)throw new nf("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:l,name:a,value:f}}throw new vf("intrinsic "+t+" does not exist!")},Os=function(t,n){if(typeof t!="string"||t.length===0)throw new nf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new nf('"allowMissing" argument must be a boolean');if(H8(/^%?[^%]*%?$/,t)===null)throw new vf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var a=X8(t),l=a.length>0?a[0]:"",f=K8("%"+l+"%",n),d=f.name,u=f.value,w=!1,E=f.alias;E&&(l=E[0],W8(a,G8([0,1],E)));for(var I=1,b=!0;I<a.length;I+=1){var T=a[I],R=r0(T,0,1),z=r0(T,-1);if((R==='"'||R==="'"||R==="`"||z==='"'||z==="'"||z==="`")&&R!==z)throw new vf("property names with quotes must have matching quotes");if((T==="constructor"||!b)&&(w=!0),l+="."+T,d="%"+l+"%",t0(mc,d))u=mc[d];else if(u!=null){if(!(T in u)){if(!n)throw new nf("base intrinsic for "+t+" exists, but the property is not available.");return}if(pc&&I+1>=a.length){var j=pc(u,T);b=!!j,b&&"get"in j&&!("originalValue"in j.get)?u=j.get:u=u[T]}else b=t0(u,T),u=u[T];b&&!w&&(mc[d]=u)}}return u},Y8=Os,Hg=Y8("%Object.defineProperty%",!0)||!1;if(Hg)try{Hg({},"a",{value:1})}catch{Hg=!1}var l2=Hg,J8=Os,Zg=J8("%Object.getOwnPropertyDescriptor%",!0);if(Zg)try{Zg([],"length")}catch{Zg=null}var u2=Zg,uA=l2,Q8=$3,Ah=Cu,cA=u2,c2=function(t,n,a){if(!t||typeof t!="object"&&typeof t!="function")throw new Ah("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new Ah("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ah("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ah("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ah("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ah("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,f=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,u=arguments.length>6?arguments[6]:!1,w=!!cA&&cA(t,n);if(uA)uA(t,n,{configurable:d===null&&w?w.configurable:!d,enumerable:l===null&&w?w.enumerable:!l,value:a,writable:f===null&&w?w.writable:!f});else if(u||!l&&!f&&!d)t[n]=a;else throw new Q8("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Jx=l2,G3=function(){return!!Jx};G3.hasArrayLengthDefineBug=function(){if(!Jx)return null;try{return Jx([],"length",{value:1}).length!==1}catch{return!0}};var h2=G3,e$=o2,t$=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",r$=Object.prototype.toString,n$=Array.prototype.concat,hA=c2,i$=function(e){return typeof e=="function"&&r$.call(e)==="[object Function]"},W3=h2(),o$=function(e,t,n,a){if(t in e){if(a===!0){if(e[t]===n)return}else if(!i$(a)||!a())return}W3?hA(e,t,n,!0):hA(e,t,n)},H3=function(e,t){var n=arguments.length>2?arguments[2]:{},a=e$(t);t$&&(a=n$.call(a,Object.getOwnPropertySymbols(t)));for(var l=0;l<a.length;l+=1)o$(e,a[l],t[a[l]],n[a[l]])};H3.supportsDescriptors=!!W3;var Mc=H3,Z3={exports:{}},a$=Os,fA=c2,s$=h2(),dA=u2,pA=Cu,l$=a$("%Math.floor%"),u$=function(t,n){if(typeof t!="function")throw new pA("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||l$(n)!==n)throw new pA("`length` must be a positive 32-bit integer");var a=arguments.length>2&&!!arguments[2],l=!0,f=!0;if("length"in t&&dA){var d=dA(t,"length");d&&!d.configurable&&(l=!1),d&&!d.writable&&(f=!1)}return(l||f||!a)&&(s$?fA(t,"length",n,!0,!0):fA(t,"length",n)),t};(function(e){var t=s2,n=Os,a=u$,l=Cu,f=n("%Function.prototype.apply%"),d=n("%Function.prototype.call%"),u=n("%Reflect.apply%",!0)||t.call(d,f),w=l2,E=n("%Math.max%");e.exports=function(T){if(typeof T!="function")throw new l("a function is required");var R=u(t,d,arguments);return a(R,1+E(0,T.length-(arguments.length-1)),!0)};var I=function(){return u(t,f,arguments)};w?w(e.exports,"apply",{value:I}):e.exports.apply=I})(Z3);var Cf=Z3.exports,q3=Os,X3=Cf,c$=X3(q3("String.prototype.indexOf")),ya=function(t,n){var a=q3(t,!!n);return typeof a=="function"&&c$(t,".prototype.")>-1?X3(a):a},h$=o2,K3=W0(),Y3=ya,mA=Object,f$=Y3("Array.prototype.push"),gA=Y3("Object.prototype.propertyIsEnumerable"),d$=K3?Object.getOwnPropertySymbols:null,J3=function(t,n){if(t==null)throw new TypeError("target must be an object");var a=mA(t);if(arguments.length===1)return a;for(var l=1;l<arguments.length;++l){var f=mA(arguments[l]),d=h$(f),u=K3&&(Object.getOwnPropertySymbols||d$);if(u)for(var w=u(f),E=0;E<w.length;++E){var I=w[E];gA(f,I)&&f$(d,I)}for(var b=0;b<d.length;++b){var T=d[b];if(gA(f,T)){var R=f[T];a[T]=R}}}return a},q_=J3,p$=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},a=0;a<t.length;++a)n[t[a]]=t[a];var l=Object.assign({},n),f="";for(var d in l)f+=d;return e!==f},m$=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch{return e[1]==="y"}return!1},Q3=function(){return!Object.assign||p$()||m$()?q_:Object.assign},g$=Mc,y$=Q3,v$=function(){var t=y$();return g$(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t},_$=Mc,x$=Cf,w$=J3,eO=Q3,b$=v$,S$=x$.apply(eO()),tO=function(t,n){return S$(Object,arguments)};_$(tO,{getPolyfill:eO,implementation:w$,shim:b$});var E$=tO,Dp=function(){return typeof(function(){}).name=="string"},up=Object.getOwnPropertyDescriptor;if(up)try{up([],"length")}catch{up=null}Dp.functionsHaveConfigurableNames=function(){if(!Dp()||!up)return!1;var t=up(function(){},"name");return!!t&&!!t.configurable};var T$=Function.prototype.bind;Dp.boundFunctionsHaveNames=function(){return Dp()&&typeof T$=="function"&&(function(){}).bind().name!==""};var P$=Dp,yA=c2,A$=h2(),I$=P$.functionsHaveConfigurableNames(),C$=Cu,M$=function(t,n){if(typeof t!="function")throw new C$("`fn` is not a function");var a=arguments.length>2&&!!arguments[2];return(!a||I$)&&(A$?yA(t,"name",n,!0,!0):yA(t,"name",n)),t},k$=M$,O$=Cu,F$=Object,rO=k$(function(){if(this==null||this!==F$(this))throw new O$("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0),R$=rO,j$=Mc.supportsDescriptors,L$=Object.getOwnPropertyDescriptor,nO=function(){if(j$&&/a/mig.flags==="gim"){var t=L$(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var n="",a={};if(Object.defineProperty(a,"hasIndices",{get:function(){n+="d"}}),Object.defineProperty(a,"sticky",{get:function(){n+="y"}}),n==="dy")return t.get}}return R$},z$=Mc.supportsDescriptors,B$=nO,D$=Object.getOwnPropertyDescriptor,N$=Object.defineProperty,$$=TypeError,vA=Object.getPrototypeOf,U$=/a/,V$=function(){if(!z$||!vA)throw new $$("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=B$(),n=vA(U$),a=D$(n,"flags");return(!a||a.get!==t)&&N$(n,"flags",{configurable:!0,enumerable:!1,get:t}),t},G$=Mc,W$=Cf,H$=rO,iO=nO,Z$=V$,oO=W$(iO());G$(oO,{getPolyfill:iO,implementation:H$,shim:Z$});var q$=oO,qg={exports:{}},X$=W0,kc=function(){return X$()&&!!Symbol.toStringTag},K$=kc(),Y$=ya,Qx=Y$("Object.prototype.toString"),H0=function(t){return K$&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:Qx(t)==="[object Arguments]"},aO=function(t){return H0(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Qx(t)!=="[object Array]"&&Qx(t.callee)==="[object Function]"},J$=function(){return H0(arguments)}();H0.isLegacyArguments=aO;var sO=J$?H0:aO,f2=typeof Map=="function"&&Map.prototype,X_=Object.getOwnPropertyDescriptor&&f2?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,n0=f2&&X_&&typeof X_.get=="function"?X_.get:null,_A=f2&&Map.prototype.forEach,d2=typeof Set=="function"&&Set.prototype,K_=Object.getOwnPropertyDescriptor&&d2?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,i0=d2&&K_&&typeof K_.get=="function"?K_.get:null,xA=d2&&Set.prototype.forEach,Q$=typeof WeakMap=="function"&&WeakMap.prototype,cp=Q$?WeakMap.prototype.has:null,eU=typeof WeakSet=="function"&&WeakSet.prototype,hp=eU?WeakSet.prototype.has:null,tU=typeof WeakRef=="function"&&WeakRef.prototype,wA=tU?WeakRef.prototype.deref:null,rU=Boolean.prototype.valueOf,nU=Object.prototype.toString,iU=Function.prototype.toString,oU=String.prototype.match,p2=String.prototype.slice,cu=String.prototype.replace,aU=String.prototype.toUpperCase,bA=String.prototype.toLowerCase,lO=RegExp.prototype.test,SA=Array.prototype.concat,xs=Array.prototype.join,sU=Array.prototype.slice,EA=Math.floor,ew=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Y_=Object.getOwnPropertySymbols,tw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,_f=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ki=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===_f||!0)?Symbol.toStringTag:null,uO=Object.prototype.propertyIsEnumerable,TA=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function PA(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||lO.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var a=e<0?-EA(-e):EA(e);if(a!==e){var l=String(a),f=p2.call(t,l.length+1);return cu.call(l,n,"$&_")+"."+cu.call(cu.call(f,/([0-9]{3})/g,"$&_"),/_$/,"")}}return cu.call(t,n,"$&_")}var rw=L3,AA=rw.custom,IA=hO(AA)?AA:null,lU=function e(t,n,a,l){var f=n||{};if(ou(f,"quoteStyle")&&f.quoteStyle!=="single"&&f.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ou(f,"maxStringLength")&&(typeof f.maxStringLength=="number"?f.maxStringLength<0&&f.maxStringLength!==1/0:f.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var d=ou(f,"customInspect")?f.customInspect:!0;if(typeof d!="boolean"&&d!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ou(f,"indent")&&f.indent!==null&&f.indent!=="	"&&!(parseInt(f.indent,10)===f.indent&&f.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ou(f,"numericSeparator")&&typeof f.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var u=f.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return dO(t,f);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var w=String(t);return u?PA(t,w):w}if(typeof t=="bigint"){var E=String(t)+"n";return u?PA(t,E):E}var I=typeof f.depth>"u"?5:f.depth;if(typeof a>"u"&&(a=0),a>=I&&I>0&&typeof t=="object")return nw(t)?"[Array]":"[Object]";var b=PU(f,a);if(typeof l>"u")l=[];else if(fO(l,t)>=0)return"[Circular]";function T(ye,fe,oe){if(fe&&(l=sU.call(l),l.push(fe)),oe){var ce={depth:f.depth};return ou(f,"quoteStyle")&&(ce.quoteStyle=f.quoteStyle),e(ye,ce,a+1,l)}return e(ye,f,a+1,l)}if(typeof t=="function"&&!CA(t)){var R=yU(t),z=bg(t,T);return"[Function"+(R?": "+R:" (anonymous)")+"]"+(z.length>0?" { "+xs.call(z,", ")+" }":"")}if(hO(t)){var j=_f?cu.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):tw.call(t);return typeof t=="object"&&!_f?kd(j):j}if(SU(t)){for(var se="<"+bA.call(String(t.nodeName)),K=t.attributes||[],Z=0;Z<K.length;Z++)se+=" "+K[Z].name+"="+cO(uU(K[Z].value),"double",f);return se+=">",t.childNodes&&t.childNodes.length&&(se+="..."),se+="</"+bA.call(String(t.nodeName))+">",se}if(nw(t)){if(t.length===0)return"[]";var V=bg(t,T);return b&&!TU(V)?"["+iw(V,b)+"]":"[ "+xs.call(V,", ")+" ]"}if(hU(t)){var ae=bg(t,T);return!("cause"in Error.prototype)&&"cause"in t&&!uO.call(t,"cause")?"{ ["+String(t)+"] "+xs.call(SA.call("[cause]: "+T(t.cause),ae),", ")+" }":ae.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+xs.call(ae,", ")+" }"}if(typeof t=="object"&&d){if(IA&&typeof t[IA]=="function"&&rw)return rw(t,{depth:I-a});if(d!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(vU(t)){var X=[];return _A&&_A.call(t,function(ye,fe){X.push(T(fe,t,!0)+" => "+T(ye,t))}),MA("Map",n0.call(t),X,b)}if(wU(t)){var U=[];return xA&&xA.call(t,function(ye){U.push(T(ye,t))}),MA("Set",i0.call(t),U,b)}if(_U(t))return J_("WeakMap");if(bU(t))return J_("WeakSet");if(xU(t))return J_("WeakRef");if(dU(t))return kd(T(Number(t)));if(mU(t))return kd(T(ew.call(t)));if(pU(t))return kd(rU.call(t));if(fU(t))return kd(T(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===Da)return"{ [object globalThis] }";if(!cU(t)&&!CA(t)){var P=bg(t,T),L=TA?TA(t)===Object.prototype:t instanceof Object||t.constructor===Object,B=t instanceof Object?"":"null prototype",Q=!L&&Ki&&Object(t)===t&&Ki in t?p2.call(Mu(t),8,-1):B?"Object":"",q=L||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",ve=q+(Q||B?"["+xs.call(SA.call([],Q||[],B||[]),": ")+"] ":"");return P.length===0?ve+"{}":b?ve+"{"+iw(P,b)+"}":ve+"{ "+xs.call(P,", ")+" }"}return String(t)};function cO(e,t,n){var a=(n.quoteStyle||t)==="double"?'"':"'";return a+e+a}function uU(e){return cu.call(String(e),/"/g,"&quot;")}function nw(e){return Mu(e)==="[object Array]"&&(!Ki||!(typeof e=="object"&&Ki in e))}function cU(e){return Mu(e)==="[object Date]"&&(!Ki||!(typeof e=="object"&&Ki in e))}function CA(e){return Mu(e)==="[object RegExp]"&&(!Ki||!(typeof e=="object"&&Ki in e))}function hU(e){return Mu(e)==="[object Error]"&&(!Ki||!(typeof e=="object"&&Ki in e))}function fU(e){return Mu(e)==="[object String]"&&(!Ki||!(typeof e=="object"&&Ki in e))}function dU(e){return Mu(e)==="[object Number]"&&(!Ki||!(typeof e=="object"&&Ki in e))}function pU(e){return Mu(e)==="[object Boolean]"&&(!Ki||!(typeof e=="object"&&Ki in e))}function hO(e){if(_f)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!tw)return!1;try{return tw.call(e),!0}catch{}return!1}function mU(e){if(!e||typeof e!="object"||!ew)return!1;try{return ew.call(e),!0}catch{}return!1}var gU=Object.prototype.hasOwnProperty||function(e){return e in this};function ou(e,t){return gU.call(e,t)}function Mu(e){return nU.call(e)}function yU(e){if(e.name)return e.name;var t=oU.call(iU.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function fO(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1}function vU(e){if(!n0||!e||typeof e!="object")return!1;try{n0.call(e);try{i0.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function _U(e){if(!cp||!e||typeof e!="object")return!1;try{cp.call(e,cp);try{hp.call(e,hp)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function xU(e){if(!wA||!e||typeof e!="object")return!1;try{return wA.call(e),!0}catch{}return!1}function wU(e){if(!i0||!e||typeof e!="object")return!1;try{i0.call(e);try{n0.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function bU(e){if(!hp||!e||typeof e!="object")return!1;try{hp.call(e,hp);try{cp.call(e,cp)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function SU(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function dO(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,a="... "+n+" more character"+(n>1?"s":"");return dO(p2.call(e,0,t.maxStringLength),t)+a}var l=cu.call(cu.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,EU);return cO(l,"single",t)}function EU(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+aU.call(t.toString(16))}function kd(e){return"Object("+e+")"}function J_(e){return e+" { ? }"}function MA(e,t,n,a){var l=a?iw(n,a):xs.call(n,", ");return e+" ("+t+") {"+l+"}"}function TU(e){for(var t=0;t<e.length;t++)if(fO(e[t],`
`)>=0)return!1;return!0}function PU(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=xs.call(Array(e.indent+1)," ");else return null;return{base:n,prev:xs.call(Array(t+1),n)}}function iw(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+xs.call(e,","+n)+`
`+t.prev}function bg(e,t){var n=nw(e),a=[];if(n){a.length=e.length;for(var l=0;l<e.length;l++)a[l]=ou(e,l)?t(e[l],e):""}var f=typeof Y_=="function"?Y_(e):[],d;if(_f){d={};for(var u=0;u<f.length;u++)d["$"+f[u]]=f[u]}for(var w in e)ou(e,w)&&(n&&String(Number(w))===w&&w<e.length||_f&&d["$"+w]instanceof Symbol||(lO.call(/[^\w$]/,w)?a.push(t(w,e)+": "+t(e[w],e)):a.push(w+": "+t(e[w],e))));if(typeof Y_=="function")for(var E=0;E<f.length;E++)uO.call(e,f[E])&&a.push("["+t(f[E])+"]: "+t(e[f[E]],e));return a}var pO=Os,Mf=ya,AU=lU,IU=Cu,Sg=pO("%WeakMap%",!0),Eg=pO("%Map%",!0),CU=Mf("WeakMap.prototype.get",!0),MU=Mf("WeakMap.prototype.set",!0),kU=Mf("WeakMap.prototype.has",!0),OU=Mf("Map.prototype.get",!0),FU=Mf("Map.prototype.set",!0),RU=Mf("Map.prototype.has",!0),m2=function(e,t){for(var n=e,a;(a=n.next)!==null;n=a)if(a.key===t)return n.next=a.next,a.next=e.next,e.next=a,a},jU=function(e,t){var n=m2(e,t);return n&&n.value},LU=function(e,t,n){var a=m2(e,t);a?a.value=n:e.next={key:t,next:e.next,value:n}},zU=function(e,t){return!!m2(e,t)},mO=function(){var t,n,a,l={assert:function(f){if(!l.has(f))throw new IU("Side channel does not contain "+AU(f))},get:function(f){if(Sg&&f&&(typeof f=="object"||typeof f=="function")){if(t)return CU(t,f)}else if(Eg){if(n)return OU(n,f)}else if(a)return jU(a,f)},has:function(f){if(Sg&&f&&(typeof f=="object"||typeof f=="function")){if(t)return kU(t,f)}else if(Eg){if(n)return RU(n,f)}else if(a)return zU(a,f);return!1},set:function(f,d){Sg&&f&&(typeof f=="object"||typeof f=="function")?(t||(t=new Sg),MU(t,f,d)):Eg?(n||(n=new Eg),FU(n,f,d)):(a||(a={key:{},next:null}),LU(a,f,d))}};return l},BU=U3,Od=mO(),rl=Cu,g2={assert:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new rl("`O` is not an object");if(typeof t!="string")throw new rl("`slot` must be a string");if(Od.assert(e),!g2.has(e,t))throw new rl("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new rl("`O` is not an object");if(typeof t!="string")throw new rl("`slot` must be a string");var n=Od.get(e);return n&&n["$"+t]},has:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new rl("`O` is not an object");if(typeof t!="string")throw new rl("`slot` must be a string");var n=Od.get(e);return!!n&&BU(n,"$"+t)},set:function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new rl("`O` is not an object");if(typeof t!="string")throw new rl("`slot` must be a string");var a=Od.get(e);a||(a={},Od.set(e,a)),a["$"+t]=n}};Object.freeze&&Object.freeze(g2);var DU=g2,Fd=DU,NU=SyntaxError,kA=typeof StopIteration=="object"?StopIteration:null,$U=function(t){if(!kA)throw new NU("this environment lacks StopIteration");Fd.set(t,"[[Done]]",!1);var n={next:function(){var l=Fd.get(this,"[[Iterator]]"),f=Fd.get(l,"[[Done]]");try{return{done:f,value:f?void 0:l.next()}}catch(d){if(Fd.set(l,"[[Done]]",!0),d!==kA)throw d;return{done:!0,value:void 0}}}};return Fd.set(n,"[[Iterator]]",t),n},Q_,OA;function UU(){if(OA)return Q_;OA=1;var e={}.toString;return Q_=Array.isArray||function(t){return e.call(t)=="[object Array]"},Q_}var VU=String.prototype.valueOf,GU=function(t){try{return VU.call(t),!0}catch{return!1}},WU=Object.prototype.toString,HU="[object String]",ZU=kc(),gO=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:ZU?GU(t):WU.call(t)===HU},y2=typeof Map=="function"&&Map.prototype?Map:null,qU=typeof Set=="function"&&Set.prototype?Set:null,o0;y2||(o0=function(t){return!1});var yO=y2?Map.prototype.has:null,FA=qU?Set.prototype.has:null;!o0&&!yO&&(o0=function(t){return!1});var vO=o0||function(t){if(!t||typeof t!="object")return!1;try{if(yO.call(t),FA)try{FA.call(t)}catch{return!0}return t instanceof y2}catch{}return!1},XU=typeof Map=="function"&&Map.prototype?Map:null,v2=typeof Set=="function"&&Set.prototype?Set:null,a0;v2||(a0=function(t){return!1});var RA=XU?Map.prototype.has:null,_O=v2?Set.prototype.has:null;!a0&&!_O&&(a0=function(t){return!1});var xO=a0||function(t){if(!t||typeof t!="object")return!1;try{if(_O.call(t),RA)try{RA.call(t)}catch{return!0}return t instanceof v2}catch{}return!1},jA=sO,LA=$U;if(a2()||W0()){var e1=Symbol.iterator;qg.exports=function(t){if(t!=null&&typeof t[e1]<"u")return t[e1]();if(jA(t))return Array.prototype[e1].call(t)}}else{var KU=UU(),YU=gO,zA=Os,JU=zA("%Map%",!0),QU=zA("%Set%",!0),ja=ya,BA=ja("Array.prototype.push"),DA=ja("String.prototype.charCodeAt"),eV=ja("String.prototype.slice"),tV=function(t,n){var a=t.length;if(n+1>=a)return n+1;var l=DA(t,n);if(l<55296||l>56319)return n+1;var f=DA(t,n+1);return f<56320||f>57343?n+1:n+2},t1=function(t){var n=0;return{next:function(){var l=n>=t.length,f;return l||(f=t[n],n+=1),{done:l,value:f}}}},NA=function(t,n){if(KU(t)||jA(t))return t1(t);if(YU(t)){var a=0;return{next:function(){var f=tV(t,a),d=eV(t,a,f);return a=f,{done:f>t.length,value:d}}}}if(n&&typeof t["_es6-shim iterator_"]<"u")return t["_es6-shim iterator_"]()};if(!JU&&!QU)qg.exports=function(t){if(t!=null)return NA(t,!0)};else{var rV=vO,nV=xO,$A=ja("Map.prototype.forEach",!0),UA=ja("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var VA=ja("Map.prototype.iterator",!0),GA=ja("Set.prototype.iterator",!0);var WA=ja("Map.prototype.@@iterator",!0)||ja("Map.prototype._es6-shim iterator_",!0),HA=ja("Set.prototype.@@iterator",!0)||ja("Set.prototype._es6-shim iterator_",!0),iV=function(t){if(rV(t)){if(VA)return LA(VA(t));if(WA)return WA(t);if($A){var n=[];return $A(t,function(l,f){BA(n,[f,l])}),t1(n)}}if(nV(t)){if(GA)return LA(GA(t));if(HA)return HA(t);if(UA){var a=[];return UA(t,function(l){BA(a,l)}),t1(a)}}};qg.exports=function(t){return iV(t)||NA(t)}}}var oV=qg.exports,ZA=function(e){return e!==e},wO=function(t,n){return t===0&&n===0?1/t===1/n:!!(t===n||ZA(t)&&ZA(n))},aV=wO,bO=function(){return typeof Object.is=="function"?Object.is:aV},sV=bO,lV=Mc,uV=function(){var t=sV();return lV(Object,{is:t},{is:function(){return Object.is!==t}}),t},cV=Mc,hV=Cf,fV=wO,SO=bO,dV=uV,EO=hV(SO(),Object);cV(EO,{getPolyfill:SO,implementation:fV,shim:dV});var pV=EO,mV={}.toString,gV=Array.isArray||function(e){return mV.call(e)=="[object Array]"},yV=Cf,TO=ya,vV=Os,ow=vV("%ArrayBuffer%",!0),Xg=TO("ArrayBuffer.prototype.byteLength",!0),_V=TO("Object.prototype.toString"),qA=!!ow&&!Xg&&new ow(0).slice,XA=!!qA&&yV(qA),PO=Xg||XA?function(t){if(!t||typeof t!="object")return!1;try{return Xg?Xg(t):XA(t,0),!0}catch{return!1}}:ow?function(t){return _V(t)==="[object ArrayBuffer]"}:function(t){return!1},xV=Date.prototype.getDay,wV=function(t){try{return xV.call(t),!0}catch{return!1}},bV=Object.prototype.toString,SV="[object Date]",EV=kc(),TV=function(t){return typeof t!="object"||t===null?!1:EV?wV(t):bV.call(t)===SV},aw=ya,AO=kc(),IO,CO,sw,lw;if(AO){IO=aw("Object.prototype.hasOwnProperty"),CO=aw("RegExp.prototype.exec"),sw={};var r1=function(){throw sw};lw={toString:r1,valueOf:r1},typeof Symbol.toPrimitive=="symbol"&&(lw[Symbol.toPrimitive]=r1)}var PV=aw("Object.prototype.toString"),AV=Object.getOwnPropertyDescriptor,IV="[object RegExp]",CV=AO?function(t){if(!t||typeof t!="object")return!1;var n=AV(t,"lastIndex"),a=n&&IO(n,"value");if(!a)return!1;try{CO(t,lw)}catch(l){return l===sw}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:PV(t)===IV},MV=ya,KA=MV("SharedArrayBuffer.prototype.byteLength",!0),kV=KA?function(t){if(!t||typeof t!="object")return!1;try{return KA(t),!0}catch{return!1}}:function(t){return!1},OV=Number.prototype.toString,FV=function(t){try{return OV.call(t),!0}catch{return!1}},RV=Object.prototype.toString,jV="[object Number]",LV=kc(),zV=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:LV?FV(t):RV.call(t)===jV},MO=ya,BV=MO("Boolean.prototype.toString"),DV=MO("Object.prototype.toString"),NV=function(t){try{return BV(t),!0}catch{return!1}},$V="[object Boolean]",UV=kc(),VV=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:UV&&Symbol.toStringTag in t?NV(t):DV(t)===$V},uw={exports:{}},GV=Object.prototype.toString,WV=a2();if(WV){var HV=Symbol.prototype.toString,ZV=/^Symbol\(.*\)$/,qV=function(t){return typeof t.valueOf()!="symbol"?!1:ZV.test(HV.call(t))};uw.exports=function(t){if(typeof t=="symbol")return!0;if(GV.call(t)!=="[object Symbol]")return!1;try{return qV(t)}catch{return!1}}}else uw.exports=function(t){return!1};var XV=uw.exports,cw={exports:{}},YA=typeof BigInt<"u"&&BigInt,KV=function(){return typeof YA=="function"&&typeof BigInt=="function"&&typeof YA(42)=="bigint"&&typeof BigInt(42)=="bigint"},YV=KV();if(YV){var JV=BigInt.prototype.valueOf,QV=function(t){try{return JV.call(t),!0}catch{}return!1};cw.exports=function(t){return t===null||typeof t>"u"||typeof t=="boolean"||typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="function"?!1:typeof t=="bigint"?!0:QV(t)}}else cw.exports=function(t){return!1};var e7=cw.exports,t7=gO,r7=zV,n7=VV,i7=XV,o7=e7,a7=function(t){if(t==null||typeof t!="object"&&typeof t!="function")return null;if(t7(t))return"String";if(r7(t))return"Number";if(n7(t))return"Boolean";if(i7(t))return"Symbol";if(o7(t))return"BigInt"},s0=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,JA=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,l0;s0||(l0=function(t){return!1});var hw=s0?s0.prototype.has:null,n1=JA?JA.prototype.has:null;!l0&&!hw&&(l0=function(t){return!1});var s7=l0||function(t){if(!t||typeof t!="object")return!1;try{if(hw.call(t,hw),n1)try{n1.call(t,n1)}catch{return!0}return t instanceof s0}catch{}return!1},fw={exports:{}},l7=Os,kO=ya,u7=l7("%WeakSet%",!0),i1=kO("WeakSet.prototype.has",!0);if(i1){var o1=kO("WeakMap.prototype.has",!0);fw.exports=function(t){if(!t||typeof t!="object")return!1;try{if(i1(t,i1),o1)try{o1(t,o1)}catch{return!0}return t instanceof u7}catch{}return!1}}else fw.exports=function(t){return!1};var c7=fw.exports,h7=vO,f7=xO,d7=s7,p7=c7,m7=function(t){if(t&&typeof t=="object"){if(h7(t))return"Map";if(f7(t))return"Set";if(d7(t))return"WeakMap";if(p7(t))return"WeakSet"}return!1},OO=Function.prototype.toString,Zh=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,dw,Kg;if(typeof Zh=="function"&&typeof Object.defineProperty=="function")try{dw=Object.defineProperty({},"length",{get:function(){throw Kg}}),Kg={},Zh(function(){throw 42},null,dw)}catch(e){e!==Kg&&(Zh=null)}else Zh=null;var g7=/^\s*class\b/,pw=function(t){try{var n=OO.call(t);return g7.test(n)}catch{return!1}},a1=function(t){try{return pw(t)?!1:(OO.call(t),!0)}catch{return!1}},Yg=Object.prototype.toString,y7="[object Object]",v7="[object Function]",_7="[object GeneratorFunction]",x7="[object HTMLAllCollection]",w7="[object HTML document.all class]",b7="[object HTMLCollection]",S7=typeof Symbol=="function"&&!!Symbol.toStringTag,E7=!(0 in[,]),mw=function(){return!1};if(typeof document=="object"){var T7=document.all;Yg.call(T7)===Yg.call(document.all)&&(mw=function(t){if((E7||!t)&&(typeof t>"u"||typeof t=="object"))try{var n=Yg.call(t);return(n===x7||n===w7||n===b7||n===y7)&&t("")==null}catch{}return!1})}var P7=Zh?function(t){if(mw(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Zh(t,null,dw)}catch(n){if(n!==Kg)return!1}return!pw(t)&&a1(t)}:function(t){if(mw(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(S7)return a1(t);if(pw(t))return!1;var n=Yg.call(t);return n!==v7&&n!==_7&&!/^\[object HTML/.test(n)?!1:a1(t)},A7=P7,I7=Object.prototype.toString,FO=Object.prototype.hasOwnProperty,C7=function(t,n,a){for(var l=0,f=t.length;l<f;l++)FO.call(t,l)&&(a==null?n(t[l],l,t):n.call(a,t[l],l,t))},M7=function(t,n,a){for(var l=0,f=t.length;l<f;l++)a==null?n(t.charAt(l),l,t):n.call(a,t.charAt(l),l,t)},k7=function(t,n,a){for(var l in t)FO.call(t,l)&&(a==null?n(t[l],l,t):n.call(a,t[l],l,t))},O7=function(t,n,a){if(!A7(n))throw new TypeError("iterator must be a function");var l;arguments.length>=3&&(l=a),I7.call(t)==="[object Array]"?C7(t,n,l):typeof t=="string"?M7(t,n,l):k7(t,n,l)},F7=O7,R7=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],s1=R7,j7=typeof globalThis>"u"?Da:globalThis,L7=function(){for(var t=[],n=0;n<s1.length;n++)typeof j7[s1[n]]=="function"&&(t[t.length]=s1[n]);return t},u0=F7,z7=L7,QA=Cf,_2=ya,Jg=u2,B7=_2("Object.prototype.toString"),RO=kc(),eI=typeof globalThis>"u"?Da:globalThis,gw=z7(),x2=_2("String.prototype.slice"),l1=Object.getPrototypeOf,D7=_2("Array.prototype.indexOf",!0)||function(t,n){for(var a=0;a<t.length;a+=1)if(t[a]===n)return a;return-1},c0={__proto__:null};RO&&Jg&&l1?u0(gw,function(e){var t=new eI[e];if(Symbol.toStringTag in t){var n=l1(t),a=Jg(n,Symbol.toStringTag);if(!a){var l=l1(n);a=Jg(l,Symbol.toStringTag)}c0["$"+e]=QA(a.get)}}):u0(gw,function(e){var t=new eI[e],n=t.slice||t.set;n&&(c0["$"+e]=QA(n))});var N7=function(t){var n=!1;return u0(c0,function(a,l){if(!n)try{"$"+a(t)===l&&(n=x2(l,1))}catch{}}),n},$7=function(t){var n=!1;return u0(c0,function(a,l){if(!n)try{a(t),n=x2(l,1)}catch{}}),n},U7=function(t){if(!t||typeof t!="object")return!1;if(!RO){var n=x2(B7(t),8,-1);return D7(gw,n)>-1?n:n!=="Object"?!1:$7(t)}return Jg?N7(t):null},V7=ya,tI=V7("ArrayBuffer.prototype.byteLength",!0),G7=PO,W7=function(t){return G7(t)?tI?tI(t):t.byteLength:NaN},jO=E$,Fs=ya,rI=q$,H7=Os,xf=oV,Z7=mO,nI=pV,iI=sO,oI=gV,aI=PO,sI=TV,lI=CV,uI=kV,cI=o2,hI=a7,fI=m7,dI=U7,pI=W7,mI=Fs("SharedArrayBuffer.prototype.byteLength",!0),gI=Fs("Date.prototype.getTime"),u1=Object.getPrototypeOf,yI=Fs("Object.prototype.toString"),h0=H7("%Set%",!0),yw=Fs("Map.prototype.has",!0),f0=Fs("Map.prototype.get",!0),vI=Fs("Map.prototype.size",!0),d0=Fs("Set.prototype.add",!0),LO=Fs("Set.prototype.delete",!0),p0=Fs("Set.prototype.has",!0),Qg=Fs("Set.prototype.size",!0);function _I(e,t,n,a){for(var l=xf(e),f;(f=l.next())&&!f.done;)if(Ha(t,f.value,n,a))return LO(e,f.value),!0;return!1}function zO(e){if(typeof e>"u")return null;if(typeof e!="object")return typeof e=="symbol"?!1:typeof e=="string"||typeof e=="number"?+e==+e:!0}function q7(e,t,n,a,l,f){var d=zO(n);if(d!=null)return d;var u=f0(t,d),w=jO({},l,{strict:!1});return typeof u>"u"&&!yw(t,d)||!Ha(a,u,w,f)?!1:!yw(e,d)&&Ha(a,u,w,f)}function X7(e,t,n){var a=zO(n);return a??(p0(t,a)&&!p0(e,a))}function xI(e,t,n,a,l,f){for(var d=xf(e),u,w;(u=d.next())&&!u.done;)if(w=u.value,Ha(n,w,l,f)&&Ha(a,f0(t,w),l,f))return LO(e,w),!0;return!1}function Ha(e,t,n,a){var l=n||{};if(l.strict?nI(e,t):e===t)return!0;var f=hI(e),d=hI(t);if(f!==d)return!1;if(!e||!t||typeof e!="object"&&typeof t!="object")return l.strict?nI(e,t):e==t;var u=a.has(e),w=a.has(t),E;if(u&&w){if(a.get(e)===a.get(t))return!0}else E={};return u||a.set(e,E),w||a.set(t,E),J7(e,t,l,a)}function wI(e){return!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function K7(e,t,n,a){if(Qg(e)!==Qg(t))return!1;for(var l=xf(e),f=xf(t),d,u,w;(d=l.next())&&!d.done;)if(d.value&&typeof d.value=="object")w||(w=new h0),d0(w,d.value);else if(!p0(t,d.value)){if(n.strict||!X7(e,t,d.value))return!1;w||(w=new h0),d0(w,d.value)}if(w){for(;(u=f.next())&&!u.done;)if(u.value&&typeof u.value=="object"){if(!_I(w,u.value,n.strict,a))return!1}else if(!n.strict&&!p0(e,u.value)&&!_I(w,u.value,n.strict,a))return!1;return Qg(w)===0}return!0}function Y7(e,t,n,a){if(vI(e)!==vI(t))return!1;for(var l=xf(e),f=xf(t),d,u,w,E,I,b;(d=l.next())&&!d.done;)if(E=d.value[0],I=d.value[1],E&&typeof E=="object")w||(w=new h0),d0(w,E);else if(b=f0(t,E),typeof b>"u"&&!yw(t,E)||!Ha(I,b,n,a)){if(n.strict||!q7(e,t,E,I,n,a))return!1;w||(w=new h0),d0(w,E)}if(w){for(;(u=f.next())&&!u.done;)if(E=u.value[0],b=u.value[1],E&&typeof E=="object"){if(!xI(w,e,E,b,n,a))return!1}else if(!n.strict&&(!e.has(E)||!Ha(f0(e,E),b,n,a))&&!xI(w,e,E,b,jO({},n,{strict:!1}),a))return!1;return Qg(w)===0}return!0}function J7(e,t,n,a){var l,f;if(typeof e!=typeof t||e==null||t==null||yI(e)!==yI(t)||iI(e)!==iI(t))return!1;var d=oI(e),u=oI(t);if(d!==u)return!1;var w=e instanceof Error,E=t instanceof Error;if(w!==E||(w||E)&&(e.name!==t.name||e.message!==t.message))return!1;var I=lI(e),b=lI(t);if(I!==b||(I||b)&&(e.source!==t.source||rI(e)!==rI(t)))return!1;var T=sI(e),R=sI(t);if(T!==R||(T||R)&&gI(e)!==gI(t)||n.strict&&u1&&u1(e)!==u1(t))return!1;var z=dI(e),j=dI(t);if(z!==j)return!1;if(z||j){if(e.length!==t.length)return!1;for(l=0;l<e.length;l++)if(e[l]!==t[l])return!1;return!0}var se=wI(e),K=wI(t);if(se!==K)return!1;if(se||K){if(e.length!==t.length)return!1;for(l=0;l<e.length;l++)if(e[l]!==t[l])return!1;return!0}var Z=aI(e),V=aI(t);if(Z!==V)return!1;if(Z||V)return pI(e)!==pI(t)?!1:typeof Uint8Array=="function"&&Ha(new Uint8Array(e),new Uint8Array(t),n,a);var ae=uI(e),X=uI(t);if(ae!==X)return!1;if(ae||X)return mI(e)!==mI(t)?!1:typeof Uint8Array=="function"&&Ha(new Uint8Array(e),new Uint8Array(t),n,a);if(typeof e!=typeof t)return!1;var U=cI(e),P=cI(t);if(U.length!==P.length)return!1;for(U.sort(),P.sort(),l=U.length-1;l>=0;l--)if(U[l]!=P[l])return!1;for(l=U.length-1;l>=0;l--)if(f=U[l],!Ha(e[f],t[f],n,a))return!1;var L=fI(e),B=fI(t);return L!==B?!1:L==="Set"||B==="Set"?K7(e,t,n,a):L==="Map"?Y7(e,t,n,a):!0}var Q7=function(t,n,a){return Ha(t,n,a,Z7())};const e9=bf(Q7);var t9=Object.defineProperty,Jr=(e,t)=>t9(e,"name",{value:t,configurable:!0}),r9=class{constructor(t){this.direction=!1,this.compareProperties=!0;var n,a,l;this.precision=10**-((n=t==null?void 0:t.precision)!=null?n:17),this.direction=(a=t==null?void 0:t.direction)!=null?a:!1,this.compareProperties=(l=t==null?void 0:t.compareProperties)!=null?l:!0}compare(t,n){if(t.type!==n.type||!Hd(t,n))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,n.coordinates);case"LineString":return this.compareLine(t.coordinates,n.coordinates);case"Polygon":return this.comparePolygon(t,n);case"GeometryCollection":return this.compareGeometryCollection(t,n);case"Feature":return this.compareFeature(t,n);case"FeatureCollection":return this.compareFeatureCollection(t,n);default:if(t.type.startsWith("Multi")){const a=vw(t),l=vw(n);return a.every(f=>l.some(d=>this.compare(f,d)))}}return!1}compareCoord(t,n){return t.length===n.length&&t.every((a,l)=>Math.abs(a-n[l])<this.precision)}compareLine(t,n,a=0,l=!1){if(!Hd(t,n))return!1;const f=t;let d=n;if(l&&!this.compareCoord(f[0],d[0])){const w=this.fixStartIndex(d,f);if(w)d=w;else return!1}const u=this.compareCoord(f[a],d[a]);return this.direction||u?this.comparePath(f,d):this.compareCoord(f[a],d[d.length-(1+a)])?this.comparePath(f.slice().reverse(),d):!1}fixStartIndex(t,n){let a,l=-1;for(let f=0;f<t.length;f++)if(this.compareCoord(t[f],n[0])){l=f;break}return l>=0&&(a=[].concat(t.slice(l,t.length),t.slice(1,l+1))),a}comparePath(t,n){return t.every((a,l)=>this.compareCoord(a,n[l]))}comparePolygon(t,n){if(this.compareLine(t.coordinates[0],n.coordinates[0],1,!0)){const a=t.coordinates.slice(1,t.coordinates.length),l=n.coordinates.slice(1,n.coordinates.length);return a.every(f=>l.some(d=>this.compareLine(f,d,1,!0)))}return!1}compareGeometryCollection(t,n){return Hd(t.geometries,n.geometries)&&this.compareBBox(t,n)&&t.geometries.every((a,l)=>this.compare(a,n.geometries[l]))}compareFeature(t,n){return t.id===n.id&&(this.compareProperties?e9(t.properties,n.properties):!0)&&this.compareBBox(t,n)&&this.compare(t.geometry,n.geometry)}compareFeatureCollection(t,n){return Hd(t.features,n.features)&&this.compareBBox(t,n)&&t.features.every((a,l)=>this.compare(a,n.features[l]))}compareBBox(t,n){return!t.bbox&&!n.bbox||(t.bbox&&n.bbox?this.compareCoord(t.bbox,n.bbox):!1)}};Jr(r9,"GeojsonEquality");function Hd(e,t){return e.coordinates?e.coordinates.length===t.coordinates.length:e.length===t.length}Jr(Hd,"sameLength");function vw(e){return e.coordinates.map(t=>({type:e.type.replace("Multi",""),coordinates:t}))}Jr(vw,"explode");var Vo=63710088e-1,BO={centimeters:Vo*100,centimetres:Vo*100,degrees:360/(2*Math.PI),feet:Vo*3.28084,inches:Vo*39.37,kilometers:Vo/1e3,kilometres:Vo/1e3,meters:Vo,metres:Vo,miles:Vo/1609.344,millimeters:Vo*1e3,millimetres:Vo*1e3,nauticalmiles:Vo/1852,radians:1,yards:Vo*1.0936},bI={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Ms(e,t,n={}){const a={type:"Feature"};return(n.id===0||n.id)&&(a.id=n.id),n.bbox&&(a.bbox=n.bbox),a.properties=t||{},a.geometry=e,a}Jr(Ms,"feature");function n9(e,t,n={}){switch(e){case"Point":return ws(t).geometry;case"LineString":return ul(t).geometry;case"Polygon":return Z0(t).geometry;case"MultiPoint":return NO(t).geometry;case"MultiLineString":return DO(t).geometry;case"MultiPolygon":return $O(t).geometry;default:throw new Error(e+" is invalid")}}Jr(n9,"geometry");function ws(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!wf(e[0])||!wf(e[1]))throw new Error("coordinates must contain numbers");return Ms({type:"Point",coordinates:e},t,n)}Jr(ws,"point");function i9(e,t,n={}){return q0(e.map(a=>ws(a,t)),n)}Jr(i9,"points");function Z0(e,t,n={}){for(const l of e){if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(l[l.length-1].length!==l[0].length)throw new Error("First and last Position are not equivalent.");for(let f=0;f<l[l.length-1].length;f++)if(l[l.length-1][f]!==l[0][f])throw new Error("First and last Position are not equivalent.")}return Ms({type:"Polygon",coordinates:e},t,n)}Jr(Z0,"polygon");function o9(e,t,n={}){return q0(e.map(a=>Z0(a,t)),n)}Jr(o9,"polygons");function ul(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return Ms({type:"LineString",coordinates:e},t,n)}Jr(ul,"lineString");function a9(e,t,n={}){return q0(e.map(a=>ul(a,t)),n)}Jr(a9,"lineStrings");function q0(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}Jr(q0,"featureCollection");function DO(e,t,n={}){return Ms({type:"MultiLineString",coordinates:e},t,n)}Jr(DO,"multiLineString");function NO(e,t,n={}){return Ms({type:"MultiPoint",coordinates:e},t,n)}Jr(NO,"multiPoint");function $O(e,t,n={}){return Ms({type:"MultiPolygon",coordinates:e},t,n)}Jr($O,"multiPolygon");function s9(e,t,n={}){return Ms({type:"GeometryCollection",geometries:e},t,n)}Jr(s9,"geometryCollection");function l9(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");const n=Math.pow(10,t||0);return Math.round(e*n)/n}Jr(l9,"round");function UO(e,t="kilometers"){const n=BO[t];if(!n)throw new Error(t+" units is invalid");return e*n}Jr(UO,"radiansToLength");function w2(e,t="kilometers"){const n=BO[t];if(!n)throw new Error(t+" units is invalid");return e/n}Jr(w2,"lengthToRadians");function u9(e,t){return VO(w2(e,t))}Jr(u9,"lengthToDegrees");function c9(e){let t=e%360;return t<0&&(t+=360),t}Jr(c9,"bearingToAzimuth");function VO(e){return e%(2*Math.PI)*180/Math.PI}Jr(VO,"radiansToDegrees");function h9(e){return e%360*Math.PI/180}Jr(h9,"degreesToRadians");function f9(e,t="kilometers",n="kilometers"){if(!(e>=0))throw new Error("length must be a positive number");return UO(w2(e,t),n)}Jr(f9,"convertLength");function d9(e,t="meters",n="kilometers"){if(!(e>=0))throw new Error("area must be a positive number");const a=bI[t];if(!a)throw new Error("invalid original units");const l=bI[n];if(!l)throw new Error("invalid final units");return e/a*l}Jr(d9,"convertArea");function wf(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}Jr(wf,"isNumber");function b2(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}Jr(b2,"isObject");function p9(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(t=>{if(!wf(t))throw new Error("bbox must only contain numbers")})}Jr(p9,"validateBBox");function m9(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}Jr(m9,"validateId");var g9=Object.defineProperty,ku=(e,t)=>g9(e,"name",{value:t,configurable:!0});function GO(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}ku(GO,"getCoord");function y9(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}ku(y9,"getCoords");function WO(e){if(e.length>1&&wf(e[0])&&wf(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return WO(e[0]);throw new Error("coordinates must only contain numbers")}ku(WO,"containsNumber");function v9(e,t,n){if(!t||!n)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.type)}ku(v9,"geojsonType");function _9(e,t,n){if(!e)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.geometry.type)}ku(_9,"featureOf");function x9(e,t,n){if(!e)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+n+", FeatureCollection required");for(const a of e.features){if(!a||a.type!=="Feature"||!a.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!a.geometry||a.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+a.geometry.type)}}ku(x9,"collectionOf");function HO(e){return e.type==="Feature"?e.geometry:e}ku(HO,"getGeom");function w9(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}ku(w9,"getType");var b9=Object.defineProperty,Li=(e,t)=>b9(e,"name",{value:t,configurable:!0});function kf(e,t,n){if(e!==null)for(var a,l,f,d,u,w,E,I=0,b=0,T,R=e.type,z=R==="FeatureCollection",j=R==="Feature",se=z?e.features.length:1,K=0;K<se;K++){E=z?e.features[K].geometry:j?e.geometry:e,T=E?E.type==="GeometryCollection":!1,u=T?E.geometries.length:1;for(var Z=0;Z<u;Z++){var V=0,ae=0;if(d=T?E.geometries[Z]:E,d!==null){w=d.coordinates;var X=d.type;switch(I=n&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(t(w,b,K,V,ae)===!1)return!1;b++,V++;break;case"LineString":case"MultiPoint":for(a=0;a<w.length;a++){if(t(w[a],b,K,V,ae)===!1)return!1;b++,X==="MultiPoint"&&V++}X==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(a=0;a<w.length;a++){for(l=0;l<w[a].length-I;l++){if(t(w[a][l],b,K,V,ae)===!1)return!1;b++}X==="MultiLineString"&&V++,X==="Polygon"&&ae++}X==="Polygon"&&V++;break;case"MultiPolygon":for(a=0;a<w.length;a++){for(ae=0,l=0;l<w[a].length;l++){for(f=0;f<w[a][l].length-I;f++){if(t(w[a][l][f],b,K,V,ae)===!1)return!1;b++}ae++}V++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(kf(d.geometries[a],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}Li(kf,"coordEach");function S9(e,t,n,a){var l=n;return kf(e,function(f,d,u,w,E){d===0&&n===void 0?l=f:l=t(l,f,d,u,w,E)},a),l}Li(S9,"coordReduce");function ZO(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&t(e.features[n].properties,n)!==!1;n++);break;case"Feature":t(e.properties,0);break}}Li(ZO,"propEach");function E9(e,t,n){var a=n;return ZO(e,function(l,f){f===0&&n===void 0?a=l:a=t(a,l,f)}),a}Li(E9,"propReduce");function qO(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}Li(qO,"featureEach");function T9(e,t,n){var a=n;return qO(e,function(l,f){f===0&&n===void 0?a=l:a=t(a,l,f)}),a}Li(T9,"featureReduce");function P9(e){var t=[];return kf(e,function(n){t.push(n)}),t}Li(P9,"coordAll");function S2(e,t){var n,a,l,f,d,u,w,E,I,b,T=0,R=e.type==="FeatureCollection",z=e.type==="Feature",j=R?e.features.length:1;for(n=0;n<j;n++){for(u=R?e.features[n].geometry:z?e.geometry:e,E=R?e.features[n].properties:z?e.properties:{},I=R?e.features[n].bbox:z?e.bbox:void 0,b=R?e.features[n].id:z?e.id:void 0,w=u?u.type==="GeometryCollection":!1,d=w?u.geometries.length:1,l=0;l<d;l++){if(f=w?u.geometries[l]:u,f===null){if(t(null,T,E,I,b)===!1)return!1;continue}switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(f,T,E,I,b)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<f.geometries.length;a++)if(t(f.geometries[a],T,E,I,b)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}T++}}Li(S2,"geomEach");function A9(e,t,n){var a=n;return S2(e,function(l,f,d,u,w){f===0&&n===void 0?a=l:a=t(a,l,f,d,u,w)}),a}Li(A9,"geomReduce");function X0(e,t){S2(e,function(n,a,l,f,d){var u=n===null?null:n.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return t(Ms(n,l,{bbox:f,id:d}),a,0)===!1?!1:void 0}var w;switch(u){case"MultiPoint":w="Point";break;case"MultiLineString":w="LineString";break;case"MultiPolygon":w="Polygon";break}for(var E=0;E<n.coordinates.length;E++){var I=n.coordinates[E],b={type:w,coordinates:I};if(t(Ms(b,l),a,E)===!1)return!1}})}Li(X0,"flattenEach");function I9(e,t,n){var a=n;return X0(e,function(l,f,d){f===0&&d===0&&n===void 0?a=l:a=t(a,l,f,d)}),a}Li(I9,"flattenReduce");function XO(e,t){X0(e,function(n,a,l){var f=0;if(n.geometry){var d=n.geometry.type;if(!(d==="Point"||d==="MultiPoint")){var u,w=0,E=0,I=0;if(kf(n,function(b,T,R,z,j){if(u===void 0||a>w||z>E||j>I){u=b,w=a,E=z,I=j,f=0;return}var se=ul([u,b],n.properties);if(t(se,a,l,j,f)===!1)return!1;f++,u=b})===!1)return!1}}})}Li(XO,"segmentEach");function C9(e,t,n){var a=n,l=!1;return XO(e,function(f,d,u,w,E){l===!1&&n===void 0?a=f:a=t(a,f,d,u,w,E),l=!0}),a}Li(C9,"segmentReduce");function KO(e,t){if(!e)throw new Error("geojson is required");X0(e,function(n,a,l){if(n.geometry!==null){var f=n.geometry.type,d=n.geometry.coordinates;switch(f){case"LineString":if(t(n,a,l,0,0)===!1)return!1;break;case"Polygon":for(var u=0;u<d.length;u++)if(t(ul(d[u],n.properties),a,l,u)===!1)return!1;break}}})}Li(KO,"lineEach");function M9(e,t,n){var a=n;return KO(e,function(l,f,d,u){f===0&&n===void 0?a=l:a=t(a,l,f,d,u)}),a}Li(M9,"lineReduce");function k9(e,t){if(t=t||{},!b2(t))throw new Error("options is invalid");var n=t.featureIndex||0,a=t.multiFeatureIndex||0,l=t.geometryIndex||0,f=t.segmentIndex||0,d=t.properties,u;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),d=d||e.features[n].properties,u=e.features[n].geometry;break;case"Feature":d=d||e.properties,u=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=e;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var w=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=w.length+f-1),ul([w[f],w[f+1]],d,t);case"Polygon":return l<0&&(l=w.length+l),f<0&&(f=w[l].length+f-1),ul([w[l][f],w[l][f+1]],d,t);case"MultiLineString":return a<0&&(a=w.length+a),f<0&&(f=w[a].length+f-1),ul([w[a][f],w[a][f+1]],d,t);case"MultiPolygon":return a<0&&(a=w.length+a),l<0&&(l=w[a].length+l),f<0&&(f=w[a][l].length-f-1),ul([w[a][l][f],w[a][l][f+1]],d,t)}throw new Error("geojson is invalid")}Li(k9,"findSegment");function O9(e,t){if(t=t||{},!b2(t))throw new Error("options is invalid");var n=t.featureIndex||0,a=t.multiFeatureIndex||0,l=t.geometryIndex||0,f=t.coordIndex||0,d=t.properties,u;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),d=d||e.features[n].properties,u=e.features[n].geometry;break;case"Feature":d=d||e.properties,u=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=e;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var w=u.coordinates;switch(u.type){case"Point":return ws(w,d,t);case"MultiPoint":return a<0&&(a=w.length+a),ws(w[a],d,t);case"LineString":return f<0&&(f=w.length+f),ws(w[f],d,t);case"Polygon":return l<0&&(l=w.length+l),f<0&&(f=w[l].length+f),ws(w[l][f],d,t);case"MultiLineString":return a<0&&(a=w.length+a),f<0&&(f=w[a].length+f),ws(w[a][f],d,t);case"MultiPolygon":return a<0&&(a=w.length+a),l<0&&(l=w[a].length+l),f<0&&(f=w[a][l].length-f),ws(w[a][l][f],d,t)}throw new Error("geojson is invalid")}Li(O9,"findPoint");function F9(e,t){var n=0,a=0,l=0,f=0,d=0,u=0,w=0,E=0,I=null,b=null,T=e[0],R=e[1],z=t.length;for(n;n<z;n++){a=0;var j=t[n].length-1,se=t[n];if(I=se[0],I[0]!==se[j][0]&&I[1]!==se[j][1])throw new Error("First and last coordinates in a ring must be the same");for(d=I[0]-T,u=I[1]-R,a;a<j;a++){if(b=se[a+1],E=b[1]-R,u<0&&E<0||u>0&&E>0){I=b,u=E,d=I[0]-T;continue}if(w=b[0]-e[0],E>0&&u<=0){if(f=d*E-w*u,f>0)l=l+1;else if(f===0)return 0}else if(u>0&&E<=0){if(f=d*E-w*u,f<0)l=l+1;else if(f===0)return 0}else if(E===0&&u<0){if(f=d*E-w*u,f===0)return 0}else if(u===0&&E<0){if(f=d*E-w*u,f===0)return 0}else if(u===0&&E===0){if(w<=0&&d>=0)return 0;if(d<=0&&w>=0)return 0}I=b,u=E,d=w}}return l%2!==0}var R9=Object.defineProperty,YO=(e,t)=>R9(e,"name",{value:t,configurable:!0});function JO(e,t,n={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const a=GO(e),l=HO(t),f=l.type,d=t.bbox;let u=l.coordinates;if(d&&QO(a,d)===!1)return!1;f==="Polygon"&&(u=[u]);let w=!1;for(var E=0;E<u.length;++E){const I=F9(a,u[E]);if(I===0)return!n.ignoreBoundary;I&&(w=!0)}return w}YO(JO,"booleanPointInPolygon");function QO(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}YO(QO,"inBBox");var j9=Object.defineProperty,L9=(e,t)=>j9(e,"name",{value:t,configurable:!0});function e4(e,t={}){let n=0,a=0,l=0;return kf(e,function(f){n+=f[0],a+=f[1],l++},!0),ws([n/l,a/l],t.properties)}L9(e4,"centroid");const z9=()=>{const[e,t]=vt.useState(!1);return{detectCountry:vt.useCallback(async(a,l)=>{t(!0);const d=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const u of d.features)if(JO([a,l],u.geometry))return console.log("country: ",u.properties),t(!1),u;t(!1)},[]),loadingCountry:e}},c1=({feature:e,fieldOption:t,suggestList:n,onChange:a})=>{var u;const[l,f]=vt.useState((u=e.properties)==null?void 0:u[t.key]);vt.useEffect(()=>{var w;f((w=e.properties)==null?void 0:w[t.key])},[e]);const d=vt.useCallback(w=>{f(w.currentTarget.value),a&&a(w)},[]);return yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:l,onChange:d}),yt.jsx("datalist",{id:t.key+"-list",children:n&&n.map(w=>{if(parseInt(w.tags.admin_level)===t.adminLevel)return yt.jsx("option",{value:w.tags.name},w.id);if(w.type==="node"&&t.adminLevel===9)return yt.jsx("option",{value:w.tags.name},w.id)})})]})},B9=({feature:e,fields:t})=>e.properties?yt.jsxs(yt.Fragment,{children:[t.postcodeField&&yt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(n=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[n.key]})," "]})}),t.detailFields&&t.detailFields.map(n=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[n.key]})," "]})})]}):null,D9=({placeholder:e,defaultValue:t})=>{const[n,a]=vt.useState(t);vt.useEffect(()=>{a(t)},[t]);const l=vt.useCallback(f=>{a(f.currentTarget.value)},[]);return yt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:n,required:!0,onChange:l})]})};var m0={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */m0.exports;(function(e,t){(function(){var n,a="4.15.0",l=200,f="Expected a function",d="__lodash_hash_undefined__",u=1,w=2,E=1/0,I=9007199254740991,b="[object Arguments]",T="[object Array]",R="[object Boolean]",z="[object Date]",j="[object Error]",se="[object Function]",K="[object GeneratorFunction]",Z="[object Map]",V="[object Number]",ae="[object Object]",X="[object Promise]",U="[object RegExp]",P="[object Set]",L="[object String]",B="[object Symbol]",Q="[object WeakMap]",q="[object ArrayBuffer]",ve="[object DataView]",ye="[object Float32Array]",fe="[object Float64Array]",oe="[object Int8Array]",ce="[object Int16Array]",J="[object Int32Array]",re="[object Uint8Array]",de="[object Uint8ClampedArray]",we="[object Uint16Array]",Te="[object Uint32Array]",Ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ie=/^\w*$/,Oe=/^\./,qe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,He=/[\\^$.*+?()[\]{}|]/g,ot=/\\(\\)?/g,ht=/\w*$/,xt=/^\[object .+?Constructor\]$/,Mt=/^(?:0|[1-9]\d*)$/,pt={};pt[ye]=pt[fe]=pt[oe]=pt[ce]=pt[J]=pt[re]=pt[de]=pt[we]=pt[Te]=!0,pt[b]=pt[T]=pt[q]=pt[R]=pt[ve]=pt[z]=pt[j]=pt[se]=pt[Z]=pt[V]=pt[ae]=pt[U]=pt[P]=pt[L]=pt[Q]=!1;var wt={};wt[b]=wt[T]=wt[q]=wt[ve]=wt[R]=wt[z]=wt[ye]=wt[fe]=wt[oe]=wt[ce]=wt[J]=wt[Z]=wt[V]=wt[ae]=wt[U]=wt[P]=wt[L]=wt[B]=wt[re]=wt[de]=wt[we]=wt[Te]=!0,wt[j]=wt[se]=wt[Q]=!1;var Ht=typeof Da=="object"&&Da&&Da.Object===Object&&Da,zt=typeof self=="object"&&self&&self.Object===Object&&self,ur=Ht||zt||Function("return this")(),it=t&&!t.nodeType&&t,wr=it&&!0&&e&&!e.nodeType&&e,cr=wr&&wr.exports===it,qt=cr&&Ht.process,Se=function(){try{return qt&&qt.binding("util")}catch{}}(),N=Se&&Se.isTypedArray;function D(W,_e){return W.set(_e[0],_e[1]),W}function xe(W,_e){return W.add(_e),W}function Xe(W,_e,$e){switch($e.length){case 0:return W.call(_e);case 1:return W.call(_e,$e[0]);case 2:return W.call(_e,$e[0],$e[1]);case 3:return W.call(_e,$e[0],$e[1],$e[2])}return W.apply(_e,$e)}function tt(W,_e){for(var $e=-1,st=W?W.length:0;++$e<st&&_e(W[$e],$e,W)!==!1;);return W}function ct(W,_e){for(var $e=-1,st=_e.length,kt=W.length;++$e<st;)W[kt+$e]=_e[$e];return W}function le(W,_e,$e,st){var kt=-1,Tt=W?W.length:0;for(st&&Tt&&($e=W[++kt]);++kt<Tt;)$e=_e($e,W[kt],kt,W);return $e}function k(W,_e){for(var $e=-1,st=W?W.length:0;++$e<st;)if(_e(W[$e],$e,W))return!0;return!1}function $(W){return function(_e){return _e==null?n:_e[W]}}function Ee(W,_e){for(var $e=-1,st=Array(W);++$e<W;)st[$e]=_e($e);return st}function We(W){return function(_e){return W(_e)}}function nt(W,_e){return W==null?n:W[_e]}function Ve(W){var _e=!1;if(W!=null&&typeof W.toString!="function")try{_e=!!(W+"")}catch{}return _e}function Et(W){var _e=-1,$e=Array(W.size);return W.forEach(function(st,kt){$e[++_e]=[kt,st]}),$e}function Ot(W,_e){return function($e){return W(_e($e))}}function dr(W){var _e=-1,$e=Array(W.size);return W.forEach(function(st){$e[++_e]=st}),$e}var br=Array.prototype,Ft=Function.prototype,Nn=Object.prototype,ni=ur["__core-js_shared__"],an=function(){var W=/[^.]+$/.exec(ni&&ni.keys&&ni.keys.IE_PROTO||"");return W?"Symbol(src)_1."+W:""}(),Me=Ft.toString,ie=Nn.hasOwnProperty,ue=Me.call(Object),pe=Nn.toString,Fe=RegExp("^"+Me.call(ie).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=cr?ur.Buffer:n,je=ur.Symbol,Ue=ur.Uint8Array,Le=Ot(Object.getPrototypeOf,Object),Qe=Object.create,ft=Nn.propertyIsEnumerable,lt=br.splice,ut=Object.getOwnPropertySymbols,nr=Be?Be.isBuffer:n,Yt=Ot(Object.keys,Object),Er=Math.max,lr=os(ur,"DataView"),Tr=os(ur,"Map"),Dr=os(ur,"Promise"),Vr=os(ur,"Set"),sn=os(ur,"WeakMap"),pr=os(Object,"create"),Qr=!ft.call({valueOf:1},"valueOf"),xn=yo(lr),ii=yo(Tr),wi=yo(Dr),wn=yo(Vr),Xa=yo(sn),wl=je?je.prototype:n,kr=wl?wl.valueOf:n,bl=wl?wl.toString:n;function Ar(){}function bn(W){var _e=-1,$e=W?W.length:0;for(this.clear();++_e<$e;){var st=W[_e];this.set(st[0],st[1])}}function oi(){this.__data__=pr?pr(null):{}}function Rs(W){return this.has(W)&&delete this.__data__[W]}function ai(W){var _e=this.__data__;if(pr){var $e=_e[W];return $e===d?n:$e}return ie.call(_e,W)?_e[W]:n}function zi(W){var _e=this.__data__;return pr?_e[W]!==n:ie.call(_e,W)}function Oc(W,_e){var $e=this.__data__;return $e[W]=pr&&_e===n?d:_e,this}bn.prototype.clear=oi,bn.prototype.delete=Rs,bn.prototype.get=ai,bn.prototype.has=zi,bn.prototype.set=Oc;function $n(W){var _e=-1,$e=W?W.length:0;for(this.clear();++_e<$e;){var st=W[_e];this.set(st[0],st[1])}}function yn(){this.__data__=[]}function js(W){var _e=this.__data__,$e=Qa(_e,W);if($e<0)return!1;var st=_e.length-1;return $e==st?_e.pop():lt.call(_e,$e,1),!0}function va(W){var _e=this.__data__,$e=Qa(_e,W);return $e<0?n:_e[$e][1]}function ln(W){return Qa(this.__data__,W)>-1}function _a(W,_e){var $e=this.__data__,st=Qa($e,W);return st<0?$e.push([W,_e]):$e[st][1]=_e,this}$n.prototype.clear=yn,$n.prototype.delete=js,$n.prototype.get=va,$n.prototype.has=ln,$n.prototype.set=_a;function Sn(W){var _e=-1,$e=W?W.length:0;for(this.clear();++_e<$e;){var st=W[_e];this.set(st[0],st[1])}}function Sl(){this.__data__={hash:new bn,map:new(Tr||$n),string:new bn}}function go(W){return Ol(this,W).delete(W)}function Ou(W){return Ol(this,W).get(W)}function Ka(W){return Ol(this,W).has(W)}function jr(W,_e){return Ol(this,W).set(W,_e),this}Sn.prototype.clear=Sl,Sn.prototype.delete=go,Sn.prototype.get=Ou,Sn.prototype.has=Ka,Sn.prototype.set=jr;function xa(W){var _e=-1,$e=W?W.length:0;for(this.__data__=new Sn;++_e<$e;)this.add(W[_e])}function Ya(W){return this.__data__.set(W,d),this}function Fu(W){return this.__data__.has(W)}xa.prototype.add=xa.prototype.push=Ya,xa.prototype.has=Fu;function si(W){this.__data__=new $n(W)}function Ls(){this.__data__=new $n}function Ru(W){return this.__data__.delete(W)}function El(W){return this.__data__.get(W)}function zs(W){return this.__data__.has(W)}function Tl(W,_e){var $e=this.__data__;if($e instanceof $n){var st=$e.__data__;if(!Tr||st.length<l-1)return st.push([W,_e]),this;$e=this.__data__=new Sn(st)}return $e.set(W,_e),this}si.prototype.clear=Ls,si.prototype.delete=Ru,si.prototype.get=El,si.prototype.has=zs,si.prototype.set=Tl;function Ja(W,_e){var $e=En(W)||ko(W)?Ee(W.length,String):[],st=$e.length,kt=!!st;for(var Tt in W)(_e||ie.call(W,Tt))&&!(kt&&(Tt=="length"||ta(Tt,st)))&&$e.push(Tt);return $e}function ju(W,_e,$e){($e!==n&&!Mo(W[_e],$e)||typeof _e=="number"&&$e===n&&!(_e in W))&&(W[_e]=$e)}function Fc(W,_e,$e){var st=W[_e];(!(ie.call(W,_e)&&Mo(st,$e))||$e===n&&!(_e in W))&&(W[_e]=$e)}function Qa(W,_e){for(var $e=W.length;$e--;)if(Mo(W[$e][0],_e))return $e;return-1}function Rc(W,_e){return W&&kl(_e,Fo(_e),W)}function Bi(W,_e,$e,st,kt,Tt,Kt){var Jt;if(st&&(Jt=Tt?st(W,kt,Tt,Kt):st(W)),Jt!==n)return Jt;if(!Ei(W))return W;var yr=En(W);if(yr){if(Jt=Hc(W),!_e)return Ml(W,Jt)}else{var Or=Yi(W),vr=Or==se||Or==K;if(Oo(W))return Rf(W,_e);if(Or==ae||Or==b||vr&&!Tt){if(Ve(W))return Tt?W:{};if(Jt=Vu(vr?{}:W),!_e)return Nc(W,Rc(Jt,W))}else{if(!wt[Or])return Tt?W:{};Jt=Zc(W,Or,Bi,_e)}}Kt||(Kt=new si);var $r=Kt.get(W);if($r)return $r;if(Kt.set(W,Jt),!yr)var un=$e?Vc(W):Fo(W);return tt(un||W,function(kn,Un){un&&(Un=kn,kn=W[Un]),Fc(Jt,Un,Bi(kn,_e,$e,st,Un,W,Kt))}),Jt}function Pl(W){return Ei(W)?Qe(W):{}}var Yn=Uc(Lu),bi=wa();function Lu(W,_e){return W&&bi(W,_e,Fo)}function Bs(W,_e){_e=as(_e,W)?[_e]:rs(_e);for(var $e=0,st=_e.length;W!=null&&$e<st;)W=W[Gr(_e[$e++])];return $e&&$e==st?W:n}function zu(W,_e,$e){var st=_e(W);return En(W)?st:ct(st,$e(W))}function Bu(W){return pe.call(W)}function es(W,_e){return W!=null&&_e in Object(W)}function Du(W,_e,$e,st,kt){return W===_e?!0:W==null||_e==null||!Ei(W)&&!Di(_e)?W!==W&&_e!==_e:jc(W,_e,Du,$e,st,kt)}function jc(W,_e,$e,st,kt,Tt){var Kt=En(W),Jt=En(_e),yr=T,Or=T;Kt||(yr=Yi(W),yr=yr==b?ae:yr),Jt||(Or=Yi(_e),Or=Or==b?ae:Or);var vr=yr==ae&&!Ve(W),$r=Or==ae&&!Ve(_e),un=yr==Or;if(un&&!vr)return Tt||(Tt=new si),Kt||ra(W)?Uu(W,_e,$e,st,kt,Tt):Bf(W,_e,yr,$e,st,kt,Tt);if(!(kt&w)){var kn=vr&&ie.call(W,"__wrapped__"),Un=$r&&ie.call(_e,"__wrapped__");if(kn||Un){var Ti=kn?W.value():W,Pi=Un?_e.value():_e;return Tt||(Tt=new si),$e(Ti,Pi,st,kt,Tt)}}return un?(Tt||(Tt=new si),Df(W,_e,$e,st,kt,Tt)):!1}function Lc(W,_e,$e,st){var kt=$e.length,Tt=kt,Kt=!st;if(W==null)return!Tt;for(W=Object(W);kt--;){var Jt=$e[kt];if(Kt&&Jt[2]?Jt[1]!==W[Jt[0]]:!(Jt[0]in W))return!1}for(;++kt<Tt;){Jt=$e[kt];var yr=Jt[0],Or=W[yr],vr=Jt[1];if(Kt&&Jt[2]){if(Or===n&&!(yr in W))return!1}else{var $r=new si;if(st)var un=st(Or,vr,yr,W,_e,$r);if(!(un===n?Du(vr,Or,st,u|w,$r):un))return!1}}return!0}function Of(W){if(!Ei(W)||Wu(W))return!1;var _e=Us(W)||Ve(W)?Fe:xt;return _e.test(yo(W))}function Ff(W){return Di(W)&&Vs(W.length)&&!!pt[pe.call(W)]}function zc(W){return typeof W=="function"?W:W==null?Sa:typeof W=="object"?En(W)?Nu(W[0],W[1]):Cl(W):ls(W)}function Al(W){if(!Xr(W))return Yt(W);var _e=[];for(var $e in Object(W))ie.call(W,$e)&&$e!="constructor"&&_e.push($e);return _e}function Il(W){if(!Ei(W))return $s(W);var _e=Xr(W),$e=[];for(var st in W)st=="constructor"&&(_e||!ie.call(W,st))||$e.push(st);return $e}function Cl(W){var _e=Fl(W);return _e.length==1&&_e[0][2]?xr(_e[0][0],_e[0][1]):function($e){return $e===W||Lc($e,W,_e)}}function Nu(W,_e){return as(W)&&Rl(_e)?xr(Gr(W),_e):function($e){var st=na($e,W);return st===n&&st===_e?xo($e,W):Du(_e,st,n,u|w)}}function ts(W,_e,$e,st,kt){if(W!==_e){if(!(En(_e)||ra(_e)))var Tt=Il(_e);tt(Tt||_e,function(Kt,Jt){if(Tt&&(Jt=Kt,Kt=_e[Jt]),Ei(Kt))kt||(kt=new si),Si(W,_e,Jt,$e,ts,st,kt);else{var yr=st?st(W[Jt],Kt,Jt+"",W,_e,kt):n;yr===n&&(yr=Kt),ju(W,Jt,yr)}})}}function Si(W,_e,$e,st,kt,Tt,Kt){var Jt=W[$e],yr=_e[$e],Or=Kt.get(yr);if(Or){ju(W,$e,Or);return}var vr=Tt?Tt(Jt,yr,$e+"",W,_e,Kt):n,$r=vr===n;$r&&(vr=yr,En(yr)||ra(yr)?En(Jt)?vr=Jt:_o(Jt)?vr=Ml(Jt):($r=!1,vr=Bi(yr,!0)):Gs(yr)||ko(yr)?ko(Jt)?vr=Ws(Jt):!Ei(Jt)||st&&Us(Jt)?($r=!1,vr=Bi(yr,!0)):vr=Jt:$r=!1),$r&&(Kt.set(yr,vr),kt(vr,yr,st,Tt,Kt),Kt.delete(yr)),ju(W,$e,vr)}function Lr(W){return function(_e){return Bs(_e,W)}}function $u(W,_e){return _e=Er(_e===n?W.length-1:_e,0),function(){for(var $e=arguments,st=-1,kt=Er($e.length-_e,0),Tt=Array(kt);++st<kt;)Tt[st]=$e[_e+st];st=-1;for(var Kt=Array(_e+1);++st<_e;)Kt[st]=$e[st];return Kt[_e]=Tt,Xe(W,this,Kt)}}function Ds(W){if(typeof W=="string")return W;if(ba(W))return bl?bl.call(W):"";var _e=W+"";return _e=="0"&&1/W==-E?"-0":_e}function rs(W){return En(W)?W:en(W)}function Rf(W,_e){if(_e)return W.slice();var $e=new W.constructor(W.length);return W.copy($e),$e}function ns(W){var _e=new W.constructor(W.byteLength);return new Ue(_e).set(new Ue(W)),_e}function jf(W,_e){var $e=_e?ns(W.buffer):W.buffer;return new W.constructor($e,W.byteOffset,W.byteLength)}function is(W,_e,$e){var st=_e?$e(Et(W),!0):Et(W);return le(st,D,new W.constructor)}function Lf(W){var _e=new W.constructor(W.source,ht.exec(W));return _e.lastIndex=W.lastIndex,_e}function Bc(W,_e,$e){var st=_e?$e(dr(W),!0):dr(W);return le(st,xe,new W.constructor)}function zf(W){return kr?Object(kr.call(W)):{}}function Dc(W,_e){var $e=_e?ns(W.buffer):W.buffer;return new W.constructor($e,W.byteOffset,W.length)}function Ml(W,_e){var $e=-1,st=W.length;for(_e||(_e=Array(st));++$e<st;)_e[$e]=W[$e];return _e}function kl(W,_e,$e,st){$e||($e={});for(var kt=-1,Tt=_e.length;++kt<Tt;){var Kt=_e[kt],Jt=st?st($e[Kt],W[Kt],Kt,$e,W):n;Fc($e,Kt,Jt===n?W[Kt]:Jt)}return $e}function Nc(W,_e){return kl(W,Gc(W),_e)}function $c(W){return $u(function(_e,$e){var st=-1,kt=$e.length,Tt=kt>1?$e[kt-1]:n,Kt=kt>2?$e[2]:n;for(Tt=W.length>3&&typeof Tt=="function"?(kt--,Tt):n,Kt&&Co($e[0],$e[1],Kt)&&(Tt=kt<3?n:Tt,kt=1),_e=Object(_e);++st<kt;){var Jt=$e[st];Jt&&W(_e,Jt,st,Tt)}return _e})}function Uc(W,_e){return function($e,st){if($e==null)return $e;if(!vo($e))return W($e,st);for(var kt=$e.length,Tt=_e?kt:-1,Kt=Object($e);(_e?Tt--:++Tt<kt)&&st(Kt[Tt],Tt,Kt)!==!1;);return $e}}function wa(W){return function(_e,$e,st){for(var kt=-1,Tt=Object(_e),Kt=st(_e),Jt=Kt.length;Jt--;){var yr=Kt[W?Jt:++kt];if($e(Tt[yr],yr,Tt)===!1)break}return _e}}function Uu(W,_e,$e,st,kt,Tt){var Kt=kt&w,Jt=W.length,yr=_e.length;if(Jt!=yr&&!(Kt&&yr>Jt))return!1;var Or=Tt.get(W);if(Or&&Tt.get(_e))return Or==_e;var vr=-1,$r=!0,un=kt&u?new xa:n;for(Tt.set(W,_e),Tt.set(_e,W);++vr<Jt;){var kn=W[vr],Un=_e[vr];if(st)var Ti=Kt?st(Un,kn,vr,_e,W,Tt):st(kn,Un,vr,W,_e,Tt);if(Ti!==n){if(Ti)continue;$r=!1;break}if(un){if(!k(_e,function(Pi,Ji){if(!un.has(Ji)&&(kn===Pi||$e(kn,Pi,st,kt,Tt)))return un.add(Ji)})){$r=!1;break}}else if(!(kn===Un||$e(kn,Un,st,kt,Tt))){$r=!1;break}}return Tt.delete(W),Tt.delete(_e),$r}function Bf(W,_e,$e,st,kt,Tt,Kt){switch($e){case ve:if(W.byteLength!=_e.byteLength||W.byteOffset!=_e.byteOffset)return!1;W=W.buffer,_e=_e.buffer;case q:return!(W.byteLength!=_e.byteLength||!st(new Ue(W),new Ue(_e)));case R:case z:case V:return Mo(+W,+_e);case j:return W.name==_e.name&&W.message==_e.message;case U:case L:return W==_e+"";case Z:var Jt=Et;case P:var yr=Tt&w;if(Jt||(Jt=dr),W.size!=_e.size&&!yr)return!1;var Or=Kt.get(W);if(Or)return Or==_e;Tt|=u,Kt.set(W,_e);var vr=Uu(Jt(W),Jt(_e),st,kt,Tt,Kt);return Kt.delete(W),vr;case B:if(kr)return kr.call(W)==kr.call(_e)}return!1}function Df(W,_e,$e,st,kt,Tt){var Kt=kt&w,Jt=Fo(W),yr=Jt.length,Or=Fo(_e),vr=Or.length;if(yr!=vr&&!Kt)return!1;for(var $r=yr;$r--;){var un=Jt[$r];if(!(Kt?un in _e:ie.call(_e,un)))return!1}var kn=Tt.get(W);if(kn&&Tt.get(_e))return kn==_e;var Un=!0;Tt.set(W,_e),Tt.set(_e,W);for(var Ti=Kt;++$r<yr;){un=Jt[$r];var Pi=W[un],Ji=_e[un];if(st)var Hu=Kt?st(Ji,Pi,un,_e,W,Tt):st(Pi,Ji,un,W,_e,Tt);if(!(Hu===n?Pi===Ji||$e(Pi,Ji,st,kt,Tt):Hu)){Un=!1;break}Ti||(Ti=un=="constructor")}if(Un&&!Ti){var Ta=W.constructor,Pa=_e.constructor;Ta!=Pa&&"constructor"in W&&"constructor"in _e&&!(typeof Ta=="function"&&Ta instanceof Ta&&typeof Pa=="function"&&Pa instanceof Pa)&&(Un=!1)}return Tt.delete(W),Tt.delete(_e),Un}function Vc(W){return zu(W,Fo,Gc)}function Ns(){var W=Ar.iteratee||ss;return W=W===ss?zc:W,arguments.length?W(arguments[0],arguments[1]):W}function Ol(W,_e){var $e=W.__data__;return Gu(_e)?$e[typeof _e=="string"?"string":"hash"]:$e.map}function Fl(W){for(var _e=Fo(W),$e=_e.length;$e--;){var st=_e[$e],kt=W[st];_e[$e]=[st,kt,Rl(kt)]}return _e}function os(W,_e){var $e=nt(W,_e);return Of($e)?$e:n}var Gc=ut?Ot(ut,Object):Ea,Yi=Bu;(lr&&Yi(new lr(new ArrayBuffer(1)))!=ve||Tr&&Yi(new Tr)!=Z||Dr&&Yi(Dr.resolve())!=X||Vr&&Yi(new Vr)!=P||sn&&Yi(new sn)!=Q)&&(Yi=function(W){var _e=pe.call(W),$e=_e==ae?W.constructor:n,st=$e?yo($e):n;if(st)switch(st){case xn:return ve;case ii:return Z;case wi:return X;case wn:return P;case Xa:return Q}return _e});function Wc(W,_e,$e){_e=as(_e,W)?[_e]:rs(_e);for(var st,kt=-1,Kt=_e.length;++kt<Kt;){var Tt=Gr(_e[kt]);if(!(st=W!=null&&$e(W,Tt)))break;W=W[Tt]}if(st)return st;var Kt=W?W.length:0;return!!Kt&&Vs(Kt)&&ta(Tt,Kt)&&(En(W)||ko(W))}function Hc(W){var _e=W.length,$e=W.constructor(_e);return _e&&typeof W[0]=="string"&&ie.call(W,"index")&&($e.index=W.index,$e.input=W.input),$e}function Vu(W){return typeof W.constructor=="function"&&!Xr(W)?Pl(Le(W)):{}}function Zc(W,_e,$e,st){var kt=W.constructor;switch(_e){case q:return ns(W);case R:case z:return new kt(+W);case ve:return jf(W,st);case ye:case fe:case oe:case ce:case J:case re:case de:case we:case Te:return Dc(W,st);case Z:return is(W,st,$e);case V:case L:return new kt(W);case U:return Lf(W);case P:return Bc(W,st,$e);case B:return zf(W)}}function ta(W,_e){return _e=_e??I,!!_e&&(typeof W=="number"||Mt.test(W))&&W>-1&&W%1==0&&W<_e}function Co(W,_e,$e){if(!Ei($e))return!1;var st=typeof _e;return(st=="number"?vo($e)&&ta(_e,$e.length):st=="string"&&_e in $e)?Mo($e[_e],W):!1}function as(W,_e){if(En(W))return!1;var $e=typeof W;return $e=="number"||$e=="symbol"||$e=="boolean"||W==null||ba(W)?!0:Ie.test(W)||!Ne.test(W)||_e!=null&&W in Object(_e)}function Gu(W){var _e=typeof W;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?W!=="__proto__":W===null}function Wu(W){return!!an&&an in W}function Xr(W){var _e=W&&W.constructor,$e=typeof _e=="function"&&_e.prototype||Nn;return W===$e}function Rl(W){return W===W&&!Ei(W)}function xr(W,_e){return function($e){return $e==null?!1:$e[W]===_e&&(_e!==n||W in Object($e))}}function $s(W){var _e=[];if(W!=null)for(var $e in Object(W))_e.push($e);return _e}var en=Ll(function(W){W=zl(W);var _e=[];return Oe.test(W)&&_e.push(""),W.replace(qe,function($e,st,kt,Tt){_e.push(kt?Tt.replace(ot,"$1"):st||$e)}),_e});function Gr(W){if(typeof W=="string"||ba(W))return W;var _e=W+"";return _e=="0"&&1/W==-E?"-0":_e}function yo(W){if(W!=null){try{return Me.call(W)}catch{}try{return W+""}catch{}}return""}function qc(W){for(var _e=-1,$e=W?W.length:0,st=0,kt=[];++_e<$e;){var Tt=W[_e];Tt&&(kt[st++]=Tt)}return kt}function jl(W,_e){var $e=En(W)?tt:Yn;return $e(W,Ns(_e,3))}function Ll(W,_e){if(typeof W!="function"||_e&&typeof _e!="function")throw new TypeError(f);var $e=function(){var st=arguments,kt=_e?_e.apply(this,st):st[0],Tt=$e.cache;if(Tt.has(kt))return Tt.get(kt);var Kt=W.apply(this,st);return $e.cache=Tt.set(kt,Kt),Kt};return $e.cache=new(Ll.Cache||Sn),$e}Ll.Cache=Sn;function Xc(W){return Bi(W,!1,!0)}function Mo(W,_e){return W===_e||W!==W&&_e!==_e}function ko(W){return _o(W)&&ie.call(W,"callee")&&(!ft.call(W,"callee")||pe.call(W)==b)}var En=Array.isArray;function vo(W){return W!=null&&Vs(W.length)&&!Us(W)}function _o(W){return Di(W)&&vo(W)}var Oo=nr||Bl;function li(W){if(vo(W)&&(En(W)||typeof W=="string"||typeof W.splice=="function"||Oo(W)||ko(W)))return!W.length;var _e=Yi(W);if(_e==Z||_e==P)return!W.size;if(Qr||Xr(W))return!Yt(W).length;for(var $e in W)if(ie.call(W,$e))return!1;return!0}function Us(W){var _e=Ei(W)?pe.call(W):"";return _e==se||_e==K}function Vs(W){return typeof W=="number"&&W>-1&&W%1==0&&W<=I}function Ei(W){var _e=typeof W;return!!W&&(_e=="object"||_e=="function")}function Di(W){return!!W&&typeof W=="object"}function Gs(W){if(!Di(W)||pe.call(W)!=ae||Ve(W))return!1;var _e=Le(W);if(_e===null)return!0;var $e=ie.call(_e,"constructor")&&_e.constructor;return typeof $e=="function"&&$e instanceof $e&&Me.call($e)==ue}function ba(W){return typeof W=="symbol"||Di(W)&&pe.call(W)==B}var ra=N?We(N):Ff;function Ws(W){return kl(W,Hs(W))}function zl(W){return W==null?"":Ds(W)}function na(W,_e,$e){var st=W==null?n:Bs(W,_e);return st===n?$e:st}function xo(W,_e){return W!=null&&Wc(W,_e,es)}function Fo(W){return vo(W)?Ja(W):Al(W)}function Hs(W){return vo(W)?Ja(W,!0):Il(W)}var Fr=$c(function(W,_e,$e){ts(W,_e,$e)});function Sa(W){return W}function ss(W){return zc(typeof W=="function"?W:Bi(W,!0))}function ls(W){return as(W)?$(Gr(W)):Lr(W)}function Ea(){return[]}function Bl(){return!1}Ar.compact=qc,Ar.iteratee=ss,Ar.keys=Fo,Ar.keysIn=Hs,Ar.memoize=Ll,Ar.merge=Fr,Ar.property=ls,Ar.toPlainObject=Ws,Ar.clone=Xc,Ar.eq=Mo,Ar.forEach=jl,Ar.get=na,Ar.hasIn=xo,Ar.identity=Sa,Ar.isArguments=ko,Ar.isArray=En,Ar.isArrayLike=vo,Ar.isArrayLikeObject=_o,Ar.isBuffer=Oo,Ar.isEmpty=li,Ar.isFunction=Us,Ar.isLength=Vs,Ar.isObject=Ei,Ar.isObjectLike=Di,Ar.isPlainObject=Gs,Ar.isSymbol=ba,Ar.isTypedArray=ra,Ar.stubArray=Ea,Ar.stubFalse=Bl,Ar.toString=zl,Ar.each=jl,Ar.VERSION=a,wr&&((wr.exports=Ar)._=Ar,it._=Ar)}).call(Da)})(m0,m0.exports);var N9=m0.exports,$9=ey;function ey(e,t){var n=e&&e.type,a;if(n==="FeatureCollection")for(a=0;a<e.features.length;a++)ey(e.features[a],t);else if(n==="GeometryCollection")for(a=0;a<e.geometries.length;a++)ey(e.geometries[a],t);else if(n==="Feature")ey(e.geometry,t);else if(n==="Polygon")SI(e.coordinates,t);else if(n==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)SI(e.coordinates[a],t);return e}function SI(e,t){if(e.length!==0){EI(e[0],t);for(var n=1;n<e.length;n++)EI(e[n],!t)}}function EI(e,t){for(var n=0,a=0,l=0,f=e.length,d=f-1;l<f;d=l++){var u=(e[l][0]-e[d][0])*(e[d][1]+e[l][1]),w=n+u;a+=Math.abs(n)>=Math.abs(u)?n-w+u:u-w+n,n=w}n+a>=0!=!!t&&e.reverse()}const U9=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var V9=U9,Cr=N9,Tg=$9,ty={};V9.forEach(function(e){if(e.polygon==="all")ty[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",n={};e.values.forEach(function(a){n[a]=!0}),ty[e.key]={},ty[e.key][t]=n}});function G9(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Cr.merge(e,t)}var g0={};g0=function(e,t,n){t=Cr.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:ty,deduplicator:G9},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=f(e):a=l(e),a;function l(w){var E=new Array,I=new Array,b=new Array;function T(X){var U=Cr.clone(X);U.lat=X.center.lat,U.lon=X.center.lon,U.__is_center_placeholder=!0,E.push(U)}function R(X){var U=Cr.clone(X);U.nodes=[];function P(L,B,Q){var q={type:"node",id:"_"+U.type+"/"+U.id+"bounds"+Q,lat:L,lon:B};U.nodes.push(q.id),E.push(q)}P(U.bounds.minlat,U.bounds.minlon,1),P(U.bounds.maxlat,U.bounds.minlon,2),P(U.bounds.maxlat,U.bounds.maxlon,3),P(U.bounds.minlat,U.bounds.maxlon,4),U.nodes.push(U.nodes[0]),U.__is_bounds_placeholder=!0,I.push(U)}function z(X){function U(P,L,B){var Q={type:"node",id:B,lat:P,lon:L};E.push(Q)}Cr.isArray(X.nodes)||(X.nodes=X.geometry.map(function(P){return P!==null?"_anonymous@"+P.lat+"/"+P.lon:"_anonymous@unknown_location"})),X.geometry.forEach(function(P,L){P&&U(P.lat,P.lon,X.nodes[L])})}function j(X){function U(L,B,Q){var q={type:"node",id:Q,lat:L,lon:B};E.push(q)}function P(L,B){if(I.some(function(ve){return ve.type=="way"&&ve.id==B}))return;var Q={type:"way",id:B,nodes:[]};function q(ve,ye){var fe={type:"node",id:"_anonymous@"+ve+"/"+ye,lat:ve,lon:ye};Q.nodes.push(fe.id),E.push(fe)}L.forEach(function(ve){ve?q(ve.lat,ve.lon):Q.nodes.push(void 0)}),I.push(Q)}X.members.forEach(function(L,B){L.type=="node"?L.lat&&U(L.lat,L.lon,L.ref):L.type=="way"&&L.geometry&&(L.ref="_fullGeom"+L.ref,P(L.geometry,L.ref))})}for(var se=0;se<w.elements.length;se++)switch(w.elements[se].type){case"node":var K=w.elements[se];E.push(K);break;case"way":var Z=Cr.clone(w.elements[se]);Z.nodes=Cr.clone(Z.nodes),I.push(Z),Z.center&&T(Z),Z.geometry?z(Z):Z.bounds&&R(Z);break;case"relation":var V=Cr.clone(w.elements[se]);V.members=Cr.clone(V.members),b.push(V);var ae=V.members&&V.members.some(function(X){return X.type=="node"&&X.lat||X.type=="way"&&X.geometry&&X.geometry.length>0});V.center&&T(V),ae?j(V):V.bounds&&R(V);break}return d(E,I,b)}function f(w){var E=new Array,I=new Array,b=new Array;function T(V,ae,X){V.hasAttribute(X)&&(ae[X]=V.getAttribute(X))}function R(V,ae){var X=Cr.clone(V);T(ae,X,"lat"),T(ae,X,"lon"),X.__is_center_placeholder=!0,E.push(X)}function z(V,ae){var X=Cr.clone(V);X.nodes=[];function U(P,L,B){var Q={type:"node",id:"_"+X.type+"/"+X.id+"bounds"+B,lat:P,lon:L};X.nodes.push(Q.id),E.push(Q)}U(ae.getAttribute("minlat"),ae.getAttribute("minlon"),1),U(ae.getAttribute("maxlat"),ae.getAttribute("minlon"),2),U(ae.getAttribute("maxlat"),ae.getAttribute("maxlon"),3),U(ae.getAttribute("minlat"),ae.getAttribute("maxlon"),4),X.nodes.push(X.nodes[0]),X.__is_bounds_placeholder=!0,I.push(X)}function j(V,ae){function X(U,P,L){var B={type:"node",id:L,lat:U,lon:P};return E.push(B),B.id}Cr.isArray(V.nodes)||(V.nodes=[],Cr.each(ae,function(U,P){V.nodes.push("_anonymous@"+U.getAttribute("lat")+"/"+U.getAttribute("lon"))})),Cr.each(ae,function(U,P){U.getAttribute("lat")&&X(U.getAttribute("lat"),U.getAttribute("lon"),V.nodes[P])})}function se(V,ae){function X(P,L,B){var Q={type:"node",id:B,lat:P,lon:L};E.push(Q)}function U(P,L){if(I.some(function(q){return q.type=="way"&&q.id==L}))return;var B={type:"way",id:L,nodes:[]};function Q(q,ve){var ye={type:"node",id:"_anonymous@"+q+"/"+ve,lat:q,lon:ve};B.nodes.push(ye.id),E.push(ye)}Cr.each(P,function(q){q.getAttribute("lat")?Q(q.getAttribute("lat"),q.getAttribute("lon")):B.nodes.push(void 0)}),I.push(B)}Cr.each(ae,function(P,L){V.members[L].type=="node"?P.getAttribute("lat")&&X(P.getAttribute("lat"),P.getAttribute("lon"),V.members[L].ref):V.members[L].type=="way"&&P.getElementsByTagName("nd").length>0&&(V.members[L].ref="_fullGeom"+V.members[L].ref,U(P.getElementsByTagName("nd"),V.members[L].ref))})}Cr.each(w.getElementsByTagName("node"),function(V,ae){var X={};Cr.each(V.getElementsByTagName("tag"),function(P){X[P.getAttribute("k")]=P.getAttribute("v")});var U={type:"node"};T(V,U,"id"),T(V,U,"lat"),T(V,U,"lon"),T(V,U,"version"),T(V,U,"timestamp"),T(V,U,"changeset"),T(V,U,"uid"),T(V,U,"user"),Cr.isEmpty(X)||(U.tags=X),E.push(U)});var K,Z;return Cr.each(w.getElementsByTagName("way"),function(V,ae){var X={},U=[];Cr.each(V.getElementsByTagName("tag"),function(B){X[B.getAttribute("k")]=B.getAttribute("v")});var P=!1;Cr.each(V.getElementsByTagName("nd"),function(B,Q){var q;(q=B.getAttribute("ref"))&&(U[Q]=q),!P&&B.getAttribute("lat")&&(P=!0)});var L={type:"way"};T(V,L,"id"),T(V,L,"version"),T(V,L,"timestamp"),T(V,L,"changeset"),T(V,L,"uid"),T(V,L,"user"),U.length>0&&(L.nodes=U),Cr.isEmpty(X)||(L.tags=X),(K=V.getElementsByTagName("center")[0])&&R(L,K),P?j(L,V.getElementsByTagName("nd")):(Z=V.getElementsByTagName("bounds")[0])&&z(L,Z),I.push(L)}),Cr.each(w.getElementsByTagName("relation"),function(V,ae){var X={},U=[];Cr.each(V.getElementsByTagName("tag"),function(B){X[B.getAttribute("k")]=B.getAttribute("v")});var P=!1;Cr.each(V.getElementsByTagName("member"),function(B,Q){U[Q]={},T(B,U[Q],"ref"),T(B,U[Q],"role"),T(B,U[Q],"type"),(!P&&U[Q].type=="node"&&B.getAttribute("lat")||U[Q].type=="way"&&B.getElementsByTagName("nd").length>0)&&(P=!0)});var L={type:"relation"};T(V,L,"id"),T(V,L,"version"),T(V,L,"timestamp"),T(V,L,"changeset"),T(V,L,"uid"),T(V,L,"user"),U.length>0&&(L.members=U),Cr.isEmpty(X)||(L.tags=X),(K=V.getElementsByTagName("center")[0])&&R(L,K),P?se(L,V.getElementsByTagName("member")):(Z=V.getElementsByTagName("bounds")[0])&&z(L,Z),b.push(L)}),d(E,I,b)}function d(w,E,I){function b(Oe,qe){if(typeof qe!="object"&&(qe={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Oe,qe);for(var He in Oe)if(t.uninterestingTags[He]!==!0&&!(qe[He]===!0||qe[He]===Oe[He]))return!0;return!1}function T(Oe){var qe={timestamp:Oe.timestamp,version:Oe.version,changeset:Oe.changeset,user:Oe.user,uid:Oe.uid};for(var He in qe)qe[He]===void 0&&delete qe[He];return qe}for(var R=new Object,z=new Object,j=0;j<w.length;j++){var se=w[j];R[se.id]!==void 0&&(se=t.deduplicator(se,R[se.id])),R[se.id]=se,typeof se.tags<"u"&&b(se.tags)&&(z[se.id]=!0)}for(var j=0;j<I.length;j++)if(Cr.isArray(I[j].members))for(var K=0;K<I[j].members.length;K++)I[j].members[K].type=="node"&&(z[I[j].members[K].ref]=!0);for(var Z=new Object,V=new Object,j=0;j<E.length;j++){var ae=E[j];if(Z[ae.id]&&(ae=t.deduplicator(ae,Z[ae.id])),Z[ae.id]=ae,Cr.isArray(ae.nodes))for(var K=0;K<ae.nodes.length;K++)typeof ae.nodes[K]!="object"&&(V[ae.nodes[K]]=!0,ae.nodes[K]=R[ae.nodes[K]])}var X=new Array;for(var U in R){var se=R[U];(!V[U]||z[U])&&X.push(se)}for(var P=new Array,j=0;j<I.length;j++){var L=I[j];P[L.id]&&(L=t.deduplicator(L,P[L.id])),P[L.id]=L}var B={node:{},way:{},relation:{}};for(var U in P){var L=P[U];if(!Cr.isArray(L.members)){t.verbose&&console.warn("Relation",L.type+"/"+L.id,"ignored because it has no members");continue}for(var K=0;K<L.members.length;K++){var Q=L.members[K].type,q=L.members[K].ref;if(typeof q!="number"&&(q=q.replace("_fullGeom","")),!B[Q]){t.verbose&&console.warn("Relation",L.type+"/"+L.id,"member",Q+"/"+q,"ignored because it has an invalid type");continue}typeof B[Q][q]>"u"&&(B[Q][q]=[]),B[Q][q].push({role:L.members[K].role,rel:L.id,reltags:L.tags})}}var ve,ye=[];for(j=0;j<X.length;j++){if(typeof X[j].lon>"u"||typeof X[j].lat>"u"){t.verbose&&console.warn("POI",X[j].type+"/"+X[j].id,"ignored because it lacks coordinates");continue}var fe={type:"Feature",id:X[j].type+"/"+X[j].id,properties:{type:X[j].type,id:X[j].id,tags:X[j].tags||{},relations:B.node[X[j].id]||[],meta:T(X[j])},geometry:{type:"Point",coordinates:[+X[j].lon,+X[j].lat]}};X[j].__is_center_placeholder&&(fe.properties.geometry="center"),n?n(fe):ye.push(fe)}for(var oe=[],ce=[],j=0;j<I.length;j++)if(P[I[j].id]===I[j]){if(typeof I[j].tags<"u"&&(I[j].tags.type=="route"||I[j].tags.type=="waterway")){let qe=function(He){var ot=!1,ht;ht=He.members.filter(function(wt){return wt.type==="way"}),ht=ht.map(function(wt){var Ht=Z[wt.ref];if(Ht===void 0||Ht.nodes===void 0){t.verbose&&console.warn("Route "+He.type+"/"+He.id,"tainted by a missing or incomplete  way",wt.type+"/"+wt.ref),ot=!0;return}return{id:wt.ref,role:wt.role,way:Ht,nodes:Ht.nodes.filter(function(zt){return zt!==void 0?!0:(ot=!0,t.verbose&&console.warn("Route",He.type+"/"+He.id,"tainted by a way",wt.type+"/"+wt.ref,"with a missing node"),!1)})}}),ht=Cr.compact(ht);var xt;xt=h1(ht);var Mt=[];if(Mt=Cr.compact(xt.map(function(wt){return Cr.compact(wt.map(function(Ht){return[+Ht.lon,+Ht.lat]}))})),Mt.length==0)return t.verbose&&console.warn("Route",He.type+"/"+He.id,"contains no coordinates"),!1;var pt={type:"Feature",id:He.type+"/"+He.id,properties:{type:He.type,id:He.id,tags:He.tags||{},relations:B[He.type][He.id]||[],meta:T(He)},geometry:{type:Mt.length===1?"LineString":"MultiLineString",coordinates:Mt.length===1?Mt[0]:Mt}};return ot&&(t.verbose&&console.warn("Route",He.type+"/"+He.id,"is tainted"),pt.properties.tainted=!0),pt};var Ne=qe;if(!Cr.isArray(I[j].members)){t.verbose&&console.warn("Route",I[j].type+"/"+I[j].id,"ignored because it has no members");continue}if(I[j].members.forEach(function(He){Z[He.ref]&&!b(Z[He.ref].tags)&&(Z[He.ref].is_skippablerelationmember=!0)}),fe=qe(I[j]),fe===!1){t.verbose&&console.warn("Route relation",I[j].type+"/"+I[j].id,"ignored because it has invalid geometry");continue}n?n(Tg(fe)):ce.push(fe)}if(typeof I[j].tags<"u"&&(I[j].tags.type=="multipolygon"||I[j].tags.type=="boundary")){let He=function(ot,ht){var xt=!1,Mt=re?"way":"relation",pt=typeof ot.id=="number"?ot.id:+ot.id.replace("_fullGeom",""),wt;wt=ht.members.filter(function(D){return D.type==="way"}),wt=wt.map(function(D){var xe=Z[D.ref];if(xe===void 0||xe.nodes===void 0){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"tainted by a missing or incomplete way",D.type+"/"+D.ref),xt=!0;return}return{id:D.ref,role:D.role||"outer",way:xe,nodes:xe.nodes.filter(function(Xe){return Xe!==void 0?!0:(xt=!0,t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"tainted by a way",D.type+"/"+D.ref,"with a missing node"),!1)})}}),wt=Cr.compact(wt);var Ht,zt;Ht=h1(wt.filter(function(D){return D.role==="outer"})),zt=h1(wt.filter(function(D){return D.role==="inner"}));var ur;function it(D){var xe=function(k,$){for(var Ee=0;Ee<$.length;Ee++)if(tt($[Ee],k))return!0;return!1},Xe=function(k){return k.map(function($){return[+$.lat,+$.lon]})},tt=function(k,$){for(var Ee=k[0],We=k[1],nt=!1,Ve=0,Et=$.length-1;Ve<$.length;Et=Ve++){var Ot=$[Ve][0],dr=$[Ve][1],br=$[Et][0],Ft=$[Et][1],Nn=dr>We!=Ft>We&&Ee<(br-Ot)*(We-dr)/(Ft-dr)+Ot;Nn&&(nt=!nt)}return nt},ct,le;for(D=Xe(D),ct=0;ct<Ht.length;ct++)if(le=Xe(Ht[ct]),xe(le,D))return ct}ur=Ht.map(function(D){return[D]});for(var wr=0;wr<zt.length;wr++){var cr=it(zt[wr]);cr!==void 0?ur[cr].push(zt[wr]):t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains an inner ring with no containing outer")}var qt=[];if(qt=Cr.compact(ur.map(function(D){var xe=Cr.compact(D.map(function(Xe){if(Xe.length<4){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains a ring with less than four nodes");return}return Cr.compact(Xe.map(function(tt){return[+tt.lon,+tt.lat]}))}));if(xe.length==0){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains an empty ring cluster");return}return xe})),qt.length==0)return t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains no coordinates"),!1;var Se="MultiPolygon";qt.length===1&&(Se="Polygon",qt=qt[0]);var N={type:"Feature",id:ot.type+"/"+pt,properties:{type:ot.type,id:pt,tags:ot.tags||{},relations:B[ot.type][ot.id]||[],meta:T(ot)},geometry:{type:Se,coordinates:qt}};return xt&&(t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"is tainted"),N.properties.tainted=!0),N};var Ie=He;if(!Cr.isArray(I[j].members)){t.verbose&&console.warn("Multipolygon",I[j].type+"/"+I[j].id,"ignored because it has no members");continue}for(var J=0,K=0;K<I[j].members.length;K++)I[j].members[K].role=="outer"?J++:t.verbose&&I[j].members[K].role!="inner"&&console.warn("Multipolygon",I[j].type+"/"+I[j].id,"member",I[j].members[K].type+"/"+I[j].members[K].ref,'ignored because it has an invalid role: "'+I[j].members[K].role+'"');if(I[j].members.forEach(function(ot){Z[ot.ref]&&(ot.role==="outer"&&!b(Z[ot.ref].tags,I[j].tags)&&(Z[ot.ref].is_skippablerelationmember=!0),ot.role==="inner"&&!b(Z[ot.ref].tags)&&(Z[ot.ref].is_skippablerelationmember=!0))}),J==0){t.verbose&&console.warn("Multipolygon relation",I[j].type+"/"+I[j].id,"ignored because it has no outer ways");continue}var re=!1;J==1&&!b(I[j].tags,{type:!0})&&(re=!0);var fe=null;if(!re)fe=He(I[j],I[j]);else{var de=I[j].members.filter(function(ot){return ot.role==="outer"})[0];if(de=Z[de.ref],de===void 0){t.verbose&&console.warn("Multipolygon relation",I[j].type+"/"+I[j].id,"ignored because outer way",de.type+"/"+de.ref,"is missing");continue}de.is_skippablerelationmember=!0,fe=He(de,I[j])}if(fe===!1){t.verbose&&console.warn("Multipolygon relation",I[j].type+"/"+I[j].id,"ignored because it has invalid geometry");continue}n?n(Tg(fe)):ce.push(fe)}}for(var j=0;j<E.length;j++)if(Z[E[j].id]===E[j]){if(!Cr.isArray(E[j].nodes)){t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"ignored because it has no nodes");continue}if(!E[j].is_skippablerelationmember){typeof E[j].id!="number"&&(E[j].id=+E[j].id.replace("_fullGeom","")),E[j].tainted=!1,E[j].hidden=!1;var we=new Array;for(K=0;K<E[j].nodes.length;K++)typeof E[j].nodes[K]=="object"?we.push([+E[j].nodes[K].lon,+E[j].nodes[K].lat]):(t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"is tainted by an invalid node"),E[j].tainted=!0);if(we.length<=1){t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"ignored because it contains too few nodes");continue}var Te="LineString";typeof E[j].nodes[0]<"u"&&typeof E[j].nodes[E[j].nodes.length-1]<"u"&&E[j].nodes[0].id===E[j].nodes[E[j].nodes.length-1].id&&(typeof E[j].tags<"u"&&u(E[j].tags)||E[j].__is_bounds_placeholder)&&(Te="Polygon",we=[we]);var fe={type:"Feature",id:E[j].type+"/"+E[j].id,properties:{type:E[j].type,id:E[j].id,tags:E[j].tags||{},relations:B.way[E[j].id]||[],meta:T(E[j])},geometry:{type:Te,coordinates:we}};E[j].tainted&&(t.verbose&&console.warn("Way",E[j].type+"/"+E[j].id,"is tainted"),fe.properties.tainted=!0),E[j].__is_bounds_placeholder&&(fe.properties.geometry="bounds"),n?n(Tg(fe)):Te=="LineString"?oe.push(fe):ce.push(fe)}}return n?!0:(ve={type:"FeatureCollection",features:[]},ve.features=ve.features.concat(ce),ve.features=ve.features.concat(oe),ve.features=ve.features.concat(ye),t.flatProperties&&ve.features.forEach(function(Oe){Oe.properties=Cr.merge(Oe.properties.meta,Oe.properties.tags,{id:Oe.properties.type+"/"+Oe.properties.id})}),ve=Tg(ve),ve)}function u(w){var E=t.polygonFeatures;if(typeof E=="function")return E(w);if(w.area==="no")return!1;for(var I in w){var b=w[I],T=E[I];if(!(typeof T>"u")&&b!=="no"&&(T===!0||T.included_values&&T.included_values[b]===!0||T.excluded_values&&T.excluded_values[b]!==!0))return!0}return!1}};function h1(e){for(var t=function(b){return b[0]},n=function(b){return b[b.length-1]},a=function(b,T){return b!==void 0&&T!==void 0&&b.id===T.id},l=[],f,d,u,w,E,I;e.length;)for(f=e.pop().nodes.slice(),l.push(f);e.length&&!a(t(f),n(f));){for(d=t(f),u=n(f),w=0;w<e.length;w++)if(I=e[w].nodes,a(u,t(I))){E=f.push,I=I.slice(1);break}else if(a(u,n(I))){E=f.push,I=I.slice(0,-1).reverse();break}else if(a(d,n(I))){E=f.unshift,I=I.slice(0,-1);break}else if(a(d,t(I))){E=f.unshift,I=I.slice(1).reverse();break}else I=E=null;if(!I)break;e.splice(w,1),E.apply(f,I)}return l}g0.toGeojson=g0;var W9=g0;const H9=bf(W9),f1={type:"FeatureCollection",features:[]},t4=()=>{const[e,t]=vt.useState(!1),n=vt.useCallback(async(d,u,w)=>{var j,se;if(e||(console.log(w),w<16))return f1;t(!0);let E=300;w>17&&(E=200),w>18&&(E=100),w>19&&(E=50),console.log("overpass: loading...");let I="[out:json]";I+=`[timeout:25];
`,I+='nwr["building"]',I+=`(around:${E},${d},${u});
`,I+="out meta geom;",console.log(I);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(I)}`,{});if(b.status!==200)return t(!1),f1;const T=await b.json();console.log("overpass json elements: ",T.elements);const R=H9(T);console.log("overpass osmtogeojson raw: ",R);for await(const K of R.features){if(!K.properties)continue;K.id=K.properties.id.split("/")[1];const Z=(j=T.elements.filter(ae=>K.id?typeof K.id=="number"?ae.id===K.id:ae.id===parseInt(K.id):!1))==null?void 0:j[0];if(Z&&(K.properties.tags=Z.tags,K.properties.nodes=Z.nodes),K.geometry.type==="Polygon"){const ae=Z0(K.geometry.coordinates);var z=e4(ae);K.properties.center=z.geometry.coordinates}K.geometry.type==="Point"&&(K.properties.center=K.geometry.coordinates);const V=K.properties.uid;if(V){let ae=localStorage.getItem(V+"-icon");if(ae===null){const X=await Ua.getUser(V);(se=X.img)!=null&&se.href?(ae=X.img.href,localStorage.setItem(V+"-icon",X.img.href)):localStorage.setItem(V+"-icon","")}K.properties.userIconHref=ae||""}}return console.log("overpass osmtogeojson converted: ",R),console.log("overpass: loaded."),t(!1),R},[]),[a,l]=vt.useState(!1),f=vt.useCallback(async d=>{console.log("overpass: loading...",d),l(!0);const u=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(u);const w=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(u)}`,{});if(w.status!==200){l(!1);return}const E=await w.json();console.log("overpass json parent elements: ",E.elements);const I=250,b=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${I});
      out;
      `;console.log(b);const T=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(b)}`,{});if(T.status!==200){l(!1);return}const R=await T.json();console.log("overpass json child elements: ",R.elements);const z=`
      [out:json]
      [timeout:25];
      node(id:${d.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${I});
      out;
      `;console.log(z);const j=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(z)}`,{});if(j.status!==200){l(!1);return}const se=await j.json();return console.log("overpass json neighbour elements: ",se.elements),l(!1),[...E.elements,...R.elements,...se.elements]},[]);return{fetchOverpassBuildings:n,fetchOverpassAdmin:f,loadingOverpass:e,loadingOverpassAdmin:a}},Z9=()=>yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),yt.jsxs("datalist",{id:"source-list",children:[yt.jsx("option",{value:"survey"}),yt.jsx("option",{value:"local knowledge"}),yt.jsx("option",{value:"extrapolation"}),yt.jsx("option",{value:"estimation from existing data"})]})]}),d1={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},q9=({feature:e,onCancel:t,onSubmit:n})=>{var ve,ye,fe,oe;const{detectCountry:a,loadingCountry:l}=z9(),{fetchOverpassAdmin:f,loadingOverpassAdmin:d}=t4(),u=JSON.parse((ve=e.properties)==null?void 0:ve.center),[w,E]=vt.useState(void 0),[I,b]=vt.useState(),[T,R]=vt.useState(e),[z,j]=vt.useState(!1),[se,K]=vt.useState(!1),[Z,V]=vt.useState(!1),[ae,X]=vt.useState(),[U,P]=vt.useState();vt.useEffect(()=>{j(Ua.isLoggedIn())},[]),vt.useEffect(()=>{(async()=>{var J,re;const ce=await a(u[0],u[1]);if(E(ce),(J=ce==null?void 0:ce.properties)!=null&&J.ISO_A3&&eA[ce.properties.ISO_A3]){const de=eA[ce.properties.ISO_A3];b(de);const we=de.defaultComment+" "+((re=e.properties)==null?void 0:re.id);P(we)}})()},[e]),vt.useEffect(()=>{console.log(T.properties)},[T]);const L=vt.useCallback(async()=>{const ce=await Pk.openReverseGeocoder([u[0],u[1]]);R(J=>{const re={properties:{"addr:province":ce.prefecture,"addr:city":ce.city,...J.properties}};return J.properties=re.properties,J})},[]),B=vt.useCallback(async()=>{if(!T.properties)return;T.properties.nodes;const ce=await f(JSON.parse(T.properties.nodes));console.log("onOverpassReverseGeocode",ce),X(ce)},[T]),Q=vt.useCallback(async ce=>{var Ie,Oe,qe;V(!0),ce.preventDefault();const J=new FormData(ce.currentTarget),re=JSON.parse((Ie=e.properties)==null?void 0:Ie.tags);J.forEach((He,ot)=>{typeof He=="string"&&He.length>0&&ot!=="comment"&&ot!=="source"&&(re[ot]=He)});const de={type:"way",id:e.id,version:(Oe=e.properties)==null?void 0:Oe.version,tags:re,nodes:JSON.parse((qe=e.properties)==null?void 0:qe.nodes)};console.info(JSON.stringify(de,null,2));const we={create:[],modify:[de],delete:[]},Te=J.get("comment");Te&&(d1.comment=Te.toString());const Ne=J.get("source");Ne&&(d1.source=Ne.toString()),await Ua.uploadChangeset(d1,we),V(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),n()},[e]),q=vt.useCallback(()=>{K(!0)},[]);return T.properties?yt.jsxs("div",{children:[yt.jsxs("div",{children:["OSM:"," ",yt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+T.properties.id,target:"_blank",children:T.properties.id})," | ",yt.jsx(Sk,{feature:T}),I&&yt.jsxs("span",{children:[" | ","Address:"," ",yt.jsx(B9,{feature:T,fields:I})]})]}),l?yt.jsx(_u,{icon:wx,spin:!0}):yt.jsx(yt.Fragment,{children:I?yt.jsxs("form",{onSubmit:Q,children:[yt.jsx("div",{className:"flex flex-wrap",children:yt.jsx(c1,{feature:T,fieldOption:I.postcodeField,onChange:q})}),yt.jsx("div",{className:"flex flex-wrap",children:I.mainFields.map(ce=>yt.jsx(c1,{feature:T,fieldOption:ce,onChange:q,suggestList:ae},ce.key))}),yt.jsx("div",{className:"flex flex-wrap",children:I.detailFields.map(ce=>yt.jsx(c1,{feature:T,fieldOption:ce,onChange:q},ce.key))}),yt.jsxs("div",{className:"flex flex-wrap",children:[yt.jsx(Z9,{}),yt.jsx(D9,{defaultValue:U})]}),yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((ye=w==null?void 0:w.properties)==null?void 0:ye.ISO_A3)==="JPN"&&yt.jsx("button",{type:"button",onClick:L,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),yt.jsxs("button",{type:"button",disabled:d,onClick:B,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",d&&yt.jsx(_u,{icon:wx,spin:!0})]}),yt.jsx("button",{disabled:!z||Z||!se,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!z&&yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),yt.jsx(bk,{})]})]})})]}):yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[yt.jsxs("div",{className:"py-2",children:[yt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(fe=w==null?void 0:w.properties)==null?void 0:fe.NAME," (ISO code:",(oe=w==null?void 0:w.properties)==null?void 0:oe.ISO_A3,") does not support yet."]}),yt.jsx("p",{children:yt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function X9(e,t){const[n,a]=vt.useState(e);return vt.useEffect(()=>{const l=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(l)}},[e,t]),n}const K9={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},Y9={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function J9(){const e=vt.useRef(null),[t,n]=vt.useState(),a=X9(t,2500),l=vt.useRef(null),[f,d]=vt.useState({type:"FeatureCollection",features:[]}),[u,w]=vt.useState("auto"),[E,I]=vt.useState(),[b,T]=vt.useState([]),{fetchOverpassBuildings:R,loadingOverpass:z}=t4();vt.useEffect(()=>{setTimeout(()=>{var P;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(P=l.current)==null||P.trigger())},500)},[]);const j=vt.useCallback(P=>{const L=P.target.getCenter(),B=P.target.getZoom();n({zoom:B,latitude:L.lat,longitude:L.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),se=vt.useCallback(P=>{n(P.viewState)},[]),K=vt.useCallback(P=>{n(P.viewState)},[]);vt.useEffect(()=>{(async()=>{if(!a)return;const P=a,L=await R(P.latitude,P.longitude,P.zoom);d(L)})()},[a]);const Z=vt.useCallback(P=>{var ve;w("pointer");const{features:L,point:{x:B,y:Q}}=P,q=L&&L[0];q?((ve=e.current)==null||ve.setFeatureState({source:"buildings-source",id:q.id},{hover:!0}),I({feature:q,x:B,y:Q})):I(void 0)},[]),V=vt.useCallback(P=>{var L;w("auto"),(L=e.current)==null||L.querySourceFeatures("buildings-source").map(B=>{var Q;(Q=e.current)==null||Q.setFeatureState({source:"buildings-source",id:B.id},{hover:!1})}),I(void 0)},[]),ae=vt.useCallback(P=>{var B;X();const L=P.features&&P.features[0];L&&((B=e.current)==null||B.setFeatureState({source:"buildings-source",id:L.id},{select:!0}),T([L]))},[]),X=vt.useCallback(()=>{var P;(P=e.current)==null||P.querySourceFeatures("buildings-source").map(L=>{var B;(B=e.current)==null||B.setFeatureState({source:"buildings-source",id:L.id},{select:!1})}),T([])},[]),U=vt.useMemo(()=>{let P=25;return t&&(P=t.zoom<18?20:t.zoom<19?25:35),f.features.map((L,B)=>!L.properties||!L.properties.center?null:yt.jsx(sz,{style:{cursor:"pointer"},longitude:L.properties.center[0],latitude:L.properties.center[1],anchor:"center",children:yt.jsx(F6,{feature:L,size:P})},`marker-${B}`))},[f,t]);return yt.jsxs("div",{children:[yt.jsx(d6,{}),yt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:yt.jsx(L6,{viewState:t})}),yt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[b.length>0&&yt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:yt.jsx("div",{style:{padding:"10px"},children:b.map(P=>yt.jsx(q9,{feature:P,onCancel:X,onSubmit:X},P.id))})}),yt.jsxs(az,{ref:e,...t,onMove:se,onMoveEnd:K,onLoad:j,interactiveLayerIds:["buildings-layer-fill"],onClick:ae,onMouseEnter:Z,onMouseLeave:V,dragRotate:!1,boxZoom:!1,hash:!0,cursor:u,mapLib:$M,style:{width:"100%",height:"100%"},mapStyle:K9,children:[yt.jsx(hz,{id:"buildings-source",type:"geojson",data:f,children:yt.jsx(cz,{...Y9})}),yt.jsx(lz,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),yt.jsx(uz,{ref:l,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),yt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?yt.jsx(_u,{size:"2x",icon:h6}):z?yt.jsx(_u,{size:"2x",icon:wx,spin:!0}):yt.jsx(_u,{size:"2x",icon:u6})}),U,E&&yt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:E.x+5,top:E.y+5},children:[yt.jsx(Sk,{feature:E.feature}),yt.jsx("br",{}),yt.jsx(R6,{feature:E.feature}),yt.jsx(p6,{feature:E.feature})]})]})]})]})}var r4={},K0={};K0.byteLength=tG;K0.toByteArray=nG;K0.fromByteArray=aG;var Ts=[],la=[],Q9=typeof Uint8Array<"u"?Uint8Array:Array,p1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ih=0,eG=p1.length;Ih<eG;++Ih)Ts[Ih]=p1[Ih],la[p1.charCodeAt(Ih)]=Ih;la[45]=62;la[95]=63;function n4(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var a=n===t?0:4-n%4;return[n,a]}function tG(e){var t=n4(e),n=t[0],a=t[1];return(n+a)*3/4-a}function rG(e,t,n){return(t+n)*3/4-n}function nG(e){var t,n=n4(e),a=n[0],l=n[1],f=new Q9(rG(e,a,l)),d=0,u=l>0?a-4:a,w;for(w=0;w<u;w+=4)t=la[e.charCodeAt(w)]<<18|la[e.charCodeAt(w+1)]<<12|la[e.charCodeAt(w+2)]<<6|la[e.charCodeAt(w+3)],f[d++]=t>>16&255,f[d++]=t>>8&255,f[d++]=t&255;return l===2&&(t=la[e.charCodeAt(w)]<<2|la[e.charCodeAt(w+1)]>>4,f[d++]=t&255),l===1&&(t=la[e.charCodeAt(w)]<<10|la[e.charCodeAt(w+1)]<<4|la[e.charCodeAt(w+2)]>>2,f[d++]=t>>8&255,f[d++]=t&255),f}function iG(e){return Ts[e>>18&63]+Ts[e>>12&63]+Ts[e>>6&63]+Ts[e&63]}function oG(e,t,n){for(var a,l=[],f=t;f<n;f+=3)a=(e[f]<<16&16711680)+(e[f+1]<<8&65280)+(e[f+2]&255),l.push(iG(a));return l.join("")}function aG(e){for(var t,n=e.length,a=n%3,l=[],f=16383,d=0,u=n-a;d<u;d+=f)l.push(oG(e,d,d+f>u?u:d+f));return a===1?(t=e[n-1],l.push(Ts[t>>2]+Ts[t<<4&63]+"==")):a===2&&(t=(e[n-2]<<8)+e[n-1],l.push(Ts[t>>10]+Ts[t>>4&63]+Ts[t<<2&63]+"=")),l.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=K0,n=N0,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=Z,e.INSPECT_MAX_BYTES=50;const l=2147483647;e.kMaxLength=l,u.TYPED_ARRAY_SUPPORT=f(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const le=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(le,k),le.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function d(le){if(le>l)throw new RangeError('The value "'+le+'" is invalid for option "size"');const k=new Uint8Array(le);return Object.setPrototypeOf(k,u.prototype),k}function u(le,k,$){if(typeof le=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(le)}return w(le,k,$)}u.poolSize=8192;function w(le,k,$){if(typeof le=="string")return T(le,k);if(ArrayBuffer.isView(le))return z(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(D(le,ArrayBuffer)||le&&D(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(D(le,SharedArrayBuffer)||le&&D(le.buffer,SharedArrayBuffer)))return j(le,k,$);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ee=le.valueOf&&le.valueOf();if(Ee!=null&&Ee!==le)return u.from(Ee,k,$);const We=se(le);if(We)return We;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return u.from(le[Symbol.toPrimitive]("string"),k,$);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}u.from=function(le,k,$){return w(le,k,$)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function E(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function I(le,k,$){return E(le),le<=0?d(le):k!==void 0?typeof $=="string"?d(le).fill(k,$):d(le).fill(k):d(le)}u.alloc=function(le,k,$){return I(le,k,$)};function b(le){return E(le),d(le<0?0:K(le)|0)}u.allocUnsafe=function(le){return b(le)},u.allocUnsafeSlow=function(le){return b(le)};function T(le,k){if((typeof k!="string"||k==="")&&(k="utf8"),!u.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const $=V(le,k)|0;let Ee=d($);const We=Ee.write(le,k);return We!==$&&(Ee=Ee.slice(0,We)),Ee}function R(le){const k=le.length<0?0:K(le.length)|0,$=d(k);for(let Ee=0;Ee<k;Ee+=1)$[Ee]=le[Ee]&255;return $}function z(le){if(D(le,Uint8Array)){const k=new Uint8Array(le);return j(k.buffer,k.byteOffset,k.byteLength)}return R(le)}function j(le,k,$){if(k<0||le.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<k+($||0))throw new RangeError('"length" is outside of buffer bounds');let Ee;return k===void 0&&$===void 0?Ee=new Uint8Array(le):$===void 0?Ee=new Uint8Array(le,k):Ee=new Uint8Array(le,k,$),Object.setPrototypeOf(Ee,u.prototype),Ee}function se(le){if(u.isBuffer(le)){const k=K(le.length)|0,$=d(k);return $.length===0||le.copy($,0,0,k),$}if(le.length!==void 0)return typeof le.length!="number"||xe(le.length)?d(0):R(le);if(le.type==="Buffer"&&Array.isArray(le.data))return R(le.data)}function K(le){if(le>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return le|0}function Z(le){return+le!=le&&(le=0),u.alloc(+le)}u.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==u.prototype},u.compare=function(k,$){if(D(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),D($,Uint8Array)&&($=u.from($,$.offset,$.byteLength)),!u.isBuffer(k)||!u.isBuffer($))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===$)return 0;let Ee=k.length,We=$.length;for(let nt=0,Ve=Math.min(Ee,We);nt<Ve;++nt)if(k[nt]!==$[nt]){Ee=k[nt],We=$[nt];break}return Ee<We?-1:We<Ee?1:0},u.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(k,$){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return u.alloc(0);let Ee;if($===void 0)for($=0,Ee=0;Ee<k.length;++Ee)$+=k[Ee].length;const We=u.allocUnsafe($);let nt=0;for(Ee=0;Ee<k.length;++Ee){let Ve=k[Ee];if(D(Ve,Uint8Array))nt+Ve.length>We.length?(u.isBuffer(Ve)||(Ve=u.from(Ve)),Ve.copy(We,nt)):Uint8Array.prototype.set.call(We,Ve,nt);else if(u.isBuffer(Ve))Ve.copy(We,nt);else throw new TypeError('"list" argument must be an Array of Buffers');nt+=Ve.length}return We};function V(le,k){if(u.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||D(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);const $=le.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&$===0)return 0;let We=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return $;case"utf8":case"utf-8":return wr(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $*2;case"hex":return $>>>1;case"base64":return Se(le).length;default:if(We)return Ee?-1:wr(le).length;k=(""+k).toLowerCase(),We=!0}}u.byteLength=V;function ae(le,k,$){let Ee=!1;if((k===void 0||k<0)&&(k=0),k>this.length||(($===void 0||$>this.length)&&($=this.length),$<=0)||($>>>=0,k>>>=0,$<=k))return"";for(le||(le="utf8");;)switch(le){case"hex":return de(this,k,$);case"utf8":case"utf-8":return fe(this,k,$);case"ascii":return J(this,k,$);case"latin1":case"binary":return re(this,k,$);case"base64":return ye(this,k,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,k,$);default:if(Ee)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Ee=!0}}u.prototype._isBuffer=!0;function X(le,k,$){const Ee=le[k];le[k]=le[$],le[$]=Ee}u.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let $=0;$<k;$+=2)X(this,$,$+1);return this},u.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let $=0;$<k;$+=4)X(this,$,$+3),X(this,$+1,$+2);return this},u.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let $=0;$<k;$+=8)X(this,$,$+7),X(this,$+1,$+6),X(this,$+2,$+5),X(this,$+3,$+4);return this},u.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?fe(this,0,k):ae.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(k){if(!u.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:u.compare(this,k)===0},u.prototype.inspect=function(){let k="";const $=e.INSPECT_MAX_BYTES;return k=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim(),this.length>$&&(k+=" ... "),"<Buffer "+k+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(k,$,Ee,We,nt){if(D(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),!u.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if($===void 0&&($=0),Ee===void 0&&(Ee=k?k.length:0),We===void 0&&(We=0),nt===void 0&&(nt=this.length),$<0||Ee>k.length||We<0||nt>this.length)throw new RangeError("out of range index");if(We>=nt&&$>=Ee)return 0;if(We>=nt)return-1;if($>=Ee)return 1;if($>>>=0,Ee>>>=0,We>>>=0,nt>>>=0,this===k)return 0;let Ve=nt-We,Et=Ee-$;const Ot=Math.min(Ve,Et),dr=this.slice(We,nt),br=k.slice($,Ee);for(let Ft=0;Ft<Ot;++Ft)if(dr[Ft]!==br[Ft]){Ve=dr[Ft],Et=br[Ft];break}return Ve<Et?-1:Et<Ve?1:0};function U(le,k,$,Ee,We){if(le.length===0)return-1;if(typeof $=="string"?(Ee=$,$=0):$>2147483647?$=2147483647:$<-2147483648&&($=-2147483648),$=+$,xe($)&&($=We?0:le.length-1),$<0&&($=le.length+$),$>=le.length){if(We)return-1;$=le.length-1}else if($<0)if(We)$=0;else return-1;if(typeof k=="string"&&(k=u.from(k,Ee)),u.isBuffer(k))return k.length===0?-1:P(le,k,$,Ee,We);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?We?Uint8Array.prototype.indexOf.call(le,k,$):Uint8Array.prototype.lastIndexOf.call(le,k,$):P(le,[k],$,Ee,We);throw new TypeError("val must be string, number or Buffer")}function P(le,k,$,Ee,We){let nt=1,Ve=le.length,Et=k.length;if(Ee!==void 0&&(Ee=String(Ee).toLowerCase(),Ee==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(le.length<2||k.length<2)return-1;nt=2,Ve/=2,Et/=2,$/=2}function Ot(br,Ft){return nt===1?br[Ft]:br.readUInt16BE(Ft*nt)}let dr;if(We){let br=-1;for(dr=$;dr<Ve;dr++)if(Ot(le,dr)===Ot(k,br===-1?0:dr-br)){if(br===-1&&(br=dr),dr-br+1===Et)return br*nt}else br!==-1&&(dr-=dr-br),br=-1}else for($+Et>Ve&&($=Ve-Et),dr=$;dr>=0;dr--){let br=!0;for(let Ft=0;Ft<Et;Ft++)if(Ot(le,dr+Ft)!==Ot(k,Ft)){br=!1;break}if(br)return dr}return-1}u.prototype.includes=function(k,$,Ee){return this.indexOf(k,$,Ee)!==-1},u.prototype.indexOf=function(k,$,Ee){return U(this,k,$,Ee,!0)},u.prototype.lastIndexOf=function(k,$,Ee){return U(this,k,$,Ee,!1)};function L(le,k,$,Ee){$=Number($)||0;const We=le.length-$;Ee?(Ee=Number(Ee),Ee>We&&(Ee=We)):Ee=We;const nt=k.length;Ee>nt/2&&(Ee=nt/2);let Ve;for(Ve=0;Ve<Ee;++Ve){const Et=parseInt(k.substr(Ve*2,2),16);if(xe(Et))return Ve;le[$+Ve]=Et}return Ve}function B(le,k,$,Ee){return N(wr(k,le.length-$),le,$,Ee)}function Q(le,k,$,Ee){return N(cr(k),le,$,Ee)}function q(le,k,$,Ee){return N(Se(k),le,$,Ee)}function ve(le,k,$,Ee){return N(qt(k,le.length-$),le,$,Ee)}u.prototype.write=function(k,$,Ee,We){if($===void 0)We="utf8",Ee=this.length,$=0;else if(Ee===void 0&&typeof $=="string")We=$,Ee=this.length,$=0;else if(isFinite($))$=$>>>0,isFinite(Ee)?(Ee=Ee>>>0,We===void 0&&(We="utf8")):(We=Ee,Ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const nt=this.length-$;if((Ee===void 0||Ee>nt)&&(Ee=nt),k.length>0&&(Ee<0||$<0)||$>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");let Ve=!1;for(;;)switch(We){case"hex":return L(this,k,$,Ee);case"utf8":case"utf-8":return B(this,k,$,Ee);case"ascii":case"latin1":case"binary":return Q(this,k,$,Ee);case"base64":return q(this,k,$,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,k,$,Ee);default:if(Ve)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),Ve=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ye(le,k,$){return k===0&&$===le.length?t.fromByteArray(le):t.fromByteArray(le.slice(k,$))}function fe(le,k,$){$=Math.min(le.length,$);const Ee=[];let We=k;for(;We<$;){const nt=le[We];let Ve=null,Et=nt>239?4:nt>223?3:nt>191?2:1;if(We+Et<=$){let Ot,dr,br,Ft;switch(Et){case 1:nt<128&&(Ve=nt);break;case 2:Ot=le[We+1],(Ot&192)===128&&(Ft=(nt&31)<<6|Ot&63,Ft>127&&(Ve=Ft));break;case 3:Ot=le[We+1],dr=le[We+2],(Ot&192)===128&&(dr&192)===128&&(Ft=(nt&15)<<12|(Ot&63)<<6|dr&63,Ft>2047&&(Ft<55296||Ft>57343)&&(Ve=Ft));break;case 4:Ot=le[We+1],dr=le[We+2],br=le[We+3],(Ot&192)===128&&(dr&192)===128&&(br&192)===128&&(Ft=(nt&15)<<18|(Ot&63)<<12|(dr&63)<<6|br&63,Ft>65535&&Ft<1114112&&(Ve=Ft))}}Ve===null?(Ve=65533,Et=1):Ve>65535&&(Ve-=65536,Ee.push(Ve>>>10&1023|55296),Ve=56320|Ve&1023),Ee.push(Ve),We+=Et}return ce(Ee)}const oe=4096;function ce(le){const k=le.length;if(k<=oe)return String.fromCharCode.apply(String,le);let $="",Ee=0;for(;Ee<k;)$+=String.fromCharCode.apply(String,le.slice(Ee,Ee+=oe));return $}function J(le,k,$){let Ee="";$=Math.min(le.length,$);for(let We=k;We<$;++We)Ee+=String.fromCharCode(le[We]&127);return Ee}function re(le,k,$){let Ee="";$=Math.min(le.length,$);for(let We=k;We<$;++We)Ee+=String.fromCharCode(le[We]);return Ee}function de(le,k,$){const Ee=le.length;(!k||k<0)&&(k=0),(!$||$<0||$>Ee)&&($=Ee);let We="";for(let nt=k;nt<$;++nt)We+=Xe[le[nt]];return We}function we(le,k,$){const Ee=le.slice(k,$);let We="";for(let nt=0;nt<Ee.length-1;nt+=2)We+=String.fromCharCode(Ee[nt]+Ee[nt+1]*256);return We}u.prototype.slice=function(k,$){const Ee=this.length;k=~~k,$=$===void 0?Ee:~~$,k<0?(k+=Ee,k<0&&(k=0)):k>Ee&&(k=Ee),$<0?($+=Ee,$<0&&($=0)):$>Ee&&($=Ee),$<k&&($=k);const We=this.subarray(k,$);return Object.setPrototypeOf(We,u.prototype),We};function Te(le,k,$){if(le%1!==0||le<0)throw new RangeError("offset is not uint");if(le+k>$)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(k,$,Ee){k=k>>>0,$=$>>>0,Ee||Te(k,$,this.length);let We=this[k],nt=1,Ve=0;for(;++Ve<$&&(nt*=256);)We+=this[k+Ve]*nt;return We},u.prototype.readUintBE=u.prototype.readUIntBE=function(k,$,Ee){k=k>>>0,$=$>>>0,Ee||Te(k,$,this.length);let We=this[k+--$],nt=1;for(;$>0&&(nt*=256);)We+=this[k+--$]*nt;return We},u.prototype.readUint8=u.prototype.readUInt8=function(k,$){return k=k>>>0,$||Te(k,1,this.length),this[k]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(k,$){return k=k>>>0,$||Te(k,2,this.length),this[k]|this[k+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(k,$){return k=k>>>0,$||Te(k,2,this.length),this[k]<<8|this[k+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(k,$){return k=k>>>0,$||Te(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(k,$){return k=k>>>0,$||Te(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},u.prototype.readBigUInt64LE=tt(function(k){k=k>>>0,Ht(k,"offset");const $=this[k],Ee=this[k+7];($===void 0||Ee===void 0)&&zt(k,this.length-8);const We=$+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,nt=this[++k]+this[++k]*2**8+this[++k]*2**16+Ee*2**24;return BigInt(We)+(BigInt(nt)<<BigInt(32))}),u.prototype.readBigUInt64BE=tt(function(k){k=k>>>0,Ht(k,"offset");const $=this[k],Ee=this[k+7];($===void 0||Ee===void 0)&&zt(k,this.length-8);const We=$*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],nt=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+Ee;return(BigInt(We)<<BigInt(32))+BigInt(nt)}),u.prototype.readIntLE=function(k,$,Ee){k=k>>>0,$=$>>>0,Ee||Te(k,$,this.length);let We=this[k],nt=1,Ve=0;for(;++Ve<$&&(nt*=256);)We+=this[k+Ve]*nt;return nt*=128,We>=nt&&(We-=Math.pow(2,8*$)),We},u.prototype.readIntBE=function(k,$,Ee){k=k>>>0,$=$>>>0,Ee||Te(k,$,this.length);let We=$,nt=1,Ve=this[k+--We];for(;We>0&&(nt*=256);)Ve+=this[k+--We]*nt;return nt*=128,Ve>=nt&&(Ve-=Math.pow(2,8*$)),Ve},u.prototype.readInt8=function(k,$){return k=k>>>0,$||Te(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},u.prototype.readInt16LE=function(k,$){k=k>>>0,$||Te(k,2,this.length);const Ee=this[k]|this[k+1]<<8;return Ee&32768?Ee|4294901760:Ee},u.prototype.readInt16BE=function(k,$){k=k>>>0,$||Te(k,2,this.length);const Ee=this[k+1]|this[k]<<8;return Ee&32768?Ee|4294901760:Ee},u.prototype.readInt32LE=function(k,$){return k=k>>>0,$||Te(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},u.prototype.readInt32BE=function(k,$){return k=k>>>0,$||Te(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},u.prototype.readBigInt64LE=tt(function(k){k=k>>>0,Ht(k,"offset");const $=this[k],Ee=this[k+7];($===void 0||Ee===void 0)&&zt(k,this.length-8);const We=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(Ee<<24);return(BigInt(We)<<BigInt(32))+BigInt($+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),u.prototype.readBigInt64BE=tt(function(k){k=k>>>0,Ht(k,"offset");const $=this[k],Ee=this[k+7];($===void 0||Ee===void 0)&&zt(k,this.length-8);const We=($<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(We)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+Ee)}),u.prototype.readFloatLE=function(k,$){return k=k>>>0,$||Te(k,4,this.length),n.read(this,k,!0,23,4)},u.prototype.readFloatBE=function(k,$){return k=k>>>0,$||Te(k,4,this.length),n.read(this,k,!1,23,4)},u.prototype.readDoubleLE=function(k,$){return k=k>>>0,$||Te(k,8,this.length),n.read(this,k,!0,52,8)},u.prototype.readDoubleBE=function(k,$){return k=k>>>0,$||Te(k,8,this.length),n.read(this,k,!1,52,8)};function Ne(le,k,$,Ee,We,nt){if(!u.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>We||k<nt)throw new RangeError('"value" argument is out of bounds');if($+Ee>le.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(k,$,Ee,We){if(k=+k,$=$>>>0,Ee=Ee>>>0,!We){const Et=Math.pow(2,8*Ee)-1;Ne(this,k,$,Ee,Et,0)}let nt=1,Ve=0;for(this[$]=k&255;++Ve<Ee&&(nt*=256);)this[$+Ve]=k/nt&255;return $+Ee},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(k,$,Ee,We){if(k=+k,$=$>>>0,Ee=Ee>>>0,!We){const Et=Math.pow(2,8*Ee)-1;Ne(this,k,$,Ee,Et,0)}let nt=Ee-1,Ve=1;for(this[$+nt]=k&255;--nt>=0&&(Ve*=256);)this[$+nt]=k/Ve&255;return $+Ee},u.prototype.writeUint8=u.prototype.writeUInt8=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ne(this,k,$,1,255,0),this[$]=k&255,$+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ne(this,k,$,2,65535,0),this[$]=k&255,this[$+1]=k>>>8,$+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ne(this,k,$,2,65535,0),this[$]=k>>>8,this[$+1]=k&255,$+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ne(this,k,$,4,4294967295,0),this[$+3]=k>>>24,this[$+2]=k>>>16,this[$+1]=k>>>8,this[$]=k&255,$+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ne(this,k,$,4,4294967295,0),this[$]=k>>>24,this[$+1]=k>>>16,this[$+2]=k>>>8,this[$+3]=k&255,$+4};function Ie(le,k,$,Ee,We){wt(k,Ee,We,le,$,7);let nt=Number(k&BigInt(4294967295));le[$++]=nt,nt=nt>>8,le[$++]=nt,nt=nt>>8,le[$++]=nt,nt=nt>>8,le[$++]=nt;let Ve=Number(k>>BigInt(32)&BigInt(4294967295));return le[$++]=Ve,Ve=Ve>>8,le[$++]=Ve,Ve=Ve>>8,le[$++]=Ve,Ve=Ve>>8,le[$++]=Ve,$}function Oe(le,k,$,Ee,We){wt(k,Ee,We,le,$,7);let nt=Number(k&BigInt(4294967295));le[$+7]=nt,nt=nt>>8,le[$+6]=nt,nt=nt>>8,le[$+5]=nt,nt=nt>>8,le[$+4]=nt;let Ve=Number(k>>BigInt(32)&BigInt(4294967295));return le[$+3]=Ve,Ve=Ve>>8,le[$+2]=Ve,Ve=Ve>>8,le[$+1]=Ve,Ve=Ve>>8,le[$]=Ve,$+8}u.prototype.writeBigUInt64LE=tt(function(k,$=0){return Ie(this,k,$,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=tt(function(k,$=0){return Oe(this,k,$,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(k,$,Ee,We){if(k=+k,$=$>>>0,!We){const Ot=Math.pow(2,8*Ee-1);Ne(this,k,$,Ee,Ot-1,-Ot)}let nt=0,Ve=1,Et=0;for(this[$]=k&255;++nt<Ee&&(Ve*=256);)k<0&&Et===0&&this[$+nt-1]!==0&&(Et=1),this[$+nt]=(k/Ve>>0)-Et&255;return $+Ee},u.prototype.writeIntBE=function(k,$,Ee,We){if(k=+k,$=$>>>0,!We){const Ot=Math.pow(2,8*Ee-1);Ne(this,k,$,Ee,Ot-1,-Ot)}let nt=Ee-1,Ve=1,Et=0;for(this[$+nt]=k&255;--nt>=0&&(Ve*=256);)k<0&&Et===0&&this[$+nt+1]!==0&&(Et=1),this[$+nt]=(k/Ve>>0)-Et&255;return $+Ee},u.prototype.writeInt8=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ne(this,k,$,1,127,-128),k<0&&(k=255+k+1),this[$]=k&255,$+1},u.prototype.writeInt16LE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ne(this,k,$,2,32767,-32768),this[$]=k&255,this[$+1]=k>>>8,$+2},u.prototype.writeInt16BE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ne(this,k,$,2,32767,-32768),this[$]=k>>>8,this[$+1]=k&255,$+2},u.prototype.writeInt32LE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ne(this,k,$,4,2147483647,-2147483648),this[$]=k&255,this[$+1]=k>>>8,this[$+2]=k>>>16,this[$+3]=k>>>24,$+4},u.prototype.writeInt32BE=function(k,$,Ee){return k=+k,$=$>>>0,Ee||Ne(this,k,$,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[$]=k>>>24,this[$+1]=k>>>16,this[$+2]=k>>>8,this[$+3]=k&255,$+4},u.prototype.writeBigInt64LE=tt(function(k,$=0){return Ie(this,k,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=tt(function(k,$=0){return Oe(this,k,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function qe(le,k,$,Ee,We,nt){if($+Ee>le.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("Index out of range")}function He(le,k,$,Ee,We){return k=+k,$=$>>>0,We||qe(le,k,$,4),n.write(le,k,$,Ee,23,4),$+4}u.prototype.writeFloatLE=function(k,$,Ee){return He(this,k,$,!0,Ee)},u.prototype.writeFloatBE=function(k,$,Ee){return He(this,k,$,!1,Ee)};function ot(le,k,$,Ee,We){return k=+k,$=$>>>0,We||qe(le,k,$,8),n.write(le,k,$,Ee,52,8),$+8}u.prototype.writeDoubleLE=function(k,$,Ee){return ot(this,k,$,!0,Ee)},u.prototype.writeDoubleBE=function(k,$,Ee){return ot(this,k,$,!1,Ee)},u.prototype.copy=function(k,$,Ee,We){if(!u.isBuffer(k))throw new TypeError("argument should be a Buffer");if(Ee||(Ee=0),!We&&We!==0&&(We=this.length),$>=k.length&&($=k.length),$||($=0),We>0&&We<Ee&&(We=Ee),We===Ee||k.length===0||this.length===0)return 0;if($<0)throw new RangeError("targetStart out of bounds");if(Ee<0||Ee>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),k.length-$<We-Ee&&(We=k.length-$+Ee);const nt=We-Ee;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin($,Ee,We):Uint8Array.prototype.set.call(k,this.subarray(Ee,We),$),nt},u.prototype.fill=function(k,$,Ee,We){if(typeof k=="string"){if(typeof $=="string"?(We=$,$=0,Ee=this.length):typeof Ee=="string"&&(We=Ee,Ee=this.length),We!==void 0&&typeof We!="string")throw new TypeError("encoding must be a string");if(typeof We=="string"&&!u.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(k.length===1){const Ve=k.charCodeAt(0);(We==="utf8"&&Ve<128||We==="latin1")&&(k=Ve)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if($<0||this.length<$||this.length<Ee)throw new RangeError("Out of range index");if(Ee<=$)return this;$=$>>>0,Ee=Ee===void 0?this.length:Ee>>>0,k||(k=0);let nt;if(typeof k=="number")for(nt=$;nt<Ee;++nt)this[nt]=k;else{const Ve=u.isBuffer(k)?k:u.from(k,We),Et=Ve.length;if(Et===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(nt=0;nt<Ee-$;++nt)this[nt+$]=Ve[nt%Et]}return this};const ht={};function xt(le,k,$){ht[le]=class extends ${constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${le}]`,this.stack,delete this.name}get code(){return le}set code(We){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:We,writable:!0})}toString(){return`${this.name} [${le}]: ${this.message}`}}}xt("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?`${le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xt("ERR_INVALID_ARG_TYPE",function(le,k){return`The "${le}" argument must be of type number. Received type ${typeof k}`},TypeError),xt("ERR_OUT_OF_RANGE",function(le,k,$){let Ee=`The value of "${le}" is out of range.`,We=$;return Number.isInteger($)&&Math.abs($)>2**32?We=Mt(String($)):typeof $=="bigint"&&(We=String($),($>BigInt(2)**BigInt(32)||$<-(BigInt(2)**BigInt(32)))&&(We=Mt(We)),We+="n"),Ee+=` It must be ${k}. Received ${We}`,Ee},RangeError);function Mt(le){let k="",$=le.length;const Ee=le[0]==="-"?1:0;for(;$>=Ee+4;$-=3)k=`_${le.slice($-3,$)}${k}`;return`${le.slice(0,$)}${k}`}function pt(le,k,$){Ht(k,"offset"),(le[k]===void 0||le[k+$]===void 0)&&zt(k,le.length-($+1))}function wt(le,k,$,Ee,We,nt){if(le>$||le<k){const Ve=typeof k=="bigint"?"n":"";let Et;throw nt>3?k===0||k===BigInt(0)?Et=`>= 0${Ve} and < 2${Ve} ** ${(nt+1)*8}${Ve}`:Et=`>= -(2${Ve} ** ${(nt+1)*8-1}${Ve}) and < 2 ** ${(nt+1)*8-1}${Ve}`:Et=`>= ${k}${Ve} and <= ${$}${Ve}`,new ht.ERR_OUT_OF_RANGE("value",Et,le)}pt(Ee,We,nt)}function Ht(le,k){if(typeof le!="number")throw new ht.ERR_INVALID_ARG_TYPE(k,"number",le)}function zt(le,k,$){throw Math.floor(le)!==le?(Ht(le,$),new ht.ERR_OUT_OF_RANGE($||"offset","an integer",le)):k<0?new ht.ERR_BUFFER_OUT_OF_BOUNDS:new ht.ERR_OUT_OF_RANGE($||"offset",`>= ${$?1:0} and <= ${k}`,le)}const ur=/[^+/0-9A-Za-z-_]/g;function it(le){if(le=le.split("=")[0],le=le.trim().replace(ur,""),le.length<2)return"";for(;le.length%4!==0;)le=le+"=";return le}function wr(le,k){k=k||1/0;let $;const Ee=le.length;let We=null;const nt=[];for(let Ve=0;Ve<Ee;++Ve){if($=le.charCodeAt(Ve),$>55295&&$<57344){if(!We){if($>56319){(k-=3)>-1&&nt.push(239,191,189);continue}else if(Ve+1===Ee){(k-=3)>-1&&nt.push(239,191,189);continue}We=$;continue}if($<56320){(k-=3)>-1&&nt.push(239,191,189),We=$;continue}$=(We-55296<<10|$-56320)+65536}else We&&(k-=3)>-1&&nt.push(239,191,189);if(We=null,$<128){if((k-=1)<0)break;nt.push($)}else if($<2048){if((k-=2)<0)break;nt.push($>>6|192,$&63|128)}else if($<65536){if((k-=3)<0)break;nt.push($>>12|224,$>>6&63|128,$&63|128)}else if($<1114112){if((k-=4)<0)break;nt.push($>>18|240,$>>12&63|128,$>>6&63|128,$&63|128)}else throw new Error("Invalid code point")}return nt}function cr(le){const k=[];for(let $=0;$<le.length;++$)k.push(le.charCodeAt($)&255);return k}function qt(le,k){let $,Ee,We;const nt=[];for(let Ve=0;Ve<le.length&&!((k-=2)<0);++Ve)$=le.charCodeAt(Ve),Ee=$>>8,We=$%256,nt.push(We),nt.push(Ee);return nt}function Se(le){return t.toByteArray(it(le))}function N(le,k,$,Ee){let We;for(We=0;We<Ee&&!(We+$>=k.length||We>=le.length);++We)k[We+$]=le[We];return We}function D(le,k){return le instanceof k||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===k.name}function xe(le){return le!==le}const Xe=function(){const le="0123456789abcdef",k=new Array(256);for(let $=0;$<16;++$){const Ee=$*16;for(let We=0;We<16;++We)k[Ee+We]=le[$]+le[We]}return k}();function tt(le){return typeof BigInt>"u"?ct:le}function ct(){throw new Error("BigInt not supported")}})(r4);window.Buffer=r4.Buffer;wL.render(yt.jsx(Ew.StrictMode,{children:yt.jsx(J9,{})}),document.getElementById("root"));

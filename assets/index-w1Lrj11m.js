function Ek(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(a,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const g of d.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function i(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(c){if(c.ep)return;c.ep=!0;const d=i(c);fetch(c.href,d)}})();var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function G_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var hE={exports:{}},zg={},fE={exports:{}},Nn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fd=Symbol.for("react.element"),Tk=Symbol.for("react.portal"),Ck=Symbol.for("react.fragment"),Ik=Symbol.for("react.strict_mode"),Ak=Symbol.for("react.profiler"),Pk=Symbol.for("react.provider"),kk=Symbol.for("react.context"),Mk=Symbol.for("react.forward_ref"),Lk=Symbol.for("react.suspense"),zk=Symbol.for("react.memo"),Fk=Symbol.for("react.lazy"),cb=Symbol.iterator;function Ok(e){return e===null||typeof e!="object"?null:(e=cb&&e[cb]||e["@@iterator"],typeof e=="function"?e:null)}var dE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pE=Object.assign,mE={};function Ph(e,t,i){this.props=e,this.context=t,this.refs=mE,this.updater=i||dE}Ph.prototype.isReactComponent={};Ph.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ph.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function gE(){}gE.prototype=Ph.prototype;function Z_(e,t,i){this.props=e,this.context=t,this.refs=mE,this.updater=i||dE}var H_=Z_.prototype=new gE;H_.constructor=Z_;pE(H_,Ph.prototype);H_.isPureReactComponent=!0;var hb=Array.isArray,yE=Object.prototype.hasOwnProperty,W_={current:null},vE={key:!0,ref:!0,__self:!0,__source:!0};function _E(e,t,i){var a,c={},d=null,g=null;if(t!=null)for(a in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(d=""+t.key),t)yE.call(t,a)&&!vE.hasOwnProperty(a)&&(c[a]=t[a]);var l=arguments.length-2;if(l===1)c.children=i;else if(1<l){for(var b=Array(l),w=0;w<l;w++)b[w]=arguments[w+2];c.children=b}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)c[a]===void 0&&(c[a]=l[a]);return{$$typeof:Fd,type:e,key:d,ref:g,props:c,_owner:W_.current}}function Rk(e,t){return{$$typeof:Fd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function X_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fd}function jk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var fb=/\/+/g;function t0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jk(""+e.key):t.toString(36)}function cm(e,t,i,a,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(d){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case Fd:case Tk:g=!0}}if(g)return g=e,c=c(g),e=a===""?"."+t0(g,0):a,hb(c)?(i="",e!=null&&(i=e.replace(fb,"$&/")+"/"),cm(c,t,i,"",function(w){return w})):c!=null&&(X_(c)&&(c=Rk(c,i+(!c.key||g&&g.key===c.key?"":(""+c.key).replace(fb,"$&/")+"/")+e)),t.push(c)),1;if(g=0,a=a===""?".":a+":",hb(e))for(var l=0;l<e.length;l++){d=e[l];var b=a+t0(d,l);g+=cm(d,t,i,b,c)}else if(b=Ok(e),typeof b=="function")for(e=b.call(e),l=0;!(d=e.next()).done;)d=d.value,b=a+t0(d,l++),g+=cm(d,t,i,b,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function Ip(e,t,i){if(e==null)return e;var a=[],c=0;return cm(e,a,"","",function(d){return t.call(i,d,c++)}),a}function Dk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var go={current:null},hm={transition:null},Bk={ReactCurrentDispatcher:go,ReactCurrentBatchConfig:hm,ReactCurrentOwner:W_};Nn.Children={map:Ip,forEach:function(e,t,i){Ip(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Ip(e,function(){t++}),t},toArray:function(e){return Ip(e,function(t){return t})||[]},only:function(e){if(!X_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nn.Component=Ph;Nn.Fragment=Ck;Nn.Profiler=Ak;Nn.PureComponent=Z_;Nn.StrictMode=Ik;Nn.Suspense=Lk;Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bk;Nn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=pE({},e.props),c=e.key,d=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,g=W_.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)yE.call(t,b)&&!vE.hasOwnProperty(b)&&(a[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)a.children=i;else if(1<b){l=Array(b);for(var w=0;w<b;w++)l[w]=arguments[w+2];a.children=l}return{$$typeof:Fd,type:e.type,key:c,ref:d,props:a,_owner:g}};Nn.createContext=function(e){return e={$$typeof:kk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Pk,_context:e},e.Consumer=e};Nn.createElement=_E;Nn.createFactory=function(e){var t=_E.bind(null,e);return t.type=e,t};Nn.createRef=function(){return{current:null}};Nn.forwardRef=function(e){return{$$typeof:Mk,render:e}};Nn.isValidElement=X_;Nn.lazy=function(e){return{$$typeof:Fk,_payload:{_status:-1,_result:e},_init:Dk}};Nn.memo=function(e,t){return{$$typeof:zk,type:e,compare:t===void 0?null:t}};Nn.startTransition=function(e){var t=hm.transition;hm.transition={};try{e()}finally{hm.transition=t}};Nn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Nn.useCallback=function(e,t){return go.current.useCallback(e,t)};Nn.useContext=function(e){return go.current.useContext(e)};Nn.useDebugValue=function(){};Nn.useDeferredValue=function(e){return go.current.useDeferredValue(e)};Nn.useEffect=function(e,t){return go.current.useEffect(e,t)};Nn.useId=function(){return go.current.useId()};Nn.useImperativeHandle=function(e,t,i){return go.current.useImperativeHandle(e,t,i)};Nn.useInsertionEffect=function(e,t){return go.current.useInsertionEffect(e,t)};Nn.useLayoutEffect=function(e,t){return go.current.useLayoutEffect(e,t)};Nn.useMemo=function(e,t){return go.current.useMemo(e,t)};Nn.useReducer=function(e,t,i){return go.current.useReducer(e,t,i)};Nn.useRef=function(e){return go.current.useRef(e)};Nn.useState=function(e){return go.current.useState(e)};Nn.useSyncExternalStore=function(e,t,i){return go.current.useSyncExternalStore(e,t,i)};Nn.useTransition=function(){return go.current.useTransition()};Nn.version="18.2.0";fE.exports=Nn;var yt=fE.exports;const q_=zd(yt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nk=yt,Uk=Symbol.for("react.element"),$k=Symbol.for("react.fragment"),Vk=Object.prototype.hasOwnProperty,Gk=Nk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zk={key:!0,ref:!0,__self:!0,__source:!0};function xE(e,t,i){var a,c={},d=null,g=null;i!==void 0&&(d=""+i),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(g=t.ref);for(a in t)Vk.call(t,a)&&!Zk.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:Uk,type:e,key:d,ref:g,props:c,_owner:Gk.current}}zg.Fragment=$k;zg.jsx=xE;zg.jsxs=xE;hE.exports=zg;var pt=hE.exports,wE={exports:{}},Vo={},bE={exports:{}},SE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ie,ye){var Te=ie.length;ie.push(ye);e:for(;0<Te;){var Se=Te-1>>>1,$e=ie[Se];if(0<c($e,ye))ie[Se]=ye,ie[Te]=$e,Te=Se;else break e}}function i(ie){return ie.length===0?null:ie[0]}function a(ie){if(ie.length===0)return null;var ye=ie[0],Te=ie.pop();if(Te!==ye){ie[0]=Te;e:for(var Se=0,$e=ie.length,Pe=$e>>>1;Se<Pe;){var ze=2*(Se+1)-1,Xe=ie[ze],Ze=ze+1,nt=ie[Ze];if(0>c(Xe,Te))Ze<$e&&0>c(nt,Xe)?(ie[Se]=nt,ie[Ze]=Te,Se=Ze):(ie[Se]=Xe,ie[ze]=Te,Se=ze);else if(Ze<$e&&0>c(nt,Te))ie[Se]=nt,ie[Ze]=Te,Se=Ze;else break e}}return ye}function c(ie,ye){var Te=ie.sortIndex-ye.sortIndex;return Te!==0?Te:ie.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var g=Date,l=g.now();e.unstable_now=function(){return g.now()-l}}var b=[],w=[],I=1,C=null,k=3,R=!1,J=!1,Y=!1,de=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(ie){for(var ye=i(w);ye!==null;){if(ye.callback===null)a(w);else if(ye.startTime<=ie)a(w),ye.sortIndex=ye.expirationTime,t(b,ye);else break;ye=i(w)}}function ne(ie){if(Y=!1,D(ie),!J)if(i(b)!==null)J=!0,ue(Z);else{var ye=i(w);ye!==null&&re(ne,ye.startTime-ie)}}function Z(ie,ye){J=!1,Y&&(Y=!1,G(M),M=-1),R=!0;var Te=k;try{for(D(ye),C=i(b);C!==null&&(!(C.expirationTime>ye)||ie&&!ee());){var Se=C.callback;if(typeof Se=="function"){C.callback=null,k=C.priorityLevel;var $e=Se(C.expirationTime<=ye);ye=e.unstable_now(),typeof $e=="function"?C.callback=$e:C===i(b)&&a(b),D(ye)}else a(b);C=i(b)}if(C!==null)var Pe=!0;else{var ze=i(w);ze!==null&&re(ne,ze.startTime-ye),Pe=!1}return Pe}finally{C=null,k=Te,R=!1}}var U=!1,E=null,M=-1,H=5,q=-1;function ee(){return!(e.unstable_now()-q<H)}function ve(){if(E!==null){var ie=e.unstable_now();q=ie;var ye=!0;try{ye=E(!0,ie)}finally{ye?xe():(U=!1,E=null)}}else U=!1}var xe;if(typeof $=="function")xe=function(){$(ve)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,te=be.port2;be.port1.onmessage=ve,xe=function(){te.postMessage(null)}}else xe=function(){de(ve,0)};function ue(ie){E=ie,U||(U=!0,xe())}function re(ie,ye){M=de(function(){ie(e.unstable_now())},ye)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_continueExecution=function(){J||R||(J=!0,ue(Z))},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return i(b)},e.unstable_next=function(ie){switch(k){case 1:case 2:case 3:var ye=3;break;default:ye=k}var Te=k;k=ye;try{return ie()}finally{k=Te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ie,ye){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var Te=k;k=ie;try{return ye()}finally{k=Te}},e.unstable_scheduleCallback=function(ie,ye,Te){var Se=e.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Se+Te:Se):Te=Se,ie){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=Te+$e,ie={id:I++,callback:ye,priorityLevel:ie,startTime:Te,expirationTime:$e,sortIndex:-1},Te>Se?(ie.sortIndex=Te,t(w,ie),i(b)===null&&ie===i(w)&&(Y?(G(M),M=-1):Y=!0,re(ne,Te-Se))):(ie.sortIndex=$e,t(b,ie),J||R||(J=!0,ue(Z))),ie},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function(ie){var ye=k;return function(){var Te=k;k=ye;try{return ie.apply(this,arguments)}finally{k=Te}}}})(SE);bE.exports=SE;var Hk=bE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE=yt,$o=Hk;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TE=new Set,ad={};function sc(e,t){gh(e,t),gh(e+"Capture",t)}function gh(e,t){for(ad[e]=t,e=0;e<t.length;e++)TE.add(t[e])}var Wa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),av=Object.prototype.hasOwnProperty,Wk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,db={},pb={};function Xk(e){return av.call(pb,e)?!0:av.call(db,e)?!1:Wk.test(e)?pb[e]=!0:(db[e]=!0,!1)}function qk(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kk(e,t,i,a){if(t===null||typeof t>"u"||qk(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yo(e,t,i,a,c,d,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=g}var Fi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fi[e]=new yo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fi[t]=new yo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fi[e]=new yo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fi[e]=new yo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fi[e]=new yo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fi[e]=new yo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fi[e]=new yo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fi[e]=new yo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fi[e]=new yo(e,5,!1,e.toLowerCase(),null,!1,!1)});var K_=/[\-:]([a-z])/g;function Y_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(K_,Y_);Fi[t]=new yo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(K_,Y_);Fi[t]=new yo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(K_,Y_);Fi[t]=new yo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fi[e]=new yo(e,1,!1,e.toLowerCase(),null,!1,!1)});Fi.xlinkHref=new yo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fi[e]=new yo(e,1,!1,e.toLowerCase(),null,!0,!0)});function J_(e,t,i,a){var c=Fi.hasOwnProperty(t)?Fi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kk(t,i,c,a)&&(i=null),a||c===null?Xk(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var tl=EE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ap=Symbol.for("react.element"),Gc=Symbol.for("react.portal"),Zc=Symbol.for("react.fragment"),Q_=Symbol.for("react.strict_mode"),lv=Symbol.for("react.profiler"),CE=Symbol.for("react.provider"),IE=Symbol.for("react.context"),e1=Symbol.for("react.forward_ref"),uv=Symbol.for("react.suspense"),cv=Symbol.for("react.suspense_list"),t1=Symbol.for("react.memo"),jl=Symbol.for("react.lazy"),AE=Symbol.for("react.offscreen"),mb=Symbol.iterator;function Ef(e){return e===null||typeof e!="object"?null:(e=mb&&e[mb]||e["@@iterator"],typeof e=="function"?e:null)}var Fr=Object.assign,n0;function zf(e){if(n0===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);n0=t&&t[1]||""}return`
`+n0+e}var r0=!1;function i0(e,t){if(!e||r0)return"";r0=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var a=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){a=w}e.call(t.prototype)}else{try{throw Error()}catch(w){a=w}e()}}catch(w){if(w&&a&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),d=a.stack.split(`
`),g=c.length-1,l=d.length-1;1<=g&&0<=l&&c[g]!==d[l];)l--;for(;1<=g&&0<=l;g--,l--)if(c[g]!==d[l]){if(g!==1||l!==1)do if(g--,l--,0>l||c[g]!==d[l]){var b=`
`+c[g].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=g&&0<=l);break}}}finally{r0=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?zf(e):""}function Yk(e){switch(e.tag){case 5:return zf(e.type);case 16:return zf("Lazy");case 13:return zf("Suspense");case 19:return zf("SuspenseList");case 0:case 2:case 15:return e=i0(e.type,!1),e;case 11:return e=i0(e.type.render,!1),e;case 1:return e=i0(e.type,!0),e;default:return""}}function hv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zc:return"Fragment";case Gc:return"Portal";case lv:return"Profiler";case Q_:return"StrictMode";case uv:return"Suspense";case cv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case IE:return(e.displayName||"Context")+".Consumer";case CE:return(e._context.displayName||"Context")+".Provider";case e1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case t1:return t=e.displayName||null,t!==null?t:hv(e.type)||"Memo";case jl:t=e._payload,e=e._init;try{return hv(e(t))}catch{}}return null}function Jk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hv(t);case 8:return t===Q_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function tu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function PE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qk(e){var t=PE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,d=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,d.call(this,g)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pp(e){e._valueTracker||(e._valueTracker=Qk(e))}function kE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=PE(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Mm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fv(e,t){var i=t.checked;return Fr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function gb(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=tu(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ME(e,t){t=t.checked,t!=null&&J_(e,"checked",t,!1)}function dv(e,t){ME(e,t);var i=tu(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pv(e,t.type,i):t.hasOwnProperty("defaultValue")&&pv(e,t.type,tu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yb(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function pv(e,t,i){(t!=="number"||Mm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Ff=Array.isArray;function ah(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+tu(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function mv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return Fr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(At(92));if(Ff(i)){if(1<i.length)throw Error(At(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:tu(i)}}function LE(e,t){var i=tu(t.value),a=tu(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function _b(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function zE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var kp,FE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(kp=kp||document.createElement("div"),kp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=kp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ld(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Zf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eM=["Webkit","ms","Moz","O"];Object.keys(Zf).forEach(function(e){eM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zf[t]=Zf[e]})});function OE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Zf.hasOwnProperty(e)&&Zf[e]?(""+t).trim():t+"px"}function RE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=OE(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var tM=Fr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yv(e,t){if(t){if(tM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function vv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _v=null;function n1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xv=null,lh=null,uh=null;function xb(e){if(e=jd(e)){if(typeof xv!="function")throw Error(At(280));var t=e.stateNode;t&&(t=Dg(t),xv(e.stateNode,e.type,t))}}function jE(e){lh?uh?uh.push(e):uh=[e]:lh=e}function DE(){if(lh){var e=lh,t=uh;if(uh=lh=null,xb(e),t)for(e=0;e<t.length;e++)xb(t[e])}}function BE(e,t){return e(t)}function NE(){}var o0=!1;function UE(e,t,i){if(o0)return e(t,i);o0=!0;try{return BE(e,t,i)}finally{o0=!1,(lh!==null||uh!==null)&&(NE(),DE())}}function ud(e,t){var i=e.stateNode;if(i===null)return null;var a=Dg(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(At(231,t,typeof i));return i}var wv=!1;if(Wa)try{var Tf={};Object.defineProperty(Tf,"passive",{get:function(){wv=!0}}),window.addEventListener("test",Tf,Tf),window.removeEventListener("test",Tf,Tf)}catch{wv=!1}function nM(e,t,i,a,c,d,g,l,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(i,w)}catch(I){this.onError(I)}}var Hf=!1,Lm=null,zm=!1,bv=null,rM={onError:function(e){Hf=!0,Lm=e}};function iM(e,t,i,a,c,d,g,l,b){Hf=!1,Lm=null,nM.apply(rM,arguments)}function oM(e,t,i,a,c,d,g,l,b){if(iM.apply(this,arguments),Hf){if(Hf){var w=Lm;Hf=!1,Lm=null}else throw Error(At(198));zm||(zm=!0,bv=w)}}function ac(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function $E(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wb(e){if(ac(e)!==e)throw Error(At(188))}function sM(e){var t=e.alternate;if(!t){if(t=ac(e),t===null)throw Error(At(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return wb(c),e;if(d===a)return wb(c),t;d=d.sibling}throw Error(At(188))}if(i.return!==a.return)i=c,a=d;else{for(var g=!1,l=c.child;l;){if(l===i){g=!0,i=c,a=d;break}if(l===a){g=!0,a=c,i=d;break}l=l.sibling}if(!g){for(l=d.child;l;){if(l===i){g=!0,i=d,a=c;break}if(l===a){g=!0,a=d,i=c;break}l=l.sibling}if(!g)throw Error(At(189))}}if(i.alternate!==a)throw Error(At(190))}if(i.tag!==3)throw Error(At(188));return i.stateNode.current===i?e:t}function VE(e){return e=sM(e),e!==null?GE(e):null}function GE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=GE(e);if(t!==null)return t;e=e.sibling}return null}var ZE=$o.unstable_scheduleCallback,bb=$o.unstable_cancelCallback,aM=$o.unstable_shouldYield,lM=$o.unstable_requestPaint,Qr=$o.unstable_now,uM=$o.unstable_getCurrentPriorityLevel,r1=$o.unstable_ImmediatePriority,HE=$o.unstable_UserBlockingPriority,Fm=$o.unstable_NormalPriority,cM=$o.unstable_LowPriority,WE=$o.unstable_IdlePriority,Fg=null,ha=null;function hM(e){if(ha&&typeof ha.onCommitFiberRoot=="function")try{ha.onCommitFiberRoot(Fg,e,void 0,(e.current.flags&128)===128)}catch{}}var Ns=Math.clz32?Math.clz32:pM,fM=Math.log,dM=Math.LN2;function pM(e){return e>>>=0,e===0?32:31-(fM(e)/dM|0)|0}var Mp=64,Lp=4194304;function Of(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Om(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,d=e.pingedLanes,g=i&268435455;if(g!==0){var l=g&~c;l!==0?a=Of(l):(d&=g,d!==0&&(a=Of(d)))}else g=i&~c,g!==0?a=Of(g):d!==0&&(a=Of(d));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Ns(t),c=1<<i,a|=e[i],t&=~c;return a}function mM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gM(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var g=31-Ns(d),l=1<<g,b=c[g];b===-1?(!(l&i)||l&a)&&(c[g]=mM(l,t)):b<=t&&(e.expiredLanes|=l),d&=~l}}function Sv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function XE(){var e=Mp;return Mp<<=1,!(Mp&4194240)&&(Mp=64),e}function s0(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Od(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ns(t),e[t]=i}function yM(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Ns(i),d=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~d}}function i1(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Ns(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var rr=0;function qE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var KE,o1,YE,JE,QE,Ev=!1,zp=[],Wl=null,Xl=null,ql=null,cd=new Map,hd=new Map,Ul=[],vM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sb(e,t){switch(e){case"focusin":case"focusout":Wl=null;break;case"dragenter":case"dragleave":Xl=null;break;case"mouseover":case"mouseout":ql=null;break;case"pointerover":case"pointerout":cd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hd.delete(t.pointerId)}}function Cf(e,t,i,a,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:d,targetContainers:[c]},t!==null&&(t=jd(t),t!==null&&o1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function _M(e,t,i,a,c){switch(t){case"focusin":return Wl=Cf(Wl,e,t,i,a,c),!0;case"dragenter":return Xl=Cf(Xl,e,t,i,a,c),!0;case"mouseover":return ql=Cf(ql,e,t,i,a,c),!0;case"pointerover":var d=c.pointerId;return cd.set(d,Cf(cd.get(d)||null,e,t,i,a,c)),!0;case"gotpointercapture":return d=c.pointerId,hd.set(d,Cf(hd.get(d)||null,e,t,i,a,c)),!0}return!1}function eT(e){var t=Gu(e.target);if(t!==null){var i=ac(t);if(i!==null){if(t=i.tag,t===13){if(t=$E(i),t!==null){e.blockedOn=t,QE(e.priority,function(){YE(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Tv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);_v=a,i.target.dispatchEvent(a),_v=null}else return t=jd(i),t!==null&&o1(t),e.blockedOn=i,!1;t.shift()}return!0}function Eb(e,t,i){fm(e)&&i.delete(t)}function xM(){Ev=!1,Wl!==null&&fm(Wl)&&(Wl=null),Xl!==null&&fm(Xl)&&(Xl=null),ql!==null&&fm(ql)&&(ql=null),cd.forEach(Eb),hd.forEach(Eb)}function If(e,t){e.blockedOn===t&&(e.blockedOn=null,Ev||(Ev=!0,$o.unstable_scheduleCallback($o.unstable_NormalPriority,xM)))}function fd(e){function t(c){return If(c,e)}if(0<zp.length){If(zp[0],e);for(var i=1;i<zp.length;i++){var a=zp[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Wl!==null&&If(Wl,e),Xl!==null&&If(Xl,e),ql!==null&&If(ql,e),cd.forEach(t),hd.forEach(t),i=0;i<Ul.length;i++)a=Ul[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Ul.length&&(i=Ul[0],i.blockedOn===null);)eT(i),i.blockedOn===null&&Ul.shift()}var ch=tl.ReactCurrentBatchConfig,Rm=!0;function wM(e,t,i,a){var c=rr,d=ch.transition;ch.transition=null;try{rr=1,s1(e,t,i,a)}finally{rr=c,ch.transition=d}}function bM(e,t,i,a){var c=rr,d=ch.transition;ch.transition=null;try{rr=4,s1(e,t,i,a)}finally{rr=c,ch.transition=d}}function s1(e,t,i,a){if(Rm){var c=Tv(e,t,i,a);if(c===null)g0(e,t,a,jm,i),Sb(e,a);else if(_M(c,e,t,i,a))a.stopPropagation();else if(Sb(e,a),t&4&&-1<vM.indexOf(e)){for(;c!==null;){var d=jd(c);if(d!==null&&KE(d),d=Tv(e,t,i,a),d===null&&g0(e,t,a,jm,i),d===c)break;c=d}c!==null&&a.stopPropagation()}else g0(e,t,a,null,i)}}var jm=null;function Tv(e,t,i,a){if(jm=null,e=n1(a),e=Gu(e),e!==null)if(t=ac(e),t===null)e=null;else if(i=t.tag,i===13){if(e=$E(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jm=e,null}function tT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uM()){case r1:return 1;case HE:return 4;case Fm:case cM:return 16;case WE:return 536870912;default:return 16}default:return 16}}var Gl=null,a1=null,dm=null;function nT(){if(dm)return dm;var e,t=a1,i=t.length,a,c="value"in Gl?Gl.value:Gl.textContent,d=c.length;for(e=0;e<i&&t[e]===c[e];e++);var g=i-e;for(a=1;a<=g&&t[i-a]===c[d-a];a++);return dm=c.slice(e,1<a?1-a:void 0)}function pm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fp(){return!0}function Tb(){return!1}function Go(e){function t(i,a,c,d,g){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(d):d[l]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Fp:Tb,this.isPropagationStopped=Tb,this}return Fr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Fp)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Fp)},persist:function(){},isPersistent:Fp}),t}var kh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},l1=Go(kh),Rd=Fr({},kh,{view:0,detail:0}),SM=Go(Rd),a0,l0,Af,Og=Fr({},Rd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Af&&(Af&&e.type==="mousemove"?(a0=e.screenX-Af.screenX,l0=e.screenY-Af.screenY):l0=a0=0,Af=e),a0)},movementY:function(e){return"movementY"in e?e.movementY:l0}}),Cb=Go(Og),EM=Fr({},Og,{dataTransfer:0}),TM=Go(EM),CM=Fr({},Rd,{relatedTarget:0}),u0=Go(CM),IM=Fr({},kh,{animationName:0,elapsedTime:0,pseudoElement:0}),AM=Go(IM),PM=Fr({},kh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kM=Go(PM),MM=Fr({},kh,{data:0}),Ib=Go(MM),LM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=FM[e])?!!t[e]:!1}function u1(){return OM}var RM=Fr({},Rd,{key:function(e){if(e.key){var t=LM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u1,charCode:function(e){return e.type==="keypress"?pm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jM=Go(RM),DM=Fr({},Og,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ab=Go(DM),BM=Fr({},Rd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u1}),NM=Go(BM),UM=Fr({},kh,{propertyName:0,elapsedTime:0,pseudoElement:0}),$M=Go(UM),VM=Fr({},Og,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GM=Go(VM),ZM=[9,13,27,32],c1=Wa&&"CompositionEvent"in window,Wf=null;Wa&&"documentMode"in document&&(Wf=document.documentMode);var HM=Wa&&"TextEvent"in window&&!Wf,rT=Wa&&(!c1||Wf&&8<Wf&&11>=Wf),Pb=" ",kb=!1;function iT(e,t){switch(e){case"keyup":return ZM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hc=!1;function WM(e,t){switch(e){case"compositionend":return oT(t);case"keypress":return t.which!==32?null:(kb=!0,Pb);case"textInput":return e=t.data,e===Pb&&kb?null:e;default:return null}}function XM(e,t){if(Hc)return e==="compositionend"||!c1&&iT(e,t)?(e=nT(),dm=a1=Gl=null,Hc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rT&&t.locale!=="ko"?null:t.data;default:return null}}var qM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qM[e.type]:t==="textarea"}function sT(e,t,i,a){jE(a),t=Dm(t,"onChange"),0<t.length&&(i=new l1("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var Xf=null,dd=null;function KM(e){yT(e,0)}function Rg(e){var t=qc(e);if(kE(t))return e}function YM(e,t){if(e==="change")return t}var aT=!1;if(Wa){var c0;if(Wa){var h0="oninput"in document;if(!h0){var Lb=document.createElement("div");Lb.setAttribute("oninput","return;"),h0=typeof Lb.oninput=="function"}c0=h0}else c0=!1;aT=c0&&(!document.documentMode||9<document.documentMode)}function zb(){Xf&&(Xf.detachEvent("onpropertychange",lT),dd=Xf=null)}function lT(e){if(e.propertyName==="value"&&Rg(dd)){var t=[];sT(t,dd,e,n1(e)),UE(KM,t)}}function JM(e,t,i){e==="focusin"?(zb(),Xf=t,dd=i,Xf.attachEvent("onpropertychange",lT)):e==="focusout"&&zb()}function QM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rg(dd)}function e3(e,t){if(e==="click")return Rg(t)}function t3(e,t){if(e==="input"||e==="change")return Rg(t)}function n3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $s=typeof Object.is=="function"?Object.is:n3;function pd(e,t){if($s(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!av.call(t,c)||!$s(e[c],t[c]))return!1}return!0}function Fb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ob(e,t){var i=Fb(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Fb(i)}}function uT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cT(){for(var e=window,t=Mm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Mm(e.document)}return t}function h1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function r3(e){var t=cT(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&uT(i.ownerDocument.documentElement,i)){if(a!==null&&h1(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,d=Math.min(a.start,c);a=a.end===void 0?d:Math.min(a.end,c),!e.extend&&d>a&&(c=a,a=d,d=c),c=Ob(i,d);var g=Ob(i,a);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>a?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var i3=Wa&&"documentMode"in document&&11>=document.documentMode,Wc=null,Cv=null,qf=null,Iv=!1;function Rb(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Iv||Wc==null||Wc!==Mm(a)||(a=Wc,"selectionStart"in a&&h1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),qf&&pd(qf,a)||(qf=a,a=Dm(Cv,"onSelect"),0<a.length&&(t=new l1("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Wc)))}function Op(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Xc={animationend:Op("Animation","AnimationEnd"),animationiteration:Op("Animation","AnimationIteration"),animationstart:Op("Animation","AnimationStart"),transitionend:Op("Transition","TransitionEnd")},f0={},hT={};Wa&&(hT=document.createElement("div").style,"AnimationEvent"in window||(delete Xc.animationend.animation,delete Xc.animationiteration.animation,delete Xc.animationstart.animation),"TransitionEvent"in window||delete Xc.transitionend.transition);function jg(e){if(f0[e])return f0[e];if(!Xc[e])return e;var t=Xc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in hT)return f0[e]=t[i];return e}var fT=jg("animationend"),dT=jg("animationiteration"),pT=jg("animationstart"),mT=jg("transitionend"),gT=new Map,jb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function au(e,t){gT.set(e,t),sc(t,[e])}for(var d0=0;d0<jb.length;d0++){var p0=jb[d0],o3=p0.toLowerCase(),s3=p0[0].toUpperCase()+p0.slice(1);au(o3,"on"+s3)}au(fT,"onAnimationEnd");au(dT,"onAnimationIteration");au(pT,"onAnimationStart");au("dblclick","onDoubleClick");au("focusin","onFocus");au("focusout","onBlur");au(mT,"onTransitionEnd");gh("onMouseEnter",["mouseout","mouseover"]);gh("onMouseLeave",["mouseout","mouseover"]);gh("onPointerEnter",["pointerout","pointerover"]);gh("onPointerLeave",["pointerout","pointerover"]);sc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sc("onBeforeInput",["compositionend","keypress","textInput","paste"]);sc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rf));function Db(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,oM(a,t,void 0,e),e.currentTarget=null}function yT(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var g=a.length-1;0<=g;g--){var l=a[g],b=l.instance,w=l.currentTarget;if(l=l.listener,b!==d&&c.isPropagationStopped())break e;Db(c,l,w),d=b}else for(g=0;g<a.length;g++){if(l=a[g],b=l.instance,w=l.currentTarget,l=l.listener,b!==d&&c.isPropagationStopped())break e;Db(c,l,w),d=b}}}if(zm)throw e=bv,zm=!1,bv=null,e}function yr(e,t){var i=t[Lv];i===void 0&&(i=t[Lv]=new Set);var a=e+"__bubble";i.has(a)||(vT(t,e,2,!1),i.add(a))}function m0(e,t,i){var a=0;t&&(a|=4),vT(i,e,a,t)}var Rp="_reactListening"+Math.random().toString(36).slice(2);function md(e){if(!e[Rp]){e[Rp]=!0,TE.forEach(function(i){i!=="selectionchange"&&(a3.has(i)||m0(i,!1,e),m0(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rp]||(t[Rp]=!0,m0("selectionchange",!1,t))}}function vT(e,t,i,a){switch(tT(t)){case 1:var c=wM;break;case 4:c=bM;break;default:c=s1}i=c.bind(null,t,i,e),c=void 0,!wv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function g0(e,t,i,a,c){var d=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var l=a.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(g===4)for(g=a.return;g!==null;){var b=g.tag;if((b===3||b===4)&&(b=g.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;g=g.return}for(;l!==null;){if(g=Gu(l),g===null)return;if(b=g.tag,b===5||b===6){a=d=g;continue e}l=l.parentNode}}a=a.return}UE(function(){var w=d,I=n1(i),C=[];e:{var k=gT.get(e);if(k!==void 0){var R=l1,J=e;switch(e){case"keypress":if(pm(i)===0)break e;case"keydown":case"keyup":R=jM;break;case"focusin":J="focus",R=u0;break;case"focusout":J="blur",R=u0;break;case"beforeblur":case"afterblur":R=u0;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Cb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=TM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=NM;break;case fT:case dT:case pT:R=AM;break;case mT:R=$M;break;case"scroll":R=SM;break;case"wheel":R=GM;break;case"copy":case"cut":case"paste":R=kM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Ab}var Y=(t&4)!==0,de=!Y&&e==="scroll",G=Y?k!==null?k+"Capture":null:k;Y=[];for(var $=w,D;$!==null;){D=$;var ne=D.stateNode;if(D.tag===5&&ne!==null&&(D=ne,G!==null&&(ne=ud($,G),ne!=null&&Y.push(gd($,ne,D)))),de)break;$=$.return}0<Y.length&&(k=new R(k,J,null,i,I),C.push({event:k,listeners:Y}))}}if(!(t&7)){e:{if(k=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",k&&i!==_v&&(J=i.relatedTarget||i.fromElement)&&(Gu(J)||J[Xa]))break e;if((R||k)&&(k=I.window===I?I:(k=I.ownerDocument)?k.defaultView||k.parentWindow:window,R?(J=i.relatedTarget||i.toElement,R=w,J=J?Gu(J):null,J!==null&&(de=ac(J),J!==de||J.tag!==5&&J.tag!==6)&&(J=null)):(R=null,J=w),R!==J)){if(Y=Cb,ne="onMouseLeave",G="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(Y=Ab,ne="onPointerLeave",G="onPointerEnter",$="pointer"),de=R==null?k:qc(R),D=J==null?k:qc(J),k=new Y(ne,$+"leave",R,i,I),k.target=de,k.relatedTarget=D,ne=null,Gu(I)===w&&(Y=new Y(G,$+"enter",J,i,I),Y.target=D,Y.relatedTarget=de,ne=Y),de=ne,R&&J)t:{for(Y=R,G=J,$=0,D=Y;D;D=Rc(D))$++;for(D=0,ne=G;ne;ne=Rc(ne))D++;for(;0<$-D;)Y=Rc(Y),$--;for(;0<D-$;)G=Rc(G),D--;for(;$--;){if(Y===G||G!==null&&Y===G.alternate)break t;Y=Rc(Y),G=Rc(G)}Y=null}else Y=null;R!==null&&Bb(C,k,R,Y,!1),J!==null&&de!==null&&Bb(C,de,J,Y,!0)}}e:{if(k=w?qc(w):window,R=k.nodeName&&k.nodeName.toLowerCase(),R==="select"||R==="input"&&k.type==="file")var Z=YM;else if(Mb(k))if(aT)Z=t3;else{Z=QM;var U=JM}else(R=k.nodeName)&&R.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(Z=e3);if(Z&&(Z=Z(e,w))){sT(C,Z,i,I);break e}U&&U(e,k,w),e==="focusout"&&(U=k._wrapperState)&&U.controlled&&k.type==="number"&&pv(k,"number",k.value)}switch(U=w?qc(w):window,e){case"focusin":(Mb(U)||U.contentEditable==="true")&&(Wc=U,Cv=w,qf=null);break;case"focusout":qf=Cv=Wc=null;break;case"mousedown":Iv=!0;break;case"contextmenu":case"mouseup":case"dragend":Iv=!1,Rb(C,i,I);break;case"selectionchange":if(i3)break;case"keydown":case"keyup":Rb(C,i,I)}var E;if(c1)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Hc?iT(e,i)&&(M="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(M="onCompositionStart");M&&(rT&&i.locale!=="ko"&&(Hc||M!=="onCompositionStart"?M==="onCompositionEnd"&&Hc&&(E=nT()):(Gl=I,a1="value"in Gl?Gl.value:Gl.textContent,Hc=!0)),U=Dm(w,M),0<U.length&&(M=new Ib(M,e,null,i,I),C.push({event:M,listeners:U}),E?M.data=E:(E=oT(i),E!==null&&(M.data=E)))),(E=HM?WM(e,i):XM(e,i))&&(w=Dm(w,"onBeforeInput"),0<w.length&&(I=new Ib("onBeforeInput","beforeinput",null,i,I),C.push({event:I,listeners:w}),I.data=E))}yT(C,t)})}function gd(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Dm(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=ud(e,i),d!=null&&a.unshift(gd(e,d,c)),d=ud(e,t),d!=null&&a.push(gd(e,d,c))),e=e.return}return a}function Rc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Bb(e,t,i,a,c){for(var d=t._reactName,g=[];i!==null&&i!==a;){var l=i,b=l.alternate,w=l.stateNode;if(b!==null&&b===a)break;l.tag===5&&w!==null&&(l=w,c?(b=ud(i,d),b!=null&&g.unshift(gd(i,b,l))):c||(b=ud(i,d),b!=null&&g.push(gd(i,b,l)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var l3=/\r\n?/g,u3=/\u0000|\uFFFD/g;function Nb(e){return(typeof e=="string"?e:""+e).replace(l3,`
`).replace(u3,"")}function jp(e,t,i){if(t=Nb(t),Nb(e)!==t&&i)throw Error(At(425))}function Bm(){}var Av=null,Pv=null;function kv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mv=typeof setTimeout=="function"?setTimeout:void 0,c3=typeof clearTimeout=="function"?clearTimeout:void 0,Ub=typeof Promise=="function"?Promise:void 0,h3=typeof queueMicrotask=="function"?queueMicrotask:typeof Ub<"u"?function(e){return Ub.resolve(null).then(e).catch(f3)}:Mv;function f3(e){setTimeout(function(){throw e})}function y0(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),fd(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);fd(t)}function Kl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $b(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Mh=Math.random().toString(36).slice(2),sa="__reactFiber$"+Mh,yd="__reactProps$"+Mh,Xa="__reactContainer$"+Mh,Lv="__reactEvents$"+Mh,d3="__reactListeners$"+Mh,p3="__reactHandles$"+Mh;function Gu(e){var t=e[sa];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Xa]||i[sa]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=$b(e);e!==null;){if(i=e[sa])return i;e=$b(e)}return t}e=i,i=e.parentNode}return null}function jd(e){return e=e[sa]||e[Xa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function Dg(e){return e[yd]||null}var zv=[],Kc=-1;function lu(e){return{current:e}}function _r(e){0>Kc||(e.current=zv[Kc],zv[Kc]=null,Kc--)}function mr(e,t){Kc++,zv[Kc]=e.current,e.current=t}var nu={},Yi=lu(nu),To=lu(!1),Yu=nu;function yh(e,t){var i=e.type.contextTypes;if(!i)return nu;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in i)c[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Co(e){return e=e.childContextTypes,e!=null}function Nm(){_r(To),_r(Yi)}function Vb(e,t,i){if(Yi.current!==nu)throw Error(At(168));mr(Yi,t),mr(To,i)}function _T(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(At(108,Jk(e)||"Unknown",c));return Fr({},i,a)}function Um(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nu,Yu=Yi.current,mr(Yi,e),mr(To,To.current),!0}function Gb(e,t,i){var a=e.stateNode;if(!a)throw Error(At(169));i?(e=_T(e,t,Yu),a.__reactInternalMemoizedMergedChildContext=e,_r(To),_r(Yi),mr(Yi,e)):_r(To),mr(To,i)}var $a=null,Bg=!1,v0=!1;function xT(e){$a===null?$a=[e]:$a.push(e)}function m3(e){Bg=!0,xT(e)}function uu(){if(!v0&&$a!==null){v0=!0;var e=0,t=rr;try{var i=$a;for(rr=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}$a=null,Bg=!1}catch(c){throw $a!==null&&($a=$a.slice(e+1)),ZE(r1,uu),c}finally{rr=t,v0=!1}}return null}var Yc=[],Jc=0,$m=null,Vm=0,ls=[],us=0,Ju=null,Ga=1,Za="";function Uu(e,t){Yc[Jc++]=Vm,Yc[Jc++]=$m,$m=e,Vm=t}function wT(e,t,i){ls[us++]=Ga,ls[us++]=Za,ls[us++]=Ju,Ju=e;var a=Ga;e=Za;var c=32-Ns(a)-1;a&=~(1<<c),i+=1;var d=32-Ns(t)+c;if(30<d){var g=c-c%5;d=(a&(1<<g)-1).toString(32),a>>=g,c-=g,Ga=1<<32-Ns(t)+c|i<<c|a,Za=d+e}else Ga=1<<d|i<<c|a,Za=e}function f1(e){e.return!==null&&(Uu(e,1),wT(e,1,0))}function d1(e){for(;e===$m;)$m=Yc[--Jc],Yc[Jc]=null,Vm=Yc[--Jc],Yc[Jc]=null;for(;e===Ju;)Ju=ls[--us],ls[us]=null,Za=ls[--us],ls[us]=null,Ga=ls[--us],ls[us]=null}var Uo=null,No=null,Cr=!1,Fs=null;function bT(e,t){var i=cs(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Zb(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Uo=e,No=Kl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Uo=e,No=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Ju!==null?{id:Ga,overflow:Za}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=cs(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Uo=e,No=null,!0):!1;default:return!1}}function Fv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ov(e){if(Cr){var t=No;if(t){var i=t;if(!Zb(e,t)){if(Fv(e))throw Error(At(418));t=Kl(i.nextSibling);var a=Uo;t&&Zb(e,t)?bT(a,i):(e.flags=e.flags&-4097|2,Cr=!1,Uo=e)}}else{if(Fv(e))throw Error(At(418));e.flags=e.flags&-4097|2,Cr=!1,Uo=e}}}function Hb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Uo=e}function Dp(e){if(e!==Uo)return!1;if(!Cr)return Hb(e),Cr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kv(e.type,e.memoizedProps)),t&&(t=No)){if(Fv(e))throw ST(),Error(At(418));for(;t;)bT(e,t),t=Kl(t.nextSibling)}if(Hb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){No=Kl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}No=null}}else No=Uo?Kl(e.stateNode.nextSibling):null;return!0}function ST(){for(var e=No;e;)e=Kl(e.nextSibling)}function vh(){No=Uo=null,Cr=!1}function p1(e){Fs===null?Fs=[e]:Fs.push(e)}var g3=tl.ReactCurrentBatchConfig;function Ls(e,t){if(e&&e.defaultProps){t=Fr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Gm=lu(null),Zm=null,Qc=null,m1=null;function g1(){m1=Qc=Zm=null}function y1(e){var t=Gm.current;_r(Gm),e._currentValue=t}function Rv(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function hh(e,t){Zm=e,m1=Qc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Eo=!0),e.firstContext=null)}function ds(e){var t=e._currentValue;if(m1!==e)if(e={context:e,memoizedValue:t,next:null},Qc===null){if(Zm===null)throw Error(At(308));Qc=e,Zm.dependencies={lanes:0,firstContext:e}}else Qc=Qc.next=e;return t}var Zu=null;function v1(e){Zu===null?Zu=[e]:Zu.push(e)}function ET(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,v1(t)):(i.next=c.next,c.next=i),t.interleaved=i,qa(e,a)}function qa(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Dl=!1;function _1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ha(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yl(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Hn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,qa(e,i)}return c=a.interleaved,c===null?(t.next=t,v1(a)):(t.next=c.next,c.next=t),a.interleaved=t,qa(e,i)}function mm(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,i1(e,i)}}function Wb(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};d===null?c=d=g:d=d.next=g,i=i.next}while(i!==null);d===null?c=d=t:d=d.next=t}else c=d=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Hm(e,t,i,a){var c=e.updateQueue;Dl=!1;var d=c.firstBaseUpdate,g=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var b=l,w=b.next;b.next=null,g===null?d=w:g.next=w,g=b;var I=e.alternate;I!==null&&(I=I.updateQueue,l=I.lastBaseUpdate,l!==g&&(l===null?I.firstBaseUpdate=w:l.next=w,I.lastBaseUpdate=b))}if(d!==null){var C=c.baseState;g=0,I=w=b=null,l=d;do{var k=l.lane,R=l.eventTime;if((a&k)===k){I!==null&&(I=I.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var J=e,Y=l;switch(k=t,R=i,Y.tag){case 1:if(J=Y.payload,typeof J=="function"){C=J.call(R,C,k);break e}C=J;break e;case 3:J.flags=J.flags&-65537|128;case 0:if(J=Y.payload,k=typeof J=="function"?J.call(R,C,k):J,k==null)break e;C=Fr({},C,k);break e;case 2:Dl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,k=c.effects,k===null?c.effects=[l]:k.push(l))}else R={eventTime:R,lane:k,tag:l.tag,payload:l.payload,callback:l.callback,next:null},I===null?(w=I=R,b=C):I=I.next=R,g|=k;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;k=l,l=k.next,k.next=null,c.lastBaseUpdate=k,c.shared.pending=null}}while(!0);if(I===null&&(b=C),c.baseState=b,c.firstBaseUpdate=w,c.lastBaseUpdate=I,t=c.shared.interleaved,t!==null){c=t;do g|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);ec|=g,e.lanes=g,e.memoizedState=C}}function Xb(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(At(191,c));c.call(a)}}}var CT=new EE.Component().refs;function jv(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Fr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ng={isMounted:function(e){return(e=e._reactInternals)?ac(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=ho(),c=Ql(e),d=Ha(a,c);d.payload=t,i!=null&&(d.callback=i),t=Yl(e,d,c),t!==null&&(Us(t,e,c,a),mm(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=ho(),c=Ql(e),d=Ha(a,c);d.tag=1,d.payload=t,i!=null&&(d.callback=i),t=Yl(e,d,c),t!==null&&(Us(t,e,c,a),mm(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ho(),a=Ql(e),c=Ha(i,a);c.tag=2,t!=null&&(c.callback=t),t=Yl(e,c,a),t!==null&&(Us(t,e,a,i),mm(t,e,a))}};function qb(e,t,i,a,c,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,g):t.prototype&&t.prototype.isPureReactComponent?!pd(i,a)||!pd(c,d):!0}function IT(e,t,i){var a=!1,c=nu,d=t.contextType;return typeof d=="object"&&d!==null?d=ds(d):(c=Co(t)?Yu:Yi.current,a=t.contextTypes,d=(a=a!=null)?yh(e,c):nu),t=new t(i,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ng,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function Kb(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&Ng.enqueueReplaceState(t,t.state,null)}function Dv(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=CT,_1(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=ds(d):(d=Co(t)?Yu:Yi.current,c.context=yh(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(jv(e,t,d,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Ng.enqueueReplaceState(c,c.state,null),Hm(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Pf(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(At(309));var a=i.stateNode}if(!a)throw Error(At(147,e));var c=a,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(g){var l=c.refs;l===CT&&(l=c.refs={}),g===null?delete l[d]:l[d]=g},t._stringRef=d,t)}if(typeof e!="string")throw Error(At(284));if(!i._owner)throw Error(At(290,e))}return e}function Bp(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yb(e){var t=e._init;return t(e._payload)}function AT(e){function t(G,$){if(e){var D=G.deletions;D===null?(G.deletions=[$],G.flags|=16):D.push($)}}function i(G,$){if(!e)return null;for(;$!==null;)t(G,$),$=$.sibling;return null}function a(G,$){for(G=new Map;$!==null;)$.key!==null?G.set($.key,$):G.set($.index,$),$=$.sibling;return G}function c(G,$){return G=eu(G,$),G.index=0,G.sibling=null,G}function d(G,$,D){return G.index=D,e?(D=G.alternate,D!==null?(D=D.index,D<$?(G.flags|=2,$):D):(G.flags|=2,$)):(G.flags|=1048576,$)}function g(G){return e&&G.alternate===null&&(G.flags|=2),G}function l(G,$,D,ne){return $===null||$.tag!==6?($=T0(D,G.mode,ne),$.return=G,$):($=c($,D),$.return=G,$)}function b(G,$,D,ne){var Z=D.type;return Z===Zc?I(G,$,D.props.children,ne,D.key):$!==null&&($.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===jl&&Yb(Z)===$.type)?(ne=c($,D.props),ne.ref=Pf(G,$,D),ne.return=G,ne):(ne=wm(D.type,D.key,D.props,null,G.mode,ne),ne.ref=Pf(G,$,D),ne.return=G,ne)}function w(G,$,D,ne){return $===null||$.tag!==4||$.stateNode.containerInfo!==D.containerInfo||$.stateNode.implementation!==D.implementation?($=C0(D,G.mode,ne),$.return=G,$):($=c($,D.children||[]),$.return=G,$)}function I(G,$,D,ne,Z){return $===null||$.tag!==7?($=Ku(D,G.mode,ne,Z),$.return=G,$):($=c($,D),$.return=G,$)}function C(G,$,D){if(typeof $=="string"&&$!==""||typeof $=="number")return $=T0(""+$,G.mode,D),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case Ap:return D=wm($.type,$.key,$.props,null,G.mode,D),D.ref=Pf(G,null,$),D.return=G,D;case Gc:return $=C0($,G.mode,D),$.return=G,$;case jl:var ne=$._init;return C(G,ne($._payload),D)}if(Ff($)||Ef($))return $=Ku($,G.mode,D,null),$.return=G,$;Bp(G,$)}return null}function k(G,$,D,ne){var Z=$!==null?$.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return Z!==null?null:l(G,$,""+D,ne);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ap:return D.key===Z?b(G,$,D,ne):null;case Gc:return D.key===Z?w(G,$,D,ne):null;case jl:return Z=D._init,k(G,$,Z(D._payload),ne)}if(Ff(D)||Ef(D))return Z!==null?null:I(G,$,D,ne,null);Bp(G,D)}return null}function R(G,$,D,ne,Z){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return G=G.get(D)||null,l($,G,""+ne,Z);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Ap:return G=G.get(ne.key===null?D:ne.key)||null,b($,G,ne,Z);case Gc:return G=G.get(ne.key===null?D:ne.key)||null,w($,G,ne,Z);case jl:var U=ne._init;return R(G,$,D,U(ne._payload),Z)}if(Ff(ne)||Ef(ne))return G=G.get(D)||null,I($,G,ne,Z,null);Bp($,ne)}return null}function J(G,$,D,ne){for(var Z=null,U=null,E=$,M=$=0,H=null;E!==null&&M<D.length;M++){E.index>M?(H=E,E=null):H=E.sibling;var q=k(G,E,D[M],ne);if(q===null){E===null&&(E=H);break}e&&E&&q.alternate===null&&t(G,E),$=d(q,$,M),U===null?Z=q:U.sibling=q,U=q,E=H}if(M===D.length)return i(G,E),Cr&&Uu(G,M),Z;if(E===null){for(;M<D.length;M++)E=C(G,D[M],ne),E!==null&&($=d(E,$,M),U===null?Z=E:U.sibling=E,U=E);return Cr&&Uu(G,M),Z}for(E=a(G,E);M<D.length;M++)H=R(E,G,M,D[M],ne),H!==null&&(e&&H.alternate!==null&&E.delete(H.key===null?M:H.key),$=d(H,$,M),U===null?Z=H:U.sibling=H,U=H);return e&&E.forEach(function(ee){return t(G,ee)}),Cr&&Uu(G,M),Z}function Y(G,$,D,ne){var Z=Ef(D);if(typeof Z!="function")throw Error(At(150));if(D=Z.call(D),D==null)throw Error(At(151));for(var U=Z=null,E=$,M=$=0,H=null,q=D.next();E!==null&&!q.done;M++,q=D.next()){E.index>M?(H=E,E=null):H=E.sibling;var ee=k(G,E,q.value,ne);if(ee===null){E===null&&(E=H);break}e&&E&&ee.alternate===null&&t(G,E),$=d(ee,$,M),U===null?Z=ee:U.sibling=ee,U=ee,E=H}if(q.done)return i(G,E),Cr&&Uu(G,M),Z;if(E===null){for(;!q.done;M++,q=D.next())q=C(G,q.value,ne),q!==null&&($=d(q,$,M),U===null?Z=q:U.sibling=q,U=q);return Cr&&Uu(G,M),Z}for(E=a(G,E);!q.done;M++,q=D.next())q=R(E,G,M,q.value,ne),q!==null&&(e&&q.alternate!==null&&E.delete(q.key===null?M:q.key),$=d(q,$,M),U===null?Z=q:U.sibling=q,U=q);return e&&E.forEach(function(ve){return t(G,ve)}),Cr&&Uu(G,M),Z}function de(G,$,D,ne){if(typeof D=="object"&&D!==null&&D.type===Zc&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case Ap:e:{for(var Z=D.key,U=$;U!==null;){if(U.key===Z){if(Z=D.type,Z===Zc){if(U.tag===7){i(G,U.sibling),$=c(U,D.props.children),$.return=G,G=$;break e}}else if(U.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===jl&&Yb(Z)===U.type){i(G,U.sibling),$=c(U,D.props),$.ref=Pf(G,U,D),$.return=G,G=$;break e}i(G,U);break}else t(G,U);U=U.sibling}D.type===Zc?($=Ku(D.props.children,G.mode,ne,D.key),$.return=G,G=$):(ne=wm(D.type,D.key,D.props,null,G.mode,ne),ne.ref=Pf(G,$,D),ne.return=G,G=ne)}return g(G);case Gc:e:{for(U=D.key;$!==null;){if($.key===U)if($.tag===4&&$.stateNode.containerInfo===D.containerInfo&&$.stateNode.implementation===D.implementation){i(G,$.sibling),$=c($,D.children||[]),$.return=G,G=$;break e}else{i(G,$);break}else t(G,$);$=$.sibling}$=C0(D,G.mode,ne),$.return=G,G=$}return g(G);case jl:return U=D._init,de(G,$,U(D._payload),ne)}if(Ff(D))return J(G,$,D,ne);if(Ef(D))return Y(G,$,D,ne);Bp(G,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,$!==null&&$.tag===6?(i(G,$.sibling),$=c($,D),$.return=G,G=$):(i(G,$),$=T0(D,G.mode,ne),$.return=G,G=$),g(G)):i(G,$)}return de}var _h=AT(!0),PT=AT(!1),Dd={},fa=lu(Dd),vd=lu(Dd),_d=lu(Dd);function Hu(e){if(e===Dd)throw Error(At(174));return e}function x1(e,t){switch(mr(_d,t),mr(vd,e),mr(fa,Dd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:gv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=gv(t,e)}_r(fa),mr(fa,t)}function xh(){_r(fa),_r(vd),_r(_d)}function kT(e){Hu(_d.current);var t=Hu(fa.current),i=gv(t,e.type);t!==i&&(mr(vd,e),mr(fa,i))}function w1(e){vd.current===e&&(_r(fa),_r(vd))}var Mr=lu(0);function Wm(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _0=[];function b1(){for(var e=0;e<_0.length;e++)_0[e]._workInProgressVersionPrimary=null;_0.length=0}var gm=tl.ReactCurrentDispatcher,x0=tl.ReactCurrentBatchConfig,Qu=0,zr=null,ui=null,xi=null,Xm=!1,Kf=!1,xd=0,y3=0;function Hi(){throw Error(At(321))}function S1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!$s(e[i],t[i]))return!1;return!0}function E1(e,t,i,a,c,d){if(Qu=d,zr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gm.current=e===null||e.memoizedState===null?w3:b3,e=i(a,c),Kf){d=0;do{if(Kf=!1,xd=0,25<=d)throw Error(At(301));d+=1,xi=ui=null,t.updateQueue=null,gm.current=S3,e=i(a,c)}while(Kf)}if(gm.current=qm,t=ui!==null&&ui.next!==null,Qu=0,xi=ui=zr=null,Xm=!1,t)throw Error(At(300));return e}function T1(){var e=xd!==0;return xd=0,e}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xi===null?zr.memoizedState=xi=e:xi=xi.next=e,xi}function ps(){if(ui===null){var e=zr.alternate;e=e!==null?e.memoizedState:null}else e=ui.next;var t=xi===null?zr.memoizedState:xi.next;if(t!==null)xi=t,ui=e;else{if(e===null)throw Error(At(310));ui=e,e={memoizedState:ui.memoizedState,baseState:ui.baseState,baseQueue:ui.baseQueue,queue:ui.queue,next:null},xi===null?zr.memoizedState=xi=e:xi=xi.next=e}return xi}function wd(e,t){return typeof t=="function"?t(e):t}function w0(e){var t=ps(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=ui,c=a.baseQueue,d=i.pending;if(d!==null){if(c!==null){var g=c.next;c.next=d.next,d.next=g}a.baseQueue=c=d,i.pending=null}if(c!==null){d=c.next,a=a.baseState;var l=g=null,b=null,w=d;do{var I=w.lane;if((Qu&I)===I)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),a=w.hasEagerState?w.eagerState:e(a,w.action);else{var C={lane:I,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(l=b=C,g=a):b=b.next=C,zr.lanes|=I,ec|=I}w=w.next}while(w!==null&&w!==d);b===null?g=a:b.next=l,$s(a,t.memoizedState)||(Eo=!0),t.memoizedState=a,t.baseState=g,t.baseQueue=b,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do d=c.lane,zr.lanes|=d,ec|=d,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function b0(e){var t=ps(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,d=t.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do d=e(d,g.action),g=g.next;while(g!==c);$s(d,t.memoizedState)||(Eo=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),i.lastRenderedState=d}return[d,a]}function MT(){}function LT(e,t){var i=zr,a=ps(),c=t(),d=!$s(a.memoizedState,c);if(d&&(a.memoizedState=c,Eo=!0),a=a.queue,C1(OT.bind(null,i,a,e),[e]),a.getSnapshot!==t||d||xi!==null&&xi.memoizedState.tag&1){if(i.flags|=2048,bd(9,FT.bind(null,i,a,c,t),void 0,null),wi===null)throw Error(At(349));Qu&30||zT(i,t,c)}return c}function zT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function FT(e,t,i,a){t.value=i,t.getSnapshot=a,RT(t)&&jT(e)}function OT(e,t,i){return i(function(){RT(t)&&jT(e)})}function RT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!$s(e,i)}catch{return!0}}function jT(e){var t=qa(e,1);t!==null&&Us(t,e,1,-1)}function Jb(e){var t=oa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wd,lastRenderedState:e},t.queue=e,e=e.dispatch=x3.bind(null,zr,e),[t.memoizedState,e]}function bd(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function DT(){return ps().memoizedState}function ym(e,t,i,a){var c=oa();zr.flags|=e,c.memoizedState=bd(1|t,i,void 0,a===void 0?null:a)}function Ug(e,t,i,a){var c=ps();a=a===void 0?null:a;var d=void 0;if(ui!==null){var g=ui.memoizedState;if(d=g.destroy,a!==null&&S1(a,g.deps)){c.memoizedState=bd(t,i,d,a);return}}zr.flags|=e,c.memoizedState=bd(1|t,i,d,a)}function Qb(e,t){return ym(8390656,8,e,t)}function C1(e,t){return Ug(2048,8,e,t)}function BT(e,t){return Ug(4,2,e,t)}function NT(e,t){return Ug(4,4,e,t)}function UT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $T(e,t,i){return i=i!=null?i.concat([e]):null,Ug(4,4,UT.bind(null,t,e),i)}function I1(){}function VT(e,t){var i=ps();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&S1(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function GT(e,t){var i=ps();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&S1(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function ZT(e,t,i){return Qu&21?($s(i,t)||(i=XE(),zr.lanes|=i,ec|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Eo=!0),e.memoizedState=i)}function v3(e,t){var i=rr;rr=i!==0&&4>i?i:4,e(!0);var a=x0.transition;x0.transition={};try{e(!1),t()}finally{rr=i,x0.transition=a}}function HT(){return ps().memoizedState}function _3(e,t,i){var a=Ql(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},WT(e))XT(t,i);else if(i=ET(e,t,i,a),i!==null){var c=ho();Us(i,e,a,c),qT(i,t,a)}}function x3(e,t,i){var a=Ql(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(WT(e))XT(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var g=t.lastRenderedState,l=d(g,i);if(c.hasEagerState=!0,c.eagerState=l,$s(l,g)){var b=t.interleaved;b===null?(c.next=c,v1(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}i=ET(e,t,c,a),i!==null&&(c=ho(),Us(i,e,a,c),qT(i,t,a))}}function WT(e){var t=e.alternate;return e===zr||t!==null&&t===zr}function XT(e,t){Kf=Xm=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function qT(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,i1(e,i)}}var qm={readContext:ds,useCallback:Hi,useContext:Hi,useEffect:Hi,useImperativeHandle:Hi,useInsertionEffect:Hi,useLayoutEffect:Hi,useMemo:Hi,useReducer:Hi,useRef:Hi,useState:Hi,useDebugValue:Hi,useDeferredValue:Hi,useTransition:Hi,useMutableSource:Hi,useSyncExternalStore:Hi,useId:Hi,unstable_isNewReconciler:!1},w3={readContext:ds,useCallback:function(e,t){return oa().memoizedState=[e,t===void 0?null:t],e},useContext:ds,useEffect:Qb,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,ym(4194308,4,UT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return ym(4194308,4,e,t)},useInsertionEffect:function(e,t){return ym(4,2,e,t)},useMemo:function(e,t){var i=oa();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=oa();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=_3.bind(null,zr,e),[a.memoizedState,e]},useRef:function(e){var t=oa();return e={current:e},t.memoizedState=e},useState:Jb,useDebugValue:I1,useDeferredValue:function(e){return oa().memoizedState=e},useTransition:function(){var e=Jb(!1),t=e[0];return e=v3.bind(null,e[1]),oa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=zr,c=oa();if(Cr){if(i===void 0)throw Error(At(407));i=i()}else{if(i=t(),wi===null)throw Error(At(349));Qu&30||zT(a,t,i)}c.memoizedState=i;var d={value:i,getSnapshot:t};return c.queue=d,Qb(OT.bind(null,a,d,e),[e]),a.flags|=2048,bd(9,FT.bind(null,a,d,i,t),void 0,null),i},useId:function(){var e=oa(),t=wi.identifierPrefix;if(Cr){var i=Za,a=Ga;i=(a&~(1<<32-Ns(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=xd++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=y3++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},b3={readContext:ds,useCallback:VT,useContext:ds,useEffect:C1,useImperativeHandle:$T,useInsertionEffect:BT,useLayoutEffect:NT,useMemo:GT,useReducer:w0,useRef:DT,useState:function(){return w0(wd)},useDebugValue:I1,useDeferredValue:function(e){var t=ps();return ZT(t,ui.memoizedState,e)},useTransition:function(){var e=w0(wd)[0],t=ps().memoizedState;return[e,t]},useMutableSource:MT,useSyncExternalStore:LT,useId:HT,unstable_isNewReconciler:!1},S3={readContext:ds,useCallback:VT,useContext:ds,useEffect:C1,useImperativeHandle:$T,useInsertionEffect:BT,useLayoutEffect:NT,useMemo:GT,useReducer:b0,useRef:DT,useState:function(){return b0(wd)},useDebugValue:I1,useDeferredValue:function(e){var t=ps();return ui===null?t.memoizedState=e:ZT(t,ui.memoizedState,e)},useTransition:function(){var e=b0(wd)[0],t=ps().memoizedState;return[e,t]},useMutableSource:MT,useSyncExternalStore:LT,useId:HT,unstable_isNewReconciler:!1};function wh(e,t){try{var i="",a=t;do i+=Yk(a),a=a.return;while(a);var c=i}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function S0(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Bv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var E3=typeof WeakMap=="function"?WeakMap:Map;function KT(e,t,i){i=Ha(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){Ym||(Ym=!0,qv=a),Bv(e,t)},i}function YT(e,t,i){i=Ha(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){Bv(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(i.callback=function(){Bv(e,t),typeof a!="function"&&(Jl===null?Jl=new Set([this]):Jl.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),i}function e2(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new E3;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=D3.bind(null,e,t,i),t.then(e,e))}function t2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function n2(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Ha(-1,1),t.tag=2,Yl(i,t,1))),i.lanes|=1),e)}var T3=tl.ReactCurrentOwner,Eo=!1;function ao(e,t,i,a){t.child=e===null?PT(t,null,i,a):_h(t,e.child,i,a)}function r2(e,t,i,a,c){i=i.render;var d=t.ref;return hh(t,c),a=E1(e,t,i,a,d,c),i=T1(),e!==null&&!Eo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ka(e,t,c)):(Cr&&i&&f1(t),t.flags|=1,ao(e,t,a,c),t.child)}function i2(e,t,i,a,c){if(e===null){var d=i.type;return typeof d=="function"&&!O1(d)&&d.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=d,JT(e,t,d,a,c)):(e=wm(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var g=d.memoizedProps;if(i=i.compare,i=i!==null?i:pd,i(g,a)&&e.ref===t.ref)return Ka(e,t,c)}return t.flags|=1,e=eu(d,a),e.ref=t.ref,e.return=t,t.child=e}function JT(e,t,i,a,c){if(e!==null){var d=e.memoizedProps;if(pd(d,a)&&e.ref===t.ref)if(Eo=!1,t.pendingProps=a=d,(e.lanes&c)!==0)e.flags&131072&&(Eo=!0);else return t.lanes=e.lanes,Ka(e,t,c)}return Nv(e,t,i,a,c)}function QT(e,t,i){var a=t.pendingProps,c=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mr(th,Ro),Ro|=i;else{if(!(i&1073741824))return e=d!==null?d.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mr(th,Ro),Ro|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=d!==null?d.baseLanes:i,mr(th,Ro),Ro|=a}else d!==null?(a=d.baseLanes|i,t.memoizedState=null):a=i,mr(th,Ro),Ro|=a;return ao(e,t,c,i),t.child}function eC(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Nv(e,t,i,a,c){var d=Co(i)?Yu:Yi.current;return d=yh(t,d),hh(t,c),i=E1(e,t,i,a,d,c),a=T1(),e!==null&&!Eo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ka(e,t,c)):(Cr&&a&&f1(t),t.flags|=1,ao(e,t,i,c),t.child)}function o2(e,t,i,a,c){if(Co(i)){var d=!0;Um(t)}else d=!1;if(hh(t,c),t.stateNode===null)vm(e,t),IT(t,i,a),Dv(t,i,a,c),a=!0;else if(e===null){var g=t.stateNode,l=t.memoizedProps;g.props=l;var b=g.context,w=i.contextType;typeof w=="object"&&w!==null?w=ds(w):(w=Co(i)?Yu:Yi.current,w=yh(t,w));var I=i.getDerivedStateFromProps,C=typeof I=="function"||typeof g.getSnapshotBeforeUpdate=="function";C||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(l!==a||b!==w)&&Kb(t,g,a,w),Dl=!1;var k=t.memoizedState;g.state=k,Hm(t,a,g,c),b=t.memoizedState,l!==a||k!==b||To.current||Dl?(typeof I=="function"&&(jv(t,i,I,a),b=t.memoizedState),(l=Dl||qb(t,i,l,a,k,b,w))?(C||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),g.props=a,g.state=b,g.context=w,a=l):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{g=t.stateNode,TT(e,t),l=t.memoizedProps,w=t.type===t.elementType?l:Ls(t.type,l),g.props=w,C=t.pendingProps,k=g.context,b=i.contextType,typeof b=="object"&&b!==null?b=ds(b):(b=Co(i)?Yu:Yi.current,b=yh(t,b));var R=i.getDerivedStateFromProps;(I=typeof R=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(l!==C||k!==b)&&Kb(t,g,a,b),Dl=!1,k=t.memoizedState,g.state=k,Hm(t,a,g,c);var J=t.memoizedState;l!==C||k!==J||To.current||Dl?(typeof R=="function"&&(jv(t,i,R,a),J=t.memoizedState),(w=Dl||qb(t,i,w,a,k,J,b)||!1)?(I||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,J,b),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,J,b)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=J),g.props=a,g.state=J,g.context=b,a=w):(typeof g.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),a=!1)}return Uv(e,t,i,a,d,c)}function Uv(e,t,i,a,c,d){eC(e,t);var g=(t.flags&128)!==0;if(!a&&!g)return c&&Gb(t,i,!1),Ka(e,t,d);a=t.stateNode,T3.current=t;var l=g&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&g?(t.child=_h(t,e.child,null,d),t.child=_h(t,null,l,d)):ao(e,t,l,d),t.memoizedState=a.state,c&&Gb(t,i,!0),t.child}function tC(e){var t=e.stateNode;t.pendingContext?Vb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vb(e,t.context,!1),x1(e,t.containerInfo)}function s2(e,t,i,a,c){return vh(),p1(c),t.flags|=256,ao(e,t,i,a),t.child}var $v={dehydrated:null,treeContext:null,retryLane:0};function Vv(e){return{baseLanes:e,cachePool:null,transitions:null}}function nC(e,t,i){var a=t.pendingProps,c=Mr.current,d=!1,g=(t.flags&128)!==0,l;if((l=g)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),mr(Mr,c&1),e===null)return Ov(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=a.children,e=a.fallback,d?(a=t.mode,d=t.child,g={mode:"hidden",children:g},!(a&1)&&d!==null?(d.childLanes=0,d.pendingProps=g):d=Gg(g,a,0,null),e=Ku(e,a,i,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Vv(i),t.memoizedState=$v,e):A1(t,g));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return C3(e,t,g,a,l,c,i);if(d){d=a.fallback,g=t.mode,c=e.child,l=c.sibling;var b={mode:"hidden",children:a.children};return!(g&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=eu(c,b),a.subtreeFlags=c.subtreeFlags&14680064),l!==null?d=eu(l,d):(d=Ku(d,g,i,null),d.flags|=2),d.return=t,a.return=t,a.sibling=d,t.child=a,a=d,d=t.child,g=e.child.memoizedState,g=g===null?Vv(i):{baseLanes:g.baseLanes|i,cachePool:null,transitions:g.transitions},d.memoizedState=g,d.childLanes=e.childLanes&~i,t.memoizedState=$v,a}return d=e.child,e=d.sibling,a=eu(d,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function A1(e,t){return t=Gg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Np(e,t,i,a){return a!==null&&p1(a),_h(t,e.child,null,i),e=A1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function C3(e,t,i,a,c,d,g){if(i)return t.flags&256?(t.flags&=-257,a=S0(Error(At(422))),Np(e,t,g,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=a.fallback,c=t.mode,a=Gg({mode:"visible",children:a.children},c,0,null),d=Ku(d,c,g,null),d.flags|=2,a.return=t,d.return=t,a.sibling=d,t.child=a,t.mode&1&&_h(t,e.child,null,g),t.child.memoizedState=Vv(g),t.memoizedState=$v,d);if(!(t.mode&1))return Np(e,t,g,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var l=a.dgst;return a=l,d=Error(At(419)),a=S0(d,a,void 0),Np(e,t,g,a)}if(l=(g&e.childLanes)!==0,Eo||l){if(a=wi,a!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|g)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,qa(e,c),Us(a,e,c,-1))}return F1(),a=S0(Error(At(421))),Np(e,t,g,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=B3.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,No=Kl(c.nextSibling),Uo=t,Cr=!0,Fs=null,e!==null&&(ls[us++]=Ga,ls[us++]=Za,ls[us++]=Ju,Ga=e.id,Za=e.overflow,Ju=t),t=A1(t,a.children),t.flags|=4096,t)}function a2(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Rv(e.return,t,i)}function E0(e,t,i,a,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=i,d.tailMode=c)}function rC(e,t,i){var a=t.pendingProps,c=a.revealOrder,d=a.tail;if(ao(e,t,a.children,i),a=Mr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&a2(e,i,t);else if(e.tag===19)a2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(mr(Mr,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Wm(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),E0(t,!1,c,i,d);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Wm(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}E0(t,!0,i,null,d);break;case"together":E0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),ec|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,i=eu(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=eu(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function I3(e,t,i){switch(t.tag){case 3:tC(t),vh();break;case 5:kT(t);break;case 1:Co(t.type)&&Um(t);break;case 4:x1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;mr(Gm,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(mr(Mr,Mr.current&1),t.flags|=128,null):i&t.child.childLanes?nC(e,t,i):(mr(Mr,Mr.current&1),e=Ka(e,t,i),e!==null?e.sibling:null);mr(Mr,Mr.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return rC(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),mr(Mr,Mr.current),a)break;return null;case 22:case 23:return t.lanes=0,QT(e,t,i)}return Ka(e,t,i)}var iC,Gv,oC,sC;iC=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Gv=function(){};oC=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Hu(fa.current);var d=null;switch(i){case"input":c=fv(e,c),a=fv(e,a),d=[];break;case"select":c=Fr({},c,{value:void 0}),a=Fr({},a,{value:void 0}),d=[];break;case"textarea":c=mv(e,c),a=mv(e,a),d=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Bm)}yv(i,a);var g;i=null;for(w in c)if(!a.hasOwnProperty(w)&&c.hasOwnProperty(w)&&c[w]!=null)if(w==="style"){var l=c[w];for(g in l)l.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(ad.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in a){var b=a[w];if(l=c!=null?c[w]:void 0,a.hasOwnProperty(w)&&b!==l&&(b!=null||l!=null))if(w==="style")if(l){for(g in l)!l.hasOwnProperty(g)||b&&b.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in b)b.hasOwnProperty(g)&&l[g]!==b[g]&&(i||(i={}),i[g]=b[g])}else i||(d||(d=[]),d.push(w,i)),i=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(d=d||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(ad.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&yr("scroll",e),d||l===b||(d=[])):(d=d||[]).push(w,b))}i&&(d=d||[]).push("style",i);var w=d;(t.updateQueue=w)&&(t.flags|=4)}};sC=function(e,t,i,a){i!==a&&(t.flags|=4)};function kf(e,t){if(!Cr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Wi(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function A3(e,t,i){var a=t.pendingProps;switch(d1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wi(t),null;case 1:return Co(t.type)&&Nm(),Wi(t),null;case 3:return a=t.stateNode,xh(),_r(To),_r(Yi),b1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Dp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fs!==null&&(Jv(Fs),Fs=null))),Gv(e,t),Wi(t),null;case 5:w1(t);var c=Hu(_d.current);if(i=t.type,e!==null&&t.stateNode!=null)oC(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(At(166));return Wi(t),null}if(e=Hu(fa.current),Dp(t)){a=t.stateNode,i=t.type;var d=t.memoizedProps;switch(a[sa]=t,a[yd]=d,e=(t.mode&1)!==0,i){case"dialog":yr("cancel",a),yr("close",a);break;case"iframe":case"object":case"embed":yr("load",a);break;case"video":case"audio":for(c=0;c<Rf.length;c++)yr(Rf[c],a);break;case"source":yr("error",a);break;case"img":case"image":case"link":yr("error",a),yr("load",a);break;case"details":yr("toggle",a);break;case"input":gb(a,d),yr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},yr("invalid",a);break;case"textarea":vb(a,d),yr("invalid",a)}yv(i,d),c=null;for(var g in d)if(d.hasOwnProperty(g)){var l=d[g];g==="children"?typeof l=="string"?a.textContent!==l&&(d.suppressHydrationWarning!==!0&&jp(a.textContent,l,e),c=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(d.suppressHydrationWarning!==!0&&jp(a.textContent,l,e),c=["children",""+l]):ad.hasOwnProperty(g)&&l!=null&&g==="onScroll"&&yr("scroll",a)}switch(i){case"input":Pp(a),yb(a,d,!0);break;case"textarea":Pp(a),_b(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=Bm)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(i,{is:a.is}):(e=g.createElement(i),i==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,i),e[sa]=t,e[yd]=a,iC(e,t,!1,!1),t.stateNode=e;e:{switch(g=vv(i,a),i){case"dialog":yr("cancel",e),yr("close",e),c=a;break;case"iframe":case"object":case"embed":yr("load",e),c=a;break;case"video":case"audio":for(c=0;c<Rf.length;c++)yr(Rf[c],e);c=a;break;case"source":yr("error",e),c=a;break;case"img":case"image":case"link":yr("error",e),yr("load",e),c=a;break;case"details":yr("toggle",e),c=a;break;case"input":gb(e,a),c=fv(e,a),yr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Fr({},a,{value:void 0}),yr("invalid",e);break;case"textarea":vb(e,a),c=mv(e,a),yr("invalid",e);break;default:c=a}yv(i,c),l=c;for(d in l)if(l.hasOwnProperty(d)){var b=l[d];d==="style"?RE(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&FE(e,b)):d==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&ld(e,b):typeof b=="number"&&ld(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ad.hasOwnProperty(d)?b!=null&&d==="onScroll"&&yr("scroll",e):b!=null&&J_(e,d,b,g))}switch(i){case"input":Pp(e),yb(e,a,!1);break;case"textarea":Pp(e),_b(e);break;case"option":a.value!=null&&e.setAttribute("value",""+tu(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?ah(e,!!a.multiple,d,!1):a.defaultValue!=null&&ah(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Bm)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Wi(t),null;case 6:if(e&&t.stateNode!=null)sC(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(At(166));if(i=Hu(_d.current),Hu(fa.current),Dp(t)){if(a=t.stateNode,i=t.memoizedProps,a[sa]=t,(d=a.nodeValue!==i)&&(e=Uo,e!==null))switch(e.tag){case 3:jp(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&jp(a.nodeValue,i,(e.mode&1)!==0)}d&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[sa]=t,t.stateNode=a}return Wi(t),null;case 13:if(_r(Mr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Cr&&No!==null&&t.mode&1&&!(t.flags&128))ST(),vh(),t.flags|=98560,d=!1;else if(d=Dp(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(At(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(At(317));d[sa]=t}else vh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Wi(t),d=!1}else Fs!==null&&(Jv(Fs),Fs=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Mr.current&1?ci===0&&(ci=3):F1())),t.updateQueue!==null&&(t.flags|=4),Wi(t),null);case 4:return xh(),Gv(e,t),e===null&&md(t.stateNode.containerInfo),Wi(t),null;case 10:return y1(t.type._context),Wi(t),null;case 17:return Co(t.type)&&Nm(),Wi(t),null;case 19:if(_r(Mr),d=t.memoizedState,d===null)return Wi(t),null;if(a=(t.flags&128)!==0,g=d.rendering,g===null)if(a)kf(d,!1);else{if(ci!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=Wm(e),g!==null){for(t.flags|=128,kf(d,!1),a=g.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)d=i,e=a,d.flags&=14680066,g=d.alternate,g===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=g.childLanes,d.lanes=g.lanes,d.child=g.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=g.memoizedProps,d.memoizedState=g.memoizedState,d.updateQueue=g.updateQueue,d.type=g.type,e=g.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return mr(Mr,Mr.current&1|2),t.child}e=e.sibling}d.tail!==null&&Qr()>bh&&(t.flags|=128,a=!0,kf(d,!1),t.lanes=4194304)}else{if(!a)if(e=Wm(g),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),kf(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Cr)return Wi(t),null}else 2*Qr()-d.renderingStartTime>bh&&i!==1073741824&&(t.flags|=128,a=!0,kf(d,!1),t.lanes=4194304);d.isBackwards?(g.sibling=t.child,t.child=g):(i=d.last,i!==null?i.sibling=g:t.child=g,d.last=g)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Qr(),t.sibling=null,i=Mr.current,mr(Mr,a?i&1|2:i&1),t):(Wi(t),null);case 22:case 23:return z1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Ro&1073741824&&(Wi(t),t.subtreeFlags&6&&(t.flags|=8192)):Wi(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function P3(e,t){switch(d1(t),t.tag){case 1:return Co(t.type)&&Nm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xh(),_r(To),_r(Yi),b1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return w1(t),null;case 13:if(_r(Mr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));vh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _r(Mr),null;case 4:return xh(),null;case 10:return y1(t.type._context),null;case 22:case 23:return z1(),null;case 24:return null;default:return null}}var Up=!1,qi=!1,k3=typeof WeakSet=="function"?WeakSet:Set,en=null;function eh(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Dr(e,t,a)}else i.current=null}function Zv(e,t,i){try{i()}catch(a){Dr(e,t,a)}}var l2=!1;function M3(e,t){if(Av=Rm,e=cT(),h1(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var g=0,l=-1,b=-1,w=0,I=0,C=e,k=null;t:for(;;){for(var R;C!==i||c!==0&&C.nodeType!==3||(l=g+c),C!==d||a!==0&&C.nodeType!==3||(b=g+a),C.nodeType===3&&(g+=C.nodeValue.length),(R=C.firstChild)!==null;)k=C,C=R;for(;;){if(C===e)break t;if(k===i&&++w===c&&(l=g),k===d&&++I===a&&(b=g),(R=C.nextSibling)!==null)break;C=k,k=C.parentNode}C=R}i=l===-1||b===-1?null:{start:l,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(Pv={focusedElem:e,selectionRange:i},Rm=!1,en=t;en!==null;)if(t=en,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,en=e;else for(;en!==null;){t=en;try{var J=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(J!==null){var Y=J.memoizedProps,de=J.memoizedState,G=t.stateNode,$=G.getSnapshotBeforeUpdate(t.elementType===t.type?Y:Ls(t.type,Y),de);G.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var D=t.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(ne){Dr(t,t.return,ne)}if(e=t.sibling,e!==null){e.return=t.return,en=e;break}en=t.return}return J=l2,l2=!1,J}function Yf(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&Zv(t,i,d)}c=c.next}while(c!==a)}}function $g(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function Hv(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function aC(e){var t=e.alternate;t!==null&&(e.alternate=null,aC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sa],delete t[yd],delete t[Lv],delete t[d3],delete t[p3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lC(e){return e.tag===5||e.tag===3||e.tag===4}function u2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Bm));else if(a!==4&&(e=e.child,e!==null))for(Wv(e,t,i),e=e.sibling;e!==null;)Wv(e,t,i),e=e.sibling}function Xv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Xv(e,t,i),e=e.sibling;e!==null;)Xv(e,t,i),e=e.sibling}var Mi=null,zs=!1;function Ol(e,t,i){for(i=i.child;i!==null;)uC(e,t,i),i=i.sibling}function uC(e,t,i){if(ha&&typeof ha.onCommitFiberUnmount=="function")try{ha.onCommitFiberUnmount(Fg,i)}catch{}switch(i.tag){case 5:qi||eh(i,t);case 6:var a=Mi,c=zs;Mi=null,Ol(e,t,i),Mi=a,zs=c,Mi!==null&&(zs?(e=Mi,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Mi.removeChild(i.stateNode));break;case 18:Mi!==null&&(zs?(e=Mi,i=i.stateNode,e.nodeType===8?y0(e.parentNode,i):e.nodeType===1&&y0(e,i),fd(e)):y0(Mi,i.stateNode));break;case 4:a=Mi,c=zs,Mi=i.stateNode.containerInfo,zs=!0,Ol(e,t,i),Mi=a,zs=c;break;case 0:case 11:case 14:case 15:if(!qi&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var d=c,g=d.destroy;d=d.tag,g!==void 0&&(d&2||d&4)&&Zv(i,t,g),c=c.next}while(c!==a)}Ol(e,t,i);break;case 1:if(!qi&&(eh(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(l){Dr(i,t,l)}Ol(e,t,i);break;case 21:Ol(e,t,i);break;case 22:i.mode&1?(qi=(a=qi)||i.memoizedState!==null,Ol(e,t,i),qi=a):Ol(e,t,i);break;default:Ol(e,t,i)}}function c2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new k3),t.forEach(function(a){var c=N3.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function Ms(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var d=e,g=t,l=g;e:for(;l!==null;){switch(l.tag){case 5:Mi=l.stateNode,zs=!1;break e;case 3:Mi=l.stateNode.containerInfo,zs=!0;break e;case 4:Mi=l.stateNode.containerInfo,zs=!0;break e}l=l.return}if(Mi===null)throw Error(At(160));uC(d,g,c),Mi=null,zs=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(w){Dr(c,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)cC(t,e),t=t.sibling}function cC(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ms(t,e),ia(e),a&4){try{Yf(3,e,e.return),$g(3,e)}catch(Y){Dr(e,e.return,Y)}try{Yf(5,e,e.return)}catch(Y){Dr(e,e.return,Y)}}break;case 1:Ms(t,e),ia(e),a&512&&i!==null&&eh(i,i.return);break;case 5:if(Ms(t,e),ia(e),a&512&&i!==null&&eh(i,i.return),e.flags&32){var c=e.stateNode;try{ld(c,"")}catch(Y){Dr(e,e.return,Y)}}if(a&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,g=i!==null?i.memoizedProps:d,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&d.type==="radio"&&d.name!=null&&ME(c,d),vv(l,g);var w=vv(l,d);for(g=0;g<b.length;g+=2){var I=b[g],C=b[g+1];I==="style"?RE(c,C):I==="dangerouslySetInnerHTML"?FE(c,C):I==="children"?ld(c,C):J_(c,I,C,w)}switch(l){case"input":dv(c,d);break;case"textarea":LE(c,d);break;case"select":var k=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var R=d.value;R!=null?ah(c,!!d.multiple,R,!1):k!==!!d.multiple&&(d.defaultValue!=null?ah(c,!!d.multiple,d.defaultValue,!0):ah(c,!!d.multiple,d.multiple?[]:"",!1))}c[yd]=d}catch(Y){Dr(e,e.return,Y)}}break;case 6:if(Ms(t,e),ia(e),a&4){if(e.stateNode===null)throw Error(At(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(Y){Dr(e,e.return,Y)}}break;case 3:if(Ms(t,e),ia(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{fd(t.containerInfo)}catch(Y){Dr(e,e.return,Y)}break;case 4:Ms(t,e),ia(e);break;case 13:Ms(t,e),ia(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(M1=Qr())),a&4&&c2(e);break;case 22:if(I=i!==null&&i.memoizedState!==null,e.mode&1?(qi=(w=qi)||I,Ms(t,e),qi=w):Ms(t,e),ia(e),a&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!I&&e.mode&1)for(en=e,I=e.child;I!==null;){for(C=en=I;en!==null;){switch(k=en,R=k.child,k.tag){case 0:case 11:case 14:case 15:Yf(4,k,k.return);break;case 1:eh(k,k.return);var J=k.stateNode;if(typeof J.componentWillUnmount=="function"){a=k,i=k.return;try{t=a,J.props=t.memoizedProps,J.state=t.memoizedState,J.componentWillUnmount()}catch(Y){Dr(a,i,Y)}}break;case 5:eh(k,k.return);break;case 22:if(k.memoizedState!==null){f2(C);continue}}R!==null?(R.return=k,en=R):f2(C)}I=I.sibling}e:for(I=null,C=e;;){if(C.tag===5){if(I===null){I=C;try{c=C.stateNode,w?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(l=C.stateNode,b=C.memoizedProps.style,g=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=OE("display",g))}catch(Y){Dr(e,e.return,Y)}}}else if(C.tag===6){if(I===null)try{C.stateNode.nodeValue=w?"":C.memoizedProps}catch(Y){Dr(e,e.return,Y)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===e)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===e)break e;for(;C.sibling===null;){if(C.return===null||C.return===e)break e;I===C&&(I=null),C=C.return}I===C&&(I=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:Ms(t,e),ia(e),a&4&&c2(e);break;case 21:break;default:Ms(t,e),ia(e)}}function ia(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(lC(i)){var a=i;break e}i=i.return}throw Error(At(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(ld(c,""),a.flags&=-33);var d=u2(e);Xv(e,d,c);break;case 3:case 4:var g=a.stateNode.containerInfo,l=u2(e);Wv(e,l,g);break;default:throw Error(At(161))}}catch(b){Dr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function L3(e,t,i){en=e,hC(e)}function hC(e,t,i){for(var a=(e.mode&1)!==0;en!==null;){var c=en,d=c.child;if(c.tag===22&&a){var g=c.memoizedState!==null||Up;if(!g){var l=c.alternate,b=l!==null&&l.memoizedState!==null||qi;l=Up;var w=qi;if(Up=g,(qi=b)&&!w)for(en=c;en!==null;)g=en,b=g.child,g.tag===22&&g.memoizedState!==null?d2(c):b!==null?(b.return=g,en=b):d2(c);for(;d!==null;)en=d,hC(d),d=d.sibling;en=c,Up=l,qi=w}h2(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,en=d):h2(e)}}function h2(e){for(;en!==null;){var t=en;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qi||$g(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!qi)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Ls(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&Xb(t,d,a);break;case 3:var g=t.updateQueue;if(g!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Xb(t,g,i)}break;case 5:var l=t.stateNode;if(i===null&&t.flags&4){i=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var I=w.memoizedState;if(I!==null){var C=I.dehydrated;C!==null&&fd(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}qi||t.flags&512&&Hv(t)}catch(k){Dr(t,t.return,k)}}if(t===e){en=null;break}if(i=t.sibling,i!==null){i.return=t.return,en=i;break}en=t.return}}function f2(e){for(;en!==null;){var t=en;if(t===e){en=null;break}var i=t.sibling;if(i!==null){i.return=t.return,en=i;break}en=t.return}}function d2(e){for(;en!==null;){var t=en;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{$g(4,t)}catch(b){Dr(t,i,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(b){Dr(t,c,b)}}var d=t.return;try{Hv(t)}catch(b){Dr(t,d,b)}break;case 5:var g=t.return;try{Hv(t)}catch(b){Dr(t,g,b)}}}catch(b){Dr(t,t.return,b)}if(t===e){en=null;break}var l=t.sibling;if(l!==null){l.return=t.return,en=l;break}en=t.return}}var z3=Math.ceil,Km=tl.ReactCurrentDispatcher,P1=tl.ReactCurrentOwner,fs=tl.ReactCurrentBatchConfig,Hn=0,wi=null,ni=null,zi=0,Ro=0,th=lu(0),ci=0,Sd=null,ec=0,Vg=0,k1=0,Jf=null,bo=null,M1=0,bh=1/0,Ua=null,Ym=!1,qv=null,Jl=null,$p=!1,Zl=null,Jm=0,Qf=0,Kv=null,_m=-1,xm=0;function ho(){return Hn&6?Qr():_m!==-1?_m:_m=Qr()}function Ql(e){return e.mode&1?Hn&2&&zi!==0?zi&-zi:g3.transition!==null?(xm===0&&(xm=XE()),xm):(e=rr,e!==0||(e=window.event,e=e===void 0?16:tT(e.type)),e):1}function Us(e,t,i,a){if(50<Qf)throw Qf=0,Kv=null,Error(At(185));Od(e,i,a),(!(Hn&2)||e!==wi)&&(e===wi&&(!(Hn&2)&&(Vg|=i),ci===4&&$l(e,zi)),Io(e,a),i===1&&Hn===0&&!(t.mode&1)&&(bh=Qr()+500,Bg&&uu()))}function Io(e,t){var i=e.callbackNode;gM(e,t);var a=Om(e,e===wi?zi:0);if(a===0)i!==null&&bb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&bb(i),t===1)e.tag===0?m3(p2.bind(null,e)):xT(p2.bind(null,e)),h3(function(){!(Hn&6)&&uu()}),i=null;else{switch(qE(a)){case 1:i=r1;break;case 4:i=HE;break;case 16:i=Fm;break;case 536870912:i=WE;break;default:i=Fm}i=_C(i,fC.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function fC(e,t){if(_m=-1,xm=0,Hn&6)throw Error(At(327));var i=e.callbackNode;if(fh()&&e.callbackNode!==i)return null;var a=Om(e,e===wi?zi:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Qm(e,a);else{t=a;var c=Hn;Hn|=2;var d=pC();(wi!==e||zi!==t)&&(Ua=null,bh=Qr()+500,qu(e,t));do try{R3();break}catch(l){dC(e,l)}while(!0);g1(),Km.current=d,Hn=c,ni!==null?t=0:(wi=null,zi=0,t=ci)}if(t!==0){if(t===2&&(c=Sv(e),c!==0&&(a=c,t=Yv(e,c))),t===1)throw i=Sd,qu(e,0),$l(e,a),Io(e,Qr()),i;if(t===6)$l(e,a);else{if(c=e.current.alternate,!(a&30)&&!F3(c)&&(t=Qm(e,a),t===2&&(d=Sv(e),d!==0&&(a=d,t=Yv(e,d))),t===1))throw i=Sd,qu(e,0),$l(e,a),Io(e,Qr()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(At(345));case 2:$u(e,bo,Ua);break;case 3:if($l(e,a),(a&130023424)===a&&(t=M1+500-Qr(),10<t)){if(Om(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){ho(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Mv($u.bind(null,e,bo,Ua),t);break}$u(e,bo,Ua);break;case 4:if($l(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var g=31-Ns(a);d=1<<g,g=t[g],g>c&&(c=g),a&=~d}if(a=c,a=Qr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*z3(a/1960))-a,10<a){e.timeoutHandle=Mv($u.bind(null,e,bo,Ua),a);break}$u(e,bo,Ua);break;case 5:$u(e,bo,Ua);break;default:throw Error(At(329))}}}return Io(e,Qr()),e.callbackNode===i?fC.bind(null,e):null}function Yv(e,t){var i=Jf;return e.current.memoizedState.isDehydrated&&(qu(e,t).flags|=256),e=Qm(e,t),e!==2&&(t=bo,bo=i,t!==null&&Jv(t)),e}function Jv(e){bo===null?bo=e:bo.push.apply(bo,e)}function F3(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],d=c.getSnapshot;c=c.value;try{if(!$s(d(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $l(e,t){for(t&=~k1,t&=~Vg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ns(t),a=1<<i;e[i]=-1,t&=~a}}function p2(e){if(Hn&6)throw Error(At(327));fh();var t=Om(e,0);if(!(t&1))return Io(e,Qr()),null;var i=Qm(e,t);if(e.tag!==0&&i===2){var a=Sv(e);a!==0&&(t=a,i=Yv(e,a))}if(i===1)throw i=Sd,qu(e,0),$l(e,t),Io(e,Qr()),i;if(i===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$u(e,bo,Ua),Io(e,Qr()),null}function L1(e,t){var i=Hn;Hn|=1;try{return e(t)}finally{Hn=i,Hn===0&&(bh=Qr()+500,Bg&&uu())}}function tc(e){Zl!==null&&Zl.tag===0&&!(Hn&6)&&fh();var t=Hn;Hn|=1;var i=fs.transition,a=rr;try{if(fs.transition=null,rr=1,e)return e()}finally{rr=a,fs.transition=i,Hn=t,!(Hn&6)&&uu()}}function z1(){Ro=th.current,_r(th)}function qu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,c3(i)),ni!==null)for(i=ni.return;i!==null;){var a=i;switch(d1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Nm();break;case 3:xh(),_r(To),_r(Yi),b1();break;case 5:w1(a);break;case 4:xh();break;case 13:_r(Mr);break;case 19:_r(Mr);break;case 10:y1(a.type._context);break;case 22:case 23:z1()}i=i.return}if(wi=e,ni=e=eu(e.current,null),zi=Ro=t,ci=0,Sd=null,k1=Vg=ec=0,bo=Jf=null,Zu!==null){for(t=0;t<Zu.length;t++)if(i=Zu[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,d=i.pending;if(d!==null){var g=d.next;d.next=c,a.next=g}i.pending=a}Zu=null}return e}function dC(e,t){do{var i=ni;try{if(g1(),gm.current=qm,Xm){for(var a=zr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Xm=!1}if(Qu=0,xi=ui=zr=null,Kf=!1,xd=0,P1.current=null,i===null||i.return===null){ci=1,Sd=t,ni=null;break}e:{var d=e,g=i.return,l=i,b=t;if(t=zi,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,I=l,C=I.tag;if(!(I.mode&1)&&(C===0||C===11||C===15)){var k=I.alternate;k?(I.updateQueue=k.updateQueue,I.memoizedState=k.memoizedState,I.lanes=k.lanes):(I.updateQueue=null,I.memoizedState=null)}var R=t2(g);if(R!==null){R.flags&=-257,n2(R,g,l,d,t),R.mode&1&&e2(d,w,t),t=R,b=w;var J=t.updateQueue;if(J===null){var Y=new Set;Y.add(b),t.updateQueue=Y}else J.add(b);break e}else{if(!(t&1)){e2(d,w,t),F1();break e}b=Error(At(426))}}else if(Cr&&l.mode&1){var de=t2(g);if(de!==null){!(de.flags&65536)&&(de.flags|=256),n2(de,g,l,d,t),p1(wh(b,l));break e}}d=b=wh(b,l),ci!==4&&(ci=2),Jf===null?Jf=[d]:Jf.push(d),d=g;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var G=KT(d,b,t);Wb(d,G);break e;case 1:l=b;var $=d.type,D=d.stateNode;if(!(d.flags&128)&&(typeof $.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Jl===null||!Jl.has(D)))){d.flags|=65536,t&=-t,d.lanes|=t;var ne=YT(d,l,t);Wb(d,ne);break e}}d=d.return}while(d!==null)}gC(i)}catch(Z){t=Z,ni===i&&i!==null&&(ni=i=i.return);continue}break}while(!0)}function pC(){var e=Km.current;return Km.current=qm,e===null?qm:e}function F1(){(ci===0||ci===3||ci===2)&&(ci=4),wi===null||!(ec&268435455)&&!(Vg&268435455)||$l(wi,zi)}function Qm(e,t){var i=Hn;Hn|=2;var a=pC();(wi!==e||zi!==t)&&(Ua=null,qu(e,t));do try{O3();break}catch(c){dC(e,c)}while(!0);if(g1(),Hn=i,Km.current=a,ni!==null)throw Error(At(261));return wi=null,zi=0,ci}function O3(){for(;ni!==null;)mC(ni)}function R3(){for(;ni!==null&&!aM();)mC(ni)}function mC(e){var t=vC(e.alternate,e,Ro);e.memoizedProps=e.pendingProps,t===null?gC(e):ni=t,P1.current=null}function gC(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=P3(i,t),i!==null){i.flags&=32767,ni=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ci=6,ni=null;return}}else if(i=A3(i,t,Ro),i!==null){ni=i;return}if(t=t.sibling,t!==null){ni=t;return}ni=t=e}while(t!==null);ci===0&&(ci=5)}function $u(e,t,i){var a=rr,c=fs.transition;try{fs.transition=null,rr=1,j3(e,t,i,a)}finally{fs.transition=c,rr=a}return null}function j3(e,t,i,a){do fh();while(Zl!==null);if(Hn&6)throw Error(At(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var d=i.lanes|i.childLanes;if(yM(e,d),e===wi&&(ni=wi=null,zi=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||$p||($p=!0,_C(Fm,function(){return fh(),null})),d=(i.flags&15990)!==0,i.subtreeFlags&15990||d){d=fs.transition,fs.transition=null;var g=rr;rr=1;var l=Hn;Hn|=4,P1.current=null,M3(e,i),cC(i,e),r3(Pv),Rm=!!Av,Pv=Av=null,e.current=i,L3(i),lM(),Hn=l,rr=g,fs.transition=d}else e.current=i;if($p&&($p=!1,Zl=e,Jm=c),d=e.pendingLanes,d===0&&(Jl=null),hM(i.stateNode),Io(e,Qr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(Ym)throw Ym=!1,e=qv,qv=null,e;return Jm&1&&e.tag!==0&&fh(),d=e.pendingLanes,d&1?e===Kv?Qf++:(Qf=0,Kv=e):Qf=0,uu(),null}function fh(){if(Zl!==null){var e=qE(Jm),t=fs.transition,i=rr;try{if(fs.transition=null,rr=16>e?16:e,Zl===null)var a=!1;else{if(e=Zl,Zl=null,Jm=0,Hn&6)throw Error(At(331));var c=Hn;for(Hn|=4,en=e.current;en!==null;){var d=en,g=d.child;if(en.flags&16){var l=d.deletions;if(l!==null){for(var b=0;b<l.length;b++){var w=l[b];for(en=w;en!==null;){var I=en;switch(I.tag){case 0:case 11:case 15:Yf(8,I,d)}var C=I.child;if(C!==null)C.return=I,en=C;else for(;en!==null;){I=en;var k=I.sibling,R=I.return;if(aC(I),I===w){en=null;break}if(k!==null){k.return=R,en=k;break}en=R}}}var J=d.alternate;if(J!==null){var Y=J.child;if(Y!==null){J.child=null;do{var de=Y.sibling;Y.sibling=null,Y=de}while(Y!==null)}}en=d}}if(d.subtreeFlags&2064&&g!==null)g.return=d,en=g;else e:for(;en!==null;){if(d=en,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Yf(9,d,d.return)}var G=d.sibling;if(G!==null){G.return=d.return,en=G;break e}en=d.return}}var $=e.current;for(en=$;en!==null;){g=en;var D=g.child;if(g.subtreeFlags&2064&&D!==null)D.return=g,en=D;else e:for(g=$;en!==null;){if(l=en,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$g(9,l)}}catch(Z){Dr(l,l.return,Z)}if(l===g){en=null;break e}var ne=l.sibling;if(ne!==null){ne.return=l.return,en=ne;break e}en=l.return}}if(Hn=c,uu(),ha&&typeof ha.onPostCommitFiberRoot=="function")try{ha.onPostCommitFiberRoot(Fg,e)}catch{}a=!0}return a}finally{rr=i,fs.transition=t}}return!1}function m2(e,t,i){t=wh(i,t),t=KT(e,t,1),e=Yl(e,t,1),t=ho(),e!==null&&(Od(e,1,t),Io(e,t))}function Dr(e,t,i){if(e.tag===3)m2(e,e,i);else for(;t!==null;){if(t.tag===3){m2(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Jl===null||!Jl.has(a))){e=wh(i,e),e=YT(t,e,1),t=Yl(t,e,1),e=ho(),t!==null&&(Od(t,1,e),Io(t,e));break}}t=t.return}}function D3(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=ho(),e.pingedLanes|=e.suspendedLanes&i,wi===e&&(zi&i)===i&&(ci===4||ci===3&&(zi&130023424)===zi&&500>Qr()-M1?qu(e,0):k1|=i),Io(e,t)}function yC(e,t){t===0&&(e.mode&1?(t=Lp,Lp<<=1,!(Lp&130023424)&&(Lp=4194304)):t=1);var i=ho();e=qa(e,t),e!==null&&(Od(e,t,i),Io(e,i))}function B3(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),yC(e,i)}function N3(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(At(314))}a!==null&&a.delete(t),yC(e,i)}var vC;vC=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||To.current)Eo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Eo=!1,I3(e,t,i);Eo=!!(e.flags&131072)}else Eo=!1,Cr&&t.flags&1048576&&wT(t,Vm,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;vm(e,t),e=t.pendingProps;var c=yh(t,Yi.current);hh(t,i),c=E1(null,t,a,e,c,i);var d=T1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Co(a)?(d=!0,Um(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,_1(t),c.updater=Ng,t.stateNode=c,c._reactInternals=t,Dv(t,a,e,i),t=Uv(null,t,a,!0,d,i)):(t.tag=0,Cr&&d&&f1(t),ao(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(vm(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=$3(a),e=Ls(a,e),c){case 0:t=Nv(null,t,a,e,i);break e;case 1:t=o2(null,t,a,e,i);break e;case 11:t=r2(null,t,a,e,i);break e;case 14:t=i2(null,t,a,Ls(a.type,e),i);break e}throw Error(At(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ls(a,c),Nv(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ls(a,c),o2(e,t,a,c,i);case 3:e:{if(tC(t),e===null)throw Error(At(387));a=t.pendingProps,d=t.memoizedState,c=d.element,TT(e,t),Hm(t,a,null,i);var g=t.memoizedState;if(a=g.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=wh(Error(At(423)),t),t=s2(e,t,a,i,c);break e}else if(a!==c){c=wh(Error(At(424)),t),t=s2(e,t,a,i,c);break e}else for(No=Kl(t.stateNode.containerInfo.firstChild),Uo=t,Cr=!0,Fs=null,i=PT(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(vh(),a===c){t=Ka(e,t,i);break e}ao(e,t,a,i)}t=t.child}return t;case 5:return kT(t),e===null&&Ov(t),a=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,g=c.children,kv(a,c)?g=null:d!==null&&kv(a,d)&&(t.flags|=32),eC(e,t),ao(e,t,g,i),t.child;case 6:return e===null&&Ov(t),null;case 13:return nC(e,t,i);case 4:return x1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=_h(t,null,a,i):ao(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ls(a,c),r2(e,t,a,c,i);case 7:return ao(e,t,t.pendingProps,i),t.child;case 8:return ao(e,t,t.pendingProps.children,i),t.child;case 12:return ao(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,d=t.memoizedProps,g=c.value,mr(Gm,a._currentValue),a._currentValue=g,d!==null)if($s(d.value,g)){if(d.children===c.children&&!To.current){t=Ka(e,t,i);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var l=d.dependencies;if(l!==null){g=d.child;for(var b=l.firstContext;b!==null;){if(b.context===a){if(d.tag===1){b=Ha(-1,i&-i),b.tag=2;var w=d.updateQueue;if(w!==null){w=w.shared;var I=w.pending;I===null?b.next=b:(b.next=I.next,I.next=b),w.pending=b}}d.lanes|=i,b=d.alternate,b!==null&&(b.lanes|=i),Rv(d.return,i,t),l.lanes|=i;break}b=b.next}}else if(d.tag===10)g=d.type===t.type?null:d.child;else if(d.tag===18){if(g=d.return,g===null)throw Error(At(341));g.lanes|=i,l=g.alternate,l!==null&&(l.lanes|=i),Rv(g,i,t),g=d.sibling}else g=d.child;if(g!==null)g.return=d;else for(g=d;g!==null;){if(g===t){g=null;break}if(d=g.sibling,d!==null){d.return=g.return,g=d;break}g=g.return}d=g}ao(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,hh(t,i),c=ds(c),a=a(c),t.flags|=1,ao(e,t,a,i),t.child;case 14:return a=t.type,c=Ls(a,t.pendingProps),c=Ls(a.type,c),i2(e,t,a,c,i);case 15:return JT(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ls(a,c),vm(e,t),t.tag=1,Co(a)?(e=!0,Um(t)):e=!1,hh(t,i),IT(t,a,c),Dv(t,a,c,i),Uv(null,t,a,!0,e,i);case 19:return rC(e,t,i);case 22:return QT(e,t,i)}throw Error(At(156,t.tag))};function _C(e,t){return ZE(e,t)}function U3(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(e,t,i,a){return new U3(e,t,i,a)}function O1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $3(e){if(typeof e=="function")return O1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===e1)return 11;if(e===t1)return 14}return 2}function eu(e,t){var i=e.alternate;return i===null?(i=cs(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function wm(e,t,i,a,c,d){var g=2;if(a=e,typeof e=="function")O1(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Zc:return Ku(i.children,c,d,t);case Q_:g=8,c|=8;break;case lv:return e=cs(12,i,t,c|2),e.elementType=lv,e.lanes=d,e;case uv:return e=cs(13,i,t,c),e.elementType=uv,e.lanes=d,e;case cv:return e=cs(19,i,t,c),e.elementType=cv,e.lanes=d,e;case AE:return Gg(i,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case CE:g=10;break e;case IE:g=9;break e;case e1:g=11;break e;case t1:g=14;break e;case jl:g=16,a=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=cs(g,i,t,c),t.elementType=e,t.type=a,t.lanes=d,t}function Ku(e,t,i,a){return e=cs(7,e,a,t),e.lanes=i,e}function Gg(e,t,i,a){return e=cs(22,e,a,t),e.elementType=AE,e.lanes=i,e.stateNode={isHidden:!1},e}function T0(e,t,i){return e=cs(6,e,null,t),e.lanes=i,e}function C0(e,t,i){return t=cs(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function V3(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=s0(0),this.expirationTimes=s0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=s0(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function R1(e,t,i,a,c,d,g,l,b){return e=new V3(e,t,i,l,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=cs(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},_1(d),e}function G3(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function xC(e){if(!e)return nu;e=e._reactInternals;e:{if(ac(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Co(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var i=e.type;if(Co(i))return _T(e,i,t)}return t}function wC(e,t,i,a,c,d,g,l,b){return e=R1(i,a,!0,e,c,d,g,l,b),e.context=xC(null),i=e.current,a=ho(),c=Ql(i),d=Ha(a,c),d.callback=t??null,Yl(i,d,c),e.current.lanes=c,Od(e,c,a),Io(e,a),e}function Zg(e,t,i,a){var c=t.current,d=ho(),g=Ql(c);return i=xC(i),t.context===null?t.context=i:t.pendingContext=i,t=Ha(d,g),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Yl(c,t,g),e!==null&&(Us(e,c,g,d),mm(e,c,g)),g}function eg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function g2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function j1(e,t){g2(e,t),(e=e.alternate)&&g2(e,t)}function Z3(){return null}var bC=typeof reportError=="function"?reportError:function(e){console.error(e)};function D1(e){this._internalRoot=e}Hg.prototype.render=D1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));Zg(e,t,null,null)};Hg.prototype.unmount=D1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tc(function(){Zg(null,e,null,null)}),t[Xa]=null}};function Hg(e){this._internalRoot=e}Hg.prototype.unstable_scheduleHydration=function(e){if(e){var t=JE();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ul.length&&t!==0&&t<Ul[i].priority;i++);Ul.splice(i,0,e),i===0&&eT(e)}};function B1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function y2(){}function H3(e,t,i,a,c){if(c){if(typeof a=="function"){var d=a;a=function(){var w=eg(g);d.call(w)}}var g=wC(t,a,e,0,null,!1,!1,"",y2);return e._reactRootContainer=g,e[Xa]=g.current,md(e.nodeType===8?e.parentNode:e),tc(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var l=a;a=function(){var w=eg(b);l.call(w)}}var b=R1(e,0,!1,null,null,!1,!1,"",y2);return e._reactRootContainer=b,e[Xa]=b.current,md(e.nodeType===8?e.parentNode:e),tc(function(){Zg(t,b,i,a)}),b}function Xg(e,t,i,a,c){var d=i._reactRootContainer;if(d){var g=d;if(typeof c=="function"){var l=c;c=function(){var b=eg(g);l.call(b)}}Zg(t,g,e,c)}else g=H3(i,t,e,c,a);return eg(g)}KE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Of(t.pendingLanes);i!==0&&(i1(t,i|1),Io(t,Qr()),!(Hn&6)&&(bh=Qr()+500,uu()))}break;case 13:tc(function(){var a=qa(e,1);if(a!==null){var c=ho();Us(a,e,1,c)}}),j1(e,1)}};o1=function(e){if(e.tag===13){var t=qa(e,134217728);if(t!==null){var i=ho();Us(t,e,134217728,i)}j1(e,134217728)}};YE=function(e){if(e.tag===13){var t=Ql(e),i=qa(e,t);if(i!==null){var a=ho();Us(i,e,t,a)}j1(e,t)}};JE=function(){return rr};QE=function(e,t){var i=rr;try{return rr=e,t()}finally{rr=i}};xv=function(e,t,i){switch(t){case"input":if(dv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=Dg(a);if(!c)throw Error(At(90));kE(a),dv(a,c)}}}break;case"textarea":LE(e,i);break;case"select":t=i.value,t!=null&&ah(e,!!i.multiple,t,!1)}};BE=L1;NE=tc;var W3={usingClientEntryPoint:!1,Events:[jd,qc,Dg,jE,DE,L1]},Mf={findFiberByHostInstance:Gu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},X3={bundleType:Mf.bundleType,version:Mf.version,rendererPackageName:Mf.rendererPackageName,rendererConfig:Mf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=VE(e),e===null?null:e.stateNode},findFiberByHostInstance:Mf.findFiberByHostInstance||Z3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vp.isDisabled&&Vp.supportsFiber)try{Fg=Vp.inject(X3),ha=Vp}catch{}}Vo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W3;Vo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B1(t))throw Error(At(200));return G3(e,t,null,i)};Vo.createRoot=function(e,t){if(!B1(e))throw Error(At(299));var i=!1,a="",c=bC;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=R1(e,1,!1,null,null,i,!1,a,c),e[Xa]=t.current,md(e.nodeType===8?e.parentNode:e),new D1(t)};Vo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=VE(t),e=e===null?null:e.stateNode,e};Vo.flushSync=function(e){return tc(e)};Vo.hydrate=function(e,t,i){if(!Wg(t))throw Error(At(200));return Xg(null,e,t,!0,i)};Vo.hydrateRoot=function(e,t,i){if(!B1(e))throw Error(At(405));var a=i!=null&&i.hydratedSources||null,c=!1,d="",g=bC;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),t=wC(t,null,e,1,i??null,c,!1,d,g),e[Xa]=t.current,md(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new Hg(t)};Vo.render=function(e,t,i){if(!Wg(t))throw Error(At(200));return Xg(null,e,t,!1,i)};Vo.unmountComponentAtNode=function(e){if(!Wg(e))throw Error(At(40));return e._reactRootContainer?(tc(function(){Xg(null,null,e,!1,function(){e._reactRootContainer=null,e[Xa]=null})}),!0):!1};Vo.unstable_batchedUpdates=L1;Vo.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!Wg(i))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return Xg(e,t,i,!1,a)};Vo.version="18.2.0-next-9e3b772b8-20220608";function SC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(SC)}catch(e){console.error(e)}}SC(),wE.exports=Vo;var N1=wE.exports;const q3=zd(N1);var EC={exports:{}};(function(e,t){(function(i,a){e.exports=a()})(Nl,function(){var i,a,c;function d(l,b){if(!i)i=b;else if(!a)a=b;else{var w="var sharedChunk = {}; ("+i+")(sharedChunk); ("+a+")(sharedChunk);",I={};i(I),c=b(I),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}d(["exports"],function(l){function b(o,n,s,h){return new(s||(s=Promise))(function(p,v){function x(F){try{P(h.next(F))}catch(W){v(W)}}function S(F){try{P(h.throw(F))}catch(W){v(W)}}function P(F){var W;F.done?p(F.value):(W=F.value,W instanceof s?W:new s(function(Q){Q(W)})).then(x,S)}P((h=h.apply(o,n||[])).next())})}function w(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var I=C;function C(o,n){this.x=o,this.y=n}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),p=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},C.convert=function(o){return o instanceof C?o:Array.isArray(o)?new C(o[0],o[1]):o};var k=w(I),R=J;function J(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}J.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var p=this.sampleCurveX(s)-o;if(Math.abs(p)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=p/v}var x=0,S=1;for(s=o,h=0;h<20&&(p=this.sampleCurveX(s),!(Math.abs(p-o)<n));h++)o>p?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var Y=w(R);let de,G;function $(){return de==null&&(de=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),de}function D(){if(G==null&&(G=!1,$())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const p=4*h;n.fillStyle=`rgb(${p},${p+1},${p+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){G=!0;break}}}return G||!1}function ne(o,n,s,h){const p=new Y(o,n,s,h);return function(v){return p.solve(v)}}const Z=ne(.25,.1,.25,1);function U(o,n,s){return Math.min(s,Math.max(n,o))}function E(o,n,s){const h=s-n,p=((o-n)%h+h)%h+n;return p===n?s:p}function M(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let H=1;function q(o,n,s){const h={};for(const p in o)h[p]=n.call(s||this,o[p],p,o);return h}function ee(o,n,s){const h={};for(const p in o)n.call(s||this,o[p],p,o)&&(h[p]=o[p]);return h}function ve(o){return Array.isArray(o)?o.map(ve):typeof o=="object"&&o?q(o,ve):o}const xe={};function be(o){xe[o]||(typeof console<"u"&&console.warn(o),xe[o]=!0)}function te(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function ue(o){let n=0;for(let s,h,p=0,v=o.length,x=v-1;p<v;x=p++)s=o[p],h=o[x],n+=(h.x-s.x)*(s.y+h.y);return n}function re(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let ie=null;function ye(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Se(o,n,s,h,p){return b(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(o,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),P=new Uint8ClampedArray(h*p*4);if(yield v.copyTo(P,function(F,W,Q,ae,fe){const me=4*Math.max(-W,0),Ae=(Math.max(0,Q)-Q)*ae*4+me,Re=4*ae,Ne=Math.max(0,W),Je=Math.max(0,Q);return{rect:{x:Ne,y:Je,width:Math.min(F.width,W+ae)-Ne,height:Math.min(F.height,Q+fe)-Je},layout:[{offset:Ae,stride:Re}]}}(o,n,s,h,p)),S)for(let F=0;F<P.length;F+=4){const W=P[F];P[F]=P[F+2],P[F+2]=W}return P}finally{v.close()}})}let $e,Pe,ze,Xe;const Ze={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){return this.getImageCanvasContext(o).getImageData(-n,-n,o.width+2*n,o.height+2*n)},getImageCanvasContext(o){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=o.width,n.height=o.height,s.drawImage(o,0,0,o.width,o.height),s},resolveURL:o=>(ze||(ze=document.createElement("a")),ze.href=o,ze.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Xe==null&&(Xe=matchMedia("(prefers-reduced-motion: reduce)")),Xe.matches)}},nt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class ct extends Error{constructor(n,s,h,p){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=p}}const vt=re()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,It=o=>nt.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function ft(o,n){const s=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:vt(),signal:s.signal});let p=!1,v=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(x=>x.ok?(S=>{(o.type==="arrayBuffer"||o.type==="image"?S.arrayBuffer():o.type==="json"?S.json():S.text()).then(P=>{v||(p=!0,n(null,P,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(P=>{v||n(new Error(P.message))})})(x):x.blob().then(S=>n(new ct(x.status,x.statusText,o.url,S)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{v=!0,p||s.abort()}}}const St=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(re()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!re())return(It(o.url)||ft)(o,n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(vt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ft(o,n);if(re()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var s;return function(h,p){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(S){return p(S)}p(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});p(new ct(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(o,n)},Gt=function(o,n){return St(M(o,{type:"arrayBuffer"}),n)};function Ut(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function cn(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function xn(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class yn{constructor(n,s={}){M(this,s),this.type=n}}class sn extends yn{constructor(n,s={}){super("error",M({error:n},s))}}class gn{on(n,s){return this._listeners=this._listeners||{},cn(n,s,this._listeners),this}off(n,s){return xn(n,s,this._listeners),xn(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},cn(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new yn(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of p)S.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of v)xn(h,S,this._oneTimeListeners),S.call(this,n);const x=this._eventedParent;x&&(M(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof sn&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const j=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function O(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return j.forEach(h=>{h in n&&(s[h]=n[h])}),s}function pe(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!pe(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!pe(o[s],n[s]))return!1;return!0}return o===n}const Be={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function et(o,n,s){s.push({command:Be.addSource,args:[o,n[o]]})}function lt(o,n,s){n.push({command:Be.removeSource,args:[o]}),s[o]=!0}function le(o,n,s,h){lt(o,s,h),et(o,n,s)}function z(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!pe(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!pe(o[s][h],n[s][h]))return!1;return!0}function B(o,n,s,h,p,v){let x;for(x in n=n||{},o=o||{})Object.prototype.hasOwnProperty.call(o,x)&&(pe(o[x],n[x])||s.push({command:v,args:[h,x,n[x],p]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(pe(o[x],n[x])||s.push({command:v,args:[h,x,n[x],p]}))}function Ee(o){return o.id}function Ge(o,n){return o[n.id]=n,o}class je{constructor(n,s,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function at(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class jt extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Tn{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,p]of s)this.bindings[h]=p}concat(n){return new Tn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const vn={kind:"null"},_t={kind:"number"},Rt={kind:"string"},nn={kind:"boolean"},wr={kind:"color"},fi={kind:"object"},hn={kind:"value"},er={kind:"collator"},Le={kind:"formatted"},oe={kind:"padding"},ce={kind:"resolvedImage"},_e={kind:"variableAnchorOffsetCollection"};function we(o,n){return{kind:"array",itemType:o,N:n}}function Ce(o){if(o.kind==="array"){const n=Ce(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const He=[vn,_t,Rt,nn,wr,Le,fi,we(hn),oe,ce,_e];function Ve(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Ve(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of He)if(!Ve(s,n))return null}}return`Expected ${Ce(o)} but found ${Ce(n)} instead.`}function Oe(o,n){return n.some(s=>s.kind===o.kind)}function qe(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function ut(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const ht=.96422,mt=.82521,Jt=4/29,un=6/29,Dt=3*un*un,Qt=un*un*un,fn=Math.PI/180,Rn=180/Math.PI;function jn(o){return(o%=360)<0&&(o+=360),o}function Fn([o,n,s,h]){let p,v;const x=ei((.2225045*(o=Mn(o))+.7168786*(n=Mn(n))+.0606169*(s=Mn(s)))/1);o===n&&n===s?p=v=x:(p=ei((.4360747*o+.3850649*n+.1430804*s)/ht),v=ei((.0139322*o+.0971045*n+.7141733*s)/mt));const S=116*x-16;return[S<0?0:S,500*(p-x),200*(x-v),h]}function Mn(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function ei(o){return o>Qt?Math.pow(o,1/3):o/Dt+Jt}function qn([o,n,s,h]){let p=(o+16)/116,v=isNaN(n)?p:p+n/500,x=isNaN(s)?p:p-s/200;return p=1*Ur(p),v=ht*Ur(v),x=mt*Ur(x),[br(3.1338561*v-1.6168667*p-.4906146*x),br(-.9787684*v+1.9161415*p+.033454*x),br(.0719453*v-.2289914*p+1.4052427*x),h]}function br(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Ur(o){return o>un?o*o*o:Dt*(o-Jt)}function ri(o){return parseInt(o.padEnd(2,o),16)/255}function Gs(o,n){return ms(n?o/100:o,0,1)}function ms(o,n,s){return Math.min(Math.max(n,o),s)}function wn(o){return!o.some(Number.isNaN)}const gs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Gn{constructor(n,s,h,p=1,v=!0){this.r=n,this.g=s,this.b=h,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[n,s,h,p]))}static parse(n){if(n instanceof Gn)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=gs[h];if(p){const[x,S,P]=p;return[x/255,S/255,P/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[ri(h.slice(S,S+=x)),ri(h.slice(S,S+=x)),ri(h.slice(S,S+=x)),ri(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,P,F,W,Q,ae,fe,me,Ae,Re,Ne,Je]=x,We=[W||" ",fe||" ",Re].join("");if(We==="  "||We==="  /"||We===",,"||We===",,,"){const Qe=[F,ae,Ae].join(""),rt=Qe==="%%%"?100:Qe===""?255:0;if(rt){const gt=[ms(+P/rt,0,1),ms(+Q/rt,0,1),ms(+me/rt,0,1),Ne?Gs(+Ne,Je):1];if(wn(gt))return gt}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,S,P,F,W,Q,ae,fe,me]=v,Ae=[P||" ",W||" ",ae].join("");if(Ae==="  "||Ae==="  /"||Ae===",,"||Ae===",,,"){const Re=[+S,ms(+F,0,100),ms(+Q,0,100),fe?Gs(+fe,me):1];if(wn(Re))return function([Ne,Je,We,Qe]){function rt(gt){const Ot=(gt+Ne/30)%12,Vt=Je*Math.min(We,1-We);return We-Vt*Math.max(-1,Math.min(Ot-3,9-Ot,1))}return Ne=jn(Ne),Je/=100,We/=100,[rt(0),rt(8),rt(4),Qe]}(Re)}}}(n);return s?new Gn(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[n/v,s/v,h/v,p])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,p,v]=Fn(n),x=Math.sqrt(h*h+p*p);return[Math.round(1e4*x)?jn(Math.atan2(p,h)*Rn):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Fn(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,p]=this.rgb;return`rgba(${[n,s,h].map(v=>Math.round(255*v)).join(",")},${p})`}}Gn.black=new Gn(0,0,0,1),Gn.white=new Gn(1,1,1,1),Gn.transparent=new Gn(0,0,0,0),Gn.red=new Gn(1,0,0,1);class cu{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class rl{constructor(n,s,h,p,v){this.text=n,this.image=s,this.scale=h,this.fontStack=p,this.textColor=v}}class ti{constructor(n){this.sections=n}static fromString(n){return new ti([new rl(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof ti?n:ti.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Si{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Si)return n;if(typeof n=="number")return new Si([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Si(n)}}toString(){return JSON.stringify(this.values)}}const Ao=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Oi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Oi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],p=n[s+1];if(typeof h!="string"||!Ao.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Oi(n)}}toString(){return JSON.stringify(this.values)}}class $r{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new $r({name:n,available:!1}):null}}function il(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Zs(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Gn||o instanceof cu||o instanceof ti||o instanceof Si||o instanceof Oi||o instanceof $r)return!0;if(Array.isArray(o)){for(const n of o)if(!Zs(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!Zs(o[n]))return!1;return!0}return!1}function ir(o){if(o===null)return vn;if(typeof o=="string")return Rt;if(typeof o=="boolean")return nn;if(typeof o=="number")return _t;if(o instanceof Gn)return wr;if(o instanceof cu)return er;if(o instanceof ti)return Le;if(o instanceof Si)return oe;if(o instanceof Oi)return _e;if(o instanceof $r)return ce;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const p=ir(h);if(s){if(s===p)continue;s=hn;break}s=p}return we(s||hn,n)}return fi}function bn(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Gn||o instanceof ti||o instanceof Si||o instanceof Oi||o instanceof $r?o.toString():JSON.stringify(o)}class ys{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Zs(n[1]))return s.error("invalid value");const h=n[1];let p=ir(h);const v=s.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new ys(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class hr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const ol={string:Rt,number:_t,boolean:nn,object:fi};class Ri{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,p=1;const v=n[0];if(v==="array"){let S,P;if(n.length>2){const F=n[1];if(typeof F!="string"||!(F in ol)||F==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=ol[F],p++}else S=hn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);P=n[2],p++}h=we(S,P)}else{if(!ol[v])throw new Error(`Types doesn't contain name = ${v}`);h=ol[v]}const x=[];for(;p<n.length;p++){const S=s.parse(n[p],p,hn);if(!S)return null;x.push(S)}return new Ri(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!Ve(this.type,ir(h)))return h;if(s===this.args.length-1)throw new hr(`Expected value to be of type ${Ce(this.type)}, but found ${Ce(ir(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const hu={"to-boolean":nn,"to-color":wr,"to-number":_t,"to-string":Rt};class Ji{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!hu[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const p=hu[h],v=[];for(let x=1;x<n.length;x++){const S=s.parse(n[x],x,hn);if(!S)return null;v.push(S)}return new Ji(p,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const p of this.args){if(s=p.evaluate(n),h=null,s instanceof Gn)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:il(s[0],s[1],s[2],s[3]),!h))return new Gn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new hr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const p=Si.parse(s);if(p)return p}throw new hr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const p=Oi.parse(s);if(p)return p}throw new hr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new hr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return ti.fromString(bn(this.args[0].evaluate(n)));case"resolvedImage":return $r.fromString(bn(this.args[0].evaluate(n)));default:return bn(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const hc=["Unknown","Point","LineString","Polygon"];class fu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?hc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Gn.parse(n)),s}}class di{constructor(n,s,h=[],p,v=new Tn,x=[]){this.registry=n,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=x,this.expectedType=p,this._isConstant=s}parse(n,s,h,p,v={}){return s?this.concat(s,h,p)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(p,v,x){return x==="assert"?new Ri(v,[p]):x==="coerce"?new Ji(v,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,P=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||P.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(S.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(S,P))return null}else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof ys)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new fu;try{x=new ys(x.type,x.evaluate(S))}catch(P){return this.error(P.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const p=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new di(this.registry,this._isConstant,p,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new jt(h,n))}checkSubtype(n,s){const h=Ve(n,s);return h&&this.error(h),h}}class sl{constructor(n,s,h){this.type=er,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const p=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,nn);if(!p)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,nn);if(!v)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Rt),!x)?null:new sl(p,v,x)}evaluate(n){return new cu(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Wo=8192;function du(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function ga(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function fc(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(s*p*Wo),Math.round(h*p*Wo)]}function dc(o,n,s){const h=o[0]-n[0],p=o[1]-n[1],v=o[0]-s[0],x=o[1]-s[1];return h*x-v*p==0&&h*v<=0&&p*x<=0}function ya(o,n){let s=!1;for(let x=0,S=n.length;x<S;x++){const P=n[x];for(let F=0,W=P.length;F<W-1;F++){if(dc(o,P[F],P[F+1]))return!1;(p=P[F])[1]>(h=o)[1]!=(v=P[F+1])[1]>h[1]&&h[0]<(v[0]-p[0])*(h[1]-p[1])/(v[1]-p[1])+p[0]&&(s=!s)}}var h,p,v;return s}function al(o,n){for(let s=0;s<n.length;s++)if(ya(o,n[s]))return!0;return!1}function va(o,n,s,h){const p=h[0]-s[0],v=h[1]-s[1],x=(o[0]-s[0])*v-p*(o[1]-s[1]),S=(n[0]-s[0])*v-p*(n[1]-s[1]);return x>0&&S<0||x<0&&S>0}function Oh(o,n,s){for(const F of s)for(let W=0;W<F.length-1;++W)if((S=[(x=F[W+1])[0]-(v=F[W])[0],x[1]-v[1]])[0]*(P=[(p=n)[0]-(h=o)[0],p[1]-h[1]])[1]-S[1]*P[0]!=0&&va(h,p,v,x)&&va(v,x,h,p))return!0;var h,p,v,x,S,P;return!1}function vs(o,n){for(let s=0;s<o.length;++s)if(!ya(o[s],n))return!1;for(let s=0;s<o.length-1;++s)if(Oh(o[s],o[s+1],n))return!1;return!0}function pc(o,n){for(let s=0;s<n.length;s++)if(vs(o,n[s]))return!0;return!1}function ll(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=[];for(let x=0;x<o[p].length;x++){const S=fc(o[p][x],s);du(n,S),v.push(S)}h.push(v)}return h}function mc(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=ll(o[p],n,s);h.push(v)}return h}function gc(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const p=.5*h;let v=o[0]-s[0]>p?-h:s[0]-o[0]>p?h:0;v===0&&(v=o[0]-s[2]>p?-h:s[2]-o[0]>p?h:0),o[0]+=v}du(n,o)}function ul(o,n,s,h){const p=Math.pow(2,h.z)*Wo,v=[h.x*Wo,h.y*Wo],x=[];for(const S of o)for(const P of S){const F=[P.x+v[0],P.y+v[1]];gc(F,n,s,p),x.push(F)}return x}function pu(o,n,s,h){const p=Math.pow(2,h.z)*Wo,v=[h.x*Wo,h.y*Wo],x=[];for(const P of o){const F=[];for(const W of P){const Q=[W.x+v[0],W.y+v[1]];du(n,Q),F.push(Q)}x.push(F)}if(n[2]-n[0]<=p/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const P of x)for(const F of P)gc(F,n,s,p)}var S;return x}class _s{constructor(n,s){this.type=nn,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Zs(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const v=h.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new _s(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new _s(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new _s(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=ll(h.coordinates,v,x),P=ul(s.geometry(),p,v,x);if(!ga(p,v))return!1;for(const F of P)if(!ya(F,S))return!1}if(h.type==="MultiPolygon"){const S=mc(h.coordinates,v,x),P=ul(s.geometry(),p,v,x);if(!ga(p,v))return!1;for(const F of P)if(!al(F,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=ll(h.coordinates,v,x),P=pu(s.geometry(),p,v,x);if(!ga(p,v))return!1;for(const F of P)if(!vs(F,S))return!1}if(h.type==="MultiPolygon"){const S=mc(h.coordinates,v,x),P=pu(s.geometry(),p,v,x);if(!ga(p,v))return!1;for(const F of P)if(!pc(F,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class cl{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new cl(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class pi{constructor(n,s,h,p){this.name=n,this.type=s,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],p=pi.definitions[h];if(!p)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,S=x.filter(([F])=>!Array.isArray(F)||F.length===n.length-1);let P=null;for(const[F,W]of S){P=new di(s.registry,hl,s.path,null,s.scope);const Q=[];let ae=!1;for(let fe=1;fe<n.length;fe++){const me=n[fe],Ae=Array.isArray(F)?F[fe-1]:F.type,Re=P.parse(me,1+Q.length,Ae);if(!Re){ae=!0;break}Q.push(Re)}if(!ae)if(Array.isArray(F)&&F.length!==Q.length)P.error(`Expected ${F.length} arguments, but found ${Q.length} instead.`);else{for(let fe=0;fe<Q.length;fe++){const me=Array.isArray(F)?F[fe]:F.type,Ae=Q[fe];P.concat(fe+1).checkSubtype(me,Ae.type)}if(P.errors.length===0)return new pi(h,v,W,Q)}}if(S.length===1)s.errors.push(...P.errors);else{const F=(S.length?S:x).map(([Q])=>{return ae=Q,Array.isArray(ae)?`(${ae.map(Ce).join(", ")})`:`(${Ce(ae.type)}...)`;var ae}).join(" | "),W=[];for(let Q=1;Q<n.length;Q++){const ae=s.parse(n[Q],1+W.length);if(!ae)return null;W.push(Ce(ae.type))}s.error(`Expected arguments of type ${F}, but found (${W.join(", ")}) instead.`)}return null}static register(n,s){pi.definitions=s;for(const h in s)n[h]=pi}}function hl(o){if(o instanceof cl)return hl(o.boundExpression);if(o instanceof pi&&o.name==="error"||o instanceof sl||o instanceof _s)return!1;const n=o instanceof Ji||o instanceof Ri;let s=!0;return o.eachChild(h=>{s=n?s&&hl(h):s&&h instanceof ys}),!!s&&fl(o)&&dl(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function fl(o){if(o instanceof pi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof _s)return!1;let n=!0;return o.eachChild(s=>{n&&!fl(s)&&(n=!1)}),n}function _a(o){if(o instanceof pi&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!_a(s)&&(n=!1)}),n}function dl(o,n){if(o instanceof pi&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!dl(h,n)&&(s=!1)}),s}function xs(o,n){const s=o.length-1;let h,p,v=0,x=s,S=0;for(;v<=x;)if(S=Math.floor((v+x)/2),h=o[S],p=o[S+1],h<=n){if(S===s||n<p)return S;v=S+1}else{if(!(h>n))throw new hr("Input is not a number.");x=S-1}return 0}class Xo{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,_t);if(!h)return null;const p=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<n.length;x+=2){const S=x===1?-1/0:n[x],P=n[x+1],F=x,W=x+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(p.length&&p[p.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',F);const Q=s.parse(P,W,v);if(!Q)return null;v=v||Q.type,p.push([S,Q])}return new Xo(v,h,p)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;return p>=s[v-1]?h[v-1].evaluate(n):h[xs(s,p)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function In(o,n,s){return o+s*(n-o)}function pl(o,n,s){return o.map((h,p)=>In(h,n[p],s))}const Ei={number:In,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[p,v,x,S]=pl(o.rgb,n.rgb,s);return new Gn(p,v,x,S,!1)}case"hcl":{const[p,v,x,S]=o.hcl,[P,F,W,Q]=n.hcl;let ae,fe;if(isNaN(p)||isNaN(P))isNaN(p)?isNaN(P)?ae=NaN:(ae=P,x!==1&&x!==0||(fe=F)):(ae=p,W!==1&&W!==0||(fe=v));else{let Je=P-p;P>p&&Je>180?Je-=360:P<p&&p-P>180&&(Je+=360),ae=p+s*Je}const[me,Ae,Re,Ne]=function([Je,We,Qe,rt]){return Je=isNaN(Je)?0:Je*fn,qn([Qe,Math.cos(Je)*We,Math.sin(Je)*We,rt])}([ae,fe??In(v,F,s),In(x,W,s),In(S,Q,s)]);return new Gn(me,Ae,Re,Ne,!1)}case"lab":{const[p,v,x,S]=qn(pl(o.lab,n.lab,s));return new Gn(p,v,x,S,!1)}}},array:pl,padding:function(o,n,s){return new Si(pl(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const h=o.values,p=n.values;if(h.length!==p.length)throw new hr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==p[x])throw new hr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${p[x]}`);v.push(h[x]);const[S,P]=h[x+1],[F,W]=p[x+1];v.push([In(S,F,s),In(P,W,s)])}return new Oi(v)}};class mi{constructor(n,s,h,p,v){this.type=n,this.operator=s,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,S]of v)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(n,s,h,p){let v=0;if(n.name==="exponential")v=mu(s,n.base,h,p);else if(n.name==="linear")v=mu(s,1,h,p);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new Y(x[0],x[1],x[2],x[3]).solve(mu(s,1,h,p))}return v}static parse(n,s){let[h,p,v,...x]=n;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const F=p[1];if(typeof F!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:F}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const F=p.slice(1);if(F.length!==4||F.some(W=>typeof W!="number"||W<0||W>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:F}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,_t),!v)return null;const S=[];let P=null;h==="interpolate-hcl"||h==="interpolate-lab"?P=wr:s.expectedType&&s.expectedType.kind!=="value"&&(P=s.expectedType);for(let F=0;F<x.length;F+=2){const W=x[F],Q=x[F+1],ae=F+3,fe=F+4;if(typeof W!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ae);if(S.length&&S[S.length-1][0]>=W)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ae);const me=s.parse(Q,fe,P);if(!me)return null;P=P||me.type,S.push([W,me])}return ut(P,_t)||ut(P,wr)||ut(P,oe)||ut(P,_e)||ut(P,we(_t))?new mi(P,h,p,v,S):s.error(`Type ${Ce(P)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;if(p>=s[v-1])return h[v-1].evaluate(n);const x=xs(s,p),S=mi.interpolationFactor(this.interpolation,p,s[x],s[x+1]),P=h[x].evaluate(n),F=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return Ei[this.type.kind](P,F,S);case"interpolate-hcl":return Ei.color(P,F,S,"hcl");case"interpolate-lab":return Ei.color(P,F,S,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function mu(o,n,s,h){const p=h-s,v=o-s;return p===0?0:n===1?v/p:(Math.pow(n,v)-1)/(Math.pow(n,p)-1)}class ml{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const p=s.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const S of n.slice(1)){const P=s.parse(S,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!P)return null;h=h||P.type,v.push(P)}if(!h)throw new Error("No output type");const x=p&&v.some(S=>Ve(p,S.type));return new ml(x?hn:h,v)}evaluate(n){let s,h=null,p=0;for(const v of this.args)if(p++,h=v.evaluate(n),h&&h instanceof $r&&!h.available&&(s||(s=h.name),h=null,p===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class gl{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=s.parse(n[v+1],v+1);if(!S)return null;h.push([x,S])}const p=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return p?new gl(h,p):null}outputDefined(){return this.result.outputDefined()}}class gu{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,_t),p=s.parse(n[2],2,we(s.expectedType||hn));return h&&p?new gu(p.type.itemType,h,p):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new hr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new hr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new hr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class yl{constructor(n,s){this.type=nn,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,hn),p=s.parse(n[2],2,hn);return h&&p?Oe(h.type,[nn,Rt,_t,vn,hn])?new yl(h,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!qe(s,["boolean","string","number","null"]))throw new hr(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(ir(s))} instead.`);if(!qe(h,["string","array"]))throw new hr(`Expected second argument to be of type array or string, but found ${Ce(ir(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class vl{constructor(n,s,h){this.type=_t,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,hn),p=s.parse(n[2],2,hn);if(!h||!p)return null;if(!Oe(h.type,[nn,Rt,_t,vn,hn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,_t);return v?new vl(h,p,v):null}return new vl(h,p)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!qe(s,["boolean","string","number","null"]))throw new hr(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(ir(s))} instead.`);if(!qe(h,["string","array"]))throw new hr(`Expected second argument to be of type array or string, but found ${Ce(ir(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return h.indexOf(s,p)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class xa{constructor(n,s,h,p,v,x){this.inputType=n,this.type=s,this.input=h,this.cases=p,this.outputs=v,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const v={},x=[];for(let F=2;F<n.length-1;F+=2){let W=n[F];const Q=n[F+1];Array.isArray(W)||(W=[W]);const ae=s.concat(F);if(W.length===0)return ae.error("Expected at least one branch label.");for(const me of W){if(typeof me!="number"&&typeof me!="string")return ae.error("Branch labels must be numbers or strings.");if(typeof me=="number"&&Math.abs(me)>Number.MAX_SAFE_INTEGER)return ae.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof me=="number"&&Math.floor(me)!==me)return ae.error("Numeric branch labels must be integer values.");if(h){if(ae.checkSubtype(h,ir(me)))return null}else h=ir(me);if(v[String(me)]!==void 0)return ae.error("Branch labels must be unique.");v[String(me)]=x.length}const fe=s.parse(Q,F,p);if(!fe)return null;p=p||fe.type,x.push(fe)}const S=s.parse(n[1],1,hn);if(!S)return null;const P=s.parse(n[n.length-1],n.length-1,p);return P?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new xa(h,p,S,v,x,P):null}evaluate(n){const s=this.input.evaluate(n);return(ir(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class yu{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const p=[];for(let x=1;x<n.length-1;x+=2){const S=s.parse(n[x],x,nn);if(!S)return null;const P=s.parse(n[x+1],x+1,h);if(!P)return null;p.push([S,P]),h=h||P.type}const v=s.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new yu(h,p,v)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class _l{constructor(n,s,h,p){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=p}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,hn),p=s.parse(n[2],2,_t);if(!h||!p)return null;if(!Oe(h.type,[we(hn),Rt,hn]))return s.error(`Expected first argument to be of type array or string, but found ${Ce(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,_t);return v?new _l(h.type,h,p,v):null}return new _l(h.type,h,p)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!qe(s,["string","array"]))throw new hr(`Expected first argument to be of type array or string, but found ${Ce(ir(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return s.slice(h,p)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function yc(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function vc(o,n,s,h){return h.compare(n,s)===0}function Hs(o,n,s){const h=o!=="=="&&o!=="!=";return class TC{constructor(v,x,S){this.type=nn,this.lhs=v,this.rhs=x,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const S=v[0];let P=x.parse(v[1],1,hn);if(!P)return null;if(!yc(S,P.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${Ce(P.type)}'.`);let F=x.parse(v[2],2,hn);if(!F)return null;if(!yc(S,F.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${Ce(F.type)}'.`);if(P.type.kind!==F.type.kind&&P.type.kind!=="value"&&F.type.kind!=="value")return x.error(`Cannot compare types '${Ce(P.type)}' and '${Ce(F.type)}'.`);h&&(P.type.kind==="value"&&F.type.kind!=="value"?P=new Ri(F.type,[P]):P.type.kind!=="value"&&F.type.kind==="value"&&(F=new Ri(P.type,[F])));let W=null;if(v.length===4){if(P.type.kind!=="string"&&F.type.kind!=="string"&&P.type.kind!=="value"&&F.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(W=x.parse(v[3],3,er),!W)return null}return new TC(P,F,W)}evaluate(v){const x=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const P=ir(x),F=ir(S);if(P.kind!==F.kind||P.kind!=="string"&&P.kind!=="number")throw new hr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${P.kind}, ${F.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const P=ir(x),F=ir(S);if(P.kind!=="string"||F.kind!=="string")return n(v,x,S)}return this.collator?s(v,x,S,this.collator.evaluate(v)):n(v,x,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Rh=Hs("==",function(o,n,s){return n===s},vc),_c=Hs("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!vc(0,n,s,h)}),vu=Hs("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),jh=Hs(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),Dh=Hs("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),Bh=Hs(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class _u{constructor(n,s,h,p,v){this.type=Rt,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,_t);if(!h)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=s.parse(p.locale,1,Rt),!v))return null;let x=null;if(p.currency&&(x=s.parse(p.currency,1,Rt),!x))return null;let S=null;if(p["min-fraction-digits"]&&(S=s.parse(p["min-fraction-digits"],1,_t),!S))return null;let P=null;return p["max-fraction-digits"]&&(P=s.parse(p["max-fraction-digits"],1,_t),!P)?null:new _u(h,v,x,S,P)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class wa{constructor(n){this.type=Le,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const p=[];let v=!1;for(let x=1;x<=n.length-1;++x){const S=n[x];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let P=null;if(S["font-scale"]&&(P=s.parse(S["font-scale"],1,_t),!P))return null;let F=null;if(S["text-font"]&&(F=s.parse(S["text-font"],1,we(Rt)),!F))return null;let W=null;if(S["text-color"]&&(W=s.parse(S["text-color"],1,wr),!W))return null;const Q=p[p.length-1];Q.scale=P,Q.font=F,Q.textColor=W}else{const P=s.parse(n[x],1,hn);if(!P)return null;const F=P.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:P,scale:null,font:null,textColor:null})}}return new wa(p)}evaluate(n){return new ti(this.sections.map(s=>{const h=s.content.evaluate(n);return ir(h)===ce?new rl("",h,null,null,null):new rl(bn(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class xu{constructor(n){this.type=ce,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Rt);return h?new xu(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=$r.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class wu{constructor(n){this.type=_t,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Ce(h.type)} instead.`):new wu(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new hr(`Expected value to be of type string or array, but found ${Ce(ir(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Ws={"==":Rh,"!=":_c,">":jh,"<":vu,">=":Bh,"<=":Dh,array:Ri,at:gu,boolean:Ri,case:yu,coalesce:ml,collator:sl,format:wa,image:xu,in:yl,"index-of":vl,interpolate:mi,"interpolate-hcl":mi,"interpolate-lab":mi,length:wu,let:gl,literal:ys,match:xa,number:Ri,"number-format":_u,object:Ri,slice:_l,step:Xo,string:Ri,"to-boolean":Ji,"to-color":Ji,"to-number":Ji,"to-string":Ji,var:cl,within:_s};function xc(o,[n,s,h,p]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const v=p?p.evaluate(o):1,x=il(n,s,h,v);if(x)throw new hr(x);return new Gn(n/255,s/255,h/255,v,!1)}function ba(o,n){return o in n}function bu(o,n){const s=n[o];return s===void 0?null:s}function ji(o){return{type:o}}function Su(o){return{result:"success",value:o}}function Vr(o){return{result:"error",value:o}}function Xs(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function wc(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Eu(o){return!!o.expression&&o.expression.interpolated}function Dn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Jn(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Nh(o){return o}function Sn(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),v=o.type||(Eu(n)?"exponential":"interval");if(s||n.type==="padding"){const W=s?Gn.parse:Si.parse;(o=at({},o)).stops&&(o.stops=o.stops.map(Q=>[Q[0],W(Q[1])])),o.default=W(o.default?o.default:n.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let S,P,F;if(v==="exponential")S=qs;else if(v==="interval")S=Wn;else if(v==="categorical"){S=or,P=Object.create(null);for(const W of o.stops)P[W[0]]=W[1];F=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=Tu}if(h){const W={},Q=[];for(let me=0;me<o.stops.length;me++){const Ae=o.stops[me],Re=Ae[0].zoom;W[Re]===void 0&&(W[Re]={zoom:Re,type:o.type,property:o.property,default:o.default,stops:[]},Q.push(Re)),W[Re].stops.push([Ae[0].value,Ae[1]])}const ae=[];for(const me of Q)ae.push([W[me].zoom,Sn(W[me],n)]);const fe={name:"linear"};return{kind:"composite",interpolationType:fe,interpolationFactor:mi.interpolationFactor.bind(void 0,fe),zoomStops:ae.map(me=>me[0]),evaluate:({zoom:me},Ae)=>qs({stops:ae,base:o.base},n,me).evaluate(me,Ae)}}if(p){const W=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:W,interpolationFactor:mi.interpolationFactor.bind(void 0,W),zoomStops:o.stops.map(Q=>Q[0]),evaluate:({zoom:Q})=>S(o,n,Q,P,F)}}return{kind:"source",evaluate(W,Q){const ae=Q&&Q.properties?Q.properties[o.property]:void 0;return ae===void 0?ws(o.default,n.default):S(o,n,ae,P,F)}}}function ws(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function or(o,n,s,h,p){return ws(typeof s===p?h[s]:void 0,o.default,n.default)}function Wn(o,n,s){if(Dn(s)!=="number")return ws(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const p=xs(o.stops.map(v=>v[0]),s);return o.stops[p][1]}function qs(o,n,s){const h=o.base!==void 0?o.base:1;if(Dn(s)!=="number")return ws(o.default,n.default);const p=o.stops.length;if(p===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[p-1][0])return o.stops[p-1][1];const v=xs(o.stops.map(W=>W[0]),s),x=function(W,Q,ae,fe){const me=fe-ae,Ae=W-ae;return me===0?0:Q===1?Ae/me:(Math.pow(Q,Ae)-1)/(Math.pow(Q,me)-1)}(s,h,o.stops[v][0],o.stops[v+1][0]),S=o.stops[v][1],P=o.stops[v+1][1],F=Ei[n.type]||Nh;return typeof S.evaluate=="function"?{evaluate(...W){const Q=S.evaluate.apply(void 0,W),ae=P.evaluate.apply(void 0,W);if(Q!==void 0&&ae!==void 0)return F(Q,ae,x,o.colorSpace)}}:F(S,P,x,o.colorSpace)}function Tu(o,n,s){switch(n.type){case"color":s=Gn.parse(s);break;case"formatted":s=ti.fromString(s.toString());break;case"resolvedImage":s=$r.fromString(s.toString());break;case"padding":s=Si.parse(s);break;default:Dn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return ws(s,o.default,n.default)}pi.register(Ws,{error:[{kind:"error"},[Rt],(o,[n])=>{throw new hr(n.evaluate(o))}],typeof:[Rt,[hn],(o,[n])=>Ce(ir(n.evaluate(o)))],"to-rgba":[we(_t,4),[wr],(o,[n])=>{const[s,h,p,v]=n.evaluate(o).rgb;return[255*s,255*h,255*p,v]}],rgb:[wr,[_t,_t,_t],xc],rgba:[wr,[_t,_t,_t,_t],xc],has:{type:nn,overloads:[[[Rt],(o,[n])=>ba(n.evaluate(o),o.properties())],[[Rt,fi],(o,[n,s])=>ba(n.evaluate(o),s.evaluate(o))]]},get:{type:hn,overloads:[[[Rt],(o,[n])=>bu(n.evaluate(o),o.properties())],[[Rt,fi],(o,[n,s])=>bu(n.evaluate(o),s.evaluate(o))]]},"feature-state":[hn,[Rt],(o,[n])=>bu(n.evaluate(o),o.featureState||{})],properties:[fi,[],o=>o.properties()],"geometry-type":[Rt,[],o=>o.geometryType()],id:[hn,[],o=>o.id()],zoom:[_t,[],o=>o.globals.zoom],"heatmap-density":[_t,[],o=>o.globals.heatmapDensity||0],"line-progress":[_t,[],o=>o.globals.lineProgress||0],accumulated:[hn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[_t,ji(_t),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[_t,ji(_t),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:_t,overloads:[[[_t,_t],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[_t],(o,[n])=>-n.evaluate(o)]]},"/":[_t,[_t,_t],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[_t,[_t,_t],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[_t,[],()=>Math.LN2],pi:[_t,[],()=>Math.PI],e:[_t,[],()=>Math.E],"^":[_t,[_t,_t],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[_t,[_t],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[_t,[_t],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[_t,[_t],(o,[n])=>Math.log(n.evaluate(o))],log2:[_t,[_t],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[_t,[_t],(o,[n])=>Math.sin(n.evaluate(o))],cos:[_t,[_t],(o,[n])=>Math.cos(n.evaluate(o))],tan:[_t,[_t],(o,[n])=>Math.tan(n.evaluate(o))],asin:[_t,[_t],(o,[n])=>Math.asin(n.evaluate(o))],acos:[_t,[_t],(o,[n])=>Math.acos(n.evaluate(o))],atan:[_t,[_t],(o,[n])=>Math.atan(n.evaluate(o))],min:[_t,ji(_t),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[_t,ji(_t),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[_t,[_t],(o,[n])=>Math.abs(n.evaluate(o))],round:[_t,[_t],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[_t,[_t],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[_t,[_t],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[nn,[Rt,hn],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[nn,[hn],(o,[n])=>o.id()===n.value],"filter-type-==":[nn,[Rt],(o,[n])=>o.geometryType()===n.value],"filter-<":[nn,[Rt,hn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<p}],"filter-id-<":[nn,[hn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[nn,[Rt,hn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>p}],"filter-id->":[nn,[hn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[nn,[Rt,hn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[nn,[hn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[nn,[Rt,hn],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[nn,[hn],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[nn,[hn],(o,[n])=>n.value in o.properties()],"filter-has-id":[nn,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[nn,[we(Rt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[nn,[we(hn)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[nn,[Rt,we(hn)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[nn,[Rt,we(hn)],(o,[n,s])=>function(h,p,v,x){for(;v<=x;){const S=v+x>>1;if(p[S]===h)return!0;p[S]>h?x=S-1:v=S+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:nn,overloads:[[[nn,nn],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[ji(nn),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:nn,overloads:[[[nn,nn],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[ji(nn),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[nn,[nn],(o,[n])=>!n.evaluate(o)],"is-supported-script":[nn,[Rt],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Rt,[Rt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Rt,[Rt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Rt,ji(hn),(o,n)=>n.map(s=>bn(s.evaluate(o))).join("")],"resolved-locale":[Rt,[er],(o,[n])=>n.evaluate(o).resolvedLocale()]});class Cu{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new fu,this._defaultValue=s?(h=s).type==="color"&&Jn(h.default)?new Gn(0,0,0,0):h.type==="color"?Gn.parse(h.default)||null:h.type==="padding"?Si.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Oi.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,p,v,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new hr(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function xl(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Ws}function bs(o,n){const s=new di(Ws,hl,[],n?function(p){const v={color:wr,string:Rt,number:_t,enum:Rt,boolean:nn,formatted:Le,padding:oe,resolvedImage:ce,variableAnchorOffsetCollection:_e};return p.type==="array"?we(v[p.value]||hn,p.length):v[p.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Su(new Cu(h,n)):Vr(s.errors)}class Po{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!_a(s.expression)}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,x)}evaluate(n,s,h,p,v,x){return this._styleExpression.evaluate(n,s,h,p,v,x)}}class wl{constructor(n,s,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!_a(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,x)}evaluate(n,s,h,p,v,x){return this._styleExpression.evaluate(n,s,h,p,v,x)}interpolationFactor(n,s,h){return this.interpolationType?mi.interpolationFactor(this.interpolationType,n,s,h):0}}function bl(o,n){const s=bs(o,n);if(s.result==="error")return s;const h=s.value.expression,p=fl(h);if(!p&&!Xs(n))return Vr([new jt("","data expressions not supported")]);const v=dl(h,["zoom"]);if(!v&&!wc(n))return Vr([new jt("","zoom expressions not supported")]);const x=Sa(h);return x||v?x instanceof jt?Vr([x]):x instanceof mi&&!Eu(n)?Vr([new jt("",'"interpolate" expressions cannot be used with this property')]):Su(x?new wl(p?"camera":"composite",s.value,x.labels,x instanceof mi?x.interpolation:void 0):new Po(p?"constant":"source",s.value)):Vr([new jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class qo{constructor(n,s){this._parameters=n,this._specification=s,at(this,Sn(this._parameters,this._specification))}static deserialize(n){return new qo(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Sa(o){let n=null;if(o instanceof gl)n=Sa(o.result);else if(o instanceof ml){for(const s of o.args)if(n=Sa(s),n)break}else(o instanceof Xo||o instanceof mi)&&o.input instanceof pi&&o.input.name==="zoom"&&(n=o);return n instanceof jt||o.eachChild(s=>{const h=Sa(s);h instanceof jt?n=h:!n&&h?n=new jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new jt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function vo(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!vo(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Ks={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Gr(o){if(o==null)return{filter:()=>!0,needGeometry:!1};vo(o)||(o=Ys(o));const n=bs(o,Ks);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,p)=>n.value.evaluate(s,h,{},p),needGeometry:Sl(o)}}function Ss(o,n){return o<n?-1:o>n?1:0}function Sl(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(Sl(o[n]))return!0;return!1}function Ys(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Iu(o[1],o[2],"=="):n==="!="?ii(Iu(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Iu(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(Ys))):n==="all"?["all"].concat(o.slice(1).map(Ys)):n==="none"?["all"].concat(o.slice(1).map(Ys).map(ii)):n==="in"?Ea(o[1],o.slice(2)):n==="!in"?ii(Ea(o[1],o.slice(2))):n==="has"?Ta(o[1]):n==="!has"?ii(Ta(o[1])):n!=="within"||o;var s}function Iu(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Ea(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(Ss)]]:["filter-in-small",o,["literal",n]]}}function Ta(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function ii(o){return["!",o]}function ko(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let p="[";for(const v of o)p+=`${ko(v)},`;return`${p}]`}const s=Object.keys(o).sort();let h="{";for(let p=0;p<s.length;p++)h+=`${JSON.stringify(s[p])}:${ko(o[s[p]])},`;return`${h}}`}function Ca(o){let n="";for(const s of j)n+=`/${ko(o[s])}`;return n}function Ia(o){const n=o.value;return n?[new je(o.key,n,"constants have been deprecated as of v8")]:[]}function Qn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Ko(o){if(Array.isArray(o))return o.map(Ko);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=Ko(o[s]);return n}return Qn(o)}function oi(o){const n=o.key,s=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},v=o.style,x=o.styleSpec,S=o.validateSpec;let P=[];const F=Dn(s);if(F!=="object")return[new je(n,s,`object expected, ${F} found`)];for(const W in s){const Q=W.split(".")[0],ae=h[Q]||h["*"];let fe;if(p[Q])fe=p[Q];else if(h[Q])fe=S;else if(p["*"])fe=p["*"];else{if(!h["*"]){P.push(new je(n,s[W],`unknown property "${W}"`));continue}fe=S}P=P.concat(fe({key:(n&&`${n}.`)+W,value:s[W],valueSpec:ae,style:v,styleSpec:x,object:s,objectKey:W,validateSpec:S},s))}for(const W in h)p[W]||h[W].required&&h[W].default===void 0&&s[W]===void 0&&P.push(new je(n,s,`missing required property "${W}"`));return P}function Es(o){const n=o.value,s=o.valueSpec,h=o.style,p=o.styleSpec,v=o.key,x=o.arrayElementValidator||o.validateSpec;if(Dn(n)!=="array")return[new je(v,n,`array expected, ${Dn(n)} found`)];if(s.length&&n.length!==s.length)return[new je(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new je(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let S={type:s.value,values:s.values};p.$version<7&&(S.function=s.function),Dn(s.value)==="object"&&(S=s.value);let P=[];for(let F=0;F<n.length;F++)P=P.concat(x({array:n,arrayIndex:F,value:n[F],valueSpec:S,validateSpec:o.validateSpec,style:h,styleSpec:p,key:`${v}[${F}]`}));return P}function Js(o){const n=o.key,s=o.value,h=o.valueSpec;let p=Dn(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new je(n,s,`number expected, ${p} found`)]:"minimum"in h&&s<h.minimum?[new je(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new je(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Qi(o){const n=o.valueSpec,s=Qn(o.value.type);let h,p,v,x={};const S=s!=="categorical"&&o.value.property===void 0,P=!S,F=Dn(o.value.stops)==="array"&&Dn(o.value.stops[0])==="array"&&Dn(o.value.stops[0][0])==="object",W=oi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(fe){if(s==="identity")return[new je(fe.key,fe.value,'identity function may not have a "stops" property')];let me=[];const Ae=fe.value;return me=me.concat(Es({key:fe.key,value:Ae,valueSpec:fe.valueSpec,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,arrayElementValidator:Q})),Dn(Ae)==="array"&&Ae.length===0&&me.push(new je(fe.key,Ae,"array must have at least one stop")),me},default:function(fe){return fe.validateSpec({key:fe.key,value:fe.value,valueSpec:n,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec})}}});return s==="identity"&&S&&W.push(new je(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||W.push(new je(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!Eu(o.valueSpec)&&W.push(new je(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(P&&!Xs(o.valueSpec)?W.push(new je(o.key,o.value,"property functions not supported")):S&&!wc(o.valueSpec)&&W.push(new je(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!F||o.value.property!==void 0||W.push(new je(o.key,o.value,'"property" property is required')),W;function Q(fe){let me=[];const Ae=fe.value,Re=fe.key;if(Dn(Ae)!=="array")return[new je(Re,Ae,`array expected, ${Dn(Ae)} found`)];if(Ae.length!==2)return[new je(Re,Ae,`array length 2 expected, length ${Ae.length} found`)];if(F){if(Dn(Ae[0])!=="object")return[new je(Re,Ae,`object expected, ${Dn(Ae[0])} found`)];if(Ae[0].zoom===void 0)return[new je(Re,Ae,"object stop key must have zoom")];if(Ae[0].value===void 0)return[new je(Re,Ae,"object stop key must have value")];if(v&&v>Qn(Ae[0].zoom))return[new je(Re,Ae[0].zoom,"stop zoom values must appear in ascending order")];Qn(Ae[0].zoom)!==v&&(v=Qn(Ae[0].zoom),p=void 0,x={}),me=me.concat(oi({key:`${Re}[0]`,value:Ae[0],valueSpec:{zoom:{}},validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{zoom:Js,value:ae}}))}else me=me.concat(ae({key:`${Re}[0]`,value:Ae[0],valueSpec:{},validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec},Ae));return xl(Ko(Ae[1]))?me.concat([new je(`${Re}[1]`,Ae[1],"expressions are not allowed in function stops.")]):me.concat(fe.validateSpec({key:`${Re}[1]`,value:Ae[1],valueSpec:n,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec}))}function ae(fe,me){const Ae=Dn(fe.value),Re=Qn(fe.value),Ne=fe.value!==null?fe.value:me;if(h){if(Ae!==h)return[new je(fe.key,Ne,`${Ae} stop domain type must match previous stop domain type ${h}`)]}else h=Ae;if(Ae!=="number"&&Ae!=="string"&&Ae!=="boolean")return[new je(fe.key,Ne,"stop domain value must be a number, string, or boolean")];if(Ae!=="number"&&s!=="categorical"){let Je=`number expected, ${Ae} found`;return Xs(n)&&s===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(fe.key,Ne,Je)]}return s!=="categorical"||Ae!=="number"||isFinite(Re)&&Math.floor(Re)===Re?s!=="categorical"&&Ae==="number"&&p!==void 0&&Re<p?[new je(fe.key,Ne,"stop domain values must appear in ascending order")]:(p=Re,s==="categorical"&&Re in x?[new je(fe.key,Ne,"stop domain values must be unique")]:(x[Re]=!0,[])):[new je(fe.key,Ne,`integer expected, found ${Re}`)]}}function Yo(o){const n=(o.expressionContext==="property"?bl:bs)(Ko(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new je(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new je(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!_a(s))return[new je(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!_a(s))return[new je(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!dl(s,["zoom","feature-state"]))return[new je(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!fl(s))return[new je(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Aa(o){const n=o.key,s=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Qn(s))===-1&&p.push(new je(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(Qn(s))===-1&&p.push(new je(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function Ts(o){return vo(Ko(o.value))?Yo(at({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):El(o)}function El(o){const n=o.value,s=o.key;if(Dn(n)!=="array")return[new je(s,n,`array expected, ${Dn(n)} found`)];const h=o.styleSpec;let p,v=[];if(n.length<1)return[new je(s,n,"filter array must have at least 1 element")];switch(v=v.concat(Aa({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),Qn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Qn(n[1])==="$type"&&v.push(new je(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new je(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=Dn(n[1]),p!=="string"&&v.push(new je(`${s}[1]`,n[1],`string expected, ${p} found`)));for(let x=2;x<n.length;x++)p=Dn(n[x]),Qn(n[1])==="$type"?v=v.concat(Aa({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new je(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(El({key:`${s}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=Dn(n[1]),n.length!==2?v.push(new je(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new je(`${s}[1]`,n[1],`string expected, ${p} found`));break;case"within":p=Dn(n[1]),n.length!==2?v.push(new je(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="object"&&v.push(new je(`${s}[1]`,n[1],`object expected, ${p} found`))}return v}function Au(o,n){const s=o.key,h=o.validateSpec,p=o.style,v=o.styleSpec,x=o.value,S=o.objectKey,P=v[`${n}_${o.layerType}`];if(!P)return[];const F=S.match(/^(.*)-transition$/);if(n==="paint"&&F&&P[F[1]]&&P[F[1]].transition)return h({key:s,value:x,valueSpec:v.transition,style:p,styleSpec:v});const W=o.valueSpec||P[S];if(!W)return[new je(s,x,`unknown property "${S}"`)];let Q;if(Dn(x)==="string"&&Xs(W)&&!W.tokens&&(Q=/^{([^}]+)}$/.exec(x)))return[new je(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Q[1])} }\`.`)];const ae=[];return o.layerType==="symbol"&&(S==="text-field"&&p&&!p.glyphs&&ae.push(new je(s,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Jn(Ko(x))&&Qn(x.type)==="identity"&&ae.push(new je(s,x,'"text-font" does not support identity functions'))),ae.concat(h({key:o.key,value:x,valueSpec:W,style:p,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:S}))}function Pu(o){return Au(o,"paint")}function ku(o){return Au(o,"layout")}function V(o){let n=[];const s=o.value,h=o.key,p=o.style,v=o.styleSpec;s.type||s.ref||n.push(new je(h,s,'either "type" or "ref" is required'));let x=Qn(s.type);const S=Qn(s.ref);if(s.id){const P=Qn(s.id);for(let F=0;F<o.arrayIndex;F++){const W=p.layers[F];Qn(W.id)===P&&n.push(new je(h,s.id,`duplicate layer id "${s.id}", previously used at line ${W.id.__line__}`))}}if("ref"in s){let P;["type","source","source-layer","filter","layout"].forEach(F=>{F in s&&n.push(new je(h,s[F],`"${F}" is prohibited for ref layers`))}),p.layers.forEach(F=>{Qn(F.id)===S&&(P=F)}),P?P.ref?n.push(new je(h,s.ref,"ref cannot reference another ref layer")):x=Qn(P.type):n.push(new je(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){const P=p.sources&&p.sources[s.source],F=P&&Qn(P.type);P?F==="vector"&&x==="raster"?n.push(new je(h,s.source,`layer "${s.id}" requires a raster source`)):F!=="raster-dem"&&x==="hillshade"?n.push(new je(h,s.source,`layer "${s.id}" requires a raster-dem source`)):F==="raster"&&x!=="raster"?n.push(new je(h,s.source,`layer "${s.id}" requires a vector source`)):F!=="vector"||s["source-layer"]?F==="raster-dem"&&x!=="hillshade"?n.push(new je(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||F==="geojson"&&P.lineMetrics||n.push(new je(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new je(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new je(h,s.source,`source "${s.source}" not found`))}else n.push(new je(h,s,'missing required property "source"'));return n=n.concat(oi({key:h,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Ts,layout:P=>oi({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":F=>ku(at({layerType:x},F))}}),paint:P=>oi({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":F=>Pu(at({layerType:x},F))}})}})),n}function ge(o){const n=o.value,s=o.key,h=Dn(n);return h!=="string"?[new je(s,n,`string expected, ${h} found`)]:[]}const Ue={promoteId:function({key:o,value:n}){if(Dn(n)==="string")return ge({key:o,value:n});{const s=[];for(const h in n)s.push(...ge({key:`${o}.${h}`,value:n[h]}));return s}}};function it(o){const n=o.value,s=o.key,h=o.styleSpec,p=o.style,v=o.validateSpec;if(!n.type)return[new je(s,n,'"type" is required')];const x=Qn(n.type);let S;switch(x){case"vector":case"raster":return S=oi({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Ue,validateSpec:v}),S;case"raster-dem":return S=function(P){var F;const W=(F=P.sourceName)!==null&&F!==void 0?F:"",Q=P.value,ae=P.styleSpec,fe=ae.source_raster_dem,me=P.style;let Ae=[];const Re=Dn(Q);if(Q===void 0)return Ae;if(Re!=="object")return Ae.push(new je("source_raster_dem",Q,`object expected, ${Re} found`)),Ae;const Ne=Qn(Q.encoding)==="custom",Je=["redFactor","greenFactor","blueFactor","baseShift"],We=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const Qe in Q)!Ne&&Je.includes(Qe)?Ae.push(new je(Qe,Q[Qe],`In "${W}": "${Qe}" is only valid when "encoding" is set to "custom". ${We} encoding found`)):fe[Qe]?Ae=Ae.concat(P.validateSpec({key:Qe,value:Q[Qe],valueSpec:fe[Qe],validateSpec:P.validateSpec,style:me,styleSpec:ae})):Ae.push(new je(Qe,Q[Qe],`unknown property "${Qe}"`));return Ae}({sourceName:s,value:n,style:o.style,styleSpec:h,validateSpec:v}),S;case"geojson":if(S=oi({key:s,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:v,objectElementValidators:Ue}),n.cluster)for(const P in n.clusterProperties){const[F,W]=n.clusterProperties[P],Q=typeof F=="string"?[F,["accumulated"],["get",P]]:F;S.push(...Yo({key:`${s}.${P}.map`,value:W,validateSpec:v,expressionContext:"cluster-map"})),S.push(...Yo({key:`${s}.${P}.reduce`,value:Q,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return oi({key:s,value:n,valueSpec:h.source_video,style:p,validateSpec:v,styleSpec:h});case"image":return oi({key:s,value:n,valueSpec:h.source_image,style:p,validateSpec:v,styleSpec:h});case"canvas":return[new je(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Aa({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:v,styleSpec:h})}}function Lt(o){const n=o.value,s=o.styleSpec,h=s.light,p=o.style;let v=[];const x=Dn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new je("light",n,`object expected, ${x} found`)]),v;for(const S in n){const P=S.match(/^(.*)-transition$/);v=v.concat(P&&h[P[1]]&&h[P[1]].transition?o.validateSpec({key:S,value:n[S],valueSpec:s.transition,validateSpec:o.validateSpec,style:p,styleSpec:s}):h[S]?o.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new je(S,n[S],`unknown property "${S}"`)])}return v}function Tt(o){const n=o.value,s=o.styleSpec,h=s.terrain,p=o.style;let v=[];const x=Dn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new je("terrain",n,`object expected, ${x} found`)]),v;for(const S in n)v=v.concat(h[S]?o.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new je(S,n[S],`unknown property "${S}"`)]);return v}function Zt(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const p=[],v=[];for(const x in s)s[x].id&&p.includes(s[x].id)&&n.push(new je(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),p.push(s[x].id),s[x].url&&v.includes(s[x].url)&&n.push(new je(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),n=n.concat(oi({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return ge({key:h,value:s})}const Xt={"*":()=>[],array:Es,boolean:function(o){const n=o.value,s=o.key,h=Dn(n);return h!=="boolean"?[new je(s,n,`boolean expected, ${h} found`)]:[]},number:Js,color:function(o){const n=o.key,s=o.value,h=Dn(s);return h!=="string"?[new je(n,s,`color expected, ${h} found`)]:Gn.parse(String(s))?[]:[new je(n,s,`color expected, "${s}" found`)]},constants:Ia,enum:Aa,filter:Ts,function:Qi,layer:V,object:oi,source:it,light:Lt,terrain:Tt,string:ge,formatted:function(o){return ge(o).length===0?[]:Yo(o)},resolvedImage:function(o){return ge(o).length===0?[]:Yo(o)},padding:function(o){const n=o.key,s=o.value;if(Dn(s)==="array"){if(s.length<1||s.length>4)return[new je(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let p=[];for(let v=0;v<s.length;v++)p=p.concat(o.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:h}));return p}return Js({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,h=Dn(s),p=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new je(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat(Aa({key:`${n}[${x}]`,value:s[x],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(Es({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:p}));return v},sprite:Zt};function dn(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=dn,s.expression&&Jn(Qn(n))?Qi(o):s.expression&&xl(Ko(n))?Yo(o):s.type&&Xt[s.type]?Xt[s.type](o):oi(at({},o,{valueSpec:s.type?h[s.type]:s}))}function Zn(o){const n=o.value,s=o.key,h=ge(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new je(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new je(s,n,'"glyphs" url must include a "{range}" token'))),h}function En(o,n=se){let s=[];return s=s.concat(dn({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:dn,objectElementValidators:{glyphs:Zn,"*":()=>[]}})),o.constants&&(s=s.concat(Ia({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:dn}))),sr(s)}function Un(o){return function(n){return o({...n,validateSpec:dn})}}function sr(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function ar(o){return function(...n){return sr(o.apply(this,n))}}En.source=ar(Un(it)),En.sprite=ar(Un(Zt)),En.glyphs=ar(Un(Zn)),En.light=ar(Un(Lt)),En.terrain=ar(Un(Tt)),En.layer=ar(Un(V)),En.filter=ar(Un(Ts)),En.paintProperty=ar(Un(Pu)),En.layoutProperty=ar(Un(ku));const tr=En,Jo=tr.light,eo=tr.paintProperty,Qo=tr.layoutProperty;function Pa(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new sn(new Error(h.message))),s=!0;return s}class Mo{constructor(n,s,h){const p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let P=0;P<this.d*this.d;P++){const F=x[3+P],W=x[3+P+1];p.push(F===W?null:x.subarray(F,W))}const S=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,p,v){this._forEachCell(s,h,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,p,v,x){this.cells[v].push(x)}query(n,s,h,p,v){const x=this.min,S=this.max;if(n<=x&&s<=x&&S<=h&&S<=p&&!v)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(n,s,h,p,this._queryCell,P,{},v),P}}_queryCell(n,s,h,p,v,x,S,P){const F=this.cells[v];if(F!==null){const W=this.keys,Q=this.bboxes;for(let ae=0;ae<F.length;ae++){const fe=F[ae];if(S[fe]===void 0){const me=4*fe;(P?P(Q[me+0],Q[me+1],Q[me+2],Q[me+3]):n<=Q[me+2]&&s<=Q[me+3]&&h>=Q[me+0]&&p>=Q[me+1])?(S[fe]=!0,x.push(W[fe])):S[fe]=!1}}}}_forEachCell(n,s,h,p,v,x,S,P){const F=this._convertToCellCoord(n),W=this._convertToCellCoord(s),Q=this._convertToCellCoord(h),ae=this._convertToCellCoord(p);for(let fe=F;fe<=Q;fe++)for(let me=W;me<=ae;me++){const Ae=this.d*me+fe;if((!P||P(this._convertFromCellCoord(fe),this._convertFromCellCoord(me),this._convertFromCellCoord(fe+1),this._convertFromCellCoord(me+1)))&&v.call(this,n,s,h,p,Ae,x,S,P))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const p=new Int32Array(s+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=s;for(let x=0;x<n.length;x++){const S=n[x];p[3+x]=v,p.set(S,v),v+=S.length}return p[3+n.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+n.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Mo(n.buffer)}}const Di={};function Bt(o,n,s={}){if(Di[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),Di[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Bt("Object",Object),Bt("TransferableGridIndex",Mo),Bt("Color",Gn),Bt("Error",Error),Bt("AJAXError",ct),Bt("ResolvedImage",$r),Bt("StylePropertyFunction",qo),Bt("StyleExpression",Cu,{omit:["_evaluator"]}),Bt("ZoomDependentExpression",wl),Bt("ZoomConstantExpression",Po),Bt("CompoundExpression",pi,{omit:["_evaluate"]});for(const o in Ws)Ws[o]._classRegistryKey||Bt(`Expression_${o}`,Ws[o]);function bc(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Qs(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(bc(o)||ye(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(Qs(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Di[h])throw new Error(`${h} is not registered.`);const p=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&p===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||Di[h].omit.indexOf(v)>=0)continue;const x=o[v];p[v]=Di[h].shallow.indexOf(v)>=0?x:Qs(x,n)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof o)}function Tl(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||bc(o)||ye(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Tl);if(typeof o=="object"){const n=o.$name||"Object";if(!Di[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=Di[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const v=o[p];h[p]=Di[n].shallow.indexOf(p)>=0?v:Tl(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class qd{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Ft={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Uh(o){for(const n of o)if(Vh(n.charCodeAt(0)))return!0;return!1}function $h(o){for(const n of o)if(!ly(n.charCodeAt(0)))return!1;return!0}function ly(o){return!(Ft.Arabic(o)||Ft["Arabic Supplement"](o)||Ft["Arabic Extended-A"](o)||Ft["Arabic Presentation Forms-A"](o)||Ft["Arabic Presentation Forms-B"](o))}function Vh(o){return!(o!==746&&o!==747&&(o<4352||!(Ft["Bopomofo Extended"](o)||Ft.Bopomofo(o)||Ft["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Ft["CJK Compatibility Ideographs"](o)||Ft["CJK Compatibility"](o)||Ft["CJK Radicals Supplement"](o)||Ft["CJK Strokes"](o)||!(!Ft["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Ft["CJK Unified Ideographs Extension A"](o)||Ft["CJK Unified Ideographs"](o)||Ft["Enclosed CJK Letters and Months"](o)||Ft["Hangul Compatibility Jamo"](o)||Ft["Hangul Jamo Extended-A"](o)||Ft["Hangul Jamo Extended-B"](o)||Ft["Hangul Jamo"](o)||Ft["Hangul Syllables"](o)||Ft.Hiragana(o)||Ft["Ideographic Description Characters"](o)||Ft.Kanbun(o)||Ft["Kangxi Radicals"](o)||Ft["Katakana Phonetic Extensions"](o)||Ft.Katakana(o)&&o!==12540||!(!Ft["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Ft["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Ft["Unified Canadian Aboriginal Syllabics"](o)||Ft["Unified Canadian Aboriginal Syllabics Extended"](o)||Ft["Vertical Forms"](o)||Ft["Yijing Hexagram Symbols"](o)||Ft["Yi Syllables"](o)||Ft["Yi Radicals"](o))))}function Kd(o){return!(Vh(o)||function(n){return!!(Ft["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Ft["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Ft["Letterlike Symbols"](n)||Ft["Number Forms"](n)||Ft["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Ft["Control Pictures"](n)&&n!==9251||Ft["Optical Character Recognition"](n)||Ft["Enclosed Alphanumerics"](n)||Ft["Geometric Shapes"](n)||Ft["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Ft["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Ft["CJK Symbols and Punctuation"](n)||Ft.Katakana(n)||Ft["Private Use Area"](n)||Ft["CJK Compatibility Forms"](n)||Ft["Small Form Variants"](n)||Ft["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function Yd(o){return o>=1424&&o<=2303||Ft["Arabic Presentation Forms-A"](o)||Ft["Arabic Presentation Forms-B"](o)}function Jd(o,n){return!(!n&&Yd(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Ft.Khmer(o))}function uy(o){for(const n of o)if(Yd(n.charCodeAt(0)))return!0;return!1}const Gh="deferred",Zh="loading",Hh="loaded";let Wh=null,Bi="unavailable",ea=null;const Mu=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Bi="error"),Wh&&Wh(o)};function Xh(){Lu.fire(new yn("pluginStateChange",{pluginStatus:Bi,pluginURL:ea}))}const Lu=new gn,qh=function(){return Bi},Qd=function(){if(Bi!==Gh||!ea)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Bi=Zh,Xh(),ea&&Gt({url:ea},o=>{o?Mu(o):(Bi=Hh,Xh())})},to={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Bi===Hh||to.applyArabicShaping!=null,isLoading:()=>Bi===Zh,setState(o){if(!re())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Bi=o.pluginStatus,ea=o.pluginURL},isParsed(){if(!re())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return to.applyArabicShaping!=null&&to.processBidirectionalText!=null&&to.processStyledBidirectionalText!=null},getPluginURL(){if(!re())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ea}};class lr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qd,this.transition={})}isSupportedScript(n){return function(s,h){for(const p of s)if(!Jd(p.charCodeAt(0),h))return!1;return!0}(n,to.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class Sc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,p){if(Jn(h))return new qo(h,p);if(xl(h)){const v=bl(h,p);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return p.type==="color"&&typeof h=="string"?v=Gn.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=Oi.parse(h)):v=Si.parse(h),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Kh{constructor(n){this.property=n,this.value=new Sc(n,void 0)}transitioned(n,s){return new tp(this.property,this.value,s,M({},n.transition,this.transition),n.now)}untransitioned(){return new tp(this.property,this.value,null,{},0)}}class ep{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return ve(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Kh(this._values[n].property)),this._values[n].value=new Sc(this._values[n].property,s===null?void 0:ve(s))}getTransition(n){return ve(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Kh(this._values[n].property)),this._values[n].transition=ve(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const p=this.getTransition(s);p!==void 0&&(n[`${s}-transition`]=p)}return n}transitioned(n,s){const h=new np(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,s._values[p]);return h}untransitioned(){const n=new np(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class tp{constructor(n,s,h,p,v){this.property=n,this.value=s,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const p=n.now||0,v=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return x.possiblyEvaluate(n,s,h);{const S=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),v,function(P){if(P<=0)return 0;if(P>=1)return 1;const F=P*P,W=F*P;return 4*(P<.5?W:3*(P-F)+W-.75)}(S))}}return v}}class np{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const p=new Ec(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class cy{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return ve(this._values[n].value)}setValue(n,s){this._values[n]=new Sc(this._values[n].property,s===null?void 0:ve(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const p=new Ec(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}}class Ti{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,p){return this.property.evaluate(this.value,this.parameters,n,s,h,p)}}class Ec{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class qt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const p=Ei[this.specification.type];return p?p(n,s,h):n}}class an{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,p){return new Ti(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,p)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Ti(this,{kind:"constant",value:void 0},n.parameters);const p=Ei[this.specification.type];if(p){const v=p(n.value.value,s.value.value,h);return new Ti(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,h,p,v,x){return n.kind==="constant"?n.value:n.evaluate(s,h,p,v,x)}}class zu extends an{possiblyEvaluate(n,s,h,p){if(n.value===void 0)return new Ti(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(x,x,x,s);return new Ti(this,{kind:"constant",value:S},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Ti(this,{kind:"constant",value:v},s)}return new Ti(this,n.expression,s)}evaluate(n,s,h,p,v,x){if(n.kind==="source"){const S=n.evaluate(s,h,p,v,x);return this._calculate(S,S,S,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,p),n.evaluate({zoom:Math.floor(s.zoom)},h,p),n.evaluate({zoom:Math.floor(s.zoom)+1},h,p),s):n.value}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Yh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new lr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new lr(Math.floor(s.zoom),s)),n.expression.evaluate(new lr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Jh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){return!!n.expression.evaluate(s,null,{},h,p)}interpolate(){return!1}}class Ir{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new Sc(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new Kh(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}Bt("DataDrivenProperty",an),Bt("DataConstantProperty",qt),Bt("CrossFadedDataDrivenProperty",zu),Bt("CrossFadedProperty",Yh),Bt("ColorRampProperty",Jh);const Qh="-transition";class _o extends gn{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new cy(s.layout)),s.paint)){this._transitionablePaint=new ep(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ec(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(Qo,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(Qh)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(eo,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(Qh))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[n],v=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),S=p.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const P=this._transitionablePaint._values[n].value;return P.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,S,P)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ee(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,p,v={}){return(!v||v.validate!==!1)&&Pa(this,n.call(tr,{key:s,layerType:this.type,objectKey:h,value:p,styleSpec:se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Ti&&Xs(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const rp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ka{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class gr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function pr(o,n=1){let s=0,h=0;return{members:o.map(p=>{const v=rp[p.type].BYTES_PER_ELEMENT,x=s=Cl(s,Math.max(n,v)),S=p.components||1;return h=Math.max(h,v),s+=v*S,{name:p.name,type:p.type,components:S,offset:x}}),size:Cl(s,Math.max(h,n)),alignment:n}}function Cl(o,n){return Math.ceil(o/n)*n}class Fu extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.int16[p+0]=s,this.int16[p+1]=h,n}}Fu.prototype.bytesPerElement=4,Bt("StructArrayLayout2i4",Fu);class Ou extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=p,n}}Ou.prototype.bytesPerElement=6,Bt("StructArrayLayout3i6",Ou);class Ma extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=v,n}}Ma.prototype.bytesPerElement=8,Bt("StructArrayLayout4i8",Ma);class ef extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,S){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=S,n}}ef.prototype.bytesPerElement=12,Bt("StructArrayLayout2i4i12",ef);class tf extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,S){const P=4*n,F=8*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.uint8[F+4]=p,this.uint8[F+5]=v,this.uint8[F+6]=x,this.uint8[F+7]=S,n}}tf.prototype.bytesPerElement=8,Bt("StructArrayLayout2i4ub8",tf);class Il extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.float32[p+0]=s,this.float32[p+1]=h,n}}Il.prototype.bytesPerElement=8,Bt("StructArrayLayout2f8",Il);class nf extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,S,P,F,W){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,s,h,p,v,x,S,P,F,W)}emplace(n,s,h,p,v,x,S,P,F,W,Q){const ae=10*n;return this.uint16[ae+0]=s,this.uint16[ae+1]=h,this.uint16[ae+2]=p,this.uint16[ae+3]=v,this.uint16[ae+4]=x,this.uint16[ae+5]=S,this.uint16[ae+6]=P,this.uint16[ae+7]=F,this.uint16[ae+8]=W,this.uint16[ae+9]=Q,n}}nf.prototype.bytesPerElement=20,Bt("StructArrayLayout10ui20",nf);class rf extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,S,P,F,W,Q,ae){const fe=this.length;return this.resize(fe+1),this.emplace(fe,n,s,h,p,v,x,S,P,F,W,Q,ae)}emplace(n,s,h,p,v,x,S,P,F,W,Q,ae,fe){const me=12*n;return this.int16[me+0]=s,this.int16[me+1]=h,this.int16[me+2]=p,this.int16[me+3]=v,this.uint16[me+4]=x,this.uint16[me+5]=S,this.uint16[me+6]=P,this.uint16[me+7]=F,this.int16[me+8]=W,this.int16[me+9]=Q,this.int16[me+10]=ae,this.int16[me+11]=fe,n}}rf.prototype.bytesPerElement=24,Bt("StructArrayLayout4i4ui4i24",rf);class $n extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}$n.prototype.bytesPerElement=12,Bt("StructArrayLayout3f12",$n);class y extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}y.prototype.bytesPerElement=4,Bt("StructArrayLayout1ul4",y);class r extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,S,P,F){const W=this.length;return this.resize(W+1),this.emplace(W,n,s,h,p,v,x,S,P,F)}emplace(n,s,h,p,v,x,S,P,F,W){const Q=10*n,ae=5*n;return this.int16[Q+0]=s,this.int16[Q+1]=h,this.int16[Q+2]=p,this.int16[Q+3]=v,this.int16[Q+4]=x,this.int16[Q+5]=S,this.uint32[ae+3]=P,this.uint16[Q+8]=F,this.uint16[Q+9]=W,n}}r.prototype.bytesPerElement=20,Bt("StructArrayLayout6i1ul2ui20",r);class u extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,S){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=S,n}}u.prototype.bytesPerElement=12,Bt("StructArrayLayout2i2i2i12",u);class f extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,p,v)}emplace(n,s,h,p,v,x){const S=4*n,P=8*n;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=p,this.int16[P+6]=v,this.int16[P+7]=x,n}}f.prototype.bytesPerElement=16,Bt("StructArrayLayout2f1f2i16",f);class m extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=12*n,S=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=h,this.float32[S+1]=p,this.float32[S+2]=v,n}}m.prototype.bytesPerElement=12,Bt("StructArrayLayout2ub2f12",m);class _ extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=p,n}}_.prototype.bytesPerElement=6,Bt("StructArrayLayout3ui6",_);class T extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae,Re,Ne){const Je=this.length;return this.resize(Je+1),this.emplace(Je,n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae,Re,Ne)}emplace(n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae,Re,Ne,Je){const We=24*n,Qe=12*n,rt=48*n;return this.int16[We+0]=s,this.int16[We+1]=h,this.uint16[We+2]=p,this.uint16[We+3]=v,this.uint32[Qe+2]=x,this.uint32[Qe+3]=S,this.uint32[Qe+4]=P,this.uint16[We+10]=F,this.uint16[We+11]=W,this.uint16[We+12]=Q,this.float32[Qe+7]=ae,this.float32[Qe+8]=fe,this.uint8[rt+36]=me,this.uint8[rt+37]=Ae,this.uint8[rt+38]=Re,this.uint32[Qe+10]=Ne,this.int16[We+22]=Je,n}}T.prototype.bytesPerElement=48,Bt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",T);class A extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae,Re,Ne,Je,We,Qe,rt,gt,Ot,Vt,zt,Mt,Ct,Nt){const Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae,Re,Ne,Je,We,Qe,rt,gt,Ot,Vt,zt,Mt,Ct,Nt)}emplace(n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae,Re,Ne,Je,We,Qe,rt,gt,Ot,Vt,zt,Mt,Ct,Nt,Pt){const bt=32*n,tn=16*n;return this.int16[bt+0]=s,this.int16[bt+1]=h,this.int16[bt+2]=p,this.int16[bt+3]=v,this.int16[bt+4]=x,this.int16[bt+5]=S,this.int16[bt+6]=P,this.int16[bt+7]=F,this.uint16[bt+8]=W,this.uint16[bt+9]=Q,this.uint16[bt+10]=ae,this.uint16[bt+11]=fe,this.uint16[bt+12]=me,this.uint16[bt+13]=Ae,this.uint16[bt+14]=Re,this.uint16[bt+15]=Ne,this.uint16[bt+16]=Je,this.uint16[bt+17]=We,this.uint16[bt+18]=Qe,this.uint16[bt+19]=rt,this.uint16[bt+20]=gt,this.uint16[bt+21]=Ot,this.uint16[bt+22]=Vt,this.uint32[tn+12]=zt,this.float32[tn+13]=Mt,this.float32[tn+14]=Ct,this.uint16[bt+30]=Nt,this.uint16[bt+31]=Pt,n}}A.prototype.bytesPerElement=64,Bt("StructArrayLayout8i15ui1ul2f2ui64",A);class L extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}L.prototype.bytesPerElement=4,Bt("StructArrayLayout1f4",L);class N extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}N.prototype.bytesPerElement=12,Bt("StructArrayLayout1ui2f12",N);class X extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=p,n}}X.prototype.bytesPerElement=8,Bt("StructArrayLayout1ul2ui8",X);class K extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.uint16[p+0]=s,this.uint16[p+1]=h,n}}K.prototype.bytesPerElement=4,Bt("StructArrayLayout2ui4",K);class he extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}he.prototype.bytesPerElement=2,Bt("StructArrayLayout1ui2",he);class Me extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=v,n}}Me.prototype.bytesPerElement=16,Bt("StructArrayLayout4f16",Me);class ke extends ka{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}ke.prototype.size=20;class Fe extends r{get(n){return new ke(this,n)}}Bt("CollisionBoxArray",Fe);class Ie extends ka{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ie.prototype.size=48;class Ke extends T{get(n){return new Ie(this,n)}}Bt("PlacedSymbolArray",Ke);class tt extends ka{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}tt.prototype.size=64;class De extends A{get(n){return new tt(this,n)}}Bt("SymbolInstanceArray",De);class Ye extends L{getoffsetX(n){return this.float32[1*n+0]}}Bt("GlyphOffsetArray",Ye);class ot extends Ou{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Bt("SymbolLineVertexArray",ot);class st extends ka{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}st.prototype.size=12;class dt extends N{get(n){return new st(this,n)}}Bt("TextAnchorOffsetArray",dt);class wt extends ka{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}wt.prototype.size=8;class xt extends X{get(n){return new wt(this,n)}}Bt("FeatureIndexArray",xt);class Et extends Fu{}class $t extends Fu{}class Pn extends Fu{}class kt extends ef{}class ln extends tf{}class Ht extends Il{}class Xn extends nf{}class An extends rf{}class _n extends $n{}class kn extends y{}class Sr extends u{}class nr extends m{}class si extends _{}class Zr extends K{}const Ar=pr([{name:"a_pos",components:2,type:"Int16"}],4),{members:no}=Ar;class ur{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,p){let v=this.segments[this.segments.length-1];return n>ur.MAX_VERTEX_ARRAY_LENGTH&&be(`Max vertices per segment is ${ur.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>ur.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,p){return new ur([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function es(o,n){return 256*(o=U(Math.floor(o),0,255))+U(Math.floor(n),0,255)}ur.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bt("SegmentVector",ur);const ts=pr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ta={exports:{}},La={exports:{}};La.exports=function(o,n){var s,h,p,v,x,S,P,F;for(h=o.length-(s=3&o.length),p=n,x=3432918353,S=461845907,F=0;F<h;)P=255&o.charCodeAt(F)|(255&o.charCodeAt(++F))<<8|(255&o.charCodeAt(++F))<<16|(255&o.charCodeAt(++F))<<24,++F,p=27492+(65535&(v=5*(65535&(p=(p^=P=(65535&(P=(P=(65535&P)*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(P=0,s){case 3:P^=(255&o.charCodeAt(F+2))<<16;case 2:P^=(255&o.charCodeAt(F+1))<<8;case 1:p^=P=(65535&(P=(P=(65535&(P^=255&o.charCodeAt(F)))*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var Al=La.exports,gi={exports:{}};gi.exports=function(o,n){for(var s,h=o.length,p=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&o.charCodeAt(v+2))<<16;case 2:p^=(255&o.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var ai=Al,Ci=gi.exports;ta.exports=ai,ta.exports.murmur3=ai,ta.exports.murmur2=Ci;var za=w(ta.exports);class Er{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,p){this.ids.push(Hr(n)),this.positions.push(s,h,p)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Hr(n);let h=0,p=this.ids.length-1;for(;h<p;){const x=h+p>>1;this.ids[x]>=s?p=x:h=x+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return Ni(h,p,0,h.length-1),s&&s.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){const s=new Er;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Hr(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:za(String(o))}function Ni(o,n,s,h){for(;s<h;){const p=o[s+h>>1];let v=s-1,x=h+1;for(;;){do v++;while(o[v]<p);do x--;while(o[x]>p);if(v>=x)break;Tr(o,v,x),Tr(n,3*v,3*x),Tr(n,3*v+1,3*x+1),Tr(n,3*v+2,3*x+2)}x-s<h-x?(Ni(o,n,s,x),s=x+1):(Ni(o,n,x+1,h),h=x)}}function Tr(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}Bt("FeaturePositionMap",Er);class Fa{constructor(n,s){this.gl=n.gl,this.location=s}}class Tc extends Fa{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class ip extends Fa{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class op extends Fa{constructor(n,s){super(n,s),this.current=Gn.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const hy=new Float32Array(16);function of(o){return[es(255*o.r,255*o.g),es(255*o.b,255*o.a)]}class ns{constructor(n,s,h){this.value=n,this.uniformNames=s.map(p=>`u_${p}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new op(n,s):new Tc(n,s)}}class Oa{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,p){const v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new ip(n,s):new Tc(n,s)}}class rs{constructor(n,s,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,s,h,p,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new lr(0),s,{},p,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const p=of(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=n;p<s;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class xo{constructor(n,s,h,p,v,x){this.expression=n,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,p,v){const x=this.expression.evaluate(new lr(this.zoom),s,{},p,[],v),S=this.expression.evaluate(new lr(this.zoom+1),s,{},p,[],v),P=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(P,n,x,S)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:this.zoom},h,p),x=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,s,v,x)}_setPaintValue(n,s,h,p){if(this.type==="color"){const v=of(h),x=of(p);for(let S=n;S<s;S++)this.paintVertexArray.emplace(S,v[0],v[1],x[0],x[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=U(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,s,h){return new Tc(n,s)}}class is{constructor(n,s,h,p,v,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,p,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,p){if(!p||!h)return;const{min:v,mid:x,max:S}=h,P=p[v],F=p[x],W=p[S];if(P&&F&&W)for(let Q=n;Q<s;Q++)this.zoomInPaintVertexArray.emplace(Q,F.tl[0],F.tl[1],F.br[0],F.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],F.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(Q,F.tl[0],F.tl[1],F.br[0],F.br[1],W.tl[0],W.tl[1],W.br[0],W.br[1],F.pixelRatio,W.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,ts.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,ts.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class sf{constructor(n,s,h){this.binders={},this._buffers=[];const p=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof Ti&&Xs(x.property.specification)))continue;const S=kA(v,n.type),P=x.value,F=x.property.specification.type,W=x.property.useIntegerZoom,Q=x.property.specification["property-type"],ae=Q==="cross-faded"||Q==="cross-faded-data-driven";if(P.kind==="constant")this.binders[v]=ae?new Oa(P.value,S):new ns(P.value,S,F),p.push(`/u_${v}`);else if(P.kind==="source"||ae){const fe=kx(v,F,"source");this.binders[v]=ae?new is(P,F,W,s,fe,n.id):new rs(P,S,F,fe),p.push(`/a_${v}`)}else{const fe=kx(v,F,"composite");this.binders[v]=new xo(P,S,F,W,s,fe),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof rs||s instanceof xo?s.maxValue:0}populatePaintArrays(n,s,h,p,v){for(const x in this.binders){const S=this.binders[x];(S instanceof rs||S instanceof xo||S instanceof is)&&S.populatePaintArray(n,s,h,p,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const p=this.binders[h];p instanceof Oa&&p.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,p,v){let x=!1;for(const S in n){const P=s.getPositions(S);for(const F of P){const W=h.feature(F.index);for(const Q in this.binders){const ae=this.binders[Q];if((ae instanceof rs||ae instanceof xo||ae instanceof is)&&ae.expression.isStateDependent===!0){const fe=p.paint.get(Q);ae.expression=fe.value,ae.updatePaintArray(F.start,F.end,W,n[S],v),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof ns||h instanceof Oa)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof rs||h instanceof xo)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof is)for(let p=0;p<ts.members.length;p++)n.push(ts.members[p].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof ns||h instanceof Oa||h instanceof xo)for(const p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof ns||v instanceof Oa||v instanceof xo){for(const x of v.uniformNames)if(s[x]){const S=v.getBinding(n,s[x],x);h.push({name:x,property:p,binding:S})}}}return h}setUniforms(n,s,h,p){for(const{name:v,property:x,binding:S}of s)this.binders[x].setUniform(S,p,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof is){const p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof rs||h instanceof xo)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof rs||h instanceof xo||h instanceof is)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof rs||s instanceof xo||s instanceof is)&&s.destroy()}}}class Cs{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new sf(p,s,h);this.needsUpload=!1,this._featureMap=new Er,this._bufferOffset=0}populatePaintArrays(n,s,h,p,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,s,p,v,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,p){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function kA(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function kx(o,n,s){const h={color:{source:Il,composite:Me},number:{source:L,composite:Il}},p=function(v){return{"line-pattern":{source:Xn,composite:Xn},"fill-pattern":{source:Xn,composite:Xn},"fill-extrusion-pattern":{source:Xn,composite:Xn}}[v]}(o);return p&&p[s]||h[n][s]}Bt("ConstantBinder",ns),Bt("CrossFadedConstantBinder",Oa),Bt("SourceExpressionBinder",rs),Bt("CrossFadedCompositeBinder",is),Bt("CompositeExpressionBinder",xo),Bt("ProgramConfiguration",sf,{omit:["_buffers"]}),Bt("ProgramConfigurationSet",Cs);const Or=8192,fy=Math.pow(2,14)-1,Mx=-fy-1;function Ru(o){const n=Or/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const p=s[h];for(let v=0;v<p.length;v++){const x=p[v],S=Math.round(x.x*n),P=Math.round(x.y*n);x.x=U(S,Mx,fy),x.y=U(P,Mx,fy),(S<x.x||S>x.x+1||P<x.y||P>x.y+1)&&be("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function ju(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?Ru(o):[]}}function sp(o,n,s,h,p){o.emplaceBack(2*n+(h+1)/2,2*s+(p+1)/2)}class dy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new $t,this.indexArray=new si,this.segments=new ur,this.programConfigurations=new Cs(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const p=this.layers[0],v=[];let x=null,S=!1;p.type==="circle"&&(x=p.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:P,id:F,index:W,sourceLayerIndex:Q}of n){const ae=this.layers[0]._featureFilter.needGeometry,fe=ju(P,ae);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),fe,h))continue;const me=S?x.evaluate(fe,{},h):void 0,Ae={id:F,properties:P.properties,type:P.type,sourceLayerIndex:Q,index:W,geometry:ae?fe.geometry:Ru(P),patterns:{},sortKey:me};v.push(Ae)}S&&v.sort((P,F)=>P.sortKey-F.sortKey);for(const P of v){const{geometry:F,index:W,sourceLayerIndex:Q}=P,ae=n[W].feature;this.addFeature(P,F,W,h),s.featureIndex.insert(ae,F,W,Q,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,no),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,p){for(const v of s)for(const x of v){const S=x.x,P=x.y;if(S<0||S>=Or||P<0||P>=Or)continue;const F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),W=F.vertexLength;sp(this.layoutVertexArray,S,P,-1,-1),sp(this.layoutVertexArray,S,P,1,-1),sp(this.layoutVertexArray,S,P,1,1),sp(this.layoutVertexArray,S,P,-1,1),this.indexArray.emplaceBack(W,W+1,W+2),this.indexArray.emplaceBack(W,W+3,W+2),F.vertexLength+=4,F.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function Lx(o,n){for(let s=0;s<o.length;s++)if(Cc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Cc(o,n[s]))return!0;return!!py(o,n)}function MA(o,n,s){return!!Cc(o,n)||!!my(n,o,s)}function zx(o,n){if(o.length===1)return Ox(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let p=0;p<h.length;p++)if(Cc(o,h[p]))return!0}for(let s=0;s<o.length;s++)if(Ox(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(py(o,n[s]))return!0;return!1}function LA(o,n,s){if(o.length>1){if(py(o,n))return!0;for(let h=0;h<n.length;h++)if(my(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(my(o[h],n,s))return!0;return!1}function py(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],p=o[s+1];for(let v=0;v<n.length-1;v++)if(zA(h,p,n[v],n[v+1]))return!0}return!1}function zA(o,n,s,h){return te(o,s,h)!==te(n,s,h)&&te(o,n,s)!==te(o,n,h)}function my(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(Fx(o,n[p-1],n[p])<h)return!0;return!1}function Fx(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const p=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(p<0?n:p>1?s:s.sub(n)._mult(p)._add(n))}function Ox(o,n){let s,h,p,v=!1;for(let x=0;x<o.length;x++){s=o[x];for(let S=0,P=s.length-1;S<s.length;P=S++)h=s[S],p=s[P],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function Cc(o,n){let s=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){const v=o[h],x=o[p];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function FA(o,n,s){const h=s[0],p=s[2];if(o.x<h.x&&n.x<h.x||o.x>p.x&&n.x>p.x||o.y<h.y&&n.y<h.y||o.y>p.y&&n.y>p.y)return!1;const v=te(o,n,s[0]);return v!==te(o,n,s[1])||v!==te(o,n,s[2])||v!==te(o,n,s[3])}function af(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function ap(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function lp(o,n,s,h,p){if(!n[0]&&!n[1])return o;const v=k.convert(n)._mult(p);s==="viewport"&&v._rotate(-h);const x=[];for(let S=0;S<o.length;S++)x.push(o[S].sub(v));return x}let Rx,jx;Bt("CircleBucket",dy,{omit:["layers"]});var OA={get paint(){return jx=jx||new Ir({"circle-radius":new an(se.paint_circle["circle-radius"]),"circle-color":new an(se.paint_circle["circle-color"]),"circle-blur":new an(se.paint_circle["circle-blur"]),"circle-opacity":new an(se.paint_circle["circle-opacity"]),"circle-translate":new qt(se.paint_circle["circle-translate"]),"circle-translate-anchor":new qt(se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qt(se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qt(se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new an(se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new an(se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new an(se.paint_circle["circle-stroke-opacity"])})},get layout(){return Rx=Rx||new Ir({"circle-sort-key":new an(se.layout_circle["circle-sort-key"])})}},Ui=1e-6,Ic=typeof Float32Array<"u"?Float32Array:Array;function gy(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Dx(o,n,s){var h=n[0],p=n[1],v=n[2],x=n[3],S=n[4],P=n[5],F=n[6],W=n[7],Q=n[8],ae=n[9],fe=n[10],me=n[11],Ae=n[12],Re=n[13],Ne=n[14],Je=n[15],We=s[0],Qe=s[1],rt=s[2],gt=s[3];return o[0]=We*h+Qe*S+rt*Q+gt*Ae,o[1]=We*p+Qe*P+rt*ae+gt*Re,o[2]=We*v+Qe*F+rt*fe+gt*Ne,o[3]=We*x+Qe*W+rt*me+gt*Je,o[4]=(We=s[4])*h+(Qe=s[5])*S+(rt=s[6])*Q+(gt=s[7])*Ae,o[5]=We*p+Qe*P+rt*ae+gt*Re,o[6]=We*v+Qe*F+rt*fe+gt*Ne,o[7]=We*x+Qe*W+rt*me+gt*Je,o[8]=(We=s[8])*h+(Qe=s[9])*S+(rt=s[10])*Q+(gt=s[11])*Ae,o[9]=We*p+Qe*P+rt*ae+gt*Re,o[10]=We*v+Qe*F+rt*fe+gt*Ne,o[11]=We*x+Qe*W+rt*me+gt*Je,o[12]=(We=s[12])*h+(Qe=s[13])*S+(rt=s[14])*Q+(gt=s[15])*Ae,o[13]=We*p+Qe*P+rt*ae+gt*Re,o[14]=We*v+Qe*F+rt*fe+gt*Ne,o[15]=We*x+Qe*W+rt*me+gt*Je,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var lf,RA=Dx;function up(o,n,s){var h=n[0],p=n[1],v=n[2],x=n[3];return o[0]=s[0]*h+s[4]*p+s[8]*v+s[12]*x,o[1]=s[1]*h+s[5]*p+s[9]*v+s[13]*x,o[2]=s[2]*h+s[6]*p+s[10]*v+s[14]*x,o[3]=s[3]*h+s[7]*p+s[11]*v+s[15]*x,o}lf=new Ic(4),Ic!=Float32Array&&(lf[0]=0,lf[1]=0,lf[2]=0,lf[3]=0);class jA extends _o{constructor(n){super(n,OA)}createBucket(n){return new dy(n)}queryRadius(n){const s=n;return af("circle-radius",this,s)+af("circle-stroke-width",this,s)+ap(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,p,v,x,S,P){const F=lp(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),W=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),Q=this.paint.get("circle-pitch-alignment")==="map",ae=Q?F:function(me,Ae){return me.map(Re=>Bx(Re,Ae))}(F,P),fe=Q?W*S:W;for(const me of p)for(const Ae of me){const Re=Q?Ae:Bx(Ae,P);let Ne=fe;const Je=up([],[Ae.x,Ae.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ne*=Je[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ne*=x.cameraToCenterDistance/Je[3]),MA(ae,Re,Ne))return!0}return!1}}function Bx(o,n){const s=up([],[o.x,o.y,0,1],n);return new k(s[0]/s[3],s[1]/s[3])}class Nx extends dy{}let Ux;Bt("HeatmapBucket",Nx,{omit:["layers"]});var DA={get paint(){return Ux=Ux||new Ir({"heatmap-radius":new an(se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new an(se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qt(se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Jh(se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qt(se.paint_heatmap["heatmap-opacity"])})}};function yy(o,{width:n,height:s},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*s*h}`)}else p=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=p,o}function $x(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const p=yy({},{width:n,height:s},h);vy(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=p.data}function vy(o,n,s,h,p,v){if(p.width===0||p.height===0)return n;if(p.width>o.width||p.height>o.height||s.x>o.width-p.width||s.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,S=n.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<p.height;P++){const F=((s.y+P)*o.width+s.x)*v,W=((h.y+P)*n.width+h.x)*v;for(let Q=0;Q<p.width*v;Q++)S[W+Q]=x[F+Q]}return n}class uf{constructor(n,s){yy(this,n,1,s)}resize(n){$x(this,n,1)}clone(){return new uf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){vy(n,s,h,p,v,1)}}class Lo{constructor(n,s){yy(this,n,4,s)}resize(n){$x(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Lo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){vy(n,s,h,p,v,4)}}function Vx(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new Lo({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,S,P)=>{n[o.evaluationKey]=P;const F=o.expression.evaluate(n);p.data[x+S+0]=Math.floor(255*F.r/F.a),p.data[x+S+1]=Math.floor(255*F.g/F.a),p.data[x+S+2]=Math.floor(255*F.b/F.a),p.data[x+S+3]=Math.floor(255*F.a)};if(o.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let P=0,F=0;P<s;P++,F+=4){const W=P/(s-1),{start:Q,end:ae}=o.clips[x];v(S,F,Q*(1-W)+ae*W)}else for(let x=0,S=0;x<s;x++,S+=4)v(0,S,x/(s-1));return p}Bt("AlphaImage",uf),Bt("RGBAImage",Lo);class BA extends _o{createBucket(n){return new Nx(n)}constructor(n){super(n,DA),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Vx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Gx;var NA={get paint(){return Gx=Gx||new Ir({"hillshade-illumination-direction":new qt(se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qt(se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qt(se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qt(se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qt(se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qt(se.paint_hillshade["hillshade-accent-color"])})}};class UA extends _o{constructor(n){super(n,NA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const $A=pr([{name:"a_pos",components:2,type:"Int16"}],4),{members:VA}=$A;var _y={exports:{}};function cp(o,n,s){s=s||2;var h,p,v,x,S,P,F,W=n&&n.length,Q=W?n[0]*s:o.length,ae=Zx(o,0,Q,s,!0),fe=[];if(!ae||ae.next===ae.prev)return fe;if(W&&(ae=function(Ae,Re,Ne,Je){var We,Qe,rt,gt=[];for(We=0,Qe=Re.length;We<Qe;We++)(rt=Zx(Ae,Re[We]*Je,We<Qe-1?Re[We+1]*Je:Ae.length,Je,!1))===rt.next&&(rt.steiner=!0),gt.push(YA(rt));for(gt.sort(XA),We=0;We<gt.length;We++)Ne=qA(gt[We],Ne);return Ne}(o,n,ae,s)),o.length>80*s){h=v=o[0],p=x=o[1];for(var me=s;me<Q;me+=s)(S=o[me])<h&&(h=S),(P=o[me+1])<p&&(p=P),S>v&&(v=S),P>x&&(x=P);F=(F=Math.max(v-h,x-p))!==0?32767/F:0}return cf(ae,fe,s,h,p,F,0),fe}function Zx(o,n,s,h,p){var v,x;if(p===by(o,n,s,h)>0)for(v=n;v<s;v+=h)x=Xx(v,o[v],o[v+1],x);else for(v=s-h;v>=n;v-=h)x=Xx(v,o[v],o[v+1],x);return x&&hp(x,x.next)&&(ff(x),x=x.next),x}function Du(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!hp(h,h.next)&&Pr(h.prev,h,h.next)!==0)h=h.next;else{if(ff(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function cf(o,n,s,h,p,v,x){if(o){!x&&v&&function(W,Q,ae,fe){var me=W;do me.z===0&&(me.z=xy(me.x,me.y,Q,ae,fe)),me.prevZ=me.prev,me.nextZ=me.next,me=me.next;while(me!==W);me.prevZ.nextZ=null,me.prevZ=null,function(Ae){var Re,Ne,Je,We,Qe,rt,gt,Ot,Vt=1;do{for(Ne=Ae,Ae=null,Qe=null,rt=0;Ne;){for(rt++,Je=Ne,gt=0,Re=0;Re<Vt&&(gt++,Je=Je.nextZ);Re++);for(Ot=Vt;gt>0||Ot>0&&Je;)gt!==0&&(Ot===0||!Je||Ne.z<=Je.z)?(We=Ne,Ne=Ne.nextZ,gt--):(We=Je,Je=Je.nextZ,Ot--),Qe?Qe.nextZ=We:Ae=We,We.prevZ=Qe,Qe=We;Ne=Je}Qe.nextZ=null,Vt*=2}while(rt>1)}(me)}(o,h,p,v);for(var S,P,F=o;o.prev!==o.next;)if(S=o.prev,P=o.next,v?ZA(o,h,p,v):GA(o))n.push(S.i/s|0),n.push(o.i/s|0),n.push(P.i/s|0),ff(o),o=P.next,F=P.next;else if((o=P)===F){x?x===1?cf(o=HA(Du(o),n,s),n,s,h,p,v,2):x===2&&WA(o,n,s,h,p,v):cf(Du(o),n,s,h,p,v,1);break}}}function GA(o){var n=o.prev,s=o,h=o.next;if(Pr(n,s,h)>=0)return!1;for(var p=n.x,v=s.x,x=h.x,S=n.y,P=s.y,F=h.y,W=p<v?p<x?p:x:v<x?v:x,Q=S<P?S<F?S:F:P<F?P:F,ae=p>v?p>x?p:x:v>x?v:x,fe=S>P?S>F?S:F:P>F?P:F,me=h.next;me!==n;){if(me.x>=W&&me.x<=ae&&me.y>=Q&&me.y<=fe&&Ac(p,S,v,P,x,F,me.x,me.y)&&Pr(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function ZA(o,n,s,h){var p=o.prev,v=o,x=o.next;if(Pr(p,v,x)>=0)return!1;for(var S=p.x,P=v.x,F=x.x,W=p.y,Q=v.y,ae=x.y,fe=S<P?S<F?S:F:P<F?P:F,me=W<Q?W<ae?W:ae:Q<ae?Q:ae,Ae=S>P?S>F?S:F:P>F?P:F,Re=W>Q?W>ae?W:ae:Q>ae?Q:ae,Ne=xy(fe,me,n,s,h),Je=xy(Ae,Re,n,s,h),We=o.prevZ,Qe=o.nextZ;We&&We.z>=Ne&&Qe&&Qe.z<=Je;){if(We.x>=fe&&We.x<=Ae&&We.y>=me&&We.y<=Re&&We!==p&&We!==x&&Ac(S,W,P,Q,F,ae,We.x,We.y)&&Pr(We.prev,We,We.next)>=0||(We=We.prevZ,Qe.x>=fe&&Qe.x<=Ae&&Qe.y>=me&&Qe.y<=Re&&Qe!==p&&Qe!==x&&Ac(S,W,P,Q,F,ae,Qe.x,Qe.y)&&Pr(Qe.prev,Qe,Qe.next)>=0))return!1;Qe=Qe.nextZ}for(;We&&We.z>=Ne;){if(We.x>=fe&&We.x<=Ae&&We.y>=me&&We.y<=Re&&We!==p&&We!==x&&Ac(S,W,P,Q,F,ae,We.x,We.y)&&Pr(We.prev,We,We.next)>=0)return!1;We=We.prevZ}for(;Qe&&Qe.z<=Je;){if(Qe.x>=fe&&Qe.x<=Ae&&Qe.y>=me&&Qe.y<=Re&&Qe!==p&&Qe!==x&&Ac(S,W,P,Q,F,ae,Qe.x,Qe.y)&&Pr(Qe.prev,Qe,Qe.next)>=0)return!1;Qe=Qe.nextZ}return!0}function HA(o,n,s){var h=o;do{var p=h.prev,v=h.next.next;!hp(p,v)&&Hx(p,h,h.next,v)&&hf(p,v)&&hf(v,p)&&(n.push(p.i/s|0),n.push(h.i/s|0),n.push(v.i/s|0),ff(h),ff(h.next),h=o=v),h=h.next}while(h!==o);return Du(h)}function WA(o,n,s,h,p,v){var x=o;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&JA(x,S)){var P=Wx(x,S);return x=Du(x,x.next),P=Du(P,P.next),cf(x,n,s,h,p,v,0),void cf(P,n,s,h,p,v,0)}S=S.next}x=x.next}while(x!==o)}function XA(o,n){return o.x-n.x}function qA(o,n){var s=function(p,v){var x,S=v,P=p.x,F=p.y,W=-1/0;do{if(F<=S.y&&F>=S.next.y&&S.next.y!==S.y){var Q=S.x+(F-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(Q<=P&&Q>W&&(W=Q,x=S.x<S.next.x?S:S.next,Q===P))return x}S=S.next}while(S!==v);if(!x)return null;var ae,fe=x,me=x.x,Ae=x.y,Re=1/0;S=x;do P>=S.x&&S.x>=me&&P!==S.x&&Ac(F<Ae?P:W,F,me,Ae,F<Ae?W:P,F,S.x,S.y)&&(ae=Math.abs(F-S.y)/(P-S.x),hf(S,p)&&(ae<Re||ae===Re&&(S.x>x.x||S.x===x.x&&KA(x,S)))&&(x=S,Re=ae)),S=S.next;while(S!==fe);return x}(o,n);if(!s)return n;var h=Wx(s,o);return Du(h,h.next),Du(s,s.next)}function KA(o,n){return Pr(o.prev,o,n.prev)<0&&Pr(n.next,o,o.next)<0}function xy(o,n,s,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function YA(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function Ac(o,n,s,h,p,v,x,S){return(p-x)*(n-S)>=(o-x)*(v-S)&&(o-x)*(h-S)>=(s-x)*(n-S)&&(s-x)*(v-S)>=(p-x)*(h-S)}function JA(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==h.i&&p.next.i!==h.i&&Hx(p,p.next,s,h))return!0;p=p.next}while(p!==s);return!1}(o,n)&&(hf(o,n)&&hf(n,o)&&function(s,h){var p=s,v=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do p.y>S!=p.next.y>S&&p.next.y!==p.y&&x<(p.next.x-p.x)*(S-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==s);return v}(o,n)&&(Pr(o.prev,o,n.prev)||Pr(o,n.prev,n))||hp(o,n)&&Pr(o.prev,o,o.next)>0&&Pr(n.prev,n,n.next)>0)}function Pr(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function hp(o,n){return o.x===n.x&&o.y===n.y}function Hx(o,n,s,h){var p=dp(Pr(o,n,s)),v=dp(Pr(o,n,h)),x=dp(Pr(s,h,o)),S=dp(Pr(s,h,n));return p!==v&&x!==S||!(p!==0||!fp(o,s,n))||!(v!==0||!fp(o,h,n))||!(x!==0||!fp(s,o,h))||!(S!==0||!fp(s,n,h))}function fp(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function dp(o){return o>0?1:o<0?-1:0}function hf(o,n){return Pr(o.prev,o,o.next)<0?Pr(o,n,o.next)>=0&&Pr(o,o.prev,n)>=0:Pr(o,n,o.prev)<0||Pr(o,o.next,n)<0}function Wx(o,n){var s=new wy(o.i,o.x,o.y),h=new wy(n.i,n.x,n.y),p=o.next,v=n.prev;return o.next=n,n.prev=o,s.next=p,p.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function Xx(o,n,s,h){var p=new wy(o,n,s);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function ff(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function wy(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function by(o,n,s,h){for(var p=0,v=n,x=s-h;v<s;v+=h)p+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return p}_y.exports=cp,_y.exports.default=cp,cp.deviation=function(o,n,s,h){var p=n&&n.length,v=Math.abs(by(o,0,p?n[0]*s:o.length,s));if(p)for(var x=0,S=n.length;x<S;x++)v-=Math.abs(by(o,n[x]*s,x<S-1?n[x+1]*s:o.length,s));var P=0;for(x=0;x<h.length;x+=3){var F=h[x]*s,W=h[x+1]*s,Q=h[x+2]*s;P+=Math.abs((o[F]-o[Q])*(o[W+1]-o[F+1])-(o[F]-o[W])*(o[Q+1]-o[F+1]))}return v===0&&P===0?0:Math.abs((P-v)/v)},cp.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,p=0;p<o.length;p++){for(var v=0;v<o[p].length;v++)for(var x=0;x<n;x++)s.vertices.push(o[p][v][x]);p>0&&s.holes.push(h+=o[p-1].length)}return s};var qx=w(_y.exports);function QA(o,n,s,h,p){Kx(o,n,s||0,h||o.length-1,p||eP)}function Kx(o,n,s,h,p){for(;h>s;){if(h-s>600){var v=h-s+1,x=n-s+1,S=Math.log(v),P=.5*Math.exp(2*S/3),F=.5*Math.sqrt(S*P*(v-P)/v)*(x-v/2<0?-1:1);Kx(o,n,Math.max(s,Math.floor(n-x*P/v+F)),Math.min(h,Math.floor(n+(v-x)*P/v+F)),p)}var W=o[n],Q=s,ae=h;for(df(o,s,n),p(o[h],W)>0&&df(o,s,h);Q<ae;){for(df(o,Q,ae),Q++,ae--;p(o[Q],W)<0;)Q++;for(;p(o[ae],W)>0;)ae--}p(o[s],W)===0?df(o,s,ae):df(o,++ae,h),ae<=n&&(s=ae+1),n<=ae&&(h=ae-1)}}function df(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function eP(o,n){return o<n?-1:o>n?1:0}function Sy(o,n){const s=o.length;if(s<=1)return[o];const h=[];let p,v;for(let x=0;x<s;x++){const S=ue(o[x]);S!==0&&(o[x].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(p&&h.push(p),p=[o[x]]):p.push(o[x]))}if(p&&h.push(p),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(QA(h[x],n,1,h[x].length-1,tP),h[x]=h[x].slice(0,n));return h}function tP(o,n){return n.area-o.area}function Ey(o,n,s){const h=s.patternDependencies;let p=!1;for(const v of n){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(p=!0);const S=x.constantOr(null);S&&(p=!0,h[S.to]=!0,h[S.from]=!0)}return p}function Ty(o,n,s,h,p){const v=p.patternDependencies;for(const x of n){const S=x.paint.get(`${o}-pattern`).value;if(S.kind!=="constant"){let P=S.evaluate({zoom:h-1},s,{},p.availableImages),F=S.evaluate({zoom:h},s,{},p.availableImages),W=S.evaluate({zoom:h+1},s,{},p.availableImages);P=P&&P.name?P.name:P,F=F&&F.name?F.name:F,W=W&&W.name?W.name:W,v[P]=!0,v[F]=!0,v[W]=!0,s.patterns[x.id]={min:P,mid:F,max:W}}}return s}class Cy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pn,this.indexArray=new si,this.indexArray2=new Zr,this.programConfigurations=new Cs(n.layers,n.zoom),this.segments=new ur,this.segments2=new ur,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Ey("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),x=[];for(const{feature:S,id:P,index:F,sourceLayerIndex:W}of n){const Q=this.layers[0]._featureFilter.needGeometry,ae=ju(S,Q);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),ae,h))continue;const fe=v?p.evaluate(ae,{},h,s.availableImages):void 0,me={id:P,properties:S.properties,type:S.type,sourceLayerIndex:W,index:F,geometry:Q?ae.geometry:Ru(S),patterns:{},sortKey:fe};x.push(me)}v&&x.sort((S,P)=>S.sortKey-P.sortKey);for(const S of x){const{geometry:P,index:F,sourceLayerIndex:W}=S;if(this.hasPattern){const Q=Ty("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(Q)}else this.addFeature(S,P,F,h,{});s.featureIndex.insert(n[F].feature,P,F,W,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,VA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,p,v){for(const x of Sy(s,500)){let S=0;for(const fe of x)S+=fe.length;const P=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),F=P.vertexLength,W=[],Q=[];for(const fe of x){if(fe.length===0)continue;fe!==x[0]&&Q.push(W.length/2);const me=this.segments2.prepareSegment(fe.length,this.layoutVertexArray,this.indexArray2),Ae=me.vertexLength;this.layoutVertexArray.emplaceBack(fe[0].x,fe[0].y),this.indexArray2.emplaceBack(Ae+fe.length-1,Ae),W.push(fe[0].x),W.push(fe[0].y);for(let Re=1;Re<fe.length;Re++)this.layoutVertexArray.emplaceBack(fe[Re].x,fe[Re].y),this.indexArray2.emplaceBack(Ae+Re-1,Ae+Re),W.push(fe[Re].x),W.push(fe[Re].y);me.vertexLength+=fe.length,me.primitiveLength+=fe.length}const ae=qx(W,Q);for(let fe=0;fe<ae.length;fe+=3)this.indexArray.emplaceBack(F+ae[fe],F+ae[fe+1],F+ae[fe+2]);P.vertexLength+=S,P.primitiveLength+=ae.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}let Yx,Jx;Bt("FillBucket",Cy,{omit:["layers","patternFeatures"]});var nP={get paint(){return Jx=Jx||new Ir({"fill-antialias":new qt(se.paint_fill["fill-antialias"]),"fill-opacity":new an(se.paint_fill["fill-opacity"]),"fill-color":new an(se.paint_fill["fill-color"]),"fill-outline-color":new an(se.paint_fill["fill-outline-color"]),"fill-translate":new qt(se.paint_fill["fill-translate"]),"fill-translate-anchor":new qt(se.paint_fill["fill-translate-anchor"]),"fill-pattern":new zu(se.paint_fill["fill-pattern"])})},get layout(){return Yx=Yx||new Ir({"fill-sort-key":new an(se.layout_fill["fill-sort-key"])})}};class rP extends _o{constructor(n){super(n,nP)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Cy(n)}queryRadius(){return ap(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,p,v,x,S){return zx(lp(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),p)}isTileClipped(){return!0}}const iP=pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),oP=pr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:sP}=iP;var Pl={},aP=I,Qx=Pc;function Pc(o,n,s,h,p){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields(lP,this,n)}function lP(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=p._keys[h.readVarint()],S=p._values[h.readVarint()];p.properties[x]=S}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function uP(o){for(var n,s,h=0,p=0,v=o.length,x=v-1;p<v;x=p++)h+=((s=o[x]).x-(n=o[p]).x)*(n.y+s.y);return h}Pc.types=["Unknown","Point","LineString","Polygon"],Pc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,p=0,v=0,x=0,S=[];o.pos<s;){if(p<=0){var P=o.readVarint();h=7&P,p=P>>3}if(p--,h===1||h===2)v+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&S.push(n),n=[]),n.push(new aP(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&S.push(n),S},Pc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,p=0,v=0,x=1/0,S=-1/0,P=1/0,F=-1/0;o.pos<n;){if(h<=0){var W=o.readVarint();s=7&W,h=W>>3}if(h--,s===1||s===2)(p+=o.readSVarint())<x&&(x=p),p>S&&(S=p),(v+=o.readSVarint())<P&&(P=v),v>F&&(F=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,P,S,F]},Pc.prototype.toGeoJSON=function(o,n,s){var h,p,v=this.extent*Math.pow(2,s),x=this.extent*o,S=this.extent*n,P=this.loadGeometry(),F=Pc.types[this.type];function W(fe){for(var me=0;me<fe.length;me++){var Ae=fe[me];fe[me]=[360*(Ae.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ae.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var Q=[];for(h=0;h<P.length;h++)Q[h]=P[h][0];W(P=Q);break;case 2:for(h=0;h<P.length;h++)W(P[h]);break;case 3:for(P=function(fe){var me=fe.length;if(me<=1)return[fe];for(var Ae,Re,Ne=[],Je=0;Je<me;Je++){var We=uP(fe[Je]);We!==0&&(Re===void 0&&(Re=We<0),Re===We<0?(Ae&&Ne.push(Ae),Ae=[fe[Je]]):Ae.push(fe[Je]))}return Ae&&Ne.push(Ae),Ne}(P),h=0;h<P.length;h++)for(p=0;p<P[h].length;p++)W(P[h][p])}P.length===1?P=P[0]:F="Multi"+F;var ae={type:"Feature",geometry:{type:F,coordinates:P},properties:this.properties};return"id"in this&&(ae.id=this.id),ae};var cP=Qx,ew=tw;function tw(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(hP,this,n),this.length=this._features.length}function hP(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return p}(s))}tw.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new cP(this._pbf,n,this.extent,this._keys,this._values)};var fP=ew;function dP(o,n,s){if(o===3){var h=new fP(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Pl.VectorTile=function(o,n){this.layers=o.readFields(dP,{},n)},Pl.VectorTileFeature=Qx,Pl.VectorTileLayer=ew;const pP=Pl.VectorTileFeature.types,Iy=Math.pow(2,13);function pf(o,n,s,h,p,v,x,S){o.emplaceBack(n,s,2*Math.floor(h*Iy)+x,p*Iy*2,v*Iy*2,Math.round(S))}class Ay{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new kt,this.centroidVertexArray=new Et,this.indexArray=new si,this.programConfigurations=new Cs(n.layers,n.zoom),this.segments=new ur,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=Ey("fill-extrusion",this.layers,s);for(const{feature:p,id:v,index:x,sourceLayerIndex:S}of n){const P=this.layers[0]._featureFilter.needGeometry,F=ju(p,P);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),F,h))continue;const W={id:v,sourceLayerIndex:S,index:x,geometry:P?F.geometry:Ru(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(Ty("fill-extrusion",this.layers,W,this.zoom,s)):this.addFeature(W,W.geometry,x,h,{}),s.featureIndex.insert(p,W.geometry,x,S,this.index,!0)}}addFeatures(n,s,h){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,sP),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,oP.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,p,v){const x={x:0,y:0,vertexCount:0};for(const S of Sy(s,500)){let P=0;for(const me of S)P+=me.length;let F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const me of S){if(me.length===0||gP(me))continue;let Ae=0;for(let Re=0;Re<me.length;Re++){const Ne=me[Re];if(Re>=1){const Je=me[Re-1];if(!mP(Ne,Je)){F.vertexLength+4>ur.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const We=Ne.sub(Je)._perp()._unit(),Qe=Je.dist(Ne);Ae+Qe>32768&&(Ae=0),pf(this.layoutVertexArray,Ne.x,Ne.y,We.x,We.y,0,0,Ae),pf(this.layoutVertexArray,Ne.x,Ne.y,We.x,We.y,0,1,Ae),x.x+=2*Ne.x,x.y+=2*Ne.y,x.vertexCount+=2,Ae+=Qe,pf(this.layoutVertexArray,Je.x,Je.y,We.x,We.y,0,0,Ae),pf(this.layoutVertexArray,Je.x,Je.y,We.x,We.y,0,1,Ae),x.x+=2*Je.x,x.y+=2*Je.y,x.vertexCount+=2;const rt=F.vertexLength;this.indexArray.emplaceBack(rt,rt+2,rt+1),this.indexArray.emplaceBack(rt+1,rt+2,rt+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+P>ur.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),pP[n.type]!=="Polygon")continue;const W=[],Q=[],ae=F.vertexLength;for(const me of S)if(me.length!==0){me!==S[0]&&Q.push(W.length/2);for(let Ae=0;Ae<me.length;Ae++){const Re=me[Ae];pf(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),x.x+=Re.x,x.y+=Re.y,x.vertexCount+=1,W.push(Re.x),W.push(Re.y)}}const fe=qx(W,Q);for(let me=0;me<fe.length;me+=3)this.indexArray.emplaceBack(ae+fe[me],ae+fe[me+2],ae+fe[me+1]);F.primitiveLength+=fe.length/3,F.vertexLength+=P}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}function mP(o,n){return o.x===n.x&&(o.x<0||o.x>Or)||o.y===n.y&&(o.y<0||o.y>Or)}function gP(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Or)||o.every(n=>n.y<0)||o.every(n=>n.y>Or)}let nw;Bt("FillExtrusionBucket",Ay,{omit:["layers","features"]});var yP={get paint(){return nw=nw||new Ir({"fill-extrusion-opacity":new qt(se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new an(se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qt(se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qt(se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new zu(se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new an(se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new an(se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qt(se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class vP extends _o{constructor(n){super(n,yP)}createBucket(n){return new Ay(n)}queryRadius(){return ap(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,p,v,x,S,P){const F=lp(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),W=this.paint.get("fill-extrusion-height").evaluate(s,h),Q=this.paint.get("fill-extrusion-base").evaluate(s,h),ae=function(me,Ae,Re,Ne){const Je=[];for(const We of me){const Qe=[We.x,We.y,0,1];up(Qe,Qe,Ae),Je.push(new k(Qe[0]/Qe[3],Qe[1]/Qe[3]))}return Je}(F,P),fe=function(me,Ae,Re,Ne){const Je=[],We=[],Qe=Ne[8]*Ae,rt=Ne[9]*Ae,gt=Ne[10]*Ae,Ot=Ne[11]*Ae,Vt=Ne[8]*Re,zt=Ne[9]*Re,Mt=Ne[10]*Re,Ct=Ne[11]*Re;for(const Nt of me){const Pt=[],bt=[];for(const tn of Nt){const Wt=tn.x,Cn=tn.y,cr=Ne[0]*Wt+Ne[4]*Cn+Ne[12],fr=Ne[1]*Wt+Ne[5]*Cn+Ne[13],Xr=Ne[2]*Wt+Ne[6]*Cn+Ne[14],wo=Ne[3]*Wt+Ne[7]*Cn+Ne[15],$i=Xr+gt,Rr=wo+Ot,li=cr+Vt,vi=fr+zt,Vi=Xr+Mt,Gi=wo+Ct,qr=new k((cr+Qe)/Rr,(fr+rt)/Rr);qr.z=$i/Rr,Pt.push(qr);const Kr=new k(li/Gi,vi/Gi);Kr.z=Vi/Gi,bt.push(Kr)}Je.push(Pt),We.push(bt)}return[Je,We]}(p,Q,W,P);return function(me,Ae,Re){let Ne=1/0;zx(Re,Ae)&&(Ne=rw(Re,Ae[0]));for(let Je=0;Je<Ae.length;Je++){const We=Ae[Je],Qe=me[Je];for(let rt=0;rt<We.length-1;rt++){const gt=We[rt],Ot=[gt,We[rt+1],Qe[rt+1],Qe[rt],gt];Lx(Re,Ot)&&(Ne=Math.min(Ne,rw(Re,Ot)))}}return Ne!==1/0&&Ne}(fe[0],fe[1],ae)}}function mf(o,n){return o.x*n.x+o.y*n.y}function rw(o,n){if(o.length===1){let s=0;const h=n[s++];let p;for(;!p||h.equals(p);)if(p=n[s++],!p)return 1/0;for(;s<n.length;s++){const v=n[s],x=o[0],S=p.sub(h),P=v.sub(h),F=x.sub(h),W=mf(S,S),Q=mf(S,P),ae=mf(P,P),fe=mf(F,S),me=mf(F,P),Ae=W*ae-Q*Q,Re=(ae*fe-Q*me)/Ae,Ne=(W*me-Q*fe)/Ae,Je=h.z*(1-Re-Ne)+p.z*Re+v.z*Ne;if(isFinite(Je))return Je}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const _P=pr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:xP}=_P,wP=pr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:bP}=wP,SP=Pl.VectorTileFeature.types,EP=Math.cos(Math.PI/180*37.5),iw=Math.pow(2,14)/.5;class Py{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new ln,this.layoutVertexArray2=new Ht,this.indexArray=new si,this.programConfigurations=new Cs(n.layers,n.zoom),this.segments=new ur,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Ey("line",this.layers,s);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),x=[];for(const{feature:S,id:P,index:F,sourceLayerIndex:W}of n){const Q=this.layers[0]._featureFilter.needGeometry,ae=ju(S,Q);if(!this.layers[0]._featureFilter.filter(new lr(this.zoom),ae,h))continue;const fe=v?p.evaluate(ae,{},h):void 0,me={id:P,properties:S.properties,type:S.type,sourceLayerIndex:W,index:F,geometry:Q?ae.geometry:Ru(S),patterns:{},sortKey:fe};x.push(me)}v&&x.sort((S,P)=>S.sortKey-P.sortKey);for(const S of x){const{geometry:P,index:F,sourceLayerIndex:W}=S;if(this.hasPattern){const Q=Ty("line",this.layers,S,this.zoom,s);this.patternFeatures.push(Q)}else this.addFeature(S,P,F,h,{});s.featureIndex.insert(n[F].feature,P,F,W,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,bP)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,xP),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,p,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),P=x.get("line-cap"),F=x.get("line-miter-limit"),W=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const Q of s)this.addLine(Q,n,S,P,F,W);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}addLine(n,s,h,p,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ne=0;Ne<n.length-1;Ne++)this.totalDistance+=n[Ne].dist(n[Ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=SP[s.type]==="Polygon";let P=n.length;for(;P>=2&&n[P-1].equals(n[P-2]);)P--;let F=0;for(;F<P-1&&n[F].equals(n[F+1]);)F++;if(P<(S?3:2))return;h==="bevel"&&(v=1.05);const W=this.overscaling<=16?15*Or/(512*this.overscaling):0,Q=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let ae,fe,me,Ae,Re;this.e1=this.e2=-1,S&&(ae=n[P-2],Re=n[F].sub(ae)._unit()._perp());for(let Ne=F;Ne<P;Ne++){if(me=Ne===P-1?S?n[F+1]:void 0:n[Ne+1],me&&n[Ne].equals(me))continue;Re&&(Ae=Re),ae&&(fe=ae),ae=n[Ne],Re=me?me.sub(ae)._unit()._perp():Ae,Ae=Ae||Re;let Je=Ae.add(Re);Je.x===0&&Je.y===0||Je._unit();const We=Ae.x*Re.x+Ae.y*Re.y,Qe=Je.x*Re.x+Je.y*Re.y,rt=Qe!==0?1/Qe:1/0,gt=2*Math.sqrt(2-2*Qe),Ot=Qe<EP&&fe&&me,Vt=Ae.x*Re.y-Ae.y*Re.x>0;if(Ot&&Ne>F){const Ct=ae.dist(fe);if(Ct>2*W){const Nt=ae.sub(ae.sub(fe)._mult(W/Ct)._round());this.updateDistance(fe,Nt),this.addCurrentVertex(Nt,Ae,0,0,Q),fe=Nt}}const zt=fe&&me;let Mt=zt?h:S?"butt":p;if(zt&&Mt==="round"&&(rt<x?Mt="miter":rt<=2&&(Mt="fakeround")),Mt==="miter"&&rt>v&&(Mt="bevel"),Mt==="bevel"&&(rt>2&&(Mt="flipbevel"),rt<v&&(Mt="miter")),fe&&this.updateDistance(fe,ae),Mt==="miter")Je._mult(rt),this.addCurrentVertex(ae,Je,0,0,Q);else if(Mt==="flipbevel"){if(rt>100)Je=Re.mult(-1);else{const Ct=rt*Ae.add(Re).mag()/Ae.sub(Re).mag();Je._perp()._mult(Ct*(Vt?-1:1))}this.addCurrentVertex(ae,Je,0,0,Q),this.addCurrentVertex(ae,Je.mult(-1),0,0,Q)}else if(Mt==="bevel"||Mt==="fakeround"){const Ct=-Math.sqrt(rt*rt-1),Nt=Vt?Ct:0,Pt=Vt?0:Ct;if(fe&&this.addCurrentVertex(ae,Ae,Nt,Pt,Q),Mt==="fakeround"){const bt=Math.round(180*gt/Math.PI/20);for(let tn=1;tn<bt;tn++){let Wt=tn/bt;if(Wt!==.5){const cr=Wt-.5;Wt+=Wt*cr*(Wt-1)*((1.0904+We*(We*(3.55645-1.43519*We)-3.2452))*cr*cr+(.848013+We*(.215638*We-1.06021)))}const Cn=Re.sub(Ae)._mult(Wt)._add(Ae)._unit()._mult(Vt?-1:1);this.addHalfVertex(ae,Cn.x,Cn.y,!1,Vt,0,Q)}}me&&this.addCurrentVertex(ae,Re,-Nt,-Pt,Q)}else if(Mt==="butt")this.addCurrentVertex(ae,Je,0,0,Q);else if(Mt==="square"){const Ct=fe?1:-1;this.addCurrentVertex(ae,Je,Ct,Ct,Q)}else Mt==="round"&&(fe&&(this.addCurrentVertex(ae,Ae,0,0,Q),this.addCurrentVertex(ae,Ae,1,1,Q,!0)),me&&(this.addCurrentVertex(ae,Re,-1,-1,Q,!0),this.addCurrentVertex(ae,Re,0,0,Q)));if(Ot&&Ne<P-1){const Ct=ae.dist(me);if(Ct>2*W){const Nt=ae.add(me.sub(ae)._mult(W/Ct)._round());this.updateDistance(ae,Nt),this.addCurrentVertex(Nt,Re,0,0,Q),ae=Nt}}}}addCurrentVertex(n,s,h,p,v,x=!1){const S=s.y*p-s.x,P=-s.y-s.x*p;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,v),this.addHalfVertex(n,S,P,x,!0,-p,v),this.distance>iw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,p,v,x))}addHalfVertex({x:n,y:s},h,p,v,x,S,P){const F=.5*(this.lineClips?this.scaledDistance*(iw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(S===0?0:S<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const W=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),P.primitiveLength++),x?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let ow,sw;Bt("LineBucket",Py,{omit:["layers","patternFeatures"]});var aw={get paint(){return sw=sw||new Ir({"line-opacity":new an(se.paint_line["line-opacity"]),"line-color":new an(se.paint_line["line-color"]),"line-translate":new qt(se.paint_line["line-translate"]),"line-translate-anchor":new qt(se.paint_line["line-translate-anchor"]),"line-width":new an(se.paint_line["line-width"]),"line-gap-width":new an(se.paint_line["line-gap-width"]),"line-offset":new an(se.paint_line["line-offset"]),"line-blur":new an(se.paint_line["line-blur"]),"line-dasharray":new Yh(se.paint_line["line-dasharray"]),"line-pattern":new zu(se.paint_line["line-pattern"]),"line-gradient":new Jh(se.paint_line["line-gradient"])})},get layout(){return ow=ow||new Ir({"line-cap":new qt(se.layout_line["line-cap"]),"line-join":new an(se.layout_line["line-join"]),"line-miter-limit":new qt(se.layout_line["line-miter-limit"]),"line-round-limit":new qt(se.layout_line["line-round-limit"]),"line-sort-key":new an(se.layout_line["line-sort-key"])})}};class TP extends an{possiblyEvaluate(n,s){return s=new lr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,p){return s=M({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,p)}}let pp;class CP extends _o{constructor(n){super(n,aw),this.gradientVersion=0,pp||(pp=new TP(aw.paint.properties["line-width"].specification),pp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Xo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=pp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Py(n)}queryRadius(n){const s=n,h=lw(af("line-width",this,s),af("line-gap-width",this,s)),p=af("line-offset",this,s);return h/2+Math.abs(p)+ap(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,p,v,x,S){const P=lp(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),F=S/2*lw(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),W=this.paint.get("line-offset").evaluate(s,h);return W&&(p=function(Q,ae){const fe=[];for(let me=0;me<Q.length;me++){const Ae=Q[me],Re=[];for(let Ne=0;Ne<Ae.length;Ne++){const Je=Ae[Ne-1],We=Ae[Ne],Qe=Ae[Ne+1],rt=Ne===0?new k(0,0):We.sub(Je)._unit()._perp(),gt=Ne===Ae.length-1?new k(0,0):Qe.sub(We)._unit()._perp(),Ot=rt._add(gt)._unit(),Vt=Ot.x*gt.x+Ot.y*gt.y;Vt!==0&&Ot._mult(1/Vt),Re.push(Ot._mult(ae)._add(We))}fe.push(Re)}return fe}(p,W*S)),function(Q,ae,fe){for(let me=0;me<ae.length;me++){const Ae=ae[me];if(Q.length>=3){for(let Re=0;Re<Ae.length;Re++)if(Cc(Q,Ae[Re]))return!0}if(LA(Q,Ae,fe))return!0}return!1}(P,p,F)}isTileClipped(){return!0}}function lw(o,n){return n>0?n+2*o:o}const IP=pr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),AP=pr([{name:"a_projected_pos",components:3,type:"Float32"}],4);pr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const PP=pr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);pr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const uw=pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),kP=pr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function MP(o,n,s){return o.sections.forEach(h=>{h.text=function(p,v,x){const S=v.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?p=p.toLocaleUpperCase():S==="lowercase"&&(p=p.toLocaleLowerCase()),to.applyArabicShaping&&(p=to.applyArabicShaping(p)),p}(h.text,n,s)}),o}pr([{name:"triangle",components:3,type:"Uint16"}]),pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),pr([{type:"Float32",name:"offsetX"}]),pr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),pr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const gf={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Wr=24,cw=Kn,hw=function(o,n,s,h,p){var v,x,S=8*p-h-1,P=(1<<S)-1,F=P>>1,W=-7,Q=s?p-1:0,ae=s?-1:1,fe=o[n+Q];for(Q+=ae,v=fe&(1<<-W)-1,fe>>=-W,W+=S;W>0;v=256*v+o[n+Q],Q+=ae,W-=8);for(x=v&(1<<-W)-1,v>>=-W,W+=h;W>0;x=256*x+o[n+Q],Q+=ae,W-=8);if(v===0)v=1-F;else{if(v===P)return x?NaN:1/0*(fe?-1:1);x+=Math.pow(2,h),v-=F}return(fe?-1:1)*x*Math.pow(2,v-h)},fw=function(o,n,s,h,p,v){var x,S,P,F=8*v-p-1,W=(1<<F)-1,Q=W>>1,ae=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,fe=h?0:v-1,me=h?1:-1,Ae=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(S=isNaN(n)?1:0,x=W):(x=Math.floor(Math.log(n)/Math.LN2),n*(P=Math.pow(2,-x))<1&&(x--,P*=2),(n+=x+Q>=1?ae/P:ae*Math.pow(2,1-Q))*P>=2&&(x++,P/=2),x+Q>=W?(S=0,x=W):x+Q>=1?(S=(n*P-1)*Math.pow(2,p),x+=Q):(S=n*Math.pow(2,Q-1)*Math.pow(2,p),x=0));p>=8;o[s+fe]=255&S,fe+=me,S/=256,p-=8);for(x=x<<p|S,F+=p;F>0;o[s+fe]=255&x,fe+=me,x/=256,F-=8);o[s+fe-me]|=128*Ae};function Kn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Kn.Varint=0,Kn.Fixed64=1,Kn.Bytes=2,Kn.Fixed32=5;var ky=4294967296,dw=1/ky,pw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ra(o){return o.type===Kn.Bytes?o.readVarint()+o.pos:o.pos+1}function kc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function mw(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var p=s.pos-1;p>=o;p--)s.buf[p+h]=s.buf[p]}function LP(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function zP(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function FP(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function OP(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function RP(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function jP(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function DP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function BP(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function NP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function mp(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Mc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function gw(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}Kn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,o(p,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=mp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=gw(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=mp(this.buf,this.pos)+mp(this.buf,this.pos+4)*ky;return this.pos+=8,o},readSFixed64:function(){var o=mp(this.buf,this.pos)+gw(this.buf,this.pos+4)*ky;return this.pos+=8,o},readFloat:function(){var o=hw(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=hw(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(p,v,x){var S,P,F=x.buf;if(S=(112&(P=F[x.pos++]))>>4,P<128||(S|=(127&(P=F[x.pos++]))<<3,P<128)||(S|=(127&(P=F[x.pos++]))<<10,P<128)||(S|=(127&(P=F[x.pos++]))<<17,P<128)||(S|=(127&(P=F[x.pos++]))<<24,P<128)||(S|=(1&(P=F[x.pos++]))<<31,P<128))return kc(p,S,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&pw?function(s,h,p){return pw.decode(s.subarray(h,p))}(this.buf,n,o):function(s,h,p){for(var v="",x=h;x<p;){var S,P,F,W=s[x],Q=null,ae=W>239?4:W>223?3:W>191?2:1;if(x+ae>p)break;ae===1?W<128&&(Q=W):ae===2?(192&(S=s[x+1]))==128&&(Q=(31&W)<<6|63&S)<=127&&(Q=null):ae===3?(P=s[x+2],(192&(S=s[x+1]))==128&&(192&P)==128&&((Q=(15&W)<<12|(63&S)<<6|63&P)<=2047||Q>=55296&&Q<=57343)&&(Q=null)):ae===4&&(P=s[x+2],F=s[x+3],(192&(S=s[x+1]))==128&&(192&P)==128&&(192&F)==128&&((Q=(15&W)<<18|(63&S)<<12|(63&P)<<6|63&F)<=65535||Q>=1114112)&&(Q=null)),Q===null?(Q=65533,ae=1):Q>65535&&(Q-=65536,v+=String.fromCharCode(Q>>>10&1023|55296),Q=56320|1023&Q),v+=String.fromCharCode(Q),x+=ae}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Kn.Bytes)return o.push(this.readVarint(n));var s=Ra(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSVarint());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Kn.Bytes)return o.push(this.readBoolean());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFloat());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Kn.Bytes)return o.push(this.readDouble());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFixed32());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSFixed32());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFixed64());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSFixed64());var n=Ra(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Kn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Kn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Kn.Fixed32)this.pos+=4;else{if(n!==Kn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Mc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Mc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Mc(this.buf,-1&o,this.pos),Mc(this.buf,Math.floor(o*dw),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Mc(this.buf,-1&o,this.pos),Mc(this.buf,Math.floor(o*dw),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(h,0,s),function(v,x){var S=(7&v)<<4;x.buf[x.pos++]|=S|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(p,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,p,v){for(var x,S,P=0;P<p.length;P++){if((x=p.charCodeAt(P))>55295&&x<57344){if(!S){x>56319||P+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):S=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[v++]=239,h[v++]=191,h[v++]=189,S=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&mw(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),fw(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),fw(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&mw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Kn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,LP,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,zP,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,RP,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,FP,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,OP,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,jP,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,DP,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,BP,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,NP,n)},writeBytesField:function(o,n){this.writeTag(o,Kn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Kn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Kn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Kn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var My=w(cw);const Ly=3;function UP(o,n,s){o===1&&s.readMessage($P,n)}function $P(o,n,s){if(o===3){const{id:h,bitmap:p,width:v,height:x,left:S,top:P,advance:F}=s.readMessage(VP,{});n.push({id:h,bitmap:new uf({width:v+2*Ly,height:x+2*Ly},p),metrics:{width:v,height:x,left:S,top:P,advance:F}})}}function VP(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const yw=Ly;function vw(o){let n=0,s=0;for(const x of o)n+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let p=0,v=0;for(const x of o)for(let S=h.length-1;S>=0;S--){const P=h[S];if(!(x.w>P.w||x.h>P.h)){if(x.x=P.x,x.y=P.y,v=Math.max(v,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===P.w&&x.h===P.h){const F=h.pop();S<h.length&&(h[S]=F)}else x.h===P.h?(P.x+=x.w,P.w-=x.w):x.w===P.w?(P.y+=x.h,P.h-=x.h):(h.push({x:P.x+x.w,y:P.y,w:P.w-x.w,h:x.h}),P.y+=x.h,P.h-=x.h);break}}return{w:p,h:v,fill:n/(p*v)||0}}const ro=1;class zy{constructor(n,{pixelRatio:s,version:h,stretchX:p,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=p,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+ro,this.paddedRect.y+ro]}get br(){return[this.paddedRect.x+this.paddedRect.w-ro,this.paddedRect.y+this.paddedRect.h-ro]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ro)/this.pixelRatio,(this.paddedRect.h-2*ro)/this.pixelRatio]}}class _w{constructor(n,s){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,p,v);const{w:x,h:S}=vw(v),P=new Lo({width:x||1,height:S||1});for(const F in n){const W=n[F],Q=h[F].paddedRect;Lo.copy(W.data,P,{x:0,y:0},{x:Q.x+ro,y:Q.y+ro},W.data)}for(const F in s){const W=s[F],Q=p[F].paddedRect,ae=Q.x+ro,fe=Q.y+ro,me=W.data.width,Ae=W.data.height;Lo.copy(W.data,P,{x:0,y:0},{x:ae,y:fe},W.data),Lo.copy(W.data,P,{x:0,y:Ae-1},{x:ae,y:fe-1},{width:me,height:1}),Lo.copy(W.data,P,{x:0,y:0},{x:ae,y:fe+Ae},{width:me,height:1}),Lo.copy(W.data,P,{x:me-1,y:0},{x:ae-1,y:fe},{width:1,height:Ae}),Lo.copy(W.data,P,{x:0,y:0},{x:ae+me,y:fe},{width:1,height:Ae})}this.image=P,this.iconPositions=h,this.patternPositions=p}addImages(n,s,h){for(const p in n){const v=n[p],x={x:0,y:0,w:v.data.width+2*ro,h:v.data.height+2*ro};h.push(x),s[p]=new zy(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[p,v]=n.tl;h.update(s.data,void 0,{x:p,y:v})}}var kl;Bt("ImagePosition",zy),Bt("ImageAtlas",_w),l.ai=void 0,(kl=l.ai||(l.ai={}))[kl.none=0]="none",kl[kl.horizontal=1]="horizontal",kl[kl.vertical=2]="vertical",kl[kl.horizontalOnly=3]="horizontalOnly";const yf=-17;class vf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new vf;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new vf;return s.imageName=n,s}}class Lc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new Lc;for(let p=0;p<n.sections.length;p++){const v=n.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const p=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=p&&Kd(p)&&!gf[n[h+1]]||v&&Kd(v)&&!gf[n[h-1]]||!gf[n[h]]?n[h]:gf[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&yp[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&yp[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new Lc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(vf.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void be("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(vf.forImage(s)),this.sectionIndex.push(this.sections.length-1)):be("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function gp(o,n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae){const Re=Lc.fromFeature(o,p);let Ne;Q===l.ai.vertical&&Re.verticalizePunctuation();const{processBidirectionalText:Je,processStyledBidirectionalText:We}=to;if(Je&&Re.sections.length===1){Ne=[];const gt=Je(Re.toString(),Fy(Re,F,v,n,h,fe,me));for(const Ot of gt){const Vt=new Lc;Vt.text=Ot,Vt.sections=Re.sections;for(let zt=0;zt<Ot.length;zt++)Vt.sectionIndex.push(0);Ne.push(Vt)}}else if(We){Ne=[];const gt=We(Re.text,Re.sectionIndex,Fy(Re,F,v,n,h,fe,me));for(const Ot of gt){const Vt=new Lc;Vt.text=Ot[0],Vt.sectionIndex=Ot[1],Vt.sections=Re.sections,Ne.push(Vt)}}else Ne=function(gt,Ot){const Vt=[],zt=gt.text;let Mt=0;for(const Ct of Ot)Vt.push(gt.substring(Mt,Ct)),Mt=Ct;return Mt<zt.length&&Vt.push(gt.substring(Mt,zt.length)),Vt}(Re,Fy(Re,F,v,n,h,fe,me));const Qe=[],rt={positionedLines:Qe,text:Re.toString(),top:W[1],bottom:W[1],left:W[0],right:W[0],writingMode:Q,iconsInText:!1,verticalizable:!1};return function(gt,Ot,Vt,zt,Mt,Ct,Nt,Pt,bt,tn,Wt,Cn){let cr=0,fr=yf,Xr=0,wo=0;const $i=Pt==="right"?1:Pt==="left"?0:.5;let Rr=0;for(const qr of Mt){qr.trim();const Kr=qr.getMaxScale(),Ii=(Kr-1)*Wr,Zi={positionedGlyphs:[],lineOffset:0};gt.positionedLines[Rr]=Zi;const Ai=Zi.positionedGlyphs;let io=0;if(!qr.length()){fr+=Ct,++Rr;continue}for(let Yr=0;Yr<qr.length();Yr++){const Ln=qr.getSection(Yr),Pi=qr.getSectionIndex(Yr),_i=qr.getCharCode(Yr);let Jr=0,os=null,Is=null,As=null,ja=Wr;const ss=!(bt===l.ai.horizontal||!Wt&&!Vh(_i)||Wt&&(yp[_i]||(li=_i,Ft.Arabic(li)||Ft["Arabic Supplement"](li)||Ft["Arabic Extended-A"](li)||Ft["Arabic Presentation Forms-A"](li)||Ft["Arabic Presentation Forms-B"](li))));if(Ln.imageName){const Fo=zt[Ln.imageName];if(!Fo)continue;As=Ln.imageName,gt.iconsInText=gt.iconsInText||!0,Is=Fo.paddedRect;const so=Fo.displaySize;Ln.scale=Ln.scale*Wr/Cn,os={width:so[0],height:so[1],left:ro,top:-yw,advance:ss?so[1]:so[0]},Jr=Ii+(Wr-so[1]*Ln.scale),ja=os.advance;const Da=ss?so[0]*Ln.scale-Wr*Kr:so[1]*Ln.scale-Wr*Kr;Da>0&&Da>io&&(io=Da)}else{const Fo=Vt[Ln.fontStack],so=Fo&&Fo[_i];if(so&&so.rect)Is=so.rect,os=so.metrics;else{const Da=Ot[Ln.fontStack],Sf=Da&&Da[_i];if(!Sf)continue;os=Sf.metrics}Jr=(Kr-Ln.scale)*Wr}ss?(gt.verticalizable=!0,Ai.push({glyph:_i,imageName:As,x:cr,y:fr+Jr,vertical:ss,scale:Ln.scale,fontStack:Ln.fontStack,sectionIndex:Pi,metrics:os,rect:Is}),cr+=ja*Ln.scale+tn):(Ai.push({glyph:_i,imageName:As,x:cr,y:fr+Jr,vertical:ss,scale:Ln.scale,fontStack:Ln.fontStack,sectionIndex:Pi,metrics:os,rect:Is}),cr+=os.advance*Ln.scale+tn)}Ai.length!==0&&(Xr=Math.max(cr-tn,Xr),HP(Ai,0,Ai.length-1,$i,io)),cr=0;const oo=Ct*Kr+io;Zi.lineOffset=Math.max(io,Ii),fr+=oo,wo=Math.max(oo,wo),++Rr}var li;const vi=fr-yf,{horizontalAlign:Vi,verticalAlign:Gi}=Oy(Nt);(function(qr,Kr,Ii,Zi,Ai,io,oo,Yr,Ln){const Pi=(Kr-Ii)*Ai;let _i=0;_i=io!==oo?-Yr*Zi-yf:(-Zi*Ln+.5)*oo;for(const Jr of qr)for(const os of Jr.positionedGlyphs)os.x+=Pi,os.y+=_i})(gt.positionedLines,$i,Vi,Gi,Xr,wo,Ct,vi,Mt.length),gt.top+=-Gi*vi,gt.bottom=gt.top+vi,gt.left+=-Vi*Xr,gt.right=gt.left+Xr}(rt,n,s,h,Ne,x,S,P,Q,F,ae,Ae),!function(gt){for(const Ot of gt)if(Ot.positionedGlyphs.length!==0)return!1;return!0}(Qe)&&rt}const yp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},GP={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function xw(o,n,s,h,p,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Wr/v+p:0}{const x=s[n.fontStack],S=x&&x[o];return S?S.metrics.advance*n.scale+p:0}}function ww(o,n,s,h){const p=Math.pow(o-n,2);return h?o<n?p/2:2*p:p+Math.abs(s)*s}function ZP(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function bw(o,n,s,h,p,v){let x=null,S=ww(n,s,p,v);for(const P of h){const F=ww(n-P.x,s,p,v)+P.badness;F<=S&&(x=P,S=F)}return{index:o,x:n,priorBreak:x,badness:S}}function Sw(o){return o?Sw(o.priorBreak).concat(o.index):[]}function Fy(o,n,s,h,p,v,x){if(v!=="point")return[];if(!o)return[];const S=[],P=function(ae,fe,me,Ae,Re,Ne){let Je=0;for(let We=0;We<ae.length();We++){const Qe=ae.getSection(We);Je+=xw(ae.getCharCode(We),Qe,Ae,Re,fe,Ne)}return Je/Math.max(1,Math.ceil(Je/me))}(o,n,s,h,p,x),F=o.text.indexOf("​")>=0;let W=0;for(let ae=0;ae<o.length();ae++){const fe=o.getSection(ae),me=o.getCharCode(ae);if(yp[me]||(W+=xw(me,fe,h,p,n,x)),ae<o.length()-1){const Ae=!((Q=me)<11904||!(Ft["Bopomofo Extended"](Q)||Ft.Bopomofo(Q)||Ft["CJK Compatibility Forms"](Q)||Ft["CJK Compatibility Ideographs"](Q)||Ft["CJK Compatibility"](Q)||Ft["CJK Radicals Supplement"](Q)||Ft["CJK Strokes"](Q)||Ft["CJK Symbols and Punctuation"](Q)||Ft["CJK Unified Ideographs Extension A"](Q)||Ft["CJK Unified Ideographs"](Q)||Ft["Enclosed CJK Letters and Months"](Q)||Ft["Halfwidth and Fullwidth Forms"](Q)||Ft.Hiragana(Q)||Ft["Ideographic Description Characters"](Q)||Ft["Kangxi Radicals"](Q)||Ft["Katakana Phonetic Extensions"](Q)||Ft.Katakana(Q)||Ft["Vertical Forms"](Q)||Ft["Yi Radicals"](Q)||Ft["Yi Syllables"](Q)));(GP[me]||Ae||fe.imageName)&&S.push(bw(ae+1,W,P,S,ZP(me,o.getCharCode(ae+1),Ae&&F),!1))}}var Q;return Sw(bw(o.length(),W,P,S,0,!0))}function Oy(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function HP(o,n,s,h,p){if(!h&&!p)return;const v=o[s],x=(o[s].x+v.metrics.advance*v.scale)*h;for(let S=n;S<=s;S++)o[S].x-=x,o[S].y+=p}function WP(o,n,s){const{horizontalAlign:h,verticalAlign:p}=Oy(s),v=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*p;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Ew(o,n,s,h,p,v){const x=o.image;let S;if(x.content){const Re=x.content,Ne=x.pixelRatio||1;S=[Re[0]/Ne,Re[1]/Ne,x.displaySize[0]-Re[2]/Ne,x.displaySize[1]-Re[3]/Ne]}const P=n.left*v,F=n.right*v;let W,Q,ae,fe;s==="width"||s==="both"?(fe=p[0]+P-h[3],Q=p[0]+F+h[1]):(fe=p[0]+(P+F-x.displaySize[0])/2,Q=fe+x.displaySize[0]);const me=n.top*v,Ae=n.bottom*v;return s==="height"||s==="both"?(W=p[1]+me-h[0],ae=p[1]+Ae+h[2]):(W=p[1]+(me+Ae-x.displaySize[1])/2,ae=W+x.displaySize[1]),{image:x,top:W,right:Q,bottom:ae,left:fe,collisionPadding:S}}const _f=255,na=128,Ml=_f*na;function Tw(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new lr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=s;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const S=h[v],P=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:P,interpolationType:p}:{kind:"camera",minZoom:S,maxZoom:P,minSize:s.evaluate(new lr(S)),maxSize:s.evaluate(new lr(P)),interpolationType:p}}}function Ry(o,n,s){let h="never";const p=o.get(n);return p?h=p:o.get(s)&&(h="always"),h}const XP=Pl.VectorTileFeature.types,qP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vp(o,n,s,h,p,v,x,S,P,F,W,Q,ae){const fe=S?Math.min(Ml,Math.round(S[0])):0,me=S?Math.min(Ml,Math.round(S[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*p),v,x,(fe<<1)+(P?1:0),me,16*F,16*W,256*Q,256*ae)}function jy(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function KP(o){for(const n of o.sections)if(uy(n.text))return!0;return!1}class Dy{constructor(n){this.layoutVertexArray=new An,this.indexArray=new si,this.programConfigurations=n,this.segments=new ur,this.dynamicLayoutVertexArray=new _n,this.opacityVertexArray=new kn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ke}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,IP.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,AP.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,qP,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Bt("SymbolBuffers",Dy);class By{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new ur,this.collisionVertexArray=new nr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,PP.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Bt("CollisionBuffers",By);class zc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=gy([]),this.placementViewportMatrix=gy([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Tw(this.zoom,s["text-size"]),this.iconSizeData=Tw(this.zoom,s["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=Ry(h,"text-overlap","text-allow-overlap")!=="never"||Ry(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>l.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new Dy(new Cs(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Dy(new Cs(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Ye,this.lineVertexArray=new ot,this.symbolInstances=new De,this.textAnchorOffsets=new dt}calculateGlyphDependencies(n,s,h,p,v){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||p)&&v){const S=gf[n.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(n,s,h){const p=this.layers[0],v=p.layout,x=v.get("text-font"),S=v.get("text-field"),P=v.get("icon-image"),F=(S.value.kind!=="constant"||S.value.value instanceof ti&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),W=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,Q=v.get("symbol-sort-key");if(this.features=[],!F&&!W)return;const ae=s.iconDependencies,fe=s.glyphDependencies,me=s.availableImages,Ae=new lr(this.zoom);for(const{feature:Re,id:Ne,index:Je,sourceLayerIndex:We}of n){const Qe=p._featureFilter.needGeometry,rt=ju(Re,Qe);if(!p._featureFilter.filter(Ae,rt,h))continue;let gt,Ot;if(Qe||(rt.geometry=Ru(Re)),F){const zt=p.getValueAndResolveTokens("text-field",rt,h,me),Mt=ti.factory(zt);KP(Mt)&&(this.hasRTLText=!0),(!this.hasRTLText||qh()==="unavailable"||this.hasRTLText&&to.isParsed())&&(gt=MP(Mt,p,rt))}if(W){const zt=p.getValueAndResolveTokens("icon-image",rt,h,me);Ot=zt instanceof $r?zt:$r.fromString(zt)}if(!gt&&!Ot)continue;const Vt=this.sortFeaturesByKey?Q.evaluate(rt,{},h):void 0;if(this.features.push({id:Ne,text:gt,icon:Ot,index:Je,sourceLayerIndex:We,geometry:rt.geometry,properties:Re.properties,type:XP[Re.type],sortKey:Vt}),Ot&&(ae[Ot.name]=!0),gt){const zt=x.evaluate(rt,{},h).join(","),Mt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ai.vertical)>=0;for(const Ct of gt.sections)if(Ct.image)ae[Ct.image.name]=!0;else{const Nt=Uh(gt.toString()),Pt=Ct.fontStack||zt,bt=fe[Pt]=fe[Pt]||{};this.calculateGlyphDependencies(Ct.text,bt,Mt,this.allowVerticalPlacement,Nt)}}}v.get("symbol-placement")==="line"&&(this.features=function(Re){const Ne={},Je={},We=[];let Qe=0;function rt(zt){We.push(Re[zt]),Qe++}function gt(zt,Mt,Ct){const Nt=Je[zt];return delete Je[zt],Je[Mt]=Nt,We[Nt].geometry[0].pop(),We[Nt].geometry[0]=We[Nt].geometry[0].concat(Ct[0]),Nt}function Ot(zt,Mt,Ct){const Nt=Ne[Mt];return delete Ne[Mt],Ne[zt]=Nt,We[Nt].geometry[0].shift(),We[Nt].geometry[0]=Ct[0].concat(We[Nt].geometry[0]),Nt}function Vt(zt,Mt,Ct){const Nt=Ct?Mt[0][Mt[0].length-1]:Mt[0][0];return`${zt}:${Nt.x}:${Nt.y}`}for(let zt=0;zt<Re.length;zt++){const Mt=Re[zt],Ct=Mt.geometry,Nt=Mt.text?Mt.text.toString():null;if(!Nt){rt(zt);continue}const Pt=Vt(Nt,Ct),bt=Vt(Nt,Ct,!0);if(Pt in Je&&bt in Ne&&Je[Pt]!==Ne[bt]){const tn=Ot(Pt,bt,Ct),Wt=gt(Pt,bt,We[tn].geometry);delete Ne[Pt],delete Je[bt],Je[Vt(Nt,We[Wt].geometry,!0)]=Wt,We[tn].geometry=null}else Pt in Je?gt(Pt,bt,Ct):bt in Ne?Ot(Pt,bt,Ct):(rt(zt),Ne[Pt]=Qe-1,Je[bt]=Qe-1)}return We.filter(zt=>zt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,Ne)=>Re.sortKey-Ne.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const x={};for(let S=n.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:p},S<s.length-1&&(p+=s[S+1].dist(s[S]));for(let S=n.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const P=x[S];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,p,v,x,S,P,F,W,Q,ae){const fe=n.indexArray,me=n.layoutVertexArray,Ae=n.segments.prepareSegment(4*s.length,me,fe,this.canOverlap?x.sortKey:void 0),Re=this.glyphOffsetArray.length,Ne=Ae.vertexLength,Je=this.allowVerticalPlacement&&S===l.ai.vertical?Math.PI/2:0,We=x.text&&x.text.sections;for(let Qe=0;Qe<s.length;Qe++){const{tl:rt,tr:gt,bl:Ot,br:Vt,tex:zt,pixelOffsetTL:Mt,pixelOffsetBR:Ct,minFontScaleX:Nt,minFontScaleY:Pt,glyphOffset:bt,isSDF:tn,sectionIndex:Wt}=s[Qe],Cn=Ae.vertexLength,cr=bt[1];vp(me,P.x,P.y,rt.x,cr+rt.y,zt.x,zt.y,h,tn,Mt.x,Mt.y,Nt,Pt),vp(me,P.x,P.y,gt.x,cr+gt.y,zt.x+zt.w,zt.y,h,tn,Ct.x,Mt.y,Nt,Pt),vp(me,P.x,P.y,Ot.x,cr+Ot.y,zt.x,zt.y+zt.h,h,tn,Mt.x,Ct.y,Nt,Pt),vp(me,P.x,P.y,Vt.x,cr+Vt.y,zt.x+zt.w,zt.y+zt.h,h,tn,Ct.x,Ct.y,Nt,Pt),jy(n.dynamicLayoutVertexArray,P,Je),fe.emplaceBack(Cn,Cn+1,Cn+2),fe.emplaceBack(Cn+1,Cn+2,Cn+3),Ae.vertexLength+=4,Ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bt[0]),Qe!==s.length-1&&Wt===s[Qe+1].sectionIndex||n.programConfigurations.populatePaintArrays(me.length,x,x.index,{},ae,We&&We[Wt])}n.placedSymbolArray.emplaceBack(P.x,P.y,Re,this.glyphOffsetArray.length-Re,Ne,F,W,P.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],S,0,!1,0,Q)}_addCollisionDebugVertex(n,s,h,p,v,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,p,v,x,S){const P=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),F=P.vertexLength,W=v.layoutVertexArray,Q=v.collisionVertexArray,ae=S.anchorX,fe=S.anchorY;this._addCollisionDebugVertex(W,Q,x,ae,fe,new k(n,s)),this._addCollisionDebugVertex(W,Q,x,ae,fe,new k(h,s)),this._addCollisionDebugVertex(W,Q,x,ae,fe,new k(h,p)),this._addCollisionDebugVertex(W,Q,x,ae,fe,new k(n,p)),P.vertexLength+=4;const me=v.indexArray;me.emplaceBack(F,F+1),me.emplaceBack(F+1,F+2),me.emplaceBack(F+2,F+3),me.emplaceBack(F+3,F),P.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,p){for(let v=n;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new By(Sr,uw.members,Zr),this.iconCollisionBox=new By(Sr,uw.members,Zr);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,p,v,x,S,P,F){const W={};for(let Q=s;Q<h;Q++){const ae=n.get(Q);W.textBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.textFeatureIndex=ae.featureIndex;break}for(let Q=p;Q<v;Q++){const ae=n.get(Q);W.verticalTextBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.verticalTextFeatureIndex=ae.featureIndex;break}for(let Q=x;Q<S;Q++){const ae=n.get(Q);W.iconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.iconFeatureIndex=ae.featureIndex;break}for(let Q=P;Q<F;Q++){const ae=n.get(Q);W.verticalIconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.verticalIconFeatureIndex=ae.featureIndex;break}return W}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),p=[],v=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const P=this.symbolInstances.get(S);p.push(0|Math.round(s*P.anchorX+h*P.anchorY)),v.push(P.featureIndex)}return x.sort((S,P)=>p[S]-p[P]||v[P]-v[S]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,v,x)=>{p>=0&&x.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Cw,Iw;Bt("SymbolBucket",zc,{omit:["layers","collisionBoxArray","features","compareText"]}),zc.MAX_GLYPHS=65535,zc.addDynamicAttributes=jy;var Ny={get paint(){return Iw=Iw||new Ir({"icon-opacity":new an(se.paint_symbol["icon-opacity"]),"icon-color":new an(se.paint_symbol["icon-color"]),"icon-halo-color":new an(se.paint_symbol["icon-halo-color"]),"icon-halo-width":new an(se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new an(se.paint_symbol["icon-halo-blur"]),"icon-translate":new qt(se.paint_symbol["icon-translate"]),"icon-translate-anchor":new qt(se.paint_symbol["icon-translate-anchor"]),"text-opacity":new an(se.paint_symbol["text-opacity"]),"text-color":new an(se.paint_symbol["text-color"],{runtimeType:wr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new an(se.paint_symbol["text-halo-color"]),"text-halo-width":new an(se.paint_symbol["text-halo-width"]),"text-halo-blur":new an(se.paint_symbol["text-halo-blur"]),"text-translate":new qt(se.paint_symbol["text-translate"]),"text-translate-anchor":new qt(se.paint_symbol["text-translate-anchor"])})},get layout(){return Cw=Cw||new Ir({"symbol-placement":new qt(se.layout_symbol["symbol-placement"]),"symbol-spacing":new qt(se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qt(se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new an(se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qt(se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qt(se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new qt(se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new qt(se.layout_symbol["icon-ignore-placement"]),"icon-optional":new qt(se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qt(se.layout_symbol["icon-rotation-alignment"]),"icon-size":new an(se.layout_symbol["icon-size"]),"icon-text-fit":new qt(se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qt(se.layout_symbol["icon-text-fit-padding"]),"icon-image":new an(se.layout_symbol["icon-image"]),"icon-rotate":new an(se.layout_symbol["icon-rotate"]),"icon-padding":new an(se.layout_symbol["icon-padding"]),"icon-keep-upright":new qt(se.layout_symbol["icon-keep-upright"]),"icon-offset":new an(se.layout_symbol["icon-offset"]),"icon-anchor":new an(se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qt(se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qt(se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qt(se.layout_symbol["text-rotation-alignment"]),"text-field":new an(se.layout_symbol["text-field"]),"text-font":new an(se.layout_symbol["text-font"]),"text-size":new an(se.layout_symbol["text-size"]),"text-max-width":new an(se.layout_symbol["text-max-width"]),"text-line-height":new qt(se.layout_symbol["text-line-height"]),"text-letter-spacing":new an(se.layout_symbol["text-letter-spacing"]),"text-justify":new an(se.layout_symbol["text-justify"]),"text-radial-offset":new an(se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qt(se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new an(se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new an(se.layout_symbol["text-anchor"]),"text-max-angle":new qt(se.layout_symbol["text-max-angle"]),"text-writing-mode":new qt(se.layout_symbol["text-writing-mode"]),"text-rotate":new an(se.layout_symbol["text-rotate"]),"text-padding":new qt(se.layout_symbol["text-padding"]),"text-keep-upright":new qt(se.layout_symbol["text-keep-upright"]),"text-transform":new an(se.layout_symbol["text-transform"]),"text-offset":new an(se.layout_symbol["text-offset"]),"text-allow-overlap":new qt(se.layout_symbol["text-allow-overlap"]),"text-overlap":new qt(se.layout_symbol["text-overlap"]),"text-ignore-placement":new qt(se.layout_symbol["text-ignore-placement"]),"text-optional":new qt(se.layout_symbol["text-optional"])})}};class Aw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:vn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Bt("FormatSectionOverride",Aw,{omit:["defaultValue"]});class _p extends _o{constructor(n){super(n,Ny)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,p){const v=this.layout.get(n).evaluate(s,{},h,p),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||xl(x.value)||!v?v:function(S,P){return P.replace(/{([^{}]+)}/g,(F,W)=>S&&W in S?String(S[W]):"")}(s.properties,v)}createBucket(n){return new zc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Ny.paint.overridableProperties){if(!_p.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Aw(s),p=new Cu(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Po("source",p):new wl("composite",p,s.value.zoomStops),this.paint._values[n]=new Ti(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&_p.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),p=Ny.paint.properties[s];let v=!1;const x=S=>{for(const P of S)if(p.overrides&&p.overrides.hasOverride(P))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof ti)x(h.value.value.sections);else if(h.value.kind==="source"){const S=F=>{v||(F instanceof ys&&ir(F.value)===Le?x(F.value.sections):F instanceof wa?x(F.sections):F.eachChild(S))},P=h.value;P._styleExpression&&S(P._styleExpression.expression)}return v}}let Pw;var YP={get paint(){return Pw=Pw||new Ir({"background-color":new qt(se.paint_background["background-color"]),"background-pattern":new Yh(se.paint_background["background-pattern"]),"background-opacity":new qt(se.paint_background["background-opacity"])})}};class JP extends _o{constructor(n){super(n,YP)}}let kw;var QP={get paint(){return kw=kw||new Ir({"raster-opacity":new qt(se.paint_raster["raster-opacity"]),"raster-hue-rotate":new qt(se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qt(se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qt(se.paint_raster["raster-brightness-max"]),"raster-saturation":new qt(se.paint_raster["raster-saturation"]),"raster-contrast":new qt(se.paint_raster["raster-contrast"]),"raster-resampling":new qt(se.paint_raster["raster-resampling"]),"raster-fade-duration":new qt(se.paint_raster["raster-fade-duration"])})}};class ek extends _o{constructor(n){super(n,QP)}}class tk extends _o{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class nk{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Uy=63710088e-1;class Ll{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ll(E(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,p=n.lat*s,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*s);return Uy*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof Ll)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Ll(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Ll(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Mw=2*Math.PI*Uy;function Lw(o){return Mw*Math.cos(o*Math.PI/180)}function zw(o){return(180+o)/360}function Fw(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Ow(o,n){return o/Lw(n)}function Rw(o){return 360*o-180}function $y(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class xp{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Ll.convert(n);return new xp(zw(h.lng),Fw(h.lat),Ow(s,h.lat))}toLngLat(){return new Ll(Rw(this.x),$y(this.y))}toAltitude(){return this.z*Lw($y(this.y))}meterInMercatorCoordinateUnits(){return 1/Mw*(n=$y(this.y),1/Math.cos(n*Math.PI/180));var n}}function jw(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class Vy{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=xf(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const p=(x=this.y,S=this.z,P=jw(256*(v=this.x),256*(x=Math.pow(2,S)-x-1),S),F=jw(256*(v+1),256*(x+1),S),P[0]+","+P[1]+","+F[0]+","+F[1]);var v,x,S,P,F;const W=function(Q,ae,fe){let me,Ae="";for(let Re=Q;Re>0;Re--)me=1<<Re-1,Ae+=(ae&me?1:0)+(fe&me?2:0);return Ae}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,W).replace(/{bbox-epsg-3857}/g,p)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new k((n.x*s-this.x)*Or,(n.y*s-this.y)*Or)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Dw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=xf(n,s.z,s.z,s.x,s.y)}}class zo{constructor(n,s,h,p,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new Vy(h,+p,+v),this.key=xf(s,n,h,p,v)}clone(){return new zo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new zo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?xf(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):xf(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new zo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new zo(s,this.wrap,s,h,p),new zo(s,this.wrap,s,h+1,p),new zo(s,this.wrap,s,h,p+1),new zo(s,this.wrap,s,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new zo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new zo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Dw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new xp(n.x-this.wrap,n.y))}}function xf(o,n,s,h,p){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*p+h).toString(36)+s.toString(36)+n.toString(36)}Bt("CanonicalTileID",Vy),Bt("OverscaledTileID",zo,{omit:["posMatrix"]});class Bw{constructor(n,s,h,p=1,v=1,x=1,S=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void be(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const P=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=v,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let F=0;F<P;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(P,F)]=this.data[this._idx(P-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,P)]=this.data[this._idx(F,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let F=0;F<P;F++)for(let W=0;W<P;W++){const Q=this.get(F,W);Q>this.max&&(this.max=Q),Q<this.min&&(this.min=Q)}}get(n,s){const h=new Uint8Array(this.data.buffer),p=4*this._idx(n,s);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Lo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,v=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const P=-s*this.dim,F=-h*this.dim;for(let W=x;W<S;W++)for(let Q=p;Q<v;Q++)this.data[this._idx(Q,W)]=n.data[this._idx(Q+P,W+F)]}}Bt("DEMData",Bw);class Nw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Uw{constructor(n,s,h,p,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=p,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class $w{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Mo(Or,16,0),this.grid3D=new Mo(Or,16,0),this.featureIndexArray=new xt,this.promoteId=s}insert(n,s,h,p,v,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v);const P=x?this.grid3D:this.grid;for(let F=0;F<s.length;F++){const W=s[F],Q=[1/0,1/0,-1/0,-1/0];for(let ae=0;ae<W.length;ae++){const fe=W[ae];Q[0]=Math.min(Q[0],fe.x),Q[1]=Math.min(Q[1],fe.y),Q[2]=Math.max(Q[2],fe.x),Q[3]=Math.max(Q[3],fe.y)}Q[0]<Or&&Q[1]<Or&&Q[2]>=0&&Q[3]>=0&&P.insert(S,Q[0],Q[1],Q[2],Q[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Pl.VectorTile(new My(this.rawTileData)).layers,this.sourceLayerCoder=new Nw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,p){this.loadVTLayers();const v=n.params||{},x=Or/n.tileSize/n.scale,S=Gr(v.filter),P=n.queryGeometry,F=n.queryPadding*x,W=Gw(P),Q=this.grid.query(W.minX-F,W.minY-F,W.maxX+F,W.maxY+F),ae=Gw(n.cameraQueryGeometry),fe=this.grid3D.query(ae.minX-F,ae.minY-F,ae.maxX+F,ae.maxY+F,(Re,Ne,Je,We)=>function(Qe,rt,gt,Ot,Vt){for(const Mt of Qe)if(rt<=Mt.x&&gt<=Mt.y&&Ot>=Mt.x&&Vt>=Mt.y)return!0;const zt=[new k(rt,gt),new k(rt,Vt),new k(Ot,Vt),new k(Ot,gt)];if(Qe.length>2){for(const Mt of zt)if(Cc(Qe,Mt))return!0}for(let Mt=0;Mt<Qe.length-1;Mt++)if(FA(Qe[Mt],Qe[Mt+1],zt))return!0;return!1}(n.cameraQueryGeometry,Re-F,Ne-F,Je+F,We+F));for(const Re of fe)Q.push(Re);Q.sort(rk);const me={};let Ae;for(let Re=0;Re<Q.length;Re++){const Ne=Q[Re];if(Ne===Ae)continue;Ae=Ne;const Je=this.featureIndexArray.get(Ne);let We=null;this.loadMatchingFeature(me,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,S,v.layers,v.availableImages,s,h,p,(Qe,rt,gt)=>(We||(We=Ru(Qe)),rt.queryIntersectsFeature(P,Qe,gt,We,this.z,n.transform,x,n.pixelPosMatrix)))}return me}loadMatchingFeature(n,s,h,p,v,x,S,P,F,W,Q){const ae=this.bucketLayerIDs[s];if(x&&!function(Re,Ne){for(let Je=0;Je<Re.length;Je++)if(Ne.indexOf(Re[Je])>=0)return!0;return!1}(x,ae))return;const fe=this.sourceLayerCoder.decode(h),me=this.vtLayers[fe].feature(p);if(v.needGeometry){const Re=ju(me,!0);if(!v.filter(new lr(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!v.filter(new lr(this.tileID.overscaledZ),me))return;const Ae=this.getId(me,fe);for(let Re=0;Re<ae.length;Re++){const Ne=ae[Re];if(x&&x.indexOf(Ne)<0)continue;const Je=P[Ne];if(!Je)continue;let We={};Ae&&W&&(We=W.getState(Je.sourceLayer||"_geojsonTileLayer",Ae));const Qe=M({},F[Ne]);Qe.paint=Vw(Qe.paint,Je.paint,me,We,S),Qe.layout=Vw(Qe.layout,Je.layout,me,We,S);const rt=!Q||Q(me,Je,We);if(!rt)continue;const gt=new Uw(me,this.z,this.x,this.y,Ae);gt.layer=Qe;let Ot=n[Ne];Ot===void 0&&(Ot=n[Ne]=[]),Ot.push({featureIndex:p,feature:gt,intersectionZ:rt})}}lookupSymbolFeatures(n,s,h,p,v,x,S,P){const F={};this.loadVTLayers();const W=Gr(v);for(const Q of n)this.loadMatchingFeature(F,h,p,Q,W,x,S,P,s);return F}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function Vw(o,n,s,h,p){return q(o,(v,x)=>{const S=n instanceof Ec?n.get(x):null;return S&&S.evaluate?S.evaluate(s,h,p):S})}function Gw(o){let n=1/0,s=1/0,h=-1/0,p=-1/0;for(const v of o)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{minX:n,minY:s,maxX:h,maxY:p}}function rk(o,n){return n-o}function Zw(o,n,s,h,p){const v=[];for(let x=0;x<o.length;x++){const S=o[x];let P;for(let F=0;F<S.length-1;F++){let W=S[F],Q=S[F+1];W.x<n&&Q.x<n||(W.x<n?W=new k(n,W.y+(n-W.x)/(Q.x-W.x)*(Q.y-W.y))._round():Q.x<n&&(Q=new k(n,W.y+(n-W.x)/(Q.x-W.x)*(Q.y-W.y))._round()),W.y<s&&Q.y<s||(W.y<s?W=new k(W.x+(s-W.y)/(Q.y-W.y)*(Q.x-W.x),s)._round():Q.y<s&&(Q=new k(W.x+(s-W.y)/(Q.y-W.y)*(Q.x-W.x),s)._round()),W.x>=h&&Q.x>=h||(W.x>=h?W=new k(h,W.y+(h-W.x)/(Q.x-W.x)*(Q.y-W.y))._round():Q.x>=h&&(Q=new k(h,W.y+(h-W.x)/(Q.x-W.x)*(Q.y-W.y))._round()),W.y>=p&&Q.y>=p||(W.y>=p?W=new k(W.x+(p-W.y)/(Q.y-W.y)*(Q.x-W.x),p)._round():Q.y>=p&&(Q=new k(W.x+(p-W.y)/(Q.y-W.y)*(Q.x-W.x),p)._round()),P&&W.equals(P[P.length-1])||(P=[W],v.push(P)),P.push(Q)))))}}return v}Bt("FeatureIndex",$w,{omit:["rawTileData","sourceLayerCoder"]});class zl extends k{constructor(n,s,h,p){super(n,s),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new zl(this.x,this.y,this.angle,this.segment)}}function Hw(o,n,s,h,p){if(n.segment===void 0||s===0)return!0;let v=n,x=n.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=o[x].dist(v),v=o[x]}S+=o[x].dist(o[x+1]),x++;const P=[];let F=0;for(;S<s/2;){const W=o[x],Q=o[x+1];if(!Q)return!1;let ae=o[x-1].angleTo(W)-W.angleTo(Q);for(ae=Math.abs((ae+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:S,angleDelta:ae}),F+=ae;S-P[0].distance>h;)F-=P.shift().angleDelta;if(F>p)return!1;x++,S+=W.dist(Q)}return!0}function Ww(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function Xw(o,n,s){return o?.6*n*s:0}function qw(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function ik(o,n,s,h,p,v){const x=Xw(s,p,v),S=qw(s,h)*v;let P=0;const F=Ww(o)/2;for(let W=0;W<o.length-1;W++){const Q=o[W],ae=o[W+1],fe=Q.dist(ae);if(P+fe>F){const me=(F-P)/fe,Ae=Ei.number(Q.x,ae.x,me),Re=Ei.number(Q.y,ae.y,me),Ne=new zl(Ae,Re,ae.angleTo(Q),W);return Ne._round(),!x||Hw(o,Ne,S,x,n)?Ne:void 0}P+=fe}}function ok(o,n,s,h,p,v,x,S,P){const F=Xw(h,v,x),W=qw(h,p),Q=W*x,ae=o[0].x===0||o[0].x===P||o[0].y===0||o[0].y===P;return n-Q<n/4&&(n=Q+n/4),Kw(o,ae?n/2*S%n:(W/2+2*v)*x*S%n,n,F,s,Q,ae,!1,P)}function Kw(o,n,s,h,p,v,x,S,P){const F=v/2,W=Ww(o);let Q=0,ae=n-s,fe=[];for(let me=0;me<o.length-1;me++){const Ae=o[me],Re=o[me+1],Ne=Ae.dist(Re),Je=Re.angleTo(Ae);for(;ae+s<Q+Ne;){ae+=s;const We=(ae-Q)/Ne,Qe=Ei.number(Ae.x,Re.x,We),rt=Ei.number(Ae.y,Re.y,We);if(Qe>=0&&Qe<P&&rt>=0&&rt<P&&ae-F>=0&&ae+F<=W){const gt=new zl(Qe,rt,Je,me);gt._round(),h&&!Hw(o,gt,v,h,p)||fe.push(gt)}}Q+=Ne}return S||fe.length||x||(fe=Kw(o,Q/2,s,h,p,v,x,!0,P)),fe}Bt("Anchor",zl);const Fc=ro;function Yw(o,n,s,h){const p=[],v=o.image,x=v.pixelRatio,S=v.paddedRect.w-2*Fc,P=v.paddedRect.h-2*Fc,F=o.right-o.left,W=o.bottom-o.top,Q=v.stretchX||[[0,S]],ae=v.stretchY||[[0,P]],fe=(Ct,Nt)=>Ct+Nt[1]-Nt[0],me=Q.reduce(fe,0),Ae=ae.reduce(fe,0),Re=S-me,Ne=P-Ae;let Je=0,We=me,Qe=0,rt=Ae,gt=0,Ot=Re,Vt=0,zt=Ne;if(v.content&&h){const Ct=v.content;Je=wp(Q,0,Ct[0]),Qe=wp(ae,0,Ct[1]),We=wp(Q,Ct[0],Ct[2]),rt=wp(ae,Ct[1],Ct[3]),gt=Ct[0]-Je,Vt=Ct[1]-Qe,Ot=Ct[2]-Ct[0]-We,zt=Ct[3]-Ct[1]-rt}const Mt=(Ct,Nt,Pt,bt)=>{const tn=bp(Ct.stretch-Je,We,F,o.left),Wt=Sp(Ct.fixed-gt,Ot,Ct.stretch,me),Cn=bp(Nt.stretch-Qe,rt,W,o.top),cr=Sp(Nt.fixed-Vt,zt,Nt.stretch,Ae),fr=bp(Pt.stretch-Je,We,F,o.left),Xr=Sp(Pt.fixed-gt,Ot,Pt.stretch,me),wo=bp(bt.stretch-Qe,rt,W,o.top),$i=Sp(bt.fixed-Vt,zt,bt.stretch,Ae),Rr=new k(tn,Cn),li=new k(fr,Cn),vi=new k(fr,wo),Vi=new k(tn,wo),Gi=new k(Wt/x,cr/x),qr=new k(Xr/x,$i/x),Kr=n*Math.PI/180;if(Kr){const Ai=Math.sin(Kr),io=Math.cos(Kr),oo=[io,-Ai,Ai,io];Rr._matMult(oo),li._matMult(oo),Vi._matMult(oo),vi._matMult(oo)}const Ii=Ct.stretch+Ct.fixed,Zi=Nt.stretch+Nt.fixed;return{tl:Rr,tr:li,bl:Vi,br:vi,tex:{x:v.paddedRect.x+Fc+Ii,y:v.paddedRect.y+Fc+Zi,w:Pt.stretch+Pt.fixed-Ii,h:bt.stretch+bt.fixed-Zi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gi,pixelOffsetBR:qr,minFontScaleX:Ot/x/F,minFontScaleY:zt/x/W,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const Ct=Jw(Q,Re,me),Nt=Jw(ae,Ne,Ae);for(let Pt=0;Pt<Ct.length-1;Pt++){const bt=Ct[Pt],tn=Ct[Pt+1];for(let Wt=0;Wt<Nt.length-1;Wt++)p.push(Mt(bt,Nt[Wt],tn,Nt[Wt+1]))}}else p.push(Mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:P+1}));return p}function wp(o,n,s){let h=0;for(const p of o)h+=Math.max(n,Math.min(s,p[1]))-Math.max(n,Math.min(s,p[0]));return h}function Jw(o,n,s){const h=[{fixed:-Fc,stretch:0}];for(const[p,v]of o){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(v-p)})}return h.push({fixed:n+Fc,stretch:s}),h}function bp(o,n,s,h){return o/n*s+h}function Sp(o,n,s,h){return o-n*s/h}class Ep{constructor(n,s,h,p,v,x,S,P,F,W){if(this.boxStartIndex=n.length,F){let Q=x.top,ae=x.bottom;const fe=x.collisionPadding;fe&&(Q-=fe[1],ae+=fe[3]);let me=ae-Q;me>0&&(me=Math.max(10,me),this.circleDiameter=me)}else{let Q=x.top*S-P[0],ae=x.bottom*S+P[2],fe=x.left*S-P[3],me=x.right*S+P[1];const Ae=x.collisionPadding;if(Ae&&(fe-=Ae[0]*S,Q-=Ae[1]*S,me+=Ae[2]*S,ae+=Ae[3]*S),W){const Re=new k(fe,Q),Ne=new k(me,Q),Je=new k(fe,ae),We=new k(me,ae),Qe=W*Math.PI/180;Re._rotate(Qe),Ne._rotate(Qe),Je._rotate(Qe),We._rotate(Qe),fe=Math.min(Re.x,Ne.x,Je.x,We.x),me=Math.max(Re.x,Ne.x,Je.x,We.x),Q=Math.min(Re.y,Ne.y,Je.y,We.y),ae=Math.max(Re.y,Ne.y,Je.y,We.y)}n.emplaceBack(s.x,s.y,fe,Q,me,ae,h,p,v)}this.boxEndIndex=n.length}}class sk{constructor(n=[],s=ak){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,p=s[n];for(;n>0;){const v=n-1>>1,x=s[v];if(h(p,x)>=0)break;s[n]=x,n=v}s[n]=p}_down(n){const{data:s,compare:h}=this,p=this.length>>1,v=s[n];for(;n<p;){let x=1+(n<<1),S=s[x];const P=x+1;if(P<this.length&&h(s[P],S)<0&&(x=P,S=s[P]),h(S,v)>=0)break;s[n]=S,n=x}s[n]=v}}function ak(o,n){return o<n?-1:o>n?1:0}function lk(o,n=1,s=!1){let h=1/0,p=1/0,v=-1/0,x=-1/0;const S=o[0];for(let fe=0;fe<S.length;fe++){const me=S[fe];(!fe||me.x<h)&&(h=me.x),(!fe||me.y<p)&&(p=me.y),(!fe||me.x>v)&&(v=me.x),(!fe||me.y>x)&&(x=me.y)}const P=Math.min(v-h,x-p);let F=P/2;const W=new sk([],uk);if(P===0)return new k(h,p);for(let fe=h;fe<v;fe+=P)for(let me=p;me<x;me+=P)W.push(new Oc(fe+F,me+F,F,o));let Q=function(fe){let me=0,Ae=0,Re=0;const Ne=fe[0];for(let Je=0,We=Ne.length,Qe=We-1;Je<We;Qe=Je++){const rt=Ne[Je],gt=Ne[Qe],Ot=rt.x*gt.y-gt.x*rt.y;Ae+=(rt.x+gt.x)*Ot,Re+=(rt.y+gt.y)*Ot,me+=3*Ot}return new Oc(Ae/me,Re/me,0,fe)}(o),ae=W.length;for(;W.length;){const fe=W.pop();(fe.d>Q.d||!Q.d)&&(Q=fe,s&&console.log("found best %d after %d probes",Math.round(1e4*fe.d)/1e4,ae)),fe.max-Q.d<=n||(F=fe.h/2,W.push(new Oc(fe.p.x-F,fe.p.y-F,F,o)),W.push(new Oc(fe.p.x+F,fe.p.y-F,F,o)),W.push(new Oc(fe.p.x-F,fe.p.y+F,F,o)),W.push(new Oc(fe.p.x+F,fe.p.y+F,F,o)),ae+=4)}return s&&(console.log(`num probes: ${ae}`),console.log(`best distance: ${Q.d}`)),Q.p}function uk(o,n){return n.max-o.max}function Oc(o,n,s,h){this.p=new k(o,n),this.h=s,this.d=function(p,v){let x=!1,S=1/0;for(let P=0;P<v.length;P++){const F=v[P];for(let W=0,Q=F.length,ae=Q-1;W<Q;ae=W++){const fe=F[W],me=F[ae];fe.y>p.y!=me.y>p.y&&p.x<(me.x-fe.x)*(p.y-fe.y)/(me.y-fe.y)+fe.x&&(x=!x),S=Math.min(S,Fx(p,fe,me))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var yi;l.aq=void 0,(yi=l.aq||(l.aq={}))[yi.center=1]="center",yi[yi.left=2]="left",yi[yi.right=3]="right",yi[yi.top=4]="top",yi[yi.bottom=5]="bottom",yi[yi["top-left"]=6]="top-left",yi[yi["top-right"]=7]="top-right",yi[yi["bottom-left"]=8]="bottom-left",yi[yi["bottom-right"]=9]="bottom-right";const Fl=7,Gy=Number.POSITIVE_INFINITY;function Qw(o,n){return n[1]!==Gy?function(s,h,p){let v=0,x=0;switch(h=Math.abs(h),p=Math.abs(p),s){case"top-right":case"top-left":case"top":x=p-Fl;break;case"bottom-right":case"bottom-left":case"bottom":x=-p+Fl}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(o,n[0],n[1]):function(s,h){let p=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-Fl;break;case"bottom-right":case"bottom-left":v=-x+Fl;break;case"bottom":v=-h+Fl;break;case"top":v=h-Fl}switch(s){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=h;break;case"right":p=-h}return[p,v]}(o,n[0])}function eb(o,n,s){var h;const p=o.layout,v=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(v){const S=v.values,P=[];for(let F=0;F<S.length;F+=2){const W=P[F]=S[F],Q=S[F+1].map(ae=>ae*Wr);W.startsWith("top")?Q[1]-=Fl:W.startsWith("bottom")&&(Q[1]+=Fl),P[F+1]=Q}return new Oi(P)}const x=p.get("text-variable-anchor");if(x){let S;S=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(n,{},s)*Wr,Gy]:p.get("text-offset").evaluate(n,{},s).map(F=>F*Wr);const P=[];for(const F of x)P.push(F,Qw(F,S));return new Oi(P)}return null}function Zy(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ck(o,n,s,h,p,v,x,S,P,F,W){let Q=v.textMaxSize.evaluate(n,{});Q===void 0&&(Q=x);const ae=o.layers[0].layout,fe=ae.get("icon-offset").evaluate(n,{},W),me=nb(s.horizontal),Ae=x/24,Re=o.tilePixelRatio*Ae,Ne=o.tilePixelRatio*Q/24,Je=o.tilePixelRatio*S,We=o.tilePixelRatio*ae.get("symbol-spacing"),Qe=ae.get("text-padding")*o.tilePixelRatio,rt=function(bt,tn,Wt,Cn=1){const cr=bt.get("icon-padding").evaluate(tn,{},Wt),fr=cr&&cr.values;return[fr[0]*Cn,fr[1]*Cn,fr[2]*Cn,fr[3]*Cn]}(ae,n,W,o.tilePixelRatio),gt=ae.get("text-max-angle")/180*Math.PI,Ot=ae.get("text-rotation-alignment")!=="viewport"&&ae.get("symbol-placement")!=="point",Vt=ae.get("icon-rotation-alignment")==="map"&&ae.get("symbol-placement")!=="point",zt=ae.get("symbol-placement"),Mt=We/2,Ct=ae.get("icon-text-fit");let Nt;h&&Ct!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Nt=Ew(h,s.vertical,Ct,ae.get("icon-text-fit-padding"),fe,Ae)),me&&(h=Ew(h,me,Ct,ae.get("icon-text-fit-padding"),fe,Ae)));const Pt=(bt,tn)=>{tn.x<0||tn.x>=Or||tn.y<0||tn.y>=Or||function(Wt,Cn,cr,fr,Xr,wo,$i,Rr,li,vi,Vi,Gi,qr,Kr,Ii,Zi,Ai,io,oo,Yr,Ln,Pi,_i,Jr,os){const Is=Wt.addToLineVertexArray(Cn,cr);let As,ja,ss,Fo,so=0,Da=0,Sf=0,sb=0,Qy=-1,e0=-1;const Ba={};let ab=za("");if(Wt.allowVerticalPlacement&&fr.vertical){const ki=Rr.layout.get("text-rotate").evaluate(Ln,{},Jr)+90;ss=new Ep(li,Cn,vi,Vi,Gi,fr.vertical,qr,Kr,Ii,ki),$i&&(Fo=new Ep(li,Cn,vi,Vi,Gi,$i,Ai,io,Ii,ki))}if(Xr){const ki=Rr.layout.get("icon-rotate").evaluate(Ln,{}),Oo=Rr.layout.get("icon-text-fit")!=="none",Bu=Yw(Xr,ki,_i,Oo),ks=$i?Yw($i,ki,_i,Oo):void 0;ja=new Ep(li,Cn,vi,Vi,Gi,Xr,Ai,io,!1,ki),so=4*Bu.length;const Nu=Wt.iconSizeData;let ra=null;Nu.kind==="source"?(ra=[na*Rr.layout.get("icon-size").evaluate(Ln,{})],ra[0]>Ml&&be(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${_f}. Reduce your "icon-size".`)):Nu.kind==="composite"&&(ra=[na*Pi.compositeIconSizes[0].evaluate(Ln,{},Jr),na*Pi.compositeIconSizes[1].evaluate(Ln,{},Jr)],(ra[0]>Ml||ra[1]>Ml)&&be(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${_f}. Reduce your "icon-size".`)),Wt.addSymbols(Wt.icon,Bu,ra,Yr,oo,Ln,l.ai.none,Cn,Is.lineStartIndex,Is.lineLength,-1,Jr),Qy=Wt.icon.placedSymbolArray.length-1,ks&&(Da=4*ks.length,Wt.addSymbols(Wt.icon,ks,ra,Yr,oo,Ln,l.ai.vertical,Cn,Is.lineStartIndex,Is.lineLength,-1,Jr),e0=Wt.icon.placedSymbolArray.length-1)}const lb=Object.keys(fr.horizontal);for(const ki of lb){const Oo=fr.horizontal[ki];if(!As){ab=za(Oo.text);const ks=Rr.layout.get("text-rotate").evaluate(Ln,{},Jr);As=new Ep(li,Cn,vi,Vi,Gi,Oo,qr,Kr,Ii,ks)}const Bu=Oo.positionedLines.length===1;if(Sf+=tb(Wt,Cn,Oo,wo,Rr,Ii,Ln,Zi,Is,fr.vertical?l.ai.horizontal:l.ai.horizontalOnly,Bu?lb:[ki],Ba,Qy,Pi,Jr),Bu)break}fr.vertical&&(sb+=tb(Wt,Cn,fr.vertical,wo,Rr,Ii,Ln,Zi,Is,l.ai.vertical,["vertical"],Ba,e0,Pi,Jr));const dk=As?As.boxStartIndex:Wt.collisionBoxArray.length,pk=As?As.boxEndIndex:Wt.collisionBoxArray.length,mk=ss?ss.boxStartIndex:Wt.collisionBoxArray.length,gk=ss?ss.boxEndIndex:Wt.collisionBoxArray.length,yk=ja?ja.boxStartIndex:Wt.collisionBoxArray.length,vk=ja?ja.boxEndIndex:Wt.collisionBoxArray.length,_k=Fo?Fo.boxStartIndex:Wt.collisionBoxArray.length,xk=Fo?Fo.boxEndIndex:Wt.collisionBoxArray.length;let Ps=-1;const Cp=(ki,Oo)=>ki&&ki.circleDiameter?Math.max(ki.circleDiameter,Oo):Oo;Ps=Cp(As,Ps),Ps=Cp(ss,Ps),Ps=Cp(ja,Ps),Ps=Cp(Fo,Ps);const ub=Ps>-1?1:0;ub&&(Ps*=os/Wr),Wt.glyphOffsetArray.length>=zc.MAX_GLYPHS&&be("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ln.sortKey!==void 0&&Wt.addToSortKeyRanges(Wt.symbolInstances.length,Ln.sortKey);const wk=eb(Rr,Ln,Jr),[bk,Sk]=function(ki,Oo){const Bu=ki.length,ks=Oo==null?void 0:Oo.values;if((ks==null?void 0:ks.length)>0)for(let Nu=0;Nu<ks.length;Nu+=2){const ra=ks[Nu+1];ki.emplaceBack(l.aq[ks[Nu]],ra[0],ra[1])}return[Bu,ki.length]}(Wt.textAnchorOffsets,wk);Wt.symbolInstances.emplaceBack(Cn.x,Cn.y,Ba.right>=0?Ba.right:-1,Ba.center>=0?Ba.center:-1,Ba.left>=0?Ba.left:-1,Ba.vertical||-1,Qy,e0,ab,dk,pk,mk,gk,yk,vk,_k,xk,vi,Sf,sb,so,Da,ub,0,qr,Ps,bk,Sk)}(o,tn,bt,s,h,p,Nt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Re,[Qe,Qe,Qe,Qe],Ot,P,Je,rt,Vt,fe,n,v,F,W,x)};if(zt==="line")for(const bt of Zw(n.geometry,0,0,Or,Or)){const tn=ok(bt,We,gt,s.vertical||me,h,24,Ne,o.overscaling,Or);for(const Wt of tn)me&&hk(o,me.text,Mt,Wt)||Pt(bt,Wt)}else if(zt==="line-center"){for(const bt of n.geometry)if(bt.length>1){const tn=ik(bt,gt,s.vertical||me,h,24,Ne);tn&&Pt(bt,tn)}}else if(n.type==="Polygon")for(const bt of Sy(n.geometry,0)){const tn=lk(bt,16);Pt(bt[0],new zl(tn.x,tn.y,0))}else if(n.type==="LineString")for(const bt of n.geometry)Pt(bt,new zl(bt[0].x,bt[0].y,0));else if(n.type==="Point")for(const bt of n.geometry)for(const tn of bt)Pt([tn],new zl(tn.x,tn.y,0))}function tb(o,n,s,h,p,v,x,S,P,F,W,Q,ae,fe,me){const Ae=function(Je,We,Qe,rt,gt,Ot,Vt,zt){const Mt=rt.layout.get("text-rotate").evaluate(Ot,{})*Math.PI/180,Ct=[];for(const Nt of We.positionedLines)for(const Pt of Nt.positionedGlyphs){if(!Pt.rect)continue;const bt=Pt.rect||{};let tn=yw+1,Wt=!0,Cn=1,cr=0;const fr=(gt||zt)&&Pt.vertical,Xr=Pt.metrics.advance*Pt.scale/2;if(zt&&We.verticalizable&&(cr=Nt.lineOffset/2-(Pt.imageName?-(Wr-Pt.metrics.width*Pt.scale)/2:(Pt.scale-1)*Wr)),Pt.imageName){const Yr=Vt[Pt.imageName];Wt=Yr.sdf,Cn=Yr.pixelRatio,tn=ro/Cn}const wo=gt?[Pt.x+Xr,Pt.y]:[0,0];let $i=gt?[0,0]:[Pt.x+Xr+Qe[0],Pt.y+Qe[1]-cr],Rr=[0,0];fr&&(Rr=$i,$i=[0,0]);const li=Pt.metrics.isDoubleResolution?2:1,vi=(Pt.metrics.left-tn)*Pt.scale-Xr+$i[0],Vi=(-Pt.metrics.top-tn)*Pt.scale+$i[1],Gi=vi+bt.w/li*Pt.scale/Cn,qr=Vi+bt.h/li*Pt.scale/Cn,Kr=new k(vi,Vi),Ii=new k(Gi,Vi),Zi=new k(vi,qr),Ai=new k(Gi,qr);if(fr){const Yr=new k(-Xr,Xr-yf),Ln=-Math.PI/2,Pi=Wr/2-Xr,_i=new k(5-yf-Pi,-(Pt.imageName?Pi:0)),Jr=new k(...Rr);Kr._rotateAround(Ln,Yr)._add(_i)._add(Jr),Ii._rotateAround(Ln,Yr)._add(_i)._add(Jr),Zi._rotateAround(Ln,Yr)._add(_i)._add(Jr),Ai._rotateAround(Ln,Yr)._add(_i)._add(Jr)}if(Mt){const Yr=Math.sin(Mt),Ln=Math.cos(Mt),Pi=[Ln,-Yr,Yr,Ln];Kr._matMult(Pi),Ii._matMult(Pi),Zi._matMult(Pi),Ai._matMult(Pi)}const io=new k(0,0),oo=new k(0,0);Ct.push({tl:Kr,tr:Ii,bl:Zi,br:Ai,tex:bt,writingMode:We.writingMode,glyphOffset:wo,sectionIndex:Pt.sectionIndex,isSDF:Wt,pixelOffsetTL:io,pixelOffsetBR:oo,minFontScaleX:0,minFontScaleY:0})}return Ct}(0,s,S,p,v,x,h,o.allowVerticalPlacement),Re=o.textSizeData;let Ne=null;Re.kind==="source"?(Ne=[na*p.layout.get("text-size").evaluate(x,{})],Ne[0]>Ml&&be(`${o.layerIds[0]}: Value for "text-size" is >= ${_f}. Reduce your "text-size".`)):Re.kind==="composite"&&(Ne=[na*fe.compositeTextSizes[0].evaluate(x,{},me),na*fe.compositeTextSizes[1].evaluate(x,{},me)],(Ne[0]>Ml||Ne[1]>Ml)&&be(`${o.layerIds[0]}: Value for "text-size" is >= ${_f}. Reduce your "text-size".`)),o.addSymbols(o.text,Ae,Ne,S,v,x,F,n,P.lineStartIndex,P.lineLength,ae,me);for(const Je of W)Q[Je]=o.text.placedSymbolArray.length-1;return 4*Ae.length}function nb(o){for(const n in o)return o[n];return null}function hk(o,n,s,h){const p=o.compareText;if(n in p){const v=p[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<s)return!0}else p[n]=[];return p[n].push(h),!1}const rb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Hy{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=rb[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new Hy(S,x,v,n)}constructor(n,s=64,h=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=rb.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+P,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+P),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+P,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Wy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:S}=this,P=[0,v.length-1,0],F=[];for(;P.length;){const W=P.pop()||0,Q=P.pop()||0,ae=P.pop()||0;if(Q-ae<=S){for(let Re=ae;Re<=Q;Re++){const Ne=x[2*Re],Je=x[2*Re+1];Ne>=n&&Ne<=h&&Je>=s&&Je<=p&&F.push(v[Re])}continue}const fe=ae+Q>>1,me=x[2*fe],Ae=x[2*fe+1];me>=n&&me<=h&&Ae>=s&&Ae<=p&&F.push(v[fe]),(W===0?n<=me:s<=Ae)&&(P.push(ae),P.push(fe-1),P.push(1-W)),(W===0?h>=me:p>=Ae)&&(P.push(fe+1),P.push(Q),P.push(1-W))}return F}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:x}=this,S=[0,p.length-1,0],P=[],F=h*h;for(;S.length;){const W=S.pop()||0,Q=S.pop()||0,ae=S.pop()||0;if(Q-ae<=x){for(let Re=ae;Re<=Q;Re++)ob(v[2*Re],v[2*Re+1],n,s)<=F&&P.push(p[Re]);continue}const fe=ae+Q>>1,me=v[2*fe],Ae=v[2*fe+1];ob(me,Ae,n,s)<=F&&P.push(p[fe]),(W===0?n-h<=me:s-h<=Ae)&&(S.push(ae),S.push(fe-1),S.push(1-W)),(W===0?n+h>=me:s+h>=Ae)&&(S.push(fe+1),S.push(Q),S.push(1-W))}return P}}function Wy(o,n,s,h,p,v){if(p-h<=s)return;const x=h+p>>1;ib(o,n,x,h,p,v),Wy(o,n,s,h,x-1,1-v),Wy(o,n,s,x+1,p,1-v)}function ib(o,n,s,h,p,v){for(;p>h;){if(p-h>600){const F=p-h+1,W=s-h+1,Q=Math.log(F),ae=.5*Math.exp(2*Q/3),fe=.5*Math.sqrt(Q*ae*(F-ae)/F)*(W-F/2<0?-1:1);ib(o,n,s,Math.max(h,Math.floor(s-W*ae/F+fe)),Math.min(p,Math.floor(s+(F-W)*ae/F+fe)),v)}const x=n[2*s+v];let S=h,P=p;for(wf(o,n,h,s),n[2*p+v]>x&&wf(o,n,h,p);S<P;){for(wf(o,n,S,P),S++,P--;n[2*S+v]<x;)S++;for(;n[2*P+v]>x;)P--}n[2*h+v]===x?wf(o,n,h,P):(P++,wf(o,n,P,p)),P<=s&&(h=P+1),s<=P&&(p=P-1)}}function wf(o,n,s,h){Xy(o,s,h),Xy(n,2*s,2*h),Xy(n,2*s+1,2*h+1)}function Xy(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function ob(o,n,s,h){const p=o-s,v=n-h;return p*p+v*v}var qy;l.bh=void 0,(qy=l.bh||(l.bh={})).create="create",qy.load="load",qy.fullLoad="fullLoad";let Tp=null,bf=[];const Ky=1e3/60,Yy="loadTime",Jy="fullLoadTime",fk={mark(o){performance.mark(o)},frame(o){const n=o;Tp!=null&&bf.push(n-Tp),Tp=n},clearMetrics(){Tp=null,bf=[],performance.clearMeasures(Yy),performance.clearMeasures(Jy);for(const o in l.bh)performance.clearMarks(l.bh[o])},getPerformanceMetrics(){performance.measure(Yy,l.bh.create,l.bh.load),performance.measure(Jy,l.bh.create,l.bh.fullLoad);const o=performance.getEntriesByName(Yy)[0].duration,n=performance.getEntriesByName(Jy)[0].duration,s=bf.length,h=1/(bf.reduce((v,x)=>v+x,0)/s/1e3),p=bf.filter(v=>v>Ky).reduce((v,x)=>v+(x-Ky)/Ky,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};l.$=function(o,n,s){var h,p,v,x,S,P,F,W,Q,ae,fe,me,Ae=s[0],Re=s[1],Ne=s[2];return n===o?(o[12]=n[0]*Ae+n[4]*Re+n[8]*Ne+n[12],o[13]=n[1]*Ae+n[5]*Re+n[9]*Ne+n[13],o[14]=n[2]*Ae+n[6]*Re+n[10]*Ne+n[14],o[15]=n[3]*Ae+n[7]*Re+n[11]*Ne+n[15]):(p=n[1],v=n[2],x=n[3],S=n[4],P=n[5],F=n[6],W=n[7],Q=n[8],ae=n[9],fe=n[10],me=n[11],o[0]=h=n[0],o[1]=p,o[2]=v,o[3]=x,o[4]=S,o[5]=P,o[6]=F,o[7]=W,o[8]=Q,o[9]=ae,o[10]=fe,o[11]=me,o[12]=h*Ae+S*Re+Q*Ne+n[12],o[13]=p*Ae+P*Re+ae*Ne+n[13],o[14]=v*Ae+F*Re+fe*Ne+n[14],o[15]=x*Ae+W*Re+me*Ne+n[15]),o},l.A=Ic,l.B=Ei,l.C=class{constructor(o,n,s){this.receive=h=>{const p=h.data,v=p.id;if(v&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else re()||p.mustQueue?(this.tasks[v]=p,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,p)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),p=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(h,p)},this.target=o,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new nk(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=re()?o:window}send(o,n,s,h,p=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[v]=s);const x=[],S={id:v,type:o,hasCallback:!!s,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:Qs(n,x)};return this.target.postMessage(S,{transfer:x}),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(o,n){if(n.type==="<response>"){const s=this.callbacks[o];delete this.callbacks[o],s&&(n.error?s(Tl(n.error)):s(null,Tl(n.data)))}else{let s=!1;const h=[],p=n.hasCallback?(S,P)=>{s=!0,delete this.cancelCallbacks[o];const F={id:o,type:"<response>",sourceMapId:this.mapId,error:S?Qs(S):null,data:Qs(P,h)};this.target.postMessage(F,{transfer:h})}:S=>{s=!0};let v=null;const x=Tl(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,p);else if("getWorkerSource"in this.parent){const S=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,S[0],x.source)[S[1]](x,p)}else p(new Error(`Could not find function ${n.type}`));!s&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.D=qt,l.E=gn,l.F=function(o,n){const s={};for(let h=0;h<n.length;h++){const p=n[h];p in o&&(s[p]=o[p])}return s},l.G=zw,l.H=Fw,l.I=zy,l.J=$,l.K=D,l.L=Ll,l.M=Se,l.N=Or,l.O=zo,l.P=k,l.Q=pr,l.R=Lo,l.S=ur,l.T=ep,l.U=xp,l.V=class extends Ma{},l.W=Vy,l.X=function(o,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<o.length;h++){const p=window.document.createElement("source");Ut(o[h])||(s.crossOrigin="Anonymous"),p.src=o[h],s.appendChild(p)}return{cancel:()=>{}}},l.Y=je,l.Z=function(){var o=new Ic(16);return Ic!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l._=b,l.a=ye,l.a$=class extends he{},l.a0=function(o,n,s){var h=s[0],p=s[1],v=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*p,o[5]=n[5]*p,o[6]=n[6]*p,o[7]=n[7]*p,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.a1=Dx,l.a2=function(){return H++},l.a3=Fe,l.a4=zc,l.a5=function(){to.isLoading()||to.isLoaded()||qh()!=="deferred"||Qd()},l.a6=Gr,l.a7=ju,l.a8=lr,l.a9=Uw,l.aA=Mu,l.aB=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=O(o[s],n[o[s].ref]));return o},l.aC=function(o){if(o.type==="custom")return new tk(o);switch(o.type){case"background":return new JP(o);case"circle":return new jA(o);case"fill":return new rP(o);case"fill-extrusion":return new vP(o);case"heatmap":return new BA(o);case"hillshade":return new UA(o);case"line":return new CP(o);case"raster":return new ek(o);case"symbol":return new _p(o)}},l.aD=ve,l.aE=function(o,n){if(!o)return[{command:Be.setStyle,args:[n]}];let s=[];try{if(!pe(o.version,n.version))return[{command:Be.setStyle,args:[n]}];pe(o.center,n.center)||s.push({command:Be.setCenter,args:[n.center]}),pe(o.zoom,n.zoom)||s.push({command:Be.setZoom,args:[n.zoom]}),pe(o.bearing,n.bearing)||s.push({command:Be.setBearing,args:[n.bearing]}),pe(o.pitch,n.pitch)||s.push({command:Be.setPitch,args:[n.pitch]}),pe(o.sprite,n.sprite)||s.push({command:Be.setSprite,args:[n.sprite]}),pe(o.glyphs,n.glyphs)||s.push({command:Be.setGlyphs,args:[n.glyphs]}),pe(o.transition,n.transition)||s.push({command:Be.setTransition,args:[n.transition]}),pe(o.light,n.light)||s.push({command:Be.setLight,args:[n.light]});const h={},p=[];(function(x,S,P,F){let W;for(W in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,W)&&(Object.prototype.hasOwnProperty.call(S,W)||lt(W,P,F));for(W in S)Object.prototype.hasOwnProperty.call(S,W)&&(Object.prototype.hasOwnProperty.call(x,W)?pe(x[W],S[W])||(x[W].type==="geojson"&&S[W].type==="geojson"&&z(x,S,W)?P.push({command:Be.setGeoJSONSourceData,args:[W,S[W].data]}):le(W,S,P,F)):et(W,S,P))})(o.sources,n.sources,p,h);const v=[];o.layers&&o.layers.forEach(x=>{h[x.source]?s.push({command:Be.removeLayer,args:[x.id]}):v.push(x)}),s=s.concat(p),function(x,S,P){S=S||[];const F=(x=x||[]).map(Ee),W=S.map(Ee),Q=x.reduce(Ge,{}),ae=S.reduce(Ge,{}),fe=F.slice(),me=Object.create(null);let Ae,Re,Ne,Je,We,Qe,rt;for(Ae=0,Re=0;Ae<F.length;Ae++)Ne=F[Ae],Object.prototype.hasOwnProperty.call(ae,Ne)?Re++:(P.push({command:Be.removeLayer,args:[Ne]}),fe.splice(fe.indexOf(Ne,Re),1));for(Ae=0,Re=0;Ae<W.length;Ae++)Ne=W[W.length-1-Ae],fe[fe.length-1-Ae]!==Ne&&(Object.prototype.hasOwnProperty.call(Q,Ne)?(P.push({command:Be.removeLayer,args:[Ne]}),fe.splice(fe.lastIndexOf(Ne,fe.length-Re),1)):Re++,Qe=fe[fe.length-Ae],P.push({command:Be.addLayer,args:[ae[Ne],Qe]}),fe.splice(fe.length-Ae,0,Ne),me[Ne]=!0);for(Ae=0;Ae<W.length;Ae++)if(Ne=W[Ae],Je=Q[Ne],We=ae[Ne],!me[Ne]&&!pe(Je,We))if(pe(Je.source,We.source)&&pe(Je["source-layer"],We["source-layer"])&&pe(Je.type,We.type)){for(rt in B(Je.layout,We.layout,P,Ne,null,Be.setLayoutProperty),B(Je.paint,We.paint,P,Ne,null,Be.setPaintProperty),pe(Je.filter,We.filter)||P.push({command:Be.setFilter,args:[Ne,We.filter]}),pe(Je.minzoom,We.minzoom)&&pe(Je.maxzoom,We.maxzoom)||P.push({command:Be.setLayerZoomRange,args:[Ne,We.minzoom,We.maxzoom]}),Je)Object.prototype.hasOwnProperty.call(Je,rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?B(Je[rt],We[rt],P,Ne,rt.slice(6),Be.setPaintProperty):pe(Je[rt],We[rt])||P.push({command:Be.setLayerProperty,args:[Ne,rt,We[rt]]}));for(rt in We)Object.prototype.hasOwnProperty.call(We,rt)&&!Object.prototype.hasOwnProperty.call(Je,rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?B(Je[rt],We[rt],P,Ne,rt.slice(6),Be.setPaintProperty):pe(Je[rt],We[rt])||P.push({command:Be.setLayerProperty,args:[Ne,rt,We[rt]]}))}else P.push({command:Be.removeLayer,args:[Ne]}),Qe=fe[fe.lastIndexOf(Ne)+1],P.push({command:Be.addLayer,args:[We,Qe]})}(v,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:Be.setStyle,args:[n]}]}return s},l.aF=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},l.aG=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},l.aH=q,l.aI=ee,l.aJ=Lu,l.aK=function(o){return o({pluginStatus:Bi,pluginURL:ea}),Lu.on("pluginStateChange",o),o},l.aL=class extends Fa{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.aM=Tc,l.aN=class extends Fa{constructor(o,n){super(o,n),this.current=hy}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.aO=ip,l.aP=class extends Fa{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.aQ=class extends Fa{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.aR=op,l.aS=function(o,n,s,h,p,v,x){var S=1/(n-s),P=1/(h-p),F=1/(v-x);return o[0]=-2*S,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*P,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*F,o[11]=0,o[12]=(n+s)*S,o[13]=(p+h)*P,o[14]=(x+v)*F,o[15]=1,o},l.aT=Gn,l.aU=RA,l.aV=class extends f{},l.aW=kP,l.aX=class extends _{},l.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.aZ=Vx,l.a_=Et,l.aa=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,p,v)=>{const x=p||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},l.ab=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},l.ac=function(o){if(ie==null){const n=o.navigator?o.navigator.userAgent:null;ie=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return ie},l.ad=U,l.ae=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[0],x=n[1],S=n[2],P=n[3],F=n[4],W=n[5],Q=n[6],ae=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*p+F*h,o[1]=x*p+W*h,o[2]=S*p+Q*h,o[3]=P*p+ae*h,o[4]=F*p-v*h,o[5]=W*p-x*h,o[6]=Q*p-S*h,o[7]=ae*p-P*h,o},l.af=function(o){var n=new Ic(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},l.ag=up,l.ah=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:x}=o,S=p?U(mi.interpolationFactor(p,n,v,x),0,1):0;o.kind==="camera"?h=Ei.number(o.minSize,o.maxSize,S):s=S}return{uSizeT:s,uSize:h}},l.aj=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/na:o.kind==="composite"?Ei.number(h/na,p/na,s):n},l.ak=jy,l.al=function(o,n,s,h){const p=n.y-o.y,v=n.x-o.x,x=h.y-s.y,S=h.x-s.x,P=x*v-S*p;if(P===0)return null;const F=(S*(o.y-s.y)-x*(o.x-s.x))/P;return new k(o.x+F*v,o.y+F*p)},l.am=Zw,l.an=Lx,l.ao=gy,l.ap=Wr,l.ar=Ry,l.as=function(o,n){var s=n[0],h=n[1],p=n[2],v=n[3],x=n[4],S=n[5],P=n[6],F=n[7],W=n[8],Q=n[9],ae=n[10],fe=n[11],me=n[12],Ae=n[13],Re=n[14],Ne=n[15],Je=s*S-h*x,We=s*P-p*x,Qe=s*F-v*x,rt=h*P-p*S,gt=h*F-v*S,Ot=p*F-v*P,Vt=W*Ae-Q*me,zt=W*Re-ae*me,Mt=W*Ne-fe*me,Ct=Q*Re-ae*Ae,Nt=Q*Ne-fe*Ae,Pt=ae*Ne-fe*Re,bt=Je*Pt-We*Nt+Qe*Ct+rt*Mt-gt*zt+Ot*Vt;return bt?(o[0]=(S*Pt-P*Nt+F*Ct)*(bt=1/bt),o[1]=(p*Nt-h*Pt-v*Ct)*bt,o[2]=(Ae*Ot-Re*gt+Ne*rt)*bt,o[3]=(ae*gt-Q*Ot-fe*rt)*bt,o[4]=(P*Mt-x*Pt-F*zt)*bt,o[5]=(s*Pt-p*Mt+v*zt)*bt,o[6]=(Re*Qe-me*Ot-Ne*We)*bt,o[7]=(W*Ot-ae*Qe+fe*We)*bt,o[8]=(x*Nt-S*Mt+F*Vt)*bt,o[9]=(h*Mt-s*Nt-v*Vt)*bt,o[10]=(me*gt-Ae*Qe+Ne*Je)*bt,o[11]=(Q*Qe-W*gt-fe*Je)*bt,o[12]=(S*zt-x*Ct-P*Vt)*bt,o[13]=(s*Ct-h*zt+p*Vt)*bt,o[14]=(Ae*We-me*rt-Re*Je)*bt,o[15]=(W*rt-Q*We+ae*Je)*bt,o):null},l.at=Zy,l.au=Oy,l.av=Hy,l.aw=function(){const o={},n=se.$version;for(const s in se.$root){const h=se.$root[s];if(h.required){let p=null;p=s==="version"?n:h.type==="array"?[]:{},p!=null&&(o[s]=p)}}return o},l.ax=Be,l.ay=qd,l.az=vt,l.b=function(o,n){const s=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(s).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.b0=si,l.b1=function(o,n){var s=o[0],h=o[1],p=o[2],v=o[3],x=o[4],S=o[5],P=o[6],F=o[7],W=o[8],Q=o[9],ae=o[10],fe=o[11],me=o[12],Ae=o[13],Re=o[14],Ne=o[15],Je=n[0],We=n[1],Qe=n[2],rt=n[3],gt=n[4],Ot=n[5],Vt=n[6],zt=n[7],Mt=n[8],Ct=n[9],Nt=n[10],Pt=n[11],bt=n[12],tn=n[13],Wt=n[14],Cn=n[15];return Math.abs(s-Je)<=Ui*Math.max(1,Math.abs(s),Math.abs(Je))&&Math.abs(h-We)<=Ui*Math.max(1,Math.abs(h),Math.abs(We))&&Math.abs(p-Qe)<=Ui*Math.max(1,Math.abs(p),Math.abs(Qe))&&Math.abs(v-rt)<=Ui*Math.max(1,Math.abs(v),Math.abs(rt))&&Math.abs(x-gt)<=Ui*Math.max(1,Math.abs(x),Math.abs(gt))&&Math.abs(S-Ot)<=Ui*Math.max(1,Math.abs(S),Math.abs(Ot))&&Math.abs(P-Vt)<=Ui*Math.max(1,Math.abs(P),Math.abs(Vt))&&Math.abs(F-zt)<=Ui*Math.max(1,Math.abs(F),Math.abs(zt))&&Math.abs(W-Mt)<=Ui*Math.max(1,Math.abs(W),Math.abs(Mt))&&Math.abs(Q-Ct)<=Ui*Math.max(1,Math.abs(Q),Math.abs(Ct))&&Math.abs(ae-Nt)<=Ui*Math.max(1,Math.abs(ae),Math.abs(Nt))&&Math.abs(fe-Pt)<=Ui*Math.max(1,Math.abs(fe),Math.abs(Pt))&&Math.abs(me-bt)<=Ui*Math.max(1,Math.abs(me),Math.abs(bt))&&Math.abs(Ae-tn)<=Ui*Math.max(1,Math.abs(Ae),Math.abs(tn))&&Math.abs(Re-Wt)<=Ui*Math.max(1,Math.abs(Re),Math.abs(Wt))&&Math.abs(Ne-Cn)<=Ui*Math.max(1,Math.abs(Ne),Math.abs(Cn))},l.b2=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.b3=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},l.b4=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},l.b5=E,l.b6=Dw,l.b7=Ow,l.b8=function(o,n,s,h,p){var v,x=1/Math.tan(n/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(v=1/(h-p)),o[14]=2*p*h*v):(o[10]=-1,o[14]=-2*h),o},l.b9=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[4],x=n[5],S=n[6],P=n[7],F=n[8],W=n[9],Q=n[10],ae=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*p+F*h,o[5]=x*p+W*h,o[6]=S*p+Q*h,o[7]=P*p+ae*h,o[8]=F*p-v*h,o[9]=W*p-x*h,o[10]=Q*p-S*h,o[11]=ae*p-P*h,o},l.bA=I,l.bB=cw,l.bC=bs,l.bD=to,l.ba=ne,l.bb=Z,l.bc=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},l.bd=class extends Ou{},l.be=Uy,l.bf=Rw,l.bg=fk,l.bi=ct,l.bj=function(o,n,s=!1){if(Bi===Gh||Bi===Zh||Bi===Hh)throw new Error("setRTLTextPlugin cannot be called multiple times.");ea=Ze.resolveURL(o),Bi=Gh,Wh=n,Xh(),s||Qd()},l.bk=qh,l.bl=function(o,n){const s={};for(let p=0;p<o.length;p++){const v=n&&n[o[p].id]||Ca(o[p]);n&&(n[o[p].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(o[p])}const h=[];for(const p in s)h.push(s[p]);return h},l.bm=Bt,l.bn=Nw,l.bo=$w,l.bp=_w,l.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Or/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new lr(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new lr(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new lr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:F,maxZoom:W}=o.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new lr(F),o.canonical),h["text-size"].possiblyEvaluate(new lr(W),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:F,maxZoom:W}=o.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new lr(F),o.canonical),h["icon-size"].possiblyEvaluate(new lr(W),o.canonical)]}const v=s.get("text-line-height")*Wr,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),P=s.get("text-size");for(const F of o.bucket.features){const W=s.get("text-font").evaluate(F,{},o.canonical).join(","),Q=P.evaluate(F,{},o.canonical),ae=p.layoutTextSize.evaluate(F,{},o.canonical),fe=p.layoutIconSize.evaluate(F,{},o.canonical),me={horizontal:{},vertical:void 0},Ae=F.text;let Re,Ne=[0,0];if(Ae){const Qe=Ae.toString(),rt=s.get("text-letter-spacing").evaluate(F,{},o.canonical)*Wr,gt=$h(Qe)?rt:0,Ot=s.get("text-anchor").evaluate(F,{},o.canonical),Vt=eb(n,F,o.canonical);if(!Vt){const Pt=s.get("text-radial-offset").evaluate(F,{},o.canonical);Ne=Pt?Qw(Ot,[Pt*Wr,Gy]):s.get("text-offset").evaluate(F,{},o.canonical).map(bt=>bt*Wr)}let zt=x?"center":s.get("text-justify").evaluate(F,{},o.canonical);const Mt=s.get("symbol-placement"),Ct=Mt==="point"?s.get("text-max-width").evaluate(F,{},o.canonical)*Wr:0,Nt=()=>{o.bucket.allowVerticalPlacement&&Uh(Qe)&&(me.vertical=gp(Ae,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ct,v,Ot,"left",gt,Ne,l.ai.vertical,!0,Mt,ae,Q))};if(!x&&Vt){const Pt=new Set;if(zt==="auto")for(let tn=0;tn<Vt.values.length;tn+=2)Pt.add(Zy(Vt.values[tn]));else Pt.add(zt);let bt=!1;for(const tn of Pt)if(!me.horizontal[tn])if(bt)me.horizontal[tn]=me.horizontal[0];else{const Wt=gp(Ae,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ct,v,"center",tn,gt,Ne,l.ai.horizontal,!1,Mt,ae,Q);Wt&&(me.horizontal[tn]=Wt,bt=Wt.positionedLines.length===1)}Nt()}else{zt==="auto"&&(zt=Zy(Ot));const Pt=gp(Ae,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ct,v,Ot,zt,gt,Ne,l.ai.horizontal,!1,Mt,ae,Q);Pt&&(me.horizontal[zt]=Pt),Nt(),Uh(Qe)&&x&&S&&(me.vertical=gp(Ae,o.glyphMap,o.glyphPositions,o.imagePositions,W,Ct,v,Ot,zt,gt,Ne,l.ai.vertical,!1,Mt,ae,Q))}}let Je=!1;if(F.icon&&F.icon.name){const Qe=o.imageMap[F.icon.name];Qe&&(Re=WP(o.imagePositions[F.icon.name],s.get("icon-offset").evaluate(F,{},o.canonical),s.get("icon-anchor").evaluate(F,{},o.canonical)),Je=!!Qe.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Je:o.bucket.sdfIcons!==Je&&be("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Qe.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const We=nb(me.horizontal)||me.vertical;o.bucket.iconsInText=!!We&&We.iconsInText,(We||Re)&&ck(o.bucket,F,me,Re,o.imageMap,p,ae,fe,Ne,Je,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},l.br=Py,l.bs=Cy,l.bt=Ay,l.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.bv=My,l.bw=Pl,l.bx=function(o,n,s,h,p){return b(this,void 0,void 0,function*(){if(D())try{return yield Se(o,n,s,h,p)}catch{}return function(v,x,S,P,F){const W=v.width,Q=v.height;$e&&Pe||($e=new OffscreenCanvas(W,Q),Pe=$e.getContext("2d",{willReadFrequently:!0})),$e.width=W,$e.height=Q,Pe.drawImage(v,0,0,W,Q);const ae=Pe.getImageData(x,S,P,F);return Pe.clearRect(0,0,W,Q),ae.data}(o,n,s,h,p)})},l.by=Bw,l.bz=w,l.c=nt,l.d=function(o,n){const s=new Image;s.onload=()=>{n(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=Te})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(o)],{type:"image/png"});s.src=o.byteLength?URL.createObjectURL(h):Te},l.e=M,l.f=function(o,n){return St(M(o,{type:"json"}),n)},l.g=It,l.h=Ze,l.i=re,l.j=sn,l.k=yn,l.l=Gt,l.m=St,l.n=function(o){return new My(o).readFields(UP,[])},l.o=function(o,n,s){if(!o.length)return s(null,[]);let h=o.length;const p=new Array(o.length);let v=null;o.forEach((x,S)=>{n(x,(P,F)=>{P&&(v=P),p[S]=F,--h==0&&s(v,p)})})},l.p=vw,l.q=uf,l.r=Ir,l.s=Ut,l.t=Jo,l.u=Ft,l.v=se,l.w=be,l.x=Pa,l.y=tr,l.z=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}}}),d(["./shared"],function(l){class b{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,ce){for(const we of oe){this._layerConfigs[we.id]=we;const Ce=this._layers[we.id]=l.aC(we);Ce._featureFilter=l.a6(Ce.filter),this.keyCache[we.id]&&delete this.keyCache[we.id]}for(const we of ce)delete this.keyCache[we],delete this._layerConfigs[we],delete this._layers[we];this.familiesBySource={};const _e=l.bl(Object.values(this._layerConfigs),this.keyCache);for(const we of _e){const Ce=we.map(ht=>this._layers[ht.id]),He=Ce[0];if(He.visibility==="none")continue;const Ve=He.source||"";let Oe=this.familiesBySource[Ve];Oe||(Oe=this.familiesBySource[Ve]={});const qe=He.sourceLayer||"_geojsonTileLayer";let ut=Oe[qe];ut||(ut=Oe[qe]=[]),ut.push(Ce)}}}class w{constructor(oe){const ce={},_e=[];for(const Ve in oe){const Oe=oe[Ve],qe=ce[Ve]={};for(const ut in Oe){const ht=Oe[+ut];if(!ht||ht.bitmap.width===0||ht.bitmap.height===0)continue;const mt={x:0,y:0,w:ht.bitmap.width+2,h:ht.bitmap.height+2};_e.push(mt),qe[ut]={rect:mt,metrics:ht.metrics}}}const{w:we,h:Ce}=l.p(_e),He=new l.q({width:we||1,height:Ce||1});for(const Ve in oe){const Oe=oe[Ve];for(const qe in Oe){const ut=Oe[+qe];if(!ut||ut.bitmap.width===0||ut.bitmap.height===0)continue;const ht=ce[Ve][qe].rect;l.q.copy(ut.bitmap,He,{x:0,y:0},{x:ht.x+1,y:ht.y+1},ut.bitmap)}}this.image=He,this.positions=ce}}l.bm("GlyphAtlas",w);class I{constructor(oe){this.tileID=new l.O(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(oe,ce,_e,we,Ce){this.status="parsing",this.data=oe,this.collisionBoxArray=new l.a3;const He=new l.bn(Object.keys(oe.layers).sort()),Ve=new l.bo(this.tileID,this.promoteId);Ve.bucketLayerIDs=[];const Oe={},qe={featureIndex:Ve,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:_e},ut=ce.familiesBySource[this.source];for(const Fn in ut){const Mn=oe.layers[Fn];if(!Mn)continue;Mn.version===1&&l.w(`Vector tile source "${this.source}" layer "${Fn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ei=He.encode(Fn),qn=[];for(let br=0;br<Mn.length;br++){const Ur=Mn.feature(br),ri=Ve.getId(Ur,Fn);qn.push({feature:Ur,id:ri,index:br,sourceLayerIndex:ei})}for(const br of ut[Fn]){const Ur=br[0];Ur.source!==this.source&&l.w(`layer.source = ${Ur.source} does not equal this.source = ${this.source}`),Ur.minzoom&&this.zoom<Math.floor(Ur.minzoom)||Ur.maxzoom&&this.zoom>=Ur.maxzoom||Ur.visibility!=="none"&&(C(br,this.zoom,_e),(Oe[Ur.id]=Ur.createBucket({index:Ve.bucketLayerIDs.length,layers:br,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ei,sourceID:this.source})).populate(qn,qe,this.tileID.canonical),Ve.bucketLayerIDs.push(br.map(ri=>ri.id)))}}let ht,mt,Jt,un;const Dt=l.aH(qe.glyphDependencies,Fn=>Object.keys(Fn).map(Number));this.inFlightDependencies.forEach(Fn=>Fn==null?void 0:Fn.cancel()),this.inFlightDependencies=[];const Qt=++this.dependencySentinel;Object.keys(Dt).length?this.inFlightDependencies.push(we.send("getGlyphs",{uid:this.uid,stacks:Dt,source:this.source,tileID:this.tileID,type:"glyphs"},(Fn,Mn)=>{Qt===this.dependencySentinel&&(ht||(ht=Fn,mt=Mn,jn.call(this)))})):mt={};const fn=Object.keys(qe.iconDependencies);fn.length?this.inFlightDependencies.push(we.send("getImages",{icons:fn,source:this.source,tileID:this.tileID,type:"icons"},(Fn,Mn)=>{Qt===this.dependencySentinel&&(ht||(ht=Fn,Jt=Mn,jn.call(this)))})):Jt={};const Rn=Object.keys(qe.patternDependencies);function jn(){if(ht)return Ce(ht);if(mt&&Jt&&un){const Fn=new w(mt),Mn=new l.bp(Jt,un);for(const ei in Oe){const qn=Oe[ei];qn instanceof l.a4?(C(qn.layers,this.zoom,_e),l.bq({bucket:qn,glyphMap:mt,glyphPositions:Fn.positions,imageMap:Jt,imagePositions:Mn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):qn.hasPattern&&(qn instanceof l.br||qn instanceof l.bs||qn instanceof l.bt)&&(C(qn.layers,this.zoom,_e),qn.addFeatures(qe,this.tileID.canonical,Mn.patternPositions))}this.status="done",Ce(null,{buckets:Object.values(Oe).filter(ei=>!ei.isEmpty()),featureIndex:Ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Fn.image,imageAtlas:Mn,glyphMap:this.returnDependencies?mt:null,iconMap:this.returnDependencies?Jt:null,glyphPositions:this.returnDependencies?Fn.positions:null})}}Rn.length?this.inFlightDependencies.push(we.send("getImages",{icons:Rn,source:this.source,tileID:this.tileID,type:"patterns"},(Fn,Mn)=>{Qt===this.dependencySentinel&&(ht||(ht=Fn,un=Mn,jn.call(this)))})):un={},jn.call(this)}}function C(Le,oe,ce){const _e=new l.a8(oe);for(const we of Le)we.recalculate(_e,ce)}function k(Le,oe){const ce=l.l(Le.request,(_e,we,Ce,He)=>{if(_e)oe(_e);else if(we)try{const Ve=new l.bw.VectorTile(new l.bv(we));oe(null,{vectorTile:Ve,rawData:we,cacheControl:Ce,expires:He})}catch(Ve){const Oe=new Uint8Array(we);let qe=`Unable to parse the tile at ${Le.request.url}, `;qe+=Oe[0]===31&&Oe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ve.messge}`,oe(new Error(qe))}});return()=>{ce.cancel(),oe()}}class R{constructor(oe,ce,_e,we){this.actor=oe,this.layerIndex=ce,this.availableImages=_e,this.loadVectorData=we||k,this.fetching={},this.loading={},this.loaded={}}loadTile(oe,ce){const _e=oe.uid;this.loading||(this.loading={});const we=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new l.bu(oe.request),Ce=this.loading[_e]=new I(oe);Ce.abort=this.loadVectorData(oe,(He,Ve)=>{if(delete this.loading[_e],He||!Ve)return Ce.status="done",this.loaded[_e]=Ce,ce(He);const Oe=Ve.rawData,qe={};Ve.expires&&(qe.expires=Ve.expires),Ve.cacheControl&&(qe.cacheControl=Ve.cacheControl);const ut={};if(we){const ht=we.finish();ht&&(ut.resourceTiming=JSON.parse(JSON.stringify(ht)))}Ce.vectorTile=Ve.vectorTile,Ce.parse(Ve.vectorTile,this.layerIndex,this.availableImages,this.actor,(ht,mt)=>{if(delete this.fetching[_e],ht||!mt)return ce(ht);ce(null,l.e({rawTileData:Oe.slice(0)},mt,qe,ut))}),this.loaded=this.loaded||{},this.loaded[_e]=Ce,this.fetching[_e]={rawTileData:Oe,cacheControl:qe,resourceTiming:ut}})}reloadTile(oe,ce){const _e=this.loaded,we=oe.uid;if(_e&&_e[we]){const Ce=_e[we];Ce.showCollisionBoxes=oe.showCollisionBoxes,Ce.status==="parsing"?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,(He,Ve)=>{if(He||!Ve)return ce(He,Ve);let Oe;if(this.fetching[we]){const{rawTileData:qe,cacheControl:ut,resourceTiming:ht}=this.fetching[we];delete this.fetching[we],Oe=l.e({rawTileData:qe.slice(0)},Ve,ut,ht)}else Oe=Ve;ce(null,Oe)}):Ce.status==="done"&&(Ce.vectorTile?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,ce):ce())}}abortTile(oe,ce){const _e=this.loading,we=oe.uid;_e&&_e[we]&&_e[we].abort&&(_e[we].abort(),delete _e[we]),ce()}removeTile(oe,ce){const _e=this.loaded,we=oe.uid;_e&&_e[we]&&delete _e[we],ce()}}class J{constructor(){this.loaded={}}loadTile(oe,ce){return l._(this,void 0,void 0,function*(){const{uid:_e,encoding:we,rawImageData:Ce,redFactor:He,greenFactor:Ve,blueFactor:Oe,baseShift:qe}=oe,ut=Ce.width+2,ht=Ce.height+2,mt=l.a(Ce)?new l.R({width:ut,height:ht},yield l.bx(Ce,-1,-1,ut,ht)):Ce,Jt=new l.by(_e,mt,we,He,Ve,Oe,qe);this.loaded=this.loaded||{},this.loaded[_e]=Jt,ce(null,Jt)})}removeTile(oe){const ce=this.loaded,_e=oe.uid;ce&&ce[_e]&&delete ce[_e]}}function Y(Le,oe){if(Le.length!==0){de(Le[0],oe);for(var ce=1;ce<Le.length;ce++)de(Le[ce],!oe)}}function de(Le,oe){for(var ce=0,_e=0,we=0,Ce=Le.length,He=Ce-1;we<Ce;He=we++){var Ve=(Le[we][0]-Le[He][0])*(Le[He][1]+Le[we][1]),Oe=ce+Ve;_e+=Math.abs(ce)>=Math.abs(Ve)?ce-Oe+Ve:Ve-Oe+ce,ce=Oe}ce+_e>=0!=!!oe&&Le.reverse()}var G=l.bz(function Le(oe,ce){var _e,we=oe&&oe.type;if(we==="FeatureCollection")for(_e=0;_e<oe.features.length;_e++)Le(oe.features[_e],ce);else if(we==="GeometryCollection")for(_e=0;_e<oe.geometries.length;_e++)Le(oe.geometries[_e],ce);else if(we==="Feature")Le(oe.geometry,ce);else if(we==="Polygon")Y(oe.coordinates,ce);else if(we==="MultiPolygon")for(_e=0;_e<oe.coordinates.length;_e++)Y(oe.coordinates[_e],ce);return oe});const $=l.bw.VectorTileFeature.prototype.toGeoJSON;var D={exports:{}},ne=l.bA,Z=l.bw.VectorTileFeature,U=E;function E(Le,oe){this.options=oe||{},this.features=Le,this.length=Le.length}function M(Le,oe){this.id=typeof Le.id=="number"?Le.id:void 0,this.type=Le.type,this.rawGeometry=Le.type===1?[Le.geometry]:Le.geometry,this.properties=Le.tags,this.extent=oe||4096}E.prototype.feature=function(Le){return new M(this.features[Le],this.options.extent)},M.prototype.loadGeometry=function(){var Le=this.rawGeometry;this.geometry=[];for(var oe=0;oe<Le.length;oe++){for(var ce=Le[oe],_e=[],we=0;we<ce.length;we++)_e.push(new ne(ce[we][0],ce[we][1]));this.geometry.push(_e)}return this.geometry},M.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Le=this.geometry,oe=1/0,ce=-1/0,_e=1/0,we=-1/0,Ce=0;Ce<Le.length;Ce++)for(var He=Le[Ce],Ve=0;Ve<He.length;Ve++){var Oe=He[Ve];oe=Math.min(oe,Oe.x),ce=Math.max(ce,Oe.x),_e=Math.min(_e,Oe.y),we=Math.max(we,Oe.y)}return[oe,_e,ce,we]},M.prototype.toGeoJSON=Z.prototype.toGeoJSON;var H=l.bB,q=U;function ee(Le){var oe=new H;return function(ce,_e){for(var we in ce.layers)_e.writeMessage(3,ve,ce.layers[we])}(Le,oe),oe.finish()}function ve(Le,oe){var ce;oe.writeVarintField(15,Le.version||1),oe.writeStringField(1,Le.name||""),oe.writeVarintField(5,Le.extent||4096);var _e={keys:[],values:[],keycache:{},valuecache:{}};for(ce=0;ce<Le.length;ce++)_e.feature=Le.feature(ce),oe.writeMessage(2,xe,_e);var we=_e.keys;for(ce=0;ce<we.length;ce++)oe.writeStringField(3,we[ce]);var Ce=_e.values;for(ce=0;ce<Ce.length;ce++)oe.writeMessage(4,ie,Ce[ce])}function xe(Le,oe){var ce=Le.feature;ce.id!==void 0&&oe.writeVarintField(1,ce.id),oe.writeMessage(2,be,Le),oe.writeVarintField(3,ce.type),oe.writeMessage(4,re,ce)}function be(Le,oe){var ce=Le.feature,_e=Le.keys,we=Le.values,Ce=Le.keycache,He=Le.valuecache;for(var Ve in ce.properties){var Oe=ce.properties[Ve],qe=Ce[Ve];if(Oe!==null){qe===void 0&&(_e.push(Ve),Ce[Ve]=qe=_e.length-1),oe.writeVarint(qe);var ut=typeof Oe;ut!=="string"&&ut!=="boolean"&&ut!=="number"&&(Oe=JSON.stringify(Oe));var ht=ut+":"+Oe,mt=He[ht];mt===void 0&&(we.push(Oe),He[ht]=mt=we.length-1),oe.writeVarint(mt)}}}function te(Le,oe){return(oe<<3)+(7&Le)}function ue(Le){return Le<<1^Le>>31}function re(Le,oe){for(var ce=Le.loadGeometry(),_e=Le.type,we=0,Ce=0,He=ce.length,Ve=0;Ve<He;Ve++){var Oe=ce[Ve],qe=1;_e===1&&(qe=Oe.length),oe.writeVarint(te(1,qe));for(var ut=_e===3?Oe.length-1:Oe.length,ht=0;ht<ut;ht++){ht===1&&_e!==1&&oe.writeVarint(te(2,ut-1));var mt=Oe[ht].x-we,Jt=Oe[ht].y-Ce;oe.writeVarint(ue(mt)),oe.writeVarint(ue(Jt)),we+=mt,Ce+=Jt}_e===3&&oe.writeVarint(te(7,1))}}function ie(Le,oe){var ce=typeof Le;ce==="string"?oe.writeStringField(1,Le):ce==="boolean"?oe.writeBooleanField(7,Le):ce==="number"&&(Le%1!=0?oe.writeDoubleField(3,Le):Le<0?oe.writeSVarintField(6,Le):oe.writeVarintField(5,Le))}D.exports=ee,D.exports.fromVectorTileJs=ee,D.exports.fromGeojsonVt=function(Le,oe){oe=oe||{};var ce={};for(var _e in Le)ce[_e]=new q(Le[_e].features,oe),ce[_e].name=_e,ce[_e].version=oe.version,ce[_e].extent=oe.extent;return ee({layers:ce})},D.exports.GeoJSONWrapper=q;var ye=l.bz(D.exports);const Te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Le=>Le},Se=Math.fround||($e=new Float32Array(1),Le=>($e[0]=+Le,$e[0]));var $e;const Pe=3,ze=5,Xe=6;class Ze{constructor(oe){this.options=Object.assign(Object.create(Te),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:ce,minZoom:_e,maxZoom:we}=this.options;ce&&console.time("total time");const Ce=`prepare ${oe.length} points`;ce&&console.time(Ce),this.points=oe;const He=[];for(let Oe=0;Oe<oe.length;Oe++){const qe=oe[Oe];if(!qe.geometry)continue;const[ut,ht]=qe.geometry.coordinates,mt=Se(vt(ut)),Jt=Se(It(ht));He.push(mt,Jt,1/0,Oe,-1,1),this.options.reduce&&He.push(0)}let Ve=this.trees[we+1]=this._createTree(He);ce&&console.timeEnd(Ce);for(let Oe=we;Oe>=_e;Oe--){const qe=+Date.now();Ve=this.trees[Oe]=this._createTree(this._cluster(Ve,Oe)),ce&&console.log("z%d: %d clusters in %dms",Oe,Ve.numItems,+Date.now()-qe)}return ce&&console.timeEnd("total time"),this}getClusters(oe,ce){let _e=((oe[0]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,oe[1]));let Ce=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const He=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)_e=-180,Ce=180;else if(_e>Ce){const ht=this.getClusters([_e,we,180,He],ce),mt=this.getClusters([-180,we,Ce,He],ce);return ht.concat(mt)}const Ve=this.trees[this._limitZoom(ce)],Oe=Ve.range(vt(_e),It(He),vt(Ce),It(we)),qe=Ve.data,ut=[];for(const ht of Oe){const mt=this.stride*ht;ut.push(qe[mt+ze]>1?nt(qe,mt,this.clusterProps):this.points[qe[mt+Pe]])}return ut}getChildren(oe){const ce=this._getOriginId(oe),_e=this._getOriginZoom(oe),we="No cluster with the specified id.",Ce=this.trees[_e];if(!Ce)throw new Error(we);const He=Ce.data;if(ce*this.stride>=He.length)throw new Error(we);const Ve=this.options.radius/(this.options.extent*Math.pow(2,_e-1)),Oe=Ce.within(He[ce*this.stride],He[ce*this.stride+1],Ve),qe=[];for(const ut of Oe){const ht=ut*this.stride;He[ht+4]===oe&&qe.push(He[ht+ze]>1?nt(He,ht,this.clusterProps):this.points[He[ht+Pe]])}if(qe.length===0)throw new Error(we);return qe}getLeaves(oe,ce,_e){const we=[];return this._appendLeaves(we,oe,ce=ce||10,_e=_e||0,0),we}getTile(oe,ce,_e){const we=this.trees[this._limitZoom(oe)],Ce=Math.pow(2,oe),{extent:He,radius:Ve}=this.options,Oe=Ve/He,qe=(_e-Oe)/Ce,ut=(_e+1+Oe)/Ce,ht={features:[]};return this._addTileFeatures(we.range((ce-Oe)/Ce,qe,(ce+1+Oe)/Ce,ut),we.data,ce,_e,Ce,ht),ce===0&&this._addTileFeatures(we.range(1-Oe/Ce,qe,1,ut),we.data,Ce,_e,Ce,ht),ce===Ce-1&&this._addTileFeatures(we.range(0,qe,Oe/Ce,ut),we.data,-1,_e,Ce,ht),ht.features.length?ht:null}getClusterExpansionZoom(oe){let ce=this._getOriginZoom(oe)-1;for(;ce<=this.options.maxZoom;){const _e=this.getChildren(oe);if(ce++,_e.length!==1)break;oe=_e[0].properties.cluster_id}return ce}_appendLeaves(oe,ce,_e,we,Ce){const He=this.getChildren(ce);for(const Ve of He){const Oe=Ve.properties;if(Oe&&Oe.cluster?Ce+Oe.point_count<=we?Ce+=Oe.point_count:Ce=this._appendLeaves(oe,Oe.cluster_id,_e,we,Ce):Ce<we?Ce++:oe.push(Ve),oe.length===_e)break}return Ce}_createTree(oe){const ce=new l.av(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let _e=0;_e<oe.length;_e+=this.stride)ce.add(oe[_e],oe[_e+1]);return ce.finish(),ce.data=oe,ce}_addTileFeatures(oe,ce,_e,we,Ce,He){for(const Ve of oe){const Oe=Ve*this.stride,qe=ce[Oe+ze]>1;let ut,ht,mt;if(qe)ut=ct(ce,Oe,this.clusterProps),ht=ce[Oe],mt=ce[Oe+1];else{const Dt=this.points[ce[Oe+Pe]];ut=Dt.properties;const[Qt,fn]=Dt.geometry.coordinates;ht=vt(Qt),mt=It(fn)}const Jt={type:1,geometry:[[Math.round(this.options.extent*(ht*Ce-_e)),Math.round(this.options.extent*(mt*Ce-we))]],tags:ut};let un;un=qe||this.options.generateId?ce[Oe+Pe]:this.points[ce[Oe+Pe]].id,un!==void 0&&(Jt.id=un),He.features.push(Jt)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,ce){const{radius:_e,extent:we,reduce:Ce,minPoints:He}=this.options,Ve=_e/(we*Math.pow(2,ce)),Oe=oe.data,qe=[],ut=this.stride;for(let ht=0;ht<Oe.length;ht+=ut){if(Oe[ht+2]<=ce)continue;Oe[ht+2]=ce;const mt=Oe[ht],Jt=Oe[ht+1],un=oe.within(Oe[ht],Oe[ht+1],Ve),Dt=Oe[ht+ze];let Qt=Dt;for(const fn of un){const Rn=fn*ut;Oe[Rn+2]>ce&&(Qt+=Oe[Rn+ze])}if(Qt>Dt&&Qt>=He){let fn,Rn=mt*Dt,jn=Jt*Dt,Fn=-1;const Mn=((ht/ut|0)<<5)+(ce+1)+this.points.length;for(const ei of un){const qn=ei*ut;if(Oe[qn+2]<=ce)continue;Oe[qn+2]=ce;const br=Oe[qn+ze];Rn+=Oe[qn]*br,jn+=Oe[qn+1]*br,Oe[qn+4]=Mn,Ce&&(fn||(fn=this._map(Oe,ht,!0),Fn=this.clusterProps.length,this.clusterProps.push(fn)),Ce(fn,this._map(Oe,qn)))}Oe[ht+4]=Mn,qe.push(Rn/Qt,jn/Qt,1/0,Mn,-1,Qt),Ce&&qe.push(Fn)}else{for(let fn=0;fn<ut;fn++)qe.push(Oe[ht+fn]);if(Qt>1)for(const fn of un){const Rn=fn*ut;if(!(Oe[Rn+2]<=ce)){Oe[Rn+2]=ce;for(let jn=0;jn<ut;jn++)qe.push(Oe[Rn+jn])}}}}return qe}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,ce,_e){if(oe[ce+ze]>1){const He=this.clusterProps[oe[ce+Xe]];return _e?Object.assign({},He):He}const we=this.points[oe[ce+Pe]].properties,Ce=this.options.map(we);return _e&&Ce===we?Object.assign({},Ce):Ce}}function nt(Le,oe,ce){return{type:"Feature",id:Le[oe+Pe],properties:ct(Le,oe,ce),geometry:{type:"Point",coordinates:[(_e=Le[oe],360*(_e-.5)),ft(Le[oe+1])]}};var _e}function ct(Le,oe,ce){const _e=Le[oe+ze],we=_e>=1e4?`${Math.round(_e/1e3)}k`:_e>=1e3?Math.round(_e/100)/10+"k":_e,Ce=Le[oe+Xe],He=Ce===-1?{}:Object.assign({},ce[Ce]);return Object.assign(He,{cluster:!0,cluster_id:Le[oe+Pe],point_count:_e,point_count_abbreviated:we})}function vt(Le){return Le/360+.5}function It(Le){const oe=Math.sin(Le*Math.PI/180),ce=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ce<0?0:ce>1?1:ce}function ft(Le){const oe=(180-360*Le)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function St(Le,oe,ce,_e){for(var we,Ce=_e,He=ce-oe>>1,Ve=ce-oe,Oe=Le[oe],qe=Le[oe+1],ut=Le[ce],ht=Le[ce+1],mt=oe+3;mt<ce;mt+=3){var Jt=Gt(Le[mt],Le[mt+1],Oe,qe,ut,ht);if(Jt>Ce)we=mt,Ce=Jt;else if(Jt===Ce){var un=Math.abs(mt-He);un<Ve&&(we=mt,Ve=un)}}Ce>_e&&(we-oe>3&&St(Le,oe,we,_e),Le[we+2]=Ce,ce-we>3&&St(Le,we,ce,_e))}function Gt(Le,oe,ce,_e,we,Ce){var He=we-ce,Ve=Ce-_e;if(He!==0||Ve!==0){var Oe=((Le-ce)*He+(oe-_e)*Ve)/(He*He+Ve*Ve);Oe>1?(ce=we,_e=Ce):Oe>0&&(ce+=He*Oe,_e+=Ve*Oe)}return(He=Le-ce)*He+(Ve=oe-_e)*Ve}function Ut(Le,oe,ce,_e){var we={id:Le===void 0?null:Le,type:oe,geometry:ce,tags:_e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ce){var He=Ce.geometry,Ve=Ce.type;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")cn(Ce,He);else if(Ve==="Polygon"||Ve==="MultiLineString")for(var Oe=0;Oe<He.length;Oe++)cn(Ce,He[Oe]);else if(Ve==="MultiPolygon")for(Oe=0;Oe<He.length;Oe++)for(var qe=0;qe<He[Oe].length;qe++)cn(Ce,He[Oe][qe])}(we),we}function cn(Le,oe){for(var ce=0;ce<oe.length;ce+=3)Le.minX=Math.min(Le.minX,oe[ce]),Le.minY=Math.min(Le.minY,oe[ce+1]),Le.maxX=Math.max(Le.maxX,oe[ce]),Le.maxY=Math.max(Le.maxY,oe[ce+1])}function xn(Le,oe,ce,_e){if(oe.geometry){var we=oe.geometry.coordinates,Ce=oe.geometry.type,He=Math.pow(ce.tolerance/((1<<ce.maxZoom)*ce.extent),2),Ve=[],Oe=oe.id;if(ce.promoteId?Oe=oe.properties[ce.promoteId]:ce.generateId&&(Oe=_e||0),Ce==="Point")yn(we,Ve);else if(Ce==="MultiPoint")for(var qe=0;qe<we.length;qe++)yn(we[qe],Ve);else if(Ce==="LineString")sn(we,Ve,He,!1);else if(Ce==="MultiLineString"){if(ce.lineMetrics){for(qe=0;qe<we.length;qe++)sn(we[qe],Ve=[],He,!1),Le.push(Ut(Oe,"LineString",Ve,oe.properties));return}gn(we,Ve,He,!1)}else if(Ce==="Polygon")gn(we,Ve,He,!0);else{if(Ce!=="MultiPolygon"){if(Ce==="GeometryCollection"){for(qe=0;qe<oe.geometry.geometries.length;qe++)xn(Le,{id:Oe,geometry:oe.geometry.geometries[qe],properties:oe.properties},ce,_e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(qe=0;qe<we.length;qe++){var ut=[];gn(we[qe],ut,He,!0),Ve.push(ut)}}Le.push(Ut(Oe,Ce,Ve,oe.properties))}}function yn(Le,oe){oe.push(se(Le[0])),oe.push(j(Le[1])),oe.push(0)}function sn(Le,oe,ce,_e){for(var we,Ce,He=0,Ve=0;Ve<Le.length;Ve++){var Oe=se(Le[Ve][0]),qe=j(Le[Ve][1]);oe.push(Oe),oe.push(qe),oe.push(0),Ve>0&&(He+=_e?(we*qe-Oe*Ce)/2:Math.sqrt(Math.pow(Oe-we,2)+Math.pow(qe-Ce,2))),we=Oe,Ce=qe}var ut=oe.length-3;oe[2]=1,St(oe,0,ut,ce),oe[ut+2]=1,oe.size=Math.abs(He),oe.start=0,oe.end=oe.size}function gn(Le,oe,ce,_e){for(var we=0;we<Le.length;we++){var Ce=[];sn(Le[we],Ce,ce,_e),oe.push(Ce)}}function se(Le){return Le/360+.5}function j(Le){var oe=Math.sin(Le*Math.PI/180),ce=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ce<0?0:ce>1?1:ce}function O(Le,oe,ce,_e,we,Ce,He,Ve){if(_e/=oe,Ce>=(ce/=oe)&&He<_e)return Le;if(He<ce||Ce>=_e)return null;for(var Oe=[],qe=0;qe<Le.length;qe++){var ut=Le[qe],ht=ut.geometry,mt=ut.type,Jt=we===0?ut.minX:ut.minY,un=we===0?ut.maxX:ut.maxY;if(Jt>=ce&&un<_e)Oe.push(ut);else if(!(un<ce||Jt>=_e)){var Dt=[];if(mt==="Point"||mt==="MultiPoint")pe(ht,Dt,ce,_e,we);else if(mt==="LineString")Be(ht,Dt,ce,_e,we,!1,Ve.lineMetrics);else if(mt==="MultiLineString")lt(ht,Dt,ce,_e,we,!1);else if(mt==="Polygon")lt(ht,Dt,ce,_e,we,!0);else if(mt==="MultiPolygon")for(var Qt=0;Qt<ht.length;Qt++){var fn=[];lt(ht[Qt],fn,ce,_e,we,!0),fn.length&&Dt.push(fn)}if(Dt.length){if(Ve.lineMetrics&&mt==="LineString"){for(Qt=0;Qt<Dt.length;Qt++)Oe.push(Ut(ut.id,mt,Dt[Qt],ut.tags));continue}mt!=="LineString"&&mt!=="MultiLineString"||(Dt.length===1?(mt="LineString",Dt=Dt[0]):mt="MultiLineString"),mt!=="Point"&&mt!=="MultiPoint"||(mt=Dt.length===3?"Point":"MultiPoint"),Oe.push(Ut(ut.id,mt,Dt,ut.tags))}}}return Oe.length?Oe:null}function pe(Le,oe,ce,_e,we){for(var Ce=0;Ce<Le.length;Ce+=3){var He=Le[Ce+we];He>=ce&&He<=_e&&(oe.push(Le[Ce]),oe.push(Le[Ce+1]),oe.push(Le[Ce+2]))}}function Be(Le,oe,ce,_e,we,Ce,He){for(var Ve,Oe,qe=et(Le),ut=we===0?z:B,ht=Le.start,mt=0;mt<Le.length-3;mt+=3){var Jt=Le[mt],un=Le[mt+1],Dt=Le[mt+2],Qt=Le[mt+3],fn=Le[mt+4],Rn=we===0?Jt:un,jn=we===0?Qt:fn,Fn=!1;He&&(Ve=Math.sqrt(Math.pow(Jt-Qt,2)+Math.pow(un-fn,2))),Rn<ce?jn>ce&&(Oe=ut(qe,Jt,un,Qt,fn,ce),He&&(qe.start=ht+Ve*Oe)):Rn>_e?jn<_e&&(Oe=ut(qe,Jt,un,Qt,fn,_e),He&&(qe.start=ht+Ve*Oe)):le(qe,Jt,un,Dt),jn<ce&&Rn>=ce&&(Oe=ut(qe,Jt,un,Qt,fn,ce),Fn=!0),jn>_e&&Rn<=_e&&(Oe=ut(qe,Jt,un,Qt,fn,_e),Fn=!0),!Ce&&Fn&&(He&&(qe.end=ht+Ve*Oe),oe.push(qe),qe=et(Le)),He&&(ht+=Ve)}var Mn=Le.length-3;Jt=Le[Mn],un=Le[Mn+1],Dt=Le[Mn+2],(Rn=we===0?Jt:un)>=ce&&Rn<=_e&&le(qe,Jt,un,Dt),Mn=qe.length-3,Ce&&Mn>=3&&(qe[Mn]!==qe[0]||qe[Mn+1]!==qe[1])&&le(qe,qe[0],qe[1],qe[2]),qe.length&&oe.push(qe)}function et(Le){var oe=[];return oe.size=Le.size,oe.start=Le.start,oe.end=Le.end,oe}function lt(Le,oe,ce,_e,we,Ce){for(var He=0;He<Le.length;He++)Be(Le[He],oe,ce,_e,we,Ce,!1)}function le(Le,oe,ce,_e){Le.push(oe),Le.push(ce),Le.push(_e)}function z(Le,oe,ce,_e,we,Ce){var He=(Ce-oe)/(_e-oe);return Le.push(Ce),Le.push(ce+(we-ce)*He),Le.push(1),He}function B(Le,oe,ce,_e,we,Ce){var He=(Ce-ce)/(we-ce);return Le.push(oe+(_e-oe)*He),Le.push(Ce),Le.push(1),He}function Ee(Le,oe){for(var ce=[],_e=0;_e<Le.length;_e++){var we,Ce=Le[_e],He=Ce.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")we=Ge(Ce.geometry,oe);else if(He==="MultiLineString"||He==="Polygon"){we=[];for(var Ve=0;Ve<Ce.geometry.length;Ve++)we.push(Ge(Ce.geometry[Ve],oe))}else if(He==="MultiPolygon")for(we=[],Ve=0;Ve<Ce.geometry.length;Ve++){for(var Oe=[],qe=0;qe<Ce.geometry[Ve].length;qe++)Oe.push(Ge(Ce.geometry[Ve][qe],oe));we.push(Oe)}ce.push(Ut(Ce.id,He,we,Ce.tags))}return ce}function Ge(Le,oe){var ce=[];ce.size=Le.size,Le.start!==void 0&&(ce.start=Le.start,ce.end=Le.end);for(var _e=0;_e<Le.length;_e+=3)ce.push(Le[_e]+oe,Le[_e+1],Le[_e+2]);return ce}function je(Le,oe){if(Le.transformed)return Le;var ce,_e,we,Ce=1<<Le.z,He=Le.x,Ve=Le.y;for(ce=0;ce<Le.features.length;ce++){var Oe=Le.features[ce],qe=Oe.geometry,ut=Oe.type;if(Oe.geometry=[],ut===1)for(_e=0;_e<qe.length;_e+=2)Oe.geometry.push(at(qe[_e],qe[_e+1],oe,Ce,He,Ve));else for(_e=0;_e<qe.length;_e++){var ht=[];for(we=0;we<qe[_e].length;we+=2)ht.push(at(qe[_e][we],qe[_e][we+1],oe,Ce,He,Ve));Oe.geometry.push(ht)}}return Le.transformed=!0,Le}function at(Le,oe,ce,_e,we,Ce){return[Math.round(ce*(Le*_e-we)),Math.round(ce*(oe*_e-Ce))]}function jt(Le,oe,ce,_e,we){for(var Ce=oe===we.maxZoom?0:we.tolerance/((1<<oe)*we.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ce,y:_e,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ve=0;Ve<Le.length;Ve++){He.numFeatures++,Tn(He,Le[Ve],Ce,we);var Oe=Le[Ve].minX,qe=Le[Ve].minY,ut=Le[Ve].maxX,ht=Le[Ve].maxY;Oe<He.minX&&(He.minX=Oe),qe<He.minY&&(He.minY=qe),ut>He.maxX&&(He.maxX=ut),ht>He.maxY&&(He.maxY=ht)}return He}function Tn(Le,oe,ce,_e){var we=oe.geometry,Ce=oe.type,He=[];if(Ce==="Point"||Ce==="MultiPoint")for(var Ve=0;Ve<we.length;Ve+=3)He.push(we[Ve]),He.push(we[Ve+1]),Le.numPoints++,Le.numSimplified++;else if(Ce==="LineString")vn(He,we,Le,ce,!1,!1);else if(Ce==="MultiLineString"||Ce==="Polygon")for(Ve=0;Ve<we.length;Ve++)vn(He,we[Ve],Le,ce,Ce==="Polygon",Ve===0);else if(Ce==="MultiPolygon")for(var Oe=0;Oe<we.length;Oe++){var qe=we[Oe];for(Ve=0;Ve<qe.length;Ve++)vn(He,qe[Ve],Le,ce,!0,Ve===0)}if(He.length){var ut=oe.tags||null;if(Ce==="LineString"&&_e.lineMetrics){for(var ht in ut={},oe.tags)ut[ht]=oe.tags[ht];ut.mapbox_clip_start=we.start/we.size,ut.mapbox_clip_end=we.end/we.size}var mt={geometry:He,type:Ce==="Polygon"||Ce==="MultiPolygon"?3:Ce==="LineString"||Ce==="MultiLineString"?2:1,tags:ut};oe.id!==null&&(mt.id=oe.id),Le.features.push(mt)}}function vn(Le,oe,ce,_e,we,Ce){var He=_e*_e;if(_e>0&&oe.size<(we?He:_e))ce.numPoints+=oe.length/3;else{for(var Ve=[],Oe=0;Oe<oe.length;Oe+=3)(_e===0||oe[Oe+2]>He)&&(ce.numSimplified++,Ve.push(oe[Oe]),Ve.push(oe[Oe+1])),ce.numPoints++;we&&function(qe,ut){for(var ht=0,mt=0,Jt=qe.length,un=Jt-2;mt<Jt;un=mt,mt+=2)ht+=(qe[mt]-qe[un])*(qe[mt+1]+qe[un+1]);if(ht>0===ut)for(mt=0,Jt=qe.length;mt<Jt/2;mt+=2){var Dt=qe[mt],Qt=qe[mt+1];qe[mt]=qe[Jt-2-mt],qe[mt+1]=qe[Jt-1-mt],qe[Jt-2-mt]=Dt,qe[Jt-1-mt]=Qt}}(Ve,Ce),Le.push(Ve)}}function _t(Le,oe){var ce=(oe=this.options=function(we,Ce){for(var He in Ce)we[He]=Ce[He];return we}(Object.create(this.options),oe)).debug;if(ce&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");var _e=function(we,Ce){var He=[];if(we.type==="FeatureCollection")for(var Ve=0;Ve<we.features.length;Ve++)xn(He,we.features[Ve],Ce,Ve);else xn(He,we.type==="Feature"?we:{geometry:we},Ce);return He}(Le,oe);this.tiles={},this.tileCoords=[],ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_e=function(we,Ce){var He=Ce.buffer/Ce.extent,Ve=we,Oe=O(we,1,-1-He,He,0,-1,2,Ce),qe=O(we,1,1-He,2+He,0,-1,2,Ce);return(Oe||qe)&&(Ve=O(we,1,-He,1+He,0,-1,2,Ce)||[],Oe&&(Ve=Ee(Oe,1).concat(Ve)),qe&&(Ve=Ve.concat(Ee(qe,-1)))),Ve}(_e,oe),_e.length&&this.splitTile(_e,0,0,0),ce&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Rt(Le,oe,ce){return 32*((1<<Le)*ce+oe)+Le}function nn(Le,oe){return oe?Le.properties[oe]:Le.id}function wr(Le,oe){if(Le==null)return!0;if(Le.type==="Feature")return nn(Le,oe)!=null;if(Le.type==="FeatureCollection"){const ce=new Set;for(const _e of Le.features){const we=nn(_e,oe);if(we==null||ce.has(we))return!1;ce.add(we)}return!0}return!1}function fi(Le,oe){const ce=new Map;if(Le!=null)if(Le.type==="Feature")ce.set(nn(Le,oe),Le);else for(const _e of Le.features)ce.set(nn(_e,oe),_e);return ce}_t.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},_t.prototype.splitTile=function(Le,oe,ce,_e,we,Ce,He){for(var Ve=[Le,oe,ce,_e],Oe=this.options,qe=Oe.debug;Ve.length;){_e=Ve.pop(),ce=Ve.pop(),oe=Ve.pop(),Le=Ve.pop();var ut=1<<oe,ht=Rt(oe,ce,_e),mt=this.tiles[ht];if(!mt&&(qe>1&&console.time("creation"),mt=this.tiles[ht]=jt(Le,oe,ce,_e,Oe),this.tileCoords.push({z:oe,x:ce,y:_e}),qe)){qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,ce,_e,mt.numFeatures,mt.numPoints,mt.numSimplified),console.timeEnd("creation"));var Jt="z"+oe;this.stats[Jt]=(this.stats[Jt]||0)+1,this.total++}if(mt.source=Le,we){if(oe===Oe.maxZoom||oe===we)continue;var un=1<<we-oe;if(ce!==Math.floor(Ce/un)||_e!==Math.floor(He/un))continue}else if(oe===Oe.indexMaxZoom||mt.numPoints<=Oe.indexMaxPoints)continue;if(mt.source=null,Le.length!==0){qe>1&&console.time("clipping");var Dt,Qt,fn,Rn,jn,Fn,Mn=.5*Oe.buffer/Oe.extent,ei=.5-Mn,qn=.5+Mn,br=1+Mn;Dt=Qt=fn=Rn=null,jn=O(Le,ut,ce-Mn,ce+qn,0,mt.minX,mt.maxX,Oe),Fn=O(Le,ut,ce+ei,ce+br,0,mt.minX,mt.maxX,Oe),Le=null,jn&&(Dt=O(jn,ut,_e-Mn,_e+qn,1,mt.minY,mt.maxY,Oe),Qt=O(jn,ut,_e+ei,_e+br,1,mt.minY,mt.maxY,Oe),jn=null),Fn&&(fn=O(Fn,ut,_e-Mn,_e+qn,1,mt.minY,mt.maxY,Oe),Rn=O(Fn,ut,_e+ei,_e+br,1,mt.minY,mt.maxY,Oe),Fn=null),qe>1&&console.timeEnd("clipping"),Ve.push(Dt||[],oe+1,2*ce,2*_e),Ve.push(Qt||[],oe+1,2*ce,2*_e+1),Ve.push(fn||[],oe+1,2*ce+1,2*_e),Ve.push(Rn||[],oe+1,2*ce+1,2*_e+1)}}},_t.prototype.getTile=function(Le,oe,ce){var _e=this.options,we=_e.extent,Ce=_e.debug;if(Le<0||Le>24)return null;var He=1<<Le,Ve=Rt(Le,oe=(oe%He+He)%He,ce);if(this.tiles[Ve])return je(this.tiles[Ve],we);Ce>1&&console.log("drilling down to z%d-%d-%d",Le,oe,ce);for(var Oe,qe=Le,ut=oe,ht=ce;!Oe&&qe>0;)qe--,ut=Math.floor(ut/2),ht=Math.floor(ht/2),Oe=this.tiles[Rt(qe,ut,ht)];return Oe&&Oe.source?(Ce>1&&console.log("found parent tile z%d-%d-%d",qe,ut,ht),Ce>1&&console.time("drilling down"),this.splitTile(Oe.source,qe,ut,ht,Le,oe,ce),Ce>1&&console.timeEnd("drilling down"),this.tiles[Ve]?je(this.tiles[Ve],we):null):null};class hn extends R{constructor(oe,ce,_e,we){super(oe,ce,_e),this._dataUpdateable=new Map,this.loadGeoJSON=(Ce,He)=>{const{promoteId:Ve}=Ce;if(Ce.request)return l.f(Ce.request,(Oe,qe,ut,ht)=>{this._dataUpdateable=wr(qe,Ve)?fi(qe,Ve):void 0,He(Oe,qe,ut,ht)});if(typeof Ce.data=="string")try{const Oe=JSON.parse(Ce.data);this._dataUpdateable=wr(Oe,Ve)?fi(Oe,Ve):void 0,He(null,Oe)}catch{He(new Error(`Input data given to '${Ce.source}' is not a valid GeoJSON object.`))}else Ce.dataDiff?this._dataUpdateable?(function(Oe,qe,ut){var ht,mt,Jt,un;if(qe.removeAll&&Oe.clear(),qe.remove)for(const Dt of qe.remove)Oe.delete(Dt);if(qe.add)for(const Dt of qe.add){const Qt=nn(Dt,ut);Qt!=null&&Oe.set(Qt,Dt)}if(qe.update)for(const Dt of qe.update){let Qt=Oe.get(Dt.id);if(Qt==null)continue;const fn=!Dt.removeAllProperties&&(((ht=Dt.removeProperties)===null||ht===void 0?void 0:ht.length)>0||((mt=Dt.addOrUpdateProperties)===null||mt===void 0?void 0:mt.length)>0);if((Dt.newGeometry||Dt.removeAllProperties||fn)&&(Qt=Object.assign({},Qt),Oe.set(Dt.id,Qt),fn&&(Qt.properties=Object.assign({},Qt.properties))),Dt.newGeometry&&(Qt.geometry=Dt.newGeometry),Dt.removeAllProperties)Qt.properties={};else if(((Jt=Dt.removeProperties)===null||Jt===void 0?void 0:Jt.length)>0)for(const Rn of Dt.removeProperties)Object.prototype.hasOwnProperty.call(Qt.properties,Rn)&&delete Qt.properties[Rn];if(((un=Dt.addOrUpdateProperties)===null||un===void 0?void 0:un.length)>0)for(const{key:Rn,value:jn}of Dt.addOrUpdateProperties)Qt.properties[Rn]=jn}}(this._dataUpdateable,Ce.dataDiff,Ve),He(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):He(new Error(`Cannot update existing geojson data in ${Ce.source}`)):He(new Error(`Input data given to '${Ce.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,we&&(this.loadGeoJSON=we)}loadGeoJSONTile(oe,ce){const _e=oe.tileID.canonical;if(!this._geoJSONIndex)return ce(null,null);const we=this._geoJSONIndex.getTile(_e.z,_e.x,_e.y);if(!we)return ce(null,null);const Ce=new class{constructor(Ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.N,this.length=Ve.length,this._features=Ve}feature(Ve){return new class{constructor(Oe){this._feature=Oe,this.extent=l.N,this.type=Oe.type,this.properties=Oe.tags,"id"in Oe&&!isNaN(Oe.id)&&(this.id=parseInt(Oe.id,10))}loadGeometry(){if(this._feature.type===1){const Oe=[];for(const qe of this._feature.geometry)Oe.push([new l.P(qe[0],qe[1])]);return Oe}{const Oe=[];for(const qe of this._feature.geometry){const ut=[];for(const ht of qe)ut.push(new l.P(ht[0],ht[1]));Oe.push(ut)}return Oe}}toGeoJSON(Oe,qe,ut){return $.call(this,Oe,qe,ut)}}(this._features[Ve])}}(we.features);let He=ye(Ce);He.byteOffset===0&&He.byteLength===He.buffer.byteLength||(He=new Uint8Array(He)),ce(null,{vectorTile:Ce,rawData:He.buffer})}loadData(oe,ce){var _e;(_e=this._pendingRequest)===null||_e===void 0||_e.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const we=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new l.bu(oe.request);this._pendingCallback=ce,this._pendingRequest=this.loadGeoJSON(oe,(Ce,He)=>{if(delete this._pendingCallback,delete this._pendingRequest,Ce||!He)return ce(Ce);if(typeof He!="object")return ce(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));{G(He,!0);try{if(oe.filter){const Oe=l.bC(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Oe.result==="error")throw new Error(Oe.value.map(ut=>`${ut.key}: ${ut.message}`).join(", "));He={type:"FeatureCollection",features:He.features.filter(ut=>Oe.value.evaluate({zoom:0},ut))}}this._geoJSONIndex=oe.cluster?new Ze(function({superclusterOptions:Oe,clusterProperties:qe}){if(!qe||!Oe)return Oe;const ut={},ht={},mt={accumulated:null,zoom:0},Jt={properties:null},un=Object.keys(qe);for(const Dt of un){const[Qt,fn]=qe[Dt],Rn=l.bC(fn),jn=l.bC(typeof Qt=="string"?[Qt,["accumulated"],["get",Dt]]:Qt);ut[Dt]=Rn.value,ht[Dt]=jn.value}return Oe.map=Dt=>{Jt.properties=Dt;const Qt={};for(const fn of un)Qt[fn]=ut[fn].evaluate(mt,Jt);return Qt},Oe.reduce=(Dt,Qt)=>{Jt.properties=Qt;for(const fn of un)mt.accumulated=Dt[fn],Dt[fn]=ht[fn].evaluate(mt,Jt)},Oe}(oe)).load(He.features):function(Oe,qe){return new _t(Oe,qe)}(He,oe.geojsonVtOptions)}catch(Oe){return ce(Oe)}this.loaded={};const Ve={};if(we){const Oe=we.finish();Oe&&(Ve.resourceTiming={},Ve.resourceTiming[oe.source]=JSON.parse(JSON.stringify(Oe)))}ce(null,Ve)}})}reloadTile(oe,ce){const _e=this.loaded;return _e&&_e[oe.uid]?super.reloadTile(oe,ce):this.loadTile(oe,ce)}removeSource(oe,ce){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ce()}getClusterExpansionZoom(oe,ce){try{ce(null,this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId))}catch(_e){ce(_e)}}getClusterChildren(oe,ce){try{ce(null,this._geoJSONIndex.getChildren(oe.clusterId))}catch(_e){ce(_e)}}getClusterLeaves(oe,ce){try{ce(null,this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset))}catch(_e){ce(_e)}}}class er{constructor(oe){this.self=oe,this.actor=new l.C(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:R,geojson:hn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ce,_e)=>{if(this.workerSourceTypes[ce])throw new Error(`Worker source with name "${ce}" already registered.`);this.workerSourceTypes[ce]=_e},this.self.registerRTLTextPlugin=ce=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.applyArabicShaping=ce.applyArabicShaping,l.bD.processBidirectionalText=ce.processBidirectionalText,l.bD.processStyledBidirectionalText=ce.processStyledBidirectionalText}}setReferrer(oe,ce){this.referrer=ce}setImages(oe,ce,_e){this.availableImages[oe]=ce;for(const we in this.workerSources[oe]){const Ce=this.workerSources[oe][we];for(const He in Ce)Ce[He].availableImages=ce}_e()}setLayers(oe,ce,_e){this.getLayerIndex(oe).replace(ce),_e()}updateLayers(oe,ce,_e){this.getLayerIndex(oe).update(ce.layers,ce.removedIds),_e()}loadTile(oe,ce,_e){this.getWorkerSource(oe,ce.type,ce.source).loadTile(ce,_e)}loadDEMTile(oe,ce,_e){this.getDEMWorkerSource(oe,ce.source).loadTile(ce,_e)}reloadTile(oe,ce,_e){this.getWorkerSource(oe,ce.type,ce.source).reloadTile(ce,_e)}abortTile(oe,ce,_e){this.getWorkerSource(oe,ce.type,ce.source).abortTile(ce,_e)}removeTile(oe,ce,_e){this.getWorkerSource(oe,ce.type,ce.source).removeTile(ce,_e)}removeDEMTile(oe,ce){this.getDEMWorkerSource(oe,ce.source).removeTile(ce)}removeSource(oe,ce,_e){if(!this.workerSources[oe]||!this.workerSources[oe][ce.type]||!this.workerSources[oe][ce.type][ce.source])return;const we=this.workerSources[oe][ce.type][ce.source];delete this.workerSources[oe][ce.type][ce.source],we.removeSource!==void 0?we.removeSource(ce,_e):_e()}loadWorkerSource(oe,ce,_e){try{this.self.importScripts(ce.url),_e()}catch(we){_e(we.toString())}}syncRTLPluginState(oe,ce,_e){try{l.bD.setState(ce);const we=l.bD.getPluginURL();if(l.bD.isLoaded()&&!l.bD.isParsed()&&we!=null){this.self.importScripts(we);const Ce=l.bD.isParsed();_e(Ce?void 0:new Error(`RTL Text Plugin failed to import scripts from ${we}`),Ce)}}catch(we){_e(we.toString())}}getAvailableImages(oe){let ce=this.availableImages[oe];return ce||(ce=[]),ce}getLayerIndex(oe){let ce=this.layerIndexes[oe];return ce||(ce=this.layerIndexes[oe]=new b),ce}getWorkerSource(oe,ce,_e){return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][ce]||(this.workerSources[oe][ce]={}),this.workerSources[oe][ce][_e]||(this.workerSources[oe][ce][_e]=new this.workerSourceTypes[ce]({send:(we,Ce,He)=>{this.actor.send(we,Ce,He,oe)}},this.getLayerIndex(oe),this.getAvailableImages(oe))),this.workerSources[oe][ce][_e]}getDEMWorkerSource(oe,ce){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][ce]||(this.demWorkerSources[oe][ce]=new J),this.demWorkerSources[oe][ce]}}return l.i()&&(self.worker=new er(self)),er}),d(["./shared"],function(l){var b="3.6.2";class w{static testProp(r){if(!w.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in w.docStyle)return r[u];return r[0]}static create(r,u,f){const m=window.document.createElement(r);return u!==void 0&&(m.className=u),f&&f.appendChild(m),m}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(r,u){r.style[w.transformProp]=u}static addEventListener(r,u,f,m={}){r.addEventListener(u,f,"passive"in m?m:m.capture)}static removeEventListener(r,u,f,m={}){r.removeEventListener(u,f,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(r,u){const f=r.getBoundingClientRect();return new l.P(u.clientX-f.left-r.clientLeft,u.clientY-f.top-r.clientTop)}static touchPos(r,u){const f=r.getBoundingClientRect(),m=[];for(let _=0;_<u.length;_++)m.push(new l.P(u[_].clientX-f.left-r.clientLeft,u[_].clientY-f.top-r.clientTop));return m}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const I={supported:!1,testSupport:function(y){!R&&k&&(J?Y(y):C=y)}};let C,k,R=!1,J=!1;function Y(y){const r=y.createTexture();y.bindTexture(y.TEXTURE_2D,r);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,k),y.isContextLost())return;I.supported=!0}catch{}y.deleteTexture(r),R=!0}var de,G;typeof document<"u"&&(k=document.createElement("img"),k.onload=function(){C&&Y(C),C=null,J=!0},k.onerror=function(){R=!0,C=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let r,u,f,m;y.resetRequestQueue=()=>{r=[],u=0,f=0,m={}},y.addThrottleControl=N=>{const X=f++;return m[X]=N,X},y.removeThrottleControl=N=>{delete m[N],A()},y.getImage=(N,X,K=!0)=>{I.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*");const he={requestParameters:N,supportImageRefresh:K,callback:X,cancelled:!1,completed:!1,cancel:()=>{he.completed||he.cancelled||(he.cancelled=!0,he.innerRequest&&(he.innerRequest.cancel(),u--),A())}};return r.push(he),A(),he};const _=N=>{const{requestParameters:X,supportImageRefresh:K,callback:he}=N;return l.e(X,{type:"image"}),(K!==!1||l.i()||l.g(X.url)||X.headers&&!Object.keys(X.headers).reduce((Me,ke)=>Me&&ke==="accept",!0)?l.m:L)(X,(Me,ke,Fe,Ie)=>{T(N,he,Me,ke,Fe,Ie)})},T=(N,X,K,he,Me,ke)=>{K?X(K):he instanceof HTMLImageElement||l.a(he)?X(null,he):he&&((Fe,Ie)=>{typeof createImageBitmap=="function"?l.b(Fe,Ie):l.d(Fe,Ie)})(he,(Fe,Ie)=>{Fe!=null?X(Fe):Ie!=null&&X(null,Ie,{cacheControl:Me,expires:ke})}),N.cancelled||(N.completed=!0,u--,A())},A=()=>{const N=(()=>{const X=Object.keys(m);let K=!1;if(X.length>0){for(const he of X)if(K=m[he](),K)break}return K})()?l.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let X=u;X<N&&r.length>0;X++){const K=r.shift();if(K.cancelled){X--;continue}const he=_(K);u++,K.innerRequest=he}},L=(N,X)=>{const K=new Image,he=N.url;let Me=!1;const ke=N.credentials;return ke&&ke==="include"?K.crossOrigin="use-credentials":(ke&&ke==="same-origin"||!l.s(he))&&(K.crossOrigin="anonymous"),K.fetchPriority="high",K.onload=()=>{X(null,K),K.onerror=K.onload=null},K.onerror=()=>{Me||X(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),K.onerror=K.onload=null},K.src=he,{cancel:()=>{Me=!0,K.src=""}}}}(de||(de={})),de.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(G||(G={}));class ${constructor(r){this._transformRequestFn=r}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}normalizeSpriteURL(r,u,f){const m=function(_){const T=_.match(D);if(!T)throw new Error(`Unable to parse URL "${_}"`);return{protocol:T[1],authority:T[2],path:T[3]||"/",params:T[4]?T[4].split("&"):[]}}(r);return m.path+=`${u}${f}`,function(_){const T=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${T}`}(m)}setTransformRequest(r){this._transformRequestFn=r}}const D=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ne(y){var r=new l.A(3);return r[0]=y[0],r[1]=y[1],r[2]=y[2],r}var Z,U=function(y,r,u){return y[0]=r[0]-u[0],y[1]=r[1]-u[1],y[2]=r[2]-u[2],y};Z=new l.A(3),l.A!=Float32Array&&(Z[0]=0,Z[1]=0,Z[2]=0);var E=function(y){var r=y[0],u=y[1];return r*r+u*u};function M(y){const r=[];if(typeof y=="string")r.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:f,url:m}of y){const _=`${f}${m}`;u.indexOf(_)===-1&&(u.push(_),r.push({id:f,url:m}))}}return r}function H(y,r,u,f,m){if(f)return void y(f);if(m!==Object.values(r).length||m!==Object.values(u).length)return;const _={};for(const T in r){_[T]={};const A=l.h.getImageCanvasContext(u[T]),L=r[T];for(const N in L){const{width:X,height:K,x:he,y:Me,sdf:ke,pixelRatio:Fe,stretchX:Ie,stretchY:Ke,content:tt}=L[N];_[T][N]={data:null,pixelRatio:Fe,sdf:ke,stretchX:Ie,stretchY:Ke,content:tt,spriteData:{width:X,height:K,x:he,y:Me,context:A}}}}y(null,_)}(function(){var y=new l.A(2);l.A!=Float32Array&&(y[0]=0,y[1]=0)})();class q{constructor(r,u,f,m){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(u,m)}update(r,u,f){const{width:m,height:_}=r,T=!(this.size&&this.size[0]===m&&this.size[1]===_||f),{context:A}=this,{gl:L}=A;if(this.useMipmap=!!(u&&u.useMipmap),L.bindTexture(L.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===L.RGBA&&(!u||u.premultiply!==!1)),T)this.size=[m,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.a(r)?L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,L.UNSIGNED_BYTE,r):L.texImage2D(L.TEXTURE_2D,0,this.format,m,_,0,this.format,L.UNSIGNED_BYTE,r.data);else{const{x:N,y:X}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.a(r)?L.texSubImage2D(L.TEXTURE_2D,0,N,X,L.RGBA,L.UNSIGNED_BYTE,r):L.texSubImage2D(L.TEXTURE_2D,0,N,X,m,_,L.RGBA,L.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&L.generateMipmap(L.TEXTURE_2D)}bind(r,u,f){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),f!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,f||r),this.filter=r),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ee(y){const{userImage:r}=y;return!!(r&&r.render&&r.render())&&(y.data.replace(new Uint8Array(r.data.buffer)),!0)}class ve extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const f=u.spriteData;u.data=new l.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let f=!0;const m=u.data||u.spriteData;return this._validateStretch(u.stretchX,m&&m.width)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,m&&m.height)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,u){if(!r)return!0;let f=0;for(const m of r){if(m[0]<f||m[1]<m[0]||u<m[1])return!1;f=m[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const f=u.spriteData,m=f&&f.width||u.data.width,_=f&&f.height||u.data.height;return!(r[0]<0||m<r[0]||r[1]<0||_<r[1]||r[2]<0||m<r[2]||r[3]<0||_<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,f=!0){const m=this.getImage(r);if(f&&(m.data.width!==u.data.width||m.data.height!==u.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,u){let f=!0;if(!this.isLoaded())for(const m of r)this.images[m]||(f=!1);this.isLoaded()||f?this._notify(r,u):this.requestors.push({ids:r,callback:u})}_notify(r,u){const f={};for(const m of r){let _=this.getImage(m);_||(this.fire(new l.k("styleimagemissing",{id:m})),_=this.getImage(m)),_?f[m]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],f=this.getImage(r);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const m={w:f.data.width+2,h:f.data.height+2,x:0,y:0},_=new l.I(m,f);this.patterns[r]={bin:m,position:_}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new q(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const _ in this.patterns)r.push(this.patterns[_].bin);const{w:u,h:f}=l.p(r),m=this.atlasImage;m.resize({width:u||1,height:f||1});for(const _ in this.patterns){const{bin:T}=this.patterns[_],A=T.x+1,L=T.y+1,N=this.getImage(_).data,X=N.width,K=N.height;l.R.copy(N,m,{x:0,y:0},{x:A,y:L},{width:X,height:K}),l.R.copy(N,m,{x:0,y:K-1},{x:A,y:L-1},{width:X,height:1}),l.R.copy(N,m,{x:0,y:0},{x:A,y:L+K},{width:X,height:1}),l.R.copy(N,m,{x:X-1,y:0},{x:A-1,y:L},{width:1,height:K}),l.R.copy(N,m,{x:0,y:0},{x:A+X,y:L},{width:1,height:K})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.getImage(u);f||l.w(`Image with ID: "${u}" was not found`),ee(f)&&this.updateImage(u,f)}}}const xe=1e20;function be(y,r,u,f,m,_,T,A,L){for(let N=r;N<r+f;N++)te(y,u*_+N,_,m,T,A,L);for(let N=u;N<u+m;N++)te(y,N*_+r,1,f,T,A,L)}function te(y,r,u,f,m,_,T){_[0]=0,T[0]=-xe,T[1]=xe,m[0]=y[r];for(let A=1,L=0,N=0;A<f;A++){m[A]=y[r+A*u];const X=A*A;do{const K=_[L];N=(m[A]-m[K]+X-K*K)/(A-K)/2}while(N<=T[L]&&--L>-1);L++,_[L]=A,T[L]=N,T[L+1]=xe}for(let A=0,L=0;A<f;A++){for(;T[L+1]<A;)L++;const N=_[L],X=A-N;y[r+A*u]=m[N]+X*X}}class ue{constructor(r,u){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={}}setURL(r){this.url=r}getGlyphs(r,u){const f=[];for(const m in r)for(const _ of r[m])f.push({stack:m,id:_});l.o(f,({stack:m,id:_},T)=>{let A=this.entries[m];A||(A=this.entries[m]={glyphs:{},requests:{},ranges:{}});let L=A.glyphs[_];if(L!==void 0)return void T(null,{stack:m,id:_,glyph:L});if(L=this._tinySDF(A,m,_),L)return A.glyphs[_]=L,void T(null,{stack:m,id:_,glyph:L});const N=Math.floor(_/256);if(256*N>65535)return void T(new Error("glyphs > 65535 not supported"));if(A.ranges[N])return void T(null,{stack:m,id:_,glyph:L});if(!this.url)return void T(new Error("glyphsUrl is not set"));let X=A.requests[N];X||(X=A.requests[N]=[],ue.loadGlyphRange(m,N,this.url,this.requestManager,(K,he)=>{if(he){for(const Me in he)this._doesCharSupportLocalGlyph(+Me)||(A.glyphs[+Me]=he[+Me]);A.ranges[N]=!0}for(const Me of X)Me(K,he);delete A.requests[N]})),X.push((K,he)=>{K?T(K):he&&T(null,{stack:m,id:_,glyph:he[_]||null})})},(m,_)=>{if(m)u(m);else if(_){const T={};for(const{stack:A,id:L,glyph:N}of _)(T[A]||(T[A]={}))[L]=N&&{id:N.id,bitmap:N.bitmap.clone(),metrics:N.metrics};u(null,T)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](r)||l.u["Hangul Syllables"](r)||l.u.Hiragana(r)||l.u.Katakana(r))}_tinySDF(r,u,f){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let _=r.tinySDF;if(!_){let A="400";/bold/i.test(u)?A="900":/medium/i.test(u)?A="500":/light/i.test(u)&&(A="200"),_=r.tinySDF=new ue.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:A})}const T=_.draw(String.fromCharCode(f));return{id:f,bitmap:new l.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}ue.loadGlyphRange=function(y,r,u,f,m){const _=256*r,T=_+255,A=f.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${_}-${T}`),G.Glyphs);l.l(A,(L,N)=>{if(L)m(L);else if(N){const X={};for(const K of l.n(N))X[K.id]=K;m(null,X)}})},ue.TinySDF=class{constructor({fontSize:y=24,buffer:r=3,radius:u=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:_="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=u;const A=this.size=y+4*r,L=this._createCanvas(A),N=this.ctx=L.getContext("2d",{willReadFrequently:!0});N.font=`${T} ${_} ${y}px ${m}`,N.textBaseline="alphabetic",N.textAlign="left",N.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(y){const r=document.createElement("canvas");return r.width=r.height=y,r}draw(y){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:_}=this.ctx.measureText(y),T=Math.ceil(u),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-m))),L=Math.min(this.size-this.buffer,T+Math.ceil(f)),N=A+2*this.buffer,X=L+2*this.buffer,K=Math.max(N*X,0),he=new Uint8ClampedArray(K),Me={data:he,width:N,height:X,glyphWidth:A,glyphHeight:L,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(A===0||L===0)return Me;const{ctx:ke,buffer:Fe,gridInner:Ie,gridOuter:Ke}=this;ke.clearRect(Fe,Fe,A,L),ke.fillText(y,Fe,Fe+T);const tt=ke.getImageData(Fe,Fe,A,L);Ke.fill(xe,0,K),Ie.fill(0,0,K);for(let De=0;De<L;De++)for(let Ye=0;Ye<A;Ye++){const ot=tt.data[4*(De*A+Ye)+3]/255;if(ot===0)continue;const st=(De+Fe)*N+Ye+Fe;if(ot===1)Ke[st]=0,Ie[st]=xe;else{const dt=.5-ot;Ke[st]=dt>0?dt*dt:0,Ie[st]=dt<0?dt*dt:0}}be(Ke,0,0,N,X,N,this.f,this.v,this.z),be(Ie,Fe,Fe,A,L,N,this.f,this.v,this.z);for(let De=0;De<K;De++){const Ye=Math.sqrt(Ke[De])-Math.sqrt(Ie[De]);he[De]=Math.round(255-255*(Ye/this.radius+this.cutoff))}return Me}};class re{constructor(){this.specification=l.v.light.position}possiblyEvaluate(r,u){return l.z(r.expression.evaluate(u))}interpolate(r,u,f){return{x:l.B.number(r.x,u.x,f),y:l.B.number(r.y,u.y,f),z:l.B.number(r.z,u.z,f)}}}let ie;class ye extends l.E{constructor(r){super(),ie=ie||new l.r({anchor:new l.D(l.v.light.anchor),position:new re,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(ie),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(l.t,r,u))for(const f in r){const m=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,f){return(!f||f.validate!==!1)&&l.x(this,r.call(l.y,l.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}}class Te{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const f=r.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,u)),this.dashEntry[f]}getDashRanges(r,u,f){const m=[];let _=r.length%2==1?-r[r.length-1]*f:0,T=r[0]*f,A=!0;m.push({left:_,right:T,isDash:A,zeroLength:r[0]===0});let L=r[0];for(let N=1;N<r.length;N++){A=!A;const X=r[N];_=L*f,L+=X,T=L*f,m.push({left:_,right:T,isDash:A,zeroLength:X===0})}return m}addRoundDash(r,u,f){const m=u/2;for(let _=-f;_<=f;_++){const T=this.width*(this.nextRow+f+_);let A=0,L=r[A];for(let N=0;N<this.width;N++){N/L.right>1&&(L=r[++A]);const X=Math.abs(N-L.left),K=Math.abs(N-L.right),he=Math.min(X,K);let Me;const ke=_/f*(m+1);if(L.isDash){const Fe=m-Math.abs(ke);Me=Math.sqrt(he*he+Fe*Fe)}else Me=m-Math.sqrt(he*he+ke*ke);this.data[T+N]=Math.max(0,Math.min(255,Me+128))}}}addRegularDash(r){for(let A=r.length-1;A>=0;--A){const L=r[A],N=r[A+1];L.zeroLength?r.splice(A,1):N&&N.isDash===L.isDash&&(N.left=L.left,r.splice(A,1))}const u=r[0],f=r[r.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const m=this.width*this.nextRow;let _=0,T=r[_];for(let A=0;A<this.width;A++){A/T.right>1&&(T=r[++_]);const L=Math.abs(A-T.left),N=Math.abs(A-T.right),X=Math.min(L,N);this.data[m+A]=Math.max(0,Math.min(255,(T.isDash?X:-X)+128))}}addDash(r,u){const f=u?7:0,m=2*f+1;if(this.nextRow+m>this.height)return l.w("LineAtlas out of space"),null;let _=0;for(let A=0;A<r.length;A++)_+=r[A];if(_!==0){const A=this.width/_,L=this.getDashRanges(r,this.width,A);u?this.addRoundDash(L,A,f):this.addRegularDash(L)}const T={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:_};return this.nextRow+=m,this.dirty=!0,T}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Se{constructor(r,u,f){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=f;const m=this.workerPool.acquire(f);for(let _=0;_<m.length;_++){const T=new l.C(m[_],u,f);T.name=`Worker ${_}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u,f){l.o(this.actors,(m,_)=>{m.send(r,u,_)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function $e(y,r,u){const f=function(m,_){if(m)return u(m);if(_){const T=l.F(l.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(T.vectorLayers=_.vector_layers,T.vectorLayerIds=T.vectorLayers.map(A=>A.id)),u(null,T)}};return y.url?l.f(r.transformRequest(y.url,G.Source),f):l.h.frame(()=>f(null,y))}class Pe{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof l.L?new l.L(r.lng,r.lat):l.L.convert(r),this}setSouthWest(r){return this._sw=r instanceof l.L?new l.L(r.lng,r.lat):l.L.convert(r),this}extend(r){const u=this._sw,f=this._ne;let m,_;if(r instanceof l.L)m=r,_=r;else{if(!(r instanceof Pe))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Pe.convert(r)):this.extend(l.L.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(l.L.convert(r)):this;if(m=r._sw,_=r._ne,!m||!_)return this}return u||f?(u.lng=Math.min(m.lng,u.lng),u.lat=Math.min(m.lat,u.lat),f.lng=Math.max(_.lng,f.lng),f.lat=Math.max(_.lat,f.lat)):(this._sw=new l.L(m.lng,m.lat),this._ne=new l.L(_.lng,_.lat)),this}getCenter(){return new l.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.L(this.getWest(),this.getNorth())}getSouthEast(){return new l.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:f}=l.L.convert(r);let m=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(r){return r instanceof Pe?r:r&&new Pe(r)}static fromLngLat(r,u=0){const f=360*u/40075017,m=f/Math.cos(Math.PI/180*r.lat);return new Pe(new l.L(r.lng-m,r.lat-f),new l.L(r.lng+m,r.lat+f))}}class ze{constructor(r,u,f){this.bounds=Pe.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),f=Math.floor(l.G(this.bounds.getWest())*u),m=Math.floor(l.H(this.bounds.getNorth())*u),_=Math.ceil(l.G(this.bounds.getEast())*u),T=Math.ceil(l.H(this.bounds.getSouth())*u);return r.x>=f&&r.x<_&&r.y>=m&&r.y<T}}class Xe extends l.E{constructor(r,u,f,m){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=$e(this._options,this.map._requestManager,(_,T)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new l.j(_)):T&&(l.e(this,T),T.bounds&&(this.tileBounds=new ze(T.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.e({},this._options),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.F(u,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(f,G.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(T,A){return delete r.request,r.aborted?u(null):T&&T.status!==404?u(T):(A&&A.resourceTiming&&(r.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&r.setExpiryData(A),r.loadVectorData(A,this.map.painter),u(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=u:r.request=r.actor.send("reloadTile",m,_.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",m,_.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ze extends l.E{constructor(r,u,f,m){super(),this.id=r,this.dispatcher=f,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},u),l.e(this,l.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=$e(this._options,this.map._requestManager,(r,u)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new l.j(r)):u&&(l.e(this,u),u.bounds&&(this.tileBounds=new ze(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}serialize(){return l.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=de.getImage(this.map._requestManager.transformRequest(f,G.Tile),(m,_,T)=>{if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(m)r.state="errored",u(m);else if(_){this.map._refreshExpiredTiles&&T&&r.setExpiryData(T);const A=this.map.painter.context,L=A.gl;r.texture=this.map.painter.getTileTexture(_.width),r.texture?r.texture.update(_,{useMipmap:!0}):(r.texture=new q(A,_,L.RGBA,{useMipmap:!0}),r.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),A.extTextureFilterAnisotropic&&L.texParameterf(L.TEXTURE_2D,A.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,A.extTextureFilterAnisotropicMax)),r.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(r,u){r.request&&(r.request.cancel(),delete r.request),u()}unloadTile(r,u){r.texture&&this.map.painter.saveTileTexture(r.texture),u()}hasTransition(){return!1}}class nt extends Ze{constructor(r,u,f,m){super(r,u,f,m),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(f,G.Tile);function _(T,A){T&&(r.state="errored",u(T)),A&&(r.dem=A,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",u(null))}r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.request=de.getImage(m,(T,A,L)=>l._(this,void 0,void 0,function*(){if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(T)r.state="errored",u(T);else if(A){this.map._refreshExpiredTiles&&r.setExpiryData(L);const N=l.a(A)&&l.J()?A:yield function(K){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.K()){const he=K.width+2,Me=K.height+2;try{return new l.R({width:he,height:Me},yield l.M(K,-1,-1,he,Me))}catch{}}return l.h.getImageData(K,1)})}(A),X={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:N,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",X,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(r){const u=r.canonical,f=Math.pow(2,u.z),m=(u.x-1+f)%f,_=u.x===0?r.wrap-1:r.wrap,T=(u.x+1+f)%f,A=u.x+1===f?r.wrap+1:r.wrap,L={};return L[new l.O(r.overscaledZ,_,u.z,m,u.y).key]={backfilled:!1},L[new l.O(r.overscaledZ,A,u.z,T,u.y).key]={backfilled:!1},u.y>0&&(L[new l.O(r.overscaledZ,_,u.z,m,u.y-1).key]={backfilled:!1},L[new l.O(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},L[new l.O(r.overscaledZ,A,u.z,T,u.y-1).key]={backfilled:!1}),u.y+1<f&&(L[new l.O(r.overscaledZ,_,u.z,m,u.y+1).key]={backfilled:!1},L[new l.O(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},L[new l.O(r.overscaledZ,A,u.z,T,u.y+1).key]={backfilled:!1}),L}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class ct extends l.E{constructor(r,u,f,m){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.e({},this._options,{type:this.type,data:this._data}),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(m),this._data=u.data,this._options=l.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=l.N/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:l.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.N,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},u),this}getClusterChildren(r,u){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},u),this}getClusterLeaves(r,u,f,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:u,offset:f},m),this}_updateWorkerData(r){const u=l.e({},this.workerOptions);r?u.dataDiff=r:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(l.h.resolveURL(this._data),G.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(f,m)=>{if(this._pendingLoads--,this._removed||m&&m.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let _=null;if(m&&m.resourceTiming&&m.resourceTiming[this.id]&&(_=m.resourceTiming[this.id].slice(0)),f)return void this.fire(new l.j(f));const T={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&l.e(T,{resourceTiming:_}),this.fire(new l.k("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(r,u){const f=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const m={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(f,m,(_,T)=>(delete r.request,r.unloadVectorData(),r.aborted?u(null):_?u(_):(r.loadVectorData(T,this.map.painter,f==="reloadTile"),u(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var vt=l.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class It extends l.E{constructor(r,u,f,m){super(),this.load=(_,T)=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=de.getImage(this.map._requestManager.transformRequest(this.url,G.Image),(A,L)=>{this._request=null,this._loaded=!0,A?this.fire(new l.j(A)):L&&(this.image=L,_&&(this.coordinates=_),T&&T(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,T=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,vt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new q(_,this.image,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let A=!1;for(const L in this.tiles){const N=this.tiles[L];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture,A=!0)}A&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=r,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(l.U.fromLngLat);this.tileID=function(m){let _=1/0,T=1/0,A=-1/0,L=-1/0;for(const he of m)_=Math.min(_,he.x),T=Math.min(T,he.y),A=Math.max(A,he.x),L=Math.max(L,he.y);const N=Math.max(A-_,L-T),X=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),K=Math.pow(2,X);return new l.W(X,Math.floor((_+A)/2*K),Math.floor((T+L)/2*K))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new l.V,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,l.N,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,l.N),this._boundsArray.emplaceBack(f[2].x,f[2].y,l.N,l.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(r,u){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},u(null)):(r.state="errored",u(null))}hasTransition(){return!1}}class ft extends It{constructor(r,u,f,m){super(r,u,f,m),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const T of _.urls)this.urls.push(this.map._requestManager.transformRequest(T,G.Source).url);l.X(this.urls,(T,A)=>{this._loaded=!0,T?this.fire(new l.j(T)):A&&(this.video=A,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,T=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,vt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE),T.texSubImage2D(T.TEXTURE_2D,0,0,0,T.RGBA,T.UNSIGNED_BYTE,this.video)):(this.texture=new q(_,this.video,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let A=!1;for(const L in this.tiles){const N=this.tiles[L];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture,A=!0)}A&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new l.j(new l.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class St extends It{constructor(r,u,f,m){super(r,u,f,m),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const T=this.map.painter.context,A=T.gl;this.boundsBuffer||(this.boundsBuffer=T.createVertexBuffer(this._boundsArray,vt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new q(T,this.canvas,A.RGBA,{premultiply:!0});let L=!1;for(const N in this.tiles){const X=this.tiles[N];X.state!=="loaded"&&(X.state="loaded",X.texture=this.texture,L=!0)}L&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(T=>typeof T!="number"))||this.fire(new l.j(new l.Y(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.Y(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.j(new l.Y(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.Y(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.Y(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Gt={},Ut=y=>{switch(y){case"geojson":return ct;case"image":return It;case"raster":return Ze;case"raster-dem":return nt;case"vector":return Xe;case"video":return ft;case"canvas":return St}return Gt[y]};function cn(y,r){const u=l.Z();return l.$(u,u,[1,1,0]),l.a0(u,u,[.5*y.width,.5*y.height,1]),l.a1(u,u,y.calculatePosMatrix(r.toUnwrapped()))}function xn(y,r,u,f,m,_){const T=function(K,he,Me){if(K)for(const ke of K){const Fe=he[ke];if(Fe&&Fe.source===Me&&Fe.type==="fill-extrusion")return!0}else for(const ke in he){const Fe=he[ke];if(Fe.source===Me&&Fe.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,y.id),A=_.maxPitchScaleFactor(),L=y.tilesIn(f,A,T);L.sort(yn);const N=[];for(const K of L)N.push({wrappedTileID:K.tileID.wrapped().key,queryResults:K.tile.queryRenderedFeatures(r,u,y._state,K.queryGeometry,K.cameraQueryGeometry,K.scale,m,_,A,cn(y.transform,K.tileID))});const X=function(K){const he={},Me={};for(const ke of K){const Fe=ke.queryResults,Ie=ke.wrappedTileID,Ke=Me[Ie]=Me[Ie]||{};for(const tt in Fe){const De=Fe[tt],Ye=Ke[tt]=Ke[tt]||{},ot=he[tt]=he[tt]||[];for(const st of De)Ye[st.featureIndex]||(Ye[st.featureIndex]=!0,ot.push(st))}}return he}(N);for(const K in X)X[K].forEach(he=>{const Me=he.feature,ke=y.getFeatureState(Me.layer["source-layer"],Me.id);Me.source=Me.layer.source,Me.layer["source-layer"]&&(Me.sourceLayer=Me.layer["source-layer"]),Me.state=ke});return X}function yn(y,r){const u=y.tileID,f=r.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class sn{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=l.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const u=r+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,_){const T={};if(!_)return T;for(const A of m){const L=A.layerIds.map(N=>_.getLayer(N)).filter(Boolean);if(L.length!==0){A.layers=L,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(N=>L.filter(X=>X.id===N)[0]));for(const N of L)T[N.id]=A}}return T}(r.buckets,u.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.a4){if(this.hasSymbolBuckets=!0,!f)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.a4&&_.hasRTLText){this.hasRTLText=!0,l.a5();break}}this.queryPadding=0;for(const m in this.buckets){const _=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(_))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.a3}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const m=this.buckets[f];m.uploadPending()&&m.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new q(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new q(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,f,m,_,T,A,L,N,X){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:_,scale:T,tileSize:this.tileSize,pixelPosMatrix:X,transform:L,params:A,queryPadding:this.queryPadding*N},r,u,f):{}}querySourceFeatures(r,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const m=f.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",T=m._geojsonTileLayer||m[_];if(!T)return;const A=l.a6(u&&u.filter),{z:L,x:N,y:X}=this.tileID.canonical,K={z:L,x:N,y:X};for(let he=0;he<T.length;he++){const Me=T.feature(he);if(A.needGeometry){const Ie=l.a7(Me,!0);if(!A.filter(new l.a8(this.tileID.overscaledZ),Ie,this.tileID.canonical))continue}else if(!A.filter(new l.a8(this.tileID.overscaledZ),Me))continue;const ke=f.getId(Me,_),Fe=new l.a9(Me,L,N,X,ke);Fe.tile=K,r.push(Fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const f=l.aa(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let m=!1;if(this.expirationTime>f)m=!1;else if(u)if(this.expirationTime<u)m=!0;else{const _=this.expirationTime-u;_?this.expirationTime=f+Math.max(_,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!u.style.hasLayer(m))continue;const _=this.buckets[m],T=_.layers[0].sourceLayer||"_geojsonTileLayer",A=f[T],L=r[T];if(!A||!L||Object.keys(L).length===0)continue;_.update(L,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const N=u&&u.style&&u.style.getLayer(m);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=l.h.now()+r}setDependencies(r,u){const f={};for(const m of u)f[m]=!0;this.dependencies[r]=f}hasDependency(r,u){for(const f of r){const m=this.dependencies[f];if(m){for(const _ of u)if(m[_])return!0}}return!1}}class gn{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,f){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const _={value:u,timeout:void 0};if(f!==void 0&&(_.timeout=setTimeout(()=>{this.remove(r,_)},f)),this.data[m].push(_),this.order.push(m),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const f=r.wrapped().key,m=u===void 0?0:this.data[f].indexOf(u),_=this.data[f][m];return this.data[f].splice(m,1),_.timeout&&clearTimeout(_.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(_.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const f in this.data)for(const m of this.data[f])r(m.value)||u.push(m);for(const f of u)this.remove(f.value.tileID,f)}}class se{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,f){const m=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},l.e(this.stateChanges[r][m],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const _ in this.state[r])_!==m&&(this.deletedStates[r][_]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const _ in this.state[r][m])f[_]||(this.deletedStates[r][m][_]=null)}else for(const _ in f)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][_]===null&&delete this.deletedStates[r][m][_]}removeFeatureState(r,u,f){if(this.deletedStates[r]===null)return;const m=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&u!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][f]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(f in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][f]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,u){const f=String(u),m=l.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const _=this.deletedStates[r][u];if(_===null)return{};for(const T in _)delete m[T]}return m}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const f={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const _={};for(const T in this.stateChanges[m])this.state[m][T]||(this.state[m][T]={}),l.e(this.state[m][T],this.stateChanges[m][T]),_[T]=this.state[m][T];f[m]=_}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const _={};if(this.deletedStates[m]===null)for(const T in this.state[m])_[T]={},this.state[m][T]={};else for(const T in this.deletedStates[m]){if(this.deletedStates[m][T]===null)this.state[m][T]={};else for(const A of Object.keys(this.deletedStates[m][T]))delete this.state[m][T][A];_[T]=this.state[m][T]}f[m]=f[m]||{},l.e(f[m],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const m in r)r[m].setFeatureState(f,u)}}class j extends l.E{constructor(r,u,f){super(),this.id=r,this.dispatcher=f,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,_,T,A)=>{const L=new(Ut(_.type))(m,_,T,A);if(L.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${L.id}`);return L})(r,u,f,this),this._tiles={},this._cache=new gn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new se,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u){return this._source.loadTile(r,u)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new l.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(O).map(r=>r.key)}getRenderableIds(r){const u=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&u.push(this._tiles[f]);return r?u.sort((f,m)=>{const _=f.tileID,T=m.tileID,A=new l.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),L=new l.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-T.overscaledZ||L.y-A.y||L.x-A.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(O).map(f=>f.key)}hasRenderableParent(r){const u=this.findLoadedParent(r,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(r,u){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(u||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,u){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,r,u)))}_tileLoaded(r,u,f,m){if(m)return r.state="errored",void(m.status!==404?this._source.fire(new l.j(m,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=l.h.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let m=0;m<u.length;m++){const _=u[m];if(r.neighboringTiles&&r.neighboringTiles[_]){const T=this.getTileByID(_);f(r,T),f(T,r)}}function f(m,_){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let T=_.tileID.canonical.x-m.tileID.canonical.x;const A=_.tileID.canonical.y-m.tileID.canonical.y,L=Math.pow(2,m.tileID.canonical.z),N=_.tileID.key;T===0&&A===0||Math.abs(A)>1||(Math.abs(T)>1&&(Math.abs(T+L)===1?T+=L:Math.abs(T-L)===1&&(T-=L)),_.dem&&m.dem&&(m.dem.backfillBorder(_.dem,T,A),m.neighboringTiles&&m.neighboringTiles[N]&&(m.neighboringTiles[N].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u,f,m){for(const _ in this._tiles){let T=this._tiles[_];if(m[_]||!T.hasData()||T.tileID.overscaledZ<=u||T.tileID.overscaledZ>f)continue;let A=T.tileID;for(;T&&T.tileID.overscaledZ>u+1;){const N=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[N.key],T&&T.hasData()&&(A=N)}let L=A;for(;L.overscaledZ>u;)if(L=L.scaledTo(L.overscaledZ-1),r[L.key]){m[A.key]=A;break}}}findLoadedParent(r,u){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=r.overscaledZ-1;f>=u;f--){const m=r.scaledTo(f),_=this._getLoadedTile(m);if(_)return _}}_getLoadedTile(r){const u=this._tiles[r.key];return u&&u.hasData()?u:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(u*f*(this._maxTileCacheZoomLevels===null?l.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(_)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const f={};for(const m in this._tiles){const _=this._tiles[m];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),f[_.tileID.key]=_}this._tiles=f;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(r,u){if(this.transform=r,this.terrain=u,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(X=>new l.O(X.canonical.z,X.wrap,X.canonical.z,X.canonical.x,X.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(X=>this._source.hasTile(X)))):f=[];const m=r.coveringZoomLevel(this._source),_=Math.max(m-j.maxOverzooming,this._source.minzoom),T=Math.max(m+j.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const X={};for(const K of f)if(K.canonical.z>this._source.minzoom){const he=K.scaledTo(K.canonical.z-1);X[he.key]=he;const Me=K.scaledTo(Math.max(this._source.minzoom,Math.min(K.canonical.z,5)));X[Me.key]=Me}f=f.concat(Object.values(X))}const A=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const L=this._updateRetainedTiles(f,m);if(pe(this._source.type)){const X={},K={},he=Object.keys(L),Me=l.h.now();for(const ke of he){const Fe=L[ke],Ie=this._tiles[ke];if(!Ie||Ie.fadeEndTime!==0&&Ie.fadeEndTime<=Me)continue;const Ke=this.findLoadedParent(Fe,_);Ke&&(this._addTile(Ke.tileID),X[Ke.tileID.key]=Ke.tileID),K[ke]=Fe}this._retainLoadedChildren(K,m,T,L);for(const ke in X)L[ke]||(this._coveredTiles[ke]=!0,L[ke]=X[ke]);if(u){const ke={},Fe={};for(const Ie of f)this._tiles[Ie.key].hasData()?ke[Ie.key]=Ie:Fe[Ie.key]=Ie;for(const Ie in Fe){const Ke=Fe[Ie].children(this._source.maxzoom);this._tiles[Ke[0].key]&&this._tiles[Ke[1].key]&&this._tiles[Ke[2].key]&&this._tiles[Ke[3].key]&&(ke[Ke[0].key]=L[Ke[0].key]=Ke[0],ke[Ke[1].key]=L[Ke[1].key]=Ke[1],ke[Ke[2].key]=L[Ke[2].key]=Ke[2],ke[Ke[3].key]=L[Ke[3].key]=Ke[3],delete Fe[Ie])}for(const Ie in Fe){const Ke=this.findLoadedParent(Fe[Ie],this._source.minzoom);if(Ke){ke[Ke.tileID.key]=L[Ke.tileID.key]=Ke.tileID;for(const tt in ke)ke[tt].isChildOf(Ke.tileID)&&delete ke[tt]}}for(const Ie in this._tiles)ke[Ie]||(this._coveredTiles[Ie]=!0)}}for(const X in L)this._tiles[X].clearFadeHold();const N=l.ab(this._tiles,L);for(const X of N){const K=this._tiles[X];K.hasSymbolBuckets&&!K.holdingForFade()?K.setHoldDuration(this.map._fadeDuration):K.hasSymbolBuckets&&!K.symbolFadeFinished()||this._removeTile(X)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){const f={},m={},_=Math.max(u-j.maxOverzooming,this._source.minzoom),T=Math.max(u+j.maxUnderzooming,this._source.minzoom),A={};for(const L of r){const N=this._addTile(L);f[L.key]=L,N.hasData()||u<this._source.maxzoom&&(A[L.key]=L)}this._retainLoadedChildren(A,u,T,f);for(const L of r){let N=this._tiles[L.key];if(N.hasData())continue;if(u+1>this._source.maxzoom){const K=L.children(this._source.maxzoom)[0],he=this.getTile(K);if(he&&he.hasData()){f[K.key]=K;continue}}else{const K=L.children(this._source.maxzoom);if(f[K[0].key]&&f[K[1].key]&&f[K[2].key]&&f[K[3].key])continue}let X=N.wasRequested();for(let K=L.overscaledZ-1;K>=_;--K){const he=L.scaledTo(K);if(m[he.key])break;if(m[he.key]=!0,N=this.getTile(he),!N&&X&&(N=this._addTile(he)),N){const Me=N.hasData();if((X||Me)&&(f[he.key]=he),X=N.wasRequested(),Me)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const u=[];let f,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){f=this._loadedParentTiles[m.key];break}u.push(m.key);const _=m.scaledTo(m.overscaledZ-1);if(f=this._getLoadedTile(_),f)break;m=_}for(const _ of u)this._loadedParentTiles[_]=f}}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const f=u;return u||(u=new sn(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,r.key,u.state))),u.uses++,this._tiles[r.key]=u,f||this._source.fire(new l.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=u.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,f){const m=[],_=this.transform;if(!_)return m;const T=f?_.getCameraQueryGeometry(r):r,A=r.map(ke=>_.pointCoordinate(ke,this.terrain)),L=T.map(ke=>_.pointCoordinate(ke,this.terrain)),N=this.getIds();let X=1/0,K=1/0,he=-1/0,Me=-1/0;for(const ke of L)X=Math.min(X,ke.x),K=Math.min(K,ke.y),he=Math.max(he,ke.x),Me=Math.max(Me,ke.y);for(let ke=0;ke<N.length;ke++){const Fe=this._tiles[N[ke]];if(Fe.holdingForFade())continue;const Ie=Fe.tileID,Ke=Math.pow(2,_.zoom-Fe.tileID.overscaledZ),tt=u*Fe.queryPadding*l.N/Fe.tileSize/Ke,De=[Ie.getTilePoint(new l.U(X,K)),Ie.getTilePoint(new l.U(he,Me))];if(De[0].x-tt<l.N&&De[0].y-tt<l.N&&De[1].x+tt>=0&&De[1].y+tt>=0){const Ye=A.map(st=>Ie.getTilePoint(st)),ot=L.map(st=>Ie.getTilePoint(st));m.push({tile:Fe,tileID:Ie,queryGeometry:Ye,cameraQueryGeometry:ot,scale:Ke})}}return m}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(pe(this._source.type)){const r=l.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setFeatureState(r,u,f){this._state.updateState(r=r||"_geojsonTileLayer",u,f)}removeFeatureState(r,u,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,f)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,f){const m=this._tiles[r];m&&m.setDependencies(u,f)}reloadTilesForDependencies(r,u){for(const f in this._tiles)this._tiles[f].hasDependency(r,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,u))}}function O(y,r){const u=Math.abs(2*y.wrap)-+(y.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return y.overscaledZ-r.overscaledZ||f-u||r.canonical.y-y.canonical.y||r.canonical.x-y.canonical.x}function pe(y){return y==="raster"||y==="image"||y==="video"}j.maxOverzooming=10,j.maxUnderzooming=3;const Be="mapboxgl_preloaded_worker_pool";class et{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<et.workerCount;)this.workers.push(new Worker(l.c.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Be]}numActive(){return Object.keys(this.active).length}}const lt=Math.floor(l.h.hardwareConcurrency/2);let le;function z(){return le||(le=new et),le}et.workerCount=l.ac(globalThis)?Math.max(Math.min(lt,3),1):1;class B{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.ad(r,0,1);let u=1,f=this._distances[u];const m=r*this.paddedLength+this.padding;for(;f<m&&u<this._distances.length;)f=this._distances[++u];const _=u-1,T=this._distances[_],A=f-T,L=A>0?(m-T)/A:0;return this.points[_].mult(1-L).add(this.points[u].mult(L))}}function Ee(y,r){let u=!0;return y==="always"||y!=="never"&&r!=="never"||(u=!1),u}class Ge{constructor(r,u,f){const m=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(u/f);for(let T=0;T<this.xCellCount*this.yCellCount;T++)m.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,f,m,_){this._forEachCell(u,f,m,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(_)}insertCircle(r,u,f,m){this._forEachCell(u-m,f-m,u+m,f+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(f),this.circles.push(m)}_insertBoxCell(r,u,f,m,_,T){this.boxCells[_].push(T)}_insertCircleCell(r,u,f,m,_,T){this.circleCells[_].push(T)}_query(r,u,f,m,_,T,A){if(f<0||r>this.width||m<0||u>this.height)return[];const L=[];if(r<=0&&u<=0&&this.width<=f&&this.height<=m){if(_)return[{key:null,x1:r,y1:u,x2:f,y2:m}];for(let N=0;N<this.boxKeys.length;N++)L.push({key:this.boxKeys[N],x1:this.bboxes[4*N],y1:this.bboxes[4*N+1],x2:this.bboxes[4*N+2],y2:this.bboxes[4*N+3]});for(let N=0;N<this.circleKeys.length;N++){const X=this.circles[3*N],K=this.circles[3*N+1],he=this.circles[3*N+2];L.push({key:this.circleKeys[N],x1:X-he,y1:K-he,x2:X+he,y2:K+he})}}else this._forEachCell(r,u,f,m,this._queryCell,L,{hitTest:_,overlapMode:T,seenUids:{box:{},circle:{}}},A);return L}query(r,u,f,m){return this._query(r,u,f,m,!1,null)}hitTest(r,u,f,m,_,T){return this._query(r,u,f,m,!0,_,T).length>0}hitTestCircle(r,u,f,m,_){const T=r-f,A=r+f,L=u-f,N=u+f;if(A<0||T>this.width||N<0||L>this.height)return!1;const X=[];return this._forEachCell(T,L,A,N,this._queryCellCircle,X,{hitTest:!0,overlapMode:m,circle:{x:r,y:u,radius:f},seenUids:{box:{},circle:{}}},_),X.length>0}_queryCell(r,u,f,m,_,T,A,L){const{seenUids:N,hitTest:X,overlapMode:K}=A,he=this.boxCells[_];if(he!==null){const ke=this.bboxes;for(const Fe of he)if(!N.box[Fe]){N.box[Fe]=!0;const Ie=4*Fe,Ke=this.boxKeys[Fe];if(r<=ke[Ie+2]&&u<=ke[Ie+3]&&f>=ke[Ie+0]&&m>=ke[Ie+1]&&(!L||L(Ke))&&(!X||!Ee(K,Ke.overlapMode))&&(T.push({key:Ke,x1:ke[Ie],y1:ke[Ie+1],x2:ke[Ie+2],y2:ke[Ie+3]}),X))return!0}}const Me=this.circleCells[_];if(Me!==null){const ke=this.circles;for(const Fe of Me)if(!N.circle[Fe]){N.circle[Fe]=!0;const Ie=3*Fe,Ke=this.circleKeys[Fe];if(this._circleAndRectCollide(ke[Ie],ke[Ie+1],ke[Ie+2],r,u,f,m)&&(!L||L(Ke))&&(!X||!Ee(K,Ke.overlapMode))){const tt=ke[Ie],De=ke[Ie+1],Ye=ke[Ie+2];if(T.push({key:Ke,x1:tt-Ye,y1:De-Ye,x2:tt+Ye,y2:De+Ye}),X)return!0}}}return!1}_queryCellCircle(r,u,f,m,_,T,A,L){const{circle:N,seenUids:X,overlapMode:K}=A,he=this.boxCells[_];if(he!==null){const ke=this.bboxes;for(const Fe of he)if(!X.box[Fe]){X.box[Fe]=!0;const Ie=4*Fe,Ke=this.boxKeys[Fe];if(this._circleAndRectCollide(N.x,N.y,N.radius,ke[Ie+0],ke[Ie+1],ke[Ie+2],ke[Ie+3])&&(!L||L(Ke))&&!Ee(K,Ke.overlapMode))return T.push(!0),!0}}const Me=this.circleCells[_];if(Me!==null){const ke=this.circles;for(const Fe of Me)if(!X.circle[Fe]){X.circle[Fe]=!0;const Ie=3*Fe,Ke=this.circleKeys[Fe];if(this._circlesCollide(ke[Ie],ke[Ie+1],ke[Ie+2],N.x,N.y,N.radius)&&(!L||L(Ke))&&!Ee(K,Ke.overlapMode))return T.push(!0),!0}}}_forEachCell(r,u,f,m,_,T,A,L){const N=this._convertToXCellCoord(r),X=this._convertToYCellCoord(u),K=this._convertToXCellCoord(f),he=this._convertToYCellCoord(m);for(let Me=N;Me<=K;Me++)for(let ke=X;ke<=he;ke++)if(_.call(this,r,u,f,m,this.xCellCount*ke+Me,T,A,L))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,f,m,_,T){const A=m-r,L=_-u,N=f+T;return N*N>A*A+L*L}_circleAndRectCollide(r,u,f,m,_,T,A){const L=(T-m)/2,N=Math.abs(r-(m+L));if(N>L+f)return!1;const X=(A-_)/2,K=Math.abs(u-(_+X));if(K>X+f)return!1;if(N<=L||K<=X)return!0;const he=N-L,Me=K-X;return he*he+Me*Me<=f*f}}function je(y,r,u,f,m){const _=l.Z();return r?(l.a0(_,_,[1/m,1/m,1]),u||l.ae(_,_,f.angle)):l.a1(_,f.labelPlaneMatrix,y),_}function at(y,r,u,f,m){if(r){const _=l.af(y);return l.a0(_,_,[m,m,1]),u||l.ae(_,_,-f.angle),_}return f.glCoordMatrix}function jt(y,r,u){let f;u?(f=[y.x,y.y,u(y.x,y.y),1],l.ag(f,f,r)):(f=[y.x,y.y,0,1],we(f,f,r));const m=f[3];return{point:new l.P(f[0]/m,f[1]/m),signedDistanceFromCamera:m}}function Tn(y,r){return .5+y/r*.5}function vn(y,r){const u=y[0]/y[3],f=y[1]/y[3];return u>=-r[0]&&u<=r[0]&&f>=-r[1]&&f<=r[1]}function _t(y,r,u,f,m,_,T,A,L,N){const X=f?y.textSizeData:y.iconSizeData,K=l.ah(X,u.transform.zoom),he=[256/u.width*2+1,256/u.height*2+1],Me=f?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Me.clear();const ke=y.lineVertexArray,Fe=f?y.text.placedSymbolArray:y.icon.placedSymbolArray,Ie=u.transform.width/u.transform.height;let Ke=!1;for(let tt=0;tt<Fe.length;tt++){const De=Fe.get(tt);if(De.hidden||De.writingMode===l.ai.vertical&&!Ke){_e(De.numGlyphs,Me);continue}let Ye;if(Ke=!1,N?(Ye=[De.anchorX,De.anchorY,N(De.anchorX,De.anchorY),1],l.ag(Ye,Ye,r)):(Ye=[De.anchorX,De.anchorY,0,1],we(Ye,Ye,r)),!vn(Ye,he)){_e(De.numGlyphs,Me);continue}const ot=Tn(u.transform.cameraToCenterDistance,Ye[3]),st=l.aj(X,K,De),dt=T?st/ot:st*ot,wt=new l.P(De.anchorX,De.anchorY),xt=jt(wt,m,N).point,Et={projections:{},offsets:{}},$t=wr(De,dt,!1,A,r,m,_,y.glyphOffsetArray,ke,Me,xt,wt,Et,Ie,L,N);Ke=$t.useVertical,($t.notEnoughRoom||Ke||$t.needsFlipping&&wr(De,dt,!0,A,r,m,_,y.glyphOffsetArray,ke,Me,xt,wt,Et,Ie,L,N).notEnoughRoom)&&_e(De.numGlyphs,Me)}f?y.text.dynamicLayoutVertexBuffer.updateData(Me):y.icon.dynamicLayoutVertexBuffer.updateData(Me)}function Rt(y,r,u,f,m,_,T,A,L,N,X,K,he){const Me=A.glyphStartIndex+A.numGlyphs,ke=A.lineStartIndex,Fe=A.lineStartIndex+A.lineLength,Ie=r.getoffsetX(A.glyphStartIndex),Ke=r.getoffsetX(Me-1),tt=oe(y*Ie,u,f,m,_,T,A.segment,ke,Fe,L,N,X,K,he);if(!tt)return null;const De=oe(y*Ke,u,f,m,_,T,A.segment,ke,Fe,L,N,X,K,he);return De?{first:tt,last:De}:null}function nn(y,r,u,f){return y===l.ai.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*f?{useVertical:!0}:(y===l.ai.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function wr(y,r,u,f,m,_,T,A,L,N,X,K,he,Me,ke,Fe){const Ie=r/24,Ke=y.lineOffsetX*Ie,tt=y.lineOffsetY*Ie;let De;if(y.numGlyphs>1){const Ye=y.glyphStartIndex+y.numGlyphs,ot=y.lineStartIndex,st=y.lineStartIndex+y.lineLength,dt=Rt(Ie,A,Ke,tt,u,X,K,y,L,_,he,ke,Fe);if(!dt)return{notEnoughRoom:!0};const wt=jt(dt.first.point,T,Fe).point,xt=jt(dt.last.point,T,Fe).point;if(f&&!u){const Et=nn(y.writingMode,wt,xt,Me);if(Et)return Et}De=[dt.first];for(let Et=y.glyphStartIndex+1;Et<Ye-1;Et++)De.push(oe(Ie*A.getoffsetX(Et),Ke,tt,u,X,K,y.segment,ot,st,L,_,he,ke,Fe));De.push(dt.last)}else{if(f&&!u){const ot=jt(K,m,Fe).point,st=y.lineStartIndex+y.segment+1,dt=new l.P(L.getx(st),L.gety(st)),wt=jt(dt,m,Fe),xt=wt.signedDistanceFromCamera>0?wt.point:fi(K,dt,ot,1,m,Fe),Et=nn(y.writingMode,ot,xt,Me);if(Et)return Et}const Ye=oe(Ie*A.getoffsetX(y.glyphStartIndex),Ke,tt,u,X,K,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,L,_,he,ke,Fe);if(!Ye)return{notEnoughRoom:!0};De=[Ye]}for(const Ye of De)l.ak(N,Ye.point,Ye.angle);return{}}function fi(y,r,u,f,m,_){const T=jt(y.add(y.sub(r)._unit()),m,_).point,A=u.sub(T);return u.add(A._mult(f/A.mag()))}function hn(y,r){const{projectionCache:u,lineVertexArray:f,labelPlaneMatrix:m,tileAnchorPoint:_,distanceFromAnchor:T,getElevation:A,previousVertex:L,direction:N,absOffsetX:X}=r;if(u.projections[y])return u.projections[y];const K=new l.P(f.getx(y),f.gety(y)),he=jt(K,m,A);if(he.signedDistanceFromCamera>0)return u.projections[y]=he.point,he.point;const Me=y-N;return fi(T===0?_:new l.P(f.getx(Me),f.gety(Me)),K,L,X-T+1,m,A)}function er(y,r,u){return y._unit()._perp()._mult(r*u)}function Le(y,r,u,f,m,_,T,A){const{projectionCache:L,direction:N}=A;if(L.offsets[y])return L.offsets[y];const X=u.add(r);if(y+N<f||y+N>=m)return L.offsets[y]=X,X;const K=hn(y+N,A),he=er(K.sub(u),T,N),Me=u.add(he),ke=K.add(he);return L.offsets[y]=l.al(_,X,Me,ke)||X,L.offsets[y]}function oe(y,r,u,f,m,_,T,A,L,N,X,K,he,Me){const ke=f?y-r:y+r;let Fe=ke>0?1:-1,Ie=0;f&&(Fe*=-1,Ie=Math.PI),Fe<0&&(Ie+=Math.PI);let Ke,tt,De=Fe>0?A+T:A+T+1,Ye=m,ot=m,st=0,dt=0;const wt=Math.abs(ke),xt=[];let Et;for(;st+dt<=wt;){if(De+=Fe,De<A||De>=L)return null;st+=dt,ot=Ye,tt=Ke;const kt={projectionCache:K,lineVertexArray:N,labelPlaneMatrix:X,tileAnchorPoint:_,distanceFromAnchor:st,getElevation:Me,previousVertex:ot,direction:Fe,absOffsetX:wt};if(Ye=hn(De,kt),u===0)xt.push(ot),Et=Ye.sub(ot);else{let ln;const Ht=Ye.sub(ot);ln=Ht.mag()===0?er(hn(De+Fe,kt).sub(Ye),u,Fe):er(Ht,u,Fe),tt||(tt=ot.add(ln)),Ke=Le(De,ln,Ye,A,L,tt,u,kt),xt.push(tt),Et=Ke.sub(tt)}dt=Et.mag()}const $t=Et._mult((wt-st)/dt)._add(tt||ot),Pn=Ie+Math.atan2(Ye.y-ot.y,Ye.x-ot.x);return xt.push($t),{point:$t,angle:he?Pn:0,path:xt}}const ce=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function _e(y,r){for(let u=0;u<y;u++){const f=r.length;r.resize(f+4),r.float32.set(ce,3*f)}}function we(y,r,u){const f=r[0],m=r[1];return y[0]=u[0]*f+u[4]*m+u[12],y[1]=u[1]*f+u[5]*m+u[13],y[3]=u[3]*f+u[7]*m+u[15],y}const Ce=100;class He{constructor(r,u=new Ge(r.width+200,r.height+200,25),f=new Ge(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Ce,this.screenBottomBoundary=r.height+Ce,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,f,m,_,T){const A=this.projectAndGetPerspectiveRatio(m,r.anchorPointX,r.anchorPointY,T),L=f*A.perspectiveRatio,N=r.x1*L+A.point.x,X=r.y1*L+A.point.y,K=r.x2*L+A.point.x,he=r.y2*L+A.point.y;return!this.isInsideGrid(N,X,K,he)||u!=="always"&&this.grid.hitTest(N,X,K,he,u,_)||A.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[N,X,K,he],offscreen:this.isOffscreen(N,X,K,he)}}placeCollisionCircles(r,u,f,m,_,T,A,L,N,X,K,he,Me,ke){const Fe=[],Ie=new l.P(u.anchorX,u.anchorY),Ke=jt(Ie,T,ke),tt=Tn(this.transform.cameraToCenterDistance,Ke.signedDistanceFromCamera),De=(X?_/tt:_*tt)/l.ap,Ye=jt(Ie,A,ke).point,ot=Rt(De,m,u.lineOffsetX*De,u.lineOffsetY*De,!1,Ye,Ie,u,f,A,{projections:{},offsets:{}},!1,ke);let st=!1,dt=!1,wt=!0;if(ot){const xt=.5*he*tt+Me,Et=new l.P(-100,-100),$t=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Pn=new B,kt=ot.first,ln=ot.last;let Ht=[];for(let _n=kt.path.length-1;_n>=1;_n--)Ht.push(kt.path[_n]);for(let _n=1;_n<ln.path.length;_n++)Ht.push(ln.path[_n]);const Xn=2.5*xt;if(L){const _n=Ht.map(kn=>jt(kn,L,ke));Ht=_n.some(kn=>kn.signedDistanceFromCamera<=0)?[]:_n.map(kn=>kn.point)}let An=[];if(Ht.length>0){const _n=Ht[0].clone(),kn=Ht[0].clone();for(let Sr=1;Sr<Ht.length;Sr++)_n.x=Math.min(_n.x,Ht[Sr].x),_n.y=Math.min(_n.y,Ht[Sr].y),kn.x=Math.max(kn.x,Ht[Sr].x),kn.y=Math.max(kn.y,Ht[Sr].y);An=_n.x>=Et.x&&kn.x<=$t.x&&_n.y>=Et.y&&kn.y<=$t.y?[Ht]:kn.x<Et.x||_n.x>$t.x||kn.y<Et.y||_n.y>$t.y?[]:l.am([Ht],Et.x,Et.y,$t.x,$t.y)}for(const _n of An){Pn.reset(_n,.25*xt);let kn=0;kn=Pn.length<=.5*xt?1:Math.ceil(Pn.paddedLength/Xn)+1;for(let Sr=0;Sr<kn;Sr++){const nr=Sr/Math.max(kn-1,1),si=Pn.lerp(nr),Zr=si.x+Ce,Ar=si.y+Ce;Fe.push(Zr,Ar,xt,0);const no=Zr-xt,ur=Ar-xt,es=Zr+xt,ts=Ar+xt;if(wt=wt&&this.isOffscreen(no,ur,es,ts),dt=dt||this.isInsideGrid(no,ur,es,ts),r!=="always"&&this.grid.hitTestCircle(Zr,Ar,xt,r,K)&&(st=!0,!N))return{circles:[],offscreen:!1,collisionDetected:st}}}}return{circles:!N&&st||!dt||tt<this.perspectiveRatioCutoff?[]:Fe,offscreen:wt,collisionDetected:st}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,m=1/0,_=-1/0,T=-1/0;for(const X of r){const K=new l.P(X.x+Ce,X.y+Ce);f=Math.min(f,K.x),m=Math.min(m,K.y),_=Math.max(_,K.x),T=Math.max(T,K.y),u.push(K)}const A=this.grid.query(f,m,_,T).concat(this.ignoredGrid.query(f,m,_,T)),L={},N={};for(const X of A){const K=X.key;if(L[K.bucketInstanceId]===void 0&&(L[K.bucketInstanceId]={}),L[K.bucketInstanceId][K.featureIndex])continue;const he=[new l.P(X.x1,X.y1),new l.P(X.x2,X.y1),new l.P(X.x2,X.y2),new l.P(X.x1,X.y2)];l.an(u,he)&&(L[K.bucketInstanceId][K.featureIndex]=!0,N[K.bucketInstanceId]===void 0&&(N[K.bucketInstanceId]=[]),N[K.bucketInstanceId].push(K.featureIndex))}return N}insertCollisionBox(r,u,f,m,_,T){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:_,collisionGroupID:T,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,f,m,_,T){const A=f?this.ignoredGrid:this.grid,L={bucketInstanceId:m,featureIndex:_,collisionGroupID:T,overlapMode:u};for(let N=0;N<r.length;N+=4)A.insertCircle(L,r[N],r[N+1],r[N+2])}projectAndGetPerspectiveRatio(r,u,f,m){let _;return m?(_=[u,f,m(u,f),1],l.ag(_,_,r)):(_=[u,f,0,1],we(_,_,r)),{point:new l.P((_[0]/_[3]+1)/2*this.transform.width+Ce,(-_[1]/_[3]+1)/2*this.transform.height+Ce),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(r,u,f,m){return f<Ce||r>=this.screenRightBoundary||m<Ce||u>this.screenBottomBoundary}isInsideGrid(r,u,f,m){return f>=0&&r<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=l.ao([]);return l.$(r,r,[-100,-100,0]),r}}function Ve(y,r,u){return r*(l.N/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class Oe{constructor(r,u,f,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):m&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class qe{constructor(r,u,f,m,_){this.text=new Oe(r?r.text:null,u,f,_),this.icon=new Oe(r?r.icon:null,u,m,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ut{constructor(r,u,f){this.text=r,this.icon=u,this.skipFade=f}}class ht{constructor(){this.invProjMatrix=l.Z(),this.viewportMatrix=l.Z(),this.circles=[]}}class mt{constructor(r,u,f,m,_){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=m,this.tileID=_}}class Jt{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[r]}}function un(y,r,u,f,m){const{horizontalAlign:_,verticalAlign:T}=l.au(y);return new l.P(-(_-.5)*r+f[0]*m,-(T-.5)*u+f[1]*m)}function Dt(y,r,u,f,m,_){const{x1:T,x2:A,y1:L,y2:N,anchorPointX:X,anchorPointY:K}=y,he=new l.P(r,u);return f&&he._rotate(m?_:-_),{x1:T+he.x,y1:L+he.y,x2:A+he.x,y2:N+he.y,anchorPointX:X,anchorPointY:K}}class Qt{constructor(r,u,f,m,_){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new He(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Jt(m),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,u,f,m){const _=f.getBucket(u),T=f.latestFeatureIndex;if(!_||!T||u.id!==_.layerIds[0])return;const A=f.collisionBoxArray,L=_.layers[0].layout,N=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),X=f.tileSize/l.N,K=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),he=L.get("text-pitch-alignment")==="map",Me=L.get("text-rotation-alignment")==="map",ke=Ve(f,1,this.transform.zoom),Fe=je(K,he,Me,this.transform,ke);let Ie=null;if(he){const tt=at(K,he,Me,this.transform,ke);Ie=l.a1([],this.transform.labelPlaneMatrix,tt)}this.retainedQueryData[_.bucketInstanceId]=new mt(_.bucketInstanceId,T,_.sourceLayerIndex,_.index,f.tileID);const Ke={bucket:_,layout:L,posMatrix:K,textLabelPlaneMatrix:Fe,labelToScreenMatrix:Ie,scale:N,textPixelRatio:X,holdingForFade:f.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:l.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(m)for(const tt of _.sortKeyRanges){const{sortKey:De,symbolInstanceStart:Ye,symbolInstanceEnd:ot}=tt;r.push({sortKey:De,symbolInstanceStart:Ye,symbolInstanceEnd:ot,parameters:Ke})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:Ke})}attemptAnchorPlacement(r,u,f,m,_,T,A,L,N,X,K,he,Me,ke,Fe,Ie){const Ke=l.aq[r.textAnchor],tt=[r.textOffset0,r.textOffset1],De=un(Ke,f,m,tt,_),Ye=this.collisionIndex.placeCollisionBox(Dt(u,De.x,De.y,T,A,this.transform.angle),K,L,N,X.predicate,Ie);if((!Fe||this.collisionIndex.placeCollisionBox(Dt(Fe,De.x,De.y,T,A,this.transform.angle),K,L,N,X.predicate,Ie).box.length!==0)&&Ye.box.length>0){let ot;if(this.prevPlacement&&this.prevPlacement.variableOffsets[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID].text&&(ot=this.prevPlacement.variableOffsets[he.crossTileID].anchor),he.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[he.crossTileID]={textOffset:tt,width:f,height:m,anchor:Ke,textBoxScale:_,prevAnchor:ot},this.markUsedJustification(Me,Ke,he,ke),Me.allowVerticalPlacement&&(this.markUsedOrientation(Me,ke,he),this.placedOrientations[he.crossTileID]=ke),{shift:De,placedGlyphBoxes:Ye}}}placeLayerBucketPart(r,u,f){const{bucket:m,layout:_,posMatrix:T,textLabelPlaneMatrix:A,labelToScreenMatrix:L,textPixelRatio:N,holdingForFade:X,collisionBoxArray:K,partiallyEvaluatedTextSize:he,collisionGroup:Me}=r.parameters,ke=_.get("text-optional"),Fe=_.get("icon-optional"),Ie=l.ar(_,"text-overlap","text-allow-overlap"),Ke=Ie==="always",tt=l.ar(_,"icon-overlap","icon-allow-overlap"),De=tt==="always",Ye=_.get("text-rotation-alignment")==="map",ot=_.get("text-pitch-alignment")==="map",st=_.get("icon-text-fit")!=="none",dt=_.get("symbol-z-order")==="viewport-y",wt=Ke&&(De||!m.hasIconData()||Fe),xt=De&&(Ke||!m.hasTextData()||ke);!m.collisionArrays&&K&&m.deserializeCollisionBoxes(K);const Et=this.retainedQueryData[m.bucketInstanceId].tileID,$t=this.terrain?(kt,ln)=>this.terrain.getElevation(Et,kt,ln):null,Pn=(kt,ln)=>{var Ht,Xn;if(u[kt.crossTileID])return;if(X)return void(this.placements[kt.crossTileID]=new ut(!1,!1,!1));let An=!1,_n=!1,kn=!0,Sr=null,nr={box:null,offscreen:null},si={box:null,offscreen:null},Zr=null,Ar=null,no=null,ur=0,es=0,ts=0;ln.textFeatureIndex?ur=ln.textFeatureIndex:kt.useRuntimeCollisionCircles&&(ur=kt.featureIndex),ln.verticalTextFeatureIndex&&(es=ln.verticalTextFeatureIndex);const ta=ln.textBox;if(ta){const gi=Er=>{let Hr=l.ai.horizontal;if(m.allowVerticalPlacement&&!Er&&this.prevPlacement){const Ni=this.prevPlacement.placedOrientations[kt.crossTileID];Ni&&(this.placedOrientations[kt.crossTileID]=Ni,Hr=Ni,this.markUsedOrientation(m,Hr,kt))}return Hr},ai=(Er,Hr)=>{if(m.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&ln.verticalTextBox){for(const Ni of m.writingModes)if(Ni===l.ai.vertical?(nr=Hr(),si=nr):nr=Er(),nr&&nr.box&&nr.box.length)break}else nr=Er()},Ci=kt.textAnchorOffsetStartIndex,za=kt.textAnchorOffsetEndIndex;if(za===Ci){const Er=(Hr,Ni)=>{const Tr=this.collisionIndex.placeCollisionBox(Hr,Ie,N,T,Me.predicate,$t);return Tr&&Tr.box&&Tr.box.length&&(this.markUsedOrientation(m,Ni,kt),this.placedOrientations[kt.crossTileID]=Ni),Tr};ai(()=>Er(ta,l.ai.horizontal),()=>{const Hr=ln.verticalTextBox;return m.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&Hr?Er(Hr,l.ai.vertical):{box:null,offscreen:null}}),gi(nr&&nr.box&&nr.box.length)}else{let Er=l.aq[(Xn=(Ht=this.prevPlacement)===null||Ht===void 0?void 0:Ht.variableOffsets[kt.crossTileID])===null||Xn===void 0?void 0:Xn.anchor];const Hr=(Tr,Fa,Tc)=>{const ip=Tr.x2-Tr.x1,op=Tr.y2-Tr.y1,hy=kt.textBoxScale,of=st&&tt==="never"?Fa:null;let ns={box:[],offscreen:!1},Oa=Ie==="never"?1:2,rs="never";Er&&Oa++;for(let xo=0;xo<Oa;xo++){for(let is=Ci;is<za;is++){const sf=m.textAnchorOffsets.get(is);if(Er&&sf.textAnchor!==Er)continue;const Cs=this.attemptAnchorPlacement(sf,Tr,ip,op,hy,Ye,ot,N,T,Me,rs,kt,m,Tc,of,$t);if(Cs&&(ns=Cs.placedGlyphBoxes,ns&&ns.box&&ns.box.length))return An=!0,Sr=Cs.shift,ns}Er?Er=null:rs=Ie}return ns};ai(()=>Hr(ta,ln.iconBox,l.ai.horizontal),()=>{const Tr=ln.verticalTextBox;return m.allowVerticalPlacement&&!(nr&&nr.box&&nr.box.length)&&kt.numVerticalGlyphVertices>0&&Tr?Hr(Tr,ln.verticalIconBox,l.ai.vertical):{box:null,offscreen:null}}),nr&&(An=nr.box,kn=nr.offscreen);const Ni=gi(nr&&nr.box);if(!An&&this.prevPlacement){const Tr=this.prevPlacement.variableOffsets[kt.crossTileID];Tr&&(this.variableOffsets[kt.crossTileID]=Tr,this.markUsedJustification(m,Tr.anchor,kt,Ni))}}}if(Zr=nr,An=Zr&&Zr.box&&Zr.box.length>0,kn=Zr&&Zr.offscreen,kt.useRuntimeCollisionCircles){const gi=m.text.placedSymbolArray.get(kt.centerJustifiedTextSymbolIndex),ai=l.aj(m.textSizeData,he,gi),Ci=_.get("text-padding");Ar=this.collisionIndex.placeCollisionCircles(Ie,gi,m.lineVertexArray,m.glyphOffsetArray,ai,T,A,L,f,ot,Me.predicate,kt.collisionCircleDiameter,Ci,$t),Ar.circles.length&&Ar.collisionDetected&&!f&&l.w("Collisions detected, but collision boxes are not shown"),An=Ke||Ar.circles.length>0&&!Ar.collisionDetected,kn=kn&&Ar.offscreen}if(ln.iconFeatureIndex&&(ts=ln.iconFeatureIndex),ln.iconBox){const gi=ai=>{const Ci=st&&Sr?Dt(ai,Sr.x,Sr.y,Ye,ot,this.transform.angle):ai;return this.collisionIndex.placeCollisionBox(Ci,tt,N,T,Me.predicate,$t)};si&&si.box&&si.box.length&&ln.verticalIconBox?(no=gi(ln.verticalIconBox),_n=no.box.length>0):(no=gi(ln.iconBox),_n=no.box.length>0),kn=kn&&no.offscreen}const La=ke||kt.numHorizontalGlyphVertices===0&&kt.numVerticalGlyphVertices===0,Al=Fe||kt.numIconVertices===0;if(La||Al?Al?La||(_n=_n&&An):An=_n&&An:_n=An=_n&&An,An&&Zr&&Zr.box&&this.collisionIndex.insertCollisionBox(Zr.box,Ie,_.get("text-ignore-placement"),m.bucketInstanceId,si&&si.box&&es?es:ur,Me.ID),_n&&no&&this.collisionIndex.insertCollisionBox(no.box,tt,_.get("icon-ignore-placement"),m.bucketInstanceId,ts,Me.ID),Ar&&(An&&this.collisionIndex.insertCollisionCircles(Ar.circles,Ie,_.get("text-ignore-placement"),m.bucketInstanceId,ur,Me.ID),f)){const gi=m.bucketInstanceId;let ai=this.collisionCircleArrays[gi];ai===void 0&&(ai=this.collisionCircleArrays[gi]=new ht);for(let Ci=0;Ci<Ar.circles.length;Ci+=4)ai.circles.push(Ar.circles[Ci+0]),ai.circles.push(Ar.circles[Ci+1]),ai.circles.push(Ar.circles[Ci+2]),ai.circles.push(Ar.collisionDetected?1:0)}if(kt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[kt.crossTileID]=new ut(An||wt,_n||xt,kn||m.justReloaded),u[kt.crossTileID]=!0};if(dt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const kt=m.getSortedSymbolIndexes(this.transform.angle);for(let ln=kt.length-1;ln>=0;--ln){const Ht=kt[ln];Pn(m.symbolInstances.get(Ht),m.collisionArrays[Ht])}}else for(let kt=r.symbolInstanceStart;kt<r.symbolInstanceEnd;kt++)Pn(m.symbolInstances.get(kt),m.collisionArrays[kt]);if(f&&m.bucketInstanceId in this.collisionCircleArrays){const kt=this.collisionCircleArrays[m.bucketInstanceId];l.as(kt.invProjMatrix,T),kt.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(r,u,f,m){let _;_=m===l.ai.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[l.at(u)];const T=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const A of T)A>=0&&(r.text.placedSymbolArray.get(A).crossTileID=_>=0&&A!==_?0:f.crossTileID)}markUsedOrientation(r,u,f){const m=u===l.ai.horizontal||u===l.ai.horizontalOnly?u:0,_=u===l.ai.vertical?u:0,T=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const A of T)r.text.placedSymbolArray.get(A).placedOrientation=m;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const m=u?u.symbolFadeChange(r):1,_=u?u.opacities:{},T=u?u.variableOffsets:{},A=u?u.placedOrientations:{};for(const L in this.placements){const N=this.placements[L],X=_[L];X?(this.opacities[L]=new qe(X,m,N.text,N.icon),f=f||N.text!==X.text.placed||N.icon!==X.icon.placed):(this.opacities[L]=new qe(null,m,N.text,N.icon,N.skipFade),f=f||N.text||N.icon)}for(const L in _){const N=_[L];if(!this.opacities[L]){const X=new qe(N,m,!1,!1);X.isHidden()||(this.opacities[L]=X,f=f||N.text.placed||N.icon.placed)}}for(const L in T)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=T[L]);for(const L in A)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=A[L]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const f={};for(const m of u){const _=m.getBucket(r);_&&m.latestFeatureIndex&&r.id===_.layerIds[0]&&this.updateBucketOpacities(_,f,m.collisionBoxArray)}}updateBucketOpacities(r,u,f){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const m=r.layers[0],_=m.layout,T=new qe(null,0,!1,!1,!0),A=_.get("text-allow-overlap"),L=_.get("icon-allow-overlap"),N=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),X=_.get("text-rotation-alignment")==="map",K=_.get("text-pitch-alignment")==="map",he=_.get("icon-text-fit")!=="none",Me=new qe(null,0,A&&(L||!r.hasIconData()||_.get("icon-optional")),L&&(A||!r.hasTextData()||_.get("text-optional")),!0);!r.collisionArrays&&f&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(f);const ke=(Fe,Ie,Ke)=>{for(let tt=0;tt<Ie/4;tt++)Fe.opacityVertexArray.emplaceBack(Ke);Fe.hasVisibleVertices=Fe.hasVisibleVertices||Ke!==ri};for(let Fe=0;Fe<r.symbolInstances.length;Fe++){const Ie=r.symbolInstances.get(Fe),{numHorizontalGlyphVertices:Ke,numVerticalGlyphVertices:tt,crossTileID:De}=Ie;let Ye=this.opacities[De];u[De]?Ye=T:Ye||(Ye=Me,this.opacities[De]=Ye),u[De]=!0;const ot=Ie.numIconVertices>0,st=this.placedOrientations[Ie.crossTileID],dt=st===l.ai.vertical,wt=st===l.ai.horizontal||st===l.ai.horizontalOnly;if(Ke>0||tt>0){const xt=Ur(Ye.text);ke(r.text,Ke,dt?ri:xt),ke(r.text,tt,wt?ri:xt);const Et=Ye.text.isHidden();[Ie.rightJustifiedTextSymbolIndex,Ie.centerJustifiedTextSymbolIndex,Ie.leftJustifiedTextSymbolIndex].forEach(kt=>{kt>=0&&(r.text.placedSymbolArray.get(kt).hidden=Et||dt?1:0)}),Ie.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ie.verticalPlacedTextSymbolIndex).hidden=Et||wt?1:0);const $t=this.variableOffsets[Ie.crossTileID];$t&&this.markUsedJustification(r,$t.anchor,Ie,st);const Pn=this.placedOrientations[Ie.crossTileID];Pn&&(this.markUsedJustification(r,"left",Ie,Pn),this.markUsedOrientation(r,Pn,Ie))}if(ot){const xt=Ur(Ye.icon),Et=!(he&&Ie.verticalPlacedIconSymbolIndex&&dt);Ie.placedIconSymbolIndex>=0&&(ke(r.icon,Ie.numIconVertices,Et?xt:ri),r.icon.placedSymbolArray.get(Ie.placedIconSymbolIndex).hidden=Ye.icon.isHidden()),Ie.verticalPlacedIconSymbolIndex>=0&&(ke(r.icon,Ie.numVerticalIconVertices,Et?ri:xt),r.icon.placedSymbolArray.get(Ie.verticalPlacedIconSymbolIndex).hidden=Ye.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const xt=r.collisionArrays[Fe];if(xt){let Et=new l.P(0,0);if(xt.textBox||xt.verticalTextBox){let Pn=!0;if(N){const kt=this.variableOffsets[De];kt?(Et=un(kt.anchor,kt.width,kt.height,kt.textOffset,kt.textBoxScale),X&&Et._rotate(K?this.transform.angle:-this.transform.angle)):Pn=!1}xt.textBox&&fn(r.textCollisionBox.collisionVertexArray,Ye.text.placed,!Pn||dt,Et.x,Et.y),xt.verticalTextBox&&fn(r.textCollisionBox.collisionVertexArray,Ye.text.placed,!Pn||wt,Et.x,Et.y)}const $t=!!(!wt&&xt.verticalIconBox);xt.iconBox&&fn(r.iconCollisionBox.collisionVertexArray,Ye.icon.placed,$t,he?Et.x:0,he?Et.y:0),xt.verticalIconBox&&fn(r.iconCollisionBox.collisionVertexArray,Ye.icon.placed,!$t,he?Et.x:0,he?Et.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Fe=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Fe.invProjMatrix,r.placementViewportMatrix=Fe.viewportMatrix,r.collisionCircleArray=Fe.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function fn(y,r,u,f,m){y.emplaceBack(r?1:0,u?1:0,f||0,m||0),y.emplaceBack(r?1:0,u?1:0,f||0,m||0),y.emplaceBack(r?1:0,u?1:0,f||0,m||0),y.emplaceBack(r?1:0,u?1:0,f||0,m||0)}const Rn=Math.pow(2,25),jn=Math.pow(2,24),Fn=Math.pow(2,17),Mn=Math.pow(2,16),ei=Math.pow(2,9),qn=Math.pow(2,8),br=Math.pow(2,1);function Ur(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const r=y.placed?1:0,u=Math.floor(127*y.opacity);return u*Rn+r*jn+u*Fn+r*Mn+u*ei+r*qn+u*br+r}const ri=0;class Gs{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,f,m,_){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(T,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((A,L)=>A.sortKey-L.sortKey));this._currentPartIndex<T.length;)if(u.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,_())return!0;return!1}}class ms{constructor(r,u,f,m,_,T,A,L){this.placement=new Qt(r,u,T,A,L),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(r,u,f){const m=l.h.now(),_=()=>!this._forceFullPlacement&&l.h.now()-m>2;for(;this._currentPlacementIndex>=0;){const T=u[r[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=A)&&(!T.maxzoom||T.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Gs(T)),this._inProgressLayer.continuePlacement(f[T.source],this.placement,this._showCollisionBoxes,T,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const wn=512/l.N/2;class gs{constructor(r,u,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const m=new Map;for(let _=0;_<u.length;_++){const T=u.get(_),A=T.key,L=m.get(A);L?L.push(T):m.set(A,[T])}for(const[_,T]of m){const A={positions:T.map(L=>({x:Math.floor(L.anchorX*wn),y:Math.floor(L.anchorY*wn)})),crossTileIDs:T.map(L=>L.crossTileID)};if(A.positions.length>128){const L=new l.av(A.positions.length,16,Uint16Array);for(const{x:N,y:X}of A.positions)L.add(N,X);L.finish(),delete A.positions,A.index=L}this._symbolsByKey[_]=A}}getScaledCoordinates(r,u){const{x:f,y:m,z:_}=this.tileID.canonical,{x:T,y:A,z:L}=u.canonical,N=wn/Math.pow(2,L-_),X=(A*l.N+r.anchorY)*N,K=m*l.N*wn;return{x:Math.floor((T*l.N+r.anchorX)*N-f*l.N*wn),y:Math.floor(X-K)}}findMatches(r,u,f){const m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<r.length;_++){const T=r.get(_);if(T.crossTileID)continue;const A=this._symbolsByKey[T.key];if(!A)continue;const L=this.getScaledCoordinates(T,u);if(A.index){const N=A.index.range(L.x-m,L.y-m,L.x+m,L.y+m).sort();for(const X of N){const K=A.crossTileIDs[X];if(!f[K]){f[K]=!0,T.crossTileID=K;break}}}else if(A.positions)for(let N=0;N<A.positions.length;N++){const X=A.positions[N],K=A.crossTileIDs[N];if(Math.abs(X.x-L.x)<=m&&Math.abs(X.y-L.y)<=m&&!f[K]){f[K]=!0,T.crossTileID=K;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Gn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class cu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const f in this.indexes){const m=this.indexes[f],_={};for(const T in m){const A=m[T];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+u),_[A.tileID.key]=A}this.indexes[f]=_}this.lng=r}addBucket(r,u,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const _ in this.indexes){const T=this.indexes[_];if(Number(_)>r.overscaledZ)for(const A in T){const L=T[A];L.tileID.isChildOf(r)&&L.findMatches(u.symbolInstances,r,m)}else{const A=T[r.scaledTo(Number(_)).key];A&&A.findMatches(u.symbolInstances,r,m)}}for(let _=0;_<u.symbolInstances.length;_++){const T=u.symbolInstances.get(_);T.crossTileID||(T.crossTileID=f.generate(),m[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new gs(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const f of u.getCrossTileIDsLists())for(const m of f)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let u=!1;for(const f in this.indexes){const m=this.indexes[f];for(const _ in m)r[m[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,m[_]),delete m[_],u=!0)}return u}}class rl{constructor(){this.layerIndexes={},this.crossTileIDs=new Gn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,f){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new cu);let _=!1;const T={};m.handleWrapJump(f);for(const A of u){const L=A.getBucket(r);L&&r.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(A.tileID,L,this.crossTileIDs)&&(_=!0),T[L.bucketInstanceId]=!0)}return m.removeStaleBuckets(T)&&(_=!0),_}pruneUnusedLayers(r){const u={};r.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}const ti=(y,r)=>l.x(y,r&&r.filter(u=>u.identifier!=="source.canvas")),Si=l.F(l.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Ao=l.F(l.ax,["setCenter","setZoom","setBearing","setPitch"]),Oi=l.aw();class $r extends l.E{constructor(r,u={}){super(),this.map=r,this.dispatcher=new Se(z(),this,r._getMapId()),this.imageManager=new ve,this.imageManager.setEventedParent(this),this.glyphManager=new ue(r._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Te(256,512),this.crossTileSymbolIndex=new rl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.az());const f=this;this._rtlTextPluginCallback=$r.registerForPluginStateChange(m=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(_,T)=>{if(l.aA(_),T&&T.every(A=>A))for(const A in f.sourceCaches){const L=f.sourceCaches[A].getSource().type;L!=="vector"&&L!=="geojson"||f.sourceCaches[A].reload()}})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const _=this.sourceCaches[m.sourceId];if(!_)return;const T=_.getSource();if(T&&T.vectorLayerIds)for(const A in this._layers){const L=this._layers[A];L.source===T.id&&this._validateLayer(L)}})}loadURL(r,u={},f){this.fire(new l.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const m=this.map._requestManager.transformRequest(r,G.Style);this._request=l.f(m,(_,T)=>{this._request=null,_?this.fire(new l.j(_)):T&&this._load(T,u,f)})}loadJSON(r,u={},f){this.fire(new l.k("dataloading",{dataType:"style"})),this._request=l.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(r,u,f)})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(Oi,{validate:!1})}_load(r,u,f){var m;const _=u.transformStyle?u.transformStyle(f,r):r;if(!u.validate||!ti(this,l.y(_))){this._loaded=!0,this.stylesheet=_;for(const T in _.sources)this.addSource(T,_.sources[T],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new ye(this.stylesheet.light),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const r=l.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of r){const f=l.aC(u);f.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=f}}_loadSprite(r,u=!1,f=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(m,_,T,A){const L=M(m),N=L.length,X=T>1?"@2x":"",K={},he={},Me={};for(const{id:ke,url:Fe}of L){const Ie=_.transformRequest(_.normalizeSpriteURL(Fe,X,".json"),G.SpriteJSON),Ke=`${ke}_${Ie.url}`;K[Ke]=l.f(Ie,(Ye,ot)=>{delete K[Ke],he[ke]=ot,H(A,he,Me,Ye,N)});const tt=_.transformRequest(_.normalizeSpriteURL(Fe,X,".png"),G.SpriteImage),De=`${ke}_${tt.url}`;K[De]=de.getImage(tt,(Ye,ot)=>{delete K[De],Me[ke]=ot,H(A,he,Me,Ye,N)})}return{cancel(){for(const ke of Object.values(K))ke.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(m,_)=>{if(this._spriteRequest=null,m)this.fire(new l.j(m));else if(_)for(const T in _){this._spritesImagesIds[T]=[];const A=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(L=>!(L in _)):[];for(const L of A)this.imageManager.removeImage(L),this._changedImages[L]=!0;for(const L in _[T]){const N=T==="default"?L:`${T}:${L}`;this._spritesImagesIds[T].push(N),N in this.imageManager.images?this.imageManager.updateImage(N,_[T][L],!1):this.imageManager.addImage(N,_[T][L]),u&&(this._changedImages[N]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),f&&f(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const f=r.sourceLayer;if(!f)return;const m=u.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(f)===-1)&&this.fire(new l.j(new Error(`Source layer "${f}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const u=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u);const f=[];for(const m of r)u[m]&&f.push(u[m]);return f}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const f of u){const m=this._layers[f];m.type!=="custom"&&(r[f]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(m.length||_.length)&&this._updateWorkerLayers(m,_);for(const T in this._updatedSources){const A=this._updatedSources[T];if(A==="reload")this._reloadSource(T);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const f={};for(const m in this.sourceCaches){const _=this.sourceCaches[m];f[m]=_.used,_.used=!1}for(const m of this._order){const _=this._layers[m];_.recalculate(r,this._availableImages),!_.isHidden(r.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const m in f){const _=this.sourceCaches[m];f[m]!==_.used&&_.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.z=r.zoom,u&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){this._checkLoaded();const f=this.serialize();if(r=u.transformStyle?u.transformStyle(f,r):r,ti(this,l.y(r)))return!1;(r=l.aD(r)).layers=l.aB(r.layers);const m=l.aE(f,r).filter(T=>!(T.command in Ao));if(m.length===0)return!1;const _=m.filter(T=>!(T.command in Si));if(_.length>0)throw new Error(`Unimplemented: ${_.map(T=>T.command).join(", ")}.`);for(const T of m)T.command!=="setTransition"&&this[T.command].apply(this,T.args);return this.stylesheet=r,this._serializedLayers=null,!0}addImage(r,u){if(this.getImage(r))return this.fire(new l.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.y.source,`sources.${r}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const m=this.sourceCaches[r]=new j(r,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new l.j(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,f={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new l.j(new Error(`Layer "${m}" already exists on this map.`)));let _;if(r.type==="custom"){if(ti(this,l.aF(r)))return;_=l.aC(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=l.aD(r),r=l.e(r,{source:m})),this._validate(l.y.layer,`layers.${m}`,r,{arrayIndex:-1},f))return;_=l.aC(r),this._validateLayer(_),_.setEventedParent(this,{layer:{id:m}})}const T=u?this._order.indexOf(u):this._order.length;if(u&&T===-1)this.fire(new l.j(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(T,0,m),this._layerOrderChanged=!0,this._layers[m]=_,this._removedLayers[m]&&_.source&&_.type!=="custom"){const A=this._removedLayers[m];delete this._removedLayers[m],A.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const f=this._order.indexOf(r);this._order.splice(f,1);const m=u?this._order.indexOf(u):this._order.length;u&&m===-1?this.fire(new l.j(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,f){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===u&&m.maxzoom===f||(u!=null&&(m.minzoom=u),f!=null&&(m.maxzoom=f),this._updateLayer(m)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,f={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!l.aG(m.filter,u))return u==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(l.y.filter,`layers.${m.id}.filter`,u,null,f)||(m.filter=l.aD(u),this._updateLayer(m)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.aD(this.getLayer(r).filter)}setLayoutProperty(r,u,f,m={}){this._checkLoaded();const _=this.getLayer(r);_?l.aG(_.getLayoutProperty(u),f)||(_.setLayoutProperty(u,f,m),this._updateLayer(_)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const f=this.getLayer(r);if(f)return f.getLayoutProperty(u);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,f,m={}){this._checkLoaded();const _=this.getLayer(r);_?l.aG(_.getPaintProperty(u),f)||(_.setPaintProperty(u,f,m)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new l.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const f=r.source,m=r.sourceLayer,_=this.sourceCaches[f];if(_===void 0)return void this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)));const T=_.getSource().type;T==="geojson"&&m?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||m?(r.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(m,r.id,u)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const f=r.source,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)));const _=m.getSource().type,T=_==="vector"?r.sourceLayer:void 0;_!=="vector"||T?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(T,r.id,u):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,f=r.sourceLayer,m=this.sourceCaches[u];if(m!==void 0)return m.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(f,r.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=l.aH(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),f=this.map.getTerrain()||void 0,m=this.stylesheet;return l.aI({version:m.version,name:m.name,metadata:m.metadata,light:m.light,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:r,layers:u,terrain:f},_=>_!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=T=>this._layers[T].type==="fill-extrusion",f={},m=[];for(let T=this._order.length-1;T>=0;T--){const A=this._order[T];if(u(A)){f[A]=T;for(const L of r){const N=L[A];if(N)for(const X of N)m.push(X)}}}m.sort((T,A)=>A.intersectionZ-T.intersectionZ);const _=[];for(let T=this._order.length-1;T>=0;T--){const A=this._order[T];if(u(A))for(let L=m.length-1;L>=0;L--){const N=m[L].feature;if(f[N.layer.id]<T)break;_.push(N),m.pop()}else for(const L of r){const N=L[A];if(N)for(const X of N)_.push(X.feature)}}return _}queryRenderedFeatures(r,u,f){u&&u.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const m={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const A of u.layers){const L=this._layers[A];if(!L)return this.fire(new l.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];m[L.source]=!0}}const _=[];u.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const A in this.sourceCaches)u.layers&&!m[A]||_.push(xn(this.sourceCaches[A],this._layers,T,r,u,f));return this.placement&&_.push(function(A,L,N,X,K,he,Me){const ke={},Fe=he.queryRenderedSymbols(X),Ie=[];for(const Ke of Object.keys(Fe).map(Number))Ie.push(Me[Ke]);Ie.sort(yn);for(const Ke of Ie){const tt=Ke.featureIndex.lookupSymbolFeatures(Fe[Ke.bucketInstanceId],L,Ke.bucketIndex,Ke.sourceLayerIndex,K.filter,K.layers,K.availableImages,A);for(const De in tt){const Ye=ke[De]=ke[De]||[],ot=tt[De];ot.sort((st,dt)=>{const wt=Ke.featureSortOrder;if(wt){const xt=wt.indexOf(st.featureIndex);return wt.indexOf(dt.featureIndex)-xt}return dt.featureIndex-st.featureIndex});for(const st of ot)Ye.push(st)}}for(const Ke in ke)ke[Ke].forEach(tt=>{const De=tt.feature,Ye=N[A[Ke].source].getFeatureState(De.layer["source-layer"],De.id);De.source=De.layer.source,De.layer["source-layer"]&&(De.sourceLayer=De.layer["source-layer"]),De.state=Ye});return ke}(this._layers,T,this.sourceCaches,r,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(r,u){u&&u.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[r];return f?function(m,_){const T=m.getRenderableIds().map(N=>m.getTileByID(N)),A=[],L={};for(let N=0;N<T.length;N++){const X=T[N],K=X.tileID.canonical.key;L[K]||(L[K]=!0,X.querySourceFeatures(A,_))}return A}(f,u):[]}addSourceType(r,u,f){return Ut(r)?f(new Error(`A source type called "${r}" already exists.`)):(((m,_)=>{Gt[m]=_})(r,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const f=this.light.getLight();let m=!1;for(const T in r)if(!l.aG(r[T],f[T])){m=!0;break}if(!m)return;const _={now:l.h.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(_)}_validate(r,u,f,m,_={}){return(!_||_.validate!==!1)&&ti(this,r.call(l.y,l.e({key:u,style:this.serialize(),value:f,styleSpec:l.v},m)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const f=this.sourceCaches[u];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,f,m,_=!1){let T=!1,A=!1;const L={};for(const N of this._order){const X=this._layers[N];if(X.type!=="symbol")continue;if(!L[X.source]){const he=this.sourceCaches[X.source];L[X.source]=he.getRenderableIds(!0).map(Me=>he.getTileByID(Me)).sort((Me,ke)=>ke.tileID.overscaledZ-Me.tileID.overscaledZ||(Me.tileID.isLessThan(ke.tileID)?-1:1))}const K=this.crossTileSymbolIndex.addLayer(X,L[X.source],r.center.lng);T=T||K}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.h.now(),r.zoom))&&(this.pauseablePlacement=new ms(r,this.map.terrain,this._order,_,u,f,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.h.now()),A=!0),T&&this.pauseablePlacement.placement.setStale()),A||T)for(const N of this._order){const X=this._layers[N];X.type==="symbol"&&this.placement.updateLayerOpacities(X,L[X.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.h.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(r,u,f){this.glyphManager.getGlyphs(u.stacks,f);const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,[""])}getResource(r,u,f){return l.m(u,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(l.y.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,u,f={},m){this._checkLoaded();const _=[{id:r,url:u}],T=[...M(this.stylesheet.sprite),..._];this._validate(l.y.sprite,"sprite",T,null,f)||(this.stylesheet.sprite=T,this._loadSprite(_,!0,m))}removeSprite(r){this._checkLoaded();const u=M(this.stylesheet.sprite);if(u.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;u.splice(u.findIndex(f=>f.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return M(this.stylesheet.sprite)}setSprite(r,u={},f){this._checkLoaded(),r&&this._validate(l.y.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}$r.registerForPluginStateChange=l.aK;var il=l.Q([{name:"a_pos",type:"Int16",components:2}]),Zs="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const ir={prelude:bn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:bn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:bn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:bn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:bn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:bn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:bn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:bn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:bn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:bn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:bn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:bn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:bn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:bn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:bn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:bn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:bn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:bn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:bn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:bn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:bn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:bn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:bn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:bn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:bn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:bn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:bn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Zs),terrainDepth:bn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Zs),terrainCoords:bn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Zs)};function bn(y,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),m=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=_?_.concat(m):m,A={};return{fragmentSource:y=y.replace(u,(L,N,X,K,he)=>(A[he]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_${he}
varying ${X} ${K} ${he};
#else
uniform ${X} ${K} u_${he};
#endif
`:`
#ifdef HAS_UNIFORM_u_${he}
    ${X} ${K} ${he} = u_${he};
#endif
`)),vertexSource:r=r.replace(u,(L,N,X,K,he)=>{const Me=K==="float"?"vec2":"vec4",ke=he.match(/color/)?"color":Me;return A[he]?N==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
attribute ${X} ${Me} a_${he};
varying ${X} ${K} ${he};
#else
uniform ${X} ${K} u_${he};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = a_${he};
#else
    ${X} ${K} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = unpack_mix_${ke}(a_${he}, u_${he}_t);
#else
    ${X} ${K} ${he} = u_${he};
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
attribute ${X} ${Me} a_${he};
#else
uniform ${X} ${K} u_${he};
#endif
`:ke==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${X} ${K} ${he} = a_${he};
#else
    ${X} ${K} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${X} ${K} ${he} = unpack_mix_${ke}(a_${he}, u_${he}_t);
#else
    ${X} ${K} ${he} = u_${he};
#endif
`}),staticAttributes:f,staticUniforms:T}}class ys{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,f,m,_,T,A,L,N){this.context=r;let X=this.boundPaintVertexBuffers.length!==m.length;for(let K=0;!X&&K<m.length;K++)this.boundPaintVertexBuffers[K]!==m[K]&&(X=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==f||X||this.boundIndexBuffer!==_||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==L||this.boundDynamicVertexBuffer3!==N?this.freshBind(u,f,m,_,T,A,L,N):(r.bindVertexArray.set(this.vao),A&&A.bind(),_&&_.dynamicDraw&&_.bind(),L&&L.bind(),N&&N.bind())}freshBind(r,u,f,m,_,T,A,L){const N=r.numAttributes,X=this.context,K=X.gl;this.vao&&this.destroy(),this.vao=X.createVertexArray(),X.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=m,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=L,u.enableAttributes(K,r);for(const he of f)he.enableAttributes(K,r);T&&T.enableAttributes(K,r),A&&A.enableAttributes(K,r),L&&L.enableAttributes(K,r),u.bind(),u.setVertexAttribPointers(K,r,_);for(const he of f)he.bind(),he.setVertexAttribPointers(K,r,_);T&&(T.bind(),T.setVertexAttribPointers(K,r,_)),m&&m.bind(),A&&(A.bind(),A.setVertexAttribPointers(K,r,_)),L&&(L.bind(),L.setVertexAttribPointers(K,r,_)),X.currentNumAttributes=N}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function hr(y){const r=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const f=y[u].split(" ");r.push(f.pop())}return r}class ol{constructor(r,u,f,m,_,T){const A=r.gl;this.program=A.createProgram();const L=hr(u.staticAttributes),N=f?f.getBinderAttributes():[],X=L.concat(N),K=ir.prelude.staticUniforms?hr(ir.prelude.staticUniforms):[],he=u.staticUniforms?hr(u.staticUniforms):[],Me=f?f.getBinderUniforms():[],ke=K.concat(he).concat(Me),Fe=[];for(const st of ke)Fe.indexOf(st)<0&&Fe.push(st);const Ie=f?f.defines():[];_&&Ie.push("#define OVERDRAW_INSPECTOR;"),T&&Ie.push("#define TERRAIN3D;");const Ke=Ie.concat(ir.prelude.fragmentSource,u.fragmentSource).join(`
`),tt=Ie.concat(ir.prelude.vertexSource,u.vertexSource).join(`
`),De=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(De,Ke),A.compileShader(De),!A.getShaderParameter(De,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(De)}`);A.attachShader(this.program,De);const Ye=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Ye,tt),A.compileShader(Ye),!A.getShaderParameter(Ye,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(Ye)}`);A.attachShader(this.program,Ye),this.attributes={};const ot={};this.numAttributes=X.length;for(let st=0;st<this.numAttributes;st++)X[st]&&(A.bindAttribLocation(this.program,st,X[st]),this.attributes[X[st]]=st);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(Ye),A.deleteShader(De);for(let st=0;st<Fe.length;st++){const dt=Fe[st];if(dt&&!ot[dt]){const wt=A.getUniformLocation(this.program,dt);wt&&(ot[dt]=wt)}}this.fixedUniforms=m(r,ot),this.terrainUniforms=((st,dt)=>({u_depth:new l.aL(st,dt.u_depth),u_terrain:new l.aL(st,dt.u_terrain),u_terrain_dim:new l.aM(st,dt.u_terrain_dim),u_terrain_matrix:new l.aN(st,dt.u_terrain_matrix),u_terrain_unpack:new l.aO(st,dt.u_terrain_unpack),u_terrain_exaggeration:new l.aM(st,dt.u_terrain_exaggeration)}))(r,ot),this.binderUniforms=f?f.getUniforms(r,ot):[]}draw(r,u,f,m,_,T,A,L,N,X,K,he,Me,ke,Fe,Ie,Ke,tt){const De=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(m),r.setColorMode(_),r.setCullFace(T),L){r.activeTexture.set(De.TEXTURE2),De.bindTexture(De.TEXTURE_2D,L.depthTexture),r.activeTexture.set(De.TEXTURE3),De.bindTexture(De.TEXTURE_2D,L.texture);for(const ot in this.terrainUniforms)this.terrainUniforms[ot].set(L[ot])}for(const ot in this.fixedUniforms)this.fixedUniforms[ot].set(A[ot]);Fe&&Fe.setUniforms(r,this.binderUniforms,Me,{zoom:ke});let Ye=0;switch(u){case De.LINES:Ye=2;break;case De.TRIANGLES:Ye=3;break;case De.LINE_STRIP:Ye=1}for(const ot of he.get()){const st=ot.vaos||(ot.vaos={});(st[N]||(st[N]=new ys)).bind(r,this,X,Fe?Fe.getPaintVertexBuffers():[],K,ot.vertexOffset,Ie,Ke,tt),De.drawElements(u,ot.primitiveLength*Ye,De.UNSIGNED_SHORT,ot.primitiveOffset*Ye*2)}}}function Ri(y,r,u){const f=1/Ve(u,1,r.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,r.transform.tileZoom)/m,T=_*(u.tileID.canonical.x+u.tileID.wrap*m),A=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[T>>16,A>>16],u_pixel_coord_lower:[65535&T,65535&A]}}const hu=(y,r,u,f)=>{const m=r.style.light,_=m.properties.get("position"),T=[_.x,_.y,_.z],A=function(){var N=new l.A(9);return l.A!=Float32Array&&(N[1]=0,N[2]=0,N[3]=0,N[5]=0,N[6]=0,N[7]=0),N[0]=1,N[4]=1,N[8]=1,N}();m.properties.get("anchor")==="viewport"&&function(N,X){var K=Math.sin(X),he=Math.cos(X);N[0]=he,N[1]=K,N[2]=0,N[3]=-K,N[4]=he,N[5]=0,N[6]=0,N[7]=0,N[8]=1}(A,-r.transform.angle),function(N,X,K){var he=X[0],Me=X[1],ke=X[2];N[0]=he*K[0]+Me*K[3]+ke*K[6],N[1]=he*K[1]+Me*K[4]+ke*K[7],N[2]=he*K[2]+Me*K[5]+ke*K[8]}(T,T,A);const L=m.properties.get("color");return{u_matrix:y,u_lightpos:T,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[L.r,L.g,L.b],u_vertical_gradient:+u,u_opacity:f}},Ji=(y,r,u,f,m,_,T)=>l.e(hu(y,r,u,f),Ri(_,r,T),{u_height_factor:-Math.pow(2,m.overscaledZ)/T.tileSize/8}),hc=y=>({u_matrix:y}),fu=(y,r,u,f)=>l.e(hc(y),Ri(u,r,f)),di=(y,r)=>({u_matrix:y,u_world:r}),sl=(y,r,u,f,m)=>l.e(fu(y,r,u,f),{u_world:m}),Wo=(y,r,u,f)=>{const m=y.transform;let _,T;if(f.paint.get("circle-pitch-alignment")==="map"){const A=Ve(u,1,m.zoom);_=!0,T=[A,A]}else _=!1,T=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(r.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:T}},du=(y,r,u)=>{const f=Ve(u,1,r.zoom),m=Math.pow(2,r.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[r.pixelsToGLUnits[0]/(f*m),r.pixelsToGLUnits[1]/(f*m)],u_overscale_factor:_}},ga=(y,r,u=1)=>({u_matrix:y,u_color:r,u_overlay:0,u_overlay_scale:u}),fc=y=>({u_matrix:y}),dc=(y,r,u,f)=>({u_matrix:y,u_extrude_scale:Ve(r,1,u),u_intensity:f});function ya(y,r){const u=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new l.U(0,f/u).toLngLat().lat,new l.U(0,(f+1)/u).toLngLat().lat]}const al=(y,r,u,f)=>{const m=y.transform;return{u_matrix:ll(y,r,u,f),u_ratio:1/Ve(r,1,m.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},va=(y,r,u,f,m)=>l.e(al(y,r,u,m),{u_image:0,u_image_height:f}),Oh=(y,r,u,f,m)=>{const _=y.transform,T=pc(r,_);return{u_matrix:ll(y,r,u,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Ve(r,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[T,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},vs=(y,r,u,f,m,_)=>{const T=y.lineAtlas,A=pc(r,y.transform),L=u.layout.get("line-cap")==="round",N=T.getDash(f.from,L),X=T.getDash(f.to,L),K=N.width*m.fromScale,he=X.width*m.toScale;return l.e(al(y,r,u,_),{u_patternscale_a:[A/K,-N.height/2],u_patternscale_b:[A/he,-X.height/2],u_sdfgamma:T.width/(256*Math.min(K,he)*y.pixelRatio)/2,u_image:0,u_tex_y_a:N.y,u_tex_y_b:X.y,u_mix:m.t})};function pc(y,r){return 1/Ve(y,1,r.tileZoom)}function ll(y,r,u,f){return y.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const mc=(y,r,u,f,m)=>{return{u_matrix:y,u_tl_parent:r,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(T=m.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(_=m.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:gc(m.paint.get("raster-hue-rotate"))};var _,T};function gc(y){y*=Math.PI/180;const r=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const ul=(y,r,u,f,m,_,T,A,L,N)=>{const X=m.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:X.width/X.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:T,u_coord_matrix:A,u_is_text:+L,u_pitch_with_map:+f,u_texsize:N,u_texture:0}},pu=(y,r,u,f,m,_,T,A,L,N,X)=>{const K=m.transform;return l.e(ul(y,r,u,f,m,_,T,A,L,N),{u_gamma_scale:f?Math.cos(K._pitch)*K.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+X})},_s=(y,r,u,f,m,_,T,A,L,N)=>l.e(pu(y,r,u,f,m,_,T,A,!0,L,!0),{u_texsize_icon:N,u_texture_icon:1}),cl=(y,r,u)=>({u_matrix:y,u_opacity:r,u_color:u}),pi=(y,r,u,f,m,_)=>l.e(function(T,A,L,N){const X=L.imageManager.getPattern(T.from.toString()),K=L.imageManager.getPattern(T.to.toString()),{width:he,height:Me}=L.imageManager.getPixelSize(),ke=Math.pow(2,N.tileID.overscaledZ),Fe=N.tileSize*Math.pow(2,L.transform.tileZoom)/ke,Ie=Fe*(N.tileID.canonical.x+N.tileID.wrap*ke),Ke=Fe*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:X.tl,u_pattern_br_a:X.br,u_pattern_tl_b:K.tl,u_pattern_br_b:K.br,u_texsize:[he,Me],u_mix:A.t,u_pattern_size_a:X.displaySize,u_pattern_size_b:K.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/Ve(N,1,L.transform.tileZoom),u_pixel_coord_upper:[Ie>>16,Ke>>16],u_pixel_coord_lower:[65535&Ie,65535&Ke]}}(f,_,u,m),{u_matrix:y,u_opacity:r}),hl={fillExtrusion:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_lightpos:new l.aP(y,r.u_lightpos),u_lightintensity:new l.aM(y,r.u_lightintensity),u_lightcolor:new l.aP(y,r.u_lightcolor),u_vertical_gradient:new l.aM(y,r.u_vertical_gradient),u_opacity:new l.aM(y,r.u_opacity)}),fillExtrusionPattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_lightpos:new l.aP(y,r.u_lightpos),u_lightintensity:new l.aM(y,r.u_lightintensity),u_lightcolor:new l.aP(y,r.u_lightcolor),u_vertical_gradient:new l.aM(y,r.u_vertical_gradient),u_height_factor:new l.aM(y,r.u_height_factor),u_image:new l.aL(y,r.u_image),u_texsize:new l.aQ(y,r.u_texsize),u_pixel_coord_upper:new l.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,r.u_pixel_coord_lower),u_scale:new l.aP(y,r.u_scale),u_fade:new l.aM(y,r.u_fade),u_opacity:new l.aM(y,r.u_opacity)}),fill:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix)}),fillPattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_image:new l.aL(y,r.u_image),u_texsize:new l.aQ(y,r.u_texsize),u_pixel_coord_upper:new l.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,r.u_pixel_coord_lower),u_scale:new l.aP(y,r.u_scale),u_fade:new l.aM(y,r.u_fade)}),fillOutline:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_world:new l.aQ(y,r.u_world)}),fillOutlinePattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_world:new l.aQ(y,r.u_world),u_image:new l.aL(y,r.u_image),u_texsize:new l.aQ(y,r.u_texsize),u_pixel_coord_upper:new l.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,r.u_pixel_coord_lower),u_scale:new l.aP(y,r.u_scale),u_fade:new l.aM(y,r.u_fade)}),circle:(y,r)=>({u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_scale_with_map:new l.aL(y,r.u_scale_with_map),u_pitch_with_map:new l.aL(y,r.u_pitch_with_map),u_extrude_scale:new l.aQ(y,r.u_extrude_scale),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_matrix:new l.aN(y,r.u_matrix)}),collisionBox:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aM(y,r.u_pixels_to_tile_units),u_extrude_scale:new l.aQ(y,r.u_extrude_scale),u_overscale_factor:new l.aM(y,r.u_overscale_factor)}),collisionCircle:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_inv_matrix:new l.aN(y,r.u_inv_matrix),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_viewport_size:new l.aQ(y,r.u_viewport_size)}),debug:(y,r)=>({u_color:new l.aR(y,r.u_color),u_matrix:new l.aN(y,r.u_matrix),u_overlay:new l.aL(y,r.u_overlay),u_overlay_scale:new l.aM(y,r.u_overlay_scale)}),clippingMask:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix)}),heatmap:(y,r)=>({u_extrude_scale:new l.aM(y,r.u_extrude_scale),u_intensity:new l.aM(y,r.u_intensity),u_matrix:new l.aN(y,r.u_matrix)}),heatmapTexture:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_world:new l.aQ(y,r.u_world),u_image:new l.aL(y,r.u_image),u_color_ramp:new l.aL(y,r.u_color_ramp),u_opacity:new l.aM(y,r.u_opacity)}),hillshade:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_image:new l.aL(y,r.u_image),u_latrange:new l.aQ(y,r.u_latrange),u_light:new l.aQ(y,r.u_light),u_shadow:new l.aR(y,r.u_shadow),u_highlight:new l.aR(y,r.u_highlight),u_accent:new l.aR(y,r.u_accent)}),hillshadePrepare:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_image:new l.aL(y,r.u_image),u_dimension:new l.aQ(y,r.u_dimension),u_zoom:new l.aM(y,r.u_zoom),u_unpack:new l.aO(y,r.u_unpack)}),line:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_ratio:new l.aM(y,r.u_ratio),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,r.u_units_to_pixels)}),lineGradient:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_ratio:new l.aM(y,r.u_ratio),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,r.u_units_to_pixels),u_image:new l.aL(y,r.u_image),u_image_height:new l.aM(y,r.u_image_height)}),linePattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_texsize:new l.aQ(y,r.u_texsize),u_ratio:new l.aM(y,r.u_ratio),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_image:new l.aL(y,r.u_image),u_units_to_pixels:new l.aQ(y,r.u_units_to_pixels),u_scale:new l.aP(y,r.u_scale),u_fade:new l.aM(y,r.u_fade)}),lineSDF:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_ratio:new l.aM(y,r.u_ratio),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,r.u_units_to_pixels),u_patternscale_a:new l.aQ(y,r.u_patternscale_a),u_patternscale_b:new l.aQ(y,r.u_patternscale_b),u_sdfgamma:new l.aM(y,r.u_sdfgamma),u_image:new l.aL(y,r.u_image),u_tex_y_a:new l.aM(y,r.u_tex_y_a),u_tex_y_b:new l.aM(y,r.u_tex_y_b),u_mix:new l.aM(y,r.u_mix)}),raster:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_tl_parent:new l.aQ(y,r.u_tl_parent),u_scale_parent:new l.aM(y,r.u_scale_parent),u_buffer_scale:new l.aM(y,r.u_buffer_scale),u_fade_t:new l.aM(y,r.u_fade_t),u_opacity:new l.aM(y,r.u_opacity),u_image0:new l.aL(y,r.u_image0),u_image1:new l.aL(y,r.u_image1),u_brightness_low:new l.aM(y,r.u_brightness_low),u_brightness_high:new l.aM(y,r.u_brightness_high),u_saturation_factor:new l.aM(y,r.u_saturation_factor),u_contrast_factor:new l.aM(y,r.u_contrast_factor),u_spin_weights:new l.aP(y,r.u_spin_weights)}),symbolIcon:(y,r)=>({u_is_size_zoom_constant:new l.aL(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,r.u_is_size_feature_constant),u_size_t:new l.aM(y,r.u_size_t),u_size:new l.aM(y,r.u_size),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_pitch:new l.aM(y,r.u_pitch),u_rotate_symbol:new l.aL(y,r.u_rotate_symbol),u_aspect_ratio:new l.aM(y,r.u_aspect_ratio),u_fade_change:new l.aM(y,r.u_fade_change),u_matrix:new l.aN(y,r.u_matrix),u_label_plane_matrix:new l.aN(y,r.u_label_plane_matrix),u_coord_matrix:new l.aN(y,r.u_coord_matrix),u_is_text:new l.aL(y,r.u_is_text),u_pitch_with_map:new l.aL(y,r.u_pitch_with_map),u_texsize:new l.aQ(y,r.u_texsize),u_texture:new l.aL(y,r.u_texture)}),symbolSDF:(y,r)=>({u_is_size_zoom_constant:new l.aL(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,r.u_is_size_feature_constant),u_size_t:new l.aM(y,r.u_size_t),u_size:new l.aM(y,r.u_size),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_pitch:new l.aM(y,r.u_pitch),u_rotate_symbol:new l.aL(y,r.u_rotate_symbol),u_aspect_ratio:new l.aM(y,r.u_aspect_ratio),u_fade_change:new l.aM(y,r.u_fade_change),u_matrix:new l.aN(y,r.u_matrix),u_label_plane_matrix:new l.aN(y,r.u_label_plane_matrix),u_coord_matrix:new l.aN(y,r.u_coord_matrix),u_is_text:new l.aL(y,r.u_is_text),u_pitch_with_map:new l.aL(y,r.u_pitch_with_map),u_texsize:new l.aQ(y,r.u_texsize),u_texture:new l.aL(y,r.u_texture),u_gamma_scale:new l.aM(y,r.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_is_halo:new l.aL(y,r.u_is_halo)}),symbolTextAndIcon:(y,r)=>({u_is_size_zoom_constant:new l.aL(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,r.u_is_size_feature_constant),u_size_t:new l.aM(y,r.u_size_t),u_size:new l.aM(y,r.u_size),u_camera_to_center_distance:new l.aM(y,r.u_camera_to_center_distance),u_pitch:new l.aM(y,r.u_pitch),u_rotate_symbol:new l.aL(y,r.u_rotate_symbol),u_aspect_ratio:new l.aM(y,r.u_aspect_ratio),u_fade_change:new l.aM(y,r.u_fade_change),u_matrix:new l.aN(y,r.u_matrix),u_label_plane_matrix:new l.aN(y,r.u_label_plane_matrix),u_coord_matrix:new l.aN(y,r.u_coord_matrix),u_is_text:new l.aL(y,r.u_is_text),u_pitch_with_map:new l.aL(y,r.u_pitch_with_map),u_texsize:new l.aQ(y,r.u_texsize),u_texsize_icon:new l.aQ(y,r.u_texsize_icon),u_texture:new l.aL(y,r.u_texture),u_texture_icon:new l.aL(y,r.u_texture_icon),u_gamma_scale:new l.aM(y,r.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,r.u_device_pixel_ratio),u_is_halo:new l.aL(y,r.u_is_halo)}),background:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_opacity:new l.aM(y,r.u_opacity),u_color:new l.aR(y,r.u_color)}),backgroundPattern:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_opacity:new l.aM(y,r.u_opacity),u_image:new l.aL(y,r.u_image),u_pattern_tl_a:new l.aQ(y,r.u_pattern_tl_a),u_pattern_br_a:new l.aQ(y,r.u_pattern_br_a),u_pattern_tl_b:new l.aQ(y,r.u_pattern_tl_b),u_pattern_br_b:new l.aQ(y,r.u_pattern_br_b),u_texsize:new l.aQ(y,r.u_texsize),u_mix:new l.aM(y,r.u_mix),u_pattern_size_a:new l.aQ(y,r.u_pattern_size_a),u_pattern_size_b:new l.aQ(y,r.u_pattern_size_b),u_scale_a:new l.aM(y,r.u_scale_a),u_scale_b:new l.aM(y,r.u_scale_b),u_pixel_coord_upper:new l.aQ(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aM(y,r.u_tile_units_to_pixels)}),terrain:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_texture:new l.aL(y,r.u_texture),u_ele_delta:new l.aM(y,r.u_ele_delta)}),terrainDepth:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_ele_delta:new l.aM(y,r.u_ele_delta)}),terrainCoords:(y,r)=>({u_matrix:new l.aN(y,r.u_matrix),u_texture:new l.aL(y,r.u_texture),u_terrain_coords_id:new l.aM(y,r.u_terrain_coords_id),u_ele_delta:new l.aM(y,r.u_ele_delta)})};class fl{constructor(r,u,f){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const _a={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class dl{constructor(r,u,f,m){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=r;const _=r.gl;this.buffer=_.createBuffer(),r.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let f=0;f<this.attributes.length;f++){const m=u.attributes[this.attributes[f].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,u,f){for(let m=0;m<this.attributes.length;m++){const _=this.attributes[m],T=u.attributes[_.name];T!==void 0&&r.vertexAttribPointer(T,_.components,r[_a[_.type]],!1,this.itemSize,_.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const xs=new WeakMap;function Xo(y){var r;if(xs.has(y))return xs.get(y);{const u=(r=y.getParameter(y.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return xs.set(y,u),u}}class In{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class pl extends In{getDefault(){return l.aT.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ei extends In{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class mi extends In{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class mu extends In{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class ml extends In{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class gl extends In{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class gu extends In{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class yl extends In{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class vl extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class xa extends In{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class yu extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class _l extends In{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class yc extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class vc extends In{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Hs extends In{getDefault(){return l.aT.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Rh extends In{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class _c extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class vu extends In{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class jh extends In{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Dh extends In{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Bh extends In{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class _u extends In{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class wa extends In{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class xu extends In{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class wu extends In{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Ws extends In{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class xc extends In{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ba extends In{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;const f=this.gl;Xo(f)?f.bindVertexArray(r):(u=f.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class bu extends In{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class ji extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Su extends In{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Vr extends In{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class Xs extends Vr{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class wc extends Vr{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Eu extends Vr{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Dn{constructor(r,u,f,m,_){this.context=r,this.width=u,this.height=f;const T=r.gl,A=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Xs(r,A),m)this.depthAttachment=_?new Eu(r,A):new wc(r,A);else if(_)throw new Error("Stencil cannot be setted without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class Jn{constructor(r,u,f){this.blendFunction=r,this.blendColor=u,this.mask=f}}Jn.Replace=[1,0],Jn.disabled=new Jn(Jn.Replace,l.aT.transparent,[!1,!1,!1,!1]),Jn.unblended=new Jn(Jn.Replace,l.aT.transparent,[!0,!0,!0,!0]),Jn.alphaBlended=new Jn([1,771],l.aT.transparent,[!0,!0,!0,!0]);class Nh{constructor(r){var u,f;if(this.gl=r,this.clearColor=new pl(this),this.clearDepth=new Ei(this),this.clearStencil=new mi(this),this.colorMask=new mu(this),this.depthMask=new ml(this),this.stencilMask=new gl(this),this.stencilFunc=new gu(this),this.stencilOp=new yl(this),this.stencilTest=new vl(this),this.depthRange=new xa(this),this.depthTest=new yu(this),this.depthFunc=new _l(this),this.blend=new yc(this),this.blendFunc=new vc(this),this.blendColor=new Hs(this),this.blendEquation=new Rh(this),this.cullFace=new _c(this),this.cullFaceSide=new vu(this),this.frontFace=new jh(this),this.program=new Dh(this),this.activeTexture=new Bh(this),this.viewport=new _u(this),this.bindFramebuffer=new wa(this),this.bindRenderbuffer=new xu(this),this.bindTexture=new wu(this),this.bindVertexBuffer=new Ws(this),this.bindElementBuffer=new xc(this),this.bindVertexArray=new ba(this),this.pixelStoreUnpack=new bu(this),this.pixelStoreUnpackPremultiplyAlpha=new ji(this),this.pixelStoreUnpackFlipY=new Su(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Xo(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new fl(this,r,u)}createVertexBuffer(r,u,f){return new dl(this,r,u,f)}createRenderbuffer(r,u,f){const m=this.gl,_=m.createRenderbuffer();return this.bindRenderbuffer.set(_),m.renderbufferStorage(m.RENDERBUFFER,r,u,f),this.bindRenderbuffer.set(null),_}createFramebuffer(r,u,f,m){return new Dn(this,r,u,f,m)}clear({color:r,depth:u,stencil:f}){const m=this.gl;let _=0;r&&(_|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f!==void 0&&(_|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),m.clear(_)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){l.aG(r.blendFunction,Jn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Xo(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return Xo(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Sn{constructor(r,u,f){this.func=r,this.mask=u,this.range=f}}Sn.ReadOnly=!1,Sn.ReadWrite=!0,Sn.disabled=new Sn(519,Sn.ReadOnly,[0,1]);const ws=7680;class or{constructor(r,u,f,m,_,T){this.test=r,this.ref=u,this.mask=f,this.fail=m,this.depthFail=_,this.pass=T}}or.disabled=new or({func:519,mask:0},0,0,ws,ws,ws);class Wn{constructor(r,u,f){this.enable=r,this.mode=u,this.frontFace=f}}let qs;function Tu(y,r,u,f,m,_,T){const A=y.context,L=A.gl,N=y.useProgram("collisionBox"),X=[];let K=0,he=0;for(let De=0;De<f.length;De++){const Ye=f[De],ot=r.getTile(Ye),st=ot.getBucket(u);if(!st)continue;let dt=Ye.posMatrix;m[0]===0&&m[1]===0||(dt=y.translatePosMatrix(Ye.posMatrix,ot,m,_));const wt=T?st.textCollisionBox:st.iconCollisionBox,xt=st.collisionCircleArray;if(xt.length>0){const Et=l.Z(),$t=dt;l.aU(Et,st.placementInvProjMatrix,y.transform.glCoordMatrix),l.aU(Et,Et,st.placementViewportMatrix),X.push({circleArray:xt,circleOffset:he,transform:$t,invTransform:Et,coord:Ye}),K+=xt.length/4,he=K}wt&&N.draw(A,L.LINES,Sn.disabled,or.disabled,y.colorModeForRenderPass(),Wn.disabled,du(dt,y.transform,ot),y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ye),u.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,null,y.transform.zoom,null,null,wt.collisionVertexBuffer)}if(!T||!X.length)return;const Me=y.useProgram("collisionCircle"),ke=new l.aV;ke.resize(4*K),ke._trim();let Fe=0;for(const De of X)for(let Ye=0;Ye<De.circleArray.length/4;Ye++){const ot=4*Ye,st=De.circleArray[ot+0],dt=De.circleArray[ot+1],wt=De.circleArray[ot+2],xt=De.circleArray[ot+3];ke.emplace(Fe++,st,dt,wt,xt,0),ke.emplace(Fe++,st,dt,wt,xt,1),ke.emplace(Fe++,st,dt,wt,xt,2),ke.emplace(Fe++,st,dt,wt,xt,3)}(!qs||qs.length<2*K)&&(qs=function(De){const Ye=2*De,ot=new l.aX;ot.resize(Ye),ot._trim();for(let st=0;st<Ye;st++){const dt=6*st;ot.uint16[dt+0]=4*st+0,ot.uint16[dt+1]=4*st+1,ot.uint16[dt+2]=4*st+2,ot.uint16[dt+3]=4*st+2,ot.uint16[dt+4]=4*st+3,ot.uint16[dt+5]=4*st+0}return ot}(K));const Ie=A.createIndexBuffer(qs,!0),Ke=A.createVertexBuffer(ke,l.aW.members,!0);for(const De of X){const Ye={u_matrix:De.transform,u_inv_matrix:De.invTransform,u_camera_to_center_distance:(tt=y.transform).cameraToCenterDistance,u_viewport_size:[tt.width,tt.height]};Me.draw(A,L.TRIANGLES,Sn.disabled,or.disabled,y.colorModeForRenderPass(),Wn.disabled,Ye,y.style.map.terrain&&y.style.map.terrain.getTerrainData(De.coord),u.id,Ke,Ie,l.S.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,y.transform.zoom,null,null,null)}var tt;Ke.destroy(),Ie.destroy()}Wn.disabled=new Wn(!1,1029,2305),Wn.backCCW=new Wn(!0,1029,2305);const Cu=l.ao(new Float32Array(16));function xl(y,r,u,f,m,_){const{horizontalAlign:T,verticalAlign:A}=l.au(y);return new l.P((-(T-.5)*r/m+f[0])*_,(-(A-.5)*u/m+f[1])*_)}function bs(y,r,u,f,m,_,T,A,L,N,X){const K=y.text.placedSymbolArray,he=y.text.dynamicLayoutVertexArray,Me=y.icon.dynamicLayoutVertexArray,ke={};he.clear();for(let Fe=0;Fe<K.length;Fe++){const Ie=K.get(Fe),Ke=Ie.hidden||!Ie.crossTileID||y.allowVerticalPlacement&&!Ie.placedOrientation?null:f[Ie.crossTileID];if(Ke){const tt=new l.P(Ie.anchorX,Ie.anchorY),De=jt(tt,u?T:_,X),Ye=Tn(m.cameraToCenterDistance,De.signedDistanceFromCamera);let ot=l.aj(y.textSizeData,L,Ie)*Ye/l.ap;u&&(ot*=y.tilePixelRatio/A);const{width:st,height:dt,anchor:wt,textOffset:xt,textBoxScale:Et}=Ke,$t=xl(wt,st,dt,xt,Et,ot),Pn=u?jt(tt.add($t),_,X).point:De.point.add(r?$t.rotate(-m.angle):$t),kt=y.allowVerticalPlacement&&Ie.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let ln=0;ln<Ie.numGlyphs;ln++)l.ak(he,Pn,kt);N&&Ie.associatedIconIndex>=0&&(ke[Ie.associatedIconIndex]={shiftedAnchor:Pn,angle:kt})}else _e(Ie.numGlyphs,he)}if(N){Me.clear();const Fe=y.icon.placedSymbolArray;for(let Ie=0;Ie<Fe.length;Ie++){const Ke=Fe.get(Ie);if(Ke.hidden)_e(Ke.numGlyphs,Me);else{const tt=ke[Ie];if(tt)for(let De=0;De<Ke.numGlyphs;De++)l.ak(Me,tt.shiftedAnchor,tt.angle);else _e(Ke.numGlyphs,Me)}}y.icon.dynamicLayoutVertexBuffer.updateData(Me)}y.text.dynamicLayoutVertexBuffer.updateData(he)}function Po(y,r,u){return u.iconsInText&&r?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function wl(y,r,u,f,m,_,T,A,L,N,X,K){const he=y.context,Me=he.gl,ke=y.transform,Fe=A==="map",Ie=L==="map",Ke=A!=="viewport"&&u.layout.get("symbol-placement")!=="point",tt=Fe&&!Ie&&!Ke,De=!u.layout.get("symbol-sort-key").isConstant();let Ye=!1;const ot=y.depthModeForSublayer(0,Sn.ReadOnly),st=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),dt=[];for(const wt of f){const xt=r.getTile(wt),Et=xt.getBucket(u);if(!Et)continue;const $t=m?Et.text:Et.icon;if(!$t||!$t.segments.get().length||!$t.hasVisibleVertices)continue;const Pn=$t.programConfigurations.get(u.id),kt=m||Et.sdfIcons,ln=m?Et.textSizeData:Et.iconSizeData,Ht=Ie||ke.pitch!==0,Xn=y.useProgram(Po(kt,m,Et),Pn),An=l.ah(ln,ke.zoom),_n=y.style.map.terrain&&y.style.map.terrain.getTerrainData(wt);let kn,Sr,nr,si,Zr=[0,0],Ar=null;if(m)Sr=xt.glyphAtlasTexture,nr=Me.LINEAR,kn=xt.glyphAtlasTexture.size,Et.iconsInText&&(Zr=xt.imageAtlasTexture.size,Ar=xt.imageAtlasTexture,si=Ht||y.options.rotating||y.options.zooming||ln.kind==="composite"||ln.kind==="camera"?Me.LINEAR:Me.NEAREST);else{const Er=u.layout.get("icon-size").constantOr(0)!==1||Et.iconsNeedLinear;Sr=xt.imageAtlasTexture,nr=kt||y.options.rotating||y.options.zooming||Er||Ht?Me.LINEAR:Me.NEAREST,kn=xt.imageAtlasTexture.size}const no=Ve(xt,1,y.transform.zoom),ur=je(wt.posMatrix,Ie,Fe,y.transform,no),es=at(wt.posMatrix,Ie,Fe,y.transform,no),ts=st&&Et.hasTextData(),ta=u.layout.get("icon-text-fit")!=="none"&&ts&&Et.hasIconData();if(Ke){const Er=y.style.map.terrain?(Ni,Tr)=>y.style.map.terrain.getElevation(wt,Ni,Tr):null,Hr=u.layout.get("text-rotation-alignment")==="map";_t(Et,wt.posMatrix,y,m,ur,es,Ie,N,Hr,Er)}const La=y.translatePosMatrix(wt.posMatrix,xt,_,T),Al=Ke||m&&st||ta?Cu:ur,gi=y.translatePosMatrix(es,xt,_,T,!0),ai=kt&&u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ci;Ci=kt?Et.iconsInText?_s(ln.kind,An,tt,Ie,y,La,Al,gi,kn,Zr):pu(ln.kind,An,tt,Ie,y,La,Al,gi,m,kn,!0):ul(ln.kind,An,tt,Ie,y,La,Al,gi,m,kn);const za={program:Xn,buffers:$t,uniformValues:Ci,atlasTexture:Sr,atlasTextureIcon:Ar,atlasInterpolation:nr,atlasInterpolationIcon:si,isSDF:kt,hasHalo:ai};if(De&&Et.canOverlap){Ye=!0;const Er=$t.segments.get();for(const Hr of Er)dt.push({segments:new l.S([Hr]),sortKey:Hr.sortKey,state:za,terrainData:_n})}else dt.push({segments:$t.segments,sortKey:0,state:za,terrainData:_n})}Ye&&dt.sort((wt,xt)=>wt.sortKey-xt.sortKey);for(const wt of dt){const xt=wt.state;if(he.activeTexture.set(Me.TEXTURE0),xt.atlasTexture.bind(xt.atlasInterpolation,Me.CLAMP_TO_EDGE),xt.atlasTextureIcon&&(he.activeTexture.set(Me.TEXTURE1),xt.atlasTextureIcon&&xt.atlasTextureIcon.bind(xt.atlasInterpolationIcon,Me.CLAMP_TO_EDGE)),xt.isSDF){const Et=xt.uniformValues;xt.hasHalo&&(Et.u_is_halo=1,bl(xt.buffers,wt.segments,u,y,xt.program,ot,X,K,Et,wt.terrainData)),Et.u_is_halo=0}bl(xt.buffers,wt.segments,u,y,xt.program,ot,X,K,xt.uniformValues,wt.terrainData)}}function bl(y,r,u,f,m,_,T,A,L,N){const X=f.context;m.draw(X,X.gl.TRIANGLES,_,T,A,Wn.disabled,L,N,u.id,y.layoutVertexBuffer,y.indexBuffer,r,u.paint,f.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function qo(y,r,u,f,m){if(!u||!f||!f.imageAtlas)return;const _=f.imageAtlas.patternPositions;let T=_[u.to.toString()],A=_[u.from.toString()];if(!T&&A&&(T=A),!A&&T&&(A=T),!T||!A){const L=m.getPaintProperty(r);T=_[L],A=_[L]}T&&A&&y.setConstantPatternPositions(T,A)}function Sa(y,r,u,f,m,_,T){const A=y.context.gl,L="fill-pattern",N=u.paint.get(L),X=N&&N.constantOr(1),K=u.getCrossfadeParameters();let he,Me,ke,Fe,Ie;T?(Me=X&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",he=A.LINES):(Me=X?"fillPattern":"fill",he=A.TRIANGLES);const Ke=N.constantOr(null);for(const tt of f){const De=r.getTile(tt);if(X&&!De.patternsLoaded())continue;const Ye=De.getBucket(u);if(!Ye)continue;const ot=Ye.programConfigurations.get(u.id),st=y.useProgram(Me,ot),dt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(tt);X&&(y.context.activeTexture.set(A.TEXTURE0),De.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),ot.updatePaintBuffers(K)),qo(ot,L,Ke,De,u);const wt=dt?tt:null,xt=y.translatePosMatrix(wt?wt.posMatrix:tt.posMatrix,De,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(T){Fe=Ye.indexBuffer2,Ie=Ye.segments2;const Et=[A.drawingBufferWidth,A.drawingBufferHeight];ke=Me==="fillOutlinePattern"&&X?sl(xt,y,K,De,Et):di(xt,Et)}else Fe=Ye.indexBuffer,Ie=Ye.segments,ke=X?fu(xt,y,K,De):hc(xt);st.draw(y.context,he,m,y.stencilModeForClipping(tt),_,Wn.disabled,ke,dt,u.id,Ye.layoutVertexBuffer,Fe,Ie,u.paint,y.transform.zoom,ot)}}function vo(y,r,u,f,m,_,T){const A=y.context,L=A.gl,N="fill-extrusion-pattern",X=u.paint.get(N),K=X.constantOr(1),he=u.getCrossfadeParameters(),Me=u.paint.get("fill-extrusion-opacity"),ke=X.constantOr(null);for(const Fe of f){const Ie=r.getTile(Fe),Ke=Ie.getBucket(u);if(!Ke)continue;const tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Fe),De=Ke.programConfigurations.get(u.id),Ye=y.useProgram(K?"fillExtrusionPattern":"fillExtrusion",De);K&&(y.context.activeTexture.set(L.TEXTURE0),Ie.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),De.updatePaintBuffers(he)),qo(De,N,ke,Ie,u);const ot=y.translatePosMatrix(Fe.posMatrix,Ie,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),st=u.paint.get("fill-extrusion-vertical-gradient"),dt=K?Ji(ot,y,st,Me,Fe,he,Ie):hu(ot,y,st,Me);Ye.draw(A,A.gl.TRIANGLES,m,_,T,Wn.backCCW,dt,tt,u.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,u.paint,y.transform.zoom,De,y.style.map.terrain&&Ke.centroidVertexBuffer)}}function Ks(y,r,u,f,m,_,T){const A=y.context,L=A.gl,N=u.fbo;if(!N)return;const X=y.useProgram("hillshade"),K=y.style.map.terrain&&y.style.map.terrain.getTerrainData(r);A.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,N.colorAttachment.get()),X.draw(A,L.TRIANGLES,m,_,T,Wn.disabled,((he,Me,ke,Fe)=>{const Ie=ke.paint.get("hillshade-shadow-color"),Ke=ke.paint.get("hillshade-highlight-color"),tt=ke.paint.get("hillshade-accent-color");let De=ke.paint.get("hillshade-illumination-direction")*(Math.PI/180);ke.paint.get("hillshade-illumination-anchor")==="viewport"&&(De-=he.transform.angle);const Ye=!he.options.moving;return{u_matrix:Fe?Fe.posMatrix:he.transform.calculatePosMatrix(Me.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:ya(0,Me.tileID),u_light:[ke.paint.get("hillshade-exaggeration"),De],u_shadow:Ie,u_highlight:Ke,u_accent:tt}})(y,u,f,K?r:null),K,f.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Gr(y,r,u,f,m,_){const T=y.context,A=T.gl,L=r.dem;if(L&&L.data){const N=L.dim,X=L.stride,K=L.getPixels();if(T.activeTexture.set(A.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||y.getTileTexture(X),r.demTexture){const Me=r.demTexture;Me.update(K,{premultiply:!1}),Me.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else r.demTexture=new q(T,K,A.RGBA,{premultiply:!1}),r.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);T.activeTexture.set(A.TEXTURE0);let he=r.fbo;if(!he){const Me=new q(T,{width:N,height:N,data:null},A.RGBA);Me.bind(A.LINEAR,A.CLAMP_TO_EDGE),he=r.fbo=T.createFramebuffer(N,N,!0,!1),he.colorAttachment.set(Me.texture)}T.bindFramebuffer.set(he.framebuffer),T.viewport.set([0,0,N,N]),y.useProgram("hillshadePrepare").draw(T,A.TRIANGLES,f,m,_,Wn.disabled,((Me,ke)=>{const Fe=ke.stride,Ie=l.Z();return l.aS(Ie,0,l.N,-l.N,0,0,1),l.$(Ie,Ie,[0,-l.N,0]),{u_matrix:Ie,u_image:1,u_dimension:[Fe,Fe],u_zoom:Me.overscaledZ,u_unpack:ke.getUnpackVector()}})(r.tileID,L),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Ss(y,r,u,f,m,_){const T=f.paint.get("raster-fade-duration");if(!_&&T>0){const A=l.h.now(),L=(A-y.timeAdded)/T,N=r?(A-r.timeAdded)/T:-1,X=u.getSource(),K=m.coveringZoomLevel({tileSize:X.tileSize,roundZoom:X.roundZoom}),he=!r||Math.abs(r.tileID.overscaledZ-K)>Math.abs(y.tileID.overscaledZ-K),Me=he&&y.refreshedUponExpiration?1:l.ad(he?L:1-N,0,1);return y.refreshedUponExpiration&&L>=1&&(y.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Me}:{opacity:Me,mix:0}}return{opacity:1,mix:0}}const Sl=new l.aT(1,0,0,1),Ys=new l.aT(0,1,0,1),Iu=new l.aT(0,0,1,1),Ea=new l.aT(1,0,1,1),Ta=new l.aT(0,1,1,1);function ii(y,r,u,f){Ca(y,0,r+u/2,y.transform.width,u,f)}function ko(y,r,u,f){Ca(y,r-u/2,0,u,y.transform.height,f)}function Ca(y,r,u,f,m,_){const T=y.context,A=T.gl;A.enable(A.SCISSOR_TEST),A.scissor(r*y.pixelRatio,u*y.pixelRatio,f*y.pixelRatio,m*y.pixelRatio),T.clear({color:_}),A.disable(A.SCISSOR_TEST)}function Ia(y,r,u){const f=y.context,m=f.gl,_=u.posMatrix,T=y.useProgram("debug"),A=Sn.disabled,L=or.disabled,N=y.colorModeForRenderPass(),X="$debug",K=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);f.activeTexture.set(m.TEXTURE0);const he=r.getTileByID(u.key).latestRawTileData,Me=Math.floor((he&&he.byteLength||0)/1024),ke=r.getTile(u).tileSize,Fe=512/Math.min(ke,512)*(u.overscaledZ/y.transform.zoom)*.5;let Ie=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Ie+=` => ${u.overscaledZ}`),function(Ke,tt){Ke.initDebugOverlayCanvas();const De=Ke.debugOverlayCanvas,Ye=Ke.context.gl,ot=Ke.debugOverlayCanvas.getContext("2d");ot.clearRect(0,0,De.width,De.height),ot.shadowColor="white",ot.shadowBlur=2,ot.lineWidth=1.5,ot.strokeStyle="white",ot.textBaseline="top",ot.font="bold 36px Open Sans, sans-serif",ot.fillText(tt,5,5),ot.strokeText(tt,5,5),Ke.debugOverlayTexture.update(De),Ke.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(y,`${Ie} ${Me}kB`),T.draw(f,m.TRIANGLES,A,L,Jn.alphaBlended,Wn.disabled,ga(_,l.aT.transparent,Fe),null,X,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),T.draw(f,m.LINE_STRIP,A,L,N,Wn.disabled,ga(_,l.aT.red),K,X,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Qn(y,r,u){const f=y.context,m=f.gl,_=y.colorModeForRenderPass(),T=new Sn(m.LEQUAL,Sn.ReadWrite,y.depthRangeFor3D),A=y.useProgram("terrain"),L=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,y.width,y.height]);for(const N of u){const X=y.renderToTexture.getTexture(N),K=r.getTerrainData(N.tileID);f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,X.texture);const he={u_matrix:y.transform.calculatePosMatrix(N.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(y.transform.zoom)};A.draw(f,m.TRIANGLES,T,or.disabled,_,Wn.backCCW,he,K,"terrain",L.vertexBuffer,L.indexBuffer,L.segments)}}class Ko{constructor(r,u){this.context=new Nh(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.Z(),renderTime:0},this.setup(),this.numSublayers=j.maxUnderzooming+j.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new rl}resize(r,u,f){if(this.width=Math.floor(r*f),this.height=Math.floor(u*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,u=new l.a_;u.emplaceBack(0,0),u.emplaceBack(l.N,0),u.emplaceBack(0,l.N),u.emplaceBack(l.N,l.N),this.tileExtentBuffer=r.createVertexBuffer(u,il.members),this.tileExtentSegments=l.S.simpleSegment(0,0,4,2);const f=new l.a_;f.emplaceBack(0,0),f.emplaceBack(l.N,0),f.emplaceBack(0,l.N),f.emplaceBack(l.N,l.N),this.debugBuffer=r.createVertexBuffer(f,il.members),this.debugSegments=l.S.simpleSegment(0,0,4,5);const m=new l.V;m.emplaceBack(0,0,0,0),m.emplaceBack(l.N,0,l.N,0),m.emplaceBack(0,l.N,0,l.N),m.emplaceBack(l.N,l.N,l.N,l.N),this.rasterBoundsBuffer=r.createVertexBuffer(m,vt.members),this.rasterBoundsSegments=l.S.simpleSegment(0,0,4,2);const _=new l.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(_,il.members),this.viewportSegments=l.S.simpleSegment(0,0,4,2);const T=new l.a$;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(T);const A=new l.b0;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(A);const L=this.context.gl;this.stencilClearMode=new or({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=l.Z();l.aS(f,0,this.width,this.height,0,0,1),l.a0(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,u.TRIANGLES,Sn.disabled,this.stencilClearMode,Jn.disabled,Wn.disabled,fc(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source;const f=this.context,m=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(Jn.disabled),f.setDepthMode(Sn.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of u){const A=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,L=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);_.draw(f,m.TRIANGLES,Sn.disabled,new or({func:m.ALWAYS,mask:0},A,255,m.KEEP,m.KEEP,m.REPLACE),Jn.disabled,Wn.disabled,fc(T.posMatrix),L,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new or({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new or({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(r){const u=this.context.gl,f=r.sort((T,A)=>A.overscaledZ-T.overscaledZ),m=f[f.length-1].overscaledZ,_=f[0].overscaledZ-m+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const T={};for(let A=0;A<_;A++)T[A+m]=new or({func:u.GEQUAL,mask:255},A+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[T,f]}return[{[m]:or.disabled},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Jn([r.CONSTANT_COLOR,r.ONE],new l.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Jn.unblended:Jn.alphaBlended}depthModeForSublayer(r,u,f){if(!this.opaquePassEnabledForLayer())return Sn.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Sn(f||this.context.gl.LEQUAL,u,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.h.now()),this.imageManager.beginFrame();const f=this.style._order,m=this.style.sourceCaches,_={},T={},A={};for(const L in m){const N=m[L];N.used&&N.prepare(this.context),_[L]=N.getVisibleCoordinates(),T[L]=_[L].slice().reverse(),A[L]=N.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let L=0;L<f.length;L++)if(this.style._layers[f[L]].is3D()){this.opaquePassCutoff=L;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const L=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||L.length)&&(l.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(N,X){const K=N.context,he=K.gl,Me=Jn.unblended,ke=new Sn(he.LEQUAL,Sn.ReadWrite,[0,1]),Fe=X.getTerrainMesh(),Ie=X.sourceCache.getRenderableTiles(),Ke=N.useProgram("terrainDepth");K.bindFramebuffer.set(X.getFramebuffer("depth").framebuffer),K.viewport.set([0,0,N.width/devicePixelRatio,N.height/devicePixelRatio]),K.clear({color:l.aT.transparent,depth:1});for(const tt of Ie){const De=X.getTerrainData(tt.tileID),Ye={u_matrix:N.transform.calculatePosMatrix(tt.tileID.toUnwrapped()),u_ele_delta:X.getMeshFrameDelta(N.transform.zoom)};Ke.draw(K,he.TRIANGLES,ke,or.disabled,Me,Wn.backCCW,Ye,De,"terrain",Fe.vertexBuffer,Fe.indexBuffer,Fe.segments)}K.bindFramebuffer.set(null),K.viewport.set([0,0,N.width,N.height])}(this,this.style.map.terrain),function(N,X){const K=N.context,he=K.gl,Me=Jn.unblended,ke=new Sn(he.LEQUAL,Sn.ReadWrite,[0,1]),Fe=X.getTerrainMesh(),Ie=X.getCoordsTexture(),Ke=X.sourceCache.getRenderableTiles(),tt=N.useProgram("terrainCoords");K.bindFramebuffer.set(X.getFramebuffer("coords").framebuffer),K.viewport.set([0,0,N.width/devicePixelRatio,N.height/devicePixelRatio]),K.clear({color:l.aT.transparent,depth:1}),X.coordsIndex=[];for(const De of Ke){const Ye=X.getTerrainData(De.tileID);K.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,Ie.texture);const ot={u_matrix:N.transform.calculatePosMatrix(De.tileID.toUnwrapped()),u_terrain_coords_id:(255-X.coordsIndex.length)/255,u_texture:0,u_ele_delta:X.getMeshFrameDelta(N.transform.zoom)};tt.draw(K,he.TRIANGLES,ke,or.disabled,Me,Wn.backCCW,ot,Ye,"terrain",Fe.vertexBuffer,Fe.indexBuffer,Fe.segments),X.coordsIndex.push(De.tileID.key)}K.bindFramebuffer.set(null),K.viewport.set([0,0,N.width,N.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const L of f){const N=this.style._layers[L];if(!N.hasOffscreenPass()||N.isHidden(this.transform.zoom))continue;const X=T[N.source];(N.type==="custom"||X.length)&&this.renderLayer(this,m[N.source],N,X)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.aT.black:l.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const L=this.style._layers[f[this.currentLayer]],N=m[L.source],X=_[L.source];this._renderTileClippingMasks(L,X),this.renderLayer(this,N,L,X)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const L=this.style._layers[f[this.currentLayer]],N=m[L.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(L))continue;const X=(L.type==="symbol"?A:T)[L.source];this._renderTileClippingMasks(L,_[L.source]),this.renderLayer(this,N,L,X)}if(this.options.showTileBoundaries){const L=function(N,X){let K=null;const he=Object.values(N._layers).flatMap(Ie=>Ie.source&&!Ie.isHidden(X)?[N.sourceCaches[Ie.source]]:[]),Me=he.filter(Ie=>Ie.getSource().type==="vector"),ke=he.filter(Ie=>Ie.getSource().type!=="vector"),Fe=Ie=>{(!K||K.getSource().maxzoom<Ie.getSource().maxzoom)&&(K=Ie)};return Me.forEach(Ie=>Fe(Ie)),K||ke.forEach(Ie=>Fe(Ie)),K}(this.style,this.transform.zoom);L&&function(N,X,K){for(let he=0;he<K.length;he++)Ia(N,X,K[he])}(this,L,L.getVisibleCoordinates())}this.options.showPadding&&function(L){const N=L.transform.padding;ii(L,L.transform.height-(N.top||0),3,Sl),ii(L,N.bottom||0,3,Ys),ko(L,N.left||0,3,Iu),ko(L,L.transform.width-(N.right||0),3,Ea);const X=L.transform.centerPoint;(function(K,he,Me,ke){Ca(K,he-1,Me-10,2,20,ke),Ca(K,he-10,Me-1,20,2,ke)})(L,X.x,L.transform.height-X.y,Ta)}(this),this.context.setDefault()}renderLayer(r,u,f,m){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(m||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(_,T,A,L,N){if(_.renderPass!=="translucent")return;const X=or.disabled,K=_.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(he,Me,ke,Fe,Ie,Ke,tt){const De=Me.transform,Ye=Ie==="map",ot=Ke==="map";for(const st of he){const dt=Fe.getTile(st),wt=dt.getBucket(ke);if(!wt||!wt.text||!wt.text.segments.get().length)continue;const xt=l.ah(wt.textSizeData,De.zoom),Et=Ve(dt,1,Me.transform.zoom),$t=je(st.posMatrix,ot,Ye,Me.transform,Et),Pn=ke.layout.get("icon-text-fit")!=="none"&&wt.hasIconData();if(xt){const kt=Math.pow(2,De.zoom-dt.tileID.overscaledZ);bs(wt,Ye,ot,tt,De,$t,st.posMatrix,kt,xt,Pn,Me.style.map.terrain?(ln,Ht)=>Me.style.map.terrain.getElevation(st,ln,Ht):null)}}}(L,_,A,T,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),N),A.paint.get("icon-opacity").constantOr(1)!==0&&wl(_,T,A,L,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),X,K),A.paint.get("text-opacity").constantOr(1)!==0&&wl(_,T,A,L,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),X,K),T.map.showCollisionBoxes&&(Tu(_,T,A,L,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),!0),Tu(_,T,A,L,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),!1))})(r,u,f,m,this.style.placement.variableOffsets);break;case"circle":(function(_,T,A,L){if(_.renderPass!=="translucent")return;const N=A.paint.get("circle-opacity"),X=A.paint.get("circle-stroke-width"),K=A.paint.get("circle-stroke-opacity"),he=!A.layout.get("circle-sort-key").isConstant();if(N.constantOr(1)===0&&(X.constantOr(1)===0||K.constantOr(1)===0))return;const Me=_.context,ke=Me.gl,Fe=_.depthModeForSublayer(0,Sn.ReadOnly),Ie=or.disabled,Ke=_.colorModeForRenderPass(),tt=[];for(let De=0;De<L.length;De++){const Ye=L[De],ot=T.getTile(Ye),st=ot.getBucket(A);if(!st)continue;const dt=st.programConfigurations.get(A.id),wt=_.useProgram("circle",dt),xt=st.layoutVertexBuffer,Et=st.indexBuffer,$t=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ye),Pn={programConfiguration:dt,program:wt,layoutVertexBuffer:xt,indexBuffer:Et,uniformValues:Wo(_,Ye,ot,A),terrainData:$t};if(he){const kt=st.segments.get();for(const ln of kt)tt.push({segments:new l.S([ln]),sortKey:ln.sortKey,state:Pn})}else tt.push({segments:st.segments,sortKey:0,state:Pn})}he&&tt.sort((De,Ye)=>De.sortKey-Ye.sortKey);for(const De of tt){const{programConfiguration:Ye,program:ot,layoutVertexBuffer:st,indexBuffer:dt,uniformValues:wt,terrainData:xt}=De.state;ot.draw(Me,ke.TRIANGLES,Fe,Ie,Ke,Wn.disabled,wt,xt,A.id,st,dt,De.segments,A.paint,_.transform.zoom,Ye)}})(r,u,f,m);break;case"heatmap":(function(_,T,A,L){if(A.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const N=_.context,X=N.gl,K=or.disabled,he=new Jn([X.ONE,X.ONE],l.aT.transparent,[!0,!0,!0,!0]);(function(Me,ke,Fe){const Ie=Me.gl;Me.activeTexture.set(Ie.TEXTURE1),Me.viewport.set([0,0,ke.width/4,ke.height/4]);let Ke=Fe.heatmapFbo;if(Ke)Ie.bindTexture(Ie.TEXTURE_2D,Ke.colorAttachment.get()),Me.bindFramebuffer.set(Ke.framebuffer);else{const tt=Ie.createTexture();Ie.bindTexture(Ie.TEXTURE_2D,tt),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_S,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_T,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MIN_FILTER,Ie.LINEAR),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MAG_FILTER,Ie.LINEAR),Ke=Fe.heatmapFbo=Me.createFramebuffer(ke.width/4,ke.height/4,!1,!1),function(De,Ye,ot,st){var dt,wt;const xt=De.gl,Et=(dt=De.HALF_FLOAT)!==null&&dt!==void 0?dt:xt.UNSIGNED_BYTE,$t=(wt=De.RGBA16F)!==null&&wt!==void 0?wt:xt.RGBA;xt.texImage2D(xt.TEXTURE_2D,0,$t,Ye.width/4,Ye.height/4,0,xt.RGBA,Et,null),st.colorAttachment.set(ot)}(Me,ke,tt,Ke)}})(N,_,A),N.clear({color:l.aT.transparent});for(let Me=0;Me<L.length;Me++){const ke=L[Me];if(T.hasRenderableParent(ke))continue;const Fe=T.getTile(ke),Ie=Fe.getBucket(A);if(!Ie)continue;const Ke=Ie.programConfigurations.get(A.id),tt=_.useProgram("heatmap",Ke),{zoom:De}=_.transform;tt.draw(N,X.TRIANGLES,Sn.disabled,K,he,Wn.disabled,dc(ke.posMatrix,Fe,De,A.paint.get("heatmap-intensity")),null,A.id,Ie.layoutVertexBuffer,Ie.indexBuffer,Ie.segments,A.paint,_.transform.zoom,Ke)}N.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(N,X){const K=N.context,he=K.gl,Me=X.heatmapFbo;if(!Me)return;K.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,Me.colorAttachment.get()),K.activeTexture.set(he.TEXTURE1);let ke=X.colorRampTexture;ke||(ke=X.colorRampTexture=new q(K,X.colorRamp,he.RGBA)),ke.bind(he.LINEAR,he.CLAMP_TO_EDGE),N.useProgram("heatmapTexture").draw(K,he.TRIANGLES,Sn.disabled,or.disabled,N.colorModeForRenderPass(),Wn.disabled,((Fe,Ie,Ke,tt)=>{const De=l.Z();l.aS(De,0,Fe.width,Fe.height,0,0,1);const Ye=Fe.context.gl;return{u_matrix:De,u_world:[Ye.drawingBufferWidth,Ye.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ie.paint.get("heatmap-opacity")}})(N,X),null,X.id,N.viewportBuffer,N.quadTriangleIndexBuffer,N.viewportSegments,X.paint,N.transform.zoom)}(_,A))})(r,u,f,m);break;case"line":(function(_,T,A,L){if(_.renderPass!=="translucent")return;const N=A.paint.get("line-opacity"),X=A.paint.get("line-width");if(N.constantOr(1)===0||X.constantOr(1)===0)return;const K=_.depthModeForSublayer(0,Sn.ReadOnly),he=_.colorModeForRenderPass(),Me=A.paint.get("line-dasharray"),ke=A.paint.get("line-pattern"),Fe=ke.constantOr(1),Ie=A.paint.get("line-gradient"),Ke=A.getCrossfadeParameters(),tt=Fe?"linePattern":Me?"lineSDF":Ie?"lineGradient":"line",De=_.context,Ye=De.gl;let ot=!0;for(const st of L){const dt=T.getTile(st);if(Fe&&!dt.patternsLoaded())continue;const wt=dt.getBucket(A);if(!wt)continue;const xt=wt.programConfigurations.get(A.id),Et=_.context.program.get(),$t=_.useProgram(tt,xt),Pn=ot||$t.program!==Et,kt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(st),ln=ke.constantOr(null);if(ln&&dt.imageAtlas){const An=dt.imageAtlas,_n=An.patternPositions[ln.to.toString()],kn=An.patternPositions[ln.from.toString()];_n&&kn&&xt.setConstantPatternPositions(_n,kn)}const Ht=kt?st:null,Xn=Fe?Oh(_,dt,A,Ke,Ht):Me?vs(_,dt,A,Me,Ke,Ht):Ie?va(_,dt,A,wt.lineClipsArray.length,Ht):al(_,dt,A,Ht);if(Fe)De.activeTexture.set(Ye.TEXTURE0),dt.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),xt.updatePaintBuffers(Ke);else if(Me&&(Pn||_.lineAtlas.dirty))De.activeTexture.set(Ye.TEXTURE0),_.lineAtlas.bind(De);else if(Ie){const An=wt.gradients[A.id];let _n=An.texture;if(A.gradientVersion!==An.version){let kn=256;if(A.stepInterpolant){const Sr=T.getSource().maxzoom,nr=st.canonical.z===Sr?Math.ceil(1<<_.transform.maxZoom-st.canonical.z):1;kn=l.ad(l.aY(wt.maxLineLength/l.N*1024*nr),256,De.maxTextureSize)}An.gradient=l.aZ({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:kn,image:An.gradient||void 0,clips:wt.lineClipsArray}),An.texture?An.texture.update(An.gradient):An.texture=new q(De,An.gradient,Ye.RGBA),An.version=A.gradientVersion,_n=An.texture}De.activeTexture.set(Ye.TEXTURE0),_n.bind(A.stepInterpolant?Ye.NEAREST:Ye.LINEAR,Ye.CLAMP_TO_EDGE)}$t.draw(De,Ye.TRIANGLES,K,_.stencilModeForClipping(st),he,Wn.disabled,Xn,kt,A.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,A.paint,_.transform.zoom,xt,wt.layoutVertexBuffer2),ot=!1}})(r,u,f,m);break;case"fill":(function(_,T,A,L){const N=A.paint.get("fill-color"),X=A.paint.get("fill-opacity");if(X.constantOr(1)===0)return;const K=_.colorModeForRenderPass(),he=A.paint.get("fill-pattern"),Me=_.opaquePassEnabledForLayer()&&!he.constantOr(1)&&N.constantOr(l.aT.transparent).a===1&&X.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===Me){const ke=_.depthModeForSublayer(1,_.renderPass==="opaque"?Sn.ReadWrite:Sn.ReadOnly);Sa(_,T,A,L,ke,K,!1)}if(_.renderPass==="translucent"&&A.paint.get("fill-antialias")){const ke=_.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,Sn.ReadOnly);Sa(_,T,A,L,ke,K,!0)}})(r,u,f,m);break;case"fill-extrusion":(function(_,T,A,L){const N=A.paint.get("fill-extrusion-opacity");if(N!==0&&_.renderPass==="translucent"){const X=new Sn(_.context.gl.LEQUAL,Sn.ReadWrite,_.depthRangeFor3D);if(N!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))vo(_,T,A,L,X,or.disabled,Jn.disabled),vo(_,T,A,L,X,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const K=_.colorModeForRenderPass();vo(_,T,A,L,X,or.disabled,K)}}})(r,u,f,m);break;case"hillshade":(function(_,T,A,L){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const N=_.context,X=_.depthModeForSublayer(0,Sn.ReadOnly),K=_.colorModeForRenderPass(),[he,Me]=_.renderPass==="translucent"?_.stencilConfigForOverlap(L):[{},L];for(const ke of Me){const Fe=T.getTile(ke);Fe.needsHillshadePrepare!==void 0&&Fe.needsHillshadePrepare&&_.renderPass==="offscreen"?Gr(_,Fe,A,X,or.disabled,K):_.renderPass==="translucent"&&Ks(_,ke,Fe,A,X,he[ke.overscaledZ],K)}N.viewport.set([0,0,_.width,_.height])})(r,u,f,m);break;case"raster":(function(_,T,A,L){if(_.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!L.length)return;const N=_.context,X=N.gl,K=T.getSource(),he=_.useProgram("raster"),Me=_.colorModeForRenderPass(),[ke,Fe]=K instanceof It?[{},L]:_.stencilConfigForOverlap(L),Ie=Fe[Fe.length-1].overscaledZ,Ke=!_.options.moving;for(const tt of Fe){const De=_.depthModeForSublayer(tt.overscaledZ-Ie,A.paint.get("raster-opacity")===1?Sn.ReadWrite:Sn.ReadOnly,X.LESS),Ye=T.getTile(tt);Ye.registerFadeDuration(A.paint.get("raster-fade-duration"));const ot=T.findLoadedParent(tt,0),st=Ss(Ye,ot,T,A,_.transform,_.style.map.terrain);let dt,wt;const xt=A.paint.get("raster-resampling")==="nearest"?X.NEAREST:X.LINEAR;N.activeTexture.set(X.TEXTURE0),Ye.texture.bind(xt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),N.activeTexture.set(X.TEXTURE1),ot?(ot.texture.bind(xt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),dt=Math.pow(2,ot.tileID.overscaledZ-Ye.tileID.overscaledZ),wt=[Ye.tileID.canonical.x*dt%1,Ye.tileID.canonical.y*dt%1]):Ye.texture.bind(xt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);const Et=_.style.map.terrain&&_.style.map.terrain.getTerrainData(tt),$t=Et?tt:null,Pn=$t?$t.posMatrix:_.transform.calculatePosMatrix(tt.toUnwrapped(),Ke),kt=mc(Pn,wt||[0,0],dt||1,st,A);K instanceof It?he.draw(N,X.TRIANGLES,De,or.disabled,Me,Wn.disabled,kt,Et,A.id,K.boundsBuffer,_.quadTriangleIndexBuffer,K.boundsSegments):he.draw(N,X.TRIANGLES,De,ke[tt.overscaledZ],Me,Wn.disabled,kt,Et,A.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(r,u,f,m);break;case"background":(function(_,T,A,L){const N=A.paint.get("background-color"),X=A.paint.get("background-opacity");if(X===0)return;const K=_.context,he=K.gl,Me=_.transform,ke=Me.tileSize,Fe=A.paint.get("background-pattern");if(_.isPatternMissing(Fe))return;const Ie=!Fe&&N.a===1&&X===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Ie)return;const Ke=or.disabled,tt=_.depthModeForSublayer(0,Ie==="opaque"?Sn.ReadWrite:Sn.ReadOnly),De=_.colorModeForRenderPass(),Ye=_.useProgram(Fe?"backgroundPattern":"background"),ot=L||Me.coveringTiles({tileSize:ke,terrain:_.style.map.terrain});Fe&&(K.activeTexture.set(he.TEXTURE0),_.imageManager.bind(_.context));const st=A.getCrossfadeParameters();for(const dt of ot){const wt=L?dt.posMatrix:_.transform.calculatePosMatrix(dt.toUnwrapped()),xt=Fe?pi(wt,X,_,Fe,{tileID:dt,tileSize:ke},st):cl(wt,X,N),Et=_.style.map.terrain&&_.style.map.terrain.getTerrainData(dt);Ye.draw(K,he.TRIANGLES,tt,Ke,De,Wn.disabled,xt,Et,A.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(r,0,f,m);break;case"custom":(function(_,T,A){const L=_.context,N=A.implementation;if(_.renderPass==="offscreen"){const X=N.prerender;X&&(_.setCustomLayerDefaults(),L.setColorMode(_.colorModeForRenderPass()),X.call(N,L.gl,_.transform.customLayerMatrix()),L.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),L.setColorMode(_.colorModeForRenderPass()),L.setStencilMode(or.disabled);const X=N.renderingMode==="3d"?new Sn(_.context.gl.LEQUAL,Sn.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,Sn.ReadOnly);L.setDepthMode(X),N.render(L.gl,_.transform.customLayerMatrix()),L.setDirty(),_.setBaseState(),L.bindFramebuffer.set(null)}})(r,0,f)}}translatePosMatrix(r,u,f,m,_){if(!f[0]&&!f[1])return r;const T=_?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(T){const N=Math.sin(T),X=Math.cos(T);f=[f[0]*X-f[1]*N,f[0]*N+f[1]*X]}const A=[_?f[0]:Ve(u,f[0],this.transform.zoom),_?f[1]:Ve(u,f[1],this.transform.zoom),0],L=new Float32Array(16);return l.$(L,r,A),L}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!u||!f}useProgram(r,u){this.cache=this.cache||{};const f=r+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new ol(this.context,ir[r],u,hl[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:u}=this.context.gl;return this.width!==r||this.height!==u}}class oi{constructor(r,u){this.points=r,this.planes=u}static fromInvProjectionMatrix(r,u,f){const m=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const L=1/(A=l.ag([],A,r))[3]/u*m;return l.b3(A,A,[L,L,1/A[3],L])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const L=function(he,Me){var ke=Me[0],Fe=Me[1],Ie=Me[2],Ke=ke*ke+Fe*Fe+Ie*Ie;return Ke>0&&(Ke=1/Math.sqrt(Ke)),he[0]=Me[0]*Ke,he[1]=Me[1]*Ke,he[2]=Me[2]*Ke,he}([],function(he,Me,ke){var Fe=Me[0],Ie=Me[1],Ke=Me[2],tt=ke[0],De=ke[1],Ye=ke[2];return he[0]=Ie*Ye-Ke*De,he[1]=Ke*tt-Fe*Ye,he[2]=Fe*De-Ie*tt,he}([],U([],_[A[0]],_[A[1]]),U([],_[A[2]],_[A[1]]))),N=-((X=L)[0]*(K=_[A[1]])[0]+X[1]*K[1]+X[2]*K[2]);var X,K;return L.concat(N)});return new oi(_,T)}}class Es{constructor(r,u){this.min=r,this.max=u,this.center=function(f,m,_){return f[0]=.5*m[0],f[1]=.5*m[1],f[2]=.5*m[2],f}([],function(f,m,_){return f[0]=m[0]+_[0],f[1]=m[1]+_[1],f[2]=m[2]+_[2],f}([],this.min,this.max))}quadrant(r){const u=[r%2==0,r<2],f=ne(this.min),m=ne(this.max);for(let _=0;_<u.length;_++)f[_]=u[_]?this.min[_]:this.center[_],m[_]=u[_]?this.center[_]:this.max[_];return m[2]=this.max[2],new Es(f,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let m=0;m<r.planes.length;m++){const _=r.planes[m];let T=0;for(let A=0;A<u.length;A++)l.b4(_,u[A])>=0&&T++;if(T===0)return 0;T!==u.length&&(f=!1)}if(f)return 2;for(let m=0;m<3;m++){let _=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let A=0;A<r.points.length;A++){const L=r.points[A][m]-this.min[m];_=Math.min(_,L),T=Math.max(T,L)}if(T<0||_>this.max[m]-this.min[m])return 0}return 1}}class Js{constructor(r=0,u=0,f=0,m=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=f,this.right=m}interpolate(r,u,f){return u.top!=null&&r.top!=null&&(this.top=l.B.number(r.top,u.top,f)),u.bottom!=null&&r.bottom!=null&&(this.bottom=l.B.number(r.bottom,u.bottom,f)),u.left!=null&&r.left!=null&&(this.left=l.B.number(r.left,u.left,f)),u.right!=null&&r.right!=null&&(this.right=l.B.number(r.right,u.right,f)),this}getCenter(r,u){const f=l.ad((this.left+r-this.right)/2,0,r),m=l.ad((this.top+u-this.bottom)/2,0,u);return new l.P(f,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Js(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Qi{constructor(r,u,f,m,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=r||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Js,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const r=new Qi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this._minEleveationForCurrentTile=r._minEleveationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const u=-l.b5(r,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var f=new l.A(4);return l.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,m,_){var T=m[0],A=m[1],L=m[2],N=m[3],X=Math.sin(_),K=Math.cos(_);f[0]=T*K+L*X,f[1]=A*K+N*X,f[2]=T*-X+L*K,f[3]=A*-X+N*K}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const u=l.ad(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const u=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,f){this._unmodified=!1,this._edgeInsets.interpolate(r,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const u=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(r){const u=[new l.b6(0,r)];if(this._renderWorldCopies){const f=this.pointCoordinate(new l.P(0,0)),m=this.pointCoordinate(new l.P(this.width,0)),_=this.pointCoordinate(new l.P(this.width,this.height)),T=this.pointCoordinate(new l.P(0,this.height)),A=Math.floor(Math.min(f.x,m.x,_.x,T.x)),L=Math.floor(Math.max(f.x,m.x,_.x,T.x)),N=1;for(let X=A-N;X<=L+N;X++)X!==0&&u.push(new l.b6(X,r))}return u}coveringTiles(r){var u,f;let m=this.coveringZoomLevel(r);const _=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),A=l.U.fromLngLat(this.center),L=Math.pow(2,m),N=[L*T.x,L*T.y,0],X=[L*A.x,L*A.y,0],K=oi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let he=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(he=m);const Me=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,ke=De=>({aabb:new Es([De*L,0,0],[(De+1)*L,L,0]),zoom:0,x:0,y:0,wrap:De,fullyVisible:!1}),Fe=[],Ie=[],Ke=m,tt=r.reparseOverscaled?_:m;if(this._renderWorldCopies)for(let De=1;De<=3;De++)Fe.push(ke(-De)),Fe.push(ke(De));for(Fe.push(ke(0));Fe.length>0;){const De=Fe.pop(),Ye=De.x,ot=De.y;let st=De.fullyVisible;if(!st){const $t=De.aabb.intersects(K);if($t===0)continue;st=$t===2}const dt=r.terrain?N:X,wt=De.aabb.distanceX(dt),xt=De.aabb.distanceY(dt),Et=Math.max(Math.abs(wt),Math.abs(xt));if(De.zoom===Ke||Et>Me+(1<<Ke-De.zoom)-2&&De.zoom>=he){const $t=Ke-De.zoom,Pn=N[0]-.5-(Ye<<$t),kt=N[1]-.5-(ot<<$t);Ie.push({tileID:new l.O(De.zoom===Ke?tt:De.zoom,De.wrap,De.zoom,Ye,ot),distanceSq:E([X[0]-.5-Ye,X[1]-.5-ot]),tileDistanceToCamera:Math.sqrt(Pn*Pn+kt*kt)})}else for(let $t=0;$t<4;$t++){const Pn=(Ye<<1)+$t%2,kt=(ot<<1)+($t>>1),ln=De.zoom+1;let Ht=De.aabb.quadrant($t);if(r.terrain){const Xn=new l.O(ln,De.wrap,ln,Pn,kt),An=r.terrain.getMinMaxElevation(Xn),_n=(u=An.minElevation)!==null&&u!==void 0?u:this.elevation,kn=(f=An.maxElevation)!==null&&f!==void 0?f:this.elevation;Ht=new Es([Ht.min[0],Ht.min[1],_n],[Ht.max[0],Ht.max[1],kn])}Fe.push({aabb:Ht,zoom:ln,x:Pn,y:kt,wrap:De.wrap,fullyVisible:st})}}return Ie.sort((De,Ye)=>De.distanceSq-Ye.distanceSq).map(De=>De.tileID)}resize(r,u){this.width=r,this.height=u,this.pixelsToGLUnits=[2/r,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const u=l.ad(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.P(l.G(r.lng)*this.worldSize,l.H(u)*this.worldSize)}unproject(r){return new l.U(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const u=this.pointLocation(this.centerPoint,r),f=r.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-f))return;const m=this.getCameraPosition(),_=l.U.fromLngLat(m.lngLat,m.altitude),T=l.U.fromLngLat(u,f),A=_.x-T.x,L=_.y-T.y,N=_.z-T.z,X=Math.sqrt(A*A+L*L+N*N),K=this.scaleZoom(this.cameraToCenterDistance/X/this.tileSize);this._elevation=f,this._center=u,this.zoom=K}setLocationAtPoint(r,u){const f=this.pointCoordinate(u),m=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(r),T=new l.U(_.x-(f.x-m.x),_.y-(f.y-m.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,u){return u?this.coordinatePoint(this.locationCoordinate(r),u.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,u){return this.coordinateLocation(this.pointCoordinate(r,u))}locationCoordinate(r){return l.U.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,u){if(u){const he=u.pointCoordinate(r);if(he!=null)return he}const f=[r.x,r.y,0,1],m=[r.x,r.y,1,1];l.ag(f,f,this.pixelMatrixInverse),l.ag(m,m,this.pixelMatrixInverse);const _=f[3],T=m[3],A=f[1]/_,L=m[1]/T,N=f[2]/_,X=m[2]/T,K=N===X?0:(0-N)/(X-N);return new l.U(l.B.number(f[0]/_,m[0]/T,K)/this.worldSize,l.B.number(A,L,K)/this.worldSize)}coordinatePoint(r,u=0,f=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,u,1];return l.ag(m,m,f),new l.P(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Pe().extend(this.pointLocation(new l.P(0,r))).extend(this.pointLocation(new l.P(this.width,r))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Pe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,u=!1){const f=r.key,m=u?this._alignedPosMatrixCache:this._posMatrixCache;if(m[f])return m[f];const _=r.canonical,T=this.worldSize/this.zoomScale(_.z),A=_.x+Math.pow(2,_.z)*r.wrap,L=l.ao(new Float64Array(16));return l.$(L,L,[A*T,_.y*T,0]),l.a0(L,L,[T/l.N,T/l.N,1]),l.a1(L,u?this.alignedProjMatrix:this.projMatrix,L),m[f]=new Float32Array(L),m[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,u,f,m,_=-90,T=90,A=-180,L=180;const N=this.size,X=this._unmodified;if(this.latRange){const Me=this.latRange;_=l.H(Me[1])*this.worldSize,T=l.H(Me[0])*this.worldSize,r=T-_<N.y?N.y/(T-_):0}if(this.lngRange){const Me=this.lngRange;A=l.b5(l.G(Me[0])*this.worldSize,0,this.worldSize),L=l.b5(l.G(Me[1])*this.worldSize,0,this.worldSize),L<A&&(L+=this.worldSize),u=L-A<N.x?N.x/(L-A):0}const K=this.point,he=Math.max(u||0,r||0);if(he)return this.center=this.unproject(new l.P(u?(L+A)/2:K.x,r?(T+_)/2:K.y)),this.zoom+=this.scaleZoom(he),this._unmodified=X,void(this._constraining=!1);if(this.latRange){const Me=K.y,ke=N.y/2;Me-ke<_&&(m=_+ke),Me+ke>T&&(m=T-ke)}if(this.lngRange){const Me=(A+L)/2,ke=l.b5(K.x,Me-this.worldSize/2,Me+this.worldSize/2),Fe=N.x/2;ke-Fe<A&&(f=A+Fe),ke+Fe>L&&(f=L-Fe)}f===void 0&&m===void 0||(this.center=this.unproject(new l.P(f!==void 0?f:K.x,m!==void 0?m:K.y)).wrap()),this._unmodified=X,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b7(1,this.center.lat)*this.worldSize;let m=l.ao(new Float64Array(16));l.a0(m,m,[this.width/2,-this.height/2,1]),l.$(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=l.ao(new Float64Array(16)),l.a0(m,m,[1,-1,1]),l.$(m,m,[-1,-1,0]),l.a0(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this._minEleveationForCurrentTile),A=_-T*this._pixelPerMeter/Math.cos(this._pitch),L=T<0?A:_,N=Math.PI/2+this._pitch,X=this._fov*(.5+r.y/this.height),K=Math.sin(X)*L/Math.sin(l.ad(Math.PI-N-X,.01,Math.PI-.01)),he=this.getHorizon(),Me=2*Math.atan(he/this.cameraToCenterDistance)*(.5+r.y/(2*he)),ke=Math.sin(Me)*L/Math.sin(l.ad(Math.PI-N-Me,.01,Math.PI-.01)),Fe=Math.min(K,ke),Ie=1.01*(Math.cos(Math.PI/2-this._pitch)*Fe+L),Ke=this.height/50;m=new Float64Array(16),l.b8(m,this._fov,this.width/this.height,Ke,Ie),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,l.a0(m,m,[1,-1,1]),l.$(m,m,[0,0,-this.cameraToCenterDistance]),l.b9(m,m,this._pitch),l.ae(m,m,this.angle),l.$(m,m,[-u,-f,0]),this.mercatorMatrix=l.a0([],m,[this.worldSize,this.worldSize,this.worldSize]),l.a0(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.a1(new Float64Array(16),this.labelPlaneMatrix,m),l.$(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=l.as([],m),this.pixelMatrix3D=l.a1(new Float64Array(16),this.labelPlaneMatrix,m);const tt=this.width%2/2,De=this.height%2/2,Ye=Math.cos(this.angle),ot=Math.sin(this.angle),st=u-Math.round(u)+Ye*tt+ot*De,dt=f-Math.round(f)+Ye*De+ot*tt,wt=new Float64Array(m);if(l.$(wt,wt,[st>.5?st-1:st,dt>.5?dt-1:dt,0]),this.alignedProjMatrix=wt,m=l.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new l.P(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,r))}getCameraQueryGeometry(r){const u=this.getCameraPoint();if(r.length===1)return[r[0],u];{let f=u.x,m=u.y,_=u.x,T=u.y;for(const A of r)f=Math.min(f,A.x),m=Math.min(m,A.y),_=Math.max(_,A.x),T=Math.max(T,A.y);return[new l.P(f,m),new l.P(_,m),new l.P(_,T),new l.P(f,T),new l.P(f,m)]}}}function Yo(y,r){let u,f=!1,m=null,_=null;const T=()=>{m=null,f&&(y.apply(_,u),m=setTimeout(T,r),f=!1)};return(...A)=>(f=!0,_=this,u=A,m||T(),m)}class Aa{constructor(r){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let f;return u.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(f=m)}),(f&&f[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:f,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=Yo(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,m),T=Math.round(u.lng*_)/_,A=Math.round(u.lat*_)/_,L=this._map.getBearing(),N=this._map.getPitch();let X="";if(X+=r?`/${T}/${A}/${f}`:`${f}/${A}/${T}`,(L||N)&&(X+="/"+Math.round(10*L)/10),N&&(X+=`/${Math.round(N)}`),this._hashName){const K=this._hashName;let he=!1;const Me=window.location.hash.slice(1).split("&").map(ke=>{const Fe=ke.split("=")[0];return Fe===K?(he=!0,`${Fe}=${X}`):ke}).filter(ke=>ke);return he||Me.push(`${K}=${X}`),`#${Me.join("&")}`}return`#${X}`}}const Ts={linearity:.3,easing:l.ba(0,0,.3,1)},El=l.e({deceleration:2500,maxSpeed:1400},Ts),Au=l.e({deceleration:20,maxSpeed:1400},Ts),Pu=l.e({deceleration:1e3,maxSpeed:360},Ts),ku=l.e({deceleration:1e3,maxSpeed:90},Ts);class V{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.h.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=l.h.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){const _=Ue(u.pan.mag(),f,l.e({},El,r||{}));m.offset=u.pan.mult(_.amount/u.pan.mag()),m.center=this._map.transform.center,ge(m,_)}if(u.zoom){const _=Ue(u.zoom,f,Au);m.zoom=this._map.transform.zoom+_.amount,ge(m,_)}if(u.bearing){const _=Ue(u.bearing,f,Pu);m.bearing=this._map.transform.bearing+l.ad(_.amount,-179,179),ge(m,_)}if(u.pitch){const _=Ue(u.pitch,f,ku);m.pitch=this._map.transform.pitch+_.amount,ge(m,_)}if(m.zoom||m.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;m.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.e(m,{noMoveStart:!0})}}function ge(y,r){(!y.duration||y.duration<r.duration)&&(y.duration=r.duration,y.easing=r.easing)}function Ue(y,r,u){const{maxSpeed:f,linearity:m,deceleration:_}=u,T=l.ad(y*m/(r/1e3),-f,f),A=Math.abs(T)/(_*m);return{easing:u.easing,duration:1e3*A,amount:T*(A/2)}}class it extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f,m={}){const _=w.mousePos(u.getCanvasContainer(),f),T=u.unproject(_);super(r,l.e({point:_,lngLat:T,originalEvent:f},m)),this._defaultPrevented=!1,this.target=u}}class Lt extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){const m=r==="touchend"?f.changedTouches:f.touches,_=w.touchPos(u.getCanvasContainer(),m),T=_.map(L=>u.unproject(L)),A=_.reduce((L,N,X,K)=>L.add(N.div(K.length)),new l.P(0,0));super(r,{points:_,point:A,lngLats:T,lngLat:u.unproject(A),originalEvent:f}),this._defaultPrevented=!1}}class Tt extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Zt{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Tt(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new it(r.type,this._map,r))}mouseup(r){this._map.fire(new it(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new it(r.type,this._map,r))}dblclick(r){return this._firePreventable(new it(r.type,this._map,r))}mouseover(r){this._map.fire(new it(r.type,this._map,r))}mouseout(r){this._map.fire(new it(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Lt(r.type,this._map,r))}touchmove(r){this._map.fire(new Lt(r.type,this._map,r))}touchend(r){this._map.fire(new Lt(r.type,this._map,r))}touchcancel(r){this._map.fire(new Lt(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xt{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new it(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new it("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new it(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class dn{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(l.P.convert(r),this._map.terrain)}}class Zn{constructor(r,u){this._map=r,this._tr=new dn(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=f,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const _=Math.min(m.x,f.x),T=Math.max(m.x,f.x),A=Math.min(m.y,f.y),L=Math.max(m.y,f.y);w.setTransform(this._box,`translate(${_}px,${A}px)`),this._box.style.width=T-_+"px",this._box.style.height=L-A+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const f=this._startPos,m=u;if(this.reset(),w.suppressClick(),f.x!==m.x||f.y!==m.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:r})),{cameraAnimation:_=>_.fitScreenCoordinates(f,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new l.k(r,{originalEvent:u}))}}function En(y,r){if(y.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${r.length}`);const u={};for(let f=0;f<y.length;f++)u[y[f].identifier]=r[f];return u}class Un{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(m){const _=new l.P(0,0);for(const T of m)_._add(T);return _.div(m.length)}(u),this.touches=En(f,u)))}touchmove(r,u,f){if(this.aborted||!this.centroid)return;const m=En(f,u);for(const _ in this.touches){const T=m[_];(!T||T.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(r,u,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class sr{constructor(r){this.singleTap=new Un(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,f){this.singleTap.touchstart(r,u,f)}touchmove(r,u,f){this.singleTap.touchmove(r,u,f)}touchend(r,u,f){const m=this.singleTap.touchend(r,u,f);if(m){const _=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(m)<30;if(_&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class ar{constructor(r){this._tr=new dn(r),this._zoomIn=new sr({numTouches:1,numTaps:2}),this._zoomOut=new sr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,f){this._zoomIn.touchstart(r,u,f),this._zoomOut.touchstart(r,u,f)}touchmove(r,u,f){this._zoomIn.touchmove(r,u,f),this._zoomOut.touchmove(r,u,f)}touchend(r,u,f){const m=this._zoomIn.touchend(r,u,f),_=this._zoomOut.touchend(r,u,f),T=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(m)},{originalEvent:r})}):_?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(_)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tr{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=u.length?u[0]:u;return!this._moved&&m.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(f,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&w.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Jo={0:1,2:2};class eo{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=w.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,f){const m=Jo[f];return u.buttons===void 0||(u.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return w.mouseButton(r)===this._eventButton}}class Qo{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const Pa=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(r){r.preventDefault()}},Mo=({enable:y,clickTolerance:r,bearingDegreesPerPixelMoved:u=.8})=>{const f=new eo({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new tr({clickTolerance:r,move:(m,_)=>({bearingDelta:(_.x-m.x)*u}),moveStateManager:f,enable:y,assignEvents:Pa})},Di=({enable:y,clickTolerance:r,pitchDegreesPerPixelMoved:u=-.5})=>{const f=new eo({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new tr({clickTolerance:r,move:(m,_)=>({pitchDelta:(_.y-m.y)*u}),moveStateManager:f,enable:y,assignEvents:Pa})};class Bt{constructor(r,u){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,u,f){return this._calculateTransform(r,u,f)}touchmove(r,u,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,u,f)}touchend(r,u,f){this._calculateTransform(r,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,f){f.length>0&&(this._active=!0);const m=En(f,u),_=new l.P(0,0),T=new l.P(0,0);let A=0;for(const N in m){const X=m[N],K=this._touches[N];K&&(_._add(X),T._add(X.sub(K)),A++,m[N]=X)}if(this._touches=m,A<this._minTouches||!T.mag())return;const L=T.div(A);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(A),panDelta:L}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,f){if(!this._firstTwoTouches)return;r.preventDefault();const[m,_]=this._firstTwoTouches,T=Qs(f,u,m),A=Qs(f,u,_);if(!T||!A)return;const L=this._aroundCenter?null:T.add(A).div(2);return this._move([T,A],L,r)}touchend(r,u,f){if(!this._firstTwoTouches)return;const[m,_]=this._firstTwoTouches,T=Qs(f,u,m),A=Qs(f,u,_);T&&A||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Qs(y,r,u){for(let f=0;f<y.length;f++)if(y[f].identifier===u)return r[f]}function Tl(y,r){return Math.log(y/r)/Math.LN2}class qd extends bc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Tl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Tl(this._distance,f),pinchAround:u}}}function Ft(y,r){return 180*y.angleWith(r)/Math.PI}class Uh extends bc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u){const f=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ft(this._vector,f),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,f=Ft(r,this._startVector);return Math.abs(f)<u}}function $h(y){return Math.abs(y.y)>Math.abs(y.x)}class ly extends bc{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,f){super.touchstart(r,u,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,$h(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),_=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,_,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,f){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,_=u.mag()>=2;if(!m&&!_)return;if(!m||!_)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const T=r.y>0==u.y>0;return $h(r)&&$h(u)&&T}}const Vh={panStep:100,bearingStep:15,pitchStep:10};class Kd{constructor(r){this._tr=new dn(r);const u=Vh;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,f=0,m=0,_=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),_=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),_=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(f=0,m=0),{cameraAnimation:A=>{const L=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:Yd,zoom:u?Math.round(L.zoom)+u*(r.shiftKey?2:1):L.zoom,bearing:L.bearing+f*this._bearingStep,pitch:L.pitch+m*this._pitchStep,offset:[-_*this._panStep,-T*this._panStep],center:L.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Yd(y){return y*(2-y)}const Jd=4.000244140625;class uy{constructor(r,u){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new dn(r),this._el=r.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=l.h.now(),m=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%Jd==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,r),f=this._tr;this._around=l.L.convert(this._aroundCenter?f.center:f.unproject(u)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>Jd?this._wheelZoomRate:this._defaultZoomRate;let L=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&L!==0&&(L=1/L);const N=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(N*L))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,m=this._easing;let _,T=!1;if(this._type==="wheel"&&f&&m){const A=Math.min((l.h.now()-this._lastWheelEventTime)/200,1),L=m(A);_=l.B.number(f,u,L),A<1?this._frameId||(this._frameId=!0):T=!0}else _=u,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:_-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=l.bb;if(this._prevEase){const f=this._prevEase,m=(l.h.now()-f.start)/f.duration,_=f.easing(m+.01)-f.easing(m),T=.27/Math.sqrt(_*_+1e-4)*.01,A=Math.sqrt(.0729-T*T);u=l.ba(T,A,.25,1)}return this._prevEase={start:l.h.now(),duration:r,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Gh{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Zh{constructor(r){this._tr=new dn(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hh{constructor(){this._tap=new sr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,u,f){if(!this._swipePoint)if(this._tapTime){const m=u[0],_=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(m)<30;_&&T?f.length>0&&(this._swipePoint=m,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,u,f)}touchmove(r,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const m=u[0],_=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(r,u,f)}touchend(r,u,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const m=this._tap.touchend(r,u,f);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wh{constructor(r,u,f){this._el=r,this._mousePan=u,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Bi{constructor(r,u,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ea{constructor(r,u,f,m){this._el=r,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Mu=y=>y.zoom||y.drag||y.pitch||y.rotate;class Xh extends l.k{}function Lu(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class qh{constructor(r,u){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,_)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=m.type==="renderFrame"?void 0:m,A={needsRenderFrame:!1},L={},N={},X=m.touches,K=X?this._getMapTouches(X):void 0,he=K?w.touchPos(this._el,K):w.mousePos(this._el,m);for(const{handlerName:Fe,handler:Ie,allowed:Ke}of this._handlers){if(!Ie.isEnabled())continue;let tt;this._blockedByActive(N,Ke,Fe)?Ie.reset():Ie[_||m.type]&&(tt=Ie[_||m.type](m,he,K),this.mergeHandlerResult(A,L,tt,Fe,T),tt&&tt.needsRenderFrame&&this._triggerRenderFrame()),(tt||Ie.isActive())&&(N[Fe]=Ie)}const Me={};for(const Fe in this._previousActiveHandlers)N[Fe]||(Me[Fe]=T);this._previousActiveHandlers=N,(Object.keys(Me).length||Lu(A))&&(this._changes.push([A,L,Me]),this._triggerRenderFrame()),(Object.keys(N).length||Lu(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ke}=A;ke&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ke(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new V(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,_,T]of this._listeners)w.addEventListener(m,_,m===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,u,f]of this._listeners)w.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new Zt(u,r));const m=u.boxZoom=new Zn(u,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const _=new ar(u),T=new Zh(u);u.doubleClickZoom=new Gh(T,_),this._add("tapZoom",_),this._add("clickZoom",T),r.interactive&&r.doubleClickZoom&&u.doubleClickZoom.enable();const A=new Hh;this._add("tapDragZoom",A);const L=u.touchPitch=new ly(u);this._add("touchPitch",L),r.interactive&&r.touchPitch&&u.touchPitch.enable(r.touchPitch);const N=Mo(r),X=Di(r);u.dragRotate=new Bi(r,N,X),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",X,["mouseRotate"]),r.interactive&&r.dragRotate&&u.dragRotate.enable();const K=(({enable:Ke,clickTolerance:tt})=>{const De=new eo({checkCorrectEvent:Ye=>w.mouseButton(Ye)===0&&!Ye.ctrlKey});return new tr({clickTolerance:tt,move:(Ye,ot)=>({around:ot,panDelta:ot.sub(Ye)}),activateOnStart:!0,moveStateManager:De,enable:Ke,assignEvents:Pa})})(r),he=new Bt(r,u);u.dragPan=new Wh(f,K,he),this._add("mousePan",K),this._add("touchPan",he,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&u.dragPan.enable(r.dragPan);const Me=new Uh,ke=new qd;u.touchZoomRotate=new ea(f,ke,Me,A),this._add("touchRotate",Me,["touchPan","touchZoom"]),this._add("touchZoom",ke,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&u.touchZoomRotate.enable(r.touchZoomRotate);const Fe=u.scrollZoom=new uy(u,()=>this._triggerRenderFrame());this._add("scrollZoom",Fe,["mousePan"]),r.interactive&&r.scrollZoom&&u.scrollZoom.enable(r.scrollZoom);const Ie=u.keyboard=new Kd(u);this._add("keyboard",Ie),r.interactive&&r.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Xt(u))}_add(r,u,f){this._handlers.push({handlerName:r,handler:u,allowed:f}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Mu(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,f){for(const m in r)if(m!==f&&(!u||u.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const u=[];for(const f of r)this._el.contains(f.target)&&u.push(f);return u}mergeHandlerResult(r,u,f,m,_){if(!f)return;l.e(r,f);const T={handlerName:m,originalEvent:f.originalEvent||_};f.zoomDelta!==void 0&&(u.zoom=T),f.panDelta!==void 0&&(u.drag=T),f.pitchDelta!==void 0&&(u.pitch=T),f.bearingDelta!==void 0&&(u.rotate=T)}_applyChanges(){const r={},u={},f={};for(const[m,_,T]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new l.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),l.e(u,_),l.e(f,T);this._updateMapTransform(r,u,f),this._changes=[]}_updateMapTransform(r,u,f){const m=this._map,_=m._getTransformForUpdate(),T=m.terrain;if(!(Lu(r)||T&&this._terrainMovement))return this._fireEvents(u,f,!0);let{panDelta:A,zoomDelta:L,bearingDelta:N,pitchDelta:X,around:K,pinchAround:he}=r;he!==void 0&&(K=he),m._stop(!0),K=K||m.transform.centerPoint;const Me=_.pointLocation(A?K.sub(A):K);N&&(_.bearing+=N),X&&(_.pitch+=X),L&&(_.zoom+=L),T?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(A)):_.setLocationAtPoint(Me,K):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(Me,K),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(m.terrain)})):_.setLocationAtPoint(Me,K),m._applyUpdatedTransform(_),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,f,!0)}_fireEvents(r,u,f){const m=Mu(this._eventsInProgress),_=Mu(r),T={};for(const X in r){const{originalEvent:K}=r[X];this._eventsInProgress[X]||(T[`${X}start`]=K),this._eventsInProgress[X]=r[X]}!m&&_&&this._fireEvent("movestart",_.originalEvent);for(const X in T)this._fireEvent(X,T[X]);_&&this._fireEvent("move",_.originalEvent);for(const X in r){const{originalEvent:K}=r[X];this._fireEvent(X,K)}const A={};let L;for(const X in this._eventsInProgress){const{handlerName:K,originalEvent:he}=this._eventsInProgress[X];this._handlersById[K].isActive()||(delete this._eventsInProgress[X],L=u[K]||he,A[`${X}end`]=L)}for(const X in A)this._fireEvent(X,A[X]);const N=Mu(this._eventsInProgress);if(f&&(m||_)&&!N){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),K=he=>he!==0&&-this._bearingSnap<he&&he<this._bearingSnap;!X||!X.essential&&l.h.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:L})),K(this._map.getBearing())&&this._map.resetNorth()):(K(X.bearing||this._map.getBearing())&&(X.bearing=0),X.freezeElevation=!0,this._map.easeTo(X,{originalEvent:L})),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new l.k(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Xh("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Qd extends l.E{constructor(r,u){super(),this._renderFrameCallback=()=>{const f=Math.min((l.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.L(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}panBy(r,u,f){return r=l.P.convert(r).mult(-1),this.panTo(this.transform.center,l.e({offset:r},u),f)}panTo(r,u,f){return this.easeTo(l.e({center:r},u),f)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,f){return this.easeTo(l.e({zoom:r},u),f)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,f){return this.easeTo(l.e({bearing:r},u),f)}resetNorth(r,u){return this.rotateTo(0,l.e({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}cameraForBounds(r,u){r=Pe.convert(r);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,u)}_cameraForBoxAndBearing(r,u,f,m){const _={top:0,bottom:0,right:0,left:0};if(typeof(m=l.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const ot=m.padding;m.padding={top:ot,bottom:ot,right:ot,left:ot}}m.padding=l.e(_,m.padding);const T=this.transform,A=T.padding,L=T.project(l.L.convert(r)),N=T.project(l.L.convert(u)),X=L.rotate(-f*Math.PI/180),K=N.rotate(-f*Math.PI/180),he=new l.P(Math.max(X.x,K.x),Math.max(X.y,K.y)),Me=new l.P(Math.min(X.x,K.x),Math.min(X.y,K.y)),ke=he.sub(Me),Fe=(T.width-(A.left+A.right+m.padding.left+m.padding.right))/ke.x,Ie=(T.height-(A.top+A.bottom+m.padding.top+m.padding.bottom))/ke.y;if(Ie<0||Fe<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ke=Math.min(T.scaleZoom(T.scale*Math.min(Fe,Ie)),m.maxZoom),tt=l.P.convert(m.offset),De=new l.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(f*Math.PI/180),Ye=tt.add(De).mult(T.scale/T.zoomScale(Ke));return{center:T.unproject(L.add(N).div(2).sub(Ye)),zoom:Ke,bearing:f}}fitBounds(r,u,f){return this._fitInternal(this.cameraForBounds(r,u),u,f)}fitScreenCoordinates(r,u,f,m,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(r)),this.transform.pointLocation(l.P.convert(u)),f,m),m,_)}_fitInternal(r,u,f){return r?(delete(u=l.e(r,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(r,u){this.stop();const f=this._getTransformForUpdate();let m=!1,_=!1,T=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(m=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=l.L.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(_=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(T=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new l.k("movestart",u)).fire(new l.k("move",u)),m&&this.fire(new l.k("zoomstart",u)).fire(new l.k("zoom",u)).fire(new l.k("zoomend",u)),_&&this.fire(new l.k("rotatestart",u)).fire(new l.k("rotate",u)).fire(new l.k("rotateend",u)),T&&this.fire(new l.k("pitchstart",u)).fire(new l.k("pitch",u)).fire(new l.k("pitchend",u)),this.fire(new l.k("moveend",u))}calculateCameraOptionsFromTo(r,u,f,m=0){const _=l.U.fromLngLat(r,u),T=l.U.fromLngLat(f,m),A=T.x-_.x,L=T.y-_.y,N=T.z-_.z,X=Math.hypot(A,L,N);if(X===0)throw new Error("Can't calculate camera options with same From and To");const K=Math.hypot(A,L),he=this.transform.scaleZoom(this.transform.cameraToCenterDistance/X/this.transform.tileSize),Me=180*Math.atan2(A,-L)/Math.PI;let ke=180*Math.acos(K/X)/Math.PI;return ke=N<0?90-ke:90+ke,{center:T.toLngLat(),zoom:he,pitch:ke,bearing:Me}}easeTo(r,u){this._stop(!1,r.easeId),((r=l.e({offset:[0,0],duration:500,easing:l.bb},r)).animate===!1||!r.essential&&l.h.prefersReducedMotion)&&(r.duration=0);const f=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),T=this.getPitch(),A=this.getPadding(),L="zoom"in r?+r.zoom:m,N="bearing"in r?this._normalizeBearing(r.bearing,_):_,X="pitch"in r?+r.pitch:T,K="padding"in r?r.padding:f.padding,he=l.P.convert(r.offset);let Me=f.centerPoint.add(he);const ke=f.pointLocation(Me),Fe=l.L.convert(r.center||ke);this._normalizeCenter(Fe);const Ie=f.project(ke),Ke=f.project(Fe).sub(Ie),tt=f.zoomScale(L-m);let De,Ye;r.around&&(De=l.L.convert(r.around),Ye=f.locationPoint(De));const ot={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||L!==m,this._rotating=this._rotating||_!==N,this._pitching=this._pitching||X!==T,this._padding=!f.isPaddingEqual(K),this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,ot),this.terrain&&this._prepareElevation(Fe),this._ease(st=>{if(this._zooming&&(f.zoom=l.B.number(m,L,st)),this._rotating&&(f.bearing=l.B.number(_,N,st)),this._pitching&&(f.pitch=l.B.number(T,X,st)),this._padding&&(f.interpolatePadding(A,K,st),Me=f.centerPoint.add(he)),this.terrain&&!r.freezeElevation&&this._updateElevation(st),De)f.setLocationAtPoint(De,Ye);else{const dt=f.zoomScale(f.zoom-m),wt=L>m?Math.min(2,tt):Math.max(.5,tt),xt=Math.pow(wt,1-st),Et=f.unproject(Ie.add(Ke.mult(st*xt)).mult(dt));f.setLocationAtPoint(f.renderWorldCopies?Et.wrap():Et,Me)}this._applyUpdatedTransform(f),this._fireMoveEvents(u)},st=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,st)},r),this}_prepareEase(r,u,f={}){this._moving=!0,u||f.moving||this.fire(new l.k("movestart",r)),this._zooming&&!f.zooming&&this.fire(new l.k("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new l.k("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new l.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&u!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(u-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.elevation=l.B.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const u=r.clone(),{center:f,zoom:m,pitch:_,bearing:T,elevation:A}=this.transformCameraUpdate(u);f&&(u.center=f),m!==void 0&&(u.zoom=m),_!==void 0&&(u.pitch=_),T!==void 0&&(u.bearing=T),A!==void 0&&(u.elevation=A),this.transform.apply(u)}_fireMoveEvents(r){this.fire(new l.k("move",r)),this._zooming&&this.fire(new l.k("zoom",r)),this._rotating&&this.fire(new l.k("rotate",r)),this._pitching&&this.fire(new l.k("pitch",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const f=this._zooming,m=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new l.k("zoomend",r)),m&&this.fire(new l.k("rotateend",r)),_&&this.fire(new l.k("pitchend",r)),this.fire(new l.k("moveend",r))}flyTo(r,u){if(!r.essential&&l.h.prefersReducedMotion){const Ht=l.F(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ht,u)}this.stop(),r=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.bb},r);const f=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),T=this.getPitch(),A=this.getPadding(),L="zoom"in r?l.ad(+r.zoom,f.minZoom,f.maxZoom):m,N="bearing"in r?this._normalizeBearing(r.bearing,_):_,X="pitch"in r?+r.pitch:T,K="padding"in r?r.padding:f.padding,he=f.zoomScale(L-m),Me=l.P.convert(r.offset);let ke=f.centerPoint.add(Me);const Fe=f.pointLocation(ke),Ie=l.L.convert(r.center||Fe);this._normalizeCenter(Ie);const Ke=f.project(Fe),tt=f.project(Ie).sub(Ke);let De=r.curve;const Ye=Math.max(f.width,f.height),ot=Ye/he,st=tt.mag();if("minZoom"in r){const Ht=l.ad(Math.min(r.minZoom,m,L),f.minZoom,f.maxZoom),Xn=Ye/f.zoomScale(Ht-m);De=Math.sqrt(Xn/st*2)}const dt=De*De;function wt(Ht){const Xn=(ot*ot-Ye*Ye+(Ht?-1:1)*dt*dt*st*st)/(2*(Ht?ot:Ye)*dt*st);return Math.log(Math.sqrt(Xn*Xn+1)-Xn)}function xt(Ht){return(Math.exp(Ht)-Math.exp(-Ht))/2}function Et(Ht){return(Math.exp(Ht)+Math.exp(-Ht))/2}const $t=wt(!1);let Pn=function(Ht){return Et($t)/Et($t+De*Ht)},kt=function(Ht){return Ye*((Et($t)*(xt(Xn=$t+De*Ht)/Et(Xn))-xt($t))/dt)/st;var Xn},ln=(wt(!0)-$t)/De;if(Math.abs(st)<1e-6||!isFinite(ln)){if(Math.abs(Ye-ot)<1e-6)return this.easeTo(r,u);const Ht=ot<Ye?-1:1;ln=Math.abs(Math.log(ot/Ye))/De,kt=function(){return 0},Pn=function(Xn){return Math.exp(Ht*De*Xn)}}return r.duration="duration"in r?+r.duration:1e3*ln/("screenSpeed"in r?+r.screenSpeed/De:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=_!==N,this._pitching=X!==T,this._padding=!f.isPaddingEqual(K),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(Ie),this._ease(Ht=>{const Xn=Ht*ln,An=1/Pn(Xn);f.zoom=Ht===1?L:m+f.scaleZoom(An),this._rotating&&(f.bearing=l.B.number(_,N,Ht)),this._pitching&&(f.pitch=l.B.number(T,X,Ht)),this._padding&&(f.interpolatePadding(A,K,Ht),ke=f.centerPoint.add(Me)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ht);const _n=Ht===1?Ie:f.unproject(Ke.add(tt.mult(kt(Xn))).mult(An));f.setLocationAtPoint(f.renderWorldCopies?_n.wrap():_n,ke),this._applyUpdatedTransform(f),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!r){const f=this.handlers;f&&f.stop(!1)}return this}_ease(r,u,f){f.animate===!1||f.duration===0?(r(1),u()):(this._easeStart=l.h.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,u){r=l.b5(r,-180,180);const f=Math.abs(r-u);return Math.abs(r-360-u)<f&&(r-=360),Math.abs(r+360-u)<f&&(r+=360),r}_normalizeCenter(r){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=r.lng-u.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(l.L.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}class to{constructor(r={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const f=this._map._getUIString(`AttributionControl.${u}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const u=this._map.style.sourceCaches;for(const m in u){const _=u[m];if(_.used||_.usedForTerrain){const T=_.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,_)=>m.length-_.length),r=r.filter((m,_)=>{for(let T=_+1;T<r.length;T++)if(r[T].indexOf(m)>=0)return!1;return!0});const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class lr{constructor(r={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const f=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Sc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const m of f)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Kh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var ep=l.Q([{name:"a_pos3d",type:"Int16",components:3}]);class tp extends l.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const f={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))f[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),l.aS(m.posMatrix,0,l.N,0,l.N,0,1),this._tiles[m.key]=new sn(m,this.tileSize));for(const m in this._tiles)f[m]||delete this._tiles[m]}freeRtt(r){for(const u in this._tiles){const f=this._tiles[u];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const u={};for(const f of this._renderableTilesKeys){const m=this._tiles[f].tileID;if(m.canonical.equals(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16),l.aS(_.posMatrix,0,l.N,0,l.N,0,1),u[f]=_}else if(m.canonical.isChildOf(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=m.canonical.z-r.canonical.z,A=m.canonical.x-(m.canonical.x>>T<<T),L=m.canonical.y-(m.canonical.y>>T<<T),N=l.N>>T;l.aS(_.posMatrix,0,N,0,N,0,1),l.$(_.posMatrix,_.posMatrix,[-A*N,-L*N,0]),u[f]=_}else if(r.canonical.isChildOf(m.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=r.canonical.z-m.canonical.z,A=r.canonical.x-(r.canonical.x>>T<<T),L=r.canonical.y-(r.canonical.y>>T<<T),N=l.N>>T;l.aS(_.posMatrix,0,l.N,0,l.N,0,1),l.$(_.posMatrix,_.posMatrix,[A*N,L*N,0]),l.a0(_.posMatrix,_.posMatrix,[1/2**T,1/2**T,0]),u[f]=_}}return u}getSourceTile(r,u){const f=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>f.maxzoom&&(m=f.maxzoom),m<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!_||!_.dem)&&u)for(;m>=f.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(r.scaledTo(m--).key);return _}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=r)}}class np{constructor(r,u,f){this.painter=r,this.sourceCache=new tp(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,f,m=l.N){var _;if(!(u>=0&&u<m&&f>=0&&f<m))return 0;const T=this.getTerrainData(r),A=(_=T.tile)===null||_===void 0?void 0:_.dem;if(!A)return 0;const L=function(ke,Fe,Ie){var Ke=Fe[0],tt=Fe[1];return ke[0]=Ie[0]*Ke+Ie[4]*tt+Ie[12],ke[1]=Ie[1]*Ke+Ie[5]*tt+Ie[13],ke}([],[u/m*l.N,f/m*l.N],T.u_terrain_matrix),N=[L[0]*A.dim,L[1]*A.dim],X=Math.floor(N[0]),K=Math.floor(N[1]),he=N[0]-X,Me=N[1]-K;return A.get(X,K)*(1-he)*(1-Me)+A.get(X+1,K)*he*(1-Me)+A.get(X,K+1)*(1-he)*Me+A.get(X+1,K+1)*he*Me}getElevationForLngLatZoom(r,u){const{tileID:f,mercatorX:m,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(r,u);return this.getElevation(f,m%l.N,_%l.N,l.N)}getElevation(r,u,f,m=l.N){return this.getDEMElevation(r,u,f,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,_=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new q(m,_,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new q(m,new l.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const m=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new q(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const m=this.sourceCache.sourceCache._source.maxzoom;let _=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?_=r.canonical.z-m:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>_<<_),A=r.canonical.y-(r.canonical.y>>_<<_),L=l.bc(new Float64Array(16),[1/(l.N<<_),1/(l.N<<_),0]);l.$(L,L,[T*l.N,A*l.N,0]),this._demMatrixCache[r.key]={matrix:L,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,f=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new q(u.context,{width:f,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new q(u.context,{width:f,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,m,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,T=0;_<this._coordsTextureSize;_++)for(let A=0;A<this._coordsTextureSize;A++,T+=4)u[T+0]=255&A,u[T+1]=255&_,u[T+2]=A>>8<<4|_>>8,u[T+3]=0;const f=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new q(r,f,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){const u=new Uint8Array(4),f=this.painter.context,m=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),f.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),T=u[1]+((15&u[2])<<8),A=this.coordsIndex[255-u[3]],L=A&&this.sourceCache.getTileByID(A);if(!L)return null;const N=this._coordsTextureSize,X=(1<<L.tileID.canonical.z)*N;return new l.U(this._allowMercatorOverflow(r,(L.tileID.canonical.x*N+_)/X),(L.tileID.canonical.y*N+T)/X,this.getElevation(L.tileID,_,T,N))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,u=new l.bd,f=new l.b0,m=this.meshSize,_=l.N/m,T=m*m;for(let K=0;K<=m;K++)for(let he=0;he<=m;he++)u.emplaceBack(he*_,K*_,0);for(let K=0;K<T;K+=m+1)for(let he=0;he<m;he++)f.emplaceBack(he+K,m+he+K+1,m+he+K+2),f.emplaceBack(he+K,m+he+K+2,he+K+1);const A=u.length,L=A+2*(m+1);for(const K of[0,1])for(let he=0;he<=m;he++)for(const Me of[0,1])u.emplaceBack(he*_,K*l.N,Me);for(let K=0;K<2*m;K+=2)f.emplaceBack(L+K,L+K+1,L+K+3),f.emplaceBack(L+K,L+K+3,L+K+2),f.emplaceBack(A+K,A+K+3,A+K+1),f.emplaceBack(A+K,A+K+2,A+K+3);const N=u.length,X=N+2*(m+1);for(const K of[0,1])for(let he=0;he<=m;he++)for(const Me of[0,1])u.emplaceBack(K*l.N,he*_,Me);for(let K=0;K<2*m;K+=2)f.emplaceBack(N+K,N+K+1,N+K+3),f.emplaceBack(N+K,N+K+3,N+K+2),f.emplaceBack(X+K,X+K+3,X+K+1),f.emplaceBack(X+K,X+K+2,X+K+3);return this._mesh={indexBuffer:r.createIndexBuffer(f),vertexBuffer:r.createVertexBuffer(u,ep.members),segments:l.S.simpleSegment(0,0,u.length,f.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*l.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,u){var f;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,u);return(f=this.getMinMaxElevation(m).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=u.dem.min*this.exaggeration,f.maxElevation=u.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,u){const f=l.U.fromLngLat(r.wrap()),m=(1<<u)*l.N,_=f.x*m,T=f.y*m,A=Math.floor(_/l.N),L=Math.floor(T/l.N);return{tileID:new l.O(u,0,u,A,L),mercatorX:_,mercatorY:T}}_allowMercatorOverflow(r,u){const f=r.x<this.painter.width/2;let m=l.bf(u);const _=this.painter.transform.center.lng;return f&&Math.sign(m)>0&&Math.sign(_)<0||!f&&Math.sign(m)<0&&Math.sign(_)>0?(m=360*Math.sign(_)+m,l.G(m)):u}}class cy{constructor(r,u,f){this._context=r,this._size=u,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new q(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(f.texture),{id:r,fbo:u,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Ti={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ec{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new cy(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(u)),this._coordsDescendingInv={};for(const f in r.sourceCaches){this._coordsDescendingInv[f]={};const m=r.sourceCaches[f].getVisibleCoordinates();for(const _ of m){const T=this.terrain.sourceCache.getTerrainCoords(_);for(const A in T)this._coordsDescendingInv[f][A]||(this._coordsDescendingInv[f][A]=[]),this._coordsDescendingInv[f][A].push(T[A])}}this._coordsDescendingInvStr={};for(const f of r._order){const m=r._layers[f],_=m.source;if(Ti[m.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const T in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][T]=this._coordsDescendingInv[_][T].map(A=>A.key).sort().join()}}for(const f of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[m][f.tileID.key];_&&_!==f.rttCoords[m]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const u=r.type,f=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Ti[u]&&(this._prevType&&Ti[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(Ti[this._prevType]||Ti[u]&&m){this._prevType=u;const _=this._stacks.length-1,T=this._stacks[_]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(Qn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[_]){const N=this.pool.getObjectForId(A.rtt[_].id);if(N.stamp===A.rtt[_].stamp){this.pool.useObject(N);continue}}const L=this.pool.getOrCreateFreeObject();this.pool.useObject(L),this.pool.stampObject(L),A.rtt[_]={id:L.id,stamp:L.stamp},f.context.bindFramebuffer.set(L.fbo.framebuffer),f.context.clear({color:l.aT.transparent,stencil:0}),f.currentStencilSource=void 0;for(let N=0;N<T.length;N++){const X=f.style._layers[T[N]],K=X.source?this._coordsDescendingInv[X.source][A.tileID.key]:[A.tileID];f.context.viewport.set([0,0,L.fbo.width,L.fbo.height]),f._renderTileClippingMasks(X,K),f.renderLayer(f,f.style.sourceCaches[X.source],X,K),X.source&&(A.rttCoords[X.source]=this._coordsDescendingInvStr[X.source][A.tileID.key])}}return Qn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ti[u]}return!1}}const qt=b,an={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},zu=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},Yh={showCompass:!0,showZoom:!0,visualizePitch:!1};class Jh{constructor(r,u,f=!1){this.mousedown=T=>{this.startMouse(l.e({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),w.mousePos(this.element,T)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,w.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),_=r.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Mo({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:A,bearingDegreesPerPixelMoved:L=.8})=>{const N=new Qo;return new tr({clickTolerance:A,move:(X,K)=>({bearingDelta:(K.x-X.x)*L}),moveStateManager:N,enable:T,assignEvents:zu})})({clickTolerance:m,enable:!0}),this.map=r,f&&(this.mousePitch=Di({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:A,pitchDegreesPerPixelMoved:L=-.5})=>{const N=new Qo;return new tr({clickTolerance:A,move:(X,K)=>({pitchDelta:(K.y-X.y)*L}),moveStateManager:N,enable:T,assignEvents:zu})})({clickTolerance:_,enable:!0})),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(r,u){this.mouseRotate.dragStart(r,u),this.mousePitch&&this.mousePitch.dragStart(r,u),w.disableDrag()}startTouch(r,u){this.touchRotate.dragStart(r,u),this.touchPitch&&this.touchPitch.dragStart(r,u),w.disableDrag()}moveMouse(r,u){const f=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,u)||{};if(m&&f.setBearing(f.getBearing()+m),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(r,u)||{};_&&f.setPitch(f.getPitch()+_)}}moveTouch(r,u){const f=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,u)||{};if(m&&f.setBearing(f.getBearing()+m),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(r,u)||{};_&&f.setPitch(f.getPitch()+_)}}off(){const r=this.element;w.removeEventListener(r,"mousedown",this.mousedown),w.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let Ir;function Qh(y,r,u){if(y=new l.L(y.lng,y.lat),r){const f=new l.L(y.lng-360,y.lat),m=new l.L(y.lng+360,y.lat),_=u.locationPoint(y).distSqr(r);u.locationPoint(f).distSqr(r)<_?y=f:u.locationPoint(m).distSqr(r)<_&&(y=m)}for(;Math.abs(y.lng-u.center.lng)>180;){const f=u.locationPoint(y);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const _o={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function rp(y,r,u){const f=y.classList;for(const m in _o)f.remove(`maplibregl-${u}-anchor-${m}`);f.add(`maplibregl-${u}-anchor-${r}`)}class ka extends l.E{constructor(r){if(super(),this._onKeyPress=u=>{const f=u.code,m=u.charCode||u.keyCode;f!=="Space"&&f!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=u=>{const f=u.originalEvent.target,m=this._element;this._popup&&(f===m||m.contains(f))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!f)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Qh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${_o[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${m}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const T=this._map.unproject(this._pos),A=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=T.distanceTo(this._lngLat)>20*A?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=l.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const u=w.createNS("http://www.w3.org/2000/svg","svg"),f=41,m=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${f}px`),u.setAttributeNS(null,"width",`${m}px`),u.setAttributeNS(null,"viewBox",`0 0 ${m} ${f}`);const _=w.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const T=w.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const A=w.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ke of L){const tt=w.createNS("http://www.w3.org/2000/svg","ellipse");tt.setAttributeNS(null,"opacity","0.04"),tt.setAttributeNS(null,"cx","10.5"),tt.setAttributeNS(null,"cy","5.80029008"),tt.setAttributeNS(null,"rx",Ke.rx),tt.setAttributeNS(null,"ry",Ke.ry),A.appendChild(tt)}const N=w.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill",this._color);const X=w.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),N.appendChild(X);const K=w.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const he=w.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(he);const Me=w.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Me.setAttributeNS(null,"fill","#FFFFFF");const ke=w.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Fe=w.createNS("http://www.w3.org/2000/svg","circle");Fe.setAttributeNS(null,"fill","#000000"),Fe.setAttributeNS(null,"opacity","0.25"),Fe.setAttributeNS(null,"cx","5.5"),Fe.setAttributeNS(null,"cy","5.5"),Fe.setAttributeNS(null,"r","5.4999962");const Ie=w.createNS("http://www.w3.org/2000/svg","circle");Ie.setAttributeNS(null,"fill","#FFFFFF"),Ie.setAttributeNS(null,"cx","5.5"),Ie.setAttributeNS(null,"cy","5.5"),Ie.setAttributeNS(null,"r","5.4999962"),ke.appendChild(Fe),ke.appendChild(Ie),T.appendChild(A),T.appendChild(N),T.appendChild(K),T.appendChild(Me),T.appendChild(ke),u.appendChild(T),u.setAttributeNS(null,"height",f*this._scale+"px"),u.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(u),this._offset=l.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),rp(this._element,this._anchor,"marker"),r&&r.className)for(const u of r.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.L.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(r){return this._offset=l.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const gr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let pr=0,Cl=!1;const Fu={maxWidth:100,unit:"metric"};function Ou(y,r,u){const f=u&&u.maxWidth||100,m=y._container.clientHeight/2,_=y.unproject([0,m]),T=y.unproject([f,m]),A=_.distanceTo(T);if(u&&u.unit==="imperial"){const L=3.2808*A;L>5280?Ma(r,f,L/5280,y._getUIString("ScaleControl.Miles")):Ma(r,f,L,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Ma(r,f,A/1852,y._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Ma(r,f,A/1e3,y._getUIString("ScaleControl.Kilometers")):Ma(r,f,A,y._getUIString("ScaleControl.Meters"))}function Ma(y,r,u,f){const m=function(_){const T=Math.pow(10,`${Math.floor(_)}`.length-1);let A=_/T;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(L){const N=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*N)/N}(A),T*A}(u);y.style.width=r*(m/u)+"px",y.innerHTML=`${m}&nbsp;${f}`}const ef={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},tf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Il(y){if(y){if(typeof y=="number"){const r=Math.round(Math.abs(y)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,y),"top-left":new l.P(r,r),"top-right":new l.P(-r,r),bottom:new l.P(0,-y),"bottom-left":new l.P(r,-r),"bottom-right":new l.P(-r,-r),left:new l.P(y,0),right:new l.P(-y,0)}}if(y instanceof l.P||Array.isArray(y)){const r=l.P.convert(y);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.P.convert(y.center||[0,0]),top:l.P.convert(y.top||[0,0]),"top-left":l.P.convert(y["top-left"]||[0,0]),"top-right":l.P.convert(y["top-right"]||[0,0]),bottom:l.P.convert(y.bottom||[0,0]),"bottom-left":l.P.convert(y["bottom-left"]||[0,0]),"bottom-right":l.P.convert(y["bottom-right"]||[0,0]),left:l.P.convert(y.left||[0,0]),right:l.P.convert(y.right||[0,0])}}return Il(new l.P(0,0))}const nf={extend:(y,...r)=>l.e(y,...r),run(y){y()},logToElement(y,r=!1,u="log"){const f=window.document.getElementById(u);f&&(r&&(f.innerHTML=""),f.innerHTML+=`<br>${y}`)}},rf=b;class $n{static get version(){return rf}static get workerCount(){return et.workerCount}static set workerCount(r){et.workerCount=r}static get maxParallelImageRequests(){return l.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(r){l.c.MAX_PARALLEL_IMAGE_REQUESTS=r}static get workerUrl(){return l.c.WORKER_URL}static set workerUrl(r){l.c.WORKER_URL=r}static addProtocol(r,u){l.c.REGISTERED_PROTOCOLS[r]=u}static removeProtocol(r){delete l.c.REGISTERED_PROTOCOLS[r]}}return $n.Map=class extends Qd{constructor(y){if(l.bg.mark(l.bh.create),(y=l.e({},an,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Qi(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=r=>{this._onCooperativeGesture(r,r[this._metaKey],1)},this._contextLost=r=>{r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Sc,this._controls=[],this._mapId=l.a2(),this._locale=l.e({},Kh,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=de.addThrottleControl(()=>this.isMoving()),this._requestManager=new $(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const u=Yo(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{r?u(f):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new qh(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Aa(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,l.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new to({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new lr,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new l.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new l.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new l.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(y,r){if(r===void 0&&(r=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(y);return r>-1&&this._controls.splice(r,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,r,u,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,r,u,f)}resize(y){var r;const u=this._containerDimensions(),f=u[0],m=u[1],_=this._getClampedPixelRatio(f,m);if(this._resizeCanvas(f,m,_),this.painter.resize(f,m,_),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const L=this._getClampedPixelRatio(f,m);this._resizeCanvas(f,m,L),this.painter.resize(f,m,L)}this.transform.resize(f,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,m);const T=!this._moving;return T&&(this.stop(),this.fire(new l.k("movestart",y)).fire(new l.k("move",y))),this.fire(new l.k("resize",y)),T&&this.fire(new l.k("moveend",y)),this}_getClampedPixelRatio(y,r){const{0:u,1:f}=this._maxCanvasSize,m=this.getPixelRatio(),_=y*m,T=r*m;return Math.min(_>u?u/_:1,T>f?f/T:1)*m}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Pe.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(l.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(l.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,r,u){if(y==="mouseenter"||y==="mouseover"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:_=>{const T=this.getLayer(r)?this.queryRenderedFeatures(_.point,{layers:[r]}):[];T.length?f||(f=!0,u.call(this,new it(y,this,_.originalEvent,{features:T}))):f=!1},mouseout:()=>{f=!1}}}}if(y==="mouseleave"||y==="mouseout"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:T=>{(this.getLayer(r)?this.queryRenderedFeatures(T.point,{layers:[r]}):[]).length?f=!0:f&&(f=!1,u.call(this,new it(y,this,T.originalEvent)))},mouseout:T=>{f&&(f=!1,u.call(this,new it(y,this,T.originalEvent)))}}}}{const f=m=>{const _=this.getLayer(r)?this.queryRenderedFeatures(m.point,{layers:[r]}):[];_.length&&(m.features=_,u.call(this,m),delete m.features)};return{layer:r,listener:u,delegates:{[y]:f}}}}on(y,r,u){if(u===void 0)return super.on(y,r);const f=this._createDelegatedListener(y,r,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(f);for(const m in f.delegates)this.on(m,f.delegates[m]);return this}once(y,r,u){if(u===void 0)return super.once(y,r);const f=this._createDelegatedListener(y,r,u);for(const m in f.delegates)this.once(m,f.delegates[m]);return this}off(y,r,u){return u===void 0?super.off(y,r):(this._delegatedListeners&&this._delegatedListeners[y]&&(f=>{const m=this._delegatedListeners[y];for(let _=0;_<m.length;_++){const T=m[_];if(T.layer===r&&T.listener===u){for(const A in T.delegates)this.off(A,T.delegates[A]);return m.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,r){if(!this.style)return[];let u;const f=y instanceof l.P||Array.isArray(y),m=f?y:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:y)||{},m instanceof l.P||typeof m[0]=="number")u=[l.P.convert(m)];else{const _=l.P.convert(m[0]),T=l.P.convert(m[1]);u=[_,new l.P(T.x,_.y),T,new l.P(_.x,T.y),_]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(y,r){return this.style.querySourceFeatures(y,r)}setStyle(y,r){return(r=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(y,r))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const r=this._locale[y];if(r==null)throw new Error(`Missing UI string '${y}'`);return r}_updateStyle(y,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,r));const u=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new $r(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,r,u):this.style.loadJSON(y,r,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new $r(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,r){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,G.Style);l.f(u,(f,m)=>{f?this.fire(new l.j(f)):m&&this._updateDiff(m,r)})}else typeof y=="object"&&this._updateDiff(y,r)}_updateDiff(y,r){try{this.style.setState(y,r)&&this._update(!0)}catch(u){l.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(y,r){return this._lazyInitEmptyStyle(),this.style.addSource(y,r),this._update(!0)}isSourceLoaded(y){const r=this.style&&this.style.sourceCaches[y];if(r!==void 0)return r.loaded();this.fire(new l.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const r=this.style.sourceCaches[y.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const f=this.style._layers[u];f.type==="hillshade"&&f.source===y.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new np(this.painter,r,y),this.painter.renderToTexture=new Ec(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:y})),this}getTerrain(){var y,r;return(r=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const r in y){const u=y[r]._tiles;for(const f in u){const m=u[f];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(y,r,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,r,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,r,u={}){const{pixelRatio:f=1,sdf:m=!1,stretchX:_,stretchY:T,content:A}=u;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||l.a(r))){if(r.width===void 0||r.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:L,height:N,data:X}=r,K=r;return this.style.addImage(y,{data:new l.R({width:L,height:N},new Uint8Array(X)),pixelRatio:f,stretchX:_,stretchY:T,content:A,sdf:m,version:0,userImage:K}),K.onAdd&&K.onAdd(this,y),this}}{const{width:L,height:N,data:X}=l.h.getImageData(r);this.style.addImage(y,{data:new l.R({width:L,height:N},X),pixelRatio:f,stretchX:_,stretchY:T,content:A,sdf:m,version:0})}}updateImage(y,r){const u=this.style.getImage(y);if(!u)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||l.a(r)?l.h.getImageData(r):r,{width:m,height:_,data:T}=f;if(m===void 0||_===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||_!==u.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(r instanceof HTMLImageElement||l.a(r));return u.data.replace(T,A),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,r){de.getImage(this._requestManager.transformRequest(y,G.Image),r)}listImages(){return this.style.listImages()}addLayer(y,r){return this._lazyInitEmptyStyle(),this.style.addLayer(y,r),this._update(!0)}moveLayer(y,r){return this.style.moveLayer(y,r),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,r,u){return this.style.setLayerZoomRange(y,r,u),this._update(!0)}setFilter(y,r,u={}){return this.style.setFilter(y,r,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,r,u,f={}){return this.style.setPaintProperty(y,r,u,f),this._update(!0)}getPaintProperty(y,r){return this.style.getPaintProperty(y,r)}setLayoutProperty(y,r,u,f={}){return this.style.setLayoutProperty(y,r,u,f),this._update(!0)}getLayoutProperty(y,r){return this.style.getLayoutProperty(y,r)}setGlyphs(y,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,r,u,f=>{f||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,r,u=>{u||this._update(!0)}),this}setLight(y,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,r){return this.style.setFeatureState(y,r),this._update()}removeFeatureState(y,r){return this.style.removeFeatureState(y,r),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,r=0;return this._container&&(y=this._container.clientWidth||400,r=this._container.clientHeight||300),[y,r]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const r=this._canvasContainer=w.create("div","maplibregl-canvas-container",y);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),f=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],f);const m=this._controlContainer=w.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{_[T]=w.create("div",`maplibregl-ctrl-${T} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,r,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*r),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:y},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new Ko(u,this.transform),I.testSupport(u)}_onCooperativeGesture(y,r,u){return!r&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,_=l.h.now();this.style.zoomHistory.update(m,_);const T=new l.a8(m,{now:_,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=T.crossFadingFactor();A===1&&A===this._crossFadingFactor||(u=!0,this._crossFadingFactor=A),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bg.mark(l.bh.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,l.bg.mark(l.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),de.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.bg.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.h.frame(y=>{l.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return qt}getCameraTargetElevation(){return this.transform.elevation}},$n.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const r=this._map.getZoom(),u=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,u)=>{const f=this._map._getUIString(`NavigationControl.${u}`);r.title=f,r.setAttribute("aria-label",f)},this.options=l.e({},Yh,y),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Jh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,r){const u=w.create("button",y,this._container);return u.type="button",u.addEventListener("click",r),u}},$n.GeolocateControl=class extends l.E{constructor(y){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const u=new l.L(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,m=this._map.getBearing(),_=l.e({bearing:m},this.options.fitBoundsOptions),T=Pe.fromLngLat(u,f);this._map.fitBounds(T,_,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const u=new l.L(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Cl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ka({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ka({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},gr,y)}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,u=!1){Ir===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{Ir=f.state!=="denied",r(Ir)}).catch(()=>{Ir=!!window.navigator.geolocation,r(Ir)}):(Ir=!!window.navigator.geolocation,r(Ir)):r(Ir)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,pr=0,Cl=!1}_isOutOfMapMaxBounds(y){const r=this._map.getMaxBounds(),u=y.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),r=y.getSouthEast(),u=y.getNorthEast(),f=r.distanceTo(u),m=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pr--,Cl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),pr++,pr>1?(y={maximumAge:6e5,timeout:0},Cl=!0):(y=this.options.positionOptions,Cl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},$n.AttributionControl=to,$n.LogoControl=lr,$n.ScaleControl=class{constructor(y){this._onMove=()=>{Ou(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Ou(this._map,this._container,this.options)},this.options=l.e({},Fu,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},$n.FullscreenControl=class extends l.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},$n.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},$n.Popup=class extends l.E{constructor(y){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.k("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Qh(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const u=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let f=this.options.anchor;const m=Il(this.options.offset);if(!f){const T=this._container.offsetWidth,A=this._container.offsetHeight;let L;L=u.y+m.bottom.y<A?["top"]:u.y>this._map.transform.height-A?["bottom"]:[],u.x<T/2?L.push("left"):u.x>this._map.transform.width-T/2&&L.push("right"),f=L.length===0?"bottom":L.join("-")}const _=u.add(m[f]).round();w.setTransform(this._container,`${_o[f]} translate(${_.x}px,${_.y}px)`),rp(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(ef),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=l.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const r=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=y;f=u.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(tf);y&&y.focus()}},$n.Marker=ka,$n.Style=$r,$n.LngLat=l.L,$n.LngLatBounds=Pe,$n.Point=l.P,$n.MercatorCoordinate=l.U,$n.Evented=l.E,$n.AJAXError=l.bi,$n.config=l.c,$n.CanvasSource=St,$n.GeoJSONSource=ct,$n.ImageSource=It,$n.RasterDEMTileSource=nt,$n.RasterTileSource=Ze,$n.VectorTileSource=Xe,$n.VideoSource=ft,$n.setRTLTextPlugin=l.bj,$n.getRTLTextPluginStatus=l.bk,$n.prewarm=function(){z().acquire(Be)},$n.clearPrewarmedResources=function(){const y=le;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Be),le=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},nf.extend($n,{isSafari:l.ac,getPerformanceMetrics:l.bg.getPerformanceMetrics}),$n});var g=c;return g})})(EC);var CC=EC.exports;const IC=zd(CC),K3=Ek({__proto__:null,default:IC},[CC]),Y3="modulepreload",J3=function(e){return"/osm-address-editor-vite/"+e},v2={},Q3=function(t,i,a){let c=Promise.resolve();if(i&&i.length>0){const d=document.getElementsByTagName("link");c=Promise.all(i.map(g=>{if(g=J3(g),g in v2)return;v2[g]=!0;const l=g.endsWith(".css"),b=l?'[rel="stylesheet"]':"";if(!!a)for(let C=d.length-1;C>=0;C--){const k=d[C];if(k.href===g&&(!l||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${b}`))return;const I=document.createElement("link");if(I.rel=l?"stylesheet":Y3,l||(I.as="script",I.crossOrigin=""),I.href=g,document.head.appendChild(I),l)return new Promise((C,k)=>{I.addEventListener("load",C),I.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${g}`)))})}))}return c.then(()=>t()).catch(d=>{const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d})},e4=yt.createContext(null);function t4(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===d}function Bo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Bo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Bo(e[c],t[c]))return!1;return!0}return!1}function n4(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function _2(e,t){if(!e.getProjection)return;const i=e.getProjection(),a=t.getProjection();Bo(i,a)||t.setProjection(i)}function x2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function w2(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const r4=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function b2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const d=t[a.ref];if(d){c=c||Object.assign({},a),delete c.ref;for(const g of r4)g in d&&(c[g]=d[g])}return c||a});return{...e,layers:i}}var S2={};const E2={version:8,sources:{},layers:[]},T2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},I0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},C2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},i4=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],o4=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Sh{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const d=this.props[C2[c.type]];d?d(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[T2[c.type]];d&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),d(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const d=this.props[I0[c.type]];d&&d(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=Sh.savedMaps.pop();if(!a)return null;const c=a.map,d=c.getContainer();for(i.className=d.className;d.childNodes.length>0;)i.appendChild(d.childNodes[0]);c._container=i;const g=c._resizeObserver;g&&(g.disconnect(),g.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:l}=t;return l&&(l.bounds?c.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):a._updateViewState(l,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=E2}=i,c={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||s4()||null,container:t,style:b2(a)},d=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),i.gl){const I=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=I,i.gl)}const g=new this._MapClass(c);d.padding&&g.setPadding(d.padding),i.cursor&&(g.getCanvas().style.cursor=i.cursor),this._createShadowTransform(g);const l=g._render;g._render=I=>{this._inRender=!0,l.call(g,I),this._inRender=!1};const b=g._renderTaskQueue.run;g._renderTaskQueue.run=I=>{b.call(g._renderTaskQueue,I),this._onBeforeRepaint()},g.on("render",()=>this._onAfterRepaint());const w=g.fire;g.fire=this._fireEvent.bind(this,w),g.on("resize",()=>{this._renderTransform.resize(g.transform.width,g.transform.height)}),g.on("styledata",()=>{this._updateStyleComponents(this.props,{}),_2(g.transform,this._renderTransform)}),g.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const I in T2)g.on(I,this._onPointerEvent);for(const I in I0)g.on(I,this._onCameraEvent);for(const I in C2)g.on(I,this._onEvent);this._map=g}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),Sh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=n4(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:d,pitch:g,bearing:l}=c,b=a.isMoving();b&&(c.cameraElevationReference="sea");const w=w2(c,{...x2(a.transform),...t});if(b&&(c.cameraElevationReference="ground"),w&&i){const I=this._deferredEvents;I.move=!0,I.zoom||(I.zoom=d!==c.zoom),I.rotate||(I.rotate=l!==c.bearing),I.pitch||(I.pitch=g!==c.pitch)}return b||w2(a.transform,t),w}_updateSettings(t,i){const a=this._map;let c=!1;for(const d of i4)if(d in t&&!Bo(t[d],i[d])){c=!0;const g=a[`set${d[0].toUpperCase()}${d.slice(1)}`];g==null||g.call(a,t[d])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=E2,styleDiffing:c=!0}=t,d={diff:c};return"localIdeographFontFamily"in t&&(d.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(b2(a),d),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!Bo(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!Bo(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!Bo(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){var a,c;const d=this._map;let g=!1;for(const l of o4){const b=(a=t[l])!==null&&a!==void 0?a:!0,w=(c=i[l])!==null&&c!==void 0?c:!0;Bo(b,w)||(g=!0,b?d[l].enable(b):d[l].disable())}return g}_queryRenderedFeatures(t){const i=this._map,a=i.transform,{interactiveLayerIds:c=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:c.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=a}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const d=t.type,g=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,l=this._queryRenderedFeatures(t.point),b=l.length>0;!b&&g&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,b&&!g&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,d=c.transform,g=typeof i=="string"?i:i.type;return g==="move"&&this._updateViewState(this.props,!1),g in I0&&(typeof i=="object"&&(i.viewState=x2(d)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=d,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{_2(this._renderTransform,i),t.transform=i}}}Sh.savedMaps=[];function s4(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||S2.MapboxAccessToken}catch{}try{e=e||S2.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const a4=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function l4(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const c=t.transform;t.transform=e.transform;const d=t.project(a);return t.transform=c,d},unproject:a=>{const c=t.transform;t.transform=e.transform;const d=t.unproject(a);return t.transform=c,d},queryTerrainElevation:(a,c)=>{const d=t.transform;t.transform=e.transform;const g=t.queryTerrainElevation(a,c);return t.transform=d,g},queryRenderedFeatures:(a,c)=>{const d=t.transform;t.transform=e.transform;const g=t.queryRenderedFeatures(a,c);return t.transform=d,g}};for(const a of u4(t))!(a in i)&&!a4.includes(a)&&(i[a]=t[a].bind(t));return i}function u4(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const c4=typeof document<"u"?yt.useLayoutEffect:yt.useEffect,h4=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function f4(e,t){for(const a of h4)a in t&&(e[a]=t[a]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,a=>{a&&console.error(a)},!0)}const Lh=yt.createContext(null);function d4(e,t,i){const a=yt.useContext(e4),[c,d]=yt.useState(null),g=yt.useRef(),{current:l}=yt.useRef({mapLib:null,map:null});yt.useEffect(()=>{const I=e.mapLib;let C=!0,k;return Promise.resolve(I||i).then(R=>{if(!C)return;if(!R)throw new Error("Invalid mapLib");const J="Map"in R?R:R.default;if(!J.Map)throw new Error("Invalid mapLib");if(f4(J,e),!J.supported||J.supported(e))e.reuseMaps&&(k=Sh.reuse(e,g.current)),k||(k=new Sh(J.Map,e,g.current)),l.map=l4(k),l.mapLib=J,d(k),a==null||a.onMapMount(l.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(R=>{const{onError:J}=e;J?J({type:"error",target:null,originalEvent:null,error:R}):console.error(R)}),()=>{C=!1,k&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?k.recycle():k.destroy())}},[]),c4(()=>{c&&c.setProps(e)}),yt.useImperativeHandle(t,()=>l.map,[c]);const b=yt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),w={height:"100%"};return yt.createElement("div",{id:e.id,ref:g,style:b},c&&yt.createElement(Lh.Provider,{value:l},yt.createElement("div",{"mapboxgl-children":"",style:w},e.children)))}const p4=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function lc(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!p4.test(a)?i[a]=`${c}px`:i[a]=c}}function m4(e,t){const{map:i,mapLib:a}=yt.useContext(Lh),c=yt.useRef({props:e});c.current.props=e;const d=yt.useMemo(()=>{let Y=!1;yt.Children.forEach(e.children,$=>{$&&(Y=!0)});const de={...e,element:Y?document.createElement("div"):null},G=new a.Marker(de);return G.setLngLat([e.longitude,e.latitude]),G.getElement().addEventListener("click",$=>{var D,ne;(ne=(D=c.current.props).onClick)===null||ne===void 0||ne.call(D,{type:"click",target:G,originalEvent:$})}),G.on("dragstart",$=>{var D,ne;const Z=$;Z.lngLat=d.getLngLat(),(ne=(D=c.current.props).onDragStart)===null||ne===void 0||ne.call(D,Z)}),G.on("drag",$=>{var D,ne;const Z=$;Z.lngLat=d.getLngLat(),(ne=(D=c.current.props).onDrag)===null||ne===void 0||ne.call(D,Z)}),G.on("dragend",$=>{var D,ne;const Z=$;Z.lngLat=d.getLngLat(),(ne=(D=c.current.props).onDragEnd)===null||ne===void 0||ne.call(D,Z)}),G},[]);yt.useEffect(()=>(d.addTo(i.getMap()),()=>{d.remove()}),[]);const{longitude:g,latitude:l,offset:b,style:w,draggable:I=!1,popup:C=null,rotation:k=0,rotationAlignment:R="auto",pitchAlignment:J="auto"}=e;return yt.useEffect(()=>{lc(d.getElement(),w)},[w]),yt.useImperativeHandle(t,()=>d,[]),(d.getLngLat().lng!==g||d.getLngLat().lat!==l)&&d.setLngLat([g,l]),b&&!t4(d.getOffset(),b)&&d.setOffset(b),d.isDraggable()!==I&&d.setDraggable(I),d.getRotation()!==k&&d.setRotation(k),d.getRotationAlignment()!==R&&d.setRotationAlignment(R),d.getPitchAlignment()!==J&&d.setPitchAlignment(J),d.getPopup()!==C&&d.setPopup(C),N1.createPortal(e.children,d.getElement())}const g4=yt.memo(yt.forwardRef(m4));function I2(e){return new Set(e?e.trim().split(/\s+/):[])}function y4(e,t){const{map:i,mapLib:a}=yt.useContext(Lh),c=yt.useMemo(()=>document.createElement("div"),[]),d=yt.useRef({props:e});d.current.props=e;const g=yt.useMemo(()=>{const l={...e},b=new a.Popup(l);return b.setLngLat([e.longitude,e.latitude]),b.once("open",w=>{var I,C;(C=(I=d.current.props).onOpen)===null||C===void 0||C.call(I,w)}),b},[]);if(yt.useEffect(()=>{const l=b=>{var w,I;(I=(w=d.current.props).onClose)===null||I===void 0||I.call(w,b)};return g.on("close",l),g.setDOMContent(c).addTo(i.getMap()),()=>{g.off("close",l),g.isOpen()&&g.remove()}},[]),yt.useEffect(()=>{lc(g.getElement(),e.style)},[e.style]),yt.useImperativeHandle(t,()=>g,[]),g.isOpen()&&((g.getLngLat().lng!==e.longitude||g.getLngLat().lat!==e.latitude)&&g.setLngLat([e.longitude,e.latitude]),e.offset&&!Bo(g.options.offset,e.offset)&&g.setOffset(e.offset),(g.options.anchor!==e.anchor||g.options.maxWidth!==e.maxWidth)&&(g.options.anchor=e.anchor,g.setMaxWidth(e.maxWidth)),g.options.className!==e.className)){const l=I2(g.options.className),b=I2(e.className);for(const w of l)b.has(w)||g.removeClassName(w);for(const w of b)l.has(w)||g.addClassName(w);g.options.className=e.className}return N1.createPortal(e.children,c)}yt.memo(yt.forwardRef(y4));function Bd(e,t,i,a){const c=yt.useContext(Lh),d=yt.useMemo(()=>e(c),[]);return yt.useEffect(()=>{const g=a||i||t,l=typeof t=="function"&&typeof i=="function"?t:null,b=typeof i=="function"?i:typeof t=="function"?t:null,{map:w}=c;return w.hasControl(d)||(w.addControl(d,g==null?void 0:g.position),l&&l(c)),()=>{b&&b(c),w.hasControl(d)&&w.removeControl(d)}},[]),d}function v4(e){const t=Bd(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return yt.useEffect(()=>{lc(t._container,e.style)},[e.style]),null}yt.memo(v4);function _4(e){const t=Bd(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return yt.useEffect(()=>{lc(t._controlContainer,e.style)},[e.style]),null}yt.memo(_4);function x4(e,t){const i=yt.useRef({props:e}),a=Bd(({mapLib:c})=>{const d=new c.GeolocateControl(e),g=d._setupUI;return d._setupUI=l=>{d._container.hasChildNodes()||g(l)},d.on("geolocate",l=>{var b,w;(w=(b=i.current.props).onGeolocate)===null||w===void 0||w.call(b,l)}),d.on("error",l=>{var b,w;(w=(b=i.current.props).onError)===null||w===void 0||w.call(b,l)}),d.on("outofmaxbounds",l=>{var b,w;(w=(b=i.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationstart",l=>{var b,w;(w=(b=i.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationend",l=>{var b,w;(w=(b=i.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,l)}),d},{position:e.position});return i.current.props=e,yt.useImperativeHandle(t,()=>a,[]),yt.useEffect(()=>{lc(a._container,e.style)},[e.style]),null}const w4=yt.memo(yt.forwardRef(x4));function b4(e){const t=Bd(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return yt.useEffect(()=>{lc(t._container,e.style)},[e.style]),null}const S4=yt.memo(b4);function E4(e){const t=Bd(({mapLib:d})=>new d.ScaleControl(e),{position:e.position}),i=yt.useRef(e),a=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),yt.useEffect(()=>{lc(t._container,c)},[c]),null}yt.memo(E4);function tg(e,t){if(!e)throw new Error(t)}function T4(e,t,i,a){if(tg(i.id===a.id,"layer id changed"),tg(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:d={},filter:g,minzoom:l,maxzoom:b,beforeId:w}=i;if(w!==a.beforeId&&e.moveLayer(t,w),c!==a.layout){const I=a.layout||{};for(const C in c)Bo(c[C],I[C])||e.setLayoutProperty(t,C,c[C]);for(const C in I)c.hasOwnProperty(C)||e.setLayoutProperty(t,C,void 0)}if(d!==a.paint){const I=a.paint||{};for(const C in d)Bo(d[C],I[C])||e.setPaintProperty(t,C,d[C]);for(const C in I)d.hasOwnProperty(C)||e.setPaintProperty(t,C,void 0)}Bo(g,a.filter)||e.setFilter(t,g),(l!==a.minzoom||b!==a.maxzoom)&&e.setLayerZoomRange(t,l,b)}function C4(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let I4=0;function A4(e){const t=yt.useContext(Lh).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-layer-${I4++}`,[]);if(yt.useEffect(()=>{if(t){const g=()=>a(l=>l+1);return t.on("styledata",g),g(),()=>{t.off("styledata",g),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{T4(t,c,e,i.current)}catch(g){console.warn(g)}else C4(t,c,e);return i.current=e,null}let P4=0;function k4(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function M4(e,t,i){tg(t.id===i.id,"source id changed"),tg(t.type===i.type,"source type changed");let a="",c=0;for(const g in t)g!=="children"&&g!=="id"&&!Bo(i[g],t[g])&&(a=g,c++);if(!c)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function L4(e){const t=yt.useContext(Lh).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-source-${P4++}`,[]);yt.useEffect(()=>{if(t){const g=()=>setTimeout(()=>a(l=>l+1),0);return t.on("styledata",g),g(),()=>{var l;if(t.off("styledata",g),t.style&&t.style._loaded&&t.getSource(c)){const b=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(b)for(const w of b)w.source===c&&t.removeLayer(w.id);t.removeSource(c)}}}},[t]);let d=t&&t.style&&t.getSource(c);return d?M4(d,e,i.current):d=k4(t,c,e),i.current=e,d&&yt.Children.map(e.children,g=>g&&yt.cloneElement(g,{source:c}))||null}const z4=Q3(()=>Promise.resolve().then(()=>K3),void 0),F4=yt.forwardRef(function(t,i){return d4(t,i,z4)}),O4=g4,R4=S4,j4=w4,D4=A4,B4=L4;function A2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Kt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?A2(Object(i),!0).forEach(function(a){hi(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):A2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function ng(e){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function N4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P2(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function U4(e,t,i){return t&&P2(e.prototype,t),i&&P2(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function hi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function U1(e,t){return V4(e)||Z4(e,t)||AC(e,t)||W4()}function Nd(e){return $4(e)||G4(e)||AC(e)||H4()}function $4(e){if(Array.isArray(e))return Qv(e)}function V4(e){if(Array.isArray(e))return e}function G4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Z4(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],c=!0,d=!1,g,l;try{for(i=i.call(e);!(c=(g=i.next()).done)&&(a.push(g.value),!(t&&a.length===t));c=!0);}catch(b){d=!0,l=b}finally{try{!c&&i.return!=null&&i.return()}finally{if(d)throw l}}return a}}function AC(e,t){if(e){if(typeof e=="string")return Qv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Qv(e,t)}}function Qv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function H4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var k2=function(){},$1={},PC={},kC=null,MC={mark:k2,measure:k2};try{typeof window<"u"&&($1=window),typeof document<"u"&&(PC=document),typeof MutationObserver<"u"&&(kC=MutationObserver),typeof performance<"u"&&(MC=performance)}catch{}var X4=$1.navigator||{},M2=X4.userAgent,L2=M2===void 0?"":M2,ru=$1,xr=PC,z2=kC,Gp=MC;ru.document;var nl=!!xr.documentElement&&!!xr.head&&typeof xr.addEventListener=="function"&&typeof xr.createElement=="function",LC=~L2.indexOf("MSIE")||~L2.indexOf("Trident/"),Zp,Hp,Wp,Xp,qp,Ya="___FONT_AWESOME___",e_=16,zC="fa",FC="svg-inline--fa",nc="data-fa-i2svg",t_="data-fa-pseudo-element",q4="data-fa-pseudo-element-pending",V1="data-prefix",G1="data-icon",F2="fontawesome-i2svg",K4="async",Y4=["HTML","HEAD","STYLE","SCRIPT"],OC=function(){try{return!0}catch{return!1}}(),vr="classic",Br="sharp",Z1=[vr,Br];function Ud(e){return new Proxy(e,{get:function(i,a){return a in i?i[a]:i[vr]}})}var Ed=Ud((Zp={},hi(Zp,vr,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),hi(Zp,Br,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),Zp)),Td=Ud((Hp={},hi(Hp,vr,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),hi(Hp,Br,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),Hp)),Cd=Ud((Wp={},hi(Wp,vr,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),hi(Wp,Br,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),Wp)),J4=Ud((Xp={},hi(Xp,vr,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),hi(Xp,Br,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),Xp)),Q4=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,RC="fa-layers-text",eL=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,tL=Ud((qp={},hi(qp,vr,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),hi(qp,Br,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),qp)),jC=[1,2,3,4,5,6,7,8,9,10],nL=jC.concat([11,12,13,14,15,16,17,18,19,20]),rL=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Wu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Id=new Set;Object.keys(Td[vr]).map(Id.add.bind(Id));Object.keys(Td[Br]).map(Id.add.bind(Id));var iL=[].concat(Z1,Nd(Id),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Wu.GROUP,Wu.SWAP_OPACITY,Wu.PRIMARY,Wu.SECONDARY]).concat(jC.map(function(e){return"".concat(e,"x")})).concat(nL.map(function(e){return"w-".concat(e)})),ed=ru.FontAwesomeConfig||{};function oL(e){var t=xr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function sL(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(xr&&typeof xr.querySelector=="function"){var aL=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];aL.forEach(function(e){var t=U1(e,2),i=t[0],a=t[1],c=sL(oL(i));c!=null&&(ed[a]=c)})}var DC={styleDefault:"solid",familyDefault:"classic",cssPrefix:zC,replacementClass:FC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ed.familyPrefix&&(ed.cssPrefix=ed.familyPrefix);var Eh=Kt(Kt({},DC),ed);Eh.autoReplaceSvg||(Eh.observeMutations=!1);var rn={};Object.keys(DC).forEach(function(e){Object.defineProperty(rn,e,{enumerable:!0,set:function(i){Eh[e]=i,td.forEach(function(a){return a(rn)})},get:function(){return Eh[e]}})});Object.defineProperty(rn,"familyPrefix",{enumerable:!0,set:function(t){Eh.cssPrefix=t,td.forEach(function(i){return i(rn)})},get:function(){return Eh.cssPrefix}});ru.FontAwesomeConfig=rn;var td=[];function lL(e){return td.push(e),function(){td.splice(td.indexOf(e),1)}}var Rl=e_,ca={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function uL(e){if(!(!e||!nl)){var t=xr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=xr.head.childNodes,a=null,c=i.length-1;c>-1;c--){var d=i[c],g=(d.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(g)>-1&&(a=d)}return xr.head.insertBefore(t,a),e}}var cL="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Ad(){for(var e=12,t="";e-- >0;)t+=cL[Math.random()*62|0];return t}function zh(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function H1(e){return e.classList?zh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function BC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function hL(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(BC(e[i]),'" ')},"").trim()}function qg(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function W1(e){return e.size!==ca.size||e.x!==ca.x||e.y!==ca.y||e.rotate!==ca.rotate||e.flipX||e.flipY}function fL(e){var t=e.transform,i=e.containerWidth,a=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},d="translate(".concat(t.x*32,", ").concat(t.y*32,") "),g="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),b={transform:"".concat(d," ").concat(g," ").concat(l)},w={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:b,path:w}}function dL(e){var t=e.transform,i=e.width,a=i===void 0?e_:i,c=e.height,d=c===void 0?e_:c,g=e.startCentered,l=g===void 0?!1:g,b="";return l&&LC?b+="translate(".concat(t.x/Rl-a/2,"em, ").concat(t.y/Rl-d/2,"em) "):l?b+="translate(calc(-50% + ".concat(t.x/Rl,"em), calc(-50% + ").concat(t.y/Rl,"em)) "):b+="translate(".concat(t.x/Rl,"em, ").concat(t.y/Rl,"em) "),b+="scale(".concat(t.size/Rl*(t.flipX?-1:1),", ").concat(t.size/Rl*(t.flipY?-1:1),") "),b+="rotate(".concat(t.rotate,"deg) "),b}var pL=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function NC(){var e=zC,t=FC,i=rn.cssPrefix,a=rn.replacementClass,c=pL;if(i!==e||a!==t){var d=new RegExp("\\.".concat(e,"\\-"),"g"),g=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");c=c.replace(d,".".concat(i,"-")).replace(g,"--".concat(i,"-")).replace(l,".".concat(a))}return c}var O2=!1;function A0(){rn.autoAddCss&&!O2&&(uL(NC()),O2=!0)}var mL={mixout:function(){return{dom:{css:NC,insertCss:A0}}},hooks:function(){return{beforeDOMElementCreation:function(){A0()},beforeI2svg:function(){A0()}}}},Ja=ru||{};Ja[Ya]||(Ja[Ya]={});Ja[Ya].styles||(Ja[Ya].styles={});Ja[Ya].hooks||(Ja[Ya].hooks={});Ja[Ya].shims||(Ja[Ya].shims=[]);var js=Ja[Ya],UC=[],gL=function e(){xr.removeEventListener("DOMContentLoaded",e),rg=1,UC.map(function(t){return t()})},rg=!1;nl&&(rg=(xr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(xr.readyState),rg||xr.addEventListener("DOMContentLoaded",gL));function yL(e){nl&&(rg?setTimeout(e,0):UC.push(e))}function $d(e){var t=e.tag,i=e.attributes,a=i===void 0?{}:i,c=e.children,d=c===void 0?[]:c;return typeof e=="string"?BC(e):"<".concat(t," ").concat(hL(a),">").concat(d.map($d).join(""),"</").concat(t,">")}function R2(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var vL=function(t,i){return function(a,c,d,g){return t.call(i,a,c,d,g)}},P0=function(t,i,a,c){var d=Object.keys(t),g=d.length,l=c!==void 0?vL(i,c):i,b,w,I;for(a===void 0?(b=1,I=t[d[0]]):(b=0,I=a);b<g;b++)w=d[b],I=l(I,t[w],w,t);return I};function _L(e){for(var t=[],i=0,a=e.length;i<a;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){var d=e.charCodeAt(i++);(d&64512)==56320?t.push(((c&1023)<<10)+(d&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function n_(e){var t=_L(e);return t.length===1?t[0].toString(16):null}function xL(e,t){var i=e.length,a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function j2(e){return Object.keys(e).reduce(function(t,i){var a=e[i],c=!!a.icon;return c?t[a.iconName]=a.icon:t[i]=a,t},{})}function r_(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,c=a===void 0?!1:a,d=j2(t);typeof js.hooks.addPack=="function"&&!c?js.hooks.addPack(e,j2(t)):js.styles[e]=Kt(Kt({},js.styles[e]||{}),d),e==="fas"&&r_("fa",t)}var Kp,Yp,Jp,nh=js.styles,wL=js.shims,bL=(Kp={},hi(Kp,vr,Object.values(Cd[vr])),hi(Kp,Br,Object.values(Cd[Br])),Kp),X1=null,$C={},VC={},GC={},ZC={},HC={},SL=(Yp={},hi(Yp,vr,Object.keys(Ed[vr])),hi(Yp,Br,Object.keys(Ed[Br])),Yp);function EL(e){return~iL.indexOf(e)}function TL(e,t){var i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!EL(c)?c:null}var WC=function(){var t=function(d){return P0(nh,function(g,l,b){return g[b]=P0(l,d,{}),g},{})};$C=t(function(c,d,g){if(d[3]&&(c[d[3]]=g),d[2]){var l=d[2].filter(function(b){return typeof b=="number"});l.forEach(function(b){c[b.toString(16)]=g})}return c}),VC=t(function(c,d,g){if(c[g]=g,d[2]){var l=d[2].filter(function(b){return typeof b=="string"});l.forEach(function(b){c[b]=g})}return c}),HC=t(function(c,d,g){var l=d[2];return c[g]=g,l.forEach(function(b){c[b]=g}),c});var i="far"in nh||rn.autoFetchSvg,a=P0(wL,function(c,d){var g=d[0],l=d[1],b=d[2];return l==="far"&&!i&&(l="fas"),typeof g=="string"&&(c.names[g]={prefix:l,iconName:b}),typeof g=="number"&&(c.unicodes[g.toString(16)]={prefix:l,iconName:b}),c},{names:{},unicodes:{}});GC=a.names,ZC=a.unicodes,X1=Kg(rn.styleDefault,{family:rn.familyDefault})};lL(function(e){X1=Kg(e.styleDefault,{family:rn.familyDefault})});WC();function q1(e,t){return($C[e]||{})[t]}function CL(e,t){return(VC[e]||{})[t]}function Xu(e,t){return(HC[e]||{})[t]}function XC(e){return GC[e]||{prefix:null,iconName:null}}function IL(e){var t=ZC[e],i=q1("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function iu(){return X1}var K1=function(){return{prefix:null,iconName:null,rest:[]}};function Kg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.family,a=i===void 0?vr:i,c=Ed[a][e],d=Td[a][e]||Td[a][c],g=e in js.styles?e:null;return d||g||null}var D2=(Jp={},hi(Jp,vr,Object.keys(Cd[vr])),hi(Jp,Br,Object.keys(Cd[Br])),Jp);function Yg(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.skipLookups,c=a===void 0?!1:a,d=(t={},hi(t,vr,"".concat(rn.cssPrefix,"-").concat(vr)),hi(t,Br,"".concat(rn.cssPrefix,"-").concat(Br)),t),g=null,l=vr;(e.includes(d[vr])||e.some(function(w){return D2[vr].includes(w)}))&&(l=vr),(e.includes(d[Br])||e.some(function(w){return D2[Br].includes(w)}))&&(l=Br);var b=e.reduce(function(w,I){var C=TL(rn.cssPrefix,I);if(nh[I]?(I=bL[l].includes(I)?J4[l][I]:I,g=I,w.prefix=I):SL[l].indexOf(I)>-1?(g=I,w.prefix=Kg(I,{family:l})):C?w.iconName=C:I!==rn.replacementClass&&I!==d[vr]&&I!==d[Br]&&w.rest.push(I),!c&&w.prefix&&w.iconName){var k=g==="fa"?XC(w.iconName):{},R=Xu(w.prefix,w.iconName);k.prefix&&(g=null),w.iconName=k.iconName||R||w.iconName,w.prefix=k.prefix||w.prefix,w.prefix==="far"&&!nh.far&&nh.fas&&!rn.autoFetchSvg&&(w.prefix="fas")}return w},K1());return(e.includes("fa-brands")||e.includes("fab"))&&(b.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(b.prefix="fad"),!b.prefix&&l===Br&&(nh.fass||rn.autoFetchSvg)&&(b.prefix="fass",b.iconName=Xu(b.prefix,b.iconName)||b.iconName),(b.prefix==="fa"||g==="fa")&&(b.prefix=iu()||"fas"),b}var AL=function(){function e(){N4(this,e),this.definitions={}}return U4(e,[{key:"add",value:function(){for(var i=this,a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];var g=c.reduce(this._pullDefinitions,{});Object.keys(g).forEach(function(l){i.definitions[l]=Kt(Kt({},i.definitions[l]||{}),g[l]),r_(l,g[l]);var b=Cd[vr][l];b&&r_(b,g[l]),WC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var c=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(c).map(function(d){var g=c[d],l=g.prefix,b=g.iconName,w=g.icon,I=w[2];i[l]||(i[l]={}),I.length>0&&I.forEach(function(C){typeof C=="string"&&(i[l][C]=w)}),i[l][b]=w}),i}}]),e}(),B2=[],rh={},dh={},PL=Object.keys(dh);function kL(e,t){var i=t.mixoutsTo;return B2=e,rh={},Object.keys(dh).forEach(function(a){PL.indexOf(a)===-1&&delete dh[a]}),B2.forEach(function(a){var c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(function(g){typeof c[g]=="function"&&(i[g]=c[g]),ng(c[g])==="object"&&Object.keys(c[g]).forEach(function(l){i[g]||(i[g]={}),i[g][l]=c[g][l]})}),a.hooks){var d=a.hooks();Object.keys(d).forEach(function(g){rh[g]||(rh[g]=[]),rh[g].push(d[g])})}a.provides&&a.provides(dh)}),i}function i_(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var d=rh[e]||[];return d.forEach(function(g){t=g.apply(null,[t].concat(a))}),t}function rc(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=rh[e]||[];c.forEach(function(d){d.apply(null,i)})}function Qa(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return dh[e]?dh[e].apply(null,t):void 0}function o_(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||iu();if(t)return t=Xu(i,t)||t,R2(qC.definitions,i,t)||R2(js.styles,i,t)}var qC=new AL,ML=function(){rn.autoReplaceSvg=!1,rn.observeMutations=!1,rc("noAuto")},LL={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return nl?(rc("beforeI2svg",t),Qa("pseudoElements2svg",t),Qa("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;rn.autoReplaceSvg===!1&&(rn.autoReplaceSvg=!0),rn.observeMutations=!0,yL(function(){FL({autoReplaceSvgRoot:i}),rc("watch",t)})}},zL={icon:function(t){if(t===null)return null;if(ng(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Xu(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=Kg(t[0]);return{prefix:a,iconName:Xu(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(rn.cssPrefix,"-"))>-1||t.match(Q4))){var c=Yg(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||iu(),iconName:Xu(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var d=iu();return{prefix:d,iconName:Xu(d,t)||t}}}},Zo={noAuto:ML,config:rn,dom:LL,parse:zL,library:qC,findIconDefinition:o_,toHtml:$d},FL=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?xr:i;(Object.keys(js.styles).length>0||rn.autoFetchSvg)&&nl&&rn.autoReplaceSvg&&Zo.dom.i2svg({node:a})};function Jg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return $d(a)})}}),Object.defineProperty(e,"node",{get:function(){if(nl){var a=xr.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function OL(e){var t=e.children,i=e.main,a=e.mask,c=e.attributes,d=e.styles,g=e.transform;if(W1(g)&&i.found&&!a.found){var l=i.width,b=i.height,w={x:l/b/2,y:.5};c.style=qg(Kt(Kt({},d),{},{"transform-origin":"".concat(w.x+g.x/16,"em ").concat(w.y+g.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function RL(e){var t=e.prefix,i=e.iconName,a=e.children,c=e.attributes,d=e.symbol,g=d===!0?"".concat(t,"-").concat(rn.cssPrefix,"-").concat(i):d;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Kt(Kt({},c),{},{id:g}),children:a}]}]}function Y1(e){var t=e.icons,i=t.main,a=t.mask,c=e.prefix,d=e.iconName,g=e.transform,l=e.symbol,b=e.title,w=e.maskId,I=e.titleId,C=e.extra,k=e.watchable,R=k===void 0?!1:k,J=a.found?a:i,Y=J.width,de=J.height,G=c==="fak",$=[rn.replacementClass,d?"".concat(rn.cssPrefix,"-").concat(d):""].filter(function(H){return C.classes.indexOf(H)===-1}).filter(function(H){return H!==""||!!H}).concat(C.classes).join(" "),D={children:[],attributes:Kt(Kt({},C.attributes),{},{"data-prefix":c,"data-icon":d,class:$,role:C.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Y," ").concat(de)})},ne=G&&!~C.classes.indexOf("fa-fw")?{width:"".concat(Y/de*16*.0625,"em")}:{};R&&(D.attributes[nc]=""),b&&(D.children.push({tag:"title",attributes:{id:D.attributes["aria-labelledby"]||"title-".concat(I||Ad())},children:[b]}),delete D.attributes.title);var Z=Kt(Kt({},D),{},{prefix:c,iconName:d,main:i,mask:a,maskId:w,transform:g,symbol:l,styles:Kt(Kt({},ne),C.styles)}),U=a.found&&i.found?Qa("generateAbstractMask",Z)||{children:[],attributes:{}}:Qa("generateAbstractIcon",Z)||{children:[],attributes:{}},E=U.children,M=U.attributes;return Z.children=E,Z.attributes=M,l?RL(Z):OL(Z)}function N2(e){var t=e.content,i=e.width,a=e.height,c=e.transform,d=e.title,g=e.extra,l=e.watchable,b=l===void 0?!1:l,w=Kt(Kt(Kt({},g.attributes),d?{title:d}:{}),{},{class:g.classes.join(" ")});b&&(w[nc]="");var I=Kt({},g.styles);W1(c)&&(I.transform=dL({transform:c,startCentered:!0,width:i,height:a}),I["-webkit-transform"]=I.transform);var C=qg(I);C.length>0&&(w.style=C);var k=[];return k.push({tag:"span",attributes:w,children:[t]}),d&&k.push({tag:"span",attributes:{class:"sr-only"},children:[d]}),k}function jL(e){var t=e.content,i=e.title,a=e.extra,c=Kt(Kt(Kt({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),d=qg(a.styles);d.length>0&&(c.style=d);var g=[];return g.push({tag:"span",attributes:c,children:[t]}),i&&g.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),g}var k0=js.styles;function s_(e){var t=e[0],i=e[1],a=e.slice(4),c=U1(a,1),d=c[0],g=null;return Array.isArray(d)?g={tag:"g",attributes:{class:"".concat(rn.cssPrefix,"-").concat(Wu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(rn.cssPrefix,"-").concat(Wu.SECONDARY),fill:"currentColor",d:d[0]}},{tag:"path",attributes:{class:"".concat(rn.cssPrefix,"-").concat(Wu.PRIMARY),fill:"currentColor",d:d[1]}}]}:g={tag:"path",attributes:{fill:"currentColor",d}},{found:!0,width:t,height:i,icon:g}}var DL={found:!1,width:512,height:512};function BL(e,t){!OC&&!rn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function a_(e,t){var i=t;return t==="fa"&&rn.styleDefault!==null&&(t=iu()),new Promise(function(a,c){if(Qa("missingIconAbstract"),i==="fa"){var d=XC(e)||{};e=d.iconName||e,t=d.prefix||t}if(e&&t&&k0[t]&&k0[t][e]){var g=k0[t][e];return a(s_(g))}BL(e,t),a(Kt(Kt({},DL),{},{icon:rn.showMissingIcons&&e?Qa("missingIconAbstract")||{}:{}}))})}var U2=function(){},l_=rn.measurePerformance&&Gp&&Gp.mark&&Gp.measure?Gp:{mark:U2,measure:U2},jf='FA "6.5.1"',NL=function(t){return l_.mark("".concat(jf," ").concat(t," begins")),function(){return KC(t)}},KC=function(t){l_.mark("".concat(jf," ").concat(t," ends")),l_.measure("".concat(jf," ").concat(t),"".concat(jf," ").concat(t," begins"),"".concat(jf," ").concat(t," ends"))},J1={begin:NL,end:KC},bm=function(){};function $2(e){var t=e.getAttribute?e.getAttribute(nc):null;return typeof t=="string"}function UL(e){var t=e.getAttribute?e.getAttribute(V1):null,i=e.getAttribute?e.getAttribute(G1):null;return t&&i}function $L(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(rn.replacementClass)}function VL(){if(rn.autoReplaceSvg===!0)return Sm.replace;var e=Sm[rn.autoReplaceSvg];return e||Sm.replace}function GL(e){return xr.createElementNS("http://www.w3.org/2000/svg",e)}function ZL(e){return xr.createElement(e)}function YC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?e.tag==="svg"?GL:ZL:i;if(typeof e=="string")return xr.createTextNode(e);var c=a(e.tag);Object.keys(e.attributes||[]).forEach(function(g){c.setAttribute(g,e.attributes[g])});var d=e.children||[];return d.forEach(function(g){c.appendChild(YC(g,{ceFn:a}))}),c}function HL(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Sm={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(YC(c),i)}),i.getAttribute(nc)===null&&rn.keepOriginalSource){var a=xr.createComment(HL(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function(t){var i=t[0],a=t[1];if(~H1(i).indexOf(rn.replacementClass))return Sm.replace(t);var c=new RegExp("".concat(rn.cssPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var d=a[0].attributes.class.split(" ").reduce(function(l,b){return b===rn.replacementClass||b.match(c)?l.toSvg.push(b):l.toNode.push(b),l},{toNode:[],toSvg:[]});a[0].attributes.class=d.toSvg.join(" "),d.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",d.toNode.join(" "))}var g=a.map(function(l){return $d(l)}).join(`
`);i.setAttribute(nc,""),i.innerHTML=g}};function V2(e){e()}function JC(e,t){var i=typeof t=="function"?t:bm;if(e.length===0)i();else{var a=V2;rn.mutateApproach===K4&&(a=ru.requestAnimationFrame||V2),a(function(){var c=VL(),d=J1.begin("mutate");e.map(c),d(),i()})}}var Q1=!1;function QC(){Q1=!0}function u_(){Q1=!1}var ig=null;function G2(e){if(z2&&rn.observeMutations){var t=e.treeCallback,i=t===void 0?bm:t,a=e.nodeCallback,c=a===void 0?bm:a,d=e.pseudoElementsCallback,g=d===void 0?bm:d,l=e.observeMutationsRoot,b=l===void 0?xr:l;ig=new z2(function(w){if(!Q1){var I=iu();zh(w).forEach(function(C){if(C.type==="childList"&&C.addedNodes.length>0&&!$2(C.addedNodes[0])&&(rn.searchPseudoElements&&g(C.target),i(C.target)),C.type==="attributes"&&C.target.parentNode&&rn.searchPseudoElements&&g(C.target.parentNode),C.type==="attributes"&&$2(C.target)&&~rL.indexOf(C.attributeName))if(C.attributeName==="class"&&UL(C.target)){var k=Yg(H1(C.target)),R=k.prefix,J=k.iconName;C.target.setAttribute(V1,R||I),J&&C.target.setAttribute(G1,J)}else $L(C.target)&&c(C.target)})}}),nl&&ig.observe(b,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function WL(){ig&&ig.disconnect()}function XL(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,c){var d=c.split(":"),g=d[0],l=d.slice(1);return g&&l.length>0&&(a[g]=l.join(":").trim()),a},{})),i}function qL(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",c=Yg(H1(e));return c.prefix||(c.prefix=iu()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||(c.prefix&&a.length>0&&(c.iconName=CL(c.prefix,e.innerText)||q1(c.prefix,n_(e.innerText))),!c.iconName&&rn.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(c.iconName=e.firstChild.data)),c}function KL(e){var t=zh(e.attributes).reduce(function(c,d){return c.name!=="class"&&c.name!=="style"&&(c[d.name]=d.value),c},{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return rn.autoA11y&&(i?t["aria-labelledby"]="".concat(rn.replacementClass,"-title-").concat(a||Ad()):(t["aria-hidden"]="true",t.focusable="false")),t}function YL(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ca,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Z2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=qL(e),a=i.iconName,c=i.prefix,d=i.rest,g=KL(e),l=i_("parseNodeAttributes",{},e),b=t.styleParser?XL(e):[];return Kt({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:ca,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:d,styles:b,attributes:g}},l)}var JL=js.styles;function eI(e){var t=rn.autoReplaceSvg==="nest"?Z2(e,{styleParser:!1}):Z2(e);return~t.extra.classes.indexOf(RC)?Qa("generateLayersText",e,t):Qa("generateSvgReplacementMutation",e,t)}var ou=new Set;Z1.map(function(e){ou.add("fa-".concat(e))});Object.keys(Ed[vr]).map(ou.add.bind(ou));Object.keys(Ed[Br]).map(ou.add.bind(ou));ou=Nd(ou);function H2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!nl)return Promise.resolve();var i=xr.documentElement.classList,a=function(C){return i.add("".concat(F2,"-").concat(C))},c=function(C){return i.remove("".concat(F2,"-").concat(C))},d=rn.autoFetchSvg?ou:Z1.map(function(I){return"fa-".concat(I)}).concat(Object.keys(JL));d.includes("fa")||d.push("fa");var g=[".".concat(RC,":not([").concat(nc,"])")].concat(d.map(function(I){return".".concat(I,":not([").concat(nc,"])")})).join(", ");if(g.length===0)return Promise.resolve();var l=[];try{l=zh(e.querySelectorAll(g))}catch{}if(l.length>0)a("pending"),c("complete");else return Promise.resolve();var b=J1.begin("onTree"),w=l.reduce(function(I,C){try{var k=eI(C);k&&I.push(k)}catch(R){OC||R.name==="MissingIcon"&&console.error(R)}return I},[]);return new Promise(function(I,C){Promise.all(w).then(function(k){JC(k,function(){a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),b(),I()})}).catch(function(k){b(),C(k)})})}function QL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;eI(e).then(function(i){i&&JC([i],t)})}function ez(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:o_(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:o_(c||{})),e(a,Kt(Kt({},i),{},{mask:c}))}}var tz=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,c=a===void 0?ca:a,d=i.symbol,g=d===void 0?!1:d,l=i.mask,b=l===void 0?null:l,w=i.maskId,I=w===void 0?null:w,C=i.title,k=C===void 0?null:C,R=i.titleId,J=R===void 0?null:R,Y=i.classes,de=Y===void 0?[]:Y,G=i.attributes,$=G===void 0?{}:G,D=i.styles,ne=D===void 0?{}:D;if(t){var Z=t.prefix,U=t.iconName,E=t.icon;return Jg(Kt({type:"icon"},t),function(){return rc("beforeDOMElementCreation",{iconDefinition:t,params:i}),rn.autoA11y&&(k?$["aria-labelledby"]="".concat(rn.replacementClass,"-title-").concat(J||Ad()):($["aria-hidden"]="true",$.focusable="false")),Y1({icons:{main:s_(E),mask:b?s_(b.icon):{found:!1,width:null,height:null,icon:{}}},prefix:Z,iconName:U,transform:Kt(Kt({},ca),c),symbol:g,title:k,maskId:I,titleId:J,extra:{attributes:$,styles:ne,classes:de}})})}},nz={mixout:function(){return{icon:ez(tz)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=H2,i.nodeCallback=QL,i}}},provides:function(t){t.i2svg=function(i){var a=i.node,c=a===void 0?xr:a,d=i.callback,g=d===void 0?function(){}:d;return H2(c,g)},t.generateSvgReplacementMutation=function(i,a){var c=a.iconName,d=a.title,g=a.titleId,l=a.prefix,b=a.transform,w=a.symbol,I=a.mask,C=a.maskId,k=a.extra;return new Promise(function(R,J){Promise.all([a_(c,l),I.iconName?a_(I.iconName,I.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(Y){var de=U1(Y,2),G=de[0],$=de[1];R([i,Y1({icons:{main:G,mask:$},prefix:l,iconName:c,transform:b,symbol:w,maskId:C,title:d,titleId:g,extra:k,watchable:!0})])}).catch(J)})},t.generateAbstractIcon=function(i){var a=i.children,c=i.attributes,d=i.main,g=i.transform,l=i.styles,b=qg(l);b.length>0&&(c.style=b);var w;return W1(g)&&(w=Qa("generateAbstractTransformGrouping",{main:d,transform:g,containerWidth:d.width,iconWidth:d.width})),a.push(w||d.icon),{children:a,attributes:c}}}},rz={mixout:function(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.classes,d=c===void 0?[]:c;return Jg({type:"layer"},function(){rc("beforeDOMElementCreation",{assembler:i,params:a});var g=[];return i(function(l){Array.isArray(l)?l.map(function(b){g=g.concat(b.abstract)}):g=g.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(rn.cssPrefix,"-layers")].concat(Nd(d)).join(" ")},children:g}]})}}}},iz={mixout:function(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.title,d=c===void 0?null:c,g=a.classes,l=g===void 0?[]:g,b=a.attributes,w=b===void 0?{}:b,I=a.styles,C=I===void 0?{}:I;return Jg({type:"counter",content:i},function(){return rc("beforeDOMElementCreation",{content:i,params:a}),jL({content:i.toString(),title:d,extra:{attributes:w,styles:C,classes:["".concat(rn.cssPrefix,"-layers-counter")].concat(Nd(l))}})})}}}},oz={mixout:function(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.transform,d=c===void 0?ca:c,g=a.title,l=g===void 0?null:g,b=a.classes,w=b===void 0?[]:b,I=a.attributes,C=I===void 0?{}:I,k=a.styles,R=k===void 0?{}:k;return Jg({type:"text",content:i},function(){return rc("beforeDOMElementCreation",{content:i,params:a}),N2({content:i,transform:Kt(Kt({},ca),d),title:l,extra:{attributes:C,styles:R,classes:["".concat(rn.cssPrefix,"-layers-text")].concat(Nd(w))}})})}}},provides:function(t){t.generateLayersText=function(i,a){var c=a.title,d=a.transform,g=a.extra,l=null,b=null;if(LC){var w=parseInt(getComputedStyle(i).fontSize,10),I=i.getBoundingClientRect();l=I.width/w,b=I.height/w}return rn.autoA11y&&!c&&(g.attributes["aria-hidden"]="true"),Promise.resolve([i,N2({content:i.innerHTML,width:l,height:b,transform:d,title:c,extra:g,watchable:!0})])}}},sz=new RegExp('"',"ug"),W2=[1105920,1112319];function az(e){var t=e.replace(sz,""),i=xL(t,0),a=i>=W2[0]&&i<=W2[1],c=t.length===2?t[0]===t[1]:!1;return{value:n_(c?t[0]:t),isSecondary:a||c}}function X2(e,t){var i="".concat(q4).concat(t.replace(":","-"));return new Promise(function(a,c){if(e.getAttribute(i)!==null)return a();var d=zh(e.children),g=d.filter(function(E){return E.getAttribute(t_)===t})[0],l=ru.getComputedStyle(e,t),b=l.getPropertyValue("font-family").match(eL),w=l.getPropertyValue("font-weight"),I=l.getPropertyValue("content");if(g&&!b)return e.removeChild(g),a();if(b&&I!=="none"&&I!==""){var C=l.getPropertyValue("content"),k=~["Sharp"].indexOf(b[2])?Br:vr,R=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(b[2])?Td[k][b[2].toLowerCase()]:tL[k][w],J=az(C),Y=J.value,de=J.isSecondary,G=b[0].startsWith("FontAwesome"),$=q1(R,Y),D=$;if(G){var ne=IL(Y);ne.iconName&&ne.prefix&&($=ne.iconName,R=ne.prefix)}if($&&!de&&(!g||g.getAttribute(V1)!==R||g.getAttribute(G1)!==D)){e.setAttribute(i,D),g&&e.removeChild(g);var Z=YL(),U=Z.extra;U.attributes[t_]=t,a_($,R).then(function(E){var M=Y1(Kt(Kt({},Z),{},{icons:{main:E,mask:K1()},prefix:R,iconName:D,extra:U,watchable:!0})),H=xr.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(H,e.firstChild):e.appendChild(H),H.outerHTML=M.map(function(q){return $d(q)}).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function lz(e){return Promise.all([X2(e,"::before"),X2(e,"::after")])}function uz(e){return e.parentNode!==document.head&&!~Y4.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(t_)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function q2(e){if(nl)return new Promise(function(t,i){var a=zh(e.querySelectorAll("*")).filter(uz).map(lz),c=J1.begin("searchPseudoElements");QC(),Promise.all(a).then(function(){c(),u_(),t()}).catch(function(){c(),u_(),i()})})}var cz={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=q2,i}}},provides:function(t){t.pseudoElements2svg=function(i){var a=i.node,c=a===void 0?xr:a;rn.searchPseudoElements&&q2(c)}}},K2=!1,hz={mixout:function(){return{dom:{unwatch:function(){QC(),K2=!0}}}},hooks:function(){return{bootstrap:function(){G2(i_("mutationObserverCallbacks",{}))},noAuto:function(){WL()},watch:function(i){var a=i.observeMutationsRoot;K2?u_():G2(i_("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},Y2=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,c){var d=c.toLowerCase().split("-"),g=d[0],l=d.slice(1).join("-");if(g&&l==="h")return a.flipX=!0,a;if(g&&l==="v")return a.flipY=!0,a;if(l=parseFloat(l),isNaN(l))return a;switch(g){case"grow":a.size=a.size+l;break;case"shrink":a.size=a.size-l;break;case"left":a.x=a.x-l;break;case"right":a.x=a.x+l;break;case"up":a.y=a.y-l;break;case"down":a.y=a.y+l;break;case"rotate":a.rotate=a.rotate+l;break}return a},i)},fz={mixout:function(){return{parse:{transform:function(i){return Y2(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-transform");return c&&(i.transform=Y2(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,c=i.transform,d=i.containerWidth,g=i.iconWidth,l={transform:"translate(".concat(d/2," 256)")},b="translate(".concat(c.x*32,", ").concat(c.y*32,") "),w="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),I="rotate(".concat(c.rotate," 0 0)"),C={transform:"".concat(b," ").concat(w," ").concat(I)},k={transform:"translate(".concat(g/2*-1," -256)")},R={outer:l,inner:C,path:k};return{tag:"g",attributes:Kt({},R.outer),children:[{tag:"g",attributes:Kt({},R.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:Kt(Kt({},a.icon.attributes),R.path)}]}]}}}},M0={x:0,y:0,width:"100%",height:"100%"};function J2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function dz(e){return e.tag==="g"?e.children:[e]}var pz={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-mask"),d=c?Yg(c.split(" ").map(function(g){return g.trim()})):K1();return d.prefix||(d.prefix=iu()),i.mask=d,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var a=i.children,c=i.attributes,d=i.main,g=i.mask,l=i.maskId,b=i.transform,w=d.width,I=d.icon,C=g.width,k=g.icon,R=fL({transform:b,containerWidth:C,iconWidth:w}),J={tag:"rect",attributes:Kt(Kt({},M0),{},{fill:"white"})},Y=I.children?{children:I.children.map(J2)}:{},de={tag:"g",attributes:Kt({},R.inner),children:[J2(Kt({tag:I.tag,attributes:Kt(Kt({},I.attributes),R.path)},Y))]},G={tag:"g",attributes:Kt({},R.outer),children:[de]},$="mask-".concat(l||Ad()),D="clip-".concat(l||Ad()),ne={tag:"mask",attributes:Kt(Kt({},M0),{},{id:$,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[J,G]},Z={tag:"defs",children:[{tag:"clipPath",attributes:{id:D},children:dz(k)},ne]};return a.push(Z,{tag:"rect",attributes:Kt({fill:"currentColor","clip-path":"url(#".concat(D,")"),mask:"url(#".concat($,")")},M0)}),{children:a,attributes:c}}}},mz={provides:function(t){var i=!1;ru.matchMedia&&(i=ru.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],c={fill:"currentColor"},d={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:Kt(Kt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var g=Kt(Kt({},d),{},{attributeName:"opacity"}),l={tag:"circle",attributes:Kt(Kt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||l.children.push({tag:"animate",attributes:Kt(Kt({},d),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Kt(Kt({},g),{},{values:"1;0;1;1;0;1;"})}),a.push(l),a.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:Kt(Kt({},g),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Kt(Kt({},g),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},gz={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-symbol"),d=c===null?!1:c===""?!0:c;return i.symbol=d,i}}}},yz=[mL,nz,rz,iz,oz,cz,hz,fz,pz,mz,gz];kL(yz,{mixoutsTo:Zo});Zo.noAuto;Zo.config;Zo.library;Zo.dom;var c_=Zo.parse;Zo.findIconDefinition;Zo.toHtml;var vz=Zo.icon;Zo.layer;Zo.text;Zo.counter;var tI={exports:{}},_z="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xz=_z,wz=xz;function nI(){}function rI(){}rI.resetWarningCache=nI;var bz=function(){function e(a,c,d,g,l,b){if(b!==wz){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:rI,resetWarningCache:nI};return i.PropTypes=i,i};tI.exports=bz();var Sz=tI.exports;const Bn=zd(Sz);function Q2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Hl(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Q2(Object(i),!0).forEach(function(a){ih(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Q2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function og(e){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},og(e)}function ih(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ez(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,d;for(d=0;d<a.length;d++)c=a[d],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function Tz(e,t){if(e==null)return{};var i=Ez(e,t),a,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(c=0;c<d.length;c++)a=d[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function h_(e){return Cz(e)||Iz(e)||Az(e)||Pz()}function Cz(e){if(Array.isArray(e))return f_(e)}function Iz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Az(e,t){if(e){if(typeof e=="string")return f_(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return f_(e,t)}}function f_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Pz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kz(e){var t,i=e.beat,a=e.fade,c=e.beatFade,d=e.bounce,g=e.shake,l=e.flash,b=e.spin,w=e.spinPulse,I=e.spinReverse,C=e.pulse,k=e.fixedWidth,R=e.inverse,J=e.border,Y=e.listItem,de=e.flip,G=e.size,$=e.rotation,D=e.pull,ne=(t={"fa-beat":i,"fa-fade":a,"fa-beat-fade":c,"fa-bounce":d,"fa-shake":g,"fa-flash":l,"fa-spin":b,"fa-spin-reverse":I,"fa-spin-pulse":w,"fa-pulse":C,"fa-fw":k,"fa-inverse":R,"fa-border":J,"fa-li":Y,"fa-flip":de===!0,"fa-flip-horizontal":de==="horizontal"||de==="both","fa-flip-vertical":de==="vertical"||de==="both"},ih(t,"fa-".concat(G),typeof G<"u"&&G!==null),ih(t,"fa-rotate-".concat($),typeof $<"u"&&$!==null&&$!==0),ih(t,"fa-pull-".concat(D),typeof D<"u"&&D!==null),ih(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(ne).map(function(Z){return ne[Z]?Z:null}).filter(function(Z){return Z})}function Mz(e){return e=e-0,e===e}function iI(e){return Mz(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var Lz=["style"];function zz(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Fz(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=iI(i.slice(0,a)),d=i.slice(a+1).trim();return c.startsWith("webkit")?t[zz(c)]=d:t[c]=d,t},{})}function oI(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(b){return oI(e,b)}),c=Object.keys(t.attributes||{}).reduce(function(b,w){var I=t.attributes[w];switch(w){case"class":b.attrs.className=I,delete t.attributes.class;break;case"style":b.attrs.style=Fz(I);break;default:w.indexOf("aria-")===0||w.indexOf("data-")===0?b.attrs[w.toLowerCase()]=I:b.attrs[iI(w)]=I}return b},{attrs:{}}),d=i.style,g=d===void 0?{}:d,l=Tz(i,Lz);return c.attrs.style=Hl(Hl({},c.attrs.style),g),e.apply(void 0,[t.tag,Hl(Hl({},c.attrs),l)].concat(h_(a)))}var sI=!1;try{sI=!0}catch{}function Oz(){if(!sI&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function eS(e){if(e&&og(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(c_.icon)return c_.icon(e);if(e===null)return null;if(e&&og(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function L0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?ih({},e,t):{}}var da=q_.forwardRef(function(e,t){var i=e.icon,a=e.mask,c=e.symbol,d=e.className,g=e.title,l=e.titleId,b=e.maskId,w=eS(i),I=L0("classes",[].concat(h_(kz(e)),h_(d.split(" ")))),C=L0("transform",typeof e.transform=="string"?c_.transform(e.transform):e.transform),k=L0("mask",eS(a)),R=vz(w,Hl(Hl(Hl(Hl({},I),C),k),{},{symbol:c,title:g,titleId:l,maskId:b}));if(!R)return Oz("Could not find icon",w),null;var J=R.abstract,Y={ref:t};return Object.keys(e).forEach(function(de){da.defaultProps.hasOwnProperty(de)||(Y[de]=e[de])}),Rz(J[0],Y)});da.displayName="FontAwesomeIcon";da.propTypes={beat:Bn.bool,border:Bn.bool,beatFade:Bn.bool,bounce:Bn.bool,className:Bn.string,fade:Bn.bool,flash:Bn.bool,mask:Bn.oneOfType([Bn.object,Bn.array,Bn.string]),maskId:Bn.string,fixedWidth:Bn.bool,inverse:Bn.bool,flip:Bn.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Bn.oneOfType([Bn.object,Bn.array,Bn.string]),listItem:Bn.bool,pull:Bn.oneOf(["right","left"]),pulse:Bn.bool,rotation:Bn.oneOf([0,90,180,270]),shake:Bn.bool,size:Bn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Bn.bool,spinPulse:Bn.bool,spinReverse:Bn.bool,symbol:Bn.oneOfType([Bn.bool,Bn.string]),title:Bn.string,titleId:Bn.string,transform:Bn.oneOfType([Bn.string,Bn.object]),swapOpacity:Bn.bool};da.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var Rz=oI.bind(null,q_.createElement),jz={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},d_={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},Dz={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"]},Bz=Dz;function Qp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aI={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,d){function g(w,I){if(!c[w]){if(!a[w]){var C=typeof Qp=="function"&&Qp;if(!I&&C)return C(w,!0);if(l)return l(w,!0);var k=new Error("Cannot find module '"+w+"'");throw k.code="MODULE_NOT_FOUND",k}var R=c[w]={exports:{}};a[w][0].call(R.exports,function(J){var Y=a[w][1][J];return g(Y||J)},R,R.exports,i,a,c,d)}return c[w].exports}for(var l=typeof Qp=="function"&&Qp,b=0;b<d.length;b++)g(d[b]);return g}return i}()({1:[function(i,a,c){c.byteLength=k,c.toByteArray=J,c.fromByteArray=G;for(var d=[],g=[],l=typeof Uint8Array<"u"?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,I=b.length;w<I;++w)d[w]=b[w],g[b.charCodeAt(w)]=w;g[45]=62,g[95]=63;function C($){var D=$.length;if(D%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ne=$.indexOf("=");ne===-1&&(ne=D);var Z=ne===D?0:4-ne%4;return[ne,Z]}function k($){var D=C($),ne=D[0],Z=D[1];return(ne+Z)*3/4-Z}function R($,D,ne){return(D+ne)*3/4-ne}function J($){var D,ne=C($),Z=ne[0],U=ne[1],E=new l(R($,Z,U)),M=0,H=U>0?Z-4:Z,q;for(q=0;q<H;q+=4)D=g[$.charCodeAt(q)]<<18|g[$.charCodeAt(q+1)]<<12|g[$.charCodeAt(q+2)]<<6|g[$.charCodeAt(q+3)],E[M++]=D>>16&255,E[M++]=D>>8&255,E[M++]=D&255;return U===2&&(D=g[$.charCodeAt(q)]<<2|g[$.charCodeAt(q+1)]>>4,E[M++]=D&255),U===1&&(D=g[$.charCodeAt(q)]<<10|g[$.charCodeAt(q+1)]<<4|g[$.charCodeAt(q+2)]>>2,E[M++]=D>>8&255,E[M++]=D&255),E}function Y($){return d[$>>18&63]+d[$>>12&63]+d[$>>6&63]+d[$&63]}function de($,D,ne){for(var Z,U=[],E=D;E<ne;E+=3)Z=($[E]<<16&16711680)+($[E+1]<<8&65280)+($[E+2]&255),U.push(Y(Z));return U.join("")}function G($){for(var D,ne=$.length,Z=ne%3,U=[],E=16383,M=0,H=ne-Z;M<H;M+=E)U.push(de($,M,M+E>H?H:M+E));return Z===1?(D=$[ne-1],U.push(d[D>>2]+d[D<<4&63]+"==")):Z===2&&(D=($[ne-2]<<8)+$[ne-1],U.push(d[D>>10]+d[D>>4&63]+d[D<<2&63]+"=")),U.join("")}},{}],2:[function(i,a,c){(function(d){(function(){var g=i("base64-js"),l=i("ieee754");c.Buffer=C,c.SlowBuffer=Z,c.INSPECT_MAX_BYTES=50;var b=2147483647;c.kMaxLength=b,C.TYPED_ARRAY_SUPPORT=w(),!C.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{var se=new Uint8Array(1);return se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},se.foo()===42}catch{return!1}}Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.buffer}}),Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.byteOffset}});function I(se){if(se>b)throw new RangeError('The value "'+se+'" is invalid for option "size"');var j=new Uint8Array(se);return j.__proto__=C.prototype,j}function C(se,j,O){if(typeof se=="number"){if(typeof j=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Y(se)}return k(se,j,O)}typeof Symbol<"u"&&Symbol.species!=null&&C[Symbol.species]===C&&Object.defineProperty(C,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),C.poolSize=8192;function k(se,j,O){if(typeof se=="string")return de(se,j);if(ArrayBuffer.isView(se))return G(se);if(se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(sn(se,ArrayBuffer)||se&&sn(se.buffer,ArrayBuffer))return $(se,j,O);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var pe=se.valueOf&&se.valueOf();if(pe!=null&&pe!==se)return C.from(pe,j,O);var Be=D(se);if(Be)return Be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return C.from(se[Symbol.toPrimitive]("string"),j,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}C.from=function(se,j,O){return k(se,j,O)},C.prototype.__proto__=Uint8Array.prototype,C.__proto__=Uint8Array;function R(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function J(se,j,O){return R(se),se<=0?I(se):j!==void 0?typeof O=="string"?I(se).fill(j,O):I(se).fill(j):I(se)}C.alloc=function(se,j,O){return J(se,j,O)};function Y(se){return R(se),I(se<0?0:ne(se)|0)}C.allocUnsafe=function(se){return Y(se)},C.allocUnsafeSlow=function(se){return Y(se)};function de(se,j){if((typeof j!="string"||j==="")&&(j="utf8"),!C.isEncoding(j))throw new TypeError("Unknown encoding: "+j);var O=U(se,j)|0,pe=I(O),Be=pe.write(se,j);return Be!==O&&(pe=pe.slice(0,Be)),pe}function G(se){for(var j=se.length<0?0:ne(se.length)|0,O=I(j),pe=0;pe<j;pe+=1)O[pe]=se[pe]&255;return O}function $(se,j,O){if(j<0||se.byteLength<j)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<j+(O||0))throw new RangeError('"length" is outside of buffer bounds');var pe;return j===void 0&&O===void 0?pe=new Uint8Array(se):O===void 0?pe=new Uint8Array(se,j):pe=new Uint8Array(se,j,O),pe.__proto__=C.prototype,pe}function D(se){if(C.isBuffer(se)){var j=ne(se.length)|0,O=I(j);return O.length===0||se.copy(O,0,0,j),O}if(se.length!==void 0)return typeof se.length!="number"||gn(se.length)?I(0):G(se);if(se.type==="Buffer"&&Array.isArray(se.data))return G(se.data)}function ne(se){if(se>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return se|0}function Z(se){return+se!=se&&(se=0),C.alloc(+se)}C.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==C.prototype},C.compare=function(j,O){if(sn(j,Uint8Array)&&(j=C.from(j,j.offset,j.byteLength)),sn(O,Uint8Array)&&(O=C.from(O,O.offset,O.byteLength)),!C.isBuffer(j)||!C.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===O)return 0;for(var pe=j.length,Be=O.length,et=0,lt=Math.min(pe,Be);et<lt;++et)if(j[et]!==O[et]){pe=j[et],Be=O[et];break}return pe<Be?-1:Be<pe?1:0},C.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(j,O){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return C.alloc(0);var pe;if(O===void 0)for(O=0,pe=0;pe<j.length;++pe)O+=j[pe].length;var Be=C.allocUnsafe(O),et=0;for(pe=0;pe<j.length;++pe){var lt=j[pe];if(sn(lt,Uint8Array)&&(lt=C.from(lt)),!C.isBuffer(lt))throw new TypeError('"list" argument must be an Array of Buffers');lt.copy(Be,et),et+=lt.length}return Be};function U(se,j){if(C.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||sn(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);var O=se.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&O===0)return 0;for(var Be=!1;;)switch(j){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return Gt(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return xn(se).length;default:if(Be)return pe?-1:Gt(se).length;j=(""+j).toLowerCase(),Be=!0}}C.byteLength=U;function E(se,j,O){var pe=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,j>>>=0,O<=j))return"";for(se||(se="utf8");;)switch(se){case"hex":return Pe(this,j,O);case"utf8":case"utf-8":return ie(this,j,O);case"ascii":return Se(this,j,O);case"latin1":case"binary":return $e(this,j,O);case"base64":return re(this,j,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,j,O);default:if(pe)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),pe=!0}}C.prototype._isBuffer=!0;function M(se,j,O){var pe=se[j];se[j]=se[O],se[O]=pe}C.prototype.swap16=function(){var j=this.length;if(j%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<j;O+=2)M(this,O,O+1);return this},C.prototype.swap32=function(){var j=this.length;if(j%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<j;O+=4)M(this,O,O+3),M(this,O+1,O+2);return this},C.prototype.swap64=function(){var j=this.length;if(j%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<j;O+=8)M(this,O,O+7),M(this,O+1,O+6),M(this,O+2,O+5),M(this,O+3,O+4);return this},C.prototype.toString=function(){var j=this.length;return j===0?"":arguments.length===0?ie(this,0,j):E.apply(this,arguments)},C.prototype.toLocaleString=C.prototype.toString,C.prototype.equals=function(j){if(!C.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j?!0:C.compare(this,j)===0},C.prototype.inspect=function(){var j="",O=c.INSPECT_MAX_BYTES;return j=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(j+=" ... "),"<Buffer "+j+">"},C.prototype.compare=function(j,O,pe,Be,et){if(sn(j,Uint8Array)&&(j=C.from(j,j.offset,j.byteLength)),!C.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(O===void 0&&(O=0),pe===void 0&&(pe=j?j.length:0),Be===void 0&&(Be=0),et===void 0&&(et=this.length),O<0||pe>j.length||Be<0||et>this.length)throw new RangeError("out of range index");if(Be>=et&&O>=pe)return 0;if(Be>=et)return-1;if(O>=pe)return 1;if(O>>>=0,pe>>>=0,Be>>>=0,et>>>=0,this===j)return 0;for(var lt=et-Be,le=pe-O,z=Math.min(lt,le),B=this.slice(Be,et),Ee=j.slice(O,pe),Ge=0;Ge<z;++Ge)if(B[Ge]!==Ee[Ge]){lt=B[Ge],le=Ee[Ge];break}return lt<le?-1:le<lt?1:0};function H(se,j,O,pe,Be){if(se.length===0)return-1;if(typeof O=="string"?(pe=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,gn(O)&&(O=Be?0:se.length-1),O<0&&(O=se.length+O),O>=se.length){if(Be)return-1;O=se.length-1}else if(O<0)if(Be)O=0;else return-1;if(typeof j=="string"&&(j=C.from(j,pe)),C.isBuffer(j))return j.length===0?-1:q(se,j,O,pe,Be);if(typeof j=="number")return j=j&255,typeof Uint8Array.prototype.indexOf=="function"?Be?Uint8Array.prototype.indexOf.call(se,j,O):Uint8Array.prototype.lastIndexOf.call(se,j,O):q(se,[j],O,pe,Be);throw new TypeError("val must be string, number or Buffer")}function q(se,j,O,pe,Be){var et=1,lt=se.length,le=j.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(se.length<2||j.length<2)return-1;et=2,lt/=2,le/=2,O/=2}function z(at,jt){return et===1?at[jt]:at.readUInt16BE(jt*et)}var B;if(Be){var Ee=-1;for(B=O;B<lt;B++)if(z(se,B)===z(j,Ee===-1?0:B-Ee)){if(Ee===-1&&(Ee=B),B-Ee+1===le)return Ee*et}else Ee!==-1&&(B-=B-Ee),Ee=-1}else for(O+le>lt&&(O=lt-le),B=O;B>=0;B--){for(var Ge=!0,je=0;je<le;je++)if(z(se,B+je)!==z(j,je)){Ge=!1;break}if(Ge)return B}return-1}C.prototype.includes=function(j,O,pe){return this.indexOf(j,O,pe)!==-1},C.prototype.indexOf=function(j,O,pe){return H(this,j,O,pe,!0)},C.prototype.lastIndexOf=function(j,O,pe){return H(this,j,O,pe,!1)};function ee(se,j,O,pe){O=Number(O)||0;var Be=se.length-O;pe?(pe=Number(pe),pe>Be&&(pe=Be)):pe=Be;var et=j.length;pe>et/2&&(pe=et/2);for(var lt=0;lt<pe;++lt){var le=parseInt(j.substr(lt*2,2),16);if(gn(le))return lt;se[O+lt]=le}return lt}function ve(se,j,O,pe){return yn(Gt(j,se.length-O),se,O,pe)}function xe(se,j,O,pe){return yn(Ut(j),se,O,pe)}function be(se,j,O,pe){return xe(se,j,O,pe)}function te(se,j,O,pe){return yn(xn(j),se,O,pe)}function ue(se,j,O,pe){return yn(cn(j,se.length-O),se,O,pe)}C.prototype.write=function(j,O,pe,Be){if(O===void 0)Be="utf8",pe=this.length,O=0;else if(pe===void 0&&typeof O=="string")Be=O,pe=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite(pe)?(pe=pe>>>0,Be===void 0&&(Be="utf8")):(Be=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var et=this.length-O;if((pe===void 0||pe>et)&&(pe=et),j.length>0&&(pe<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");Be||(Be="utf8");for(var lt=!1;;)switch(Be){case"hex":return ee(this,j,O,pe);case"utf8":case"utf-8":return ve(this,j,O,pe);case"ascii":return xe(this,j,O,pe);case"latin1":case"binary":return be(this,j,O,pe);case"base64":return te(this,j,O,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,j,O,pe);default:if(lt)throw new TypeError("Unknown encoding: "+Be);Be=(""+Be).toLowerCase(),lt=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function re(se,j,O){return j===0&&O===se.length?g.fromByteArray(se):g.fromByteArray(se.slice(j,O))}function ie(se,j,O){O=Math.min(se.length,O);for(var pe=[],Be=j;Be<O;){var et=se[Be],lt=null,le=et>239?4:et>223?3:et>191?2:1;if(Be+le<=O){var z,B,Ee,Ge;switch(le){case 1:et<128&&(lt=et);break;case 2:z=se[Be+1],(z&192)===128&&(Ge=(et&31)<<6|z&63,Ge>127&&(lt=Ge));break;case 3:z=se[Be+1],B=se[Be+2],(z&192)===128&&(B&192)===128&&(Ge=(et&15)<<12|(z&63)<<6|B&63,Ge>2047&&(Ge<55296||Ge>57343)&&(lt=Ge));break;case 4:z=se[Be+1],B=se[Be+2],Ee=se[Be+3],(z&192)===128&&(B&192)===128&&(Ee&192)===128&&(Ge=(et&15)<<18|(z&63)<<12|(B&63)<<6|Ee&63,Ge>65535&&Ge<1114112&&(lt=Ge))}}lt===null?(lt=65533,le=1):lt>65535&&(lt-=65536,pe.push(lt>>>10&1023|55296),lt=56320|lt&1023),pe.push(lt),Be+=le}return Te(pe)}var ye=4096;function Te(se){var j=se.length;if(j<=ye)return String.fromCharCode.apply(String,se);for(var O="",pe=0;pe<j;)O+=String.fromCharCode.apply(String,se.slice(pe,pe+=ye));return O}function Se(se,j,O){var pe="";O=Math.min(se.length,O);for(var Be=j;Be<O;++Be)pe+=String.fromCharCode(se[Be]&127);return pe}function $e(se,j,O){var pe="";O=Math.min(se.length,O);for(var Be=j;Be<O;++Be)pe+=String.fromCharCode(se[Be]);return pe}function Pe(se,j,O){var pe=se.length;(!j||j<0)&&(j=0),(!O||O<0||O>pe)&&(O=pe);for(var Be="",et=j;et<O;++et)Be+=St(se[et]);return Be}function ze(se,j,O){for(var pe=se.slice(j,O),Be="",et=0;et<pe.length;et+=2)Be+=String.fromCharCode(pe[et]+pe[et+1]*256);return Be}C.prototype.slice=function(j,O){var pe=this.length;j=~~j,O=O===void 0?pe:~~O,j<0?(j+=pe,j<0&&(j=0)):j>pe&&(j=pe),O<0?(O+=pe,O<0&&(O=0)):O>pe&&(O=pe),O<j&&(O=j);var Be=this.subarray(j,O);return Be.__proto__=C.prototype,Be};function Xe(se,j,O){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+j>O)throw new RangeError("Trying to access beyond buffer length")}C.prototype.readUIntLE=function(j,O,pe){j=j>>>0,O=O>>>0,pe||Xe(j,O,this.length);for(var Be=this[j],et=1,lt=0;++lt<O&&(et*=256);)Be+=this[j+lt]*et;return Be},C.prototype.readUIntBE=function(j,O,pe){j=j>>>0,O=O>>>0,pe||Xe(j,O,this.length);for(var Be=this[j+--O],et=1;O>0&&(et*=256);)Be+=this[j+--O]*et;return Be},C.prototype.readUInt8=function(j,O){return j=j>>>0,O||Xe(j,1,this.length),this[j]},C.prototype.readUInt16LE=function(j,O){return j=j>>>0,O||Xe(j,2,this.length),this[j]|this[j+1]<<8},C.prototype.readUInt16BE=function(j,O){return j=j>>>0,O||Xe(j,2,this.length),this[j]<<8|this[j+1]},C.prototype.readUInt32LE=function(j,O){return j=j>>>0,O||Xe(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+this[j+3]*16777216},C.prototype.readUInt32BE=function(j,O){return j=j>>>0,O||Xe(j,4,this.length),this[j]*16777216+(this[j+1]<<16|this[j+2]<<8|this[j+3])},C.prototype.readIntLE=function(j,O,pe){j=j>>>0,O=O>>>0,pe||Xe(j,O,this.length);for(var Be=this[j],et=1,lt=0;++lt<O&&(et*=256);)Be+=this[j+lt]*et;return et*=128,Be>=et&&(Be-=Math.pow(2,8*O)),Be},C.prototype.readIntBE=function(j,O,pe){j=j>>>0,O=O>>>0,pe||Xe(j,O,this.length);for(var Be=O,et=1,lt=this[j+--Be];Be>0&&(et*=256);)lt+=this[j+--Be]*et;return et*=128,lt>=et&&(lt-=Math.pow(2,8*O)),lt},C.prototype.readInt8=function(j,O){return j=j>>>0,O||Xe(j,1,this.length),this[j]&128?(255-this[j]+1)*-1:this[j]},C.prototype.readInt16LE=function(j,O){j=j>>>0,O||Xe(j,2,this.length);var pe=this[j]|this[j+1]<<8;return pe&32768?pe|4294901760:pe},C.prototype.readInt16BE=function(j,O){j=j>>>0,O||Xe(j,2,this.length);var pe=this[j+1]|this[j]<<8;return pe&32768?pe|4294901760:pe},C.prototype.readInt32LE=function(j,O){return j=j>>>0,O||Xe(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},C.prototype.readInt32BE=function(j,O){return j=j>>>0,O||Xe(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},C.prototype.readFloatLE=function(j,O){return j=j>>>0,O||Xe(j,4,this.length),l.read(this,j,!0,23,4)},C.prototype.readFloatBE=function(j,O){return j=j>>>0,O||Xe(j,4,this.length),l.read(this,j,!1,23,4)},C.prototype.readDoubleLE=function(j,O){return j=j>>>0,O||Xe(j,8,this.length),l.read(this,j,!0,52,8)},C.prototype.readDoubleBE=function(j,O){return j=j>>>0,O||Xe(j,8,this.length),l.read(this,j,!1,52,8)};function Ze(se,j,O,pe,Be,et){if(!C.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>Be||j<et)throw new RangeError('"value" argument is out of bounds');if(O+pe>se.length)throw new RangeError("Index out of range")}C.prototype.writeUIntLE=function(j,O,pe,Be){if(j=+j,O=O>>>0,pe=pe>>>0,!Be){var et=Math.pow(2,8*pe)-1;Ze(this,j,O,pe,et,0)}var lt=1,le=0;for(this[O]=j&255;++le<pe&&(lt*=256);)this[O+le]=j/lt&255;return O+pe},C.prototype.writeUIntBE=function(j,O,pe,Be){if(j=+j,O=O>>>0,pe=pe>>>0,!Be){var et=Math.pow(2,8*pe)-1;Ze(this,j,O,pe,et,0)}var lt=pe-1,le=1;for(this[O+lt]=j&255;--lt>=0&&(le*=256);)this[O+lt]=j/le&255;return O+pe},C.prototype.writeUInt8=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,1,255,0),this[O]=j&255,O+1},C.prototype.writeUInt16LE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,2,65535,0),this[O]=j&255,this[O+1]=j>>>8,O+2},C.prototype.writeUInt16BE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,2,65535,0),this[O]=j>>>8,this[O+1]=j&255,O+2},C.prototype.writeUInt32LE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,4,4294967295,0),this[O+3]=j>>>24,this[O+2]=j>>>16,this[O+1]=j>>>8,this[O]=j&255,O+4},C.prototype.writeUInt32BE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,4,4294967295,0),this[O]=j>>>24,this[O+1]=j>>>16,this[O+2]=j>>>8,this[O+3]=j&255,O+4},C.prototype.writeIntLE=function(j,O,pe,Be){if(j=+j,O=O>>>0,!Be){var et=Math.pow(2,8*pe-1);Ze(this,j,O,pe,et-1,-et)}var lt=0,le=1,z=0;for(this[O]=j&255;++lt<pe&&(le*=256);)j<0&&z===0&&this[O+lt-1]!==0&&(z=1),this[O+lt]=(j/le>>0)-z&255;return O+pe},C.prototype.writeIntBE=function(j,O,pe,Be){if(j=+j,O=O>>>0,!Be){var et=Math.pow(2,8*pe-1);Ze(this,j,O,pe,et-1,-et)}var lt=pe-1,le=1,z=0;for(this[O+lt]=j&255;--lt>=0&&(le*=256);)j<0&&z===0&&this[O+lt+1]!==0&&(z=1),this[O+lt]=(j/le>>0)-z&255;return O+pe},C.prototype.writeInt8=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,1,127,-128),j<0&&(j=255+j+1),this[O]=j&255,O+1},C.prototype.writeInt16LE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,2,32767,-32768),this[O]=j&255,this[O+1]=j>>>8,O+2},C.prototype.writeInt16BE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,2,32767,-32768),this[O]=j>>>8,this[O+1]=j&255,O+2},C.prototype.writeInt32LE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,4,2147483647,-2147483648),this[O]=j&255,this[O+1]=j>>>8,this[O+2]=j>>>16,this[O+3]=j>>>24,O+4},C.prototype.writeInt32BE=function(j,O,pe){return j=+j,O=O>>>0,pe||Ze(this,j,O,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[O]=j>>>24,this[O+1]=j>>>16,this[O+2]=j>>>8,this[O+3]=j&255,O+4};function nt(se,j,O,pe,Be,et){if(O+pe>se.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function ct(se,j,O,pe,Be){return j=+j,O=O>>>0,Be||nt(se,j,O,4),l.write(se,j,O,pe,23,4),O+4}C.prototype.writeFloatLE=function(j,O,pe){return ct(this,j,O,!0,pe)},C.prototype.writeFloatBE=function(j,O,pe){return ct(this,j,O,!1,pe)};function vt(se,j,O,pe,Be){return j=+j,O=O>>>0,Be||nt(se,j,O,8),l.write(se,j,O,pe,52,8),O+8}C.prototype.writeDoubleLE=function(j,O,pe){return vt(this,j,O,!0,pe)},C.prototype.writeDoubleBE=function(j,O,pe){return vt(this,j,O,!1,pe)},C.prototype.copy=function(j,O,pe,Be){if(!C.isBuffer(j))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!Be&&Be!==0&&(Be=this.length),O>=j.length&&(O=j.length),O||(O=0),Be>0&&Be<pe&&(Be=pe),Be===pe||j.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(Be<0)throw new RangeError("sourceEnd out of bounds");Be>this.length&&(Be=this.length),j.length-O<Be-pe&&(Be=j.length-O+pe);var et=Be-pe;if(this===j&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,pe,Be);else if(this===j&&pe<O&&O<Be)for(var lt=et-1;lt>=0;--lt)j[lt+O]=this[lt+pe];else Uint8Array.prototype.set.call(j,this.subarray(pe,Be),O);return et},C.prototype.fill=function(j,O,pe,Be){if(typeof j=="string"){if(typeof O=="string"?(Be=O,O=0,pe=this.length):typeof pe=="string"&&(Be=pe,pe=this.length),Be!==void 0&&typeof Be!="string")throw new TypeError("encoding must be a string");if(typeof Be=="string"&&!C.isEncoding(Be))throw new TypeError("Unknown encoding: "+Be);if(j.length===1){var et=j.charCodeAt(0);(Be==="utf8"&&et<128||Be==="latin1")&&(j=et)}}else typeof j=="number"&&(j=j&255);if(O<0||this.length<O||this.length<pe)throw new RangeError("Out of range index");if(pe<=O)return this;O=O>>>0,pe=pe===void 0?this.length:pe>>>0,j||(j=0);var lt;if(typeof j=="number")for(lt=O;lt<pe;++lt)this[lt]=j;else{var le=C.isBuffer(j)?j:C.from(j,Be),z=le.length;if(z===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(lt=0;lt<pe-O;++lt)this[lt+O]=le[lt%z]}return this};var It=/[^+/0-9A-Za-z-_]/g;function ft(se){if(se=se.split("=")[0],se=se.trim().replace(It,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function St(se){return se<16?"0"+se.toString(16):se.toString(16)}function Gt(se,j){j=j||1/0;for(var O,pe=se.length,Be=null,et=[],lt=0;lt<pe;++lt){if(O=se.charCodeAt(lt),O>55295&&O<57344){if(!Be){if(O>56319){(j-=3)>-1&&et.push(239,191,189);continue}else if(lt+1===pe){(j-=3)>-1&&et.push(239,191,189);continue}Be=O;continue}if(O<56320){(j-=3)>-1&&et.push(239,191,189),Be=O;continue}O=(Be-55296<<10|O-56320)+65536}else Be&&(j-=3)>-1&&et.push(239,191,189);if(Be=null,O<128){if((j-=1)<0)break;et.push(O)}else if(O<2048){if((j-=2)<0)break;et.push(O>>6|192,O&63|128)}else if(O<65536){if((j-=3)<0)break;et.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((j-=4)<0)break;et.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return et}function Ut(se){for(var j=[],O=0;O<se.length;++O)j.push(se.charCodeAt(O)&255);return j}function cn(se,j){for(var O,pe,Be,et=[],lt=0;lt<se.length&&!((j-=2)<0);++lt)O=se.charCodeAt(lt),pe=O>>8,Be=O%256,et.push(Be),et.push(pe);return et}function xn(se){return g.toByteArray(ft(se))}function yn(se,j,O,pe){for(var Be=0;Be<pe&&!(Be+O>=j.length||Be>=se.length);++Be)j[Be+O]=se[Be];return Be}function sn(se,j){return se instanceof j||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===j.name}function gn(se){return se!==se}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const d=i("./validator"),g=i("./xmlparser/XMLParser"),l=i("./xmlbuilder/json2xml");a.exports={XMLParser:g,XMLValidator:d,XMLBuilder:l}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const d=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",g=d+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+d+"]["+g+"]*",b=new RegExp("^"+l+"$"),w=function(C,k){const R=[];let J=k.exec(C);for(;J;){const Y=[];Y.startIndex=k.lastIndex-J[0].length;const de=J.length;for(let G=0;G<de;G++)Y.push(J[G]);R.push(Y),J=k.exec(C)}return R},I=function(C){const k=b.exec(C);return!(k===null||typeof k>"u")};c.isExist=function(C){return typeof C<"u"},c.isEmptyObject=function(C){return Object.keys(C).length===0},c.merge=function(C,k,R){if(k){const J=Object.keys(k),Y=J.length;for(let de=0;de<Y;de++)R==="strict"?C[J[de]]=[k[J[de]]]:C[J[de]]=k[J[de]]}},c.getValue=function(C){return c.isExist(C)?C:""},c.isName=I,c.getAllMatches=w,c.nameRegexp=l},{}],5:[function(i,a,c){const d=i("./util"),g={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(U,E){E=Object.assign({},g,E);const M=[];let H=!1,q=!1;U[0]==="\uFEFF"&&(U=U.substr(1));for(let ee=0;ee<U.length;ee++)if(U[ee]==="<"&&U[ee+1]==="?"){if(ee+=2,ee=b(U,ee),ee.err)return ee}else if(U[ee]==="<"){let ve=ee;if(ee++,U[ee]==="!"){ee=w(U,ee);continue}else{let xe=!1;U[ee]==="/"&&(xe=!0,ee++);let be="";for(;ee<U.length&&U[ee]!==">"&&U[ee]!==" "&&U[ee]!=="	"&&U[ee]!==`
`&&U[ee]!=="\r";ee++)be+=U[ee];if(be=be.trim(),be[be.length-1]==="/"&&(be=be.substring(0,be.length-1),ee--),!D(be)){let re;return be.trim().length===0?re="Invalid space after '<'.":re="Tag '"+be+"' is an invalid name.",G("InvalidTag",re,ne(U,ee))}const te=k(U,ee);if(te===!1)return G("InvalidAttr","Attributes for '"+be+"' have open quote.",ne(U,ee));let ue=te.value;if(ee=te.index,ue[ue.length-1]==="/"){const re=ee-ue.length;ue=ue.substring(0,ue.length-1);const ie=J(ue,E);if(ie===!0)H=!0;else return G(ie.err.code,ie.err.msg,ne(U,re+ie.err.line))}else if(xe)if(te.tagClosed){if(ue.trim().length>0)return G("InvalidTag","Closing tag '"+be+"' can't have attributes or invalid starting.",ne(U,ve));{const re=M.pop();if(be!==re.tagName){let ie=ne(U,re.tagStartPos);return G("InvalidTag","Expected closing tag '"+re.tagName+"' (opened in line "+ie.line+", col "+ie.col+") instead of closing tag '"+be+"'.",ne(U,ve))}M.length==0&&(q=!0)}}else return G("InvalidTag","Closing tag '"+be+"' doesn't have proper closing.",ne(U,ee));else{const re=J(ue,E);if(re!==!0)return G(re.err.code,re.err.msg,ne(U,ee-ue.length+re.err.line));if(q===!0)return G("InvalidXml","Multiple possible root nodes found.",ne(U,ee));E.unpairedTags.indexOf(be)!==-1||M.push({tagName:be,tagStartPos:ve}),H=!0}for(ee++;ee<U.length;ee++)if(U[ee]==="<")if(U[ee+1]==="!"){ee++,ee=w(U,ee);continue}else if(U[ee+1]==="?"){if(ee=b(U,++ee),ee.err)return ee}else break;else if(U[ee]==="&"){const re=de(U,ee);if(re==-1)return G("InvalidChar","char '&' is not expected.",ne(U,ee));ee=re}else if(q===!0&&!l(U[ee]))return G("InvalidXml","Extra text at the end",ne(U,ee));U[ee]==="<"&&ee--}}else{if(l(U[ee]))continue;return G("InvalidChar","char '"+U[ee]+"' is not expected.",ne(U,ee))}if(H){if(M.length==1)return G("InvalidTag","Unclosed tag '"+M[0].tagName+"'.",ne(U,M[0].tagStartPos));if(M.length>0)return G("InvalidXml","Invalid '"+JSON.stringify(M.map(ee=>ee.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return G("InvalidXml","Start tag expected.",1);return!0};function l(U){return U===" "||U==="	"||U===`
`||U==="\r"}function b(U,E){const M=E;for(;E<U.length;E++)if(U[E]=="?"||U[E]==" "){const H=U.substr(M,E-M);if(E>5&&H==="xml")return G("InvalidXml","XML declaration allowed only at the start of the document.",ne(U,E));if(U[E]=="?"&&U[E+1]==">"){E++;break}else continue}return E}function w(U,E){if(U.length>E+5&&U[E+1]==="-"&&U[E+2]==="-"){for(E+=3;E<U.length;E++)if(U[E]==="-"&&U[E+1]==="-"&&U[E+2]===">"){E+=2;break}}else if(U.length>E+8&&U[E+1]==="D"&&U[E+2]==="O"&&U[E+3]==="C"&&U[E+4]==="T"&&U[E+5]==="Y"&&U[E+6]==="P"&&U[E+7]==="E"){let M=1;for(E+=8;E<U.length;E++)if(U[E]==="<")M++;else if(U[E]===">"&&(M--,M===0))break}else if(U.length>E+9&&U[E+1]==="["&&U[E+2]==="C"&&U[E+3]==="D"&&U[E+4]==="A"&&U[E+5]==="T"&&U[E+6]==="A"&&U[E+7]==="["){for(E+=8;E<U.length;E++)if(U[E]==="]"&&U[E+1]==="]"&&U[E+2]===">"){E+=2;break}}return E}const I='"',C="'";function k(U,E){let M="",H="",q=!1;for(;E<U.length;E++){if(U[E]===I||U[E]===C)H===""?H=U[E]:H!==U[E]||(H="");else if(U[E]===">"&&H===""){q=!0;break}M+=U[E]}return H!==""?!1:{value:M,index:E,tagClosed:q}}const R=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function J(U,E){const M=d.getAllMatches(U,R),H={};for(let q=0;q<M.length;q++){if(M[q][1].length===0)return G("InvalidAttr","Attribute '"+M[q][2]+"' has no space in starting.",Z(M[q]));if(M[q][3]!==void 0&&M[q][4]===void 0)return G("InvalidAttr","Attribute '"+M[q][2]+"' is without value.",Z(M[q]));if(M[q][3]===void 0&&!E.allowBooleanAttributes)return G("InvalidAttr","boolean attribute '"+M[q][2]+"' is not allowed.",Z(M[q]));const ee=M[q][2];if(!$(ee))return G("InvalidAttr","Attribute '"+ee+"' is an invalid name.",Z(M[q]));if(!H.hasOwnProperty(ee))H[ee]=1;else return G("InvalidAttr","Attribute '"+ee+"' is repeated.",Z(M[q]))}return!0}function Y(U,E){let M=/\d/;for(U[E]==="x"&&(E++,M=/[\da-fA-F]/);E<U.length;E++){if(U[E]===";")return E;if(!U[E].match(M))break}return-1}function de(U,E){if(E++,U[E]===";")return-1;if(U[E]==="#")return E++,Y(U,E);let M=0;for(;E<U.length;E++,M++)if(!(U[E].match(/\w/)&&M<20)){if(U[E]===";")break;return-1}return E}function G(U,E,M){return{err:{code:U,msg:E,line:M.line||M,col:M.col}}}function $(U){return d.isName(U)}function D(U){return d.isName(U)}function ne(U,E){const M=U.substring(0,E).split(/\r?\n/);return{line:M.length,col:M[M.length-1].length+1}}function Z(U){return U.startIndex+U[1].length}},{"./util":4}],6:[function(i,a,c){const d=i("./orderedJs2Xml"),g={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(G,$){return $},attributeValueProcessor:function(G,$){return $},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function l(G){this.options=Object.assign({},g,G),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=de),this.processTextOrObjNode=w,this.options.format?(this.indentate=Y,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=J,this.buildObjNode=C):(this.buildTextNode=k,this.buildObjNode=I),this.buildTextValNode=k,this.buildObjectNode=I,this.replaceEntitiesValue=R,this.buildAttrPairStr=b}l.prototype.build=function(G){return this.options.preserveOrder?d(G,this.options):(Array.isArray(G)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(G={[this.options.arrayNodeName]:G}),this.j2x(G,0).val)},l.prototype.j2x=function(G,$){let D="",ne="";for(let Z in G)if(!(typeof G[Z]>"u"))if(G[Z]===null)Z[0]==="?"?ne+=this.indentate($)+"<"+Z+"?"+this.tagEndChar:ne+=this.indentate($)+"<"+Z+"/"+this.tagEndChar;else if(G[Z]instanceof Date)ne+=this.buildTextNode(G[Z],Z,"",$);else if(typeof G[Z]!="object"){const U=this.isAttribute(Z);if(U)D+=this.buildAttrPairStr(U,""+G[Z]);else if(Z===this.options.textNodeName){let E=this.options.tagValueProcessor(Z,""+G[Z]);ne+=this.replaceEntitiesValue(E)}else ne+=this.buildTextNode(G[Z],Z,"",$)}else if(Array.isArray(G[Z])){const U=G[Z].length;for(let E=0;E<U;E++){const M=G[Z][E];typeof M>"u"||(M===null?Z[0]==="?"?ne+=this.indentate($)+"<"+Z+"?"+this.tagEndChar:ne+=this.indentate($)+"<"+Z+"/"+this.tagEndChar:typeof M=="object"?ne+=this.processTextOrObjNode(M,Z,$):ne+=this.buildTextNode(M,Z,"",$))}}else if(this.options.attributesGroupName&&Z===this.options.attributesGroupName){const U=Object.keys(G[Z]),E=U.length;for(let M=0;M<E;M++)D+=this.buildAttrPairStr(U[M],""+G[Z][U[M]])}else ne+=this.processTextOrObjNode(G[Z],Z,$);return{attrStr:D,val:ne}};function b(G,$){return $=this.options.attributeValueProcessor(G,""+$),$=this.replaceEntitiesValue($),this.options.suppressBooleanAttributes&&$==="true"?" "+G:" "+G+'="'+$+'"'}function w(G,$,D){const ne=this.j2x(G,D+1);return G[this.options.textNodeName]!==void 0&&Object.keys(G).length===1?this.buildTextNode(G[this.options.textNodeName],$,ne.attrStr,D):this.buildObjNode(ne.val,$,ne.attrStr,D)}function I(G,$,D,ne){let Z="</"+$+this.tagEndChar,U="";return $[0]==="?"&&(U="?",Z=""),D&&G.indexOf("<")===-1?this.indentate(ne)+"<"+$+D+U+">"+G+Z:this.options.commentPropName!==!1&&$===this.options.commentPropName&&U.length===0?this.indentate(ne)+`<!--${G}-->`+this.newLine:this.indentate(ne)+"<"+$+D+U+this.tagEndChar+G+this.indentate(ne)+Z}function C(G,$,D,ne){return G!==""?this.buildObjectNode(G,$,D,ne):$[0]==="?"?this.indentate(ne)+"<"+$+D+"?"+this.tagEndChar:this.indentate(ne)+"<"+$+D+"/"+this.tagEndChar}function k(G,$,D,ne){if(this.options.cdataPropName!==!1&&$===this.options.cdataPropName)return this.indentate(ne)+`<![CDATA[${G}]]>`+this.newLine;if(this.options.commentPropName!==!1&&$===this.options.commentPropName)return this.indentate(ne)+`<!--${G}-->`+this.newLine;{let Z=this.options.tagValueProcessor($,G);return Z=this.replaceEntitiesValue(Z),Z===""&&this.options.unpairedTags.indexOf($)!==-1?this.options.suppressUnpairedNode?this.indentate(ne)+"<"+$+this.tagEndChar:this.indentate(ne)+"<"+$+"/"+this.tagEndChar:this.indentate(ne)+"<"+$+D+">"+Z+"</"+$+this.tagEndChar}}function R(G){if(G&&G.length>0&&this.options.processEntities)for(let $=0;$<this.options.entities.length;$++){const D=this.options.entities[$];G=G.replace(D.regex,D.val)}return G}function J(G,$,D,ne){return G===""&&this.options.unpairedTags.indexOf($)!==-1?this.options.suppressUnpairedNode?this.indentate(ne)+"<"+$+this.tagEndChar:this.indentate(ne)+"<"+$+"/"+this.tagEndChar:G!==""?this.buildTextValNode(G,$,D,ne):$[0]==="?"?this.indentate(ne)+"<"+$+D+"?"+this.tagEndChar:this.indentate(ne)+"<"+$+D+"/"+this.tagEndChar}function Y(G){return this.options.indentBy.repeat(G)}function de(G){return G.startsWith(this.options.attributeNamePrefix)?G.substr(this.attrPrefixLen):!1}a.exports=l},{"./orderedJs2Xml":7}],7:[function(i,a,c){const d=`
`;function g(k,R){return l(k,R,"",0)}function l(k,R,J,Y){let de="",G="";R.format&&R.indentBy.length>0&&(G=d+""+R.indentBy.repeat(Y));for(let $=0;$<k.length;$++){const D=k[$],ne=b(D);let Z="";if(J.length===0?Z=ne:Z=`${J}.${ne}`,ne===R.textNodeName){let H=D[ne];I(Z,R)||(H=R.tagValueProcessor(ne,H),H=C(H,R)),de+=G+H;continue}else if(ne===R.cdataPropName){de+=G+`<![CDATA[${D[ne][0][R.textNodeName]}]]>`;continue}else if(ne===R.commentPropName){de+=G+`<!--${D[ne][0][R.textNodeName]}-->`;continue}else if(ne[0]==="?"){const H=w(D[":@"],R),q=ne==="?xml"?"":G;let ee=D[ne][0][R.textNodeName];ee=ee.length!==0?" "+ee:"",de+=q+`<${ne}${ee}${H}?>`;continue}const U=w(D[":@"],R);let E=G+`<${ne}${U}`,M=l(D[ne],R,Z,Y+1);R.unpairedTags.indexOf(ne)!==-1?R.suppressUnpairedNode?de+=E+">":de+=E+"/>":(!M||M.length===0)&&R.suppressEmptyNode?de+=E+"/>":de+=E+`>${M}${G}</${ne}>`}return de}function b(k){const R=Object.keys(k);for(let J=0;J<R.length;J++){const Y=R[J];if(Y!==":@")return Y}}function w(k,R){let J="";if(k&&!R.ignoreAttributes)for(let Y in k){let de=R.attributeValueProcessor(Y,k[Y]);de=C(de,R),de===!0&&R.suppressBooleanAttributes?J+=` ${Y.substr(R.attributeNamePrefix.length)}`:J+=` ${Y.substr(R.attributeNamePrefix.length)}="${de}"`}return J}function I(k,R){k=k.substr(0,k.length-R.textNodeName.length-1);let J=k.substr(k.lastIndexOf(".")+1);for(let Y in R.stopNodes)if(R.stopNodes[Y]===k||R.stopNodes[Y]==="*."+J)return!0;return!1}function C(k,R){if(k&&k.length>0&&R.processEntities)for(let J=0;J<R.entities.length;J++){const Y=R.entities[J];k=k.replace(Y.regex,Y.val)}return k}a.exports=g},{}],8:[function(i,a,c){function d(b,w){const I={};if(b[w+3]==="O"&&b[w+4]==="C"&&b[w+5]==="T"&&b[w+6]==="Y"&&b[w+7]==="P"&&b[w+8]==="E"){w=w+9;let C=1,k=!1,R=!1,J=!1,Y="";for(;w<b.length;w++)if(b[w]==="<"){if(k&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="N"&&b[w+4]==="T"&&b[w+5]==="I"&&b[w+6]==="T"&&b[w+7]==="Y")w+=7,R=!0;else if(k&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="L"&&b[w+4]==="E"&&b[w+5]==="M"&&b[w+6]==="E"&&b[w+7]==="N"&&b[w+8]==="T")w+=8;else if(b[w+1]==="!"&&b[w+2]==="-"&&b[w+3]==="-")J=!0;else throw new Error("Invalid DOCTYPE");C++,Y=""}else if(b[w]===">"){if(J)if(b[w-1]==="-"&&b[w-2]==="-")J=!1;else throw new Error("Invalid XML comment in DOCTYPE");else R&&(l(Y,I),R=!1);if(C--,C===0)break}else b[w]==="["?k=!0:Y+=b[w];if(C!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:I,i:w}}const g=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function l(b,w){const I=g.exec(b);I&&(w[I[1]]={regx:RegExp(`&${I[1]};`,"g"),val:I[3]})}a.exports=d},{}],9:[function(i,a,c){const d={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(l,b){return b},attributeValueProcessor:function(l,b){return b},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1},g=function(l){return Object.assign({},d,l)};c.buildOptions=g,c.defaultOptions=d},{}],10:[function(i,a,c){const d=i("../util"),g=i("./xmlNode"),l=i("./DocTypeReader"),b=i("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,d.nameRegexp);class w{constructor(H){this.options=H,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=I,this.parseXml=Y,this.parseTextData=C,this.resolveNameSpace=k,this.buildAttributesMap=J,this.isItStopNode=$,this.replaceEntitiesValue=de,this.readStopNodeData=U,this.saveTextToParentTag=G}}function I(M){const H=Object.keys(M);for(let q=0;q<H.length;q++){const ee=H[q];this.lastEntities[ee]={regex:new RegExp("&"+ee+";","g"),val:M[ee]}}}function C(M,H,q,ee,ve,xe,be){if(M!==void 0&&(this.options.trimValues&&!ee&&(M=M.trim()),M.length>0)){be||(M=this.replaceEntitiesValue(M));const te=this.options.tagValueProcessor(H,M,q,ve,xe);return te==null?M:typeof te!=typeof M||te!==M?te:this.options.trimValues?E(M,this.options.parseTagValue,this.options.numberParseOptions):M.trim()===M?E(M,this.options.parseTagValue,this.options.numberParseOptions):M}}function k(M){if(this.options.removeNSPrefix){const H=M.split(":"),q=M.charAt(0)==="/"?"/":"";if(H[0]==="xmlns")return"";H.length===2&&(M=q+H[1])}return M}const R=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function J(M,H){if(!this.options.ignoreAttributes&&typeof M=="string"){const q=d.getAllMatches(M,R),ee=q.length,ve={};for(let xe=0;xe<ee;xe++){const be=this.resolveNameSpace(q[xe][1]);let te=q[xe][4];const ue=this.options.attributeNamePrefix+be;if(be.length)if(te!==void 0){this.options.trimValues&&(te=te.trim()),te=this.replaceEntitiesValue(te);const re=this.options.attributeValueProcessor(be,te,H);re==null?ve[ue]=te:typeof re!=typeof te||re!==te?ve[ue]=re:ve[ue]=E(te,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(ve[ue]=!0)}if(!Object.keys(ve).length)return;if(this.options.attributesGroupName){const xe={};return xe[this.options.attributesGroupName]=ve,xe}return ve}}const Y=function(M){M=M.replace(/\r\n?/g,`
`);const H=new g("!xml");let q=H,ee="",ve="";for(let xe=0;xe<M.length;xe++)if(M[xe]==="<")if(M[xe+1]==="/"){const te=ne(M,">",xe,"Closing Tag is not closed.");let ue=M.substring(xe+2,te).trim();if(this.options.removeNSPrefix){const re=ue.indexOf(":");re!==-1&&(ue=ue.substr(re+1))}q&&(ee=this.saveTextToParentTag(ee,q,ve)),ve=ve.substr(0,ve.lastIndexOf(".")),q=this.tagsNodeStack.pop(),ee="",xe=te}else if(M[xe+1]==="?"){let te=Z(M,xe,!1,"?>");if(!te)throw new Error("Pi Tag is not closed.");if(ee=this.saveTextToParentTag(ee,q,ve),!(this.options.ignoreDeclaration&&te.tagName==="?xml"||this.options.ignorePiTags)){const ue=new g(te.tagName);ue.add(this.options.textNodeName,""),te.tagName!==te.tagExp&&te.attrExpPresent&&(ue[":@"]=this.buildAttributesMap(te.tagExp,ve)),q.addChild(ue)}xe=te.closeIndex+1}else if(M.substr(xe+1,3)==="!--"){const te=ne(M,"-->",xe+4,"Comment is not closed.");if(this.options.commentPropName){const ue=M.substring(xe+4,te-2);ee=this.saveTextToParentTag(ee,q,ve),q.add(this.options.commentPropName,[{[this.options.textNodeName]:ue}])}xe=te}else if(M.substr(xe+1,2)==="!D"){const te=l(M,xe);this.docTypeEntities=te.entities,xe=te.i}else if(M.substr(xe+1,2)==="!["){const te=ne(M,"]]>",xe,"CDATA is not closed.")-2,ue=M.substring(xe+9,te);if(ee=this.saveTextToParentTag(ee,q,ve),this.options.cdataPropName)q.add(this.options.cdataPropName,[{[this.options.textNodeName]:ue}]);else{let re=this.parseTextData(ue,q.tagname,ve,!0,!1,!0);re||(re=""),q.add(this.options.textNodeName,re)}xe=te+2}else{let te=Z(M,xe,this.options.removeNSPrefix),ue=te.tagName,re=te.tagExp,ie=te.attrExpPresent,ye=te.closeIndex;q&&ee&&q.tagname!=="!xml"&&(ee=this.saveTextToParentTag(ee,q,ve,!1)),ue!==H.tagname&&(ve+=ve?"."+ue:ue);const Te=q;if(Te&&this.options.unpairedTags.indexOf(Te.tagname)!==-1&&(q=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,ve,ue)){let Se="";if(re.length>0&&re.lastIndexOf("/")===re.length-1)xe=te.closeIndex;else if(this.options.unpairedTags.indexOf(ue)!==-1)xe=te.closeIndex;else{const Pe=this.readStopNodeData(M,ue,ye+1);if(!Pe)throw new Error(`Unexpected end of ${ue}`);xe=Pe.i,Se=Pe.tagContent}const $e=new g(ue);ue!==re&&ie&&($e[":@"]=this.buildAttributesMap(re,ve)),Se&&(Se=this.parseTextData(Se,ue,ve,!0,ie,!0,!0)),ve=ve.substr(0,ve.lastIndexOf(".")),$e.add(this.options.textNodeName,Se),q.addChild($e)}else{if(re.length>0&&re.lastIndexOf("/")===re.length-1){ue[ue.length-1]==="/"?(ue=ue.substr(0,ue.length-1),re=ue):re=re.substr(0,re.length-1);const Se=new g(ue);ue!==re&&ie&&(Se[":@"]=this.buildAttributesMap(re,ve)),ve=ve.substr(0,ve.lastIndexOf(".")),q.addChild(Se)}else{const Se=new g(ue);this.tagsNodeStack.push(q),ue!==re&&ie&&(Se[":@"]=this.buildAttributesMap(re,ve)),q.addChild(Se),q=Se}ee="",xe=ye}}else ee+=M[xe];return H.child},de=function(M){if(this.options.processEntities){for(let H in this.docTypeEntities){const q=this.docTypeEntities[H];M=M.replace(q.regx,q.val)}for(let H in this.lastEntities){const q=this.lastEntities[H];M=M.replace(q.regex,q.val)}if(this.options.htmlEntities)for(let H in this.htmlEntities){const q=this.htmlEntities[H];M=M.replace(q.regex,q.val)}}return M};function G(M,H,q,ee){return M&&(ee===void 0&&(ee=Object.keys(H.child).length===0),M=this.parseTextData(M,H.tagname,q,!1,H[":@"]?Object.keys(H[":@"]).length!==0:!1,ee),M!==void 0&&M!==""&&H.add(this.options.textNodeName,M),M=""),M}function $(M,H,q){const ee="*."+q;for(const ve in M){const xe=M[ve];if(ee===xe||H===xe)return!0}return!1}function D(M,H,q=">"){let ee,ve="";for(let xe=H;xe<M.length;xe++){let be=M[xe];if(ee)be===ee&&(ee="");else if(be==='"'||be==="'")ee=be;else if(be===q[0])if(q[1]){if(M[xe+1]===q[1])return{data:ve,index:xe}}else return{data:ve,index:xe};else be==="	"&&(be=" ");ve+=be}}function ne(M,H,q,ee){const ve=M.indexOf(H,q);if(ve===-1)throw new Error(ee);return ve+H.length-1}function Z(M,H,q,ee=">"){const ve=D(M,H+1,ee);if(!ve)return;let xe=ve.data;const be=ve.index,te=xe.search(/\s/);let ue=xe,re=!0;if(te!==-1&&(ue=xe.substr(0,te).replace(/\s\s*$/,""),xe=xe.substr(te+1)),q){const ie=ue.indexOf(":");ie!==-1&&(ue=ue.substr(ie+1),re=ue!==ve.data.substr(ie+1))}return{tagName:ue,tagExp:xe,closeIndex:be,attrExpPresent:re}}function U(M,H,q){const ee=q;for(;q<M.length;q++)if(M[q]==="<"&&M[q+1]==="/"){const ve=ne(M,">",q,`${H} is not closed`);if(M.substring(q+2,ve).trim()===H)return{tagContent:M.substring(ee,q),i:ve};q=ve}}function E(M,H,q){if(H&&typeof M=="string"){const ee=M.trim();return ee==="true"?!0:ee==="false"?!1:b(M,q)}else return d.isExist(M)?M:""}a.exports=w},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:d}=i("./OptionsBuilder"),g=i("./OrderedObjParser"),{prettify:l}=i("./node2json"),b=i("../validator");class w{constructor(C){this.externalEntities={},this.options=d(C)}parse(C,k){if(typeof C!="string")if(C.toString)C=C.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(k){k===!0&&(k={});const Y=b.validate(C,k);if(Y!==!0)throw Error(`${Y.err.msg}:${Y.err.line}:${Y.err.col}`)}const R=new g(this.options);R.addExternalEntities(this.externalEntities);const J=R.parseXml(C);return this.options.preserveOrder||J===void 0?J:l(J,this.options)}addEntity(C,k){if(k.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(C.indexOf("&")!==-1||C.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[C]=k}}a.exports=w},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function d(I,C){return g(I,C)}function g(I,C,k){let R;const J={};for(let Y=0;Y<I.length;Y++){const de=I[Y],G=l(de);let $="";if(k===void 0?$=G:$=k+"."+G,G===C.textNodeName)R===void 0?R=de[G]:R+=""+de[G];else{if(G===void 0)continue;if(de[G]){let D=g(de[G],C,$);const ne=w(D,C);de[":@"]?b(D,de[":@"],$,C):Object.keys(D).length===1&&D[C.textNodeName]!==void 0&&!C.alwaysCreateTextNode?D=D[C.textNodeName]:Object.keys(D).length===0&&(C.alwaysCreateTextNode?D[C.textNodeName]="":D=""),J[G]!==void 0?(Array.isArray(J[G])||(J[G]=[J[G]]),J[G].push(D)):C.isArray(G,$,ne)?J[G]=[D]:J[G]=D}}}return typeof R=="string"?R.length>0&&(J[C.textNodeName]=R):R!==void 0&&(J[C.textNodeName]=R),J}function l(I){const C=Object.keys(I);for(let k=0;k<C.length;k++){const R=C[k];if(R!==":@")return R}}function b(I,C,k,R){if(C){const J=Object.keys(C),Y=J.length;for(let de=0;de<Y;de++){const G=J[de];R.isArray(G,k+"."+G,!0,!0)?I[G]=[C[G]]:I[G]=C[G]}}}function w(I,C){const k=Object.keys(I).length;return!!(k===0||k===1&&I[C.textNodeName])}c.prettify=d},{}],13:[function(i,a,c){class d{constructor(l){this.tagname=l,this.child=[],this[":@"]={}}add(l,b){this.child.push({[l]:b})}addChild(l){l[":@"]&&Object.keys(l[":@"]).length>0?this.child.push({[l.tagname]:l.child,":@":l[":@"]}):this.child.push({[l.tagname]:l.child})}}a.exports=d},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(d,g,l,b,w){var I,C,k=w*8-b-1,R=(1<<k)-1,J=R>>1,Y=-7,de=l?w-1:0,G=l?-1:1,$=d[g+de];for(de+=G,I=$&(1<<-Y)-1,$>>=-Y,Y+=k;Y>0;I=I*256+d[g+de],de+=G,Y-=8);for(C=I&(1<<-Y)-1,I>>=-Y,Y+=b;Y>0;C=C*256+d[g+de],de+=G,Y-=8);if(I===0)I=1-J;else{if(I===R)return C?NaN:($?-1:1)*(1/0);C=C+Math.pow(2,b),I=I-J}return($?-1:1)*C*Math.pow(2,I-b)},c.write=function(d,g,l,b,w,I){var C,k,R,J=I*8-w-1,Y=(1<<J)-1,de=Y>>1,G=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=b?0:I-1,D=b?1:-1,ne=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(k=isNaN(g)?1:0,C=Y):(C=Math.floor(Math.log(g)/Math.LN2),g*(R=Math.pow(2,-C))<1&&(C--,R*=2),C+de>=1?g+=G/R:g+=G*Math.pow(2,1-de),g*R>=2&&(C++,R/=2),C+de>=Y?(k=0,C=Y):C+de>=1?(k=(g*R-1)*Math.pow(2,w),C=C+de):(k=g*Math.pow(2,de-1)*Math.pow(2,w),C=0));w>=8;d[l+$]=k&255,$+=D,k/=256,w-=8);for(C=C<<w|k,J+=w;J>0;d[l+$]=C&255,$+=D,C/=256,J-=8);d[l+$-D]|=ne*128}},{}],15:[function(i,a,c){const d=/^[-+]?0x[a-fA-F0-9]+$/,g=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const l={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function b(I,C={}){if(C=Object.assign({},l,C),!I||typeof I!="string")return I;let k=I.trim();if(C.skipLike!==void 0&&C.skipLike.test(k))return I;if(C.hex&&d.test(k))return Number.parseInt(k,16);{const R=g.exec(k);if(R){const J=R[1],Y=R[2];let de=w(R[3]);const G=R[4]||R[6];if(!C.leadingZeros&&Y.length>0&&J&&k[2]!==".")return I;if(!C.leadingZeros&&Y.length>0&&!J&&k[1]!==".")return I;{const $=Number(k),D=""+$;return D.search(/[eE]/)!==-1||G?C.eNotation?$:I:k.indexOf(".")!==-1?D==="0"&&de===""||D===de||J&&D==="-"+de?$:I:Y?de===D||J+de===D?$:I:k===D||k===J+D?$:I}}else return I}}function w(I){return I&&I.indexOf(".")!==-1&&(I=I.replace(/0+$/,""),I==="."?I="0":I[0]==="."?I="0"+I:I[I.length-1]==="."&&(I=I.substr(0,I.length-1))),I}a.exports=b},{}],16:[function(i,a,c){(function(d){(function(){var g=this&&this.__awaiter||function(k,R,J,Y){function de(G){return G instanceof J?G:new J(function($){$(G)})}return new(J||(J=Promise))(function(G,$){function D(U){try{Z(Y.next(U))}catch(E){$(E)}}function ne(U){try{Z(Y.throw(U))}catch(E){$(E)}}function Z(U){U.done?G(U.value):de(U.value).then(D,ne)}Z((Y=Y.apply(k,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const l=i("../auth"),b=i("../config"),w=i("./_xml"),I=k=>typeof btoa>"u"?d.from(k,"binary").toString("base64"):btoa(k);function C(k,R,J){return g(this,void 0,void 0,function*(){const{apiUrl:Y,authHeader:de,basicAuth:G,userAgent:$}=(0,b.getConfig)(),D=G&&`Basic ${I(`${G.username}:${G.password}`)}`,ne=(0,l.getAuthToken)()&&`Bearer ${(0,l.getAuthToken)()}`;let Z=new URLSearchParams(R).toString();Z&&(Z=`?${Z}`);const U=yield fetch(`${Y}/api${k}${Z}`,Object.assign(Object.assign({},J),{headers:Object.assign({Authorization:de||D||ne||"","User-Agent":$},J==null?void 0:J.headers)})),E=U.headers.get("Content-Type");if(E!=null&&E.startsWith("application/xml")){const M=yield U.text();return yield w.xmlParser.parse(M)}if(E!=null&&E.startsWith("application/json"))return U.json();if(U.ok)return yield U.text();throw new Error(`OSM API: ${yield U.text()}`)})}c.osmFetch=C}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const d=i("fast-xml-parser");c.xmlParser=new d.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:g=>g!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const d=i("fast-xml-parser"),g=new d.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function l(I){return g.build({osm:{changeset:{tag:Object.entries(I).map(([C,k])=>({$k:C,$v:k}))}}})}c.createChangesetMetaXml=l;const b=(I,C,k)=>C.reduce((R,J)=>{const Y={$id:J.id,$version:k?0:J.version,$changeset:I,tag:Object.entries(J.tags||{}).map(([de,G])=>({$k:de,$v:G}))};switch(J.type){case"node":{const de=Object.assign(Object.assign({},Y),{$lat:J.lat,$lon:J.lon});return Object.assign(Object.assign({},R),{node:[...R.node,de]})}case"way":{if(!J.nodes)throw new Error("Way has no nodes");const de=Object.assign(Object.assign({},Y),{nd:J.nodes.map(G=>({$ref:G}))});return Object.assign(Object.assign({},R),{way:[...R.way,de]})}case"relation":{if(!J.members)throw new Error("Relation has no members");const de=Object.assign(Object.assign({},Y),{member:J.members.map(G=>({$type:G.type,$ref:G.ref,$role:G.role}))});return Object.assign(Object.assign({},R),{relation:[...R.relation,de]})}default:return R}},{node:[],way:[],relation:[]});function w(I,C,k){return g.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},k),{create:[b(I,C.create,!0)],modify:[b(I,C.modify)],delete:[Object.assign({"$if-unused":!0},b(I,C.delete))]})})}c.createOsmChangeXml=w},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const d=i("../_xml");function g(I){return{changeset:+I.$.changeset,id:+I.$.id,timestamp:I.$.timestamp,uid:+I.$.uid,user:I.$.user,version:+I.$.version,tags:I.tag?Object.fromEntries(I.tag.map(C=>[C.$.k,C.$.v])):void 0}}const l=I=>{const C=[];if(I.node){const k=I.node.map(R=>Object.assign(Object.assign({type:"node"},g(R)),{lat:+R.$.lat,lon:+R.$.lon}));C.push(...k)}if(I.way){const k=I.way.map(R=>{var J;return Object.assign(Object.assign({type:"way"},g(R)),{nodes:((J=R.nd)===null||J===void 0?void 0:J.map(Y=>+Y.$.ref))||[]})});C.push(...k)}if(I.relation){const k=I.relation.map(R=>{var J;return Object.assign(Object.assign({type:"relation"},g(R)),{members:((J=R.member)===null||J===void 0?void 0:J.map(Y=>({ref:+Y.$.ref,role:Y.$.role,type:Y.$.type})))||[]})});C.push(...k)}return C};function b(I){var C,k,R;return{create:((C=I.osmChange[0].create)===null||C===void 0?void 0:C.flatMap(l))||[],modify:((k=I.osmChange[0].modify)===null||k===void 0?void 0:k.flatMap(l))||[],delete:((R=I.osmChange[0].delete)===null||R===void 0?void 0:R.flatMap(l))||[]}}c.parseOsmChangeJson=b;function w(I){const C=d.xmlParser.parse(I);return b(C)}c.parseOsmChangeXml=w},{"../_xml":17}],20:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,I,C){function k(R){return R instanceof I?R:new I(function(J){J(R)})}return new(I||(I=Promise))(function(R,J){function Y($){try{G(C.next($))}catch(D){J(D)}}function de($){try{G(C.throw($))}catch(D){J(D)}}function G($){$.done?R($.value):k($.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const g=i("../_osmFetch");function l(b,w){return d(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/changeset/${b}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(w)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=l},{"../_osmFetch":16}],21:[function(i,a,c){var d=this&&this.__awaiter||function(w,I,C,k){function R(J){return J instanceof C?J:new C(function(Y){Y(J)})}return new(C||(C=Promise))(function(J,Y){function de(D){try{$(k.next(D))}catch(ne){Y(ne)}}function G(D){try{$(k.throw(D))}catch(ne){Y(ne)}}function $(D){D.done?J(D.value):R(D.value).then(de,G)}$((k=k.apply(w,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const g=i("../_osmFetch"),l=i("./_parseOsmChangeXml");function b(w){return d(this,void 0,void 0,function*(){const I=yield(0,g.osmFetch)(`/0.6/changeset/${w}/download`);return(0,l.parseOsmChangeJson)(I)})}c.getChangesetDiff=b},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var d=this&&this.__awaiter||function(C,k,R,J){function Y(de){return de instanceof R?de:new R(function(G){G(de)})}return new(R||(R=Promise))(function(de,G){function $(Z){try{ne(J.next(Z))}catch(U){G(U)}}function D(Z){try{ne(J.throw(Z))}catch(U){G(U)}}function ne(Z){Z.done?de(Z.value):Y(Z.value).then($,D)}ne((J=J.apply(C,k||[])).next())})},g=this&&this.__rest||function(C,k){var R={};for(var J in C)Object.prototype.hasOwnProperty.call(C,J)&&k.indexOf(J)<0&&(R[J]=C[J]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Y=0,J=Object.getOwnPropertySymbols(C);Y<J.length;Y++)k.indexOf(J[Y])<0&&Object.prototype.propertyIsEnumerable.call(C,J[Y])&&(R[J[Y]]=C[J[Y]]);return R};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const l=i("../_osmFetch"),b=C=>{var k;return{id:+C.$.id,created_at:new Date(C.$.created_at),closed_at:new Date(C.$.closed_at),open:C.$.open==="true",comments_count:+C.$.comments_count,changes_count:+C.$.changes_count,min_lat:+C.$.min_lat,min_lon:+C.$.min_lon,max_lat:+C.$.max_lat,max_lon:+C.$.max_lon,uid:+C.$.uid,user:C.$.user,tags:Object.fromEntries(C.tag.map(R=>[R.$.k,R.$.v])),discussion:(k=C.discussion)===null||k===void 0?void 0:k[0].comment.map(R=>({date:new Date(R.$.date),user:R.$.user,uid:R.$.uid,text:R.text[0]}))}};function w(C){var k;return d(this,void 0,void 0,function*(){const{only:R}=C,J=g(C,["only"]);return((k=(yield(0,l.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},R&&{[R]:!0}),J))).osm[0].changeset)===null||k===void 0?void 0:k.map(b))||[]})}c.listChangesets=w;function I(C,k=!0){return d(this,void 0,void 0,function*(){return(yield(0,l.osmFetch)(`/0.6/changeset/${C}`,{include_discussion:k})).osm[0].changeset.map(b)[0]})}c.getChangeset=I},{"../_osmFetch":16}],23:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(w,I,C,k){k===void 0&&(k=C);var R=Object.getOwnPropertyDescriptor(I,C);(!R||("get"in R?!I.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return I[C]}}),Object.defineProperty(w,k,R)}:function(w,I,C,k){k===void 0&&(k=C),w[k]=I[C]}),g=this&&this.__exportStar||function(w,I){for(var C in w)C!=="default"&&!Object.prototype.hasOwnProperty.call(I,C)&&d(I,w,C)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,g(i("./createChangesetComment"),c),g(i("./getChangesetDiff"),c),g(i("./getChangesets"),c),g(i("./uploadChangeset"),c);var l=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return l.parseOsmChangeXml}});var b=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return b.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var d=this&&this.__awaiter||function(w,I,C,k){function R(J){return J instanceof C?J:new C(function(Y){Y(J)})}return new(C||(C=Promise))(function(J,Y){function de(D){try{$(k.next(D))}catch(ne){Y(ne)}}function G(D){try{$(k.throw(D))}catch(ne){Y(ne)}}function $(D){D.done?J(D.value):R(D.value).then(de,G)}$((k=k.apply(w,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const g=i("../_osmFetch"),l=i("./_createOsmChangeXml");function b(w,I){return d(this,void 0,void 0,function*(){const C=(0,l.createChangesetMetaXml)(w),k=+(yield(0,g.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:C,headers:{"content-type":"application/xml; charset=utf-8"}})),R=(0,l.createOsmChangeXml)(k,I);return yield(0,g.osmFetch)(`/0.6/changeset/${k}/upload`,void 0,{method:"POST",body:R,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,g.osmFetch)(`/0.6/changeset/${k}/close`,void 0,{method:"PUT"}),+k})}c.uploadChangeset=b},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,I,C){function k(R){return R instanceof I?R:new I(function(J){J(R)})}return new(I||(I=Promise))(function(R,J){function Y($){try{G(C.next($))}catch(D){J(D)}}function de($){try{G(C.throw($))}catch(D){J(D)}}function G($){$.done?R($.value):k($.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const g=i("./_osmFetch");function l(){return d(this,void 0,void 0,function*(){const b=yield(0,g.osmFetch)("/capabilities");return{limits:{maxArea:+b.osm[0].api[0].area[0].$.maximum,maxNoteArea:+b.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+b.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+b.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+b.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+b.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:b.osm[0].policy[0].imagery[0].blacklist.map(I=>I.$.regex)}}})}c.getCapabilities=l},{"./_osmFetch":16}],26:[function(i,a,c){var d=this&&this.__awaiter||function(R,J,Y,de){function G($){return $ instanceof Y?$:new Y(function(D){D($)})}return new(Y||(Y=Promise))(function($,D){function ne(E){try{U(de.next(E))}catch(M){D(M)}}function Z(E){try{U(de.throw(E))}catch(M){D(M)}}function U(E){E.done?$(E.value):G(E.value).then(ne,Z)}U((de=de.apply(R,J||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const g=i("./_osmFetch");function l(R,J,Y){return d(this,void 0,void 0,function*(){const de=Y&&R!=="node"?"/full":"";return(yield(0,g.osmFetch)(`/0.6/${R}/${J}${de}.json`)).elements})}c.getFeature=l;function b(R,J){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${R}s.json?${R}s=${J.join(",")}`)).elements})}c.getFeatures=b;function w(R,J,Y){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${R}/${J}/${Y}.json`)).elements[0]})}c.getFeatureAtVersion=w;function I(R,J){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${R}/${J}/history.json`)).elements})}c.getFeatureHistory=I;function C(R){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/node/${R}/ways.json`)).elements})}c.getWaysForNode=C;function k(R,J){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${R}/${J}/relations.json`)).elements})}c.getRelationsForElement=k},{"./_osmFetch":16}],27:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,I,C){function k(R){return R instanceof I?R:new I(function(J){J(R)})}return new(I||(I=Promise))(function(R,J){function Y($){try{G(C.next($))}catch(D){J(D)}}function de($){try{G(C.throw($))}catch(D){J(D)}}function G($){$.done?R($.value):k($.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const g=i("./_osmFetch");function l(b){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)("/0.6/map.json",{bbox:b})).elements})}c.getMapData=l},{"./_osmFetch":16}],28:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,I,C){function k(R){return R instanceof I?R:new I(function(J){J(R)})}return new(I||(I=Promise))(function(R,J){function Y($){try{G(C.next($))}catch(D){J(D)}}function de($){try{G(C.throw($))}catch(D){J(D)}}function G($){$.done?R($.value):k($.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const g=i("./changesets");function l(b){return d(this,void 0,void 0,function*(){const w=yield(0,g.listChangesets)({display_name:b});if(!w.length)throw new Error("Could not get uid because the user has never edited the map");return w[0].uid})}c.getUIdFromDisplayName=l},{"./changesets":23}],29:[function(i,a,c){var d=this&&this.__awaiter||function(w,I,C,k){function R(J){return J instanceof C?J:new C(function(Y){Y(J)})}return new(C||(C=Promise))(function(J,Y){function de(D){try{$(k.next(D))}catch(ne){Y(ne)}}function G(D){try{$(k.throw(D))}catch(ne){Y(ne)}}function $(D){D.done?J(D.value):R(D.value).then(de,G)}$((k=k.apply(w,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const g=i("./_osmFetch");function l(w){return d(this,void 0,void 0,function*(){const I=yield(0,g.osmFetch)(`/0.6/user/${w==="me"?"details":w}.json`);return Object.assign(Object.assign({},I.user),{account_created:new Date(I.user.account_created)})})}c.getUser=l;function b(w){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)("/0.6/users",{users:w})).users.map(C=>Object.assign(Object.assign({},C),{account_created:new Date(C.account_created)}))})}c.getUsers=b},{"./_osmFetch":16}],30:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,I){I===void 0&&(I=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,I,C)}:function(l,b,w,I){I===void 0&&(I=w),l[I]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),g(i("./changesets"),c),g(i("./notes"),c),g(i("./getCapabilities"),c),g(i("./getFeature"),c),g(i("./getMapData"),c),g(i("./getUIdFromDisplayName"),c),g(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var d=this&&this.__awaiter||function(k,R,J,Y){function de(G){return G instanceof J?G:new J(function($){$(G)})}return new(J||(J=Promise))(function(G,$){function D(U){try{Z(Y.next(U))}catch(E){$(E)}}function ne(U){try{Z(Y.throw(U))}catch(E){$(E)}}function Z(U){U.done?G(U.value):de(U.value).then(D,ne)}Z((Y=Y.apply(k,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const g=i("../_osmFetch"),l=k=>{const[R,J]=k.geometry.coordinates;return Object.assign(Object.assign({},k.properties),{location:{lat:J,lng:R}})};function b(k,R){return d(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/notes${R?"/search":""}.json`,k)).features.map(l)})}function w(k){return b(k,!0)}c.getNotesForQuery=w;function I(k){return b({bbox:k},!1)}c.getNotesForArea=I;function C(k){return d(this,void 0,void 0,function*(){const R=yield(0,g.osmFetch)(`/0.6/notes/${k}.json`);return l(R)})}c.getNote=C},{"../_osmFetch":16}],32:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,I){I===void 0&&(I=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,I,C)}:function(l,b,w,I){I===void 0&&(I=w),l[I]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),g(i("./getNotes"),c),g(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var d=this&&this.__awaiter||function(I,C,k,R){function J(Y){return Y instanceof k?Y:new k(function(de){de(Y)})}return new(k||(k=Promise))(function(Y,de){function G(ne){try{D(R.next(ne))}catch(Z){de(Z)}}function $(ne){try{D(R.throw(ne))}catch(Z){de(Z)}}function D(ne){ne.done?Y(ne.value):J(ne.value).then(G,$)}D((R=R.apply(I,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const g=i("../_osmFetch");function l(I,C,k){return d(this,void 0,void 0,function*(){yield(0,g.osmFetch)("/0.6/notes",{lat:I,lon:C,text:k})})}c.createNote=l;function b(I,C){return d(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/notes/${I}/comment`,{text:C})})}c.commentOnNote=b;function w(I,C){return d(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/notes/${I}/reopen`,{text:C})})}c.reopenNote=w},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function d(g){let l=!1;return new Promise((b,w)=>{const[I,C]=[600,550],k=Object.entries({width:I,height:C,left:window.screen.width/2-I/2,top:window.screen.height/2-C/2}).map(([Y,de])=>`${Y}=${de}`).join(","),R=window.open("about:blank","oauth_window",k);if(!R)throw new Error("Popup was blocked");R.location=g,window.authComplete=Y=>{b(Y),l=!0};const J=setInterval(()=>{R.closed&&(l||w(new Error("Cancelled")),clearInterval(J))},500)})}c.createPopup=d},{}],35:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,I,C){function k(R){return R instanceof I?R:new I(function(J){J(R)})}return new(I||(I=Promise))(function(R,J){function Y($){try{G(C.next($))}catch(D){J(D)}}function de($){try{G(C.throw($))}catch(D){J(D)}}function G($){$.done?R($.value):k($.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const g=i("./helpers");function l(b,{options:w,pkceVerifier:I,state:C}){return d(this,void 0,void 0,function*(){const k=new URL(b).searchParams,R=k.get("error_description"),J=k.get("code"),Y=k.get("state");if(R)throw new Error(R);if(!J)throw new Error("No code in OAuth response");if(!I||!C)throw new Error("No login in progress");if(C!==Y)throw new Error("State Mismatch");const de={grant_type:"authorization_code",code:J,redirect_uri:w.redirectUrl,client_id:w.clientId,code_verifier:I},G=`${(0,g.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(de).toString()}`,D=yield(yield fetch(G,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in D)throw new Error(D.error_description);const ne={issuedAt:new Date(D.created_at*1e3).toISOString(),accessToken:D.access_token,scopes:D.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(ne)),delete window.authComplete,ne})}c.exchangeCode=l},{"./helpers":36}],36:[function(i,a,c){var d=this&&this.__awaiter||function(I,C,k,R){function J(Y){return Y instanceof k?Y:new k(function(de){de(Y)})}return new(k||(k=Promise))(function(Y,de){function G(ne){try{D(R.next(ne))}catch(Z){de(Z)}}function $(ne){try{D(R.throw(ne))}catch(Z){de(Z)}}function D(ne){ne.done?Y(ne.value):J(ne.value).then(G,$)}D((R=R.apply(I,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const g=i("../config");function l(I){return d(this,void 0,void 0,function*(){const C=new TextEncoder().encode(I),k=yield window.crypto.subtle.digest("SHA-256",C);return btoa(String.fromCharCode(...new Uint8Array(k))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})}c.sha256=l;function b(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(I=>`0${I.toString(16)}`.slice(-2)).join("")}c.getRandomString=b;function w(){let I=(0,g.getConfig)().apiUrl;return I==="https://api.openstreetmap.org"&&(I="https://www.openstreetmap.org"),I}c.getOAuthBaseUrl=w},{"../config":39}],37:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,I){I===void 0&&(I=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,I,C)}:function(l,b,w,I){I===void 0&&(I=w),l[I]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),g(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var d=this&&this.__awaiter||function(R,J,Y,de){function G($){return $ instanceof Y?$:new Y(function(D){D($)})}return new(Y||(Y=Promise))(function($,D){function ne(E){try{U(de.next(E))}catch(M){D(M)}}function Z(E){try{U(de.throw(E))}catch(M){D(M)}}function U(E){E.done?$(E.value):G(E.value).then(ne,Z)}U((de=de.apply(R,J||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const g=i("./createPopup"),l=i("./exchangeCode"),b=i("./helpers");function w(R){return d(this,void 0,void 0,function*(){if(!R.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!R.clientId)throw new Error("You must include the 'clientId' option");if(!R.scopes)throw new Error("You must include the 'scopes' option");const J=(0,b.getRandomString)(),Y=(0,b.getRandomString)(),de=yield(0,b.sha256)(Y),G={scope:R.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:J,redirect_uri:R.redirectUrl,client_id:R.clientId,code_challenge_method:"S256",code_challenge:de},$=`${(0,b.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(G).toString()}`,D={state:J,pkceVerifier:Y,options:R};if(R.mode==="popup"){const ne=yield(0,g.createPopup)($);return(0,l.exchangeCode)(ne,D)}if(R.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(D)),window.location.replace($);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=w,c.authReady=d(void 0,void 0,void 0,function*(){var R;if(typeof window>"u")return;const J=window.location.href,Y=localStorage.getItem("__osmAuthTemp");if(new URL(J).searchParams.get("code")){if(!((R=window.opener)===null||R===void 0)&&R.authComplete)window.opener.authComplete(J),window.close();else if(Y)try{const de=JSON.parse(Y);yield(0,l.exchangeCode)(J,de),localStorage.removeItem("__osmAuthTemp")}catch(de){console.error("OSM Auth Error",de)}}});const I=()=>{try{const R=localStorage.getItem("__osmAuth");return R?JSON.parse(R).accessToken:void 0}catch{return}};c.getAuthToken=I;const C=()=>!!(0,c.getAuthToken)();c.isLoggedIn=C;function k(){localStorage.removeItem("__osmAuth")}c.logout=k},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const d={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},g=()=>d;c.getConfig=g;function l(b){Object.assign(d,b)}c.configure=l},{}],40:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,I){I===void 0&&(I=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,I,C)}:function(l,b,w,I){I===void 0&&(I=w),l[I]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),i("./polyfill"),g(i("./api"),c),g(i("./auth"),c),g(i("./config"),c),g(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./polyfill":41,"./types":45}],41:[function(i,a,c){if(typeof fetch>"u")try{i("isomorphic-fetch")}catch{console.error([`
==========
`,"(!) The `fetch` API is not available, and the polyfill (`isomorphic-fetch`) is also not available.","Run `npm install isomorphic-fetch`, or make sure that the global variable `fetch` exists",`
==========
`].join(`
`))}},{"isomorphic-fetch":"isomorphic-fetch"}],42:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],43:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],44:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],45:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,I){I===void 0&&(I=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,I,C)}:function(l,b,w,I){I===void 0&&(I=w),l[I]=b[w]}),g=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),g(i("./changesets"),c),g(i("./features"),c),g(i("./general"),c),g(i("./notes"),c),g(i("./user"),c)},{"./changesets":42,"./features":43,"./general":44,"./notes":46,"./user":47}],46:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],47:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}]},{},[40])(40)})})(aI);var Ds=aI.exports;const lI=()=>{const[e,t]=yt.useState(!1);yt.useEffect(()=>{t(Ds.isLoggedIn())},[]);const i=yt.useCallback(()=>{(async()=>(await Ds.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Ds.isLoggedIn()),window.location.reload()))()},[]),a=yt.useCallback(()=>{(async()=>(Ds.logout(),t(!1)))()},[]);return pt.jsx(pt.Fragment,{children:e?pt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):pt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},Nz=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(Ds.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await Ds.getUser("me");a(c)})()},[e]),pt.jsx(pt.Fragment,{children:i?pt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):pt.jsx("img",{})})},Uz=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(Ds.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await Ds.getUser("me");a(c)})()},[e]),pt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[pt.jsxs("div",{children:[pt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?pt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):pt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),pt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[pt.jsx("div",{children:pt.jsx(Nz,{})}),pt.jsx("div",{children:pt.jsx(lI,{})})]})]})},uI=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return pt.jsxs(pt.Fragment,{children:[pt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",pt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},$z=({feature:e})=>pt.jsx(pt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return pt.jsxs("div",{className:t,children:[pt.jsx("span",{className:"underline",children:t})," = ",pt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function Df(e,t,i){return parseInt(e.substr(t,i),16)}function cI(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function z0(e,t,i){return i=i<0?i+6:i>6?i-6:i,cI(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function Vz(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],d=e[3],g=e[4]||"";t="#"+a+a+c+c+d+d+g+g}return(i==7||i>8)&&(t=e),t}}function Gz(e,t,i){let a;if(t==0){const c=cI(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,d=i*2-c;a=z0(d,c,e*6+2)+z0(d,c,e*6)+z0(d,c,e*6-2)}return"#"+a}function Lf(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,Gz(e,t,i)}const Zz=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},tS={V:"jdenticon_config",n:"config"};var Hz={};function Wz(e,t){const i=typeof e=="object"&&e||Hz[tS.n]||Zz[tS.V]||{},a=i.lightness||{},c=i.saturation||{},d="color"in c?c.color:c,g=c.grayscale,l=i.backColor,b=i.padding;function w(C,k){let R=a[C];return R&&R.length>1||(R=k),function(J){return J=R[0]+J*(R[1]-R[0]),J<0?0:J>1?1:J}}function I(C){const k=i.hues;let R;return k&&k.length>0&&(R=k[0|.999*C*k.length]),typeof R=="number"?(R/360%1+1)%1:C}return{W:I,o:typeof d=="number"?d:.5,D:typeof g=="number"?g:0,p:w("color",[.4,.8]),F:w("grayscale",[.3,.9]),G:Vz(l),X:typeof e=="number"?e:typeof b=="number"?b:t}}let em=class{constructor(t,i){this.x=t,this.y=i}};class hI{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const d=this.q+this.H,g=this.t+this.H,l=this.Y;return l===1?new em(d-i-(c||0),this.t+t):l===2?new em(d-t-(a||0),g-i-(c||0)):l===3?new em(this.q+i,g-t-(a||0)):new em(this.q+t,this.t+i)}}const Xz=new hI(0,0,0,0);class qz{constructor(t){this.J=t,this.u=Xz}g(t,i){const a=i?-2:2,c=[];for(let d=i?t.length-2:0;d<t.length&&d>=0;d+=a)c.push(this.u.I(t[d],t[d+1]));this.J.g(c)}h(t,i,a,c){const d=this.u.I(t,i,a,a);this.J.h(d,a,c)}i(t,i,a,c,d){this.g([t,i,t+a,i,t+a,i+c,t,i+c],d)}j(t,i,a,c,d,g){const l=[t+a,i,t+a,i+c,t,i+c,t,i];l.splice((d||0)%4*2,2),this.g(l,g)}K(t,i,a,c,d){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],d)}}function Kz(e,t,i,a){e=e%14;let c,d,g,l,b,w;e?e==1?(g=0|i*.5,l=0|i*.8,t.j(i-g,0,g,l,2)):e==2?(g=0|i/3,t.i(g,g,i-g,i-g)):e==3?(b=i*.1,w=i<6?1:i<8?2:0|i*.25,b=b>1?0|b:b>.5?1:b,t.i(w,w,i-b-w,i-b-w)):e==4?(d=0|i*.15,g=0|i*.5,t.h(i-g-d,i-g-d,g)):e==5?(b=i*.1,w=b*4,w>3&&(w=0|w),t.i(0,0,i,i),t.g([w,w,i-b,w,w+(i-w-b)/2,i-b],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(b=i*.14,w=i<4?1:i<6?2:0|i*.35,b=i<8?b:0|b,t.i(0,0,i,i),t.i(w,w,i-w-b,i-w-b,!0)):e==10?(b=i*.12,w=b*3,t.i(0,0,i,i),t.h(w,w,i-b-w,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(d=i*.25,t.i(0,0,i,i),t.K(d,d,i-d,i-d,!0)):!a&&(d=i*.4,g=i*1.2,t.h(d,d,g)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function nS(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function Yz(e,t){return e=t.W(e),[Lf(e,t.D,t.F(0)),Lf(e,t.o,t.p(.5)),Lf(e,t.D,t.F(1)),Lf(e,t.o,t.p(1)),Lf(e,t.o,t.p(0))]}function Jz(e,t,i){const a=Wz(i,.08);a.G&&e.m(a.G);let c=e.k;const d=.5+c*a.X|0;c-=d*2;const g=new qz(e),l=0|c/4,b=0|d+c/2-l*2,w=0|d+c/2-l*2;function I(de,G,$,D,ne){const Z=Df(t,$,1);let U=D?Df(t,D,1):0;e.L(k[R[de]]);for(let E=0;E<ne.length;E++)g.u=new hI(b+ne[E][0]*l,w+ne[E][1]*l,l,U++%4),G(Z,g,l,E);e.M()}const C=Df(t,-7)/268435455,k=Yz(C,a),R=[];let J;function Y(de){if(de.indexOf(J)>=0){for(let G=0;G<de.length;G++)if(R.indexOf(de[G])>=0)return!0}}for(let de=0;de<3;de++)J=Df(t,8+de,1)%k.length,(Y([0,4])||Y([2,3]))&&(J=1),R.push(J);I(0,nS,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),I(1,nS,4,5,[[0,0],[3,0],[3,3],[0,3]]),I(2,Kz,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function Qz(e){var a=0,c=0,d=encodeURI(e)+"%80",g=[],l,b=[],w=1732584193,I=4023233417,C=~w,k=~I,R=3285377520,J=[w,I,C,k,R],Y=0,de="";function G($,D){return $<<D|$>>>32-D}for(;a<d.length;c++)g[c>>2]=g[c>>2]|(d[a]=="%"?parseInt(d.substring(a+1,a+=3),16):d.charCodeAt(a++))<<(3-(c&3))*8;for(l=((c+7>>6)+1)*16,g[l-1]=c*8-8;Y<l;Y+=16){for(a=0;a<80;a++)c=G(w,5)+R+(a<20?(I&C^~I&k)+1518500249:a<40?(I^C^k)+1859775393:a<60?(I&C^I&k^C&k)+2400959708:(I^C^k)+3395469782)+(b[a]=a<16?g[Y+a]|0:G(b[a-3]^b[a-8]^b[a-14]^b[a-16],1)),R=k,k=C,C=G(I,30),I=w,w=c;J[0]=w=J[0]+w|0,J[1]=I=J[1]+I|0,J[2]=C=J[2]+C|0,J[3]=k=J[3]+k|0,J[4]=R=J[4]+R|0}for(a=0;a<40;a++)de+=(J[a>>3]>>>(7-(a&7))*4&15).toString(16);return de}function eF(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function tF(e){return Qz(e==null?"":""+e)}function jc(e){return(e*10+.5|0)/10}class nF{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+jc(t[a].x)+" "+jc(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,d=jc(i/2),g=jc(i),l="a"+d+","+d+" 0 1,"+c+" ";this.v+="M"+jc(t.x)+" "+jc(t.y+i/2)+l+g+",0"+l+-g+",0"}}class rF{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?Df(i[2],0)/255:1;this.N.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new nF)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.N.O(i,t[i].v)}}const iF={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class oF{constructor(t){this.k=t,this.C='<svg xmlns="'+iF.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}O(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function sF(e,t,i){const a=new oF(t);return Jz(new rF(a),eF(e)||tF(e),i),a.toString()}typeof document<"u"&&document.querySelectorAll.bind(document);const aF=({feature:e,size:t})=>e.properties===null?null:pt.jsx(pt.Fragment,{children:e.properties.userIconHref.length>0?pt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):pt.jsx("span",{dangerouslySetInnerHTML:{__html:sF(e.properties.user||"noname",t)}})}),lF=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?pt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};var uF={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};const cF=({viewState:e})=>{const[t,i]=yt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return yt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),pt.jsx(pt.Fragment,{children:e&&t&&pt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[pt.jsx(da,{icon:uF,style:{padding:"0px 3px"}}),pt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var fI={};class Ki{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const d=i[c],g=t+d,l=Math.abs(t)<Math.abs(d)?t-(g-d):d-(g-t);l&&(i[a++]=l),t=g}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,d,g=0;if(i>0){for(g=t[--i];i>0&&(a=g,c=t[--i],g=a+c,d=c-(g-a),!d););i>0&&(d<0&&t[i-1]<0||d>0&&t[i-1]>0)&&(c=d*2,a=g+c,c==a-g&&(g=a))}return g}}function*hF(e){for(const t of e)yield*t}function dI(e){return Array.from(hF(e))}function oh(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,d=new Array(c);++a<c;)d[a]=e+a*i;return d}var pn=1e-6,Pd=1e-12,On=Math.PI,Nr=On/2,sg=On/4,fo=On*2,dr=180/On,mn=On/180,Vn=Math.abs,Fh=Math.atan,po=Math.atan2,on=Math.cos,tm=Math.ceil,pI=Math.exp,p_=Math.hypot,ag=Math.log,F0=Math.pow,Yt=Math.sin,hs=Math.sign||function(e){return e>0?1:e<0?-1:0},bi=Math.sqrt,ex=Math.tan;function mI(e){return e>1?0:e<-1?On:Math.acos(e)}function mo(e){return e>1?Nr:e<-1?-Nr:Math.asin(e)}function rS(e){return(e=Yt(e/2))*e}function Lr(){}function lg(e,t){e&&oS.hasOwnProperty(e.type)&&oS[e.type](e,t)}var iS={Feature:function(e,t){lg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)lg(i[a].geometry,t)}},oS={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){m_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)m_(i[a],t,0)},Polygon:function(e,t){sS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)sS(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)lg(i[a],t)}};function m_(e,t,i){var a=-1,c=e.length-i,d;for(t.lineStart();++a<c;)d=e[a],t.point(d[0],d[1],d[2]);t.lineEnd()}function sS(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)m_(e[i],t,1);t.polygonEnd()}function Os(e,t){e&&iS.hasOwnProperty(e.type)?iS[e.type](e,t):lg(e,t)}var ug=new Ki,cg=new Ki,gI,yI,g_,y_,v_,pa={point:Lr,lineStart:Lr,lineEnd:Lr,polygonStart:function(){ug=new Ki,pa.lineStart=fF,pa.lineEnd=dF},polygonEnd:function(){var e=+ug;cg.add(e<0?fo+e:e),this.lineStart=this.lineEnd=this.point=Lr},sphere:function(){cg.add(fo)}};function fF(){pa.point=pF}function dF(){vI(gI,yI)}function pF(e,t){pa.point=vI,gI=e,yI=t,e*=mn,t*=mn,g_=e,y_=on(t=t/2+sg),v_=Yt(t)}function vI(e,t){e*=mn,t*=mn,t=t/2+sg;var i=e-g_,a=i>=0?1:-1,c=a*i,d=on(t),g=Yt(t),l=v_*g,b=y_*d+l*on(c),w=l*a*Yt(c);ug.add(po(w,b)),g_=e,y_=d,v_=g}function mF(e){return cg=new Ki,Os(e,pa),cg*2}function hg(e){return[po(e[1],e[0]),mo(e[2])]}function ic(e){var t=e[0],i=e[1],a=on(i);return[a*on(t),a*Yt(t),Yt(i)]}function nm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Th(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function O0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function rm(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function fg(e){var t=bi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var kr,So,jr,Do,Vu,_I,xI,ph,nd,Bl,el,Va={point:__,lineStart:aS,lineEnd:lS,polygonStart:function(){Va.point=bI,Va.lineStart=gF,Va.lineEnd=yF,nd=new Ki,pa.polygonStart()},polygonEnd:function(){pa.polygonEnd(),Va.point=__,Va.lineStart=aS,Va.lineEnd=lS,ug<0?(kr=-(jr=180),So=-(Do=90)):nd>pn?Do=90:nd<-pn&&(So=-90),el[0]=kr,el[1]=jr},sphere:function(){kr=-(jr=180),So=-(Do=90)}};function __(e,t){Bl.push(el=[kr=e,jr=e]),t<So&&(So=t),t>Do&&(Do=t)}function wI(e,t){var i=ic([e*mn,t*mn]);if(ph){var a=Th(ph,i),c=[a[1],-a[0],0],d=Th(c,a);fg(d),d=hg(d);var g=e-Vu,l=g>0?1:-1,b=d[0]*dr*l,w,I=Vn(g)>180;I^(l*Vu<b&&b<l*e)?(w=d[1]*dr,w>Do&&(Do=w)):(b=(b+360)%360-180,I^(l*Vu<b&&b<l*e)?(w=-d[1]*dr,w<So&&(So=w)):(t<So&&(So=t),t>Do&&(Do=t))),I?e<Vu?jo(kr,e)>jo(kr,jr)&&(jr=e):jo(e,jr)>jo(kr,jr)&&(kr=e):jr>=kr?(e<kr&&(kr=e),e>jr&&(jr=e)):e>Vu?jo(kr,e)>jo(kr,jr)&&(jr=e):jo(e,jr)>jo(kr,jr)&&(kr=e)}else Bl.push(el=[kr=e,jr=e]);t<So&&(So=t),t>Do&&(Do=t),ph=i,Vu=e}function aS(){Va.point=wI}function lS(){el[0]=kr,el[1]=jr,Va.point=__,ph=null}function bI(e,t){if(ph){var i=e-Vu;nd.add(Vn(i)>180?i+(i>0?360:-360):i)}else _I=e,xI=t;pa.point(e,t),wI(e,t)}function gF(){pa.lineStart()}function yF(){bI(_I,xI),pa.lineEnd(),Vn(nd)>pn&&(kr=-(jr=180)),el[0]=kr,el[1]=jr,ph=null}function jo(e,t){return(t-=e)<0?t+360:t}function vF(e,t){return e[0]-t[0]}function uS(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function _F(e){var t,i,a,c,d,g,l;if(Do=jr=-(kr=So=1/0),Bl=[],Os(e,Va),i=Bl.length){for(Bl.sort(vF),t=1,a=Bl[0],d=[a];t<i;++t)c=Bl[t],uS(a,c[0])||uS(a,c[1])?(jo(a[0],c[1])>jo(a[0],a[1])&&(a[1]=c[1]),jo(c[0],a[1])>jo(a[0],a[1])&&(a[0]=c[0])):d.push(a=c);for(g=-1/0,i=d.length-1,t=0,a=d[i];t<=i;a=c,++t)c=d[t],(l=jo(a[1],c[0]))>g&&(g=l,kr=c[0],jr=a[1])}return Bl=el=null,kr===1/0||So===1/0?[[NaN,NaN],[NaN,NaN]]:[[kr,So],[jr,Do]]}var Bf,dg,pg,mg,gg,yg,vg,_g,x_,w_,b_,SI,EI,lo,uo,co,Bs={sphere:Lr,point:tx,lineStart:cS,lineEnd:hS,polygonStart:function(){Bs.lineStart=bF,Bs.lineEnd=SF},polygonEnd:function(){Bs.lineStart=cS,Bs.lineEnd=hS}};function tx(e,t){e*=mn,t*=mn;var i=on(t);Vd(i*on(e),i*Yt(e),Yt(t))}function Vd(e,t,i){++Bf,pg+=(e-pg)/Bf,mg+=(t-mg)/Bf,gg+=(i-gg)/Bf}function cS(){Bs.point=xF}function xF(e,t){e*=mn,t*=mn;var i=on(t);lo=i*on(e),uo=i*Yt(e),co=Yt(t),Bs.point=wF,Vd(lo,uo,co)}function wF(e,t){e*=mn,t*=mn;var i=on(t),a=i*on(e),c=i*Yt(e),d=Yt(t),g=po(bi((g=uo*d-co*c)*g+(g=co*a-lo*d)*g+(g=lo*c-uo*a)*g),lo*a+uo*c+co*d);dg+=g,yg+=g*(lo+(lo=a)),vg+=g*(uo+(uo=c)),_g+=g*(co+(co=d)),Vd(lo,uo,co)}function hS(){Bs.point=tx}function bF(){Bs.point=EF}function SF(){TI(SI,EI),Bs.point=tx}function EF(e,t){SI=e,EI=t,e*=mn,t*=mn,Bs.point=TI;var i=on(t);lo=i*on(e),uo=i*Yt(e),co=Yt(t),Vd(lo,uo,co)}function TI(e,t){e*=mn,t*=mn;var i=on(t),a=i*on(e),c=i*Yt(e),d=Yt(t),g=uo*d-co*c,l=co*a-lo*d,b=lo*c-uo*a,w=p_(g,l,b),I=mo(w),C=w&&-I/w;x_.add(C*g),w_.add(C*l),b_.add(C*b),dg+=I,yg+=I*(lo+(lo=a)),vg+=I*(uo+(uo=c)),_g+=I*(co+(co=d)),Vd(lo,uo,co)}function TF(e){Bf=dg=pg=mg=gg=yg=vg=_g=0,x_=new Ki,w_=new Ki,b_=new Ki,Os(e,Bs);var t=+x_,i=+w_,a=+b_,c=p_(t,i,a);return c<Pd&&(t=yg,i=vg,a=_g,dg<pn&&(t=pg,i=mg,a=gg),c=p_(t,i,a),c<Pd)?[NaN,NaN]:[po(i,t)*dr,mo(a/c)*dr]}function Dc(e){return function(){return e}}function S_(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function E_(e,t){return[Vn(e)>On?e+Math.round(-e/fo)*fo:e,t]}E_.invert=E_;function nx(e,t,i){return(e%=fo)?t||i?S_(dS(e),pS(t,i)):dS(e):t||i?pS(t,i):E_}function fS(e){return function(t,i){return t+=e,[t>On?t-fo:t<-On?t+fo:t,i]}}function dS(e){var t=fS(e);return t.invert=fS(-e),t}function pS(e,t){var i=on(e),a=Yt(e),c=on(t),d=Yt(t);function g(l,b){var w=on(b),I=on(l)*w,C=Yt(l)*w,k=Yt(b),R=k*i+I*a;return[po(C*c-R*d,I*i-k*a),mo(R*c+C*d)]}return g.invert=function(l,b){var w=on(b),I=on(l)*w,C=Yt(l)*w,k=Yt(b),R=k*c-C*d;return[po(C*c+k*d,I*i+R*a),mo(R*i-I*a)]},g}function CI(e){e=nx(e[0]*mn,e[1]*mn,e.length>2?e[2]*mn:0);function t(i){return i=e(i[0]*mn,i[1]*mn),i[0]*=dr,i[1]*=dr,i}return t.invert=function(i){return i=e.invert(i[0]*mn,i[1]*mn),i[0]*=dr,i[1]*=dr,i},t}function II(e,t,i,a,c,d){if(i){var g=on(t),l=Yt(t),b=a*i;c==null?(c=t+a*fo,d=t-b/2):(c=mS(g,c),d=mS(g,d),(a>0?c<d:c>d)&&(c+=a*fo));for(var w,I=c;a>0?I>d:I<d;I-=b)w=hg([g,-l*on(I),-l*Yt(I)]),e.point(w[0],w[1])}}function mS(e,t){t=ic(t),t[0]-=e,fg(t);var i=mI(-t[1]);return((-t[2]<0?-i:i)+fo-pn)%fo}function CF(){var e=Dc([0,0]),t=Dc(90),i=Dc(6),a,c,d={point:g};function g(b,w){a.push(b=c(b,w)),b[0]*=dr,b[1]*=dr}function l(){var b=e.apply(this,arguments),w=t.apply(this,arguments)*mn,I=i.apply(this,arguments)*mn;return a=[],c=nx(-b[0]*mn,-b[1]*mn,0).invert,II(d,w,I,1),b={type:"Polygon",coordinates:[a]},a=c=null,b}return l.center=function(b){return arguments.length?(e=typeof b=="function"?b:Dc([+b[0],+b[1]]),l):e},l.radius=function(b){return arguments.length?(t=typeof b=="function"?b:Dc(+b),l):t},l.precision=function(b){return arguments.length?(i=typeof b=="function"?b:Dc(+b),l):i},l}function AI(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:Lr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function Em(e,t){return Vn(e[0]-t[0])<pn&&Vn(e[1]-t[1])<pn}function im(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function PI(e,t,i,a,c){var d=[],g=[],l,b;if(e.forEach(function(J){if(!((Y=J.length-1)<=0)){var Y,de=J[0],G=J[Y],$;if(Em(de,G)){if(!de[2]&&!G[2]){for(c.lineStart(),l=0;l<Y;++l)c.point((de=J[l])[0],de[1]);c.lineEnd();return}G[0]+=2*pn}d.push($=new im(de,J,null,!0)),g.push($.o=new im(de,null,$,!1)),d.push($=new im(G,J,null,!1)),g.push($.o=new im(G,null,$,!0))}}),!!d.length){for(g.sort(t),gS(d),gS(g),l=0,b=g.length;l<b;++l)g[l].e=i=!i;for(var w=d[0],I,C;;){for(var k=w,R=!0;k.v;)if((k=k.n)===w)return;I=k.z,c.lineStart();do{if(k.v=k.o.v=!0,k.e){if(R)for(l=0,b=I.length;l<b;++l)c.point((C=I[l])[0],C[1]);else a(k.x,k.n.x,1,c);k=k.n}else{if(R)for(I=k.p.z,l=I.length-1;l>=0;--l)c.point((C=I[l])[0],C[1]);else a(k.x,k.p.x,-1,c);k=k.p}k=k.o,I=k.z,R=!R}while(!k.v);c.lineEnd()}}}function gS(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function R0(e){return Vn(e[0])<=On?e[0]:hs(e[0])*((Vn(e[0])+On)%fo-On)}function kI(e,t){var i=R0(t),a=t[1],c=Yt(a),d=[Yt(i),-on(i),0],g=0,l=0,b=new Ki;c===1?a=Nr+pn:c===-1&&(a=-Nr-pn);for(var w=0,I=e.length;w<I;++w)if(k=(C=e[w]).length)for(var C,k,R=C[k-1],J=R0(R),Y=R[1]/2+sg,de=Yt(Y),G=on(Y),$=0;$<k;++$,J=ne,de=U,G=E,R=D){var D=C[$],ne=R0(D),Z=D[1]/2+sg,U=Yt(Z),E=on(Z),M=ne-J,H=M>=0?1:-1,q=H*M,ee=q>On,ve=de*U;if(b.add(po(ve*H*Yt(q),G*E+ve*on(q))),g+=ee?M+H*fo:M,ee^J>=i^ne>=i){var xe=Th(ic(R),ic(D));fg(xe);var be=Th(d,xe);fg(be);var te=(ee^M>=0?-1:1)*mo(be[2]);(a>te||a===te&&(xe[0]||xe[1]))&&(l+=ee^M>=0?1:-1)}}return(g<-pn||g<pn&&b<-Pd)^l&1}function MI(e,t,i,a){return function(c){var d=t(c),g=AI(),l=t(g),b=!1,w,I,C,k={point:R,lineStart:Y,lineEnd:de,polygonStart:function(){k.point=G,k.lineStart=$,k.lineEnd=D,I=[],w=[]},polygonEnd:function(){k.point=R,k.lineStart=Y,k.lineEnd=de,I=dI(I);var ne=kI(w,a);I.length?(b||(c.polygonStart(),b=!0),PI(I,AF,ne,i,c)):ne&&(b||(c.polygonStart(),b=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),b&&(c.polygonEnd(),b=!1),I=w=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function R(ne,Z){e(ne,Z)&&c.point(ne,Z)}function J(ne,Z){d.point(ne,Z)}function Y(){k.point=J,d.lineStart()}function de(){k.point=R,d.lineEnd()}function G(ne,Z){C.push([ne,Z]),l.point(ne,Z)}function $(){l.lineStart(),C=[]}function D(){G(C[0][0],C[0][1]),l.lineEnd();var ne=l.clean(),Z=g.result(),U,E=Z.length,M,H,q;if(C.pop(),w.push(C),C=null,!!E){if(ne&1){if(H=Z[0],(M=H.length-1)>0){for(b||(c.polygonStart(),b=!0),c.lineStart(),U=0;U<M;++U)c.point((q=H[U])[0],q[1]);c.lineEnd()}return}E>1&&ne&2&&Z.push(Z.pop().concat(Z.shift())),I.push(Z.filter(IF))}}return k}}function IF(e){return e.length>1}function AF(e,t){return((e=e.x)[0]<0?e[1]-Nr-pn:Nr-e[1])-((t=t.x)[0]<0?t[1]-Nr-pn:Nr-t[1])}const T_=MI(function(){return!0},PF,MF,[-On,-Nr]);function PF(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(d,g){var l=d>0?On:-On,b=Vn(d-t);Vn(b-On)<pn?(e.point(t,i=(i+g)/2>0?Nr:-Nr),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),e.point(d,i),c=0):a!==l&&b>=On&&(Vn(t-a)<pn&&(t-=a*pn),Vn(d-l)<pn&&(d-=l*pn),i=kF(t,i,d,g),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),c=0),e.point(t=d,i=g),a=l},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function kF(e,t,i,a){var c,d,g=Yt(e-i);return Vn(g)>pn?Fh((Yt(t)*(d=on(a))*Yt(i)-Yt(a)*(c=on(t))*Yt(e))/(c*d*g)):(t+a)/2}function MF(e,t,i,a){var c;if(e==null)c=i*Nr,a.point(-On,c),a.point(0,c),a.point(On,c),a.point(On,0),a.point(On,-c),a.point(0,-c),a.point(-On,-c),a.point(-On,0),a.point(-On,c);else if(Vn(e[0]-t[0])>pn){var d=e[0]<t[0]?On:-On;c=i*d/2,a.point(-d,c),a.point(0,c),a.point(d,c)}else a.point(t[0],t[1])}function LI(e){var t=on(e),i=6*mn,a=t>0,c=Vn(t)>pn;function d(I,C,k,R){II(R,e,i,k,I,C)}function g(I,C){return on(I)*on(C)>t}function l(I){var C,k,R,J,Y;return{lineStart:function(){J=R=!1,Y=1},point:function(de,G){var $=[de,G],D,ne=g(de,G),Z=a?ne?0:w(de,G):ne?w(de+(de<0?On:-On),G):0;if(!C&&(J=R=ne)&&I.lineStart(),ne!==R&&(D=b(C,$),(!D||Em(C,D)||Em($,D))&&($[2]=1)),ne!==R)Y=0,ne?(I.lineStart(),D=b($,C),I.point(D[0],D[1])):(D=b(C,$),I.point(D[0],D[1],2),I.lineEnd()),C=D;else if(c&&C&&a^ne){var U;!(Z&k)&&(U=b($,C,!0))&&(Y=0,a?(I.lineStart(),I.point(U[0][0],U[0][1]),I.point(U[1][0],U[1][1]),I.lineEnd()):(I.point(U[1][0],U[1][1]),I.lineEnd(),I.lineStart(),I.point(U[0][0],U[0][1],3)))}ne&&(!C||!Em(C,$))&&I.point($[0],$[1]),C=$,R=ne,k=Z},lineEnd:function(){R&&I.lineEnd(),C=null},clean:function(){return Y|(J&&R)<<1}}}function b(I,C,k){var R=ic(I),J=ic(C),Y=[1,0,0],de=Th(R,J),G=nm(de,de),$=de[0],D=G-$*$;if(!D)return!k&&I;var ne=t*G/D,Z=-t*$/D,U=Th(Y,de),E=rm(Y,ne),M=rm(de,Z);O0(E,M);var H=U,q=nm(E,H),ee=nm(H,H),ve=q*q-ee*(nm(E,E)-1);if(!(ve<0)){var xe=bi(ve),be=rm(H,(-q-xe)/ee);if(O0(be,E),be=hg(be),!k)return be;var te=I[0],ue=C[0],re=I[1],ie=C[1],ye;ue<te&&(ye=te,te=ue,ue=ye);var Te=ue-te,Se=Vn(Te-On)<pn,$e=Se||Te<pn;if(!Se&&ie<re&&(ye=re,re=ie,ie=ye),$e?Se?re+ie>0^be[1]<(Vn(be[0]-te)<pn?re:ie):re<=be[1]&&be[1]<=ie:Te>On^(te<=be[0]&&be[0]<=ue)){var Pe=rm(H,(-q+xe)/ee);return O0(Pe,E),[be,hg(Pe)]}}}function w(I,C){var k=a?e:On-e,R=0;return I<-k?R|=1:I>k&&(R|=2),C<-k?R|=4:C>k&&(R|=8),R}return MI(g,l,d,a?[0,-e]:[-On,e-On])}function LF(e,t,i,a,c,d){var g=e[0],l=e[1],b=t[0],w=t[1],I=0,C=1,k=b-g,R=w-l,J;if(J=i-g,!(!k&&J>0)){if(J/=k,k<0){if(J<I)return;J<C&&(C=J)}else if(k>0){if(J>C)return;J>I&&(I=J)}if(J=c-g,!(!k&&J<0)){if(J/=k,k<0){if(J>C)return;J>I&&(I=J)}else if(k>0){if(J<I)return;J<C&&(C=J)}if(J=a-l,!(!R&&J>0)){if(J/=R,R<0){if(J<I)return;J<C&&(C=J)}else if(R>0){if(J>C)return;J>I&&(I=J)}if(J=d-l,!(!R&&J<0)){if(J/=R,R<0){if(J>C)return;J>I&&(I=J)}else if(R>0){if(J<I)return;J<C&&(C=J)}return I>0&&(e[0]=g+I*k,e[1]=l+I*R),C<1&&(t[0]=g+C*k,t[1]=l+C*R),!0}}}}}var Nf=1e9,om=-Nf;function Qg(e,t,i,a){function c(w,I){return e<=w&&w<=i&&t<=I&&I<=a}function d(w,I,C,k){var R=0,J=0;if(w==null||(R=g(w,C))!==(J=g(I,C))||b(w,I)<0^C>0)do k.point(R===0||R===3?e:i,R>1?a:t);while((R=(R+C+4)%4)!==J);else k.point(I[0],I[1])}function g(w,I){return Vn(w[0]-e)<pn?I>0?0:3:Vn(w[0]-i)<pn?I>0?2:1:Vn(w[1]-t)<pn?I>0?1:0:I>0?3:2}function l(w,I){return b(w.x,I.x)}function b(w,I){var C=g(w,1),k=g(I,1);return C!==k?C-k:C===0?I[1]-w[1]:C===1?w[0]-I[0]:C===2?w[1]-I[1]:I[0]-w[0]}return function(w){var I=w,C=AI(),k,R,J,Y,de,G,$,D,ne,Z,U,E={point:M,lineStart:ve,lineEnd:xe,polygonStart:q,polygonEnd:ee};function M(te,ue){c(te,ue)&&I.point(te,ue)}function H(){for(var te=0,ue=0,re=R.length;ue<re;++ue)for(var ie=R[ue],ye=1,Te=ie.length,Se=ie[0],$e,Pe,ze=Se[0],Xe=Se[1];ye<Te;++ye)$e=ze,Pe=Xe,Se=ie[ye],ze=Se[0],Xe=Se[1],Pe<=a?Xe>a&&(ze-$e)*(a-Pe)>(Xe-Pe)*(e-$e)&&++te:Xe<=a&&(ze-$e)*(a-Pe)<(Xe-Pe)*(e-$e)&&--te;return te}function q(){I=C,k=[],R=[],U=!0}function ee(){var te=H(),ue=U&&te,re=(k=dI(k)).length;(ue||re)&&(w.polygonStart(),ue&&(w.lineStart(),d(null,null,1,w),w.lineEnd()),re&&PI(k,l,te,d,w),w.polygonEnd()),I=w,k=R=J=null}function ve(){E.point=be,R&&R.push(J=[]),Z=!0,ne=!1,$=D=NaN}function xe(){k&&(be(Y,de),G&&ne&&C.rejoin(),k.push(C.result())),E.point=M,ne&&I.lineEnd()}function be(te,ue){var re=c(te,ue);if(R&&J.push([te,ue]),Z)Y=te,de=ue,G=re,Z=!1,re&&(I.lineStart(),I.point(te,ue));else if(re&&ne)I.point(te,ue);else{var ie=[$=Math.max(om,Math.min(Nf,$)),D=Math.max(om,Math.min(Nf,D))],ye=[te=Math.max(om,Math.min(Nf,te)),ue=Math.max(om,Math.min(Nf,ue))];LF(ie,ye,e,t,i,a)?(ne||(I.lineStart(),I.point(ie[0],ie[1])),I.point(ye[0],ye[1]),re||I.lineEnd(),U=!1):re&&(I.lineStart(),I.point(te,ue),U=!1)}$=te,D=ue,ne=re}return E}}function zF(){var e=0,t=0,i=960,a=500,c,d,g;return g={stream:function(l){return c&&d===l?c:c=Qg(e,t,i,a)(d=l)},extent:function(l){return arguments.length?(e=+l[0][0],t=+l[0][1],i=+l[1][0],a=+l[1][1],c=d=null,g):[[e,t],[i,a]]}}}var C_,I_,Tm,Cm,Ch={sphere:Lr,point:Lr,lineStart:FF,lineEnd:Lr,polygonStart:Lr,polygonEnd:Lr};function FF(){Ch.point=RF,Ch.lineEnd=OF}function OF(){Ch.point=Ch.lineEnd=Lr}function RF(e,t){e*=mn,t*=mn,I_=e,Tm=Yt(t),Cm=on(t),Ch.point=jF}function jF(e,t){e*=mn,t*=mn;var i=Yt(t),a=on(t),c=Vn(e-I_),d=on(c),g=Yt(c),l=a*g,b=Cm*i-Tm*a*d,w=Tm*i+Cm*a*d;C_.add(po(bi(l*l+b*b),w)),I_=e,Tm=i,Cm=a}function zI(e){return C_=new Ki,Os(e,Ch),+C_}var A_=[null,null],DF={type:"LineString",coordinates:A_};function xg(e,t){return A_[0]=e,A_[1]=t,zI(DF)}var yS={Feature:function(e,t){return wg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if(wg(i[a].geometry,t))return!0;return!1}},vS={Sphere:function(){return!0},Point:function(e,t){return _S(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(_S(i[a],t))return!0;return!1},LineString:function(e,t){return xS(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(xS(i[a],t))return!0;return!1},Polygon:function(e,t){return wS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(wS(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if(wg(i[a],t))return!0;return!1}};function wg(e,t){return e&&vS.hasOwnProperty(e.type)?vS[e.type](e,t):!1}function _S(e,t){return xg(e,t)===0}function xS(e,t){for(var i,a,c,d=0,g=e.length;d<g;d++){if(a=xg(e[d],t),a===0||d>0&&(c=xg(e[d],e[d-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<Pd*c))return!0;i=a}return!1}function wS(e,t){return!!kI(e.map(BF),FI(t))}function BF(e){return e=e.map(FI),e.pop(),e}function FI(e){return[e[0]*mn,e[1]*mn]}function NF(e,t){return(e&&yS.hasOwnProperty(e.type)?yS[e.type]:wg)(e,t)}function bS(e,t,i){var a=oh(e,t-pn,i).concat(t);return function(c){return a.map(function(d){return[c,d]})}}function SS(e,t,i){var a=oh(e,t-pn,i).concat(t);return function(c){return a.map(function(d){return[d,c]})}}function OI(){var e,t,i,a,c,d,g,l,b=10,w=b,I=90,C=360,k,R,J,Y,de=2.5;function G(){return{type:"MultiLineString",coordinates:$()}}function $(){return oh(tm(a/I)*I,i,I).map(J).concat(oh(tm(l/C)*C,g,C).map(Y)).concat(oh(tm(t/b)*b,e,b).filter(function(D){return Vn(D%I)>pn}).map(k)).concat(oh(tm(d/w)*w,c,w).filter(function(D){return Vn(D%C)>pn}).map(R))}return G.lines=function(){return $().map(function(D){return{type:"LineString",coordinates:D}})},G.outline=function(){return{type:"Polygon",coordinates:[J(a).concat(Y(g).slice(1),J(i).reverse().slice(1),Y(l).reverse().slice(1))]}},G.extent=function(D){return arguments.length?G.extentMajor(D).extentMinor(D):G.extentMinor()},G.extentMajor=function(D){return arguments.length?(a=+D[0][0],i=+D[1][0],l=+D[0][1],g=+D[1][1],a>i&&(D=a,a=i,i=D),l>g&&(D=l,l=g,g=D),G.precision(de)):[[a,l],[i,g]]},G.extentMinor=function(D){return arguments.length?(t=+D[0][0],e=+D[1][0],d=+D[0][1],c=+D[1][1],t>e&&(D=t,t=e,e=D),d>c&&(D=d,d=c,c=D),G.precision(de)):[[t,d],[e,c]]},G.step=function(D){return arguments.length?G.stepMajor(D).stepMinor(D):G.stepMinor()},G.stepMajor=function(D){return arguments.length?(I=+D[0],C=+D[1],G):[I,C]},G.stepMinor=function(D){return arguments.length?(b=+D[0],w=+D[1],G):[b,w]},G.precision=function(D){return arguments.length?(de=+D,k=bS(d,c,90),R=SS(t,e,de),J=bS(l,g,90),Y=SS(a,i,de),G):de},G.extentMajor([[-180,-90+pn],[180,90-pn]]).extentMinor([[-180,-80-pn],[180,80+pn]])}function UF(){return OI()()}function $F(e,t){var i=e[0]*mn,a=e[1]*mn,c=t[0]*mn,d=t[1]*mn,g=on(a),l=Yt(a),b=on(d),w=Yt(d),I=g*on(i),C=g*Yt(i),k=b*on(c),R=b*Yt(c),J=2*mo(bi(rS(d-a)+g*b*rS(c-i))),Y=Yt(J),de=J?function(G){var $=Yt(G*=J)/Y,D=Yt(J-G)/Y,ne=D*I+$*k,Z=D*C+$*R,U=D*l+$*w;return[po(Z,ne)*dr,po(U,bi(ne*ne+Z*Z))*dr]}:function(){return[i*dr,a*dr]};return de.distance=J,de}const kd=e=>e;var j0=new Ki,P_=new Ki,RI,jI,k_,M_,Vl={point:Lr,lineStart:Lr,lineEnd:Lr,polygonStart:function(){Vl.lineStart=VF,Vl.lineEnd=ZF},polygonEnd:function(){Vl.lineStart=Vl.lineEnd=Vl.point=Lr,j0.add(Vn(P_)),P_=new Ki},result:function(){var e=j0/2;return j0=new Ki,e}};function VF(){Vl.point=GF}function GF(e,t){Vl.point=DI,RI=k_=e,jI=M_=t}function DI(e,t){P_.add(M_*e-k_*t),k_=e,M_=t}function ZF(){DI(RI,jI)}const ES=Vl;var Ih=1/0,bg=Ih,Md=-Ih,Sg=Md,HF={point:WF,lineStart:Lr,lineEnd:Lr,polygonStart:Lr,polygonEnd:Lr,result:function(){var e=[[Ih,bg],[Md,Sg]];return Md=Sg=-(bg=Ih=1/0),e}};function WF(e,t){e<Ih&&(Ih=e),e>Md&&(Md=e),t<bg&&(bg=t),t>Sg&&(Sg=t)}const Eg=HF;var L_=0,z_=0,Uf=0,Tg=0,Cg=0,sh=0,F_=0,O_=0,$f=0,BI,NI,aa,la,Rs={point:oc,lineStart:TS,lineEnd:CS,polygonStart:function(){Rs.lineStart=KF,Rs.lineEnd=YF},polygonEnd:function(){Rs.point=oc,Rs.lineStart=TS,Rs.lineEnd=CS},result:function(){var e=$f?[F_/$f,O_/$f]:sh?[Tg/sh,Cg/sh]:Uf?[L_/Uf,z_/Uf]:[NaN,NaN];return L_=z_=Uf=Tg=Cg=sh=F_=O_=$f=0,e}};function oc(e,t){L_+=e,z_+=t,++Uf}function TS(){Rs.point=XF}function XF(e,t){Rs.point=qF,oc(aa=e,la=t)}function qF(e,t){var i=e-aa,a=t-la,c=bi(i*i+a*a);Tg+=c*(aa+e)/2,Cg+=c*(la+t)/2,sh+=c,oc(aa=e,la=t)}function CS(){Rs.point=oc}function KF(){Rs.point=JF}function YF(){UI(BI,NI)}function JF(e,t){Rs.point=UI,oc(BI=aa=e,NI=la=t)}function UI(e,t){var i=e-aa,a=t-la,c=bi(i*i+a*a);Tg+=c*(aa+e)/2,Cg+=c*(la+t)/2,sh+=c,c=la*e-aa*t,F_+=c*(aa+e),O_+=c*(la+t),$f+=c*3,oc(aa=e,la=t)}const IS=Rs;function $I(e){this._context=e}$I.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,fo);break}}},result:Lr};var R_=new Ki,D0,VI,GI,Vf,Gf,Ig={point:Lr,lineStart:function(){Ig.point=QF},lineEnd:function(){D0&&ZI(VI,GI),Ig.point=Lr},polygonStart:function(){D0=!0},polygonEnd:function(){D0=null},result:function(){var e=+R_;return R_=new Ki,e}};function QF(e,t){Ig.point=ZI,VI=Vf=e,GI=Gf=t}function ZI(e,t){Vf-=e,Gf-=t,R_.add(bi(Vf*Vf+Gf*Gf)),Vf=e,Gf=t}const AS=Ig;function HI(){this._string=[]}HI.prototype={_radius:4.5,_circle:PS(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=PS(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function PS(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function eO(e,t){var i=4.5,a,c;function d(g){return g&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),Os(g,a(c))),c.result()}return d.area=function(g){return Os(g,a(ES)),ES.result()},d.measure=function(g){return Os(g,a(AS)),AS.result()},d.bounds=function(g){return Os(g,a(Eg)),Eg.result()},d.centroid=function(g){return Os(g,a(IS)),IS.result()},d.projection=function(g){return arguments.length?(a=g==null?(e=null,kd):(e=g).stream,d):e},d.context=function(g){return arguments.length?(c=g==null?(t=null,new HI):new $I(t=g),typeof i!="function"&&c.pointRadius(i),d):t},d.pointRadius=function(g){return arguments.length?(i=typeof g=="function"?g:(c.pointRadius(+g),+g),d):i},d.projection(e).context(t)}function tO(e){return{stream:Gd(e)}}function Gd(e){return function(t){var i=new j_;for(var a in e)i[a]=e[a];return i.stream=t,i}}function j_(){}j_.prototype={constructor:j_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function rx(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),Os(i,e.stream(Eg)),t(Eg.result()),a!=null&&e.clipExtent(a),e}function ey(e,t,i){return rx(e,function(a){var c=t[1][0]-t[0][0],d=t[1][1]-t[0][1],g=Math.min(c/(a[1][0]-a[0][0]),d/(a[1][1]-a[0][1])),l=+t[0][0]+(c-g*(a[1][0]+a[0][0]))/2,b=+t[0][1]+(d-g*(a[1][1]+a[0][1]))/2;e.scale(150*g).translate([l,b])},i)}function ix(e,t,i){return ey(e,[[0,0],t],i)}function ox(e,t,i){return rx(e,function(a){var c=+t,d=c/(a[1][0]-a[0][0]),g=(c-d*(a[1][0]+a[0][0]))/2,l=-d*a[0][1];e.scale(150*d).translate([g,l])},i)}function sx(e,t,i){return rx(e,function(a){var c=+t,d=c/(a[1][1]-a[0][1]),g=-d*a[0][0],l=(c-d*(a[1][1]+a[0][1]))/2;e.scale(150*d).translate([g,l])},i)}var kS=16,nO=on(30*mn);function MS(e,t){return+t?iO(e,t):rO(e)}function rO(e){return Gd({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function iO(e,t){function i(a,c,d,g,l,b,w,I,C,k,R,J,Y,de){var G=w-a,$=I-c,D=G*G+$*$;if(D>4*t&&Y--){var ne=g+k,Z=l+R,U=b+J,E=bi(ne*ne+Z*Z+U*U),M=mo(U/=E),H=Vn(Vn(U)-1)<pn||Vn(d-C)<pn?(d+C)/2:po(Z,ne),q=e(H,M),ee=q[0],ve=q[1],xe=ee-a,be=ve-c,te=$*xe-G*be;(te*te/D>t||Vn((G*xe+$*be)/D-.5)>.3||g*k+l*R+b*J<nO)&&(i(a,c,d,g,l,b,ee,ve,H,ne/=E,Z/=E,U,Y,de),de.point(ee,ve),i(ee,ve,H,ne,Z,U,w,I,C,k,R,J,Y,de))}}return function(a){var c,d,g,l,b,w,I,C,k,R,J,Y,de={point:G,lineStart:$,lineEnd:ne,polygonStart:function(){a.polygonStart(),de.lineStart=Z},polygonEnd:function(){a.polygonEnd(),de.lineStart=$}};function G(M,H){M=e(M,H),a.point(M[0],M[1])}function $(){C=NaN,de.point=D,a.lineStart()}function D(M,H){var q=ic([M,H]),ee=e(M,H);i(C,k,I,R,J,Y,C=ee[0],k=ee[1],I=M,R=q[0],J=q[1],Y=q[2],kS,a),a.point(C,k)}function ne(){de.point=G,a.lineEnd()}function Z(){$(),de.point=U,de.lineEnd=E}function U(M,H){D(c=M,H),d=C,g=k,l=R,b=J,w=Y,de.point=D}function E(){i(C,k,I,R,J,Y,d,g,c,l,b,w,kS,a),de.lineEnd=ne,ne()}return de}}var oO=Gd({point:function(e,t){this.stream.point(e*mn,t*mn)}});function sO(e){return Gd({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function aO(e,t,i,a,c){function d(g,l){return g*=a,l*=c,[t+e*g,i-e*l]}return d.invert=function(g,l){return[(g-t)/e*a,(i-l)/e*c]},d}function LS(e,t,i,a,c,d){if(!d)return aO(e,t,i,a,c);var g=on(d),l=Yt(d),b=g*e,w=l*e,I=g/e,C=l/e,k=(l*i-g*t)/e,R=(l*t+g*i)/e;function J(Y,de){return Y*=a,de*=c,[b*Y-w*de+t,i-w*Y-b*de]}return J.invert=function(Y,de){return[a*(I*Y-C*de+k),c*(R-C*Y-I*de)]},J}function ma(e){return ax(function(){return e})()}function ax(e){var t,i=150,a=480,c=250,d=0,g=0,l=0,b=0,w=0,I,C=0,k=1,R=1,J=null,Y=T_,de=null,G,$,D,ne=kd,Z=.5,U,E,M,H,q;function ee(te){return M(te[0]*mn,te[1]*mn)}function ve(te){return te=M.invert(te[0],te[1]),te&&[te[0]*dr,te[1]*dr]}ee.stream=function(te){return H&&q===te?H:H=oO(sO(I)(Y(U(ne(q=te)))))},ee.preclip=function(te){return arguments.length?(Y=te,J=void 0,be()):Y},ee.postclip=function(te){return arguments.length?(ne=te,de=G=$=D=null,be()):ne},ee.clipAngle=function(te){return arguments.length?(Y=+te?LI(J=te*mn):(J=null,T_),be()):J*dr},ee.clipExtent=function(te){return arguments.length?(ne=te==null?(de=G=$=D=null,kd):Qg(de=+te[0][0],G=+te[0][1],$=+te[1][0],D=+te[1][1]),be()):de==null?null:[[de,G],[$,D]]},ee.scale=function(te){return arguments.length?(i=+te,xe()):i},ee.translate=function(te){return arguments.length?(a=+te[0],c=+te[1],xe()):[a,c]},ee.center=function(te){return arguments.length?(d=te[0]%360*mn,g=te[1]%360*mn,xe()):[d*dr,g*dr]},ee.rotate=function(te){return arguments.length?(l=te[0]%360*mn,b=te[1]%360*mn,w=te.length>2?te[2]%360*mn:0,xe()):[l*dr,b*dr,w*dr]},ee.angle=function(te){return arguments.length?(C=te%360*mn,xe()):C*dr},ee.reflectX=function(te){return arguments.length?(k=te?-1:1,xe()):k<0},ee.reflectY=function(te){return arguments.length?(R=te?-1:1,xe()):R<0},ee.precision=function(te){return arguments.length?(U=MS(E,Z=te*te),be()):bi(Z)},ee.fitExtent=function(te,ue){return ey(ee,te,ue)},ee.fitSize=function(te,ue){return ix(ee,te,ue)},ee.fitWidth=function(te,ue){return ox(ee,te,ue)},ee.fitHeight=function(te,ue){return sx(ee,te,ue)};function xe(){var te=LS(i,0,0,k,R,C).apply(null,t(d,g)),ue=LS(i,a-te[0],c-te[1],k,R,C);return I=nx(l,b,w),E=S_(t,ue),M=S_(I,E),U=MS(E,Z),be()}function be(){return H=q=null,ee}return function(){return t=e.apply(this,arguments),ee.invert=t.invert&&ve,xe()}}function lx(e){var t=0,i=On/3,a=ax(e),c=a(t,i);return c.parallels=function(d){return arguments.length?a(t=d[0]*mn,i=d[1]*mn):[t*dr,i*dr]},c}function lO(e){var t=on(e);function i(a,c){return[a*t,Yt(c)/t]}return i.invert=function(a,c){return[a/t,mo(c*t)]},i}function WI(e,t){var i=Yt(e),a=(i+Yt(t))/2;if(Vn(a)<pn)return lO(e);var c=1+i*(2*a-i),d=bi(c)/a;function g(l,b){var w=bi(c-2*a*Yt(b))/a;return[w*Yt(l*=a),d-w*on(l)]}return g.invert=function(l,b){var w=d-b,I=po(l,Vn(w))*hs(w);return w*a<0&&(I-=On*hs(l)*hs(w)),[I/a,mo((c-(l*l+w*w)*a*a)/(2*a))]},g}function Ag(){return lx(WI).scale(155.424).center([0,33.6442])}function XI(){return Ag().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function uO(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function cO(){var e,t,i=XI(),a,c=Ag().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d,g=Ag().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,b,w={point:function(k,R){b=[k,R]}};function I(k){var R=k[0],J=k[1];return b=null,a.point(R,J),b||(d.point(R,J),b)||(l.point(R,J),b)}I.invert=function(k){var R=i.scale(),J=i.translate(),Y=(k[0]-J[0])/R,de=(k[1]-J[1])/R;return(de>=.12&&de<.234&&Y>=-.425&&Y<-.214?c:de>=.166&&de<.234&&Y>=-.214&&Y<-.115?g:i).invert(k)},I.stream=function(k){return e&&t===k?e:e=uO([i.stream(t=k),c.stream(k),g.stream(k)])},I.precision=function(k){return arguments.length?(i.precision(k),c.precision(k),g.precision(k),C()):i.precision()},I.scale=function(k){return arguments.length?(i.scale(k),c.scale(k*.35),g.scale(k),I.translate(i.translate())):i.scale()},I.translate=function(k){if(!arguments.length)return i.translate();var R=i.scale(),J=+k[0],Y=+k[1];return a=i.translate(k).clipExtent([[J-.455*R,Y-.238*R],[J+.455*R,Y+.238*R]]).stream(w),d=c.translate([J-.307*R,Y+.201*R]).clipExtent([[J-.425*R+pn,Y+.12*R+pn],[J-.214*R-pn,Y+.234*R-pn]]).stream(w),l=g.translate([J-.205*R,Y+.212*R]).clipExtent([[J-.214*R+pn,Y+.166*R+pn],[J-.115*R-pn,Y+.234*R-pn]]).stream(w),C()},I.fitExtent=function(k,R){return ey(I,k,R)},I.fitSize=function(k,R){return ix(I,k,R)},I.fitWidth=function(k,R){return ox(I,k,R)},I.fitHeight=function(k,R){return sx(I,k,R)};function C(){return e=t=null,I}return I.scale(1070)}function qI(e){return function(t,i){var a=on(t),c=on(i),d=e(a*c);return d===1/0?[2,0]:[d*c*Yt(t),d*Yt(i)]}}function Zd(e){return function(t,i){var a=bi(t*t+i*i),c=e(a),d=Yt(c),g=on(c);return[po(t*d,a*g),mo(a&&i*d/a)]}}var ux=qI(function(e){return bi(2/(1+e))});ux.invert=Zd(function(e){return 2*mo(e/2)});function hO(){return ma(ux).scale(124.75).clipAngle(180-.001)}var cx=qI(function(e){return(e=mI(e))&&e/Yt(e)});cx.invert=Zd(function(e){return e});function fO(){return ma(cx).scale(79.4188).clipAngle(180-.001)}function Hd(e,t){return[e,ag(ex((Nr+t)/2))]}Hd.invert=function(e,t){return[e,2*Fh(pI(t))-Nr]};function dO(){return KI(Hd).scale(961/fo)}function KI(e){var t=ma(e),i=t.center,a=t.scale,c=t.translate,d=t.clipExtent,g=null,l,b,w;t.scale=function(C){return arguments.length?(a(C),I()):a()},t.translate=function(C){return arguments.length?(c(C),I()):c()},t.center=function(C){return arguments.length?(i(C),I()):i()},t.clipExtent=function(C){return arguments.length?(C==null?g=l=b=w=null:(g=+C[0][0],l=+C[0][1],b=+C[1][0],w=+C[1][1]),I()):g==null?null:[[g,l],[b,w]]};function I(){var C=On*a(),k=t(CI(t.rotate()).invert([0,0]));return d(g==null?[[k[0]-C,k[1]-C],[k[0]+C,k[1]+C]]:e===Hd?[[Math.max(k[0]-C,g),l],[Math.min(k[0]+C,b),w]]:[[g,Math.max(k[1]-C,l)],[b,Math.min(k[1]+C,w)]])}return I()}function sm(e){return ex((Nr+e)/2)}function YI(e,t){var i=on(e),a=e===t?Yt(e):ag(i/on(t))/ag(sm(t)/sm(e)),c=i*F0(sm(e),a)/a;if(!a)return Hd;function d(g,l){c>0?l<-Nr+pn&&(l=-Nr+pn):l>Nr-pn&&(l=Nr-pn);var b=c/F0(sm(l),a);return[b*Yt(a*g),c-b*on(a*g)]}return d.invert=function(g,l){var b=c-l,w=hs(a)*bi(g*g+b*b),I=po(g,Vn(b))*hs(b);return b*a<0&&(I-=On*hs(g)*hs(b)),[I/a,2*Fh(F0(c/w,1/a))-Nr]},d}function pO(){return lx(YI).scale(109.5).parallels([30,30])}function Ld(e,t){return[e,t]}Ld.invert=Ld;function mO(){return ma(Ld).scale(152.63)}function JI(e,t){var i=on(e),a=e===t?Yt(e):(i-on(t))/(t-e),c=i/a+e;if(Vn(a)<pn)return Ld;function d(g,l){var b=c-l,w=a*g;return[b*Yt(w),c-b*on(w)]}return d.invert=function(g,l){var b=c-l,w=po(g,Vn(b))*hs(b);return b*a<0&&(w-=On*hs(g)*hs(b)),[w/a,c-hs(a)*bi(g*g+b*b)]},d}function gO(){return lx(JI).scale(131.154).center([0,13.9389])}var rd=1.340264,id=-.081106,od=893e-6,sd=.003796,Pg=bi(3)/2,yO=12;function hx(e,t){var i=mo(Pg*Yt(t)),a=i*i,c=a*a*a;return[e*on(i)/(Pg*(rd+3*id*a+c*(7*od+9*sd*a))),i*(rd+id*a+c*(od+sd*a))]}hx.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,d=0,g,l,b;d<yO&&(l=i*(rd+id*a+c*(od+sd*a))-t,b=rd+3*id*a+c*(7*od+9*sd*a),i-=g=l/b,a=i*i,c=a*a*a,!(Vn(g)<Pd));++d);return[Pg*e*(rd+3*id*a+c*(7*od+9*sd*a))/on(i),mo(Yt(i)/Pg)]};function vO(){return ma(hx).scale(177.158)}function fx(e,t){var i=on(t),a=on(e)*i;return[i*Yt(e)/a,Yt(t)/a]}fx.invert=Zd(Fh);function _O(){return ma(fx).scale(144.049).clipAngle(60)}function xO(){var e=1,t=0,i=0,a=1,c=1,d=0,g,l,b=null,w,I,C,k=1,R=1,J=Gd({point:function(ne,Z){var U=D([ne,Z]);this.stream.point(U[0],U[1])}}),Y=kd,de,G;function $(){return k=e*a,R=e*c,de=G=null,D}function D(ne){var Z=ne[0]*k,U=ne[1]*R;if(d){var E=U*g-Z*l;Z=Z*g+U*l,U=E}return[Z+t,U+i]}return D.invert=function(ne){var Z=ne[0]-t,U=ne[1]-i;if(d){var E=U*g+Z*l;Z=Z*g-U*l,U=E}return[Z/k,U/R]},D.stream=function(ne){return de&&G===ne?de:de=J(Y(G=ne))},D.postclip=function(ne){return arguments.length?(Y=ne,b=w=I=C=null,$()):Y},D.clipExtent=function(ne){return arguments.length?(Y=ne==null?(b=w=I=C=null,kd):Qg(b=+ne[0][0],w=+ne[0][1],I=+ne[1][0],C=+ne[1][1]),$()):b==null?null:[[b,w],[I,C]]},D.scale=function(ne){return arguments.length?(e=+ne,$()):e},D.translate=function(ne){return arguments.length?(t=+ne[0],i=+ne[1],$()):[t,i]},D.angle=function(ne){return arguments.length?(d=ne%360*mn,l=Yt(d),g=on(d),$()):d*dr},D.reflectX=function(ne){return arguments.length?(a=ne?-1:1,$()):a<0},D.reflectY=function(ne){return arguments.length?(c=ne?-1:1,$()):c<0},D.fitExtent=function(ne,Z){return ey(D,ne,Z)},D.fitSize=function(ne,Z){return ix(D,ne,Z)},D.fitWidth=function(ne,Z){return ox(D,ne,Z)},D.fitHeight=function(ne,Z){return sx(D,ne,Z)},D}function dx(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}dx.invert=function(e,t){var i=t,a=25,c;do{var d=i*i,g=d*d;i-=c=(i*(1.007226+d*(.015085+g*(-.044475+.028874*d-.005916*g)))-t)/(1.007226+d*(.015085*3+g*(-.044475*7+.028874*9*d-.005916*11*g)))}while(Vn(c)>pn&&--a>0);return[e/(.8707+(d=i*i)*(-.131979+d*(-.013791+d*d*d*(.003971-.001529*d)))),i]};function wO(){return ma(dx).scale(175.295)}function px(e,t){return[on(t)*Yt(e),Yt(t)]}px.invert=Zd(mo);function bO(){return ma(px).scale(249.5).clipAngle(90+pn)}function mx(e,t){var i=on(t),a=1+on(e)*i;return[i*Yt(e)/a,Yt(t)/a]}mx.invert=Zd(function(e){return 2*Fh(e)});function SO(){return ma(mx).scale(250).clipAngle(142)}function gx(e,t){return[ag(ex((Nr+t)/2)),-e]}gx.invert=function(e,t){return[-t,2*Fh(pI(e))-Nr]};function EO(){var e=KI(gx),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const TO=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:XI,geoAlbersUsa:cO,geoArea:mF,geoAzimuthalEqualArea:hO,geoAzimuthalEqualAreaRaw:ux,geoAzimuthalEquidistant:fO,geoAzimuthalEquidistantRaw:cx,geoBounds:_F,geoCentroid:TF,geoCircle:CF,geoClipAntimeridian:T_,geoClipCircle:LI,geoClipExtent:zF,geoClipRectangle:Qg,geoConicConformal:pO,geoConicConformalRaw:YI,geoConicEqualArea:Ag,geoConicEqualAreaRaw:WI,geoConicEquidistant:gO,geoConicEquidistantRaw:JI,geoContains:NF,geoDistance:xg,geoEqualEarth:vO,geoEqualEarthRaw:hx,geoEquirectangular:mO,geoEquirectangularRaw:Ld,geoGnomonic:_O,geoGnomonicRaw:fx,geoGraticule:OI,geoGraticule10:UF,geoIdentity:xO,geoInterpolate:$F,geoLength:zI,geoMercator:dO,geoMercatorRaw:Hd,geoNaturalEarth1:wO,geoNaturalEarth1Raw:dx,geoOrthographic:bO,geoOrthographicRaw:px,geoPath:eO,geoProjection:ma,geoProjectionMutator:ax,geoRotation:CI,geoStereographic:SO,geoStereographicRaw:mx,geoStream:Os,geoTransform:tO,geoTransverseMercator:EO,geoTransverseMercatorRaw:gx},Symbol.toStringTag,{value:"Module"})),CO=G_(TO);var su=2*Math.PI*6378137/2,IO=Math.PI/180;function QI(e){return e=e||256,2*Math.PI*6378137/e}function AO(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function D_(e,t,i){var a=eA(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function eA(e,t,i){var a=t,c=Ex(e[0]),d=Sx(e[1]),g=Math.sin(d*IO),l=Math.pow(2,a),b=l*(c/360+.5),w=l*(.5-.25*Math.log((1+g)/(1-g))/Math.PI);return uc([b,w,a],i)}function PO(e,t=6){var i=e[0],a=e[1],c=e[2],d=e[3],g=(i-c)/2+c,l=(a-d)/2+d;return t!=null&&(g=Number(g.toFixed(t)),l=Number(l.toFixed(t))),[g,l]}function kg(e,t,i={enable:!0,decimal:1}){e=ty(e,t);var a=e[0],c=e[1],d=a*su/180,g=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return g=g*su/180,i.enable&&(d=Number(d.toFixed(i.decimal)),g=Number(g.toFixed(i.decimal))),[d,g]}function B_(e,t=6){var i=e[0],a=e[1],c=i/su*180,d=a/su*180;return d=180/Math.PI*(2*Math.atan(Math.exp(d*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),d=Number(d.toFixed(t))),[c,d]}function yx(e,t,i){var a=e[0],c=e[1],d=wx(t,i),g=(a+su)/d,l=(c+su)/d;return[g,l,t]}function tA(e,t,i){e=ty(e,i);var a=kg(e),c=yx(a,t);return vx(c)}function kO(e,t,i){if(e=ty(e,i),t===0)return[0,0,0];var a=tA(e,t);return rA(a)}function MO(e,t){if(t===0)return[0,0,0];var i=yx(e,t);return vx(i)}function N_(e,t,i=1){var a=e[0],c=e[1],d=e[2],g=wx(d,t),l=a*g-su,b=c*g-su;return i!=null&&(l=Number(l.toFixed(i)),b=Number(b.toFixed(i))),[l,b]}function vx(e,t,i){t=t||256;var a=e[0],c=e[1],d=e[2];if(d===0)return[0,0,0];xx(d);var g=Math.ceil(a/t)-1,l=Math.ceil(c/t)-1;return g<0&&(g=0),l<0&&(l=0),[g,l,d]}function _x(e,t,i){uc(e,i),t=t||256;var a=e[0],c=e[1],d=e[2],g=N_([a*t,c*t,d]),l=N_([(a+1)*t,(c+1)*t,d]);return[g[0],g[1],l[0],l[1]]}function nA(e,t){uc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var d=_x([i,a,c]),g=d[0],l=d[1],b=d[2],w=d[3],I=B_([g,l,c]),C=B_([b,w,c]);return[I[0],I[1],C[0],C[1]]}function LO(e){var t=Wd(e);return _x(t)}function zO(e){var t=Wd(e);return nA(t)}function rA(e,t){uc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var d=i,g=Math.pow(2,c)-1-a;return[d,g,c]}function Wd(e){var t=e[0],i=e[1],a=e[2],c=t,d=Math.pow(2,a)-i-1;return[c,d,a]}function FO(e){var t=Wd(e);return iA(t)}function iA(e,t){uc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var d="";return a=Math.pow(2,c)-1-a,bx(c,0,-1).map(function(g){var l=0,b=1<<g-1;i&b&&(l+=1),a&b&&(l+=2),d=d.concat(l)}),d}function OO(e){var t=oA(e);return Wd(t)}function oA(e){var t=0,i=0,a=e.length;return bx(a,0,-1).map(function(c){var d=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=d;break;case 2:i+=d;break;case 3:t+=d,i+=d;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function RO(e){var t=kg([e[0],e[1]]),i=kg([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function uc(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=xx(c),e=sA(e),e}function sA(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function xx(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function ty(e,t){if(t===!1)return e;var i=Ex(e[0]),a=Sx(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function wx(e,t){return QI(t)/Math.pow(2,e)}function bx(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),d=0;d<a;d++,e+=i)c[d]=e;return c}function jO(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(d){d[0]<t&&(t=d[0]),d[1]<i&&(i=d[1]),d[2]>a&&(a=d[2]),d[3]>c&&(c=d[3])}),[t,i,a,c]}}function DO(e){try{return uc(e),!0}catch{return!1}}function Sx(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Ex(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function BO(e){var t=D_([e[0],e[1]],32),i=D_([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=NO(a);if(c===0)return[0,0,0];var d=a[0]>>>32-c,g=a[1]>>>32-c;return[d,g,c]}function NO(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const UO=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:PO,bboxToMeters:RO,bboxToTile:BO,googleToBBox:zO,googleToBBoxMeters:LO,googleToQuadkey:FO,googleToTile:Wd,hash:AO,initialResolution:QI,latitude:Sx,lngLatToGoogle:kO,lngLatToMeters:kg,lngLatToTile:tA,longitude:Ex,maxBBox:jO,metersToLngLat:B_,metersToPixels:yx,metersToTile:MO,pixelsToMeters:N_,pixelsToTile:vx,pointToTile:D_,pointToTileFraction:eA,quadkeyToGoogle:oA,quadkeyToTile:OO,range:bx,resolution:wx,tileToBBox:nA,tileToBBoxMeters:_x,tileToGoogle:rA,tileToQuadkey:iA,validTile:DO,validateLngLat:ty,validateTile:uc,validateZoom:xx,wrapTile:sA},Symbol.toStringTag,{value:"Module"})),$O=G_(UO);var ny={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ny.read=function(e,t,i,a,c){var d,g,l=c*8-a-1,b=(1<<l)-1,w=b>>1,I=-7,C=i?c-1:0,k=i?-1:1,R=e[t+C];for(C+=k,d=R&(1<<-I)-1,R>>=-I,I+=l;I>0;d=d*256+e[t+C],C+=k,I-=8);for(g=d&(1<<-I)-1,d>>=-I,I+=a;I>0;g=g*256+e[t+C],C+=k,I-=8);if(d===0)d=1-w;else{if(d===b)return g?NaN:(R?-1:1)*(1/0);g=g+Math.pow(2,a),d=d-w}return(R?-1:1)*g*Math.pow(2,d-a)};ny.write=function(e,t,i,a,c,d){var g,l,b,w=d*8-c-1,I=(1<<w)-1,C=I>>1,k=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=a?0:d-1,J=a?1:-1,Y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,g=I):(g=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-g))<1&&(g--,b*=2),g+C>=1?t+=k/b:t+=k*Math.pow(2,1-C),t*b>=2&&(g++,b/=2),g+C>=I?(l=0,g=I):g+C>=1?(l=(t*b-1)*Math.pow(2,c),g=g+C):(l=t*Math.pow(2,C-1)*Math.pow(2,c),g=0));c>=8;e[i+R]=l&255,R+=J,l/=256,c-=8);for(g=g<<c|l,w+=c;w>0;e[i+R]=g&255,R+=J,g/=256,w-=8);e[i+R-J]|=Y*128};var VO=Yn,am=ny;function Yn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Yn.Varint=0;Yn.Fixed64=1;Yn.Bytes=2;Yn.Fixed32=5;var U_=65536*65536,zS=1/U_,GO=12,aA=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Yn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,d=this.pos;this.type=a&7,e(c,t,this),this.pos===d&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=lm(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=OS(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=lm(this.buf,this.pos)+lm(this.buf,this.pos+4)*U_;return this.pos+=8,e},readSFixed64:function(){var e=lm(this.buf,this.pos)+OS(this.buf,this.pos+4)*U_;return this.pos+=8,e},readFloat:function(){var e=am.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=am.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,ZO(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=GO&&aA?o5(this.buf,t,e):i5(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Yn.Bytes)return e.push(this.readVarint(t));var i=Na(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Yn.Bytes)return e.push(this.readSVarint());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Yn.Bytes)return e.push(this.readBoolean());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Yn.Bytes)return e.push(this.readFloat());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Yn.Bytes)return e.push(this.readDouble());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Yn.Bytes)return e.push(this.readFixed32());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Yn.Bytes)return e.push(this.readSFixed32());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Yn.Bytes)return e.push(this.readFixed64());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Yn.Bytes)return e.push(this.readSFixed64());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Yn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Yn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Yn.Fixed32)this.pos+=4;else if(t===Yn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Nc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Nc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Nc(this.buf,e&-1,this.pos),Nc(this.buf,Math.floor(e*zS),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Nc(this.buf,e&-1,this.pos),Nc(this.buf,Math.floor(e*zS),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){HO(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=s5(this.buf,e,this.pos);var i=this.pos-t;i>=128&&FS(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),am.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),am.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&FS(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,Yn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,qO,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,KO,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,QO,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,YO,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,JO,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,e5,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,t5,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,n5,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,r5,t)},writeBytesField:function(e,t){this.writeTag(e,Yn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Yn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Yn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Yn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Yn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Yn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Yn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Yn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Yn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Yn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function ZO(e,t,i){var a=i.buf,c,d;if(d=a[i.pos++],c=(d&112)>>4,d<128||(d=a[i.pos++],c|=(d&127)<<3,d<128)||(d=a[i.pos++],c|=(d&127)<<10,d<128)||(d=a[i.pos++],c|=(d&127)<<17,d<128)||(d=a[i.pos++],c|=(d&127)<<24,d<128)||(d=a[i.pos++],c|=(d&1)<<31,d<128))return Bc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Na(e){return e.type===Yn.Bytes?e.readVarint()+e.pos:e.pos+1}function Bc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function HO(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),WO(i,a,t),XO(a,t)}function WO(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function XO(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function FS(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function qO(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function KO(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function YO(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function JO(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function QO(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function e5(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function t5(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function n5(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function r5(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function lm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Nc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function OS(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function i5(e,t,i){for(var a="",c=t;c<i;){var d=e[c],g=null,l=d>239?4:d>223?3:d>191?2:1;if(c+l>i)break;var b,w,I;l===1?d<128&&(g=d):l===2?(b=e[c+1],(b&192)===128&&(g=(d&31)<<6|b&63,g<=127&&(g=null))):l===3?(b=e[c+1],w=e[c+2],(b&192)===128&&(w&192)===128&&(g=(d&15)<<12|(b&63)<<6|w&63,(g<=2047||g>=55296&&g<=57343)&&(g=null))):l===4&&(b=e[c+1],w=e[c+2],I=e[c+3],(b&192)===128&&(w&192)===128&&(I&192)===128&&(g=(d&15)<<18|(b&63)<<12|(w&63)<<6|I&63,(g<=65535||g>=1114112)&&(g=null))),g===null?(g=65533,l=1):g>65535&&(g-=65536,a+=String.fromCharCode(g>>>10&1023|55296),g=56320|g&1023),a+=String.fromCharCode(g),c+=l}return a}function o5(e,t,i){return aA.decode(e.subarray(t,i))}function s5(e,t,i){for(var a=0,c,d;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(d)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,d=c;continue}else c=d-55296<<10|c-56320|65536,d=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):d=c;continue}else d&&(e[i++]=239,e[i++]=191,e[i++]=189,d=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var Tx={exports:{}},lA=function(t,i){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return t.apply(i,c)}},a5=lA,cc=Object.prototype.toString;function Cx(e){return cc.call(e)==="[object Array]"}function $_(e){return typeof e>"u"}function l5(e){return e!==null&&!$_(e)&&e.constructor!==null&&!$_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function u5(e){return cc.call(e)==="[object ArrayBuffer]"}function c5(e){return typeof FormData<"u"&&e instanceof FormData}function h5(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function f5(e){return typeof e=="string"}function d5(e){return typeof e=="number"}function uA(e){return e!==null&&typeof e=="object"}function Im(e){if(cc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function p5(e){return cc.call(e)==="[object Date]"}function m5(e){return cc.call(e)==="[object File]"}function g5(e){return cc.call(e)==="[object Blob]"}function cA(e){return cc.call(e)==="[object Function]"}function y5(e){return uA(e)&&cA(e.pipe)}function v5(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function _5(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function x5(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Ix(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Cx(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function V_(){var e={};function t(c,d){Im(e[d])&&Im(c)?e[d]=V_(e[d],c):Im(c)?e[d]=V_({},c):Cx(c)?e[d]=c.slice():e[d]=c}for(var i=0,a=arguments.length;i<a;i++)Ix(arguments[i],t);return e}function w5(e,t,i){return Ix(t,function(c,d){i&&typeof c=="function"?e[d]=a5(c,i):e[d]=c}),e}function b5(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Ho={isArray:Cx,isArrayBuffer:u5,isBuffer:l5,isFormData:c5,isArrayBufferView:h5,isString:f5,isNumber:d5,isObject:uA,isPlainObject:Im,isUndefined:$_,isDate:p5,isFile:m5,isBlob:g5,isFunction:cA,isStream:y5,isURLSearchParams:v5,isStandardBrowserEnv:x5,forEach:Ix,merge:V_,extend:w5,trim:_5,stripBOM:b5},Uc=Ho;function RS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var hA=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(Uc.isURLSearchParams(i))c=i.toString();else{var d=[];Uc.forEach(i,function(b,w){b===null||typeof b>"u"||(Uc.isArray(b)?w=w+"[]":b=[b],Uc.forEach(b,function(C){Uc.isDate(C)?C=C.toISOString():Uc.isObject(C)&&(C=JSON.stringify(C)),d.push(RS(w)+"="+RS(C))}))}),c=d.join("&")}if(c){var g=t.indexOf("#");g!==-1&&(t=t.slice(0,g)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},S5=Ho;function ry(){this.handlers=[]}ry.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};ry.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};ry.prototype.forEach=function(t){S5.forEach(this.handlers,function(a){a!==null&&t(a)})};var E5=ry,T5=Ho,C5=function(t,i){T5.forEach(t,function(c,d){d!==i&&d.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[d])})},fA=function(t,i,a,c,d){return t.config=i,a&&(t.code=a),t.request=c,t.response=d,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},B0,jS;function dA(){if(jS)return B0;jS=1;var e=fA;return B0=function(i,a,c,d,g){var l=new Error(i);return e(l,a,c,d,g)},B0}var N0,DS;function I5(){if(DS)return N0;DS=1;var e=dA();return N0=function(i,a,c){var d=c.config.validateStatus;!c.status||!d||d(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},N0}var U0,BS;function A5(){if(BS)return U0;BS=1;var e=Ho;return U0=e.isStandardBrowserEnv()?function(){return{write:function(a,c,d,g,l,b){var w=[];w.push(a+"="+encodeURIComponent(c)),e.isNumber(d)&&w.push("expires="+new Date(d).toGMTString()),e.isString(g)&&w.push("path="+g),e.isString(l)&&w.push("domain="+l),b===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),U0}var $0,NS;function P5(){return NS||(NS=1,$0=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),$0}var V0,US;function k5(){return US||(US=1,V0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),V0}var G0,$S;function M5(){if($S)return G0;$S=1;var e=P5(),t=k5();return G0=function(a,c){return a&&!e(c)?t(a,c):c},G0}var Z0,VS;function L5(){if(VS)return Z0;VS=1;var e=Ho,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Z0=function(a){var c={},d,g,l;return a&&e.forEach(a.split(`
`),function(w){if(l=w.indexOf(":"),d=e.trim(w.substr(0,l)).toLowerCase(),g=e.trim(w.substr(l+1)),d){if(c[d]&&t.indexOf(d)>=0)return;d==="set-cookie"?c[d]=(c[d]?c[d]:[]).concat([g]):c[d]=c[d]?c[d]+", "+g:g}}),c},Z0}var H0,GS;function z5(){if(GS)return H0;GS=1;var e=Ho;return H0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function d(g){var l=g;return i&&(a.setAttribute("href",l),l=a.href),a.setAttribute("href",l),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=d(window.location.href),function(l){var b=e.isString(l)?d(l):l;return b.protocol===c.protocol&&b.host===c.host}}():function(){return function(){return!0}}(),H0}var W0,ZS;function HS(){if(ZS)return W0;ZS=1;var e=Ho,t=I5(),i=A5(),a=hA,c=M5(),d=L5(),g=z5(),l=dA();return W0=function(w){return new Promise(function(C,k){var R=w.data,J=w.headers,Y=w.responseType;e.isFormData(R)&&delete J["Content-Type"];var de=new XMLHttpRequest;if(w.auth){var G=w.auth.username||"",$=w.auth.password?unescape(encodeURIComponent(w.auth.password)):"";J.Authorization="Basic "+btoa(G+":"+$)}var D=c(w.baseURL,w.url);de.open(w.method.toUpperCase(),a(D,w.params,w.paramsSerializer),!0),de.timeout=w.timeout;function ne(){if(de){var U="getAllResponseHeaders"in de?d(de.getAllResponseHeaders()):null,E=!Y||Y==="text"||Y==="json"?de.responseText:de.response,M={data:E,status:de.status,statusText:de.statusText,headers:U,config:w,request:de};t(C,k,M),de=null}}if("onloadend"in de?de.onloadend=ne:de.onreadystatechange=function(){!de||de.readyState!==4||de.status===0&&!(de.responseURL&&de.responseURL.indexOf("file:")===0)||setTimeout(ne)},de.onabort=function(){de&&(k(l("Request aborted",w,"ECONNABORTED",de)),de=null)},de.onerror=function(){k(l("Network Error",w,null,de)),de=null},de.ontimeout=function(){var E="timeout of "+w.timeout+"ms exceeded";w.timeoutErrorMessage&&(E=w.timeoutErrorMessage),k(l(E,w,w.transitional&&w.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",de)),de=null},e.isStandardBrowserEnv()){var Z=(w.withCredentials||g(D))&&w.xsrfCookieName?i.read(w.xsrfCookieName):void 0;Z&&(J[w.xsrfHeaderName]=Z)}"setRequestHeader"in de&&e.forEach(J,function(E,M){typeof R>"u"&&M.toLowerCase()==="content-type"?delete J[M]:de.setRequestHeader(M,E)}),e.isUndefined(w.withCredentials)||(de.withCredentials=!!w.withCredentials),Y&&Y!=="json"&&(de.responseType=w.responseType),typeof w.onDownloadProgress=="function"&&de.addEventListener("progress",w.onDownloadProgress),typeof w.onUploadProgress=="function"&&de.upload&&de.upload.addEventListener("progress",w.onUploadProgress),w.cancelToken&&w.cancelToken.promise.then(function(E){de&&(de.abort(),k(E),de=null)}),R||(R=null),de.send(R)})},W0}var Li=Ho,WS=C5,F5=fA,O5={"Content-Type":"application/x-www-form-urlencoded"};function XS(e,t){!Li.isUndefined(e)&&Li.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function R5(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=HS()),e}function j5(e,t,i){if(Li.isString(e))try{return(t||JSON.parse)(e),Li.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var iy={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:R5(),transformRequest:[function(t,i){return WS(i,"Accept"),WS(i,"Content-Type"),Li.isFormData(t)||Li.isArrayBuffer(t)||Li.isBuffer(t)||Li.isStream(t)||Li.isFile(t)||Li.isBlob(t)?t:Li.isArrayBufferView(t)?t.buffer:Li.isURLSearchParams(t)?(XS(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Li.isObject(t)||i&&i["Content-Type"]==="application/json"?(XS(i,"application/json"),j5(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,d=!a&&this.responseType==="json";if(d||c&&Li.isString(t)&&t.length)try{return JSON.parse(t)}catch(g){if(d)throw g.name==="SyntaxError"?F5(g,this,"E_JSON_PARSE"):g}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};iy.headers={common:{Accept:"application/json, text/plain, */*"}};Li.forEach(["delete","get","head"],function(t){iy.headers[t]={}});Li.forEach(["post","put","patch"],function(t){iy.headers[t]=Li.merge(O5)});var Ax=iy,D5=Ho,B5=Ax,N5=function(t,i,a){var c=this||B5;return D5.forEach(a,function(g){t=g.call(c,t,i)}),t},X0,qS;function pA(){return qS||(qS=1,X0=function(t){return!!(t&&t.__CANCEL__)}),X0}var KS=Ho,q0=N5,U5=pA(),$5=Ax;function K0(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var V5=function(t){K0(t),t.headers=t.headers||{},t.data=q0.call(t,t.data,t.headers,t.transformRequest),t.headers=KS.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),KS.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||$5.adapter;return i(t).then(function(c){return K0(t),c.data=q0.call(t,c.data,c.headers,t.transformResponse),c},function(c){return U5(c)||(K0(t),c&&c.response&&(c.response.data=q0.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Xi=Ho,mA=function(t,i){i=i||{};var a={},c=["url","method","data"],d=["headers","auth","proxy","params"],g=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function b(k,R){return Xi.isPlainObject(k)&&Xi.isPlainObject(R)?Xi.merge(k,R):Xi.isPlainObject(R)?Xi.merge({},R):Xi.isArray(R)?R.slice():R}function w(k){Xi.isUndefined(i[k])?Xi.isUndefined(t[k])||(a[k]=b(void 0,t[k])):a[k]=b(t[k],i[k])}Xi.forEach(c,function(R){Xi.isUndefined(i[R])||(a[R]=b(void 0,i[R]))}),Xi.forEach(d,w),Xi.forEach(g,function(R){Xi.isUndefined(i[R])?Xi.isUndefined(t[R])||(a[R]=b(void 0,t[R])):a[R]=b(void 0,i[R])}),Xi.forEach(l,function(R){R in i?a[R]=b(t[R],i[R]):R in t&&(a[R]=b(void 0,t[R]))});var I=c.concat(d).concat(g).concat(l),C=Object.keys(t).concat(Object.keys(i)).filter(function(R){return I.indexOf(R)===-1});return Xi.forEach(C,w),a};const G5="axios",Z5="0.21.4",H5="Promise based HTTP client for the browser and node.js",W5="index.js",X5={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},q5={type:"git",url:"https://github.com/axios/axios.git"},K5=["xhr","http","ajax","promise","node"],Y5="Matt Zabriskie",J5="MIT",Q5={url:"https://github.com/axios/axios/issues"},eR="https://axios-http.com",tR={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},nR={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},rR="dist/axios.min.js",iR="dist/axios.min.js",oR="./index.d.ts",sR={"follow-redirects":"^1.14.0"},aR=[{path:"./dist/axios.min.js",threshold:"5kB"}],lR={name:G5,version:Z5,description:H5,main:W5,scripts:X5,repository:q5,keywords:K5,author:Y5,license:J5,bugs:Q5,homepage:eR,devDependencies:tR,browser:nR,jsdelivr:rR,unpkg:iR,typings:oR,dependencies:sR,bundlesize:aR};var gA=lR,Px={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Px[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var YS={},uR=gA.version.split(".");function yA(e,t){for(var i=t?t.split("."):uR,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}Px.transitional=function(t,i,a){var c=i&&yA(i);function d(g,l){return"[Axios v"+gA.version+"] Transitional option '"+g+"'"+l+(a?". "+a:"")}return function(g,l,b){if(t===!1)throw new Error(d(l," has been removed in "+i));return c&&!YS[l]&&(YS[l]=!0,console.warn(d(l," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(g,l,b):!0}};function cR(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var d=a[c],g=t[d];if(g){var l=e[d],b=l===void 0||g(l,d,e);if(b!==!0)throw new TypeError("option "+d+" must be "+b);continue}if(i!==!0)throw Error("Unknown option "+d)}}var hR={isOlderVersion:yA,assertOptions:cR,validators:Px},vA=Ho,fR=hA,JS=E5,QS=V5,oy=mA,_A=hR,$c=_A.validators;function Xd(e){this.defaults=e,this.interceptors={request:new JS,response:new JS}}Xd.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=oy(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&_A.assertOptions(i,{silentJSONParsing:$c.transitional($c.boolean,"1.0.0"),forcedJSONParsing:$c.transitional($c.boolean,"1.0.0"),clarifyTimeoutError:$c.transitional($c.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(c=c&&k.synchronous,a.unshift(k.fulfilled,k.rejected))});var d=[];this.interceptors.response.forEach(function(k){d.push(k.fulfilled,k.rejected)});var g;if(!c){var l=[QS,void 0];for(Array.prototype.unshift.apply(l,a),l=l.concat(d),g=Promise.resolve(t);l.length;)g=g.then(l.shift(),l.shift());return g}for(var b=t;a.length;){var w=a.shift(),I=a.shift();try{b=w(b)}catch(C){I(C);break}}try{g=QS(b)}catch(C){return Promise.reject(C)}for(;d.length;)g=g.then(d.shift(),d.shift());return g};Xd.prototype.getUri=function(t){return t=oy(this.defaults,t),fR(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};vA.forEach(["delete","get","head","options"],function(t){Xd.prototype[t]=function(i,a){return this.request(oy(a||{},{method:t,url:i,data:(a||{}).data}))}});vA.forEach(["post","put","patch"],function(t){Xd.prototype[t]=function(i,a,c){return this.request(oy(c||{},{method:t,url:i,data:a}))}});var dR=Xd,Y0,eE;function xA(){if(eE)return Y0;eE=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,Y0=e,Y0}var J0,tE;function pR(){if(tE)return J0;tE=1;var e=xA();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(g){a=g});var c=this;i(function(g){c.reason||(c.reason=new e(g),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(g){a=g});return{token:c,cancel:a}},J0=t,J0}var Q0,nE;function mR(){return nE||(nE=1,Q0=function(t){return function(a){return t.apply(null,a)}}),Q0}var ev,rE;function gR(){return rE||(rE=1,ev=function(t){return typeof t=="object"&&t.isAxiosError===!0}),ev}var iE=Ho,yR=lA,Am=dR,vR=mA,_R=Ax;function wA(e){var t=new Am(e),i=yR(Am.prototype.request,t);return iE.extend(i,Am.prototype,t),iE.extend(i,t),i}var Vs=wA(_R);Vs.Axios=Am;Vs.create=function(t){return wA(vR(Vs.defaults,t))};Vs.Cancel=xA();Vs.CancelToken=pR();Vs.isCancel=pA();Vs.all=function(t){return Promise.all(t)};Vs.spread=mR();Vs.isAxiosError=gR();Tx.exports=Vs;Tx.exports.default=Vs;var xR=Tx.exports,wR=xR;const bR={},SR=Object.freeze(Object.defineProperty({__proto__:null,default:bR},Symbol.toStringTag,{value:"Module"})),ER=G_(SR);var sy={},TR=mh;function mh(e,t){this.x=e,this.y=t}mh.prototype={clone:function(){return new mh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),d=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};mh.convert=function(e){return e instanceof mh?e:Array.isArray(e)?new mh(e[0],e[1]):e};var CR=TR,bA=Ah;function Ah(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(IR,this,t)}function IR(e,t,i){e==1?t.id=i.readVarint():e==2?AR(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function AR(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}Ah.types=["Unknown","Point","LineString","Polygon"];Ah.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,d=0,g=[],l;e.pos<t;){if(a<=0){var b=e.readVarint();i=b&7,a=b>>3}if(a--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),i===1&&(l&&g.push(l),l=[]),l.push(new CR(c,d));else if(i===7)l&&l.push(l[0].clone());else throw new Error("unknown command "+i)}return l&&g.push(l),g};Ah.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,d=0,g=1/0,l=-1/0,b=1/0,w=-1/0;e.pos<t;){if(a<=0){var I=e.readVarint();i=I&7,a=I>>3}if(a--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),c<g&&(g=c),c>l&&(l=c),d<b&&(b=d),d>w&&(w=d);else if(i!==7)throw new Error("unknown command "+i)}return[g,b,l,w]};Ah.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,d=this.extent*t,g=this.loadGeometry(),l=Ah.types[this.type],b,w;function I(R){for(var J=0;J<R.length;J++){var Y=R[J],de=180-(Y.y+d)*360/a;R[J]=[(Y.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(de*Math.PI/180))-90]}}switch(this.type){case 1:var C=[];for(b=0;b<g.length;b++)C[b]=g[b][0];g=C,I(g);break;case 2:for(b=0;b<g.length;b++)I(g[b]);break;case 3:for(g=PR(g),b=0;b<g.length;b++)for(w=0;w<g[b].length;w++)I(g[b][w]);break}g.length===1?g=g[0]:l="Multi"+l;var k={type:"Feature",geometry:{type:l,coordinates:g},properties:this.properties};return"id"in this&&(k.id=this.id),k};function PR(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,d=0;d<t;d++){var g=kR(e[d]);g!==0&&(c===void 0&&(c=g<0),c===g<0?(a&&i.push(a),a=[e[d]]):a.push(e[d]))}return a&&i.push(a),i}function kR(e){for(var t=0,i=0,a=e.length,c=a-1,d,g;i<a;c=i++)d=e[i],g=e[c],t+=(g.x-d.x)*(d.y+g.y);return t}var MR=bA,SA=EA;function EA(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(LR,this,t),this.length=this._features.length}function LR(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(zR(i))}function zR(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}EA.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new MR(this._pbf,t,this.extent,this._keys,this._values)};var FR=SA,OR=RR;function RR(e,t){this.layers=e.readFields(jR,{},t)}function jR(e,t,i){if(e===3){var a=new FR(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}sy.VectorTile=OR;sy.VectorTileFeature=bA;sy.VectorTileLayer=SA;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=CO,i=$O,a=VO,c=wR,d=ER,g=sy;function l($){return $&&typeof $=="object"&&"default"in $?$:{default:$}}var b=l(a),w=l(c),I=l(d),C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Nl<"u"?Nl:typeof self<"u"?self:{};function k($){var D={exports:{}};return $(D,D.exports),D.exports}var R=k(function($,D){(function(Z,U){$.exports=U(w.default)})(C,function(ne){return function(Z){var U={};function E(M){if(U[M])return U[M].exports;var H=U[M]={i:M,l:!1,exports:{}};return Z[M].call(H.exports,H,H.exports,E),H.l=!0,H.exports}return E.m=Z,E.c=U,E.d=function(M,H,q){E.o(M,H)||Object.defineProperty(M,H,{enumerable:!0,get:q})},E.r=function(M){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})},E.t=function(M,H){if(H&1&&(M=E(M)),H&8||H&4&&typeof M=="object"&&M&&M.__esModule)return M;var q=Object.create(null);if(E.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:M}),H&2&&typeof M!="string")for(var ee in M)E.d(q,ee,(function(ve){return M[ve]}).bind(null,ee));return q},E.n=function(M){var H=M&&M.__esModule?function(){return M.default}:function(){return M};return E.d(H,"a",H),H},E.o=function(M,H){return Object.prototype.hasOwnProperty.call(M,H)},E.p="",E(E.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(Z,U,E){E.r(U),E.d(U,"CacheControl",function(){return Se}),E.d(U,"parse",function(){return $e}),E.d(U,"format",function(){return Pe}),E("./node_modules/core-js/modules/es6.array.from.js"),E("./node_modules/core-js/modules/es6.function.name.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/web.dom.iterable.js"),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.regexp.split.js"),E("./node_modules/core-js/modules/es6.number.is-finite.js");function M(ze,Xe){return xe(ze)||ve(ze,Xe)||q(ze,Xe)||H()}function H(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(ze,Xe){if(ze){if(typeof ze=="string")return ee(ze,Xe);var Ze=Object.prototype.toString.call(ze).slice(8,-1);if(Ze==="Object"&&ze.constructor&&(Ze=ze.constructor.name),Ze==="Map"||Ze==="Set")return Array.from(ze);if(Ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ze))return ee(ze,Xe)}}function ee(ze,Xe){(Xe==null||Xe>ze.length)&&(Xe=ze.length);for(var Ze=0,nt=new Array(Xe);Ze<Xe;Ze++)nt[Ze]=ze[Ze];return nt}function ve(ze,Xe){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(ze)))){var Ze=[],nt=!0,ct=!1,vt=void 0;try{for(var It=ze[Symbol.iterator](),ft;!(nt=(ft=It.next()).done)&&(Ze.push(ft.value),!(Xe&&Ze.length===Xe));nt=!0);}catch(St){ct=!0,vt=St}finally{try{!nt&&It.return!=null&&It.return()}finally{if(ct)throw vt}}return Ze}}function xe(ze){if(Array.isArray(ze))return ze}function be(ze,Xe){if(!(ze instanceof Xe))throw new TypeError("Cannot call a class as a function")}function te(ze,Xe){for(var Ze=0;Ze<Xe.length;Ze++){var nt=Xe[Ze];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(ze,nt.key,nt)}}function ue(ze,Xe,Ze){return Xe&&te(ze.prototype,Xe),Ze&&te(ze,Ze),ze}var re=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,ie={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function ye(ze){return ze===null}function Te(ze){if(!ze)return null;var Xe=parseInt(ze,10);return!Number.isFinite(Xe)||Xe<0?null:Xe}var Se=function(){function ze(){be(this,ze),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ue(ze,[{key:"parse",value:function(Ze){if(!Ze||Ze.length===0)return this;var nt={},ct=Ze.match(re)||[];return Array.prototype.forEach.call(ct,function(vt){var It=vt.split("=",2),ft=M(It,1),St=ft[0],Gt=null;It.length>1&&(Gt=It[1].trim()),nt[St.toLowerCase()]=Gt}),this.maxAge=Te(nt[ie.maxAge]),this.sharedMaxAge=Te(nt[ie.sharedMaxAge]),this.maxStale=ye(nt[ie.maxStale]),this.maxStaleDuration=Te(nt[ie.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=Te(nt[ie.minFresh]),this.immutable=ye(nt[ie.immutable]),this.mustRevalidate=ye(nt[ie.mustRevalidate]),this.noCache=ye(nt[ie.noCache]),this.noStore=ye(nt[ie.noStore]),this.noTransform=ye(nt[ie.noTransform]),this.onlyIfCached=ye(nt[ie.onlyIfCached]),this.private=ye(nt[ie.private]),this.proxyRevalidate=ye(nt[ie.proxyRevalidate]),this.public=ye(nt[ie.public]),this}},{key:"format",value:function(){var Ze=[];return this.maxAge&&Ze.push("".concat(ie.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ze.push("".concat(ie.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ze.push("".concat(ie.maxStale,"=").concat(this.maxStaleDuration)):Ze.push(ie.maxStale)),this.minFresh&&Ze.push("".concat(ie.minFresh,"=").concat(this.minFresh)),this.immutable&&Ze.push(ie.immutable),this.mustRevalidate&&Ze.push(ie.mustRevalidate),this.noCache&&Ze.push(ie.noCache),this.noStore&&Ze.push(ie.noStore),this.noTransform&&Ze.push(ie.noTransform),this.onlyIfCached&&Ze.push(ie.onlyIfCached),this.private&&Ze.push(ie.private),this.proxyRevalidate&&Ze.push(ie.proxyRevalidate),this.public&&Ze.push(ie.public),Ze.join(", ")}}]),ze}();function $e(ze){var Xe=new Se;return Xe.parse(ze)}function Pe(ze){return ze instanceof Se?ze.format():Se.prototype.format.call(ze)}U.default={CacheControl:Se,parse:$e,format:Pe}},"./node_modules/charenc/charenc.js":function(Z,U){var E={utf8:{stringToBytes:function(M){return E.bin.stringToBytes(unescape(encodeURIComponent(M)))},bytesToString:function(M){return decodeURIComponent(escape(E.bin.bytesToString(M)))}},bin:{stringToBytes:function(M){for(var H=[],q=0;q<M.length;q++)H.push(M.charCodeAt(q)&255);return H},bytesToString:function(M){for(var H=[],q=0;q<M.length;q++)H.push(String.fromCharCode(M[q]));return H.join("")}}};Z.exports=E},"./node_modules/core-js/modules/_a-function.js":function(Z,U){Z.exports=function(E){if(typeof E!="function")throw TypeError(E+" is not a function!");return E}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_wks.js")("unscopables"),H=Array.prototype;H[M]==null&&E("./node_modules/core-js/modules/_hide.js")(H,M,{}),Z.exports=function(q){H[M][q]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_string-at.js")(!0);Z.exports=function(H,q,ee){return q+(ee?M(H,q).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_is-object.js");Z.exports=function(H){if(!M(H))throw TypeError(H+" is not an object!");return H}},"./node_modules/core-js/modules/_array-includes.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_to-iobject.js"),H=E("./node_modules/core-js/modules/_to-length.js"),q=E("./node_modules/core-js/modules/_to-absolute-index.js");Z.exports=function(ee){return function(ve,xe,be){var te=M(ve),ue=H(te.length),re=q(be,ue),ie;if(ee&&xe!=xe){for(;ue>re;)if(ie=te[re++],ie!=ie)return!0}else for(;ue>re;re++)if((ee||re in te)&&te[re]===xe)return ee||re||0;return!ee&&-1}}},"./node_modules/core-js/modules/_bind.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_a-function.js"),H=E("./node_modules/core-js/modules/_is-object.js"),q=E("./node_modules/core-js/modules/_invoke.js"),ee=[].slice,ve={},xe=function(be,te,ue){if(!(te in ve)){for(var re=[],ie=0;ie<te;ie++)re[ie]="a["+ie+"]";ve[te]=Function("F,a","return new F("+re.join(",")+")")}return ve[te](be,ue)};Z.exports=Function.bind||function(te){var ue=M(this),re=ee.call(arguments,1),ie=function(){var ye=re.concat(ee.call(arguments));return this instanceof ie?xe(ue,ye.length,ye):q(ue,ye,te)};return H(ue.prototype)&&(ie.prototype=ue.prototype),ie}},"./node_modules/core-js/modules/_classof.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_cof.js"),H=E("./node_modules/core-js/modules/_wks.js")("toStringTag"),q=M(function(){return arguments}())=="Arguments",ee=function(ve,xe){try{return ve[xe]}catch{}};Z.exports=function(ve){var xe,be,te;return ve===void 0?"Undefined":ve===null?"Null":typeof(be=ee(xe=Object(ve),H))=="string"?be:q?M(xe):(te=M(xe))=="Object"&&typeof xe.callee=="function"?"Arguments":te}},"./node_modules/core-js/modules/_cof.js":function(Z,U){var E={}.toString;Z.exports=function(M){return E.call(M).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(Z,U){var E=Z.exports={version:"2.6.12"};typeof __e=="number"&&(__e=E)},"./node_modules/core-js/modules/_create-property.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_object-dp.js"),H=E("./node_modules/core-js/modules/_property-desc.js");Z.exports=function(q,ee,ve){ee in q?M.f(q,ee,H(0,ve)):q[ee]=ve}},"./node_modules/core-js/modules/_ctx.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_a-function.js");Z.exports=function(H,q,ee){if(M(H),q===void 0)return H;switch(ee){case 1:return function(ve){return H.call(q,ve)};case 2:return function(ve,xe){return H.call(q,ve,xe)};case 3:return function(ve,xe,be){return H.call(q,ve,xe,be)}}return function(){return H.apply(q,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(Z,U){Z.exports=function(E){if(E==null)throw TypeError("Can't call method on  "+E);return E}},"./node_modules/core-js/modules/_descriptors.js":function(Z,U,E){Z.exports=!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_is-object.js"),H=E("./node_modules/core-js/modules/_global.js").document,q=M(H)&&M(H.createElement);Z.exports=function(ee){return q?H.createElement(ee):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(Z,U){Z.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_object-keys.js"),H=E("./node_modules/core-js/modules/_object-gops.js"),q=E("./node_modules/core-js/modules/_object-pie.js");Z.exports=function(ee){var ve=M(ee),xe=H.f;if(xe)for(var be=xe(ee),te=q.f,ue=0,re;be.length>ue;)te.call(ee,re=be[ue++])&&ve.push(re);return ve}},"./node_modules/core-js/modules/_export.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_global.js"),H=E("./node_modules/core-js/modules/_core.js"),q=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),ve=E("./node_modules/core-js/modules/_ctx.js"),xe="prototype",be=function(te,ue,re){var ie=te&be.F,ye=te&be.G,Te=te&be.S,Se=te&be.P,$e=te&be.B,Pe=ye?M:Te?M[ue]||(M[ue]={}):(M[ue]||{})[xe],ze=ye?H:H[ue]||(H[ue]={}),Xe=ze[xe]||(ze[xe]={}),Ze,nt,ct,vt;ye&&(re=ue);for(Ze in re)nt=!ie&&Pe&&Pe[Ze]!==void 0,ct=(nt?Pe:re)[Ze],vt=$e&&nt?ve(ct,M):Se&&typeof ct=="function"?ve(Function.call,ct):ct,Pe&&ee(Pe,Ze,ct,te&be.U),ze[Ze]!=ct&&q(ze,Ze,vt),Se&&Xe[Ze]!=ct&&(Xe[Ze]=ct)};M.core=H,be.F=1,be.G=2,be.S=4,be.P=8,be.B=16,be.W=32,be.U=64,be.R=128,Z.exports=be},"./node_modules/core-js/modules/_fails-is-regexp.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_wks.js")("match");Z.exports=function(H){var q=/./;try{"/./"[H](q)}catch{try{return q[M]=!1,!"/./"[H](q)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(Z,U){Z.exports=function(E){try{return!!E()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(Z,U,E){E("./node_modules/core-js/modules/es6.regexp.exec.js");var M=E("./node_modules/core-js/modules/_redefine.js"),H=E("./node_modules/core-js/modules/_hide.js"),q=E("./node_modules/core-js/modules/_fails.js"),ee=E("./node_modules/core-js/modules/_defined.js"),ve=E("./node_modules/core-js/modules/_wks.js"),xe=E("./node_modules/core-js/modules/_regexp-exec.js"),be=ve("species"),te=!q(function(){var re=/./;return re.exec=function(){var ie=[];return ie.groups={a:"7"},ie},"".replace(re,"$<a>")!=="7"}),ue=function(){var re=/(?:)/,ie=re.exec;re.exec=function(){return ie.apply(this,arguments)};var ye="ab".split(re);return ye.length===2&&ye[0]==="a"&&ye[1]==="b"}();Z.exports=function(re,ie,ye){var Te=ve(re),Se=!q(function(){var nt={};return nt[Te]=function(){return 7},""[re](nt)!=7}),$e=Se?!q(function(){var nt=!1,ct=/a/;return ct.exec=function(){return nt=!0,null},re==="split"&&(ct.constructor={},ct.constructor[be]=function(){return ct}),ct[Te](""),!nt}):void 0;if(!Se||!$e||re==="replace"&&!te||re==="split"&&!ue){var Pe=/./[Te],ze=ye(ee,Te,""[re],function(ct,vt,It,ft,St){return vt.exec===xe?Se&&!St?{done:!0,value:Pe.call(vt,It,ft)}:{done:!0,value:ct.call(It,vt,ft)}:{done:!1}}),Xe=ze[0],Ze=ze[1];M(String.prototype,re,Xe),H(RegExp.prototype,Te,ie==2?function(nt,ct){return Ze.call(nt,this,ct)}:function(nt){return Ze.call(nt,this)})}}},"./node_modules/core-js/modules/_flags.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_an-object.js");Z.exports=function(){var H=M(this),q="";return H.global&&(q+="g"),H.ignoreCase&&(q+="i"),H.multiline&&(q+="m"),H.unicode&&(q+="u"),H.sticky&&(q+="y"),q}},"./node_modules/core-js/modules/_function-to-string.js":function(Z,U,E){Z.exports=E("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(Z,U){var E=Z.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=E)},"./node_modules/core-js/modules/_has.js":function(Z,U){var E={}.hasOwnProperty;Z.exports=function(M,H){return E.call(M,H)}},"./node_modules/core-js/modules/_hide.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_object-dp.js"),H=E("./node_modules/core-js/modules/_property-desc.js");Z.exports=E("./node_modules/core-js/modules/_descriptors.js")?function(q,ee,ve){return M.f(q,ee,H(1,ve))}:function(q,ee,ve){return q[ee]=ve,q}},"./node_modules/core-js/modules/_html.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_global.js").document;Z.exports=M&&M.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(Z,U,E){Z.exports=!E("./node_modules/core-js/modules/_descriptors.js")&&!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(E("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(Z,U){Z.exports=function(E,M,H){var q=H===void 0;switch(M.length){case 0:return q?E():E.call(H);case 1:return q?E(M[0]):E.call(H,M[0]);case 2:return q?E(M[0],M[1]):E.call(H,M[0],M[1]);case 3:return q?E(M[0],M[1],M[2]):E.call(H,M[0],M[1],M[2]);case 4:return q?E(M[0],M[1],M[2],M[3]):E.call(H,M[0],M[1],M[2],M[3])}return E.apply(H,M)}},"./node_modules/core-js/modules/_iobject.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_cof.js");Z.exports=Object("z").propertyIsEnumerable(0)?Object:function(H){return M(H)=="String"?H.split(""):Object(H)}},"./node_modules/core-js/modules/_is-array-iter.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_iterators.js"),H=E("./node_modules/core-js/modules/_wks.js")("iterator"),q=Array.prototype;Z.exports=function(ee){return ee!==void 0&&(M.Array===ee||q[H]===ee)}},"./node_modules/core-js/modules/_is-array.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_cof.js");Z.exports=Array.isArray||function(q){return M(q)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(Z,U){Z.exports=function(E){return typeof E=="object"?E!==null:typeof E=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_is-object.js"),H=E("./node_modules/core-js/modules/_cof.js"),q=E("./node_modules/core-js/modules/_wks.js")("match");Z.exports=function(ee){var ve;return M(ee)&&((ve=ee[q])!==void 0?!!ve:H(ee)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_an-object.js");Z.exports=function(H,q,ee,ve){try{return ve?q(M(ee)[0],ee[1]):q(ee)}catch(be){var xe=H.return;throw xe!==void 0&&M(xe.call(H)),be}}},"./node_modules/core-js/modules/_iter-create.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_object-create.js"),H=E("./node_modules/core-js/modules/_property-desc.js"),q=E("./node_modules/core-js/modules/_set-to-string-tag.js"),ee={};E("./node_modules/core-js/modules/_hide.js")(ee,E("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),Z.exports=function(ve,xe,be){ve.prototype=M(ee,{next:H(1,be)}),q(ve,xe+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_library.js"),H=E("./node_modules/core-js/modules/_export.js"),q=E("./node_modules/core-js/modules/_redefine.js"),ee=E("./node_modules/core-js/modules/_hide.js"),ve=E("./node_modules/core-js/modules/_iterators.js"),xe=E("./node_modules/core-js/modules/_iter-create.js"),be=E("./node_modules/core-js/modules/_set-to-string-tag.js"),te=E("./node_modules/core-js/modules/_object-gpo.js"),ue=E("./node_modules/core-js/modules/_wks.js")("iterator"),re=!([].keys&&"next"in[].keys()),ie="@@iterator",ye="keys",Te="values",Se=function(){return this};Z.exports=function($e,Pe,ze,Xe,Ze,nt,ct){xe(ze,Pe,Xe);var vt=function(j){if(!re&&j in Gt)return Gt[j];switch(j){case ye:return function(){return new ze(this,j)};case Te:return function(){return new ze(this,j)}}return function(){return new ze(this,j)}},It=Pe+" Iterator",ft=Ze==Te,St=!1,Gt=$e.prototype,Ut=Gt[ue]||Gt[ie]||Ze&&Gt[Ze],cn=Ut||vt(Ze),xn=Ze?ft?vt("entries"):cn:void 0,yn=Pe=="Array"&&Gt.entries||Ut,sn,gn,se;if(yn&&(se=te(yn.call(new $e)),se!==Object.prototype&&se.next&&(be(se,It,!0),!M&&typeof se[ue]!="function"&&ee(se,ue,Se))),ft&&Ut&&Ut.name!==Te&&(St=!0,cn=function(){return Ut.call(this)}),(!M||ct)&&(re||St||!Gt[ue])&&ee(Gt,ue,cn),ve[Pe]=cn,ve[It]=Se,Ze)if(sn={values:ft?cn:vt(Te),keys:nt?cn:vt(ye),entries:xn},ct)for(gn in sn)gn in Gt||q(Gt,gn,sn[gn]);else H(H.P+H.F*(re||St),Pe,sn);return sn}},"./node_modules/core-js/modules/_iter-detect.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_wks.js")("iterator"),H=!1;try{var q=[7][M]();q.return=function(){H=!0},Array.from(q,function(){throw 2})}catch{}Z.exports=function(ee,ve){if(!ve&&!H)return!1;var xe=!1;try{var be=[7],te=be[M]();te.next=function(){return{done:xe=!0}},be[M]=function(){return te},ee(be)}catch{}return xe}},"./node_modules/core-js/modules/_iter-step.js":function(Z,U){Z.exports=function(E,M){return{value:M,done:!!E}}},"./node_modules/core-js/modules/_iterators.js":function(Z,U){Z.exports={}},"./node_modules/core-js/modules/_library.js":function(Z,U){Z.exports=!1},"./node_modules/core-js/modules/_meta.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_uid.js")("meta"),H=E("./node_modules/core-js/modules/_is-object.js"),q=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_object-dp.js").f,ve=0,xe=Object.isExtensible||function(){return!0},be=!E("./node_modules/core-js/modules/_fails.js")(function(){return xe(Object.preventExtensions({}))}),te=function(Te){ee(Te,M,{value:{i:"O"+ ++ve,w:{}}})},ue=function(Te,Se){if(!H(Te))return typeof Te=="symbol"?Te:(typeof Te=="string"?"S":"P")+Te;if(!q(Te,M)){if(!xe(Te))return"F";if(!Se)return"E";te(Te)}return Te[M].i},re=function(Te,Se){if(!q(Te,M)){if(!xe(Te))return!0;if(!Se)return!1;te(Te)}return Te[M].w},ie=function(Te){return be&&ye.NEED&&xe(Te)&&!q(Te,M)&&te(Te),Te},ye=Z.exports={KEY:M,NEED:!1,fastKey:ue,getWeak:re,onFreeze:ie}},"./node_modules/core-js/modules/_object-create.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_an-object.js"),H=E("./node_modules/core-js/modules/_object-dps.js"),q=E("./node_modules/core-js/modules/_enum-bug-keys.js"),ee=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ve=function(){},xe="prototype",be=function(){var te=E("./node_modules/core-js/modules/_dom-create.js")("iframe"),ue=q.length,re="<",ie=">",ye;for(te.style.display="none",E("./node_modules/core-js/modules/_html.js").appendChild(te),te.src="javascript:",ye=te.contentWindow.document,ye.open(),ye.write(re+"script"+ie+"document.F=Object"+re+"/script"+ie),ye.close(),be=ye.F;ue--;)delete be[xe][q[ue]];return be()};Z.exports=Object.create||function(ue,re){var ie;return ue!==null?(ve[xe]=M(ue),ie=new ve,ve[xe]=null,ie[ee]=ue):ie=be(),re===void 0?ie:H(ie,re)}},"./node_modules/core-js/modules/_object-dp.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_an-object.js"),H=E("./node_modules/core-js/modules/_ie8-dom-define.js"),q=E("./node_modules/core-js/modules/_to-primitive.js"),ee=Object.defineProperty;U.f=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(xe,be,te){if(M(xe),be=q(be,!0),M(te),H)try{return ee(xe,be,te)}catch{}if("get"in te||"set"in te)throw TypeError("Accessors not supported!");return"value"in te&&(xe[be]=te.value),xe}},"./node_modules/core-js/modules/_object-dps.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_object-dp.js"),H=E("./node_modules/core-js/modules/_an-object.js"),q=E("./node_modules/core-js/modules/_object-keys.js");Z.exports=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ve,xe){H(ve);for(var be=q(xe),te=be.length,ue=0,re;te>ue;)M.f(ve,re=be[ue++],xe[re]);return ve}},"./node_modules/core-js/modules/_object-gopd.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_object-pie.js"),H=E("./node_modules/core-js/modules/_property-desc.js"),q=E("./node_modules/core-js/modules/_to-iobject.js"),ee=E("./node_modules/core-js/modules/_to-primitive.js"),ve=E("./node_modules/core-js/modules/_has.js"),xe=E("./node_modules/core-js/modules/_ie8-dom-define.js"),be=Object.getOwnPropertyDescriptor;U.f=E("./node_modules/core-js/modules/_descriptors.js")?be:function(ue,re){if(ue=q(ue),re=ee(re,!0),xe)try{return be(ue,re)}catch{}if(ve(ue,re))return H(!M.f.call(ue,re),ue[re])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_to-iobject.js"),H=E("./node_modules/core-js/modules/_object-gopn.js").f,q={}.toString,ee=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ve=function(xe){try{return H(xe)}catch{return ee.slice()}};Z.exports.f=function(be){return ee&&q.call(be)=="[object Window]"?ve(be):H(M(be))}},"./node_modules/core-js/modules/_object-gopn.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_object-keys-internal.js"),H=E("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");U.f=Object.getOwnPropertyNames||function(ee){return M(ee,H)}},"./node_modules/core-js/modules/_object-gops.js":function(Z,U){U.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_has.js"),H=E("./node_modules/core-js/modules/_to-object.js"),q=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ee=Object.prototype;Z.exports=Object.getPrototypeOf||function(ve){return ve=H(ve),M(ve,q)?ve[q]:typeof ve.constructor=="function"&&ve instanceof ve.constructor?ve.constructor.prototype:ve instanceof Object?ee:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_has.js"),H=E("./node_modules/core-js/modules/_to-iobject.js"),q=E("./node_modules/core-js/modules/_array-includes.js")(!1),ee=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");Z.exports=function(ve,xe){var be=H(ve),te=0,ue=[],re;for(re in be)re!=ee&&M(be,re)&&ue.push(re);for(;xe.length>te;)M(be,re=xe[te++])&&(~q(ue,re)||ue.push(re));return ue}},"./node_modules/core-js/modules/_object-keys.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_object-keys-internal.js"),H=E("./node_modules/core-js/modules/_enum-bug-keys.js");Z.exports=Object.keys||function(ee){return M(ee,H)}},"./node_modules/core-js/modules/_object-pie.js":function(Z,U){U.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_object-gopn.js"),H=E("./node_modules/core-js/modules/_object-gops.js"),q=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_global.js").Reflect;Z.exports=ee&&ee.ownKeys||function(xe){var be=M.f(q(xe)),te=H.f;return te?be.concat(te(xe)):be}},"./node_modules/core-js/modules/_property-desc.js":function(Z,U){Z.exports=function(E,M){return{enumerable:!(E&1),configurable:!(E&2),writable:!(E&4),value:M}}},"./node_modules/core-js/modules/_redefine.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_global.js"),H=E("./node_modules/core-js/modules/_hide.js"),q=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_uid.js")("src"),ve=E("./node_modules/core-js/modules/_function-to-string.js"),xe="toString",be=(""+ve).split(xe);E("./node_modules/core-js/modules/_core.js").inspectSource=function(te){return ve.call(te)},(Z.exports=function(te,ue,re,ie){var ye=typeof re=="function";ye&&(q(re,"name")||H(re,"name",ue)),te[ue]!==re&&(ye&&(q(re,ee)||H(re,ee,te[ue]?""+te[ue]:be.join(String(ue)))),te===M?te[ue]=re:ie?te[ue]?te[ue]=re:H(te,ue,re):(delete te[ue],H(te,ue,re)))})(Function.prototype,xe,function(){return typeof this=="function"&&this[ee]||ve.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_classof.js"),H=RegExp.prototype.exec;Z.exports=function(q,ee){var ve=q.exec;if(typeof ve=="function"){var xe=ve.call(q,ee);if(typeof xe!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return xe}if(M(q)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return H.call(q,ee)}},"./node_modules/core-js/modules/_regexp-exec.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_flags.js"),H=RegExp.prototype.exec,q=String.prototype.replace,ee=H,ve="lastIndex",xe=function(){var ue=/a/,re=/b*/g;return H.call(ue,"a"),H.call(re,"a"),ue[ve]!==0||re[ve]!==0}(),be=/()??/.exec("")[1]!==void 0,te=xe||be;te&&(ee=function(re){var ie=this,ye,Te,Se,$e;return be&&(Te=new RegExp("^"+ie.source+"$(?!\\s)",M.call(ie))),xe&&(ye=ie[ve]),Se=H.call(ie,re),xe&&Se&&(ie[ve]=ie.global?Se.index+Se[0].length:ye),be&&Se&&Se.length>1&&q.call(Se[0],Te,function(){for($e=1;$e<arguments.length-2;$e++)arguments[$e]===void 0&&(Se[$e]=void 0)}),Se}),Z.exports=ee},"./node_modules/core-js/modules/_set-to-string-tag.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_object-dp.js").f,H=E("./node_modules/core-js/modules/_has.js"),q=E("./node_modules/core-js/modules/_wks.js")("toStringTag");Z.exports=function(ee,ve,xe){ee&&!H(ee=xe?ee:ee.prototype,q)&&M(ee,q,{configurable:!0,value:ve})}},"./node_modules/core-js/modules/_shared-key.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_shared.js")("keys"),H=E("./node_modules/core-js/modules/_uid.js");Z.exports=function(q){return M[q]||(M[q]=H(q))}},"./node_modules/core-js/modules/_shared.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_core.js"),H=E("./node_modules/core-js/modules/_global.js"),q="__core-js_shared__",ee=H[q]||(H[q]={});(Z.exports=function(ve,xe){return ee[ve]||(ee[ve]=xe!==void 0?xe:{})})("versions",[]).push({version:M.version,mode:E("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_an-object.js"),H=E("./node_modules/core-js/modules/_a-function.js"),q=E("./node_modules/core-js/modules/_wks.js")("species");Z.exports=function(ee,ve){var xe=M(ee).constructor,be;return xe===void 0||(be=M(xe)[q])==null?ve:H(be)}},"./node_modules/core-js/modules/_string-at.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_to-integer.js"),H=E("./node_modules/core-js/modules/_defined.js");Z.exports=function(q){return function(ee,ve){var xe=String(H(ee)),be=M(ve),te=xe.length,ue,re;return be<0||be>=te?q?"":void 0:(ue=xe.charCodeAt(be),ue<55296||ue>56319||be+1===te||(re=xe.charCodeAt(be+1))<56320||re>57343?q?xe.charAt(be):ue:q?xe.slice(be,be+2):(ue-55296<<10)+(re-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_is-regexp.js"),H=E("./node_modules/core-js/modules/_defined.js");Z.exports=function(q,ee,ve){if(M(ee))throw TypeError("String#"+ve+" doesn't accept regex!");return String(H(q))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_to-integer.js"),H=Math.max,q=Math.min;Z.exports=function(ee,ve){return ee=M(ee),ee<0?H(ee+ve,0):q(ee,ve)}},"./node_modules/core-js/modules/_to-integer.js":function(Z,U){var E=Math.ceil,M=Math.floor;Z.exports=function(H){return isNaN(H=+H)?0:(H>0?M:E)(H)}},"./node_modules/core-js/modules/_to-iobject.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_iobject.js"),H=E("./node_modules/core-js/modules/_defined.js");Z.exports=function(q){return M(H(q))}},"./node_modules/core-js/modules/_to-length.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_to-integer.js"),H=Math.min;Z.exports=function(q){return q>0?H(M(q),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_defined.js");Z.exports=function(H){return Object(M(H))}},"./node_modules/core-js/modules/_to-primitive.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_is-object.js");Z.exports=function(H,q){if(!M(H))return H;var ee,ve;if(q&&typeof(ee=H.toString)=="function"&&!M(ve=ee.call(H))||typeof(ee=H.valueOf)=="function"&&!M(ve=ee.call(H))||!q&&typeof(ee=H.toString)=="function"&&!M(ve=ee.call(H)))return ve;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(Z,U){var E=0,M=Math.random();Z.exports=function(H){return"Symbol(".concat(H===void 0?"":H,")_",(++E+M).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_global.js"),H=E("./node_modules/core-js/modules/_core.js"),q=E("./node_modules/core-js/modules/_library.js"),ee=E("./node_modules/core-js/modules/_wks-ext.js"),ve=E("./node_modules/core-js/modules/_object-dp.js").f;Z.exports=function(xe){var be=H.Symbol||(H.Symbol=q?{}:M.Symbol||{});xe.charAt(0)!="_"&&!(xe in be)&&ve(be,xe,{value:ee.f(xe)})}},"./node_modules/core-js/modules/_wks-ext.js":function(Z,U,E){U.f=E("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_shared.js")("wks"),H=E("./node_modules/core-js/modules/_uid.js"),q=E("./node_modules/core-js/modules/_global.js").Symbol,ee=typeof q=="function",ve=Z.exports=function(xe){return M[xe]||(M[xe]=ee&&q[xe]||(ee?q:H)("Symbol."+xe))};ve.store=M},"./node_modules/core-js/modules/core.get-iterator-method.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_classof.js"),H=E("./node_modules/core-js/modules/_wks.js")("iterator"),q=E("./node_modules/core-js/modules/_iterators.js");Z.exports=E("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(ee){if(ee!=null)return ee[H]||ee["@@iterator"]||q[M(ee)]}},"./node_modules/core-js/modules/es6.array.from.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_ctx.js"),H=E("./node_modules/core-js/modules/_export.js"),q=E("./node_modules/core-js/modules/_to-object.js"),ee=E("./node_modules/core-js/modules/_iter-call.js"),ve=E("./node_modules/core-js/modules/_is-array-iter.js"),xe=E("./node_modules/core-js/modules/_to-length.js"),be=E("./node_modules/core-js/modules/_create-property.js"),te=E("./node_modules/core-js/modules/core.get-iterator-method.js");H(H.S+H.F*!E("./node_modules/core-js/modules/_iter-detect.js")(function(ue){Array.from(ue)}),"Array",{from:function(re){var ie=q(re),ye=typeof this=="function"?this:Array,Te=arguments.length,Se=Te>1?arguments[1]:void 0,$e=Se!==void 0,Pe=0,ze=te(ie),Xe,Ze,nt,ct;if($e&&(Se=M(Se,Te>2?arguments[2]:void 0,2)),ze!=null&&!(ye==Array&&ve(ze)))for(ct=ze.call(ie),Ze=new ye;!(nt=ct.next()).done;Pe++)be(Ze,Pe,$e?ee(ct,Se,[nt.value,Pe],!0):nt.value);else for(Xe=xe(ie.length),Ze=new ye(Xe);Xe>Pe;Pe++)be(Ze,Pe,$e?Se(ie[Pe],Pe):ie[Pe]);return Ze.length=Pe,Ze}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_add-to-unscopables.js"),H=E("./node_modules/core-js/modules/_iter-step.js"),q=E("./node_modules/core-js/modules/_iterators.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js");Z.exports=E("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ve,xe){this._t=ee(ve),this._i=0,this._k=xe},function(){var ve=this._t,xe=this._k,be=this._i++;return!ve||be>=ve.length?(this._t=void 0,H(1)):xe=="keys"?H(0,be):xe=="values"?H(0,ve[be]):H(0,[be,ve[be]])},"values"),q.Arguments=q.Array,M("keys"),M("values"),M("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_export.js");M(M.P,"Function",{bind:E("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_object-dp.js").f,H=Function.prototype,q=/^\s*function ([^ (]*)/,ee="name";ee in H||E("./node_modules/core-js/modules/_descriptors.js")&&M(H,ee,{configurable:!0,get:function(){try{return(""+this).match(q)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_export.js"),H=E("./node_modules/core-js/modules/_global.js").isFinite;M(M.S,"Number",{isFinite:function(ee){return typeof ee=="number"&&H(ee)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_classof.js"),H={};H[E("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",H+""!="[object z]"&&E("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+M(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_regexp-exec.js");E("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:M!==/./.exec},{exec:M})},"./node_modules/core-js/modules/es6.regexp.split.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_is-regexp.js"),H=E("./node_modules/core-js/modules/_an-object.js"),q=E("./node_modules/core-js/modules/_species-constructor.js"),ee=E("./node_modules/core-js/modules/_advance-string-index.js"),ve=E("./node_modules/core-js/modules/_to-length.js"),xe=E("./node_modules/core-js/modules/_regexp-exec-abstract.js"),be=E("./node_modules/core-js/modules/_regexp-exec.js"),te=E("./node_modules/core-js/modules/_fails.js"),ue=Math.min,re=[].push,ie="split",ye="length",Te="lastIndex",Se=4294967295,$e=!te(function(){});E("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Pe,ze,Xe,Ze){var nt;return"abbc"[ie](/(b)*/)[1]=="c"||"test"[ie](/(?:)/,-1)[ye]!=4||"ab"[ie](/(?:ab)*/)[ye]!=2||"."[ie](/(.?)(.?)/)[ye]!=4||"."[ie](/()()/)[ye]>1||""[ie](/.?/)[ye]?nt=function(ct,vt){var It=String(this);if(ct===void 0&&vt===0)return[];if(!M(ct))return Xe.call(It,ct,vt);for(var ft=[],St=(ct.ignoreCase?"i":"")+(ct.multiline?"m":"")+(ct.unicode?"u":"")+(ct.sticky?"y":""),Gt=0,Ut=vt===void 0?Se:vt>>>0,cn=new RegExp(ct.source,St+"g"),xn,yn,sn;(xn=be.call(cn,It))&&(yn=cn[Te],!(yn>Gt&&(ft.push(It.slice(Gt,xn.index)),xn[ye]>1&&xn.index<It[ye]&&re.apply(ft,xn.slice(1)),sn=xn[0][ye],Gt=yn,ft[ye]>=Ut)));)cn[Te]===xn.index&&cn[Te]++;return Gt===It[ye]?(sn||!cn.test(""))&&ft.push(""):ft.push(It.slice(Gt)),ft[ye]>Ut?ft.slice(0,Ut):ft}:"0"[ie](void 0,0)[ye]?nt=function(ct,vt){return ct===void 0&&vt===0?[]:Xe.call(this,ct,vt)}:nt=Xe,[function(vt,It){var ft=Pe(this),St=vt==null?void 0:vt[ze];return St!==void 0?St.call(vt,ft,It):nt.call(String(ft),vt,It)},function(ct,vt){var It=Ze(nt,ct,this,vt,nt!==Xe);if(It.done)return It.value;var ft=H(ct),St=String(this),Gt=q(ft,RegExp),Ut=ft.unicode,cn=(ft.ignoreCase?"i":"")+(ft.multiline?"m":"")+(ft.unicode?"u":"")+($e?"y":"g"),xn=new Gt($e?ft:"^(?:"+ft.source+")",cn),yn=vt===void 0?Se:vt>>>0;if(yn===0)return[];if(St.length===0)return xe(xn,St)===null?[St]:[];for(var sn=0,gn=0,se=[];gn<St.length;){xn.lastIndex=$e?gn:0;var j=xe(xn,$e?St:St.slice(gn)),O;if(j===null||(O=ue(ve(xn.lastIndex+($e?0:gn)),St.length))===sn)gn=ee(St,gn,Ut);else{if(se.push(St.slice(sn,gn)),se.length===yn)return se;for(var pe=1;pe<=j.length-1;pe++)if(se.push(j[pe]),se.length===yn)return se;gn=sn=O}}return se.push(St.slice(sn)),se}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_export.js"),H=E("./node_modules/core-js/modules/_string-context.js"),q="includes";M(M.P+M.F*E("./node_modules/core-js/modules/_fails-is-regexp.js")(q),"String",{includes:function(ve){return!!~H(this,ve,q).indexOf(ve,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_global.js"),H=E("./node_modules/core-js/modules/_has.js"),q=E("./node_modules/core-js/modules/_descriptors.js"),ee=E("./node_modules/core-js/modules/_export.js"),ve=E("./node_modules/core-js/modules/_redefine.js"),xe=E("./node_modules/core-js/modules/_meta.js").KEY,be=E("./node_modules/core-js/modules/_fails.js"),te=E("./node_modules/core-js/modules/_shared.js"),ue=E("./node_modules/core-js/modules/_set-to-string-tag.js"),re=E("./node_modules/core-js/modules/_uid.js"),ie=E("./node_modules/core-js/modules/_wks.js"),ye=E("./node_modules/core-js/modules/_wks-ext.js"),Te=E("./node_modules/core-js/modules/_wks-define.js"),Se=E("./node_modules/core-js/modules/_enum-keys.js"),$e=E("./node_modules/core-js/modules/_is-array.js"),Pe=E("./node_modules/core-js/modules/_an-object.js"),ze=E("./node_modules/core-js/modules/_is-object.js"),Xe=E("./node_modules/core-js/modules/_to-object.js"),Ze=E("./node_modules/core-js/modules/_to-iobject.js"),nt=E("./node_modules/core-js/modules/_to-primitive.js"),ct=E("./node_modules/core-js/modules/_property-desc.js"),vt=E("./node_modules/core-js/modules/_object-create.js"),It=E("./node_modules/core-js/modules/_object-gopn-ext.js"),ft=E("./node_modules/core-js/modules/_object-gopd.js"),St=E("./node_modules/core-js/modules/_object-gops.js"),Gt=E("./node_modules/core-js/modules/_object-dp.js"),Ut=E("./node_modules/core-js/modules/_object-keys.js"),cn=ft.f,xn=Gt.f,yn=It.f,sn=M.Symbol,gn=M.JSON,se=gn&&gn.stringify,j="prototype",O=ie("_hidden"),pe=ie("toPrimitive"),Be={}.propertyIsEnumerable,et=te("symbol-registry"),lt=te("symbols"),le=te("op-symbols"),z=Object[j],B=typeof sn=="function"&&!!St.f,Ee=M.QObject,Ge=!Ee||!Ee[j]||!Ee[j].findChild,je=q&&be(function(){return vt(xn({},"a",{get:function(){return xn(this,"a",{value:7}).a}})).a!=7})?function(_e,we,Ce){var He=cn(z,we);He&&delete z[we],xn(_e,we,Ce),He&&_e!==z&&xn(z,we,He)}:xn,at=function(_e){var we=lt[_e]=vt(sn[j]);return we._k=_e,we},jt=B&&typeof sn.iterator=="symbol"?function(_e){return typeof _e=="symbol"}:function(_e){return _e instanceof sn},Tn=function(we,Ce,He){return we===z&&Tn(le,Ce,He),Pe(we),Ce=nt(Ce,!0),Pe(He),H(lt,Ce)?(He.enumerable?(H(we,O)&&we[O][Ce]&&(we[O][Ce]=!1),He=vt(He,{enumerable:ct(0,!1)})):(H(we,O)||xn(we,O,ct(1,{})),we[O][Ce]=!0),je(we,Ce,He)):xn(we,Ce,He)},vn=function(we,Ce){Pe(we);for(var He=Se(Ce=Ze(Ce)),Ve=0,Oe=He.length,qe;Oe>Ve;)Tn(we,qe=He[Ve++],Ce[qe]);return we},_t=function(we,Ce){return Ce===void 0?vt(we):vn(vt(we),Ce)},Rt=function(we){var Ce=Be.call(this,we=nt(we,!0));return this===z&&H(lt,we)&&!H(le,we)?!1:Ce||!H(this,we)||!H(lt,we)||H(this,O)&&this[O][we]?Ce:!0},nn=function(we,Ce){if(we=Ze(we),Ce=nt(Ce,!0),!(we===z&&H(lt,Ce)&&!H(le,Ce))){var He=cn(we,Ce);return He&&H(lt,Ce)&&!(H(we,O)&&we[O][Ce])&&(He.enumerable=!0),He}},wr=function(we){for(var Ce=yn(Ze(we)),He=[],Ve=0,Oe;Ce.length>Ve;)!H(lt,Oe=Ce[Ve++])&&Oe!=O&&Oe!=xe&&He.push(Oe);return He},fi=function(we){for(var Ce=we===z,He=yn(Ce?le:Ze(we)),Ve=[],Oe=0,qe;He.length>Oe;)H(lt,qe=He[Oe++])&&(!Ce||H(z,qe))&&Ve.push(lt[qe]);return Ve};B||(sn=function(){if(this instanceof sn)throw TypeError("Symbol is not a constructor!");var we=re(arguments.length>0?arguments[0]:void 0),Ce=function(He){this===z&&Ce.call(le,He),H(this,O)&&H(this[O],we)&&(this[O][we]=!1),je(this,we,ct(1,He))};return q&&Ge&&je(z,we,{configurable:!0,set:Ce}),at(we)},ve(sn[j],"toString",function(){return this._k}),ft.f=nn,Gt.f=Tn,E("./node_modules/core-js/modules/_object-gopn.js").f=It.f=wr,E("./node_modules/core-js/modules/_object-pie.js").f=Rt,St.f=fi,q&&!E("./node_modules/core-js/modules/_library.js")&&ve(z,"propertyIsEnumerable",Rt,!0),ye.f=function(_e){return at(ie(_e))}),ee(ee.G+ee.W+ee.F*!B,{Symbol:sn});for(var hn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),er=0;hn.length>er;)ie(hn[er++]);for(var Le=Ut(ie.store),oe=0;Le.length>oe;)Te(Le[oe++]);ee(ee.S+ee.F*!B,"Symbol",{for:function(_e){return H(et,_e+="")?et[_e]:et[_e]=sn(_e)},keyFor:function(we){if(!jt(we))throw TypeError(we+" is not a symbol!");for(var Ce in et)if(et[Ce]===we)return Ce},useSetter:function(){Ge=!0},useSimple:function(){Ge=!1}}),ee(ee.S+ee.F*!B,"Object",{create:_t,defineProperty:Tn,defineProperties:vn,getOwnPropertyDescriptor:nn,getOwnPropertyNames:wr,getOwnPropertySymbols:fi});var ce=be(function(){St.f(1)});ee(ee.S+ee.F*ce,"Object",{getOwnPropertySymbols:function(we){return St.f(Xe(we))}}),gn&&ee(ee.S+ee.F*(!B||be(function(){var _e=sn();return se([_e])!="[null]"||se({a:_e})!="{}"||se(Object(_e))!="{}"})),"JSON",{stringify:function(we){for(var Ce=[we],He=1,Ve,Oe;arguments.length>He;)Ce.push(arguments[He++]);if(Oe=Ve=Ce[1],!(!ze(Ve)&&we===void 0||jt(we)))return $e(Ve)||(Ve=function(qe,ut){if(typeof Oe=="function"&&(ut=Oe.call(this,qe,ut)),!jt(ut))return ut}),Ce[1]=Ve,se.apply(gn,Ce)}}),sn[j][pe]||E("./node_modules/core-js/modules/_hide.js")(sn[j],pe,sn[j].valueOf),ue(sn,"Symbol"),ue(Math,"Math",!0),ue(M.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_export.js"),H=E("./node_modules/core-js/modules/_array-includes.js")(!0);M(M.P,"Array",{includes:function(ee){return H(this,ee,arguments.length>1?arguments[1]:void 0)}}),E("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(Z,U,E){var M=E("./node_modules/core-js/modules/_export.js"),H=E("./node_modules/core-js/modules/_own-keys.js"),q=E("./node_modules/core-js/modules/_to-iobject.js"),ee=E("./node_modules/core-js/modules/_object-gopd.js"),ve=E("./node_modules/core-js/modules/_create-property.js");M(M.S,"Object",{getOwnPropertyDescriptors:function(be){for(var te=q(be),ue=ee.f,re=H(te),ie={},ye=0,Te,Se;re.length>ye;)Se=ue(te,Te=re[ye++]),Se!==void 0&&ve(ie,Te,Se);return ie}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(Z,U,E){E("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(Z,U,E){for(var M=E("./node_modules/core-js/modules/es6.array.iterator.js"),H=E("./node_modules/core-js/modules/_object-keys.js"),q=E("./node_modules/core-js/modules/_redefine.js"),ee=E("./node_modules/core-js/modules/_global.js"),ve=E("./node_modules/core-js/modules/_hide.js"),xe=E("./node_modules/core-js/modules/_iterators.js"),be=E("./node_modules/core-js/modules/_wks.js"),te=be("iterator"),ue=be("toStringTag"),re=xe.Array,ie={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},ye=H(ie),Te=0;Te<ye.length;Te++){var Se=ye[Te],$e=ie[Se],Pe=ee[Se],ze=Pe&&Pe.prototype,Xe;if(ze&&(ze[te]||ve(ze,te,re),ze[ue]||ve(ze,ue,Se),xe[Se]=re,$e))for(Xe in M)ze[Xe]||q(ze,Xe,M[Xe],!0)}},"./node_modules/crypt/crypt.js":function(Z,U){(function(){var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M={rotl:function(H,q){return H<<q|H>>>32-q},rotr:function(H,q){return H<<32-q|H>>>q},endian:function(H){if(H.constructor==Number)return M.rotl(H,8)&16711935|M.rotl(H,24)&4278255360;for(var q=0;q<H.length;q++)H[q]=M.endian(H[q]);return H},randomBytes:function(H){for(var q=[];H>0;H--)q.push(Math.floor(Math.random()*256));return q},bytesToWords:function(H){for(var q=[],ee=0,ve=0;ee<H.length;ee++,ve+=8)q[ve>>>5]|=H[ee]<<24-ve%32;return q},wordsToBytes:function(H){for(var q=[],ee=0;ee<H.length*32;ee+=8)q.push(H[ee>>>5]>>>24-ee%32&255);return q},bytesToHex:function(H){for(var q=[],ee=0;ee<H.length;ee++)q.push((H[ee]>>>4).toString(16)),q.push((H[ee]&15).toString(16));return q.join("")},hexToBytes:function(H){for(var q=[],ee=0;ee<H.length;ee+=2)q.push(parseInt(H.substr(ee,2),16));return q},bytesToBase64:function(H){for(var q=[],ee=0;ee<H.length;ee+=3)for(var ve=H[ee]<<16|H[ee+1]<<8|H[ee+2],xe=0;xe<4;xe++)ee*8+xe*6<=H.length*8?q.push(E.charAt(ve>>>6*(3-xe)&63)):q.push("=");return q.join("")},base64ToBytes:function(H){H=H.replace(/[^A-Z0-9+\/]/ig,"");for(var q=[],ee=0,ve=0;ee<H.length;ve=++ee%4)ve!=0&&q.push((E.indexOf(H.charAt(ee-1))&Math.pow(2,-2*ve+8)-1)<<ve*2|E.indexOf(H.charAt(ee))>>>6-ve*2);return q}};Z.exports=M})()},"./node_modules/is-buffer/index.js":function(Z,U){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */Z.exports=function(H){return H!=null&&(E(H)||M(H)||!!H._isBuffer)};function E(H){return!!H.constructor&&typeof H.constructor.isBuffer=="function"&&H.constructor.isBuffer(H)}function M(H){return typeof H.readFloatLE=="function"&&typeof H.slice=="function"&&E(H.slice(0,0))}},"./node_modules/md5/md5.js":function(Z,U,E){(function(){var M=E("./node_modules/crypt/crypt.js"),H=E("./node_modules/charenc/charenc.js").utf8,q=E("./node_modules/is-buffer/index.js"),ee=E("./node_modules/charenc/charenc.js").bin,ve=function(xe,be){xe.constructor==String?be&&be.encoding==="binary"?xe=ee.stringToBytes(xe):xe=H.stringToBytes(xe):q(xe)?xe=Array.prototype.slice.call(xe,0):!Array.isArray(xe)&&xe.constructor!==Uint8Array&&(xe=xe.toString());for(var te=M.bytesToWords(xe),ue=xe.length*8,re=1732584193,ie=-271733879,ye=-1732584194,Te=271733878,Se=0;Se<te.length;Se++)te[Se]=(te[Se]<<8|te[Se]>>>24)&16711935|(te[Se]<<24|te[Se]>>>8)&4278255360;te[ue>>>5]|=128<<ue%32,te[(ue+64>>>9<<4)+14]=ue;for(var $e=ve._ff,Pe=ve._gg,ze=ve._hh,Xe=ve._ii,Se=0;Se<te.length;Se+=16){var Ze=re,nt=ie,ct=ye,vt=Te;re=$e(re,ie,ye,Te,te[Se+0],7,-680876936),Te=$e(Te,re,ie,ye,te[Se+1],12,-389564586),ye=$e(ye,Te,re,ie,te[Se+2],17,606105819),ie=$e(ie,ye,Te,re,te[Se+3],22,-1044525330),re=$e(re,ie,ye,Te,te[Se+4],7,-176418897),Te=$e(Te,re,ie,ye,te[Se+5],12,1200080426),ye=$e(ye,Te,re,ie,te[Se+6],17,-1473231341),ie=$e(ie,ye,Te,re,te[Se+7],22,-45705983),re=$e(re,ie,ye,Te,te[Se+8],7,1770035416),Te=$e(Te,re,ie,ye,te[Se+9],12,-1958414417),ye=$e(ye,Te,re,ie,te[Se+10],17,-42063),ie=$e(ie,ye,Te,re,te[Se+11],22,-1990404162),re=$e(re,ie,ye,Te,te[Se+12],7,1804603682),Te=$e(Te,re,ie,ye,te[Se+13],12,-40341101),ye=$e(ye,Te,re,ie,te[Se+14],17,-1502002290),ie=$e(ie,ye,Te,re,te[Se+15],22,1236535329),re=Pe(re,ie,ye,Te,te[Se+1],5,-165796510),Te=Pe(Te,re,ie,ye,te[Se+6],9,-1069501632),ye=Pe(ye,Te,re,ie,te[Se+11],14,643717713),ie=Pe(ie,ye,Te,re,te[Se+0],20,-373897302),re=Pe(re,ie,ye,Te,te[Se+5],5,-701558691),Te=Pe(Te,re,ie,ye,te[Se+10],9,38016083),ye=Pe(ye,Te,re,ie,te[Se+15],14,-660478335),ie=Pe(ie,ye,Te,re,te[Se+4],20,-405537848),re=Pe(re,ie,ye,Te,te[Se+9],5,568446438),Te=Pe(Te,re,ie,ye,te[Se+14],9,-1019803690),ye=Pe(ye,Te,re,ie,te[Se+3],14,-187363961),ie=Pe(ie,ye,Te,re,te[Se+8],20,1163531501),re=Pe(re,ie,ye,Te,te[Se+13],5,-1444681467),Te=Pe(Te,re,ie,ye,te[Se+2],9,-51403784),ye=Pe(ye,Te,re,ie,te[Se+7],14,1735328473),ie=Pe(ie,ye,Te,re,te[Se+12],20,-1926607734),re=ze(re,ie,ye,Te,te[Se+5],4,-378558),Te=ze(Te,re,ie,ye,te[Se+8],11,-2022574463),ye=ze(ye,Te,re,ie,te[Se+11],16,1839030562),ie=ze(ie,ye,Te,re,te[Se+14],23,-35309556),re=ze(re,ie,ye,Te,te[Se+1],4,-1530992060),Te=ze(Te,re,ie,ye,te[Se+4],11,1272893353),ye=ze(ye,Te,re,ie,te[Se+7],16,-155497632),ie=ze(ie,ye,Te,re,te[Se+10],23,-1094730640),re=ze(re,ie,ye,Te,te[Se+13],4,681279174),Te=ze(Te,re,ie,ye,te[Se+0],11,-358537222),ye=ze(ye,Te,re,ie,te[Se+3],16,-722521979),ie=ze(ie,ye,Te,re,te[Se+6],23,76029189),re=ze(re,ie,ye,Te,te[Se+9],4,-640364487),Te=ze(Te,re,ie,ye,te[Se+12],11,-421815835),ye=ze(ye,Te,re,ie,te[Se+15],16,530742520),ie=ze(ie,ye,Te,re,te[Se+2],23,-995338651),re=Xe(re,ie,ye,Te,te[Se+0],6,-198630844),Te=Xe(Te,re,ie,ye,te[Se+7],10,1126891415),ye=Xe(ye,Te,re,ie,te[Se+14],15,-1416354905),ie=Xe(ie,ye,Te,re,te[Se+5],21,-57434055),re=Xe(re,ie,ye,Te,te[Se+12],6,1700485571),Te=Xe(Te,re,ie,ye,te[Se+3],10,-1894986606),ye=Xe(ye,Te,re,ie,te[Se+10],15,-1051523),ie=Xe(ie,ye,Te,re,te[Se+1],21,-2054922799),re=Xe(re,ie,ye,Te,te[Se+8],6,1873313359),Te=Xe(Te,re,ie,ye,te[Se+15],10,-30611744),ye=Xe(ye,Te,re,ie,te[Se+6],15,-1560198380),ie=Xe(ie,ye,Te,re,te[Se+13],21,1309151649),re=Xe(re,ie,ye,Te,te[Se+4],6,-145523070),Te=Xe(Te,re,ie,ye,te[Se+11],10,-1120210379),ye=Xe(ye,Te,re,ie,te[Se+2],15,718787259),ie=Xe(ie,ye,Te,re,te[Se+9],21,-343485551),re=re+Ze>>>0,ie=ie+nt>>>0,ye=ye+ct>>>0,Te=Te+vt>>>0}return M.endian([re,ie,ye,Te])};ve._ff=function(xe,be,te,ue,re,ie,ye){var Te=xe+(be&te|~be&ue)+(re>>>0)+ye;return(Te<<ie|Te>>>32-ie)+be},ve._gg=function(xe,be,te,ue,re,ie,ye){var Te=xe+(be&ue|te&~ue)+(re>>>0)+ye;return(Te<<ie|Te>>>32-ie)+be},ve._hh=function(xe,be,te,ue,re,ie,ye){var Te=xe+(be^te^ue)+(re>>>0)+ye;return(Te<<ie|Te>>>32-ie)+be},ve._ii=function(xe,be,te,ue,re,ie,ye){var Te=xe+(te^(be|~ue))+(re>>>0)+ye;return(Te<<ie|Te>>>32-ie)+be},ve._blocksize=16,ve._digestsize=16,Z.exports=function(xe,be){if(xe==null)throw new Error("Illegal argument "+xe);var te=M.wordsToBytes(ve(xe,be));return be&&be.asBytes?te:be&&be.asString?ee.bytesToString(te):M.bytesToHex(te)}})()},"./node_modules/regenerator-runtime/runtime.js":function(Z,U,E){var M=function(H){var q=Object.prototype,ee=q.hasOwnProperty,ve,xe=typeof Symbol=="function"?Symbol:{},be=xe.iterator||"@@iterator",te=xe.asyncIterator||"@@asyncIterator",ue=xe.toStringTag||"@@toStringTag";function re(j,O,pe){return Object.defineProperty(j,O,{value:pe,enumerable:!0,configurable:!0,writable:!0}),j[O]}try{re({},"")}catch{re=function(O,pe,Be){return O[pe]=Be}}function ie(j,O,pe,Be){var et=O&&O.prototype instanceof Xe?O:Xe,lt=Object.create(et.prototype),le=new sn(Be||[]);return lt._invoke=Ut(j,pe,le),lt}H.wrap=ie;function ye(j,O,pe){try{return{type:"normal",arg:j.call(O,pe)}}catch(Be){return{type:"throw",arg:Be}}}var Te="suspendedStart",Se="suspendedYield",$e="executing",Pe="completed",ze={};function Xe(){}function Ze(){}function nt(){}var ct={};ct[be]=function(){return this};var vt=Object.getPrototypeOf,It=vt&&vt(vt(gn([])));It&&It!==q&&ee.call(It,be)&&(ct=It);var ft=nt.prototype=Xe.prototype=Object.create(ct);Ze.prototype=ft.constructor=nt,nt.constructor=Ze,Ze.displayName=re(nt,ue,"GeneratorFunction");function St(j){["next","throw","return"].forEach(function(O){re(j,O,function(pe){return this._invoke(O,pe)})})}H.isGeneratorFunction=function(j){var O=typeof j=="function"&&j.constructor;return O?O===Ze||(O.displayName||O.name)==="GeneratorFunction":!1},H.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,nt):(j.__proto__=nt,re(j,ue,"GeneratorFunction")),j.prototype=Object.create(ft),j},H.awrap=function(j){return{__await:j}};function Gt(j,O){function pe(lt,le,z,B){var Ee=ye(j[lt],j,le);if(Ee.type==="throw")B(Ee.arg);else{var Ge=Ee.arg,je=Ge.value;return je&&typeof je=="object"&&ee.call(je,"__await")?O.resolve(je.__await).then(function(at){pe("next",at,z,B)},function(at){pe("throw",at,z,B)}):O.resolve(je).then(function(at){Ge.value=at,z(Ge)},function(at){return pe("throw",at,z,B)})}}var Be;function et(lt,le){function z(){return new O(function(B,Ee){pe(lt,le,B,Ee)})}return Be=Be?Be.then(z,z):z()}this._invoke=et}St(Gt.prototype),Gt.prototype[te]=function(){return this},H.AsyncIterator=Gt,H.async=function(j,O,pe,Be,et){et===void 0&&(et=Promise);var lt=new Gt(ie(j,O,pe,Be),et);return H.isGeneratorFunction(O)?lt:lt.next().then(function(le){return le.done?le.value:lt.next()})};function Ut(j,O,pe){var Be=Te;return function(lt,le){if(Be===$e)throw new Error("Generator is already running");if(Be===Pe){if(lt==="throw")throw le;return se()}for(pe.method=lt,pe.arg=le;;){var z=pe.delegate;if(z){var B=cn(z,pe);if(B){if(B===ze)continue;return B}}if(pe.method==="next")pe.sent=pe._sent=pe.arg;else if(pe.method==="throw"){if(Be===Te)throw Be=Pe,pe.arg;pe.dispatchException(pe.arg)}else pe.method==="return"&&pe.abrupt("return",pe.arg);Be=$e;var Ee=ye(j,O,pe);if(Ee.type==="normal"){if(Be=pe.done?Pe:Se,Ee.arg===ze)continue;return{value:Ee.arg,done:pe.done}}else Ee.type==="throw"&&(Be=Pe,pe.method="throw",pe.arg=Ee.arg)}}}function cn(j,O){var pe=j.iterator[O.method];if(pe===ve){if(O.delegate=null,O.method==="throw"){if(j.iterator.return&&(O.method="return",O.arg=ve,cn(j,O),O.method==="throw"))return ze;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return ze}var Be=ye(pe,j.iterator,O.arg);if(Be.type==="throw")return O.method="throw",O.arg=Be.arg,O.delegate=null,ze;var et=Be.arg;if(!et)return O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,ze;if(et.done)O[j.resultName]=et.value,O.next=j.nextLoc,O.method!=="return"&&(O.method="next",O.arg=ve);else return et;return O.delegate=null,ze}St(ft),re(ft,ue,"Generator"),ft[be]=function(){return this},ft.toString=function(){return"[object Generator]"};function xn(j){var O={tryLoc:j[0]};1 in j&&(O.catchLoc=j[1]),2 in j&&(O.finallyLoc=j[2],O.afterLoc=j[3]),this.tryEntries.push(O)}function yn(j){var O=j.completion||{};O.type="normal",delete O.arg,j.completion=O}function sn(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(xn,this),this.reset(!0)}H.keys=function(j){var O=[];for(var pe in j)O.push(pe);return O.reverse(),function Be(){for(;O.length;){var et=O.pop();if(et in j)return Be.value=et,Be.done=!1,Be}return Be.done=!0,Be}};function gn(j){if(j){var O=j[be];if(O)return O.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var pe=-1,Be=function et(){for(;++pe<j.length;)if(ee.call(j,pe))return et.value=j[pe],et.done=!1,et;return et.value=ve,et.done=!0,et};return Be.next=Be}}return{next:se}}H.values=gn;function se(){return{value:ve,done:!0}}return sn.prototype={constructor:sn,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=ve,this.done=!1,this.delegate=null,this.method="next",this.arg=ve,this.tryEntries.forEach(yn),!j)for(var O in this)O.charAt(0)==="t"&&ee.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=ve)},stop:function(){this.done=!0;var j=this.tryEntries[0],O=j.completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var O=this;function pe(B,Ee){return lt.type="throw",lt.arg=j,O.next=B,Ee&&(O.method="next",O.arg=ve),!!Ee}for(var Be=this.tryEntries.length-1;Be>=0;--Be){var et=this.tryEntries[Be],lt=et.completion;if(et.tryLoc==="root")return pe("end");if(et.tryLoc<=this.prev){var le=ee.call(et,"catchLoc"),z=ee.call(et,"finallyLoc");if(le&&z){if(this.prev<et.catchLoc)return pe(et.catchLoc,!0);if(this.prev<et.finallyLoc)return pe(et.finallyLoc)}else if(le){if(this.prev<et.catchLoc)return pe(et.catchLoc,!0)}else if(z){if(this.prev<et.finallyLoc)return pe(et.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(j,O){for(var pe=this.tryEntries.length-1;pe>=0;--pe){var Be=this.tryEntries[pe];if(Be.tryLoc<=this.prev&&ee.call(Be,"finallyLoc")&&this.prev<Be.finallyLoc){var et=Be;break}}et&&(j==="break"||j==="continue")&&et.tryLoc<=O&&O<=et.finallyLoc&&(et=null);var lt=et?et.completion:{};return lt.type=j,lt.arg=O,et?(this.method="next",this.next=et.finallyLoc,ze):this.complete(lt)},complete:function(j,O){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&O&&(this.next=O),ze},finish:function(j){for(var O=this.tryEntries.length-1;O>=0;--O){var pe=this.tryEntries[O];if(pe.finallyLoc===j)return this.complete(pe.completion,pe.afterLoc),yn(pe),ze}},catch:function(j){for(var O=this.tryEntries.length-1;O>=0;--O){var pe=this.tryEntries[O];if(pe.tryLoc===j){var Be=pe.completion;if(Be.type==="throw"){var et=Be.arg;yn(pe)}return et}}throw new Error("illegal catch attempt")},delegateYield:function(j,O,pe){return this.delegate={iterator:gn(j),resultName:O,nextLoc:pe},this.method==="next"&&(this.arg=ve),ze}},H}(Z.exports);try{regeneratorRuntime=M}catch{Function("r","regeneratorRuntime = r")(M)}},"./src/api.js":function(Z,U,E){E.r(U),E.d(U,"setup",function(){return $e}),E.d(U,"setupCache",function(){return Se}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var M=E("axios"),H=E.n(M),q=E("./src/request.js"),ee=E("./src/cache.js");E.d(U,"serializeQuery",function(){return ee.serializeQuery});var ve=E("./src/config.js"),xe=E("./src/utilities.js");function be(Pe,ze){if(Pe==null)return{};var Xe=te(Pe,ze),Ze,nt;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(Pe);for(nt=0;nt<ct.length;nt++)Ze=ct[nt],!(ze.indexOf(Ze)>=0)&&Object.prototype.propertyIsEnumerable.call(Pe,Ze)&&(Xe[Ze]=Pe[Ze])}return Xe}function te(Pe,ze){if(Pe==null)return{};var Xe={},Ze=Object.keys(Pe),nt,ct;for(ct=0;ct<Ze.length;ct++)nt=Ze[ct],!(ze.indexOf(nt)>=0)&&(Xe[nt]=Pe[nt]);return Xe}function ue(Pe,ze){var Xe=Object.keys(Pe);if(Object.getOwnPropertySymbols){var Ze=Object.getOwnPropertySymbols(Pe);ze&&(Ze=Ze.filter(function(nt){return Object.getOwnPropertyDescriptor(Pe,nt).enumerable})),Xe.push.apply(Xe,Ze)}return Xe}function re(Pe){for(var ze=1;ze<arguments.length;ze++){var Xe=arguments[ze]!=null?arguments[ze]:{};ze%2?ue(Object(Xe),!0).forEach(function(Ze){ie(Pe,Ze,Xe[Ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors(Xe)):ue(Object(Xe)).forEach(function(Ze){Object.defineProperty(Pe,Ze,Object.getOwnPropertyDescriptor(Xe,Ze))})}return Pe}function ie(Pe,ze,Xe){return ze in Pe?Object.defineProperty(Pe,ze,{value:Xe,enumerable:!0,configurable:!0,writable:!0}):Pe[ze]=Xe,Pe}function ye(Pe,ze,Xe,Ze,nt,ct,vt){try{var It=Pe[ct](vt),ft=It.value}catch(St){Xe(St);return}It.done?ze(ft):Promise.resolve(ft).then(Ze,nt)}function Te(Pe){return function(){var ze=this,Xe=arguments;return new Promise(function(Ze,nt){var ct=Pe.apply(ze,Xe);function vt(ft){ye(ct,Ze,nt,vt,It,"next",ft)}function It(ft){ye(ct,Ze,nt,vt,It,"throw",ft)}vt(void 0)})}}function Se(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Pe=Object(ve.makeConfig)(Pe);function ze(Ze){return Xe.apply(this,arguments)}function Xe(){return Xe=Te(regeneratorRuntime.mark(function Ze(nt){var ct,vt,It,ft,St;return regeneratorRuntime.wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return ct=Object(ve.mergeRequestConfig)(Pe,nt),Ut.next=3,Object(q.default)(ct,nt);case 3:if(vt=Ut.sent,It=vt.next,Object(xe.isFunction)(It)){Ut.next=7;break}return Ut.abrupt("return",It);case 7:return Ut.prev=7,Ut.next=10,ct.adapter(nt);case 10:vt=Ut.sent,Ut.next=16;break;case 13:Ut.prev=13,Ut.t0=Ut.catch(7),ft=Ut.t0;case 16:if(!ft){Ut.next=31;break}if(St=Object(xe.isFunction)(ct.readOnError)?ct.readOnError(ft,nt):ct.readOnError,!St){Ut.next=30;break}return Ut.prev=19,ct.acceptStale=!0,Ut.next=23,Object(q.default)(ct,nt);case 23:return vt=Ut.sent,vt.next.request.stale=!0,Ut.abrupt("return",vt.next);case 28:Ut.prev=28,Ut.t1=Ut.catch(19);case 30:throw ft;case 31:return Ut.abrupt("return",It(vt));case 32:case"end":return Ut.stop()}},Ze,null,[[7,13],[19,28]])})),Xe.apply(this,arguments)}return{adapter:ze,config:Pe,store:Pe.store}}function $e(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=re(re(re({},ve.defaults.axios),Pe),{},{cache:re(re({},ve.defaults.axios.cache),Pe.cache)}),Xe=Se(ze.cache);ze.cache;var Ze=be(ze,["cache"]),nt=H.a.create(re(re({},Ze),{},{adapter:Xe.adapter}));return nt.cache=Xe.store,nt}U.default={setup:$e,setupCache:Se,serializeQuery:ee.serializeQuery}},"./src/cache.js":function(Z,U,E){E.r(U),E.d(U,"read",function(){return ue}),E.d(U,"write",function(){return be}),E.d(U,"key",function(){return ie}),E.d(U,"invalidate",function(){return Se}),E.d(U,"serializeQuery",function(){return $e}),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var M=E("./src/utilities.js"),H=E("./node_modules/md5/md5.js"),q=E.n(H),ee=E("./src/serialize.js");function ve(Pe,ze,Xe,Ze,nt,ct,vt){try{var It=Pe[ct](vt),ft=It.value}catch(St){Xe(St);return}It.done?ze(ft):Promise.resolve(ft).then(Ze,nt)}function xe(Pe){return function(){var ze=this,Xe=arguments;return new Promise(function(Ze,nt){var ct=Pe.apply(ze,Xe);function vt(ft){ve(ct,Ze,nt,vt,It,"next",ft)}function It(ft){ve(ct,Ze,nt,vt,It,"throw",ft)}vt(void 0)})}}function be(Pe,ze,Xe){return te.apply(this,arguments)}function te(){return te=xe(regeneratorRuntime.mark(function Pe(ze,Xe,Ze){var nt;return regeneratorRuntime.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.prev=0,nt={expires:ze.expires,data:Object(ee.default)(ze,Xe,Ze)},vt.next=4,ze.store.setItem(ze.uuid,nt);case 4:vt.next=19;break;case 6:if(vt.prev=6,vt.t0=vt.catch(0),ze.debug("Could not store response",vt.t0),!ze.clearOnError){vt.next=18;break}return vt.prev=10,vt.next=13,ze.store.clear();case 13:vt.next=18;break;case 15:vt.prev=15,vt.t1=vt.catch(10),ze.debug("Could not clear store",vt.t1);case 18:return vt.abrupt("return",!1);case 19:return vt.abrupt("return",!0);case 20:case"end":return vt.stop()}},Pe,null,[[0,6],[10,15]])})),te.apply(this,arguments)}function ue(Pe,ze){return re.apply(this,arguments)}function re(){return re=xe(regeneratorRuntime.mark(function Pe(ze,Xe){var Ze,nt,ct,vt,It,ft,St,Gt;return regeneratorRuntime.wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return Ze=ze.uuid,nt=ze.ignoreCache,cn.next=3,ze.store.getItem(Ze);case 3:if(ct=cn.sent,!(nt||!ct||!ct.data)){cn.next=10;break}throw ze.debug("cache-miss",Xe.url),vt=new Error,vt.reason="cache-miss",vt.message="Entry not found from cache",vt;case 10:if(It=ct.expires,ft=ct.data,St=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!St&&!ze.acceptStale&&It!==0&&It<Date.now())){cn.next=18;break}throw ze.debug("cache-stale",Xe.url),Gt=new Error,Gt.reason="cache-stale",Gt.message="Entry is stale",Gt;case 18:return ze.debug(ze.acceptStale?"cache-hit-stale":"cache-hit",Xe.url),cn.abrupt("return",ft);case 20:case"end":return cn.stop()}},Pe)})),re.apply(this,arguments)}function ie(Pe){if(Object(M.isFunction)(Pe.key))return Pe.key;var ze;return Object(M.isString)(Pe.key)?ze=function(Ze){var nt="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),ct="".concat(Pe.key,"/").concat(nt).concat($e(Ze));return Ze.data?ct+q()(Ze.data):ct}:ze=function(Ze){var nt="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),ct=nt+$e(Ze);return Ze.data?ct+q()(Ze.data):ct},ze}function ye(Pe,ze){return Te.apply(this,arguments)}function Te(){return Te=xe(regeneratorRuntime.mark(function Pe(ze,Xe){var Ze;return regeneratorRuntime.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(Ze=Xe.method.toLowerCase(),!ze.exclude.methods.includes(Ze)){ct.next=4;break}return ct.next=4,ze.store.removeItem(ze.uuid);case 4:case"end":return ct.stop()}},Pe)})),Te.apply(this,arguments)}function Se(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(M.isFunction)(Pe.invalidate)?Pe.invalidate:ye}function $e(Pe){if(!Pe.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Pe.params);var ze=Pe.params,Xe=Pe.params instanceof URLSearchParams;return Xe||(ze=new URLSearchParams,Object.keys(Pe.params).forEach(function(Ze){return ze.append(Ze,Pe.params[Ze])})),"?".concat(ze.toString())}U.default={read:ue,write:be,key:ie,invalidate:Se,serializeQuery:$e}},"./src/config.js":function(Z,U,E){E.r(U),E.d(U,"defaults",function(){return re}),E.d(U,"makeConfig",function(){return ye}),E.d(U,"mergeRequestConfig",function(){return Te}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var M=E("axios"),H=E.n(M),q=E("./src/memory.js"),ee=E("./src/cache.js");function ve(Se,$e){var Pe=Object.keys(Se);if(Object.getOwnPropertySymbols){var ze=Object.getOwnPropertySymbols(Se);$e&&(ze=ze.filter(function(Xe){return Object.getOwnPropertyDescriptor(Se,Xe).enumerable})),Pe.push.apply(Pe,ze)}return Pe}function xe(Se){for(var $e=1;$e<arguments.length;$e++){var Pe=arguments[$e]!=null?arguments[$e]:{};$e%2?ve(Object(Pe),!0).forEach(function(ze){be(Se,ze,Pe[ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(Pe)):ve(Object(Pe)).forEach(function(ze){Object.defineProperty(Se,ze,Object.getOwnPropertyDescriptor(Pe,ze))})}return Se}function be(Se,$e,Pe){return $e in Se?Object.defineProperty(Se,$e,{value:Pe,enumerable:!0,configurable:!0,writable:!0}):Se[$e]=Pe,Se}var te=function(){},ue=function(){for(var $e,Pe=arguments.length,ze=new Array(Pe),Xe=0;Xe<Pe;Xe++)ze[Xe]=arguments[Xe];return($e=console).log.apply($e,["[axios-cache-adapter]"].concat(ze))},re={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:H.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},ie=["limit","store","adapter","uuid","acceptStale"],ye=function(){var $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=xe(xe(xe({},re.cache),$e),{},{exclude:xe(xe({},re.cache.exclude),$e.exclude)});return Pe.key=Object(ee.key)(Pe),Pe.invalidate=Object(ee.invalidate)(Pe),Pe.debug!==!1?Pe.debug=typeof Pe.debug=="function"?Pe.debug:ue:Pe.debug=te,Pe.store||(Pe.store=new q.default),Pe.debug("Global cache config",Pe),Pe},Te=function($e,Pe){var ze=Pe.cache||{};ze&&ie.forEach(function(Ze){return ze[Ze]?delete ze[Ze]:void 0});var Xe=xe(xe(xe({},$e),ze),{},{exclude:xe(xe({},$e.exclude),ze.exclude)});return Xe.debug===!0&&(Xe.debug=ue),ze.key&&(Xe.key=Object(ee.key)(ze)),Xe.uuid=Xe.key(Pe),$e.debug("Request config for ".concat(Pe.url),Xe),Xe};U.default={defaults:re,makeConfig:ye,mergeRequestConfig:Te}},"./src/exclude.js":function(Z,U,E){E.r(U),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js");var M=E("./src/utilities.js");function H(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee=arguments.length>1?arguments[1]:void 0,ve=q.exclude,xe=ve===void 0?{}:ve,be=q.debug,te=ee.method.toLowerCase();if(te==="head"||xe.methods.includes(te))return be("Excluding request by HTTP method ".concat(ee.url)),!0;if(typeof xe.filter=="function"&&xe.filter(ee))return be("Excluding request by filter ".concat(ee.url)),!0;var ue=/\?.*$/.test(ee.url)||Object(M.isObject)(ee.params)&&Object.keys(ee.params).length!==0||typeof URLSearchParams<"u"&&ee.params instanceof URLSearchParams;if(xe.query&&ue)return be("Excluding request by query ".concat(ee.url)),!0;var re=xe.paths||[],ie=re.some(function(ye){return ee.url.match(ye)});return ie?(be("Excluding request by url match ".concat(ee.url)),!0):!1}U.default=H},"./src/index.node.js":function(Z,U,E){E.r(U);var M=E("./src/api.js");E.d(U,"setup",function(){return M.setup}),E.d(U,"setupCache",function(){return M.setupCache}),E.d(U,"serializeQuery",function(){return M.serializeQuery});var H=E("./src/redis.js");E.d(U,"RedisStore",function(){return H.default});var q=E("./src/redis-default.js");E.d(U,"RedisDefaultStore",function(){return q.default}),U.default={setup:M.setup,setupCache:M.setupCache,serializeQuery:M.serializeQuery,RedisStore:H.default,RedisDefaultStore:q.default}},"./src/limit.js":function(Z,U,E){E.r(U),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function M(ve,xe,be,te,ue,re,ie){try{var ye=ve[re](ie),Te=ye.value}catch(Se){be(Se);return}ye.done?xe(Te):Promise.resolve(Te).then(te,ue)}function H(ve){return function(){var xe=this,be=arguments;return new Promise(function(te,ue){var re=ve.apply(xe,be);function ie(Te){M(re,te,ue,ie,ye,"next",Te)}function ye(Te){M(re,te,ue,ie,ye,"throw",Te)}ie(void 0)})}}function q(ve){return ee.apply(this,arguments)}function ee(){return ee=H(regeneratorRuntime.mark(function ve(xe){var be,te;return regeneratorRuntime.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,xe.store.length();case 2:if(be=re.sent,!(be<xe.limit)){re.next=5;break}return re.abrupt("return");case 5:return xe.debug("Current store size: ".concat(be)),re.next=8,xe.store.iterate(function(ie,ye){te||(te={value:ie,key:ye}),ie.expires<te.value.expires&&(te={value:ie,key:ye})});case 8:if(!te){re.next=12;break}return xe.debug("Removing item: ".concat(te.key)),re.next=12,xe.store.removeItem(te.key);case 12:case"end":return re.stop()}},ve)})),ee.apply(this,arguments)}U.default=q},"./src/memory.js":function(Z,U,E){E.r(U),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var M=E("./src/utilities.js");function H(te,ue,re,ie,ye,Te,Se){try{var $e=te[Te](Se),Pe=$e.value}catch(ze){re(ze);return}$e.done?ue(Pe):Promise.resolve(Pe).then(ie,ye)}function q(te){return function(){var ue=this,re=arguments;return new Promise(function(ie,ye){var Te=te.apply(ue,re);function Se(Pe){H(Te,ie,ye,Se,$e,"next",Pe)}function $e(Pe){H(Te,ie,ye,Se,$e,"throw",Pe)}Se(void 0)})}}function ee(te,ue){if(!(te instanceof ue))throw new TypeError("Cannot call a class as a function")}function ve(te,ue){for(var re=0;re<ue.length;re++){var ie=ue[re];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}}function xe(te,ue,re){return ue&&ve(te.prototype,ue),re&&ve(te,re),te}var be=function(){function te(){ee(this,te),this.store={}}return xe(te,[{key:"getItem",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye){var Te;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return Te=this.store[ye]||null,$e.abrupt("return",JSON.parse(Te));case 2:case"end":return $e.stop()}},ie,this)}));function re(ie){return ue.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye,Te){return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return this.store[ye]=JSON.stringify(Te),$e.abrupt("return",Te);case 2:case"end":return $e.stop()}},ie,this)}));function re(ie,ye){return ue.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:delete this.store[ye];case 1:case"end":return Se.stop()}},ie,this)}));function re(ie){return ue.apply(this,arguments)}return re}()},{key:"clear",value:function(){var ue=q(regeneratorRuntime.mark(function ie(){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:this.store={};case 1:case"end":return Te.stop()}},ie,this)}));function re(){return ue.apply(this,arguments)}return re}()},{key:"length",value:function(){var ue=q(regeneratorRuntime.mark(function ie(){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.abrupt("return",Object.keys(this.store).length);case 1:case"end":return Te.stop()}},ie,this)}));function re(){return ue.apply(this,arguments)}return re}()},{key:"iterate",value:function(re){return Promise.all(Object(M.mapObject)(this.store,re))}}]),te}();U.default=be},"./src/redis-default.js":function(Z,U,E){E.r(U),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var M=E("util");function H(te,ue,re,ie,ye,Te,Se){try{var $e=te[Te](Se),Pe=$e.value}catch(ze){re(ze);return}$e.done?ue(Pe):Promise.resolve(Pe).then(ie,ye)}function q(te){return function(){var ue=this,re=arguments;return new Promise(function(ie,ye){var Te=te.apply(ue,re);function Se(Pe){H(Te,ie,ye,Se,$e,"next",Pe)}function $e(Pe){H(Te,ie,ye,Se,$e,"throw",Pe)}Se(void 0)})}}function ee(te,ue){if(!(te instanceof ue))throw new TypeError("Cannot call a class as a function")}function ve(te,ue){for(var re=0;re<ue.length;re++){var ie=ue[re];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}}function xe(te,ue,re){return ue&&ve(te.prototype,ue),re&&ve(te,re),te}var be=function(){function te(ue){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ee(this,te);var ie=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ue.constructor.name!=="RedisClient")throw ie}catch{throw ie}this.client=ue,this.prefix=re.prefix||"axios-cache",this.maxScanCount=re.maxScanCount||1e3,this.getAsync=Object(M.promisify)(ue.get).bind(ue),this.psetexAsync=Object(M.promisify)(ue.psetex).bind(ue),this.delAsync=Object(M.promisify)(ue.del).bind(ue),this.scanAsync=Object(M.promisify)(ue.scan).bind(ue)}return xe(te,[{key:"calculateTTL",value:function(re){var ie=Date.now();return re.expires&&re.expires>ie?re.expires-ie:-1}},{key:"transformKey",value:function(re){return this.prefix+"_"+re}},{key:"getItem",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye){var Te;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.getAsync(this.transformKey(ye));case 2:if($e.t0=$e.sent,$e.t0){$e.next=5;break}$e.t0=null;case 5:return Te=$e.t0,$e.abrupt("return",JSON.parse(Te));case 7:case"end":return $e.stop()}},ie,this)}));function re(ie){return ue.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye,Te){var Se,$e;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(Se=this.transformKey(ye),$e=this.calculateTTL(Te),!($e>0)){ze.next=5;break}return ze.next=5,this.psetexAsync(Se,$e,JSON.stringify(Te));case 5:return ze.abrupt("return",Te);case 6:case"end":return ze.stop()}},ie,this)}));function re(ie,ye){return ue.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,this.delAsync(this.transformKey(ye));case 2:case"end":return Se.stop()}},ie,this)}));function re(ie){return ue.apply(this,arguments)}return re}()},{key:"scan",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye){var Te,Se;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:Te="0";case 1:return Pe.next=3,this.scanAsync(Te,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Se=Pe.sent,Te=Se[0],Pe.next=7,ye(Se[1]);case 7:if(Te!=="0"){Pe.next=1;break}case 8:case"end":return Pe.stop()}},ie,this)}));function re(ie){return ue.apply(this,arguments)}return re}()},{key:"clear",value:function(){var ue=q(regeneratorRuntime.mark(function ie(){var ye=this;return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,this.scan(function($e){return ye.delAsync($e)});case 2:case"end":return Se.stop()}},ie,this)}));function re(){return ue.apply(this,arguments)}return re}()},{key:"length",value:function(){var ue=q(regeneratorRuntime.mark(function ie(){var ye;return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return ye=0,Se.next=3,this.scan(function($e){ye+=$e.length});case 3:return Se.abrupt("return",ye);case 4:case"end":return Se.stop()}},ie,this)}));function re(){return ue.apply(this,arguments)}return re}()},{key:"iterate",value:function(){var ue=q(regeneratorRuntime.mark(function ie(ye){var Te=this,Se,$e;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return $e=function(){return $e=q(regeneratorRuntime.mark(function Ze(nt){var ct,vt;return regeneratorRuntime.wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return ft.next=2,this.getAsync(nt);case 2:if(ft.t0=ft.sent,ft.t0){ft.next=5;break}ft.t0=null;case 5:return ct=ft.t0,vt=JSON.parse(ct),ft.next=9,ye(vt,nt);case 9:return ft.abrupt("return",ft.sent);case 10:case"end":return ft.stop()}},Ze,this)})),$e.apply(this,arguments)},Se=function(Ze){return $e.apply(this,arguments)},ze.next=4,this.scan(function(Xe){return Promise.all(Xe.map(Se.bind(Te)))});case 4:return ze.abrupt("return",Promise.resolve([]));case 5:case"end":return ze.stop()}},ie,this)}));function re(ie){return ue.apply(this,arguments)}return re}()}]),te}();U.default=be},"./src/redis.js":function(Z,U,E){E.r(U),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var M=E("util"),H=E("./src/utilities.js");function q(ue,re,ie,ye,Te,Se,$e){try{var Pe=ue[Se]($e),ze=Pe.value}catch(Xe){ie(Xe);return}Pe.done?re(ze):Promise.resolve(ze).then(ye,Te)}function ee(ue){return function(){var re=this,ie=arguments;return new Promise(function(ye,Te){var Se=ue.apply(re,ie);function $e(ze){q(Se,ye,Te,$e,Pe,"next",ze)}function Pe(ze){q(Se,ye,Te,$e,Pe,"throw",ze)}$e(void 0)})}}function ve(ue,re){if(!(ue instanceof re))throw new TypeError("Cannot call a class as a function")}function xe(ue,re){for(var ie=0;ie<re.length;ie++){var ye=re[ie];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(ue,ye.key,ye)}}function be(ue,re,ie){return re&&xe(ue.prototype,re),ie&&xe(ue,ie),ue}var te=function(){function ue(re){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ve(this,ue);var ye=new TypeError("First parameter must be a valid RedisClient instance.");try{if(re.constructor.name!=="RedisClient")throw ye}catch{throw ye}this.client=re,this.HASH_KEY=ie,this.hgetAsync=Object(M.promisify)(re.hget).bind(re),this.hsetAsync=Object(M.promisify)(re.hset).bind(re),this.hdelAsync=Object(M.promisify)(re.hdel).bind(re),this.delAsync=Object(M.promisify)(re.del).bind(re),this.hlenAsync=Object(M.promisify)(re.hlen).bind(re),this.hgetallAsync=Object(M.promisify)(re.hgetall).bind(re)}return be(ue,[{key:"getItem",value:function(){var re=ee(regeneratorRuntime.mark(function ye(Te){var Se;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hgetAsync(this.HASH_KEY,Te);case 2:if(Pe.t0=Pe.sent,Pe.t0){Pe.next=5;break}Pe.t0=null;case 5:return Se=Pe.t0,Pe.abrupt("return",JSON.parse(Se));case 7:case"end":return Pe.stop()}},ye,this)}));function ie(ye){return re.apply(this,arguments)}return ie}()},{key:"setItem",value:function(){var re=ee(regeneratorRuntime.mark(function ye(Te,Se){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hsetAsync(this.HASH_KEY,Te,JSON.stringify(Se));case 2:return Pe.abrupt("return",Se);case 3:case"end":return Pe.stop()}},ye,this)}));function ie(ye,Te){return re.apply(this,arguments)}return ie}()},{key:"removeItem",value:function(){var re=ee(regeneratorRuntime.mark(function ye(Te){return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.hdelAsync(this.HASH_KEY,Te);case 2:case"end":return $e.stop()}},ye,this)}));function ie(ye){return re.apply(this,arguments)}return ie}()},{key:"clear",value:function(){var re=ee(regeneratorRuntime.mark(function ye(){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Se.stop()}},ye,this)}));function ie(){return re.apply(this,arguments)}return ie}()},{key:"length",value:function(){var re=ee(regeneratorRuntime.mark(function ye(){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Se.stop()}},ye,this)}));function ie(){return re.apply(this,arguments)}return ie}()},{key:"iterate",value:function(){var re=ee(regeneratorRuntime.mark(function ye(Te){var Se;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Se=Pe.sent,Pe.abrupt("return",Promise.all(Object(H.mapObject)(Se,Te)));case 4:case"end":return Pe.stop()}},ye,this)}));function ie(ye){return re.apply(this,arguments)}return ie}()}]),ue}();U.default=te},"./src/request.js":function(Z,U,E){E.r(U),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var M=E("./src/response.js"),H=E("./src/exclude.js"),q=E("./src/cache.js");function ee(te,ue,re,ie,ye,Te,Se){try{var $e=te[Te](Se),Pe=$e.value}catch(ze){re(ze);return}$e.done?ue(Pe):Promise.resolve(Pe).then(ie,ye)}function ve(te){return function(){var ue=this,re=arguments;return new Promise(function(ie,ye){var Te=te.apply(ue,re);function Se(Pe){ee(Te,ie,ye,Se,$e,"next",Pe)}function $e(Pe){ee(Te,ie,ye,Se,$e,"throw",Pe)}Se(void 0)})}}function xe(te,ue){return be.apply(this,arguments)}function be(){return be=ve(regeneratorRuntime.mark(function te(ue,re){var ie,ye,Te;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return Te=function(){return ue.excludeFromCache=!0,{config:ue,next:ie}},ue.debug("uuid",ue.uuid),ie=function(){for(var ze=arguments.length,Xe=new Array(ze),Ze=0;Ze<ze;Ze++)Xe[Ze]=arguments[Ze];return M.default.apply(void 0,[ue,re].concat(Xe))},$e.next=5,ue.invalidate(ue,re);case 5:if(!Object(H.default)(ue,re)){$e.next=7;break}return $e.abrupt("return",Te());case 7:return $e.prev=7,$e.next=10,Object(q.read)(ue,re);case 10:return ye=$e.sent,ye.config=re,ye.request={fromCache:!0},$e.abrupt("return",{config:ue,next:ye});case 16:if($e.prev=16,$e.t0=$e.catch(7),!(ue.clearOnStale&&$e.t0.reason==="cache-stale")){$e.next=21;break}return $e.next=21,ue.store.removeItem(ue.uuid);case 21:return $e.abrupt("return",{config:ue,next:ie});case 22:case"end":return $e.stop()}},te,null,[[7,16]])})),be.apply(this,arguments)}U.default=xe},"./src/response.js":function(Z,U,E){E.r(U),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var M=E("./src/limit.js"),H=E("./src/cache.js"),q=E("./node_modules/cache-control-esm/index.js");function ee(te,ue,re,ie,ye,Te,Se){try{var $e=te[Te](Se),Pe=$e.value}catch(ze){re(ze);return}$e.done?ue(Pe):Promise.resolve(Pe).then(ie,ye)}function ve(te){return function(){var ue=this,re=arguments;return new Promise(function(ie,ye){var Te=te.apply(ue,re);function Se(Pe){ee(Te,ie,ye,Se,$e,"next",Pe)}function $e(Pe){ee(Te,ie,ye,Se,$e,"throw",Pe)}Se(void 0)})}}function xe(te,ue,re){return be.apply(this,arguments)}function be(){return be=ve(regeneratorRuntime.mark(function te(ue,re,ie){var ye,Te,Se,$e,Pe;return regeneratorRuntime.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(ye=ie.request,Te=ye===void 0?{}:ye,Se=ie.headers,$e=Se===void 0?{}:Se,!(["arraybuffer","blob"].indexOf(Te.responseType)>-1)){Xe.next=3;break}return Xe.abrupt("return",ie);case 3:if(Pe={},ue.readHeaders&&($e["cache-control"]?(Pe=Object(q.parse)($e["cache-control"]),(Pe.noCache||Pe.noStore)&&(ue.excludeFromCache=!0)):$e.expires?ue.expires=new Date($e.expires).getTime():ue.expires=new Date().getTime()),ue.excludeFromCache){Xe.next=15;break}if(Pe.maxAge||Pe.maxAge===0?ue.expires=Date.now()+Pe.maxAge*1e3:ue.readHeaders||(ue.expires=ue.maxAge===0?Date.now():Date.now()+ue.maxAge),!ue.limit){Xe.next=11;break}return ue.debug("Detected limit: ".concat(ue.limit)),Xe.next=11,Object(M.default)(ue);case 11:return Xe.next=13,Object(H.write)(ue,re,ie);case 13:Xe.next=16;break;case 15:ie.request.excludedFromCache=!0;case 16:return Xe.abrupt("return",ie);case 17:case"end":return Xe.stop()}},te)})),be.apply(this,arguments)}U.default=xe},"./src/serialize.js":function(Z,U,E){E.r(U),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function M(ee,ve){if(ee==null)return{};var xe=H(ee,ve),be,te;if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(ee);for(te=0;te<ue.length;te++)be=ue[te],!(ve.indexOf(be)>=0)&&Object.prototype.propertyIsEnumerable.call(ee,be)&&(xe[be]=ee[be])}return xe}function H(ee,ve){if(ee==null)return{};var xe={},be=Object.keys(ee),te,ue;for(ue=0;ue<be.length;ue++)te=be[ue],!(ve.indexOf(te)>=0)&&(xe[te]=ee[te]);return xe}function q(ee,ve,xe){if(xe.data)try{xe.data=JSON.parse(xe.data)}catch(te){ee.debug("Could not parse data as JSON",te)}xe.request,xe.config;var be=M(xe,["request","config"]);return be}U.default=q},"./src/utilities.js":function(Z,U,E){E.r(U),E.d(U,"isObject",function(){return H}),E.d(U,"getTag",function(){return q}),E.d(U,"isFunction",function(){return ee}),E.d(U,"isString",function(){return ve}),E.d(U,"mapObject",function(){return xe}),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function M(be){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(ue){return typeof ue}:M=function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},M(be)}function H(be){var te=M(be);return be!=null&&(te==="object"||te==="function")}function q(be){return be===null?be===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(be)}function ee(be){if(!H(be))return!1;var te=q(be);return te==="[object Function]"||te==="[object AsyncFunction]"||te==="[object GeneratorFunction]"||te==="[object Proxy]"}function ve(be){var te=M(be);return te==="string"||te==="object"&&be!=null&&!Array.isArray(be)&&q(be)==="[object String]"}function xe(be,te){return H(be)?Object.keys(be).map(function(ue){return te(be[ue],ue)}):[]}},axios:function(Z,U){Z.exports=ne},util:function(Z,U){Z.exports=I.default}})})});const J={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},Y=R.setupCache({maxAge:60*60*24*1e3}),de=w.default.create({adapter:Y.adapter}),G=async($,D={})=>{const ne={...J,...D},[Z,U]=i.lngLatToGoogle($,ne.zoomBase),E=ne.tileUrl.replace("{z}",String(ne.zoomBase)).replace("{x}",String(Z)).replace("{y}",String(U)),M={code:"",prefecture:"",city:""};let H;try{const ve=await de.get(E,{responseType:"arraybuffer"});H=Buffer.from(ve.data,"binary")}catch(ve){throw new Error(ve)}const q=new g.VectorTile(new b.default(H));let ee=Object.keys(q.layers);return Array.isArray(ee)||(ee=[ee]),ee.forEach(ve=>{const xe=q.layers[ve];if(xe&&ne.layer===xe.name)for(let be=0;be<xe.length;be++){const te=xe.feature(be).toGeoJSON(Z,U,ne.zoomBase);ee.length>1&&(te.properties.vt_layer=ve);const ue={type:"FeatureCollection",features:[te]};t.geoContains(ue,$)&&(M.code=String(te.id).length===5?String(te.id):`0${String(te.id)}`,M.prefecture=te.properties.prefecture,M.city=te.properties.city)}}),M};e.openReverseGeocoder=G})(fI);const DR={defaultComment:"更新地址",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},BR={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},NR={defaultComment:"住所を更新",postcodeField:{key:"addr:postcode",displayName:"郵便番号",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"都道府県",placeholder:"東京都",adminLevel:4},{key:"addr:city",displayName:"市町村と東京23区",placeholder:"千代田区",adminLevel:7},{key:"addr:suburb",displayName:"政令指定都市の区",placeholder:""},{key:"addr:quarter",displayName:"地名",placeholder:"外神田",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"丁目",placeholder:"1丁目"},{key:"addr:block_number",displayName:"番地",placeholder:"17"},{key:"addr:housenumber",displayName:"号",placeholder:"6",prefix:"-"}]},UR={defaultComment:"주소 업데이트",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},oE={JPN:NR,CHN:DR,DEU:BR,KOR:UR};function TA(e,t,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function $R(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!sE(e[0])||!sE(e[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:e};return TA(a,t,i)}function VR(e,t,i){i===void 0&&(i={});for(var a=0,c=e;a<c.length;a++){var d=c[a];if(d.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<d[d.length-1].length;g++)if(d[d.length-1][g]!==d[0][g])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return TA(l,t,i)}function sE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function CA(e,t,i){if(e!==null)for(var a,c,d,g,l,b,w,I=0,C=0,k,R=e.type,J=R==="FeatureCollection",Y=R==="Feature",de=J?e.features.length:1,G=0;G<de;G++){w=J?e.features[G].geometry:Y?e.geometry:e,k=w?w.type==="GeometryCollection":!1,l=k?w.geometries.length:1;for(var $=0;$<l;$++){var D=0,ne=0;if(g=k?w.geometries[$]:w,g!==null){b=g.coordinates;var Z=g.type;switch(I=i&&(Z==="Polygon"||Z==="MultiPolygon")?1:0,Z){case null:break;case"Point":if(t(b,C,G,D,ne)===!1)return!1;C++,D++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(t(b[a],C,G,D,ne)===!1)return!1;C++,Z==="MultiPoint"&&D++}Z==="LineString"&&D++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(c=0;c<b[a].length-I;c++){if(t(b[a][c],C,G,D,ne)===!1)return!1;C++}Z==="MultiLineString"&&D++,Z==="Polygon"&&ne++}Z==="Polygon"&&D++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(ne=0,c=0;c<b[a].length;c++){for(d=0;d<b[a][c].length-I;d++){if(t(b[a][c][d],C,G,D,ne)===!1)return!1;C++}ne++}D++}break;case"GeometryCollection":for(a=0;a<g.geometries.length;a++)if(CA(g.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function GR(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ZR(e){return e.type==="Feature"?e.geometry:e}function HR(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var a=GR(e),c=ZR(t),d=c.type,g=t.bbox,l=c.coordinates;if(g&&WR(a,g)===!1)return!1;d==="Polygon"&&(l=[l]);for(var b=!1,w=0;w<l.length&&!b;w++)if(aE(a,l[w][0],i.ignoreBoundary)){for(var I=!1,C=1;C<l[w].length&&!I;)aE(a,l[w][C],!i.ignoreBoundary)&&(I=!0),C++;I||(b=!0)}return b}function aE(e,t,i){var a=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,d=t.length-1;c<t.length;d=c++){var g=t[c][0],l=t[c][1],b=t[d][0],w=t[d][1],I=e[1]*(g-b)+l*(b-e[0])+w*(e[0]-g)===0&&(g-e[0])*(b-e[0])<=0&&(l-e[1])*(w-e[1])<=0;if(I)return!i;var C=l>e[1]!=w>e[1]&&e[0]<(b-g)*(e[1]-l)/(w-l)+g;C&&(a=!a)}return a}function WR(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function XR(e,t){t===void 0&&(t={});var i=0,a=0,c=0;return CA(e,function(d){i+=d[0],a+=d[1],c++},!0),$R([i/c,a/c],t.properties)}const qR=()=>{const[e,t]=yt.useState(!1);return{detectCountry:yt.useCallback(async(a,c)=>{t(!0);const g=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const l of g.features)if(HR([a,c],l.geometry))return console.log("country: ",l.properties),t(!1),l;t(!1)},[]),loadingCountry:e}},tv=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var l;const[c,d]=yt.useState((l=e.properties)==null?void 0:l[t.key]);yt.useEffect(()=>{var b;d((b=e.properties)==null?void 0:b[t.key])},[e]);const g=yt.useCallback(b=>{d(b.currentTarget.value),a&&a(b)},[]);return pt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[pt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),pt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:g}),pt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(b=>{if(parseInt(b.tags.admin_level)===t.adminLevel)return pt.jsx("option",{value:b.tags.name},b.id);if(b.type==="node"&&t.adminLevel===9)return pt.jsx("option",{value:b.tags.name},b.id)})})]})},KR=({feature:e,fields:t})=>e.properties?pt.jsxs(pt.Fragment,{children:[t.postcodeField&&pt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return pt.jsxs(pt.Fragment,{children:[pt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return pt.jsxs(pt.Fragment,{children:[pt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,YR=({placeholder:e,defaultValue:t})=>{const[i,a]=yt.useState(t);yt.useEffect(()=>{a(t)},[t]);const c=yt.useCallback(d=>{a(d.currentTarget.value)},[]);return pt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[pt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),pt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var Mg={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Mg.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,d="Expected a function",g="__lodash_hash_undefined__",l=1,b=2,w=1/0,I=9007199254740991,C="[object Arguments]",k="[object Array]",R="[object Boolean]",J="[object Date]",Y="[object Error]",de="[object Function]",G="[object GeneratorFunction]",$="[object Map]",D="[object Number]",ne="[object Object]",Z="[object Promise]",U="[object RegExp]",E="[object Set]",M="[object String]",H="[object Symbol]",q="[object WeakMap]",ee="[object ArrayBuffer]",ve="[object DataView]",xe="[object Float32Array]",be="[object Float64Array]",te="[object Int8Array]",ue="[object Int16Array]",re="[object Int32Array]",ie="[object Uint8Array]",ye="[object Uint8ClampedArray]",Te="[object Uint16Array]",Se="[object Uint32Array]",$e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,ze=/^\./,Xe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ze=/[\\^$.*+?()[\]{}|]/g,nt=/\\(\\)?/g,ct=/\w*$/,vt=/^\[object .+?Constructor\]$/,It=/^(?:0|[1-9]\d*)$/,ft={};ft[xe]=ft[be]=ft[te]=ft[ue]=ft[re]=ft[ie]=ft[ye]=ft[Te]=ft[Se]=!0,ft[C]=ft[k]=ft[ee]=ft[R]=ft[ve]=ft[J]=ft[Y]=ft[de]=ft[$]=ft[D]=ft[ne]=ft[U]=ft[E]=ft[M]=ft[q]=!1;var St={};St[C]=St[k]=St[ee]=St[ve]=St[R]=St[J]=St[xe]=St[be]=St[te]=St[ue]=St[re]=St[$]=St[D]=St[ne]=St[U]=St[E]=St[M]=St[H]=St[ie]=St[ye]=St[Te]=St[Se]=!0,St[Y]=St[de]=St[q]=!1;var Gt=typeof Nl=="object"&&Nl&&Nl.Object===Object&&Nl,Ut=typeof self=="object"&&self&&self.Object===Object&&self,cn=Gt||Ut||Function("return this")(),xn=t&&!t.nodeType&&t,yn=xn&&!0&&e&&!e.nodeType&&e,sn=yn&&yn.exports===xn,gn=sn&&Gt.process,se=function(){try{return gn&&gn.binding("util")}catch{}}(),j=se&&se.isTypedArray;function O(V,ge){return V.set(ge[0],ge[1]),V}function pe(V,ge){return V.add(ge),V}function Be(V,ge,Ue){switch(Ue.length){case 0:return V.call(ge);case 1:return V.call(ge,Ue[0]);case 2:return V.call(ge,Ue[0],Ue[1]);case 3:return V.call(ge,Ue[0],Ue[1],Ue[2])}return V.apply(ge,Ue)}function et(V,ge){for(var Ue=-1,it=V?V.length:0;++Ue<it&&ge(V[Ue],Ue,V)!==!1;);return V}function lt(V,ge){for(var Ue=-1,it=ge.length,Lt=V.length;++Ue<it;)V[Lt+Ue]=ge[Ue];return V}function le(V,ge,Ue,it){var Lt=-1,Tt=V?V.length:0;for(it&&Tt&&(Ue=V[++Lt]);++Lt<Tt;)Ue=ge(Ue,V[Lt],Lt,V);return Ue}function z(V,ge){for(var Ue=-1,it=V?V.length:0;++Ue<it;)if(ge(V[Ue],Ue,V))return!0;return!1}function B(V){return function(ge){return ge==null?i:ge[V]}}function Ee(V,ge){for(var Ue=-1,it=Array(V);++Ue<V;)it[Ue]=ge(Ue);return it}function Ge(V){return function(ge){return V(ge)}}function je(V,ge){return V==null?i:V[ge]}function at(V){var ge=!1;if(V!=null&&typeof V.toString!="function")try{ge=!!(V+"")}catch{}return ge}function jt(V){var ge=-1,Ue=Array(V.size);return V.forEach(function(it,Lt){Ue[++ge]=[Lt,it]}),Ue}function Tn(V,ge){return function(Ue){return V(ge(Ue))}}function vn(V){var ge=-1,Ue=Array(V.size);return V.forEach(function(it){Ue[++ge]=it}),Ue}var _t=Array.prototype,Rt=Function.prototype,nn=Object.prototype,wr=cn["__core-js_shared__"],fi=function(){var V=/[^.]+$/.exec(wr&&wr.keys&&wr.keys.IE_PROTO||"");return V?"Symbol(src)_1."+V:""}(),hn=Rt.toString,er=nn.hasOwnProperty,Le=hn.call(Object),oe=nn.toString,ce=RegExp("^"+hn.call(er).replace(Ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=sn?cn.Buffer:i,we=cn.Symbol,Ce=cn.Uint8Array,He=Tn(Object.getPrototypeOf,Object),Ve=Object.create,Oe=nn.propertyIsEnumerable,qe=_t.splice,ut=Object.getOwnPropertySymbols,ht=_e?_e.isBuffer:i,mt=Tn(Object.keys,Object),Jt=Math.max,un=ji(cn,"DataView"),Dt=ji(cn,"Map"),Qt=ji(cn,"Promise"),fn=ji(cn,"Set"),Rn=ji(cn,"WeakMap"),jn=ji(Object,"create"),Fn=!Oe.call({valueOf:1},"valueOf"),Mn=Po(un),ei=Po(Dt),qn=Po(Qt),br=Po(fn),Ur=Po(Rn),ri=we?we.prototype:i,Gs=ri?ri.valueOf:i,ms=ri?ri.toString:i;function wn(){}function gs(V){var ge=-1,Ue=V?V.length:0;for(this.clear();++ge<Ue;){var it=V[ge];this.set(it[0],it[1])}}function Gn(){this.__data__=jn?jn(null):{}}function cu(V){return this.has(V)&&delete this.__data__[V]}function rl(V){var ge=this.__data__;if(jn){var Ue=ge[V];return Ue===g?i:Ue}return er.call(ge,V)?ge[V]:i}function ti(V){var ge=this.__data__;return jn?ge[V]!==i:er.call(ge,V)}function Si(V,ge){var Ue=this.__data__;return Ue[V]=jn&&ge===i?g:ge,this}gs.prototype.clear=Gn,gs.prototype.delete=cu,gs.prototype.get=rl,gs.prototype.has=ti,gs.prototype.set=Si;function Ao(V){var ge=-1,Ue=V?V.length:0;for(this.clear();++ge<Ue;){var it=V[ge];this.set(it[0],it[1])}}function Oi(){this.__data__=[]}function $r(V){var ge=this.__data__,Ue=va(ge,V);if(Ue<0)return!1;var it=ge.length-1;return Ue==it?ge.pop():qe.call(ge,Ue,1),!0}function il(V){var ge=this.__data__,Ue=va(ge,V);return Ue<0?i:ge[Ue][1]}function Zs(V){return va(this.__data__,V)>-1}function ir(V,ge){var Ue=this.__data__,it=va(Ue,V);return it<0?Ue.push([V,ge]):Ue[it][1]=ge,this}Ao.prototype.clear=Oi,Ao.prototype.delete=$r,Ao.prototype.get=il,Ao.prototype.has=Zs,Ao.prototype.set=ir;function bn(V){var ge=-1,Ue=V?V.length:0;for(this.clear();++ge<Ue;){var it=V[ge];this.set(it[0],it[1])}}function ys(){this.__data__={hash:new gs,map:new(Dt||Ao),string:new gs}}function hr(V){return ba(this,V).delete(V)}function ol(V){return ba(this,V).get(V)}function Ri(V){return ba(this,V).has(V)}function hu(V,ge){return ba(this,V).set(V,ge),this}bn.prototype.clear=ys,bn.prototype.delete=hr,bn.prototype.get=ol,bn.prototype.has=Ri,bn.prototype.set=hu;function Ji(V){var ge=-1,Ue=V?V.length:0;for(this.__data__=new bn;++ge<Ue;)this.add(V[ge])}function hc(V){return this.__data__.set(V,g),this}function fu(V){return this.__data__.has(V)}Ji.prototype.add=Ji.prototype.push=hc,Ji.prototype.has=fu;function di(V){this.__data__=new Ao(V)}function sl(){this.__data__=new Ao}function Wo(V){return this.__data__.delete(V)}function du(V){return this.__data__.get(V)}function ga(V){return this.__data__.has(V)}function fc(V,ge){var Ue=this.__data__;if(Ue instanceof Ao){var it=Ue.__data__;if(!Dt||it.length<c-1)return it.push([V,ge]),this;Ue=this.__data__=new bn(it)}return Ue.set(V,ge),this}di.prototype.clear=sl,di.prototype.delete=Wo,di.prototype.get=du,di.prototype.has=ga,di.prototype.set=fc;function dc(V,ge){var Ue=Gr(V)||Ks(V)?Ee(V.length,String):[],it=Ue.length,Lt=!!it;for(var Tt in V)(ge||er.call(V,Tt))&&!(Lt&&(Tt=="length"||Jn(Tt,it)))&&Ue.push(Tt);return Ue}function ya(V,ge,Ue){(Ue!==i&&!vo(V[ge],Ue)||typeof ge=="number"&&Ue===i&&!(ge in V))&&(V[ge]=Ue)}function al(V,ge,Ue){var it=V[ge];(!(er.call(V,ge)&&vo(it,Ue))||Ue===i&&!(ge in V))&&(V[ge]=Ue)}function va(V,ge){for(var Ue=V.length;Ue--;)if(vo(V[Ue][0],ge))return Ue;return-1}function Oh(V,ge){return V&&vu(ge,Qi(ge),V)}function vs(V,ge,Ue,it,Lt,Tt,Zt){var Xt;if(it&&(Xt=Tt?it(V,Lt,Tt,Zt):it(V)),Xt!==i)return Xt;if(!ii(V))return V;var dn=Gr(V);if(dn){if(Xt=wc(V),!ge)return _c(V,Xt)}else{var Zn=Vr(V),En=Zn==de||Zn==G;if(Ys(V))return vl(V,ge);if(Zn==ne||Zn==C||En&&!Tt){if(at(V))return Tt?V:{};if(Xt=Eu(En?{}:V),!ge)return jh(V,Oh(Xt,V))}else{if(!St[Zn])return Tt?V:{};Xt=Dn(V,Zn,vs,ge)}}Zt||(Zt=new di);var Un=Zt.get(V);if(Un)return Un;if(Zt.set(V,Xt),!dn)var sr=Ue?Ws(V):Qi(V);return et(sr||V,function(ar,tr){sr&&(tr=ar,ar=V[tr]),al(Xt,tr,vs(ar,ge,Ue,it,tr,V,Zt))}),Xt}function pc(V){return ii(V)?Ve(V):{}}var ll=Bh(gc),mc=_u();function gc(V,ge){return V&&mc(V,ge,Qi)}function ul(V,ge){ge=Sn(ge,V)?[ge]:yl(ge);for(var Ue=0,it=ge.length;V!=null&&Ue<it;)V=V[bs(ge[Ue++])];return Ue&&Ue==it?V:i}function pu(V,ge,Ue){var it=ge(V);return Gr(V)?it:lt(it,Ue(V))}function _s(V){return oe.call(V)}function cl(V,ge){return V!=null&&ge in Object(V)}function pi(V,ge,Ue,it,Lt){return V===ge?!0:V==null||ge==null||!ii(V)&&!ko(ge)?V!==V&&ge!==ge:hl(V,ge,pi,Ue,it,Lt)}function hl(V,ge,Ue,it,Lt,Tt){var Zt=Gr(V),Xt=Gr(ge),dn=k,Zn=k;Zt||(dn=Vr(V),dn=dn==C?ne:dn),Xt||(Zn=Vr(ge),Zn=Zn==C?ne:Zn);var En=dn==ne&&!at(V),Un=Zn==ne&&!at(ge),sr=dn==Zn;if(sr&&!En)return Tt||(Tt=new di),Zt||Qn(V)?wa(V,ge,Ue,it,Lt,Tt):xu(V,ge,dn,Ue,it,Lt,Tt);if(!(Lt&b)){var ar=En&&er.call(V,"__wrapped__"),tr=Un&&er.call(ge,"__wrapped__");if(ar||tr){var Jo=ar?V.value():V,eo=tr?ge.value():ge;return Tt||(Tt=new di),Ue(Jo,eo,it,Lt,Tt)}}return sr?(Tt||(Tt=new di),wu(V,ge,Ue,it,Lt,Tt)):!1}function fl(V,ge,Ue,it){var Lt=Ue.length,Tt=Lt,Zt=!it;if(V==null)return!Tt;for(V=Object(V);Lt--;){var Xt=Ue[Lt];if(Zt&&Xt[2]?Xt[1]!==V[Xt[0]]:!(Xt[0]in V))return!1}for(;++Lt<Tt;){Xt=Ue[Lt];var dn=Xt[0],Zn=V[dn],En=Xt[1];if(Zt&&Xt[2]){if(Zn===i&&!(dn in V))return!1}else{var Un=new di;if(it)var sr=it(Zn,En,dn,V,ge,Un);if(!(sr===i?pi(En,Zn,it,l|b,Un):sr))return!1}}return!0}function _a(V){if(!ii(V)||or(V))return!1;var ge=Ea(V)||at(V)?ce:vt;return ge.test(Po(V))}function dl(V){return ko(V)&&Ta(V.length)&&!!ft[oe.call(V)]}function xs(V){return typeof V=="function"?V:V==null?Ts:typeof V=="object"?Gr(V)?Ei(V[0],V[1]):pl(V):Au(V)}function Xo(V){if(!Wn(V))return mt(V);var ge=[];for(var Ue in Object(V))er.call(V,Ue)&&Ue!="constructor"&&ge.push(Ue);return ge}function In(V){if(!ii(V))return Cu(V);var ge=Wn(V),Ue=[];for(var it in V)it=="constructor"&&(ge||!er.call(V,it))||Ue.push(it);return Ue}function pl(V){var ge=bu(V);return ge.length==1&&ge[0][2]?Tu(ge[0][0],ge[0][1]):function(Ue){return Ue===V||fl(Ue,V,ge)}}function Ei(V,ge){return Sn(V)&&qs(ge)?Tu(bs(V),ge):function(Ue){var it=Es(Ue,V);return it===i&&it===ge?Js(Ue,V):pi(ge,it,i,l|b)}}function mi(V,ge,Ue,it,Lt){if(V!==ge){if(!(Gr(ge)||Qn(ge)))var Tt=In(ge);et(Tt||ge,function(Zt,Xt){if(Tt&&(Xt=Zt,Zt=ge[Xt]),ii(Zt))Lt||(Lt=new di),mu(V,ge,Xt,Ue,mi,it,Lt);else{var dn=it?it(V[Xt],Zt,Xt+"",V,ge,Lt):i;dn===i&&(dn=Zt),ya(V,Xt,dn)}})}}function mu(V,ge,Ue,it,Lt,Tt,Zt){var Xt=V[Ue],dn=ge[Ue],Zn=Zt.get(dn);if(Zn){ya(V,Ue,Zn);return}var En=Tt?Tt(Xt,dn,Ue+"",V,ge,Zt):i,Un=En===i;Un&&(En=dn,Gr(dn)||Qn(dn)?Gr(Xt)?En=Xt:Sl(Xt)?En=_c(Xt):(Un=!1,En=vs(dn,!0)):Ca(dn)||Ks(dn)?Ks(Xt)?En=Ko(Xt):!ii(Xt)||it&&Ea(Xt)?(Un=!1,En=vs(dn,!0)):En=Xt:Un=!1),Un&&(Zt.set(dn,En),Lt(En,dn,it,Tt,Zt),Zt.delete(dn)),ya(V,Ue,En)}function ml(V){return function(ge){return ul(ge,V)}}function gl(V,ge){return ge=Jt(ge===i?V.length-1:ge,0),function(){for(var Ue=arguments,it=-1,Lt=Jt(Ue.length-ge,0),Tt=Array(Lt);++it<Lt;)Tt[it]=Ue[ge+it];it=-1;for(var Zt=Array(ge+1);++it<ge;)Zt[it]=Ue[it];return Zt[ge]=Tt,Be(V,this,Zt)}}function gu(V){if(typeof V=="string")return V;if(Ia(V))return ms?ms.call(V):"";var ge=V+"";return ge=="0"&&1/V==-w?"-0":ge}function yl(V){return Gr(V)?V:xl(V)}function vl(V,ge){if(ge)return V.slice();var Ue=new V.constructor(V.length);return V.copy(Ue),Ue}function xa(V){var ge=new V.constructor(V.byteLength);return new Ce(ge).set(new Ce(V)),ge}function yu(V,ge){var Ue=ge?xa(V.buffer):V.buffer;return new V.constructor(Ue,V.byteOffset,V.byteLength)}function _l(V,ge,Ue){var it=ge?Ue(jt(V),!0):jt(V);return le(it,O,new V.constructor)}function yc(V){var ge=new V.constructor(V.source,ct.exec(V));return ge.lastIndex=V.lastIndex,ge}function vc(V,ge,Ue){var it=ge?Ue(vn(V),!0):vn(V);return le(it,pe,new V.constructor)}function Hs(V){return Gs?Object(Gs.call(V)):{}}function Rh(V,ge){var Ue=ge?xa(V.buffer):V.buffer;return new V.constructor(Ue,V.byteOffset,V.length)}function _c(V,ge){var Ue=-1,it=V.length;for(ge||(ge=Array(it));++Ue<it;)ge[Ue]=V[Ue];return ge}function vu(V,ge,Ue,it){Ue||(Ue={});for(var Lt=-1,Tt=ge.length;++Lt<Tt;){var Zt=ge[Lt],Xt=it?it(Ue[Zt],V[Zt],Zt,Ue,V):i;al(Ue,Zt,Xt===i?V[Zt]:Xt)}return Ue}function jh(V,ge){return vu(V,Su(V),ge)}function Dh(V){return gl(function(ge,Ue){var it=-1,Lt=Ue.length,Tt=Lt>1?Ue[Lt-1]:i,Zt=Lt>2?Ue[2]:i;for(Tt=V.length>3&&typeof Tt=="function"?(Lt--,Tt):i,Zt&&Nh(Ue[0],Ue[1],Zt)&&(Tt=Lt<3?i:Tt,Lt=1),ge=Object(ge);++it<Lt;){var Xt=Ue[it];Xt&&V(ge,Xt,it,Tt)}return ge})}function Bh(V,ge){return function(Ue,it){if(Ue==null)return Ue;if(!Ss(Ue))return V(Ue,it);for(var Lt=Ue.length,Tt=ge?Lt:-1,Zt=Object(Ue);(ge?Tt--:++Tt<Lt)&&it(Zt[Tt],Tt,Zt)!==!1;);return Ue}}function _u(V){return function(ge,Ue,it){for(var Lt=-1,Tt=Object(ge),Zt=it(ge),Xt=Zt.length;Xt--;){var dn=Zt[V?Xt:++Lt];if(Ue(Tt[dn],dn,Tt)===!1)break}return ge}}function wa(V,ge,Ue,it,Lt,Tt){var Zt=Lt&b,Xt=V.length,dn=ge.length;if(Xt!=dn&&!(Zt&&dn>Xt))return!1;var Zn=Tt.get(V);if(Zn&&Tt.get(ge))return Zn==ge;var En=-1,Un=!0,sr=Lt&l?new Ji:i;for(Tt.set(V,ge),Tt.set(ge,V);++En<Xt;){var ar=V[En],tr=ge[En];if(it)var Jo=Zt?it(tr,ar,En,ge,V,Tt):it(ar,tr,En,V,ge,Tt);if(Jo!==i){if(Jo)continue;Un=!1;break}if(sr){if(!z(ge,function(eo,Qo){if(!sr.has(Qo)&&(ar===eo||Ue(ar,eo,it,Lt,Tt)))return sr.add(Qo)})){Un=!1;break}}else if(!(ar===tr||Ue(ar,tr,it,Lt,Tt))){Un=!1;break}}return Tt.delete(V),Tt.delete(ge),Un}function xu(V,ge,Ue,it,Lt,Tt,Zt){switch(Ue){case ve:if(V.byteLength!=ge.byteLength||V.byteOffset!=ge.byteOffset)return!1;V=V.buffer,ge=ge.buffer;case ee:return!(V.byteLength!=ge.byteLength||!it(new Ce(V),new Ce(ge)));case R:case J:case D:return vo(+V,+ge);case Y:return V.name==ge.name&&V.message==ge.message;case U:case M:return V==ge+"";case $:var Xt=jt;case E:var dn=Tt&b;if(Xt||(Xt=vn),V.size!=ge.size&&!dn)return!1;var Zn=Zt.get(V);if(Zn)return Zn==ge;Tt|=l,Zt.set(V,ge);var En=wa(Xt(V),Xt(ge),it,Lt,Tt,Zt);return Zt.delete(V),En;case H:if(Gs)return Gs.call(V)==Gs.call(ge)}return!1}function wu(V,ge,Ue,it,Lt,Tt){var Zt=Lt&b,Xt=Qi(V),dn=Xt.length,Zn=Qi(ge),En=Zn.length;if(dn!=En&&!Zt)return!1;for(var Un=dn;Un--;){var sr=Xt[Un];if(!(Zt?sr in ge:er.call(ge,sr)))return!1}var ar=Tt.get(V);if(ar&&Tt.get(ge))return ar==ge;var tr=!0;Tt.set(V,ge),Tt.set(ge,V);for(var Jo=Zt;++Un<dn;){sr=Xt[Un];var eo=V[sr],Qo=ge[sr];if(it)var Pa=Zt?it(Qo,eo,sr,ge,V,Tt):it(eo,Qo,sr,V,ge,Tt);if(!(Pa===i?eo===Qo||Ue(eo,Qo,it,Lt,Tt):Pa)){tr=!1;break}Jo||(Jo=sr=="constructor")}if(tr&&!Jo){var Mo=V.constructor,Di=ge.constructor;Mo!=Di&&"constructor"in V&&"constructor"in ge&&!(typeof Mo=="function"&&Mo instanceof Mo&&typeof Di=="function"&&Di instanceof Di)&&(tr=!1)}return Tt.delete(V),Tt.delete(ge),tr}function Ws(V){return pu(V,Qi,Su)}function xc(){var V=wn.iteratee||El;return V=V===El?xs:V,arguments.length?V(arguments[0],arguments[1]):V}function ba(V,ge){var Ue=V.__data__;return ws(ge)?Ue[typeof ge=="string"?"string":"hash"]:Ue.map}function bu(V){for(var ge=Qi(V),Ue=ge.length;Ue--;){var it=ge[Ue],Lt=V[it];ge[Ue]=[it,Lt,qs(Lt)]}return ge}function ji(V,ge){var Ue=je(V,ge);return _a(Ue)?Ue:i}var Su=ut?Tn(ut,Object):Pu,Vr=_s;(un&&Vr(new un(new ArrayBuffer(1)))!=ve||Dt&&Vr(new Dt)!=$||Qt&&Vr(Qt.resolve())!=Z||fn&&Vr(new fn)!=E||Rn&&Vr(new Rn)!=q)&&(Vr=function(V){var ge=oe.call(V),Ue=ge==ne?V.constructor:i,it=Ue?Po(Ue):i;if(it)switch(it){case Mn:return ve;case ei:return $;case qn:return Z;case br:return E;case Ur:return q}return ge});function Xs(V,ge,Ue){ge=Sn(ge,V)?[ge]:yl(ge);for(var it,Lt=-1,Zt=ge.length;++Lt<Zt;){var Tt=bs(ge[Lt]);if(!(it=V!=null&&Ue(V,Tt)))break;V=V[Tt]}if(it)return it;var Zt=V?V.length:0;return!!Zt&&Ta(Zt)&&Jn(Tt,Zt)&&(Gr(V)||Ks(V))}function wc(V){var ge=V.length,Ue=V.constructor(ge);return ge&&typeof V[0]=="string"&&er.call(V,"index")&&(Ue.index=V.index,Ue.input=V.input),Ue}function Eu(V){return typeof V.constructor=="function"&&!Wn(V)?pc(He(V)):{}}function Dn(V,ge,Ue,it){var Lt=V.constructor;switch(ge){case ee:return xa(V);case R:case J:return new Lt(+V);case ve:return yu(V,it);case xe:case be:case te:case ue:case re:case ie:case ye:case Te:case Se:return Rh(V,it);case $:return _l(V,it,Ue);case D:case M:return new Lt(V);case U:return yc(V);case E:return vc(V,it,Ue);case H:return Hs(V)}}function Jn(V,ge){return ge=ge??I,!!ge&&(typeof V=="number"||It.test(V))&&V>-1&&V%1==0&&V<ge}function Nh(V,ge,Ue){if(!ii(Ue))return!1;var it=typeof ge;return(it=="number"?Ss(Ue)&&Jn(ge,Ue.length):it=="string"&&ge in Ue)?vo(Ue[ge],V):!1}function Sn(V,ge){if(Gr(V))return!1;var Ue=typeof V;return Ue=="number"||Ue=="symbol"||Ue=="boolean"||V==null||Ia(V)?!0:Pe.test(V)||!$e.test(V)||ge!=null&&V in Object(ge)}function ws(V){var ge=typeof V;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?V!=="__proto__":V===null}function or(V){return!!fi&&fi in V}function Wn(V){var ge=V&&V.constructor,Ue=typeof ge=="function"&&ge.prototype||nn;return V===Ue}function qs(V){return V===V&&!ii(V)}function Tu(V,ge){return function(Ue){return Ue==null?!1:Ue[V]===ge&&(ge!==i||V in Object(Ue))}}function Cu(V){var ge=[];if(V!=null)for(var Ue in Object(V))ge.push(Ue);return ge}var xl=qo(function(V){V=oi(V);var ge=[];return ze.test(V)&&ge.push(""),V.replace(Xe,function(Ue,it,Lt,Tt){ge.push(Lt?Tt.replace(nt,"$1"):it||Ue)}),ge});function bs(V){if(typeof V=="string"||Ia(V))return V;var ge=V+"";return ge=="0"&&1/V==-w?"-0":ge}function Po(V){if(V!=null){try{return hn.call(V)}catch{}try{return V+""}catch{}}return""}function wl(V){for(var ge=-1,Ue=V?V.length:0,it=0,Lt=[];++ge<Ue;){var Tt=V[ge];Tt&&(Lt[it++]=Tt)}return Lt}function bl(V,ge){var Ue=Gr(V)?et:ll;return Ue(V,xc(ge,3))}function qo(V,ge){if(typeof V!="function"||ge&&typeof ge!="function")throw new TypeError(d);var Ue=function(){var it=arguments,Lt=ge?ge.apply(this,it):it[0],Tt=Ue.cache;if(Tt.has(Lt))return Tt.get(Lt);var Zt=V.apply(this,it);return Ue.cache=Tt.set(Lt,Zt),Zt};return Ue.cache=new(qo.Cache||bn),Ue}qo.Cache=bn;function Sa(V){return vs(V,!1,!0)}function vo(V,ge){return V===ge||V!==V&&ge!==ge}function Ks(V){return Sl(V)&&er.call(V,"callee")&&(!Oe.call(V,"callee")||oe.call(V)==C)}var Gr=Array.isArray;function Ss(V){return V!=null&&Ta(V.length)&&!Ea(V)}function Sl(V){return ko(V)&&Ss(V)}var Ys=ht||ku;function Iu(V){if(Ss(V)&&(Gr(V)||typeof V=="string"||typeof V.splice=="function"||Ys(V)||Ks(V)))return!V.length;var ge=Vr(V);if(ge==$||ge==E)return!V.size;if(Fn||Wn(V))return!mt(V).length;for(var Ue in V)if(er.call(V,Ue))return!1;return!0}function Ea(V){var ge=ii(V)?oe.call(V):"";return ge==de||ge==G}function Ta(V){return typeof V=="number"&&V>-1&&V%1==0&&V<=I}function ii(V){var ge=typeof V;return!!V&&(ge=="object"||ge=="function")}function ko(V){return!!V&&typeof V=="object"}function Ca(V){if(!ko(V)||oe.call(V)!=ne||at(V))return!1;var ge=He(V);if(ge===null)return!0;var Ue=er.call(ge,"constructor")&&ge.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&hn.call(Ue)==Le}function Ia(V){return typeof V=="symbol"||ko(V)&&oe.call(V)==H}var Qn=j?Ge(j):dl;function Ko(V){return vu(V,Yo(V))}function oi(V){return V==null?"":gu(V)}function Es(V,ge,Ue){var it=V==null?i:ul(V,ge);return it===i?Ue:it}function Js(V,ge){return V!=null&&Xs(V,ge,cl)}function Qi(V){return Ss(V)?dc(V):Xo(V)}function Yo(V){return Ss(V)?dc(V,!0):In(V)}var Aa=Dh(function(V,ge,Ue){mi(V,ge,Ue)});function Ts(V){return V}function El(V){return xs(typeof V=="function"?V:vs(V,!0))}function Au(V){return Sn(V)?B(bs(V)):ml(V)}function Pu(){return[]}function ku(){return!1}wn.compact=wl,wn.iteratee=El,wn.keys=Qi,wn.keysIn=Yo,wn.memoize=qo,wn.merge=Aa,wn.property=Au,wn.toPlainObject=Ko,wn.clone=Sa,wn.eq=vo,wn.forEach=bl,wn.get=Es,wn.hasIn=Js,wn.identity=Ts,wn.isArguments=Ks,wn.isArray=Gr,wn.isArrayLike=Ss,wn.isArrayLikeObject=Sl,wn.isBuffer=Ys,wn.isEmpty=Iu,wn.isFunction=Ea,wn.isLength=Ta,wn.isObject=ii,wn.isObjectLike=ko,wn.isPlainObject=Ca,wn.isSymbol=Ia,wn.isTypedArray=Qn,wn.stubArray=Pu,wn.stubFalse=ku,wn.toString=oi,wn.each=bl,wn.VERSION=a,yn&&((yn.exports=wn)._=wn,xn._=wn)}).call(Nl)})(Mg,Mg.exports);var JR=Mg.exports,QR=Pm;function Pm(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)Pm(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)Pm(e.geometries[a],t);else if(i==="Feature")Pm(e.geometry,t);else if(i==="Polygon")lE(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)lE(e.coordinates[a],t);return e}function lE(e,t){if(e.length!==0){uE(e[0],t);for(var i=1;i<e.length;i++)uE(e[i],!t)}}function uE(e,t){for(var i=0,a=0,c=0,d=e.length,g=d-1;c<d;g=c++){var l=(e[c][0]-e[g][0])*(e[g][1]+e[c][1]),b=i+l;a+=Math.abs(i)>=Math.abs(l)?i-b+l:l-b+i,i=b}i+a>=0!=!!t&&e.reverse()}const ej=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var nv,cE;function tj(){return cE||(cE=1,nv=ej),nv}var zn=JR,um=QR,km={};tj().forEach(function(e){if(e.polygon==="all")km[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),km[e.key]={},km[e.key][t]=i}});function nj(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:zn.merge(e,t)}var Lg={};Lg=function(e,t,i){t=zn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:km,deduplicator:nj},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=d(e):a=c(e),a;function c(b){var w=new Array,I=new Array,C=new Array;function k(Z){var U=zn.clone(Z);U.lat=Z.center.lat,U.lon=Z.center.lon,U.__is_center_placeholder=!0,w.push(U)}function R(Z){var U=zn.clone(Z);U.nodes=[];function E(M,H,q){var ee={type:"node",id:"_"+U.type+"/"+U.id+"bounds"+q,lat:M,lon:H};U.nodes.push(ee.id),w.push(ee)}E(U.bounds.minlat,U.bounds.minlon,1),E(U.bounds.maxlat,U.bounds.minlon,2),E(U.bounds.maxlat,U.bounds.maxlon,3),E(U.bounds.minlat,U.bounds.maxlon,4),U.nodes.push(U.nodes[0]),U.__is_bounds_placeholder=!0,I.push(U)}function J(Z){function U(E,M,H){var q={type:"node",id:H,lat:E,lon:M};w.push(q)}zn.isArray(Z.nodes)||(Z.nodes=Z.geometry.map(function(E){return E!==null?"_anonymous@"+E.lat+"/"+E.lon:"_anonymous@unknown_location"})),Z.geometry.forEach(function(E,M){E&&U(E.lat,E.lon,Z.nodes[M])})}function Y(Z){function U(M,H,q){var ee={type:"node",id:q,lat:M,lon:H};w.push(ee)}function E(M,H){if(I.some(function(ve){return ve.type=="way"&&ve.id==H}))return;var q={type:"way",id:H,nodes:[]};function ee(ve,xe){var be={type:"node",id:"_anonymous@"+ve+"/"+xe,lat:ve,lon:xe};q.nodes.push(be.id),w.push(be)}M.forEach(function(ve){ve?ee(ve.lat,ve.lon):q.nodes.push(void 0)}),I.push(q)}Z.members.forEach(function(M,H){M.type=="node"?M.lat&&U(M.lat,M.lon,M.ref):M.type=="way"&&M.geometry&&(M.ref="_fullGeom"+M.ref,E(M.geometry,M.ref))})}for(var de=0;de<b.elements.length;de++)switch(b.elements[de].type){case"node":var G=b.elements[de];w.push(G);break;case"way":var $=zn.clone(b.elements[de]);$.nodes=zn.clone($.nodes),I.push($),$.center&&k($),$.geometry?J($):$.bounds&&R($);break;case"relation":var D=zn.clone(b.elements[de]);D.members=zn.clone(D.members),C.push(D);var ne=D.members&&D.members.some(function(Z){return Z.type=="node"&&Z.lat||Z.type=="way"&&Z.geometry&&Z.geometry.length>0});D.center&&k(D),ne?Y(D):D.bounds&&R(D);break}return g(w,I,C)}function d(b){var w=new Array,I=new Array,C=new Array;function k(D,ne,Z){D.hasAttribute(Z)&&(ne[Z]=D.getAttribute(Z))}function R(D,ne){var Z=zn.clone(D);k(ne,Z,"lat"),k(ne,Z,"lon"),Z.__is_center_placeholder=!0,w.push(Z)}function J(D,ne){var Z=zn.clone(D);Z.nodes=[];function U(E,M,H){var q={type:"node",id:"_"+Z.type+"/"+Z.id+"bounds"+H,lat:E,lon:M};Z.nodes.push(q.id),w.push(q)}U(ne.getAttribute("minlat"),ne.getAttribute("minlon"),1),U(ne.getAttribute("maxlat"),ne.getAttribute("minlon"),2),U(ne.getAttribute("maxlat"),ne.getAttribute("maxlon"),3),U(ne.getAttribute("minlat"),ne.getAttribute("maxlon"),4),Z.nodes.push(Z.nodes[0]),Z.__is_bounds_placeholder=!0,I.push(Z)}function Y(D,ne){function Z(U,E,M){var H={type:"node",id:M,lat:U,lon:E};return w.push(H),H.id}zn.isArray(D.nodes)||(D.nodes=[],zn.each(ne,function(U,E){D.nodes.push("_anonymous@"+U.getAttribute("lat")+"/"+U.getAttribute("lon"))})),zn.each(ne,function(U,E){U.getAttribute("lat")&&Z(U.getAttribute("lat"),U.getAttribute("lon"),D.nodes[E])})}function de(D,ne){function Z(E,M,H){var q={type:"node",id:H,lat:E,lon:M};w.push(q)}function U(E,M){if(I.some(function(ee){return ee.type=="way"&&ee.id==M}))return;var H={type:"way",id:M,nodes:[]};function q(ee,ve){var xe={type:"node",id:"_anonymous@"+ee+"/"+ve,lat:ee,lon:ve};H.nodes.push(xe.id),w.push(xe)}zn.each(E,function(ee){ee.getAttribute("lat")?q(ee.getAttribute("lat"),ee.getAttribute("lon")):H.nodes.push(void 0)}),I.push(H)}zn.each(ne,function(E,M){D.members[M].type=="node"?E.getAttribute("lat")&&Z(E.getAttribute("lat"),E.getAttribute("lon"),D.members[M].ref):D.members[M].type=="way"&&E.getElementsByTagName("nd").length>0&&(D.members[M].ref="_fullGeom"+D.members[M].ref,U(E.getElementsByTagName("nd"),D.members[M].ref))})}zn.each(b.getElementsByTagName("node"),function(D,ne){var Z={};zn.each(D.getElementsByTagName("tag"),function(E){Z[E.getAttribute("k")]=E.getAttribute("v")});var U={type:"node"};k(D,U,"id"),k(D,U,"lat"),k(D,U,"lon"),k(D,U,"version"),k(D,U,"timestamp"),k(D,U,"changeset"),k(D,U,"uid"),k(D,U,"user"),zn.isEmpty(Z)||(U.tags=Z),w.push(U)});var G,$;return zn.each(b.getElementsByTagName("way"),function(D,ne){var Z={},U=[];zn.each(D.getElementsByTagName("tag"),function(H){Z[H.getAttribute("k")]=H.getAttribute("v")});var E=!1;zn.each(D.getElementsByTagName("nd"),function(H,q){var ee;(ee=H.getAttribute("ref"))&&(U[q]=ee),!E&&H.getAttribute("lat")&&(E=!0)});var M={type:"way"};k(D,M,"id"),k(D,M,"version"),k(D,M,"timestamp"),k(D,M,"changeset"),k(D,M,"uid"),k(D,M,"user"),U.length>0&&(M.nodes=U),zn.isEmpty(Z)||(M.tags=Z),(G=D.getElementsByTagName("center")[0])&&R(M,G),E?Y(M,D.getElementsByTagName("nd")):($=D.getElementsByTagName("bounds")[0])&&J(M,$),I.push(M)}),zn.each(b.getElementsByTagName("relation"),function(D,ne){var Z={},U=[];zn.each(D.getElementsByTagName("tag"),function(H){Z[H.getAttribute("k")]=H.getAttribute("v")});var E=!1;zn.each(D.getElementsByTagName("member"),function(H,q){U[q]={},k(H,U[q],"ref"),k(H,U[q],"role"),k(H,U[q],"type"),(!E&&U[q].type=="node"&&H.getAttribute("lat")||U[q].type=="way"&&H.getElementsByTagName("nd").length>0)&&(E=!0)});var M={type:"relation"};k(D,M,"id"),k(D,M,"version"),k(D,M,"timestamp"),k(D,M,"changeset"),k(D,M,"uid"),k(D,M,"user"),U.length>0&&(M.members=U),zn.isEmpty(Z)||(M.tags=Z),(G=D.getElementsByTagName("center")[0])&&R(M,G),E?de(M,D.getElementsByTagName("member")):($=D.getElementsByTagName("bounds")[0])&&J(M,$),C.push(M)}),g(w,I,C)}function g(b,w,I){function C(ze,Xe){if(typeof Xe!="object"&&(Xe={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(ze,Xe);for(var Ze in ze)if(t.uninterestingTags[Ze]!==!0&&!(Xe[Ze]===!0||Xe[Ze]===ze[Ze]))return!0;return!1}function k(ze){var Xe={timestamp:ze.timestamp,version:ze.version,changeset:ze.changeset,user:ze.user,uid:ze.uid};for(var Ze in Xe)Xe[Ze]===void 0&&delete Xe[Ze];return Xe}for(var R=new Object,J=new Object,Y=0;Y<b.length;Y++){var de=b[Y];R[de.id]!==void 0&&(de=t.deduplicator(de,R[de.id])),R[de.id]=de,typeof de.tags<"u"&&C(de.tags)&&(J[de.id]=!0)}for(var Y=0;Y<I.length;Y++)if(zn.isArray(I[Y].members))for(var G=0;G<I[Y].members.length;G++)I[Y].members[G].type=="node"&&(J[I[Y].members[G].ref]=!0);for(var $=new Object,D=new Object,Y=0;Y<w.length;Y++){var ne=w[Y];if($[ne.id]&&(ne=t.deduplicator(ne,$[ne.id])),$[ne.id]=ne,zn.isArray(ne.nodes))for(var G=0;G<ne.nodes.length;G++)typeof ne.nodes[G]!="object"&&(D[ne.nodes[G]]=!0,ne.nodes[G]=R[ne.nodes[G]])}var Z=new Array;for(var U in R){var de=R[U];(!D[U]||J[U])&&Z.push(de)}for(var E=new Array,Y=0;Y<I.length;Y++){var M=I[Y];E[M.id]&&(M=t.deduplicator(M,E[M.id])),E[M.id]=M}var H={node:{},way:{},relation:{}};for(var U in E){var M=E[U];if(!zn.isArray(M.members)){t.verbose&&console.warn("Relation",M.type+"/"+M.id,"ignored because it has no members");continue}for(var G=0;G<M.members.length;G++){var q=M.members[G].type,ee=M.members[G].ref;if(typeof ee!="number"&&(ee=ee.replace("_fullGeom","")),!H[q]){t.verbose&&console.warn("Relation",M.type+"/"+M.id,"member",q+"/"+ee,"ignored because it has an invalid type");continue}typeof H[q][ee]>"u"&&(H[q][ee]=[]),H[q][ee].push({role:M.members[G].role,rel:M.id,reltags:M.tags})}}var ve,xe=[];for(Y=0;Y<Z.length;Y++){if(typeof Z[Y].lon>"u"||typeof Z[Y].lat>"u"){t.verbose&&console.warn("POI",Z[Y].type+"/"+Z[Y].id,"ignored because it lacks coordinates");continue}var be={type:"Feature",id:Z[Y].type+"/"+Z[Y].id,properties:{type:Z[Y].type,id:Z[Y].id,tags:Z[Y].tags||{},relations:H.node[Z[Y].id]||[],meta:k(Z[Y])},geometry:{type:"Point",coordinates:[+Z[Y].lon,+Z[Y].lat]}};Z[Y].__is_center_placeholder&&(be.properties.geometry="center"),i?i(be):xe.push(be)}for(var te=[],ue=[],Y=0;Y<I.length;Y++)if(E[I[Y].id]===I[Y]){if(typeof I[Y].tags<"u"&&(I[Y].tags.type=="route"||I[Y].tags.type=="waterway")){let Xe=function(Ze){var nt=!1,ct;ct=Ze.members.filter(function(St){return St.type==="way"}),ct=ct.map(function(St){var Gt=$[St.ref];if(Gt===void 0||Gt.nodes===void 0){t.verbose&&console.warn("Route "+Ze.type+"/"+Ze.id,"tainted by a missing or incomplete  way",St.type+"/"+St.ref),nt=!0;return}return{id:St.ref,role:St.role,way:Gt,nodes:Gt.nodes.filter(function(Ut){return Ut!==void 0?!0:(nt=!0,t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"tainted by a way",St.type+"/"+St.ref,"with a missing node"),!1)})}}),ct=zn.compact(ct);var vt;vt=rv(ct);var It=[];if(It=zn.compact(vt.map(function(St){return zn.compact(St.map(function(Gt){return[+Gt.lon,+Gt.lat]}))})),It.length==0)return t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"contains no coordinates"),!1;var ft={type:"Feature",id:Ze.type+"/"+Ze.id,properties:{type:Ze.type,id:Ze.id,tags:Ze.tags||{},relations:H[Ze.type][Ze.id]||[],meta:k(Ze)},geometry:{type:It.length===1?"LineString":"MultiLineString",coordinates:It.length===1?It[0]:It}};return nt&&(t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"is tainted"),ft.properties.tainted=!0),ft};var $e=Xe;if(!zn.isArray(I[Y].members)){t.verbose&&console.warn("Route",I[Y].type+"/"+I[Y].id,"ignored because it has no members");continue}if(I[Y].members.forEach(function(Ze){$[Ze.ref]&&!C($[Ze.ref].tags)&&($[Ze.ref].is_skippablerelationmember=!0)}),be=Xe(I[Y]),be===!1){t.verbose&&console.warn("Route relation",I[Y].type+"/"+I[Y].id,"ignored because it has invalid geometry");continue}i?i(um(be)):ue.push(be)}if(typeof I[Y].tags<"u"&&(I[Y].tags.type=="multipolygon"||I[Y].tags.type=="boundary")){let Ze=function(nt,ct){var vt=!1,It=ie?"way":"relation",ft=typeof nt.id=="number"?nt.id:+nt.id.replace("_fullGeom",""),St;St=ct.members.filter(function(O){return O.type==="way"}),St=St.map(function(O){var pe=$[O.ref];if(pe===void 0||pe.nodes===void 0){t.verbose&&console.warn("Multipolygon",It+"/"+ft,"tainted by a missing or incomplete way",O.type+"/"+O.ref),vt=!0;return}return{id:O.ref,role:O.role||"outer",way:pe,nodes:pe.nodes.filter(function(Be){return Be!==void 0?!0:(vt=!0,t.verbose&&console.warn("Multipolygon",It+"/"+ft,"tainted by a way",O.type+"/"+O.ref,"with a missing node"),!1)})}}),St=zn.compact(St);var Gt,Ut;Gt=rv(St.filter(function(O){return O.role==="outer"})),Ut=rv(St.filter(function(O){return O.role==="inner"}));var cn;function xn(O){var pe=function(z,B){for(var Ee=0;Ee<B.length;Ee++)if(et(B[Ee],z))return!0;return!1},Be=function(z){return z.map(function(B){return[+B.lat,+B.lon]})},et=function(z,B){for(var Ee=z[0],Ge=z[1],je=!1,at=0,jt=B.length-1;at<B.length;jt=at++){var Tn=B[at][0],vn=B[at][1],_t=B[jt][0],Rt=B[jt][1],nn=vn>Ge!=Rt>Ge&&Ee<(_t-Tn)*(Ge-vn)/(Rt-vn)+Tn;nn&&(je=!je)}return je},lt,le;for(O=Be(O),lt=0;lt<Gt.length;lt++)if(le=Be(Gt[lt]),pe(le,O))return lt}cn=Gt.map(function(O){return[O]});for(var yn=0;yn<Ut.length;yn++){var sn=xn(Ut[yn]);sn!==void 0?cn[sn].push(Ut[yn]):t.verbose&&console.warn("Multipolygon",It+"/"+ft,"contains an inner ring with no containing outer")}var gn=[];if(gn=zn.compact(cn.map(function(O){var pe=zn.compact(O.map(function(Be){if(Be.length<4){t.verbose&&console.warn("Multipolygon",It+"/"+ft,"contains a ring with less than four nodes");return}return zn.compact(Be.map(function(et){return[+et.lon,+et.lat]}))}));if(pe.length==0){t.verbose&&console.warn("Multipolygon",It+"/"+ft,"contains an empty ring cluster");return}return pe})),gn.length==0)return t.verbose&&console.warn("Multipolygon",It+"/"+ft,"contains no coordinates"),!1;var se="MultiPolygon";gn.length===1&&(se="Polygon",gn=gn[0]);var j={type:"Feature",id:nt.type+"/"+ft,properties:{type:nt.type,id:ft,tags:nt.tags||{},relations:H[nt.type][nt.id]||[],meta:k(nt)},geometry:{type:se,coordinates:gn}};return vt&&(t.verbose&&console.warn("Multipolygon",It+"/"+ft,"is tainted"),j.properties.tainted=!0),j};var Pe=Ze;if(!zn.isArray(I[Y].members)){t.verbose&&console.warn("Multipolygon",I[Y].type+"/"+I[Y].id,"ignored because it has no members");continue}for(var re=0,G=0;G<I[Y].members.length;G++)I[Y].members[G].role=="outer"?re++:t.verbose&&I[Y].members[G].role!="inner"&&console.warn("Multipolygon",I[Y].type+"/"+I[Y].id,"member",I[Y].members[G].type+"/"+I[Y].members[G].ref,'ignored because it has an invalid role: "'+I[Y].members[G].role+'"');if(I[Y].members.forEach(function(nt){$[nt.ref]&&(nt.role==="outer"&&!C($[nt.ref].tags,I[Y].tags)&&($[nt.ref].is_skippablerelationmember=!0),nt.role==="inner"&&!C($[nt.ref].tags)&&($[nt.ref].is_skippablerelationmember=!0))}),re==0){t.verbose&&console.warn("Multipolygon relation",I[Y].type+"/"+I[Y].id,"ignored because it has no outer ways");continue}var ie=!1;re==1&&!C(I[Y].tags,{type:!0})&&(ie=!0);var be=null;if(!ie)be=Ze(I[Y],I[Y]);else{var ye=I[Y].members.filter(function(nt){return nt.role==="outer"})[0];if(ye=$[ye.ref],ye===void 0){t.verbose&&console.warn("Multipolygon relation",I[Y].type+"/"+I[Y].id,"ignored because outer way",ye.type+"/"+ye.ref,"is missing");continue}ye.is_skippablerelationmember=!0,be=Ze(ye,I[Y])}if(be===!1){t.verbose&&console.warn("Multipolygon relation",I[Y].type+"/"+I[Y].id,"ignored because it has invalid geometry");continue}i?i(um(be)):ue.push(be)}}for(var Y=0;Y<w.length;Y++)if($[w[Y].id]===w[Y]){if(!zn.isArray(w[Y].nodes)){t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"ignored because it has no nodes");continue}if(!w[Y].is_skippablerelationmember){typeof w[Y].id!="number"&&(w[Y].id=+w[Y].id.replace("_fullGeom","")),w[Y].tainted=!1,w[Y].hidden=!1;var Te=new Array;for(G=0;G<w[Y].nodes.length;G++)typeof w[Y].nodes[G]=="object"?Te.push([+w[Y].nodes[G].lon,+w[Y].nodes[G].lat]):(t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"is tainted by an invalid node"),w[Y].tainted=!0);if(Te.length<=1){t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"ignored because it contains too few nodes");continue}var Se="LineString";typeof w[Y].nodes[0]<"u"&&typeof w[Y].nodes[w[Y].nodes.length-1]<"u"&&w[Y].nodes[0].id===w[Y].nodes[w[Y].nodes.length-1].id&&(typeof w[Y].tags<"u"&&l(w[Y].tags)||w[Y].__is_bounds_placeholder)&&(Se="Polygon",Te=[Te]);var be={type:"Feature",id:w[Y].type+"/"+w[Y].id,properties:{type:w[Y].type,id:w[Y].id,tags:w[Y].tags||{},relations:H.way[w[Y].id]||[],meta:k(w[Y])},geometry:{type:Se,coordinates:Te}};w[Y].tainted&&(t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"is tainted"),be.properties.tainted=!0),w[Y].__is_bounds_placeholder&&(be.properties.geometry="bounds"),i?i(um(be)):Se=="LineString"?te.push(be):ue.push(be)}}return i?!0:(ve={type:"FeatureCollection",features:[]},ve.features=ve.features.concat(ue),ve.features=ve.features.concat(te),ve.features=ve.features.concat(xe),t.flatProperties&&ve.features.forEach(function(ze){ze.properties=zn.merge(ze.properties.meta,ze.properties.tags,{id:ze.properties.type+"/"+ze.properties.id})}),ve=um(ve),ve)}function l(b){var w=t.polygonFeatures;if(typeof w=="function")return w(b);if(b.area==="no")return!1;for(var I in b){var C=b[I],k=w[I];if(!(typeof k>"u")&&C!=="no"&&(k===!0||k.included_values&&k.included_values[C]===!0||k.excluded_values&&k.excluded_values[C]!==!0))return!0}return!1}};function rv(e){for(var t=function(C){return C[0]},i=function(C){return C[C.length-1]},a=function(C,k){return C!==void 0&&k!==void 0&&C.id===k.id},c=[],d,g,l,b,w,I;e.length;)for(d=e.pop().nodes.slice(),c.push(d);e.length&&!a(t(d),i(d));){for(g=t(d),l=i(d),b=0;b<e.length;b++)if(I=e[b].nodes,a(l,t(I))){w=d.push,I=I.slice(1);break}else if(a(l,i(I))){w=d.push,I=I.slice(0,-1).reverse();break}else if(a(g,i(I))){w=d.unshift,I=I.slice(0,-1);break}else if(a(g,t(I))){w=d.unshift,I=I.slice(1).reverse();break}else I=w=null;if(!I)break;e.splice(b,1),w.apply(d,I)}return c}Lg.toGeojson=Lg;var rj=Lg;const ij=zd(rj),iv={type:"FeatureCollection",features:[]},IA=()=>{const[e,t]=yt.useState(!1),i=yt.useCallback(async(g,l,b)=>{var Y,de;if(e||(console.log(b),b<16))return iv;t(!0);let w=300;b>17&&(w=200),b>18&&(w=100),b>19&&(w=50),console.log("overpass: loading...");let I="[out:json]";I+=`[timeout:25];
`,I+='nwr["building"]',I+=`(around:${w},${g},${l});
`,I+="out meta geom;",console.log(I);const C=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(I)}`,{});if(C.status!==200)return t(!1),iv;const k=await C.json();console.log("overpass json elements: ",k.elements);const R=ij(k);console.log("overpass osmtogeojson raw: ",R);for await(const G of R.features){if(!G.properties)continue;G.id=G.properties.id.split("/")[1];const $=(Y=k.elements.filter(ne=>G.id?typeof G.id=="number"?ne.id===G.id:ne.id===parseInt(G.id):!1))==null?void 0:Y[0];if($&&(G.properties.tags=$.tags,G.properties.nodes=$.nodes),G.geometry.type==="Polygon"){const ne=VR(G.geometry.coordinates);var J=XR(ne);G.properties.center=J.geometry.coordinates}G.geometry.type==="Point"&&(G.properties.center=G.geometry.coordinates);const D=G.properties.uid;if(D){let ne=localStorage.getItem(D+"-icon");if(ne===null){const Z=await Ds.getUser(D);(de=Z.img)!=null&&de.href?(ne=Z.img.href,localStorage.setItem(D+"-icon",Z.img.href)):localStorage.setItem(D+"-icon","")}G.properties.userIconHref=ne||""}}return console.log("overpass osmtogeojson converted: ",R),console.log("overpass: loaded."),t(!1),R},[]),[a,c]=yt.useState(!1),d=yt.useCallback(async g=>{console.log("overpass: loading...",g),c(!0);const l=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(l);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(l)}`,{});if(b.status!==200){c(!1);return}const w=await b.json();console.log("overpass json parent elements: ",w.elements);const I=250,C=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${I});
      out;
      `;console.log(C);const k=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(C)}`,{});if(k.status!==200){c(!1);return}const R=await k.json();console.log("overpass json child elements: ",R.elements);const J=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${I});
      out;
      `;console.log(J);const Y=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(J)}`,{});if(Y.status!==200){c(!1);return}const de=await Y.json();return console.log("overpass json neighbour elements: ",de.elements),c(!1),[...w.elements,...R.elements,...de.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:d,loadingOverpass:e,loadingOverpassAdmin:a}},oj=()=>pt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[pt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),pt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),pt.jsxs("datalist",{id:"source-list",children:[pt.jsx("option",{value:"survey"}),pt.jsx("option",{value:"local knowledge"}),pt.jsx("option",{value:"extrapolation"}),pt.jsx("option",{value:"estimation from existing data"})]})]}),ov={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},sj=({feature:e,onCancel:t,onSubmit:i})=>{var ve,xe,be,te;const{detectCountry:a,loadingCountry:c}=qR(),{fetchOverpassAdmin:d,loadingOverpassAdmin:g}=IA(),l=JSON.parse((ve=e.properties)==null?void 0:ve.center),[b,w]=yt.useState(void 0),[I,C]=yt.useState(),[k,R]=yt.useState(e),[J,Y]=yt.useState(!1),[de,G]=yt.useState(!1),[$,D]=yt.useState(!1),[ne,Z]=yt.useState(),[U,E]=yt.useState();yt.useEffect(()=>{Y(Ds.isLoggedIn())},[]),yt.useEffect(()=>{(async()=>{var re,ie;const ue=await a(l[0],l[1]);if(w(ue),(re=ue==null?void 0:ue.properties)!=null&&re.ISO_A3&&oE[ue.properties.ISO_A3]){const ye=oE[ue.properties.ISO_A3];C(ye);const Te=ye.defaultComment+" "+((ie=e.properties)==null?void 0:ie.id);E(Te)}})()},[e]),yt.useEffect(()=>{console.log(k.properties)},[k]);const M=yt.useCallback(async()=>{const ue=await fI.openReverseGeocoder([l[0],l[1]]);R(re=>{const ie={properties:{"addr:province":ue.prefecture,"addr:city":ue.city,...re.properties}};return re.properties=ie.properties,re})},[]),H=yt.useCallback(async()=>{if(!k.properties)return;k.properties.nodes;const ue=await d(JSON.parse(k.properties.nodes));console.log("onOverpassReverseGeocode",ue),Z(ue)},[k]),q=yt.useCallback(async ue=>{var Pe,ze,Xe;D(!0),ue.preventDefault();const re=new FormData(ue.currentTarget),ie=JSON.parse((Pe=e.properties)==null?void 0:Pe.tags);re.forEach((Ze,nt)=>{typeof Ze=="string"&&Ze.length>0&&nt!=="comment"&&nt!=="source"&&(ie[nt]=Ze)});const ye={type:"way",id:e.id,version:(ze=e.properties)==null?void 0:ze.version,tags:ie,nodes:JSON.parse((Xe=e.properties)==null?void 0:Xe.nodes)};console.info(JSON.stringify(ye,null,2));const Te={create:[],modify:[ye],delete:[]},Se=re.get("comment");Se&&(ov.comment=Se.toString());const $e=re.get("source");$e&&(ov.source=$e.toString()),await Ds.uploadChangeset(ov,Te),D(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),ee=yt.useCallback(()=>{G(!0)},[]);return k.properties?pt.jsxs("div",{children:[pt.jsxs("div",{children:["OSM:"," ",pt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+k.properties.id,target:"_blank",children:k.properties.id})," | ",pt.jsx(uI,{feature:k}),I&&pt.jsxs("span",{children:[" | ","Address:"," ",pt.jsx(KR,{feature:k,fields:I})]})]}),c?pt.jsx(da,{icon:d_,spin:!0}):pt.jsx(pt.Fragment,{children:I?pt.jsxs("form",{onSubmit:q,children:[pt.jsx("div",{className:"flex flex-wrap",children:pt.jsx(tv,{feature:k,fieldOption:I.postcodeField,onChange:ee})}),pt.jsx("div",{className:"flex flex-wrap",children:I.mainFields.map(ue=>pt.jsx(tv,{feature:k,fieldOption:ue,onChange:ee,suggestList:ne},ue.key))}),pt.jsx("div",{className:"flex flex-wrap",children:I.detailFields.map(ue=>pt.jsx(tv,{feature:k,fieldOption:ue,onChange:ee},ue.key))}),pt.jsxs("div",{className:"flex flex-wrap",children:[pt.jsx(oj,{}),pt.jsx(YR,{defaultValue:U})]}),pt.jsx("div",{className:"flex flex-wrap",children:pt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[pt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((xe=b==null?void 0:b.properties)==null?void 0:xe.ISO_A3)==="JPN"&&pt.jsx("button",{type:"button",onClick:M,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),pt.jsxs("button",{type:"button",disabled:g,onClick:H,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",g&&pt.jsx(da,{icon:d_,spin:!0})]}),pt.jsx("button",{disabled:!J||$||!de,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!J&&pt.jsxs(pt.Fragment,{children:[pt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),pt.jsx(lI,{})]})]})})]}):pt.jsx("div",{className:"flex flex-wrap",children:pt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[pt.jsxs("div",{className:"py-2",children:[pt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(be=b==null?void 0:b.properties)==null?void 0:be.NAME," (ISO code:",(te=b==null?void 0:b.properties)==null?void 0:te.ISO_A3,") does not support yet."]}),pt.jsx("p",{children:pt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),pt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function aj(e,t){const[i,a]=yt.useState(e);return yt.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const lj={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},uj={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function cj(){const e=yt.useRef(null),[t,i]=yt.useState(),a=aj(t,2500),c=yt.useRef(null),[d,g]=yt.useState({type:"FeatureCollection",features:[]}),[l,b]=yt.useState("auto"),[w,I]=yt.useState(),[C,k]=yt.useState([]),{fetchOverpassBuildings:R,loadingOverpass:J}=IA();yt.useEffect(()=>{setTimeout(()=>{var E;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(E=c.current)==null||E.trigger())},500)},[]);const Y=yt.useCallback(E=>{const M=E.target.getCenter(),H=E.target.getZoom();i({zoom:H,latitude:M.lat,longitude:M.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),de=yt.useCallback(E=>{i(E.viewState)},[]),G=yt.useCallback(E=>{i(E.viewState)},[]);yt.useEffect(()=>{(async()=>{if(!a)return;const E=a,M=await R(E.latitude,E.longitude,E.zoom);g(M)})()},[a]);const $=yt.useCallback(E=>{var ve;b("pointer");const{features:M,point:{x:H,y:q}}=E,ee=M&&M[0];ee?((ve=e.current)==null||ve.setFeatureState({source:"buildings-source",id:ee.id},{hover:!0}),I({feature:ee,x:H,y:q})):I(void 0)},[]),D=yt.useCallback(E=>{var M;b("auto"),(M=e.current)==null||M.querySourceFeatures("buildings-source").map(H=>{var q;(q=e.current)==null||q.setFeatureState({source:"buildings-source",id:H.id},{hover:!1})}),I(void 0)},[]),ne=yt.useCallback(E=>{var H;Z();const M=E.features&&E.features[0];M&&((H=e.current)==null||H.setFeatureState({source:"buildings-source",id:M.id},{select:!0}),k([M]))},[]),Z=yt.useCallback(()=>{var E;(E=e.current)==null||E.querySourceFeatures("buildings-source").map(M=>{var H;(H=e.current)==null||H.setFeatureState({source:"buildings-source",id:M.id},{select:!1})}),k([])},[]),U=yt.useMemo(()=>{let E=25;return t&&(E=t.zoom<18?20:t.zoom<19?25:35),d.features.map((M,H)=>!M.properties||!M.properties.center?null:pt.jsx(O4,{style:{cursor:"pointer"},longitude:M.properties.center[0],latitude:M.properties.center[1],anchor:"center",children:pt.jsx(aF,{feature:M,size:E})},`marker-${H}`))},[d,t]);return pt.jsxs("div",{children:[pt.jsx(Uz,{}),pt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:pt.jsx(cF,{viewState:t})}),pt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[C.length>0&&pt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:pt.jsx("div",{style:{padding:"10px"},children:C.map(E=>pt.jsx(sj,{feature:E,onCancel:Z,onSubmit:Z},E.id))})}),pt.jsxs(F4,{ref:e,...t,onMove:de,onMoveEnd:G,onLoad:Y,interactiveLayerIds:["buildings-layer-fill"],onClick:ne,onMouseEnter:$,onMouseLeave:D,dragRotate:!1,boxZoom:!1,hash:!0,cursor:l,mapLib:IC,style:{width:"100%",height:"100%"},mapStyle:lj,children:[pt.jsx(B4,{id:"buildings-source",type:"geojson",data:d,children:pt.jsx(D4,{...uj})}),pt.jsx(R4,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),pt.jsx(j4,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),pt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?pt.jsx(da,{size:"2x",icon:Bz}):J?pt.jsx(da,{size:"2x",icon:d_,spin:!0}):pt.jsx(da,{size:"2x",icon:jz})}),U,w&&pt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:w.x+5,top:w.y+5},children:[pt.jsx(uI,{feature:w.feature}),pt.jsx("br",{}),pt.jsx(lF,{feature:w.feature}),pt.jsx($z,{feature:w.feature})]})]})]})]})}var AA={},ay={};ay.byteLength=dj;ay.toByteArray=mj;ay.fromByteArray=vj;var ua=[],as=[],hj=typeof Uint8Array<"u"?Uint8Array:Array,sv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Vc=0,fj=sv.length;Vc<fj;++Vc)ua[Vc]=sv[Vc],as[sv.charCodeAt(Vc)]=Vc;as[45]=62;as[95]=63;function PA(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function dj(e){var t=PA(e),i=t[0],a=t[1];return(i+a)*3/4-a}function pj(e,t,i){return(t+i)*3/4-i}function mj(e){var t,i=PA(e),a=i[0],c=i[1],d=new hj(pj(e,a,c)),g=0,l=c>0?a-4:a,b;for(b=0;b<l;b+=4)t=as[e.charCodeAt(b)]<<18|as[e.charCodeAt(b+1)]<<12|as[e.charCodeAt(b+2)]<<6|as[e.charCodeAt(b+3)],d[g++]=t>>16&255,d[g++]=t>>8&255,d[g++]=t&255;return c===2&&(t=as[e.charCodeAt(b)]<<2|as[e.charCodeAt(b+1)]>>4,d[g++]=t&255),c===1&&(t=as[e.charCodeAt(b)]<<10|as[e.charCodeAt(b+1)]<<4|as[e.charCodeAt(b+2)]>>2,d[g++]=t>>8&255,d[g++]=t&255),d}function gj(e){return ua[e>>18&63]+ua[e>>12&63]+ua[e>>6&63]+ua[e&63]}function yj(e,t,i){for(var a,c=[],d=t;d<i;d+=3)a=(e[d]<<16&16711680)+(e[d+1]<<8&65280)+(e[d+2]&255),c.push(gj(a));return c.join("")}function vj(e){for(var t,i=e.length,a=i%3,c=[],d=16383,g=0,l=i-a;g<l;g+=d)c.push(yj(e,g,g+d>l?l:g+d));return a===1?(t=e[i-1],c.push(ua[t>>2]+ua[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(ua[t>>10]+ua[t>>4&63]+ua[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=ay,i=ny,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=$,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,l.TYPED_ARRAY_SUPPORT=d(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const le=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(le,z),le.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function g(le){if(le>c)throw new RangeError('The value "'+le+'" is invalid for option "size"');const z=new Uint8Array(le);return Object.setPrototypeOf(z,l.prototype),z}function l(le,z,B){if(typeof le=="number"){if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(le)}return b(le,z,B)}l.poolSize=8192;function b(le,z,B){if(typeof le=="string")return k(le,z);if(ArrayBuffer.isView(le))return J(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(O(le,ArrayBuffer)||le&&O(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(O(le,SharedArrayBuffer)||le&&O(le.buffer,SharedArrayBuffer)))return Y(le,z,B);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ee=le.valueOf&&le.valueOf();if(Ee!=null&&Ee!==le)return l.from(Ee,z,B);const Ge=de(le);if(Ge)return Ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return l.from(le[Symbol.toPrimitive]("string"),z,B);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}l.from=function(le,z,B){return b(le,z,B)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function w(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function I(le,z,B){return w(le),le<=0?g(le):z!==void 0?typeof B=="string"?g(le).fill(z,B):g(le).fill(z):g(le)}l.alloc=function(le,z,B){return I(le,z,B)};function C(le){return w(le),g(le<0?0:G(le)|0)}l.allocUnsafe=function(le){return C(le)},l.allocUnsafeSlow=function(le){return C(le)};function k(le,z){if((typeof z!="string"||z==="")&&(z="utf8"),!l.isEncoding(z))throw new TypeError("Unknown encoding: "+z);const B=D(le,z)|0;let Ee=g(B);const Ge=Ee.write(le,z);return Ge!==B&&(Ee=Ee.slice(0,Ge)),Ee}function R(le){const z=le.length<0?0:G(le.length)|0,B=g(z);for(let Ee=0;Ee<z;Ee+=1)B[Ee]=le[Ee]&255;return B}function J(le){if(O(le,Uint8Array)){const z=new Uint8Array(le);return Y(z.buffer,z.byteOffset,z.byteLength)}return R(le)}function Y(le,z,B){if(z<0||le.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<z+(B||0))throw new RangeError('"length" is outside of buffer bounds');let Ee;return z===void 0&&B===void 0?Ee=new Uint8Array(le):B===void 0?Ee=new Uint8Array(le,z):Ee=new Uint8Array(le,z,B),Object.setPrototypeOf(Ee,l.prototype),Ee}function de(le){if(l.isBuffer(le)){const z=G(le.length)|0,B=g(z);return B.length===0||le.copy(B,0,0,z),B}if(le.length!==void 0)return typeof le.length!="number"||pe(le.length)?g(0):R(le);if(le.type==="Buffer"&&Array.isArray(le.data))return R(le.data)}function G(le){if(le>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return le|0}function $(le){return+le!=le&&(le=0),l.alloc(+le)}l.isBuffer=function(z){return z!=null&&z._isBuffer===!0&&z!==l.prototype},l.compare=function(z,B){if(O(z,Uint8Array)&&(z=l.from(z,z.offset,z.byteLength)),O(B,Uint8Array)&&(B=l.from(B,B.offset,B.byteLength)),!l.isBuffer(z)||!l.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===B)return 0;let Ee=z.length,Ge=B.length;for(let je=0,at=Math.min(Ee,Ge);je<at;++je)if(z[je]!==B[je]){Ee=z[je],Ge=B[je];break}return Ee<Ge?-1:Ge<Ee?1:0},l.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(z,B){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(z.length===0)return l.alloc(0);let Ee;if(B===void 0)for(B=0,Ee=0;Ee<z.length;++Ee)B+=z[Ee].length;const Ge=l.allocUnsafe(B);let je=0;for(Ee=0;Ee<z.length;++Ee){let at=z[Ee];if(O(at,Uint8Array))je+at.length>Ge.length?(l.isBuffer(at)||(at=l.from(at)),at.copy(Ge,je)):Uint8Array.prototype.set.call(Ge,at,je);else if(l.isBuffer(at))at.copy(Ge,je);else throw new TypeError('"list" argument must be an Array of Buffers');je+=at.length}return Ge};function D(le,z){if(l.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||O(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);const B=le.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&B===0)return 0;let Ge=!1;for(;;)switch(z){case"ascii":case"latin1":case"binary":return B;case"utf8":case"utf-8":return yn(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B*2;case"hex":return B>>>1;case"base64":return se(le).length;default:if(Ge)return Ee?-1:yn(le).length;z=(""+z).toLowerCase(),Ge=!0}}l.byteLength=D;function ne(le,z,B){let Ee=!1;if((z===void 0||z<0)&&(z=0),z>this.length||((B===void 0||B>this.length)&&(B=this.length),B<=0)||(B>>>=0,z>>>=0,B<=z))return"";for(le||(le="utf8");;)switch(le){case"hex":return ye(this,z,B);case"utf8":case"utf-8":return be(this,z,B);case"ascii":return re(this,z,B);case"latin1":case"binary":return ie(this,z,B);case"base64":return xe(this,z,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,z,B);default:if(Ee)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Ee=!0}}l.prototype._isBuffer=!0;function Z(le,z,B){const Ee=le[z];le[z]=le[B],le[B]=Ee}l.prototype.swap16=function(){const z=this.length;if(z%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let B=0;B<z;B+=2)Z(this,B,B+1);return this},l.prototype.swap32=function(){const z=this.length;if(z%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let B=0;B<z;B+=4)Z(this,B,B+3),Z(this,B+1,B+2);return this},l.prototype.swap64=function(){const z=this.length;if(z%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let B=0;B<z;B+=8)Z(this,B,B+7),Z(this,B+1,B+6),Z(this,B+2,B+5),Z(this,B+3,B+4);return this},l.prototype.toString=function(){const z=this.length;return z===0?"":arguments.length===0?be(this,0,z):ne.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(z){if(!l.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z?!0:l.compare(this,z)===0},l.prototype.inspect=function(){let z="";const B=e.INSPECT_MAX_BYTES;return z=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(z+=" ... "),"<Buffer "+z+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(z,B,Ee,Ge,je){if(O(z,Uint8Array)&&(z=l.from(z,z.offset,z.byteLength)),!l.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(B===void 0&&(B=0),Ee===void 0&&(Ee=z?z.length:0),Ge===void 0&&(Ge=0),je===void 0&&(je=this.length),B<0||Ee>z.length||Ge<0||je>this.length)throw new RangeError("out of range index");if(Ge>=je&&B>=Ee)return 0;if(Ge>=je)return-1;if(B>=Ee)return 1;if(B>>>=0,Ee>>>=0,Ge>>>=0,je>>>=0,this===z)return 0;let at=je-Ge,jt=Ee-B;const Tn=Math.min(at,jt),vn=this.slice(Ge,je),_t=z.slice(B,Ee);for(let Rt=0;Rt<Tn;++Rt)if(vn[Rt]!==_t[Rt]){at=vn[Rt],jt=_t[Rt];break}return at<jt?-1:jt<at?1:0};function U(le,z,B,Ee,Ge){if(le.length===0)return-1;if(typeof B=="string"?(Ee=B,B=0):B>2147483647?B=2147483647:B<-2147483648&&(B=-2147483648),B=+B,pe(B)&&(B=Ge?0:le.length-1),B<0&&(B=le.length+B),B>=le.length){if(Ge)return-1;B=le.length-1}else if(B<0)if(Ge)B=0;else return-1;if(typeof z=="string"&&(z=l.from(z,Ee)),l.isBuffer(z))return z.length===0?-1:E(le,z,B,Ee,Ge);if(typeof z=="number")return z=z&255,typeof Uint8Array.prototype.indexOf=="function"?Ge?Uint8Array.prototype.indexOf.call(le,z,B):Uint8Array.prototype.lastIndexOf.call(le,z,B):E(le,[z],B,Ee,Ge);throw new TypeError("val must be string, number or Buffer")}function E(le,z,B,Ee,Ge){let je=1,at=le.length,jt=z.length;if(Ee!==void 0&&(Ee=String(Ee).toLowerCase(),Ee==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(le.length<2||z.length<2)return-1;je=2,at/=2,jt/=2,B/=2}function Tn(_t,Rt){return je===1?_t[Rt]:_t.readUInt16BE(Rt*je)}let vn;if(Ge){let _t=-1;for(vn=B;vn<at;vn++)if(Tn(le,vn)===Tn(z,_t===-1?0:vn-_t)){if(_t===-1&&(_t=vn),vn-_t+1===jt)return _t*je}else _t!==-1&&(vn-=vn-_t),_t=-1}else for(B+jt>at&&(B=at-jt),vn=B;vn>=0;vn--){let _t=!0;for(let Rt=0;Rt<jt;Rt++)if(Tn(le,vn+Rt)!==Tn(z,Rt)){_t=!1;break}if(_t)return vn}return-1}l.prototype.includes=function(z,B,Ee){return this.indexOf(z,B,Ee)!==-1},l.prototype.indexOf=function(z,B,Ee){return U(this,z,B,Ee,!0)},l.prototype.lastIndexOf=function(z,B,Ee){return U(this,z,B,Ee,!1)};function M(le,z,B,Ee){B=Number(B)||0;const Ge=le.length-B;Ee?(Ee=Number(Ee),Ee>Ge&&(Ee=Ge)):Ee=Ge;const je=z.length;Ee>je/2&&(Ee=je/2);let at;for(at=0;at<Ee;++at){const jt=parseInt(z.substr(at*2,2),16);if(pe(jt))return at;le[B+at]=jt}return at}function H(le,z,B,Ee){return j(yn(z,le.length-B),le,B,Ee)}function q(le,z,B,Ee){return j(sn(z),le,B,Ee)}function ee(le,z,B,Ee){return j(se(z),le,B,Ee)}function ve(le,z,B,Ee){return j(gn(z,le.length-B),le,B,Ee)}l.prototype.write=function(z,B,Ee,Ge){if(B===void 0)Ge="utf8",Ee=this.length,B=0;else if(Ee===void 0&&typeof B=="string")Ge=B,Ee=this.length,B=0;else if(isFinite(B))B=B>>>0,isFinite(Ee)?(Ee=Ee>>>0,Ge===void 0&&(Ge="utf8")):(Ge=Ee,Ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const je=this.length-B;if((Ee===void 0||Ee>je)&&(Ee=je),z.length>0&&(Ee<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ge||(Ge="utf8");let at=!1;for(;;)switch(Ge){case"hex":return M(this,z,B,Ee);case"utf8":case"utf-8":return H(this,z,B,Ee);case"ascii":case"latin1":case"binary":return q(this,z,B,Ee);case"base64":return ee(this,z,B,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,z,B,Ee);default:if(at)throw new TypeError("Unknown encoding: "+Ge);Ge=(""+Ge).toLowerCase(),at=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function xe(le,z,B){return z===0&&B===le.length?t.fromByteArray(le):t.fromByteArray(le.slice(z,B))}function be(le,z,B){B=Math.min(le.length,B);const Ee=[];let Ge=z;for(;Ge<B;){const je=le[Ge];let at=null,jt=je>239?4:je>223?3:je>191?2:1;if(Ge+jt<=B){let Tn,vn,_t,Rt;switch(jt){case 1:je<128&&(at=je);break;case 2:Tn=le[Ge+1],(Tn&192)===128&&(Rt=(je&31)<<6|Tn&63,Rt>127&&(at=Rt));break;case 3:Tn=le[Ge+1],vn=le[Ge+2],(Tn&192)===128&&(vn&192)===128&&(Rt=(je&15)<<12|(Tn&63)<<6|vn&63,Rt>2047&&(Rt<55296||Rt>57343)&&(at=Rt));break;case 4:Tn=le[Ge+1],vn=le[Ge+2],_t=le[Ge+3],(Tn&192)===128&&(vn&192)===128&&(_t&192)===128&&(Rt=(je&15)<<18|(Tn&63)<<12|(vn&63)<<6|_t&63,Rt>65535&&Rt<1114112&&(at=Rt))}}at===null?(at=65533,jt=1):at>65535&&(at-=65536,Ee.push(at>>>10&1023|55296),at=56320|at&1023),Ee.push(at),Ge+=jt}return ue(Ee)}const te=4096;function ue(le){const z=le.length;if(z<=te)return String.fromCharCode.apply(String,le);let B="",Ee=0;for(;Ee<z;)B+=String.fromCharCode.apply(String,le.slice(Ee,Ee+=te));return B}function re(le,z,B){let Ee="";B=Math.min(le.length,B);for(let Ge=z;Ge<B;++Ge)Ee+=String.fromCharCode(le[Ge]&127);return Ee}function ie(le,z,B){let Ee="";B=Math.min(le.length,B);for(let Ge=z;Ge<B;++Ge)Ee+=String.fromCharCode(le[Ge]);return Ee}function ye(le,z,B){const Ee=le.length;(!z||z<0)&&(z=0),(!B||B<0||B>Ee)&&(B=Ee);let Ge="";for(let je=z;je<B;++je)Ge+=Be[le[je]];return Ge}function Te(le,z,B){const Ee=le.slice(z,B);let Ge="";for(let je=0;je<Ee.length-1;je+=2)Ge+=String.fromCharCode(Ee[je]+Ee[je+1]*256);return Ge}l.prototype.slice=function(z,B){const Ee=this.length;z=~~z,B=B===void 0?Ee:~~B,z<0?(z+=Ee,z<0&&(z=0)):z>Ee&&(z=Ee),B<0?(B+=Ee,B<0&&(B=0)):B>Ee&&(B=Ee),B<z&&(B=z);const Ge=this.subarray(z,B);return Object.setPrototypeOf(Ge,l.prototype),Ge};function Se(le,z,B){if(le%1!==0||le<0)throw new RangeError("offset is not uint");if(le+z>B)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(z,B,Ee){z=z>>>0,B=B>>>0,Ee||Se(z,B,this.length);let Ge=this[z],je=1,at=0;for(;++at<B&&(je*=256);)Ge+=this[z+at]*je;return Ge},l.prototype.readUintBE=l.prototype.readUIntBE=function(z,B,Ee){z=z>>>0,B=B>>>0,Ee||Se(z,B,this.length);let Ge=this[z+--B],je=1;for(;B>0&&(je*=256);)Ge+=this[z+--B]*je;return Ge},l.prototype.readUint8=l.prototype.readUInt8=function(z,B){return z=z>>>0,B||Se(z,1,this.length),this[z]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(z,B){return z=z>>>0,B||Se(z,2,this.length),this[z]|this[z+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(z,B){return z=z>>>0,B||Se(z,2,this.length),this[z]<<8|this[z+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(z,B){return z=z>>>0,B||Se(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+this[z+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(z,B){return z=z>>>0,B||Se(z,4,this.length),this[z]*16777216+(this[z+1]<<16|this[z+2]<<8|this[z+3])},l.prototype.readBigUInt64LE=et(function(z){z=z>>>0,Gt(z,"offset");const B=this[z],Ee=this[z+7];(B===void 0||Ee===void 0)&&Ut(z,this.length-8);const Ge=B+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24,je=this[++z]+this[++z]*2**8+this[++z]*2**16+Ee*2**24;return BigInt(Ge)+(BigInt(je)<<BigInt(32))}),l.prototype.readBigUInt64BE=et(function(z){z=z>>>0,Gt(z,"offset");const B=this[z],Ee=this[z+7];(B===void 0||Ee===void 0)&&Ut(z,this.length-8);const Ge=B*2**24+this[++z]*2**16+this[++z]*2**8+this[++z],je=this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+Ee;return(BigInt(Ge)<<BigInt(32))+BigInt(je)}),l.prototype.readIntLE=function(z,B,Ee){z=z>>>0,B=B>>>0,Ee||Se(z,B,this.length);let Ge=this[z],je=1,at=0;for(;++at<B&&(je*=256);)Ge+=this[z+at]*je;return je*=128,Ge>=je&&(Ge-=Math.pow(2,8*B)),Ge},l.prototype.readIntBE=function(z,B,Ee){z=z>>>0,B=B>>>0,Ee||Se(z,B,this.length);let Ge=B,je=1,at=this[z+--Ge];for(;Ge>0&&(je*=256);)at+=this[z+--Ge]*je;return je*=128,at>=je&&(at-=Math.pow(2,8*B)),at},l.prototype.readInt8=function(z,B){return z=z>>>0,B||Se(z,1,this.length),this[z]&128?(255-this[z]+1)*-1:this[z]},l.prototype.readInt16LE=function(z,B){z=z>>>0,B||Se(z,2,this.length);const Ee=this[z]|this[z+1]<<8;return Ee&32768?Ee|4294901760:Ee},l.prototype.readInt16BE=function(z,B){z=z>>>0,B||Se(z,2,this.length);const Ee=this[z+1]|this[z]<<8;return Ee&32768?Ee|4294901760:Ee},l.prototype.readInt32LE=function(z,B){return z=z>>>0,B||Se(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},l.prototype.readInt32BE=function(z,B){return z=z>>>0,B||Se(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},l.prototype.readBigInt64LE=et(function(z){z=z>>>0,Gt(z,"offset");const B=this[z],Ee=this[z+7];(B===void 0||Ee===void 0)&&Ut(z,this.length-8);const Ge=this[z+4]+this[z+5]*2**8+this[z+6]*2**16+(Ee<<24);return(BigInt(Ge)<<BigInt(32))+BigInt(B+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24)}),l.prototype.readBigInt64BE=et(function(z){z=z>>>0,Gt(z,"offset");const B=this[z],Ee=this[z+7];(B===void 0||Ee===void 0)&&Ut(z,this.length-8);const Ge=(B<<24)+this[++z]*2**16+this[++z]*2**8+this[++z];return(BigInt(Ge)<<BigInt(32))+BigInt(this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+Ee)}),l.prototype.readFloatLE=function(z,B){return z=z>>>0,B||Se(z,4,this.length),i.read(this,z,!0,23,4)},l.prototype.readFloatBE=function(z,B){return z=z>>>0,B||Se(z,4,this.length),i.read(this,z,!1,23,4)},l.prototype.readDoubleLE=function(z,B){return z=z>>>0,B||Se(z,8,this.length),i.read(this,z,!0,52,8)},l.prototype.readDoubleBE=function(z,B){return z=z>>>0,B||Se(z,8,this.length),i.read(this,z,!1,52,8)};function $e(le,z,B,Ee,Ge,je){if(!l.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>Ge||z<je)throw new RangeError('"value" argument is out of bounds');if(B+Ee>le.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(z,B,Ee,Ge){if(z=+z,B=B>>>0,Ee=Ee>>>0,!Ge){const jt=Math.pow(2,8*Ee)-1;$e(this,z,B,Ee,jt,0)}let je=1,at=0;for(this[B]=z&255;++at<Ee&&(je*=256);)this[B+at]=z/je&255;return B+Ee},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(z,B,Ee,Ge){if(z=+z,B=B>>>0,Ee=Ee>>>0,!Ge){const jt=Math.pow(2,8*Ee)-1;$e(this,z,B,Ee,jt,0)}let je=Ee-1,at=1;for(this[B+je]=z&255;--je>=0&&(at*=256);)this[B+je]=z/at&255;return B+Ee},l.prototype.writeUint8=l.prototype.writeUInt8=function(z,B,Ee){return z=+z,B=B>>>0,Ee||$e(this,z,B,1,255,0),this[B]=z&255,B+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(z,B,Ee){return z=+z,B=B>>>0,Ee||$e(this,z,B,2,65535,0),this[B]=z&255,this[B+1]=z>>>8,B+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(z,B,Ee){return z=+z,B=B>>>0,Ee||$e(this,z,B,2,65535,0),this[B]=z>>>8,this[B+1]=z&255,B+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(z,B,Ee){return z=+z,B=B>>>0,Ee||$e(this,z,B,4,4294967295,0),this[B+3]=z>>>24,this[B+2]=z>>>16,this[B+1]=z>>>8,this[B]=z&255,B+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(z,B,Ee){return z=+z,B=B>>>0,Ee||$e(this,z,B,4,4294967295,0),this[B]=z>>>24,this[B+1]=z>>>16,this[B+2]=z>>>8,this[B+3]=z&255,B+4};function Pe(le,z,B,Ee,Ge){St(z,Ee,Ge,le,B,7);let je=Number(z&BigInt(4294967295));le[B++]=je,je=je>>8,le[B++]=je,je=je>>8,le[B++]=je,je=je>>8,le[B++]=je;let at=Number(z>>BigInt(32)&BigInt(4294967295));return le[B++]=at,at=at>>8,le[B++]=at,at=at>>8,le[B++]=at,at=at>>8,le[B++]=at,B}function ze(le,z,B,Ee,Ge){St(z,Ee,Ge,le,B,7);let je=Number(z&BigInt(4294967295));le[B+7]=je,je=je>>8,le[B+6]=je,je=je>>8,le[B+5]=je,je=je>>8,le[B+4]=je;let at=Number(z>>BigInt(32)&BigInt(4294967295));return le[B+3]=at,at=at>>8,le[B+2]=at,at=at>>8,le[B+1]=at,at=at>>8,le[B]=at,B+8}l.prototype.writeBigUInt64LE=et(function(z,B=0){return Pe(this,z,B,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=et(function(z,B=0){return ze(this,z,B,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(z,B,Ee,Ge){if(z=+z,B=B>>>0,!Ge){const Tn=Math.pow(2,8*Ee-1);$e(this,z,B,Ee,Tn-1,-Tn)}let je=0,at=1,jt=0;for(this[B]=z&255;++je<Ee&&(at*=256);)z<0&&jt===0&&this[B+je-1]!==0&&(jt=1),this[B+je]=(z/at>>0)-jt&255;return B+Ee},l.prototype.writeIntBE=function(z,B,Ee,Ge){if(z=+z,B=B>>>0,!Ge){const Tn=Math.pow(2,8*Ee-1);$e(this,z,B,Ee,Tn-1,-Tn)}let je=Ee-1,at=1,jt=0;for(this[B+je]=z&255;--je>=0&&(at*=256);)z<0&&jt===0&&this[B+je+1]!==0&&(jt=1),this[B+je]=(z/at>>0)-jt&255;return B+Ee},l.prototype.writeInt8=function(z,B,Ee){return z=+z,B=B>>>0,Ee||$e(this,z,B,1,127,-128),z<0&&(z=255+z+1),this[B]=z&255,B+1},l.prototype.writeInt16LE=function(z,B,Ee){return z=+z,B=B>>>0,Ee||$e(this,z,B,2,32767,-32768),this[B]=z&255,this[B+1]=z>>>8,B+2},l.prototype.writeInt16BE=function(z,B,Ee){return z=+z,B=B>>>0,Ee||$e(this,z,B,2,32767,-32768),this[B]=z>>>8,this[B+1]=z&255,B+2},l.prototype.writeInt32LE=function(z,B,Ee){return z=+z,B=B>>>0,Ee||$e(this,z,B,4,2147483647,-2147483648),this[B]=z&255,this[B+1]=z>>>8,this[B+2]=z>>>16,this[B+3]=z>>>24,B+4},l.prototype.writeInt32BE=function(z,B,Ee){return z=+z,B=B>>>0,Ee||$e(this,z,B,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[B]=z>>>24,this[B+1]=z>>>16,this[B+2]=z>>>8,this[B+3]=z&255,B+4},l.prototype.writeBigInt64LE=et(function(z,B=0){return Pe(this,z,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=et(function(z,B=0){return ze(this,z,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Xe(le,z,B,Ee,Ge,je){if(B+Ee>le.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("Index out of range")}function Ze(le,z,B,Ee,Ge){return z=+z,B=B>>>0,Ge||Xe(le,z,B,4),i.write(le,z,B,Ee,23,4),B+4}l.prototype.writeFloatLE=function(z,B,Ee){return Ze(this,z,B,!0,Ee)},l.prototype.writeFloatBE=function(z,B,Ee){return Ze(this,z,B,!1,Ee)};function nt(le,z,B,Ee,Ge){return z=+z,B=B>>>0,Ge||Xe(le,z,B,8),i.write(le,z,B,Ee,52,8),B+8}l.prototype.writeDoubleLE=function(z,B,Ee){return nt(this,z,B,!0,Ee)},l.prototype.writeDoubleBE=function(z,B,Ee){return nt(this,z,B,!1,Ee)},l.prototype.copy=function(z,B,Ee,Ge){if(!l.isBuffer(z))throw new TypeError("argument should be a Buffer");if(Ee||(Ee=0),!Ge&&Ge!==0&&(Ge=this.length),B>=z.length&&(B=z.length),B||(B=0),Ge>0&&Ge<Ee&&(Ge=Ee),Ge===Ee||z.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(Ee<0||Ee>=this.length)throw new RangeError("Index out of range");if(Ge<0)throw new RangeError("sourceEnd out of bounds");Ge>this.length&&(Ge=this.length),z.length-B<Ge-Ee&&(Ge=z.length-B+Ee);const je=Ge-Ee;return this===z&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(B,Ee,Ge):Uint8Array.prototype.set.call(z,this.subarray(Ee,Ge),B),je},l.prototype.fill=function(z,B,Ee,Ge){if(typeof z=="string"){if(typeof B=="string"?(Ge=B,B=0,Ee=this.length):typeof Ee=="string"&&(Ge=Ee,Ee=this.length),Ge!==void 0&&typeof Ge!="string")throw new TypeError("encoding must be a string");if(typeof Ge=="string"&&!l.isEncoding(Ge))throw new TypeError("Unknown encoding: "+Ge);if(z.length===1){const at=z.charCodeAt(0);(Ge==="utf8"&&at<128||Ge==="latin1")&&(z=at)}}else typeof z=="number"?z=z&255:typeof z=="boolean"&&(z=Number(z));if(B<0||this.length<B||this.length<Ee)throw new RangeError("Out of range index");if(Ee<=B)return this;B=B>>>0,Ee=Ee===void 0?this.length:Ee>>>0,z||(z=0);let je;if(typeof z=="number")for(je=B;je<Ee;++je)this[je]=z;else{const at=l.isBuffer(z)?z:l.from(z,Ge),jt=at.length;if(jt===0)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(je=0;je<Ee-B;++je)this[je+B]=at[je%jt]}return this};const ct={};function vt(le,z,B){ct[le]=class extends B{constructor(){super(),Object.defineProperty(this,"message",{value:z.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${le}]`,this.stack,delete this.name}get code(){return le}set code(Ge){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ge,writable:!0})}toString(){return`${this.name} [${le}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?`${le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(le,z){return`The "${le}" argument must be of type number. Received type ${typeof z}`},TypeError),vt("ERR_OUT_OF_RANGE",function(le,z,B){let Ee=`The value of "${le}" is out of range.`,Ge=B;return Number.isInteger(B)&&Math.abs(B)>2**32?Ge=It(String(B)):typeof B=="bigint"&&(Ge=String(B),(B>BigInt(2)**BigInt(32)||B<-(BigInt(2)**BigInt(32)))&&(Ge=It(Ge)),Ge+="n"),Ee+=` It must be ${z}. Received ${Ge}`,Ee},RangeError);function It(le){let z="",B=le.length;const Ee=le[0]==="-"?1:0;for(;B>=Ee+4;B-=3)z=`_${le.slice(B-3,B)}${z}`;return`${le.slice(0,B)}${z}`}function ft(le,z,B){Gt(z,"offset"),(le[z]===void 0||le[z+B]===void 0)&&Ut(z,le.length-(B+1))}function St(le,z,B,Ee,Ge,je){if(le>B||le<z){const at=typeof z=="bigint"?"n":"";let jt;throw je>3?z===0||z===BigInt(0)?jt=`>= 0${at} and < 2${at} ** ${(je+1)*8}${at}`:jt=`>= -(2${at} ** ${(je+1)*8-1}${at}) and < 2 ** ${(je+1)*8-1}${at}`:jt=`>= ${z}${at} and <= ${B}${at}`,new ct.ERR_OUT_OF_RANGE("value",jt,le)}ft(Ee,Ge,je)}function Gt(le,z){if(typeof le!="number")throw new ct.ERR_INVALID_ARG_TYPE(z,"number",le)}function Ut(le,z,B){throw Math.floor(le)!==le?(Gt(le,B),new ct.ERR_OUT_OF_RANGE(B||"offset","an integer",le)):z<0?new ct.ERR_BUFFER_OUT_OF_BOUNDS:new ct.ERR_OUT_OF_RANGE(B||"offset",`>= ${B?1:0} and <= ${z}`,le)}const cn=/[^+/0-9A-Za-z-_]/g;function xn(le){if(le=le.split("=")[0],le=le.trim().replace(cn,""),le.length<2)return"";for(;le.length%4!==0;)le=le+"=";return le}function yn(le,z){z=z||1/0;let B;const Ee=le.length;let Ge=null;const je=[];for(let at=0;at<Ee;++at){if(B=le.charCodeAt(at),B>55295&&B<57344){if(!Ge){if(B>56319){(z-=3)>-1&&je.push(239,191,189);continue}else if(at+1===Ee){(z-=3)>-1&&je.push(239,191,189);continue}Ge=B;continue}if(B<56320){(z-=3)>-1&&je.push(239,191,189),Ge=B;continue}B=(Ge-55296<<10|B-56320)+65536}else Ge&&(z-=3)>-1&&je.push(239,191,189);if(Ge=null,B<128){if((z-=1)<0)break;je.push(B)}else if(B<2048){if((z-=2)<0)break;je.push(B>>6|192,B&63|128)}else if(B<65536){if((z-=3)<0)break;je.push(B>>12|224,B>>6&63|128,B&63|128)}else if(B<1114112){if((z-=4)<0)break;je.push(B>>18|240,B>>12&63|128,B>>6&63|128,B&63|128)}else throw new Error("Invalid code point")}return je}function sn(le){const z=[];for(let B=0;B<le.length;++B)z.push(le.charCodeAt(B)&255);return z}function gn(le,z){let B,Ee,Ge;const je=[];for(let at=0;at<le.length&&!((z-=2)<0);++at)B=le.charCodeAt(at),Ee=B>>8,Ge=B%256,je.push(Ge),je.push(Ee);return je}function se(le){return t.toByteArray(xn(le))}function j(le,z,B,Ee){let Ge;for(Ge=0;Ge<Ee&&!(Ge+B>=z.length||Ge>=le.length);++Ge)z[Ge+B]=le[Ge];return Ge}function O(le,z){return le instanceof z||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===z.name}function pe(le){return le!==le}const Be=function(){const le="0123456789abcdef",z=new Array(256);for(let B=0;B<16;++B){const Ee=B*16;for(let Ge=0;Ge<16;++Ge)z[Ee+Ge]=le[B]+le[Ge]}return z}();function et(le){return typeof BigInt>"u"?lt:le}function lt(){throw new Error("BigInt not supported")}})(AA);window.Buffer=AA.Buffer;q3.render(pt.jsx(q_.StrictMode,{children:pt.jsx(cj,{})}),document.getElementById("root"));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}